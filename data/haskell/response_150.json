[{"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511387797, "post_id": 47444436, "comment_id": 81844187, "body": "For a data structure? or a module?"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1511388024, "post_id": 47444436, "comment_id": 81844289, "body": "In GHCi: <code>:browse &lt;your-module&gt;</code>"}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1511388528, "post_id": 47444436, "comment_id": 81844505, "body": "Are you talking specifically about REPL?"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1511388379, "post_id": 47444554, "comment_id": 81844436, "body": "To be fair, I haven&#39;t found a whole lot of functions yet where the type system hasn&#39;t entirely informed my understanding of the function, so <code>help</code> has never seemed like a big loss (also coming from Python)"}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 3, "last_activity_date": 1511388113, "creation_date": 1511388113, "answer_id": 47444554, "question_id": 47444436, "link": "https://stackoverflow.com/questions/47444436/in-haskell-how-can-i-get-a-list-of-available-functions-for-a-data-structure/47444554#47444554", "title": "In Haskell, how can I get a list of available functions for a data structure?", "body": "<p>In Python, you can use <code>dir</code> to learn about the methods and fields of an object or function. There is no analogue in Haskell. <code>:info</code> is occasionally useful when used on a type or constructor, but its output is spare compared to Python's <code>dir</code>.</p>\n\n<p>In Python, you can use <code>dir</code> to learn about the functions, classes, and values defined by a module. In Haskell, you can use <code>:browse</code> in ghci to do the same.</p>\n\n<p>In Python, you can use <code>help</code> to get some programmer-written text describing a function or other object. In Haskell, you can browse the Haddocks on Hackage to do the same. There is <a href=\"http://hackage.haskell.org/package/haskell-docs\" rel=\"nofollow noreferrer\">a tool</a> that ostensibly brings this capability to ghci, assuming you have the appropriate documentation installed locally, but it is not well maintained, and has broken for me several times.</p>\n"}, {"tags": [], "owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "is_accepted": false, "score": 3, "last_activity_date": 1511388376, "creation_date": 1511388376, "answer_id": 47444601, "question_id": 47444436, "link": "https://stackoverflow.com/questions/47444436/in-haskell-how-can-i-get-a-list-of-available-functions-for-a-data-structure/47444601#47444601", "title": "In Haskell, how can I get a list of available functions for a data structure?", "body": "<p><a href=\"https://www.haskell.org/hoogle/\" rel=\"nofollow noreferrer\">https://www.haskell.org/hoogle/</a> can help a bit. Give it a module name or a desired signature.</p>\n\n<p>Classes in Haskell are unlike Python's. Python's class instances are collections of partially-applied functions (bound to <code>self</code>). Haskell classes are more like interfaces from Java or even Go: if something conforms to a list of function signatures, it can \"belong to the class\".</p>\n\n<p>Functions applicable to data defined in a module are usually described in that module. But a data item can also conform to <em>other</em> interfaces aka typeclasses (like <code>Foldable</code>, <code>Traversable</code>, <code>Applicative</code>, etc), and all functions defined for these typeclasses are <em>also</em> applicable.</p>\n\n<p>More than that, you can define a typeclass in your own module and describe something already existing to conform to it by writing an implementation of the required functions. This makes finding \"all applicable functions\" even more context-dependent.</p>\n"}], "owner": {"reputation": 8964, "user_id": 584121, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3c7af62d226bc7420d49128d03a5b139?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/584121/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "closed_date": 1511388390, "answer_count": 2, "score": 4, "last_activity_date": 1511388376, "creation_date": 1511387586, "question_id": 47444436, "link": "https://stackoverflow.com/questions/47444436/in-haskell-how-can-i-get-a-list-of-available-functions-for-a-data-structure", "closed_reason": "Duplicate", "title": "In Haskell, how can I get a list of available functions for a data structure?", "body": "<p>I know I'm asking the wrong question here, but I'm coming to Haskell from Python, and I'd like to know how to get what would be the equivalent of a list of available methods for a class. For example, if I'm using HXT to parse an XML file, and there are some functions I can use on the resulting data structure, <code>NTree</code>, like the function <code>getChildren</code>, for instance, how would I go about getting a list of them from, say, ghci? In Python I can just import a module and type module. to get a list. </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511387566, "post_id": 47444390, "comment_id": 81844089, "body": "Any attempt on you side?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1511387617, "post_id": 47444390, "comment_id": 81844111, "body": "Furthermore what should happen if there are two threes in the list (or more)?"}, {"owner": {"reputation": 41, "user_id": 8972834, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1084d7ea140fbad38f6db15e43552489?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyPire", "link": "https://stackoverflow.com/users/8972834/johnnypire"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511388240, "post_id": 47444390, "comment_id": 81844377, "body": "It&#39;s a list of Int!"}, {"owner": {"reputation": 41, "user_id": 8972834, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1084d7ea140fbad38f6db15e43552489?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyPire", "link": "https://stackoverflow.com/users/8972834/johnnypire"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511388267, "post_id": 47444390, "comment_id": 81844395, "body": "and no, I have no ideia how to do it!"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 1, "creation_date": 1511388366, "post_id": 47444390, "comment_id": 81844432, "body": "<code>map (\\x -&gt; if x == 3 then function x else x) List</code>"}, {"owner": {"reputation": 41, "user_id": 8972834, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1084d7ea140fbad38f6db15e43552489?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyPire", "link": "https://stackoverflow.com/users/8972834/johnnypire"}, "edited": false, "score": 0, "creation_date": 1511388700, "post_id": 47444390, "comment_id": 81844553, "body": "4castle, changed the problem! Can u please get update?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1511388839, "post_id": 47444390, "comment_id": 81844599, "body": "See <a href=\"https://meta.stackoverflow.com/questions/260828/do-we-need-a-close-reason-for-zero-effort-questions\">here</a> for details on my close vote. &quot;I didn&#39;t try&quot; is a motivation problem, not a programming problem. Spend some time with a Haskell tutorial, and come back when you have a programming problem."}, {"owner": {"reputation": 41, "user_id": 8972834, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1084d7ea140fbad38f6db15e43552489?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyPire", "link": "https://stackoverflow.com/users/8972834/johnnypire"}, "edited": false, "score": 0, "creation_date": 1511389371, "post_id": 47444390, "comment_id": 81844818, "body": "I tried the same solution 4castle did"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1511393306, "post_id": 47444390, "comment_id": 81846105, "body": "Your solution does not seem to reflect your question. &quot;Map a list &#39;till I find an input&quot; is an interesting question, but your intended result seems to describe &quot;find an input from a list and mutate that input&quot; which is not."}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 2, "creation_date": 1511393526, "post_id": 47444390, "comment_id": 81846181, "body": "Please try to implement it yourself, whether using <code>foldr</code> or explicit recursion, and then ask a more specific question about what you&#39;ve attempted. Currently, it looks like you want someone else to do your work for you, which is not well suited for a Q&amp;A site."}], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1511396528, "last_edit_date": 1511396528, "creation_date": 1511394320, "answer_id": 47445512, "question_id": 47444390, "link": "https://stackoverflow.com/questions/47444390/how-to-apply-a-function-to-a-specific-element-of-a-list/47445512#47445512", "title": "How to apply a function to a specific element of a list", "body": "<p>you need to maintain some type of state to indicate the first instance of the value, since <code>map</code> will apply the function to all values.</p>\n\n<p>Perhaps something like this</p>\n\n<pre><code>map (\\(b,x) -&gt; if (b) then f x else x) $ markFirst 3 [1,2,3,4,3,6]\n</code></pre>\n\n<p>and </p>\n\n<pre><code>markFirst :: a -&gt; [a] -&gt; [(Boolean,a)]\nmarkFirst a [] = []\nmarkFirst a (x:xs) | x==a = (True,x): zip (repeat False) xs\n                   | otherwise = (False,x): markFirst a xs\n</code></pre>\n\n<p>I'm sure there is an easier way, but that's the best I came up with at this time on the day before Thanksgiving.</p>\n\n<p>Here is another approach based on the comment below</p>\n\n<pre><code>&gt; let leftap f (x,y) = f x ++ y\n\nleftap (map (\\x -&gt; if(x==3) then f x else x)) $ splitAt 3 [1,2,3,4,3,6]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 0, "last_activity_date": 1511396494, "creation_date": 1511396494, "answer_id": 47445778, "question_id": 47444390, "link": "https://stackoverflow.com/questions/47444390/how-to-apply-a-function-to-a-specific-element-of-a-list/47445778#47445778", "title": "How to apply a function to a specific element of a list", "body": "<p>To map or not to map, that is the question.</p>\n\n<p>Better not to map.</p>\n\n<p>Why? Because <code>map id == id</code> anyway, and you only want to map through <em>one</em> element, the first one found to be equal to the argument  given.</p>\n\n<p>Thus, split the list in two, change the found element, and glue them all back together. Simple.</p>\n\n<p>See: <code>span :: (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])</code>.</p>\n\n<p>Write: <code>revappend (xs :: [a]) (ys :: [a])</code> == <code>append (reverse xs) ys</code>, only efficient.</p>\n\n<p>Or fuse all the pieces together into one function. You can code it directly with manual recursion, or using <code>foldr</code>. Remember,</p>\n\n<pre><code>map f xs = foldr (\\x r -&gt; f x : r) [] xs\n\ntakeWhile p xs = foldr (\\x r -&gt; if p x then x : r else []) [] xs\n\ntakeUntil p xs = foldr (\\x r -&gt; if p x then [x] else x : r) [] xs\n\nfilter p xs = foldr (\\x r -&gt; if p x then x : r else r) [] xs\n\nduplicate xs = foldr (\\x r -&gt; x : x : r) [] xs\n\nmapFirstThat p f xs = -- ... your function\n</code></pre>\n\n<p>etc. Although, <code>foldr</code> won't be a direct fit, as you need the combining function of the <code>(\\x xs r -&gt; ...)</code> variety. That is known as paramorphism, and <a href=\"https://stackoverflow.com/a/25853459/849891\">can be faked</a> by feeding <code>tails xs</code> to the <code>foldr</code>, instead.</p>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1511406619, "creation_date": 1511406619, "answer_id": 47446958, "question_id": 47444390, "link": "https://stackoverflow.com/questions/47444390/how-to-apply-a-function-to-a-specific-element-of-a-list/47446958#47446958", "title": "How to apply a function to a specific element of a list", "body": "<p>You can just create a simple function which multiples a number by two:</p>\n\n<pre><code>times_two :: (Num a) =&gt; a -&gt; a\ntimes_two x = x * 2\n</code></pre>\n\n<p>Then simply search for the specified element in the list, and apply <code>times_two</code> to it. Something like this could work:</p>\n\n<pre><code>map_one_element :: (Eq a, Num a) =&gt; a -&gt; (a -&gt; a) -&gt; [a] -&gt; [a]\n\n-- base case\nmap_one_element _ _ [] = []\n\n-- recursive case\nmap_one_element x f (y:ys)\n\n    -- ff element is found, apply f to it and add rest of the list normally\n    | x == y = f y : ys\n\n    -- first occurence hasnt been found, keep recursing\n    | otherwise = y : map_one_element x f ys\n</code></pre>\n\n<p>Which works as follows:</p>\n\n<pre><code>*Main&gt; map_one_element 3 times_two [1,2,3,4,3,6]\n[1,2,6,4,3,6]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8972834, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1084d7ea140fbad38f6db15e43552489?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyPire", "link": "https://stackoverflow.com/users/8972834/johnnypire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 559, "favorite_count": 0, "answer_count": 3, "score": -8, "last_activity_date": 1511406619, "creation_date": 1511387367, "last_edit_date": 1511404077, "question_id": 47444390, "link": "https://stackoverflow.com/questions/47444390/how-to-apply-a-function-to-a-specific-element-of-a-list", "title": "How to apply a function to a specific element of a list", "body": "<p>How can I apply a function to only a single element of a list?\nAny suggestion?</p>\n\n<p>Example:</p>\n\n<pre><code>let list = [1,2,3,4,3,6]\n    function x = x * 2\nin ...\n</code></pre>\n\n<p>I want to apply <code>function</code> only to the first occurance of 3 and stop there. </p>\n\n<p>Output: </p>\n\n<pre><code>List = [1,2,6,4,3,6] -- [1, 2, function 3, 4, 3, 6]\n</code></pre>\n"}, {"tags": ["haskell", "ghc"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1511449316, "post_id": 47444097, "comment_id": 81871218, "body": "<a href=\"https://stackoverflow.com/questions/35375143/haskell-debugging-long-compilation-times-on-stack-projects\" title=\"haskell debugging long compilation times on stack projects\">stackoverflow.com/questions/35375143/&hellip;</a>"}, {"owner": {"reputation": 3794, "user_id": 137871, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/48469162d45686615c6bf0eb4304bf26?s=128&d=identicon&r=PG", "display_name": "insitu", "link": "https://stackoverflow.com/users/137871/insitu"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1511543604, "post_id": 47444097, "comment_id": 81909951, "body": "yes, seen that question but there is no answer beside some general advice on how to make GHC faster... Or maybe I read it too quickly?"}], "answers": [{"comments": [{"owner": {"reputation": 3794, "user_id": 137871, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/48469162d45686615c6bf0eb4304bf26?s=128&d=identicon&r=PG", "display_name": "insitu", "link": "https://stackoverflow.com/users/137871/insitu"}, "edited": false, "score": 0, "creation_date": 1511543774, "post_id": 47456028, "comment_id": 81910025, "body": "Thanks. I think I have an emrbyonic solution which would be based on <code>-dshow-passes</code> which dumps some statistics per module (and yes, I meant 70 modules because I am interested in knowing which modules take the most time, it&#39;s easier for packages). I have started to write some very simple tool to extract that information from build and dump statistics."}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": false, "score": 0, "last_activity_date": 1511441585, "creation_date": 1511441585, "answer_id": 47456028, "question_id": 47444097, "link": "https://stackoverflow.com/questions/47444097/is-there-a-way-to-profile-compilation-time-per-module-with-ghc/47456028#47456028", "title": "Is there a way to profile compilation time per module with GHC?", "body": "<p>Not sure if you means 70+ <em>packages</em> or 70+ <em>modules</em>, but anyway...</p>\n\n<p>I can't think of any particularly easy way to do this. You could <em>try</em> to time exactly when GHC writes its messages to the console; I'm not sure how accurate that would be. Otherwise, I guess you'd have to figure out the correct compilation order, and invoke GHC manually to compile one module at a time, and use OS-level tools to time how long each compile command takes. (Perhaps GHC's automatic Makefile generation feature could help...)</p>\n\n<p>It is <em>possible</em> to compile GHC itself with profiling enabled, but I don't think that helps in this case. (And it's quite a lot of work.)</p>\n\n<p>FWIW, I too would like to know why some modules take a small eternity to compile while others are almost instant...</p>\n"}], "owner": {"reputation": 3794, "user_id": 137871, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/48469162d45686615c6bf0eb4304bf26?s=128&d=identicon&r=PG", "display_name": "insitu", "link": "https://stackoverflow.com/users/137871/insitu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1511441585, "creation_date": 1511385967, "question_id": 47444097, "link": "https://stackoverflow.com/questions/47444097/is-there-a-way-to-profile-compilation-time-per-module-with-ghc", "title": "Is there a way to profile compilation time per module with GHC?", "body": "<p>I think everything's in the title, but to give more context. We have two 70+ packages whose compilation times are pretty different: One takes twice as much time as the other (without taking into account parallelization). I would like to know which modules take the most time in order to have a better understanding of what is causing this discrepancy.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 13, "user_id": 8992932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7348775398c6bd6a84a84adccf866d5?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/8992932/pedro"}, "edited": false, "score": 0, "creation_date": 1511378949, "post_id": 47442485, "comment_id": 81840062, "body": "x = sum ( takeWhile (&lt;x) [m | m &lt;- [n*n | n &lt;- [1..]]])"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511379036, "post_id": 47442485, "comment_id": 81840097, "body": "This does not makes much sense. You want the sum of elements that are less than the sum of these elements..."}, {"owner": {"reputation": 13, "user_id": 8992932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7348775398c6bd6a84a84adccf866d5?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/8992932/pedro"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511379053, "post_id": 47442485, "comment_id": 81840108, "body": "sorry Im new in this"}, {"owner": {"reputation": 13, "user_id": 8992932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7348775398c6bd6a84a84adccf866d5?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/8992932/pedro"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511379123, "post_id": 47442485, "comment_id": 81840145, "body": "What I want here is a limit x, then I want the sum of the square of all these numbers, example: x = 5  (1,2,3,4,5) - (1*1 + 2*2 + 3*3 + 4*4 + 5*5) = show this result"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1511379880, "post_id": 47442485, "comment_id": 81840530, "body": "Your example should resolve like <code>sum . takeWhile (&lt;x) $ [n*n | n &lt;- [1..]]</code> where <code>x</code> is resembles limit for the squares."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1511385905, "post_id": 47442485, "comment_id": 81843396, "body": "Note that <code>[ m | m &lt;- someList ]</code> is a rather complex way of writing <code>someList</code>."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1511401346, "post_id": 47442485, "comment_id": 81847984, "body": "You are trying to do too much in a single line of code. I suggest you assign each piece to its own variable in order to reason about the solution more clearly."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8992932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7348775398c6bd6a84a84adccf866d5?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/8992932/pedro"}, "edited": false, "score": 0, "creation_date": 1511379893, "post_id": 47442681, "comment_id": 81840533, "body": "YEESS! I didn&#39;t need the takeWhile thing, forgot about the [1..x] Thank you, worked great here!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1511379552, "creation_date": 1511379552, "answer_id": 47442681, "question_id": 47442485, "link": "https://stackoverflow.com/questions/47442485/couldnt-match-expected-type-int-with-actual-type-int-sum-of-square/47442681#47442681", "title": "Couldn&#39;t match expected type `Int&#39; with actual type [Int] sum of square", "body": "<p>If I understand it correctly, you want to define a function that takes as input a number, and returns the sum of squares from 1 up to (and including) that number. You can write such function with:</p>\n\n<pre><code>fsomaq :: (Num a, Enum a) =&gt; a -&gt; a\nfsomaq x = sum [n*n | n &lt;- [1..x] ]\n</code></pre>\n\n<p>So we here define a function <code>fsomaq</code> that takes as input a parameter <code>x</code>, the outcome is then <code>sum [ n*n | n &lt;- [1..x] ]</code> so we write a <em>list comprehension</em> to produce a list of squares with <code>n</code> ranging from <code>1</code> to (and including <code>x</code>), and we emit squares (<code>n*n</code>). We then calculate the sum of that list.</p>\n\n<p>By defining the signature as <code>(Num a, Enum a) =&gt; a -&gt; a</code>, we can use any type of number that is enumerable.</p>\n\n<p>For example:</p>\n\n<pre><code>Prelude&gt; fsomaq 0\n0\nPrelude&gt; fsomaq 1\n1\nPrelude&gt; fsomaq 2\n5\nPrelude&gt; fsomaq 4\n30\nPrelude&gt; fsomaq 8\n204\nPrelude&gt; fsomaq 1425\n965562425\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8992932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7348775398c6bd6a84a84adccf866d5?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/8992932/pedro"}, "edited": false, "score": 0, "creation_date": 1511410655, "post_id": 47446389, "comment_id": 81850171, "body": "thank you, but now I have a different problem, I want to multiply matrix NxN So far I got  main = do     putStrLn &quot;Digite &#39;matriz&#39; seguido do tamanho (100,1000,2000)&quot;     matriz :: Int -&gt; [[(Int, Int)]]     matriz let n = map (\\x -&gt; map (\\y -&gt; (x, y)) [1..n]) [1..n]  But Im having problems with the putStrLn , the problem is, input a value n (100,1000,2000) then I have to calculate the matrix times matrix e.g 100x100"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 13, "user_id": 8992932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7348775398c6bd6a84a84adccf866d5?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/8992932/pedro"}, "edited": false, "score": 0, "creation_date": 1511410890, "post_id": 47446389, "comment_id": 81850225, "body": "@Pedro Follow the same technique I show here. Break the problem into very small pieces. When you have tried some things post a new question for each issue."}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 0, "last_activity_date": 1511401626, "creation_date": 1511401626, "answer_id": 47446389, "question_id": 47442485, "link": "https://stackoverflow.com/questions/47442485/couldnt-match-expected-type-int-with-actual-type-int-sum-of-square/47446389#47446389", "title": "Couldn&#39;t match expected type `Int&#39; with actual type [Int] sum of square", "body": "<p>You are doing too much in a single line. I suggest that you break it apart to reason about the solution more clearly. For example start with:</p>\n\n<pre><code>list = [1..]\nsquares = [n*n | n &lt;- list]\n</code></pre>\n\n<p>Now what do you wan to do with the list of squares? Do you want ones smaller than a given value? Then do something like:</p>\n\n<pre><code>squaresLessThanX x = takeWhile (&lt;x) squares\n</code></pre>\n\n<p>Now we want to sum these squares:</p>\n\n<pre><code>sumSquaresLessThanX x = sum $ squaresLessThanX x\n</code></pre>\n\n<p>Notice how much easier this is to read than the oneliner that you are attempting. We also avoided many of the errors that you made, including mismatched brackets and reusing variable names incorrectly.</p>\n"}], "owner": {"reputation": 13, "user_id": 8992932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7348775398c6bd6a84a84adccf866d5?s=128&d=identicon&r=PG", "display_name": "Pedro", "link": "https://stackoverflow.com/users/8992932/pedro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 47442681, "answer_count": 2, "score": 1, "last_activity_date": 1511401626, "creation_date": 1511378882, "last_edit_date": 1511378978, "question_id": 47442485, "link": "https://stackoverflow.com/questions/47442485/couldnt-match-expected-type-int-with-actual-type-int-sum-of-square", "title": "Couldn&#39;t match expected type `Int&#39; with actual type [Int] sum of square", "body": "<pre><code>fsomaq = x\n\nx = sum (takeWhile (&lt;x) [m | m &lt;- [n*n | n &lt;- [1..]]])\n</code></pre>\n\n<p>What Im trying to do here is get a limit <code>x</code> and then square every number and then sum all this.</p>\n\n<p>Any idea ? error message:</p>\n\n<pre><code> Couldn't match expected type \u2018Integer -&gt; t\u2019 with actual type \u2018Integer\u2019 \u2022\n\n The function \u2018fsomaq\u2019 is applied to one argument, but its type \u2018Integer\u2019 has none In the expression: fsomaq 10 In an equation for \u2018it\u2019: it = fsomaq 10 \u2022 Relevant bindings include it :: t (bound at :16:1)\n</code></pre>\n"}, {"tags": ["haskell", "tree", "show"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1511377311, "post_id": 47442049, "comment_id": 81839266, "body": "I think (although I hesitate to use my dup-hammer) that this is structurally the same question as <a href=\"https://stackoverflow.com/questions/47423268/instance-show-haskell\" title=\"instance show haskell\">stackoverflow.com/questions/47423268/instance-show-haskell</a>"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1511377418, "post_id": 47442049, "comment_id": 81839321, "body": "Closer to <a href=\"https://stackoverflow.com/questions/47370551/haskell-show-instance-on-list\">this question</a> which I linked in the comments of the question you posted"}, {"owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1511377498, "post_id": 47442049, "comment_id": 81839370, "body": "@AdamSmith good point xD Must&#39;ve missed these posts, will look into them and hopefully get something off it :D Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "edited": false, "score": 0, "creation_date": 1511378401, "post_id": 47442242, "comment_id": 81839814, "body": "Looks good to me, thank you, just one question, how do I remove the quotation marks? Tried a few things but couldn&#39;t remove them from the output"}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "reply_to_user": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "edited": false, "score": 1, "creation_date": 1511379942, "post_id": 47442242, "comment_id": 81840560, "body": "Quotation marks come from <code>show a</code>. The <code>show</code> function is generally not intended to produce user-friendly output, but rather as technical display. Thus, <code>show</code> will usually produce text that is valid Haskell code, or at least very close to it. Specifically, <code>show</code>ing a <code>String</code> will enclose the string in double quotes. To avoid this, simply use <code>a</code> directly (since it&#39;s already a <code>String</code>) instead of putting it through <code>show</code> first."}, {"owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "edited": false, "score": 0, "creation_date": 1511381084, "post_id": 47442242, "comment_id": 81841080, "body": "Oh, thanks :D Sorry for my lack of knowledge, still a beginner in the Haskell World :p"}], "tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 1, "last_activity_date": 1511377954, "creation_date": 1511377954, "answer_id": 47442242, "question_id": 47442049, "link": "https://stackoverflow.com/questions/47442049/haskell-custom-show-instance/47442242#47442242", "title": "Haskell Custom Show Instance", "body": "<p>The expression <code>map show</code> is a function that expects an argument of type <code>[a]</code> - because <code>map</code> takes a function and a list.</p>\n\n<p>Therefore, the expression <code>(unwords . map show)</code> is <em>also</em> a function that expects an argument of type <code>[a]</code>.</p>\n\n<p>Therefore, the expression <code>map (unwords . map show)</code> is a function that expects an argument of type <code>[[a]]</code> - it expects a list, each element of which is also a list, because it must be an acceptable argument for function <code>(unwords . map show)</code>.</p>\n\n<p>Therefore, in the expression <code>map (unwords . map show) b</code>, the last argument <code>b</code> must be of type <code>[[a]]</code> for some <code>a</code>. </p>\n\n<p>But from the pattern <code>Node a b</code>, it follows that <code>b</code> is of type <code>[Familia]</code> - which is incompatible with <code>[[a]]</code>. This is what the compiler is telling you in the error message.</p>\n\n<p>When you find yourself confused with types of nested functions, it is usually a good idea to pull them all apart, give a name (and maybe a type) to each piece. That will allow you to see where the mistake is.</p>\n\n<pre><code>instance Show Familia where\n   show (Node a b) = show a ++ \"\\n\\t\" ++ concatSubFamilias \n      where\n         showSubFamilias :: [String]\n         showSubFamilias = map show b\n\n         concatSubFamilias :: String\n         concatSubFamilias = unlines showSubFamilias\n</code></pre>\n\n<p>Note that the above solution won't give you the result you're after, because it doesn't insert indentation before nested <code>Familia</code>s. I leave that as an exercise for the reader.</p>\n"}], "owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 47442242, "answer_count": 1, "score": 0, "last_activity_date": 1511377954, "creation_date": 1511377126, "question_id": 47442049, "link": "https://stackoverflow.com/questions/47442049/haskell-custom-show-instance", "title": "Haskell Custom Show Instance", "body": "<p>I've got a question, still working on the genealogy tree, here's what I've got so far (Sorry for the Portuguese words xD):</p>\n\n<pre><code>data Familia = Node String [Familia]\n\ninstance Show Familia where\n  show (Node a b) = show a ++ \"\\n\\t\" ++ show b\nraiz :: String -&gt; Familia\nraiz n = (Node n [])\n\njuntar :: String -&gt; String -&gt; Familia -&gt; Familia\njuntar a b (Node c l) \n        | b == c = (Node c (l ++ [raiz a]))\n        | otherwise = (Node c (juntarAux a b l))\n\njuntarAux :: String -&gt; String -&gt; [Familia] -&gt; [Familia]\njuntarAux a b [] = []\njuntarAux a b [(Node x l)]\n        | x == b = [(juntar a b (Node x l))]\n        | otherwise = [(Node x (juntarAux a b l))]\njuntarAux a b ((Node x l):xs)\n        | x == b = (juntar a b (Node x l)):xs\n        | otherwise = (Node x l):(juntarAux a b xs)\n</code></pre>\n\n<p>This is working the way I want it to, the thing is, this is my current output:</p>\n\n<pre><code>*Main&gt; let f = raiz \"Bob\"\n*Main&gt; let g = juntar \"John\" \"Bob\" f\n*Main&gt; g\n\"Bob\"\n    [\"John\"\n    []]\n</code></pre>\n\n<p>And what I want is, to print it like so:</p>\n\n<pre><code>Bob\n    John\n         Ruth\n    Hank\n</code></pre>\n\n<p>So, the Root of the family is Bob, Bob's son is John and Hank, John has a daughter called Ruth.</p>\n\n<p>I've tried doing it several ways with stuff I saw in other posts, but this is the latest try:</p>\n\n<pre><code>instance Show Familia where\n  show (Node a b) = show a ++ \"\\n\\t\" ++ (unlines $ map (unwords . map show) b)\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<pre><code>t4.hs:14:77:\nCouldn't match type \u2018Familia\u2019 with \u2018[a0]\u2019\nExpected type: [[a0]]\n  Actual type: [Familia]\nIn the second argument of \u2018map\u2019, namely \u2018b\u2019\nIn the second argument of \u2018($)\u2019, namely\n  \u2018map (unwords . map show) b\u2019\n</code></pre>\n\n<p>Any ideas? Thanks in advance! :D</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1511375921, "post_id": 47441443, "comment_id": 81838500, "body": "Why is this called <code>maximum1</code>? What do you want returned for <code>Noad []</code>?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1511376297, "post_id": 47441443, "comment_id": 81838691, "body": "Also, what did you try, and where did you get stuck?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1511377082, "post_id": 47441443, "comment_id": 81839133, "body": "If you use <code>map maximum1 xs</code> you get a list with the maxima of each subtree. You then need to compute the maximum of the list (and handle the empty case somehow)."}, {"owner": {"reputation": 3, "user_id": 4670263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-80BwQLzisO0/AAAAAAAAAAI/AAAAAAAAAFc/MPueaV4WOE8/photo.jpg?sz=128", "display_name": "ET-TAOUSY Zouhair", "link": "https://stackoverflow.com/users/4670263/et-taousy-zouhair"}, "edited": false, "score": 0, "creation_date": 1511444688, "post_id": 47441443, "comment_id": 81868320, "body": "it&#39;s a method that get a maximum of a Tree (Arbre = Tree, Feuille = leaf) i want it to get the maximum of a Tree for Noad [] i don&#39;t know."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4670263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-80BwQLzisO0/AAAAAAAAAAI/AAAAAAAAAFc/MPueaV4WOE8/photo.jpg?sz=128", "display_name": "ET-TAOUSY Zouhair", "link": "https://stackoverflow.com/users/4670263/et-taousy-zouhair"}, "edited": false, "score": 0, "creation_date": 1511602521, "post_id": 47462049, "comment_id": 81923798, "body": "Thank you it helps!"}], "tags": [], "owner": {"reputation": 36, "user_id": 8350604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H6fIE.jpg?s=128&g=1", "display_name": "Evan Hicks", "link": "https://stackoverflow.com/users/8350604/evan-hicks"}, "is_accepted": true, "score": 0, "last_activity_date": 1511464082, "creation_date": 1511464082, "answer_id": 47462049, "question_id": 47441443, "link": "https://stackoverflow.com/questions/47441443/how-to-get-maximum-for-this-data-type-in-haskell/47462049#47462049", "title": "How to get maximum for this data type in haskell", "body": "<p>You have the right idea, since your data type is either </p>\n\n<ol>\n<li>A type containing an Integer, or</li>\n<li>A list recursively of itself</li>\n</ol>\n\n<p>So if you're checking for the max of all values in this structure, you have to recursively check each list. You want to call the max between each step you are in the recursion and the next step.</p>\n\n<pre><code>data Arbre = Feuille Int | Noad [Arbre]\n\nmaximum1 :: Arbre -&gt; Int\nmaximum1 (Feuille a) = a\nmaximum1 (Noad (x:xs)) = max (maximum1 x) (maximum1 (Noad xs))\nmaximum1 (Noad []) = 0\n</code></pre>\n\n<p>The tricky part is you need to pattern match for the head of the list of Arbres and the tail, then recompose the tail in a Noad to be able to call function recursively. Also check for the case that Noad is empty (this solution assumes positive Integers).</p>\n"}], "owner": {"reputation": 3, "user_id": 4670263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-80BwQLzisO0/AAAAAAAAAAI/AAAAAAAAAFc/MPueaV4WOE8/photo.jpg?sz=128", "display_name": "ET-TAOUSY Zouhair", "link": "https://stackoverflow.com/users/4670263/et-taousy-zouhair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 47462049, "answer_count": 1, "score": -3, "last_activity_date": 1511464082, "creation_date": 1511374694, "last_edit_date": 1511374799, "question_id": 47441443, "link": "https://stackoverflow.com/questions/47441443/how-to-get-maximum-for-this-data-type-in-haskell", "title": "How to get maximum for this data type in haskell", "body": "<p>This is my method</p>\n\n<pre><code>data Arbre = Feuille Int | Noad [Arbre]\n\nmaximum1 :: Arbre -&gt; Int\nmaximum1 (Feuille a) = a\nmaximum1 (Noad xs) = maximum1 xs...\n</code></pre>\n"}, {"tags": ["haskell", "lambda"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1511351512, "post_id": 47433796, "comment_id": 81822164, "body": "If your function should perform a single beta step, I&#39;d suggest to return a <code>Maybe Term</code> instead. Return <code>Nothing</code> if the input term is in normal form. Return <code>Just t</code> if <code>t</code> is the next term obtained with a single beta step. In this way you can implement e.g. the leftmost-outermost reduction strategy, since each recursive call will tell you if a step was made or not."}, {"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 3, "creation_date": 1511353327, "post_id": 47433796, "comment_id": 81823319, "body": "Having all reductions strategies with the same type makes the subsequent questions involving combinators such as <code>nested</code> easier."}, {"owner": {"reputation": 39, "user_id": 7157060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7ac82f26be85b79c32ea8ba651cf2e?s=128&d=identicon&r=PG&f=1", "display_name": "Soro", "link": "https://stackoverflow.com/users/7157060/soro"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1511353680, "post_id": 47433796, "comment_id": 81823534, "body": "Seems like you @Li-yaoXia now, what to do, can you give me a hint?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1511354079, "post_id": 47433796, "comment_id": 81823801, "body": "If you need the list return type, you can return <code>[]</code> on normal forms, and <code>[t]</code> on single beta steps."}, {"owner": {"reputation": 39, "user_id": 7157060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7ac82f26be85b79c32ea8ba651cf2e?s=128&d=identicon&r=PG&f=1", "display_name": "Soro", "link": "https://stackoverflow.com/users/7157060/soro"}, "edited": false, "score": 0, "creation_date": 1511357427, "post_id": 47433796, "comment_id": 81826134, "body": "I mean it is no problem to return the term as a list, but what is this helpful for?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1511364311, "post_id": 47433796, "comment_id": 81831170, "body": "In general, a <code>Strat</code> can suggest many alternative steps. E.g., in pseudosyntax, <code>(f x) (g y)</code> can be reduced following <code>f x</code> or <code>g y</code>. A <code>Strat</code> can then produce as output <code>[t1 (g x), (f x) t2]</code>. Essentially, the output list is used to represent non-deterministic behavior."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1511365629, "post_id": 47433796, "comment_id": 81832181, "body": "Note that, if you follow the suggestion of @chi, you can turn the output into a list with <code>unfoldr</code>."}, {"owner": {"reputation": 39, "user_id": 7157060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7ac82f26be85b79c32ea8ba651cf2e?s=128&d=identicon&r=PG&f=1", "display_name": "Soro", "link": "https://stackoverflow.com/users/7157060/soro"}, "edited": false, "score": 0, "creation_date": 1511365952, "post_id": 47433796, "comment_id": 81832387, "body": "Am I right, by thinking, that the intention of the list is, to produce every possible output of any betastep?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1511367775, "post_id": 47433796, "comment_id": 81833693, "body": "@Soro Yes, that would be the &quot;largest&quot; strategy, modelling the highest level of non determinism. A strategy in general produces a subset of those outputs."}], "owner": {"reputation": 39, "user_id": 7157060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7ac82f26be85b79c32ea8ba651cf2e?s=128&d=identicon&r=PG&f=1", "display_name": "Soro", "link": "https://stackoverflow.com/users/7157060/soro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1511355015, "creation_date": 1511350858, "last_edit_date": 1592644375, "question_id": 47433796, "link": "https://stackoverflow.com/questions/47433796/how-to-apply-single-%ce%b2-step-at-the-root", "title": "How to apply single \u03b2-step at the root", "body": "<p>I got the following task:</p>\n<blockquote>\n<p>Let type Strat = Term -&gt; [Term] be the type of reduction strategies.\nImplement the strategy root :: Strat which applies a single \u03b2-step at\nthe root (if possible)</p>\n</blockquote>\n<p>Now I know how the different strategies (applicative order reduction, normal order reduction, ...) work.</p>\n<p>My question now is, now: Every time I apply a \u03b2-step to a term, i get another term. Why should i return a list of terms?</p>\n<p>What I have till now is:</p>\n<pre><code>type Id = String\ndata Term =     Var Id              -- Var ... variable\n                | App Term Term     -- App ... application\n                | Abs Id Term       -- Abs ... abstraction\n                deriving(Show)\n\nroot :: Term -&gt; Term\nroot (Var v)            = Var v             -- var\nroot (Abs x s)          = Abs x s           -- abs\nroot (App (Abs x t) u)  = subst x u t       -- root\nroot (App s u) = App (root s) (root u)      -- app-l and app-r\n\n-- where subst x s t computes t[x := s], satisfying the freshness constraint.\nsubst :: String -&gt; Term -&gt; Term -&gt; Term\n...(already implemented)\n</code></pre>\n<p><strong>EDIT:</strong>\nMaybe I should mention the next two steps, that have to be made, to make the question clear:</p>\n<blockquote>\n<p>Implement a strategy combinator nested :: Strat -&gt; Strat that, given a\nstrategy s, results in a new strategy which tries to apply s at all\nnon-root positions.</p>\n<p>Building on the previous functions, implement single-step call by name reduction cbn :: Strat.</p>\n</blockquote>\n"}, {"tags": ["haskell", "data-structures"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1511350794, "post_id": 47433530, "comment_id": 81821716, "body": "Shouldn&#39;t <code>lookFor</code> return a <code>Maybe Structure</code>?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511350843, "post_id": 47433530, "comment_id": 81821740, "body": "Furthermore is <i>breadth-first</i> search a requirement, or is any search strategy sufficient?"}, {"owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511351665, "post_id": 47433530, "comment_id": 81822267, "body": "Yes, it should be a breadth-first. Can you please elaborate on the Maybe Structure part? I&#39;m new to this language and I&#39;m still in an adaptation period. Sorry and thank you @WillemVanOnsem"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511351845, "post_id": 47433530, "comment_id": 81822395, "body": "well you do not know if you will find a <code>Structure</code> that matches the query, right? In case you do not find one, you can not simply return <code>null</code> (well Haskell has an <code>undefined</code>, but it is usually better not to use that). In that case you can use a <code>Maybe Structure</code>. A <code>Maybe a</code>, has two possible values <code>Nothing</code> (i.e. the query did not give a result), or <code>Just x</code> with <code>x</code> the result."}, {"owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511352281, "post_id": 47433530, "comment_id": 81822681, "body": "Right, sure it makes sense. However, I&#39;m not aware how can I implement it in lookFor :\\ @WillemVanOnsem"}, {"owner": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "edited": false, "score": 0, "creation_date": 1511354855, "post_id": 47433530, "comment_id": 81824312, "body": "Is your <code>Structure</code> just a <a href=\"https://wiki.haskell.org/Algebraic_data_type#Rose_tree\" rel=\"nofollow noreferrer\"><code>RoseTree String</code></a>?"}, {"owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "reply_to_user": {"reputation": 5335, "user_id": 6920962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e62cd73355fc90d37429f9443df38da?s=128&d=identicon&r=PG&f=1", "display_name": "user28434", "link": "https://stackoverflow.com/users/6920962/user28434"}, "edited": false, "score": 0, "creation_date": 1511355357, "post_id": 47433530, "comment_id": 81824644, "body": "Yes it is @user28434"}], "answers": [{"tags": [], "owner": {"reputation": 1099, "user_id": 4929834, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/C47BB.jpg?s=128&g=1", "display_name": "Alberto Centelles", "link": "https://stackoverflow.com/users/4929834/alberto-centelles"}, "is_accepted": false, "score": 0, "last_activity_date": 1511353403, "creation_date": 1511353403, "answer_id": 47434650, "question_id": 47433530, "link": "https://stackoverflow.com/questions/47433530/haskell-data-structure-find-method/47434650#47434650", "title": "Haskell data structure find method", "body": "<p>As a recursive structure, you need to set a base case. In your example, this happens when you have exhausted all structures in your list.</p>\n\n<p>As @WillemVanOnsem, it's better to return a <code>Maybe Structure</code>, as it is possible for the <code>lookFor</code> function not to find the Structure</p>\n\n<pre><code>import Data.List (elemIndex)\nimport Data.Maybe (fromJust, isJust)\n\ndata Structure = Structure String [Structure]\n\nname :: Structure -&gt; String\nname (Structure a xs) = a\n\nsubStrcts :: Structure -&gt; [String]\nsubStrcts (Structure a []) = []\nsubStrcts (Structure a xs) = [name x | x &lt;- xs]\n\nlookFor :: String -&gt; Structure -&gt; Maybe Structure\nlookFor a (Structure b xs) \n    | null xs = Nothing\n    | isJust maybeIndex = fmap (xs !!) maybeIndex\n    | otherwise = lookFor a (Structure (name (head xs)) (tail xs))\n    where maybeIndex = elemIndex a (subStrcts (Structure b xs))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 4, "last_activity_date": 1511353802, "creation_date": 1511353802, "answer_id": 47434775, "question_id": 47433530, "link": "https://stackoverflow.com/questions/47433530/haskell-data-structure-find-method/47434775#47434775", "title": "Haskell data structure find method", "body": "<p>A possible solution is:</p>\n\n<pre><code>import Control.Applicative\nimport Data.Foldable\n\ndata Structure = Structure String [Structure]\n               deriving Show\n\nlookFor :: String -&gt; Structure -&gt; Maybe Structure\nlookFor a s@(Structure b xs)\n   | a == b    = Just s\n   | otherwise = asum (map (lookFor a) xs)\n</code></pre>\n\n<p>Above, <code>map (lookFor a) xs</code> searches <code>a</code> in the substructures. This produces a <code>[Maybe Structure]</code>, on which we use <code>asum</code> to take the first <code>Just _</code> value, so that we can return it. (If no such value is found, <code>asum</code> returns <code>Nothing</code>.)</p>\n\n<p>If you don't want to exploit <code>asum</code> from the libraries, defining it is a nice beginner exercise.</p>\n"}], "owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511353802, "creation_date": 1511350011, "last_edit_date": 1511350321, "question_id": 47433530, "link": "https://stackoverflow.com/questions/47433530/haskell-data-structure-find-method", "title": "Haskell data structure find method", "body": "<p>As I'm constructing my data structure I found an issue that I'm having trouble solving it. My data structure \"Structure\" is String and a list of subStructures.</p>\n\n<p>The issue is in the \"lookFor\" method below, that is supposed to look for a subStructure named \"a\" in (Structure b xs) and return it. If not on \"b\"'s list (xs), it should continue looking in each xs element's list and so on. If not found it should do nothing.</p>\n\n<p>My idea was recursion, and for that, I thought \"map lookFor xs\" in case it hasn't found the Structure named \"a\". </p>\n\n<p>Ghci says \"Couldn't match expected type Structure with actual type [Structure]\"\nWich I understand, because after all map returns a list of elements and not an element.</p>\n\n<pre><code>data Structure = Structure String [Structure]\n\nname :: Structure -&gt; String\nname (Structure a xs) = a\n\nsubStrcts :: Structure -&gt; [String]\nsubStrcts (Structure a []) = []\nsubStrcts (Structure a xs) = [name x | x &lt;- xs]\n\nlookFor :: String -&gt; Structure -&gt; Structure\nlookFor a (Structure b xs) \n    | elem (elemIndex a (subStrcts (Structure b xs))) [0..] = xs !! (fromJust (elemIndex a (subStrcts (Structure b xs))))\n    | otherwise = map (lookFor a) xs\n</code></pre>\n\n<p>Any ideas? Thanks</p>\n"}, {"tags": ["haskell", "typeclass", "overlapping-instances"], "answers": [{"comments": [{"owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "edited": false, "score": 0, "creation_date": 1511346705, "post_id": 47432126, "comment_id": 81818954, "body": "Great. I did not know about that. I there a reason I can circumvent this overlapping-instances error for the example in this question?"}, {"owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "edited": false, "score": 0, "creation_date": 1511347146, "post_id": 47432126, "comment_id": 81819265, "body": "Preferably, without resorting to <code>OverlappingInstances</code> of course :)"}], "tags": [], "owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "is_accepted": true, "score": 3, "last_activity_date": 1511347473, "last_edit_date": 1511347473, "creation_date": 1511346037, "answer_id": 47432126, "question_id": 47431466, "link": "https://stackoverflow.com/questions/47431466/how-are-these-two-instances-overlapping-involving-out-of-scope-types/47432126#47432126", "title": "How are these two instances overlapping (involving out-of-scope types)", "body": "<p>The compiler has to be able to select instances by considering only the \"head\" of the instance, without looking at the constraints. The constraints are only considered once the applicable instance has been chosen. If it cannot decide between two instances looking only at the head, then they overlap.</p>\n\n<p>The reason is that there is no guarantee that all of the instances used in the final complete program will be imported into <em>this</em> module. If the compiler ever committed to choosing an instance based on not being able to see an instance fulfilling a constraint of another instance, then different modules could make different choices about which of the two overlapping instances to use for the same type, based on the different set of instances available in each.</p>\n\n<p>The overlap check is intended to stop that happening. So the only way it can do that is if GHC treats all constraints as at least <em>potentially</em> satisfiable when it's seeing which instances might apply in a given situation. When that leaves exactly one candidate, that candidate will remain regardless of what other instances are added or removed elsewhere in the program. It can then check that the necessary instances are available in this module to satisfy the constraints.</p>\n"}], "owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 47432126, "answer_count": 1, "score": 3, "last_activity_date": 1511347473, "creation_date": 1511344364, "question_id": 47431466, "link": "https://stackoverflow.com/questions/47431466/how-are-these-two-instances-overlapping-involving-out-of-scope-types", "title": "How are these two instances overlapping (involving out-of-scope types)", "body": "<p>I couple of days ago I <a href=\"https://stackoverflow.com/questions/47367696/is-there-an-inject-equivalent-for-haskell-in-the-context-of-free-monads/47373023#47373023\">asked a question</a> about injecting functors in the context of free-monads. The solution suggested there, based on <a href=\"http://www.cs.ru.nl/~W.Swierstra/Publications/DataTypesALaCarte.pdf\" rel=\"nofollow noreferrer\">Data Types \u00e0 la Carte</a> uses a class that represents a sort of containment relationship between functors.</p>\n\n<pre><code>-- | Class that represents the relationship between a functor 'sup' containing\n-- a functor 'sub'.\nclass (Functor sub, Functor sup) =&gt; sub :-&lt;: sup where\n    inj :: sub a -&gt; sup a\n\n-- | A functor contains itself.\ninstance Functor f =&gt; f :-&lt;: f where\n    inj = id\n\n-- | A functor is contained in the sum of that functor with another.\ninstance (Functor f, Functor g) =&gt; f :-&lt;: (Sum f g) where\n    inj = InL\n\n-- | If a functor 'f' is contained in a functor 'g', then f is contained in the\n-- sum of a third functor, say 'h', with 'g'.\ninstance (Functor f, Functor g, Functor h, f :-&lt;: g) =&gt; f :-&lt;: (Sum h g) where\n    inj = InR . inj\n</code></pre>\n\n<p>Now consider the following data types:</p>\n\n<pre><code>type WeatherData = String\n\ndata WeatherServiceF a = Fetch (WeatherData -&gt; a) deriving (Functor)\n\ndata StorageF a = Store WeatherData a deriving (Functor)\n</code></pre>\n\n<p>And a function with the following type</p>\n\n<pre><code>fetch :: (WeatherServiceF :-&lt;: g) =&gt; Free g WeatherData\n</code></pre>\n\n<p>Where <code>Free</code> comes from the <a href=\"https://hackage.haskell.org/package/free-4.12.4\" rel=\"nofollow noreferrer\"><code>Control.Monad.Free</code></a> module.</p>\n\n<p>Then if I try to use this function as follows:</p>\n\n<pre><code>reportWeather :: Free (Sum WeatherServiceF StorageF) ()\nreportWeather = do\n    _ &lt;- fetch\n    return ()\n</code></pre>\n\n<p>I get an overlapping-instances error, saying:</p>\n\n<pre><code>\u2022 Overlapping instances for WeatherServiceF\n                            :-&lt;: Sum WeatherServiceF StorageF\n    arising from a use of \u2018fetch\u2019\n  Matching instances:\n    two instances involving out-of-scope types\n      instance (Functor f, Functor g) =&gt; f :-&lt;: Sum f g\n\n      instance (Functor f, Functor g, Functor h, f :-&lt;: g) =&gt;\n               f :-&lt;: Sum h g\n</code></pre>\n\n<p>Now, I understand that the first is a valid instance, but why the second is considered a valid instance as well? If I instantiate the variables in the second case I would get   </p>\n\n<pre><code>instance ( Functor WeatherServiceF\n         , Functor StorageF\n         , Functor WeatherServiceF\n         , WeatherServiceF :-&lt;: StorageF\n         ) =&gt; WeatherServiceF :-&lt;: Sum WeatherServiceF g\n</code></pre>\n\n<p>Which should not be an instance since it is not true that <code>WeatherServiceF :-&lt;: StorageF</code>. Why is GHC inferring such an instance?</p>\n\n<p>I have the following instances enabled:</p>\n\n<pre><code>{-# LANGUAGE DeriveFunctor         #-}\n{-# LANGUAGE FlexibleContexts      #-}\n{-# LANGUAGE FlexibleInstances     #-}\n{-# LANGUAGE MultiParamTypeClasses #-}\n{-# LANGUAGE TypeOperators         #-}\n</code></pre>\n"}, {"tags": ["haskell", "ghc"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511337698, "post_id": 47429379, "comment_id": 81813443, "body": "Based on some tests, I think it is more the combination with the <code>-o</code> flag."}, {"owner": {"reputation": 2141, "user_id": 1664572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c2bee27fdb72050b60a3c6aae64b474f?s=128&d=identicon&r=PG", "display_name": "wizzup", "link": "https://stackoverflow.com/users/1664572/wizzup"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511338169, "post_id": 47429379, "comment_id": 81813730, "body": "<code>{-# OPTIONS_GHC -o app -main-is MyModule.main #-}</code> also failed too."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1511338195, "post_id": 47429379, "comment_id": 81813754, "body": "The <code>OPTIONS</code> pragma is for setting per-source file options, so it doesn&#39;t really make sense to use it to set a whole-program option. That being said, I would expect the compiler to at least issue a warning in this case (or the documentation to be more explicit about which options work here). Indeed, none of the linker options which apply to the whole program seem to work here (at least the ones I tried-about 5) which makes sense, because a &quot;linker option&quot; is not a &quot;GHC option&quot;."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1511338450, "post_id": 47429379, "comment_id": 81813881, "body": "Furthermore, from a bit more testing, GHC is deliberately and silently discarding those options which it knows are invalid here (i.e. linker options). The docs claim &quot;options given in the source file override those given on the command-line&quot;. But for example, when adding <code>-no-link</code> to <code>OPTIONS</code> doesn&#39;t do anything (in particular, an executable is still generated) but running <code>ghc -main-is MyModule.main -no-link MyModule.hs</code> will of course prevent the executable from being linked. (NB: if this is a real issue for you, I suggest opening a ticket)"}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1511340225, "post_id": 47429379, "comment_id": 81814836, "body": "The whole special way that GHC extracts file-level pragmas is a huge hack. This is one part of GHC that honestly makes me a bit sad. All this to say that this is probably not the intended behaviour - GHC is supposed to warn on unrecognized file-level options/pragmas."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511345990, "post_id": 47429379, "comment_id": 81818434, "body": "Well it is quite odd that this is a &quot;<i>dynamic</i>&quot; flag, since there can only be one <code>main</code> module. What if two files would have such flag? The <code>-main-is</code> flag looks almost inherently static."}], "owner": {"reputation": 2141, "user_id": 1664572, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c2bee27fdb72050b60a3c6aae64b474f?s=128&d=identicon&r=PG", "display_name": "wizzup", "link": "https://stackoverflow.com/users/1664572/wizzup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1511337171, "creation_date": 1511337171, "question_id": 47429379, "link": "https://stackoverflow.com/questions/47429379/can-main-is-ghcs-option-be-use-via-options-ghc-pragma", "title": "Can &quot;-main-is&quot; ghc&#39;s option be use via OPTIONS_GHC pragma?", "body": "<p>Given <code>MyModule.hs</code></p>\n\n<pre><code>$ cat MyModule.hs\n{-# OPTIONS_GHC -main-is MyModule.main #-}\n\nmodule MyModule where\n\nmain = print \"MyModule.Main\"\n</code></pre>\n\n<p>I can make an executable <code>app</code> with <code>-main-is</code> options</p>\n\n<pre><code>$ ghc -o app -main-is MyModule.main MyModule.hs\n[1 of 1] Compiling MyModule         ( MyModule.hs, MyModule.o ) [flags changed]\nLinking app ...\n</code></pre>\n\n<p>But when I ommit <code>-main-is</code> option and hope ghc will use <code>OPTIONS_GHC</code> pragma, it doesn't work.</p>\n\n<pre><code>$ ghc -o app MyModule.hs\n[1 of 1] Compiling MyModule         ( MyModule.hs, MyModule.o )\n\n&lt;no location info&gt;: error:\n    output was redirected with -o, but no output will be generated\nbecause there is no Main module.\n</code></pre>\n\n<p>The <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/flags.html#linking-options\" rel=\"nofollow noreferrer\">document</a> mention <code>-main-is</code> as <code>dynamic</code> option type which mean it should be possible to use via the pragma <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/using.html#command-line-options-in-source-files\" rel=\"nofollow noreferrer\">(ref)</a></p>\n\n<p>Question:</p>\n\n<ul>\n<li>Can <code>-main-is</code> be use via <code>OPTIONS_GHC</code> pragma?</li>\n<li>Did I use the pragma wrong way?</li>\n</ul>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1511329078, "post_id": 47427422, "comment_id": 81809430, "body": "<a href=\"http://hackage.haskell.org/package/base-4.6.0.1/docs/Prelude.html#v:isNaN\" rel=\"nofollow noreferrer\">isNaN</a>"}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1511371025, "post_id": 47427422, "comment_id": 81835876, "body": "Just for context or if you want to read more about this, the behavior you&#39;re asking about isn&#39;t specific to haskell but is an aspect of the IEEE 754 floating point standard"}], "answers": [{"comments": [{"owner": {"reputation": 1117, "user_id": 1677501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4bbea40e2df964cf5c483ee0fdd3392?s=128&d=identicon&r=PG", "display_name": "laiboonh", "link": "https://stackoverflow.com/users/1677501/laiboonh"}, "edited": false, "score": 0, "creation_date": 1511331418, "post_id": 47427536, "comment_id": 81810339, "body": "Thanks for the answer and pointing out the problems. Yeah i was just trying to illustrate my doubts quickly."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "reply_to_user": {"reputation": 1117, "user_id": 1677501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4bbea40e2df964cf5c483ee0fdd3392?s=128&d=identicon&r=PG", "display_name": "laiboonh", "link": "https://stackoverflow.com/users/1677501/laiboonh"}, "edited": false, "score": 0, "creation_date": 1511331500, "post_id": 47427536, "comment_id": 81810373, "body": "@laiboonh I figured. :)"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 2, "creation_date": 1511332782, "post_id": 47427536, "comment_id": 81810934, "body": "Instead of using <code>fromIntegral</code> here, it would usually make more sense to adjust the argument types to be floating point. Coercing with <code>fromIntegral</code> yourself prevents the user from choosing a type, <i>and</i> forces GHC to use defaulting rules, which are a bit weird."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1511367078, "post_id": 47427536, "comment_id": 81833209, "body": "What <i>is</i> <code>Infinity</code>, though? Hard-coded representation of IEEE infinity?"}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1511367941, "post_id": 47427536, "comment_id": 81833820, "body": "@chepner in the case of <code>Float</code> at least, looks like <code>Infinity</code> is the representation of numbers that satisfy <code>isInfinite</code> and <code>&gt; 0</code>"}], "tags": [], "owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "is_accepted": true, "score": 7, "last_activity_date": 1511382312, "last_edit_date": 1511382312, "creation_date": 1511329176, "answer_id": 47427536, "question_id": 47427422, "link": "https://stackoverflow.com/questions/47427422/how-can-we-make-use-of-infinity-that-haskell-returns-when-you-do-2-0/47427536#47427536", "title": "How can we make use of `Infinity` that Haskell returns when you do `2/0`", "body": "<p>There are a handful of ways to do this. My preferred one would be to use <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:isInfinite\" rel=\"nofollow noreferrer\"><code>isInfinite</code></a> from the Prelude:</p>\n\n<pre><code>test :: Int -&gt; Int -&gt; String\ntest a b = case fromIntegral a / fromIntegral b of\n             x | isInfinite x &amp;&amp; x &gt; 0 -&gt; \"fool\"\n               | otherwise -&gt; show x\n</code></pre>\n\n<p>Alternately, you could define <code>infinity</code> as in <a href=\"https://stackoverflow.com/questions/2354707/in-haskell-is-there-infinity-num-a-a\">this question</a> and compare for equality (since <code>Infinity == Infinity</code>).</p>\n\n<hr>\n\n<p>Your code also had a couple of issues I assume are unrelated to your question:</p>\n\n<ul>\n<li><code>Show</code> should be <code>show</code></li>\n<li><code>(/)</code> doesn't work for <code>Int</code> arguments, so you need to use <code>fromIntegral</code> to convert <code>a</code> and <code>b</code> to something floating</li>\n</ul>\n\n<p>I also suspect you aware this particular function doesn't require an infinity check...</p>\n\n<pre><code>test :: Int -&gt; Int -&gt; String\ntest a 0 | a &gt; 0 = \"fool\"\n         | otherwise = show (fromIntegral a / fromIntegral b)\n</code></pre>\n"}], "owner": {"reputation": 1117, "user_id": 1677501, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4bbea40e2df964cf5c483ee0fdd3392?s=128&d=identicon&r=PG", "display_name": "laiboonh", "link": "https://stackoverflow.com/users/1677501/laiboonh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 1, "accepted_answer_id": 47427536, "answer_count": 1, "score": 3, "last_activity_date": 1511382312, "creation_date": 1511328562, "question_id": 47427422, "link": "https://stackoverflow.com/questions/47427422/how-can-we-make-use-of-infinity-that-haskell-returns-when-you-do-2-0", "title": "How can we make use of `Infinity` that Haskell returns when you do `2/0`", "body": "<p>I understand that Haskell tries to do something more beneficial than simply throwing an error when one does division by zero</p>\n\n<pre><code>test :: Int -&gt; Int -&gt; String\ntest a b = case a/b of\n    Infinity -&gt; \"fool\"\n    x  -&gt; Show x\n</code></pre>\n\n<p>However i was told my ghc that <code>Infinity</code> is not a data constructor. What is it actually and how can i make use of it? I don't want to simply check <code>b</code> for 0</p>\n"}, {"tags": ["list", "haskell", "sum"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1511310665, "post_id": 47424963, "comment_id": 81804855, "body": "Can&#39;t you just write <code>foldr (+) 1 [ x * x | x &lt;- [2,4..18]]</code>? What specifically is the problem?"}, {"owner": {"reputation": 27, "user_id": 7760298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db74318eb4f25de7053ded36f7317de7?s=128&d=identicon&r=PG&f=1", "display_name": "zach", "link": "https://stackoverflow.com/users/7760298/zach"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1511310906, "post_id": 47424963, "comment_id": 81804922, "body": "@Carcigenicate i need the list and the sum to print"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1511310988, "post_id": 47424963, "comment_id": 81804949, "body": "You want both to print when you run divisible_by2? Printing should be limited."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1511363213, "post_id": 47424963, "comment_id": 81830330, "body": "I suggest creating a <code>main</code> function which prints the results of both of your existing functions."}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 2, "last_activity_date": 1511312967, "creation_date": 1511312967, "answer_id": 47425280, "question_id": 47424963, "link": "https://stackoverflow.com/questions/47424963/haskell-squaring-list-elements-and-then-adding-them-together/47425280#47425280", "title": "Haskell squaring list elements and then adding them together", "body": "<p>I guess you just want:</p>\n\n<pre><code>foo = (divisible_by2, sum2)\n</code></pre>\n\n<p>Also, that <code>1</code> in your <code>foldr (+) 1</code> looks weird. You probably want a <code>0</code> there instead, or perhaps want to just replace the whole <code>foldr</code> expression with a call to <code>sum</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 7760298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db74318eb4f25de7053ded36f7317de7?s=128&d=identicon&r=PG&f=1", "display_name": "zach", "link": "https://stackoverflow.com/users/7760298/zach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1511312967, "creation_date": 1511310473, "question_id": 47424963, "link": "https://stackoverflow.com/questions/47424963/haskell-squaring-list-elements-and-then-adding-them-together", "title": "Haskell squaring list elements and then adding them together", "body": "<p>I have written divisible_by2 to square all elements in a list that are even and are less than twenty. My second function sum2 sums all the of the elements of divisible_by2. I need help combining these function so that when running divisible_by2 both functions are compiled.</p>\n\n<pre><code>  divisible_by2 = [ x * x| x &lt;- [2,4..18]]  \n  sum2 = foldr (+) 1 divisible_by2  \n</code></pre>\n\n<p>When running separately both functions give the correct output</p>\n\n<pre><code>   *Main&gt; :r\n   Ok, 1 module loaded.\n   *Main&gt; divisible_by2\n   [4,16,36,64,100,144,196,256,324]\n   *Main&gt; sum2\n   1141\n   *Main&gt; \n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1511300776, "post_id": 47423268, "comment_id": 81801253, "body": "Good, you are showing your code. But what error are you getting?"}, {"owner": {"reputation": 41, "user_id": 8972834, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1084d7ea140fbad38f6db15e43552489?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyPire", "link": "https://stackoverflow.com/users/8972834/johnnypire"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1511300915, "post_id": 47423268, "comment_id": 81801305, "body": "Couldn&#39;t match type \u2018Char\u2019 with \u2018[Char]\u2019 on   &quot;show cake = prints cake where&quot;"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1511303743, "post_id": 47423268, "comment_id": 81802639, "body": "You should avoid using <code>show</code> for pretty printing. There was a recent question that answered nearly this exact question though. Can you extrapolate <a href=\"https://stackoverflow.com/questions/47370551/haskell-show-instance-on-list\">from this</a>?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1511303927, "post_id": 47423268, "comment_id": 81802720, "body": "If that doesn&#39;t help, you need to write an MCVE. Note that the &quot;V&quot; there is &quot;Verifiable&quot; -- write something we can <i>run</i>."}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 2, "last_activity_date": 1511304996, "creation_date": 1511304996, "answer_id": 47424117, "question_id": 47423268, "link": "https://stackoverflow.com/questions/47423268/instance-show-haskell/47424117#47424117", "title": "instance Show haskell", "body": "<p>Since <code>prints :: Cake -&gt; String</code> and <code>flavors :: [Cake]</code>, we know</p>\n\n<pre><code>map prints flavors :: [String]\n</code></pre>\n\n<p>But this doesn't jive with the context in which it is used, since in</p>\n\n<pre><code>\" \" ++ expr\n</code></pre>\n\n<p>the <code>\" \"</code> is clearly a <code>String</code> and we therefore expect <code>expr</code> to be a <code>String</code> and not a <code>[String]</code>.</p>\n\n<p>To fix this, you should write or find a function which converts your <code>[String]</code> into a <code>String</code> in some way -- there are many candidate behaviors for this type, so you should decide what behavior you want and then find a way to achieve that behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 0, "last_activity_date": 1511318787, "creation_date": 1511318787, "answer_id": 47425991, "question_id": 47423268, "link": "https://stackoverflow.com/questions/47423268/instance-show-haskell/47425991#47425991", "title": "instance Show haskell", "body": "<p>For test data, I used:</p>\n\n<pre><code>cake1 = Food{name=\"Cake1\"\n            ,flavors=[Food{name=\"Chocolate\"\n                          ,flavors=[]}\n                     ,Food{name=\"Nutella\"\n                          ,flavors=[Food{name=\"Strawberry\"\n                                        ,flavors=[]}]}]}\ncake2 = Food{name=\"Cake2\"\n            ,flavors=[Food{name=\"Chocolate\"\n                          ,flavors=[]}\n                     ,Food{name=\"Vanilla\"\n                          ,flavors=[]}]}\ncake3 = Food{name=\"Cake3\"\n            ,flavors=[]}\n</code></pre>\n\n<p>and wrote <code>Show Cake</code> as <code>unlines</code> composed with a function that has type <code>Cake -&gt; [String]</code></p>\n\n<pre><code>instance Show Cake where\n  show = unlines . prints where\n    prints :: Cake -&gt; [String]\n    prints EmptyBox    = []\n    prints (Food s []) = [s]  -- a Food with no subflavors \n    prints (Food s fs) = s:concatMap (map (\"  \"++) . prints) fs\n</code></pre>\n\n<p>That last line handles the general case of a <code>Food</code> with name <code>s</code> and flavors <code>fs</code> by mapping <code>prints</code> over <code>fs</code>, then mapping <code>(\"  \"++)</code> over each sublist in that map, and concat'ing them together.</p>\n\n<pre><code>(\"  \"++)                             :: String -&gt; String\nmap (\"  \"++)                         :: [String] -&gt; [String]\nmap (\"  \"++) . prints                :: Cake -&gt; [String]\nmap (map (\"  \"++) . prints)          :: [Cake] -&gt; [[String]]\nconcat . map (map (\"  \"++) . prints) :: [Cake] -&gt; [String]\n\nconcatMap = concat . map\nconcatMap (map (\"  \"++) . prints)    :: [Cake] -&gt; [String]\n</code></pre>\n\n<p>Each successive level of flavors adds an extra level of indentation (that's what the <code>(\"  \"++)</code> is for). We can test it:</p>\n\n<pre><code>TestModule&gt; putStrLn $ concatMap show [cake1, cake2, cake3]\nCake1\n  Chocolate\n  Nutella\n    Strawberry\nCake2\n  Chocolate\n  Vanilla\nCake3\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8972834, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1084d7ea140fbad38f6db15e43552489?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyPire", "link": "https://stackoverflow.com/users/8972834/johnnypire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "accepted_answer_id": 47425991, "answer_count": 2, "score": -1, "last_activity_date": 1511320582, "creation_date": 1511300729, "last_edit_date": 1511320582, "question_id": 47423268, "link": "https://stackoverflow.com/questions/47423268/instance-show-haskell", "title": "instance Show haskell", "body": "<p>I got a data type \"Cake\"</p>\n\n<pre><code>*data Cake = EmptyBox | Food { name :: String\n                                , flavors :: [Cake]} deriving( Read, Eq)*\n\ninstance Show Cake where\n  show cake = prints cake where\n   prints (Food name []) = name ++ \"\\n\"\n</code></pre>\n\n<p>I want to print cakes like this (each cake got different flavors)</p>\n\n<pre><code>Cake1\n  Chocolate\n  Nutella\n    Strawberry\nCake2\n  Chocolate\n  Vanilla\nCake3\n</code></pre>\n\n<p>But I got error, doesn't works! How can I do it?</p>\n"}, {"tags": ["haskell", "cabal", "package-managers", "cabal-install"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1511300826, "post_id": 47423018, "comment_id": 81801272, "body": "I&#39;d have to back up a step and ask how one could even <i>use</i> a lua package in a Haskell package.  Can you clarify your view on that?"}, {"owner": {"reputation": 12250, "user_id": 2425163, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05f4000597865eeaf51c32ed5694479c?s=128&d=identicon&r=PG", "display_name": "tarleb", "link": "https://stackoverflow.com/users/2425163/tarleb"}, "reply_to_user": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1511333031, "post_id": 47423018, "comment_id": 81811041, "body": "We have <a href=\"https://github.com/hslua/hslua\" rel=\"nofollow noreferrer\">hslua</a>, which serves as a bridge between haskell and lua. If the lua package consists of a few lua files only, then one could compile the lua code into the binary (as we do in pandoc)."}], "answers": [{"comments": [{"owner": {"reputation": 12250, "user_id": 2425163, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05f4000597865eeaf51c32ed5694479c?s=128&d=identicon&r=PG", "display_name": "tarleb", "link": "https://stackoverflow.com/users/2425163/tarleb"}, "edited": false, "score": 0, "creation_date": 1511377778, "post_id": 47424071, "comment_id": 81839509, "body": "Thank you for your answer. I was hoping for some more guidance: are there any examples/code snippets which could serve as a basis for such an undertaking?"}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 3, "last_activity_date": 1511304737, "creation_date": 1511304737, "answer_id": 47424071, "question_id": 47423018, "link": "https://stackoverflow.com/questions/47423018/can-i-use-cabal-to-handle-non-haskell-libraries/47424071#47424071", "title": "Can I use cabal to handle non-Haskell libraries?", "body": "<p>It is in principle possible: with <code>build-type: custom</code>, cabal will compile and run your <code>Setup.hs</code> in place of its own build mechanisms, and you can put arbitrary Haskell code in <code>Setup.hs</code>. Alternately, if you can fit your setup process into the usual configure-make-make install dance, then the <code>build-type: configure</code> option may be just the ticket.</p>\n\n<p>See <a href=\"https://www.haskell.org/cabal/users-guide/developing-packages.html#pkg-field-build-type\" rel=\"nofollow noreferrer\">the user's guide</a> for more complete details on these configuration options.</p>\n"}], "owner": {"reputation": 12250, "user_id": 2425163, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/05f4000597865eeaf51c32ed5694479c?s=128&d=identicon&r=PG", "display_name": "tarleb", "link": "https://stackoverflow.com/users/2425163/tarleb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 47424071, "answer_count": 1, "score": 1, "last_activity_date": 1511304737, "creation_date": 1511299590, "question_id": 47423018, "link": "https://stackoverflow.com/questions/47423018/can-i-use-cabal-to-handle-non-haskell-libraries", "title": "Can I use cabal to handle non-Haskell libraries?", "body": "<p>There have been attempt in other package managers to build brigdes to other ecosystems. E.g., there is <a href=\"https://github.com/eloquent/composer-npm-bridge\" rel=\"nofollow noreferrer\">composer-npm-bridge</a>, which allows to pull packages from node registry into a PHP project.  Is it possible to build something like this using cabal?  More concretely, how would one go about pulling packages from <a href=\"https://luarocks.org\" rel=\"nofollow noreferrer\">luarocks</a> into a Haskell project?</p>\n"}, {"tags": ["haskell", "haskell-lens", "gadt"], "comments": [{"owner": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 2, "creation_date": 1511286879, "post_id": 47419452, "comment_id": 81793337, "body": "Why should <code>mt ~ Just t</code> hold? The type <code>forall mt t. Traversal&#39; (Foo mt) (Tagged t)</code> states these things are completely abitrary."}, {"owner": {"reputation": 1117, "user_id": 1641035, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b63d948c23003346549369112f336519?s=128&d=identicon&r=PG", "display_name": "Alexey Vagarenko", "link": "https://stackoverflow.com/users/1641035/alexey-vagarenko"}, "reply_to_user": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 0, "creation_date": 1511287496, "post_id": 47419452, "comment_id": 81793703, "body": "@gallais How I should rewrite <code>tagged</code> type if I want <code>mt ~ Just t</code> hold in <code>FooTagged</code> case?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1511310775, "post_id": 47419452, "comment_id": 81804887, "body": "NB: <code>data family Tagged (tag :: Tag)</code> is not a very useful declaration; the instances of <code>Tagged</code> must either be the single <code>data instance Tagged x where ..</code> or one or both of <code>data instance Tagged TagA where ..</code> and <code>data instance Tagged TagB where ..</code> (in general, a data family whose only indices are closed kinds is not useful)."}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 2, "last_activity_date": 1511291863, "creation_date": 1511291863, "answer_id": 47420983, "question_id": 47419452, "link": "https://stackoverflow.com/questions/47419452/how-to-write-traversal-for-gadt/47420983#47420983", "title": "How to write Traversal for GADT?", "body": "<p>This compiles with <code>AllowAmbiguousTypes</code>. I am a bit suspicious of this code, though, because I can't clearly see how it will be used.</p>\n\n<pre><code>type family FromMaybe (t :: Tag) (x :: Maybe Tag) :: Tag where\n  FromMaybe _ (Just tag) = tag\n  FromMaybe t _          = t  \n\ntagged :: forall mt t. Traversal' (Foo mt) (Tagged (FromMaybe t mt))\ntagged _  foo@(Foo         _) = pure foo\ntagged fn foo@(FooTagged i t) = fmap (\\t' -&gt; FooTagged i t') (fn t)\n</code></pre>\n"}], "owner": {"reputation": 1117, "user_id": 1641035, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b63d948c23003346549369112f336519?s=128&d=identicon&r=PG", "display_name": "Alexey Vagarenko", "link": "https://stackoverflow.com/users/1641035/alexey-vagarenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 47420983, "answer_count": 1, "score": 2, "last_activity_date": 1511293785, "creation_date": 1511286367, "last_edit_date": 1511293785, "question_id": 47419452, "link": "https://stackoverflow.com/questions/47419452/how-to-write-traversal-for-gadt", "title": "How to write Traversal for GADT?", "body": "<p>Is it possible to write a <code>Traversal</code> for a GADT?\nI have:</p>\n\n<pre><code>{-# LANGUAGE TypeInType, GADTs, TypeFamilies, RankNTypes #-}\n\nmodule GADT where\n\nimport Data.Kind\n\ndata Tag = TagA | TagB\n\ndata family Tagged (tag :: Tag)\n\ndata Foo (tag :: Maybe Tag) where\n    Foo       :: Int -&gt; Foo Nothing\n    FooTagged :: Int -&gt; Tagged tag -&gt; Foo (Just tag)\n</code></pre>\n\n<p>I want to write traversal for <code>Tagged tag</code> field.\nI tried: </p>\n\n<pre><code>type Traversal' s a = forall f. Applicative f =&gt; (a -&gt; f a) -&gt; s -&gt; f s\n\ntagged :: forall mt t. Traversal' (Foo mt) (Tagged t)\ntagged _  foo@(Foo         _) = pure foo\ntagged fn foo@(FooTagged i t) = fmap (\\t' -&gt; FooTagged i t') (fn t)\n</code></pre>\n\n<p>but it fails: </p>\n\n<pre><code>* Could not deduce: tag ~ t\n      from the context: mt ~ 'Just tag\n        bound by a pattern with constructor:\n                   FooTagged :: forall (tag :: Tag).\n                                Int -&gt; Tagged tag -&gt; Foo ('Just tag),\n                 in an equation for `tagged'\n        at gadt.hs:19:16-28\n      `tag' is a rigid type variable bound by\n        a pattern with constructor:\n          FooTagged :: forall (tag :: Tag).\n                       Int -&gt; Tagged tag -&gt; Foo ('Just tag),\n        in an equation for `tagged'\n        at gadt.hs:19:16-28\n      `t' is a rigid type variable bound by\n        the type signature for:\n          tagged :: forall (mt :: Maybe Tag) (t :: Tag).\n                    Traversal' (Foo mt) (Tagged t)\n        at gadt.hs:17:1-53\n      Expected type: Tagged t\n        Actual type: Tagged tag\n    * In the first argument of `fn', namely `t'\n      In the second argument of `fmap', namely `(fn t)'\n      In the expression: fmap (\\ t' -&gt; FooTagged i t') (fn t)\n    * Relevant bindings include\n        t :: Tagged tag (bound at gadt.hs:19:28)\n        fn :: Tagged t -&gt; f (Tagged t) (bound at gadt.hs:19:8)\n        tagged :: (Tagged t -&gt; f (Tagged t)) -&gt; Foo mt -&gt; f (Foo mt)\n          (bound at gadt.hs:18:1)\n   |\n19 | tagged fn foo@(FooTagged i t) = fmap (\\t' -&gt; FooTagged i t') (fn t)\n   |                                                                  ^\n</code></pre>\n\n<p>How can I prove <code>mt ~ Just t</code> in <code>FooTagged</code> case without <code>unsafeCoerce</code>?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Using type family to specify traversal's focus seems to work:</p>\n\n<pre><code>type Traversal' s a = forall f. Applicative f =&gt; (a -&gt; f a) -&gt; s -&gt; f s\n\ntype family TaggedType (m :: Maybe Tag) :: Type where\n    TaggedType ('Just a) = Tagged a\n    TaggedType 'Nothing  = ()\n\ntagged :: forall mt. Traversal' (Foo mt) (TaggedType mt)\ntagged _  foo@(Foo         _) = pure foo\ntagged fn foo@(FooTagged i t) = fmap (\\t' -&gt; FooTagged i t') (fn t)\n</code></pre>\n\n<p>Are there other solutions?</p>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>It should probably be <code>TaggedType 'Nothing  = Void</code> instead of <code>TaggedType 'Nothing  = ()</code> in the last clause there.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1511285908, "post_id": 47419277, "comment_id": 81792736, "body": "&quot;when I try to use the map function in conjunction with the code&quot; - I have no idea what you mean by this."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1511286331, "post_id": 47419277, "comment_id": 81792990, "body": "Do not use <code>length xs</code>. It will loop in case it is an infinite loop. Furthermore it will blow op memory in case the list can be processed by using a list."}, {"owner": {"reputation": 15, "user_id": 8859289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/142d7faff567c7aa229890553cae1600?s=128&d=identicon&r=PG&f=1", "display_name": "AlonErebos", "link": "https://stackoverflow.com/users/8859289/alonerebos"}, "edited": false, "score": 0, "creation_date": 1511286342, "post_id": 47419277, "comment_id": 81792996, "body": "Sorry, by that I mean when I do (map letter (whiteSpace n)) for example, it fails at the space"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511286381, "post_id": 47419277, "comment_id": 81793019, "body": "@AdenGFX: what i letter doing here?"}, {"owner": {"reputation": 15, "user_id": 8859289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/142d7faff567c7aa229890553cae1600?s=128&d=identicon&r=PG&f=1", "display_name": "AlonErebos", "link": "https://stackoverflow.com/users/8859289/alonerebos"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511287060, "post_id": 47419277, "comment_id": 81793449, "body": "@WillemVanOnsem letter is a preset list of strings that when printed produces an ascii letter, e.g (letter &#39;A&#39;) will produce A in ascii characters"}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1511287253, "post_id": 47419277, "comment_id": 81793566, "body": "Oh. I understand what you mean by <code>map</code> now. You likely want to use <code>concatMap</code>."}], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 5, "last_activity_date": 1511291752, "last_edit_date": 1511291752, "creation_date": 1511291130, "answer_id": 47420794, "question_id": 47419277, "link": "https://stackoverflow.com/questions/47419277/add-spaces-in-between-string-haskell/47420794#47420794", "title": "add spaces in between String: Haskell", "body": "<p>Do you want to implement <code>Data.List.intersperse</code></p>\n\n<pre><code>&gt; intersperse ' ' \"asdfasd\"\n\"a s d f a s d\"\n</code></pre>\n\n<p>a basic implementation for your use case can be</p>\n\n<pre><code>&gt; let white :: String -&gt; String\n|     white []     = []\n|     white [x]    = [x]\n|     white (x:xs) = x:' ':white xs\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8859289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/142d7faff567c7aa229890553cae1600?s=128&d=identicon&r=PG&f=1", "display_name": "AlonErebos", "link": "https://stackoverflow.com/users/8859289/alonerebos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1086, "favorite_count": 0, "accepted_answer_id": 47420794, "answer_count": 1, "score": -2, "last_activity_date": 1511291752, "creation_date": 1511285772, "question_id": 47419277, "link": "https://stackoverflow.com/questions/47419277/add-spaces-in-between-string-haskell", "title": "add spaces in between String: Haskell", "body": "<p>I am trying to add a white space in between an inputted string and, although the code works, when I try to use the map function in conjunction with the code, it gives a pattern match failure when it hits the whitespace, any way I can ignore the whitespace or improve the code?</p>\n\n<pre><code>whiteSpace xs \n    | length xs &lt;= 1        = xs\n    | otherwise             = take 1 xs ++ \" \"++ whiteSpace (drop 1 xs)\n</code></pre>\n"}, {"tags": ["haskell", "types", "wrapper", "typeclass"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1511285775, "post_id": 47419010, "comment_id": 81792662, "body": "What error message are you getting?"}, {"owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1511285958, "post_id": 47419010, "comment_id": 81792764, "body": "It was something along the lines of &quot;expexted type a, got type W a&quot;"}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 2, "creation_date": 1511286851, "post_id": 47419010, "comment_id": 81793319, "body": "Your type signature is binding a to the unwrapped W, and then you&#39;re trying to call the same function on a W. Perhaps you could pass op to prop_binary twice, and use one for the wrapped type, and one for the unwrapped type? With a type signature of <code>Eq b =&gt; (a -&gt; a -&gt; b) -&gt; (W a -&gt; W a -&gt; W b) -&gt; W a -&gt; W a -&gt; Bool</code>"}, {"owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1511287223, "post_id": 47419010, "comment_id": 81793546, "body": "Yes that&#39;s an option, thanks! I wonder if there&#39;s another one too (apart from that in the EDIT of the OP)"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1511310918, "post_id": 47419010, "comment_id": 81804928, "body": "What is wrong with the implementation you&#39;ve written? How would you like to see it improved? That is, how would you like to use your function that the current implementation doesn&#39;t permit?"}, {"owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "edited": false, "score": 0, "creation_date": 1511312884, "post_id": 47419010, "comment_id": 81805499, "body": "Hm I guess my objection is mostly esthetic at this point (three language extensions, <code>Num</code> constraint in three places). Also I know that the type is either <code>a</code> or <code>W a</code> but the function is too general; <code>a</code> or <code>W b</code>. EDIT: oops, there&#39;s a typo on the last bit, I&#39;ll edit"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1511332943, "post_id": 47419010, "comment_id": 81810999, "body": "Since the operation is binary, could you make it a <code>Semigroup</code> or <code>Monoid</code>? If so, you might need to pass the operation as an argument at all. Instead, you could simply write a property that the wrapped type produces the same result as the unwrapped monoid or semigroup."}], "owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511312967, "creation_date": 1511284870, "last_edit_date": 1511312967, "question_id": 47419010, "link": "https://stackoverflow.com/questions/47419010/binary-function-of-type-and-wrapped-type", "title": "Binary function of type and wrapped type", "body": "<p>I have a binary function that can work on a type <code>a</code> and a wrapped version of the same <code>W a</code>, through a class (in fact it's <code>Num</code>) . I want to check that it works the same way on both and try to write the following test:</p>\n\n<pre><code>prop_binary :: (a -&gt; a -&gt; a) -&gt; W a -&gt; W a -&gt; Bool\nprop_binary op wrappedm@(W m) wrappedn@(W n) =\n  m `op` n == result\n  where (W result) = wrappedm `op` wrappedn\n</code></pre>\n\n<p>But this doesn't compile. I've tried a few different things, including adding a <code>Num</code> constraint, but I can't get it going.</p>\n\n<p>EDIT: I came up with the following not very nice solution:</p>\n\n<pre><code>{-# LANGUAGE AllowAmbiguousTypes, FlexibleContexts, Rank2Types - #}\nprop_binary :: (Eq b, Num b, Num (W b)) =&gt; (forall a. (Num a) =&gt; a -&gt; a -&gt; a) -&gt; W b -&gt; W b -&gt; Bool\n(...)\n</code></pre>\n\n<p>But maybe there's something better? </p>\n"}, {"tags": ["haskell", "types"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511282432, "post_id": 47418210, "comment_id": 81790361, "body": "a type always starts with uppercase."}, {"owner": {"reputation": 11, "user_id": 6224253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gm_BMcp_gQU/AAAAAAAAAAI/AAAAAAAAADc/X97w9DhmRLU/photo.jpg?sz=128", "display_name": "Joao Rafael", "link": "https://stackoverflow.com/users/6224253/joao-rafael"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511282589, "post_id": 47418210, "comment_id": 81790476, "body": "Done. It does not resolve my problem.."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6224253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gm_BMcp_gQU/AAAAAAAAAAI/AAAAAAAAADc/X97w9DhmRLU/photo.jpg?sz=128", "display_name": "Joao Rafael", "link": "https://stackoverflow.com/users/6224253/joao-rafael"}, "edited": false, "score": 0, "creation_date": 1511283020, "post_id": 47418301, "comment_id": 81790807, "body": "Thanks!  But How can I access to list?  function2 p d (insertHead x xs) = notElem p xs &lt;- My problem is acess to xs"}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1511283145, "post_id": 47418301, "comment_id": 81790914, "body": "Sounds like a separate question.  Also notice there are no arrays discussed here, just linked lists."}, {"owner": {"reputation": 11, "user_id": 6224253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gm_BMcp_gQU/AAAAAAAAAAI/AAAAAAAAADc/X97w9DhmRLU/photo.jpg?sz=128", "display_name": "Joao Rafael", "link": "https://stackoverflow.com/users/6224253/joao-rafael"}, "reply_to_user": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1511283287, "post_id": 47418301, "comment_id": 81791022, "body": "You&#39;re rigth @Thomas M. DuBuisson"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 11, "user_id": 6224253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gm_BMcp_gQU/AAAAAAAAAAI/AAAAAAAAADc/X97w9DhmRLU/photo.jpg?sz=128", "display_name": "Joao Rafael", "link": "https://stackoverflow.com/users/6224253/joao-rafael"}, "edited": false, "score": 0, "creation_date": 1511283302, "post_id": 47418301, "comment_id": 81791030, "body": "@JoaoRafael <code>[Int]</code> is <i>not</i> an array, it is a <i>(linked) list</i>. You can for instance access the <code>i</code>-th element with <code>a!!i</code>, but this is usually a sign that something is wrong with the algorithm, since Haskell aims to construct algorithms that <i>iterate</i> over lists, not <i>random access</i> it."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1511282607, "creation_date": 1511282607, "answer_id": 47418301, "question_id": 47418210, "link": "https://stackoverflow.com/questions/47418210/how-can-i-do-a-data-type-recursive-in-haskell/47418301#47418301", "title": "how can I do a data type recursive in haskell", "body": "<p>This has nothing to do with the fact that the data type is recursive. You can not define lowercase data types. Types start with an <strong>uppercase</strong>.</p>\n\n<p>Furthermore your have to <strong>define a constructor</strong>, the most straightforward constructor here is probably <code>Xpto</code> as well (constructors also start with an upercase).</p>\n\n<p>So by writing:</p>\n\n<pre><code>data <b>X</b>pto = <b>Xpto</b> String [<b>X</b>pto]\n--          ^ constructor\n\ninsertHead :: String -&gt; <b>X</b>pto\ninsertHead s = <b>Xpto</b> s []\n--             ^ apply the data constructor</code></pre>\n\n<p>Or we can make <code>insertHead</code> pointfree, by using <code>flip</code>:</p>\n\n<pre><code>insertHead :: String -&gt; Xpto\ninsertHead = <b>flip Xpto []</b></code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6224253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gm_BMcp_gQU/AAAAAAAAAAI/AAAAAAAAADc/X97w9DhmRLU/photo.jpg?sz=128", "display_name": "Joao Rafael", "link": "https://stackoverflow.com/users/6224253/joao-rafael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 47418301, "answer_count": 1, "score": 0, "last_activity_date": 1511298397, "creation_date": 1511282365, "last_edit_date": 1511298397, "question_id": 47418210, "link": "https://stackoverflow.com/questions/47418210/how-can-i-do-a-data-type-recursive-in-haskell", "title": "how can I do a data type recursive in haskell", "body": "<p>How I can do a data type like this:</p>\n\n<pre><code>data Xpto = String [Xpto ]\n\ninsertHead :: String -&gt; Xpto \ninsertHead s = s []\n</code></pre>\n\n<p>I got this message:</p>\n\n<pre><code>Type error in application\n*** Expression     : s []\n*** Term           : s\n*** Type           : [Char]\n*** Does not match : a -&gt; b\n</code></pre>\n"}, {"tags": ["haskell", "monads", "lazy-evaluation", "bubble-sort", "traversable"], "comments": [{"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 0, "creation_date": 1511360929, "post_id": 47416994, "comment_id": 81828553, "body": "This is an excellent question, which I don&#39;t have time to look into at the moment. I would like to point out this discussion on sorting Traversables: <a href=\"https://www.reddit.com/r/haskell/comments/63a4ea/fast_total_sorting_of_arbitrary_traversable/\" rel=\"nofollow noreferrer\">reddit.com/r/haskell/comments/63a4ea/&hellip;</a> If you weren&#39;t aware of it already, maybe you could take some ideas from it."}], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 2, "last_activity_date": 1521343671, "last_edit_date": 1521343671, "creation_date": 1511403930, "answer_id": 47446642, "question_id": 47416994, "link": "https://stackoverflow.com/questions/47416994/infinite-loop-in-bubble-sort-over-traversable-in-haskell/47446642#47446642", "title": "Infinite loop in bubble sort over Traversable in Haskell", "body": "<p>First of all, style-wise, <code>Finished = Data.Monoid.Any</code> (but you only use the <code>Monoid</code> bit for <code>(bubble =&lt;&lt;)</code> when it may as well be <code>bubble . snd</code>, so I just dropped it for <code>Bool</code>), <code>head . dropWhile (not . isFinished . fst) = fromJust . find (isFinished . fst)</code>, <code>case x of { Nothing -&gt; default; Just t = f t } = maybe default f x</code>, and <code>maybe default id = fromMaybe default</code>.</p>\n\n<p>Second, your assumption that <code>force</code> does nothing in <code>Tardis</code> is wrong. Thunks don't \"remember\" they were created in a lazy-pattern match. <code>force</code> itself does nothing, but when the thunk it produces is evaluated, it causes the thunk it was given to be evaluated to NF, no exceptions. In your case, that <code>case mf of ...</code> evaluates <code>mf</code> to normal form (instead of just WHNF) because <code>mf</code> has <code>force</code> in it. I don't believe it's causing any problems here, though.</p>\n\n<p>The real problem is that you are \"deciding what to do\" depending on a future value. This means you are matching on a future value, and then you are using that future value to produce a <code>Tardis</code> computation that gets <code>(&gt;&gt;=)</code>'d into the one that produces that value. This is a no-no. If it's any clearer: <code>runTardis (do { x &lt;- getFuture; x `seq` return () }) ((),()) = _|_</code> but <code>runTardis (do { x &lt;- getFuture; return $ x `seq` () }) ((),()) = ((),((),()))</code>. You are allowed to use a future value to create a pure value, but you cannot use it to decide the <code>Tardis</code> you will run. In your code, this is when you try <code>case mf of { Nothing -&gt; do ...; Just x -&gt; do ... }</code>.</p>\n\n<p>This also means that <code>traceShowM</code> is causing an issue all by itself, as printing something in <code>IO</code> evaluates it deeply (<code>traceShowM</code> is approximately <code>unsafePerformIO . (return () &lt;$) . print</code>). <code>mf</code> needs to be evaluated as the <code>unsafePerformIO</code> is executing, but <code>mf</code> depends on evaluating the <code>Tardis</code> operations that come after the <code>traceShowM</code>, but <code>traceShowM</code> forces the <code>print</code> to be done before it allows the next <code>Tardis</code> operation (<code>return ()</code>) to be revealed. <code>&lt;&lt;loop&gt;&gt;</code>!</p>\n\n<p>Here's the fixed version:</p>\n\n<pre><code>{-# LANGUAGE TupleSections #-}\n\nmodule Main where\n\nimport Control.Monad\nimport Control.Monad.Tardis\nimport Data.Bifunctor\nimport Data.Tuple\nimport Data.List hiding (sort)\nimport Data.Maybe\n\n-- | A single iteration of bubble sort over a list.\n-- If the list is unmodified, return 'True', else 'False'\nbubble :: Ord a =&gt; [a] -&gt; (Bool, [a])\nbubble (x:y:xs)\n  | x &lt;= y = bimap id            (x:) (bubble (y:xs))\n  | x  &gt; y = bimap (const False) (y:) (bubble (x:xs))\nbubble as = (True, as)\n\n-- | A single iteration of bubble sort over a 'Traversable'.\n-- If the list is unmodified, return 'True', else 'False'\nbubbleTraversable :: (Traversable t, Ord a) =&gt; t a -&gt; (Bool, t a)\nbubbleTraversable t = extract $ flip runTardis init $ forM t $ \\here -&gt; do\n  -- Give the current element to the past so it will have sent us biggest element\n  -- so far seen. \n  sendPast (Just here)\n  (mp, finished) &lt;- getPast\n  let this = fromMaybe here mp\n\n\n  -- Given this element in the present and that element from the future,\n  -- swap them if needed.\n  -- force is fine here\n  mf &lt;- getFuture\n  let (this', that', finished') = fromMaybe (this, mf, finished) $ do\n                                    that &lt;- mf\n                                    guard $ that &lt; this\n                                    return (that, Just this, False)\n\n  -- Send the bigger element back to the future\n  -- Can't use mf to decide whether or not you sendFuture, but you can use it\n  -- to decide WHAT you sendFuture.\n  sendFuture (that', finished')\n\n  -- Replace the element at this location with the one that belongs here\n  return this'\n  where\n    -- No need to be clever\n    extract (a, (_, (_, b))) = (b, a)\n    init = (Nothing, (Nothing, True))\n\n-- | Sort a list using bubble sort.\nsort :: Ord a =&gt; [a] -&gt; [a]\nsort = snd . fromJust . find fst . iterate (bubble . snd) . (False,)\n\n-- | Sort a 'Traversable' using bubble sort.\nsortTraversable :: (Traversable t, Ord a) =&gt; t a -&gt; t a\nsortTraversable = snd . fromJust . find fst . iterate (bubbleTraversable . snd) . (False,)\n\nmain :: IO ()\nmain = do\n  print $ sort ([1,4,2,5,2,5,7,3,2] :: [Int]) -- works like a charm\n  print $ sortTraversable ([1,4,2,5,2,5,7,3,2] :: [Int]) -- works like a polymorphic charm\n\n-- Demonstration that force does work in Tardis\ncheckForce = fst $ sortTraversable [(1, \"\"), (2, undefined)] !! 1\n-- checkForce = 2 if there is no force\n-- checkForce = _|_ if there is a force\n</code></pre>\n\n<p>If you still want to <code>trace</code> <code>mf</code>, you can <code>mf &lt;- traceShowId &lt;$&gt; getFuture</code>, but you may not get any well-defined order to the messages (don't expect time to make sense inside a <code>Tardis</code>!), though in this case it seems to just print the tails of the lists backwards.</p>\n"}], "owner": {"reputation": 159, "user_id": 6058497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/971a52457529da0152bbb4f6b8dfb77f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Lorenzen", "link": "https://stackoverflow.com/users/6058497/anton-lorenzen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 4, "accepted_answer_id": 47446642, "answer_count": 1, "score": 11, "last_activity_date": 1521343671, "creation_date": 1511278898, "last_edit_date": 1511295269, "question_id": 47416994, "link": "https://stackoverflow.com/questions/47416994/infinite-loop-in-bubble-sort-over-traversable-in-haskell", "title": "Infinite loop in bubble sort over Traversable in Haskell", "body": "<p>I am trying to implement a bubble sort over any traversable container using the <a href=\"https://hackage.haskell.org/package/tardis-0.4.1.0/docs/Control-Monad-Tardis.html\" rel=\"noreferrer\">Tardis</a> monad.</p>\n\n<pre><code>{-# LANGUAGE TupleSections #-}\n\nmodule Main where\n\nimport Control.DeepSeq\nimport Control.Monad.Tardis\nimport Data.Bifunctor\nimport Data.Traversable\nimport Data.Tuple\nimport Debug.Trace\n\nnewtype Finished = Finished { isFinished :: Bool }\n\ninstance Monoid Finished where\n  mempty = Finished False\n  mappend (Finished a) (Finished b) = Finished (a || b)\n\n-- | A single iteration of bubble sort over a list.\n-- If the list is unmodified, return 'Finished' 'True', else 'False'\nbubble :: Ord a =&gt; [a] -&gt; (Finished, [a])\nbubble (x:y:xs)\n  | x &lt;= y = bimap id                       (x:) (bubble (y:xs))\n  | x  &gt; y = bimap (const $ Finished False) (y:) (bubble (x:xs))\nbubble as = (Finished True, as)\n\n-- | A single iteration of bubble sort over a 'Traversable'.\n-- If the list is unmodified, return 'Finished' 'True', else 'Finished' 'False'\nbubbleTraversable :: (Traversable t, Ord a, NFData a, Show a) =&gt; t a -&gt; (Finished, t a)\nbubbleTraversable t = extract $ flip runTardis (initFuture, initPast) $ forM t $ \\here -&gt; do\n  sendPast (Just here)\n  (mp, finished) &lt;- getPast\n  -- For the first element use the first element,\n  -- else the biggest of the preceding.\n  let this = case mp of { Nothing -&gt; here; Just a -&gt; a }\n  mf &lt;- force &lt;$&gt; getFuture -- Tardis uses lazy pattern matching,\n                            -- so force has no effect here, I guess.\n  traceM \"1\"\n  traceShowM mf -- Here the program enters an infinite loop.\n  traceM \"2\"\n  case mf of\n    Nothing -&gt; do\n      -- If this is the last element, there is nothing to do.\n      return this\n    Just next -&gt; do\n      if this &lt;= next\n        -- Store the smaller element here\n        -- and give the bigger into the future.\n        then do\n          sendFuture (Just next, finished)\n          return this\n        else do\n          sendFuture (Just this, Finished False)\n          return next\n  where\n    extract :: (Traversable t) =&gt; (t a, (Maybe a, (Maybe a, Finished))) -&gt; (Finished, t a)\n    extract = swap . (snd . snd &lt;$&gt;)\n\n    initPast = (Nothing, Finished True)\n    initFuture = Nothing\n\n-- | Sort a list using bubble sort.\nsort :: Ord a =&gt; [a] -&gt; [a]\nsort = snd . head . dropWhile (not . isFinished . fst) . iterate (bubble =&lt;&lt;) . (Finished False,)\n\n-- | Sort a 'Traversable' using bubble sort.\nsortTraversable :: (Traversable t, Ord a, NFData a, Show a) =&gt; t a -&gt; t a\nsortTraversable = snd . head . dropWhile (not . isFinished . fst) . iterate (bubbleTraversable =&lt;&lt;) . (Finished False,)\n\nmain :: IO ()\nmain = do\n  print $ sort ([1,4,2,5,2,5,7,3,2] :: [Int]) -- works like a charm\n  print $ sortTraversable ([1,4,2,5,2,5,7,3,2] :: [Int]) -- breaks\n</code></pre>\n\n<p>The main difference between <code>bubble</code> and <code>bubbleTraversable</code> is the handling of the <code>Finished</code> flag: In <code>bubble</code> we assume that the right-most element is already sorted and change the flag, if the elements to the left of it aren't; in <code>bubbleTraversable</code> we do it the other way around. </p>\n\n<p>While trying to evaluate <code>mf</code> in <code>bubbleTraversable</code>the program enters an infinite loop in the lazy references as evidenced by the ghc output <code>&lt;&lt;loop&gt;&gt;</code>. </p>\n\n<p>The problem is probably, that <code>forM</code> tries to evaluate the elements successively, before the monadic chaining takes place (especially since <code>forM</code> is <code>flip traverse</code> for lists). Is there any way to rescue this implementation?</p>\n"}, {"tags": ["haskell", "syntax", "compiler-errors", "keyword"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1511275084, "post_id": 47415710, "comment_id": 81784978, "body": "<code>Where wrapshift</code> should be <code>where wrapshift</code> -- case matters."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 1, "creation_date": 1511279027, "post_id": 47415710, "comment_id": 81787865, "body": "Consider accepting answers that are helpful. By accepting a answer you are indicating to future readers that it is a correct answer."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1511280827, "post_id": 47415710, "comment_id": 81789210, "body": "<a href=\"https://wiki.haskell.org/Keywords#where\" rel=\"nofollow noreferrer\">wiki.haskell.org/Keywords#where</a>"}], "answers": [{"tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": false, "score": 5, "last_activity_date": 1511275095, "creation_date": 1511275095, "answer_id": 47415747, "question_id": 47415710, "link": "https://stackoverflow.com/questions/47415710/parse-error-on-input/47415747#47415747", "title": "parse error on input `=&#39;?", "body": "<pre><code>Where wrapshift\n</code></pre>\n\n<p>Note how the <code>where</code> here is not highlighted as a keyword. That's because you spelled it with a capital \"W\".</p>\n\n<p>So it's interpreted as an identifier instead of a keyword, making <code>Where wrapshift</code> be interpreted as arguments to the previous expression (i.e. <code>c Where wrapshift</code> is seen as a function call). That's why it does not expect a <code>=</code> there.</p>\n"}], "owner": {"reputation": 321, "user_id": 2260430, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/UVI0j.jpg?s=128&g=1", "display_name": "l&#230;ran91", "link": "https://stackoverflow.com/users/2260430/l%c3%a6ran91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "closed_date": 1511280613, "answer_count": 1, "score": 0, "last_activity_date": 1511280904, "creation_date": 1511274986, "last_edit_date": 1511280904, "question_id": 47415710, "link": "https://stackoverflow.com/questions/47415710/parse-error-on-input", "closed_reason": "Not suitable for this site", "title": "parse error on input `=&#39;?", "body": "<p>I am a newbie to Haskell and am trying to cipher the plain text by using shifting the ASCII values and if my plain text contains a number,then it has to encode each digit by putting a special symbol in place of the digit like (0=*,1='\\',2=~,3=!,4=@,5=#,6=$, 7=%,8=^,9=&amp;).here below is my code</p>\n\n<pre><code>import Data.Char\n\nisInRange :: Char -&gt; Char -&gt; Char -&gt; Bool\nisInRange l u c = (c &gt;= l) &amp;&amp; (c &lt;= u)\n\n--is this Letter to be ciphered\ncanEncrypt :: Char -&gt; Bool\ncanEncrypt c = isLower(c) &amp;&amp; isAscii(c)\n\n-should we wrap around the alphabet ?\nwraparound shift c\n | isLower c &amp;&amp; ord(c)+shift &gt; ord 'z' = True\n | otherwise = False\n\n--encrypt single char at a time\nencryptChar :: Char -&gt; Char -&gt; Char\nencryptChar :: Char -&gt; Char -&gt; Char\nencryptChar shift c\n  | canEncrypt c = chr (ord c + wrapshift)\n  | isUpper c = c\n  Where wrapshift = let shift' = ord(shift) `mod` 26\n                    in if (wraparound shift' c)\n                        then shift'-26\n                        else shift'\nencryptChar _ '0' = '*'\nencryptChar _ '1' = '\\''\nencryptChar _ '2' = '~'\nencryptChar _ '3' = '!'\nencryptChar _ '4' = '@'\nencryptChar _ '5' = '#'\nencryptChar _ '6' = '$'\nencryptChar _ '7' = '%'\nencryptChar _ '8' = '^'\nencryptChar _ '9' = '&amp;'\nencryptChar _ c = c\n\nencryptText :: String -&gt; String -&gt; String\nencryptText text xs = [ encryptChar x s | x &lt;- xs, s &lt;- text]\n</code></pre>\n\n<p>so far so good, to wraparound my ciphered characters I have defined <code>wrapshift</code> function(i think its the culprit)  but when I compile it, it showing an error like below</p>\n\n<pre><code>encrypt2.hs:27:18: error:\nparse error on input `='\nPerhaps you need a 'let' in a 'do' block?\ne.g. 'let x = 5' instead of 'x = 5'\n   |\n27 |  Where wrapshift = let shift' = ord(shift) `mod` 26\n   |                  ^\nFailed, 0 modules loaded.\n</code></pre>\n\n<p>I know these kinds of error occurs due to <code>tabs</code> in my source file but I have checked the total file and didn't find any mistake.I think am doing something wrong here I don't know what ? why is this error occurring please help me I have been struck here .thank you</p>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8638529"}, "edited": false, "score": 0, "creation_date": 1511269708, "post_id": 47413890, "comment_id": 81781099, "body": "Now it work with x = 0 and y = 0..99, I want it to print result when x = 0..99 and y = 0..99"}, {"owner": {"reputation": 486, "user_id": 854672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eda4f03accf45734865ea7e6c6de010?s=128&d=identicon&r=PG", "display_name": "MauganRa", "link": "https://stackoverflow.com/users/854672/mauganra"}, "edited": false, "score": 0, "creation_date": 1511270464, "post_id": 47413890, "comment_id": 81781636, "body": "Only the outermost pair of round brackets in the last line is required. <code>id</code> is not necessary as well because it is, well, the identity function. Also, I&#39;m pretty sure <code>nub</code> is unnecessary as well."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511271137, "post_id": 47413890, "comment_id": 81782109, "body": "convert the <code>takeWhile</code> into a <code>filter</code>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1511282304, "post_id": 47413890, "comment_id": 81790270, "body": "if <code>a == sqrt(b)</code>, doesn&#39;t it mean that <code>a*a == b</code>? if <code>n == sqrt(x*x)</code>, doesn&#39;t it mean that <code>n == x</code>? if <code>p + q &gt; 9</code>, doesn&#39;t it mean that <code>q &gt; 9 - p</code>? if <code>p + q &lt; 100</code>, doesn&#39;t it mean that <code>q &lt; 100 - p</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8638529"}, "edited": false, "score": 0, "creation_date": 1511289649, "post_id": 47413890, "comment_id": 81794902, "body": "using filter instead of takeWhile fixed it, thank you"}], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 854672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eda4f03accf45734865ea7e6c6de010?s=128&d=identicon&r=PG", "display_name": "MauganRa", "link": "https://stackoverflow.com/users/854672/mauganra"}, "is_accepted": false, "score": 2, "last_activity_date": 1511271725, "creation_date": 1511271725, "answer_id": 47414586, "question_id": 47413890, "link": "https://stackoverflow.com/questions/47413890/going-through-all-items-in-list/47414586#47414586", "title": "Going through all items in list", "body": "<p>The <code>takeWhile</code> is the culprit because the sum will be > 100 at some point, and then the list gets cut off.</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 3, "last_activity_date": 1511272547, "creation_date": 1511272547, "answer_id": 47414863, "question_id": 47413890, "link": "https://stackoverflow.com/questions/47413890/going-through-all-items-in-list/47414863#47414863", "title": "Going through all items in list", "body": "<p>A <code>takeWhile :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</code> is a function that - like the name says - takes elements while the condtions holds. From the moment one such element fails, then the rest of the list is not emitted anymore, regardless whether it yields valueable data or not.</p>\n\n<p>Since your <code>list</code> is however finite, and you are interested in all configurations, you do not have to use <code>takeWhile</code> here, you can use <code>filter</code>, so:</p>\n\n<pre><code>res = id\n    . filter (\\(x,y,sum) -&gt; sum &gt; 9)\n    . <b>filter</b> (\\(x,y,sum) -&gt; sum &lt; 100)\n    . nub\n    $ [(x, y, (sqrt (x) + sqrt (y))) | x &lt;- list, y &lt;- list]</code></pre>\n\n<p>Now we have fixed this. But the code still has some redundant and inelegant aspects.</p>\n\n<p>We better avoid calculating the square root, by modifying <code>list</code> to emit squares together with the original value. Furthermore we can simply make it an infinite list, which is usally better if we want to reuse it in other parts of the code:</p>\n\n<pre><code><b>squares</b> = [ <b>(x, x*x)</b> | x &lt;- [0..]] </code></pre>\n\n<p>Next we thus will take values for as long as the value square root is less than 100:</p>\n\n<pre><code>   where sq100 = takeWhile (\\(r,_) -&gt; r &lt; 100) squares</code></pre>\n\n<p>Now we can use list comprehension that takes square roots and squares of the two lists and calculate the sum of the square roots, such that the sum is greater than 9 and less than 100. We can thus write:</p>\n\n<pre><code>res = [ (x,y,sqq) | (sqx,x) &lt;- sq100, (sqy,y) &lt;- sq100, x &lt;= y,\n                    let sqq = sqx+sqy, sqq &gt; 9, sqq &lt; 100 ]\n     where sq100 = takeWhile (\\(r,_) -&gt; r &lt; 100) squares</code></pre>\n\n<p>Here we thus take an <code>x</code> and square root <code>sqx</code> of <code>x</code>, we take an <code>y</code> and square root <code>sqy</code> of <code>y</code>, then we constraint <code>x &lt;= y</code> to remove duplicates, calculate the sum of the square roots <code>sqq = sqx+sqy</code> and finally we check whether that sum if greater than 9 and less than 100.</p>\n\n<p>This produces 2520 results.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8638529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1511272547, "creation_date": 1511269652, "last_edit_date": 1511270397, "question_id": 47413890, "link": "https://stackoverflow.com/questions/47413890/going-through-all-items-in-list", "title": "Going through all items in list", "body": "<p>Result of this function:</p>\n\n<pre><code>list = [x*x | x &lt;- [0..100]]    \nres = id\n    . filter (\\(x,y,sum) -&gt; sum &gt; 9)\n    . takeWhile (\\(x,y,sum) -&gt; sum &lt; 100)\n    . nub\n    $ [(x, y, (sqrt (x) + sqrt (y))) | x &lt;- list, y &lt;- list]\n</code></pre>\n\n<p>is [(0, 100, 10), (0, 121, 11 ... (0, 9801 ,99)].\nHow can I make it work with other items in x's list? </p>\n"}, {"tags": ["function", "haskell", "typeclass"], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1511274553, "post_id": 47414285, "comment_id": 81784609, "body": "Also good to note that <code>ist_minimal g = minimal_help &lt;*&gt; g</code>, using the <code>Applicative</code> instance for functions."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1511274723, "post_id": 47414285, "comment_id": 81784720, "body": "@chepner I think that for someone asking questions like this one it&#39;s far too early and would only distract :)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1511275022, "post_id": 47414285, "comment_id": 81784930, "body": "Not suggesting that one should use it, but I&#39;ve found it useful to see when a pattern I am given (or have stumbled on myself) is in fact captured by a higher abstraction. If nothing else, it&#39;s just one more example that will help build intuition for how <code>Applicative</code> works."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1511273825, "last_edit_date": 1511273825, "creation_date": 1511270914, "answer_id": 47414285, "question_id": 47413858, "link": "https://stackoverflow.com/questions/47413858/haskell-function-as-typedeclaration/47414285#47414285", "title": "Haskell: Function as Typedeclaration", "body": "<p>That won't work. <code>Knoten -&gt; [Knoten] -&gt; Bool</code> means <code>Knoten -&gt; ([Knoten] -&gt; Bool)</code> while <code>Graph -&gt; Bool</code> means <code>(Knoten -&gt; [Knoten]) -&gt; Bool</code> and those are very different types.</p>\n\n<p>Basically the only thing you can do with a <code>Knoten -&gt; [Knoten]</code> (and so with a <code>Graph</code>) is to invoke it on some <code>Knoten</code>, so your function will need to be built from this operation. E.g. one possible <code>ist_minimal :: Graph -&gt; Knoten</code> which calls <code>minimal_help</code> would be</p>\n\n<pre><code>ist_minimal g = minimal_help k (g k)\n    where k = ...\n</code></pre>\n\n<p>and <code>...</code> will need to be filled to give you something of type <code>Knoten</code>: <code>g k</code> will have type <code>[Knoten]</code> and so this code passes a <code>Knoten</code> and a <code>[Knoten]</code> to <code>minimal_help</code>, as its type requires.</p>\n"}], "owner": {"reputation": 13, "user_id": 8979578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a00237247358ae645383af9ac8bcbb?s=128&d=identicon&r=PG&f=1", "display_name": "snikers12", "link": "https://stackoverflow.com/users/8979578/snikers12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 47414285, "answer_count": 1, "score": 1, "last_activity_date": 1511281778, "creation_date": 1511269552, "last_edit_date": 1511281778, "question_id": 47413858, "link": "https://stackoverflow.com/questions/47413858/haskell-function-as-typedeclaration", "title": "Haskell: Function as Typedeclaration", "body": "<p>I want to implement some functions for a graph.</p>\n\n<p>The type declaration is:</p>\n\n<pre><code>type Graph = Knoten -&gt; [Knoten]\n</code></pre>\n\n<p>For one function I have to go through the list <code>[Knoten]</code>. I have the right algorithm but don't know how to access <code>[Knoten]</code>.</p>\n\n<p>Here are my attempts:</p>\n\n<pre><code>ist_minimal :: Graph -&gt; Bool\nist_minimal g = minimalHelp g\n\nminimalHelp :: Knoten -&gt; [Knoten] -&gt; Bool\nminimalHelp _ [] = True\nminimalHelp k (m:ms) \n | elem m ms = False\n | otherwise = minimalHelp k ms\n</code></pre>\n\n<p></p>\n\n<pre><code>ist_minimal :: Graph -&gt; Bool\nist_minimal (k ks) = minimalHelp (k ks)     --k=Knoten, ks=[Knoten]\n\nminimalHelp :: Knoten -&gt; [Knoten] -&gt; Bool\nminimalHelp _ [] = True\nminimalHelp k (m:ms) \n | elem m ms = False\n | otherwise = minimalHelp k ms\n</code></pre>\n\n<p>My consideration was, that when</p>\n\n<pre><code>Graph = Knoten -&gt; [Knoten]\n</code></pre>\n\n<p>it is possible to write Graph as <code>Knoten [Knoten]</code></p>\n"}, {"tags": ["c++", "haskell", "undefined-function"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1511265953, "post_id": 47412703, "comment_id": 81778635, "body": "The linker is a step after compilation. Your code has passed the compiler&#39;s type checking already when you get that error."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 4, "creation_date": 1511265965, "post_id": 47412703, "comment_id": 81778643, "body": "Is there something you want to achieve here as this is a trivial example and your real world case can probably be solved without the need for this"}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 0, "creation_date": 1511266978, "post_id": 47412703, "comment_id": 81779331, "body": "A workaround is to compile a &quot;mock&quot; file where minimum functions are defined (std::cout/exception/assert).  You can put all the undefined functions there and remove while implementing.  Not as quick as the &quot;undefined&quot;, but a bit more secure by not crashing unexpectedly."}, {"owner": {"reputation": 292, "user_id": 7132156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431a2aee038ef8498c512c0b68e6fa89?s=128&d=identicon&r=PG&f=1", "display_name": "xEric_xD", "link": "https://stackoverflow.com/users/7132156/xeric-xd"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1511266978, "post_id": 47412703, "comment_id": 81779332, "body": "I don&#39;t really see the use for this, you could just give it an empty definition for the time being, but if you want similar behavior (e.g. a crash), you could use a macro to define something like this: <code>#define UNDEFINED{_ASSERT(0)}</code>, and then use that after your function declaration, but as @EdChum mentioned, there is probably a better way to fix your actual problem"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511267835, "post_id": 47412703, "comment_id": 81779853, "body": "<code>undefined</code> is not something like a null pointer. One can implement <code>undefined = undefined</code>. So it is bascially a function that maps to itself."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1511268948, "post_id": 47412703, "comment_id": 81780558, "body": "<code>undefined</code> is not that useful with strict semantics. If you just want to avoid defining a function, give it a <code>{ throw &quot;undefined&quot;; }</code> body."}, {"owner": {"reputation": 3411, "user_id": 69663, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aiMZN.png?s=128&g=1", "display_name": "unhammer", "link": "https://stackoverflow.com/users/69663/unhammer"}, "reply_to_user": {"reputation": 292, "user_id": 7132156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/431a2aee038ef8498c512c0b68e6fa89?s=128&d=identicon&r=PG&f=1", "display_name": "xEric_xD", "link": "https://stackoverflow.com/users/7132156/xeric-xd"}, "edited": false, "score": 1, "creation_date": 1511338216, "post_id": 47412703, "comment_id": 81813766, "body": "@xEric_xD one use for <code>undefined</code> is that the compiler will tell you what type it expects where you&#39;ve used <code>undefined</code>, this is often very useful in calls like <code>someGenericLibraryFn (someAbstractHelper undefined) 42</code>  where the type signatures of the functions might be a bit long and you want to just see <i>that one part</i> of the type signature. I don&#39;t know if @mahene was hoping to get that feature from C++ though \u2026"}, {"owner": {"reputation": 158, "user_id": 4936725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7571df77ea85d54176491301d9122b?s=128&d=identicon&r=PG&f=1", "display_name": "mahene", "link": "https://stackoverflow.com/users/4936725/mahene"}, "reply_to_user": {"reputation": 3411, "user_id": 69663, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aiMZN.png?s=128&g=1", "display_name": "unhammer", "link": "https://stackoverflow.com/users/69663/unhammer"}, "edited": false, "score": 0, "creation_date": 1511470254, "post_id": 47412703, "comment_id": 81880965, "body": "@unhammer that would be a nice plus, but is not my intention. I just want a &quot;placeholder that will crash the program if you try to actually call it, but which compiles correctly and will be type-checked&quot; (see Davislor)."}], "answers": [{"tags": [], "owner": {"reputation": 158, "user_id": 4936725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7571df77ea85d54176491301d9122b?s=128&d=identicon&r=PG&f=1", "display_name": "mahene", "link": "https://stackoverflow.com/users/4936725/mahene"}, "is_accepted": true, "score": 0, "last_activity_date": 1511362621, "last_edit_date": 1511362621, "creation_date": 1511305337, "answer_id": 47424171, "question_id": 47412703, "link": "https://stackoverflow.com/questions/47412703/how-to-leave-a-declared-function-undefined-in-c-like-with-undefined-in-haske/47424171#47424171", "title": "How to leave a declared function undefined in C++ like with `undefined` in Haskell?", "body": "<p>Thank you @molbdnilo.\nUsing <code>throw</code> is concise and works perfectly:\n</p>\n\n<pre><code>int square(int x) {\n  throw(\"undefined\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 158, "user_id": 4936725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7571df77ea85d54176491301d9122b?s=128&d=identicon&r=PG&f=1", "display_name": "mahene", "link": "https://stackoverflow.com/users/4936725/mahene"}, "edited": false, "score": 0, "creation_date": 1511468735, "post_id": 47438196, "comment_id": 81880441, "body": "Uncatchability and protection against forgetting are two important points i totally missed. Thanks. In order to distinguish that assert from other &quot;normal&quot; asserts i <a href=\"https://stackoverflow.com/a/3692961/4936725\">found out</a> that you can annotate an assert as in assert(0&amp;&amp;&quot;undefined&quot;);"}, {"owner": {"reputation": 158, "user_id": 4936725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7571df77ea85d54176491301d9122b?s=128&d=identicon&r=PG&f=1", "display_name": "mahene", "link": "https://stackoverflow.com/users/4936725/mahene"}, "edited": false, "score": 0, "creation_date": 1511469288, "post_id": 47438196, "comment_id": 81880641, "body": "But i don&#39;t like that it&#39;s a C macro that appears to be disabled in release builds."}], "tags": [], "owner": {"reputation": 604, "user_id": 8908931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9a2630c9ff44937efd1bcb036b018e?s=128&d=identicon&r=PG&f=1", "display_name": "OriBS", "link": "https://stackoverflow.com/users/8908931/oribs"}, "is_accepted": false, "score": 0, "last_activity_date": 1511363858, "creation_date": 1511363858, "answer_id": 47438196, "question_id": 47412703, "link": "https://stackoverflow.com/questions/47412703/how-to-leave-a-declared-function-undefined-in-c-like-with-undefined-in-haske/47438196#47438196", "title": "How to leave a declared function undefined in C++ like with `undefined` in Haskell?", "body": "<p>You can also use assert as following:</p>\n\n<pre><code>int square(int x) \n{\n  assert(0);\n}\n</code></pre>\n\n<p>This has the advantage that it can't be caught and will always fail. This will protect you better in case you forget to implement the function.</p>\n"}, {"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1511366065, "post_id": 47438827, "comment_id": 81832463, "body": "Good remark; that is conceptually quite different from Haskell&#39;s <code>undefined</code> though."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1511366267, "post_id": 47438827, "comment_id": 81832623, "body": "They\u2019re very different languages.  I\u2019ll expand on my answer a bit."}], "tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1511366547, "last_edit_date": 1511366547, "creation_date": 1511365770, "answer_id": 47438827, "question_id": 47412703, "link": "https://stackoverflow.com/questions/47412703/how-to-leave-a-declared-function-undefined-in-c-like-with-undefined-in-haske/47438827#47438827", "title": "How to leave a declared function undefined in C++ like with `undefined` in Haskell?", "body": "<p>C++ has pure <code>virtual</code> functions, for use in abstract base classes.</p>\n\n<pre><code>class foo {\n  virtual void bar() = 0;\n};\n</code></pre>\n\n<p>The function <code>foo::bar()</code> cannot be called, and indeed a <code>foo</code> object cannot even be created, but it can be overridden in a derived class of <code>foo</code>.  You can, however, give a definition for it that derived classes inherit by default.</p>\n\n<p>Another thing in C++ that\u2019s somewhat similar to <code>undefined</code> is an uninitialized function pointer.  A safer, more modern solution might be a lambda expression or <code>static</code> stub function that aborts the program.</p>\n\n<p>The meaning of <code>undefined</code> in actual use is something like: a placeholder that will crash the program if you try to actually call it, but which compiles correctly and will be type-checked.  For individual object files, declaring an <code>extern</code> prototype for a function that isn\u2019t defined anywhere will do the job.  If you\u2019re linking the whole program, there has to be some kind of definition (although function pointers can get around that, at the cost of safety), but it can be a stub.</p>\n"}], "owner": {"reputation": 158, "user_id": 4936725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7571df77ea85d54176491301d9122b?s=128&d=identicon&r=PG&f=1", "display_name": "mahene", "link": "https://stackoverflow.com/users/4936725/mahene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "accepted_answer_id": 47424171, "answer_count": 3, "score": 2, "last_activity_date": 1511366547, "creation_date": 1511265832, "last_edit_date": 1511305140, "question_id": 47412703, "link": "https://stackoverflow.com/questions/47412703/how-to-leave-a-declared-function-undefined-in-c-like-with-undefined-in-haske", "title": "How to leave a declared function undefined in C++ like with `undefined` in Haskell?", "body": "<p>In Haskell there is a constant called <code>undefined</code> that you can use to\ndeclare a function without defining it (i.e. a function prototype with an empty body) as with <code>square</code>in \n</p>\n\n<pre><code>square :: Int -&gt; Int   -- declaration\nsquare = undefined     -- empty definition\n\nmain = putStrLn.show.square $ 3\n</code></pre>\n\n<p>This is tremendously useful to defer the work on <code>square</code> and focus on getting the <code>main</code> function right first, because the Haskell compiler makes sure that the whole file compiles as if <code>square</code> was defined.</p>\n\n<p>The C++ equivalent is\n</p>\n\n<pre><code>#import &lt;iostream&gt;\nint square(int x){\n  //TODO incomplete\n  return 0;\n}\n\nint main() {\n  std::cout &lt;&lt; square(3);\n}\n</code></pre>\n\n<p>My intention is to invoke a compiler like <code>clang++</code> as a typechecker for <code>main</code> alone and work on <code>square</code> later. Imagine that <code>square</code> really is one of many not-yet-defined complex functions that return a complex data structure with a non-trivial constructor. I would have to write a lot of code to create returnable objects just to get the functions to compile.</p>\n\n<p>Is there something quick-and-dirty in C++ similar to <code>undefined</code>?</p>\n"}, {"tags": ["string", "list", "haskell"], "comments": [{"owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "edited": false, "score": 3, "creation_date": 1511252455, "post_id": 47408010, "comment_id": 81769725, "body": "Also, in future please don&#39;t edit or abbreviate error messages when you&#39;re asking for help resolving an error. Even if it&#39;s meaningless gibberish to <i>you</i>, they contain information that the people you&#39;re asking to help you can use to help you. For example, this one would have contained the exact character position of the lexical error it was complaining about."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1511252497, "post_id": 47408010, "comment_id": 81769755, "body": "Style comment: you can use a <code>case</code> instead of that <code>if</code> chain. <code>case c of &#39;0&#39; -&gt; &#39;*&#39; ; &#39;1&#39; -&gt; &#39;\\\\&#39; ; ...</code>. You can indent all the cases on the same column. You can also use multiple defining equations."}], "answers": [{"tags": [], "owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "is_accepted": false, "score": 5, "last_activity_date": 1511309259, "last_edit_date": 1511309259, "creation_date": 1511252240, "answer_id": 47408260, "question_id": 47408010, "link": "https://stackoverflow.com/questions/47408010/lexical-error-in-string-charcter-literal-at-character/47408260#47408260", "title": "lexical error in string/charcter literal at character &#39; &#39;?", "body": "<p>Here's your problem:</p>\n\n<pre><code>if (c == 1) then '\\'\n</code></pre>\n\n<p>The backslash is a special character in string and character literals; it's used to escape the following character, so that you can use <em>other</em> special characters inside string and character literals.</p>\n\n<p>So <code>'\\'</code> is read by the Haskell parser as a single quote beginning a character literal, followed by a backslash-escaped single quote <em>inside</em> the character literal, but then there's no unescaped single quote to properly end the character literal, which is why it complains that the next character is a \"lexical error in string/character literal\".</p>\n\n<p>If you're trying to write a character literal for the backslash character, then you need to use a backslash to escape the backslash to have Haskell read it as a backslash <em>in</em> a character literal, rather than a backslash modifying the interpretation of the next character. So: <code>'\\\\'</code></p>\n\n<p>If you're trying to write a character literal for a single quote character, then you had the backslash-escaped single quote character correct for the quote <em>inside</em> the character literal, but you still need to add a non-escaped quote to terminate the character literal. So: <code>'\\''</code></p>\n"}, {"comments": [{"owner": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 2, "creation_date": 1511265739, "post_id": 47408507, "comment_id": 81778481, "body": "what about <code>| isNumber c = dict !! read [c] where dict = &quot;*&#39;~!@#$%^&amp;&quot;</code> instead of this huge pattern-match?"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 7, "last_activity_date": 1511269077, "last_edit_date": 1511269077, "creation_date": 1511253177, "answer_id": 47408507, "question_id": 47408010, "link": "https://stackoverflow.com/questions/47408010/lexical-error-in-string-charcter-literal-at-character/47408507#47408507", "title": "lexical error in string/charcter literal at character &#39; &#39;?", "body": "<p>You write:</p>\n\n<pre><code>else if (c == 1) then <b>'\\'</b></code></pre>\n\n<p>Based on your question, you want to return a quote (<code>'</code>). You do this by escaping the quote, but you need an end of char marker. So we should write <code>'\\''</code></p>\n\n<pre><code>else if (c == 1) then <b>'\\''</b></code></pre>\n\n<p>That being said, this is a nice cascade of <code>if</code>-<code>then</code>-<code>else</code>s.</p>\n\n<p>Since <code>c</code> is a <code>Char</code>, you can not perform a <code>c == 1</code>, since the equivalence function <code>(==) :: Eq a =&gt; a -&gt; a -&gt; Bool</code> thus compares two <code>a</code>s (so the same type). So we need to write it like:</p>\n\n<pre><code>else if (c == <b>'1'</b>) then '\\''</code></pre>\n\n<p>Now we have a long cascade of <code>if</code>-<code>then</code>-<code>else</code>s. This is not very elegant, and hard to understand. We can use <em>pattern matching</em> for this:</p>\n\n<pre><code>encryptChar :: Char -&gt; Char -&gt; Char\nencryptChar shift c\n | canEncrypt c = chr (ord c + ord shift)\n | isUpper c = c\n<b>encryptChar _ '0' = '*'\nencryptChar _ '1' = '\\''\nencryptChar _ '2' = '~'\nencryptChar _ '3' = '!'\nencryptChar _ '4' = '@'\nencryptChar _ '5' = '#'\nencryptChar _ '6' = '$'\nencryptChar _ '7' = '%'\nencryptChar _ '8' = '^'\nencryptChar _ '9' = '&'</b></code></pre>\n\n<p>We can also define a list of values, a list of <code>Char</code>s is a <code>String</code>:</p>\n\n<pre><code>digittrans = \"*'~!@#$%^&amp;\"\n</code></pre>\n\n<p>and then we can lookup the <em>i</em>-th index with: <code>digittrans !! i</code>. So by parsing a string \"4\" to the <code>Int</code> counterpart with <code>read \"4\"</code>, we can obtain the correct value:</p>\n\n<pre><code>encryptChar :: Char -&gt; Char -&gt; Char\nencryptChar shift c\n | canEncrypt c = chr (ord c + ord shift)\n | isUpper c = c\n <b>| isDigit c = digittrans !! read [c]\n    where digittrans = \"*'~!@#$%^&\"</b></code></pre>\n\n<p>We also need to think of a resultion mechanism in case all the above checks fail (something is not encryptable, nor uppercase, nor a digit). In that case we can for instance decide to return the character itself:</p>\n\n<pre><code>encryptChar :: Char -&gt; Char -&gt; Char\nencryptChar shift c\n | canEncrypt c = chr (ord c + ord shift)\n | isUpper c = c\n | isDigit c = digittrans !! read [c]\n    where digittrans = \"*'~!@#$%^&\"\n<b>encryptChar _ c = c</b></code></pre>\n"}], "owner": {"reputation": 321, "user_id": 2260430, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/UVI0j.jpg?s=128&g=1", "display_name": "l&#230;ran91", "link": "https://stackoverflow.com/users/2260430/l%c3%a6ran91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 914, "favorite_count": 0, "accepted_answer_id": 47408507, "answer_count": 2, "score": 2, "last_activity_date": 1512038547, "creation_date": 1511251344, "last_edit_date": 1512038547, "question_id": 47408010, "link": "https://stackoverflow.com/questions/47408010/lexical-error-in-string-charcter-literal-at-character", "title": "lexical error in string/charcter literal at character &#39; &#39;?", "body": "<p>I am a newbie to Haskell and am trying to cipher the plain text by using <code>shifting</code> the ASCII values and if my plain text contains a number,then it has to encode each digit by putting a special symbol in place of the digit like <code>(0=*,1=',2=~,3=!,4=@,5=#,6=$, 7=%,8=^,9=&amp;)</code>. so here is my code for encryption </p>\n\n<pre><code>import Data.Char\n\ncanEncrypt :: Char -&gt; Bool\ncanEncrypt c = isLower(c) &amp;&amp; isAscii(c)\n\nencryptChar :: Char -&gt; Char -&gt; Char\nencryptChar shift c\n | canEncrypt c = chr(ord(c)+ord(shift))\n | isUpper c = c\n | isNumber c = if (c == 0) then '*'\n                 else if (c == 1) then '\\'\n                       else if (c == 2) then '~'\n                             else if (c == 3) then '!'\n                                   else if (c == 4) then '@'\n                                         else if (c==5) then '#'\n                                               else if (c==6) then '$'\n                                                     else if (c==7) then '%'\n                                                           else if (c==8) then '^'\n                                                                 else '&amp;'\n</code></pre>\n\n<p>and yeah it's a little spaghetti code but when I compiling it it showing an error like below</p>\n\n<pre><code>    |\n    | lexical error in string/character literal at character ' '\n21  | isNumber c = blah blah blah..\n    |\n</code></pre>\n\n<p>I think am doing something terribly wrong here that I don't know what.so don't hesitate for such silly question am a just beginner so any help would be appreciated and also is there any other implementation to implement this kind of <code>if-else</code> problem?\nThank you</p>\n"}, {"tags": ["haskell", "yesod", "persistent-storage"], "comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 4, "creation_date": 1511228510, "post_id": 47403736, "comment_id": 81761530, "body": "I&#39;m guessing one of those <code>show</code> calls is to blame, but I&#39;m not familiar with the packages involved. What types is <code>show</code> used at? You can find out by changing each call to <code>(show :: _)</code> and looking at the errors."}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 2, "creation_date": 1511230730, "post_id": 47403736, "comment_id": 81762109, "body": "Almost definitely <code>newId</code> is either <code>Text</code> or <code>String</code>. Note that <code>show &quot;abc&quot; == &quot;\\&quot;abc\\&quot;&quot;</code>"}, {"owner": {"reputation": 3706, "user_id": 2018455, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e75a41fc224930ef1fa9ddcc9c714174?s=128&d=identicon&r=PG", "display_name": "Neil Locketz", "link": "https://stackoverflow.com/users/2018455/neil-locketz"}, "edited": false, "score": 0, "creation_date": 1511233236, "post_id": 47403736, "comment_id": 81762711, "body": "Sure enough, you&#39;re both right. I was doing <code>show</code> on something of type <code>Text</code>, I guess the proper thing to do is use <code>unpack</code> to get a real string out of it. Can one of you please answer the question?"}], "answers": [{"comments": [{"owner": {"reputation": 3706, "user_id": 2018455, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e75a41fc224930ef1fa9ddcc9c714174?s=128&d=identicon&r=PG", "display_name": "Neil Locketz", "link": "https://stackoverflow.com/users/2018455/neil-locketz"}, "edited": false, "score": 0, "creation_date": 1511271025, "post_id": 47410582, "comment_id": 81782016, "body": "In my case I was using <code>show</code> on <code>Text</code> in place of what I now know should be <code>unpack</code>. Your answer still holds. Thanks."}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": true, "score": 4, "last_activity_date": 1511259561, "creation_date": 1511259561, "answer_id": 47410582, "question_id": 47403736, "link": "https://stackoverflow.com/questions/47403736/input-has-quotes-automatically-added/47410582#47410582", "title": "Input has quotes automatically added", "body": "<p>The usual cause of this problem is that you have a string and you've called <code>show</code> on it when you didn't need to. (Most typically somebody does <code>print x</code> when they really wanted <code>putStrLn x</code>.)</p>\n\n<p>In your case, I'm unsure of the type signatures, but I <em>suspect</em> that your final line can be changed from</p>\n\n<pre><code>return $ T.pack $ show newId\n</code></pre>\n\n<p>to just</p>\n\n<pre><code>return newId\n</code></pre>\n\n<p>I suspect <code>newId</code> is <em>already</em> <code>Text</code>, so calling <code>show</code> on it just puts unwanted quotes around it (and turns it into a <code>String</code>, which you then use <code>T.pack</code> to turn back into <code>Text</code>). If you just return it, it'll probably work.</p>\n\n<p>(Then again, I could be completely mistaken about the type signature; it's hard to tell from here.)</p>\n"}], "owner": {"reputation": 3706, "user_id": 2018455, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e75a41fc224930ef1fa9ddcc9c714174?s=128&d=identicon&r=PG", "display_name": "Neil Locketz", "link": "https://stackoverflow.com/users/2018455/neil-locketz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 47410582, "answer_count": 1, "score": 3, "last_activity_date": 1511270960, "creation_date": 1511227281, "last_edit_date": 1511270960, "question_id": 47403736, "link": "https://stackoverflow.com/questions/47403736/input-has-quotes-automatically-added", "title": "Input has quotes automatically added", "body": "<p>I'm using Yesod to write a personal backup system, and running into an interesting issue. I'm relatively inexperienced when it comes to Haskell so I'm sure none of this is optimal.</p>\n\n<p>Here is one of my handlers:</p>\n\n<pre><code>postHostR :: Text -&gt; RcPath -&gt; Handler Text\npostHostR hostName f = do\n  hostId &lt;- insertIfDontExist hostName\n  tBody &lt;- (T.pack . show) &lt;$&gt; getRawRequest\n  time &lt;- lift getCurrentTime\n  newId &lt;- runDB $ insert $ RcFile hostId tBody (makePath f) time\n  return $ T.pack $ show newId\n</code></pre>\n\n<p>Any of the text I retrieve from the DB has double quotes automatically added. I'm assuming this is some kind of XSS security but I'm not concerned about that since I'm not going to be rendering pages. The quotes don't seem to be actually part of the text (I've tried just stripping the first and last character, but that doesn't seem to actually remove the quotes).</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["haskell", "abstract-syntax-tree", "haskell-lens"], "comments": [{"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 0, "creation_date": 1511220763, "post_id": 47402724, "comment_id": 81759435, "body": "The type of <code>plate</code> requires the children to be the same type as the parent. You&#39;ll need to find a different approach."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1511221860, "post_id": 47402724, "comment_id": 81759802, "body": "You haven&#39;t actually stated what you hope to achieve so it&#39;s hard to say what technology you should use. Your types all have <code>Data</code> instances; I&#39;d suggest looking at that. However, a function which returns all subexpressions (even with differing types) as a list cannot exists, since lists are homogeneous."}, {"owner": {"reputation": 366, "user_id": 2013234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0871030fbe41cb8c122ff17df7e04e22?s=128&d=identicon&r=PG", "display_name": "willtalmadge", "link": "https://stackoverflow.com/users/2013234/willtalmadge"}, "edited": false, "score": 0, "creation_date": 1511226921, "post_id": 47402724, "comment_id": 81761145, "body": "Sorry the goal is kind of fuzzy, it&#39;s a research project idea. Ultimately what I&#39;m interested in is converting the AST into a dataflow graph. Nodes would be expressions and edges would represent data dependencies between expressions."}], "owner": {"reputation": 366, "user_id": 2013234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0871030fbe41cb8c122ff17df7e04e22?s=128&d=identicon&r=PG", "display_name": "willtalmadge", "link": "https://stackoverflow.com/users/2013234/willtalmadge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511219885, "creation_date": 1511219885, "question_id": 47402724, "link": "https://stackoverflow.com/questions/47402724/using-control-lens-plated-with-python-ast", "title": "Using Control.Lens.Plated with python AST", "body": "<p>I'm trying to learn to use plated to transform and search through the python AST generated by language-python (<a href=\"https://hackage.haskell.org/package/language-python-0.5.4/docs/Language-Python-Common-AST.html\" rel=\"nofollow noreferrer\">https://hackage.haskell.org/package/language-python-0.5.4/docs/Language-Python-Common-AST.html</a>)</p>\n\n<p>To briefly summarize the types: </p>\n\n<ul>\n<li>Modules is a list of statements</li>\n<li>A statement can contain further statements or expressions</li>\n<li>An expression can contain further expressions, identities or operators</li>\n</ul>\n\n<p>I created a hello world to get started with these two libraries. Here's my code that defines plate for a subset of the python AST types:</p>\n\n<pre><code>{-# LANGUAGE FlexibleInstances#-}\nmodule Lib\n    ( someFunc\n    ) where\nimport Language.Python.Version3.Parser\nimport Language.Python.Common.Token\nimport Language.Python.Common.AST\nimport Language.Python.Common.SrcLocation\nimport Control.Lens.Plated\nimport Data.Data.Lens\nimport Language.Python.Common.Pretty\nimport Language.Python.Common.PrettyAST\n\n\ninstance Plated (Statement SrcSpan) where\n  plate = uniplate\n\ninstance Plated (Expr SrcSpan) where\n  plate = uniplate\n\ninstance Plated (Ident SrcSpan) where\n  plate = uniplate\n\ninstance Plated (Op SrcSpan) where\n  plate = uniplate\n\nextract (Right (x, _)) = x\n\nsomeFunc :: IO ()\nsomeFunc = do\n  putStrLn $ show $ concatMap (map prettyText) $ universe $ extract $ parseStmt \"2*(1+x)\" \"file.py\"\n  putStrLn $ show $ map prettyText $ universe $ extract $ parseExpr \"2*(1+x)\" \"file.py\"\n</code></pre>\n\n<p>The output of this program is</p>\n\n<pre><code>[\"2 * (1 + x)\"]\n[\"2 * (1 + x)\",\"2\",\"(1 + x)\",\"1 + x\",\"1\",\"x\"]\n</code></pre>\n\n<p>The problem I'm seeing is that plated only sees the type consistent with the root node. If I start with a statement as my root node it doesn't look at expressions which are children of the statement. In the second case where I look at expressions it seems to descend and find child expressions. But, it's not showing me the operators or identity types that are children of expressions.</p>\n\n<p>How do get plate to descend into a data structure with mixed types? Or am I using the wrong tool for this?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 3, "creation_date": 1511218446, "post_id": 47402395, "comment_id": 81758716, "body": "As for me, the compiler accurately described the errors. What&#39;s not clear?"}, {"owner": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 1, "creation_date": 1511267747, "post_id": 47402395, "comment_id": 81779792, "body": "What&#39;s <code>Expr</code>? Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete and Verifiable Example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": true, "score": 5, "last_activity_date": 1511218934, "last_edit_date": 1511218934, "creation_date": 1511218580, "answer_id": 47402519, "question_id": 47402395, "link": "https://stackoverflow.com/questions/47402395/how-to-create-a-simple-calculator-on-haskell/47402519#47402519", "title": "How to create a simple calculator on Haskell?", "body": "<p>The function <code>eval</code> returns an <code>Int</code>, but in <code>evExpr</code> you are trying to shove that <code>Int</code> into a <code>Maybe Integer</code> (based upon the type signature of <code>evExpr</code>).  An <code>Int</code> is not an <code>Integer</code>, so you get an error.  You can either change <code>eval</code> to return an <code>Integer</code>, change <code>evExpr</code> to return a <code>Maybe Int</code>, or convert the <code>Int</code> into an <code>Integer</code> with <code>fromIntegral</code>.</p>\n\n<p>The second error is occurring because <code>runParser</code> has a type signature:</p>\n\n<pre><code>runParser :: GenParser tok st a -&gt; st -&gt; SourceName -&gt; [tok] -&gt; Either ParseError a\n</code></pre>\n\n<p>But you are calling it with a <code>Parser Expr</code> and a <code>String</code>, and left out the <code>SourceName</code> and <code>st</code> parameters.</p>\n\n<p>I'm guessing that your parser doesn't have any user state, so you could use:</p>\n\n<pre><code>parse :: Stream s Identity t =&gt; Parsec s () a -&gt; SourceName -&gt; s -&gt; Either ParseError a\n</code></pre>\n\n<p>Which doesn't require the user state (since it has type <code>()</code>), but still requires you to pass a name for the source.  Something like:</p>\n\n<pre><code>run :: String -&gt; Either ParseError Expr\nrun = parse expr \"&lt;string&gt;\"\n</code></pre>\n\n<p>The next problem you're going to run into is that <code>run</code> can't return an <code>Expr</code> if the parser encounters a parse error.  The parser returns an <code>Either ParserError Expr</code>, which you'll have to deal with in <code>evExpr</code>.  In fact, there's no point in checking for an empty list/<code>String</code> in <code>evExpr</code>, since the parser will handle it (and generate an error).  You're better off changing <code>evExpr</code> to return an <code>Either ParseError Int</code>, and just <code>fmap</code> the <code>eval</code> over the parser result.</p>\n\n<pre><code>evExpr :: String -&gt; Either ParseError Int\nevExpr str = eval &lt;$&gt; run str\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 7624973, "user_type": "registered", "profile_image": "https://graph.facebook.com/1009054249203980/picture?type=large", "display_name": "\u0412\u0438\u0442\u0430\u043b\u0438\u0439 \u041c\u0443\u0434\u0440\u044b\u0439", "link": "https://stackoverflow.com/users/7624973/%d0%92%d0%b8%d1%82%d0%b0%d0%bb%d0%b8%d0%b9-%d0%9c%d1%83%d0%b4%d1%80%d1%8b%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "accepted_answer_id": 47402519, "answer_count": 1, "score": 1, "last_activity_date": 1511218934, "creation_date": 1511217911, "question_id": 47402395, "link": "https://stackoverflow.com/questions/47402395/how-to-create-a-simple-calculator-on-haskell", "title": "How to create a simple calculator on Haskell?", "body": "<p>I want to implement a program that reads a string and performs mathematical operations on it.</p>\n\n<pre><code>addop, mulop :: Parser (Expr -&gt; Expr -&gt; Expr)\naddop = (infixOp \"+\" Add) &lt;|&gt; (infixOp \"-\" Sub)\nmulop = infixOp \"*\" Mul\n\nint :: Parser Expr\nint = do\n  n &lt;- number\n  return (Lit n)\n\nexpr :: Parser Expr\nexpr = term `chainl1` addop\n\nterm :: Parser Expr\nterm = factor `chainl1` mulop\n\nfactor :: Parser Expr\nfactor = int &lt;|&gt; parens expr\n\nrun :: String -&gt; Expr\nrun = runParser expr\n\neval :: Expr -&gt; Int\neval ex = case ex of\n   Add a b -&gt; eval a + eval b\n   Mul a b -&gt; eval a * eval b\n   Sub a b -&gt; eval a - eval b\n   Lit n   -&gt; n\n\nevExpr :: String -&gt; Maybe Integer\nevExpr [] = Nothing\nevExpr str = Just (eval (run str))\n</code></pre>\n\n<p>But I have error:</p>\n\n<pre><code>\u2022 Couldn't match type \u2018Int\u2019 with \u2018Integer\u2019\n\n  Expected type: Maybe Integer\n    Actual type: Maybe Int\n\u2022 In the expression: Just (eval (run str))\n  In an equation for \u2018evExpr\u2019: evExpr str = Just (eval (run str))\n   |\n37 | evExpr str = Just (eval (run str))\n   |              ^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>and</p>\n\n<pre><code> \u2022 Couldn't match type \u2018SourceName\n                       -&gt; [Char] -&gt; Either ParseError Expr\u2019\n                 with \u2018Expr\u2019\n  Expected type: String -&gt; Expr\n    Actual type: () -&gt; SourceName -&gt; [Char] -&gt; Either ParseError Expr\n\u2022 Probable cause: \u2018runParser\u2019 is applied to too few arguments\n  In the expression: runParser expr\n  In an equation for \u2018run\u2019: run = runParser expr\n   |\n26 | run = runParser expr\n   |       ^^^^^^^^^^^^^^\n</code></pre>\n\n<p>When the program is working correctly, I should see like this:</p>\n\n<p>\u2022  evExpr \u201c27-(6*3+5%2)\u201d = Just 8</p>\n\n<p>Help me please. Thank you</p>\n"}, {"tags": ["haskell", "data-structures", "insert"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1511217436, "post_id": 47401971, "comment_id": 81758353, "body": "Also, what if there are more than one matches?"}, {"owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1511261763, "post_id": 47401971, "comment_id": 81775903, "body": "Im sorry for the amateur error, I hope its more clear now @4castle"}, {"owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "reply_to_user": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1511261893, "post_id": 47401971, "comment_id": 81775993, "body": "It should choose the &quot;oldest&quot;, I&#39;m sorry I haven&#39;t clarified that earlier @karakfa"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "edited": false, "score": 0, "creation_date": 1511261820, "post_id": 47402157, "comment_id": 81775947, "body": "I have edited the post, I hope its easier to undestand. Thanks anyway!"}], "tags": [], "owner": {"reputation": 1290, "user_id": 5499871, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206799318615183/picture?type=large", "display_name": "Izaak Weiss", "link": "https://stackoverflow.com/users/5499871/izaak-weiss"}, "is_accepted": false, "score": 1, "last_activity_date": 1511216798, "creation_date": 1511216798, "answer_id": 47402157, "question_id": 47401971, "link": "https://stackoverflow.com/questions/47401971/haskell-insert-in-data-structure/47402157#47402157", "title": "Haskell insert in data structure", "body": "<p>Your terminology is a bit vague, but you say you want to \"insert\" one structure into another. In Haskell, this is impossible; you cannot modify structures, only create new ones. The way to do this in Haskell would be to make a new structure that is the same as the previous structure, but with one new item in it. As your question is a little vague, it's a little hard to figure out if this solves your issue, but I think it's a good place to start.</p>\n\n<pre><code>addStructure :: Structure -&gt; Structure -&gt; Structure\naddStructure (Structure str ls) struct = Structure str (struct:ls)\n\nemptyStructure :: String -&gt; Structure\nemptyStructure str = Structure str []\n\ninsert :: String -&gt; String -&gt; Structure -&gt; Structure\ninsert s1 s2 struct = addStructure struct $ addStructure (emptyStructure s1) $ emptyStructure s2\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1511266029, "creation_date": 1511215886, "last_edit_date": 1511266029, "question_id": 47401971, "link": "https://stackoverflow.com/questions/47401971/haskell-insert-in-data-structure", "title": "Haskell insert in data structure", "body": "<p>I'm having issues coding a function in my data structure that receives two strings (A and B) and a structure (C).  </p>\n\n<p>The purpose is to create a new structure B and insert it into a structure A, that belongs to, or is, the given structure C. </p>\n\n<p>So, it should look for a structure \"named\" A in structure C (if there are more \"A\"'s it should choose the \"oldest\") and then, if found, create and add a new structure B to the structure \"named\" A. If not found it should do nothing. </p>\n\n<pre><code>data Structure = Structure String [Structure]  \n\ninstance Show Familia where\nshow (Familia a (xs)) = intercalate \"\\n\" $ a : [\"  \" ++ show x | x &lt;- xs]\n\ninsert :: String -&gt; String -&gt; Structure -&gt; Structure  \n</code></pre>\n\n<p>I have been coding this:</p>\n\n<pre><code>newStrct :: String -&gt; Structure\nnewStrct a = Structure a []\n\nname :: Structure -&gt; String\nname (Structure a xs) = a\n\nStrctList :: Structure -&gt; [String]\nStrctList (Structure a []) = []\nStrctList (Structure a xs) = [nome x | x &lt;- xs]\n\nsearch :: String -&gt; Structure -&gt; Structure\nsearch (Structure b xs) = case (elemIndex a (StrctList (Struture b xs))) of  \n    Just n -&gt; xs !! n\n    Nothing -&gt; Structure \"Not found\" []\n\naddToStrct :: String -&gt; Structure -&gt; Structure\naddToStrct a (Structure b xs) = Structure b ((newStrct a):xs)\n\ninsert :: String -&gt; String -&gt; Structure -&gt; Structure\ninsert a b (Structure c xs) \n    | a == c = addToStrct b (Structure c xs)\n    | search a (Structure c xs) /= newStrct \"Not found\" = addToStrct b (search a (Structure c xs))\n</code></pre>\n\n<p>The issues are the following:<br>\nLet's assume I have this Structure  </p>\n\n<pre><code>J\n  K\n  L  \n</code></pre>\n\n<p>The first issue is that when I want to insert a new structure \"M\" to the structure \"K\", it outputs this  </p>\n\n<pre><code>K\n  M  \n</code></pre>\n\n<p>Instead of this  </p>\n\n<pre><code>J\n  K\n    M\n  L  \n</code></pre>\n\n<p>And the second is that I don't know how to run all the lists of all the Structures in my main Structure in the attempt to find the designated Structure.</p>\n\n<p>Any ideas? I hope its more clear now. Thanks</p>\n"}, {"tags": ["haskell", "polymorphism", "typeclass", "haskell-lens"], "comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1511215743, "post_id": 47401763, "comment_id": 81757590, "body": "It&#39;s implemented as such in the library I linked in the previous answer (<a href=\"https://www.stackage.org/haddock/lts-9.13/lens-labels-0.1.0.2/Lens-Labels.html#t:HasLens\" rel=\"nofollow noreferrer\">here</a> again)"}, {"owner": {"reputation": 1891, "user_id": 45160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fe6d04c7c6a357a92a2b05efd0d09bc?s=128&d=identicon&r=PG", "display_name": "Vanson Samuel", "link": "https://stackoverflow.com/users/45160/vanson-samuel"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1511215941, "post_id": 47401763, "comment_id": 81757688, "body": "I&#39;m not sure how to create an instance to HasLens, and I was not able to find anybody else using it when I googled."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1511216286, "post_id": 47401763, "comment_id": 81757876, "body": "Taking the example from the previous question, instead of <code>instance (b ~ b0, b&#39; ~ b0&#39;) =&gt; FieldC (X1 a b) (X1 a b&#39;) b0 b0&#39;</code> you would have <code>instance (b ~ b0, b&#39; ~ b0&#39;, Functor f) =&gt; HasLens &quot;C&quot; f (X1 a b) (X1 a b&#39;) b0 b0&#39;</code>. Note that here <code>f</code> becomes a typeclass parameter; and there is an additional parameter representing the field name (a type level string, which can technically be anything you want, i.e. it doesn&#39;t have to relate in any way to the record field name)."}, {"owner": {"reputation": 1891, "user_id": 45160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fe6d04c7c6a357a92a2b05efd0d09bc?s=128&d=identicon&r=PG", "display_name": "Vanson Samuel", "link": "https://stackoverflow.com/users/45160/vanson-samuel"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1511222448, "post_id": 47401763, "comment_id": 81759978, "body": "How would I call it?  This doesn&#39;t seem to work: <code>lensOf $ (_ :: &quot;C&quot;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 1, "last_activity_date": 1511234861, "creation_date": 1511234861, "answer_id": 47404687, "question_id": 47401763, "link": "https://stackoverflow.com/questions/47401763/how-to-simplify-calling-a-field-on-a-polymorphic-field-name-into-one-typeclass/47404687#47404687", "title": "How to simplify calling a field on a polymorphic field name into one typeclass", "body": "<p>Defining such a class is easy enough</p>\n\n<pre><code>-- s has a field named field of type a and setting it to b turns the s into a t\nclass HasLens field s t a b | field s -&gt; a, field t -&gt; b, field s b -&gt; t, field t a -&gt; s where\n  -- Fundeps are pretty common sense, and also appear in the library linked in the comments\n  lensOf :: Functor f =&gt; (a -&gt; f b) -&gt; s -&gt; f t\n  -- Not sure why the library linked above includes f in the class head...\n</code></pre>\n\n<p>You'll notice that <code>field</code> appears nowhere in <code>lensOf</code>'s type, so this class would be unusable as is, because the inferencer can never figure out what it should be. You have these options:</p>\n\n<p>Old:</p>\n\n<pre><code>class HasLens name s t a b | ... where\n  lensOf :: Functor f =&gt; Proxy name -&gt; (a -&gt; f b) -&gt; s -&gt; f t\n  -- Or Proxy#, which has no runtime overhead, or forall proxy. Functor f =&gt; proxy name -&gt; ...\n</code></pre>\n\n<p>The <code>Proxy</code> argument is a dummy; it is never used for anything except telling the compiler about <code>name</code>. Usage is unbearably ugly, though:</p>\n\n<pre><code>lensOf (Proxy :: Proxy \"field\")\n-- or proxy#, or undefined\n</code></pre>\n\n<p>New:</p>\n\n<pre><code>{-# LANGUAGE AllowAmbiguousTypes, TypeApplications #-}\n</code></pre>\n\n<p>Now you use explicit type applications to set <code>name</code> at the call site (also make sure that <code>name</code> is first in the class head, or else the order of type arguments will get messed up).</p>\n\n<pre><code>lensOf @\"field\"\n</code></pre>\n\n<p>Fuller example:</p>\n\n<pre><code>{-# LANGUAGE AllowAmbiguousTypes\n           , DataKinds\n           , FlexibleContexts\n           , FlexibleInstances\n           , FunctionalDependencies\n           , NoMonomorphismRestriction\n           , PolyKinds\n           , ScopedTypeVariables\n           , TypeApplications\n#-}\n\nimport Control.Lens\n\nclass HasLens x s t a b | x s -&gt; a, x t -&gt; b, x s b -&gt; t, x t a -&gt; s where\n  lensOf :: Functor f =&gt; (a -&gt; f b) -&gt; s -&gt; f t\n\ndata Tup2 a b = Tup2 { _left2 :: a, _right2 :: b } deriving Show\ndata Tup3 a b c = Tup3 { _left3 :: a, _middle3 :: b, _right3 :: c } deriving Show\n\ninstance HasLens \"left\" (Tup2 a b) (Tup2 a' b) a a' where\n  lensOf = lens _left2 $ \\t x -&gt; t { _left2 = x }\n\ninstance HasLens \"left\" (Tup3 a b c) (Tup3 a' b c) a a' where\n  lensOf = lens _left3 $ \\t x -&gt; t { _left3 = x }\n\ninstance HasLens \"right\" (Tup2 a b) (Tup2 a b') b b' where\n  lensOf = lens _right2 $ \\t x -&gt; t { _right2 = x }\n\ninstance HasLens \"right\" (Tup3 a b c) (Tup3 a b c') c c' where\n  lensOf = lens _right3 $ \\t x -&gt; t { _right3 = x }\n\nswap' :: forall xlr xrl l r xll xrr. (HasLens \"left\" xlr xrr l r, HasLens \"right\" xlr xll r l, HasLens \"left\" xll xrl l r, HasLens \"right\" xrr xrl r l) =&gt; xlr -&gt; xrl\nswap' x = x &amp; lensOf @\"left\"  .~ x^#lensOf @\"right\" @xlr @xll @r @l\n            &amp; lensOf @\"right\" .~ x^#lensOf @\"left\"  @xlr @xrr @l @r\n\nmain = do out $ Tup2 5 6\n          out $ Tup3 'l' 'm' 'r'\n          out $ Tup2 \"l\" 'r'\n          out $ Tup3 17 [5,10] \"a\"\n  where out = print . swap'\n</code></pre>\n"}], "owner": {"reputation": 1891, "user_id": 45160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fe6d04c7c6a357a92a2b05efd0d09bc?s=128&d=identicon&r=PG", "display_name": "Vanson Samuel", "link": "https://stackoverflow.com/users/45160/vanson-samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 47404687, "answer_count": 1, "score": 1, "last_activity_date": 1511234861, "creation_date": 1511214895, "question_id": 47401763, "link": "https://stackoverflow.com/questions/47401763/how-to-simplify-calling-a-field-on-a-polymorphic-field-name-into-one-typeclass", "title": "How to simplify calling a field on a polymorphic field name into one typeclass", "body": "<p>In a <a href=\"https://stackoverflow.com/questions/47270018/creating-polymorphic-lens\">previous question</a> I asked how a record field can be made polymorphic when using DuplicateRecordFields.  I got an excellent answer for this from  <a href=\"https://stackoverflow.com/users/2407038/user2407038\">@user2407038</a>.  He answered the question to my initial spec providing one type class per field, but he mentioned that it could all be simplified into one typeclass.</p>\n\n<blockquote>\n  <p>(Note: this too can be generalized to a single class with an additional parameter corresponding to the field name; this is probably outside the scope of this question).</p>\n</blockquote>\n\n<p>I'm not sure how to go about doing this generalization. Does anybody have any ideas on how this can accomplished?</p>\n"}, {"tags": ["haskell", "cabal"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1511225835, "post_id": 47400180, "comment_id": 81760887, "body": "Not command-line friendly, but you can see all the versions on Hackage. e.g. for <a href=\"http://hackage.haskell.org/package/text\" rel=\"nofollow noreferrer\">here</a> for the text package. Is that good enough?"}, {"owner": {"reputation": 1481, "user_id": 385505, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2452bdb10da662afddd9cda644a334c?s=128&d=identicon&r=PG", "display_name": "Jind\u0159ich Mynarz", "link": "https://stackoverflow.com/users/385505/jind%c5%99ich-mynarz"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1511255606, "post_id": 47400180, "comment_id": 81771686, "body": "Yes, this is helpful. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 1, "last_activity_date": 1511284526, "creation_date": 1511284526, "answer_id": 47418916, "question_id": 47400180, "link": "https://stackoverflow.com/questions/47400180/how-do-you-get-cabal-to-print-all-available-versions-of-a-package/47418916#47418916", "title": "How do you get Cabal to print all available versions of a package?", "body": "<p>I don't know how to get cabal to do it, but the information is at least available. Check the <a href=\"http://hackage.haskell.org/\" rel=\"nofollow noreferrer\">Hackage</a> page for the package; typically this is <code>http://hackage.haskell.org/package/&lt;package-name&gt;</code>. It will include a complete list of available versions right after the package description.</p>\n"}, {"comments": [{"owner": {"reputation": 1481, "user_id": 385505, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2452bdb10da662afddd9cda644a334c?s=128&d=identicon&r=PG", "display_name": "Jind\u0159ich Mynarz", "link": "https://stackoverflow.com/users/385505/jind%c5%99ich-mynarz"}, "edited": false, "score": 0, "creation_date": 1511364367, "post_id": 47424183, "comment_id": 81831212, "body": "I don&#39;t understand how is this use of <code>awk</code> related to substring matching. It trims the package name from the results and displays their versions only (which is a nice adjustment, but not a necessary one)."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 1481, "user_id": 385505, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2452bdb10da662afddd9cda644a334c?s=128&d=identicon&r=PG", "display_name": "Jind\u0159ich Mynarz", "link": "https://stackoverflow.com/users/385505/jind%c5%99ich-mynarz"}, "edited": false, "score": 2, "creation_date": 1511388998, "post_id": 47424183, "comment_id": 81844670, "body": "@Jind\u0159ichMynarz If you take a look at the output you get without the <code>awk</code> addendum, you will see there are many non-<code>text</code> results, like <code>texts 0.0.0</code> and <code>text-zipper 0.1</code> and so forth. The <code>awk</code> command simultaneously eliminates these and trims away the package name at the beginning."}], "tags": [], "owner": {"reputation": 7576, "user_id": 480398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3468d23f15a9f631136b508b967b0fbe?s=128&d=identicon&r=PG", "display_name": "hvr", "link": "https://stackoverflow.com/users/480398/hvr"}, "is_accepted": true, "score": 2, "last_activity_date": 1511305406, "creation_date": 1511305406, "answer_id": 47424183, "question_id": 47400180, "link": "https://stackoverflow.com/questions/47400180/how-do-you-get-cabal-to-print-all-available-versions-of-a-package/47424183#47424183", "title": "How do you get Cabal to print all available versions of a package?", "body": "<p>An indirect way to accomplish this, e.g. for the <code>text</code> package is</p>\n\n<pre><code>cabal list --simple-output text | awk '$1==\"text\" { print $2 }'\n</code></pre>\n\n<p>The post-processing via <code>awk</code> is needed because <code>cabal list</code> currently only supports substring matching, but not exact matching.</p>\n"}], "owner": {"reputation": 1481, "user_id": 385505, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b2452bdb10da662afddd9cda644a334c?s=128&d=identicon&r=PG", "display_name": "Jind\u0159ich Mynarz", "link": "https://stackoverflow.com/users/385505/jind%c5%99ich-mynarz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 47424183, "answer_count": 2, "score": 7, "last_activity_date": 1511305406, "creation_date": 1511208451, "question_id": 47400180, "link": "https://stackoverflow.com/questions/47400180/how-do-you-get-cabal-to-print-all-available-versions-of-a-package", "title": "How do you get Cabal to print all available versions of a package?", "body": "<p>How do you get Cabal to print all available versions of a package? Running <code>cabal -v info package-name</code> prints something like this; in case many versions are available:</p>\n\n<pre><code>Versions available: (0.1.5.5), (0.1.5.6), (0.1.6.3), (0.1.6.4), 0.1.6.5,\n                    0.2.4.2, 0.2.5.0, 0.2.6.0, 0.2.7.0 (and 26 others)\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 3, "creation_date": 1511201422, "post_id": 47398466, "comment_id": 81749949, "body": "<code>map (func arg1 arg2) charList</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 5, "creation_date": 1511204892, "post_id": 47398466, "comment_id": 81751869, "body": "Please show a sample input and the desired output."}], "answers": [{"tags": [], "owner": {"reputation": 2570, "user_id": 4142266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rMCN5.png?s=128&g=1", "display_name": "mschmidt", "link": "https://stackoverflow.com/users/4142266/mschmidt"}, "is_accepted": false, "score": 5, "last_activity_date": 1511201609, "creation_date": 1511201609, "answer_id": 47398537, "question_id": 47398466, "link": "https://stackoverflow.com/questions/47398466/how-to-use-map-with-several-arguments-haskell/47398537#47398537", "title": "How to use map with several arguments - Haskell", "body": "<p>If the other arguments are fixed, do a partial application. E.g.:</p>\n\n<pre><code>map (func arg1 arg2) your_list\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1290, "user_id": 5499871, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206799318615183/picture?type=large", "display_name": "Izaak Weiss", "link": "https://stackoverflow.com/users/5499871/izaak-weiss"}, "is_accepted": false, "score": 3, "last_activity_date": 1511201789, "creation_date": 1511201789, "answer_id": 47398583, "question_id": 47398466, "link": "https://stackoverflow.com/questions/47398466/how-to-use-map-with-several-arguments-haskell/47398583#47398583", "title": "How to use map with several arguments - Haskell", "body": "<p>Haskell supports <em>partial application</em>, which means you can pass only a few arguments into a function, and you will get out a function which takes the rest of the arguments.</p>\n\n<p>For example, I can take an expression like:</p>\n\n<p><code>map (\\x -&gt; x*x) [1,2,3,4]</code></p>\n\n<p>and rewrite it as:</p>\n\n<p><code>let mapsquare = map (\\x -&gt; x*x) in mapsquare [1,2,3,4]</code></p>\n\n<p>In the above case, I've taken the partially applied map, and assigning it to a variable, and then using that function of one argument on a list.</p>\n\n<p>In your example, you could write <code>let f = func str1 str2 in map f charls</code>, or <code>map (func str1 str2) charls</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 8972834, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1084d7ea140fbad38f6db15e43552489?s=128&d=identicon&r=PG&f=1", "display_name": "JohnnyPire", "link": "https://stackoverflow.com/users/8972834/johnnypire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511319982, "creation_date": 1511201332, "last_edit_date": 1511319982, "question_id": 47398466, "link": "https://stackoverflow.com/questions/47398466/how-to-use-map-with-several-arguments-haskell", "title": "How to use map with several arguments - Haskell", "body": "<p>Use map with several arguments?</p>\n\n<p><strong>Something like <em>foldr</em> or <em>foldl</em>?</strong></p>\n"}, {"tags": ["list", "haskell", "integer"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511199686, "post_id": 47397892, "comment_id": 81749023, "body": "Didn&#39;t you already asked this question a few days/weeks ago?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8638529"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511199830, "post_id": 47397892, "comment_id": 81749102, "body": "Oh... yeah, it&#39;s same task, but different question. What should I do? Edit/delete previous question?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1511199909, "post_id": 47397892, "comment_id": 81749143, "body": "Every (natural) number is the root of another natural number. Are you sure you&#39;ve understood the task description?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8638529"}, "edited": false, "score": 0, "creation_date": 1511200196, "post_id": 47397892, "comment_id": 81749299, "body": "Now i got it. Edited question, coz still don&#39;t get how to print every combination"}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 3, "last_activity_date": 1511201796, "last_edit_date": 1511201796, "creation_date": 1511201440, "answer_id": 47398488, "question_id": 47397892, "link": "https://stackoverflow.com/questions/47397892/find-all-two-valued-numbers-representable-as-the-sum-of-the-roots-of-two-natural/47398488#47398488", "title": "Find all two-valued numbers representable as the sum of the roots of two natural numbers", "body": "<p>I suspect by \"How can I print every combination?\", what you mean is \"How do I get the <code>x</code> and <code>y</code> values that gave me the appropriate sum?\". The minimal fix is to have the list comprehension return <code>x</code>, <code>y</code>, and the sum all at once, and modify your <code>filter</code> and <code>dropWhile</code> to ignore the <code>x</code> and <code>y</code> bits. Thus:</p>\n\n<pre><code>func = id\n    . filter (\\(x,y,sum) -&gt; sum &gt; 9)\n    . takeWhile (\\(x,y,sum) -&gt; sum &lt; 100)\n    . nub\n    $ [(x,y,floor (sqrt (x) + sqrt (y))) | x &lt;- [0..], y &lt;- [0..]]\n</code></pre>\n\n<p>There is also a <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Data-List.html#v:nubBy\" rel=\"nofollow noreferrer\"><code>nubBy</code></a> that may interest you. However, there remain many \"thinkos\" that you should address, one at a time:</p>\n\n<ol>\n<li><code>func</code> is a bad name; the name implies that it is a function, which isn't true.</li>\n<li>You are not checking that the <code>sqrt</code>s add to an integer; instead, you are forcing their sum to be an integer.</li>\n<li><p>Your iteration strategy will never choose an <code>x</code> other than <code>0</code>. You should either limit the upper bounds of your iterations by a known worst-case, e.g. by</p>\n\n<pre><code>x &lt;- [0..100^2], y &lt;- [0..100^2]\n</code></pre>\n\n<p>or apply the fix described in <a href=\"https://stackoverflow.com/a/46900780/791604\">another of my answers</a>.</p></li>\n<li>Once you have fixed the previous bit, you will notice that the sums are not monotonically increasing. This means that your <code>takeWhile</code> strategy for deciding when to stop will not be correct.</li>\n<li>Once you have had some practice fixing this algorithm, you should rethink whether this is the right algorithm to use. (i.e. why are we iterating over so many <code>x</code> and <code>y</code> values which are not squares?)</li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8638529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511201796, "creation_date": 1511199253, "last_edit_date": 1511200232, "question_id": 47397892, "link": "https://stackoverflow.com/questions/47397892/find-all-two-valued-numbers-representable-as-the-sum-of-the-roots-of-two-natural", "title": "Find all two-valued numbers representable as the sum of the roots of two natural numbers", "body": "<p>Task is to find all two-valued numbers representable as the sum of the roots of two natural numbers using list's generator and print all these combinations + length of list. I got this:</p>\n\n<pre><code>import Data.List\n\nfunc = filter (&gt;9) (takeWhile (&lt;100) (nub [floor (sqrt (x) + sqrt (y)) | x &lt;- [0..], y &lt;- [0..]]))\nl = length func\n</code></pre>\n\n<p>How can I print every combination, not just result?</p>\n"}, {"tags": ["list", "haskell", "syntax", "monads", "parentheses"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 3, "creation_date": 1511198510, "post_id": 47397486, "comment_id": 81748374, "body": "note that <code>[1, 2] &gt;&gt;= \\n -&gt; [&#39;a&#39;, &#39;b&#39;] == &quot;abab&quot;</code>, not <code>[(&#39;a&#39;,1),(&#39;b&#39;,1),(&#39;a&#39;,2),(&#39;b&#39;,2)]</code>."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1511198597, "post_id": 47397486, "comment_id": 81748430, "body": "No, it&#39;s <code>[1,2] &gt;&gt;= (\\n -&gt; [&#39;a&#39;,&#39;b&#39;] &gt;&gt;= (\\ch -&gt; return (n,ch)))</code>"}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1511198633, "post_id": 47397486, "comment_id": 81748451, "body": "You may be interested in <a href=\"https://stackoverflow.com/q/40331179/3072788\">&quot;How to automatically parenthesize arbitrary haskell expressions?&quot;</a>"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1511201172, "post_id": 47397486, "comment_id": 81749819, "body": "an interesting tidbit: for lists <code>join == concat</code> and <code>map == fmap</code>, so <code>f =&lt;&lt; xs = concat (map f xs) == join (fmap f xs)</code>, as it indeed <a href=\"https://stackoverflow.com/a/11249714/849891\">should be</a> (check out other answers there as well). :)"}], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 0, "creation_date": 1511201942, "post_id": 47397675, "comment_id": 81750245, "body": "That last line I was seeking."}], "tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": true, "score": 10, "last_activity_date": 1511198581, "creation_date": 1511198581, "answer_id": 47397675, "question_id": 47397486, "link": "https://stackoverflow.com/questions/47397486/why-list-monad-combines-in-that-order/47397675#47397675", "title": "Why list monad combines in that order?", "body": "<p>Your implicit parentheses are wrong.  The way you have it, the <code>n</code> parameter to the first lambda would not be in scope in the <code>return</code>.  It is more like:</p>\n\n<pre><code>([1,2] &gt;&gt;= (\\n -&gt; ['a','b'] &gt;&gt;= (\\ch -&gt; return (n,ch))))\n</code></pre>\n\n<p>Which becomes:</p>\n\n<pre><code>concatMap (\\n -&gt; concatMap (\\ch -&gt; [(n,ch)]) ['a','b']) [1,2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 4, "last_activity_date": 1583134607, "last_edit_date": 1583134607, "creation_date": 1511198610, "answer_id": 47397690, "question_id": 47397486, "link": "https://stackoverflow.com/questions/47397486/why-list-monad-combines-in-that-order/47397690#47397690", "title": "Why list monad combines in that order?", "body": "<p>No, you're using wrong parenthesization. It's nested to the right, so that</p>\n\n<pre><code>[1,2] &gt;&gt;= \\n -&gt; ['a','b'] &gt;&gt;= \\ch -&gt; return (n,ch)  \n=\n[1,2] &gt;&gt;= (\\n -&gt; ['a','b'] &gt;&gt;= (\\ch -&gt; return (n,ch) ))\n=\ndo { n &lt;- [1,2]\n   ; do { ch &lt;- ['a','b']\n        ; return (n,ch) }}\n=\nfor n in [1,2]:              -- pseudocode\n    for ch in ['a','b']:\n        return (n,ch)\n=\n[ r | n &lt;- [1,2], ch &lt;- ['a','b'], r &lt;- [(n,ch)] ]    -- return == (:[])\n=\n[ (n,ch) | n &lt;- [1,2], ch &lt;- ['a','b'] ]\n=\npure (,) &lt;*&gt; [1,2] &lt;*&gt; ['a','b']      -- using list applicative\n=\n[(1,'a'), (1,'b'), (2,'a'), (2,'b')]\n</code></pre>\n\n<p>and the innermost list is \"spinning\" the fastest, like in a car's odometer.</p>\n\n<p>You are absolutely right, with the wrong parenthesization the <code>n</code> binding would make no sense. It is precisely for that reason that it <em>must</em> associate to the right, to make the nested binding possible; for the <em>nested computations</em> are the <em>essence</em> of the monad:</p>\n\n<pre><code>[ foo x   | x &lt;- xs ]           -- functor : amendable computations\n[ bar x y | x &lt;- xs AND y &lt;- ys ]     -- applicative : combinable computations\n[ baz x y | x &lt;- xs, y &lt;- foo x ]         -- monad : reinterpretative computations\n</code></pre>\n\n<p>(and yes, omitting parentheses in learning material is the root of all evil... not really, but still...)</p>\n"}, {"comments": [{"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 0, "creation_date": 1511201669, "post_id": 47397739, "comment_id": 81750096, "body": "answers above told me that this order of parentheses is wrong, so your evaluation is not relevant. Thanks. anyway."}], "tags": [], "owner": {"reputation": 1290, "user_id": 5499871, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206799318615183/picture?type=large", "display_name": "Izaak Weiss", "link": "https://stackoverflow.com/users/5499871/izaak-weiss"}, "is_accepted": false, "score": 1, "last_activity_date": 1511198746, "creation_date": 1511198746, "answer_id": 47397739, "question_id": 47397486, "link": "https://stackoverflow.com/questions/47397486/why-list-monad-combines-in-that-order/47397739#47397739", "title": "Why list monad combines in that order?", "body": "<p>You're wrong about the semantics of <code>concat (map (\\n -&gt; ['a','b']) [1,2])</code>. I've done a step by step evaluation of it below.</p>\n\n<p><code>concat (map (\\n -&gt; ['a','b']) [1,2])</code></p>\n\n<p><code>concat [(\\n -&gt; ['a','b']) 1, (\\n -&gt; ['a','b']) 2]</code></p>\n\n<p><code>concat [['a','b'], ['a','b']]</code></p>\n\n<p><code>['a','b','a','b']</code></p>\n\n<p>The last bind is what is used to actually make it a list of tuples.</p>\n"}, {"tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": false, "score": 3, "last_activity_date": 1511198747, "creation_date": 1511198747, "answer_id": 47397740, "question_id": 47397486, "link": "https://stackoverflow.com/questions/47397486/why-list-monad-combines-in-that-order/47397740#47397740", "title": "Why list monad combines in that order?", "body": "<blockquote>\n  <p>Implicit parentheses are:</p>\n\n<pre><code>([1,2] &gt;&gt;= \\n -&gt; ['a','b']) &gt;&gt;= (\\ch -&gt; return (n,ch))\n</code></pre>\n</blockquote>\n\n<p>This is wrong. <code>\\</code> has  the lowest precedence and thus extends to the end of the expression. So the parentheses are:</p>\n\n<pre><code>[1,2] &gt;&gt;= (\\n -&gt; ['a','b'] &gt;&gt;= (\\ch -&gt; return (n,ch)))\n</code></pre>\n\n<blockquote>\n  <p><code>([1,2] &gt;&gt;= \\n -&gt; ['a','b'])</code> should give <code>[('a',1),('b',1),('a',2),('b',2)]</code></p>\n</blockquote>\n\n<p>As you can see from the above parenthesization <code>([1,2] &gt;&gt;= \\n -&gt; ['a','b'])</code>, isn't actually a subexpression of the given expression. But if it were, its result would be <code>['a', 'b', 'a', 'b']</code>. <code>n</code> is not actually used anywhere in the expressions <code>['a', 'b']</code>, so there's no way the numbers could appear in the result.</p>\n\n<blockquote>\n  <p>Then I don't understand >>= (\\ch -> return (n,ch)) part - I think that n here has no sense.</p>\n</blockquote>\n\n<p>Given your parenthesization <code>n</code> would indeed be undefined there. However given the proper parenthesization it should be clear where <code>n</code> comes from: We're still inside the <code>\\n -&gt; ...</code> function, so <code>n</code> still refers to the argument of that function, namely the current element of the <code>[1, 2]</code> list.</p>\n"}], "owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 47397675, "answer_count": 4, "score": 4, "last_activity_date": 1583134607, "creation_date": 1511197977, "last_edit_date": 1511200973, "question_id": 47397486, "link": "https://stackoverflow.com/questions/47397486/why-list-monad-combines-in-that-order", "title": "Why list monad combines in that order?", "body": "<p>I was reading about list monads and encountered:</p>\n\n<pre><code>[1,2] &gt;&gt;= \\n -&gt; ['a','b'] &gt;&gt;= \\ch -&gt; return (n,ch)  \n</code></pre>\n\n<p>it produces</p>\n\n<pre><code>[(1,'a'),(1,'b'),(2,'a'),(2,'b')]\n</code></pre>\n\n<p>Here's how I understand it:</p>\n\n<p>Implicit parentheses are:</p>\n\n<pre><code>([1,2] &gt;&gt;= \\n -&gt; ['a','b']) &gt;&gt;= (\\ch -&gt; return (n,ch))\n</code></pre>\n\n<p><code>([1,2] &gt;&gt;= \\n -&gt; ['a','b'])</code> should give <code>[('a',1),('b',1),('a',2),('b',2)]</code></p>\n\n<p>because </p>\n\n<pre><code>instance Monad [] where  \n  return x = [x]  \n  xs &gt;&gt;= f = concat (map f xs)   -- this line\n  fail _ = []\n</code></pre>\n\n<p>so <code>concat (map f xs)</code> is <code>concat (map (\\n -&gt; ['a','b']) [1,2])</code> which should produce <code>[('a',1),('b',1),('a',2),('b',2)]</code> - quite the opposite of the actual output.</p>\n\n<p>Then I don't understand <code>&gt;&gt;= (\\ch -&gt; return (n,ch))</code> part - I think that <code>n</code> here has no sense. That specific reasoning is flawed, could you please explain how that expression(<code>[1,2] &gt;&gt;= \\n -&gt; ['a','b'] &gt;&gt;= \\ch -&gt; return (n,ch)</code>) is computed step-by-step?</p>\n"}, {"tags": ["haskell", "math", "recursion", "hermite"], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 8869536, "user_type": "registered", "profile_image": "https://graph.facebook.com/1047055678639077/picture?type=large", "display_name": "Aleksandr Samarin", "link": "https://stackoverflow.com/users/8869536/aleksandr-samarin"}, "edited": false, "score": 0, "creation_date": 1511197209, "post_id": 47396885, "comment_id": 81747587, "body": "Yup, I made a typo in my formula (n instead of n-1 on the rhs), now it&#39;s corrected. However, the formula you talking about is a so-called &#39;physicists&#39; Hermite polynomial, which I don&#39;t need. Could you please correct your answer according to the change I&#39;ve made?"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1511197305, "last_edit_date": 1511197305, "creation_date": 1511195979, "answer_id": 47396885, "question_id": 47396548, "link": "https://stackoverflow.com/questions/47396548/haskell-hermite-polynomials-implementation/47396885#47396885", "title": "Haskell Hermite polynomials implementation", "body": "<p>We can write it as:</p>\n\n<pre><code>hermite :: (Enum n, Num n) =&gt; n -&gt; [n]\nhermite x = s\n    where s@(_:ts) = 1 : x : zipWith3 (\\hn2 hn1 n1 -&gt; x*hn1 - n1*hn2) s ts [1..]\n</code></pre>\n\n<p>where the first items <code>1 : x : ...</code> are the first elements of the <code>hermite</code> (you can fill in other values).</p>\n\n<p>For the next one, we zip the original values <code>s</code> (so that starts with <code>H0</code>), the tail <code>ts</code> of <code>s</code> (that starts with <code>H1</code>) and the index (that starts with <code>2</code>, <code>3</code>, ...) and perform an operation <code>x*hn1 - x*hn2</code> (<code>nh1</code> stands for <em>H<sub>n-1</sub></em>, and <code>nh2</code> stands for <em>H<sub>n-2</sub></em>), and so we calculate the next element each time.</p>\n\n<p>The first 11 values for <code>x = 0.75</code> are:</p>\n\n<pre><code>Prelude&gt; take 11 (hermite 0.75)\n[1.0,0.75,-0.4375,-1.828125,-5.859375e-2,7.2685546875,5.744384765625,-39.30303955078125,-69.68797302246094,262.1583366394043,823.8105096817017]\n</code></pre>\n\n<p>So the first value is 1, the second <code>x</code>, the third one <code>x*x-2</code>, the fourth one <code>x*x*x-2*x-3*x</code>, and so on.</p>\n\n<p>That being said, if I recall correctly, the recursion formula of the Hermite polynomials is:</p>\n\n<p><em>H<sub>n</sub>(x) = 2&times;x&times;H<sub>n-1</sub>(x)-2&times;(n-1)H<sub>n-2</sub>(x)</em></p>\n\n<p>instead of the one quoted in the question.</p>\n\n<p>In that case the formula is thus:</p>\n\n<pre><code>hermite :: (Enum n, Num n) =&gt; n -&gt; [n]\nhermite x = s\n    where s@(_:ts) = 1 : 2 * x : zipWith3 helper s ts [1..]\n          helper hn2 hn1 n1 = 2 * (x * hn1 - n1 * hn2)\n</code></pre>\n\n<p>Then the first 11 values are:</p>\n\n<pre><code>Prelude&gt; take 11 (hermite 0.75)\n[1.0,1.5,0.25,-5.625,-9.9375,30.09375,144.515625,-144.3515625,-2239.74609375,-1049.994140625,38740.4384765625]\n</code></pre>\n\n<p>Which is correct acording to this <a href=\"http://mathworld.wolfram.com/HermitePolynomial.html\" rel=\"nofollow noreferrer\">Wolfram article</a>:</p>\n\n<blockquote>\n  <p>H<sub>0</sub> = 1</p>\n  \n  <p>H<sub>1</sub> = 2*x</p>\n  \n  <p>H<sub>2</sub> = 4&dot;x<sup>2</sup> - 2</p>\n  \n  <p>H<sub>3</sub> = 8&dot;x<sup>3</sup> - 4&dot;x</p>\n  \n  <p>H<sub>4</sub> = 16&dot;x<sup>4</sup> - 48&dot;x<sup>2</sup> + 12</p>\n</blockquote>\n\n<p>Which maps exactly on the values we obtained:</p>\n\n<pre><code>Prelude&gt; let x = 0.75 in [1,2*x,4*x*x-2,8*x*x*x-4*x,16*x*x*x*x-48*x*x+12]\n[1.0,1.5,0.25,0.375,-9.9375]\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 8869536, "user_type": "registered", "profile_image": "https://graph.facebook.com/1047055678639077/picture?type=large", "display_name": "Aleksandr Samarin", "link": "https://stackoverflow.com/users/8869536/aleksandr-samarin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 47396885, "answer_count": 1, "score": 3, "last_activity_date": 1511197305, "creation_date": 1511194924, "last_edit_date": 1511197020, "question_id": 47396548, "link": "https://stackoverflow.com/questions/47396548/haskell-hermite-polynomials-implementation", "title": "Haskell Hermite polynomials implementation", "body": "<p>Haskell allows to represent recurrent functions in a very concise way. For example, infinite list, that contains Fibonacci numbers can be defined as follows:</p>\n\n<pre><code>fibs :: [Integer]\nfibs = 1 : 1 : zipWith (+) fibs (tail fibs)\n</code></pre>\n\n<p>I am dealing with 'probabilists' Hermite polynomials, which have the following recursion relation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/m6D8G.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m6D8G.gif\" alt=\"enter image description here\"></a></p>\n\n<p>What would be the optimal way to construct the infinite list of n-th Hermite polynomials for given x?</p>\n"}, {"tags": ["haskell", "typeclass", "monad-transformers"], "answers": [{"comments": [{"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 2, "creation_date": 1511184258, "post_id": 47392954, "comment_id": 81739051, "body": "Good answer, which would be even better with a discussion of how return type polymorphism works :)"}, {"owner": {"reputation": 12205, "user_id": 577417, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VDNOR.jpg?s=128&g=1", "display_name": "Benjamin Gale", "link": "https://stackoverflow.com/users/577417/benjamin-gale"}, "edited": false, "score": 0, "creation_date": 1511205532, "post_id": 47392954, "comment_id": 81752255, "body": "When you say the <code>m</code> in <code>postReservations</code> type gets instantiated to <code>ReaderT * ConnectionString IO (HttpResult ())</code> is this just a specialisation of the <code>MonadReader</code> instance for <code>ReaderT</code> i.e. <code>Monad m =&gt; MonadReader r (ReaderT * r m)</code>?"}, {"owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "edited": false, "score": 0, "creation_date": 1511213479, "post_id": 47392954, "comment_id": 81756471, "body": "Exactly. In our case, <code>m ~ IO</code>."}, {"owner": {"reputation": 12205, "user_id": 577417, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VDNOR.jpg?s=128&g=1", "display_name": "Benjamin Gale", "link": "https://stackoverflow.com/users/577417/benjamin-gale"}, "edited": false, "score": 0, "creation_date": 1511250164, "post_id": 47392954, "comment_id": 81768540, "body": "Got it. Thanks for your help"}], "tags": [], "owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "is_accepted": true, "score": 6, "last_activity_date": 1511185961, "last_edit_date": 1511185961, "creation_date": 1511183792, "answer_id": 47392954, "question_id": 47392590, "link": "https://stackoverflow.com/questions/47392590/eliminating-monadreader-constraint-using-runreadert/47392954#47392954", "title": "Eliminating MonadReader constraint using runReaderT", "body": "<p>The <code>m</code> in <code>postReservation</code>s type gets instantiated to <code>ReaderT * ConnectionString IO (HttpResult ())</code>, which is an instance of both <code>MonadReader ConnectionString</code> and <code>MonadIO</code>.</p>\n\n<p>Note that <code>ReaderT</code> is only explicitly mentioned through <code>runReaderT</code>. It's that function that demands its argument to be a concrete <code>ReaderT</code> instead of an arbitrary <code>MonadReader ConnectionString</code>.</p>\n\n<p><strong>Edit</strong>: </p>\n\n<p>As @Benjamin Hodgson points out, the underlying mechanisms are that of return type polymorphism, or more generally unification.</p>\n\n<p>So, when the body of <code>postReservationIO</code> is type-checked, this is roughly what happens:</p>\n\n<pre><code>-- What we know, because we already type-checked them (this is necessary information about free variables):\nrunReaderT                               :: ReaderT k r m a -&gt; r -&gt; m a\npostReservation req                      :: (MonadReader ConnectionString m', MonadIO m') =&gt; m' (HttpResult ())\nconnStr                                  :: ConnectionString\n\n-- What we want to check\nrunReaderT (postReservation req) connStr :: IO (HttpResult ())\n\n-- Unifying `runReaderT` with its arguments results in the following constraints:\n-- First argument\nReaderT k r m a ~ (MonadReader ConnectionString m', MonadIO m') =&gt; m' (HttpResult ())\n-- Second argument\nr ~ ConnectionString\n-- Return type\nm (HttpResult ()) ~ IO (HttpResult ())\n</code></pre>\n\n<p>Read <code>~</code> as 'has to unify with'. E.g., the fact that the second argument to <code>runReaderT</code> is a <code>ConnectionString</code> necessitates that the type variable <code>r</code> unifies with <code>ConnectionString</code>.</p>\n\n<p>The constraint <code>ReaderT k r m a ~ (MonadReader ConnectionString m', MonadIO m') =&gt; m' (HttpResult ())</code> is what I was alluding to earlier. This is what instantiates <code>m'</code> to <code>ReaderT * ConnectionString m</code>, which is further instantiated to <code>ReaderT * ConnectionString IO</code> as a result of the the last constraint.</p>\n\n<p>It is only after all type variable constraints are satisfied that GHC checks that <code>ReaderT * ConnectionString IO</code> satisfies <code>MonadReader ConnectionString</code> and <code>MonadIO</code>, which indeed it does. </p>\n\n<p>If this wasn't the case, e.g. when <code>postReservation :: (MonadLogger m, MonadIO m) =&gt; ReservationRendition -&gt; m (HttpResult ())</code>, then the compiler wouldn't be able to find the instance <code>MonadLogger (ReaderT * ConnectionString IO)</code> and complain.</p>\n"}], "owner": {"reputation": 12205, "user_id": 577417, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/VDNOR.jpg?s=128&g=1", "display_name": "Benjamin Gale", "link": "https://stackoverflow.com/users/577417/benjamin-gale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 47392954, "answer_count": 1, "score": 3, "last_activity_date": 1511185961, "creation_date": 1511182588, "last_edit_date": 1511183516, "question_id": 47392590, "link": "https://stackoverflow.com/questions/47392590/eliminating-monadreader-constraint-using-runreadert", "title": "Eliminating MonadReader constraint using runReaderT", "body": "<p>I have been watching <a href=\"https://www.youtube.com/watch?v=9Af2ZUK3Z4U\" rel=\"nofollow noreferrer\">Refactoring some Haskell code to use MTL</a> which refactors some Haskell code to make use of the typeclasses from the mtl package. </p>\n\n<p>The code includes a <code>postReservation</code> function with the following signature:</p>\n\n<pre><code>postReservation :: ReservationRendition -&gt; IO (HttpResult ())\n</code></pre>\n\n<p>The implementation of the <code>postReservation</code> function makes use of three additional functions with the following signatures:</p>\n\n<pre><code>readReservationsFromDB :: ConnectionString -&gt; ZonedTime -&gt; IO [Reservation]\ngetReservedSeatsFromDB :: ConnectionString -&gt; ZonedTime -&gt; IO Int\nsaveReservation :: ConnectionString -&gt; Reservation -&gt; IO ()\n</code></pre>\n\n<p>In the video, the signatures of the three functions are refactored so that they return a generic type with a <code>MonadIO</code> constraint i.e.</p>\n\n<pre><code>readReservationsFromDB :: (MonadIO m) =&gt; ConnectionString -&gt; ZonedTime -&gt; m [Reservation]\ngetReservedSeatsFromDB :: (MonadIO m) =&gt; ConnectionString -&gt; ZonedTime -&gt; m Int\nsaveReservation :: (MonadIO m) =&gt; ConnectionString -&gt; Reservation -&gt; m ()\n</code></pre>\n\n<p>I understand that doing this makes the functions more flexible as they no longer depend on a concrete monad type or a specific monad transformer stack configuration. I also understand that the <code>postReservation</code> function can still make use of these functions without any changes to its type signature because it has a return type of IO which is an instance of the MonadIO typeclass. </p>\n\n<p>Next, the three functions are refactored to include a <code>MonadReader</code> constraint so that the connection string does not need to be explicitly passed around i.e.</p>\n\n<pre><code>readReservationsFromDB :: (MonadReader ConnectionString m, MonadIO m) =&gt; ZonedTime -&gt; m [Reservation]\ngetReservedSeatsFromDB :: (MonadReader ConnectionString m, MonadIO m) =&gt; ZonedTime -&gt; m Int\nsaveReservation :: (MonadReader ConnectionString m, MonadIO m) =&gt; Reservation -&gt; m ()\n</code></pre>\n\n<p>The signature of the <code>postReservation</code> function is also updated to include the <code>MonadIO</code> and <code>MonadReader</code> constraints i.e</p>\n\n<pre><code>postReservation :: (MonadReader ConnectionString m, MonadIO m) =&gt; ReservationRendition -&gt; m (HttpResult ())\n</code></pre>\n\n<p>The presenter of the video goes on to make a concrete version of the <code>postReservation</code> function called <code>postReservationIO</code> in order to eliminate the typeclass constraints. A broken version of the <code>postReservationIO</code> function is written to demonstrate that it cannot just make use of the <code>postReservation</code> function because the <code>IO</code> type returned by the <code>postReservationIO</code> function is not an instance of the <code>MonadReader</code> typeclass.</p>\n\n<p>We are then told that in order to eliminate the <code>MonadReader</code> constraint from the <code>postReservationIO</code> function we need to make use of the <code>runReaderT</code> function which is where the video loses me.</p>\n\n<p>At about 15:00, the <code>postReservationIO</code> function is refactored to look like this</p>\n\n<pre><code>postReservationIO :: ReservationRendition -&gt; IO (Httpresult ())\npostReservationIO req = runReaderT (postReservation req) connStr\n</code></pre>\n\n<p>The <code>runReaderT</code> function has a type signature of <code>ReaderT k r m a -&gt; r -&gt; m a</code> which I'm reading as a function that takes some concrete <code>ReaderT</code> type and some value of type <code>r</code> (the connection string in our case) and it'll give you back some monad of type <code>m a</code>.</p>\n\n<p>In the <code>postReservationIO</code> implementation we are passing <code>(postReservation req)</code> as the first argument to the <code>runReaderT</code> function. <code>(postReservation req)</code> has the type </p>\n\n<pre><code>(MonadReader ConnectionString m, MonadIO m) =&gt; m (HttpResult ()) \n</code></pre>\n\n<p>which as far as I can tell is not a <code>ReaderT</code> so I'm struggling to understand how this works.</p>\n\n<p>Can anyone explain how we have made the jump from something of type <code>(MonadReader ConnectionString m, MonadIO m) =&gt; m (HttpResult ())</code> to <code>ReaderT k r m a</code> in order to eliminate the <code>MonadReader</code> constraint?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1511182632, "post_id": 47392540, "comment_id": 81738024, "body": "Well the <code>where</code> is scoped in the <code>odds</code> statement, not the <code>evens</code> statement."}], "answers": [{"tags": [], "owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "is_accepted": false, "score": 8, "last_activity_date": 1511182740, "creation_date": 1511182740, "answer_id": 47392636, "question_id": 47392540, "link": "https://stackoverflow.com/questions/47392540/variable-not-in-scope-in-nested-where/47392636#47392636", "title": "Variable not in scope in nested where", "body": "<p>You don't need another nested <code>where</code>, just do</p>\n\n<pre><code>luhn :: [Int] -&gt; Bool\nluhn xs = ((evens + odds) `mod` 10) == 0 where\n      evens = sum [x | (x,i) &lt;- reversed_indexed_xs, i `mod` 2 == 0]\n      odds = sum [luhnDouble x | (x,i) &lt;- reversed_indexed_xs, i `mod` 2 /= 0]\n      reversed_indexed_xs = zip (reverse xs) [0..]\n</code></pre>\n\n<p>The problem is that when you write <code>X where Y</code>, the definitions in <code>Y</code> can be used only in the expression <code>X</code>. In your case, <code>reversed_indexed_xs</code> can be used only in the scope of the definition of <code>odds</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 7, "last_activity_date": 1511182745, "creation_date": 1511182745, "answer_id": 47392641, "question_id": 47392540, "link": "https://stackoverflow.com/questions/47392540/variable-not-in-scope-in-nested-where/47392641#47392641", "title": "Variable not in scope in nested where", "body": "<p>You scoped the <code>where</code> with the <code>odds</code> statement, not the <code>even</code>:</p>\n\n<pre><code>luhn :: [Int] -&gt; Bool\nluhn xs = ((evens + odds) `mod` 10) == 0 where\n      evens = sum [x | (x,i) &lt;- <b>reversed_indexed_xs</b>, i `mod` 2 == 0]\n      odds = sum [luhnDouble x | (x,i) &lt;- reversed_indexed_xs, i `mod` 2 /= 0] where\n            <b>reversed_indexed_xs</b> = zip (reverse xs) [0..]</code></pre>\n\n<p>Since the <code>reversed_indexed_xs</code> uses no variables bounded to <code>odds</code>, we can simply put it on the same level as <code>evens</code> and <code>odds</code>:</p>\n\n<pre><code>luhn :: [Int] -&gt; Bool\nluhn xs = ((evens + odds) `mod` 10) == 0 where\n      evens = sum [x | (x,i) &lt;- <b>reversed_indexed_xs</b>, i `mod` 2 == 0]\n      odds = sum [luhnDouble x | (x,i) &lt;- reversed_indexed_xs, i `mod` 2 /= 0]\n      <b>reversed_indexed_xs</b> = zip (reverse xs) [0..]</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": false, "score": 7, "last_activity_date": 1511182885, "creation_date": 1511182885, "answer_id": 47392683, "question_id": 47392540, "link": "https://stackoverflow.com/questions/47392540/variable-not-in-scope-in-nested-where/47392683#47392683", "title": "Variable not in scope in nested where", "body": "<p>The nested <code>where</code> is scoped only to the definition under which it's nested - i.e.  to <code>odds</code>, - but you're using it in both <code>evens</code> and <code>odds</code>. It's in scope for <code>odds</code>, but not for <code>evens</code>.</p>\n\n<p>To use it in both <code>evens</code> and <code>odds</code>, you can just define it at the same level, no nesting required:</p>\n\n<pre><code>luhn :: [Int] -&gt; Bool\nluhn xs = ((evens + odds) `mod` 10) == 0 where\n      evens = sum [x | (x,i) &lt;- reversed_indexed_xs, i `mod` 2 == 0]\n      odds = sum [luhnDouble x | (x,i) &lt;- reversed_indexed_xs, i `mod` 2 /= 0]\n      reversed_indexed_xs = zip (reverse xs) [0..]\n</code></pre>\n"}], "owner": {"reputation": 6515, "user_id": 272924, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/WYhVU.jpg?s=128&g=1", "display_name": "dark_ruby", "link": "https://stackoverflow.com/users/272924/dark-ruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 47392641, "answer_count": 3, "score": 3, "last_activity_date": 1511182885, "creation_date": 1511182414, "question_id": 47392540, "link": "https://stackoverflow.com/questions/47392540/variable-not-in-scope-in-nested-where", "title": "Variable not in scope in nested where", "body": "<p>I'm implementing luhn algorithm, here's the code I have so far:</p>\n\n<pre><code>luhn :: [Int] -&gt; Bool\nluhn xs = ((evens + odds) `mod` 10) == 0 where\n      evens = sum [x | (x,i) &lt;- reversed_indexed_xs, i `mod` 2 == 0]\n      odds = sum [luhnDouble x | (x,i) &lt;- reversed_indexed_xs, i `mod` 2 /= 0] where\n            reversed_indexed_xs = zip (reverse xs) [0..]\n</code></pre>\n\n<p>error I'm getting is</p>\n\n<pre><code> Variable not in scope: reversed_indexed_xs :: [(a, Integer)]\n   |\n33 |       evens = sum [x | (x,i) &lt;- reversed_indexed_xs, i `mod` 2 == 0]\n   |                                 ^^^^^^^^^^^^^^^^^^^\nFailed, 0 modules loaded.\n</code></pre>\n\n<p>despite <code>reversed_indexed_xs</code> being defined in nested <code>where</code> statement.\nI assume my problem is with indentation, any help?</p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1511215859, "post_id": 47392306, "comment_id": 81757637, "body": "<code>MySQLValue</code> is just a big sum type, so pattern match on the constructor you expect to get, and throw an appropriate error for the other cases (e.g. <code>\\case { MySQLInt16U x -&gt; x; _ -&gt; error &quot;bad value&quot; }</code>)"}], "owner": {"reputation": 318, "user_id": 3310317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1490518186/picture?type=large", "display_name": "SparklingWater", "link": "https://stackoverflow.com/users/3310317/sparklingwater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1511181696, "creation_date": 1511181696, "question_id": 47392306, "link": "https://stackoverflow.com/questions/47392306/how-do-i-convert-mysqlvalue-to-correct-type-in-haskell", "title": "How do I convert MySQLValue to correct type in Haskell?", "body": "<p>I am using the <a href=\"https://hackage.haskell.org/package/mysql-haskell\" rel=\"nofollow noreferrer\">mysql-haskell</a> package. The result of a query is of type IO [[MySQLValue]].</p>\n\n<p>Now accessing the third value of a row like in the code below will print out <strong>\"MySQLInt16U 5\"</strong>:</p>\n\n<pre><code>test2 (x:xs) = show $ x!!2\n</code></pre>\n\n<p>How can I \"convert\" those MySQLValues to Integers, Strings or other native types (In this case the type should be Int)?</p>\n\n<p>EDIT: <a href=\"https://hackage.haskell.org/package/mysql-haskell-0.8.3.0/docs/Database-MySQL-Protocol-MySQLValue.html\" rel=\"nofollow noreferrer\">link reference for decoding types</a></p>\n"}, {"tags": ["haskell", "types", "semantics", "typeclass"], "comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1524302887, "post_id": 47385618, "comment_id": 86925036, "body": "if it were written <code>pure x r = x ;  (f &lt;*&gt; g) r = (f r) (g r)</code> if&#39;d be much clearer, wouldn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 0, "creation_date": 1511157637, "post_id": 47385720, "comment_id": 81724681, "body": "Could you please provide examples of using pure of function instance?"}, {"owner": {"reputation": 2585, "user_id": 8491228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5T09.jpg?s=128&g=1", "display_name": "Mor A.", "link": "https://stackoverflow.com/users/8491228/mor-a"}, "reply_to_user": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 1, "creation_date": 1511158558, "post_id": 47385720, "comment_id": 81724996, "body": "@Bulat M. <code>pure</code> for the function instance is basically <code>const</code>. So you can use it in the same places (like you can use <code>pure</code> instead of <code>Just</code>, or <code>(:[])</code>. Using <code>pure</code> instead of those allows you to potentially make more general code(one that works for any applicative, rather than a particular instance)."}, {"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 0, "creation_date": 1511158709, "post_id": 47385720, "comment_id": 81725044, "body": "Please elaborate more on one concrete example where it allows to make more general code. It would be easier for me to understand."}, {"owner": {"reputation": 2585, "user_id": 8491228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5T09.jpg?s=128&g=1", "display_name": "Mor A.", "link": "https://stackoverflow.com/users/8491228/mor-a"}, "reply_to_user": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 1, "creation_date": 1511159153, "post_id": 47385720, "comment_id": 81725190, "body": "for example, consider <code>liftA2 f a b = pure f &lt;*&gt; a &lt;*&gt; b</code>, which can be used like on functions like so <code>liftA2 (+) (*3) (&#47;6)</code> which would give the function equivalent to <code>\\x -&gt; (x*3) + (x&#47;6)</code>, thus we can apply the same argument to multiple functions, then combine the results some in way. Another example of using liftA2 <code>liftA2 (,) (^2) show</code>, which will take a number a create a tuple with its square and its string representation. For usecases of <code>const</code> you can check the answers to <a href=\"https://stackoverflow.com/questions/7402528/whats-the-point-of-const-in-the-haskell-prelude\">this question</a>"}], "tags": [], "owner": {"reputation": 2585, "user_id": 8491228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5T09.jpg?s=128&g=1", "display_name": "Mor A.", "link": "https://stackoverflow.com/users/8491228/mor-a"}, "is_accepted": true, "score": 8, "last_activity_date": 1511157534, "last_edit_date": 1511157534, "creation_date": 1511156730, "answer_id": 47385720, "question_id": 47385618, "link": "https://stackoverflow.com/questions/47385618/what-is-the-meaning-of-pure-x-x/47385720#47385720", "title": "What is the meaning of `pure x = (\\_ -&gt; x)`?", "body": "<p>The signatures of <code>pure</code> and <code>(&lt;*&gt;)</code> for the function instance are  </p>\n\n<pre><code>pure :: a -&gt; ((-&gt;) r a)  \n(&lt;*&gt;) :: ((-&gt;) r (a -&gt; b)) -&gt; ((-&gt;) r a) -&gt; ((-&gt;) r b)  \n</code></pre>\n\n<p>Writing the (->) as infix operator gives  </p>\n\n<pre><code>pure :: a -&gt; (r -&gt; a)  \n(&lt;*&gt;) :: (r -&gt; (a -&gt; b)) -&gt; (r -&gt; a) -&gt; (r -&gt; a)\n</code></pre>\n\n<p>So <code>pure</code> is a function that takes a parameter of type <code>a</code> and returns a function that takes a parameter of type <code>r</code> and returns a value of type <code>a</code>.<br>\nSince we can't know the type of <code>r</code> as we write <code>pure</code>, we can only give a function that return the parameter given to <code>pure</code>.</p>\n"}], "owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 47385720, "answer_count": 1, "score": 2, "last_activity_date": 1511173552, "creation_date": 1511156101, "last_edit_date": 1511173552, "question_id": 47385618, "link": "https://stackoverflow.com/questions/47385618/what-is-the-meaning-of-pure-x-x", "title": "What is the meaning of `pure x = (\\_ -&gt; x)`?", "body": "<p>I'm reading the instance of Applicative for functions,\nand encountered a line</p>\n\n<pre><code>instance Applicative ((-&gt;) r) where  \n  pure x = (\\_ -&gt; x)  \n  f &lt;*&gt; g = \\x -&gt; f x (g x)\n</code></pre>\n\n<p>I understand the syntax, but don't understand the meaning of the second line.</p>\n\n<p>My understanding is: partially applied function <code>((-&gt;) r)</code> gets a value and wraps that value into the context, which contains function that always returns that value.</p>\n\n<p>Why doesn't it just compute the result by applying partially applied function to that <code>x</code>, and only after that it would store the result in Applicative context?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1511123019, "post_id": 47381603, "comment_id": 81715709, "body": "That&#39;s the idea of the <code>&lt;*&gt;</code> operator for functions."}, {"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1511124023, "post_id": 47381603, "comment_id": 81716050, "body": "I read &lt;*&gt;&#39;s types and it seems that both (+3) and (*100) each needs separate argument"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 2, "creation_date": 1511125005, "post_id": 47381603, "comment_id": 81716367, "body": "You have to check how <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/src/GHC.Base.html#%3C%2A%3E#GHC.Base.html#Applicative\" rel=\"nofollow noreferrer\"><code>instance Applicative ((-&gt;) a)</code> for <code>&lt;*&gt;</code></a> is implemented."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1511126420, "post_id": 47381603, "comment_id": 81716836, "body": "@BulatM. yes, both (+3) and (*100) each indeed need separate argument, and <code>&lt;*&gt;</code> is supplying it to them. it&#39;s just how it&#39;s defined: <code>(f &lt;*&gt; g) x = f x $ g x</code>. It&#39;s just a given. Then, your expression is actually parenthesized as <code>(((+) &lt;$&gt; (+3)) &lt;*&gt; (*100)) 5</code> which by substituting the arguments for the parameters gives us <code>((+) &lt;$&gt; (+3)) 5 $ (*100) 5</code> = <code>((+) . (+3)) 5 (5*100) = (+) (5+3) (5*100)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 0, "creation_date": 1511124750, "post_id": 47381794, "comment_id": 81716271, "body": "Could you please show how f g x correspond to values in my expression?"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 3, "creation_date": 1511125132, "post_id": 47381794, "comment_id": 81716421, "body": "@Bulat M. <code>(+) &lt;$&gt; (+3)</code> is <code>f</code>, <code>(*100)</code> is <code>g</code> and <code>5</code> is <code>x</code>"}, {"owner": {"reputation": 2570, "user_id": 4142266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rMCN5.png?s=128&g=1", "display_name": "mschmidt", "link": "https://stackoverflow.com/users/4142266/mschmidt"}, "reply_to_user": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 1, "creation_date": 1511125304, "post_id": 47381794, "comment_id": 81716486, "body": "@Bulat you probably want to read chapter 11 of <a href=\"http://learnyouahaskell.com/functors-applicative-functors-and-monoids\" rel=\"nofollow noreferrer\">Learn You a Haskell</a>"}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 7, "last_activity_date": 1511124211, "creation_date": 1511124211, "answer_id": 47381794, "question_id": 47381603, "link": "https://stackoverflow.com/questions/47381603/how-one-parameter-is-used-by-two-function-simultaneously/47381794#47381794", "title": "How one parameter is used by two function simultaneously", "body": "<p>In the <code>(-&gt;) a</code> applicative instance, we find:</p>\n\n<pre><code>instance Applicative ((-&gt;) a) where\n    pure = const\n    (&lt;*&gt;) f g x = f x (g x)\n    liftA2 q f g x = q (f x) (g x)\n</code></pre>\n\n<p>So, <code>x</code> is passed to both <code>f</code> and <code>g</code> by definition.</p>\n"}, {"tags": [], "owner": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "is_accepted": false, "score": 3, "last_activity_date": 1511150737, "creation_date": 1511150737, "answer_id": 47384923, "question_id": 47381603, "link": "https://stackoverflow.com/questions/47381603/how-one-parameter-is-used-by-two-function-simultaneously/47384923#47384923", "title": "How one parameter is used by two function simultaneously", "body": "<p>Here is a way to unbox it. We start with</p>\n\n<pre><code>e = ((+) &lt;$&gt; (+3)) &lt;*&gt; (*100)\n</code></pre>\n\n<p>(note that I left out the <code>$ 5</code>). The Applicative Functor whose <code>&lt;$&gt;</code> and <code>&lt;*&gt;</code> we are using here is the Function type <code>(-&gt;)</code> (partially applied to, I guess, <code>Integer</code>). Here, the meaning of <code>&lt;$&gt;</code> and <code>&lt;*&gt;</code> is as follows:</p>\n\n<pre><code>f &lt;$&gt; g = \\y -&gt; f (g y)\ng &lt;*&gt; h = \\x -&gt; g x (h x)\n</code></pre>\n\n<p>We can plug that in into the term in the first line and get</p>\n\n<pre><code>e = \\x -&gt; (\\y -&gt; (+) ((+3) y)) x ((*100) x\n</code></pre>\n\n<p>There are a few simplifications that we can do to this term:</p>\n\n<pre><code>e = \\x -&gt; (x+3) + (x*100)\n</code></pre>\n\n<p>So if this function is the value of <code>(+) &lt;$&gt; (+3) &lt;*&gt; (*100)</code>, then it should no longer be surprising that applying this to <code>5</code> gives</p>\n\n<pre><code>e 5 = (5+3) + (5*100) = 508\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 0, "last_activity_date": 1511171954, "creation_date": 1511171954, "answer_id": 47389310, "question_id": 47381603, "link": "https://stackoverflow.com/questions/47381603/how-one-parameter-is-used-by-two-function-simultaneously/47389310#47389310", "title": "How one parameter is used by two function simultaneously", "body": "<p>The thing is, you first have to understand how a function can be a functor. Think about a function like a container which reveals it's content only when you feed it with a parameter. In other words we only get to know it's content when this applicative functor (function) gets invoked with a parameter. So the type of this function would be say <code>r -&gt; a</code> on two different types. However for functors we can only take an effect on a single type. So applicative functors are partially applied types just like the functor instance of <code>Either</code> type. We are interested in the output of the function so our applicative functor becomes <code>(-&gt;) r</code> in prefix notation. By remembering that <code>&lt;$&gt;</code> is the infix form of <code>fmap</code> </p>\n\n<p><code>(+3) &lt;$&gt; (*2) $ 4</code> would result <code>11</code>. <code>4</code> is applied to our functor <code>(*2)</code> and the result (which is the value in the applicative functor context) gets mapped with <code>(+3)</code>.</p>\n\n<p>However in our case we are <code>fmap</code>ing <code>(+)</code> to <code>(+3)</code>. To make it clearer lets rephrase the functions in lambda form.</p>\n\n<p><code>(+) = \\w x -&gt; w + x</code> and <code>(+3) = \\y -&gt; y + 3</code>.</p>\n\n<p>then <code>(+) &lt;$&gt; (+3)</code> by partially applying <code>\\y -&gt; y + 3</code> in the place of <code>w</code> our <code>fmap</code> applied applicative functor becomes <code>\\y x -&gt; (y + 3) + x</code>.</p>\n\n<p>Now here comes the applicative operator <code>&lt;*&gt;</code>. As mentioned in previous answers it is of definition <code>g &lt;*&gt; h = \\x -&gt; g x (h x)</code> which takes a two parameter function <code>g</code> and partially applies <code>g</code>'s second parameter with it's second parameter function <code>h</code>. Now our operation looks like</p>\n\n<p><code>(\\y x -&gt; (y + 3) + x) &lt;*&gt; (*100)</code> which can be rephrased as;\n<code>(\\y x -&gt; (y + 3) + x) &lt;*&gt; (\\z -&gt; z*100)</code> which means now we have to partially apply <code>\\z -&gt; z*100</code> to <code>x</code> and our function becomes <code>\\y z -&gt; (y + 3) + (z*100)</code>.</p>\n\n<p>Finally the applicative operator returns us a function which takes a single parameter and applies it to both parameters of the above two parameter function. So</p>\n\n<p><code>\\x -&gt; (\\y z -&gt; (y + 3) + (z*100)) x x</code></p>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 1325960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gB5mi.jpg?s=128&g=1", "display_name": "Philip Schwarz", "link": "https://stackoverflow.com/users/1325960/philip-schwarz"}, "is_accepted": false, "score": 0, "last_activity_date": 1609846782, "creation_date": 1609846782, "answer_id": 65578152, "question_id": 47381603, "link": "https://stackoverflow.com/questions/47381603/how-one-parameter-is-used-by-two-function-simultaneously/65578152#65578152", "title": "How one parameter is used by two function simultaneously", "body": "<p>Here is a slide deck dedicated to the subject of the ((-&gt;) r) instance of the Applicative type class: <a href=\"https://www2.slideshare.net/pjschwarz/function-applicative-for-great-good-of-palindrome-checker-function-polyglot-fp-for-fun-and-profit-haskell-and-scala\" rel=\"nofollow noreferrer\">https://www2.slideshare.net/pjschwarz/function-applicative-for-great-good-of-palindrome-checker-function-polyglot-fp-for-fun-and-profit-haskell-and-scala</a></p>\n<p>And here are a couple of slides from it:\n<a href=\"https://i.stack.imgur.com/GaHnM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GaHnM.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/N8N8D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N8N8D.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 47381794, "answer_count": 4, "score": 2, "last_activity_date": 1609846782, "creation_date": 1511122879, "question_id": 47381603, "link": "https://stackoverflow.com/questions/47381603/how-one-parameter-is-used-by-two-function-simultaneously", "title": "How one parameter is used by two function simultaneously", "body": "<p>I am reading about applicative functors and found such line:</p>\n\n<pre><code>(+) &lt;$&gt; (+3) &lt;*&gt; (*100) $ 5\n</code></pre>\n\n<p>It outputs 508.</p>\n\n<p>How 5 could be used by (+3) and (*100) at the same time?\nWhy don't we need to pass two 5's as a parameters like:</p>\n\n<pre><code>(+) &lt;$&gt; (+3) &lt;*&gt; (*100) $ 5 5\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1511122257, "post_id": 47381464, "comment_id": 81715413, "body": "my understanding of <code>ST</code> is, think of it like a universe. every <code>ST</code> operations might turn one universe into another(by mutation). that&#39;s why <code>ST</code> can be turned into <code>IO</code> by tagging it with <code>RealWorld</code>. so your question is really the same as asking if <code>IO</code> is pure or not."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 4, "creation_date": 1511126211, "post_id": 47381464, "comment_id": 81716761, "body": "Every value of type <code>forall s . ST s A</code> is referentially transparent, just like every value of type <code>IO A</code> is referentially transparent (since such values are computations representing how to produce the resulting value, not the value itself). While <code>ST s (STRef s A)</code> can&#39;t be <code>run</code>, it is still a valid computation; e.g. you can apply a function of type <code>STRef s A -&gt; ST s B</code> to get <code>forall s . ST s B</code> which can be run. However, I&#39;m not actually sure what the question is - why do you think the code in question should be allowed? (note: &quot;I don&#39;t really understand why&quot; is a poor explanation)"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1511126564, "post_id": 47381464, "comment_id": 81716878, "body": "<code>ST</code> allows dynamic allocated memory, and pointers/references to such memory. It is designed so that all the memory could, in principle, be freed at the end of <code>runST</code>. For that, it is vital that no pointer can escape <code>runST</code>. Such escaped pointers would also cause weird effects related to evaluation ordering, e.g. <code>f (runST $ writeSTRef r True) + g (runST $ readSTRef r)</code> could evaluate to different results depending on which <code>runST</code> is evaluated first. Referential transparency is meant to avoid such ordering issues."}], "answers": [{"tags": [], "owner": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "is_accepted": true, "score": 7, "last_activity_date": 1511129437, "creation_date": 1511129437, "answer_id": 47382539, "question_id": 47381464, "link": "https://stackoverflow.com/questions/47381464/is-st-referentialy-transparent/47382539#47382539", "title": "Is ST referentialy transparent?", "body": "<p>More an answer to the question title than the question itself, but still:</p>\n\n<p>Yes, ST is referentially transparent.</p>\n\n<p>For a long time this was just conjectured and believed, and only this year we have a proper proof for that:</p>\n\n<p><strong>A Logical Relation for Monadic Encapsulation of State: Proving contextual equivalences in the presence of runST</strong><br/>\nAmin Timany, L\u00e9o Stefanesco, Morten Krogh-Jespersen, Lars Birkedal<br/> \nConditionally accepted to POPL 2018<br/>\n<a href=\"http://iris-project.org/\" rel=\"noreferrer\">http://iris-project.org/</a> <a href=\"http://iris-project.org/pdfs/2018-popl-runST-submission.pdf\" rel=\"noreferrer\">Preprint PDF</a></p>\n"}, {"comments": [{"owner": {"reputation": 4471, "user_id": 3858142, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/4c27dead2edf0b6dc28833a694c42ba1?s=128&d=identicon&r=PG&f=1", "display_name": "sevo", "link": "https://stackoverflow.com/users/3858142/sevo"}, "edited": false, "score": 0, "creation_date": 1511217468, "post_id": 47382845, "comment_id": 81758365, "body": "I realized that my question touches a more complex subject than I had anticipated and I admit that it&#39;s unclear. But this answer gives me (and hopefully others) some clue. Initially, I had incorrectly assumed that <code>ST s a</code> would break referential transparency when <code>a = STRef s x</code> because this <code>a</code> mixes real references in pure code! But the existential type seems to be crucial in enforcing correctness of <code>runST</code>. This part I find the most difficult to understand and it feels like it is a very clever invention (or discovery)."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 6, "last_activity_date": 1511131629, "creation_date": 1511131629, "answer_id": 47382845, "question_id": 47381464, "link": "https://stackoverflow.com/questions/47381464/is-st-referentialy-transparent/47382845#47382845", "title": "Is ST referentialy transparent?", "body": "<p>I don't really understand what you're asking, so I'm going to pretend your question is:</p>\n\n<blockquote>\n  <p>Why is ST designed to disallow <code>runST (newSTRef True)</code>?</p>\n</blockquote>\n\n<p>If that were allowed, it would no longer be referentially transparent:</p>\n\n<pre><code>main = do\n    let r = runST (newSTRef True)\n    evaluate (runST (writeSTRef r False))\n    print (runST (readSTRef r))\n</code></pre>\n\n<p>This code would output <code>False</code>.</p>\n\n<pre><code>main = do\n    evaluate (runST (writeSTRef (runST (newSTRef True)) False))\n    print (runST (readSTRef (runST (newSTRef True))))\n</code></pre>\n\n<p>This code (the result of inlining <code>r</code> in every user) would output <code>True</code>, because each instance of <code>runST (newSTRef True)</code> would allocate a new <code>STRef</code> variable.</p>\n\n<p>The way <code>runST</code> is actually implemented ensures that all resources allocated within an <code>ST s</code> action cannot escape that action.</p>\n\n<p>The difference between <code>IO</code> and <code>ST s</code> is that there is no <code>runIO</code> function. You can create multiple independent <code>IO</code> actions, but they don't matter without <code>runIO</code> (they're just values). The only way to actually run an <code>IO</code> action is to bind it to <code>main</code> and let the runtime system pick it up (it's like there's a single implicit <code>runIO</code> wrapped around <code>main</code>), so there's only one single <code>IO</code> action that will ever get executed in a program.</p>\n\n<p>Of course this single action can be composed by combining multiple smaller actions, but in the end it's still a monolith. On the other hand, <code>runST</code> allows multiple <code>ST s</code> actions to be executed independently.</p>\n"}], "owner": {"reputation": 4471, "user_id": 3858142, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/4c27dead2edf0b6dc28833a694c42ba1?s=128&d=identicon&r=PG&f=1", "display_name": "sevo", "link": "https://stackoverflow.com/users/3858142/sevo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 47382539, "answer_count": 2, "score": 4, "last_activity_date": 1511131629, "creation_date": 1511121984, "question_id": 47381464, "link": "https://stackoverflow.com/questions/47381464/is-st-referentialy-transparent", "title": "Is ST referentialy transparent?", "body": "<p>Why is <code>ST</code> designed to disallow the following code <a href=\"https://en.wikibooks.org/wiki/Haskell/Existentially_quantified_types\" rel=\"nofollow noreferrer\">as shown in the wikibook</a>? The article seems to suggest that <code>ST</code> effects would leak into another <code>ST</code> if this was allowed, but I don't really understand why.</p>\n\n<p>It seems that I cannot run a specific <code>ST s (STRef s a)</code>. Are <code>ST</code> effects contained and referentially transparent, but such use is still considered invalid?</p>\n\n<p>Intuition tells me that there is difference between semantics of <code>IO</code> and <code>ST</code> related to that there is one <code>IO</code> and many independent <code>ST</code>, but I'm not sure.</p>\n\n<pre><code>&gt; runST (newSTRef True)\n\n&lt;interactive&gt;:5:8: error:\n    \u2022 Couldn't match type \u2018a\u2019 with \u2018STRef s Bool\u2019\n        because type variable \u2018s\u2019 would escape its scope\n      This (rigid, skolem) type variable is bound by\n        a type expected by the context:\n          forall s. ST s a\n        at &lt;interactive&gt;:5:1-21\n      Expected type: ST s a\n        Actual type: ST s (STRef s Bool)\n    \u2022 In the first argument of \u2018runST\u2019, namely \u2018(newSTRef True)\u2019\n      In the expression: runST (newSTRef True)\n      In an equation for \u2018it\u2019: it = runST (newSTRef True)\n    \u2022 Relevant bindings include it :: a (bound at &lt;interactive&gt;:5:1)\n\n&gt; :t newSTRef\nnewSTRef :: a -&gt; ST s (STRef s a)\n\n&gt; :t runST\nrunST :: (forall s. ST s a) -&gt; a\n</code></pre>\n"}, {"tags": ["haskell", "if-statement", "compiler-errors", "list-comprehension"], "comments": [{"owner": {"reputation": 41, "user_id": 7549786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1372256119482433/picture?type=large", "display_name": "Wandy", "link": "https://stackoverflow.com/users/7549786/wandy"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1511115335, "post_id": 47380157, "comment_id": 81712875, "body": "Sorry because my code is a bit messed up. So what should I do in order to make my function work as what I want ? Do you have any recommendation ?"}], "answers": [{"tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": false, "score": 4, "last_activity_date": 1511121668, "last_edit_date": 1511121668, "creation_date": 1511116009, "answer_id": 47380412, "question_id": 47380157, "link": "https://stackoverflow.com/questions/47380157/haskell-error-parse-error-on-input-if/47380412#47380412", "title": "Haskell error &quot;parse error on input \u2018if&#39;&quot;", "body": "<p>Your code has multiple issues:</p>\n\n<ul>\n<li><code>[x|x&lt;-xs]</code> doesn't do anything useful. This will just evaluate to <code>xs</code>.</li>\n<li>If you're using <code>mod</code> as an infix operator, it needs backticks around it</li>\n<li>You can't reassign variables. <code>then x = x / 2</code> and <code>x = x</code> are illegal in Haskell.</li>\n</ul>\n\n<p>The main problem though is the fact that you have an empty list comprehension (<code>[x|x&lt;-xs]</code>), with an <code>if</code> expression just kind of floating underneath it. I believe your intent was to put the <code>if</code> inside of the comprehension. Something like:</p>\n\n<pre><code>halfEvens :: [Int] -&gt; [Int]\nhalfEvens xs = [if x `mod` 2 == 0 then x `quot` 2 else x | x &lt;- xs]\n</code></pre>\n\n<p>Changes:</p>\n\n<ul>\n<li>I'm not trying to reassign anything. Each element will evaluate to whatever is left of the bar (<code>|</code>).</li>\n<li><code>/</code> can't be used with integers. <a href=\"https://stackoverflow.com/questions/4359043/divide-int-to-int-and-return-int\">Use <code>quot</code> or <code>div</code> for integer division.</a></li>\n</ul>\n\n<hr>\n\n<pre><code>main = do\n  putStrLn . show $ halfEvens [1, 2, 3, 4, 5, 6, 7, 8, 9, 0]\n\n[1,1,3,2,5,3,7,4,9,0]\n</code></pre>\n\n<p>Your code shows some serious misunderstandings of Haskell though. I recommend sitting down with a good book and trying out all the examples. Haskell is not an easy language. Don't try to rush through it.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 7549786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1372256119482433/picture?type=large", "display_name": "Wandy", "link": "https://stackoverflow.com/users/7549786/wandy"}, "edited": false, "score": 0, "creation_date": 1511117015, "post_id": 47380420, "comment_id": 81713540, "body": "What did the map do ? Is it importing the &#39;halfEven&#39; back to the &#39;halfEvens&#39; ? Or in other word assigning the value of  &#39;halfEven&#39; to the &#39;halfEvens&#39; ?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 41, "user_id": 7549786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1372256119482433/picture?type=large", "display_name": "Wandy", "link": "https://stackoverflow.com/users/7549786/wandy"}, "edited": false, "score": 0, "creation_date": 1511118462, "post_id": 47380420, "comment_id": 81714026, "body": "@Wandy <code>map halfEven == \\xs -&gt; [halfEven x | x &lt;- xs]</code>."}], "tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": false, "score": 3, "last_activity_date": 1511116048, "creation_date": 1511116048, "answer_id": 47380420, "question_id": 47380157, "link": "https://stackoverflow.com/questions/47380157/haskell-error-parse-error-on-input-if/47380420#47380420", "title": "Haskell error &quot;parse error on input \u2018if&#39;&quot;", "body": "<p>So, you want to apply a function that halves even numbers, but leaves odd numbers alone.  We can write a function to perform this transform on a single <code>Int</code>, using <code>even</code> from the prelude:</p>\n\n<pre><code>halfEven :: Int -&gt; Int\nhalfEven x | even x = x `div` 2\n           | otherwise = x\n</code></pre>\n\n<p>Now we can <code>map</code> this function over a list of <code>Int</code>:</p>\n\n<pre><code>halfEvens :: [Int] -&gt; [Int]\nhalfEvens xs = map halfEven xs\n</code></pre>\n\n<p>Or go point free:</p>\n\n<pre><code>halfEvens = map halfEven\n</code></pre>\n\n<p>Or use a list comprehension:</p>\n\n<pre><code>halfEvens xs = [halfEven x | x &lt;- xs]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": true, "score": 2, "last_activity_date": 1511117391, "last_edit_date": 1511117391, "creation_date": 1511116749, "answer_id": 47380567, "question_id": 47380157, "link": "https://stackoverflow.com/questions/47380157/haskell-error-parse-error-on-input-if/47380567#47380567", "title": "Haskell error &quot;parse error on input \u2018if&#39;&quot;", "body": "<p>Keeping as much of your original code/intent as possible,</p>\n\n<pre><code>halfEvens xs = [x | x &lt;- xs, x &lt;- [   -- instead of x = ...\n                 if x `mod` 2 == 0\n                   then {- x = -} x `div` 2\n                   else {- x = -} x ]]\n</code></pre>\n\n<p>Its type gets deduced as <code>halfEvens :: Integral t =&gt; [t] -&gt; [t]</code>.</p>\n\n<p>Funny thing about it is that we're allowed to use the same variable name there, with the <code>x &lt;- [...]</code> construct; it just gets shadowed. But it's OK, since we're only interested in the new value anyway. That way we treat it mentally as a variable \"update\", although there's no updating variables in Haskell, of course.</p>\n"}], "owner": {"reputation": 41, "user_id": 7549786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1372256119482433/picture?type=large", "display_name": "Wandy", "link": "https://stackoverflow.com/users/7549786/wandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "accepted_answer_id": 47380567, "answer_count": 3, "score": 2, "last_activity_date": 1511166059, "creation_date": 1511114473, "last_edit_date": 1511166059, "question_id": 47380157, "link": "https://stackoverflow.com/questions/47380157/haskell-error-parse-error-on-input-if", "title": "Haskell error &quot;parse error on input \u2018if&#39;&quot;", "body": "<p>I got a question regarding Haskell, I tried to make a function to half an even number only in a list and return the final list with only the even number(s) got modified(got halved) with the rest of the element remained untouched.</p>\n\n<p>But when I try to compile my code, I gave an error saying that \"error: parse error on input \u2018if'\" and I couldn't find the solution for it.</p>\n\n<pre><code>halfEvens :: [ Int ] -&gt; [ Int ]\nhalfEvens xs = [x|x&lt;-xs]\n                if x mod 2 == 0\n                the x = x / 2\n                else\n                x = x\n</code></pre>\n"}, {"tags": ["haskell", "types", "polymorphism", "parametric-polymorphism", "type-signature"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 3938428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b2936e7083c0d09c2e1b88beb781873?s=128&d=identicon&r=PG&f=1", "display_name": "twosixonetwo", "link": "https://stackoverflow.com/users/3938428/twosixonetwo"}, "edited": false, "score": 0, "creation_date": 1511113619, "post_id": 47379915, "comment_id": 81712225, "body": "Works just as expected! Thanks!"}], "tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": true, "score": 8, "last_activity_date": 1511113113, "creation_date": 1511113113, "answer_id": 47379915, "question_id": 47379828, "link": "https://stackoverflow.com/questions/47379828/right-type-signature-for-type-parameter-in-haskell/47379915#47379915", "title": "Right type signature for type parameter in Haskell", "body": "<p>You need to make <code>D1</code> and <code>D2</code> instances of <code>D</code> instead of <code>D1 a</code> and <code>D2 a</code>. Then you can quantify <code>extract</code> over <code>a</code> and make <code>extract</code> return the <code>a</code> out of a <code>D</code> for all <code>a</code>.</p>\n\n<p>Since that probably wasn't very clear (sorry):</p>\n\n<pre><code>class D d where\n    -- `d` is the type constructor that's an instance of `D` (i.e. `D1` or\n    -- `D2`) and `a` is a new type variable that can be any possible type\n    extract :: d a -&gt; a\n\ninstance D D1 where\n    extract (Da1 a) = a\n    extract (Db1 a) = a\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 3938428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b2936e7083c0d09c2e1b88beb781873?s=128&d=identicon&r=PG&f=1", "display_name": "twosixonetwo", "link": "https://stackoverflow.com/users/3938428/twosixonetwo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 47379915, "answer_count": 1, "score": 4, "last_activity_date": 1511118160, "creation_date": 1511112640, "last_edit_date": 1511118160, "question_id": 47379828, "link": "https://stackoverflow.com/questions/47379828/right-type-signature-for-type-parameter-in-haskell", "title": "Right type signature for type parameter in Haskell", "body": "<p>I have got two data types and want to write a class that returns the data from those data types:</p>\n\n<pre><code>data D1 a = Da1 a | Db1 a \ndata D2 a = Da2 a | Db2 a \n\nclass D a where\n    extract :: ??? a -&gt; a\n\ninstance D (D1 a) where\n    extract (Da1 a) = a\n    extract (Db1 a) = a\n\ninstance D (D2 a) where\n    extract (Da2 a) = a\n    extract (Db2 a) = a\n</code></pre>\n\n<p>If I had only one type D1 or D2 I could name it in the type signature, but what do I do in such a case where there are multiple possibilities? Is this even possible?</p>\n"}, {"tags": ["haskell", "tree", "heap", "binary-tree", "predicate"], "comments": [{"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 1, "creation_date": 1511110673, "post_id": 47379295, "comment_id": 81711070, "body": "Did you mean to have <code>data Tree a = Leaf a | Node (Tree a) a (Tree a)</code>? Otherwise the <code>Ord a</code> constraint on <code>descendingTree</code> makes no sense. Anyway, what have you already tried? I&#39;ll give you a hint and say that if you check whether a node is greater than all its children, that node&#39;s value is the maximum of it and all its children. Therefore, when checking a <code>Node</code>, check both subtrees, and then run comparisons between the values at the roots of the subtrees and the current <code>Node</code> itself."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1511113336, "post_id": 47379295, "comment_id": 81712110, "body": "What is your question?"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1511113700, "post_id": 47379295, "comment_id": 81712260, "body": "One nice and efficient way of sorting a binary tree would possibly be done by the <code>Zipper</code> type. I would advise you to have a look at <a href=\"http://learnyouahaskell.com/zippers\" rel=\"nofollow noreferrer\">Zippers</a>"}, {"owner": {"reputation": 91, "user_id": 8926103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5d7fe3f5b115d13199513ffa0a8c96?s=128&d=identicon&r=PG&f=1", "display_name": "SomaXD", "link": "https://stackoverflow.com/users/8926103/somaxd"}, "edited": false, "score": 0, "creation_date": 1511113718, "post_id": 47379295, "comment_id": 81712266, "body": "How to figure out the syntax to make that work what I said in the first sentence of my question ;D"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1511195946, "post_id": 47379295, "comment_id": 81746772, "body": "@Redu, why would you &quot;sort&quot; a binary tree using a zipper? And what does that have to do with checking if a binary tree is heap-ordered?"}], "answers": [{"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": true, "score": 1, "last_activity_date": 1511125530, "last_edit_date": 1511125530, "creation_date": 1511120177, "answer_id": 47381162, "question_id": 47379295, "link": "https://stackoverflow.com/questions/47379295/haskell-binary-tree-predicate-for-genetic-sorting/47381162#47381162", "title": "Haskell binary tree predicate for genetic sorting", "body": "<p>The answer is: <s><em>slowly</em></s> <em>by directly following your data type definition</em>.</p>\n\n<pre><code>descendingTree :: IntTree -&gt; Bool     -- no `a`, so no `Ord a` too\n-- data IntTree = Leaf Int\ndescendingTree   (Leaf i) = leaf i\n--              | Node Int IntTree IntTree\ndescendingTree   (Node  i     lt     rt  ) = node i lt rt\n</code></pre>\n\n<p>In case it's a leaf, there's nothing to check:</p>\n\n<pre><code>leaf _ = True\n</code></pre>\n\n<p>In case it's a node, it <em>always</em> has two children; this is guaranteed by its type definition. There simply is no other possibility in the type.</p>\n\n<pre><code>node i lt rt = \n</code></pre>\n\n<p>Here you need to fill out your test:</p>\n\n<pre><code>        i &gt; value lt &amp;&amp;\n        i &gt; value rt &amp;&amp;\n</code></pre>\n\n<p>the two checks will be done; if one fails the whole <code>&amp;&amp;</code> expression fails and returns <code>False</code>. Good. What if the two tests succeed?</p>\n\n<pre><code>        every_node_is_greater .... &amp;&amp;\n        every_node_is_greater ....\n</code></pre>\n\n<p>Can you fill in the blanks?</p>\n\n<p>Can you write the definition for <code>every_node_is_greater</code>? Do you need to?</p>\n\n<p>Of course the two functions <code>leaf</code> and <code>node</code> are completely redundant; they only served as a mental stepping blocks here, to remove the writing block for us. :) You'd usually write the code right in the corresponding clause in the <code>descendingTree</code> definition.</p>\n\n<p>One more definition needs to be written here, for <code>value</code>, the new abstraction that we've introduced as we were exploring the problem space (<em>\"what if we had a way to know the \"value\" of a node? we'll deal with the specifics later...\"</em>). Now it is finally time to flesh it out. Again, simply (and slowly) follow the type, and handle the cases it presents.</p>\n"}], "owner": {"reputation": 91, "user_id": 8926103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5d7fe3f5b115d13199513ffa0a8c96?s=128&d=identicon&r=PG&f=1", "display_name": "SomaXD", "link": "https://stackoverflow.com/users/8926103/somaxd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 2, "accepted_answer_id": 47381162, "answer_count": 1, "score": 2, "last_activity_date": 1511125530, "creation_date": 1511109810, "last_edit_date": 1511119191, "question_id": 47379295, "link": "https://stackoverflow.com/questions/47379295/haskell-binary-tree-predicate-for-genetic-sorting", "title": "Haskell binary tree predicate for genetic sorting", "body": "<p>Really new to Haskell and I can't figure this out. How to check if a <code>Node</code> in a given binary tree is bigger than its children? </p>\n\n<pre><code>module IntTree where\n\ndata IntTree = Leaf Int\n             | Node Int IntTree IntTree\n             deriving (Eq,Show)\n\nt1 :: IntTree\nt1 = Node 1999 (Node 1963 (Leaf 1925)\n                          (Leaf 1933))\n               (Node 1956 (Leaf 1932)\n                          (Leaf 1924))\n\n\nt2 :: IntTree\nt2 = Node 1999 (Node 1922 (Leaf 1925)\n                          (Leaf 1933))\n               (Node 1956 (Leaf 1932)\n                          (Leaf 1924))\n\ndescendingTree :: Ord a =&gt; IntTree -&gt; Bool\n</code></pre>\n\n<p>The function <code>descendingTree</code> which will get an <code>IntTree</code> and will give me a Boolean in return, signalling whether it is true for every node in the tree that the node's value is bigger than its two children nodes' values; if it has children of course. How can I write this function?</p>\n"}, {"tags": ["haskell", "cabal", "configure", "linux-mint", "cabal-install"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1511107832, "post_id": 47378941, "comment_id": 81710068, "body": "The errors are not necessarily in the end of config.log, you need to search for the string &#39;error&#39;."}, {"owner": {"reputation": 311, "user_id": 1724641, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a886499d7a6736b5c6cb548459ec8cce?s=128&d=identicon&r=PG", "display_name": "user1724641", "link": "https://stackoverflow.com/users/1724641/user1724641"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1511116783, "post_id": 47378941, "comment_id": 81713454, "body": "You are right @n.m. I did the search and found some errors but I am not sure configuration failed on them. See the updated description above."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1511126942, "post_id": 47378941, "comment_id": 81716989, "body": "These errors are harmless, it&#39;s the configure script trying to figure out usable gcc options. There should be more error messages. You are probably interested in one that sits near &quot;checking whether we are cross compiling&quot; message."}, {"owner": {"reputation": 311, "user_id": 1724641, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a886499d7a6736b5c6cb548459ec8cce?s=128&d=identicon&r=PG", "display_name": "user1724641", "link": "https://stackoverflow.com/users/1724641/user1724641"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1511160157, "post_id": 47378941, "comment_id": 81725593, "body": "@n.m. if you mean the config.log&#39;s messages near &quot;checking we are...&quot;, then I copy-pasted everything into the post above. The log just suddently ends with &quot;configure:2906: gcc -o conftest...&quot;."}, {"owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 0, "creation_date": 1511164168, "post_id": 47378941, "comment_id": 81727430, "body": "Another alternative (better IMO) is to just use Stack: <a href=\"https://haskell-lang.org/get-started\" rel=\"nofollow noreferrer\">haskell-lang.org/get-started</a>"}, {"owner": {"reputation": 311, "user_id": 1724641, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a886499d7a6736b5c6cb548459ec8cce?s=128&d=identicon&r=PG", "display_name": "user1724641", "link": "https://stackoverflow.com/users/1724641/user1724641"}, "reply_to_user": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 0, "creation_date": 1511165152, "post_id": 47378941, "comment_id": 81727861, "body": "@Sibi I would like to write a Haskell program that acts like a standalone script (with runhaskell) - I am not sure stack is an alternative for me (I would need new cabal&#39;s sandboxes)."}, {"owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 0, "creation_date": 1511166323, "post_id": 47378941, "comment_id": 81728407, "body": "@user1724641 You can use the scripting functionality for it: <a href=\"https://haskell-lang.org/tutorial/stack-script\" rel=\"nofollow noreferrer\">haskell-lang.org/tutorial/stack-script</a>"}, {"owner": {"reputation": 311, "user_id": 1724641, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a886499d7a6736b5c6cb548459ec8cce?s=128&d=identicon&r=PG", "display_name": "user1724641", "link": "https://stackoverflow.com/users/1724641/user1724641"}, "reply_to_user": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 0, "creation_date": 1511167607, "post_id": 47378941, "comment_id": 81729054, "body": "@Sibi not bad! I mean I could use this. This way I will need to <code>stack new</code> etc. and add the needed package descriptor files (yaml, etc)."}, {"owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 0, "creation_date": 1511168786, "post_id": 47378941, "comment_id": 81729625, "body": "@user1724641 Note that you don&#39;t need <code>stack new</code> for the script interpreter feature. Also you don&#39;t need <code>yaml</code> files. It is an independent script with just one file. You can see the <code>script interpreter</code> section in that page to understand it better. All you need to do is <code>.&#47;http.hs</code> to execute it."}, {"owner": {"reputation": 311, "user_id": 1724641, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a886499d7a6736b5c6cb548459ec8cce?s=128&d=identicon&r=PG", "display_name": "user1724641", "link": "https://stackoverflow.com/users/1724641/user1724641"}, "reply_to_user": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 1, "creation_date": 1511182937, "post_id": 47378941, "comment_id": 81738222, "body": "@Sibi this <code>stack</code> way of doing things looks quite cool, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 37486, "user_id": 371753, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/znFEK.jpg?s=128&g=1", "display_name": "sclv", "link": "https://stackoverflow.com/users/371753/sclv"}, "is_accepted": false, "score": 0, "last_activity_date": 1517001786, "creation_date": 1517001786, "answer_id": 48469733, "question_id": 47378941, "link": "https://stackoverflow.com/questions/47378941/cabal-update-fails-with-unix-package-configure-error/48469733#48469733", "title": "Cabal update fails with unix package configure error", "body": "<p>You can install the <code>cabal-install</code> binary for linux from the cabal homepage as well: <a href=\"https://www.haskell.org/cabal/download.html\" rel=\"nofollow noreferrer\">https://www.haskell.org/cabal/download.html</a></p>\n"}], "owner": {"reputation": 311, "user_id": 1724641, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a886499d7a6736b5c6cb548459ec8cce?s=128&d=identicon&r=PG", "display_name": "user1724641", "link": "https://stackoverflow.com/users/1724641/user1724641"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517001786, "creation_date": 1511107678, "last_edit_date": 1511116982, "question_id": 47378941, "link": "https://stackoverflow.com/questions/47378941/cabal-update-fails-with-unix-package-configure-error", "title": "Cabal update fails with unix package configure error", "body": "<p>I have a very old Cabal (1.16.0) installed from my distro's repo (Linux Mint). Today, I tried updating it and got:</p>\n\n<pre><code>cabal install cabal-install -v3\n...\nunix-2.7.2.2 failed during the configure step. The exception was:\nExitFailure 1\nzlib-0.6.1.2 failed during the building phase. The exception was:\nExitFailure 1\n</code></pre>\n\n<p>I also see</p>\n\n<pre><code>checking for suffix of executables... \nchecking whether we are cross compiling... configure: error: in `/tmp/unix-2.7.2.2-2138/unix-2.7.2.2':\nconfigure: error: cannot run C compiled programs.\nIf you meant to cross compile, use `--host'.\nSee `config.log' for more details\nsh returned ExitFailure 1\n</code></pre>\n\n<p>After checking the config.log, I see some errors but I am not sure they are related and the configuration failed on them:</p>\n\n<pre><code>Thread model: posix\ngcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.3) \nconfigure:2738: $? = 0\nconfigure:2727: gcc -V &gt;&amp;5\ngcc: error: unrecognized command line option '-V'\ngcc: fatal error: no input files\ncompilation terminated.\nconfigure:2738: $? = 4\nconfigure:2727: gcc -qversion &gt;&amp;5\ngcc: error: unrecognized command line option '-qversion'\ngcc: fatal error: no input files\ncompilation terminated.\nconfigure:2738: $? = 4\nconfigure:2758: checking whether the C compiler works\nconfigure:2780: gcc -Wl,--hash-size=31 -Wl,--reduce-memory-overheads   conftest.c  &gt;&amp;5\nconfigure:2784: $? = 0\nconfigure:2832: result: yes\nconfigure:2835: checking for C compiler default output file name\nconfigure:2837: result: a.out\nconfigure:2843: checking for suffix of executables\nconfigure:2850: gcc -o conftest -Wl,--hash-size=31 -Wl,--reduce-memory-overheads   conftest.c  &gt;&amp;5\nconfigure:2854: $? = 0\nconfigure:2876: result: \nconfigure:2898: checking whether we are cross compiling\nconfigure:2906: gcc -o conftest -Wl,--hash-size=31 -Wl,--reduce-memory-overheads   conftest.c  &gt;&amp;5\n</code></pre>\n\n<p>This is weird (I tried running the gcc.. command and it was also fine). Any help with this error is welcome.</p>\n"}, {"tags": ["haskell", "ghc", "c-minus-minus"], "comments": [{"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1511106593, "post_id": 47378665, "comment_id": 81709649, "body": "Can&#39;t GHC compile cmm programs?"}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1511106986, "post_id": 47378665, "comment_id": 81709797, "body": "Does <a href=\"https://ghc.haskell.org/trac/ghc/wiki/Commentary/Rts/Cmm\" rel=\"nofollow noreferrer\">this</a> help?"}, {"owner": {"reputation": 411, "user_id": 7235699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/x7sjr.jpg?s=128&g=1", "display_name": "user7235699", "link": "https://stackoverflow.com/users/7235699/user7235699"}, "reply_to_user": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1511113162, "post_id": 47378665, "comment_id": 81712043, "body": "@arrowd I have made an edit based on your comment."}, {"owner": {"reputation": 411, "user_id": 7235699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/x7sjr.jpg?s=128&g=1", "display_name": "user7235699", "link": "https://stackoverflow.com/users/7235699/user7235699"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1511113500, "post_id": 47378665, "comment_id": 81712171, "body": "@HTNW I had briefly skimmed it and some of its links before. However, your comment is certainly helpful, as I need to take this link more seriously."}], "owner": {"reputation": 411, "user_id": 7235699, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/x7sjr.jpg?s=128&g=1", "display_name": "user7235699", "link": "https://stackoverflow.com/users/7235699/user7235699"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 0, "answer_count": 0, "score": 7, "last_activity_date": 1511113020, "creation_date": 1511106067, "last_edit_date": 1511113020, "question_id": 47378665, "link": "https://stackoverflow.com/questions/47378665/cminusminus-x86-64-compiler", "title": "cminusminus x86_64 compiler", "body": "<p>I am working on a project which involves doing Program Analysis on Haskell. I thought that it will be good idea to implement Program Analysis on Cminusminus (C--) level. \nI know that, using ghc, Haskell is first compiled to core then to stg and then cmm. The generated cmm is then converted to executable. </p>\n\n<p>In order to properly understand and work on C--, I need a cminusminus (C--) compiler. However, according to my information, the compilers which compile to C-- are long discontinued and does not compile to x86_64 (e.g QuickC--). Am I missing something? Is there a C-- compiler which compiles to x64?</p>\n\n<p>On a side note, has there been further work on Cminusminus after 2008-09? Is there a Cminusminus community?</p>\n\n<p><strong>Edit 1</strong>: According to <a href=\"https://ghc.haskell.org/trac/ghc/wiki/Commentary/Compiler/CmmType#CompilingCmmwithGHC\" rel=\"nofollow noreferrer\">this</a> GHC can compile very basic cmm (cmm is a ghc's flavor of c--, which has some differences with c--, however according to my project's needs I should be more concerned with cmm) files. Moreover, the -ddump-cmm contains many items which are not parseable by ghc.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 1, "creation_date": 1511103348, "post_id": 47378222, "comment_id": 81708522, "body": "What do you mean by &#39;correct&#39; it?"}, {"owner": {"reputation": 3061, "user_id": 1905022, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f743dcdd53e216313cdb74f66cbb4c3f?s=128&d=identicon&r=PG", "display_name": "Zhe Hu", "link": "https://stackoverflow.com/users/1905022/zhe-hu"}, "reply_to_user": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 0, "creation_date": 1511103487, "post_id": 47378222, "comment_id": 81708580, "body": "Not correct the compiler, but the source code. For example <code>(1,2,3)::(Int, Int, Int)</code>. Of course, not knowing why the error message, it&#39;s not a valid &quot;correction&quot; at all."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511103548, "post_id": 47378222, "comment_id": 81708597, "body": "Why do you think the source code needs to be corrected?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 4, "creation_date": 1511106675, "post_id": 47378222, "comment_id": 81709672, "body": "<code>length</code> isn&#39;t really useful for tuples, because the type already tells you how many elements are present."}], "answers": [{"tags": [], "owner": {"reputation": 3321, "user_id": 468820, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d53b228cd79135e41556fdf16b98729a?s=128&d=identicon&r=PG", "display_name": "Andrei Bozantan", "link": "https://stackoverflow.com/users/468820/andrei-bozantan"}, "is_accepted": false, "score": 0, "last_activity_date": 1511103580, "creation_date": 1511103580, "answer_id": 47378280, "question_id": 47378222, "link": "https://stackoverflow.com/questions/47378222/haskell-length-function-error-message/47378280#47378280", "title": "Haskell length function error message", "body": "<p>The idea behind this is that tuples with 2 elements implement the <code>Foldable</code> typeclass, but higher order tuples don't implement it.</p>\n"}, {"tags": [], "owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "is_accepted": true, "score": 3, "last_activity_date": 1511103851, "creation_date": 1511103851, "answer_id": 47378334, "question_id": 47378222, "link": "https://stackoverflow.com/questions/47378222/haskell-length-function-error-message/47378334#47378334", "title": "Haskell length function error message", "body": "<p>The type of <code>length</code> is:</p>\n\n<pre><code>Foldable t =&gt; t a -&gt; Int\n</code></pre>\n\n<p>which you could read as returning the number of <code>a</code>s within some collection of <code>a</code>s. There is a <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/src/Data.Foldable.html#line-311\" rel=\"nofollow noreferrer\"><code>Foldable</code> instance for pairs</a>:</p>\n\n<pre><code>instance Foldable ((,) a) where\n    foldMap f (_, y) = f y\n\n    foldr f z (_, y) = f y z\n</code></pre>\n\n<p>which acts on the second element of the pair, which you can see with <code>toList</code>:</p>\n\n<pre><code>toList (1,2)\n&gt; [2]\n</code></pre>\n\n<p>Since there is no <code>Foldable</code> instance for larger tuples, you receive an error when trying to evaluate <code>length (1,2,3)</code>.</p>\n"}], "owner": {"reputation": 3061, "user_id": 1905022, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f743dcdd53e216313cdb74f66cbb4c3f?s=128&d=identicon&r=PG", "display_name": "Zhe Hu", "link": "https://stackoverflow.com/users/1905022/zhe-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1511105113, "accepted_answer_id": 47378334, "answer_count": 2, "score": 1, "last_activity_date": 1511103851, "creation_date": 1511103236, "question_id": 47378222, "link": "https://stackoverflow.com/questions/47378222/haskell-length-function-error-message", "closed_reason": "Duplicate", "title": "Haskell length function error message", "body": "<p>As sort of \"Wat\" for Haskell, it's pointed out at the end of <a href=\"http://profsjt.blogspot.co.il/2017/10/is-haskell-right-language-for-teaching.html\" rel=\"nofollow noreferrer\">haskell for teaching</a> that</p>\n\n<pre><code>length (1,2)\n\n1\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>length (1,2,3)\n\n\n&lt;loads of error messages&gt;\n</code></pre>\n\n<p>The questions is why? And how to correct this?</p>\n"}, {"tags": ["haskell", "nix", "nixos"], "answers": [{"tags": [], "owner": {"reputation": 4232, "user_id": 428586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yHNYS.jpg?s=128&g=1", "display_name": "Robert Hensing", "link": "https://stackoverflow.com/users/428586/robert-hensing"}, "is_accepted": true, "score": 6, "last_activity_date": 1511105594, "creation_date": 1511105594, "answer_id": 47378588, "question_id": 47377748, "link": "https://stackoverflow.com/questions/47377748/how-can-i-install-a-haskell-library-to-be-accessible-via-ghci-with-nixos/47378588#47378588", "title": "How can I install a Haskell library to be accessible via GHCi with Nixos?", "body": "<p>This works differently on NixOS because of purity. NixOS' GHC will only look at its own immutable installation directory and the packages that have been installed by the user with <code>cabal install</code>.</p>\n\n<p>What you can do is install into your user profile a GHC wrapper that supplies a nice set of packages when you run <code>ghci</code>.</p>\n\n<p>Create a file <code>my-ghc.nix</code>:</p>\n\n<pre><code>(import &lt;nixpkgs&gt; {}).haskellPackages.ghcWithPackages (hpkgs: with hpkgs; [\n    lens\n    aeson\n    turtle\n])\n</code></pre>\n\n<p>Uninstall your previous attempt, to avoid name collisions:</p>\n\n<pre><code>nix-env -e ghc turtle\n</code></pre>\n\n<p>Install the wrapped GHC:</p>\n\n<pre><code>nix-env -if my-ghc.nix\n</code></pre>\n\n<p>You may edit the file in the future and re-run that command.</p>\n\n<p>When I am working on a project, I prefer to use <code>cabal2nix</code> and <code>nix-shell</code>. (For an introduction, see <a href=\"https://ocharles.org.uk/blog/posts/2014-02-04-how-i-develop-with-nixos.html\" rel=\"noreferrer\">Oliver Charles' blog post</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 19307, "user_id": 1663462, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c30e0fa0f3a065c038c633a95066d299?s=128&d=identicon&r=PG", "display_name": "Chris Stryczynski", "link": "https://stackoverflow.com/users/1663462/chris-stryczynski"}, "is_accepted": false, "score": 1, "last_activity_date": 1575757184, "last_edit_date": 1575757184, "creation_date": 1566067547, "answer_id": 57539026, "question_id": 47377748, "link": "https://stackoverflow.com/questions/47377748/how-can-i-install-a-haskell-library-to-be-accessible-via-ghci-with-nixos/57539026#57539026", "title": "How can I install a Haskell library to be accessible via GHCi with Nixos?", "body": "<p>As an alternative Robert's answer, one can use a <code>nix-shell</code> environment by creating a <code>shell.nix</code> file with contents of: </p>\n\n<pre><code>{ pkgs ? import &lt;nixpkgs&gt; {} }:\nlet myGhc = pkgs.haskellPackages.ghcWithPackages (hpkgs: with hpkgs; [\n      turtle\n    ]);\nin\npkgs.mkShell {\n  buildInputs = [ myGhc ];\n}\n</code></pre>\n\n<p>And entering this environment with <code>nix-shell</code>.</p>\n\n<p>Alternatively this single command <code>nix-shell -p \"haskellPackages.ghcWithPackages (pkgs: [pkgs.turtle])\"</code>. </p>\n"}], "owner": {"reputation": 19307, "user_id": 1663462, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c30e0fa0f3a065c038c633a95066d299?s=128&d=identicon&r=PG", "display_name": "Chris Stryczynski", "link": "https://stackoverflow.com/users/1663462/chris-stryczynski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 4, "accepted_answer_id": 47378588, "answer_count": 2, "score": 8, "last_activity_date": 1575757184, "creation_date": 1511100332, "last_edit_date": 1511111734, "question_id": 47377748, "link": "https://stackoverflow.com/questions/47377748/how-can-i-install-a-haskell-library-to-be-accessible-via-ghci-with-nixos", "title": "How can I install a Haskell library to be accessible via GHCi with Nixos?", "body": "<p>I've managed to install ghc with <code>nix-env -i ghc</code>.</p>\n\n<p>I'd like to install a Haskell library now, how should this be done? For example the <code>turtle</code> (<a href=\"https://hackage.haskell.org/package/turtle\" rel=\"noreferrer\">https://hackage.haskell.org/package/turtle</a>) library.</p>\n\n<p>I've run <code>nix-env -f \"&lt;nixpkgs&gt;\" -iA haskellPackages.turtle</code>, however running <code>ghci</code> and <code>import Turtle</code> fails:</p>\n\n<pre><code>Prelude&gt; import Turtle\n\n&lt;no location info&gt;: error:\n    Could not find module \u2018Turtle\u2019\n    It is not a module in the current program, or in any known package.\n</code></pre>\n\n<p>Output of <code>ghc-pkg list</code>:</p>\n\n<pre><code>/nix/store/fvf278s3lqsjv488ahhdi8jx6i0qzsr9-ghc-8.0.2/lib/ghc-8.0.2/package.conf.d      \nCabal-1.24.2.0                          \narray-0.5.1.1                           \nbase-4.9.1.0                            \nbinary-0.8.3.0                          \nbytestring-0.10.8.1                     \ncontainers-0.5.7.1                      \ndeepseq-1.4.2.0                         \ndirectory-1.3.0.0                       \nfilepath-1.4.1.1                        \nghc-8.0.2                               \nghc-boot-8.0.2                          \nghc-boot-th-8.0.2                       \nghc-prim-0.5.0.0                        \nghci-8.0.2                              \nhaskeline-0.7.3.0                       \nhoopl-3.10.2.1                          \nhpc-0.6.0.3                             \ninteger-gmp-1.0.0.1                     \npretty-1.1.3.3                          \nprocess-1.4.3.0                         \nrts-1.0                                 \ntemplate-haskell-2.11.1.0               \nterminfo-0.4.0.2                        \ntime-1.6.0.1                            \ntransformers-0.5.2.0                    \nunix-2.7.2.1                            \nxhtml-3000.2.1\n</code></pre>\n"}, {"tags": ["haskell", "quickcheck"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1511121908, "post_id": 47377108, "comment_id": 81715283, "body": "free theorem says you will just need to check identity law. is that possible for you to generate parser instance and see if identity law holds? i don&#39;t really know checkers, though."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1511122158, "post_id": 47377108, "comment_id": 81715381, "body": "The implementation of <code>functor</code> ensures that the <i>values</i> of <code>a</code>, <code>b</code>, and <code>c</code> are irrelevant; only their <i>types</i> matter (perhaps it should take a proxy argument instead, but this is likely more convenient in most cases). But I&#39;m not sure how you&#39;re supposed to choose those types."}], "owner": {"reputation": 1496, "user_id": 7350814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd7e1bdad619c54ab51e05ff9cfaa199?s=128&d=identicon&r=PG&f=1", "display_name": "Jogger", "link": "https://stackoverflow.com/users/7350814/jogger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1511199343, "creation_date": 1511096251, "last_edit_date": 1511199343, "question_id": 47377108, "link": "https://stackoverflow.com/questions/47377108/how-to-test-the-functor-laws-with-the-checkers-library", "title": "How to test the Functor laws with the checkers library", "body": "<p>How do I use the <a href=\"http://hackage.haskell.org/package/checkers\" rel=\"nofollow noreferrer\">checkers</a> library to test the Functor laws of a simple Parser? </p>\n\n<pre><code>import Test.QuickCheck\nimport Test.QuickCheck.Checkers\nimport Test.QuickCheck.Classes\nimport qualified Data.ByteString as BS\n\ntype Index = Int\n\nnewtype Parser a = Parser (BS.ByteString -&gt; Index -&gt; (a, Index))\n\nrunParser :: Parser a -&gt; BS.ByteString -&gt; Index -&gt; (a, Index)\nrunParser (Parser p) = p\n\ninstance Functor Parser where\n    f `fmap` p = Parser $  \\bs i -&gt; \n      let (a, ix) = runParser p bs i\n      in (f a, ix)\n</code></pre>\n\n<p>I think I have to use the <em>functor</em> function from <a href=\"http://hackage.haskell.org/package/checkers-0.4.9.5/docs/Test-QuickCheck-Classes.html\" rel=\"nofollow noreferrer\">Test.QuickCheck.Classes</a></p>\n\n<p>The type is:</p>\n\n<pre><code>functor :: forall m a b c. (Functor m, Arbitrary a, Arbitrary b, Arbitrary c, \n           CoArbitrary a, CoArbitrary b, Show (m a), Arbitrary (m a), EqProp (m a), EqProp (m c)) \n           =&gt; m (a, b, c) -&gt; TestBatch\n</code></pre>\n\n<p>Now <em>m</em> should probably be my Functor <em>Parser</em>, so I need something like</p>\n\n<pre><code>main :: IO ()\nmain = = quickBatch (functor (Parser (a, b, c))\n</code></pre>\n\n<p>But what do I use for <code>(a, b, c)</code> ?</p>\n\n<p>Note: I know a quick QuickTest test is not a proof and I have read the discussion in \n<a href=\"https://stackoverflow.com/questions/36009335/how-do-i-test-this-applicative-instance-with-checkers-no-instance-for-coarbitr\">How do I test this applicative instance with checkers? (No instance for CoArbitrary (Validation e0 [Char]))</a> .\nHowever if the quick test fails, I know that my Functor instance is broken...</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I made a little progress: I can write</p>\n\n<pre><code>main :: IO ()\nmain = quickBatch $ functor (undefined :: Parser (Int, String, Char))\n</code></pre>\n\n<p>This gives an error: <em>No instance for (Show (Parser Int))</em></p>\n\n<p>In the type signature of <em>functor</em>, there is no <em>Read</em> instance mentioned,\nso I can write</p>\n\n<pre><code>instance Show (Parser a) where\n   show (Parser a) = \"Parsers cannot be printed\"\n</code></pre>\n\n<p>This the gives a new error:</p>\n\n<pre><code>\u2022 No instance for (Arbitrary (Parser Int))\n    arising from a use of \u2018functor\u2019\n\u2022 In the second argument of \u2018($)\u2019, namely\n</code></pre>\n\n<p>and I guess this is a tougher problem...</p>\n"}, {"tags": ["haskell", "monads", "conduit"], "answers": [{"tags": [], "owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "is_accepted": true, "score": 3, "last_activity_date": 1511090185, "creation_date": 1511090185, "answer_id": 47376208, "question_id": 47376039, "link": "https://stackoverflow.com/questions/47376039/monadic-conduit-map-splits-the-stream/47376208#47376208", "title": "Monadic conduit map splits the stream", "body": "<p>This has to do with the types at play here. <code>mapC</code> expects a function of type <code>a -&gt; b</code>, whereas <code>mapMC</code> expects <code>a -&gt; m b</code> for some instance of <code>Monad</code> <code>m</code>. In both cases, you're using <code>id</code> as that function, and therefore whatever input you're giving is being treated as <code>b</code> in the first example, and <code>m b</code> in the second. Since the value you're yielding is of type <code>[Char]</code>, this breaks down to:</p>\n\n<ul>\n<li>The first example being a pure transformation on a list of characters</li>\n<li>The second example being a monadic transformation on a single character, inside the list monad</li>\n</ul>\n\n<p>If you want the second example to behave the same as the first, replace <code>id</code> with <code>pure</code> (or <code>return</code>).</p>\n"}], "owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 47376208, "answer_count": 1, "score": 2, "last_activity_date": 1511090185, "creation_date": 1511088979, "question_id": 47376039, "link": "https://stackoverflow.com/questions/47376039/monadic-conduit-map-splits-the-stream", "title": "Monadic conduit map splits the stream", "body": "<p>I'm playing around a bit trying to understand <code>conduit</code>. Running</p>\n\n<pre><code>runConduit $ yield \"abc\" .| mapC id .| sinkList\n</code></pre>\n\n<p>gives <code>[\"abc\"]</code>, while running</p>\n\n<pre><code>runConduit $ yield \"abc\" .| mapMC id .| sinkList\n</code></pre>\n\n<p>gives <code>[\"a\", \"b\", \"c\"]</code>.</p>\n\n<p>Why does the monadic version split up the stream? </p>\n"}, {"tags": ["haskell", "testing", "haskell-stack"], "comments": [{"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 1, "creation_date": 1511097310, "post_id": 47374082, "comment_id": 81706567, "body": "I never used <code>tasty</code>. But <code>stack test</code> works fine with <code>Hspec</code>. Maybe running test with <code>--verbose</code> flag could help in someway."}, {"owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "reply_to_user": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 0, "creation_date": 1511112731, "post_id": 47374082, "comment_id": 81711856, "body": "@palik As far as I can tell there are no hints in the <code>-v</code> output; I included it in the OP"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 1, "creation_date": 1511118110, "post_id": 47374082, "comment_id": 81713888, "body": "I could reproduce the issue. But there is no issue by running the tests without <code>{-# OPTIONS_GHC -F -pgmF tasty-discover #-}</code> and with <code>defaultMain</code> instead. In <code>stack test</code> output appears the line with &quot;Compiling XYZ&quot;. XYZ is the module, that couldn&#39;t be discovered."}, {"owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "reply_to_user": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 0, "creation_date": 1511140551, "post_id": 47374082, "comment_id": 81720342, "body": "@palik By using defaultMain , do you mean listing the tests manually (i.e. with <code>testGroup</code>, <code>testProperty</code> etc), or are they still discovered automatically?"}, {"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 0, "creation_date": 1511156911, "post_id": 47374082, "comment_id": 81724427, "body": "by using defaultMain I meant manually setup."}], "answers": [{"tags": [], "owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "is_accepted": false, "score": 2, "last_activity_date": 1511155143, "creation_date": 1511155143, "answer_id": 47385478, "question_id": 47374082, "link": "https://stackoverflow.com/questions/47374082/tasty-discover-with-stack-run-0-tests/47385478#47385478", "title": "tasty-discover with stack run 0 tests", "body": "<p>The closest I've gotten to a solution is to move from <code>tasty-discover</code> to <code>tasty-th</code>.</p>\n\n<p>The full automatic discovery still doesn't work, but using the TemplateHaskell through <code>$(testGroupGenerator)</code> the boilerplate at least scales with the number of test files rather than the number of tests. </p>\n"}], "owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1517001809, "creation_date": 1511070327, "last_edit_date": 1517001809, "question_id": 47374082, "link": "https://stackoverflow.com/questions/47374082/tasty-discover-with-stack-run-0-tests", "title": "tasty-discover with stack run 0 tests", "body": "<p>I've just moved from using cabal directly to stack, but I'm having some problems with the test-suite. The library and executable works fine but <code>stack test</code>  gives me </p>\n\n<pre><code>hml-0.1.0.0: test (suite: HML-test) \nAll 0 tests passed (0.00s)\n</code></pre>\n\n<p>I.e. no tests were run. When I run the tests with cabal directly they work fine. I'm using <code>tasty</code> with <code>tasty-discover</code>. In hml.cabal the suite looks like this:</p>\n\n<pre><code>test-suite HML-test\n  main-is:             Driver.hs\n  hs-source-dirs:      test\n  default-language:    Haskell2010\n  ghc-options:         -Wall\n  other-modules:       HML.Types.Test.PosInt\n                       (...etc...)\n  build-depends:       base &gt;= 4.9\n                       (... etc...)\n</code></pre>\n\n<p>The driver test/Driver.hs for <code>tasty-discover</code> looks like this:</p>\n\n<pre><code>{-# OPTIONS_GHC -F -pgmF tasty-discover -optF --tree-display #-}\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>EDIT:</p>\n\n<p>When compiling with cabal I find the executable <code>HML-test</code> in <code>dist/build/HML-test</code>, and running it directly runs all the tests. </p>\n\n<p>When compiling with stack I find it at <code>.stack-work/x86_64-linux/Cabal-1.24.2.0/build/HML-test</code>, and running it directly still runs 0 tests. </p>\n\n<p>The full output of <code>stack - v test</code> is</p>\n\n<blockquote>\n  <p>Version 1.5.1, Git revision 600c1f01435a10d127938709556c1682ecfd694e (4861 commits) x86_64 hpack-0.17.1 2017-11-19 12:25:05.759671: [debug] Checking for project config at: /home/cabox/workspace/hml/stack.yaml @(Stack/Config.hs:974:9) 2017-11-19 12:25:05.759980: [debug] Loading project config file stack.yaml @(Stack/Config.hs:999:13) 2017-11-19 12:25:05.762372: [debug] Trying to decode /home/cabox/.stack/build-plan-cache/x86_64-linux/lts-9.13.cache @(Data/Store/VersionTagged.hs:72:5) 2017-11-19 12:25:05.788669: [debug] Success decoding /home/cabox/.stack/build-plan-cache/x86_64-linux/lts-9.13.cache @(Data/Store/VersionTagged.hs:76:13) 2017-11-19 12:25:05.789952: [debug] Run process: /sbin/ldconfig -p @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.796009: [debug] Process finished in [92m5ms[0m: /sbin/ldconfig -p @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.796327: [debug] Run process: /usr/bin/gcc -v @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.799566: [debug] Process finished in [92m3ms[0m: /usr/bin/gcc -v @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.799710: [debug] PIE enabled @(Stack/Setup.hs:583:17) 2017-11-19 12:25:05.799912: [debug] Found shared library libtinfo.so.5 in 'ldconfig -p' output @(Stack/Setup.hs:559:29) 2017-11-19 12:25:05.800147: [debug] Did not find shared library libtinfo.so.6 @(Stack/Setup.hs:573:38) 2017-11-19 12:25:05.800285: [debug] Did not find shared library libncursesw.so.6 @(Stack/Setup.hs:573:38) 2017-11-19 12:25:05.800375: [debug] Found shared library libgmp.so.10 in 'ldconfig -p' output @(Stack/Setup.hs:559:29) 2017-11-19 12:25:05.800478: [debug] Did not find shared library libgmp.so.3 @(Stack/Setup.hs:573:38) 2017-11-19 12:25:05.800560: [debug] Using standard GHC build @(Stack/Setup.hs:606:9) 2017-11-19 12:25:05.801346: [debug] Asking GHC for its version @(Stack/Setup/Installed.hs:103:13) 2017-11-19 12:25:05.801592: [debug] Run process: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc --numeric-version @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.802203: [debug] Getting Cabal package version @(Stack/GhcPkg.hs:189:5) 2017-11-19 12:25:05.802507: [debug] Getting global package database location @(Stack/GhcPkg.hs:55:5) 2017-11-19 12:25:05.808193: [debug] Run process: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --no-user-package-db field --simple-output Cabal version @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.808687: [debug] Run process: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --no-user-package-db list --global @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.855073: [debug] Process finished in [92m46ms[0m: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --no-user-package-db list --global @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.857161: [debug] Process finished in [92m48ms[0m: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --no-user-package-db field --simple-output Cabal version @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.869048: [debug] Process finished in [92m67ms[0m: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc --numeric-version @(System/Process/Read.hs:306:3) 2017-11-19 12:25:05.871256: [debug] Resolving package entries @(Stack/Setup.hs:260:5) 2017-11-19 12:25:05.897711: [debug] Starting to execute command inside EnvConfig @(Stack/Runners.hs:175:18) 2017-11-19 12:25:05.897916: [debug] Parsing the cabal files of the local packages @(Stack/Build/Source.hs:328:5) 2017-11-19 12:25:05.905436: [debug] Parsing the targets @(Stack/Build/Source.hs:265:5) 2017-11-19 12:25:05.917919: [debug] Start: getPackageFiles /home/cabox/workspace/hml/hml.cabal @(Stack/Package.hs:259:21) 2017-11-19 12:25:06.009229: [debug] Finished in 91ms: getPackageFiles /home/cabox/workspace/hml/hml.cabal @(Stack/Package.hs:259:21) 2017-11-19 12:25:06.010508: [debug] Finding out which packages are already installed @(Stack/Build/Installed.hs:69:5) 2017-11-19 12:25:06.010877: [debug] Run process: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --global --no-user-package-db dump --expand-pkgroot @(System/Process/Read.hs:306:3) 2017-11-19 12:25:06.062451: [debug] Process finished in [92m51ms[0m: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --global --no-user-package-db dump --expand-pkgroot @(System/Process/Read.hs:306:3) 2017-11-19 12:25:06.086280: [debug] Ignoring package haskeline due to wanting version 0.7.4.0 instead of 0.7.3.0 @(Stack/Build/Installed.hs:199:5) 2017-11-19 12:25:06.086478: [debug] Ignoring package terminfo due to wanting version 0.4.1.0 instead of 0.4.0.2 @(Stack/Build/Installed.hs:199:5) 2017-11-19 12:25:06.086581: [debug] Ignoring package xhtml due to wanting version 3000.2.2 instead of 3000.2.1 @(Stack/Build/Installed.hs:199:5) 2017-11-19 12:25:06.086945: [debug] Run process: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --user --no-user-package-db --package-db /home/cabox/.stack/snapshots/x86_64-linux/lts-9.13/8.0.2/pkgdb dump --expand-pkgroot @(System/Process/Read.hs:306:3) 2017-11-19 12:25:06.209627: [debug] Process finished in [92m122ms[0m: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --user --no-user-package-db --package-db /home/cabox/.stack/snapshots/x86_64-linux/lts-9.13/8.0.2/pkgdb dump --expand-pkgroot @(System/Process/Read.hs:306:3) 2017-11-19 12:25:06.210994: [debug] Run process: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --user --no-user-package-db --package-db /home/cabox/workspace/hml/.stack-work/install/x86_64-linux/lts-9.13/8.0.2/pkgdb dump --expand-pkgroot @(System/Process/Read.hs:306:3) 2017-11-19 12:25:06.255376: [debug] Process finished in [92m43ms[0m: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --user --no-user-package-db --package-db /home/cabox/workspace/hml/.stack-work/install/x86_64-linux/lts-9.13/8.0.2/pkgdb dump --expand-pkgroot @(System/Process/Read.hs:306:3) 2017-11-19 12:25:06.256147: [debug] Constructing the build plan @(Stack/Build/ConstructPlan.hs:188:5) 2017-11-19 12:25:06.270612: [debug] Checking if we are going to build multiple executables with the same name @(Stack/Build.hs:210:5) 2017-11-19 12:25:06.271198: [debug] Executing the build plan @(Stack/Build/Execute.hs:478:5) 2017-11-19 12:25:06.282278: [debug] Getting global package database location @(Stack/GhcPkg.hs:55:5) 2017-11-19 12:25:06.282498: [debug] Run process: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --no-user-package-db list --global @(System/Process/Read.hs:306:3) 2017-11-19 12:25:06.319127: [debug] Process finished in [92m36ms[0m: /home/cabox/.stack/programs/x86_64-linux/ghc-8.0.2/bin/ghc-pkg --no-user-package-db list --global @(System/Process/Read.hs:306:3) 2017-11-19 12:25:06.320228: [info] hml-0.1.0.0: test (suite: HML-test) @(Stack/Build/Execute.hs:830:23) 2017-11-19 12:25:06.321702: [debug] Creating process: /home/cabox/workspace/hml/.stack-work/dist/x86_64-linux/Cabal-1.24.2.0/build/HML-test/HML-test @(System/Process/Run.hs:139:5) 2017-11-19 12:25:06.344988: [info] @(Stack/Build/Execute.hs:1587:52)\n  All 0 tests passed (0.00s)</p>\n</blockquote>\n\n<p>EDIT2: If I organize <code>tasty</code> manually (i.e. refrain from using, <code>tasty-discover</code>) it works. This, however would lead to a lot of work and a lot of boilerplate.. </p>\n"}, {"tags": ["html", "haskell", "url-redirection", "relative-path", "hakyll"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1522115833, "post_id": 47372784, "comment_id": 86010640, "body": "Shouldn&#39;t <code>website.com&#47;en</code> redirect to <code>website.com&#47;en&#47;index.html</code>, from where that relative link does indeed work?"}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1522248370, "post_id": 47372784, "comment_id": 86082014, "body": "@Bergi This is exactly what I&#39;ve asked for: <code>When I go to website.com&#47;en I want to be redirected to website.com&#47;en&#47;index.html</code>. When I need to go to <code>website.com&#47;en</code> from any link on my I can manually set this link to <code>website.com&#47;en&#47;index.html</code> but it&#39;s still possible in Hakyll (as I can see) to enter manually <code>website.com&#47;en</code> directly in browser address bar and the resulting link will look like <code>website.com&#47;en&#47;</code>. I don&#39;t know to automatically redirect this to <code>index.html</code>."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1522249263, "post_id": 47372784, "comment_id": 86082741, "body": "Are you using an Apache webserver? With <a href=\"http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash\" rel=\"nofollow noreferrer\"><code>DirectorySlash On</code></a> and <a href=\"http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryindex\" rel=\"nofollow noreferrer\"><code>DirectoryIndex index.html</code></a> (both of which are the defaults), the <code>website.com&#47;en</code> should be 301-redirected to <code>website.com&#47;en&#47;</code> which in turn will display the content of the index.html file, and relative links on that url do work for me."}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1522406414, "post_id": 47372784, "comment_id": 86153196, "body": "@Bergi Hmm, I&#39;m not aware of DevOps part of web-server deployment. But as I see now <code>website.com&#47;en</code> redirects to <code>website.com&#47;en&#47;</code> indeed! Thanks a lot!"}, {"owner": {"reputation": 514, "user_id": 3502803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5d86b161cac47f5108ca18442f0d3e2?s=128&d=identicon&r=PG&f=1", "display_name": "PalDev", "link": "https://stackoverflow.com/users/3502803/paldev"}, "edited": false, "score": 0, "creation_date": 1523221176, "post_id": 47372784, "comment_id": 86458850, "body": "html redirects are not good practice, why won&#39;t you use .htaccess or the backend redirect (say PHP)?"}], "owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1511284640, "creation_date": 1511053930, "last_edit_date": 1511284640, "question_id": 47372784, "link": "https://stackoverflow.com/questions/47372784/automatically-redirect-from-folder-to-folder-index-html-with-hakyll-or-ano", "title": "Automatically redirect from &#39;/folder&#39; to &#39;/folder/index.html&#39; with Hakyll or another issue with relative links", "body": "<p>I want to implement static HTML website with multiple languages using Hakyll framework. I didn't come up with better solution than just put default language under <code>website.com</code> route and any other custom language at <code>website.com/en</code> route. Because I'm using static HTML and having multiple languages I should have multiple versions of every page, for example <code>about.html</code>. Such pages are generated automatically, so that's not a problem. But currently I have a problem with jumping those pages...</p>\n\n<p>I have such link in my <code>website.com/index.html</code>:</p>\n\n<pre><code>&lt;a href=about.html&gt;\n</code></pre>\n\n<p>When I open this link from <code>website.com/en</code> I want to jump to <code>website.com/en/about.html</code> instead of <code>website.com/about.html</code>. But in reality I'm jumping from <code>website.com/en</code> to <code>website.com/about.html</code>. If I instead jump from <code>website.com/en/index.html</code> I go to <code>website.com/en/about.html</code> as I want. So I'm inserested in one of two possible solutions:</p>\n\n<ol>\n<li>When I go to <code>website.com/en</code> I want to be redirected to <code>website.com/en/index.html</code>. I can see content of <code>index.html</code> from <code>website.com/en</code> but somehow I can't jump to relative link :(</li>\n<li>Replace <code>href=about.html</code> with something more smart so I can automatically go <code>folder/about.html</code> from any folder.</li>\n</ol>\n\n<p>Any help appreciated!</p>\n"}, {"tags": ["haskell", "monads", "monad-transformers"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 4, "creation_date": 1511048104, "post_id": 47372122, "comment_id": 81697104, "body": "You can do this in one pass using laziness - tie the knot using a map."}, {"owner": {"reputation": 197, "user_id": 633256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Motma.jpg?s=128&g=1", "display_name": "rossng", "link": "https://stackoverflow.com/users/633256/rossng"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1511048296, "post_id": 47372122, "comment_id": 81697145, "body": "@Alec can you point to me to any resources on this approach?"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1511048300, "post_id": 47372122, "comment_id": 81697146, "body": "<code>foldM :: (Foldable t, Monad m) =&gt; (b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b </code> looks closer to me: <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Control-Monad.html#v:foldM\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.10.0.0/docs/&hellip;</a>"}, {"owner": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "edited": false, "score": 1, "creation_date": 1511051845, "post_id": 47372122, "comment_id": 81697817, "body": "<a href=\"http://bobkonf.de/2016/breitner-monaden.html\" rel=\"nofollow noreferrer\">bobkonf.de/2016/breitner-monaden.html</a> is a resource, albeit in German. <a href=\"http://wall.org/~lewis/2013/10/15/asm-monad.html\" rel=\"nofollow noreferrer\">wall.org/~lewis/2013/10/15/asm-monad.html</a> is an English one."}, {"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 0, "creation_date": 1511094566, "post_id": 47372122, "comment_id": 81705766, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/40876135/haskell-labelling-items-in-recursive-function\">Haskell labelling items in recursive function</a>"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "edited": false, "score": 0, "creation_date": 1511196582, "post_id": 47372122, "comment_id": 81747202, "body": "@JoachimBreitner, that looks clever, general, and friendly to write, but a bit tricky to debug if something goes wrong. An alternative explicit approach would be to transform a stream of statements into a stream of instructions statefully, using a map from labels to addresses and a FIFO queue of non-label statements headed by a branch to an unknown label. Another option might be to play linker and keep track of branches that need to be patched up (map from unseen labels to branches that reference them). Not very pretty, but I imagine it might be more efficient in some contexts."}], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 633256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Motma.jpg?s=128&g=1", "display_name": "rossng", "link": "https://stackoverflow.com/users/633256/rossng"}, "is_accepted": false, "score": 1, "last_activity_date": 1511049492, "creation_date": 1511049492, "answer_id": 47372384, "question_id": 47372122, "link": "https://stackoverflow.com/questions/47372122/writing-an-assembler-in-haskell-mapm-with-state/47372384#47372384", "title": "Writing an assembler in Haskell - mapM with state?", "body": "<p>I've implemented a recursive solution that I'm sure is very inefficient. I'd still be interested to see the 'proper' way of doing this.</p>\n\n\n\n<pre class=\"lang-haskell prettyprint-override\"><code>replaceLabels :: [Statement] -&gt; Either String [I.Instruction]\nreplaceLabels [] = Right []\nreplaceLabels stmts@(s:ss) = replaceLabels' labels stmts 0\n    where labels = process stmts\n\nreplaceLabels' :: [(String, Int)] -&gt; [Statement] -&gt; Int -&gt; Either String [I.Instruction]\nreplaceLabels' _ [] _ = Right []\nreplaceLabels' labels (s:ss) addr = do\n                                instructions &lt;- stmtToInstruction addr labels s\n                                restInstructions &lt;- replaceLabels' labels ss (addr + length instructions)\n                                return (instructions ++ restInstructions)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1511056094, "post_id": 47372458, "comment_id": 81698496, "body": "You could also implement that <code>itraverse</code> using <code>zipWithM f [0..]</code>"}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 4, "last_activity_date": 1511050227, "creation_date": 1511050227, "answer_id": 47372458, "question_id": 47372122, "link": "https://stackoverflow.com/questions/47372122/writing-an-assembler-in-haskell-mapm-with-state/47372458#47372458", "title": "Writing an assembler in Haskell - mapM with state?", "body": "<p>You're right: the <code>StateT</code> monad transformer will do the trick:</p>\n\n<pre><code>imapM :: (Traversable t, Monad m)\n          =&gt; (Int -&gt; a -&gt; m b) -&gt; t a -&gt; m (t b)\nimapM f = flip runStateT 0 .\n  mapM (\\a -&gt;\n    do\n      count &lt;- get\n      put $! count + 1\n      f count a)\n</code></pre>\n\n<p>But writing the specialized version for lists might be better:</p>\n\n<pre><code>itraverse :: Applicative f\n          =&gt; (Int -&gt; a -&gt; f b) -&gt; [a] -&gt; f [b]\nitraverse f = go 0 where\n  go !_ [] = pure []\n  go !count (x:xs) = (:) &lt;$&gt; f count x &lt;*&gt; go (count + 1) xs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1511084826, "creation_date": 1511084826, "answer_id": 47375516, "question_id": 47372122, "link": "https://stackoverflow.com/questions/47372122/writing-an-assembler-in-haskell-mapm-with-state/47375516#47375516", "title": "Writing an assembler in Haskell - mapM with state?", "body": "<p>I would start by changing</p>\n\n<pre><code>stmtToInstruction :: Int -&gt; [(String, Int)] -&gt; Statement -&gt; Either String [I.Instruction]\n</code></pre>\n\n<p>into</p>\n\n<pre><code>stmtToInstruction :: [(String, Int)] -&gt; Statement -&gt; Either String (Int -&gt; [I.Instruction])\n</code></pre>\n\n<p>That is, moving the function that takes the address into the <code>Right</code> branch of the <code>Either</code>. The reason is that label reference errors seem to be independent of addresses, so it's better to handle reference errors first and then worry about the address stuff in isolation.</p>\n\n<p>This function resolves the references:</p>\n\n<pre><code>resolveRefs :: [(String,Int)] -&gt; [Statement] -&gt; Either String [Int -&gt; [Instruction]]\nresolveRefs environment = traverse (stmtToInstruction environment)\n</code></pre>\n\n<p><a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Data-Traversable.html#v:traverse\" rel=\"nofollow noreferrer\">(<code>traverse</code></a> is equivalent to <code>mapM</code> but it only requires an <code>Applicative</code> constraint. They are different functions merely for historical reasons.)</p>\n\n<p>Ok, after having handled the errors, lets now focus on the <code>[Int -&gt; [Instruction]]</code> list. It seems that we have to map over it from the left while carrying an accumulated address that we must supply to each function. The <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Data-List.html#v:mapAccumL\" rel=\"nofollow noreferrer\"><code>mapAccumL</code></a> function is perfect for this:</p>\n\n<pre><code>resolveAddrs ::  [Int -&gt; [Instruction]] -&gt; [Instruction]\nresolveAddrs funcs = mconcat . snd $ accumulate funcs\n    where\n    accumulate :: [Int -&gt; [Instruction]] -&gt; (Int,[[Instruction]])\n    accumulate = mapAccumL step 0\n    step address func = let is = func address in (address + length is,is)\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 633256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Motma.jpg?s=128&g=1", "display_name": "rossng", "link": "https://stackoverflow.com/users/633256/rossng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 2, "answer_count": 3, "score": 9, "last_activity_date": 1511084826, "creation_date": 1511047212, "question_id": 47372122, "link": "https://stackoverflow.com/questions/47372122/writing-an-assembler-in-haskell-mapm-with-state", "title": "Writing an assembler in Haskell - mapM with state?", "body": "<p>I'm writing a very simple two-pass assembler in Haskell and I've come across a scenario that I don't yet have the experience to solve. I think the solution is likely to involve monad transformers, which I don't really understand.</p>\n\n<p>The assembler parses the assembly code into a list of <code>Statement</code>s, which are either instructions or labels. Some <code>Statement</code>s may refer to labels. The assembler needs to convert the <code>Statement</code>s into <code>Instruction</code>s, which involves eliminating the labels and substituting the label references with an appropriate value.</p>\n\n<p>I have written the first pass of the assembler, which produces a <code>[(String, Int)]</code> representing a map from labels to addresses. I have also written the following function for translating a <code>Statement</code> into an <code>Instruction</code>:</p>\n\n\n\n<pre class=\"lang-haskell prettyprint-override\"><code>stmtToInstruction :: Int -&gt; [(String, Int)] -&gt; Statement -&gt; Either String [I.Instruction]\nstmtToInstruction addr labels stmt = case stmt of\n    ADD d s1 s2     -&gt; Right [I.ADD d s1 s2]\n    BEQL s1 s2 l    -&gt; case do label &lt;- find (\\e -&gt; fst e == l) labels\n                               let labelAddr = snd label\n                               let relativeAddr = I.ImmS $ fromIntegral (labelAddr - addr)\n                               return (I.BEQ s1 s2 relativeAddr) of\n                        Just i -&gt; Right [i]\n                        Nothing -&gt; Left $ \"Label \" ++ l ++ \" not defined\"\n    LABEL _         -&gt; Right []\n</code></pre>\n\n<p>I've omitted several cases for brevity, but you can see all the possible results here:</p>\n\n<ul>\n<li><code>ADD</code> always succeeds and produces an instruction</li>\n<li><code>BEQL</code> can either succeed or fail, depending on whether a label is found</li>\n<li><code>LABEL</code> always succeeds, even though it produces no actual instructions</li>\n</ul>\n\n<p>This works as expected. The problem I now have is writing this function:</p>\n\n<pre class=\"lang-haskell prettyprint-override\"><code>replaceLabels :: [Statement] -&gt; Either String [I.Instruction]\n</code></pre>\n\n<p><code>replaceLabels</code> takes a list of statements, and runs <code>stmtToInstruction</code> on each one. The <code>addr</code> argument to <code>stmtToInstruction</code> must be the length of the <code>[Instruction]</code> accumulated so far. The output may either be a <code>Left String</code>, if one of the label references was invalid, or a <code>Right [I.Instruction]</code>, if there were no errors.</p>\n\n<p><code>mapM :: Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]</code> gets us some of the way there, but provides no way to inject the current address into the <code>(a -&gt; m b)</code> function. How do I make this work?</p>\n"}, {"tags": ["haskell", "null", "maybe", "null-coalescing-operator"], "comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 2, "creation_date": 1511049632, "post_id": 47371950, "comment_id": 81697421, "body": "<a href=\"https://www.haskell.org/hoogle/?hoogle=Maybe+a+-%3E+Maybe+a+-%3E+Maybe+a\" rel=\"nofollow noreferrer\">Hoogle</a> is a great tool for finding this kind of thing."}], "answers": [{"comments": [{"owner": {"reputation": 14050, "user_id": 3772221, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xfx4l.png?s=128&g=1", "display_name": "m0meni", "link": "https://stackoverflow.com/users/3772221/m0meni"}, "edited": false, "score": 0, "creation_date": 1511047242, "post_id": 47372112, "comment_id": 81696926, "body": "This works, but I think you&#39;re right in that I should be clear that I want it done specifically in the way I specified above. I&#39;ll edit it and add an example I saw in F# too."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "reply_to_user": {"reputation": 14050, "user_id": 3772221, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xfx4l.png?s=128&g=1", "display_name": "m0meni", "link": "https://stackoverflow.com/users/3772221/m0meni"}, "edited": false, "score": 0, "creation_date": 1511047350, "post_id": 47372112, "comment_id": 81696950, "body": "@m0meni i don&#39;t program F# i am sorry. but i can show you how to do it with operators in haskell(but two operators)."}], "tags": [], "owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "is_accepted": false, "score": 3, "last_activity_date": 1511121183, "last_edit_date": 1511121183, "creation_date": 1511047139, "answer_id": 47372112, "question_id": 47371950, "link": "https://stackoverflow.com/questions/47371950/maybe-coalescing-operator/47372112#47372112", "title": "Maybe coalescing operator", "body": "<p>Do you mind writing it differently? </p>\n\n<pre><code>safeHead [] d = d\nsafeHead (h:_) _ = h\n</code></pre>\n\n<p>then</p>\n\n<pre><code>let x = safeHead (catMaybes [a, b, c]) 1\n</code></pre>\n\n<p>shall do what you want.</p>\n\n<p>If you want to do it in that way, it's doable, but two operators are required.</p>\n\n<pre><code>a@(Just _) ?? _ = a\n_ ?? b = b\n\n(Just e) ?: _ = e\n_ ?: d = d\n</code></pre>\n\n<p>defines the two operators you need, and they work:</p>\n\n<pre><code>Prelude&gt; let a = Nothing\nPrelude&gt; let b = Nothing\nPrelude&gt; let c = Just 3\nPrelude&gt; a ?? b ?? c ?: 10\n3\nPrelude&gt; a ?? b ?? Nothing ?: 10\n10\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1511047651, "post_id": 47372155, "comment_id": 81697010, "body": "your answer is better."}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1511054941, "post_id": 47372155, "comment_id": 81698309, "body": "You can use <code>1</code> with <code>&lt;|&gt;</code> if you have a handy <code>instance Num a =&gt; Num (Maybe a)</code> lying around."}, {"owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "edited": false, "score": 0, "creation_date": 1511081565, "post_id": 47372155, "comment_id": 81702646, "body": "We can also use <code>asum</code> from <code>Data.Foldable</code> to combine a list of maybes using <code>&lt;|&gt;</code>."}], "tags": [], "owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "is_accepted": true, "score": 12, "last_activity_date": 1511047662, "last_edit_date": 1511047662, "creation_date": 1511047439, "answer_id": 47372155, "question_id": 47371950, "link": "https://stackoverflow.com/questions/47371950/maybe-coalescing-operator/47372155#47372155", "title": "Maybe coalescing operator", "body": "<p>Haskeller's would generally use <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Control-Applicative.html#v:-60--124--62-\" rel=\"noreferrer\"><code>(&lt;|&gt;) :: Maybe a -&gt; Maybe a -&gt; Maybe a</code></a> for this sort of thing. Assuming <code>a, b, c :: Maybe Int</code>, you have <code>x :: Maybe Int</code></p>\n\n<pre><code>let x = a &lt;|&gt; b &lt;|&gt; c &lt;|&gt; Just 1\n</code></pre>\n\n<p>Of course, that isn't really what you asked for. If you want, you could define it though!</p>\n\n<pre><code>-- You expect `a ?? b ?? c ?? 1` to parse as `a ?? (b ?? (c ?? 1))`\ninfixr 3 ??\n\n-- (Someone is going to point out that `(??) = flip fromMaybe`, so I am first)\n(??) :: Maybe a -&gt; a -&gt; a\nJust x ?? _ = x\nNothing ?? y = y\n</code></pre>\n\n<p>Then, you get precisely the behaviour you expect. Assuming <code>a, b, c :: Maybe Int</code>, you have <code>x :: Int</code>:</p>\n\n<pre><code>let x = a ?? b ?? c ?? 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 1, "last_activity_date": 1511107377, "creation_date": 1511107377, "answer_id": 47378879, "question_id": 47371950, "link": "https://stackoverflow.com/questions/47371950/maybe-coalescing-operator/47378879#47378879", "title": "Maybe coalescing operator", "body": "<p>Just for some practicing purposes this job can also be expressed by the <code>Monoid</code> class type <code>First</code> which is a <code>Maybe</code> monoid returning the leftmost non-Nothing value.</p>\n\n<pre><code>import Data.Monoid\nimport Data.Maybe (fromJust)\n\ninfixr 3 ??\n\n(??) :: Maybe a -&gt; a -&gt; a\nx ?? y = fromJust . getFirst $ First x &lt;&gt; First (Just y)\n\n*Main&gt; Nothing ?? Nothing ?? 1\n1\n*Main&gt; Nothing ?? Just 3 ?? 1\n3\n*Main&gt; Just 7 ?? Just 3 ?? 1\n7\n</code></pre>\n"}], "owner": {"reputation": 14050, "user_id": 3772221, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xfx4l.png?s=128&g=1", "display_name": "m0meni", "link": "https://stackoverflow.com/users/3772221/m0meni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 1, "accepted_answer_id": 47372155, "answer_count": 3, "score": 4, "last_activity_date": 1511121183, "creation_date": 1511045816, "last_edit_date": 1511047295, "question_id": 47371950, "link": "https://stackoverflow.com/questions/47371950/maybe-coalescing-operator", "title": "Maybe coalescing operator", "body": "<p>I'm wondering how I could go about defining an operator / if an operator already exists in Haskell that lets pick the first <code>Maybe</code> type that isn't <code>Nothing</code>, and if all if them are nothing, it returns some default. Basically something like this:</p>\n\n<pre><code>let x = a ?? b ?? c ?? 1\n</code></pre>\n\n<p>where <code>(??)</code> is the operator and <code>a, b, c</code> are all <code>Maybe</code> types. I'd expect this code to return the first value that is <code>Just</code> or <code>1</code> if all of <code>a, b, c</code> are <code>Nothing</code>.</p>\n\n<p>I'm basically looking to replicate the same functionality as the null coalescing operator you'd find in <code>C#</code> or other languages.</p>\n\n<p>This question shows how to do it in \n F# (<a href=\"https://stackoverflow.com/questions/21194565/null-coalescing-operator-in-f\">Null Coalescing Operator in F#?</a>), and it's quite hacky. Is there a way to do it cleanly in Haskell, and if not, what's the closest you can get to it?</p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 1, "creation_date": 1511044169, "post_id": 47371722, "comment_id": 81696216, "body": "it&#39;s a fold. what&#39;s the initial state?"}, {"owner": {"reputation": 6563, "user_id": 100214, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/db8155dcba940d81cd7a298b4ae99c7c?s=128&d=identicon&r=PG", "display_name": "Frank C.", "link": "https://stackoverflow.com/users/100214/frank-c"}, "edited": false, "score": 1, "creation_date": 1511044199, "post_id": 47371722, "comment_id": 81696228, "body": "Also read up on persistent data..."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1511087051, "post_id": 47371722, "comment_id": 81703854, "body": "Usually using <code>head</code> and <code>tail</code> are <i>antipatterns</i>: one better uses pattern matching here, since it is more safe, and easier to understand."}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1511056939, "post_id": 47371781, "comment_id": 81698619, "body": "In your recursive case, I think you can make this more efficient by doing <code>1 + test xs</code> and <code>(-1) + test xs</code> so it&#39;s tail recursive and can ditch the preceding reference frame."}, {"owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "edited": false, "score": 0, "creation_date": 1511060543, "post_id": 47371781, "comment_id": 81699149, "body": "You may want to use <code>foldl&#39;</code> if you have a long list so that you don&#39;t build up a giant thunk that causes a stack overflow (bingo) when evaluated."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1511060650, "post_id": 47371781, "comment_id": 81699164, "body": "@AdamSmith <code>1 + test xs</code> is still <code>(+) 1 (test xs)</code>. The outmost call is still <code>(+)</code>, not <code>test</code>; it won&#39;t change anything about TCO."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1511062640, "post_id": 47371781, "comment_id": 81699479, "body": "@HTNW thanks for the correction! My CS is a little rusty, been in the weeds too long :)"}, {"owner": {"reputation": 318, "user_id": 3310317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1490518186/picture?type=large", "display_name": "SparklingWater", "link": "https://stackoverflow.com/users/3310317/sparklingwater"}, "edited": false, "score": 0, "creation_date": 1511173625, "post_id": 47371781, "comment_id": 81732530, "body": "This answer was the most readable for me as a haskell beginner.  So foldl&#39; would be the way to go in Haskell for these sort of problems?"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 318, "user_id": 3310317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1490518186/picture?type=large", "display_name": "SparklingWater", "link": "https://stackoverflow.com/users/3310317/sparklingwater"}, "edited": false, "score": 1, "creation_date": 1511174360, "post_id": 47371781, "comment_id": 81733007, "body": "@SparklingWater (if I may interject) yes. there&#39;s even a saying that <code>foldl&#39;</code> should almost always be used in place of <code>foldl</code>."}], "tags": [], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "is_accepted": true, "score": 4, "last_activity_date": 1511064929, "last_edit_date": 1511064929, "creation_date": 1511044493, "answer_id": 47371781, "question_id": 47371722, "link": "https://stackoverflow.com/questions/47371722/move-through-list-and-keep-state/47371781#47371781", "title": "Move through list and keep state", "body": "<p>You can do this simply by using another parameter to the function:</p>\n\n<pre><code>test [] counter = counter\ntest (x:xs) counter\n    | x == 1 = test xs (counter + 1)\n    | otherwise = test xs (counter - 1)\n</code></pre>\n\n<p>Here we use pattern matching <code>(x:xs)</code> to bind the head of the list to x, and the tail of the list to xs. Once we get to the empty list, we return the final counter.</p>\n\n<p>We'd have to call this function with an initial counter, like so</p>\n\n<p><code>test [1..3] 0</code></p>\n\n<p>However, we can do this better by not having to pass in an initial counter, by accumulating the counter as we go, like so.</p>\n\n<pre><code>test [] = 0\ntest (x:xs)\n    | x == 1 = test xs + 1\n    | otherwise = test xs - 1\n</code></pre>\n\n<p>This time, each time the value is equal to one, we add one to the result of the function on the empty list. Eventually we will meet the base case, which is 0, and the rest of the values will be added up giving us the final value.</p>\n\n<p>However, this pattern of recursing over a list and doing something which the value is very common. We can use a fold:</p>\n\n<pre><code>test = foldl' (\\acc x -&gt; if x == 1 then acc + 1 else acc - 1) 0\n</code></pre>\n\n<p>This is essentially our previous recursive function.</p>\n\n<p>There are ways to store persistent state in Haskell, but generally we don't need them in simple cases like this.</p>\n"}, {"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 4, "last_activity_date": 1511059899, "creation_date": 1511059899, "answer_id": 47373259, "question_id": 47371722, "link": "https://stackoverflow.com/questions/47371722/move-through-list-and-keep-state/47373259#47373259", "title": "Move through list and keep state", "body": "<p>I think I'd probably do this:</p>\n\n<pre><code>whatever xs = length ones - length others where\n    (ones, others) = partition (1==) xs\n</code></pre>\n\n<p>The only thing that would give me pause is some consideration for long lists; if it is important that the list not be all in memory at once, this wouldn't work well.</p>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 1, "last_activity_date": 1511077186, "creation_date": 1511077186, "answer_id": 47374680, "question_id": 47371722, "link": "https://stackoverflow.com/questions/47371722/move-through-list-and-keep-state/47374680#47374680", "title": "Move through list and keep state", "body": "<p>Another alternative: </p>\n\n<pre><code>&gt; sum . map (bool (-1) 1 . (==1)) $ [1,2,2]\n-1\n&gt; sum . map (bool (-1) 1 . (==1)) $ [1,2,2,1]\n0\n&gt; sum . map (bool (-1) 1 . (==1)) $ [1,2,2,1,1,1,1,1]\n4\n</code></pre>\n\n<p>Note that <code>bool (-1) 1 . (==1)</code> can also be written using basic syntax as</p>\n\n<pre><code>(\\x -&gt; if x==1 then 1 else -1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 318, "user_id": 3310317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1490518186/picture?type=large", "display_name": "SparklingWater", "link": "https://stackoverflow.com/users/3310317/sparklingwater"}, "edited": false, "score": 0, "creation_date": 1511173889, "post_id": 47378996, "comment_id": 81732697, "body": "How does it compare to the foldl solution? And why would that not be the ideal way in Haskell?"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 318, "user_id": 3310317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1490518186/picture?type=large", "display_name": "SparklingWater", "link": "https://stackoverflow.com/users/3310317/sparklingwater"}, "edited": false, "score": 1, "creation_date": 1511174091, "post_id": 47378996, "comment_id": 81732833, "body": "there are two themes here. one thing is the direction of the state passing through the chain of state-updaters. with <code>incr</code> and <code>decr</code> specifically it doesn&#39;t matter of course, but in general it might. the other thing is to get it working right away, instead of waiting for the whole list to get waded through before the first state-updater starts working - which should be happening right away, ideally."}], "tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 1, "last_activity_date": 1511173902, "last_edit_date": 1511173902, "creation_date": 1511108032, "answer_id": 47378996, "question_id": 47371722, "link": "https://stackoverflow.com/questions/47371722/move-through-list-and-keep-state/47378996#47378996", "title": "Move through list and keep state", "body": "<p>You just tweak it and shuffle a few words around, like</p>\n\n<pre><code>foo (list) = \n    -- int somestate\n    -- foreach list as item   \n    -- foreach item in list\n           do  item &lt;- list\n               if item == 1\n                 then  return incr -- state\n                 else  return decr -- state\n    -- return state\n\nincr state = state + 1\ndecr state = state - 1\n</code></pre>\n\n<p>and already get yourself a <em>thing</em>, with a <em>type</em> deduced for it! which is</p>\n\n<pre><code>foo :: (Num a, Num b, Monad m, Eq a) =&gt; m a -&gt; m (b -&gt; b)\n</code></pre>\n\n<p>We know <code>m ~ []</code> so it's actually</p>\n\n<pre><code>foo :: (Num a1, Num a, Eq a) =&gt; [a] -&gt; [b -&gt; b]\n</code></pre>\n\n<p>So, what can we do with the bunch of state-updating functions, like <code>incr</code>/<code>decr</code>, in a row? A couple of things:</p>\n\n<pre><code>import Control.Monad\nimport Data.Monoid\nimport Data.Foldable\n\nsequence . foo    :: (Num a, Num b, Eq a) =&gt; [a] -&gt; b -&gt; [b]\n\nfoldr (.) id . foo :: (Num a, Num b, Eq a) =&gt; [a] -&gt; b -&gt; b\n\nappEndo . foldMap Endo . foo \n                   :: (Num a, Num b, Eq a) =&gt; [a] -&gt; b -&gt; b\n\nfoldl (.) id . foo :: (Num a, Num b, Eq a) =&gt; [a] -&gt; b -&gt; b\n\nappEndo . getDual . foldMap (Dual . Endo) . foo  \n                   :: (Num a, Num b, Eq a) =&gt; [a] -&gt; b -&gt; b\n</code></pre>\n\n<p>Not the first one, certainly. </p>\n\n<p>It would seem that the one with <code>foldl</code> is the ticket here. But then again, it goes against <em>non sunt multiplicanda praeter necessitatem</em>. So really, it's</p>\n\n<pre><code>foo :: (Num t, Num a, Eq a) =&gt; [a] -&gt; t -&gt; t\nfoo = foldr g id \n    where\n    g x r state | x==1 = r (incr state)     -- or even `r $! incr state`\n             | otherwise = r (decr state)   --         `r $! decr state`\n</code></pre>\n\n<p>or simpler,</p>\n\n<pre><code>foo :: (Num t, Num a, Eq a) =&gt; [a] -&gt; t -&gt; t\nfoo = foldr g id \n    where\n    g x r | x==1 = r . incr\n       | otherwise = r . decr\n</code></pre>\n\n<p>or even just</p>\n\n<pre><code>foo :: (Num t, Num a, Eq a) =&gt; [a] -&gt; t -&gt; t\nfoo = foldr (\\x -&gt; if x==1 then (. incr) else (. decr)) id \n</code></pre>\n\n<p>which actually is the one with the <code>Dual</code> we had all along. I think. Have fun validating this (or otherwise). :)</p>\n\n<hr>\n\n<p><em>update:</em> Fusing <code>foldr (.) id . foo</code> into one function leads to an even nicer looking </p>\n\n<pre><code>foo :: (Num t, Num a, Eq a) =&gt; [a] -&gt; t -&gt; t\nfoo = flip $ foldr (\\x -&gt; if x==1 then incr else decr) \n</code></pre>\n\n<p>but it processes the state in the opposite order.</p>\n"}], "owner": {"reputation": 318, "user_id": 3310317, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1490518186/picture?type=large", "display_name": "SparklingWater", "link": "https://stackoverflow.com/users/3310317/sparklingwater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 47371781, "answer_count": 4, "score": 3, "last_activity_date": 1511173902, "creation_date": 1511043971, "last_edit_date": 1511069644, "question_id": 47371722, "link": "https://stackoverflow.com/questions/47371722/move-through-list-and-keep-state", "title": "Move through list and keep state", "body": "<p>I am trying to transform this pseudocode into Haskell:</p>\n\n<pre><code>function whatever(list)\n    int somestate\n    foreach list as item\n        if item === 1\n              state++\n        else \n              state--\n    endforeach\n    return state\n</code></pre>\n\n<p>Now something like this is obviously wrong (state is 3):</p>\n\n<pre><code>test :: [Int] -&gt; Int\ntest item\n       | head item &gt; 1 = 1\n       | otherwise = newItem\n       where newItem = tail item\n</code></pre>\n\n<p>What is the best way to achieve something like this in Haskell?</p>\n"}, {"tags": ["list", "function", "haskell"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 4, "creation_date": 1511043858, "post_id": 47371634, "comment_id": 81696139, "body": "To take an item from a list you need to use <code>!!</code>. Your first function would be written like <code>testfunction function input = (function !! 0) (input !! 1)</code> but generally manually taking items from lists is a bad idea, you should pattern match or loop through the list"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 1, "creation_date": 1511043921, "post_id": 47371634, "comment_id": 81696156, "body": "why are you using list in this way... i never had the need to index a list, so what are you trying to do here..."}, {"owner": {"reputation": 103, "user_id": 7299999, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89356d13edb456935f7f2b45ba10dc57?s=128&d=identicon&r=PG&f=1", "display_name": "s4342re41", "link": "https://stackoverflow.com/users/7299999/s4342re41"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1511044399, "post_id": 47371634, "comment_id": 81696282, "body": "Ah yes, @Zpalmtree you&#39;re right. I completely forgot that to call an nth index form a list you use !!. That solves the error.  HuStmpHrrr I was trying to create some AI &quot;players&quot; and I needed to use the list of players in a functioni that would calculate the next state of the program."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1511109453, "post_id": 47371634, "comment_id": 81710587, "body": "What result exactly you want <code>test_function [add10, subtract10] [3,5,7,9]</code> to return?"}], "answers": [{"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1511126142, "post_id": 47371792, "comment_id": 81716740, "body": "or <code>(function &lt;*&gt; input) !! (0*4 + 1)</code>."}], "tags": [], "owner": {"reputation": 103, "user_id": 7299999, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89356d13edb456935f7f2b45ba10dc57?s=128&d=identicon&r=PG&f=1", "display_name": "s4342re41", "link": "https://stackoverflow.com/users/7299999/s4342re41"}, "is_accepted": false, "score": 1, "last_activity_date": 1511044585, "creation_date": 1511044585, "answer_id": 47371792, "question_id": 47371634, "link": "https://stackoverflow.com/questions/47371634/can-i-use-a-list-of-functions-as-input-for-a-different-function-in-haskell/47371792#47371792", "title": "Can I use a list of functions, as input, for a different function in Haskell?", "body": "<p>Like Zpalmtree said in the comments, the error was not using !! to call indexes. The correct way to write the code was to have it written out like so: </p>\n\n<pre><code>test_function :: [Func10] -&gt; [Int] -&gt; Int\ntest_function function input = (function !! 0) (input !! 1)\n\nmain = do\n    print(\"print 5 add 10\")\n    print(test_function [add10, subtract10] [3,5,7,9])\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 7299999, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89356d13edb456935f7f2b45ba10dc57?s=128&d=identicon&r=PG&f=1", "display_name": "s4342re41", "link": "https://stackoverflow.com/users/7299999/s4342re41"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511044585, "creation_date": 1511043350, "last_edit_date": 1511043695, "question_id": 47371634, "link": "https://stackoverflow.com/questions/47371634/can-i-use-a-list-of-functions-as-input-for-a-different-function-in-haskell", "title": "Can I use a list of functions, as input, for a different function in Haskell?", "body": "<p>I am struggling to figure out how to make a function that takes a list of functions as input to generate some output. For example,\nlet's say that I make a type synonym called Func10 like so:</p>\n\n<pre><code>type Func10 = Int -&gt; Int\n</code></pre>\n\n<p>I can create a set of functions that add, subtract, divide or multiply a value to 10 like so:</p>\n\n<pre><code>add10 :: Func10\nadd10 input = 10 + input\n\nsubtract10 :: Func10\nsubtract10 input = 10 - input\n\ntimes10 :: Func10\ntimes10 input = 10 * input\n\ndivide10 :: Func10\ndivide10 input = 10 `div` input\n</code></pre>\n\n<p>Now let's say that I want to make a function that will take a list of 4 values and a list of functions that I want to apply to them: add10, subtract10, multiply10 and divide10. </p>\n\n<p>Initially I thought that I could give the function in the list input the integer argument when I need it, like so:</p>\n\n<pre><code>test_function :: [Func10] -&gt; [Int] -&gt; Int\ntest_function function input = function[0] (input[1])\n\nmain = do\n    print(\"print 5 add 10\")\n    print(test_function [add10, subtract10] [3,5,7,9])\n</code></pre>\n\n<p>This resulted in the following error:</p>\n\n<pre><code>function_lists2.hs:17:32: error:\n    * Couldn't match expected type `[Integer] -&gt; t0 -&gt; Int'\n                  with actual type `[Func10]'\n    * The function `function' is applied to two arguments,\n      but its type `[Func10]' has none\n      In the expression: function [0] (input [1])\n      In an equation for `test_function':\n          test_function function input = function [0] (input [1])\n   |\n17 | test_function function input = function[0] (input[1])\n   |                                ^^^^^^^^^^^^^^^^^^^^^^\n\nfunction_lists2.hs:17:45: error:\n    * Couldn't match expected type `[Integer] -&gt; t0'\n                  with actual type `[Int]'\n    * The function `input' is applied to one argument,\n      but its type `[Int]' has none\n      In the second argument of `function', namely `(input [1])'\n      In the expression: function [0] (input [1])\n   |\n17 | test_function function input = function[0] (input[1])\n   |                                             ^^^^^^^^\n</code></pre>\n\n<p>I thought that this could be because test_function needs the integer input as part of calling test_function, like so:</p>\n\n<pre><code>test_function :: [Func10] -&gt; Int\ntest_function function = function[0]\n\nmain = do\n    print(\"print 5 add 10\")\n    print(test_function ([add10, subtract10] 5))\n</code></pre>\n\n<p>However, this resulted in a similar error:</p>\n\n<pre><code>function_lists2.hs:26:26: error:\n    * Couldn't match expected type `[Integer] -&gt; Int'\n                  with actual type `[Func10]'\n    * The function `function' is applied to one argument,\n      but its type `[Func10]' has none\n      In the expression: function [0]\n      In an equation for `test_function':\n          test_function function = function [0]\n   |\n26 | test_function function = function[0]\n   |                          ^^^^^^^^^^^\n\nfunction_lists2.hs:30:30: error:\n    * Couldn't match expected type `Integer -&gt; [Func10]'\n                  with actual type `[Func10]'\n    * The function `[add10, subtract10]' is applied to one argument,\n      but its type `[Func10]' has none\n      In the first argument of `test_function', namely\n        `([add10, subtract10] 5)'\n      In the first argument of `print', namely\n        `(test_function ([add10, subtract10] 5))'\n   |\n30 |         print(test_function ([add10, subtract10] 5))\n   |                              ^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>What would be the correct way of doing this? I am trying to take a list of functions and apply them to some other values but it's hard to find information on this topic online. Thanks.</p>\n"}, {"tags": ["haskell", "data-structures", "instance"], "comments": [{"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 3, "creation_date": 1511036162, "post_id": 47370551, "comment_id": 81693723, "body": "You shouldn&#39;t use <code>Show</code> for pretty printing. There are pretty printing libraries available that will make this much easier for you."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1511036239, "post_id": 47370551, "comment_id": 81693753, "body": "so i guess every structure should have one level deeper indent?"}, {"owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "reply_to_user": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 1, "creation_date": 1511036344, "post_id": 47370551, "comment_id": 81693789, "body": "I wouldn&#39;t! However, my teacher told me that I need to code it this way... @ReinHenrichs"}, {"owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1511036539, "post_id": 47370551, "comment_id": 81693857, "body": "Exactly @HuStmpHrrr"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "edited": false, "score": 0, "creation_date": 1511037052, "post_id": 47370627, "comment_id": 81694024, "body": "It does work, thank you! However, it adds a new line at the end of each structure. Do you have an idea of how can I fix that?"}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "reply_to_user": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "edited": false, "score": 0, "creation_date": 1511037437, "post_id": 47370627, "comment_id": 81694135, "body": "First (silly) thought: Cut off the last character using <code>init</code>?"}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "reply_to_user": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "edited": false, "score": 0, "creation_date": 1511038295, "post_id": 47370627, "comment_id": 81694414, "body": "Second thought: <code>unlines</code> is essentially <code>concatMap (++&quot;\\n&quot;)</code>. That last <code>\\n</code> could be skipped with <code>foldl1 (\\a b -&gt; a++&quot;\\n&quot;++b)</code>. Which would of course be more legible as <a href=\"https://www.haskell.org/hoogle/?hoogle=intercalate\" rel=\"nofollow noreferrer\"><code>intercalate &quot;\\n&quot;</code></a>."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1511042489, "post_id": 47370627, "comment_id": 81695715, "body": "@YannVernier note that <code>unlines</code> is not *essentially <code>concatMap (++&quot;\\n&quot;)</code>, it is <b>exactly</b> that. From <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/src/Data.OldList.html#unlines\" rel=\"nofollow noreferrer\">the source</a>: <code>unlines                 =  concatMap (++ &quot;\\n&quot;)</code>"}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "edited": false, "score": 1, "creation_date": 1511077457, "post_id": 47370627, "comment_id": 81701906, "body": "At least there was an ifdef with an alternate version. ;) Honestly, for the standard library to hold code you might write is a strong point of Haskell; it means the compiler will do well with many things we come up with also."}], "tags": [], "owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "is_accepted": true, "score": 1, "last_activity_date": 1511037121, "last_edit_date": 1511037121, "creation_date": 1511036384, "answer_id": 47370627, "question_id": 47370551, "link": "https://stackoverflow.com/questions/47370551/haskell-show-instance-on-list/47370627#47370627", "title": "Haskell show instance on list", "body": "<p>I'm sure there are better library routines for this, but wouldn't this work?</p>\n\n<pre><code>unlines $ a : [\"  \" ++ show x | x &lt;- xs]\n</code></pre>\n\n<p>However, that covers only one level. You probably want to define a different function than show to maintain the indentation, or you'd have to keep splitting sub-shows with <code>lines</code> to find where to inject indentation. </p>\n\n<p>A rough draft of such an indentation insertion function is:</p>\n\n<pre><code>prefix p s = unlines [p ++ l | l &lt;- lines s]\n</code></pre>\n\n<p>Again, I'm sure there's something better in a library. Even these short snippets have gone through a few steps of refinement (<code>foldl1 (++)</code> -> <code>concat</code> -> <code>unlines</code>, then join the first line as head with <code>:</code>). </p>\n"}, {"comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1511039996, "post_id": 47370928, "comment_id": 81694952, "body": "I just realized the part of my discussion of catamorphism is wrong, so I removed it. the recursion should be heterogeneous. but the remaining part is working and should be enough to answer OP&#39;s question."}], "tags": [], "owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "is_accepted": false, "score": 3, "last_activity_date": 1511039754, "last_edit_date": 1511039754, "creation_date": 1511038384, "answer_id": 47370928, "question_id": 47370551, "link": "https://stackoverflow.com/questions/47370551/haskell-show-instance-on-list/47370928#47370928", "title": "Haskell show instance on list", "body": "<p>Basically there only one bookkeeping to do, i.e. keep tract of the indentation level. An accumulative counter definitely helps:</p>\n\n<pre><code>pretty' :: Int -&gt; Structure -&gt; [String]\npretty' level (Structure s list) = ((concat $ replicate level \"    \") ++ s) :\n    (list &gt;&gt;= (pretty' (level + 1)))\n</code></pre>\n\n<p>This function defines an accumulator of your pretty printer. The remaining part is to wrap it:</p>\n\n<pre><code>pretty = pretty' 0\nprettyShow = unlines . pretty\n</code></pre>\n\n<p>It definitely works</p>\n\n<pre><code>Prelude&gt; putStrLn $ prettyShow (Structure \"a\" [Structure \"b\" [Structure \"c\" []], Structure \"d\" []])\na\n    b\n        c\n    d\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1001, "user_id": 983883, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e529b9e0fbcbee96a20a1b9bb2629ea7?s=128&d=identicon&r=PG", "display_name": "hololeap", "link": "https://stackoverflow.com/users/983883/hololeap"}, "is_accepted": false, "score": 0, "last_activity_date": 1511041891, "creation_date": 1511041891, "answer_id": 47371436, "question_id": 47370551, "link": "https://stackoverflow.com/questions/47370551/haskell-show-instance-on-list/47371436#47371436", "title": "Haskell show instance on list", "body": "<p>I would suggest using the <code>Data.Tree</code> module that comes with <code>base</code>. It is a generic (rose) tree with a structure identical to yours, except that the list goes by a type synonym:</p>\n\n<pre><code>data Tree a = Node {rootLabel :: a, subForest :: Forest a}\ntype Forest a = [Tree a]\n</code></pre>\n\n<p>It also comes with the <code>drawTree</code> and <code>drawForest</code> functions which are roughly what you were trying to write yourself.</p>\n\n<pre><code>&gt; :m + Data.Tree\n&gt; let t = Node \"strct\" [Node \"strct1\" [], Node \"strct2\" [], Node \"strct3\" []]\n&gt; putStr . drawTree $ t\nstrct\n|\n+- strct1\n|\n+- strct2\n|\n`- strct3\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8821009, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a944f46a9424d5cfed7f3398fad611d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Martins", "link": "https://stackoverflow.com/users/8821009/peter-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1609, "favorite_count": 0, "accepted_answer_id": 47370627, "answer_count": 3, "score": 2, "last_activity_date": 1615337298, "creation_date": 1511035831, "last_edit_date": 1615337298, "question_id": 47370551, "link": "https://stackoverflow.com/questions/47370551/haskell-show-instance-on-list", "title": "Haskell show instance on list", "body": "<p>I'm having issues with adding a show instance to my data structure, which is:</p>\n<pre><code>data Structure = Structure String [Structure]  \n</code></pre>\n<p>and I would like to have this output:</p>\n<pre><code>strct  \n    strct1  \n    strct2  \n    strct3  \n</code></pre>\n<p>I've been trying this</p>\n<pre><code>instance Show Structure where  \n    show (Structure a (xs)) = show a ++ &quot;\\n&quot; ++ &quot;  &quot; ++ show xs \n</code></pre>\n<p>But its output is</p>\n<pre><code>&quot;strct&quot;  \n    [&quot;strct1&quot;  \n    [], &quot;strct2&quot;  \n    []]  \n</code></pre>\n<p>So, I would need no brackets, no commas and no quotation marks. Any ideas?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1511039776, "post_id": 47370404, "comment_id": 81694883, "body": "Questions which ask &quot;why&quot; are difficult to answer on Stack Overflow. (See <a href=\"//meta.stackoverflow.com/q/323334\">Is asking &quot;why&quot; on language specifications still considered as &quot;primarily opinion-based&quot; if it can have official answers?</a>) Could you edit your question so that you&#39;re asking &quot;what&quot; instead of inviting opinions?"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 3, "creation_date": 1511040246, "post_id": 47370404, "comment_id": 81695029, "body": "Given that <a href=\"https://stackoverflow.com/a/44564452/5743988\">chi doesn&#39;t know the answer</a>, I don&#39;t think this will have an official answer."}, {"owner": {"reputation": 806, "user_id": 94128, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bafb4f71e8a9fffef02bd67947898dcd?s=128&d=identicon&r=PG", "display_name": "Drew Goodwin", "link": "https://stackoverflow.com/users/94128/drew-goodwin"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1511042502, "post_id": 47370404, "comment_id": 81695719, "body": "Does this rephrasing help? I&#39;m trying to understand the reason that the designers of Haskell made this decision, and if it mapAccumR is intentionally different than foldr."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1511048004, "post_id": 47370404, "comment_id": 81697080, "body": "@4castle Did chi contribute to Haskell when this sort of thing was being decided?"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1511048329, "post_id": 47370404, "comment_id": 81697156, "body": "@Alec I have no idea. I just know chi knows a ton about Haskell. See the <a href=\"https://stackoverflow.com/tags/haskell/topusers\">top users in the Haskell tag</a>."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1511048484, "post_id": 47370404, "comment_id": 81697183, "body": "@4castle Oh OK. I thought this was like when augustss answered some  question about typeclass implementation and it turned out he was the guy who had done the initial implementation."}, {"owner": {"reputation": 806, "user_id": 94128, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bafb4f71e8a9fffef02bd67947898dcd?s=128&d=identicon&r=PG", "display_name": "Drew Goodwin", "link": "https://stackoverflow.com/users/94128/drew-goodwin"}, "edited": false, "score": 0, "creation_date": 1511062728, "post_id": 47370404, "comment_id": 81699495, "body": "After doing more research it seems <code>mapAccumR</code> and <code>mapAccumL</code> were both added to Haskell in version 1.4 around 1998 and they have the same signatures. In the spec <code>mapAccumR</code> is even introduced as [similar to <code>mapAccumL</code> but traversing right to left]. <code>foldl</code> and <code>foldr</code> were already part of the language, so it&#39;s possible the relationship between <code>mapAccumR</code> and <code>foldr</code> wasn&#39;t considered, or it was but judged to be less important than the relationship between <code>mapAccumL</code> and <code>mapAccumR</code>. This is just a guess."}], "owner": {"reputation": 806, "user_id": 94128, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bafb4f71e8a9fffef02bd67947898dcd?s=128&d=identicon&r=PG", "display_name": "Drew Goodwin", "link": "https://stackoverflow.com/users/94128/drew-goodwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1511042685, "creation_date": 1511034974, "last_edit_date": 1511042685, "question_id": 47370404, "link": "https://stackoverflow.com/questions/47370404/what-the-haskell-language-design-teams-opinion-as-to-why-foldr-and-mapaccumr-us", "title": "What the Haskell language design team&#39;s opinion as to why foldr and mapAccumR use opposite order of arguments in mapping function?", "body": "<p>Given that <code>mapAccumR</code> is often described as a combination of <code>map</code> and <code>foldr</code>, I'm wondering why the mapping function of <code>foldr</code> and <code>mapAccumR</code> expect the arguments in the opposite order from each other.</p>\n\n<p>The order used by <code>foldr</code> is value, accumulator:</p>\n\n<pre><code>\u03bb foldr (-) 0 [1,2]\n-1\n\n\u03bb foldr (\\val acc -&gt; val - acc) 0 [1, 2]\n-1\n</code></pre>\n\n<p>The order used by <code>mapAccumR</code> is accumulator, value:</p>\n\n<pre><code>\u03bb mapAccumR (\\acc val -&gt; (val - acc, val)) 0 [1,2]\n(-1,[1,2])\n</code></pre>\n\n<p>So, <code>mapAccumR</code> is a combination of map and <code>foldr</code>, but not exactly as one might first expect. I'm wondering what prompted this design decision. Is there a reason or advantage to this difference?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["jquery", "haskell", "yesod"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8963639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081c4505ce4967fdbc5f2b8c81fe08bd?s=128&d=identicon&r=PG", "display_name": "Maurilyn", "link": "https://stackoverflow.com/users/8963639/maurilyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1511435356, "creation_date": 1511435356, "answer_id": 47454074, "question_id": 47369831, "link": "https://stackoverflow.com/questions/47369831/jquery-on-yesod-haskell/47454074#47454074", "title": "jQuery on yesod haskell", "body": "<p>I learned to use 'toWidget' instead 'toWidgetHead' to load the script at the end of the page.</p>\n\n<pre><code>getShareR :: Handler Html\ngetShareR = do\n    defaultLayout $ do\n        addStylesheet $ StaticR css_bootstrap_css\n        addScriptRemote \"https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js\"\n        toWidget [julius|\n          $(document).mouseup(function (e) {\n            var div = $(\"#login\");\n            if (!div.is(e.target) &amp;&amp; div.has(e.target).length === 0) {\n                if (div.is(':visible')) {\n                    div.toggle(\"slow\");\n                }\n            }\n          });\n\n          function showlogin(){\n            $(\"#login\").show(\"slow\");\n          }\n        |]\n        toWidget $ $(luciusFile \"templates/share.lucius\")\n        $(whamletFile \"templates/share.hamlet\")\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8963639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081c4505ce4967fdbc5f2b8c81fe08bd?s=128&d=identicon&r=PG", "display_name": "Maurilyn", "link": "https://stackoverflow.com/users/8963639/maurilyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511435356, "creation_date": 1511031308, "last_edit_date": 1511080732, "question_id": 47369831, "link": "https://stackoverflow.com/questions/47369831/jquery-on-yesod-haskell", "title": "jQuery on yesod haskell", "body": "<p>I'm new on functional programming. New on Haskell and Yesod.</p>\n\n<p>I'm just only trying to show a 'div' with login form</p>\n\n<p>(Sorry, but english is not my first language)</p>\n\n<pre><code>module Handler.Share where\n\nimport  Import\nimport  Text.Lucius\n\nmenu :: Widget\nmenu = [whamlet|\n&lt;a onclick=\"showlogin()\"&gt;\n  Entrar\n  &lt;div #login&gt;\n    &lt;h2&gt;\n      Login\n      &lt;p&gt;Usu\u00e1rio:\n      &lt;p&gt;Senha:\n      &lt;p&gt;\n        &lt;a&gt;\n            Esqueci minha senha\n        &lt;br&gt;\n        &lt;a&gt;\n            Novo cadastro\n\n|]\n\ngetShareR :: Handler Html\ngetShareR = do\n    defaultLayout $ do\n        addScriptRemote \"https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js\"\n        toWidgetHead [julius|    \n          function showlogin(){\n            $(\"#login\").show(\"slow\");\n          }\n        |]\n        toWidget $ $(luciusFile \"templates/share.lucius\")\n        $(whamletFile \"templates/share.hamlet\")\n</code></pre>\n\n<p>Return: Uncaught ReferenceError: $ is not defined</p>\n"}, {"tags": ["haskell", "character-encoding", "byte-order-mark", "bytestring"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1511022708, "post_id": 47367728, "comment_id": 81689002, "body": "Isn&#39;t the BOM just a special character? Does <a href=\"https://hackage.haskell.org/package/bytestring-0.10.8.2/docs/Data-ByteString-Lazy.html#v:tail\" rel=\"nofollow noreferrer\"><code>tail</code></a> not work for this?"}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1511023626, "post_id": 47367728, "comment_id": 81689341, "body": "@Alec Well, first I need to check whether my string is started with BOM or not. BOM is 3 bytes (i.e. size-3 list of <code>Word8</code>) and <code>head</code> has type <code>head :: ByteString -&gt; Word8</code>. It&#39;s really strange that <code>head</code> returns only one byte while <code>tail</code> can remove several bytes. So I guess just <code>tail</code> won&#39;t work. Also, <code>tail</code> throws pure exception if given <code>ByteString</code> is empty, which is not what I want :)"}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1511024135, "post_id": 47367728, "comment_id": 81689534, "body": "@Shersh So you know exactly what to do. Why not try that before asking this question?"}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1511024210, "post_id": 47367728, "comment_id": 81689568, "body": "Oops. Yeah - I see your problem. Check out the <code>utf8-string</code> package. You can check if the bytestring is empty then, if it isn&#39;t <code>uncons</code>. Based on the first character you get back, you either return the tail (which you also get from <code>uncons</code>) or the initial bytestring."}], "answers": [{"comments": [{"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "edited": false, "score": 0, "creation_date": 1511027598, "post_id": 47369153, "comment_id": 81690822, "body": "Thanks for your answer! Your solution is really simple and efficient (because <code>take</code> and <code>drop</code> doesn&#39;t allocate memory). I&#39;ve come personally with worse solution... I ran into problem with <code>cassava</code> package while I needed to parse CSV files. Unfortunately, this library cannot handle BOM :( <a href=\"https://github.com/hvr/cassava/issues/106\" rel=\"nofollow noreferrer\">github.com/hvr/cassava/issues/106</a>"}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "edited": false, "score": 0, "creation_date": 1511027745, "post_id": 47369153, "comment_id": 81690889, "body": "Though, your solution doesn&#39;t quite work because <code>unpack &quot;BOM&quot; = [66, 79, 77]</code> while byte order mark is <code>[239,187,191]</code>."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "reply_to_user": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "edited": false, "score": 0, "creation_date": 1511028403, "post_id": 47369153, "comment_id": 81691129, "body": "Heh, yeah that was a guess. Use whatever constants you desire. EDIT: Fixed (?)"}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "reply_to_user": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "edited": false, "score": 0, "creation_date": 1511032318, "post_id": 47369153, "comment_id": 81692489, "body": "@Shersh doesn&#39;t say what encoding they are expecting. This scheme is correct for UTF-8 (it might be nice to call that out explicitly in this answer), but not e.g. for UTF-16 where the magic bytes are different and crucially serve to indicate endianness (so even if you just wanted to strip them you couldn&#39;t do a single equality check)."}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "reply_to_user": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 1, "creation_date": 1511035911, "post_id": 47369153, "comment_id": 81693631, "body": "@jberryman Yes, you&#39;re right. It&#39;s easy to mess up with encodings... Hopefully, I have <code>utf-8</code> encoding :)"}], "tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": true, "score": 6, "last_activity_date": 1511028609, "last_edit_date": 1511028609, "creation_date": 1511027098, "answer_id": 47369153, "question_id": 47367728, "link": "https://stackoverflow.com/questions/47367728/simplest-way-to-remove-bom-from-haskell-bytestring/47369153#47369153", "title": "Simplest way to remove BOM from Haskell ByteString", "body": "<p>I feel like I must be misunderstanding the problem.  Doesn't this boil down to checking the first three bytes of a bytestring and conditionally dropping those bytes?</p>\n\n<ul>\n<li>To get the first 3 bytes use <code>take</code>.</li>\n<li>To check bytestring equality use <code>(==)</code>.</li>\n<li>To drop the first 3 bytes use <code>drop</code>.</li>\n</ul>\n\n<p>Putting these together we get:</p>\n\n<pre><code>import Data.ByteString.Lazy as BS\ndropBOM bs | BS.take 3 bs == BS.pack [0xEF,0xBB,0xBF] = BS.drop 3 bs\n           | otherwise = bs\n</code></pre>\n\n<p>However, even after dealing with lots of utf8 I never felt as though I needed to explicitly deal with BOM thanks to packages like Text that provide most the desired operations.  Perhaps you can solve your problem in another way than manually munging the bytestring.</p>\n"}], "owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 47369153, "answer_count": 1, "score": 4, "last_activity_date": 1511028609, "creation_date": 1511018948, "question_id": 47367728, "link": "https://stackoverflow.com/questions/47367728/simplest-way-to-remove-bom-from-haskell-bytestring", "title": "Simplest way to remove BOM from Haskell ByteString", "body": "<p>I have <a href=\"https://hackage.haskell.org/package/bytestring-0.10.8.2/docs/Data-ByteString-Lazy.html\" rel=\"nofollow noreferrer\"><code>LazyByteString</code></a> which possibly starts with <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">BOM</a>. What is the easiest and preferable efficient way to remove BOM from this <code>ByteString</code>?</p>\n"}, {"tags": ["scala", "haskell", "free-monad"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1511031086, "post_id": 47367696, "comment_id": 81692107, "body": "I suspect the positional information is encoded in the <code>implicit I: InjectK[Interact, F]</code>, which tells you how to inject <code>Interact</code>s into <code>F</code>s.  Wherever <code>Interacts</code> is instantiated will have to give that information."}], "answers": [{"comments": [{"owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "edited": false, "score": 0, "creation_date": 1511343046, "post_id": 47373023, "comment_id": 81816540, "body": "As I climb up the FP ladder all the roads lead to lenses :) Now I have to figure out how to solve the overlapping instances problem that I get if I try to interpret this using IO. But that&#39;s topic for another question. I&#39;ll also give it a try at the MTL approach."}, {"owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "edited": false, "score": 0, "creation_date": 1511344428, "post_id": 47373023, "comment_id": 81817430, "body": "And <a href=\"https://stackoverflow.com/questions/47431466/how-are-these-two-instances-overlapping-involving-out-of-scope-types\">this</a> is the error I was referring to. I&#39;m really puzzled about that second instance, which shouldn&#39;t be :("}, {"owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "edited": false, "score": 0, "creation_date": 1511349178, "post_id": 47373023, "comment_id": 81820623, "body": "Actually the paper you referred to mentions the fact that overlapping instances are needed. So another argument in favor of MTL."}, {"owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "edited": false, "score": 0, "creation_date": 1512062809, "post_id": 47373023, "comment_id": 82115473, "body": "I&#39;ve tried stacking monads (although I do not use transformers), but I cannot imagine how cross cutting concerns could be nicely separated with the MTL approach. <a href=\"https://stackoverflow.com/questions/47579216/doing-dependency-injection-using-monad-stacks\">Here is my new question</a>"}], "tags": [], "owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "is_accepted": true, "score": 2, "last_activity_date": 1511176077, "last_edit_date": 1511176077, "creation_date": 1511056749, "answer_id": 47373023, "question_id": 47367696, "link": "https://stackoverflow.com/questions/47367696/is-there-an-inject-equivalent-for-haskell-in-the-context-of-free-monads/47373023#47373023", "title": "Is there an inject equivalent for Haskell in the context of free monads", "body": "<p>This is covered in <a href=\"http://www.cs.ru.nl/~W.Swierstra/Publications/DataTypesALaCarte.pdf\" rel=\"nofollow noreferrer\"><em>Data Types \u00e0 la Carte</em></a>. The Scala library you demonstrated looks like a fairly faithful translation of the original Haskell. The gist of it is, you write a class representing a relationship between a functor <code>sup</code> which \"contains\" a functor <code>sub</code>:</p>\n\n<pre><code>class (Functor sub, Functor sup) =&gt; sub :-&lt;: sup where\n    inj :: sub a -&gt; sup a\n</code></pre>\n\n<p>(These days you might use a <a href=\"https://hackage.haskell.org/package/lens-4.15.4/docs/Control-Lens-Prism.html#t:Prism\" rel=\"nofollow noreferrer\"><code>Prism</code></a>, because they can both inject and project.) Then you can use the usual technique of composing the base functors of your free monads using the functor coproduct, implement <code>:-&lt;:</code> for the two cases of <code>Sum</code>,</p>\n\n<pre><code>instance Functor f =&gt; f :-&lt;: f where\n    inj = id\ninstance (Functor f, Functor g) =&gt; f :-&lt;: (Sum f g) where\n    inj = InL\ninstance (Functor f, Functor g, Functor h, f :-&lt;: g) =&gt; f :-&lt;: (Sum h g) where\n    inj = InR . inj\n</code></pre>\n\n<p>and make instruction sets composable by abstracting over the base functor.</p>\n\n<pre><code>ask :: Interact :-&lt;: f =&gt; Free f String\nask = liftF $ inj $ Ask id\n\ntell :: Interact :-&lt;: f =&gt; String -&gt; Free f ()\ntell str = liftF $ inj $ Tell str ()\n\naddCat :: DataOp :-&lt;: f =&gt; String -&gt; Free f ()\naddCat cat = liftF $ inj $ AddCat cat ()\n\ngetCats :: DataOp :-&lt;: f =&gt; Free f [String]\ngetCats = liftF $ inj $ GetCats id\n</code></pre>\n\n<p>Now you can write a program which uses both <code>Interact</code> and <code>DataOp</code> without making reference to a particular sum type.</p>\n\n<pre><code>myProgram :: (Interact :-&lt; f, DataOp :-&lt; f) =&gt; Free f ()\nmyProgram = ask &gt;&gt;= addCat\n</code></pre>\n\n<p>None of this is particularly better than the standard MTL approach, though.</p>\n"}], "owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 1, "accepted_answer_id": 47373023, "answer_count": 1, "score": 4, "last_activity_date": 1511176077, "creation_date": 1511018810, "last_edit_date": 1511043467, "question_id": 47367696, "link": "https://stackoverflow.com/questions/47367696/is-there-an-inject-equivalent-for-haskell-in-the-context-of-free-monads", "title": "Is there an inject equivalent for Haskell in the context of free monads", "body": "<p>I'm trying to translate <a href=\"https://typelevel.org/cats/datatypes/freemonad.html\" rel=\"nofollow noreferrer\">this Scala's <code>cats</code> example</a> about composing free monads.</p>\n\n<p>The gist of the example seems to be the decomposition of separate concerns into separate data types:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>data Interact a = Ask (String -&gt; a) | Tell String a deriving (Functor)\n\ndata DataOp = AddCat String | GetAllCats [String] deriving (Functor)\n\ntype CatsApp = Sum Interact DataOp\n</code></pre>\n\n<p>Without having these two separate concerns, I would build the \"language\" for <code>Interact</code> operations as follows:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>ask :: Free Interact String\nask = liftF $ Ask id\n\ntell :: String -&gt; Free Interact ()\ntell str = liftF $ Tell str ()\n</code></pre>\n\n<p>However, if I want to use <code>ask</code> and <code>tell</code> in a program that also uses <code>DataOp</code> I cannot define them with the types above, since such a program will have type:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>program :: Free CatsApp a\n</code></pre>\n\n<p>In <code>cats</code>, for the definition of the <code>tell</code> and <code>ask</code> operations they use an <code>InjectK</code> class, and an <code>inject</code> method from <code>Free</code>:</p>\n\n<pre class=\"lang-scala prettyprint-override\"><code>class Interacts[F[_]](implicit I: InjectK[Interact, F]) {\n  def tell(msg: String): Free[F, Unit] = Free.inject[Interact, F](Tell(msg))\n  def ask(prompt: String): Free[F, String] = Free.inject[Interact, F](Ask(prompt))\n}\n</code></pre>\n\n<p>What puzzles me is that somehow the positional information of the functors (<code>DataOp</code> is on the left, <code>Interact</code> is on the right) seems to be irrelevant (which is quite nice).</p>\n\n<p>Are there similar type-classes and functions that could be used to solve this problem in an elegant manner using Haskell?</p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511015498, "post_id": 47367162, "comment_id": 81686760, "body": "What&#39;s the full error message?"}, {"owner": {"reputation": 14317, "user_id": 182402, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de96aa2f424a48b2510a7d29c65a8ace?s=128&d=identicon&r=PG", "display_name": "Wander Nauta", "link": "https://stackoverflow.com/users/182402/wander-nauta"}, "edited": false, "score": 0, "creation_date": 1511015501, "post_id": 47367162, "comment_id": 81686762, "body": "Your type declaration is for a function called <code>union&#39;</code> (union prime), but your function is called <code>union</code> - it might not be related, but you might want to clean it up anyway."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511015554, "post_id": 47367162, "comment_id": 81686788, "body": "<a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:notElem\" rel=\"nofollow noreferrer\"><code>notElem</code></a> is a thing, btw."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511015699, "post_id": 47367162, "comment_id": 81686828, "body": "This question isn&#39;t useful if you don&#39;t provide the full error message."}, {"owner": {"reputation": 321, "user_id": 2260430, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/UVI0j.jpg?s=128&g=1", "display_name": "l&#230;ran91", "link": "https://stackoverflow.com/users/2260430/l%c3%a6ran91"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511016180, "post_id": 47367162, "comment_id": 81686993, "body": "that was the complete error I got @melpomene. what else there to get more errors that was just 7 line code"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511016402, "post_id": 47367162, "comment_id": 81687046, "body": "@l&#230;ran91 There should be at least a filename and a line number in there."}, {"owner": {"reputation": 321, "user_id": 2260430, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/UVI0j.jpg?s=128&g=1", "display_name": "l&#230;ran91", "link": "https://stackoverflow.com/users/2260430/l%c3%a6ran91"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511016618, "post_id": 47367162, "comment_id": 81687129, "body": "the file name saved as (set.hs).why do you need a line number here @melpomene ? as I showed the error did happen at union&#39; :: Set a  -&gt; Set a -&gt; Set a"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511016818, "post_id": 47367162, "comment_id": 81687193, "body": "Instead of just copy/pasting the full error message, you&#39;ve spent the past 20 minutes arguing with me. This leads me to believe you&#39;re trying to hide something, namely that either the error or the actual code don&#39;t match what you&#39;ve posted here."}, {"owner": {"reputation": 321, "user_id": 2260430, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/UVI0j.jpg?s=128&g=1", "display_name": "l&#230;ran91", "link": "https://stackoverflow.com/users/2260430/l%c3%a6ran91"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511017062, "post_id": 47367162, "comment_id": 81687265, "body": "Lol why do I need to hide anything.I asked the question because am confused and I don&#39;t know where did I made a mistake.I didn&#39;t ask question to poke you or argue with you .anyway I apologise if you feel like that.if you know where did I made a mistake help me | otherwise &quot;Thank you&quot; @melpomene"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511017183, "post_id": 47367162, "comment_id": 81687301, "body": "OK, then I&#39;m going to be explicit: I tried your code and it doesn&#39;t produce the error you claim it does. You need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1511017416, "post_id": 47367162, "comment_id": 81687373, "body": "I don&#39;t know where your mistake is because you&#39;re withholding essential information (namely, filename and line number). Why are you making it hard for other people to help you? And why are you still dodging the question? &quot;<i>Lol why do I need to hide anything.</i>&quot; I don&#39;t know, but you still haven&#39;t posted the full error message yet."}, {"owner": {"reputation": 321, "user_id": 2260430, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/UVI0j.jpg?s=128&g=1", "display_name": "l&#230;ran91", "link": "https://stackoverflow.com/users/2260430/l%c3%a6ran91"}, "edited": false, "score": 0, "creation_date": 1511017806, "post_id": 47367162, "comment_id": 81687484, "body": "okay brother. that was the complete code and that was the only error I getting &amp; I don&#39;t know what did I do wrong I think my compiler has some problem I guess . and you felt dodged because you dodged me like &quot;\t Instead of just copy/pasting the full error message, you&#39;ve spent the past 20 minutes arguing with me&quot; so that was the reply I can give for false claim(I didn&#39;t copy pasted anything here)."}, {"owner": {"reputation": 521, "user_id": 7126380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207438513426512/picture?type=large", "display_name": "Johnny Liao", "link": "https://stackoverflow.com/users/7126380/johnny-liao"}, "edited": false, "score": 1, "creation_date": 1511017849, "post_id": 47367162, "comment_id": 81687493, "body": "This error sounds like the way it is. parse error on input `::&#39;.  I tried your code.  The error I got is at the part of &quot;= |&quot; &quot;|&quot;. So maybe your error is about space indentation. So make sure everything is aligned and nested well."}, {"owner": {"reputation": 521, "user_id": 7126380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207438513426512/picture?type=large", "display_name": "Johnny Liao", "link": "https://stackoverflow.com/users/7126380/johnny-liao"}, "edited": false, "score": 2, "creation_date": 1511018116, "post_id": 47367162, "comment_id": 81687565, "body": "And make sure you don&#39;t use tabs. Haskell indentation depends on space. <a href=\"https://en.wikibooks.org/wiki/Haskell/Indentation\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Haskell/Indentation</a>"}], "answers": [{"tags": [], "owner": {"reputation": 521, "user_id": 7126380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207438513426512/picture?type=large", "display_name": "Johnny Liao", "link": "https://stackoverflow.com/users/7126380/johnny-liao"}, "is_accepted": true, "score": 1, "last_activity_date": 1511021819, "creation_date": 1511021819, "answer_id": 47368222, "question_id": 47367162, "link": "https://stackoverflow.com/questions/47367162/error-parse-error-on-input-in-haskell/47368222#47368222", "title": "error: parse error on input `::&#39; in haskell?", "body": "<p>Without the original code for examining, I can only leave a version for you to compare and may you find something that cause parsing error on '::'. </p>\n\n<pre><code>import Data.List\n\ndata Set a = Set [a]\nunion' :: Eq a =&gt; Set a -&gt; Set a -&gt; Set a\nunion' (Set xs) (Set []) = Set xs\nunion' (Set []) (Set ys) = Set ys\nunion' (Set (x:xs)) (Set ys)\n | not $ x `elem` ys = cons (Set [x]) (union' (Set xs) (Set ys))\n | otherwise = union' (Set xs) (Set ys)\n\ncons (Set xs) (Set ys) = Set (xs ++ ys)\n\ninstance Show a =&gt; Show (Set a) where\n  show (Set xs) = show xs\n</code></pre>\n\n<p>The following is what I bumped into when I started to modify the source code:</p>\n\n<ol>\n<li><p>You don't need to put '=' before guard '|'</p></li>\n<li><p>You need equal space indentation for guard '|'</p></li>\n<li><p>missing '=' for the second guard expression.</p></li>\n<li><p>called union instead of union'</p></li>\n<li><p>you are gonna need your datatype constructor 'Set' for every pattern matching.\n(or a wrapper function for unpacking Set constructor and a helper function passing two list. In this way, you may not need to make your own cons. I just think of that.)</p></li>\n<li><p>Cons for Set instead of (:)</p></li>\n<li><p>And a show instance for Set in order to show the result of union'.</p></li>\n</ol>\n\n<p>Just trust your compiler and everything will be fine eventually! Good luck! </p>\n"}], "owner": {"reputation": 321, "user_id": 2260430, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/UVI0j.jpg?s=128&g=1", "display_name": "l&#230;ran91", "link": "https://stackoverflow.com/users/2260430/l%c3%a6ran91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 47368222, "answer_count": 1, "score": 0, "last_activity_date": 1511021819, "creation_date": 1511015388, "last_edit_date": 1511015529, "question_id": 47367162, "link": "https://stackoverflow.com/questions/47367162/error-parse-error-on-input-in-haskell", "title": "error: parse error on input `::&#39; in haskell?", "body": "<p>I am a newbie to Haskell and Iam trying to implement <code>Set</code> ADT with one function named  <code>union</code> using <code>Lists</code>.here below is the code :</p>\n\n<pre><code>import Data.List\n\ndata Set a = Set [a]\nunion' :: Set a -&gt; Set a -&gt; Set a\nunion' xs [] = xs\nunion' [] ys = ys\nunion' x:xs ys = | not $ x:xs `elem` ys = x:union' xs ys\n                | otherwise union xs ys\n</code></pre>\n\n<p>I think am doing something terribly wrong here in type allocation. while compiling it's showing an error as below</p>\n\n<pre><code>error: parse error on input `::'\nunion' :: Set a  -&gt; Set a -&gt; Set a\n</code></pre>\n\n<p>pardon me for such silly mistakes but any help would be appreciated, Thank you</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": true, "score": 1, "last_activity_date": 1511016849, "last_edit_date": 1511016849, "creation_date": 1511015955, "answer_id": 47367250, "question_id": 47367148, "link": "https://stackoverflow.com/questions/47367148/haskell-custom-style-instance-show-for-data-type-with-list/47367250#47367250", "title": "Haskell custom style instance show for Data type with list", "body": "<p><code>x</code> and <code>y</code> aren't <code>Family</code> constructors. It looks like you're trying to pattern match on the fields of <code>Family</code>, but you can't do that with how you have things set up.</p>\n\n<p>I think what you were going for was something like:</p>\n\n<pre><code>instance Show Family where\n    show (Family x y) = (show x) ++ \"\\n\" ++ (printY y)\n</code></pre>\n\n<p>Note though, your <code>printY</code> function is \"broken\". Try writing a type signature for it. The problem is, you're printing in the function, which goes against the goal of turning the object into a String, which is what <code>show</code> is supposed to do. Change <code>printY</code> to <code>showY</code>, and remove the call to <code>putStrLn</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 2861, "user_id": 2847643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PmATO.jpg?s=128&g=1", "display_name": "user2847643", "link": "https://stackoverflow.com/users/2847643/user2847643"}, "is_accepted": false, "score": 0, "last_activity_date": 1511016020, "creation_date": 1511016020, "answer_id": 47367256, "question_id": 47367148, "link": "https://stackoverflow.com/questions/47367148/haskell-custom-style-instance-show-for-data-type-with-list/47367256#47367256", "title": "Haskell custom style instance show for Data type with list", "body": "<p>The type of show as defined by the Show typeclass is:</p>\n\n<pre><code>forall a. Show a =&gt; a -&gt; String\n</code></pre>\n\n<p>For your Family type it would specialize to:</p>\n\n<pre><code>Show Family =&gt; Family -&gt; String\n</code></pre>\n\n<p>You need to define the instance to match the above type:</p>\n\n<pre><code>instance Show Family where\n  show (Family x ys) = ...\n</code></pre>\n\n<p>And be sure to return a String.</p>\n"}], "owner": {"reputation": 25, "user_id": 5592324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e109800005f3982586a08c8d23155d7?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Concei&#231;&#227;o", "link": "https://stackoverflow.com/users/5592324/miguel-concei%c3%a7%c3%a3o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 47367250, "answer_count": 2, "score": 0, "last_activity_date": 1511016849, "creation_date": 1511015297, "question_id": 47367148, "link": "https://stackoverflow.com/questions/47367148/haskell-custom-style-instance-show-for-data-type-with-list", "title": "Haskell custom style instance show for Data type with list", "body": "<p>I'm trying to create a instance Show for my data type Family with the following structure:</p>\n\n<pre><code>x\n  y1\n  y2\n  y3\n</code></pre>\n\n<p>I've come up with this:</p>\n\n<pre><code>import Data.List\n\ndata Family = Family {x :: String, y :: [[Char]]} deriving (Eq,Read)\n\n-- this function prints the y in a new line with two spaces before\nprintY ys = putStrLn(foldr (++) \"\" (map (\\str -&gt; \"  \" ++ str ++ \"\\n\") ys))\n\ninstance Show Family where\n    show x = show x ++ \"\\n\"\n    show y = show printY y\n</code></pre>\n\n<p>But I get this error:</p>\n\n<pre><code>* Couldn't match expected type `Family -&gt; String'\n                  with actual type `[Char]'\n    * The function `show' is applied to two arguments,\n      but its type `([[Char]] -&gt; IO ()) -&gt; [Char]' has only one\n      In the expression: show printme descendentes\n      In an equation for `show':\n          show descendentes = show printme descendentes\n   |\n22 |         show y = show printY y\n</code></pre>\n\n<p>How could I fix this and get the show style I need?</p>\n"}, {"tags": ["haskell", "packages"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 2, "creation_date": 1511016902, "post_id": 47367124, "comment_id": 81687224, "body": "Well, <code>coproduct f g = \\case {InL fa -&gt; f fa; InR ga -&gt; g ga}</code>."}, {"owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1511017313, "post_id": 47367124, "comment_id": 81687340, "body": "Indeed, but it would be nice not to have to reinvent this every time ;)"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1511021205, "post_id": 47367124, "comment_id": 81688510, "body": "Depending on your use case, you might be able to use <code>foldMap</code> to extract the desired value."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1511040261, "post_id": 47367124, "comment_id": 81695033, "body": "I think that really should be added to <code>Data.Functor.Sum</code> by some name. Nothing shows up in Hayoo."}], "owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 8, "last_activity_date": 1511015121, "creation_date": 1511015121, "question_id": 47367124, "link": "https://stackoverflow.com/questions/47367124/where-did-data-functor-coproduct-go", "title": "Where did Data.Functor.Coproduct. go?", "body": "<p>I'm trying to use <code>Data.Functor.Coproduct</code> from <a href=\"https://hackage.haskell.org/package/comonad-4.0/docs/Data-Functor-Coproduct.html\" rel=\"noreferrer\"><code>comonad</code></a>, but it seem to have disappeared in the latest version.</p>\n\n<p>In the <a href=\"https://github.com/ekmett/comonad/blob/master/CHANGELOG.markdown\" rel=\"noreferrer\">changelog</a> it is mentioned that it was deprecated in favor of <a href=\"https://hackage.haskell.org/package/transformers-0.5.1.0/docs/Data-Functor-Sum.html\" rel=\"noreferrer\"><code>Data.Functor.Sum</code></a>, but I don't know where I can find an equivalent <code>coproduct</code> function for <code>Sum</code>:</p>\n\n<pre><code>coproduct :: (f a -&gt; b) -&gt; (g a -&gt; b) -&gt; Coproduct f g a -&gt; b\n</code></pre>\n"}, {"tags": ["haskell", "haskell-stack"], "owner": {"reputation": 4136, "user_id": 1675230, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9f9cdd386245eff27ad111fbd849a588?s=128&d=identicon&r=PG", "display_name": "Soldalma", "link": "https://stackoverflow.com/users/1675230/soldalma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1511001830, "creation_date": 1511001830, "question_id": 47365144, "link": "https://stackoverflow.com/questions/47365144/why-cant-i-compile-with-the-dynamic-option", "title": "Why can&#39;t I compile with the -dynamic option?", "body": "<p>I am very much beginning with Haskell and, following a video, I tried the following:</p>\n\n<pre><code>stack ghc -- -dynamic test.hs\n</code></pre>\n\n<p>The following error message was generated:</p>\n\n<pre><code>test.hs:1:1: error:\n    Failed to load interface for `Prelude'\n    Perhaps you haven't installed the \"dyn\" libraries for package `base-4.9.1.0'?\n    Use -v to see a list of the files searched for.\n</code></pre>\n\n<p>I tried to use -v as suggested but that did not help. </p>\n\n<p>A similar command without -dynamic works fine but generates a much larger executable file:</p>\n\n<pre><code>stack ghc test.hs\n</code></pre>\n\n<p>Any suggestions on how to fix this?</p>\n\n<p>(This is under Windows 10).</p>\n"}, {"tags": ["haskell", "tail"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510997560, "post_id": 47364469, "comment_id": 81681812, "body": "<code>[head xs]</code> will convert the char into a string, so you can append it, but your function is not safe."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1510998426, "post_id": 47364469, "comment_id": 81682038, "body": "Never use <code>head,tail</code>, use pattern matching instead."}, {"owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "edited": false, "score": 0, "creation_date": 1511177222, "post_id": 47364469, "comment_id": 81734688, "body": "@Michael Kohl: thanks! That is really straightforward. Should have figured that out."}, {"owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1511177347, "post_id": 47364469, "comment_id": 81734760, "body": "@Chi: why not use head or tail? One could make an &#39;error&#39; clause. Sorry to say but it seemed to me that pattern matching made it more complicated than necessary. And note: I am a beginner starting to grasp the power (and complexity) or Haskell ;-)"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1511179887, "post_id": 47364469, "comment_id": 81736333, "body": "@Madderote <code>head,tail</code> are partial operations: they will crash your program when they are fed with an empty list. Pattern matching is also often simpler to write e.g. compare your code with <code>mangle (x:xs) = xs ++ [x]</code>. Further, enabling warnings will make GHC report the missing cases in pattern matching. Code like <code>if (x.canFoo()) { x.foo() }</code> is common in say Java, where <code>x.foo()</code> will crash if we forget the previous check. In Haskell, similar code is an antipattern, since (exhaustive) pattern matching is a safer, and often simpler alternative."}], "answers": [{"tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": false, "score": 6, "last_activity_date": 1511003299, "creation_date": 1511003299, "answer_id": 47365325, "question_id": 47364469, "link": "https://stackoverflow.com/questions/47364469/haskell-take-first-char-of-list-and-append-at-end-of-that-list/47365325#47365325", "title": "Haskell take first Char of list and append at end of that list", "body": "<p>A very straight-forward solution could look like this:</p>\n\n<pre><code>mangle :: String -&gt; String\nmangle [] = []\nmangle (x:xs) = xs ++ [x] \n</code></pre>\n"}], "owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2002, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1511003299, "creation_date": 1510997124, "question_id": 47364469, "link": "https://stackoverflow.com/questions/47364469/haskell-take-first-char-of-list-and-append-at-end-of-that-list", "title": "Haskell take first Char of list and append at end of that list", "body": "<p>Given:</p>\n\n<pre><code>mangle :: String -&gt; String\n</code></pre>\n\n<p>and I want to do something like:</p>\n\n<pre><code>mangle xs = head xs -- works if you change typesig to [a] -&gt; a\n</code></pre>\n\n<p>but:</p>\n\n<pre><code>mangle xs = tail xs ++ head xs -- won't work at all!\n</code></pre>\n\n<p>Would like to append the first Char of a list at the end of that list, cutting that first Char.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 2, "creation_date": 1510989965, "post_id": 47363593, "comment_id": 81680120, "body": "What have you tried so far? Where are you having problems? Have you tried searching for those functions on Hoogle?"}], "answers": [{"tags": [], "owner": {"reputation": 23444, "user_id": 414413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6de2113f01432aa844dc85070ff33e89?s=128&d=identicon&r=PG", "display_name": "Cirdec", "link": "https://stackoverflow.com/users/414413/cirdec"}, "is_accepted": false, "score": 2, "last_activity_date": 1510991352, "last_edit_date": 1510991352, "creation_date": 1510990984, "answer_id": 47363790, "question_id": 47363593, "link": "https://stackoverflow.com/questions/47363593/is-the-a-way-to-write-a-function-with-this-signature/47363790#47363790", "title": "Is the a way to write a function with this signature?", "body": "<p>There's a problem. Knowing <code>c</code> doesn't give you any information about which <code>a</code>s will be passed to <code>(a -&gt; b)</code>. You either need to be able to enumerate the universe of <code>a</code>s or be able to inspect the provided <code>a</code> arguments with something like</p>\n\n<pre><code>(forall f. Functor f =&gt; ((a -&gt; f b) -&gt; c -&gt; f d)\n</code></pre>\n\n<p>In which case it becomes almost trivial to implement f.</p>\n\n<p>Instead of trying to implement <code>f</code> in general, you should try to generalize your functions like <code>((a -&gt; b) -&gt; c -&gt; d)</code> to see if you can replace them with lenses, traversals, or something similar.</p>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 4, "last_activity_date": 1510995468, "creation_date": 1510995468, "answer_id": 47364262, "question_id": 47363593, "link": "https://stackoverflow.com/questions/47363593/is-the-a-way-to-write-a-function-with-this-signature/47364262#47364262", "title": "Is the a way to write a function with this signature?", "body": "<p>No, it is impossible, at least without non-termination or unsafe operations. </p>\n\n<p>The argument is essentially similar to <a href=\"https://stackoverflow.com/a/27267992/3234959\">this one</a>: we exploit <code>f</code> to inhabit a type which we know can't be inhabited.</p>\n\n<p>Assume there exists</p>\n\n<pre><code>f :: Monad m =&gt; ((a -&gt; b) -&gt; c -&gt; d) -&gt; (a -&gt; m b) -&gt; m c -&gt; m d\n</code></pre>\n\n<p>Specialize <code>c ~ ()</code></p>\n\n<pre><code>f :: Monad m =&gt; ((a -&gt; b) -&gt; () -&gt; d) -&gt; (a -&gt; m b) -&gt; m () -&gt; m d\n</code></pre>\n\n<p>Hence</p>\n\n<pre><code>(\\g h -&gt; f (\\x _ -&gt; g x) h (return ()))\n  :: Monad m =&gt; ((a -&gt; b) -&gt; d) -&gt; (a -&gt; m b) -&gt; m d\n</code></pre>\n\n<p>Speciazlize <code>d ~ a</code>.</p>\n\n<pre><code>(\\g h -&gt; f (\\x _ -&gt; g x) h (return ()))\n  :: Monad m =&gt; ((a -&gt; b) -&gt; a) -&gt; (a -&gt; m b) -&gt; m a\n</code></pre>\n\n<p>Speclialize <code>m ~ Cont t</code></p>\n\n<pre><code>(\\g h -&gt; runCont $ f (\\x _ -&gt; g x) (cont . h) (return ()))\n  :: ((a1 -&gt; b) -&gt; a) -&gt; (a1 -&gt; (b -&gt; r) -&gt; r) -&gt; (a -&gt; r) -&gt; r\n</code></pre>\n\n<p>Take <code>h = const</code></p>\n\n<pre><code>(\\g -&gt; runCont $ f (\\x _ -&gt; g x) (cont . const) (return ()))\n  :: ((r -&gt; b) -&gt; a) -&gt; (a -&gt; r) -&gt; r\n</code></pre>\n\n<p>Hence</p>\n\n<pre><code>(\\g -&gt; runCont (f (\\x _ -&gt; g x) (cont . const) (return ())) id)\n  :: ((r -&gt; b) -&gt; r) -&gt; r\n</code></pre>\n\n<p>So, the type <code>((r -&gt; b) -&gt; r) -&gt; r</code> is inhabited, hence by the Curry-Howard isomoprhism it corresponds to a theorem of propositional intuitionistic logic. However, the formula <code>((A -&gt; B) -&gt; A) -&gt; A</code> is <a href=\"https://en.wikipedia.org/wiki/Peirce&#39;s_law\" rel=\"nofollow noreferrer\">Peirce's law</a> which is known to be non provable in such logic. </p>\n\n<p>We obtain a contradiction, hence there is no such <code>f</code>.</p>\n\n<hr>\n\n<p>By contrast, the type</p>\n\n<pre><code>f2 :: Monad m =&gt; ((a -&gt; a) -&gt; b -&gt; b) -&gt; (a -&gt; m a) -&gt; m b -&gt; m b\n</code></pre>\n\n<p>is inhabited by the term</p>\n\n<pre><code>f2 = \\ g h x -&gt; x\n</code></pre>\n\n<p>but I suspect this is not what you really want.</p>\n"}], "owner": {"reputation": 20310, "user_id": 525980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8dafe66793ee2f32192e9fcefb389a12?s=128&d=identicon&r=PG", "display_name": "Clinton", "link": "https://stackoverflow.com/users/525980/clinton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1510995468, "creation_date": 1510989402, "question_id": 47363593, "link": "https://stackoverflow.com/questions/47363593/is-the-a-way-to-write-a-function-with-this-signature", "title": "Is the a way to write a function with this signature?", "body": "<p>I've got a function that's doing something currently working with particular datatypes. I was wondering if I could make it a general. Here's a generalised version of it's signature:</p>\n\n<pre><code>f :: Monad m =&gt; ((a -&gt; b) -&gt; c -&gt; d) -&gt; (a -&gt; m b) -&gt; m c -&gt; m d\n</code></pre>\n\n<p>If the above can't be written, perhaps the more restricted version can?</p>\n\n<pre><code>f2 :: Monad m =&gt; ((a -&gt; a) -&gt; b -&gt; b) -&gt; (a -&gt; m a) -&gt; m b -&gt; m b\n</code></pre>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 5, "creation_date": 1510987272, "post_id": 47363263, "comment_id": 81679441, "body": "Why not use a list comprehension? <code>[[x, y] | x &lt;- [&#39;a&#39;..&#39;z&#39;], y &lt;- [&#39;a&#39;..&#39;z&#39;]]</code>"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 5, "creation_date": 1510987613, "post_id": 47363263, "comment_id": 81679556, "body": "You don&#39;t want <code>(++)</code> here because it takes as inputs lists and not characters. E.g. <code>liftA (\\x y -&gt; [x,y])</code> has the desired behaviour. For future reference, if you have code which doesn&#39;t compile, include the error you actually get."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1511002783, "post_id": 47363263, "comment_id": 81683294, "body": "You can make <code>(++)</code> work here with <code>[[x] ++ [y] | x &lt;- [&#39;a&#39;..&#39;z&#39;], y &lt;- [&#39;a&#39;..&#39;z&#39;]]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 6, "last_activity_date": 1510994771, "creation_date": 1510994771, "answer_id": 47364180, "question_id": 47363263, "link": "https://stackoverflow.com/questions/47363263/how-to-get-strings-aa-ab-up-to-yz-zz/47364180#47364180", "title": "How to get strings &#39;aa&#39;, ab&#39; up to &#39;yz&#39;, &#39;zz&#39;?", "body": "<p>All of these do what you want (remember <code>String = [Char]</code>):</p>\n\n<pre><code>Control.Monad.replicateM 2 ['a'..'z'] -- Cleanest; generalizes to all Applicatives\nsequence $ replicate 2 ['a'..'z'] -- replicateM n = sequenceA . replicate n\n-- sequence = sequenceA for monads\n-- sequence means cartesian product for the [] monad\n\n[[x, y] | x &lt;- ['a'..'z'], y &lt;- ['a'..'z']] -- Easiest for beginners\ndo x &lt;- ['a'..'z']\n   y &lt;- ['a'..'z']\n   return [x, y] -- For when you forget list comprehensions exist/need another monad\n['a'..'z'] &gt;&gt;= \\x -&gt; ['a'..'z'] &gt;&gt;= \\y -&gt; return [x, y] -- Desugaring of do\n-- Also, return x = [x] in this case\nconcatMap (\\x -&gt; map (\\y -&gt; [x, y]) ['a'..'z']) ['a'..'z'] -- Desugaring of comprehension\n-- List comprehensions have similar syntax to do-notation and mean about the same,\n-- but they desugar differently\n\n(\\x y -&gt; [x, y]) &lt;$&gt; ['a'..'z'] &lt;*&gt; ['a'..'z'] -- When you're being too clever\n(. return) . (:) &lt;$&gt; ['a'..'z'] &lt;*&gt; ['a'..'z'] -- Same as ^ but pointfree\n</code></pre>\n\n<p>The reason</p>\n\n<pre><code>(++) &lt;$&gt; ['a'..'z'] &lt;*&gt; ['a'..'z']\n</code></pre>\n\n<p>doesn't work is because you need <code>(++) :: Char -&gt; Char -&gt; [Char]</code>, but you only have <code>(++) :: [Char] -&gt; [Char] -&gt; [Char]</code>. You can throw in <code>returns</code>s on top of the arguments to <code>(++)</code> to put the <code>Char</code>s into singleton lists and get things to work:</p>\n\n<pre><code>(. return) . (++) . return &lt;$&gt; ['a'..'z'] &lt;*&gt; ['a'..'z']\n</code></pre>\n"}], "owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 47364180, "answer_count": 1, "score": 3, "last_activity_date": 1510994771, "creation_date": 1510986789, "question_id": 47363263, "link": "https://stackoverflow.com/questions/47363263/how-to-get-strings-aa-ab-up-to-yz-zz", "title": "How to get strings &#39;aa&#39;, ab&#39; up to &#39;yz&#39;, &#39;zz&#39;?", "body": "<p>How to get strings from 'aa' up to 'zz' in a list?\nI know it is obvious, but don't know the proper idiom to solve that kind of problems. Just show the idea with concrete examples and I'll figure out the rest.\nThanks.</p>\n\n<p>Tried</p>\n\n<pre><code>(++) &lt;$&gt; ['a'..'z'] &lt;*&gt; ['a'..'z']\n</code></pre>\n\n<p>but it doesn't compile.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 3, "creation_date": 1510966762, "post_id": 47361314, "comment_id": 81675752, "body": "If you&#39;re looking for Google juice: That syntax, where you leave out one operand of a symbolic infix operator, is called a <i>section</i>. <code>(&lt; 3)</code> means <code>(\\x -&gt; x &lt; 3)</code> and <code>(&quot;abc&quot; ++)</code> means <code>(\\x -&gt; &quot;abc&quot; ++ x)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1510966634, "post_id": 47361344, "comment_id": 81675726, "body": "Note however that <code>(&gt;10) 4</code> is quite different from <code>(&gt;) 10 4</code>. While currying / partial application lets one fix the first argument, the section syntax allows for both <code>(10&lt;)</code> and <code>(10&lt;)</code> -- this is not simply currying at work, it receives special parsing and handling from the compiler."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510966773, "post_id": 47361344, "comment_id": 81675756, "body": "@chi thank you so much, with such an expert like you I learn something new every day :), like... yesterday! If my memory doesn&#39;t fails, thanks so much for the comment and the time"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 3, "last_activity_date": 1510966649, "last_edit_date": 1510966649, "creation_date": 1510966227, "answer_id": 47361344, "question_id": 47361314, "link": "https://stackoverflow.com/questions/47361314/how-do-invisible-function-parameters-in-haskell-work/47361344#47361344", "title": "How do &quot;invisible&quot; function parameters in Haskell work?", "body": "<p>There go nowhere, you have to remember that every function in Haskell is currified, so, think in the <code>(+)</code> function, you can do the next, think in the type first:</p>\n\n<pre><code>(+) :: Num a =&gt; a -&gt; a -&gt; a\n</code></pre>\n\n<p>now I can do my custom plusOne, plusTwo, etc, so fast thanks to the curryfication, because </p>\n\n<pre><code>(+) :: Num a =&gt; a -&gt; a -&gt; a\n</code></pre>\n\n<p>has \"implicit paranthesis\" and really looks like:</p>\n\n<pre><code>(+) :: Num a =&gt; a -&gt; (a -&gt; a)\n</code></pre>\n\n<p>meaning give me a number a give you a function back, so:</p>\n\n<pre><code>plusOne :: Num a =&gt; a -&gt; a\nplusOne = (+1)\n\nplusTwo :: Num a =&gt; a -&gt; a\nplusTwo = (+2)\n</code></pre>\n\n<p>Can you see? you transform the <code>(+)</code> in a new function by giving to it just one of the two parameters, same happens with <code>&lt;</code> and  <code>&gt;</code>  functions, you can create the function <code>greaterThanTen</code> like this:</p>\n\n<pre><code>greaterThanTen :: (Num a, Ord a) =&gt; a -&gt; a\ngreaterThanTen = (&gt;10)\n</code></pre>\n\n<p>So in your example of <code>takeWhile (&lt; 3)</code> your <code>(&lt; 3)</code> is the function \"less than 3\", and if you \"read\" all the function would be \"take while n is less than 3\"</p>\n\n<p>you can play around with it in the console by asking the types with <code>:t</code> command</p>\n\n<pre><code>  :t (&lt; 3)\n(&lt; 3) :: (Num a, Ord a) =&gt; a -&gt; Bool\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 8947295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c02768c96b2b7449738fb4b947a13b?s=128&d=identicon&r=PG&f=1", "display_name": "Karim", "link": "https://stackoverflow.com/users/8947295/karim"}, "is_accepted": false, "score": 3, "last_activity_date": 1510966305, "creation_date": 1510966305, "answer_id": 47361350, "question_id": 47361314, "link": "https://stackoverflow.com/questions/47361314/how-do-invisible-function-parameters-in-haskell-work/47361350#47361350", "title": "How do &quot;invisible&quot; function parameters in Haskell work?", "body": "<p>The first argument to <code>takeWhile</code> is a predicate; this is your unary function <code>(&lt; 3)</code>, which is true, when the argument has numeric semantics and is less than <code>3</code>. This option is applied to each list member, making up a new list and terminating, when the predicate is not true the first time. The elements, which have passed, make up the result list.</p>\n\n<p>Your example is almost correct, you must only convert it into predicate form, i.e. create an unary function, which is true, when the parameter (a string) has a length less than 4. This can for example done by </p>\n\n<pre><code>(\\a -&gt; (length a) &lt; 4)\n</code></pre>\n\n<p>then</p>\n\n<pre><code>takeWhile (\\a -&gt; (length a) &lt; 4) [\"aaa\", \"aaaaa\"]\n</code></pre>\n\n<p>should     do what you expect.</p>\n"}, {"comments": [{"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510970934, "post_id": 47361436, "comment_id": 81676479, "body": "Haskell has trained me so much to read function composition right to left, that the <code>??</code> version is less readable to me."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510972428, "post_id": 47361436, "comment_id": 81676754, "body": "@4castle It&#39;s a composition but don&#39;t read it as such. Think of ?? as a placeholder for a variable. &quot;Length of something is less than four&quot;."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 9, "last_activity_date": 1510967173, "creation_date": 1510967173, "answer_id": 47361436, "question_id": 47361314, "link": "https://stackoverflow.com/questions/47361314/how-do-invisible-function-parameters-in-haskell-work/47361436#47361436", "title": "How do &quot;invisible&quot; function parameters in Haskell work?", "body": "<p><code>(&lt; 3)</code> is called a \"section\" and works only with infix operators. It's a syntactic sugar to write abbreviated functions. <code>(&lt; 3)</code> is equivalent to <code>\\x -&gt; x &lt; 3</code> and <code>(3 &lt;)</code> is equivalent to <code>\\x -&gt; 3 &lt; x</code>.</p>\n\n<p>Thus, <code>(&lt; 3)</code> is a function of one argument that returns a <code>Bool</code>. Which is exactly what <code>takeWhile</code> expects.</p>\n\n<p>With <code>length</code>, you have to write a function in full:</p>\n\n<pre><code>takeWhile (\\x -&gt; length x &lt; 4) [\"aaa\", \"aaaaa\"]\n</code></pre>\n\n<p>or define your own function you can curry:</p>\n\n<pre><code>shorterThan n x = length x &lt; n\n\ntakeWhile (shorterThan 4) [\"aaa\", \"aaaaa\"]\n</code></pre>\n\n<p>If you are feeling adventurous, you can write</p>\n\n<pre><code>takeWhile ((&lt; 4) . length) [\"aaa\", \"aaaaa\"]\n</code></pre>\n\n<p>or perhaps in a more readable fashion</p>\n\n<pre><code>(??) = flip (.)\n\ntakeWhile (length ?? (&lt; 4)) [\"aaa\", \"aaaaa\"]\n</code></pre>\n"}], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 47361436, "answer_count": 3, "score": 3, "last_activity_date": 1510967173, "creation_date": 1510965875, "question_id": 47361314, "link": "https://stackoverflow.com/questions/47361314/how-do-invisible-function-parameters-in-haskell-work", "title": "How do &quot;invisible&quot; function parameters in Haskell work?", "body": "<p>An example of what I am talking about is <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:takeWhile\" rel=\"nofollow noreferrer\"><code>takeWhile</code></a></p>\n\n<pre><code>takeWhile :: (a -&gt; Bool) -&gt; [a] -&gt; [a] \n</code></pre>\n\n<p>Example usage </p>\n\n<pre><code>takeWhile (&lt; 3) [1,2,3,4,1,2,3,4] == [1,2]\n</code></pre>\n\n<p>From what I can tell <code>(&lt; 3)</code> becomes <code>(a &lt; 3)</code> where a is the current item in the list being checked.</p>\n\n<p>How is this done in Haskell and how would I be able to move where <code>a</code> goes so I could do something like </p>\n\n<pre><code>takeWhile ((length a) &lt; 4) [\"aaa\", \"aaaaa\"]\n</code></pre>\n"}, {"tags": ["haskell", "gdb", "ghc", "cabal", "haskell-stack"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 1, "creation_date": 1510954030, "post_id": 47359448, "comment_id": 81671834, "body": "Maybe add --no-strip? <code>--no-strip: Disable DWARF debugging symbol stripping in libraries, executables, etc. for all expressions</code>"}, {"owner": {"reputation": 1026, "user_id": 1608594, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ac887bcdef32f832bd9439e8079ee981?s=128&d=identicon&r=PG", "display_name": "carbolymer", "link": "https://stackoverflow.com/users/1608594/carbolymer"}, "reply_to_user": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1510954862, "post_id": 47359448, "comment_id": 81672184, "body": "@Zpalmtree, That&#39;s right. I should&#39;ve looked into <code>stack install --help</code>... You can add it as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "is_accepted": true, "score": 7, "last_activity_date": 1510955089, "creation_date": 1510955089, "answer_id": 47359747, "question_id": 47359448, "link": "https://stackoverflow.com/questions/47359448/missing-debug-symbols-in-statically-linked-binary/47359747#47359747", "title": "Missing debug symbols in statically linked binary", "body": "<p><code>--no-strip</code> prevents debugging information being removed in the stack build.</p>\n\n<p>From the <a href=\"https://docs.haskellstack.org/en/stable/GUIDE/#dwarf\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>stack now supports debugging and profiling with DWARF information,\n  using the --no-strip, --no-library-stripping, and\n  --no-executable-stripping flags to disable the default behavior of removing such information from compiled libraries and executables.</p>\n</blockquote>\n"}], "owner": {"reputation": 1026, "user_id": 1608594, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ac887bcdef32f832bd9439e8079ee981?s=128&d=identicon&r=PG", "display_name": "carbolymer", "link": "https://stackoverflow.com/users/1608594/carbolymer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 47359747, "answer_count": 1, "score": 6, "last_activity_date": 1512688660, "creation_date": 1510953616, "last_edit_date": 1512688660, "question_id": 47359448, "link": "https://stackoverflow.com/questions/47359448/missing-debug-symbols-in-statically-linked-binary", "title": "Missing debug symbols in statically linked binary", "body": "<p>I'm building statically linked binary using stack and I try to add debug symbols to it (following: <a href=\"https://downloads.haskell.org/~ghc/master/users-guide/debug-info.html\" rel=\"nofollow noreferrer\">https://downloads.haskell.org/~ghc/master/users-guide/debug-info.html</a>). However GDB reports: <code>no debugging symbols found</code>.</p>\n\n<p>What am I missing?</p>\n\n<p>I've added to the <code>ghc-options</code> in the <a href=\"https://github.com/carbolymer/haskell-missing-debug-symbols/blob/master/nodebug.cabal\" rel=\"nofollow noreferrer\"><code>.cabal</code> file</a>: <code>-g -rtsopts</code> and to the <code>ld-options</code>: <code>-static</code>. I am building using stack with the following command:</p>\n\n<pre><code>stack install \\\n    --install-ghc \\\n    --split-objs \\\n    --ghc-options=\"-fPIC -fllvm -pgmlo opt -pgmlc llc\"\n</code></pre>\n\n<p>GDB is invoked as follows: <code>gdb --args nodebug-exe +RTS -V0</code></p>\n\n<p>GHC 8.2.1</p>\n\n<p>Whole source code is here: <a href=\"https://github.com/carbolymer/haskell-missing-debug-symbols\" rel=\"nofollow noreferrer\">https://github.com/carbolymer/haskell-missing-debug-symbols</a></p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "edited": false, "score": 0, "creation_date": 1510953702, "post_id": 47359416, "comment_id": 81671692, "body": "It looks like the definition of DomsPlayer is a type synonym for a function, not a data type."}, {"owner": {"reputation": 2570, "user_id": 4142266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rMCN5.png?s=128&g=1", "display_name": "mschmidt", "link": "https://stackoverflow.com/users/4142266/mschmidt"}, "edited": false, "score": 0, "creation_date": 1510954157, "post_id": 47359416, "comment_id": 81671888, "body": "Your type <code>DomsPlayer</code> is a function of two arguments (<code>Hand</code> and <code>Board</code>).  Your function <code>playTurn</code> take as argument such a <code>DomsPlayer</code> function and returns a triple. However, your pattern match for <code>playTurn</code> has 2 arguments (<code>hand1</code> and <code>board1</code>). This does not fit together."}, {"owner": {"reputation": 549, "user_id": 1524453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ed2un.png?s=128&g=1", "display_name": "Federico Sawady", "link": "https://stackoverflow.com/users/1524453/federico-sawady"}, "edited": false, "score": 1, "creation_date": 1510954381, "post_id": 47359416, "comment_id": 81671980, "body": "I give an answer but in order to help you I want to know what are you trying to do. Do you want to recieve a <code>Hand</code> and a <code>Board</code>? Or do you want a <code>(Domino, End)</code> too? Clearly you are defining a function, because <code>DomsPlayer</code> is a synonym of function."}, {"owner": {"reputation": 39, "user_id": 8959952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f70f5672a0d85f7e5afff9390b7890?s=128&d=identicon&r=PG&f=1", "display_name": "null-skill", "link": "https://stackoverflow.com/users/8959952/null-skill"}, "edited": false, "score": 0, "creation_date": 1510954837, "post_id": 47359416, "comment_id": 81672168, "body": "I want a (Domino, End) as well."}, {"owner": {"reputation": 549, "user_id": 1524453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ed2un.png?s=128&g=1", "display_name": "Federico Sawady", "link": "https://stackoverflow.com/users/1524453/federico-sawady"}, "edited": false, "score": 0, "creation_date": 1510955043, "post_id": 47359416, "comment_id": 81672269, "body": "Ok, so why did you create <code>DomsPlayer</code> for? To group <code>Hand</code>, <code>Board</code> and <code>(Domino, End)</code>?"}, {"owner": {"reputation": 39, "user_id": 8959952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f70f5672a0d85f7e5afff9390b7890?s=128&d=identicon&r=PG&f=1", "display_name": "null-skill", "link": "https://stackoverflow.com/users/8959952/null-skill"}, "edited": false, "score": 0, "creation_date": 1510956012, "post_id": 47359416, "comment_id": 81672640, "body": "DomsPlayer groups the strategies for choosing a move; playTurn plays the chosen move and updates the game state."}, {"owner": {"reputation": 549, "user_id": 1524453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ed2un.png?s=128&g=1", "display_name": "Federico Sawady", "link": "https://stackoverflow.com/users/1524453/federico-sawady"}, "edited": false, "score": 0, "creation_date": 1510956843, "post_id": 47359416, "comment_id": 81672964, "body": "Ok, do you want the strategy to be a function? Because that is the way you defined it. I think it could be a triple instead."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 2, "creation_date": 1510957231, "post_id": 47359416, "comment_id": 81673115, "body": "it looks a simple type mismatch to me. this should be straightforward confusion. might i kindly ask why people up vote it?"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1510957724, "post_id": 47359416, "comment_id": 81673302, "body": "@HuStmpHrrr because it&#39;s a valid well formed question showing code, effort and the question is very clear"}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1510957727, "post_id": 47359416, "comment_id": 81673304, "body": "Voting to close as too broad, since you seem to be fundamentally misunderstanding a large amount of haskell syntax but I don&#39;t know how to help you other than to direct you to a good haskell book. Some things that might help: 1) in your code you return the triple <code>(score, hand2, board2)</code>, but do nothing with the bound values <code>dom</code> and <code>end</code> (always compile with <code>-Wall</code> to notice this kind of thing). 2) the function arrow (<code>-&gt;</code>) is right associative, so e.g. these are the same: <code>a -&gt; b -&gt; c</code> , <code>a -&gt; (b -&gt; c)</code>"}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1510957877, "post_id": 47359416, "comment_id": 81673368, "body": "3) there is absolutely nothing at the <i>value</i> level affected by <code>type</code>; when you create a type synonym you&#39;re essentially creating a simple macro that expands in a type signature"}], "answers": [{"tags": [], "owner": {"reputation": 549, "user_id": 1524453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ed2un.png?s=128&g=1", "display_name": "Federico Sawady", "link": "https://stackoverflow.com/users/1524453/federico-sawady"}, "is_accepted": false, "score": 0, "last_activity_date": 1510956957, "last_edit_date": 1510956957, "creation_date": 1510954202, "answer_id": 47359575, "question_id": 47359416, "link": "https://stackoverflow.com/questions/47359416/extracting-values-from-haskell-type-synonyms/47359575#47359575", "title": "Extracting values from Haskell type synonyms", "body": "<p>If you replace this <code>DomsPlayer</code> with its definition</p>\n\n<pre><code>type DomsPlayer = Hand -&gt; Board -&gt; (Domino,End)\n\nplayTurn :: (Hand -&gt; Board -&gt; (Domino,End)) -&gt; (Int, Hand, Board)\n</code></pre>\n\n<p>you will see that playTurn recieves only one parameter, not two.</p>\n\n<p>I don't know what you are trying to do, but clearly you will need to recieve <code>Hand</code> and <code>Board</code> as separate params:</p>\n\n<pre><code>playTurn :: Hand -&gt; Board -&gt; ... -&gt; (Int, Hand, Board)\n</code></pre>\n\n<p>And I don't know, maybe also pass a function of type <code>DomsPlayer</code> too, and apply it to those separate arguments.</p>\n\n<p>But that is your error.</p>\n"}], "owner": {"reputation": 39, "user_id": 8959952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f70f5672a0d85f7e5afff9390b7890?s=128&d=identicon&r=PG&f=1", "display_name": "null-skill", "link": "https://stackoverflow.com/users/8959952/null-skill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1510956957, "creation_date": 1510953464, "question_id": 47359416, "link": "https://stackoverflow.com/questions/47359416/extracting-values-from-haskell-type-synonyms", "title": "Extracting values from Haskell type synonyms", "body": "<p>I'm writing a Dominoes game for class and can't wrap my head around custom types. I have:</p>\n\n<pre><code>type DomsPlayer = Hand -&gt; Board -&gt; (Domino,End)\n...\nplayTurn :: DomsPlayer -&gt; (Int, Hand, Board)\nplayTurn hand1 board1 = (score, hand2, board2)\n  where (dom, end) = simplePlayer hand1 board1\n                     board2 = resMaybe (playDom dom board1 end)\n                     hand2 = remove dom hand1\n                     score = scoreBoard board2\n</code></pre>\n\n<p>Trying to load this gives me the errors:</p>\n\n<blockquote>\n  <p>Dominoes.hs:43:3: error:</p>\n  \n  <p>\u2022 Couldn't match expected type \u2018(Int, Hand, Board)\u2019\n                   with actual type \u2018Board -> (Int, b0, Board)\u2019</p>\n  \n  <p>\u2022 The equation(s) for \u2018playTurn\u2019 have two arguments,\n       but its type \u2018DomsPlayer -> (Int, Hand, Board)\u2019 has only one</p>\n  \n  <p>|\n  43 |   playTurn hand1 board1 = (score, hand2, board2)    |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^...</p>\n  \n  <p>Dominoes.hs:44:37: error:</p>\n  \n  <p>\u2022 Couldn't match type \u2018Hand -> Board -> (Domino, End)\u2019\n                       with \u2018[Domino]\u2019</p>\n  \n  <p>Expected type: Hand\n        Actual type: DomsPlayer</p>\n  \n  <p>\u2022 Probable cause: \u2018hand1\u2019 is applied to too few arguments</p>\n  \n  <p>In the first argument of \u2018simplePlayer\u2019, namely \u2018hand1\u2019</p>\n  \n  <p>In the expression: simplePlayer hand1 board1</p>\n  \n  <p>In a pattern binding: (dom, end) = simplePlayer hand1 board1</p>\n  \n  <p>|\n  44 |     where (dom, end) = simplePlayer hand1 board1    |</p>\n</blockquote>\n\n<p>How do I retrieve the values from DomsPlayer?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510951457, "post_id": 47358898, "comment_id": 81670646, "body": "<code>duplicate = flip (concatMap . replicate)</code>"}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 1, "creation_date": 1510951595, "post_id": 47358898, "comment_id": 81670714, "body": "<a href=\"https://stackoverflow.com/questions/47356188/in-haskell-how-can-you-multiply-a-list-of-string\">You asked the same question 3hrs ago</a>. You have made no improvement. This is spam."}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "reply_to_user": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1510951752, "post_id": 47358898, "comment_id": 81670789, "body": "@AJFarmar It&#39;s not spam, it&#39;s a duplicate. The system has automatic penalties for repeatedly asking poor questions."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 1, "creation_date": 1510951805, "post_id": 47358898, "comment_id": 81670814, "body": "@4castle This question is an almost perfect duplicate of the one linked, and by the same user."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 1, "creation_date": 1510970564, "post_id": 47358898, "comment_id": 81676415, "body": "@AJFarmar It&#39;s a bad question, and a duplicate, and deserves to be downvoted and closed. But that&#39;s a separate question from whether it is spam: it is not trying to sell us Nigerian-prince pills or something."}], "answers": [{"tags": [], "owner": {"reputation": 2570, "user_id": 4142266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rMCN5.png?s=128&g=1", "display_name": "mschmidt", "link": "https://stackoverflow.com/users/4142266/mschmidt"}, "is_accepted": false, "score": 3, "last_activity_date": 1510951893, "creation_date": 1510951893, "answer_id": 47359064, "question_id": 47358898, "link": "https://stackoverflow.com/questions/47358898/how-can-i-write-a-function-which-will-multiply-every-alphabet-of-string-n-times/47359064#47359064", "title": "how can i write a function which will multiply every alphabet of string n times in Haskell", "body": "<p>You should look at the following functions in Prelude:</p>\n\n<ul>\n<li><code>map :: (a -&gt; b) -&gt; [a] -&gt; [b]</code> to \"do someting\" with every element of a list</li>\n<li><code>replicate :: Int -&gt; a -&gt; [a]</code> to replicate an item n times</li>\n<li><code>concat :: Foldable t =&gt; t [a] -&gt; [a]</code> to concat, e.g a list of lists into a single list</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1233, "user_id": 7970829, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OGdYb.png?s=128&g=1", "display_name": "oRole", "link": "https://stackoverflow.com/users/7970829/orole"}, "is_accepted": false, "score": 0, "last_activity_date": 1510954366, "last_edit_date": 1510954366, "creation_date": 1510954061, "answer_id": 47359552, "question_id": 47358898, "link": "https://stackoverflow.com/questions/47358898/how-can-i-write-a-function-which-will-multiply-every-alphabet-of-string-n-times/47359552#47359552", "title": "how can i write a function which will multiply every alphabet of string n times in Haskell", "body": "<p>Actually there are many ways to achieve what you want: </p>\n\n<p>You could either do it recursively...</p>\n\n<pre><code>duplicate :: String -&gt; Int -&gt; String\nduplicate (c:s) n \n    | s == [] = replicate n c\n    | otherwise = replicate n c ++ duplicate s n  \n</code></pre>\n\n<p>... or as the others pointed out, by using some of the Prelude functions ...</p>\n\n<pre><code>duplicate' :: String -&gt; Int -&gt; String\nduplicate' s n = concatMap (replicate n) s\n</code></pre>\n\n<p>... or by using fold ...</p>\n\n<pre><code>duplicate'' :: String -&gt; Int -&gt; String\nduplicate'' s n = foldr1 (\\c acc -&gt; replicate n c ++ acc) \"\" s\n</code></pre>\n\n<p>You would use these functions like: </p>\n\n<pre><code>main :: IO ()\nmain = do \n    print $ duplicate   \"abc\" 3 -- \"aaabbbccc\"\n    print $ duplicate'  \"abc\" 3 -- \"aaabbbccc\"\n    print $ duplicate'' \"abc\" 3 -- \"aaabbbccc\"\n</code></pre>\n"}], "owner": {"reputation": 443, "user_id": 7204683, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/5ovO7.png?s=128&g=1", "display_name": "Johon smuthio", "link": "https://stackoverflow.com/users/7204683/johon-smuthio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1510955226, "answer_count": 2, "score": -8, "last_activity_date": 1510954366, "creation_date": 1510951099, "question_id": 47358898, "link": "https://stackoverflow.com/questions/47358898/how-can-i-write-a-function-which-will-multiply-every-alphabet-of-string-n-times", "closed_reason": "Duplicate", "title": "how can i write a function which will multiply every alphabet of string n times in Haskell", "body": "<p>I'm trying to write a function that takes a String and an Int and returns that every element of string  is multiplyed \"int\" times. That is:</p>\n\n<pre><code>duplicate :: String -&gt; Int -&gt; String\nduplicate \" abc \" 2\n</code></pre>\n\n<p>the output should be</p>\n\n<pre><code>Main &gt;&gt; \"   aabbcc   \"\n</code></pre>\n"}, {"tags": ["haskell", "types"], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 0, "last_activity_date": 1510950462, "last_edit_date": 1510950462, "creation_date": 1510950096, "answer_id": 47358677, "question_id": 47358520, "link": "https://stackoverflow.com/questions/47358520/haskell-couldnt-match-type-string-int-with-a0/47358677#47358677", "title": "Haskell Couldn&#39;t match type \u2018String -&gt; [Int]\u2019 with \u2018[a0]\u2019", "body": "<pre><code>readArray :: [Int] -&gt; String -&gt; [Int]\n</code></pre>\n\n<p>This takes a <code>[Int]</code> and returns a function <code>String -&gt; [Int]</code></p>\n\n<pre><code>maxSeqLength :: Eq a =&gt; [a] -&gt; Int\n</code></pre>\n\n<p>This accepts a list <code>[a]</code> and returns an <code>Int</code>.</p>\n\n<p>Since a function <code>String -&gt; [Int]</code> is not a list <code>[a]</code>, you can't compose them using <code>(.)</code>.</p>\n\n<hr>\n\n<p>Error aside, also note that</p>\n\n<pre><code>readNQ =  take 2 . (map read) . words\n</code></pre>\n\n<p>reads the first two ints from the input, and discard the rest. It's gone. The next function in your function chain <code>(... . fun . readNQ)</code> can not access what was thrown away from the first function.</p>\n\n<p>You need to rework your <code>readNQ</code> so that it returns a pair <code>([n1,n2], restOfTheInput)</code> if you want the next function to use it.</p>\n\n<p>Probably, the code will become too complex to be expressed in pointfree style, but that's OK. Further, <code>interact</code> quickly starts being unusable for large tasks.</p>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1510950101, "creation_date": 1510950101, "answer_id": 47358678, "question_id": 47358520, "link": "https://stackoverflow.com/questions/47358520/haskell-couldnt-match-type-string-int-with-a0/47358678#47358678", "title": "Haskell Couldn&#39;t match type \u2018String -&gt; [Int]\u2019 with \u2018[a0]\u2019", "body": "<p>That's because you have a type error in the function <code>readArray :: [Int] -&gt; String -&gt; [Int]</code> , it should have the type <code>readArray :: [Int] -&gt; String</code> if you want that this expression works:</p>\n\n<pre><code>(showResults . maxSeqLength . readArray . readNQ)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6136015, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1196526490360559/picture?type=large", "display_name": "Sasithorn Hannarong", "link": "https://stackoverflow.com/users/6136015/sasithorn-hannarong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1510950462, "creation_date": 1510949332, "question_id": 47358520, "link": "https://stackoverflow.com/questions/47358520/haskell-couldnt-match-type-string-int-with-a0", "title": "Haskell Couldn&#39;t match type \u2018String -&gt; [Int]\u2019 with \u2018[a0]\u2019", "body": "<p>I want to create a program counting occurrence of all elements in a list and return max sequence. I have a problem with my input part. </p>\n\n<p>The input consists of several test cases. Each test case starts with a line containing two integers n and q (1 \u2264 n, q \u2264 100000). The next line contains n integers a1 , ... , an (-100000 \u2264 ai \u2264 100000</p>\n\n<p>I want readNQ to get n and q as [int] then pass to readArray that will read n element and assign to [int] as following</p>\n\n<pre><code>module Main where\n\nimport Text.Printf\nimport Data.List\n\nmain :: IO()\nmain = interact (showResults . maxSeqLength . readArray. readNQ)\n\nreadNQ :: String -&gt; [Int]\nreadNQ =  take 2 . (map read) . words\n\nreadArray :: [Int] -&gt; String -&gt; [Int]\nreadArray (n:xs) = take n . (map read) . words\n\n\nshowResults ::  Int -&gt; String\nshowResults x = printf \"\\n %d\" x\n\nmaxSeqLength :: Eq a =&gt; [a] -&gt; Int\nmaxSeqLength [] = 0\nmaxSeqLength xs = (maximum . map length . group) xs\n</code></pre>\n\n<p>However, there is an error.</p>\n\n<p>frequent.hs:13:47: error:</p>\n\n<pre><code>\u2022 Couldn't match type \u2018String -&gt; [Int]\u2019 with \u2018[a0]\u2019\n  Expected type: String -&gt; [a0]\n    Actual type: String -&gt; String -&gt; [Int]\n\u2022 Probable cause: \u2018(.)\u2019 is applied to too few arguments\n  In the second argument of \u2018(.)\u2019, namely \u2018readArray . readNQ\u2019\n  In the second argument of \u2018(.)\u2019, namely\n    \u2018maxSeqLength . readArray . readNQ\u2019\n  In the first argument of \u2018interact\u2019, namely\n    \u2018(showResults . maxSeqLength . readArray . readNQ)\u2019\n</code></pre>\n\n<p>what is wrong with the type of readNQ and readArray?</p>\n"}, {"tags": ["list", "haskell", "tree"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 3, "creation_date": 1510946081, "post_id": 47357604, "comment_id": 81668010, "body": "You&#39;ve forgotten to say what <code>main</code> does! Try for example <code>main = do print (root &quot;Bob&quot;)</code>."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1510946098, "post_id": 47357604, "comment_id": 81668019, "body": "It will be much easier to build your tree the other way around, from the bottom up. Since you can&#39;t &quot;modify&quot; Bob&#39;s node once you&#39;ve created it, you can&#39;t &quot;add&quot; a descendant to him without tearing apart the whole tree and reassembling it. Conversely, it is easy to create Rudy&#39;s subtree from two leaves, and likewise for Simon, and then finally create Bob as the parent of both of those."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1510946133, "post_id": 47357604, "comment_id": 81668038, "body": "Also, do check out this <a href=\"https://stackoverflow.com/q/6163683/791604\">classic advice on designing genealogy software</a>, if only because it is a delightful read."}, {"owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1510946398, "post_id": 47357604, "comment_id": 81668177, "body": "@amalloy what do you mean? Like, add the bottom most &quot;children&quot; first?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1510949528, "post_id": 47357604, "comment_id": 81669804, "body": "as aside: <code>Root</code> isn&#39;t a great name for that data constructor. Consider <code>Node</code> or <code>Branch</code> or etc. The root of a tree should be the single convergent point, if one exists (&quot;Bob&quot;, in your example.)"}, {"owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1510954909, "post_id": 47357604, "comment_id": 81672210, "body": "@AdamSmith in the data Family? Like this: <code>data Family a = Node a [Family a] ...</code> instead of Root?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1510962762, "post_id": 47357604, "comment_id": 81674830, "body": "@Wireless yes. You can name it whatever you want. <code>data Family a = LiterallyAnythingAtAll a [Family a] ...</code> will still work, but you know what they say: there&#39;s only two hard problems in computer science, and one of them is naming things. (The other two are cache invalidation and off-by-one errors)."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "edited": false, "score": 0, "creation_date": 1510946348, "post_id": 47357668, "comment_id": 81668151, "body": "I see this works, the thing is I wanted to start it with a function root"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "edited": false, "score": 1, "creation_date": 1510948367, "post_id": 47357668, "comment_id": 81669260, "body": "@Wireless ah ok ok, I didn&#39;t understood well, so create a function"}, {"owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "edited": false, "score": 0, "creation_date": 1510955650, "post_id": 47357668, "comment_id": 81672500, "body": "Hey, I&#39;ve gotten my code like this:  <code>module Geneaology where data Family a = Node a [Family a] | Empty deriving (Show, Read)  root :: String -&gt; Family String root a = Node a [Empty]  main :: IO() main = do print (root &quot;Bob&quot;)</code>  It&#39;s giving me the following output: <code>Node &quot;Bob&quot; [Empty]</code> How do I make it print only &quot;Bob&quot;?"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "edited": false, "score": 0, "creation_date": 1510955864, "post_id": 47357668, "comment_id": 81672586, "body": "@Wireless fantastic! So your original question is answered, don&#39;t forget to vote and accept ;). Now, that is a totally different question, is better if you ask a new question for that. So is clearly for future readers. But is simple, I can give you a hint, make your own instance of Show and define the show method"}, {"owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "edited": false, "score": 0, "creation_date": 1510956185, "post_id": 47357668, "comment_id": 81672730, "body": "Alright, was just clearing up all doubts before voting, I always vote don&#39;t worry xD Thanks for the help! I think that should be enough, I&#39;ll ask a new question if needed :D"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "edited": false, "score": 0, "creation_date": 1510956275, "post_id": 47357668, "comment_id": 81672765, "body": "@Wireless don&#39;t worry at all, I have always loved to help"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 2, "last_activity_date": 1510956249, "last_edit_date": 1510956249, "creation_date": 1510945776, "answer_id": 47357668, "question_id": 47357604, "link": "https://stackoverflow.com/questions/47357604/trouble-understanding-haskell-trees/47357668#47357668", "title": "Trouble Understanding Haskell Trees", "body": "<p>You have a syntax error, you can create a function in the main with a let and a lambda, and then use it</p>\n\n<pre><code>data Family a = Root a [Family a] | Empty deriving (Show, Read)\n\nmain :: IO()\nmain = do\n  let root  = (\\a  -&gt; Root a [Empty])\n  print(root \"Bob\")\n</code></pre>\n\n<p>But you can also define functions outside the main and call them latter:</p>\n\n<pre><code>root :: String -&gt; Family String\nroot a = Root a [Empty]\n\nmain :: IO()\nmain = do\n  print(root \"Bob\")\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 7212810, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pNFqk.jpg?s=128&g=1", "display_name": "Wireless", "link": "https://stackoverflow.com/users/7212810/wireless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 47357668, "answer_count": 1, "score": 4, "last_activity_date": 1572883552, "creation_date": 1510945493, "last_edit_date": 1572883552, "question_id": 47357604, "link": "https://stackoverflow.com/questions/47357604/trouble-understanding-haskell-trees", "title": "Trouble Understanding Haskell Trees", "body": "<p>I'm having a few issues with trees, I was trying to make a simplified Family tree (genealogy tree) where I start with only 1 person, let's say Grandpa Bob, I'll try my best drawing this:</p>\n\n<pre><code>                                        BOB\n                                         |\n                                     /        \\\n                                 SIMON         RUDY\n                                /    \\         /  \\\n                            ROBBIE  MARTHA  TOM   ISABEL\n</code></pre>\n\n<p>So, Grandpa Bob had 2 kids with Grandma(which doesn't matter here), Simon and Rudy, then Simon and Rudy both had 2 kids each (only 1 parent matters again), note that this is not necessarily the tree I want to make but only an example which can be used by you guys to help me out. I want to have it as a data Family, then have a function that initiates the \"root\" which will be Grandpa Bob and then have another function that will let me add someone to the tree, as in add Simon descending from Bob.</p>\n\n<p>So far this is what I have atm(I've tried other things and changed it all over):</p>\n\n<pre><code>    module Geneaology where\n    data Family a = Root a [Family a] | Empty deriving (Show, Read)\n\n    main :: IO()\n    main = do\n    root :: String -&gt; Family\n    root a = ((Root a) [Empty])\n</code></pre>\n\n<p>Now, this doesn't work at all and gives me a parse error:</p>\n\n<pre><code>t4.hs:9:10: parse error on input \u2018=\u2019\n</code></pre>\n\n<p>I've tried to fix this and change the code around looking for other ways, and saw other posts as well, but didn't make any progress...</p>\n\n<p>I think I made myself clear, thanks in advance xD</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 1, "creation_date": 1510939686, "post_id": 47356188, "comment_id": 81664894, "body": "Are you sure that&#39;s the expected output? I would expect that to be expected for <code>duplicate [&quot;ab&quot;,&quot;ac&quot;,&quot;yt&quot;,&quot;hfg&quot;,&quot;lkj&quot;,&quot;poi&quot;] 2</code>. Also, please add the code you have so far."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1510939696, "post_id": 47356188, "comment_id": 81664897, "body": "That&#39;s not a question."}, {"owner": {"reputation": 443, "user_id": 7204683, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/5ovO7.png?s=128&g=1", "display_name": "Johon smuthio", "link": "https://stackoverflow.com/users/7204683/johon-smuthio"}, "edited": false, "score": 0, "creation_date": 1510939731, "post_id": 47356188, "comment_id": 81664911, "body": "yes sorry it is 2 not 3. sorry"}, {"owner": {"reputation": 1496, "user_id": 7350814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd7e1bdad619c54ab51e05ff9cfaa199?s=128&d=identicon&r=PG&f=1", "display_name": "Jogger", "link": "https://stackoverflow.com/users/7350814/jogger"}, "edited": false, "score": 0, "creation_date": 1510940130, "post_id": 47356188, "comment_id": 81665102, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47353797/multiplying-string-in-a-list-haskell\">Multiplying String in a list, Haskell</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1510942585, "last_edit_date": 1510942585, "creation_date": 1510941961, "answer_id": 47356752, "question_id": 47356188, "link": "https://stackoverflow.com/questions/47356188/in-haskell-how-can-you-multiply-a-list-of-string/47356752#47356752", "title": "In Haskell how can you multiply a list of string?", "body": "<pre><code>duplicate = (. replicate) . (&gt;&gt;=)\n</code></pre>\n\n<p>or more basic</p>\n\n<pre><code>duplicate xs n = concatMap (replicate n) xs\n</code></pre>\n\n<p>if you want to have list multiplication by notation as well</p>\n\n<pre><code>&gt; let (**) :: [a] -&gt; Int -&gt; [a]\n|     (**) = (. replicate) . (&gt;&gt;=)\n\n&gt; [\"a\",\"b\"]**3\n[\"a\",\"a\",\"a\",\"b\",\"b\",\"b\"]\n</code></pre>\n"}], "owner": {"reputation": 443, "user_id": 7204683, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/5ovO7.png?s=128&g=1", "display_name": "Johon smuthio", "link": "https://stackoverflow.com/users/7204683/johon-smuthio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "closed_date": 1510955295, "answer_count": 1, "score": -7, "last_activity_date": 1510942585, "creation_date": 1510939601, "last_edit_date": 1510939777, "question_id": 47356188, "link": "https://stackoverflow.com/questions/47356188/in-haskell-how-can-you-multiply-a-list-of-string", "closed_reason": "Needs more focus", "title": "In Haskell how can you multiply a list of string?", "body": "<p>I'm trying to write a function that takes a list of Strings and an Int and returns that list of strings in which every string is \"int\" times. That is:</p>\n\n<pre><code>duplicate :: [String] -&gt; Int -&gt; [String]\nduplicate [\"ab\",\"ac\",\"yt\",\"hfg\",\"lkj\",\"poi\"] 2 \n</code></pre>\n\n<p>the output should be </p>\n\n<pre><code>[\"ab\",\"ab\",\"ac\",\"ac\",\"yt\",\"yt\",\"hfg\",\"hfg\",\"lkj\",\"lkj\",\"poi\",\"poi\"]\n</code></pre>\n"}, {"tags": ["csv", "haskell", "list-comprehension"], "answers": [{"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1510941170, "creation_date": 1510941170, "answer_id": 47356578, "question_id": 47356044, "link": "https://stackoverflow.com/questions/47356044/haskell-parsing-csv-with-header-to-list-of-lists/47356578#47356578", "title": "Haskell parsing csv with header to list of lists", "body": "<p>I'm not familiar with <code>Pipe</code>, but it looks like you're pulling data out into an <code>Either</code>, which conventionally uses the <code>Right</code> constructor for data and the <code>Left</code> constructor for an error message.</p>\n\n<pre><code>data Either a b = Left a | Right b\n</code></pre>\n\n<p>In this case you're building an <code>Either String (V.Vector Text.Text)</code>, so your result will either be:</p>\n\n<pre><code>:: Left String\n</code></pre>\n\n<p>or</p>\n\n<pre><code>:: Right (V.Vector Text.Text)\n</code></pre>\n\n<p>in this case you're getting the latter, and want to <code>show</code> the value pulled out of the <code>Either</code> monad. You can use <code>either</code> to handle both possibilities at once (in much the same way you'd use <code>maybe</code> in the <code>Maybe</code> monad).</p>\n\n<pre><code>showPipe :: Proxy () (Either String (V.Vector Text.Text)) () String IO b\nshowPipe = forever $ do\n    x::(Either String (V.Vector Text.Text)) &lt;- await\n    let v = either id show x\n    yield v\n</code></pre>\n\n<p>This checks if <code>x</code> is a <code>Left a</code> or a <code>Right b</code> and returns either <code>id a</code> or <code>show b</code> depending. <code>either</code> is type</p>\n\n<pre><code>either :: (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c\n-- or, specialized for this case:\neither :: (String -&gt; String)\n           -&gt; ((V.Vector Text.Text) -&gt; String)\n           -&gt; Either String (V.Vector Text.Text)\n           -&gt; String\n</code></pre>\n\n<p>Either (a hyuk) way you should be yielding a <code>String</code> back to be printed in <code>main</code></p>\n"}], "owner": {"reputation": 15, "user_id": 5038655, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6825a9498c5d862c591f44da77060400?s=128&d=identicon&r=PG&f=1", "display_name": "Pat J Louis", "link": "https://stackoverflow.com/users/5038655/pat-j-louis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1595942676, "creation_date": 1510939030, "last_edit_date": 1595942676, "question_id": 47356044, "link": "https://stackoverflow.com/questions/47356044/haskell-parsing-csv-with-header-to-list-of-lists", "title": "Haskell parsing csv with header to list of lists", "body": "<p>New to haskell trying to get a csv file of ints with a header (type string) to output the 2nd to nth rows into a list of lists. eg [[row, 1], [row, 2]..]\nso far with the Pipes library, got it to output each row as a list with the numbers as strings, and it prints \"Right\" for some reason?. eg output: 'Right [\"1\",\"3\",\"5\"..]' new line 'Right [\"32\",\"38\",\"45\"]'. Any suggestions would be appreciated. Code:</p>\n\n<pre><code>{-# LANGUAGE OverloadedStrings, ScopedTypeVariables #-}\nimport qualified Data.Vector as V\nimport Pipes\nimport qualified Pipes.Prelude as P\nimport qualified System.IO as IO\nimport qualified Pipes.ByteString as PB\nimport qualified Data.Text as Text\nimport qualified Pipes.Csv as PCsv\nimport Control.Monad (forever)\n\nshowPipe :: Proxy () (Either String (V.Vector Text.Text)) () String IO b\nshowPipe = forever $ do\n    x::(Either String (V.Vector Text.Text)) &lt;- await\n    yield $ show x\n\nmain :: IO ()\nmain = do\n    putStrLn \"Filename? \"\n    fName &lt;- getLine \n    IO.withFile fName\n                IO.ReadMode\n                (\\handle -&gt; do\n                    let producer = (PCsv.decode PCsv.NoHeader \n(PB.fromHandle handle))\n                    runEffect ( (producer)&gt;-&gt;\n                                (showPipe) &gt;-&gt;\n                                P.stdoutLn)\n                )\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 1, "creation_date": 1510936050, "post_id": 47355053, "comment_id": 81662709, "body": "It is best you&#39;ll do some measurements/benchmarks with criterion and run some heap profiles as well. There is a chapter in resl world haskell about heap profiles and criterion has good documentation. And it is an easy enough task for a beginner to not be overwhelmed with"}, {"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1510936338, "post_id": 47355053, "comment_id": 81662903, "body": "One thing I would encourage you to play around is adding variants with strictness annotations (with <code>BangPatterns</code>) and different levels of optimization <code>-O0</code> .. <code>-O2</code> and variants with type signatures."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 2, "creation_date": 1510936381, "post_id": 47355053, "comment_id": 81662931, "body": "Did you do any benchmarks before asking this question?"}, {"owner": {"reputation": 549, "user_id": 1524453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ed2un.png?s=128&g=1", "display_name": "Federico Sawady", "link": "https://stackoverflow.com/users/1524453/federico-sawady"}, "edited": false, "score": 0, "creation_date": 1510937555, "post_id": 47355053, "comment_id": 81663618, "body": "I want to know the performance not only of <code>factorial</code>. In general, wich is better, structural recursion or tail recursion. I can&#39;t benchmark that. Only <code>factorial</code> is not a proof."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1510939265, "post_id": 47355053, "comment_id": 81664625, "body": "There is no real answer to this question. Sometimes one is faster, sometimes the other one. Try transforming <code>f n = n : f (n+1)</code> to a tail recursive function, for instance, and see how fast it diverges :-P"}], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1510936370, "post_id": 47355131, "comment_id": 81662924, "body": "The second version will be optimized properly by GHC&#39;s demand analysis for typical numerical types if you use <code>-O</code> or <code>-O2</code>."}], "tags": [], "owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "is_accepted": true, "score": 4, "last_activity_date": 1510944051, "last_edit_date": 1510944051, "creation_date": 1510935987, "answer_id": 47355131, "question_id": 47355053, "link": "https://stackoverflow.com/questions/47355053/efficiency-of-structural-recursion-vs-tail-recursion/47355131#47355131", "title": "Efficiency of structural recursion vs tail recursion", "body": "<p>I'm not sure either is. The first will evaluate <code>n-1</code> in the pattern test for 0, but will produce a stack of multiplications that can't begin to execute until it reaches <code>0</code>. The second will produce that same stack stored in the <code>r</code> argument. The advantage of the second, however, is that you can make the <code>r</code> argument strict and be purely tail recursive in constant space, because its multiplication order agrees with the call order. </p>\n\n<p>We can interpret the first version as <code>factorial n = foldr (*) 1 [n,n-1..1]</code>, and the second as <code>factorial n = foldl (*) 1 [n,n-1..1]</code>. Thus the difference in strictness for <code>r</code> is the same as between <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:foldl\" rel=\"nofollow noreferrer\"><code>foldl</code></a> and <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Data-Foldable.html#v:foldl-39-\" rel=\"nofollow noreferrer\"><code>foldl'</code></a>. But if the list is long and the operation can shortcut by not inspecting the second argument, the <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Data-Foldable.html#v:foldr\" rel=\"nofollow noreferrer\"><code>foldr</code></a> version gets a noted advantage. </p>\n"}], "owner": {"reputation": 549, "user_id": 1524453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ed2un.png?s=128&g=1", "display_name": "Federico Sawady", "link": "https://stackoverflow.com/users/1524453/federico-sawady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "closed_date": 1510941200, "accepted_answer_id": 47355131, "answer_count": 1, "score": -6, "last_activity_date": 1510944051, "creation_date": 1510935737, "question_id": 47355053, "link": "https://stackoverflow.com/questions/47355053/efficiency-of-structural-recursion-vs-tail-recursion", "closed_reason": "Needs more focus", "title": "Efficiency of structural recursion vs tail recursion", "body": "<p>I want to know the difference between executing</p>\n\n<pre><code>factorial 0 = 0\nfactorial n = n * factorial (n-1)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>factorial 0 r = r\nfactorial n r = factorial (n-1) (r * n)\n</code></pre>\n\n<p>Wich is more performant?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510935171, "post_id": 47354723, "comment_id": 81662115, "body": "Works for me. Your error must be elsewhere in the file."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1510935183, "post_id": 47354723, "comment_id": 81662125, "body": "I get no parse error in your code. Are you sure this is on this line?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510939351, "post_id": 47354723, "comment_id": 81664689, "body": "Turn on warnings, don&#39;t mix tabs and spaces."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8958688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93781fb56c5e59d77cf06f2bfc36a362?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Ra", "link": "https://stackoverflow.com/users/8958688/ollie-ra"}, "edited": false, "score": 1, "creation_date": 1510959935, "post_id": 47355251, "comment_id": 81674070, "body": "Got it, thanks man."}], "tags": [], "owner": {"reputation": 549, "user_id": 1524453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ed2un.png?s=128&g=1", "display_name": "Federico Sawady", "link": "https://stackoverflow.com/users/1524453/federico-sawady"}, "is_accepted": true, "score": 4, "last_activity_date": 1510936362, "creation_date": 1510936362, "answer_id": 47355251, "question_id": 47354723, "link": "https://stackoverflow.com/questions/47354723/parse-errors-when-using-partial-functions-in-where-statments-haskell/47355251#47355251", "title": "Parse errors when using partial functions in where statments (Haskell)", "body": "<p>I bet you are using tabs instead of white space for indentation.</p>\n\n<p>The statements in the where construction must be aligned. Haskell interprets every tabs like 8 white space, so if you are messing with white space and tabs maybe your functions are not aligned.</p>\n\n<p>If your editor is configured with tabs showing to 4 white space, you are not seeing this problem, but Haskell does.</p>\n\n<p>I will use <code>-</code> for white space and <code>\\t</code> por tabs (equal to 4 white space).</p>\n\n<p>For example:</p>\n\n<pre><code>where \n----(nBoard1, nScore1) = nextPlay (dp1,h1,s1) b\n\\t  (nBoard2, nScore2) = nextPlay (dp2,h2,s2) b\n</code></pre>\n\n<p>These are not aligned, so Haskell will give parse error on <code>(nBoard2, nScore2)</code></p>\n\n<p>I recomend to use always white space instead of tabs. Most editors can be configured to replace tabs with 4 or 8 white space characters, so you will not get this problem.</p>\n"}], "owner": {"reputation": 23, "user_id": 8958688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93781fb56c5e59d77cf06f2bfc36a362?s=128&d=identicon&r=PG&f=1", "display_name": "Ollie Ra", "link": "https://stackoverflow.com/users/8958688/ollie-ra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1510966295, "accepted_answer_id": 47355251, "answer_count": 1, "score": 0, "last_activity_date": 1510936362, "creation_date": 1510934648, "question_id": 47354723, "link": "https://stackoverflow.com/questions/47354723/parse-errors-when-using-partial-functions-in-where-statments-haskell", "closed_reason": "Not suitable for this site", "title": "Parse errors when using partial functions in where statments (Haskell)", "body": "<p>I'm pretty new to Haskell and I've run into this problem a few times and have had no luck finding answers online. </p>\n\n<pre><code>playDomsHandler (dp1,h1,s1) (dp2,h2,s2) b _\n    -- players 1 and 2 both knocking, game ends\n    | knockingP b h1 &amp;&amp; knockingP b h2 = (b, (s1, s2))\n    -- just player 1 knocking, player 2 makes a move\n    | knockingP b h1 = playDomsHandler (dp1,h1,s1) (dp2,h2,nScore2) nBoard2 2\n    -- just player 2 knocking, player 1 makes a move\n    | knockingP b h2 = playDomsHandler (dp1,h1,nScore1) (dp2,h2,s2) nBoard1 1\n    where \n      (nBoard1, nScore1) = nextPlay (dp1,h1,s1) b\n      (nBoard2, nScore2) = nextPlay (dp2,h2,s2) b\n</code></pre>\n\n<p>Gives a parse error. (The first bracket in the (nBoard2, nScore2) line) </p>\n\n<p>I've used where statements plenty before but I always seem to run into this problem when using partial functions</p>\n\n<p>Any help much appreciated. </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1510931805, "post_id": 47353797, "comment_id": 81659945, "body": "<code>[x:xs]</code> is not the pattern for a list with at least one element, it is <code>(x:xs)</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510931828, "post_id": 47353797, "comment_id": 81659963, "body": "furthermore you will need to call <code>replicate n x</code> and <code>rep n xs</code>."}, {"owner": {"reputation": 853, "user_id": 3645112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QFHGj.jpg?s=128&g=1", "display_name": "Rainbacon", "link": "https://stackoverflow.com/users/3645112/rainbacon"}, "edited": false, "score": 0, "creation_date": 1510931980, "post_id": 47353797, "comment_id": 81660073, "body": "I would suggest using <code>map</code> to apply your replication. Then you need only flatten the resulting nested list. <code>rep n xs = concat $ map (replicate n) xs</code>"}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 853, "user_id": 3645112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QFHGj.jpg?s=128&g=1", "display_name": "Rainbacon", "link": "https://stackoverflow.com/users/3645112/rainbacon"}, "edited": false, "score": 0, "creation_date": 1510932430, "post_id": 47353797, "comment_id": 81660364, "body": "@Rainbacon You can leave off <code>xs</code> and use <code>concatMap</code>, so: <code>rep n = concatMap (replicate n)</code>"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510932843, "post_id": 47353797, "comment_id": 81660621, "body": "You can use <code>rep n = (&gt;&gt;= replicate n)</code>"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510932888, "post_id": 47353797, "comment_id": 81660650, "body": "Or even shorter: <code>rep = (=&lt;&lt;) . replicate</code>."}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1510932982, "post_id": 47353797, "comment_id": 81660708, "body": "@WillemVanOnsem I find that <code>rep = concatMap . replicate</code> has a nice balance between readability and conciseness, but of course your solutions work too."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 1, "creation_date": 1510933055, "post_id": 47353797, "comment_id": 81660753, "body": "@MichaelKohl: yeah, I agree :). It is more that I am always supprised how expressive Haskell is. But you are definitely correct :)."}], "answers": [{"tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": true, "score": 1, "last_activity_date": 1510932874, "last_edit_date": 1510932874, "creation_date": 1510932565, "answer_id": 47354093, "question_id": 47353797, "link": "https://stackoverflow.com/questions/47353797/multiplying-string-in-a-list-haskell/47354093#47354093", "title": "Multiplying String in a list, Haskell", "body": "<ul>\n<li>Your fist problem is that the pattern for non-empty lists is wrong, it should be <code>(x:xs)</code>, not <code>[x:xs]</code>.</li>\n<li>Furthermore, <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/Prelude.html#v:replicate\" rel=\"nofollow noreferrer\">replicate</a> expects a single element and turns it into a list of length <code>n</code>, so it should be <code>replicate n x</code>, not <code>replicate n [x]</code>. </li>\n<li>In a similar vain <code>xs</code> is already a list.</li>\n</ul>\n\n<p>If you fix all of this you'll end up with the following, which actually works as intended:</p>\n\n<pre><code>rep :: Int -&gt; [String] -&gt; [String]\nrep n [] = []\nrep n (x:xs) = replicate n x ++ rep n xs\n</code></pre>\n\n<p>That said there are many different ways one could write this, for example with <a href=\"https://www.haskell.org/hoogle/?hoogle=concatMap\" rel=\"nofollow noreferrer\">concatMap</a>:</p>\n\n<pre><code>rep n = concatMap (replicate n)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>rep = concatMap . replicate\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8958239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9ca752c8be5e7e94f2864dfc08715c?s=128&d=identicon&r=PG&f=1", "display_name": "Mixon", "link": "https://stackoverflow.com/users/8958239/mixon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 47354093, "answer_count": 1, "score": 0, "last_activity_date": 1510941120, "creation_date": 1510931577, "last_edit_date": 1510937154, "question_id": 47353797, "link": "https://stackoverflow.com/questions/47353797/multiplying-string-in-a-list-haskell", "title": "Multiplying String in a list, Haskell", "body": "<p>I am trying to multiply strings in a list. For instance, when I have a list like <code>[\"hello\",\"World\"]</code> and I want to 'multiply' it by 2, I want to end up with <code>[\"hello\",\"hello\",\"World\",\"World\"]</code>.</p>\n\n<p>Here's what I came up with:</p>\n\n<pre><code>rep :: Int -&gt; [String] -&gt; [String]\nrep n [] = []\nrep n [x:xs] = replicate n [x] ++ rep n [xs]\n</code></pre>\n\n<p>But it gives me exception:</p>\n\n<blockquote>\n  <p>(298,1)-(299,44): Non-exhaustive patterns in function rep</p>\n</blockquote>\n\n<p>I am totally new to this language and I do not have any ideas how to sort this out. Can you help?</p>\n"}, {"tags": ["haskell", "haskell-stack", "cabal-install", "conflicting-libraries"], "comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1511256016, "post_id": 47353751, "comment_id": 81771972, "body": "I have no idea why it works in Stack. The <code>ghc</code> package actually exports some functions that take or give types defined in <code>containers</code>, so the difficulty is not just administrative."}, {"owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1511306873, "post_id": 47353751, "comment_id": 81803738, "body": "Actually I have a test suite in my project that depends on both <code>containers &gt;= 0.5.9.2</code> and <code>ghc</code> and <code>stack</code> builds it just fine with lts-9, which is based on <code>ghc-8.0.2</code>. As long as I don&#39;t mix up data types and functions from <code>containers</code>, of course (in which case the compiler complains). So, this works fine for my use case and I&#39;m glad it does."}], "owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1510932472, "creation_date": 1510931390, "last_edit_date": 1510932472, "question_id": 47353751, "link": "https://stackoverflow.com/questions/47353751/cabal-install-refuses-to-solve-conflicting-ghc-and-containers-versions", "title": "`cabal-install` refuses to solve conflicting `ghc` and `containers` versions", "body": "<p><a href=\"https://github.com/sgraf812/ghc-containers-conflict\" rel=\"nofollow noreferrer\">This repository</a> contains a reproduction for an annoying error I got while using <code>doctest</code> in a test-suite.</p>\n\n<p><code>cabal-install</code>s solver fails to find a solution for this <code>build-depends</code> field using GHC 8.0.2:</p>\n\n<pre><code>build-depends:       \n    base &gt;= 4.7 &amp;&amp; &lt; 5\n  , doctest == 0.11.4\n  , containers == 0.5.10.2\n</code></pre>\n\n<p>Note that <code>doctest</code> depends transitively depends on <code>ghc-8.0.2</code>, which itself depends on <code>containers-0.5.7.1</code>, conflicting with my own constraints.\nThat's basically what <code>cabal install</code> is trying to tell me:</p>\n\n<pre><code>Resolving dependencies...\ncabal.exe: Could not resolve dependencies:\nnext goal: containers (dependency of repro-0.1.0.0)\nrejecting: containers-0.5.7.1/installed-0.5... (conflict: repro =&gt;\ncontainers==0.5.10.2)\ntrying: containers-0.5.10.2\nnext goal: doctest (dependency of repro-0.1.0.0)\nrejecting: doctest-0.13.0, doctest-0.12.0 (conflict: repro =&gt; doctest==0.11.4)\ntrying: doctest-0.11.4\nnext goal: ghc (dependency of doctest-0.11.4)\nrejecting: ghc-8.0.2/installed-8.0... (conflict: containers==0.5.10.2, ghc =&gt;\ncontainers==0.5.7.1/installed-0.5...)\nDependency tree exhaustively searched.\n</code></pre>\n\n<p>Now, what bugs me is that <code>stack install</code> works just fine using <a href=\"https://github.com/sgraf812/ghc-containers-conflict/blob/0b10e5f390d0e228e6c2c708f6961ebff76b2edc/stack.yaml\" rel=\"nofollow noreferrer\"><code>lts-9</code> and an <code>extra-deps</code> for the containers version</a>.\nSo in theory, <code>cabal-install</code> could also do 'the right thing' here. How can I tell it to?</p>\n"}, {"tags": ["haskell", "typeclass"], "comments": [{"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1510940755, "post_id": 47353278, "comment_id": 81665428, "body": "I think you&#39;ll get more mileage out of using a more direct representation of nested lists: <code>data Nested a = Flat a | Nested (Nested [a])</code>"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1510949265, "post_id": 47353278, "comment_id": 81669687, "body": "A few questions. Doesn&#39;t <code>t</code> determine <code>leaf</code> in <code>LTTree</code>? Doesn&#39;t <code>t</code> determine <code>a</code> in <code>Tups</code>? I think your classes need either fundeps or type families to express these dependencies. I&#39;m not even sure you actually need the classes, though: what problem are you trying to solve?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1510954526, "post_id": 47353278, "comment_id": 81672036, "body": "This strategy of representing data with typeclasses doesn&#39;t really give you anything and getting the encoding right is clearly non-trivial. As other commenters have noted, why not represent your data ... as data? You can represent existentially quantified records with e.g. <code>data ConstrainedRec c where CRec :: Forall r c =&gt; Rec r -&gt; ConstrainedRec c</code> (where <code>Rec</code> and <code>Forall</code> are provided by CTrex)."}, {"owner": {"reputation": 2522, "user_id": 324969, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/60babc4ee603c9f9156ea0e52280b335?s=128&d=identicon&r=PG", "display_name": "Suzanne Soy", "link": "https://stackoverflow.com/users/324969/suzanne-soy"}, "edited": false, "score": 0, "creation_date": 1511107978, "post_id": 47353278, "comment_id": 81710112, "body": "You&#39;re all right, the <code>data</code> approach is likely simpler and would work just as well. I&#39;m new to Haskell so I&#39;m not always sure what&#39;s the right tool for the job. It was interesting though to learn how to do the encoding as typeclasses."}], "answers": [{"comments": [{"owner": {"reputation": 2522, "user_id": 324969, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/60babc4ee603c9f9156ea0e52280b335?s=128&d=identicon&r=PG", "display_name": "Suzanne Soy", "link": "https://stackoverflow.com/users/324969/suzanne-soy"}, "edited": false, "score": 0, "creation_date": 1511092593, "post_id": 47364683, "comment_id": 81705189, "body": "Thanks as lot for this very good walkthrough! One question: why is the <code>(leaf ~ tree) =&gt; ListTree leaf tree</code> instead of <code>ListTree a a</code> necessary ? Is it so that <code>2</code> is a valid instanciation for <code>1</code>? Or some other reason?"}], "tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 2, "last_activity_date": 1510999052, "last_edit_date": 1510999052, "creation_date": 1510998720, "answer_id": 47364683, "question_id": 47353278, "link": "https://stackoverflow.com/questions/47353278/constraining-the-argument-of-a-constraint/47364683#47364683", "title": "Constraining the argument of a constraint", "body": "<p>You have another issue. Your <code>ListTree</code> class is useless!</p>\n\n<pre><code>&gt; lmap id [5 :: Integer]\nerror: blah blah\n&gt; lmap id (5 :: Integer)\nerror: blah blah\n&gt; lmap (+2) [[5::Integer], [], [2,3]]\nerror: blah blah\n</code></pre>\n\n<p>Add some dark magic to fix this first:</p>\n\n<pre><code>{-# LANGUAGE FunctionalDependencies, GADTs #-}\nclass ListTree leaf tree where lmap :: (leaf -&gt; leaf) -&gt; (tree -&gt; tree)\ninstance {-# OVERLAPPABLE #-} (leaf ~ tree) =&gt; ListTree leaf tree where -- 1\n  lmap = id\ninstance ListTree leaf tree =&gt; ListTree leaf [tree] where -- 2\n  lmap = map . lmap\n</code></pre>\n\n<p>(<code>(a ~ b)</code> is an <em>equality constraint</em>; it holds when <code>a</code> and <code>b</code> are the same type. It needs <code>GADTs</code> or <code>TypeFamilies</code> to be used.)</p>\n\n<p>According to <a href=\"https://ghc.readthedocs.io/en/8.0.1/glasgow_exts.html#overlapping-instances\" rel=\"nofollow noreferrer\">the rules of instance resolution</a>, when checking <code>lmap id [5 :: Integer]</code>, GHC will come across both instances and find they can both be instantiated: <code>1</code> with <code>leaf = [Integer]</code> and <code>tree = [Integer]</code>, <code>2</code> with <code>leaf = Integer</code> and <code>tree = [Integer]</code>. To pick one, it checks whether the instantiation of <code>2</code> is valid for <code>1</code>. That is: is <code>leaf = Integer</code>, <code>tree = [Integer]</code> a valid instantiation for <code>1</code>? The answer is yes, because the context with the equality contraint isn't checked until later. Then, it checks for <code>OVERLAPPABLE</code>/<code>OVERLAPPING</code>/<code>OVERLAPS</code> pragmas. <code>OVERLAPPABLE</code> instances get thrown away if there is some better instance around. In this case, <code>1</code> is thrown away and only <code>2</code> remains. It is used, so <code>lmap id [5 :: Integer] == [5]</code>. The other examples also work.</p>\n\n<p>In <code>LTTree</code>, you have a typo. It should be:</p>\n\n<pre><code>class LTTree leaf tree where ltmap :: (leaf -&gt; leaf) -&gt; tree -&gt; tree\n</code></pre>\n\n<p>with <code>leaf</code>, not <code>a</code>. You've got another problem: the inferencer is very mad at you for making it do all this work:</p>\n\n<pre><code>&gt; instance (Tups leaf x, ListTree x t) =&gt; LTTree leaf t where ltmap f v = lmap (tmap f) v\nerror: blah blah\n</code></pre>\n\n<p>Enable <code>ScopedTypeVariables</code> and <code>TypeApplications</code> to help it along:</p>\n\n<pre><code>{-# LANGUAGE ScopedTypeVariables, TypeApplications #-}\ninstance (Tups leaf x, ListTree x t) =&gt; LTTree leaf t where ltmap f v = lmap @x @t (tmap @leaf @x f) v\n</code></pre>\n\n<p>(or just give types explicitly with <code>::</code>, but that's painful)</p>\n\n<p>But the better idea is to enable <code>FunctionalDependencies</code> and start spraying them about, because they represent the very idea of type level computation: some subset of the parameters of a typeclass can uniquely determine the others. This produces the final version:</p>\n\n<pre><code>{-# LANGUAGE FlexibleInstances\n           , FunctionalDependencies\n           , GADTs\n           , UndecidableInstances #-}\nclass ListTree leaf tree | tree -&gt; leaf where lmap :: (leaf -&gt; leaf) -&gt; tree -&gt; tree\ninstance {-# OVERLAPPABLE #-} (leaf ~ tree) =&gt; ListTree leaf tree where lmap = id\ninstance ListTree leaf tree =&gt; ListTree leaf [tree] where lmap = map . lmap\n-- The tree determines the leaf\n\nclass Tups leaf tree | tree -&gt; leaf where tmap :: (leaf -&gt; leaf) -&gt; tree -&gt; tree\n-- Change instances to help type inference along:\ninstance (a ~ b) =&gt; Tups a (a, b) where tmap f (x, y) = (f x, f y)\ninstance (a ~ b, b ~ c) =&gt; Tups a (a, b, c) where tmap f (x, y, z) = (f x, f y, f z)\n-- tmap (+2) (5 :: Integer, 3, 2) now works because the type info from 5 spreads out\n-- via the equality constraints\n\nclass LTTree leaf tree | tree -&gt; leaf where ltmap :: (leaf -&gt; leaf) -&gt; tree -&gt; tree\ninstance (Tups leaf mid, ListTree mid tree) =&gt; LTTree leaf tree where ltmap = lmap . tmap\n-- mid can be deduced from tree via ListTree's fundep\n-- leaf can be deduced from mid via Tups' fundep\n-- leaf can be deduced from tree\n</code></pre>\n\n<p>And it works!</p>\n\n<pre><code>&gt; ltmap (+(2 :: Integer)) [[[(5, 2)]], [], [[(2, 8), (4, 5)]]]\n[[[(7,4)]],[],[[(4,10),(6,7)]]]\n</code></pre>\n"}], "owner": {"reputation": 2522, "user_id": 324969, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/60babc4ee603c9f9156ea0e52280b335?s=128&d=identicon&r=PG", "display_name": "Suzanne Soy", "link": "https://stackoverflow.com/users/324969/suzanne-soy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 47364683, "answer_count": 1, "score": 1, "last_activity_date": 1510999052, "creation_date": 1510929917, "question_id": 47353278, "link": "https://stackoverflow.com/questions/47353278/constraining-the-argument-of-a-constraint", "title": "Constraining the argument of a constraint", "body": "<p>I have a first typeclass which accepts lists of lists of lists of \u2026 of <code>leaf</code>:</p>\n\n<pre><code>{-# LANGUAGE MultiParamTypeClasses, FlexibleInstances, UndecidableInstances #-}\nclass ListTree leaf t where\n  lmap :: (leaf -&gt; leaf) -&gt; t -&gt; t\ninstance ListTree leaf leaf where lmap f v = f v\ninstance ListTree leaf t =&gt; ListTree leaf [t] where lmap f v = map (lmap f) v\n</code></pre>\n\n<p>I have a second typeclass which accepts 2-tuples and 3-tuples of <code>a</code>:</p>\n\n<pre><code>class Tups a t where\n  tmap :: (a -&gt; a) -&gt; t -&gt; t\ninstance Tups a (a,a) where tmap f (x,y) = (f x, f y)\ninstance Tups a (a,a,a) where tmap f (x,y,z) = (f x, f y, f z)\n</code></pre>\n\n<p>I would like to combine them to describe nested lists ending with 2- or 3-tuples of some <code>leaf</code> type:</p>\n\n<pre><code>class LTTree leaf t where\n  ltmap :: (a -&gt; a) -&gt; t -&gt; t\ninstance (Tups leaf x, ListTree x t) =&gt; LTTree leaf t where ltmap f v = lmap (tmap f) v\n</code></pre>\n\n<p>However, this last piece of code gives me several errors:</p>\n\n<pre><code>Could not deduce (LTTree leaf0 t)\n  from the context: LTTree leaf t\n\nIn the ambiguity check for \u2018ltmap\u2019\n  To defer the ambiguity check to use sites, enable AllowAmbiguousTypes\n\nCould not deduce (Tups leaf x0)\n  from the context: (Tups leaf x, ListTree x t)\n\nIn the ambiguity check for an instance declaration\n  To defer the ambiguity check to use sites, enable AllowAmbiguousTypes\n  In the instance declaration for \u2018LTTree leaf t\u2019\n</code></pre>\n\n<p>If I add <code>AllowAmbiguousTypes</code>, I still get similar errors.</p>\n\n<p>I can define the <code>LTTree</code> class just fine by inlining the code of the other two typeclasses, though:</p>\n\n<pre><code>class LTTree leaf t where\n  ltmap :: (leaf -&gt; leaf) -&gt; t -&gt; t\ninstance LTTree leaf (leaf,leaf) where ltmap f (x,y) = (f x, f y)\ninstance LTTree leaf (leaf,leaf,leaf) where ltmap f (x,y,z) = (f x, f y, f z)\ninstance LTTree leaf t =&gt; LTTree leaf [t] where ltmap f v = map (ltmap f)\n</code></pre>\n\n<p><strong>How can I combine the <code>ListTree leaf t</code> class with the <code>Tups a t</code> class so that the leaves of the tree of lists are 2- or 3-tuples of <code>a</code>?</strong> I don't mind adding extra GHC extensions if that can help.</p>\n\n<p>If it matters, my real use case is to model trees of lists where the leaves are row-polymorphic record (using CTRex), where each field in the record is an instance of some typeclass (e.g. <code>Show</code>, to print the trees).</p>\n"}, {"tags": ["haskell", "tree"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510930283, "post_id": 47353277, "comment_id": 81658844, "body": "How are you stuck in defining the tree? You already defined the tree."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 1, "creation_date": 1510930424, "post_id": 47353277, "comment_id": 81658959, "body": "Your types are off. <code>Book</code> does not take a type variable, and <code>singleton</code> returns a <code>Tree Int</code>."}, {"owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "edited": false, "score": 0, "creation_date": 1510935855, "post_id": 47353277, "comment_id": 81662564, "body": "Do you want your <code>Tree</code> to hold only <code>Book</code>s, or do you want it to hold any type?  Right now, you are somewhere in between."}, {"owner": {"reputation": 180, "user_id": 4062703, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e914a86d649e4f3c7f543398071d8?s=128&d=identicon&r=PG", "display_name": "tontus", "link": "https://stackoverflow.com/users/4062703/tontus"}, "reply_to_user": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "edited": false, "score": 0, "creation_date": 1510936169, "post_id": 47353277, "comment_id": 81662803, "body": "@pat I want to hold books only"}], "answers": [{"tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": false, "score": 0, "last_activity_date": 1510937415, "last_edit_date": 1510937415, "creation_date": 1510936590, "answer_id": 47355332, "question_id": 47353277, "link": "https://stackoverflow.com/questions/47353277/haskell-binary-search-tree-with-custom-data/47355332#47355332", "title": "Haskell binary search tree with custom data", "body": "<p>Maybe if we figure out the correct type signatures.</p>\n\n<p>I presume you want the <code>Tree</code> to hold <code>Book</code>s, ordered by <code>page</code>.</p>\n\n<p>If we want <code>Tree</code> to hold only <code>Book</code>, we don't need to parameterize it.  However, since you did parameterize <code>Tree</code>, let's assume that it can hold more than just <code>Book</code>s.</p>\n\n<p>In this case, we would expect:</p>\n\n<pre><code>singleton :: a -&gt; Tree a\ntreeInsert :: Ord a =&gt; a -&gt; Tree a -&gt; Tree a\n</code></pre>\n\n<p>Where <code>a</code> could be <code>Book</code>, or any other appropriate type.  However, in order for <code>treeInsert</code>  to work with <code>Book</code>, we require <code>Book</code> to have an <code>Ord</code> instance.</p>\n\n<p>The <code>singleton</code> function just puts the whole <code>a</code> into a <code>Node</code>:</p>\n\n<pre><code>singleton a = Node a EmptyTree EmptyTree\n</code></pre>\n\n<p>Note that <code>Book</code> does not appear in this definition since it is intended to work with all types.</p>\n\n<p>The <code>insertTree</code> function will also not mention <code>Book</code>, but it will take advantage of the <code>Ord</code> instance it requires of its argument.</p>\n\n<p>Edit</p>\n\n<p>If you want <code>Tree</code> to work only with <code>Book</code>, then you should define it as:</p>\n\n<pre><code>data Tree = EmptyTree | Node Book Tree Tree\n</code></pre>\n\n<p>The type signatures for the functions then become:</p>\n\n<pre><code>singleton :: Book -&gt; Tree\ninsertTree :: Book -&gt; Tree -&gt; Tree\n</code></pre>\n\n<p>The implementation of <code>singleton</code> will be the same as above (just put the whole <code>Book</code> into a <code>Node</code>).</p>\n\n<p>Since <code>insertTree</code> now knows it is dealing with <code>Book</code>, it no longer requires the <code>Ord</code> instance, since it can just get the <code>page</code>.</p>\n\n<p>It will start:</p>\n\n<pre><code>treeInsert b EmptyTree = singleton b\ntreeInsert b (Node a l r)\n    | page b == page a = ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 549, "user_id": 1524453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ed2un.png?s=128&g=1", "display_name": "Federico Sawady", "link": "https://stackoverflow.com/users/1524453/federico-sawady"}, "is_accepted": false, "score": 1, "last_activity_date": 1510937273, "creation_date": 1510937273, "answer_id": 47355549, "question_id": 47353277, "link": "https://stackoverflow.com/questions/47353277/haskell-binary-search-tree-with-custom-data/47355549#47355549", "title": "Haskell binary search tree with custom data", "body": "<p>I recommend to you to use all the book entity and make and <code>Ord</code> instance for <code>Book</code>.</p>\n\n<pre><code>instance Eq Book where\n    (Book _ n1) == (Book _ n2) = n1 == n2\n\ninstance Ord Book where\n    (Book _ n1) &gt; (Book _ n2) = n1 &gt; n2\n</code></pre>\n\n<p>And change your code to this:</p>\n\n<pre><code>data Book = Book {\n    name :: String,\n    page :: Int\n} deriving (Show)\n\ndata Tree a = EmptyTree | Node a (Tree a) (Tree a) deriving (Show, Read, Eq)\n\nsingleton :: a -&gt; Tree a   \nsingleton x = Node x EmptyTree EmptyTree  \n\ntreeInsert :: (Ord a) =&gt; a -&gt; Tree a -&gt; Tree a  \ntreeInsert x EmptyTree = singleton x\ntreeInsert x (Node a left right)   \n    | x == a = Node x left right  \n    | x &lt; a  = Node a (treeInsert x left) right  \n    | x &gt; a  = Node a left (treeInsert x right)\n</code></pre>\n\n<p>You will see that <code>(Book _ n)</code> is not a correct type, <code>Book</code> is.</p>\n\n<p>And a will use values of any type to <code>treeInsert</code> since <code>Book</code> implements <code>Ord</code>.</p>\n"}], "owner": {"reputation": 180, "user_id": 4062703, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e914a86d649e4f3c7f543398071d8?s=128&d=identicon&r=PG", "display_name": "tontus", "link": "https://stackoverflow.com/users/4062703/tontus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1510937415, "creation_date": 1510929916, "question_id": 47353277, "link": "https://stackoverflow.com/questions/47353277/haskell-binary-search-tree-with-custom-data", "title": "Haskell binary search tree with custom data", "body": "<p>I want to create a binary search tree of custom data type Book. Book has two attributes, name and page. I want to use attribute page as the node of the tree. I've stuck at defining the tree. Can anyone help me with any resource? Here is the code I've tried (it's not working)</p>\n\n<pre><code>import System.IO  \nimport Data.List  \n\ndata Book = Book{\n    name:: String,\n    page::Int\n}deriving (Show)\n\ndata Tree a = EmptyTree | Node a (Tree a) (Tree a) deriving (Show, Read, Eq)\n\nsingleton :: (Book _ x) -&gt; Tree x   \nsingleton (Book _ x) = Node x EmptyTree EmptyTree  \n\ntreeInsert :: (Ord a) =&gt; a -&gt; Tree a -&gt; Tree a  \ntreeInsert (Book _ x) EmptyTree = singleton (Book _ x)\ntreeInsert (Book _ x) (Node a left right)   \n    | x == a = Node x left right  \n    | x &lt; a  = Node a (treeInsert (Book _ x) left) right  \n    | x &gt; a  = Node a left (treeInsert (Book _ x) right)  \n</code></pre>\n"}, {"tags": ["multithreading", "haskell", "exception", "concurrency", "exception-handling"], "comments": [{"owner": {"reputation": 1979, "user_id": 2789312, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4OgOz.png?s=128&g=1", "display_name": "palik", "link": "https://stackoverflow.com/users/2789312/palik"}, "edited": false, "score": 6, "creation_date": 1510928867, "post_id": 47351960, "comment_id": 81657897, "body": "<a href=\"http://chimera.labs.oreilly.com/books/1230000000929/ch08.html\" rel=\"nofollow noreferrer\">Chapter 8</a> of S. Marlow&#39;s &quot;Parallel and Concurrent Programming in Haskell&quot; covers the topic at least partly."}, {"owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "edited": false, "score": 1, "creation_date": 1515349081, "post_id": 47351960, "comment_id": 83258085, "body": "The &quot;Signal handling in the RTS&quot; page of the GHC wiki is also relevant  <a href=\"https://ghc.haskell.org/trac/ghc/wiki/Commentary/Rts/Signals\" rel=\"nofollow noreferrer\">ghc.haskell.org/trac/ghc/wiki/Commentary/Rts/Signals</a> The documentation for the <code>AsyncException</code> type has some information about which threads can be the targets of particular exceptions. <a href=\"https://hackage.haskell.org/package/base-4.10.1.0/docs/Control-Exception.html#t:AsyncException\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.10.1.0/docs/&hellip;</a>"}, {"owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "edited": false, "score": 1, "creation_date": 1515349806, "post_id": 47351960, "comment_id": 83258303, "body": "This seems to be the piece of code in which the top level handler for SIGINT is installed: <a href=\"https://github.com/ghc/ghc/blob/7b52525ecb2a09b21e7e5393f45a72ed1dfa3bc8/libraries/base/GHC/TopHandler.hs#L87\" rel=\"nofollow noreferrer\">github.com/ghc/ghc/blob/&hellip;</a> We can see that <code>UserInterrupt</code> in thrown to the main thread."}], "answers": [{"tags": [], "owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "is_accepted": true, "score": 1, "last_activity_date": 1524827939, "creation_date": 1524827939, "answer_id": 50061278, "question_id": 47351960, "link": "https://stackoverflow.com/questions/47351960/concurrent-haskell-exceptions/50061278#50061278", "title": "Concurrent Haskell exceptions", "body": "<p>There is no automatic correspondence between POSIX signals and Haskell exceptions.</p>\n\n<p>In order for a signal to be turned into an exception, there needs to be a signal handler that will do just that \u2014 throw an exception to one of the Haskell threads. Which thread gets the exception depends entirely on how the signal handler is set up.</p>\n\n<p>By default, GHC sets up such a handler for SIGINT only, and that signal delivers the exception to the main thread.</p>\n\n<p>You can <a href=\"https://ro-che.info/articles/2014-07-30-bracket#signals\" rel=\"nofollow noreferrer\">install similar handlers for the other signals</a>:</p>\n\n<pre><code>import Control.Concurrent (mkWeakThreadId, myThreadId)\nimport Control.Exception (Exception(..), throwTo)\nimport Control.Monad (forM_)\nimport Data.Typeable (Typeable)\nimport System.Posix.Signals\nimport System.Mem.Weak (deRefWeak)\n\nnewtype SignalException = SignalException Signal\n  deriving (Show, Typeable)\ninstance Exception SignalException\n\ninstallSignalHandlers :: IO ()\ninstallSignalHandlers = do\n  main_thread_id &lt;- myThreadId\n  weak_tid &lt;- mkWeakThreadId main_thread_id\n  forM_ [ sigABRT, sigBUS, sigFPE, sigHUP, sigILL, sigQUIT, sigSEGV,\n          sigSYS, sigTERM, sigUSR1, sigUSR2, sigXCPU, sigXFSZ ] $ \\sig -&gt;\n    installHandler sig (Catch $ send_exception weak_tid sig) Nothing\n  where\n    send_exception weak_tid sig = do\n      m &lt;- deRefWeak weak_tid\n      case m of\n        Nothing  -&gt; return ()\n        Just tid -&gt; throwTo tid (toException $ SignalException sig)\n\nmain = do\n  installSignalHandlers\n  ...\n</code></pre>\n\n<p>But you can also get creative and change the handler to deliver the signal to some other thread. E.g. if there is only one thread working with sockets, you can make sure that thread gets the exception. Or, depending on the signal you're interested in, maybe you can <a href=\"https://rachelbythebay.com/w/2018/04/16/signal/\" rel=\"nofollow noreferrer\">figure out the relevant thread based on the <code>siginfo_t</code> structure</a> (see <code>sigaction(2)</code>) \u2014 perhaps the si_fd field?</p>\n"}], "owner": {"reputation": 1247, "user_id": 3169543, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7416c0dca5630ff1c31b955e185e955b?s=128&d=identicon&r=PG&f=1", "display_name": "user3169543", "link": "https://stackoverflow.com/users/3169543/user3169543"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 1, "accepted_answer_id": 50061278, "answer_count": 1, "score": 23, "last_activity_date": 1524827939, "creation_date": 1510925979, "last_edit_date": 1519007383, "question_id": 47351960, "link": "https://stackoverflow.com/questions/47351960/concurrent-haskell-exceptions", "title": "Concurrent Haskell exceptions", "body": "<p>How are exceptions delivered in a concurrent Haskell program? </p>\n\n<p>Let's say we have a process, with multiple threads and one of them is interacting with something over a TCP connection and we get a signal (say on a *nix system). </p>\n\n<p>Which (green)thread will this signal be delivered to? </p>\n\n<p>Will it be delivered to the one which is \"using\" the socket or a \"main\" designated thread will receive and it has to explicitly do a <code>throwTo</code> to send the exception to that (green)thread?</p>\n"}, {"tags": ["haskell", "data-structures", "declaration"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1510924520, "post_id": 47350937, "comment_id": 81654981, "body": "<code>Int -&gt; Int -&gt; Price</code> isn&#39;t that helpful, because the name of the function already strongly implies a price is returned. <code>type Quantity = Int</code> and <code>type UnitPrice = Int</code> would allow the much more helpful <code>priceOfProduct :: Quantity -&gt; UnitPrice -&gt; Price</code>, though."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510927255, "post_id": 47350937, "comment_id": 81656742, "body": "It is also an easy way to alter the type in case you are not very certain whether it will fit in the end."}], "answers": [{"comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 1, "creation_date": 1510930921, "post_id": 47351412, "comment_id": 81659323, "body": "Small addition to the last <code>newtype</code>: <code>newtype Price u = Price { getPrice :: Int }</code> with <code>data Euro</code>, <code>data USDollar</code>, \u2026 makes it possible to re-use <code>Price</code> functions with different currencies."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 1, "creation_date": 1510933140, "post_id": 47351412, "comment_id": 81660808, "body": "@Zeta that&#39;s probably the right thing for real-world financial applications (because currency exchange isn&#39;t quite an isomorphism), but I don&#39;t generally like this approach for quantities-with-units. Such a data type should IMO abstract over the general physical notion of that quantity, without any reference to a concrete unit system."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 11, "last_activity_date": 1510924134, "creation_date": 1510924134, "answer_id": 47351412, "question_id": 47350937, "link": "https://stackoverflow.com/questions/47350937/type-name-int-is-it-worth-declaring/47351412#47351412", "title": "type &quot;name&quot; = Int - is it worth declaring?", "body": "<p>It's not always worth defining extra types, but definitely avoid <code>Int -&gt; ... -&gt; Int</code> signatures. These make it very hard to understand how a function is supposed to be used.</p>\n\n<p>So in fact I'd say you should probably rename not only the result but in particular also the arguments. Then, if somebody wants to use your function, they can just let the compiler explain the arguments:</p>\n\n<pre><code>foo :: Price\nfoo = priceOfProduct _ _ + priceOfProduct _ _\n</code></pre>\n\n<p>will give a compiler (GHC>=7.10) message like</p>\n\n<pre><code>Foo.hs:Y:X: error:\n    \u2022 Found hole: _ :: PriceOfProductFirstArgument\n    \u2022 In the first argument of \u2018priceOfProduct\u2019, namely \u2018_\u2019\n      In the expression: priceOfProduct _ _\n      In an equation for \u2018foo\u2019: main = foo = priceOfProduct _ _ + priceOfProduct _ _\n</code></pre>\n\n<p>You should however consider if you don't want to make the type distinction more rigid: a simple <code>type</code>def can never save you from putting the arguments in wrong order, so perhaps you'd better make it</p>\n\n<pre><code>newtype Price = Price {priceInEuroCents :: Int}\n</code></pre>\n\n<p>That also avoids ambiguity as to what currency / quantity the price is given in.</p>\n"}], "owner": {"reputation": 223, "user_id": 7009752, "user_type": "registered", "profile_image": "https://graph.facebook.com/868692553213520/picture?type=large", "display_name": "Sophie Proud", "link": "https://stackoverflow.com/users/7009752/sophie-proud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 47351412, "answer_count": 1, "score": 8, "last_activity_date": 1510924134, "creation_date": 1510922620, "last_edit_date": 1510923531, "question_id": 47350937, "link": "https://stackoverflow.com/questions/47350937/type-name-int-is-it-worth-declaring", "title": "type &quot;name&quot; = Int - is it worth declaring?", "body": "<p>I have a function that returns the Price of a product, it currently looks like</p>\n\n<pre><code>priceOfProduct:: Int -&gt; Int -&gt; Int\n</code></pre>\n\n<p>Is it worth declaring</p>\n\n<pre><code>type Price = Int\n</code></pre>\n\n<p>so that the function becomes</p>\n\n<pre><code>priceOfProduct :: Int -&gt; Int -&gt; Price ?\n</code></pre>\n\n<p>I thought of doing this, as I then go on to use tuples of Ints, which would maybe look better if they were their own data structure. </p>\n\n<pre><code>priceVsTaxed -&gt; Price -&gt; Int -&gt; (Price, Price)\n</code></pre>\n\n<p>Is this useful? Is this necessary?</p>\n\n<p>Is this good Haskell style?</p>\n\n<p>Is declaring a data structure that looks more like renaming an existing Data Structure good style?</p>\n"}, {"tags": ["haskell", "list-comprehension"], "answers": [{"tags": [], "owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "is_accepted": true, "score": 4, "last_activity_date": 1510916430, "creation_date": 1510916430, "answer_id": 47349119, "question_id": 47348896, "link": "https://stackoverflow.com/questions/47348896/list-comprehensions-in-haskell/47349119#47349119", "title": "List comprehensions in Haskell", "body": "<p>The issue is in your isPrime function:</p>\n\n<pre><code>isPrime x = and [x `mod` z /= 0 | z &lt;- [1..x-1]]\n</code></pre>\n\n<p>You take each element from 1 to x-1, and check if the remainder is not equal to zero. If any values are equal to zero, then isPrime will return false. </p>\n\n<p>However, you start your list comprehension at one, which every number is divisible by. </p>\n\n<p>So, we just need to start at two instead.</p>\n\n<pre><code>isPrime x = and [x `mod` z /= 0 | z &lt;- [2..x-1]]\n</code></pre>\n\n<p>Now it works as expected.</p>\n\n<pre><code>\u03bb&gt; take 10 primes\n[2,3,5,7,11,13,17,19,23,29]\n</code></pre>\n\n<p>If you get a problem in a larger function, try breaking it down and running each individual part to ensure the results are as you expect. In this case, <code>isPrime 2 == False</code> hints to where the problem is.</p>\n"}], "owner": {"reputation": 1920, "user_id": 4841832, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/hD1nI.jpg?s=128&g=1", "display_name": "Jsevillamol", "link": "https://stackoverflow.com/users/4841832/jsevillamol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "accepted_answer_id": 47349119, "answer_count": 1, "score": 0, "last_activity_date": 1510916430, "creation_date": 1510915727, "question_id": 47348896, "link": "https://stackoverflow.com/questions/47348896/list-comprehensions-in-haskell", "title": "List comprehensions in Haskell", "body": "<p>I want to write a simple list comprehension in Haskell which consists of a list of infinite primes.</p>\n\n<p>My attempt:</p>\n\n<pre><code>isPrime 1 = False\nisPrime x = and [x `mod` z /= 0 | z &lt;- [1..x-1]]\n\nprimes = [x | x &lt;-[1..], isPrime x ]\n</code></pre>\n\n<p>But when I try running this on console as <code>take 10 primes</code> it gets stuck! What is the issue?</p>\n"}, {"tags": ["haskell", "category-theory"], "comments": [{"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1510912136, "post_id": 47347057, "comment_id": 81647097, "body": "What do you need <code>EitherT</code> for? To me, it looks like one of those values is simply contained in <code>IO</code>, whereas the other is not... You can trivially put the pure value into <code>IO</code> with <code>return</code>, or use monadic bind to compose them..."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "reply_to_user": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1510912745, "post_id": 47347057, "comment_id": 81647484, "body": "But I want to compose <code>Either String Int</code> inside the <code>IO</code> too. So think, I need <code>EitherT</code>, because it is going to compose  <code>Either String Int</code> too. So I think I could avoid boilerplate through <code>EitherT</code>. But it is ok, to lift something into <code>IO</code>, although there is no side effect meaning, in other words, can I pack everything into <code>IO</code> what ever I want?"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1510913034, "post_id": 47347057, "comment_id": 81647669, "body": "What do you mean by <i>compose?</i> If <code>x</code> is an <code>Either String Int</code> value, then <code>return x</code> (or <code>pure x</code>) will have the type <code>IO (Either String Int)</code>... What goal are you trying to accomplish?"}, {"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 0, "creation_date": 1510914714, "post_id": 47347057, "comment_id": 81648901, "body": "You can abstracting from concrete type. The first variable may has type  <code>MonadThrow m =&gt; m Int</code> and the second <code>(MonadIO m, MonadThrow m) =&gt; m Int</code>. They can be composable in different contexts."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1510915119, "post_id": 47347057, "comment_id": 81649153, "body": "I have <code>a :: IO (Either String Int)</code> and <code>b :: IO (Either String Int)</code>. Then use <code>a &gt;&gt;= b</code>, I have to ask always, if it is <code>Left</code> or <code>Right</code> in every <code>&gt;&gt;=</code> operation. Here is what I try to accomplish: <a href=\"https://wiki.haskell.org/Monad_Transformers_Tutorial\" rel=\"nofollow noreferrer\">wiki.haskell.org/Monad_Transformers_Tutorial</a>."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1510915486, "post_id": 47347057, "comment_id": 81649395, "body": "At the beginning of the tutorial, you can see the <code>do</code> block. Can you see the boilerplate code? That is what I am trying to avoid, pack <code>IO (Either String Int)</code> into <code>EitherT String IO Int</code>."}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1510915592, "post_id": 47347057, "comment_id": 81649463, "body": "What do you mean by <code>a &gt;&gt;= b</code>? That&#39;s not going to compile, because the type of <code>&gt;&gt;=</code> is <code>Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b</code>. The second argument has to be a function, and <code>b</code> isn&#39;t a function. What are you actually trying to <i>accomplish?</i>"}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1510916005, "post_id": 47347057, "comment_id": 81649723, "body": "Sorry my mistake. <code>foo :: IO (Either String A)</code> and <code>boo :: a -&gt; IO (Either String B)</code>.  <code>foo &gt;&gt;= \\x -&gt; case Left e ... Right  r ...</code>.  To avoid writing pattern matching all the time, I would use lift into context <code>EitherT</code>."}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 2, "creation_date": 1510916170, "post_id": 47347057, "comment_id": 81649835, "body": "Ah, OK, now I get it! Sorry I was being dense. I don&#39;t see any problem with lifting a pure value into that context in order to compose it. It&#39;d still be pure..."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1510916245, "post_id": 47347057, "comment_id": 81649902, "body": "I am so sorry for my mistake. Awesome thanks a lot."}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 2, "last_activity_date": 1510934930, "creation_date": 1510934930, "answer_id": 47354812, "question_id": 47347057, "link": "https://stackoverflow.com/questions/47347057/do-i-violate-the-abstraction-law/47354812#47354812", "title": "Do I violate the abstraction law?", "body": "<p>No, it is not wrong; in fact, <a href=\"http://hackage.haskell.org/package/errors-2.2.2/docs/Control-Error-Util.html#v:hoistEither\" rel=\"nofollow noreferrer\">it is encouraged</a>.</p>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 47354812, "answer_count": 1, "score": 2, "last_activity_date": 1510934930, "creation_date": 1510910290, "last_edit_date": 1510910326, "question_id": 47347057, "link": "https://stackoverflow.com/questions/47347057/do-i-violate-the-abstraction-law", "title": "Do I violate the abstraction law?", "body": "<p>I have two variables, the first with the type <code>Either String Int</code> and the second with the type <code>IO (Either String Int)</code>.</p>\n\n<p>As you can see, the structure of two variables are almost the same, except the second is wrapped into <code>IO</code>. </p>\n\n<p>To make it composable, I am planing to lift both into MonadTransformer <code>EitherT</code>, but the first variable I have to lift into <code>IO</code>.   </p>\n\n<p>Is it wrong to lift the first variable into <code>IO</code> to make it composable, although there has no side effect happened on it.  </p>\n\n<p>It is just about to put into IO context.</p>\n"}, {"tags": ["haskell", "servant"], "comments": [{"owner": {"reputation": 1369, "user_id": 509928, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57d816a396798416d079c92adbabdbf3?s=128&d=identicon&r=PG", "display_name": "Dave Compton", "link": "https://stackoverflow.com/users/509928/dave-compton"}, "edited": false, "score": 1, "creation_date": 1510953958, "post_id": 47346778, "comment_id": 81671805, "body": "This question: <a href=\"https://stackoverflow.com/questions/42143155/acess-a-servant-server-with-a-reflex-dom-client\" title=\"acess a servant server with a reflex dom client\">stackoverflow.com/questions/42143155/&hellip;</a> is not exactly the same but the answer might still be the answer you are looking for."}], "answers": [{"tags": [], "owner": {"reputation": 11487, "user_id": 1308058, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2be2ab74793559ea1c1dbdf55ccdf90b?s=128&d=identicon&r=PG", "display_name": "phadej", "link": "https://stackoverflow.com/users/1308058/phadej"}, "is_accepted": false, "score": 7, "last_activity_date": 1551205405, "last_edit_date": 1551205405, "creation_date": 1551201829, "answer_id": 54890963, "question_id": 47346778, "link": "https://stackoverflow.com/questions/47346778/cors-header-access-control-allow-origin-missing-in-servant/54890963#54890963", "title": "CORS header \u2018Access-Control-Allow-Origin\u2019 missing in servant", "body": "<p>You could use <a href=\"http://hackage.haskell.org/package/wai-cors-0.2.6/docs/Network-Wai-Middleware-Cors.html\" rel=\"noreferrer\"><code>wai-cors</code></a> middleware to add CORS headers.</p>\n\n<p>At the end you'll have something like</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>app = simpleCors $ serve api serverImpl\n</code></pre>\n\n<p>where</p>\n\n<ul>\n<li><code>simpleCors</code> is a <code>Middleware</code> from <code>wai-cors</code></li>\n<li><code>serve</code> turns servant handlers into <code>wai</code> <code>Application</code></li>\n<li><code>api :: Proxy YourAPI</code></li>\n<li><code>serverImpl</code> is your handlers' implementation</li>\n</ul>\n"}], "owner": {"reputation": 623, "user_id": 5910215, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/62487068172a6c63ecc4f2e13d4b2a8f?s=128&d=identicon&r=PG&f=1", "display_name": "khaled omar", "link": "https://stackoverflow.com/users/5910215/khaled-omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1551205405, "creation_date": 1510909399, "last_edit_date": 1511191530, "question_id": 47346778, "link": "https://stackoverflow.com/questions/47346778/cors-header-access-control-allow-origin-missing-in-servant", "title": "CORS header \u2018Access-Control-Allow-Origin\u2019 missing in servant", "body": "<p>using the <code>run</code> from <code>Network.Wai.Handler.Warp</code> function to server rest api</p>\n\n<pre><code>run :: Port -&gt; Application -&gt; IO ()\n</code></pre>\n\n<p>but while doing <code>post</code> request, getting an error <code>CORS header \u2018Access-Control-Allow-Origin\u2019</code>.\nany idea how to overcome this in servant/haskell</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510907597, "post_id": 47343887, "comment_id": 81644380, "body": "Being very new to Haskell is actually no excuse at all not to try at least sometime."}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 2, "last_activity_date": 1510897037, "creation_date": 1510897037, "answer_id": 47343937, "question_id": 47343887, "link": "https://stackoverflow.com/questions/47343887/remove-duplicates-from-list-of-lists-in-haskell/47343937#47343937", "title": "Remove duplicates from list of lists in Haskell", "body": "<p>Like this:</p>\n\n<pre><code>Data.MultiSet&gt; [a | (a, 1) &lt;- toOccurList (fromList [[1,1,1],[2],[1,1,1]])]\n[[2]]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8955741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3b81df2d7ead07d8eba00de58437b0f?s=128&d=identicon&r=PG&f=1", "display_name": "Kim ", "link": "https://stackoverflow.com/users/8955741/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "closed_date": 1510907761, "answer_count": 1, "score": -9, "last_activity_date": 1524615276, "creation_date": 1510896728, "last_edit_date": 1524615276, "question_id": 47343887, "link": "https://stackoverflow.com/questions/47343887/remove-duplicates-from-list-of-lists-in-haskell", "closed_reason": "Needs more focus", "title": "Remove duplicates from list of lists in Haskell", "body": "<p>Given the list of lists  <code>duplicates = [[1,1,1],[2],[1,1,1]]</code></p>\n\n<p>How to remove the duplicates so that the result is <code>[[2]]</code>?</p>\n"}, {"tags": ["haskell", "code-coverage", "hpc"], "comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1510922813, "post_id": 47343758, "comment_id": 81653975, "body": "There are two environment variables, one of which is documented, that determine where the info is dumped. It&#39;s all really terrible."}], "owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1510895994, "creation_date": 1510895994, "question_id": 47343758, "link": "https://stackoverflow.com/questions/47343758/combining-test-coverage-with-hpc", "title": "Combining test coverage with hpc", "body": "<p>I find hpc really confusing, even after reading several explanations and playing around quite a bit.</p>\n\n<p>I have a library <code>HML</code>, and two test suites <code>fileio-test</code> and <code>types-test</code>, using <code>HTF</code> (I plan on moving to <code>tasty</code>). I'd like to run the two tests and then see the combined coverage from the two over the library.</p>\n\n<p>At the moment I build the library using</p>\n\n<pre><code>cabal configure --enable-coverage\ncabal build\n</code></pre>\n\n<p>And run the tests using</p>\n\n<pre><code>cabal configure --enable-coverage --enable-tests\ncabal build\ncabal test\n\nhpc report --hpc-dir dist/hpc/vanilla/mix/fileio-test dist/hpc/vanilla/tix/fileio-test/fileio-test.tix\n</code></pre>\n\n<p>This shows me some coverage, but not the correct one. What I <em>think</em> is that it shows coverage, but only from <em>one</em> of the tests, and also includes coverage of the tests themselves.</p>\n\n<p>I tried using</p>\n\n<pre><code>--hpc-dir dist/hpc/vanilla/mix/HML-0.1.0.0\n</code></pre>\n\n<p>But then hpc complains it can't find the module files it needs. I also tried combining coverage from the two tests with no luck.</p>\n\n<p>Any pointers? </p>\n"}, {"tags": ["parsing", "haskell", "monads"], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510925073, "post_id": 47342124, "comment_id": 81655333, "body": "In the first paragraph, it&#39;s better to point out that the expansion is done by the shell, and is completely unrelated to Haskell. The Haskell program never gets to see <code>*</code>, but only its expansion. Using <code>echo commandWithFunnyChars</code> sometimes also helps to see the expansion."}], "tags": [], "owner": {"reputation": 3633, "user_id": 675154, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23da6806cab4830b5d1b15ef2a410541?s=128&d=identicon&r=PG", "display_name": "delta", "link": "https://stackoverflow.com/users/675154/delta"}, "is_accepted": true, "score": 4, "last_activity_date": 1510883720, "creation_date": 1510883720, "answer_id": 47342124, "question_id": 47341937, "link": "https://stackoverflow.com/questions/47341937/haskell-defined-a-simple-parser-to-recognise-symbols-failure-in-some-testing/47342124#47342124", "title": "Haskell defined a simple parser to recognise symbols. failure in some testing", "body": "<p><code>*</code> is expanded to all files in current working directory. I guess if you execute <code>ls</code>, the first file name is starting with <code>A</code>.</p>\n\n<p><code>#</code> is for comments begin, so there is no args passed to <code>hii</code>. <code>&amp;</code> brings job to backgroud.</p>\n\n<p>quotes prevents shell to translate <code>*#!</code>, so try to quote every arg passed, it'll be fine.</p>\n\n<hr>\n\n<ol>\n<li><a href=\"http://tldp.org/LDP/abs/html/special-chars.html\" rel=\"nofollow noreferrer\">http://tldp.org/LDP/abs/html/special-chars.html</a></li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 8954998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f258ffcfd5c773ef6e81f442b4ecde98?s=128&d=identicon&r=PG&f=1", "display_name": "Alice", "link": "https://stackoverflow.com/users/8954998/alice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 47342124, "answer_count": 1, "score": 1, "last_activity_date": 1510883720, "creation_date": 1510882348, "last_edit_date": 1510882759, "question_id": 47341937, "link": "https://stackoverflow.com/questions/47341937/haskell-defined-a-simple-parser-to-recognise-symbols-failure-in-some-testing", "title": "Haskell defined a simple parser to recognise symbols. failure in some testing", "body": "<p>I was currently reading \"write yourself a scheme in 48 hours\", and in the chapter 2 it defines a simple parser 'symbol' to recognise symbols and then define a function 'readExpr' to call the parser.</p>\n\n<pre><code>module Main where\n\nimport System.Environment\nimport Text.ParserCombinators.Parsec hiding (spaces)\n\nmain :: IO ()\nmain = do args &lt;- getArgs\n          putStrLn (readExpr (args !! 0))\n\nsymbol :: Parser Char\nsymbol = oneOf \"!$%&amp;|*+-/:&lt;=?&gt;@^_~#\"\n\nreadExpr :: String -&gt; String\nreadExpr input = case parse symbol \"lisp\" input of\n    Left err -&gt; \"Not Found\" ++ show err\n    Right val -&gt; \"Found value\" ++ show val\n</code></pre>\n\n<p>However when I try some testing:</p>\n\n<pre><code>&gt;&gt;&gt; ghc -package parsec -o hii C1.hs\n\n&gt;&gt;&gt; ./hii *\n</code></pre>\n\n<p>it says:</p>\n\n<pre><code>Not Found\"lisp\" (line 1, column 1):\nunexpected \"A\"\n</code></pre>\n\n<p>Also, some other symbols like &amp; or # also won't work and give an 'index too large error'. But symbols like: %,@,! etc. these works properly.\nI don't understand why some symbols works while others doesn't.</p>\n\n<p>In addition, if I add quote marks over that symbol:</p>\n\n<pre><code>./hi \"#\"\n\nFound value'#'\n</code></pre>\n\n<p>Now all the symbols work ...</p>\n\n<p>Can someone please explain these to me since I'm really not familiar with monad stuff?</p>\n"}, {"tags": ["haskell", "types"], "comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 5, "creation_date": 1510871767, "post_id": 47339283, "comment_id": 81632850, "body": "You can&#39;t build an object and gradually modify it as you get more input, because you can&#39;t modify anything. There&#39;s not much use for the builder pattern: you simply do all your IO, and then once you have the values you need you build a value via the constructor."}], "answers": [{"comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1510870192, "post_id": 47339409, "comment_id": 81632195, "body": "There is also the <code>Default</code> typeclass, which you can derive with <code>DeriveAnyClass</code> and <code>DeriveGeneric</code>. Incidentally, it would derive the same default value as <code>defaultA</code>."}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1510906519, "post_id": 47339409, "comment_id": 81643812, "body": "It seems to me that when a &#39;good&#39; default value exists, it&#39;s often a value that &#39;does nothing&#39;; a value that has neutral behaviour. This description fits <code>mempty</code> from <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Data-Monoid.html\" rel=\"nofollow noreferrer\">Data.Monoid</a>. The default values for <code>A</code> and <code>Options</code> in this fine answer could be identity values if those types were monoids, which they trivially could be."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 13, "last_activity_date": 1510868267, "last_edit_date": 1510868267, "creation_date": 1510867872, "answer_id": 47339409, "question_id": 47339283, "link": "https://stackoverflow.com/questions/47339283/default-values-in-haskell-data-types/47339409#47339409", "title": "Default values in Haskell data types", "body": "<p>A common idiom is to define a default value.</p>\n\n<pre><code>data A = A { foo :: Int , bar :: String }\n\ndefaultA :: A\ndefaultA = A{foo = 0, bar = \"\"}\n</code></pre>\n\n<p>This can be then (purely) \"updated\" later on with real values.</p>\n\n<pre><code>doSomething :: Bool -&gt; A\ndoSomething True  = defaultA{foo = 32}\ndoSomething False = defaultA{bar = \"hello!\"}\n</code></pre>\n\n<p>Pseudocode example:</p>\n\n<pre><code>data Options = O{ textColor :: Bool, textSize :: Int, ... }\n\ndefaultOptions :: Options\ndefaultOptions = O{...}\n\ndoStuff :: Options -&gt; IO ()\ndoStuff opt = ...\n\nmain :: IO ()\nmain = do\n     ...\n     -- B&amp;W, but use default text size\n     doStuff defaultOptions{ color = False }\n</code></pre>\n\n<p>If there are no sensible default values, you can wrap the field values in <code>Maybe</code>.</p>\n\n<p>If you feel adventurous, you can even use a <a href=\"https://stackoverflow.com/a/42370593/3234959\">more advanced approach</a> to statically separate \"intermediate\" options values, which can lack a few fields, from \"finalized\" ones, which must have all the fields. (I'd not recommend this to Haskell beginners, though.)</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 8, "last_activity_date": 1510874841, "last_edit_date": 1510874841, "creation_date": 1510868240, "answer_id": 47339516, "question_id": 47339283, "link": "https://stackoverflow.com/questions/47339283/default-values-in-haskell-data-types/47339516#47339516", "title": "Default values in Haskell data types", "body": "<blockquote>\n  <p>Is there any mechanism in Haskell to do the same thing in record types?</p>\n</blockquote>\n\n<p>What you can do is <em>hide the constructor</em>, and <em>provide a function as constructor</em> instead.</p>\n\n<p>Say for instance we have a list we want to update, together with a revision number, then we can define it as:</p>\n\n<pre><code>data RevisionList a = RevisionList { theList :: [a],\n                                     revision :: Int }\n                          deriving Show\n</code></pre>\n\n<p>Now we can define a function that initializes the <code>BuildList</code> with an initial list:</p>\n\n<pre><code>revisionList :: [a] -&gt; RevisionList a\nrevisionList xs = RevisionList { theList = xs, revision=0 }\n</code></pre>\n\n<p>and by hiding the constructor in the <code>module</code> export, we thus hide the possibility to initialize it with another revision than revision <code>0</code>. So the module could look like:</p>\n\n<pre><code>module Foo(RevisionList(), revisionList)\n\ndata RevisionList a = RevisionList { theList :: [a],\n                                     revision :: Int }\n\nrevisionList :: [a] -&gt; RevisionList a\nrevisionList xs = RevisionList { theList = xs, revision=0 }\n</code></pre>\n\n<blockquote>\n  <p>something like the builder pattern from OOP?</p>\n</blockquote>\n\n<p>We can for instance use a <code>State</code> monad for that. For instance:</p>\n\n<pre><code>module Foo(RevisionList(), revisionList,\n           increvision, RevisionListBuilder, prefixList)\n\nimport Control.Monad.State.Lazy\n\ntype RevisionListBuilder a = State (RevisionList a)\n\nincrevision :: RevisionListBuilder a ()\nincrevision = do\n    rl &lt;- get\n    put (rl { revision = 1 + revision rl})\n\nprefixList :: a -&gt; RevisionListBuilder a ()\nprefixList x = do\n    rl &lt;- get\n    put (rl { theList = x : theList rl })\n    increvision\n</code></pre>\n\n<p>So we <code>get</code> the <code>RevisionList</code> thus far, perform updates, and <code>put</code> the new result back.</p>\n\n<p>So now another module can import our <code>Foo</code>, and use the builder like:</p>\n\n<pre><code>some_building :: RevisionListBuilder Int ()\nsome_building = do\n    prefixList 4\n    prefixList 1\n</code></pre>\n\n<p>and now we can \"make\" a <code>RevisionList</code> at revision <code>2</code> with as final list <code>[1,4,2,5]</code> with:</p>\n\n<pre><code>import Control.Monad.State.Lazy(execState)\n\nsome_rev_list :: RevisionList Int\nsome_rev_list = execState some_building (revisionList [2,5])\n</code></pre>\n\n<p>So it would look approximately like:</p>\n\n<p><strong><code>Foo.hs</code></strong>:</p>\n\n<pre><code>module Foo(RevisionList(), revisionList,\n           increvision, RevisionListBuilder, prefixList)\n\ndata RevisionList a = RevisionList { theList :: [a],\n                                     revision :: Int }\n                          deriving Show\ntype RevisionListBuilder a = State (RevisionList a)\n\nrevisionList :: [a] -&gt; RevisionList a\nrevisionList xs = RevisionList { theList = xs, revision=0 }\n\nincrevision :: RevisionListBuilder a ()\nincrevision = do\n    rl &lt;- get\n    put (rl { revision = 1 + revision rl})\n\nprefixList :: a -&gt; RevisionListBuilder a ()\nprefixList x = do\n    rl &lt;- get\n    put (rl { theList = x : theList rl })\n    increvision\n</code></pre>\n\n<p><strong><code>Bar.hs</code></strong>:</p>\n\n<pre><code>import Foo\nimport Control.Monad.State.Lazy(execState)\n\nsome_building :: RevisionListBuilder Int ()\nsome_building = do\n    prefixList 4\n    prefixList 1\n\nsome_rev_list :: RevisionList Int\nsome_rev_list = execState some_building (revisionList [2,5])\n</code></pre>\n\n<p>So now we have constructed a <code>some_rev_list</code> with the \"building\" of <code>some_building</code>:</p>\n\n<pre><code>Foo Bar&gt; some_rev_list \nRevisionList {theList = [1,4,2,5], revision = 2}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "is_accepted": false, "score": 1, "last_activity_date": 1510907684, "creation_date": 1510907684, "answer_id": 47346339, "question_id": 47339283, "link": "https://stackoverflow.com/questions/47339283/default-values-in-haskell-data-types/47346339#47346339", "title": "Default values in Haskell data types", "body": "<p>There's already good answers here, so this answer is only meant as a supplement to the fine answers from <em>chi</em> and <em>Willem Van Onsem</em>.</p>\n\n<p>In mainstream object-oriented languages like Java and C#, it's not that a default object is <em>uninitialised</em>; rather, a default object is normally initialised with default values for their types, and it just happens that for reference types, the default is a null reference.</p>\n\n<p>Haskell doesn't have null references, so records can't be initialised with nulls. The most direct translation of objects would be records where every single constituent element is a <code>Maybe</code>. That's not particularly useful, however, but it highlights how hard it is to protect invariants in OOP.</p>\n\n<p>The Builder pattern doesn't solve that problem at all. Any Builder has to start with an initial Builder object, and that object is going to have to have default values as well.</p>\n\n<p>For more details, and lots of examples, I wrote an <a href=\"http://blog.ploeh.dk/2017/08/14/from-test-data-builders-to-the-identity-functor\" rel=\"nofollow noreferrer\">article series about this</a>. The article series specifically focuses on the Test Data Builder pattern, but you should be able to see how it generalises to the Fluent Builder pattern in general.</p>\n"}], "owner": {"reputation": 2659, "user_id": 581085, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5ef2ca8729e462595f1500b554ef95e0?s=128&d=identicon&r=PG", "display_name": "Dragno", "link": "https://stackoverflow.com/users/581085/dragno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1893, "favorite_count": 1, "accepted_answer_id": 47339409, "answer_count": 3, "score": 11, "last_activity_date": 1605146795, "creation_date": 1510867337, "last_edit_date": 1605146795, "question_id": 47339283, "link": "https://stackoverflow.com/questions/47339283/default-values-in-haskell-data-types", "title": "Default values in Haskell data types", "body": "<p>When you define a class in a object-oriented language it usually sets the default values for the member variables. Is there any mechanism in Haskell to do the same thing in record types? And a follow up question: If we don't know from the very start all the values for a data constructor but we obtain them from IO interaction can we build the type using something like the builder pattern from OOP?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["parsing", "haskell", "megaparsec"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510879404, "post_id": 47338799, "comment_id": 81635263, "body": "<code>logicalOrExpression = sepBy1 (symbol &quot;||&quot;) logicalAndExpression</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "edited": false, "score": 0, "creation_date": 1510873745, "post_id": 47339313, "comment_id": 81633624, "body": "The whole point of the optional part is to eventually do not parse anything. If I would add any consuming character while it would fix the recursion, it would also not accept all valid strings any more"}, {"owner": {"reputation": 25321, "user_id": 163177, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e811b5337bcad19d52c8fed3a0ea0075?s=128&d=identicon&r=PG", "display_name": "John F. Miller", "link": "https://stackoverflow.com/users/163177/john-f-miller"}, "reply_to_user": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "edited": false, "score": 0, "creation_date": 1510969461, "post_id": 47339313, "comment_id": 81676241, "body": "But you must grab <i>something</i> first otherwise you succeed forever without making progress.  What you have is, &quot;A logicalOrExpression is a logicalOrExpression which is a logicalOrExpression which is a logicalOrExpression which is a logicalOrExpression ...&quot;"}], "tags": [], "owner": {"reputation": 25321, "user_id": 163177, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e811b5337bcad19d52c8fed3a0ea0075?s=128&d=identicon&r=PG", "display_name": "John F. Miller", "link": "https://stackoverflow.com/users/163177/john-f-miller"}, "is_accepted": false, "score": 0, "last_activity_date": 1510867445, "creation_date": 1510867445, "answer_id": 47339313, "question_id": 47338799, "link": "https://stackoverflow.com/questions/47338799/parsing-optional-recursive-parser-runs-in-infinite-recursion/47339313#47339313", "title": "Parsing optional recursive parser runs in infinite recursion", "body": "<p>The empty string matches this parser, which I believe, causes infinite recursion in Magaparsec. I think you are missing a \"term\" or \"boolean\" somewhere in your function. If I wrote <code>True || False</code> what would capture the first \"True\"</p>\n"}, {"comments": [{"owner": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "edited": false, "score": 0, "creation_date": 1510871697, "post_id": 47339596, "comment_id": 81632811, "body": "No those two are not equivalent, as this changes operator associativity AFAICT"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "edited": false, "score": 0, "creation_date": 1510872650, "post_id": 47339596, "comment_id": 81633233, "body": "@SuperManitu That&#39;s true. If you need the original one, I guess you have to postprocess the AST. Left recursion is unfeasible in LL(1) parsers. You can also try <code>sepBy1</code> which gives you a list, which you can then associate as you wish before producing the AST."}, {"owner": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "edited": false, "score": 0, "creation_date": 1510873608, "post_id": 47339596, "comment_id": 81633580, "body": "Yeah, I think you are right, transform the grammer to be a right recursive one and then adjust the AST. Will have to play around a bit with that."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 1, "last_activity_date": 1510868612, "creation_date": 1510868612, "answer_id": 47339596, "question_id": 47338799, "link": "https://stackoverflow.com/questions/47338799/parsing-optional-recursive-parser-runs-in-infinite-recursion/47339596#47339596", "title": "Parsing optional recursive parser runs in infinite recursion", "body": "<p>That grammar looks equivalent to</p>\n\n<pre><code>&lt;LogicalORExpression&gt; :\n    &lt;LogicalANDExpression&gt;\n    &lt;LogicalANDExpression&gt; || &lt;LogicalORExpression&gt;\n</code></pre>\n\n<p>which becomes</p>\n\n<pre><code>&lt;LogicalORExpression&gt; :\n    &lt;LogicalANDExpression&gt; [|| &lt;LogicalORExpression&gt;]\n</code></pre>\n\n<p>In general, you need to rewrite the grammar in (roughly) LL(1) form, if possible. </p>\n"}, {"comments": [{"owner": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "edited": false, "score": 0, "creation_date": 1510914120, "post_id": 47342326, "comment_id": 81648466, "body": "I saw that, but the problem is that this flattens the grammar into one single Expression type. I have to rewrite the grammar to be right recursive and then post process the AST"}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "reply_to_user": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "edited": false, "score": 0, "creation_date": 1510917396, "post_id": 47342326, "comment_id": 81650595, "body": "@SuperManitu Why?"}, {"owner": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "edited": false, "score": 0, "creation_date": 1510919781, "post_id": 47342326, "comment_id": 81652080, "body": "Because I need to retain the AST from the Spec, I cannot simply flatten it out."}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "reply_to_user": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "edited": false, "score": 1, "creation_date": 1510924176, "post_id": 47342326, "comment_id": 81654764, "body": "@SuperManitu Why? Don&#39;t read the spec as a prescriptive description of how your compiler should be implemented. The BNF in the standard specifies the language grammar - what programmers use - not the internal data structures used by an implementation of the language. The fact that Haskell <code>data</code> declarations look superficially a bit like BNF notation is a red herring."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510925239, "post_id": 47342326, "comment_id": 81655431, "body": "@BenjaminHodgson I had similar thought, but then I realized that if one were to write an ES parsing library, the user of such library would expect the same AST as in the spec. If instead one is writing a compiler, the associativity of <code>&amp;&amp;,||</code> is irrelevant, since their semantics is associative anyway."}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510925698, "post_id": 47342326, "comment_id": 81655707, "body": "@chi I don&#39;t think that&#39;s true. Looking at eg <code>haskell-src-exts</code>, you see <a href=\"https://hackage.haskell.org/package/haskell-src-exts-1.19.1/docs/Language-Haskell-Exts-Syntax.html#g:8\" rel=\"nofollow noreferrer\">one massive <code>Expr</code> type</a> comprising infix expressions, function application, variables, etc. Whereas in <a href=\"https://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-220003\" rel=\"nofollow noreferrer\">the spec</a> the grammar for expressions is broken into four declarations."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510926077, "post_id": 47342326, "comment_id": 81655935, "body": "@BenjaminHodgson I&#39;m not claiming that Haskell types must correspond to non-terminals in the grammar. I think we agree on this. However, if the grammar makes an operator left-associative, the parser must (should) produce the AST in that way. If the only purpose of the parser is as a first step of a compiler, I guess it can chose a different associativity, when the semantics is not affected. (BTW, GHC parses all the infix symbols ignoring fixity declarations <code>infixl ...</code>, and then patching the AST later on, since it is simpler)"}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1510926472, "post_id": 47342326, "comment_id": 81656189, "body": "@chi The Megaparsec parser I described above will parse <code>&amp;&amp;</code> and <code>||</code> in a left-associative manner."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510926866, "post_id": 47342326, "comment_id": 81656467, "body": "@BenjaminHodgson I&#39;d consider that to implement the spec faithfully, then."}], "tags": [], "owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "is_accepted": false, "score": 3, "last_activity_date": 1608748501, "last_edit_date": 1608748501, "creation_date": 1510885400, "answer_id": 47342326, "question_id": 47338799, "link": "https://stackoverflow.com/questions/47338799/parsing-optional-recursive-parser-runs-in-infinite-recursion/47342326#47342326", "title": "Parsing optional recursive parser runs in infinite recursion", "body": "<p>It's easiest to use <a href=\"https://hackage.haskell.org/package/megaparsec-6.2.0/docs/Text-Megaparsec-Expr.html\" rel=\"nofollow noreferrer\"><code>megaparsec</code>'s built-in tools</a> if you need to parse a grammar of operators with precedence and associativity.</p>\n<pre><code>expr = makeExprParser term table\n    where\n        term = literal &lt;|&gt; parenthesised expr\n        table = [[InfixL (string &quot;&amp;&amp;&quot; $&gt; And)], [InfixL (string &quot;||&quot; $&gt; Or)]]\n</code></pre>\n<p>For suitable definitions of <code>literal</code> and <code>parenthesised</code>, this'll parse a grammar of literal expressions composed with left-associative infix <code>&amp;&amp;</code> and <code>||</code> operators, with <code>&amp;&amp;</code> having greater precedence than <code>||</code>. Megaparsec takes care of the tedious work of generating an LL(k) parser, and produces correct (left-associative, in this instance) parse trees.</p>\n<p>Of course JavaScript's expression grammar is much larger than two operators. This example can be straightforwardly extended to include (eg) unary prefix operators like <code>!</code>, postfix function calls, etc. See <a href=\"https://hackage.haskell.org/package/megaparsec-6.2.0/docs/Text-Megaparsec-Expr.html\" rel=\"nofollow noreferrer\">the module's documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "is_accepted": false, "score": -1, "last_activity_date": 1510930049, "creation_date": 1510930049, "answer_id": 47353319, "question_id": 47338799, "link": "https://stackoverflow.com/questions/47338799/parsing-optional-recursive-parser-runs-in-infinite-recursion/47353319#47353319", "title": "Parsing optional recursive parser runs in infinite recursion", "body": "<p>As I want to stay true to the spec in terms of the AST produced, I decided to switch to an Earley based parser and not parser combinators, as Earley's algorithm can handle left recursion.</p>\n\n<p>If I would be OK with flattening the grammar, I would use the answer of Benjamin Hodgson</p>\n"}], "owner": {"reputation": 616, "user_id": 3892684, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fs52b.png?s=128&g=1", "display_name": "Jan van Br&#252;gge", "link": "https://stackoverflow.com/users/3892684/jan-van-br%c3%bcgge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1608748501, "creation_date": 1510865385, "question_id": 47338799, "link": "https://stackoverflow.com/questions/47338799/parsing-optional-recursive-parser-runs-in-infinite-recursion", "title": "Parsing optional recursive parser runs in infinite recursion", "body": "<p>I'm currently writing a parser for ECMAScript 5 (as a toy). The standard dictates how logical or expressions should be parsed:</p>\n\n<pre><code>&lt;LogicalORExpression&gt; :\n    &lt;LogicalANDExpression&gt;\n    &lt;LogicalORExpression&gt; || &lt;LogicalANDExpression&gt;\n</code></pre>\n\n<p>basicly this is equivalent to </p>\n\n<p><code>&lt;logicalOrExpression&gt; = [&lt;logicalOrExpression&gt; ||] &lt;LogicalAndExpression&gt;</code></p>\n\n<p>but how should I parse this without running into an infite loop? My current parser obviously does:</p>\n\n<pre><code>logicalOrExpression :: Parser LogicalOrExpression\nlogicalOrExpression = do\n    orExpr &lt;- optional $ do\n        e &lt;- logicalOrExpression\n        _ &lt;- symbol \"||\"\n        return e\n    andExpr &lt;- logicalAndExpression\n    case orExpr of\n        Just e -&gt; return $ LogicalOrExpression (e, andExpr)\n        Nothing -&gt; return $ AndExpression andExpr\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 353, "user_id": 8906596, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207778167811470/picture?type=large", "display_name": "Adrien Varet", "link": "https://stackoverflow.com/users/8906596/adrien-varet"}, "edited": false, "score": 0, "creation_date": 1510866151, "post_id": 47338800, "comment_id": 81630174, "body": "@AdrienVaret, if you&#39;re satisfied with the answer, you can click the check mark to accept it."}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": true, "score": 4, "last_activity_date": 1510866119, "last_edit_date": 1510866119, "creation_date": 1510865386, "answer_id": 47338800, "question_id": 47338657, "link": "https://stackoverflow.com/questions/47338657/haskell-convert-either-parseerror-a-to-a/47338800#47338800", "title": "Haskell : convert Either ParseError a to a", "body": "<p>I'll start it for you, and you can finish it:</p>\n\n<pre><code>eitherToMaybe :: Either a b -&gt; Maybe b\neitherToMaybe (Left a) = ???\neitherToMaybe (Right b) = ???\n</code></pre>\n\n<p>A severe over-generalization looks like this (you can find this function with a less direct implementation in the <a href=\"http://hackage.haskell.org/package/monadplus-1.4.2/docs/Control-Applicative-Alternative.html#v:afold\" rel=\"nofollow noreferrer\"><code>monadplus</code></a> package):</p>\n\n<pre><code>import Control.Applicative (Alternative (..))\nimport Data.Profunctor.Unsafe ((#.))\nimport Data.Monoid (Alt (..))\n\nafold :: (Foldable f, Alternative g)\n                      =&gt; f a -&gt; g a\nafold = getAlt . foldMap (Alt #. pure)\n</code></pre>\n\n<p>But you don't really need to get into that business just yet.</p>\n"}], "owner": {"reputation": 353, "user_id": 8906596, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207778167811470/picture?type=large", "display_name": "Adrien Varet", "link": "https://stackoverflow.com/users/8906596/adrien-varet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 47338800, "answer_count": 1, "score": 2, "last_activity_date": 1510866119, "creation_date": 1510864736, "last_edit_date": 1510865431, "question_id": 47338657, "link": "https://stackoverflow.com/questions/47338657/haskell-convert-either-parseerror-a-to-a", "title": "Haskell : convert Either ParseError a to a", "body": "<p>I'm actually using Parsec to make an Expression Parser and I have a little question (I'm french also sorry for my english ).</p>\n\n<p>I have this code : </p>\n\n<pre><code>data Expression ... -- Recursive type Expression\n\ntype Store [(String, Float)] -- variable's storage\n\ntype Parser a = Parsec String () a\nparseExpr :: [Char] -&gt; Either ParseError Expression\nparseExpr string = parse expr \"\" stream \n    where \n        stream = filter (not . isSpace) string\n\n-- Parser's rules ...\n\nraiseError a = Nothing\n\nevalParser :: [Char] -&gt; Store -&gt; Float\nevalParser expr store = fromMaybe 0 (either raiseError (eval store)(parseExpr expr))\n</code></pre>\n\n<p>This code works really well, but i need this function : </p>\n\n<pre><code>parseExpression :: String -&gt; Maybe Expression\n</code></pre>\n\n<p>And I have no ideas of the right syntax to use.</p>\n\n<p>Someone can help me please ?</p>\n"}, {"tags": ["haskell", "functional-programming", "matching"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1510863746, "post_id": 47338415, "comment_id": 81628942, "body": "You can use a <i>pattern guard</i> for this."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510864262, "post_id": 47338415, "comment_id": 81629218, "body": "And <code>(==)</code> will not work, since <code>(==)</code> is actually &quot;<i>just an ordinary function</i>&quot; (well of course with some constraints)."}, {"owner": {"reputation": 1287, "user_id": 8737306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb7d3a90fd41a59ba3e205cbbc5a3e?s=128&d=identicon&r=PG&f=1", "display_name": "Zpalmtree", "link": "https://stackoverflow.com/users/8737306/zpalmtree"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1510864420, "post_id": 47338415, "comment_id": 81629293, "body": "@WillemVanOnsem Wow, I&#39;ve not heard of these before, this is very cool"}], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1510865553, "post_id": 47338569, "comment_id": 81629857, "body": "I use view patterns only when I&#39;m using <code>PatternSynonyms</code>, and I have to look up the syntax every single time. I absolutely hate those things and wish we had a better alternative."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1510977016, "post_id": 47338569, "comment_id": 81677506, "body": "There&#39;s also <code>MultiWayIf</code>."}], "tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": true, "score": 6, "last_activity_date": 1510865627, "last_edit_date": 1510865627, "creation_date": 1510864338, "answer_id": 47338569, "question_id": 47338415, "link": "https://stackoverflow.com/questions/47338415/is-it-possible-to-have-an-if-function-use-pattern-matching-in-haskell/47338569#47338569", "title": "Is it possible to have an if function use pattern matching in Haskell?", "body": "<p>The syntax you are looking for is that of a case statement or a guard:</p>\n\n<p>You said:</p>\n\n<pre><code>if (function2 inputInt == pattern((x:xs), [1,2,3])) then\n</code></pre>\n\n<p>In Haskell:</p>\n\n<pre><code>testingMethod inputInt | (x:xs, [1,2,3]) &lt;- function2 inputInt = expr\n                       | otherwise = expr2\n</code></pre>\n\n<p>Or using <code>case</code> and <code>let</code> (or you could inline things or use <code>where</code>):</p>\n\n<pre><code>testingMethod inputInt =\n    let res = function2 inputInt\n    in case res of\n         (x:xs, [1,2,3]) -&gt; expr\n         _ -&gt; expr2\n</code></pre>\n\n<p>Or using view patterns:</p>\n\n<pre><code>{-# LANGUAGE ViewPatterns #-}\ntestingMethod (function2 -&gt; (x:xs,[1,2,3])) = expr\ntestingMethod _ = expr2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": false, "score": 1, "last_activity_date": 1510864494, "creation_date": 1510864494, "answer_id": 47338598, "question_id": 47338415, "link": "https://stackoverflow.com/questions/47338415/is-it-possible-to-have-an-if-function-use-pattern-matching-in-haskell/47338598#47338598", "title": "Is it possible to have an if function use pattern matching in Haskell?", "body": "<p>Pattern matching in a function definition is simply syntactic sugar for the \"fundamental\" pattern matching provided by <code>case</code>. For example, let's desugar your first function:</p>\n\n<pre><code>testingMethod [] = \"Blank\"\ntestingMethod (x:xs) = show x\n</code></pre>\n\n<p>Can be rewritten to:</p>\n\n<pre><code>testingMethod arg = case arg of\n  [] -&gt; \"Blank\"\n  (x:xs) -&gt; show x\n</code></pre>\n\n<p>It's not so clear what you intend your second snippet to do, so I can't really show you how it would look with a <code>case</code> expression. But one possible interpretation would be something like this:</p>\n\n<pre><code>case function2 inputInt of\n  ((x:xs), [1,2,3]) -&gt; -- ...\n  (_, _) -&gt; -- ...\n</code></pre>\n\n<p>This supposes that your <code>function2</code> returns a tuple of two lists.</p>\n"}], "owner": {"reputation": 103, "user_id": 7299999, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89356d13edb456935f7f2b45ba10dc57?s=128&d=identicon&r=PG&f=1", "display_name": "s4342re41", "link": "https://stackoverflow.com/users/7299999/s4342re41"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 47338569, "answer_count": 2, "score": 4, "last_activity_date": 1510936101, "creation_date": 1510863648, "last_edit_date": 1510936101, "question_id": 47338415, "link": "https://stackoverflow.com/questions/47338415/is-it-possible-to-have-an-if-function-use-pattern-matching-in-haskell", "title": "Is it possible to have an if function use pattern matching in Haskell?", "body": "<p>I know that a method that takes a list input can use pattern matching like so:</p>\n\n<pre><code>testingMethod [] = \"Blank\"\ntestingMethod (x:xs) = show x\n</code></pre>\n\n<p>My question is, can I do this with an if function? For example, if I have a function1 that needs to check the pattern of the output from function2, how would I go about doing this? I am looking for something like this:</p>\n\n<pre><code>if (function2 inputInt == pattern((x:xs), [1,2,3])) then\n</code></pre>\n\n<p>Is this possible to do in haskell?</p>\n"}, {"tags": ["haskell", "monads"], "answers": [{"comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1510859205, "post_id": 47336830, "comment_id": 81626516, "body": "I think it would help address the confusion in the question if you explain how <code>a &gt;&gt; b</code> is different from an operator like <code>f a b = b</code>, which is often what people think when they see that <code>&gt;&gt;</code> discards the value on its left hand. The difference, of course, is that <code>&gt;&gt;</code> discards the monadic <i>value</i>, but not the monadic *context`."}, {"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 0, "creation_date": 1510863148, "post_id": 47336830, "comment_id": 81628628, "body": "@Willem, does (&gt;&gt;) (Left 1.0)(Right 1 &gt;&gt;= f) equal to (Left 1.0) &gt;&gt; (Right 1 &gt;&gt;= f) so that according to (Left  l &gt;&gt;= _ = Left l) (Right 1 is discarded)? If so, it is understandable. Initially, I thought that the priority was  (Left 1.0 &gt;&gt; Right 1) &gt;&gt;= f"}, {"owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 0, "creation_date": 1510863219, "post_id": 47336830, "comment_id": 81628655, "body": "@Willem, also: does Either inherit default &gt;&gt; implementation from Monad? I didn&#39;t find explicit implementation of &gt;&gt; in Either."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "edited": false, "score": 1, "creation_date": 1510863352, "post_id": 47336830, "comment_id": 81628738, "body": "@BulatM.: you are correct <code>(&gt;&gt;=)</code> (and <code>(&gt;&gt;)</code>) binds right to left. And indeed <code>class Monad</code> has a default implementation <code>a &gt;&gt; b = a &gt;&gt; \\_ -&gt; b</code>, so if you do not specify it in the <code>instance</code>, then the default is used."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 8, "last_activity_date": 1510858444, "last_edit_date": 1510858444, "creation_date": 1510857225, "answer_id": 47336830, "question_id": 47336752, "link": "https://stackoverflow.com/questions/47336752/why-either-value-is-not-discarded/47336830#47336830", "title": "Why Either value is not discarded?", "body": "<blockquote>\n  <p>As I understand[, the] <code>&gt;&gt;</code> operator discards monadic result of the first argument,</p>\n</blockquote>\n\n<p>No, it does <strong>not</strong>. It more or less sees <code>Left</code> like a <code>Maybe</code> monad sees <code>Nothing</code> (the main difference is that <code>Left</code> also carries a value). Therefore it is sometimes used as an \"advanced <code>Maybe</code>\" that can for instance carry error messages.</p>\n\n<p><code>(&gt;&gt;) :: Monad m =&gt; m a -&gt; m b -&gt; m b</code> is a function such that <strong><code>f &gt;&gt; g</code> is equivalent to <code>f &gt;&gt;= \\_ -&gt; g</code></strong> and <code>f &gt;&gt;= const g</code>. This is the default implementation in the <code>Monad</code> typeclass.</p>\n\n<p>It depends thus on how <code>(&gt;&gt;=) :: Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b</code> is implemented.</p>\n\n<p>Now for an <code>Either</code> it is <a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/src/Data.Either.html#line-141\" rel=\"noreferrer\">implemented as</a>:</p>\n\n<blockquote>\n<pre><code>instance Monad (Either e) where\n    Left  l &gt;&gt;= _ = Left l\n    Right r &gt;&gt;= k = k r\n</code></pre>\n</blockquote>\n\n<p>So that means in case of a <strong><code>Left l</code> on the left hand side, then the right hand side is ignored</strong>, in case the left hand side is a <code>Right r</code>, then <code>k</code> is applied to the value the <code>Right</code> constructor is wrapping.</p>\n\n<p>So we can replace your query with (added brackets for clarity):</p>\n\n<pre><code>   Left 1.0 &gt;&gt; Right 1 &gt;&gt;= f\n=  (&gt;&gt;) (Left 1.0) (Right 1 &gt;&gt;= f)\n-&gt; Left 1.0\n</code></pre>\n\n<p>Semantically you can see an <code>Either</code> as a \"more advanced\" version of <code>Maybe</code> where <code>Left</code> takes the place of the <code>Nothing</code>. So from the moment someting is <code>Left x</code>, then it stays <code>Left x</code>. Regardless how we bind it.</p>\n"}, {"tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": false, "score": 2, "last_activity_date": 1510859544, "creation_date": 1510859544, "answer_id": 47337397, "question_id": 47336752, "link": "https://stackoverflow.com/questions/47336752/why-either-value-is-not-discarded/47337397#47337397", "title": "Why Either value is not discarded?", "body": "<p>Notice the definition contradicts your belief about discarding the left value of a sequence operator:</p>\n\n<pre><code>instance Monad (Either e) where\n    Left  l &gt;&gt;= _ = Left l\n    Right r &gt;&gt;= k = k r\n</code></pre>\n\n<p>In fact, in the case of <code>Left</code> the <code>Right</code> value is discarded.</p>\n\n<p>See the <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/src/Data.Either.html#line-136\" rel=\"nofollow noreferrer\">source</a> which can be found by clicking on the <code>Monad</code> instance under the <code>Either</code> declaration in the haddocks.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 2, "last_activity_date": 1510925989, "last_edit_date": 1510925989, "creation_date": 1510898766, "answer_id": 47344262, "question_id": 47336752, "link": "https://stackoverflow.com/questions/47336752/why-either-value-is-not-discarded/47344262#47344262", "title": "Why Either value is not discarded?", "body": "<p>The \"result\" which is being discarded refers only to the <code>a</code> values contained in (not always literally) an <code>m a</code> value, not the rest of it. In case of <code>Either</code> it means that the value of a <code>Right</code> will be ignored, but not whether it's <code>Left</code> or <code>Right</code>, or the value of a <code>Left</code>. </p>\n\n<p>If you combine the definition of <code>&gt;&gt;=</code> for <code>Either</code> and the default definition of <code>&gt;&gt;</code>, you'll see that <code>&gt;&gt;</code> here is effectively</p>\n\n<pre><code>Left  l &gt;&gt; x = Left  l &gt;&gt;= \\_ -&gt; x = Left l\nRight r &gt;&gt; x = Right r &gt;&gt;= \\_ -&gt; x = x\n</code></pre>\n\n<p>and the result in the second clause indeed doesn't depend on <code>r</code>.</p>\n"}], "owner": {"reputation": 638, "user_id": 6772989, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a05dc0e117ea9018de89f926894ea906?s=128&d=identicon&r=PG&f=1", "display_name": "Bulat M.", "link": "https://stackoverflow.com/users/6772989/bulat-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 47336830, "answer_count": 3, "score": 3, "last_activity_date": 1510925989, "creation_date": 1510856891, "last_edit_date": 1510857399, "question_id": 47336752, "link": "https://stackoverflow.com/questions/47336752/why-either-value-is-not-discarded", "title": "Why Either value is not discarded?", "body": "<p>Have the following in <em>ghci</em>:</p>\n\n<pre><code>:m + Control.Monad.Error\nlet f x = Right x\n\nLeft 1.0 &gt;&gt; Right 1 &gt;&gt;= f\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>Left 1.0\n</code></pre>\n\n<p>As I understand >> operator discards monadic result of the first argument,\nbut I see that here it is preserved. Could you please explain?</p>\n\n<p><a href=\"http://hackage.haskell.org/package/base-4.10.0.0/docs/src/Data.Either.html#Either\" rel=\"nofollow noreferrer\">http://hackage.haskell.org/package/base-4.10.0.0/docs/src/Data.Either.html#Either</a></p>\n\n<p>strangely, that link doesn't show how Either is implementing methods of Monad typeclass.</p>\n"}, {"tags": ["haskell", "io", "monads", "io-monad", "pure-function"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 6, "creation_date": 1510854950, "post_id": 47336203, "comment_id": 81624032, "body": "What does <code>print</code> returns?"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 1, "creation_date": 1510855114, "post_id": 47336203, "comment_id": 81624124, "body": "All the builtin impure functions have the word <code>unsafe</code> in the name. So <code>print</code> is pure. It returns the same result given the same parameter."}, {"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1510855254, "post_id": 47336203, "comment_id": 81624228, "body": "@4castle Not necessarily, usually <code>unsafe</code> is about the fact that the function is not total."}, {"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "reply_to_user": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 1, "creation_date": 1510855528, "post_id": 47336203, "comment_id": 81624366, "body": "@freestyle Well, that is saying that there are other functions that also have <code>unsafe</code> in the name. That&#39;s not really in opposition to what 4castle said. I&#39;m also not sure of any <i>builtin</i> functions that use the convention you&#39;re talking about (only builtin functions of the sort 4castle mentioned, like <code>unsafeInterleaveIO</code> and <code>reallyUnsafePtrEquality#</code>)."}, {"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "reply_to_user": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 0, "creation_date": 1510856147, "post_id": 47336203, "comment_id": 81624757, "body": "@DavidYoung Yes, I didn&#39;t say exactly, I wanted to say that <code>unsafe</code> doesn&#39;t always say that the function isn&#39;t pure. Sometimes, it&#39;s about that the function doesn&#39;t check something."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 1, "creation_date": 1510867965, "post_id": 47336203, "comment_id": 81631087, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7840126/why-monads-how-does-it-resolve-side-effects\">Why monads? How does it resolve side-effects?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1510855287, "post_id": 47336322, "comment_id": 81624254, "body": "Sneaky Haskell :)"}, {"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 1, "creation_date": 1510855410, "post_id": 47336322, "comment_id": 81624305, "body": "Obviously it always returns <code>IO ()</code> since that is required by the type, but the question is whether it always returns the <i>same</i>  value of <code>IO ()</code>."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 0, "creation_date": 1510855457, "post_id": 47336322, "comment_id": 81624330, "body": "@Lee <code>IO ()</code> Is a value itself my friend"}, {"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 0, "creation_date": 1510855541, "post_id": 47336322, "comment_id": 81624373, "body": "Yes it is a value, but the question is whether <code>print</code> always returns the same value. It&#39;s not enough for it to just have the correct type."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 3, "creation_date": 1510855564, "post_id": 47336322, "comment_id": 81624387, "body": "@DamianLattenero &quot;IO () Is a value itself&quot; No, it&#39;s not. There are many different values of type <code>IO ()</code> and even <code>print</code> can produce different values of that type (if you pass it different arguments). Otherwise all print statements would print the same thing."}, {"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1510855636, "post_id": 47336322, "comment_id": 81624433, "body": "Isn&#39;t the point of a pure function to return the same thing <i>given the same inputs?</i> (parameters) Otherwise all functions would be useless"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1510856031, "post_id": 47336322, "comment_id": 81624679, "body": "@sepp2k <code>() :: ()</code> unit value, isn&#39;t a value? and always the same value? Maybe I&#39;m missing something"}, {"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1510856074, "post_id": 47336322, "comment_id": 81624708, "body": "@DavidYoung Okay, thanks. I think this the OP&#39;s question is rather deeper than it appears at first blush - so perhaps some elaboration could be useful. Because it would seem to me that this is an edge case in Haskell where the developers tried to make an inherently impure activity as pure as possible. Since the obvious answer from almost any other language would be &quot;of course not, the point of printing is to get a side effect&quot;."}, {"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "reply_to_user": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 1, "creation_date": 1510856150, "post_id": 47336322, "comment_id": 81624760, "body": "@HFBrowning It&#39;s kind of like a form of metaprogramming, in some ways. The &quot;pure&quot; parts of a Haskell program construct an IO action (out of smaller IO actions) which is then executed."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 0, "creation_date": 1510856230, "post_id": 47336322, "comment_id": 81624811, "body": "@DavidYoung sure, but always <code>()</code> value is returned... so... is pure at the end."}, {"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "edited": false, "score": 1, "creation_date": 1510856338, "post_id": 47336322, "comment_id": 81624869, "body": "@DamianLattenero The <code>()</code> is not returned. The <code>IO</code> action is returned. This particular <code>IO</code> action gives you back a <code>()</code>, but it could give back something else. For example, you can have an IO action that reads a file and it can give back a <code>String</code> that is different if the file is changed, each time you run it. But you aren&#39;t calling a function there. You are running an IO action. It might sound like a matter of &quot;semantics&quot; (in the sense of English), but this distinction is actually pretty deeply built into the language itself."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 4, "creation_date": 1510856394, "post_id": 47336322, "comment_id": 81624899, "body": "@DamianLattenero Yes, <code>()</code> is a value of type <code>()</code> and it&#39;s the only value of type <code>()</code>. But print does not give you a value of type <code>()</code>, it gives you a value of type <code>IO ()</code>, of which there are many (in fact infinitely many) different values and <code>()</code> isn&#39;t one of them. For example the values produced by <code>print &quot;hello&quot;</code> and <code>print &quot;world&quot;</code> are different - otherwise <code>main = print &quot;hello&quot;</code> and <code>main = print &quot;world&quot;</code> would need to behave the same, as <code>main</code> would have the same value in both."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1510856655, "post_id": 47336322, "comment_id": 81625059, "body": "@sepp2k but, for the same String, for example, &quot;hello&quot;, it will return always the same <code>IO ()</code> value? or could be different? if I give &quot;hello&quot;, could some time prints &quot;world&quot; or something?"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 3, "creation_date": 1510857089, "post_id": 47336322, "comment_id": 81625336, "body": "It always returns the same IO action for the same input, but this has nothing to do with the fact that it returns <code>IO ()</code>. For example, <code>getLine</code> returns <code>IO String</code> but it is also a pure function."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1510857208, "post_id": 47336322, "comment_id": 81625402, "body": "@interjay Thanks so much! now it get alll  clear, I edited thanks to you, a lot. I had it misunderstanding"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1510857273, "post_id": 47336322, "comment_id": 81625439, "body": "@interjay I quoted you in the answer now. Thanks"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1510857769, "post_id": 47336322, "comment_id": 81625691, "body": "@DamianLattenero Technically, <code>getLine</code> is not a pure function since it is not even a function, it is a value of type <code>IO ()</code>. This roughly correspond to what in imperative languages would be modelled as a zero-args &quot;void&quot; function, but in Haskell is not a function."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1510925216, "post_id": 47336322, "comment_id": 81655414, "body": "@chi I&#39;m totally agree with you, I was doing more research on my own, and finally add info that I found here and there, and finally updated my answer in your line of thinking"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1563619151, "post_id": 47336322, "comment_id": 100765257, "body": "<code>putStrLn &quot;Hi&quot; :: IO ()</code> is a pure value that <i>represents</i> an I/O action of printing the string <code>&quot;Hi\\n&quot;</code> at stdout. It might or <a href=\"https://stackoverflow.com/q/47336203/i#comment81633766_47338028\">might not ever</a> be actually executed. <code>let x = print &quot;1&quot; in x &gt;&gt; x</code> and <code>print &quot;1&quot; &gt;&gt; print &quot;1&quot;</code> are fully interchangeable. This is the definition of being <i>referentially transparent</i> indeed. Where your answer says otherwise it is incorrect. Haskell is pure because we never execute; we just manipulate the pure values which represent executable actions. It&#39;s a pretense, but a mathematically sound one."}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 1, "last_activity_date": 1510925348, "last_edit_date": 1510925348, "creation_date": 1510855214, "answer_id": 47336322, "question_id": 47336203, "link": "https://stackoverflow.com/questions/47336203/is-print-in-haskell-a-pure-function/47336322#47336322", "title": "Is print in Haskell a pure function?", "body": "<p>If you just read the Tag of pure-function (A function that always evaluates to the same result value given the same argument value(s) and that does not cause any semantically observable side effect or output, such as mutation of mutable objects or output to I/O devices.) and then Think in the type of print:</p>\n\n<pre><code>putStrLn :: String -&gt; IO ()\n</code></pre>\n\n<p>You will find a trick there, it always returns <code>IO ()</code>, so... <strong><em>No</em></strong>, it produces effects. So in terms of <a href=\"https://wiki.haskell.org/Referential_transparency\" rel=\"nofollow noreferrer\">Referential Transparency</a> is not pure\n For example, <code>getLine</code> returns <code>IO String</code> but it is also a pure function. (@interjay contribution), What I'm trying to say, is that the answer depends very close of the question:</p>\n\n<p><strong><em>On matter of value, <code>IO ()</code> will always be the same <code>IO ()</code> value for  the same input.</em></strong></p>\n\n<p>And</p>\n\n<p><strong><em>On matter of execution, it is not pure because the execution of that\n<code>IO ()</code> could have side effects (put an string in the screen, in this\ncase looks so innocent, but some IO could lunch nuclear bombs, and\nthen return the Int 42)</em></strong></p>\n\n<p>You could understand better with the nice approach of @Ben here:</p>\n\n<blockquote>\n  <p>\"There are several ways to explain how you're \"purely\" manipulating\n  the real world. One is to say that IO is just like a state monad, only\n  the state being threaded through is the entire world outside your\n  program;= (so your Stuff -> IO DBThing function really has an extra\n  hidden argument that receives the world, and actually returns a\n  DBThing along with another world; it's always called with different\n  worlds, and that's why it can return different DBThing values even\n  when called with the same Stuff). Another explanation is that an IO\n  DBThing value is itself an imperative program; your Haskell program is\n  a totally pure function doing no IO, which returns an impure program\n  that does IO, and the Haskell runtime system (impurely) executes the\n  program it returns.\"</p>\n</blockquote>\n\n<p>And @Erik Allik:</p>\n\n<blockquote>\n  <p>So Haskell functions that return values of type IO a, are actually not\n  the functions that are being executed at runtime \u2014 what gets executed\n  is the IO a value itself. So these functions actually are pure but\n  their return values represent non-pure computations.</p>\n</blockquote>\n\n<p>You can found them here <a href=\"https://stackoverflow.com/questions/34280735/understanding-pure-functions-in-haskell-with-io\">Understanding pure functions in Haskell with IO</a></p>\n"}, {"comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1510875608, "post_id": 47339144, "comment_id": 81634235, "body": "At runtime, <code>IO X</code> and <code>X</code> are really represented the same way. It is just that the compiler knows special things about how <code>IO X</code> might behave (and special things about how pure values behave - assumptions which can be violated!); and it generates code which is optimized using these assumptions. The view of IO as instructions (i.e. &quot;pieces of paper&quot;) is still useful; but it shouldn&#39;t be thought of as relating to &#39;values at runtime&#39; - rather to &#39;values as logical objects&#39;."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 3, "creation_date": 1510879104, "post_id": 47339144, "comment_id": 81635208, "body": "@user2407038 In GHC at least, <code>IO X</code> has <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/src/GHC.Base.html#line-1197\" rel=\"nofollow noreferrer\">a very different representation</a> than <code>X</code>."}], "tags": [], "owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "is_accepted": false, "score": 8, "last_activity_date": 1563331720, "last_edit_date": 1563331720, "creation_date": 1510866802, "answer_id": 47339144, "question_id": 47336203, "link": "https://stackoverflow.com/questions/47336203/is-print-in-haskell-a-pure-function/47339144#47339144", "title": "Is print in Haskell a pure function?", "body": "<p>A value of type <code>IO Int</code> is not really an <code>Int</code>. It's more like a piece of paper which reads \"hey Haskell runtime, please produce an <code>Int</code> value in such and such way\". The piece of paper is inert and remains the same, even if the <code>Int</code>s eventually produced by the runtime are different.</p>\n\n<p>You send the piece of paper to the runtime by assigning it to <code>main</code>. If the <code>IO</code> action never comes in the way of <code>main</code> and instead languishes inside some container, it will never get executed.</p>\n\n<p>Functions that return <code>IO</code> actions are pure like the others. They always return the same piece of paper. What the runtime does with those instructions is another matter.</p>\n\n<p>If they <em>weren</em>'t pure, we would have to think twice before changing</p>\n\n<pre><code>foo :: (Int -&gt; IO Int) -&gt; IO Int\nfoo f = liftA2 (+) (f 0) (f 0)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>foo :: (Int -&gt; IO Int) -&gt; IO Int\nfoo f = let x = f 0 in liftA2 (+) x x\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4625, "user_id": 1861521, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dda04c7abdfe8b05f4a258b7a01900a6?s=128&d=identicon&r=PG", "display_name": "jcarpenter2", "link": "https://stackoverflow.com/users/1861521/jcarpenter2"}, "is_accepted": false, "score": 1, "last_activity_date": 1510869093, "creation_date": 1510869093, "answer_id": 47339715, "question_id": 47336203, "link": "https://stackoverflow.com/questions/47336203/is-print-in-haskell-a-pure-function/47339715#47339715", "title": "Is print in Haskell a pure function?", "body": "<p>Yes, <code>print</code> is a pure function.  The value it returns has type <code>IO ()</code>, which you can think of as a bunch of code that outputs the string you passed in.  For each string you pass in, it always returns the same code.</p>\n"}], "owner": {"reputation": 159, "user_id": 8260539, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/45974390fcb7548c100f887df0ad6496?s=128&d=identicon&r=PG&f=1", "display_name": "bubu", "link": "https://stackoverflow.com/users/8260539/bubu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 941, "favorite_count": 1, "answer_count": 3, "score": 7, "last_activity_date": 1563619305, "creation_date": 1510854763, "last_edit_date": 1563619305, "question_id": 47336203, "link": "https://stackoverflow.com/questions/47336203/is-print-in-haskell-a-pure-function", "title": "Is print in Haskell a pure function?", "body": "<p>Is <code>print</code> in Haskell a pure function; why or why not? I'm thinking it's not, because it does not always return the same value as pure functions should.</p>\n"}, {"tags": ["parsing", "haskell"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510852465, "post_id": 47335340, "comment_id": 81622554, "body": "<a href=\"https://stackoverflow.com/q/46186238/791604\">Possible duplicate?</a>"}, {"owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1510855191, "post_id": 47335340, "comment_id": 81624191, "body": "Ergo this is a bad idea?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1510866759, "post_id": 47335340, "comment_id": 81630474, "body": "@DanielWagner, I concur. Carbon, well, usually, but there are some situations where you do want that. I believe that&#39;s the idea behind <a href=\"https://github.com/well-typed/cborg/blob/master/cborg/src/Codec/CBOR/FlatTerm.hs\" rel=\"nofollow noreferrer\">Codec.CBOR.FlatTerm</a>, but I could be remembering wrong."}], "owner": {"reputation": 2970, "user_id": 1763955, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3a7a94d762a9d702b88404f840e31d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Carbon", "link": "https://stackoverflow.com/users/1763955/carbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1510866495, "answer_count": 0, "score": 1, "last_activity_date": 1510851822, "creation_date": 1510851822, "question_id": 47335340, "link": "https://stackoverflow.com/questions/47335340/parse-within-parse-attoparsec", "closed_reason": "Duplicate", "title": "Parse Within Parse - Attoparsec", "body": "<p>Assume I want to break lines up with attoparsec, then parse the line contents. Is there a way to apply another parser to a <code>Parser Text,</code> or do I need to apply <code>parseOnly</code>?</p>\n\n<p>e.g. say I have:</p>\n\n<pre><code>import qualified Data.Attoparsec.Text as A\nimport Data.Attoparsec.Text (Parser)\nimport Data.Text  (Text)\n\nwordList :: Parser [String]\nwordList = A.sepBy (A.many1 A.letter) (A.char ' ')\nanyLine :: Parser Text\nanyLine = A.takeTill A.isEndOfLine &lt;* A.endOfLine\n</code></pre>\n\n<p>Is there some way to do <code>wList &lt;$&gt; anyLine</code>? I'm trying to use takeTill as it's very fast.</p>\n"}, {"tags": ["haskell", "functional-programming", "monads"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1510851288, "post_id": 47334963, "comment_id": 81621723, "body": "No <code>&gt;&gt;</code> will not execute the first IO immediately, since an <code>IO</code> does <i>not</i> perform IO, it more or less describes <i>how to modify</i> the state of a machine, it is simply a binding of two <code>IO</code>s. In fact in Haskell nothing gets executed unless really necessary."}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 5, "last_activity_date": 1510869898, "last_edit_date": 1510869898, "creation_date": 1510851593, "answer_id": 47335268, "question_id": 47334963, "link": "https://stackoverflow.com/questions/47334963/how-can-i-bind-two-io-monads-without-executing-them/47335268#47335268", "title": "How can I bind two IO () monads without executing them?", "body": "<p>I'm not 100% sure I understand the problem, but I think it goes like this: you'd like to do some interactions with the user, storing up information about the interaction, then display all the information at once at the end of the entire interaction.</p>\n\n<p>Here's a very simplified version of your code, that skips all the business logic and just keeps asking the user if they want to continue.</p>\n\n<pre><code>prompt = do\n    putStrLn \"Continue?\"\n    s &lt;- getLine\n    case s of\n        \"y\" -&gt; putStrLn \"Okay, let's continue.\" &gt;&gt; prompt\n        _ -&gt; return ()\n\nmain = prompt\n</code></pre>\n\n<p>I <em>think</em> the effect you're asking for is to delay the display of \"Okay, let's continue.\" until the user has stopped hitting \"y\". That's no problem. There's lots of ways you can do this. The most flexible is to have <code>prompt</code> return the action it wants to be executed after it completes:</p>\n\n<pre><code>prompt = do\n    putStrLn \"Continue?\"\n    s &lt;- getLine\n    case s of\n        \"y\" -&gt; do\n            act &lt;- prompt\n            return (putStrLn \"Okay, let's continue.\" &gt;&gt; act)\n        _ -&gt; return (return ())\n\nmain = do\n    act &lt;- prompt\n    act\n</code></pre>\n\n<p>(There are combinators that can make this code more compact, as well.) But I don't like this design; it makes it difficult to introspect on the result of <code>prompt</code>. A more specialized but also more maintainable approach is to return some data describing the interaction, which the caller can then turn into an <code>IO</code> action summarizing things. In this case, a list of strings seems like a suitable description.</p>\n\n<pre><code>prompt = do\n    putStrLn \"Continue?\"\n    s &lt;- getLine\n    case s of\n        \"y\" -&gt; do\n            results &lt;- prompt\n            return (\"Okay, let's continue.\" : results)\n        _ -&gt; return []\n\nmain = do\n    results &lt;- prompt\n    mapM_ putStrLn results\n</code></pre>\n\n<p>Hopefully this explanation is clear enough that you can combine this idea with your more complicated business logic.</p>\n"}], "owner": {"reputation": 768, "user_id": 8306896, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/924e40b39a2f51489d438fd284a9dd3f?s=128&d=identicon&r=PG&f=1", "display_name": "abhishek", "link": "https://stackoverflow.com/users/8306896/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 47335268, "answer_count": 1, "score": 2, "last_activity_date": 1510869898, "creation_date": 1510850521, "question_id": 47334963, "link": "https://stackoverflow.com/questions/47334963/how-can-i-bind-two-io-monads-without-executing-them", "title": "How can I bind two IO () monads without executing them?", "body": "<p>In the below code, I am using <code>&gt;&gt;</code> to concatenate IO actions together. But AFAIU, <code>m1&gt;&gt;m2</code> gets de-sugared to <code>m1&gt;&gt;=(\\_.m2)</code> and thus it is executing the first IO action right when it is binding. I want all printing to happen in the main, i.e. print statements should not get interleaved with the input statements (\"Enter Code\"). Since <code>do</code> doesn't allow me to return any other monad than IO like <code>[IO ()]</code>. How can I have the desired printing effect? </p>\n\n<pre><code>f :: [Int] -&gt; IO ()\nf inventory = do\n        putStrLn \"Enter Code\\n\"\n        x &lt;- getLine\n        let idx = nameToIndex x \n        putStrLn \"Quantity\\n\"\n        y &lt;- getLine\n        putStrLn \"More?\\n\"\n        c &lt;- getChar\n        let q = (read y :: Int)\n        let curM = if inventory !! idx &gt;= q then (putStrLn \"sdaf\\n\") else (putStrLn \"Overflow!\\n\")  \n        if c == 'Y' then curM&gt;&gt;(f (update inventory idx)) else curM\n\nmain = f [1, 2]\n</code></pre>\n"}, {"tags": ["variables", "haskell", "if-statement"], "comments": [{"owner": {"reputation": 2704, "user_id": 4978205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286541fdef1e5aad84a9bffbe2279dea?s=128&d=identicon&r=PG&f=1", "display_name": "Glubus", "link": "https://stackoverflow.com/users/4978205/glubus"}, "edited": false, "score": 4, "creation_date": 1510839156, "post_id": 47330897, "comment_id": 81612672, "body": "just create a function that returns object2. Why are you if-and-els&#39;ing anyway, both paths execute the same code"}, {"owner": {"reputation": 77, "user_id": 5331575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SGm_bmDhEsE/AAAAAAAAAAI/AAAAAAAAADc/ZfKKEuvQWWo/photo.jpg?sz=128", "display_name": "Sebastian Paulsen", "link": "https://stackoverflow.com/users/5331575/sebastian-paulsen"}, "reply_to_user": {"reputation": 2704, "user_id": 4978205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286541fdef1e5aad84a9bffbe2279dea?s=128&d=identicon&r=PG&f=1", "display_name": "Glubus", "link": "https://stackoverflow.com/users/4978205/glubus"}, "edited": false, "score": 0, "creation_date": 1510839656, "post_id": 47330897, "comment_id": 81612994, "body": "Thanks! They are supposed to different things when the code is done. What do you mean by making a function that returns object 2? The function updateObject returns object2, but I run it at different times with different parameters. I&#39;m going to have several different if&#39;s with different updates. How can I then access the final object with all the updates?"}, {"owner": {"reputation": 1235, "user_id": 3086454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fe13e8bdaaf213c71c5413ea1f17819?s=128&d=identicon&r=PG&f=1", "display_name": "d12frosted", "link": "https://stackoverflow.com/users/3086454/d12frosted"}, "edited": false, "score": 0, "creation_date": 1510840054, "post_id": 47330897, "comment_id": 81613313, "body": "<code>let object2 = updateObject object s in</code> defines <code>object2</code> for expression after <code>in</code>. You are trying to use it outside. Hense compiler errors."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510840668, "post_id": 47330897, "comment_id": 81613834, "body": "<code>let object = newObject</code> doesn&#39;t do anything useful."}, {"owner": {"reputation": 77, "user_id": 5331575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SGm_bmDhEsE/AAAAAAAAAAI/AAAAAAAAADc/ZfKKEuvQWWo/photo.jpg?sz=128", "display_name": "Sebastian Paulsen", "link": "https://stackoverflow.com/users/5331575/sebastian-paulsen"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510845532, "post_id": 47330897, "comment_id": 81617540, "body": "@chepner The idea was to create an initial object that I could run updates on, since updateObject requires an object to begin with."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510846330, "post_id": 47330897, "comment_id": 81618121, "body": "That&#39;s not what it does. It just makes <code>object</code> another name for whatever <code>newObject</code> is. This leads me to ask, what is the type of <code>newObject</code>? If it&#39;s a function, you are never calling it (unless that&#39;s part of what <code>updateObject</code> does)."}, {"owner": {"reputation": 2704, "user_id": 4978205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286541fdef1e5aad84a9bffbe2279dea?s=128&d=identicon&r=PG&f=1", "display_name": "Glubus", "link": "https://stackoverflow.com/users/4978205/glubus"}, "edited": false, "score": 0, "creation_date": 1510910866, "post_id": 47330897, "comment_id": 81646305, "body": "@SebastianPaulsen don&#39;t forget to close the question by selecting a solution or by deleting your post. People will waste time trying to help you while you&#39;re not in need of it anymore."}, {"owner": {"reputation": 77, "user_id": 5331575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SGm_bmDhEsE/AAAAAAAAAAI/AAAAAAAAADc/ZfKKEuvQWWo/photo.jpg?sz=128", "display_name": "Sebastian Paulsen", "link": "https://stackoverflow.com/users/5331575/sebastian-paulsen"}, "edited": false, "score": 1, "creation_date": 1510910998, "post_id": 47330897, "comment_id": 81646399, "body": "oh sorry, I&#39;m new to stackoverflow. Done what you said!"}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1510840747, "post_id": 47331379, "comment_id": 81613880, "body": "Using <code>head</code> here is poor practice; what if <code>s</code> is an empty string?"}, {"owner": {"reputation": 77, "user_id": 5331575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SGm_bmDhEsE/AAAAAAAAAAI/AAAAAAAAADc/ZfKKEuvQWWo/photo.jpg?sz=128", "display_name": "Sebastian Paulsen", "link": "https://stackoverflow.com/users/5331575/sebastian-paulsen"}, "edited": false, "score": 0, "creation_date": 1510845302, "post_id": 47331379, "comment_id": 81617386, "body": "@Glubus Thanks! I think I&#39;ve got an idea on how to fix it based on what you&#39;re writing here."}, {"owner": {"reputation": 2704, "user_id": 4978205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286541fdef1e5aad84a9bffbe2279dea?s=128&d=identicon&r=PG&f=1", "display_name": "Glubus", "link": "https://stackoverflow.com/users/4978205/glubus"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510910681, "post_id": 47331379, "comment_id": 81646175, "body": "@chepner what if s doesn&#39;t start with either &#39;s&#39; or &#39;c&#39;? This is just an example that emphasizes separation of concerns. updateObject is not a robust function at all That said, validateInput at line 4 should imply the stability of this program (not that that is an excuse not to write crashable code elsewhere)."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510924390, "post_id": 47331379, "comment_id": 81654896, "body": "The original code handled inputs other than <code>s</code> and <code>c</code>; you&#39;ve taken a step <i>backward</i> in that regard."}, {"owner": {"reputation": 2704, "user_id": 4978205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286541fdef1e5aad84a9bffbe2279dea?s=128&d=identicon&r=PG&f=1", "display_name": "Glubus", "link": "https://stackoverflow.com/users/4978205/glubus"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1511276927, "post_id": 47331379, "comment_id": 81786352, "body": "@chepner Yes, this is the point I was after posing that question to you. My answer is not illustrating how one should validate input, hence &quot;what if s is an empty string&quot; is an irrelevant question. I&#39;ve added this non-implemented function <code>ValidateInput</code> to show that this snippet expects some logic in that regard. My answer talks about how to structure code, so that OP can solve his problem while maintaining proper style. I left out validation on purpose because it&#39;s trivial anyway and only clutters code that does matter."}], "tags": [], "owner": {"reputation": 2704, "user_id": 4978205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286541fdef1e5aad84a9bffbe2279dea?s=128&d=identicon&r=PG&f=1", "display_name": "Glubus", "link": "https://stackoverflow.com/users/4978205/glubus"}, "is_accepted": true, "score": 2, "last_activity_date": 1510840180, "creation_date": 1510840180, "answer_id": 47331379, "question_id": 47330897, "link": "https://stackoverflow.com/questions/47330897/how-to-update-variable-in-io-access-variable-made-in-if-statement-in-haskell/47331379#47331379", "title": "How to update variable in IO/access variable made in if statement in haskell", "body": "<p>Don't try to do too much in main, if and else logic shouldn't exist there. Move all that stuff to a different function and keep main clean and easy.\nThe if and else logic I use here is valid because it is directly related to the flow of the appliation, rather than a domain choice (i.e. domain = should I update via this function or this function vs application = is this input I got valid for my program, should I terminate or not).</p>\n\n<p>Try this:</p>\n\n<pre><code>    main = do\n        putStrLn \"Enter command, c x y, d x y\"\n        s &lt;- getLine\n        if not $ validateInput s then\n             print \"Error, try again\"\n             main\n        else do\n            let object = newObject\n            updateObject object s\n            print object  \n\n\nupdateObject :: a -&gt; String -&gt; a\nupdateObject object s\n          | head s == 'c' = --do updates here\n          | head s == 's' = --do updates here\n</code></pre>\n\n<p>Also try to create a console loop so you can easier deal with \"Enter new Command\" situations. Move away from main as soon as you can.</p>\n"}, {"tags": [], "owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "is_accepted": false, "score": 1, "last_activity_date": 1510845796, "creation_date": 1510845796, "answer_id": 47333340, "question_id": 47330897, "link": "https://stackoverflow.com/questions/47330897/how-to-update-variable-in-io-access-variable-made-in-if-statement-in-haskell/47333340#47333340", "title": "How to update variable in IO/access variable made in if statement in haskell", "body": "<p>There are many ways to do that: functions like <code>Object -&gt; Object</code>, monad <code>State</code>, <code>IORef</code> and etc. The way depends on what do you want to do exactly.</p>\n\n<p>The most simplest way (for beginner) is to do that by the function, which generate updated version of your object.</p>\n\n<p>For example:</p>\n\n<pre><code>updateObject :: Command -&gt; Object -&gt; Maybe Object\nupdateObject command initialObject = case command of\n    'c':_ -&gt; Just $ ... -- update initialObject by the 'c' command\n    'd':_ -&gt; Just $ ... -- update initialObject by the 'd' command\n    _     -&gt; Nothing    -- invalid command\n\nmain = do\n    putStrLn \"Enter command, c x y, d x y\"\n    command &lt;- getLine\n    case updateObject command newObject of\n        Just updatedObject -&gt; print updatedObject\n        Nothing -&gt; do\n            print \"Error, try again\"\n            main\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5331575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SGm_bmDhEsE/AAAAAAAAAAI/AAAAAAAAADc/ZfKKEuvQWWo/photo.jpg?sz=128", "display_name": "Sebastian Paulsen", "link": "https://stackoverflow.com/users/5331575/sebastian-paulsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 47331379, "answer_count": 2, "score": 1, "last_activity_date": 1510845796, "creation_date": 1510838812, "question_id": 47330897, "link": "https://stackoverflow.com/questions/47330897/how-to-update-variable-in-io-access-variable-made-in-if-statement-in-haskell", "title": "How to update variable in IO/access variable made in if statement in haskell", "body": "<p>I have some code where I create an object at the beginning. Then I want to run various updates on the object depending on different commands. </p>\n\n<pre><code>main = do\n    putStrLn \"Enter command, c x y, d x y\"\n    s &lt;- getLine\n    let object = newObject\n    if head s == 'c' then\n        let object2 = updateObject object s in\n        print object\n    else if head s == 'd' then\n        let object2 = updateObject object s in\n        print object\n    else do\n        print \"Error, try again\"\n        main\n    putStrLn \"Enter new command\"\n    c &lt;- getLine\n    print $ updateObject object2 c\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Variable not in scope: object2 :: Object\n</code></pre>\n\n<p>How do I make the object \"global\" for the main function so that changes done to the object inside the if statements can be used later?</p>\n\n<p>How can I do this in a better way?</p>\n"}, {"tags": ["list", "haskell", "functional-programming", "maybe"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510835928, "post_id": 47329843, "comment_id": 81610360, "body": "Why do you write <code>(x:xs)</code> in <code>help (x:xs)</code>."}, {"owner": {"reputation": 2704, "user_id": 4978205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/286541fdef1e5aad84a9bffbe2279dea?s=128&d=identicon&r=PG&f=1", "display_name": "Glubus", "link": "https://stackoverflow.com/users/4978205/glubus"}, "edited": false, "score": 2, "creation_date": 1510836017, "post_id": 47329843, "comment_id": 81610439, "body": "What is going wrong? Does this compile? Can you give example output for example input?"}, {"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 2, "creation_date": 1510836193, "post_id": 47329843, "comment_id": 81610559, "body": "Are you sure your homework doesn&#39;t say &quot;<code>foldl</code> or <code>foldr</code>&quot;? <code>foldl</code> is fundamentally the wrong approach here. Using it naturally would reverse the list."}, {"owner": {"reputation": 43, "user_id": 8951381, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-PszXe-KggKE/AAAAAAAAAAI/AAAAAAAAABo/pdb4Hf1GyAM/photo.jpg?sz=128", "display_name": "Anonnnn", "link": "https://stackoverflow.com/users/8951381/anonnnn"}, "edited": false, "score": 0, "creation_date": 1510836475, "post_id": 47329843, "comment_id": 81610788, "body": "I wrote (x:xs) because this is my list where I collect all Just elements."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1510836780, "post_id": 47329843, "comment_id": 81610981, "body": "@Bice: but <code>(x:xs)</code> does not restrict items to be a list (that will the type signature already do). It restrict things to be lists with <i>at least one element</i>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1510838600, "post_id": 47329843, "comment_id": 81612241, "body": "@Bice You provide three arguments to <code>foldl</code>: <code>help</code>, <code>[]</code>, and <code>a</code>. The fact that <code>a</code> is explicitly declare to have type <code>[Maybe a]</code> means that <code>[] :: [a]</code> and <code>help :: [a] -&gt; a -&gt; [a]</code>. When you <i>define</i> <code>help</code>, you can&#39;t change that type; you can only write patterns (if needed) that <i>work</i> with that type."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1510836946, "post_id": 47330028, "comment_id": 81611107, "body": "You can go one step further and use <code>maybe</code> to define the helper: <code>foldr (maybe id (:)) []</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1510837162, "post_id": 47330028, "comment_id": 81611258, "body": "@chepner: thanks. Now we constructed <i>catamorphception</i> :)"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 3, "last_activity_date": 1510837145, "last_edit_date": 1510837145, "creation_date": 1510836370, "answer_id": 47330028, "question_id": 47329843, "link": "https://stackoverflow.com/questions/47329843/cut-out-nothing-with-foldl/47330028#47330028", "title": "Cut out Nothing with foldl", "body": "<p>By writing <code>help (x:xs) Nothing = (x:xs)</code> you have used a pattern <code>(x:xs)</code> this means that you expect the accumulator to be a list with <em>at least</em> one element. But that is not always the case, for instance the initial accumulator <code>[]</code> is the empty list.</p>\n\n<p>We can simply use a variable <code>l</code>, instead of a pattern:</p>\n\n<pre><code>cut :: [Maybe a] -&gt; [a]\ncut a = foldl help [] a\n               where help <b>l</b> Nothing = <b>l</b>\n                     help <b>l</b> <b>(</b>Just a<b>)</b> = a:<b>l</b></code></pre>\n\n<p>Note that you also need to add brackets for a constructor with arguments.</p>\n\n<p>But this will not solve the entire pattern, now you will have <em>reversed</em> the list. This is because <code>foldl</code> iterates through the list left-to-right, so you prepend values while you iterate through the list. We can use <code>foldr</code> instead. But now the type of the function does no longer works, since the <code>help</code> function in <code>foldr</code> takes the accumulator as second argument. So we can flip the arguments:</p>\n\n<pre><code>cut :: [Maybe a] -&gt; [a]\ncut a = fold<b>r</b> help [] a\n               where help <b>Nothing l</b> = <b>l</b>\n                     help <b>(Just a) l</b> = a:<b>l</b></code></pre>\n\n<p>And now it works. We can however clean up the code a bit. For instance use an <em>eta</em>-reduction on the <code>cut</code> function: we can remove <code>a</code> in the head and body of the function:</p>\n\n<pre><code>cut :: [Maybe a] -&gt; [a]\ncut = foldr help []\n               where help Nothing l = l\n                     help (Just a) l = a:l</code></pre>\n\n<p>and since the second argument in <code>help</code> can be removed and the body converted into functions:</p>\n\n<pre><code>cut :: [Maybe a] -&gt; [a]\ncut = foldr help []\n               where help Nothing = <b>id</b>\n                     help (Just a) = <b>(a:)</b></code></pre>\n\n<p>We can also use another catamorphism: <code>foldr</code> is the catamorphism of a list, and <code>maybe</code> is the catamorphism of <code>Maybe</code>, so we can write a:</p>\n\n<pre><code>maybe &lt;value-in-case-of-nothing&gt; &lt;function-just-value&gt; &lt;Maybe value&gt;\n</code></pre>\n\n<p>So we can rewrite our <code>help</code> to:</p>\n\n<pre><code><b>import Data.Maybe(maybe)</b>\n\ncut :: [Maybe a] -&gt; [a]\ncut = foldr help []\n               where help = <b>maybe id (:)</b></code></pre>\n\n<p>or simply inject it as an argument of <code>foldr</code>:</p>\n\n<pre><code>import Data.Maybe(maybe)\n\ncut :: [Maybe a] -&gt; [a]\ncut = foldr <b>(maybe id (:))</b> []</code></pre>\n\n<p>So now we used a <em>catamporhism</em> inside a <em>catamorphism</em>, so <em>catamorphception</em>.</p>\n"}], "owner": {"reputation": 43, "user_id": 8951381, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-PszXe-KggKE/AAAAAAAAAAI/AAAAAAAAABo/pdb4Hf1GyAM/photo.jpg?sz=128", "display_name": "Anonnnn", "link": "https://stackoverflow.com/users/8951381/anonnnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1510845702, "creation_date": 1510835896, "last_edit_date": 1510845702, "question_id": 47329843, "link": "https://stackoverflow.com/questions/47329843/cut-out-nothing-with-foldl", "title": "Cut out Nothing with foldl", "body": "<p>I have a list [Maybe a] where I want to cut out the Nothing elements with a function that uses foldl\nFor example cut [Just 2, Just 10, Nothing, Just 5] -> [2,10,5]</p>\n\n<pre><code>I wrote:\ncut :: [Maybe a] -&gt; [a]\ncut a = foldl (help) [] a\n               where help (x:xs) Nothing = (x:xs)\n                     help (x:xs) Just a = a:(x:xs)\n</code></pre>\n\n<p>Where is my mistake?</p>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1510835223, "post_id": 47329560, "comment_id": 81609905, "body": "May I suggest you check out <a href=\"http://blog.ezyang.com/2016/05/announcing-cabal-new-build-nix-style-local-builds/\" rel=\"nofollow noreferrer\">Cabal&#39;s Nix-style build mode</a>."}, {"owner": {"reputation": 3075, "user_id": 1164871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d6a54a3752ab47170d790085935988f?s=128&d=identicon&r=PG", "display_name": "mgsloan", "link": "https://stackoverflow.com/users/1164871/mgsloan"}, "edited": false, "score": 1, "creation_date": 1510859788, "post_id": 47329560, "comment_id": 81626881, "body": "Of course, cabal&#39;s &quot;nix style&quot; builds won&#39;t do better than stack here if things do need to rebuild.  In fact, the only case I know where it can do better is when you need to have lots of packages deviate from their snapshot versions, via &quot;extra-deps&quot;.  This issue tracks resolving this <a href=\"https://github.com/commercialhaskell/stack/issues/3330\" rel=\"nofollow noreferrer\">github.com/commercialhaskell/stack/issues/3330</a> - we know how to solve the problem.  I am hoping to do it before next release, but it is tricky and has gotten deferred a few times before.  This issue also seems relevant -  <a href=\"https://github.com/commercialhaskell/stack/issues/1875\" rel=\"nofollow noreferrer\">github.com/commercialhaskell/stack/issues/1875</a> . Feel free to open issues"}, {"owner": {"reputation": 3075, "user_id": 1164871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d6a54a3752ab47170d790085935988f?s=128&d=identicon&r=PG", "display_name": "mgsloan", "link": "https://stackoverflow.com/users/1164871/mgsloan"}, "edited": false, "score": 1, "creation_date": 1510859798, "post_id": 47329560, "comment_id": 81626887, "body": "I&#39;m biased, but you&#39;re probably better off sticking with stack, &quot;new-build&quot; is still experimental and cabal-install does not really have a good UI track record IMHO."}], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "is_accepted": false, "score": 0, "last_activity_date": 1522235564, "creation_date": 1522235564, "answer_id": 49532999, "question_id": 47329560, "link": "https://stackoverflow.com/questions/47329560/is-it-possible-to-tell-stack-to-abort-a-build-if-it-would-require-unregistering/49532999#49532999", "title": "Is it possible to tell Stack to abort a build if it would require unregistering local packages?", "body": "<p>I'm continuing to be inconvenienced by this, but I've found an alleviating workaround.</p>\n\n<p>I've started to store de-duplicated and compressed backups of my <code>.stack-work</code> folders like this:</p>\n\n<pre><code>$ function foo () {local ourpath=\"$(readlink -f \"$1\")\"; tar cf - \"$1\" | zbackup --non-encrypted backup ~/.zbackups/backups/bkp-$(date -u +%FT%TZ | sed 's/:/-/g')-$(echo \"$ourpath\" | sed 's%/%_%ig') }; foo \"./.stack-work\"\n</code></pre>\n\n<p>And restore them upon need like this: </p>\n\n<pre><code>$ zbackup --non-encrypted restore ~/.zbackups/backups/bkp-2018-03-24T15-19-59Z-_home_wizek_path_to_.stack-work | tar xf - -C .\n</code></pre>\n\n<p>Using <a href=\"https://github.com/zbackup/zbackup\" rel=\"nofollow noreferrer\">https://github.com/zbackup/zbackup</a></p>\n\n<p>I'm pleasantly surprised by the time and space efficiency of this approach, as for even a single <code>.stack-work</code> folder that weighs 1-3GB, the initial <code>~/.zbackups/</code> folder only grows to 100-200MB. And all subsequent snapshots only seem to increase this by 0-10-50MB, depending on the amount of new unique data, I presume.</p>\n\n<p>Disclaimer: This is not yet perfect because this still depends on some kind of foresight or manual diligence on my part: e.g. doing backups before builds where I think unregistering might occur, and/or doing backups after successful builds that changed the dependencies. Doing both is not an issue though at all, because deduplication ensures 0MB space usage increase. At least in some cases it can combat some cursing that used to happen when I started to see \"unregistering, unregistering, unregistering\".</p>\n"}], "owner": {"reputation": 4538, "user_id": 499478, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/791526e67831fbd70e3d179a6c585b44?s=128&d=identicon&r=PG", "display_name": "Wizek", "link": "https://stackoverflow.com/users/499478/wizek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1522235564, "creation_date": 1510834879, "question_id": 47329560, "link": "https://stackoverflow.com/questions/47329560/is-it-possible-to-tell-stack-to-abort-a-build-if-it-would-require-unregistering", "title": "Is it possible to tell Stack to abort a build if it would require unregistering local packages?", "body": "<p>For the last hour I've been waiting for 79 packages to recompile after stack decided to unregister them for one reason or another. It's almost done, so I could consider myself lucky since in the past I had to wait as much as 2-5 hours when such an accident happened. But still, I'd like to avoid similar accidents no matter if they cost 5 hours of my day or \"only\" 1 hour.</p>\n\n<p>Is there a <code>stack build --safe</code> command that would only proceed if there are no irreversible, destructive changes that it would plan to do on my system? E.g. internally it could do a <code>stack build --dry-run</code> and would proceed only if that plan doesn't mention \"would unregister\" items.</p>\n\n<p>Or better yet, could I make the above <code>--safe</code> behavior the default per project or even system-wide (e.g. via <code>.yaml</code>)? Which I could then perhaps override with <code>--force</code> or <code>--no-safe</code>.</p>\n\n<p>If no such flags are available, (I've read through <code>stack build --help</code> (v1.5.1) and didn't see anything similar) would it make sense to add some such flags to stack?</p>\n\n<p>In the meantime maybe I could work around this by aliasing <code>stack build</code> and <code>stack ghci</code> in my shell to something like <code>(stack build --dry run | grep \"would unregister\" | wc -l | exit-1-if-non-zero) &amp;&amp; stack build</code>. Which might work well, except it would likely take more time to run (+1..10 seconds for each build) than if stack did this internally. And if you have other ideas for workarounds I'm curious to hear them as well.</p>\n"}]