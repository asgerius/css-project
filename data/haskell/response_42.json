[{"tags": ["haskell"], "comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 8, "creation_date": 1446061948, "post_id": 33400238, "comment_id": 54592050, "body": "Several of your classmates are struggling with this assignment too. You should probably talk to your instructor."}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 2, "creation_date": 1446062248, "post_id": 33400238, "comment_id": 54592212, "body": "and just as some others you have a strange indentation problem ... is this exercise online?"}, {"owner": {"reputation": 97, "user_id": 4233203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab5232d20dd6b536e238b104ea6d66fa?s=128&d=identicon&r=PG&f=1", "display_name": "symon", "link": "https://stackoverflow.com/users/4233203/symon"}, "edited": false, "score": 0, "creation_date": 1446062573, "post_id": 33400238, "comment_id": 54592404, "body": "yes it&#39;s hard when you don&#39;t know how and frustrating at the same time, I will ask but doubt I will get help as it&#39;s a hard 1. No it&#39;s not online."}, {"owner": {"reputation": 97, "user_id": 4233203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab5232d20dd6b536e238b104ea6d66fa?s=128&d=identicon&r=PG&f=1", "display_name": "symon", "link": "https://stackoverflow.com/users/4233203/symon"}, "edited": false, "score": 0, "creation_date": 1446062922, "post_id": 33400238, "comment_id": 54592598, "body": "i have been trying to get this to do the same thing too as a different approach but still not joy: <code>promptLine :: String -&gt; IO String promptLine prompt = do     putStr prompt     getLine \t  \tmain :: IO () main = do     line &lt;- text = (bar m) ++ &quot;\\n&quot; ++ textshown ++ &quot;\\n&quot; ++ (bar m)                  let line2 = &quot;\\&quot;&quot; ++ line ++ &quot;\\&quot;&quot; in do                       putStrLn (line2)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": true, "score": 1, "last_activity_date": 1446108157, "creation_date": 1446108157, "answer_id": 33409485, "question_id": 33400238, "link": "https://stackoverflow.com/questions/33400238/how-to-pass-a-string-around-a-list-of-strings-in-haskell/33409485#33409485", "title": "how to pass a string around a list of strings in haskell", "body": "<p>I believe the type of your <code>frame</code> should be <code>frame :: String -&gt; IO ()</code> \u2014\u00a0it takes a string a puts a \"framed\" version of it to <code>stdout</code>. Then you don't need <code>map putStrLn</code> and can just use <code>putStrLn</code>.</p>\n\n<p>Now, consider this line:</p>\n\n<pre><code>putStrLn (bar m) ++ \"\\n\" ++ textshown ++ \"\\n\" ++ (bar m)\n</code></pre>\n\n<p>you are calling <code>putStrLn (bar m)</code> and then trying to append some stuff to the result of that (hint: use parentheses or <code>$</code>).</p>\n"}], "owner": {"reputation": 97, "user_id": 4233203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab5232d20dd6b536e238b104ea6d66fa?s=128&d=identicon&r=PG&f=1", "display_name": "symon", "link": "https://stackoverflow.com/users/4233203/symon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 33409485, "answer_count": 1, "score": 0, "last_activity_date": 1446261238, "creation_date": 1446061477, "last_edit_date": 1446261238, "question_id": 33400238, "link": "https://stackoverflow.com/questions/33400238/how-to-pass-a-string-around-a-list-of-strings-in-haskell", "title": "how to pass a string around a list of strings in haskell", "body": "<p>How would I get this piece of code to accept a list of strings and output a frame around the outside. I understand the concept but just cannot execute the code in the final frame function.</p>\n\n<pre><code>minusdots :: Int -&gt; String\nminusdots 1    = \"-.\"\nminusdots n\n   | n &gt; 1     = \"-.\" ++ (minusdots (n-1))\n   | otherwise = error \"please enter greater than 1\"\n\n\nbar :: Int -&gt; String\nbar n\n    | even n    = minusdots (div n 2)\n    | otherwise = (minusdots (div n 2)) ++ ['-']\n\n\n frame :: [String] -&gt; IO String\n frame text = map putStrLn (bar m) ++ \"\\n\" ++ textshown ++ \"\\n\" ++ (bar m)\n    where\n    textshown = \"- \" ++ text ++ \" -\"\n    m         = length textshown\n</code></pre>\n\n<p>I have worked on this all day and come up with this but there's still some bugs I need to work out 1. When I pass the border string into the frameM function, If I was to pass say \"S S\" is there any way I could make the S'S frame on top of each other,istead of side by side so the more letters i put into the first argument the bigger the total perimeter of the frame gets? heres what I've done: </p>\n\n<pre><code>minusdots ::  Int -&gt; String -&gt; String\nminusdots 1  a =  a\nminusdots  n a\n   | n &gt; 1     =  a ++ (minusdots (n-1) a)\n   | otherwise = error \"argument not addmissible\"\n\n\nbar :: String -&gt; Int -&gt; String\nbar s n\n   | even n    = minusdots (div n 2) s \n   | otherwise = (minusdots (div n 2) s) ++ s\n\n\nframeM :: String -&gt; String -&gt; String\nframeM a text = (bar a m) ++ \"\\n\" ++ textshown ++ \"\\n\" ++ (bar a m)  \n    where\n    textshown = b ++ text ++ b\n    m         = length textshown\n    b         = a\n</code></pre>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1446060843, "post_id": 33399781, "comment_id": 54591470, "body": "Your Racket code doesn&#39;t make sense. Have you tested it?"}, {"owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 1, "creation_date": 1446061895, "post_id": 33399781, "comment_id": 54592020, "body": "To me, it looks like your Haskell code and your Racket code are doing two very different things - the Racket code partitions the input list depending on whether the <i>value</i> is odd or even, whereas the Haskell code partitions the input list depending on whether the <i>index</i> of the value is odd or even (errors in the code notwithstanding). Which of the two are you actually trying to achieve?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 0, "creation_date": 1446063840, "post_id": 33399781, "comment_id": 54593074, "body": "@FrankSchmitt, the Racket code doesn&#39;t actually seem to do that. In fact, I&#39;m pretty sure it will throw an error too."}, {"owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1446063940, "post_id": 33399781, "comment_id": 54593124, "body": "@dfeuer That&#39;s why I wrote &#39;errors in the code notwithstanding&#39; - to me, it looks like the code is <i>supposed</i> to do what I described (I may be mistaken, of course)."}, {"owner": {"reputation": 91, "user_id": 5496686, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10208069251712085/picture?type=large", "display_name": "Luis Fernando Pineda", "link": "https://stackoverflow.com/users/5496686/luis-fernando-pineda"}, "edited": false, "score": 0, "creation_date": 1446064479, "post_id": 33399781, "comment_id": 54593413, "body": "I&#39;m sorry I posted the wrong code. I just fixed (define (myeven? x)   (= (modulo x 2) 0))    (define (myodd? x)   (= (modulo x 2) 1))  (define (segregate xs)   (foldr (lambda (x b)            (if (myeven? x)                (list (cons x (first b)) (second b))                (list (first b) (cons x (second b))))) &#39;(()()) xs))"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5496686, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10208069251712085/picture?type=large", "display_name": "Luis Fernando Pineda", "link": "https://stackoverflow.com/users/5496686/luis-fernando-pineda"}, "edited": false, "score": 0, "creation_date": 1446061942, "post_id": 33399978, "comment_id": 54592045, "body": "thanks for the reply. I have some problems while compiling the code. It gave a compile error as follows:  Couldn&#39;t match expected type \u2018Bool\u2019                 with actual type \u2018Integer -&gt; Bool\u2019     Probable cause: \u2018myodd\u2019 is applied to too few arguments     In the expression: myodd     In a stmt of a list comprehension: myodd"}], "tags": [], "owner": {"reputation": 15549, "user_id": 1876739, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QOK17.jpg?s=128&g=1", "display_name": "Ram&#243;n J Romero y Vigil", "link": "https://stackoverflow.com/users/1876739/ram%c3%b3n-j-romero-y-vigil"}, "is_accepted": true, "score": 0, "last_activity_date": 1446062006, "last_edit_date": 1446062006, "creation_date": 1446060685, "answer_id": 33399978, "question_id": 33399781, "link": "https://stackoverflow.com/questions/33399781/haskell-creating-my-own-filtering-function/33399978#33399978", "title": "Haskell creating my own filtering function", "body": "<p>A simple way is to run through the list twice using each of your hand-rolled functions as a guard predicate:</p>\n\n<pre><code>segregate :: [Integer] -&gt; ([Integer], [Integer])\nsegregate [] = ([],[])\nsegregate xs = (evens, odds)\n  where evens = [x | x &lt;- xs, myeven x]\n        odds  = [x | x &lt;- xs, myodd x]\n</code></pre>\n\n<p>Note: your question asked for a list of lists but your pattern matching <code>segregate [] = ([],[])</code> indicated you wanted a tuple so I gave a tuple solution.</p>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 1, "last_activity_date": 1446061372, "creation_date": 1446061372, "answer_id": 33400211, "question_id": 33399781, "link": "https://stackoverflow.com/questions/33399781/haskell-creating-my-own-filtering-function/33400211#33400211", "title": "Haskell creating my own filtering function", "body": "<p>Here's one good way:</p>\n\n<pre><code>segregate [] = ?\nsegregate (x:xs)\n  | myEven x = ?\n  | otherwise = ?\n  where (restEvens, restOdds) = segregate xs\n</code></pre>\n\n<p>You could also use</p>\n\n<pre><code>segregate = foldr go ([], []) where\n  go x ~(evens, odds)\n    | myEven x = ?\n    | otherwise = ?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34889, "user_id": 86604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/329af917389e6cf8e146c03012f5319a?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/86604/ingo"}, "is_accepted": false, "score": 0, "last_activity_date": 1446163782, "creation_date": 1446163782, "answer_id": 33426867, "question_id": 33399781, "link": "https://stackoverflow.com/questions/33399781/haskell-creating-my-own-filtering-function/33426867#33426867", "title": "Haskell creating my own filtering function", "body": "<p>If you really need such a function rather than writing it for educational purposes, there is <code>partition</code> in <code>Data.List</code>, so a simple</p>\n\n<pre><code>import Data.List(partition) \n</code></pre>\n\n<p>wil get you going.</p>\n\n<p>In the educational case, you can still compare your code, once you're done, with the code of <code>partition</code>.</p>\n"}], "owner": {"reputation": 91, "user_id": 5496686, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10208069251712085/picture?type=large", "display_name": "Luis Fernando Pineda", "link": "https://stackoverflow.com/users/5496686/luis-fernando-pineda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 33399978, "answer_count": 3, "score": 0, "last_activity_date": 1446163782, "creation_date": 1446060054, "last_edit_date": 1446064526, "question_id": 33399781, "link": "https://stackoverflow.com/questions/33399781/haskell-creating-my-own-filtering-function", "title": "Haskell creating my own filtering function", "body": "<p>I'm a new to haskell, I'm trying to create a function that will take a list on integers and returns a list containing two sublists, the first sublist containing the even number and the other containing the odd numbers. I cannot use even, odd or filter functions. i created my own functions as follows </p>\n\n<pre><code>myodd :: Integer -&gt; Bool\nmyodd n = rem (abs(n)) 2 == 1\n\nmyeven :: Integer -&gt; Bool\nmyeven n = rem (abs(n)) 2 == 0\n\nsegregate [] = ([], [])\nsegregate [x] = ([x], [])\nsegregate (x:y:xs) = (x:xp, y:yp) where (xp, yp) = segregate xs\n</code></pre>\n\n<p>im having trouble trying to use the two first functions and use it on the segregated functions. I have more experience in racket and the function I crated looks like this:</p>\n\n<pre><code>    (define (myeven? x)\n  (= (modulo x 2) 0)) \n\n(define (myodd? x)\n  (= (modulo x 2) 1))\n\n(define (segregate xs)\n  (foldr (lambda (x b)\n           (if (myeven? x)\n               (list (cons x (first b)) (second b))\n               (list (first b) (cons x (second b))))) '(()()) xs))\n</code></pre>\n"}, {"tags": ["linux", "haskell", "arm", "cross-compiling", "hsc2hs"], "comments": [{"owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "edited": false, "score": 1, "creation_date": 1446059321, "post_id": 33399445, "comment_id": 54590549, "body": "These are good questions. But, in order to <i>use</i> your cross-compiled cabal-install, you need a GHC that runs on ARM, right? If you have that, might it not be easier to do the bootstrap entirely on ARM using that compiler, rather than your cross-compiler? I can&#39;t imagine it would take too long."}, {"owner": {"reputation": 31, "user_id": 5427880, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WomDvg6RGfQ/AAAAAAAAAAI/AAAAAAAAAxc/PGf9ArHYwcM/photo.jpg?sz=128", "display_name": "rdst15", "link": "https://stackoverflow.com/users/5427880/rdst15"}, "reply_to_user": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "edited": false, "score": 0, "creation_date": 1446059793, "post_id": 33399445, "comment_id": 54590839, "body": "I tried that but my ARM system actually hangs during &#39;make&#39; which is another strange observation. I guess that is because my RAM is small &lt; 1GB?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1446059969, "post_id": 33399445, "comment_id": 54590934, "body": "If you&#39;re trying to use GHC 7.10 on ARM, you probably want the current <code>master</code> branch. A show-stopper GHCi bug was fixed after 7.10.2 and 7.10.3 isn&#39;t out yet. I don&#39;t know anything else about it though."}, {"owner": {"reputation": 31, "user_id": 5427880, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WomDvg6RGfQ/AAAAAAAAAAI/AAAAAAAAAxc/PGf9ArHYwcM/photo.jpg?sz=128", "display_name": "rdst15", "link": "https://stackoverflow.com/users/5427880/rdst15"}, "edited": false, "score": 0, "creation_date": 1446060451, "post_id": 33399445, "comment_id": 54591203, "body": "Actaully I only want 7.8.3 because the software I eventually want to build for ARM is only supported and tested with this version."}], "owner": {"reputation": 31, "user_id": 5427880, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WomDvg6RGfQ/AAAAAAAAAAI/AAAAAAAAAxc/PGf9ArHYwcM/photo.jpg?sz=128", "display_name": "rdst15", "link": "https://stackoverflow.com/users/5427880/rdst15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1446117981, "creation_date": 1446058854, "last_edit_date": 1495541674, "question_id": 33399445, "link": "https://stackoverflow.com/questions/33399445/cabal-cross-compile-for-arm-issue-with-hsc2hs", "title": "cabal cross-compile for ARM issue with hsc2hs", "body": "<p>I am trying to cross-compile <code>cabal-install</code> for ARM. It has come down to installing the prerequisite packages one-by-one. I was able to configure, build and install some of the packages by following this page:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/25765893/how-do-i-install-dependencies-when-cross-compiling-haskell-code\">How do I install dependencies when cross compiling haskell code?</a></p>\n\n<p>Until I got to the <code>network</code> package where I got this error after <code>./Setup build</code>:</p>\n\n<pre><code>Setup: The program hsc2hs is required but it could not be found\n</code></pre>\n\n<p>After this I added the</p>\n\n<pre><code>--with-hsc2hs=arm-unknown-linux-gnueabihf-hsc2hs\n</code></pre>\n\n<p>switch to my configure, but this time I ran into</p>\n\n<pre><code>/opt/ghc-cross-7.8.3/bin/arm-unknown-linux-gnueabihf-hsc2hs: line 29: /opt/ghc-cross-7.8.3/lib/arm-unknown-linux-gnueabihf-ghc-7.8.3/bin/hsc2hs: cannot execute binary file: Exec format error\n</code></pre>\n\n<p>Apparently my <code>arm-unknown-linux-gnueabihf-hsc2hs</code> tool is not running on my host. Why is this happening? And why, for instance, <code>arm-unknown-linux-gnueabihf-ghc</code> is working but not <code>hsc2hs</code>? And lastly, is there workaround for installing my original <code>network</code> package?</p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "edited": false, "score": 1, "creation_date": 1446052932, "post_id": 33397246, "comment_id": 54586461, "body": "In this case all you need to do is translate <code>(define (FOO) BAR)</code> into <code>FOO = BAR</code>."}, {"owner": {"reputation": 34889, "user_id": 86604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/329af917389e6cf8e146c03012f5319a?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/86604/ingo"}, "edited": false, "score": 0, "creation_date": 1446164061, "post_id": 33397246, "comment_id": 54642706, "body": "Haskell has special support for this task. You define your function by just saying <code>foo = (.)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "is_accepted": true, "score": 5, "last_activity_date": 1446053971, "last_edit_date": 1446053971, "creation_date": 1446052384, "answer_id": 33397378, "question_id": 33397246, "link": "https://stackoverflow.com/questions/33397246/haskell-high-order-functions-passing-two-functions-as-arguments/33397378#33397378", "title": "Haskell High order functions. passing two functions as arguments.", "body": "<p>the direct translation would be:</p>\n\n<pre><code>apply3 :: Num a =&gt; (a -&gt; b) -&gt; (b -&gt; c) -&gt; c\napply3 f g = g (f 3)\n</code></pre>\n\n<p>remember: you don't want to just compose functions - you want to first apply <code>3</code> and then apply the result to the other function</p>\n\n<hr>\n\n<p>sorry for the mixing ... this should work now:</p>\n\n<pre><code>\u03bb&gt; let f = (+1)\n\u03bb&gt; let g = (*2)\n\u03bb&gt; apply3 f g\n8\n\u03bb&gt; apply3 g f\n7\n</code></pre>\n\n<hr>\n\n<p>in case you wondered - you don't have to actually start with the signature (although it's good practice to add it) - if you do this in ghci:</p>\n\n<pre><code>\u03bb&gt; let apply3 f g = g (f 3)\n\u03bb&gt; :t apply3\napply3 :: Num a =&gt; (a -&gt; t1) -&gt; (t1 -&gt; t) -&gt; t\n</code></pre>\n\n<p>it will give it do you (or you can use ghc-mod or whatever) - I actually just renamed the type-parameters (those <code>t</code> are ugly)</p>\n\n<p>This way it should look very similar to what you did in Scheme</p>\n\n<p>of course you might want to make sure not to swap functions while renaming :|</p>\n"}], "owner": {"reputation": 91, "user_id": 5496686, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10208069251712085/picture?type=large", "display_name": "Luis Fernando Pineda", "link": "https://stackoverflow.com/users/5496686/luis-fernando-pineda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 33397378, "answer_count": 1, "score": 2, "last_activity_date": 1446053971, "creation_date": 1446051992, "question_id": 33397246, "link": "https://stackoverflow.com/questions/33397246/haskell-high-order-functions-passing-two-functions-as-arguments", "title": "Haskell High order functions. passing two functions as arguments.", "body": "<p>I have recently been teaching myself Haskell, and one of my exercises was to implement a function that takes two functions as arguments and passes number 3 to the first function and the result to the second function. I have more experience with racket. The function that i created for racket is </p>\n\n<pre><code>(define (nestfun3 function function2)\n  (function2 (function 3)))\n</code></pre>\n\n<p>I'm trying to replicate this function in racket. \ni know that high order functions with only one function as argument can be like</p>\n\n<pre><code>twice function = function . function\n</code></pre>\n\n<p>How can I pass two functions? I tried </p>\n\n<pre><code>twice function = function . function\nthree function = function . twice \n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 1, "creation_date": 1446045688, "post_id": 33394756, "comment_id": 54581225, "body": "Side note: every time you say &quot;I can&#39;t do that&quot;, you should state a reason here."}, {"owner": {"reputation": 149, "user_id": 5498865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iCmWc.png?s=128&g=1", "display_name": "Fossa", "link": "https://stackoverflow.com/users/5498865/fossa"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1446048705, "post_id": 33394756, "comment_id": 54583496, "body": "You are right, sorry. I&#39;ve just corrected it."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 5498865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iCmWc.png?s=128&g=1", "display_name": "Fossa", "link": "https://stackoverflow.com/users/5498865/fossa"}, "edited": false, "score": 0, "creation_date": 1446048639, "post_id": 33394882, "comment_id": 54583447, "body": "Thank you man! I thought in that case the compiler could infer the type &#39;inside&#39; my data."}, {"owner": {"reputation": 64094, "user_id": 476408, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2bc1bffafe7aa29ef900b98d1fd1e94e?s=128&d=identicon&r=PG", "display_name": "J. Abrahamson", "link": "https://stackoverflow.com/users/476408/j-abrahamson"}, "edited": false, "score": 0, "creation_date": 1446210674, "post_id": 33394882, "comment_id": 54661553, "body": "It technically could, but intentionally doesn&#39;t. <code>data</code> implies that the User will manually specify al behavior."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1446218762, "post_id": 33394882, "comment_id": 54666887, "body": "And to add to that, I&#39;m pretty sure you can <code>derive Foldable</code> on that."}], "tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": true, "score": 9, "last_activity_date": 1446045448, "creation_date": 1446045448, "answer_id": 33394882, "question_id": 33394756, "link": "https://stackoverflow.com/questions/33394756/haskell-function-length-doesnt-work-with-custom-data-type/33394882#33394882", "title": "Haskell - Function &#39;length&#39; doesn&#39;t work with custom data type", "body": "<blockquote>\n  <p>Why is it working if I use type instead of data?</p>\n</blockquote>\n\n<p>Because <code>type</code> is a weak alias. In code, it is equivalent to the type on RHS.</p>\n\n<p><code>data</code> (and <code>newtype</code>, perhaps even more so), on the other hand, creates a \"strong\" alias, which means you need to unpack it first:</p>\n\n<pre><code>numberOfEmployees :: Restaurant -&gt; Int\nnumberOfEmployees (Restaurant rest) = length rest\n</code></pre>\n\n<p>This is especially important if you want to restrict the operations on your data. If your inner module doesn't export the constructor, the user can only use your smart constructors and other operators, and is <em>unable</em> to access or modify the wrapped data directly (effectively making it opaque).</p>\n"}, {"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1446045920, "post_id": 33394979, "comment_id": 54581393, "body": "That isn&#39;t its type any more, and if it were, the error message would be different."}, {"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 2, "creation_date": 1446046095, "post_id": 33394979, "comment_id": 54581530, "body": "<code>length</code> now has type <code>Foldable f =&gt; f a -&gt; Int</code>."}, {"owner": {"reputation": 34889, "user_id": 86604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/329af917389e6cf8e146c03012f5319a?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/86604/ingo"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1446165648, "post_id": 33394979, "comment_id": 54643134, "body": "@dfeuer Nevertheless, the proposition &quot;length has the type [a] -&gt; Int&quot; remains true. To verify, compile <code>myLength :: [a] -&gt; Int; myLength = length</code>"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 34889, "user_id": 86604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/329af917389e6cf8e146c03012f5319a?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/86604/ingo"}, "edited": false, "score": 0, "creation_date": 1446174019, "post_id": 33394979, "comment_id": 54644672, "body": "@Ingo, that&#39;s true. However, a critical part of learning Haskell is getting the hang of interpreting type errors. The type error the OP gets makes no sense under the assumption that <code>length :: [a] -&gt; Int</code>."}, {"owner": {"reputation": 34889, "user_id": 86604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/329af917389e6cf8e146c03012f5319a?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/86604/ingo"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1446196615, "post_id": 33394979, "comment_id": 54652942, "body": "@dfeuer ... I guess this was one reason for opposing the FTP proposal for some."}], "tags": [], "owner": {"reputation": 58, "user_id": 923090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3c73f9503acc4ff766c9b26c5d8555?s=128&d=identicon&r=PG", "display_name": "Raghu Kaippully", "link": "https://stackoverflow.com/users/923090/raghu-kaippully"}, "is_accepted": false, "score": 1, "last_activity_date": 1446045682, "creation_date": 1446045682, "answer_id": 33394979, "question_id": 33394756, "link": "https://stackoverflow.com/questions/33394756/haskell-function-length-doesnt-work-with-custom-data-type/33394979#33394979", "title": "Haskell - Function &#39;length&#39; doesn&#39;t work with custom data type", "body": "<p>The function <code>length</code> has type <code>[a] -&gt; Int</code>. That is it expects a list as an argument. But you are trying to pass a <code>Restaurant</code> to it.</p>\n\n<p>You should use pattern matching to get the list and pass that to <code>length</code> instead.</p>\n\n<pre><code>numberOfEmployees :: Restaurant -&gt; Int\nnumberOfEmployees (Restaurant a) = length a\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 1, "last_activity_date": 1446059436, "last_edit_date": 1446059436, "creation_date": 1446046196, "answer_id": 33395164, "question_id": 33394756, "link": "https://stackoverflow.com/questions/33394756/haskell-function-length-doesnt-work-with-custom-data-type/33395164#33395164", "title": "Haskell - Function &#39;length&#39; doesn&#39;t work with custom data type", "body": "<p>The type of <code>length</code> is</p>\n\n<pre><code>length :: Foldable t =&gt; t a -&gt; Int\n</code></pre>\n\n<p>But there are no types <code>t</code> and <code>a</code> such that the <code>Restaurant</code> type equals <code>t a</code>. As others have explained, you'll need to pull out the list and find the length of the list&mdash;a <code>Restaurant</code> can never have a <code>length</code>.</p>\n\n<h3>Nitpick</h3>\n\n<p>You could write</p>\n\n<pre><code>type Foo a = Restaurant\n</code></pre>\n\n<p>So that</p>\n\n<pre><code>Foo a ~ Restaurant\n</code></pre>\n\n<p>for each <code>a</code>. However, <code>Foo</code> will only be a type synonym/family and not a proper first-class type. Only bona fide types declared with <code>data</code> or <code>newtype</code>, the built-in <code>()</code>, list, and tuple types, the oddball <code>-&gt;</code>, and applications of these, really count.</p>\n"}], "owner": {"reputation": 149, "user_id": 5498865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iCmWc.png?s=128&g=1", "display_name": "Fossa", "link": "https://stackoverflow.com/users/5498865/fossa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 1, "accepted_answer_id": 33394882, "answer_count": 3, "score": 2, "last_activity_date": 1446059436, "creation_date": 1446045116, "last_edit_date": 1446048774, "question_id": 33394756, "link": "https://stackoverflow.com/questions/33394756/haskell-function-length-doesnt-work-with-custom-data-type", "title": "Haskell - Function &#39;length&#39; doesn&#39;t work with custom data type", "body": "<p>I'm new to Haskell and I need to define this data type:</p>\n\n<pre><code>data Restaurant = Restaurant [(String, String, Int)] deriving (Eq,Show)\n</code></pre>\n\n<p>that is a list of the employees of the restaurant: (name , address, wage) for each employee.</p>\n\n<p>Now, I'm trying to define this <strong>numberOfEmployees</strong> function:</p>\n\n<pre><code>numberOfEmployees :: Restaurant -&gt; Int\nnumberOfEmployees rest = length rest\n</code></pre>\n\n<p>But I get this compile error: \nCouldn't match expected type \u2018t2 a0\u2019 with actual type \u2018Restaurant'</p>\n\n<p>Why is it working if I use <strong>type</strong> instead of <strong>data</strong>? (I can't use the 'type' declaration in my code because it's part of an exercise about 'data')</p>\n\n<pre><code>type Restaurant = [(String, String, Int)]\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 0, "creation_date": 1446043661, "post_id": 33394173, "comment_id": 54579685, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4901902/is-there-a-step-through-debugger-for-haskell-on-windows\">Is there a step-through debugger for haskell on Windows?</a>"}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446043698, "post_id": 33394173, "comment_id": 54579710, "body": "it&#39;s probably not exactly what you are looking for but have you tried <a href=\"https://hackage.haskell.org/package/base-4.8.1.0/docs/Debug-Trace.html#v:trace\" rel=\"nofollow noreferrer\"><code>trace</code></a>?"}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "reply_to_user": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 0, "creation_date": 1446043756, "post_id": 33394173, "comment_id": 54579753, "body": "@Mephy I&#39;ll look into that"}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446043784, "post_id": 33394173, "comment_id": 54579770, "body": "@Carsten no, I have not. I&#39;ll give it a try"}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446043844, "post_id": 33394173, "comment_id": 54579807, "body": "it&#39;s like going back 20yrs but it actually helped me a few times ;)"}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446044313, "post_id": 33394173, "comment_id": 54580172, "body": "@Carsten how do I have to modify it to use trace ?"}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446044704, "post_id": 33394173, "comment_id": 54580463, "body": "for example you could do <code>(\\ next max_so_far -&gt; trace (&quot;called with &quot; ++ show next) $ ...rest of your code)</code> and you should get traces of each of the steps in a hopefully obvious manner"}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1446047616, "post_id": 33394173, "comment_id": 54582662, "body": "Yes it worked. Thank you"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1446053428, "post_id": 33394173, "comment_id": 54586830, "body": "your function isn&#39;t safe: it crashes on []. you could make it return a Maybe Integer instead."}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "reply_to_user": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1446053565, "post_id": 33394173, "comment_id": 54586932, "body": "@ErikAllik I just want to see how the foldr works in this case, but from the modified program I still don&#39;t get something that will tell me 100% how it works . I get for getMax [1,5,6,2,2] :` Comparing: 5 Comparing: 6 Comparing: 2 Comparing: 2 with: 1 with: 2 with: 2 with: 6 `"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1446060280, "post_id": 33394173, "comment_id": 54591118, "body": "The best educational step-by-step evaluator is <a href=\"http://chrisuehlinger.com/LambdaBubblePop/\" rel=\"nofollow noreferrer\">lambda bubble pop</a>. Too bad it supports only a limited subset of Haskell."}], "answers": [{"comments": [{"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1446047055, "post_id": 33395345, "comment_id": 54582213, "body": "I tried using trace, but I get <code>Not in scope: &#39;trace&#39; </code>. As for the second I haven&#39;t figured out how to use it."}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "reply_to_user": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1446047345, "post_id": 33395345, "comment_id": 54582455, "body": "As I said, <i>you need to import <code>Debug.Trace</code> first</i>."}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1446047604, "post_id": 33395345, "comment_id": 54582647, "body": "That worked. Thank you. Missed that. As for the second solution  how do I set those break points ?"}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "reply_to_user": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1446047673, "post_id": 33395345, "comment_id": 54582718, "body": "Near the top of the manual page I linked to, it seems to suggest that <code>:break</code> &lt;line number&gt; will do it."}, {"owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1446048056, "post_id": 33395345, "comment_id": 54583012, "body": "After modifying the if line to include trace and running the program, I get for <code>getMax [1,5,6,2,2]</code> :` Comparing: 5 Comparing: 6 Comparing: 2  Comparing: 2  with: 1  with: 2  with: 2  with: 6 ` ..."}, {"owner": {"reputation": 2183, "user_id": 52310, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8729b9952488497d0343e8bd86afe8cb?s=128&d=identicon&r=PG", "display_name": "Alex R", "link": "https://stackoverflow.com/users/52310/alex-r"}, "reply_to_user": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "edited": false, "score": 0, "creation_date": 1446048524, "post_id": 33395345, "comment_id": 54583354, "body": "@BogdanDaniel Depending on how you modified the <code>if</code> line, this is running into the dangers of interleaving side-effects and laziness. You need to make sure the line is printed before the comparison is done. How exactly did you write your modified program?"}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": false, "score": 1, "last_activity_date": 1446049315, "last_edit_date": 1446049315, "creation_date": 1446046664, "answer_id": 33395345, "question_id": 33394173, "link": "https://stackoverflow.com/questions/33394173/how-can-i-print-all-the-steps-that-this-code-is-going-through/33395345#33395345", "title": "How can I print all the steps that this code is going through?", "body": "<p>There are two main approaches here:</p>\n\n<p>First, you can use the <code>trace</code> function. (You need to import <code>Debug.Trace</code> first.) This takes a string to print and a value to return. It only prints the string when (if) the value gets \"used\" (Haskell is lazy, remember). This can result in stuff being printed in a really weird order sometimes. Obviously, this method requires actually changing your code to sprinkle it with <code>trace</code> calls.</p>\n\n<p>Second, you can use the GHCi debugger, as described in <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/ghci-debugger.html\" rel=\"nofollow\">the GHC User Manual</a>. Personally I've never had that much luck with it, but the option if there if you want to try it. And it doesn't require changing any code.</p>\n\n<p>Sadly, there is no button that just says \"print out what you're doing\". That would be extremely useful, and is a highly-requested feature, but never seems to get created... :-(</p>\n\n<p><strong>Edit</strong> I see that you're trying to do something like this:</p>\n\n<pre><code>if trace (show x) x &gt; trace (show y) y then ...\n</code></pre>\n\n<p>The trouble is, it is <em>undefined</em> which <code>trace</code> will get executed first. You probably want to do something more like</p>\n\n<pre><code>if trace (show x ++ \" &gt; \" ++ show y) (x &gt; y) then ...\n</code></pre>\n"}], "owner": {"reputation": 2229, "user_id": 4659576, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0e9de370ae3de65b3b65097b0f55e708?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan Daniel", "link": "https://stackoverflow.com/users/4659576/bogdan-daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1446049315, "creation_date": 1446043470, "last_edit_date": 1446048680, "question_id": 33394173, "link": "https://stackoverflow.com/questions/33394173/how-can-i-print-all-the-steps-that-this-code-is-going-through", "title": "How can I print all the steps that this code is going through?", "body": "<p>I have this code in haskell: </p>\n\n<pre><code>getMax :: [Integer] -&gt; Integer\n    getMax dlis = foldr (\\ next max_so_far -&gt;\n                        if (next &gt; max_so_far)\n                            then next \n                            else max_so_far)\n                        (head dlis) (tail dlis)\n\nlist = [1,2,3,4,5]\n</code></pre>\n\n<p>I run it in ghci like <code>getMax list</code>and returns 5. I sort of understand what is going on, but I would like to make it print every step that it is taking(the numbers being compared). How can I do that ?</p>\n\n<p>Modified program : </p>\n\n<pre><code>getMax :: [Integer] -&gt; Integer\n    getMax dlis = foldr (\\ next max_so_far -&gt;\n                        if (traceThis next &gt; traceThat max_so_far)\n                            then next\n                            else max_so_far)\n                        (head dlis) (tail dlis)\n\n    traceThis :: (Show a) =&gt; a -&gt; a\n    traceThis x = trace (\"Comparing: \" ++ show x) x\n\n    traceThat :: (Show a) =&gt; a -&gt; a\n    traceThat x = trace (\" with: \" ++ show x) x\n</code></pre>\n"}, {"tags": ["haskell", "existential-type", "type-families", "hlist"], "answers": [{"comments": [{"owner": {"reputation": 19084, "user_id": 1482749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff9982206dde8c2bbb151a7305c00f3?s=128&d=identicon&r=PG", "display_name": "kosmikus", "link": "https://stackoverflow.com/users/1482749/kosmikus"}, "edited": false, "score": 0, "creation_date": 1446045815, "post_id": 33393890, "comment_id": 54581323, "body": "In case you want a library that supports this kind of stuff:<code>generics-sop</code> provides <code>Prod</code> as <code>NP</code>, and <code>mapProd</code> as <code>hmap</code>. Also, <code>vinyl</code> provides <code>Prod</code> as <code>Rec</code>, and <code>mapProd</code> as <code>rmap</code>."}, {"owner": {"reputation": 869, "user_id": 2029548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f44dcf3e58fcd22cd857cd563402178?s=128&d=identicon&r=PG", "display_name": "obadz", "link": "https://stackoverflow.com/users/2029548/obadz"}, "reply_to_user": {"reputation": 19084, "user_id": 1482749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff9982206dde8c2bbb151a7305c00f3?s=128&d=identicon&r=PG", "display_name": "kosmikus", "link": "https://stackoverflow.com/users/1482749/kosmikus"}, "edited": false, "score": 0, "creation_date": 1446067158, "post_id": 33393890, "comment_id": 54594804, "body": "This looks great and although it will take me a while to wrap my head around it, it&#39;ll definitely get the checkmark.  @kosmikus - thanks for pointing out the libraries where I can find these things.  Is <code>(:-&gt;)</code> available in hackage as well?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "reply_to_user": {"reputation": 869, "user_id": 2029548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f44dcf3e58fcd22cd857cd563402178?s=128&d=identicon&r=PG", "display_name": "obadz", "link": "https://stackoverflow.com/users/2029548/obadz"}, "edited": false, "score": 0, "creation_date": 1446073326, "post_id": 33393890, "comment_id": 54597616, "body": "@obadz I don&#39;t know of any packages that contain it, and unfortunately I haven&#39;t been able to use any of the Haskell search engines to search for a type family by kind."}, {"owner": {"reputation": 19084, "user_id": 1482749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff9982206dde8c2bbb151a7305c00f3?s=128&d=identicon&r=PG", "display_name": "kosmikus", "link": "https://stackoverflow.com/users/1482749/kosmikus"}, "reply_to_user": {"reputation": 869, "user_id": 2029548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f44dcf3e58fcd22cd857cd563402178?s=128&d=identicon&r=PG", "display_name": "obadz", "link": "https://stackoverflow.com/users/2029548/obadz"}, "edited": false, "score": 0, "creation_date": 1446116789, "post_id": 33393890, "comment_id": 54614927, "body": "@obadz I think I&#39;ve implemented it a number of times under the name <code>Curry</code>, and I think I&#39;ve seen it on Hackage in various heterogeneous list libraries as well, but most of those don&#39;t use the heterogeneous lists with the embedded <code>f</code> parameter that <code>Prod</code>/<code>NP</code>/<code>Rec</code> has and that turns out to be <i>immensely</i> useful in practice ..."}], "tags": [], "owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "is_accepted": true, "score": 4, "last_activity_date": 1446042804, "creation_date": 1446042804, "answer_id": 33393890, "question_id": 33393035, "link": "https://stackoverflow.com/questions/33393035/evaluating-a-strongly-typed-computation-graph-with-arbitrary-number-of-dependenc/33393890#33393890", "title": "Evaluating a strongly typed computation graph with arbitrary number of dependencies per node", "body": "<p>Sure, with a bit of 'sorcery' this generalizes quite nicely:</p>\n\n<pre><code>{-# LANGUAGE PolyKinds, ExistentialQuantification, DataKinds, TypeOperators, TypeFamilies, GADTs #-} \n\nimport Data.Functor.Identity \n\ntype family (xs :: [*]) :-&gt; (r :: *) :: * where \n  '[] :-&gt; r = r \n  (x ': xs) :-&gt; r = x -&gt; (xs :-&gt; r) \n</code></pre>\n\n<p>This type family represents n-ary functions. The definition is quite obvious, I think.</p>\n\n<pre><code>infixr 5 :&gt;\ndata Prod (f :: k -&gt; *) (xs :: [k]) where \n  Nil :: Prod f '[] \n  (:&gt;) :: f x -&gt; Prod f xs -&gt; Prod f (x ': xs) \n</code></pre>\n\n<p>This datatype is a vector indexed a list of types. This is less obvious. You need to store a list of type variables in <code>Node</code> somehow - but each type variable must have <code>Node</code> applied to it. This formulation makes it simple:</p>\n\n<pre><code>data Node a \n  = forall vs . CalculationNode (vs :-&gt; a) (Prod Node vs)\n  | TerminalNode a  \n</code></pre>\n\n<p>Then a few helper functions:</p>\n\n<pre><code>appFn :: vs :-&gt; a -&gt; Prod Identity vs -&gt; a \nappFn z Nil = z \nappFn f (x :&gt; xs) = appFn (f $ runIdentity x) xs \n\nmapProd :: (forall x . f x -&gt; g x) -&gt; Prod f xs -&gt; Prod g xs \nmapProd _ Nil = Nil \nmapProd f (x :&gt; xs) = f x :&gt; mapProd f xs \n</code></pre>\n\n<p>and your <code>eval</code> function is almost as simple as before:</p>\n\n<pre><code>eval :: Node a -&gt; a \neval (TerminalNode a) = a \neval (CalculationNode fs as) = appFn fs $ mapProd (Identity . eval) as\n</code></pre>\n\n<p>The only thing that changes about your example is replacing tuples with <code>Prod</code> constructors:</p>\n\n<pre><code>seven = CalculationNode (\\s i -&gt; i + length s) (abcd :&gt; three :&gt; Nil)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 869, "user_id": 2029548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f44dcf3e58fcd22cd857cd563402178?s=128&d=identicon&r=PG", "display_name": "obadz", "link": "https://stackoverflow.com/users/2029548/obadz"}, "edited": false, "score": 0, "creation_date": 1446067075, "post_id": 33401553, "comment_id": 54594772, "body": "It&#39;s an interesting idea and very applicative functor-like but I&#39;d like to have these nodes mean something and not let them proliferate just because it&#39;s convenient to implement."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 0, "last_activity_date": 1446066518, "last_edit_date": 1446066518, "creation_date": 1446066194, "answer_id": 33401553, "question_id": 33393035, "link": "https://stackoverflow.com/questions/33393035/evaluating-a-strongly-typed-computation-graph-with-arbitrary-number-of-dependenc/33401553#33401553", "title": "Evaluating a strongly typed computation graph with arbitrary number of dependencies per node", "body": "<p>Take a hint from Haskell, and give everything just one dependency. Thus:</p>\n\n<pre><code>{-# LANGUAGE ExistentialQuantification #-}\n\nmodule Graph where\n\ndata Node a\n  = forall u. CalculationNode { f :: Node (u -&gt; a)\n                               , dependency :: Node u\n                               }\n  | TerminalNode { value :: a }\n\neval :: Node a -&gt; a\neval (CalculationNode f dep) = (eval f) (eval dep)\neval (TerminalNode a) = a\n\nthree :: Node Int\nthree = TerminalNode 3\n\nabcd :: Node String\nabcd = TerminalNode \"abcd\"\n\nseven :: Node Int\nseven = CalculationNode (CalculationNode (TerminalNode (\\s i -&gt; i + length s)) abcd) three\n</code></pre>\n\n<p>No sorcery needed! You might want to make a short infix version of <code>CalculationNode</code> to make some things more readable; e.g.</p>\n\n<pre><code>infixl 0 $$\n($$) = CalculationNode\n\nseven' = TerminalNode (\\s i -&gt; i + length s) $$ abcd $$ three\n</code></pre>\n"}], "owner": {"reputation": 869, "user_id": 2029548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f44dcf3e58fcd22cd857cd563402178?s=128&d=identicon&r=PG", "display_name": "obadz", "link": "https://stackoverflow.com/users/2029548/obadz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 1, "accepted_answer_id": 33393890, "answer_count": 2, "score": 3, "last_activity_date": 1446066518, "creation_date": 1446040701, "question_id": 33393035, "link": "https://stackoverflow.com/questions/33393035/evaluating-a-strongly-typed-computation-graph-with-arbitrary-number-of-dependenc", "title": "Evaluating a strongly typed computation graph with arbitrary number of dependencies per node", "body": "<p>I would like to evaluate a simple computation graph. I was able to write the code to do so for a computation graph where every non-terminal node has two dependencies (and this can be trivially extended to any fixed number of dependencies)</p>\n\n<pre><code>{-# LANGUAGE ExistentialQuantification #-}\n\nmodule Graph where\n\n-- Have:\ndata Node a =\n    forall u v . CalculationNode { f :: u -&gt; v -&gt; a\n                                 , dependencies :: (Node u, Node v) }\n  | TerminalNode { value :: a }\n\neval :: Node a -&gt; a\neval (CalculationNode f (d1, d2)) = f (eval d1) (eval d2)\neval (TerminalNode v) = v\n\nthree :: Node Int\nthree = TerminalNode 3\n\nabcd :: Node String\nabcd = TerminalNode \"abcd\"\n\nseven :: Node Int\nseven = CalculationNode (\\ s i -&gt; i + length s) (abcd, three)\n</code></pre>\n\n<p>The question is: how do I extend this code so that notes can take an arbitrary number of dependencies?</p>\n\n<p>Something like:</p>\n\n<pre><code>data Node a =\n    forall u_1 u_2 ... u_n . CalculationNode { f :: u_1 -&gt; u_2 -&gt; ... -&gt; u_n -&gt; a\n                                             , dependencies :: (Node u_1, Node u_2, ... , Node u_n) }\n  | TerminalNode { value :: a }\n\neval :: Node a -&gt; a\neval = ?\n</code></pre>\n\n<p>I suspect this requires some typefamily/hlist sorcery but I don't even know where to begin. Solutions and hints welcome.</p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1446038674, "post_id": 33392131, "comment_id": 54575867, "body": "First start with an accurate type signature. <code>nthelement</code> does not need <code>Eq a</code>, and it doesn&#39;t take an <code>a</code> next to the list. Example use would be <code>nthelement [&#39;a&#39;,&#39;c&#39;,&#39;b&#39;] 1 ~&gt; &#39;c&#39;</code>"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 2, "creation_date": 1446038866, "post_id": 33392131, "comment_id": 54576014, "body": "Try with pattern matching and standard structural recursion. Do not use <code>head</code> or <code>tail</code>."}, {"owner": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1446039055, "post_id": 33392131, "comment_id": 54576159, "body": "i&#39;ve mant to write Ord a. As i understand it: Ord a =&gt; means that arguments to this function must be of ordered type (Int&#39;s , Float&#39;s but not Strings?)   [a] -&gt; a -&gt; a  means that function will take one list argument , one (Int/Float) and will return Int/Float (Ord)   nthelement [1,2,3] 1   would return   2  Am i wrong here?"}, {"owner": {"reputation": 11978, "user_id": 774651, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d174682a9c2469488ac0cd91f0253215?s=128&d=identicon&r=PG&f=1", "display_name": "Lol4t0", "link": "https://stackoverflow.com/users/774651/lol4t0"}, "edited": false, "score": 0, "creation_date": 1446039175, "post_id": 33392131, "comment_id": 54576258, "body": "Actually it is <code>xs &lt;&lt;!!&gt;&gt; n = head . drop n $ xs</code>"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 2, "creation_date": 1446039205, "post_id": 33392131, "comment_id": 54576288, "body": "@EasternDude: No, <code>Ord a</code> means that <code>a</code>s are comparable - <code>&lt;</code>, <code>==</code>, <code>&gt;</code>. What you meant is a <code>Num</code> (arithmetic operations). What you actually need is an integral type, such as <code>Integer</code> or <code>Int</code>. And the basic problem you had that you&#39;ve specified the index to be of the same type as the list elements."}], "answers": [{"comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 2, "creation_date": 1446039006, "post_id": 33392345, "comment_id": 54576120, "body": "+1 for identifying the relevant base cases, and for not giving a complete solution                                                                                             :-)"}, {"owner": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446039945, "post_id": 33392345, "comment_id": 54576823, "body": "if i want my function to only work on lists of numbers ( i know this dosen&#39;t make much sense, its for learning purposes only) would i define function like this?: <code>nthelement :: Num a =&gt; [a] -&gt; Int -&gt; a</code>"}, {"owner": {"reputation": 874, "user_id": 3842022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d9729ff4035657e7d6366611c28614?s=128&d=identicon&r=PG&f=1", "display_name": "C. Quilley", "link": "https://stackoverflow.com/users/3842022/c-quilley"}, "reply_to_user": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446041641, "post_id": 33392345, "comment_id": 54578136, "body": "@EasternDude Yep, that would restrict the elements of the list to numeric types. You could make things even more generic with <code>nthelement :: (Num a, Integral i) =&gt; [a] -&gt; i -&gt; a</code>, which would allow any integer-like type to index the list."}, {"owner": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446041805, "post_id": 33392345, "comment_id": 54578249, "body": "I&#39;ve made a case for non-empty list:  <code>nthelement :: [a] -&gt; Int -&gt; a  nthelement (h:t) x = if (x==0) then h else (nthelement t x)</code>  and it works if  I choose 0th element e.g nthelement [1,2,3] 0  return &#39;1&#39; but if i try 1 or 2&#39;nd e.g. nthelement [1,2,3] 1 gives an error: Non-exhaustive patterns in function nthelement"}, {"owner": {"reputation": 874, "user_id": 3842022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d9729ff4035657e7d6366611c28614?s=128&d=identicon&r=PG&f=1", "display_name": "C. Quilley", "link": "https://stackoverflow.com/users/3842022/c-quilley"}, "reply_to_user": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446042019, "post_id": 33392345, "comment_id": 54578394, "body": "@EasternDude you can avoid the check on <code>x</code>, since you can also pattern match against numbers (as I&#39;ve done above). You should check if your function is correct: what is the result of <code>nthelement [1,2,3,4,5,6,7,8,9] 1</code>? (You should do this by explicitly writing out what the function returns!) Is it what you expect?"}, {"owner": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446042612, "post_id": 33392345, "comment_id": 54578863, "body": "Update! my current function:   <code>nthelement :: [a] -&gt; Int -&gt; a  nthelement (h:t) 0 = h  nthelement (h:t) x = nthelement t (x-1)</code>  and it works! yay! But still, i have no idea what to do in cases when list is empy"}, {"owner": {"reputation": 874, "user_id": 3842022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d9729ff4035657e7d6366611c28614?s=128&d=identicon&r=PG&f=1", "display_name": "C. Quilley", "link": "https://stackoverflow.com/users/3842022/c-quilley"}, "edited": false, "score": 0, "creation_date": 1446042782, "post_id": 33392345, "comment_id": 54578978, "body": "Matching pairs of <code>{-</code> and <code>-}</code> form multiline comments."}, {"owner": {"reputation": 874, "user_id": 3842022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d9729ff4035657e7d6366611c28614?s=128&d=identicon&r=PG&f=1", "display_name": "C. Quilley", "link": "https://stackoverflow.com/users/3842022/c-quilley"}, "edited": false, "score": 0, "creation_date": 1446042877, "post_id": 33392345, "comment_id": 54579044, "body": "As for the empty list case, you cannot necessarily produce an element of type <code>a</code>. There are two common solutions to this: one is simply to blow up (which is what <code>!!</code> does) and the other is to use an error-handling type, such as <code>Maybe</code>."}, {"owner": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446042950, "post_id": 33392345, "comment_id": 54579097, "body": "no, not in haskell, here in Stackoverflow...   i cant start new lines when commenting, so annoying. Help says: End a line with two spaces to add a &lt;br/&gt; linebreak. it dosnt work..."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446043239, "post_id": 33392345, "comment_id": 54579331, "body": "@EasternDude, it&#39;s almost never useful or wise to add a constraint that&#39;s not necessary. It <i>can</i> be useful in some cases to make something less polymorphic by fixing a specific type. So <code>nthChar :: [Char] -&gt; Int -&gt; Char</code> might be useful in some contexts, but <code>nthNum :: Num n =&gt; [n] -&gt; Int -&gt; n</code> is silly."}], "tags": [], "owner": {"reputation": 874, "user_id": 3842022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d9729ff4035657e7d6366611c28614?s=128&d=identicon&r=PG&f=1", "display_name": "C. Quilley", "link": "https://stackoverflow.com/users/3842022/c-quilley"}, "is_accepted": false, "score": 9, "last_activity_date": 1446038910, "creation_date": 1446038910, "answer_id": 33392345, "question_id": 33392131, "link": "https://stackoverflow.com/questions/33392131/how-do-i-use-recursive-function-in-haskell-to-find-nth-element-of-a-list-and-mo/33392345#33392345", "title": "How do i use recursive function in haskell to find nth element of a list? and more", "body": "<p>(As @Bergi correctly notes in the comments, you should check that your signature and the one of <code>!!</code> in the standard libraries coincide!)</p>\n\n<p>Instead of thinking of the <code>i</code> in <code>list !! i</code> as a <em>variable</em>, think of it as a function <em>parameter</em>. Then, consider the different cases of this parameter, and decide what your <code>!!</code> function should do in each case. Then, think about what options your list parameter <code>list</code> has, and how you should consider them:</p>\n\n<p>Expanding all the potential options for <code>i</code> and <code>list</code> gives us the following:</p>\n\n<pre><code>nthelement :: [a] -&gt; Integer -&gt; a\nnthelement [] 0 = -- ?\nnthelement [] i = -- ?\nnthelement (l:ls) 0 = -- ?\nnthelement (l:ls) n = -- ?\n</code></pre>\n\n<p>The remaining functions can be written by following a similar strategy.</p>\n"}, {"comments": [{"owner": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446123199, "post_id": 33412881, "comment_id": 54619178, "body": "Thanks, ive managed to do most of problems in my question.  However,  im struggling to write a simple fucntion to create an array, even in most simplistic form. To start with i want  to give a function argument n and get an array [1...n]. I tought it woul be piece of cake but this dosent work: makeArray :: Int -&gt; [a] makeArray n  = [1..n]  can someone explain me why it dosent work and how to fix it?"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "reply_to_user": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 1, "creation_date": 1446124494, "post_id": 33412881, "comment_id": 54620083, "body": "the type of your <code>makeArray</code> should be <code>Int -&gt; [Int]</code>. and these are called <i>lists</i> not arrays; arrays in Haskell are a separate notion."}, {"owner": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446128804, "post_id": 33412881, "comment_id": 54623495, "body": "alright, the what would be type definition for this function that finds right triangles whose sides are &lt;= 10 and perimeter == 24? rightTriangles = [ (a,b,c) | c &lt;- [1..10], b &lt;- [1..c], a &lt;- [1..b], a^2 + b^2 == c^2, a+b+c == 24]"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "reply_to_user": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446128922, "post_id": 33412881, "comment_id": 54623583, "body": "dude, that&#39;s a totally different question. but just do <code>:t rightTriangles</code> on GHCi and it&#39;ll tell you the type it has inferred. and it&#39;s not a function; it&#39;s just a constant list. the type could be either <code>[(Int, Int, Int)]</code> if you declare it to be that, but GHC will infer something more general, as typically."}, {"owner": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 0, "creation_date": 1446132004, "post_id": 33412881, "comment_id": 54625871, "body": "Thanks! yeah i know this is a different question and its not a function i just didn&#39;t want to ask a new question for something simple like this. I understand the basics of haskell now except for those nasty type declarations, they&#39;re hard to figure out for me sometimes :/ I noticed that haskell interprets the type by itself and all of the functions i tested so dar work even without type declaration. Is it generally o.k. to write functions without declaring a type? or is it considered to be a bad practice among advanced haskell programmers?"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "reply_to_user": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "edited": false, "score": 1, "creation_date": 1446133190, "post_id": 33412881, "comment_id": 54626771, "body": "top level functions should generally have an explicit type annotation, but it&#39;s up to you, of course. and again, just use GHCi to have Haskell generate the type signature for you, and then copy-paste that to your <code>.hs</code> file. you can also then adjust the signature to be, say, less polymorphic (generic) or not polymorphic at all (monomorphic). for example, if you set up your project using <code>stack</code>, just run <code>stack ghci</code>  and then type e.g. <code>:t rightTriangles</code>."}], "tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": true, "score": 1, "last_activity_date": 1446123951, "last_edit_date": 1446123951, "creation_date": 1446117786, "answer_id": 33412881, "question_id": 33392131, "link": "https://stackoverflow.com/questions/33392131/how-do-i-use-recursive-function-in-haskell-to-find-nth-element-of-a-list-and-mo/33412881#33412881", "title": "How do i use recursive function in haskell to find nth element of a list? and more", "body": "<p>I'm only providing a general answer here to one of the questions you raised. I'm hoping this will help you understand the general problem better and come up with solutions to your specific problems/tasks.</p>\n\n<blockquote>\n  <p>in imperative language i would make a counter variable (say i) and use system function tail to remove first element of list until i = n. But as I learned that in functional you can only do constants I can't think of a way to decide when to stop recurring and return the element rather then recuring tail function till the list is empty.</p>\n</blockquote>\n\n<p>you can always \"simulate\" a for loop with a state variable and breaking out of the loop using recursion:</p>\n\n<p>Python:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def foo(xs):\n    state = initial_state\n    for x in xs:\n        state = make_new_state(x, state)\n        if not condition(state, x):\n            break\n    return state\n</code></pre>\n\n<p>in the equivalent Haskell code, you would use an inner function with an extra argument for the state. You can also expose the extra argument on <code>foo</code> but normally you don't want to expose that to the callers of <code>foo</code>:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>foo xs = go initialState xs\n  where go []     state = state\n        go (x:xs) state = if not (condition state x)\n                          then state\n                          else go xs (makeNewState x state)\n</code></pre>\n\n<p>for many algorithms, breaking out of the loop is not needed at all, in which case the \"pattern\" becomes:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>foo xs = go initialState xs\n  where go []     state = state\n        go (x:xs) state = go xs (makeNewState x state)\n</code></pre>\n\n<p>where <code>makeNewState</code> is the logic you execute at each step (and it doesn't have to be in a separate function, of course).</p>\n\n<p>For the latter case, there are some generic functions <code>foldr</code> and <code>foldl</code> and <code>foldl'</code>, such that:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>foo xs = foldr makeNewState initialState xs\n</code></pre>\n\n<hr>\n\n<p><strong>Furthermore:</strong> there are also things like the <a href=\"https://wiki.haskell.org/State_Monad\" rel=\"nofollow\">State monad</a>, which let you write imperative logic in a pure manner, but it's best to understand things like \"raw\" recursion and folds first, and only then move on to things like monads and explicit state.</p>\n"}], "owner": {"reputation": 383, "user_id": 4847170, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dffff1120ce7fce426c128efc46bb125?s=128&d=identicon&r=PG&f=1", "display_name": "EasternDude", "link": "https://stackoverflow.com/users/4847170/easterndude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1626, "favorite_count": 0, "accepted_answer_id": 33412881, "answer_count": 2, "score": 2, "last_activity_date": 1446123951, "creation_date": 1446038328, "last_edit_date": 1446117219, "question_id": 33392131, "link": "https://stackoverflow.com/questions/33392131/how-do-i-use-recursive-function-in-haskell-to-find-nth-element-of-a-list-and-mo", "title": "How do i use recursive function in haskell to find nth element of a list? and more", "body": "<p>i've started studying functional programming in Haskell recently and was given some problems to solve, it asks to make your own versions of some system function for lists using recursion and basic system functions. the functions i need to write is:</p>\n\n<ul>\n<li><code>!!</code> (nth item in a list)</li>\n<li><code>append</code> (joining lists together)</li>\n<li><code>subst</code> (substitution) e.g. <code>subst 'x' 'y' ['q','x','r','x','s']</code> ~> <code>['q','y','r','x','y','s']</code></li>\n<li><code>intersection</code>  e.g. <code>intersection [2,5,7] [9,7,3,5]</code> ~> <code>[5,7]</code></li>\n<li><code>union</code>  union   e.g  <code>union [2,5,7] [9,7,3,5]</code> ~> <code>[2,5,7,9,3]</code></li>\n<li><code>reverse</code>  e.g. <code>reverse [4,5,6,7]</code> ~> <code>[7,6,5,4]</code></li>\n</ul>\n\n<p>I started with the first one and wrote a definition like this:</p>\n\n<pre><code>nthelement :: Eq a =&gt; [a] -&gt; a -&gt; a\n</code></pre>\n\n<p>in imperative language i would make a counter variable (say <code>i</code>) and use system function <code>tail</code> to remove first element of list until <code>i = n</code>. But as I learned that in functional you can only do constants I can't think of a way to decide when to stop recurring and return the element rather then recuring <code>tail</code> function till the list is empty.</p>\n\n<p>Please help me to figure this out. Any help on doing first function or any of them would be very nice. Thanks.</p>\n"}, {"tags": ["python", "haskell", "functional-programming", "combinators"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 4, "creation_date": 1446037544, "post_id": 33391837, "comment_id": 54575059, "body": "For those of us not familiar with Haskell, can you describe what that operation does, possibly with an example input/output?"}, {"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1446037820, "post_id": 33391837, "comment_id": 54575248, "body": "@CoryKramer, <code>.</code> allows function partial application, <code>map</code> and <code>filter</code> recieve (like in Python) a function and a list so <code>map(function).filter(function2, list)</code> means that <code>map</code> applies <code>function</code> to each element that returns <code>filter</code> after applying <code>function2</code> to elements of <code>list</code>. That&#39;s cause haskell is lazy by default"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 4, "creation_date": 1446037896, "post_id": 33391837, "comment_id": 54575299, "body": "In Haskell <code>.</code> is function composition, roughly <code>f . g</code> standing roughly for Python <code>lambda x: f(g(x))</code>. Instead <code>$</code> is application <code>f $ x</code> is simply <code>f(x)</code>, but allows one to avoid parentheses e.g. <code>f $ x+y+z</code> meaning <code>f(x+y+z)</code>."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1446037977, "post_id": 33391837, "comment_id": 54575365, "body": "Still, even if there were a way to trick Python in simulating these syntactic elements of Haskell, I&#39;m not sure it would be a good idea to use them. I&#39;d try to use idiomatic Haskell code in Haskell and idiomatic Python code in Python."}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 4, "creation_date": 1446038305, "post_id": 33391837, "comment_id": 54575599, "body": "That <code>do</code> over there is redundant."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 6, "creation_date": 1446038094, "post_id": 33391891, "comment_id": 54575445, "body": "You can also remove the <code>if</code> guard by adjusting the range: <code>range(2, 21, 2)</code>."}, {"owner": {"reputation": 97, "user_id": 5498356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e9b0d425ad2173e1fc12d41922a0e44?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Hauck", "link": "https://stackoverflow.com/users/5498356/daniel-hauck"}, "edited": false, "score": 1, "creation_date": 1446038127, "post_id": 33391891, "comment_id": 54575475, "body": "I know that I can write this particular one as a simple expression in Python, but is there any way to do this in general (when having more complicated problems)?"}, {"owner": {"reputation": 51584, "user_id": 839246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9b0573c2b936b12828dd1e4cc04206dc?s=128&d=identicon&r=PG&f=1", "display_name": "bheklilr", "link": "https://stackoverflow.com/users/839246/bheklilr"}, "reply_to_user": {"reputation": 97, "user_id": 5498356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e9b0d425ad2173e1fc12d41922a0e44?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Hauck", "link": "https://stackoverflow.com/users/5498356/daniel-hauck"}, "edited": false, "score": 0, "creation_date": 1446039809, "post_id": 33391891, "comment_id": 54576717, "body": "@Danielhauck There are a number of libraries out there that use pretty nasty hacks to emulate haskell&#39;s style but all of them are more of fun side projects than production ready libraries.  You just aren&#39;t going to get Haskell&#39;s terseness in general (although you could have written it as a list comprehension in Haskell as <code>[i**2 | i &lt;- [2,4..20]]</code>, pretty similar to python).  In general I can recommend using generator expressions rather than function composition if working with iterators, but function composition and partial application is severely lacking in Python compared to Haskell."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 8, "last_activity_date": 1446037643, "creation_date": 1446037643, "answer_id": 33391891, "question_id": 33391837, "link": "https://stackoverflow.com/questions/33391837/python-haskell-like/33391891#33391891", "title": "Python: Haskell-like . / $", "body": "<p><em>(I'm not familiar with Haskell, but if I understand your code snippet correctly...)</em></p>\n\n<p>You can use a list comprehension to perform the filtering and exponentiation.</p>\n\n<pre><code>[i**2 for i in range(1,21) if i%2 == 0]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "reply_to_user": {"reputation": 97, "user_id": 5498356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e9b0d425ad2173e1fc12d41922a0e44?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Hauck", "link": "https://stackoverflow.com/users/5498356/daniel-hauck"}, "edited": false, "score": 0, "creation_date": 1446106266, "post_id": 33392068, "comment_id": 54608392, "body": "Yes, just showing for the people that might want to see this method. Plus I assume this is more pythonic :)"}], "tags": [], "owner": {"reputation": 3298, "user_id": 3394884, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LqQhR.png?s=128&g=1", "display_name": "kuskmen", "link": "https://stackoverflow.com/users/3394884/kuskmen"}, "is_accepted": false, "score": 0, "last_activity_date": 1446038161, "creation_date": 1446038161, "answer_id": 33392068, "question_id": 33391837, "link": "https://stackoverflow.com/questions/33391837/python-haskell-like/33392068#33392068", "title": "Python: Haskell-like . / $", "body": "<p>Since map function returns list which is iterable and filter also you can nest them -</p>\n\n<pre><code>map(function1, (filter(function2,list)))\n</code></pre>\n\n<p>For more information I would recommend you read the <a href=\"https://docs.python.org/2/library/functions.html#map\" rel=\"nofollow\">map function documentation</a> also <a href=\"https://docs.python.org/2/library/functions.html#filter\" rel=\"nofollow\">filter function documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "is_accepted": false, "score": 1, "last_activity_date": 1446040211, "last_edit_date": 1446040211, "creation_date": 1446038339, "answer_id": 33392140, "question_id": 33391837, "link": "https://stackoverflow.com/questions/33391837/python-haskell-like/33392140#33392140", "title": "Python: Haskell-like . / $", "body": "<p>For this case you should better use a list comprehension like @CoryKramer said.</p>\n\n<p>To apply partial application in Python you should use <code>functools.partial</code>, would be something like this</p>\n\n<pre><code>from functools import partial\ndef compose(func1, *func2):\n    return func1 if not func2 else lambda x: func1(compose(*func2)(x))\n\nmyMap = partial(map, lambda x: x**2)\nmyFilter = partial(filter, lambda x: x%2 == 0)\n\nmyFunction = compose(myMap, myFilter)\n\nmyFunction(range(20))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": true, "score": 4, "last_activity_date": 1446040693, "last_edit_date": 1446040693, "creation_date": 1446038597, "answer_id": 33392224, "question_id": 33391837, "link": "https://stackoverflow.com/questions/33391837/python-haskell-like/33392224#33392224", "title": "Python: Haskell-like . / $", "body": "\n\n<p>I would just <strong>use whatever idiomatic Python tools are available</strong>, such as list comprehensions, as others have pointed out, instead of trying to pretend you're writing Haskell, but if you really <em>must</em>, you could use <code>compose</code> combinator function even in Python:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># this is essentially just foldr (or right `reduce`) specialised on `compose2`\ndef compose(*args):\n    ret = identity\n    for f in reversed(args):\n        ret = compose2(f, ret)\n    return ret\n\ndef identity(x):    return x\ndef compose2(f, g): return lambda x: f(g(x))\n</code></pre>\n\n<p>which you could use like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from functools import partial\n\n# equiv. of:  map (\\x -&gt; x^2) . filter (\\x -&gt; (mod x 2) == 0) $ [1..20]\ncompose(partial(map, lambda x: x**2), partial(filter, lambda x: x % 2 == 0))(range(1, 21))\n</code></pre>\n\n<p>which admittedly does work:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; compose(partial(map, lambda x: x**2), partial(filter, lambda x: x % 2 == 0))(range(1, 21))\n[4, 16, 36, 64, 100, 144, 196, 256, 324, 400]\n</code></pre>\n\n<p>...<em>but</em> as you can see, Python lacks certain concepts such as currying and arbitrarily definable infix operators, so even though semantically, the above snippet of code is equivalent (even identical) to the Haskell snippet, it reads quite hellish.</p>\n\n<hr>\n\n<p><strong>As to the <code>$</code> operator:</strong> it has little relevance in Python \u2014 its primary purpose in Haskell is related to operator precedence, which is a non-issue in Python because you can't really use operators most of the time anyway, and all of the built-in operators have predefined precedence.</p>\n\n<p>And whereas <code>$</code> can additionally be used as a higher order function in Haskell:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>zipWith ($) [(3*), (4+), (5-)] [1,2,3]\n</code></pre>\n\n<p>...replicating this in Python with its (deprecated) <code>apply</code> \"combinator\" will, again, lead to code that is just ugly:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; list(starmap(apply, zip([lambda x: 3 * x, lambda x: 4 + x, lambda x: 5 - x], map(lambda x: [x], [1, 2, 3]))))\n[3, 6, 2]\n</code></pre>\n\n<p>\u2014 again, several fundamental limitations of Python are at play here:</p>\n\n<ul>\n<li>laziness isn't built-in and thus not handled automatically, so without \"forcing\" the starmap using <code>list()</code>, you don't get a \"normal\" list back;</li>\n<li>apply is not <code>(a -&gt; b) -&gt; a -&gt; b</code> but <code>(a1 -&gt; a2 -&gt; ... -&gt; aN -&gt; b) -&gt; (a1, a2, ..., aN) -&gt; b</code>, so you need to wrap the list elements with <code>[]</code> and use <code>starmap</code> not the normal <code>map</code>; this is also a result of the lack of currying;</li>\n<li>lambda syntax is verbose because Guido's personal preference is against lambdas, <code>map</code>, <code>reduce</code>, and so on;</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1446041840, "post_id": 33392895, "comment_id": 54578274, "body": "I like this one better in Haskell: <code>for_ [2,4..20] (print . (^2))</code>. Or, pointy style, <code>for_ [2,4..20] $ \\x -&gt; print (x^2)</code>. This emphasizes that the list is being used as a <code>Traversable</code> and not really as a <code>Monad</code>."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 2, "last_activity_date": 1460313075, "last_edit_date": 1460313075, "creation_date": 1446040318, "answer_id": 33392895, "question_id": 33391837, "link": "https://stackoverflow.com/questions/33391837/python-haskell-like/33392895#33392895", "title": "Python: Haskell-like . / $", "body": "<p>Ironically (since list comprehensions are something that Python borrowed from languages like Haskell), I'd probably write the code similarly in both languages:</p>\n\n<pre><code># Python\nfor xsquared in [x**2 for x in range(1, 21) if x % 2 == 0]:\n    print(xsquared)\n# legal, but not idiomatic; you don't construct a list just\n# to throw it away.\n# map(print, [x**2 for x in range(1, 21) if x % 2 == 0])\n</code></pre>\n\n<p>and</p>\n\n<pre><code>-- Haskell\nmain = (mapM_ print) [ x^2 | x &lt;- [1..20], x `mod` 2 == 0 ]\n</code></pre>\n\n<p>or more briefly in each:</p>\n\n<pre><code># Python\nfor xsquared in [x**2 for x in range(2, 21, 2)]:\n    print(xsquared)\n\n-- Haskell\nmain = (mapM_ print) [x^2 | x &lt;- [2,4..20]]\n</code></pre>\n\n<hr>\n\n<p>Functions in Python are more difficult to compose than in Haskell. A Haskell function takes one argument and returns one value. It's easy for the compiler to check that <code>f . g</code> makes sense given the defined type signatures for <code>f</code> and <code>g</code>. Python, however, has no such type signatures (even in 3.5, the type hinting is optional and only used during static analysis, not during runtime).</p>\n\n<p>Further, Python functions can take an arbitrary number of arguments (no currying), and tuples are variable length, not fixed length. Suppose <code>g</code> returns a tuple. Should <code>f \u2218 g</code> (my personal choice for a composition operator should such a thing ever be adopted, and Unicode operators be permitted) be equivalent to <code>f(g(...))</code> or <code>f(*g(...))</code>? Both make sense, and point to the \"need\" for two different types of composition. What if <code>g</code>'s return value has too many or too few values for <code>f</code>? What about keyword arguments to <code>f</code>? Should they be taken from a dictionary returned by <code>g</code>? What seems like a simple operation becomes quite complex to define in Python.</p>\n\n<hr>\n\n<p>One other thing I may be completely wrong about. I get the impression that whereas each function in Python is compiled as a distinct piece of code, Haskell can compile optimized code for each composition, so that <code>f . g</code> isn't just naively converted to <code>\\x -&gt; f (g x)</code>. At least in Python, for</p>\n\n<pre><code>def f(x):\n    return x + 5\n\ndef g(x):\n    return 3 * x\n</code></pre>\n\n<p>this is what the compiler could generate for <code>f\u2218g</code></p>\n\n<pre><code>def fg(x):\n    return f(g(x))\n</code></pre>\n\n<p>which would be far less efficient than the equivalent of what I understand the Haskell compiler could generate:</p>\n\n<pre><code>def fg(x):\n    return 3*x + 5\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5498356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e9b0d425ad2173e1fc12d41922a0e44?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Hauck", "link": "https://stackoverflow.com/users/5498356/daniel-hauck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 2, "accepted_answer_id": 33392224, "answer_count": 5, "score": 5, "last_activity_date": 1460313075, "creation_date": 1446037492, "last_edit_date": 1446053504, "question_id": 33391837, "link": "https://stackoverflow.com/questions/33391837/python-haskell-like", "title": "Python: Haskell-like . / $", "body": "<p>In Haskell I would write:</p>\n\n<pre><code>main = do mapM_ print . map (\\x -&gt; x^2) . filter (\\x -&gt; (mod x 2) == 0) $ [1..20]\n</code></pre>\n\n<p>in Python I would have to use either many brackets or useless variables ... is there anything like <code>.</code> and <code>$</code> in Python?</p>\n"}, {"tags": ["haskell", "shake-build-system"], "comments": [{"owner": {"reputation": 8563, "user_id": 160673, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/7BSPT.jpg?s=128&g=1", "display_name": "Neil Mitchell", "link": "https://stackoverflow.com/users/160673/neil-mitchell"}, "edited": false, "score": 1, "creation_date": 1446047449, "post_id": 33389889, "comment_id": 54582522, "body": "Note that making <code>want</code> take a list of patterns has been requested, see <a href=\"https://github.com/ndmitchell/shake/issues/144\" rel=\"nofollow noreferrer\">github.com/ndmitchell/shake/issues/144</a>. However, I don&#39;t think it&#39;s a good idea, because as you discovered in your answer, often you want to <code>want</code> a transformation over a pattern, not the results of the pattern itself."}, {"owner": {"reputation": 319, "user_id": 2485944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a2124f2a8b6ac971ed9dd513d347034?s=128&d=identicon&r=PG", "display_name": "Henk", "link": "https://stackoverflow.com/users/2485944/henk"}, "reply_to_user": {"reputation": 8563, "user_id": 160673, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/7BSPT.jpg?s=128&g=1", "display_name": "Neil Mitchell", "link": "https://stackoverflow.com/users/160673/neil-mitchell"}, "edited": false, "score": 0, "creation_date": 1446057986, "post_id": 33389889, "comment_id": 54589731, "body": "@NeilMitchell, maybe these kind of transformations are a nice example for in the manual/tutorial. I often need these kind of transformations. It could serve as an example of a complex <code>want</code>."}, {"owner": {"reputation": 8563, "user_id": 160673, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/7BSPT.jpg?s=128&g=1", "display_name": "Neil Mitchell", "link": "https://stackoverflow.com/users/160673/neil-mitchell"}, "edited": false, "score": 0, "creation_date": 1446061855, "post_id": 33389889, "comment_id": 54591992, "body": "Yep, I think there need to be a better set of documentation on the website - unfortunately I&#39;m uniquely unqualified to know what that documentation should be, since it&#39;s rarely helpful to me :)"}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1446037689, "post_id": 33391682, "comment_id": 54575160, "body": "I guess the <code>return</code> is not needed in <code>return $ want paths</code>."}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1446037952, "post_id": 33391682, "comment_id": 54575349, "body": "oops, yes, didn&#39;t realize <code>want</code> was monadic."}, {"owner": {"reputation": 319, "user_id": 2485944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a2124f2a8b6ac971ed9dd513d347034?s=128&d=identicon&r=PG", "display_name": "Henk", "link": "https://stackoverflow.com/users/2485944/henk"}, "edited": false, "score": 0, "creation_date": 1446040638, "post_id": 33391682, "comment_id": 54577321, "body": "Erik, your remark about <code>Action</code> being a monad has proven to be very helpful. The problems is that action already resides within the <code>Rules</code> monad - not the other way around. Sorry, for not being specific enough. Still your help has been invaluable!"}, {"owner": {"reputation": 8563, "user_id": 160673, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/7BSPT.jpg?s=128&g=1", "display_name": "Neil Mitchell", "link": "https://stackoverflow.com/users/160673/neil-mitchell"}, "edited": false, "score": 1, "creation_date": 1446047361, "post_id": 33391682, "comment_id": 54582466, "body": "This won&#39;t work because <code>getDirectoryFiles</code> is in the <code>Action</code> monad, and <code>want</code> lives in the <code>Rules</code> monad. If you make the <code>want</code> a <code>need</code> then they are in the same monad, and can be combined. If you want to lift an <code>Action</code> to a <code>Rules</code> you can use <code>action</code>."}], "tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": false, "score": 2, "last_activity_date": 1446069463, "last_edit_date": 1446069463, "creation_date": 1446036995, "answer_id": 33391682, "question_id": 33389889, "link": "https://stackoverflow.com/questions/33389889/using-filepattern-wildcards-in-the-shake-functions-want-and-need/33391682#33391682", "title": "Using `FilePattern`/wildcards in the Shake functions `want` and `need`", "body": "<p><code>Action</code>, which is what <a href=\"http://hackage.haskell.org/package/shake-0.15.5/docs/Development-Shake.html#v:getDirectoryFiles\" rel=\"nofollow\"><code>getDirectoryFiles</code></a> returns, seems to be a <code>Monad</code>, so you could use <code>do</code>-notation:</p>\n\n<pre><code>do\n  paths &lt;- getDirectoryFiles \"\" [\"_build//*checkers.sh\"]\n  want paths\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>getDirectoryFiles \"\" [\"_build//*checkers.sh\"] &gt;&gt;= want\n</code></pre>\n\n<p>or</p>\n\n<pre><code>want =&lt;&lt; getDirectoryFiles \"\" [\"_build//*checkers.sh\"]    \n</code></pre>\n\n<p><strong>EDIT:</strong> as per Neil Mitchell's remarks, <code>want</code> needs to be replaced with <code>need</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 8563, "user_id": 160673, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/7BSPT.jpg?s=128&g=1", "display_name": "Neil Mitchell", "link": "https://stackoverflow.com/users/160673/neil-mitchell"}, "edited": false, "score": 1, "creation_date": 1446047191, "post_id": 33392997, "comment_id": 54582324, "body": "In general <code>want</code> is defined as <code>action . need</code>, so here you split up the <code>want</code> and shove in a <code>getDirectoryFiles</code>. This is the recommended way (although I think I&#39;d use a list comprehension - but an irrelevant detail)."}], "tags": [], "owner": {"reputation": 319, "user_id": 2485944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a2124f2a8b6ac971ed9dd513d347034?s=128&d=identicon&r=PG", "display_name": "Henk", "link": "https://stackoverflow.com/users/2485944/henk"}, "is_accepted": true, "score": 1, "last_activity_date": 1446040598, "creation_date": 1446040598, "answer_id": 33392997, "question_id": 33389889, "link": "https://stackoverflow.com/questions/33389889/using-filepattern-wildcards-in-the-shake-functions-want-and-need/33392997#33392997", "title": "Using `FilePattern`/wildcards in the Shake functions `want` and `need`", "body": "<p>Erik's remark about <code>Action</code> being a monad has proven to be very helpful. The problems is that action already resides within the <code>Rules</code> monad - not the other way around (Sorry Eric, for not being specific enough). The following code is on what I eventually settled.</p>\n\n<pre><code>import Development.Shake\nimport Development.Shake.Command\nimport Development.Shake.FilePath\nimport Development.Shake.Util\n\nmain :: IO ()\nmain = shakeArgs shakeOptions{shakeFiles=\"_build\"} (do\n  action $ do dependencies &lt;- getDirectoryFiles \"\" [\"*checker.py\"]\n              let scripts = map (\\file -&gt; \"_build\" &lt;/&gt; file -&lt;.&gt; \"sh\") dependencies\n              need scripts)\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 2485944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a2124f2a8b6ac971ed9dd513d347034?s=128&d=identicon&r=PG", "display_name": "Henk", "link": "https://stackoverflow.com/users/2485944/henk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 1, "accepted_answer_id": 33392997, "answer_count": 2, "score": 2, "last_activity_date": 1446069463, "creation_date": 1446031828, "question_id": 33389889, "link": "https://stackoverflow.com/questions/33389889/using-filepattern-wildcards-in-the-shake-functions-want-and-need", "title": "Using `FilePattern`/wildcards in the Shake functions `want` and `need`", "body": "<p>The functions <code>want</code> and <code>need</code> both require that their input is of type <code>FilePath</code> rather than <code>FilePattern</code>. The filenames of my outputs and inputs follow a distinct pattern, outputs are <code>_build/*checker.sh</code> and the inputs are of <code>./*.py</code>. Therefore I would rather do a <code>want</code> of the form:</p>\n\n<pre><code>want ['_build/*checkers.sh']\n</code></pre>\n\n<p>than</p>\n\n<pre><code>want ['_build/dbchecker.sh', '_build/henk_checker.sh', ..., '_build/derp_checker.sh']\n</code></pre>\n\n<p>I tried building a more complex <code>want</code> by combining <code>getDirectoryFiles, action, need</code> but that doesn't work since <code>getDirectoryFiles</code> returns <code>Action [FilePath]</code> rather than <code>FilePath</code>.</p>\n\n<p>What would be the proper solution to this problem?</p>\n"}, {"tags": ["haskell", "haskell-lens"], "comments": [{"owner": {"reputation": 1746, "user_id": 1083697, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/38016b5caf736ce69755c8abcf2d2cdf?s=128&d=identicon&r=PG", "display_name": "andrybak", "link": "https://stackoverflow.com/users/1083697/andrybak"}, "edited": false, "score": 0, "creation_date": 1446026479, "post_id": 33387707, "comment_id": 54568034, "body": "Here&#39;s link to amazonka: <a href=\"https://github.com/brendanhay/amazonka/\" rel=\"nofollow noreferrer\">github.com/brendanhay/amazonka</a> .  Also, submitting the type-error might be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 5755, "user_id": 394253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/985ef765f821b00d3b41ac5ca8aef6a0?s=128&d=identicon&r=PG", "display_name": "Ed&#39;ka", "link": "https://stackoverflow.com/users/394253/edka"}, "is_accepted": true, "score": 1, "last_activity_date": 1601346124, "last_edit_date": 1601346124, "creation_date": 1446076325, "answer_id": 33403599, "question_id": 33387707, "link": "https://stackoverflow.com/questions/33387707/amazonka-catch-exceptions-that-meet-certain-criteria/33403599#33403599", "title": "amazonka: catch exceptions that meet certain criteria", "body": "<p>You need to use <a href=\"https://hackage.haskell.org/package/lens-4.13/docs/Control-Exception-Lens.html#g:1\" rel=\"nofollow noreferrer\">one of lens' exception handling function</a> along with <a href=\"https://github.com/brendanhay/amazonka/blob/020bc7bde47bb235e448c76088dc44d6cec13e9b/amazonka-dynamodb/gen/Network/AWS/DynamoDB/Types.hs#L19-L38\" rel=\"nofollow noreferrer\">lens exception</a> predefined in <code>amazonka</code>.\nSomething along the lines of:</p>\n<pre><code>handling _ConditionalCheckFailedException ({- your handling code goes here -}) $\n  do send $ updateItem &quot;TableName&quot; &amp; uiKey ...blah blah\n</code></pre>\n<p><a href=\"https://github.com/ambiata/amazonka/blob/develop/amazonka/src/Control/Monad/Trans/AWS.hs#L492-L505\" rel=\"nofollow noreferrer\">Also amazonka docs</a></p>\n"}], "owner": {"reputation": 538, "user_id": 500511, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/99duf.png?s=128&g=1", "display_name": "helpwithhaskell", "link": "https://stackoverflow.com/users/500511/helpwithhaskell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 2, "accepted_answer_id": 33403599, "answer_count": 1, "score": 2, "last_activity_date": 1601346124, "creation_date": 1446025657, "last_edit_date": 1446027349, "question_id": 33387707, "link": "https://stackoverflow.com/questions/33387707/amazonka-catch-exceptions-that-meet-certain-criteria", "title": "amazonka: catch exceptions that meet certain criteria", "body": "<p>I am using the excellent <code>amazonka</code> library.</p>\n\n<p>I have one function where I need to make an <code>updateItem</code> to a <code>DynamoDB</code> table. The update includes a condition expression.</p>\n\n<p>If the update succeeds then my function returns <code>True</code> (in the application monad). If the update throws a <code>ServiceError</code> with <code>ErrorCode</code> equal to <code>ConditionalCheckFailed</code> then my function returns <code>False</code>. All other exceptions are caught by the function caller.</p>\n\n<p>In other words I want the function to return <code>True</code> on a successful update to the table, <code>False</code> otherwise and I want to throw all exceptions other than the one above as normal.</p>\n\n<p>My problem is that I don't know how to check whether a <code>ServiceError</code> with the above <code>ErrorCode</code> is thrown.</p>\n\n<p>This is what I have tried (<code>try</code> is from <code>Control.Monad.Catch</code> and returns <code>m (Either e a)</code>, bracketed numbers in first column correspond to line numbers in the error further below):</p>\n\n<pre><code>[41]    rs &lt;- try $ send $ updateItem \"TableName\" &amp; uiKey ...blah blah\n        case rs of\n[47]      Left e  -&gt; if (serviceCode e) == (errorCode \"ConditionalCheckFailed\")\n                     then return False else throwM e\n          Right _ -&gt; return True\n</code></pre>\n\n<p><code>errorCode</code> is the constructor for the type <code>ErrorCode</code>. <code>serviceCode</code> is a <code>lens</code> that pulls the service code out of the error.</p>\n\n<p>I also tried to use <code>tryJust</code>:</p>\n\n<pre><code>rs &lt;- try' $ send $ updateItem \"TableName\" &amp; uiKey ...blah blah\nwhere try' = tryJust (\\e -&gt; if (serviceCode e) == (errorCode \"ConditionalCheckFailed\") then Nothing else Just e)\n</code></pre>\n\n<p>In both cases I seem to have trouble getting the predicate <code>if (serviceCode e) == (errorCode \"ConditionalCheckFailed\")</code> to type check (I don't understand lenses well):</p>\n\n<pre><code>    Couldn't match expected type \u2018ServiceError -&gt; f1 ServiceError\u2019\n                with actual type \u2018ErrorCode\u2019\n    Relevant bindings include\n      e :: ErrorCode -&gt; f1 ErrorCode\n        (bound at src/Foo.hs:47:10)\n      rs :: Either (ErrorCode -&gt; f1 ErrorCode) UpdateItemResponse\n        (bound at src/Foo.hs:41:3)\n    Possible cause: \u2018errorCode\u2019 is applied to too many arguments\n    In the second argument of \u2018(==)\u2019, namely\n      \u2018(errorCode \"ConditionalCheckFailed\")\u2019\n    In the expression:\n      (serviceCode e) == (errorCode \"ConditionalCheckFailed\")\n</code></pre>\n\n<p>How can I get something like this to work?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446024378, "post_id": 33387191, "comment_id": 54566655, "body": "sorry, but what is the question?"}, {"owner": {"reputation": 347, "user_id": 5362936, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/156690511341811/picture?type=large", "display_name": "Lin Jiayin", "link": "https://stackoverflow.com/users/5362936/lin-jiayin"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446024537, "post_id": 33387191, "comment_id": 54566757, "body": "i wwant to know if the balanced-fold use the base value to deal with the element in the list(if there is just one element in the list)?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446024538, "post_id": 33387191, "comment_id": 54566758, "body": "@Carsten There is one, but it&#39;s hidden. I&#39;ll reformat the text."}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446025379, "post_id": 33387191, "comment_id": 54567315, "body": "ok sorry - the problem right now is, that your balanced fold will not work at because of the pattern <code>(_:_:_)</code> - for example there is no case for a list with just one element"}, {"owner": {"reputation": 4761, "user_id": 2277395, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09841ca82e49f998ea0b8f159dea87c1?s=128&d=identicon&r=PG", "display_name": "Martin Drautzburg", "link": "https://stackoverflow.com/users/2277395/martin-drautzburg"}, "edited": false, "score": 0, "creation_date": 1446025473, "post_id": 33387191, "comment_id": 54567388, "body": "When there is just one element in the list, balanced_fold does not work at all because there is no pattern match for (x:[]) You get &quot;Non-exhaustive patterns in function balanced_fold&quot;. In fact it only works on an empty list. Also foldr and foldl always use the base case, even if there is just one element in the list. This is how the iteration ends."}], "answers": [{"tags": [], "owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "is_accepted": true, "score": 3, "last_activity_date": 1446026587, "last_edit_date": 1446026587, "creation_date": 1446025624, "answer_id": 33387697, "question_id": 33387191, "link": "https://stackoverflow.com/questions/33387191/haskell-basecase-in-balanced-fold/33387697#33387697", "title": "haskell basecase in balanced-fold", "body": "<p>I hope this answers your question: </p>\n\n<p>First let's fix your function:</p>\n\n<pre><code>balanced_fold :: (e -&gt; e -&gt; e) -&gt; e -&gt; [e] -&gt; e\nbalanced_fold _ b []  = b\nbalanced_fold f b [a] = f b a\nbalanced_fold f b l =\n   let len= length l\n       (half1,half2)= divide_list (div len 2) l\n       value1=balanced_fold f b half1\n       value2=balanced_fold f b half2\n   in f value1 value2\n</code></pre>\n\n<p>as you can see I added a case that deals with lists of lenght 1 (the missing piece) - also I hope you now see where your <em>base-case</em>  is</p>\n\n<p>The problem with what you had was, that it had no matching cases for lists with just one element - and even if you would remove the <code>(_:_:_)</code> (which you don't really need) you would end up in situations where <code>divide_list</code> always give you something like <code>([],[x])</code> and the <code>[x]</code> would recurse in the same case - that's why you need the extra case to deal with exactly this situation.</p>\n\n<p>Here is a quick test-session to see if it works:</p>\n\n<pre><code>\u03bb&gt; balanced_fold (+) 0 []\n0\n\u03bb&gt; balanced_fold (+) 0 [1]\n1\n\u03bb&gt; balanced_fold (+) 0 [1..4]\n10\n\u03bb&gt; balanced_fold (+) 0 [1..5]\n15\n</code></pre>\n\n<p>seems to be ok I think</p>\n\n<hr>\n\n<h2>maybe nice to know</h2>\n\n<p>notice how this all only works when your operation is <em>associative</em> and if you have some kind of <em>base</em>/<em>neutral</em> element (to this operation).</p>\n\n<p>There is already a class <a href=\"https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Monoid.html#t:Monoid\" rel=\"nofollow\"><code>Monoid</code></a> for all this and so you could write this too:</p>\n\n<pre><code>import Data.Monoid\n\nbalanced_fold :: Monoid e =&gt; [e] -&gt; e\nbalanced_fold []  = mempty\nbalanced_fold [a] = a\nbalanced_fold l =\n   let len           = length l\n       (half1,half2) = divide_list (div len 2) l\n       value1        = balanced_fold half1\n       value2        = balanced_fold half2\n   in value1 `mappend ` value2\n</code></pre>\n\n<p>See it's just</p>\n\n<ul>\n<li><code>f</code> is now <code>mappend</code></li>\n<li><code>b</code> is just <code>mempty</code></li>\n</ul>\n\n<p>Now it's a bit ugly to apply for the example:</p>\n\n<pre><code>\u03bb&gt; balanced_fold (map Sum [1..4])\nSum {getSum = 10}\n</code></pre>\n\n<p>but that's just because there is more than one monoid possible for numbers.</p>\n"}], "owner": {"reputation": 347, "user_id": 5362936, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/156690511341811/picture?type=large", "display_name": "Lin Jiayin", "link": "https://stackoverflow.com/users/5362936/lin-jiayin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 1, "accepted_answer_id": 33387697, "answer_count": 1, "score": 1, "last_activity_date": 1446026587, "creation_date": 1446024231, "last_edit_date": 1446024667, "question_id": 33387191, "link": "https://stackoverflow.com/questions/33387191/haskell-basecase-in-balanced-fold", "title": "haskell basecase in balanced-fold", "body": "<p>There are different kinds of folds in Haskell like <code>foldl</code> and <code>foldr</code>.\nI read about the following balanced-fold:</p>\n\n<pre><code>balanced_fold::(e-&gt;e-&gt;e)-&gt;e-&gt;[e]-&gt;e\nbalanced_fold _ b [] =b\nbalanced_fold f b l@(_:_:_)=\n   let \n      len= length l\n      (half1,half2)=\n        divide_list (div len 2) l\n      value1=balanced_fold f b half1\n      value2=balanced_fold f b half2\n   in \n      f value1 value2\ndivide_list :: Int-&gt; [a]-&gt;([a],[a])\ndivide_list _ [] =([],[])\ndivide_list n (x:xs)\n     | n==0 =([],x:xs)\n     | otherwise =\n         let (half1,half2)=\n             divide_list (n-1) xs\n         in \n             (x:half1, half2)\n</code></pre>\n\n<p>From the definition, when the list just contains one element <code>[x]</code> the output will be <code>x</code>. </p>\n\n<p>My question is: is it right that, when a list just contains one element, we don't need to use the base value to deal with this element?</p>\n\n<p>As we know, <code>foldr</code> and <code>foldl</code> do use the base value to deal with the element in the list even there is just one.</p>\n\n<pre><code>foldl::(v-&gt;e-&gt;v)-&gt;v-&gt;[e]-&gt;v\nfoldl _ base [] =base\nfoldl f base (x:xs)=\n     let newbase =f base x in\n     foldl f newbase xs\n</code></pre>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 1, "creation_date": 1446029091, "post_id": 33386902, "comment_id": 54569701, "body": "what is the purpose of <code>bundle 3 [1,2,3,4,5] = [[1,2,3]]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 1, "creation_date": 1446029186, "post_id": 33387128, "comment_id": 54569757, "body": "why the monadic <code>return</code> and not just <code>bundle n x = [take n x]</code>?"}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "reply_to_user": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1446029895, "post_id": 33387128, "comment_id": 54570216, "body": "because I wanted the <i>point free</i> version (in this case I think borderline more readable - but that might be opinionated) (also spfrnd did this afterwards)"}], "tags": [], "owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "is_accepted": false, "score": 1, "last_activity_date": 1446024039, "creation_date": 1446024039, "answer_id": 33387128, "question_id": 33386902, "link": "https://stackoverflow.com/questions/33386902/type-signature-for-a-function-that-makes-a-list-of-lists/33387128#33387128", "title": "type signature for a function that makes a list of lists?", "body": "<p>Chi wrote a bit about the problem - I start at your example and see where it leads me.</p>\n\n<p>I honestly don't understand why you want the second warping but the easiest way you can get this going would be:</p>\n\n<pre><code>bundle :: Int -&gt; [a] -&gt; [[a]]\nbundle 0 _ = [[]]\nbundle n (x:xs) = let [xs'] = bundle (n-1) xs in [x : xs']\n</code></pre>\n\n<p>of course this will give you <code>[[]]</code> for \u00b4bundle 0 ...` but I think that's indeed what you want</p>\n\n<p>Now of course there are some easier ways - for example there is already a function that does something similar: <code>take</code> - it just does not wrap the second time but this you can do with a simple <code>return</code>:</p>\n\n<pre><code>bundle :: Int -&gt; [a] -&gt; [[a]]\nbundle n = return . take n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 3, "last_activity_date": 1446024431, "last_edit_date": 1446024431, "creation_date": 1446024079, "answer_id": 33387141, "question_id": 33386902, "link": "https://stackoverflow.com/questions/33386902/type-signature-for-a-function-that-makes-a-list-of-lists/33387141#33387141", "title": "type signature for a function that makes a list of lists?", "body": "<pre><code>bundle :: Int -&gt; [a] -&gt; [[a]]\nbundle 0 _ = []\nbundle n (x:xs) = [x:bundle (n-1) xs]\n</code></pre>\n\n<p><code>bundle (n-1) xs</code> has type <code>[[a]]</code>. For <code>x : bundle (n-1) xs</code> to make sense, <code>x</code> must be an element of <code>[[a]]</code>, so it must be an  <code>[a]</code>. But it is simply an <code>a</code>.</p>\n\n<p>In other words, you are attempting to build an ill-formed list such as</p>\n\n<pre><code>[ 1 , [2,3] , [4,5] ]\n  ^-- not a list\n</code></pre>\n\n<p>Do you really want to build a <code>[[a]]</code>? Isn't an <code>[a]</code> more appropriate for your goal?</p>\n"}], "owner": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1446024431, "creation_date": 1446023401, "last_edit_date": 1446024122, "question_id": 33386902, "link": "https://stackoverflow.com/questions/33386902/type-signature-for-a-function-that-makes-a-list-of-lists", "title": "type signature for a function that makes a list of lists?", "body": "<pre><code>bundle :: Int -&gt; [a] -&gt; [[a]]\nbundle 0 _ = []\nbundle n (x:xs) = [x:bundle (n-1) xs]\n</code></pre>\n\n<p>My goal is to do something like this </p>\n\n<p><code>bundle 3 [1,2,3,4,5] = [[1,2,3]]</code></p>\n\n<p>The code is giving me the error </p>\n\n<pre><code>Couldn't match expected type \u2018[a]\u2019 with actual type \u2018a\u2019\n  \u2018a\u2019 is a rigid type variable bound by\n      the type signature for bundle :: Int -&gt; [a] -&gt; [[a]]\n</code></pre>\n"}, {"tags": ["haskell", "monads", "applicative", "side-effects"], "comments": [{"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1446022778, "post_id": 33386622, "comment_id": 54565645, "body": "Maybe useful: <a href=\"https://slpopejoy.github.io/posts/Effectful01.html\" rel=\"nofollow noreferrer\">slpopejoy.github.io/posts/Effectful01.html</a> He defines <i>effectful</i> as: 1. Actual side-effects (IO) 2. Stuff that seems like side-effects (State, Writer, etc.) 3. Contexts that persist over function calls (Reader, State, etc.) 4. Non-local control flow (Maybe, Either)."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1446023913, "post_id": 33386622, "comment_id": 54566364, "body": "Most monads are defined in terms of pure computation, but from a programmer&#39;s point of view it is common to think to <code>State s a</code> as an imperative-like subroutine that can read/write the state <code>s</code> with side-effects and finally produce an <code>a</code>. Even if it is pure, sometimes it is convenient to pretend it&#39;s not. On topic, I&#39;d say that effectful and with effects mean the same thing, even if they are sometimes applied broadly to values wrapped in any monad/applicative, even when those do not model side effects."}, {"owner": {"reputation": 4761, "user_id": 2277395, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09841ca82e49f998ea0b8f159dea87c1?s=128&d=identicon&r=PG", "display_name": "Martin Drautzburg", "link": "https://stackoverflow.com/users/2277395/martin-drautzburg"}, "edited": false, "score": 0, "creation_date": 1586897229, "post_id": 33386622, "comment_id": 108297136, "body": "I found a pretty good answer in a comment to a question concerning <a href=\"https://stackoverflow.com/questions/7460809/can-someone-explain-the-traverse-function-in-haskell\">Traversables</a>.   The question was asked &quot;What does the term &#39;effect&#39; mean?&quot; and <i>@missingfaktor</i> gave  a really good answer, in short: &quot;It means the structural information of a Functor, the part that&#39;s not parametric&quot;. <a href=\"https://stackoverflow.com/questions/7460809/can-someone-explain-the-traverse-function-in-haskell#comment9028614_7461112\">Here</a> is the complete answer."}], "answers": [{"comments": [{"owner": {"reputation": 4761, "user_id": 2277395, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09841ca82e49f998ea0b8f159dea87c1?s=128&d=identicon&r=PG", "display_name": "Martin Drautzburg", "link": "https://stackoverflow.com/users/2277395/martin-drautzburg"}, "edited": false, "score": 1, "creation_date": 1446025884, "post_id": 33387426, "comment_id": 54567632, "body": "I agree to the &quot;effect&quot; you ascribe to the continuation monad. Other that that I am not with you. The fact that &quot;do&quot; notation hides the call to &gt;&gt;= does not make it effectful, because without that syntactic sugar the expession would be just as effectful, but not hiding &gt;&gt;=. The fact that it does different things depending on the type of the monad is owed to monad being a typeclass. Such things happen with all typeclasses, effectful or not."}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "reply_to_user": {"reputation": 4761, "user_id": 2277395, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09841ca82e49f998ea0b8f159dea87c1?s=128&d=identicon&r=PG", "display_name": "Martin Drautzburg", "link": "https://stackoverflow.com/users/2277395/martin-drautzburg"}, "edited": false, "score": 0, "creation_date": 1446027573, "post_id": 33387426, "comment_id": 54568740, "body": "OK, so obviously <code>IO</code>, <code>ST</code> and <code>STM</code> are only possible by doing low-level stuff that normal Haskell code can&#39;t do. Strictly speaking, all the other monads are just pure code being invisibly run. But it&#39;s still useful to <i>think of</i> them as being effectful computations. To some extent it&#39;s just a matter of perspective."}, {"owner": {"reputation": 28873, "user_id": 1068232, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2a0a145ce58c20013969fe3f203531da?s=128&d=identicon&r=PG", "display_name": "Andr&#225;s Kov&#225;cs", "link": "https://stackoverflow.com/users/1068232/andr%c3%a1s-kov%c3%a1cs"}, "edited": false, "score": 0, "creation_date": 1446030166, "post_id": 33387426, "comment_id": 54570374, "body": "Agree with Orchid. Effectful semantics is the intended user-facing semantics for monads, and Haskell programmers in practice think in terms of effects. Implementation via pure functions is often just that, an implementation detail. It&#39;s somewhat arbitrary anyway to stop at the purely functional level of representation, when we could go further to machine code which features lots of mutable updates despite the purity of source representations."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1446044001, "post_id": 33387426, "comment_id": 54579934, "body": "A broad theme is that a computation <code>m :: f a</code> is pure if and only if there exists an <code>x :: a</code> such that <code>m = pure x</code>. Anything not pure in this sense has a &quot;side effect&quot;. When <code>f ~ Identity</code>, every computation is pure because the only way to create something of type <code>Identity a</code> is by applying <code>Identity = pure</code> to something of type <code>a</code>."}, {"owner": {"reputation": 4761, "user_id": 2277395, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09841ca82e49f998ea0b8f159dea87c1?s=128&d=identicon&r=PG", "display_name": "Martin Drautzburg", "link": "https://stackoverflow.com/users/2277395/martin-drautzburg"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1446049795, "post_id": 33387426, "comment_id": 54584316, "body": "@dfeuer, your answer looks interesting, but I did not quite understand it. @Orchid&amp;Andreas: I understand your (good) point that &quot;effectful&quot; refers to a way of looking at things, rather than something you can spot in the code. But I still don&#39;t understand what way of looking at things warrants the term effectful."}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": false, "score": 4, "last_activity_date": 1446024849, "creation_date": 1446024849, "answer_id": 33387426, "question_id": 33386622, "link": "https://stackoverflow.com/questions/33386622/what-exactly-does-effectful-mean/33387426#33387426", "title": "What exactly does &quot;effectful&quot; mean", "body": "<p>To my mind, a \"side effect\" is anything that a normal function couldn't do. In other words, anything in addition to just returning a value.</p>\n\n<p>Consider the following code block:</p>\n\n<pre><code>let\n  y = foo x\n  z = bar y\nin foobar z\n</code></pre>\n\n<p>This calls <code>foo</code>, and then calls <code>bar</code>, and then calls <code>foobar</code>, three ordinary functions. Simple enough, right? Now consider this:</p>\n\n<pre><code>do\n  y &lt;- foo x\n  z &lt;- bar y\n  foobar z\n</code></pre>\n\n<p>This also calls three functions, but it also invisibly calls <code>(&gt;&gt;=)</code> between each pair of lines as well. And that means that some strange things happen, depending on what type of monad the functions are running in.</p>\n\n<ul>\n<li><p>If this is the identity monad, nothing special happens. The monadic version does exactly the same thing as the pure version. There are no side-effects.</p></li>\n<li><p>If each function returns a <code>Maybe</code>-something, then if (say) <code>bar</code> returns <code>Nothing</code>, the entire code block aborts. A normal function can't do that. (I.e., in the pure version, there is <em>no way</em> to prevent <code>foobar</code> being called.) So this version does something that the pure version cannot. Each function can return a value <em>or abort the block</em>. That's a side-effect.</p></li>\n<li><p>If each function returns a list-of-something, then the code executes for all possible combinations of results. Again, in the pure version, there is <em>no way</em> to make any of the functions execute multiple times with different arguments. So that's a side-effect.</p></li>\n<li><p>If each function runs in a state monad, then (for example) <code>foo</code> can send some data directly to <code>foobar</code>, in addition to the value you can see being passed through <code>bar</code>. Again, you can't do that with pure functions, so that's a side-effect.</p></li>\n<li><p>In <code>IO</code> monad, you have all sorts of interesting effects. You can save files to disk (a file is basically a giant global variable), you can even affect code running on other computers (we call this network I/O).</p></li>\n<li><p>The <code>ST</code> monad is a cut-down version of the <code>IO</code> monad. It allows mutable state, but self-contained computations cannot influence each other.</p></li>\n<li><p>The <code>STM</code> monad lets multiple threads talk to each other, and may cause the code to execute multiple times, and... well, you can't do any of this with normal functions.</p></li>\n<li><p>The continuation monad allows you to <em>break people's minds!</em> Arguably that is possible with pure functions...</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 4761, "user_id": 2277395, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09841ca82e49f998ea0b8f159dea87c1?s=128&d=identicon&r=PG", "display_name": "Martin Drautzburg", "link": "https://stackoverflow.com/users/2277395/martin-drautzburg"}, "edited": false, "score": 2, "creation_date": 1446062083, "post_id": 33398273, "comment_id": 54592128, "body": "Could you elaborate more on the &quot;effect&quot; of Applicatives? After all there is a paper &quot;Applicative Programming with effects&quot; and I never quite understood the title (I believe I understand applicatives though)"}, {"owner": {"reputation": 60057, "user_id": 1333025, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/79ab43010f900324ac5e2de19a2916cb?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1333025/petr"}, "reply_to_user": {"reputation": 4761, "user_id": 2277395, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09841ca82e49f998ea0b8f159dea87c1?s=128&d=identicon&r=PG", "display_name": "Martin Drautzburg", "link": "https://stackoverflow.com/users/2277395/martin-drautzburg"}, "edited": false, "score": 4, "creation_date": 1446115468, "post_id": 33398273, "comment_id": 54614091, "body": "@MartinDrautzburg As I wrote, the distinction between &quot;effects&quot; and &quot;values&quot; is given by the actual data type, not by the abstraction we use to manipulate it. For example, for <code>Maybe</code> the &quot;effect&quot; is always that a computation can be aborted, regardless of if we use Applicative or Monad (or other) interface. If you write <code>f &lt;$&gt; a &lt;*&gt; b &lt;*&gt; c</code> in <code>Maybe</code>, any of <code>a</code>, <code>b</code> or <code>c</code> can abort the computation with <code>Nothing</code>, and this is its &quot;effect&quot;. Applicative interface allows combining effects (for <code>Maybe</code> it means abort on first <code>Nothing</code>), but doesn&#39;t allow an effect to depend on previous values."}], "tags": [], "owner": {"reputation": 60057, "user_id": 1333025, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/79ab43010f900324ac5e2de19a2916cb?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1333025/petr"}, "is_accepted": false, "score": 25, "last_activity_date": 1446058037, "last_edit_date": 1446058037, "creation_date": 1446055026, "answer_id": 33398273, "question_id": 33386622, "link": "https://stackoverflow.com/questions/33386622/what-exactly-does-effectful-mean/33398273#33398273", "title": "What exactly does &quot;effectful&quot; mean", "body": "<p>A <a href=\"https://en.wikipedia.org/wiki/Side_effect_(computer_science)\">side effect</a> is an observable interaction with its environment (apart from computing its result value). In Haskell, we try hard to avoid functions with such side effects. This even applies to <code>IO</code> actions: when an <code>IO</code> action is evaluated, no side effects are performed, they are executed only when the actions prescribed in the <code>IO</code> value are executed within <code>main</code>.</p>\n\n<p>However, when working with abstractions that are related to composing computations, such as applicative functors and monads, it's convenient to somewhat distinguish between the actual value and the \"rest\", which we often call an \"effect\". In particular, if we have a type <code>f</code> of <a href=\"https://wiki.haskell.org/Kind\">kind</a> <code>* -&gt; *</code>, then in <code>f a</code> the <code>a</code> part is \"the value\" and whatever \"remains\" is \"the effect\".</p>\n\n<p>I intentionally quoted the terms, as there is no precise definition (as far as I know), it's merely a colloquial definition. In some cases there are no values at all, or multiple values. For example for <code>Maybe</code> the \"effect\" is that there might be no value (and the computation is aborted), for <code>[]</code> the \"effect\" is that there are multiple (or zero) values. For more complex types this distinction can be even more difficult.</p>\n\n<p>The distinction between \"effects\" and \"values\" doesn't really depend on the abstraction. <code>Functor</code>, <code>Applicative</code> and <code>Monad</code> just give us tools what we can do with them (<code>Functor</code>s allow to modify values inside, <code>Applicative</code>s allow to combine effects and <code>Monad</code>s allow effects to depend on the previous values). But in the context of <code>Monad</code>s, it's somewhat easier to create a mental picture of what is going on, because a monadic action can \"see\" the result value of the previous computation, as witnessed by the</p>\n\n<pre><code>(&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b\n</code></pre>\n\n<p>operator: The second function receives a value of type <code>a</code>, so we can imagine \"the previous computation had some effect and now there is its result value with which we can do something\".</p>\n"}, {"tags": [], "owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "is_accepted": false, "score": 18, "last_activity_date": 1521692882, "last_edit_date": 1521692882, "creation_date": 1520344157, "answer_id": 49132391, "question_id": 33386622, "link": "https://stackoverflow.com/questions/33386622/what-exactly-does-effectful-mean/49132391#49132391", "title": "What exactly does &quot;effectful&quot; mean", "body": "<p>In support of <a href=\"https://stackoverflow.com/a/33398273/2751851\">Petr Pudl\u00e1k's answer</a>, here is an argument concerning the origin of the broader notion of \"effect\" espoused there.</p>\n\n<p>The phrase \"effectful programming\" shows up in the abstract of McBride and Patterson's <a href=\"http://www.staff.city.ac.uk/%7Eross/papers/Applicative.html\" rel=\"noreferrer\"><em>Applicative Programming with Effects</em></a>, the paper which introduced applicative functors:</p>\n\n<blockquote>\n  <p>In this paper, we introduce <code>Applicative</code> functors \u2014 an abstract characterisation of an applicative style of effectful programming, weaker than <code>Monad</code>s and hence more widespread.</p>\n</blockquote>\n\n<p>\"Effect\" and \"effectful\" appear in a handful of other passages of the paper; these ocurrences are deemed unremarkable enough not to require an explicit clarification. For instance, this remark is made just after the definition of <code>Applicative</code> is presented (p. 3):</p>\n\n<blockquote>\n  <p>In each example, there is a type constructor <code>f</code> that embeds the usual\n  notion of value, but supports its own peculiar way of giving meaning to the usual applicative language [...] We correspondingly introduce the <code>Applicative</code> class:</p>\n  \n  <p>[A Haskell definition of <code>Applicative</code>]</p>\n  \n  <p>This class generalises <strong>S</strong> and <strong>K</strong> [i.e. <a href=\"https://stackoverflow.com/q/23095224/2751851\">the S and K combinators</a>, which show up in the <code>Reader</code>/function <code>Applicative</code> instance] from threading an environment to threading an effect in general.</p>\n</blockquote>\n\n<p>From these quotes, we can infer that, in this context:</p>\n\n<ul>\n<li><p>Effects are the things that <code>Applicative</code> threads \"in general\".</p></li>\n<li><p>Effects are associated with the type constructors that are given <code>Applicative</code> instances.</p></li>\n<li><p><code>Monad</code> also deals with effects.</p></li>\n</ul>\n\n<p>Following these leads, we can trace back this usage of \"effect\" back to at least <a href=\"http://homepages.inf.ed.ac.uk/wadler/topics/monads.html\" rel=\"noreferrer\">Wadler's papers on monads</a>. For instance, here is a quote from page 6 of <em>Monads for functional programming</em>:</p>\n\n<blockquote>\n  <p>In  general,  a  function  of  type <em>a \u2192 b</em> is replaced by a function of type <em>a\n  \u2192 M b</em>. This can be read as a function that accepts an argument of type <em>a</em>\n  and returns a result of type <em>b</em>, with a possible additional effect captured by\n  <em>M</em>. This effect may be to act on state, generate output, raise an exception, or what have you.</p>\n</blockquote>\n\n<p>And from the same paper, page 21:</p>\n\n<blockquote>\n  <p>If monads encapsulate effects and lists form a monad, do lists correspond to some effect? Indeed they do, and the effect they correspond to is choice. One can think of a computation of type <em>[a]</em> as offering a choice of values, one for each element  of  the  list.  The  monadic  equivalent  of  a  function  of  type <em>a \u2192 b</em> is  a function of type <em>a \u2192 [b]</em>.</p>\n</blockquote>\n\n<p>The \"correspond to some effect\" turn of phrase here is key. It ties back to the more straightforward claim in the abstract:</p>\n\n<blockquote>\n  <p>Monads provide a convenient framework for simulating effects found in other languages, such as global state, exception handling, output, or non-determinism.</p>\n</blockquote>\n\n<p>The pitch is that monads can be used to express things that, in \"other languages\", are typically encoded as side-effects -- that is, as Petr Pudl\u00e1k puts it in his answer here, \"an observable interaction with [a function's] environment (apart from computing its result value)\". Through metonymy, that has readily led to \"effect\" acquiring a second meaning, broader than that of \"side-effect\" -- namely, whatever is introduced through a type constructor which is a <code>Monad</code> instance. Over time, this meaning was further generalised to cover other functor classes such as <code>Applicative</code>, as seen in McBride and Patterson's work.</p>\n\n<p>In summary, I consider \"effect\" to have two reasonable meanings in Haskell parlance:</p>\n\n<ul>\n<li><p>A \"literal\" or \"absolute\" one: an effect is a side-effect; and</p></li>\n<li><p>A \"generalised\" or \"relative\" one: an effect is a functorial context.</p></li>\n</ul>\n\n<p>On occasion, avoidable disagreements over terminology happen when each of the involved parties implicitly assumes a different meaning of \"effect\". Another possible point of contention involves whether it is legitimate to speak of effects when dealing with <code>Functor</code> alone, as opposed to subclasses such as <code>Applicative</code> or <code>Monad</code> (I believe it is okay to do so, in agreement with <a href=\"https://stackoverflow.com/a/14581288/2751851\">Petr Pudl\u00e1k's answer to <em>Why can applicative functors have side effects, but functors can't?</em></a>).</p>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 1325960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gB5mi.jpg?s=128&g=1", "display_name": "Philip Schwarz", "link": "https://stackoverflow.com/users/1325960/philip-schwarz"}, "is_accepted": false, "score": 0, "last_activity_date": 1537606091, "creation_date": 1537606091, "answer_id": 52455038, "question_id": 33386622, "link": "https://stackoverflow.com/questions/33386622/what-exactly-does-effectful-mean/52455038#52455038", "title": "What exactly does &quot;effectful&quot; mean", "body": "<p>\"Effect is a very vague term and that is ok because we are trying to talk about something that is outside the language. Effect and side effect are not the same thing. Effects are good. Side effects are bugs.</p>\n\n<p>Their lexical similarity is really unfortunate because it leads to a lot of people conflating these ideas when they read about them and people using one instead of the other so it leads to a lot of confusion.\"</p>\n\n<p>see here for more: <a href=\"https://www.slideshare.net/pjschwarz/rob-norrisfunctionalprogrammingwitheffects\" rel=\"nofollow noreferrer\">https://www.slideshare.net/pjschwarz/rob-norrisfunctionalprogrammingwitheffects</a></p>\n"}], "owner": {"reputation": 4761, "user_id": 2277395, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/09841ca82e49f998ea0b8f159dea87c1?s=128&d=identicon&r=PG", "display_name": "Martin Drautzburg", "link": "https://stackoverflow.com/users/2277395/martin-drautzburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3286, "favorite_count": 15, "answer_count": 4, "score": 35, "last_activity_date": 1537606091, "creation_date": 1446022534, "last_edit_date": 1520344447, "question_id": 33386622, "link": "https://stackoverflow.com/questions/33386622/what-exactly-does-effectful-mean", "title": "What exactly does &quot;effectful&quot; mean", "body": "<p>Time and again I read the term <em>effectful</em>, but I am still unable to give a clear definition of what it means. I assume the correct context is effectful <em>computations</em>, but I've also seen the term effectful <em><a href=\"https://stackoverflow.com/questions/24467803/how-to-handle-side-effect-with-applicative\">values</a></em>)</p>\n\n<p>I used to think that effectful means <em>having side effects</em>. But in Haskell there are no side-effects (except to some extent IO). Still there are effectful computations all over the place.</p>\n\n<p>Then I read that monads are used to create effectful computations. I can somewhat understand this in the context of the <code>State</code> Monad. But I fail to see any side-effect in the <code>Maybe</code> monad. In general it seems to me, that Monads which wrap a function-like thing are easier to see as producing side-effects than Monads which just wrap a value.</p>\n\n<p>When it comes to <code>Applicative</code> functors I am even more lost. I always saw applicative functors as a way to <code>map</code> a function with more than one argument. I cannot see any side-effect here. Or is there a difference between <em>effectful</em> and <em>with effects</em>?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 3, "creation_date": 1446017872, "post_id": 33385077, "comment_id": 54563270, "body": "the code is fine and works when I try it - how to you <i>run the code</i>?"}, {"owner": {"reputation": 17, "user_id": 5415222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ee6be3d6596a7a67d789557351ef5c6?s=128&d=identicon&r=PG&f=1", "display_name": "FunctionalParadigm", "link": "https://stackoverflow.com/users/5415222/functionalparadigm"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1446019228, "post_id": 33385077, "comment_id": 54563890, "body": "navigate to the directory and then :l filename"}, {"owner": {"reputation": 11612, "user_id": 204218, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3ee571049ff6ff0361be53e554b877e6?s=128&d=identicon&r=PG", "display_name": "adamse", "link": "https://stackoverflow.com/users/204218/adamse"}, "edited": false, "score": 2, "creation_date": 1446020475, "post_id": 33385077, "comment_id": 54564426, "body": "You might get better help if you include the full error message."}, {"owner": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "edited": false, "score": 0, "creation_date": 1446023361, "post_id": 33385077, "comment_id": 54566028, "body": "You&#39;re probably running the code in GHCi or similar. GHCi works in the IO monad, so for every = binding you&#39;ll have to use <code>let name = body</code>. When trying more than one function it&#39;s best if you write them in a file and then load it in the interpreter with the <code>:load</code> command."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1446023609, "post_id": 33385077, "comment_id": 54566188, "body": "Did you save your last changes? Maybe you are trying to load an older version?"}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 1, "creation_date": 1446024958, "post_id": 33385077, "comment_id": 54567041, "body": "Most particularly, including the <i>line number</i> would help."}, {"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1446025833, "post_id": 33385077, "comment_id": 54567604, "body": "Is your code in the file indented exactly as you&#39;ve posted? That is, are all lines except the <code>|</code> guards unindented?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5415222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ee6be3d6596a7a67d789557351ef5c6?s=128&d=identicon&r=PG&f=1", "display_name": "FunctionalParadigm", "link": "https://stackoverflow.com/users/5415222/functionalparadigm"}, "edited": false, "score": 0, "creation_date": 1446043713, "post_id": 33390446, "comment_id": 54579720, "body": "This fixed it, can&#39;t believe I missed that whitespace. Thank you!"}], "tags": [], "owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "is_accepted": false, "score": 3, "last_activity_date": 1446033491, "creation_date": 1446033491, "answer_id": 33390446, "question_id": 33385077, "link": "https://stackoverflow.com/questions/33385077/caesar-cipher-in-haskell-parse-error-on-input/33390446#33390446", "title": "Caesar cipher in Haskell. &quot; parse error on input &#39;=&#39; &quot;", "body": "<p><code>encode</code> doesn't start at the same position as the other top-level definitions. Remove the extra space.</p>\n"}], "owner": {"reputation": 17, "user_id": 5415222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ee6be3d6596a7a67d789557351ef5c6?s=128&d=identicon&r=PG&f=1", "display_name": "FunctionalParadigm", "link": "https://stackoverflow.com/users/5415222/functionalparadigm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 1, "closed_date": 1446173582, "answer_count": 1, "score": -1, "last_activity_date": 1446033491, "creation_date": 1446016695, "last_edit_date": 1446033459, "question_id": 33385077, "link": "https://stackoverflow.com/questions/33385077/caesar-cipher-in-haskell-parse-error-on-input", "closed_reason": "Not suitable for this site", "title": "Caesar cipher in Haskell. &quot; parse error on input &#39;=&#39; &quot;", "body": "<p>I'm trying to implement a caesar cipher in Haskell. When I run this code I get a \" parse error on input '=' \". What should be changed? I'm loading this up from a source file (Sublime) into ghci.</p>\n\n<pre><code>import Data.Char\n\n\nlet2int :: Char -&gt; Int\nlet2int c = ord c - ord 'a'\n\nint2let :: Int -&gt; Char\nint2let n = chr (ord 'a' + n)\n\nshift :: Int -&gt; Char -&gt; Char\nshift n c\n | isLower c = int2let ((let2int c + n) `mod` 26)\n | otherwise = c\n\n encode :: Int -&gt; String -&gt; String\n encode n xs = [shift n x | x &lt;- xs]\n</code></pre>\n"}, {"tags": ["function", "haskell", "functional-programming"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 3, "creation_date": 1446011700, "post_id": 33383771, "comment_id": 54560906, "body": "How is this related to higher order functions?"}, {"owner": {"reputation": 91, "user_id": 5496686, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10208069251712085/picture?type=large", "display_name": "Luis Fernando Pineda", "link": "https://stackoverflow.com/users/5496686/luis-fernando-pineda"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1446012034, "post_id": 33383771, "comment_id": 54561013, "body": "@DanielJour i&#39;m really not sure but aren&#39;t curried functions a high order function? Isn&#39;t calling a function inside another a high order function."}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1446029415, "post_id": 33383771, "comment_id": 54569916, "body": "@LuisFernandoPineda: no and no: <a href=\"https://en.wikipedia.org/wiki/Higher-order_function\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Higher-order_function</a>"}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1446023339, "post_id": 33384233, "comment_id": 54566013, "body": "I took the liberty of continuing from your last note below."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 2, "last_activity_date": 1446013374, "creation_date": 1446013374, "answer_id": 33384233, "question_id": 33383771, "link": "https://stackoverflow.com/questions/33383771/creating-higher-order-functions-using-haskell/33384233#33384233", "title": "Creating higher order functions using Haskell", "body": "<p>A higher order function is a function that takes another function as argument or returns another function.</p>\n\n<p>Your problem at hand is easily solvable using a short <a href=\"http://ideone.com/rhtYza\" rel=\"nofollow\">recursive function:</a></p>\n\n<pre><code>memtwice :: (Eq a) =&gt; a -&gt; [a] -&gt; Bool\nmemtwice value list = scan value list False\n where scan _ [] _ = False\n       scan v (x:xs) True =\n         if v == x then True\n          else scan v xs True\n       scan v (x:xs) False =\n         scan v xs (v == x)\n</code></pre>\n\n<p>The <code>scan</code> is a function that carries state information (whether there has already been found one instance) as additional parameter.</p>\n\n<p>One could rewrite this using higher order functions such as <code>fold</code> though I'm not sure how one could implement the short circuit behaviour (stopping as soon as two instances have been found) then.</p>\n"}, {"tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": false, "score": 1, "last_activity_date": 1446013700, "creation_date": 1446013700, "answer_id": 33384305, "question_id": 33383771, "link": "https://stackoverflow.com/questions/33383771/creating-higher-order-functions-using-haskell/33384305#33384305", "title": "Creating higher order functions using Haskell", "body": "<p>Every function on a list can be written in this form:</p>\n\n<pre><code>f     [] = ...   -- also called the \"base case\"\nf (a:as) = ...   -- also called the recursive case\n</code></pre>\n\n<p>Let's apply this idea to writing a function which determine the number 3 appears in a list at least once:</p>\n\n<pre><code>hasA3 :: [Int] -&gt; Bool\nhasA3  []     = ...\nhasA3  (a:as) = ...\n</code></pre>\n\n<p>Clearly <code>hasA3 [] = False</code>. I'll leave you to figure out how to write the recursive case. Hint: the function might have to check if a == 3.</p>\n\n<p>Now let's write a function which determines if a list contains two or more threes. Again we start with the two cases:</p>\n\n<pre><code>hasTwo3s :: [Int] -&gt; Bool\nhasTwo3s []     = ...\nhasTwo3s (a:as) = ...\n</code></pre>\n\n<p>Again, the base case is easy. Hints for the recursive case: you might have to check if a == 3 and then you might want to use the <code>hasA3</code> function.</p>\n"}, {"comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1446055758, "post_id": 33386819, "comment_id": 54588340, "body": "Awesome :) I didn&#39;t think about short circuiting behavior of <code>||</code> when I first approached a <code>fold</code> based solution."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 1, "last_activity_date": 1446023151, "last_edit_date": 1495542217, "creation_date": 1446023151, "answer_id": 33386819, "question_id": 33383771, "link": "https://stackoverflow.com/questions/33383771/creating-higher-order-functions-using-haskell/33386819#33386819", "title": "Creating higher order functions using Haskell", "body": "<p>I will add to <a href=\"https://stackoverflow.com/a/33384233/3234959\">Daniel Jour's answer</a> starting from its final note:</p>\n\n<blockquote>\n  <p>One could rewrite this using higher order functions such as <code>fold</code>\n  though I'm not sure how one could implement the short circuit\n  behaviour (stopping as soon as two instances have been found) then.</p>\n</blockquote>\n\n<p>Let's transform the original code:</p>\n\n<pre><code>memtwice value list = scan value list False\n where scan _ [] _ = False\n       scan v (x:xs) True =\n         if v == x then True\n          else scan v xs True\n       scan v (x:xs) False =\n         scan v xs (v == x)\n</code></pre>\n\n<p>Moving to boolean operators we get:</p>\n\n<pre><code>memtwice value list = scan value list False\n where scan _ [] _ = False\n       scan v (x:xs) True  = v == x || scan v xs True\n       scan v (x:xs) False = scan v xs (v == x)\n</code></pre>\n\n<p>Now, the parameter <code>v</code> is always <code>value</code>, so let's remove the parameter.</p>\n\n<pre><code>memtwice value list = scan list False\n where scan [] _ = False\n       scan (x:xs) True  = value == x || scan xs True\n       scan (x:xs) False = scan xs (value == x)\n</code></pre>\n\n<p>Introducing an explicit lambda for the last argument (not really needed, but helps readability):</p>\n\n<pre><code>memtwice value list = scan list False\n where scan [] = (\\_ -&gt; False)\n       scan (x:xs) = \\found -&gt; if found \n                                 then value == x || scan xs True\n                                 else scan xs (value == x)\n</code></pre>\n\n<p>We now see that the last recursion pattern is a <code>foldr</code>: indeed we have a base-case definition for <code>scan []</code>, and the recursive case <code>scan (x:xs)</code> is defined only in terms of <code>scan xs</code>.</p>\n\n<pre><code>memtwice value list = foldr go (\\_ -&gt; False) list False\n where go x next = \\found -&gt; if found \n                                 then value == x || next True\n                                 else next (value == x)\n</code></pre>\n\n<p>Note that <code>foldr</code> seems to be called with <em>four</em> parameters. This is because <code>go x next</code> produces a function, hence <code>foldr go (\\_ -&gt; False) list</code> does as well. We can now revert the explicit lambda.</p>\n\n<pre><code>memtwice value list = foldr go (\\_ -&gt; False) list False\n where go x next True  = value == x || next True\n       go x next False = next (value == x)\n</code></pre>\n\n<p>Finally, note that since <code>||</code> has short-circuiting behaviour, we did achieve an equivalent <code>foldr</code> to the original code.</p>\n"}, {"comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1446055966, "post_id": 33389212, "comment_id": 54588475, "body": "This is clever :) Maybe you should add that the later code relies on lazy evaluation to achieve its short circuiting behavior."}], "tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": false, "score": 1, "last_activity_date": 1446029846, "creation_date": 1446029846, "answer_id": 33389212, "question_id": 33383771, "link": "https://stackoverflow.com/questions/33383771/creating-higher-order-functions-using-haskell/33389212#33389212", "title": "Creating higher order functions using Haskell", "body": "<p>There's an easier way really:</p>\n\n<pre><code>isMemberTwice needle haystack = n &gt;= 2\n  where n = length $ filter (== needle) haystack\n</code></pre>\n\n<p>However, the downside with this approach is that, if you pass it a really long list, it'll evaluate the entire list, which is unnecessary: you only need to see if there are <em>at least</em> 2 occurrences of <code>needle</code>.</p>\n\n<p>So a better solution is to avoid using <code>length</code> on the filtered list and instead just use pattern match: if it matches <code>(_:_:_)</code>, there must be at least 2 occurrences:</p>\n\n<pre><code>isMemberTwice needle haystack = case occurrences of (_:_:_) -&gt; True\n                                                    _       -&gt; False\n  where occurrences = filter (== needle) haystack\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 5496686, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10208069251712085/picture?type=large", "display_name": "Luis Fernando Pineda", "link": "https://stackoverflow.com/users/5496686/luis-fernando-pineda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 33384233, "answer_count": 4, "score": 2, "last_activity_date": 1446029846, "creation_date": 1446011260, "last_edit_date": 1446029489, "question_id": 33383771, "link": "https://stackoverflow.com/questions/33383771/creating-higher-order-functions-using-haskell", "title": "Creating higher order functions using Haskell", "body": "<p>I have recently been teaching myself Haskell, and one of my exercises was to implement a function that takes two arguments: a list and a single value. The function would check if the value is in the list twice or more. I cannot use the function element or member. </p>\n\n<p>I tried removing the values that are not equal to the value. Then checking for the size of the new list if its more than 1 then it outputs <code>True</code> if not it outputs <code>False</code>. I having problem trying to use a function inside a function. </p>\n\n<pre><code>remove2 val [] = []\nremove2 val (x:xs) = if ( not (x == val))\n                         then remove2 val xs \n                         else x:remove2 val xs\n\nisMemberTwice :: (Eq val) =&gt; val -&gt; [val] -&gt; Bool \nisMemberTwice val [] = False\nisMemberTwice val (x:xs) \n     | ( &gt;= (length (remove2 val [val])) 2) = True\n         | otherwise = a `isMemberTwice\u2019` xs\n</code></pre>\n"}, {"tags": ["list", "haskell", "list-comprehension"], "answers": [{"comments": [{"owner": {"reputation": 330, "user_id": 5021764, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dc1f8d5f08ef935d1f2a51db7cf02144?s=128&d=identicon&r=PG&f=1", "display_name": "the spectre", "link": "https://stackoverflow.com/users/5021764/the-spectre"}, "edited": false, "score": 0, "creation_date": 1446002919, "post_id": 33382324, "comment_id": 54558354, "body": "That&#39;s close, but I need a function that will 1) give me sublists where x1 = x2 = ... xn and 2) use different bounds for xn than for other xs. I.e., mofn 3 5 10 == [ [x1,x2,x3] | x1 &lt;- [1..5], x2 &lt;- [1..5], x3 &lt;- [1..10] ]."}, {"owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "reply_to_user": {"reputation": 330, "user_id": 5021764, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dc1f8d5f08ef935d1f2a51db7cf02144?s=128&d=identicon&r=PG&f=1", "display_name": "the spectre", "link": "https://stackoverflow.com/users/5021764/the-spectre"}, "edited": false, "score": 0, "creation_date": 1446003475, "post_id": 33382324, "comment_id": 54558484, "body": "But you want x1 &lt;= x2 &lt;= x3, so really mofn 3 5 10 == [ [x1,x2,x3] | x1 &lt;- [1..5], x2 &lt;- [x1..5], x3 &lt;- [x2..10] ]  - right?"}, {"owner": {"reputation": 330, "user_id": 5021764, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dc1f8d5f08ef935d1f2a51db7cf02144?s=128&d=identicon&r=PG&f=1", "display_name": "the spectre", "link": "https://stackoverflow.com/users/5021764/the-spectre"}, "edited": false, "score": 0, "creation_date": 1446004704, "post_id": 33382324, "comment_id": 54558747, "body": "In this specific case, the first value needs to be 2 for all sublists, although a solution that uses a first value of 1 for each should work as well, since changing the first value -- or removing the 1 -- should be trivial."}], "tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": true, "score": 4, "last_activity_date": 1446004076, "last_edit_date": 1446004076, "creation_date": 1446002245, "answer_id": 33382324, "question_id": 33382140, "link": "https://stackoverflow.com/questions/33382140/is-there-a-way-to-generate-a-series-of-list-comprehensions-programmatically-in-h/33382324#33382324", "title": "Is there a way to generate a series of list comprehensions programmatically in Haskell?", "body": "<p>Is this what you are looking for?</p>\n\n<pre><code>import Data.List (tails)\n\nmofn 0 xs = [ [] ]\nmofn m xs = [ y:zs | (y:ys) &lt;- tails xs, zs &lt;- mofn (m-1) ys ]\n</code></pre>\n\n<p>i.e. <code>mofn 3 [1..5]</code> is:</p>\n\n<pre><code>[[1,2,3],[1,2,4],[1,2,5],[1,3,4],[1,3,5],[1,4,5],[2,3,4],[2,3,5],[2,4,5],[3,4,5]]\n</code></pre>\n\n<p>The key is the <a href=\"http://hackage.haskell.org/package/base-4.8.1.0/docs/Data-List.html#v:tails\" rel=\"nofollow\"><strong>tails</strong></a> function which returns successive tails of a list.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Is this what you are looking for?</p>\n\n<pre><code>mofn' 1 lo hi bnd = [ [x] | x &lt;- [lo..bnd] ]\nmofn' k lo hi bnd = [ x:ys | x &lt;- [lo..hi], ys &lt;- mofn' (k-1) x hi bnd ]\n</code></pre>\n\n<p><code>mofn' 3 1 3 5</code> is:</p>\n\n<pre><code>[[1,1,1], [1,1,2], [1,1,3], [1,1,4], [1,1,5],\n [1,2,2], [1,2,3], [1,2,4], [1,2,5],\n [1,3,3], [1,3,4], [1,3,5],\n [2,2,2], [2,2,3], [2,2,4], [2,2,5],\n [2,3,3], [2,3,4], [2,3,5],\n [3,3,3], [3,3,4], [3,3,5]\n]\n</code></pre>\n"}], "owner": {"reputation": 330, "user_id": 5021764, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dc1f8d5f08ef935d1f2a51db7cf02144?s=128&d=identicon&r=PG&f=1", "display_name": "the spectre", "link": "https://stackoverflow.com/users/5021764/the-spectre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 33382324, "answer_count": 1, "score": 1, "last_activity_date": 1446004076, "creation_date": 1446000851, "last_edit_date": 1446001470, "question_id": 33382140, "link": "https://stackoverflow.com/questions/33382140/is-there-a-way-to-generate-a-series-of-list-comprehensions-programmatically-in-h", "title": "Is there a way to generate a series of list comprehensions programmatically in Haskell?", "body": "<p>In my ongoing attempt to get better at Haskell, I'm attempting to solve a problem where I'd like to create a series of list comprehensions of this form:</p>\n\n<pre><code>m2 = [[x1,x2] | x1 &lt;- [2..110], x2 &lt;- [x1..111]]\nm3 = [[x1,x2,x3] | x1 &lt;- [2..22], x2 &lt;- [x1..22], x3 &lt;- [x2..24]]\nm4 = [[x1,x2,x3,x4] | x1 &lt;- [2..10], x2 &lt;- [x1..10], x3 &lt;- [x2..10], x4 &lt;- [x3..12]]\n...\n</code></pre>\n\n<p>Where <em>x1 &lt;= x2 ... &lt;= xn</em>, the number following m is the length of the sublists, and the first <em>n - 1</em> terms are bounded by the same upper bound, while the nth term is bounded by some larger number.</p>\n\n<p>I could certainly write all of it out by hand, but that's not particularly good practice. I'm wondering if there's a way to generate these lists up to a particular maximum m value. My immediate thought was Template Haskell, but I don't know enough about it to determine whether it's usable. Is there some other solution that's escaping me?</p>\n\n<p>In pseudo-Haskell, what I'm looking for is some method that does something like:</p>\n\n<pre><code>mOfN n bound term = [ [x1..xn] | x1 &lt;- [2..bound], x2 &lt;- [x1..bound], ..., xn &lt;- [x(n-1)..term] ]\n</code></pre>\n\n<p>The main issue is that I can't figure out how I would dynamically create x1,x2, etc.</p>\n"}, {"tags": ["haskell", "llvm", "ghc", "llvm-ir"], "comments": [{"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 4, "creation_date": 1445990245, "post_id": 33380547, "comment_id": 54554988, "body": "Haskell is a much higher-level language than C, so the IR generated from C code is going to look much, much more like the original source than any Haskell code is. C&#39;s execution model is well-adapted to the sequential model low-level languages like LLVM IR and ASM use, but Haskell has lots more to consider: laziness, passing typeclass dictionaries, performing pattern-matching, handling runtime errors for partial functions, etc. Comparing the IR output might tell you <i>something</i>, but it won&#39;t say much about the subjective metric of &quot;complexity&quot;."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 7, "creation_date": 1445991068, "post_id": 33380547, "comment_id": 54555231, "body": "&quot;I get the following results, which seem to be completely useless... because they are obviously not true for this few lines of code.&quot; What makes this so obvious? Perhaps these results indicate that you should rethink what you &quot;know&quot;."}, {"owner": {"reputation": 10230, "user_id": 2427222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4h1qN.png?s=128&g=1", "display_name": "ymonad", "link": "https://stackoverflow.com/users/2427222/ymonad"}, "edited": false, "score": 3, "creation_date": 1445998227, "post_id": 33380547, "comment_id": 54557166, "body": "I think you should at least compare quick sort in C and quick sort in Haskell."}, {"owner": {"reputation": 418, "user_id": 583782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S54PA.png?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/583782/adam"}, "edited": false, "score": 0, "creation_date": 1446070495, "post_id": 33380547, "comment_id": 54596469, "body": "First of all thanks for your answers. My goal is still to have some analysis done on the source code (mainly for Haskell, but if there is something better for the others I&#39;m open to anything). If LLVM is not the right tool for that I can go with something other.  What do you suggest? I would like to get results like  - number of functions - number of function calls - number of variables (can be skipped for Haskell I guess) - etc.  Obviously I don&#39;t want to write a text parser from scratch, that is the reason I started playing with compilers."}, {"owner": {"reputation": 507, "user_id": 1699488, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a8324cbee30924bddc32c054d19b182e?s=128&d=identicon&r=PG", "display_name": "Lemming", "link": "https://stackoverflow.com/users/1699488/lemming"}, "edited": false, "score": 1, "creation_date": 1470126064, "post_id": 33380547, "comment_id": 64806997, "body": "LLVM is compiler &quot;back-end&quot;, thus I think it is not the right tool for comparing source codes. LLVM language files generated by GHC contain many auxiliary functions, thus they add several function names that are not present in the Haskell source file. For processing Haskell source you will be better off with a Haskell library like haskell-src-exts."}], "owner": {"reputation": 418, "user_id": 583782, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S54PA.png?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/583782/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 947, "favorite_count": 0, "answer_count": 0, "score": 7, "last_activity_date": 1446118177, "creation_date": 1445989938, "last_edit_date": 1446118177, "question_id": 33380547, "link": "https://stackoverflow.com/questions/33380547/generate-llvm-ir-from-haskell-code", "title": "Generate LLVM IR from Haskell code", "body": "<p>My goal is take source codes in different languages (mostly C, C++, Obj-C and Haskell) and tell every kind of statistics about them. (eg. number of variables, functions, memory allocations, complexity etc.) </p>\n\n<p>LLVM seemed to be a perfect tool for this, because I can generate the bitcode for these languages and with LLVM's customizable passes I can almost do anything. For the C family it works fine, take a C program (<code>test.c</code>) for example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main( )\n{\n    int num1, num2, sum;\n    printf(\"Enter two integers: \");\n    scanf(\"%d %d\", &amp;num1, &amp;num2); \n    sum = num1 + num2;\n    printf(\"Sum: %d\",sum);\n    return 0;\n}\n</code></pre>\n\n<p>Then I run:</p>\n\n<pre><code>clang -emit-llvm test.c -c -o test.bc\nopt -load [MY AWESOME PASS] [ARGS]\n</code></pre>\n\n<p>Voila, I have almost everything I need:</p>\n\n<pre><code>1 instcount - Number of Add insts\n 4 instcount - Number of Alloca insts\n 3 instcount - Number of Call insts\n 3 instcount - Number of Load insts\n 1 instcount - Number of Ret insts\n 2 instcount - Number of Store insts\n 1 instcount - Number of basic blocks\n14 instcount - Number of instructions (of all types)\n12 instcount - Number of memory instructions\n 1 instcount - Number of non-external functions\n</code></pre>\n\n<p>I would like to achieve the same with Haskell programs. Take <code>test.hs</code>:</p>\n\n<pre><code>module Test where\n\nquicksort [] = []\nquicksort (p:xs) = (quicksort lesser) ++ [p] ++ (quicksort greater)\n    where\n        lesser = filter (&lt; p) xs\n        greater = filter (&gt;= p) xs\n</code></pre>\n\n<p>However when I do </p>\n\n<pre><code>ghc -fllvm -keep-llvm-files -fforce-recomp test.hs\nopt -load [MY AWESOME PASS] [ARGS]\n</code></pre>\n\n<p>I get the following results, which seem to be completely useless for my purposes (mentioned at the beginning of this post), because they are obviously not true for these few lines of code. I guess it has something to do with GHC, because the newly created <code>.ll</code> file is 52Kb itself, while the <code>.ll</code> file for the C program is only 2Kb.</p>\n\n<pre><code>31 instcount - Number of Add insts\n  92 instcount - Number of Alloca insts\n   2 instcount - Number of And insts\n  30 instcount - Number of BitCast insts\n  24 instcount - Number of Br insts\n  22 instcount - Number of Call insts\n 109 instcount - Number of GetElementPtr insts\n  17 instcount - Number of ICmp insts\n  54 instcount - Number of IntToPtr insts\n 326 instcount - Number of Load insts\n  65 instcount - Number of PtrToInt insts\n  22 instcount - Number of Ret insts\n 206 instcount - Number of Store insts\n   8 instcount - Number of Sub insts\n  46 instcount - Number of basic blocks\n1008 instcount - Number of instructions (of all types)\n 755 instcount - Number of memory instructions\n  10 instcount - Number of non-external functions\n</code></pre>\n\n<p>My question is how should I proceed to be able to compare Haskell code with the others without having these huge numbers? Is it even possible? Should I continue using GHC for generating LLVM IR? What other tools should I use?</p>\n"}, {"tags": ["haskell", "functional-programming", "pointfree"], "answers": [{"comments": [{"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 3, "creation_date": 1445985340, "post_id": 33379660, "comment_id": 54553275, "body": "Of course, the parentheses here are unnecessary, and would probably be omitted in idiomatic Haskell, so the definition would just be <code>elem &#39;7&#39; . show</code>."}, {"owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "reply_to_user": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 0, "creation_date": 1445985380, "post_id": 33379660, "comment_id": 54553290, "body": "I agree. I wanted to make it 100% clear to the beginner what arguments the <code>.</code> operator is taking."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1445985848, "post_id": 33379660, "comment_id": 54553475, "body": "Valid, but it would have been better if you had simply explained the most basic rule: <i>infix operators \u1d00\u029f\u1d21\u1d00\u028f\ua731 have lower precedence than function application</i>."}, {"owner": {"reputation": 59, "user_id": 5495763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cf1c15207081427bf0986f40230cc5f?s=128&d=identicon&r=PG&f=1", "display_name": "Andalib Ali", "link": "https://stackoverflow.com/users/5495763/andalib-ali"}, "edited": false, "score": 0, "creation_date": 1445986089, "post_id": 33379660, "comment_id": 54553560, "body": "Haskell gave me an error, i think it is a type error."}, {"owner": {"reputation": 59, "user_id": 5495763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cf1c15207081427bf0986f40230cc5f?s=128&d=identicon&r=PG&f=1", "display_name": "Andalib Ali", "link": "https://stackoverflow.com/users/5495763/andalib-ali"}, "edited": false, "score": 0, "creation_date": 1445988444, "post_id": 33379660, "comment_id": 54554368, "body": "No instance for (Show a0) arising from a use of \u2018show\u2019     The type variable \u2018a0\u2019 is ambiguous     Relevant bindings include       digit7 :: a0 -&gt; Bool (bound at Hw#6.hs:1:1)     Note: there are several potential instances:       instance (Show a, Show b) =&gt; Show (Either a b)"}, {"owner": {"reputation": 59, "user_id": 5495763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cf1c15207081427bf0986f40230cc5f?s=128&d=identicon&r=PG&f=1", "display_name": "Andalib Ali", "link": "https://stackoverflow.com/users/5495763/andalib-ali"}, "edited": false, "score": 0, "creation_date": 1445992274, "post_id": 33379660, "comment_id": 54555561, "body": "when i write it like this: digit7 l = (elem &#39;7&#39; . show)l it works fine. but when i delete the l&#39;s it gives me an error. I think the problem is with show since it wants some argument. Is there anyway we could replace show with another prelude function?"}, {"owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 0, "creation_date": 1445994450, "post_id": 33379660, "comment_id": 54556170, "body": "Writing it without the two <code>l</code> works fine for me. I was able to compile and run the code."}, {"owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 0, "creation_date": 1445994513, "post_id": 33379660, "comment_id": 54556190, "body": "Debugging your type error is beyond my abilities. Can you open a new question, and post the <b>smallest piece of code</b> that can produce your error? Also include the error messages you get."}, {"owner": {"reputation": 59, "user_id": 5495763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cf1c15207081427bf0986f40230cc5f?s=128&d=identicon&r=PG&f=1", "display_name": "Andalib Ali", "link": "https://stackoverflow.com/users/5495763/andalib-ali"}, "edited": false, "score": 1, "creation_date": 1445996215, "post_id": 33379660, "comment_id": 54556659, "body": "I figured out what was wrong with the code. Everything you&#39;ve written was perfectly fine. i didn&#39;t write any type signatures since the \u201cshow\u201d function is super-polymorphic and it won\u2019t work right without you specifying the types.  all i had to write was digit7 :: Int -&gt; Bool."}], "tags": [], "owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "is_accepted": true, "score": 5, "last_activity_date": 1445985503, "last_edit_date": 1445985503, "creation_date": 1445985212, "answer_id": 33379660, "question_id": 33379473, "link": "https://stackoverflow.com/questions/33379473/changing-function-definition-to-point-free-style/33379660#33379660", "title": "Changing function definition to point-free style", "body": "<p>For the <code>digit7</code> function, you can convert your definition to point-free style by using functional composition:</p>\n\n<pre><code>digit7 = (elem '7') . (show)\n</code></pre>\n\n<p>This is because:</p>\n\n<pre><code>   digit7 l\n-&gt; ((elem '7') . (show)) l     By substitution\n-&gt; (elem '7') ((show) l)       By definition of (.)\n-&gt; elem '7' (show l)           By operator precedence\n</code></pre>\n\n<hr>\n\n<p>As for the <code>square7</code> function, I recommend using <code>dropWhile</code> and <code>head</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 5495763, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cf1c15207081427bf0986f40230cc5f?s=128&d=identicon&r=PG&f=1", "display_name": "Andalib Ali", "link": "https://stackoverflow.com/users/5495763/andalib-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 1, "accepted_answer_id": 33379660, "answer_count": 1, "score": 3, "last_activity_date": 1446016541, "creation_date": 1445984285, "last_edit_date": 1446016541, "question_id": 33379473, "link": "https://stackoverflow.com/questions/33379473/changing-function-definition-to-point-free-style", "title": "Changing function definition to point-free style", "body": "<p>I'm having trouble writing this code that my professor has given me:</p>\n\n<blockquote>\n  <p>Write a function called <code>digit7</code> which takes an <code>Int</code> and returns a <code>Bool</code> saying whether or not 7 is one of the digits. (Hint: use <code>show</code> to\n  turn the number into a list of characters.) Use <code>digit7</code> to create a\n  function of no parameters called <code>square7</code> which returns the smallest\n  number whose square contains a 7 as a digit.</p>\n</blockquote>\n\n<p>The code that I have is:</p>\n\n<pre><code>digit7 l = elem '7' (show l)\n</code></pre>\n\n<p>This works but, I need the code written in a point-free style. I am also having trouble figuring out the <code>square7</code> function as well.</p>\n"}, {"tags": ["haskell", "infinite-loop", "ghci"], "comments": [{"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 1, "creation_date": 1445982990, "post_id": 33378977, "comment_id": 54552348, "body": "Tip: <code>lssToLs</code> is identical to the standard <code>concat</code> function. Also, there&#39;s a function called <code>concatMap</code>. None of which has anything to do with your bug; it&#39;s just a passing comment."}, {"owner": {"reputation": 153, "user_id": 5086668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954427c2d265581cf8ebab69d807ed76?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5086668/james"}, "reply_to_user": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 0, "creation_date": 1445983736, "post_id": 33378977, "comment_id": 54552656, "body": "Thank you, I tested the fixed version as alluded  to in my comments on the answer given by @MathematicalOrchid with concat, and it does indeed work the same. Forgot to check the prelude functions for that one."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1445991538, "post_id": 33378977, "comment_id": 54555353, "body": "See also: <a href=\"http://stackoverflow.com/questions/9732084/how-do-you-represent-a-graph-in-haskell\">graph representation</a>, <a href=\"http://stackoverflow.com/questions/19355772/is-it-ever-possible-to-detect-sharing-in-haskell\">detecting sharing</a>, <a href=\"http://stackoverflow.com/questions/28243314/is-equality-testing-possible-between-two-infinite-data-structure-in-haskell\">equality-testing on infinite structures</a>."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5086668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954427c2d265581cf8ebab69d807ed76?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5086668/james"}, "edited": false, "score": 0, "creation_date": 1445983479, "post_id": 33379170, "comment_id": 54552544, "body": "I thought that it would test the data type&#39;s constructor to see if they are equal. But then I suppose that means that it will expand the node list&#39;s elements constructors. Hence the loop. I think I will test if the Char parts of node are equal. Also sorry I did say in the question that the data type represents a directed graph. And that the deep traverse is designed to move through the graph and backtrack when it reaches a dead end, stopping when it gets back to the starting node."}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "reply_to_user": {"reputation": 153, "user_id": 5086668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954427c2d265581cf8ebab69d807ed76?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5086668/james"}, "edited": false, "score": 0, "creation_date": 1445983533, "post_id": 33379170, "comment_id": 54552563, "body": "If the character labels are supposed to be unique then yes, this is the correct solution."}, {"owner": {"reputation": 153, "user_id": 5086668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954427c2d265581cf8ebab69d807ed76?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5086668/james"}, "edited": false, "score": 0, "creation_date": 1445983892, "post_id": 33379170, "comment_id": 54552713, "body": "Yes, I have notice this issue. The work is for University, so I shall have to ask my lecturer if this is the case. Although, as the question states the Char value in the node declarations names I would imagine this to be the case."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 153, "user_id": 5086668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954427c2d265581cf8ebab69d807ed76?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5086668/james"}, "edited": false, "score": 0, "creation_date": 1445992609, "post_id": 33379170, "comment_id": 54555657, "body": "@James &quot;I thought it [<code>(==)</code>] would test the data type&#39;s constructor to see if they are equal.&quot; But your data type only has one constructor, hence any two values have the same constructor; so I don&#39;t believe that&#39;s what you thought!"}, {"owner": {"reputation": 153, "user_id": 5086668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954427c2d265581cf8ebab69d807ed76?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5086668/james"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1445993245, "post_id": 33379170, "comment_id": 54555839, "body": "@DanielWagner I meant the constructor for the constant, not the type. e.g. <code>Node &#39;A&#39; [nodeB, nodeC, nodeD]</code> not <code>Node Char [Node]</code>"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 153, "user_id": 5086668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954427c2d265581cf8ebab69d807ed76?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5086668/james"}, "edited": false, "score": 0, "creation_date": 1445993671, "post_id": 33379170, "comment_id": 54555951, "body": "@James Okay, then it seems to be a terminology issue. &quot;Constructor&quot; specifically means only the &quot;tag&quot; part of the expression -- e.g. <code>Node</code> is a constructor (for things of type <code>Node</code>), <code>&#39;A&#39;</code> is a constructor (for things of type <code>Char</code>, <code>[]</code> and <code>(:)</code> are constructors (for things of type <code>[a]</code> for some <code>a</code>), and so on. A thing like <code>Node &#39;A&#39; [nodeB, nodeC, nodeD]</code> would instead be called a &quot;term&quot; or an &quot;expression&quot;; in some cases you might also hear it called a &quot;value&quot;. Also, you&#39;re right that it will inspect the whole value -- and that is the problem, since the value is an infinite one."}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": true, "score": 3, "last_activity_date": 1445982854, "creation_date": 1445982854, "answer_id": 33379170, "question_id": 33378977, "link": "https://stackoverflow.com/questions/33378977/infinite-loop-haskell/33379170#33379170", "title": "Infinite Loop Haskell", "body": "<p>After staring at your code for ages trying to figure out what it's supposed to do and why it's getting stuck, I think I realise the problem.</p>\n\n<p><code>nodeF</code> points back to <code>nodeA</code>. (I only just realised that!) It seems you're trying to use the <code>==</code> operator to figure out when you arrive back at a node you already looked that. That won't work.</p>\n\n<p>When you say <code>node1 == node2</code>, the <code>==</code> operator will traverse <em>the entire tree</em> to see whether the two values are equal. If they <em>are</em> equal, and this structure contains an infinite loop... well, then your code loops forever! Try it. If you ask <code>nodeA == nodeA</code>, I think you'll find it <em>never</em> returns. There's your bug.</p>\n\n<p>The only way to fix this is to put a genuinely <em>unique</em> label on every <code>Node</code>, and compare only the labels. You can't check whether two variables \"point to\" the same thing in Haskell; you can only compare whether two structures have the same value, which means traversing them completely.</p>\n"}], "owner": {"reputation": 153, "user_id": 5086668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/954427c2d265581cf8ebab69d807ed76?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/5086668/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 33379170, "answer_count": 1, "score": 2, "last_activity_date": 1445982854, "creation_date": 1445982015, "question_id": 33378977, "link": "https://stackoverflow.com/questions/33378977/infinite-loop-haskell", "title": "Infinite Loop Haskell", "body": "<pre><code>data Node = Node Char [Node] deriving(Eq)\n\nnodeA = Node 'A' [nodeB, nodeC, nodeD]\nnodeB = Node 'B' []\nnodeC = Node 'C' [nodeE, nodeF]\nnodeD = Node 'D' []\nnodeE = Node 'E' [nodeB]\nnodeF = Node 'F' [nodeA]\n\ndeepTraverse :: Node -&gt; [Char]\ndeepTraverse (Node c []) = [c]\ndeepTraverse (Node c ns) = c:(map (\\(Node cl nsl)-&gt;cl) (buildNodeList (Node c ns) ns))\n             where lssToLs lss = foldr (++) [] lss\n                   buildNodeList nw nsw = lssToLs (map (\\(Node cl nsl)-&gt;(if (Node cl nsl) == nw then [(Node cl nsl)]\n                                                                         else ((Node cl nsl):(buildNodeList nw nsl)))) nsw)\n\nmain :: IO()\nmain = putStrLn (show (deepTraverse nodeA))\n</code></pre>\n\n<p>Whenever I call <code>deepTraverse nodeA</code> it loops gets hung up. In ghci it does spit out:</p>\n\n<pre><code>Main*&gt; \"ABCEBF\n</code></pre>\n\n<p>Leading me to suspect the \"then\" part of the if. I have been banging my head against this problem for a while, any help would be appreciated.</p>\n"}, {"tags": ["haskell", "pattern-matching"], "comments": [{"owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "edited": false, "score": 0, "creation_date": 1445973809, "post_id": 33376758, "comment_id": 54547378, "body": "Are you trying to type this in to ghci?"}, {"owner": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "reply_to_user": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "edited": false, "score": 0, "creation_date": 1445973858, "post_id": 33376758, "comment_id": 54547406, "body": "No i typed this into a file exactly the way as shown above.Any idea why I&#39;m getting this error?"}, {"owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "edited": false, "score": 2, "creation_date": 1445974007, "post_id": 33376758, "comment_id": 54547488, "body": "I get &quot;parse error in pattern: function&quot; , which I think is because you need brackets, as in &quot;function (x:[]) = &quot;Singlet&quot;"}, {"owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "edited": false, "score": 0, "creation_date": 1445974071, "post_id": 33376758, "comment_id": 54547526, "body": "Also, &quot;x:[]&quot; is equivalent to &quot;[x]&quot;, and &quot;x:y:[]&quot; is equivalent to &quot;[x,y]&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "is_accepted": false, "score": 8, "last_activity_date": 1445974455, "last_edit_date": 1445974455, "creation_date": 1445974040, "answer_id": 33376854, "question_id": 33376758, "link": "https://stackoverflow.com/questions/33376758/parse-error-for-function-with-uses-pattern-matching-for-lists/33376854#33376854", "title": "Parse error (=), for function with uses pattern matching for lists?", "body": "<p>The error message I get is a bit different, but at least one thing that's wrong with the code is that it lacks parentheses around the various list patterns:</p>\n\n<pre><code>list (x:xs) = \"this letter is \" ++ [x] ++ \" and \" ++ function xs\n    where function [] = \"Empty\"\n          function (x:[]) = \"Singlet\"\n          function (x:y:[]) = \"Double\"\n          function (x:y:xs) = \"LARGE list!\"\n</code></pre>\n\n<p>This compiles and works:</p>\n\n<pre><code>&gt; list \"foo\"\n\"this letter is f and Double\"\n&gt; list \"barbaz\"\n\"this letter is b and LARGE list!\"\n</code></pre>\n\n<p>It's incomplete, though, because it doesn't match empty lists.</p>\n\n<p>A more complete, and perhaps also more idiomatic version would be something like this:</p>\n\n<pre><code>list :: String -&gt; String\nlist [] = \"the list is empty\"\nlist (x:xs) = \"this letter is \" ++ [x] ++ \" and \" ++ function xs\n    where function [] = \"Empty\"\n          function [_] = \"Singlet\"\n          function [_,_] = \"Double\"\n          function (_:_:_) = \"LARGE list!\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "is_accepted": false, "score": 6, "last_activity_date": 1445982666, "creation_date": 1445982666, "answer_id": 33379139, "question_id": 33376758, "link": "https://stackoverflow.com/questions/33376758/parse-error-for-function-with-uses-pattern-matching-for-lists/33379139#33379139", "title": "Parse error (=), for function with uses pattern matching for lists?", "body": "<p>The error you are seeing is because your code contains tab characters. Your editor is set to display tabs as four spaces, which makes its indentation <em>look</em> correct, while Haskell counts them as eight, giving</p>\n\n<pre><code>list (x:xs) = \"this letter is \" ++ [x] ++ \" and \" ++ function xs\n    where  function [] = \"Empty\"\n               function x:[] = \"Singlet\"\n               function x:y:[] = \"Double\"\n                   function x:y:xs = \"LARGE list!\"\n</code></pre>\n\n<p>This error is particularly insidious because stackoverflow markdown <em>also</em> interprets tab characters as four spaces, meaning your code looked correctly indented to <em>us</em> as well, and even copies and pastes that way. Fortunately it <em>is</em> possible to check via the edit button if you are careful.</p>\n\n<p>Solution: Avoid using tabs in Haskell code unless you are <em>sure</em> how to avoid the pitfalls.  And if you are ever going to post code on stackoverflow, avoid them anyway.</p>\n\n<p>(The other answer has explained some things that need correcting after fixing the indentation.)</p>\n"}], "owner": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1445982666, "creation_date": 1445973634, "last_edit_date": 1445974560, "question_id": 33376758, "link": "https://stackoverflow.com/questions/33376758/parse-error-for-function-with-uses-pattern-matching-for-lists", "title": "Parse error (=), for function with uses pattern matching for lists?", "body": "<pre><code>list (x:xs) = \"this letter is \" ++ [x] ++ \" and \" ++ function xs\n    where  function [] = \"Empty\"\n           function x:[] = \"Singlet\"\n           function x:y:[] = \"Double\"\n           function x:y:xs = \"LARGE list!\"\n</code></pre>\n\n<p>Any idea why this function will not work I'm getting </p>\n\n<blockquote>\n  <p>parse error on input \u2018=\u2019</p>\n</blockquote>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 46235, "user_id": 2541573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z1qtP.png?s=128&g=1", "display_name": "jub0bs", "link": "https://stackoverflow.com/users/2541573/jub0bs"}, "edited": false, "score": 3, "creation_date": 1445972576, "post_id": 33376330, "comment_id": 54546742, "body": "Haskell isn&#39;t Python. The short-circuit operator for Boolean OR is <code>||</code>, not <code>or</code> (which is a function)."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1445974700, "post_id": 33376330, "comment_id": 54547862, "body": "Even if we write <code>(isNothing n) or (n &lt; 0)</code> as  <code>(isNothing n) || (n &lt; 0)</code> this is still wrong: the first part requires <code>n</code> to be a <code>Maybe something</code> while the second one requires <code>n</code> to be a number e.g. <code>Int</code>. These two types are not compatible. I&#39;d avoid using <code>isNothing</code> and use pattern matching e.g. <code>getIntAtIndex Nothing [] = ...</code>. I must add that I can&#39;t figure out why one would want to pass <code>Maybe Int</code> for the index: I&#39;d use a plain <code>Int</code>."}, {"owner": {"reputation": 1467, "user_id": 3029422, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/13887984efe106e46fbeb35bcb56f134?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut", "link": "https://stackoverflow.com/users/3029422/ionut"}, "edited": false, "score": 0, "creation_date": 1445976120, "post_id": 33376330, "comment_id": 54548699, "body": "thanks, for your input"}], "answers": [{"tags": [], "owner": {"reputation": 6415, "user_id": 1416525, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f23f148b7241e345a61d193ed205685?s=128&d=identicon&r=PG", "display_name": "cdk", "link": "https://stackoverflow.com/users/1416525/cdk"}, "is_accepted": true, "score": 2, "last_activity_date": 1445972449, "creation_date": 1445972449, "answer_id": 33376395, "question_id": 33376330, "link": "https://stackoverflow.com/questions/33376330/get-the-element-at-index-elemindex-in-a-list/33376395#33376395", "title": "Get the element at index &quot;elemIndex&quot; in a list", "body": "<p>If you want to use <code>or</code> as an infix operator, you need to surround it in backticks. GHC thinks <code>isNothing n</code> is being applied to the function <code>or</code>.</p>\n\n<p>Also, you probably want <code>(||) :: Bool -&gt; Bool -&gt; Bool</code> not <code>or :: [Bool] -&gt; Bool</code></p>\n"}], "owner": {"reputation": 1467, "user_id": 3029422, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/13887984efe106e46fbeb35bcb56f134?s=128&d=identicon&r=PG&f=1", "display_name": "Ionut", "link": "https://stackoverflow.com/users/3029422/ionut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1591, "favorite_count": 0, "accepted_answer_id": 33376395, "answer_count": 1, "score": 0, "last_activity_date": 1445972449, "creation_date": 1445972235, "question_id": 33376330, "link": "https://stackoverflow.com/questions/33376330/get-the-element-at-index-elemindex-in-a-list", "title": "Get the element at index &quot;elemIndex&quot; in a list", "body": "<p>Basically I'm trying to get the n'th element in a list using the value from the <code>elementIndex</code> function.\nHere is my code:</p>\n\n<pre><code>import Data.List\nimport Data.Maybe\n\nnames = [\"Molly\", \"Jack\", \"Perrie\", \"Adele\", \"Jake\", \"Lily\", \"Lawrence\", \"Ethan\"] :: [String]\nages = [5,1,8,9,6,4,7,3] :: [Int]\n\ngetAge :: String -&gt; [String] -&gt; [Int] -&gt; Maybe Int\ngetAge name names ages = getIntAtIndex index ages\n    where\n        index = elemIndex name names\n\ngetIntAtIndex :: Maybe Int -&gt; [Int] -&gt; Maybe Int\ngetIntAtIndex n [] = Nothing\ngetIntAtIndex n (x:xs)\n        | (isNothing n) or (n &lt; 0) = Nothing\n        | n == 0 = Just x\n        | otherwise = getIntAtIndex (n-1) xs\n</code></pre>\n\n<p><code>getAge</code> searches a <code>name</code> in <code>names</code> and returns the age from the same <code>index</code> in <code>ages</code>.\nbut when I try to load the file in <code>ghci</code> I get:</p>\n\n<pre><code>Prelude&gt; :l test.hs\n[1 of 1] Compiling Main             ( test.hs, interpreted )\n\ntest.hs:15:11:\n    Couldn't match expected type `(t0 Bool -&gt; Bool) -&gt; Bool -&gt; Bool'\n                with actual type `Bool'\n    The function `isNothing' is applied to three arguments,\n    but its type `Maybe Int -&gt; Bool' has only one\n    In the expression: (isNothing n) or (n &lt; 0)\n    In a stmt of a pattern guard for\n                   an equation for `getIntAtIndex':\n      (isNothing n) or (n &lt; 0)\nFailed, modules loaded: none.\n</code></pre>\n\n<p>I've already tried the <code>!! operator</code> but it only accepts Int, so I added the function <code>getIntAtIndex</code> in order to acheive this.\nCould someone point me where is the error? Because I can't see it.</p>\n\n<p>I would expect <code>getAge \"Jack\" names</code> to return <code>1</code> and <code>getAge \"Bill\" names</code> to return <code>Nothing</code></p>\n\n<p>Thanks</p>\n"}, {"tags": ["haskell", "hugs"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 5, "creation_date": 1445971308, "post_id": 33375873, "comment_id": 54546029, "body": "The hugs error is weird.  ghci makes sense, you have only written a type signature for <code>test</code>, it needs a definition also, for example <code>test xs = (xs, xs)</code>  (which is probably not what you were going for, but it will typecheck at least)"}, {"owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1445974325, "post_id": 33375873, "comment_id": 54547660, "body": "@luqui You should make your comment as an answer."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 4, "creation_date": 1445976221, "post_id": 33375873, "comment_id": 54548757, "body": "Hugs hasn&#39;t been maintained since 2006 or so. Very few people use it any more, and you probably shouldn&#39;t either."}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 2, "creation_date": 1445983458, "post_id": 33375873, "comment_id": 54552536, "body": "I&#39;m going to make a totally unsubstantiated <i>guess</i> that your source code file starts with a Unicode byte-order-mark, which Hugs has no idea what the hell that is, and displays it as &quot;?&quot;."}, {"owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "edited": false, "score": 1, "creation_date": 1446002676, "post_id": 33375873, "comment_id": 54558276, "body": "I installed hugs just to try to reproduce this excellent error message, but all I got was a boring <code>ERROR &quot;test.hs&quot;:1 - Missing binding for variable &quot;test&quot; in type signature</code>. I suspect your file is not really just one line. (Or hugs is somehow reading uninitialized memory past the end of the file?)"}, {"owner": {"reputation": 1025, "user_id": 1439629, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4cfce72158cd5741f0a48e67483b85e8?s=128&d=identicon&r=PG", "display_name": "Hamish", "link": "https://stackoverflow.com/users/1439629/hamish"}, "edited": false, "score": 1, "creation_date": 1447257036, "post_id": 33375873, "comment_id": 55081941, "body": "I see this has been basically answered, but what line is test on here? Line 3? or is line 3 the last line in your file?"}], "owner": {"reputation": 2347, "user_id": 2938127, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/46af15aa6ce5710bd2668c445f746461?s=128&d=identicon&r=PG&f=1", "display_name": "abc32112", "link": "https://stackoverflow.com/users/2938127/abc32112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 690, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1445973012, "creation_date": 1445970712, "last_edit_date": 1445973012, "question_id": 33375873, "link": "https://stackoverflow.com/questions/33375873/undefined-data-constructor-in-hugs-intepreter", "title": "Undefined data constructor &quot;?&quot; in Hugs intepreter", "body": "<p>Strange error when attempting to load file into hugs:    </p>\n\n<pre><code>Hugs&gt; :l test.hs\nERROR \"test.hs\":3 - Undefined data constructor \"?\"\n</code></pre>\n\n<p>Full content of file (yes, one line):</p>\n\n<pre><code>test :: [a]\u00a0-&gt; ([a],[a])\n</code></pre>\n\n<p>Can anyone enlighten me?</p>\n\n<hr>\n\n<p>Note: Attempting to load the same file in ghci doesn't work either, but for reasons that <em>make sense</em>:</p>\n\n<pre><code>Prelude&gt; :r\n[1 of 1] Compiling Main             ( test.hs, interpreted )\n\ntest.hs:1:1:\nThe type signature for \u2018test\u2019 lacks an accompanying binding\nFailed, modules loaded: none.\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 2, "creation_date": 1445970555, "post_id": 33375640, "comment_id": 54545574, "body": "Another subtlety worth mentioning: <code>fmap</code> and <code>(&lt;$&gt;)</code> have different fixities, so there still may be situations where putting <code>fmap</code> infix is different than putting <code>(&lt;$&gt;)</code> infix."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1445976836, "post_id": 33375640, "comment_id": 54549080, "body": "@DanielWagner, pre-AMP it would have made a lot of sense to give <code>liftM</code> and <code>ap</code> fixity declarations. It&#39;s not worth it now."}, {"owner": {"reputation": 672, "user_id": 2224973, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/864d8f904b79e9773eee4e6597deac7a?s=128&d=identicon&r=PG", "display_name": "Cut&#250; Chique&#241;o", "link": "https://stackoverflow.com/users/2224973/cut%c3%ba-chique%c3%b1o"}, "edited": false, "score": 1, "creation_date": 1446014979, "post_id": 33375640, "comment_id": 54562072, "body": "Ok, now I get my error in mind. I kind of considered data constructors as just container names for value(s) and there for didn&#39;t think about brackets. But data constructors are functions on it&#39;s own aren&#39;t they?"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1446022022, "post_id": 33375640, "comment_id": 54565227, "body": "Yes, data constructors are functions."}], "tags": [], "owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "is_accepted": true, "score": 10, "last_activity_date": 1445970245, "last_edit_date": 1445970245, "creation_date": 1445969914, "answer_id": 33375640, "question_id": 33375434, "link": "https://stackoverflow.com/questions/33375434/difference-in-and-fmap/33375640#33375640", "title": "Difference in &lt;$&gt; and fmap", "body": "<p>Yes <code>&lt;$&gt;</code> and <code>fmap</code> are the same thing but you are using them in different expressions.</p>\n\n<pre><code>(++) &lt;$&gt; Just \"Hallo\" &lt;*&gt; Just \"Du\"\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>(++) `fmap` Just \"Hallo\" &lt;*&gt; Just \"Du\"\n</code></pre>\n\n<p>moving <code>fmap</code> in infix position yields:</p>\n\n<pre><code>fmap (++) (Just \"Hallo\") &lt;*&gt; Just \"Du\"\n</code></pre>\n\n<p>This is due to operator precedence and why <code>&lt;$&gt;</code> is more readable most of the time.</p>\n\n<p>Note that in your expression:</p>\n\n<pre><code>fmap (++) Just \"Hallo\" &lt;*&gt; Just \"Du\"\n</code></pre>\n\n<p>you are passing <code>3</code> arguments to <code>fmap</code> (<code>(++)</code>, <code>Just</code> and <code>\"Hallo\"</code>),\nso the type doesn't match what <code>&lt;*&gt;</code> wants.</p>\n\n<p>You want to pass only two arguments: <code>(++)</code> and <code>Just \"Hallo\"</code>.</p>\n"}], "owner": {"reputation": 672, "user_id": 2224973, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/864d8f904b79e9773eee4e6597deac7a?s=128&d=identicon&r=PG", "display_name": "Cut&#250; Chique&#241;o", "link": "https://stackoverflow.com/users/2224973/cut%c3%ba-chique%c3%b1o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 0, "accepted_answer_id": 33375640, "answer_count": 1, "score": 2, "last_activity_date": 1445972337, "creation_date": 1445969238, "last_edit_date": 1445972337, "question_id": 33375434, "link": "https://stackoverflow.com/questions/33375434/difference-in-and-fmap", "title": "Difference in &lt;$&gt; and fmap", "body": "<p>I have a line of code:</p>\n\n<pre><code>(++) &lt;$&gt; Just \"Hallo\" &lt;*&gt; Just \"Du\"\n</code></pre>\n\n<p>which outputs <code>Just \"HalloDu\"</code></p>\n\n<p>In \"Learn You a Haskell for Great Good\" I learned that <code>&lt;$&gt;</code> and <code>fmap</code> are the same and indeed I ghci outputs the same type signature to me. Nevertheless, when I write: </p>\n\n<pre><code>fmap (++) Just \"Hallo\" &lt;*&gt; Just \"Du\"\n</code></pre>\n\n<p>Where is the difference?</p>\n"}, {"tags": ["haskell", "emacs", "code-folding"], "answers": [{"tags": [], "owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "is_accepted": false, "score": 1, "last_activity_date": 1445974506, "last_edit_date": 1445974506, "creation_date": 1445973902, "answer_id": 33376820, "question_id": 33375294, "link": "https://stackoverflow.com/questions/33375294/folding-haskell-code-in-emacs/33376820#33376820", "title": "Folding Haskell code in Emacs", "body": "<p>I'm not sure how up to date is the Haskell wiki. I prefer <a href=\"https://github.com/mrkkrp/vimish-fold/\" rel=\"nofollow noreferrer\">vimish-fold</a> for folding Haskell code in Emacs. For folding all you have to is, select your code and then apply this function <code>vimish-fold</code>. For unfolding, go to the beginning of the folded code and run the command <code>vimish-fold-unfold</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/KZsRa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KZsRa.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 440, "user_id": 1606510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa28476ad9d46bbb1f2ac2fd7283f69?s=128&d=identicon&r=PG", "display_name": "Mekeor Melire", "link": "https://stackoverflow.com/users/1606510/mekeor-melire"}, "is_accepted": false, "score": 0, "last_activity_date": 1468525018, "creation_date": 1468525018, "answer_id": 38382833, "question_id": 33375294, "link": "https://stackoverflow.com/questions/33375294/folding-haskell-code-in-emacs/38382833#38382833", "title": "Folding Haskell code in Emacs", "body": "<p>You can use Emacs' <strong>outline-mode</strong> as described <a href=\"http://blog.bezirg.net/posts/2013-08-01-outlining-haskell-code-with-emacs.html\" rel=\"nofollow\">here</a>. Although the article is from 2013, the solution just worked fine for me.</p>\n\n<p>One thing the article doesn't mention is that you can use <code>M-x package-install RET outline-magic</code> in order to install it, instead of doing so manually. (Because Emacs' package manager didn't exist back in 2013.)</p>\n"}], "owner": {"reputation": 18456, "user_id": 1198559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/bOjLe.png?s=128&g=1", "display_name": "jhegedus", "link": "https://stackoverflow.com/users/1198559/jhegedus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1468525018, "creation_date": 1445968754, "question_id": 33375294, "link": "https://stackoverflow.com/questions/33375294/folding-haskell-code-in-emacs", "title": "Folding Haskell code in Emacs", "body": "<p>I was following <a href=\"https://wiki.haskell.org/Emacs/Code_folding\" rel=\"nofollow\">this</a> guide to set up code folding for Emacs in Haskell. </p>\n\n<p>But it does not seem to work: when I do what says in that guide and I try to fold code with the keybindings then it just does not work, nothing happens. </p>\n\n<p>If you use Emacs to fold Haskell code could you please share the secret how you do it ? </p>\n\n<p>Haskell folding works quite nicely with vim, <code>:set foldmethod=indent</code>, then I can just do <code>zc</code> <code>zo</code> and Haskell code folds in and out, now, how can I do something like that in Emacs ? </p>\n\n<p>I have spent already a few hours trying to figure that out but I failed, someone please enlighten me.</p>\n"}, {"tags": ["haskell", "plot", "installation", "cabal-install", "hmatrix"], "comments": [{"owner": {"reputation": 2152, "user_id": 1103600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7830fb399137c319ff68dca3e3b6f7e2?s=128&d=identicon&r=PG", "display_name": "Arnon", "link": "https://stackoverflow.com/users/1103600/arnon"}, "edited": false, "score": 0, "creation_date": 1445967107, "post_id": 33374575, "comment_id": 54543583, "body": "Did you install both together, or did you re-install <code>hmatrix</code>?"}, {"owner": {"reputation": 2525, "user_id": 3499258, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/mSNw2.jpg?s=128&g=1", "display_name": "theideasmith", "link": "https://stackoverflow.com/users/3499258/theideasmith"}, "reply_to_user": {"reputation": 2152, "user_id": 1103600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7830fb399137c319ff68dca3e3b6f7e2?s=128&d=identicon&r=PG", "display_name": "Arnon", "link": "https://stackoverflow.com/users/1103600/arnon"}, "edited": false, "score": 0, "creation_date": 1445967578, "post_id": 33374575, "comment_id": 54543851, "body": "I reinstalled just <code>hmatrix</code>"}, {"owner": {"reputation": 2152, "user_id": 1103600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7830fb399137c319ff68dca3e3b6f7e2?s=128&d=identicon&r=PG", "display_name": "Arnon", "link": "https://stackoverflow.com/users/1103600/arnon"}, "edited": false, "score": 0, "creation_date": 1445967675, "post_id": 33374575, "comment_id": 54543911, "body": "Try opening a new sandbox (<code>cabal sandbox init</code>) and then running <code>cabal install hmatrix-0.17.0.1 plot-0.2.3.4</code>...."}], "answers": [{"tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": false, "score": 2, "last_activity_date": 1445967916, "creation_date": 1445967916, "answer_id": 33375003, "question_id": 33374575, "link": "https://stackoverflow.com/questions/33374575/cannot-successfully-install-plot-haskell/33375003#33375003", "title": "Cannot successfully install plot Haskell", "body": "<p>Are you managing the project with <code>cabal</code>, or are you just installing into the global package space?</p>\n\n<p>I would move to either using <code>cabal</code> or <code>stack</code> to manage the dependencies.\nFWIW I've verified that <code>plot-0.2.3.4</code> will compile with <code>hmatrix-0.16.1.5</code> using the stack resolver <code>lts-3.7</code> so I don't think it's a problem with <code>hmatrix</code>.</p>\n\n<p>If you are using cabal, post your cabal file and we can figure out how to make it work. Otherwise, I would recommend creating a stack project, eg.</p>\n\n<ul>\n<li>run <code>stack new project-name</code></li>\n<li>edit <code>project-name.cabal</code> and add <code>plot</code> to the <code>build-depends:</code> fields</li>\n<li>run <code>stack build</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1601, "user_id": 1205702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2fd2313df8f6f65266cf7a4f1979b?s=128&d=identicon&r=PG", "display_name": "bitemyapp", "link": "https://stackoverflow.com/users/1205702/bitemyapp"}, "is_accepted": false, "score": 0, "last_activity_date": 1445968689, "creation_date": 1445968689, "answer_id": 33375265, "question_id": 33374575, "link": "https://stackoverflow.com/questions/33374575/cannot-successfully-install-plot-haskell/33375265#33375265", "title": "Cannot successfully install plot Haskell", "body": "<pre><code>   Configuring hmatrix-0.16.1.5...\n    setup-Simple-Cabal-1.22.4.0-x86_64-linux-ghc-7.10.2: Missing dependencies on\n    foreign libraries:\n    * Missing C libraries: blas, lapack\n</code></pre>\n\n<p>Found the libblas library I needed via:</p>\n\n<pre><code>sudo apt-cache search blas | grep dev\n</code></pre>\n\n<p>from: <a href=\"https://github.com/albertoruiz/hmatrix/blob/master/INSTALL.md#linux\" rel=\"nofollow\">https://github.com/albertoruiz/hmatrix/blob/master/INSTALL.md#linux</a></p>\n\n<pre><code>sudo apt-get install libblas-dev libgsl0-dev liblapack-dev libatlas-base-dev\n\nsetup: The pkg-config package 'cairo' version &gt;=1.2.0 is required but it could\nnot be found.\n</code></pre>\n\n<p>After some putzing around on the wiki pages for gtk2hs</p>\n\n<pre><code>sudo apt-get install libghc-gtk-dev\n</code></pre>\n\n<p>Now it should install successfully.</p>\n\n<pre><code>stack install plot\n</code></pre>\n\n<p>Intermediate errors are from me re-attempting <code>stack install plot</code>. These instructions assume Ubuntu 14.04 but you can translate what packages you need to Mac OS X / Windows.</p>\n\n<p>As the other poster said, this was with the 0.16 version of hmatrix.</p>\n"}], "owner": {"reputation": 2525, "user_id": 3499258, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/mSNw2.jpg?s=128&g=1", "display_name": "theideasmith", "link": "https://stackoverflow.com/users/3499258/theideasmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1445968689, "creation_date": 1445966583, "question_id": 33374575, "link": "https://stackoverflow.com/questions/33374575/cannot-successfully-install-plot-haskell", "title": "Cannot successfully install plot Haskell", "body": "<p>I'd like to do some graphing in my Haskell program, but when I try to install plot I get the following error. </p>\n\n<pre><code>Preprocessing library plot-0.2.3.4...\n\nlib/Graphics/Rendering/Plot/Figure/Simple.hs:37:8:\n    Could not find module \u2018Numeric.Container\u2019\n    Use -v to see a list of the files searched for.\n\nlib/Graphics/Rendering/Plot/Types.hs:25:8:\n    Could not find module \u2018Data.Packed.Vector\u2019\n    Use -v to see a list of the files searched for.\n\nlib/Graphics/Rendering/Plot/Types.hs:26:8:\n    Could not find module \u2018Data.Packed.Matrix\u2019\n    Use -v to see a list of the files searched for.\ncabal: Error: some packages failed to install:\nplot-0.2.3.4 failed during the building phase. The exception was:\nExitFailure 1\n</code></pre>\n\n<p>Following <a href=\"https://github.com/amcphail/plot/issues/13\" rel=\"nofollow\">this issue</a> I updated hmatrix to version <code>0.17.0.1</code> but still get the same error. Any ideas?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 1, "creation_date": 1445969403, "post_id": 33374428, "comment_id": 54544914, "body": "I strongly believe this to be an homework question. Please provide what you have tried to do to solve the problems."}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 1, "creation_date": 1446363166, "post_id": 33374428, "comment_id": 54706327, "body": "why the massive downvotes .. please keep the haskell community friendly here - even if it&#39;s homework that&#39;s no problem at all - just don&#39;t spoil everything at once in your answer - thanks"}], "answers": [{"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 1, "last_activity_date": 1445980424, "creation_date": 1445980424, "answer_id": 33378571, "question_id": 33374428, "link": "https://stackoverflow.com/questions/33374428/i-do-not-understand-haskell-foldr/33378571#33378571", "title": "I do not understand Haskell foldr", "body": "<p>no, <code>foldr f [] xs =/= []</code>. Let's see,</p>\n\n<pre><code>mystery xs \n  = foldr f [] xs \n  -- ( assuming xs == (x:t), i.e. non-empty: )\n  = foldr f [] (x:t)\n  -- ( by definition of `foldr`: )\n  = f x (foldr f [] t)\n  -- ( by definition of `mystery`: )\n  = f x (mystery t)\n  = mystery t ++ [x]\n</code></pre>\n\n<p>So, what does <code>mystery</code> do? What does it do with a list <code>[a,b,c]</code> for example?</p>\n\n<pre><code>mystery [a,b,c]\n  = mystery [b,c] ++ [a]\n  = (mystery [c] ++ [b]) ++ [a]\n  = ((mystery [] ++ [c]) ++ [b]) ++ [a]\n  = ...\n</code></pre>\n\n<p>You can complete the picture here.</p>\n"}], "owner": {"reputation": 77, "user_id": 5494798, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/2a6af0dbf9254f4911563b3ba6a285ce?s=128&d=identicon&r=PG&f=1", "display_name": "HIABCD", "link": "https://stackoverflow.com/users/5494798/hiabcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1445980753, "creation_date": 1445966185, "last_edit_date": 1445980753, "question_id": 33374428, "link": "https://stackoverflow.com/questions/33374428/i-do-not-understand-haskell-foldr", "title": "I do not understand Haskell foldr", "body": "<p>what does <code>mystery</code> do?</p>\n\n<pre><code>mystery xs = foldr f [] xs\n\nf next soFar = soFar ++ [next]\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["postgresql", "haskell"], "answers": [{"tags": [], "owner": {"reputation": 2207, "user_id": 575152, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5e0170ce985a52a6af02b95baa38e1ae?s=128&d=identicon&r=PG", "display_name": "Savanni D&#39;Gerinel", "link": "https://stackoverflow.com/users/575152/savanni-dgerinel"}, "is_accepted": true, "score": 3, "last_activity_date": 1445969614, "creation_date": 1445969614, "answer_id": 33375563, "question_id": 33374136, "link": "https://stackoverflow.com/questions/33374136/using-postgres-simple-how-do-i-get-multiple-parameters-from-a-row/33375563#33375563", "title": "Using postgres-simple, how do I get multiple parameters from a row", "body": "<p>The entire problem ultimately lay in my SQL query. The correct query to use is:</p>\n\n<pre><code>*DatabaseIntegrationSpec&gt; r &lt;- query_ db \"SELECT id, name, token FROM sensor\" :: IO [SensorRow]\n</code></pre>\n\n<p>In short, putting parenthesis around the field names in the query causes PostgreSQL to return things in a format I do not know how to decode.</p>\n"}], "owner": {"reputation": 2207, "user_id": 575152, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5e0170ce985a52a6af02b95baa38e1ae?s=128&d=identicon&r=PG", "display_name": "Savanni D&#39;Gerinel", "link": "https://stackoverflow.com/users/575152/savanni-dgerinel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 33375563, "answer_count": 1, "score": 1, "last_activity_date": 1445969614, "creation_date": 1445965379, "last_edit_date": 1495540716, "question_id": 33374136, "link": "https://stackoverflow.com/questions/33374136/using-postgres-simple-how-do-i-get-multiple-parameters-from-a-row", "title": "Using postgres-simple, how do I get multiple parameters from a row", "body": "<p>I am trying to make a fairly basic query with postgresql-simple 0.5.0.1 and with 0.5.1.0. I am already familiar with the content in <a href=\"https://stackoverflow.com/questions/26952685/postgresql-simple-query-error\">postgresql-simple query error</a>, but I get a different error message.</p>\n\n<pre><code>data SensorRow = SensorRow Int String String deriving Show\ninstance FromRow SensorRow where\n    fromRow = SensorRow &lt;$&gt; field &lt;*&gt; field &lt;*&gt; field\n\n*DatabaseIntegrationSpec&gt; db &lt;- connectPostgreSQL dbString \n*DatabaseIntegrationSpec&gt; r &lt;- query_ db \"SELECT (id, name, token) FROM sensor\" :: IO [SensorRow]\n*** Exception: Incompatible {errSQLType = \"record\", errSQLTableOid = Nothing, errSQLField = \"row\", errHaskellType = \"Int\", errMessage = \"types incompatible\"}\n*DatabaseIntegrationSpec&gt; r &lt;- query_ db \"SELECT (id, name, token) FROM sensor\" :: IO [(Int, String, String)]\n*** Exception: Incompatible {errSQLType = \"record\", errSQLTableOid = Nothing, errSQLField = \"row\", errHaskellType = \"Int\", errMessage = \"types incompatible\"}\n*DatabaseIntegrationSpec&gt; \n</code></pre>\n\n<p>By my reading of the documentation and all of the example code, both of these queries should work. However, reading the error message, especially <code>errSQLField</code>, it appears in both cases that the library is trying to convert the <em>entire row</em> into an int.</p>\n\n<p>So, what is wrong here? Have I encountered a bug in the postgresql-simple library, and if so, how can I work around it?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1445953157, "post_id": 33369548, "comment_id": 54533590, "body": "Your question is missing some important parts."}, {"owner": {"reputation": 300, "user_id": 1637272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a43579cbf6aea51bbd0f9ebfd4f21ba?s=128&d=identicon&r=PG", "display_name": "Maz", "link": "https://stackoverflow.com/users/1637272/maz"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1445953450, "post_id": 33369548, "comment_id": 54533809, "body": "I don&#39;t need you to solve this, I just want to know if &quot;in&quot; and &quot;where&quot; can be used together like this. EDIT: I just realized what you&#39;re talking about. Stack overflow what being glitchy and removed my code blocks."}, {"owner": {"reputation": 10492, "user_id": 603688, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1058344e1b119c4d9dd3aedc5456277b?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/603688/dan"}, "edited": false, "score": 1, "creation_date": 1445953686, "post_id": 33369548, "comment_id": 54533977, "body": "Just move the stuff from the <code>let</code> into the <code>where</code> and get rid of the <code>let</code>."}, {"owner": {"reputation": 17837, "user_id": 1923190, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/D0JyZ.jpg?s=128&g=1", "display_name": "Simon H", "link": "https://stackoverflow.com/users/1923190/simon-h"}, "edited": false, "score": 0, "creation_date": 1445953720, "post_id": 33369548, "comment_id": 54533997, "body": "i can&#39;t help you with the indenting, but using gravity, g and gr in to represent that same thing in a function is going to get you into trouble I fear"}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 7, "creation_date": 1445953786, "post_id": 33369548, "comment_id": 54534038, "body": "As posted here, your code works (except for the unrelated issue of a missing <code>Ord</code> constraint). My guess is that you are mixing tabs and spaces."}, {"owner": {"reputation": 300, "user_id": 1637272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a43579cbf6aea51bbd0f9ebfd4f21ba?s=128&d=identicon&r=PG", "display_name": "Maz", "link": "https://stackoverflow.com/users/1637272/maz"}, "reply_to_user": {"reputation": 17837, "user_id": 1923190, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/D0JyZ.jpg?s=128&g=1", "display_name": "Simon H", "link": "https://stackoverflow.com/users/1923190/simon-h"}, "edited": false, "score": 0, "creation_date": 1445954927, "post_id": 33369548, "comment_id": 54534898, "body": "@Simon: The variable names were something I was messing with to see if that would help. I know its stupid, but I tried anyway. I wouldn&#39;t actually release code like this, don&#39;t worry."}, {"owner": {"reputation": 300, "user_id": 1637272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a43579cbf6aea51bbd0f9ebfd4f21ba?s=128&d=identicon&r=PG", "display_name": "Maz", "link": "https://stackoverflow.com/users/1637272/maz"}, "reply_to_user": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1445954991, "post_id": 33369548, "comment_id": 54534950, "body": "@duplode, I thought Num contained Ord as well, does it not?"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 1, "creation_date": 1445955133, "post_id": 33369548, "comment_id": 54535034, "body": "<code>&gt; :i Num</code> shows it doesn&#39;t inherit from <code>Ord</code>."}], "answers": [{"comments": [{"owner": {"reputation": 300, "user_id": 1637272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a43579cbf6aea51bbd0f9ebfd4f21ba?s=128&d=identicon&r=PG", "display_name": "Maz", "link": "https://stackoverflow.com/users/1637272/maz"}, "edited": false, "score": 5, "creation_date": 1445954809, "post_id": 33369855, "comment_id": 54534804, "body": "So basically, don&#39;t use tabs at all?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 300, "user_id": 1637272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a43579cbf6aea51bbd0f9ebfd4f21ba?s=128&d=identicon&r=PG", "display_name": "Maz", "link": "https://stackoverflow.com/users/1637272/maz"}, "edited": false, "score": 4, "creation_date": 1445955666, "post_id": 33369855, "comment_id": 54535429, "body": "@Maz Not using them is the easiest way."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 300, "user_id": 1637272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a43579cbf6aea51bbd0f9ebfd4f21ba?s=128&d=identicon&r=PG", "display_name": "Maz", "link": "https://stackoverflow.com/users/1637272/maz"}, "edited": false, "score": 3, "creation_date": 1445962989, "post_id": 33369855, "comment_id": 54540835, "body": "@Maz: Or, if you <b>really</b> want to use them, make sure that <code>let</code> is on its own line and indented with tabs."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 300, "user_id": 1637272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a43579cbf6aea51bbd0f9ebfd4f21ba?s=128&d=identicon&r=PG", "display_name": "Maz", "link": "https://stackoverflow.com/users/1637272/maz"}, "edited": false, "score": 2, "creation_date": 1445963195, "post_id": 33369855, "comment_id": 54540993, "body": "@Maz, I would never use them. GHC 7.10 produces a warning by default if your file has any tabs in it; in older versions you can use <code>-fwarn-tabs</code>. Using tabs really puts you at the mercy of your editor."}], "tags": [], "owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "is_accepted": true, "score": 5, "last_activity_date": 1445953923, "creation_date": 1445953923, "answer_id": 33369855, "question_id": 33369548, "link": "https://stackoverflow.com/questions/33369548/am-i-allowed-to-use-in-and-where-within-a-haskell-definition/33369855#33369855", "title": "Am I allowed to use &quot;in&quot; and &quot;where&quot; within a haskell definition?", "body": "<p>If you change the type signature and do some cleaning up (proper indentation, not mixing tabs and spaces), it should work. This is an working code:</p>\n\n<pre><code>projectileY :: (Fractional a, Ord a) =&gt; a -&gt; a -&gt; a -&gt; a -&gt; a\nprojectileY gravity time vInit height = let equation gr ti veli hei = -0.5*g*(t^2)+vi*t+h\n                                        in if (equation g t vi h &lt; 0) \n                                           then 0 \n                                           else (equation g t vi h)\n                                               where\n                                                 g = gravity\n                                                 t = time\n                                                 vi = vInit\n                                                 h = height\n\nmain :: IO()\nmain = print (projectileY 9.8 0.1 2.0 100)\n</code></pre>\n\n<blockquote>\n  <p>Am I allowed to use \"in\" and \"where\" like this?</p>\n</blockquote>\n\n<p>Yes. But note that <code>in</code> should be used alongside with <code>let</code>. The let in syntax should form an expression.</p>\n"}, {"comments": [{"owner": {"reputation": 300, "user_id": 1637272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a43579cbf6aea51bbd0f9ebfd4f21ba?s=128&d=identicon&r=PG", "display_name": "Maz", "link": "https://stackoverflow.com/users/1637272/maz"}, "edited": false, "score": 0, "creation_date": 1445971717, "post_id": 33375101, "comment_id": 54546230, "body": "I was experimenting with &quot;where&quot; and &quot;in.&quot; I know I forced them in. The strange names were just an experiment to check if using the same variable names screwed something up."}], "tags": [], "owner": {"reputation": 2134, "user_id": 2623659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bd33f70a971bf89c7719005d477e2b?s=128&d=identicon&r=PG", "display_name": "ach", "link": "https://stackoverflow.com/users/2623659/ach"}, "is_accepted": false, "score": 0, "last_activity_date": 1445968181, "creation_date": 1445968181, "answer_id": 33375101, "question_id": 33369548, "link": "https://stackoverflow.com/questions/33369548/am-i-allowed-to-use-in-and-where-within-a-haskell-definition/33375101#33375101", "title": "Am I allowed to use &quot;in&quot; and &quot;where&quot; within a haskell definition?", "body": "<p>In addition to what others wrote about indents, it hardly makes sense to define a local function and then to twice apply it with the same set of arguments. On the whole, you make it all too complicated for no gain.</p>\n\n<p>Why not write simply?:</p>\n\n<pre><code>projectileY g t v0 h0 = max 0.0 (-0.5 * g * (t ^ 2) + v0 * t + h0)\n</code></pre>\n\n<p>As another style note, in physical formulae, I find it much more readable to use conventional short identifiers for variables and constants, such as <code>g</code>, <code>h</code> and <code>t</code>.</p>\n"}], "owner": {"reputation": 300, "user_id": 1637272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0a43579cbf6aea51bbd0f9ebfd4f21ba?s=128&d=identicon&r=PG", "display_name": "Maz", "link": "https://stackoverflow.com/users/1637272/maz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 33369855, "answer_count": 2, "score": 0, "last_activity_date": 1445968181, "creation_date": 1445953112, "last_edit_date": 1445953242, "question_id": 33369548, "link": "https://stackoverflow.com/questions/33369548/am-i-allowed-to-use-in-and-where-within-a-haskell-definition", "title": "Am I allowed to use &quot;in&quot; and &quot;where&quot; within a haskell definition?", "body": "<p>I'm in the process of learning haskell, so I tried to make a the following function to see if I could do it. </p>\n\n<p>This is what I wrote</p>\n\n<pre><code>projectileY :: (Num a, Fractional a) =&gt; a -&gt; a -&gt; a -&gt; a -&gt; a\nprojectileY gravity time vInit height = let equation gr ti veli hei = -0.5*g*(t^2)+vi*t+h\n                                        in if (equation g t vi h &lt; 0) then 0 else (equation g t vi h)\n                                            where\n                                                g = gravity\n                                                t = time\n                                                vi = vInit\n                                                h = height\n\nmain :: IO()\nmain = do\n  print (projectileY 9.8 0.1 2.0 100)\n</code></pre>\n\n<p>This was the error</p>\n\n<pre><code>parse error (possibly incorrect indentation or mismatched brackets)\n</code></pre>\n\n<p>So I tried messing with the indentation for a while, with no success. Am I allowed to use \"in\" and \"where\" like this?</p>\n"}, {"tags": ["haskell", "typeclass"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 1, "creation_date": 1445948884, "post_id": 33367918, "comment_id": 54530418, "body": "No they are both correct but the second one is more general. Given a function <code>f</code> with type <code>(C1 a1, ..., Cn an) =&gt; t(a1, ..., an)</code> then <code>f</code> also have the type <code>(C ai, C1 a1, ..., Cn an) =&gt; t(a1, ..., an)</code>. I.e. adding class constraints cannot make the type wrong. It simply increases the constraints on the type variables.   Obviously to <i>use</i> the function you have to satisfy the added constraints, so even though the definition of the function is perfectly well typed you may be unable to actually use it in code due to the lack of instances."}], "answers": [{"comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1445949012, "post_id": 33368045, "comment_id": 54530501, "body": "as I commented: adding a class constraint (to already existing type variables) can never create problems <i>at function definition</i>."}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1445949052, "post_id": 33368045, "comment_id": 54530521, "body": "that&#39;s correct; I just didn&#39;t see your comment prior to writing this."}, {"owner": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "edited": false, "score": 0, "creation_date": 1445949413, "post_id": 33368045, "comment_id": 54530803, "body": "@ErikAllik It works when i type into the interpreter something like new function 10,it gives me a BUNCh of errors?I don&#39;t understand how the second is more general? could you explain,thanks a lot"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "reply_to_user": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "edited": false, "score": 0, "creation_date": 1445949488, "post_id": 33368045, "comment_id": 54530864, "body": "@Charana: can you PLEASE fix your sentence? I can&#39;t parse it! \u2014 in any case <code>newfunction 10</code> yields <code>3</code> when typed into GHCi."}, {"owner": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "edited": false, "score": 0, "creation_date": 1445949650, "post_id": 33368045, "comment_id": 54530975, "body": "@ErikAllik Lol sorry,when i type <code>newfunction 10</code> with the <code>newfunction</code> containing the <code>RealFrac a</code> portion i included it doesn&#39;t seem to work"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445949864, "post_id": 33368045, "comment_id": 54531109, "body": "presumably, that&#39;s because a value can&#39;t be <code>Integral</code> and <code>RealFrac</code> at the same time, I guess. so just as Bakuriu said: adding a constraint doesn&#39;t fail the function definition, but that doesn&#39;t mean it can&#39;t cause failures at the call site. In other words, the constraints are conflicting, but Haskell won&#39;t determine that until you try to call the function. Just use the more general signature and be done with it."}, {"owner": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "edited": false, "score": 0, "creation_date": 1445949981, "post_id": 33368045, "comment_id": 54531199, "body": "@ErikAllik Well that explains it,but why did the first function named <code>function</code> work? I set <code>a</code> to both <code>Floating</code> and <code>RealFrac</code> ?Why isn&#39;t there a conflict here?"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445950040, "post_id": 33368045, "comment_id": 54531245, "body": "No you didn&#39;t. Look again."}, {"owner": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "edited": false, "score": 0, "creation_date": 1445950096, "post_id": 33368045, "comment_id": 54531282, "body": "sorry i edited my comment , i set it to <code>Floating</code> and <code>RealFrac</code>"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445950223, "post_id": 33368045, "comment_id": 54531374, "body": "because there exist types that are both <code>Floating</code> and <code>RealFrac</code>; in fact, both <code>Float</code> and <code>Double</code> belong to both <code>Floating</code> and <code>RealFrac</code>."}], "tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": true, "score": 8, "last_activity_date": 1445950096, "last_edit_date": 1445950096, "creation_date": 1445948950, "answer_id": 33368045, "question_id": 33367918, "link": "https://stackoverflow.com/questions/33367918/why-doesnt-this-signature-for-my-function-work/33368045#33368045", "title": "Why doesn&#39;t this signature for my function work?", "body": "\n\n<blockquote>\n  <p>Why won't this work?</p>\n</blockquote>\n\n<p>...but it does:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>Prelude&gt; :{\nPrelude| let newfunction :: (Integral a, RealFrac a, Integral b) =&gt; a -&gt; b\nPrelude|     newfunction a = floor (sqrt (fromIntegral a))\nPrelude| :}\nPrelude&gt; :t newfunction \nnewfunction :: (Integral a, Integral b, RealFrac a) =&gt; a -&gt; b\n</code></pre>\n\n<p>It's just that if you let GHC infer the type signature automatically, it will come up with a simpler/better one for you:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>Prelude&gt; let newfunction a = floor (sqrt (fromIntegral a))\nPrelude&gt; :t newfunction \nnewfunction :: (Integral b, Integral a) =&gt; a -&gt; b\n</code></pre>\n\n<p>But that doesn't mean the manually specified one is wrong \u2014 it's just not as general as it could be, which might or might not be what you're after, depending on situation.</p>\n\n<p>As to what it means for something to be <em>more general</em> \u2014 it's when it makes fewer assumptions and puts fewer requirements/constraints on its inputs; by requiring less, it can work with a larger variety of inputs, and that's called <strong>\"more general\"</strong>.</p>\n\n<hr>\n\n<p><strong>Also</strong>, note that the less general version in this case is invalid because you can't really call it with anyhing, but Haskell still allows you to define such a function \u2014 the failure will occur at the call site.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>Prelude&gt; :i RealFrac\nclass (Real a, Fractional a) =&gt; RealFrac a where\n    ...\n    -- Defined in \u2018GHC.Real\u2019\ninstance RealFrac Float -- Defined in \u2018GHC.Float\u2019\ninstance RealFrac Double -- Defined in \u2018GHC.Float\u2019\n\nPrelude&gt; :i Integral\nclass (Real a, Enum a) =&gt; Integral a where\n    ...\n    -- Defined in \u2018GHC.Real\u2019\ninstance Integral Word -- Defined in \u2018GHC.Real\u2019\ninstance Integral Integer -- Defined in \u2018GHC.Real\u2019\ninstance Integral Int -- Defined in \u2018GHC.Real\u2019\n</code></pre>\n\n<p>\u2014 see how not a single type belongs to both <code>RealFrac</code> and <code>Integral</code> at the same time? If you manually defined <code>instance RealFrac Integer where ...</code>, it would work, but that would probably not make sense and would likely violate some type class laws and would thus lead to inconsistent/buggy code.</p>\n\n<p><strong>So as a general guideline</strong>: start out with the GHC inferred type signature, and only then add additional constraints or make the signature more monomorphic/less polymorphic. </p>\n\n<hr>\n\n<p><strong>Furthermore</strong>, you could also define these functions <a href=\"https://wiki.haskell.org/Pointfree\" rel=\"nofollow\">point free</a>, which I think makes them more readable. I've shown below how to transform your current, parentheses-laden versions to point free ones (also called <a href=\"https://en.wikipedia.org/wiki/Tacit_programming\" rel=\"nofollow\">tacit</a>):</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>function x = floor (sqrt x)\nfunction x = floor . sqrt $ x\nfunction   = floor . sqrt\n\nnewfunction a = floor (sqrt (fromIntegral a))\nnewfunction a = floor . sqrt . fromIntegral $ a\nnewfunction   = floor . sqrt . fromIntegral\n</code></pre>\n"}], "owner": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 33368045, "answer_count": 1, "score": 1, "last_activity_date": 1445950292, "creation_date": 1445948569, "last_edit_date": 1445950292, "question_id": 33367918, "link": "https://stackoverflow.com/questions/33367918/why-doesnt-this-signature-for-my-function-work", "title": "Why doesn&#39;t this signature for my function work?", "body": "\n\n<pre class=\"lang-hs prettyprint-override\"><code>function :: (Floating a, RealFrac a, Integral b) =&gt; a -&gt; b\nfunction x = floor (sqrt x)\n</code></pre>\n\n<p>Okay so if you look at this function, I specified that <code>a</code> can be both <code>RealFrac</code> and <code>Floating</code> Typeclasses and then <code>b</code> is an <code>Integral</code>.\nThis is because of the signatures of <code>floor</code> and <code>sqrt</code>:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>floor :: (Integral b, RealFrac a) =&gt; a -&gt; b \nsqrt :: Floating a =&gt; a -&gt; a\n</code></pre>\n\n<p>As can be seen <code>sqrt</code> only takes <code>Floating</code>s and <code>floor</code> only takes <code>RealFrac</code>. so I set <code>a</code> to <code>RealFrac</code> and <code>Floating</code>.\nThen I specified that <code>b</code> would be <code>Integral</code> because <code>floor</code> gives us a <code>Integral</code>.</p>\n\n<p>so my questions is </p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>newfunction :: (Integral a, RealFrac a, Integral b) =&gt; a -&gt; b \nnewfunction a = floor (sqrt (fromIntegral a))\n</code></pre>\n\n<p>Why won't this work?</p>\n\n<p>the actual correct type signature is</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>newfunction :: (Integral a, Integral b) =&gt; a -&gt; b \n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 3, "creation_date": 1445946781, "post_id": 33366900, "comment_id": 54529020, "body": "That is a view pattern. See <a href=\"http://stackoverflow.com/q/20766841/2751851\">this question</a> for some interesting examples."}], "answers": [{"tags": [], "owner": {"reputation": 6942, "user_id": 1540749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dd6c24a0bc5c0a59a456aa8b08a78b6a?s=128&d=identicon&r=PG", "display_name": "josejuan", "link": "https://stackoverflow.com/users/1540749/josejuan"}, "is_accepted": true, "score": 7, "last_activity_date": 1445946961, "last_edit_date": 1445946961, "creation_date": 1445946641, "answer_id": 33367260, "question_id": 33366900, "link": "https://stackoverflow.com/questions/33366900/pattern-match-in-function-argument-in-haskell/33367260#33367260", "title": "Pattern match in function argument in haskell", "body": "<p>It's using <a href=\"https://ghc.haskell.org/trac/ghc/wiki/ViewPatterns\" rel=\"noreferrer\">View Patterns</a></p>\n\n<blockquote>\n  <p>Evaluation To match a value v against a pattern (expr -> pat),\n  evaluate (expr v) and match the result against pat.</p>\n</blockquote>\n\n<p>See <a href=\"https://github.com/kazu-yamamoto/ghc-mod/blob/master/ghc-mod.cabal#L99\" rel=\"noreferrer\">cabal file</a></p>\n\n<pre><code>Default-Extensions:   ScopedTypeVariables, RecordWildCards, NamedFieldPuns,\n                      ConstraintKinds, FlexibleContexts,\n                      DataKinds, KindSignatures, TypeOperators, ViewPatterns\n                                                                ^^^^^^^^^^^^\n                                                                |  |  |  | |\n</code></pre>\n"}], "owner": {"reputation": 7792, "user_id": 242189, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/48a18a00706b9c7206ef4092b6e68a41?s=128&d=identicon&r=PG", "display_name": "nicolas", "link": "https://stackoverflow.com/users/242189/nicolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 2, "accepted_answer_id": 33367260, "answer_count": 1, "score": 7, "last_activity_date": 1445946961, "creation_date": 1445945621, "question_id": 33366900, "link": "https://stackoverflow.com/questions/33366900/pattern-match-in-function-argument-in-haskell", "title": "Pattern match in function argument in haskell", "body": "<p>In the code defining a function, there is a strange \"pattern match\"    <code>(cradleRootDir -&gt; projdir)</code></p>\n\n<p>I guess that is meant to apply the function inline and binds the result to the name <code>projdir</code>.</p>\n\n<p>What is the name of that construct ? </p>\n\n<pre><code>withGhcModEnv' :: (IOish m, GmOut m) =&gt; (FilePath -&gt; (Cradle -&gt; m a) -&gt; m a) -&gt; FilePath -&gt; Options -&gt; ((GhcModEnv, GhcModLog) -&gt; m a) -&gt; m a\nwithGhcModEnv' withCradle dir opts f =\n    withCradle dir $ \\crdl -&gt;\n      withCradleRootDir crdl $\n        f (GhcModEnv opts crdl, undefined)\n where\n   withCradleRootDir (cradleRootDir -&gt; projdir) a = do\n       cdir &lt;- liftIO $ getCurrentDirectory\n       eq &lt;- liftIO $ pathsEqual projdir cdir\n       if not eq\n          then throw $ GMEWrongWorkingDirectory projdir cdir\n          else a\n</code></pre>\n\n<p>The constructor </p>\n\n<pre><code>data Cradle = Cradle {\n    cradleCurrentDir :: FilePath\n  , cradleRootDir    :: FilePath\n  , cradleCabalFile  :: Maybe FilePath\n  , cradlePkgDbStack  :: [GhcPkgDb]\n  } deriving (Eq, Show)\n</code></pre>\n"}, {"tags": ["haskell", "typeclass"], "answers": [{"tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": false, "score": 4, "last_activity_date": 1445939484, "creation_date": 1445939484, "answer_id": 33364611, "question_id": 33364509, "link": "https://stackoverflow.com/questions/33364509/haskell-difficulty-with-type-signature-for-a-variable/33364611#33364611", "title": "Haskell difficulty with type signature for a variable", "body": "<p><code>Integer</code> is just a type.</p>\n\n<pre><code>tuple :: Fractional a =&gt; (Integer, a, String)\n</code></pre>\n\n<p>Or maybe you meant to use <code>Integral a</code>?</p>\n"}, {"tags": [], "owner": {"reputation": 4426, "user_id": 469981, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b116107a07635c7b2015d3ffd8ddbe3a?s=128&d=identicon&r=PG", "display_name": "jazmit", "link": "https://stackoverflow.com/users/469981/jazmit"}, "is_accepted": false, "score": 7, "last_activity_date": 1445939589, "creation_date": 1445939589, "answer_id": 33364656, "question_id": 33364509, "link": "https://stackoverflow.com/questions/33364509/haskell-difficulty-with-type-signature-for-a-variable/33364656#33364656", "title": "Haskell difficulty with type signature for a variable", "body": "<p>Integer is a concrete type in Haskell, whereas Integral is a typeclass used to denote things which can be represented as an integer.  As such, you could choose to write:</p>\n\n<pre><code>tuple :: Fractional a =&gt; (Integer,a,String)\ntuple = (18,5.55,\"Charana\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>tuple :: (Integral a,Fractional b) =&gt; (a,b,String)\ntuple = (18,5.55,\"Charana\")\n</code></pre>\n"}], "owner": {"reputation": 906, "user_id": 5299539, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9f41c4053ec442fe9d5fa1e2b2e19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Charana", "link": "https://stackoverflow.com/users/5299539/charana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1445939589, "creation_date": 1445939167, "question_id": 33364509, "link": "https://stackoverflow.com/questions/33364509/haskell-difficulty-with-type-signature-for-a-variable", "title": "Haskell difficulty with type signature for a variable", "body": "<pre><code>tuple :: (Integer a,Fractional b) =&gt; (a,b,String)\ntuple = (18,5.55,\"Charana\")\n</code></pre>\n\n<p>So this is giving me the error </p>\n\n<pre><code>\u2018Integer\u2019 is applied to too many type arguments\nIn the type signature for \u2018tuple\u2019:\ntuple :: (Integer a, Fractional b) =&gt; (a, b, String)\n</code></pre>\n\n<p>Why is this?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1445940912, "post_id": 33361100, "comment_id": 54525022, "body": "The thing that makes this so tricky is that <code>(-&gt;) a</code> is a perfectly valid type for a <code>Monad</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7714, "user_id": 149901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d1a6db7a9fb5385fde6ba426e27d5ac6?s=128&d=identicon&r=PG", "display_name": "ondra", "link": "https://stackoverflow.com/users/149901/ondra"}, "edited": false, "score": 0, "creation_date": 1445938584, "post_id": 33363336, "comment_id": 54523343, "body": "I had to add ScopedTypeVariables, forall m. and Incoherent instances, because it somehow wants to apply both instances (&#39;the choice depends on the instantiation of m&#39;). Any idea why incoherent instances is required?"}, {"owner": {"reputation": 7714, "user_id": 149901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d1a6db7a9fb5385fde6ba426e27d5ac6?s=128&d=identicon&r=PG", "display_name": "ondra", "link": "https://stackoverflow.com/users/149901/ondra"}, "edited": false, "score": 0, "creation_date": 1445940817, "post_id": 33363336, "comment_id": 54524951, "body": "Interestingly enough in my real code the IncoherentInstances is not needed."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 7714, "user_id": 149901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d1a6db7a9fb5385fde6ba426e27d5ac6?s=128&d=identicon&r=PG", "display_name": "ondra", "link": "https://stackoverflow.com/users/149901/ondra"}, "edited": false, "score": 2, "creation_date": 1445941047, "post_id": 33363336, "comment_id": 54525130, "body": "&quot;Any idea why incoherent instances is required?&quot; <code>m</code> could be <code>(-&gt;) a</code> and <code>r</code> could be <code>Value</code> in which case you have 2 instances for the same types."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 3, "last_activity_date": 1445936131, "last_edit_date": 1445936131, "creation_date": 1445935593, "answer_id": 33363336, "question_id": 33361100, "link": "https://stackoverflow.com/questions/33361100/ambigous-type-variable-in-variable-parameter-printf-like-function/33363336#33363336", "title": "Ambigous type variable in variable parameter (printf-like) function", "body": "<p>The issue is that the compiler can't assume there is no instance for <code>MyFunc m (a -&gt; r)</code> such that <code>Int -&gt; Int -&gt; m1 Value</code> will fit for some <code>m1</code> different from <code>m</code>: someone could add it in a different module. This is called the open world assumption.</p>\n\n<p>This should be easy to fix by </p>\n\n<pre><code>funclist = [\n    convert (testfunc1 :: Int -&gt; Int -&gt; m Value)\n  ]\n</code></pre>\n\n<p>(not sure off-hand if <a href=\"https://downloads.haskell.org/~ghc/7.8.4/docs/html/users_guide/other-type-extensions.html#scoped-type-variables\" rel=\"nofollow\"><code>-XScopedTypeVariables</code></a> is required; if it is, add <code>forall m.</code> to <code>funclist</code> signature).</p>\n"}], "owner": {"reputation": 7714, "user_id": 149901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d1a6db7a9fb5385fde6ba426e27d5ac6?s=128&d=identicon&r=PG", "display_name": "ondra", "link": "https://stackoverflow.com/users/149901/ondra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 33363336, "answer_count": 1, "score": 4, "last_activity_date": 1445937512, "creation_date": 1445926697, "last_edit_date": 1445937512, "question_id": 33361100, "link": "https://stackoverflow.com/questions/33361100/ambigous-type-variable-in-variable-parameter-printf-like-function", "title": "Ambigous type variable in variable parameter (printf-like) function", "body": "<p>I am writing an interpreter and I'd like to have a function that takes a function with normal parameters and converts it into a function that works with the interpreter. E.g.:</p>\n\n<pre><code>add :: Monad m =&gt; Int -&gt; Int -&gt; m Value\nlet myadd = convert add :: Monad m =&gt; [Value] -&gt; m Value\n</code></pre>\n\n<p>I created some classes that actually make it happen as long as <code>m</code> is concrete - but I would need the result to still have type <code>m Value</code>, not e.g. <code>IO Value</code> (I need to use it in 2 different monads).</p>\n\n<pre><code>data Value = VInteger Int  deriving (Show)\n\nclass MyArg a where\n  fromValue :: Value -&gt; Maybe a\n\ninstance MyArg Int where\n  fromValue (VInteger a) = Just a\n  fromValue _ = Nothing\n\nclass Monad m =&gt; MyFunc m r where\n  convert :: r -&gt; [Value] -&gt; m Value\n\ninstance Monad m =&gt; MyFunc m (m Value) where\n  convert f [] = f\n  convert _ _ = fail \"\"\n\ninstance (Monad m, MyArg a, MyFunc m r) =&gt; MyFunc m (a -&gt; r) where\n  convert f (arg:rest)\n    | Just v &lt;- fromValue arg = convert (f v) rest\n  convert _ _ = fail \"\"\n</code></pre>\n\n<p>I have this function to convert:</p>\n\n<pre><code>testfunc1 :: Monad m =&gt; Int -&gt; Int -&gt; m Value\ntestfunc1 num num2 = return $ VInteger (num + 10 * num2)\n</code></pre>\n\n<p>And this works:</p>\n\n<pre><code>main = do\n  let val = convert (testfunc1 :: Int -&gt; Int -&gt; Maybe Value) [VInteger 3, VInteger 5] :: Maybe Value\n  print val\n</code></pre>\n\n<p>However, this doesn't:</p>\n\n<pre><code>let val = convert testfunc1 [VInteger 3, VInteger 5] :: Maybe Value\n</code></pre>\n\n<p>And this, which is my usecase, doesn't either:</p>\n\n<pre><code>funclist :: Monad m =&gt; [ [Value] -&gt; m Value ]\nfunclist = [\n    convert testfunc1\n  ]\n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>No instance for (GHC.Base.Monad m1)\n  arising from a use of \u2018Main.testfunc1\u2019\nThe type variable \u2018m1\u2019 is ambiguous\n</code></pre>\n\n<p>It seems to me that the typeclasses somehow fail to grasp that the <code>m</code> of the converted function should be the same <code>m</code> as in the original function, but I have no idea how to code it inside it. </p>\n"}, {"tags": ["database", "haskell", "orm", "yesod"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 1557590, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/XNL7p.png?s=128&g=1", "display_name": "Stewart Webb", "link": "https://stackoverflow.com/users/1557590/stewart-webb"}, "edited": false, "score": 0, "creation_date": 1445941805, "post_id": 33365034, "comment_id": 54525664, "body": "Thanks Michael. I think that is working. My only problem is that in my hamlet I am trying to loop through the list and it is saying <code>Couldn&#39;t match type \u2018Product\u2019 with \u2018t0 Product\u2019</code>. Do you know what that is or do you need more information to answer this? Thanks again."}, {"owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "reply_to_user": {"reputation": 149, "user_id": 1557590, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/XNL7p.png?s=128&g=1", "display_name": "Stewart Webb", "link": "https://stackoverflow.com/users/1557590/stewart-webb"}, "edited": false, "score": 0, "creation_date": 1445952688, "post_id": 33365034, "comment_id": 54533255, "body": "Sounds like you&#39;re using one for all, when you actually need two (outer and inner list). But I can&#39;t be sure without seeing your hamlet"}, {"owner": {"reputation": 149, "user_id": 1557590, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/XNL7p.png?s=128&g=1", "display_name": "Stewart Webb", "link": "https://stackoverflow.com/users/1557590/stewart-webb"}, "edited": false, "score": 0, "creation_date": 1445952886, "post_id": 33365034, "comment_id": 54533391, "body": "I&#39;ve added the hamlet to my question. Thanks."}, {"owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "reply_to_user": {"reputation": 149, "user_id": 1557590, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/XNL7p.png?s=128&g=1", "display_name": "Stewart Webb", "link": "https://stackoverflow.com/users/1557590/stewart-webb"}, "edited": false, "score": 0, "creation_date": 1445971700, "post_id": 33365034, "comment_id": 54546221, "body": "Drop the square brackets on product in the first forall. On my phone, can&#39;t elaborate"}], "tags": [], "owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "is_accepted": true, "score": 2, "last_activity_date": 1445940584, "creation_date": 1445940584, "answer_id": 33365034, "question_id": 33357838, "link": "https://stackoverflow.com/questions/33357838/yesod-get-a-one-to-many-relationship-from-database/33365034#33365034", "title": "Yesod get a one to many relationship from database", "body": "<p>The two basic approaches would be:</p>\n\n<ol>\n<li>Get the list of all categories, and then for each category, get a list of products</li>\n<li>Use esqueleto to do an inner (or left) join, and then use sort and group function in Haskell</li>\n</ol>\n\n<p>The first approach is probably simpler. Here's an example:</p>\n\n<pre><code>{-# LANGUAGE EmptyDataDecls             #-}\n{-# LANGUAGE FlexibleContexts           #-}\n{-# LANGUAGE GADTs                      #-}\n{-# LANGUAGE GeneralizedNewtypeDeriving #-}\n{-# LANGUAGE MultiParamTypeClasses      #-}\n{-# LANGUAGE OverloadedStrings          #-}\n{-# LANGUAGE QuasiQuotes                #-}\n{-# LANGUAGE TemplateHaskell            #-}\n{-# LANGUAGE TypeFamilies               #-}\nimport           Control.Monad.IO.Class  (liftIO)\nimport           Database.Persist\nimport           Database.Persist.Sqlite\nimport           Database.Persist.TH\nimport Data.Text (Text)\nimport Control.Monad (forM)\n\nshare [mkPersist sqlSettings, mkMigrate \"migrateAll\"] [persistLowerCase|\nProduct\n  category CategoryId\n  name Text\n  description Text\n  price Int\n  deriving Show\nCategory\n  name Text\n  deriving Show\n|]\n\nmain :: IO ()\nmain = runSqlite \":memory:\" $ do\n    runMigrationSilent migrateAll\n    populate\n    res &lt;- query\n    liftIO $ print res\n\npopulate = do\n    watches &lt;- insert $ Category \"Watches\"\n    insert_ $ Product watches \"Rolex\" \"Fancy\" 100\n    insert_ $ Product watches \"Limex\" \"Cheap\" 2\n\n    computers &lt;- insert $ Category \"Computers\"\n    insert_ $ Product computers \"MacBook Air\" \"Apple\" 1500\n\nquery = do\n    cats &lt;- selectList [] [Asc CategoryName]\n    forM cats $ \\(Entity catId cat) -&gt; do\n        products &lt;- selectList\n            [ProductCategory ==. catId]\n            [Asc ProductName]\n        return (cat, map entityVal products)\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 1557590, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/XNL7p.png?s=128&g=1", "display_name": "Stewart Webb", "link": "https://stackoverflow.com/users/1557590/stewart-webb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 33365034, "answer_count": 1, "score": 3, "last_activity_date": 1445952858, "creation_date": 1445904851, "last_edit_date": 1445952858, "question_id": 33357838, "link": "https://stackoverflow.com/questions/33357838/yesod-get-a-one-to-many-relationship-from-database", "title": "Yesod get a one to many relationship from database", "body": "<p>I have two tables <code>product</code> and <code>category</code> defined like below:</p>\n\n<pre><code>Product\n  category CategoryId\n  name Text\n  description Text\n  price Int\nCategory\n  name Text\n</code></pre>\n\n<p>I would like to extract from the database a list of type <code>[(Category, [Product])]</code>. How would I go about this in Yesod?</p>\n\n<p>I am completely new and have looked for pretty much a whole day trying to find something to do this.</p>\n\n<p><strong>Update</strong></p>\n\n<p>This is my hamlet</p>\n\n<pre><code>$if null rows\n  &lt;p&gt;No products\n$else\n  &lt;div class=\"list-group menu\"&gt;\n    $forall (category, [products]) &lt;- rows\n      &lt;div class=\"list-group-item\"&gt;\n        &lt;h4 class=\"list-group-item-heading\"&gt;#{categoryName category}\n\n      $forall product &lt;- products\n       &lt;div class=\"list-group-item\"&gt;\n        &lt;div class=\"container-fluid\"&gt;\n          &lt;div class=\"col-sm-10\"&gt;\n            &lt;p&gt;#{productName product} - #{productPrice product}&lt;/p&gt;\n          &lt;div class=\"col-md-2 text-right\"&gt;\n            &lt;div class=\"btn-group\"&gt;\n              &lt;a class=\"btn btn-default btn-xs\"&gt;&lt;div class=\"glyphicon glyphicon-plus\"&gt;&lt;/div&gt;&lt;/a&gt;\n              &lt;a class=\"btn btn-default btn-xs\"&gt;&lt;div class=\"glyphicon glyphicon-minus\"&gt;&lt;/div&gt;&lt;/a&gt;\n</code></pre>\n"}, {"tags": ["class", "haskell", "instance"], "comments": [{"owner": {"reputation": 34889, "user_id": 86604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/329af917389e6cf8e146c03012f5319a?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/86604/ingo"}, "edited": false, "score": 1, "creation_date": 1445900265, "post_id": 33357033, "comment_id": 54510018, "body": "String is a type synonym, you can use [Char] or some compiler option that allows type synonyms in instances."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1445902304, "post_id": 33357033, "comment_id": 54510678, "body": "Enable <code>FlexibleInstances</code> as GHC should suggest. That extension is harmless and has been in use by many libraries since a long time."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445915144, "post_id": 33357033, "comment_id": 54514069, "body": "<code>[Char]</code> is also not a valid instance head under the default rules - you&#39;ll still need <code>FlexibleInstances</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 2, "creation_date": 1445931012, "post_id": 33357474, "comment_id": 54519385, "body": "This answer provides a solution, but can you explain the source of the problem?"}], "tags": [], "owner": {"reputation": 2337, "user_id": 3595992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a8fc8a00391b1282338f66de57e3fea0?s=128&d=identicon&r=PG&f=1", "display_name": "JeanJouX", "link": "https://stackoverflow.com/users/3595992/jeanjoux"}, "is_accepted": true, "score": 3, "last_activity_date": 1445902716, "creation_date": 1445902716, "answer_id": 33357474, "question_id": 33357033, "link": "https://stackoverflow.com/questions/33357033/illegal-instance-declaration/33357474#33357474", "title": "Illegal instance declaration", "body": "<p>You can use the pragma :</p>\n\n<pre><code>{-# LANGUAGE FlexibleInstances #-}\n</code></pre>\n\n<p>at the head of your source file.</p>\n"}, {"comments": [{"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 2, "creation_date": 1445941112, "post_id": 33363842, "comment_id": 54525171, "body": "Haskell 98 and also Haskell 2010 do allow instances for <code>[a]</code>. It&#39;s just that the <code>a</code> actually has to be a type variable."}], "tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": false, "score": 5, "last_activity_date": 1445941524, "last_edit_date": 1445941524, "creation_date": 1445937280, "answer_id": 33363842, "question_id": 33357033, "link": "https://stackoverflow.com/questions/33357033/illegal-instance-declaration/33363842#33363842", "title": "Illegal instance declaration", "body": "\n\n<p>The problem is that <code>String</code> is a type alias for <code>[Char]</code> and the Haskell 98 specification does not allow for instances to be defined on type aliases. That can be solved by adding this in the header of the file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{-# LANGUAGE TypeSynonymInstances #-}\n</code></pre>\n\n<p>However, that still won't allow you to compile the program as Haskell 98 also doesn't allow instances for <code>[SomeConcreteType]</code> (only instances for <code>[a]</code> are allowed \u2014 thanks to \u00d8rjan for pointing that one out), and whereas there exists a workaround for that in Haskell 98 without the use of language pragmas, the easiest way to solve this one (and it's also completely safe and idiomatic) is to add the following pragma:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{-# LANGUAGE FlexibleInstances #-}\n</code></pre>\n\n<p>\u2014 this also enables <code>TypeSynonymInstances</code> so you don't need to keep both pragmas.</p>\n"}], "owner": {"reputation": 121, "user_id": 5459759, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3cbbdd3ca3da640706b554b4e3483d81?s=128&d=identicon&r=PG&f=1", "display_name": "Vigo", "link": "https://stackoverflow.com/users/5459759/vigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "accepted_answer_id": 33357474, "answer_count": 2, "score": 2, "last_activity_date": 1445941524, "creation_date": 1445900077, "last_edit_date": 1445937364, "question_id": 33357033, "link": "https://stackoverflow.com/questions/33357033/illegal-instance-declaration", "title": "Illegal instance declaration", "body": "<p>I just created a class with Haskell but I have a problem with one of my instances. I've created this class: </p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>class Symbol a where\n  nameSym :: a -&gt; String\n</code></pre>\n\n<p>and these instances:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>instance Symbol Double where\n  nameSym db = show db \n\ninstance Symbol String where\n  nameSym str = str\n</code></pre>\n\n<p>but when compiling, I get the following error message: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Illegal instance declaration for `Symbol String'\n  (All instance types must be of the form (T t1 ... tn)\n   where T is not a synonym.\nIn the instance declaration for `Symbol String'\n</code></pre>\n\n<p>Do you know what is the problem?</p>\n"}, {"tags": ["list", "haskell", "recursion"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1445893699, "post_id": 33355449, "comment_id": 54507148, "body": "Could not reproduce: in my tests, it is indeed returning results paired up with <code>1</code>, <code>2</code>, and <code>3</code>; for example, <code>appd [1,2,3] [(1,2),(6,5),(3,5)]</code> appears to correctly return both the <code>2</code> from <code>(1,2)</code> and the <code>5</code> from <code>(3,5)</code> before crashing. If I add a <code>(2,4)</code> at the end, it does return the <code>4</code> before crashing. However, this function is badly partial -- it eventually crashes on almost every input. Perhaps if you fix that (try inspecting the output of GHC with <code>-fwarn-incomplete-patterns</code> on), it will behave more like you want it to."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1445893777, "post_id": 33355449, "comment_id": 54507182, "body": "The way to answer your question is to take the test case which you&#39;ve isolated (<code>appd [1,2,3] [(1,2),(6,5),(3,5)]</code>) and follow it&#39;s execution carefully in your head, on paper, or with a debugger, and to think hard."}, {"owner": {"reputation": 301, "user_id": 4741191, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/227bfe2418d3a233ea3a46545cb9b5c5?s=128&d=identicon&r=PG&f=1", "display_name": "dreamPr", "link": "https://stackoverflow.com/users/4741191/dreampr"}, "edited": false, "score": 0, "creation_date": 1445893923, "post_id": 33355449, "comment_id": 54507267, "body": "I tried, but I can&#39;t see mistake"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445934414, "post_id": 33355449, "comment_id": 54520988, "body": "What do you mean by <i>&quot;save second element of this tuple&quot;</i>? what does &quot;saving&quot; mean here? by saving do you mean that the output lists will contain that item? with <code>[1,2,3]</code> and <code>[(1,2),(6,5),(3,5)]</code>, should <code>appd</code> return <code>[1,3]</code>? do the input lists have to have equal lengths? is the 2nd element of the tuples ever used at all?"}, {"owner": {"reputation": 301, "user_id": 4741191, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/227bfe2418d3a233ea3a46545cb9b5c5?s=128&d=identicon&r=PG&f=1", "display_name": "dreamPr", "link": "https://stackoverflow.com/users/4741191/dreampr"}, "edited": false, "score": 0, "creation_date": 1446153316, "post_id": 33355449, "comment_id": 54638576, "body": "It takes number 1 from first list and compares to second lists each tuple first element, it compares 1 to 1, 1 to 6, 1 to 3 if comparison is true then it adds to result tuples second element, in this case it would be 1. Then it takes next element from firt list and does the copmarison again - 2 to 1, 2 to 6, 2 to 3....."}], "answers": [{"comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1445938206, "post_id": 33363335, "comment_id": 54523129, "body": "ah, yes, I forgot to mention what <code>&lt;$&gt;</code> does."}, {"owner": {"reputation": 301, "user_id": 4741191, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/227bfe2418d3a233ea3a46545cb9b5c5?s=128&d=identicon&r=PG&f=1", "display_name": "dreamPr", "link": "https://stackoverflow.com/users/4741191/dreampr"}, "edited": false, "score": 0, "creation_date": 1445968459, "post_id": 33363335, "comment_id": 54544373, "body": "Thank you a lot!! Unfortunately my function still does not work even with imrovements, but your suggested simplier implementation works fine. Here is sample input:[1,2,3,4][(1,5),(3,8),(5,5),(4,3),(2,9)] output: [5,9,8,3]"}, {"owner": {"reputation": 301, "user_id": 4741191, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/227bfe2418d3a233ea3a46545cb9b5c5?s=128&d=identicon&r=PG&f=1", "display_name": "dreamPr", "link": "https://stackoverflow.com/users/4741191/dreampr"}, "edited": false, "score": 0, "creation_date": 1445968846, "post_id": 33363335, "comment_id": 54544604, "body": "O, sorry, checked again - also simplier version gives incorrect output"}, {"owner": {"reputation": 301, "user_id": 4741191, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/227bfe2418d3a233ea3a46545cb9b5c5?s=128&d=identicon&r=PG&f=1", "display_name": "dreamPr", "link": "https://stackoverflow.com/users/4741191/dreampr"}, "edited": false, "score": 0, "creation_date": 1446057523, "post_id": 33363335, "comment_id": 54589437, "body": "It takes elements from first list one by one, than compares it  with tuples from other list. It compares element from first list with each tuples first element and if they are equal then second element from tuple is added to result. In this case it takes 1 from first list and compare it to 1, 3, 5, 4 and 2 =&gt; 1=1 so add 5 to result. Then it takes 2 and repeats the same action"}], "tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": false, "score": 1, "last_activity_date": 1445938233, "last_edit_date": 1445938233, "creation_date": 1445935588, "answer_id": 33363335, "question_id": 33355449, "link": "https://stackoverflow.com/questions/33355449/haskell-recursion-in-lists/33363335#33363335", "title": "Haskell recursion in lists", "body": "\n\n<p><em>First of all, let me note that you should have included the error message you were getting. You should also have shown us some sample output and sample input.</em></p>\n\n<hr>\n\n<p>Anyway: your current <code>appd</code> doesn't handle empty lists, so you need to start by adding cases for that:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>appd _     []          = []\nappd []    bs          = snd &lt;$&gt; bs  -- you can decide to use [] instead\nappd (a:e) ((c,b):bs)\n  | a == c &amp;&amp; bs /= [] = b:appd(a:e) bs\n  | a /= c &amp;&amp; bs /= [] = appd (a:e) bs\n  | a /= c &amp;&amp; bs == [] = appd e ((c,b):bs)\n  | otherwise          = b:appd e ((c,b):bs)\n</code></pre>\n\n<p>now your function works on the input you've provided, but I'm not sure it returns the results you desire:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>*Main&gt; appd [1,2,3] [(1,2),(6,5),(3,5)]\n[2,5,5]\n</code></pre>\n\n<hr>\n\n<p><strong>Furthermore</strong>, I've cleaned up your code a little bit and annotated your function with an explicit type signature:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>appd :: (Eq a, Eq b) =&gt; [a] -&gt; [(a,b)] -&gt; [b]\nappd []         bs      = snd &lt;$&gt; bs\nappd _          []      = []\nappd as@(a:ass) bs@((c,b):bss)\n  | a == c &amp;&amp; bss /= [] = b : appd as  bss\n  | a /= c &amp;&amp; bss /= [] =     appd as  bss\n  | a /= c &amp;&amp; bss == [] =     appd ass bs\n  | otherwise           = b : appd ass bs\n</code></pre>\n\n<hr>\n\n<p><strong>Also</strong>, you can use a much simpler, non-recursive implementation to get the same results as above:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>appd :: (Eq a, Eq b) =&gt; [a] -&gt; [(a,b)] -&gt; [b]\nappd as bs = snd &lt;$&gt; filter (\\(a,_) -&gt; a `elem` as) bs\n</code></pre>\n\n<p>or if you like <a href=\"https://wiki.haskell.org/Pointfree\" rel=\"nofollow\">point free</a> (a.k.a. <a href=\"https://en.wikipedia.org/wiki/Tacit_programming\" rel=\"nofollow\">tacit</a>):</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>appd :: (Eq a, Eq b) =&gt; [a] -&gt; [(a,b)] -&gt; [b]\nappd as = (snd &lt;$&gt;) . filter ((`elem` as) . fst)\n</code></pre>\n\n<hr>\n\n<p><strong>Note:</strong>  <code>&lt;$&gt;</code> is an alias for <code>fmap</code>, which in turn behaves exactly like <code>map</code> when used on lists.</p>\n"}], "owner": {"reputation": 301, "user_id": 4741191, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/227bfe2418d3a233ea3a46545cb9b5c5?s=128&d=identicon&r=PG&f=1", "display_name": "dreamPr", "link": "https://stackoverflow.com/users/4741191/dreampr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445938233, "creation_date": 1445892935, "last_edit_date": 1445934197, "question_id": 33355449, "link": "https://stackoverflow.com/questions/33355449/haskell-recursion-in-lists", "title": "Haskell recursion in lists", "body": "\n\n<p>I have code like this:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>appd (a:e) ((c,b):bs) | a == c &amp;&amp; bs /= [] = b:appd(a:e) bs\n                      | a /= c &amp;&amp; bs /= [] = appd (a:e) bs\n                      | a /= c &amp;&amp; bs == [] = appd e ((c,b):bs)\n                      | otherwise          = b:appd e ((c,b):bs)\n</code></pre>\n\n<p>It loops throught two lists like <code>[1,2,3]</code> and <code>[(1,2),(6,5),(3,5)]</code> and takes first element of first list and compares it to first element of each tuple in other list, if they are equal then save second element of this tuple. It works fine, but comparison does not work if I take second element of first list, in this case <code>2</code>.</p>\n\n<p>For example if I have lists like <code>[1,2,3]</code> and <code>[(1,2),(6,5),(3,5)]</code>, then function takes <code>1</code> from first list and compares to <code>1</code>, then to <code>6</code>, then to <code>3</code>, that works but it does not take second element of first list - <code>2</code> and does not do the comparison again. Whats wrong?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1445891696, "post_id": 33354988, "comment_id": 54505995, "body": "How you do stretch a String vertically?"}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 2, "creation_date": 1445891749, "post_id": 33354988, "comment_id": 54506019, "body": "A Haskell <code>String</code> is a list of characters. It is not clear what you mean by &quot;stretch&quot;; adding some examples of the desired output might help. Furthermore, your pseudocode definition does not match its type signature."}, {"owner": {"reputation": 375, "user_id": 2533786, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2cada3fb91b06579b0ab2b186695b32d?s=128&d=identicon&r=PG", "display_name": "bimmo", "link": "https://stackoverflow.com/users/2533786/bimmo"}, "edited": false, "score": 0, "creation_date": 1445892971, "post_id": 33354988, "comment_id": 54506740, "body": "If you have a list of strings representing the rows, and need to stretch the ANSI image x times wide and y times high, would you simply repeat the individual characters x times and repeat whole rows y times? Then shove the results together."}, {"owner": {"reputation": 97, "user_id": 4233203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab5232d20dd6b536e238b104ea6d66fa?s=128&d=identicon&r=PG&f=1", "display_name": "symon", "link": "https://stackoverflow.com/users/4233203/symon"}, "edited": false, "score": 0, "creation_date": 1445894904, "post_id": 33354988, "comment_id": 54507771, "body": "yes i believe that would work."}, {"owner": {"reputation": 97, "user_id": 4233203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab5232d20dd6b536e238b104ea6d66fa?s=128&d=identicon&r=PG&f=1", "display_name": "symon", "link": "https://stackoverflow.com/users/4233203/symon"}, "edited": false, "score": 0, "creation_date": 1445897883, "post_id": 33354988, "comment_id": 54509132, "body": "I have put together this but still cannot work out the bugs I&#39;m almost there as I can get it to work if I import Pictures hiding (printPicture) but i don&#39;t want to do this I have <code>scaleX :: [Char] -&gt; Int -&gt; [Char]     scaleX line n = foldl (++) &quot;&quot; [replicate n c | c&lt;-line] \t \tscaleY :: Int -&gt; Int -&gt; IO()     scaleY a n = concat [replicate n line | line&lt;-a] \t \tscale :: Int -&gt; Int -&gt; IO()     scale a n       | n &lt;= 0     = []       | otherwise  = scaleY [scaleX line n | line&lt;-a] n </code>"}], "answers": [{"comments": [{"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 1, "creation_date": 1445899686, "post_id": 33356725, "comment_id": 54509800, "body": "I think you need parentheses around the final <code>stretch m</code> in the definition of <code>expand</code>. For me at least, with the code as-is, GHCi complains that <code>map</code> is applied to too many arguments."}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "reply_to_user": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 1, "creation_date": 1445899745, "post_id": 33356725, "comment_id": 54509821, "body": "@Mr.F Corrected. Thanks!"}, {"owner": {"reputation": 97, "user_id": 4233203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab5232d20dd6b536e238b104ea6d66fa?s=128&d=identicon&r=PG&f=1", "display_name": "symon", "link": "https://stackoverflow.com/users/4233203/symon"}, "edited": false, "score": 0, "creation_date": 1445902459, "post_id": 33356725, "comment_id": 54510719, "body": "I did it <code>stretch n m = map (stretch1 n) . (stretch1 m)</code> but all works the same. Thanks @ReinHenrichs"}], "tags": [], "owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "is_accepted": true, "score": 4, "last_activity_date": 1445902736, "last_edit_date": 1445902736, "creation_date": 1445898392, "answer_id": 33356725, "question_id": 33354988, "link": "https://stackoverflow.com/questions/33354988/how-to-stretch-a-string-both-horizontally-and-vertically-in-haskell/33356725#33356725", "title": "how to stretch a string both horizontally and vertically in haskell", "body": "<p><strong>This answer is <a href=\"https://wiki.haskell.org/Literate_programming\" rel=\"nofollow\">literate Haskell</a>. You can save it with a <code>.lhs</code> extension and load it in GHCi.</strong></p>\n\n<p>To stretch a list of elements, we need to replicate each element and then stitch back the resulting list of lists into a single list. To do this, we map the <code>replicate</code> function over the elements and then stitch the resulting lists back together in a single step using <code>concatMap</code>:</p>\n\n<pre><code>&gt; stretch :: Int -&gt; [a] -&gt; [a]\n&gt; stretch n = concatMap (replicate n)\n</code></pre>\n\n<p>NB: This could also be defined <em>pointfree</em> as</p>\n\n<pre><code>stretch = concatMap . replicate\n</code></pre>\n\n<p>Now we can stretch a grid (a list of lists) by stretching the rows and by mapping over the rows to stretch the elements inside them:</p>\n\n<pre><code>&gt; expand :: Int -&gt; Int -&gt; [[a]] -&gt; [[a]]\n&gt; expand n m = stretch n . map (stretch m)\n</code></pre>\n\n<p><em>Can we reverse the order with the same result (<code>expand n m = map (stretch m) . stretch n</code>)? Why or why not?</em></p>\n\n<p>Now the only missing piece to make it work with your example is to convert back and forth between a string containing newlines and a list of strings split on newlines. <code>lines</code> and <code>unlines</code> will do this for us. (If your actual application involves grids rather than strings, you won't need to do this.)</p>\n\n<pre><code>&gt; expansion :: Int -&gt; Int -&gt; String -&gt; String\n&gt; expansion n m = unlines . expand n m . lines\n</code></pre>\n\n<p><em>Why do we use <code>String</code> here when before we used <code>[a]</code>?</em></p>\n\n<p>Now to test it out:</p>\n\n<pre><code>\u03bb&gt; putStrLn $ expansion 2 2 \"#.#\\n..#\"\n##..##\n##..##\n....##\n....##\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 4233203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab5232d20dd6b536e238b104ea6d66fa?s=128&d=identicon&r=PG&f=1", "display_name": "symon", "link": "https://stackoverflow.com/users/4233203/symon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 1, "accepted_answer_id": 33356725, "answer_count": 1, "score": 1, "last_activity_date": 1445902736, "creation_date": 1445891366, "last_edit_date": 1445892591, "question_id": 33354988, "link": "https://stackoverflow.com/questions/33354988/how-to-stretch-a-string-both-horizontally-and-vertically-in-haskell", "title": "how to stretch a string both horizontally and vertically in haskell", "body": "<p>I need to stretch a string in haskell both horizontally and vertically by the given input of two int values. I have the correct code, just don't know how to implement it correctly:</p>\n\n<pre><code> expansion :: Int -&gt; Int -&gt; String -&gt; String\n expansion extendTo e n m a = setSize e (max n $ nrows a) (max m $ ncols a) a\n</code></pre>\n\n<p>in the book it states scale the input picture by the integer provided as the first and second argument. For instance if exPic is the picture: </p>\n\n<pre><code>#.#\n..#\n</code></pre>\n\n<p>then the result of expansion exPic 2 2 should be:</p>\n\n<pre><code>##..##\n##..##\n....##\n....##\n</code></pre>\n\n<p>The book I'm using gives no solutions otherwise i wouldn't have to ask!!</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1445902077, "post_id": 33354753, "comment_id": 54510612, "body": "Note that <code>[(Deck)]</code> is just <code>[Deck]</code> and likewise for <code>[(Card)]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1445940021, "post_id": 33361358, "comment_id": 54524388, "body": "Thanks so much @Mario. I will try that and see the result"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1445968966, "post_id": 33361358, "comment_id": 54544682, "body": "How can I control the number of cards I am passing into Columns for example. How can I split those columns into 8 equal of 6 each?"}, {"owner": {"reputation": 605, "user_id": 1793740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a57f612171efd0a50c8a99f99cdd2e?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/1793740/mario"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1445990784, "post_id": 33361358, "comment_id": 54555150, "body": "Take a look at the docs for Lists, in particular Sublists. <a href=\"http://hackage.haskell.org/package/base-4.8.1.0/docs/Prelude.html#g:18\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.8.1.0/docs/Prelude.html#g&zwnj;&#8203;:18</a>"}, {"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1446045124, "post_id": 33361358, "comment_id": 54580777, "body": "eODeal::EOBoard eODeal = EOBoard { foundations = defaultFoundations,                    columns=defaultColumns pack48, --first 48 cards                     reserve=defaultReserve (shuffle pack) } If I have this implementation, how can I access foundations field of that EOBoard for example? To make some moves between the cards?"}, {"owner": {"reputation": 605, "user_id": 1793740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a57f612171efd0a50c8a99f99cdd2e?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/1793740/mario"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1447023798, "post_id": 33361358, "comment_id": 54975539, "body": "If you have an <code>EOBoard</code>, the ADT will define &quot;getters&quot; with the names of each attribute. I.e <code>foundations :: EOBoard -&gt; Deck</code>. So if you had some <code>eoboard</code>, then <code>foundations(eoboard)</code> would give you the foundations value."}, {"owner": {"reputation": 605, "user_id": 1793740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a57f612171efd0a50c8a99f99cdd2e?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/1793740/mario"}, "reply_to_user": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1447024640, "post_id": 33361358, "comment_id": 54975785, "body": "Sounds like you might benefit from reading up about ADTs, would recommend this whole guide, but relevant is Chapter 8: <a href=\"http://learnyouahaskell.com/making-our-own-types-and-typeclasses#algebraic-data-types\" rel=\"nofollow noreferrer\">learnyouahaskell.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 605, "user_id": 1793740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a57f612171efd0a50c8a99f99cdd2e?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/1793740/mario"}, "is_accepted": true, "score": 5, "last_activity_date": 1449168712, "last_edit_date": 1449168712, "creation_date": 1445927857, "answer_id": 33361358, "question_id": 33354753, "link": "https://stackoverflow.com/questions/33354753/solitaire-implementation-in-haskell/33361358#33361358", "title": "Solitaire implementation in haskell", "body": "<p>Looks like you're off to a good start! Perhaps you're ready to put some of these components together to form your board.</p>\n\n<p>You might consider making a Board/Game ADT.</p>\n\n<p>You might then like to have a default function, which sets up the default state of your Board.</p>\n\n<ul>\n<li>A <code>defaultFoundation</code> which returns a <code>Foundation</code> containing four empty <code>Deck</code>s</li>\n<li>A <code>defaultColumns</code> which takes a <code>Deck</code> and splits it, returning a <code>Columns</code> containing 8 <code>Deck</code>s with 6 cards each (maybe you want to only pass in the first 48 cards from the Deck only).</li>\n<li>A <code>defaultReserves</code> which returns a <code>Reserve</code> with 8 <code>Deck</code>s, 4 with cards and 4 empty (maybe here is where you want to pass in those remaining 4 cards from the <code>Deck</code>)</li>\n</ul>\n\n<p>You're doing fine so far, take it one step at a time. :)</p>\n"}], "owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 858, "favorite_count": 1, "accepted_answer_id": 33361358, "answer_count": 1, "score": 2, "last_activity_date": 1449168712, "creation_date": 1445890396, "last_edit_date": 1445890763, "question_id": 33354753, "link": "https://stackoverflow.com/questions/33354753/solitaire-implementation-in-haskell", "title": "Solitaire implementation in haskell", "body": "<p>I want to implement a simple <a href=\"https://en.wikipedia.org/wiki/Eight_Off\" rel=\"nofollow\">8off solitaire game</a> in haskell and I am not quite sure how to define my board, and how to make a function to return a random starting board. How can I modify myBoard and my data structure? Until now, I have these: </p>\n\n<pre><code>data Pip = A|TW0|THREE|FOUR|FIVE|SIX|SEVEN|EIGHT|NINE|TEN|J|Q|K  --pip value\n       deriving (Eq,Show)\ndata Suit = S|H|D|C                                              --suit\n       deriving (Eq,Show)\ntype Card = (Pip,Suit)                                           --card\ntype Deck = [(Card)]                                             --deck\ntype Foundations = [(Deck)]                                        foundations\ntype Columns = [(Deck)]                                          --columns\ntype Reserve = [(Deck)]                                          --reserve\ntype EOBoard = [(Deck)]\n\nmyBoard::Deck-&gt;EOBoard\nmyBoard pack = [shuffle pack]\n</code></pre>\n\n<p>which returns me, this:</p>\n\n<pre><code>[[(K,D),(TW0,H),(SEVEN,C),(SEVEN,S),(THREE,D),(NINE,S),(THREE,C),(FOUR,H),(THREE,S),(TW0,D),(TW0,C),(FOUR,S),(K,S),(TEN,D),(J,S),(EIGHT,H),(FOUR,D),(NINE,H),(SEVEN,H),(A,S),(SIX,S),(EIGHT,S),(FIVE,S),(FOUR,C),(K,H),(Q,D),(THREE,H),(TEN,H),(A,D),(EIGHT,C),(NINE,D),(Q,H),(J,D),(J,C),(TEN,C),(Q,S),(Q,C),(J,H),(NINE,C),(SIX,C),(FIVE,H),(SEVEN,D),(A,C),(TW0,S),(EIGHT,D),(FIVE,D),(TEN,S),(K,C),(A,H),(SIX,D),(FIVE,C),(SIX,H)]]\n</code></pre>\n"}, {"tags": ["haskell", "cabal", "idris"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 3, "creation_date": 1445889243, "post_id": 33354049, "comment_id": 54504525, "body": "Not sure off the top of my head, but the fact that you are using sudo to install things with cabal is itself questionable - I&#39;d drop the sudo.  Secondly, the fact that a sudo process is still trying to write logs to a user directory is similarly questionable."}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1445889453, "post_id": 33354049, "comment_id": 54504648, "body": "I agree - try doing it in a sandbox (you just have to add a sym-link to the bin somewhere into your path afterwards) - if this does fail kill your ~/.cabal and ~/.ghc (same for the global rep) and restart ... honestly: always use sandboxes or go for stack - also see <a href=\"https://github.com/idris-lang/Idris-dev/wiki/Installing-an-Idris-Development-version-in-a-sandbox\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 375, "user_id": 4232796, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42912716b8f59e0f6cfd0cbbe6a74bdf?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle McKean", "link": "https://stackoverflow.com/users/4232796/kyle-mckean"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1445904643, "post_id": 33354049, "comment_id": 54511366, "body": "@Carsten I tried the sandbox, didnt work, then I nuked my .cabal and .ghc, still didnt work and I am getting the same type of error, man I hate cabal, cabal error here: <a href=\"http://lpaste.net/144011\" rel=\"nofollow noreferrer\">lpaste.net/144011</a>"}, {"owner": {"reputation": 375, "user_id": 4232796, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42912716b8f59e0f6cfd0cbbe6a74bdf?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle McKean", "link": "https://stackoverflow.com/users/4232796/kyle-mckean"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1445905134, "post_id": 33354049, "comment_id": 54511501, "body": "@Carsten I tried that link you gave me and I am ending up with the same log error I keep getting something must be wrong with my cabal"}, {"owner": {"reputation": 2501, "user_id": 2868481, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d32920192c6bebcffb83fffd557b9553?s=128&d=identicon&r=PG&f=1", "display_name": "d8d0d65b3f7cf42", "link": "https://stackoverflow.com/users/2868481/d8d0d65b3f7cf42"}, "edited": false, "score": 0, "creation_date": 1445908075, "post_id": 33354049, "comment_id": 54512379, "body": "Cannot reproduce. Since your error message is that some file does not exists - perhaps the file could not be created since your disk (quota) is full."}, {"owner": {"reputation": 375, "user_id": 4232796, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42912716b8f59e0f6cfd0cbbe6a74bdf?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle McKean", "link": "https://stackoverflow.com/users/4232796/kyle-mckean"}, "reply_to_user": {"reputation": 2501, "user_id": 2868481, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d32920192c6bebcffb83fffd557b9553?s=128&d=identicon&r=PG&f=1", "display_name": "d8d0d65b3f7cf42", "link": "https://stackoverflow.com/users/2868481/d8d0d65b3f7cf42"}, "edited": false, "score": 0, "creation_date": 1445915434, "post_id": 33354049, "comment_id": 54514146, "body": "@d8d0d65b3f7cf42 what does that mean?"}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1445922396, "post_id": 33354049, "comment_id": 54516116, "body": "can you upload the error messages when you do <code>cabal install free --verbose=3</code>?"}, {"owner": {"reputation": 375, "user_id": 4232796, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42912716b8f59e0f6cfd0cbbe6a74bdf?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle McKean", "link": "https://stackoverflow.com/users/4232796/kyle-mckean"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1447211818, "post_id": 33354049, "comment_id": 55061295, "body": "@Carsten I tried using stack and this was the results it failed for a different reason: <a href=\"http://lpaste.net/145017\" rel=\"nofollow noreferrer\">lpaste.net/145017</a>"}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1447219001, "post_id": 33354049, "comment_id": 55063028, "body": "oh ok (you should add this to your question) - indeed I think I had this before and if I am not wrong this simply means that you have some missing dependecies to <code>tinfo-dev</code> (see the part where it says it cannot load a <code>.so</code>/<code>.dll</code> for this?) - on my linux machine I did find it in the <code>ncursesXY-dev</code> package - so try to look for it and install it - for example on ubuntu/mint/... I would go with <a href=\"http://packages.ubuntu.com/wily/libncurses5-dev\" rel=\"nofollow noreferrer\">libncurses5-dev</a>: <code>sudo apt-get install libncurses5-dev</code> - ofc if you find a <code>tinfo-dev</code> you should be fine too! (ncurses don&#39;t hurt though)"}, {"owner": {"reputation": 375, "user_id": 4232796, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42912716b8f59e0f6cfd0cbbe6a74bdf?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle McKean", "link": "https://stackoverflow.com/users/4232796/kyle-mckean"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1447267155, "post_id": 33354049, "comment_id": 55088415, "body": "@Carsten That fixed my problems! Thanks so much"}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1447270805, "post_id": 33354049, "comment_id": 55090551, "body": "I&#39;ll add it as an answer - I hope you don&#39;t mind"}], "answers": [{"tags": [], "owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "is_accepted": false, "score": 1, "last_activity_date": 1447270923, "creation_date": 1447270923, "answer_id": 33658571, "question_id": 33354049, "link": "https://stackoverflow.com/questions/33354049/cabal-building-failling-when-installing-idris/33658571#33658571", "title": "Cabal building failling when installing idris", "body": "<p>if I am not wrong this simply means that you have some missing dependecies to `tinfo-dev (see the part where it says it c<strong>annot load a .so/.dll</strong> for this?)</p>\n\n<p>on my <em>Linux Mint</em> machine I did find those libs in the <code>ncursesXY-dev</code> package - so try to look for it and install it </p>\n\n<p>for <em>ubuntu/mint/...</em> I would recommend <code>libncurses5-dev</code>: </p>\n\n<pre><code>sudo apt-get install libncurses5-dev \n</code></pre>\n\n<p>ofc if you find a <code>tinfo-dev</code> this should be fine too! </p>\n"}], "owner": {"reputation": 375, "user_id": 4232796, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42912716b8f59e0f6cfd0cbbe6a74bdf?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle McKean", "link": "https://stackoverflow.com/users/4232796/kyle-mckean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447271037, "creation_date": 1445887828, "last_edit_date": 1447271037, "question_id": 33354049, "link": "https://stackoverflow.com/questions/33354049/cabal-building-failling-when-installing-idris", "title": "Cabal building failling when installing idris", "body": "<p>When I run the command <code>sudo cabal install idris</code> I run into this error:</p>\n\n<pre><code>Build log ( /home/kyle/.cabal/logs/xss-sanitize-0.3.5.6.log ):\ncabal: /home/kyle/.cabal/logs/xss-sanitize-0.3.5.6.log: does not exist\n</code></pre>\n\n<p>What can I do to fix this?</p>\n\n<hr>\n\n<p>this is the crucial part:</p>\n\n<pre><code>&lt;command line&gt;: can't load .so/.DLL for: \n    libtinfo.so (libtinfo.so: cannot open shared object file: \n                 No such file or directory)\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "is_accepted": false, "score": 1, "last_activity_date": 1445886659, "creation_date": 1445886659, "answer_id": 33353719, "question_id": 33353580, "link": "https://stackoverflow.com/questions/33353580/how-to-retrieve-first-false-condition-applied-to-a-list/33353719#33353719", "title": "How to retrieve first false condition applied to a list", "body": "<p>The usual way to test a bunch of conditions like that is to use guards. Except that those stop at <code>True</code> rather than <code>False</code>, but you can reverse it with <code>not</code>:</p>\n\n<pre><code>test l\n  | not (a l) = ...result if a l fails...\n  | not (b l) = ...result if b l fails...\n  | not (c l) = ...result if c l fails...\n  ...\n  | otherwise = ...result if no condition fails...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 6, "creation_date": 1445888824, "post_id": 33353783, "comment_id": 54504270, "body": "You might like <a href=\"https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-List.html#v:find\" rel=\"nofollow noreferrer\"><code>find :: (a -&gt; Bool) -&gt; t a -&gt; Maybe a</code></a>, as in, <code>firstFalse fs x = find ($x) fs</code>."}, {"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1446026772, "post_id": 33353783, "comment_id": 54568243, "body": "@DanielWagner That gets the test reversed, though."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1446050733, "post_id": 33353783, "comment_id": 54584995, "body": "@&#216;rjanJohansen Yep, you&#39;re right. Luckily cdk fixed it silently when he added it to his answer. Thanks, cdk! =)"}], "tags": [], "owner": {"reputation": 6415, "user_id": 1416525, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f23f148b7241e345a61d193ed205685?s=128&d=identicon&r=PG", "display_name": "cdk", "link": "https://stackoverflow.com/users/1416525/cdk"}, "is_accepted": false, "score": 7, "last_activity_date": 1445894702, "last_edit_date": 1445894702, "creation_date": 1445886860, "answer_id": 33353783, "question_id": 33353580, "link": "https://stackoverflow.com/questions/33353580/how-to-retrieve-first-false-condition-applied-to-a-list/33353783#33353783", "title": "How to retrieve first false condition applied to a list", "body": "<p>You should consider what your desired function will return if none of the applied function returns <code>False</code>. This is a classic use case for <code>Maybe</code></p>\n\n<p>It sounds like you want something like this:</p>\n\n<pre><code>firstFalse :: [a -&gt; Bool] -&gt; a -&gt; Maybe (a -&gt; Bool)\nfirstFalse fs x = safeHead (dropWhile ($ x) fs)\n    where safeHead []    = Nothing\n          safeHead (a:_) = Just a\n</code></pre>\n\n<p>alternately,</p>\n\n<pre><code>firstFalse fs x = find (not . ($ x)) fs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": false, "score": 1, "last_activity_date": 1445886903, "creation_date": 1445886903, "answer_id": 33353795, "question_id": 33353580, "link": "https://stackoverflow.com/questions/33353580/how-to-retrieve-first-false-condition-applied-to-a-list/33353795#33353795", "title": "How to retrieve first false condition applied to a list", "body": "<p>If <code>conds</code> is your list of conditions ( i.e. functions of type <code>[a] -&gt; Bool</code>) and <code>list</code> is your list of items,\nthis expression returns the conditions which fail:</p>\n\n<pre><code>filter (\\cond -&gt; not (cond list)) list\n-- also: [ cond | cond &lt;- conds, not (cond list) ]\n</code></pre>\n\n<p>So to find the first condition which fails you can use:</p>\n\n<pre><code>firstFailure conds list =\n    case filter (\\cond -&gt; not (cond list) of\n        []        -&gt; ... do something ...\n        (cond:_)  -&gt; ... cond is the first failing condition ...\n</code></pre>\n\n<p>Note you should handle the case where all conditions pass.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4709293"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1445894702, "creation_date": 1445886135, "question_id": 33353580, "link": "https://stackoverflow.com/questions/33353580/how-to-retrieve-first-false-condition-applied-to-a-list", "title": "How to retrieve first false condition applied to a list", "body": "<p>I'm writing a program in Haskell that assumes some input from stdin which should be validated according to some parameters.</p>\n\n<p>From a bunch of conditions (e.g. conditions a,b,c,... ; each one returns a bool) applied to a list, how can I retrieve the first one that gets False?</p>\n\n<pre><code>E.g. \ncondition a applied to list l = True;\ncondition b applied to list l = False;\ncondition c applied to list l = False;\ncondition d applied to list l = True;\ncondition e applied to list l = False;\n... = doesn't matter\n</code></pre>\n\n<p><strong>The idea would be to apply some other function to list l knowing that condition b == False (in order to retrieve line error)</strong></p>\n"}, {"tags": ["haskell", "monads", "applicative", "maybe"], "comments": [{"owner": {"reputation": 6415, "user_id": 1416525, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6f23f148b7241e345a61d193ed205685?s=128&d=identicon&r=PG", "display_name": "cdk", "link": "https://stackoverflow.com/users/1416525/cdk"}, "edited": false, "score": 0, "creation_date": 1445884115, "post_id": 33352839, "comment_id": 54501640, "body": "Seems pretty concise to me already, you could use <code>bool :: Bool -&gt; a -&gt; a -&gt; a</code> instead of <code>if .. then .. else</code> if you find that more appealing"}], "answers": [{"comments": [{"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 3, "creation_date": 1445887863, "post_id": 33352976, "comment_id": 54503728, "body": "<a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/libraries/base-4.8.1.0/Control-Monad.html#v:guard\" rel=\"nofollow noreferrer\"><code>guard</code></a> doesn&#39;t use the notorious <code>fail</code>. It used to use <code>mzero</code>, but since AMP it has been generalized to use <code>Alternative</code>&#39;s <code>empty</code>."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1445894427, "post_id": 33352976, "comment_id": 54507534, "body": "@&#216;rjanJohansen, oops! Glad to hear it."}, {"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 1, "creation_date": 1445905535, "post_id": 33352976, "comment_id": 54511611, "body": "I prefer to define <code>(&lt;?&gt;) :: Alternative f =&gt; Bool -&gt; f a -&gt; f a; True  &lt;?&gt; x = x; False &lt;?&gt; x = empty</code>, so instead of <code>x &lt;$ guard c</code> we can write <code>c &lt;?&gt; pure x</code>, which looks more self-descriptive to me. <code>mfilter</code> can be of use too."}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": true, "score": 9, "last_activity_date": 1445894538, "last_edit_date": 1445894538, "creation_date": 1445883882, "answer_id": 33352976, "question_id": 33352839, "link": "https://stackoverflow.com/questions/33352839/function-like-when-but-returns-a-value/33352976#33352976", "title": "Function like &quot;when&quot; but returns a value?", "body": "<p>It sounds like you're looking for <code>guard</code>:</p>\n\n<pre><code>guard :: Alternative f =&gt; Bool -&gt; f ()\nguard c = if c then pure () else empty\n</code></pre>\n\n<p>Then you can rewrite</p>\n\n<pre><code>if c then Just x else Nothing\n</code></pre>\n\n<p>as</p>\n\n<pre><code>x &lt;$ guard c\n</code></pre>\n\n<p>When you're not going straight to <code>Just</code>, consider</p>\n\n<pre><code>guard c *&gt; e\n</code></pre>\n\n<p>which works very well with <code>do</code> notation as well. Thanks to Daniel Wagner for the <code>&lt;$</code> expression.</p>\n\n<p>Note also that</p>\n\n<pre><code>fromMaybe x . fmap f\n</code></pre>\n\n<p>is better written</p>\n\n<pre><code>maybe x f\n</code></pre>\n"}], "owner": {"reputation": 14449, "user_id": 105678, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/859da59b3e4097fa659aabb55412de10?s=128&d=identicon&r=PG", "display_name": "Sean Clark Hess", "link": "https://stackoverflow.com/users/105678/sean-clark-hess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 33352976, "answer_count": 1, "score": 3, "last_activity_date": 1445894538, "creation_date": 1445883439, "question_id": 33352839, "link": "https://stackoverflow.com/questions/33352839/function-like-when-but-returns-a-value", "title": "Function like &quot;when&quot; but returns a value?", "body": "<p>Is there a way to write this more concisely? I have many functions that look like this. Each of them has some boolean condition, which then either return a value or <code>Nothing</code></p>\n\n<pre><code>rootMiddleware :: Application -&gt; Application\nrootMiddleware app req respond =\n    fromMaybe next . fmap respond $\n          serveIndex [\"questionnaire\"] \"../app/answer/answer.html\" req\n      &lt;|&gt; serveIndex [\"survey\"] \"../app/builder/builder.html\" req\n      &lt;|&gt; redirect [] \"/survey/forms\" req\n\n  where\n    next = app req respond\n\nserveIndex :: [Text] -&gt; FilePath -&gt; Request -&gt; Maybe Response\nserveIndex prefix fp req =\n    if prefix `isPrefixOf` pathInfo req\n      then Just $ responseFile status200 [(\"Content-Type\", \"text/html\")] fp Nothing\n      else Nothing\n\nredirect :: [Text] -&gt; ByteString -&gt; Request -&gt; Maybe Response\nredirect pathParts url req =\n    if pathParts == pathInfo req\n      then Just $ redirectTo url\n      else Nothing\n</code></pre>\n\n<p><a href=\"https://hackage.haskell.org/package/base-4.8.1.0/docs/Control-Monad.html#v:when\" rel=\"nofollow\"><code>when</code></a> is really close, but it doesn't let you return a value in the applicative. Is there something equivalent for this case? </p>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 2, "creation_date": 1445882170, "post_id": 33352080, "comment_id": 54500443, "body": "And if efficiency is a concern then this mode of operation can be done using <code>Data.Set</code>.  Another solution would be to not distribute the difference across the union: <code>f a b = (a &lt;&gt; b) \\\\ (a </code>intersect` b)`"}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "reply_to_user": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1445890155, "post_id": 33352080, "comment_id": 54505053, "body": "@ThomasM.DuBuisson I&#39;m by no means a Haskell expert. You should probably provide this as a separate answer as it&#39;s probably better than mine. I&#39;m a noob 90% of the time."}], "tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 2, "last_activity_date": 1445881364, "last_edit_date": 1445881364, "creation_date": 1445881003, "answer_id": 33352080, "question_id": 33351932, "link": "https://stackoverflow.com/questions/33351932/get-list-of-items-that-only-occur-in-one-of-the-lists/33352080#33352080", "title": "Get list of items that only occur in one of the lists", "body": "<p>I think the way I would do it is</p>\n\n<ul>\n<li>let <code>x</code> = intersection of <code>lis1</code> and <code>lis2</code></li>\n<li>let <code>a</code> = difference of <code>lis1</code> and <code>x</code></li>\n<li>let <code>b</code> = difference of <code>lis2</code> and <code>x</code></li>\n<li>result is <code>a</code> concat <code>b</code></li>\n</ul>\n\n<p>Here's a quick demo</p>\n\n<pre><code>import Data.List\n\nlet x = [1,2,3] `intersect` [2,3,4]\n=&gt; [2,3]\n\nlet a = [1,2,3] \\\\ x\n=&gt; [1]\n\nlet b = [2,3,4] \\\\ x\n=&gt; [4]\n\na ++ b\n=&gt; [1,4]\n</code></pre>\n\n<p>This demo uses numbers, but it would work identically with characters or strings.</p>\n"}], "owner": {"reputation": 97, "user_id": 4366970, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1130005165/picture?type=large", "display_name": "Efe Imoloame", "link": "https://stackoverflow.com/users/4366970/efe-imoloame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1445888683, "creation_date": 1445880577, "last_edit_date": 1445881327, "question_id": 33351932, "link": "https://stackoverflow.com/questions/33351932/get-list-of-items-that-only-occur-in-one-of-the-lists", "title": "Get list of items that only occur in one of the lists", "body": "<p>Suppose I have a two lists</p>\n\n<pre><code>lis1 = [\"e\", \"g\", \"t\"] \nlis2 = [\"e\", \"h\", \"g\"]\n</code></pre>\n\n<p>How would I return lis3 after taking the lis1 and lis2 as my parameters?</p>\n\n<pre><code>lis3 = [\"t\", \"h\"]\n</code></pre>\n"}, {"tags": ["algorithm", "haskell", "lambda", "functional-programming", "pointfree"], "comments": [{"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1445888294, "post_id": 33351535, "comment_id": 54503981, "body": "I&#39;d like to point out that although lists already have enough functions defined that you can probably make any use of lists point-free, for a general data type there is no way to turn arbitrary pattern matching into point-free form, without first defining new functions for the purpose."}], "answers": [{"comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1445879793, "post_id": 33351674, "comment_id": 54498926, "body": "Follow up: list-comprehensions can be rewritten in terms of <code>map</code> and <code>filter</code>."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1445883540, "post_id": 33351674, "comment_id": 54501290, "body": "@Bakuriu, don&#39;t you mean <code>concatMap</code>?"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1445883732, "post_id": 33351674, "comment_id": 54501409, "body": "@dfeuer: depends on what comprehension you use :-) Of course both <code>map</code> and <code>filter</code> can be implemented using <code>concatMap</code>."}, {"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 0, "creation_date": 1445887874, "post_id": 33351674, "comment_id": 54503732, "body": "@Bergi Ah, I see. Okay. Yeah no I wouldn&#39;t want to change it to point free, but was very curious about how it&#39;d be done. Much appreciated. Thanks!"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 0, "creation_date": 1445887964, "post_id": 33351674, "comment_id": 54503792, "body": "@Tshimanga: Maybe <code>allNsTill n = enumFromThenTo n (2*n)</code> is a reasonable compromise"}, {"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 0, "creation_date": 1445889290, "post_id": 33351674, "comment_id": 54504548, "body": "@Bergi Yeah that looks pretty good. I was hopeful that there might be a sugared version of the points free form because <code>lengthOf n = [1..n]</code> changes to <code>lengthOf = [1..id]</code>... oh well"}], "tags": [], "owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "is_accepted": true, "score": 8, "last_activity_date": 1445880296, "last_edit_date": 1445880296, "creation_date": 1445879688, "answer_id": 33351674, "question_id": 33351535, "link": "https://stackoverflow.com/questions/33351535/point-free-with-lists-in-haskell/33351674#33351674", "title": "Point Free with lists in Haskell", "body": "<p>That <a href=\"https://www.haskell.org/onlinereport/exps.html#sect3.10\">sequence syntax desugars</a> to a call of the <a href=\"http://hackage.haskell.org/package/base-4.8.1.0/docs/Prelude.html#v:enumFromThenTo\"><code>enumFromThenTo</code> function</a>:</p>\n\n<pre><code>allNsTill n x = [n,2*n..x]\n--&gt;\nallNsTill n x = enumFromThenTo n (2*n) x\n</code></pre>\n\n<p>Now you can convert that to point-free syntax (if you really want). I'd argue though that it gets really unreadable:</p>\n\n<pre><code>allNsTill = (*2) &gt;&gt;= flip enumFromThenTo\n</code></pre>\n"}], "owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 33351674, "answer_count": 1, "score": 1, "last_activity_date": 1445880296, "creation_date": 1445879243, "last_edit_date": 1495539864, "question_id": 33351535, "link": "https://stackoverflow.com/questions/33351535/point-free-with-lists-in-haskell", "title": "Point Free with lists in Haskell", "body": "<p>So I saw the algorithm for point free conversion here <a href=\"https://stackoverflow.com/questions/29596285/point-free-problems-in-haskell\">Point Free problems in Haskell</a>\nbut what if the points i'd like to remove are hiding in a list? For instance a line like the following?</p>\n\n<pre><code>AllNsTill n x = [n,2*n..x]\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1445884236, "post_id": 33349674, "comment_id": 54501710, "body": "Beware your program will crash horribly as soon as you search for a misspelled day name."}, {"owner": {"reputation": 109, "user_id": 5126450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbe295d47e98fc8aaf7ed3f0dda4a481?s=128&d=identicon&r=PG&f=1", "display_name": "LoWesT", "link": "https://stackoverflow.com/users/5126450/lowest"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1446289204, "post_id": 33349674, "comment_id": 54688494, "body": "its just a part of the code, i took care of that. But thanks for pointing it out =)"}], "answers": [{"comments": [{"owner": {"reputation": 29707, "user_id": 394167, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5b8b4928a69d422138ed747c70e8553e?s=128&d=identicon&r=PG", "display_name": "Richard Cook", "link": "https://stackoverflow.com/users/394167/richard-cook"}, "reply_to_user": {"reputation": 109, "user_id": 5126450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbe295d47e98fc8aaf7ed3f0dda4a481?s=128&d=identicon&r=PG&f=1", "display_name": "LoWesT", "link": "https://stackoverflow.com/users/5126450/lowest"}, "edited": false, "score": 0, "creation_date": 1445883715, "post_id": 33349972, "comment_id": 54501402, "body": "@LoWesT: I&#39;ve added more comments about the precedence of your original expression to explain the original compiler error you observed."}], "tags": [], "owner": {"reputation": 29707, "user_id": 394167, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5b8b4928a69d422138ed747c70e8553e?s=128&d=identicon&r=PG", "display_name": "Richard Cook", "link": "https://stackoverflow.com/users/394167/richard-cook"}, "is_accepted": true, "score": 2, "last_activity_date": 1445956718, "last_edit_date": 1445956718, "creation_date": 1445874446, "answer_id": 33349972, "question_id": 33349674, "link": "https://stackoverflow.com/questions/33349674/maybe-int-to-int-from-findindex-with-strings/33349972#33349972", "title": "Maybe Int to Int from findIndex with Strings", "body": "<p>Note that the type error reported by Hugs relates to associativity and precedence of function application. Your expression</p>\n\n<pre><code>eliminate findIndex (== st) weekdays\n</code></pre>\n\n<p>attempts to apply <code>eliminate</code> to <code>findIndex</code> first, which is not the intent of your code. I think what you really want to do is:</p>\n\n<pre><code>eliminate (findIndex (== st) weekdays)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>eliminate $ findIndex (== st) weekdays\n</code></pre>\n\n<p>These both apply <code>eliminate</code> to the result of <code>findIndex (== st) weekdays</code>. This should type-check as expected.</p>\n\n<p>But, in answer to your question about how to deal with the <code>Maybe</code> value: you can use <a href=\"http://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Maybe.html#v:fromJust\" rel=\"nofollow\"><code>fromJust</code></a> or <a href=\"http://hackage.haskell.org/package/base-4.8.1.0/docs/Data-M\" rel=\"nofollow\"><code>fromMaybe</code></a> to extract the contained value.</p>\n\n<p>The links go to the current GHC documents but there should be equivalent Hugs functions.</p>\n\n<p>Here's a hint for future use: you can search the Haskell documentation online using <a href=\"http://hackage.haskell.org/package/base-4.8.1.0/docs/Data-M\" rel=\"nofollow\">Hoogle</a>. The best thing is that you can search both by function name and by type signature. For example, searching by <a href=\"https://www.haskell.org/hoogle/?hoogle=Maybe+a+-%3E+a\" rel=\"nofollow\"><code>Maybe a -&gt; a</code></a> would've found both these functions.</p>\n\n<p>Another approach is to pattern-match on <code>Nothing</code> as well as <code>Just a</code>:</p>\n\n<pre><code>eliminate (Just a) = -- Handle a\neliminate Nothing = -- Handle error case\n</code></pre>\n\n<p>Of course, then you have to decide what <code>eliminate</code> should evaluate to in the error case.</p>\n"}], "owner": {"reputation": 109, "user_id": 5126450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbe295d47e98fc8aaf7ed3f0dda4a481?s=128&d=identicon&r=PG&f=1", "display_name": "LoWesT", "link": "https://stackoverflow.com/users/5126450/lowest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 1, "accepted_answer_id": 33349972, "answer_count": 1, "score": 0, "last_activity_date": 1445956718, "creation_date": 1445873683, "last_edit_date": 1445883651, "question_id": 33349674, "link": "https://stackoverflow.com/questions/33349674/maybe-int-to-int-from-findindex-with-strings", "title": "Maybe Int to Int from findIndex with Strings", "body": "<p>I've just started with Haskell and have to solve the following task.</p>\n\n<p>I have a list which contains weekdays and I need the index corresponding to the location of the value <code>st</code> if it is found in the list:</p>\n\n<pre><code>weekdays = [\"Montag\",\"Dienstag\",\"Mittwoch\",\"Donnerstag\",\"Freitag\",\"Samstag\",\"Sonntag\"]\n\nfindIndex(==st)weekdays\n</code></pre>\n\n<p>My code works so far,  that i get <code>Just 3</code> for example. However, I read, that this is a <code>Maybe Int</code> and I need just the number out of it.</p>\n\n<p>So, I added a function <code>eliminate</code>:</p>\n\n<pre><code>eliminate :: Maybe Int -&gt; Int\neliminate (Just a) = a\n</code></pre>\n\n<p>But if I use <code>eliminate findIndex(==st)weekdays</code> it doesn't work and the error is:</p>\n\n<pre><code>*** Expression     : eliminate findIndex (flip (==) st) weekdays\n*** Term           : eliminate\n*** Type           : Maybe Int -&gt; Int\n*** Does not match : a -&gt; b -&gt; c -&gt; d\n</code></pre>\n\n<p>And I can't figure out a way to go from here, since I'm a beginner.</p>\n\n<p>Can someone help me out? The code has to work on Hugs98 unfortunately.</p>\n"}, {"tags": ["haskell", "digestive-functors", "haskell-spock"], "comments": [{"owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 2, "creation_date": 1445879402, "post_id": 33348293, "comment_id": 54498656, "body": "Can you provide all of your <code>import</code> statements? That would help a lot."}, {"owner": {"reputation": 359, "user_id": 3175373, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c59604f3d572ffb6496ccf4323730a52?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Asenov", "link": "https://stackoverflow.com/users/3175373/hristo-asenov"}, "reply_to_user": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 0, "creation_date": 1445948624, "post_id": 33348293, "comment_id": 54530233, "body": "thanks for the suggestion @ErikR, I added a comment below"}], "answers": [{"tags": [], "owner": {"reputation": 359, "user_id": 3175373, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c59604f3d572ffb6496ccf4323730a52?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Asenov", "link": "https://stackoverflow.com/users/3175373/hristo-asenov"}, "is_accepted": false, "score": 1, "last_activity_date": 1446007254, "creation_date": 1446007254, "answer_id": 33383032, "question_id": 33348293, "link": "https://stackoverflow.com/questions/33348293/how-do-i-modify-inputtext-to-use-inputcheckbox/33383032#33383032", "title": "how do I modify inputText to use inputCheckbox", "body": "<p>I'm answering my own question since I figured out how to get <strong>inputCheckbox</strong> instead of <strong>inputText</strong>. Actually, <a href=\"https://github.com/jaspervdj/digestive-functors/blob/master/digestive-functors/Snap.hs\" rel=\"nofollow\">this example</a> helped alot. It was the only one I could find which uses inputCheckbox. What I needed to do was change\n    <code>data CheckBox = CheckBox { postTitle :: T.Text }</code>\nto\n    <code>data CheckBox = CheckBox Bool</code>\nThen I could just initialized</p>\n\n<pre><code>checkboxForm = CheckBox\n         &lt;$&gt; \"title\" .: bool (Just False)\n</code></pre>\n\n<p>Here is the full source:</p>\n\n<pre><code>{-# LANGUAGE OverloadedStrings #-}\n\nimport Data.Monoid\nimport Data.String\nimport Data.List\nimport qualified Data.Text as T\n\nimport Web.Spock.Safe\nimport Web.Spock.Digestive\n\nimport Text.Blaze (ToMarkup(..))\nimport Text.Blaze.Html5 hiding (html, param, main)\nimport qualified Text.Blaze.Html5 as H\nimport Text.Blaze.Html.Renderer.Utf8 (renderHtml)\n\nimport Text.Digestive\nimport Text.Digestive.Blaze.Html5\n\nimport System.Directory\nimport Control.Monad.IO.Class\nimport Control.Monad (forM_)\n\ngen :: Html -&gt; [Html] -&gt; Html\ngen title elts  = H.html $ do\n  H.head $\n    H.title title\n  H.body $\n    H.ul $ mapM_ H.li elts\n\ndata CheckBox = CheckBox Bool\n\ncheckboxForm = CheckBox\n             &lt;$&gt; \"title\" .: bool (Just False)\n\nrenderForm :: View Html -&gt; [Html] -&gt; Html\nrenderForm v strings = do\n  Text.Digestive.Blaze.Html5.form v \"POST\" $ do\n    H.p $ mapM_ (\\string -&gt; do\n      inputCheckbox \"title\" v\n      Text.Digestive.Blaze.Html5.label \"title\" v string\n      H.br) strings\n    inputSubmit \"Submit Post\"\n\nmain :: IO ()\nmain =\n    runSpock 8080 $ spockT Prelude.id $ do\n       get root $ do\n           listing &lt;- liftIO $ getDirectoryContents \"/home/ecks/btsync-gambino\"\n           let filteredListing = filter (\\l -&gt; not $ isPrefixOf \".\" l) listing\n           (view, result) &lt;- runForm \"checkboxForm\" checkboxForm\n           case result of\n               Nothing -&gt; lazyBytes $ renderHtml (renderForm view (Data.List.map fromString filteredListing))\n               Just newCheckbox -&gt; lazyBytes $ renderHtml (renderForm view (Data.List.map fromString filteredListing))\n--           lazyBytes $ renderHtml (gen \"My Blog\" (Data.List.map fromString filteredListing))\n--       get (\"hello\" &lt;//&gt; var) $ \\name -&gt;\n--           text (\"Hello \" &lt;&gt; name &lt;&gt; \"!\")\n</code></pre>\n"}], "owner": {"reputation": 359, "user_id": 3175373, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c59604f3d572ffb6496ccf4323730a52?s=128&d=identicon&r=PG&f=1", "display_name": "Hristo Asenov", "link": "https://stackoverflow.com/users/3175373/hristo-asenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446524174, "creation_date": 1445869850, "last_edit_date": 1495535281, "question_id": 33348293, "link": "https://stackoverflow.com/questions/33348293/how-do-i-modify-inputtext-to-use-inputcheckbox", "title": "how do I modify inputText to use inputCheckbox", "body": "<p>I am trying to do something similar to <a href=\"https://stackoverflow.com/questions/6436238/list-of-checkboxes-with-digestive-functors\">this</a>, where for an element in list of strings, I have a checkbox next to it and figure out which checkbox is checked or not. Using examples from the internet, I was able to get an example running</p>\n\n<pre><code>{-# LANGUAGE OverloadedStrings #-}\n\nimport Data.Monoid\nimport Data.String\nimport Data.List\nimport qualified Data.Text as T\n\nimport Web.Spock.Safe\nimport Web.Spock.Digestive\n\nimport Text.Blaze (ToMarkup(..))\nimport Text.Blaze.Html5 hiding (html, param, main)\nimport qualified Text.Blaze.Html5 as H\nimport Text.Blaze.Html.Renderer.Utf8 (renderHtml)\n\nimport Text.Digestive\nimport Text.Digestive.Blaze.Html5\n\nimport System.Directory\nimport Control.Monad.IO.Class\nimport Control.Monad (forM_)\n\ngen :: Html -&gt; [Html] -&gt; Html\ngen title elts  = H.html $ do\n  H.head $\n    H.title title\n  H.body $\n    H.ul $ mapM_ H.li elts\n\ndata CheckBox = CheckBox { postTitle :: T.Text }\n\ncheckboxForm = CheckBox\n             &lt;$&gt; \"title\" .: Text.Digestive.text Nothing\n\nrenderForm :: View Html -&gt; Html\nrenderForm v = do\n  Text.Digestive.Blaze.Html5.form v \"POST\" $ do\n    H.p $ do\n          Text.Digestive.Blaze.Html5.label \"title\" v \"Post title: \"\n          inputText \"text\" v\n    inputSubmit \"Submit Post\"\n\nmain :: IO ()\nmain =\n    runSpock 8080 $ spockT Prelude.id $ do\n       get root $ do\n           listing &lt;- liftIO $ getDirectoryContents \"/home/hasenov/mydir\"\n           let filteredListing = filter (\\l -&gt; not $ isPrefixOf \".\" l) listing\n           (view, result) &lt;- runForm \"checkboxForm\" checkboxForm\n           case result of\n               Nothing -&gt; lazyBytes $ renderHtml (renderForm view)\n               Just newCheckbox -&gt; lazyBytes $ renderHtml (renderForm view)\n--           lazyBytes $ renderHtml (gen \"My Blog\" (Data.List.map fromString filteredListing))\n--       get (\"hello\" &lt;//&gt; var) $ \\name -&gt;\n--           text (\"Hello \" &lt;&gt; name &lt;&gt; \"!\")\n</code></pre>\n\n<p>However, in the function renderForm, when I change inputText to something like <strong>inputCheckbox \"True\"</strong>, I get the error <strong>True does not exist</strong>. I am not able to find an example where inputCheckbox is used, I was hoping someone would help me adapt <strong>filteredString</strong> so it would display checkboxes next to it, and I can run the form properly. Also, in <a href=\"https://stackoverflow.com/questions/6436238/list-of-checkboxes-with-digestive-functors\">previous link I posted</a>, I don't know what the function <strong>inputCheckBox</strong>, since I could only find <strong>inputCheckbox</strong>. Perhaps this is an outdated function?</p>\n"}, {"tags": ["haskell", "functional-programming", "state", "fibonacci", "imperative-programming"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1445861004, "post_id": 33345056, "comment_id": 54486016, "body": "You cannot mutate <code>fibos</code>, it always is the empty list."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 2, "creation_date": 1445861113, "post_id": 33345056, "comment_id": 54486088, "body": "That parse error is probably due to indentation. Move the <code>putStrLn</code> in the next line - all statements inside a <code>do</code> must have the same indentation."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1445861216, "post_id": 33345056, "comment_id": 54486146, "body": "What exactly is that &quot;<i>global list</i>&quot; good for? Why do you need it, what do you want to do with it? In which order should it contain the numbers?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1445861546, "post_id": 33345056, "comment_id": 54486355, "body": "I don&#39;t think you are interpreting your assignment correctly. Can you share it verbatim?"}, {"owner": {"reputation": 7, "user_id": 5246853, "user_type": "registered", "profile_image": "https://graph.facebook.com/144393895899889/picture?type=large", "display_name": "Ronnie Van Dyk", "link": "https://stackoverflow.com/users/5246853/ronnie-van-dyk"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1445861588, "post_id": 33345056, "comment_id": 54486380, "body": "@Bergi the list will be used later on to calculate sum and product of all elements in the list. The specification of my assignment states: &quot;As each number in the sequence is generated, that number is appended to a list containing the numbers generated&quot; it must also be a recursive function."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1445861653, "post_id": 33345056, "comment_id": 54486426, "body": "@RonnieVanDyk: So the function you&#39;re looking for is <code>fib :: Int -&gt; [Int]</code> (or similar), not <code>fib :: Int -&gt; Int</code>."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1445863556, "post_id": 33345056, "comment_id": 54487552, "body": "@RonnieVanDyk: I think what the assignment text was actually trying to say is &quot;<i>As each number in the sequence is generated, it is prepended to the list of the numbers that are yet to be generated</i>&quot;. In purely functional programming, the list that you&#39;re trying to generate is the functions result."}, {"owner": {"reputation": 7, "user_id": 5246853, "user_type": "registered", "profile_image": "https://graph.facebook.com/144393895899889/picture?type=large", "display_name": "Ronnie Van Dyk", "link": "https://stackoverflow.com/users/5246853/ronnie-van-dyk"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1445864281, "post_id": 33345056, "comment_id": 54488005, "body": "@Bergi that makes sense! Thank you. I&#39;ll try and implement something like that."}], "answers": [{"comments": [{"owner": {"reputation": 52258, "user_id": 375232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h3OwD.png?s=128&g=1", "display_name": "Landei", "link": "https://stackoverflow.com/users/375232/landei"}, "edited": false, "score": 0, "creation_date": 1445869572, "post_id": 33345377, "comment_id": 54491701, "body": "Edit: I answered a comment of Ronny von Dyk which just disappeared (the comment, not Ronny)... Original text: You cannot &quot;append&quot; something to a list, because a list (as any variable) is <i>immutable</i> in Haskell. The closest thing to appending an element is getting back a <i>new</i> list consisting on the p&#246;d list and an &quot;appended&quot; element. But you are never ever able to <i>modify</i> an existing list in Haskell."}], "tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": false, "score": 0, "last_activity_date": 1445861205, "creation_date": 1445861205, "answer_id": 33345377, "question_id": 33345056, "link": "https://stackoverflow.com/questions/33345056/different-fibonacci-implementation-in-haskell-using-lists/33345377#33345377", "title": "Different fibonacci implementation in Haskell using lists", "body": "<p>In purely functional programming, one does not operate with global, mutable variables. Thus, if you define a global value <code>fibos = []</code>, then that list will never be anything but an empty list. If you instead want a top-level definition that is immutable, fixing it to the <em>n</em> first Fibonacci numbers, where <em>n</em> is determined at runtime and <code>fibs</code> has no parameters, becomes difficult.</p>\n\n<p>An alternative is Haskell's lazy evaluation which enables you to create a top-level definition for all Fibonacci numbers, but they will only be computed to the extent they are requested.</p>\n\n<pre><code>fibs :: [Integer]\nfibs = 1:1:zipWith (+) fibs (tail fibs)\n</code></pre>\n\n<p>Or less fancy:</p>\n\n<pre><code>fibs :: [Integer]\nfibs = fib 0 1\n  where fib a b = b : fib b (a+b)\n</code></pre>\n\n<p>You can then extract as many Fibonacci numbers as you need:</p>\n\n<pre><code>main :: IO ()\nmain = do\n  putStr \"n: \"\n  n &lt;- readLn\n  putStrLn $ \"Fibs: \" ++ show (take n fibs)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 5246853, "user_type": "registered", "profile_image": "https://graph.facebook.com/144393895899889/picture?type=large", "display_name": "Ronnie Van Dyk", "link": "https://stackoverflow.com/users/5246853/ronnie-van-dyk"}, "edited": false, "score": 0, "creation_date": 1445867699, "post_id": 33347118, "comment_id": 54490370, "body": "My implementation of fibonacci function is only for educational purposes, secondly when a user enters 8, it must print [0,1,1,2,3,5,8] and not [0,1,1,2,3,5,8,13] if the user enters 9, it should also print [0,1,1,2,3,5,8] because there&#39;s no fib number 9, and not [0,1,1,2,3,5,8,13,21] which has 9 number of elements. How would one implement such a function"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "reply_to_user": {"reputation": 7, "user_id": 5246853, "user_type": "registered", "profile_image": "https://graph.facebook.com/144393895899889/picture?type=large", "display_name": "Ronnie Van Dyk", "link": "https://stackoverflow.com/users/5246853/ronnie-van-dyk"}, "edited": false, "score": 1, "creation_date": 1445867974, "post_id": 33347118, "comment_id": 54490555, "body": "Look, man, this is not a web site for a &quot;do my homework&quot;-attitude \u2014 I&#39;ve shown you how to modify a global list; it&#39;s your code and your goal so you can modify the implementation to fit your needs."}, {"owner": {"reputation": 7, "user_id": 5246853, "user_type": "registered", "profile_image": "https://graph.facebook.com/144393895899889/picture?type=large", "display_name": "Ronnie Van Dyk", "link": "https://stackoverflow.com/users/5246853/ronnie-van-dyk"}, "edited": false, "score": 0, "creation_date": 1445868816, "post_id": 33347118, "comment_id": 54491120, "body": "I don&#39;t have a &quot;do my homework attitude&quot;, I&#39;m just not getting answers that can help me proceed with the assignment. It could be because I&#39;m not describing my problem in the right way, this was the purpose of my previous comment."}, {"owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "edited": false, "score": 0, "creation_date": 1445872632, "post_id": 33347118, "comment_id": 54493856, "body": "&quot;I&#39;m just not getting answers that can help me proceed with the assignment.&quot; is sort of a &quot;do my homework&quot; attitude. :)"}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445874912, "post_id": 33347118, "comment_id": 54495575, "body": "Ronnie, my answer clearly provided a means to create and modify a global list, as you requested. If that doesn&#39;t help you proceed, I don&#39;t know what does, shy of providing a full working solution (but your post doesn&#39;t contain a detailed enough a spec to do that, even if one was willing to)"}], "tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": false, "score": 1, "last_activity_date": 1445875082, "last_edit_date": 1445875082, "creation_date": 1445866488, "answer_id": 33347118, "question_id": 33345056, "link": "https://stackoverflow.com/questions/33345056/different-fibonacci-implementation-in-haskell-using-lists/33347118#33347118", "title": "Different fibonacci implementation in Haskell using lists", "body": "\n\n<p><strong>EDIT:</strong></p>\n\n<p>if all you need is to see the sequence of values that led to <code>fib n</code>, you should just use something like:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>fibs = 0 : 1 : zipWith (+) fibs (tail fibs)\nfib n = (take n fibs, fibs !! n)\n</code></pre>\n\n<p>which works like this:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>*Main&gt; fib 0\n([],0)\n*Main&gt; fib 1\n([0],1)\n*Main&gt; fib 10\n([0,1,1,2,3,5,8,13,21,34],55)\n</code></pre>\n\n<p>If you want, you can use the State monad to separate out the list aspect of the computation but it would only mean a list that is \"global\" in a limited scope (e.g. the <code>main</code> function). That's the closest you can get to whay you want while staying in proper Haskell land. </p>\n\n<p><strong>The Right Way</strong></p>\n\n<p>I'm assuming you're attempting this for purposes of momoization? If yes, basically there already is a global list under the hood of any list-based implementation of <code>fib</code> \u2014 any callers of <code>fib</code> use the same lazily evaluated list that the Haskell (e.g. GHC) runtime uses under the hood; any elements of that list that have already been computed are not going to be re-computed.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>fibs = 0 : 1 : zipWith (+) fibs (tail fibs)\n</code></pre>\n\n<p>\u2014 here, <code>fibs</code> <em>is</em> a global list, and whereas you can't explicitly/manually mutate it, by accessing individual elements in it (<code>fibs !! n</code>), you are indirectly causing the underlying list to be mutated as the runtime adds new values to it.</p>\n\n<hr>\n\n<p><strong>The Wrong Way</strong> (but go ahead if you're not going to use this in real code)</p>\n\n<p>If, on the other hand, you need the list for the sake of just having that list, e.g. for debugging or some other weird reason, you can use a really ugly and <strong>unsafe hack</strong> such as the following <code>IORef</code> based solution, but please remember to <strong>stick to function names that end in <code>Unsafe</code></strong>, in the spirit of how the stdlib is marking all of the unsafe calls so that people who use them are <strong>aware of the dangers</strong>:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>import Data.IORef\nimport System.IO.Unsafe (unsafePerformIO)\n\nfibsStorageUnsafe :: IORef [Integer]\nfibsStorageUnsafe = unsafePerformIO $ newIORef []\n\n-- this is one one that uses the pure definition\n-- above to compute the value and then store it\n-- in a global, mutable IORef\nfibUnsafe n = unsafePerformIO (updateFibs ret) `seq` ret\n  where\n    ret = fib' n\n\n    updateFibs x = do\n      old &lt;- readIORef fibsStorageUnsafe\n      writeIORef fibsStorageUnsafe (x:old)\n\n    fib' :: Int -&gt; Integer\n    fib' 0 = 0\n    fib' 1 = 1\n    -- you can recursively call fib' instead of fibUnsafe\n    -- to only log the \"top level\" (non-recursive)\n    -- calls to fibUnsafe and not all recursive calls\n    fib' n = fibUnsafe (n-1) + fibUnsafe (n-2)\n</code></pre>\n\n<p>which works like this:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>*Main&gt; readIORef fibsStorageUnsafe\n[]\n*Main&gt; fibUnsafe 0\n0\n*Main&gt; readIORef fibsStorageUnsafe\n[0]\n*Main&gt; fibUnsafe 1\n1\n*Main&gt; readIORef fibsStorageUnsafe\n[1,0]\n*Main&gt; fibUnsafe 3\n2\n*Main&gt; readIORef fibsStorageUnsafe\n[1,0,1,1,2,1,0]\n*Main&gt; fibUnsafe  10\n55\n*Main&gt; readIORef fibsStorageUnsafe\n[1,0,1,1,2,1,0,1,3,1,0,1,1,2,5,1,0,1,1,2,1,0,1,3,8,1,0,1,1,2,1,0,1,3,1,0,1,1,2,5,13,1,0,1,1,2,1,0,1,3,1,0,1,1,2,5,1,0,1,1,2,1,0,1,3,8,21,1,0,1,1,2,1,0,1,3,1,0,1,1,2,5,1,0,1,1,2,1,0,1,3,8,1,0,1,1,2,1,0,1,3,1,0,1,1,2,5,13,34,1,0,1,1,2,1,0,1,3,1,0,1,1,2,5,1,0,1,1,2,1,0,1,3,8,1,0,1,1,2,1,0,1,3,1,0,1,1,2,5,13,1,0,1,1,2,1,0,1,3,1,0,1,1,2,5,1,0,1,1,2,1,0,1,3,8,21,55,1,0,1,1,2,1,0]\n</code></pre>\n\n<p>You can adjust the definitions of <code>fibUnsafe</code>, <code>fib'</code> and other components to fit your goals, but again: I'd strongly recommend against using an approach like this, unless it's solely for learning or experimentation purposes.</p>\n\n<p>For example, if you modify <code>fib'</code> to call itself not <code>fibUnsafe</code> like this:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>fib' n = fib' (n-1) + fib' (n-2)\n</code></pre>\n\n<p>then calling <code>fibUnsafe 10</code> will yield the following contents for <code>fibStorageUnsafe</code> instead of what you're seeing above:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>*Main&gt; fibUnsafe  10\n55\n*Main&gt; readIORef fibsStorageUnsafe\n[55]\n</code></pre>\n\n<p><strong>DISCLAIMER:</strong> I don't even know if the <code>IORef</code> based code above will work correctly under all circumstances \u2014\u00a0I admit I'm not too familiar with <code>IORef</code>s and how <code>unsafePerformIO</code> works to give any guarantees as to the semantics of the code above.</p>\n"}, {"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1445871921, "post_id": 33347692, "comment_id": 54493340, "body": "This backwards list is very strange. In fact, in a lazy language, it is likely to be much more efficient to build the list forwards using something like the <code>zipWith</code> approach Erik Allik suggested."}, {"owner": {"reputation": 52258, "user_id": 375232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h3OwD.png?s=128&g=1", "display_name": "Landei", "link": "https://stackoverflow.com/users/375232/landei"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1445933208, "post_id": 33347692, "comment_id": 54520441, "body": "@dfeuer It just <i>feels</i> strange, as functions like <code>zipWith</code> give you the &quot;normal&quot; order, and that for a good reason. However, here the reversed order is quite useful, as you don&#39;t want to traverse the whole list just to get to the &quot;interesting&quot; bits. Of course, such an approach is not possible for infinite lists. And if you actually <i>read</i> my answer and not just glace over the code, you will find that I already pointed that out. But I consciously avoided infinite lists, as they are difficult to grasp for beginners. The <code>zipWith</code> magic might be impressive, but need to be understood, too."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1445961061, "post_id": 33347692, "comment_id": 54539462, "body": "It is strange in Haskell, and a bit peculiar elsewhere too. Without laziness, you can use a streaming generator of some sort. For fast access, it&#39;s much better to use the matrix exponentiation technique."}, {"owner": {"reputation": 52258, "user_id": 375232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h3OwD.png?s=128&g=1", "display_name": "Landei", "link": "https://stackoverflow.com/users/375232/landei"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1445970886, "post_id": 33347692, "comment_id": 54545777, "body": "Do you even read what I write? I <i>agree</i>, the infinite list generator is the better solution, but this doesn&#39;t help the TO to <i>understand</i>. That&#39;s why I tried to mimic <i>his</i> solution as close as possible. He struggles already with the concept of immutability, so it makes no sense at all to throw an example of magical self-referential laziness mumbo-jumbo at him. This is about learning and understanding, not about the &quot;best&quot; way to do it."}], "tags": [], "owner": {"reputation": 52258, "user_id": 375232, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h3OwD.png?s=128&g=1", "display_name": "Landei", "link": "https://stackoverflow.com/users/375232/landei"}, "is_accepted": false, "score": 1, "last_activity_date": 1445869143, "last_edit_date": 1445869143, "creation_date": 1445868169, "answer_id": 33347692, "question_id": 33345056, "link": "https://stackoverflow.com/questions/33345056/different-fibonacci-implementation-in-haskell-using-lists/33347692#33347692", "title": "Different fibonacci implementation in Haskell using lists", "body": "<p>You can do something similar as you want if it's okay to get a list back:</p>\n\n<pre><code>fibs 0 = [0]\nfibs 1 = [0,1]\nfibs n = let fs@(f1:f2:_) = fibs (n-1) \n         in (f1+f2) : fs\n</code></pre>\n\n<p>Then <code>fibs 10</code> would return <code>[55,34,21,13,8,5,3,2,1,1,0]</code>. Note that it would be either wasteful or more complicated to build the list in the opposite order, as Haskell lists operate only on the \"front\". For the strange <code>fs@(f1:f2:_)</code>, please consult <a href=\"https://en.wikibooks.org/wiki/Haskell/Pattern_matching\" rel=\"nofollow\">https://en.wikibooks.org/wiki/Haskell/Pattern_matching</a> (<code>@</code> is the \"as\"-pattern) </p>\n\n<p>For a \"real\" Fibonacci function you just need to return the head:</p>\n\n<pre><code>fib n = head (fibs n)\n</code></pre>\n\n<p>I think this version comes your intentions quite close, and its performance is okay, too. However, this code isn't very idiomatic. The typical approach here are infinite lists (like some other answers show). </p>\n\n<p>If you allow me a personal remark: I found that \"imperative\" knowledge was more irritating than helpful when learning Haskell. I think you should consciously try to \"forget\" or \"unlearn\" what you know about (imperative) programming in order to \"grok\" functional programming.</p>\n"}, {"tags": [], "owner": {"reputation": 422, "user_id": 9999127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eV5CwYL1VJ8/AAAAAAAAAAI/AAAAAAAAAHs/Pc0AuvECtA0/photo.jpg?sz=128", "display_name": "Stanley Fernandes", "link": "https://stackoverflow.com/users/9999127/stanley-fernandes"}, "is_accepted": false, "score": 2, "last_activity_date": 1565785629, "creation_date": 1565785629, "answer_id": 57494679, "question_id": 33345056, "link": "https://stackoverflow.com/questions/33345056/different-fibonacci-implementation-in-haskell-using-lists/57494679#57494679", "title": "Different fibonacci implementation in Haskell using lists", "body": "<pre><code>import Data.List\n\nfibo :: Int -&gt; Int\nfibo 0 = 0\nfibo 1 = 1\nfibo n = fibo (n-1)+fibo(n-2)\n\n\nfiboList x =map fibo [1..x]\n\nmain = do\n    print ( fiboList 35 )\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5246853, "user_type": "registered", "profile_image": "https://graph.facebook.com/144393895899889/picture?type=large", "display_name": "Ronnie Van Dyk", "link": "https://stackoverflow.com/users/5246853/ronnie-van-dyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1565785629, "creation_date": 1445860180, "last_edit_date": 1445875176, "question_id": 33345056, "link": "https://stackoverflow.com/questions/33345056/different-fibonacci-implementation-in-haskell-using-lists", "title": "Different fibonacci implementation in Haskell using lists", "body": "<p>I have searched the blog for a Fibonacci implementation similar the the one I desire. Nothing came up although there were a lot of questions about Haskell's Fibonacci implementation. </p>\n\n<p>I want a recursive Fibonacci function (speed doesn't matter) that appends each Fibonacci number to a global list on each call to the fib function. I am new to Haskell and coming from an Imperative background. Here is what I thought would work but did'n to the trick.</p>\n\n<pre><code>fibos = []\n\nfib 0 = 1\nfib 1 = 1\nfib n = (fib(n-1) + fib(n-2)):fibos\n\n\nmain = do \n    putStrLn \"Please enter a number:\"\n    n &lt;- readLn\n    fib n\n    print fibos\n</code></pre>\n\n<p>I know about the already existing Fibonacci list in Haskell but my assignment specification wants me to do it in this way. I'm trying to cons each Fibonacci number up to user defined number n into the empty global fibos list. Any help or pointers will be much appreciated.</p>\n\n<p>EDIT:</p>\n\n<p>I now have a working function that returns a list of fibonacci numbers with n number of elements where n is user input, here is the code:</p>\n\n<pre><code>fib::Int-&gt;Int\nfib 0 = 0\nfib 1 = 1\nfib n = fib (n-1) + fib (n-2)\nfibList n = map fib [0..n]\n\nmain :: IO ()\nmain = do \n    putStrLn \"Please enter a positive integer:\"\n    n &lt;- readLn \n    print (fibList n)\n</code></pre>\n\n<p>What I need is a function that prints [0,1,1,2] if the user enters 2 and [0,1,1,2,3,5,8] if the user enters 8 or anything between 8 and 12(because 13 is a fib number).</p>\n"}, {"tags": ["list", "haskell", "comparison", "tuples"], "comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445868442, "post_id": 33345045, "comment_id": 54490868, "body": "what does <code>is</code> mean?"}], "answers": [{"comments": [{"owner": {"reputation": 606, "user_id": 3497258, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35f880339f03352b8e66231498e25779?s=128&d=identicon&r=PG&f=1", "display_name": "eXistanCe", "link": "https://stackoverflow.com/users/3497258/existance"}, "edited": false, "score": 0, "creation_date": 1445863341, "post_id": 33345603, "comment_id": 54487422, "body": "Hum i cant seem to figure out the tweak but for example if i would first remove all the names from the workes using the getName, them remove all the paychecks with the getPay, then using the maximum on a list (created using getPay) containing all the paychecks, getting that number&#39;s index and then returning the name with the same index, would it work? or am i overcomplicating things?"}, {"owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "reply_to_user": {"reputation": 606, "user_id": 3497258, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35f880339f03352b8e66231498e25779?s=128&d=identicon&r=PG&f=1", "display_name": "eXistanCe", "link": "https://stackoverflow.com/users/3497258/existance"}, "edited": false, "score": 0, "creation_date": 1445864498, "post_id": 33345603, "comment_id": 54488149, "body": "If you just change the line I marked with &quot;change this line&quot; you will have a function <code>[(String,Int,String,Int,Int)] -&gt; (String,Int,String,Int,Int)</code> which returns the tuple with the largest pay."}], "tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": true, "score": 2, "last_activity_date": 1445864360, "last_edit_date": 1445864360, "creation_date": 1445861930, "answer_id": 33345603, "question_id": 33345045, "link": "https://stackoverflow.com/questions/33345045/haskell-comparing-elements-in-a-tuple-list/33345603#33345603", "title": "Haskell: comparing elements in a tuple list", "body": "<p><code>x is ...</code> isn't valid Haskell syntax, but you can use <code>let</code> like this:</p>\n\n<pre><code>getPayList (x:xs) = [ x | y &lt;- [...]\n                        , let x = if ... then ... else ... ]\n</code></pre>\n\n<p>However, there are a lot of other problems with your approach. For instance, this code fragment:</p>\n\n<pre><code>getPay(getPayList y:xs)\n</code></pre>\n\n<p>is interpreted by Haskell as</p>\n\n<pre><code>getPay( (getPayList y) : xs)\n</code></pre>\n\n<p>which doesn't type check since <em>y</em> is an integer and <code>getPayList</code> operates on a list of tuples.</p>\n\n<p><strong>Hint</strong></p>\n\n<p>How about looking at how LYAH introduces the <strong>maximum</strong> function:</p>\n\n<p><a href=\"http://learnyouahaskell.com/recursion\" rel=\"nofollow\">http://learnyouahaskell.com/recursion</a></p>\n\n<pre><code>maximum' :: (Ord a) =&gt; [a] -&gt; a  \nmaximum' [] = error \"maximum of empty list\"  \nmaximum' [x] = x  \nmaximum' (x:xs)   \n    | x &gt; maxTail = x             -- change this line\n    | otherwise = maxTail  \n    where maxTail = maximum' xs \n</code></pre>\n\n<p>Perhaps there is a simple tweak to that function which will give you the <code>biggestPay</code> function.</p>\n"}], "owner": {"reputation": 606, "user_id": 3497258, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/35f880339f03352b8e66231498e25779?s=128&d=identicon&r=PG&f=1", "display_name": "eXistanCe", "link": "https://stackoverflow.com/users/3497258/existance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2593, "favorite_count": 0, "accepted_answer_id": 33345603, "answer_count": 1, "score": 0, "last_activity_date": 1445868390, "creation_date": 1445860118, "last_edit_date": 1445868390, "question_id": 33345045, "link": "https://stackoverflow.com/questions/33345045/haskell-comparing-elements-in-a-tuple-list", "title": "Haskell: comparing elements in a tuple list", "body": "<p>Explanation of the project :</p>\n\n<p>Being given a list of 5 element tuples (eg. <code>[(String,Int,String,Int,Int)]</code>) , were the 1st element of the tuple represents the name of a worker and the 4th element represents his/her paycheck, I must make a function (called <code>biggestPay</code>) that gives the name of the worker with the biggest paycheck.</p>\n\n<p>Restrictions:</p>\n\n<p>Following the book \"Learn you a Haskell for a great good\" I can only use everything up to (including) Higher Order Functions and Prelude functions.</p>\n\n<p>My works so far:</p>\n\n<pre><code>getPay :: (String,Int,String,Int,Int) -&gt; Int\ngetPay (_,_,_,a,_) = a \n\ngetName ::(String,Int,String,Int,Int) -&gt; String\ngetName (a,_,_,_,_) = a\n\ngetPayList :: [(String,Int,String,Int,Int)] -&gt; String\ngetPayList [] = [] \ngetPayList xs = [ x | y &lt;- [0..(length xs)-1] , \n    if getPay(getPayList y:xs) &gt;= getPay(getPayList (y+1):xs) \n    then x is getName(getPayList y:xs) \n    else x is getName(getPayList (y+1):xs)]\n\nbiggestPay :: [String] -&gt; String\nbiggestPay [] = []\nbiggestPay xs = drop ((length xs) -1) xs\n</code></pre>\n\n<p>My idea was compare the paychecks of all the workers and store their name in a list and then finally since the last element of the list would be the worker with the biggest paycheck I would drop all the other elements to get that worker's name only.</p>\n\n<p>However when I try to load this function into GHCI I get these errors:</p>\n\n<pre><code>ghci&gt; :l Pay.hs\n[1 of 1] Compiling Main             ( Pay.hs, interpreted )\n\nPay.hs:9:19: Not in scope: `x'\n\nPay.hs:11:22: Not in scope: `x'\n\nPat.hs:11:24:\n    Not in scope: `is'\n    Perhaps you meant one of these:\n      `xs' (line 9), `id' (imported from Prelude)\n\nPay.hs:12:22: Not in scope: `x'\n\nPay.hs:12:24:\n    Not in scope: `is'\n    Perhaps you meant one of these:\n      `xs' (line 9), `id' (imported from Prelude)\nFailed, modules loaded: none.\n</code></pre>\n"}, {"tags": ["haskell", "equation-solving", "modular-arithmetic"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1445853980, "post_id": 33342901, "comment_id": 54481596, "body": "<a href=\"http://math.stackexchange.com/a/261900/88047\">This might help</a>"}, {"owner": {"reputation": 147, "user_id": 1779564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b9c68ea28719640b824e02e6ea87463?s=128&d=identicon&r=PG", "display_name": "Iguana", "link": "https://stackoverflow.com/users/1779564/iguana"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1445854294, "post_id": 33342901, "comment_id": 54481794, "body": "@BartekBanachewicz I am looking for a general method. Actually in the expression there are other constants as well which are determined using other means so I cannot manually solve it and then use those results."}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445854738, "post_id": 33342901, "comment_id": 54482089, "body": "is this a numerical method/algrotihm? if yes, you might want to add the respective tag."}, {"owner": {"reputation": 147, "user_id": 1779564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b9c68ea28719640b824e02e6ea87463?s=128&d=identicon&r=PG", "display_name": "Iguana", "link": "https://stackoverflow.com/users/1779564/iguana"}, "reply_to_user": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445855096, "post_id": 33342901, "comment_id": 54482295, "body": "@ErikAllik Actually, I am not necessarily looking for the algorithm. Even if there is a package that does this, I am fine with it. It&#39;s just a subroutine in the implementation of Rademacher formula. Thanks for the edits btw!"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 5, "creation_date": 1445858283, "post_id": 33342901, "comment_id": 54484392, "body": "To solve <code>ax+b = c (mod n)</code> you need <code>x = (c-b)*a^-1 (mod n)</code> where <code>a^-1</code> is the modular inverse of <code>a</code>  mod <code>n</code>. This will exist if and only if <code>a</code> and <code>n</code> are relatively prime, in which case the extended Euclidean algorithm can compute it: <a href=\"https://en.wikipedia.org/wiki/Extended_Euclidean_algorithm#Computing_multiplicative_inverses_in_modular_structures\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1445871474, "post_id": 33345255, "comment_id": 54493022, "body": "Be very careful with the <code>arithmoi</code> package. It has at least one bug in its prime sieve code that causes intermittent segmentation faults. The code is <i>extremely</i> hairy and poorly documented, and despite the package having a new maintainer there are no signs that it will improve any time soon."}], "tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": true, "score": 5, "last_activity_date": 1445862849, "last_edit_date": 1445862849, "creation_date": 1445860853, "answer_id": 33345255, "question_id": 33342901, "link": "https://stackoverflow.com/questions/33342901/modular-equations-in-haskell/33345255#33345255", "title": "Modular equations in Haskell", "body": "<p>Solving modular quadratic equations involves combining:</p>\n\n<ul>\n<li>the <a href=\"https://en.wikipedia.org/wiki/Tonelli%E2%80%93Shanks_algorithm\"><strong>Tonelli-Shanks algorithm</strong></a></li>\n<li>the <a href=\"https://crypto.stanford.edu/pbc/notes/numbertheory/crt.html\"><strong>Chinese Remainder Theorem</strong></a></li>\n<li>and the quadratic formula (i.e. completing the square)</li>\n</ul>\n\n<p>For Haskell the <a href=\"https://hackage.haskell.org/package/arithmoi-0.4.1.3\"><strong>arithmoi</strong></a> package has implementations of these algorithms. In particular, see the <a href=\"https://hackage.haskell.org/package/arithmoi-0.4.1.3/docs/Math-NumberTheory-Moduli.html#v:chineseRemainder\"><strong>chineseRemainder</strong></a>, <a href=\"https://hackage.haskell.org/package/arithmoi-0.4.1.3/docs/Math-NumberTheory-Moduli.html#v:sqrtModP\"><strong>sqrtModP</strong></a> and <a href=\"https://hackage.haskell.org/package/arithmoi-0.4.1.3/docs/Math-NumberTheory-Moduli.html#v:sqrtModPP\"><strong>sqrtModPP</strong></a> functions.</p>\n\n<p>Here you can find some worked examples:</p>\n\n<p><a href=\"http://www.mersennewiki.org/index.php/Modular_Square_Root\">http://www.mersennewiki.org/index.php/Modular_Square_Root</a></p>\n"}], "owner": {"reputation": 147, "user_id": 1779564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b9c68ea28719640b824e02e6ea87463?s=128&d=identicon&r=PG", "display_name": "Iguana", "link": "https://stackoverflow.com/users/1779564/iguana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 2, "accepted_answer_id": 33345255, "answer_count": 1, "score": 7, "last_activity_date": 1445862849, "creation_date": 1445853609, "last_edit_date": 1445854967, "question_id": 33342901, "link": "https://stackoverflow.com/questions/33342901/modular-equations-in-haskell", "title": "Modular equations in Haskell", "body": "<p>I want to solve linear and quadratic modular equations in Haskell in one variable. The way I am doing it right now is by putting <code>x = [1..]</code> in the equation one by one and finding the remainder (<code>expr `rem` p == 0</code>, if the equation is modulo <code>p</code> (not necessarily a prime) where <code>expr</code> has the variable <code>x</code>). I believe this is a very inefficient process. So is there any better way to do it?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 3, "creation_date": 1445841457, "post_id": 33339773, "comment_id": 54475514, "body": "why <code>head</code> ;) (this is why you only get the first)"}], "answers": [{"comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1445844670, "post_id": 33339803, "comment_id": 54476891, "body": "Just a small remark: As long as Ubuntu 14.04 and other LTS platforms used in universities or similar places still use GHC 7.6.3, I would add <code>import Control.Applicative</code> to <code>&lt;$&gt;</code> (or use <code>map read `fmap` getArgs</code>)."}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1445844794, "post_id": 33339803, "comment_id": 54476948, "body": "I would not use OS packages at all - but I guess that&#39;s another discussion - but yes that could be a problem (not for the OP as it seems)"}], "tags": [], "owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "is_accepted": true, "score": 5, "last_activity_date": 1445841895, "last_edit_date": 1445841895, "creation_date": 1445841571, "answer_id": 33339803, "question_id": 33339773, "link": "https://stackoverflow.com/questions/33339773/assigning-command-line-arguments-to-variables/33339803#33339803", "title": "Assigning command line arguments to variables", "body": "<p>if you want to map all arguments to <code>Int</code>s you should use</p>\n\n<pre><code>getIntArgs :: IO [Int]\ngetIntArgs = fmap (map read) $ getArgs\n</code></pre>\n\n<hr>\n\n<p>or a bit shorter:</p>\n\n<pre><code>getIntArgs = map read &lt;$&gt; getArgs\n</code></pre>\n\n<hr>\n\n<p>instead.</p>\n\n<p>This way you can do </p>\n\n<pre><code>main = do\n    ns &lt;- getIntArgs\n    print ns\n</code></pre>\n\n<p>and then get the ones you are interested in with <code>(!!)</code> or if you know/expect at least a fixed number of <code>Int</code> - arguments with</p>\n\n<pre><code>(n1:n2:n3:_) &lt;- getIntArgs\n</code></pre>\n\n<p>but of course you should maybe check the length first - also this will fail if the user decides to input things that cannot get parsed into <code>Int</code>s</p>\n\n<hr>\n\n<p>So if you don't want to reinvent the wheel (which might be ok if you want to learn or only need a quick solution) you maybe want to look around and use a existing package - for example <a href=\"https://hackage.haskell.org/package/parseargs\" rel=\"nofollow\">parseargs</a> to do this for you</p>\n"}], "owner": {"reputation": 713, "user_id": 2472753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ZxU49.jpg?s=128&g=1", "display_name": "Fullmetal_Alchemist_Fan", "link": "https://stackoverflow.com/users/2472753/fullmetal-alchemist-fan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 1, "accepted_answer_id": 33339803, "answer_count": 1, "score": 3, "last_activity_date": 1445841895, "creation_date": 1445841360, "question_id": 33339773, "link": "https://stackoverflow.com/questions/33339773/assigning-command-line-arguments-to-variables", "title": "Assigning command line arguments to variables", "body": "<p>I need to convert my command line argument chars to Ints. I would like to assign each one to a variable and use them in my function. I have the following: </p>\n\n<pre><code>import System.Environment   \n\ngetIntArg :: IO Int\ngetIntArg = fmap (read . head) getArgs\n\nmain = do\n    n &lt;- getIntArg\n    print n\n</code></pre>\n\n<p>However, it doesn't loop through all the arguments only printing one. Also, would I assign each one to a variable to use? </p>\n\n<p>I'm new to FP. </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 1, "creation_date": 1445840390, "post_id": 33339539, "comment_id": 54475133, "body": "are you are calling this in GHCi?"}, {"owner": {"reputation": 713, "user_id": 2472753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ZxU49.jpg?s=128&g=1", "display_name": "Fullmetal_Alchemist_Fan", "link": "https://stackoverflow.com/users/2472753/fullmetal-alchemist-fan"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1445840414, "post_id": 33339539, "comment_id": 54475142, "body": "Yes, I&#39;m calling this in GHCi."}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1445840436, "post_id": 33339539, "comment_id": 54475147, "body": "well Zeta was quicker ;)"}, {"owner": {"reputation": 713, "user_id": 2472753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ZxU49.jpg?s=128&g=1", "display_name": "Fullmetal_Alchemist_Fan", "link": "https://stackoverflow.com/users/2472753/fullmetal-alchemist-fan"}, "reply_to_user": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 0, "creation_date": 1445840489, "post_id": 33339539, "comment_id": 54475166, "body": "Geez. That was driving me crazy. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 713, "user_id": 2472753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ZxU49.jpg?s=128&g=1", "display_name": "Fullmetal_Alchemist_Fan", "link": "https://stackoverflow.com/users/2472753/fullmetal-alchemist-fan"}, "edited": false, "score": 0, "creation_date": 1445840620, "post_id": 33339579, "comment_id": 54475226, "body": "That totally makes sense. Thanks for the explanation, Zeta!"}], "tags": [], "owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "is_accepted": false, "score": 9, "last_activity_date": 1445840627, "last_edit_date": 1445840627, "creation_date": 1445840416, "answer_id": 33339579, "question_id": 33339539, "link": "https://stackoverflow.com/questions/33339539/running-my-program-with-command-line-arguments/33339579#33339579", "title": "Running my program with command line arguments", "body": "<p>You have to use <code>:main</code> if you want to simulate command line arguments. <code>main</code> alone only executes your <code>IO ()</code> action, but doesn't actually build the arguments. For all what GHCi knows, <code>main</code> doesn't necessarily need to be <code>IO ()</code>, it could be <code>Int -&gt; Int -&gt; IO ()</code>.</p>\n\n<p>However, if you use <code>:main</code>, GHC will use <code>main</code> in the same way it would get invoked during an <code>runhaskell</code> call, e.g. with interpreting the following parameters as command line arguments.</p>\n\n<p>Alternatively, you can use <code>withArgs</code> from <code>System.Environment</code>:</p>\n\n<pre><code>ghci&gt; withArgs [\"argument\", \"arguments\", \"more arguments\"] main\n</code></pre>\n"}], "owner": {"reputation": 713, "user_id": 2472753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ZxU49.jpg?s=128&g=1", "display_name": "Fullmetal_Alchemist_Fan", "link": "https://stackoverflow.com/users/2472753/fullmetal-alchemist-fan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1445840627, "creation_date": 1445840225, "question_id": 33339539, "link": "https://stackoverflow.com/questions/33339539/running-my-program-with-command-line-arguments", "title": "Running my program with command line arguments", "body": "<p>I am attempting to run my program using the command line. I am trying to return my command line arguments:</p>\n\n<pre><code>import System.Environment   \nimport Data.List  \n\nmain :: IO()\n\nmain = do  \n   args &lt;- getArgs  \n   progName &lt;- getProgName  \n   putStrLn \"The arguments are:\"  \n   mapM putStrLn args  \n   putStrLn \"The program name is:\"  \n   putStrLn progName  \n</code></pre>\n\n<p>I am executing the code by calling the main function with my arguments: </p>\n\n<pre><code>main argument arguments \"more arguements\"\n</code></pre>\n\n<p>However, I am getting a complier error: </p>\n\n<pre><code>&lt;interactive&gt;:33:6: Not in scope: \u2018argument\u2019\n&lt;interactive&gt;:33:15: Not in scope: \u2018arguments\u2019\n</code></pre>\n\n<p>Is there an issue with how I am calling my function with my arguments? </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 1, "creation_date": 1445840512, "post_id": 33339017, "comment_id": 54475181, "body": "Because <code>2</code> is a polymorphic literal. It is syntactic sugar for the expression <code>fromInteger (2::Integer)</code> which means that <code>2</code> could be a value of any Num class."}, {"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1445840659, "post_id": 33339017, "comment_id": 54475238, "body": "I think your question is essentially a duplicate of another that was asked just a few hours ago. See in particular <a href=\"http://stackoverflow.com/a/33334388/1088108\">@chi&#39;s answer</a>."}, {"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1445841063, "post_id": 33339017, "comment_id": 54475384, "body": "On the other hand, your question made me aware that one of my comments over at the other question was a bit misguided."}], "owner": {"reputation": 53, "user_id": 5487796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce2ceff0fbe02c80cbca9435b62f460e?s=128&d=identicon&r=PG&f=1", "display_name": "w0mTea", "link": "https://stackoverflow.com/users/5487796/w0mtea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "closed_date": 1445840601, "answer_count": 0, "score": 2, "last_activity_date": 1445857899, "creation_date": 1445837470, "last_edit_date": 1445857899, "question_id": 33339017, "link": "https://stackoverflow.com/questions/33339017/why-cant-the-number-literal-2-match-the-type-integer-in-the-following-code", "closed_reason": "Duplicate", "title": "Why can&#39;t the number literal 2 match the type Integer in the following code?", "body": "<pre><code>class R r where\n    sum_ :: Integer -&gt; r\ninstance R Integer where\n    sum_ x = x\ninstance (Integral a, R r) =&gt; R (a -&gt; r) where\n    sum_ x = \\y -&gt; sum (x + toIngeter y)\n</code></pre>\n\n<p>The code above is used to sum a sequence of numbers and it can accept variable number of arguments. It runs correctly.</p>\n\n<p>However, if I change the second instance to this:</p>\n\n<pre><code>instance (R r) =&gt; R (Integer -&gt; r) where\n    sum_ x = \\y -&gt; sum (x + y)\n</code></pre>\n\n<p>and enable FlexibleInstances (otherwise a compile error will be raised in ghc 7.10.2), the function cannot run for multiple parameters.</p>\n\n<p>For example, if I run</p>\n\n<pre><code>sum_ 1 2\n</code></pre>\n\n<p>an error would be raised:</p>\n\n<blockquote>\n  <p>Non type-variable argument in the constraint: R (a -> t)</p>\n</blockquote>\n\n<p>But if I add an explicit type signature to parameters it runs correctly:</p>\n\n<pre><code>sum_ 1 (2::Integer)\n</code></pre>\n\n<p>Why couldn't 2 match the type Integer?</p>\n"}, {"tags": ["haskell", "monads"], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1445831244, "post_id": 33338134, "comment_id": 54472828, "body": "<code>mapM_</code> is (for now) only the middle brother. The real big sister is <code>traverse_</code>. Eventually, <code>mapM_</code> may be redefined to be the same as <code>traverse_</code>."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1445833239, "post_id": 33338134, "comment_id": 54473226, "body": "In any case, none of these explain the <code>Monad</code> abstraction, since even <code>Applicative</code> is a bit strong for the job."}, {"owner": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1445854619, "post_id": 33338134, "comment_id": 54482005, "body": "@dfeuer, so we need a type class for <code>*&gt;</code>? What would that be named? <code>Sequencable</code>?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "edited": false, "score": 1, "creation_date": 1445861548, "post_id": 33338134, "comment_id": 54486358, "body": "@JoachimBreitner, that&#39;s too powerful, I think. <code>Monoid1</code> should work, right?"}, {"owner": {"reputation": 24266, "user_id": 946226, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5823d09208b1e4b63bbfcd189492032c?s=128&d=identicon&r=PG", "display_name": "Joachim Breitner", "link": "https://stackoverflow.com/users/946226/joachim-breitner"}, "edited": false, "score": 1, "creation_date": 1445862517, "post_id": 33338134, "comment_id": 54486929, "body": "Ah, right, since all elements of the <code>Foldable</code> are of the same type."}, {"owner": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "edited": false, "score": 0, "creation_date": 1445891091, "post_id": 33338134, "comment_id": 54505592, "body": "So, per the old definition: <code>x &gt;&gt; sequence_ xs</code> - what happens for <code>IO a -&gt; IO ()</code>? Since <code>unsafePerformIO :: IO a -&gt; a</code> is not used, how does a side-effect, in Haskell, &quot;evaluate&quot; via <code>IO a -&gt; IO ()</code>? I&#39;m trying to reason about the difference in <code>IO a -&gt; a</code> versus <code>IO a -&gt; IO ()</code>."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "edited": false, "score": 1, "creation_date": 1445893394, "post_id": 33338134, "comment_id": 54506953, "body": "@KevinMeredith I&#39;m not sure I understand your question. However, some comments that may or may not help: 1. An example function of type <code>IO a -&gt; IO ()</code> is this simple one: <code>\\io -&gt; io &gt;&gt; return ()</code>. This says, &quot;given an <code>IO</code> action that produces some value, produce the <code>IO</code> action that performs it, then returns an uninteresting value instead&quot;. 2. <code>IO</code> actions are allowed to contain &quot;subactions&quot; which also do <code>IO</code>; however, non-<code>IO</code> values are not allowed to do <code>IO</code>."}, {"owner": {"reputation": 28456, "user_id": 1094403, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3770aa7eae5c211921493abd0d2c9f5a?s=128&d=identicon&r=PG", "display_name": "Luis Casillas", "link": "https://stackoverflow.com/users/1094403/luis-casillas"}, "reply_to_user": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "edited": false, "score": 1, "creation_date": 1445977485, "post_id": 33338134, "comment_id": 54549419, "body": "@KevinMeredith: you may benefit from reading <a href=\"http://blog.jle.im/entry/inside-my-world-ode-to-functor-and-monad\" rel=\"nofollow noreferrer\">this article</a>."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 11, "last_activity_date": 1445830908, "creation_date": 1445830908, "answer_id": 33338134, "question_id": 33338097, "link": "https://stackoverflow.com/questions/33338097/understanding-sequence/33338134#33338134", "title": "Understanding `sequence_`", "body": "<p>No, it is not calling <code>unsafePerformIO</code> on each <code>IO ()</code> action. In fact, its type is not even specific to <code>IO</code>:</p>\n\n<pre><code>sequence_ :: (Monad m, Foldable t) =&gt; t (m a) -&gt; m ()\n</code></pre>\n\n<p>In the old libraries, when it was specific to lists (rather than generic over all <code>Foldable</code>s), it was implemented in the following perfectly readable way:</p>\n\n<pre><code>sequence_ [] = return ()\nsequence_ (x:xs) = x &gt;&gt; sequence_ xs\n</code></pre>\n\n<p>It is absolutely not discouraged; <code>sequence_</code> (and its big brother, <code>mapM_</code>) are extremely useful, to the point that it is even one of my motivating examples for why <code>Monad</code>s as an abstraction are useful.</p>\n"}], "owner": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1178, "favorite_count": 1, "accepted_answer_id": 33338134, "answer_count": 1, "score": 2, "last_activity_date": 1445856335, "creation_date": 1445830611, "last_edit_date": 1445856335, "question_id": 33338097, "link": "https://stackoverflow.com/questions/33338097/understanding-sequence", "title": "Understanding `sequence_`", "body": "<p><a href=\"https://wiki.haskell.org/All_About_Monads\" rel=\"nofollow\">All About Monads</a> explains <code>sequence_</code>:</p>\n\n<blockquote>\n  <p>The <code>sequence_</code> function (notice the underscore) has the same behavior as <code>sequence</code> but does not return a list of results. It is useful when only the side-effects of the monadic computations are important.</p>\n</blockquote>\n\n<p>Then, looking at <code>TestSequence.hs</code>:</p>\n\n<pre><code>import Control.Monad\n\nf :: String -&gt; IO ()\nf x = print x\n\nrun :: [String] -&gt; IO ()\nrun xs = sequence_ . map f $ xs\n</code></pre>\n\n<p>I can run it:</p>\n\n<pre><code>\u03bb: run [\"foo\", \"bar\"]\n\"foo\"\n\"bar\"\n</code></pre>\n\n<p>Is <code>sequence_</code> calling <code>unsafePerformIO</code> on each <code>IO ()</code> to get the result, i.e. the <code>()</code>?</p>\n\n<p>And, is <code>sequence_</code> discouraged? Or is it, for the <code>IO Monad</code>, simply used \"at the end of the world\" to run a list of <code>IO</code> actions?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 3, "creation_date": 1445826776, "post_id": 33337555, "comment_id": 54471818, "body": "You seem to be missing <code>=</code> before the last <code>False</code>. Because of the messed up Stackoverflow markdown, it&#39;s hard to say whether there actually are any indentation errors too, but I&#39;m guessing no in this case. (There are other errors that will show up once it parses, though.)"}, {"owner": {"reputation": 87, "user_id": 4263089, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8e22d88a56d4446d5b056ab3303ccc8?s=128&d=identicon&r=PG&f=1", "display_name": "a1yx", "link": "https://stackoverflow.com/users/4263089/a1yx"}, "reply_to_user": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1445827758, "post_id": 33337555, "comment_id": 54472032, "body": "Yeah I added the equal sign and got another error. Do you have a suggestion for a better algorithm?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1445851483, "post_id": 33337555, "comment_id": 54480189, "body": "Every <code>if</code> needs an <code>else</code> branch. I&#39;d also add type annotations <code>isMember :: ...</code> before every function, since it is very common in Haskell to do so, both for documentation purposes and to improve GHC type error messages (if you state what you want, GHC can spot the differences)."}, {"owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "edited": false, "score": 0, "creation_date": 1445876204, "post_id": 33337555, "comment_id": 54496447, "body": "If the elements in your list can be ordered (i.e. the element type is an instance of <code>Ord</code>) then you could also consider sorting the list and then looking if you can find two subsequent elements which are equal."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 4263089, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8e22d88a56d4446d5b056ab3303ccc8?s=128&d=identicon&r=PG&f=1", "display_name": "a1yx", "link": "https://stackoverflow.com/users/4263089/a1yx"}, "edited": false, "score": 0, "creation_date": 1445831292, "post_id": 33338004, "comment_id": 54472845, "body": "Thank you! And not to be at all picky - just inquisitive. Would this produce a O(N^2) running time?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 87, "user_id": 4263089, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8e22d88a56d4446d5b056ab3303ccc8?s=128&d=identicon&r=PG&f=1", "display_name": "a1yx", "link": "https://stackoverflow.com/users/4263089/a1yx"}, "edited": false, "score": 1, "creation_date": 1445831366, "post_id": 33338004, "comment_id": 54472864, "body": "@a1yx, I&#39;ve only given you a template. If you fill it in correctly, you should be able to demonstrate that it performs O(n) equality tests with O(n) administrative work."}, {"owner": {"reputation": 87, "user_id": 4263089, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8e22d88a56d4446d5b056ab3303ccc8?s=128&d=identicon&r=PG&f=1", "display_name": "a1yx", "link": "https://stackoverflow.com/users/4263089/a1yx"}, "edited": false, "score": 0, "creation_date": 1445833619, "post_id": 33338004, "comment_id": 54473284, "body": "Would you mind giving some pointers on the code from the edited question? I tried implementing your suggestion but I definitely messed up somewhere"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 87, "user_id": 4263089, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8e22d88a56d4446d5b056ab3303ccc8?s=128&d=identicon&r=PG&f=1", "display_name": "a1yx", "link": "https://stackoverflow.com/users/4263089/a1yx"}, "edited": false, "score": 1, "creation_date": 1445834991, "post_id": 33338004, "comment_id": 54473601, "body": "@a1yx, your <code>isMember</code> seems to return a number for some reason, instead of a boolean. It should return a boolean. You don&#39;t need any numbers to solve this problem."}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 5, "last_activity_date": 1445829860, "creation_date": 1445829860, "answer_id": 33338004, "question_id": 33337555, "link": "https://stackoverflow.com/questions/33337555/haskell-check-if-there-is-a-repeated-element-in-the-list/33338004#33338004", "title": "Haskell - check if there is a repeated element in the list", "body": "<p>Some tips:</p>\n\n<ol>\n<li><p>Forget about <code>countDups</code> for now; you don't need it to write <code>isMemberTwice</code>.</p></li>\n<li><p>Start by writing <code>isMember</code>.</p></li>\n<li><p>Use <code>isMember</code> to write <code>isMemberTwice</code>.</p>\n\n<pre><code> isMember x [] = ???\n isMember x (y : ys)\n   | x == y = ???\n   | otherwise = ???\n\n isMemberTwice x [] = ???\n isMemberTwice x (y : ys)\n   | x == y = ???\n   | otherwise = ???\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 87, "user_id": 4263089, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8e22d88a56d4446d5b056ab3303ccc8?s=128&d=identicon&r=PG&f=1", "display_name": "a1yx", "link": "https://stackoverflow.com/users/4263089/a1yx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1597, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1445833569, "creation_date": 1445826297, "last_edit_date": 1445833569, "question_id": 33337555, "link": "https://stackoverflow.com/questions/33337555/haskell-check-if-there-is-a-repeated-element-in-the-list", "title": "Haskell - check if there is a repeated element in the list", "body": "<p><strong>This is a uni homework assignment that I have mostly finished and I'm not just coming here for answers</strong></p>\n\n<p>The task given was to find if a given an element shows up more than once in a list. The algorithm I tried was to create <code>countDups</code> that will act as a counter, and count the amount of times said element is found in list. Then <code>isMemberTwice</code> (which should return a <code>Bool</code>) will be <code>True</code> if <code>countDups</code> is greater than 1 and <code>False</code> otherwise.</p>\n\n<p>Yes I am new to Haskell so I'm sorry if this is a completely horrendous way to implement.</p>\n\n<pre><code>countDups x [] = 0 \ncountDups x (y:ys) \n    | x == y = 1 + countDups x ys \n    | otherwise = countDups x ys\n\nisMemberTwice x [] = False      --base case; empty list\nisMemberTwice x (y: ys) \n    | countDups &gt; 1 = True \n    | otherwise False \n</code></pre>\n\n<p><strong>Error Message</strong></p>\n\n<pre><code>    parse error (possibly incorrect indentation or mismatched brackets)\nFailed, modules loaded: none.\n</code></pre>\n\n<p>Due to a comment below I updated but still not working - any suggestions?</p>\n\n<pre><code>isMember _ [] = 0\nisMember a (x:xs)\n    | (a == x) = 1\n    | otherwise isMember a xs\n\nisMemberTwice _ [] = False\nisMemberTwice a (x:xs)\n    | (a == x) = if ((1 + isMember a (x:xs)) &gt; 1) then True\n    | otherwise isMemberTwice a xs\n</code></pre>\n"}, {"tags": ["haskell", "monad-transformers", "facade", "state-monad"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 1493450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8611a2b3833bcfe7f2c5542a2e127c?s=128&d=identicon&r=PG", "display_name": "g. nicholas d&#39;andrea", "link": "https://stackoverflow.com/users/1493450/g-nicholas-dandrea"}, "edited": false, "score": 0, "creation_date": 1445825347, "post_id": 33336906, "comment_id": 54471491, "body": "I looked into using Zoom, but I&#39;m not sure if it fits my added use case above. I&#39;m not sure how to set that up so that I can construct the <code>MonadState Character</code> monad, but be linked to a monadic action on the world."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 113, "user_id": 1493450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8611a2b3833bcfe7f2c5542a2e127c?s=128&d=identicon&r=PG", "display_name": "g. nicholas d&#39;andrea", "link": "https://stackoverflow.com/users/1493450/g-nicholas-dandrea"}, "edited": false, "score": 0, "creation_date": 1445830501, "post_id": 33336906, "comment_id": 54472677, "body": "Well... you can&#39;t do exactly what you&#39;re asking. Any state you want to be able to access has to at least be available according to the type signature -- you can&#39;t lie about what state you need access to! If your action needs access to the world state, well, by golly, the type will have to say that it can access the world state."}, {"owner": {"reputation": 113, "user_id": 1493450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8611a2b3833bcfe7f2c5542a2e127c?s=128&d=identicon&r=PG", "display_name": "g. nicholas d&#39;andrea", "link": "https://stackoverflow.com/users/1493450/g-nicholas-dandrea"}, "edited": false, "score": 0, "creation_date": 1445832272, "post_id": 33336906, "comment_id": 54473053, "body": "Hrm. That makes sense. What I am trying to achieve is preventing character-specific code from being able to make unauthorized changes on the parent state. My other approach could be to make some data type where a parent state change is a data constructor (like <code>data STDiff = Move Int Int | ...</code>)"}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 3, "last_activity_date": 1445821031, "creation_date": 1445821031, "answer_id": 33336906, "question_id": 33336722, "link": "https://stackoverflow.com/questions/33336722/monad-facade-for-a-monadstate-in-haskell/33336906#33336906", "title": "Monad facade for a MonadState in Haskell", "body": "<p>Sounds like you're looking for <a href=\"https://hackage.haskell.org/package/lens-4.13/docs/Control-Lens-Zoom.html#t:Zoom\" rel=\"nofollow\"><code>Zoom</code></a>, which lets you convert a stateful action on the view of a lens into a stateful action on the source of the lens.</p>\n"}, {"tags": [], "owner": {"reputation": 1706, "user_id": 1840613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfd4d21060ccd9b972864e0f6cb8c4?s=128&d=identicon&r=PG", "display_name": "Jeremy List", "link": "https://stackoverflow.com/users/1840613/jeremy-list"}, "is_accepted": false, "score": 0, "last_activity_date": 1445946034, "creation_date": 1445946034, "answer_id": 33367031, "question_id": 33336722, "link": "https://stackoverflow.com/questions/33336722/monad-facade-for-a-monadstate-in-haskell/33367031#33367031", "title": "Monad facade for a MonadState in Haskell", "body": "<p>You actually need 2 conversion functions: one to extract the character from the world and another one to modify the world with the modified character. You can put them together like this:</p>\n\n<pre><code>extractCharacter :: World -&gt; Character\nextractCharacter = error \"Tried to call placeholder function\"\n\nreplaceCharacter :: World -&gt; Character -&gt; World\nreplaceCharacter = error \"Tried to call placeholder function\"\n\nrunCharacterSubroutine :: (Functor m) =&gt;\n  StateT Character m a -&gt; StateT World m a\nrunCharacterSubroutine act = StateT $ \\w -&gt;\n  fmap (\\(a,c') -&gt; (a,replaceCharacter w c')) $\n  runStateT act (extractCharacter w)\n</code></pre>\n\n<p>In your game, you probably want something a little more complicated, but that's just a matter of adding an extra parameter to <code>extractCharacter</code> and <code>replaceCharacter</code></p>\n\n<p>Note that the function I gave only works if the <code>StateT</code> is at the top of the monad transformer stack. If it's not: you will have to use the <code>mmorph</code> package</p>\n"}], "owner": {"reputation": 113, "user_id": 1493450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd8611a2b3833bcfe7f2c5542a2e127c?s=128&d=identicon&r=PG", "display_name": "g. nicholas d&#39;andrea", "link": "https://stackoverflow.com/users/1493450/g-nicholas-dandrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1445946034, "creation_date": 1445819484, "last_edit_date": 1445825271, "question_id": 33336722, "link": "https://stackoverflow.com/questions/33336722/monad-facade-for-a-monadstate-in-haskell", "title": "Monad facade for a MonadState in Haskell", "body": "<p>Background: I'm creating a game with a stateful monad for reading and writing changes to the global state of the game.</p>\n\n<p>I would like to divide my game into components, such as \"Characters\", providing a domain specific way for these components to interact with the global state. Ideally this might be define specific actions of the form <code>MonadState Character m =&gt; m a</code> that I could use, but each such <code>m a</code> would enact changes on the parent (global state).</p>\n\n<p>I've searched around for converting between state monads, or providing an interface from one state monad to another, but the specific language for this is beyond my scope of knowledge. I am also already using Lenses, and I'm wondering if I can do something with them.</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>I'd like to be able to do something like \n<code>moveCharacter :: MonadState Character m =&gt; Int -&gt; Int -&gt; m ()</code> </p>\n\n<p>and have that perform <code>move :: MonadState World m =&gt; Int -&gt; Int -&gt; m ()</code> inside. Basically, abstracting the world specifics away from the character.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["haskell", "types", "algebraic-data-types"], "comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 2, "creation_date": 1445812390, "post_id": 33335828, "comment_id": 54468428, "body": "these are called phantom types; they are useful for parametrizing other types, i.e. passing as type parameter to type constructors, none of whose value constructors expect a value parameter of that phantom type."}, {"owner": {"reputation": 42094, "user_id": 828361, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6a82397672dcc1fca31c32508ef0798b?s=128&d=identicon&r=PG", "display_name": "pigworker", "link": "https://stackoverflow.com/users/828361/pigworker"}, "edited": false, "score": 10, "creation_date": 1445812918, "post_id": 33335828, "comment_id": 54468564, "body": "Never mind phantom types (so it&#39;s not a duplicate, Erik), there&#39;s plenty of sensible motivation for at least one <i>empty</i> type: <a href=\"http://stackoverflow.com/q/14131856/828361\">stackoverflow.com/q/14131856/828361</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1706, "user_id": 1840613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfd4d21060ccd9b972864e0f6cb8c4?s=128&d=identicon&r=PG", "display_name": "Jeremy List", "link": "https://stackoverflow.com/users/1840613/jeremy-list"}, "edited": false, "score": 0, "creation_date": 1445957112, "post_id": 33335874, "comment_id": 54536458, "body": "That&#39;s only part of why phantom types are useful. To extend your example: you could also have a few functions that worked fine on either checked or unchecked <code>Stuff</code>, and other functions that only worked on the checked version."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 1706, "user_id": 1840613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfd4d21060ccd9b972864e0f6cb8c4?s=128&d=identicon&r=PG", "display_name": "Jeremy List", "link": "https://stackoverflow.com/users/1840613/jeremy-list"}, "edited": false, "score": 0, "creation_date": 1445974132, "post_id": 33335874, "comment_id": 54547555, "body": "@JeremyList I totally agree (otherwise, we could simply use two different types instead of a phantom index). I added one more function, to improve a little bit, even the full power of phantom types is not shown here."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 13, "last_activity_date": 1445974008, "last_edit_date": 1445974008, "creation_date": 1445812492, "answer_id": 33335874, "question_id": 33335828, "link": "https://stackoverflow.com/questions/33335828/what-is-the-purpose-of-algebraic-data-types-without-a-constructor/33335874#33335874", "title": "What is the purpose of algebraic data types without a constructor?", "body": "<p>Type-level machinery often requires types to exist but never constructs values of such types.</p>\n\n<p>E.g., phantom types:</p>\n\n<pre><code>module Example (Unchecked, Checked, Stuff()) where\n\ndata Unchecked\ndata Checked\ndata Stuff c = S Int String Double\n\ncheck :: Stuff Unchecked -&gt; Maybe (Stuff Checked)\ncheck (S i s d) = if i&gt;43 &amp;&amp; ...\n                  then Just (S i s d)\n                  else Nothing\n\nreadFile :: Filepath -&gt; IO (Stuff Unchecked)\nreadFile f = ...\n\nworkWithChecked :: Stuff Checked -&gt; Int -&gt; String\nworkWithChecked stuff i = ...\n\nworkWithAny :: Stuff any -&gt; Int -&gt; Stuff any\nworkWithAny stuff i = ...\n</code></pre>\n\n<p>As long as the <code>S</code> constructor is not exported by the module, the user of this library can not forge the \"checked\" status on the <code>Stuff</code> data type.</p>\n\n<p>Above, the <code>workWithChecked</code> function does not have to sanitize the input every time it is called. The user must have already done it, since it has to provide a value in the \"checked\" type -- and this means the user had to call the <code>check</code> function beforehand. This is an efficient and robust design: we do not repeat the same check over and over at every call, and yet we do not allow the user to pass unchecked data.</p>\n\n<p>Note how the values of types <code>Checked</code>,<code>Unchecked</code> are immaterial -- we never use those.</p>\n\n<p>As others mentioned in comments, there are many other uses of empty types than phantom types. For instance, some GADTs involve empty types. E.g.</p>\n\n<pre><code>data Z\ndata S n\ndata Vec n a where\n  Nil  :: Vec Z a\n  Cons :: a -&gt; Vec n a -&gt; Vec (S n) a\n</code></pre>\n\n<p>Above we use empty types to record length information in types.</p>\n\n<p>Further, types with no constructors are needed to achieve some theoretical properties: if we look for an <code>a</code> such that <code>Either a T</code> is isomorphic to <code>T</code>, we want <code>a</code> to be empty. In type theory, an empty type is commonly used as a type equivalent of a logically \"false\" proposition.</p>\n"}], "owner": {"reputation": 319, "user_id": 2485944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a2124f2a8b6ac971ed9dd513d347034?s=128&d=identicon&r=PG", "display_name": "Henk", "link": "https://stackoverflow.com/users/2485944/henk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "accepted_answer_id": 33335874, "answer_count": 1, "score": 8, "last_activity_date": 1445974008, "creation_date": 1445812132, "question_id": 33335828, "link": "https://stackoverflow.com/questions/33335828/what-is-the-purpose-of-algebraic-data-types-without-a-constructor", "title": "What is the purpose of algebraic data types without a constructor?", "body": "<p>In Haskell you can define a algebraic data type without a constructor:</p>\n\n<pre><code>data Henk\n</code></pre>\n\n<p>But what is the purpose of a type (or kind?) that doesn't have a constructor?</p>\n"}, {"tags": ["list", "haskell", "monads"], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1445804035, "post_id": 33334431, "comment_id": 54465799, "body": "Whether deforestation happens depends tremendously on the function passed to <code>concatMap</code>. Unless it&#39;s a &quot;good producer&quot;, the list conses will be allocated, but probably freed immediately."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 377, "user_id": 5451968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b7d9443424f1e74759adb9b81ff7d95?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5451968/j-doe"}, "edited": false, "score": 4, "creation_date": 1445804928, "post_id": 33334431, "comment_id": 54466073, "body": "@J.Doe, good producers are written using functions that GHC knows how to fuse with good consumers. The fundamental good producers are <code>build</code> and <code>augment</code>, but you normally don&#39;t use those directly. Use <code>replicate</code>, <code>iterate</code>, <code>unfoldr</code> (recent versions), <code>map</code>, <code>filter</code>, list comprehensions, and numeric ranges."}, {"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 2, "creation_date": 1445824323, "post_id": 33334431, "comment_id": 54471224, "body": "Deforestation also requires a nonzero optimization setting (so won&#39;t happen in GHCi)."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 6, "last_activity_date": 1445803370, "last_edit_date": 1445803370, "creation_date": 1445803140, "answer_id": 33334431, "question_id": 33334347, "link": "https://stackoverflow.com/questions/33334347/map-where-each-input-element-can-correspond-to-multiple-output-elements/33334431#33334431", "title": "Map, where each input element can correspond to multiple output elements", "body": "<p>Just use</p>\n\n<pre><code>mapmulti = concatMap\n</code></pre>\n\n<p>from the library.</p>\n\n<p>Moreover, even using your own implementation, the compiler might be able to optimize the intermediate lists away using a technique known as \"deforestation\".</p>\n\n<p>Even if this is not done, at runtime the intermediate lists would be not completely produced before they are consumed, since Haskell is lazy. Rather, one list element will be produced and immediately consumed, making it available for garbage collection before the next one is produced. This would improve the memory footprint greatly, since everything might be done in constant space.</p>\n"}], "owner": {"reputation": 377, "user_id": 5451968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b7d9443424f1e74759adb9b81ff7d95?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5451968/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 33334431, "answer_count": 1, "score": 1, "last_activity_date": 1445803370, "creation_date": 1445802751, "question_id": 33334347, "link": "https://stackoverflow.com/questions/33334347/map-where-each-input-element-can-correspond-to-multiple-output-elements", "title": "Map, where each input element can correspond to multiple output elements", "body": "<p>Being new to haskell, I am wondering what a more efficient way of doing the following is:</p>\n\n<pre><code>mapmulti :: (a -&gt; [b]) -&gt; [a] -&gt; [b]\nmapmulti fn list = concat $ map fn list\n</code></pre>\n\n<p>My lists are going to be thousands to millions of elements long, and it seems a shame to create a list of N lists just to concatenate them together.</p>\n\n<p>Alternatively and preferably, is there some more general (probably monadic) way to have haskell create a list progressively from the results of a function, such that the list is built progressively without creating an <code>O(n)</code> sized recursive expression tree to evaluate?</p>\n"}, {"tags": ["list", "haskell"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3680999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d69281660410f6a894811f8fee4e739?s=128&d=identicon&r=PG&f=1", "display_name": "user3680999", "link": "https://stackoverflow.com/users/3680999/user3680999"}, "edited": false, "score": 0, "creation_date": 1445800678, "post_id": 33333807, "comment_id": 54464639, "body": "Thank&#39;s @rafalio, another question, so if i wanted the have a list of all the 4th element of the tuples, can i use map too? Like this : (map get4th), this should return a list with all the 4th element?"}, {"owner": {"reputation": 3632, "user_id": 856079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/79f1d8ae198abbfd00068fd36cde5eda?s=128&d=identicon&r=PG", "display_name": "rafalio", "link": "https://stackoverflow.com/users/856079/rafalio"}, "reply_to_user": {"reputation": 93, "user_id": 3680999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d69281660410f6a894811f8fee4e739?s=128&d=identicon&r=PG&f=1", "display_name": "user3680999", "link": "https://stackoverflow.com/users/3680999/user3680999"}, "edited": false, "score": 0, "creation_date": 1445884682, "post_id": 33333807, "comment_id": 54501969, "body": "Yep, that will work also! You will actually need to have a separate function to access every element of a tuple as in Haskell you are not able to get an arbitrary of a tuple. Let me know if that helped or if you need anything else or else you can accept :)"}], "tags": [], "owner": {"reputation": 3632, "user_id": 856079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/79f1d8ae198abbfd00068fd36cde5eda?s=128&d=identicon&r=PG", "display_name": "rafalio", "link": "https://stackoverflow.com/users/856079/rafalio"}, "is_accepted": true, "score": 2, "last_activity_date": 1445799949, "creation_date": 1445799949, "answer_id": 33333807, "question_id": 33333739, "link": "https://stackoverflow.com/questions/33333739/search-in-a-list-of-tuples/33333807#33333807", "title": "Search in a list of tuples", "body": "<p>Here is a way to do it:</p>\n\n<pre><code>maxAge l = maximumBy (compare `on` (\\(a,b,c,d) -&gt; b)) l\n</code></pre>\n\n<p>The problem with your solution is that you are not using <code>filter</code> correctly. <code>filter</code> just removes elements from a list, it can only make your list smaller. What it seems like you wanted to do is use <code>map</code>.</p>\n\n<p>The following should also work: <code>maximum (map get2th) ls</code></p>\n"}], "owner": {"reputation": 93, "user_id": 3680999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d69281660410f6a894811f8fee4e739?s=128&d=identicon&r=PG&f=1", "display_name": "user3680999", "link": "https://stackoverflow.com/users/3680999/user3680999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 33333807, "answer_count": 1, "score": 1, "last_activity_date": 1445801655, "creation_date": 1445799693, "last_edit_date": 1445801655, "question_id": 33333739, "link": "https://stackoverflow.com/questions/33333739/search-in-a-list-of-tuples", "title": "Search in a list of tuples", "body": "<p>I'm new in Haskell, and i'm having a few problems. \nAfter reading about high order functions, i was trying solve a few exercises about tuples.</p>\n\n<p>So, i have a list with tuples, something like this:</p>\n\n<pre><code>list tup = [(\"James\",19,\"SB\",2),(\"Patrick\",19,\"FDF\",4),(\"Jim\",20,\"CD\",3)]\n</code></pre>\n\n<p>And one of the problems was to compare the position of the tuples, for example : \nget the higher age (snd element in a tuple), like this :</p>\n\n<pre><code>higherAge tup\n&gt;20\n</code></pre>\n\n<p>What i was trying :</p>\n\n<pre><code>higherAge ls = maximum (filter (get2th ls))\n\nget2th (_,a,_,_,_) = a\n</code></pre>\n"}, {"tags": ["haskell", "recursion", "typeclass", "polyvariadic"], "comments": [{"owner": {"reputation": 42094, "user_id": 828361, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6a82397672dcc1fca31c32508ef0798b?s=128&d=identicon&r=PG", "display_name": "pigworker", "link": "https://stackoverflow.com/users/828361/pigworker"}, "edited": false, "score": 0, "creation_date": 1445800216, "post_id": 33333614, "comment_id": 54464461, "body": "Looks like defaulting (assuming <code>1</code> means the <code>Int</code> 1) kicks in after instance resolution in <code>ghci</code>. Rightly so. You could add a separate bunch of step-case instances for <code>Integer</code> instead of <code>Int</code>, and then you&#39;d have a real ambiguity."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1445800709, "post_id": 33333614, "comment_id": 54464647, "body": "You may like to read <a href=\"http://stackoverflow.com/q/10777283/791604\">this question, and my answer to it</a> for some explanations in another direction, and a useful trick that you can use to deal with the bad type inference here: use <code>instance a ~ Int =&gt; SumRes (a -&gt; r)</code> instead of <code>instance SumRes (Int -&gt; r)</code>."}, {"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1445824766, "post_id": 33333614, "comment_id": 54471337, "body": "To clarify the part about defaulting, <code>Int</code> is not a type that&#39;s normally defaulted to, but <code>Integer</code> is. Therefore the original code works by defaulting all the literals to <code>Integer</code>."}, {"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1445841175, "post_id": 33333614, "comment_id": 54475421, "body": "My comment turns out to be a bit naive, as even putting <code>Integer</code> instead of <code>Int</code> in the changed code isn&#39;t enough to fix it. (I was made aware of this by a just posted <a href=\"http://stackoverflow.com/questions/33339017/why-does-the-number-literal-2-cannot-match-the-type-integer-in-the-following-cod\">duplicate question</a>.)"}], "answers": [{"tags": [], "owner": {"reputation": 3413, "user_id": 89709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b244bf1a55ae0c7dbc7f034490d8227c?s=128&d=identicon&r=PG", "display_name": "Simon Broadhead", "link": "https://stackoverflow.com/users/89709/simon-broadhead"}, "is_accepted": false, "score": 3, "last_activity_date": 1445800454, "creation_date": 1445800454, "answer_id": 33333915, "question_id": 33333614, "link": "https://stackoverflow.com/questions/33333614/haskell-polyvariadic-function-and-type-inference/33333915#33333915", "title": "Haskell, polyvariadic function and type inference", "body": "<p>Number literals are themselves polymorphic, rather than being of type <code>Int</code></p>\n\n<pre><code>*Main&gt; :t 1\n1 :: Num a =&gt; a\n</code></pre>\n\n<p>Take a look what happens when we get the type signature:</p>\n\n<pre><code>*Main&gt; :t sumOf 1 2 3\nsumOf 1 2 3 :: (Num a, Num a1, SumRes (a -&gt; a1 -&gt; t)) =&gt; t\n</code></pre>\n\n<p>Notice that the type does not mention <code>Int</code> at all. The type checker can't figure out how to actually compute the sum because none of the defined <code>Int</code> instances are general enough to apply here.</p>\n\n<p>If you fix the types to be <code>Int</code>, then you end up with</p>\n\n<pre><code>*Main&gt; :t sumOf (1 :: Int) (2 :: Int) (3 :: Int)\nsumOf (1 :: Int) (2 :: Int) (3 :: Int) :: SumRes t =&gt; t\n\n*Main&gt; :t sumOf (1 :: Int) (2 :: Int) (3 :: Int) :: Int\nsumOf (1 :: Int) (2 :: Int) (3 :: Int) :: Int\n</code></pre>\n\n<p>Note that <code>SumRes t =&gt; t</code> is compatible with <code>Int</code> because we have a <code>SumRes Int</code> instance, but if we don't explicitly specify <code>Int</code>, then we have no instances general enough to apply here, because there is no general <code>SumRes t</code> instance.</p>\n"}, {"comments": [{"owner": {"reputation": 1336, "user_id": 2801316, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/cqx1a.jpg?s=128&g=1", "display_name": "FtheBuilder", "link": "https://stackoverflow.com/users/2801316/fthebuilder"}, "edited": false, "score": 1, "creation_date": 1445815309, "post_id": 33334388, "comment_id": 54469131, "body": "This was exactly the point. When you said <b>here&#39;s how to define <code>SumRes</code> on <code>Int -&gt; r</code> for any r (under certain conditions)</b>, it means that although we are explaining to the compiler in this specific case, it may be other ways like <code>Double -&gt; r</code>. Another question: why isn&#39;t <code>TypeFamilies</code> default? Are there good reasons?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 1336, "user_id": 2801316, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/cqx1a.jpg?s=128&g=1", "display_name": "FtheBuilder", "link": "https://stackoverflow.com/users/2801316/fthebuilder"}, "edited": false, "score": 2, "creation_date": 1445821880, "post_id": 33334388, "comment_id": 54470645, "body": "@FtheBuilder With a few notable exceptions, GHC attempts to follow <a href=\"https://www.haskell.org/onlinereport/haskell2010/\" rel=\"nofollow noreferrer\">the Report</a> by default, and type families are not in the Report. GHC is probably the only implementation that supports them; and since supporting them might be seen as a significant implementation burden, I suspect they will not become part of the Report in the near future. However, I would not consider <code>TypeFamilies</code> a controversial or &quot;icky&quot; extension; if you like it, and plan to use GHC, use it with impunity."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 5, "last_activity_date": 1445802952, "creation_date": 1445802952, "answer_id": 33334388, "question_id": 33333614, "link": "https://stackoverflow.com/questions/33333614/haskell-polyvariadic-function-and-type-inference/33334388#33334388", "title": "Haskell, polyvariadic function and type inference", "body": "<p>The instance</p>\n\n<pre><code>instance (...) =&gt; SumRes (Int -&gt; r) where\n</code></pre>\n\n<p>roughly means \"here's how to define <code>SumRes</code> on <code>Int -&gt; r</code> for any <code>r</code> (under certain conditions)\". Compare it with</p>\n\n<pre><code>instance (...) =&gt; SumRes (a -&gt; r) where\n</code></pre>\n\n<p>which means \"here's how to define <code>SumRes</code> on <code>a -&gt; r</code> for any <code>a,r</code> (under certain conditions)\".</p>\n\n<p>The main difference is that the second one states that this is <em>the</em> relevant instance whichever the types <code>a,r</code> might be. Barring some (very tricky and potentially dangerous) Haskell extension, one can not add more instances later on involving functions. Instead, the first one leaves room for new instances such as e.g.</p>\n\n<pre><code>instance (...) =&gt; SumRes (Double -&gt; r) where ...\ninstance (...) =&gt; SumRes (Integer -&gt; r) where ...\ninstance (...) =&gt; SumRes (Float -&gt; r) where ...\ninstance (...) =&gt; SumRes (String -&gt; r) where ... -- nonsense, but allowed\n</code></pre>\n\n<p>This is paired with the fact that numeric literals such as <code>5</code> are polymorphic: their type must be inferred from the context. Since later on the compiler might find e.g. a <code>Double -&gt; r</code> instance and choose <code>Double</code> as the literal types, the compiler does not commit to the <code>Int -&gt; r</code> instance, and reports the ambiguity in a type error.</p>\n\n<p>Note that, using some (safe) Haskell extensions (such as <code>TypeFamilies</code>), it is possible to \"promise\" to the compiler that your <code>Int -&gt; r</code> is the only one that will be declared in the whole program. This is done like this:</p>\n\n<pre><code>instance (..., a ~ Int) =&gt; SumRes (a -&gt; r) where ...\n</code></pre>\n\n<p>This promises to handle all the \"functional type\" cases, but requires that <code>a</code> is actually the same type as <code>Int</code>.</p>\n"}], "owner": {"reputation": 1336, "user_id": 2801316, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/cqx1a.jpg?s=128&g=1", "display_name": "FtheBuilder", "link": "https://stackoverflow.com/users/2801316/fthebuilder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 3, "accepted_answer_id": 33334388, "answer_count": 2, "score": 3, "last_activity_date": 1445802952, "creation_date": 1445798993, "last_edit_date": 1495542652, "question_id": 33333614, "link": "https://stackoverflow.com/questions/33333614/haskell-polyvariadic-function-and-type-inference", "title": "Haskell, polyvariadic function and type inference", "body": "<p>While looking for Polyvariadic function examples, I found this resource:\n<a href=\"https://stackoverflow.com/questions/3467279/how-to-create-a-polyvariadic-haskell-function\">StackOverflow: How to create a polyvariadic haskell function?</a>, and there was an answer snippet like this:</p>\n\n<pre><code>class SumRes r where \n  sumOf :: Integer -&gt; r\n\ninstance SumRes Integer where\n  sumOf = id\n\ninstance (Integral a, SumRes r) =&gt; SumRes (a -&gt; r) where\n  sumOf x = sumOf . (x +) . toInteger\n</code></pre>\n\n<p>Then we could use:</p>\n\n<pre><code>*Main&gt; sumOf 1 :: Integer\n1\n*Main&gt; sumOf 1 4 7 10 :: Integer\n22\n*Main&gt; sumOf 1 4 7 10 0 0  :: Integer\n22\n*Main&gt; sumOf 1 4 7 10 2 5 8 22 :: Integer\n59\n</code></pre>\n\n<p>I tried out to change it a little bit, just for curiosity, because I found it pretty tricky at first glance, and I got into this:</p>\n\n<pre><code>class SumRes r where\n  sumOf :: Int -&gt; r\n\ninstance SumRes Int where\n  sumOf = id\n\ninstance (SumRes r) =&gt; SumRes (Int -&gt; r) where\n  sumOf x = sumOf . (x +)\n</code></pre>\n\n<p>I just changed <code>Integer</code> to <code>Int</code> and turned <code>instance (Integral a, SumRes r) =&gt; SumRes (a -&gt; r) where</code> less polymorphic to <code>instance (SumRes r) =&gt; SumRes (Int -&gt; r) where</code></p>\n\n<p>To compile it I had to set <code>XFlexibleInstances</code> flag. When I tryed to test <code>sumOf</code> function I got a problem:</p>\n\n<pre><code>*Main&gt; sumOf 1 :: Int\n1\n*Main&gt; sumOf 1 1 :: Int\n&lt;interactive&gt;:9:9\n    No instance for (Num a0) arising from the literal `1'\n    The type variable `a0' is ambiguous...\n</code></pre>\n\n<p>Then I tried:</p>\n\n<pre><code>*Main&gt; sumOf (1 :: Int) (1 :: Int) :: Int\n2\n</code></pre>\n\n<p>Why can't Haskell infer that we want an <code>Int</code> in this situation, considering we are using <code>Int</code> within our <code>SumRes</code> typeclass?</p>\n"}, {"tags": ["haskell", "data-kinds"], "comments": [{"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 2, "creation_date": 1445790380, "post_id": 33331925, "comment_id": 54460917, "body": "The <code>Applicative</code> instance for <code>Vec n</code> is given on page 4 of <a href=\"https://personal.cis.strath.ac.uk/conor.mcbride/pub/hasochism.pdf\" rel=\"nofollow noreferrer\">the Hasochism paper</a>, along with some discussion. Doesn&#39;t use <code>TypeLits</code> but it shouldn&#39;t be too hard to translate."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 1, "creation_date": 1445792251, "post_id": 33331925, "comment_id": 54461603, "body": "@BenjaminHodgson, <code>TypeLits</code> have no inductive structure, so they may not really be viable option."}], "answers": [{"comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1445804911, "post_id": 33332355, "comment_id": 54466070, "body": "It&#39;s possible to get around this, but you need <code>unsafeCoerce</code> and it&#39;s quite ugly."}, {"owner": {"reputation": 42094, "user_id": 828361, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6a82397672dcc1fca31c32508ef0798b?s=128&d=identicon&r=PG", "display_name": "pigworker", "link": "https://stackoverflow.com/users/828361/pigworker"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 2, "creation_date": 1445805432, "post_id": 33332355, "comment_id": 54466253, "body": "Yes, you can get around this with <code>unsafeCoerce</code>. But that&#39;s in the vertical rather than lateral sense that you can get around obstacles in a Sherman tank."}], "tags": [], "owner": {"reputation": 42094, "user_id": 828361, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6a82397672dcc1fca31c32508ef0798b?s=128&d=identicon&r=PG", "display_name": "pigworker", "link": "https://stackoverflow.com/users/828361/pigworker"}, "is_accepted": true, "score": 9, "last_activity_date": 1445792118, "creation_date": 1445792118, "answer_id": 33332355, "question_id": 33331925, "link": "https://stackoverflow.com/questions/33331925/applicative-instance-of-a-vector-with-kind-nats/33332355#33332355", "title": "Applicative instance of a vector with kind nats", "body": "<p>There's more than one way to cook this <code>Applicative</code> instance. Benjamin's comment points to the way I usually do it. The way you're trying to do it makes sense, too. In principle, at least. I fear it will struggle in practice, because the <code>TypeLits</code> machinery doesn't know enough about numbers (yet). Here's the problem boiled down:</p>\n\n<pre><code>{-# LANGUAGE DataKinds #-}\n{-# LANGUAGE GADTs #-}\n{-# LANGUAGE KindSignatures #-}\n{-# LANGUAGE TypeOperators #-}\n{-# LANGUAGE ScopedTypeVariables #-}\n\nmodule AV where\n\nimport GHC.TypeLits\n\ngrumble :: forall (f :: Nat -&gt; *) (n :: Nat)(j :: Nat)(k :: Nat).\n           (n ~ (1 + j), n ~ (1 + k)) =&gt; f j -&gt; f k\ngrumble x = x\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>Could not deduce (j ~ k)\nfrom the context (n ~ (1 + j), n ~ (1 + k))\n</code></pre>\n\n<p>It'll be awfully tricky to persuade GHC that the two tails have the same length in the case of <code>Cons</code> for <code>&lt;*&gt;</code> without the acknowledgement that <code>1 +</code> is injective.</p>\n"}], "owner": {"reputation": 104, "user_id": 1937298, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91687046f069631aa8f53547fc4fba1a?s=128&d=identicon&r=PG&f=1", "display_name": "davl", "link": "https://stackoverflow.com/users/1937298/davl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 33332355, "answer_count": 1, "score": 3, "last_activity_date": 1445792118, "creation_date": 1445789752, "last_edit_date": 1445790144, "question_id": 33331925, "link": "https://stackoverflow.com/questions/33331925/applicative-instance-of-a-vector-with-kind-nats", "title": "Applicative instance of a vector with kind nats", "body": "<p>I'm playing around with kind nats for the moment and got stuck when trying to define an applicative instance of a vector data type.</p>\n\n<p>A reasonable instance, I think, would be that <code>pure 1 :: Vec 3 Int</code> would give me a vector of length 3 all elements of the value 1 and the <code>&lt;*&gt;</code> operator would zip together functions with values.</p>\n\n<p>The problem where I'm stuck is that it will be recursive but depending on the value of the nat kind.</p>\n\n<p>As you see below I've used a lot of pragmas (I don't even know which are necessary) and a few tricks I found (<code>n ~ (1 + n0)</code> and <code>OVERLAPPING</code> pragmas) but none seems to work for me. </p>\n\n<p>The question is if it possible to encode in Haskell and if it is, what have I missed?</p>\n\n<pre><code>{-# LANGUAGE DataKinds #-}\n{-# LANGUAGE FlexibleContexts #-}\n{-# LANGUAGE GADTs #-}\n{-# LANGUAGE KindSignatures #-}\n{-# LANGUAGE TypeOperators #-}\n{-# LANGUAGE FlexibleInstances #-}\n{-# LANGUAGE InstanceSigs #-}\n\nimport GHC.TypeLits\n\n\ndata Vec :: (Nat -&gt; * -&gt; *) where\n  Nil  :: Vec 0 a\n  Cons :: a -&gt; Vec n a -&gt; Vec (1 + n) a\n\ninstance Functor (Vec n) where\n  fmap f Nil = Nil\n  fmap f (Cons a as) = Cons (f a) (fmap f as)\n\ninstance {-# OVERLAPPING #-} Applicative (Vec 0) where\n  pure _ = Nil\n  a &lt;*&gt; b = Nil\n\ninstance {-# OVERLAPPABLE #-} n ~ (1 + n0) =&gt; Applicative (Vec n) where\n  pure :: n ~ (1 + n0) =&gt; a -&gt; Vec n a\n  pure v = Cons v (pure v :: Vec n0 a)\n\n  (&lt;*&gt;) :: n ~ (1 + n0) =&gt; Vec n (a -&gt; b) -&gt; Vec n a -&gt; Vec n b\n  (Cons f fs) &lt;*&gt; (Cons v vs) = Cons (f v) (fs &lt;*&gt; vs :: Vec n0 b)\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>The error I get is:</p>\n\n<pre><code>Could not deduce (a ~ a1)\nfrom the context (Functor (Vec n), n ~ (1 + n0))\n  bound by the instance declaration at Vectors.hs:27:31-65\n  \u2018a\u2019 is a rigid type variable bound by\n      the type signature for pure :: (n ~ (1 + n0)) =&gt; a -&gt; Vec n a\n      at Vectors.hs:28:11\n  \u2018a1\u2019 is a rigid type variable bound by\n       an expression type signature: Vec n1 a1 at Vectors.hs:29:20\nRelevant bindings include\n  v :: a (bound at Vectors.hs:29:8)\n  pure :: a -&gt; Vec n a (bound at Vectors.hs:29:3)\nIn the first argument of \u2018pure\u2019, namely \u2018v\u2019\nIn the second argument of \u2018Cons\u2019, namely \u2018(pure v :: Vec n0 a)\u2019\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": false, "score": 0, "last_activity_date": 1445802032, "last_edit_date": 1445802032, "creation_date": 1445787912, "answer_id": 33331611, "question_id": 33331445, "link": "https://stackoverflow.com/questions/33331445/what-is-the-right-way-to-declare-data-that-is-an-extension-of-another-data/33331611#33331611", "title": "What is the right way to declare data that is an extension of another data", "body": "<p>You could use a <code>Maybe ThingExt</code> field on <code>ThingBase</code> I guess, at least if you only have one extension type. </p>\n\n<p>If you have several extensions like this, you can use a combination of embedding and matching on various constructors of the embedded data type, where each constructor represents one way to extend the base structure. </p>\n\n<p>Once that becomes unmanageable, classes might become unevitable, but some kind of data type composition would still be useful to avoid duplication. </p>\n"}, {"tags": [], "owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "is_accepted": false, "score": 1, "last_activity_date": 1445790835, "last_edit_date": 1445790835, "creation_date": 1445788039, "answer_id": 33331632, "question_id": 33331445, "link": "https://stackoverflow.com/questions/33331445/what-is-the-right-way-to-declare-data-that-is-an-extension-of-another-data/33331632#33331632", "title": "What is the right way to declare data that is an extension of another data", "body": "<p>You can make a data type that is a type union of the two distinct types of things:</p>\n\n<pre><code>data ThingBase = ThingBase { chBaseOne :: Int, chBaseTwo :: Int }\ndata ThingExt  = ThingExt { chExtOne :: Int, chExtTwo :: Int, chExtThree :: Int }\ndata ThingLike = CreatedWithBase ThingBase | \n                 CreatedWithExt ThingExt\n</code></pre>\n\n<p>Then for any function which should take <em>either</em> a <code>ThingBase</code> or a <code>ThingExt</code>, and do different things depending, you can do pattern matching on the type constructor:</p>\n\n<pre><code>foo :: ThingLike -&gt; Int\nfoo (CreatedWithBase (ThingBase c1 c2)) = c1 + c2\nfoo (CreatedWithExt (ThingExt c1 c2 c3)) = c3\n\n-- Or another way:\nbar :: ThingLike -&gt; Int\nbar (CreatedWithBase v) = (chBaseOne v) + (chBaseTwo v)\nbar (CreatedWithExt v) = chExtThree v\n</code></pre>\n\n<p>This has the <em>benefit</em> that it forces you to pedantically specify exactly what happens to <code>ThingBase</code>s or <code>ThingExt</code>s wherever they appear to be processed as part of handling a <code>ThingLike</code>, by creating the extra wrapping layer of constructors (the <code>CreatedWithBase</code> and <code>CreatedWithExt</code> constructors I used, whose sole purpose is to indicate which type of thing you expect at a certain point of code).</p>\n\n<p>But it has the disadvantage that it doesn't allow for overloaded names for the field accessor functions. Personally I don't see this as too big of a loss, since the extra verbosity required to reference attributes acts like a natural complexity penalty and helps motivate the programmer to keep the code sparse and use fewer bad accessor/getter/setter anti-patterns. However, if you want to go far with overloaded accessor names, you should <a href=\"http://www.haskellforall.com/2012/01/haskell-for-mainstream-programmers_28.html\" rel=\"nofollow\">look into lenses</a>.</p>\n\n<p>This is just one idea and it's not right for every problem. The example you already give with type classes is also perfectly fine and I don't see any good reason to call it hideous.</p>\n\n<p>Just about the only \"bad\" thing would be wanting to somehow implicitly process <code>ThingBase</code>s differently from <code>ThingExt</code>s without needing anything in the type signature or the pattern matching sections of a function body to explicitly tell people reading your code precisely when and where the two different types are differentiated, which would be more like a duck typing approach which is not really what you should do in Haskell. </p>\n\n<p>This seems to be what you're trying to get at by trying to force both <code>ThingBase</code> and <code>ThingExt</code> to have a value constructor with the same name of just <code>Thing</code> -- it seems artificially nice that the same word can construct values of either type, but my feeling is it's not actually nice. I might be misunderstanding though.</p>\n"}, {"comments": [{"owner": {"reputation": 20862, "user_id": 376113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d3a5bd12fe6d876527a3cf4ac0de5fc6?s=128&d=identicon&r=PG", "display_name": "mb14", "link": "https://stackoverflow.com/users/376113/mb14"}, "edited": false, "score": 1, "creation_date": 1445791075, "post_id": 33331634, "comment_id": 54461152, "body": "The first option is a bad idea, as named record and sum type leads to partial functions."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "reply_to_user": {"reputation": 20862, "user_id": 376113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d3a5bd12fe6d876527a3cf4ac0de5fc6?s=128&d=identicon&r=PG", "display_name": "mb14", "link": "https://stackoverflow.com/users/376113/mb14"}, "edited": false, "score": 0, "creation_date": 1445792333, "post_id": 33331634, "comment_id": 54461633, "body": "@mb14 it&#39;s not a &quot;bad idea&quot;. <code>chTree</code> is the only partial function here. I agree that using/exporting it would be a bad idea."}, {"owner": {"reputation": 20862, "user_id": 376113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d3a5bd12fe6d876527a3cf4ac0de5fc6?s=128&d=identicon&r=PG", "display_name": "mb14", "link": "https://stackoverflow.com/users/376113/mb14"}, "edited": false, "score": 0, "creation_date": 1445800914, "post_id": 33331634, "comment_id": 54464722, "body": "The OP is planning to use those accessor, so exporting or not is irrelevant."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "reply_to_user": {"reputation": 20862, "user_id": 376113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d3a5bd12fe6d876527a3cf4ac0de5fc6?s=128&d=identicon&r=PG", "display_name": "mb14", "link": "https://stackoverflow.com/users/376113/mb14"}, "edited": false, "score": 0, "creation_date": 1445801977, "post_id": 33331634, "comment_id": 54465064, "body": "@mb14 &quot;I&#39;d like to have functions that can operate on both kinds of things (these functions only care about properties chOne and chTwo)&quot;"}], "tags": [], "owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "is_accepted": false, "score": 0, "last_activity_date": 1445788040, "creation_date": 1445788040, "answer_id": 33331634, "question_id": 33331445, "link": "https://stackoverflow.com/questions/33331445/what-is-the-right-way-to-declare-data-that-is-an-extension-of-another-data/33331634#33331634", "title": "What is the right way to declare data that is an extension of another data", "body": "<p>One option is:</p>\n\n<pre><code>data Thing = Thing      { chOne :: Int, chTwo :: Int }\n           | OtherThing { chOne :: Int, chTwo :: Int, chThree :: String }\n</code></pre>\n\n<p>Another is</p>\n\n<pre><code>data Thing = Thing { chOne :: Int, chTwo :: Int, chThree :: Maybe String }\n</code></pre>\n\n<p>If you want to distinguish the two <code>Thing</code>s <em>at the type level</em> and have overloaded accessors then you need to make use of a type class.</p>\n"}, {"tags": [], "owner": {"reputation": 20862, "user_id": 376113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d3a5bd12fe6d876527a3cf4ac0de5fc6?s=128&d=identicon&r=PG", "display_name": "mb14", "link": "https://stackoverflow.com/users/376113/mb14"}, "is_accepted": true, "score": 1, "last_activity_date": 1445802356, "last_edit_date": 1445802356, "creation_date": 1445801322, "answer_id": 33334081, "question_id": 33331445, "link": "https://stackoverflow.com/questions/33331445/what-is-the-right-way-to-declare-data-that-is-an-extension-of-another-data/33334081#33334081", "title": "What is the right way to declare data that is an extension of another data", "body": "<p>One way to do so, is the equivalent of OO aggregation :</p>\n\n<pre><code>data ThingExt = ThingExt { thing :: Thing, chTree :: Int }\n</code></pre>\n\n<p>You can then create a class as in your post</p>\n\n<pre><code>instance ThingLike ThingExt where\n     chOne' = chOne . thing\n     chTwo' = chTwo . thing\n</code></pre>\n\n<p>If you are using the <code>lens</code> library you can use <code>makeClassy</code> which will generate all this boiler plate for you.</p>\n"}, {"tags": [], "owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "is_accepted": false, "score": 1, "last_activity_date": 1445807057, "creation_date": 1445807057, "answer_id": 33335071, "question_id": 33331445, "link": "https://stackoverflow.com/questions/33331445/what-is-the-right-way-to-declare-data-that-is-an-extension-of-another-data/33335071#33335071", "title": "What is the right way to declare data that is an extension of another data", "body": "<p>A very simple solution is to introduce a type parameter:</p>\n\n<pre><code>data ThingLike a = ThingLike { chOne, chTwo :: Int, chThree :: a }\n  deriving Show \n</code></pre>\n\n<p>Then, a <code>ThingBase</code> is just a <code>ThingLike</code> with no third element, so </p>\n\n<pre><code>type ThingBase = ThingLike ()\n</code></pre>\n\n<p><code>ThingExt</code> contains an additional <code>Int</code>, so</p>\n\n<pre><code>type ThingExt = ThingLike Int \n</code></pre>\n\n<p>This has the advantage of using only a single constructor and only three record accessors. There is minimal duplication, and writing your desired functions is simple:</p>\n\n<pre><code>foo :: ThingLike a -&gt; Int \nfoo (ThingLike x y _) = x+y\n\nbar :: ThingExt -&gt; String \nbar (ThingLike x y z) = show $ x+y+z\n</code></pre>\n"}], "owner": {"reputation": 538, "user_id": 500511, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/99duf.png?s=128&g=1", "display_name": "helpwithhaskell", "link": "https://stackoverflow.com/users/500511/helpwithhaskell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 33334081, "answer_count": 5, "score": 1, "last_activity_date": 1445807057, "creation_date": 1445787011, "question_id": 33331445, "link": "https://stackoverflow.com/questions/33331445/what-is-the-right-way-to-declare-data-that-is-an-extension-of-another-data", "title": "What is the right way to declare data that is an extension of another data", "body": "<p>I am modelling a set of \"things\". For the most part all the things have the same characteristics. </p>\n\n<pre><code>data Thing = Thing { chOne :: Int, chTwo :: Int }\n</code></pre>\n\n<p>There is a small subset of things that can be considered to have an \"extended\" set of characteristics in addition to the base set shared by all members. </p>\n\n<pre><code>chThree :: String\n</code></pre>\n\n<p>I'd like to have functions that can operate on both kinds of things (these functions only care about properties <code>chOne</code> and <code>chTwo</code>):</p>\n\n<pre><code>foo :: Thing -&gt; Int\n</code></pre>\n\n<p>I'd also like to have functions that operate on the kind of things with the <code>chThree</code> characteristic.</p>\n\n<pre><code>bar :: ThingLike -&gt; String\n</code></pre>\n\n<p>I could do</p>\n\n<pre><code>data ThingBase = Thing { chOne :: Int, chTwo :: Int }\ndata ThingExt  = Thing { chOne :: Int, chTwo :: Int, chThree :: Int }\nfooBase :: ThingBase -&gt; Int\nfooExt  :: ThingExt  -&gt; Int\nbar     :: ThingExt  -&gt; String\n</code></pre>\n\n<p>But this is hideous.</p>\n\n<p>I guess I could use type classes, but all the boilerplate suggests this is wrong:</p>\n\n<pre><code>class ThingBaseClass a of\n  chOne' :: Int\n  chTwo' :: Int\n\ninstance ThingBaseClass ThingBase where\n  chOne' = chOne\n  chTwo' = chTwo\n\ninstance ThingBaseClass ThingExt where\n  chOne' = chOne\n  chTwo' = chTwo\n\nclass ThingExtClass a of\n  chThree' :: String\n\ninstance ThingExtClass ThingExt where\n  chThree' = chThree\n\nfoo :: ThingBaseClass a =&gt; a -&gt; Int\nbar :: ThingExtClass  a =&gt; a -&gt; String\n</code></pre>\n\n<p>What is the right way to do this?</p>\n"}, {"tags": ["haskell", "functional-programming", "dependent-type", "morte"], "comments": [{"owner": {"reputation": 44680, "user_id": 1031791, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fb710534fda446d2286074bb7692e65a?s=128&d=identicon&r=PG", "display_name": "MaiaVictor", "link": "https://stackoverflow.com/users/1031791/maiavictor"}, "edited": false, "score": 0, "creation_date": 1445784122, "post_id": 33330919, "comment_id": 54458557, "body": "Disclaimer: I&#39;m not asking for a proper implementation but rather a high-level overview of how it could be done!"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1445786081, "post_id": 33330919, "comment_id": 54459301, "body": "Just so it&#39;s clear what a &#39;balanced untagged binary tree&#39; is, could you provide a reference implementation in Agda or Haskell?"}, {"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 1, "creation_date": 1445787060, "post_id": 33330919, "comment_id": 54459690, "body": "It&#39;s not a trivial thing to define balanced trees even with inductive types, why would you want to mess with Church encoding?"}, {"owner": {"reputation": 44680, "user_id": 1031791, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fb710534fda446d2286074bb7692e65a?s=128&d=identicon&r=PG", "display_name": "MaiaVictor", "link": "https://stackoverflow.com/users/1031791/maiavictor"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445787459, "post_id": 33330919, "comment_id": 54459842, "body": "@user2407038 woops, I am sorry. Forgot the most important bit. I updated the question. I also think this isn&#39;t called what I called it. I&#39;m not sure how it is called."}, {"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 1, "creation_date": 1445789030, "post_id": 33330919, "comment_id": 54460419, "body": "Your <code>Tree</code> is a degenerate case called &quot;perfectly balanced tree&quot;. See <a href=\"https://github.com/agda/agda-stdlib/blob/master/src/Data/AVL.agda\" rel=\"nofollow noreferrer\">here</a> for the regular balanced trees."}], "answers": [{"tags": [], "owner": {"reputation": 11487, "user_id": 1308058, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2be2ab74793559ea1c1dbdf55ccdf90b?s=128&d=identicon&r=PG", "display_name": "phadej", "link": "https://stackoverflow.com/users/1308058/phadej"}, "is_accepted": false, "score": 3, "last_activity_date": 1445788954, "last_edit_date": 1445788954, "creation_date": 1445788435, "answer_id": 33331705, "question_id": 33330919, "link": "https://stackoverflow.com/questions/33330919/is-it-possible-to-express-the-type-of-balanced-untagged-binary-trees-on-the-calc/33331705#33331705", "title": "Is it possible to express the type of balanced untagged binary trees on the calculus of constructions?", "body": "<p>What I have seen of Morte, everything is encoded using Church encoding. E.g. list example from post you linked:</p>\n\n<pre><code>data List a = Cons a (List a) | Nil\n</code></pre>\n\n<p>is encoded as</p>\n\n<pre><code>type List a = forall x . (a -&gt; x -&gt; x) -&gt; x -&gt; x\n</code></pre>\n\n<hr>\n\n<p>The first example of dependent typing is length-indexed lists aka vectors:</p>\n\n<pre><code>data Vec a (n :: Nat) where\n  VNil :: forall a. Vec a 0\n  VCons :: forall a (n :: Nat). a -&gt; Vec n a -&gt; Vec (S n) a\n</code></pre>\n\n<p>What is the Church encoding of such beast? I don't know which thinking heuristic works better for you,\nyou have to discover it yourself.</p>\n\n<p>My way of thinking: Vector is very different from list. It's more of n-ary homogeous <em>tuple</em>. Few example encodings:</p>\n\n<pre><code>type Singleton a  = forall x. (a -&gt; x) -&gt; x            -- Vec a 1\ntype Pair a       = forall x. (a -&gt; a -&gt; x) -&gt; x       -- Vec a 2\ntype Triple a     = forall x. (a -&gt; a -&gt; a -&gt; x) -&gt; x  -- Vec a 3\n</code></pre>\n\n<p>The pattern is obvious. What we need is a function from natural numbers to that family of types:</p>\n\n<pre><code>nTupleType a 0 x  = x\nnTupleType a 1 x  = a -&gt; x         = a -&gt; nTupleType a 0 x\nnTupleType a 2 x  = a -&gt; (a -&gt; x)  = a -&gt; nTupleType a 1 x\nnTupleType a n x  = ... -- General equation is left as an exercise\n</code></pre>\n\n<p>Given this, we can encode <code>Vec</code>:</p>\n\n<pre><code>type Vec a n = forall x. nTupleType a n x -&gt; x\n\nvnil = \\x -&gt; x\nvcons (a : *) (n : Nat) (h : a) (t : Vec a n) = \\x f -&gt; t x (f h) -- I'm not sure if I got this right\n</code></pre>\n\n<hr>\n\n<p>Using similar method you can encode other indexed data structures. In the case of original question: complete balanced tree, the encoding will look very very similar, the <code>nTupleType</code> have to be changed from linear to expontential <code>(0,1,2,3, ...)</code> to <code>(1, 2, 4, 8, ...)</code>.</p>\n\n<p>It's worth noticing, that actual shape of the tree will be quite hidden in Morte: <code>Tree a n ~ Vec a (exp2 n)</code>. OTOH that's the point of Morte. I guess.</p>\n"}, {"tags": [], "owner": {"reputation": 42094, "user_id": 828361, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6a82397672dcc1fca31c32508ef0798b?s=128&d=identicon&r=PG", "display_name": "pigworker", "link": "https://stackoverflow.com/users/828361/pigworker"}, "is_accepted": false, "score": 5, "last_activity_date": 1445799887, "creation_date": 1445799887, "answer_id": 33333799, "question_id": 33330919, "link": "https://stackoverflow.com/questions/33330919/is-it-possible-to-express-the-type-of-balanced-untagged-binary-trees-on-the-calc/33333799#33333799", "title": "Is it possible to express the type of balanced untagged binary trees on the calculus of constructions?", "body": "<p>I don't know the details of Morte, but I have some clues about what's possible in typed lambda-calculi more broadly.</p>\n\n<p>If <code>Nat</code> is defined impredicatively, it might be possible to define these trees by iteration.</p>\n\n<pre><code>Nat : *\nNat = (x : *) -&gt; (x -&gt; x) -&gt; x -&gt; x\nPair : * -&gt; * -&gt; *\nPair x y = (z : *) -&gt; (x -&gt; y -&gt; z) -&gt; z\nTree : * -&gt; Nat -&gt; *\nTree a n = n * (\\ t -&gt; Pair t t) a\n</code></pre>\n\n<p>Of course, to get away with that, I need a <em>large</em> elimination. Here, I've casually just taken <code>* : *</code>, but that's not safe in general. Inductive definitions admit large eliminations unproblematically: impredicatively encoded datatypes, not so.</p>\n\n<p>But, above, I exploit the fact that the indexing structure of the trees happens to be compatible with that of the <code>Nat</code>s which index them, and there is no reason why that should be the case in general. Indices vary in all sorts of wacky ways: it's only those that characterize some sort of \"size\" that get smaller as we go inward.</p>\n\n<p>Indexed structures do admit a Church encoded presentation. It's just that instead of iterating over a set, we iterate over an indexed set. Here's one way to express it.</p>\n\n<pre><code>Tree : * -&gt; Nat -&gt; *\nTree a n = (x : Nat -&gt; *) -&gt;\n           (a -&gt; x Z) -&gt;\n           ((n : Nat) -&gt; x n -&gt; x n -&gt; x (S n)) -&gt;\n           x n\n</code></pre>\n\n<p>It's easy to write some things like</p>\n\n<pre><code>leftmost : (a : *) -&gt; (n : Nat) -&gt; Tree a n -&gt; a\nleftmost a n t = t (\\ _ -&gt; a) (\\ a -&gt; a) (\\ _ l _ -&gt; l)\n</code></pre>\n\n<p>but</p>\n\n<pre><code>leftChild : (a : *) -&gt; (n : Nat) -&gt; Tree a (S n) -&gt; Tree a n\n</code></pre>\n\n<p>is a taller order, requiring some way to inspect or constrain numbers. That's why GHC Haskell has all this stuff about equality, <code>~</code>.</p>\n"}], "owner": {"reputation": 44680, "user_id": 1031791, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fb710534fda446d2286074bb7692e65a?s=128&d=identicon&r=PG", "display_name": "MaiaVictor", "link": "https://stackoverflow.com/users/1031791/maiavictor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1445799887, "creation_date": 1445784095, "last_edit_date": 1445787442, "question_id": 33330919, "link": "https://stackoverflow.com/questions/33330919/is-it-possible-to-express-the-type-of-balanced-untagged-binary-trees-on-the-calc", "title": "Is it possible to express the type of balanced untagged binary trees on the calculus of constructions?", "body": "<p>I'm trying to explore and understand the realms of the calculus of constructions through the project <a href=\"http://www.haskellforall.com/2014/09/morte-intermediate-language-for-super.html\" rel=\"nofollow\">Morte</a>. I know one could represent such datatype in Agda, but it is not obvious to me how to represent it in such a minimalist environment. How could that be done? I mean this datatype, in Idris:</p>\n\n<pre><code>data Tree : Nat -&gt; Type -&gt; Type where\n    Leaf : a -&gt; Tree Z a\n    (::) : Tree k a -&gt; Tree k a -&gt; Tree (S k) a\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1445778823, "post_id": 33329953, "comment_id": 54456943, "body": "I&#39;d recommend reading a monad tutorial. E.g. <a href=\"http://learnyouahaskell.com/a-fistful-of-monads\" rel=\"nofollow noreferrer\">LYAH</a> has a chapter dedicated to that topic. You will find many monad tutorial around the net if you google for them."}, {"owner": {"reputation": 41209, "user_id": 485115, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/59693d66b96ca17ca9d2fdb2393e2be3?s=128&d=identicon&r=PG", "display_name": "Nikita Volkov", "link": "https://stackoverflow.com/users/485115/nikita-volkov"}, "edited": false, "score": 3, "creation_date": 1445779157, "post_id": 33329953, "comment_id": 54457055, "body": "Your question shows zero effort of finding the answer yourself. You&#39;ll find the answer in any basic introduction to the language."}], "answers": [{"comments": [{"owner": {"reputation": 2231, "user_id": 1027321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KkFZC.jpg?s=128&g=1", "display_name": "jakubdaniel", "link": "https://stackoverflow.com/users/1027321/jakubdaniel"}, "edited": false, "score": 1, "creation_date": 1445795894, "post_id": 33330152, "comment_id": 54462910, "body": "<code>-&gt;</code> also appears in <code>case</code> statements."}], "tags": [], "owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "is_accepted": true, "score": 1, "last_activity_date": 1445779229, "creation_date": 1445779229, "answer_id": 33330152, "question_id": 33329953, "link": "https://stackoverflow.com/questions/33329953/how-to-use-arrow-operators-in-haskell/33330152#33330152", "title": "How to use arrow operators in haskell", "body": "<p><code>a -&gt; b</code> is the function type. It describes a function that takes a type <code>a</code> and returns a type <code>b</code>.</p>\n\n<p><code>&gt;&gt;=</code> is the monadic bind function. It is of type <code>Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b</code>. If you need to understand this, I recommend reading <a href=\"http://learnyouahaskell.com/chapters\" rel=\"nofollow\">Learn You a Haskell for Great Good</a>. </p>\n\n<p><code>&lt;-</code> is syntactic sugar in a <code>do</code> block, where <code>do {a &lt;- b; c}</code> translates as <code>b &gt;&gt;= \\a -&gt; c</code>, i.e, it's basically a nicer way of writing <code>&gt;&gt;=</code>.</p>\n"}], "owner": {"reputation": 347, "user_id": 5362936, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/156690511341811/picture?type=large", "display_name": "Lin Jiayin", "link": "https://stackoverflow.com/users/5362936/lin-jiayin"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "closed_date": 1445779595, "accepted_answer_id": 33330152, "answer_count": 1, "score": -8, "last_activity_date": 1445779229, "creation_date": 1445777830, "question_id": 33329953, "link": "https://stackoverflow.com/questions/33329953/how-to-use-arrow-operators-in-haskell", "closed_reason": "Needs more focus", "title": "How to use arrow operators in haskell", "body": "<p>I want to know the difference between</p>\n\n<p><code>-&gt;</code> , <code>&gt;&gt;=</code> and <code>&lt;-</code> </p>\n\n<p>in haskell and how to use them?</p>\n"}, {"tags": ["haskell", "error-handling", "stdout", "ghc"], "answers": [{"comments": [{"owner": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "edited": false, "score": 0, "creation_date": 1445776448, "post_id": 33329419, "comment_id": 54456308, "body": "Yes, I found this solution as well. That&#39;s what libraries like <code>silently</code> do. However I was hoping for a solution specifici to the GHC API. I think there must be a way to accomplish this."}, {"owner": {"reputation": 11612, "user_id": 204218, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3ee571049ff6ff0361be53e554b877e6?s=128&d=identicon&r=PG", "display_name": "adamse", "link": "https://stackoverflow.com/users/204218/adamse"}, "reply_to_user": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "edited": false, "score": 2, "creation_date": 1445776637, "post_id": 33329419, "comment_id": 54456345, "body": "You might have more luck asking the ghc-devs mailing list, and if no other solution is found perhaps you should file a bug!"}, {"owner": {"reputation": 11612, "user_id": 204218, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3ee571049ff6ff0361be53e554b877e6?s=128&d=identicon&r=PG", "display_name": "adamse", "link": "https://stackoverflow.com/users/204218/adamse"}, "reply_to_user": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "edited": false, "score": 2, "creation_date": 1445777221, "post_id": 33329419, "comment_id": 54456498, "body": "Studying what Hint does might be helpful as well: <a href=\"http://hub.darcs.net/jcpetruzza/hint/browse/src/Hint/InterpreterT.hs\" rel=\"nofollow noreferrer\">hub.darcs.net/jcpetruzza/hint/browse/src/Hint/InterpreterT.h&zwnj;&#8203;s</a>"}, {"owner": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "edited": false, "score": 0, "creation_date": 1445778458, "post_id": 33329419, "comment_id": 54456842, "body": "Very interesting! I didn&#39;t know about Hint, thanks a lot!"}], "tags": [], "owner": {"reputation": 11612, "user_id": 204218, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3ee571049ff6ff0361be53e554b877e6?s=128&d=identicon&r=PG", "display_name": "adamse", "link": "https://stackoverflow.com/users/204218/adamse"}, "is_accepted": false, "score": 1, "last_activity_date": 1445774307, "creation_date": 1445774307, "answer_id": 33329419, "question_id": 33328974, "link": "https://stackoverflow.com/questions/33328974/silencing-ghc-api-output-stdout/33329419#33329419", "title": "Silencing GHC API output (stdout)", "body": "<p>I have seen this question before and then the answer was to temporarily redirect <code>stdout</code> and <code>stderr</code>.</p>\n\n<p>To redirect <code>stdout</code> to a file as an example:</p>\n\n<pre><code>import GHC.IO.Handle\nimport System.IO\n\nmain = do file &lt;- openFile \"stdout\" WriteMode\n          stdout' &lt;- hDuplicate stdout -- you might want to keep track\n                                       -- of the original stdout\n          hDuplicateTo file stdout -- makes the second Handle a\n                                   -- duplicate of the first\n          putStrLn \"hi\"\n          hClose file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "is_accepted": true, "score": 2, "last_activity_date": 1445785915, "creation_date": 1445785915, "answer_id": 33331261, "question_id": 33328974, "link": "https://stackoverflow.com/questions/33328974/silencing-ghc-api-output-stdout/33331261#33331261", "title": "Silencing GHC API output (stdout)", "body": "<p>Many thanks to <strong>@adamse</strong> for pointing me in the right direction! I have found the answer in Hint's code.</p>\n\n<p>It suffices to override logging in the dynamic flags:</p>\n\n<pre><code>initDynFlags :: GHC.GhcMonad m =&gt; FilePath -&gt; m GHC.DynFlags\ninitDynFlags file = do\n    dflags0 &lt;- GHC.getSessionDynFlags\n    src_opts &lt;- GHC.liftIO $ GHC.getOptionsFromFile dflags0 file\n    (dflags1, _, _) &lt;- GHC.parseDynamicFilePragma dflags0 src_opts\n    let dflags2 = dflags1 { GHC.log_action = customLogAction }\n    void $ GHC.setSessionDynFlags dflags2\n    return dflags2\n\ncustomLogAction :: GHC.LogAction\ncustomLogAction dflags severity _ _ msg =\n    case severity of\n      GHC.SevFatal -&gt; fail $ GHC.showSDoc dflags msg\n      _            -&gt; return ()  -- do nothing in the other cases (debug, info, etc.)\n</code></pre>\n\n<p>The default implementation of <code>GHC.log_action</code> can be found here:<br>\n<a href=\"http://haddock.stackage.org/lts-3.10/ghc-7.10.2/src/DynFlags.html#defaultLogAction\" rel=\"nofollow\">http://haddock.stackage.org/lts-3.10/ghc-7.10.2/src/DynFlags.html#defaultLogAction</a></p>\n\n<p>The code for parsing remains the same in my question, after having removed the line about <code>GHC.defaultErrorHandler</code>, which is no longer needed, assuming one catches exceptions himself.</p>\n"}], "owner": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 33331261, "answer_count": 2, "score": 4, "last_activity_date": 1445785915, "creation_date": 1445771240, "last_edit_date": 1445773641, "question_id": 33328974, "link": "https://stackoverflow.com/questions/33328974/silencing-ghc-api-output-stdout", "title": "Silencing GHC API output (stdout)", "body": "<p>I'm using the GHC API to parse a module. If the module contains syntax errors the GHC API writes them to stdout. This interferes with my program, which has another way to report errors. Example session:</p>\n\n<pre><code>$ prog ../stack/src/Stack/Package.hs\n\n../stack/src/Stack/Package.hs:669:0:\n     error: missing binary operator before token \"(\"\n     #if MIN_VERSION_Cabal(1, 22, 0)\n     ^\n\n../stack/src/Stack/Package.hs:783:0:\n     error: missing binary operator before token \"(\"\n     #if MIN_VERSION_Cabal(1, 22, 0)\n     ^\n../stack/src/Stack/Package.hs\n    error: 1:1 argon: phase `C pre-processor' failed (exitcode = 1)\n</code></pre>\n\n<p>Only the last one should be outputted. How can I make sure the GHC API does not output anything? I'd like to avoid libraries like <code>silently</code> which solve the problem by redirecting stdout to a temporary file.</p>\n\n<p>I already tried to use <a href=\"http://haddock.stackage.org/lts-3.10/ghc-7.10.2/GHC.html#v:defaultErrorHandler\" rel=\"nofollow\"><code>GHC.defaultErrorHandler</code></a>, but while I can catch the exception, GHC API still writes to stdout. Relevant code:</p>\n\n<pre><code>-- | Parse a module with specific instructions for the C pre-processor.\nparseModuleWithCpp :: CppOptions\n                   -&gt; FilePath\n                   -&gt; IO (Either (Span, String) LModule)\nparseModuleWithCpp cppOptions file =\n  GHC.defaultErrorHandler GHC.defaultFatalMessager (GHC.FlushOut $ return ()) $\n    GHC.runGhc (Just libdir) $ do\n      dflags &lt;- initDynFlags file\n      let useCpp = GHC.xopt GHC.Opt_Cpp dflags\n      fileContents &lt;-\n        if useCpp\n          then getPreprocessedSrcDirect cppOptions file\n          else GHC.liftIO $ readFile file\n      return $\n        case parseFile dflags file fileContents of\n          GHC.PFailed ss m -&gt; Left (srcSpanToSpan ss, GHC.showSDoc dflags m)\n          GHC.POk _ pmod   -&gt; Right pmod\n</code></pre>\n\n<p>Moreover, with this approach I cannot catch the error message (I just get <code>ExitFailure</code>). Removing the line with <code>GHC.defaultErrorHandler</code> gives me the output shown above.</p>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4319044, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c7a2f0c9105a4df5e603df88dd3add8?s=128&d=identicon&r=PG&f=1", "display_name": "Allemis", "link": "https://stackoverflow.com/users/4319044/allemis"}, "edited": false, "score": 1, "creation_date": 1445767721, "post_id": 33328439, "comment_id": 54453946, "body": "Thanks, it helped. Just a question - why this does not work? <code>maxMinFold list = foldr (\\x (tailMin, tailMax) -&gt; (min x tailMin) (max x tailMax)) (head list, head list) list</code>"}, {"owner": {"reputation": 17837, "user_id": 1923190, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/D0JyZ.jpg?s=128&g=1", "display_name": "Simon H", "link": "https://stackoverflow.com/users/1923190/simon-h"}, "reply_to_user": {"reputation": 47, "user_id": 4319044, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c7a2f0c9105a4df5e603df88dd3add8?s=128&d=identicon&r=PG&f=1", "display_name": "Allemis", "link": "https://stackoverflow.com/users/4319044/allemis"}, "edited": false, "score": 2, "creation_date": 1445767991, "post_id": 33328439, "comment_id": 54454008, "body": "<code>(min x tailMin) (max x tailMax)</code> is not something that has a Type, let alone a tuple Type. I added a bit more to my answer"}], "tags": [], "owner": {"reputation": 17837, "user_id": 1923190, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/D0JyZ.jpg?s=128&g=1", "display_name": "Simon H", "link": "https://stackoverflow.com/users/1923190/simon-h"}, "is_accepted": true, "score": 5, "last_activity_date": 1505052218, "last_edit_date": 1505052218, "creation_date": 1445767422, "answer_id": 33328439, "question_id": 33328413, "link": "https://stackoverflow.com/questions/33328413/haskell-minmax-using-foldr/33328439#33328439", "title": "Haskell - MinMax using foldr", "body": "<p>You take the head and use that as the fist min <strong>and</strong> max and then fold over the tail.</p>\n\n<pre><code>maxMinFold :: Ord a =&gt; [a] -&gt; (a, a)\nmaxMinFold (x:xs) = foldr (\\x (tailMin, tailMax) -&gt; (min x tailMin, max x tailMax)) (x,x) xs\n</code></pre>\n\n<p>As regards your answer, your fold function is not returning the right type.</p>\n\n<p>Note that </p>\n\n<pre><code>foldr :: (a -&gt; b **-&gt; b**) -&gt; b -&gt; [a] -&gt; b\n</code></pre>\n\n<p>In particular you need to be returning a <code>b</code>, which is a tuple in your case</p>\n"}, {"comments": [{"owner": {"reputation": 34889, "user_id": 86604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/329af917389e6cf8e146c03012f5319a?s=128&d=identicon&r=PG", "display_name": "Ingo", "link": "https://stackoverflow.com/users/86604/ingo"}, "edited": false, "score": 3, "creation_date": 1445774424, "post_id": 33328525, "comment_id": 54455720, "body": "... and <code>let ma = min l y; mb = max h y in ma &#180;seq&#180; mb &#180;seq&#180; (ma,mb)</code>"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1445832131, "post_id": 33328525, "comment_id": 54473035, "body": "As long as we&#39;re being pedantic, there are some types for which you don&#39;t have to traverse the whole list, specifically types which have a minimum and/or maximum element."}], "tags": [], "owner": {"reputation": 868, "user_id": 1767808, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/KfCkc.jpg?s=128&g=1", "display_name": "Christoph W.", "link": "https://stackoverflow.com/users/1767808/christoph-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1445768179, "creation_date": 1445768179, "answer_id": 33328525, "question_id": 33328413, "link": "https://stackoverflow.com/questions/33328413/haskell-minmax-using-foldr/33328525#33328525", "title": "Haskell - MinMax using foldr", "body": "<p>Since you always have to traverse the whole list to find the minimum and the maximum here is the solution with <code>foldl</code>:</p>\n\n<pre><code>maxMinList :: Ord a =&gt; [a] -&gt; (a,a)\nmaxMinList (x:xs) = foldl (\\(l,h) y -&gt; (min l y, max h y)) (x,x) xs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 1, "last_activity_date": 1445831651, "last_edit_date": 1445831651, "creation_date": 1445799348, "answer_id": 33333687, "question_id": 33328413, "link": "https://stackoverflow.com/questions/33328413/haskell-minmax-using-foldr/33333687#33333687", "title": "Haskell - MinMax using foldr", "body": "<p>To do this efficiently with <code>foldr</code>,</p>\n\n<pre><code>data NEList a = NEList a [a]\n-- deriving (Eq, Ord, Show, Read, Functor, Foldable, Traversable)\n\nminMax :: Ord a =&gt; NEList -&gt; (a, a)\nminMax (NEList x0 xs) = foldr go (,) xs x0 x0 where\n  go x r mn mx\n    | x &lt; mn = r x mx\n    | mx &lt; x = r mn x\n    | otherwise = r mn mx\n</code></pre>\n\n<p>Another, similar, approach:</p>\n\n<pre><code>minMaxM :: Ord a =&gt; [a] -&gt; Maybe (a, a)\nminMaxM xs = foldr go id xs Nothing where\n  go x r Nothing = r (Just (x, x))\n  go x r mnmx@(Just (mn, mx))\n    | x &lt; mn = r (Just (x, mx))\n    | mx &lt; x = r (Just (mn, x))\n    | otherwise = r mnmx\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2824, "user_id": 187223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ab705e8ee51d24c8e52192f7fde8d76?s=128&d=identicon&r=PG", "display_name": "James Brock", "link": "https://stackoverflow.com/users/187223/james-brock"}, "is_accepted": false, "score": 0, "last_activity_date": 1458082508, "creation_date": 1458082508, "answer_id": 36023785, "question_id": 33328413, "link": "https://stackoverflow.com/questions/33328413/haskell-minmax-using-foldr/36023785#36023785", "title": "Haskell - MinMax using foldr", "body": "<p>It would be nice if the <code>minMax</code> function returned <code>Nothing</code> in the case of an empty list. Here is a version which does that.</p>\n\n<pre><code>import Control.Arrow\nimport Data.Maybe\nimport Data.Foldable\n\nminMax :: (Ord a) =&gt; [a] -&gt; Maybe (a,a)\nminMax = foldl' (flip $ \\ x -&gt; Just . maybe (x,x) (min x *** max x)) Nothing\n</code></pre>\n\n<p>This uses <code>foldl'</code> instead of <code>foldr</code>.</p>\n"}], "owner": {"reputation": 47, "user_id": 4319044, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c7a2f0c9105a4df5e603df88dd3add8?s=128&d=identicon&r=PG&f=1", "display_name": "Allemis", "link": "https://stackoverflow.com/users/4319044/allemis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2684, "favorite_count": 1, "accepted_answer_id": 33328439, "answer_count": 4, "score": 1, "last_activity_date": 1505052218, "creation_date": 1445767253, "question_id": 33328413, "link": "https://stackoverflow.com/questions/33328413/haskell-minmax-using-foldr", "title": "Haskell - MinMax using foldr", "body": "<p>I am looking for a Haskell function that takes a list as an argument and returns a tuple (min, max), where min is the minimal value of the list and max is the maximal value.</p>\n\n<p>I already have this: </p>\n\n<pre><code>maxMinFold :: Ord a =&gt; [a] -&gt; (a, a)\nmaxMinFold list = foldr (\\x (tailMin, tailMax) -&gt; (min x tailMin) (max x tailMax)) -- missing part\n</code></pre>\n\n<p>Could you help me what to add to the missing part? (or tell me what I am doing wrong)</p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": false, "score": 4, "last_activity_date": 1445754143, "creation_date": 1445754143, "answer_id": 33326834, "question_id": 33326716, "link": "https://stackoverflow.com/questions/33326716/modular-inverse-in-haskell/33326834#33326834", "title": "Modular Inverse in Haskell", "body": "<p>You can do it with your <code>extGCD</code> function.</p>\n\n<p>If <em>a</em> and <em>m</em> are co-prime, then use your <code>extGCD</code> function to solve:</p>\n\n<pre><code>a*x + m*y = gcd a m = 1\n</code></pre>\n\n<p>That means <em>a</em> * <em>x</em> = 1 mod <em>m</em>, i.e. <em>a</em> and <em>x</em> are multiplicative inverses mod <em>m</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "is_accepted": false, "score": 3, "last_activity_date": 1445777096, "last_edit_date": 1445777096, "creation_date": 1445754356, "answer_id": 33326861, "question_id": 33326716, "link": "https://stackoverflow.com/questions/33326716/modular-inverse-in-haskell/33326861#33326861", "title": "Modular Inverse in Haskell", "body": "<p>First of all <code>a</code> and <code>n</code> must be coprime because otherwise the inverse doesn't exist. This comes from the fact that finding the inverse of <code>a</code> modulo <code>n</code> is the same as solving the congruence: <code>ax = 1 mod n</code>.</p>\n\n<p>A linear congruence <code>ax = b mod n</code> has a solution only if <code>gcd(a, n) | b</code>. But in this case <code>gcd(a, n) | 1</code> implies that <code>gcd(a, n) = 1</code>.</p>\n\n<p>So now, to find the inverse you use Bezout identity, i.e. there exist <code>x</code> and <code>y</code> such that: <code>gcd(a, n) = a*x + n*y</code>. You have already found such values in your <code>extGCD</code> function so you can implement <code>minv</code> as:</p>\n\n<pre><code>minv a n =  a*x + n*y\n    (x, y, _) = extGCD a n\n</code></pre>\n\n<p>It may be better to write a function with type <code>Integer -&gt; Integer -&gt; Maybe Integer</code> and return <code>Nothing</code> if the <code>extGCD</code> is different from <code>1</code>:</p>\n\n<pre><code>minv a n =\n  | g == 1    = Just $ a*x + n*y\n  | otherwise = Nothing\n  where\n    (x, y, g) = extGCD a n\n</code></pre>\n\n<hr>\n\n<p>As an aside: the subgroup of invertible elements in Z<sub>n</sub> is precisely the set of <code>a</code>s &lt; <code>n</code> coprime with <code>n</code>. When <code>n</code> is prime this subgroup coincides with Z<sub>n</sub> without <code>0</code> and in this case Z<sub>n</sub> is a field.</p>\n"}], "owner": {"reputation": 31, "user_id": 5439031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ad94b396b650488007bb9de5766ac7?s=128&d=identicon&r=PG&f=1", "display_name": "ntb457", "link": "https://stackoverflow.com/users/5439031/ntb457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1445777096, "creation_date": 1445752857, "question_id": 33326716, "link": "https://stackoverflow.com/questions/33326716/modular-inverse-in-haskell", "title": "Modular Inverse in Haskell", "body": "<p>So far I've solved euclid, lCM,extGCD, and coprime. How would I solve for the modular Inverse(minv)? I think that \"assumes a n are coprime\" is confusing me. </p>\n\n<pre><code>euclid :: Integer -&gt; Integer -&gt; Integer\neuclid 0 0 = error \"GCD(0,0) is undefined\"\neuclid a 0 = a\neuclid a b =  euclid b (a `emod` b)\n\n-- Returns the least common multiple of a and b, using the definition of lcm\n-- given in class (in terms of the gcd). DO NOT use the built-in `lcm` function.\nlCM :: Integer -&gt; Integer -&gt; Integer\nlCM 0 0 = error \"LCM(0,0) is undefined\"\nlCM a b = a*b `ediv` (euclid a b)\n\n-- extGCD a b\n-- Returns the GCD of a and b, along with x and y such that\n--   GCD(a,b) = ax + by\n-- calculated via the recursive extended Euclidean algorithm presented in\n-- class.\nextGCD :: Integer -&gt; Integer -&gt; (Integer,Integer,Integer)\nextGCD 0 0 = error \"extGCD(0,0) is undefined\"\nextGCD a 0 = (1,0,a)     -- Base case\nextGCD a b = let (q,r) = a `eDivMod` b           -- q and r of a/b\n               (c,x,y) = extGCD b r          -- Recursive call\n         in  (x,c-q*x, y) -- Recursive results\n\n-- coprime a b \n-- Returns True if a and b are coprime (have no common factors)\ncoprime :: Integer -&gt; Integer -&gt; Bool\ncoprime 0 0 = error \"coprime(0,0) is undefined\"\ncoprime a b = (euclid a b) == 1\n\n-- minv a n\n-- Returns the modular inverse of a mod n. Assumes that a and n are coprime.\nminv :: Integer -&gt; Integer -&gt; Integer\nminv a n = \n</code></pre>\n"}, {"tags": ["haskell", "pattern-matching", "pattern-synonyms"], "comments": [{"owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "edited": false, "score": 0, "creation_date": 1445738587, "post_id": 33325370, "comment_id": 54448532, "body": "<code>isValid (num :% den) = ...</code>"}, {"owner": {"reputation": 1381, "user_id": 1936416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e7314f391870688f6808f07e859927ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1936416/ben"}, "reply_to_user": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "edited": false, "score": 0, "creation_date": 1445738649, "post_id": 33325370, "comment_id": 54448541, "body": "@Dair, this gives me <code>Not in scope: data constructor \u2018:%\u2019</code>"}, {"owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "edited": false, "score": 0, "creation_date": 1445738692, "post_id": 33325370, "comment_id": 54448546, "body": "How did you define <code>Ratio</code>?"}, {"owner": {"reputation": 1381, "user_id": 1936416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e7314f391870688f6808f07e859927ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1936416/ben"}, "reply_to_user": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "edited": false, "score": 0, "creation_date": 1445738749, "post_id": 33325370, "comment_id": 54448558, "body": "@Dair I&#39;m using the <code>Data.Ratio</code> package: <a href=\"https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Ratio.html\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.8.1.0/docs/Data-Ratio.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1445738891, "post_id": 33325370, "comment_id": 54448589, "body": "Doesn&#39;t look like it&#39;s possible.  You could define a <a href=\"https://ghc.haskell.org/trac/ghc/wiki/ViewPatterns\" rel=\"nofollow noreferrer\">view pattern</a>"}, {"owner": {"reputation": 1381, "user_id": 1936416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e7314f391870688f6808f07e859927ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1936416/ben"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1445739342, "post_id": 33325370, "comment_id": 54448665, "body": "@luqui Why is a pattern match not possible? Just like you can pattern match against a list (x:xs) by using the <code>(:)</code> operator, it should be possible to use (%) for ratios, no? And why does the source use pattern matching but can I not access that operator (<code>:%</code>)."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1445739448, "post_id": 33325370, "comment_id": 54448679, "body": "You&#39;ll have to import <code>GHC.Real</code> to access the <code>:%</code> constructor. <code>Data.Ratio</code> simply does not export <code>:%</code>. You cannot pattern match against <code>%</code> because it is a function, not a constructor."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 5, "creation_date": 1445739508, "post_id": 33325370, "comment_id": 54448691, "body": "Because the module does not expose the operator to its users. This is probably because it has invariants (eg a:%b should have b/=0 and gcd a b = 1) so it would not be safe to allow users to construct arbitrary values. And Haskell can not expose an operator just for pattern matching and not for construction (though there is no essential reason for this other than it would complicate the import mechanism)"}, {"owner": {"reputation": 1381, "user_id": 1936416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e7314f391870688f6808f07e859927ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1936416/ben"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445739671, "post_id": 33325370, "comment_id": 54448719, "body": "@user2407038 That worked, thanks!"}, {"owner": {"reputation": 1381, "user_id": 1936416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e7314f391870688f6808f07e859927ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1936416/ben"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1445740137, "post_id": 33325370, "comment_id": 54448813, "body": "@luqui I think understand what you mean, that makes sense. I think in this case I prefer Python&#39;s &quot;we&#39;re all adults here&quot; philosophy then, where it&#39;s up to the user to use, in this case an operator, responsibly."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 2, "creation_date": 1445740305, "post_id": 33325370, "comment_id": 54448844, "body": "Haha. Yes Haskell&#39;s culture tends toward designing libraries that are very safe.  As someone who works with python professionally, I can say everyone likes to believe that they are the only one who is allowed not to follow the rules..."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1445752330, "post_id": 33325370, "comment_id": 54450630, "body": "@luqui Together with pattern synonyms it is possible (though you&#39;d have to give it a different name if you wanted to do it in the same module)."}], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 5, "last_activity_date": 1445752223, "creation_date": 1445752223, "answer_id": 33326659, "question_id": 33325370, "link": "https://stackoverflow.com/questions/33325370/why-cant-i-pattern-match-against-a-ratio-in-haskell/33326659#33326659", "title": "Why can&#39;t I pattern match against a ratio in Haskell?", "body": "<p>While in this case you can just import the operator from <code>GHC.Ratio</code>, there is a general solution starting from GHC 7.8: <a href=\"https://ghc.haskell.org/trac/ghc/wiki/PatternSynonyms\">pattern synonyms</a>.</p>\n\n<pre><code>pattern num :% denom &lt;- ((\\x -&gt; (numerator x, denominator x)) -&gt; (num, denom))\n</code></pre>\n"}], "owner": {"reputation": 1381, "user_id": 1936416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e7314f391870688f6808f07e859927ae?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1936416/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 1, "accepted_answer_id": 33326659, "answer_count": 1, "score": 4, "last_activity_date": 1452955705, "creation_date": 1445738114, "last_edit_date": 1452955705, "question_id": 33325370, "link": "https://stackoverflow.com/questions/33325370/why-cant-i-pattern-match-against-a-ratio-in-haskell", "title": "Why can&#39;t I pattern match against a ratio in Haskell?", "body": "<p>I'm trying to pattern match against a ratio:</p>\n\n<pre><code>isValid :: Ratio Int -&gt; Bool\nisValid (num % den) = ...\n</code></pre>\n\n<p>However, this yields:</p>\n\n<pre><code>Parse error in pattern: num % den\n</code></pre>\n\n<p>Interestingly, the <code>Data.Ratio</code> package defines the <code>numerator</code> and <code>denominator</code> functions in this way, but with the <code>:%</code> operator:</p>\n\n<pre><code>numerator   (x :% _)    =  x\ndenominator (_ :% y)    =  y\n</code></pre>\n\n<p>However, I don't have access to this latter operator.</p>\n\n<p>Could anyone explain why my pattern match doesn't work and how I could fix it?</p>\n"}, {"tags": ["haskell", "pattern-matching", "callbyname"], "comments": [{"owner": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 0, "creation_date": 1445736621, "post_id": 33325171, "comment_id": 54448181, "body": "You simply can&#39;t do that because the type system doesn&#39;t allow that. But care not! Haskell is lazy and will not evaluate the argument unless explicitly needed, so its somewhat &quot;call-by-name&quot; by default."}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 2, "creation_date": 1445736804, "post_id": 33325171, "comment_id": 54448223, "body": "<code>g</code> is not a constructor, so you can&#39;t pattern match on it. What are you actually trying to do?"}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 0, "last_activity_date": 1445761043, "creation_date": 1445761043, "answer_id": 33327582, "question_id": 33325171, "link": "https://stackoverflow.com/questions/33325171/haskell-pattern-matching-inside-parentheses/33327582#33327582", "title": "Haskell pattern matching inside parentheses", "body": "<p>First, pattern matching is allowed only on patterns, i.e. expressions built from application, constructors, and variables (used at most once).</p>\n\n<p>Second, even if it were extended, your example is problematic because your <code>g</code> is not injective:</p>\n\n<pre><code>case g x y of g a b -&gt; a\n</code></pre>\n\n<p>should be equal to, since <code>g x y = y</code></p>\n\n<pre><code>case y of g a b -&gt; a\n</code></pre>\n\n<p>but then <code>a</code> could be anything.</p>\n\n<p>If instead it happens that <code>g</code> is defined by an expression which could be a pattern, then GHC can allow using it as a pattern if you ask for it through the <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/syntax-extns.html#pattern-synonyms\" rel=\"nofollow\"><code>PatternSynonyms</code></a> GHC extension.</p>\n\n<pre><code>pattern G a b = (\"hello\", b, a)\n\nfoo = case someTriple of\n        G a b     -&gt; use a b\n        (s, x, y) -&gt; ...\n\nbar = G 4 5       -- we can also use G as a function\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3897438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7022fea82e195b2e113997730e2a5c80?s=128&d=identicon&r=PG&f=1", "display_name": "Questionbeggar", "link": "https://stackoverflow.com/users/3897438/questionbeggar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 33327582, "answer_count": 1, "score": 0, "last_activity_date": 1445761043, "creation_date": 1445736313, "question_id": 33325171, "link": "https://stackoverflow.com/questions/33325171/haskell-pattern-matching-inside-parentheses", "title": "Haskell pattern matching inside parentheses", "body": "<p>I would like to define a function that operates on an expression of a certain type, but has access to its internal structure, if it has one. For instance, f in what follows:</p>\n\n<pre><code>g :: a -&gt; a -&gt; a\ng x y = y\n\nf :: a -&gt; a\nf x'@(g x y) = x'\nf _ = 1\n</code></pre>\n\n<p>(g x y) is of type a, so f should be able to take it as an argument, but the definition for f above can't be parsed by Haskell. I would like to define something like f to take advantage of call-by-name evaluation. Is there any way to do this in Haskell?</p>\n"}, {"tags": ["haskell", "yesod", "hamlet"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 1557590, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/XNL7p.png?s=128&g=1", "display_name": "Stewart Webb", "link": "https://stackoverflow.com/users/1557590/stewart-webb"}, "edited": false, "score": 0, "creation_date": 1445763963, "post_id": 33326818, "comment_id": 54452975, "body": "Hi. My current list of products comes from a database using the code I have added to my question. How do I convert the [(Product, Category)] to [ (Category, [Product]) ]"}], "tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": true, "score": 4, "last_activity_date": 1445776072, "last_edit_date": 1445776072, "creation_date": 1445753971, "answer_id": 33326818, "question_id": 33324827, "link": "https://stackoverflow.com/questions/33324827/yesod-hamlet-loop-broken-down-by-categories/33326818#33326818", "title": "Yesod hamlet loop broken down by categories", "body": "<p>I think the answer is to have your yesod controller group the products into categories for you.</p>\n\n<p>For instance, instead of exporting:</p>\n\n<pre><code>products :: [Product]\n</code></pre>\n\n<p>export:</p>\n\n<pre><code>productGroups :: [ (Category, [Product]) ]\n</code></pre>\n\n<p>and then your template code looks like:</p>\n\n<pre><code>$if null productGroups\n  &lt;p&gt;No products.\n$else\n  &lt;div ...&gt;\n    $forall (category, products) &lt;- productGroups\n      &lt;h4&gt;#{category}&lt;/h4&gt;\n      $forall product &lt;- products\n        &lt;div&gt;...render the product...&lt;/div&gt;\n</code></pre>\n\n<p>This way the products appear in groups according to their category.</p>\n\n<p>To create the product groups you can use something like:</p>\n\n<pre><code>import GHC.Exts (groupWith)\n\ngroupByCategory :: [Product] -&gt; [ (Category, [Product]) ]\ngroupByCategory ps =  [ (getCategory (head g), g) | g &lt;- groupWith getCategory ]\n  where getCategory product = categoryName (snd product)\n</code></pre>\n\n<p>Caveat: This is untested, untried code.</p>\n\n<p><strong>Update</strong></p>\n\n<p>In response to your question int the comments, here is a way to group a list of pairs by the second coordinate:</p>\n\n<pre><code>import Data.Ord (comparing)\nimport Data.List (sortBy, groupBy)\n\ngroupBySecond :: Ord b =&gt; [ (a,b) ] -&gt; [ (b, [a]) ]\ngroupBySecond pairs =\n  let sorted = sortBy (comparing snd) pairs \n      groups = groupBy (\\(a1,b1) (a2,b2) -&gt; b1 == b2) sorted \n      result = [ (snd (head g), map fst g) | g &lt;- groups ]\n  in result\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 1557590, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/XNL7p.png?s=128&g=1", "display_name": "Stewart Webb", "link": "https://stackoverflow.com/users/1557590/stewart-webb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 33326818, "answer_count": 1, "score": 1, "last_activity_date": 1445776072, "creation_date": 1445732725, "last_edit_date": 1445764070, "question_id": 33324827, "link": "https://stackoverflow.com/questions/33324827/yesod-hamlet-loop-broken-down-by-categories", "title": "Yesod hamlet loop broken down by categories", "body": "<p>I am trying to loop through a list of products in hamlet each product has a category. I would like to break down the output to group into the categories with a list of products below each category heading. Is there a way to do this in hamlet while looping through my products. What I currently have below is showing the heading for every product. I think I might be going about this all wrong.</p>\n\n<pre><code>$if null products\n  &lt;p&gt;No products\n$else\n  &lt;div class=\"list-group menu\"&gt;\n    $forall product &lt;- products\n      &lt;div class=\"list-group-item\"&gt;\n        &lt;h4 class=\"list-group-item-heading\"&gt;#{categoryName $snd product}\n\n      &lt;div class=\"list-group-item\"&gt;\n        &lt;div class=\"container-fluid\"&gt;\n          &lt;div class=\"col-md-12\"&gt;\n            &lt;p&gt;#{productName $fst product} - #{productPrice $fst product}\n</code></pre>\n\n<p>And below is the bit of code thats gets the products from the database of type <code>[(Product Category)]</code></p>\n\n<pre><code>products &lt;- runDB $ selectList [ProductName !=. \"\"] [LimitTo 10] &gt;&gt;= mapM (\\qe@(Entity _ q) -&gt; do\n    Just category &lt;- get $ productCategory q\n    return (q, category))\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "edited": false, "score": 0, "creation_date": 1445725976, "post_id": 33323945, "comment_id": 54445729, "body": "Thanks for the answer. i tried to indent the guards mor to the right, but it is not working.  when x and y = 0 , it should give out 0,0,0,0. Is it even possible with the comma?"}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1445729532, "post_id": 33323945, "comment_id": 54446596, "body": "The commas are part of the tuple construction, so they are required to construct a tuple."}, {"owner": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "edited": false, "score": 0, "creation_date": 1445773685, "post_id": 33323945, "comment_id": 54455502, "body": "obviously, the declaration def :: (Int, Int) -&gt; (Int, Int, Int) is not right. But I like the results to be Integer. How do I do this?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "edited": false, "score": 0, "creation_date": 1445797102, "post_id": 33323945, "comment_id": 54463322, "body": "@letter There are functions <code>round, floor, ceiling :: Double -&gt; Integer</code>. Perhaps one of them meets your needs."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 4, "last_activity_date": 1445724973, "creation_date": 1445724973, "answer_id": 33323945, "question_id": 33323897, "link": "https://stackoverflow.com/questions/33323897/right-use-of-fromintegral-and-mismatched-brackets/33323945#33323945", "title": "right use of fromIntegral and mismatched brackets", "body": "<p>You need to indent the guards more than the surrounding context (which in this case is <code>def</code>). You also have a few type errors, most of which can be dealt with by liberal application of <code>fromIntegral</code>. The only other obvious thing I spot is that <code>00</code> is not a triple -- perhaps you meant <code>(0, 0, 0)</code> instead? But if you did, it seems the second clause is going to return that anyway; so perhaps you don't need any guards at all.</p>\n\n<p>You also might consider changing the type to <code>def :: Double -&gt; Double -&gt; (Double, Double, Double)</code> and leaving it to the caller to handle converting from <code>Int</code> to <code>Double</code>, though that is a design choice that depends a lot on the meaning of <code>def</code> and its role in your larger system.</p>\n"}], "owner": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 33323945, "answer_count": 1, "score": 0, "last_activity_date": 1445773518, "creation_date": 1445724638, "last_edit_date": 1445773518, "question_id": 33323897, "link": "https://stackoverflow.com/questions/33323897/right-use-of-fromintegral-and-mismatched-brackets", "title": "right use of fromIntegral and mismatched brackets", "body": "<pre><code>def :: (Int, Int) -&gt; (Int, Int, Int)\ndef (x, y) \n| x == 0 &amp;&amp; y == 0  = (0, 1, 0)\n| otherwise = ( fromIntegral x/34, y, a )\n  where a = x + y\n</code></pre>\n\n<p>always getting the message incorrect indentation or mismatched brackets. even tried to left out the a variable with the where structure. Also i am not sure if i did the declaration and the fromIntegral correct</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 0, "creation_date": 1445720702, "post_id": 33322376, "comment_id": 54444253, "body": "Note the type to <code>series :: (Integral a, Num b) =&gt; (a -&gt; b) -&gt; a -&gt; [b]</code>, or even <code>Enum a</code>, is a more abstract variant that follows (probably) the same implementation."}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 1, "creation_date": 1445734352, "post_id": 33322376, "comment_id": 54447700, "body": "Note that you almost certainly want to use <code>Double</code>, which is a double-precision floating point number, rather than <code>Float</code>, which is single precision and really only intended for special use cases."}], "answers": [{"comments": [{"owner": {"reputation": 1243, "user_id": 303624, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/472507810fe63563d97c4975695ee2f4?s=128&d=identicon&r=PG", "display_name": "David Matuszek", "link": "https://stackoverflow.com/users/303624/david-matuszek"}, "edited": false, "score": 0, "creation_date": 1445721335, "post_id": 33322524, "comment_id": 54444435, "body": "Thanks. I tried that before and didn&#39;t get it to work, but now it does. I don&#39;t know what I&#39;m doing differently, but now I&#39;m making progress again."}], "tags": [], "owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "is_accepted": false, "score": 9, "last_activity_date": 1445715544, "creation_date": 1445715544, "answer_id": 33322524, "question_id": 33322376, "link": "https://stackoverflow.com/questions/33322376/is-it-possible-to-write-a-haskell-function-with-type-int-float/33322524#33322524", "title": "Is it possible to write a Haskell function with type Int -&gt; Float", "body": "<p>I think you're looking for the <code>fromIntegral</code> function.</p>\n"}, {"comments": [{"owner": {"reputation": 1243, "user_id": 303624, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/472507810fe63563d97c4975695ee2f4?s=128&d=identicon&r=PG", "display_name": "David Matuszek", "link": "https://stackoverflow.com/users/303624/david-matuszek"}, "edited": false, "score": 0, "creation_date": 1445807701, "post_id": 33323351, "comment_id": 54466944, "body": "I can see why this would be slow, but I don&#39;t see at what point it becomes a Float. When the number gets too large for an Int? But in that case the Float would be wrong."}, {"owner": {"reputation": 3165, "user_id": 1181103, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/99bcd4d7172ef6e5ece5e0af27f7381c?s=128&d=identicon&r=PG", "display_name": "Sergey Romanovsky", "link": "https://stackoverflow.com/users/1181103/sergey-romanovsky"}, "edited": false, "score": 0, "creation_date": 1445900444, "post_id": 33323351, "comment_id": 54510075, "body": "Stupid question: is it some kind of type casting which allows you to say 0==0.0 and then increment it till x?"}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 1, "last_activity_date": 1445721352, "last_edit_date": 1445721352, "creation_date": 1445720807, "answer_id": 33323351, "question_id": 33322376, "link": "https://stackoverflow.com/questions/33322376/is-it-possible-to-write-a-haskell-function-with-type-int-float/33323351#33323351", "title": "Is it possible to write a Haskell function with type Int -&gt; Float", "body": "<p>Michael Snoyman's answer is the practical one, but let me show you what you could do if <code>fromIntegral</code> didn't exist. First, the super-slow version:</p>\n\n<pre><code>intToFloat :: Int -&gt; Float\nintToFloat x\n  | x &gt; 0 = - itf (- x)\n  | otherwise = itf x\n\n-- Convert a negative Int to a Float\nitf 0 = 0\nitf x = itf (x + 1) - 1\n</code></pre>\n\n<p>This is slow, and may also use a lot of memory. But we can fix it through the power of division! Unfortunately, I can't write it up right now.</p>\n"}], "owner": {"reputation": 1243, "user_id": 303624, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/472507810fe63563d97c4975695ee2f4?s=128&d=identicon&r=PG", "display_name": "David Matuszek", "link": "https://stackoverflow.com/users/303624/david-matuszek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1445721352, "creation_date": 1445714740, "question_id": 33322376, "link": "https://stackoverflow.com/questions/33322376/is-it-possible-to-write-a-haskell-function-with-type-int-float", "title": "Is it possible to write a Haskell function with type Int -&gt; Float", "body": "<p>I can write</p>\n\n<pre><code>double :: Int -&gt; Float\ndouble i = 2.0\n</code></pre>\n\n<p>but that isn't in any way a function of its argument. Casting is apparently\nforbidden, mixed-mode arithmetic isn't supported, so I can't do anything like</p>\n\n<pre><code>double :: Int -&gt; Float\ndouble i = 2.0 * i\n</code></pre>\n\n<p>I'm actually trying to figure out how to define </p>\n\n<pre><code>series :: (Int -&gt; Float) -&gt; Int -&gt; [Float]\n</code></pre>\n\n<p>to return the infinite series [f(i), f(i+1), f(i+2),...]\nbut I'm stuck at computing f(i).</p>\n\n<p>If this is really impossible, what type must I use?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["haskell", "continuations"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1445721802, "post_id": 33322257, "comment_id": 54444574, "body": "You are calling <code>map</code> instead of <code>map&#39;</code> in the recursive call."}, {"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 2, "creation_date": 1445751851, "post_id": 33322257, "comment_id": 54450540, "body": "You shouldn&#39;t edit the answer into your question - I got all confused at first because your first version now works..."}], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1445717536, "post_id": 33322623, "comment_id": 54443310, "body": "<code>f</code> presumably should be CPS converted as well, for the complete transform."}, {"owner": {"reputation": 9123, "user_id": 1040718, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u0SVy.jpg?s=128&g=1", "display_name": "cybertextron", "link": "https://stackoverflow.com/users/1040718/cybertextron"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1445719350, "post_id": 33322623, "comment_id": 54443817, "body": "@dfeuer could you give a implementation that CPS <code>f</code> ?"}], "tags": [], "owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "is_accepted": false, "score": 3, "last_activity_date": 1445716243, "creation_date": 1445716243, "answer_id": 33322623, "question_id": 33322257, "link": "https://stackoverflow.com/questions/33322257/converting-functions-to-cps/33322623#33322623", "title": "Converting functions to CPS", "body": "<p>When rewriting in CPS the continuation takes the result, so if you write the expected type of your map function you have:</p>\n\n<pre><code>mapk :: (a -&gt; b) -&gt; [a] -&gt; ([b] -&gt; r) -&gt; r\n</code></pre>\n\n<p>so the continuation takes the result list as a parameter. If you look at your implementation:</p>\n\n<pre><code>map' f (x:xs) cc = f x (\\y -&gt; map f xs (\\ys -&gt; cc(y:ys)))\n</code></pre>\n\n<p><code>y</code> and <code>ys</code> should have the same type (<code>[b]</code>) however you are trying to combine them with <code>(:)</code> which expects a <code>b</code> and <code>[b]</code>. Instead you want something like:</p>\n\n<pre><code>mapk _ [] k = k []\nmapk f (x:xs) k = mapk f xs (\\rs -&gt; k $ (f x):rs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9123, "user_id": 1040718, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u0SVy.jpg?s=128&g=1", "display_name": "cybertextron", "link": "https://stackoverflow.com/users/1040718/cybertextron"}, "is_accepted": false, "score": 0, "last_activity_date": 1445722895, "creation_date": 1445722895, "answer_id": 33323678, "question_id": 33322257, "link": "https://stackoverflow.com/questions/33322257/converting-functions-to-cps/33323678#33323678", "title": "Converting functions to CPS", "body": "<p>It was a typo on </p>\n\n<pre><code>map' f (x:xs) cc = f x (\\y -&gt; map f xs (\\ys -&gt; cc(y:ys)))\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>map' f (x:xs) cc = f x (\\y -&gt; map' f xs (\\ys -&gt; cc(y:ys)))\n</code></pre>\n"}], "owner": {"reputation": 9123, "user_id": 1040718, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u0SVy.jpg?s=128&g=1", "display_name": "cybertextron", "link": "https://stackoverflow.com/users/1040718/cybertextron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445804406, "creation_date": 1445714033, "last_edit_date": 1445804406, "question_id": 33322257, "link": "https://stackoverflow.com/questions/33322257/converting-functions-to-cps", "title": "Converting functions to CPS", "body": "<p>I have the following CPS implementation of <code>until</code>:</p>\n\n<pre><code>until' p f x cc = p x (\\y -&gt; if y then cc(x)\n                             else until' p f (f x (\\z -&gt; cc(z))) cc)\n</code></pre>\n\n<p>Which type checks ok! Now, trying to CPS <code>map</code>:</p>\n\n<pre><code>map' f (x:xs) cc = f x (\\y -&gt; map f xs (\\ys -&gt; cc(y:ys)))\n</code></pre>\n\n<p>Another possible implementation:</p>\n\n<pre><code>map' f (x:xs) cc = cc(f x (\\y cc' -&gt; map f xs (\\ys -&gt; cc'(y:ys))))\n</code></pre>\n\n<p>However none of them type checks. Where am I doing the mistake? </p>\n\n<pre><code>    Couldn't match expected type \u2018([a1] -&gt; t2) -&gt; t1\u2019\n                with actual type \u2018[(a1 -&gt; t1) -&gt; t]\u2019\n    Relevant bindings include\n      y :: a1 (bound at test.hs:6:26)\n      cc :: [a1] -&gt; t2 (bound at test.hs:6:15)\n      f :: a -&gt; (a1 -&gt; t1) -&gt; t (bound at test.hs:6:6)\n      map' :: (a -&gt; (a1 -&gt; t1) -&gt; t) -&gt; [a] -&gt; ([a1] -&gt; t2) -&gt; t\n        (bound at test.hs:6:1)\n    The function \u2018map\u2019 is applied to three arguments,\n    but its type \u2018(a -&gt; (a1 -&gt; t1) -&gt; t) -&gt; [a] -&gt; [(a1 -&gt; t1) -&gt; t]\u2019\n    has only two\n    In the expression: map f xs (\\ ys -&gt; cc (y : ys))\n    In the second argument of \u2018f\u2019, namely\n      \u2018(\\ y -&gt; map f xs (\\ ys -&gt; cc (y : ys)))\u2019\nFailed, modules loaded: none.\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 2, "creation_date": 1445711569, "post_id": 33321668, "comment_id": 54441448, "body": "It&#39;s not a dumb question, but this kind of compiler error (from the type-checker) is the most common type of error you&#39;ll encounter programming haskell so it might be worth taking the time to understand what this means (and how to read a type signature, if necessary) before moving on. You can search SO for &quot;couldn&#39;t match expected type&quot; for lots of answers that walk you through how to find and fix type errors."}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "reply_to_user": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1445711640, "post_id": 33321668, "comment_id": 54441486, "body": "@jberryman I&#39;m going through a book pretty rigorously, eventually I&#39;ll learn about all this IO stuff, but right now I just want my program to work."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1445712412, "post_id": 33321668, "comment_id": 54441781, "body": "That&#39;s great, but the fact that there&#39;s <code>IO</code> in your type doesn&#39;t have much to do with your error, or how you&#39;d go about isolating it."}], "answers": [{"comments": [{"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1445711163, "post_id": 33321708, "comment_id": 54441268, "body": "I&#39;ll learn what that all means when I get further into the book I&#39;m reading, I guess, for now I&#39;ll just take your word for it!"}, {"owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "edited": false, "score": 1, "creation_date": 1445725457, "post_id": 33321708, "comment_id": 54445571, "body": "What it means is that you can think of &quot;readFile&quot; as an IO action &quot;wrapped around&quot; a string. Wrappers like this are known as &quot;functors&quot;. The &quot;fmap&quot; function lets you reach inside the functor wrapper and do keyhole surgery to the contents without actually taking the wrapper off."}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": true, "score": 4, "last_activity_date": 1445710765, "creation_date": 1445710765, "answer_id": 33321708, "question_id": 33321668, "link": "https://stackoverflow.com/questions/33321668/first-haskell-io-program-isnt-working/33321708#33321708", "title": "First Haskell IO program isn&#39;t working", "body": "<p>You can't do <code>lines . readFile \"lastnames\"</code>.</p>\n\n<p>The <code>readFile</code> function returns an <code>IO String</code>, not a <code>String</code>.</p>\n\n<p>You <em>can</em>, however, use the <code>fmap</code> function (or the <code>&lt;$&gt;</code> operator) to achieve this:</p>\n\n<pre><code>main = do\n  [first, last] &lt;- argArgs\n  firstnames &lt;- lines `fmap` readFile \"firstnames_males\"\n  ...\n</code></pre>\n\n<p>This works because <code>IO</code> is a functor.</p>\n"}], "owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 33321708, "answer_count": 1, "score": 1, "last_activity_date": 1445710765, "creation_date": 1445710488, "question_id": 33321668, "link": "https://stackoverflow.com/questions/33321668/first-haskell-io-program-isnt-working", "title": "First Haskell IO program isn&#39;t working", "body": "<p>Sorry, this is probably really dumb, but can someone explain me why this program doesn't compile? I get <code>Couldn't match expected type 'a1 -&gt; String' with actual type 'IO String'</code>. </p>\n\n<pre><code>import System.Environment\n\nmain = do\n  [first, last] &lt;- getArgs\n  firstnames &lt;- lines . readFile \"firstnames_male\"\n  lastnames &lt;- lines . readFile \"lastnames\"\n  print firstnames\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "edited": false, "score": 0, "creation_date": 1445706953, "post_id": 33320950, "comment_id": 54439858, "body": "i am open for suggestions how to make it less ugly . But please, nothing to fancy for i am just a beginner and wouldn&#39;t understand much."}, {"owner": {"reputation": 21417, "user_id": 925978, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/06e4467a5bd1538a92cefb20db07897a?s=128&d=identicon&r=PG&f=1", "display_name": "crockeea", "link": "https://stackoverflow.com/users/925978/crockeea"}, "reply_to_user": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "edited": false, "score": 0, "creation_date": 1445707417, "post_id": 33320950, "comment_id": 54440012, "body": "I think your problem (the missing paren) started because of that huge definition for <code>rad2grad</code>. Besides getting an editor that matches parentheses for you, you can break it up into smaller chunks to make it more manageable."}], "tags": [], "owner": {"reputation": 21417, "user_id": 925978, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/06e4467a5bd1538a92cefb20db07897a?s=128&d=identicon&r=PG&f=1", "display_name": "crockeea", "link": "https://stackoverflow.com/users/925978/crockeea"}, "is_accepted": false, "score": 2, "last_activity_date": 1445706788, "last_edit_date": 1445706788, "creation_date": 1445706463, "answer_id": 33320950, "question_id": 33320890, "link": "https://stackoverflow.com/questions/33320890/parse-error-in-haskell-in-where-structure/33320950#33320950", "title": "parse error in haskell in where structure", "body": "<p>Haskell is whitespace sensitive, so alignment matters. Once aligned, GHCi said, </p>\n\n<p><code>parse error (possibly incorrect indentation or mismatched brackets)</code></p>\n\n<p>Which should indicate to you that you might have mismatched brackets (assuming your indentation is correct). You are indeed missing a final closing paren before dividing by <code>(2*pi)</code>.</p>\n\n<p>The following compiles:</p>\n\n<pre><code>gke  (x1, y1)(x2, y2) = c*rad2grad\n  where \n    c = 111.2225685\n    rad2grad = (360*arcos ((sin(grad2rad x1)*sin(grad2rad x2) + cos(grad2rad x1)*cos(grad2rad x2)*cos(grad2rad y1 - grad2rad y2))))/(2*pi)\n    grad2rad x1 = (2*pi/360)*x1\n    grad2rad x2 = (2*pi/360)*x2\n    grad2rad y1 = (2*pi/360)*y1\n    grad2rad y2 = (2*pi/360)*y2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 1, "last_activity_date": 1445706775, "creation_date": 1445706775, "answer_id": 33321009, "question_id": 33320890, "link": "https://stackoverflow.com/questions/33320890/parse-error-in-haskell-in-where-structure/33321009#33321009", "title": "parse error in haskell in where structure", "body": "<p>The left-hand sides of equations in a where block must align with each other. So a minimal fix for your indentation problem looks like this:</p>\n\n<pre><code>gke  (x1, y1)(x2, y2) = c*rad2grad\n                              where \n                                c           = 111.2225685\n                                rad2grad    = (360*arcos ((sin(grad2rad x1)*sin(grad2rad x2) + cos(grad2rad x1)*cos(grad2rad x2)*cos(grad2rad y1 - grad2rad y2)))/(2*pi)\n                                grad2rad x1 = (2*pi/360)*x1\n                                grad2rad x2 = (2*pi/360)*x2\n                                grad2rad y1 = (2*pi/360)*y1\n                                grad2rad y2 = (2*pi/360)*y2\n</code></pre>\n\n<p>Also, the parentheses on your <code>rad2grad</code> line aren't all matched up. Perhaps the very first open parenthesis can be deleted.</p>\n\n<p>This will take care of the parse errors; there are other problems, too, but I think you will be able to find and fix those on your own.</p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "edited": false, "score": 0, "creation_date": 1445714741, "post_id": 33321292, "comment_id": 54442481, "body": "How does the function &quot;know&quot; that it can put x1...y2 for a? sorry for the dumb question :). now, after  typing in 4 numbers, i get the mesage &quot;non type-variable argument in the constraint. What does that mean?"}, {"owner": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "edited": false, "score": 0, "creation_date": 1445715580, "post_id": 33321292, "comment_id": 54442717, "body": "Please, ignor the last part of my question. found my fault."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "edited": false, "score": 0, "creation_date": 1445724829, "post_id": 33321292, "comment_id": 54445438, "body": "@letter You can pass any expression of the appropriate type to <code>grad2rad</code>, including <code>x1</code>, <code>y1</code>, and similar, but also including more complicated stuff like <code>x1+y1&#47;2</code> and <code>verletIntegrate f x1 x2</code> or whatever."}], "tags": [], "owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "is_accepted": false, "score": 1, "last_activity_date": 1445708367, "creation_date": 1445708367, "answer_id": 33321292, "question_id": 33320890, "link": "https://stackoverflow.com/questions/33320890/parse-error-in-haskell-in-where-structure/33321292#33321292", "title": "parse error in haskell in where structure", "body": "<p>You are giving redundant definitions for <code>grad2rad</code> - they will just be ignored. You can write the function like this:</p>\n\n<pre><code>gke  (x1, y1)(x2, y2) = c*rad2grad\n                          where \n                            c           = 111.2225685\n                            rad2grad    = (360*acos ((sin(grad2rad x1)*sin(grad2rad x2) + cos(grad2rad x1)*cos(grad2rad x2)*cos(grad2rad y1 - grad2rad y2)))/(2*pi))\n                            grad2rad a = (2*pi/360)*a\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1445708367, "creation_date": 1445706181, "question_id": 33320890, "link": "https://stackoverflow.com/questions/33320890/parse-error-in-haskell-in-where-structure", "title": "parse error in haskell in where structure", "body": "<p>I tried to write a function where given two points (in degree), the Great-circle distance will be calculated. For this, degree has to be changed in radian.</p>\n\n<p>beside the code is looking real ugly, ghci is giving me a parse error on input 'rad2grad'\nwhat i am doing wrong?</p>\n\n<pre><code>gke  (x1, y1)(x2, y2) = c*rad2grad\n                                  where \n                                              c = 111.2225685\n                                       rad2grad = (360*arcos ((sin(grad2rad x1)*sin(grad2rad x2) + cos(grad2rad x1)*cos(grad2rad x2)*cos(grad2rad y1 - grad2rad y2)))/(2*pi)\n                                    grad2rad x1 = (2*pi/360)*x1\n                                    grad2rad x2 = (2*pi/360)*x2\n                                    grad2rad y1 = (2*pi/360)*y1\n                                    grad2rad y2 = (2*pi/360)*y2\n</code></pre>\n"}, {"tags": ["haskell", "types"], "comments": [{"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 2, "creation_date": 1445702046, "post_id": 33320107, "comment_id": 54438193, "body": "<code>filter</code> isn&#39;t a <i>type</i>, it&#39;s a <i>function</i>."}, {"owner": {"reputation": 319, "user_id": 2485944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a2124f2a8b6ac971ed9dd513d347034?s=128&d=identicon&r=PG", "display_name": "Henk", "link": "https://stackoverflow.com/users/2485944/henk"}, "reply_to_user": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1445769668, "post_id": 33320107, "comment_id": 54454456, "body": "@MarkSeemann, True, filter is a function and not a type. What I was hoping to steer to was a way to derive types from other types given some condition."}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 1, "creation_date": 1445769777, "post_id": 33320107, "comment_id": 54454485, "body": "@Henk Sadly Haskell doesn&#39;t have a way to really <i>trivially</i> do this. Smart constructors are about the best you can do. (As a silly example, imagine an <code>Int</code> subtype that only holds prime numbers. How the hell does the compiler know what a prime number is? Clearly this has to happen in user code...)"}], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 2485944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a2124f2a8b6ac971ed9dd513d347034?s=128&d=identicon&r=PG", "display_name": "Henk", "link": "https://stackoverflow.com/users/2485944/henk"}, "edited": false, "score": 0, "creation_date": 1445811671, "post_id": 33320243, "comment_id": 54468217, "body": "For the specific case I&#39;m working on I do not mind this limitations. However, I can image situations where to use of the strings functions would be useful. Is there a way to automatically wrap these functions? Would something like the IsString class (Data.String) be of any help?"}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "reply_to_user": {"reputation": 319, "user_id": 2485944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a2124f2a8b6ac971ed9dd513d347034?s=128&d=identicon&r=PG", "display_name": "Henk", "link": "https://stackoverflow.com/users/2485944/henk"}, "edited": false, "score": 0, "creation_date": 1445850134, "post_id": 33320243, "comment_id": 54479423, "body": "For <i>strings</i> specifically, if you turn on the <code>OverloadedStrings</code> extension. And <i>all</i> this does is automatically wrap literal strings; it doesn&#39;t make the types the same, it just makes it easier to type in literals."}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": true, "score": 8, "last_activity_date": 1586297793, "last_edit_date": 1586297793, "creation_date": 1445702666, "answer_id": 33320243, "question_id": 33320107, "link": "https://stackoverflow.com/questions/33320107/create-a-type-that-is-a-subset-of-an-other-type/33320243#33320243", "title": "Create a type that is a subset of an other type", "body": "<p>The standard way to do this is with so-called \"<a href=\"https://wiki.haskell.org/Smart_constructors\" rel=\"nofollow noreferrer\">smart constructors</a>\".</p>\n\n<p>First, you define a new type that's identical to the old one:</p>\n\n<pre><code>newtype AlphNumString = X String\n</code></pre>\n\n<p>Next, you write the smart constructor itself:</p>\n\n<pre><code>toAlphNumString :: String -&gt; AlphNumString\ntoAlphNumString txt = X (filter isAlphNum txt)\n</code></pre>\n\n<p>Finally, you make it so <code>toAlphNumString</code> is <em>the only</em> way to create an <code>AlphNumString</code>.</p>\n\n<pre><code>module Foo (AlphNumString (), toAlphNumString, ...) where ...\n</code></pre>\n\n<p>Note that this does <em>not</em> allow you to use an <code>AlphNumString</code> like a normal <code>String</code>; you can't create \"subtypes\" like that in Haskell. So you'll also need another function</p>\n\n<pre><code>fromAlphNumString :: AlphNumString -&gt; String\nfromAlphNumString (X txt) = txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "is_accepted": false, "score": 3, "last_activity_date": 1445721867, "creation_date": 1445721867, "answer_id": 33323517, "question_id": 33320107, "link": "https://stackoverflow.com/questions/33320107/create-a-type-that-is-a-subset-of-an-other-type/33323517#33323517", "title": "Create a type that is a subset of an other type", "body": "<p>This concept of types that are \"subsets\" of other types based on some predicate is called refinement types. For Haskell, this is implemented as <a href=\"http://goto.ucsd.edu/~rjhala/liquid/haskell/blog/about/\" rel=\"nofollow\">LiquidHaskell</a>.</p>\n\n<p>However, I would consider this an ongoing research. In practice, I would go with a newtype and dynamic checks, as MathematicalOrchid describes in their answer.</p>\n"}, {"comments": [{"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 0, "creation_date": 1445767387, "post_id": 33325172, "comment_id": 54453868, "body": "The technique is called &quot;<a href=\"http://homepages.inf.ed.ac.uk/wadler/papers/view/view.ps\" rel=\"nofollow noreferrer\">viewing</a>&quot;."}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 0, "last_activity_date": 1445736316, "creation_date": 1445736316, "answer_id": 33325172, "question_id": 33320107, "link": "https://stackoverflow.com/questions/33320107/create-a-type-that-is-a-subset-of-an-other-type/33325172#33325172", "title": "Create a type that is a subset of an other type", "body": "<p>In a dependently typed language (which Haskell is not, yet) you could use dependent pairs for this.</p>\n\n<pre><code>data Sigma : (t : Type) -&gt; (t -&gt; Type) -&gt; Type where\n  MkSigma : (x : t) -&gt; p x -&gt; Sigma t p\n\ndata IsAlphaNum : (c : Char) -&gt; Type where\n  MkIsAlphaNum : isAlphaNum c = True -&gt; IsAlphaNum c\n</code></pre>\n\n<p>Then <code>Sigma Char IsAlphNum</code> would be a type representing alphanumeric characters. Each element of that type would consist of a character and a proof that the character is alphanumeric.</p>\n"}], "owner": {"reputation": 319, "user_id": 2485944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a2124f2a8b6ac971ed9dd513d347034?s=128&d=identicon&r=PG", "display_name": "Henk", "link": "https://stackoverflow.com/users/2485944/henk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 33320243, "answer_count": 3, "score": 4, "last_activity_date": 1586297793, "creation_date": 1445701877, "question_id": 33320107, "link": "https://stackoverflow.com/questions/33320107/create-a-type-that-is-a-subset-of-an-other-type", "title": "Create a type that is a subset of an other type", "body": "<p>How can you create a type that is a subset of an other type? I want a string type that only contains alphanumeric characters. </p>\n\n<p>So I want something like this</p>\n\n<pre><code>type AlphNumString = [AlphaNumChar]\ndata AlphaNumChar = ???? filter (isAlphaNum) Char ????\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 7134, "user_id": 3687048, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/i0GDr.jpg?s=128&g=1", "display_name": "Mark Karpov", "link": "https://stackoverflow.com/users/3687048/mark-karpov"}, "edited": false, "score": 2, "creation_date": 1445700783, "post_id": 33319757, "comment_id": 54437765, "body": "Your problem has nothing to do with <code>toEnum</code>. You need to convert number from <code>Integer</code> type to <code>Int</code> type. Use <code>fromIntegral</code>."}], "answers": [{"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 0, "last_activity_date": 1445701267, "creation_date": 1445701267, "answer_id": 33319999, "question_id": 33319757, "link": "https://stackoverflow.com/questions/33319757/dont-know-how-to-use-toenum-in-haskell/33319999#33319999", "title": "Don&#39;t know how to use toEnum in Haskell", "body": "<p>You can use <code>fromInteger</code> to turn an <code>Integer</code> into an <code>Int</code>, but you're probably better off just using an <code>Int</code> to begin with.</p>\n"}, {"tags": [], "owner": {"reputation": 11978, "user_id": 774651, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d174682a9c2469488ac0cd91f0253215?s=128&d=identicon&r=PG&f=1", "display_name": "Lol4t0", "link": "https://stackoverflow.com/users/774651/lol4t0"}, "is_accepted": true, "score": 3, "last_activity_date": 1445701454, "creation_date": 1445701454, "answer_id": 33320031, "question_id": 33319757, "link": "https://stackoverflow.com/questions/33319757/dont-know-how-to-use-toenum-in-haskell/33320031#33320031", "title": "Don&#39;t know how to use toEnum in Haskell", "body": "<p>The problem is <code>cntDays</code> returns you an <code>Integer</code> while <code>toEnum</code> accepts only <code>Ints</code></p>\n\n<pre><code>toEnum :: Enum a =&gt; Int -&gt; a\n</code></pre>\n\n<p>You need to convert <code>Integer</code> to an <code>Int</code>. Use <code>fromIntegral</code> for it:</p>\n\n<pre><code>weekday :: Date -&gt; Weekdays\nweekday date = toEnum . fromIntegral $ (cntDays date) `mod` 7\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 4900963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf5ff5469abea2ab3f5fc7e72ff514fe?s=128&d=identicon&r=PG&f=1", "display_name": "Noli", "link": "https://stackoverflow.com/users/4900963/noli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2673, "favorite_count": 0, "accepted_answer_id": 33320031, "answer_count": 2, "score": 0, "last_activity_date": 1445701454, "creation_date": 1445700080, "question_id": 33319757, "link": "https://stackoverflow.com/questions/33319757/dont-know-how-to-use-toenum-in-haskell", "title": "Don&#39;t know how to use toEnum in Haskell", "body": "<p>Am pretty new in haskell. I have the following code piece: </p>\n\n<pre><code>data Weekdays = Mon | Tue | Wed | Thu | Fri | Sat | Sun\n                deriving (Eq, Enum, Show)\n\nweekday :: Date -&gt; Weekdays\nweekday date = toEnum (mod (cntDays date) 7)\n</code></pre>\n\n<p>I get the following error message:</p>\n\n<pre><code>Time.hs:8:29:\n    Couldn't match expected type \u2018Int\u2019 with actual type \u2018Integer\u2019\n    In the first argument of \u2018mod\u2019, namely \u2018(cntDays date)\u2019\n    In the first argument of \u2018toEnum\u2019, namely \u2018(mod (cntDays date) 7)\u2019\nFailed, modules loaded: none.\n</code></pre>\n\n<p>cntDays gives back an Integer. So how am I able to get back 'Sun' for example as a return Value wenn cntDays gives back a '6'?</p>\n"}, {"tags": ["haskell", "testing", "code-coverage", "haskell-stack"], "comments": [{"owner": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "edited": false, "score": 0, "creation_date": 1445700934, "post_id": 33319720, "comment_id": 54437833, "body": "What version of <code>stack</code> are you using? The latest version works better with <code>hpc</code>. I&#39;m using <code>0.1.6.0</code> and it mostly works."}, {"owner": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "edited": false, "score": 2, "creation_date": 1445701063, "post_id": 33319720, "comment_id": 54437877, "body": "Also see <a href=\"https://github.com/commercialhaskell/stack/issues/1181\" rel=\"nofollow noreferrer\">github.com/commercialhaskell/stack/issues/1181</a>"}, {"owner": {"reputation": 7134, "user_id": 3687048, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/i0GDr.jpg?s=128&g=1", "display_name": "Mark Karpov", "link": "https://stackoverflow.com/users/3687048/mark-karpov"}, "reply_to_user": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "edited": false, "score": 0, "creation_date": 1445701099, "post_id": 33319720, "comment_id": 54437888, "body": "@Yuras, <code>stack --version</code> \u2192 <code>Version 0.1.6.0, Git revision e22271f5ce9afa2cb5be3bad9cafa392c623f85c (2313 commits) x86_64</code>."}, {"owner": {"reputation": 7134, "user_id": 3687048, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/i0GDr.jpg?s=128&g=1", "display_name": "Mark Karpov", "link": "https://stackoverflow.com/users/3687048/mark-karpov"}, "reply_to_user": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "edited": false, "score": 0, "creation_date": 1445701298, "post_id": 33319720, "comment_id": 54437942, "body": "@Yuras, thanks for the link to that issue. I&#39;m not the only one who get this! There should be some feedback on my issue too, I guess."}], "answers": [{"tags": [], "owner": {"reputation": 7134, "user_id": 3687048, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/i0GDr.jpg?s=128&g=1", "display_name": "Mark Karpov", "link": "https://stackoverflow.com/users/3687048/mark-karpov"}, "is_accepted": true, "score": 0, "last_activity_date": 1445790558, "creation_date": 1445790558, "answer_id": 33332067, "question_id": 33319720, "link": "https://stackoverflow.com/questions/33319720/generate-coverage-report-with-stack/33332067#33332067", "title": "Generate coverage report with stack", "body": "<p>Recent changes upstream fixed it. Should be resolved for users of 0.1.7.0 and later.</p>\n"}, {"tags": [], "owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "is_accepted": false, "score": 1, "last_activity_date": 1491911745, "creation_date": 1491911745, "answer_id": 43345215, "question_id": 33319720, "link": "https://stackoverflow.com/questions/33319720/generate-coverage-report-with-stack/43345215#43345215", "title": "Generate coverage report with stack", "body": "<p>In my case I was still getting this error. Running:</p>\n\n<pre><code>stack clean\nstack test --coverage\n</code></pre>\n\n<p>solved the problem, as reported <a href=\"https://github.com/commercialhaskell/stack/issues/1541\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 7134, "user_id": 3687048, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/i0GDr.jpg?s=128&g=1", "display_name": "Mark Karpov", "link": "https://stackoverflow.com/users/3687048/mark-karpov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 33332067, "answer_count": 2, "score": 3, "last_activity_date": 1491911745, "creation_date": 1445699813, "last_edit_date": 1445732952, "question_id": 33319720, "link": "https://stackoverflow.com/questions/33319720/generate-coverage-report-with-stack", "title": "Generate coverage report with stack", "body": "<p>I want to generate code coverage report using Stack. I run command that\namounts to (omitting options passed to test suite via <code>--test-arguments</code>):</p>\n\n<pre><code>$ stack test --coverage\n</code></pre>\n\n<p>This performs the testing and then outputs the following:</p>\n\n<blockquote>\n  <p>Error: The coverage report for myproject's test-suite \"tests\" did not\n  consider any code. One possible cause of this is if your test-suite builds\n  the library code (see stack issue #1008). It may also indicate a bug in\n  stack or the hpc program. Please report this issue if you think your\n  coverage report should have meaningful results.</p>\n</blockquote>\n\n<p>I think it should (this creates empty report). GHC options are identical for\nall components of my package. There is no need for test suite to rebuild the\nlibrary. After all, if Cabal can generate the report, Stack should be able\nto do it given the same Cabal config or am I mistaken?</p>\n\n<p>I've opened\n<a href=\"https://github.com/commercialhaskell/stack/issues/1224\" rel=\"nofollow\">an issue on</a> Stack\nGitHub repo as suggested.</p>\n\n<hr>\n\n<p>After a while I decided to create good old sandbox and generate the report\nusing Cabal instead (I really need to see the report, you know). <em>It worked\npreviously, but now I get:</em></p>\n\n<pre><code>$ cabal sandbox init\n\u2026 &lt;everything OK&gt;\n$ cabal update\n\u2026 &lt;everything OK&gt;\n$ cabal install --only-dependencies --enable-tests\n\u2026 &lt;everything OK&gt;\n$ cabal configure --enable-tests --enable-coverage\n\u2026 &lt;everything OK&gt;\n$ cabal build\n\u2026 &lt;everything OK&gt;\n$ cabal test\nRunning 2 test suites...\nTest suite tests: RUNNING...\nTest suite tests: PASS\nTest suite logged to: dist/test/myproject-0.1.0-tests.log\nhpc: can not find HUnit_DDLSMCRs3jyLBDbJPCH01j/Test.HUnit.Lang in [\"./.hpc\",\"./dist/hpc/vanilla/mix/myproject-0.1.0\",\"./dist/hpc/vanilla/mix/tests\"]\n</code></pre>\n\n<p><em>What?</em> I've never seen this, although I generated many reports\nbefore. Someone up there just decided that I won't get that report today,\nit seems.</p>\n\n<hr>\n\n<p>Do you know how to generate coverage report using Stack? Has anyone\nsucceeded at this?</p>\n"}, {"tags": ["sorting", "haskell", "generic-list"], "comments": [{"owner": {"reputation": 28873, "user_id": 1068232, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2a0a145ce58c20013969fe3f203531da?s=128&d=identicon&r=PG", "display_name": "Andr&#225;s Kov&#225;cs", "link": "https://stackoverflow.com/users/1068232/andr%c3%a1s-kov%c3%a1cs"}, "edited": false, "score": 2, "creation_date": 1445696756, "post_id": 33318868, "comment_id": 54436414, "body": "<code>(Ord a, Traversable f) =&gt; f a -&gt; f a</code> works, of course. With <code>lens</code>, <code>over (partsOf traverse) sort</code> implements it, I don&#39;t know though how often could this be useful."}, {"owner": {"reputation": 11001, "user_id": 727667, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2e2cbd3a202d8d1cfe0cc2a9fff86733?s=128&d=identicon&r=PG", "display_name": "gallais", "link": "https://stackoverflow.com/users/727667/gallais"}, "edited": false, "score": 0, "creation_date": 1445880201, "post_id": 33318868, "comment_id": 54499188, "body": "You may want to have a look at <a href=\"http://dl.acm.org/citation.cfm?id=2628163\" rel=\"nofollow noreferrer\">How to Keep your Neighbours in Order</a> in which McBride defines a universe of trees for which the leaves are sorted by construction."}], "answers": [{"comments": [{"owner": {"reputation": 60057, "user_id": 1333025, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/79ab43010f900324ac5e2de19a2916cb?s=128&d=identicon&r=PG", "display_name": "Petr", "link": "https://stackoverflow.com/users/1333025/petr"}, "edited": false, "score": 1, "creation_date": 1445774734, "post_id": 33319519, "comment_id": 54455799, "body": "This doesn&#39;t really answer the question - <i>Is there a more generic way to implement a sorting algorithm than one based on lists?</i>"}], "tags": [], "owner": {"reputation": 15549, "user_id": 1876739, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QOK17.jpg?s=128&g=1", "display_name": "Ram&#243;n J Romero y Vigil", "link": "https://stackoverflow.com/users/1876739/ram%c3%b3n-j-romero-y-vigil"}, "is_accepted": false, "score": 0, "last_activity_date": 1445698354, "creation_date": 1445698354, "answer_id": 33319519, "question_id": 33318868, "link": "https://stackoverflow.com/questions/33318868/most-generic-possible-meaningful-signature-for-a-generic-sorting-function/33319519#33319519", "title": "Most generic possible/meaningful signature for a generic sorting function", "body": "<p>How about</p>\n\n<pre><code>sortGeneric :: (Ord a, Traversable t) =&gt; t a -&gt; t a\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445863642, "post_id": 33320155, "comment_id": 54487605, "body": "so I guess the fact no-one seems to care about it (at least considering Hackage and based on my search results), it&#39;s probably not something too useful. do you think that&#39;s a fair assessment?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445867803, "post_id": 33320155, "comment_id": 54490449, "body": "@ErikAllik, it only seems to make sense to sort <code>Traversable</code> containers that actually represent sequences, rather than maps or whatever. These tend to have their own sorting functions."}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": true, "score": 5, "last_activity_date": 1445830129, "last_edit_date": 1445830129, "creation_date": 1445702134, "answer_id": 33320155, "question_id": 33318868, "link": "https://stackoverflow.com/questions/33318868/most-generic-possible-meaningful-signature-for-a-generic-sorting-function/33320155#33320155", "title": "Most generic possible/meaningful signature for a generic sorting function", "body": "<p>You certainly can sort an arbitrary <code>Traversable</code> by folding over it to produce a list, vector, or heap, and then using <code>mapAccumL</code> or <code>mapAccumR</code> to put all the elements back. The trouble is that this may be less efficient than sorting the container directly.</p>\n\n<pre><code>import qualified Data.PQueue.Min as Q\nimport Data.Foldable (toList)\nimport Data.Traversable (Traversable (..))\nimport Data.Tuple (swap)\nimport Control.Monad.Trans.State.Strict\n\nsort xs = mapAccumL' go (Q.fromList . toList $ xs) xs where\n  go h _ = swap $ Q.deleteFindMin h\n\nmapAccumL' :: Traversable t =&gt;\n              (a -&gt; b -&gt; (a, c)) -&gt; a -&gt; t b -&gt; t c\nmapAccumL' f s t = flip evalState s $\n   traverse (\\q -&gt; state $ swap . flip f q) t\n</code></pre>\n\n<p>Note that the uses of <code>toList</code> and <code>fromList</code> are purely for convenience, and the lists involved are pretty likely never to actually be allocated.</p>\n"}], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 33320155, "answer_count": 2, "score": 3, "last_activity_date": 1445830129, "creation_date": 1445694106, "last_edit_date": 1445695637, "question_id": 33318868, "link": "https://stackoverflow.com/questions/33318868/most-generic-possible-meaningful-signature-for-a-generic-sorting-function", "title": "Most generic possible/meaningful signature for a generic sorting function", "body": "<p>I've done quite a bit of googling to come up with some hints/examples, to no avail so far.</p>\n\n<p>Is there a more generic way to implement a sorting algorithm than one based on lists? I could just go with <code>sortGeneric :: IsList l =&gt; l a -&gt; l a</code> but that seems like a bad idea because <code>IsList</code> is nothing more than support for <code>OverloadedLists</code>.</p>\n\n<p>Maybe I should be just asking about sorting a <code>Traversable t =&gt; t a</code>?</p>\n"}, {"tags": ["list", "haskell", "functional-programming"], "answers": [{"tags": [], "owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "is_accepted": true, "score": 4, "last_activity_date": 1445684176, "creation_date": 1445684176, "answer_id": 33317387, "question_id": 33317326, "link": "https://stackoverflow.com/questions/33317326/using-the-replicate-function-in-haskell-to-add-to-a-list/33317387#33317387", "title": "Using the replicate function in haskell to add to a list", "body": "<p><code>k</code> and <code>replicate 3 'd'</code> each have a type of <code>[Char]</code>.</p>\n\n<pre><code>ghci&gt; :t k\nk :: [Char]\n\nghci&gt; :t replicate 3 'd'\nreplicate 3 'd' :: [Char]\n</code></pre>\n\n<p>However, the type of <code>(:)</code> is <code>a -&gt; [a] -&gt; [a]</code>: it takes a single <code>a</code> and adds it to the list of <code>a</code>s.</p>\n\n<pre><code>ghci&gt; :t (:)\n(:) :: a -&gt; [a] -&gt; [a]\n</code></pre>\n\n<p>So Haskell's giving you a type error because you can't apply <code>(:)</code> to two things of type <code>[Char]</code>. In other words, you can't put a <code>[Char]</code> inside a <code>[Char]</code>.</p>\n\n<p>What we really need is a function of type <code>[a] -&gt; [a] -&gt; [a]</code> which concatenates the two lists. It happens that this function is called <code>(++)</code>.</p>\n\n<pre><code>ghci&gt; :t (++)\n(++) :: [a] -&gt; [a] -&gt; [a]\n\nghci&gt; replicate 3 'd' ++ k\n\"ddddfg\"\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 5449377, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/5c1b0852a7e9e7a953ae50583dcd09e1?s=128&d=identicon&r=PG&f=1", "display_name": "Neo Streets", "link": "https://stackoverflow.com/users/5449377/neo-streets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 33317387, "answer_count": 1, "score": 1, "last_activity_date": 1445688499, "creation_date": 1445683797, "last_edit_date": 1445688499, "question_id": 33317326, "link": "https://stackoverflow.com/questions/33317326/using-the-replicate-function-in-haskell-to-add-to-a-list", "title": "Using the replicate function in haskell to add to a list", "body": "<p>I'm to use the replicate function that Haskell has (<code>replicate 3 'x' = ['x','x','x']</code>) but I'm trying to add it to a list that already exists.</p>\n\n<pre><code>Prelude &gt; let k = ['d','f','g']\nPrelude &gt; (replicate 3 'd':k)\n</code></pre>\n\n<p>but I keep getting the error,</p>\n\n<pre><code>Couldn't match type 'Char' with '[Char]'\nExpected type: [[Char]]\nActual type: [Char]\n</code></pre>\n\n<p>Is there a way to do this?</p>\n"}, {"tags": ["sorting", "haskell"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1445679029, "post_id": 33316573, "comment_id": 54431342, "body": "<a href=\"http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v:sortBy\" rel=\"nofollow noreferrer\"><code>sortBy </code></a><a href=\"http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Ord.html#v:comparing\" rel=\"nofollow noreferrer\"><code>(comparing </code></a><a href=\"http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:length\" rel=\"nofollow noreferrer\"><code>length)</code></a>. Look at the type signatures to understand how this works. (BTW, this is pretty inefficient: <code>length</code> is slow, so a better approach would be to compute all the lengths once and sort that list in the usual way.)"}], "answers": [{"tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": true, "score": 5, "last_activity_date": 1445694870, "last_edit_date": 1445694870, "creation_date": 1445682281, "answer_id": 33317105, "question_id": 33316573, "link": "https://stackoverflow.com/questions/33316573/sort-a-string-list-by-string-length/33317105#33317105", "title": "Sort a String list by String length", "body": "<p><strong>First of all</strong>, your <code>cmp</code> function does not handle the case where the lengths are equal: you need to add that. Otherwise you'll get an runtime pattern match error:</p>\n\n<pre><code>comp a b\n    | length a &gt; length b   = GT\n    | length a &lt; length b   = LT\n    | otherwise             = undefined  -- TODO\n</code></pre>\n\n<p>also, note that this implementation sometimes computes the length twice, but it's likely that GHC optimizes this one away on its own, and we'll get to solving this later on more fundamentally anyway.</p>\n\n<p><strong>Then</strong>, once you've fixed your <code>comp</code>, all you need to do is pass it to <code>Data.List.sortBy</code> together with the list of strings you want to sort. An ipmplementation like that is provided below (<code>&lt;$&gt;</code> is the operator alias of <code>fmap</code> which works the same as <code>map</code> does on lists).</p>\n\n<p><strong>However</strong>, there's a better solution where you first compute the length of all elements in the list, by mapping each of the elements into a pair where the first member is the original string and the second one is its length. You then use a modified <code>comp</code> function that takes 2 pairs instead of just 2 strings, but otherwise behaves the same as your original <code>comp</code>. However, you then need to map the intermediate list back to just containing the strings (which is what the <code>fst &lt;$&gt;</code> is for, which is equivalent to <code>map fst</code> but, again, uses the, IMO nicer looking, <code>&lt;$&gt;</code> opetator).</p>\n\n<hr>\n\n<p>So the somewhat <strong>naive solution</strong> would be:</p>\n\n<pre><code>sortByLenOrLex :: [String] -&gt; [String]\nsortByLenOrLex as = sortBy cmp as where\n  cmp a b | n &gt; m     = GT\n          | n &lt; m     = LT\n          | otherwise = compare a b\n    where n = length a\n          m = length b\n</code></pre>\n\n<p>and the <strong>more efficient</strong> one, as leftaroundabout points out, would be:</p>\n\n<pre><code>sortByLenOrLex' :: [String] -&gt; [String]\nsortByLenOrLex' as = fst &lt;$&gt; sortBy cmp (addLen &lt;$&gt; as) where\n  cmp (a,n) (b,m) | n &gt; m     = GT\n                  | n &lt; m     = LT\n                  | otherwise = compare a b\n  addLen x = (x, length x)\n</code></pre>\n\n<p>where the list is first amended with the lengths of each of its elements, so as to avoid duplicate, expensive <code>length</code> calls.</p>\n\n<p><strong>EDIT:</strong> please see <a href=\"/questions/33316573/sort-a-string-list-by-string-length/33318240#33318240\">chi's answer</a> for a much nicer implementation of this algorithm!</p>\n\n<hr>\n\n<p><strong>Furthermore:</strong></p>\n\n<p>You can make your functions generic by making them operate on <strong>lists of lists of <code>Ord</code></strong>:</p>\n\n<pre><code>sortByLenOrLex'' :: Ord a =&gt; [[a]] -&gt; [[a]]\nsortByLenOrLex'' as = fst &lt;$&gt; sortBy cmp (addLen &lt;$&gt; as) where\n  cmp (a,n) (b,m) | n &gt; m     = GT\n                  | n &lt; m     = LT\n                  | otherwise = compare a b\n  addLen x = (x, length x)\n</code></pre>\n\n<p>this gives you:</p>\n\n<pre><code>*Main&gt; sortByLenOrLex'' [[1,2], [1,3], [1,2,3]]\n[[1,2],[1,3],[1,2,3]]\n</code></pre>\n\n<p>...and if you want to make it as generic as possible, you can sort <strong>lists of <code>Foldable</code> of <code>Ord</code></strong>:</p>\n\n<pre><code>sortByLenOrLex''' :: (Foldable f, Ord a) =&gt; [f a] -&gt; [f a]\nsortByLenOrLex''' as = unamend &lt;$&gt; sortBy cmp (amend &lt;$&gt; as) where\n  cmp (a,n,a') (b,m,b') | n &gt; m     = GT\n                        | n &lt; m     = LT\n                        | otherwise = compare a' b'\n  amend    x      = (x, length x, toList x)\n  unamend (x,_,_) =  x\n</code></pre>\n\n<p>this gives you:</p>\n\n<pre><code>*Main&gt; sortByLenOrLex''' [Just 3, Just 4, Just 3, Nothing]\n[Nothing,Just 3,Just 3,Just 4]\n\n*Main&gt; sortByLenOrLex''' [(4,1),(1,1),(1,2),(1,1),(3,1)]\n[(4,1),(1,1),(1,1),(3,1),(1,2)]\n\n*Main&gt; sortByLenOrLex''' [Left \"bla\", Right \"foo\", Right \"foo\", Right \"baz\"]\n[Left \"bla\",Right \"baz\",Right \"foo\",Right \"foo\"]\n\n*Main&gt; sortByLenOrLex''' [(3,\"hello\"),(2,\"goodbye\"),(1,\"hello\")]\n[(2,\"goodbye\"),(3,\"hello\"),(1,\"hello\")]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445692183, "post_id": 33318240, "comment_id": 54435008, "body": "how obvious! but I guess my <code>sortByLenOrLex&#39;&#39;&#39;</code> cannot be shortened this way?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 1, "creation_date": 1445711000, "post_id": 33318240, "comment_id": 54441206, "body": "@ErikAllik <code>fmap (snd . snd) . sort . fmap (length &amp;&amp;&amp; (toList &amp;&amp;&amp; id))</code> should work if you also have <code>Ord (f a)</code>."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 3, "last_activity_date": 1445689935, "creation_date": 1445689935, "answer_id": 33318240, "question_id": 33316573, "link": "https://stackoverflow.com/questions/33316573/sort-a-string-list-by-string-length/33318240#33318240", "title": "Sort a String list by String length", "body": "<p>A variant of @Erik's solution, using some combinators from the library:</p>\n\n<pre><code>import Data.List\nimport Control.Arrow\n\nsortByLen = map snd . sort . map (length &amp;&amp;&amp; id)\n</code></pre>\n\n<p>This is essentially a <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow\">Schwartzian transform</a>.</p>\n"}], "owner": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 33317105, "answer_count": 2, "score": 1, "last_activity_date": 1445694870, "creation_date": 1445678778, "last_edit_date": 1445694599, "question_id": 33316573, "link": "https://stackoverflow.com/questions/33316573/sort-a-string-list-by-string-length", "title": "Sort a String list by String length", "body": "<p>I want to sort a list of <code>String</code> first by the length of the strings, and if the length is the same then it should sort lexically. I thought I could use the <code>Data.List</code> library and write my own compare function that does that. So the compare function should take a list of <code>String</code> as the argument and compare all the the elements (which are <code>String</code>s). A compare function for <code>String</code>s would look like this</p>\n\n<pre><code>comp a b\n    | length a &gt; length b   = GT\n    | length a &lt; length b   = LT\n</code></pre>\n\n<p>How could I address all the list elements with such a function?</p>\n"}, {"tags": ["haskell", "keyword"], "answers": [{"tags": [], "owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "is_accepted": false, "score": 1, "last_activity_date": 1445679524, "creation_date": 1445679524, "answer_id": 33316673, "question_id": 33316533, "link": "https://stackoverflow.com/questions/33316533/whats-the-difference-between-the-data-and-type-keywords/33316673#33316673", "title": "What&#39;s the difference between the &quot;data&quot; and &quot;type&quot; keywords?", "body": "<p>With <code>data</code> you create <strong>new</strong> datatype and declare a constructor for it:</p>\n\n<pre><code>data NewData = NewDataConstructor\n</code></pre>\n\n<p>With <code>type</code> you define just an alias:</p>\n\n<pre><code>type MyChar = Char\n</code></pre>\n\n<p>In the <code>type</code> case you can pass value of <code>MyChar</code> type to function expecting a <code>Char</code> and vice versa, but you can't do this for <code>data MyChar = MyChar Char</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1560995402, "post_id": 33316715, "comment_id": 99922556, "body": "a possible edit: &quot;it&#39;s better not to freeze-in an implicit preference and use <code>newtype</code>s to <i>express</i> each possible choice <i>explicitly,</i> with no runtime cost&quot;."}], "tags": [], "owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "is_accepted": true, "score": 25, "last_activity_date": 1528616987, "last_edit_date": 1528616987, "creation_date": 1445679790, "answer_id": 33316715, "question_id": 33316533, "link": "https://stackoverflow.com/questions/33316533/whats-the-difference-between-the-data-and-type-keywords/33316715#33316715", "title": "What&#39;s the difference between the &quot;data&quot; and &quot;type&quot; keywords?", "body": "<p><code>type</code> declares a <em>type synonym</em>. A type synonym is a new name for an existing type. For example, this is how <code>String</code> is defined <a href=\"http://hackage.haskell.org/package/base-4.8.1.0/docs/src/GHC.Base.html#String\" rel=\"noreferrer\">in the standard library</a>:</p>\n\n<pre><code>type String = [Char]\n</code></pre>\n\n<p><code>String</code> is another name for a list of <code>Char</code>s. GHC will replace all usages of <code>String</code> in your program with <code>[Char]</code> at compile-time.</p>\n\n<p>To be clear, a <code>String</code> <em>literally is</em> a list of <code>Char</code>s. It's just an alias. You can use all the standard list functions on <code>String</code> values:</p>\n\n<pre><code>-- length :: [a] -&gt; Int\nghci&gt; length \"haskell\"\n7\n-- reverse :: [a] -&gt; [a]\nghci&gt; reverse \"functional\"\n\"lanoitcnuf\"\n</code></pre>\n\n<hr>\n\n<p><code>data</code> declares a <em>new data type</em>, which, unlike a type synonym, is different from any other type. Data types have a number of <em>constructors</em> defining the possible cases of your type. For example, this is how <code>Bool</code> is defined <a href=\"http://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Bool.html#t:Bool\" rel=\"noreferrer\">in the standard library</a>:</p>\n\n<pre><code>data Bool = False | True\n</code></pre>\n\n<p>A <code>Bool</code> value can be either <code>True</code> or <code>False</code>. Data types support <em>pattern matching</em>, allowing you to perform a runtime case-analysis on a value of a data type.</p>\n\n<pre><code>yesno :: Bool -&gt; String\nyesno True = \"yes\"\nyesno False = \"no\"\n</code></pre>\n\n<p><code>data</code> types can have multiple constructors (as with <code>Bool</code>), can be parameterised by other types, can contain other types inside them, and can recursively refer to themselves. Here's a model of exceptions which demonstrates this; an <code>Error a</code> contains an error message of type <code>a</code>, and possibly the error which caused it.</p>\n\n<pre><code>data Error a = Error { value :: a, cause :: Maybe (Error a) }\ntype ErrorWithMessage = Error String\n\nmyError1, myError2 :: ErrorWithMessage\nmyError1 = Error \"woops\" Nothing\nmyError2 = Error \"myError1 was thrown\" (Just myError1)\n</code></pre>\n\n<p>It's important to realise that <code>data</code> declares a new type which is apart from any other type in the system. If <code>String</code> had been declared as a <code>data</code> type <em>containing</em> a list of <code>Char</code>s (rather than a type synonym), you wouldn't be able to use any list functions on it.</p>\n\n<pre><code>data String = MkString [Char]\nmyString = MkString ['h', 'e', 'l', 'l', 'o']\nmyReversedString = reverse myString  -- type error\n</code></pre>\n\n<hr>\n\n<p>There's one more variety of type declaration: <code>newtype</code>. This works rather like a <code>data</code> declaration - it introduces a new data type separate from any other type, and can be pattern matched - except you are restricted to a single constructor with a single field. In other words, a <code>newtype</code> is a <code>data</code> type which wraps up an existing type.</p>\n\n<p>The important difference is the <em>cost</em> of a <code>newtype</code>: the compiler promises that a <code>newtype</code> is represented in the same way as the type it wraps. There's no runtime cost to packing or unpacking a <code>newtype</code>. This makes <code>newtype</code>s useful for making <em>administrative</em> (rather than <em>structural</em>) distinctions between values.</p>\n\n<p><code>newtype</code>s interact well with type classes. For example, consider <code>Monoid</code>, the class of types with a way to combine elements (<code>mappend</code>) and a special 'empty' element (<code>mempty</code>). <code>Int</code> can be made into a <code>Monoid</code> in many ways, including addition with 0 and multiplication with 1. How can we choose which one to use for a possible <code>Monoid</code> instance of <code>Int</code>? It's better not to express a preference, and use <code>newtype</code>s to enable either usage with no runtime cost. Paraphrasing <a href=\"http://hackage.haskell.org/package/base-4.8.1.0/docs/src/Data.Monoid.html#Sum\" rel=\"noreferrer\">the standard library</a>:</p>\n\n<pre><code>-- introduce a type Sum with a constructor Sum which wraps an Int, and an extractor getSum which gives you back the Int\nnewtype Sum = Sum { getSum :: Int }\ninstance Monoid Sum where\n    (Sum x) `mappend` (Sum y) = Sum (x + y)\n    mempty = Sum 0\n\nnewtype Product = Product { getProduct :: Int }\ninstance Monoid Product where\n    (Product x) `mappend` (Product y) = Product (x * y)\n    mempty = Product 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 2, "last_activity_date": 1445680325, "creation_date": 1445680325, "answer_id": 33316793, "question_id": 33316533, "link": "https://stackoverflow.com/questions/33316533/whats-the-difference-between-the-data-and-type-keywords/33316793#33316793", "title": "What&#39;s the difference between the &quot;data&quot; and &quot;type&quot; keywords?", "body": "<p><code>type</code> works just like <code>let</code>: it allows you to give a re-usable name to something, but that something will always work just as if you had inlined the definition. So</p>\n\n<pre><code>type \u211d = Double\n\nf :: \u211d -&gt; \u211d -&gt; \u211d\nf x y = let x2 = x^2\n        in x2 + y\n</code></pre>\n\n<p>behaves exactly the same way as</p>\n\n<pre><code>f' :: Double -&gt; Double -&gt; Double\nf' x y = x^2 + y\n</code></pre>\n\n<p>as in: you can anywhere in your code replace <code>f</code> with <code>f'</code> and vice versa; nothing would change.</p>\n\n<p>OTOH, both <code>data</code> and <code>newtype</code> create an opaque <em>abstraction</em>. They are more like a class constructor in OO: even though some value is <em>implemented</em> simply in terms of a single number, it doesn't necessarily <em>behave</em> like such a number. For instance,</p>\n\n<pre><code>newtype Logscaled\u211d = LogScaled\u211d { getLogscaled :: Double }\n\ninstance Num LogScaled\u211d where\n  LogScaled\u211d a + LogScaled\u211d b = LogScaled\u211d $ a*b\n  LogScaled\u211d a - LogScaled\u211d b = LogScaled\u211d $ a/b\n  LogScaled\u211d a * LogScaled\u211d b = LogScaled\u211d $ a**b\n</code></pre>\n\n<p>Here, although <code>Logscaled\u211d</code> is data-wise still just a <code>Double</code> number, it clearly behaves different from <code>Double</code>.</p>\n"}], "owner": {"reputation": 347, "user_id": 5362936, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/156690511341811/picture?type=large", "display_name": "Lin Jiayin", "link": "https://stackoverflow.com/users/5362936/lin-jiayin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3069, "favorite_count": 5, "accepted_answer_id": 33316715, "answer_count": 3, "score": 17, "last_activity_date": 1560968993, "creation_date": 1445678485, "last_edit_date": 1560968993, "question_id": 33316533, "link": "https://stackoverflow.com/questions/33316533/whats-the-difference-between-the-data-and-type-keywords", "title": "What&#39;s the difference between the &quot;data&quot; and &quot;type&quot; keywords?", "body": "<p>The <code>data</code> and <code>type</code> keywords always confuse me. </p>\n\n<p>I want to know what is the difference between <code>data</code> and <code>type</code> and how to use them. </p>\n"}, {"tags": ["windows", "haskell", "yesod"], "owner": {"reputation": 1106, "user_id": 4197293, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd3542179c9735316f934724992b7ce?s=128&d=identicon&r=PG", "display_name": "jeiea", "link": "https://stackoverflow.com/users/4197293/jeiea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "closed_date": 1457174623, "answer_count": 0, "score": 2, "last_activity_date": 1445672572, "creation_date": 1445671821, "last_edit_date": 1445672572, "question_id": 33315685, "link": "https://stackoverflow.com/questions/33315685/working-https-server-in-haskell", "closed_reason": "Needs more focus", "title": "Working HTTPS Server in Haskell", "body": "<p>I'm trying to make simple https server in haskell, and possibly due to my ignorance, it was feeled hard to me.</p>\n\n<p>The following is <em>compilable</em> code snippet that I reached. (and maybe not working)</p>\n\n<pre><code>import Application () -- for YesodDispatch instance\nimport Foundation\nimport Yesod.Core\n\nimport Network.Wai.Handler.Warp\nimport Network.Wai.Handler.WarpTLS\n\nmain :: IO ()\nmain = do\n  app &lt;- toWaiApp App\n  runTLS tSet defaultSettings app\n\ntSet = tlsSettings \"server.crt\" \"server.pem\"</code></pre>\n\n<p>It's just part of Main.hs of <code>stack new proj yesod-minimal</code> project, with warp-tls dependencies.</p>\n\n<p>But builded excutable had some problems,</p>\n\n<ul>\n<li>Not accissible by web browser due to TLS error.</li>\n<li>CPU usage go high (like infinite loop) on some request.</li>\n</ul>\n\n<p>I wonder where or what is I went wrong. Followings are questions.</p>\n\n<ol>\n<li>how can I deal with TLS error. The following is curl error log.</li>\n</ol>\n\n<pre><code>cmd>curl https://localhost:3000 --insecure -v\n* Rebuilt URL to: https://localhost:3000/\n*   Trying ::1...\n*   Trying 127.0.0.1...\n* Connected to localhost (127.0.0.1) port 3000 (#0)\n* ALPN, offering http/1.1\n* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH\n* TLSv1.2 (OUT), TLS header, Certificate Status (22):\n* TLSv1.2 (OUT), TLS handshake, Client hello (1):\n* TLSv1.2 (IN), TLS handshake, Server hello (2):\n* TLSv1.2 (IN), TLS handshake, Certificate (11):\n* TLSv1.2 (IN), TLS handshake, Server key exchange (12):\n* TLSv1.2 (OUT), TLS alert, Server hello (2):\n* error:04091077:rsa routines:INT_RSA_VERIFY:wrong signature length\n* Closing connection 0\n* TLSv1.2 (OUT), TLS alert, Client hello (1):\ncurl: (35) error:04091077:rsa routines:INT_RSA_VERIFY:wrong signature length\n</code></pre>\n\n<p>executable log</p>\n\n<pre><code>24/Oct/2015:15:50:15 +0900 [Info#yesod-core] Application launched @(yesod_2EJXksqBDOz5UARIVdQquS:Yesod.Core.Dispatch .\\Yesod\\Core\\Dispatch.hs:157:11)\n.exe: HandshakeFailed (Error_Misc \"user error (unexpected type received. expecting handshake and got: Alert [(AlertLevel_Fatal,DecryptError)])\")\n.exe: HandshakeFailed (Error_Protocol (\"fallback is not allowed\",True,InappropriateFallback))\n.exe: HandshakeFailed (Error_Misc \"user error (unexpected type received. expecting handshake and got: Alert [(AlertLevel_Fatal,DecryptError)])\")\n.exe: HandshakeFailed (Error_Protocol (\"fallback is not allowed\",True,InappropriateFallback))</code></pre>\n\n<ol start=\"2\">\n<li><p>How treat CPU high phenomenon from unknown reason. <a href=\"http://i.stack.imgur.com/2BWVP.png\" rel=\"nofollow\">cpu usage images</a>\nI don't know what debug info would be helpful in this case.</p></li>\n<li><p>Current GHC 7.10.2 can fire compile time error due to windows' command line length limitation, and I was suffered from that. I tried setting STACK_ROOT and shorting project path, but yesod-simple template project can't be built.\nThere's another workthrough or hack that I can try? I even tried manually building ghc 7.11 in git repo, but it seems stack don't support use of newer GHC.</p></li>\n<li><p>A little off from subject, <code>toWaiApp</code> function in above code, I believed the function's existence, but it was hard to find function's name. It came out that yesod maintains stackage documentation rather than hackage's. Is there any convenient method like python module docs?</p></li>\n<li><p>Shouldn't I have selected haskell? It's far from something performance critical, but is there something critical like flaw of Haskell's TLS implementation or lack of build tool's support for windows?</p></li>\n</ol>\n"}, {"tags": ["haskell", "ghc", "abstract-syntax-tree", "scrap-your-boilerplate"], "comments": [{"owner": {"reputation": 2322, "user_id": 687749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07bff365e74ca1c3db3a6dc19c8716d2?s=128&d=identicon&r=PG", "display_name": "bzn", "link": "https://stackoverflow.com/users/687749/bzn"}, "edited": false, "score": 0, "creation_date": 1445677816, "post_id": 33315596, "comment_id": 54431048, "body": "When you say <code>It complains that there are too many instances for id</code>, do you mean that it doesn&#39;t compile? It just loaded your code into ghci and it compiles without problems. I&#39;m using ghc-7.10.1 (so not exactly your version) and syb-0.6 (it also compiles with syb-0.5.1)."}, {"owner": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "reply_to_user": {"reputation": 2322, "user_id": 687749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07bff365e74ca1c3db3a6dc19c8716d2?s=128&d=identicon&r=PG", "display_name": "bzn", "link": "https://stackoverflow.com/users/687749/bzn"}, "edited": false, "score": 0, "creation_date": 1445678230, "post_id": 33315596, "comment_id": 54431151, "body": "@bzn Well it does compile but only because it&#39;s lazy. When you try to evaluate <code>funcs</code> it blows up. I added an example session in the question."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445699539, "post_id": 33315596, "comment_id": 54437359, "body": "Your function compiles and works just fine. <code>length funcs</code> doesn&#39;t work simply because the output, <code>Int</code>, doesn&#39;t mention the type variable <code>id</code>. <code>id</code> is being eliminated by the type of <code>length</code>. Therefore, any type class constraints on that type variable must be resolved, or they would escape their scope. Basically, <code>length</code> doesn&#39;t know how to instantiate <code>id</code>. Simply give it any monomorphic type at the call site: <code>length (funcs :: [HsBindLR X X])</code>. Note that this isn&#39;t generally a problem in real code... usually there is other type information to help the compiler deduce the correct type."}, {"owner": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445760712, "post_id": 33315596, "comment_id": 54452227, "body": "@user2407038 You&#39;re right, I see now. However in my current code the correct type is needed and I didn&#39;t know about <code>RdrName</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "edited": false, "score": 0, "creation_date": 1445760578, "post_id": 33317058, "comment_id": 54452199, "body": "Thanks! This is exactly what I needed to know!"}], "tags": [], "owner": {"reputation": 11612, "user_id": 204218, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3ee571049ff6ff0361be53e554b877e6?s=128&d=identicon&r=PG", "display_name": "adamse", "link": "https://stackoverflow.com/users/204218/adamse"}, "is_accepted": true, "score": 1, "last_activity_date": 1445682509, "last_edit_date": 1445682509, "creation_date": 1445682007, "answer_id": 33317058, "question_id": 33315596, "link": "https://stackoverflow.com/questions/33315596/visiting-ghc-ast-with-syb/33317058#33317058", "title": "Visiting GHC AST with SYB", "body": "<p>The GHC AST is parametrised on the type of names used in the tree: the parser outputs an AST with <a href=\"https://ghc.haskell.org/trac/ghc/wiki/Commentary/Compiler/RdrNameType\" rel=\"nofollow\"><code>RdrName</code></a> names which it seems you're working with. The <a href=\"https://ghc.haskell.org/trac/ghc/wiki/Commentary/Compiler/HscMain\" rel=\"nofollow\">GHC Commentary</a> and <a href=\"http://haddock.stackage.org/lts-3.10/ghc-7.10.2/RdrName.html#name_types\" rel=\"nofollow\">the Haddocks</a> have more information.</p>\n\n<p>You might have more luck if you tell the compiler that you are working with <code>HsBindLR RdrName RdrName</code>.</p>\n\n<p>Like this:</p>\n\n<pre><code>import Data.Generics\nimport GHC\nimport Outputable  -- from the GHC package\n\nfuncs :: (Data from, Typeable from) =&gt; from -&gt; [GHC.HsBindLR RdrName RdrName]\nfuncs ast = everything (++) (mkQ [] (\\fun@(GHC.FunBind {}) -&gt; [fun])) ast\n</code></pre>\n"}], "owner": {"reputation": 7558, "user_id": 448496, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BZtrd.png?s=128&g=1", "display_name": "rubik", "link": "https://stackoverflow.com/users/448496/rubik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 1, "accepted_answer_id": 33317058, "answer_count": 1, "score": 2, "last_activity_date": 1445682509, "creation_date": 1445671078, "last_edit_date": 1445678300, "question_id": 33315596, "link": "https://stackoverflow.com/questions/33315596/visiting-ghc-ast-with-syb", "title": "Visiting GHC AST with SYB", "body": "<p>I wrote a program that visited the AST with Haskell-src-exts. I'm trying to convert it to use the GHC API. The former uses Uniplate, while for the latter it seems that unfortunately I'm forced with SYB (the documentation is horribly scarce).</p>\n\n<p>Here is the original code:</p>\n\n<pre><code>module Argon.Visitor (funcsCC)\n    where\n\nimport Data.Data (Data)\nimport Data.Generics.Uniplate.Data (childrenBi, universeBi)\nimport Language.Haskell.Exts.Syntax\nimport Argon.Types (ComplexityBlock(..))\n\n\n-- | Compute cyclomatic complexity of every function binding in the given AST.\nfuncsCC :: Data from =&gt; from -&gt; [ComplexityBlock]\nfuncsCC ast = map funCC [matches | FunBind matches &lt;- universeBi ast]\n\nfunCC :: [Match] -&gt; ComplexityBlock\nfunCC [] = CC (0, 0, \"&lt;unknown&gt;\", 0)\nfunCC ms@(Match (SrcLoc _ l c) n _ _ _ _:_) = CC (l, c, name n, complexity ms)\n    where name (Ident s)   = s\n          name (Symbol s) = s\n\nsumWith :: (a -&gt; Int) -&gt; [a] -&gt; Int\nsumWith f = sum . map f\n\ncomplexity :: Data from =&gt; from -&gt; Int\ncomplexity node = 1 + visitMatches node + visitExps node\n\nvisitMatches :: Data from =&gt; from -&gt; Int\nvisitMatches = sumWith descend . childrenBi\n    where descend :: [Match] -&gt; Int\n          descend x = length x - 1 + sumWith visitMatches x\n\nvisitExps :: Data from =&gt; from -&gt; Int\nvisitExps = sumWith inspect . universeBi\n    where inspect e = visitExp e + visitOp e\n\nvisitExp :: Exp -&gt; Int\nvisitExp (If {})        = 1\nvisitExp (MultiIf alts) = length alts - 1\nvisitExp (Case _ alts)  = length alts - 1\nvisitExp (LCase alts)   = length alts - 1\nvisitExp _ = 0\n\nvisitOp :: Exp -&gt; Int\nvisitOp (InfixApp _ (QVarOp (UnQual (Symbol op))) _) =\n  case op of\n    \"||\" -&gt; 1\n    \"&amp;&amp;\" -&gt; 1\n    _    -&gt; 0\nvisitOp _ = 0\n</code></pre>\n\n<p>I need to visit function bindings, matches and expressions. This is what I managed to write (not working):</p>\n\n<pre><code>import Data.Generics\nimport qualified GHC\nimport Outputable  -- from the GHC package\n\nfuncs :: (Data id, Typeable id, Outputable id, Data from, Typeable from) =&gt; from -&gt; [GHC.HsBindLR id id]\nfuncs ast = everything (++) (mkQ [] (\\fun@(GHC.FunBind {}) -&gt; [fun])) ast\n</code></pre>\n\n<p>It complains that there are too many instances for <code>id</code>, but I don't know what the heck it is. The relevant GHC module is:\n<a href=\"http://haddock.stackage.org/lts-3.10/ghc-7.10.2/HsBinds.html\" rel=\"nofollow\">http://haddock.stackage.org/lts-3.10/ghc-7.10.2/HsBinds.html</a></p>\n\n<p>I'm getting insane from this. The goal is to count complexity (as you can see in the original code). I'd like to switch to the GHC API because it uses the same parser as the compiler, so it can parse every module without worrying about extensions.</p>\n\n<p><strong>EDIT</strong>: Here is why the current code does not work:</p>\n\n<pre><code>\u03bb&gt; :m +Language.Haskell.GHC.ExactPrint.Parsers GHC Data.Generics Outputable\n\u03bb&gt; r &lt;- Language.Haskell.GHC.ExactPrint.parseModule src/Argon/Visitor.hs\n\u03bb&gt; let ast = snd $ (\\(Right t) -&gt; t) r\n.&gt; \n\u03bb&gt; :t ast\nast :: Located (HsModule RdrName)\n\u03bb&gt; let funcs = everything (++) (mkQ [] (un@(FunBind _ _ _ _ _ _) -&gt; [fun])) ast :: (Data id, Typeable id, Outputable id) =&gt; [HsBindLR id id]\n.&gt; \n\u03bb&gt; length funcs\n\n&lt;interactive&gt;:12:8:\n    No instance for (Data id0) arising from a use of \u2018funcs\u2019\n    The type variable \u2018id0\u2019 is ambiguous\n    Note: there are several potential instances:\n      instance Data aeson-0.8.0.2:Data.Aeson.Types.Internal.Value\n        -- Defined in \u2018aeson-0.8.0.2:Data.Aeson.Types.Internal\u2019\n      instance Data attoparsec-0.12.1.6:Data.Attoparsec.Number.Number\n        -- Defined in \u2018attoparsec-0.12.1.6:Data.Attoparsec.Number\u2019\n      instance Data a =&gt; Data (Data.Complex.Complex a)\n        -- Defined in \u2018Data.Complex\u2019\n      ../..plus 367 others\n    In the first argument of \u2018length\u2019, namely \u2018funcs\u2019\n    In the expression: length funcs\n    In an equation for \u2018it\u2019: it = length funcs\n</code></pre>\n"}, {"tags": ["haskell", "frp", "netwire"], "answers": [{"comments": [{"owner": {"reputation": 7504, "user_id": 154744, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acb0a7915c4da197560413a262d31b18?s=128&d=identicon&r=PG", "display_name": "bstamour", "link": "https://stackoverflow.com/users/154744/bstamour"}, "edited": false, "score": 0, "creation_date": 1445709484, "post_id": 33316336, "comment_id": 54440680, "body": "Thanks. I think my issue is more with understanding the interplay between events and wires. Do you happen to know of any good reference material regarding FRP? Doesn&#39;t have to be netwire-specific."}, {"owner": {"reputation": 2322, "user_id": 687749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07bff365e74ca1c3db3a6dc19c8716d2?s=128&d=identicon&r=PG", "display_name": "bzn", "link": "https://stackoverflow.com/users/687749/bzn"}, "reply_to_user": {"reputation": 7504, "user_id": 154744, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acb0a7915c4da197560413a262d31b18?s=128&d=identicon&r=PG", "display_name": "bstamour", "link": "https://stackoverflow.com/users/154744/bstamour"}, "edited": false, "score": 1, "creation_date": 1445726379, "post_id": 33316336, "comment_id": 54445843, "body": "Search for talks and papers by Conal Elliot to learn about the meaning of FRP. Also, I&#39;d suggest to also look into different FRP approaches. <code>netwire</code> uses the concept of inhibition to implement switching between wires. The original FRP formulation of switching (<code>switch :: Behavior a -&gt; Event (Behavior a) -&gt; Behavior a</code>) is actually quite simple (maybe too simple). Something like <code>reactive-banana</code> comes quite close to this original formulation."}], "tags": [], "owner": {"reputation": 2322, "user_id": 687749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07bff365e74ca1c3db3a6dc19c8716d2?s=128&d=identicon&r=PG", "display_name": "bzn", "link": "https://stackoverflow.com/users/687749/bzn"}, "is_accepted": true, "score": 3, "last_activity_date": 1445677041, "creation_date": 1445677041, "answer_id": 33316336, "question_id": 33314543, "link": "https://stackoverflow.com/questions/33314543/switching-in-netwire/33316336#33316336", "title": "Switching in Netwire", "body": "<p>The problem lies within <code>now . mycont</code>. <code>now</code> directly turns any <code>a</code> into an <code>Event a</code>, thus <code>switch</code> directly switches to the <code>mycont</code> wire. This wire inhibits for 10 seconds and then outputs <code>20</code>.\nTo achieve the effect you want, you could use the <code>at</code> function:</p>\n\n<pre><code>import Prelude hiding ((.))\nimport Control.Wire\n\nmywire :: (Monad m, HasTime t s) =&gt; Wire s () m a Int\nmywire = pure 10\n\nmycont :: (Monad m, HasTime t s) =&gt; Wire s () m a (Event (Wire s () m a Int))\nmycont = at 10 . pure (pure 20)\n\nmything :: (Monad m, HasTime t s) =&gt; Wire s () m a (Int, Event (Wire s () m a Int))\nmything = (,) &lt;$&gt; mywire &lt;*&gt; mycont\n\nmainwire :: (Monad m, HasTime t s) =&gt; Wire s () m a Int\nmainwire = switch mything\n\nmain :: IO ()\nmain = testWire clockSession_ mainwire\n</code></pre>\n"}], "owner": {"reputation": 7504, "user_id": 154744, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acb0a7915c4da197560413a262d31b18?s=128&d=identicon&r=PG", "display_name": "bstamour", "link": "https://stackoverflow.com/users/154744/bstamour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 33316336, "answer_count": 1, "score": 2, "last_activity_date": 1445677041, "creation_date": 1445660744, "question_id": 33314543, "link": "https://stackoverflow.com/questions/33314543/switching-in-netwire", "title": "Switching in Netwire", "body": "<p>I've been looking for a while, and I think I'm misunderstanding something fundamental regarding switching. Consider the following code</p>\n\n<pre><code>mywire :: HasTime t s =&gt; Wire s () IO a Int\nmywire = pure 10\n\nmycont :: HasTime t s =&gt; Wire s () IO a (Wire s () IO a Int)\nmycont = after 10 . pure (pure 20)\n\nmycont' :: HasTime t s =&gt; Wire s () IO a (Event (Wire s () IO a Int))\nmycont' = now . mycont\n\nmything :: HasTime t s =&gt; Wire s () IO a (Int, Event (Wire s () IO a Int))\nmything = (,) &lt;$&gt; mywire &lt;*&gt; mycont'\n\nmainwire :: (Monad m, HasTime t s) =&gt; Wire s () m a Int\nmainwire = switch mything\n\nmain :: IO ()\nmain = testWire clockSession_ mainwire\n</code></pre>\n\n<p>Note I'm being extra verbose here just to get the feeling for some of the types involved. What I'm expecting for output is the number 10 repeated for 10 seconds, and then I expect <code>mainwire</code> to switch over to the event returned from <code>mything</code> (because the event from <code>mything</code> is delayed by 10 seconds.) What I'm seeing instead is the main wire inhibiting for 10 seconds, followed by 20. Why am I not seeing the 10's being outputted initially before the switch? I think I'm misunderstanding how switching is supposed to work, and any clarification would be appreciated. Thank you.</p>\n"}, {"tags": ["haskell", "composition"], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 5, "last_activity_date": 1445652350, "creation_date": 1445652350, "answer_id": 33313785, "question_id": 33313556, "link": "https://stackoverflow.com/questions/33313556/is-it-possible-to-define-patterns-of-composition-in-functions-or-functors/33313785#33313785", "title": "Is it possible to define patterns of composition in functions or functors?", "body": "<p>Sure, just keep a bit of state telling whether to apply <code>negate</code> to the current element or not. Thus:</p>\n\n<pre><code>f = mapM $ \\x_ -&gt; do\n    x &lt;- gets (\\b -&gt; if b then x_ else negate x_)\n    if x &gt;= 0\n        then return (g x)\n        else modify not &gt;&gt; return (h x)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 2, "creation_date": 1445654812, "post_id": 33313982, "comment_id": 54426795, "body": "Sounds like <code>mapAccumL</code>."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 2, "creation_date": 1445658085, "post_id": 33313982, "comment_id": 54427280, "body": "@user3237465 ...and <code>mapAccumL</code> is <code>mapM</code> for the <code>State</code> monad. And, pow! We&#39;re back at monads. Only question is what level you&#39;re abstracting at. &quot;Without monads&quot; might be a good thing, or it might not -- depends a lot on what your goals are."}, {"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1445661334, "post_id": 33313982, "comment_id": 54427782, "body": "@Daniel Wagner, I thought that a version with <code>mapAccumL</code> would be simpler, but I was <a href=\"http://ideone.com/TmGEx5\" rel=\"nofollow noreferrer\">wrong</a>. The monadic version is more descriptive."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1445698759, "post_id": 33313982, "comment_id": 54437105, "body": "&quot;Without monads&quot; just meant without the Haskell Monad abstraction. Logically speaking, the <code>go</code> function could be written with the type <code>[a] -&gt; Reader Bool [a]</code>. The logic of the two functions would be the same. The point of this answer, mainly, was to show that the desired semantics could be achieved with minimal modification to the original code."}], "tags": [], "owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "is_accepted": true, "score": 5, "last_activity_date": 1445654513, "creation_date": 1445654513, "answer_id": 33313982, "question_id": 33313556, "link": "https://stackoverflow.com/questions/33313556/is-it-possible-to-define-patterns-of-composition-in-functions-or-functors/33313982#33313982", "title": "Is it possible to define patterns of composition in functions or functors?", "body": "<p>You can solve this without any monads, since the logic is quite simple:</p>\n\n<pre><code>f g h = go False where \n  go _ [] = [] \n  go b (x':xs)\n    | x &gt;= 0    = g x : go b xs \n    | otherwise = h x : go (not b) xs\n      where x = (if b then negate else id) x'\n</code></pre>\n\n<p>The body of the <code>go</code> function is almost identical to that of your original <code>f</code> function. The only difference is that <code>go</code> decides whether the element should be negated or not based on the boolean value passed to it from previous calls. </p>\n"}], "owner": {"reputation": 418, "user_id": 2124786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/07784bb9df5501d79fe7d6692aa56262?s=128&d=identicon&r=PG", "display_name": "enrique", "link": "https://stackoverflow.com/users/2124786/enrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 33313982, "answer_count": 2, "score": 4, "last_activity_date": 1445654513, "creation_date": 1445649646, "question_id": 33313556, "link": "https://stackoverflow.com/questions/33313556/is-it-possible-to-define-patterns-of-composition-in-functions-or-functors", "title": "Is it possible to define patterns of composition in functions or functors?", "body": "<p>Consider the following situation. I define a function to process a list of elements by the typical way of doing an operation on the head and recalling the function over the rest of the list. But under certain condition of the element (being negative, being a special character, ...) I change sign on the rest of the list before continuing. Like this: </p>\n\n<pre><code>f [] = []\nf (x : xs) \n    | x &gt;= 0      = g x : f xs\n    | otherwise   = h x : f (opposite xs)\n\nopposite [] = []\nopposite (y : ys) = negate y : opposite ys\n</code></pre>\n\n<p>As <code>opposite (opposite xs) = xs</code>, I become to the situation of redundant opposite operations, accumulating <code>opposite . opposite . opposite ...</code>. </p>\n\n<p>It happens with other operations instead of <code>opposite</code>, any such that the composition with itself is the identity, like <code>reverse</code>.</p>\n\n<p>Is it possible to overcome this situation using functors / monads / applicatives / arrows? (I don't understand well those concepts). What I would like is to be able of defining a property, or a composition pattern, like this: </p>\n\n<pre><code>opposite . opposite  = id    -- or, opposite (opposite y) = y\n</code></pre>\n\n<p>in order that the compiler or interpreter avoids to calculate the opposite of the opposite  (it is possible and simple (native) in some concatenative languages).</p>\n"}, {"tags": ["haskell", "if-statement", "types", "type-conversion", "conditional"], "comments": [{"owner": {"reputation": 2838, "user_id": 3614521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AR81q.png?s=128&g=1", "display_name": "Mephy", "link": "https://stackoverflow.com/users/3614521/mephy"}, "edited": false, "score": 4, "creation_date": 1445639082, "post_id": 33312250, "comment_id": 54423443, "body": "Your desired output doesn&#39;t (cannot) type check as-is. You could possibly change it to an ADT, but the original code is way better."}, {"owner": {"reputation": 6159, "user_id": 754705, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/942fe51aac5dc523f0305439fa9a6e3d?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/754705/michael"}, "edited": false, "score": 1, "creation_date": 1445639394, "post_id": 33312250, "comment_id": 54423526, "body": "A list like <code>[(1,2),(3,2)]</code> has type <code>Num a =&gt; [(a,a)]</code>. But <code>[(4,1),(3,2),3]</code> just doesn&#39;t typecheck in haskell."}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 1, "creation_date": 1445639415, "post_id": 33312250, "comment_id": 54423536, "body": "I&#39;m voting to close this question because it doesn&#39;t really seem to have an <i>answer</i>, other than &quot;you can&#39;t do that in a statically typed language&quot; (or indeed &quot;that&#39;s the point of static types&quot;). Please <a href=\"http://stackoverflow.com/posts/33312250/edit\">edit your question</a> if you feel you can clarify what you&#39;re asking."}, {"owner": {"reputation": 49959, "user_id": 866915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/09242131d6e17cbbe31e8547514da6e5?s=128&d=identicon&r=PG", "display_name": "ErikR", "link": "https://stackoverflow.com/users/866915/erikr"}, "edited": false, "score": 1, "creation_date": 1445639456, "post_id": 33312250, "comment_id": 54423551, "body": "Why do you want to have such a list? Tell us how you are going to use it, and perhaps we can give you some alternatives."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1445641147, "post_id": 33312250, "comment_id": 54424047, "body": "You need a type encompassing both kinds of values that can be put in the list. E.g. <code>Either Int (Int,Int)</code> or a custom algebraic type. You will need to wrap both kinds of values in their related constructor."}, {"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "reply_to_user": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1445643508, "post_id": 33312250, "comment_id": 54424694, "body": "@Benjamin Hodgson, sure we can do this with static types \u2014 they just need to be dependent. But even in a dependently typed language I would use <code>Either Int (Int, Int)</code>."}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "reply_to_user": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 0, "creation_date": 1445644731, "post_id": 33312250, "comment_id": 54424994, "body": "@user3237465 Sure, you could do it with a sigma type (which I suspect would end up being isomorphic to <code>Either Int (Int, Int)</code> anyway?). But I don&#39;t think the question was really looking for that sort of answer ;)"}, {"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "reply_to_user": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1445647330, "post_id": 33312250, "comment_id": 54425518, "body": "@Benjamin Hodgson, <a href=\"http://lpaste.net/143735\" rel=\"nofollow noreferrer\">not necessarily Sigmas</a>. Anyway, I&#39;d just wanted to say that the question is not inappropriate."}], "answers": [{"comments": [{"owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "edited": false, "score": 0, "creation_date": 1445678577, "post_id": 33313415, "comment_id": 54431226, "body": "Ah, yes. Forgot that lists in Haskell can&#39;t mix types."}], "tags": [], "owner": {"reputation": 28456, "user_id": 1094403, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3770aa7eae5c211921493abd0d2c9f5a?s=128&d=identicon&r=PG", "display_name": "Luis Casillas", "link": "https://stackoverflow.com/users/1094403/luis-casillas"}, "is_accepted": true, "score": 3, "last_activity_date": 1445648066, "creation_date": 1445648066, "answer_id": 33313415, "question_id": 33312250, "link": "https://stackoverflow.com/questions/33312250/for-all-statements-in-haskell/33313415#33313415", "title": "&quot;For all&quot; statements in Haskell", "body": "<blockquote>\n  <p>BUT this doesn't work. I think because the then and else clauses have different types, and unfortunately you can't piece-wise define the (co)domain of your functions. How might I go about getting past this issue?</p>\n</blockquote>\n\n<p>Your diagnosis is right; the <code>then</code> and <code>else</code> must have the same type.  There's no \"getting past this issue,\" strictly speaking.  Whatever solution you adopt has to use same type in both branches of the conditional.  One way would be to design a custom data type that encodes the possibilities that you want, and use that instead.  Something like this would work:</p>\n\n<pre><code>-- | A 'Run' of @a@ is either 'One' @a@ or 'Many' of them (with the number\n-- as an argument to the 'Many' constructor).\ndata Run a = One a | Many Int a\n</code></pre>\n\n<p>But to tell you the truth, I don't think this would really gain you anything.  I'd stick to the <code>(Int, a)</code> encoding rather than going to this <code>Run</code> type.</p>\n"}], "owner": {"reputation": 755, "user_id": 5323311, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh5.googleusercontent.com/-v8SDvlJNQBU/AAAAAAAAAAI/AAAAAAAAAD4/IT0tDo9PwT4/photo.jpg?sz=128", "display_name": "Tshimanga", "link": "https://stackoverflow.com/users/5323311/tshimanga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 33313415, "answer_count": 1, "score": 0, "last_activity_date": 1445648066, "creation_date": 1445638883, "question_id": 33312250, "link": "https://stackoverflow.com/questions/33312250/for-all-statements-in-haskell", "title": "&quot;For all&quot; statements in Haskell", "body": "<p>I'm building comfort going through some Haskell toy problems and I've written the following speck of code</p>\n\n<pre><code>multipOf :: [a] -&gt; (Int, a)\nmultipOf x = (length x, head x)\ngmcompress x = (map multipOf).group $ x\n</code></pre>\n\n<p>which successfully preforms the following operation</p>\n\n<pre><code>gmcompress [1,1,1,1,2,2,2,3] = [(4,1),(3,2),(1,3)]\n</code></pre>\n\n<p>Now I want this function to instead of telling me that an element of the set had multiplicity 1, to just leave it alone. So to give the result [(4,1),(3,2),3] instead. It be great if there were a way to say (either during or after turning the list into one of pairs) for all elements of multiplicity 1, leave as just an element; else, pair. My initial, naive, thought was to do the following.</p>\n\n<pre><code>multipOf :: [a] -&gt; (Int, a)\nmultipOf x = if length x = 1 then head x else (length x, head x)\ngmcompress x = (map multipOf).group $ x\n</code></pre>\n\n<p>BUT this doesn't work. I think because the <code>then</code> and <code>else</code> clauses have different types, and unfortunately you can't piece-wise define the (co)domain of your functions. How might I go about getting past this issue?</p>\n"}, {"tags": ["multithreading", "loops", "haskell", "freeze"], "comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 3, "creation_date": 1445638136, "post_id": 33311980, "comment_id": 54423152, "body": "All of these functions are inefficient busy loops, except the last STM version. Their design simply makes them hang. This is part of why STM is so nice: you get what you expect, as opposed to having to worry about temporal concerns. I would expect that <code>hFlush stdout</code> is just acting as a random delay. Tests confirm, replacing <code>hFlush stdout</code> with <code>randomRIO (1, 10^3) &gt;&gt;= delay</code> produces the same behaviour."}, {"owner": {"reputation": 790, "user_id": 334632, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/SL2Mb.jpg?s=128&g=1", "display_name": "Joe Hillenbrand", "link": "https://stackoverflow.com/users/334632/joe-hillenbrand"}, "edited": false, "score": 0, "creation_date": 1445638253, "post_id": 33311980, "comment_id": 54423188, "body": "There&#39;s a <code>print</code> in <code>monitor</code>"}, {"owner": {"reputation": 480, "user_id": 4688042, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07539504725306ff45b0e9c09e3e2699?s=128&d=identicon&r=PG", "display_name": "QuietJoon", "link": "https://stackoverflow.com/users/4688042/quietjoon"}, "reply_to_user": {"reputation": 790, "user_id": 334632, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/SL2Mb.jpg?s=128&g=1", "display_name": "Joe Hillenbrand", "link": "https://stackoverflow.com/users/334632/joe-hillenbrand"}, "edited": false, "score": 0, "creation_date": 1445648050, "post_id": 33311980, "comment_id": 54425689, "body": "@Joehillen Yes, there is <code>print</code> in <code>monitor</code>. However, the code hangs when comment-out or delete <code>monitor</code>. You can try that get rid any <code>print</code> things."}], "answers": [{"comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1445641706, "post_id": 33312129, "comment_id": 54424204, "body": "The canonical &quot;action that yields&quot; is <a href=\"https://hackage.haskell.org/package/base-4.8.1.0/docs/Control-Concurrent.html#v:yield\" rel=\"nofollow noreferrer\"><code>yield</code></a>."}, {"owner": {"reputation": 480, "user_id": 4688042, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07539504725306ff45b0e9c09e3e2699?s=128&d=identicon&r=PG", "display_name": "QuietJoon", "link": "https://stackoverflow.com/users/4688042/quietjoon"}, "edited": false, "score": 0, "creation_date": 1445648475, "post_id": 33312129, "comment_id": 54425783, "body": "Thanks, I could understand what&#39;s the problem."}], "tags": [], "owner": {"reputation": 13626, "user_id": 492865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c69a2080e68c8606961a18aba3a08ec?s=128&d=identicon&r=PG", "display_name": "Yuras", "link": "https://stackoverflow.com/users/492865/yuras"}, "is_accepted": true, "score": 4, "last_activity_date": 1445638163, "creation_date": 1445638163, "answer_id": 33312129, "question_id": 33311980, "link": "https://stackoverflow.com/questions/33311980/loop-thread-hangs-without-hflush-stdout-even-there-are-no-print-things/33312129#33312129", "title": "Loop thread hangs without `hFlush stdout` even there are no `print` things", "body": "<p>Most likely the compiler optimized the <code>wait</code> into non-allocating busy loop. Runtime system just doesn't have a chance to interrupt it to let the child thread to run. You can \"fix\" by adding any action that allocates or yields, e.g. <code>hFlush</code> or <code>threadDelay</code>. Also you can compile the code with <code>-fno-omit-yields</code>.</p>\n\n<p>See also: <a href=\"https://ghc.haskell.org/trac/ghc/ticket/367\" rel=\"nofollow\">https://ghc.haskell.org/trac/ghc/ticket/367</a> and <a href=\"https://ghc.haskell.org/trac/ghc/ticket/10639\" rel=\"nofollow\">https://ghc.haskell.org/trac/ghc/ticket/10639</a></p>\n"}], "owner": {"reputation": 480, "user_id": 4688042, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/07539504725306ff45b0e9c09e3e2699?s=128&d=identicon&r=PG", "display_name": "QuietJoon", "link": "https://stackoverflow.com/users/4688042/quietjoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 33312129, "answer_count": 1, "score": 1, "last_activity_date": 1445638163, "creation_date": 1445637377, "question_id": 33311980, "link": "https://stackoverflow.com/questions/33311980/loop-thread-hangs-without-hflush-stdout-even-there-are-no-print-things", "title": "Loop thread hangs without `hFlush stdout` even there are no `print` things", "body": "<p>When I test some simple cases about threaded codes,<br>\nI found some <strong>loop  hang without <code>hFlush stdout</code></strong> even it does not use any <code>print</code> things.</p>\n\n<pre><code>import Control.Concurrent\n\nimport System.IO\nimport Data.IORef\n\ndelay :: Int -&gt; IO ()\ndelay = threadDelay . (* 1000000)\n\nwait sw = loop\n  where\n    loop = do\n      v &lt;- readIORef sw\n      --hFlush stdout -- without this, hang\n      if v\n        then return()\n        else loop\n\nmonitor sw = forkIO $ loop\n  where\n    loop = do\n      v &lt;- readIORef sw\n      print v\n      delay 1\n      loop\n\nmain = do\n  sw &lt;- newIORef False\n  forkIO $ do\n    delay 4\n    writeIORef sw True\n  monitor sw\n  wait sw\n  --putStrLn \"End\"\n</code></pre>\n\n<p>This code hangs whether <code>monitor sw</code> and <code>putStrLn \"End\"</code> exist or not.</p>\n\n<p>However, just <strong>uncomment <code>hFlush stdout</code> in <code>wait</code>, it works properly and ends.</strong></p>\n\n<p>This also happens with a code using <code>MVar</code>.</p>\n\n<pre><code>import Control.Concurrent\nimport Control.Concurrent.MVar\nimport System.IO\n\ndelay :: Int -&gt; IO ()\ndelay = threadDelay . (* 1000000)\n\nwait :: MVar Bool -&gt; IO ()\nwait sw = loop\n  where loop = do\n          v &lt;- readMVar sw\n          hFlush stdout -- without this, hangs\n          if v\n            then return ()\n            else loop\n\nmain :: IO ()\nmain = do\n  sw &lt;- newMVar False\n  forkIO $ do\n    delay 4\n    modifyMVar_ sw (\\_ -&gt; return True)\n  wait sw\n</code></pre>\n\n<p>These two codes will run properly when running by <code>runghc</code>.</p>\n\n<p>However, <strong>the codes below are not hanging without <code>hFlush stdout</code></strong>.</p>\n\n<pre><code>import Control.Concurrent\nimport Control.Concurrent.MVar\nimport System.IO\n\ndelay :: Int -&gt; IO ()\ndelay = threadDelay . (* 1000000)\n\nwait :: MVar Bool -&gt; IO ()\nwait sw = loop\n  where loop = do\n          v &lt;- readMVar sw\n          if v\n            then return ()\n            else loop\n\nmain :: IO ()\nmain = do\n  sw &lt;- newEmptyMVar\n  forkIO $ do\n    delay 4\n    putMVar sw True\n  wait sw\n</code></pre>\n\n<hr>\n\n<pre><code>import Control.Concurrent\nimport Control.Concurrent.STM\nimport Control.Concurrent.STM.TVar\nimport System.IO\n\ndelay :: Int -&gt; IO ()\ndelay = threadDelay . (* 1000000)\n\nwait :: TVar Bool -&gt; IO ()\nwait sw = atomically $ do\n            v &lt;- readTVar sw\n            unless v retry\n\nmain :: IO ()\nmain = do\n  sw &lt;- newTVarIO False\n  forkIO $ do\n    delay 4\n    atomically $ writeTVar sw True\n  wait sw\n</code></pre>\n\n<hr>\n\n<p>I know that there are difference. But I couldn't find out <strong>why some codes hang</strong>.<br>\nIs <code>stdout</code> is related with handling thread?<br>\nCould you explain <strong>why the loops are hanging or not without <code>hFlush stdout</code></strong>?</p>\n\n<p>Additional:<br>\n1. I've tested this codes with GHC 7.10.2 {OS X, Windows}</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1445641540, "post_id": 33311541, "comment_id": 54424164, "body": "You should prefer pattern matching to an equivalent guard. In this case, <code>[x]</code> or <code>x:[]</code> to <code>| xs == []</code>."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "edited": false, "score": 0, "creation_date": 1445639692, "post_id": 33311799, "comment_id": 54423612, "body": "Thank you! How could I do the same function with a String-List as an output. So like for every &quot;block&quot; ogf characters one string?"}, {"owner": {"reputation": 848, "user_id": 5263547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5765579c508aa191ce2c5aa64d478073?s=128&d=identicon&r=PG&f=1", "display_name": "JHobern", "link": "https://stackoverflow.com/users/5263547/jhobern"}, "reply_to_user": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "edited": false, "score": 0, "creation_date": 1445639825, "post_id": 33311799, "comment_id": 54423649, "body": "I am not quite sure what you are asking. Can you give me an example of what you mean?"}, {"owner": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "edited": false, "score": 0, "creation_date": 1445640994, "post_id": 33311799, "comment_id": 54424000, "body": "[&quot;nn&quot;, &quot;u&quot;, &quot;ddd&quot;, &quot;rr&quot;] following my example from above. The thing is that I should order those after certain properties (length, order in alphabet) and I guess this will be easier managed with a list."}, {"owner": {"reputation": 848, "user_id": 5263547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5765579c508aa191ce2c5aa64d478073?s=128&d=identicon&r=PG&f=1", "display_name": "JHobern", "link": "https://stackoverflow.com/users/5263547/jhobern"}, "reply_to_user": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "edited": false, "score": 0, "creation_date": 1445641295, "post_id": 33311799, "comment_id": 54424086, "body": "Ok, I understand now. It is fairly easy to modify the current version to do that. Is there anything that you have tried so far? Hint: think about how you would generate just [&quot;nn&quot;] first, and then try and get the full list once you can do that."}, {"owner": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "edited": false, "score": 0, "creation_date": 1445644498, "post_id": 33311799, "comment_id": 54424935, "body": "Ok I got it. Just made brackets over the &quot;x : filter (==x) xs&quot; expression. I like the notation in one line. Until now I did everything in many line like before."}, {"owner": {"reputation": 848, "user_id": 5263547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5765579c508aa191ce2c5aa64d478073?s=128&d=identicon&r=PG&f=1", "display_name": "JHobern", "link": "https://stackoverflow.com/users/5263547/jhobern"}, "reply_to_user": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "edited": false, "score": 0, "creation_date": 1445644811, "post_id": 33311799, "comment_id": 54425007, "body": "Yep, so you can use <code>usort (x:xs) = (x : filter (==x) xs) : usort (filter (&#47;=x) xs)</code> to get your list. Make sure that you understand why. You will need to change the signature of the function to <code>usort :: (Eq a)=&gt;[a]-&gt;[[a]]</code> as well, of course."}, {"owner": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "edited": false, "score": 0, "creation_date": 1445645265, "post_id": 33311799, "comment_id": 54425104, "body": "Sure. Any suggestions on how I could sort this list? Is there any function in Prelude which allows me sorting by length?"}, {"owner": {"reputation": 848, "user_id": 5263547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5765579c508aa191ce2c5aa64d478073?s=128&d=identicon&r=PG&f=1", "display_name": "JHobern", "link": "https://stackoverflow.com/users/5263547/jhobern"}, "reply_to_user": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "edited": false, "score": 0, "creation_date": 1445645664, "post_id": 33311799, "comment_id": 54425182, "body": "Have a look at the function <code>sortBy</code>, which is in <code>Data.List</code>."}], "tags": [], "owner": {"reputation": 848, "user_id": 5263547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5765579c508aa191ce2c5aa64d478073?s=128&d=identicon&r=PG&f=1", "display_name": "JHobern", "link": "https://stackoverflow.com/users/5263547/jhobern"}, "is_accepted": true, "score": 2, "last_activity_date": 1445636449, "creation_date": 1445636449, "answer_id": 33311799, "question_id": 33311541, "link": "https://stackoverflow.com/questions/33311541/ordered-occurrences-of-characters-in-string/33311799#33311799", "title": "Ordered occurrences of characters in string", "body": "<p>You have correctly observed that your recursive calls to <code>usort</code> are not removing the characters that have already been used, so you will need to modify the function so that it does this. You can use <code>filter</code> to select only the elements of the list that match some criteria, so we can remove the already used characters like so: </p>\n\n<pre><code>filter (\\=x) xs\n</code></pre>\n\n<p>We can select all of the characters that match <code>x</code> in the same manner, by using</p>\n\n<pre><code>filter (==x) xs\n</code></pre>\n\n<p>You can use these two things to create your <code>usort</code> function:</p>\n\n<pre><code>usort (x:xs) = x : (filter (==x) xs) ++ usort (filter (/=x) xs)\n</code></pre>\n\n<p>However, you have failed to consider the case when you will be trying to sort an empty list, so you will also need to add:</p>\n\n<pre><code>usort [] = []\n</code></pre>\n\n<p>Putting this together, you get</p>\n\n<pre><code>usort::(Eq a)=&gt;[a]-&gt;[a]\nusort [] = []\nusort (x:xs) = x : filter (==x) xs ++ usort (filter (/=x) xs)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 3853127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/01f26bd7a6d3b7006fdd39ef112cda7c?s=128&d=identicon&r=PG&f=1", "display_name": "craft", "link": "https://stackoverflow.com/users/3853127/craft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 33311799, "answer_count": 1, "score": 0, "last_activity_date": 1445636449, "creation_date": 1445635068, "question_id": 33311541, "link": "https://stackoverflow.com/questions/33311541/ordered-occurrences-of-characters-in-string", "title": "Ordered occurrences of characters in string", "body": "<p>I want to get all the occurrences of the characters I have in a string.\nSo for example if I have the string \"nunddrdr\" I want to get \"nnudddrr\".</p>\n\n<p>This is how the code looks like which should achieve this:</p>\n\n<pre><code>usort :: String -&gt; String\n\nl :: String\nl = \"\"\n\nusort (x:xs)\n    | xs == []  = l ++ [x]\n    | otherwise = l ++ [n | n &lt;- (x:xs), n = x] ++ usort (xs)\n</code></pre>\n\n<p>It doesn't work correctly because it also proccesses already used characters.</p>\n"}, {"tags": ["haskell", "types", "algebraic-data-types"], "answers": [{"tags": [], "owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "is_accepted": false, "score": 1, "last_activity_date": 1445625020, "creation_date": 1445625020, "answer_id": 33309143, "question_id": 33308987, "link": "https://stackoverflow.com/questions/33308987/mapping-data-constructors-to-types/33309143#33309143", "title": "Mapping data constructors to types", "body": "<p>Having types depend on values is exactly what <em>dependent types</em> are for. Unfortunately, Haskell doesn't have dependent types. However, you can use a sum type to capture the possible response types:</p>\n\n<pre><code>data Response = ResponseText Text | ResponseInt Int\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1445625546, "post_id": 33309172, "comment_id": 54417327, "body": "@SeanClarkHess If you have a value <code>example :: Answer EmailText</code> you know (and the compiler knows!) that <code>example</code> was built from the <code>REmailText</code> constructor. Other constructors will produce different types, making GHC complain. Even trying to pattern match other constructors will cause errors from GHC, since that match can never happen."}, {"owner": {"reputation": 14449, "user_id": 105678, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/859da59b3e4097fa659aabb55412de10?s=128&d=identicon&r=PG", "display_name": "Sean Clark Hess", "link": "https://stackoverflow.com/users/105678/sean-clark-hess"}, "edited": false, "score": 0, "creation_date": 1445625824, "post_id": 33309172, "comment_id": 54417465, "body": "Very cool. This prevents me from ever making a list of answers though right?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 14449, "user_id": 105678, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/859da59b3e4097fa659aabb55412de10?s=128&d=identicon&r=PG", "display_name": "Sean Clark Hess", "link": "https://stackoverflow.com/users/105678/sean-clark-hess"}, "edited": false, "score": 0, "creation_date": 1445626161, "post_id": 33309172, "comment_id": 54417639, "body": "@SeanClarkHess If you have answers of different types, you can not put them in the same list, unless you use existential types -- but at that point you are discarding the type information we have just added. The point is: how would you exactly link questions to answers, inside types? If you made a list of (fake syntax) <code>exists qt. (Question qt, Answer qt)</code> you lose information about what type of question is (which you can recover at runtime, though), but you preserve enough type information to state that question and answer are compatible. If you instead use two lists, this is lost."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 14449, "user_id": 105678, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/859da59b3e4097fa659aabb55412de10?s=128&d=identicon&r=PG", "display_name": "Sean Clark Hess", "link": "https://stackoverflow.com/users/105678/sean-clark-hess"}, "edited": false, "score": 0, "creation_date": 1445628872, "post_id": 33309172, "comment_id": 54419062, "body": "@SeanClarkHess It prevents you from making one list in the naive way -- but it doesn&#39;t prevent you from making three."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 8, "last_activity_date": 1445625134, "creation_date": 1445625134, "answer_id": 33309172, "question_id": 33308987, "link": "https://stackoverflow.com/questions/33308987/mapping-data-constructors-to-types/33309172#33309172", "title": "Mapping data constructors to types", "body": "<p>I've not completely understood what you exactly want, but maybe this can be a starting point:</p>\n\n<pre><code>{-# LANGUAGE DataKinds, GADTs #-}\n\ndata Response (qt :: QuestionType) where\n  RPlainText :: Text -&gt; Response PlainText\n  REmailText :: Text -&gt; Response EmailText\n  RNumeric :: Int -&gt; Response Numeric\n\ndata Answer qt = Answer {questionID :: ID, response :: Response qt}\n</code></pre>\n\n<p>If you do not want the <code>qt</code> argument in <code>Answer qt</code>, you probably need existential types to hide that, but at that point you'll probably want to link it with the questions somehow.</p>\n"}], "owner": {"reputation": 14449, "user_id": 105678, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/859da59b3e4097fa659aabb55412de10?s=128&d=identicon&r=PG", "display_name": "Sean Clark Hess", "link": "https://stackoverflow.com/users/105678/sean-clark-hess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 33309172, "answer_count": 2, "score": 4, "last_activity_date": 1445625134, "creation_date": 1445624289, "question_id": 33308987, "link": "https://stackoverflow.com/questions/33308987/mapping-data-constructors-to-types", "title": "Mapping data constructors to types", "body": "<p>I'm creating an application that allows an admin to build a form, which a user can fill out. Questions can be of different types. Each kind of question corresponds to a type of response data. </p>\n\n<p>Is it possible to encode this at the type level? How would you organize this?</p>\n\n<pre><code>data QuestionType = EmailText | PlainText | Numeric\n\n-- this doesn't have any response information, it's the metadata\n-- about the question itself.\ndata Question = { id :: ID, label :: Text, questionType :: QuestionType }\n\ndata Answer = { questionID :: ID, response :: Response }\n\n-- I would like to map those question types to different response types\ndata Response = ???\n-- EmailText =&gt; Text\n-- PlainText =&gt; Text\n-- Numeric   =&gt; Int\n</code></pre>\n\n<p>I've thought about Type Families, which would work perfectly except that I want to map from different data constructors to different types, and type families would require separate types for each one. </p>\n\n<p>This would be a good fit for a single ADT, with the response information included in each constructor, but I need to be able to deal with question types independently from responses. </p>\n\n<p>How should I approach this?</p>\n"}, {"tags": ["haskell", "recursion"], "comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 1, "creation_date": 1445620804, "post_id": 33307814, "comment_id": 54414906, "body": "Why do you think that the output should be reversed? The list is deconstructed from the front, and elements are only put back at the front."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445641787, "post_id": 33307814, "comment_id": 54424228, "body": "Thanks, though I guess I should try to be a bit more clear as to what I am trying to say here :).                                                                                                              For example, I have the program that returns split separators and words. Let&#39;s say, for example, that I want to do &quot;!&quot;, &quot;A string!&quot; in the program. So, this is a list of the form (x:xs), right? Where x is an element being added to the front of the list using &#39;:&#39; . So it will go through the list of &quot;A string!&quot;, and will create the string of strings (separatorslist, ((x:word:words))"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445641835, "post_id": 33307814, "comment_id": 54424242, "body": "But it is that part (x:word) that gets me out, we are adding x from the &quot;A string!&quot; to the front of the new list word:words, so shouldn&#39;t this add A first, then space, then s in front of the A? Like &quot;gnirts A&quot;?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445648151, "post_id": 33307814, "comment_id": 54425714, "body": "<code>x</code> is the first letter of the word. <code>word</code> is the rest of the word, split off from the rest of the string <code>xs</code>. To get the word in the correct order, you put the first character first... so obviously it would <code>x:word</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445738626, "post_id": 33307814, "comment_id": 54448537, "body": "But we are doing x:word:words. Word:words is initially an empty list, and x:xs adds an element onto the front of xs. So, if we are taking apart a word, let&#39;s say, &quot;sentence&quot;, it will first add s to the empty list, then e, etc, so wouldn&#39;t it become ecnetnes?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445739273, "post_id": 33307814, "comment_id": 54448652, "body": "It does <i>not</i> at the character <code>s</code> to the empty list. It adds the character <code>s</code> to the list which is the result of calling the function recursively on <code>xs</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445793718, "post_id": 33307814, "comment_id": 54462151, "body": "I guess my main confusion comes from this part - (separatorslist,word:words) = split separators xs. What exactly is it doing here?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445804779, "post_id": 33307814, "comment_id": 54466032, "body": "<code>(separatorslist,word:words) = split separators xs</code> calls the function <code>split seperators xs</code>, which returns a tuple. The left hand side binds the variables <code>seperatorslist</code> for the first element of the tuple, and <code>word:words</code> for the second element. <code>word</code> is the first word; <code>words</code> are the rest of the words."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445898760, "post_id": 33307814, "comment_id": 54509442, "body": "Sorry to be a pain, but I&#39;m still finding it very difficult to wrap my head around this."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445899125, "post_id": 33307814, "comment_id": 54509588, "body": "Let&#39;s say we take &quot;!&quot; &quot;A few words!&quot;  This is splitUp &quot;!&quot; &quot;A: few words!&quot;  So it will go to the otherwise clause for A, hence = ([], a:[])  Then it will do splitUp &quot;!&quot; &quot; few words!&quot;, so   = ([], f:[a])   Where am I going wrong?"}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445915048, "post_id": 33307814, "comment_id": 54514047, "body": "The value <code>([], a:[])</code> is never constructed. <code>a</code> is appended to the result of the recursive computation. In this case, this is <code>splitUp &quot;!&quot; &quot; few words!&quot;</code> - this should return <code>[&quot; few words&quot;, &quot;&quot;]</code>; then <code>&#39;A&#39;</code> is appended to this first word, forming the result: <code>[&quot;A few words&quot;, &quot;&quot;]</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445938825, "post_id": 33307814, "comment_id": 54523503, "body": "So what&#39;s the first element put into word:words?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1445972926, "post_id": 33307814, "comment_id": 54546937, "body": "I guess I understand everything, just not how exactly word:words is defined here. I&#39;ve heard something about tail recursion? Thank for the help!"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "edited": false, "score": 0, "creation_date": 1445641858, "post_id": 33308072, "comment_id": 54424248, "body": "I try to explain my q in an above comment ^"}], "tags": [], "owner": {"reputation": 6025, "user_id": 3053082, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cf7725958a43181e6b2b4c0f5f02b91b?s=128&d=identicon&r=PG&f=1", "display_name": "Kapol", "link": "https://stackoverflow.com/users/3053082/kapol"}, "is_accepted": false, "score": 3, "last_activity_date": 1445633696, "last_edit_date": 1445633696, "creation_date": 1445620765, "answer_id": 33308072, "question_id": 33307814, "link": "https://stackoverflow.com/questions/33307814/recursive-order-of-a-haskell-program-that-splits-a-string-into-a-string-of-strin/33308072#33308072", "title": "Recursive order of a Haskell program that splits a string into a string of strings", "body": "<p>I'll try to give a general answer to what I believe the misunderstanding is.</p>\n\n<p>Let's define a simple recursive function that will just take a string and put it back together.</p>\n\n<pre><code>rewrite :: String -&gt; String\nrewrite []     = \"\"\nrewrite x      = x\nrewrite (x:xs) = x : rewrite xs\n</code></pre>\n\n<p>As you can see, I'm putting <code>x</code> at the beginning of the list and appending the recursive call, similarly to your example. This will just give me the starting string itself, not its reverse. Let's take a look at a step-by-step example passing \"Hello\" to the function.</p>\n\n<pre><code>rewrite \"Hello\" = 'H' : rewrite \"ello\"\n                = 'H' : 'e' : rewrite \"llo\"\n                = 'H' : 'e' : 'l' : rewrite \"lo\"\n                = 'H' : 'e' : 'l' : 'l' : rewrite \"o\"\n                = 'H' : 'e' : 'l' : 'l' : 'o'\n                = \"Hello\" -- and we're done\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5472204"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1449143801, "creation_date": 1445619754, "last_edit_date": 1449143801, "question_id": 33307814, "link": "https://stackoverflow.com/questions/33307814/recursive-order-of-a-haskell-program-that-splits-a-string-into-a-string-of-strin", "title": "Recursive order of a Haskell program that splits a string into a string of strings", "body": "<p>I'm carrying on with learning Haskell, and I've defined a program called SplitUp to be as follows:</p>\n\n<pre><code>splitUp :: [Char] -&gt; String -&gt; (String, [String])\nsplitUp separators [] = (\"\",[\"\"])\nsplitUp separators (x:xs)\n   | elem x separators          = (x : separatorslist, (\"\":word:words))\n   | otherwise           = (separatorslist, ((x:word):words))\n     where\n       (separatorslist,word:words) = split separators xs\n</code></pre>\n\n<p>What splitUp does is that it splits up a string and its separators. For example, \"One. Word!\" would go to \". !\", \" \"One\", \"Word\"\"</p>\n\n<p>What I don't understand is why with the way that the program is set up why the input isn't given in reverse order with the recursion of x:word:words? Because if we are adding x to the front of the list of (word:words) and recursing shouldn't it give back something like droW enO?</p>\n"}, {"tags": ["haskell", "closures"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1445613739, "post_id": 33305935, "comment_id": 54410770, "body": "I&#39;d say &quot;no&quot; because <code>inf</code> is not a function; it&#39;s a list."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 5, "creation_date": 1445614106, "post_id": 33305935, "comment_id": 54410993, "body": "@melpomene I think in eager languages it makes sense to restrict closures to contain functions; in lazy languages I&#39;m not so sure. At the very least I would be willing to bet that GHC has a data structure it calls &quot;closure&quot; that&#39;s involved in representing <code>inf</code> at some level."}, {"owner": {"reputation": 2379, "user_id": 5045375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17ed0af705e0449fe49b74d8814a8ce2?s=128&d=identicon&r=PG", "display_name": "Filip Allberg", "link": "https://stackoverflow.com/users/5045375/filip-allberg"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1445614414, "post_id": 33305935, "comment_id": 54411213, "body": "@melpomene You are right, as otherwise rules would not accept it as input. Cheers."}, {"owner": {"reputation": 22266, "user_id": 649287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0ea0055b84020bf860c05f53ba53d5?s=128&d=identicon&r=PG", "display_name": "augustss", "link": "https://stackoverflow.com/users/649287/augustss"}, "edited": false, "score": 7, "creation_date": 1445614689, "post_id": 33305935, "comment_id": 54411406, "body": "Since Haskell doesn&#39;t have a notion of a &#39;closure&#39;, you&#39;d better tell us what you mean by &#39;closure&#39; if you expect an accurate answer.  The notion of a closure is usually something that refers to a language implementation.  So you could ask if some particular implementation of Haskell uses a closure to represent inf."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 22266, "user_id": 649287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0ea0055b84020bf860c05f53ba53d5?s=128&d=identicon&r=PG", "display_name": "augustss", "link": "https://stackoverflow.com/users/649287/augustss"}, "edited": false, "score": 2, "creation_date": 1445614847, "post_id": 33305935, "comment_id": 54411504, "body": "@augustss If you know the definitive answer for GHC, I think that would make a fine answer to this question. I know I&#39;d upvote it."}, {"owner": {"reputation": 2379, "user_id": 5045375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17ed0af705e0449fe49b74d8814a8ce2?s=128&d=identicon&r=PG", "display_name": "Filip Allberg", "link": "https://stackoverflow.com/users/5045375/filip-allberg"}, "reply_to_user": {"reputation": 22266, "user_id": 649287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0ea0055b84020bf860c05f53ba53d5?s=128&d=identicon&r=PG", "display_name": "augustss", "link": "https://stackoverflow.com/users/649287/augustss"}, "edited": false, "score": 0, "creation_date": 1445615006, "post_id": 33305935, "comment_id": 54411604, "body": "@augustss I did not know this, so I am clearly barking up the wrong tree. As you stated, there may be some particular implementation that does this but that is not why I asked the question. Although learning about such a thing would surely be interesting. As Daniel Wagner said, the definitive answer for GHC is fine."}, {"owner": {"reputation": 17809, "user_id": 1088108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63781cd38e91aa346a3849bc3ef3e550?s=128&d=identicon&r=PG&f=1", "display_name": "&#216;rjan Johansen", "link": "https://stackoverflow.com/users/1088108/%c3%98rjan-johansen"}, "edited": false, "score": 0, "creation_date": 1445648333, "post_id": 33305935, "comment_id": 54425750, "body": "Since I wrote that code piece in my answer, I&#39;ll point out that the most important reason to use <code>inf</code> rather than recursing with <code>infFromPrefix rules prefix</code> is to ensure that the work of calculating the list is not duplicated - in GHC <code>inf</code> ensures sharing, but recursing with a function does not."}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445686360, "post_id": 33305935, "comment_id": 54433343, "body": "@FilipAllberg: I think you should have accepted the other answer as mine is not specific enough to Haskell... or did you have a particular reason to choose mine over Roman&#39;s?"}, {"owner": {"reputation": 2379, "user_id": 5045375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17ed0af705e0449fe49b74d8814a8ce2?s=128&d=identicon&r=PG", "display_name": "Filip Allberg", "link": "https://stackoverflow.com/users/5045375/filip-allberg"}, "reply_to_user": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445690629, "post_id": 33305935, "comment_id": 54434596, "body": "@erik-allik: Your answer is the one I felt aligned best with the intent I had posing the question. I was approaching the subject from a <a href=\"https://en.m.wikipedia.org/wiki/Closure_%28computer_programming%29\" rel=\"nofollow noreferrer\">Closures in programming</a> stand-point. Had I been more explicit and asked, &quot;Is this a closure in Haskell?&quot;, I would have chosen Roman&#39;s answer."}], "answers": [{"comments": [{"owner": {"reputation": 20862, "user_id": 376113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d3a5bd12fe6d876527a3cf4ac0de5fc6?s=128&d=identicon&r=PG", "display_name": "mb14", "link": "https://stackoverflow.com/users/376113/mb14"}, "edited": false, "score": 0, "creation_date": 1445622370, "post_id": 33306433, "comment_id": 54415736, "body": "I agree with you, as Haskell is Lazy, everything can be seen as a closure, as even a value can be seen as a function without argument waiting to be evaluated (and so capturing it&#39;s environment until it gets evaluated)."}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 2, "creation_date": 1445631513, "post_id": 33306433, "comment_id": 54420403, "body": "&quot;[A]s even a value can be seen as a function without argument.&quot; Not really, no."}], "tags": [], "owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "is_accepted": true, "score": 5, "last_activity_date": 1445620386, "last_edit_date": 1445620386, "creation_date": 1445614922, "answer_id": 33306433, "question_id": 33305935, "link": "https://stackoverflow.com/questions/33305935/haskell-is-this-a-closure/33306433#33306433", "title": "Haskell - is this a closure?", "body": "<p>Based on the Wiki article on <a href=\"https://en.m.wikipedia.org/wiki/Closure_(computer_programming)\" rel=\"nofollow\">Closures in programming</a>, I think it can be said that <code>inf</code> is indeed <em>not</em> a closure:</p>\n\n<blockquote>\n  <p>Note especially that the nested function definitions are not themselves closures: they have a free variable, which is not yet bound. Only once the enclosing function is evaluated with a value for the parameter is the free variable of the nested function bound, creating a closure, which is then returned from the enclosing function.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445620573, "post_id": 33307944, "comment_id": 54414785, "body": "<i>&quot;returned to the caller&quot;</i> \u2014 the caller of which function? <code>inf</code> or <code>infFromPrefix</code>? I&#39;m not sure how to put your answer in the context of how <a href=\"https://en.m.wikipedia.org/wiki/Closure_(computer_programming)\" rel=\"nofollow noreferrer\">wikipedia defines a closure</a>."}, {"owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "reply_to_user": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445624038, "post_id": 33307944, "comment_id": 54416600, "body": "<code>infFromPrefix</code> constructs a closure/thunk on the heap, <code>inf</code> and returns (the pointer to) it to its (<code>infFromPrefix</code>&#39;s) caller. The caller will then enter the closure to evaluate it to the necessary degree."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 2, "creation_date": 1445624162, "post_id": 33307944, "comment_id": 54416649, "body": "@ErikAllik Perhaps part of the problem is that people here (and in the Wikipedia article) are not being careful about the difference between static objects -- chunks of syntax in a language -- and dynamic objects -- things that get built and inspected at runtime. To say that <code>inf</code> itself is not a closure seems technically correct, since it is a static object, and only dynamic objects can be closures; but to say that at runtime the expression <code>inf</code> gets turned into a closure when <code>infFromPrefix</code> is called also seems correct."}, {"owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1445624461, "post_id": 33307944, "comment_id": 54416772, "body": "@DanielWagner: agreed, that&#39;s a useful distinction and can be a source of confusion. At the same time, STG-the-language uses the term closure for its static objects too, although not in the same sense as the wikipedia article. This is because STG is designed to map rather closely to the dynamic semantics."}], "tags": [], "owner": {"reputation": 34861, "user_id": 110081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/cSvwm.jpg?s=128&g=1", "display_name": "Roman Cheplyaka", "link": "https://stackoverflow.com/users/110081/roman-cheplyaka"}, "is_accepted": false, "score": 10, "last_activity_date": 1445620245, "creation_date": 1445620245, "answer_id": 33307944, "question_id": 33305935, "link": "https://stackoverflow.com/questions/33305935/haskell-is-this-a-closure/33307944#33307944", "title": "Haskell - is this a closure?", "body": "<p>I would agree with Lennart and Daniel that closure is an implementation-specific term and is not something well-defined in general. Moreover, I don't hear Haskellers talk about closures a lot outside of the implementation issues; when programmers in other languages casually talk about \"closures\", they usually mean what we call \"lambdas\". (As in \"does that language have closures?\".)</p>\n\n<p>Anyway, let's talk about GHC.</p>\n\n<p>GHC (or, more precisely, <a href=\"https://ghc.haskell.org/trac/ghc/wiki/Commentary/Compiler/StgSynType\">STG</a>) calls a closure any heap object that is not a constructor application. </p>\n\n<p>(In case you think this is a broad definition, compare this with the original <a href=\"http://research.microsoft.com/pubs/67083/spineless-tagless-gmachine.ps.gz\">STG</a> paper where even constructors were called closures.)</p>\n\n<p>Your <code>inf</code> is certainly an STG closure; it is a thunk that will be allocated on the heap and returned to the caller.</p>\n"}], "owner": {"reputation": 2379, "user_id": 5045375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17ed0af705e0449fe49b74d8814a8ce2?s=128&d=identicon&r=PG", "display_name": "Filip Allberg", "link": "https://stackoverflow.com/users/5045375/filip-allberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 33306433, "answer_count": 2, "score": 7, "last_activity_date": 1445620386, "creation_date": 1445613499, "last_edit_date": 1495541030, "question_id": 33305935, "link": "https://stackoverflow.com/questions/33305935/haskell-is-this-a-closure", "title": "Haskell - is this a closure?", "body": "<p>There is a piece of source-code that originated in an answer to <a href=\"https://stackoverflow.com/questions/33147041/applying-a-possibly-unary-function-recursively-onto-itself/33153999#33153999\">another one of my questions</a>,</p>\n\n<pre><code>infFromPrefix :: Eq a =&gt; ([a] -&gt; [a]) -&gt; [a] -&gt; [a] \ninfFromPrefix rules prefix = inf where\n    inf = prefix ++ case stripPrefix prefix (rules inf) of\n        Just suffix -&gt; suffix\n        Nothing     -&gt; error \"Substitution does not preserve prefix\"\n</code></pre>\n\n<p>where I am pretty sure that <code>inf</code> must be a closure as it has access to variables from its enclosing scope in the sense that it uses the parameters passed to <code>infFromPrefix</code>, but am unsure since essentially <code>infFromPrefix</code> and <code>inf</code> is the same function, the <code>inf</code> only allows\na more succinct definition. An equivalent definition would be </p>\n\n<pre><code>infFromPrefix rules prefix = prefix ++ case stripPrefix prefix (rules $ infFromPrefix rules prefix) of\n        Just suffix -&gt; suffix\n        Nothing     -&gt; error \"Substitution does not preserve prefix\"\n</code></pre>\n\n<p>Am I correct, is <code>inf</code> a closure?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 5, "creation_date": 1445611568, "post_id": 33305190, "comment_id": 54409169, "body": "What is &quot;not working&quot; about it?"}, {"owner": {"reputation": 21417, "user_id": 925978, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/06e4467a5bd1538a92cefb20db07897a?s=128&d=identicon&r=PG&f=1", "display_name": "crockeea", "link": "https://stackoverflow.com/users/925978/crockeea"}, "edited": false, "score": 5, "creation_date": 1445611578, "post_id": 33305190, "comment_id": 54409172, "body": "What is not working here? What datatype are you referring to? Where do you want to enter numbers?"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "edited": false, "score": 0, "creation_date": 1445612656, "post_id": 33305306, "comment_id": 54410013, "body": "Ah, I saw my fault. Always left out &#39;  &#39; in ghci.  Is it possibly to write a function, where you can just typ a letter without &#39; &#39;?"}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 1, "creation_date": 1445619137, "post_id": 33305306, "comment_id": 54414011, "body": "No. Letters without &#39;&#39; are identifiers."}], "tags": [], "owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "is_accepted": true, "score": 0, "last_activity_date": 1445611812, "creation_date": 1445611812, "answer_id": 33305306, "question_id": 33305190, "link": "https://stackoverflow.com/questions/33305190/comparing-a-list-with-haskell/33305306#33305306", "title": "Comparing a list with haskell", "body": "<p>Your <code>zeich</code> function is just fine, a quick <code>ghci</code> session gives:</p>\n\n<pre><code>\u03bb: let zeich :: Char -&gt; Bool; zeich x = elem x ['a', 'v', 'b']\n\u03bb: zeich 'b'\nTrue\n\u03bb: zeich 'c'\nFalse\n</code></pre>\n\n<p>If you want to store characters <em>and</em> numbers in your list you'll need to devise a new type which can accomodate values of either type, e.g.</p>\n\n<pre><code>\u03bb: data Element = Letter Char | Number Int deriving Eq\n</code></pre>\n\n<p>Using which you could then define a <code>zeich2</code> number which accepts values of type <code>Element</code>:</p>\n\n<pre><code>\u03bb: let zeich2 :: Element -&gt; Bool; zeich2 x = elem x [Letter 'a', Number 3, Letter 'b']\n\u03bb: zeich2 (Letter 'a')\nTrue\n\u03bb: zeich2 (Number 3)\nTrue\n\u03bb: zeich2 (Number 4)\nFalse\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 5476702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/839932238d6b8b6e3f7f5f97cdb65b52?s=128&d=identicon&r=PG&f=1", "display_name": "letter", "link": "https://stackoverflow.com/users/5476702/letter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1445613037, "accepted_answer_id": 33305306, "answer_count": 1, "score": -2, "last_activity_date": 1445611812, "creation_date": 1445611464, "last_edit_date": 1445611580, "question_id": 33305190, "link": "https://stackoverflow.com/questions/33305190/comparing-a-list-with-haskell", "closed_reason": "Needs details or clarity", "title": "Comparing a list with haskell", "body": "<p>I tried to write a Haskell function, where an element will be compared with a list.\nSeemed to be so easy, but it is not working.</p>\n\n<pre><code>zeich :: Char -&gt; Bool\n\nzeich x =   elem x ['a','v','b']\n</code></pre>\n\n<p>Also how should I do the datatype? So that you also can enter numbers?</p>\n"}, {"tags": ["haskell", "testing", "haskell-stack"], "comments": [{"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 1, "creation_date": 1445637832, "post_id": 33304155, "comment_id": 54423063, "body": "an immediate fix would be to add --force-dirty - see <a href=\"https://github.com/commercialhaskell/stack/releases/tag/v0.1.3.0\" rel=\"nofollow noreferrer\">github.com/commercialhaskell/stack/releases/tag/v0.1.3.0</a>"}, {"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1445638264, "post_id": 33304155, "comment_id": 54423192, "body": "which version of stack are you using?"}, {"owner": {"reputation": 14545, "user_id": 42188, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b0abbefc6a9375882ea3cc0c6da61c8?s=128&d=identicon&r=PG", "display_name": "muhuk", "link": "https://stackoverflow.com/users/42188/muhuk"}, "reply_to_user": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1445671067, "post_id": 33304155, "comment_id": 54429533, "body": "@epsilonhalbe I have added the stack version. This is from Debian package repository (stretch)."}, {"owner": {"reputation": 14545, "user_id": 42188, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b0abbefc6a9375882ea3cc0c6da61c8?s=128&d=identicon&r=PG", "display_name": "muhuk", "link": "https://stackoverflow.com/users/42188/muhuk"}, "reply_to_user": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 1, "creation_date": 1445675299, "post_id": 33304155, "comment_id": 54430444, "body": "I tried to <code>stack upgrade</code> but it ends up in kernel panic. <i>Experimental</i> indeed."}, {"owner": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1445683540, "post_id": 33304155, "comment_id": 54432577, "body": "what about apt-get upgrade?? - if you are using the deb-repository"}, {"owner": {"reputation": 14545, "user_id": 42188, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b0abbefc6a9375882ea3cc0c6da61c8?s=128&d=identicon&r=PG", "display_name": "muhuk", "link": "https://stackoverflow.com/users/42188/muhuk"}, "reply_to_user": {"reputation": 14781, "user_id": 630160, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4445f21326af525a8ad19af7e3ae41a8?s=128&d=identicon&r=PG", "display_name": "epsilonhalbe", "link": "https://stackoverflow.com/users/630160/epsilonhalbe"}, "edited": false, "score": 0, "creation_date": 1445685822, "post_id": 33304155, "comment_id": 54433186, "body": "That&#39;s the current version. Packages take some time to get into the repositories unless packagers are devs/users of the project."}, {"owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "edited": false, "score": 0, "creation_date": 1445705915, "post_id": 33304155, "comment_id": 54439500, "body": "I&#39;d recommend following the installation guide here: <a href=\"https://github.com/commercialhaskell/stack/blob/master/doc/install_and_upgrade.md\" rel=\"nofollow noreferrer\">github.com/commercialhaskell/stack/blob/master/doc/&hellip;</a>"}], "owner": {"reputation": 14545, "user_id": 42188, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0b0abbefc6a9375882ea3cc0c6da61c8?s=128&d=identicon&r=PG", "display_name": "muhuk", "link": "https://stackoverflow.com/users/42188/muhuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1458268161, "creation_date": 1445608609, "last_edit_date": 1445671005, "question_id": 33304155, "link": "https://stackoverflow.com/questions/33304155/how-to-automatically-build-test-modules-with-stack", "title": "How to automatically build test modules with stack?", "body": "<p>I have this <code>Spec.hs</code>:</p>\n\n<pre><code>    import qualified OtherSpec\n\n    main :: IO ()\n    main = do\n        putStrLn \"Test...\"\n        OtherSpec.main\n</code></pre>\n\n<p>And I am planning to add more test suites from other modules to its <code>main</code>.</p>\n\n<p>When I run tests as:</p>\n\n<pre><code>$ stack test --file-watch\n</code></pre>\n\n<p>A few things happen:</p>\n\n<ul>\n<li>Tests are re-run when <code>OtherSpec.hs</code> is changed, but the test executable is not rebuilt.</li>\n<li>When I change <code>Spec.hs</code> test executable is rebuilt and changes in <code>OtherSpec.hs</code> is also picked.</li>\n</ul>\n\n<p>Is there a way to trigger a rebuild when <code>OtherSpec.hs</code> changes?</p>\n\n<hr>\n\n<p>I am using stack version 0.1.2.0.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 831, "user_id": 2198297, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d1c9129d47811254fac68d8561c9a50c?s=128&d=identicon&r=PG", "display_name": "andro", "link": "https://stackoverflow.com/users/2198297/andro"}, "edited": false, "score": 0, "creation_date": 1445604709, "post_id": 33297971, "comment_id": 54404330, "body": "RGB (0,0,0) is black, not white. CMYK (0,0,0,1) is also black (K is black). Not that this is the cause of the issue."}], "answers": [{"tags": [], "owner": {"reputation": 874, "user_id": 3842022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d9729ff4035657e7d6366611c28614?s=128&d=identicon&r=PG&f=1", "display_name": "C. Quilley", "link": "https://stackoverflow.com/users/3842022/c-quilley"}, "is_accepted": false, "score": 1, "last_activity_date": 1445590091, "creation_date": 1445590091, "answer_id": 33298289, "question_id": 33297971, "link": "https://stackoverflow.com/questions/33297971/rgb-to-cmyk-in-haskell/33298289#33298289", "title": "RGB to CMYK in Haskell", "body": "<p>The section <code>= (c, m, y, k)</code> in <code>rgb2cmyk (r,g,b) = (c,m,y,k)</code> is incorrect.</p>\n\n<p>When using guards, you should think of it as using something like </p>\n\n<pre><code>rgb2cmyk (r,g,b) = case (r,g,b) of\n           (0,0,0) -&gt; (0,0,0,1)\n           _       -&gt; ...\n</code></pre>\n\n<p>as this is what GHC will actually rewrite your guards into (this is the same with <code>if</code>, as well, which turns into <code>case predicate of...</code>).</p>\n\n<p>It doesn't make sense to write </p>\n\n<pre><code>rgb2cmyk (r,g,b) = (c,m,y,k)\n</code></pre>\n\n<p>And then later on have:</p>\n\n<pre><code>case (r,g,b) of ...\n</code></pre>\n\n<p>sitting as  a floating definition in your source file.</p>\n"}, {"tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": false, "score": 2, "last_activity_date": 1445593538, "creation_date": 1445593538, "answer_id": 33299366, "question_id": 33297971, "link": "https://stackoverflow.com/questions/33297971/rgb-to-cmyk-in-haskell/33299366#33299366", "title": "RGB to CMYK in Haskell", "body": "<p>You want to say <em>either</em></p>\n\n<pre><code>rgb2cmyk (r, g, b) = ...\n</code></pre>\n\n<p><em>or</em></p>\n\n<pre><code>rgb2cymk (r, g, b)\n  | ... = ...\n  | ... = ...\n</code></pre>\n\n<p>But not both at the same time. (Which expression would it execute?)</p>\n\n<p>As an aside, you don't actually need to test <code>(r,g,b) == (0,0,0)</code>; you can just pattern-match <code>(0,0,0)</code> directly.</p>\n\n<pre><code>rgb2cymk (0,0,0) = (0,0,0,1)\nrgb2cymk (r,g,b) = ???\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5476019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86787b409b3daf70f24081f3cbec8078?s=128&d=identicon&r=PG&f=1", "display_name": "Tigran Yuzbashian", "link": "https://stackoverflow.com/users/5476019/tigran-yuzbashian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1445596599, "creation_date": 1445589004, "last_edit_date": 1445596599, "question_id": 33297971, "link": "https://stackoverflow.com/questions/33297971/rgb-to-cmyk-in-haskell", "title": "RGB to CMYK in Haskell", "body": "<p>I'm suppposed to convert a given RGB color to CMYK format, and in case of white <code>(0,0,0)</code> I should get <code>(0,0,0,1)</code>. I've been trying this whole night but every time it crashes, could please someone tell what's wrong?</p>\n\n<pre><code>    rgb2cmyk :: (Int,Int,Int) -&gt; (Float,Float,Float,Float)\n    rgb2cmyk (r,g,b) = (c,m,y,k)\n        | (r,g,b) == (0,0,0) = (0,0,0,1)\n        | otherwise          = ((w - (r/255))/w, (w - (g/255))/w, (w - (b/255))/w, 1 - w)\n                               where\n                                w = maximum [r/255, g/255, b/255]\n</code></pre>\n\n<p>I get: <code>parse error on input '|'</code></p>\n"}, {"tags": ["haskell", "list-comprehension"], "answers": [{"comments": [{"owner": {"reputation": 4289, "user_id": 908293, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a30b8d0b807c736c457e506cd7f7f699?s=128&d=identicon&r=PG", "display_name": "saulspatz", "link": "https://stackoverflow.com/users/908293/saulspatz"}, "edited": false, "score": 0, "creation_date": 1445568527, "post_id": 33293643, "comment_id": 54387858, "body": "Thanks so much.  I recognize this now, but I can&#39;t imagine how I would ever have found it by myself."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 6, "last_activity_date": 1445565475, "last_edit_date": 1445565475, "creation_date": 1445565159, "answer_id": 33293643, "question_id": 33293608, "link": "https://stackoverflow.com/questions/33293608/haskell-list-comprehension-syntax/33293643#33293643", "title": "Haskell List comprehension syntax", "body": "<p>The <code>[a, b .. c]</code> syntax is intended to make an arithmetic progression that starts with <code>a</code> and <code>b</code>, and continues until it hits <code>c</code>. It's probably simplest explained with a few examples:</p>\n\n<pre><code>&gt; [3, 2 .. 0]\n[3,2,1,0]\n&gt; [2, 4 .. 10]\n[2,4,6,8,10]\n&gt; [3, 1 .. -10]\n[3,1,-1,-3,-5,-7,-9]\n</code></pre>\n\n<p>The Haskell Report section on <a href=\"https://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-400003.10\">Arithmetic Sequences</a>, together with the section on <a href=\"https://www.haskell.org/onlinereport/haskell2010/haskellch6.html#x13-1310006.3.4\">the <code>Enum</code> type class</a> have the full details:</p>\n\n<blockquote>\n  <p>Arithmetic sequences satisfy these identities:</p>\n\n<pre><code>[ e1.. ]      = enumFrom e1\n[ e1,e2.. ]   = enumFromThen e1 e2\n[ e1..e3 ]    = enumFromTo e1 e3\n[ e1,e2..e3 ] = enumFromThenTo e1 e2 e3\n</code></pre>\n  \n  <p>where <code>enumFrom</code>, <code>enumFromThen</code>, <code>enumFromTo</code>, and <code>enumFromThenTo</code> are class methods in the class <code>Enum</code> as defined in the <code>Prelude</code> (see Figure 6.1).</p>\n  \n  <p>For the types <code>Int</code> and <code>Integer</code>, the enumeration functions have the following meaning:</p>\n  \n  <ul>\n  <li>The sequence <code>enumFrom e1</code> is the list [e1,e1 + 1,e1 + 2,\u2026].</li>\n  <li>The sequence <code>enumFromThen e1 e2</code> is the list [e1,e1 + i,e1 + 2i,\u2026], where the increment, <code>i</code>, is <code>e2 \u2212 e1</code>. The increment may be zero or negative. If the increment is zero, all the list elements are the same.</li>\n  <li>The sequence <code>enumFromTo e1 e3</code> is the list [e1,e1 + 1,e1 + 2,\u2026e3]. The list is empty if <code>e1 &gt; e3</code>.</li>\n  <li>The sequence <code>enumFromThenTo e1 e2 e3</code> is the list [e1,e1 + i,e1 + 2i,\u2026e3], where the increment, <code>i</code>, is <code>e2 \u2212 e1</code>. If the increment is positive or zero, the list terminates when the next element would be greater than <code>e3</code>; the list is empty if <code>e1 &gt; e3</code>. If the increment is negative, the list terminates when the next element would be less than <code>e3</code>; the list is empty if <code>e1 &lt; e3</code>.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 4289, "user_id": 908293, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a30b8d0b807c736c457e506cd7f7f699?s=128&d=identicon&r=PG", "display_name": "saulspatz", "link": "https://stackoverflow.com/users/908293/saulspatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 1, "accepted_answer_id": 33293643, "answer_count": 1, "score": 1, "last_activity_date": 1445583538, "creation_date": 1445564946, "last_edit_date": 1445583538, "question_id": 33293608, "link": "https://stackoverflow.com/questions/33293608/haskell-list-comprehension-syntax", "title": "Haskell List comprehension syntax", "body": "<p>I'm trying to understand Brent Yorgey's multiset partition algorithm in the <a href=\"https://wiki.haskell.org/wikiupload/d/dd/TMR-Issue8.pdf\" rel=\"nofollow noreferrer\">Monad.Reader Issue 8</a>.  It's been a long time since I've written any Haskell, and I guess I've forgotten even basic stuff.  I'm stuck on the code in this listing:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eYEvD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eYEvD.png\" alt=\"enter image description here\"></a></p>\n\n<p>I should tell you that <code>Vec</code> is a type alias for <code>[Int]</code>, and that <code>&lt;|=</code> means componentwise comparison of vectors:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4wMDY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4wMDY.png\" alt=\"enter image description here\"></a></p>\n\n<p>The function <code>withinFromTo</code> is supposed to return a list of nonnegative vectors componentwise <code>&lt;= m</code>, and lexicographically between <code>s</code> and <code>e</code> (inclusive).</p>\n\n<p>I'm stuck on the line:</p>\n\n<pre><code>[x:xs | x &lt;- [start, (start-1)..end] \n</code></pre>\n\n<p>What does <code>[start, (start-1)..end]</code> mean?  I went to <a href=\"https://tryhaskell.org/\" rel=\"nofollow noreferrer\">tryhaskell.org</a> and tried evaluating <code>[3,2..7]</code> but it just gave me <code>[]</code>.</p>\n\n<p>I know this must seem like a stupid question, but I haven't been able to find anything by Googling, and I feel like I could read the docs for a long time before running across this.</p>\n\n<p>Thanks for your help.  </p>\n"}, {"tags": ["haskell", "existential-type"], "comments": [{"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 2, "creation_date": 1445563374, "post_id": 33293096, "comment_id": 54386701, "body": "<a href=\"http://stackoverflow.com/questions/9468963/runst-and-function-composition\">Related</a>."}, {"owner": {"reputation": 1958, "user_id": 939108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/055cba8d3eb565a817f6f7f20f936814?s=128&d=identicon&r=PG", "display_name": "Hjulle", "link": "https://stackoverflow.com/users/939108/hjulle"}, "reply_to_user": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 0, "creation_date": 1445563631, "post_id": 33293096, "comment_id": 54386746, "body": "As well as this one: <a href=\"http://stackoverflow.com/questions/8343239/type-error-with-rank-2-types-and-function-composition\" title=\"type error with rank 2 types and function composition\">stackoverflow.com/questions/8343239/&hellip;</a>."}, {"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 2, "creation_date": 1445563632, "post_id": 33293096, "comment_id": 54386748, "body": "In short: Haskell&#39;s type system is predictive, which means that it will not instantiate a type variable with a polymorphic type (one with <code>forall</code>s). In order for <code>bad</code> to typecheck, the type checker would need to instantiate some type variable with <code>forall (f :: * -&gt; *). Applicative f =&gt; f a</code>. Even if you turn on <code>-XImpredictiveTypes</code>, though, you&#39;ll still need a type annotation on <code>pure</code>."}, {"owner": {"reputation": 1958, "user_id": 939108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/055cba8d3eb565a817f6f7f20f936814?s=128&d=identicon&r=PG", "display_name": "Hjulle", "link": "https://stackoverflow.com/users/939108/hjulle"}, "edited": false, "score": 0, "creation_date": 1445564045, "post_id": 33293096, "comment_id": 54386836, "body": "Thanks to both of you. I should probably have researched better."}, {"owner": {"reputation": 1958, "user_id": 939108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/055cba8d3eb565a817f6f7f20f936814?s=128&d=identicon&r=PG", "display_name": "Hjulle", "link": "https://stackoverflow.com/users/939108/hjulle"}, "reply_to_user": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "edited": false, "score": 0, "creation_date": 1445564231, "post_id": 33293096, "comment_id": 54386880, "body": "@user3237465 Yes, that answers both of my questions. I&#39;m voting to close this as a duplicate."}, {"owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 3, "creation_date": 1445565855, "post_id": 33293096, "comment_id": 54387224, "body": "@user2407038, predicAtive and impredicAtive."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1445565937, "post_id": 33293096, "comment_id": 54387247, "body": "Never use <code>ImpredicativeTypes</code> unless it actually gets fixed some day."}], "answers": [{"tags": [], "owner": {"reputation": 1958, "user_id": 939108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/055cba8d3eb565a817f6f7f20f936814?s=128&d=identicon&r=PG", "display_name": "Hjulle", "link": "https://stackoverflow.com/users/939108/hjulle"}, "is_accepted": false, "score": 2, "last_activity_date": 1445571473, "last_edit_date": 1495541681, "creation_date": 1445571473, "answer_id": 33294487, "question_id": 33293096, "link": "https://stackoverflow.com/questions/33293096/type-error-when-using-function-composition-with-rankntypes/33294487#33294487", "title": "Type error when using function composition with RankNTypes", "body": "<p>As was explained in several comments, the problem is that the type system can't predict that this is a valid type, even though it is. In <a href=\"https://stackoverflow.com/a/9469942/939108\">this answer</a> there is a hint that you can specify the type of <code>.</code> explicitly to solve the problem.</p>\n\n<p>This code snippet works:</p>\n\n<pre><code>-- Type specialized composition\n(.!) :: ((forall f. Applicative f =&gt; f b) -&gt; c) -&gt;\n        (a -&gt; (forall f. Applicative f =&gt; f b)) -&gt; a -&gt; c\n(.!) f g x = f(g x)\n\n-- Use the new version of composition\nnotBad  :: a -&gt; A a\nnotBad  x = A .! pure $ x\n</code></pre>\n"}], "owner": {"reputation": 1958, "user_id": 939108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/055cba8d3eb565a817f6f7f20f936814?s=128&d=identicon&r=PG", "display_name": "Hjulle", "link": "https://stackoverflow.com/users/939108/hjulle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1445571558, "answer_count": 1, "score": 4, "last_activity_date": 1445571473, "creation_date": 1445560908, "last_edit_date": 1445561955, "question_id": 33293096, "link": "https://stackoverflow.com/questions/33293096/type-error-when-using-function-composition-with-rankntypes", "closed_reason": "Duplicate", "title": "Type error when using function composition with RankNTypes", "body": "<p>I am confused about the following program.</p>\n\n<pre><code>{-# LANGUAGE RankNTypes #-}\nnewtype A a = A ( forall f. Applicative f =&gt; f a )\n\ngood :: a -&gt; A a\ngood x = A $ pure $ x\n\nbad  :: a -&gt; A a\nbad  x = A . pure $ x\n</code></pre>\n\n<p>When trying to compile, I get this error message, complaining about <code>bad</code>:</p>\n\n<pre><code>Couldn't match type `f0 a'\n               with `forall (f :: * -&gt; *). Applicative f =&gt; f a'\nExpected type: f0 a -&gt; A a\n  Actual type: (forall (f :: * -&gt; *). Applicative f =&gt; f a) -&gt; A a\nRelevant bindings include\n  x :: a (bound at huh.hs:8:6)\n  bad :: a -&gt; A a (bound at huh.hs:8:1)\nIn the first argument of `(.)', namely `A'\nIn the expression: A . pure\n</code></pre>\n\n<p>Why does the function <code>good</code> typecheck, while ghc refuses to accept the function <code>bad</code>? And what could I do to make the latter version work? As far as I can see, both examples should be equivalent.</p>\n"}, {"tags": ["haskell", "functional-programming", "generic-programming", "dependent-type"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1445550182, "post_id": 33291226, "comment_id": 54382778, "body": "Search for &quot;variadic functions in Haskell&quot;"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1445550817, "post_id": 33291226, "comment_id": 54383070, "body": "<a href=\"http://okmij.org/ftp/Haskell/polyvariadic.html#polyvar-fn\" rel=\"nofollow noreferrer\">Specifically this</a>"}, {"owner": {"reputation": 42094, "user_id": 828361, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6a82397672dcc1fca31c32508ef0798b?s=128&d=identicon&r=PG", "display_name": "pigworker", "link": "https://stackoverflow.com/users/828361/pigworker"}, "edited": false, "score": 0, "creation_date": 1445814146, "post_id": 33291226, "comment_id": 54468853, "body": "I believe I may have had <a href=\"http://strictlypositive.org/faking.ps.gz\" rel=\"nofollow noreferrer\">something to say about this problem, long ago</a>. Some may still be in denial, but Haskell has, in practice, been really quite dependently typed for really quite a while."}], "answers": [{"comments": [{"owner": {"reputation": 1931, "user_id": 244384, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea4eb0cbde6a508a9c26a38a77624027?s=128&d=identicon&r=PG", "display_name": "danmcardle", "link": "https://stackoverflow.com/users/244384/danmcardle"}, "edited": false, "score": 0, "creation_date": 1445608636, "post_id": 33291431, "comment_id": 54406992, "body": "This isn&#39;t part of a larger project or anything. I was thinking about the Lambda Calculus and treating functions as data and I wondered if this could be done. Thank you for your answer!"}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 7, "last_activity_date": 1445551196, "last_edit_date": 1445551196, "creation_date": 1445550869, "answer_id": 33291431, "question_id": 33291226, "link": "https://stackoverflow.com/questions/33291226/is-it-possible-to-partially-apply-nth-parameter-in-haskell/33291431#33291431", "title": "Is it possible to partially apply nth parameter in Haskell?", "body": "<p>Your feeling is correct, this isn't possible. Partial application changes the type of a function, and in which way depends on what parameter you apply. But if that parameter is indexed only at runtime with an extra argument, the compiler doesn't know what the type will be, and the compiler must typecheck everything<sup>&dagger;</sup>. Really, you would need the result to have a <a href=\"https://en.wikipedia.org/wiki/Dependent_type\">dependent type</a>, but Haskell is not a dependently-typed language.</p>\n\n<p>Now, actually, if you toss in a couple of GHC extensions and introduce a couple of weird type families, then you can actually achieve something similar to such a dependent type. But honestly, I doubt this is a good idea. What do you need this for anyway? If you're juggling functions with more than, say, 8 parameters, you're probably doing something wrong, and for easier functions you can just define 8 combinators, each of which applies a single, fixed argument-position.</p>\n\n<p>Alternatively: a similar function that's perhaps reasonable would be</p>\n\n<pre><code>apply_nth :: ([a] -&gt; b) -&gt; Int -&gt; a -&gt; [a] -&gt; b\napply_nth f i a xs = f $ before ++ [a] ++ after\n where (before, after) = splitAt i xs\n</code></pre>\n\n<p>Unlike with argument-lists, a value-list can easily be hundreds of elements long, so in this case pre-applying single elements, indexed at runtime, can make sense.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup><sub>This isn't just a safety precaution \u2013 it's necessary because types don't even exist at runtime, so the compiler needs to complete prepare all conditionals that might depend on types. This is why Haskell is safe <em>and</em> concise <em>and</em> fast <em>and</em> extensible, like few other languages.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "is_accepted": false, "score": 4, "last_activity_date": 1445554954, "last_edit_date": 1445554954, "creation_date": 1445553704, "answer_id": 33291967, "question_id": 33291226, "link": "https://stackoverflow.com/questions/33291226/is-it-possible-to-partially-apply-nth-parameter-in-haskell/33291967#33291967", "title": "Is it possible to partially apply nth parameter in Haskell?", "body": "<p>Sure, with a bit of type class \"magic\":</p>\n\n<pre><code>{-# LANGUAGE DataKinds, KindSignatures, UndecidableInstances #-} \n\ndata Nat = Z | S Nat \n\ndata SNat (n :: Nat) where \n  SZ :: SNat Z \n  SS :: SNat n -&gt; SNat (S n) \n\nclass ApplyNth (n :: Nat) arg fn fn' | n arg fn -&gt; fn', n fn -&gt; arg where \n  applyNth :: SNat n -&gt; arg -&gt; fn -&gt; fn' \n\ninstance ApplyNth Z a (a -&gt; b) b where \n  applyNth SZ a f = f a \n\ninstance ApplyNth n arg' fn fn' =&gt; ApplyNth (S n) arg' (arg0 -&gt; fn) (arg0 -&gt; fn') where \n  applyNth (SS n) a f = \\a0 -&gt; applyNth n a (f a0)\n</code></pre>\n\n<p>The general type for <code>applyNth</code> says, it takes an index (a natural number - encoded in the type), an argument, a function, and returns a function.</p>\n\n<p>Note the two functional dependencies. The first says that given the index, the argument, and the input function, the type of the output function is known. This much is obvious. The second says that that given the index and the input function, <code>ApplyNth</code> is able to look inside the function and figure out what argument it needs!</p>\n\n<p>This function plays pretty well with type inference:</p>\n\n<pre><code>&gt;:t \\x -&gt; applyNth (SS SZ) x (^)\n\\x -&gt; applyNth (SS SZ) x (^)\n  :: (Num fn', Integral b) =&gt; b -&gt; fn' -&gt; fn'\n&gt;:t applyNth (SS SZ) 0 (^)\napplyNth (SS SZ) 0 (^) :: Num fn' =&gt; fn' -&gt; fn'\n&gt;:t applyNth (SS SZ) (0 :: Integer) (^)\napplyNth (SS SZ) (0 :: Integer) (^) :: Num fn' =&gt; fn' -&gt; fn'\n&gt;:t applyNth (SS SZ) ('a' :: Char) (^)\n\n&lt;interactive&gt;:1:32: Warning:\n    Could not deduce (Integral Char) arising from a use of `^'\n    ...\napplyNth (SS SZ) ('a' :: Char) (^) :: Num fn' =&gt; fn' -&gt; fn'\n&gt;let squared = applyNth (SS SZ) 2 (^)\n&gt;:t squared\nsquared :: Num fn' =&gt; fn' -&gt; fn'\n&gt;squared 3\n9\n&gt;squared 100\n10000\n&gt;let f a b c d e = mapM_ putStrLn \n      [ show n ++ \": \" ++ x \n      | (n,x) &lt;- zip [0..]  \n          [show a, show b, show c, show d, show e] ]\n&gt;applyNth SZ 'q' $ \n applyNth (SS $ SZ) [1,8,42] $ \n applyNth SZ (True, 10) $ \n applyNth (SS $ SS $ SS SZ) \"abcd\" $ \n applyNth (SS $ SS $ SS SZ) pi $\n f\n0: (True,10)\n1: 'q'\n2: [1,8,42]\n3: 3.141592653589793\n4: \"abcd\"\n</code></pre>\n\n<p>You can also define it in operator form:</p>\n\n<pre><code>infixl 9 =:\n(=:) :: ApplyNth n arg fn fn' =&gt; SNat n -&gt; arg -&gt; fn -&gt; fn' \n(=:) = applyNth\n\nr = \n SZ =: 'q' $ \n SS SZ =: [1,8,42] $ \n SZ =: (True, 10) $ \n (SS $ SS $ SS SZ) =: \"abcd\" $ \n (SS $ SS $ SS SZ) =: pi $ \n f\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22266, "user_id": 649287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0ea0055b84020bf860c05f53ba53d5?s=128&d=identicon&r=PG", "display_name": "augustss", "link": "https://stackoverflow.com/users/649287/augustss"}, "edited": false, "score": 1, "creation_date": 1445614834, "post_id": 33292037, "comment_id": 54411494, "body": "As he says:  Don&#39;t do this!"}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "reply_to_user": {"reputation": 22266, "user_id": 649287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0ea0055b84020bf860c05f53ba53d5?s=128&d=identicon&r=PG", "display_name": "augustss", "link": "https://stackoverflow.com/users/649287/augustss"}, "edited": false, "score": 0, "creation_date": 1445615978, "post_id": 33292037, "comment_id": 54412214, "body": "Yes, certainly worth repeating."}], "tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": false, "score": 1, "last_activity_date": 1445554959, "last_edit_date": 1495540313, "creation_date": 1445554123, "answer_id": 33292037, "question_id": 33291226, "link": "https://stackoverflow.com/questions/33291226/is-it-possible-to-partially-apply-nth-parameter-in-haskell/33292037#33292037", "title": "Is it possible to partially apply nth parameter in Haskell?", "body": "<p>Not inside of any language called \"Haskell\" but if you look at Glasgow Haskell, including unsafe functions, then you can partially apply in the manner you desire... well you do have to correctly specify the argument location.   THIS IS A HORRIBLE HACK.  Do not do this unless you are extremely comfortable with... well.. don't do this.</p>\n\n<p>This code is from back when I asked a similar question (<a href=\"https://stackoverflow.com/questions/5745302/using-typeable-to-partially-apply-function-at-run-time-any-time-types-match\">Using Typeable to partially apply function at run-time (any time types match)</a>).</p>\n\n<pre><code>import Unsafe.Coerce\n\ntestBuild :: String\ntestBuild = let f = buildFunc typedFunction (\"argument 'b'\", 42::Int) 1\n            in f \"Look I have applied \" \" and it seems to work.\"\n\ntypedFunction :: String -&gt; (String,Int) -&gt; String -&gt; String\ntypedFunction = (\\a b c -&gt; a ++ show b ++ c)\n\nbuildFunc :: f -&gt; x -&gt; Int -&gt; g\nbuildFunc f x 0 = unsafeCoerce f x\nbuildFunc f x i =\n      let res = \\y -&gt; (buildFunc (unsafeCoerce f y) x (i-1))\n      in unsafeCoerce res\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>*Main&gt; testBuild\n\"Look I have applied (\\\"argument 'b'\\\",42) and it seems to work.\"\n</code></pre>\n\n<p>Notice if we specified the argument index (1) incorrectly then the program would likely segfault.</p>\n"}, {"tags": [], "owner": {"reputation": 11986, "user_id": 3237465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vOArX.png?s=128&g=1", "display_name": "user3237465", "link": "https://stackoverflow.com/users/3237465/user3237465"}, "is_accepted": false, "score": 8, "last_activity_date": 1445560670, "last_edit_date": 1445560670, "creation_date": 1445554948, "answer_id": 33292189, "question_id": 33291226, "link": "https://stackoverflow.com/questions/33291226/is-it-possible-to-partially-apply-nth-parameter-in-haskell/33292189#33292189", "title": "Is it possible to partially apply nth parameter in Haskell?", "body": "<p>Not that weird type families, but not super nice either:</p>\n\n<pre><code>{-# LANGUAGE GADTs, DataKinds, TypeFamilies, TypeOperators #-}\n\nimport Data.Proxy\n\ntype family Fun as b where\n    Fun '[]       b = b\n    Fun (a ': as) b = a -&gt; Fun as b\n\ndata SL as where\n    Sn :: SL '[]\n    Sc :: SL as -&gt; SL (a ': as)\n\napplyN :: Proxy c -&gt; SL as -&gt; Fun as (b -&gt; c) -&gt; b -&gt; Fun as c\napplyN p  Sn    f y = f y\napplyN p (Sc s) f y = \\x -&gt; applyN p s (f x) y\n\nmain = print $ applyN Proxy (Sc (Sc Sn)) zipWith [1,2,3] (-) [6,5,4] -- [5,3,1]\n</code></pre>\n\n<p>We can also package <code>Proxy c</code> into <code>SL</code>:</p>\n\n<pre><code>data SL as c where\n    Sn :: SL '[] c\n    Sc :: SL as c -&gt; SL (a ': as) c\n\napplyN :: SL as c -&gt; Fun as (b -&gt; c) -&gt; b -&gt; Fun as c\napplyN  Sn    f y = f y\napplyN (Sc s) f y = \\x -&gt; applyN s (f x) y\n\nmain = print $ applyN (Sc (Sc Sn)) zipWith [1,2,3] (-) [6,5,4] -- [5,3,1]\n</code></pre>\n\n<p>Or you can simply define a few combinators:</p>\n\n<pre><code>z = id\ns r f y x = r (f x) y\napplyN = id\n\nmain = print $ applyN (s (s z)) zipWith [1,2,3] (-) [6,5,4] -- [5,3,1]\n</code></pre>\n"}], "owner": {"reputation": 1931, "user_id": 244384, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea4eb0cbde6a508a9c26a38a77624027?s=128&d=identicon&r=PG", "display_name": "danmcardle", "link": "https://stackoverflow.com/users/244384/danmcardle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 1, "accepted_answer_id": 33291431, "answer_count": 4, "score": 9, "last_activity_date": 1445614235, "creation_date": 1445549834, "last_edit_date": 1445614235, "question_id": 33291226, "link": "https://stackoverflow.com/questions/33291226/is-it-possible-to-partially-apply-nth-parameter-in-haskell", "title": "Is it possible to partially apply nth parameter in Haskell?", "body": "<p>I am curious if it is possible to write a function <code>apply_nth</code> that takes a function, the number of a parameter, and that parameter's value and then returns a new, partially-applied function.</p>\n\n<p>The feeling I get is that this is impossible due to the type system, but I can't come up with a satisfying answer. I also can't come up with a working type signature.</p>\n\n<p>If the language were more loosely-typed, I imagine the code might look like this.</p>\n\n<pre><code>apply_nth f 0 x = f x\napply_nth f n x = \\a -&gt; apply_nth (f a) (n-1) x\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445584090, "post_id": 33290441, "comment_id": 54392479, "body": "have you tried a combination of smth like Emaca+<code>stack-mode</code>+<code>stack-ide-client</code>+Flycheck? works awesome for me but haven&#39;t tried it with gloss."}, {"owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "edited": false, "score": 1, "creation_date": 1445594016, "post_id": 33290441, "comment_id": 54397898, "body": "More information like how long it&#39;s taking and what --verbose says would help. Also, have you tried --file-watch?"}], "owner": {"reputation": 44680, "user_id": 1031791, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fb710534fda446d2286074bb7692e65a?s=128&d=identicon&r=PG", "display_name": "MaiaVictor", "link": "https://stackoverflow.com/users/1031791/maiavictor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1445612350, "creation_date": 1445546730, "last_edit_date": 1495542594, "question_id": 33290441, "link": "https://stackoverflow.com/questions/33290441/stack-build-takes-too-long-to-deliver-error-messages-how-can-i-improve-it", "title": "`stack build` takes too long to deliver error messages. How can I improve it?", "body": "<p>I'm using stack to organize my Haskell projects as follows:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 ProjectA\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Main.hs\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ProjectA.cabal\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Setup.hs\n\u251c\u2500\u2500 ProjectB\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Main.hs\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ProjectB.cabal\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Setup.hs\n\u251c\u2500\u2500 ProjectC\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Main.hs\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ProjectC.cabal\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Setup.hs\n\u2514\u2500\u2500 stack.yaml\n</code></pre>\n\n<p>That is, I have many directories, each one containing a package, and a single stack environment containing those. During my workflow, I'm using <code>stack build</code> to get compile errors and guide my work. The issue with that is it takes way too long to give me proper error messages, and it rebuilds every dependency of every file I edited. I like to work interactively - that is, I edit a few lines of code, compile, repeat - always editing only one file at once. That is slowing down my workflow considerably.</p>\n\n<p>Before using <code>stack</code> (with global installs), I would just run GHCI on the file I was editing, but <a href=\"https://stackoverflow.com/questions/33288131/stack-ghci-fails-when-you-include-a-project-which-imports-gloss\">that doesn't work anymore</a>. Is there any way to speed up getting error messages on my setup?</p>\n\n<p>This is the output of <code>stack build --verbose</code>:</p>\n\n<pre><code>2015-10-23 14:58:29.987203: [debug] Checking for project config at: /Users/v/hs/stack.yaml @(stack-0.1.2.0:Stack.Config src/Stack/Config.hs:496:9)\n2015-10-23 14:58:29.987438: [debug] Loading project config file stack.yaml @(stack-0.1.2.0:Stack.Config src/Stack/Config.hs:519:13)\n2015-10-23 14:58:29.997623: [debug] Run process: ghc --info @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:30.097836: [debug] Run process: ghc --numeric-version @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:30.164305: [debug] Run process: ghc-pkg --no-user-package-db field --simple-output Cabal id @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:30.210596: [debug] Run process: ghc-pkg --no-user-package-db list --global @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:30.272135: [debug] Checking resolver: lts-3.7 @(stack-0.1.2.0:Stack.Build.Source src/Stack/Build/Source.hs:86:13)\n2015-10-23 14:58:30.609624: [debug] Run process: ghc-pkg --global --no-user-package-db dump --expand-pkgroot @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:30.69387: [debug] Run process: ghc-pkg --user --no-user-package-db --package-db /Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ dump --expand-pkgroot @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:30.767327: [debug] Run process: ghc-pkg --user --no-user-package-db --package-db /Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/pkgdb/ dump --expand-pkgroot @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:31.82109: [debug] Run process: ghc-pkg --no-user-package-db list --global @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:31.867523: [info] Game-0.1.0.0-d9d944cf39a7cec36b48d4a724502fa6: unregistering (missing dependencies: Image) @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:315:17)\n2015-10-23 14:58:31.867867: [debug] Run process: ghc-pkg --no-user-package-db --package-db=/Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/pkgdb/ unregister --user --force Game-0.1.0.0 @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:31.958876: [info] Image-0.1.0.0-6944dffdf3e7e7ee0a9401deccf4f104: unregistering (local file changes) @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:315:17)\n2015-10-23 14:58:31.959184: [debug] Run process: ghc-pkg --no-user-package-db --package-db=/Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/pkgdb/ unregister --user --force Image-0.1.0.0 @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:32.052864: [info] Image-0.1.0.0: build @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:490:18)\n2015-10-23 14:58:32.053139: [debug] Run process: /Applications/ghc-7.10.2.app/Contents/bin/runhaskell -package=Cabal-1.22.4.0 -clear-package-db -global-package-db -package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ /var/folders/1r/s4q2bscs1xqfzl1913c0wwbm0000gn/T/stack3896/Setup.hs --builddir=.stack-work/dist/x86_64-osx/Cabal-1.22.4.0/ build @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:591:13)\n2015-10-23 14:58:36.437519: [info] Image-0.1.0.0: install @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:490:18)\n2015-10-23 14:58:36.437713: [debug] Run process: /Applications/ghc-7.10.2.app/Contents/bin/runhaskell -package=Cabal-1.22.4.0 -clear-package-db -global-package-db -package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ /var/folders/1r/s4q2bscs1xqfzl1913c0wwbm0000gn/T/stack3896/Setup.hs --builddir=.stack-work/dist/x86_64-osx/Cabal-1.22.4.0/ install @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:591:13)\n2015-10-23 14:58:37.063125: [debug] Run process: ghc-pkg --no-user-package-db --package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ --package-db=/Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/pkgdb/ field --simple-output Image id @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:37.139879: [info] Game-0.1.0.0: build @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:490:18)\n2015-10-23 14:58:37.140276: [debug] Run process: /Applications/ghc-7.10.2.app/Contents/bin/runhaskell -package=Cabal-1.22.4.0 -clear-package-db -global-package-db -package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ /var/folders/1r/s4q2bscs1xqfzl1913c0wwbm0000gn/T/stack3896/Setup.hs --builddir=.stack-work/dist/x86_64-osx/Cabal-1.22.4.0/ build @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:591:13)\n2015-10-23 14:58:38.232964: [info] Game-0.1.0.0: install @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:490:18)\n2015-10-23 14:58:38.233154: [debug] Run process: /Applications/ghc-7.10.2.app/Contents/bin/runhaskell -package=Cabal-1.22.4.0 -clear-package-db -global-package-db -package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ /var/folders/1r/s4q2bscs1xqfzl1913c0wwbm0000gn/T/stack3896/Setup.hs --builddir=.stack-work/dist/x86_64-osx/Cabal-1.22.4.0/ install @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:591:13)\n2015-10-23 14:58:38.85603: [debug] Run process: ghc-pkg --no-user-package-db --package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ --package-db=/Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/pkgdb/ field --simple-output Game id @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:38.931549: [info] Test-0.1.0.0: build @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:490:18)\n2015-10-23 14:58:38.931772: [debug] Run process: /Applications/ghc-7.10.2.app/Contents/bin/runhaskell -package=Cabal-1.22.4.0 -clear-package-db -global-package-db -package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ /var/folders/1r/s4q2bscs1xqfzl1913c0wwbm0000gn/T/stack3896/Setup.hs --builddir=.stack-work/dist/x86_64-osx/Cabal-1.22.4.0/ build @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:591:13)\n2015-10-23 14:58:42.550672: [info] Test-0.1.0.0: install @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:490:18)\n2015-10-23 14:58:42.550859: [debug] Run process: /Applications/ghc-7.10.2.app/Contents/bin/runhaskell -package=Cabal-1.22.4.0 -clear-package-db -global-package-db -package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ /var/folders/1r/s4q2bscs1xqfzl1913c0wwbm0000gn/T/stack3896/Setup.hs --builddir=.stack-work/dist/x86_64-osx/Cabal-1.22.4.0/ install @(stack-0.1.2.0:Stack.Build.Execute src/Stack/Build/Execute.hs:591:13)\n2015-10-23 14:58:43.308516: [debug] Run process: ghc-pkg --no-user-package-db --package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ --package-db=/Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/pkgdb/ field --simple-output Test id @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\n2015-10-23 14:58:43.381165: [debug] Run process: ghc-pkg --no-user-package-db --package-db=/Users/v/.stack/snapshots/x86_64-osx/lts-3.7/7.10.2/pkgdb/ --package-db=/Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/pkgdb/ field --simple-output Test id @(stack-0.1.2.0:System.Process.Read src/System/Process/Read.hs:254:3)\nCompleted all 3 actions.\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 4, "creation_date": 1445542198, "post_id": 33289107, "comment_id": 54378220, "body": "Where&#39;s <code>Time</code> from?"}, {"owner": {"reputation": 153, "user_id": 4900963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf5ff5469abea2ab3f5fc7e72ff514fe?s=128&d=identicon&r=PG&f=1", "display_name": "Noli", "link": "https://stackoverflow.com/users/4900963/noli"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1445542375, "post_id": 33289107, "comment_id": 54378326, "body": "I&#39;m sorry, Time and other Parameters are declared elsewhere, should I post them as well?"}, {"owner": {"reputation": 48129, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 5, "creation_date": 1445542443, "post_id": 33289107, "comment_id": 54378372, "body": "you probably just have to add <code>deriving (Eq, ...)</code> to your definition of <code>Time</code> (I guess you already have <code>deriving (Show)</code> so it&#39;s <code>deriving (Show, Eq)</code>"}, {"owner": {"reputation": 153, "user_id": 4900963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf5ff5469abea2ab3f5fc7e72ff514fe?s=128&d=identicon&r=PG&f=1", "display_name": "Noli", "link": "https://stackoverflow.com/users/4900963/noli"}, "edited": false, "score": 2, "creation_date": 1445542489, "post_id": 33289107, "comment_id": 54378405, "body": "Ahhh omg Thank you!! You already helped me with THAT question! :D Time was declared as follows: data Time = Time Hours Minutes             deriving(Show) it has to be data Time = Time Hours Minutes             deriving(Show, Eq) Yes Thank you guys!"}], "answers": [{"tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": false, "score": 6, "last_activity_date": 1445546885, "last_edit_date": 1445546885, "creation_date": 1445542860, "answer_id": 33289340, "question_id": 33289107, "link": "https://stackoverflow.com/questions/33289107/haskell-error-no-instance-fo-eq-time-arising-from-a-use-of/33289340#33289340", "title": "Haskell error: &quot;No instance fo (Eq Time) arising from a use of &#39;==&#39;", "body": "<p>Instead of using <code>==</code>, you can just pattern-match:</p>\n\n<pre><code>nextMinute :: Date -&gt; Time -&gt; DateTime\nnextMinute date (Time 23 59) = DateTime (tomorrow date) newDay\nnextMinute date time         = DateTime date            (timeSucc time)\n</code></pre>\n\n<p>It's probably fine to add <code>Eq</code> to your <code>Time</code> type, but there's no particular need to, when there's an equally good solution with pattern matching.</p>\n"}, {"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 5, "last_activity_date": 1445586395, "last_edit_date": 1445586395, "creation_date": 1445549388, "answer_id": 33291116, "question_id": 33289107, "link": "https://stackoverflow.com/questions/33289107/haskell-error-no-instance-fo-eq-time-arising-from-a-use-of/33291116#33291116", "title": "Haskell error: &quot;No instance fo (Eq Time) arising from a use of &#39;==&#39;", "body": "<p>Equality comparison is a bit of a code smell in Haskell. If you find yourself using it, always consider whether you shouldn't better use pattern matching, as demonstrated in amalloy's answer. Pattern matching tends to be more efficient, and often still works even when equality really isn't possible (e.g. on infinite-length lists<sup>&dagger;</sup>).</p>\n\n<p>Apart from that, IMO there are types where you should better avoid any assumption of equality altogether. This includes all types representing some continuous physical quantity, like indeed time. Mathematically speaking, two such values are <a href=\"https://en.wikipedia.org/wiki/Almost_everywhere\" rel=\"nofollow\">effectively never equal</a>. From a more practical viewpoint, your approach has the risk that if you somehow overshoot the exact value <code>23:59</code> (e.g. add a minute <em>and a second</em> before checking the date transition), then the wrap will <em>never</em> happen at all!</p>\n\n<p>Therefore, I recommend to only compare such values with less/greater operators.</p>\n\n<pre><code>nextMinute :: Date -&gt; Time -&gt; DateTime\nnextMinute date time\n  | h' &gt;= 24   = DateTime (tomorrow date) newDay\n  | otherwise  = DateTime date na\u00efveSucc\n where na\u00efveSucc@(Time h' _) = timeSucc time\n</code></pre>\n\n<hr>\n\n<p><sup>&dagger;</sup><sub>In fact equality on infinite-length list has the much the same problem as equality on real numbers, if you picture those as infinite-length decimal expansions. Of course, the numeric types we normally use aren't in fact infinite-precision, but curiously it often helps to pretend so: really, floating point numbers are subject to all kinds of nasty uncertainty issues, but if you simply don't attempt to compare <em>all</em> digits but only a lazy selection, then you'll be mostly fine.</sub></p>\n\n<hr>\n\n<p>As dfeuer remarks, you can also compare <code>Time</code>s directly with <code>&lt;</code>, if you make an <code>Ord</code> instance. Like <code>Eq</code>, this can be derived automatically</p>\n\n<pre><code>data Time = Time { ... }\n deriving (Show, Eq, Ord)\n</code></pre>\n\n<p>but watch out: the record fields need to be in the correct order for lexicographic order to make sense (you don't want <code>9:45 &gt; 10:15</code>!)</p>\n"}], "owner": {"reputation": 153, "user_id": 4900963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf5ff5469abea2ab3f5fc7e72ff514fe?s=128&d=identicon&r=PG&f=1", "display_name": "Noli", "link": "https://stackoverflow.com/users/4900963/noli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 33291116, "answer_count": 2, "score": 2, "last_activity_date": 1445586395, "creation_date": 1445542069, "last_edit_date": 1445542460, "question_id": 33289107, "link": "https://stackoverflow.com/questions/33289107/haskell-error-no-instance-fo-eq-time-arising-from-a-use-of", "title": "Haskell error: &quot;No instance fo (Eq Time) arising from a use of &#39;==&#39;", "body": "<p>I'm pretty new to Haskell and I don't get why I can't compare those 2 variables.\nI have this function:</p>\n\n<pre><code>nextMinute :: Date -&gt; Time -&gt; DateTime\nnextMinute date time = if time == Time 23 59\n                       then DateTime (tomorrow date) newDay\n                       else DateTime date (timeSucc time)\n</code></pre>\n\n<p>I get this error message:</p>\n\n<pre><code>Time.hs:88:32:\n    No instance for (Eq Time) arising from a use of \u2018==\u2019\n    In the expression: time == Time 23 59\n    In the expression:\n      if time == Time 23 59 then\n          DateTime date newDay\n      else\n          DateTime date (timeSucc time)\n    In an equation for \u2018nextMinute\u2019:\n        nextMinute date time\n          = if time == Time 23 59 then\n                DateTime date newDay\n            else\n                DateTime date (timeSucc time)\n</code></pre>\n"}, {"tags": ["haskell", "ghc"], "comments": [{"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 1, "creation_date": 1445542904, "post_id": 33288935, "comment_id": 54378655, "body": "Why not just use GHC 7.8? Using hugs I wouldn&#39;t recommend"}, {"owner": {"reputation": 213, "user_id": 4161344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ccd329999b243f2cd7f1e19de60940d?s=128&d=identicon&r=PG&f=1", "display_name": "algotrific", "link": "https://stackoverflow.com/users/4161344/algotrific"}, "reply_to_user": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 2, "creation_date": 1445547592, "post_id": 33288935, "comment_id": 54381483, "body": "I agree that I would not recommend Hugs.  But, since using GHC 7.10 and later also has fairly easy workarounds, neither would I recommend GHC 7.8."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 1, "creation_date": 1445548631, "post_id": 33288935, "comment_id": 54381982, "body": "I guess I should have asked: what makes you want 7.10 for teaching? They&#39;re both great compilers, supported by stackage lts, equally easy to install, etc. Actually aren&#39;t there some issues with latest 7.10 on macs?"}, {"owner": {"reputation": 213, "user_id": 4161344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ccd329999b243f2cd7f1e19de60940d?s=128&d=identicon&r=PG&f=1", "display_name": "algotrific", "link": "https://stackoverflow.com/users/4161344/algotrific"}, "reply_to_user": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1445552350, "post_id": 33288935, "comment_id": 54383719, "body": "Disclaimer: I only teach on an ad-hoc basis, so this is not a professional instructor speaking. I prefer using current tools, and the people I &quot;teach&quot;/help seem to also prefer current tools.  They are less buggy, better supported, and as the learner gains mastery, they can smoothly transition into using the tool for real work.  Specifically for GHC, since I use 7.10, I can help others when it comes to finer points, like getting and IDE working, or working with interesting libraries when the learner wants to explore something that&#39;s captured their interest."}, {"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "reply_to_user": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1445584391, "post_id": 33288935, "comment_id": 54392632, "body": "@jberryman: works fine on my 10.9.5. also one can&#39;t forever remain on 7.8, even if it&#39;s for teaching."}], "answers": [{"comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 3, "creation_date": 1445584491, "post_id": 33288936, "comment_id": 54392683, "body": "or better yet: define your own comppat. module based on bitemyapp&#39;s answer, and let them see and understand its contents."}], "tags": [], "owner": {"reputation": 213, "user_id": 4161344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ccd329999b243f2cd7f1e19de60940d?s=128&d=identicon&r=PG&f=1", "display_name": "algotrific", "link": "https://stackoverflow.com/users/4161344/algotrific"}, "is_accepted": false, "score": 7, "last_activity_date": 1445541418, "creation_date": 1445541418, "answer_id": 33288936, "question_id": 33288935, "link": "https://stackoverflow.com/questions/33288935/making-ghc-post-ftp-feel-pre-ftp/33288936#33288936", "title": "Making GHC post FTP feel pre-FTP", "body": "<p>One option demonstrated as follows:</p>\n\n<pre><code>$ ghci\nPrelude&gt; import Prelude hiding (length, sum, product, foldr, foldl, and, or, any, all)\nPrelude&gt; import GHC.OldList\nPrelude GHC.OldList&gt; \n</code></pre>\n\n<p>Then you get the old types for everything that was hidden, e.g. </p>\n\n<pre><code>length :: [a] -&gt; Int\nsum :: Num a =&gt; [a] -&gt; a\nproduct :: Num a =&gt; [a] -&gt; a\nfoldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b\nfoldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b\nand :: [Bool] -&gt; Bool\nany :: (a -&gt; Bool) -&gt; [a] -&gt; Bool\nall :: (a -&gt; Bool) -&gt; [a] -&gt; Bool\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1601, "user_id": 1205702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2fd2313df8f6f65266cf7a4f1979b?s=128&d=identicon&r=PG", "display_name": "bitemyapp", "link": "https://stackoverflow.com/users/1205702/bitemyapp"}, "is_accepted": true, "score": 9, "last_activity_date": 1445542260, "creation_date": 1445542260, "answer_id": 33289174, "question_id": 33288935, "link": "https://stackoverflow.com/questions/33288935/making-ghc-post-ftp-feel-pre-ftp/33289174#33289174", "title": "Making GHC post FTP feel pre-FTP", "body": "<p>That could work fine, but we decided to go with something less tedious for <a href=\"http://haskellbook.com/\">http://haskellbook.com/</a>, what we did was we explained what changed and show them how you could assert the list-based type.</p>\n\n<pre><code>Prelude&gt; :t length\nlength :: Foldable t =&gt; t a -&gt; Int\nPrelude&gt; :t length :: [a] -&gt; Int\nlength :: [a] -&gt; Int\n</code></pre>\n\n<p>Between that and the types asserted in the examples &amp; exercises, this has sufficed and if they accidentally encounter a type with Foldable in it, it doesn't cause trouble because we've told them how things changed.</p>\n\n<p>Making them import stuff and not bothering to tell them what happened seems brittle, as they'll get confused if they get off the happy path.</p>\n"}], "owner": {"reputation": 213, "user_id": 4161344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ccd329999b243f2cd7f1e19de60940d?s=128&d=identicon&r=PG&f=1", "display_name": "algotrific", "link": "https://stackoverflow.com/users/4161344/algotrific"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 33289174, "answer_count": 2, "score": 6, "last_activity_date": 1445542260, "creation_date": 1445541418, "question_id": 33288935, "link": "https://stackoverflow.com/questions/33288935/making-ghc-post-ftp-feel-pre-ftp", "title": "Making GHC post FTP feel pre-FTP", "body": "<p>For teaching Haskell to beginners using the recent version of GHC, the types of some functions can be confusing due to the Foldable-Traversable-in-Prelude (FTP).  For example, basic functions on lists such as <code>length</code>, <code>sum</code> and <code>product</code> have types that include the <code>Foldable</code> constraint <code>foldr :: Foldable t =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b</code>. Similarly for some introductory higher order functions e.g. <code>foldl :: Foldable t =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b</code>.</p>\n\n<p>What is a lightweight way of temporarily enabling pre-FTP behaviour?  Then beginners can still enjoy all the benefits of a recent GHC, and don't have to resort to trying to install older versions, or using Hugs (e.g. as suggested for edX's FP101x 2015 edition).</p>\n"}, {"tags": ["haskell", "ghci", "haskell-stack", "gloss"], "comments": [{"owner": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445596733, "post_id": 33288131, "comment_id": 54399509, "body": "have you opened an issue for this on <a href=\"https://github.com/benl23x5/gloss\" rel=\"nofollow noreferrer\">github.com/benl23x5/gloss</a> / <a href=\"http://gloss.ouroborus.net\" rel=\"nofollow noreferrer\">gloss.ouroborus.net</a>?"}, {"owner": {"reputation": 44680, "user_id": 1031791, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fb710534fda446d2286074bb7692e65a?s=128&d=identicon&r=PG", "display_name": "MaiaVictor", "link": "https://stackoverflow.com/users/1031791/maiavictor"}, "reply_to_user": {"reputation": 33184, "user_id": 247623, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bb9e67348d3e0e93ef12dd97c41a6c22?s=128&d=identicon&r=PG&f=1", "display_name": "Erik Kaplun", "link": "https://stackoverflow.com/users/247623/erik-kaplun"}, "edited": false, "score": 0, "creation_date": 1445948156, "post_id": 33288131, "comment_id": 54529931, "body": "Sad thing their repository doesn&#39;t have an issue forum. I&#39;ll eventually try the official ticket system on their site. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 3821616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ks3v3.png?s=128&g=1", "display_name": "magamig", "link": "https://stackoverflow.com/users/3821616/magamig"}, "is_accepted": true, "score": 1, "last_activity_date": 1449014205, "creation_date": 1449014205, "answer_id": 34032542, "question_id": 33288131, "link": "https://stackoverflow.com/questions/33288131/stack-ghci-fails-when-you-include-a-project-which-imports-gloss/34032542#34032542", "title": "`stack ghci` fails when you include a project which imports Gloss", "body": "<p>Tried this in my system and it worked:</p>\n\n<pre><code>cabal install GLUT --ghc-options=\"-optl-Wl,-framework,GLUT\" --reinstall --jobs=1\n</code></pre>\n\n<p>I found this solution here: <a href=\"https://github.com/haskell-opengl/GLUT/issues/19\" rel=\"nofollow\">Trouble building applications with Haskell GLUT and freeglut on OS X with GHC 7.10.1</a></p>\n"}], "owner": {"reputation": 44680, "user_id": 1031791, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fb710534fda446d2286074bb7692e65a?s=128&d=identicon&r=PG", "display_name": "MaiaVictor", "link": "https://stackoverflow.com/users/1031791/maiavictor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 34032542, "answer_count": 1, "score": 3, "last_activity_date": 1449014205, "creation_date": 1445538477, "question_id": 33288131, "link": "https://stackoverflow.com/questions/33288131/stack-ghci-fails-when-you-include-a-project-which-imports-gloss", "title": "`stack ghci` fails when you include a project which imports Gloss", "body": "<p>If you import Gloss within a Stack project and use <code>stack ghci</code>, you get the following error:</p>\n\n<pre><code>GHCi, version 7.10.2: http://www.haskell.org/ghc/  :? for help\n&lt;command line&gt;: can't load .so/.DLL for: /Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/lib/x86_64-osx-ghc-7.10.2/GLUT-2.7.0.3-FFXiDYE1CfiDHjNKroBerv/libHSGLUT-2.7.0.3-FFXiDYE1CfiDHjNKroBerv-ghc7.10.2.dylib (dlopen(/Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/lib/x86_64-osx-ghc-7.10.2/GLUT-2.7.0.3-FFXiDYE1CfiDHjNKroBerv/libHSGLUT-2.7.0.3-FFXiDYE1CfiDHjNKroBerv-ghc7.10.2.dylib, 5): Symbol not found: _glutBitmap8By13\n  Referenced from: /Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/lib/x86_64-osx-ghc-7.10.2/GLUT-2.7.0.3-FFXiDYE1CfiDHjNKroBerv/libHSGLUT-2.7.0.3-FFXiDYE1CfiDHjNKroBerv-ghc7.10.2.dylib\n  Expected in: flat namespace\n in /Users/v/hs/.stack-work/install/x86_64-osx/lts-3.7/7.10.2/lib/x86_64-osx-ghc-7.10.2/GLUT-2.7.0.3-FFXiDYE1CfiDHjNKroBerv/libHSGLUT-2.7.0.3-FFXiDYE1CfiDHjNKroBerv-ghc7.10.2.dylib)\n</code></pre>\n\n<p>How can that be fixed?</p>\n"}]