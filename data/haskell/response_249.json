[{"tags": ["haskell"], "comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571303885, "post_id": 58422859, "comment_id": 103199064, "body": "&quot;Doing what you suggested it got a ton further&quot; is not at all clear what do you have exactly. you should post a new question with all its relevant code and error messages. :)"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571303976, "post_id": 58422859, "comment_id": 103199100, "body": "@WillNess the problem now is in <code>trace l ++ [x] ++ trace</code>, but that really doesn&#39;t warrant a new question."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 9314038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc62e2b07f9d964f5d86363da700606?s=128&d=identicon&r=PG&f=1", "display_name": "William Poole", "link": "https://stackoverflow.com/users/9314038/william-poole"}, "edited": false, "score": 0, "creation_date": 1571270963, "post_id": 58422988, "comment_id": 103188504, "body": "It is still creating errors for me. It now can&#39;t match expected types.  Could you give me any insight on how to solve them and what I did wrong.  Thank you a ton for your help so far"}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 7, "last_activity_date": 1571303758, "last_edit_date": 1571303758, "creation_date": 1571269140, "answer_id": 58422988, "question_id": 58422859, "link": "https://stackoverflow.com/questions/58422859/having-trouble-creating-a-function-that-can-be-multiple-types/58422988#58422988", "title": "Having trouble creating a function that can be multiple types", "body": "<p>The cause of the error is simply the signature of the <code>trace</code> method. It doesn't make sense to talk about <code>BinTree</code> or <code>Tree</code> there \u2013 those are <em>instances of the class</em> and will be mentioned in time (when you declare the <code>instance</code>), not inside the <em>class</em> declaration. What you want is</p>\n\n<pre><code>class Traceable t where\n  trace :: t a -&gt; [a]\n</code></pre>\n\n<p>and then the instances should be written</p>\n\n<pre><code>instance Traceable BinTree where\n  trace Nil = []\n  ...\ninstance Traceable Tree where\n  ...\n</code></pre>\n\n<p>There's another problem in the <code>Tree</code> instance: <code>trace (head x)</code> just creates the trace for <em>the first</em> subtree in the node. For one thing, that's not even guaranteed to exist (there could be zero branches), for another, there will typically be multiple other branches that are ignored this way. What you want to do is recurse into <em>all</em> the branches, i.e. for all the elements in the <code>x</code> list. \u201cDoing something for all things in a list\u201d generally suggests that you could use <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:map\" rel=\"nofollow noreferrer\"><code>map</code></a>. So, <code>map trace x</code>. However, that has type <code>[[a]]</code> (because each <code>trace</code> generates <code>[a]</code>, and you end up with a list of those lists.</p>\n\n<p>What you want to do is concatenate all of those lists together. That can be done with, wait for it: <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:concat\" rel=\"nofollow noreferrer\"><code>concat</code></a>.</p>\n\n<pre><code>  trace (Node a x) = [a] ++ concat (map trace x)\n</code></pre>\n\n<p>...or more elegantly</p>\n\n<pre><code>  trace (Node a x) = a : concat (trace &lt;$&gt; x)\n</code></pre>\n\n<p>In fact the combination of mapping and concatenating is so common that there exist a standard function for that: <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:concatMap\" rel=\"nofollow noreferrer\"><code>concatMap</code></a>. Moreover, it's the characteristic method of the notorious <code>Monad</code> typeclass, of which lists are an instance. Knowing that, you can write</p>\n\n<pre><code>  trace (Node a x) = a : (trace =&lt;&lt; x)\n</code></pre>\n\n<p>Which is quite nice.</p>\n\n<p>Really though, you need to do none of that because the idea of <em>gathering together all fields of a polymorphic container</em> is also super common, and can be dealt with automatically. Here's the recommended solution:</p>\n\n<pre><code>{-# LANGUAGE DeriveFunctor, DeriveFoldable #-}\n\nimport Data.Foldable\n\ndata Tree a = Null | Node a [Tree a]\n deriving (Show, Functor, Foldable)\ndata BinTree a = Nil | Vertex (BinTree a) a (BinTree a)\n deriving (Show, Functor, Foldable)\n</code></pre>\n\n<p>And then simply <code>trace = toList</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 9314038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc62e2b07f9d964f5d86363da700606?s=128&d=identicon&r=PG&f=1", "display_name": "William Poole", "link": "https://stackoverflow.com/users/9314038/william-poole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "accepted_answer_id": 58422988, "answer_count": 1, "score": 5, "last_activity_date": 1571303758, "creation_date": 1571268030, "last_edit_date": 1571270563, "question_id": 58422859, "link": "https://stackoverflow.com/questions/58422859/having-trouble-creating-a-function-that-can-be-multiple-types", "title": "Having trouble creating a function that can be multiple types", "body": "<p>I am trying to create a singular function in class Traceable that lets me take both binary and variable trees and output a list of lists of all possible paths to leaves. I can't seem to compile and have been racking my brain trying to figure it out for hours.  If someone could give me a hand that would be amazing.</p>\n\n<p>This is my code </p>\n\n<pre><code>data Tree a = Null | Node a [Tree a] deriving Show\ndata BinTree a = Nil | Vertex a (BinTree a) (BinTree a) deriving Show\n\nclass Traceable a where\ntrace :: (BinTree a, Tree z) =&gt; z a -&gt; [a]\n\ninstance Traceable (BinTree a) where{\ntrace Nil = []\ntrace (Vertex x l r) = trace l ++ [x] ++ trace \n\ninstance Traceable (Tree a) where{\ntrace Null = []\ntrace (Node a x) = [a] ++ (trace (head x))}\n</code></pre>\n\n<p>I am getting this error</p>\n\n<pre><code>* Expected a constraint, but `BinTree a' has kind `*'\n* In the type signature:\n    trace :: (BinTree a, Tree z) =&gt; z a -&gt; [a]\n  In the class declaration for `Traceable'\n\n* Expected a constraint, but `Tree z' has kind `*'\n* In the type signature:\n    trace :: (BinTree a, Tree z) =&gt; z a -&gt; [a]\n  In the class declaration for `Traceable'\n\n* Expecting one fewer argument to `z'\n  Expected kind `* -&gt; *', but `z' has kind `*'\n* In the type signature:\n    trace :: (BinTree a, Tree z) =&gt; z a -&gt; [a]\n  In the class declaration for `Traceable'\n</code></pre>\n\n<p>Edit: This is a school project for me and I can't use any Haskell extensions</p>\n\n<p>Doing what you suggested it got a ton further but I still have a couple of errors.</p>\n\n<pre><code>* Expecting one fewer argument to `BinTree a'\n  Expected kind `* -&gt; *', but `BinTree a' has kind `*'\n* In the first argument of `Traceable', namely `BinTree a'\n  In the instance declaration for `Traceable (BinTree a)'\n\n* Expecting one fewer argument to `Tree a'\n  Expected kind `* -&gt; *', but `Tree a' has kind `*'\n* In the first argument of `Traceable', namely `Tree a'\n  In the instance declaration for `Traceable (Tree a)'\n</code></pre>\n\n<p>Edit #2\nThanks for your help, taking out the a from BinTree instantiation seems to have created another problem</p>\n\n<pre><code>* Couldn't match expected type `[a]'\n              with actual type `t0 a0 -&gt; [a0]'\n* In the second argument of `(++)', namely `trace'\n  In the second argument of `(++)', namely `[x] ++ trace'\n  In the expression: trace l ++ [x] ++ trace\n* Relevant bindings include\n    r :: BinTree a (bound at tree.hs:11:20)\n    l :: BinTree a (bound at tree.hs:11:18)\n    x :: a (bound at tree.hs:11:16)\n    trace :: BinTree a -&gt; [a] (bound at tree.hs:10:2)\n</code></pre>\n"}, {"tags": ["haskell", "zip", "list-comprehension", "zipwith"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571317627, "post_id": 58422267, "comment_id": 103207253, "body": "Why would you want to implement <code>zipWith</code> (the more general function) using <code>zip</code> (the more specific)? <code>zip = zipWith (,)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1435, "user_id": 6676199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f60cb3880bf43a7c74ffeecbf996e1?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Amidon", "link": "https://stackoverflow.com/users/6676199/peter-amidon"}, "is_accepted": false, "score": 3, "last_activity_date": 1571299766, "last_edit_date": 1571299766, "creation_date": 1571264416, "answer_id": 58422396, "question_id": 58422267, "link": "https://stackoverflow.com/questions/58422267/how-to-define-zipwith-by-using-zip-and-list-comprehension/58422396#58422396", "title": "How to define zipWith by using zip and list comprehension", "body": "<p>Well, there are a few problems here. At the top level, think about the signature of <code>zip :: [a] -&gt; [b] -&gt; [(a,b)]</code>: there's no way that it can return a <code>[c]</code> where <code>c</code> is not a tuple, so you don't want <code>zip</code> to be the outer function call in your new <code>zipWith</code>.  Your type error is arising from GHC noticing that it needs to force <code>c</code> to be a tuple of things with elements whose types contain <code>c</code> themselves (since <code>f</code> applied to anything will always have type <code>b -&gt; c</code>). </p>\n\n<p>Your list comprehensions are also basically the same thing as <code>map f xs</code> and <code>map f ys</code>.  The second of these can't typecheck, since each element of <code>ys</code> is a <code>b</code>, and you can't apply <code>f</code> to a <code>b</code> (its first argument is an <code>a</code>).</p>\n\n<p>You instead could start by zipping the input lists to get <code>[(a,b)]</code>, and then using a list comprehension to run <code>f</code> on each pair:</p>\n\n<pre><code>zipWith' f xs ys = [f x y | (x,y) &lt;- zip xs ys]\n</code></pre>\n\n<p>Or, with <code>map</code> and <code>uncurry</code> instead of a list comprehension:</p>\n\n<pre><code>zipWith' f xs ys = map (uncurry f) $ zip xs ys\n</code></pre>\n\n<p>Or, using the GHC parallel list comprehension extension (<code>-XParallelListComp</code>), explicitly designed to imitate <code>zip</code>:</p>\n\n<pre><code>zipWith' f xs ys = [f x y | x &lt;- xs | y &lt;- ys]\n</code></pre>\n\n<p>As mentioned above, you can't really do the <code>zip</code> <em>last</em>, since it'll produce tuples.  You could do something like</p>\n\n<pre><code>zipWith' f xs ys = [fx y | (fx, y) &lt;- zip [f x | x &lt;- xs] ys]\n</code></pre>\n\n<p>Which applies <code>f</code> to the elements of the first list (in <code>[f x | x &lt;- xs]</code>, or alternatively <code>map f xs</code>), zips this list of partially applied functions with the list of second arguments, and then applies the partial functions to their corresponding second arguments in the outer comprehension, but it's a bit of a roundabout way to do this.</p>\n"}], "owner": {"reputation": 181, "user_id": 12125886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lL_tHSWvd4A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf83z8SWPpiCu8AqntU5mT9fDe0kA/photo.jpg?sz=128", "display_name": "Kale Joe", "link": "https://stackoverflow.com/users/12125886/kale-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1571299766, "creation_date": 1571263484, "question_id": 58422267, "link": "https://stackoverflow.com/questions/58422267/how-to-define-zipwith-by-using-zip-and-list-comprehension", "title": "How to define zipWith by using zip and list comprehension", "body": "<p>I am trying to write zipWith function using zip and list comprehension. I need to zip the two lists after the function is applied. However I don't know where to use the list comprehension. </p>\n\n<p>I tried doing two list comprehensions for each list. </p>\n\n<pre><code>zipWith' :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]\nzipWith' f xs ys = zip [f x | x &lt;- xs] [f y | y &lt;- ys]\n</code></pre>\n\n<p>I am expecting the function to be identical to zipWith, however it is not loading and giving error: </p>\n\n<pre><code>Occurs check: cannot construct the infinite type:\n        c ~ (b -&gt; c, b -&gt; c)\n      Expected type: [c]\n        Actual type: [(b -&gt; c, b -&gt; c)]\n    \u2022 In the expression: zip [f x | x &lt;- xs] [f y | y &lt;- ys]\n      In an equation for \u2018zipWith'\u2019:\n          zipWith' f xs ys = zip [f x | x &lt;- xs] [f y | y &lt;- ys]\n\n    \u2022 Relevant bindings include\n        ys :: [b] (bound at tutorial5.hs:166:15)\n        f :: a -&gt; b -&gt; c (bound at tutorial5.hs:166:10)\n        zipWith' :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]\n          (bound at tutorial5.hs:166:1)\n    |\n166 | zipWith' f xs ys = zip [f x | x &lt;- xs] [f y | y &lt;- ys]\n</code></pre>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1571262470, "post_id": 58422079, "comment_id": 103186433, "body": "The second clause will never fire, since the first pattern will always match."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1571262502, "post_id": 58422079, "comment_id": 103186440, "body": "The main poblem is that <code>tobase b (x `quot` b)</code> will generate a <i>list</i>, not an <code>Int</code> itself, hence the type error."}, {"owner": {"reputation": 19, "user_id": 9307789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EHHJmiYA3Ao/AAAAAAAAAAI/AAAAAAAAABU/YLfMWrSx_Cs/photo.jpg?sz=128", "display_name": "shubhushan shambhu", "link": "https://stackoverflow.com/users/9307789/shubhushan-shambhu"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1571263074, "post_id": 58422079, "comment_id": 103186626, "body": "Thank you. I concatenated the list and now it works."}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 2, "creation_date": 1571266467, "post_id": 58422079, "comment_id": 103187534, "body": "@shubhushanshambhu Can you add your solution as an answer? Then you can accept it so this question appears as \u2018solved\u2019."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 2708174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e548726c553dc508fde3d2f6410d9b4f?s=128&d=identicon&r=PG&f=1", "display_name": "vadan", "link": "https://stackoverflow.com/users/2708174/vadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1572322808, "creation_date": 1572322808, "answer_id": 58601391, "question_id": 58422079, "link": "https://stackoverflow.com/questions/58422079/i-have-a-problem-with-the-following-haskell-code/58601391#58601391", "title": "I have a problem with the following haskell code", "body": "<p>As Willem has already indicated, the reason for the error is that you are trying to combine values of the wrong type via the \"cons\" operator (<code>:</code>). \nThis operator's signature is <code>(:) :: a -&gt; [a] -&gt; [a]</code> , not <code>(:) :: [a] -&gt; [a] -&gt; [a]</code>, which is what your call is attempting.</p>\n\n<p>Your <code>tobase</code> function returns type <code>[Int]</code>, and it's the first argument passed to the <code>:</code> operator. Since the type variable <code>a</code> in <code>(:) :: a -&gt; [a] -&gt; [a]</code> has this <code>[Int]</code> type in your invocation, the compiler expects the second argument to be <code>[[Int]]</code>. However you are passing in <code>[x `mod` b]</code> which is of type <code>[Int]</code>. \nInstead of using <code>:</code> you can use <code>++</code> to combine the two lists.</p>\n\n<p>As also noted, the pattern matching order in your function definition should be reversed because the second case <code>tobase b x | x `mod` b == x = [x]</code> will never be reached. See <a href=\"http://learnyouahaskell.com/syntax-in-functions\" rel=\"nofollow noreferrer\">http://learnyouahaskell.com/syntax-in-functions</a></p>\n"}], "owner": {"reputation": 19, "user_id": 9307789, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EHHJmiYA3Ao/AAAAAAAAAAI/AAAAAAAAABU/YLfMWrSx_Cs/photo.jpg?sz=128", "display_name": "shubhushan shambhu", "link": "https://stackoverflow.com/users/9307789/shubhushan-shambhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572322808, "creation_date": 1571262321, "last_edit_date": 1571262505, "question_id": 58422079, "link": "https://stackoverflow.com/questions/58422079/i-have-a-problem-with-the-following-haskell-code", "title": "I have a problem with the following haskell code", "body": "<p>I don't know what is wrong with the code. I have just started coding in Haskell so sorry for the trouble.</p>\n\n<pre><code>tobase :: Int -&gt; Int -&gt; [Int]\n\ntobase b x = tobase b (x `quot` b) : [x `mod` b]\ntobase b x | x `mod` b == x = [x]\n</code></pre>\n\n<pre><code>  Couldn't match expected type \u2018[Int]\u2019 with actual type \u2018Int\u2019\n  In the expression: x `mod` b\n  In the second argument of \u2018(:)\u2019, namely \u2018[x `mod` b]\u2019\n  In the expression: tobase b (x `quot` b) : [x `mod` b]\n</code></pre>\n"}, {"tags": ["haskell", "turing-machines"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 7, "creation_date": 1571262407, "post_id": 58422064, "comment_id": 103186417, "body": "For the given <code>Symbol</code>, <code>State</code> and <code>Direction</code>, there are 198&#39;359&#39;290&#39;368 possible delta functions, so the problem is not that much with how you generate it, it is &quot;intrensically&quot; not very scalable."}, {"owner": {"reputation": 73, "user_id": 3760874, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f8e844ba15375b7aba44fefd7b34dc73?s=128&d=identicon&r=PG&f=1", "display_name": "user3760874", "link": "https://stackoverflow.com/users/3760874/user3760874"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1571262728, "post_id": 58422064, "comment_id": 103186509, "body": "@WillemVanOnsem Right, I need to point out that <code>QF</code> will never turn up in the arguments of the function when it is called, so we don&#39;t need to have that in the product, so there should just be two input states. That lowers the number of possible functions to 387 420 489, if I am correct."}, {"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1571266483, "post_id": 58422064, "comment_id": 103187540, "body": "So, what is your question. Included it above in the question section, along with what you&#39;ve tried, and specific problems you are having with your attempt."}, {"owner": {"reputation": 141, "user_id": 2909111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kSxL2.jpg?s=128&g=1", "display_name": "ToxiCore", "link": "https://stackoverflow.com/users/2909111/toxicore"}, "edited": false, "score": 0, "creation_date": 1571318124, "post_id": 58422064, "comment_id": 103207580, "body": "@user3760874 If <code>QF</code> never shows up, there are only (2 \u2022 3 \u2022 3)^((3-1) \u2022 3) = 18\u2076 = 34 012 224 combinations. Further it&#39;s possible to use symmetry of states and head-movement to further reduce the number of interesting cases."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1571333510, "post_id": 58422064, "comment_id": 103215810, "body": "You may be looking for something like <a href=\"http://hackage.haskell.org/package/smallcheck\" rel=\"nofollow noreferrer\">smallcheck</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "is_accepted": false, "score": 0, "last_activity_date": 1571439093, "creation_date": 1571439093, "answer_id": 58459024, "question_id": 58422064, "link": "https://stackoverflow.com/questions/58422064/generate-all-possible-turing-functions-of-a-type-in-haskell/58459024#58459024", "title": "Generate all possible Turing functions of a type in Haskell", "body": "<p>I think you should add the [turing-machines] tag to your question.</p>\n\n<h2>Types for the Turing machine:</h2>\n\n<p>The system of types involved in the problem can be made more detailed:</p>\n\n<pre><code>import qualified  Data.List   as  L\nimport qualified  Data.Map    as  M\nimport qualified  Data.Maybe  as  Mb\nimport qualified  Data.Tuple  as  T\n\n\ntype Delta state symbol direction\n    = ( state -&gt; symbol -&gt; (state, symbol, direction) )\n\n\ndata State     = Q0 | Q1 | QF        deriving (Show, Eq, Enum, Ord, Bounded)\n\ndata Symbol    = Zero | One | Blank  deriving (Show, Eq, Enum, Ord, Bounded)\n\ndata Direction = L | R               deriving (Eq, Show, Enum, Ord, Bounded)\n\nstateList     = [minBound .. maxBound] :: [State]\nsymbolList    = [minBound .. maxBound] :: [Symbol]\ndirectionList = [minBound .. maxBound] :: [Direction]\n\ntype DeltaTable =\n    M.Map  (State, Symbol)   (State, Symbol, Direction)\n\ntype DeltaFunc = Delta  State Symbol Direction\n\ntmInpList :: [ (State, Symbol) ]\ntmInpList = do \n              st &lt;- filter  (/= QF)  stateList  -- cannot start from state QF\n              sy &lt;- symbolList\n              return (st, sy)\n\ntmInpListSize = length tmInpList\n\ntmMapInpList :: M.Map Int (State, Symbol)\ntmMapInpList = M.fromList $ zip  [ 0 .. (tmInpListSize-1) ]  tmInpList\n\ntmOutList :: [ (State, Symbol, Direction) ]\ntmOutList = do \n              st  &lt;- stateList\n              sy  &lt;- symbolList\n              dir &lt;- directionList\n              return (st, sy, dir)\n\ntmOutListSize = length tmOutList\n\ntmMapOutList :: M.Map Int (State, Symbol, Direction)\ntmMapOutList = M.fromList $ zip  [ 0 .. (tmOutListSize-1) ]  tmOutList\n</code></pre>\n\n<p>The code above deals with input (State, Symbol) pairs and output (State, Symbol, Direction) triplets. It provides lists of all possible pairs and triplets, <code>tmInpList</code> and<code>tmOutList</code>. A Turing transition table maps pairs to triplets.</p>\n\n<p>The code also provides auxiliary indexing map objects, <code>tmMapInpList</code> and <code>tmMapOutList</code>, which map integer ranks to pairs and triplets within their respective lexicographically ordered lists. The reason to use <strong>integer indexing</strong> is that, even if it is possible to loop thru triplets directly, this turned out to be about 10 times slower than the <em>brute force</em> code provided below, which uses integer indexing systematically.</p>\n\n<p>We have 2*3 = 6 possible input pairs, as the QF state is not allowed on input. We have 3*3*2 = 18 possible triplets on output. The number of possible transition tables is thus 18^6 = 34,012,224.</p>\n\n<h2>Indexing and looping code:</h2>\n\n<p>In order to go thru all possible transition tables, we use integer lists of length 6, such as [4,6,8,2,13,10]. They go from [0,0,0,0,0,0] to [17,17,17,17,17,17]. Then these lists get mapped to lists of triplets.</p>\n\n<p>These short integer lists are generated by the expression:</p>\n\n<pre><code>tmIndexList = sequence $ replicate 6  [ 0 .. 17 ]\n</code></pre>\n\n<p>The indexing code producing all 34,012,224 possible transition maps is given below:</p>\n\n<pre><code>tmIndexList :: [[Int]]\ntmIndexList = sequence $ replicate  tmInpListSize  [ 0 .. (tmOutListSize-1) ]\ntmIndexListSize = length tmIndexList\n\n\ndeltaTableFromIndexes :: [Int] -&gt; DeltaTable\ndeltaTableFromIndexes indexList =\n    let outFromIndex = (\\ix -&gt; Mb.fromJust $ M.lookup ix tmMapOutList)\n    in  M.fromList $ zip  tmInpList  (map  outFromIndex  indexList)\n\n\n-- big list of map objects mapping (st, sy) to (st', sy', dir)\ndeltaTableList :: [DeltaTable]\ndeltaTableList = map deltaTableFromIndexes tmIndexList\n\n-- big list of  *functions*  mapping  st sy  to  (st', sy', dir)\ndeltaFuncList :: [DeltaFunc]\ndeltaFuncList = let funcFromMap ma = (\\st sy -&gt; Mb.fromJust $ M.lookup (st,sy) ma)\n                in  map funcFromMap deltaTableList\n</code></pre>\n\n<p>The <code>deltaTableList</code> variable is a list of all possible map objects. The list version of a map object looks like this:</p>\n\n<pre><code>[((Q0,Zero),(QF,Blank,R)),((Q0,One),(QF,Blank,R)),((Q0,Blank),(QF,One,R)),((Q1,Zero),(QF,Blank,L)),((Q1,One),(Q0,Blank,L)),((Q1,Blank),(QF,Blank,L))]\n</code></pre>\n\n<p>The question text mentions functions not maps. However, it is more practical to use maps, as you can go from maps to functions, but not from functions to maps. Functions are opaque, so to speak. See definition of <code>deltaFuncList</code> above.</p>\n\n<h2>Main program:</h2>\n\n<p>In order to force evaluation within the following main program, we print the map at rank 34,000,000 which is close to the end of the list.</p>\n\n<pre><code>prettyPrintMap :: DeltaTable -&gt; String\nprettyPrintMap ma =\n    let ptrls = M.toList ma\n        fn = \\(p,tr) -&gt; (show p) ++ \" -&gt; \" ++ (show tr) ++ \" ; \"\n    in  (concatMap fn ptrls)\n\n\nmain = do\n    putStrLn $ \"  tmInpListSize   = \"  ++  (show tmInpListSize)\n    putStrLn $ \"  tmOutListSize   = \"  ++  (show tmOutListSize)\n    putStrLn $ \"  tmIndexListSize = \"  ++  (show tmIndexListSize)\n\n    -- force printing of one transition table close to the end of the list\n    let ma34m = deltaTableList !! (34*1000*1000)\n    putStrLn $ \"Plain  ma34m = \" ++ (show ma34m)\n    putStrLn $ \"Pretty ma34m = \" ++ (prettyPrintMap ma34m)\n    putStrLn $ \" \"\n</code></pre>\n\n<h2>Execution with brief performance metrics:</h2>\n\n<pre><code>$ ghc -O2 turing01.hs  -o turing01.x\n$\n$ time ./turing01.x +RTS -s -RTS\n\n  tmInpListSize   = 6\n  tmOutListSize   = 18\n  tmIndexListSize = 34012224\n\nPlain  ma34m = fromList [((Q0,Zero),(QF,Blank,R)),((Q0,One),(QF,Blank,R)),((Q0,Blank),(QF,One,R)),((Q1,Zero),(QF,Blank,L)),((Q1,One),(Q0,Blank,L)),((Q1,Blank),(QF,Blank,L))]\nPretty ma34m = (Q0,Zero) -&gt; (QF,Blank,R) ; (Q0,One) -&gt; (QF,Blank,R) ; (Q0,Blank) -&gt; (QF,One,R) ; (Q1,Zero) -&gt; (QF,Blank,L) ; (Q1,One) -&gt; (Q0,Blank,L) ; (Q1,Blank) -&gt; (QF,Blank,L) ; \n\n   5,873,144,856 bytes allocated in the heap\n   3,516,995,416 bytes copied during GC\n     886,616,408 bytes maximum residency (11 sample(s))\n...\n\n  %GC     time      76.6%  (76.6% elapsed)\n  Productivity  23.4% of total user, 23.4% of total elapsed\n\nreal    0m3,692s\nuser    0m3,096s\nsys     0m0,588s\n</code></pre>\n\n<p>So the <em>brute force</em> technique turns out to be feasible for the exact set of Turing states and alphabet provided in the question. Though of course, adding more states and symbols would quickly lead to a combinatorial explosion of the execution time.</p>\n"}], "owner": {"reputation": 73, "user_id": 3760874, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f8e844ba15375b7aba44fefd7b34dc73?s=128&d=identicon&r=PG&f=1", "display_name": "user3760874", "link": "https://stackoverflow.com/users/3760874/user3760874"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1571469630, "creation_date": 1571262230, "last_edit_date": 1571469630, "question_id": 58422064, "link": "https://stackoverflow.com/questions/58422064/generate-all-possible-turing-functions-of-a-type-in-haskell", "title": "Generate all possible Turing functions of a type in Haskell", "body": "<p>I want to bruteforce some Turing machines in Haskell. These Turing machines have a Delta function of type:</p>\n\n<pre><code>type Delta state alphabetSymbol\n   = (state -&gt; alphabetSymbol -&gt; (alphabetSymbol, Direction, state))\n</code></pre>\n\n<p>where</p>\n\n<pre><code>data Direction\n= L\n| R\nderiving (Eq, Show, Enum)\n</code></pre>\n\n<p>In the concrete example I want to bruteforce, my states and symbol types are the following enums:</p>\n\n<pre><code>data State\n= Q0\n| Q1\n| QF\nderiving (Show, Eq, Enum)\n\ndata Symbol\n= Zero\n| One\n| Blank\nderiving (Show, Eq, Enum)\n</code></pre>\n\n<p>I want to generate (almost) all possible Delta functions with these sum types efficiently. Almost, because the function will never be called with <code>QF</code> as a <code>state</code>, so I don't need to worry about <code>QF</code> in input.</p>\n\n<p>I have already written a stupid higher level function that generates them based on instructions, but it looks stuff up in a list, which makes it pretty inefficient. Also, I want to do this <em>beautifully!</em></p>\n"}, {"tags": ["haskell", "recursion"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1571251471, "post_id": 58419747, "comment_id": 103181953, "body": "<code>rmChar</code> will only remove <i>one</i> sort of characters, but you need to recurse on the rest of the characters to remove."}], "answers": [{"tags": [], "owner": {"reputation": 700, "user_id": 5499914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fz53h.png?s=128&g=1", "display_name": "Khuldraeseth na&#39;Barya", "link": "https://stackoverflow.com/users/5499914/khuldraeseth-nabarya"}, "is_accepted": false, "score": 4, "last_activity_date": 1571251426, "creation_date": 1571251426, "answer_id": 58419813, "question_id": 58419747, "link": "https://stackoverflow.com/questions/58419747/function-that-removes-all-characters-in-the-first-string-from-the-second-string/58419813#58419813", "title": "Function that removes all characters in the first string from the second string", "body": "<p>You say you need to use recursion, but nowhere do you have a function calling itself. In particular, when you have <code>x:xs</code>, don't you think you should care about <code>xs</code> at some point?</p>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 2, "last_activity_date": 1571251537, "creation_date": 1571251537, "answer_id": 58419844, "question_id": 58419747, "link": "https://stackoverflow.com/questions/58419747/function-that-removes-all-characters-in-the-first-string-from-the-second-string/58419844#58419844", "title": "Function that removes all characters in the first string from the second string", "body": "<p>The problem is that in your third clause, you only remove the character <code>x</code> from the string. Indeed:</p>\n\n<pre><code>rmCharsRec :: String -&gt; String -&gt; String\nrmCharsRec [] ys = ys\nrmCharsRec (x:xs) [] = []\nrmCharsRec (x:xs) ys = <b>rmChar x ys</b></code></pre>\n\n<p>After you removed that character, you will still need to remove the other characters in the rest of the list <code>xs</code>.</p>\n\n<p>You thus should recurse here, like:</p>\n\n<pre><code>rmCharsRec :: String -&gt; String -&gt; String\nrmCharsRec [] ys = ys\nrmCharsRec (x:xs) [] = []\nrmCharsRec (x:xs) ys = <b>rmCharsRec &hellip;</b> (rmChar x ys)</code></pre>\n\n<p>with <code>&hellip;</code> the part you still need to fill in.</p>\n"}], "owner": {"reputation": 181, "user_id": 12125886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lL_tHSWvd4A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf83z8SWPpiCu8AqntU5mT9fDe0kA/photo.jpg?sz=128", "display_name": "Kale Joe", "link": "https://stackoverflow.com/users/12125886/kale-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1571251537, "creation_date": 1571251160, "last_edit_date": 1571251378, "question_id": 58419747, "link": "https://stackoverflow.com/questions/58419747/function-that-removes-all-characters-in-the-first-string-from-the-second-string", "title": "Function that removes all characters in the first string from the second string", "body": "<p>I am trying to write a function that removes all characters in the first string from the second string. I need to use recursion and another helper function that removes that removes all occurrences of a\ncharacter from a string. I couldn't add the recursive part. </p>\n\n<p>rmCharsRec is the function that I am trying to write and rmChar is the other function. </p>\n\n<pre><code>rmCharsRec :: String -&gt; String -&gt; String\nrmCharsRec [] ys = ys\nrmCharsRec (x:xs) [] = []\nrmCharsRec (x:xs) ys = rmChar x ys \n\nrmChar :: Char -&gt; String -&gt; String\nrmChar c xs = filter ( /= c) xs\n\nrmCharsRec ['a'..'l'] \"football\"\n</code></pre>\n\n<p>I am expecting the output \"oot\", but I am getting \"footbll\".</p>\n"}, {"tags": ["list", "haskell", "histogram"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1571248175, "post_id": 58418572, "comment_id": 103180477, "body": "Your <code>range</code> function is a good start.  Can you <code>filter</code> a list for all the items in a given range?"}, {"owner": {"reputation": 1267, "user_id": 1514066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/FOQOA.jpg?s=128&g=1", "display_name": "Emre G&#252;rses", "link": "https://stackoverflow.com/users/1514066/emre-g%c3%bcrses"}, "edited": false, "score": 0, "creation_date": 1571250536, "post_id": 58418572, "comment_id": 103181483, "body": "Please add your code which is tried."}, {"owner": {"reputation": 123, "user_id": 12228085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae4a03560ab71e0d1d4c6ad606c1d98?s=128&d=identicon&r=PG&f=1", "display_name": "Belle", "link": "https://stackoverflow.com/users/12228085/belle"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1571250877, "post_id": 58418572, "comment_id": 103181666, "body": "@luqui Unfortunately no, not yet. I am only familiar with the topic Types and Classes, Defining functions, List comprehensions and Recursive functions"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1571255128, "post_id": 58418572, "comment_id": 103183522, "body": "<code>filter</code>can also be done using a list comprehension.  For example <code>[ x | x &lt;- xs, x &lt; 5 ]</code> selects all the elements of the list <code>xs</code> that are less than 5."}, {"owner": {"reputation": 123, "user_id": 12228085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae4a03560ab71e0d1d4c6ad606c1d98?s=128&d=identicon&r=PG&f=1", "display_name": "Belle", "link": "https://stackoverflow.com/users/12228085/belle"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1571256438, "post_id": 58418572, "comment_id": 103184089, "body": "@luqui Thank you a lot. Just a last question. How can takeWhile be done then?"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1571276151, "post_id": 58418572, "comment_id": 103189497, "body": "@Belle, I don&#39;t think <code>takeWhile</code> can be done using a list comprehension, you have to write that as a recursive function."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 12228085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae4a03560ab71e0d1d4c6ad606c1d98?s=128&d=identicon&r=PG&f=1", "display_name": "Belle", "link": "https://stackoverflow.com/users/12228085/belle"}, "edited": false, "score": 0, "creation_date": 1571250547, "post_id": 58419117, "comment_id": 103181488, "body": "Is it possible to do it without the filter function as according to the problem we still have not covered higher-order functions, only Types and Classes, Defining functions, List comprehensions and Recursive functions"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 123, "user_id": 12228085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae4a03560ab71e0d1d4c6ad606c1d98?s=128&d=identicon&r=PG&f=1", "display_name": "Belle", "link": "https://stackoverflow.com/users/12228085/belle"}, "edited": false, "score": 0, "creation_date": 1571251017, "post_id": 58419117, "comment_id": 103181740, "body": "@Belle: yes, that is possible."}, {"owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "reply_to_user": {"reputation": 123, "user_id": 12228085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae4a03560ab71e0d1d4c6ad606c1d98?s=128&d=identicon&r=PG&f=1", "display_name": "Belle", "link": "https://stackoverflow.com/users/12228085/belle"}, "edited": false, "score": 0, "creation_date": 1571251674, "post_id": 58419117, "comment_id": 103182035, "body": "@Belle: if you know how to create recursive functions you can easily implement <code>filter</code> on your own"}, {"owner": {"reputation": 123, "user_id": 12228085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae4a03560ab71e0d1d4c6ad606c1d98?s=128&d=identicon&r=PG&f=1", "display_name": "Belle", "link": "https://stackoverflow.com/users/12228085/belle"}, "edited": false, "score": 1, "creation_date": 1571252154, "post_id": 58419117, "comment_id": 103182232, "body": "@Yogendra But what does length.filter mean, what is this dot between the two functions?"}, {"owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "edited": false, "score": 0, "creation_date": 1571252657, "post_id": 58419117, "comment_id": 103182439, "body": "<code>.</code> is used for composing functions, In this case you can think of it as first applying <code>filter</code> on input and then applying <code>length</code> on the result of filter. If you have two functions <code>f :: a -&gt; b</code> and <code>g :: b -&gt; c</code> , on composing them you get <code>f.g :: a -&gt;c</code>. if you are uncomfortable with this you can write <code>count </code> as <code>count (l,r) xs = length (filter (\\x -&gt; l &lt;= x &amp;&amp; x &lt;= r) xs)</code>"}, {"owner": {"reputation": 123, "user_id": 12228085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae4a03560ab71e0d1d4c6ad606c1d98?s=128&d=identicon&r=PG&f=1", "display_name": "Belle", "link": "https://stackoverflow.com/users/12228085/belle"}, "edited": false, "score": 0, "creation_date": 1571257799, "post_id": 58419117, "comment_id": 103184702, "body": "@Yogendra thank you. Last question. How can takeWhile be written in another way?"}, {"owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "reply_to_user": {"reputation": 123, "user_id": 12228085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae4a03560ab71e0d1d4c6ad606c1d98?s=128&d=identicon&r=PG&f=1", "display_name": "Belle", "link": "https://stackoverflow.com/users/12228085/belle"}, "edited": false, "score": 0, "creation_date": 1571258375, "post_id": 58419117, "comment_id": 103184937, "body": "@Belle similar to filter you can implement takeWhile on your own via recursive function, since it takes values from list until predicate is true, it can be something like <code>takeWhile&#39; f (x:xs) = if (f x) then x:(takeWhile&#39; f xs) else []</code>"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1571477942, "post_id": 58419117, "comment_id": 103260440, "body": "equivalent code: <code>histogram n xs = [count range xs | range &lt;- ranges (maximum xs) n]</code>."}], "tags": [], "owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "is_accepted": false, "score": 1, "last_activity_date": 1571249856, "last_edit_date": 1571249856, "creation_date": 1571248536, "answer_id": 58419117, "question_id": 58418572, "link": "https://stackoverflow.com/questions/58418572/histogram-in-haskell/58419117#58419117", "title": "Histogram in Haskell", "body": "<p>We can start by generating ranges required, and then map <code>count</code> function onto ranges to get list of partial functions, which finally can be applied on the given list.</p>\n\n<pre><code>ranges lim n = takeWhile (\\(x,y) -&gt; x &lt; lim) [(k*n, (k+1)*n - 1) | k &lt;- [0..]]\n\ncount (l,r) = length.filter (\\x -&gt; l &lt;= x &amp;&amp; x &lt;= r)\n\nhistogram n xs = (map count range ) &lt;*&gt; [xs] where range =(ranges (maximum xs) n)\n\n-- OR\n\nhistogram n xs = count &lt;$&gt; range &lt;*&gt; pure xs where range =(ranges (maximum xs) n)\n\n--OR, if you are unfamiliar with applicatives\n\nhistogram n xs = go funcs\n                   where range =(ranges (maximum xs) n)\n                         funcs = (map count range)\n                         go [] = []\n                         go (f:fs) = (f xs): (go fs)\n\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 12228085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae4a03560ab71e0d1d4c6ad606c1d98?s=128&d=identicon&r=PG&f=1", "display_name": "Belle", "link": "https://stackoverflow.com/users/12228085/belle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "closed_date": 1571256109, "answer_count": 1, "score": -5, "last_activity_date": 1571401954, "creation_date": 1571246166, "last_edit_date": 1571401954, "question_id": 58418572, "link": "https://stackoverflow.com/questions/58418572/histogram-in-haskell", "closed_reason": "Needs more focus", "title": "Histogram in Haskell", "body": "<p>I have the following problem:</p>\n\n<blockquote>\n  <p>Define a function <code>histogram :: Int -&gt; [Int] -&gt; [Int]</code> such that\n  <code>histogram n xs</code> returns a list that counts the frequency of\n  values drawn from <code>xs</code> in the ranges <code>0..n-1, n..2n-1, 2n..3n-1, ...</code> and\n  so on, until all values in <code>xs</code> have been counted. For example,\n  <code>histogram 5 [1, 2, 10, 4, 7, 12]</code> <strong>=></strong> <code>[3, 1, 2]</code>.</p>\n</blockquote>\n\n<p>I have tried various approaches to this problem including first defining a function <code>range</code> which produces list of tuples like: <code>range 3</code> <strong>=></strong> <code>[(0,2),(3,5),...]</code> to infinity, but I cannot seem to find appropriate solution to the whole problem. Any ideas would be really appreciated.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 1, "creation_date": 1571244673, "post_id": 58417342, "comment_id": 103178931, "body": "<code>-ddump-minimal-imports</code> will tell you what things from <code>Some.Module</code> are used in a file, though if the same thing is imported twice, it might not appear in the import list associated with <code>Some.Module</code>. I think this fulfills your purpose, but it does not answer your question."}, {"owner": {"reputation": 548, "user_id": 1247325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f642860e89e481f4542a51c77152df43?s=128&d=identicon&r=PG", "display_name": "pbarill", "link": "https://stackoverflow.com/users/1247325/pbarill"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1571245687, "post_id": 58417342, "comment_id": 103179383, "body": "Didn&#39;t know this one. A very useful compiler option. Something to add to my arsenal for sure."}], "answers": [{"comments": [{"owner": {"reputation": 548, "user_id": 1247325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f642860e89e481f4542a51c77152df43?s=128&d=identicon&r=PG", "display_name": "pbarill", "link": "https://stackoverflow.com/users/1247325/pbarill"}, "edited": false, "score": 0, "creation_date": 1571250314, "post_id": 58419264, "comment_id": 103181406, "body": "Thanks for sharing something so detailed. Is this something that can be used? If so, what do I feed it? I get <code>error: Variable not in scope: s :: HscEnv</code>. I&#39;ll take this as the definitive proof that what I seek can be done in theory but not in practice (if I wanted to learn those things, no idea how I would get that)."}, {"owner": {"reputation": 1435, "user_id": 6676199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f60cb3880bf43a7c74ffeecbf996e1?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Amidon", "link": "https://stackoverflow.com/users/6676199/peter-amidon"}, "reply_to_user": {"reputation": 548, "user_id": 1247325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f642860e89e481f4542a51c77152df43?s=128&d=identicon&r=PG", "display_name": "pbarill", "link": "https://stackoverflow.com/users/1247325/pbarill"}, "edited": false, "score": 0, "creation_date": 1571262165, "post_id": 58419264, "comment_id": 103186331, "body": "Woops, sorry, something slightly stale got posted! I just edited to fix it.  Note that this is doing basically the same thing as the :browse trick suggested above, except from within Haskell (faster &amp; no need to pipe/parse data) and possibly more stable (GHCi&#39;s output format changes, but then again so does the GHC API---although I believe most of the parts used here are relatively stable)."}], "tags": [], "owner": {"reputation": 1435, "user_id": 6676199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f60cb3880bf43a7c74ffeecbf996e1?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Amidon", "link": "https://stackoverflow.com/users/6676199/peter-amidon"}, "is_accepted": false, "score": 3, "last_activity_date": 1571262069, "last_edit_date": 1571262069, "creation_date": 1571249179, "answer_id": 58419264, "question_id": 58417342, "link": "https://stackoverflow.com/questions/58417342/get-a-list-of-what-is-exported-by-a-module/58419264#58419264", "title": "Get a list of what is exported by a module", "body": "<p>As @HTNW mentioned in a comment, if you can run <code>ghc</code> on your actual file, you can use <code>-ddump-minimal-imports</code>.  Otherwise, if you want to actually get the list of exports from another module, assuming that you're using GHC, the easiest way to do this is probably to look at the <code>.hi</code> <a href=\"https://gitlab.haskell.org/ghc/ghc/wikis/commentary/compiler/iface-files\" rel=\"nofollow noreferrer\">interface files</a>.  <code>ghc</code> has some built-in support for printing human-readable representations of interface files once you know the path to one, but as the wiki page notes \"This textual format is not particularly designed for machine parsing\".  You can also access the information you might want via the GHC API.  A small example of doing something like that follows.</p>\n\n<p>We start with a bunch of random imports for doing IO &amp; from the GHC api:</p>\n\n<pre><code>import Control.Monad.IO.Class\nimport System.IO\nimport System.Environment\n\nimport GHC\nimport GHC.Paths (libdir)\nimport DynFlags\nimport Outputable\nimport Name\nimport Pretty (Mode(..))\n</code></pre>\n\n<p>With that bureaucracy out of the way, <code>main</code> starts by firing up the GHC Monad:</p>\n\n<pre><code>main :: IO ()\nmain = defaultErrorHandler defaultFatalMessager defaultFlushOut $ do\n  runGhc (Just libdir) $ do\n</code></pre>\n\n<p>We're not actually generating any code so we can set <code>hscTarget = HscNothing</code> during the <code>DynFlags</code> setup boilerplate:</p>\n\n<pre><code>    dflags &lt;- getSessionDynFlags\n    let dflags' = dflags { hscTarget = HscNothing }\n    setSessionDynFlags dflags'\n</code></pre>\n\n<p>With that out of the way we can find the module we want from the package database (using the first command-line argument as the name):</p>\n\n<pre><code>    mn &lt;- head &lt;$&gt; (liftIO $ getArgs)\n    m &lt;- lookupModule (mkModuleName mn) Nothing\n</code></pre>\n\n<p>We can use <code>getModuleInfo</code> to get a module info structure:</p>\n\n<pre><code>    mmi &lt;- getModuleInfo m\n    case mmi of\n      Nothing -&gt; liftIO $ putStrLn \"Could not find module interface\"\n</code></pre>\n\n<p>If we did find the interface, everything we need for this is in the <code>modInfoExports</code>.  If we needed more, we could also get the actual <code>ModIface</code>:</p>\n\n<pre><code>      Just mi -&gt; mapM_ (printExport dflags') (modInfoExports mi)\n</code></pre>\n\n<p>Actually printing out an exported is a bit tedious, as it requires working with <code>Name</code>s; a simple example <code>printExport</code> might just use the pretty-printing functions, but these are more intended for printing human-readable output than machine-readable:</p>\n\n<pre><code>printExport :: DynFlags -&gt; Name -&gt; Ghc ()\nprintExport dflags n =\n  liftIO $ printSDocLn PageMode dflags stdout (defaultUserStyle dflags)\n         $ pprNameUnqualified n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 548, "user_id": 1247325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f642860e89e481f4542a51c77152df43?s=128&d=identicon&r=PG", "display_name": "pbarill", "link": "https://stackoverflow.com/users/1247325/pbarill"}, "edited": false, "score": 0, "creation_date": 1571251975, "post_id": 58419756, "comment_id": 103182168, "body": "I am aware of <code>:browse</code>, it was mentioned in the post that I referred to, and it does not do what I need, which is: i) list only what it exports and nothing else; ii) allow me to take that output somewhere else (non-interactive)."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 548, "user_id": 1247325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f642860e89e481f4542a51c77152df43?s=128&d=identicon&r=PG", "display_name": "pbarill", "link": "https://stackoverflow.com/users/1247325/pbarill"}, "edited": false, "score": 2, "creation_date": 1571256231, "post_id": 58419756, "comment_id": 103183991, "body": "@p_barill Interesting. What does <code>:browse</code> list that isn&#39;t exported? As for taking it somewhere non-interactive, <code>echo :browse Some.Module | ghci</code> is a perfectly suitable start to a pipeline that you can append to for whatever non-interactive processing you want."}, {"owner": {"reputation": 548, "user_id": 1247325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f642860e89e481f4542a51c77152df43?s=128&d=identicon&r=PG", "display_name": "pbarill", "link": "https://stackoverflow.com/users/1247325/pbarill"}, "edited": false, "score": 0, "creation_date": 1571261035, "post_id": 58419756, "comment_id": 103185966, "body": "Oh, I see now. Never thought about piping to an interpreter like this! I was looking only for the name of functions without type signatures and classes, but I see that an astute regex should grab just what I need. Thanks."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 2, "last_activity_date": 1571251179, "creation_date": 1571251179, "answer_id": 58419756, "question_id": 58417342, "link": "https://stackoverflow.com/questions/58417342/get-a-list-of-what-is-exported-by-a-module/58419756#58419756", "title": "Get a list of what is exported by a module", "body": "<p>A particularly simple way for interactive use is <code>:browse</code>. Load up a ghci that has access to the appropriate package, then</p>\n\n<pre><code>&gt; :browse Some.Module\nclass Some.Module.Foo a where\n  Some.Module.foo :: a -&gt; a\n  {-# MINIMAL foo #-}\nSome.Module.bar :: Int\n</code></pre>\n\n<p>All the qualification can get a bit much, especially if there are many functions that operate on types defined in the same module. To reduce the clutter, you can bring <code>Some.Module</code> into scope first:</p>\n\n<pre><code>&gt; :m + Some.Module\n&gt; :browse Some.Module\nclass Foo a where\n  foo :: a -&gt; a\n  {-# MINIMAL foo #-}\nbar :: Int\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 1247325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f642860e89e481f4542a51c77152df43?s=128&d=identicon&r=PG", "display_name": "pbarill", "link": "https://stackoverflow.com/users/1247325/pbarill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 58419756, "answer_count": 2, "score": 0, "last_activity_date": 1571262069, "creation_date": 1571241336, "last_edit_date": 1571244291, "question_id": 58417342, "link": "https://stackoverflow.com/questions/58417342/get-a-list-of-what-is-exported-by-a-module", "title": "Get a list of what is exported by a module", "body": "<p>Similar question (<a href=\"https://stackoverflow.com/questions/1698942/is-there-a-way-to-see-the-list-of-functions-in-a-module-in-ghci\">Is there a way to see the list of functions in a module, in GHCI?</a>), though not the result that I seek.</p>\n\n<p>Is there a way to get a list of what is exported by a module?</p>\n\n<p>Of course in GHCi you can import it then type <code>Some.Module.</code>, hit tab for auto-completion and it will show what I seek. But I want to capture that stuff. Roughly speaking, <code>String -&gt; [String]</code>.</p>\n\n<p><em>Purpose?</em> Suppose that I have a source file with a naked <code>import Some.Module</code>. Question: What belongs to <code>Some.Module</code> in that file? A simple way would be to output the list of what the module exports, feed that to <code>grep</code> and return the contenders, without the need to load that source file in GHCi (might be complicated or not possible). And everything becomes a lot clearer.</p>\n\n<p>If there's a smarter approach to that, I'm listening. <a href=\"https://stackoverflow.com/questions/13722203/finding-out-which-module-a-function-belongs-to\">I heard of solutions</a> involving <code>GOA</code> and <code>lambdabot</code>. No idea if applicable or how to make use of this.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1571239182, "post_id": 58416680, "comment_id": 103176231, "body": "It looks like you are mixing <code>&#47;</code> with <code>div</code>, but <code>div</code> is used for <code>Integral</code> types, whereas <code>(&#47;)</code> is used for <code>Fractional</code> numbers, and a type that is a member of both would be a bit &quot;strange&quot;."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1571258659, "post_id": 58416680, "comment_id": 103185060, "body": "Doesn&#39;t the code in your first branch (<code>maximum xs `div` n + 1</code>) already return the ceiling of the division? Why branch at all, then?"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1571240516, "creation_date": 1571240516, "answer_id": 58417102, "question_id": 58416680, "link": "https://stackoverflow.com/questions/58416680/error-with-passing-a-function-that-outputs-a-fractional-as-an-argument-but-not/58417102#58417102", "title": "Error with passing a function that outputs a fractional as an argument, but not with passing float directly", "body": "<p>You are mixing the \"<code>Integral</code>\" world with the \"<code>Fractional</code>\" world here. Indeed, <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:div\" rel=\"nofollow noreferrer\"><strong><code>div :: Integral a =&gt; a -&gt; a -&gt; a</code></strong></a> and <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:mod\" rel=\"nofollow noreferrer\"><strong><code>mod :: Integral a =&gt; a -&gt; a -&gt; a</code></strong></a>, are working with types that are <code>Integral</code>, whereas <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:-47-\" rel=\"nofollow noreferrer\"><strong><code>(/) :: Fractional a =&gt; a -&gt; a -&gt; a</code></strong></a> works with items that are a type that are members of the <code>Fractional</code> typeclass.</p>\n\n<p>Although, strictly speaking, one can make a type in Haskell that is both <code>Integral</code>, and <code>Fractional</code>, the two worlds have not that much in common. Furthermore we do not need that anyway. If you want to calculate the ceiling of <code>a/b</code>, you can calculate that with <code>div (a+b-1) b</code>. We can even use <code>div (a+b) b</code> here, since you want to add <code>+1</code> if it is divisable:</p>\n\n<pre><code>maxDiv :: (Integral a, Foldable t) =&gt; a -&gt; t a -&gt; a\nmaxDiv n xs = div (maximum xs + n) n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 10564793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea55694a1fd734c241fe4d99816ee4c?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar Smith", "link": "https://stackoverflow.com/users/10564793/edgar-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58417102, "answer_count": 1, "score": 1, "last_activity_date": 1571240516, "creation_date": 1571239095, "question_id": 58416680, "link": "https://stackoverflow.com/questions/58416680/error-with-passing-a-function-that-outputs-a-fractional-as-an-argument-but-not", "title": "Error with passing a function that outputs a fractional as an argument, but not with passing float directly", "body": "<p>I'm trying to write a function that takes a number and a list and if the maximum number in the list and the input number are divisible, then return the result plus 1, but if it's not divisible then return the ceiling of the result</p>\n\n<p>I have code that works as follows:</p>\n\n<pre><code>maxDiv n xs \n   | maximum xs `mod` n == 0 = ((maximum xs `div` n) + 1)\n   | otherwise = ceiling (1.8)\n</code></pre>\n\n<p>the problem is that when I replace the 1.8 with </p>\n\n<pre><code>((maximum xs) / n)\n</code></pre>\n\n<p>I get an error, which I'll post below. I'ved tried taking it into a separate named function, as well as the taking it along with the ceiling part into a separate function, such as</p>\n\n<pre><code>helper n xs = ceiling ((maximum xs) / n)\nlength' n xs | maximum xs `mod` n == 0 = ((maximum xs `div` n) + 1) | otherwise = helper n xs\n</code></pre>\n\n<p>but I still get the same error.</p>\n\n<pre><code>\u2022 Ambiguous type variable \u2018a0\u2019 arising from a use of \u2018print\u2019\n  prevents the constraint \u2018(Show a0)\u2019 from being solved.\n  Probable fix: use a type annotation to specify what \u2018a0\u2019 should be.\n  These potential instances exist:\n    instance (Show b, Show a) =&gt; Show (Either a b)\n      -- Defined in \u2018Data.Either\u2019\n    instance Show Ordering -- Defined in \u2018GHC.Show\u2019\n    instance Show Integer -- Defined in \u2018GHC.Show\u2019\n    ...plus 23 others\n    ...plus 43 instances involving out-of-scope types\n    (use -fprint-potential-instances to see them all)\n\u2022 In a stmt of an interactive GHCi command: print it\n</code></pre>\n\n<p>I've looked at the typing, and they all seem to be fractionals, what am I getting wrong / what would be a way around this?</p>\n"}, {"tags": ["list", "function", "haskell"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 12189211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916d741c3407c241c286e5b38d11478f?s=128&d=identicon&r=PG&f=1", "display_name": "vNSkyline", "link": "https://stackoverflow.com/users/12189211/vnskyline"}, "edited": false, "score": 0, "creation_date": 1571243384, "post_id": 58415476, "comment_id": 103178324, "body": "Now I&#39;m trying to make the decompress function, but stuck with the list comprehension again. <code>decompress :: [(Int, Char)] -&gt; String decompress n = [ x | x &lt;- replicate (map fst (n)) (map snd (n)) ]</code> Getting type errors with this code"}, {"owner": {"reputation": 700, "user_id": 5499914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fz53h.png?s=128&g=1", "display_name": "Khuldraeseth na&#39;Barya", "link": "https://stackoverflow.com/users/5499914/khuldraeseth-nabarya"}, "reply_to_user": {"reputation": 93, "user_id": 12189211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916d741c3407c241c286e5b38d11478f?s=128&d=identicon&r=PG&f=1", "display_name": "vNSkyline", "link": "https://stackoverflow.com/users/12189211/vnskyline"}, "edited": false, "score": 0, "creation_date": 1571244482, "post_id": 58415476, "comment_id": 103178844, "body": "@vNSkyline The first thing I notice is that you&#39;ve switched the <code>Int</code> and the <code>Char</code>. <code>replicate</code> has type <code>Int -&gt; a -&gt; [a]</code>, so it can never take the result of <code>map</code> as a first argument. Instead of transforming the entire list, you probably want to look at each item individually."}, {"owner": {"reputation": 93, "user_id": 12189211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916d741c3407c241c286e5b38d11478f?s=128&d=identicon&r=PG&f=1", "display_name": "vNSkyline", "link": "https://stackoverflow.com/users/12189211/vnskyline"}, "reply_to_user": {"reputation": 700, "user_id": 5499914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fz53h.png?s=128&g=1", "display_name": "Khuldraeseth na&#39;Barya", "link": "https://stackoverflow.com/users/5499914/khuldraeseth-nabarya"}, "edited": false, "score": 0, "creation_date": 1571245075, "post_id": 58415476, "comment_id": 103179099, "body": "@Khuldraesethna&#39;Barya Yes i changed it, but my idea is to get the frequency number from the tuple and replicate the character with that number. Is there any other method for that?"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "reply_to_user": {"reputation": 93, "user_id": 12189211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916d741c3407c241c286e5b38d11478f?s=128&d=identicon&r=PG&f=1", "display_name": "vNSkyline", "link": "https://stackoverflow.com/users/12189211/vnskyline"}, "edited": false, "score": 2, "creation_date": 1571246558, "post_id": 58415476, "comment_id": 103179758, "body": "@vNSkyline <code>decompress n = [ x | (c, f) &lt;- n, x &lt;- replicate f c ]</code>"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1571235326, "creation_date": 1571235326, "answer_id": 58415476, "question_id": 58415407, "link": "https://stackoverflow.com/questions/58415407/count-elements-in-list-with-list-comprehension/58415476#58415476", "title": "Count elements in list with list comprehension", "body": "<p>There is no need here to use another generator in your list. You can calculate the <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:length\" rel=\"nofollow noreferrer\"><strong><code>length :: Foldable f =&gt; f a -&gt; Int</code></strong></a> of the group <code>xs</code> here. We use here an <a href=\"http://zvon.org/other/haskell/Outputsyntax/As-patterns_reference.html\" rel=\"nofollow noreferrer\"><em>as-pattern</em> [zvon.org]</a> to have both access to the entire group, and the first item of that group:</p>\n\n<pre><code>compress :: Eq a =&gt; [a] -&gt; [(a, Int)]\ncompress n = [ (x, <b>length xs</b>) | <b>xs@</b>(x:_) &lt;- group n ]</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 12189211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916d741c3407c241c286e5b38d11478f?s=128&d=identicon&r=PG&f=1", "display_name": "vNSkyline", "link": "https://stackoverflow.com/users/12189211/vnskyline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 58415476, "answer_count": 1, "score": 2, "last_activity_date": 1571236745, "creation_date": 1571235102, "last_edit_date": 1571236745, "question_id": 58415407, "link": "https://stackoverflow.com/questions/58415407/count-elements-in-list-with-list-comprehension", "title": "Count elements in list with list comprehension", "body": "<p>I'm new to Haskell and trying to write a simple function. I would like to get each element compressed by its upcoming frequency. </p>\n\n<p>For example input: <code>\"aabbcca\"</code> and the result I would like to get is</p>\n\n<pre><code>[('a',2), ('b',2), ('c',2), ('a',1)]\n</code></pre>\n\n<p>My code now looks like this: </p>\n\n<pre><code>import Data.List\n\ncompress :: String -&gt; [(Char, Int)]\ncompress n = [ (x,y) | x:xs &lt;- group n, y &lt;- ? ]\n</code></pre>\n\n<p>I'm stuck and don't really know how I should count the elements. Any advice?</p>\n"}, {"tags": ["haskell", "haskell-stack"], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 5298455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zEzWj_qaO7I/AAAAAAAAAAI/AAAAAAAAACw/A7lGVwEZUYs/photo.jpg?sz=128", "display_name": "Emanuel Borsboom", "link": "https://stackoverflow.com/users/5298455/emanuel-borsboom"}, "is_accepted": true, "score": 1, "last_activity_date": 1571405065, "creation_date": 1571405065, "answer_id": 58451843, "question_id": 58414624, "link": "https://stackoverflow.com/questions/58414624/trapping-ctrl-c-within-stacks-docker/58451843#58451843", "title": "Trapping ctrl-c within stack&#39;s docker", "body": "<p>Short answer: no.</p>\n\n<p>Longer answer: I implemented Stack's docker ctrl-C/signal handling.  It was very tricky to get it to behave in a somewhat reasonable way for most common use cases, because Docker does weird things with ctrl-C and signals.</p>\n\n<p>I'd suggest if you need this level of sophistication, you might be better off creating the Docker container yourself and then running Stack in it, rather than having Stack do it.</p>\n"}], "owner": {"reputation": 1083, "user_id": 5272159, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee102cff2130800106cdd7d99db787e?s=128&d=identicon&r=PG&f=1", "display_name": "timothyylim", "link": "https://stackoverflow.com/users/5272159/timothyylim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 58451843, "answer_count": 1, "score": -1, "last_activity_date": 1571405065, "creation_date": 1571232772, "question_id": 58414624, "link": "https://stackoverflow.com/questions/58414624/trapping-ctrl-c-within-stacks-docker", "title": "Trapping ctrl-c within stack&#39;s docker", "body": "<p>I'm developing with stack within a docker container. However I need to use ctrl+c within my container without it getting killed. Is there a way to pass a config into stack's docker in order for ctrl+c not to be intercepted?</p>\n"}, {"tags": ["string", "sorting", "haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1571221690, "post_id": 58411133, "comment_id": 103165561, "body": "What is not workging with your approach? Can you show a fair attempt and explain what is not working. Lack of experience is not an excuse for lack of effort."}, {"owner": {"reputation": 11, "user_id": 12225848, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuh4X0-M2Cr1L5mzMLbMhvjaudYlcceehBHZCQ=k-s128", "display_name": "Karaskent YT", "link": "https://stackoverflow.com/users/12225848/karaskent-yt"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1571221957, "post_id": 58411133, "comment_id": 103165687, "body": "sort3 :: String -&gt; String -&gt; String -&gt; (String, String, String) sort3 &quot;&quot; &quot;&quot; &quot;&quot; = (&lt;=) &quot;&quot; ((&lt;=) &quot;&quot; &quot;&quot;)  This is my best try... Maybe now you can see why, I cannot understand anything yet :/"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1571225825, "post_id": 58411133, "comment_id": 103167779, "body": "Are you restricted in any way as to use of library functions? With <code>sort</code> from <code>Data.List</code> which sorts a list, this is a 1-liner."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1571237084, "post_id": 58411133, "comment_id": 103174887, "body": "Don&#39;t put code in a comment; add it directly to your question."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1571225064, "last_edit_date": 1571225064, "creation_date": 1571222280, "answer_id": 58411338, "question_id": 58411133, "link": "https://stackoverflow.com/questions/58411133/sort-strings-in-alphabetical-orders/58411338#58411338", "title": "Sort Strings in alphabetical orders", "body": "<p>When sorting three strings <em>a</em>, <em>b</em>, and <em>c</em>, there are six ways in which the strings can be ordered:</p>\n\n<ol>\n<li><em>(a, b, c)</em>;</li>\n<li><em>(a, c, b)</em>;</li>\n<li><em>(b, a, c)</em>;</li>\n<li><em>(b, c, a)</em>;</li>\n<li><em>(c, a, b)</em>; and</li>\n<li><em>(c, b, a)</em>.</li>\n</ol>\n\n<p>In these answers, the relation <em>e<sub>1</sub>&le;e<sub>2</sub>&le;e<sub>3</sub></em> should hold, with <em>e<sub>i</sub></em> the <em>i</em>-th element in the tuple.</p>\n\n<p>This thus means that you can implement the function in the following manner:</p>\n\n<pre><code>sort3 :: Ord a =&gt; a -&gt; a -&gt; a -&gt; (a, a, a)\nsort3 a b c | &hellip; &lt;= &hellip; && &hellip; &lt;= &hellip; = (&hellip;, &hellip;, &hellip;)\n            | &hellip; &lt;= &hellip; && &hellip; &lt;= &hellip; = (&hellip;, &hellip;, &hellip;)\n            | &vellip;</code></pre>\n\n<p>As an example, I here demonstrate how to implement a <code>sort2</code>. I leave <code>sort3</code> as an exercise:</p>\n\n<pre><code>sort2 :: Ord a =&gt; a -&gt; a -&gt; (a, a)\nsort2 a b | a &lt;= b = (a, b)\n          | otherwise = (b, a)</code></pre>\n\n<p>Note that you can use <code>sort2</code> when you implement <code>sort3</code>. Indeed, you can make use of three <code>sort2</code> calls to sort a 3-tuple correctly. This is however a slightly more <em>advanced</em> approach. I suggest that you first aim to implement <code>sort3</code> without <code>sort2</code>, and then aim to implement it in terms of <code>sort2</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 12225848, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuh4X0-M2Cr1L5mzMLbMhvjaudYlcceehBHZCQ=k-s128", "display_name": "Karaskent YT", "link": "https://stackoverflow.com/users/12225848/karaskent-yt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 58411338, "answer_count": 1, "score": -2, "last_activity_date": 1571233693, "creation_date": 1571221607, "last_edit_date": 1571233693, "question_id": 58411133, "link": "https://stackoverflow.com/questions/58411133/sort-strings-in-alphabetical-orders", "title": "Sort Strings in alphabetical orders", "body": "<p>I have to program a function </p>\n\n<pre><code>sort3 :: String -&gt; String -&gt; String -&gt; (String, String, String)\n</code></pre>\n\n<p>that sorts by function <code>(&lt;=)</code> (also we can use min or max)</p>\n\n<p>for example:</p>\n\n<pre><code>sort3 \"Is\" \"This\" \"Food\"\n(\"Food\", \"Is\", \"This\")\n\nsort3 \"Car\" \"45\" \"Table\"\n(\"45\",\"Car\",\"Table\")\n</code></pre>\n"}, {"tags": ["haskell", "hdl", "clash"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 6, "creation_date": 1571209246, "post_id": 58407336, "comment_id": 103158990, "body": "<a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:pure\" rel=\"nofollow noreferrer\"><code>pure</code></a>  is not a keyword, it is just another function, taking a <code>Signed 8</code> and returning a value of type <code>Signal System a</code>."}], "answers": [{"tags": [], "owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "is_accepted": true, "score": 5, "last_activity_date": 1571210019, "creation_date": 1571210019, "answer_id": 58407713, "question_id": 58407336, "link": "https://stackoverflow.com/questions/58407336/what-is-the-purpose-of-pure-keyword-in-the-clash-tutorial-example/58407713#58407713", "title": "What is the purpose of &#39;pure&#39; keyword in the clash tutorial example?", "body": "<p><code>Signal</code> has an instance of <code>Applicative</code> to which <code>pure</code> belongs. <code>pure :: a -&gt; Signal dom a</code> lifts a value of type <code>Signed 8</code> to <code>Signal dom (Signed 8)</code>. Which unifies with <code>Signal System a</code> in that context to result in <code>Signal System (Signed 8)</code>.</p>\n\n<p>Reference used: <a href=\"http://hackage.haskell.org/package/clash-prelude-1.0.0/docs/Clash-Signal.html\" rel=\"noreferrer\">http://hackage.haskell.org/package/clash-prelude-1.0.0/docs/Clash-Signal.html</a></p>\n"}], "owner": {"reputation": 2579, "user_id": 4422957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xaIFc.jpg?s=128&g=1", "display_name": "FabienM", "link": "https://stackoverflow.com/users/4422957/fabienm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 58407713, "answer_count": 1, "score": 0, "last_activity_date": 1571210019, "creation_date": 1571208691, "question_id": 58407336, "link": "https://stackoverflow.com/questions/58407336/what-is-the-purpose-of-pure-keyword-in-the-clash-tutorial-example", "title": "What is the purpose of &#39;pure&#39; keyword in the clash tutorial example?", "body": "<p>In Clash official website, there is the following example :</p>\n\n<pre><code>&gt;&gt;&gt; sampleN @System 4 (register 0 (pure (8 :: Signed 8)))\n</code></pre>\n\n<p>I know what is a pure function, but why this keyword here ? If I remove it I got an error :</p>\n\n<pre><code>Clash.Prelude&gt; sampleN @System 4 (register 0 (8 :: Signed 8))\n\n&lt;interactive&gt;:2:32: error:\n    * Couldn't match expected type `Signal System a'\n                  with actual type `Signed 8'\n    * In the second argument of `register', namely `(8 :: Signed 8)'\n      In the third argument of `sampleN', namely\n        `(register 0 (8 :: Signed 8))'\n      In the expression: sampleN @System 4 (register 0 (8 :: Signed 8))\n    * Relevant bindings include it :: [a] (bound at &lt;interactive&gt;:2:1)\n</code></pre>\n\n<p>Any clue ?</p>\n"}, {"tags": ["haskell", "tree"], "comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 2, "creation_date": 1571207508, "post_id": 58406108, "comment_id": 103158183, "body": "Hello! Please take a minute and read this <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>, if you do, probably you will delete this answer and create a new one, and you will receive a lot of help, indeed, I know the answer (and I can count  6 users in my head that by sure also knows it), but this is not a free code factory, you will understand if you read the link. I hope you can create soon the new question or edit this one soon. Best wishes."}], "answers": [{"comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1571213224, "post_id": 58407314, "comment_id": 103160957, "body": "Please do not provide solutions to homework problems, given the user did not show any attempt to solve it. See <a href=\"https://softwareengineering.meta.stackexchange.com/questions/6166/open-letter-to-students-with-homework-problems\" title=\"open letter to students with homework problems\">softwareengineering.meta.stackexchange.com/questions/6166/&hellip;</a>"}, {"owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1571217759, "post_id": 58407314, "comment_id": 103163452, "body": "I&#39;m sorry, I didn&#39;t consider that this might be a homework problem. I received (and still do) a lot of help from other Haskellers when starting out, even with seemingly trivial problems, and now hoped to also help other beginner to get started."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1571218104, "post_id": 58407314, "comment_id": 103163661, "body": "well helping is definitely a good idea. But the idea is that the user first makes a fair attempt. Usually in the answer, we can then explain what is not working with that attempt, and give extra tips to improve (efficiency, elegance, etc.)"}, {"owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1571219552, "post_id": 58407314, "comment_id": 103164454, "body": "Yes I agree - however sometimes one doesn&#39;t even know where to start. But in this case I just didn&#39;t consider this possibility."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1571219653, "post_id": 58407314, "comment_id": 103164498, "body": "perhaps you can rewrite your answer to one that gives &quot;hints&quot;. For examply by describing the process how to come up with a solution, but leaving some aspects blank such that the OP can fill these in :)."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571228345, "post_id": 58407314, "comment_id": 103169261, "body": "what if we have <code>tree = Node 5 (Node 3 tree Empty ) (Node 2 Empty Empty )</code>? :) can we see <code>2</code> in the output? (also, here&#39;s the <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">SO meta post about homeworks</a>)"}, {"owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571230092, "post_id": 58407314, "comment_id": 103170316, "body": "@WillNess If you&#39;re willing to wait for an eternity:P"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571232013, "post_id": 58407314, "comment_id": 103171510, "body": "isn&#39;t there another option, perhaps? ... ;)"}, {"owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571235033, "post_id": 58407314, "comment_id": 103173501, "body": "@WillNess Now I&#39;m curious to know what you mean:) My thought its that now it could be considered as a graph with a cycle (that isn&#39;t a tree anymore), but I don&#39;t think we can detect this cycle without making any assumptions, or we consider it as an infinite tree in which case there are infinitely many partial paths. What were you hinting at?"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571235786, "post_id": 58407314, "comment_id": 103174000, "body": "your code makes a preorder traversal of a tree, which is a variation on <i>depth first</i> traversal. but you could code up a <i>breadth first</i> traversal - either by hand, with queues, or approximately, by replacing <code>++</code> with <code>diagonalize</code> from &quot;universe&quot; package / &quot;Omega&quot; monad / etc. (one example is <a href=\"https://cs.stackexchange.com/a/97610/2909\">this</a>)"}, {"owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571236120, "post_id": 58407314, "comment_id": 103174219, "body": "@WillNess but wouldn&#39;t that still result in an infinite output for your example?"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571236130, "post_id": 58407314, "comment_id": 103174225, "body": "an infinite list for sure but such that will have 2 - and any other node -  at a <i>finite</i> index. unlike with your enumeration, for my example tree.  (for other examples, search @chi&#39;s answers for &quot;omega dovetailing&quot;, or Daniel Wagner&#39;s for &quot;universe&quot;, I think)"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "edited": false, "score": 0, "creation_date": 1571236282, "post_id": 58407314, "comment_id": 103174334, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/200962/discussion-between-will-ness-and-flawr\">continue this discussion in chat</a>."}, {"owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "edited": false, "score": 0, "creation_date": 1571236393, "post_id": 58407314, "comment_id": 103174403, "body": "Ah I see what you mean, thanks for explaining. And thanks for pointing  out the Omega monad, that could come in handy in golfing tasks:) (Do you know <a href=\"https://codegolf.stackexchange.com/\">ppcg.SE</a>? We do even have a <a href=\"https://chat.stackexchange.com/rooms/66515/of-monads-and-men\">haskell chat</a>!)"}], "tags": [], "owner": {"reputation": 5481, "user_id": 2913106, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/cM7Yq.jpg?s=128&g=1", "display_name": "flawr", "link": "https://stackoverflow.com/users/2913106/flawr"}, "is_accepted": false, "score": 1, "last_activity_date": 1571209172, "last_edit_date": 1571209172, "creation_date": 1571208598, "answer_id": 58407314, "question_id": 58406108, "link": "https://stackoverflow.com/questions/58406108/find-all-the-partial-paths-in-a-tree/58407314#58407314", "title": "Find all the partial paths in a tree", "body": "<p>First let us consider the type of this function, it must be <code>Tree a -&gt;  [[a]]</code>.</p>\n\n<p>So what can we do given a node <code>Node x left right</code>? We have the path that is just the node itself - this is just <code>[x]</code>, as well as the paths that go through this node to the left- and right sub tree. The paths going throu the left and right sub tree are just what we get if we apply our function to <code>left</code> and <code>right</code> respectively. We now just need to add <code>x</code> to the start of each of those paths and we do that by calling <code>map(x:) paths</code>. (And for an empty one we should get an empty list as there is no path.)</p>\n\n\n\n<pre class=\"lang-hs prettyprint-override\"><code>data Tree a = Empty | Node a (Tree a) (Tree a)\ntree = Node 5 (Node 3 Empty Empty ) (Node 2 Empty Empty )\n\npp :: Tree a -&gt; [[a]]\npp (Node x left right) = [[x]] ++ map(x:)(pp left) ++ map(x:)(pp right)\npp Empty = []\n</code></pre>\n\n<p>Now this has one flaw that the empty path is not considered as a partial path by this function. But we can easily amend that by adding it and wrapping it in another function:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>partialPaths :: Tree a -&gt; [[a]]\npartialPaths t = [[]] ++ pp t\n\nmain = print $ partialPaths tree\n</code></pre>\n\n<p><a href=\"https://tio.run/##bY09D8IgEIZ3fsUNDpDGRePSpG6uxsGNMFxStERaCb0BE/87QqnGGheOvF9Ph@NNWxtji4Rw9loDQgOH3tEDnnC8t1ngxRCfD6N8m@LvgE93O9fKK2Z1s1QZcw7q@o1a70FKVCqrJR/A6guBN9eOREJIGZSCqoIeHQ@14CmZE@JHK4W8U0ipqRIMPRm0J6Ru/Iv99mnCFVraIcZ6NEMSnTcDwQqW6TQV4ws\" rel=\"nofollow noreferrer\" title=\"Haskell \u2013 Try It Online\">Try it online!</a></p>\n"}], "owner": {"reputation": 9, "user_id": 12218351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0vS2hR45W9s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfl6iFIzVOV9CE0icwZyQlRMSQx4w/photo.jpg?sz=128", "display_name": "DxpGD", "link": "https://stackoverflow.com/users/12218351/dxpgd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1571213828, "creation_date": 1571202618, "last_edit_date": 1571213828, "question_id": 58406108, "link": "https://stackoverflow.com/questions/58406108/find-all-the-partial-paths-in-a-tree", "title": "Find all the partial paths in a tree", "body": "<p>I am trying to create a Haskell function that generates a list containing all the partial paths of a tree, given the tree implementation <code>data Tree a = Empty | Node a (Tree a) (Tree a)</code>. For example, if I have a tree</p>\n\n<pre><code>tree = Node 5 (Node 3 Empty Empty ) (Node 2 Empty Empty )\n</code></pre>\n\n<p>I want to get</p>\n\n<pre><code>[[],[5],[5,3],[5,2]]\n</code></pre>\n\n<p>How could I make such a function?</p>\n"}, {"tags": ["function", "haskell", "syntax", "definition", "guard-clause"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1571181281, "post_id": 58403682, "comment_id": 103152409, "body": "Your parse error is on the second <code>=</code> in <code>= arrayFunc (x:xs) = x * arrayFunc xs</code>, in fact I can&#39;t really tell what you meant by this. As for the more general problem, I recommend writing separate functions for the product and the average, which you can use recursion for if you want to (although that would be slightly tricky for the average), and then just use the guards in <code>arrayFunc</code> to decide which of the two functions to use."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7391692, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SsEsWaNXh_0/AAAAAAAAAAI/AAAAAAAAA6k/6_Xi17U0oo4/photo.jpg?sz=128", "display_name": "Watakashi", "link": "https://stackoverflow.com/users/7391692/watakashi"}, "edited": false, "score": 0, "creation_date": 1571183094, "post_id": 58403792, "comment_id": 103152785, "body": "Thank you very much for this response, I was unaware of &quot;where&quot; but it seems like exactly what I wanted. I implemented these changes and am now getting a &quot;couldn&#39;t match type &#39;Integer&#39; with &#39;Int&#39;&quot; error on the call of &quot;go2 array&quot;. I don&#39;t think so, but could that have to do with what you were saying about [Integer] being a list rather than an array? I wasn&#39;t sure how to declare an array as an input for a function so [Integer] was my best guess."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 13, "user_id": 7391692, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SsEsWaNXh_0/AAAAAAAAAAI/AAAAAAAAA6k/6_Xi17U0oo4/photo.jpg?sz=128", "display_name": "Watakashi", "link": "https://stackoverflow.com/users/7391692/watakashi"}, "edited": false, "score": 0, "creation_date": 1571183181, "post_id": 58403792, "comment_id": 103152813, "body": "yes, it is possible to code this with <code>let</code> but with <code>where</code> it is much easier because it does the required transformation by itself."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1571184632, "post_id": 58403792, "comment_id": 103153061, "body": "if you weren&#39;t told to use <code>Integer</code>, then make the input <code>[Int]</code> instead and that type error will go away. It&#39;s slightly annoying that the <code>length</code> function returns an <code>Int</code>, and <code>div</code> expects its two arguments to be the same type."}, {"owner": {"reputation": 13, "user_id": 7391692, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SsEsWaNXh_0/AAAAAAAAAAI/AAAAAAAAA6k/6_Xi17U0oo4/photo.jpg?sz=128", "display_name": "Watakashi", "link": "https://stackoverflow.com/users/7391692/watakashi"}, "edited": false, "score": 0, "creation_date": 1571184777, "post_id": 58403792, "comment_id": 103153093, "body": "I was told to use Integer, but thank you for pointing out that it was length that was returning an Int. Now I can go look into how I can maybe recast that as an Integer. Does Haskell do recasting? I don&#39;t know, guess I&#39;ll see."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1571185883, "post_id": 58403792, "comment_id": 103153304, "body": "Not automatically, but there are usually functions to do so. In this case you would want <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:fromIntegral\" rel=\"nofollow noreferrer\">fromIntegral</a>. (There is also <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-List.html#v:genericLength\" rel=\"nofollow noreferrer\">genericLength</a> to compute the length of a list as an arbitrary numeric type - you have to import the <code>Data.List</code> module to use that one.)"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1571203586, "post_id": 58403792, "comment_id": 103156757, "body": "<code>genericLength</code> is a bit controversial as it could be <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/src/Data.OldList.html#genericLength\" rel=\"nofollow noreferrer\">quite inefficient</a>. so it&#39;ll be <code>((x + go2 xs) - 1) `div` fromIntegral (length xs)</code>."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1571213545, "post_id": 58403792, "comment_id": 103161122, "body": "BTW <code>%</code> is not the mod operator in Haskell.  It is the <code>mod</code> function (which can be written infix as <code>x `mod` y</code>)"}], "tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": true, "score": 0, "last_activity_date": 1571182039, "creation_date": 1571182039, "answer_id": 58403792, "question_id": 58403682, "link": "https://stackoverflow.com/questions/58403682/what-is-the-syntax-for-different-recursions-depending-on-two-boolean-guards/58403792#58403792", "title": "What is the syntax for different recursions depending on two boolean guards?", "body": "<p>Define an auxiliary  inner function  like that:</p>\n\n<pre><code>arrayFunc :: [Integer] -&gt; Integer\narrayFunc [] = 1\narrayFunc array\n  | (length array) % 2 == 1  =  go1 array\n  | (length array) % 2 == 0  =  go2 array\n  where\n    go1 (x:xs)  =  x * go1 xs\n    go2 (x:xs)  =  ((x + go2 xs) - 1) `div` length xs \n</code></pre>\n\n<p>This deals only with the syntactical issues in your question. In particular, <code>[Integer]</code> is not an array -- it is a <em>list</em> of integers. </p>\n\n<p>But of course the name of a variable doesn't influence a code's correctness.</p>\n"}, {"tags": [], "owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "is_accepted": false, "score": 0, "last_activity_date": 1571220006, "last_edit_date": 1571220006, "creation_date": 1571219638, "answer_id": 58410535, "question_id": 58403682, "link": "https://stackoverflow.com/questions/58403682/what-is-the-syntax-for-different-recursions-depending-on-two-boolean-guards/58410535#58410535", "title": "What is the syntax for different recursions depending on two boolean guards?", "body": "<p>Without focus on recursion this should be an acceptable solution: </p>\n\n<pre><code>arrayFunc :: (Integral a) =&gt; [a] -&gt; a\narrayFunc ls\n    | n == 0     = 1\n    | even n     = (sum ls) `div` (fromIntegral n)\n    | otherwise  = product ls\n    where\n    n     = length xs \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571230460, "post_id": 58412977, "comment_id": 103170542, "body": "I know the question is about  the syntax; I&#39;m pointing out that you can be more efficient <i>and</i> avoid the syntax issue altogether."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1571231671, "last_edit_date": 1571231671, "creation_date": 1571227765, "answer_id": 58412977, "question_id": 58403682, "link": "https://stackoverflow.com/questions/58403682/what-is-the-syntax-for-different-recursions-depending-on-two-boolean-guards/58412977#58412977", "title": "What is the syntax for different recursions depending on two boolean guards?", "body": "<p>The reason you have guards is because you are trying to determine the length of the list before you actually look at the values in the list.</p>\n\n<p>Rather than make multiple passes (one to compute the length, another to compute the sum or product), just compute <em>all</em> of the values you <em>might</em> need, as you walk the list, and then at the end make the decision and return the appropriate value:</p>\n\n<pre><code>arrayFunc = go (0, 1, 0, True)\n  where go (s, p, len, parity) [] = \n               if parity  then  (if len /= 0 then s `div` len else 0) \n                          else  p\n        go (s, p, len, parity) (x:xs) = \n               go (s + x, p * x, len + 1, not parity) xs\n</code></pre>\n\n<p>There are various things you can do to reduce memory usage, and the recursion is just reimplementing a fold, but this gives you an idea of how to compute the answer in one pass.</p>\n"}], "owner": {"reputation": 13, "user_id": 7391692, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SsEsWaNXh_0/AAAAAAAAAAI/AAAAAAAAA6k/6_Xi17U0oo4/photo.jpg?sz=128", "display_name": "Watakashi", "link": "https://stackoverflow.com/users/7391692/watakashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 58403792, "answer_count": 3, "score": 0, "last_activity_date": 1571231671, "creation_date": 1571181009, "last_edit_date": 1571183077, "question_id": 58403682, "link": "https://stackoverflow.com/questions/58403682/what-is-the-syntax-for-different-recursions-depending-on-two-boolean-guards", "title": "What is the syntax for different recursions depending on two boolean guards?", "body": "<p>I'm very new to Haskell and am trying to write a simple function that will take an array of integers as input, then return either the product of all the elements or the average, depending on whether the array is of odd or even length, respectively.</p>\n\n<p>I understand how to set a base case for recursion, and how to set up boolean guards for different cases, but I don't understand how to do these in concert.</p>\n\n<pre><code>arrayFunc :: [Integer] -&gt; Integer                                                                                       \narrayFunc [] = 1                                                                                                        \narrayFunc array                                                                                                           \n| (length array) % 2 == 1 = arrayFunc (x:xs) = x * arrayFunc xs                                                     \n| (length array) % 2 == 0 = ((arrayFunc (x:xs) = x + arrayFunc xs) - 1) `div` length xs \n</code></pre>\n\n<p>Currently I'm getting an error</p>\n\n<blockquote>\n<pre><code>\"parse error on input '='\nPerhaps you need a 'let' in a 'do' block?\"\n</code></pre>\n</blockquote>\n\n<p>But I don't understand how I would use a <code>let</code> here.</p>\n"}, {"tags": ["haskell", "pattern-matching"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1571187232, "post_id": 58403399, "comment_id": 103153606, "body": "You might also like <code>zipWith</code>, as in <code>insertPixels = zipWith (\\x y -&gt; Pixel (read x) (read y) 9999999 False)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6684107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yL7iP.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/6684107/justin"}, "edited": false, "score": 0, "creation_date": 1571263548, "post_id": 58403449, "comment_id": 103186773, "body": "Thank you. I have question, does Haskell expand everything and then make the list or does it make a new list at ever iteration?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "reply_to_user": {"reputation": 27, "user_id": 6684107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yL7iP.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/6684107/justin"}, "edited": false, "score": 0, "creation_date": 1571295199, "post_id": 58403449, "comment_id": 103194475, "body": "Not really sure what you&#39;re asking. But Haskell is <i>lazy</i> in general, which means it won&#39;t calculate anything until it really needs to (generally by having to print it out). With a list, it will only calculate as many elements of the list as are needed at any point."}], "tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": false, "score": 5, "last_activity_date": 1571179082, "creation_date": 1571179082, "answer_id": 58403449, "question_id": 58403399, "link": "https://stackoverflow.com/questions/58403399/redundant-pattern-matching-warning/58403449#58403449", "title": "Redundant pattern matching warning", "body": "<p>Just switch round the order of your 2 lines, like this:</p>\n\n<pre><code>insertPixels :: [String] -&gt; [String] -&gt; [Pixel]\ninsertPixels (x:xs) (y:ys) = [Pixel (read x) (read y) 99999999 False] ++ insertPixels xs ys\ninsertPixels _ _ = []\n</code></pre>\n\n<p>The problem is that <code>insertPixels _ _</code> matches everything, and since patterns are evaluated from top down, stopping at the first match, all possible inputs would result in the empty list - clearly not what you intended. As corrected, the recursive case will take effect whenever both input lists are nonempty, and as soon as one is empty, it will fall through to the \"catch-all\" case and result in the empty list.</p>\n\n<p>As a side note, it's not particularly idiomatic to use the <code>(++)</code> operator to add a single element to the start of a list. You can use the <code>(:)</code> (\"cons\") operator instead:</p>\n\n<pre><code>insertPixels :: [String] -&gt; [String] -&gt; [Pixel]\ninsertPixels (x:xs) (y:ys) = (Pixel (read x) (read y) 99999999 False) : insertPixels xs ys\ninsertPixels _ _ = []\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 6684107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yL7iP.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/6684107/justin"}, "edited": false, "score": 0, "creation_date": 1571263569, "post_id": 58409081, "comment_id": 103186777, "body": "Thank you. I will try this."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1571214971, "creation_date": 1571214971, "answer_id": 58409081, "question_id": 58403399, "link": "https://stackoverflow.com/questions/58403399/redundant-pattern-matching-warning/58409081#58409081", "title": "Redundant pattern matching warning", "body": "<p>The underscore <code>_</code> is a wildcard, this thus means that it matches anything: empty lists, non-empty lists, etc.</p>\n\n<p>This thus means that the first line, will \"fire\", regardless what values you pass to <code>insertPixels</code>. There is no input pattern for which the second line will \"fire\", hence the warning.</p>\n\n<p>We can use pattern matching on empty lists, like:</p>\n\n<pre><code>insertPixels :: [String] -&gt; [String] -&gt; [Pixel]\ninsertPixels [] _ = []\ninsertPixels _ [] = []\ninsertPixels (x:xs) (y:ys) = [Pixel (read x) (read y) 99999999 False] ++ insertPixels xs ys</code></pre>\n\n<p>What you here describe however is a well-known pattern. A <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:zipWith\" rel=\"nofollow noreferrer\"><strong><code>zipWith :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]</code></strong></a>. We can thus define the <code>insertPixel</code>s as:</p>\n\n<pre><code>import Data.Function(on)\n\ninsertPixels :: [String] -&gt; [String] -&gt; [Pixel]\ninsertPixels = zipWith (\\x y -> on Pixel read x y 99999999 False)</code></pre>\n\n<p>I would advice however to remove the <code>read</code> out of the <code>insertPixels</code> function, and thus work with two lists of <code>Float</code>s. If you want to use <code>read</code>, then you can do that at the caller level.</p>\n"}], "owner": {"reputation": 27, "user_id": 6684107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yL7iP.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/6684107/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "closed_date": 1571218592, "answer_count": 2, "score": 1, "last_activity_date": 1571214971, "creation_date": 1571178609, "last_edit_date": 1571213952, "question_id": 58403399, "link": "https://stackoverflow.com/questions/58403399/redundant-pattern-matching-warning", "closed_reason": "Duplicate", "title": "Redundant pattern matching warning", "body": "<p>I am writing a piece of code that is a function returning\na list of pixels which is a special data type I have defined which is of the following:</p>\n\n<pre><code>data Pixel = Pixel {\n                    color :: Float,\n                    elevation :: Float,\n                    distance: Float,\n                    visited :: Bool\n                   } deriving (Show)\n</code></pre>\n\n<p>I have this function that is going to go through two files and put them together into a list of pixels. The files contain the color and elevation respectively so I proceed to get this code output:</p>\n\n<pre><code>insertPixels :: [String] -&gt; [String] -&gt; [Pixel]\ninsertPixels _ _ = []\ninsertPixels (x:xs) (y:ys) = [Pixel (read x) (read y) 99999999 False] ++ insertPixels xs ys\n</code></pre>\n\n<p>When I attempt to compile this or load it into the interpreter, I receive this error:</p>\n\n<pre><code>lab1.hs:33:1: warning: [-Woverlapping-patterns]\nPattern match is redundant\nIn an equation for \u2018insertPixels\u2019:\n    insertPixels (x : xs) (y : ys) = ...\n|\n| insertPixels (x:xs) (y:ys) = [Pixel (read x) (read y) 99999999 False] ++ insertPixels xs ys\n| ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>I don't really understand what this means or what I am doing wrong.</p>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1571187153, "post_id": 58403390, "comment_id": 103153589, "body": "How do you normally run GHC?"}], "answers": [{"tags": [], "owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "is_accepted": false, "score": 1, "last_activity_date": 1571212995, "creation_date": 1571212995, "answer_id": 58408499, "question_id": 58403390, "link": "https://stackoverflow.com/questions/58403390/how-can-i-change-haskell-version/58408499#58408499", "title": "How can I change Haskell version?", "body": "<p>if you're using <code>stack</code>, the lts gives you the compiler version. For example <code>lts 14.9</code> is compiler version <code>8.6.5</code> (correspondeces in <a href=\"http://docs.haskellstack.org/en/stable/README/\" rel=\"nofollow noreferrer\">official</a> webpage). </p>\n\n<p>What's important to remember is that when executed outside a project folder, stack picks up the global configuration (typically at <code>~/.stack/global-project/stack.yaml</code>). The confusion comes from the fact that global configuration may have a different <code>lts</code> than project configuration. In such case stack will download both version and use each depending on the enviroment it is executed (global or project). </p>\n\n<p>As a recommendation, pick up a <code>lts</code> and use it in your global config <strong>and</strong> project config so you'll avoid stack downloading many different versions of haskell compiler.</p>\n"}], "owner": {"reputation": 11, "user_id": 9780936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Santiago Isaza", "link": "https://stackoverflow.com/users/9780936/santiago-isaza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571212995, "creation_date": 1571178556, "last_edit_date": 1571178920, "question_id": 58403390, "link": "https://stackoverflow.com/questions/58403390/how-can-i-change-haskell-version", "title": "How can I change Haskell version?", "body": "<p>I have two haskell versions downloaded. 8.6.5 and 8.2.2. \nThe last thing I did was running stack upgrade in the cmd. But I don't know how to change from one version to the other.</p>\n\n<p>PD: I'm using Windows</p>\n"}, {"tags": ["haskell", "ghc"], "comments": [{"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 1, "creation_date": 1571170127, "post_id": 58401723, "comment_id": 103148903, "body": "For reference, the official documentation for the extension is here: <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#complete-pragmas\" rel=\"nofollow noreferrer\">downloads.haskell.org/~ghc/latest/docs/html/users_guide/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2158, "user_id": 7190191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80c97da8e6a0d7784317a81a3e8539ca?s=128&d=identicon&r=PG&f=1", "display_name": "grepcake", "link": "https://stackoverflow.com/users/7190191/grepcake"}, "edited": false, "score": 0, "creation_date": 1571169752, "post_id": 58401851, "comment_id": 103148790, "body": "Does my attempt have any effect whatsoever? What does it do for type classes if anything?"}, {"owner": {"reputation": 2158, "user_id": 7190191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80c97da8e6a0d7784317a81a3e8539ca?s=128&d=identicon&r=PG&f=1", "display_name": "grepcake", "link": "https://stackoverflow.com/users/7190191/grepcake"}, "edited": false, "score": 0, "creation_date": 1571169831, "post_id": 58401851, "comment_id": 103148812, "body": "So, I&#39;m pretty sure, that in my example <code>foo</code> is total. How do I get rid of the warnings? Maybe there is a pragma that disables some specific warnings for a specific function?"}, {"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "reply_to_user": {"reputation": 2158, "user_id": 7190191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80c97da8e6a0d7784317a81a3e8539ca?s=128&d=identicon&r=PG&f=1", "display_name": "grepcake", "link": "https://stackoverflow.com/users/7190191/grepcake"}, "edited": false, "score": 3, "creation_date": 1571170379, "post_id": 58401851, "comment_id": 103148983, "body": "That pragma does nothing, it would be better if GHC warned about it. Disabling certain warnings such as incomplete matches locally is a regularly requested feature, but for now there is no way. You have to rewrite your program differently or disable the warning globally (at least for the whole file)."}], "tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": true, "score": 4, "last_activity_date": 1571169494, "creation_date": 1571169494, "answer_id": 58401851, "question_id": 58401723, "link": "https://stackoverflow.com/questions/58401723/complete-pragma-doesnt-prevent-incomplete-patterns-warning/58401851#58401851", "title": "COMPLETE pragma doesn&#39;t prevent incomplete-patterns warning", "body": "<p><code>COMPLETE</code> pragmas can only be attached to types, not type classes. There is currently no way to specify a complete set of patterns that works for all types of a given class.</p>\n"}], "owner": {"reputation": 2158, "user_id": 7190191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/80c97da8e6a0d7784317a81a3e8539ca?s=128&d=identicon&r=PG&f=1", "display_name": "grepcake", "link": "https://stackoverflow.com/users/7190191/grepcake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 58401851, "answer_count": 1, "score": 5, "last_activity_date": 1571169494, "creation_date": 1571168920, "last_edit_date": 1571169292, "question_id": 58401723, "link": "https://stackoverflow.com/questions/58401723/complete-pragma-doesnt-prevent-incomplete-patterns-warning", "title": "COMPLETE pragma doesn&#39;t prevent incomplete-patterns warning", "body": "<p>I made two pattern views for a list-like class.</p>\n\n<pre><code>infixr 5 :&lt;\npattern (:&lt;) :: Stream s =&gt; Token s -&gt; s -&gt; s\npattern b :&lt; bs &lt;- (uncons -&gt; Just (b, bs))\n  where b :&lt; bs = cons b bs\n\npattern Nil :: Stream s =&gt; s\npattern Nil &lt;- (uncons -&gt; Nothing)\n  where Nil = empty\n</code></pre>\n\n<p><code>uncons</code> signature: <code>uncons :: (Stream s) =&gt; s -&gt; Maybe (Token s, s)</code>.</p>\n\n<p>Suppose I also have function that uses these patterns like that:</p>\n\n<pre><code>foo (b:&lt;bs) = \u2026\nfoo Nil = \u2026\n</code></pre>\n\n<p>It's obvious in this case that pattern matches are exhaustive, and I would like to specify that.</p>\n\n<p>So I tried using a <a href=\"https://gitlab.haskell.org/ghc/ghc/wikis/pattern-synonyms/complete-sigs\" rel=\"noreferrer\">COMPLETE pragma</a> like that: <code>{-# COMPLETE Nil, (:&lt;) :: Stream #-}</code>.</p>\n\n<p>That didn't work, warning didn't go anywhere. Why didn't it? Is it possible to do what I want?</p>\n"}, {"tags": ["haskell", "monads", "applicative"], "comments": [{"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 1, "creation_date": 1571159109, "post_id": 58399453, "comment_id": 103144427, "body": "In <code>(Val n) &lt;*&gt; mx</code>, what&#39;s the type of <code>n</code>? (note the type of <code>&lt;*&gt;</code>)"}, {"owner": {"reputation": 133, "user_id": 1841521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93beddf0148c171459a11de399dd31db?s=128&d=identicon&r=PG&f=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/1841521/jordi"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1571159522, "post_id": 58399453, "comment_id": 103144605, "body": "data Expr a = Var a | Val Int | ...   It&#39;s an Int"}, {"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1571168263, "post_id": 58399453, "comment_id": 103148216, "body": "Ah sorry I misread I thought it was <code>Var</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": false, "score": 3, "last_activity_date": 1571159385, "creation_date": 1571159385, "answer_id": 58399626, "question_id": 58399453, "link": "https://stackoverflow.com/questions/58399453/how-to-make-instance-of-applicative-a-certain-data-type/58399626#58399626", "title": "How to make instance of Applicative a certain data type", "body": "<p>When you have defined <code>pure</code> and <code>(&gt;&gt;=)</code>, one possible definition of <code>(&lt;*&gt;)</code> is</p>\n\n<pre><code>(&lt;*&gt;) = Control.Monad.ap\n</code></pre>\n\n<p>where <code>ap</code> is defined in the standard library as</p>\n\n<pre><code>ap :: Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b\nap mf mx = do\n  f &lt;- mf\n  x &lt;- mx\n  pure (f x)\n</code></pre>\n\n<p>In fact any definition of <code>(&lt;*&gt;)</code> must be equivalent to that if there is a <code>Monad</code> instance.</p>\n"}, {"tags": [], "owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "is_accepted": true, "score": 5, "last_activity_date": 1571160553, "creation_date": 1571160553, "answer_id": 58399850, "question_id": 58399453, "link": "https://stackoverflow.com/questions/58399453/how-to-make-instance-of-applicative-a-certain-data-type/58399850#58399850", "title": "How to make instance of Applicative a certain data type", "body": "<p>As you correctly note, in the case:</p>\n\n<pre><code>(Val n) &lt;*&gt; mx = ???\n</code></pre>\n\n<p>you have:</p>\n\n<pre><code>Val n :: Expr (a -&gt; b)\nmx :: Expr a\n</code></pre>\n\n<p>and you need to produce an <code>Expr b</code>.  Do you recall the case:</p>\n\n<pre><code>fmap g (Val n) = ???\n</code></pre>\n\n<p>when you had:</p>\n\n<pre><code>g :: a -&gt; b\nVal n :: Expr a\n</code></pre>\n\n<p>and you needed to produce an <code>Expr b</code>?  You found a solution there.</p>\n\n<p>For the case:</p>\n\n<pre><code>(Add l r) &lt;*&gt; mx\n</code></pre>\n\n<p>you have:</p>\n\n<pre><code>l :: Expr (a -&gt; b)\nr :: Expr (a -&gt; b)\nmx :: Expr a\n</code></pre>\n\n<p>and you need to produce an <code>Expr b</code>.  If only you had some function that could take <code>l</code> and <code>mx</code> and create an <code>Expr b</code>.  Such a function, if it existed, would probably have signature:</p>\n\n<pre><code>someFunc :: Expr (a -&gt; b) -&gt; Expr a -&gt; Expr b\n</code></pre>\n\n<p>Of course, with <code>someFunc l mx</code> and <code>someFunc r mx</code>, both of type <code>Expr b</code>, it would be a shame to only use one.  If there was some way of <strong>constructing</strong> an <code>Expr b</code> from two <code>Expr b</code> parts, that would really be the bees' knees.</p>\n"}, {"tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": false, "score": 3, "last_activity_date": 1571160799, "creation_date": 1571160799, "answer_id": 58399898, "question_id": 58399453, "link": "https://stackoverflow.com/questions/58399453/how-to-make-instance-of-applicative-a-certain-data-type/58399898#58399898", "title": "How to make instance of Applicative a certain data type", "body": "<p>You've slightly mis-stated what types you have available in the <code>Val n</code> case. You don't have an <code>Expr a</code>, but rather an <code>Expr (a -&gt; b)</code>, and no <code>a</code> or <code>b</code> at all (nor even a function from <code>a -&gt; b</code>, because <code>Val</code> contains only an <code>Int</code>). In fact, this case is easy precisely <em>because</em> you have no useful values around: the only reasonable thing you could possibly do is produce an output using the constructor <code>Val</code>, because you have no way to fabricate a <code>b</code> from thin air. The type of <code>Val</code> can specialize to <code>Val :: Int -&gt; Expr b</code>, and happily, you have an <code>Int</code> lying around, so you can write:</p>\n\n<pre><code>(Val n) &lt;*&gt; mx = Val n\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 1841521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93beddf0148c171459a11de399dd31db?s=128&d=identicon&r=PG&f=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/1841521/jordi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 2, "accepted_answer_id": 58399850, "answer_count": 3, "score": 3, "last_activity_date": 1571160799, "creation_date": 1571158633, "question_id": 58399453, "link": "https://stackoverflow.com/questions/58399453/how-to-make-instance-of-applicative-a-certain-data-type", "title": "How to make instance of Applicative a certain data type", "body": "<p>I'm reading Graham Hutton book on Haskell, and don't no how to proceed in one part of an excercise. The excercise says as follows:</p>\n\n<p>Given the following type expressions</p>\n\n<pre><code>data Expr a = Var a | Val Int | Add (Expr a) (Expr a) deriving Show\n</code></pre>\n\n<p>     \nthat contain variables of some type a, show how to make this type into instances of Functor, Applicative and Monad classes. With the aid of an example, explain what the <code>&gt;&gt;=</code> operator for this type does.</p>\n\n<hr>\n\n<p>     </p>\n\n<p>I have had problems defining the <code>&lt;*&gt;</code> operator of Applicative. The type of <code>&lt;*&gt;</code> is:</p>\n\n<pre><code>(&lt;*&gt;) :: Expr (a -&gt; b) -&gt; Expr a -&gt; Expr b\n</code></pre>\n\n<p>I don't understand how <code>(Val n) &lt;*&gt; mx</code> might work, because theoretically I need to provide a <code>Expr b</code>, but all I have is a <code>Expr a</code> and no function to convert (<code>a -&gt; b</code>).</p>\n\n<p>I also don't understand what to do in the <code>(Add l r) &lt;*&gt; mx</code> case.</p>\n\n<hr>\n\n<p>This is my implementation.</p>\n\n<pre><code>instance Functor Expr where\n    --fmap :: (a -&gt; b) -&gt; Expr a -&gt; Expr b\n    fmap g (Var x) = Var (g x)\n    fmap g (Val n) = Val n\n    fmap g (Add l r) = Add (fmap g l) (fmap g r)\n\n\ninstance Applicative Expr where\n    --pure :: a -&gt; Expr a\n    pure = Var\n\n    -- &lt;*&gt; :: Expr (a -&gt; b) -&gt; Expr a -&gt; Expr b\n    (Var g) &lt;*&gt; mx = fmap g mx\n    --(Val n) &lt;*&gt; mx = ???\n    --(Add l r) &lt;*&gt; mx = ???\n\ninstance Monad Expr where\n    -- (&gt;&gt;=) :: Expr a -&gt; (a -&gt; Expr b) -&gt; Expr b\n    (Var x) &gt;&gt;= g = g x\n    (Val n) &gt;&gt;= g = Val n\n    (Add l r) &gt;&gt;= g = Add (l &gt;&gt;= g) (r &gt;&gt;= g)\n\n\nexpr = Add (Add (Var 'a') (Val 4)) (Var 'b')\n</code></pre>\n\n<p>Finally, I have a doubt with respect to the >>= in the monad. The idea of this operator is to do things like substituting variables? Like:</p>\n\n<pre><code>expr &gt;&gt;= (\\x -&gt; if x == 'a' then Val 6 else Var x) &gt;&gt;= (\\x -&gt; if x == 'b' then Val 7 else Var x)\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1571158628, "post_id": 58399414, "comment_id": 103144253, "body": "That&#39;s not really a sorting algorithm, as it assumes that you&#39;ll never read input smaller than the current top of the stack."}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1571158663, "post_id": 58399414, "comment_id": 103144273, "body": "That algorithm looks wrong. In particular, consider the input <code>[4,2,1,3,0]</code>. You&#39;ll end up outputting the 1 before the 0."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571158782, "post_id": 58399414, "comment_id": 103144317, "body": "(I believe there is a name for sequences that <i>can</i> be sorted using your algorithm; I don&#39;t recall what it is, though.)"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 3, "creation_date": 1571163311, "post_id": 58399414, "comment_id": 103146202, "body": "A shorter example of how this goes wrong is <code>[1,2,0]</code>. After pushing <code>1</code> to the stack, you immediately pop it to the output, thereby committing to <code>1</code> being the smallest element in the entire list. Then you see <code>0</code>... which is smaller. Whoops!"}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1571162930, "creation_date": 1571162930, "answer_id": 58400403, "question_id": 58399414, "link": "https://stackoverflow.com/questions/58399414/how-to-implement-linear-sort/58400403#58400403", "title": "How to implement linear sort?", "body": "<p>You can use the List data type, and do a classic non performance:</p>\n\n<pre><code>sort [] = []\nsort [x] = [x]\nsort (x:y:xs) = \n if x &lt; y \n then go $ sort xs ++ [x,y]\n else go $ sort xs ++ [y,x]\n where\n  go [] = []\n  go (x:y:xs) = \n   if x &lt; y \n   then  x : sort (y:xs)\n   else  y : sort (x:xs) \n</code></pre>\n\n<p>as an example:</p>\n\n<pre><code>sort [5,2,4,5,6,2,1,5,7,11,3]\n=&gt; [1,2,2,3,4,5,5,5,6,7,11]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1571174347, "last_edit_date": 1571174347, "creation_date": 1571173647, "answer_id": 58402654, "question_id": 58399414, "link": "https://stackoverflow.com/questions/58399414/how-to-implement-linear-sort/58402654#58402654", "title": "How to implement linear sort?", "body": "<p>a direct translation will be</p>\n\n<pre><code>f [] = []\nf xs = go xs [] []\n     where go [] ys os = (reverse ys) ++ os\n           go (x:xs) [] os = go xs [x] os\n           go (x:xs) (y:ys) os | x&lt;y       = go (pop (x:xs)) (x:y:ys)     os\n                               | otherwise = go (x:xs)       (pop (y:ys)) (y:os)  \n                               where pop []     = []\n                                     pop (x:xs) = xs\n</code></pre>\n\n<p>but it cannot be called a sorting algorithm though.</p>\n"}], "owner": {"reputation": 9, "user_id": 12221834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc3a6799c1c3cce6c857b7982479fb0?s=128&d=identicon&r=PG&f=1", "display_name": "suryakanigolla", "link": "https://stackoverflow.com/users/12221834/suryakanigolla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571214205, "creation_date": 1571158491, "last_edit_date": 1571214205, "question_id": 58399414, "link": "https://stackoverflow.com/questions/58399414/how-to-implement-linear-sort", "title": "How to implement linear sort?", "body": "<p>I'm trying to implement a sorting algorithm which works like this: For example, suppose the input is the list of integers <code>[4,2,1,3]</code>.  The algorithm performs the following actions:</p>\n\n<ol>\n<li><p>Read 4 from the input. Since the stack is empty, push 4 onto the\nstack. (Current stack = <code>[4]</code>)</p></li>\n<li><p>Read 2 from the input. Since 2 &lt;= 4, push 2 onto the stack.\n(Current stack = <code>[2,4]</code>)</p></li>\n<li><p>Read 1 from the input. Since 1 &lt;= 2, push 1 onto the stack.\n(Current stack = <code>[1,2,4]</code>)</p></li>\n<li><p>Read 3 from the input. Since 3 > 1, pop 1 to the output. (Current\nstack = <code>[2,4]</code>)</p></li>\n<li><p>Since 3 > 2, pop 2 to the output. (Current stack = <code>[4]</code>)</p></li>\n<li><p>Since 3 &lt;= 4, push 3 onto the stack. (Current stack = <code>[3,4]</code>)</p></li>\n<li><p>Since there are no more input values, pop 3 and 4 to the output.</p></li>\n</ol>\n\n<p>Input values have been popped in order <code>[1,2,3,4]</code></p>\n\n<p>I tried to implement two functions for pushing an element and popping an element. I'm not sure on how to implement a temporary list as in the above algorithm.</p>\n\n<pre><code>stackPush :: a -&gt; [a] -&gt; [a]\nstackPush x l = x:l\n\nstackPop :: [a] -&gt; [a]\nstackPop l = tail l\n</code></pre>\n\n<p>I'm not allowed to use a Stack data type.</p>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 2, "creation_date": 1571151132, "post_id": 58395307, "comment_id": 103140348, "body": "&quot;But runner cannot cache directory outside the project.&quot; Have you tried <code>stack --stack-root .&#47;.stack_now_caches_dependency_build_stuff_here</code>"}, {"owner": {"reputation": 8621, "user_id": 1848029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjAy.jpg?s=128&g=1", "display_name": "lehins", "link": "https://stackoverflow.com/users/1848029/lehins"}, "edited": false, "score": 1, "creation_date": 1571166164, "post_id": 58395307, "comment_id": 103147407, "body": "Take also a look at my answer here <a href=\"https://stackoverflow.com/a/58018322/1651941\">stackoverflow.com/a/58018322/1651941</a>"}], "owner": {"reputation": 258, "user_id": 2908113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/953274ad4d0cc6ddb7a90137684a5277?s=128&d=identicon&r=PG&f=1", "display_name": "titus", "link": "https://stackoverflow.com/users/2908113/titus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571144357, "creation_date": 1571144357, "question_id": 58395307, "link": "https://stackoverflow.com/questions/58395307/what-does-pantry-snapshots-solve", "title": "What does Pantry snapshots solve?", "body": "<p>I've been assigned a task to speed up a Haskell project build time.\nAs this is my first contact with building Haskell projects I had to spend couple of days reading, searching and trial and error builds.</p>\n\n<p>Switched from cabal to stack, now trying to figure out how to cache build dependencies using gitlab runner.</p>\n\n<p>I know that the deps are saved to <code>~/.stack</code> directory. But runner cannot cache directory outside the project.</p>\n\n<p>I can \"hack\" my way out of that but looking for more proper solution.</p>\n\n<p>In the Haskell docs I've found part where Pantry snapshots are mentioned. Are snapshots connected to dependency cache at all?</p>\n\n<p><a href=\"https://docs.haskellstack.org/en/stable/pantry/#snapshots\" rel=\"nofollow noreferrer\">https://docs.haskellstack.org/en/stable/pantry/#snapshots</a></p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "edited": false, "score": 3, "creation_date": 1571128084, "post_id": 58390249, "comment_id": 103127303, "body": "so what&#39;s the error you get?"}, {"owner": {"reputation": 1, "user_id": 12095590, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCEgkSrO5Nh_cD-UcpjhozIhxlQ_x8MXp2Q9UrUKg=k-s128", "display_name": "Rvincent16", "link": "https://stackoverflow.com/users/12095590/rvincent16"}, "reply_to_user": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "edited": false, "score": 0, "creation_date": 1571130929, "post_id": 58390249, "comment_id": 103128870, "body": "From my code, I am able to input the amount of how many has entered in the con, my problem is how can i get the results based on their emoticons, as it seems the characters on the mouth and eye arrays cant be read on my code, and only accepting integers."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1571131309, "post_id": 58390249, "comment_id": 103129048, "body": "Then reduce your question to the actually interesting part (<code>Emoticon -&gt; Int</code>), specify the exact behaviour, <i>explain</i> how you tried to achieve it, and where you got stuck."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12095590, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCEgkSrO5Nh_cD-UcpjhozIhxlQ_x8MXp2Q9UrUKg=k-s128", "display_name": "Rvincent16", "link": "https://stackoverflow.com/users/12095590/rvincent16"}, "edited": false, "score": 1, "creation_date": 1571146667, "post_id": 58392215, "comment_id": 103137595, "body": "Thank&#39;s Bro :) you&#39;ve got my point :)  Thakyou so much... God bless"}], "tags": [], "owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "is_accepted": true, "score": 0, "last_activity_date": 1571137748, "last_edit_date": 1571137748, "creation_date": 1571134258, "answer_id": 58392215, "question_id": 58390249, "link": "https://stackoverflow.com/questions/58390249/change-user-input-to-input-char-not-a-value/58392215#58392215", "title": "Change user input to input &quot;Char&quot; not a &quot;Value&quot;?", "body": "<p>From your example I'm guessing that you match each eye and mouth to a number, and a emoticon is the sum if those... but you haven't explained nothing of this in your post. Assuming so, this is a very naive way to write It</p>\n\n<pre><code>import Control.Monad (mapM)  \n\n-- Define the data you want to use\ndata Eye = Normal \n         | Glasses \n         | Wink \n         deriving(Show, Eq)\ndata Mouth = P \n           | Sad \n           | Bracket \n           | Happy \n           | O \n           deriving(Show, Eq)\ndata Face  = Face Eye Mouth deriving(Show, Eq)\n\n-- Define special readers and elemToInt\nreadEyes :: Char -&gt; Maybe Eye\nreadEyes c = case c of\n  ':' -&gt; Just Normal\n  '8' -&gt; Just Glasses\n  ';' -&gt; Just Wink\n  _   -&gt; Nothing\n\n-- This is equivalent to derive Enum class and apply fromEnum. Try to do it your self ;)\neyeToInt :: Eye -&gt; Int\neyeToInt Normal  = 1\neyeToInt Glasses = 2\neyeToInt Wink    = 3\n\nreadMouth ::  Char -&gt; Maybe Mouth\nreadMouth c = case c of\n  'P' -&gt; Just P\n  '(' -&gt; Just Sad\n  '[' -&gt; Just Bracket\n  ')' -&gt; Just Happy\n  'O' -&gt; Just O\n  _   -&gt; Nothing\n\nmouthToInt :: Mouth -&gt; Int\nmouthToInt P       = 0\nmouthToInt Sad     = 1\nmouthToInt Bracket = 2\nmouthToInt Happy   = 3\nmouthToInt O       = 4\n\nreadFace :: String -&gt; Maybe Face\nreadFace []    = Nothing\nreadFace [e,m] = do \n  eye   &lt;- readEyes e\n  mouth &lt;- readMouth m\n  return $ Face eye mouth\nreadFace _     = Nothing\n\nfaceToInt :: Face -&gt; Int\nfaceToInt (Face e m) = eyeToInt e + mouthToInt m\n\n-- The main loop is straight forward\nmain :: IO ()\nmain = do\n  putStrLn \"Enter the number of Concertgoers\"\n  number  &lt;- read &lt;$&gt; getLine -- Use safe reading better... I am using an online repl so no access to it\n  results &lt;- mapM getEmoticon [1..number]\n  putStrLn $ \"The results are: \" ++ show results\n    where getEmoticon n = do\n             putStrLn $ \"Enter the emoticon for concertgoer \" ++ show n\n             face &lt;- readFace &lt;$&gt; getLine\n             case face of \n               Nothing -&gt; do\n                 putStrLn \"That's not an emotion!!\"\n                 getEmoticon n\n               Just f  -&gt; return $ faceToInt f\n</code></pre>\n\n<p>I think It is what you expect but let me know</p>\n"}], "owner": {"reputation": 1, "user_id": 12095590, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCEgkSrO5Nh_cD-UcpjhozIhxlQ_x8MXp2Q9UrUKg=k-s128", "display_name": "Rvincent16", "link": "https://stackoverflow.com/users/12095590/rvincent16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58392215, "answer_count": 1, "score": -3, "last_activity_date": 1571137748, "creation_date": 1571127723, "last_edit_date": 1571131227, "question_id": 58390249, "link": "https://stackoverflow.com/questions/58390249/change-user-input-to-input-char-not-a-value", "title": "Change user input to input &quot;Char&quot; not a &quot;Value&quot;?", "body": "<p>This is my code</p>\n\n<pre><code>module Main where\n\nimport Control.Monad (mapM)  \nimport Text.Read (readMaybe)  \nimport System.IO (BufferMode(..), stdout, hSetBuffering)\n\nmouth = [('P',0),('(',1),('[',2),(')',3),('O',4)]  \neyes = [(':',1),('8',2),(';',3)]   \nfindKey :: (Eq k) =&gt; k -&gt; [(k,v)] -&gt; Maybe v  \nfindKey key = foldr (\\(k,v) acc -&gt; if key == k then Just v else acc) Nothing  \n\nquery :: Read a =&gt; String -&gt; IO a  \nquery prompt = do  \n putStr $ prompt ++ \": \"  \n val &lt;- readMaybe &lt;$&gt; getLine  \n  case val of  \n    Nothing -&gt; do  \n      putStrLn \"Sorry that's a wrong value - please reenter\"  \n      query prompt  \n    Just v -&gt; return v  \n\nngoers :: IO Int  \nngoers = query \"Enter the number of Concertgoers\"  \n\ncgoers :: Int -&gt; IO (Int, Double)  \ncgoers i = do  \n  c &lt;- query prompt  \n  return (fromIntegral i,c)\n  where prompt = \"Enter the emoticon for concertgoer \" ++ show (i+1)  \n\nconcertgoer :: IO [(Int, Double)]  \nconcertgoer = do  \n  n &lt;- ngoers  \n  mapM cgoers [0,1..n-1]  \n\npresentResult :: Double -&gt; IO ()  \npresentResult v = putStrLn $ \"The results are: \" ++ show v  \n\nmain :: IO ()  \nmain = do  \n  p &lt;- concertgoer  \n  presentResult $ 0\n</code></pre>\n\n<p>I want this output</p>\n\n<pre><code>Enter the number of Concertgoers: 4  \nEnter the emoticon for concertgoer 1: :(  \nEnter the emoticon for concertgoer 2: :)  \nEnter the emoticon for concertgoer 3: ;P  \nEnter the emoticon for concertgoer 4: ;o  \nThe results are: 2 4 3 7  \n</code></pre>\n"}, {"tags": ["haskell", "syntax", "parentheses"], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 8, "last_activity_date": 1571125971, "last_edit_date": 1571125971, "creation_date": 1571124060, "answer_id": 58389238, "question_id": 58389204, "link": "https://stackoverflow.com/questions/58389204/haskell-missing-parentheses-compiles-but-enters-infinite-loop/58389238#58389238", "title": "Haskell missing parentheses compiles but enters infinite loop", "body": "<pre><code>fib_n_minus_2 = fib n-2\n</code></pre>\n\n<p>means</p>\n\n<pre><code>fib_n_minus_2 = (fib n)-2\n</code></pre>\n\n<p>and not</p>\n\n<pre><code>fib_n_minus_2 = fib (n-2)\n</code></pre>\n\n<p>Note that <code>(fib n)-2</code> is a perfectly valid expression.</p>\n\n<p>This is not parsed as <code>(fib n) -2 fib_n_minus1 ...</code> since <code>fib_n_minus1 ...</code> starts on the next line and is indented the exact same amount as the previous one, so it's the next <em>binding</em> for the <code>let</code> construct. </p>\n\n<p>Indeed, you can pretend that, before real parsing starts, indentation is used to insert explicit braces around the bindings, and semicolons between them, as follows:</p>\n\n<pre><code> let {\n    fib_n_minus_2 = fib n-2 ;\n    -- fib_n_minus_2 = fib (n-2)\n    fib_n_minus_1 = fib (n-1)\n    }\n  in\n    fib_n_minus_2+\n    fib_n_minus_1\n</code></pre>\n\n<p>In the <code>in</code> section of <code>let</code> there can be only one <em>expression</em>, so the indentation rule does not apply, and those two lines are parsed as one expression, <code>fib_n_minus_2 + fib_n_minus_1</code>.</p>\n\n<p>In conclusion, your code is calling itself without decreasing the argument <code>n</code>, thus causing the infinite recursion.</p>\n"}], "owner": {"reputation": 3212, "user_id": 3357352, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nfb7n.jpg?s=128&g=1", "display_name": "OrenIshShalom", "link": "https://stackoverflow.com/users/3357352/orenishshalom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58389238, "answer_count": 1, "score": 1, "last_activity_date": 1571125971, "creation_date": 1571123909, "question_id": 58389204, "link": "https://stackoverflow.com/questions/58389204/haskell-missing-parentheses-compiles-but-enters-infinite-loop", "title": "Haskell missing parentheses compiles but enters infinite loop", "body": "<p>I have a case where a Haskell missing parentheses compiles fine but enters an infinite loop. Here is my code with the working version commented out:</p>\n\n<pre><code>$ cat main.hs\nfib :: Int -&gt; Int\nfib 0 = 1\nfib 1 = 1\nfib n =\n  let\n    fib_n_minus_2 = fib n-2\n    -- fib_n_minus_2 = fib (n-2)\n    fib_n_minus_1 = fib (n-1)\n  in\n    fib_n_minus_2+\n    fib_n_minus_1\n\nmain :: IO ()\nmain = putStrLn $ show $ fib 7\n</code></pre>\n\n<p>When I compile it everything goes fine, but when I run the resulting program it gets stuck. Why is that? I imagine the compiler parses <code>fib n</code>,\nthen goes on to see <code>-2 fib_n_minus_1</code> where it should stop and issue an error, right?</p>\n"}, {"tags": ["list", "haskell", "combinations", "combinatorics"], "comments": [{"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 1, "creation_date": 1571115498, "post_id": 58387311, "comment_id": 103121998, "body": "In your example the numbers are constant, so you could do something like this: <code>[ [(1,x),(2,y),(3,z)] | x &lt;- [True, False], y &lt;- [True, False], z &lt;- [True, False] ]</code>"}, {"owner": {"reputation": 3991, "user_id": 6378530, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5325e39f6f9f2d12029b11d4f8e56a69?s=128&d=identicon&r=PG&f=1", "display_name": "doctopus", "link": "https://stackoverflow.com/users/6378530/doctopus"}, "reply_to_user": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 0, "creation_date": 1571117090, "post_id": 58387311, "comment_id": 103122392, "body": "The numbers are variable in this case. Only thing that&#39;s constant is <code>[True, False]</code>"}, {"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 0, "creation_date": 1571117194, "post_id": 58387311, "comment_id": 103122431, "body": "I think I said that wrong, what I mean is in the example it&#39;s always <code>1,2,3</code> in that order."}], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 0, "creation_date": 1571119893, "post_id": 58388114, "comment_id": 103123330, "body": "Oh, <code>sequence</code> was what I wanted. I couldn&#39;t figure out how to do that. Nice!"}], "tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 2, "last_activity_date": 1571124147, "last_edit_date": 1571124147, "creation_date": 1571119285, "answer_id": 58388114, "question_id": 58387311, "link": "https://stackoverflow.com/questions/58387311/how-to-create-all-possible-combinations-of-these-two-lists/58388114#58388114", "title": "How to create all possible combinations of these two lists?", "body": "<p>Your desired output can be produced by defining</p>\n\n<pre><code>foo :: [a] -&gt; [b] -&gt; [[(a, b)]]\nfoo nums bools =\n    map (zip nums) . sequence $ replicate (length nums) bools\n  =\n    let n = length nums \n    in \n        [ zip nums bs | bs &lt;- sequence $ replicate n bools]\n</code></pre>\n\n<p>and calling</p>\n\n<pre><code>foo [1,2,3] [False, True]\n</code></pre>\n\n<p>That call is equivalent to</p>\n\n<pre><code>    let nums = [1,2,3]\n        bools = [False, True]\n        n = 3\n    in \n        [ zip nums bs | bs &lt;- sequence $ replicate n bools]\n      =\n        [ zip [1,2,3] bs | bs &lt;- sequence $ replicate 3 [False, True]]\n      =\n        [ zip [1,2,3] (b:bs) | b  &lt;- [False, True]\n                             , bs &lt;- sequence $ replicate 2 [False, True]]\n      =\n        [ zip [1,2,3] (b:c:bs) | b  &lt;- [False, True]\n                               , c  &lt;- [False, True]\n                               , bs &lt;- sequence $ replicate 1 [False, True]]\n      =\n        [ zip [1,2,3] (b:c:d:bs) | b  &lt;- [False, True]\n                                 , c  &lt;- [False, True]\n                                 , d  &lt;- [False, True]\n                                 , bs &lt;- sequence $ replicate 0 [False, True] ]\n      =\n        [ zip [1,2,3] (b:c:d:bs) | b  &lt;- [False, True]\n                                 , c  &lt;- [False, True]\n                                 , d  &lt;- [False, True]\n                                 , bs &lt;- sequence [] ]\n      =\n        [ zip [1,2,3] (b:c:d:bs) | b  &lt;- [False, True]\n                                 , c  &lt;- [False, True]\n                                 , d  &lt;- [False, True]\n                                 , bs &lt;- [[]] ]\n      =\n        [ zip [1,2,3] (b:c:d:[]) | b  &lt;- [False, True]\n                                 , c  &lt;- [False, True]\n                                 , d  &lt;- [False, True] ]\n</code></pre>\n\n<p>i.e.</p>\n\n<pre><code>        [ zip [1,2,3] [b,c,d]    | b  &lt;- [False, True]\n                                 , c  &lt;- [False, True]\n                                 , d  &lt;- [False, True] ]\n</code></pre>\n\n<p>and if evaluate this last expression, we also get the same result.</p>\n\n<p>Filling up the three spaces with each possible combination of the two available  values is like having all possible functions from 3 spaces to 2 values, whatever those spaces and values are. </p>\n\n<p>Mathematicians write this function as <i>2<sup>3</sup></i>, and indeed, we get <code>2^3 = 8</code> outputs.</p>\n\n<p><em>edit:</em> the <code>sequence ... replicate</code> combo is actually just reimplementing another built-in, <code>replicateM</code>:</p>\n\n<pre><code>foo ns bs = map (zip ns) (replicateM (length ns) bs)\n</code></pre>\n\n<p>because <code>replicateM n a</code> is just like <code>sequence (replicate n a)</code>, but without actually building the intermediate list.</p>\n\n<p>For the <a href=\"/questions/tagged/pointfree\" class=\"post-tag\" title=\"show questions tagged &#39;pointfree&#39;\" rel=\"tag\">pointfree</a> aficionados, we can thus have</p>\n\n<pre><code>foo ns    =  map (zip ns) . replicateM (length ns)\n          =  (.) ((map . zip) ns) ((replicateM . length) ns)\n          =  ((.) . map . zip &lt;*&gt; replicateM . length)   ns\n</code></pre>\n\n<p>i.e.</p>\n\n<pre><code>foo       =  (.) . map . zip &lt;*&gt; replicateM . length\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571120069, "post_id": 58388127, "comment_id": 103123397, "body": "<i>solving the more general problem and then getting your smaller problem solved for free</i> principle, huh. also, if we inline the dropWhile and the takeWhile, we end up with that zip list comprehension equivalent of the sequence. :) but you probably wanted the general code, for arbitrary <code>n</code>..."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571125732, "post_id": 58388127, "comment_id": 103126110, "body": "@WillNess It&#39;s a good way to answer homework questions, I think: useful and true, but you still have to think in order to reduce it back to the original problem; if you just copy/paste it the instructor will have a reasonable idea you didn&#39;t do it yourself."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1571126137, "post_id": 58388127, "comment_id": 103126317, "body": "@amalloy there was a discussion about homeworks few years back on meta, when the tag was &quot;burninated&quot;, and the verdict as far as I understood it was, <i>&quot;just answer it, regardless&quot;</i>. I don&#39;t know what the current consensus is."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1571129167, "post_id": 58388127, "comment_id": 103127903, "body": "Yes, well-asked homework questions should be answered. But I don&#39;t think it&#39;s against the spirit of the thing to answer them in a way that leaves fingerprints."}], "tags": [], "owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "is_accepted": false, "score": 2, "last_activity_date": 1571119330, "creation_date": 1571119330, "answer_id": 58388127, "question_id": 58387311, "link": "https://stackoverflow.com/questions/58387311/how-to-create-all-possible-combinations-of-these-two-lists/58388127#58388127", "title": "How to create all possible combinations of these two lists?", "body": "<p>This can't be the most straightforward or most efficient answer. </p>\n\n<p>But using the technique from <a href=\"https://stackoverflow.com/questions/9542313/how-to-generate-a-list-of-all-possible-strings-from-shortest-to-longest\">How to generate a list of all possible strings from shortest to longest</a> we can generate a list of all possible Boolean sequences. We take the ones that are the same length as the second list and then zip them with that list. </p>\n\n<pre><code>allBoolPermutations :: Int -&gt; [[Bool]]\nallBoolPermutations n = takeWhile (\\l -&gt; length l == n) \n                      $ dropWhile (\\l -&gt; length l &lt; n) \n                      $ allBools\n  where\n    allBools = [ c : s | s &lt;- []:allBools, c &lt;- [True, False]] \n\n\nzipWithBoolPermutations :: [a] -&gt; [[(a, Bool)]]\nzipWithBoolPermutations someList = map (zip someList) \n                                       (allBoolPermutations (length someList))\n</code></pre>\n\n<p>Then <code>zipWithBoolPermutations [1,2,3]</code> should give you what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1571129382, "post_id": 58388598, "comment_id": 103128021, "body": "No matter how smart you are, you will fail to correctly implement this on infinite lists.  Thanks, Cantor!"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1571194350, "post_id": 58388598, "comment_id": 103154855, "body": "@luqui On the other hand, it should be possible to do something for infinite lists that has the property that 1. first I choose the (infinite) result list 2. then you choose your favorite finite prefix length 3. then I can show that all the labelings for prefixes of that length appear at finite indices in my result list. That should be good enough for most computations -- at least the ones you expect to finish eventually!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1571122110, "last_edit_date": 1571122110, "creation_date": 1571121526, "answer_id": 58388598, "question_id": 58387311, "link": "https://stackoverflow.com/questions/58387311/how-to-create-all-possible-combinations-of-these-two-lists/58388598#58388598", "title": "How to create all possible combinations of these two lists?", "body": "<p>We can avoid using <code>length</code>, which might be unsafe, since the list can have infinite length. By using recursion or a foldr pattern, we avoid that:</p>\n\n<pre><code>{-# LANGUAGE TupleSections #-}\n\nallComb :: [b] -&gt; [a] -&gt; [[(a,b)]]\nallComb vs = go\n    where go [] = [[]]\n          go (x:xs) = (:) &lt;$&gt; map (x,) vs &lt;*&gt; go xs</code></pre>\n\n<p>or with a foldr-pattern in a one-liner:</p>\n\n<pre><code>allComb :: [b] -&gt; [a] -&gt; [[(a,b)]]\nallComb vs = foldr (\\x -&gt; ((:) &lt;$&gt; map (x,) vs &lt;*&gt;)) [[]]</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude&gt; allComb [False, True] [1,2,3]\n[[(1,False),(2,False),(3,False)],[(1,False),(2,False),(3,True)],[(1,False),(2,True),(3,False)],[(1,False),(2,True),(3,True)],[(1,True),(2,False),(3,False)],[(1,True),(2,False),(3,True)],[(1,True),(2,True),(3,False)],[(1,True),(2,True),(3,True)]]\n</code></pre>\n\n<p>The above approach will not work on infinite lists, although we can, given the first list contains at least one element, slightly alter the code, to generate the first element of the result: a list that zips all the elements in the second list with that item. I leave that as an exercise.</p>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1571173160, "post_id": 58399223, "comment_id": 103150092, "body": "<code>sequence [map (x ,) [False, True] | x &lt;- [1,2,3]]</code>, then. :) seems to be it. nice!"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1571208765, "post_id": 58399223, "comment_id": 103158742, "body": "it actually goes to the core of what (List) Monad is, with <code>liftA2 (,) xs ys = join [fmap (x ,) ys | x &lt;- xs]</code> (and <code>xs &lt;|&gt; ys = join [xs, ys]</code>)."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1571157687, "creation_date": 1571157687, "answer_id": 58399223, "question_id": 58387311, "link": "https://stackoverflow.com/questions/58387311/how-to-create-all-possible-combinations-of-these-two-lists/58399223#58399223", "title": "How to create all possible combinations of these two lists?", "body": "<p>Nice and short:</p>\n\n<pre><code>traverse ((&lt;$&gt; [True, False]) . (,)) [1,2,3]\n</code></pre>\n\n<p>Or less pointfree, but perhaps more understandable:</p>\n\n<pre><code>{-# LANGUAGE TupleSections #-}\n\ntraverse (\\x -&gt; (x,) &lt;$&gt; [True, False]) [1,2,3]\n</code></pre>\n\n<p>The inner function (<code>(&lt;$&gt; [True, False]) . (,)</code> or <code>\\x -&gt; (x,) &lt;$&gt; [True, False]</code>) takes each element such as <code>1</code> and turns it into <code>[(1,True),(1,False)]</code>. If you think of <code>traverse f</code> as being <code>sequence . fmap f</code>, then the <code>fmap f</code> part means do that function to each thing in the list (yielding <code>[[(1,True),(1,False)],[(2,True),(2,False)],[(3,True),(3,False)]]</code>), and the <code>sequence</code> part means combine them with the List applicative (which models non-determinism) to create all possible combinations (yielding <code>[[(1,True),(2,True),(3,True)],[(1,True),(2,True),(3,False)],[(1,True),(2,False),(3,True)],[(1,True),(2,False),(3,False)],[(1,False),(2,True),(3,True)],[(1,False),(2,True),(3,False)],[(1,False),(2,False),(3,True)],[(1,False),(2,False),(3,False)]]</code>).</p>\n"}], "owner": {"reputation": 3991, "user_id": 6378530, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5325e39f6f9f2d12029b11d4f8e56a69?s=128&d=identicon&r=PG&f=1", "display_name": "doctopus", "link": "https://stackoverflow.com/users/6378530/doctopus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 58388598, "answer_count": 4, "score": -3, "last_activity_date": 1571157687, "creation_date": 1571114046, "last_edit_date": 1571126290, "question_id": 58387311, "link": "https://stackoverflow.com/questions/58387311/how-to-create-all-possible-combinations-of-these-two-lists", "title": "How to create all possible combinations of these two lists?", "body": "<p>I'd like to take from these two lists to create a list of all combinations, where each combination is also a list.</p>\n\n<p>E.g.</p>\n\n<p>Given two lists: <code>[1,2,3]</code> and <code>[True, False]</code></p>\n\n<p>Combinations:</p>\n\n<pre><code>[(1, False), (2, False), (3, False)]\n[(1, False), (2, False), (3, True )]\n[(1, False), (2, True ), (3, False)]\n[(1, True ), (2, False), (3, False)]\n[(1, False), (2, True ), (3, True )]\n[(1, True ), (2, False), (3, True )]\n[(1, True ), (2, True ), (3, False)]\n[(1, True ), (2, True ), (3, True )]\n</code></pre>\n\n<p>There should be <code>2^n</code> combinations where <code>n</code> is the number of numbers.</p>\n\n<p>EDIT:</p>\n\n<p>Tried to do the following:</p>\n\n<pre><code>[(n, b) | n &lt;- [1,2,3], b &lt;- [True, False]]\n(,) &lt;$&gt; [1,2,3] &lt;*&gt; [True, False]\n</code></pre>\n"}, {"tags": ["parsing", "if-statement", "haskell", "haskell-platform"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1571109613, "post_id": 58386641, "comment_id": 103120797, "body": "Like the error says, you&#39;re missing an <code>else</code>. It should be before <code>if (move == 1)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 700, "user_id": 5499914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fz53h.png?s=128&g=1", "display_name": "Khuldraeseth na&#39;Barya", "link": "https://stackoverflow.com/users/5499914/khuldraeseth-nabarya"}, "is_accepted": false, "score": 1, "last_activity_date": 1571109600, "creation_date": 1571109600, "answer_id": 58386760, "question_id": 58386641, "link": "https://stackoverflow.com/questions/58386641/parse-error-in-if-statement-missing-required-else-clause-in-haskell-code/58386760#58386760", "title": "parse error in if statement: missing required else clause in Haskell code", "body": "<p>It's this bit:</p>\n\n<pre><code>if (move == 0) then\n do \n   let e = Enemy (getEDescription e) ((getEHealth e) - (getPAttack p)) (getEAttack e)\n   putStrLn (\"you dealt \" + (getPAttack p) + \" damage to your foe\")\n   enemyMove p e\n-- No else here before indentation is reduced\nif (move == 1) then\n</code></pre>\n\n<p>There are a couple other things I notice here. Check the type of <code>move</code>; does <code>move == 0</code> make sense? Instead of horrendously nested <code>if/then/else</code>, Haskell provides a nice <code>switch</code>-like construct, detailed at the bottom of <a href=\"http://learnyouahaskell.com/syntax-in-functions\" rel=\"nofollow noreferrer\">this Learn You a Haskell page</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 0, "creation_date": 1571110470, "post_id": 58386775, "comment_id": 103120973, "body": "It probably doesn&#39;t keep the original intent, now that I actually read it I see that move can&#39;t equal &quot;0&quot; and &quot;1&quot;."}, {"owner": {"reputation": 3, "user_id": 12217943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TSd8PFlZRdw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNpzbEwZfPpFR5A1yX_U7m2KeV2w/photo.jpg?sz=128", "display_name": "user12217943", "link": "https://stackoverflow.com/users/12217943/user12217943"}, "edited": false, "score": 0, "creation_date": 1571111583, "post_id": 58386775, "comment_id": 103121212, "body": "Thanks so much for your help!"}], "tags": [], "owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "is_accepted": false, "score": 0, "last_activity_date": 1571109690, "creation_date": 1571109690, "answer_id": 58386775, "question_id": 58386641, "link": "https://stackoverflow.com/questions/58386641/parse-error-in-if-statement-missing-required-else-clause-in-haskell-code/58386775#58386775", "title": "parse error in if statement: missing required else clause in Haskell code", "body": "<p>I shifted the innermost <code>if</code> statement forward, and it seems to compile. I don't know if this keeps the original intent of the program. </p>\n\n<p>Also, <code>getLine</code> returns a string, but you are comparing the output to an <code>Int</code>. And <code>++</code> is string concatenation, not <code>+</code>. </p>\n\n<p>I hope this helps. Good luck! </p>\n\n<pre><code>playerMove p e =\n if ((getPHealth p) &gt; 0) then\n  do\n     putStrLn (showOpts2)\n     move &lt;- getLine\n     if (move == \"0\") then\n      do \n        let e = Enemy (getEDescription e) ((getEHealth e) - (getPAttack p)) (getEAttack e)\n        putStrLn (\"you dealt \" ++ (getPAttack p) ++ \" damage to your foe\")\n        enemyMove p e\n        if (move == \"1\") then\n          do \n            let p = Player (getPHealth) (getPAttack) (getPScore) True\n            return p\n        else return p\n     else return p\n else return p\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "is_accepted": false, "score": 0, "last_activity_date": 1571158655, "creation_date": 1571158655, "answer_id": 58399458, "question_id": 58386641, "link": "https://stackoverflow.com/questions/58386641/parse-error-in-if-statement-missing-required-else-clause-in-haskell-code/58399458#58399458", "title": "parse error in if statement: missing required else clause in Haskell code", "body": "<h2>Using a \"case of\" construct instead of an \"if then else\" one:</h2>\n\n<p>As mentioned by Khuldraeseth na'Barya, you could use a <code>case of</code> construct. This would allow the extra case of move being neither 0 nor 1 to fit nicely.</p>\n\n<p>It is a bit difficult to <em>fill in the blanks</em> as we haven't seen your types, but this code compiles, under reasonable assumptions for the object types:</p>\n\n<pre><code>playerMove :: Move -&gt; Move -&gt; IO Move\nplayerMove p e =\n  if ((getPHealth p) &gt; 0) then\n    do \n      putStrLn (showOpts2)\n      moveStr &lt;- getLine\n      let move = (read moveStr)::Integer\n      case move of\n        0 -&gt; do \n               let e = Enemy (getEDescription e) ((getEHealth e) - (getPAttack p)) (getEAttack e)\n               putStrLn $ (\"you dealt \" ++ (show (getPAttack p)) ++ \" damage to your foe\")\n               enemyMove p e\n        1 -&gt; do\n               let p = Player (getPHealth) (getPAttack) (getPScore) True\n               return p\n        _ -&gt; do\n               return p -- what if move is neither 0 nor 1 ??\n  else\n    return p\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12217943, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TSd8PFlZRdw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdNpzbEwZfPpFR5A1yX_U7m2KeV2w/photo.jpg?sz=128", "display_name": "user12217943", "link": "https://stackoverflow.com/users/12217943/user12217943"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1571158655, "creation_date": 1571108501, "question_id": 58386641, "link": "https://stackoverflow.com/questions/58386641/parse-error-in-if-statement-missing-required-else-clause-in-haskell-code", "title": "parse error in if statement: missing required else clause in Haskell code", "body": "<p>I am receiving \"parse error in if statement: missing required else clause\" on line 202. I believe I am using the correct if-then-else syntax for haskell. But let me know what's wrong. Thanks</p>\n\n<p>I've tried shifting the various if statements around but to no avail</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>playerMove p e =\n if ((getPHealth p) &gt; 0) then\n  do \n     putStrLn (showOpts2)\n     move &lt;- getLine\n     if (move == 0) then\n      do \n        let e = Enemy (getEDescription e) ((getEHealth e) - (getPAttack p)) (getEAttack e)\n        putStrLn (\"you dealt \" + (getPAttack p) + \" damage to your foe\")\n        enemyMove p e\n     if (move == 1) then\n      do \n        let p = Player (getPHealth) (getPAttack) (getPScore) True\n        return p\n        else return p\n     else return p\n else return p\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1571096695, "post_id": 58385129, "comment_id": 103118448, "body": "I don&#39;t know readp well enough to answer this question, but you may be happy to learn that instead of <code>(\\x -&gt; y) &lt;$&gt; z</code>, you can simply write <code>y &lt;$ z</code>"}, {"owner": {"reputation": 129, "user_id": 11940374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sHjkCuSC4Ig/AAAAAAAAAAI/AAAAAAAAABE/jyw9QYcSD2Y/photo.jpg?sz=128", "display_name": "Agent 008", "link": "https://stackoverflow.com/users/11940374/agent-008"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1571097643, "post_id": 58385129, "comment_id": 103118648, "body": "Oh, that&#39;s nice. Is y the same thing as (\\x -&gt; y) internally? I thought their types are different."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1571097766, "post_id": 58385129, "comment_id": 103118677, "body": "No, the difference is that <code>&lt;$</code> expects a value, where <code>&lt;$&gt;</code> expects a function."}, {"owner": {"reputation": 129, "user_id": 11940374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sHjkCuSC4Ig/AAAAAAAAAAI/AAAAAAAAABE/jyw9QYcSD2Y/photo.jpg?sz=128", "display_name": "Agent 008", "link": "https://stackoverflow.com/users/11940374/agent-008"}, "reply_to_user": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 0, "creation_date": 1571098555, "post_id": 58385129, "comment_id": 103118806, "body": "@FyodorSoikin sorry I accidentally changed the names in the post, they are actually capitalized"}, {"owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "edited": false, "score": 1, "creation_date": 1571105672, "post_id": 58385129, "comment_id": 103119960, "body": "In  the example where you parse <code>&quot;MMMMNNNXYZPPPPP&quot;</code>, how does the parser determine that <code>&quot;MMMM&quot;</code> and <code>&quot;NNN&quot;</code> should be split when there&#39;s no divider between them?"}, {"owner": {"reputation": 129, "user_id": 11940374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sHjkCuSC4Ig/AAAAAAAAAAI/AAAAAAAAABE/jyw9QYcSD2Y/photo.jpg?sz=128", "display_name": "Agent 008", "link": "https://stackoverflow.com/users/11940374/agent-008"}, "reply_to_user": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "edited": false, "score": 0, "creation_date": 1571109535, "post_id": 58385129, "comment_id": 103120786, "body": "@K.A.Buhr hmm, they shouldn&#39;t be split. That&#39;s probably part of the problem - it is hard to standardize the type of the output"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 11940374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sHjkCuSC4Ig/AAAAAAAAAAI/AAAAAAAAABE/jyw9QYcSD2Y/photo.jpg?sz=128", "display_name": "Agent 008", "link": "https://stackoverflow.com/users/11940374/agent-008"}, "edited": false, "score": 0, "creation_date": 1571167954, "post_id": 58398438, "comment_id": 103148109, "body": "Wow, thank you for this very well-explained response! What is the <code>&lt;*</code> operator (which you used in <code>parseResult</code>)? Do you have any tips for understanding applicative parsers? I find it much easier to just deal with them as functors and monads."}, {"owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "reply_to_user": {"reputation": 129, "user_id": 11940374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sHjkCuSC4Ig/AAAAAAAAAAI/AAAAAAAAABE/jyw9QYcSD2Y/photo.jpg?sz=128", "display_name": "Agent 008", "link": "https://stackoverflow.com/users/11940374/agent-008"}, "edited": false, "score": 1, "creation_date": 1571241735, "post_id": 58398438, "comment_id": 103177570, "body": "I added a note about applicative parsers.  Once you get used to them, they&#39;re often easier to write (and read/understand) than their equivalent monadic forms."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1571242646, "post_id": 58398438, "comment_id": 103177992, "body": "Why include the divider in the result when you can just use <code>&lt;*</code> to get rid of it?"}, {"owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "edited": false, "score": 0, "creation_date": 1571251402, "post_id": 58398438, "comment_id": 103181914, "body": "I did mention in the answer: &quot;Admittedly, including Divider1 in the first two constructors is redundant, since there&#39;s only one possible Divider1, but programs are for humans to read, too, and keeping Divider1 explicit improves readability.&quot;  Obviously, there&#39;s room for disagreement on this point."}], "tags": [], "owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "is_accepted": true, "score": 1, "last_activity_date": 1571241663, "last_edit_date": 1571241663, "creation_date": 1571154433, "answer_id": 58398438, "question_id": 58385129, "link": "https://stackoverflow.com/questions/58385129/parser-combinators-readp-return-entire-list-if-it-fails-otherwise-return-on/58398438#58398438", "title": "Parser Combinators (ReadP) - return entire list if it fails, otherwise return only the passing one", "body": "<p><em>Updated:</em> See note on applicative parsers below.</p>\n\n<p>Here's what's going wrong with your current approach. As you undoubtedly know, the parsers in <code>Text.ParserCombinators.ReadP</code> generate all possible valid parses of all possible prefixes of the string.  If you write a parser:</p>\n\n<pre><code>letterAndOther = do\n  letters &lt;- many (satisfy isLetter)\n  others &lt;- many get\n  return (letters, others)\n</code></pre>\n\n<p>which grabs an initial string of letters followed by the \"rest\" of the string and run it on a simple test string, you'll usually get way more than you bargained for:</p>\n\n<pre><code>&gt; readP_to_S letterAndOther \"abc\"\n[((\"\",\"\"),\"abc\"),((\"\",\"a\"),\"bc\"),((\"a\",\"\"),\"bc\"),((\"\",\"ab\"),\"c\"),\n((\"a\",\"b\"),\"c\"),((\"ab\",\"\"),\"c\"),((\"\",\"abc\"),\"\"),((\"a\",\"bc\"),\"\"),\n((\"ab\",\"c\"),\"\"),((\"abc\",\"\"),\"\")]\n</code></pre>\n\n<p>In other words, in a do-block, each monadic action will typically generate a tree of possible parses.  In your current code, the very first line of the do-block:</p>\n\n<pre><code>beforeAbc &lt;- gather parseEverything\n</code></pre>\n\n<p>introduces a whole tree of parse branches, one branch for each possible initial prefix.  These branches only get pruned if a later line of the do-block introduces a parse that fails.  But, every line of your do-block represents a parser that always succeeds.  For example, this always succeeds:</p>\n\n<pre><code>parseAbc &lt;- (Just &lt;$&gt; parseAbc) &lt;++ return Nothing\n</code></pre>\n\n<p>because even if the first divider isn't found, the right-hand side parser <code>return Nothing</code> will always succeed.</p>\n\n<p>I would suggest the following approach. First, as we discovered in the comments, the first thing you want to do is figure out what your parser should return.  Instead of trying to shoehorn the result into a weird tuple, it's a good idea to leverage Haskell's best feature, it's algebraic data types.  Define a return type for your parse:</p>\n\n<pre><code>data Result\n  = TwoDividers   String Divider1 String Divider2 String\n  | FirstDivider  String Divider1 String\n  | SecondDivider String Divider2 String\n  | NoDividers    String\n</code></pre>\n\n<p>This is unambiguous and covers all possibilities.  Admittedly, including <code>Divider1</code> in the first two constructors is redundant, since there's only one possible <code>Divider1</code>, but programs are for humans to read, too, and keeping <code>Divider1</code> explicit improves readability.</p>\n\n<p>Now, let's define parsers for the first and second dividers:</p>\n\n<pre><code>divider1 = Abc &lt;$ string \"ABC\"\ndivider2 = (Def &lt;$ string \"DEF\") +++ (Xyz &lt;$ string \"XYZ\")\n</code></pre>\n\n<p>Note that I've chosen to define a single <code>divider2</code> instead of separate parsers for <code>Def</code> and <code>Xyz</code>. Since, in your grammar, it's always the case that \"DEF\" can appear anywhere \"XYZ\" can and vice versa, it makes sense to combine them into one parser.</p>\n\n<p>We'll also want a parser for arbitrary strings (basically your <code>parseEverything</code>):</p>\n\n<pre><code>anything = many $ satisfy isLetter -- valid characters\n</code></pre>\n\n<p>Now, let's write a parser for the full string.  A key insight here is that we have four alternatives (i.e., the four constructors for our <code>Result</code> type).  It's true that they share some structure, but a first crack at a parser can just treat them as independent alternatives.  We'll use the <code>&lt;++</code> operator to choose the best match:</p>\n\n<pre><code>result =\n      (TwoDividers &lt;$&gt; anything &lt;*&gt; divider1 &lt;*&gt; anything &lt;*&gt; divider2 &lt;*&gt; anything)\n  &lt;++ (FirstDivider &lt;$&gt; anything &lt;*&gt; divider1 &lt;*&gt; anything)\n  &lt;++ (SecondDivider &lt;$&gt; anything &lt;*&gt; divider2 &lt;*&gt; anything)\n  &lt;++ (NoDividers &lt;$&gt; anything)\n</code></pre>\n\n<p>A quick test of this will show we've forgotten something:</p>\n\n<pre><code>&gt; readP_to_S result \"MMMMABCNNNXYZPPPPP\"\n[(TwoDividers \"MMMM\" Abc \"NNN\" Xyz \"\",\"PPPPP\"),...]\n</code></pre>\n\n<p>By default, the parser combinators will try every possible prefix of the input string, leaving more for later parsers.  So, we should wrap this up in a final parser function that checks for the end-of-string:</p>\n\n<pre><code>parseResult = readP_to_S (result &lt;* eof)\n</code></pre>\n\n<p>and with the tests:</p>\n\n<pre><code>main = mapM_ (print . parseResult)\n  [ \"MMMMABCNNNXYZPPPPP\"\n  , \"MMMMABCNNNDEFPPPPP\"\n  , \"MMMMNNNXYZPPPPP\"\n  , \"MMMMABCNNNPPPPP\"\n  ]\n</code></pre>\n\n<p>we get the expected unique parsed output:</p>\n\n<pre><code>[(TwoDividers \"MMMM\" Abc \"NNN\" Xyz \"PPPPP\",\"\")]\n[(TwoDividers \"MMMM\" Abc \"NNN\" Def \"PPPPP\",\"\")]\n[(SecondDivider \"MMMMNNN\" Xyz \"PPPPP\",\"\")]\n[(FirstDivider \"MMMM\" Abc \"NNNPPPPP\",\"\")]\n</code></pre>\n\n<p><strong>Note on Applicative Parsers.</strong>  I've used applicative syntax here, rather than the monad syntax. The difference isn't purely syntactical -- you can always write an applicative expression in monadic form, but there are monadic operations that can't be expressed applicatively, so the monadic syntax is strictly more powerful.  However, when an expression can be written both ways, often the applicative syntax is more succinct and easier to write and understand, at least once you get used to it.</p>\n\n<p>In a nutshell, the expression <code>p &lt;*&gt; x &lt;*&gt; y &lt;*&gt; z</code> creates a new parser that applies the parsers <code>p</code>, <code>x</code>, <code>y</code>, and <code>z</code> in order, and then applies the result from parser <code>p</code> (which needs to be a function <code>f</code>) to the results from the rest of the parsers (which must be appropriate arguments for <code>f</code>).  In many cases, the function <code>f</code> is a known function and doesn't need to be returned by a parser, so a common variant is to write <code>f &lt;$&gt; x &lt;*&gt; y &lt;*&gt; z</code>.  This applies the parsers <code>x</code>, <code>y</code>, and <code>z</code> in order, and then applies <code>f</code> (given directly instead of returned by a parser) to the results from those parsers.  For example, the expression:</p>\n\n<pre><code>FirstDivider &lt;$&gt; anything &lt;*&gt; divider1 &lt;*&gt; anything\n</code></pre>\n\n<p>runs three parsers in order to get <code>anything</code>, followed by a <code>divider1</code>, followed by <code>anything</code>, and then applies the function/contructor <code>FirstDivider</code> to the three arguments resulting from those parsers.</p>\n\n<p>The operators <code>&lt;*</code> and <code>*&gt;</code> can be thought of as variants of <code>&lt;*&gt;</code>.  The expression <code>p &lt;*&gt; x</code> first parses <code>p</code>, then parses <code>x</code>, then applies the result of the former to the latter.  The expression <code>p &lt;* x</code> first parses <code>p</code>, then parses <code>x</code>, but instead of applying the former to the latter, it returns the value the arrow is pointing to (i.e., whatever <code>p</code> produced) and throws away the other value.  Similarly <code>p *&gt; x</code> parses <code>p</code> then parses <code>x</code>, then returns whatever <code>x</code> produced.  In particular:</p>\n\n<pre><code>someParser &lt;* eof\n</code></pre>\n\n<p>first runs <code>someParser</code>, then parses (i.e., checks for) EOF, then returns whatever <code>someParser</code> produced.</p>\n\n<p>This syntax can really shine when parsing more traditional languages into an abstract syntax tree.  If you want to parse statements like:</p>\n\n<pre><code>let x = 1 + 5\n</code></pre>\n\n<p>into a <code>Statement</code> type like:</p>\n\n<pre><code>data Statement = ... | Let Var Expr | ...\n</code></pre>\n\n<p>you can write a Parsec parser that looks like:</p>\n\n<pre><code>statement = ...\n  &lt;|&gt; Let &lt;$ string \"let\" &lt;*&gt; var &lt;* symbol \"=\" &lt;*&gt; expr\n  ...\n</code></pre>\n\n<p>The monadic equivalent in do-notation looks like this:</p>\n\n<pre><code>do string \"let\"\n   v &lt;- var\n   symbol \"=\"\n   e &lt;- expr\n   return $ Let v e\n</code></pre>\n\n<p>which is fine, I suppose, but kind of obscures the simple structure of the parse.  The applicative version is basically just the list of tokens to parse, with a little bit of syntactic sugar sprinkled in.</p>\n\n<p>Anyway, here's the full program:</p>\n\n<pre><code>import Data.Char\nimport Text.ParserCombinators.ReadP\n\ndata Divider1 = Abc deriving (Show)\ndata Divider2 = Xyz | Def deriving (Show)\n\ndata Result\n  = TwoDividers   String Divider1 String Divider2 String\n  | FirstDivider  String Divider1 String\n  | SecondDivider String Divider2 String\n  | NoDividers    String\n  deriving (Show)\n\nanything :: ReadP String\nanything = many $ satisfy isLetter  -- valid characters\n\ndivider1 :: ReadP Divider1\ndivider1 = Abc &lt;$ string \"ABC\"\n\ndivider2 :: ReadP Divider2\ndivider2 = (Def &lt;$ string \"DEF\") +++ (Xyz &lt;$ string \"XYZ\")\n\nresult :: ReadP Result\nresult =\n      (TwoDividers &lt;$&gt; anything &lt;*&gt; divider1 &lt;*&gt; anything &lt;*&gt; divider2 &lt;*&gt; anything)\n  &lt;++ (FirstDivider &lt;$&gt; anything &lt;*&gt; divider1 &lt;*&gt; anything)\n  &lt;++ (SecondDivider &lt;$&gt; anything &lt;*&gt; divider2 &lt;*&gt; anything)\n  &lt;++ (NoDividers &lt;$&gt; anything)\n\nparseResult :: String -&gt; [(Result, String)]\nparseResult = readP_to_S (result &lt;* eof)\n\nmain :: IO ()\nmain = mapM_ (print . parseResult)\n  [ \"MMMMABCNNNXYZPPPPP\"\n  , \"MMMMABCNNNDEFPPPPP\"\n  , \"MMMMNNNXYZPPPPP\"\n  , \"MMMMABCNNNPPPPP\"\n  ]\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 11940374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sHjkCuSC4Ig/AAAAAAAAAAI/AAAAAAAAABE/jyw9QYcSD2Y/photo.jpg?sz=128", "display_name": "Agent 008", "link": "https://stackoverflow.com/users/11940374/agent-008"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 58398438, "answer_count": 1, "score": 0, "last_activity_date": 1571241663, "creation_date": 1571094558, "last_edit_date": 1571098633, "question_id": 58385129, "link": "https://stackoverflow.com/questions/58385129/parser-combinators-readp-return-entire-list-if-it-fails-otherwise-return-on", "title": "Parser Combinators (ReadP) - return entire list if it fails, otherwise return only the passing one", "body": "<p>I have a string, for example \"MMMMABCNNNXYZPPPPP\". I know that this string may have ABC in it and may have XYZ in it, but it is not required to have either. Additionally, the XYZ may be swapped for DEF (e.g. \"MMMMABCNNNDEFPPPPP\") and the behavior should remain the same.</p>\n\n<p>I would like to parse the string and return the sequences between them, as well as which one of XYZ or DEF was present. Example:</p>\n\n<pre><code>data Divider1 = Abc\ndata Divider2 = Xyz | Def\n\n--\"MMMMABCNNNXYZPPPPP\" should return (\"MMMM\", Just Abc, \"NNN\", Just Xyz, \"PPPPP\")\n--\"MMMMABCNNNDEFPPPPP\" should return (\"MMMM\", Just Abc, \"NNN\", Just Def, \"PPPPP\")\n</code></pre>\n\n<p>Note that if ABC is not present, I would like to return everything before the divider2 and if XYZ and DEF are both not present, I would like to return everything after divider 1.</p>\n\n<p>Example:</p>\n\n<pre><code>--\"MMMMNNNXYZPPPPP\" should return (\"MMMM\", Nothing, \"NNN\", Just Xyz, \"PPPPP\")\n--\"MMMMABCNNNPPPPP\" should return (\"MMMM\", Just Abc, \"NNN\", Nothing, \"PPPPP\")\n</code></pre>\n\n<p>If neither ABC nor XYZ is present then I don't care if it returns nothing, or if it returns the entire string.</p>\n\n<p>Currently my code is</p>\n\n<pre><code>parseEverything = many $ satisfy someGeneralCondition--check if all characters are valid\n\nparseAbc = (\\str -&gt; Abc) &lt;$&gt; string \"ABC\"\nparseXyz = (\\str -&gt; Xyz) &lt;$&gt; string \"XYZ\"\nparseDef = (\\str -&gt; Def) &lt;$&gt; string \"DEF\"\n\nparseFull = do\n    beforeAbc &lt;- gather parseEverything\n    parseAbc &lt;- (Just &lt;$&gt; parseAbc) &lt;++ return Nothing\n    beforeDivider2 &lt;- gather parseEverything\n    parseDivider2 &lt;- (Just &lt;$&gt; parseXyz) &lt;++ (Just &lt;$&gt; parseDef) &lt;++ (Just &lt;$&gt; Nothing)\n    everythingElse &lt;- look\n    return (beforeAbc, parseAbc, beforeDivider2, parseDivider2, everythingElse)\n</code></pre>\n\n<p>But when I run this on the example string \"MMMMABCNNNXYZPPPPP\", I get mostly failed results with just one result that I want. The problem is that I need to return everything in <code>beforeAbc</code> if <code>parseAbc</code> fails, but if <code>parseAbc</code> passes then I just need to return that. And the same thing with <code>parseXyz</code> and <code>parseDef</code>. I don't think that <code>&lt;++</code> is the correct operator to do this. I also tried a variant of this code using <code>option</code>, but it gave the same result. Is there a simple solution that I am missing, and/or should I set up the parsers in a different way?</p>\n\n<p>Thanks in advance!</p>\n\n<p>Edit: does this have anything to do with chainl or chainr or manyTill?</p>\n"}, {"tags": ["haskell", "io", "main", "io-monad", "do-notation"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 9, "creation_date": 1571091313, "post_id": 58384680, "comment_id": 103117317, "body": "Your function actually returns a value of type <code>IO (String, String)</code>, so your type signature will cause an error. The lack of <code>main</code> is an entirely separate issue, but if you try to actually compile a file rather than just load it into GHCi, it needs to have a <code>main</code> value."}, {"owner": {"reputation": 21, "user_id": 12216844, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDmRcw1iSoH3D8F2P46lYO8nbCnjMw8dO4QyFre=k-s128", "display_name": "Some", "link": "https://stackoverflow.com/users/12216844/some"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1571091476, "post_id": 58384680, "comment_id": 103117373, "body": "The program has a main but I want to return this function to another function"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1571092525, "post_id": 58384680, "comment_id": 103117597, "body": "Well, that shouldn&#39;t be a problem. It must be a function (or, <i>action</i>) of <code>IO</code> type, though."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 2, "creation_date": 1571100838, "post_id": 58384680, "comment_id": 103119168, "body": "The code you posted and the error presented are unrelated."}, {"owner": {"reputation": 700, "user_id": 5499914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fz53h.png?s=128&g=1", "display_name": "Khuldraeseth na&#39;Barya", "link": "https://stackoverflow.com/users/5499914/khuldraeseth-nabarya"}, "edited": false, "score": 0, "creation_date": 1571109950, "post_id": 58384680, "comment_id": 103120873, "body": "<code>return</code> in Haskell is not the same <code>return</code> you&#39;ll find in other languages. It&#39;s a function, not a keyword, and as such has no effect on control flow. <a href=\"https://tio.run/##TY6xDoJAEER7vmJKLeiMBdFYU1FYWBNYZOOxR469cH79eQhBt5p9mbxMX08vMibGznpXuTsHFAXKCqVo9mNXtDZDOkfqneC05DzHg42B9jyh89IoWwEFVvAwUMu1knnDj4lORCzPtWpY6PZvO2@2ymFehEnQWFEWT1CLnlzqZ0PNso07HNdvnxVwybHP/aLRsShCjB8\" rel=\"nofollow noreferrer\">Quick demonstration</a>"}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "is_accepted": false, "score": 1, "last_activity_date": 1571116336, "creation_date": 1571116336, "answer_id": 58387620, "question_id": 58384680, "link": "https://stackoverflow.com/questions/58384680/is-there-a-way-of-receiving-io-outside-of-main-in-haskell/58387620#58387620", "title": "Is there a way of receiving IO outside of main in Haskell?", "body": "<p>In Haskell, if you want to do IO in a function, it needs to return <code>IO</code>.</p>\n\n<pre><code>menu2Players :: String -&gt; String -&gt; IO (String, String)\nmenu2Players player1 player2 = do\n    putStrLn \"Qual o nome do primeiro jogador?\\n\"\n    player1 &lt;- getLine\n    putStrLn \"Qual o nome do segundo jogador?\\n\"\n    player2 &lt;- getLine\n    return (player1, player2)\n</code></pre>\n\n<p>The details of why you need to return <code>IO</code> are a little tricky, but you can learn about it here: <a href=\"http://learnyouahaskell.com/input-and-output\" rel=\"nofollow noreferrer\">http://learnyouahaskell.com/input-and-output</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12216844, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDmRcw1iSoH3D8F2P46lYO8nbCnjMw8dO4QyFre=k-s128", "display_name": "Some", "link": "https://stackoverflow.com/users/12216844/some"}, "is_accepted": false, "score": 0, "last_activity_date": 1571762417, "creation_date": 1571762417, "answer_id": 58508813, "question_id": 58384680, "link": "https://stackoverflow.com/questions/58384680/is-there-a-way-of-receiving-io-outside-of-main-in-haskell/58508813#58508813", "title": "Is there a way of receiving IO outside of main in Haskell?", "body": "<p>(a bit late, but...) The code that worked, I just neeed the IO return.</p>\n\n<pre><code>menu2Players = do\n    putStrLn \"Qual o nome do primeiro jogador?\\n\"\n    player1 &lt;- getLine\n    putStrLn \"Qual o nome do segundo jogador?\\n\"\n    player2 &lt;- getLine\n    return (player1, player2)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12216844, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDmRcw1iSoH3D8F2P46lYO8nbCnjMw8dO4QyFre=k-s128", "display_name": "Some", "link": "https://stackoverflow.com/users/12216844/some"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571762417, "creation_date": 1571091216, "last_edit_date": 1571117629, "question_id": 58384680, "link": "https://stackoverflow.com/questions/58384680/is-there-a-way-of-receiving-io-outside-of-main-in-haskell", "title": "Is there a way of receiving IO outside of main in Haskell?", "body": "<p>It may be a dumb question but I got an error when I try to get an input outside of the <code>main</code> function:</p>\n\n<pre><code>menu2Players :: String -&gt; String -&gt; (String, String)\nmenu2Players player1 player2 = do\n    putStrLn(\"Qual o nome do primeiro jogador?\\n\")\n    player1 &lt;- getLine\n    putStrLn(\"Qual o nome do segundo jogador?\\n\")\n    player2 &lt;- getLine\n    return (player1, player2)\n</code></pre>\n\n<p>The error I got </p>\n\n<blockquote>\n  <p>The IO action \u2018main\u2019 is not defined in module \u2018Main\u2019</p>\n</blockquote>\n\n<p>What can I do to fix this?</p>\n"}, {"tags": ["list", "haskell", "random"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 2, "creation_date": 1571090516, "post_id": 58384217, "comment_id": 103117132, "body": "<code>sequence (repeat rio)</code> itself hangs, because it has to complete infinitely many IO actions before yielding any information.  IO is strict."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 3, "creation_date": 1571092941, "post_id": 58384217, "comment_id": 103117683, "body": "@luqui Perhaps more noteworthy is that <code>take 10 . sequence $ repeat rio</code> also hangs. Evgeny may well have thought that <code>sequence $ repeat rio</code> successfully returns a lazy list, and that only attempting to force it all actually hangs, in the same way that <code>repeat 0</code> &quot;hangs&quot; by never finishing evaluation."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 3, "creation_date": 1571097752, "post_id": 58384217, "comment_id": 103118673, "body": "Conceptually, an <code>IO [Double]</code> is a <i>list of instructions</i>, or an <i>imperative program</i>, to compute a <code>[Double]</code>. As @luqui says, <code>sequence (repeat rio)</code> is an infinite program that repeatedly calls <code>rio</code> forever. Laziness will save you from having to compute the infinite list of instructions itself, if it&#39;s not needed, but it will <i>not</i> save you from having to execute the whole program if you want its result. As the program is infinite, execution never terminates and the result never appears."}, {"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 1, "creation_date": 1571114509, "post_id": 58384217, "comment_id": 103121771, "body": "@malloy - indeed I thought once the type signature of the a, b and c is the same, their &#39;laziness level&#39; should be the same, which was not true, according to all the detailed comments provided."}], "answers": [{"comments": [{"owner": {"reputation": 5911, "user_id": 1688785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07b2da937aa23792045dff6ff19556eb?s=128&d=identicon&r=PG", "display_name": "Caramiriel", "link": "https://stackoverflow.com/users/1688785/caramiriel"}, "edited": false, "score": 0, "creation_date": 1571131711, "post_id": 58384735, "comment_id": 103129287, "body": "What do you mean with &quot;randomness is too strict&quot;?"}], "tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": false, "score": 3, "last_activity_date": 1571091558, "creation_date": 1571091558, "answer_id": 58384735, "question_id": 58384217, "link": "https://stackoverflow.com/questions/58384217/trim-an-infinite-list-of-random-numbers/58384735#58384735", "title": "Trim an infinite list of random numbers", "body": "<p>You can't really have an infinite list of random numbers, because randomness is too strict. So, you can't have the call to <code>sequence</code> outside of your call to <code>count</code>. One obvious thing you could try would be a partial reimplementation of <code>sequence</code> inside of <code>count</code> itself:</p>\n\n<pre><code>count :: (Num a, Ord a, Monad m) =&gt; [m a] -&gt; m (Maybe Int)\ncount = go 0 0\n  where go n total [] = pure Nothing\n        go n total (x:xs) = do\n          num &lt;- x\n          let total' = total + num\n              n' = succ n\n          if total' &gt;= 1\n            then pure $ Just n'\n            else go n' total' xs\n</code></pre>\n\n<p>I've also amended the result to return a Maybe, because it seems wrong to return 1 for an empty list (as yours did), or return the length of a list even if its elements sum to something less than 1.</p>\n\n<p>Another reasonable change would be to not accept <code>[m a]</code>, but just a single <code>m a</code>, which can reliably produce a value any number of times. Then we don't have to worry about the input running out, and so no Maybe is needed:</p>\n\n<pre><code>count :: (Num a, Ord a, Monad m) =&gt; m a -&gt; m Int\ncount m = go 0 0\n  where go n total = do\n          num &lt;- m\n          let total' = total + num\n              n' = succ n\n          if total' &gt;= 1\n            then pure n'\n            else go n' total'\n</code></pre>\n\n<p>Then you can simply call <code>count $ randomRIO (0::Double, 1)</code>, and it will produce as many random numbers as are needed.</p>\n"}, {"tags": [], "owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "is_accepted": true, "score": 4, "last_activity_date": 1571093035, "creation_date": 1571093035, "answer_id": 58384922, "question_id": 58384217, "link": "https://stackoverflow.com/questions/58384217/trim-an-infinite-list-of-random-numbers/58384922#58384922", "title": "Trim an infinite list of random numbers", "body": "<p>You can define an IO action to create an infinite stream of ranged random numbers like so:</p>\n\n<pre><code>import System.Random\n\nrandomRIOs :: (Random a) =&gt; (a, a) -&gt; IO [a]\nrandomRIOs (a, b) = randomRs (a, b) &lt;$&gt; newStdGen\n</code></pre>\n\n<p>After which, the following works fine with your definition of <code>count</code>:</p>\n\n<pre><code>main = do\n    n &lt;- count &lt;$&gt; randomRIOs (0::Double, 1)\n    print n\n</code></pre>\n"}], "owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 58384922, "answer_count": 2, "score": 1, "last_activity_date": 1571114911, "creation_date": 1571088092, "last_edit_date": 1571114911, "question_id": 58384217, "link": "https://stackoverflow.com/questions/58384217/trim-an-infinite-list-of-random-numbers", "title": "Trim an infinite list of random numbers", "body": "<p>I'm trying to trim a list of random numbers so that sum of the numbers in [0,1] in the resulting smaller list accumultates to a value under 1. </p>\n\n<p>This is interesting in a sense that average of these list prefix lengths is <code>e</code>, <a href=\"https://twitter.com/InertialObservr/status/1183489675274510336\" rel=\"nofollow noreferrer\">somehow</a>. </p>\n\n<p>While getting the length of prefix I encountered a problem - I managed to get the program to work on a determined infinite list, or a slice of random list, but the program hangs on infinite random list. What am I doing wrong?</p>\n\n<pre><code>import System.Random\n\n-- Count list items that accumulate to 1.\ncount :: (Num a, Ord a) =&gt; [a] -&gt; Int\ncount xs = 1 + length xs' \n         where xs'= takeWhile (&lt; 1) $ scanl1 (+) xs\n\n-- Works of infinite list \na = (return (repeat 0.015)) :: IO [Double]\nfa = fmap count a \n--67 \n\n-- Works on trimmed list of randoms\nrio = randomRIO (0::Double, 1)         \nb = sequence $ take 10 (repeat rio)\nfb = fmap count b \n-- fb is usually 2 to 5\n\n-- Hangs on infinite list of randoms\nc = sequence (repeat rio)\nfc = fmap count c\n-- fc hangs... ;(\n</code></pre>\n"}, {"tags": ["haskell", "new-operator"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 8, "creation_date": 1571064082, "post_id": 58379070, "comment_id": 103106701, "body": "I think you mean <code>validLength &quot;aa&quot;</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1571064124, "post_id": 58379070, "comment_id": 103106728, "body": "You here make use of a variable <code>aa</code> which, likely, does not exists. If you want to pass a <code>String</code>, you should use <code>validLength &quot;aa&quot;</code>."}, {"owner": {"reputation": 41, "user_id": 12215156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182061032001729/picture?type=large", "display_name": "Alisha White", "link": "https://stackoverflow.com/users/12215156/alisha-white"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1571064213, "post_id": 58379070, "comment_id": 103106781, "body": "@leftaroundabout thanks a lot, my mistake :-)"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1571064379, "post_id": 58379070, "comment_id": 103106891, "body": "Note that operator <code>==</code> already returns a boolean. There is no need to check if that is true, and then return <code>True</code>/<code>False</code> accordingly. You can directly return the result of <code>==</code> e.g. <code>isZero x = x == 0</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571064433, "post_id": 58379070, "comment_id": 103106926, "body": "I.e., <code>validLength xs = length xs == 26</code>."}], "answers": [{"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1571073433, "post_id": 58379224, "comment_id": 103110932, "body": "It&#39;s really kind of you to provide such a good answer from such a beginner and simple question, thanks for you time. I remember when I had the same type of doubts"}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 4, "last_activity_date": 1571064575, "creation_date": 1571064575, "answer_id": 58379224, "question_id": 58379070, "link": "https://stackoverflow.com/questions/58379070/haskell-variable-not-in-scope-error-beginner/58379224#58379224", "title": "Haskell - variable not in scope error - beginner", "body": "<p>Identifiers are not strings. (This is by no means special to Haskell, it's the same in most other languages.) So, when you give <code>aa</code> as the argument, GHC interprets it as <em>the name of some variable</em>. But, well, there is no variable with that name, at least not in scope, thus the error.</p>\n\n<p>If you want to pass actually <em>the string consisting of two <code>a</code> characters</em>, then you should use a string <em>literal</em>. A string literal is simply a string in double quotes (again, that's the same way it is in many other programming languages).</p>\n\n<pre><code>*Main&gt; validLength \"aa\"\nFalse\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 2, "last_activity_date": 1571074338, "creation_date": 1571074338, "answer_id": 58381554, "question_id": 58379070, "link": "https://stackoverflow.com/questions/58379070/haskell-variable-not-in-scope-error-beginner/58381554#58381554", "title": "Haskell - variable not in scope error - beginner", "body": "<p>Just to add a little thing to your code, don't be afraid to return an expression or function that returns a Boolean value:</p>\n\n<pre><code>:t (==)\n(==) :: Eq a =&gt; a -&gt; a -&gt; Bool\n</code></pre>\n\n<p>so,</p>\n\n<pre><code>3==4 -&gt; False\nlength [1,2,3] == 26 -&gt; False\n</code></pre>\n\n<p>So your code could be simply: </p>\n\n<pre><code>validLength :: String -&gt; Bool\nvalidLength xs = length xs == 26 \n</code></pre>\n\n<p>or:</p>\n\n<pre><code>validLength :: String -&gt; Bool\nvalidLength =  (== 26) .  length \n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 12215156, "user_type": "registered", "profile_image": "https://graph.facebook.com/1182061032001729/picture?type=large", "display_name": "Alisha White", "link": "https://stackoverflow.com/users/12215156/alisha-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2807, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1571074338, "creation_date": 1571064044, "last_edit_date": 1571064319, "question_id": 58379070, "link": "https://stackoverflow.com/questions/58379070/haskell-variable-not-in-scope-error-beginner", "title": "Haskell - variable not in scope error - beginner", "body": "<p>I'm new to haskell and cannot work out what is wrong with my code. \nI keep getting a variable out of scope error.</p>\n\n<p>Here is my code that i load into GHCi using <code>:load</code></p>\n\n<pre><code>validLength :: String -&gt; Bool\nvalidLength xs | length xs == 26 = True\n               | otherwise = False\n</code></pre>\n\n<p>I then type <code>validLength aa</code> which should return false but i'm getting an error.</p>\n\n<pre><code>*Main&gt; validLength aa\n\n&lt;interactive&gt;:1:13: error: Variable not in scope: aa :: String\n</code></pre>\n"}, {"tags": ["haskell", "recursion", "functional-programming", "pattern-matching", "strong-typing"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1571050266, "post_id": 58375211, "comment_id": 103099397, "body": "<code>head x</code> is a <code>char</code>, since <code>x</code> is a string<code>, so </code>head x == &quot;0&quot;` makes no sense."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1571058485, "post_id": 58375211, "comment_id": 103103652, "body": "Please never update questions in a way that invalidates existing answers."}, {"owner": {"reputation": 77, "user_id": 9846020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047f8fe7686d13943599f64329e5a976?s=128&d=identicon&r=PG&f=1", "display_name": "T.Naz", "link": "https://stackoverflow.com/users/9846020/t-naz"}, "edited": false, "score": 0, "creation_date": 1571061796, "post_id": 58375211, "comment_id": 103105454, "body": "I&#39;m sorry, I will keep that in mind"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1571071580, "post_id": 58375211, "comment_id": 103110196, "body": "Likewise if you have a followup question to ask, please ask it as a new Question, rather than trying to start a back-and-forth on this one (referring here to the &quot;now it works but I have another problem&quot; update). Stack Overflow works best with focused questions that have a definite finish. I&#39;ve edited that update out, but you can find it in the post history if it is helpful to you when asking your new question."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9846020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047f8fe7686d13943599f64329e5a976?s=128&d=identicon&r=PG&f=1", "display_name": "T.Naz", "link": "https://stackoverflow.com/users/9846020/t-naz"}, "edited": false, "score": 0, "creation_date": 1571053640, "post_id": 58375278, "comment_id": 103101091, "body": "Thanks for the reply! I now use pattern Matching and tried to check if there are ?s or !s in the head of the strings using it. I compared it using characters instead of strings , as you did in your example, but my code doesn&#39;t compile if I execute it like this and I don&#39;t get why. Do you have any suggestions?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 77, "user_id": 9846020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047f8fe7686d13943599f64329e5a976?s=128&d=identicon&r=PG&f=1", "display_name": "T.Naz", "link": "https://stackoverflow.com/users/9846020/t-naz"}, "edited": false, "score": 0, "creation_date": 1571054522, "post_id": 58375278, "comment_id": 103101556, "body": "The pattern <code>((&#39;!&#39;:xs):(&#39;?&#39;:_):_)</code> requires that, in the list of strings, the first string starts with ! and the second string starts with ?. Is that what you really want? You might instead want to use two separate lines, one for handling ! and another for ?. It&#39;s hard to tell what you actually need."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 3, "last_activity_date": 1571050422, "creation_date": 1571050422, "answer_id": 58375278, "question_id": 58375211, "link": "https://stackoverflow.com/questions/58375211/problem-with-strong-typisation-in-pattern-matching/58375278#58375278", "title": "Problem with strong Typisation in Pattern Matching", "body": "<p>Here are the types of the involved quantities:</p>\n\n<pre><code>x :: [Char]\nhead x :: Char\n\"1\" :: String\n</code></pre>\n\n<p>hence <code>head x == \"1\"</code> is trying to compare a character and a string. A correctly typed comparison would be</p>\n\n<pre><code>head x == '1'\n</code></pre>\n\n<p>since we have <code>'1' :: Char</code>.</p>\n\n<p>That being said, note that <code>head x</code> will crash when <code>x</code> is empty. For that reason it's better to avoid using <code>head</code> and <code>tail</code>, and use pattern matching instead.</p>\n\n<pre><code>may_convergent:: [[Char]] -&gt; String\nmay_convergent []            = \"empty list\"\nmay_convergent (('1':_ ):_ ) = \"May-convergent \"\nmay_convergent (('0':ys):_ ) = ys\nmay_convergent (_       :xs) = may_convergent xs\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 9846020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047f8fe7686d13943599f64329e5a976?s=128&d=identicon&r=PG&f=1", "display_name": "T.Naz", "link": "https://stackoverflow.com/users/9846020/t-naz"}, "edited": false, "score": 0, "creation_date": 1571053173, "post_id": 58375300, "comment_id": 103100855, "body": "thanks for your reply. I modified my Code using pattern matching. It now looks like this:  may_convergent:: [[Char]] -&gt; String may_convergent [] = &quot;empty list&quot; may_convergent ((&#39;1&#39;:_):_) = &quot;May-convergent &quot; may_convergent ((&#39;0&#39;:xs):y) = y may_convergent ((&#39;!&#39;:xs):(&#39;?&#39;:_):_) = may_convergent xs  But the code doesnt compile because I get an error because of the last line. I don&#39;t get why, because I&#39;m now comparing the head with a character instead of a string."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 77, "user_id": 9846020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047f8fe7686d13943599f64329e5a976?s=128&d=identicon&r=PG&f=1", "display_name": "T.Naz", "link": "https://stackoverflow.com/users/9846020/t-naz"}, "edited": false, "score": 0, "creation_date": 1571053813, "post_id": 58375300, "comment_id": 103101177, "body": "@T.Naz: because you call <code>may_convergent</code> with <code>xs</code>, but <code>xs</code> is the &quot;tail&quot; of the first item, so a <code>String</code>, not a <code>[String]</code>. You likely want to use <code>may_convergent ((&#39;!&#39;:_):(&#39;?&#39;:_):xs)</code>."}, {"owner": {"reputation": 77, "user_id": 9846020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047f8fe7686d13943599f64329e5a976?s=128&d=identicon&r=PG&f=1", "display_name": "T.Naz", "link": "https://stackoverflow.com/users/9846020/t-naz"}, "edited": false, "score": 0, "creation_date": 1571054800, "post_id": 58375300, "comment_id": 103101696, "body": "Thanks again for the reply, actually I wanna call may_convergent xs, so on the String after the &#39;!&#39; or &#39;?&#39;"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 77, "user_id": 9846020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047f8fe7686d13943599f64329e5a976?s=128&d=identicon&r=PG&f=1", "display_name": "T.Naz", "link": "https://stackoverflow.com/users/9846020/t-naz"}, "edited": false, "score": 0, "creation_date": 1571054854, "post_id": 58375300, "comment_id": 103101715, "body": "@T.Naz: but your <code>may_convergent</code> takes as input a <code>[[Char]]</code>, or a <code>[String]</code> (this is the same), so that makes not much sense."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 3, "last_activity_date": 1571050496, "creation_date": 1571050496, "answer_id": 58375300, "question_id": 58375211, "link": "https://stackoverflow.com/questions/58375211/problem-with-strong-typisation-in-pattern-matching/58375300#58375300", "title": "Problem with strong Typisation in Pattern Matching", "body": "<p>The problem is not with the type system. But with your checks. If you write:</p>\n\n<pre><code><b>head</b> x == \"1\"</code></pre>\n\n<p>Haskell derives that the type of <code>head x</code> should be a <code>String</code>, and hence that <code>x</code> should be a <code>[String]</code>. But since <code>x</code> is the first element of your list, it is a <code>String</code>, not a <code>[String]</code>. You can fix this by comparing with a character, like:</p>\n\n<pre><code>head x == <b>'1'</b></code></pre>\n\n<p>We can however use pattern matching here, making the code not only more elegant, but more safe as well. For example even if your current code would compile, it would raise an error on <code>[\"\"]</code>, since <code>head \"\"</code> of course makes no sense.</p>\n\n<p>We can define a function like:</p>\n\n<pre><code>may_convergent:: [[Char]] -&gt; String\nmay_convergent [] = &quot;empty list&quot;\nmay_convergent ((<b>'1'</b>:_):_) = &quot;May-convergent &quot;\nmay_convergent ((<b>'0'</b>:xs):_) = xs\nmay_convergent (_:xs) = may_convergent xs</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9846020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047f8fe7686d13943599f64329e5a976?s=128&d=identicon&r=PG&f=1", "display_name": "T.Naz", "link": "https://stackoverflow.com/users/9846020/t-naz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571071748, "creation_date": 1571050196, "last_edit_date": 1571071748, "question_id": 58375211, "link": "https://stackoverflow.com/questions/58375211/problem-with-strong-typisation-in-pattern-matching", "title": "Problem with strong Typisation in Pattern Matching", "body": "<p>I want to write a recursive function, that uses pattern matching.\nI want to call it with an array-string (like for example that one [\"01!\", \"1!!?\", \"?!1\"]). If the head of the first element is a 1 , the function shall quit, if the head is 0 it shall remove the element from the list, and if the element is ? or ! it shall restart the function with the next string of the array (there's going to be another function later, I just want to get it working so far).</p>\n\n<pre><code>may_convergent:: [[Char]] -&gt; String\nmay_convergent [] = \"empty list\"\nmay_convergent (x:xs)\n       | head x == \"1\" = \"May-convergent \"\n       | head x == \"0\" = tail x\n       | otherwise = may_convergent xs\n</code></pre>\n\n<p>That's my code so far. When I execute it , I get a Typisation error. \nCan someone explain to me how I get the Typisation right in the first line of the Code ?\nThe error message says that the expected Type is [[[Char]]] but when I correct the Typisation and call on the function it doesnt work.</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["haskell", "monads", "dsl"], "comments": [{"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 2, "creation_date": 1571041998, "post_id": 58372725, "comment_id": 103095169, "body": "Have you looked at extensible effects, like <a href=\"http://hackage.haskell.org/package/freer-simple-1.2.1.1/docs/Control-Monad-Freer.html\" rel=\"nofollow noreferrer\">freer-simple</a>? In that approach this particular problem wouldn&#39;t happen (although you might of course have other problems with it)."}, {"owner": {"reputation": 1750, "user_id": 3929481, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/3ZrH1.jpg?s=128&g=1", "display_name": "mcmayer", "link": "https://stackoverflow.com/users/3929481/mcmayer"}, "reply_to_user": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1571042401, "post_id": 58372725, "comment_id": 103095352, "body": "@Cubic I&#39;ve looked at free monads, but not at <code>freer-simple</code> in particular. What I like about the tagless final style is that it&#39;s easily extendable, so implementers can easily tack on their own actions, e.g. platform specific calls in this example. Maybe freer-simple can do that, too. Let me have a look."}, {"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 2, "creation_date": 1571051985, "post_id": 58372725, "comment_id": 103100285, "body": "Another relevant library is <code>polysemy</code>. Take a look at that too: <a href=\"https://haskell-explained.gitlab.io/blog/posts/2019/07/28/polysemy-is-cool-part-1/index.html\" rel=\"nofollow noreferrer\">haskell-explained.gitlab.io/blog/posts/2019/07/28/&hellip;</a>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571059014, "post_id": 58372725, "comment_id": 103103915, "body": "<code>freer-simple</code> doesn&#39;t implement free monads; it implements <i>freer</i> monads :) (The difference being that a free monad constructors a monad from a functor, while a freer monad constructs a monad from <i>anything</i> with type <code>Type -&gt; Type</code>.)"}, {"owner": {"reputation": 1750, "user_id": 3929481, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/3ZrH1.jpg?s=128&g=1", "display_name": "mcmayer", "link": "https://stackoverflow.com/users/3929481/mcmayer"}, "reply_to_user": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1571062133, "post_id": 58372725, "comment_id": 103105619, "body": "@arrowd My superficial understanding of <code>polysemy</code> is that it addresses the problem of how to compose monads. That&#39;s not really the problem I&#39;m having here, is it?"}, {"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1571157951, "post_id": 58372725, "comment_id": 103143978, "body": "Could you clarify where the repetitiveness occurs? Are you complaining about instances that look the same because they just rewrap <code>IO</code>&#39;s instance for the most part, or are you exposing additional toplevel functions specialized to your custom monads?"}, {"owner": {"reputation": 1750, "user_id": 3929481, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/3ZrH1.jpg?s=128&g=1", "display_name": "mcmayer", "link": "https://stackoverflow.com/users/3929481/mcmayer"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1571198579, "post_id": 58372725, "comment_id": 103155603, "body": "@Li-yaoXia Both, actually. First: If I have <code>m</code> implementations that use <code>n</code> functions in <code>IO</code> then I have to wrap <code>n m</code> function calls, whereas I&#39;d like that to be just <code>n</code>.  Second: When implementers create utility functions (in <code>IO</code>, say) then they can&#39;t easily share them with other implementers. In other words, there&#39;s no code reuse for new toplevel functions."}], "answers": [{"tags": [], "owner": {"reputation": 1750, "user_id": 3929481, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/3ZrH1.jpg?s=128&g=1", "display_name": "mcmayer", "link": "https://stackoverflow.com/users/3929481/mcmayer"}, "is_accepted": false, "score": 1, "last_activity_date": 1571206635, "creation_date": 1571206635, "answer_id": 58406846, "question_id": 58372725, "link": "https://stackoverflow.com/questions/58372725/avoid-wrapping-monads-in-a-typed-tagless-final-style-dsl/58406846#58406846", "title": "Avoid wrapping monads in a typed-tagless-final-style DSL", "body": "<p>Here's one approach: Introduce a monad transformer that just wraps another monad with the twist of adding a phantom type <code>i</code>,</p>\n\n<pre><code>import Control.Monad.Trans.Class (MonadTrans, lift)\n\nnewtype IndexedWrapT i m a = IndexedWrapT {runIndexedWrapT :: m a} \n            deriving (Functor, Applicative, Monad)\n\ninstance MonadTrans (IndexedWrapT i) where\n    lift = IndexedWrapT\n</code></pre>\n\n<p>The phantom type <code>i</code> has the sole purpose of letting different implementations have distinct type.</p>\n\n<p>Then wrap (<code>lift</code>) the relevant functions once, e.g.:</p>\n\n<pre><code>putStrLn' :: MonadTrans t =&gt; String -&gt; t IO ()\nputStrLn' = lift . putStrLn\n</code></pre>\n\n<p>On the implementation side </p>\n\n<pre><code>data MyImpl'\n\ntype MyImpl = IndexedWrapT MyImpl' IO\n\nrunMyImpl :: MyImpl a -&gt; IO a\nrunMyImpl = runIndexedWrapT\n\ninstance RPCToy MyImpl where\n    mkdir = putStrLn' . (\"BETTER NOT CREATE \"++)\n    ....\n</code></pre>\n\n<p>Having formulated the wrapping operation as a monad transformer it becomes clear that other approaches to composing effects may be used, here, as pointed out in the comments, e.g. <a href=\"http://hackage.haskell.org/package/freer-simple-1.2.1.1/docs/Control-Monad-Freer.html\" rel=\"nofollow noreferrer\">freer-simple</a> or <a href=\"https://haskell-explained.gitlab.io/blog/posts/2019/07/28/polysemy-is-cool-part-1/index.html\" rel=\"nofollow noreferrer\">polysemy</a>.</p>\n"}], "owner": {"reputation": 1750, "user_id": 3929481, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/3ZrH1.jpg?s=128&g=1", "display_name": "mcmayer", "link": "https://stackoverflow.com/users/3929481/mcmayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571206635, "creation_date": 1571041402, "last_edit_date": 1571041796, "question_id": 58372725, "link": "https://stackoverflow.com/questions/58372725/avoid-wrapping-monads-in-a-typed-tagless-final-style-dsl", "title": "Avoid wrapping monads in a typed-tagless-final-style DSL", "body": "<p>Here's a small toy DSL in <em>typed tagless final</em> style (see <a href=\"http://okmij.org/ftp/tagless-final/course/lecture.pdf\" rel=\"nofollow noreferrer\">Typed Tagless Final Interpreters</a> by O. Kiselyov).</p>\n\n<pre><code>class Monad m =&gt; RPCToy m where\n    mkdir :: FilePath -&gt; m ()\n    ls    :: FilePath -&gt; m [FilePath]\n</code></pre>\n\n<p>The different instatiations of this little DSL would be, for example, the implementation of <code>mkdir</code> and <code>ls</code> on different platforms, either local and remote. Type <code>m</code> is a monad in all implementations, it could be <code>IO</code>, or one provided by some networking library, or some other homebrew monad.</p>\n\n<p>Here's an implementation in <code>IO</code>:</p>\n\n<pre><code>import System.Directory (listDirectory)\nimport Control.Monad (void)\n\ninstance RPCToy IO where\n    mkdir = void . putStrLn . (\"better not create \"++)\n    ls    = listDirectory\n</code></pre>\n\n<p>and a little application</p>\n\n<pre><code>import Control.Monad (unless)\n\ndemo :: RPCToy m =&gt; m ()\ndemo = do\n    files &lt;- ls \".\"\n    unless (\"test\" `elem` files) $\n        mkdir \"test\"\n</code></pre>\n\n<p>that can be run in the <code>IO</code> monad</p>\n\n<pre><code>main :: IO ()\nmain = do\n    demo\n</code></pre>\n\n<p>So far so good. </p>\n\n<p>Now suppose that different implementations rely on the same monad <code>m</code>, e.g. from the same networking library. For the typed tagless final style to work distinct monads are needed, here, that are nonetheless essentially the same. The ambiguity can be removed by wrapping things:</p>\n\n<pre><code>{-# LANGUAGE GeneralizedNewtypeDeriving #-}\n\nnewtype Local a = Local {runLocal :: IO a} deriving (Functor, Applicative, Monad)\n</code></pre>\n\n<p>and then implement <code>RPCToy Local</code>,</p>\n\n<pre><code>instance RPCToy Local where\n    mkdir = Local . putStrLn . (\"BETTER NOT CREATE \"++)\n    ls    = Local . listDirectory\n</code></pre>\n\n<p>that can be run nicely</p>\n\n<pre><code>main :: IO ()\nmain = do\n    runLocal demo\n</code></pre>\n\n<p><strong>What bugs me is this:</strong> The implementers have to put a lot of <code>Local</code>s in their code, or, rather repetitively, wrap the library functions like so</p>\n\n<pre><code>localListDirectory = Local . listDirectory\n...\n</code></pre>\n\n<p>One idea is to create an 'indexed monad' <code>im i a</code>, <code>im i</code> being the monad, that carries around an index type <code>i</code> for the sole purpose of letting the compiler distinguish the different implementations. The <code>RebindableSyntax</code> extension makes this possible without having to give up the <code>do</code> syntax. But each monad needs to be 'lifted' into this indexed monad. The improvement is this: Each monad <code>m</code> and the functions therein need to be lifted only once. Otherwise it's still quite convoluted.</p>\n\n<p>I'm wondering whether there's a nicer way to get rid of the monad wrapping.</p>\n"}, {"tags": ["list", "haskell", "minimum"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1571039381, "post_id": 58372236, "comment_id": 103093900, "body": "You calculate the minimum, and then you filter the list."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 6, "last_activity_date": 1571040147, "creation_date": 1571040147, "answer_id": 58372440, "question_id": 58372236, "link": "https://stackoverflow.com/questions/58372236/how-to-find-all-minimum-elements-in-a-list-of-tuples/58372440#58372440", "title": "How to find all minimum elements in a list of tuples?", "body": "<p>After you obtain the minimum of the first value, we can filter the list on these items. Because you here want to retrieve a list of minimum items, we can cover the empty list as well by returning an empty list:</p>\n\n<pre><code>minimumsFst :: Ord a =&gt; [(a, b)] -&gt; [(a, b)]\nminimumsFst [] = []\nminimumsFst xs = filter ((==) minfst . fst) xs\n    where minfst = minimum (map fst xs)</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude&gt; minimumsFst [(10,'a'),(5,'b'),(1,'c'),(8,'d'),(1,'e')]\n[(1,'c'),(1,'e')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1571045712, "post_id": 58372760, "comment_id": 103097103, "body": "I would expect this to cause <code>minfst xs</code> to be recomputed at each step, which is needlessly expensive. I&#39;d rather remove the argument, and use <code>... where minfst = minimum (map fst xs)</code>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 2, "creation_date": 1571048717, "post_id": 58372760, "comment_id": 103098626, "body": "in any case this is reimplementation of filter, and <code>minimum . map fst</code> is reimplementation of <code>fst . minimumBy (comparing fst)</code>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1571085066, "post_id": 58372760, "comment_id": 103115416, "body": "if you&#39;re already re-implementing stuff with foldr, you could go one extra step and fuse the finding of the minimum in, as well. one foldr to do the whole job. :)"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 2, "last_activity_date": 1571076504, "last_edit_date": 1571076504, "creation_date": 1571041538, "answer_id": 58372760, "question_id": 58372236, "link": "https://stackoverflow.com/questions/58372236/how-to-find-all-minimum-elements-in-a-list-of-tuples/58372760#58372760", "title": "How to find all minimum elements in a list of tuples?", "body": "<p>You can do it easily too with <code>foldr</code>:</p>\n\n<pre><code>minimumsFst :: Ord a =&gt; [(a, b)] -&gt; [(a, b)]\nminimumsFst xs = go (minfst xs) xs\n  where\n  go mn ls = foldr (\\(x, y) rs -&gt; if (x ==  mn) then (x,y) : rs else rs) [] xs\n  minfst ls = minimum (map fst ls)\n</code></pre>\n\n<p>with your example:</p>\n\n<pre><code>   minimumsFst [(10,'a'),(5,'b'),(1,'c'),(8,'d'),(1,'e')]\n=&gt; [(1,'c'),(1,'e')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571065552, "post_id": 58373950, "comment_id": 103107478, "body": "Sorting takes O(n lg n) time, which is significantly slower than O(n) achieved by the minimum/filter combination."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571066443, "post_id": 58373950, "comment_id": 103107918, "body": "@chepner you&#39;re forgetting about the laziness. :)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1571066528, "post_id": 58373950, "comment_id": 103107956, "body": "How does laziness guarantee that <code>sortOn</code> can produce the minimum value(s) in o(n lg n) time? (Although, I can probably answer my own question if a spend more than two seconds thinking about which sorting algorithm is used...)"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571066626, "post_id": 58373950, "comment_id": 103108007, "body": "@chepner that used to be a hot topic. <code>take k . sort</code> is O(n) (for small ks) when sort is lazy (<i>on-line</i>), like <code>mergesort</code>. When the first (minimal) element is found, only <i>O(n)</i> comparisons have been made, and the rest of tree of comparisons is yet to be explored. so it&#39;s O(k*n) for <code>take n</code>, and for a small fixed k it&#39;s O(n)."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571066839, "post_id": 58373950, "comment_id": 103108109, "body": "@chepner (correction: for <code>take k</code>). but here the k isn&#39;t fixed, you ask? well, if k was large, that means we had nearly-sorted input and the sort itself was O(n)."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571067260, "post_id": 58373950, "comment_id": 103108312, "body": "@chepner WP says mergesort&#39;s best case (i.e. on sorted input) is still n log n. that would be a facepalm, BUT, GHC&#39;s implementation almost surely does runs discovery, and with that, it&#39;s still O(n)!"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571068276, "post_id": 58373950, "comment_id": 103108814, "body": "OK, looking at the implementation in <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/src/Data.OldList.html\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.12.0.0/docs/src/&hellip;</a>, it looks like at the first level it sorts an arbitrary number of sorted sequences, rather than recursively merging exactly two sorted sequences, so it&#39;s easier to believe that the O(n) bound holds even if I haven&#39;t fully digested the algorithm yet."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571069796, "post_id": 58373950, "comment_id": 103109511, "body": "@chepner that&#39;s what I referred to as &quot;runs discovery&quot; (it&#39;s even smarter, discovering also the descending ones and reversing them as it goes -- if they didn&#39;t change anything since the last time I looked). it is done in O(n), and so if we&#39;re left with just one (non-decreasing) run, to finish up the sorting is an O(1) operation. (it&#39;s O(n) in the worst case (no runs).)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user933161"}, "is_accepted": false, "score": 3, "last_activity_date": 1571045668, "creation_date": 1571045668, "answer_id": 58373950, "question_id": 58372236, "link": "https://stackoverflow.com/questions/58372236/how-to-find-all-minimum-elements-in-a-list-of-tuples/58373950#58373950", "title": "How to find all minimum elements in a list of tuples?", "body": "<p>Oneliner. The key is sorting.</p>\n\n<pre><code>Prelude Data.List&gt; let a = [(1,'c'),(2,'b'),(1,'w')]\nPrelude Data.List&gt; (\\xs@((m,_):_) -&gt; takeWhile ((== m) . fst ) xs) . sortOn fst $ a\n[(1,'c'),(1,'w')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571069739, "post_id": 58375114, "comment_id": 103109488, "body": "Is there a good reference for this fact, aside from linking to the implementation?"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571069890, "post_id": 58375114, "comment_id": 103109545, "body": "it should be under &quot;k largest&quot; or something."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571070107, "post_id": 58375114, "comment_id": 103109635, "body": "It&#39;s also a little disturbing that <code>Data.OldList</code> appears to have the option to use insertion sort for <code>sortBy</code> (based the value of <code>USE_REPORT_PRELUDE</code>), although there doesn&#39;t seem to be any mention of sorting in the Haskell report (1998 or 2010)."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1571076591, "post_id": 58375114, "comment_id": 103112223, "body": "very impressive answer"}], "tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 2, "last_activity_date": 1571069653, "last_edit_date": 1571069653, "creation_date": 1571049855, "answer_id": 58375114, "question_id": 58372236, "link": "https://stackoverflow.com/questions/58372236/how-to-find-all-minimum-elements-in-a-list-of-tuples/58375114#58375114", "title": "How to find all minimum elements in a list of tuples?", "body": "<p>You tried</p>\n\n<pre><code>minimumBy (comparing fst) xs\n</code></pre>\n\n<p>which can also be written as</p>\n\n<pre><code>= head . sortBy (comparing fst) $ xs\n= head . sortOn fst $ xs\n= head . head . group . sortOn fst $ xs\n= head . head . groupBy ((==) `on` fst) . sortOn fst $ xs\n</code></pre>\n\n<p>This returns just the first element instead of the list of them, so just drop that extra <code>head</code> to get what you want:</p>\n\n<pre><code>=        head . groupBy ((==) `on` fst) . sortOn fst $ xs\n</code></pre>\n\n<p>Of course having <code>head</code> is no good since it'll error out on the <code>[]</code> input. Instead, we can use the safe option,</p>\n\n<pre><code>= concat . take 1 . groupBy ((==) `on` fst) . sortOn fst $ xs\n</code></pre>\n\n<p>By the way any solution that calls <code>minimum</code> is also unsafe for the empty input list:</p>\n\n<blockquote>\n<pre><code>&gt; head []\n*** Exception: Prelude.head: empty list\n\n&gt; minimum []\n*** Exception: Prelude.minimum: empty list\n</code></pre>\n</blockquote>\n\n<p>but <code>takeWhile</code> is safe:</p>\n\n<blockquote>\n<pre><code>&gt; takeWhile undefined []\n[]\n</code></pre>\n</blockquote>\n\n<p><em>edit:</em> thanks to laziness, the overall time complexity of the final version should still be <em>O(n)</em> even in the worst case.</p>\n"}, {"tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1571171125, "last_edit_date": 1571171125, "creation_date": 1571156228, "answer_id": 58398885, "question_id": 58372236, "link": "https://stackoverflow.com/questions/58372236/how-to-find-all-minimum-elements-in-a-list-of-tuples/58398885#58398885", "title": "How to find all minimum elements in a list of tuples?", "body": "<p>Here's a solution that works in one pass (most other answers here do two passes: one to find the minimum value and one to filter on it), and doesn't rely on how the sorting functions are implemented to be efficient.</p>\n\n<pre><code>{-# LANGUAGE ScopedTypeVariables #-}\n\nimport Data.Foldable (foldl')\n\nminimumsBy :: forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]\nminimumsBy _ [] = []\nminimumsBy f (x:xs) = postprocess $ foldl' go (x, id) xs\n  where\n    go :: (a, [a] -&gt; [a]) -&gt; a -&gt; (a, [a] -&gt; [a])\n    go acc@(x, xs) y = case f x y of\n      LT -&gt; acc\n      EQ -&gt; (x, xs . (y:))\n      GT -&gt; (y, id)\n    postprocess :: (a, [a] -&gt; [a]) -&gt; [a]\n    postprocess (x, xs) = x:xs []\n</code></pre>\n\n<p>Note that the <code>[a] -&gt; [a]</code> type I'm using here is called a <a href=\"https://wiki.haskell.org/Difference_list\" rel=\"nofollow noreferrer\">difference list</a>, aka a <a href=\"https://www.cs.tufts.edu/~nr/cs257/archive/john-hughes/lists.pdf\" rel=\"nofollow noreferrer\">Hughes list</a>.</p>\n"}], "owner": {"reputation": 500, "user_id": 11303290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5926bac6c5617d83b1af462ded299752?s=128&d=identicon&r=PG&f=1", "display_name": "llamaro25", "link": "https://stackoverflow.com/users/11303290/llamaro25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 58372440, "answer_count": 5, "score": 7, "last_activity_date": 1571171125, "creation_date": 1571039310, "last_edit_date": 1571064817, "question_id": 58372236, "link": "https://stackoverflow.com/questions/58372236/how-to-find-all-minimum-elements-in-a-list-of-tuples", "title": "How to find all minimum elements in a list of tuples?", "body": "<p>How can I find all the minimum elements in a list? Right now I have a list of tuples, i.e.</p>\n\n<pre><code>[(10,'a'),(5,'b'),(1,'c'),(8,'d'),(1,'e')]\n</code></pre>\n\n<p>So I want the output which is all the minimum elements of the list, in a new list. For example</p>\n\n<pre><code> [(1,'c'),(1,'e')]\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>minimumBy (comparing fst) xs\n</code></pre>\n\n<p>but that only returns the first minimum element.</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1571012064, "creation_date": 1571012064, "answer_id": 58368753, "question_id": 58368732, "link": "https://stackoverflow.com/questions/58368732/how-to-understand-and-fix-couldnt-match-type-errors/58368753#58368753", "title": "How to understand and fix &quot;Couldn&#39;t match type&quot; errors?", "body": "<p>Two mistakes:</p>\n\n<ol>\n<li><code>conta xs</code> should be <code>conta n xs</code>. The recursive call needs the same types of arguments as the initial call.</li>\n<li>The type of conta should be <code>Int -&gt; Polinomio -&gt; Float</code>, not <code>Int -&gt; Polinomio -&gt; Int</code>. This is because it returns the first part of the tuple, which is a <code>Float</code>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 1, "last_activity_date": 1571032344, "creation_date": 1571032344, "answer_id": 58370759, "question_id": 58368732, "link": "https://stackoverflow.com/questions/58368732/how-to-understand-and-fix-couldnt-match-type-errors/58370759#58370759", "title": "How to understand and fix &quot;Couldn&#39;t match type&quot; errors?", "body": "<p>Reading the great answer of @Josepf Sible, the corrections you should do are:</p>\n\n<pre><code>type Polinomio = [Monomio]\ntype Monomio = (Float,Int)\n\nconta :: Int -&gt; Polinomio -&gt; Float\nconta n [] = 0\nconta n ((x,y):xs) = if n == y then x else conta n xs\n</code></pre>\n\n<p>example:</p>\n\n<pre><code> conta 3 [(4.4,5),(5.2,3)]\n=&gt; 5.2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1571045638, "last_edit_date": 1571045638, "creation_date": 1571042553, "answer_id": 58373012, "question_id": 58368732, "link": "https://stackoverflow.com/questions/58368732/how-to-understand-and-fix-couldnt-match-type-errors/58373012#58373012", "title": "How to understand and fix &quot;Couldn&#39;t match type&quot; errors?", "body": "<p>Let's look at the error:</p>\n\n\n\n<blockquote>\n<pre><code>Ficha2.hs:83:37: error:  \n   \u2022 Couldn't match expected type \u2018Int\u2019 with actual type \u2018Float\u2019\n   \u2022 In the expression: x\n     In the expression: if n == y then x else conta xs\n     In an equation for \u2018conta\u2019:\n         conta n ((x, y) : xs) = if n == y then x else conta xs\n</code></pre>\n</blockquote>\n\n<p>There is a problem with <code>x</code> in </p>\n\n<pre><code>if n == y then x else conta xs\n</code></pre>\n\n<p>The problem is that <code>x</code> is of (actual type) <code>Float</code>, when in fact it should have been an <code>Int</code>. It should have been an <code>Int</code>, because you promised to return an <code>Int</code> from <code>conta</code> and <code>x</code> is the value returned by <code>conta</code>:</p>\n\n<pre><code>conta :: Int -&gt; Polinomio -&gt; Int\n</code></pre>\n\n<p>It is a <code>Float</code> because you use <code>((x, y) : xs)</code> to match against <code>Polinomio</code> and ultimately <code>(Float, Int)</code>. Therefor we know from the type of the second argument of <code>conta</code> that <code>x</code> is a <code>Float</code>.</p>\n\n<pre><code>type Polinomio = [Monomio]\ntype Monomio = (Float, Int)\nconta :: Int -&gt; Polinomio -&gt; Int\nconta n ((x, y) : xs) = ...\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 12211544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i1_85Cf8Myc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-AlCCUYe_ZmAqow5OqqatbNT3og/photo.jpg?sz=128", "display_name": "Luis Manuel", "link": "https://stackoverflow.com/users/12211544/luis-manuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1571045638, "creation_date": 1571011737, "last_edit_date": 1571042629, "question_id": 58368732, "link": "https://stackoverflow.com/questions/58368732/how-to-understand-and-fix-couldnt-match-type-errors", "title": "How to understand and fix &quot;Couldn&#39;t match type&quot; errors?", "body": "<p>I'm trying to make a function (<code>conta :: Int -&gt; Polinomio -&gt; Int</code>) that gives me a (<code>conta n p</code>) telling me how much <code>n</code>'s I have in <code>p</code>.</p>\n\n<pre><code>type Polinomio = [Monomio]\ntype Monomio = (Float,Int)\n\nconta :: Int -&gt; Polinomio -&gt; Int\nconta n [] = 0\nconta n ((x,y):xs) = if n == y then x else conta xs\n</code></pre>\n\n<blockquote>\n<pre><code>Ficha2.hs:83:37: error:\n   \u2022 Couldn't match expected type \u2018Int\u2019 with actual type \u2018Float\u2019\n   \u2022 In the expression: x\n     In the expression: if n == y then x else conta xs\n     In an equation for \u2018conta\u2019:\n         conta n ((x, y) : xs) = if n == y then x else conta xs\n\nFicha2.hs:83:44: error:\n   \u2022 Couldn't match expected type \u2018Int\u2019\n                 with actual type \u2018Polinomio -&gt; Int\u2019\n   \u2022 Probable cause: \u2018conta\u2019 is applied to too few arguments\n     In the expression: conta xs\n     In the expression: if n == y then x else conta xs\n     In an equation for \u2018conta\u2019:\n         conta n ((x, y) : xs) = if n == y then x else conta xs\n\nFicha2.hs:83:50: error:\n   \u2022 Couldn't match expected type \u2018Int\u2019 with actual type \u2018[Monomio]\u2019\n   \u2022 In the first argument of \u2018conta\u2019, namely \u2018xs\u2019\n     In the expression: conta xs\n     In the expression: if n == y then x else conta xs\n</code></pre>\n</blockquote>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 2, "creation_date": 1571001285, "post_id": 58367762, "comment_id": 103085854, "body": "Could you please include the error message in your question? (Please do not post an image, and rather copy-and-paste the message, and show us the exact code that produces the error.)"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1571019363, "post_id": 58367762, "comment_id": 103088719, "body": "Don&#39;t remove your code just because you got an answer."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1571182948, "post_id": 58367762, "comment_id": 103152751, "body": "Please do not destroy content. It is not allowed by the site&#39;s rules. If you persist you will be reported to the site&#39;s moderators. Have a nice day! :)"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12211118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJdl6.png?s=128&g=1", "display_name": "MathCoolGuy99", "link": "https://stackoverflow.com/users/12211118/mathcoolguy99"}, "edited": false, "score": 0, "creation_date": 1571003011, "post_id": 58367939, "comment_id": 103086168, "body": "I&#39;m still a little bit confused with how you write it since the main point is that we only concern about function &quot;train&quot; . And it&#39;s type should be like &quot;train :: Eq a =&gt; (a -&gt; t) -&gt; [(a, t)] -&gt; a -&gt; t&quot;"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 11, "user_id": 12211118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJdl6.png?s=128&g=1", "display_name": "MathCoolGuy99", "link": "https://stackoverflow.com/users/12211118/mathcoolguy99"}, "edited": false, "score": 0, "creation_date": 1571003215, "post_id": 58367939, "comment_id": 103086209, "body": "@MathCoolGuy99 Your question as posted only refers to strings. If you need <code>train</code> to have a specific type signature, you should edit that into your question."}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 11, "user_id": 12211118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJdl6.png?s=128&g=1", "display_name": "MathCoolGuy99", "link": "https://stackoverflow.com/users/12211118/mathcoolguy99"}, "edited": false, "score": 0, "creation_date": 1571003287, "post_id": 58367939, "comment_id": 103086227, "body": "@MathCoolGuy99 Further, if <code>extend</code> does its replacement bidirectionally, as it does in your question, then its type can&#39;t use both <code>a</code> and <code>t</code> if you want <code>train</code> to hardcode its use."}, {"owner": {"reputation": 11, "user_id": 12211118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJdl6.png?s=128&g=1", "display_name": "MathCoolGuy99", "link": "https://stackoverflow.com/users/12211118/mathcoolguy99"}, "edited": false, "score": 0, "creation_date": 1571003742, "post_id": 58367939, "comment_id": 103086317, "body": "If <code>train</code> takes a string replacement function and a list of 2 - string tuples, then how can I make it similar to <code>extend</code> but operates on list of tuples instead?"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 11, "user_id": 12211118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJdl6.png?s=128&g=1", "display_name": "MathCoolGuy99", "link": "https://stackoverflow.com/users/12211118/mathcoolguy99"}, "edited": false, "score": 0, "creation_date": 1571003784, "post_id": 58367939, "comment_id": 103086323, "body": "@MathCoolGuy99 That&#39;s exactly what <code>foldr</code> is doing. Does my latest edit make anything clearer?"}, {"owner": {"reputation": 11, "user_id": 12211118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJdl6.png?s=128&g=1", "display_name": "MathCoolGuy99", "link": "https://stackoverflow.com/users/12211118/mathcoolguy99"}, "edited": false, "score": 0, "creation_date": 1571004112, "post_id": 58367939, "comment_id": 103086392, "body": "So in your code, <code>train</code> still takes string replacement function and a list right? And what is <code>id</code> when you tried to declare <code>improve</code>?"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 11, "user_id": 12211118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJdl6.png?s=128&g=1", "display_name": "MathCoolGuy99", "link": "https://stackoverflow.com/users/12211118/mathcoolguy99"}, "edited": false, "score": 0, "creation_date": 1571004188, "post_id": 58367939, "comment_id": 103086406, "body": "@MathCoolGuy99 Yes, <code>train</code> still takes a string replacement function and a list (as it must, due to its type). And <code>id</code> is the same as <code>(\\s-&gt;s)</code>."}, {"owner": {"reputation": 11, "user_id": 12211118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJdl6.png?s=128&g=1", "display_name": "MathCoolGuy99", "link": "https://stackoverflow.com/users/12211118/mathcoolguy99"}, "edited": false, "score": 1, "creation_date": 1571004344, "post_id": 58367939, "comment_id": 103086430, "body": "It works now! Thank you so much!! I will mark this answer as checked!"}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1571003665, "last_edit_date": 1571003665, "creation_date": 1571002074, "answer_id": 58367939, "question_id": 58367762, "link": "https://stackoverflow.com/questions/58367762/replacing-strings-with-a-list-of-tuples-of-strings/58367939#58367939", "title": "Replacing Strings with a List of Tuples of Strings", "body": "<p>You're trying to call <code>map improved</code>, but the first argument to <code>map</code> has to be a function, and <code>:t improved</code> shows you that <code>improved</code> is actually a list of functions: <code>improved :: [[Char] -&gt; [Char]]</code>. The problem is that <code>train</code> is returning a list of functions, rather than a single composed function. To fix that, change <code>map (\\(a,b) -&gt; extend fn a b)</code> to <code>foldr (\\(a,b) f -&gt; extend f a b) fn</code>.</p>\n\n<p>Also, your code is a bit unidiomatic and complex. Here's how I'd write it:</p>\n\n<pre><code>extend :: Eq a =&gt; (a, a) -&gt; (a -&gt; a) -&gt; a -&gt; a\nextend (old, new) repl str\n  | str == old = new\n  | str == new = old\n  | otherwise = repl str\n\ntrain :: Eq a =&gt; (a -&gt; a) -&gt; [(a, a)] -&gt; a -&gt; a\ntrain = foldr extend\n\nimproved :: String -&gt; String\nimproved = train id [(\"kittens\",\"puppies\"),(\"tea\",\"coffee\"),(\"Java\",\"Haskell\")]\n</code></pre>\n\n<hr>\n\n<p>Now that you edited your question to include a required type signature, there's a change you have to make: <code>extend</code> must only do its replacement unidirectionally (i.e., it can't test for <code>str == new</code> and replace it with <code>old</code>). Here's how it would look idiomatically after that:</p>\n\n<pre><code>extend :: Eq a =&gt; (a, t) -&gt; (a -&gt; t) -&gt; a -&gt; t\nextend (old, new) repl str\n  | str == old = new\n  | otherwise = repl str\n\ntrain :: Eq a =&gt; (a -&gt; t) -&gt; [(a, t)] -&gt; a -&gt; t\ntrain = foldr extend\n\nimproved :: String -&gt; String\nimproved = train id [(\"kittens\",\"puppies\"),(\"tea\",\"coffee\"),(\"Java\",\"Haskell\")]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12211118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aJdl6.png?s=128&g=1", "display_name": "MathCoolGuy99", "link": "https://stackoverflow.com/users/12211118/mathcoolguy99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 58367939, "answer_count": 1, "score": 0, "last_activity_date": 1571182997, "creation_date": 1571000617, "last_edit_date": 1571182997, "question_id": 58367762, "link": "https://stackoverflow.com/questions/58367762/replacing-strings-with-a-list-of-tuples-of-strings", "title": "Replacing Strings with a List of Tuples of Strings", "body": "<p>I want to write a function called <code>trained</code> that takes a string replacement function and a list of word pairs (two-tuples of strings).</p>\n\n<p>I have tried using <code>map</code> and lambda function but still getting some error. Any help on this problem would be much appreciated! </p>\n\n<p>Function <code>train</code> should have this type of signature: <code>train :: Eq a =&gt; (a -&gt; t) -&gt; [(a, t)] -&gt; a -&gt; t</code></p>\n\n<p>Here is some error: </p>\n\n<blockquote>\n  <p>Couldn't match expected type <code>[Char] -&gt; b'</code> <br>\n  with the actual type <code>[[Char] -&gt; [Char]]</code></p>\n</blockquote>\n\n<p><strong>Here is my code:</strong></p>\n\n<pre><code>extend repl old new = \\str -&gt; if (str == old) then new \n                              else if (str == new) then old \n                              else (repl str)\n\ntrain fn lst =  map (\\(a,b) -&gt; extend fn a b) lst\n</code></pre>\n\n<p>The function <strong>train</strong> should work out like this:</p>\n\n<pre><code>In: let improved = train (\\s-&gt;s) [(\"kittens\",\"puppies\"),\n                      (\"tea\",\"coffee\"),(\"Java\",\"Haskell\")]\n\nIn: map improved [\"my\",\"favorite\",\"things\",\"are\",\n                      \"kittens\",\"Java\",\"tea\",\"and\",\"rainbows\"]\n\nOut: [\"my\",\"favorite\",\"things\",\"are\",\"puppies\",\"Haskell\",\"coffee\",\"and\",\"rainbows\"]\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570992984, "post_id": 58366794, "comment_id": 103083940, "body": "You run a <code>IO a</code> in an <code>MonadIO m =&gt; m a</code>. For example a Yesod <code>Handler</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1570993027, "post_id": 58366794, "comment_id": 103083945, "body": "It is not possible to use it with <code>IO a -&gt; [a]</code>, since <code>[]</code> is not an instance of <code>MonadIO</code>."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570993178, "post_id": 58366794, "comment_id": 103083979, "body": "Awesome. Why the author use <code>liftIO</code> above? What is point?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570993324, "post_id": 58366794, "comment_id": 103084018, "body": "Because it looks like the <code>LengthMonad</code> (<a href=\"https://github.com/haskell/mtl/blob/master/Control/Monad/Error.hs#L129\" rel=\"nofollow noreferrer\">github.com/haskell/mtl/blob/master/Control/Monad/Error.hs#L&zwnj;&#8203;129</a>) is just a &quot;monad transformer&quot;. They aim to wrap the <code>IO</code> monad in an <code>EitherT String</code> to run with errors (that is the purpose of <code>throwError</code>). Now since this is working with an <code>EitherT String IO</code>, we can not just use <code>IO a</code>s in the <code>do</code> block. We need something to &quot;lift&quot; these to an <code>EitherT String IO</code>."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1570993345, "post_id": 58366794, "comment_id": 103084024, "body": "@zero_coding It is simply a generalisation of the <code>IO</code> monad, and that is useful in itself. But when you say &quot;what is the point&quot; you seem to be searching for some other answer, which you have not elucidated. Please explain what you mean by &quot;what is the point&quot;."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 4, "creation_date": 1570996297, "post_id": 58366794, "comment_id": 103084706, "body": "The &quot;point&quot; is that <code>putStrLn &quot;...&quot;</code> doesn&#39;t typecheck, but <code>liftIO $ putStrLn &quot;...&quot;</code> does. Are you asking why that is true?"}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571121732, "post_id": 58366794, "comment_id": 103124079, "body": "@chepner <code>putStrLn &quot;...&quot;</code> does not get typechecked?"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1571127309, "post_id": 58366794, "comment_id": 103126870, "body": "@zero_coding, &quot;does not typecheck&quot; is another way of saying &quot;fails the typechecking phase&quot;. That is, if you use <code>putStrLn</code> there without <code>liftIO</code> you will get a type error."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1571127832, "post_id": 58366794, "comment_id": 103127165, "body": "@liqui I&#39;ve got it. Thanks a lot"}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 8, "last_activity_date": 1571045124, "creation_date": 1571045124, "answer_id": 58373774, "question_id": 58366794, "link": "https://stackoverflow.com/questions/58366794/what-is-the-purpose-of-liftio/58373774#58373774", "title": "What is the purpose of liftIO?", "body": "<p><code>IO</code> operations like <code>getLine, putStrLn \"...\"</code> only work inside the <code>IO</code> monad. Using them inside any other monad will trigger a type error.</p>\n\n<p>Still, there are many monads <code>M</code> which are defined in terms of <code>IO</code> (e.g. <code>StateT Int IO</code>, and apparently your <code>LengthMonad</code> as well) and because of that they allow <code>IO</code> actions to be converted into <code>M</code>-actions, and executed as such.</p>\n\n<p>However, we need a conversion for each <code>M</code>:</p>\n\n<pre><code>convertIOintoM1 :: IO a -&gt; M1 a \nconvertIOintoM2 :: IO a -&gt; M2 a\nconvertIOintoM3 :: IO a -&gt; M3 a\n...\n</code></pre>\n\n<p>Since this is cumbersome, the library defines a typeclass <code>MonadIO</code> having such conversion function, so that all the functions above can be named <code>liftIO</code> instead.</p>\n\n<p>In practice, <code>liftIO</code> is used each time one wants to run <code>IO</code> actions in another monad, provided such monad allows for it.</p>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 1, "accepted_answer_id": 58373774, "answer_count": 1, "score": 8, "last_activity_date": 1571045124, "creation_date": 1570992919, "question_id": 58366794, "link": "https://stackoverflow.com/questions/58366794/what-is-the-purpose-of-liftio", "title": "What is the purpose of liftIO?", "body": "<p>I have the following code snippet from internet: </p>\n\n<pre><code>calculateLength :: LengthMonad Int\ncalculateLength = do\n  -- all the IO operations have to be lifted to the IO monad in the monad stack\n  liftIO $ putStrLn \"Please enter a non-empty string: \"\n  s &lt;- liftIO getLine\n  if null s\n    then throwError \"The string was empty!\"\n    else return $ length s\n</code></pre>\n\n<p>and could not understand, why the author use <code>liftIO</code>? </p>\n\n<p>What is the purpose of <code>liftIO</code>? </p>\n\n<p>It is defined as follows:</p>\n\n<pre><code>class (Monad m) =&gt; MonadIO m where\n    -- | Lift a computation from the 'IO' monad.\n    liftIO :: IO a -&gt; m a  \n</code></pre>\n\n<p>Is it possible to lift <code>IO a -&gt; [a]</code>? It looks like natural transformation.  </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1570987626, "post_id": 58365816, "comment_id": 103082472, "body": "Why do you think so? These are two quite distinct things and I&#39;m inclined to believe that they could be useful in seperate circumstances."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "reply_to_user": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1570987787, "post_id": 58365816, "comment_id": 103082513, "body": "Could you please explain the situation, when do I have to use what?"}], "answers": [{"tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 4, "last_activity_date": 1570991274, "last_edit_date": 1570991274, "creation_date": 1570990324, "answer_id": 58366425, "question_id": 58365816, "link": "https://stackoverflow.com/questions/58365816/monaderror-should-not-be-use-anymore/58366425#58366425", "title": "MonadError should not be use anymore?", "body": "<p><code>MonadError</code> and <code>Except</code> are not mutually exclusive. They are things of different kinds.</p>\n\n<p><code>MonadError</code> is a type class (i.e. an \"interface\") that defines certain operations (<code>throwError</code> and <code>catchError</code>), which may be implemented by different monads. If a function has a type signature requiring <code>MonadError</code>, it means \"I will work in any monad, as long as it implements <code>MonadError</code>, because I make use of the operations defined in it\", for example:</p>\n\n<pre><code>f :: MonadError MyErrorType m =&gt; Int -&gt; m String\n</code></pre>\n\n<p><code>Except</code>, on the other hand, is a specific monad that has a specific underlying implementation. This specific monad happens to implement the operations from <code>MonadError</code>, which means that any function that requires <code>MonadError</code> may be used in <code>Except</code>:</p>\n\n<pre><code>runExcept $ f 42  -- using the definition of `f` above\n</code></pre>\n\n<p>You could also declare your function to be used specifically in <code>Except</code>, as opposed to \"in anything that implements <code>MonadError</code>\":</p>\n\n<pre><code>g :: Int -&gt; Except MyErrorType String\n</code></pre>\n\n<p>Such function can still be used in <code>Except</code> like <code>f</code> can:</p>\n\n<pre><code>runExcept $ g 42\n</code></pre>\n\n<p>But it cannot be used in <em>other</em> monads that implement <code>MonadError</code>.</p>\n\n<p>The practical consequence of this is that if you're writing some local, small, simple program, it's ok to write all your functions in <code>Except</code>, but if you're writing a bigger system with a lot of modules, or better yet, a reusable library, you're better off writing your functions in <code>MonadError</code>, because then your consumers will have more freedom in consuming your library. In OO world this idea is known as \"<a href=\"https://en.m.wikipedia.org/wiki/Interface-based_programming\" rel=\"nofollow noreferrer\">programming to interface</a>\".</p>\n\n<p>One possible drawback of this is that the code might (not always) come out less performant, because the compiler may not be able to do enough inlining without knowing the final types of everything. In practice, however, the performance penalty is trivial in most applications. The usual maxim applies: first measure, then optimize.</p>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58366425, "answer_count": 1, "score": -1, "last_activity_date": 1570991274, "creation_date": 1570986011, "question_id": 58365816, "link": "https://stackoverflow.com/questions/58365816/monaderror-should-not-be-use-anymore", "title": "MonadError should not be use anymore?", "body": "<p>I have a question about <code>MonadError</code>, namely instead of using <code>MonadError</code>, it is better to use <a href=\"http://hackage.haskell.org/package/mtl-2.2.2/docs/Control-Monad-Except.html#t:Except\" rel=\"nofollow noreferrer\"><code>Except</code></a>?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1570985047, "post_id": 58365671, "comment_id": 103081781, "body": "THis will return a list of <code>Bool</code>s. I&#39;m not really sure what is not working. For two vectors of length <i>m</i> and <i>n</i>, it will generate a list with <i>mn</i> elements."}, {"owner": {"reputation": 43, "user_id": 1998109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afb1d22bddee0986ad3095a5da97eef?s=128&d=identicon&r=PG", "display_name": "moliverac8", "link": "https://stackoverflow.com/users/1998109/moliverac8"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570985391, "post_id": 58365671, "comment_id": 103081885, "body": "Nop, It is only adding items to the lists when x == y and I need it to add false to the list when x /= y"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570985433, "post_id": 58365671, "comment_id": 103081900, "body": "that is the case here. You can inspect that. It would only add <code>True</code>s if you wrote <code>[x == y | x &lt;- xs, y &lt;- ys, x == y]</code> (so with a condition at the right end)."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570985737, "post_id": 58365671, "comment_id": 103081986, "body": "@milverac8: are you sure your vectors contain something else than one value, and are you sure <code>vectorToFloatList</code> works correctly."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1570986056, "creation_date": 1570986056, "answer_id": 58365822, "question_id": 58365671, "link": "https://stackoverflow.com/questions/58365671/haskell-and-comprehension-lists/58365822#58365822", "title": "Haskell and comprehension lists", "body": "<blockquote>\n  <p>What I want is a list with booleans if the coordinates I'm comparing are <code>True</code> or <code>False</code>. Is it possible to do this with comprehension lists?</p>\n</blockquote>\n\n<p>You get such a list. For two <code>Vector</code>s <em>v</em> and <em>w</em> with lengths <em>m</em> and <em>n</em> respectively, you will get a list with <em>m&times;n</em> elements, such that the item <em>v<sub>i</sub></em> and <em>w<sub>j</sub></em> will be compared in the result list in the element with index <em>i&times;m + j</em>.</p>\n\n<p>If you hwever want a list of length <em>min(m, n)</em>, such that the item at index <em>i</em> checks if <em>v<sub>i</sub></em> and <em>w<sub>i</sub></em> are the same, then we can make use of <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:zip\" rel=\"nofollow noreferrer\"><strong><code>zip :: [a] -&gt; [b] -&gt; [(a, b)]</code></strong></a>:</p>\n\n<pre><code>igualdad :: Vector -&gt; Vector -&gt; [Bool]\nigualdad v1 v2 = [ x == y | (x, y) &lt;- <b>zip</b> (vectorToFloatList xs) (vectorToFloatList ys)]</code></pre>\n\n<p>or with <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:zipWith\" rel=\"nofollow noreferrer\"><strong><code>zipWith :: (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]</code></strong></a> and <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Function.html#v:on\" rel=\"nofollow noreferrer\"><strong><code>on :: (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c</code></strong></a>:</p>\n\n<pre><code>import Data.Function(on)\n\nigualdad :: Vector -&gt; Vector -&gt; [Bool]\nigualdad = on (zipWith (==)) vectorToFloatList</code></pre>\n\n<p>or we can make use of the <a href=\"http://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#parallel-list-comprehensions\" rel=\"nofollow noreferrer\"><strong><code>ParallelListComp</code></strong> extension [ghc-doc]</a> and run this with:</p>\n\n<pre><code>{-# LANGUAGE <b>ParallelListComp</b> #-}\n\nigualdad :: Vector -&gt; Vector -&gt; [Bool]\nigualdad v1 v2 = [ x == y | x &lt;- vectorToFloatList xs <b>|</b> y &lt;- vectorToFloatList ys]</code></pre>\n\n<blockquote>\n  <p>PD: I'm going to use <code>foldr (&amp;&amp;) True</code> with the list that returns igualdad.</p>\n</blockquote>\n\n<p>There exists a function for that already: that is <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:and\" rel=\"nofollow noreferrer\"><strong><code>and :: Foldable f =&gt; f Bool -&gt; Bool</code></strong></a>. If you however want to check if all the items are the same, you can just use <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:all\" rel=\"nofollow noreferrer\"><strong><code>all :: Foldable f =&gt; (a -&gt; Bool) -&gt; f a -&gt; Bool</code></strong></a> here:</p>\n\n<pre><code>import Data.Function(on)\n\nsameVec :: Vector -&gt; Vector -&gt; Bool\nsameVec = on (all (uncurry (==) .) . zip) vectorToFloatList</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 1998109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afb1d22bddee0986ad3095a5da97eef?s=128&d=identicon&r=PG", "display_name": "moliverac8", "link": "https://stackoverflow.com/users/1998109/moliverac8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570986056, "creation_date": 1570984983, "question_id": 58365671, "link": "https://stackoverflow.com/questions/58365671/haskell-and-comprehension-lists", "title": "Haskell and comprehension lists", "body": "<p>I'm writing a function that compares two vectors in haskell using comprehension lists. The thing is that I want to add booleans to my final list, but Haskell interprets this code as if x == y, add the element to the list (that's how comprehensive lists works I know). What I want is a list with booleans if the coordinates I'm comparing are true or false.\nIs it possible to do this with comprehension lists? </p>\n\n<pre><code>igualdad :: Vector -&gt; Vector -&gt; [Bool]\nigualdad v1 v2 = [ x == y | x &lt;- xs, y &lt;- ys]\n    where xs = vectorToFloatList v1\n          ys = vectorToFloatList v2\n</code></pre>\n\n<p>PD: I'm going to use foldr (&amp;&amp;) True with the list that returns igualdad, in order to get the final result that I want.\nThanks.</p>\n"}, {"tags": ["haskell", "functor"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570982618, "post_id": 58365277, "comment_id": 103081123, "body": "Because in order to render it a list, the type constraint is that it should render the elements. The instance is <code>instance Show a =&gt; Show [a]</code>."}, {"owner": {"reputation": 317, "user_id": 4594041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2db3ea5590de7376bf2b0542f438a9ba?s=128&d=identicon&r=PG&f=1", "display_name": "user4132", "link": "https://stackoverflow.com/users/4594041/user4132"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570983044, "post_id": 58365277, "comment_id": 103081239, "body": "Thanks, that makes sense. Does this mean that if I were to write a function functorExample :: [[Int]] -&gt; [[Int]] in which functorExample = (fmap.fmap) (+1), the ambiguous types f0 and a0 get resolved to valid instances i.e. [] and Int?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1570983101, "post_id": 58365277, "comment_id": 103081256, "body": "indeed, you can try <code>(fmap . fmap) (+1) [] :: [[Int]]</code>, and it will print <code>[]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1435, "user_id": 6676199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f60cb3880bf43a7c74ffeecbf996e1?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Amidon", "link": "https://stackoverflow.com/users/6676199/peter-amidon"}, "is_accepted": true, "score": 5, "last_activity_date": 1570983140, "creation_date": 1570983140, "answer_id": 58365413, "question_id": 58365277, "link": "https://stackoverflow.com/questions/58365277/why-does-functor-composition-on-an-empty-list-return-a-show-error/58365413#58365413", "title": "Why does functor composition on an empty list return a Show error?", "body": "<p>It is true that your function will always return <code>[]</code>, but typeclass dispatch (which happens at compile-time, rather than run-time) must be based on the <em>type</em> of the argument to <code>show</code>.  The <code>Show</code> instance for <code>[a]</code> requires that <code>Show a</code> also be resolved (<code>instance Show a =&gt; Show [a]</code>)---since there are many values of type <code>[a]</code> which do contain elements---and since the <em>type</em> of the list elements (all 0 of them) is ambiguous, the <code>Show</code> constraint can't be resolved.</p>\n\n<p>This might lead you to ask why <code>show []</code> for example does not have the same issue, since <code>[] :: [a]</code>.  The answer here is that GHCi has some special <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/ghci.html#extension-ExtendedDefaultRules\" rel=\"noreferrer\">Extended Default Rules</a> heuristics, which apply in certain simple cases, in order to make working at the prompt more pleasant.  If you <code>:set -XNoExtendedDefaultRules</code> you can see that <code>show []</code> will have this same behavior. In your case, since the element type of the list is <code>f0 b0</code> rather than a single type variable, the linked extended defaulting rules do not apply, and so the list element type still contains ambiguous type variables.</p>\n\n<p>You can see that this is the issue by resolving some of the type constraints yourself, say by using <code>-XTypeApplications</code>.  Even resolving the <code>Functor</code> constraint is enough to make the normal Haskell type defaulting rules apply again: <code>(fmap.(fmap @[])) (+1) []</code> does indeed print <code>[]</code> at the GHCi prompt.</p>\n"}], "owner": {"reputation": 317, "user_id": 4594041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2db3ea5590de7376bf2b0542f438a9ba?s=128&d=identicon&r=PG&f=1", "display_name": "user4132", "link": "https://stackoverflow.com/users/4594041/user4132"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58365413, "answer_count": 1, "score": 1, "last_activity_date": 1570983140, "creation_date": 1570982115, "question_id": 58365277, "link": "https://stackoverflow.com/questions/58365277/why-does-functor-composition-on-an-empty-list-return-a-show-error", "title": "Why does functor composition on an empty list return a Show error?", "body": "<p>When calling the following, GHCI returns an error:\nAmbiguous type variables \u2018f0\u2019, \u2018b0\u2019 arising from a use of \u2018print\u2019 prevents the constraint \u2018(Show (f0 b0))\u2019 from being solved.</p>\n\n<p>From what I understand, this is because the type of my Expression is (Num b, Functor f) => [f b] where f is the ambiguous type.</p>\n\n<p>However, the Functor instance of List defines fmap as map, and the definition of map ignores the function argument in case the second argument is [] to simply return []. This should mean that my expression should simply return [] regardless of how many fmap compositions I apply, and a call to show [] should go through. Why is it that I see the error then?</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>(fmap.fmap) (+1) []\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570977390, "post_id": 58364568, "comment_id": 103079811, "body": "I think you here do not need that much cases in the first place. There are basically three cases you need to write here."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1570979037, "post_id": 58364568, "comment_id": 103080207, "body": "Why is <code>(&quot;&quot;, &quot;controls&quot;)</code> and <code>(&quot;controls&quot;, &quot;&quot;)</code> not in the list of the sample result?"}, {"owner": {"reputation": 13, "user_id": 12205639, "user_type": "registered", "profile_image": "https://graph.facebook.com/2376409205932223/picture?type=large", "display_name": "Shahrukh Nawaz", "link": "https://stackoverflow.com/users/12205639/shahrukh-nawaz"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570979345, "post_id": 58364568, "comment_id": 103080270, "body": "Tbh I dont know. This is my assignment, which is due in almost an hour and Im barely halfway through it. Functional programming isnt my best suit, I&#39;ve been seeing a lot tutorials and videos but still cant get my head around Haskell."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570979393, "post_id": 58364568, "comment_id": 103080284, "body": "hint: take a look at <code>concat</code>, <code>zipWith</code>, <code>inits</code> and <code>tails</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12205639, "user_type": "registered", "profile_image": "https://graph.facebook.com/2376409205932223/picture?type=large", "display_name": "Shahrukh Nawaz", "link": "https://stackoverflow.com/users/12205639/shahrukh-nawaz"}, "edited": false, "score": 0, "creation_date": 1570978490, "post_id": 58364656, "comment_id": 103080091, "body": "I&#39;m grateful for the answer sir but I need to make possible combinations of given set of strings like mergers [&quot;co&quot;,&quot;nt&quot;,&quot;ro&quot;,&quot;ls&quot;]  should give  [(&quot;co&quot;,&quot;ntrols&quot;),(&quot;cont&quot;,&quot;rols&quot;),(&quot;contro&quot;,&quot;ls&quot;)] while the code you gave produces the following output [(&quot;co&quot;,&quot;nt&quot;),(&quot;ro&quot;,&quot;ls&quot;)]."}, {"owner": {"reputation": 13, "user_id": 12205639, "user_type": "registered", "profile_image": "https://graph.facebook.com/2376409205932223/picture?type=large", "display_name": "Shahrukh Nawaz", "link": "https://stackoverflow.com/users/12205639/shahrukh-nawaz"}, "edited": false, "score": 0, "creation_date": 1570998139, "post_id": 58364656, "comment_id": 103085186, "body": "mergers :: [String] -&gt; [(String, String)] mergers [] = [] mergers (x:xs)     | xs==[] =[] mergers (x:y) = [( filter (/=&#39; &#39;) (unwords [x]) , filter (/=&#39; &#39;) (unwords y))] ++ helper [x] y     where helper left right                         | tail right == [] = []                         | otherwise = [ (filter (/=&#39; &#39;) (unwords left ++ head right) , filter (/=&#39; &#39;)(unwords (tail right))) ] ++ helper ( left ++ [head right]) (tail right)"}, {"owner": {"reputation": 13, "user_id": 12205639, "user_type": "registered", "profile_image": "https://graph.facebook.com/2376409205932223/picture?type=large", "display_name": "Shahrukh Nawaz", "link": "https://stackoverflow.com/users/12205639/shahrukh-nawaz"}, "edited": false, "score": 0, "creation_date": 1570998186, "post_id": 58364656, "comment_id": 103085203, "body": "Took me quite a few hours, but finally I made it for String Type atleast. I am really grateful the help and inspiration. Might be posting similar questions sir, please do keep a lookout for me. Many respects, Sir."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 13, "user_id": 12205639, "user_type": "registered", "profile_image": "https://graph.facebook.com/2376409205932223/picture?type=large", "display_name": "Shahrukh Nawaz", "link": "https://stackoverflow.com/users/12205639/shahrukh-nawaz"}, "edited": false, "score": 0, "creation_date": 1570998252, "post_id": 58364656, "comment_id": 103085217, "body": "@ShahrukhNawaz: you can slightly improve it by replacing <code>filter (&#47;= &#39; &#39;) (unwords ...) with </code>concat ...`, but I think it is indeed, more or less correct :)."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1570998683, "last_edit_date": 1570998683, "creation_date": 1570977919, "answer_id": 58364656, "question_id": 58364568, "link": "https://stackoverflow.com/questions/58364568/how-to-handle-the-last-case/58364656#58364656", "title": "How to handle the last case?", "body": "<p>The given function will not suffice. Especially since you need to keep track of the items that have passed. We thus probably should use a helper function that keeps track of the items obtained thus far. These items are then put in a concatenated form in the first tuple.</p>\n\n<p>We thus can work with a helper function, like:</p>\n\n<pre><code>mergers :: [[a]] -&gt; [([a], [a])]\nmergers [] = []\nmergers (x:xs) = helper [x] xs\n    where helper left right = &hellip;</code></pre>\n\n<p>Now in the helper function, if the right list is empty, than we can stop to produce a list. If on the other hand the right list is not-empty, we can emit a 2-tuple where we concatenate both the left and the right in the tuple, and add the first item of the <code>right</code> list to the <code>left</code> if we recurse.</p>\n\n<p><strong>EDIT</strong>: since you <a href=\"https://stackoverflow.com/questions/58364568/how-to-handle-the-last-case/58364656?noredirect=1#comment103085186_58364656\">managed to solve it</a>, we can here yield the items with:</p>\n\n<pre><code>mergers :: [[a]] -&gt; [([a], [a])]\nmergers [] = []\nmergers (x:xs) = helper [x] xs\n    where helper _ [] = []\n          helper la ra@(r:rs) = (concat la, concat ra) : helper (la ++ [r]) rs</code></pre>\n\n<p>This then yields the expected output:</p>\n\n<pre><code>Prelude&gt; mergers [\"co\",\"nt\",\"ro\",\"ls\"]\n[(\"co\",\"ntrols\"),(\"cont\",\"rols\"),(\"contro\",\"ls\")]\nPrelude&gt;  mergers [\"co\",\"nt\"]\n[(\"co\",\"nt\")]\nPrelude&gt; mergers [\"co\"]\n[]\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12205639, "user_type": "registered", "profile_image": "https://graph.facebook.com/2376409205932223/picture?type=large", "display_name": "Shahrukh Nawaz", "link": "https://stackoverflow.com/users/12205639/shahrukh-nawaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 58364656, "answer_count": 1, "score": 1, "last_activity_date": 1570998683, "creation_date": 1570977258, "last_edit_date": 1570980495, "question_id": 58364568, "link": "https://stackoverflow.com/questions/58364568/how-to-handle-the-last-case", "title": "How to handle the last case?", "body": "<blockquote>\n  <p>Define\u00a0a\u00a0helper\u00a0function\u00a0mergers\u00a0that\u00a0given\u00a0all\u00a0parts\u00a0of\u00a0a\u00a0word,\u00a0produces\u00a0a\u00a0pair\u00a0of\u00a0all\u00a0possible\u00a0ways\u00a0to\u00a0break\u00a0up\u00a0the\u00a0word.\u00a0 This\u00a0recursively.\u00a0The\u00a0<code>concat</code>\u00a0function\u00a0might\u00a0help\u00a0you.\u00a0 \u00a0 </p>\n</blockquote>\n\n<p>I can seem to use map and concat to solve this problem. I've solved the first 3 cases which were much easier but cant solve the last one.</p>\n\n<pre><code>mergers :: [String] -&gt;[(String,String)]\nmergers [] = []\nmergers (x:xs)\n        | xs ==[] = []\nmergers (x:xs:xy)\n        | xy ==[] = [(x,xs)]\nmergers (x:xs:xy:_) -&gt; \n</code></pre>\n\n<p>The function:\n<code>mergers\u00a0[\"co\",\"nt\",\"ro\",\"ls\"]</code>\nshould produce all the possible combination of the given strings like </p>\n\n<pre><code>[(\"co\",\"ntrols\"),(\"cont\",\"rols\"),(\"contro\",\"ls\")]\u00a0\n</code></pre>\n\n<p>\u00a0\n<code>mergers\u00a0[\"co\",\"nt\"]</code>\nshould give </p>\n\n<pre><code>[(\"co\",\"nt\")]\u00a0\u00a0 \n</code></pre>\n\n<p><code>mergers\u00a0[\"co\"]</code>\nshould return an empty list </p>\n\n<pre><code>[]\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570974732, "post_id": 58364190, "comment_id": 103079280, "body": "remove the <code>return</code>. In Haskell there is no <code>return</code> keyword, there is only a <code>return</code> function. Furthermore the <code>$</code> results in parsing it as `length (nub cipher == length cipher), so you should use brackets."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 12209662, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa9GXoGKFuZNsdDoUpFdfzSQtMrrRNv7J4MiJ9=k-s128", "display_name": "G TTT", "link": "https://stackoverflow.com/users/12209662/g-ttt"}, "edited": false, "score": 0, "creation_date": 1570977473, "post_id": 58364228, "comment_id": 103079832, "body": "Q1 The reason is that I did search and found somebody used return True in Haskell..... Thank you so much for a more reliable answer."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 47, "user_id": 12209662, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa9GXoGKFuZNsdDoUpFdfzSQtMrrRNv7J4MiJ9=k-s128", "display_name": "G TTT", "link": "https://stackoverflow.com/users/12209662/g-ttt"}, "edited": false, "score": 1, "creation_date": 1570977571, "post_id": 58364228, "comment_id": 103079868, "body": "@GTTT: well for monadic computations, like <code>IO</code>, <code>Maybe</code>, etc. one can indeed sometimes use <code>return</code>. But not for non-monadic ones, like the one here."}, {"owner": {"reputation": 47, "user_id": 12209662, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa9GXoGKFuZNsdDoUpFdfzSQtMrrRNv7J4MiJ9=k-s128", "display_name": "G TTT", "link": "https://stackoverflow.com/users/12209662/g-ttt"}, "edited": false, "score": 0, "creation_date": 1570977583, "post_id": 58364228, "comment_id": 103079873, "body": "Q2 I didnt fully understand the $ operator, but now because of your explanations I would be more confident of that! thx a lot"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 47, "user_id": 12209662, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa9GXoGKFuZNsdDoUpFdfzSQtMrrRNv7J4MiJ9=k-s128", "display_name": "G TTT", "link": "https://stackoverflow.com/users/12209662/g-ttt"}, "edited": false, "score": 0, "creation_date": 1570977671, "post_id": 58364228, "comment_id": 103079901, "body": "@GTTT: <code>($)</code> is an operator that has very low precedence (<a href=\"https://www.haskell.org/onlinereport/decls.html\" rel=\"nofollow noreferrer\">haskell.org/onlinereport/decls.html</a>), it is basically used to group the part at the left, and the part at the right, and make a function application. So <code>... $ ...</code>, is nearly always equivalent to <code>(...) (...)</code> (but without brackets)."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1570974947, "creation_date": 1570974947, "answer_id": 58364228, "question_id": 58364190, "link": "https://stackoverflow.com/questions/58364190/haskell-function-parse-error-at-the-beginning/58364228#58364228", "title": "Haskell: function parse error at the beginning", "body": "<p>There are two errors here:</p>\n\n<ol>\n<li>you use <code>return</code>. In Haskell there is <em>no</em> <code>return</code> <em>keyword</em>, there is a <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:return\" rel=\"nofollow noreferrer\"><strong><code>return :: Monad a =&gt; a -&gt; m a</code></strong></a> function, but that works differently; and</li>\n<li>the <code>$</code> results in the fact that <code>length $ nub cipher == length cipher</code> is parsed as <code>length (nub cipher == length cipher)</code>, and that does not satisfy the type constraints, since <code>nub cipher</code> returns a <code>[Char]</code>, whereas <code>length cipher</code>, will return an <code>Int</code>.</li>\n</ol>\n\n<p>We do not need <code>return True</code>, or <code>True</code> in the first place here, since we can just return the outcome of the condition we check. We can furthermore use parenthesis to write a correct expression:</p>\n\n<pre><code>validateCipher :: [Char] -&gt; Bool\nvalidateCipher cipher = length <b>(</b>nub cipher<b>)</b> == length cipher</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 12209662, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAa9GXoGKFuZNsdDoUpFdfzSQtMrrRNv7J4MiJ9=k-s128", "display_name": "G TTT", "link": "https://stackoverflow.com/users/12209662/g-ttt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 58364228, "answer_count": 1, "score": 1, "last_activity_date": 1570974947, "creation_date": 1570974612, "question_id": 58364190, "link": "https://stackoverflow.com/questions/58364190/haskell-function-parse-error-at-the-beginning", "title": "Haskell: function parse error at the beginning", "body": "<p>I'm a beginner in haskell and trying to do a cipher validate function. </p>\n\n<pre><code> validateCipher :: [Char] -&gt; Bool\n validateCipher cipher =\n       if length $ nub cipher == length cipher  \n        then return True\n        else return False\n</code></pre>\n\n<p>When I run it through ghci, it just told me: <strong>error: parse error on input \u2018validateCipher\u2019</strong>.\nNot sure what is going wrong, should I add Eq or any stuff(I don't quite sure what does it do either)?</p>\n"}, {"tags": ["string", "haskell", "numbers"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570973913, "post_id": 58364095, "comment_id": 103079096, "body": "Yes, you can work with the <code>Text.Printf</code> module (<a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Printf.html\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.12.0.0/docs/Text-Printf.&zwnj;&#8203;html</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1570974043, "creation_date": 1570974043, "answer_id": 58364120, "question_id": 58364095, "link": "https://stackoverflow.com/questions/58364095/haskell-string-formattation-as-in-c/58364120#58364120", "title": "Haskell String formattation as in C", "body": "<p>You can use the <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Printf.html\" rel=\"nofollow noreferrer\"><strong><code>Text.Printf</code></strong> module</a>, which is part of the <code>base</code> package, so it is (normally) already installed. This module is documented as:</p>\n\n<blockquote>\n  <p>A <strong>C printf(3)-like formatter</strong>. This version has been extended by Bart Massey as per the recommendations of John Meacham and Simon Marlow.</p>\n</blockquote>\n\n<p>We can make use of the <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Printf.html#v:printf\" rel=\"nofollow noreferrer\"><strong><code>printf</code></strong> function</a>, for example:</p>\n\n<pre><code>Prelude&gt; import Text.Printf\nPrelude Text.Printf&gt; number = 3.1415926\nPrelude Text.Printf&gt; printf \"%.2f\\n\" number\n3.14\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 11972131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ftpuGrBsu5M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rDLImau73Ng1duuAS9ooewP7mmJw/mo/photo.jpg?sz=128", "display_name": "Lucas Cruz dos Reis", "link": "https://stackoverflow.com/users/11972131/lucas-cruz-dos-reis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 58364120, "answer_count": 1, "score": 1, "last_activity_date": 1570974043, "creation_date": 1570973825, "question_id": 58364095, "link": "https://stackoverflow.com/questions/58364095/haskell-string-formattation-as-in-c", "title": "Haskell String formattation as in C", "body": "<p>Is it possible to manipulate strings to output just as it is possible in C, I mean:</p>\n\n<blockquote>\n  <p>printf(\"%.2f\", number);</p>\n</blockquote>\n\n<p>is it possible to do the same formating in Haskell?</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "is_accepted": false, "score": 2, "last_activity_date": 1570976726, "last_edit_date": 1570976726, "creation_date": 1570974487, "answer_id": 58364169, "question_id": 58363868, "link": "https://stackoverflow.com/questions/58363868/what-is-a-natural-transformation-in-haskell/58364169#58364169", "title": "What is a natural transformation in haskell?", "body": "<p>Awesome question. I know of no source on the Internet that would explain this accessibly. I am not\nsure I can explain it accessibly either. But it is, in essence, not even simple \u2014 it is trivial.\nSo brace yourself.</p>\n\n<p>&nbsp;</p>\n\n<h2>Disclaimer</h2>\n\n<p>I am not a guru, so lend awhile for the elders to destroy this answer before believing anything I say.</p>\n\n<p>&nbsp;</p>\n\n<h2>Theory</h2>\n\n<p>This is my favourite picture from <a href=\"https://en.wikipedia.org/wiki/Categories_for_the_Working_Mathematician\" rel=\"nofollow noreferrer\">Mac Lane's tome</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/APXR3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/APXR3.png\" alt=\"Diagram of a natural transformation.\"></a></p>\n\n<p>It is pointless to explain in words. You need to stare at it for a while and eventually see how it\ntells you something about the example I presently provide. You can also <a href=\"https://en.wikipedia.org/wiki/Natural_transformation\" rel=\"nofollow noreferrer\">read some\nexplanations</a> <a href=\"https://ncatlab.org/nlab/show/natural+transformation\" rel=\"nofollow noreferrer\">on the Internet</a>.</p>\n\n<p>&nbsp;</p>\n\n<h2>Practice</h2>\n\n<p>First we will define some types. They are in essence the same as the usual <code>[a]</code>, but <code>Stream</code> is\nalways infinite, and <code>Vector</code> has exactly some prescribed length.</p>\n\n<pre><code>data Stream a = a :... Stream a\n\ninstance Functor Stream where\n    fmap f (x :... xs) = f x :... fmap f xs\n\ndata Vector (n :: Nat) a = a ::: Vector (n - 1) a | End deriving (Show, Eq)\ninfixr 4 :::\n\ninstance Functor (Vector n) where\n    fmap f (x ::: xs) = f x ::: fmap f xs\n    fmap f End = End\n</code></pre>\n\n<p>Now we will create a family of functions <code>take_</code> that work in the same way as the <code>Prelude.take</code>,\nbut only as our more refined types allow. Particularly, we will not be providing a run-time value\nof <code>n</code>, but a compile time type level annotation <code>n</code>.</p>\n\n<pre><code>class Take (n :: Nat) where take_ :: Stream a -&gt; Vector n a\ninstance Take 0       where take_ _ = End\ninstance {-# overlappable #-} ((m - 1) ~ n, Take n) =&gt; Take m\n    where take_ (x :... xs) = x ::: take_ @n xs\n</code></pre>\n\n<p>Let us also have some example values we can use to check if anything at all works. Here I define\nthe stream of natural numbers from 0 to infinity:</p>\n\n<pre><code>n :: Stream Integer\nn = n_i 0\n\nn_i :: Integer -&gt; Stream Integer\nn_i x = x :... n_i (x + 1)\n</code></pre>\n\n<p>We could not possibly observe an infinite stream, but with the <code>take_</code> function we have we can\ntake a look at an arbitrary prefix thereof. See:</p>\n\n<pre><code>\u03bb :set -XDataKinds\n\u03bb :set -XTypeApplications\n\u03bb take_ @3 n\n0 ::: (1 ::: (2 ::: End))\n</code></pre>\n\n<p>It really is a natural transformation. Compare this example to Mac Lane's diagram:</p>\n\n<pre><code>\u03bb take_ @10 . fmap (^2) $ n\n0 ::: (1 ::: (4 ::: (9 ::: (16 ::: (25 ::: (36 ::: (49 ::: (64 ::: (81 ::: End)))))))))\n\u03bb fmap (^2) . take_ @10 $ n\n0 ::: (1 ::: (4 ::: (9 ::: (16 ::: (25 ::: (36 ::: (49 ::: (64 ::: (81 ::: End)))))))))\n</code></pre>\n\n<p>Can you see how <code>(^2)</code> is <code>f</code>, <code>fmap (^2)</code> is either <code>S f</code> or <code>T f</code>, and <code>take_</code> is <code>\u03c4</code>?</p>\n\n<p>&nbsp;</p>\n\n<h2>Theory, revisited</h2>\n\n<p>As the elders pointed out in their answers, in Haskell, thanks to the awesome parametric\npolymorphism we enjoy, you get some guarantees for free. Specifically, any parametrically\npolymorphic transformation mapping between two lawful functors is natural. It is easy to believe,\nbut involved to prove. Here is <a href=\"https://bartoszmilewski.com/2014/09/22/parametricity-money-for-nothing-and-theorems-for-free/\" rel=\"nofollow noreferrer\">one approach</a> to this topic.</p>\n\n<p>Notice also that a function that is not parametrically polymorphic \u2014 be it a monomorphic function\nor a class method \u2014 may be a transformation that is not natural. Example:</p>\n\n<pre><code>class Break (n :: Nat) a where break_ :: Stream a -&gt; Vector n a\ninstance Break 0 Integer where break_ _ = End\ninstance {-# overlappable #-} ((m - 1) ~ n, Break n Integer) =&gt; Break m Integer\n    where break_ (x :... xs) = if even x then x ::: break_ @n xs else (x + 1) ::: break_ @n xs\n</code></pre>\n\n<p>It really does break the law. Compare with the previous example:</p>\n\n<pre><code>\u03bb break_ @10 . fmap (^2) $ n\n0 ::: (2 ::: (4 ::: (10 ::: (16 ::: (26 ::: (36 ::: (50 ::: (64 ::: (82 ::: End)))))))))\n\u03bb fmap (^2) . break_ @10 $ n\n0 ::: (4 ::: (4 ::: (16 ::: (16 ::: (36 ::: (36 ::: (64 ::: (64 ::: (100 ::: End)))))))))\n</code></pre>\n\n<p>The types of <code>take_</code> and <code>break_</code> have distinct constraints, and that is your telltale:</p>\n\n<pre><code>\u03bb :t take_\ntake_ :: Take n =&gt; Stream a -&gt; Vector n a\n\u03bb :t break_\nbreak_ :: Break n a =&gt; Stream a -&gt; Vector n a\n</code></pre>\n\n<p>\u2014 See that <code>a</code> in <code>break_</code>'s constraint? That means the free theorem does not hold, and <code>break_</code>\nmay not be natural.</p>\n"}, {"comments": [{"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1570981742, "post_id": 58364172, "comment_id": 103080884, "body": "Why is the transformation from <code>IO a</code> to <code>Maybe a</code> is not possible?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1570987867, "post_id": 58364172, "comment_id": 103082543, "body": "One issue I have with this answer: I think &quot;polymorphic function&quot; is not correct; it should something more like &quot;mapping from one functor to another&quot;. Also, while in category theory a natural transformation is by definition a mapping of one functor to another, I don&#39;t know if that requirement really carries over to <code>~&gt;</code> as defined."}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1570988142, "post_id": 58364172, "comment_id": 103082619, "body": "An <code>IO</code> is also a functor, but why is the transformation <code>IO</code> a to <code>Maybe a</code> is not possible?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 1, "creation_date": 1570988183, "post_id": 58364172, "comment_id": 103082633, "body": "That&#39;s a restriction on the Haskell implementation of <code>~&gt;</code> (due to the implementation of <code>IO</code> itself) rather than a restriction on natural transformations in general. In this sense, <code>~&gt;</code> is a partial &quot;function&quot; of type constructors that represents <i>most</i> possible natural transformations."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 8, "last_activity_date": 1594993778, "last_edit_date": 1594993778, "creation_date": 1570974496, "answer_id": 58364172, "question_id": 58363868, "link": "https://stackoverflow.com/questions/58363868/what-is-a-natural-transformation-in-haskell/58364172#58364172", "title": "What is a natural transformation in haskell?", "body": "<p>A natural transformation, without getting into the category theory behind it, is really just a polymorphic function.</p>\n<pre><code>Prelude&gt; :set -XRankNTypes\nPrelude&gt; :set -XTypeOperators\nPrelude&gt; type (~&gt;) f g = forall x. f x -&gt; g x\n</code></pre>\n<p>The <code>~&gt;</code> operator maps a type constructor to another type constructor, in such a way that it works for <em>any</em> given argument to the first type constructor. The <code>TypeOperator</code> extension is what lets us use <code>~&gt;</code> instead of a name like <code>NatTrans</code>; the <code>RankNTypes</code> is what lets us use <code>forall</code> in the definition so that the caller can choose which type <code>f</code> and <code>g</code> will be applied to.</p>\n<p>Here is an example of a natural transformation from <code>Maybe</code> to <code>List</code>, which takes a <code>Maybe a</code> for <em>any</em> type <code>a</code>, and produces an equivalent list (by returning either an empty list or the wrapped value as a singleton list).</p>\n<pre><code>Prelude&gt; :{\nPrelude| m2l :: Maybe ~&gt; [] -- Maybe a -&gt; [a]\nPrelude| m2l Nothing = []\nPrelude| m2l (Just x) = [x]\nPrelude| :}\nPrelude&gt; m2l Nothing\n[]\nPrelude&gt; m2l (Just 3)\n[3]\nPrelude&gt; m2l (Just 'c')\n&quot;c&quot;\n</code></pre>\n<p>An &quot;inverse&quot; would be <code>l2m :: [] ~&gt; Maybe</code>, with <code>l2m [] = Nothing</code> and <code>l2m (x:_) = Just x</code>. ( I put inverse in quotes because <code>m2l (l2m [1,2,3]) /= [1,2,3]</code>)</p>\n<p>Nothing prevents you from using <code>IO</code> as either of the type constructors (although if <code>IO</code> is on the left, it must be on the right as well).</p>\n<pre><code>foo :: IO ~&gt; IO\nfoo a = putStrLn &quot;hi&quot; &gt;&gt; a\n</code></pre>\n<p>Then</p>\n<pre><code>&gt; foo (putStrLn &quot;foo&quot;)\nhi\nfoo\n&gt; foo (return 3)\nhi\n3\n</code></pre>\n<p>Another example would be to view <code>length</code> as a natural transformation from <code>[]</code> to <code>Const Int</code> (adapted from <a href=\"https://bartoszmilewski.com/2015/04/07/natural-transformations/\" rel=\"nofollow noreferrer\">https://bartoszmilewski.com/2015/04/07/natural-transformations/</a>, which I highly recommend reading):</p>\n<pre><code>-- Isomorphic to builtin length, as Const Int is isomorphic to Int\n-- Requires importing Data.Functor.Const\nlength' :: [] ~&gt; Const Int\nlength' [] = Const 0\nlength' (x:xs) = Const (1 + getConst (length' xs))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1570975282, "post_id": 58364175, "comment_id": 103079406, "body": "\u201cYou can&#39;t write <code>[a] -&gt; IO a</code> or <code>Maybe a -&gt; IO a</code> if you want these to be total functions.\u201d Actually that&#39;s a bit debatable. I&#39;d say <code>const exitSuccess</code> <i>is</i> a total function, and is trivially a natural transformation."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1570979635, "post_id": 58364175, "comment_id": 103080359, "body": "@leftaroundabout I completely agree -- that&#39;s a bit of a stretch. Even raising an exception or doing <code>forever (print 5)</code> could be considered &quot;total&quot; in the context of IO. Still, the naturality law in such case is not that useful since we would actually have <code>f = fmap anything . f</code>, since there is no value of type <code>a</code> involved."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1570979763, "post_id": 58364175, "comment_id": 103080394, "body": "Ok, <code>\\case {[] -&gt; exitSuccess; (a:_) -&gt; return a}</code>."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 3, "last_activity_date": 1570974514, "creation_date": 1570974514, "answer_id": 58364175, "question_id": 58363868, "link": "https://stackoverflow.com/questions/58363868/what-is-a-natural-transformation-in-haskell/58364175#58364175", "title": "What is a natural transformation in haskell?", "body": "<p>With IO you can write a natural transformation, e.g.</p>\n\n<pre><code>foo :: IO a -&gt; IO a\nfoo act = act &gt;&gt; putStrLn \"hello\" &gt;&gt; act\n</code></pre>\n\n<p>You can't write <code>[a] -&gt; IO a</code> or <code>Maybe a -&gt; IO a</code> if you want these to be total functions.\nYou can write <code>Identity a -&gt; IO a</code> and <code>(s,a) -&gt; IO a</code>.</p>\n\n<p>There is no intrinsic \"purpose\" for a natural transformation, it's just a definition. It simply happens that in Haskell, every function <code>f :: forall a . F a -&gt; G a</code> where <code>G</code> and <code>F</code> are functors enjoy the naturality property</p>\n\n<pre><code>f . fmap g = fmap g . f\n</code></pre>\n\n<p>which is sometimes called the \"free theorem\" associated to <code>f</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 5, "last_activity_date": 1570974982, "last_edit_date": 1570974982, "creation_date": 1570974638, "answer_id": 58364196, "question_id": 58363868, "link": "https://stackoverflow.com/questions/58363868/what-is-a-natural-transformation-in-haskell/58364196#58364196", "title": "What is a natural transformation in haskell?", "body": "<p>It's useful to be explicit here: <em>a natural transformation is a function of a signature</em></p>\n\n<pre><code>\u03b7 :: \u2200 a . \u03a6 a -&gt; \u03a8 a\n</code></pre>\n\n<p>where <code>\u03a6</code> and <code>\u03a8</code> are functors. The <code>\u2200</code> is of course implied in Haskell, but that really is the crucial thing about natural transformations. That, and the commutative diagram</p>\n\n<p><a href=\"https://wiki.haskell.org/File:Natural_transformation.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XFuL4m.png\" alt=\"Commutative diagram for natural transformation\"></a></p>\n\n<p>i.e. in Haskell,</p>\n\n<pre><code>(fmap f :: \u03a8 x -&gt; \u03a8 y) . (\u03b7 :: \u03a6 x -&gt; \u03a8 x)\n           \u2261 (\u03b7 :: \u03a6 y -&gt; \u03a8 y) . (fmap f :: \u03a6 x -&gt; \u03a6 y)\n</code></pre>\n\n<p>or short, <code>fmap f . \u03b7 \u2261 \u03b7 . fmap f</code>. (But note well that both <code>\u03b7</code> have different type here!)</p>\n\n<blockquote>\n  <p>For example, I could transform:<pre>Maybe a ~> List a</pre></p>\n</blockquote>\n\n<p>Mm, yyyea...ish. Again, be explicit what you mean. Concretely, the following is a natural transformation from <code>Maybe</code> to <code>[]</code> (it is <em>not</em> a natural transformation from <code>Maybe a</code> to <code>[a]</code>, that wouldn't make sense):</p>\n\n<pre><code>maybeToList :: Maybe a -&gt; [a]\nmaybeToList Nothing = []\nmaybeToList (Just a) = [a]\n</code></pre>\n\n<p>but it's not the only such transformation. In fact there are \u2115 many such  transformations, such as</p>\n\n<pre><code>maybeToList9 :: Maybe a -&gt; [a]\nmaybeToList9 Nothing = []\nmaybeToList9 (Just a) = [a,a,a,a,a,a,a,a,a]\n</code></pre>\n\n<blockquote>\n  <p>What about <code>IO</code>, it is impossible to do natural transformation right?</p>\n</blockquote>\n\n<p>That's possible as well. For instance, here's a natural transformation from <code>NonEmpty</code> to <code>IO</code>:</p>\n\n<pre><code>import qualified Data.List.NonEmpty as NE\nimport System.Exit (die)\n\nselectElem :: NonEmpty a -&gt; IO a\nselectElem l = do\n   let len = NE.length l\n   putStrLn $ \"Which element? (Must be &lt;\"++show len++\")\"\n   i &lt;- readLine\n   if i&lt;len then die \"Index too big!\"\n            else return $ l NE.! i\n</code></pre>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 58364172, "answer_count": 4, "score": 9, "last_activity_date": 1594993778, "creation_date": 1570972085, "last_edit_date": 1570981759, "question_id": 58363868, "link": "https://stackoverflow.com/questions/58363868/what-is-a-natural-transformation-in-haskell", "title": "What is a natural transformation in haskell?", "body": "<p>I would like to know, what is natural transformation in Haskell. \nThe natural transformation is described with the following signature:  </p>\n\n<pre><code>F[a] ~&gt; G[a]\n</code></pre>\n\n<p>For example, I could transform:</p>\n\n<pre><code>Maybe a ~&gt; List a\n</code></pre>\n\n<p>Right? </p>\n\n<p>What about <code>IO</code>, it is impossible to do natural transformation right?<br>\nWhat is the purpose of the natural transformation?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570970631, "post_id": 58363681, "comment_id": 103078380, "body": "With explicit recursion. Try to come up with a base case, and a recursive case. Try to split the problem in smaller parts first. For example how would you split a list in two lists with the first list containing <code>3</code> elements, and the other list the remaining ones?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1570970776, "post_id": 58363681, "comment_id": 103078404, "body": "The alternative to explicit recursion is a fold (essentially any recursive list function can be implemented as a fold - I don&#39;t know if that&#39;s strictly true but certainly the vast majority can), but that likely doesn&#39;t offer any real improvement over explicit recursion here."}, {"owner": {"reputation": 200, "user_id": 12174294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5a9f269ee5f6948c98584fc17a9556?s=128&d=identicon&r=PG&f=1", "display_name": "Ramux05", "link": "https://stackoverflow.com/users/12174294/ramux05"}, "edited": false, "score": 1, "creation_date": 1570971557, "post_id": 58363681, "comment_id": 103078585, "body": "I&#39;ve been able to make this: <code>subLists :: Int -&gt; [Int] -&gt; [[Int]]                                               subLists 0 _ = []                                               subLists _ [] = []                                              subLists n l = take n l : subLists (n) (drop n l)</code>  It works but is there a better way to implement it?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570971810, "post_id": 58363681, "comment_id": 103078628, "body": "@Ramux05: you can combine <code>take</code> and <code>drop</code>, and thus save some cycles, but this is indeed correct :)"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 3, "last_activity_date": 1570973762, "last_edit_date": 1570973762, "creation_date": 1570971149, "answer_id": 58363748, "question_id": 58363681, "link": "https://stackoverflow.com/questions/58363681/subdivide-a-list-in-haskell-without-importing-data-list-split/58363748#58363748", "title": "Subdivide a list in Haskell? (Without importing Data.List.Split)", "body": "<p>Usually when you do not how to start. It pays off to try to find smaller subproblems that can help you solve the larger problem.</p>\n\n<p>One of those subproblems might be given a list and an integer <em>n</em>, to split the list in two sublists, where the first sublist takes the first <em>n</em> items, and the second list is the list of the remaining elements. Something like:</p>\n\n<pre><code>splitAt :: Int -&gt; [a] -&gt; ([a], [a])\nsplitAt n xs = &hellip;</code></pre>\n\n<p>Furthermore using explicit recursion is a good idea when you want to reason about the algorithm. <a href=\"https://stackoverflow.com/questions/58363681/subdivide-a-list-in-haskell-without-importing-data-list-split#comment103078404_58363681\">@RobinZigmond</a> is correct if he says that a lot of list processing can be done with fold functions. But I think for now it might be better to solve the problem with explicit recursion.</p>\n\n<p>A lot of list processing has the empty list as base-case, and the non-empty list as a recursive case. We thus can implement something along the lines of:</p>\n\n<pre><code>splitN :: Int -&gt; [a] -&gt; [[a]]\nsplitN _ [] = &hellip;\nsplitN n xs = &hellip;</code></pre>\n\n<p>Here the second line is a recursive case, and we thus implement <code>splitN</code> in terms of itself. I here have given a \"skeleton\" of how you can implement it. I leave it as an exercise to fill in the missing items (<code>&hellip;</code>).</p>\n"}], "owner": {"reputation": 200, "user_id": 12174294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5a9f269ee5f6948c98584fc17a9556?s=128&d=identicon&r=PG&f=1", "display_name": "Ramux05", "link": "https://stackoverflow.com/users/12174294/ramux05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570973762, "creation_date": 1570970581, "question_id": 58363681, "link": "https://stackoverflow.com/questions/58363681/subdivide-a-list-in-haskell-without-importing-data-list-split", "title": "Subdivide a list in Haskell? (Without importing Data.List.Split)", "body": "<p>I'm working on an assignment and I have to create a function that should work like this:\n<code>[1,2,3,4,5,6,7,8,9] 3 -&gt;[[1,2,3],[4,5,6],[7,8,9]]</code> the problem is that I'm not sure if I am allowed to import libraries to complete the assignment. Can anyone help me figure out a way to do this without using <code>Import Data.List.Split</code>?</p>\n\n<p>I'm fairly new to Haskell so I don't even know where I should start.</p>\n"}, {"tags": ["haskell", "empty-list", "ord"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1570955197, "post_id": 58361666, "comment_id": 103075253, "body": "Well you wrote <code>[(a,b)]</code> as pattern. This means it will only match for lists that contain exactly <i>one</i> element."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 5608517, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9eed034d912be0a2c2ef78e9b37500d2?s=128&d=identicon&r=PG&f=1", "display_name": "Noopty", "link": "https://stackoverflow.com/users/5608517/noopty"}, "edited": false, "score": 1, "creation_date": 1570962730, "post_id": 58361849, "comment_id": 103076730, "body": "thank you very much your explanation was most helpful, I totally misunderstood the concept of using variables in these functions. Thanks."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1570955561, "creation_date": 1570955561, "answer_id": 58361849, "question_id": 58361666, "link": "https://stackoverflow.com/questions/58361666/using-ord-to-create-and-compare-empty-lists/58361849#58361849", "title": "Using Ord to create and compare empty lists", "body": "<p>I think you are confusing the type (<code>[(a,b)]</code>) with the patterns. In your <code>isEmpty</code> function, you write:</p>\n\n<pre><code>isEmpty::Ord a =&gt; [(a,b)] -&gt; Bool\nisEmpty <b>[(a,b)]</b> = null [undefined, undefined]</code></pre>\n\n<p>But this does not mean that you are going to match lists of <em>type</em> <code>[(a,b)]</code>. You already said that in your type signature. Your <code>[(a,b)]</code> in the second line, means you define a pattern. The pattern sayd that you are only matching lists that contain <em>exactly</em> one element: a 2-tuple, with <code>a</code> the first item of that tuple, and <code>b</code> the second item of that tuple.</p>\n\n<p>If you then pass it an empty list, or a list with two or more elements, then the pattern will not match, and hence it will raise an error.</p>\n\n<p>If you want to match <em>any</em> list, you can simply use a variable:</p>\n\n<pre><code>isEmpty :: Ord a =&gt; [(a,b)] -&gt; Bool\nisEmpty <b>ls</b> = null <b>ls</b></code></pre>\n\n<p>here <code>isEmpty</code> thus will call <code>null</code> with that variable. We can perform an <em>&eta;-reduction</em> here, and write:</p>\n\n<pre><code>isEmpty :: Ord a =&gt; [(a,b)] -&gt; Bool\nisEmpty = null</code></pre>\n\n<p>There is no need at all, to restrict ourselves to only lists with 2-tuples where the first item of these tuples has a type that is a member of the <code>Ord</code> typeclass however, we can let this work with any list. So we can generalize the type to:</p>\n\n<pre><code>isEmpty :: <b>[a]</b> -&gt; Bool\nisEmpty = null</code></pre>\n\n<p>In fact <code>null</code> can operate over any <code>Foldable</code>, since it has type <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/src/Data.Foldable.html#null\" rel=\"nofollow noreferrer\"><strong><code>null :: Foldable f =&gt; f a -&gt; Bool</code></strong></a>.</p>\n\n<p>Given the above function defintion, there is no need to implement your own <code>isEmpty</code>, you can simply call <code>null emptyList</code>.</p>\n"}], "owner": {"reputation": 157, "user_id": 5608517, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9eed034d912be0a2c2ef78e9b37500d2?s=128&d=identicon&r=PG&f=1", "display_name": "Noopty", "link": "https://stackoverflow.com/users/5608517/noopty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 58361849, "answer_count": 1, "score": 1, "last_activity_date": 1570955561, "creation_date": 1570953937, "question_id": 58361666, "link": "https://stackoverflow.com/questions/58361666/using-ord-to-create-and-compare-empty-lists", "title": "Using Ord to create and compare empty lists", "body": "<p>I am trying to create an empty list then confirm that it is empty so I can later on insert elements into it.</p>\n\n<p>I tried to simply assign the function to an empty list but when i try to confirm that it is empty I get an Non-exhaustive patterns in function exception.</p>\n\n<p>Here is what I have so far.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>emptyList::Ord a =&gt; [(a,b)]\nemptyList = []\n\nisEmpty::Ord a =&gt; [(a,b)] -&gt; Bool\nisEmpty[(a,b)] = null [undefined, undefined]\n\n</code></pre>\n\n<p>I am trying to get something like \n<code>\nisEmpty emptyList \nTrue\n</code>\nI guess my question here is that, how can I confirm that the list is empty based on the given type?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570947221, "post_id": 58361018, "comment_id": 103073938, "body": "You will need an <code>Ord</code> type constraint, in order to compare two items."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570947376, "post_id": 58361018, "comment_id": 103073971, "body": "Furthermore your function will here return a <code>b</code>, not an <code>a</code>."}, {"owner": {"reputation": 113, "user_id": 8804960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baeea02c3017681f64a8b0b0d2c803c?s=128&d=identicon&r=PG&f=1", "display_name": "fjaokfaw", "link": "https://stackoverflow.com/users/8804960/fjaokfaw"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570948137, "post_id": 58361018, "comment_id": 103074104, "body": "Yeah I think  b is fine. I need to think a good recursive way."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 8804960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baeea02c3017681f64a8b0b0d2c803c?s=128&d=identicon&r=PG&f=1", "display_name": "fjaokfaw", "link": "https://stackoverflow.com/users/8804960/fjaokfaw"}, "edited": false, "score": 1, "creation_date": 1570948865, "post_id": 58361126, "comment_id": 103074219, "body": "Thank you! I didn&#39;t know that I can add another typeclass into my typeclass. Thanks again!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1570948889, "last_edit_date": 1570948889, "creation_date": 1570948307, "answer_id": 58361126, "question_id": 58361018, "link": "https://stackoverflow.com/questions/58361018/cannot-comform-type-when-implementing-max-iterator-with-own-typeclass-in-haskell/58361126#58361126", "title": "Cannot comform type when implementing max iterator with own typeclass in Haskell", "body": "<blockquote>\n  <p>I cannot make the type correct. Does that mean <code>b</code> cannot be same as <code>a</code>?</p>\n</blockquote>\n\n<p>It <em>can</em>, but the two are not per se the same.</p>\n\n<p>The problem however does not arise from the use of <code>c_max</code> in the <code>main</code> function. There are basically two problems here.</p>\n\n<p>First, you perform a mapping from <code>a</code> to <code>b</code>, but you did not restrict <code>b</code> to a type that is an instance of <code>Ord</code>. As a result, we can not compare the two <code>b</code>s to decide what <code>b</code> is the largest. We thus should add an <code>Ord b</code> typeconstraint:</p>\n\n<pre><code>class Max t where\n    c_max :: <b>Ord b =&gt;</b> (a -&gt; b) -&gt; t a -&gt; a</code></pre>\n\n<p>In your <code>instance Max []</code> your <code>max</code> compares two <code>b</code>s, and <em>returns</em> the largest <code>b</code>. But given your type signature, you want to return the corresponding <code>a</code>. We can implement this with:</p>\n\n<pre><code>instance Max [] where\n    c_max f [a] = a\n    c_max f (x:xs) | <b>f x &gt; f mx</b> = x\n                   | otherwise = mx\n        where mx = c_max f xs</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude&gt; putStrLn $ show $ c_max (\\x-&gt; x) [1,2]\n2\n</code></pre>\n\n<p>The above is not the most efficient implementation, since we here will calculate <code>f x</code> multiple times per item. I leave it as an exercise to optimize this further.</p>\n\n<p>Note that in Haskell there is a <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:maximum\" rel=\"nofollow noreferrer\"><strong><code>maximum :: (Foldable f, Ord a) =&gt; f a -&gt; a</code></strong></a> function that works on <code>Foldable</code>s. This thus will work with a list, a <code>Tree</code>, etc. One can define a <code>maximumBy</code> or something similar that operates on a <code>Foldable</code> as well, by slightly altering the \"fold function\".</p>\n"}], "owner": {"reputation": 113, "user_id": 8804960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baeea02c3017681f64a8b0b0d2c803c?s=128&d=identicon&r=PG&f=1", "display_name": "fjaokfaw", "link": "https://stackoverflow.com/users/8804960/fjaokfaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 58361126, "answer_count": 1, "score": 2, "last_activity_date": 1570948889, "creation_date": 1570946908, "question_id": 58361018, "link": "https://stackoverflow.com/questions/58361018/cannot-comform-type-when-implementing-max-iterator-with-own-typeclass-in-haskell", "title": "Cannot comform type when implementing max iterator with own typeclass in Haskell", "body": "<p>I'm trying to implement max iterator(like in Ruby) by using my own typeclass Max and List instance. But I cannot make the type correct. Does that mean 'b' cannot be same as 'a'? But what is I would like to get max item by their own value?</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>class Max t where\n  c_max :: (a-&gt;b) -&gt; t a -&gt; a\n\ninstance Max [] where\n  c_max f [a] = a\n  c_max f (x:xs) = max (f x) (c_max f xs)\n\nmain = putStrLn $ show $ c_max (\\x-&gt; x) [1,2]\n</code></pre>\n"}, {"tags": ["multithreading", "haskell", "concurrency"], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": false, "score": 4, "last_activity_date": 1570947348, "creation_date": 1570947348, "answer_id": 58361047, "question_id": 58360596, "link": "https://stackoverflow.com/questions/58360596/difference-between-cancel-and-uninterruptiblecancel-from-the-async-library/58361047#58361047", "title": "Difference between cancel and uninterruptibleCancel (from the Async library)", "body": "<p>Under no masking, asynchronous exceptions can happen wherever. Under <code>mask</code>, asynchronous exceptions can only appear from interruptible actions (which are generally blocking). Under <code>uninterruptibleMask</code>, asynchronous exceptions are completely out of the picture. Also, please note that <code>allowInterrupt</code> is <em>just one of</em> the interruptible actions; there are a ton more, e.g. <code>takeMVar</code>. With just <code>mask</code>, it is e.g. impossible to block on an <code>MVar</code> without opening yourself up to exceptions, but <code>uninterruptibleMask</code> lets you do it (though you shouldn't).</p>\n\n<p><code>uninterruptibleCancel</code> is useful because <code>cancel</code> waits for the target thread to finish. This is a blocking operation, so, as is convention, it is also interruptible. Thus, when you use <code>cancel</code>, you open yourself up to receiving unexpected exceptions, whether you are <code>mask</code>ed or not. When you use <code>uninterruptibleCancel</code>, you are 100% guaranteed to not get an exception. That's it. Remember that exceptions are non-local; even if nothing in <code>cancel</code> is critical, leaving it unprotected means an exception can leak into something that is.</p>\n\n<pre><code>mask $ do\n  cancel something -- whoops, this can receive an exception, even though it's masked\n  someCleanup -- therefore this might not get called\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>mask $ do\n  uninterruptibleCancel something -- no exceptions\n  someCleanup -- so this will definitely happen (assuming the target thread ends)\n</code></pre>\n"}], "owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570947348, "creation_date": 1570940779, "question_id": 58360596, "link": "https://stackoverflow.com/questions/58360596/difference-between-cancel-and-uninterruptiblecancel-from-the-async-library", "title": "Difference between cancel and uninterruptibleCancel (from the Async library)", "body": "<h3>Context:</h3>\n\n<p>I'm trying to understand the difference between <a href=\"https://www.stackage.org/haddock/lts-12.1/async-2.2.1/Control-Concurrent-Async.html#v:cancel\" rel=\"nofollow noreferrer\"><code>cancel</code></a> and <a href=\"https://www.stackage.org/haddock/lts-12.1/async-2.2.1/Control-Concurrent-Async.html#v:uninterruptibleCancel\" rel=\"nofollow noreferrer\"><code>uninterruptibleCancel</code></a> from the <code>Control.Concurent.Async</code> package. I believe it has something to do with the underlying concepts of <a href=\"https://www.stackage.org/haddock/lts-12.1/base-4.11.1.0/Control-Exception.html#v:mask\" rel=\"nofollow noreferrer\"><code>mask</code></a> , <a href=\"https://www.stackage.org/haddock/lts-12.1/base-4.11.1.0/Control-Exception.html#v:uninterruptibleMask\" rel=\"nofollow noreferrer\"><code>uninterruptibleMask</code></a>, and <a href=\"https://www.stackage.org/haddock/lts-12.1/base-4.11.1.0/Control-Exception.html#g:13\" rel=\"nofollow noreferrer\">interruptible operations</a>. Here's what I have understood so for:</p>\n\n<ul>\n<li>Asynchronous exceptions are thrown by thread-A, but need to be handled by thread-B. This is precisely what <a href=\"https://www.stackage.org/haddock/lts-12.1/base-4.11.1.0/Control-Exception.html#v:throwTo\" rel=\"nofollow noreferrer\"><code>throwTo</code></a> does. In some way, this can also be <em>considered</em> as a form of inter-thread communication.</li>\n<li>Asynchronous exceptions are used by one thread to kill/cancel another thread.</li>\n<li>Handling aysnchronous exceptions creates a problem in the target/receiving thread, because one usually doesn't expect exceptions to be raised at any random point in the code. One puts <code>try</code> / <code>catch</code> around certain operations and <em>expects</em>/handles only certain exceptions. But, Asynchronous exceptions can be delivered when the target thread could be at any point in the execution.</li>\n<li><code>mask</code> allows use to protect critical sections in the target/receiving thread from delivery of asynchronous exceptions. The operation protected by <code>mask</code> doesn't need to deal with asynchronous-exceptions till the point it calls <code>restore</code>.</li>\n</ul>\n\n<p>At this point <code>uninterruptibleMask</code> comes into the picture, and I start losing the plot. I thought the whole point of <code>mask</code> was to NOT deliver asynchronous-exceptions while executing a protected piece of code. However, here is what the docs say about \"interruptible actions\":</p>\n\n<blockquote>\n  <p>It is useful to think of mask not as a way to completely prevent asynchronous exceptions, but as a way to switch from asynchronous mode to polling mode. The main difficulty with asynchronous exceptions is that they normally can occur anywhere, but within a mask an asynchronous exception is only raised by operations that are interruptible (or call other interruptible operations). In many cases these operations may themselves raise exceptions, such as I/O errors, so the caller will usually be prepared to handle exceptions arising from the operation anyway. <strong>To perform an explicit poll for asynchronous exceptions inside mask, use allowInterrupt.</strong></p>\n</blockquote>\n\n<h3>Questions:</h3>\n\n<ul>\n<li>Even within a code-block protected by <code>mask</code>, if there are some points where it is safe to handle asynchronous-exceptions, one can call <code>allowInterrupt</code>. This <em>implicitly</em> means, that, unless <code>allowInterrupt</code> is called, asynchronous exceptions will NOT be delivered while executing <code>mask</code>ed code. What, then, is the purpose of <code>uninterruptibleMask</code>?</li>\n<li>Consequently, what is the need for <code>uninterruptibleCancel</code>? IIUC, thread A is trying to cancel thread B, but thread A, itself, is trying to protect itself from some sort of asynchronous exceptions, which may possibly be initiated by a third thread C, right? In the code for <code>cancel</code> (given below), which part is so critical that it needs the ultimate form of protection from asynchronous exceptions? Isn't <code>throwTo</code> an atomic/masked operation itself? Further, even if an asynchronous-exception <em>is delivered</em> to thread-A while executing <code>waitCatch</code>, what difference does it make? Actually, if I think about it, why do we need to even <code>mask</code> this code in the first place (let alone, <code>uninterruptibleMask</code>) ?</li>\n</ul>\n\n<pre><code>cancel a@(Async t _) = throwTo t AsyncCancelled &lt;* waitCatch a\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1570923032, "post_id": 58359422, "comment_id": 103071271, "body": "Question: What happens when you call <code>allergyFree [] _somethingelse</code>? There\u2019s your non-exhaustive pattern."}, {"owner": {"reputation": 45, "user_id": 12206475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd1ed6075e30557f6b1836d67ed4d44?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/12206475/rob"}, "reply_to_user": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1570924931, "post_id": 58359422, "comment_id": 103071531, "body": "yeah, i would get errors, i realized what was wrong and defined explicitly all the cases of the lists being empty, Thanks!"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 2, "creation_date": 1570947616, "post_id": 58359422, "comment_id": 103074018, "body": "I expect this can be written much more concisely; e.g. something like <code>allergyFree allergies = filter (\\(CC _ recipe) -&gt; all (`notElem` recipe) allergies)</code>. That way also seems quite readable to me."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1570949976, "post_id": 58359422, "comment_id": 103074401, "body": "Enable warnings using <code>-Wall</code>. If you do, GHC warns you about the cases you failed to handle."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12206475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd1ed6075e30557f6b1836d67ed4d44?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/12206475/rob"}, "edited": false, "score": 1, "creation_date": 1570924973, "post_id": 58359443, "comment_id": 103071536, "body": "Thanks ! rather than doing that i just defined all cases of both the lists being empty; explicitly; as i wanted to use x and xs and didnt want to use the head and tail functions"}], "tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": true, "score": 2, "last_activity_date": 1570923070, "creation_date": 1570923070, "answer_id": 58359443, "question_id": 58359422, "link": "https://stackoverflow.com/questions/58359422/non-exhaustive-patterns-in-haskell-created-data-type/58359443#58359443", "title": "Non-exhaustive patterns in haskell, created data type", "body": "<p><code>(y:ys)</code> only matches non-empty lists - it refers to a list with first element <code>y</code> (and <code>ys</code> refers to the rest of the list). Since both of your patterns have <code>(y:ys)</code> for the first argument, the function will fail with this error if you ever try to pass it an empty list in that position.</p>\n\n<p>I've only glanced at your code briefly, but since you don't use the <code>y</code> or <code>ys</code> variables individually anywhere in the function definition, this should work if you replace the <code>(y:ys)</code> pattern with a single name, say <code>x</code>, and then use <code>x</code> anywhere you have <code>(y:ys)</code> in your current definition.</p>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 2, "last_activity_date": 1570943298, "creation_date": 1570943298, "answer_id": 58360755, "question_id": 58359422, "link": "https://stackoverflow.com/questions/58359422/non-exhaustive-patterns-in-haskell-created-data-type/58360755#58360755", "title": "Non-exhaustive patterns in haskell, created data type", "body": "<p>When you do pattern matching over two list, you must add the patter of the empty list on both cases (if you want your function to be total):</p>\n\n<pre><code>allergyFree :: [Ingredient] -&gt; [Cupcake] -&gt; [Cupcake]\nallergyFree _ [] = [] -- second list is empty, I don't care about the first\nallergyFree [] _ = [] -- first list is empty, I don't care about the second\nallergyFree (y:ys) (c:cs) = -- logic when both has elements\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12206475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd1ed6075e30557f6b1836d67ed4d44?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/12206475/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 58359443, "answer_count": 2, "score": 2, "last_activity_date": 1570943298, "creation_date": 1570922809, "question_id": 58359422, "link": "https://stackoverflow.com/questions/58359422/non-exhaustive-patterns-in-haskell-created-data-type", "title": "Non-exhaustive patterns in haskell, created data type", "body": "<p>I'm getting a Non-exhaustive pattern in my code on the 2nd line here , i think its intrusive as i need it for my recursion to stop at some point.\nIt says patterns not matched : [ ] _</p>\n\n<pre><code>allergyFree :: [Ingredient] -&gt; [Cupcake] -&gt; [Cupcake]\nallergyFree (y:ys) [] = []\nallergyFree (y:ys) (c:cs) = if(not(igPresent (y:ys) recipeN)) then ([c] ++ (allergyFree (y:ys) cs))\n                            else (allergyFree (y:ys) cs)\n\nwhere\nCC (P priceN) recipeN = c\nigPresent :: [Ingredient] -&gt; [Ingredient] -&gt; Bool\nigPresent [] recipeN = False\nigPresent (y:ys) recipeN = if (y `elem` recipeN) then True\n                           else igPresent ys recipeN\n</code></pre>\n\n<p>Any help would be appreciated ! </p>\n\n<p>P.s. i'm quite new to haskell </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "edited": false, "score": 0, "creation_date": 1570922590, "post_id": 58359357, "comment_id": 103071198, "body": "@RobinZigmond I&#39;m not quite sure how i should write the syntax for it though, I can&#39;t get the instance to compile, as currently i&#39;m trying to make everything just evaluate to <code>True</code> regardless of input"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1570922750, "post_id": 58359357, "comment_id": 103071224, "body": "What was the compile error?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1570922866, "post_id": 58359357, "comment_id": 103071244, "body": "@w13rfed apologies, I deleted my comment because on reflection I think I misunderstood your question. I thought the issue was the lack of an <code>Eq</code> instance for functions - this may still cause you problems, but doesn&#39;t directly effect any of the code you&#39;ve got there. As @Ry says, we need the full code (not <code>...</code>) and the compiler error(s)."}, {"owner": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "edited": false, "score": 0, "creation_date": 1570922886, "post_id": 58359357, "comment_id": 103071249, "body": "No instance for (Eq (Int -&gt; Int -&gt; Int)) arising from the first field of &#39;FOWARD&#39; (type &#39;Int -&gt; Int -&gt; Int&#39;) (maybe you haven&#39;t applied a function to enough arguments?) Possible fix: use a standalone &#39;deriving instance&#39; declaration, so you can specify the instance context yourself"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1570922928, "post_id": 58359357, "comment_id": 103071255, "body": "Try removing <code>Eq</code> from the <code>deriving</code>, because you\u2019re implementing it yourself. That\u2019ll lead to better errors."}, {"owner": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "edited": false, "score": 0, "creation_date": 1570923086, "post_id": 58359357, "comment_id": 103071279, "body": "I&#39;ve updated the code in the question. Also removing <code>Eq</code> from <code>deriving</code> gives the same errors but for show and i&#39;m not what the syntax is for data type functions"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1570923212, "post_id": 58359357, "comment_id": 103071299, "body": "Your <code>Eq</code> instance is fine, it&#39;s the <code>Eq</code> in the <code>deriving</code> clause that was causing the error. Unfortunately <code>Show</code> has the same problem, there is no sensible way to display an arbitrary function in the form of a string so the Haskell Prelude doesn&#39;t try to implement <code>Show</code> for functions."}, {"owner": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570923661, "post_id": 58359357, "comment_id": 103071356, "body": "@RobinZigmond thanks that solved it, could you put it as the proper answer?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570923745, "post_id": 58359357, "comment_id": 103071375, "body": "What solved it? You mean removing the <code>Show</code> from the <code>deriving</code>? OK, but I assumed you wanted an instance, so I&#39;m not sure how this solves your real problem, even if it makes the compiler errors go away."}, {"owner": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "edited": false, "score": 0, "creation_date": 1570924351, "post_id": 58359357, "comment_id": 103071475, "body": "The problem was that I thought my syntax was incorrect for the instance, but it was just the deriving part"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1570926027, "post_id": 58359357, "comment_id": 103071654, "body": "I see, thanks for the explanation. As requested, I have made this into an answer."}], "answers": [{"tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": true, "score": 1, "last_activity_date": 1570926004, "creation_date": 1570926004, "answer_id": 58359644, "question_id": 58359357, "link": "https://stackoverflow.com/questions/58359357/deriving-instance-for-data-types-with-functions/58359644#58359644", "title": "Deriving instance for data types with functions", "body": "<p>When you automatically derive various standard typeclasses via the <code>deriving</code> clause, this relies on the individual fields or branches of the data structure already having instances for those classes. Since functions have no default instance for either <code>Eq</code> or <code>Show</code> (which is perfectly reasonable, there's no obvious canonical way to either determine if 2 arbitrary functions are equal*, or to print them as strings), and your datatype includes 2 fields whose values are functions, it's impossible for Haskell to derive <code>Eq</code> and <code>Show</code> instances, and this is what the compilation error is about.</p>\n\n<p>The solution is simply to remove the <code>deriving (Eq, Show)</code> part - you don't need this anyway if you're going to define your own custom instances. (The only reason to put a <code>deriving</code> clause is if you need an instance and are happy with the \"standard\" one - which a lot of the time you would be. Here though, you seem to be wanting to implement your own instances with non-standard logic. That is fine if your use-case demands it.)</p>\n\n<p>*actually in mathematics it's clear what equality of functions means, functions are defined  by their graph, which means that for two functions to be equal, they must give the same output for every possible input value. That's still theoretically important in Haskell programming (since the \"laws\" for various type classes require various functions to be equal), but it's not possible to implement in any reasonable way in general, not least because some functions can run forever without giving a result, so actually computing equality of functions in general is rather stronger than solving the <a href=\"https://en.wikipedia.org/wiki/Halting_problem\" rel=\"nofollow noreferrer\">Halting Problem</a>!)</p>\n"}], "owner": {"reputation": 333, "user_id": 6009572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7899bee63fefec4974ebc4e92809e695?s=128&d=identicon&r=PG&f=1", "display_name": "w13rfed", "link": "https://stackoverflow.com/users/6009572/w13rfed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58359644, "answer_count": 1, "score": -1, "last_activity_date": 1570926004, "creation_date": 1570922172, "last_edit_date": 1570922980, "question_id": 58359357, "link": "https://stackoverflow.com/questions/58359357/deriving-instance-for-data-types-with-functions", "title": "Deriving instance for data types with functions", "body": "<p>I'm trying to create a data type representing an objects position that can 'GO', 'STOP', move 'FORWARD', and move 'BACKWARD'. I can't figure out how to write the deriving instance of 'Eq' and 'Show' for the functions FORWARD and BACKWARD.</p>\n\n<pre><code>data Moves = GO\n           | STOP\n           | FORWARD { f :: Int -&gt; Int -&gt; Int }\n           | BACKWARD { g :: Int -&gt; Int -&gt; Int }\n           deriving (Eq, Show)\n\ninstance (Eq Moves) where\n    FORWARD a == FORWARD b = True\n    FORWARD a == BACKWARD b = True\n    BACKWARD a == BACKWARD b = True\n    BACKWARD a == FORWARD b = True\n    _ == _ = False\n</code></pre>\n\n<p>The logic for the instance doesn't matter at the moment I just can't figure out how to get it to compile. Thanks</p>\n"}, {"tags": ["haskell", "functional-programming", "functor", "maybe", "contravariant"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 3, "creation_date": 1570920109, "post_id": 58359117, "comment_id": 103070781, "body": "In <code>NovoPred (x . something)</code>, the <code>something</code> not only should return a <code>Maybe a</code> but also it receives a <code>Maybe b</code>. Now how can you construct such a function from <code>y :: b -&gt; a</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 5, "last_activity_date": 1570922915, "creation_date": 1570922915, "answer_id": 58359430, "question_id": 58359117, "link": "https://stackoverflow.com/questions/58359117/learning-how-to-use-contramap-when-is-expected-a-maybe-b-instead-of-a-b/58359430#58359430", "title": "Learning how to use contramap when is expected (a -&gt; Maybe b) instead of (a -&gt; b) as the first parameter (Haskell)", "body": "<p>If you have a function <code>y :: a -&gt; b</code> and you need to convert a <code>Maybe a</code> to a <code>Maybe b</code>, you can just <code>fmap</code> over <code>Maybe</code>:</p>\n\n<pre><code>contramap y (NovoPred x) = NovoPred (x . fmap y)\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 11042609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2139b66b36b8cb251ef2e3f5d5daf4f?s=128&d=identicon&r=PG&f=1", "display_name": "chrometic", "link": "https://stackoverflow.com/users/11042609/chrometic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 58359430, "answer_count": 1, "score": 1, "last_activity_date": 1570922915, "creation_date": 1570919562, "question_id": 58359117, "link": "https://stackoverflow.com/questions/58359117/learning-how-to-use-contramap-when-is-expected-a-maybe-b-instead-of-a-b", "title": "Learning how to use contramap when is expected (a -&gt; Maybe b) instead of (a -&gt; b) as the first parameter (Haskell)", "body": "<p>I'm studying Haskell and I was asked to solve this exercise:</p>\n\n<blockquote>\n  <p>Implement a new data type named NovoPred that should have a value\n  constructor with the same name. Also it should have a field named\n  runNovoPred with type Maybe a -> Bool Then, create an Functor\n  Contravariant instance for type NovoPred</p>\n</blockquote>\n\n<p>In order to solve this exercise, I've made this solution:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>module Oitavo where\n\nimport           Data.Functor.Contravariant\n\nnewtype NovoPred a =\n  NovoPred\n    { runNovoPred :: Maybe a -&gt; Bool\n    }\n\ninstance Contravariant NovoPred where\n    contramap y (NovoPred x) = NovoPred (x . y)\n</code></pre>\n\n<p>As you may notice, this solution doesn't work at all. <code>Contramap</code> needs to have this structure: <code>(a -&gt; b) -&gt; f b -&gt; f a</code>, the problem is that <code>x</code> function expects to receive a value that looks like <code>Maybe b</code> and it is actually receiving a value <code>b</code> because that is what <code>y</code> function returns. Therefore, it is impossible to do <code>x . y</code>, because <code>x</code> expects to receive a value that doesn't match with what <code>y</code> is actually returning.</p>\n\n<p>So, I think I need a way to make <code>y</code> function return a value of type <code>Maybe b</code>. Unfortunately, I don't have a clue on how to do it since <code>contramap</code> expects to receive something like <code>a -&gt; b</code> as first parameter instead of something like <code>a -&gt; Maybe b</code> (that's what I need). Could you give me a hand with that?</p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1570918407, "post_id": 58358999, "comment_id": 103070466, "body": "Yes, Haskell is a pure and functional language. You can only create a new user object with different values, you cannot mutate the existing value."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1572905309, "post_id": 58358999, "comment_id": 103699373, "body": "don&#39;t forget to vote!"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 10709678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5e4701f662b32082bebba0472c2b7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/10709678/kevin"}, "edited": false, "score": 0, "creation_date": 1570918906, "post_id": 58359010, "comment_id": 103070560, "body": "Sorry i&#39;m new at Haskell, do both things the same? and is one way better than other?"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 131, "user_id": 10709678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5e4701f662b32082bebba0472c2b7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/10709678/kevin"}, "edited": false, "score": 0, "creation_date": 1570920107, "post_id": 58359010, "comment_id": 103070780, "body": "I&#39;d argue that the lens version is indeed better, however it requires a heavyweight library and some pretty advanced polymorphism trickery (hence the <code>-XRank2Types</code> extension)."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1570920855, "post_id": 58359010, "comment_id": 103070913, "body": "<a href=\"http://www.haskellforall.com/2013/05/program-imperatively-using-haskell.html\" rel=\"nofollow noreferrer\">This</a> is a great article, suitable for those relatively new to Haskell, about how lenses enable you to write &quot;OO-looking&quot; code in Haskell. Also, while the whole of the Lens package is indeed a beast, there are various &quot;simplified&quot; Lens packages out there which give you all the most commonly-used features without needing tons of dependencies, eg. <a href=\"http://hackage.haskell.org/package/lens-simple\" rel=\"nofollow noreferrer\">this one</a>"}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 7, "last_activity_date": 1570918750, "last_edit_date": 1570918750, "creation_date": 1570918446, "answer_id": 58359010, "question_id": 58358999, "link": "https://stackoverflow.com/questions/58358999/change-a-attribute-in-haskell/58359010#58359010", "title": "Change a attribute in Haskell", "body": "<p>It does work, but you need to specify whose points you want to increment. <code>user</code>s, right?</p>\n\n<pre><code>userplus10 = user{points = points user + 10}\n</code></pre>\n\n<p>A better way of doing this kind of stuff are <a href=\"http://lens.github.io/\" rel=\"noreferrer\">lenses</a> though.</p>\n\n<pre><code>{-# LANGUAGE TemplateHaskell, Rank2Types #-}\n\nimport Control.Lens\n\ndata User = User\n   { _username :: String,\n   , _passwort :: String,\n   , _points :: Int\n   }\nmakeLenses ''User\n\nuser = user {username =\"Test\", passwort=\"test123\", points=100}\n\nuserPlus10 = user &amp; points +~ 10\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 10709678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5e4701f662b32082bebba0472c2b7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/10709678/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "closed_date": 1570928690, "accepted_answer_id": 58359010, "answer_count": 1, "score": 0, "last_activity_date": 1570918750, "creation_date": 1570918269, "question_id": 58358999, "link": "https://stackoverflow.com/questions/58358999/change-a-attribute-in-haskell", "closed_reason": "Duplicate", "title": "Change a attribute in Haskell", "body": "<p>How do I increment a attribute?\nI created a type User</p>\n\n<pre><code>data user = User{\nusername :: String,\npasswort :: String,\npoints :: Int\n}\n\nuser = user {username =\"Test\",\n             passwort=\"test123\",\n             points=100\n             }\n\n</code></pre>\n\n<p>I want to increment the points by 10, I tryed to do something similar to this like in other programming lenguages <code>points += 10</code></p>\n\n<pre><code>userplus10 = user{points = points +10}\n</code></pre>\n\n<p>(btw. this doesnt work)\ncreating a new user but with another value at points.</p>\n"}, {"tags": ["haskell", "recursion"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1570915180, "post_id": 58358606, "comment_id": 103069794, "body": "What did you try, and what is not working?"}, {"owner": {"reputation": 19, "user_id": 12207323, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8vaC2_9i-gg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfniQJFzJNCcdgiLCHFZfg0YJ3qfQ/photo.jpg?sz=128", "display_name": "Angelos Zinonos", "link": "https://stackoverflow.com/users/12207323/angelos-zinonos"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570915537, "post_id": 58358606, "comment_id": 103069854, "body": "Not sure how to go about it yet"}, {"owner": {"reputation": 19, "user_id": 12207323, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8vaC2_9i-gg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfniQJFzJNCcdgiLCHFZfg0YJ3qfQ/photo.jpg?sz=128", "display_name": "Angelos Zinonos", "link": "https://stackoverflow.com/users/12207323/angelos-zinonos"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570915541, "post_id": 58358606, "comment_id": 103069856, "body": "validateCipher :: Char -&gt; String -&gt; Bool"}], "answers": [{"comments": [{"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 1, "creation_date": 1570915604, "post_id": 58358678, "comment_id": 103069876, "body": "Thanks, Willem Van Onsem!"}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": false, "score": 2, "last_activity_date": 1570915569, "last_edit_date": 1570915569, "creation_date": 1570915551, "answer_id": 58358678, "question_id": 58358606, "link": "https://stackoverflow.com/questions/58358606/check-a-string-if-a-letter-is-used-only-once-haskell/58358678#58358678", "title": "Check a string if a letter is used only once Haskell", "body": "<p>For</p>\n\n<pre><code>appearsOnlyOnce :: String -&gt; Bool\n</code></pre>\n\n<p>an inefficient (quadratic) way to do so is by </p>\n\n<pre><code>appearsOnlyOnce [] = True\nappearsOnlyOnce (x:xs)\n    | x `elem` xs = False\n    | otherwise = appearsOnlyOnce xs\n</code></pre>\n\n<p>A more efficient, but more complicated way, would be to sort and check adjacent elements.</p>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 0, "last_activity_date": 1574640975, "creation_date": 1574640975, "answer_id": 59023714, "question_id": 58358606, "link": "https://stackoverflow.com/questions/58358606/check-a-string-if-a-letter-is-used-only-once-haskell/59023714#59023714", "title": "Check a string if a letter is used only once Haskell", "body": "<p>Here's an easy way that's not too inefficient:</p>\n\n<pre><code>import Data.Containers.ListUtils\n\nnoDuplicates :: Ord a =&gt; [a] -&gt; Bool\nnoDuplicates xs = xs == nubOrd xs\n</code></pre>\n\n<p><code>nubOrd</code> removes duplicates, keeping the other elements in order. If there's a duplicate, then the nubbed list will differ from the original.</p>\n"}], "owner": {"reputation": 19, "user_id": 12207323, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8vaC2_9i-gg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfniQJFzJNCcdgiLCHFZfg0YJ3qfQ/photo.jpg?sz=128", "display_name": "Angelos Zinonos", "link": "https://stackoverflow.com/users/12207323/angelos-zinonos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574640975, "creation_date": 1570915059, "question_id": 58358606, "link": "https://stackoverflow.com/questions/58358606/check-a-string-if-a-letter-is-used-only-once-haskell", "title": "Check a string if a letter is used only once Haskell", "body": "<p>How do i check that each letter is used only once in the string inputed by the user and return boolean if true</p>\n"}, {"tags": ["http", "haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570914968, "post_id": 58358574, "comment_id": 103069747, "body": "The path is escaped here. Notice the <code>&#47;%2F</code>, etc."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1570915537, "creation_date": 1570915537, "answer_id": 58358674, "question_id": 58358574, "link": "https://stackoverflow.com/questions/58358574/how-can-i-execute-a-get-with-haskells-network-http-req-library/58358674#58358674", "title": "How can I execute a GET with Haskell&#39;s Network.HTTP.Req library?", "body": "<p>The path is escaped here. In order to use a slash, you can make use of the <a href=\"http://hackage.haskell.org/package/req-2.1.0/docs/Network-HTTP-Req.html#v:-47--126-\" rel=\"nofollow noreferrer\"><strong><code>(/~) :: ToHttpApiData a =&gt; Url scheme -&gt; a -&gt; Url scheme</code></strong> function</a>:</p>\n\n<pre><code>getMockResource :: MonadHttp m =&gt;  m BsResponse \ngetMockResource = req\n  GET\n  (http &quot;www.mocky.io&quot; /: &quot;v2&quot; <b>/~ &quot;5da208d92f00007900f418ff&quot;</b>)\n  NoReqBody\n  bsResponse\n  mempty</code></pre>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 2352866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8bcac072648a59672779bf81be2d0be8?s=128&d=identicon&r=PG", "display_name": "Orestis", "link": "https://stackoverflow.com/users/2352866/orestis"}, "is_accepted": false, "score": 2, "last_activity_date": 1570915614, "creation_date": 1570915614, "answer_id": 58358688, "question_id": 58358574, "link": "https://stackoverflow.com/questions/58358574/how-can-i-execute-a-get-with-haskells-network-http-req-library/58358688#58358688", "title": "How can I execute a GET with Haskell&#39;s Network.HTTP.Req library?", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/users/67579/willem-van-onsem\">https://stackoverflow.com/users/67579/willem-van-onsem</a> 's hint I took a closer look on the URL creation and I needed</p>\n\n<p><code>http \"www.mocky.io\" /: \"v2\" /: \"5da208d92f00007900f418ff\"</code></p>\n\n<p>instead of:</p>\n\n<p><code>(http \"www.mocky.io\" /: \"/v2/5da208d92f00007900f418ff\")</code></p>\n"}], "owner": {"reputation": 382, "user_id": 2352866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8bcac072648a59672779bf81be2d0be8?s=128&d=identicon&r=PG", "display_name": "Orestis", "link": "https://stackoverflow.com/users/2352866/orestis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 58358674, "answer_count": 2, "score": 3, "last_activity_date": 1570915614, "creation_date": 1570914833, "question_id": 58358574, "link": "https://stackoverflow.com/questions/58358574/how-can-i-execute-a-get-with-haskells-network-http-req-library", "title": "How can I execute a GET with Haskell&#39;s Network.HTTP.Req library?", "body": "<p>I am trying to execute a simple HTTP GET request but I get back a 404. I assume there is an issue on the URL but I can't find it.</p>\n\n<p>Here is the function that executes the request:</p>\n\n<pre><code>getMockResource :: (MonadHttp m) =&gt;  m BsResponse \ngetMockResource = req\n  GET\n  (http \"www.mocky.io\" /: \"/v2/5da208d92f00007900f418ff\")\n  NoReqBody\n  bsResponse\n  mempty\n</code></pre>\n\n<p>my main:</p>\n\n<pre><code>main :: IO ()\nmain = runReq defaultHttpConfig $ do\n  r &lt;- getMockResource\n  liftIO $ B.putStrLn (responseBody r)\n</code></pre>\n\n<p>and here is the output:</p>\n\n<pre><code>VanillaHttpException (HttpExceptionRequest Request {\n  host                 = \"www.mocky.io\"\n  port                 = 80\n  secure               = False\n  requestHeaders       = []\n  path                 = \"/%2Fv2%2F5da208d92f00007900f418ff\"\n  queryString          = \"\"\n  method               = \"GET\"\n  proxy                = Nothing\n  rawBody              = False\n  redirectCount        = 10\n  responseTimeout      = ResponseTimeoutDefault\n  requestVersion       = HTTP/1.1\n}\n (StatusCodeException (Response {responseStatus = Status {statusCode = 404, statusMessage = \"Not Found\"}, responseVersion = HTTP/1.1, responseHeaders = [(\"Server\",\"Cowboy\"),(\"Connection\",\"keep-alive\n\"),(\"Date\",\"Sat, 12 Oct 2019 21:09:09 GMT\"),(\"Content-Type\",\"text/html; charset=UTF-8\"),(\"Content-Length\",\"2137\"),(\"Via\",\"1.1 vegur\")], responseBody = (), responseCookieJar = CJ {expose = []}, respo\nnseClose' = ResponseClose}) \"\\n\\n&lt;!DOCTYPE html&gt;\\n&lt;html lang=\\\"en\\\"&gt;\\n    &lt;head&gt;\\n        &lt;title&gt;Not Found&lt;/title&gt;\\n        &lt;link rel=\\\"shortcut icon\\\" href=\\\"data:image/png;base64,iVBORw0KGgoAAAANS\nUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAlFJREFUeNqUU8tOFEEUPVVdNV3dPe8xYRBnjGhmBgKjKzCIiQvBoIaNbly5Z+PSv3Aj7DSiP2B0rwkLGVdGgxITSCRIJGSMEQWZR3eVt5sEFBgTb/dN1yv\nnnHtPNTPG4PqdHgCMXnPRSZrpSuH8vUJu4DE4rYHDGAZDX62BZttHqTiIayM3gGiXQsgYLEvATaqxU+dy1U13YXapXptpNHY8iwn8KyIAzm1KBdtRZWErpI5lEWTXp5Z/vHpZ3/wyKKwYGGOdAYwR0EZwoezTYApBEIObyELl/aE1/83cp40Pt5mxqCKrE4Ck+mVWK\nKcI5tA8BLEhRBKJLjez6a7MLq7XZtp+yyOawwCBtkiBVZDKzRk4NN7NQBMYPHiZDFhXY+p9ff7F961vVcnl4R5I2ykJ5XFN7Ab7Gc61VoipNBKF+PDyztu5lfrSLT/wIwCxq0CAGtXHZTzqR2jtwQiXONma6hHpj9sLT7YaPxfTXuZdBGA02Wi7FS48YiTfj+i2Nhq\ntdhP5RC8mh2/Op7y0v6eAcWVLFT8D7kWX5S9mepp+C450MV6aWL1cGnvkxbwHtLW2B9AOkLeUd9KEDuh9fl/7CEj7YH5g+3r/lWfF9In7tPz6T4IIwBJOr1SJyIGQMZQbsh5P9uBq5VJtqHh2mo49pdw5WFoEwKWqWHacaWOjQXWGcifKo6vj5RGS6zykI587XeUIQ\nDqJSmAp+lE4qt19W5P9o8+Lma5DcjsC8JiT607lMVkdqQ0Vyh3lHhmh52tfNy78ajXv0rgYzv8\"))\n</code></pre>\n\n<p>The resource is avaliable at <a href=\"http://www.mocky.io/v2/5da208d92f00007900f418ff\" rel=\"nofollow noreferrer\">http://www.mocky.io/v2/5da208d92f00007900f418ff</a></p>\n\n<p>Any ideas of where the problem lies? Thank you!</p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1570903589, "post_id": 58357020, "comment_id": 103067026, "body": "What does your <code>m = Just m | Nothing</code> means? You can not pass multiple values to the same variable."}, {"owner": {"reputation": 131, "user_id": 10709678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5e4701f662b32082bebba0472c2b7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/10709678/kevin"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570903820, "post_id": 58357020, "comment_id": 103067099, "body": "I wanted to define m with another value than Nothing how should I do it then?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570904036, "post_id": 58357020, "comment_id": 103067165, "body": "you can declare that variable with the value, like <code>m = Just 3</code> for example."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1570904181, "post_id": 58357020, "comment_id": 103067206, "body": "It&#39;s unclear what you mean by &quot;Element&quot;. Do you want to create an alias for the type, or create your own type that contains or looks like a <code>Maybe Int</code>? Or do you actually want to create a concrete value of the type, and assign it to the <code>m</code> variable?"}, {"owner": {"reputation": 131, "user_id": 10709678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5e4701f662b32082bebba0472c2b7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/10709678/kevin"}, "edited": false, "score": 0, "creation_date": 1570904319, "post_id": 58357020, "comment_id": 103067241, "body": "I thought about giving it any int value too but what sence makes the Maybe in this line? (m :: Maybe Int) My thought here was well if its not an Integer then give Nothing"}, {"owner": {"reputation": 131, "user_id": 10709678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5e4701f662b32082bebba0472c2b7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/10709678/kevin"}, "edited": false, "score": 0, "creation_date": 1570904376, "post_id": 58357020, "comment_id": 103067257, "body": "I want to create my own type that contains or looks like a Maybe Int"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570904515, "post_id": 58357020, "comment_id": 103067294, "body": "@KevinZerull: but if there is already a <code>Maybe Int</code>, then why make your own type. I&#39;m still quite confused <i>what</i> you aim to achieve here. Do you want to define a variable (with a value), a type, a function, something else?"}, {"owner": {"reputation": 131, "user_id": 10709678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5e4701f662b32082bebba0472c2b7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/10709678/kevin"}, "edited": false, "score": 0, "creation_date": 1570904758, "post_id": 58357020, "comment_id": 103067364, "body": "The task is Define a Element m from the type Maybe Int with another value than Nothing."}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 2, "last_activity_date": 1570906738, "last_edit_date": 1570906738, "creation_date": 1570905001, "answer_id": 58357236, "question_id": 58357020, "link": "https://stackoverflow.com/questions/58357020/define-element-in-haskell/58357236#58357236", "title": "Define Element in Haskell", "body": "<p>Step by step, you have to look at the definition of data type maybe:</p>\n\n<pre><code>data Maybe a = Nothing | Just a\n</code></pre>\n\n<p>then, you can see two special functions there, called constructors, in your example, it can be used as:</p>\n\n<pre><code>m :: Maybe Int\nm = Just 5\n</code></pre>\n\n<p>anothe example using the other constructor:</p>\n\n<pre><code>nothingHere :: Maybe a\nnothingHere = Nothing\n</code></pre>\n\n<p>If you want to create your own data maybe it should be something like:</p>\n\n<pre><code>data MyMaybe a = None | Some a deriving Show\n\nm :: MyMaybe Int\nm = Some 5\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 10709678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5e4701f662b32082bebba0472c2b7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/10709678/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 58357236, "answer_count": 1, "score": 1, "last_activity_date": 1570906738, "creation_date": 1570903549, "last_edit_date": 1570904876, "question_id": 58357020, "link": "https://stackoverflow.com/questions/58357020/define-element-in-haskell", "title": "Define Element in Haskell", "body": "<p>Hi i'm new to Haskell sorry if this question is to basic but i'm not understanding whats happening here.\nI want to defiene a Element from Type Maybe Int</p>\n\n<pre><code>m :: Maybe Int\n\nm = Just m | Nothing \n</code></pre>\n\n<p>but im getting an error: </p>\n\n<pre><code> parse error on input `|'\n   |\n3 | m = Just m | Nothing \n   |            ^\nFailed, no modules loaded.\n</code></pre>\n\n<p>Why is this happening.</p>\n"}, {"tags": ["haskell", "monads"], "answers": [{"comments": [{"owner": {"reputation": 570, "user_id": 2171981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60b176e5554fa0fae26af4d5d02f82ef?s=128&d=identicon&r=PG", "display_name": "hacatu", "link": "https://stackoverflow.com/users/2171981/hacatu"}, "edited": false, "score": 0, "creation_date": 1570909634, "post_id": 58357466, "comment_id": 103068577, "body": "Wow thank you!  I knew about the implicit <code>forall</code> but I never really thought about why it makes sense in <code>(-&gt;)</code> and <code>ST</code> but not in any old type signature, so I only would have had any chance of finding type annotating <code>thaw</code> instead of <code>thaw a</code>.  Is <code>ScopedTypeVariables</code> the preferred way to do this?  I&#39;m using numeric prelude so I already have to have several language extensions, and <code>TypeApplications</code> is strange to me so I went with <code>ScopedTypeVariables</code>."}], "tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 1, "last_activity_date": 1570906963, "last_edit_date": 1570906963, "creation_date": 1570906607, "answer_id": 58357466, "question_id": 58356906, "link": "https://stackoverflow.com/questions/58356906/how-do-i-tell-haskell-what-marray-to-thaw-to/58357466#58357466", "title": "How do I tell Haskell what MArray to thaw to?", "body": "<p>When you do</p>\n\n<pre><code>definition :: ... tyvar ...\ndefinition = ... (expr :: ... tyvar ...) ...\n</code></pre>\n\n<p>The two mentions of <code>tyvar</code> do not reference the same thing. Rather, we have the rule that all type variables in all explicit types get <code>forall</code>ed:</p>\n\n<pre><code>definition :: forall tyvar. ... tyvar ...\ndefinition = ... (expr :: forall tyvar. ... tyvar ...) ...\n</code></pre>\n\n<p>That is, type variables have no scope. When you wrote</p>\n\n<pre><code>thaw a :: ST s (STArray s (Int, Int) e) -- this is the \"more correct\" version of what you wrote\n</code></pre>\n\n<p>you actually wrote</p>\n\n<pre><code>thaw a :: forall e. ST s (STArray s (Int, Int) e) \n</code></pre>\n\n<p>You thus said \"take this <code>Array</code> of element type <code>e</code> and convert it to an <code>STArray</code> of every element type\". That's broken.</p>\n\n<p>The Haskell 98 solution to this is to use an auxiliary function to bind the type <code>e</code> again:</p>\n\n<pre><code>thawST :: Array i e -&gt; ST s (STArray s i e)\nthawST x = thaw x\n\ndet a = runST $ thawST a &gt;&gt; return 1\n</code></pre>\n\n<p>Of course, <code>thawST</code> is just <code>thaw</code> with a restricted signature, so this also works (this solution is mildly less general):</p>\n\n<pre><code>det a = runST $ (thaw :: Array i e -&gt; ST s (STArray s i e)) a &gt;&gt; return 1\n</code></pre>\n\n<p>If you're OK with language extensions, you can use <code>ExplicitForAll</code> and <code>ScopedTypeVariables</code>:</p>\n\n<pre><code>det :: forall e. Num e =&gt; Array (Int, Int) e -&gt; e -- e will be bound in the definition\ndet a = runST $ (thaw a :: ST s (STArray s (Int, Int) e)) &gt;&gt; return 1\n-- s is not in scope, gets implicitly foralled\n-- e is in scope, refers to that variable\n</code></pre>\n\n<p>Or you can use <code>TypeApplications</code> instead of a signature</p>\n\n<pre><code>thaw :: (Ix i, IArray a e, MArray b e m) =&gt; a i e -&gt; m (b i e)\n-- so it takes type arguments in the order i(ndex) a(rray) e(lement) b(rray) m(onad)\n\ndet :: forall e. Num e =&gt; Array (Int, Int) e -&gt; e\ndet a = runST $ thaw @_ @_ @_ @(STArray _) a &gt;&gt; return 1\n-- _ means \"infer this\"\n-- so we left the i, a, e, and m types to be inferred\n-- and we specified that the result array was an STArray and left the state type inferred\n-- the state type is currently unnamed: it's given to us by runST\n-- but you need another type signature (runST (_ :: forall s. ST s &lt;result&gt;))\n-- to actually reference it by name\n-- therefore, we are forced to use _ and let it be inferred in the argument to thaw\n</code></pre>\n"}], "owner": {"reputation": 570, "user_id": 2171981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60b176e5554fa0fae26af4d5d02f82ef?s=128&d=identicon&r=PG", "display_name": "hacatu", "link": "https://stackoverflow.com/users/2171981/hacatu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 58357466, "answer_count": 1, "score": 0, "last_activity_date": 1570906963, "creation_date": 1570902813, "question_id": 58356906, "link": "https://stackoverflow.com/questions/58356906/how-do-i-tell-haskell-what-marray-to-thaw-to", "title": "How do I tell Haskell what MArray to thaw to?", "body": "<p>I have a determinant computation that acts on an <code>MArray</code> and produces a scalar in the same monad,\nhere I've replaced it with <code>return $ fromInteger 1</code>.\nSo I have a pure determinant function that uses it like</p>\n\n<pre><code>det :: (Num e) =&gt; Array (Int, Int) e -&gt; e\ndet a = runST $ (thaw a) &gt;&gt; (return $ fromInteger 1)\n</code></pre>\n\n<p>And I get an error that Haskell can't decide whether it should use <code>MArray (STUArray s) Bool (ST s)</code> or a bunch of other <code>STArray</code> variants and that I should put a type annotation, so I do</p>\n\n<pre><code>det :: (Num e) =&gt; Array (Int, Int) e -&gt; e\ndet a = runST $ ((thaw a) :: (Num e) =&gt; ST s (STArray s (Int, Int) e)) &gt;&gt; (return $ fromInteger 1)\n</code></pre>\n\n<p>And I get</p>\n\n<pre><code>\"Couldn't match type 'e1' with 'e'\"\n\"'e1' is a rigid type variable bound by an expression type signature: (Num e1) =&gt; ST s1 (STArray s1 (Int, Int) e)\"\n\"'e' is a rigid type variable bound by the type signature for: det :: (Num e) =&gt; Array (Int, Int) e -&gt; e\"\n\"Expected type: ST s1 (STArray s1 (Int, Int) e1)\"\n  \"Actual type: ST s1 (STArray s1 (Int, Int) e)\"\n\"In the first argument of '(&gt;&gt;)', namely '((thaw a) :: (Num e) =&gt; ST s (STArray s (Int, Int) e))'\"\n</code></pre>\n\n<p>It looks to me like there should not be two separate contexts for <code>e</code> because <code>thaw</code> is not like <code>fmap</code> where the contained type can go from <code>a</code> to <code>b</code>, for <code>thaw</code> the contained type is <code>e</code> in the argument and result.</p>\n\n<p>Plus, if I specify <code>e</code> as <code>Double</code> and remove the Num constraints then it compiles just fine.</p>\n\n<p>Finally, if I remove the type signature for the function, I get\n<code>\"Couldn't match expected type 'a0 (Int, Int) e' with actual type 'p' because type variable 'e' would escape its scope\"</code> which doesn't make any sense because <code>s</code> and <code>e</code> have to be type variables, there's no other way to write that.</p>\n\n<p>So how do I get Haskell to accept the instance of <code>MArray</code> I told it to <code>thaw</code> to or figure out by itself that it should use <code>STArray</code> since it is the only one that works for general <code>e</code>?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 6, "creation_date": 1570902098, "post_id": 58356807, "comment_id": 103066644, "body": "What if you install it with <code>cabal install --lib random</code>?"}], "owner": {"reputation": 200, "user_id": 12174294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5a9f269ee5f6948c98584fc17a9556?s=128&d=identicon&r=PG&f=1", "display_name": "Ramux05", "link": "https://stackoverflow.com/users/12174294/ramux05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 919, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570902011, "creation_date": 1570902011, "question_id": 58356807, "link": "https://stackoverflow.com/questions/58356807/not-being-able-to-install-random-module-using-cabal-haskell", "title": "Not being able to install Random module using cabal? (Haskell)", "body": "<p>I'm not being able to Install the random module using cabal. I'm using a macbook so I don't know if the commands are any diferent. Here's what I'm typing on the terminal: <code>cabal install random</code>, this is the message I'm getting: </p>\n\n<p><code>Resolving dependencies...\nUp to date\nWarning: You asked to install executables, but there are no executables in\ntarget: random. Perhaps you want to use --lib to install libraries instead.</code></p>\n\n<p>I don't know if it makes a difference or not but I'm typing these commands while on the desktop directory.\nCan someone help me figure out what I'm doing wrong? Thanks in advance :)</p>\n"}, {"tags": ["haskell", "aeson"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570901000, "post_id": 58356655, "comment_id": 103066361, "body": "I think this should be <code>Array [(String, Int)]</code>, so wrap it in a 2-tuple."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570901472, "post_id": 58356655, "comment_id": 103066492, "body": "@WillemVanOnsem Actually, <code>Array (String, Int)</code> should be enough."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1570901821, "post_id": 58356655, "comment_id": 103066578, "body": "@chi: ah yes, somehow I got confused with the <code>[...]</code>, you are right :)"}], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 1727442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec9707ead27c44bb6c8bc12e65bda4a6?s=128&d=identicon&r=PG", "display_name": "David Villa", "link": "https://stackoverflow.com/users/1727442/david-villa"}, "is_accepted": true, "score": 2, "last_activity_date": 1570904474, "last_edit_date": 1570904474, "creation_date": 1570904038, "answer_id": 58357088, "question_id": 58356655, "link": "https://stackoverflow.com/questions/58356655/aeson-how-can-i-create-a-new-type-for-string-int/58357088#58357088", "title": "Aeson - How can I create a new type for [String, Int]?", "body": "<p>Finally, I got the solution thanks to the comments :)</p>\n\n<pre><code>  data RollbarJobResults =\n    RollbarJobResults\n     { \n       errors :: [(String, Int)]\n     }\n    deriving (Show)\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 1727442, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec9707ead27c44bb6c8bc12e65bda4a6?s=128&d=identicon&r=PG", "display_name": "David Villa", "link": "https://stackoverflow.com/users/1727442/david-villa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 58357088, "answer_count": 1, "score": 1, "last_activity_date": 1571080042, "creation_date": 1570900938, "last_edit_date": 1571080042, "question_id": 58356655, "link": "https://stackoverflow.com/questions/58356655/aeson-how-can-i-create-a-new-type-for-string-int", "title": "Aeson - How can I create a new type for [String, Int]?", "body": "<p>I am parsing a JSON object using <code>aeson</code> package and when trying to parse one section of the response I receive the following error: </p>\n\n<pre><code>Illegal kind: [String, Int]\n</code></pre>\n\n<p>This is the part of the JSON that I am trying to parse: </p>\n\n<pre><code>\"rows\": [\n    [\n      \"Lorem ipsum... \",\n      1756\n    ],\n    [\n      \"Lorem ipsum... \",\n      577\n    ],\n    [\n      \"Lorem ipsum... \",\n      471\n    ],\n</code></pre>\n\n<p>I have tried the following in order to parse the JSON:</p>\n\n<pre><code>data RollbarJobResults =\n  RollbarJobResults\n   { \n     errors :: Array [String, Int]\n   }\n  deriving (Show)\n</code></pre>\n\n<p>What is the correct way of defining a new type that could fit into the <code>[String, Int]</code> structure?</p>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12206475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd1ed6075e30557f6b1836d67ed4d44?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/12206475/rob"}, "edited": false, "score": 1, "creation_date": 1570900036, "post_id": 58356440, "comment_id": 103066112, "body": "Thanks for this ! I&#39;m actually trying to learn haskell so i didn&#39;t want to use the filter function and it was the where clause that was at fault."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1570900490, "post_id": 58356440, "comment_id": 103066240, "body": "You can also derive <code>Eq</code> and <code>Ord</code> instance for the dedicated types, removing the need to unpack them in order to make the comparisons."}, {"owner": {"reputation": 45, "user_id": 12206475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd1ed6075e30557f6b1836d67ed4d44?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/12206475/rob"}, "edited": false, "score": 0, "creation_date": 1570987850, "post_id": 58356440, "comment_id": 103082535, "body": "so, if i did deriving(eq,ord) after my type declaration for Price, could i then just do price1 == price2 or price1 &gt; price2 ? where price1 &amp;price2 are the type Price ?"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1570899568, "creation_date": 1570899568, "answer_id": 58356440, "question_id": 58356400, "link": "https://stackoverflow.com/questions/58356400/filtering-elements-from-a-list-of-a-created-data-type-in-haskell/58356440#58356440", "title": "Filtering elements from a List of a created Data Type in haskell", "body": "<p>In your program, <code>price</code> seems to appear out of \"thin air\". You do not define it in the head of the expression (before the <code>=</code>). So the compiler does not understand what you are doing.</p>\n\n<p>You actually wrote the <code>where</code> caluse in the wrong way. The pattern is placed at the <em>left</em> side of the equation, so:</p>\n\n<pre><code>filterProduct :: Price -&gt; Price -&gt; [Hoover] -&gt; [Hoover]\nfilterProduct (P m) (P n) [] = []\nfilterProduct (P m) (P n) (x:xs) = if(price &gt;= m &amp;&amp; price &lt;= n) then ([x] ++ (filterProduct (P m) (P n) xs))\n                                    else (filterProduct (P m) (P n) xs)\n\n    where <b>HH (P price) watt = x</b></code></pre>\n\n<p>That being said, you make things too hard. You can make use of the <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:filter\" rel=\"nofollow noreferrer\"><strong><code>filter :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</code></strong></a> function here to filter your list:</p>\n\n<pre><code>filterProduct :: Price -&gt; Price -&gt; [Hoover] -&gt; [Hoover]\nfilterProduct (P m) (P n) = filter (\\(HH (P price) watt) -&gt; price &gt;= m &amp;&amp; price &lt;= n)</code></pre>\n\n<p>It furthermore might make more sense to define a type <em>synonym</em> with:</p>\n\n<pre><code>type Price = Int\ntype Wattage = Int</code></pre>\n\n<p>if you do not plan to define special type class instances on these types.</p>\n"}, {"tags": [], "owner": {"reputation": 700, "user_id": 5499914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fz53h.png?s=128&g=1", "display_name": "Khuldraeseth na&#39;Barya", "link": "https://stackoverflow.com/users/5499914/khuldraeseth-nabarya"}, "is_accepted": false, "score": 1, "last_activity_date": 1570900571, "creation_date": 1570900571, "answer_id": 58356584, "question_id": 58356400, "link": "https://stackoverflow.com/questions/58356400/filtering-elements-from-a-list-of-a-created-data-type-in-haskell/58356584#58356584", "title": "Filtering elements from a List of a created Data Type in haskell", "body": "<p><a href=\"https://stackoverflow.com/a/58356440/5499914\">Willem Van Onsem's answer</a> is splendid as always, and it seems to have resolved your issue. I'd still like to put forth another approach, using <a href=\"https://en.wikibooks.org/wiki/Haskell/More_on_datatypes\" rel=\"nofollow noreferrer\">record syntax</a>:</p>\n\n<pre><code>data Hoover = HH\n    { hooverPrice   :: Int\n    , hooverWattage :: Int\n    }\n</code></pre>\n\n<p>If you declare your type like this, it'll give you two functions <code>hooverPrice</code> and <code>hooverWattage</code> of type <code>Hoover -&gt; Int</code>.</p>\n\n<p>Now, if you have a function that can check whether an <code>Int</code> is within your desired price range, you need only compose that function with <code>hooverPrice</code>, and you'll have a function that checks whether a vacuum cleaner's price falls within that range. Armed with this function, the problem is reduced to a simple <code>filter</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 12206475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd1ed6075e30557f6b1836d67ed4d44?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/12206475/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 58356440, "answer_count": 2, "score": 2, "last_activity_date": 1570900571, "creation_date": 1570899243, "question_id": 58356400, "link": "https://stackoverflow.com/questions/58356400/filtering-elements-from-a-list-of-a-created-data-type-in-haskell", "title": "Filtering elements from a List of a created Data Type in haskell", "body": "<p>I am new to haskell &amp; i was trying to filter elements from a created Data Type called Hoover.</p>\n\n<p>Now a Hoover has a Price &amp; a Wattage \n, I defined Hoover as :</p>\n\n<pre><code>data Hoover = HH Price Wattage\n</code></pre>\n\n<p>&amp;\nPrice &amp; Wattage as :</p>\n\n<pre><code>data Price = P Int \ndata Wattage = W Int \n</code></pre>\n\n<p>When i try to run this code for filtering the hoovers from a catalog of differently priced Hoovers :</p>\n\n<p>(Here m is the minimum price and n is the maximum price) :</p>\n\n<pre><code>filterProduct :: Price -&gt; Price -&gt; [Hoover] -&gt; [Hoover]\nfilterProduct (P m) (P n) [] = []\nfilterProduct (P m) (P n) (x:xs) = if(price &gt;= m &amp;&amp; price &lt;= n) then ([x] ++ (filterProduct (P m) (P n) xs))\n                                    else (filterProduct (P m) (P n) xs)\n\nwhere\n x :: Hoover \n x = HH (P price) watt\n</code></pre>\n\n<p>I get quite a lot of errors, i tried to do a lot of things but couldn't get around it &amp; needed help fixing it </p>\n\n<p>Would appreciate any help ! </p>\n"}, {"tags": ["haskell", "ghci"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1570892369, "post_id": 58355396, "comment_id": 103064130, "body": "Well one of the main reasons why <code>unsafePerformIO</code> is, well..., unsafe, is exactly because the order of evaluation is quite unpredictable. Haskell&#39;s laziness, will likely indeed first print the <code>(&quot;</code>, and then query for input. The main reason why there is an <code>IO</code> monad, is to guarantee evaluation order of <code>IO</code> operations. It is thus possible that <code>unsafePerformIO</code>s are never evaluated, evaluated multiple times, and in a different order."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1570895298, "post_id": 58355396, "comment_id": 103064857, "body": "Haskell is designed to prevent you from doing actual IO unless using the IO monad. You could instead &quot;simulate&quot; IO by reading/writing from your RW type. Instead of letting it be a single integer, make it a <code>([String], [String])</code> the first list of strings being the strings to be read as input in the future, and the latter being the strings which were printed in the past. When you <code>putString</code> you append to the second list, when you <code>getString</code> you remove a string form the first list (if empty, return &quot;EOF&quot; or something)."}, {"owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570895496, "post_id": 58355396, "comment_id": 103064916, "body": "@WillemVanOnsem - returning a modified world every time and making sure the last world is in the final result is my safeguard that all actions are performed. The fact that they are done in order is another story. So far, so good; but I am on the lookout for trouble, as I proceed. Could you see a way to make my sequences clearer to the compiler? I was thinking to try to define my own <code>bind</code>, but I wonder whether it will help..."}, {"owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1570895583, "post_id": 58355396, "comment_id": 103064942, "body": "@chi - your suggestion is interesting. I&#39;ll follow it. Thank you!"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1570900196, "post_id": 58355396, "comment_id": 103066169, "body": "<a href=\"https://stackoverflow.com/a/57752935/3234959\">Possibly related answer</a> which also shows a &quot;pure implementation of IO&quot; (kind of)."}, {"owner": {"reputation": 243, "user_id": 13679816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b02acae66c6a347786eb93e8cbead85?s=128&d=identicon&r=PG", "display_name": "atravers", "link": "https://stackoverflow.com/users/13679816/atravers"}, "edited": false, "score": 0, "creation_date": 1602905614, "post_id": 58355396, "comment_id": 113874851, "body": "Related: <a href=\"https://stackoverflow.com/questions/10447914/io-implementation-inside-haskell\" title=\"io implementation inside haskell\">stackoverflow.com/questions/10447914/&hellip;</a> ."}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1570900094, "post_id": 58355885, "comment_id": 103066131, "body": "This should indeed &quot;work&quot; in practice, but let me add that <code>seq</code> does not guarantee ordering. The compiler is entitled to rewrite <code>x `seq` y `seq` z</code> as <code>y `seq` x `seq` z</code>, in theory (I don&#39;t know if this actually happens, though). Instead, <code>pseq</code> guarantees ordering. (Even with that, it&#39;s hard to reason about <code>unsafe</code> primitives, so they should be avoided in general, as the OP already understands.)"}], "tags": [], "owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "is_accepted": true, "score": 3, "last_activity_date": 1570901879, "last_edit_date": 1570901879, "creation_date": 1570895730, "answer_id": 58355885, "question_id": 58355396, "link": "https://stackoverflow.com/questions/58355396/trying-to-put-some-order-in-ghci-output/58355885#58355885", "title": "Trying to put some order in ghci output", "body": "<p>Your problem is easily solved with some <code>seq</code>.</p>\n\n<pre><code>getString :: RW -&gt; (String, RW)\ngetString world =\n  let input = unsafePerformIO getLine\n  in input `seq` (input, world + 1)\n</code></pre>\n\n<p>Behold:</p>\n\n<pre><code>\u03bb getString 0\nHello!\n(\"Hello!\",1)\n</code></pre>\n\n<p>How cool is that?</p>\n\n<p>But I want to also nudge you a bit beyond what you are asking: can you make your tuple a monad? <em>(Hint: you will need to modify it in some way.)</em> Then you could use <code>do</code> notation and your <code>RW</code> IO will look just like the real thing!</p>\n\n<p>&nbsp;</p>\n\n<p><strong>P.S.</strong> As @chi points out in a comment, you should rather prefer <code>pseq</code> when you wish to ensure order. <a href=\"https://wiki.haskell.org/Evaluation_order_and_state_tokens\" rel=\"nofollow noreferrer\">There is a veritable wall written about it on Haskell Wiki.</a></p>\n"}], "owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58355885, "answer_count": 1, "score": 4, "last_activity_date": 1570901879, "creation_date": 1570892130, "question_id": 58355396, "link": "https://stackoverflow.com/questions/58355396/trying-to-put-some-order-in-ghci-output", "title": "Trying to put some order in ghci output", "body": "<p>For didactical purposes I am trying to follow and implement <a href=\"https://wiki.haskell.org/IO_inside\" rel=\"nofollow noreferrer\">IO inside</a>.</p>\n\n<p>The idea is to express a type <code>MIO a</code> (\"my IO\") which is a <code>RW -&gt; (a, RW)</code>.</p>\n\n<p><code>RW</code> is the real world and, for the sake of simplicity, it's just an Integer; I cannot use the real <code>RealWorld</code> because there are no constructors around.</p>\n\n<p>The first lines I've come up with are:</p>\n\n<pre><code>type RW = Integer\n\nputString :: String -&gt; RW -&gt; ((), RW)\nputString str world = (unsafePerformIO $ putStrLn str, world + 1)\n\ngetString :: RW -&gt; (String, RW)\ngetString world = let input = unsafePerformIO getLine\n  in (input, world + 1)\n</code></pre>\n\n<p>After that I try to define several ways to interact with the user, like asking one or more questions. The whole code is <a href=\"https://github.com/Muzietto/transformerz/blob/master/haskell/IO_inside/IO_inside.hs\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Already starting from <code>getString</code> I get a very funny output:</p>\n\n<pre><code>*Main&gt; getString 0\n(\"This is my input\nThis is my input\",1)\n*Main&gt;\n</code></pre>\n\n<p>I see the result of <code>getString</code> is correct, but the screen gets messy. <a href=\"https://github.com/Muzietto/transformerz/blob/master/haskell/IO_inside/IO_inside.hs#L14\" rel=\"nofollow noreferrer\">Asking questions</a> makes it even messier.</p>\n\n<p>In the case of <code>getString</code> I wish the initial <code>(\"</code> came together with the final result. Is it possible in ghci? (I doubt it, but I ask anyhow)</p>\n\n<p>When I studied <a href=\"https://faustinelli.wordpress.com/2014/06/01/state-monad-goes-to-js-town-and-starts-swinging/\" rel=\"nofollow noreferrer\">these same matters in JavaScript</a>, things were easier because I could get popups for free from the browser. Is there some Haskell-ready environment where I could plug in my code?</p>\n\n<p>I know that by using unsafePerformIO I have damned my soul to eternal sufferings, but reminding me that is gonna be beside my point.</p>\n"}, {"tags": ["haskell", "partial"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570889977, "post_id": 58355074, "comment_id": 103063485, "body": "The reason you can&#39;t detect it is you left off the most general way for a function to be partial: by depending on the return value of <i>another</i> partial function."}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570890080, "post_id": 58355074, "comment_id": 103063516, "body": "@chepner That would be point 3, my sir!"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570890188, "post_id": 58355074, "comment_id": 103063554, "body": "OK, I read &quot;unsafe&quot; in a different fashion. But that&#39;s something you can determine lexically. In any case, this question is simply too broad for Stack Overflow."}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570890522, "post_id": 58355074, "comment_id": 103063656, "body": "@chepner Why, is it? <i>&quot;if your question could be answered by an entire book, or has many valid answers (but no way to determine which - if any - are correct), then it is probably too broad for our format&quot;</i> \u2014 which of this do you believe applies?"}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570890963, "post_id": 58355074, "comment_id": 103063788, "body": "@chepner I can see how the last paragraph contains a question that is not technical. But consider that it is rhetorical."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570891224, "post_id": 58355074, "comment_id": 103063849, "body": "Suppose I add a fourth condition and claim that is all you need to worry about. How would know whether that answer is correct or not?"}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570891387, "post_id": 58355074, "comment_id": 103063885, "body": "@chepner If it looks reasonable, I will believe it. I know there are excellent programming language theorists around here. If you could add a reference to a complete proof, that is even better."}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570892003, "post_id": 58355074, "comment_id": 103064039, "body": "@chepner Also notice how, for instance, Idris makes a solid effort to distinguish total functions. Of course it <a href=\"http://blog.vmchale.com/article/secret-santa\" rel=\"nofollow noreferrer\">cannot detect all</a>, but it does show that the question not unlike mine here may have a definitive answer."}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570892102, "post_id": 58355074, "comment_id": 103064067, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/200758/discussion-between-ignat-insarov-and-chepner\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "edited": false, "score": 0, "creation_date": 1570896010, "post_id": 58355761, "comment_id": 103065050, "body": "Is there any hope for a <i>more defined</i> answer at all?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "edited": false, "score": 0, "creation_date": 1570899717, "post_id": 58355761, "comment_id": 103066039, "body": "@IgnatInsarov The fact is that it&#39;s not trivial to design a total language taking Haskell and trying to remove stuff until it becomes total, so I am unable to provide a full recipe to follow. Maybe you could instead look at Coq/Agda, which are already total, and try to find a common part between them and Haskell, since this &quot;intersection&quot; would of course be total."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1570903976, "post_id": 58355761, "comment_id": 103067152, "body": "@chi thanks to your description I managed to <a href=\"https://github.com/luqui/experiments/blob/master/hypergame.agda\" rel=\"nofollow noreferrer\">encode girard&#39;s paradox</a> (maybe) in agda, which had previously eluded me.  Still not quite sure what is going on with the recbuilder idioms (poked my way through the dark on that one).  Not sure how you would massage this into haskell just yet, if that&#39;s possible at all."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1570916466, "post_id": 58355761, "comment_id": 103070085, "body": "@luqui To be honest, I&#39;m also unsure about how to embed that into actual Haskell. IIRC, the GHC docs simply says &quot;we should be careful with TypeInType since that makes the logic unsound, but it is already unsound because of a billion ways to achieve non termination, so TypeInType is not much worse&quot;. I am not knowledgeable enough to say whether your code can be seen as a version of Girard&#39;s paradox, but it looks very interesting. It&#39;s amazing that <code>builder</code> is accepted by the termination checker, since it&#39;s very non-trivial!"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1570917038, "post_id": 58355761, "comment_id": 103070225, "body": "@chi I think for us FPers it&#39;s nontrivial because of the way we think of what a function is. But if you look at <code>M -&gt; Game</code> as an <code>M</code>-ary product of <code>Game</code>s it is just basic structural recursion.  .. but we digress"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1570917325, "post_id": 58355761, "comment_id": 103070291, "body": "@luqui That&#39;s a good intuitive argument. Of course, inside <code>hypergame</code> one of the components of that <code>Game</code>-ary product is <code>hypergame</code> itself, which breaks a bit the &quot;basic structural induction&quot; intuition ;-) I guess that&#39;s because we are modelling a paradox after all."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 4, "last_activity_date": 1570916524, "last_edit_date": 1570916524, "creation_date": 1570894888, "answer_id": 58355761, "question_id": 58355074, "link": "https://stackoverflow.com/questions/58355074/how-to-make-a-partial-function/58355761#58355761", "title": "How to make a partial function?", "body": "<p>This is a partial answer (pun intended), where I'll only list a few arguably non obvious ways one can achieve non termination.</p>\n\n<p>First, I'll confirm that negative-recursive types can indeed cause non termination. Indeed, it is known that allowing a recursive type such as</p>\n\n<pre><code>data R a = R (R a -&gt; a) \n</code></pre>\n\n<p>allows one to define <code>fix</code>, and obtain non termination from there.</p>\n\n<pre><code>{-# LANGUAGE ScopedTypeVariables  #-}\n{-# OPTIONS -Wall #-}\n\ndata R a = R (R a -&gt; a)\n\nselfApply :: R a -&gt; a\nselfApply t@(R x) = x t\n\n-- Church's fixed point combinator Y\n-- fix f = (\\x. f (x x))(\\x. f (x x))\nfix :: forall a. (a -&gt; a) -&gt; a\nfix f = selfApply (R (\\x -&gt; f (selfApply x)))\n</code></pre>\n\n<p>Total languages like Coq or Agda prohibit this by requiring recursive types to use only strictly-positive recursion.</p>\n\n<p>Another potential source of non-termination is that Haskell allows <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html?highlight=typeintype#extension-TypeInType\" rel=\"nofollow noreferrer\"><code>Type :: Type</code></a>. As far as I can see, that makes it possible to encode <a href=\"https://en.wikipedia.org/wiki/System_U\" rel=\"nofollow noreferrer\">System U</a> in Haskell, where Girard's paradox can be used to cause a logical inconsistency, constructing a term of type <code>Void</code>. That term (as far as I understand) would be non terminating.</p>\n\n<p>Girard's paradox is unfortunately rather complex to fully describe, and I have not completely studied it yet. I only know it is related to the so-called hypergame, a game where the first move is to choose a <em>finite</em> game to play. A finite game is one which causes every match to terminate after finitely many moves. The next moves after that would correspond to a match according to the chosen finite game at step one. Here's the paradox: since the chosen game must be finite, no matter what it is, the whole hypergame match will always terminate after a finite amount of moves. This makes hypergame itself a finite game, making the infinite sequence of moves \"I choose hypergame, I choose hypergame, ...\" a valid play, in turn proving that hypergame is <em>not</em> finite.</p>\n\n<p>Apparently, this argument can be encoded in a rich enough pure type system like System U, and <code>Type :: Type</code> allows to embed the same argument.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58355761, "answer_count": 1, "score": 4, "last_activity_date": 1570916524, "creation_date": 1570889880, "question_id": 58355074, "link": "https://stackoverflow.com/questions/58355074/how-to-make-a-partial-function", "title": "How to make a partial function?", "body": "<p>I was thinking about how I could save myself from undefinition, and one idea I had was to enumerate all possible sources of partiality. At least I would know what of to beware. I found three yet:</p>\n\n<ol>\n<li>Incomplete pattern matches or guards.</li>\n<li>Recursion. <em>(Optionally excluding structural recursion on algebraic types.)</em></li>\n<li>If a function is unsafe, any use of that function infects the user code. <em>(Should I be saying \"partiality is transitive\"?)</em></li>\n</ol>\n\n<p>I have heard of other ways to obtain a logical contradiction, for instance by <a href=\"http://vilhelms.github.io/posts/why-must-inductive-types-be-strictly-positive/\" rel=\"nofollow noreferrer\">using negative types</a>, but I am not sure if anything of that sort applies to Haskell. There are many logical paradoxes out there, and some of them <a href=\"https://stackoverflow.com/questions/58352224/currys-paradox-in-haskell\">can be encoded in Haskell</a>, but may it be true that any logical paradox requires the use of recursion, and is therefore covered by the point 2 above?</p>\n\n<p>For instance, if it were proven that a Haskell expression free of recursion can always be evaluated to normal form, then the three points I give would be a complete list. I fuzzily remember seeing something like a proof of this in one of Simon Peyton Jones's books, but that was written like 30 years ago, so even if I remember correctly and it used to apply to a prototype Haskell back then, it may be false today, seeing how many a language extension we have. Possibly some of them enable other ways to undefine a program?</p>\n\n<p>And then, if it were so easy to detect expressions that <em>cannot be partial</em>, why do we not do that? How easier would life be!</p>\n"}, {"tags": ["haskell", "recursion", "logic", "curry-howard"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1570884996, "post_id": 58352224, "comment_id": 103062199, "body": "You can&#39;t construct a term of type <code>Void</code> without using fix or some kind recursion (either at the term level or at the type level). If you remove all the ways to recurse forever or cause runtime errors (like <code>undefined</code>), then the language becomes normalizing, so every <code>t :: T</code> reduces to some <code>t&#39; :: T</code> which is a normal form, &quot;starting&quot; with a constructor of <code>T</code> (or a lambda if that&#39;s a function type). <code>Void</code> has no constructors, so that&#39;s impossible."}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1570891206, "post_id": 58352224, "comment_id": 103063841, "body": "@chi If you could repeat that as an answer to a <a href=\"https://stackoverflow.com/questions/58355074\">question nearby</a>."}], "answers": [{"tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": true, "score": 4, "last_activity_date": 1570888635, "last_edit_date": 1570888635, "creation_date": 1570888301, "answer_id": 58354835, "question_id": 58352224, "link": "https://stackoverflow.com/questions/58352224/currys-paradox-in-haskell/58354835#58354835", "title": "Curry&#39;s paradox in Haskell?", "body": "<p>The encoding of Curry's paradox looks more like this:</p>\n\n<pre><code>x :: X\nx = X (\\x'@(X f) -&gt; f x')\n</code></pre>\n\n<p><code>X</code> can indeed be read as the sentence \"if <code>X</code> is true, then there is a contradiction\", or equivalently, \"<code>X</code> is false\".</p>\n\n<p>But using <code>fix</code> to prove <code>X</code> is not really meaningful, because <code>fix</code> is blatantly incorrect as a reasoning principle. Curry's paradox is more subtle.</p>\n\n<p>How do you actually prove <code>X</code>?</p>\n\n<pre><code>x :: X\nx = _\n</code></pre>\n\n<p><code>X</code> is a conditional proposition, so you can start by assuming its premise to show its conclusion. This logical step corresponds to inserting a lambda. (Constructively, a proof of an implication is a mapping from proofs of the premise to proofs of the conclusion.)</p>\n\n<pre><code>x :: X\nx = X (\\x' -&gt; _)\n</code></pre>\n\n<p>But now we have an assumption <code>x' :: X</code>, we can unfold the definition of <code>X</code> again to get <code>f :: X -&gt; Void</code>. In informal descriptions of Curry's paradox, there is no explicit \"unfolding step\", but in Haskell it corresponds to pattern-matching on the newtype constructor when <code>X</code> is an assumption, or applying the constructor when <code>X</code> is the goal (in fact, as we did above):</p>\n\n<pre><code>x :: X\nx = X (\\x'@(X f) -&gt; _)\n</code></pre>\n\n<p>Finally, we now have <code>f :: X -&gt; Void</code> and <code>x' :: X</code>, so we can deduce <code>Void</code> by function application:</p>\n\n<pre><code>x :: X\nx = X (\\x'@(X f) -&gt; f x')\n</code></pre>\n"}], "owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "accepted_answer_id": 58354835, "answer_count": 1, "score": 7, "last_activity_date": 1581043356, "creation_date": 1570868336, "last_edit_date": 1581043356, "question_id": 58352224, "link": "https://stackoverflow.com/questions/58352224/currys-paradox-in-haskell", "title": "Curry&#39;s paradox in Haskell?", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Curry%27s_paradox\" rel=\"noreferrer\">Curry's paradox</a> <em>(named after the same person as the present programming language)</em> is a construction possible in a faulty logic that allows one to prove anything.</p>\n\n<p>I know nothing about logic, but how hard can it be?</p>\n\n<pre><code>module Main where\n\nimport Data.Void\nimport Data.Function\n\ndata X = X (X -&gt; Void)\n\nx :: X\nx = fix \\(X f) -&gt; X f\n\nu :: Void\nu = let (X f) = x in f x\n\nmain :: IO ()\nmain = u `seq` print \"Done!\"\n</code></pre>\n\n<p>It certainly does loop. <em>(How does GHC know?!)</em></p>\n\n<pre><code>% ghc -XBlockArguments Z.hs &amp;&amp; ./Z\n[1 of 1] Compiling Main             ( Z.hs, Z.o )\nLinking Z ...\nZ: &lt;&lt;loop&gt;&gt;\n</code></pre>\n\n<p>&nbsp;</p>\n\n<ul>\n<li>Is this a faithful translation? Why?</li>\n<li>Can I do the same without <code>fix</code> or recursion? Why?</li>\n</ul>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570860751, "post_id": 58351371, "comment_id": 103056987, "body": "I think it would help here to first define a signature for <code>exp_semantics</code>. Especially since I&#39;m not sure what you aim to do with this function."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1570865742, "post_id": 58351371, "comment_id": 103057924, "body": "It&#39;s really not clear what you&#39;re asking, especially as the brief snippets included use the <i>type</i> <code>Memory</code> where a <i>value</i> is required. But the <code>snd</code> function extracts the second value of a pair, and if used on a <code>Memory</code> value is a function that accepts an <code>Ide</code>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1570875044, "post_id": 58351371, "comment_id": 103059929, "body": "it looks as if your syntax is way way off. so much so that it is hard to see what you mean. either explain it in English better, or read up on syntax, or ask simpler, smaller questions, :) about every little bit of your program separately. better yet, <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.."}], "answers": [{"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 3, "last_activity_date": 1570874147, "creation_date": 1570874147, "answer_id": 58352940, "question_id": 58351371, "link": "https://stackoverflow.com/questions/58351371/using-a-function-inside-a-tuple-haskell/58352940#58352940", "title": "Using a function inside a tuple - Haskell", "body": "<p>You should probably make that</p>\n\n<pre><code><b>data</b> Memory = Memory\n       { identifiers :: [Ide]\n       , memvals :: Ide -> MemVal }</code></pre>\n\n<p>In that case the syntax for <em>pattern matching</em> would actually look similar to what you wrote, in particular you'd have the <em>value constructor</em> <code>Memory</code> turning up in patterns.</p>\n\n<pre><code>exp_semantics (I ident) (Memory i o) = ...\n</code></pre>\n\n<p>With <code>type Memory = ...</code> however, <code>Memory</code> is <strong>only a type synonym</strong>. It's basically no more than a preprocessor macro for a type, that's resolved before the actual compilation and doesn't appear at runtime in any way at all. In that case, the pattern match should merely be</p>\n\n<pre><code>exp_semantics (I ident) (i, o) = ...\n</code></pre>\n\n<p>In either case, you'll already have deconstructed the type with the pattern match, so no need anymore to juggle with accessors like <code>fst</code>. So it should be just</p>\n\n<pre><code>     case o ident of ....\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8408743, "user_type": "registered", "profile_image": "https://graph.facebook.com/1619148068098038/picture?type=large", "display_name": "Ward Beehre", "link": "https://stackoverflow.com/users/8408743/ward-beehre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 58352940, "answer_count": 1, "score": -1, "last_activity_date": 1570874147, "creation_date": 1570860546, "last_edit_date": 1570860699, "question_id": 58351371, "link": "https://stackoverflow.com/questions/58351371/using-a-function-inside-a-tuple-haskell", "title": "Using a function inside a tuple - Haskell", "body": "<p>So I'm pretty new to haskell and having a bit of trouble finding out how to do this</p>\n\n<p>So I have a type that consists of a list of identifiers and a function that when given the identifier it returns the associated value\nAn identifier is a string in this case</p>\n\n<pre><code>type Memory = ([Ide], Ide -&gt; MemVal)\n</code></pre>\n\n<p>This is what the type is meant to look like and I'm trying to get the rest of an interpreter working using it</p>\n\n<p>I want to be able to pass <code>Memory</code> an <code>Ide</code> and have it return an <code>MemVal</code> but I'm having trouble using the list or the function as they are inside the tuple</p>\n\n<p>Closest I've gotten is </p>\n\n<pre><code>exp_semantics (I ident) (Memory, i, o) =\n    case (Memory (fst Memory),ident) of ....\n</code></pre>\n\n<p>The idea was the pass Memory a tuple of <code>([current Identity list], ident)</code>. I know that `Ide -> MemVal works as expected. But I get </p>\n\n<pre><code>Couldn't match expected type \u2018[Ide] -&gt; Ide -&gt; MemVal\u2019\n            with actual type \u2018([Ide], Ide -&gt; MemVal)\u2019\n</code></pre>\n\n<p>I'm very lost so any help will be awesome.</p>\n\n<p>I think I'm missing how to use functions and lists inside of a tuple as well as types</p>\n"}, {"tags": ["haskell", "recursion", "functional-programming", "binary-tree"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1570845596, "post_id": 58350095, "comment_id": 103055193, "body": "Use pattern matching."}], "answers": [{"tags": [], "owner": {"reputation": 3695, "user_id": 6213048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8fcf68f42b160a352e7fa157dba36392?s=128&d=identicon&r=PG", "display_name": "soywod", "link": "https://stackoverflow.com/users/6213048/soywod"}, "is_accepted": true, "score": 2, "last_activity_date": 1570846602, "last_edit_date": 1570846602, "creation_date": 1570845761, "answer_id": 58350244, "question_id": 58350095, "link": "https://stackoverflow.com/questions/58350095/how-to-show-every-elements-of-a-recursive-data-type-tree-in-haskell/58350244#58350244", "title": "How to show every elements of a recursive data type (Tree) in Haskell", "body": "<p>I'm still new at Haskell, but something like this could work?</p>\n\n<pre><code>module Main where\n\nimport           Data.List\n\ndata SpTree a\n    -- | Leaf node\n    = LeafNode a\n    -- | Series composition\n    | SeriesNode a (SpTree a) (SpTree a)\n    -- | Parallel composition\n    | ParallelNode a (SpTree a) (SpTree a)\n\nparens :: String -&gt; String\nparens a = \"(\" ++ a ++ \")\"\n\ninstance Show a =&gt; Show (SpTree a) where\n  show (LeafNode x) = \"Leaf \" ++ show x\n  show (SeriesNode x y z) =\n    unwords [\"Ser\", show x, parens $ show y, parens $ show z]\n  show (ParallelNode x y z) =\n    unwords [\"Par\", show x, parens $ show y, parens $ show z]\n\n\nmain = do\n  putStr $ show $ LeafNode 1\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 58350244, "answer_count": 1, "score": 0, "last_activity_date": 1570846602, "creation_date": 1570843591, "last_edit_date": 1570846382, "question_id": 58350095, "link": "https://stackoverflow.com/questions/58350095/how-to-show-every-elements-of-a-recursive-data-type-tree-in-haskell", "title": "How to show every elements of a recursive data type (Tree) in Haskell", "body": "<p>I have this little problem where i need to write an instance of show that can print every element inside my recursive data of a tree :</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>-- | A binary tree representing a series-parallel graph\ndata SpTree a\n    -- | Leaf node\n    = LeafNode a\n    -- | Series composition\n    | SeriesNode a (SpTree a) (SpTree a)\n    -- | Parallel composition\n    | ParallelNode a (SpTree a) (SpTree a)\n\n-- | An SP-tree can be shown\n--\n-- &gt;&gt;&gt; show $ LeafNode 1\n-- \"Leaf 1\"\n-- &gt;&gt;&gt; show $ SeriesNode 1 (LeafNode 2) (LeafNode 3)\n-- \"Ser 1 (Leaf 2) (Leaf 3)\"\n-- &gt;&gt;&gt; show $ ParallelNode 1 (LeafNode 2) (LeafNode 3)\n-- \"Par 1 (Leaf 2) (Leaf 3)\"\ninstance Show a =&gt; Show (SpTree a) where\n    show = ?\n</code></pre>\n\n<p>What is the best way to define this instance? Should I use pattern matching or guards?</p>\n\n<p>I tried this for the leafNode but it gives me an error saying \n    <code>Data constructor not in scope: LeafNode :: Integer -&gt; ()</code> when i try to run this line :<code>show $ LeafNode 1</code></p>\n\n<pre><code>instance Show a =&gt; Show (SpTree a) where\n    show (a)\n        |  LeafNode a = show a :: Integer\n\n</code></pre>\n\n<p>Thank you !</p>\n"}, {"tags": ["haskell", "haskell-persistent"], "answers": [{"comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1571081447, "post_id": 58382589, "comment_id": 103114085, "body": "Thanks for the answer and the good explanation - even if it only confirms what I was beginning to think as I wrote my question, that it isn&#39;t possible. I&#39;m not sure how I missed that section of the documentation, so thanks for that link. And I &#39;ll try playing with <code>-ddump-splices</code> which will be helpful to see some of the other generated code. (I&#39;m using Stack for the project, and it&#39;s also my first time using that, so I&#39;ve just been compiling with <code>stack build</code>, but now I look it up I see it&#39;s easy to pass GHC options there too.)"}], "tags": [], "owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "is_accepted": true, "score": 1, "last_activity_date": 1571079417, "creation_date": 1571079417, "answer_id": 58382589, "question_id": 58349653, "link": "https://stackoverflow.com/questions/58349653/persistent-how-to-filter-on-a-field-of-a-record-column/58382589#58382589", "title": "Persistent - how to filter on a field of a record column", "body": "<p>You can use the <code>-ddump-splices</code> compiler flag to dump the code being generated by <code>derivePersistField</code> (and all the other Template Haskell calls).  You may need to pass <code>-fforce-recomp</code>, too, if <code>ghc</code> doesn't think the file needs to be recompiled.</p>\n\n<p>If you do, you'll see that the method <code>persistent</code> uses to marshal the <code>Foo</code> datatype to and from SQL is to use its <code>read</code> and <code>show</code> instances to store it as a text string.  (This <strong>is</strong> actually explained in the documentation on <a href=\"https://www.yesodweb.com/book/persistent#persistent_custom_fields\" rel=\"nofollow noreferrer\">Custom Fields</a>.)  This also means that a query like:</p>\n\n<pre><code>stuff &lt;- selectList [ThingFoo &gt;=. Foo 3 0] []\n</code></pre>\n\n<p>actually does string comparison at the SQL level, so <code>Thing (Foo 10 2)</code> wouldn't pass through this filter, because the string \"Foo 10 2\" sorts before \"Foo 3 0\".</p>\n\n<p>In other words, you're pretty much out of luck here.  Custom fields created by <code>derivePersistField</code> aren't really meant to be used for anything more sophisticated than the example from the Yesod documentation:</p>\n\n<pre><code>data Employment = Employed | Unemployed | Retired\n</code></pre>\n\n<p>The only way you can examine their structure would be to pass in raw SQL to parse the string field for use in a query, and that would be much uglier than whatever you're doing now and presumably no more efficient than querying for <em>all</em> records at the SQL level and doing the filtering in plain Haskell code on the result list.</p>\n"}], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 58382589, "answer_count": 1, "score": 3, "last_activity_date": 1571079417, "creation_date": 1570837746, "last_edit_date": 1571009521, "question_id": 58349653, "link": "https://stackoverflow.com/questions/58349653/persistent-how-to-filter-on-a-field-of-a-record-column", "title": "Persistent - how to filter on a field of a record column", "body": "<p>I'm in the middle of trying to build my first \"real\" Haskell app, an API using Servant, where I'm using Persistent for the database backend. But I've run into a problem when trying to use Persistent to make a certain type of database query.</p>\n\n<p>My real problem is of course a fair bit more involved, but the essence of the problem I have run up against can be explained like this. I have a record type such as:</p>\n\n<pre><code>data Foo = Foo { a :: Int, b :: Int }\n\nderivePersistField \"Foo\"\n</code></pre>\n\n<p>which I am including in an Entity like this:</p>\n\n<pre><code>share [mkPersist sqlSettings, mkMigrate \"migrateAll\"] [persistLowerCase|\n    Thing\n        foo Foo\n|]\n</code></pre>\n\n<p>And I need to be able to query for items in my database for which their Foo value has its <code>a</code> field greater than some <code>aMin</code> that is provided. (The intention is that it will actually be provided by the API request in a query string.)</p>\n\n<p>For ordinary queries, say for an <code>Int</code> field <code>Bar</code>, I could simply do <code>selectList [ThingBar &gt;=. aMin] []</code>, but I'm drawing a blank as to what to put in the filter list in order to extract the field from the record and do a comparison with it. Even though this feels like the sort of thing that Haskell should be able to do rather easily. It feels like there should be a <code>Functor</code> involved here that I can just <code>fmap</code> the <code>a</code> accessor over, but the relevant type, as far as I can tell from the documentation and the <a href=\"https://www.yesodweb.com/book/persistent\" rel=\"nofollow noreferrer\">tutorial</a>, is <code>EntityField Thing</code> defined by a GADT (actually generated by Template Haskell from the <code>share</code> call above), which in this case would have just one constructor yielding an <code>EntityField Thing Foo</code>, which it doesn't seem possible to make a <code>Functor</code> instance out of.</p>\n\n<p>But without that, I'm drawing a blank as to how to deal with this, since the LHS of a combinator like <code>&gt;=.</code> has to be an <code>EntityField</code> value, which stops me from trying to apply functions to the database value before comparing.</p>\n\n<p>Since I know someone is going to say it (and most of you will be thinking it) - yes, in this toy example I could just as easily make the <code>a</code> and <code>b</code> into separate fields in my database table, and solve the problem that way. As I said, this is somewhat simplified, and in my real application doing it that way would feel unsatisfactory for a number of reasons. And it doesn't solve my wider question of, essentially, how to be able to do arbitrary transformations on the data before querying. [Edit: I have now gone with this approach, in order to move forward with my project, but as I said it's not totally satisfactory, and I'm still waiting for an answer to my general question - even if that's just \"sorry it's not possible\", as I increasingly suspect, I would appreciate a good explanation.]</p>\n\n<p>I'm beginning to suspect this may simply be impossible because the data is ultimately stored in an SQL database and SQL simply isn't as expressive as Haskell - but what I'm trying to do, at least with record types (I confess I don't know how <code>derivePersistField</code> marshals these to SQL data types) doesn't seem too unreasonable so I feel I should ask if there are any workarounds for this, or do I really have to decompose my records into a bunch of separate fields if I want to query them individually.</p>\n\n<p>[If there are any other libraries which can help then feel free to recommend them - I did look into Esqueleto but decided I didn't need it for this project, although that was before I ran into this problem. Would that be something that could help with this kind of query?]</p>\n"}, {"tags": ["haskell", "syntax", "function-call", "custom-data-type"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1570835902, "post_id": 58349430, "comment_id": 103053873, "body": "The code works fine for me when I paste it into GHCi. And it is strange that the error message you report mentions <code>Integer</code>s when all the basic types in your code are <code>Double</code>s. Please provide the exact code you are using (I suspect there is more and the real error is elsewhere)."}, {"owner": {"reputation": 189, "user_id": 8666716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6f8f3e5b56d1e647be3944cec3bfc07?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Romero", "link": "https://stackoverflow.com/users/8666716/carlos-romero"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570836183, "post_id": 58349430, "comment_id": 103053928, "body": "Thanks for taking the time to help. Unfortunately what I included in the question is the only code I have in my .hs file. It compiles, but when I try to run the test function I&#39;m given the error previously stated."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1570836360, "post_id": 58349430, "comment_id": 103053950, "body": "Thanks for clarifying - so then the question is, what are you doing when you &quot;run the test function&quot;? Do you mean typing some expression in GHCi? If so, what is the precise expression? (The fact that you only include part of the error message - it should also tell you the actual type, and which expression the mismatch occurred in - makes it particularly hard to guess what you might have done.)"}, {"owner": {"reputation": 189, "user_id": 8666716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6f8f3e5b56d1e647be3944cec3bfc07?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Romero", "link": "https://stackoverflow.com/users/8666716/carlos-romero"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570836584, "post_id": 58349430, "comment_id": 103053994, "body": "Yes, I typed the following in GHCi &quot;test Pt 1.0 1.0&quot; . Sorry for all the obscurity I didn&#39;t want to include the entire message for the sake of not including unnecessary characters. This is the entire error message :    \u2022 Couldn&#39;t match expected type \u2018Integer -&gt; Integer -&gt; t\u2019                   with actual type \u2018Double\u2019     \u2022 The function \u2018test\u2019 is applied to three arguments,       but its type \u2018Point -&gt; Double\u2019 has only one       In the expression: test Pt 1 1       In an equation for \u2018it\u2019: it = test Pt 1 1     \u2022 Relevant bindings include it :: t (bound at &lt;interactive&gt;:497:1)"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 5, "creation_date": 1570836686, "post_id": 58349430, "comment_id": 103054013, "body": "Well you haven&#39;t shown me what <code>test</code> is, but that&#39;s enough to figure out the problem - you clearly want to do <code>test (Pt 1.0 1.0)</code>. <code>test Pt 1.0 1.0</code> with no parentheses is interpreted as applying the <code>test</code> function to the 3 arguments <code>Pt</code>, <code>1.0</code> and <code>1.0</code>, which makes no sense and is why GHC is complaining."}, {"owner": {"reputation": 189, "user_id": 8666716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6f8f3e5b56d1e647be3944cec3bfc07?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Romero", "link": "https://stackoverflow.com/users/8666716/carlos-romero"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570836777, "post_id": 58349430, "comment_id": 103054036, "body": "Sorry, test is what I renamed get_value. However, It works now! Thank you so much!"}, {"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1570843092, "post_id": 58349430, "comment_id": 103054929, "body": "Please include the complete problem above, instead of the comments. Stackoverflow is primarily for future readers, and leaving part of the problem statement in the comments makes it difficult for people to understand exactly what is happening in an easy way."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570957243, "post_id": 58349430, "comment_id": 103075660, "body": "@RobinZigmond I&#39;ve posted your comment as CW answer. if you decide to post your own answer, please ping me so I can delete my post. :)"}], "answers": [{"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": true, "score": 1, "last_activity_date": 1570957159, "creation_date": 1570957159, "answer_id": 58362021, "question_id": 58349430, "link": "https://stackoverflow.com/questions/58349430/how-to-extract-information-from-custom-data-type/58362021#58362021", "title": "How to extract information from custom data type", "body": "<p>you clearly want to do <code>test (Pt 1.0 1.0)</code>. </p>\n\n<p><code>test Pt 1.0 1.0</code> with no parentheses is interpreted as applying the <code>test</code> function to the 3 arguments <code>Pt</code>, <code>1.0</code> and <code>1.0</code>, which makes no sense and is why GHC is complaining. \u2013 <a href=\"https://stackoverflow.com/users/8475054/robin-zigmond\">Robin Zigmond</a>, <a href=\"https://stackoverflow.com/questions/58349430/how-to-extract-information-from-custom-data-type#comment103054013_58349430\">yesterday</a></p>\n"}], "owner": {"reputation": 189, "user_id": 8666716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6f8f3e5b56d1e647be3944cec3bfc07?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Romero", "link": "https://stackoverflow.com/users/8666716/carlos-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 58362021, "answer_count": 1, "score": 2, "last_activity_date": 1570957159, "creation_date": 1570835538, "last_edit_date": 1570875606, "question_id": 58349430, "link": "https://stackoverflow.com/questions/58349430/how-to-extract-information-from-custom-data-type", "title": "How to extract information from custom data type", "body": "<p>I am new to Haskell and functional programming in general. I am currently learning about custom data types and have the following:</p>\n\n<pre><code>data Point = Pt Double Double deriving (Show, Eq)\n\ngetValue :: Point -&gt; Double\n\ngetValue (Pt a _) = a\n</code></pre>\n\n<p>I am attempting to return only one of the double values from the custom data type but am running into a problem. My console gives me the following error whenever I try to extract one of my point values: \"<em>Couldn't match expected type <code>Integer -&gt; Integer -&gt; t</code></em>\". Any ideas as to what I am doing wrong?</p>\n\n<hr>\n\n<p>(<em>edit from OP's comments:</em>) I typed the following in GHCi </p>\n\n<pre><code>test Pt 1.0 1.0\n</code></pre>\n\n<p>Here is the entire error message : </p>\n\n<pre><code>\u2022 Couldn't match expected type \u2018Integer -&gt; Integer -&gt; t\u2019 \n      with actual type \u2018Double\u2019 \n\u2022 The function \u2018test\u2019 is applied to three arguments, \n      but its type \u2018Point -&gt; Double\u2019 has only one \n  In the expression: \n      test Pt 1 1 \n  In an equation for \u2018it\u2019: \n      it = test Pt 1 1 \n\u2022 Relevant bindings include \n      it :: t (bound at &lt;interactive&gt;:497:1)\n</code></pre>\n\n<p><code>test</code> is what I renamed <code>getValue</code> as.</p>\n"}, {"tags": ["list", "haskell", "syntax", "function-call", "centroid"], "comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1570874499, "post_id": 58347892, "comment_id": 103059796, "body": "FYI, with record syntax, <code>data Point = Pt { pointX, pointY :: Double } deriving (Show, Eq)</code>, you get the two functions <code>pointX</code>, <code>pointY</code> for free."}], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1570825178, "post_id": 58347949, "comment_id": 103051080, "body": "I think it&#39;s worth mentioning that the outermost parentheses are unnecessary."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1570835641, "post_id": 58347949, "comment_id": 103053818, "body": "<code>genericLength</code> is controversial. I&#39;d just use <code>fromIntegral (length xs)</code>."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1570867494, "post_id": 58347949, "comment_id": 103058288, "body": "@leftaroundabout why is <code>genericLength</code> controversial? I thought it was identical to <code>fromIntegral . length</code>, that is a version of <code>length</code> with a polymorphic return value (which really should have been used in the Prelude instead of the monomorphic <code>length</code> that&#39;s actually there)."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1570867622, "post_id": 58347949, "comment_id": 103058308, "body": "@RobinZigmond: I think because for a <code>Double</code> there are (large) values, for which <code>x + 1.0 == x</code>, since the mantissa can no has the &quot;resolution&quot; to increment with one. This thus means that for large lists, the <code>genericLength</code>, will &quot;stop counting&quot; at a given length."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1570872217, "post_id": 58347949, "comment_id": 103059285, "body": "@RobinZigmond yeah, that about <code>x + 1 \u2261 x</code> is one concrete problem with floats in particular \u2013 but in case of <code>Double</code> it would only be an issue for <i>gargantuan</i> lists. But more generally, it just doesn&#39;t make sense to carry out lots of additions in a custom number type, when <code>Int</code> is basically <i>always</i> the sweet spot of sufficient size and guaranteed good performance. With <code>genericLength</code> it can easily happen that you do lots of additions in a really inefficient type, instead of doing them all in <code>Int</code> and only converting the result in the end."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570872519, "post_id": 58347949, "comment_id": 103059359, "body": "Thanks for the explanations, I looked up the implementation and can see what you mean. Which of course begs the question of why it wasn&#39;t defined as <code>fromIntegral . length</code>."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570873033, "post_id": 58347949, "comment_id": 103059466, "body": "Nevermind, that&#39;s obvious when I think about it, it wouldn&#39;t work if the aim is to get an <code>Integer</code> or some other value whose bounds are less restrictive than those of <code>Int</code>"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 3, "last_activity_date": 1570867558, "last_edit_date": 1570867558, "creation_date": 1570825070, "answer_id": 58347949, "question_id": 58347892, "link": "https://stackoverflow.com/questions/58347892/the-centroid-of-a-list-of-points/58347949#58347949", "title": "The centroid of a list of points", "body": "<p>The main problem here is that you call the functions, like you would do in a language like Java, C++, or Python.</p>\n\n<p>You need to wrap <code>average</code> into parenthesis, like:</p>\n\n<pre><code>centroid cenpoint = Pt <b>(</b>average (pointsX cenpoint)<b>)</b> <b>(</b>average (pointsY cenpoint)<b>)</b></code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/questions/58347892/the-centroid-of-a-list-of-points/58347949?noredirect=1#comment103051080_58347949\">@dfeuer says</a>, the outer parenthesis are not necessary here.</p>\n\n<p>Furthermore you probably want to use <code>(/)</code> here over <code>div</code>, since you are working with <code>Double</code>s, whereas <code>div</code> works on <code>Integral</code> types:</p>\n\n<pre><code>average :: [Double] -&gt; Double\naverage xs = sum xs <b>/</b> genericLength xs</code></pre>\n\n<p>but like <a href=\"https://stackoverflow.com/questions/58347892/the-centroid-of-a-list-of-points/58347949?noredirect=1#comment103053818_58347949\">@leftroundabout says</a>, we can better use <code>length</code>, and then use <code>fromIntegral</code>:</p>\n\n<pre><code>average :: [Double] -&gt; Double\naverage xs = sum xs <b>/</b> <b>fromIntegral</b> (length xs)</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": false, "score": 3, "last_activity_date": 1570825078, "creation_date": 1570825078, "answer_id": 58347953, "question_id": 58347892, "link": "https://stackoverflow.com/questions/58347892/the-centroid-of-a-list-of-points/58347953#58347953", "title": "The centroid of a list of points", "body": "<p>You were doing pretty well - note how the compilation errors all point to your final line (the definition of <code>centroid</code>). And they're all due to incorrect bracketing. This is what it should be instead:</p>\n\n<pre><code>centroid cenpoint = Pt (average (pointsX cenpoint)) (average (pointsY cenpoint))\n</code></pre>\n\n<p>That is, the x co-ordinate of the resulting <code>Pt</code> value is the average of the x co-ordinates of the corresponding points (<code>pointsX cenpoint</code> is the list of x-coordinates, so <code>average (pointsX cenpoint)</code> is their average), and similarly for the y co-ordinate.</p>\n\n<p>Comparing to your incorrect version (which I have tidied up a little without changing how it is interpreted by the compiler):</p>\n\n<pre><code>Pt average (pointsX cenpoint) average (pointsY cenpoint)\n</code></pre>\n\n<p>This means you apply the <code>Pt</code> function to 4 arguments: <code>average</code>, <code>pointsX cenpoint</code>, <code>average</code> again, and <code>pointsY cenpoint</code>. This simply doesn't work because the <code>Pt</code> function only takes 2 arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 1, "last_activity_date": 1570836034, "creation_date": 1570836034, "answer_id": 58349472, "question_id": 58347892, "link": "https://stackoverflow.com/questions/58347892/the-centroid-of-a-list-of-points/58349472#58349472", "title": "The centroid of a list of points", "body": "<p>Not really an answer to the question, but \u2013 this is the preferred way of doing it:</p>\n\n<pre><code>{-# LANGUAGE DeriveGeneric, DeriveAnyClass #-}\n\nimport Data.VectorSpace\nimport GHC.Generics\n\ndata Point = Pt Double Double\n   deriving (Eq, Show, Generic, AdditiveGroup, VectorSpace)\n\naverage :: (VectorSpace v, Fractional (Scalar v)) =&gt; [v] -&gt; v\naverage ps = sumV ps ^/ fromIntegral (length xs)\n</code></pre>\n\n<p>Then you can directly do</p>\n\n<pre><code>&gt; average [Pt (-1.5) 0, Pt 3 2, Pt 0 1]\nPt 0.5 1.0\n</code></pre>\n\n<p>I.e. <code>centroid \u2261 average</code>.</p>\n"}], "owner": {"reputation": 95, "user_id": 12203144, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AYHpiGKoZh4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdf7jX3UTZ2lBsn2XVaA47VSeIsdA/photo.jpg?sz=128", "display_name": "Lmmmmmmc", "link": "https://stackoverflow.com/users/12203144/lmmmmmmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1570874312, "creation_date": 1570824695, "last_edit_date": 1570874312, "question_id": 58347892, "link": "https://stackoverflow.com/questions/58347892/the-centroid-of-a-list-of-points", "title": "The centroid of a list of points", "body": "<p>New to Haskell</p>\n\n<p>The problem is </p>\n\n<blockquote>\n<pre><code>-- The centroid of a list of points is a point whose x (and y) coordinates are\n-- the means of the x (and y) coordinates of the points in the list.\n--\n-- You may assume the list contains at least one point.\n--\n-- &gt; centroid [Pt 1 1, Pt 2 2]\n-- Pt 1.5 1.5\n-- &gt; centroid [Pt (-1.5) 0, Pt 3 2, Pt 0 1]\n-- Pt 0.5 1.0\n</code></pre>\n</blockquote>\n\n<p>Try to code like this</p>\n\n<pre><code>data Point = Pt Double Double deriving (Show, Eq)\n\ncentroid :: [Point] -&gt; Point\n\npointX :: Point -&gt; Double\npointX (Pt x y) = x\npointY :: Point -&gt; Double\npointY (Pt x y) = y\n\npointsX :: [Point] -&gt; [Double]\npointsX xs = map pointX xs\npointsY :: [Point] -&gt; [Double]\npointsY xs = map pointY xs\n\naverage :: [Double] -&gt; Double\naverage xs = (sum xs) `div` (genericLength xs)\n\ncentroid cenpoint = (Pt average(pointsX cenpoint) average(pointsY cenpoint))\n</code></pre>\n\n<p>And I got</p>\n\n<pre><code>Project1.hs:35:22: error:\n    \u2022 Couldn't match expected type \u2018([Double] -&gt; Double)\n                                    -&gt; [Double] -&gt; Point\u2019\n                  with actual type \u2018Point\u2019\n    \u2022 The function \u2018Pt\u2019 is applied to four arguments,\n      but its type \u2018Double -&gt; Double -&gt; Point\u2019 has only two\n      In the expression:\n        (Pt average (pointsX cenpoint) average (pointsY cenpoint))\n      In an equation for \u2018centroid\u2019:\n          centroid cenpoint\n            = (Pt average (pointsX cenpoint) average (pointsY cenpoint))\n   |\n35 | centroid cenpoint = (Pt average(pointsX cenpoint) average(pointsY cenpoint))\n   |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nProject1.hs:35:25: error:\n    \u2022 Couldn't match expected type \u2018Double\u2019\n                  with actual type \u2018[Double] -&gt; Double\u2019\n    \u2022 Probable cause: \u2018average\u2019 is applied to too few arguments\n      In the first argument of \u2018Pt\u2019, namely \u2018average\u2019\n      In the expression:\n        (Pt average (pointsX cenpoint) average (pointsY cenpoint))\n      In an equation for \u2018centroid\u2019:\n          centroid cenpoint\n            = (Pt average (pointsX cenpoint) average (pointsY cenpoint))\n   |\n35 | centroid cenpoint = (Pt average(pointsX cenpoint) average(pointsY cenpoint))\n   |                         ^^^^^^^\n\nProject1.hs:35:33: error:\n    \u2022 Couldn't match expected type \u2018Double\u2019 with actual type \u2018[Double]\u2019\n    \u2022 In the second argument of \u2018Pt\u2019, namely \u2018(pointsX cenpoint)\u2019\n      In the expression:\n        (Pt average (pointsX cenpoint) average (pointsY cenpoint))\n      In an equation for \u2018centroid\u2019:\n          centroid cenpoint\n            = (Pt average (pointsX cenpoint) average (pointsY cenpoint))\n   |\n35 | centroid cenpoint = (Pt average(pointsX cenpoint) average(pointsY cenpoint))\n   |\n</code></pre>\n"}, {"tags": ["haskell", "functional-programming"], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 8666716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6f8f3e5b56d1e647be3944cec3bfc07?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Romero", "link": "https://stackoverflow.com/users/8666716/carlos-romero"}, "edited": false, "score": 1, "creation_date": 1570822119, "post_id": 58347323, "comment_id": 103049918, "body": "Thanks a lot, I was having some trouble wrapping my head around the fundamentals of functional programming. As for the base case I wrote the following: mirror @e(Tip) = e."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 189, "user_id": 8666716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6f8f3e5b56d1e647be3944cec3bfc07?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Romero", "link": "https://stackoverflow.com/users/8666716/carlos-romero"}, "edited": false, "score": 1, "creation_date": 1570830634, "post_id": 58347323, "comment_id": 103052730, "body": "@CarlosRomero An equivalent formulation would be <code>mirror Tip = Tip</code>. I would only use the <code>e@Tip</code> construction for longer expressions, but there&#39;s nothing <i>wrong</i> with it if you like it here."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1570821708, "creation_date": 1570821708, "answer_id": 58347323, "question_id": 58347280, "link": "https://stackoverflow.com/questions/58347280/attempting-to-invert-a-binary-tree-in-haskell/58347323#58347323", "title": "Attempting to invert a Binary Tree in Haskell", "body": "<p>You need to put the data constructor first here, so it should be:</p>\n\n<pre><code>mirror :: Tree a -&gt; Tree a\nmirror(Bin l v r) = <b>Bin</b> (mirror r) v (mirror l) </code></pre>\n\n<p>By using <code>(mirror r) Bin v mirror l</code>, you call <code>Bin</code> as a parameter on the result of <code>mirror r</code>, so <code>((mirror r) Bin)</code>. But that does not make much sense.</p>\n\n<p>Note that you will need to add a case for <code>Tip</code> as well, since right now, your function does not cover all possible values.</p>\n"}], "owner": {"reputation": 189, "user_id": 8666716, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6f8f3e5b56d1e647be3944cec3bfc07?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Romero", "link": "https://stackoverflow.com/users/8666716/carlos-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 58347323, "answer_count": 1, "score": 1, "last_activity_date": 1570821708, "creation_date": 1570821437, "last_edit_date": 1570821633, "question_id": 58347280, "link": "https://stackoverflow.com/questions/58347280/attempting-to-invert-a-binary-tree-in-haskell", "title": "Attempting to invert a Binary Tree in Haskell", "body": "<p>I've recently started getting into functional programming and have just started to learn Haskell. I am attempting to invert a binary tree and I have the following so far: </p>\n\n<pre><code>data Tree a = Tip | Bin (Tree a) a (Tree a) deriving (Show,Eq)\n\nmirror :: Tree a -&gt; Tree a\nmirror(Bin l v r) = (mirror r) Bin v (mirror l) \n</code></pre>\n\n<p>However, I don't exactly understand why I get the following error: Couldn't match expected type <code>\u2018(Tree a0 -&gt; a0 -&gt; Tree a0 -&gt; Tree a0)</code>. Can anyone explain where I am getting confused?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 1, "creation_date": 1570820116, "post_id": 58346978, "comment_id": 103049057, "body": "Not using <code>iterate</code> would be one solution.  Iterate implies an infinite list after all."}, {"owner": {"reputation": 700, "user_id": 5499914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fz53h.png?s=128&g=1", "display_name": "Khuldraeseth na&#39;Barya", "link": "https://stackoverflow.com/users/5499914/khuldraeseth-nabarya"}, "edited": false, "score": 2, "creation_date": 1570820373, "post_id": 58346978, "comment_id": 103049171, "body": "Notice that your condition <code>(&gt;=1)</code> is satisfied even for <code>1</code>. That explains your infinite ones."}], "answers": [{"comments": [{"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1570820802, "post_id": 58347052, "comment_id": 103049378, "body": "<code>takeUntil</code> is <code>takeWhile . fmap not</code>, right? i.e., wouldn&#39;t <code>takeWhile (&#47;= 1)</code> work instead?&#39;"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 2, "creation_date": 1570820826, "post_id": 58347052, "comment_id": 103049394, "body": "@ReinHenrichs: no, the idea of <code>takeUntil</code> is that it includes the matching element as well."}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1570820883, "post_id": 58347052, "comment_id": 103049424, "body": "OTOH, if it terminates then it must terminate with a 1 so we can simply append a 1 to whatever the result list is."}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1570820935, "post_id": 58347052, "comment_id": 103049449, "body": "(Under the assumption that <code>[1..] ++ [1]</code> is operationally equivalent to <code>[1..]</code>.)"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 1, "creation_date": 1570820956, "post_id": 58347052, "comment_id": 103049456, "body": "@ReinHenrichs: yes indeed. The <code>takeUntil</code> is more useful if we want to make more sophisticated :)"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1570821161, "last_edit_date": 1570821161, "creation_date": 1570820281, "answer_id": 58347052, "question_id": 58346978, "link": "https://stackoverflow.com/questions/58346978/breaking-out-of-if-then-when-a-certain-requirement-is-met-in-haskell/58347052#58347052", "title": "Breaking out of If-Then when a certain requirement is met in Haskell", "body": "<p>You can use a function like <a href=\"https://hackage.haskell.org/package/utility-ht-0.0.14/docs/Data-List-HT.html#v:takeUntil\" rel=\"nofollow noreferrer\"><strong><code>takeUntil :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</code></strong></a> from the <a href=\"https://hackage.haskell.org/package/utility-ht\" rel=\"nofollow noreferrer\"><strong><code>utility-ht</code></strong> package [hackage]</a>. This function will:</p>\n\n<blockquote>\n  <p>Take all elements until one matches. <strong>The matching element is returned, too</strong>. This is the key difference to <code>takeWhile (not . p)</code>. It holds <code>takeUntil p xs == fst (breakAfter p xs)</code>.</p>\n</blockquote>\n\n<p>So we can use that to include the <code>1</code>:</p>\n\n<pre><code>import Data.List.HT(<b>takeUntil</b>)\n\nhailstone :: Integer -&gt; [Integer]\nhailstone = <b>takeUntil</b> (== 1) . iterate collatz\n  where collatz 1 = 1\n        collatz n | even n = div n 2\n                  | otherwise = 3 * n + 1</code></pre>\n\n<p>or we can implment <code>takeUntil</code> ourself:</p>\n\n<pre><code>takeUntil :: (a -&gt; Bool) -&gt; [a] -&gt; [a]\ntakeUntil p = go\n    where go [] = []\n          go (x:xs) | p x = [x]\n                    | otherwise = x : go xs</code></pre>\n\n<p>or with a fold:</p>\n\n<pre><code>takeUntil :: (a -&gt; Bool) -&gt; [a] -&gt; [a]\ntakeUntil p = foldr (\\x y -&gt; <b>x :</b> if p x then [] else y) []</code></pre>\n\n<p>For negative numbers, the <code>collatz</code> can get stuck in an infinite loop:</p>\n\n<pre><code>Prelude&gt; hailstone (-7)\n[-7,-20,-10,-5,-14,-7,-20,-10,-5,-14,-7,-20,-10,-5,-14,-7,-20,-10,-5,-14,\n</code></pre>\n\n<p>We thus might want to change the condition for all numbers less than or equal to <code>1</code>:</p>\n\n<pre><code>hailstone :: Integer -&gt; [Integer]\nhailstone = <b>takeUntil</b> (<b>&lt;=</b> 1) . iterate collatz\n  where collatz 1 = 1\n        collatz n | even n = div n 2\n                  | otherwise = 3 * n + 1</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "edited": false, "score": 0, "creation_date": 1585678788, "post_id": 58348337, "comment_id": 107845369, "body": "Though nobody has called me out on this: by saying that the tail of a hailstone sequence is  always a <i>shorter</i> sequence, I implied that all hailstone sequences must be finite (which they are, of course, although a comment field is not large enough to contain my brilliant proof :-)"}], "tags": [], "owner": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "is_accepted": false, "score": 2, "last_activity_date": 1570827729, "last_edit_date": 1570827729, "creation_date": 1570827350, "answer_id": 58348337, "question_id": 58346978, "link": "https://stackoverflow.com/questions/58346978/breaking-out-of-if-then-when-a-certain-requirement-is-met-in-haskell/58348337#58348337", "title": "Breaking out of If-Then when a certain requirement is met in Haskell", "body": "<p>All this use of <code>takeUntil</code>, <code>iterate</code>, <em>breaking out</em> has a very imperative feel for me (<em>do</em> something with the numbers until you reach 1 - and then how the hell do I stop? what is the Haskell equivalent of a <code>break</code> statement.....?)</p>\n\n<p>There is nothing wrong with that, and it wil work eventually, but when using Haskell, is often better to think a bit more declaratively: the tail of a hailstone sequence (other than <code>[1]</code>) is another (shorter) hailstone sequence, so <code>hailstone n = n : hailstone (f n)</code> for some <code>f</code></p>\n\n<p>Thus:</p>\n\n<pre><code>hailstone n\n   | n == 1    = [1]\n   | even n    = n : hailstone (n `div` 2)\n   | otherwise = n : hailstone (3*n + 1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "is_accepted": false, "score": 1, "last_activity_date": 1570843001, "last_edit_date": 1570843001, "creation_date": 1570842599, "answer_id": 58350028, "question_id": 58346978, "link": "https://stackoverflow.com/questions/58346978/breaking-out-of-if-then-when-a-certain-requirement-is-met-in-haskell/58350028#58350028", "title": "Breaking out of If-Then when a certain requirement is met in Haskell", "body": "<p>The sole <em>classic</em> library function that seems to offer some hope is <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-List.html#v:unfoldr\" rel=\"nofollow noreferrer\">unfoldr</a>. It uses the Maybe monad, and returning <code>Nothing</code> is what stops the recursion.</p>\n\n<pre><code>unfoldr :: (b -&gt; Maybe (a, b)) -&gt; b -&gt; [a]\n</code></pre>\n\n<p>You have to pick the proper function argument:</p>\n\n<pre><code>import Data.List\n\nhailstone :: Integer -&gt; [Integer]\n\nhailstone n = \n    let  next nn = if (even nn) then (div nn 2) else (3*nn+1)\n         unfn nn = if (nn==1) then Nothing else let nx = next nn in Just (nx,nx)\n    in\n         n : (unfoldr unfn n)\n\nmain = do\n    putStrLn $ \"hailstone 7 is: \" ++ show (hailstone 7)\n</code></pre>\n\n<p>That way, the stopping criterion is clearly separated from the successor function.</p>\n"}], "owner": {"reputation": 37, "user_id": 11036219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SlCRK3xGwo4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO4F2pZPtDiEs9w7Ndq49nTc7UYVQ/mo/photo.jpg?sz=128", "display_name": "Tino", "link": "https://stackoverflow.com/users/11036219/tino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 58347052, "answer_count": 3, "score": 1, "last_activity_date": 1570843001, "creation_date": 1570819961, "question_id": 58346978, "link": "https://stackoverflow.com/questions/58346978/breaking-out-of-if-then-when-a-certain-requirement-is-met-in-haskell", "title": "Breaking out of If-Then when a certain requirement is met in Haskell", "body": "<p>I am given the assignment of coding a hailstone sequence in Haskell. I must be given an integer and create a list of integers ending with the last number 1, eg.</p>\n\n<pre><code>-- &gt; hailstone 4\n-- [4,2,1]\n-- &gt; hailstone 6\n-- [6,3,10,5,16,8,4,2,1]\n-- &gt; hailstone 7\n-- [7,22,11,34,17,52,26,13,40,20,10,5,16,8,4,2,1]\n</code></pre>\n\n<p>My answer should have just one 1 at the end, however I do not know how to break out of the loop once reaching 1.</p>\n\n<pre><code>hailstone :: Integer -&gt; [Integer]\nhailstone = takeWhile (&gt;=1) . (iterate collatz)\n  where collatz n = if n == 1\n                    then 1\n                    else if even n \n                    then n `div` 2 \n                    else 3*n+1\n</code></pre>\n\n<p>I end up with infinite 1's at the end of this. How can I fix this?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 19, "user_id": 12197998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b326e31e66d5f1219dc28962c3c147df?s=128&d=identicon&r=PG&f=1", "display_name": "user12197998", "link": "https://stackoverflow.com/users/12197998/user12197998"}, "reply_to_user": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 1, "creation_date": 1570811684, "post_id": 58345031, "comment_id": 103045626, "body": "Can you please give a hint at things that are wrong?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1570813113, "post_id": 58345031, "comment_id": 103046244, "body": "how do you expect this to be resolved <code>(u-qv)</code> in assignment <code>(v, (u-qv)) = computeCoeffs (a, b)</code>"}, {"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1570814317, "post_id": 58345031, "comment_id": 103046652, "body": "What&#39;s wrong is this attempt demonstrates an understanding that could be greatly improved with some study."}, {"owner": {"reputation": 19, "user_id": 12197998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b326e31e66d5f1219dc28962c3c147df?s=128&d=identicon&r=PG&f=1", "display_name": "user12197998", "link": "https://stackoverflow.com/users/12197998/user12197998"}, "edited": false, "score": 0, "creation_date": 1570814743, "post_id": 58345031, "comment_id": 103046857, "body": "Well, I need to know what to study, and where to start, right? As you can guess, the answer &quot;study Haskell&quot; is too general."}, {"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1570821913, "post_id": 58345031, "comment_id": 103049845, "body": "I gave you the name of a specific text. Study the basics of the language."}], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1570813034, "creation_date": 1570813034, "answer_id": 58345597, "question_id": 58345031, "link": "https://stackoverflow.com/questions/58345031/calculating-bezout-coefficients-in-haskell/58345597#58345597", "title": "Calculating bezout coefficients in haskell", "body": "<p>something like this should work, need to handle edge cases for \"division by zero\" error</p>\n\n<pre><code>computeCoeff a b = go a b 1 0 0 1\n     where go a b s0 s1 t0 t1 | r==0 = (s1,t1)\n                              | otherwise = go b r s1 s t1 t\n                              where (q,r) = quotRem a b\n                                    (s,t) = (s0-s1*q, t0-t1*q)\n\n&gt; computeCoeff 240 46\n(-9,47)\n</code></pre>\n\n<p>reference: <a href=\"https://en.wikipedia.org/wiki/Extended_Euclidean_algorithm\" rel=\"nofollow noreferrer\">Extended Euclidean algorithm</a></p>\n"}], "owner": {"reputation": 19, "user_id": 12197998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b326e31e66d5f1219dc28962c3c147df?s=128&d=identicon&r=PG&f=1", "display_name": "user12197998", "link": "https://stackoverflow.com/users/12197998/user12197998"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1570813034, "creation_date": 1570810335, "last_edit_date": 1570810735, "question_id": 58345031, "link": "https://stackoverflow.com/questions/58345031/calculating-bezout-coefficients-in-haskell", "title": "Calculating bezout coefficients in haskell", "body": "<p>So I've been trying to calculate Bezout coefficients. All the solutions I've seen do this with calculating GCD at the same time. I already have a method for this.</p>\n\n<p>So this are differents parts of the code I've tried.</p>\n\n<pre><code>computeCoeffs :: Int -&gt; Int -&gt; (Int, Int)\ncomputeCoeffs :: Int -&gt; Int -&gt; (Int, Int)\ncomputeCoeffs a b =\n  let bq = a - r; (q, r) = a `quotRem` b \n           in if b == 0 \n              then (1, 0)\n              else ((v, (u - q * v)) = computeCoeffs (a, b))\n                    where a * v + b * (u - q * v) = gcd (a, b)\n</code></pre>\n\n<p>or instead of the last lines </p>\n\n<pre><code> let (q, r) = a `quotRem` b\n let r = a - bq\n | b == 0 = (1, 0)\n | otherwise (v, (u-qv)) = computeCoeffs (a, b)\n     where a * v + b(u - q * v) = gcd (a, b)\n</code></pre>\n\n<p>I've tried switching lets places, removing or adding guards, but it still keeps throwing errors.</p>\n"}, {"tags": ["parsing", "haskell", "abstract-syntax-tree", "recursive-descent"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570806820, "post_id": 58343835, "comment_id": 103043353, "body": "You don&#39;t see the <code>parseExpr</code> on the right-hand side of the definitions? That&#39;s the recursion. Your question seems to be &quot;What is a <code>let</code> expression?&quot;"}, {"owner": {"reputation": 37, "user_id": 10400620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84713199bc4b8f53e84569854c49dde5?s=128&d=identicon&r=PG&f=1", "display_name": "clickedok", "link": "https://stackoverflow.com/users/10400620/clickedok"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571002597, "post_id": 58343835, "comment_id": 103086092, "body": "@chepner I don&#39;t see the parseExpr in the portion of the function where the guards are, so that when x in (x:xs) is something else than &quot;*&quot;, &quot;-&quot;,&quot;+&quot;, and the guards are reached, how does recursion continue?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1571008156, "post_id": 58343835, "comment_id": 103087044, "body": "It <i>doesn&#39;t</i> recurse in those cases. Those are base cases."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10400620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84713199bc4b8f53e84569854c49dde5?s=128&d=identicon&r=PG&f=1", "display_name": "clickedok", "link": "https://stackoverflow.com/users/10400620/clickedok"}, "edited": false, "score": 0, "creation_date": 1571002699, "post_id": 58344271, "comment_id": 103086114, "body": "Thanks a lot @chepner. That really helped. Sorry for late feedback. Was busy with Java stuff over the weekend."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 1, "last_activity_date": 1570808366, "last_edit_date": 1570808366, "creation_date": 1570807274, "answer_id": 58344271, "question_id": 58343835, "link": "https://stackoverflow.com/questions/58343835/understanding-this-implemented-recursive-descent-parser-in-haskell/58344271#58344271", "title": "Understanding this implemented recursive-descent parser in Haskell", "body": "<p>Let's write one of the definitions out in a more conventional fashion:</p>\n\n<pre><code>parseExpr (\"+\":rs) = let (e1, r1) = parseExpr rs -- recursive call #1\n                         (e2, r2) = parseExpr r1 -- recursive call #2\n                     in (Sum e1 e2, r2)\n</code></pre>\n\n<p>Given a list that starts with a <code>\"+\"</code>, we first recursively parse the tokens that follow the <code>\"+\"</code>; the resulting expression is assigned the name <code>e1</code> and the unused suffix of <code>rs</code> is assigned the name <code>r1</code>. We repeat the process by parsing <code>r1</code> to get an expression <code>e2</code> and a remaining input <code>r2</code>. With that, we can construct the <code>Sum</code> value using the two subexpressions <code>e1</code> and <code>e2</code>, and pass back <code>r2</code> for our caller to parse.</p>\n\n<p>Using your example,</p>\n\n<pre><code>-- Step 1\nparseExpr [\"+\",\"4\",\"*\",\"8\",\"-\",\"5\"] \n  = let (e1, r1) = parseExpr [\"4\",\"*\",\"8\",\"-\",\"5\"]\n        (e2, r2) = parseExpr r1\n    in (Sum e1 e2, r2)\n</code></pre>\n\n<p>Before we can do any more, we have to evaluate the first recursive call</p>\n\n<pre><code>-- Step 2\nparseExpr [\"4\",\"*\",\"8\",\"-\",\"5\"] = (Tall 4, [\"*\",\"8\",\"-\",\"5\"])\n</code></pre>\n\n<p>Now we can plug that result back into step 1</p>\n\n<pre><code>-- Step 3\nparseExpr [\"+\",\"4\",\"*\",\"8\",\"-\",\"5\"] \n  = let (e1, r1) = (Tall 4, [\"*\",\"8\",\"-\",\"5\"])\n        (e2, r2) = parseExpr r1\n    in (Sum e1 e2, r2)\n\n-- Step 4\nparseExpr [\"+\",\"4\",\"*\",\"8\",\"-\",\"5\"] \n  = let (e2, r2) = parseExpr [\"*\",\"8\",\"-\",\"5\"]\n    in (Sum (Tall 4) e2, r2)\n</code></pre>\n\n<p>And so forth... </p>\n"}], "owner": {"reputation": 37, "user_id": 10400620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84713199bc4b8f53e84569854c49dde5?s=128&d=identicon&r=PG&f=1", "display_name": "clickedok", "link": "https://stackoverflow.com/users/10400620/clickedok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 58344271, "answer_count": 1, "score": 1, "last_activity_date": 1570808366, "creation_date": 1570805712, "last_edit_date": 1570806528, "question_id": 58343835, "link": "https://stackoverflow.com/questions/58343835/understanding-this-implemented-recursive-descent-parser-in-haskell", "title": "Understanding this implemented recursive-descent parser in Haskell", "body": "<p>I had an assignment problem were I had to parse a tokenized prefix calculator notation on a pre-defined AST. We were given a pretty complete algorithm for parsing (we had to add some stuff).</p>\n\n<p>The algorithm and AST I submitted is as follows:</p>\n\n<pre><code>data Ast = Tall Int | Sum Ast Ast | Mult Ast Ast | Min Ast | Var String  deriving (Eq, Show)\n\nparseExpr :: [String] -&gt; (Ast, [String])\nparseExpr [] = error \"Empty!\"\nparseExpr (\"+\":rs) = let (e1, r1) = parseExpr rs ;(e2, r2) = parseExpr r1 in (Sum e1 e2, r2)\nparseExpr (\"*\":rs) = let (e1, r1) = parseExpr rs ;(e2, r2) = parseExpr r1 in (Mult e1 e2, r2)\nparseExpr (\"-\":rs) = let (e1, r1) = parseExpr rs in (Min e1, r1)\nparseExpr (x:rs)\n        | all isDigit x = (Tall (read x), rs)\n        | all isAlpha x = (Var x, rs)\n        | otherwise = error (\"Syntax errors \"++x)\n</code></pre>\n\n<p>Example of input/output:</p>\n\n<pre><code>parseExpr [\"+\",\"4\",\"*\",\"8\",\"-\",\"5\"] =\n (Sum (Tall 4) (Mult (Tall 8) (Min (Tall 5))),[])\n</code></pre>\n\n<p>What I needed in the continuation of my assignment was the first part of the tuple. This is correct, the assignment is handed in, and all is well for the purposes of the assignment. </p>\n\n<p>Having said that, I don't know what is going on in the recursive function. Especially in these three lines:</p>\n\n<pre><code>parseExpr (\"+\":rs) = let (e1, r1) = parseExpr rs ;(e2, r2) = parseExpr r1 in (Sum e1 e2, r2)\nparseExpr (\"*\":rs) = let (e1, r1) = parseExpr rs ;(e2, r2) = parseExpr r1 in (Mult e1 e2, r2)\nparseExpr (\"-\":rs) = let (e1, r1) = parseExpr rs in (Min e1, r1)\n</code></pre>\n\n<p>Of course, I get the (\"+\":rs) notation. What I have difficulty understanding is the \"let (e1, r1) = .....\"etc.</p>\n\n<p>And in the guards at the end, I don't see any recursive calls. Yet, recursion happens, right? How does this work?</p>\n"}, {"tags": ["parsing", "haskell", "operators", "expression", "parentheses"], "comments": [{"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 1, "creation_date": 1570800024, "post_id": 58341959, "comment_id": 103039386, "body": "Barring fixity declarations (using <code>infixl</code>, <code>infixr</code> or <code>infix</code>), your operators all will have precedence 9 (the same as <code>!!</code> and <code>.</code>) and be left-associative. However, that has nothing to do with the precedence and associative you assign to operators in your parsed language. Your <code>toExpr</code> function can handle these in whichever way you want regardless of the precedence or associativity of <code>:+:</code> and co."}], "answers": [{"comments": [{"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1570801251, "post_id": 58342189, "comment_id": 103040062, "body": "While that&#39;s true, this won&#39;t affect the result of <code>toExpr</code> at all, so I don&#39;t think this helps with OP&#39;s actual problem."}, {"owner": {"reputation": 31, "user_id": 11629811, "user_type": "registered", "profile_image": "https://graph.facebook.com/2336219463091710/picture?type=large", "display_name": "Arseny Nikonov", "link": "https://stackoverflow.com/users/11629811/arseny-nikonov"}, "edited": false, "score": 0, "creation_date": 1570801350, "post_id": 58342189, "comment_id": 103040134, "body": "Thanks for the answer, but as sepp2k mentioned, unfortunately, it does not help with my initial problem since even with addition of infixl after my toExpr parsing it is still parsed left to right."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 31, "user_id": 11629811, "user_type": "registered", "profile_image": "https://graph.facebook.com/2336219463091710/picture?type=large", "display_name": "Arseny Nikonov", "link": "https://stackoverflow.com/users/11629811/arseny-nikonov"}, "edited": false, "score": 0, "creation_date": 1570801512, "post_id": 58342189, "comment_id": 103040222, "body": "@ArsenyNikonov: the parsing indeed is not affected, since you do that manually. I think you here should use an LL, LR, or LALR parser that uses a stack for intermediate results."}, {"owner": {"reputation": 31, "user_id": 11629811, "user_type": "registered", "profile_image": "https://graph.facebook.com/2336219463091710/picture?type=large", "display_name": "Arseny Nikonov", "link": "https://stackoverflow.com/users/11629811/arseny-nikonov"}, "edited": false, "score": 0, "creation_date": 1570801730, "post_id": 58342189, "comment_id": 103040373, "body": "Thanks for the suggestion, i&#39;ll look into it."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 2, "last_activity_date": 1570801474, "last_edit_date": 1570801474, "creation_date": 1570800073, "answer_id": 58342189, "question_id": 58341959, "link": "https://stackoverflow.com/questions/58341959/how-do-parentheses-work-with-custom-data-types/58342189#58342189", "title": "How do parentheses work with custom data types?", "body": "<blockquote>\n  <p>I don't understand how parentheses in the second case are implemented in Haskell.</p>\n</blockquote>\n\n<p>The brackets just give precedence to a certain part of the expression to parse. The problem is not with the parenthesis you render. I think the problem is that you did <em>not</em> assign precedence to your operators. This thus means that, unless you specify brackets, Haskell will consider all operators to have the same precedence, and parse these left-to-right. This thus means that <em>x &oplus; y &otimes; z</em> is parsed as <em>(x &oplus; y) &otimes; z</em>.</p>\n\n<p>You can define the precedence of your <code>:+:</code>, <code>:*</code>, etc. operators with <code>infixl</code>:</p>\n\n<pre><code>infixl 7 :*:, :/:, :%:\ninfixl 5 :+:, :-:\n\ntype Name = String\ndata Expr = Val Integer\n          | Var Name\n          | Expr :+: Expr\n          | Expr :-: Expr\n          | Expr :*: Expr\n          | Expr :/: Expr\n          | Expr :%: Expr</code></pre>\n\n<p>As for your parser (the <code>toExpr</code>), you will need a parsing mechanism like a <a href=\"https://en.wikipedia.org/wiki/LALR_parser\" rel=\"nofollow noreferrer\"><em>LALR parser</em> [wiki]</a> that stores results on a stack, and thus makes proper operations.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11629811, "user_type": "registered", "profile_image": "https://graph.facebook.com/2336219463091710/picture?type=large", "display_name": "Arseny Nikonov", "link": "https://stackoverflow.com/users/11629811/arseny-nikonov"}, "is_accepted": false, "score": 1, "last_activity_date": 1570876794, "creation_date": 1570876794, "answer_id": 58353271, "question_id": 58341959, "link": "https://stackoverflow.com/questions/58341959/how-do-parentheses-work-with-custom-data-types/58353271#58353271", "title": "How do parentheses work with custom data types?", "body": "<p>This was my final parser which gave me the result I needed. To get the result i wanted proper grammar was added and i wrote a parses according to he grammar. \nThanks, everyone for the help.</p>\n\n<pre><code>{-\n  parser for the following grammar:\n  E  -&gt; T E'\n  E' -&gt; + T E' | - T E' | &lt;empty string&gt;\n  T  -&gt; F T'\n  T' -&gt; * F T' | / F T' | % F T' | &lt;empty string&gt;\n  F  -&gt; (E) | &lt;integer&gt; | &lt;identifier&gt; \n-}\n\nparseExpr :: String -&gt; (Expr,[String])\nparseExpr tokens = parseE (lexer tokens)\n\nparseE :: [String] -&gt; (Expr,[String])\nparseE tokens = parseE' acc rest where (acc,rest) = parseT tokens\n\nparseE' :: Expr -&gt; [String] -&gt; (Expr,[String])\nparseE' accepted (\"+\":tokens) = let (acc,rest) = parseT tokens in parseE' (accepted :+: acc) rest\nparseE' accepted (\"-\":tokens) = let (acc,rest) = parseT tokens in parseE' (accepted :-: acc) rest\nparseE' accepted tokens = (accepted,tokens)\n\nparseT :: [String] -&gt; (Expr,[String])\nparseT tokens = let (acc,rest) = parseF tokens in parseT' acc rest\n\nparseT' :: Expr -&gt; [String] -&gt; (Expr,[String])\nparseT' accepted (\"*\":tokens) = let (acc,rest) = parseF tokens in parseT' (accepted :*: acc) rest\nparseT' accepted (\"/\":tokens) = let (acc,rest) = parseF tokens in parseT' (accepted :/: acc) rest\nparseT' accepted (\"%\":tokens) = let (acc,rest) = parseF tokens in parseT' (accepted :%: acc) rest\nparseT' accepted tokens = (accepted,tokens)\n\nparseF :: [String] -&gt; (Expr,[String])\nparseF (\"(\":tokens) = (e, tail rest) where (e,rest) = parseE tokens \nparseF (t:tokens)\n  | isAlpha (head t) = (Var t,tokens)\n  | isDigit (head t) = (Val (read t),tokens)\n  | otherwise = error \"\"\nparseF [] = error \"\"\n\n\nlexer :: String -&gt; [String]\nlexer [] = []\nlexer (c:cs)\n  | elem c \" \\t\\n\"        = lexer cs   \n  | elem c \"=+-*/%()\" = [c]:(lexer cs)\n  | isAlpha c             = (c:takeWhile isAlpha cs):lexer(dropWhile isAlpha cs)\n  | isDigit c             = (c:takeWhile isDigit cs):lexer(dropWhile isDigit cs)\n  | otherwise             = error \"\"\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11629811, "user_type": "registered", "profile_image": "https://graph.facebook.com/2336219463091710/picture?type=large", "display_name": "Arseny Nikonov", "link": "https://stackoverflow.com/users/11629811/arseny-nikonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1570889895, "creation_date": 1570799287, "last_edit_date": 1570889895, "question_id": 58341959, "link": "https://stackoverflow.com/questions/58341959/how-do-parentheses-work-with-custom-data-types", "title": "How do parentheses work with custom data types?", "body": "<p>Currently, I am working on a problem of parsing and showing expressions in Haskell.</p>\n\n<pre><code>type Name = String\ndata Expr = Val Integer\n          | Var Name\n          | Expr :+: Expr\n          | Expr :-: Expr\n          | Expr :*: Expr\n          | Expr :/: Expr\n          | Expr :%: Expr\n</code></pre>\n\n<p>This is the code of my data type Expr and this is how i define show function:</p>\n\n<pre><code>instance Show Expr where\n  show (Val x) = show x\n  show (Var y) = y\n  show (p :+: q) = par (show p ++ \"+\" ++ show q)\n  show (p :-: q) = par (show p ++ \"-\" ++ show q)\n  show (p :/: q) = par (show p ++ \"/\" ++ show q)\n  show (p :*: q) = par (show p ++ \"*\" ++ show q)\n  show (p :%: q) = par (show p ++ \"%\" ++ show q)\n\npar :: String -&gt; String\npar s = \"(\" ++ s ++ \")\"\n</code></pre>\n\n<p>Later i tried to transform string input into the expression but i encounter the following problem: I don't understand how parentheses in the second case are implemented in Haskell.</p>\n\n<pre><code>*Main&gt; Val 2 :*:Val 2 :+: Val 3 \n((2*2)+3)\n*Main&gt; Val 2 :*:(Val 2 :+: Val 3) \n(2*(2+3))\n</code></pre>\n\n<p>Because of that, i am a bit confused regarding how should i transform parentheses from my string into the expression. Currently i am using the following function for parsing, but for now, it just ignores parentheses which is not intended behavior:</p>\n\n<pre><code>toExpr :: String -&gt; Expr\ntoExpr str = f (lexer str) (Val 0)\n   where \n    f [] expr = expr\n    f (c:cs) expr\n     |isAlpha (head c)  = f cs (Var c)\n     |isDigit (head c)  = f cs (Val (read c))\n     |c == \"+\"  = (expr :+: f cs (Val 0))\n     |c == \"-\"  = (expr :-: f cs (Val 0))\n     |c == \"/\"  = (expr :/: f cs (Val 0))\n     |c == \"*\"  = (expr :*: f cs (Val 0))\n     |c == \"%\"  = (expr :%: f cs (Val 0))\n     |otherwise = f cs expr\n</code></pre>\n\n<p>Edit: few grammar mistakes</p>\n"}, {"tags": ["parsing", "haskell", "trifecta"], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1570817716, "post_id": 58341709, "comment_id": 103048073, "body": "A left fold seems inappropriate here. Why not use a right fold?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1570817815, "post_id": 58341709, "comment_id": 103048105, "body": "Also, a partial fold is sad. <code>foldr (&lt;|&gt;) empty</code> should do the trick, no?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1570817964, "post_id": 58341709, "comment_id": 103048167, "body": "@dfeuer: yes, I only demonstrated the &quot;minimal change&quot; here. But indeed, this can be improved."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1570818103, "last_edit_date": 1570818103, "creation_date": 1570798449, "answer_id": 58341709, "question_id": 58341656, "link": "https://stackoverflow.com/questions/58341656/how-to-do-a-backtrack-search-with-parser-combinators/58341709#58341709", "title": "How to do a backtrack search with parser combinators?", "body": "<p>The <code>try</code> level is performed too high. You should perform it on the individual parsers. For example:</p>\n\n<pre><code>parseString (foldl1 (&lt;|&gt;) $ map (\\x -&gt; <b>try</b> (x &lt;* eof)) parsers) mempty \"ab\"</code></pre>\n\n<hr>\n\n<p>In the original parser you wrote:</p>\n\n<pre><code>parseString (<b>(</b>try (string \"a\" &lt;* eof)<b>)</b> &lt;|&gt; (string \"ab\" &lt;*eof)) mempty \"ab\"</code></pre>\n\n<p>Notice that the left operand of <code>&lt;|&gt;</code> is <code>try (string \"a\" &lt;* eof)</code> with <code>try</code> included.</p>\n\n<p>whereas in the one you performed with <code>foldl1</code>, you wrote:</p>\n\n<pre><code>parseString (try <b>(</b>(string \"a\" &lt;* eof) &lt;|&gt; (string \"ab\" &lt;*eof)<b>)</b>) mempty \"ab\"</code></pre>\n\n<p>So here is the <code>try</code> not part of the left operand. As a result, if the first parser fails, the \"cursor\" will not return to the point where it made the decision to try the first operand.</p>\n\n<hr>\n\n<p>We can improve the above, by making use of <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Foldable.html#v:asum\" rel=\"nofollow noreferrer\"><strong><code>asum :: (Foldable t, Alternative f) -&gt; t (f a) -&gt; f a</code></strong></a>:</p>\n\n<pre><code>import Data.Foldable(asum)\n\nparseString (asum (map (\\x -&gt; try (x &lt;* eof)) parsers)) mempty \"ab\"</code></pre>\n"}], "owner": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570818103, "creation_date": 1570798258, "question_id": 58341656, "link": "https://stackoverflow.com/questions/58341656/how-to-do-a-backtrack-search-with-parser-combinators", "title": "How to do a backtrack search with parser combinators?", "body": "<p>I have a list of parsers e.g. <code>[string \"a\",string \"ab\"]</code> that are \"overlapping\". I can change neither the parsers themselves nor their order.  </p>\n\n<p>With these parsers I want to parse a sequence of tokens that would each be exact matches for one of the parsers e.g. <code>\"aaaab\", \"ab\", \"abab\"</code> but not <code>\"abb\"</code></p>\n\n<p>Without parsers I would just implement a dept first search, but I would like to solve this with parsers.</p>\n\n<p>I get about this far:</p>\n\n<pre><code>import Control.Applicative\nimport Text.Trifecta\n\nparsers = [string \"a\",string \"ab\"]\n\nparseString (many (choice parsers) &lt;* eof) mempty \"aab\"\n</code></pre>\n\n<p>This fails because it will parse <code>\"a\"</code> both times, and not backtrack because <code>choice</code> doesn't do that. And further, <code>string \"a\"</code> has succeeded both times so the consumed input probably can't be retrieved anymore.\nHow can implement a parser that can backtrack and produce a list of parse results e.g. <code>Success [\"a\",\"ab\"]</code>?</p>\n\n<p>If I require the input to have the tokens separated, I still can't make it work:</p>\n\n<p>This works:</p>\n\n<pre><code>parseString (try (string \"a\" &lt;* eof) &lt;|&gt; (string \"ab\" &lt;*eof)) mempty \"ab\"\n</code></pre>\n\n<p>But this does not:</p>\n\n<pre><code>parseString (try (foldl1 (&lt;|&gt;) $ map (\\x -&gt; x &lt;* eof) parsers)) mempty \"ab\"\n</code></pre>\n"}, {"tags": ["python", "haskell", "functional-programming", "partial-application", "partial-functions"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 41, "creation_date": 1570788806, "post_id": 58339040, "comment_id": 103033681, "body": "You are confusing a <i>partially applied</i> function with a <i>partial</i> function."}, {"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 13, "creation_date": 1570788935, "post_id": 58339040, "comment_id": 103033745, "body": "Python&#39;s <code>partial</code> performs <a href=\"https://en.wikipedia.org/wiki/Partial_application\" rel=\"nofollow noreferrer\">partial application</a>, whereas Haskell does that automatically. The wiki entry refers to <a href=\"https://en.wikipedia.org/wiki/Partial_function\" rel=\"nofollow noreferrer\"><i>partial functions</i></a>, which is a term from mathematics."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 10, "creation_date": 1570792781, "post_id": 58339040, "comment_id": 103035592, "body": "Strictly speaking, Haskell doesn&#39;t do partial function application. Every function takes one argument, and function application applies a function to a single argument. Currying <i>simulates</i> what you would think of as partial application in another language by simulating multiple-argument functions in the first place. Something like <code>add 3 5</code> isn&#39;t a single function application. This first applies <code>add</code> to 3 to get a new function, which is then applied to 5."}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1570845706, "post_id": 58339040, "comment_id": 103055204, "body": "And in C#, a <code>partial</code> method is a forward declaration of an <i>optionally</i> implemented private method elsewhere in the project codebase."}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 1, "creation_date": 1570846885, "post_id": 58339040, "comment_id": 103055330, "body": "Your example could be made valid: <code>new_function = functools.partial(add, 1)</code>"}, {"owner": {"reputation": 15754, "user_id": 9835872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PN0Lq.jpg?s=128&g=1", "display_name": "ruohola", "link": "https://stackoverflow.com/users/9835872/ruohola"}, "edited": false, "score": 0, "creation_date": 1571045225, "post_id": 58339040, "comment_id": 103096814, "body": "Your example (and thus the question) is invalid: <code>Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; TypeError: add() missing 1 required positional argument: &#39;y&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 12923, "user_id": 1530508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fG8z0.png?s=128&g=1", "display_name": "ApproachingDarknessFish", "link": "https://stackoverflow.com/users/1530508/approachingdarknessfish"}, "edited": false, "score": 26, "creation_date": 1570946420, "post_id": 58339097, "comment_id": 103073842, "body": "This is a good answer, but it could be improved by adding an example of a partial function to the answer itself."}, {"owner": {"reputation": 52627, "user_id": 1971805, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YBbqr.jpg?s=128&g=1", "display_name": "TerryA", "link": "https://stackoverflow.com/users/1971805/terrya"}, "edited": false, "score": 4, "creation_date": 1571014238, "post_id": 58339097, "comment_id": 103087959, "body": "I&#39;m not sure I agree with that exact definition of a partially applied function. Functions in Haskell always only take one argument, never &quot;multiple arguments&quot;. I would use the definition &quot;partial application (partially applying functions) in Haskell involves supplying fewer than the full number of arguments needed to obtain a value that cannot be further applied to another argument.&quot; (adapted from <a href=\"https://stackoverflow.com/a/47700022/1971805\">here</a>)"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 89, "last_activity_date": 1570788947, "creation_date": 1570788947, "answer_id": 58339097, "question_id": 58339040, "link": "https://stackoverflow.com/questions/58339040/what-exactly-is-meant-by-partial-function-in-functional-programming/58339097#58339097", "title": "What exactly is meant by &quot;partial function&quot; in functional programming?", "body": "<p>You are here confusing two concepts. A <a href=\"https://wiki.haskell.org/Partial_application\" rel=\"noreferrer\"><em>partially <strong>applied</strong> function</em> [haskell-wiki]</a> with a <a href=\"https://wiki.haskell.org/Partial_functions\" rel=\"noreferrer\"><em>partial function</em> [haskell-wiki]</a>.</p>\n\n<p>A partially <em>applied</em> function is:</p>\n\n<blockquote>\n  <p>Partial application in Haskell involves <strong>passing less than the full number of arguments</strong> to a function that takes multiple arguments.</p>\n</blockquote>\n\n<p>whereas a partial function indeed is a non-total function:</p>\n\n<blockquote>\n  <p>A partial function is a function that is not defined for all possible arguments of the specified type.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "is_accepted": false, "score": 24, "last_activity_date": 1570789148, "creation_date": 1570789148, "answer_id": 58339162, "question_id": 58339040, "link": "https://stackoverflow.com/questions/58339040/what-exactly-is-meant-by-partial-function-in-functional-programming/58339162#58339162", "title": "What exactly is meant by &quot;partial function&quot; in functional programming?", "body": "<p>A partial function (both in the context of functional programming and mathematics) is exactly what the wiki says: a function not defined for all of its possible arguments. In the context of programming, we usually interpret \"not defined\" as one of several things, including undefined behaviour, exceptions or non-termination.</p>\n\n<p>An example of a partial function would be integer division, which is not defined if the divisor is 0 (in Haskell it will throw an error).</p>\n\n<blockquote>\n  <p>in above snippet new_function is partial function.</p>\n</blockquote>\n\n<p>That code would simply cause an error in Python, but if it worked as you intended, it would be a total (meaning not partial) function.</p>\n\n<p>As commentors already pointed out, you're most likely thinking of the fact that it'd be a <em>partially applied</em> function.</p>\n"}, {"comments": [{"owner": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "edited": false, "score": 0, "creation_date": 1578567889, "post_id": 58340925, "comment_id": 105484250, "body": "Its worth mentioning that python has support for <a href=\"https://docs.python.org/3/library/functools.html?highlight=functools#functools.partial\" rel=\"nofollow noreferrer\">partial functions</a> in the standard library."}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 20, "last_activity_date": 1571041544, "last_edit_date": 1571041544, "creation_date": 1570795523, "answer_id": 58340925, "question_id": 58339040, "link": "https://stackoverflow.com/questions/58339040/what-exactly-is-meant-by-partial-function-in-functional-programming/58340925#58340925", "title": "What exactly is meant by &quot;partial function&quot; in functional programming?", "body": "<p>The answers explain all, I will just add one example in each language:</p>\n\n<pre><code>def add(x,y):\n    return x+y\n\nf = add(1)\nprint(f(3))\n\n    f = add(1)\nTypeError: add() missing 1 required positional argument: 'y'\n</code></pre>\n\n<p>this is <strong>neither a partial function nor a curried function</strong>, this is only a function that you <strong>didn't gave all its arguments</strong>.</p>\n\n<p>A curried function in python should be like this:</p>\n\n<pre><code>partialAdd= lambda x: lambda y: x + y\n\nplusOne = partialAdd(1)\nprint(plusOne(3))\n\n4\n</code></pre>\n\n<p>and in haskell:</p>\n\n<pre><code>plus :: Int -&gt; Int -&gt; Int\nplus x y = x + y\n\nplusOne = plus 1\n\nplusOne 4\n\n5\n</code></pre>\n\n<p>A partial function in python:</p>\n\n<pre><code>def first(ls):\n    return ls[0]\n\nprint(first([2,4,5]))\nprint(first([]))\n</code></pre>\n\n<blockquote>\n  <p>output</p>\n</blockquote>\n\n<pre><code>2\n\nprint(first([]))\n  File \"main.py\", line 2, in first\n    return ls[0]\nIndexError: list index out of range\n</code></pre>\n\n<p>And in Haskell, as your <a href=\"https://wiki.haskell.org/Partial_functions\" rel=\"noreferrer\">link</a> showed up:</p>\n\n<pre><code>head [1,2,3]\n3\n\nhead []\n*** Exception: Prelude.head: empty list\n</code></pre>\n\n<blockquote>\n  <p>So what is a total function?</p>\n</blockquote>\n\n<p>Well, basically the opposite: this is a function that will work for any input of that type. Here is an example in python:</p>\n\n<pre><code>def addElem(xs, x):\n  xs.append(x)\n  return xs\n</code></pre>\n\n<p>and this works even for infinite lists, if you use a little trick:</p>\n\n<pre><code>def infiniList():\n    count = 0\n    ls = []\n    while True:\n        yield ls\n        count += 1\n        ls.append(count)\n\nls = infiniList()\nfor i in range(5):\n  rs = next(ls)\n\nprint(rs, addElem(rs,6))\n\n[1, 2, 3, 4]\n[1, 2, 3, 4, 5] [1, 2, 3, 4, 5]\n</code></pre>\n\n<p>And the equivalent in Haskell:</p>\n\n<pre><code>addElem :: a -&gt; [a] -&gt; [a]\naddElem x xs = x : xs\n\naddElem 3 (take 10 [1..])\n=&gt; [3,1,2,3,4,5,6,7,8,9,10]\n</code></pre>\n\n<p>Here the functions doesn't hang forever. The concept is the same: for every list the function will work.</p>\n"}], "owner": {"reputation": 1364, "user_id": 5105791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/54ffN.jpg?s=128&g=1", "display_name": "Saurabh kukade", "link": "https://stackoverflow.com/users/5105791/saurabh-kukade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6163, "favorite_count": 6, "accepted_answer_id": 58339097, "answer_count": 3, "score": 66, "last_activity_date": 1597768095, "creation_date": 1570788746, "last_edit_date": 1570846758, "question_id": 58339040, "link": "https://stackoverflow.com/questions/58339040/what-exactly-is-meant-by-partial-function-in-functional-programming", "title": "What exactly is meant by &quot;partial function&quot; in functional programming?", "body": "<p>According to my understanding, partial functions are functions that we get by passing fewer parameters to a function than expected. For example, if this were directly valid in Python:</p>\n\n<pre><code>&gt;&gt;&gt; def add(x,y):\n...    return x+y\n... \n&gt;&gt;&gt; new_function = add(1)\n&gt;&gt;&gt; new_function(2)\n3\n</code></pre>\n\n<p>In the snippet above, <code>new_function</code> is a partial function. However, according to the <a href=\"https://wiki.haskell.org/Partial_functions\" rel=\"noreferrer\">Haskell Wiki</a>, the definition of partial function is </p>\n\n<blockquote>\n  <p>A partial function is a function that is not defined for all possible arguments of the specified type.</p>\n</blockquote>\n\n<p>so, my question is: what exactly is meant by \"partial function\"?</p>\n"}, {"tags": ["haskell", "oauth", "scotty"], "answers": [{"tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": false, "score": 2, "last_activity_date": 1570799088, "last_edit_date": 1570799088, "creation_date": 1570782652, "answer_id": 58337229, "question_id": 58334036, "link": "https://stackoverflow.com/questions/58334036/how-should-oauth2-certs-be-stored-in-haskell/58337229#58337229", "title": "How should OAuth2 certs be stored in Haskell", "body": "<p>If you go by something like <a href=\"https://www.parsonsmatt.org/2018/03/22/three_layer_haskell_cake.html\" rel=\"nofollow noreferrer\">three</a> <a href=\"https://github.com/Holmusk/three-layer\" rel=\"nofollow noreferrer\">layers</a> (<a href=\"https://www.fpcomplete.com/blog/2017/06/readert-design-pattern\" rel=\"nofollow noreferrer\"><code>ReaderT</code> design pattern</a>), then caching an <code>IORef</code> or <code>TVar</code> in the environment part in a <code>ReaderT YourEnv IO</code> would be the way to go. (<a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Data-IORef.html#v:atomicModifyIORef-39-\" rel=\"nofollow noreferrer\"><code>atomicModifyIORef'</code></a> should be sufficient.)</p>\n\n<p>The Holmusk link will recommend the <a href=\"http://hackage.haskell.org/package/jwt\" rel=\"nofollow noreferrer\"><code>jwt</code></a> package, but having just added, in another language at work, in-memory caching of Google's OAuth2 certificates, picking a JWT library in Haskell also appears very much like a feature trade-off:</p>\n\n<p>For example, <code>jwt</code> <a href=\"https://hackage.haskell.org/package/jwt/docs/Web-JWT.html\" rel=\"nofollow noreferrer\">explicitly states</a> that it doesn't check the <code>exp</code> expiration timestamp, but as far as I can see, <code>jose-jwt</code> <a href=\"https://github.com/tekul/jose-jwt/search?q=exp&amp;unscoped_q=exp\" rel=\"nofollow noreferrer\">doesn't even address</a> the <code>exp</code> expiration timestamp that it decodes. <a href=\"https://hackage.haskell.org/package/google-oauth2-jwt\" rel=\"nofollow noreferrer\"><code>google-oauth2-jwt</code></a> does, and embeds the endpoint (for good and for bad, harder to mock), but doesn't provide a lot of ergonomics beyond that. (<em>Edit:</em> It appears that <a href=\"https://hackage.haskell.org/package/jose\" rel=\"nofollow noreferrer\"><code>jose</code></a> <a href=\"https://github.com/frasertweedale/hs-jose/pull/15\" rel=\"nofollow noreferrer\">does handle expiration</a>, and that it's also the most popular of those I mentioned on Hackage.)</p>\n"}], "owner": {"reputation": 608, "user_id": 4417894, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/b167616728ad1b28658665b14863fc99?s=128&d=identicon&r=PG&f=1", "display_name": "emg184", "link": "https://stackoverflow.com/users/4417894/emg184"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1570799088, "creation_date": 1570766241, "question_id": 58334036, "link": "https://stackoverflow.com/questions/58334036/how-should-oauth2-certs-be-stored-in-haskell", "title": "How should OAuth2 certs be stored in Haskell", "body": "<p>What would the proper way to store an OAuth2 jwk in haskell? The certs i am retrieving are from <a href=\"https://www.googleapis.com/oauth2/v3/certs\" rel=\"nofollow noreferrer\">https://www.googleapis.com/oauth2/v3/certs</a> and I would like to avoid calling out for certs each time i need to verify the signature on a token. The options seem to be MVar, TVar, IORef, or the state monad although i am not quite sure how i would implement the state monad for this.</p>\n\n<p>The basic steps would be the following (running behind a scotty server):</p>\n\n<ol>\n<li>Receive Token from IDP</li>\n<li>Decode Jwt with JWk's</li>\n<li>If the decode fails due to a bad signature then check the endpoint for new certs and modify the current variable containing the cert </li>\n</ol>\n\n<p>I am using jose-jwt, wreq, and scotty right now and have something that works but i would like to implement the approach that i am asking about rather than my existing approach.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>module Main where\n\n\nimport ClassyPrelude\nimport Web.Scotty as S\nimport Network.Wreq as W\nimport Control.Lens as CL\nimport qualified Data.Text.Lazy as TL\nimport qualified Network.URI.Encode as URI\nimport Network.Wai.Middleware.RequestLogger\nimport Jose.Jwe\nimport Jose.Jwa\nimport Jose.Jwk\nimport Jose.Jwt\nimport Jose.Jws\nimport Data.Aeson\nimport qualified Data.HashMap.Strict as HM \nimport qualified Data.Text as T\nimport qualified Data.List as DL\nimport qualified Data.ByteString.Base64 as B64\n\nmain :: IO ()\nmain = scotty 8080 $ do\n  middleware logStdoutDev\n  redirectCallback\n  oauthCallback\n  oauthGen\n  home\n\nhome :: ScottyM ()\nhome = do\n  S.get \"/:word\" $ do\n    beam &lt;- S.param \"word\"\n    html $ mconcat [\"&lt;h1&gt;Scotty, \", beam, \" me up!&lt;/h1&gt;\"]\n\nredirectCallback :: ScottyM ()\nredirectCallback = do\n  S.get \"/redirect\" $ do\n    let v = uriSchemeBuilder\n    redirect $ TL.fromStrict v\n\noauthCallback :: ScottyM ()\noauthCallback = do\n  matchAny \"/goauth2callback\" $ do\n    val &lt;- body\n    pars &lt;- S.params\n    c &lt;- S.param \"code\" `rescue` (\\_ -&gt; return \"haskell\")\n    let c1 = c &lt;&gt; (\"\"::Text)\n    r &lt;- liftIO $ W.post \"https://oauth2.googleapis.com/token\" \n     [ \"code\" := (encodeUtf8 (c))\n     , \"client_id\" := (encodeUtf8 consumerAccess)\n     , \"client_secret\" := (encodeUtf8 consumerSecret)\n     , \"redirect_uri\" := (encodeUtf8 redirectURI)\n     , \"grant_type\" := (\"authorization_code\"::ByteString)\n     , \"access_type\" := (\"offline\"::ByteString)\n     ] \n    let newUser = (r ^? responseBody)\n    case newUser of\n     Just b -&gt; do\n      let jwt = decodeStrict (toStrict b) :: Maybe Value\n      case jwt of\n       Just (Object v) -&gt; do\n        let s = HM.lookup \"id_token\" v\n        case s of\n         Just (String k) -&gt; do\n          isValid &lt;- liftIO $ validateToken (encodeUtf8 k)\n          liftIO $ print isValid\n          redirect \"/hello_world\" \n         _ -&gt; redirect \"/hello_world\"  \n       _ -&gt; redirect \"/hello_world\"       \n     Nothing -&gt; redirect \"/hello_world\"\n\n\noauthGen :: ScottyM ()\noauthGen = do\n  matchAny \"/callback_gen\" $ do\n    val &lt;- body\n    redirect \"/hello_world\"\n\nconsumerAccess :: Text\nconsumerAccess = \"google public key\"\n\nconsumerSecret :: Text\nconsumerSecret = \"google secret key\"\n\noAuthScopes :: Text\noAuthScopes = \"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email\"\n\nredirectURI :: Text\nredirectURI = \"http://localhost:8080/goauth2callback\"\n\nauthURI :: Text\nauthURI = \"https://accounts.google.com/o/oauth2/auth\"\n\ntokenURI :: Text\ntokenURI = \"https://oauth2.googleapis.com/token\"\n\nprojectId :: Text\nprojectId = \"project name\"\n\nresponseType :: Text\nresponseType = \"code\"\n\noAuthUriBuilder :: [(Text, Text)]\noAuthUriBuilder = \n  [ (\"client_id\", consumerAccess)\n  , (\"redirect_uri\", redirectURI)\n  , (\"scope\", oAuthScopes)\n  , (\"response_type\", responseType)\n  ]\n\nuriSchemeBuilder :: Text\nuriSchemeBuilder = authURI &lt;&gt; \"?\" &lt;&gt; (foldr (\\x y -&gt; (fst x ++ \"=\" ++ (URI.encodeText $ snd x)) ++ \"&amp;\" ++ y) \"\" oAuthUriBuilder)\n\nvalidateToken :: ByteString -&gt; IO (Either JwtError  JwtContent)\nvalidateToken b = do\n  keySet &lt;- retrievePublicKeys\n  case keySet of\n   Left e -&gt; return $ Left $ KeyError \"No keyset supplied\"\n   Right k -&gt; do\n    let header = JwsEncoding RS256\n    Jose.Jwt.decode k (Just $ header) b\n\nretrievePublicKeys :: IO (Either String [Jwk])\nretrievePublicKeys = do\n r &lt;- liftIO $ W.get \"https://www.googleapis.com/oauth2/v3/certs\"\n case (r ^? responseBody) of\n  Nothing -&gt; return $ Left \"No body in response from google oauth api\"\n  Just a -&gt; do\n   let v = eitherDecode a :: Either String Value\n   case v of\n    Left e -&gt; return $ Left e\n    Right (Object a) -&gt; do\n     let keySet = HM.lookup \"keys\" a\n     case keySet of\n      Just k -&gt; do\n       let kS = eitherDecode (Data.Aeson.encode k) :: Either String [Jwk]\n       return $ kS\n      _      -&gt; return $ Left \"No Key set provided\"\n    _ -&gt; return $ Left $ \"Incorrect response type from https://www.googleapis.com/oauth2/v3/certs\"\n</code></pre>\n\n<p>The specific part i am interested in replacing is:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>retrievePublicKeys :: IO (Either String [Jwk])\nretrievePublicKeys = do\n r &lt;- liftIO $ W.get \"https://www.googleapis.com/oauth2/v3/certs\"\n case (r ^? responseBody) of\n  Nothing -&gt; return $ Left \"No body in response from google oauth api\"\n  Just a -&gt; do\n   let v = eitherDecode a :: Either String Value\n   case v of\n    Left e -&gt; return $ Left e\n    Right (Object a) -&gt; do\n     let keySet = HM.lookup \"keys\" a\n     case keySet of\n      Just k -&gt; do\n       let kS = eitherDecode (Data.Aeson.encode k) :: Either String [Jwk]\n       return $ kS\n      _      -&gt; return $ Left \"No Key set provided\"\n    _ -&gt; return $ Left $ \"Incorrect response type from https://www.googleapis.com/oauth2/v3/certs\"\n</code></pre>\n\n<p>I've though about storing the Jwk's in redis but i would think that there is a better approach available.</p>\n\n<p>The expected result is to be able to safely modify the cert that i am obtaining from google and using it on subsequent decodings without the need to constantly hit the endpoint.<br>\n(Note: Yes i know that it is bad practice to roll your own security but this is just out of interest)</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1570750542, "post_id": 58332289, "comment_id": 103022338, "body": "Are you running this in GHCi or are you writing this in a file? Remember that Haskell source code and GHCi work differently."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1570750571, "post_id": 58332289, "comment_id": 103022344, "body": "I\u2019m not sure how your <code>if</code>s are formatted because it looks like the formatting got lost in the question (you can <a href=\"https://stackoverflow.com/posts/58332289/edit\">edit</a> it back in), but those <code>|</code> lines need to be indented to be \u201cinside\u201d <code>smallestCoPrimeOf</code>. So put one or more spaces before each. That\u2019ll lead you to the more relevant, non-parse errors :)"}, {"owner": {"reputation": 19, "user_id": 12197998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b326e31e66d5f1219dc28962c3c147df?s=128&d=identicon&r=PG&f=1", "display_name": "user12197998", "link": "https://stackoverflow.com/users/12197998/user12197998"}, "edited": false, "score": 0, "creation_date": 1570754135, "post_id": 58332289, "comment_id": 103022993, "body": "I&#39;ve tried it with parsing, and it still throws the same errors. Yes, I&#39;m writing this in a file."}, {"owner": {"reputation": 19, "user_id": 12197998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b326e31e66d5f1219dc28962c3c147df?s=128&d=identicon&r=PG&f=1", "display_name": "user12197998", "link": "https://stackoverflow.com/users/12197998/user12197998"}, "edited": false, "score": 0, "creation_date": 1570754188, "post_id": 58332289, "comment_id": 103023000, "body": "How can I paste pics somewhere so it would be clearer?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1570795073, "post_id": 58332289, "comment_id": 103036765, "body": "Don&#39;t paste pics. SO policy is against it. Copy and paste the error <i>text</i>, should the need arise: most text interfaces will allow you to do that. More on the problem here: to solve this task it&#39;s easier if you define a (recursive) function <code>smallestCoPrimeOfFrom a b</code> which find the first coprime <code>&gt;=b</code>. Once you do that, you can have <code>smallestCoPrimeOf a = smallestCoPrimeOfFrom a 2</code> and complete your task."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 12197998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b326e31e66d5f1219dc28962c3c147df?s=128&d=identicon&r=PG&f=1", "display_name": "user12197998", "link": "https://stackoverflow.com/users/12197998/user12197998"}, "edited": false, "score": 0, "creation_date": 1570753352, "post_id": 58332452, "comment_id": 103022842, "body": "So I used  | gcd a b == 1  =  b where b = 2 | otherwise     = gcd a (b+1), with proper lining, and it still says &quot;parse error on input \u2018|\u2019&quot;. Is it an indentation-related issue as well?"}, {"owner": {"reputation": 19, "user_id": 12197998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b326e31e66d5f1219dc28962c3c147df?s=128&d=identicon&r=PG&f=1", "display_name": "user12197998", "link": "https://stackoverflow.com/users/12197998/user12197998"}, "edited": false, "score": 0, "creation_date": 1570753618, "post_id": 58332452, "comment_id": 103022893, "body": "And as for     let b = 2     in if (gcd a b) == 1        then b        else gcd a (b+1)    it says &quot;parse error on input \u2018let\u2019&quot;, and google doesn&#39;t help either."}, {"owner": {"reputation": 2585, "user_id": 8491228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5T09.jpg?s=128&g=1", "display_name": "Mor A.", "link": "https://stackoverflow.com/users/8491228/mor-a"}, "reply_to_user": {"reputation": 19, "user_id": 12197998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b326e31e66d5f1219dc28962c3c147df?s=128&d=identicon&r=PG&f=1", "display_name": "user12197998", "link": "https://stackoverflow.com/users/12197998/user12197998"}, "edited": false, "score": 1, "creation_date": 1570762504, "post_id": 58332452, "comment_id": 103024594, "body": "@LifeIsShit I edited the second example he gave with the correct syntax (it was missing an <code>=</code> in line 2)"}], "tags": [], "owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "is_accepted": false, "score": 2, "last_activity_date": 1570762431, "last_edit_date": 1570762431, "creation_date": 1570751066, "answer_id": 58332452, "question_id": 58332289, "link": "https://stackoverflow.com/questions/58332289/constant-errors-in-the-method-for-smallest-coprime-number/58332452#58332452", "title": "Constant errors in the method for smallest coprime number", "body": "<p>In Haskell, indentation matters. You must indent the lines to show what lines are subordinate to others. This is what allows Haskell to avoid using so many brackets, like other languages. Like so:</p>\n\n<pre><code>smallestCoPrimeOf :: Int -&gt; Int\nsmallestCoPrimeOf a \n    | gcd a b == 1  =  b\n    | otherwise     = gcd a (b+1)\n</code></pre>\n\n<p>The amount of indentation is not perscribed, as long as it is consistent.</p>\n\n<p>You could also write:</p>\n\n<pre><code>smallestCoPrimeOf :: Int -&gt; Int\nsmallestCoPrimeOf a =\n    let b = 2\n    in if (gcd a b) == 1\n       then b\n       else gcd a (b+1)\n</code></pre>\n\n<p>Notice how <code>let</code> and <code>in</code> align, as well as <code>if</code>-<code>then</code>-<code>else</code>.</p>\n\n<p>If you're using GHCi, remember to put multi-line declarations in <code>:{</code>-<code>:}</code>:</p>\n\n<pre><code>\u03bb&gt; :{\n\u03bb| smallestCoPrimeOf a \n\u03bb|   | gcd a b == 1  =  b\n\u03bb|   | otherwise     = gcd a (b+1)\n\u03bb| :}\n</code></pre>\n\n<p>There are other issues with your code, but these are for you to discover.</p>\n"}], "owner": {"reputation": 19, "user_id": 12197998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b326e31e66d5f1219dc28962c3c147df?s=128&d=identicon&r=PG&f=1", "display_name": "user12197998", "link": "https://stackoverflow.com/users/12197998/user12197998"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570762431, "creation_date": 1570749530, "last_edit_date": 1570750292, "question_id": 58332289, "link": "https://stackoverflow.com/questions/58332289/constant-errors-in-the-method-for-smallest-coprime-number", "title": "Constant errors in the method for smallest coprime number", "body": "<p>So I'm new to Haskell, and I've been trying to implement the function which finds the smallest coprime number. I have another function for calculating GCD.</p>\n\n<p>I've already tried various ways to implement my function, however, they all failed.</p>\n\n<pre><code>smallestCoPrimeOf :: Int -&gt; Int\nsmallestCoPrimeOf a \n| gcd a b == 1  =  b\n| otherwise     = gcd a (b+1)\n</code></pre>\n\n<p>OR replacing the last two lines with</p>\n\n<pre><code>b = 2\n\nif (gcd a b) == 1 \n\nthen b \n\nelse gcd a (b+1)\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>let b = 2\n\nif (gcd a b) == 1  then b else gcd a (b+1)\n</code></pre>\n\n<p>And all of these end up throwing errors like \"parse error on input \u2018|\u2019\", or \"parse error on input \u2018if\u2019\". Every time I google something and try correcting the mistake, the same error repeats/ anothe one appears. Where is my mistake?</p>\n"}, {"tags": ["haskell", "primes"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1570744141, "post_id": 58331173, "comment_id": 103020828, "body": "You can do a simple linear search: start with a list of primes, and check the sum of each adjacent pair until it either equals your input minus one, or exceeds the input."}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1570770120, "last_edit_date": 1570770120, "creation_date": 1570757498, "answer_id": 58333112, "question_id": 58331173, "link": "https://stackoverflow.com/questions/58331173/checking-if-a-number-is-special-prime/58333112#58333112", "title": "Checking If a Number is Special Prime", "body": "<p>If you use an aux function, you can do it like:</p>\n\n<pre><code>isPrime ::  Integer -&gt; Bool\nisPrime 1 = False\nisPrime 2 = True\nisPrime n \n | (length [x | x &lt;- [2 .. n-1],  n  `mod` x == 0]) &gt; 0 = False\n | otherwise = True \n\nisSpecialPrime :: Integer -&gt; Bool\nisSpecialPrime 1 = False\nisSpecialPrime x =  \n let firstNeighboring = findNeighbore x in\n isSpecialPrime' x firstNeighboring\n\nisSpecialPrime' :: Integer -&gt; Integer -&gt; Bool\nisSpecialPrime' _ 0 = False \nisSpecialPrime' p x =  \n let firstNeighboring = findNeighbore x in\n let secondNeighboring = findNeighbore firstNeighboring in\n if (1 + firstNeighboring + secondNeighboring) == p\n then True\n else isSpecialPrime' p firstNeighboring\n\nfindNeighbore 0 = 0\nfindNeighbore x = if isPrime (x-1) then x-1 else findNeighbore (x-1)\n\nprimes :: [Integer]\nprimes = sieve (2 : [3, 5..])\n  where\n    sieve (p:xs) = p : sieve [x|x &lt;- xs, x `mod` p &gt; 0]\n</code></pre>\n\n<p>As an example:</p>\n\n<pre><code>filter isSpecialPrime $ take 40 primes\n=&gt; [13,19,31,37,43,53,61,79,101,113,139,163,173]\n</code></pre>\n\n<p>A little optimization:</p>\n\n<pre><code>isSpecialPrime' :: Integer -&gt; Integer -&gt; Bool\nisSpecialPrime' _ 1 = False \nisSpecialPrime' p x =\n let firstNeighboring = findNeighbore x in\n let secondNeighboring = findNeighbore firstNeighboring in\n let sumNeigh = secondNeighboring + firstNeighboring in\n if (p `div` 3) &gt; sumNeigh\n  then False else \n  if (1 + sumNeigh) == p\n  then True\n  else isSpecialPrime' p firstNeighboring\n</code></pre>\n\n<p>example:</p>\n\n<pre><code>filter isSpecialPrime $ take 100 primes\n=&gt; [13,19,31,37,43,53,61,79,101,113,139,163,173,199,211,223,241,269,277,331,353,373,397,457,463,509,521,541]\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570775931, "creation_date": 1570741993, "last_edit_date": 1570775931, "question_id": 58331173, "link": "https://stackoverflow.com/questions/58331173/checking-if-a-number-is-special-prime", "title": "Checking If a Number is Special Prime", "body": "<p>I am trying to create a program that prints special prime numbers in Haskell\n<code>isSpecialPrime ::  Integer -&gt; Bool</code> . The function should return if a number is a special prime number or not. A special prime number is a prime number that can be written as the sum of two neighboring prime numbers and 1. An example for a special prime number is 19 = 7 + 11 + 1.</p>\n\n<p>I have managed to check if a number is prime or not here :</p>\n\n<pre><code>isPrime ::  Integer -&gt; Bool\n\nisPrime 1 = False\nisPrime 2 = True\nisPrime n \n | (length [x | x &lt;- [2 .. n-1],  n  `mod` x == 0]) &gt; 0 = False\n | otherwise = True \n</code></pre>\n\n<p>Any ideas to tweak the code to return only the <strong>Special Primes</strong></p>\n\n<p>The output put should be something similar to this</p>\n\n<pre><code>&gt; isSpecialPrime 19\nTrue\n</code></pre>\n"}, {"tags": ["haskell", "vector"], "comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1570741998, "post_id": 58330593, "comment_id": 103020139, "body": "Looking through the source, I found that <code>read</code> is ultimately implemented as <a href=\"https://hackage.haskell.org/package/primitive-0.7.0.0/docs/Data-Primitive-Array.html#v:readArray\" rel=\"nofollow noreferrer\"><code>readArray</code> from <code>Data.Primitive.Array</code></a> which already has this monadic signature. I did not dig deeper, but since it&#39;s a part of standard library, one can find out the specific details of implementation, likely C-based."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 3, "creation_date": 1570742106, "post_id": 58330593, "comment_id": 103020174, "body": "@9000 It&#39;s not about implementation. It&#39;s about semantics. A pure <code>read</code> is fundamentally impossible."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1570747957, "post_id": 58330593, "comment_id": 103021829, "body": "@HTNW: I see; I just wanted to notice that it&#39;s not the <code>MVector</code>&#39;s decision."}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1570742899, "post_id": 58331274, "comment_id": 103020440, "body": "@J.M. Great question: if we could resize the mutable vector, it should definitely be an effect! However, <code>MVector a</code> does not allow resizing (<code>grow</code> creates a new larger vector instead, AFAICS), so <code>length</code> can be non-monadic."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 4, "last_activity_date": 1570742665, "last_edit_date": 1570742665, "creation_date": 1570742522, "answer_id": 58331274, "question_id": 58330593, "link": "https://stackoverflow.com/questions/58330593/why-does-data-vector-mutable-read-return-in-the-monad-since-its-an-immutable-o/58331274#58331274", "title": "Why does Data.Vector.Mutable read() return in the monad since its an immutable operation?", "body": "<p>Consider</p>\n\n<pre><code>foo = do\n   ...\n   x1 &lt;- read vector 3\n   write vector 3 something\n   x2 &lt;- read vector 3\n   return (x1 == x2)\n</code></pre>\n\n<p>If <code>read</code> becomes non monadic, we can instead write this</p>\n\n<pre><code>foo = do\n   ...\n   let x1 = read vector 3\n   write vector 3 something\n   let x2 = read vector 3\n   return (x1 == x2)\n</code></pre>\n\n<p>which is equivalent, by referential transparency, to</p>\n\n<pre><code>foo = do\n   ...\n   let x1 = read vector 3\n   write vector 3 something\n   let x2 = x1\n   return (x1 == x2)\n</code></pre>\n\n<p>Here, we have an issue: the last snippet always returns <code>True</code> at the end, while the first one does not. So the two snippets are not really equivalent.</p>\n\n<p>Reading must be considered an effect, not because it is observable from outside (it is not), but because it produces a different result depending on the state of the vector, which is effected by writes.</p>\n"}, {"comments": [{"owner": {"reputation": 743, "user_id": 7058336, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8ab015fdc364a6f1fc3c17e888495568?s=128&d=identicon&r=PG&f=1", "display_name": "jam", "link": "https://stackoverflow.com/users/7058336/jam"}, "edited": false, "score": 0, "creation_date": 1590227072, "post_id": 58331308, "comment_id": 109604557, "body": "I asked this some time ago but now I realize something. Perhaps the monadic read should not exist and one should be forced to unsafe freeze a vector, to read its pure version. This approach common in other languages allows just one version of read, and the implementer of read is unable to change the vector which is good but, unsafeFreeze might be unsafe if badly used. In haskell, practice is to have both a pure and monadic version. Thats more code and implementer of monadic read is not disallowed to change the vector which is also bad. In any approach there seems to be unsafe sides."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 743, "user_id": 7058336, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8ab015fdc364a6f1fc3c17e888495568?s=128&d=identicon&r=PG&f=1", "display_name": "jam", "link": "https://stackoverflow.com/users/7058336/jam"}, "edited": false, "score": 0, "creation_date": 1617231363, "post_id": 58331308, "comment_id": 118250545, "body": "@jam What would that actually protect against? Presumably whatever nasty thing an implementer might choose to do in <code>read</code> they could also choose to do in <code>freeze</code>."}], "tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 9, "last_activity_date": 1570742709, "creation_date": 1570742709, "answer_id": 58331308, "question_id": 58330593, "link": "https://stackoverflow.com/questions/58330593/why-does-data-vector-mutable-read-return-in-the-monad-since-its-an-immutable-o/58331308#58331308", "title": "Why does Data.Vector.Mutable read() return in the monad since its an immutable operation?", "body": "<p>Assume</p>\n\n<pre><code>read :: MVector s a -&gt; Int -&gt; a\n</code></pre>\n\n<p>which means <code>read</code> is pure. Consider</p>\n\n<pre><code>main :: IO ()\nmain = do\n  cell &lt;- replicate 1 'a' -- cell = ['a']\n  print $ read cell 1 -- we want to print 'a'\n  write cell 1 'z' -- cell = ['z']\n  print $ read cell 1 -- we want to print 'z'\n</code></pre>\n\n<p>Something's gone wrong: I wrote <code>read cell 1</code> twice, passing <em>the same</em> <code>cell</code> and <code>1</code> arguments, so the two calls should return the same value. That's what it means for <code>read</code> to be pure. The above should be equal to</p>\n\n<pre><code>main :: IO ()\nmain = do\n  cell &lt;- replicate 1 'a' -- cell = ['a']\n  let contents = read cell 1 -- contents = 'a'\n  print contents -- prints 'a'\n  write cell 1 'z' -- cell = ['z']; definitely should not affect contents\n  print contents -- prints 'a'\n</code></pre>\n\n<p>But we don't want that: we want <code>read</code> to return different things even when we pass the same arguments, taking into account any <code>write</code>s that might have happened in between. Therefore, <code>read</code> must be a monadic action.</p>\n\n<p>This is different from <code>length</code>. A vector's length never changes, even if the vector is mutable; the length fixed at creation. Therefore, <code>length</code> <em>is</em> a pure function; it doesn't matter what monadic actions you've performed between creating a vector and querying its length; it will always be the same.</p>\n"}], "owner": {"reputation": 743, "user_id": 7058336, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8ab015fdc364a6f1fc3c17e888495568?s=128&d=identicon&r=PG&f=1", "display_name": "jam", "link": "https://stackoverflow.com/users/7058336/jam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 58331308, "answer_count": 2, "score": 6, "last_activity_date": 1570742709, "creation_date": 1570739120, "last_edit_date": 1570739434, "question_id": 58330593, "link": "https://stackoverflow.com/questions/58330593/why-does-data-vector-mutable-read-return-in-the-monad-since-its-an-immutable-o", "title": "Why does Data.Vector.Mutable read() return in the monad since its an immutable operation?", "body": "<p>Looking here <a href=\"http://hackage.haskell.org/package/vector-0.12.0.3/docs/Data-Vector-Mutable.html\" rel=\"noreferrer\">http://hackage.haskell.org/package/vector-0.12.0.3/docs/Data-Vector-Mutable.html</a>\nOne can see that the type of read is:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>read :: PrimMonad m =&gt; MVector (PrimState m) a -&gt; Int -&gt; m a\n</code></pre>\n\n<p>Since read operation does not modify the vector, my main question is why is it not:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>read :: PrimMonad m =&gt; MVector (PrimState m) a -&gt; Int -&gt; a\n</code></pre>\n\n<p>The length of a mutable vector is also doing something immutable on a vector, and its type is  <code>MVector s a -&gt; Int</code> which looks normal. It is not <code>PrimMonad m =&gt; MVector (PrimState m) a -&gt; m Int</code>.\nSo why was this difference of design choice made between read and length since they are both immutable operations on a vector?</p>\n\n<p>Now that I think about it, could it be somehow that the cell returned by read is a reference to the cell inside the vector and not a copy of its data?\nIf so how can I nicely and cheaply get immutable access to the n-th element in a mutable vector? I'm learning haskell and not too sure about details.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["haskell", "graph", "functional-programming"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570728625, "post_id": 58328166, "comment_id": 103014623, "body": "<code>graphvizNodesList (Graph arcs labels styles) = [(id,label,style) | id&lt;-keys, label&lt;-(elems labels), style&lt;-(elems styles)]</code> What is <code>keys</code> when you do <code>id&lt;-keys</code>? I don&#39;t see this name in scope at this point of your code."}, {"owner": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570728689, "post_id": 58328166, "comment_id": 103014663, "body": "I tried it, i did it inside <code>[( show id,label,style) |   or here show id&lt;-keys,... </code> i tried to put () everywhere around show id but i always got some error messages"}, {"owner": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570728721, "post_id": 58328166, "comment_id": 103014675, "body": "keys is a function of Data.Map keys :: Map k a -&gt; [k], O(n). Return all keys of the map in ascending order."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570728736, "post_id": 58328166, "comment_id": 103014681, "body": "See my new comment. I think there is some bigger error than just converting <code>id</code> to a <code>String</code>."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570728776, "post_id": 58328166, "comment_id": 103014698, "body": "<code>keys is a function of Data.Map</code> Then <code>id&lt;-keys</code> doesn&#39;t make any sense. In this context, <code>keys</code> should be a list, not a function. Where should you get the ids from?"}, {"owner": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570728877, "post_id": 58328166, "comment_id": 103014746, "body": "Yeah but it returns a list"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570728948, "post_id": 58328166, "comment_id": 103014781, "body": "It returns a list <b>when you apply it to some parameters</b>. You aren&#39;t doing that here. You are only referencing the function itself. You need to apply the <code>keys</code> function to some map to get the keys from <b>that map</b>. Which map do you want the keys from?"}, {"owner": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570729084, "post_id": 58328166, "comment_id": 103014835, "body": "OHHHHH it worked omygod"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1570729353, "post_id": 58328166, "comment_id": 103014932, "body": "For future reference, you should post the error message you get from your code."}], "answers": [{"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": true, "score": 1, "last_activity_date": 1570729224, "creation_date": 1570729224, "answer_id": 58328399, "question_id": 58328166, "link": "https://stackoverflow.com/questions/58328166/how-to-convert-something-to-string-in-haskell-inside-a-function/58328399#58328399", "title": "How to convert something to String in Haskell inside a function", "body": "<pre><code>graphvizNodesList (Graph arcs labels styles) = [(id,label,style) | id&lt;-keys, label&lt;-(elems labels), style&lt;-(elems styles)]\n</code></pre>\n\n<p><code>keys</code> here has type <code>Map k a -&gt; [k]</code> (i.e. its a function) but in this context, it is expected to be type <code>[a]</code> (i.e. a list). You need to apply the <code>keys</code> function to a <code>Map</code> in order to get the keys from that map.</p>\n"}], "owner": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 58328399, "answer_count": 1, "score": 1, "last_activity_date": 1570729224, "creation_date": 1570728215, "question_id": 58328166, "link": "https://stackoverflow.com/questions/58328166/how-to-convert-something-to-string-in-haskell-inside-a-function", "title": "How to convert something to String in Haskell inside a function", "body": "<p>I'm really a noob in Haskell and I'm stuck in a stupid function for days now.\nSo I have a homework and the teacher wants us to only modify the functions of this instance of a graphviz module. I tried to implement the first function but I'm unable to convert the id to a string (you will understand why by seeing the graphviz module) </p>\n\n<pre><code>-- | Converts a graph to Graphviz\n--\n-- &gt;&gt;&gt; putStrLn $ graphvizString $ addArcs emptyGraph [(1,2),(2,3),(1,3)]\n-- digraph {\n--     1 [label=\"1\"];\n--     2 [label=\"2\"];\n--     3 [label=\"3\"];\n--     1 -&gt; 2;\n--     1 -&gt; 3;\n--     2 -&gt; 3;\n-- }\n-- ...\ninstance (Show v, Ord v) =&gt; Graphviz (Graph v) where\n    graphvizNodesList (Graph arcs labels styles) = [(id,label,style) | id&lt;-keys, label&lt;-(elems labels), style&lt;-(elems styles)]\n    graphvizArcsList g = \n</code></pre>\n\n<p>Here is the context because the homework is kinda big so sorry if there is a lot of code.. It's only for context. My problem is only up there in the instance.\nSo this is my graph (in a module called Graph.hs) :</p>\n\n<pre><code>import Data.Map (Map,empty,member,insert,keys,findWithDefault,assocs ,fromList,(!),union,mapWithKey,toList,elems)\nimport Graphviz \n\n-- | A directed graph\ndata Graph v = Graph\n    { arcsMap :: Map v [v]     -- A map associating a vertex with its successors\n    , labelMap :: Map v String -- The Graphviz label of each node\n    , styleMap :: Map v String -- The Graphviz style of each node\n    }\n...\nSome functions implemented here not important\n...\n</code></pre>\n\n<p>And this is the graphviz module (Graphviz.hs)</p>\n\n<pre><code>...\nblabla\n...\n-- | A triple @(id,label,style)@ where\n--\n-- * @id@ is the key identifying the node (must be unique)\n-- * @label@ is any string compatible with Graphviz\n-- * @style@ is any string describing the Graphviz style of the node\ntype GraphvizNode = (String, String, String)\n\n-- | A triple @(id1,id2,label)@ where\n--\n-- * @id1@ is the key of the source vertex\n-- * @id2@ is the key of the target vertex\n-- * @label@ is the label of the arc\ntype GraphvizArc = (String, String, String)\n\n-- | Class of types that can be converted to Graphviz strings\nclass Graphviz g where\n\n    -- | The list of Graphviz nodes\n    --\n    -- It returns a list of all nodes of the graph, indicating the label and\n    -- the style of each node.\n    graphvizNodesList :: g -&gt; [GraphvizNode]\n\n    -- | The list of Graphviz arcs\n    --\n    -- It returns a list of all arcs of the graph, indicating the label of the\n    -- arc.\n    graphvizArcsList :: g -&gt; [GraphvizArc]\n\n    -- | The header of the Graphviz string\n    --\n    -- This is the string printed before writing the nodes and the arcs.\n    graphvizHeader :: g -&gt; String\n    graphvizHeader _ = \"digraph {\\n\"\n\nblablablabla...\n</code></pre>\n\n<p>Again, sorry for all this code I think its necessary to understand what I dont understand.</p>\n\n<p>My question is simple: how can I implement graphvizNodesList since id is not a string??? How can I convert it so it can fit in my graphviz function.</p>\n\n<p>Thanks a lot and sorry</p>\n"}, {"tags": ["haskell", "nix", "cabal-install", "nix-shell"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 6421426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed38f2ca07846b00ac700a9c152673da?s=128&d=identicon&r=PG&f=1", "display_name": "theNerd247", "link": "https://stackoverflow.com/users/6421426/thenerd247"}, "is_accepted": false, "score": 4, "last_activity_date": 1571332339, "creation_date": 1571332339, "answer_id": 58437665, "question_id": 58326843, "link": "https://stackoverflow.com/questions/58326843/equivalent-of-passing-p-zlib-argument-to-nix-shell-in-shell-nix/58437665#58437665", "title": "Equivalent of passing `-p zlib` argument to `nix-shell` in `shell.nix`", "body": "<p>I got it to work by creating a GHC environment using <a href=\"https://github.com/Gabriel439/haskell-nix\" rel=\"nofollow noreferrer\">a haskell+nix tutorial</a>. Below is my <code>release.nix</code> and <code>default.nix</code> is generated via <code>cabal2nix . &gt; default.nix</code> : (note the <code>zlib</code> as a part of the haskell packages to include in the <code>ghcWithPackages</code> call)</p>\n\n<pre><code>let\n  config = \n  {\n    packageOverrides = pkgs: \n    {\n      haskellPackages = pkgs.haskellPackages.override \n      {\n        overrides = new: old:\n        {\n          interview = new.callPackage ./default.nix;\n        };\n      };\n    };\n  };\n\n  pkgs = import &lt;nixpkgs&gt; { inherit config; };\n\n  ghc = pkgs.haskellPackages.ghcWithPackages (hpkgs: with hpkgs;\n    [ cabal-install\n      interview\n      zlib\n    ]\n  );\nin\n\nwith pkgs;\n\nmkShell \n{ buildInputs = [ ghc ];\n}\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41648, "user_id": 108359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a34d29224f05cd8bd1f480c89cf112?s=128&d=identicon&r=PG", "display_name": "Brian McKenna", "link": "https://stackoverflow.com/users/108359/brian-mckenna"}, "is_accepted": true, "score": 2, "last_activity_date": 1590882741, "creation_date": 1590882741, "answer_id": 62110026, "question_id": 58326843, "link": "https://stackoverflow.com/questions/58326843/equivalent-of-passing-p-zlib-argument-to-nix-shell-in-shell-nix/62110026#62110026", "title": "Equivalent of passing `-p zlib` argument to `nix-shell` in `shell.nix`", "body": "<p>You want to create a derivation which has those as dependencies. There's a trivial builder called <code>runCommand</code> which runs a script you give it. For shell.nix the builder won't actually be used, it's only for providing a shell, so you can give this an empty script:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>with import &lt;nixpkgs&gt; { };\n\nrunCommand \"my-shell\" {\n  buildInputs = [ zlib ];\n} \"\"\n</code></pre>\n"}], "owner": {"reputation": 20326, "user_id": 750216, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/974fb481d985024715a6816dfbb9cebf?s=128&d=identicon&r=PG", "display_name": "R\u0103zvan Flavius Panda", "link": "https://stackoverflow.com/users/750216/r%c4%83zvan-flavius-panda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 1, "accepted_answer_id": 62110026, "answer_count": 2, "score": 4, "last_activity_date": 1590882741, "creation_date": 1570722878, "last_edit_date": 1570740326, "question_id": 58326843, "link": "https://stackoverflow.com/questions/58326843/equivalent-of-passing-p-zlib-argument-to-nix-shell-in-shell-nix", "title": "Equivalent of passing `-p zlib` argument to `nix-shell` in `shell.nix`", "body": "<p>If I build my Haskell project under <code>nix-shell</code> it gives error about missing <code>zlib</code>.</p>\n\n<p>If I build the project in nix-shell using <code>nix-shell -p zlib</code> then the project sees <code>zlib</code> and builds successfully.</p>\n\n<p>How can I add the <code>zlib</code> package to <code>shell.nix</code> file so that passing <code>-p zlib</code> is no longer needed?</p>\n\n<p>Note: the builds were done using <code>cabal v2-build</code></p>\n\n<p>For building with stack I had to do <a href=\"https://github.com/commercialhaskell/stack/issues/2975#issuecomment-340570115\" rel=\"nofollow noreferrer\">the following</a></p>\n\n<p>This is how my <code>shell.nix</code> is currently defined:</p>\n\n<pre><code>{ nixpkgs ? import &lt;nixpkgs&gt; {}, compiler ? \"default\", doBenchmark ? false }:\n\nlet\n\n  inherit (nixpkgs) pkgs;\n\n  f = { mkDerivation, base, directory, stdenv, text, turtle, zlib }:\n      mkDerivation {\n        pname = \"haskell-editor-setup\";\n        version = \"0.1.0.0\";\n        src = ./.;\n        isLibrary = false;\n        isExecutable = true;\n        executableHaskellDepends = [ base directory text turtle zlib ];\n        description = \"Terminal program that will set up Haskell environment with a target selected editor or IDE\";\n        license = stdenv.lib.licenses.gpl3;\n      };\n\n  haskellPackages = if compiler == \"default\"\n                       then pkgs.haskellPackages\n                       else pkgs.haskell.packages.${compiler};\n\n  variant = if doBenchmark then pkgs.haskell.lib.doBenchmark else pkgs.lib.id;\n\n  drv = variant (haskellPackages.callPackage f {});\n\nin\n\n  if pkgs.lib.inNixShell then drv.env else drv\n</code></pre>\n"}, {"tags": ["haskell", "syntax", "pattern-guards"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 4, "creation_date": 1570715134, "post_id": 58323984, "comment_id": 103007414, "body": "Use one where for all guards"}, {"owner": {"reputation": 194, "user_id": 4856316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMUS6.jpg?s=128&g=1", "display_name": "lzbernardo", "link": "https://stackoverflow.com/users/4856316/lzbernardo"}, "edited": false, "score": 0, "creation_date": 1570721991, "post_id": 58323984, "comment_id": 103011562, "body": "I think Thomas is right. The parse error probably happens because after parsing the first <code>where</code> the code will think your function is over."}, {"owner": {"reputation": 700, "user_id": 5499914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fz53h.png?s=128&g=1", "display_name": "Khuldraeseth na&#39;Barya", "link": "https://stackoverflow.com/users/5499914/khuldraeseth-nabarya"}, "edited": false, "score": 0, "creation_date": 1570728035, "post_id": 58323984, "comment_id": 103014398, "body": "Even ignoring the parse error, using a single <code>where</code> in this instance will cut down on a fair amount of duplicate code."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10254807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AthoROw2PhY/AAAAAAAAAAI/AAAAAAAAqA0/smgYGHSv7HY/photo.jpg?sz=128", "display_name": "Sigurd Sets&#229;", "link": "https://stackoverflow.com/users/10254807/sigurd-sets%c3%a5"}, "edited": false, "score": 0, "creation_date": 1570732565, "post_id": 58327935, "comment_id": 103016390, "body": "Thank you! I can see now that I need to learn more about pattern matching. Excellent answer."}], "tags": [], "owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "is_accepted": true, "score": 2, "last_activity_date": 1570732006, "last_edit_date": 1570732006, "creation_date": 1570727359, "answer_id": 58327935, "question_id": 58323984, "link": "https://stackoverflow.com/questions/58323984/my-code-results-in-parse-error-because-of-my-use-of-guards/58327935#58327935", "title": "My code results in parse error because of my use of guards", "body": "<p>There is no need to use braces <em>(although of course you could)</em>. But you do need to be careful with indentation. It is not as hard as it may at first seem.</p>\n\n<p>That being said, it is true that you cannot use <code>where</code> inside a guarded expression. You have to use <code>let</code> in such case, like this:</p>\n\n<pre><code>parseExpr :: [String] -&gt; (Ast,[String])\nparseExpr [] = error \"Incorrect\"\nparseExpr (s:ss) | all isDigit s = (Tall (read s),ss)\n              | s == \"-\" = let (e,ss') = parseExpr ss in (Min e,ss')\n              | s == \"+\" = let (e,ss') = parseExpr ss\n                               (e',ss'') = parseExpr ss'\n                           in (Sum e e',ss'')\n              | s == \"*\" = let (e,ss') = parseExpr ss\n                               (e',ss'') = parseExpr ss'\n                           in (Mult e e',ss'')\n</code></pre>\n\n<p>However, in your case here, the guard expressions are so simple they can be replaced with pattern matches. <em>(And it is advisable to use the opportunity. Pattern matching is your best friend in Haskell.)</em> In that case you use <code>where</code>.</p>\n\n<pre><code>parseExpr :: [String] -&gt; (Ast,[String])\nparseExpr [] = error \"Incorrect\"\nparseExpr (s:ss) | all isDigit s = (Tall (read s),ss)\nparseExpr (\"-\":ss) = (Min e,ss') where (e,ss') = parseExpr ss\nparseExpr (\"+\":ss) = (Sum  e e',ss'') where (e, ss' ) = parseExpr ss\n                                            (e',ss'') = parseExpr ss'\n\nparseExpr (\"*\":ss) = (Mult e e',ss'') where (e, ss' ) = parseExpr ss\n                                            (e',ss'') = parseExpr ss'\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10254807, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AthoROw2PhY/AAAAAAAAAAI/AAAAAAAAqA0/smgYGHSv7HY/photo.jpg?sz=128", "display_name": "Sigurd Sets&#229;", "link": "https://stackoverflow.com/users/10254807/sigurd-sets%c3%a5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58327935, "answer_count": 1, "score": 3, "last_activity_date": 1570732006, "creation_date": 1570713746, "last_edit_date": 1570728062, "question_id": 58323984, "link": "https://stackoverflow.com/questions/58323984/my-code-results-in-parse-error-because-of-my-use-of-guards", "title": "My code results in parse error because of my use of guards", "body": "<p>I have the following code:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>parseExpr :: [String] -&gt; (Ast,[String])\nparseExpr [] = error \"Incorrect\"\nparseExpr (s:ss) | all isDigit s = (Tall (read s),ss)\n              | s == \"-\" = let (e,ss') = parseExpr ss in (Min e,ss')\n              | s == \"+\" = (Sum e e',ss'') where\n                           (e,ss') = parseExpr ss\n                           (e',ss'') = parseExpr ss'\n              | s == \"*\" = (Mult e e',ss'') where\n                           (e,ss') = parseExpr ss\n                           (e',ss'') = parseExpr ss'\n</code></pre>\n\n<p>When I try to run it, I get an error saying \"parse error on input '|'. The line it's talking about is this one:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>...\n                           (e',ss'') = parseExpr ss'\n-&gt;            | s == \"*\" = (Mult e e',ss'') where\n                           (e,ss') = parseExpr ss\n...\n</code></pre>\n\n<p>I think I understand why. I would think it's because I have two lines above that are not shielded by guards, and that haskell then get's confused when there suddenly appears another guard below. But how can I then add additional guards after these cases?</p>\n\n<p>I've tried using semicolons to separate new lines, but I'm very new with Haskell and therefore don't know much about its syntax.</p>\n"}, {"tags": ["list", "haskell", "element"], "comments": [{"owner": {"reputation": 2194, "user_id": 7940614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697c574cc5dfb3a4d5e4aff46a1721a?s=128&d=identicon&r=PG&f=1", "display_name": "assembly.jc", "link": "https://stackoverflow.com/users/7940614/assembly-jc"}, "edited": false, "score": 1, "creation_date": 1570707698, "post_id": 58321936, "comment_id": 103002867, "body": "hint: try <code>map reverse</code>"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 2194, "user_id": 7940614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697c574cc5dfb3a4d5e4aff46a1721a?s=128&d=identicon&r=PG&f=1", "display_name": "assembly.jc", "link": "https://stackoverflow.com/users/7940614/assembly-jc"}, "edited": false, "score": 1, "creation_date": 1570709087, "post_id": 58321936, "comment_id": 103003679, "body": "@assembly.jc that doesn&#39;t help here at all."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1570711286, "post_id": 58321936, "comment_id": 103004977, "body": "If you reduce by hand, you will first get <code>(reverse &quot;rehtruF&quot;):(f [&quot;kcuL&quot;])</code>, where the absense of <code>&quot;Good&quot;</code> is a definite clue that you have left something out of the result."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 1, "creation_date": 1570719682, "post_id": 58321936, "comment_id": 103010231, "body": "See also <a href=\"https://stackoverflow.com/questions/17383169/haskell-double-every-2nd-element-in-list/17383354#17383354\" title=\"haskell double every 2nd element in list\">stackoverflow.com/questions/17383169/&hellip;</a>.  For your needs instead of the functions <code>*2</code> and <code>id</code> you&#39;d want to use <code>id</code> and <code>reverse</code>."}], "answers": [{"comments": [{"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 4, "creation_date": 1570712253, "post_id": 58322569, "comment_id": 103005579, "body": "The last element is also being dropped, in the singleton case."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 1, "last_activity_date": 1570709319, "creation_date": 1570709319, "answer_id": 58322569, "question_id": 58321936, "link": "https://stackoverflow.com/questions/58321936/reverse-every-even-element-in-haskell-list/58322569#58322569", "title": "Reverse every even element in Haskell list", "body": "<p>The problem is that you completely drop the <code>ys</code> element. What you actually want is <em>keep it as-is</em>, i.e. put it as-is in the result list.</p>\n\n<pre><code>f (xs:ys:xss) = reverse xs : <b>ys :</b> f xss</code></pre>\n\n<p>Note that GHC would have warned you about the unused <code>ys</code> binding, if you had turned on the <code>-Wall</code> option (which is generally a good idea for beginners). You can do that by executing the compiler/interpreter with <code>ghc -Wall YOURFILE.hs</code>, or by typing <code>:set -Wall</code> in a GHCi session.</p>\n"}, {"tags": [], "owner": {"reputation": 2194, "user_id": 7940614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697c574cc5dfb3a4d5e4aff46a1721a?s=128&d=identicon&r=PG&f=1", "display_name": "assembly.jc", "link": "https://stackoverflow.com/users/7940614/assembly-jc"}, "is_accepted": false, "score": 0, "last_activity_date": 1570712734, "creation_date": 1570712734, "answer_id": 58323618, "question_id": 58321936, "link": "https://stackoverflow.com/questions/58321936/reverse-every-even-element-in-haskell-list/58323618#58323618", "title": "Reverse every even element in Haskell list", "body": "<p>To reverse the even elements in the list, the first thing is to find even elements, one of the ways to do that is to index each elements in the list firstly like:</p>\n\n<pre><code>zip [0..] xs\n</code></pre>\n\n<p>and then, we reverse the elements has even index:</p>\n\n<pre><code>if index `mod` 2 == 0 then reverse x else x\n</code></pre>\n\n<p>put them all as</p>\n\n<pre><code>f xs = map reverseEven (zip [0..] xs)\n    where reverseEven (index, x) = if index `mod` 2 == 0 \n                                   then reverse x else x\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1570723629, "post_id": 58326052, "comment_id": 103012386, "body": "cycling and zipping is also <a href=\"https://stackoverflow.com/a/58327016/849891\">superfluous</a>, just as the <code>mod</code> taking. :)"}, {"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 1, "creation_date": 1570748531, "post_id": 58326052, "comment_id": 103021934, "body": "This is my favorite one so far."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 3, "last_activity_date": 1570720443, "last_edit_date": 1570720443, "creation_date": 1570720131, "answer_id": 58326052, "question_id": 58321936, "link": "https://stackoverflow.com/questions/58321936/reverse-every-even-element-in-haskell-list/58326052#58326052", "title": "Reverse every even element in Haskell list", "body": "<p>TL;DR - this is the solution (based on <a href=\"https://stackoverflow.com/questions/17383169/haskell-double-every-2nd-element-in-list/17383354#17383354\">this answer</a>) that Thomas M. DuBuisson alluded to in his comment. Oops.</p>\n\n<hr>\n\n<p>You don't even need to explicitly iterate over the input. Imagine you had a list of functions <code>fs = [f0, f1, f2, ...]</code> and a list of values <code>xs = [x0, x1, x2, ...]</code>, and you want to get <code>[f0 x0, f1 x1, f2 x2, ...]</code>. You do that with <code>zipWith ($)</code>:</p>\n\n<pre><code>zipWith ($) fs xs  -- == [f0 $ x0, f1 $ x1, f2 $ x2, ...]\n                   -- == [f0 x0, f1 x1, f2 x2, ...]\n</code></pre>\n\n<p>For your problem, your <code>fs</code> would be an alternating sequence of <code>reverse</code> and <code>id</code>, which you can produce with <code>cycle [reverse, id] == [reverse, id, reverse, id, ...]</code></p>\n\n<p>Putting this together, </p>\n\n<pre><code>f :: [String] -&gt; [String]\nf strings = zipWith ($) (cycle [reverse, id]) strings\n        -- == [reverse strings0, id strings0, reverse strings2, id strings3, ...]\n</code></pre>\n\n<p>or simply</p>\n\n<pre><code>f :: [String] -&gt; [String]\nf = zipWith ($) (cycle [reverse, id])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 0, "last_activity_date": 1570866929, "last_edit_date": 1570866929, "creation_date": 1570723491, "answer_id": 58327016, "question_id": 58321936, "link": "https://stackoverflow.com/questions/58321936/reverse-every-even-element-in-haskell-list/58327016#58327016", "title": "Reverse every even element in Haskell list", "body": "<p>One ought not to calculate anything that doesn't need calculating. No zipping, no cycling, no <code>mod</code> taking, <a href=\"https://stackoverflow.com/a/57534683/849891\">just pure function calling</a>:</p>\n\n<pre><code>foo :: [[a]] -&gt; [[a]]\nfoo xs = foldr (\\ x r f g -&gt; f x (r g f)) \n               (\\ _ _ -&gt; []) \n               xs \n               ((:) . reverse) \n               (:)\n</code></pre>\n\n<p>First element is considered to be at index 0, i.e. at even position, as is in the question.</p>\n\n<pre><code>&gt; foo [\"Further\",\"Good\",\"Luck\"]\n[\"rehtruF\",\"Good\",\"kcuL\"]\n\n&gt; foo $ foo [\"Further\",\"Good\",\"Luck\"]\n[\"Further\",\"Good\",\"Luck\"]\n</code></pre>\n\n<p>With plain recursion, what the above <code>foldr</code>-based definition is doing is:</p>\n\n<pre><code>foo = f   where \n      f (x:xs)  =  reverse x : g xs\n      g (x:xs)  =  x : f xs \n</code></pre>\n\n<p>, plus the obvious <code>[]</code>-handling cases.</p>\n\n<p>With <code>foldr</code>, <code>[]</code> is checked for by <code>foldr</code> itself; with mutual recursion, it must be done by each of the two cooperating functions.</p>\n"}, {"tags": [], "owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "is_accepted": false, "score": 0, "last_activity_date": 1570748347, "last_edit_date": 1570748347, "creation_date": 1570747988, "answer_id": 58332106, "question_id": 58321936, "link": "https://stackoverflow.com/questions/58321936/reverse-every-even-element-in-haskell-list/58332106#58332106", "title": "Reverse every even element in Haskell list", "body": "<p>If you add an extra variable, you can keep track if you are on an even element or an odd element. For example, here we are using <code>1</code> to mean odd and <code>0</code> to mean even:</p>\n\n<pre><code>f = f' 1\n  where\n    f' _ []     = []\n    f' 1 (x:xs) = reverse x: f' 0 xs\n    f' 0 (x:xs) = x: f' 1 xs\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10597449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6248063b0ff56f13a599046a3299a16?s=128&d=identicon&r=PG&f=1", "display_name": "Marceline", "link": "https://stackoverflow.com/users/10597449/marceline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1609271219, "creation_date": 1570707190, "last_edit_date": 1609271219, "question_id": 58321936, "link": "https://stackoverflow.com/questions/58321936/reverse-every-even-element-in-haskell-list", "title": "Reverse every even element in Haskell list", "body": "<p>In Haskell a list is given, but you should reverse every even element. For example the list</p>\n<pre><code>f [&quot;rehtruF&quot;, &quot;dooG&quot;, kcuL&quot;]\n</code></pre>\n<p>should be changed  into</p>\n<pre><code>[&quot;Further&quot;, &quot;Good&quot; &quot;Luck&quot;]\n</code></pre>\n<p>We tried this function:</p>\n<pre><code>f [] = []\nf [x] = []\nf (xs:ys:xss) = (reverse xs):(f xss)\n</code></pre>\n<p>but unfortunately, it only reversed the first element and prints it out. Do you have any idea how we could change the code, so that every even element is reserved and the output is as demonstrated above?</p>\n"}, {"tags": ["haskell", "tree", "binary-tree", "binary-search-tree", "predicate"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570691285, "post_id": 58317239, "comment_id": 102994411, "body": "Why do you need <code>treeBSMin</code> and <code>treeBSMax</code> in order to know if it is a binary tree? You can recursively work, with first unset bounds that are set each time you move further into the tree."}, {"owner": {"reputation": 215, "user_id": 12036912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Bs1MMku7W04/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRX-T31D-fLdCF5w6i9pacNreJ9w/photo.jpg?sz=128", "display_name": "Jayyyyyy", "link": "https://stackoverflow.com/users/12036912/jayyyyyy"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570691595, "post_id": 58317239, "comment_id": 102994563, "body": "The question is I don&#39;t know how to recursively compare elements in the tree."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1570692549, "post_id": 58317239, "comment_id": 102994949, "body": "you just use parameters in the recursive call, like demonstrated in this answer: <a href=\"https://stackoverflow.com/a/58305672/67579\">stackoverflow.com/a/58305672/67579</a>"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1570695369, "post_id": 58317239, "comment_id": 102996335, "body": "Note that in <code>isBSTree</code> you consider the cases where both subtrees are empty, and where both subtrees are nonempty. This does not cover all cases, and will result in an error from the minimum/maximum helper functions."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1570700885, "post_id": 58317239, "comment_id": 102999288, "body": "@chi a. &quot;where both subtrees are nonempty&quot; I don&#39;t see it. b. the error is much worse than that."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1570705972, "post_id": 58317239, "comment_id": 103001936, "body": "@WillNess a. <code>treeBSMin, treeBSMax</code>, as written, require non empty trees -- indeed, you wrote below that they are partial. Hence, we must be sure to call then when they are defined (or, better, change them as you did). b. that&#39;s true."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1570706566, "post_id": 58317239, "comment_id": 103002267, "body": "@chi that goes to operational correctness, but the case handling is via pattern matching,  in <code>isBSTree</code>. so, the <code>error</code> is just an error to be fixed, but the code structure is good, was my thinking."}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1570695421, "post_id": 58318141, "comment_id": 102996353, "body": "Is <code>Node Null val Null -&gt; True</code> needed?"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1570701443, "post_id": 58318141, "comment_id": 102999609, "body": "<i>correctness first, efficiency later!</i> and it might actually improve efficiency even if it&#39;s redundant. besides, the algorithm itself is abysmally inefficient anyway."}], "tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 1, "last_activity_date": 1570701997, "last_edit_date": 1570701997, "creation_date": 1570694639, "answer_id": 58318141, "question_id": 58317239, "link": "https://stackoverflow.com/questions/58317239/binary-search-tree-predicate-with-helper-functions/58318141#58318141", "title": "Binary search tree predicate with helper functions", "body": "<p>To use them as helper functions you need to first remove <em>partiality</em> from your code by using <code>Maybe</code>:</p>\n\n<pre><code>treeBSMax :: (Ord a) =&gt; BSTree a -&gt; Maybe a\ntreeBSMax   btree = case btree of\n        Null -&gt; Nothing\n        Node _ val Null -&gt; Just val\n        Node _ val right -&gt; treeBSMax right\n\ntreeBSMin :: (Ord a) =&gt; BSTree a -&gt; Maybe a\ntreeBSMin btree = case btree of\n       Null -&gt; Nothing\n       Node Null val _ -&gt; Just val\n       Node left val _ -&gt; treeBSMin left\n\nisBSTree :: (Ord a) =&gt; BinaryTree a -&gt; Bool\nisBSTree btree = case btree of\n      Null -&gt; True                       -- changed it!\n      Node Null val Null -&gt; True\n      Node lt val rt -&gt; isBSTree lt       -- these two lines\n                        &amp;&amp; isBSTree rt     -- were missing !!\n                        &amp;&amp; inOrder (treeBSMax lt) val (treeBSMin rt)\n                 where\n                 inOrder Nothing  _ Nothing   =  True\n                 inOrder Nothing  v (Just y)  =  v &lt;= y\n                 inOrder (Just x) v Nothing   =  x &lt;= v\n                 inOrder (Just x) v (Just y)  =  x &lt;= v &amp;&amp; v &lt;= y\n</code></pre>\n\n<p>This is not efficient of course. (<em>why</em> is left as an exercise)</p>\n"}], "owner": {"reputation": 215, "user_id": 12036912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Bs1MMku7W04/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRX-T31D-fLdCF5w6i9pacNreJ9w/photo.jpg?sz=128", "display_name": "Jayyyyyy", "link": "https://stackoverflow.com/users/12036912/jayyyyyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570701997, "creation_date": 1570691082, "last_edit_date": 1570701283, "question_id": 58317239, "link": "https://stackoverflow.com/questions/58317239/binary-search-tree-predicate-with-helper-functions", "title": "Binary search tree predicate with helper functions", "body": "<pre><code>data BinaryTree a = Null | Node (BinaryTree a) a (BinaryTree a)\nderiving Show\n\ntype BSTree a = BinaryTree a\n\ntreeBSMax :: (Ord a) =&gt; BSTree a -&gt; a\ntreeBSMax   btree = case btree of\n        Null -&gt; error\n        Node _ val Null -&gt; val\n        Node _ val right -&gt; treeBSMax right\n\ntreeBSMin :: (Ord a) =&gt; BSTree a -&gt; a\ntreeBSMin btree = case btree of\n       Null -&gt; error\n       Node Null val _ -&gt; val\n       Node left val _ -&gt; treeBSMax left\n\nisBSTree :: (Ord a) =&gt; BinaryTree a -&gt; Bool\nisBSTree btree = case btree of\n      Null -&gt; False\n      Node Null val Null -&gt; True\n      Node lt val rt -&gt; val &gt;  treeBSMin lt &amp;&amp; val &lt; treeBSMax rt\n</code></pre>\n\n<p>How can I use <code>treeBSMin</code> and <code>treeBSMax</code> as helper functions of <code>isBSTree</code> to find whether a tree is a binary search tree? </p>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1570675268, "post_id": 58314642, "comment_id": 102989944, "body": "If your function accepts a list of integers its signature must be <code>oddsDivisible3and7 :: [Integer] -&gt; [Integer]</code>, which means &quot;a function that accepts a list of integers and returns a list of integers&quot;"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1570675499, "post_id": 58314642, "comment_id": 102989987, "body": "If you want &quot;all odd numbers less than 200 that are divisible by 3 and 7&quot;, then I don&#39;t see how you&#39;d usefully make that a function. That fully specifies the result without any input, so it&#39;d just be a list of numbers."}, {"owner": {"reputation": 13, "user_id": 12192315, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAOQ9A5Kd3nYzbbEniRWngiyHLIUq_QbpoC50Fp=k-s128", "display_name": "Sparkee93", "link": "https://stackoverflow.com/users/12192315/sparkee93"}, "edited": false, "score": 0, "creation_date": 1570676410, "post_id": 58314642, "comment_id": 102990181, "body": "the input is supposed to determine the length of the list to be made? or returned i believe as i have a main to work off of and this is how the function is called.         putStrLn(&quot;Input: 200&quot;)           putStr(&quot;Output: &quot;)           print(oddsDivisible3and7 200)           putStrLn(&quot;&quot;)"}, {"owner": {"reputation": 13, "user_id": 12192315, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAOQ9A5Kd3nYzbbEniRWngiyHLIUq_QbpoC50Fp=k-s128", "display_name": "Sparkee93", "link": "https://stackoverflow.com/users/12192315/sparkee93"}, "edited": false, "score": 0, "creation_date": 1570676489, "post_id": 58314642, "comment_id": 102990202, "body": "Im also pretty sure this is supposed to simply be practice for general coding not anything super usefui"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1570679773, "post_id": 58314642, "comment_id": 102990937, "body": "Oh, the number 200 is supposed to be the input? You can&#39;t hardcode it in the function if it&#39;s supposed to be the input."}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 2, "last_activity_date": 1570682988, "creation_date": 1570682988, "answer_id": 58315621, "question_id": 58314642, "link": "https://stackoverflow.com/questions/58314642/haskell-beginner-problems-list-comprehension-with-single-input/58315621#58315621", "title": "Haskell Beginner problems, list comprehension with single input", "body": "<p>There are a few type error and a few sintax error, let me show:</p>\n\n<pre><code>oddsDivisible3and7 :: Integral a =&gt; a -&gt; [a]\noddsDivisible3and7 n = [x | x &lt;- [1..n],\n x `mod` 3 == 0 &amp;&amp; x `mod` 7 == 0 &amp;&amp; x &lt; 200 &amp;&amp; x `mod` 2 /= 0]\n</code></pre>\n\n<p>first of all the type should be: <code>Integral a =&gt; a -&gt; [a]</code></p>\n\n<p>Then, you want the divisible by 3, 7 and the odds (not divisible by 2), and all less than 200.</p>\n\n<p>example:</p>\n\n<pre><code>oddsDivisible3and7 500\n=&gt; [21,63,105,147,189]\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12192315, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAOQ9A5Kd3nYzbbEniRWngiyHLIUq_QbpoC50Fp=k-s128", "display_name": "Sparkee93", "link": "https://stackoverflow.com/users/12192315/sparkee93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 58315621, "answer_count": 1, "score": 1, "last_activity_date": 1570689516, "creation_date": 1570674685, "last_edit_date": 1570689516, "question_id": 58314642, "link": "https://stackoverflow.com/questions/58314642/haskell-beginner-problems-list-comprehension-with-single-input", "title": "Haskell Beginner problems, list comprehension with single input", "body": "<p>I am brand new to haskell and function programming in general. I'm working on a lab and stuck on my list comprehension questions. </p>\n\n<p>the problem is to create a function that finds all odd numbers less than 200 that are divisible by 3 and 7 using only list comprehension</p>\n\n<p>this is my code:</p>\n\n<pre><code>oddsDivisible3and7 :: Integer -&gt; Integer -&gt; Integer -&gt; Integer -&gt; [Integer] \noddsDivisible3and7 xs = [x | x &lt;- [1..xs],x mod 3 == 0 &amp;&amp; x mod 7 == 0,x &lt; 200]\n</code></pre>\n\n<p>and the errors it is throwing:</p>\n\n<pre><code>\u2022 Couldn't match expected type \u2018(Integer -&gt; Integer -&gt; Integer)\n                                -&gt; Integer -&gt; Integer\u2019\n              with actual type \u2018Integer\u2019  \n\u2022 The function \u2018x\u2019 is applied to two arguments,\n  but its type \u2018Integer\u2019 has none\n  In the first argument of \u2018(==)\u2019, namely \u2018x mod 3\u2019\n  In the first argument of \u2018(&amp;&amp;)\u2019, namely \u2018x mod 3 == 0\u2019\n</code></pre>\n\n<p>with another block for the <code>mod 7</code></p>\n\n<p>not looking for a written function i just need some guidance.</p>\n"}]