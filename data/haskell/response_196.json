[{"tags": ["haskell", "shake-build-system"], "answers": [{"tags": [], "owner": {"reputation": 8563, "user_id": 160673, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/7BSPT.jpg?s=128&g=1", "display_name": "Neil Mitchell", "link": "https://stackoverflow.com/users/160673/neil-mitchell"}, "is_accepted": true, "score": 1, "last_activity_date": 1550432585, "last_edit_date": 1550432585, "creation_date": 1539347005, "answer_id": 52779484, "question_id": 52749184, "link": "https://stackoverflow.com/questions/52749184/is-there-a-way-to-get-shake-build-system-to-show-all-the-rules-that-were-gener/52779484#52779484", "title": "Is there a way to get Shake (build system) to show all the Rules that were generated", "body": "<p>Using Shake v0.17.6 you can run <code>--help</code> which prints out something like:</p>\n\n<pre><code>Usage: my-shake-builder [options] [target] ...\n\nStandard options:\n  -a FULL=SHORT, --abbrev=FULL=SHORT\n                              Use abbreviation in status messages.\n  ... snip ...\n  --no-print-directory        Turn off -w, even if it was turned on implicitly.\n\nExtra options:\n  --clean                     Clean before building.\n  --sleep                     Pause before executing.\n  --usepredicate              Use &amp;?&gt; in preference to &amp;%&gt;\n\nTargets:\n  - Main.exe\n  - **/*.deps\n  - **/*.dep\n  - **/*.o\n  - **/*.hi\n  - .pkgs\n</code></pre>\n\n<p>By default all rules with a name or pattern, e.g. <code>phony</code>, <code>%&gt;</code>, <code>&amp;%&gt;</code> etc, are added as names, but you can control that through the <code>addTarget</code> function. You can get a list or targets by passing <code>--help</code> or using the function <code>getTargets</code> (which is what <code>--help</code> uses under the hood).</p>\n"}], "owner": {"reputation": 1455, "user_id": 706882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b8e621d3734b19dbb87061e1b9157e0?s=128&d=identicon&r=PG", "display_name": "sbditto85", "link": "https://stackoverflow.com/users/706882/sbditto85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52779484, "answer_count": 1, "score": 2, "last_activity_date": 1550432585, "creation_date": 1539207673, "question_id": 52749184, "link": "https://stackoverflow.com/questions/52749184/is-there-a-way-to-get-shake-build-system-to-show-all-the-rules-that-were-gener", "title": "Is there a way to get Shake (build system) to show all the Rules that were generated", "body": "<p>I have a lot of rules i'm generating via calling functions with parameters (similar rules that vary slightly depending on which project to build) and when no parameters are passed or a \"show_all\" is passed as a target I'd like to list out all the generated rules. </p>\n\n<p>How can I do that or is it impossible?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1539203082, "post_id": 52748244, "comment_id": 92420976, "body": "Hint: see these as &quot;numbers&quot; where <code>A</code> maps to <code>1</code>, <code>B</code> to 2, etc. and for the next number, you multiply with the radix."}, {"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 0, "creation_date": 1539205463, "post_id": 52748244, "comment_id": 92421975, "body": "On a side note: as one is the inverse of the other it is a joy to test these functions."}, {"owner": {"reputation": 1469, "user_id": 4876305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ymQ5f.jpg?s=128&g=1", "display_name": "Gabriel L.", "link": "https://stackoverflow.com/users/4876305/gabriel-l"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1539205964, "post_id": 52748244, "comment_id": 92422156, "body": "Honestly I&#39;m impressed that you came up with that particular solution for your index-to-column function. I think whatever solution I would have come up with would have been more basic.  I can think of some approaches for the reverse function, but @WillemVanOnsem&#39;s hint above should suffice IMHO."}, {"owner": {"reputation": 2585, "user_id": 8491228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5T09.jpg?s=128&g=1", "display_name": "Mor A.", "link": "https://stackoverflow.com/users/8491228/mor-a"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1539207101, "post_id": 52748244, "comment_id": 92422542, "body": "@WillemVanOnsem that&#39;s pretty much right, except you don&#39;t have a <code>0</code> digit in that system. and In fact after <code>Z</code> you have <code>AA</code> rather than <code>A0</code>, so it&#39;s a bit more nuanced than just converting from/to base 26. (it&#39;s actually base 26 except that in the most significant digit <code>A</code> is 1, and in the rest of the digits <code>A</code> is 0, and leading zeroes are omitted)"}, {"owner": {"reputation": 2585, "user_id": 8491228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5T09.jpg?s=128&g=1", "display_name": "Mor A.", "link": "https://stackoverflow.com/users/8491228/mor-a"}, "edited": false, "score": 0, "creation_date": 1539208259, "post_id": 52748244, "comment_id": 92422924, "body": "^ actually made a mistake there, <i>least</i> significant digit has <code>A</code> as 0 and the rest have <code>A</code> as 1."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 2585, "user_id": 8491228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5T09.jpg?s=128&g=1", "display_name": "Mor A.", "link": "https://stackoverflow.com/users/8491228/mor-a"}, "edited": false, "score": 0, "creation_date": 1539208547, "post_id": 52748244, "comment_id": 92423009, "body": "@M.Aroosi: well, I think it might be simpler, to first increment the value, and then perform the logic, and then decrement the value :). But indeed, there is a small semantical error in my hint :S."}], "answers": [{"comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1539217146, "post_id": 52749615, "comment_id": 92425135, "body": "Err... did you test this? <code>xlColumnToNumberR &quot;AA&quot; = [(0, &quot;&quot;)]</code>"}, {"owner": {"reputation": 7, "user_id": 10466544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9kEk.jpg?s=128&g=1", "display_name": "Bar\u0131\u015f &#214;zba\u015f", "link": "https://stackoverflow.com/users/10466544/bar%c4%b1%c5%9f-%c3%96zba%c5%9f"}, "edited": false, "score": 0, "creation_date": 1539248737, "post_id": 52749615, "comment_id": 92435596, "body": "it gives an error. And i am trying to solve it without any library functions exept the main"}, {"owner": {"reputation": 189, "user_id": 8179137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46b43fe26a1b6191280614f56683525d?s=128&d=identicon&r=PG&f=1", "display_name": "Potato44", "link": "https://stackoverflow.com/users/8179137/potato44"}, "edited": false, "score": 0, "creation_date": 1539270586, "post_id": 52749615, "comment_id": 92449864, "body": "actually, it&#39;s <a href=\"https://en.wikipedia.org/wiki/Bijective_numeration\" rel=\"nofollow noreferrer\">bijective base-26</a> (with letters used as digits)."}, {"owner": {"reputation": 410, "user_id": 2510658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772cd4c58cd914a715e0edfc4f673dc5?s=128&d=identicon&r=PG", "display_name": "Travis Athougies", "link": "https://stackoverflow.com/users/2510658/travis-athougies"}, "edited": false, "score": 0, "creation_date": 1539306768, "post_id": 52749615, "comment_id": 92464068, "body": "Sorry everyone, fixed! A = 1 in this base, not 0, as I originally had."}], "tags": [], "owner": {"reputation": 410, "user_id": 2510658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772cd4c58cd914a715e0edfc4f673dc5?s=128&d=identicon&r=PG", "display_name": "Travis Athougies", "link": "https://stackoverflow.com/users/2510658/travis-athougies"}, "is_accepted": false, "score": 0, "last_activity_date": 1539306749, "last_edit_date": 1539306749, "creation_date": 1539210470, "answer_id": 52749615, "question_id": 52748244, "link": "https://stackoverflow.com/questions/52748244/how-to-convert-the-column-name-to-its-column-index-in-haskell/52749615#52749615", "title": "How to convert the column name to its column index in Haskell", "body": "<p>Excel columns are simply numbers in Base26, with digits A-Z.</p>\n\n<p>Use <code>readInt</code> from <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html\" rel=\"nofollow noreferrer\"><code>Numeric</code></a>.</p>\n\n<pre><code>xlColumnToNumberR :: ReadS Int\nxlColumnToNumberR = readInt 26 -- There are 26 letters\n                            isAlpha -- From 'Data.Char'\n                            xlValue\n  where xlValue c = ord (toUpper c) - ord 'A' + 1\n\nxlColumnToNumber :: String -&gt; Maybe Int\nxlColumnToNumber n = case xlColumnToNumberR n of\n                       [(x, \"\")] -&gt; Just x\n                       _ -&gt; Nothing\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10466544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9kEk.jpg?s=128&g=1", "display_name": "Bar\u0131\u015f &#214;zba\u015f", "link": "https://stackoverflow.com/users/10466544/bar%c4%b1%c5%9f-%c3%96zba%c5%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1539306749, "creation_date": 1539203035, "question_id": 52748244, "link": "https://stackoverflow.com/questions/52748244/how-to-convert-the-column-name-to-its-column-index-in-haskell", "title": "How to convert the column name to its column index in Haskell", "body": "<p>Excel column names are like A, B, C ... AA, AB, AC up to infinite. How can i convert the column name to its column index in Haskell. I can convert index to column but couldnt make the reverse function. Can someone explain me how to write the reverse function of it ? Index to column:</p>\n\n<pre><code>f n = (concatMap sequence $ tail $ iterate (['A'..'Z'] :) []) !! n\n</code></pre>\n"}, {"tags": ["haskell", "type-level-computation", "polykinds"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1539194732, "post_id": 52746048, "comment_id": 92417180, "body": "Why do you use a proxy for one class and not the other?"}], "answers": [{"comments": [{"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1539201328, "post_id": 52746512, "comment_id": 92420175, "body": "Oh, yeah this is much better, thanks. It hadn&#39;t occurred to me that I wouldn&#39;t actually need overlapping instances with this approach as well"}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 2, "last_activity_date": 1539195596, "creation_date": 1539195596, "answer_id": 52746512, "question_id": 52746048, "link": "https://stackoverflow.com/questions/52746048/type-level-recursion-and-polykinds/52746512#52746512", "title": "Type-level recursion and PolyKinds", "body": "<p>I think you should skip having two classes. Just one suffices.</p>\n\n<p>The drawback is that your users won't be able to write instances corresponding to <code>instance Tagged (Maybe Int)</code> in your design which do something special for compound types... but they already couldn't really use those, since the application instance for <code>Rec</code> would always overlap it anyway.</p>\n\n<p>So, without further ado:</p>\n\n<pre><code>{-# LANGUAGE PolyKinds #-}\n{-# LANGUAGE ScopedTypeVariables #-}\n{-# LANGUAGE FlexibleInstances #-}\n{-# LANGUAGE UndecidableInstances #-}\n\nimport Data.Tagged\n\nclass Rec a where rec :: Tagged a Int\n\n-- it is still possible for users to define their own instances for base types\ninstance Rec Int  where rec = 1\ninstance Rec Char where rec = 2\ninstance Rec (,)  where rec = 3\n\ninstance (Rec ab, Rec c) =&gt; Rec (ab c) where\n  rec = retag (rec :: Tagged ab Int) * retag (rec :: Tagged c Int)\n</code></pre>\n\n<p>In ghci:</p>\n\n<pre><code>&gt; rec :: Tagged ((Int, Int), Char) Int\nTagged 18\n</code></pre>\n"}], "owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 52746512, "answer_count": 1, "score": 2, "last_activity_date": 1539195596, "creation_date": 1539193722, "question_id": 52746048, "link": "https://stackoverflow.com/questions/52746048/type-level-recursion-and-polykinds", "title": "Type-level recursion and PolyKinds", "body": "<p>I'm trying to implement a polymorphic function that essentially traverses a type, accumulating a <code>Tag</code> value. I'd like users to be able to do e.g. <code>rec ((1,2), ('a', 3))</code>.</p>\n\n<pre><code>{-# LANGUAGE KindSignatures, PolyKinds, FlexibleInstances #-}\n{-# LANGUAGE ScopedTypeVariables #-}\n{-# LANGUAGE UndecidableInstances #-}\nimport Data.Proxy\n\nnewtype Tag (a :: k) = Tag Int\n    deriving (Eq, Read, Show)\n\n-- My users only have to define their own instances of this class...\nclass Tagged (a :: k) where\n  tag :: Tag a\n\n-- ...like these:\ninstance Tagged Int where\n  tag = Tag 1\n\ninstance Tagged Char where\n  tag = Tag 2\n\ninstance Tagged (,) where\n  tag = Tag 3\n\n\n-- While this is a morally \"closed\" class; implementing recursion over\n-- components of types. This is what I'm struggling with:\nclass Rec (a :: k) where\n  rec :: proxy a -&gt; Tag a\n\ninstance (Rec ab, Rec c)=&gt; Rec (ab c) where\n  rec _ = let Tag ab = rec Proxy :: Tag ab\n              Tag c = rec Proxy :: Tag c\n           in Tag (ab * c)\n\ninstance {-# OVERLAPPABLE #-} Tagged a=&gt; Rec a where\n  rec _ = tag :: Tag a\n</code></pre>\n\n<p>I've fiddled with this in various ways, and in the current incarnation get the error (for both <code>ab</code> and <code>c</code>, in the first instance):</p>\n\n<pre><code>    \u2022 Could not deduce (Tagged ab) arising from a use of \u2018rec\u2019\n      from the context: (Rec ab, Rec c)\n        bound by the instance declaration at flook.hs:26:10-37\n    \u2022 In the expression: rec Proxy :: Tag ab\n      In a pattern binding: Tag ab = rec Proxy :: Tag ab\n      In the expression:\n        let\n          Tag ab = rec Proxy :: Tag ab\n          Tag c = rec Proxy :: Tag c\n        in Tag (ab * c)\n   |\n27 |   rec _ = let Tag ab = rec Proxy :: Tag ab\n   |                        ^^^^^^^^^\n</code></pre>\n\n<p>I'm a little surprised at this error since it seems to indicate the second base case instance was selected a priori in the body of the first instance.</p>\n\n<p>Is there a way to get this to work, or a better approach?</p>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1539190983, "post_id": 52745069, "comment_id": 92415393, "body": "<code>ThreadId</code> is not an instance of <code>Num</code> (and it can&#39;t be made one), so <code>killThread 234</code> will give a type error."}], "tags": [], "owner": {"reputation": 1, "user_id": 8611860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcac3aea0f3182e7dbec9f0320954ef?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Singh Chauhan", "link": "https://stackoverflow.com/users/8611860/prashant-singh-chauhan"}, "is_accepted": false, "score": -6, "last_activity_date": 1539189717, "creation_date": 1539189717, "answer_id": 52745069, "question_id": 52744890, "link": "https://stackoverflow.com/questions/52744890/how-can-i-manually-kill-a-thread/52745069#52745069", "title": "How can I manually kill a thread?", "body": "<p>The problem is in the arguments of the killThread is wrong. You need to write <code>killThread 234</code> instead of <code>killThread (ThreadId 234)</code>. Have you tried that?</p>\n"}, {"tags": [], "owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "is_accepted": true, "score": 5, "last_activity_date": 1539190858, "creation_date": 1539190858, "answer_id": 52745342, "question_id": 52744890, "link": "https://stackoverflow.com/questions/52744890/how-can-i-manually-kill-a-thread/52745342#52745342", "title": "How can I manually kill a thread?", "body": "<p>I don't think there's any way to construct a <code>ThreadId</code> (e.g. from the result of <code>show</code>). See <a href=\"https://stackoverflow.com/questions/24995262/how-can-i-build-a-threadid-given-that-i-know-the-actual-number\">this question</a> so you'll need to hold on to the <code>ThreadId</code> returned from <code>forkIO</code>, e.g. by changing your function to:</p>\n\n<pre><code>myForkingFunction = do\n  tid &lt;- forkIO (workerFunction)\n  putStrLn (\"Worker thread: \" ++ show tid)\n  putStrLn (\"...lots of other actions...\")\n  return tid\n</code></pre>\n\n<p>and doing in ghci:</p>\n\n<pre><code>&gt; tid &lt;- myForkingFunction\n&gt; killThread tid\n</code></pre>\n\n<p>The error you get is a little confusing, and I believe has to do with the fact that numeric literals (like <code>216</code>) are polymorphic; the argument to <code>ThreadId</code> is <code>ThreadId#</code> which is an unlifted type so you get the error you see before the compiler can even complain of \"no instance Num ThreadId#\"</p>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 3, "last_activity_date": 1539278726, "last_edit_date": 1539278726, "creation_date": 1539190893, "answer_id": 52745354, "question_id": 52744890, "link": "https://stackoverflow.com/questions/52744890/how-can-i-manually-kill-a-thread/52745354#52745354", "title": "How can I manually kill a thread?", "body": "<p>A <code>ThreadId</code> is not really a number, although it has a number associated with it for identification. <code>ThreadId</code> is a wrapper around <code>ThreadId#</code>, which is a pointer to a thread state object (a TSO, or in the RTS code, <code>StgTSO</code>). That object contains all the actual internal information about a thread. There is no way to turn an <code>Int</code> into a <code>ThreadId</code> (I'm pretty sure the runtime system doesn't even maintain a mapping from thread ID numbers to <code>ThreadId#</code>s, and there's definitely no primop supporting such a conversion), so you can give up on that now. The only way you can <code>killThread</code> or <code>throwTo</code> a thread is if you hold on to the <code>ThreadId</code> that <code>forkIO</code> gave you. Note that killing a thread isn't usually the way you want to stop it. Normally you want to do something more controlled by communicating with it through an <code>MVar</code>. Most people use the tools in the <code>async</code> library to manage concurrency.</p>\n"}, {"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539191457, "post_id": 52745443, "comment_id": 92415648, "body": "OTOH, you <i>can</i> hang on to a weak pointer to a <code>ThreadId</code> using <code>mkWeakThreadId :: ThreadId -&gt; IO (Weak ThreadId)</code>, then use <code>deRefWeak wk &gt;&gt;= maybe (return ()) killThread</code>. Still not so nice..."}, {"owner": {"reputation": 1227, "user_id": 5053374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe57f0998df065470ff42c938f781cf?s=128&d=identicon&r=PG", "display_name": "Libby", "link": "https://stackoverflow.com/users/5053374/libby"}, "edited": false, "score": 0, "creation_date": 1539192522, "post_id": 52745443, "comment_id": 92416205, "body": "&quot;threads don&#39;t get garbage collected while any ThreadId from one is still reachable&quot; Can you say a little more about this? (or link?)"}, {"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "reply_to_user": {"reputation": 1227, "user_id": 5053374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe57f0998df065470ff42c938f781cf?s=128&d=identicon&r=PG", "display_name": "Libby", "link": "https://stackoverflow.com/users/5053374/libby"}, "edited": false, "score": 0, "creation_date": 1539195715, "post_id": 52745443, "comment_id": 92417643, "body": "@Libby looks like the memory used by the stack created for the new thread is held on to as long as the ThreadId is reachable. <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Concurrent.html#t:ThreadId\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.12.0.0/docs/&hellip;</a>"}, {"owner": {"reputation": 1227, "user_id": 5053374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe57f0998df065470ff42c938f781cf?s=128&d=identicon&r=PG", "display_name": "Libby", "link": "https://stackoverflow.com/users/5053374/libby"}, "edited": false, "score": 0, "creation_date": 1539206625, "post_id": 52745443, "comment_id": 92422384, "body": "@Carl Ah, okay, that&#39;s what I thought, I was worried you were saying if I create multiple threads, then they won&#39;t be garbage collected until ALL the threads are unreachable"}], "tags": [], "owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "is_accepted": false, "score": 5, "last_activity_date": 1539191190, "creation_date": 1539191190, "answer_id": 52745443, "question_id": 52744890, "link": "https://stackoverflow.com/questions/52744890/how-can-i-manually-kill-a-thread/52745443#52745443", "title": "How can I manually kill a thread?", "body": "<p><code>ThreadId</code> values are treated specially by the runtime. You can't just create one. You need access to a <code>ThreadId</code> either as produced by <code>forkIO</code> when creating the thread or by <code>myThreadId</code> inside the thread.</p>\n\n<p>Just for extra fun, threads don't get garbage collected while any <code>ThreadId</code> from one is still reachable. So you can't just hold on to them in case you need them. You need to actually have a plan to manage threads.</p>\n\n<p>I think you're probably best off using the <a href=\"https://hackage.haskell.org/package/async\" rel=\"noreferrer\">async library</a> and it's various linking operations to ensure that when the parent thread is killed, it also kills all its child threads. It's a little (or a lot) of an awkward code style, but it's the best way to get correct behavior. </p>\n"}], "owner": {"reputation": 1227, "user_id": 5053374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe57f0998df065470ff42c938f781cf?s=128&d=identicon&r=PG", "display_name": "Libby", "link": "https://stackoverflow.com/users/5053374/libby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 52745342, "answer_count": 4, "score": 4, "last_activity_date": 1539278726, "creation_date": 1539188996, "question_id": 52744890, "link": "https://stackoverflow.com/questions/52744890/how-can-i-manually-kill-a-thread", "title": "How can I manually kill a thread?", "body": "<p>I'm in <code>ghci</code> testing some functions that fork threads, kinda like this:</p>\n\n<pre><code>myForkingFunction = do\n  tid &lt;- forkIO (workerFunction)\n  putStrLn (\"Worker thread: \" ++ show tid)\n  putStrLn (\"...lots of other actions...\")\n\n  where workerFunction = do \n          putStrLn \"In real life I'm listening for jobs....\"\n          workerFunction\n</code></pre>\n\n<p>This results in:</p>\n\n<pre><code>\ud83d\udc22  &gt; myForkingFunction\nWorker thread: ThreadId 216\n...lots of other actions...\n\ud83d\udc22  &gt; In real life I'm listening for jobs....\nIn real life I'm listening for jobs....\nIn real life I'm listening for jobs....\nIn real life I'm listening for jobs....\n</code></pre>\n\n<p>(and so on)</p>\n\n<p>Then as I'm <code>:r</code>-ing and iterating on the code, I notice that even when I reload, my <code>workerFunction</code> is still going. </p>\n\n<p>So, I thought could just look at the printed output and do <code>killThread (ThreadId 234)</code> or whatever.</p>\n\n<p>But first, I need to import <code>ThreadId(..)</code> from <code>GHC.Conc.Sync</code>?</p>\n\n<p>Then I get this error:</p>\n\n<pre><code>&lt;interactive&gt;:110:22: error:\n    \u2022 Couldn't match a lifted type with an unlifted type\n      When matching types\n        Integer :: *\n        GHC.Prim.ThreadId# :: TYPE 'GHC.Types.UnliftedRep\n    \u2022 In the first argument of \u2018ThreadId\u2019, namely \u2018805\u2019\n      In the first argument of \u2018killThread\u2019, namely \u2018(ThreadId 805)\u2019\n      In the expression: killThread (ThreadId 805)\n</code></pre>\n\n<p>So I think I must be approaching this wrong?</p>\n"}, {"tags": ["haskell", "type-conversion"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1539184880, "post_id": 52743607, "comment_id": 92411814, "body": "Since you (likely) used <code>-XOverloadedStrings</code>, the string literals are <i>not</i> <code>String</code>s, but <code>Text</code>s."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1539186072, "post_id": 52743607, "comment_id": 92412552, "body": "<code>Data.Text</code> exposes the same functions as <code>Data.List</code> so that the interface for <code>Text</code> values is as close to the interface for <code>String</code> (aka <code>[Char]</code>) values as possible"}, {"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1539201032, "post_id": 52743607, "comment_id": 92420048, "body": "The example is from Hackage not from me .I was just reading the module description on the site."}], "answers": [{"comments": [{"owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 0, "creation_date": 1539200929, "post_id": 52743665, "comment_id": 92419995, "body": "Thank you for your fast reply but i have not used any <code>{# #}</code> whatever that is.(still a beginner).That example is from <code>Hackage</code> not from me."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "edited": false, "score": 1, "creation_date": 1539201614, "post_id": 52743665, "comment_id": 92420304, "body": "@BercoviciAdrian: but they demonstrate it with that extension. You can check for yourself: if you import the module in <code>ghci</code>, but <i>without <code>-XOverloadedStrings</code>, the above will *not</i> work. Whereas with the extension it works."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 10, "last_activity_date": 1539185047, "creation_date": 1539185047, "answer_id": 52743665, "question_id": 52743607, "link": "https://stackoverflow.com/questions/52743607/haskell-implicit-conversions/52743665#52743665", "title": "Haskell implicit conversions", "body": "<p>You likely enabled <code>-XOverloadedStrings</code> (or enabled it with the <code>{-# LANGUAGE OverloadedStrings #-}</code> at the top of the file).</p>\n\n<p>As a result this means that string <em>literals</em> (not string variables, only the literals), can be interpreted by any <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-String.html#t:IsString\" rel=\"noreferrer\"><strong><code>IsString</code></strong></a> type.</p>\n\n<p><code>Text</code> is an <code>IsString</code> type. So that means that implicitly you use <code>pack</code> around the string <em>literals</em> (again literals, not ordinary variables).</p>\n\n<p>A similar thing happens with number literals: a number literal can be any <code>Num</code> type. Based on what functions you call on the number literal, Haskell can derive the exact type, and thus \"interprets\" the literal accordingly. For example if you write <code>atan2 1 2</code>, then <code>1</code> and <code>2</code> should be interpreted as <code>RealFloat</code> types, whereas for <code>quot 1 2</code>, the <code>1</code> and <code>2</code> are interpreted as \u00ccntegral` types.</p>\n"}], "owner": {"reputation": 6267, "user_id": 1913744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5bAQS.jpg?s=128&g=1", "display_name": "Bercovici Adrian", "link": "https://stackoverflow.com/users/1913744/bercovici-adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 52743665, "answer_count": 1, "score": 3, "last_activity_date": 1539201002, "creation_date": 1539184828, "last_edit_date": 1539201002, "question_id": 52743607, "link": "https://stackoverflow.com/questions/52743607/haskell-implicit-conversions", "title": "Haskell implicit conversions", "body": "<p>Hello  i was looking to  using <code>Data.Text.intercalate</code> and from <code>Hackage</code> i do not understand why if the method has the following signature:</p>\n\n<p><code>intercalate :: Text -&gt; [Text] -&gt; Text</code><br><br> <strong>Why</strong> then, does this work</p>\n\n<pre><code>T.intercalate \"NI!\" [\"We\", \"seek\", \"the\", \"Holy\", \"Grail\"]\n\"WeNI!seekNI!theNI!HolyNI!Grail\" \n</code></pre>\n\n<p>Shouldn't you apply <code>Data.Text.pack</code> it before each element of the list? \n<br> Source : <a href=\"http://hackage.haskell.org/package/text-1.2.3.1/docs/Data-Text.html\" rel=\"nofollow noreferrer\">http://hackage.haskell.org/package/text-1.2.3.1/docs/Data-Text.html</a><br>\n <br>In my case i want to pack the following :</p>\n\n<p><strong>Input</strong> :<code>\"{\"</code> ,<code>mytext</code> ,<code>\"}\"</code> <code>#mytext::Text</code> <br> I am doing it with :<br>\n<code>Prelude.intercalate (Data.Text.pack \",\") [pack \"{\",mytext, pack \"}\"]</code> or<br> <br><code>(pack \"{\") ++ mytext++ pack \"}\")</code> \n<br> Can someone please explain me why does <code>Data.Text</code> expose the same methods as <code>Data.List</code> (in our case <code>intercalate</code>) and how does it make implicit conversions between <code>Char</code> and <code>Text</code> ?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 1, "creation_date": 1539185562, "post_id": 52743115, "comment_id": 92412234, "body": "Potential close voters: this clearly isn&#39;t a &quot;recommendation&quot; question. The &quot;is there a way&quot; phrase is a poor indicator for &quot;off-topic/recommendation&quot;."}, {"owner": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "reply_to_user": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1539187192, "post_id": 52743115, "comment_id": 92413219, "body": "@DanielWagner A lot of ways. In what way is it?"}], "answers": [{"comments": [{"owner": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "edited": false, "score": 0, "creation_date": 1539187250, "post_id": 52744321, "comment_id": 92413249, "body": "No that sports as soon as the first failed import is encountered."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "edited": false, "score": 0, "creation_date": 1539187599, "post_id": 52744321, "comment_id": 92413463, "body": "@orome Sure. Then you can just delete that import, stub out any functions you used from it with <code>undefined</code>, and proceed. Even with the manual effort it may be quicker than creating and debugging scripts to call <code>ghc-pkg</code>."}, {"owner": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "edited": false, "score": 0, "creation_date": 1539188001, "post_id": 52744321, "comment_id": 92413684, "body": "A bit tedious, but yes, that would work. Kida fails to fall under &quot;do this programmatically&quot; though."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "edited": false, "score": 0, "creation_date": 1539188147, "post_id": 52744321, "comment_id": 92413764, "body": "@orome I&#39;m a bit at a loss about what more you want. I&#39;ve given both a programmatic approach and a pragmatic approach. Up to you which side of the tradeoff you decide on, but complaining that I&#39;ve ignored the existence of a tradeoff seems weird to me."}, {"owner": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "edited": false, "score": 0, "creation_date": 1539273011, "post_id": 52744321, "comment_id": 92451300, "body": "@DanielWagner Do you really need to stub out the functions? I would assume that GHC checks all imports before scope-checking any variables."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "edited": false, "score": 0, "creation_date": 1539279897, "post_id": 52744321, "comment_id": 92454856, "body": "@JonasDureg&#229;rd If you want GHC to proceed past the scope error introduced by deleting the import to check dependent modules for import problems, then yes, you need to stub out the functions."}, {"owner": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "edited": false, "score": 0, "creation_date": 1539282705, "post_id": 52744321, "comment_id": 92456304, "body": "But why would you want that? At that point you have found all the modules from the package. I suppose if you want to check other modules, one option seems to be the <code>fdefer-out-of-scope-variables</code> option."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "edited": false, "score": 0, "creation_date": 1539290849, "post_id": 52744321, "comment_id": 92460079, "body": "@JonasDureg&#229;rd No, you have misunderstood. Think of this scenario: I am developing library L with modules A and B that both import modules from MissingH, and module B imports module A. Now I delete MissingH from L&#39;s dependencies and ask cabal to build L. It builds A, and notices that a MissingH import is missing. So I delete that missing import from A. But I have not yet discovered which imports in B are from MissingH, because it has not yet been built, because A has not yet been built. So I must first make A finish building -- by stubbing out anything A imported from MissingH with undefined."}, {"owner": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "edited": false, "score": 0, "creation_date": 1539325412, "post_id": 52744321, "comment_id": 92468745, "body": "@DanielWagner That is what I meant by &quot;if you want to check other modules&quot;. <code>-fdefer-out-of-scope-variables</code> should save you from stubbing out the functions (but I have never tested the option)."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 3, "last_activity_date": 1539187555, "last_edit_date": 1539187555, "creation_date": 1539187018, "answer_id": 52744321, "question_id": 52743115, "link": "https://stackoverflow.com/questions/52743115/how-do-i-figure-out-which-of-my-imports-are-from-in-haskell/52744321#52744321", "title": "How do I figure out which of my imports are from in Haskell?", "body": "<p>You can ask GHC where it thinks a module comes from (<em>if</em> you have a package already installed providing that module).</p>\n\n<pre><code>% ghc-pkg find-module Data.Maybe\n/usr/local/lib/ghc-8.2.2/package.conf.d\n    base-4.10.1.0\n/home/dmwit/.ghc/x86_64-linux-8.2.2/package.conf.d\n    (no packages)\n</code></pre>\n\n<p>You can probably cook up a few quick scripts to automate calling this and cover 99.9% of the code people actually write. You might also like to abuse <a href=\"http://hackage.haskell.org/package/graphmod\" rel=\"nofollow noreferrer\">graphmod</a> -- use it to create a module graph, then ignore all the structure of the graph and just iterate over the list of module names it discovers for you and call <code>ghc-pkg</code> on each.</p>\n\n<p>...but it's probably going to be much quicker to just delete <code>MissingH</code> from the dependencies in your cabal file (you <em>are</em> using a build tool like stack or cabal, right??) and see which imports GHC complains about.</p>\n"}, {"tags": [], "owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "is_accepted": false, "score": 3, "last_activity_date": 1539188363, "creation_date": 1539188363, "answer_id": 52744720, "question_id": 52743115, "link": "https://stackoverflow.com/questions/52743115/how-do-i-figure-out-which-of-my-imports-are-from-in-haskell/52744720#52744720", "title": "How do I figure out which of my imports are from in Haskell?", "body": "<p>If the packages are in Stackage, you can check the module list for a snapshot to get the <code>Map ModuleName [PackageName]</code> correspondence. Yes, a module name may appear in multiple packages per snapshot. Here's an example listing:</p>\n\n<p><a href=\"https://www.stackage.org/lts-12.12/docs\" rel=\"nofollow noreferrer\">https://www.stackage.org/lts-12.12/docs</a></p>\n"}], "owner": {"reputation": 35444, "user_id": 656912, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce95c01cbd4f90f014d988ae5c8a422d?s=128&d=identicon&r=PG", "display_name": "orome", "link": "https://stackoverflow.com/users/656912/orome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1539188363, "creation_date": 1539183416, "last_edit_date": 1539187182, "question_id": 52743115, "link": "https://stackoverflow.com/questions/52743115/how-do-i-figure-out-which-of-my-imports-are-from-in-haskell", "title": "How do I figure out which of my imports are from in Haskell?", "body": "<p>I have a bunch of imports in my package and <a href=\"https://stackoverflow.com/q/52743028/656912\">need to</a> sort out which ones are coming from a specific package (MissingH). I'm not sure how to do this other than by searching for each on Hoogle. Is there a way to do this programmatically or at the command line by just scanning my package's files?</p>\n\n<p>Here's my list of imports (from all files of <a href=\"https://hackage.haskell.org/package/crypto-enigma\" rel=\"nofollow noreferrer\">my package</a>):</p>\n\n<pre><code>import           Control.Arrow\nimport           Control.Exception      (assert)\nimport           Control.Monad          (unless)\nimport           Control.Monad.Except\nimport           Control.Monad.Zip\nimport           Control.Applicative\nimport           Data.Monoid\nimport           Data.List\nimport           Data.List.Split        (splitOn)\nimport qualified Data.Map               as M\nimport           Data.Maybe\nimport           Text.Printf            (printf)\nimport           Data.Char              (toUpper)\nimport           Data.String.Utils      (replace)\n\nimport Data.Char (chr, ord)\nimport Data.List (sort)\n\nimport Control.Applicative\nimport Data.Monoid\nimport Data.Char\nimport Data.List\nimport Data.List.Split          (chunksOf)\nimport Data.String.Utils        (replace)\nimport Text.Printf              (printf)\n</code></pre>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"reputation": 352, "user_id": 7835165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c679de2a0c5648a262ecf61285f61f3?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil Jarosz", "link": "https://stackoverflow.com/users/7835165/kamil-jarosz"}, "edited": false, "score": 4, "creation_date": 1539175455, "post_id": 52740551, "comment_id": 92405676, "body": "If you&#39;ve spent a lot of time on the problem, why don&#39;t you try sharing what you have done? It&#39;ll help us believe that you&#39;ve actually put effort into solving the problem and genuinely got stuck, instead of having come here to ask for a free coding service."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539175975, "post_id": 52740551, "comment_id": 92406055, "body": "At least you came up with some function that did not do the job. So perhaps share the approach you took (a &quot;conceptual algorithm&quot; can be useful as well)."}, {"owner": {"reputation": 63, "user_id": 9438207, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RIhJNvBvNt8/AAAAAAAAAAI/AAAAAAAAAXA/YbekIDjAMVQ/photo.jpg?sz=128", "display_name": "Ben Graham", "link": "https://stackoverflow.com/users/9438207/ben-graham"}, "edited": false, "score": 0, "creation_date": 1539176283, "post_id": 52740551, "comment_id": 92406277, "body": "Sorry, just added that now"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1539177231, "post_id": 52740551, "comment_id": 92406899, "body": "Hint: <code>Data.List</code> provides a function <code>break :: (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])</code>, such that <code>break (== &quot;gap&quot;) [&quot;dash&quot;, &quot;dot&quot;, &quot;dot&quot;, &quot;gap&quot;, ...] == ([&quot;dash&quot;, &quot;dot&quot;, &quot;dot&quot;], [&quot;gap&quot;, ...])</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1539177521, "post_id": 52740551, "comment_id": 92407093, "body": "(You can use <code>Data.List.break</code>, or you can start by writing your own implementation to use in your definition of <code>format</code>.)"}, {"owner": {"reputation": 1270, "user_id": 2383766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc13aeb9c9f89e097f48d815b81541d5?s=128&d=identicon&r=PG", "display_name": "Z-Y.L", "link": "https://stackoverflow.com/users/2383766/z-y-l"}, "edited": false, "score": 0, "creation_date": 1539181691, "post_id": 52740551, "comment_id": 92409743, "body": "A suggestion for the situation when you get stuck: just look up some similar examples, and then you could figure out how to do it, e.g. if you check the sources for <code>words</code> or <code>lines</code> which are included in <code>Prelude</code>, you&#39;ll find what you want."}], "answers": [{"tags": [], "owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "is_accepted": false, "score": 2, "last_activity_date": 1539179866, "creation_date": 1539179866, "answer_id": 52741947, "question_id": 52740551, "link": "https://stackoverflow.com/questions/52740551/splitting-a-list-dependent-of-contents/52741947#52741947", "title": "Splitting a list dependent of contents", "body": "<p><code>span</code> function does the job.</p>\n\n<pre><code>format :: [String] -&gt; [[String]]\nformat (\"gap\":ws) = format ws\nformat [] = []\nformat ws = let (w1, w2) = span (/= \"gap\") ws\n            in w1:format w2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 1, "last_activity_date": 1539184057, "last_edit_date": 1539184057, "creation_date": 1539182999, "answer_id": 52742994, "question_id": 52740551, "link": "https://stackoverflow.com/questions/52740551/splitting-a-list-dependent-of-contents/52742994#52742994", "title": "Splitting a list dependent of contents", "body": "<p>You may also use <code>foldr</code> for this job</p>\n\n<pre><code>let fun = foldr (\\l a -&gt; case l of\n                         \"gap\" -&gt; [] : a\n                         _     -&gt; (l : (head a)) : (tail a)) []\nPrelude&gt; fun [\"dash\", \"dot\", \"dot\", \"gap\", \"dash\", \"dash\", \"dash\", \"gap\", \"dash\", \"dash\", \"dot\", \"gap\"]\n[[\"dash\",\"dot\",\"dot\"],[\"dash\",\"dash\",\"dash\"],[\"dash\",\"dash\",\"dot\"]]\n</code></pre>\n\n<p>If the current element <code>l</code> is a <code>\"gap\"</code> then lets insert a new empty list <code>[]</code> to the head of our accumulating list <code>a</code> or else lets take the <code>head</code> of our accumulating list <code>a</code>, insert the current element <code>l</code> to the <code>head</code> of our list and insert it to the <code>tail</code> of our accumulating list <code>a</code>.</p>\n\n<p>The above method might introduce some blank sublists if there are consequtive <code>\"gap\"</code>s. So if that is a possibility then another approach could be.</p>\n\n<pre><code>let ff = filter (not . elem \"gap\") . groupBy (\\x y -&gt; x /= \"gap\" &amp;&amp; y /= \"gap\")\n\nPrelude&gt; ff [\"dash\", \"dot\", \"dot\", \"gap\", \"gap\", \"dash\", \"dash\", \"dash\", \"gap\", \"dash\", \"dash\", \"dot\", \"gap\"]\n[[\"dash\",\"dot\",\"dot\"],[\"dash\",\"dash\",\"dash\"],[\"dash\",\"dash\",\"dot\"]]\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9438207, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RIhJNvBvNt8/AAAAAAAAAAI/AAAAAAAAAXA/YbekIDjAMVQ/photo.jpg?sz=128", "display_name": "Ben Graham", "link": "https://stackoverflow.com/users/9438207/ben-graham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539184057, "creation_date": 1539175332, "last_edit_date": 1539176438, "question_id": 52740551, "link": "https://stackoverflow.com/questions/52740551/splitting-a-list-dependent-of-contents", "title": "Splitting a list dependent of contents", "body": "<p>I would like to create a function that turns this list into a new list of lists splitting this one each time it says \"gap\"</p>\n\n<pre><code>[\"dash\", \"dot\", \"dot\", \"gap\", \"dash\", \"dash\", \"dash\", \"gap\", \"dash\", \"dash\", \"dot\", \"gap\"]\n</code></pre>\n\n<p>would become</p>\n\n<pre><code>[[\"dash\", \"dot\", \"dot\"], [\"dash\", \"dash\", \"dash\"], [\"dash\", \"dash\", \"dot\"]]\n</code></pre>\n\n<p>any idea appreciated as lets say i have spent a lot of time on this with no luck...</p>\n\n<pre><code>format :: [String] -&gt; [[String]]\nformat []\n    = []\nformat (x:xs)\n    | x == \"gap\" = []\n    | otherwise = x : (format xs)\n\nmain :: IO()\nmain = \n    putStrLn ( show ( format [\"dash\", \"dot\", \"dot\", \"gap\", \"dash\", \"dash\", \"dash\", \"gap\", \"dash\", \"dash\", \"dot\", \"gap\"] ) )\n</code></pre>\n\n<p>This is what I've been working around but I'm getting caught up with type errors and even if I get them sorted I reckon it will only run until the first \"gap\"...</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 2, "creation_date": 1539164091, "post_id": 52734077, "comment_id": 92398800, "body": "It&#39;s not saying <code>let list=doCal</code> is illegal; it just saying that this can&#39;t be <i>the last thing</i> in the function. You need to put something after it (e.g., print the value or something)."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1539173468, "post_id": 52734077, "comment_id": 92404417, "body": "Haskell does not have variables like in other languages. Please do not think in terms of variables in Haskell, it <i>will</i> confuse you."}], "answers": [{"tags": [], "owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "is_accepted": true, "score": 10, "last_activity_date": 1539155781, "creation_date": 1539155781, "answer_id": 52734656, "question_id": 52734077, "link": "https://stackoverflow.com/questions/52734077/haskell-how-to-store-the-return-value-of-a-function-to-a-variable/52734656#52734656", "title": "Haskell-How to store the return value of a function to a variable?", "body": "<p>The same way you already did it with <code>rest</code> in <code>doCal</code>. </p>\n\n<pre><code>main = do\n   list &lt;- doCal\n</code></pre>\n\n<p>But you also need to have <code>main</code> do something and return a value. So you might write</p>\n\n<pre><code>main = do\n   list &lt;- doCal\n   print list\n</code></pre>\n\n<p>This will work because <code>print list</code> returns <code>()</code>, which is a value in Haskell (its just the only value of its type).</p>\n"}], "owner": {"reputation": 67, "user_id": 6606588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l5QqZ.jpg?s=128&g=1", "display_name": "Nishara Kavindi", "link": "https://stackoverflow.com/users/6606588/nishara-kavindi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1139, "favorite_count": 0, "accepted_answer_id": 52734656, "answer_count": 1, "score": -1, "last_activity_date": 1539155781, "creation_date": 1539153526, "question_id": 52734077, "link": "https://stackoverflow.com/questions/52734077/haskell-how-to-store-the-return-value-of-a-function-to-a-variable", "title": "Haskell-How to store the return value of a function to a variable?", "body": "<p>I wrote a function in Haskell to return a list. I want to get the return value of the function and store in another variable for future use. The code I have written is given below</p>\n\n<pre><code>module Main\n where\n\nimport System.IO\n\n    main =do\n        let list=doCal\n\n\n    doCal =do\n        hSetBuffering stdin LineBuffering\n        putStrLn \"Give me a number (or 0 to stop):\"\n        num &lt;- getLine\n        let number = read num\n        if number==0\n            then \n                return []\n            else do \n                rest &lt;-doCal\n                return (number:rest)\n</code></pre>\n\n<p>When I try to run this, I got an error</p>\n\n<pre><code>Cal.hs:7:9: error:\n    The last statement in a 'do' block must be an expression\n      let list = doCal\n  |\n7 |         let list=doCal\n  |         ^^^^^^^^^^^^^^\nFailed, no modules loaded.\n</code></pre>\n\n<p>How to store the return value of a function to a variable in Haskell?</p>\n"}, {"tags": ["excel", "vba", "haskell", "dll", "ghc"], "comments": [{"owner": {"reputation": 513, "user_id": 10059074, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d5f487d1ae5cbf54ac9f5641f10c5fb4?s=128&d=identicon&r=PG", "display_name": "CatCat", "link": "https://stackoverflow.com/users/10059074/catcat"}, "edited": false, "score": 0, "creation_date": 1539154084, "post_id": 52734002, "comment_id": 92393129, "body": "What path are you using. What bitness are all the files."}, {"owner": {"reputation": 542, "user_id": 4440871, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/8gHuC.jpg?s=128&g=1", "display_name": "Fabian Schneider", "link": "https://stackoverflow.com/users/4440871/fabian-schneider"}, "reply_to_user": {"reputation": 513, "user_id": 10059074, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d5f487d1ae5cbf54ac9f5641f10c5fb4?s=128&d=identicon&r=PG", "display_name": "CatCat", "link": "https://stackoverflow.com/users/10059074/catcat"}, "edited": false, "score": 0, "creation_date": 1539154456, "post_id": 52734002, "comment_id": 92393330, "body": "Paths in the excel to the dll is absolute; if you are referring to my path variable: I will update the question;  The system &amp; files are 64-bit Excel 2016 runs as a 32 Bit version"}, {"owner": {"reputation": 513, "user_id": 10059074, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d5f487d1ae5cbf54ac9f5641f10c5fb4?s=128&d=identicon&r=PG", "display_name": "CatCat", "link": "https://stackoverflow.com/users/10059074/catcat"}, "edited": false, "score": 1, "creation_date": 1539154577, "post_id": 52734002, "comment_id": 92393396, "body": "32 bit excel can only use 32 bit dlls. If it was a COM dll you can place it in 64 bit dllhost and access it as a 64 bit COM Exe from and COM client. DLL have to match bitness but EXE don&#39;t. Your dll isn&#39;t a COM DLL though."}, {"owner": {"reputation": 513, "user_id": 10059074, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d5f487d1ae5cbf54ac9f5641f10c5fb4?s=128&d=identicon&r=PG", "display_name": "CatCat", "link": "https://stackoverflow.com/users/10059074/catcat"}, "edited": false, "score": 0, "creation_date": 1539154799, "post_id": 52734002, "comment_id": 92393496, "body": "type <code>ghc &#47;?</code> if it obeys windows rules it will tell you."}, {"owner": {"reputation": 542, "user_id": 4440871, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/8gHuC.jpg?s=128&g=1", "display_name": "Fabian Schneider", "link": "https://stackoverflow.com/users/4440871/fabian-schneider"}, "reply_to_user": {"reputation": 513, "user_id": 10059074, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d5f487d1ae5cbf54ac9f5641f10c5fb4?s=128&d=identicon&r=PG", "display_name": "CatCat", "link": "https://stackoverflow.com/users/10059074/catcat"}, "edited": false, "score": 0, "creation_date": 1539154914, "post_id": 52734002, "comment_id": 92393561, "body": "Thanks; i did not think about this excel &quot;feature&quot;"}, {"owner": {"reputation": 513, "user_id": 10059074, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/d5f487d1ae5cbf54ac9f5641f10c5fb4?s=128&d=identicon&r=PG", "display_name": "CatCat", "link": "https://stackoverflow.com/users/10059074/catcat"}, "edited": false, "score": 2, "creation_date": 1539156571, "post_id": 52734002, "comment_id": 92394448, "body": "Programs load and call dll functions direct. They usually pass pointers to objects/variables. 32 bit programs can&#39;t handle 64 bit pointers."}], "owner": {"reputation": 542, "user_id": 4440871, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/8gHuC.jpg?s=128&g=1", "display_name": "Fabian Schneider", "link": "https://stackoverflow.com/users/4440871/fabian-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539154489, "creation_date": 1539153222, "last_edit_date": 1539154489, "question_id": 52734002, "link": "https://stackoverflow.com/questions/52734002/ghc-compile-dll-for-use-in-vba", "title": "GHC compile DLL for use in VBA", "body": "<p>This is an alternative approach to this question here: <a href=\"https://stackoverflow.com/questions/52662440/export-haskell-lib-as-dll\">Export Haskell lib as DLL</a></p>\n\n<p>I am working with GHC version 8.6.1 [latest] and am following <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/win32-dlls.html#building-and-using-win32-dlls\" rel=\"nofollow noreferrer\">the documentation</a> for compiling a DLL from a haskell library for the subsequent use in VBA. </p>\n\n<p>My files look like this:</p>\n\n<p>Adder.hs:</p>\n\n<pre><code>{-# LANGUAGE ForeignFunctionInterface #-}\nmodule Adder where\n\nadder :: Int -&gt; Int -&gt; IO Int\nadder x y = return (x+y)\n\nforeign export ccall adder :: Int -&gt; Int -&gt; IO Int\n</code></pre>\n\n<p>StartEnd.c:</p>\n\n<pre><code>#include &lt;Rts.h&gt;\n\nvoid HsStart() {\n    int argc = 1;\n    char* argv[] = {\"ghcDll\", NULL};\n    char** args = argv;\n    hs_init(&amp;argc, &amp;args);\n}\n\nvoid HsEnd() {\n    hs_exit();\n}\n</code></pre>\n\n<p>I copied the folder <code>ghc-8.6.1\\lib\\include</code> to the build location and copied the two files into that folder (because I cannot figure out how to pass the -I[PATH] parameter correctly).</p>\n\n<p>Running these compilation steps, I get:</p>\n\n<pre><code>ghc -c Adder.hs\n    --&gt; no error\nghc -c StartEnd.c\n    --&gt; no error\nghc -shared -no-hs-main -o Adder.dll Adder.o Adder_stub.h StartEnd.o\n    --&gt; no error\n</code></pre>\n\n<p>and the files</p>\n\n<pre><code>Adder.dll\nAdder.dll.a\nAdder.hi\nAdder.o\nAdder_stub.h\nstartEnd.o\n</code></pre>\n\n<p>I tried using the third compilation command like it is in the documentation <code>ghc -shared -o Adder.dll Adder.o Adder_stub.h StartEnd.o</code> and with the parameter -no-hs-main just to be sure.</p>\n\n<p>My VBA script looks like this:</p>\n\n<pre><code>Private Declare Function Adder Lib \"PATH\\TO\\Adder.dll\" Alias \"adder\" _\n        (ByVal x As Long, ByVal y As Long) As Long\n\nPrivate Declare Sub HsStart Lib \"PATH\\TO\\Adder.dll\" ()\nPrivate Declare Sub HsEnd Lib \"PATH\\TO\\Adder.dll\" ()\n\nPublic Sub test()\n    HsStart\n    MsgBox \"12 + 5 = \" &amp; Adder(12, 5)\n    HsEnd\nEnd Sub\n</code></pre>\n\n<p>However, whenever I try to run the Sub test, I get the error message:</p>\n\n<pre><code>Run-Time error '48'\nFile not found:\nPATH\\TO\\Adder.dll\n</code></pre>\n\n<p>Can you please tell me where I made a mistake and how I can fix it?</p>\n\n<p>If it helps, the output of <code>dumpbin /EXPORTS Adder.dll</code> is this:</p>\n\n<pre><code>Microsoft (R) COFF/PE Dumper Version 14.00.24234.1\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\n\nDump of file Adder.dll\n\nFile Type: DLL\n\n  Section contains the following exports for Adder.dll\n\n    00000000 characteristics\n    5BBD9533 time date stamp Wed Oct 10 07:59:15 2018\n        0.00 version\n           1 ordinal base\n       29737 number of functions\n       29737 number of names\n\n    ordinal hint RVA      name\n\n          1    0 004E0F18 ALLOC_BH_adm\n          ...\n          75   4A 00001681 HsEnd\n          76   4B 00001640 HsStart\n          ...\n          472  1D7 00001540 adder\n          ...\n</code></pre>\n\n<p>My Path: </p>\n\n<pre><code>C:\\Users\\scfa\\AppData\\Local\\Programs\\MiKTeX 2.9\\miktex\\bin\\x64\\;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin;C:\\Users\\scfa\\Documents\\myProgramms\\dev_msys2\\mingw64\\bin;C:\\Users\\scfa\\Documents\\myProgramms\\dev_msys2\\mingw32\\bin;C:\\Users\\scfa\\Documents\\myProgramms\\ghc-8.6.1\\bin;C:\\Users\\scfa\\Documents\\myProgramms\\ghc-8.6.1\\mingw\\bin\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539152920, "post_id": 52733814, "comment_id": 92392627, "body": "Thanks, this means even if statements are lazy, because if compare functions are lazy then ifs&#39; should be lazy too, right?"}, {"owner": {"reputation": 22266, "user_id": 649287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0ea0055b84020bf860c05f53ba53d5?s=128&d=identicon&r=PG", "display_name": "augustss", "link": "https://stackoverflow.com/users/649287/augustss"}, "edited": false, "score": 0, "creation_date": 1539153102, "post_id": 52733814, "comment_id": 92392719, "body": "Assuming the function f returns a normal number (like an Int) it will not in fact returns 6.  It will NOT, repeat NOT, return a thunk. How does this rhyme with Haskell being lazy (actually, non-strict) you ask?  Well, the thing is that laziness will ensure that f isn\u2019t called until you need the value. So returning a thunk would be pointless, since it would have to be forced at once."}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "reply_to_user": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539154511, "post_id": 52733814, "comment_id": 92393362, "body": "@user2693928 As I&#39;m sure you&#39;ll discover as people start to pile comments on my answer, the actual implementation of how GHC does all of this is complicated. As I understand it, though, then comparisons and branching are also lazily evaluated."}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539155764, "post_id": 52733814, "comment_id": 92394002, "body": "Thanks, flaged the answer as correct, just final clarification if its possible. If it passes some lazy type in some function that takes Int how is that possible. It accept Int but I pass LazyType(whatever the implementation is in Haskell)"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "reply_to_user": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539156422, "post_id": 52733814, "comment_id": 92394369, "body": "@user2693928 I don&#39;t understand what you mean. If a function takes <code>Int</code> as an argument, you can&#39;t pass <code>LazyType</code> as an argument instead. That wouldn&#39;t compile."}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539157888, "post_id": 52733814, "comment_id": 92395174, "body": "because in some recursive function it takes first argument as Int but they pass head(xs) or similar. How come the variable is both Int and LazyObject"}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539158256, "post_id": 52733814, "comment_id": 92395397, "body": "I mean this: 3 <code>mod</code> 3 = 0, head([3,4]) <code>mod</code> 3 also eq 0. How mod function takes both Int and LazyObject ?"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "reply_to_user": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539158610, "post_id": 52733814, "comment_id": 92395583, "body": "@user2693928 <code>mod</code> is also lazy ;)"}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539158736, "post_id": 52733814, "comment_id": 92395658, "body": "O, forgot everything is lazy thank :) Good luck debugging complicated algorithm :)"}, {"owner": {"reputation": 10378, "user_id": 2476735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e9447bbc32246fcd23b76b5e946618?s=128&d=identicon&r=PG&f=1", "display_name": "David Young", "link": "https://stackoverflow.com/users/2476735/david-young"}, "reply_to_user": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539187726, "post_id": 52733814, "comment_id": 92413530, "body": "@user2693928 Laziness is not something that is distinguished at the type level. I don&#39;t see how this would make things more complicated to debug, since changing something from lazy to strict does not change the result of something (excluding bottom)..."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 2, "creation_date": 1539187885, "post_id": 52733814, "comment_id": 92413621, "body": "For your &quot;ultimately&quot; sentence, we can get more precise: <code>main</code>, and only <code>main</code>, drives all evaluation. (Simply involving IO is not enough. <code>x = print (head []); main = return ()</code> will not blow up, even though <code>print (head [])</code> is an IO action that would blow up if it were actually included in the execution of <code>main</code>.)"}], "tags": [], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "is_accepted": true, "score": 2, "last_activity_date": 1539152445, "creation_date": 1539152445, "answer_id": 52733814, "question_id": 52732878, "link": "https://stackoverflow.com/questions/52732878/haskell-laziness-question-with-head-function/52733814#52733814", "title": "Haskell laziness question with head function", "body": "<blockquote>\n  <p>Is the <code>head</code> function lazy?</p>\n</blockquote>\n\n<p>Yes, Haskell is lazily evaluated by default.</p>\n\n<blockquote>\n  <p>If it is lazy, how does the Haskell compiler know when to execute the function?</p>\n</blockquote>\n\n<p>The function will be evaluated when the value is needed - which, as far as I understand, ultimately happens when you involve <code>IO</code> in some way.</p>\n\n<blockquote>\n  <p>In this case from my perspective head will NOT return 2 + 4.</p>\n</blockquote>\n\n<p>Correct, the return 'value' is a so-called <strong>thunk</strong>, which is another name for an expression not yet evaluated. What's the expression? It's <code>head a + head b</code>.</p>\n\n<p>The main exception from the rule of lazy evaluation is <code>IO</code>, which is eagerly evaluated. So if you want to, say, <em>print</em> the result of calling <code>f [2, 3] [4, 5]</code>, then enough of the expression gets evaluated to produce a result to print.</p>\n\n<p>There are ways to force evaluation earlier, if required, e.g. by using <code>seq</code>. This can sometimes be important, because those thunks can get big.</p>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 4, "last_activity_date": 1539159891, "creation_date": 1539159891, "answer_id": 52735774, "question_id": 52732878, "link": "https://stackoverflow.com/questions/52732878/haskell-laziness-question-with-head-function/52735774#52735774", "title": "Haskell laziness question with head function", "body": "<p>I think there is some confusion here because the term \"lazy\" is sometimes used in two different contexts.</p>\n\n<ul>\n<li>lazy semantics (as opposed to eager semantics)</li>\n<li>lazy function (which should actually be called non-strict function)</li>\n</ul>\n\n<p>About lazy vs eager semantics: consider this expression</p>\n\n<pre><code>(\\x -&gt; 42) (error \"urk!\")\n</code></pre>\n\n<p>when the above is evaluated, what is the result?</p>\n\n<p>According to <em>eager</em> semantics, we evaluate the argument before calling the function. The result will be a runtime error.</p>\n\n<p>According to lazy semantics, we call the function immediately. This process can be understood both operationally and denotationally as follows.</p>\n\n<p>Operationally, it is passed a <em>thunk</em>, an object which describes the not-yet-evaluated argument, and which will be \"forced\" (evaluated) whenever the argument <code>x</code> is needed. We can pretend that <code>x</code> points to the unevaluated expression <code>error \"urk!\"</code>, which will be evaluated when <code>x</code> is demanded.</p>\n\n<p>Denotationally, we use a mathematical trick: we denote the error with a special value called \"bottom\", and say that <code>error \"urk!\"</code> has such bottom value.\nThen, we simply pretend that this exceptional value can be passed around. In the function call above, <code>x</code> will be bound to \"bottom\", as if it were a normal value. This is arguably simpler because we do not need to focus on how the expressions are evaluated, but only on how the bottom is propagated.</p>\n\n<p>More precisely, we let \"bottom\" represent both runtime errors and non-termination (infinite recursion), both of which let a program get away with returning an actual result.</p>\n\n<p>For instance, we have that <code>if bottom then .. else ..</code> will always yield bottom. Similarly for <code>bottom + 4</code>, which is bottom. Again, <code>case bottom of SomeConstructor -&gt; ...; ...</code> is bottom (well, except for <code>newtypes</code>, but let's ignore this). Instead <code>f bottom</code> may or may not be bottom according to what <code>f</code> does: if it needs the argument, the result will be bottom.</p>\n\n<p>About lazy (non-strict) functions. A function <code>f</code> is sometimes said to be \"lazy\" (or, more properly, non-strict) iff <code>f bottom</code> is bottom.</p>\n\n<p>For instance:</p>\n\n<pre><code>f x = x+1  -- strict / non lazy\nf x = 5    -- non strict / lazy\nhead xs = case xs of   -- strict / non lazy\n   [] -&gt; error \"head: empty list\"\n   (x:xs) -&gt; x\ng x = (x,True)   -- non strict / lazy\n</code></pre>\n\n<p>So, since <code>head bottom</code> is <code>case bottom of ...</code> which is bottom, <code>head</code> is not lazy. Operationally, since <code>head</code> demands its argument before producing its result, it is strict / non lazy.</p>\n\n<p>About <code>g</code>: a main feature of lazy semantics is that <code>data</code> constructors like the pair constructor <code>(,)</code> are intrinsically lazy. That is <code>(bottom, 4)</code> is not the same as bottom: this makes it possible to have <code>snd (bottom, 4) = 4</code> even if the first pair component is an \"error\" value.</p>\n\n<p>So, <code>g bottom = (bottom, True)</code> is not bottom, and we could apply <code>snd</code> to extract <code>True</code> without triggering the error.</p>\n"}], "owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 1, "accepted_answer_id": 52733814, "answer_count": 2, "score": 2, "last_activity_date": 1539159891, "creation_date": 1539147486, "last_edit_date": 1539152485, "question_id": 52732878, "link": "https://stackoverflow.com/questions/52732878/haskell-laziness-question-with-head-function", "title": "Haskell laziness question with head function", "body": "<p>Info:</p>\n\n<p>From Docs and tutorials it says: \"Haskell is lazy\" by default.</p>\n\n<p>They don't explain the details about it, and i wonder.</p>\n\n<p>Now I know that if I write:</p>\n\n<pre><code>filter odd [1, 2, 3]\n</code></pre>\n\n<p>It will not filter the results until they are showed or used in expression.</p>\n\n<p>I have a couple of questions about this:</p>\n\n<hr>\n\n<p>Is the <code>head</code> function lazy?</p>\n\n<p>If not why is it not lazy?</p>\n\n<p>If it is lazy, how does the Haskell compiler know when to execute the function?</p>\n\n<p>I give you an example:</p>\n\n<pre><code>f a b = head a + head b\n\nf [2, 3] [4, 5]\n</code></pre>\n\n<p>In this case from my perspective head will <strong>NOT</strong> return 2 + 4.</p>\n\n<p>It will return some type or function that will be executed later when needed. (correct me if i mistaken somewhere).</p>\n\n<p>So my suggestion is that when Haskell see some operation like '+' it calculates the result.</p>\n\n<p>But it gets more complicated because for Integers i suppose if i write <code>3 + 5</code> it can be lazy expression as well.</p>\n\n<p>I doubt there are list with functions when the lazy expression starts calculating because it will be hard to write all the variations. </p>\n\n<p>And last:</p>\n\n<pre><code>f head [1, 2]\n</code></pre>\n\n<p>Lets say in <code>f</code> function I print the type of the variable passed.</p>\n\n<p>Now how Haskell will know if the Int 1 should be passed or the lazy expression?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["haskell", "type-constraints", "type-families"], "comments": [{"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1539126795, "post_id": 52730463, "comment_id": 92386012, "body": "I do get the error: <code>29:7: error:     \u2022 not a member     \u2022 In the expression: foo       In an equation for \u2018bar\u2019: bar = foo </code>"}, {"owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1539127231, "post_id": 52730463, "comment_id": 92386111, "body": "Wow, maybe I should update my GHC!? Let me check!"}, {"owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1539128666, "post_id": 52730463, "comment_id": 92386429, "body": "Ha, I had over-simplified the problem, updating it now..."}, {"owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539130785, "post_id": 52730463, "comment_id": 92386923, "body": "@dfeuer ha, I updated the code but not the error message, fixed now"}], "answers": [{"comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1539130122, "post_id": 52730832, "comment_id": 92386769, "body": "This still doesn&#39;t produce a type error for me. Does it for you?"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1539131421, "post_id": 52730832, "comment_id": 92387064, "body": "@DanielWagner, no, it seems not to in this case. In some other contexts it should ...."}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 0, "last_activity_date": 1539129665, "creation_date": 1539129665, "answer_id": 52730832, "question_id": 52730463, "link": "https://stackoverflow.com/questions/52730463/how-to-define-a-custom-type-error-within-a-type-family-for-a-constraint-that-use/52730832#52730832", "title": "How to define a custom type error within a type family for a constraint that uses type equality?", "body": "<p>I think you probably want to go back to the first attempt:</p>\n\n<pre><code>type family MemberB (x :: k) (l :: [k]) where\n  MemberB _ '[]      = 'False\n  MemberB a (a : xs) = 'True\n  MemberB a (b : xs) = MemberB a xs\n</code></pre>\n\n<p>But let's fix up <code>Member</code>.</p>\n\n<pre><code>type Member x l = Member' x l (MemberB x l)\n\ntype family Member' x l mem :: Constraint where\n  Member' x l 'True = ()\n  Member' x l 'False =\n    TypeError ('ShowType x :&lt;&gt;:\n               'Text \" is not a member of \" :&lt;&gt;:\n               'ShowType l)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1539130219, "post_id": 52730858, "comment_id": 92386804, "body": "How do you square this explanation with the observation that the compiler complains about not being able to prove <code>&#39;False ~ &#39;True</code> when not using <code>TypeError</code>? If I were to read this answer literally, I would think that the compiler would then just introduce <code>&#39;False ~ &#39;True</code> into the context, not produce an error."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1539130441, "post_id": 52730858, "comment_id": 92386848, "body": "@DanielWagner, the type checker <i>tries</i> to see if a pattern match is redundantly impossible; it doesn&#39;t always succeed."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1539161526, "post_id": 52730858, "comment_id": 92397165, "body": "@DanielWagner Indeed, I would expect that the constraint is not proved, but rather assumed by the type checker. GHC, in other cases, somehow decided that if the local assumptions are inconsistent then it must report an error -- in this case instead it does not. Perhaps inconsistency in the general case can not be decided, so GHC has to be imperfect? Sometimes I wish that GHC let me annotate such &quot;impossible&quot; cases, much like Agda <code>()</code> patterns."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1539168102, "post_id": 52730858, "comment_id": 92401242, "body": "@chi Ah, well, <a href=\"https://stackoverflow.com/questions/36680830/how-can-i-use-contradictory-evidence\">that much at least you can do -- with some effort</a>. I previously wrote up an answer which did not give an error for <code>exhaustive</code> but did use <code>EmptyCase</code> to assert that the extra cases were impossible... but the trick I thought up in the meantime seemed strictly better."}], "tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": false, "score": 1, "last_activity_date": 1539129846, "creation_date": 1539129846, "answer_id": 52730858, "question_id": 52730463, "link": "https://stackoverflow.com/questions/52730463/how-to-define-a-custom-type-error-within-a-type-family-for-a-constraint-that-use/52730858#52730858", "title": "How to define a custom type error within a type family for a constraint that uses type equality?", "body": "<p><code>exhaustive</code> is handling a case that can never happen but that's not really an error. Or at least, it's working as intended for now, even if the type system could be improved to not allow handling of impossible cases.</p>\n\n<p>Pattern-matching on <code>Action2</code> <em>provides</em> you the constraint <code>Member 'A '[ 'B, 'C ]</code> into your context. This is different from using <code>Action2</code> as an expression, which <em>requires</em> that constraint, and that would result in an error in the constraint solver.</p>\n"}, {"comments": [{"owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "edited": false, "score": 0, "creation_date": 1539130888, "post_id": 52730946, "comment_id": 92386950, "body": "Neat trick! Unless someone provides an answer using <code>TypeError</code>, I&#39;ll probably accept this as my closest to perfect answer."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 4, "last_activity_date": 1539130660, "creation_date": 1539130660, "answer_id": 52730946, "question_id": 52730463, "link": "https://stackoverflow.com/questions/52730463/how-to-define-a-custom-type-error-within-a-type-family-for-a-constraint-that-use/52730946#52730946", "title": "How to define a custom type error within a type family for a constraint that uses type equality?", "body": "<p>Well, it doesn't use <code>TypeError</code>, but you might find it interesting anyway:</p>\n\n<pre><code>{-# LANGUAGE ConstraintKinds #-}\n{-# LANGUAGE DataKinds #-}\n{-# LANGUAGE KindSignatures #-}\n{-# LANGUAGE PolyKinds #-}\n{-# LANGUAGE TypeFamilies #-}\n{-# LANGUAGE TypeOperators #-}\n{-# LANGUAGE GADTs #-}\n\nmodule Whatever where\n\ndata IsMember k = IsMember | Isn'tMember k [k]\n\ntype family MemberB (x :: k) (l :: [k]) (orig :: [k]) where\n  MemberB a '[]      ys = 'Isn'tMember a ys\n  MemberB a (a : xs) ys = 'IsMember\n  MemberB a (b : xs) ys = MemberB a xs ys\n\ntype Member x xs = MemberB x xs xs ~ 'IsMember\n\ndata Configuration = A | B | C\n\ndata Action (configuration :: Configuration) where\n  Action1 :: Member cfg '[ 'A ]     =&gt; Action cfg\n  Action2 :: Member cfg '[ 'B, 'C ] =&gt; Action cfg\n  Action3 :: Member cfg '[ 'A, 'C ] =&gt; Action cfg\n\nexhaustive :: Action 'A -&gt; ()\nexhaustive Action1 = ()\nexhaustive Action3 = ()\nexhaustive Action2 = ()\n</code></pre>\n\n<p>The error is a bit more informative now:</p>\n\n<pre><code>test.hs:32:16: error:\n    \u2022 Couldn't match type \u2018'Isn'tMember 'A '['B, 'C]\u2019 with \u2018'IsMember\u2019\n      Inaccessible code in\n        a pattern with constructor:\n          Action2 :: forall (cfg :: Configuration).\n                     Member cfg '['B, 'C] =&gt;\n                     Action cfg,\n        in an equation for \u2018exhaustive\u2019\n    \u2022 In the pattern: Action2\n      In an equation for \u2018exhaustive\u2019: exhaustive Action2 = ()\n   |\n32 |     exhaustive Action2 = ()\n   |                ^^^^^^^\n</code></pre>\n"}], "owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1539131014, "creation_date": 1539126608, "last_edit_date": 1539131014, "question_id": 52730463, "link": "https://stackoverflow.com/questions/52730463/how-to-define-a-custom-type-error-within-a-type-family-for-a-constraint-that-use", "title": "How to define a custom type error within a type family for a constraint that uses type equality?", "body": "<p>So, one can define a membership constraint like so:</p>\n\n<pre><code>{-# LANGUAGE ConstraintKinds #-}\n{-# LANGUAGE DataKinds #-}\n{-# LANGUAGE KindSignatures #-}\n{-# LANGUAGE PolyKinds #-}\n{-# LANGUAGE TypeFamilies #-}\n{-# LANGUAGE TypeOperators #-}\n{-# LANGUAGE GADTs #-}\n\nmodule Whatever where\n\ntype family MemberB (x :: k) (l :: [k]) where\n  MemberB _ '[]      = 'False\n  MemberB a (a : xs) = 'True\n  MemberB a (b : xs) = MemberB a xs\n\ntype Member x xs = MemberB x xs ~ 'True\n\ndata Configuration = A | B | C\n\ndata Action (configuration :: Configuration) where\n  Action1 :: Member cfg '[ 'A ]     =&gt; Action cfg\n  Action2 :: Member cfg '[ 'B, 'C ] =&gt; Action cfg\n  Action3 :: Member cfg '[ 'A, 'C ] =&gt; Action cfg\n\nexhaustive :: Action 'A -&gt; ()\nexhaustive Action1 = ()\nexhaustive Action3 = ()\nexhaustive Action2 = ()\n</code></pre>\n\n<p>But the error message we get is not very informative:</p>\n\n<pre><code> \u2022 Couldn't match type \u2018'False\u2019 with \u2018'True\u2019\n   Inaccessible code in\n     a pattern with constructor:\n       Action2 :: forall (cfg :: Configuration).\n                  Member cfg '['B, 'C] =&gt;\n                  Action cfg,\n     in an equation for \u2018exhaustive\u2019\n \u2022 In the pattern: Action2\n   In an equation for \u2018exhaustive\u2019: exhaustive Action2 = () (intero)\n</code></pre>\n\n<p>It'd be nice to use the new <code>TypeError</code> feature to improve on this message, however, a naive solution gobbles the error:</p>\n\n<pre><code>import GHC.TypeLits\n\ntype family MemberB (x :: k) (l :: [k]) where\n  MemberB _ '[]      = TypeError ('Text \"not a member\")\n  MemberB a (a : xs) = 'True\n  MemberB a (b : xs) = MemberB a xs\n</code></pre>\n\n<p>It seems that, maybe, <code>TypeError</code> behaves as any type, and so it unifies happily with <code>'True</code>?</p>\n\n<p>Is there a way to get a nice type error, while preserving the membership behavior?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 2360, "user_id": 367332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6D0rd.png?s=128&g=1", "display_name": "DarthFennec", "link": "https://stackoverflow.com/users/367332/darthfennec"}, "edited": false, "score": 2, "creation_date": 1539127364, "post_id": 52730244, "comment_id": 92386141, "body": "What do you want it to do if it doesn&#39;t find a match?"}, {"owner": {"reputation": 1657, "user_id": 784923, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fb67cbf11232c7c912e9b69d9f5284bd?s=128&d=identicon&r=PG", "display_name": "VirtualProdigy", "link": "https://stackoverflow.com/users/784923/virtualprodigy"}, "reply_to_user": {"reputation": 2360, "user_id": 367332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6D0rd.png?s=128&g=1", "display_name": "DarthFennec", "link": "https://stackoverflow.com/users/367332/darthfennec"}, "edited": false, "score": 0, "creation_date": 1539127434, "post_id": 52730244, "comment_id": 92386157, "body": "I\u2019d be fine with just returning a hardcode string value that says something like \u201cfailed\u201d"}, {"owner": {"reputation": 2360, "user_id": 367332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6D0rd.png?s=128&g=1", "display_name": "DarthFennec", "link": "https://stackoverflow.com/users/367332/darthfennec"}, "edited": false, "score": 1, "creation_date": 1539128092, "post_id": 52730244, "comment_id": 92386283, "body": "Right now it returns <code>Nothing</code> if it doesn&#39;t find a match, which is a really good standard way of encoding a failure state. If you want <code>findNextState</code> to return <code>Transition</code> then you need to encode your failure state as a <code>Transition</code> somehow (you can&#39;t just return a string since that isn&#39;t a <code>Transition</code>). If you do that, the failure would be passed to <code>getToState</code> and processed, as if it was a successful find, which is probably not what you want. Leaving it as a <code>Maybe</code> is probably the preferred option, and you can use a case statement/pattern matching to extract the value."}, {"owner": {"reputation": 2360, "user_id": 367332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6D0rd.png?s=128&g=1", "display_name": "DarthFennec", "link": "https://stackoverflow.com/users/367332/darthfennec"}, "edited": false, "score": 0, "creation_date": 1539128376, "post_id": 52730244, "comment_id": 92386344, "body": "Alternatively, if you&#39;re comfortable with the program just crashing with an error on a failed find, you can use <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Maybe.html#v:fromJust\" rel=\"nofollow noreferrer\"><code>fromJust :: Maybe a -&gt; a</code></a>. Not recommended in general, but it has its uses."}, {"owner": {"reputation": 1657, "user_id": 784923, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fb67cbf11232c7c912e9b69d9f5284bd?s=128&d=identicon&r=PG", "display_name": "VirtualProdigy", "link": "https://stackoverflow.com/users/784923/virtualprodigy"}, "reply_to_user": {"reputation": 2360, "user_id": 367332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6D0rd.png?s=128&g=1", "display_name": "DarthFennec", "link": "https://stackoverflow.com/users/367332/darthfennec"}, "edited": false, "score": 0, "creation_date": 1539128809, "post_id": 52730244, "comment_id": 92386467, "body": "@DarthFennec I apologize, I&#39;m very unfamiliar with this language. Are you saying I could create a function fromJust like this: <code>fromJust :: Maybe Transisition-&gt; Transisition</code> <code>fromJust a = a</code>"}, {"owner": {"reputation": 1657, "user_id": 784923, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fb67cbf11232c7c912e9b69d9f5284bd?s=128&d=identicon&r=PG", "display_name": "VirtualProdigy", "link": "https://stackoverflow.com/users/784923/virtualprodigy"}, "reply_to_user": {"reputation": 2360, "user_id": 367332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6D0rd.png?s=128&g=1", "display_name": "DarthFennec", "link": "https://stackoverflow.com/users/367332/darthfennec"}, "edited": false, "score": 0, "creation_date": 1539129007, "post_id": 52730244, "comment_id": 92386517, "body": "I don&#39;t mind if the program crashes at this point. So the <code>fromJust</code> implementation seems very appealing. Do you have an example of this, maybe a website that uses <code>fromjust</code>?"}, {"owner": {"reputation": 2360, "user_id": 367332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6D0rd.png?s=128&g=1", "display_name": "DarthFennec", "link": "https://stackoverflow.com/users/367332/darthfennec"}, "edited": false, "score": 0, "creation_date": 1539190291, "post_id": 52730244, "comment_id": 92415040, "body": "&quot;Are you saying I could create a function fromJust like this:&quot; No, it wouldn&#39;t be implemented like that. <code>fromJust</code> is a standard library function, included in the <code>Data.Maybe</code> package. My earlier comment has a link to the documentation. If you were to implement it yourself, you&#39;d do something like this: <code>fromJust :: Maybe a -&gt; a  &#47;&#47;  fromJust (Just x) = x  &#47;&#47;  fromJust Nothing = error &quot;illegal fromJust Nothing encountered, crashing&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1657, "user_id": 784923, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fb67cbf11232c7c912e9b69d9f5284bd?s=128&d=identicon&r=PG", "display_name": "VirtualProdigy", "link": "https://stackoverflow.com/users/784923/virtualprodigy"}, "edited": false, "score": 0, "creation_date": 1539130434, "post_id": 52730843, "comment_id": 92386847, "body": "Seeing this put the <code>fromJust</code> in prospective for me. For this particular use case I think I&#39;m safe if the program crashes on bad input otherwise the <code>fmap</code> would definitively be the right way to go. Thank you so much for the help!"}], "tags": [], "owner": {"reputation": 2360, "user_id": 367332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6D0rd.png?s=128&g=1", "display_name": "DarthFennec", "link": "https://stackoverflow.com/users/367332/darthfennec"}, "is_accepted": true, "score": 7, "last_activity_date": 1540505096, "last_edit_date": 1540505096, "creation_date": 1539129724, "answer_id": 52730843, "question_id": 52730244, "link": "https://stackoverflow.com/questions/52730244/haskell-convert-a-maybe-to-a-defined-type/52730843#52730843", "title": "Haskell Convert a Maybe to a defined Type", "body": "<p>I'd recommend keeping the <code>Maybe</code>, as it allows the code to fail gracefully if it doesn't find a match. If you do that, you'll leave <code>getListOfNextStates</code> returning <code>Maybe Transition</code>, and then change <code>findNextState</code> to return <code>Maybe State</code>. Now you can define it like this:</p>\n\n<pre><code>findNextState :: DFA -&gt; State -&gt; Symbol -&gt; Maybe State\nfindNextState (_,_,_,tList) state symbol = case newstate of\n    Just s -&gt; Just (getToState s)\n    Nothing -&gt; Nothing\n  where newstate = getListOfNextStates tList state symbol\n</code></pre>\n\n<p>Or more succinctly, you can use <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor.html#v:fmap\" rel=\"nofollow noreferrer\"><code>fmap :: (a -&gt; b) -&gt; Maybe a -&gt; Maybe b</code></a> (or its infix version, <code>&lt;$&gt;</code>) like so:</p>\n\n<pre><code>findNextState :: DFA -&gt; State -&gt; Symbol -&gt; Maybe State\nfindNextState (_,_,_,tList) state symbol = getToState &lt;$&gt; newstate\n  where newstate = getListOfNextStates tList state symbol\n</code></pre>\n\n<hr>\n\n<p>If you really don't think there will be a failed find, or you just don't care, you can use <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Maybe.html#v:fromJust\" rel=\"nofollow noreferrer\"><code>fromJust :: Maybe Transition -&gt; Transition</code></a>, like so:</p>\n\n<pre><code>import Data.Maybe\n\ngetListOfNextStates :: [Transisition] -&gt; State -&gt; Symbol -&gt; Transisition\ngetListOfNextStates tList state symbol = fromJust (find (\\(sState,sym,eState) -&gt; matchTransition state symbol (sState,sym,eState)) tList)\n</code></pre>\n\n<p>This will throw an exception if <code>getListOfNextStates</code> returns <code>Nothing</code>, effectively crashing the program. I wouldn't do this in real code unless you can absolutely ensure that it will never happen.</p>\n"}], "owner": {"reputation": 1657, "user_id": 784923, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fb67cbf11232c7c912e9b69d9f5284bd?s=128&d=identicon&r=PG", "display_name": "VirtualProdigy", "link": "https://stackoverflow.com/users/784923/virtualprodigy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 0, "accepted_answer_id": 52730843, "answer_count": 1, "score": 1, "last_activity_date": 1540505096, "creation_date": 1539124544, "question_id": 52730244, "link": "https://stackoverflow.com/questions/52730244/haskell-convert-a-maybe-to-a-defined-type", "title": "Haskell Convert a Maybe to a defined Type", "body": "<p>I'm in my first few days of learning Haskell and I'm struggle with the <code>Maybe</code>  type that is being returned from the Haskell's <code>find</code> function. I defined a function called <code>FindNextState</code> which takes in a tuple, and 2 Strings. This funcition calls <code>getListOfNextStates</code> which uses a lambda and pattern matching to get a list from the passed in tuple and then uses the <code>find</code> function's predicate I find a match in that list. The problem is find returns return a <code>Maybe</code> of my Transition type, this is preventing me from calling my <code>getToState</code> function because it's expecting at Transition. Is there anyway to convert the <code>Maybe</code> returned by find function?</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>type State = String\ntype Symbol = String\ntype Transisition = (State, Symbol, State)\n\nstates = [\"s0\",\"s1\"]\ninitState = \"s0\"\nfinalStates = [\"s3\"]\ntransisitionList = [(\"s0\", \"0\", \"s1\"), (\"s0\", \"1\", \"s1\")]\ndfa = (states, initState, finalStates, transisitionList)\n\ngetToState :: Transisition -&gt; State\ngetToState  (_, _, toState) = toState\n\n\nfindNextState :: DFA -&gt; State -&gt; Symbol -&gt; Maybe Transisition --Maybe Transisition is the issue, I need it to be my type of Transisition otherwise Haskell throws an error when I load my program \nfindNextState (_,_,_,tList) state symbol =  getListOfNextStates tList state symbol\n\ngetListOfNextStates :: [Transisition] -&gt; State -&gt; Symbol -&gt; Maybe Transisition\ngetListOfNextStates tList state symbol = find(\\(sState,sym,eState) -&gt; matchTransition state symbol (sState,sym,eState)) tList\n</code></pre>\n\n<p><strong>Sample Input</strong></p>\n\n<pre><code>findNextState dfa \"s2\" \"0\"\nJust (\"s2\",\"0\",\"s3\")\n\n*Main&gt; :t findNextState dfa \"s2\" \"0\"\nfindNextState dfa \"s2\" \"0\" :: Maybe Transisition\n</code></pre>\n\n<p>** Desired Code**</p>\n\n<pre><code>findNextState :: DFA -&gt; State -&gt; Symbol -&gt; State\nfindNextState (_,_,_,tList) state symbol = getToState( (getListOfNextStates tList state symbol) )\n</code></pre>\n"}, {"tags": ["haskell", "gadt"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1539123486, "post_id": 52729542, "comment_id": 92385275, "body": "If you aren&#39;t planning on having many actions, you could always just have <code>data Action (capabilityA :: &#39;Bool) (capabilityB :: &#39;Bool) (capabilityC :: &#39;Bool) where { ... }</code>. Then, <code>exhaustive :: (&#39;True ~ capA) =&gt; Action capA capB capC -&gt; ()</code> sort of works."}, {"owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1539123684, "post_id": 52729542, "comment_id": 92385334, "body": "No, there will be possibly a hundred actions! :-("}], "answers": [{"tags": [], "owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "is_accepted": false, "score": 3, "last_activity_date": 1539126643, "last_edit_date": 1539126643, "creation_date": 1539124459, "answer_id": 52730238, "question_id": 52729542, "link": "https://stackoverflow.com/questions/52729542/is-it-possible-to-use-haskells-type-system-gadts-to-do-some-sort-of-polymorph/52730238#52730238", "title": "Is it possible to use Haskell&#39;s type system (GADTs) to do some sort of polymorphic variants?", "body": "<p>A friend suggested a solution:</p>\n\n<pre><code>{-# LANGUAGE ConstraintKinds #-}\n{-# LANGUAGE DataKinds #-}\n{-# LANGUAGE FlexibleContexts #-}\n{-# LANGUAGE GADTs #-}\n{-# LANGUAGE KindSignatures #-}\n{-# LANGUAGE PolyKinds #-}\n{-# LANGUAGE TypeFamilies #-}\n{-# LANGUAGE TypeOperators #-}\n\nmodule Action where\n\ntype family MemberB (x :: k) (l :: [k]) where\n  MemberB x '[]     = 'False\n  MemberB x (x:xs)  = 'True\n  MemberB x (x':xs) = MemberB x xs\n\ntype Member x xs = MemberB x xs ~ 'True\n\ndata Configuration\n  = A\n  | B\n  | C\n\ndata Action (configuration :: Configuration) where\n  Action1 :: Member cfg '[ 'A ]     =&gt; Action cfg\n  Action2 :: Member cfg '[ 'B, 'C ] =&gt; Action cfg\n  Action3 :: Member cfg '[ 'A, 'C ] =&gt; Action cfg\n\nexhaustive :: Action 'A -&gt; ()\nexhaustive Action1 = ()\nexhaustive Action3 = ()\nexhaustive Action2 = ()\n</code></pre>\n\n<p>Apparently, the problem is that the <code>Member</code> I was using (from <code>Data.Type.Set</code>) was not a <strong>closed</strong> type family.  Now, the error messages aren't great, and we tried to do the following:</p>\n\n<pre><code>type family MemberB (x :: k) (l :: [k]) where\n  MemberB x '[]     = TypeError ('Text \"not a member\")\n  MemberB x (x:xs)  = 'True\n  MemberB x (x':xs) = MemberB x xs\n</code></pre>\n\n<p>But unfortunately, this eats the type error! Is it because <code>TypeError</code> will happily unify with <code>'True</code>? If anyone has a solution to make the type error slightly nicer, I'd happily take it!</p>\n\n<p>I made a separate question for this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/52730463/how-to-define-a-custom-type-error-within-a-type-family-for-a-constraint-that-use\">How to define a custom type error within a type family for a constraint that uses type equality?</a></p>\n"}], "owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1539126643, "creation_date": 1539120279, "question_id": 52729542, "link": "https://stackoverflow.com/questions/52729542/is-it-possible-to-use-haskells-type-system-gadts-to-do-some-sort-of-polymorph", "title": "Is it possible to use Haskell&#39;s type system (GADTs) to do some sort of polymorphic variants?", "body": "<p>Here is what I am trying to achieve:</p>\n\n<pre><code>{-# LANGUAGE DataKinds #-}\n{-# LANGUAGE FlexibleContexts #-}\n{-# LANGUAGE GADTs #-}\n{-# LANGUAGE KindSignatures #-}\n\nmodule Action where\n\nimport Data.Type.Set\n\ndata Configuration\n  = A\n  | B\n  | C\n\ndata Action (configuration :: Configuration) where\n  Action1 :: Member cfg '[ 'A ]     =&gt; Action cfg\n  Action2 :: Member cfg '[ 'B, 'C ] =&gt; Action cfg\n  Action3 :: Member cfg '[ 'A, 'C ] =&gt; Action cfg\n\nexhaustive :: Action 'A -&gt; ()\nexhaustive Action1 = ()\nexhaustive Action3 = ()\n</code></pre>\n\n<p>I have a set of actions, and a set of configurations, but some actions only make sense in some configurations. I'd like to not have to explicitly discard irrelevant actions in a configuration, so I thought about using GADTs. Unfortunately, the type-checker is not able to realize that my <code>exhaustive</code> function is indeed exhaustive.</p>\n\n<p>I wonder whether I can use any of the existing type-level lists/sets, or even row-types (as in <a href=\"http://hackage.haskell.org/package/row-types-0.2.3.0/docs/Data-Row-Variants.html\" rel=\"nofollow noreferrer\">http://hackage.haskell.org/package/row-types-0.2.3.0/docs/Data-Row-Variants.html</a> ) to solve this problem.</p>\n\n<p>I have also tried an approach where <code>Action2 :: Action '[ 'B, 'C ]</code> and pushing the type class constraints into <code>exhaustive</code>, to no success.</p>\n\n<p>Thanks for any suggestions! (or even reasons why this is a bad idea, or not feasible easily)</p>\n"}, {"tags": ["haskell", "scotty"], "comments": [{"owner": {"reputation": 7666, "user_id": 1241193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0331e5e748a0ac3860b68f6cac130ef1?s=128&d=identicon&r=PG", "display_name": "Bob Dalgleish", "link": "https://stackoverflow.com/users/1241193/bob-dalgleish"}, "edited": false, "score": 0, "creation_date": 1539109607, "post_id": 52726401, "comment_id": 92379613, "body": "<code>Text</code> is not the same as <code>String</code>, and this has bitten a lot of people, not only in Haskell. You will likely need to <code>import qualified Data.Text as T</code> and then use <code>T.pack</code> function to convert <code>String</code> (<i>i.e.</i>, <code>[Char]</code>) to <code>Data.Text</code> format."}], "answers": [{"tags": [], "owner": {"reputation": 2331, "user_id": 2072459, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JBWNH.jpg?s=128&g=1", "display_name": "Nicolas Heimann", "link": "https://stackoverflow.com/users/2072459/nicolas-heimann"}, "is_accepted": true, "score": 1, "last_activity_date": 1539167558, "creation_date": 1539167558, "answer_id": 52738210, "question_id": 52726401, "link": "https://stackoverflow.com/questions/52726401/scotty-convert-get-parameter-lazy-text-conversion/52738210#52738210", "title": "Scotty Convert GET Parameter / Lazy.Text conversion", "body": "<p>Thanks Bob Dalgleish (comments) for helping me on this problem, with <code>pack</code>/<code>unpack</code> functions I could solve the situation</p>\n\n<pre><code>{-# LANGUAGE OverloadedStrings #-}\nmodule Main where\nimport Data.Monoid ((&lt;&gt;))\nimport qualified Data.Text as T\nimport qualified Data.Text.Lazy as L\nimport Web.Scotty\n\nf x = x * x\nmain = do\n  scotty 3000 $ do\n    get \"/f/:x\" $ do\n        x &lt;- param \"x\"\n        let res_string = show $ f $ read $ T.unpack x\n        let label_string = \"f(\" &lt;&gt; (T.unpack x) &lt;&gt; \") = \"\n        text $ L.pack (label_string &lt;&gt; res_string)\n</code></pre>\n\n<p>Please note that <code>read</code> is \"dangerous\" and should not be replaced by <code>readMaybe</code>, but this would be off topic here.</p>\n"}], "owner": {"reputation": 2331, "user_id": 2072459, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JBWNH.jpg?s=128&g=1", "display_name": "Nicolas Heimann", "link": "https://stackoverflow.com/users/2072459/nicolas-heimann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 52738210, "answer_count": 1, "score": 1, "last_activity_date": 1539167558, "creation_date": 1539106099, "question_id": 52726401, "link": "https://stackoverflow.com/questions/52726401/scotty-convert-get-parameter-lazy-text-conversion", "title": "Scotty Convert GET Parameter / Lazy.Text conversion", "body": "<p>I try to pass a GET parameter into a function and concat a string from the result</p>\n\n<pre><code>{-# LANGUAGE OverloadedStrings #-}\nmodule Main where\nimport Data.Monoid ((&lt;&gt;))\nimport Web.Scotty\n\nf x = x &lt;&gt; x\nmain = do\n  scotty 3000 $ do\n    get \"/f/:x\" $ do\n        x &lt;- param \"x\"\n        text (\"f(\" &lt;&gt; x &lt;&gt; \") = \" &lt;&gt; f x)\n</code></pre>\n\n<p>To make my application even more interesting, I want to use a function which requires an argument type instance of Num, e.g.</p>\n\n<pre><code>f x = x * x\n</code></pre>\n\n<p>How can I convert/read <code>x</code> to a <code>Num</code> (or <code>Maybe...</code>) and convert the function result back to a <code>Data.Text.Internal.Lazy.Text</code>?</p>\n\n<p>I tried</p>\n\n<pre><code>text (\"f(\" &lt;&gt; x &lt;&gt; \") = \" &lt;&gt; (show $ f $ read x))\n</code></pre>\n\n<p>which yields errors:</p>\n\n<pre><code>\u2022 Couldn't match expected type\n  \u2018text-1.2.3.1:Data.Text.Internal.Lazy.Text\u2019\n  with actual type \u2018[Char]\u2019\n</code></pre>\n"}, {"tags": ["haskell", "functional-programming"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1539106127, "post_id": 52726233, "comment_id": 92377984, "body": "Did you already implement <i>simpler</i> higher order functions like <code>map</code>, <code>filter</code>, etc.? I think it might be worth first implementing these."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1539144919, "post_id": 52726233, "comment_id": 92389997, "body": "Why is this function called <code>mapReader</code>? That&#39;s quite surprising."}], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1539106385, "creation_date": 1539106385, "answer_id": 52726483, "question_id": 52726233, "link": "https://stackoverflow.com/questions/52726233/how-to-implement-this-higher-order-function/52726483#52726483", "title": "How to implement this higher order function", "body": "<p>Start by looking at what you <em>can</em> do with the three arguments.</p>\n\n<ol>\n<li>You can compose <code>f</code> and <code>h</code>: <code>h . f :: a -&gt; r</code>.</li>\n<li>You can apply <code>g</code> to <code>h . f</code>: <code>g (h . f) :: r</code>.</li>\n</ol>\n\n<p>So you could simply say that <code>mapReader f g h = g (h . f)</code>. There's not enough information here to specify what <code>r</code> is; it depends entirely on what \narguments <code>g</code> and <code>h</code> are given to <code>mapReader</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 0, "last_activity_date": 1539107780, "last_edit_date": 1539107780, "creation_date": 1539107272, "answer_id": 52726695, "question_id": 52726233, "link": "https://stackoverflow.com/questions/52726233/how-to-implement-this-higher-order-function/52726695#52726695", "title": "How to implement this higher order function", "body": "<p>So you have</p>\n\n<pre><code>f ::  a -&gt; b\nh ::       b -&gt; r\ng :: (a -&gt;      r) -&gt; r\n</code></pre>\n\n<p>There's also the forward functional composition operator,</p>\n\n<pre><code>(&gt;&gt;&gt;) :: (a -&gt; b) -&gt; (b -&gt; r) -&gt; (a -&gt; r)\n</code></pre>\n\n<p>and the reversed application operator,</p>\n\n<pre><code>(&amp;) :: t -&gt; (t -&gt; r) -&gt; r\n</code></pre>\n\n<p>so that </p>\n\n<pre><code>f &gt;&gt;&gt; h :: ......... -- what?\n</code></pre>\n\n<p>and</p>\n\n<pre><code>(f &gt;&gt;&gt; h) &amp; g :: ......... -- what else?\n</code></pre>\n\n<p>Can you come up with the definitions of <code>(&gt;&gt;&gt;)</code> and <code>(&amp;)</code>, just from their types?</p>\n\n<hr>\n\n<p>Let me get you started on the first one. </p>\n\n<pre><code>(&gt;&gt;&gt;) ::   (a -&gt; b)    -&gt; (b -&gt; r)     -&gt; (a  -&gt; r)\n</code></pre>\n\n<p>means that</p>\n\n<pre><code>(&gt;&gt;&gt;) (f :: a -&gt; b)    :: (b -&gt; r)     -&gt; (a  -&gt; r)\n(&gt;&gt;&gt;) (f :: a -&gt; b) (g ::  b -&gt; r)     :: (a  -&gt; r)\n(&gt;&gt;&gt;) (f :: a -&gt; b) (g ::  b -&gt; r)  (x ::  a) :: r\n</code></pre>\n\n<p>So again we write them down</p>\n\n<pre><code>f :: a -&gt; b\ng ::      b -&gt; r\nx :: a\nf x ::    b\ng (f x) ::    ....\n</code></pre>\n\n<p>And that's that.</p>\n\n<p>The most important rule that we used here, is</p>\n\n<pre><code>x   :: a\nf   :: a -&gt; r\nf x ::      r\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": true, "score": 5, "last_activity_date": 1539377634, "last_edit_date": 1539377634, "creation_date": 1539108318, "answer_id": 52726936, "question_id": 52726233, "link": "https://stackoverflow.com/questions/52726233/how-to-implement-this-higher-order-function/52726936#52726936", "title": "How to implement this higher order function", "body": "<p>We have</p>\n\n<pre><code>f :: a -&gt; b\ng :: (a -&gt; r) -&gt; r\nh :: b -&gt; r\n</code></pre>\n\n<p>and we need</p>\n\n<pre><code>_1 :: r\n</code></pre>\n\n<p>There are two ways we can make <code>r</code>: <code>g</code> and <code>h</code>.</p>\n\n<p>Let's try using <code>h</code>. <code>h</code> takes an argument of type <code>b</code>. The only way to get one of those is using <code>f</code>. <code>f</code> takes an argument of type <code>a</code>, and ... we don't have any way to get one of those.</p>\n\n<p>So now let's try using <code>g</code> instead:</p>\n\n<pre><code>mapReader f g h = g _2\n</code></pre>\n\n<p>We're told</p>\n\n<pre><code>_2 :: a -&gt; r\n</code></pre>\n\n<p>Since we're constructing a function, we can apply lambda abstraction as usual:</p>\n\n<pre><code>mapReader f g h = g (\\a -&gt; _3)\n\na :: a\n_3 :: r\n</code></pre>\n\n<p>But wait ... now we <em>have</em> an <code>a</code>, so we can go back to our first attempt:</p>\n\n<pre><code>mapReader f g h = g (\\a -&gt; h (f a))\n</code></pre>\n\n<p>Or, more compactly,</p>\n\n<pre><code>mapReader f g h = g (h . f)\n</code></pre>\n\n<hr>\n\n<p>What if instead of going back to the first attempt we did it the second way <em>again</em>?</p>\n\n<pre><code>mapReader' f g h =\n  g (\\a1 -&gt; g (\\a2 -&gt; _4))\n\n_4 :: r\n</code></pre>\n\n<p>You could go this way forever, but you could also stop here in two different ways:</p>\n\n<pre><code>mapReader2 f g h =\n  g (\\_ -&gt; g (h . f))\n\nmapReader3 f g h =\n  g (\\a1 -&gt; g (\\_ -&gt; h (f a1)))\n</code></pre>\n\n<p>Oy! These are three <em>different</em> functions that all have the same type, and as shown this approach can be used to generate an infinite family of functions! How can you decide which one you want? You have to consider the intention. <code>g</code>'s argument is the continuation, so you want to compose a function with what you're passing <code>g</code>, not call <code>g</code> multiple times. So <code>mapReader</code> is the \"correct\" answer.</p>\n\n<p>More precisely, <code>mapReader</code> is supposed to map morphisms for the continuation <em>functor</em>. That requires in particular that</p>\n\n<pre><code>mapReader id = id\n</code></pre>\n\n<p>That is,</p>\n\n<pre><code>mapReader id g h = g (h . id)\n  = g h\n</code></pre>\n\n<p>That's unconditionally true for the correct definition, but not for any of the others.</p>\n"}], "owner": {"reputation": 21, "user_id": 10479842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92fc559881483ca9b2180ed18de4a291?s=128&d=identicon&r=PG&f=1", "display_name": "Mr M", "link": "https://stackoverflow.com/users/10479842/mr-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 52726936, "answer_count": 3, "score": -1, "last_activity_date": 1539377634, "creation_date": 1539105437, "last_edit_date": 1539107700, "question_id": 52726233, "link": "https://stackoverflow.com/questions/52726233/how-to-implement-this-higher-order-function", "title": "How to implement this higher order function", "body": "<p>I'm a newbe in functional programming, and I'm trying to solve the following exercise;</p>\n\n<hr>\n\n<p>Given the type</p>\n\n<pre><code>type Cont r a = (a -&gt; r) -&gt; r\n</code></pre>\n\n<p>Implement the following higher-order function</p>\n\n<pre><code>mapReader :: (a -&gt; b) -&gt; (Cont r a) -&gt; Cont r b\n</code></pre>\n\n<hr>\n\n<p>The first step would be to simplify the types, which gives:</p>\n\n<pre><code>mapReader :: (a -&gt; b) -&gt; ((a -&gt; r) -&gt; r) -&gt; (b -&gt; r) -&gt; r\n</code></pre>\n\n<p>Next, define the parameters that need to be provided in this function. These parameters are three functions so we get</p>\n\n<pre><code>mapReader :: (a -&gt; b) -&gt; ((a -&gt; r) -&gt; r) -&gt; (b -&gt; r) -&gt; r\nmapReader f g h = _1\n</code></pre>\n\n<p>From here, we can define the following types:</p>\n\n<pre><code>f :: a -&gt; b\ng :: (a -&gt; r) -&gt; r\nh :: b -&gt; r\n_1 :: r\n</code></pre>\n\n<p>But now I'm stuck. There are two functions that result in r, and one of them contains another function (a -> r). How can I start defining r? Any hints are much appreciated!</p>\n"}, {"tags": ["sorting", "haskell", "foldable"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 7, "creation_date": 1539083029, "post_id": 52719426, "comment_id": 92364215, "body": "Isn&#39;t that just <code>maximumBy . comparing</code>?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1539083094, "post_id": 52719426, "comment_id": 92364256, "body": "@melpomene: yes, although it might be better to first &quot;map&quot; to 2-tuples with the element and its comparator value, to avoid recalculating <code>f xi</code> each time."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 2, "creation_date": 1539099332, "post_id": 52719426, "comment_id": 92374628, "body": "The function doesn&#39;t seem to exist, but its name should be <code>maximumOn</code> (by analogy with the now quite popular <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Data-List.html#v:sortOn\" rel=\"nofollow noreferrer\"><code>sortOn</code></a>). I don&#39;t think <code>sortWith</code> is seriously used, that seems to be more of a forgotten experiment."}], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539123897, "post_id": 52725970, "comment_id": 92385403, "body": "Your implementation of <code>maximumOn</code> does not optimize well, even when fully specialized. I don&#39;t really know why that is. But there&#39;s a version that uses <code>foldl&#39;</code> (or <code>foldr</code>) to maintain explicit state, doesn&#39;t impose a  <code>Functor</code> constraint, and (therefore) doesn&#39;t build an intermediate list."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539126367, "post_id": 52725970, "comment_id": 92385930, "body": "@dfeuer Really? It seems to <a href=\"https://www.godbolt.org/z/LzoXiw\" rel=\"nofollow noreferrer\">come out fine</a>, just a bit weird."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539127068, "post_id": 52725970, "comment_id": 92386075, "body": "That doesn&#39;t even appear to be optimized (and I don&#39;t know how to use that tool). When I looked at the Core from <code>-O2</code>, I saw that <code>map</code> had survived."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539127340, "post_id": 52725970, "comment_id": 92386136, "body": "When I look at the Core under <code>-O2</code>, I see an unoptimized definition of <code>maximumOn</code>, followed by an unholy spray of things like <code>main_$s$wgo1</code> that represent the single, somewhat optimized call to it in <code>main</code>."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539127440, "post_id": 52725970, "comment_id": 92386158, "body": "Try writing a module that only exports <code>maximumOn</code>. That should get you much more meaningful Core."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539127831, "post_id": 52725970, "comment_id": 92386228, "body": "@dfeuer I did that and I got the exact same thing. I put <code>maximumOn</code> in <code>module T where maximumOn = _</code>, put <code>main</code> on its own in <code>module Main where import T; main = _</code>. The Core shows that <code>maximumOn</code>, in its own module, is entirely unoptimized. It also shows me that that doesn&#39;t matter, because in <code>Main</code>, there is no call to <code>maximumOn</code> anyway, as it gets inlined and replaced with a loop."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539128161, "post_id": 52725970, "comment_id": 92386293, "body": "Oh, I see, you haven&#39;t specialized any. Try <code>maximumOn_spec :: (a -&gt; Int) -&gt; [a] -&gt; a; maximumOn_spec f xs = maximumOn f xs</code>. It doesn&#39;t look so great. I think the fact that your executable example uses a literal list may be confusing matters somewhat."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1539128328, "post_id": 52725970, "comment_id": 92386336, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/181578/discussion-between-htnw-and-dfeuer\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 4, "last_activity_date": 1539130240, "last_edit_date": 1539130240, "creation_date": 1539104372, "answer_id": 52725970, "question_id": 52719426, "link": "https://stackoverflow.com/questions/52719426/is-there-such-a-thing-as-maximumwith/52725970#52725970", "title": "Is there such a thing as maximumWith?", "body": "<p>Let me collect all the notes in the comments together...</p>\n\n<p>Let's look at <code>sort</code>. There are 4 functions in the family:</p>\n\n<ul>\n<li><a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/src/Data.OldList.html#sortBy\" rel=\"nofollow noreferrer\"><code>sortBy</code></a> is the actual implementation.</li>\n<li><code><a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/src/Data.OldList.html#sortBy\" rel=\"nofollow noreferrer\">sort</a> = sortBy compare</code> uses <code>Ord</code> overloading.</li>\n<li><code><a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/src/GHC.Exts.html#sortWith\" rel=\"nofollow noreferrer\">sortWith</a> = sortBy . comparing</code> is the analogue of your desired <code>maximumWith</code>. However, this function has an issue. The ranking of an element is given by applying the given mapping function to it. However, the ranking is not memoized, so if an element needs to compared multiple times, the ranking will be recomputed. You can only use it guilt-free if the ranking function is very cheap. Such functions include selectors (e.g. <code>fst</code>), and <code>newtype</code> constructors. YMMV on simple arithmetic and data constructors. Between this inefficiency, the simplicity of the definition, and its location in <code>GHC.Exts</code>, it's easy to deduce that it's not used that often.</li>\n<li><a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/src/Data.OldList.html#sortOn\" rel=\"nofollow noreferrer\"><code>sortOn</code></a> fixes the inefficiency by decorating each element with its image under the ranking function in a pair, sorting by the ranks, and then erasing them.</li>\n</ul>\n\n<p>The first two have analogues in <code>maximum</code>: <code>maximumBy</code> and <code>maximum</code>. <code>sortWith</code> has no analogy; you may as well write out <code>maximumBy (comparing _)</code> every time. There is also no <code>maximumOn</code>, even though such a thing would be more efficient. The easiest way to define a <code>maximumOn</code> is probably just to copy <code>sortOn</code>:</p>\n\n<pre><code>maximumOn :: (Functor f, Foldable f, Ord r) =&gt; (a -&gt; r) -&gt; f a -&gt; a\nmaximumOn rank = snd . maximumBy (comparing fst) . fmap annotate\n  where annotate e = let r = rank e in r `seq` (r, e)\n</code></pre>\n\n<p>There's a bit of interesting code in <code>maximumBy</code> that keeps this from optimizing properly on lists. It also works to use</p>\n\n<pre><code>maximumOn :: (Foldable f, Ord r) =&gt; (a -&gt; r) -&gt; f a -&gt; a\nmaximumOn rank = snd . fromJust . foldl' max' Nothing\n    where max' Nothing x = let r = rank x in r `seq` Just (r, x)\n          max' old@(Just (ro, xo)) xn = let rn = rank xn\n                                         in case ro `compare` rn of\n                                                 LT -&gt; Just (rn, xo)\n                                                 _ -&gt; old\n</code></pre>\n\n<p>These pragmas may be useful:</p>\n\n<pre><code>{-# SPECIALIZE maximumOn :: Ord r =&gt; (a -&gt; r) -&gt; [a] -&gt; a #-}\n{-# SPECIALIZE maximumOn :: (a -&gt; Int) -&gt; [a] -&gt; a #-}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539168596, "post_id": 52728991, "comment_id": 92401522, "body": "Your version is, in my testing, slightly less efficient than this: <a href=\"https://gist.github.com/hr-schueler/fd00ccc06e56f3298b45e37c714f208f\" rel=\"nofollow noreferrer\">gist.github.com/hr-schueler/fd00ccc06e56f3298b45e37c714f208f</a>"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539179044, "post_id": 52728991, "comment_id": 92408076, "body": "@MarkNeu, that&#39;s quite surprising to me, since that version walks each list twice. Did you compile with optimization? Mine will surely be bad if the <code>MS</code> values aren&#39;t unboxed."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539180094, "post_id": 52728991, "comment_id": 92408732, "body": "Also, what GHC version did you use?"}, {"owner": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539250236, "post_id": 52728991, "comment_id": 92436590, "body": "I used GHC 8.2.2"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539797369, "post_id": 52728991, "comment_id": 92635538, "body": "@MarkNeu, could you reveal your tests? And what optimization level did you use?"}, {"owner": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539806672, "post_id": 52728991, "comment_id": 92639896, "body": "It wasn&#39;t a sophisticated test, I just played around a bit. Disregard my information, there is no professional basis for it."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539810815, "post_id": 52728991, "comment_id": 92641762, "body": "@MarkNeu, it&#39;s not about being professional; I&#39;m just curious."}, {"owner": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539851691, "post_id": 52728991, "comment_id": 92653656, "body": "I just used <code>:set +s</code> in GHCi"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 1, "creation_date": 1539875541, "post_id": 52728991, "comment_id": 92667895, "body": "@MarkNeu, that explains it. Unless you use <code>-fobject-code</code> and either <code>-O</code> or <code>-O2</code>, code loaded in GHCi isn&#39;t optimized. Unoptimized, my code is quite bad, because each step allocates a new <code>Int</code> and a new <code>MS</code> value. But optimized, GHC will unbox the <code>Int</code>s into <code>Int#</code>s (kind of like switching from <code>Integer</code> objects in Java to <code>int</code> values). And then it uses something called a worker-wrapper transformation to eliminate the <code>MS</code> values. The whole thing becomes a non-allocating loop, which should be very fast. Your version is a bit better unoptimized, but optimization won&#39;t improve it much."}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 2, "last_activity_date": 1539125398, "last_edit_date": 1539125398, "creation_date": 1539117624, "answer_id": 52728991, "question_id": 52719426, "link": "https://stackoverflow.com/questions/52719426/is-there-such-a-thing-as-maximumwith/52728991#52728991", "title": "Is there such a thing as maximumWith?", "body": "<p>HTNW has explained how to do what you asked, but I figured I should mention that for the specific application you mentioned, there's a way that's more efficient in certain cases (assuming the words are represented by <code>String</code>s). Suppose you want</p>\n\n<pre><code>longest :: [[a]] -&gt; [a]\n</code></pre>\n\n<p>If you ask for <code>maximumOn length [replicate (10^9) (), []]</code>, then you'll end up calculating the length of a very long list unnecessarily. There are several ways to work around this problem, but here's how I'd do it:</p>\n\n<pre><code>data MS a = MS\n  { _longest :: [a]\n  , _longest_suffix :: [a]\n  , _longest_bound :: !Int }\n</code></pre>\n\n<p>We will ensure that <code>longest</code> is the first of the longest strings seen thus far, and that <code>longest_bound + length longest_suffix = length longest</code>.</p>\n\n<pre><code>step :: MS a -&gt; [a] -&gt; MS a\nstep (MS longest longest_suffix longest_bound) xs =\n    go longest_bound longest_suffix xs'\n  where\n    -- the new list is not longer\n    go n suffo [] = MS longest suffo n\n    -- the new list is longer\n    go n [] suffn = MS xs suffn n\n    -- don't know yet\n    go !n (_ : suffo) (_ : suffn) =\n      go (n + 1) suffo suffn\n\n    xs' = drop longest_bound xs\n\nlongest :: [[a]] -&gt; [a]\nlongest = _longest . foldl' step (MS [] [] 0)\n</code></pre>\n\n<p>Now if the second to longest list has <code>q</code> elements, we'll walk at most <code>q</code> conses into each list. This is the best possible complexity. Of course, it's only significantly better than the <code>maximumOn</code> solution when the longest list is much longer than the second to longest.</p>\n"}], "owner": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 52725970, "answer_count": 2, "score": 0, "last_activity_date": 1539130240, "creation_date": 1539082768, "question_id": 52719426, "link": "https://stackoverflow.com/questions/52719426/is-there-such-a-thing-as-maximumwith", "title": "Is there such a thing as maximumWith?", "body": "<p>Specifically I'm searching for a function 'maximumWith',</p>\n\n<pre><code>maximumWith :: (Foldable f, Ord b) =&gt; (a -&gt; b) -&gt; f a -&gt; a\n</code></pre>\n\n<p>Which behaves in the following way:</p>\n\n<pre><code>maximumWith length [[1, 2], [0, 1, 3]] == [0, 1, 3]\nmaximumWith null [[(+), (*)], []] == []\nmaximumWith (const True) x == head x\n</code></pre>\n\n<p>My use case is picking the longest word in a list.<br>\nFor this I'd like something akin to <code>maximumWith length</code>.</p>\n\n<p>I'd thought such a thing existed, since <code>sortWith</code> etc. exist.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1539078006, "post_id": 52717777, "comment_id": 92361151, "body": "It is consistent with <code>take :: Int -&gt; [a] -&gt; [a]</code> which returns a prefix as well, and it is a popular function name among several programming languages (Clojure, Kotlin, C#&#39;s LINQ, etc.)"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539078042, "post_id": 52717777, "comment_id": 92361181, "body": "&quot;filter while&quot; gives the impression that we are going to filter a set, as long as a certain condition holds, so that means additional filtering should be done."}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539078362, "post_id": 52717777, "comment_id": 92361390, "body": "takeWhile does the same, right? If filter the values to the first failure?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1539078458, "post_id": 52717777, "comment_id": 92361450, "body": "the point is that for <code>filterWhile</code> it sounds like you will <i>filter elements as long as a condition holds</i>, so that <i>filtering</i> actually implies an extra predicate. <i>taking</i> things is non-conditional, as long as the condition holds, you take the elements."}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539078597, "post_id": 52717777, "comment_id": 92361532, "body": "Sorry dont understand. Example takeWhile (/=&#39; &#39;) &quot;elephants know how to party&quot;  - this takes &quot;elephants&quot; - filter elems with predicate until fail. filterWhile will do the same. I cannot find the difference. Sorry can you explain me"}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539078819, "post_id": 52717777, "comment_id": 92361672, "body": "How come I dont filter - this is basically filter with stop - the name implies - filterWhile - get the matches until find failure? Maybe am missing something, but for me takeWhile is the same as filterWhile"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539078874, "post_id": 52717777, "comment_id": 92361702, "body": "See it like this, of somebody says &quot;You will filter your email, while the clock is ticking&quot;, that means that you go through your mail, and throw away letters. Whereas if somebody says &quot;you are going to take a break while the clock is ticking&quot;, you do not make additional decisions on the objects."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539078905, "post_id": 52717777, "comment_id": 92361727, "body": "no indeed you do not filter, that is what the problem is with <code>filterWhile</code>, that you do not filter."}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539078977, "post_id": 52717777, "comment_id": 92361766, "body": "i have list [1,2,3,4,5]. takeWhile(&lt;4) will return [1,2,3]. How come this is not filter operation?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539079205, "post_id": 52717777, "comment_id": 92361909, "body": "because filtering traditionally takes no order &quot;into account&quot;. The <code>WHERE</code> filter in SQL has no capabilities to see the previous, next, etc. row, since the rows are just in an <i>ad hoc</i> order. Here you &quot;kick out&quot; elements because some previous element did not satisfy the predicate."}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539079330, "post_id": 52717777, "comment_id": 92361982, "body": "So the difference is that filter can return unordered list but takeWhile will return ordered list?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539079369, "post_id": 52717777, "comment_id": 92362007, "body": "no, we are speaking about the semantics of the word &quot;filtering&quot;. Filter does not take a decision based on <i>previous</i> / <i>next</i> elements. For example a set has no order, but we can filter a set, we can not take the first three elements of a set, or take elements of a set as long as a certain predicate is satisfied, since sets are <i>unordered</i>."}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539080134, "post_id": 52717777, "comment_id": 92362473, "body": "Does takeWhile take decision based on previous / next elements. In this case not?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539080323, "post_id": 52717777, "comment_id": 92362581, "body": "yes since if the previous element failed, then the other elements &quot;virtually&quot; fail as well. Regardless whether these satisfiy / do not satisfy the predicate."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1539082188, "post_id": 52717777, "comment_id": 92363722, "body": "Personally, I would be fine with both names <code>takeWhile</code> and <code>filterWhile</code>. Indeed, <code>takeWhile</code> takes a prefix of the input string like <code>take</code> does, but stops on a condition instead of an index. Also, <code>takeWhile</code> selects some elements satisfying a predicate like <code>filter</code>, but does not take all of them. So, <code>takeWhile</code> has some similarity to both <code>filter</code> and <code>take</code>."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1539082494, "post_id": 52717777, "comment_id": 92363898, "body": "Since this just degenerates into an argument about the expected semantics of the word &quot;filter&quot; (about which I agree with @WillemVanOnsem), I don&#39;t see it being usefully answerable here."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1539082635, "post_id": 52717777, "comment_id": 92363993, "body": "@Useless: me neither, the question is to some extent opinion based, and since it is non-technical (it&#39;s about nomenclature) it is out of scope for StackOverflow. That is why I only commented on the issue."}], "answers": [{"comments": [{"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 1, "creation_date": 1539078089, "post_id": 52717856, "comment_id": 92361203, "body": "Also goes well with <code>take</code> which also produces a <i>prefix</i>."}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1539078152, "post_id": 52717856, "comment_id": 92361248, "body": "Could takeWhile be called filterWhile - why they call it take while instead of filterWhile - filterWhile will filter items to the first fail?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1539098899, "post_id": 52717856, "comment_id": 92374400, "body": "Both <code>while</code> and <code>filter</code> specify some choice to be made about whether to include a particular input element in the output; including both in the name would be redundant, or indicate that there are two types of filtering going on: take items from a list until some condition holds, <i>and</i> filter those items by a <i>second</i> condition..."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1539098902, "post_id": 52717856, "comment_id": 92374403, "body": "... I would expect something like <code>filterWhile c1 c2 = filter c2 . takeWhile c1</code>. As an example, consider a function that returns all prime numbers less than 1000: <code>filterWhile (&lt; 1000) isPrime</code>. The first condition controls when you stop iterating the input; the second selects the output."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1542297907, "post_id": 52717856, "comment_id": 93527306, "body": "yes! &quot;filter&quot;, <i>what</i> &quot;filter&quot;, is it filter-out or filter-through?... I wouldn&#39;t go with &quot;select&quot; though; maybe &quot;keep&quot;: <code>keep even [1..5]</code> makes sense. In Common Lisp they have <a href=\"http://clhs.lisp.se/Body/f_rm_rm.htm\" rel=\"nofollow noreferrer\"><code>remove-if-not</code></a>, which is unambiguous but rather unwieldy. :)"}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1542299712, "post_id": 52717856, "comment_id": 93528444, "body": "@WillNess Smalltalk has <code>#select:</code> and <code>#reject:</code>, which I find to be quite sensible. Every time I see <code>filter odd</code>, I keep expecting it to filter <i>out</i> the odd numbers..."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1542299858, "post_id": 52717856, "comment_id": 93528521, "body": "same here (though I&#39;m not sure which way is it, it always gives me pause). Prolog has <code>select(Element, FromList, Leftovers)</code>, so for me, that name is taken. :) but it is better than &quot;<code>filter</code>&quot; for sure."}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": false, "score": 4, "last_activity_date": 1539077991, "creation_date": 1539077991, "answer_id": 52717856, "question_id": 52717777, "link": "https://stackoverflow.com/questions/52717777/haskell-about-takewhile-question-about-name/52717856#52717856", "title": "Haskell about takeWhile question about name", "body": "<p>The standard <code>filter</code> function finds <em>all</em> the elements that satisfy a predicate.</p>\n\n<p>The <code>takeWhile</code> function finds elements that satisfy a predicate up until the <em>first</em> failure, and then stops looking.</p>\n\n<p><code>takeWhile</code> <em>takes</em> elements until they stop matching, and <code>dropWhile</code> <em>drops</em> elements until they stop matching.</p>\n\n<p>It all makes a kind of sense.</p>\n\n<p>(Except <code>filter</code>, which arguably should be named <code>select</code>, but that's another story...)</p>\n"}, {"tags": [], "owner": {"reputation": 2638, "user_id": 7208029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxbAJ.png?s=128&g=1", "display_name": "Chai T. Rex", "link": "https://stackoverflow.com/users/7208029/chai-t-rex"}, "is_accepted": false, "score": 2, "last_activity_date": 1539082179, "last_edit_date": 1539082179, "creation_date": 1539081561, "answer_id": 52719029, "question_id": 52717777, "link": "https://stackoverflow.com/questions/52717777/haskell-about-takewhile-question-about-name/52719029#52719029", "title": "Haskell about takeWhile question about name", "body": "<p>If you're returning <em>every</em> element up to a certain point, you're not filtering them up to a certain point. There's no filtering going on before that point. Everything is returned. It's better called <code>everythingWhile</code> rather than <code>filterWhile</code>.</p>\n\n<p>As an analogy, turning the faucet off is not the same as filtering the water. On the other hand, you can take the water until something about it changes.</p>\n"}], "owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1539111924, "answer_count": 2, "score": -5, "last_activity_date": 1539093441, "creation_date": 1539077726, "last_edit_date": 1539093441, "question_id": 52717777, "link": "https://stackoverflow.com/questions/52717777/haskell-about-takewhile-question-about-name", "closed_reason": "Opinion-based", "title": "Haskell about takeWhile question about name", "body": "<p>In Haskell there is function <code>takeWhile</code> which gets the items while specific condition is met.</p>\n\n<p>My question is more of a grammar.</p>\n\n<p>Why the function is not called <code>filterWhile</code> but <code>takeWhile</code>.</p>\n\n<p>Is there any arguments or they just took this decision.</p>\n"}, {"tags": ["haskell", "tuples", "dollar-sign"], "comments": [{"owner": {"reputation": 27561, "user_id": 214446, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5deb6b87326686b1f2e9fdb37ceac210?s=128&d=identicon&r=PG", "display_name": "mb21", "link": "https://stackoverflow.com/users/214446/mb21"}, "edited": false, "score": 0, "creation_date": 1539072263, "post_id": 52716056, "comment_id": 92357644, "body": "Have you looked at <code>uncurry :: (a -&gt; b -&gt; c) -&gt; ((a, b) -&gt; c)</code>"}, {"owner": {"reputation": 431, "user_id": 3360918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cc9097de8b89e2e470ce4c85f46756?s=128&d=identicon&r=PG&f=1", "display_name": "Shumush", "link": "https://stackoverflow.com/users/3360918/shumush"}, "reply_to_user": {"reputation": 27561, "user_id": 214446, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5deb6b87326686b1f2e9fdb37ceac210?s=128&d=identicon&r=PG", "display_name": "mb21", "link": "https://stackoverflow.com/users/214446/mb21"}, "edited": false, "score": 0, "creation_date": 1539072641, "post_id": 52716056, "comment_id": 92357817, "body": "Oh, this would be nice, but how do you apply <code>uncurry</code> to every functions in the tuple ? Composing <code>uncurry</code> N times is not really a solution, as we still need to copy the same code for each function."}, {"owner": {"reputation": 27561, "user_id": 214446, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5deb6b87326686b1f2e9fdb37ceac210?s=128&d=identicon&r=PG", "display_name": "mb21", "link": "https://stackoverflow.com/users/214446/mb21"}, "edited": false, "score": 0, "creation_date": 1539073996, "post_id": 52716056, "comment_id": 92358616, "body": "I&#39;m not familiar with Xlib, so maybe somebody else can comment what&#39;s the canonical way to work with it. But your <code>dsp</code> function would work just fine as a normal helper function somewhere (like <code>curry</code> and <code>uncurry</code>) \u2013 you don&#39;t need a typeclass for that. Maybe see <a href=\"http://learnyouahaskell.com/higher-order-functions#curried-functions\" rel=\"nofollow noreferrer\">learnyouahaskell.com/higher-order-functions#curried-function&zwnj;&#8203;s</a>"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1539075562, "post_id": 52716056, "comment_id": 92359620, "body": "I like that class you propose, though I find it surprising that you would make the fundep <code>x y -&gt; f</code> instead of <code>f x -&gt; y</code>, or even <code>f -&gt; x, f -&gt; y</code>."}, {"owner": {"reputation": 431, "user_id": 3360918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cc9097de8b89e2e470ce4c85f46756?s=128&d=identicon&r=PG&f=1", "display_name": "Shumush", "link": "https://stackoverflow.com/users/3360918/shumush"}, "reply_to_user": {"reputation": 27561, "user_id": 214446, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5deb6b87326686b1f2e9fdb37ceac210?s=128&d=identicon&r=PG", "display_name": "mb21", "link": "https://stackoverflow.com/users/214446/mb21"}, "edited": false, "score": 0, "creation_date": 1539244064, "post_id": 52716056, "comment_id": 92433001, "body": "@mb21 What you propose would make me create as many <code>dspX</code> functions as there are tuple sizes ^^ @leftaroundabout I am totaly new to fundep, and I don&#39;t really know how to decide which fundep to use."}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 3360918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cc9097de8b89e2e470ce4c85f46756?s=128&d=identicon&r=PG&f=1", "display_name": "Shumush", "link": "https://stackoverflow.com/users/3360918/shumush"}, "edited": false, "score": 0, "creation_date": 1539244836, "post_id": 52721166, "comment_id": 92433396, "body": "This is so much more powerful than my typeclass ! And teached me how to use \u0300type` in classes. Thank you. So short answer : no way to do it dynamically, we will always have to either define N functions for N-uple, or create a typeclass and instantiate it N times."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 431, "user_id": 3360918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cc9097de8b89e2e470ce4c85f46756?s=128&d=identicon&r=PG&f=1", "display_name": "Shumush", "link": "https://stackoverflow.com/users/3360918/shumush"}, "edited": false, "score": 0, "creation_date": 1539249002, "post_id": 52721166, "comment_id": 92435765, "body": "@Shumush yeah, but since you can nest tuples (my class handles those fine) you don&#39;t really need <i>N</i> times, you basically just need pair and perhaps add triples and quadruples for convenience and a bit better performance, and build up anything bigger from those."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 2, "last_activity_date": 1539088346, "creation_date": 1539088346, "answer_id": 52721166, "question_id": 52716056, "link": "https://stackoverflow.com/questions/52716056/how-to-overload-dollar-operator-in-haskell/52721166#52721166", "title": "How to &quot;overload&quot; dollar operator in Haskell", "body": "<p>Not really an answer, but here's how you could extend this idea to a true \u201coverloading of the <code>$</code> operator\u201d:</p>\n\n<pre><code>{-# LANGUAGE TypeFamilies, FlexibleInstances #-}\n\nimport Prelude hiding (($))\n\ninfixr 0 $\n\nclass Dispatch f where\n  type Argument f :: *\n  type Result f :: *\n  ($) :: f -&gt; Argument f -&gt; Result f\n\ninstance Dispatch (a -&gt; b) where\n  type Argument (a-&gt;b) = a\n  type Result (a-&gt;b) = b\n  f $ x = f x\n\ninstance (Dispatch x, Dispatch y, Argument x ~ Argument y)\n            =&gt; Dispatch (x,y) where\n  type Argument (x,y) = Argument x\n  type Result (x,y) = (Result x, Result y)\n  (f,g) $ a = (f $ a, g $ a)\n\ninstance ( Dispatch x, Dispatch y, Dispatch z\n         , Argument x ~ Argument y, Argument y ~ Argument z )\n            =&gt; Dispatch (x,y,z) where\n  type Argument (x,y,z) = Argument x\n  type Result (x,y,z) = (Result x, Result y, Result z)\n  (f,g,h) $ a = (f $ a, g $ a, h $ a)\n\nmain :: IO ()\nmain = do\n   print $ ((\\x -&gt; ((2*x+),(3*x+)), (**), logBase) $ 2) $ 4\n</code></pre>\n\n<pre>((8.0,10.0),16.0,2.0)</pre>\n"}, {"comments": [{"owner": {"reputation": 431, "user_id": 3360918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cc9097de8b89e2e470ce4c85f46756?s=128&d=identicon&r=PG&f=1", "display_name": "Shumush", "link": "https://stackoverflow.com/users/3360918/shumush"}, "edited": false, "score": 0, "creation_date": 1539244444, "post_id": 52748052, "comment_id": 92433190, "body": "So we would need as many <code>liftA3</code> as there are parameters ? And there is no other way to change the number of functions in the tuple without another functino like <code>liftA4</code> ... <code>liftAN</code>"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 431, "user_id": 3360918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cc9097de8b89e2e470ce4c85f46756?s=128&d=identicon&r=PG&f=1", "display_name": "Shumush", "link": "https://stackoverflow.com/users/3360918/shumush"}, "edited": false, "score": 0, "creation_date": 1539253989, "post_id": 52748052, "comment_id": 92438949, "body": "@Shumush If you take a look at how the <code>liftA</code> family is defined you will see that of course there is another way. =)"}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 1, "last_activity_date": 1539202232, "creation_date": 1539202232, "answer_id": 52748052, "question_id": 52716056, "link": "https://stackoverflow.com/questions/52716056/how-to-overload-dollar-operator-in-haskell/52748052#52748052", "title": "How to &quot;overload&quot; dollar operator in Haskell", "body": "<p>You may apply many functions to a single argument with the <code>liftA</code> family of functions. Nest them to apply many functions to many arguments. So:</p>\n\n<pre><code>(b, w, m) = liftA3 (liftA3 (,,)) blackPixel whitePixel defaultColormap display dScreen\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 3360918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cc9097de8b89e2e470ce4c85f46756?s=128&d=identicon&r=PG&f=1", "display_name": "Shumush", "link": "https://stackoverflow.com/users/3360918/shumush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 1, "accepted_answer_id": 52721166, "answer_count": 2, "score": 4, "last_activity_date": 1539202232, "creation_date": 1539072044, "last_edit_date": 1539073101, "question_id": 52716056, "link": "https://stackoverflow.com/questions/52716056/how-to-overload-dollar-operator-in-haskell", "title": "How to &quot;overload&quot; dollar operator in Haskell", "body": "<p>First of all, sorry if this question was already asked, I simply couldn't find the proper english terms to express what I meant.</p>\n\n<p>I was wondering if there was any Type Class in Haskell representing function application in order to define multiple behavior for different data types.</p>\n\n<p>Using the <code>Graphics.X11.Xlib</code> package, I came across lots of different functions asking for the exact same parameters. So my idea was to pack these functions into a tuple (because their return type is not the same), and feed them all at once the parameters. Like so:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>import Graphics.X11.Xlib\n\nmain = do\n  display &lt;- openDisplay \":0\"\n  let dScreen = defaultScreen display\n      (black, white, cMap) =\n      -- here is where the \"parameter dispatch\" is needed\n      (blackPixel, whitePixel, defaultColormap)  display dScreen\n\n  -- computation\n  return ()\n</code></pre>\n\n<p>I didn't find anything, so I decided to create this kind of Type Class:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>{-# LANGUAGE MultiParamTypeClasses, FlexibleInstances, FunctionalDependencies #-}\nimport Graphics.X11.Xlib\n\nclass Dispatch f x y | x y -&gt; f where\n  dsp :: f -&gt; x -&gt; y\ninstance Dispatch (a -&gt; b, a -&gt; c, a -&gt; d) a (b, c, d) where\n  dsp (f, g, h) x = (f x, g x, h x)\n\nmain = do\n  display &lt;- openDisplay \":0\"\n  let dScreen = defaultScreen display\n      (black, white, cMap) =\n      -- here is where the \"parameter dispatch\" is needed\n      (blackPixel, whitePixel, defaultColormap) `dsp` display `dsp` dScreen\n\n  -- computation\n  return ()\n</code></pre>\n\n<p>It works fine, and by multiplying instances for different tuple sizes, one can simply add or remove functions from the \"function tuple\" depending on the needed values, and the code will still compile.</p>\n\n<p>But is there any way to do it without this workaround ?\nI tried using <code>Control.Applicative</code> or <code>Control.Arrow</code> but multiple parameter functions don't end up well.</p>\n\n<p>My best attempt so far is: <code>(,) &lt;$&gt; blackPixel &lt;*&gt; whitePixel</code></p>\n"}, {"tags": ["haskell", "type-conversion"], "comments": [{"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1539062689, "post_id": 52713533, "comment_id": 92353229, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/43403525/polymorphic-functions-as-parameters-in-haskell\">Polymorphic functions as parameters in Haskell</a>"}], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1539088952, "post_id": 52714053, "comment_id": 92367764, "body": "FTR, most Haskellers wouldn&#39;t understand \u201cstandard Haskell\u201d so much as plain Haskell2010 but as \u201cGHC 7.10~~8.2\u201d. GADTs are a long-established part of this. However, I don&#39;t think they would really address the problem better than a Haskell98 solution."}, {"owner": {"reputation": 371, "user_id": 5589037, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8e0afcaf170b7c13a53093cf2f5f84c?s=128&d=identicon&r=PG&f=1", "display_name": "John Walker", "link": "https://stackoverflow.com/users/5589037/john-walker"}, "edited": false, "score": 0, "creation_date": 1539209945, "post_id": 52714053, "comment_id": 92423439, "body": "Solution based on the <code>RankNTypes</code> suggestion in this answer below"}], "tags": [], "owner": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "is_accepted": true, "score": 3, "last_activity_date": 1539063767, "creation_date": 1539063767, "answer_id": 52714053, "question_id": 52713533, "link": "https://stackoverflow.com/questions/52713533/is-there-a-way-to-dry-out-the-application-of-a-polymorphic-funtion-to-number-of/52714053#52714053", "title": "Is there a way to DRY out the application of a polymorphic funtion to number of objects with different parameter types in Haskell?", "body": "<p>Not possible in standard Haskell, but there are several extensions that would let you do this, including GADTs and RankNTypes.</p>\n\n<p>A workaround that might work in your simplified example but perhaps not in your real code is to just erase the dummy type parameters:</p>\n\n<pre><code>erase :: SomeData a b -&gt; SomeData () ()\nerase (SomeData x) = SomeData x\n\nmainShared :: (SomeData () () -&gt; IO ()) -&gt; IO ()\nmainShared worker = mergeThem $ map worker [\n                       erase EGChild.myData,\n                       erase EGChild1.myData\n                     ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 5589037, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8e0afcaf170b7c13a53093cf2f5f84c?s=128&d=identicon&r=PG&f=1", "display_name": "John Walker", "link": "https://stackoverflow.com/users/5589037/john-walker"}, "is_accepted": false, "score": 0, "last_activity_date": 1539208537, "last_edit_date": 1539208537, "creation_date": 1539208046, "answer_id": 52749241, "question_id": 52713533, "link": "https://stackoverflow.com/questions/52713533/is-there-a-way-to-dry-out-the-application-of-a-polymorphic-funtion-to-number-of/52749241#52749241", "title": "Is there a way to DRY out the application of a polymorphic funtion to number of objects with different parameter types in Haskell?", "body": "<p>Using RankNTypes as suggested by Jonas Dureg\u00e5rd worked:</p>\n\n<pre><code>{-# LANGUAGE RankNTypes #-}\n\nworker1 :: forall a b. SomeData a b -&gt; IO ()\nworker1 _ = putStrLn \"Hello from Worker 1\"\n\nworker2 :: forall a b. SomeData a b -&gt; IO ()\nworker2 _ = putStrLn \"Hello from Worker 2\"\n\nmergeThem :: [IO ()] -&gt; IO ()\nmergeThem = foldl (&gt;&gt;) (pure ())\n\nmainShared :: (forall a b. SomeData a b -&gt; IO ()) -&gt; IO ()\nmainShared worker = mergeThem [\n                    worker EGChild.myData,\n                    worker EGChild1.myData\n                    ]\n\ndemo1 = mainShared worker1\n-- &gt; Hello from Worker 1\n-- &gt; Hello from Worker 1\n\ndemo2 = mainShared worker2\n-- &gt; Hello from Worker 2\n-- &gt; Hello from Worker 2\n</code></pre>\n\n<p>I found this reference on RankNTypes useful <a href=\"https://ocharles.org.uk/blog/guest-posts/2014-12-18-rank-n-types.html\" rel=\"nofollow noreferrer\">https://ocharles.org.uk/blog/guest-posts/2014-12-18-rank-n-types.html</a>.</p>\n"}], "owner": {"reputation": 371, "user_id": 5589037, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8e0afcaf170b7c13a53093cf2f5f84c?s=128&d=identicon&r=PG&f=1", "display_name": "John Walker", "link": "https://stackoverflow.com/users/5589037/john-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 52714053, "answer_count": 2, "score": 3, "last_activity_date": 1539208537, "creation_date": 1539060298, "last_edit_date": 1539161466, "question_id": 52713533, "link": "https://stackoverflow.com/questions/52713533/is-there-a-way-to-dry-out-the-application-of-a-polymorphic-funtion-to-number-of", "title": "Is there a way to DRY out the application of a polymorphic funtion to number of objects with different parameter types in Haskell?", "body": "<p>This is a simplified version of the problem I am facing (so functionally it makes no sense but this is a type problem). </p>\n\n<pre><code>module EGBase where\nimport           Prelude\n\nnewtype SomeData a b = SomeData String\n</code></pre>\n\n<hr>\n\n<pre><code>module EGChild where\nimport           EGBase\nimport           Prelude\n\nmyData :: SomeData Int Int\nmyData = SomeData \"Child\"\n</code></pre>\n\n<hr>\n\n<pre><code>module EGChild1 where\nimport           EGBase\nimport           Prelude\n\nmyData :: SomeData Int String\nmyData = SomeData \"Child 1\"\n</code></pre>\n\n<hr>\n\n<pre><code>module EGMain where\nimport           EGBase\nimport           EGChild\nimport           EGChild1\nimport           Prelude\n\nworker1 :: SomeData a b -&gt; IO ()\nworker1 _ = putStrLn \"Hello from Worker 1\"\n\nworker2 :: SomeData a b -&gt; IO ()\nworker2 _ = putStrLn \"Hello from Worker 2\"\n\nmergeThem :: [IO ()] -&gt; IO ()\nmergeThem = foldl (&gt;&gt;) (pure ())\n\nmain1 :: IO ()\nmain1 = mergeThem [\n                worker1 EGChild.myData,\n                worker1 EGChild1.myData\n              ]\n\nmain2 :: IO ()\nmain2 = mergeThem [\n                worker2 EGChild.myData,\n                worker2 EGChild1.myData\n              ]\n</code></pre>\n\n<p>The above compiles but in the actual application I will potentially have a lot of different workers I want to apply to a list of many modules (creating many versions of the application). I would like to abstact out rather than hard code the worker function.</p>\n\n<p>As a first step I tried just pulling a hard coded worker out of the list but this didn't work because the list items were not the same type:</p>\n\n<pre><code>-- different types in list [SomeData Int Int, SomeData Int String]\nmain2Dry :: IO ()\nmain2Dry = mergeThem $ worker2 &lt;$&gt; [\n                         EGChild.myData,\n                         EGChild1.myData\n                        ]\n</code></pre>\n\n<p>What I would really like is something like this but this would not work for the same reason as above:</p>\n\n<pre><code>mainShared :: (SomeData a b -&gt; IO ()) -&gt; IO ()\nmainShared worker = mergeThem $ worker &lt;$&gt; [\n                     EGChild.myData,\n                     EGChild1.myData\n                   ]\n</code></pre>\n\n<p>The following would be fine too but I guess the problem here is the concrete type of the worker function is inferred from the first element in the list meaning there are issues when the worker is applied to the second element:</p>\n\n<pre><code>mainShared :: (SomeData a b -&gt; IO ()) -&gt; IO ()\nmainShared worker = mergeThem [\n                       worker EGChild.myData,\n                       worker EGChild1.myData\n                     ]\n--\n-- does not compile\n--\n-- src\\EGMain.hs:50:28-42: error:\n--     * Couldn't match type `b' with `String'\n--       `b' is a rigid type variable bound by\n--         the type signature for:\n--           mainShared :: forall a b. (SomeData a b -&gt; IO ()) -&gt; IO ()\n--         at src\\EGMain.hs:47:1-46\n--       Expected type: SomeData a b\n--         Actual type: SomeData Int String\n--     * In the first argument of `worker', namely `EGChild1.myData'\n--       In the expression: worker EGChild1.myData\n--       In the first argument of `mergeThem', namely\n--         `[worker EGChild.myData, worker EGChild1.myData]'\n</code></pre>\n\n<p>So is what I am trying to achieve possible in Haskell?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 2638, "user_id": 7208029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxbAJ.png?s=128&g=1", "display_name": "Chai T. Rex", "link": "https://stackoverflow.com/users/7208029/chai-t-rex"}, "edited": false, "score": 0, "creation_date": 1539054934, "post_id": 52712736, "comment_id": 92351377, "body": "I think that if <code>acc</code> is <code>[]</code>, it won&#39;t match the pattern <code>(a:b)</code>, so maybe the pattern missing is <code>step x []</code>."}, {"owner": {"reputation": 1141, "user_id": 1367497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1ab83696683e53a9940cd2a8c480894?s=128&d=identicon&r=PG", "display_name": "peeyush singh", "link": "https://stackoverflow.com/users/1367497/peeyush-singh"}, "reply_to_user": {"reputation": 2638, "user_id": 7208029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxbAJ.png?s=128&g=1", "display_name": "Chai T. Rex", "link": "https://stackoverflow.com/users/7208029/chai-t-rex"}, "edited": false, "score": 0, "creation_date": 1539055206, "post_id": 52712736, "comment_id": 92351435, "body": "<code>acc == []</code> is covered by <code>null acc</code>"}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 2, "creation_date": 1539055496, "post_id": 52712736, "comment_id": 92351518, "body": "@peeyushsingh But that check is only performed after the <code>acc@(a:b)</code> pattern is matched, so it doesn&#39;t help."}, {"owner": {"reputation": 1141, "user_id": 1367497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1ab83696683e53a9940cd2a8c480894?s=128&d=identicon&r=PG", "display_name": "peeyush singh", "link": "https://stackoverflow.com/users/1367497/peeyush-singh"}, "edited": false, "score": 0, "creation_date": 1539057256, "post_id": 52712736, "comment_id": 92351895, "body": "a bit too trigger happy these days....not sure why the question was down voted..."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1539082303, "post_id": 52712736, "comment_id": 92363784, "body": "A small suggestion: turning warnings on should report, at compile time, that <code>step</code> does not handle the empty list <code>[]</code>. Recommended."}, {"owner": {"reputation": 1141, "user_id": 1367497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1ab83696683e53a9940cd2a8c480894?s=128&d=identicon&r=PG", "display_name": "peeyush singh", "link": "https://stackoverflow.com/users/1367497/peeyush-singh"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1539084135, "post_id": 52712736, "comment_id": 92364854, "body": "@chi thanks, will try it later at the other machine, right now am compiling using the repl online editor so not sure if the option is available there."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1539086094, "post_id": 52712736, "comment_id": 92366017, "body": "You can add at the very top of your <code>.hs</code> file the line <code>{-# OPTIONS -Wall #-}</code> to enable warnings. Otherwise, in GHCi you can use the command <code>:set -Wall</code>, but you have to do that every time you open ghci."}], "answers": [{"comments": [{"owner": {"reputation": 1141, "user_id": 1367497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1ab83696683e53a9940cd2a8c480894?s=128&d=identicon&r=PG", "display_name": "peeyush singh", "link": "https://stackoverflow.com/users/1367497/peeyush-singh"}, "edited": false, "score": 0, "creation_date": 1539055966, "post_id": 52712913, "comment_id": 92351624, "body": "Understood, but if I check for <code>null acc</code> seperately  by including <code>step x null = [[x]]</code> before the rest of definition <code>step x acc@(a:b)....</code> then I get an overmatch exception. Can you show me how to re-write it?"}, {"owner": {"reputation": 1141, "user_id": 1367497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1ab83696683e53a9940cd2a8c480894?s=128&d=identicon&r=PG", "display_name": "peeyush singh", "link": "https://stackoverflow.com/users/1367497/peeyush-singh"}, "edited": false, "score": 0, "creation_date": 1539057026, "post_id": 52712913, "comment_id": 92351827, "body": "Thanks, that worked, had tried <code>step x null</code> (which is obviously wrong) earlier..."}], "tags": [], "owner": {"reputation": 3706, "user_id": 2018455, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e75a41fc224930ef1fa9ddcc9c714174?s=128&d=identicon&r=PG", "display_name": "Neil Locketz", "link": "https://stackoverflow.com/users/2018455/neil-locketz"}, "is_accepted": true, "score": 8, "last_activity_date": 1539056721, "last_edit_date": 1539056721, "creation_date": 1539055548, "answer_id": 52712913, "question_id": 52712736, "link": "https://stackoverflow.com/questions/52712736/non-exhaustive-pattern-while-using-as-pattern/52712913#52712913", "title": "Non exhaustive pattern while using as-pattern", "body": "<p><code>acc@(a:b)</code> will only ever match a non empty list. The <code>@</code> just gives an alias for the value, but the pattern still needs to match.</p>\n\n<p>its as if you have a function like this (albeit in a smarter way):</p>\n\n<pre><code>step x (a:b) = \n  let acc = (a:b) in\n  ....\n</code></pre>\n\n<p>You can clearly see here that <code>step</code> doesn't ever match if you call <code>step x []</code></p>\n\n<p>Responding to the comment:</p>\n\n<pre><code>step x null = [[x]]\n</code></pre>\n\n<p>Gives a redundant match because <code>null</code> is a function that checks for the empty list. It is not a data constructor so using the name in the pattern match just is a \"wildcard\" (it always matches).\nYou want to match the empty data constructor <code>[]</code>.</p>\n\n<p>try:</p>\n\n<pre><code>step x [] = [[x]]\nstep x acc@(a:b)\n  | null b = [[x]]\n  | p x (head a) = (x:a):b\n  | otherwise = [x]:acc\n</code></pre>\n"}], "owner": {"reputation": 1141, "user_id": 1367497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1ab83696683e53a9940cd2a8c480894?s=128&d=identicon&r=PG", "display_name": "peeyush singh", "link": "https://stackoverflow.com/users/1367497/peeyush-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 52712913, "answer_count": 1, "score": 2, "last_activity_date": 1539056721, "creation_date": 1539054114, "last_edit_date": 1539055513, "question_id": 52712736, "link": "https://stackoverflow.com/questions/52712736/non-exhaustive-pattern-while-using-as-pattern", "title": "Non exhaustive pattern while using as-pattern", "body": "<p>I am trying to implement my own groupBy function (similar to the Prelude's one) using foldr.</p>\n\n<p>The following definition seems to work:</p>\n\n<pre><code>myGroupBy p xs = foldr step [] xs\n                  where step x acc\n                          | null acc = [[x]]\n                          | p x (head (head acc)) = (x:head acc):(tail acc)\n                          | otherwise = [x]:acc\n</code></pre>\n\n<p>Since I was using <code>head acc/tail acc</code> in this multiple times, though I can improve it by using an as-pattern. So I changed this to:</p>\n\n<pre><code>myGroupByNew p xs = foldr step [] xs\n                  where step x acc@(a:b)\n                          | null acc = [[x]]\n                          | null b = [[x]]\n                          | p x (head a) = (x:a):b\n                          | otherwise = [x]:acc\n</code></pre>\n\n<p>However, this method now gives me a non-exhaustive pattern error. I cannot understand, I have checked for <code>null acc</code> and <code>null b</code>, so assuming <code>a</code> cannot be null. As for x, have not put any guard clause for it in the previous method too.</p>\n\n<p>I am a bit lost what is the pattern that I am missing.</p>\n"}, {"tags": ["list", "haskell", "slice"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1539039511, "post_id": 52711108, "comment_id": 92348353, "body": "What is not working with your approach?"}, {"owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539039780, "post_id": 52711108, "comment_id": 92348430, "body": "I tried using conditionals in list comprehensions but I can&#39;t seem to find the correct way to do it for ranges."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1539042268, "post_id": 52711156, "comment_id": 92348982, "body": "How do I add conditionals such that both indices cannot be negative and that the first index cannot be greater than the second and show the error message. I am just starting out in functional programming and the syntax is really confusing."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1539067867, "post_id": 52711156, "comment_id": 92355304, "body": "@RyanThompson: well the question is what you should do in that case, frequently in Haskell if the function is &quot;non-total&quot;, one makes it total by rewriting the return type to <code>Maybe [a]</code>, or <code>Either String [a]</code> to specify that the computation can &quot;fail&quot;."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 6, "last_activity_date": 1539067951, "last_edit_date": 1539067951, "creation_date": 1539039821, "answer_id": 52711156, "question_id": 52711108, "link": "https://stackoverflow.com/questions/52711108/how-display-list-given-range-in-haskell/52711156#52711156", "title": "How display list given range in haskell", "body": "<p>We can use a combination of <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:drop\" rel=\"nofollow noreferrer\"><strong><code>drop :: Int -&gt; [a] -&gt; [a]</code></strong></a> and <a href=\"https://www.haskell.org/hoogle/?hoogle=take\" rel=\"nofollow noreferrer\"><strong><code>take :: Int -&gt; [a] -&gt; [a]</code></strong></a> for this:</p>\n\n<p>For a range <code>i</code> to <code>j</code>, we first <em>drop</em> <code>i</code> elements, and then <em>take</em> <code>j-i+1</code> elements (since both indices are <em>inclusive</em>, we thus need to add one).</p>\n\n<p>For example:</p>\n\n<pre><code>dispRange :: [a] -&gt; Int -&gt; Int -&gt; [a]\ndispRange l i j = take (j-i+1) (drop i l)\n</code></pre>\n\n<p>We can guard against negative numbers and <code>j</code> being less than <code>i</code> with:</p>\n\n<pre><code>dispRange :: [a] -&gt; Int -&gt; Int -&gt; Maybe [a]\ndispRange l i j | i &lt; 0 || j &lt; i = Nothing\n                | otherwise = Just (take (j-i+1) (drop i l))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1539042491, "post_id": 52711397, "comment_id": 92349020, "body": "How do I chop off the first x elements without using in-built functions?"}, {"owner": {"reputation": 2638, "user_id": 7208029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxbAJ.png?s=128&g=1", "display_name": "Chai T. Rex", "link": "https://stackoverflow.com/users/7208029/chai-t-rex"}, "reply_to_user": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 1, "creation_date": 1539045061, "post_id": 52711397, "comment_id": 92349536, "body": "@RyanThompson You can use pattern matching, like this: <code>chop n (x:xs) = \u2026</code> (where <code>(x:xs)</code> is short for <code>x</code> is the first element of the list and <code>xs</code> are the rest of the elements of the list) for the recursive case and then only pass <code>xs</code> back to the function recursively, leaving <code>x</code> out of it. That chops off the first element of the list."}, {"owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1539211195, "post_id": 52711397, "comment_id": 92423801, "body": "I wanted to combine these two functions, chopF, which displays the new list starting from the the &#39;Front index&#39;, chopF n (x:xs)       | n == 0 = x:xs       | otherwise = chopF (n-1) xs."}, {"owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "edited": false, "score": 0, "creation_date": 1539211342, "post_id": 52711397, "comment_id": 92423834, "body": "and chopB, trimming from the &#39;Back&#39; index. chopB nl n (x:xs)       | n == 0 = x:nl          | otherwise = chopB nl (n-1) xs. However I&#39;m having a problem concatenating to the new list. any help?"}], "tags": [], "owner": {"reputation": 2638, "user_id": 7208029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxbAJ.png?s=128&g=1", "display_name": "Chai T. Rex", "link": "https://stackoverflow.com/users/7208029/chai-t-rex"}, "is_accepted": false, "score": 1, "last_activity_date": 1539041692, "creation_date": 1539041692, "answer_id": 52711397, "question_id": 52711108, "link": "https://stackoverflow.com/questions/52711108/how-display-list-given-range-in-haskell/52711397#52711397", "title": "How display list given range in haskell", "body": "<p>If you want to do it in a way that doesn't use built-in functions (for beginner's learning), you can break it into two stages:</p>\n\n<ol>\n<li>Chop off the first <em>x</em> elements, recursively calling your function and changing the arguments as appropriate.</li>\n<li>Return the next <em>y</em> elements, recursively calling your function and changing the arguments as appropriate.</li>\n</ol>\n\n<p>Your code will look like this:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>dispRange :: \u2026\ndispRange \u2026 \u2026 \u2026 = []\ndispRange \u2026 \u2026 \u2026 = dispRange \u2026 \u2026 \u2026\n\u22ee  \u22ee  \u22ee  \u22ee  \u22ee  \u22ee  \u22ee  \u22ee  \u22ee  \u22ee\ndispRange \u2026 \u2026 \u2026 = dispRange \u2026 \u2026 \u2026\n</code></pre>\n\n<p>So, the questions are:</p>\n\n<ul>\n<li>What are the types of the arguments and the value returned?</li>\n<li>What do the inputs of the base and recursive cases look like for stage one above?</li>\n<li>What do the inputs of the base and recursive cases look like for stage two above?</li>\n</ul>\n\n<p>Now, you can write the type signature and the patterns on the left of the equal signs (remember that patterns above take priority over patterns below, so order them properly). Then, you can write the implementation of each case on the right of the equal sign.</p>\n\n<hr>\n\n<p>If you have trouble, another way is to try making a function that does just stage one. Then, try making a function that does just stage two. Then, use those functions in your <code>dispRange</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 893, "user_id": 6248287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPegr.jpg?s=128&g=1", "display_name": "\u019b\u019b\u019b", "link": "https://stackoverflow.com/users/6248287/%c6%9b%c6%9b%c6%9b"}, "is_accepted": false, "score": 2, "last_activity_date": 1539042802, "creation_date": 1539042802, "answer_id": 52711521, "question_id": 52711108, "link": "https://stackoverflow.com/questions/52711108/how-display-list-given-range-in-haskell/52711521#52711521", "title": "How display list given range in haskell", "body": "<p><code>dispRange</code> consumes a list: <code>l</code>, the start:<code>x</code> and the end:<code>y</code> of a range inclusively. It returns the elements within that range if the range is not negative.</p>\n\n<pre><code>import Data.List ((\\\\))\n\ndispRange :: Eq a =&gt; [a] -&gt; Int -&gt; Int -&gt; [a]\ndispRange l x y  \n  | x &lt;= y = (\\\\) &lt;$&gt; take (y + 1) &lt;*&gt; take x $ l\n  | otherwise = []\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1287, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1539067951, "creation_date": 1539039465, "last_edit_date": 1539040106, "question_id": 52711108, "link": "https://stackoverflow.com/questions/52711108/how-display-list-given-range-in-haskell", "title": "How display list given range in haskell", "body": "<p>How do I write a function that displays a given range in a list in Haskell? Say that I have the function:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>dispRange l x y\n</code></pre>\n\n<p>that when given values:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>dispRange [1,2,4,5,6,7] 0 3 \n</code></pre>\n\n<p>displays all the elements from position 0 to 3, thus the list returned would be:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>[1,2,4,5]\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 1, "last_activity_date": 1539030803, "creation_date": 1539030803, "answer_id": 52709717, "question_id": 52709074, "link": "https://stackoverflow.com/questions/52709074/how-to-make-a-container-of-heterogeneous-type-of-the-same-parameterized-type/52709717#52709717", "title": "How to make a container of heterogeneous type of the same parameterized type?", "body": "<p>(This is more like a comment than an answer, but I need more space.)</p>\n\n<p>Such container seems impossible to achieve as stated, but perhaps you are OK with something similar.</p>\n\n<p><strong>Problem 1</strong>:\nsuppose we have an heterogeneous container <code>c</code> containing a mixture of <code>Variable Int</code> and <code>Variable String</code>. Then, consider any <code>f :: Int -&gt; Int</code> (say <code>f = succ</code>).</p>\n\n<p>What would <code>fmap f c</code> be? We can't apply <code>f</code> to all the variables. Would <code>f</code> be applied only to <code>Int</code> ones? This would require some runtime type checking, i.e. we need to add <code>Typeable</code> constraints here and there, but <code>Functor</code> does not allow to add such constraint on <code>fmap</code>.</p>\n\n<p><strong>Problem 2</strong>:</p>\n\n<p>To use <code>fmap f c</code> the argument <code>c</code> must have type <code>Container T</code> for some type <code>T</code>. What should the index <code>T</code> be?</p>\n\n<p>Maybe there is no index at all. Maybe the index is a type-level list of the types inside the heterogeneous container. E.g. <code>Container '[Int,Int,String,Int]</code>.</p>\n\n<p>In any case, <code>Functor</code> can not work with this.</p>\n\n<p>Perhaps what you want, instead, is a custom function like</p>\n\n<pre><code>notFmap :: (Typeable a, Typeable b) =&gt; (a -&gt; b) -&gt; Container -&gt; Container\n</code></pre>\n\n<p>or</p>\n\n<pre><code>notFmap :: (a -&gt; b) -&gt; Container t -&gt; Container (Replace a b t)\n</code></pre>\n\n<p>with <code>Replace</code> being a suitable type family that processes the index list <code>t</code> and replaces <code>a</code> with <code>b</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": false, "score": 2, "last_activity_date": 1539055829, "creation_date": 1539055829, "answer_id": 52712950, "question_id": 52709074, "link": "https://stackoverflow.com/questions/52709074/how-to-make-a-container-of-heterogeneous-type-of-the-same-parameterized-type/52712950#52712950", "title": "How to make a container of heterogeneous type of the same parameterized type?", "body": "<p>You want a container that contains a <code>String</code> name, and then a list of <code>Value</code>s of varying types. The way you've done it, with <code>Bar</code>, you are limited to only certain types of <code>Variable</code>. If you want a true, unrestricted heterogenous container, you'll need a GADT.</p>\n\n<pre><code>data HMapList (f :: k -&gt; Type) (xs :: [k]) :: Type where\n  HMNil :: HMapList f '[]\n  HMCons :: f x -&gt; HMapList f xs -&gt; HMapList f (x : xs)\n\ndata Container xs = Container {\n   containerName :: String\n , containerValues :: HMapList Variable xs\n }\n</code></pre>\n\n<p><code>Functor</code> is not possible here. Closely related is the concept of a lens, which you can get. Doing this \"properly\" requires a bit of boilerplate:</p>\n\n<pre><code>data Elem (x :: k) (xs :: [k]) where -- where do I find x in xs?\n  Here :: Elem x (x : xs)\n  There :: Elem x xs -&gt; Elem x (y : xs)\ndata SElem (e :: Elem (x :: k) xs) where\n  SHere :: SElem Here\n  SThere :: SElem e -&gt; SElem (There e)\n-- these are like indices: think 0 = (S)Here, 1 = (S)There (S)Here, 2 = (S)There 1, etc.\n\ntype family Replace (xs :: [k]) (e :: Elem x xs) (y :: k) :: [k] where\n  Replace (_ : xs) Here y = y : xs\n  Replace (x : xs) (There e) y = x : Replace xs e y\n\nhmLens :: forall x y xs (e :: Elem x xs) f g. Functor g =&gt; SElem e -&gt;\n          -- Lens (f x) (f y) (HMapList f xs) (HMapList f (Replace xs e y))\n          (f x -&gt; g (f y)) -&gt; HMapList f xs -&gt; g (HMapList f (Replace xs e y))\nhmLens SHere mod (HMCons fx xs) = (\\fx' -&gt; HMCons fx' xs) &lt;$&gt; mod fx\nhmLens (SThere e) mod (HMCons fx xs) = (\\xs' -&gt; HMCons fx xs') &lt;$&gt; hmLens e mod xs\n</code></pre>\n\n<p><code>hmLens</code> represents the \"fields\" of a <code>HMapList</code>. You can use operators from the <code>lens</code> library to manipulate the <code>f x</code> contained in a \"slot\" of a <code>Container</code>, complete with type-changes. That is, once you select a position within the list with an <code>Elem</code>, you get the <code>Functor</code>y ability to replace <code>a</code>s with <code>b</code>s by using an <code>a -&gt; b</code>. Though, <code>Container</code> isn't acting as a functor itself; rather, it's generating an infinite family of functors that someone more experienced than me can probably name. To perform your example:</p>\n\n<pre><code>container :: Container [Int, Double, String]\ncontainer = Container \"container\" $ HMCons (Variable \"v1\" [5,1]) $\n                                    HMCons (Variable \"v2\" [3.2,2,6]) $\n                                    HMCons (Variable \"v3\" [\"bob\", \"dupont\"])\n                                    HMNil\ncontainer' :: Container [Int, Double, String]\ncontainer' = let Container name vs = container\n              in Container name $ vs &amp; (hmLens SHere).mapped %~ (+2)\n              --                       ^ access 1st field    ^ modify w/ function\n              --                     ^ flip ($)       ^ peek into Variable\n-- a proper Lens (Container xs) (Container ys) (HMapList Variable xs) (HMapList Variable ys)\n-- would alleviate the match/rebuild pain.\n</code></pre>\n\n<p>If you want to extend this to apply <code>(+2)</code> to all of the <code>Variable Int</code>s inside a <code>Container</code> (with the potential to change types, like by using <code>show</code>), then you can adapt part of <a href=\"https://stackoverflow.com/a/51952823/5684257\">one of my other answers</a>.</p>\n\n<p><code>Container</code> is also a proper, lowercase-\"f\" <em>functor</em>. Let's me define a class of categories:</p>\n\n<pre><code>data ZippingWith (f :: a -&gt; b -&gt; Type) (as :: [a]) (bs :: [b]) where\n  ZWNil :: ZippingWith f '[] '[]\n  ZWCons :: f a b -&gt; ZippingWith f as bs -&gt; ZippingWith f (a : as) (b : bs)\n</code></pre>\n\n<p>If <code>f :: k -&gt; k -&gt; Type</code> itself identifies a category, so does <code>ZippingWith f</code>. A <code>ZippingWith f</code>-arrow between <code>xs</code> and <code>ys</code> is a list of <code>f</code>-arrows between the elements of <code>xs</code> and <code>ys</code>, in a \"zippy\" fashion. <code>HMapList f</code> (and <code>Container</code>, therefore) is a functor from <code>ZippingWith (On f (-&gt;))</code> to <code>(-&gt;)</code>. It lifts a list of functions into a function on a list.</p>\n\n<pre><code>newtype On (f :: i -&gt; o) (arr :: o -&gt; o -&gt; Type) (a :: i) (b :: i)\n  = On { runOn :: arr (f a) (f b) }\n\nhmMap :: (ZippingWith (On f (-&gt;))) xs              ys              -&gt;\n         (-&gt;)                      (HMapList f xs) (HMapList f ys)\nhmMap ZWNil HMNil = HMNil\nhmMap (ZWCons (On axy) as) (HMCons fx xs) = HMCons (axy fx) (hmMap as xs)\ncontainerMap :: (ZippingWith (On Variable (-&gt;))) xs             ys             -&gt;\n                (-&gt;)                             (Container xs) (Container ys)\ncontainerMap as (Container name vs) = Container name (hmMap as vs)\n</code></pre>\n\n<p>Should <code>f</code> itself be a <code>Functor</code> (which it is, in this case), you get some lifting action from <code>ZippingWith (-&gt;)</code> to <code>ZippingWith (On f (-&gt;))</code></p>\n\n<pre><code>zwManyMap :: Functor f =&gt; ZippingWith (-&gt;) xs ys -&gt; ZippingWith (On f (-&gt;)) xs ys\nzwManyMap ZWNil = ZWNil\nzwManyMap (ZWCons axy as) = ZWCons (On (fmap axy)) (zwManyMap as)\n</code></pre>\n\n<p>Which gives us more functorness:</p>\n\n<pre><code>hmMapMap :: Functor f =&gt;\n            (ZippingWith (-&gt;)) xs              ys              -&gt;\n            (-&gt;)               (HMapList f xs) (HMapList f ys)\nhmMapMap = hmMap . zwManyMap\ncontainerMapMap :: (ZippingWith (-&gt;)) xs             ys             -&gt;\n                   (-&gt;)               (Container xs) (Container ys)\ncontainerMapMap = containerMap . zwManyMap\n</code></pre>\n\n<p>But wait; there's more: a functor category is a category where objects are functors (<code>f</code>, <code>g</code>) and arrows are natural transformations (<code>f ~&gt; g = forall a. f a -&gt; g a</code>). <code>HMapList</code> is actually a bifunctor. You've seen the <code>ZippingWith (On f (-&gt;))</code> to <code>(-&gt;)</code> functor. Now see the <code>(~&gt;)</code> to <code>(-&gt;)</code> functor.</p>\n\n<pre><code>hmLMap :: (forall x. f x -&gt; g x) -&gt;\n          HMapList f xs -&gt; HMapList g xs\nhmLMap _ HMNil = HMNil\nhmLMap f (HMCons fx xs) = HMCons (f fx) (hmLMap f xs)\n</code></pre>\n\n<p>This one doesn't generalize to <code>Container</code>, unless you redefine it:</p>\n\n<pre><code>data Container f xs = Container {\n    containerName :: String\n  , containerValues :: HMapList f xs\n  }\n</code></pre>\n\n<p>If you do choose to keep your <code>BarContainer</code> representation, <code>containerMap</code> and <code>containerMapMap</code> degrade to some useable remnants. Again, they are more lensy than functory, but they are workable.</p>\n\n<pre><code>-- \"type-changing\": e.g. BarInt can become BarChar, if desired\ncontainerMapChanging :: ([Int] -&gt; Bar) -&gt; ([Double] -&gt; Bar) -&gt;\n                        ([String] -&gt; Bar) -&gt; ([Char] -&gt; Bar) -&gt;\n                        BarContainer -&gt; BarContainer\ncontainerMapChanging i d s c (BarContainer name bs) = BarContainer name (f &lt;$&gt; bs)\n  where f (BarInt x) = i x\n        f (BarDouble x) = d x\n        f (BarString x) = s x\n        f (BarChar x) = c x\n\ncontainerMap :: ([Int] -&gt; [Int]) -&gt; ([Double] -&gt; [Double]) -&gt;\n                ([String] -&gt; [String]) -&gt; ([Char] -&gt; [Char]) -&gt;\n                BarContainer -&gt; BarContainer\ncontainerMap i d s c bc = containerMapChanging (BarInt . i) (BarDouble . d)\n                                               (BarString . s) (BarChar . c)\n                                               bc\n\ncontainerMapMap :: (Int -&gt; Int) -&gt; (Double -&gt; Double) -&gt;\n                   (String -&gt; String) -&gt; (Char -&gt; Char) -&gt;\n                   BarContainer -&gt; BarContainer\ncontainerMapMap i d s c bc = containerMap (map i) (map d) (map s) (map c) bc\n</code></pre>\n\n<p>So, e.g. if I want to add <code>2</code> to every <code>Int</code> in a <code>BarContainer</code> and strip the first character of every <code>String</code>, I can use <code>containerMapMap (+2) id tail id</code>.</p>\n"}], "owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1539055829, "creation_date": 1539027818, "question_id": 52709074, "link": "https://stackoverflow.com/questions/52709074/how-to-make-a-container-of-heterogeneous-type-of-the-same-parameterized-type", "title": "How to make a container of heterogeneous type of the same parameterized type?", "body": "<p>I am trying to achieve something like this : </p>\n\n<p>I have a parameterized type, let's call it  Variable. This one is a Functor\nThen I want a Container of Variable ( of any Variable, Variable Int, Variable Double, Variable String, etc)</p>\n\n<p>I want that this container is a Functor too. </p>\n\n<p>I managed to make a parameterized container FooContainer but I would like to deal with heterogenous types.</p>\n\n<p>So I created the Bar algebraic data type and the BarContainer. (as suggested here <a href=\"https://wiki.haskell.org/Heterogenous_collections#Algebraic_datatypes\" rel=\"nofollow noreferrer\">https://wiki.haskell.org/Heterogenous_collections#Algebraic_datatypes</a>) \n But I don't understand how to make BarContainer a Functor because its constructor takes no parameter. </p>\n\n<pre><code>import Data.List\n\ndata Variable a  =  Variable { \n varName :: String\n ,value  :: [a] } deriving (Show,Read,Eq)\n\ninstance  Functor Variable where\n fmap f (Variable name vals ) = Variable  name (fmap f vals)\n\n\ndata FooContainer a = FooContainer {\n fooname:: String\n , pdata :: [Variable a]\n } deriving (Show,Read,Eq)\n\ninstance  Functor FooContainer where\n fmap f (FooContainer n p ) = FooContainer n ( Data.List.map (\\x-&gt; fmap f x)  p)\n\ndata Bar = BarInt [Int] | BarDouble [Double] | BarString  [String] | BarChar [Char] deriving (Show,Read,Eq)\n\ndata BarContainer = BarContainer {\n nameB:: String\n , pdataB :: [Bar]\n } deriving (Show,Read,Eq)\n\n\n\n\nfooC = FooContainer \"foo Container\" [Variable \"v1\" [5,6], Variable \"v2\" [2,6,8]]\nfooC_plus2 = fmap (+2) fooC\n\n\nbarC = BarContainer \"bar Container\" [ BarInt [5,1], BarDouble [3.2,2,6], BarString [\"bob\", \"dupont\"]]\n--barC_plus2 ? \n\n\nmain = print $ \"Hello, world!\" ++ ( show fooC_plus2) ++ (show barC)\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1539026577, "post_id": 52708736, "comment_id": 92343817, "body": "<code>if</code>, like everything else, is an expression, not a statement. You could write this more briefly as <code>let ans&#39; = ans * ans * (if r == 0 then 1 else a) `mod` m in trace (&quot;--&gt;&quot; ++ show ans)</code>."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1539027719, "post_id": 52708736, "comment_id": 92344281, "body": "A &quot;parse error&quot; means that the compiler cannot make sense of the text of your program. Parsing is the first stage (more or less) in compilation, in which the compiler takes the text of your source code and builds data structures that can be used for subsequent stages of compilation (e.g. type checking)."}, {"owner": {"reputation": 3171, "user_id": 415973, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/369c87c48747d8b9ebd49d6eb4e15c07?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/415973/kyle"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1539028128, "post_id": 52708736, "comment_id": 92344458, "body": "@chepner I like the elegance of that one liner that&#39;s very convenient I didn&#39;t think of it like that!"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1539031636, "post_id": 52708736, "comment_id": 92345937, "body": "<code>(show (a n m))</code> shows the result of calling function <code>a</code> with args <code>n</code> and <code>m</code>. You want something like <code>(show (a, n, m))</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1539027979, "post_id": 52709036, "comment_id": 92344397, "body": "Even shorter, you could just write <code>traceShowId $ ans * ans * (if r == 0 then 1 else a) `mod` m</code>."}], "tags": [], "owner": {"reputation": 2638, "user_id": 7208029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QxbAJ.png?s=128&g=1", "display_name": "Chai T. Rex", "link": "https://stackoverflow.com/users/7208029/chai-t-rex"}, "is_accepted": true, "score": 5, "last_activity_date": 1539028054, "last_edit_date": 1539028054, "creation_date": 1539027661, "answer_id": 52709036, "question_id": 52708736, "link": "https://stackoverflow.com/questions/52708736/trying-to-trace-a-function-with-if/52709036#52709036", "title": "Trying to trace a function with if", "body": "<h3>The immediate issue</h3>\n\n<p>To answer your immediate question, you need an <code>in</code> to go with your <code>let</code> (the beginning of the third line in the code just below):</p>\n\n<pre><code>expmod a n m = let (q,r) = divMod n 2\n                   ans   = expmod a q m\n               in  if r == 0 then let ans = ans*ans `mod` m \n                                  in  trace (\"--&gt;\" ++ show ans) ans\n                             else let ans = ans*ans*a `mod` m\n                                  in  trace (\"--&gt;\" ++ show ans) ans\n</code></pre>\n\n<h3>Additional tips</h3>\n\n<p>When you use <code>let ans =</code>, you're defining <code>ans</code>, so any <code>ans</code> on the right of the equal sign will refer to the <code>ans</code> on the left side of the equal sign, not any <code>ans</code> defined elsewhere. Thus, this will fail:</p>\n\n<pre><code>let ans = ans*ans `mod` m\n</code></pre>\n\n<p>It's just like saying <code>let x = x*x `mod` m</code> out of nowhere. It'll just give infinite recursion, so use a two different variable names for the two <code>ans</code>es.</p>\n\n<hr>\n\n<p>Thirdly, an easier way is to use <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Debug-Trace.html#v:traceShowId\" rel=\"nofollow noreferrer\"><code>traceShowId :: Show a =&gt; a -&gt; a</code></a>, which traces a value that has a <code>Show</code> instance. <code>traceShowId x</code> evaluates to <code>x</code>, so you can use it where you'd want to use <code>x</code>. It also traces <code>x</code>. For example:</p>\n\n<pre><code>expmod a n m = let (q,r) = divMod n 2\n                   ans   = expmod a q m\n               in  traceShowId $ if r == 0 then ans*ans   `mod` m \n                                           else ans*ans*a `mod` m\n</code></pre>\n\n<p>Much less typing that way. You can also use <code>trace \"vvv\" . traceShowId $</code> if the arrows were important.</p>\n"}], "owner": {"reputation": 3171, "user_id": 415973, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/369c87c48747d8b9ebd49d6eb4e15c07?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/415973/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 52709036, "answer_count": 1, "score": 0, "last_activity_date": 1539028054, "creation_date": 1539026222, "question_id": 52708736, "link": "https://stackoverflow.com/questions/52708736/trying-to-trace-a-function-with-if", "title": "Trying to trace a function with if", "body": "<pre><code>expmod :: Integer -&gt; Integer -&gt; Integer -&gt; Integer\nexpmod a n m | trace (show (a n m)) False = undefined\nexpmod a 0 m = 1\nexpmod a n m = let (q,r) = divMod n 2\n               ans = expmod a q m\n           if r == 0 then let ans = ans*ans `mod` m \n               in trace (\"--&gt;\" ++ show ans) ans\n           else let ans = ans*ans*a `mod` m\n               in trace (\"--&gt;\" ++ show ans) ans\n</code></pre>\n\n<p>I'm not sure why it's failing at the if statement </p>\n\n<pre><code>error: parse error on input `if'\n   |\n37 |                if (r == 0) then let ans = ans*ans `mod` m\n   |                ^^\n</code></pre>\n\n<p>How do you trace a function that has if statements?</p>\n"}, {"tags": ["haskell", "typeclass"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1539022180, "post_id": 52707869, "comment_id": 92342021, "body": "It does know that, but it does not know that <code>a</code> and <code>b</code> are the <i>same</i> type. In Haskell the operands of <code>(+)</code>, <code>(-)</code>, <code>(*)</code>, etc. all have the same type. There is no <code>(+) :: Int -&gt; Double -&gt; Double</code>."}, {"owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539022272, "post_id": 52707869, "comment_id": 92342052, "body": "Ok maybe I should define Point to have the same type for x and y."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1539022320, "post_id": 52707869, "comment_id": 92342083, "body": "not only for <code>x</code> and <code>y</code>, also for <code>k</code> and <code>x</code>, and thus <code>k</code> and <code>y</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1539023510, "post_id": 52707869, "comment_id": 92342588, "body": "The tuple is redundant; it&#39;s just an unnecessary layer of indirection. <code>data Point x y = Point x y</code> or (better) <code>data Point x = Point x x</code> is sufficient."}, {"owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1539024855, "post_id": 52707869, "comment_id": 92343136, "body": "@WillemVanOnsem Is there a way to specify that <code>k</code>, <code>x</code>, and <code>y</code> must all be the same type?"}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 0, "creation_date": 1539081924, "post_id": 52707869, "comment_id": 92363566, "body": "@BradyDean Sure: <code>data Point x = Point x x</code> says that <code>Point</code> has two values <i>of the same type</i> (and that type is <code>x</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1539030919, "last_edit_date": 1539030919, "creation_date": 1539030125, "answer_id": 52709584, "question_id": 52707869, "link": "https://stackoverflow.com/questions/52707869/how-to-deal-with-typeclass-constraint-in-class-member-function/52709584#52709584", "title": "How to deal with typeclass constraint in class member function", "body": "<p>The problem is that your <code>mul</code> signature says that a <code>v</code> can be multiplied by <em>any</em> type <code>k</code> which has a <code>Num</code> instance: <code>Int</code>, <code>Double</code>, <code>Complex Double</code>, etc. etc. </p>\n\n<p>But for vector spaces you want something very different: to say that there is a specific <code>k</code> for each <code>v</code>. This can be done in two ways (after fixing <code>data Point x = Point x x</code> as suggested in the comments):</p>\n\n<ol>\n<li><p>using multi-parameter type class with <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#functional-dependencies\" rel=\"nofollow noreferrer\">functional dependency</a>;</p></li>\n<li><p>using <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#associated-data-and-type-families\" rel=\"nofollow noreferrer\">associated types</a>.</p></li>\n</ol>\n\n<p>I initially had given the solutions using both, but it may be more helpful to read the linked documentation and try it yourself.</p>\n"}], "owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539030919, "creation_date": 1539022012, "question_id": 52707869, "link": "https://stackoverflow.com/questions/52707869/how-to-deal-with-typeclass-constraint-in-class-member-function", "title": "How to deal with typeclass constraint in class member function", "body": "<p>GHCI complains about the types of <code>k</code> and <code>a</code> inside of <code>(k * a, k * b)</code>. My guess is it doesn't know that <code>k</code> is a <code>Num</code> but I don't know how to specify that.</p>\n\n<pre><code>module Point where\n\ndata Point x y = Point (x, y)\n\nclass Vector v where\n  add :: v -&gt; v -&gt; v\n  sub :: v -&gt; v -&gt; v\n  mul :: Num k =&gt; k -&gt; v -&gt; v\n\ninstance (Num a, Num b) =&gt; Vector (Point a b) where\n  add (Point (a, b)) (Point (c, d)) = Point (a + c, b + d)\n  sub (Point (a, b)) (Point (c, d)) = Point (a - c, b - d)\n  mul k (Point (a, b)) = Point (k * a, k * b)\n</code></pre>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 4, "creation_date": 1539024465, "post_id": 52707671, "comment_id": 92342969, "body": "I believe that if you use <code>stack runhaskell</code> instead of <code>stack script</code>, it will use a <code>stack.yaml</code> file. The primary purpose of <code>script</code> is to ensure the script <i>doesn\u2019t</i> use <code>stack.yaml</code> so that it\u2019s completely independent."}], "answers": [{"tags": [], "owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "is_accepted": true, "score": 7, "last_activity_date": 1539062887, "creation_date": 1539062887, "answer_id": 52713909, "question_id": 52707671, "link": "https://stackoverflow.com/questions/52707671/is-it-possible-to-specify-a-stack-yaml-file-for-a-haskell-script/52713909#52713909", "title": "Is it possible to specify a `stack.yaml` file for a haskell script?", "body": "<p>You can achieve this using custom snapshot files. For example, in <code>snapshot.yaml</code>:</p>\n\n<pre><code>resolver: ghc-8.4.3\nname: has-acme-missiles\npackages:\n- acme-missiles-0.3\n</code></pre>\n\n<p>In <code>Main.hs</code>:</p>\n\n<pre><code>#!/usr/bin/env stack\n-- stack --resolver snapshot.yaml script\nimport Acme.Missiles\n\nmain :: IO ()\nmain = launchMissiles\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>$ ./Main.hs \nNuclear launch detected.\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 942396, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/btk1s.jpg?s=128&g=1", "display_name": "Gaith", "link": "https://stackoverflow.com/users/942396/gaith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "accepted_answer_id": 52713909, "answer_count": 1, "score": 8, "last_activity_date": 1539062887, "creation_date": 1539021173, "question_id": 52707671, "link": "https://stackoverflow.com/questions/52707671/is-it-possible-to-specify-a-stack-yaml-file-for-a-haskell-script", "title": "Is it possible to specify a `stack.yaml` file for a haskell script?", "body": "<p>Let's say I have the following script inside my haskell project directory:</p>\n\n<pre><code>#!/usr/bin/env stack\n-- stack --resolver lts-12.5 script\n\n-- some imports here\n\nmain :: IO ()\nmain = do\n  -- some code here\n</code></pre>\n\n<p>I'd like to use the <code>stack.yaml</code> file that exists inside the project directory, in order to get the required packages, as I want to get them from a specific git commit instead of <code>lts-12.5</code>.</p>\n\n<p>I've tried adding <code>--stack-yaml stack.yaml</code> after <code>--resolver lts-12.5</code> but I'm getting this warning when I run the script: <code>Ignoring override stack.yaml file for script command: stack.yaml</code>.</p>\n\n<p>Is it possible to use my <code>stack.yaml</code> file for the script? or is it possible to specify the git commit from which I want to get the package (like using <code>location</code> with <code>commit</code> and <code>git</code> inside <code>stack.yaml</code>)?</p>\n"}, {"tags": ["function", "haskell"], "comments": [{"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1539013446, "post_id": 52705693, "comment_id": 92338046, "body": "It should be <code>f :: Integral n =&gt; n -&gt; n</code> such that the type variable <code>n</code> represents multiple types which are members of the <code>Integral</code> type class."}, {"owner": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 2, "creation_date": 1539015749, "post_id": 52705693, "comment_id": 92339166, "body": "Re: your edit: The first declaration offers the functionality of working at all.  The second does not."}, {"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "reply_to_user": {"reputation": 171740, "user_id": 869736, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/671f732e3c68c387c702112a30e5ebd8?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Wasserman", "link": "https://stackoverflow.com/users/869736/louis-wasserman"}, "edited": false, "score": 0, "creation_date": 1539015786, "post_id": 52705693, "comment_id": 92339187, "body": "@LouisWasserman Oops my bad, I just don&#39;t get this yet at all. I&#39;ll read through the answers and hopefully I&#39;ll understand!"}], "answers": [{"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1539083565, "post_id": 52706023, "comment_id": 92364530, "body": "maybe stress that <code>f :: Num -&gt; Num</code> is simply invalid, as <code>Num</code> is not a type."}, {"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "edited": false, "score": 1, "creation_date": 1539146726, "post_id": 52706023, "comment_id": 92390413, "body": "<code>Num :: * -&gt; Constraint</code>, not <code>* -&gt; *</code>"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1563478789, "post_id": 52706023, "comment_id": 100724151, "body": "thanks for the editing, and by the way very good answer, plus one!"}], "tags": [], "owner": {"reputation": 1197, "user_id": 4051020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42660a4e623fd8d2c850081291bcb585?s=128&d=identicon&r=PG&f=1", "display_name": "dopamane", "link": "https://stackoverflow.com/users/4051020/dopamane"}, "is_accepted": false, "score": 4, "last_activity_date": 1539163668, "last_edit_date": 1539163668, "creation_date": 1539014129, "answer_id": 52706023, "question_id": 52705693, "link": "https://stackoverflow.com/questions/52705693/difference-in-function-typing-in-haskell/52706023#52706023", "title": "Difference in Function typing in Haskell", "body": "<p>According to this <a href=\"https://www.haskell.org/tutorial/numbers.html\" rel=\"nofollow noreferrer\">link</a> the standard instances of the <code>Integral</code> type class are <code>Integer</code> and <code>Int</code>. <code>Integer</code> is a primitive type, and it acts like an unbounded mathematical integer. So given:</p>\n\n<pre><code>f :: Integral n =&gt; n -&gt; n\n</code></pre>\n\n<p><code>n</code> could be <code>Int</code> or <code>Integer</code> or any \"custom\" type that you define that is an <code>instance</code> of <code>Integral</code>. The use of type classes allows for type polymorphism.</p>\n\n<p><code>f :: Num -&gt; Num</code> <strong>WILL NOT COMPILE</strong> because <code>Num</code> is <strong>not</strong> a type. <code>Num</code> has kind <code>* -&gt; Constraint</code> and is thus a <strong>type constructor</strong> whereas <code>f</code> requires an ordinary <strong>type</strong> or <strong>monotype</strong> which has kind <code>*</code>, such as <code>Int</code> or <code>Integer</code> (also known as type system primitives). See the haskell wiki for a brief reference/jumping off point about <a href=\"https://wiki.haskell.org/Kind\" rel=\"nofollow noreferrer\">kinds</a>. Haskell has a rich type system with higher-order types, if used correctly it can be an extremely powerful tool i.e. type polymorphism.</p>\n"}, {"comments": [{"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1539280687, "post_id": 52706138, "comment_id": 92455278, "body": "Perfect! This makes a lot more sense now!"}], "tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": true, "score": 7, "last_activity_date": 1539031296, "last_edit_date": 1539031296, "creation_date": 1539014564, "answer_id": 52706138, "question_id": 52705693, "link": "https://stackoverflow.com/questions/52705693/difference-in-function-typing-in-haskell/52706138#52706138", "title": "Difference in Function typing in Haskell", "body": "<p>Let's rename:</p>\n\n<pre><code>f :: Integer -&gt; Integer\ng :: (Integral n) =&gt; n -&gt; n\n</code></pre>\n\n<p>I like to follow a fairly common practice of adding parentheses to the constraint section of the signature.  It helps it stand out as different.</p>\n\n<p><code>f :: Integer -&gt; Integer</code> is simple, it takes an integer and returns another integer.</p>\n\n<p>As for <code>g :: (Integral n) =&gt; n -&gt; n</code>: <code>Integral</code> is not a type itself, rather it's more like a predicate. Some types are <code>Integral</code>, others aren't.  For example, <code>Int</code> is an <code>Integral</code> type, <code>Double</code> is not.  </p>\n\n<p>Here <code>n</code> is a <em>type variable</em>, and it can refer to any type.  <code>(Integral n)</code> is a <em>constraint</em> on the type variable, which restricts what types it can refer to.  So you could read it like this:</p>\n\n<blockquote>\n  <p><code>g</code> takes a value of <em>any type</em> <code>n</code> and returns a value of <em>that same type</em>, provided that it is an <code>Integral</code> type.  </p>\n</blockquote>\n\n<p>If we examine the <code>Integral</code> typeclass:</p>\n\n<pre><code>ghci&gt; :info Integral\nclass (Real a, Enum a) =&gt; Integral a where\n  quot :: a -&gt; a -&gt; a\n  rem :: a -&gt; a -&gt; a\n  div :: a -&gt; a -&gt; a\n  mod :: a -&gt; a -&gt; a\n  quotRem :: a -&gt; a -&gt; (a, a)\n  divMod :: a -&gt; a -&gt; (a, a)\n  toInteger :: a -&gt; Integer\n {-# MINIMAL quotRem, toInteger #-}\n    -- Defined in \u2018GHC.Real\u2019\ninstance Integral Word -- Defined in \u2018GHC.Real\u2019\ninstance Integral Integer -- Defined in \u2018GHC.Real\u2019\ninstance Integral Int -- Defined in \u2018GHC.Real\u2019\n</code></pre>\n\n<p>We can see 3 builtin types which are <code>Integral</code>. Which means that <code>g</code> <em>simultaneously</em> has three different types, depending on how it is used.</p>\n\n<pre><code>g :: Word -&gt; Word\ng :: Integer -&gt; Integer\ng :: Int -&gt; Int\n</code></pre>\n\n<p>(And if you define another <code>Integral</code> type in the future, <code>g</code> will automatically work with that as well)</p>\n\n<p>The <code>Word -&gt; Word</code> variant is a good example, since <code>Word</code>s cannot be negative.  <code>g</code>, when given a positive machine-sized number, returns another positive machine-sized number, whereas <code>f</code> could return any integer, including negative ones or gigantic ones.</p>\n\n<p><code>Integral</code> is a rather specific class.  It's easier to see with <code>Num</code>, which has fewer methods and thus can represent more types:</p>\n\n<pre><code>h :: (Num a) =&gt; a -&gt; a\n</code></pre>\n\n<p>This is also a generalization of <code>f</code>, that is, you could use <code>h</code> where something with <code>f</code>'s type is expected.  But <code>h</code> can also take a complex number, and it would then return a complex number. </p>\n\n<p>The key with signatures like <code>g</code>'s and <code>h</code>'s is that they work on multiple types, as long as the return type is the same as the input type.  </p>\n"}, {"tags": [], "owner": {"reputation": 2570, "user_id": 4142266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rMCN5.png?s=128&g=1", "display_name": "mschmidt", "link": "https://stackoverflow.com/users/4142266/mschmidt"}, "is_accepted": false, "score": 2, "last_activity_date": 1539015033, "creation_date": 1539015033, "answer_id": 52706281, "question_id": 52705693, "link": "https://stackoverflow.com/questions/52705693/difference-in-function-typing-in-haskell/52706281#52706281", "title": "Difference in Function typing in Haskell", "body": "<pre><code>f :: Integer -&gt; Integer\n</code></pre>\n\n<p><code>f</code> is a function from arbitrary sized integers to arbitrary sized integers.</p>\n\n<pre><code>f' :: Integral n =&gt; n -&gt; n\n</code></pre>\n\n<p><code>f'</code> is a <strong>polymorphic</strong> function from type <code>n</code> to type <code>n</code>. Any type <code>n</code> that is member of the class <code>Integral</code> is allowed. Examples for types in <code>Integral</code> are <code>Integer</code> and <code>Int</code> (the integer type with fixed precision).</p>\n\n<pre><code>f'' :: Num n =&gt; n -&gt; n\n</code></pre>\n\n<p><code>f''</code> is also a <strong>polymorphic</strong> function, but this time for class <code>Num</code>. <code>Num</code> is a more generic number type that has more members than <code>Integral</code>, but all types in <code>Integral</code> are also in contained in <code>Num</code>. For <code>f''</code> <code>n</code> can also be <code>Double</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1539174915, "post_id": 52719287, "comment_id": 92405357, "body": "\u201cmore efficient to execute\u201d \u2013 actually, GHC will in many of the important cases specialise a polymorphic function to the concrete type it&#39;s used with. If you use an <code>Integral n =&gt; n -&gt; n</code> function with <code>Int</code>, it will typically run <i>faster</i> than a monomorphic <code>Integer -&gt; Integer</code> version."}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": false, "score": 2, "last_activity_date": 1539082341, "creation_date": 1539082341, "answer_id": 52719287, "question_id": 52705693, "link": "https://stackoverflow.com/questions/52705693/difference-in-function-typing-in-haskell/52719287#52719287", "title": "Difference in Function typing in Haskell", "body": "<p><strong>TL;DR</strong></p>\n\n<p><code>f :: Integer -&gt; Integer</code> works for one type: <code>Integer</code>.</p>\n\n<p><code>f :: Integral n =&gt; n -&gt; n</code> works for <code>Integer</code>, <code>Int</code>, <code>Word</code>, <code>Int32</code>, <code>Int64</code>, <code>Word8</code>, and any arbitrary user-defined types that implement the <code>Integral</code> type class.</p>\n\n<p>That's the short version. If you only care about one type, it's easier to type-check and more efficient to execute if you specify that one type. If you <em>want</em> multiple types, then the second way is probably the way to do.</p>\n"}], "owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 1, "accepted_answer_id": 52706138, "answer_count": 4, "score": 6, "last_activity_date": 1539163668, "creation_date": 1539012900, "last_edit_date": 1539014229, "question_id": 52705693, "link": "https://stackoverflow.com/questions/52705693/difference-in-function-typing-in-haskell", "title": "Difference in Function typing in Haskell", "body": "<p>I've been playing around with basic functions in Haskell, and am a little confused with the difference between the following type declarations for the function <code>f</code></p>\n\n<pre><code>f :: Integer -&gt; Integer\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>f :: Integral n =&gt; n -&gt; n\n</code></pre>\n\n<p>So far, I've treated both of these as identical, but I'm sure this isn't true. What is the difference?</p>\n\n<p><strong>Edit:</strong> As a response to the first answer, I wanna propose a similar example which more is along the lines of the question I hold.</p>\n\n<p>Consider the following declarations</p>\n\n<pre><code>f :: Num n =&gt; n -&gt; n\n</code></pre>\n\n<p>or</p>\n\n<pre><code>f :: Num -&gt; Num\n</code></pre>\n\n<p>What functionality does each offer?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 1, "creation_date": 1539012868, "post_id": 52705485, "comment_id": 92337713, "body": "(1) Nitpicking: <code>in</code> is not a standalone keyword; it is always accompanied by <code>let</code>: <code>let {- definitions -} in {- expression that uses the definitions -}</code>. (2) In your case, the let-expression defines <code>n</code> and <code>ns</code>, in terms of <code>foo</code>, <code>ys</code> and <code>a</code>."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "reply_to_user": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 2, "creation_date": 1539013187, "post_id": 52705485, "comment_id": 92337886, "body": "@duplode That&#39;s not nitpicking, that&#39;s the answer. You should post it as such."}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 1, "creation_date": 1539013611, "post_id": 52705485, "comment_id": 92338134, "body": "@SebastianRedl I can&#39;t write a full answer in a satisfactory way right now. I will do it later if other answers do not cover it."}], "answers": [{"tags": [], "owner": {"reputation": 1227, "user_id": 5053374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe57f0998df065470ff42c938f781cf?s=128&d=identicon&r=PG", "display_name": "Libby", "link": "https://stackoverflow.com/users/5053374/libby"}, "is_accepted": true, "score": 7, "last_activity_date": 1539014227, "last_edit_date": 1539014227, "creation_date": 1539013541, "answer_id": 52705857, "question_id": 52705485, "link": "https://stackoverflow.com/questions/52705485/what-does-the-in-keyword-do-in-haskell/52705857#52705857", "title": "What does the &quot;in&quot; keyword do in Haskell?", "body": "<p><code>in</code> goes along with <code>let</code> to name one or more local expressions in a pure function.</p>\n\n<p>So, to use a simpler example, </p>\n\n<pre><code>foo = \n  let greeting = \"hello\" in \n    print (greeting ++ \" world\")\n</code></pre>\n\n<p>would print \"hello world\".</p>\n\n<p>But you could also use lots of <code>let</code>s:</p>\n\n<pre><code>foo = \n  let greeting = \"hello\"\n      greetee  = \"world\" in\n    print (greeting ++ \" \" ++ greetee)\n</code></pre>\n\n<p>And you just need one <code>in</code> before you use the names you just defined.</p>\n\n<p>And these names definitely don't <em>have</em> to be used as parameters to a function -- they can be just about anything, even functions themselves!</p>\n\n<pre><code>foo = \n  let f = print in\n    f \"hello world\"\n</code></pre>\n\n<p>In your example, the <code>let</code> expression is defining two names, <code>n</code> and <code>ns</code>, which are used in the body of the function.</p>\n"}], "owner": {"reputation": 31, "user_id": 10470847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e013f8be6a9a49920bb9cf49d390a3b8?s=128&d=identicon&r=PG&f=1", "display_name": "DavidWebb", "link": "https://stackoverflow.com/users/10470847/davidwebb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2123, "favorite_count": 0, "accepted_answer_id": 52705857, "answer_count": 1, "score": 2, "last_activity_date": 1539014227, "creation_date": 1539012231, "question_id": 52705485, "link": "https://stackoverflow.com/questions/52705485/what-does-the-in-keyword-do-in-haskell", "title": "What does the &quot;in&quot; keyword do in Haskell?", "body": "<p>I am having trouble understanding the full scope of the 'in' keyword in haskell. It was my understanding that you could use it to pass arguments to a function. However, I am having trouble understanding how the applies to a function similar to that shown below:</p>\n\n<pre><code>foo xs a =\n   case xs of\n      [] -&gt; (a,[])\n      y:ys -&gt;\n         let (n,ns)=foo ys a in\n         if y&gt;0 then (1+n,y:ns)\n         else (n,ns)\n</code></pre>\n\n<p>How does 'in' apply to the equation if it is supplying parameters that foo does not take?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1538984910, "post_id": 52697606, "comment_id": 92321653, "body": "Do not use <code>reverse (drop 1 f)</code>, first of all it should be <code>reverse (drop 1 (reverse f))</code>, but more important, it will no longer work on <i>infinite lists</i>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1538985398, "post_id": 52697606, "comment_id": 92321910, "body": "123 is a prefix of 123."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1538985545, "post_id": 52697606, "comment_id": 92321978, "body": "@n.m.: I think this function aims to yield <i>proper</i> prefixes."}, {"owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "edited": false, "score": 0, "creation_date": 1539289955, "post_id": 52697606, "comment_id": 92459725, "body": "Again, if this was for homework or your own understanding, then great.  But, in real code, you should probably consider writing <code>prefixes lst = init (inits lst)</code> or the equivalent <code>prefixes = init . inits</code> which uses <code>inits</code> from <code>Data.List</code> (which, as noted in another comment, has a particularly good implementation since GHC 7.8.4)."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1539006548, "post_id": 52698004, "comment_id": 92334033, "body": "OP wants to know how to call <code>reverse (drop 1 f)</code> which would convert a list of prefixes he already has to a list of proper prefixes. Of course the method of obtaining prefixes OP&#39;s using is totally barbaric but the real problem IMHO is more basic than that."}], "tags": [], "owner": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "is_accepted": false, "score": 6, "last_activity_date": 1538988960, "last_edit_date": 1538988960, "creation_date": 1538986373, "answer_id": 52698004, "question_id": 52697606, "link": "https://stackoverflow.com/questions/52697606/proper-prefix-function-in-haskell/52698004#52698004", "title": "Proper prefix function in Haskell", "body": "<p>Your base case is incorrect, the empty list has no proper prefixes. So clearly in the base case you must return the empty list for the function to be correct. </p>\n\n<p>Now consider the recursive case. For one, it should always start with the empty list (because the prefixes of <code>(x:xs)</code> are always <code>[[],...]</code>). How can we construct the rest of the list (the non-empty prefixes of <code>(x:xs)</code>?</p>\n\n<p>We want to use recursion, so how do we build the set of non-empty proper prefixes of <code>(x:xs)</code> from the set of proper prefixes of <code>xs</code>? Look at your example <code>\"123\"</code>, the prefixes of <code>\"23\"</code> are <code>[\"\", \"2\"]</code>, the non-empty prefixes we want to construct are <code>[\"1\",\"12\"]</code>, so we just add <code>'1'</code> to the head of each prefix of the tail. </p>\n\n<p>So in the recursive case: empty list is a proper prefix, and also the head of the list added to any proper prefix of the tail. </p>\n\n<p>Here is a piece of code that does what you want:</p>\n\n<pre><code>prefixes []     = []\nprefixes (x:xs) = [] : map (x:) (prefixes xs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1539007867, "last_edit_date": 1539007867, "creation_date": 1539007080, "answer_id": 52703926, "question_id": 52697606, "link": "https://stackoverflow.com/questions/52697606/proper-prefix-function-in-haskell/52703926#52703926", "title": "Proper prefix function in Haskell", "body": "<p>It looks like you want to know how to define a helper function which would call your original definition.</p>\n\n<pre><code>prefixes xs = reverse (drop 1 (prefixes' xs)) where\n    prefixes' [] = []:[]\n    prefixes' f =  f : prefixes' (init(f)) \n</code></pre>\n\n<p>Your original definition, while seemingly working, is rather suboptimal though. The other answer shows how to do it more intuotively and without needing a helper function (edit: but the performance may or may not be any good).  There are other small things that could be improved in this function:</p>\n\n<ul>\n<li><code>[]:[]</code> can be written simply as <code>[[]]</code></li>\n<li><code>drop 1</code> is <code>tail</code></li>\n<li>parentheses can often be replaced by function composition and <code>$</code> for better readability.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 581, "user_id": 6178240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CRJ95.jpg?s=128&g=1", "display_name": "MiFi", "link": "https://stackoverflow.com/users/6178240/mifi"}, "is_accepted": false, "score": 0, "last_activity_date": 1581357658, "creation_date": 1581357658, "answer_id": 60155933, "question_id": 52697606, "link": "https://stackoverflow.com/questions/52697606/proper-prefix-function-in-haskell/60155933#60155933", "title": "Proper prefix function in Haskell", "body": "<p>Here is a solution in point-free style:</p>\n\n<pre><code>prefixes = foldr (\\el acc -&gt; [] : map (el:) acc) [] \n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 7350169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a29f39ab44dae8f625feb700571db4?s=128&d=identicon&r=PG&f=1", "display_name": "Aashray Adhikari", "link": "https://stackoverflow.com/users/7350169/aashray-adhikari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1581357658, "creation_date": 1538984735, "question_id": 52697606, "link": "https://stackoverflow.com/questions/52697606/proper-prefix-function-in-haskell", "title": "Proper prefix function in Haskell", "body": "<p>I want to create a Haskell function that prints the prefixes of a list:</p>\n\n<p>The function should do the following:</p>\n\n<pre><code>&gt; prefixes \"123\"\n[\"\",\"1\",\"12\"]\n&gt; prefixes \"1\"\n[\"\"]\n</code></pre>\n\n<p>I have written the following code:</p>\n\n<pre><code>prefixes :: [a] -&gt; [[a]]\nprefixes [] = []:[]\nprefixes f =  f : prefixes(init(f)) \n</code></pre>\n\n<p>The function prints the entered string or character as a prefix and prints it in opposite direction. I want to remove it so when I enter \"123\" it should print as above and display in correct direction.</p>\n\n<p>We can use:</p>\n\n<pre><code>reverse (drop 1 f)\n</code></pre>\n\n<p>command but I don't know how to implement it in my function.</p>\n\n<p>Can you help me solve this so that it does prints it correctly.</p>\n"}, {"tags": ["haskell", "haskell-lens"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1538989521, "post_id": 52696375, "comment_id": 92324073, "body": "There are at least two different semantics this could have; please clarify the question with examples (and type signatures)."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2065062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f63eaeae434580dee1ddc82a3faf02c3?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/2065062/max"}, "edited": false, "score": 0, "creation_date": 1539167256, "post_id": 52712477, "comment_id": 92400728, "body": "Yey! Thanks a lot!"}], "tags": [], "owner": {"reputation": 3016, "user_id": 3190654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c321c5241605255cae9ecf3fb2dffc0b?s=128&d=identicon&r=PG", "display_name": "bergey", "link": "https://stackoverflow.com/users/3190654/bergey"}, "is_accepted": true, "score": 2, "last_activity_date": 1539051857, "creation_date": 1539051857, "answer_id": 52712477, "question_id": 52696375, "link": "https://stackoverflow.com/questions/52696375/haskell-lens-composition-of/52712477#52712477", "title": "Haskell Lens composition of ?~", "body": "<p>Perhaps something like:</p>\n\n<p><code>[Just (Just 1, 'a')] &amp; _head . _Just . _1 ?~ 2</code></p>\n"}], "owner": {"reputation": 35, "user_id": 2065062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f63eaeae434580dee1ddc82a3faf02c3?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/2065062/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 52712477, "answer_count": 1, "score": 2, "last_activity_date": 1539051857, "creation_date": 1538979353, "last_edit_date": 1538979757, "question_id": 52696375, "link": "https://stackoverflow.com/questions/52696375/haskell-lens-composition-of", "title": "Haskell Lens composition of ?~", "body": "<p>We have an operator <code>?~</code> in Lens.\nWe can do <code>a &amp; b . c ?~ d</code> if <code>_c</code> is a field of <code>b</code> type. What should I use if <code>b</code> has a <code>Maybe (type of _c)</code> type?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 680, "user_id": 6845412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMPDj.jpg?s=128&g=1", "display_name": "Utkarsh Dubey", "link": "https://stackoverflow.com/users/6845412/utkarsh-dubey"}, "edited": false, "score": 5, "creation_date": 1538974110, "post_id": 52695465, "comment_id": 92317464, "body": "check this: <a href=\"https://stackoverflow.com/questions/27399696/filter-positions-in-a-list-haskell\" title=\"filter positions in a list haskell\">stackoverflow.com/questions/27399696/&hellip;</a>"}, {"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "reply_to_user": {"reputation": 680, "user_id": 6845412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMPDj.jpg?s=128&g=1", "display_name": "Utkarsh Dubey", "link": "https://stackoverflow.com/users/6845412/utkarsh-dubey"}, "edited": false, "score": 0, "creation_date": 1538974222, "post_id": 52695465, "comment_id": 92317496, "body": "Yes thanks, i will use zip. But it doesn say why is the reason why it is not included in the filter function directly"}, {"owner": {"reputation": 27561, "user_id": 214446, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5deb6b87326686b1f2e9fdb37ceac210?s=128&d=identicon&r=PG", "display_name": "mb21", "link": "https://stackoverflow.com/users/214446/mb21"}, "reply_to_user": {"reputation": 680, "user_id": 6845412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMPDj.jpg?s=128&g=1", "display_name": "Utkarsh Dubey", "link": "https://stackoverflow.com/users/6845412/utkarsh-dubey"}, "edited": false, "score": 0, "creation_date": 1538982604, "post_id": 52695465, "comment_id": 92320542, "body": "@UtkarshDubey the reason is that a linked list is not an array. On a list, it&#39;s generally not performant to work with indices so it&#39;s discouraged."}, {"owner": {"reputation": 680, "user_id": 6845412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMPDj.jpg?s=128&g=1", "display_name": "Utkarsh Dubey", "link": "https://stackoverflow.com/users/6845412/utkarsh-dubey"}, "edited": false, "score": 0, "creation_date": 1538983704, "post_id": 52695465, "comment_id": 92321063, "body": "@user2693928, hope you will find this useful and it will answer your query: <a href=\"http://hackage.haskell.org/package/ilist/docs/Data-List-Index.html\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/ilist/docs/Data-List-Index.html</a>"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1538986377, "post_id": 52695465, "comment_id": 92322384, "body": "@user2693928: I think because in functional programming such list is seen as a sequence of items, and the <i>index</i> exists, but is not commonly used. Especially since an index lookup <code>list !! k</code> happens in <i>O(n)</i>. When using lists, it is rather uncommon to take the index into account."}], "answers": [{"comments": [{"owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "edited": false, "score": 0, "creation_date": 1538990403, "post_id": 52698532, "comment_id": 92324576, "body": "Thanks, understood. Indexes are not common used and if you want you can pass zip and have access to the indexes."}, {"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "edited": false, "score": 0, "creation_date": 1538991218, "post_id": 52698532, "comment_id": 92325035, "body": "Alternatively: <code>filterIndex f = map snd . filter (f . fst) . enumerate</code> given <code>enumerate = zip [0..]</code> (which should really be in a library somewhere, if it isn\u2019t already)\u2014also assuming only the index is needed, although it\u2019s easy to adjust if not: just use <code>uncurry f</code> instead of <code>f . fst</code>."}], "tags": [], "owner": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "is_accepted": true, "score": 3, "last_activity_date": 1538988404, "creation_date": 1538988404, "answer_id": 52698532, "question_id": 52695465, "link": "https://stackoverflow.com/questions/52695465/haskell-filter-by-list-index/52698532#52698532", "title": "Haskell filter by list index", "body": "<p>If you want a function that filters on both values and indexes, you can write it yourself like this:</p>\n\n<pre><code>filterIndexed :: (a -&gt; Int -&gt; Bool) -&gt; [a] -&gt; [a]\nfilterIndexed p xs = [x|(x,i) &lt;- zip xs [0..], p x i]\n</code></pre>\n\n<p>It uses a list comprehension which is nice for this kind of thing (filter and project). The reason this is not in the standard libraries is because it is a relatively rare operation, and it's fairly easy to have the list comprehension directly in your code. </p>\n"}], "owner": {"reputation": 3148, "user_id": 2693928, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4c1419246c9c4d03a08f7c5db65303e?s=128&d=identicon&r=PG&f=1", "display_name": "user2693928", "link": "https://stackoverflow.com/users/2693928/user2693928"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "accepted_answer_id": 52698532, "answer_count": 1, "score": 2, "last_activity_date": 1538988404, "creation_date": 1538973517, "last_edit_date": 1538980162, "question_id": 52695465, "link": "https://stackoverflow.com/questions/52695465/haskell-filter-by-list-index", "title": "Haskell filter by list index", "body": "<p>I have function:</p>\n\n<pre><code>isEven n = (mod n 2) == 0\n</code></pre>\n\n<p>And a I want only even numbers, I get:</p>\n\n<pre><code>filter isEven [1, 2, 3, 4 ,5 ,6] -- -&gt; 2, 4, 6\n</code></pre>\n\n<p>So far so  good.</p>\n\n<p>My question is: Is there in the function where I can filter by list index? (you can imagine js filter where second parameter is the index).</p>\n\n<p>If not is there any reason why this is not included and how can I do it in a good haskell way?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 3, "creation_date": 1538969667, "post_id": 52694787, "comment_id": 92316597, "body": "Yes, many people can... but why do you ask? What is confusing to you? Have you just tried to run it?"}, {"owner": {"reputation": 827, "user_id": 1276388, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4ae985df9e533570f5ac2ea9bfc25dfd?s=128&d=identicon&r=PG", "display_name": "\u0397\u03bb\u03b5\u03ba\u03c4\u03c1\u03bf\u03bb\u03cc\u03b3\u03bf\u03c2 \u039c\u03b7\u03c7\u03b1\u03bd\u03b9\u03ba\u03cc\u03c2", "link": "https://stackoverflow.com/users/1276388/%ce%97%ce%bb%ce%b5%ce%ba%cf%84%cf%81%ce%bf%ce%bb%cf%8c%ce%b3%ce%bf%cf%82-%ce%9c%ce%b7%cf%87%ce%b1%ce%bd%ce%b9%ce%ba%cf%8c%cf%82"}, "edited": false, "score": 1, "creation_date": 1538972943, "post_id": 52694787, "comment_id": 92317212, "body": "Hint: Look at its type and compare it to <code>show</code>&#39;s."}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 1, "last_activity_date": 1538986874, "creation_date": 1538986874, "answer_id": 52698125, "question_id": 52694787, "link": "https://stackoverflow.com/questions/52694787/difference-between-show-and-print-data-function/52698125#52698125", "title": "Difference between show and print_ data function", "body": "<p>The built in function will show a value like <code>I 3</code> as the string <code>I 3</code>. Yours will only show <code>3</code>.</p>\n\n<p>Similarly, the built-in on <code>S \"abc\"</code> will produce the string <code>S \"abc\"</code>. Yours will only produce <code>abc</code>.</p>\n\n<p>(And similarly for <code>F</code>.)</p>\n\n<p>You can confirm this by trying it on a few cases in GHCi.</p>\n"}], "owner": {"reputation": 31, "user_id": 10470847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e013f8be6a9a49920bb9cf49d390a3b8?s=128&d=identicon&r=PG&f=1", "display_name": "DavidWebb", "link": "https://stackoverflow.com/users/10470847/davidwebb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 52698125, "answer_count": 1, "score": -1, "last_activity_date": 1538986874, "creation_date": 1538967103, "last_edit_date": 1538967297, "question_id": 52694787, "link": "https://stackoverflow.com/questions/52694787/difference-between-show-and-print-data-function", "title": "Difference between show and print_ data function", "body": "<p>Can anyone tell me what the difference between the print_data function below and the built in show function in Haskell?</p>\n\n<pre><code>let print_data v =\n    case v of\n        I a -&gt; show a\n        F v -&gt; show v\n        S v -&gt; v\n</code></pre>\n"}, {"tags": ["haskell", "recursion", "pattern-matching"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 6, "creation_date": 1538949770, "post_id": 52693299, "comment_id": 92313362, "body": "<code>(x:xs) == []</code> is non-sensical, since this can <i>never</i> happen."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 8, "last_activity_date": 1538950030, "creation_date": 1538950030, "answer_id": 52693333, "question_id": 52693299, "link": "https://stackoverflow.com/questions/52693299/im-trying-to-redefine-the-product-definition-in-haskell-i-get-an-error-saying/52693333#52693333", "title": "I&#39;m trying to redefine the product definition in haskell. I get an error saying &quot;Non-exhaustive patterns in function&quot;", "body": "<p>The <code>(x:xs) == []</code> part is non-sensical: with <code>(x:xs)</code> you <em>construct</em> a list with at least one element: <code>x</code> as first element, and <code>xs</code> as a (possibly empty) list of remaining elements. This will therefore <em>always</em> result in <code>False</code>.</p>\n\n<p>The point of a <code>(x:xs)</code> pattern is that it matches <em>non-empty</em> lists. A list is defined as:</p>\n\n<pre><code>data [a] = [] | (a:[a])  -- pseudo-code\n</code></pre>\n\n<p>A list thus has two data constructors:</p>\n\n<ol>\n<li>the empty list <code>[]</code>; and</li>\n<li>the \"cons\" <code>(x:xs)</code> which has a head <code>x</code>, and a tail <code>xs</code>. <code>x</code> is an element of the list, and <code>xs</code> is a list of remaining elements.</li>\n</ol>\n\n<p>You could check if <code>xs</code>, the entire list, is equal to the empty list, and then use <code>head</code> and <code>tail</code>:</p>\n\n<pre><code>product' :: [Integer] -&gt; Integer\nproduct' xs\n  | xs == []  = 1\n  | otherwise = head x * product' (tail xs)\n</code></pre>\n\n<p>But the above is <em>not</em> very elegant, since <code>head</code> and <code>tail</code> are non-total functions (well they error for empty lists), it is thus \"harder\" to determine that this function will always produce an answer.</p>\n"}], "owner": {"reputation": 31, "user_id": 9984523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXuLC.jpg?s=128&g=1", "display_name": "Gagan", "link": "https://stackoverflow.com/users/9984523/gagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 52693333, "answer_count": 1, "score": 2, "last_activity_date": 1538950030, "creation_date": 1538949687, "last_edit_date": 1538949753, "question_id": 52693299, "link": "https://stackoverflow.com/questions/52693299/im-trying-to-redefine-the-product-definition-in-haskell-i-get-an-error-saying", "title": "I&#39;m trying to redefine the product definition in haskell. I get an error saying &quot;Non-exhaustive patterns in function&quot;", "body": "<pre><code>product' :: [Integer] -&gt; Integer\nproduct' (x:xs)\n  | (x:xs) == []   = 1\n  | otherwise = x * (product' (xs))\n</code></pre>\n\n<p>The first one doesn't work and gives the errror. The one below is using the pattern matching technique and works fine. </p>\n\n<pre><code>productP :: [Integer] -&gt; Integer\nproductP [] = 1\nproductP (x:xs) = x * (productP (xs))\n</code></pre>\n"}, {"tags": ["haskell", "yesod", "conduit"], "answers": [{"tags": [], "owner": {"reputation": 30377, "user_id": 369198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71596bb1ca3ba3aa4400c3f407baec9f?s=128&d=identicon&r=PG", "display_name": "Michael Snoyman", "link": "https://stackoverflow.com/users/369198/michael-snoyman"}, "is_accepted": true, "score": 2, "last_activity_date": 1538976044, "creation_date": 1538976044, "answer_id": 52695812, "question_id": 52692508, "link": "https://stackoverflow.com/questions/52692508/yesod-respondsource-from-source-that-has-primmonad-constraint/52695812#52695812", "title": "Yesod respondSource from source that has PrimMonad constraint", "body": "<p>Looks like a pure oversight that <code>HandlerFor</code> isn't an instance of <code>PrimMonad</code>. I've <a href=\"https://github.com/yesodweb/yesod/commit/55e0ca4bc387408e9026c5fc10eb54916bf48522\" rel=\"nofollow noreferrer\">pushed a commit</a> that should address this, and will release to Hackage once CI tells me it's safe.</p>\n"}], "owner": {"reputation": 295, "user_id": 1056228, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7bc36f116ebfb1d3a24e1c38c354c278?s=128&d=identicon&r=PG", "display_name": "Felix Scheinost", "link": "https://stackoverflow.com/users/1056228/felix-scheinost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52695812, "answer_count": 1, "score": 2, "last_activity_date": 1538976044, "creation_date": 1538943395, "question_id": 52692508, "link": "https://stackoverflow.com/questions/52692508/yesod-respondsource-from-source-that-has-primmonad-constraint", "title": "Yesod respondSource from source that has PrimMonad constraint", "body": "<p>I am working on a website using Yesod and am trying to stream  a file from a zip archive into the HTTP response.</p>\n\n<p>I choose the <code>zip</code> package, the relevant function is <a href=\"http://hackage.haskell.org/package/zip-1.2.0/docs/Codec-Archive-Zip.html#v:getEntrySource\" rel=\"nofollow noreferrer\">getEntrySource</a>.</p>\n\n<p>It returns a</p>\n\n<pre><code>ConduitT () ByteString m ()\n</code></pre>\n\n<p>where <code>m</code> has to satisfy</p>\n\n<ul>\n<li><code>PrimMonad m</code> </li>\n<li><code>MonadThrow m</code></li>\n<li><code>MonadResource m</code> </li>\n</ul>\n\n<p>One type that would fit those constraints would be <code>ResourceT IO</code></p>\n\n<p>In order to stream data Yesod provides the <a href=\"https://hackage.haskell.org/package/yesod-core-1.6.0/docs/Yesod-Core-Handler.html#v:respondSource\" rel=\"nofollow noreferrer\">respondSource</a> function that takes a</p>\n\n<p><code>ConduitT () (Flush Builder) (HandlerFor site) ()</code> </p>\n\n<p>My Problem is:</p>\n\n<ul>\n<li><p><code>ResourceT IO</code> would work for <code>getEntrySource</code> but <code>respondSource</code> expects a <code>HandlerFor site</code>. I found the <code>transPipe</code> function but I don't think unwrapping the <code>ResourceT IO</code> and wrapping every chunk in a <code>HandlerFor site</code> is what I want.</p></li>\n<li><p><code>HandlerFor site</code> isn't an instance of <code>PrimMonad</code> and I don't grasp <code>PrimMonad</code> enough to judge whether it would even make sense for it to be.</p></li>\n</ul>\n"}, {"tags": ["haskell", "types"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1538946216, "post_id": 52692398, "comment_id": 92312582, "body": "Is listing 2 a mock-up or is that the real code? Concretely, do you plan to change those type definitions in listing 2? It is weird to see that many wrappers: your types are all variants of <code>()</code>, <code>Identity a</code>, and <code>(a,b)</code>. For such repetitive tasks, one could use Template Haskell or some newtype auto-derivation. If they are only stubs, and you really need different instances, then you will need to write all of them by hand."}, {"owner": {"reputation": 203, "user_id": 9952780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2469a9716383b916f6db1205853858?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Browne", "link": "https://stackoverflow.com/users/9952780/patrick-browne"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1538946563, "post_id": 52692398, "comment_id": 92312661, "body": "@ch1 Listing 2 consists of types identified in the original paper e.g. the type variable &#39;h&#39; is instantiated with the type &#39;House&#39;. The type, classes and instances all compile."}, {"owner": {"reputation": 203, "user_id": 9952780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2469a9716383b916f6db1205853858?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Browne", "link": "https://stackoverflow.com/users/9952780/patrick-browne"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1538946764, "post_id": 52692398, "comment_id": 92312705, "body": "@chi There are as you say better ways of doing this, but I am interested in working with code as near as possible to the original paper."}], "owner": {"reputation": 203, "user_id": 9952780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a2469a9716383b916f6db1205853858?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Browne", "link": "https://stackoverflow.com/users/9952780/patrick-browne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538994645, "creation_date": 1538942620, "last_edit_date": 1538994645, "question_id": 52692398, "link": "https://stackoverflow.com/questions/52692398/haskell-are-all-instances-necessary-for-type-checking", "title": "Haskell: Are all instances necessary for type checking?", "body": "<p>I am studying how type class instances can be used to check the type correctness of methods in complex class hierarchies. This question is related to, but distinct from, a <a href=\"https://cs.stackexchange.com/questions/92366/haskell-type-classes-as-ontological-categories\">previous post</a>. </p>\n\n<p>The <code>BoatHouses</code> and <code>HouseBoats</code> classes are at the bottom of the class hierarchy and thus require instances of the super classes to exist before they themselves can be instantiated. When I attempted  to construct instances for these classes I found that I had to add 72 instances to satisfy the compiler. I arrived at the number 72 by first attempting to make instances for <code>BoatHouses</code> and <code>HouseBoats</code> and then following the compiler messages as to what other classes needed to be instantiated.  Form the <strong>Listing 1</strong> (most method signatures omitted) and <strong>Listing 2</strong> below there are 13 data types, there are 14 classes, 45 type variables. This code is based on a <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=1EA31D76684217BC728F916144BC6C38?doi=10.1.1.109.6853&amp;rep=rep1&amp;type=pdf\" rel=\"nofollow noreferrer\">paper</a>, but actual details and purpose of the code are not important for my question.</p>\n\n<p><strong>Question</strong></p>\n\n<p>To type check methods specified at the lower end of a complex class lattice is it really necessary to instantiate <strong>all</strong> the classes suggested by compiler?</p>\n\n<p><strong>Listing 1</strong></p>\n\n<pre><code>{-# LANGUAGE FlexibleInstances #-}\n{-# LANGUAGE MultiParamTypeClasses #-}\n{-#  OPTIONS_GHC  -Wno-missing-methods #-} \nclass Containers a b where\n     insert :: b -&gt; a b -&gt; a b\n     remove :: b -&gt; a b -&gt; a b\n     whatsIn :: a b -&gt; [b]\n\n\n    class Surfaces a b where\n     put ::  b -&gt; a b -&gt; a b\n     takeOff :: b -&gt; a b -&gt; a b\n     whatsOn :: a b -&gt; [b]\n\n    class Contacts a b where\n     attach :: b -&gt; a b -&gt; a b\n     detach :: b -&gt; a b -&gt; a b\n     whatsAt :: a b -&gt; [b]\n\n    class Paths a b c where\n     move :: c -&gt; a b c -&gt; a b c\n     origin, destination :: a b c -&gt; b\n     whereIs :: a b c -&gt; c -&gt; b\n\n    class People p\n    class HeavyLoads l\n    class Surfaces w o =&gt; WaterBodies w o\n    class Containers h o =&gt; Houses h o\n    class (Surfaces v o, Paths a b (v o)) =&gt; Vehicles v o a b\n    class (Vehicles v o a b, WaterBodies w (v o)) =&gt; Vessels v o a b w\n    class (Vessels v p a b w, People p) =&gt; Boats v p a b w\n    class (Boats v p a b w, HeavyLoads p) =&gt; Barges v p a b w\n    class (Houses h (v p), Boats v p a b w, Contacts w (h (v p))) =&gt; BoatHouses h v p a b w\n    class (Barges v p a b w, Houses v p, People p) =&gt; HouseBoats v p a b w\n</code></pre>\n\n<p><strong>Listing 2</strong></p>\n\n<pre><code>data Person = Person deriving Show\ndata Vehicle a =  Vehicle a deriving Show\ndata Vessel a = Vessel a deriving Show\ndata House a = House a  deriving Show\ndata HouseBoat a = HouseBoat a  deriving Show\ndata Boat a  = Boat a deriving Show\ndata BoatHouse a  = BoatHouse a deriving Show\ndata Barge a = Barge  a deriving Show\ndata Path a b = Path a b deriving Show\ndata Source = Source deriving Show\ndata Destination = Destination deriving Show\ndata Water a = Water a deriving Show\ndata Land a = Land a deriving Show\n</code></pre>\n"}, {"tags": ["haskell", "suffix"], "comments": [{"owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1538949426, "post_id": 52692206, "comment_id": 92313282, "body": "If this was for homework or practice, then @WillemVanOnsem&#39;s answer seems like the right approach, but in actual code, you could consider writing <code>suffixes = tail . tails</code> using <code>tails</code> from <code>Data.List</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539174998, "post_id": 52692237, "comment_id": 92405408, "body": "<code>\\(a:t) -&gt; t:t</code> doesn&#39;t type check, though."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "edited": false, "score": 0, "creation_date": 1539175281, "post_id": 52692237, "comment_id": 92405579, "body": "@MarkNeu: but here it is <code>a@(_:t) -&gt; a : f t</code>, where <code>f</code> has type <code>[a] -&gt; [[a]]</code>. I do not see where this lambda expression is used. It is normall that <code>\\(_:_) -&gt; t:t</code> does not type check, since <code>(:)</code> requires an element, and a list of these elements. Now <code>t</code> can not be an element, and a list of such elements at the same time."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 4, "last_activity_date": 1538942677, "last_edit_date": 1538942677, "creation_date": 1538941563, "answer_id": 52692237, "question_id": 52692206, "link": "https://stackoverflow.com/questions/52692206/proper-suffixes-in-haskell/52692237#52692237", "title": "Proper Suffixes in Haskell", "body": "<p>There are basically two ways to do this. The first approach slightly changes how the function works: in that case the base-case returns an empty list, and the recursive case yields <code>t</code> instead of <code>f</code>:</p>\n\n<pre><code>suffixes :: [a] -&gt; [[a]]\nsuffixes [] = []\nsuffixes (_:t) = t : suffixes t\n</code></pre>\n\n<p>This works since <code>t</code> is the <em>tail</em> of the list, so it is the list, but without the first element. We thus yield this element, and perform recursion on the tail <code>t</code> as well, until we reach the empty list. Since this empty list was already \"yielded\" by the recursive case, we thus do not yield it in the basecase.</p>\n\n<p>Or we can just keep the old <code>suffixes</code> function (but rename it to for example <code>go</code>), and let the outer function \"pre-processes\" the list by \"popping\" an element:</p>\n\n<pre><code>suffixes :: [a] -&gt; [[a]]\nsuffixes [] = []\nsuffixes (_:xs) = go xs\n    where go [] = [] : []\n          go f@(_:t) = f: go t\n</code></pre>\n\n<p>Note that for an empty string, there are <em>no</em> proper suffixes, hence we return an empty list.</p>\n\n<p>This then yield the expected results:</p>\n\n<pre><code>Prelude&gt; suffixes \"\"\n[]\nPrelude&gt; suffixes \"a\"\n[\"\"]\nPrelude&gt; suffixes \"ab\"\n[\"b\",\"\"]\nPrelude&gt; suffixes \"abc\"\n[\"bc\",\"c\",\"\"]\nPrelude&gt; suffixes \"123abc\"\n[\"23abc\",\"3abc\",\"abc\",\"bc\",\"c\",\"\"]\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 7350169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a29f39ab44dae8f625feb700571db4?s=128&d=identicon&r=PG&f=1", "display_name": "Aashray Adhikari", "link": "https://stackoverflow.com/users/7350169/aashray-adhikari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1057, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1538942677, "creation_date": 1538941326, "last_edit_date": 1538941712, "question_id": 52692206, "link": "https://stackoverflow.com/questions/52692206/proper-suffixes-in-haskell", "title": "Proper Suffixes in Haskell", "body": "<p>I want to create a Haskell function that prints the suffixes of a list:</p>\n\n<p>The function should do the following:</p>\n\n<pre><code>&gt; suffixes \"123\"\n[\"23\",\"3\",\"\"]\n&gt; suffixes \"1\"\n[\"\"]\n</code></pre>\n\n<p>I have written the following code:</p>\n\n<pre><code>suffixes :: [a] -&gt; [[a]]\nsuffixes []         = [] : []\nsuffixes f@(_:t) = f: suffixes t \n</code></pre>\n\n<p>The function prints the entered string or character as a suffix and I want to remove it so when I enter \"123\" it should print as above.</p>\n\n<p>Can you help me solve this so that it does not print the entered string as a suffix.</p>\n"}, {"tags": ["haskell", "filter"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538937294, "post_id": 52691646, "comment_id": 92310192, "body": "Yes, but you should <i>not</i> filter on the element <code>x</code>, you filter over the list, and <i>in</i> the filter you take the head."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538937311, "post_id": 52691646, "comment_id": 92310197, "body": "There is however here a case that will error: a list with an empty string."}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538937480, "post_id": 52691646, "comment_id": 92310240, "body": "So instead of taking (x:xs), I should just take xs as a parameter?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538937505, "post_id": 52691646, "comment_id": 92310252, "body": "Do you <i>understand</i> what your <code>onlyLowercase2</code> does? How it works? Please do not just &quot;trail-and-error&quot; until a sensical function shows up."}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538937729, "post_id": 52691646, "comment_id": 92310310, "body": "I think I do, it takes in a list , then checks if the head (x) isLower, and if it&#39;s true, it adds it to the resulting list. I understand that&#39;s why it&#39;s when it comes to the string &quot;Hi&quot; in my example, the filter checks the entire string and adds the lowercase letters to the returning list. What I want to do however, is check only the firstcharacter of the string. I don&#39;t know the syntax to do that."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538937820, "post_id": 52691646, "comment_id": 92310334, "body": "no. The filter should return <code>True</code> or <code>False</code>, if it returns <code>True</code> the <i>corresponding</i> value is added to the result list, if <code>False</code> it is <i>not</i> added."}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538937889, "post_id": 52691646, "comment_id": 92310352, "body": "I understand that part. I want the filter to check the first character only and not the whole string"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538937926, "post_id": 52691646, "comment_id": 92310362, "body": "well then <i>in</i> the filter function, you take the <i>first character</i> of that string. You do not first pre-process the elements that should be filtered."}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538938029, "post_id": 52691646, "comment_id": 92310390, "body": "That&#39;s what I tried to do by doing this (isLower head x), to only check the first character in the string, but that syntax doesn&#39;t work. So I&#39;m just trying to know which syntax does"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1538938089, "post_id": 52691646, "comment_id": 92310399, "body": "But you should <i>not</i> use <code>x</code> of the <i>outer</i> list. Define a lambda expression as filter function, so <code>filter (\\x -&gt; ...)</code>."}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538938266, "post_id": 52691646, "comment_id": 92310456, "body": "I haven&#39;t gotten to the topic on Lamba expressions in the book so let me learn how to use them then try again. :)"}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538938641, "post_id": 52691646, "comment_id": 92310573, "body": "lamdas worked perfectly well. Thank you very much.  This was my final solution. <code>onlyLowercase2 = filter (\\x -&gt; (&quot;&quot; &#47;= x) &amp;&amp; (isLower $ head x))</code>"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 3, "creation_date": 1538939104, "post_id": 52691646, "comment_id": 92310716, "body": "You may also go applicative style like <code>filter ((&amp;&amp;) &lt;$&gt; isLower . head &lt;*&gt; (&#47;=&quot;&quot;))</code> without a lambda."}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "edited": false, "score": 1, "creation_date": 1538939217, "post_id": 52691646, "comment_id": 92310745, "body": "This is way advanced for me haha. (only a couple of weeks into learning haskell), but I will read up on this so I can fully understand everything you&#39;ve written. Thank you so much."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 2, "creation_date": 1538939334, "post_id": 52691646, "comment_id": 92310784, "body": "It&#39;s perfectly explained in <a href=\"http://learnyouahaskell.com/functors-applicative-functors-and-monoids#applicative-functors\" rel=\"nofollow noreferrer\">learnyouahaskell.com/&hellip;</a> FYI."}], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "is_accepted": true, "score": 6, "last_activity_date": 1538939136, "creation_date": 1538939136, "answer_id": 52691911, "question_id": 52691646, "link": "https://stackoverflow.com/questions/52691646/haskell-filtering-a-list-of-strings/52691911#52691911", "title": "Haskell : Filtering a list of strings", "body": "<p>Thanks to Willem Van Onsem's suggestion to use a lambda expression as a filter function, I read further and came up with this 2 line solution.</p>\n\n<pre><code>onlyLowercase2 :: [String] -&gt; [String]\nonlyLowercase2 = filter (\\st-&gt; (\"\" /= st) &amp;&amp; (isLower $ head st))\n</code></pre>\n\n<p>Not sure if it's perfect, but at least it's working.</p>\n"}, {"tags": [], "owner": {"reputation": 1197, "user_id": 4051020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42660a4e623fd8d2c850081291bcb585?s=128&d=identicon&r=PG&f=1", "display_name": "dopamane", "link": "https://stackoverflow.com/users/4051020/dopamane"}, "is_accepted": false, "score": 1, "last_activity_date": 1538981307, "last_edit_date": 1538981307, "creation_date": 1538980894, "answer_id": 52696710, "question_id": 52691646, "link": "https://stackoverflow.com/questions/52691646/haskell-filtering-a-list-of-strings/52696710#52696710", "title": "Haskell : Filtering a list of strings", "body": "<p>Using <code>Data.List</code> and <code>Data.Char</code>:</p>\n\n<pre><code>import Data.List\nimport Data.Char\n\nonlyLowerCase :: [String] -&gt; [String]\nonlyLowerCase = filter (all isLower)\n</code></pre>\n\n<p>I use the <code>all</code> function which checks that <code>all</code> elements of a list satisfy a predicate. In this case <code>all isLower</code> will return true if all letters in a <code>String</code> are lowercase. Then just <code>filter</code> the <code>Strings</code> that are all lowercase. The <a href=\"https://www.haskell.org/onlinereport/haskell2010/haskellpa2.html#haskellch16.html\" rel=\"nofollow noreferrer\">Haskell Report</a> has a good reference for <a href=\"https://www.haskell.org/onlinereport/haskell2010/haskellch20.html#x28-22800020\" rel=\"nofollow noreferrer\"><code>List</code></a> and <a href=\"https://www.haskell.org/onlinereport/haskell2010/haskellch16.html#x24-21100016.2\" rel=\"nofollow noreferrer\"><code>Char</code></a> functions among other useful libraries.</p>\n"}], "owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 0, "accepted_answer_id": 52691911, "answer_count": 2, "score": 1, "last_activity_date": 1538981307, "creation_date": 1538937243, "question_id": 52691646, "link": "https://stackoverflow.com/questions/52691646/haskell-filtering-a-list-of-strings", "title": "Haskell : Filtering a list of strings", "body": "<p>I have a list of Strings I want to filter through. My predicate is that the string should begin with an uppercase letter.</p>\n\n<p>eg. when I run <code>onlyLowercase [\"boy\", \"girl\", \"Hi\"]</code></p>\n\n<p>it should give me a list of <code>[\"boy\", \"girl\"]</code></p>\n\n<p>I can do it using pattern matching and guards, but I'm using the learnyouahaskell (<a href=\"http://learnyouahaskell.com\" rel=\"nofollow noreferrer\">http://learnyouahaskell.com</a>) book and I came across the topic on higher-order functions. I read about the filter function and thought it could achieve what I want to do in far fewer lines of code. </p>\n\n<p><strong>Using pattern Matching/Guards</strong> (This works well and solves my problem)</p>\n\n<pre><code>onlyLowercase :: [[Char]] -&gt; [[Char]]\nonlyLowercase [] = []\nonlyLowercase (x:xs) \n  | isLower (head x) = x : onlyLowercase xs  \n  | otherwise = onlyLowercase xs\n</code></pre>\n\n<p><strong>Using the filter function</strong></p>\n\n<pre><code>onlyLowercase2 :: [String] -&gt; [String]\nonlyLowercase2 [] = []\nonlyLowercase2 (x:xs) = filter isLower x : onlyLowercase2 xs\n</code></pre>\n\n<p>Unfortunately, when I run <code>onlyLowercase2 [\"boy\", \"girl\", \"Hi\"]</code>,\nI get a list of <code>[\"boy\", \"girl\", \"i\"]</code>.</p>\n\n<p>I want to know if there's a way I can filter my list of strings using the first character in my string (without creating any auxiliary function that could check the String and return true if the first letter is lowercase).</p>\n\n<p>I also tried using</p>\n\n<pre><code> onlyLowercase2 (x:xs) = filter (isLower head x) : onlyLowercase2 xs\n</code></pre>\n\n<p>but that didn't even compile. Basically, I'm just trying to figure out how the filter function can be used on a list of lists. Thank you, in advance, for any assistance rendered. </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1538924740, "post_id": 52689791, "comment_id": 92306449, "body": "They aren&#39;t actually there, they&#39;re part of the representation of any string."}, {"owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "edited": false, "score": 0, "creation_date": 1538924887, "post_id": 52689791, "comment_id": 92306492, "body": "Do you mean it is converting the upper case &quot;H&quot; into lower case as well?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538924889, "post_id": 52689791, "comment_id": 92306493, "body": "What do you mean by &quot;doing&quot;? Running the expression in ghci?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1538925671, "post_id": 52689791, "comment_id": 92306731, "body": "What is the difference between what you get and what you expect?"}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1538925680, "post_id": 52689791, "comment_id": 92306735, "body": "You might find <a href=\"https://stackoverflow.com/a/49316859/2751851\">this answer of mine</a> somewhat relevant."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1538928017, "post_id": 52689791, "comment_id": 92307464, "body": "The quotes are there for essentially the same reason that you write <code>reverse (&quot;Hello how are you&quot;)</code> and not <code>reverse (Hello how are you)</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538928378, "post_id": 52689791, "comment_id": 92307563, "body": "Those quotes are <i>not</i> part of the string. There is a difference between the <i>content</i> of a string, and its <i>representation</i>."}], "answers": [{"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 5, "last_activity_date": 1538928113, "creation_date": 1538928113, "answer_id": 52690327, "question_id": 52689791, "link": "https://stackoverflow.com/questions/52689791/haskell-function-that-takes-input-as-a-string-and-returns-same-sequence-of-chara/52690327#52690327", "title": "Haskell function that takes input as a String and returns same sequence of characters in reverse order", "body": "<p>I assume you're referring to this:</p>\n\n<pre><code>GHCi, version 8.2.1: http://www.haskell.org/ghc/  :? for help\nLoaded GHCi configuration from /home/sagemuej/.ghci\nLoaded GHCi configuration from /home/sagemuej/.ghc/ghci.conf\nPrelude&gt; reverse \"Hello how are you\"\n\"uoy era woh olleH\"\n</code></pre>\n\n<p>...when actually you would like to have the reply without any quotes around it. Well, GHCi passes all evaluation results through <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:print\" rel=\"noreferrer\"><code>print</code></a>, which in turn uses the <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Show\" rel=\"noreferrer\"><code>Show</code> typeclass</a> to transform any value into a string \u2013 notably, <em>a string that's valid Haskell source code</em>, and could as such be used to recreate the value. (That's extremely useful in prototyping, and it's not limited to strings but can also handle all sorts of other types.)</p>\n\n<p>Now, <code>\"uoy era woh olleH\"</code> clearly is valid Haskell source code</p>\n\n<pre><code>Prelude&gt; \"uoy era woh olleH\"\n\"uoy era woh olleH\"\n</code></pre>\n\n<p>but without the quotes it wouldn't be:</p>\n\n<pre><code>Prelude&gt; uoy era woh olleH\n\n&lt;interactive&gt;:3:1: error:\n    Variable not in scope: uoy :: t0 -&gt; t1 -&gt; t2 -&gt; t\n\n&lt;interactive&gt;:3:5: error: Variable not in scope: era\n\n&lt;interactive&gt;:3:9: error: Variable not in scope: woh\n\n&lt;interactive&gt;:3:13: error: Variable not in scope: olleH\n</code></pre>\n\n<p>that's why GHCi does this. But if you don't want to use the reply as Haskell code, then you also don't need the <code>show</code> wrapper. To just print <em>the raw content of strings</em>, you'll need to explicitly use the IO action whose purpose this is: <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:putStrLn\" rel=\"noreferrer\"><code>putStrLn</code></a></p>\n\n<pre><code>Prelude&gt; putStrLn $ reverse \"Hello how are you\"\nuoy era woh olleH\n</code></pre>\n\n<p><sup>(If you don't know what <code>$</code> is yet: read it as a shorthand notation for <code>putStrLn (reverse \"Hello how are you\")</code>.)</sup></p>\n"}], "owner": {"reputation": 11, "user_id": 10469240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e94b53cb61e66e02b5e26b24aed5cb4?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/10469240/jimmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538985343, "creation_date": 1538924625, "last_edit_date": 1538985343, "question_id": 52689791, "link": "https://stackoverflow.com/questions/52689791/haskell-function-that-takes-input-as-a-string-and-returns-same-sequence-of-chara", "title": "Haskell function that takes input as a String and returns same sequence of characters in reverse order", "body": "<p>The issue is, I am doing:</p>\n\n<p><code>reverse (\"Hello how are you\")</code> \nand getting output as: <code>\"uoy era woh olleh\"</code> \nbut the expected output is: <code>uoy era woh olleh</code></p>\n\n<p>Not sure how to remove quotes(\") from the above string.</p>\n"}, {"tags": ["string", "list", "haskell", "char"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1538922220, "post_id": 52689301, "comment_id": 92305756, "body": "&quot;<i>run my isValid function on <b>all</b> chars of the string</i>&quot; --&gt; <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:all\" rel=\"nofollow noreferrer\"><code>all</code></a>"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1538923398, "post_id": 52689301, "comment_id": 92306079, "body": "As a style suggestion, you don&#39;t have to write <code>f .. | condition = True ; | otherwise = False</code>. Your <code>condition</code> already evaluated to the wanted boolean, so you can simply write <code>f .. = condition</code>, without guards."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1538923356, "post_id": 52689466, "comment_id": 92306064, "body": "Whenever one of your functions returns <code>True</code> or <code>False</code> explicitly, it can (probably) be simplified."}], "tags": [], "owner": {"reputation": 51, "user_id": 10469063, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vop8DKYNfic/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUY7Y_xQn3KTseyhASiGPONndgX6w/mo/photo.jpg?sz=128", "display_name": "Szetyi", "link": "https://stackoverflow.com/users/10469063/szetyi"}, "is_accepted": false, "score": 3, "last_activity_date": 1538922565, "creation_date": 1538922565, "answer_id": 52689466, "question_id": 52689301, "link": "https://stackoverflow.com/questions/52689301/how-to-check-for-each-char-of-a-string-in-haskell/52689466#52689466", "title": "How to check for each char of a string in Haskell", "body": "<p>Okay, i figured it out:</p>\n\n<pre><code>isValidUsername :: [Char] -&gt; Bool\nisValidUsername x\n     | False `elem` (map isValid x) = False\n     | otherwise                    = True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1538922576, "creation_date": 1538922576, "answer_id": 52689469, "question_id": 52689301, "link": "https://stackoverflow.com/questions/52689301/how-to-check-for-each-char-of-a-string-in-haskell/52689469#52689469", "title": "How to check for each char of a string in Haskell", "body": "<p>Well if you want <em>all</em> the elements to satisfy the <code>isValid'</code> function, you can use the <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:all\" rel=\"nofollow noreferrer\"><strong><code>all :: (a -&gt; Bool) -&gt; [a] -&gt; Bool</code></strong></a> function, so you can rewrite your function to:</p>\n\n<pre><code>isValidUsername :: [Char] -&gt; Bool\nisValidUsername x = all isValid' x\n</code></pre>\n\n<p>or even shorter:</p>\n\n<pre><code>isValidUsername :: [Char] -&gt; Bool\nisValidUsername = all isValid'\n</code></pre>\n\n<p>Note that here it means that the <em>empty string</em> <code>\"\"</code> is a valid username as well, since for an empty string, all characters (there are no characters) are in the alphanumerical range.</p>\n"}], "owner": {"reputation": 51, "user_id": 10469063, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vop8DKYNfic/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUY7Y_xQn3KTseyhASiGPONndgX6w/mo/photo.jpg?sz=128", "display_name": "Szetyi", "link": "https://stackoverflow.com/users/10469063/szetyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2488, "favorite_count": 1, "accepted_answer_id": 52689469, "answer_count": 2, "score": 1, "last_activity_date": 1538922576, "creation_date": 1538921429, "last_edit_date": 1538922427, "question_id": 52689301, "link": "https://stackoverflow.com/questions/52689301/how-to-check-for-each-char-of-a-string-in-haskell", "title": "How to check for each char of a string in Haskell", "body": "<p>I've got a homework for a function that checks if a username is valid or not. Allowed chars are underscore, letters, and digits. I'm not allowed to use indexing (!!) and Length</p>\n\n<p>My code so far:</p>\n\n<pre><code>isValid' :: Char -&gt; Bool\nisValid' x\n     | x == '_'    = True\n     | x `elem` ['0'..'9'] = True\n     | x `elem` ['a'..'z'] = True\n     | x `elem` ['A'..'Z'] = True\n     | otherwise           = False\n\nisValidUsername :: [Char] -&gt; Bool\nisValidUsername x\n     | map isValid' x = True\n     | otherwise     = False\n</code></pre>\n\n<p>I want to run my isValid function on all chars of the string i put in isValidUsername. For example:</p>\n\n<p><code>isValidUsername \"MyUsername_123\"</code> should return True</p>\n\n<p><code>isValidUsername \"not@v@lidusern@me* *2\"</code> should return False</p>\n\n<p>I just can't figure out how to run through all the chars of my string.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538914991, "post_id": 52688465, "comment_id": 92303918, "body": "Post the <i>full</i> traceback?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1538917560, "post_id": 52688465, "comment_id": 92304523, "body": "As a general suggestion, instead of letting GHC infer the type for you, and then report inconsistencies, it&#39;s usually better to annotate top-level bindings with explicit types. In that way, when the inferred type does not match the intended one, a type error is raised as early as possible, where it is easier to fix. Indeed, most Haskellers start coding a function by writing its type."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1538915712, "creation_date": 1538915712, "answer_id": 52688535, "question_id": 52688465, "link": "https://stackoverflow.com/questions/52688465/haskell-cannot-construct-the-infinite-type/52688535#52688535", "title": "Haskell: cannot construct the infinite type", "body": "<p>Your infinite type arises from the fact that you call <code>maxweekends</code> with <code>x y</code> and <code>x ys</code>. Since the type of <code>maxweekends :: Eq b =&gt; [(a, b)] -&gt; [b] -&gt; Int</code> specifies that given the \"second\" parameter is of type <code>[b]</code>, then the first parameter is a type of <code>[(a, b)]</code>, this means that <code>x</code> should be <code>[(a, b)]</code> (for the first call) and <code>[(a, [b])]</code> (for the second call) at the same time, which is impossible.</p>\n\n<p>I think it might be better to first <em>restructure</em> this. Let us first construct a function that looks like:</p>\n\n<pre><code>groupLength :: Eq b =&gt; Int -&gt; b -&gt; [(a, b)] -&gt; Int\ngroupLength d _ [] = d\ngroupLength _ x ys = length (filter ((x==) . snd) ys)\n</code></pre>\n\n<p>This will thus for a given \"month\" <code>x</code> obtain the number of elements in the list with as second item of the tuple that \"month\".</p>\n\n<p>Now we can generate an \"argmax\" that calculates for which <code>x</code>, <code>f x</code> produces a maximum value:</p>\n\n<pre><code>argmax :: Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; Maybe (a, b)\nargmax _ [] = Nothing\nargmax f (x:xs) = Just (go x (f x) xs)\n    where go x y [] = (x, y)\n          go x y (x2:xs) | y &lt;= y2 = go x y xs\n                         | otherwise = go x2 y2 xs\n              where y2 = f x2\n</code></pre>\n\n<p>So now it is only a matter of combining the the <code>groupLength</code> (which is an abstract version of your <code>maxweekends</code> with <code>argmax</code> (which is more or less what your <code>func</code> is after). I leave this as an exercise.</p>\n"}], "owner": {"reputation": 13, "user_id": 6499650, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-En_2X4H3rHg/AAAAAAAAAAI/AAAAAAAABLU/tTJbT9d1dYY/photo.jpg?sz=128", "display_name": "MrOleg", "link": "https://stackoverflow.com/users/6499650/mroleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 52688535, "answer_count": 1, "score": 1, "last_activity_date": 1538915712, "creation_date": 1538914939, "last_edit_date": 1538915469, "question_id": 52688465, "link": "https://stackoverflow.com/questions/52688465/haskell-cannot-construct-the-infinite-type", "title": "Haskell: cannot construct the infinite type", "body": "<p>I got a list of tuples (day:month) and want to find the month with the biggest amount of days.</p>\n\n<p>I made a function that accepts my list of tuples and list of months (or just 1) to check and returns the maximum amount of dates in one month in specified period</p>\n\n<pre><code>maxweekends x [] = 0\nmaxweekends x [n] = length (filter ((==n).snd) x)\nmaxweekends x (y:ys) = max (maxweekends x [y]) (maxweekends x ys)\n</code></pre>\n\n<p>Then I wrote some simple function to use it, but I cant compile it because of \"cannot construct the infinite type\" error. I already spent a few hours with this error but I just cant understand what is wrong.</p>\n\n<pre><code>func x [] = 0\nfunc x (y:ys)\n    | maxweekends x y &lt; maxweekends x ys = func x ys\n    | otherwise =  y\n</code></pre>\n\n<p>In theory it should call itself until there is no month with bigger amount of dates and then just return answer.</p>\n\n<p>Thanks.</p>\n\n<p>Edit: <a href=\"https://i.stack.imgur.com/X4pw1.png\" rel=\"nofollow noreferrer\">here is traceback of error</a></p>\n"}, {"tags": ["haskell", "free-monad", "newtype", "deriving"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538910342, "post_id": 52687855, "comment_id": 92302822, "body": "Shouldn&#39;t this be <code>instance MonadFree f p ...</code> instead of <code>deriving instance ...</code>.."}, {"owner": {"reputation": 155, "user_id": 1626022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa95f10d1947f140a3e324576fea114?s=128&d=identicon&r=PG", "display_name": "tomphp", "link": "https://stackoverflow.com/users/1626022/tomphp"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538910542, "post_id": 52687855, "comment_id": 92302885, "body": "It&#39;s the same error either way."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 1626022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa95f10d1947f140a3e324576fea114?s=128&d=identicon&r=PG", "display_name": "tomphp", "link": "https://stackoverflow.com/users/1626022/tomphp"}, "edited": false, "score": 0, "creation_date": 1538929034, "post_id": 52689692, "comment_id": 92307756, "body": "Thanks for your help. Sadly I get the following when trying to derive MonadTrans &quot;Can&#39;t make a derived instance of \u2018MonadTrans (ApplicationStack s r)\u2019 with the newtype strategy: cannot eta-reduce the representation type enough In the newtype declaration for \u2018ApplicationStack\u2019&quot;"}, {"owner": {"reputation": 3016, "user_id": 3190654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c321c5241605255cae9ecf3fb2dffc0b?s=128&d=identicon&r=PG", "display_name": "bergey", "link": "https://stackoverflow.com/users/3190654/bergey"}, "reply_to_user": {"reputation": 155, "user_id": 1626022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa95f10d1947f140a3e324576fea114?s=128&d=identicon&r=PG", "display_name": "tomphp", "link": "https://stackoverflow.com/users/1626022/tomphp"}, "edited": false, "score": 0, "creation_date": 1539025822, "post_id": 52689692, "comment_id": 92343513, "body": "I would define the <code>MonadTrans</code> instance manually, not try to derive that.  Sorry that I wasn&#39;t clear about that in my answer.  I can&#39;t explain how GHC newtype deriving works in detail; I think I&#39;ve just seen errors like that enough to accept that it won&#39;t work for newtypes that shuffle type parameters like this."}], "tags": [], "owner": {"reputation": 3016, "user_id": 3190654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c321c5241605255cae9ecf3fb2dffc0b?s=128&d=identicon&r=PG", "display_name": "bergey", "link": "https://stackoverflow.com/users/3190654/bergey"}, "is_accepted": false, "score": 1, "last_activity_date": 1538923985, "creation_date": 1538923985, "answer_id": 52689692, "question_id": 52687855, "link": "https://stackoverflow.com/questions/52687855/deriving-monadfree-from-a-newtype-with-a-transformer-stack/52689692#52689692", "title": "Deriving MonadFree from a newtype with a transformer stack", "body": "<p>The <a href=\"https://hackage.haskell.org/package/free-5.1/docs/Control-Monad-Free.html\" rel=\"nofollow noreferrer\">definition of MonadFree</a> provides a default definition of <code>wrap</code>:</p>\n\n<p><code>wrap :: (m ~ t n, MonadTrans t, MonadFree f n, Functor f) =&gt; f (m a) -&gt; m a</code></p>\n\n<p>GHC is trying to use this definition, but cannot find a <code>MonadTrans</code> instance.</p>\n\n<p>You can define a <code>MonadTrans</code> instance for <code>ApplicationStack</code>, or you can guide GHC to base the <code>MonadFree</code> instance for <code>ApplicationStack</code> on the <code>MonadFree</code> instance for <code>StateT</code>, instead.  If you're using GHC 8.2 or newer, the easiest way to do the later is with <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#deriving-strategies\" rel=\"nofollow noreferrer\">deriving strategies</a>.  It looks something like</p>\n\n<p><code>deriving newtype instance MonadFree f p =&gt; MonadFree f (ApplicationStack s r p)</code></p>\n\n<p>With older GHC, it takes some fiddling to get the right extensions active in the right modules.</p>\n"}], "owner": {"reputation": 155, "user_id": 1626022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fa95f10d1947f140a3e324576fea114?s=128&d=identicon&r=PG", "display_name": "tomphp", "link": "https://stackoverflow.com/users/1626022/tomphp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538923985, "creation_date": 1538910261, "last_edit_date": 1538911972, "question_id": 52687855, "link": "https://stackoverflow.com/questions/52687855/deriving-monadfree-from-a-newtype-with-a-transformer-stack", "title": "Deriving MonadFree from a newtype with a transformer stack", "body": "<p>I\u2019m trying to derive <code>MonadFree</code> from a <code>newtype</code> and I just can\u2019t work it out. My current code is:</p>\n\n<pre><code>newtype ApplicationStack s r p m =\n  ApplicationStack { runApplication :: StateT s (ReaderT r p) m }\n  deriving (Functor, Applicative, Monad, MonadState s, MonadReader r)\n\nderiving instance MonadFree f p =&gt; MonadFree f (ApplicationStack s r p)\n</code></pre>\n\n<p>and I get</p>\n\n<pre><code>\u2022 Could not deduce (transformers-0.5.5.0:Control.Monad.Trans.Class.MonadTrans\n                      (ApplicationStack s r))\n    arising from a use of \u2018Control.Monad.Free.Class.$dmwrap\u2019\n  from the context: MonadFree f p\n    bound by the instance declaration\n    at src/Application/Commands/Base.hs:41:10-62\n\u2022 In the expression:\n    Control.Monad.Free.Class.$dmwrap @(f) @(ApplicationStack s r p)\n  In an equation for \u2018Control.Monad.Free.Class.wrap\u2019:\n      Control.Monad.Free.Class.wrap\n        = Control.Monad.Free.Class.$dmwrap @(f) @(ApplicationStack s r p)\n  In the instance declaration for\n    \u2018MonadFree f (ApplicationStack s r p)\u2019\n   |\n41 | instance MonadFree f p =&gt; MonadFree f (ApplicationStack s r p)\n   |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>If anyone has any suggestions that would be really appreciated.</p>\n"}, {"tags": ["haskell", "functor", "haskell-lens", "unification"], "answers": [{"comments": [{"owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "edited": false, "score": 0, "creation_date": 1538936427, "post_id": 52688483, "comment_id": 92309948, "body": "Thanks for the thorough answer! I had a hunch <code>doesNotWork2</code> failed for the reason you mentioned, and I did not know about the <code>A...</code> family. I probably don&#39;t need the rank-2 polymorphism for most of my use cases, so this is perfect!"}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 6, "last_activity_date": 1538915250, "creation_date": 1538915250, "answer_id": 52688483, "question_id": 52687320, "link": "https://stackoverflow.com/questions/52687320/is-it-impossible-to-let-bind-a-composite-lens/52688483#52688483", "title": "Is it impossible to let-bind a composite lens?", "body": "<p>A rule of thumb that simplifies many things is to not take <code>Lens</code> (or <code>Lens'</code>, or <code>Setter</code> etc.) as function arguments unless you really need it the optic-polymorphism, but instead take the <code>ALens</code> (or <code>ALens'</code> or <code>ASetter</code>) version, which avoids the Rank-2 polymorphism issues.</p>\n\n<p>The problem is that if you give <code>compositeLens</code> a name in a <code>do</code> block, then it must have a type that can't be inferred from its context anymore. But <code>Lens' C A</code> is a polymorphic type under the hood, and this complicates type inferrence considerably. It <em>is</em> actually ok if you give an explicit signature:</p>\n\n<pre><code>doesActuallyWork2 :: ( Member (Reader C) e ) =&gt; Lens' C B -&gt; Eff e A\ndoesActuallyWork2 bLens = do\n  let compositeLens :: Lens' C A\n      compositeLens = bLens . a\n  askLensed compositeLens\n</code></pre>\n\n<p>Your version <code>doesNotWork2</code> didn't work because an definition with in-line signature is flipped over to the RHS, like</p>\n\n<pre><code>doesNotWork2 :: ( Member (Reader C) e ) =&gt; Lens' C B -&gt; Eff e A\ndoesNotWork2 bLens = do\n  let compositeLens = bLens . a :: Lens' C A\n  askLensed compositeLens\n</code></pre>\n\n<p>...where <code>compositeLens</code> again tries to specialise the just-given type to one particular functor, which can't be done.</p>\n\n<p>The more straightforward solution is to avoid this local polymorphism entirely, which yout don't actually need: if you take an <code>ALens'</code> as the argument, the local binding automatically takes on the monomorphic type: like</p>\n\n<pre><code>worksEasily :: ( Member (Reader C) e ) =&gt; ALens' C B -&gt; Eff e A\nworksEasily bLens = do\n  let compositeLens = bLens . a\n  askLensed compositeLens\n</code></pre>\n\n<p>Actually not quite this; it turns out you don't want <code>ALens'</code> here but <code>Getting</code>. The easiest way to find this out it to remove the signature to <code>askLensed</code> and let the compiler tell you what it infers, then work backwards from that.</p>\n\n<pre><code>askLensed :: ( Member (Reader r) e ) =&gt; Getting a r a -&gt; Eff e a\naskLensed l = view l &lt;$&gt; ask\n\nworksEasily :: ( Member (Reader r) e ) =&gt; Getting A r B -&gt; Eff e A\nworksEasily bLens = do\n  let compositeLens = bLens . a\n  askLensed compositeLens\n</code></pre>\n"}], "owner": {"reputation": 8687, "user_id": 553003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/suU4H.png?s=128&g=1", "display_name": "Ptival", "link": "https://stackoverflow.com/users/553003/ptival"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 52688483, "answer_count": 1, "score": 3, "last_activity_date": 1538915250, "creation_date": 1538905924, "question_id": 52687320, "link": "https://stackoverflow.com/questions/52687320/is-it-impossible-to-let-bind-a-composite-lens", "title": "Is it impossible to let-bind a composite lens?", "body": "<p>I'm having trouble understanding whether the following is feasible by helping the type-checker, or just outright impossible.\nThe setup is slightly arbitrary, I just need some nested data types with lenses, here called <code>A</code>, <code>B</code>, <code>C</code>.</p>\n\n<p>My problem is that I can use the composite lens <code>(bLens . a)</code> if I immediately call something like <code>view</code> using it, but if I try to let-bind it and give it a name, I get error messages.</p>\n\n<pre><code>{-# LANGUAGE FlexibleContexts #-}\n{-# LANGUAGE MonoLocalBinds #-}\n{-# LANGUAGE RankNTypes #-}\n{-# LANGUAGE ScopedTypeVariables #-}\n{-# LANGUAGE TemplateHaskell #-}\n\nmodule Debug where\n\nimport Control.Eff\nimport Control.Eff.Reader.Strict\nimport Control.Lens\n\ndata A = A\n\ndata B = B\n  { _a :: A\n  }\nmakeLenses ''B\n\ndata C = C\n  { _b :: B\n  }\nmakeLenses ''C\n\naskLensed :: ( Member (Reader r) e ) =&gt; Lens' r a -&gt; Eff e a\naskLensed l = view l &lt;$&gt; ask\n\nworks :: ( Member (Reader C) e ) =&gt; Lens' C B -&gt; Eff e A\nworks bLens = do\n  askLensed (bLens . a)\n\ndoesNotWork :: ( Member (Reader C) e ) =&gt; Lens' C B -&gt; Eff e A\ndoesNotWork bLens = do\n  let compositeLens = bLens . a\n  askLensed compositeLens\n\ndoesNotWork2 :: ( Member (Reader C) e ) =&gt; Lens' C B -&gt; Eff e A\ndoesNotWork2 bLens = do\n  let compositeLens :: Lens' C A = bLens . a\n  askLensed compositeLens\n\nbutThisIsFine :: Lens' C B -&gt; Lens' C A\nbutThisIsFine bLens =\n  let compositeLens = bLens . a in compositeLens\n</code></pre>\n\n<p>The error messages being:</p>\n\n<pre><code>\u2022 Could not deduce (Functor f0) arising from a use of \u2018bLens\u2019\n  from the context: Member (Reader C) e\n    bound by the type signature for:\n               doesNotWork :: forall (e :: [* -&gt; *]).\n                              Member (Reader C) e =&gt;\n                              Lens' C B -&gt; Eff e A\n    at /home/.../.stack-work/intero/interoW51bOk-TEMP.hs:32:1-62\n  The type variable \u2018f0\u2019 is ambiguous\n  Relevant bindings include\n    compositeLens :: (A -&gt; f0 A) -&gt; C -&gt; f0 C\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>\u2022 Couldn't match type \u2018f0\u2019 with \u2018f\u2019\n    because type variable \u2018f\u2019 would escape its scope\n  This (rigid, skolem) type variable is bound by\n    a type expected by the context:\n      Lens' C A\n    at /home/.../.stack-work/intero/interoW51bOk-TEMP.hs:35:3-25\n  Expected type: (A -&gt; f A) -&gt; C -&gt; f C\n    Actual type: (A -&gt; f0 A) -&gt; C -&gt; f0 C\n\u2022 In the first argument of \u2018askLensed\u2019, namely \u2018compositeLens\u2019\n  In a stmt of a 'do' block: askLensed compositeLens\n  In the expression:\n    do let compositeLens = bLens . a\n       askLensed compositeLens\n\u2022 Relevant bindings include\n    compositeLens :: (A -&gt; f0 A) -&gt; C -&gt; f0 C\n</code></pre>\n\n<p>I have tried adding type signatures, with explicit quantification of the <code>f</code> and <code>Functor</code> constraints , but to no success so far.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "edited": false, "score": 5, "creation_date": 1538879361, "post_id": 52684964, "comment_id": 92297532, "body": "I\u2019d argue the \u201cHaskell way of thinking\u201d would actually take fault with the question, since <code>myLast</code> is clearly partial\u2014what does <code>myLast []</code> mean? Therefore, the result type should be widened to <code>Maybe a</code> or the argument type should be narrowed to <code>NonEmpty a</code>, but perhaps that isn\u2019t a very helpful response to your question."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1538897832, "post_id": 52684964, "comment_id": 92300128, "body": "When dealing with list type, <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:head\" rel=\"nofollow noreferrer\">head</a>, <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:tail\" rel=\"nofollow noreferrer\">tail</a>, <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:init\" rel=\"nofollow noreferrer\">init</a> and <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:last\" rel=\"nofollow noreferrer\">last</a> are your friends yet as mentioned, lists are not as efficient as arrays in some other languages. There are better data structs in Haskell. Have a look at <a href=\"https://stackoverflow.com/questions/9611904/haskell-lists-arrays-vectors-sequences\" title=\"haskell lists arrays vectors sequences\">stackoverflow.com/questions/9611904/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 521, "user_id": 1710649, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/6fs5k.png?s=128&g=1", "display_name": "Aearnus", "link": "https://stackoverflow.com/users/1710649/aearnus"}, "edited": false, "score": 2, "creation_date": 1538892408, "post_id": 52685088, "comment_id": 92299195, "body": "Do note that <code>(!!)</code> is also a partial function. Avoiding <code>(!!)</code> is generally good form -- so you can explicitly handle the related edge cases."}], "tags": [], "owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "is_accepted": true, "score": 9, "last_activity_date": 1538881167, "creation_date": 1538881167, "answer_id": 52685088, "question_id": 52684964, "link": "https://stackoverflow.com/questions/52684964/haskell-style-pattern-matching-vs-more-intuitive-solutions/52685088#52685088", "title": "Haskell style: Pattern matching vs. more intuitive solutions", "body": "<p>A few things I can think of:</p>\n\n<ul>\n<li><p><code>(!!)</code> and <code>length</code> are ultimately implemented using recursion over the structure of the list. That being so, it can be a worthwhile learning exercise to implement those basic functions using explicit recursion.</p></li>\n<li><p>Keep in mind that, under the hood, the retrieval of the last element is not direct. Since we are dealing with linked lists, <code>length</code> has to go through all elements of the lists, and <code>(!!)</code> has to go through all elements up to the desired index. That being so, <code>lst !! (length lst - 1)</code> runs through the whole list twice, rather than once. (This is one of the reasons why, as a rule of thumb, <code>length</code> is better avoided unless you actually need to know the number of elements in and of itself, and not just as a proxy to something else.)</p></li>\n<li><p>Pattern matching is a neat way of stating facts about the structure of data types. If, while consuming a list recursively, you match a <code>[x]</code> pattern (or, equivalently, <code>x : []</code> -- an element consed to the empty list), you know that <code>x</code> is the last element. In a way, matching <code>[x]</code> involves one less level of indirection than accessing the list element at index <code>length lst - 1</code>, as it only deals with the structure of the list, without requiring an indexing scheme to be bolted on the top of it.</p></li>\n</ul>\n\n<p>With all that said, there is something fundamentally right about your feeling that explicit recursion feels \"almost brute-force\". In time, you'll find out about folds, mapping functions, and other ways to capture and abstract common recursive patterns, making it possible to write in a more fluent manner.</p>\n"}], "owner": {"reputation": 1307, "user_id": 1810854, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8d0cf43e5ce140187294075dd02796cc?s=128&d=identicon&r=PG", "display_name": "Jess", "link": "https://stackoverflow.com/users/1810854/jess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 52685088, "answer_count": 1, "score": 3, "last_activity_date": 1538881167, "creation_date": 1538879072, "question_id": 52684964, "link": "https://stackoverflow.com/questions/52684964/haskell-style-pattern-matching-vs-more-intuitive-solutions", "title": "Haskell style: Pattern matching vs. more intuitive solutions", "body": "<p>I'm just starting out with Haskell, so I'm trying to wrap my head around the \"Haskell way of thinking.\" Is there a reason to use pattern matching to solve Problem 1 <a href=\"https://wiki.haskell.org/99_questions/1_to_10\" rel=\"nofollow noreferrer\">here</a> basically by unwrapping the whole list and calling the function recursively, instead of just retrieving the last element directly like <code>myLast lst = lst !! ((length lst) - 1)</code>? It seems almost brute-force, but I assume it's just my lack of familiarity here.</p>\n"}, {"tags": ["haskell", "recursion", "subset"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1538876331, "post_id": 52684771, "comment_id": 92297201, "body": "What&#39;s the smallest input you don&#39;t understand the workings of? Do you understand how <code>subsets [3]</code> works? Do you understand how <code>subsets [2,3]</code> works?"}, {"owner": {"reputation": 83, "user_id": 10042733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c983b0d98548ac0e842bb0580e87fbc6?s=128&d=identicon&r=PG&f=1", "display_name": "EchoNano", "link": "https://stackoverflow.com/users/10042733/echonano"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1538876943, "post_id": 52684771, "comment_id": 92297261, "body": "I get how <code>subsets [3]</code>  works but anything more than one integer in a list and I don&#39;t understand. Also how does <code>zs &lt;- [ [ [] ], (3:[ [] ]) }</code> equivilate to <code>zs</code> being <code>[[],[3]]</code>"}, {"owner": {"reputation": 83, "user_id": 10042733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c983b0d98548ac0e842bb0580e87fbc6?s=128&d=identicon&r=PG&f=1", "display_name": "EchoNano", "link": "https://stackoverflow.com/users/10042733/echonano"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1538877233, "post_id": 52684771, "comment_id": 92297296, "body": "For clarification on what I&#39;m asking above: I assume that <code>subset []</code> returns <code>[ [] ]</code> which is a list of an empty list, but the final output only shows it as a single list <code>[]</code>. Output: <code>[ [], [3] ]</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538896904, "post_id": 52684771, "comment_id": 92299970, "body": "For completeness, the troll version: <code>subsets = filterM (return [True, False])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 10042733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c983b0d98548ac0e842bb0580e87fbc6?s=128&d=identicon&r=PG&f=1", "display_name": "EchoNano", "link": "https://stackoverflow.com/users/10042733/echonano"}, "edited": false, "score": 0, "creation_date": 1538884646, "post_id": 52685138, "comment_id": 92298253, "body": "Thank You so much!!! I understand now how I was looking a the code wrong."}], "tags": [], "owner": {"reputation": 20860, "user_id": 2034787, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/78471a5b1bfa8b48d2056ff99a875f50?s=128&d=identicon&r=PG", "display_name": "\u05d2\u05dc\u05e2\u05d3 \u05d1\u05e8\u05e7\u05df", "link": "https://stackoverflow.com/users/2034787/%d7%92%d7%9c%d7%a2%d7%93-%d7%91%d7%a8%d7%a7%d7%9f"}, "is_accepted": false, "score": 3, "last_activity_date": 1538881946, "creation_date": 1538881946, "answer_id": 52685138, "question_id": 52684771, "link": "https://stackoverflow.com/questions/52684771/haskell-subset-recursion/52685138#52685138", "title": "Haskell Subset Recursion", "body": "<p>Let's first clarify <code>subsets [3]</code>. Remember that <code>ys &lt;- [ [] ]</code> means <code>ys</code> takes on each of the elements in the list, <code>[ [] ]</code>, which just includes one element, <code>[]</code>.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>   subsets (3:[])\n=&gt; [zs | ys &lt;- subsets [] ...\n=&gt; [zs | ys &lt;- [ [] ] ...\n=&gt; [zs | ys &lt;- [ [] ], zs &lt;- [[], (3:[])]]\n= [[], [3]] -- zs takes on each element of [[], (3:[])]\n</code></pre>\n\n<p>Now let's ignore what is \"actually\" happening and put the logic into words.</p>\n\n<pre><code>subsets (x:xs) = [zs | ys &lt;- subsets xs, zs &lt;- [ys, (x:ys)]]\n</code></pre>\n\n<p>means:</p>\n\n<pre><code>Aggregate all zs\n  where ys takes on in turn each of the subsets of the list without x,\n  and for each ys,\n    zs takes on the subset ys, and the subset ys and x together\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>   subsets [2,3]\n=&gt; ys takes on in turn each of the subsets of the list without 2\n=&gt; [[], [3]]\n\n=&gt; for each ys,\n     zs takes on the subset ys, and the subset ys and 2 together\n=&gt; [[], [2], [3], [2,3]]\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 10042733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c983b0d98548ac0e842bb0580e87fbc6?s=128&d=identicon&r=PG&f=1", "display_name": "EchoNano", "link": "https://stackoverflow.com/users/10042733/echonano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1538917267, "creation_date": 1538876115, "last_edit_date": 1538917267, "question_id": 52684771, "link": "https://stackoverflow.com/questions/52684771/haskell-subset-recursion", "title": "Haskell Subset Recursion", "body": "<p>I am new to stack overflow and Haskell so please let me know if there is another way of doing this!</p>\n\n<p>This is very much a repeat of this stack overflow question,<a href=\"https://stackoverflow.com/questions/42058823/haskell-recursion-subsets\">Haskell Recursion Subsets</a>, but the answer this question got didn't really help me and I'm still confused about how the recursion in this problem works. This is my attempt to get the conversation started again for this question. </p>\n\n<p>Here is the question:</p>\n\n<p>I am confused about how the recursion in the following code snip it works:</p>\n\n<pre><code>subsets :: [a] -&gt; [[a]]\nsubsets [] = [[]]\nsubsets (x:xs) = [zs | ys &lt;- subsets xs, zs &lt;- [ys, (x:ys)]]\n</code></pre>\n\n<p>The output of this code is:</p>\n\n<pre><code>*Main&gt; subsets [1,2,3]\n[[],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]]\n</code></pre>\n\n<p>I understand how subsets is called recursively and how you can get to subset <code>[] = [[]]</code> but I am confused about how this returns a list of list and how it returns some list like <code>[1]</code>, <code>[1,3]</code>, and <code>[2,3]</code>.</p>\n\n<p>Again, I'm new to stack overflow so please let me know if there is a better way of doing this besides repeating the question. </p>\n"}, {"tags": ["haskell", "recursion", "io"], "comments": [{"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 2, "creation_date": 1538864515, "post_id": 52683633, "comment_id": 92295584, "body": "Your <code>let</code> statement needs the <code>in</code> keyword since it&#39;s not in a <code>do</code> block."}, {"owner": {"reputation": 167, "user_id": 7061365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1356ad16efe4ddeb0210c2dce6c3681e?s=128&d=identicon&r=PG&f=1", "display_name": "user289661", "link": "https://stackoverflow.com/users/7061365/user289661"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1538864793, "post_id": 52683633, "comment_id": 92295628, "body": "@4castle where exactly would you place the <code>in</code> keyword?"}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1538865054, "post_id": 52683633, "comment_id": 92295692, "body": "The <code>in</code> would go right before the <code>return</code>. However, <code>case</code> would be a better tool here than <code>if</code> since you can do pattern matching on the result of <code>readMaybe input1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "is_accepted": true, "score": 1, "last_activity_date": 1538864927, "creation_date": 1538864927, "answer_id": 52683886, "question_id": 52683633, "link": "https://stackoverflow.com/questions/52683633/haskell-loop-returning-user-input-integer/52683886#52683886", "title": "Haskell - loop returning user input integer", "body": "<p>You seem to be slightly misunderstanding how <code>do</code>-notation works.</p>\n\n<p>I'll give you a 'correct' version and we can work off that:</p>\n\n<pre><code>lp_reqInt = do\n    input1 &lt;- getLine\n    let maybeInput = readMaybe input1 :: Maybe Int\n    if maybeInput == Nothing\n      then do putStrLn \"(integer input required, please try again)\"\n              lp_reqInt \n      else return $ (\\(Just x) -&gt; x) maybeInput\n</code></pre>\n\n<p>Note the <code>let</code>-statement at the top there. I can do a <code>let</code>-statement rather than a <code>let</code>-<code>in</code>-statement here, because it is in the top level of a <code>do</code>-block. When you wrote <code>let output = fromMaybe (...)</code>, that was not in the top level of a <code>do</code>-block, that was in the second part of an <code>if</code>-statement, hence it will not work.</p>\n\n<p>You were getting a parse error for this very reason: GHC expected an accompanying <code>in</code>!</p>\n"}, {"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 3, "last_activity_date": 1538865166, "creation_date": 1538865166, "answer_id": 52683912, "question_id": 52683633, "link": "https://stackoverflow.com/questions/52683633/haskell-loop-returning-user-input-integer/52683912#52683912", "title": "Haskell - loop returning user input integer", "body": "<p>The other answer discusses what was wrong, and the minimal fix. In addition to the minimal thing that will get you moving on with your code, I thought it might also be interesting to show the idiomatic fix, namely, to use pattern matching instead of <code>if</code>. So:</p>\n\n<pre><code>lp_reqInt :: IO Int\nlp_reqInt = do\n  input1 &lt;- getLine\n  case readMaybe input1 of\n    Nothing -&gt; do\n      putStrLn \"(integer input required, please try again)\"\n      lp_reqInt\n    Just n -&gt; return n\n</code></pre>\n\n<p>This doesn't require the use of the weird fall-back <code>-666</code> in <code>fromMaybe</code>, which is nice. Using pattern matching instead of <code>(==)</code> also has a more subtle advantage: it doesn't require the underlying type to have an <code>Eq</code> instance. For <code>Int</code> there is one, so there's no advantage in this code, but in other situations it can matter more. I've also lifted the type signature to the top-level; <a href=\"https://stackoverflow.com/a/19626857/791604\">see here</a> for further discussion of this idiom.</p>\n"}, {"tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 0, "last_activity_date": 1586716928, "last_edit_date": 1586716928, "creation_date": 1586715611, "answer_id": 61176148, "question_id": 52683633, "link": "https://stackoverflow.com/questions/52683633/haskell-loop-returning-user-input-integer/61176148#61176148", "title": "Haskell - loop returning user input integer", "body": "<p>Previous answers are great but i just would like to extend this topic with another reasonable approach for those who end up here searching not exactly what the OP is asking for but something relevant.</p>\n\n<p>Since the topic mentions <strong>User Input</strong> (<code>IO</code>) and <strong>Integer</strong> (<code>Maybe Int</code>) we end up with a type like <code>IO (Maybe Int)</code>. Such types are best expressed under the Monad Transformers, namely <code>MaybeT IO Int</code> and they act nicely as <code>Alternative</code> class members as well.</p>\n\n<p>Haskell has fantastic solutions for these cases such that we may approach the same problem like;</p>\n\n<pre><code>import Control.Monad (msum)\nimport Control.Monad.Trans.Maybe\nimport Control.Monad.Trans (lift)\nimport Text.Read (readMaybe)\n\nlp_reqInt :: MaybeT IO Int\nlp_reqInt = msum . repeat $ (lift . putStrLn) \"Enter an integer..\" &gt;&gt;\n                            (MaybeT $ readMaybe &lt;$&gt; getLine)\n</code></pre>\n\n<p>It's relentless :)</p>\n\n<pre><code>\u03bb&gt; runMaybeT lp_reqInt\nEnter an integer..\nboru\nEnter an integer..\nnot an integer\nEnter an integer..\n42\nJust 42\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 7061365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1356ad16efe4ddeb0210c2dce6c3681e?s=128&d=identicon&r=PG&f=1", "display_name": "user289661", "link": "https://stackoverflow.com/users/7061365/user289661"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 52683886, "answer_count": 3, "score": 0, "last_activity_date": 1586716928, "creation_date": 1538862613, "last_edit_date": 1538863142, "question_id": 52683633, "link": "https://stackoverflow.com/questions/52683633/haskell-loop-returning-user-input-integer", "title": "Haskell - loop returning user input integer", "body": "<p>I want to write a function which, when called, will relentlessly ask for user input until the input can be read as an integer, (at which point the integer is returned to a possible do block where the function was called in the first place)</p>\n\n<p>My code here:</p>\n\n<pre><code>lp_reqInt = \n  do\n    input1 &lt;- getLine\n    if ((readMaybe input1 :: Maybe Int) == Nothing)\n      then do \n             putStrLn \"(integer input required, please try again)\"\n             lp_reqInt \n      else let output = fromMaybe (-666) (readMaybe input1 :: Maybe Int)\n    return output\n</code></pre>\n\n<p>trying to compile this gives the suspiciously simple error of <code>parse error (possibly incorrect indentation or mismatched brackets)</code> for the last line. (No indent characters were used throughout the whole file)</p>\n\n<p>How should I change my code to have the intended behaviour? Is that even possible?</p>\n"}, {"tags": ["haskell", "functional-programming", "haskell-stack"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538850825, "post_id": 52682118, "comment_id": 92292467, "body": "In Haskell <code>False</code> and <code>True</code> ar with uppercase, as well as the types (given these are not type variables)."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 4, "last_activity_date": 1538851012, "last_edit_date": 1538851012, "creation_date": 1538850656, "answer_id": 52682151, "question_id": 52682118, "link": "https://stackoverflow.com/questions/52682118/using-a-guard-with-a-list-haskell/52682151#52682151", "title": "using a guard with a list haskell", "body": "<p>You can just set <code>world</code> as the <code>&amp;&amp;</code> with the <code>all otherfunction</code> of this list, like:</p>\n\n<pre><code>function :: [Int] -&gt; World -&gt; World\nfunction listOfInts world = world {alive = alive world && allOther }\n    where allOther = <b>all otherfunction listOfInts</b></code></pre>\n\n<p>So from the moment one of the <code>listOfInts</code> has an element <code>i</code> where <code>otherfunction i</code> returns <code>False</code>, <code>all otherfunction listOfInts</code> will return <code>False</code>, and thus we change the <code>alive</code> of the world.</p>\n\n<p>We can also use a conditional expression:</p>\n\n<pre><code>function :: [Int] -&gt; World -&gt; World\nfunction listOfInts world | alive world && not allOther = world {alive = False }\n                          | otherwise = world\n    where allOther = all otherfunction listOfInts</code></pre>\n\n<p>We can also omit the <code>alive world</code> check. But that means that if the world is already dead, we might do a lot of precessing in the list, that is not necessary.</p>\n"}, {"tags": [], "owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "is_accepted": true, "score": 4, "last_activity_date": 1538850727, "creation_date": 1538850727, "answer_id": 52682161, "question_id": 52682118, "link": "https://stackoverflow.com/questions/52682118/using-a-guard-with-a-list-haskell/52682161#52682161", "title": "using a guard with a list haskell", "body": "<p>You seem to be looking for <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-List.html#v:all\" rel=\"nofollow noreferrer\"><code>all</code></a>:</p>\n\n<pre><code>function :: [int] -&gt; world -&gt; world\nfunction listOfInts world\n  | all otherfunction listOfInts = world\n  | otherwise                    = world {alive = false}\n</code></pre>\n"}], "owner": {"reputation": 293, "user_id": 9715006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb905e7fb1642526f814464beb1755c?s=128&d=identicon&r=PG&f=1", "display_name": "swaffelay", "link": "https://stackoverflow.com/users/9715006/swaffelay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 52682161, "answer_count": 2, "score": 2, "last_activity_date": 1538898912, "creation_date": 1538850375, "last_edit_date": 1538898912, "question_id": 52682118, "link": "https://stackoverflow.com/questions/52682118/using-a-guard-with-a-list-haskell", "title": "using a guard with a list haskell", "body": "<p>So I have a function that takes </p>\n\n<pre><code>otherfunction :: Int -&gt; Bool\notherfunction = True \n</code></pre>\n\n<p>Implementation of <code>otherfunction</code> doesn't matter</p>\n\n<pre><code>function :: [Int] -&gt; world -&gt; world\nfunction listOfInts World | [otherfunction x &lt;- listOfInts] = world {alive = False}\n                    | otherwise world\n</code></pre>\n\n<p>so if any of the <code>otherfunction(x)</code> in <code>listOfInts</code> returns a <code>False</code> I want it to do that world {alive is False} , how can I implement this? I can maybe do <code>False</code>elem<code>[otherfunction x &lt;- listOfInts]</code>, is there a better way to do this in Haskell.</p>\n\n<p>Thanks for the much needed help, I am new to functional programming.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 6, "creation_date": 1538848501, "post_id": 52681819, "comment_id": 92291822, "body": "Hint: use <code>filter</code>: <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:filter\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.12.0.0/docs/&hellip;</a> Haskell has already <code>odd</code> and <code>even</code> functions, so there is no reason to re-implement these."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1538851692, "post_id": 52681819, "comment_id": 92292706, "body": "If you want to define your own <code>isOdd</code>, use <code>mod</code> instead of <code>rem</code>; it will return <code>1</code> whether or not <code>n</code> is positive, simplifying your definition."}, {"owner": {"reputation": 893, "user_id": 6248287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPegr.jpg?s=128&g=1", "display_name": "\u019b\u019b\u019b", "link": "https://stackoverflow.com/users/6248287/%c6%9b%c6%9b%c6%9b"}, "edited": false, "score": 2, "creation_date": 1538859904, "post_id": 52681819, "comment_id": 92294693, "body": "read <a href=\"https://wiki.haskell.org/How_to_work_on_lists\" rel=\"nofollow noreferrer\">wiki.haskell.org/How_to_work_on_lists</a> then try to write takeOdds yourself :)"}], "answers": [{"tags": [], "owner": {"reputation": 600, "user_id": 772838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SWxVg.jpg?s=128&g=1", "display_name": "jbytecode", "link": "https://stackoverflow.com/users/772838/jbytecode"}, "is_accepted": false, "score": 3, "last_activity_date": 1538858236, "creation_date": 1538858236, "answer_id": 52683139, "question_id": 52681819, "link": "https://stackoverflow.com/questions/52681819/making-a-list-of-odd-numbers-from-a-list/52683139#52683139", "title": "Making a list of odd numbers from a list", "body": "<p>Suppose the list is </p>\n\n<pre><code>x = [1,2,3,4,5,6]\n</code></pre>\n\n<p>and we can call the function <code>odd</code> using the code</p>\n\n<pre><code>filter odd x\n</code></pre>\n\n<p>and the result is </p>\n\n<pre><code>[1,3,5]\n</code></pre>\n\n<p>If you want to use your own isOdd function, you can define it like</p>\n\n<pre><code>isOdd x = (mod x 2) /= 0\n</code></pre>\n\n<p>and the function isOdd can be called in a similar way like</p>\n\n<pre><code>filter isOdd x\n</code></pre>\n\n<p>The result is the same.</p>\n"}], "owner": {"reputation": 7, "user_id": 10466544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9kEk.jpg?s=128&g=1", "display_name": "Bar\u0131\u015f &#214;zba\u015f", "link": "https://stackoverflow.com/users/10466544/bar%c4%b1%c5%9f-%c3%96zba%c5%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538858236, "creation_date": 1538848443, "last_edit_date": 1538848614, "question_id": 52681819, "link": "https://stackoverflow.com/questions/52681819/making-a-list-of-odd-numbers-from-a-list", "title": "Making a list of odd numbers from a list", "body": "<p>I need to take odd numbers from a given list of integers to create another list.\nI have written an <code>isOdd</code> function, but couldn't make the rest work.</p>\n\n<pre><code>isOdd :: Integer -&gt; Bool\nisOdd n = rem (abs(n)) 2 ==1 \n\ntakeOdds :: [Int] -&gt; [Int]\n...\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": true, "score": 5, "last_activity_date": 1538841642, "last_edit_date": 1538841642, "creation_date": 1538837749, "answer_id": 52680275, "question_id": 52680220, "link": "https://stackoverflow.com/questions/52680220/debugging-type-errors-in-haskell/52680275#52680275", "title": "Debugging type Errors in Haskell", "body": "<pre><code>map :: (x -&gt; y) -&gt; [x] -&gt; [y]\n</code></pre>\n\n<p>The first argument you gave to <code>map</code> has type <code>a -&gt; [[a]]</code>, i.e., <code>x = a</code> and <code>y = [[a]]</code> so</p>\n\n<pre><code>                :: [x] -&gt; [  y  ]\nmap (\\y -&gt; ...) :: [a] -&gt; [[[a]]]\n                --  ^      ^^^^^\n                -- x = a,  y = [[a]]\n</code></pre>\n\n<hr>\n\n<p>In this case, the result of that <code>map (\\y -&gt; ...) xs</code> is a list where each element corresponds to the permutations starting with a fixed element <code>y</code> in <code>xs</code>. In the end, you don't care which element a permutation starts with; you can forget that separation using <code>concat</code>:</p>\n\n<pre><code>perms = concat (map (\\y -&gt; ...) xs)\n\n-- or\n\nperms = concatMap (\\y -&gt; ...) xs\n\n-- or\n\nperms = xs &gt;&gt;= \\y -&gt; ...\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 5784021, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e60c725ab61739cbd73c4e8d5f42f217?s=128&d=identicon&r=PG&f=1", "display_name": "KillPinguin", "link": "https://stackoverflow.com/users/5784021/killpinguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 52680275, "answer_count": 1, "score": 3, "last_activity_date": 1538841642, "creation_date": 1538837359, "question_id": 52680220, "link": "https://stackoverflow.com/questions/52680220/debugging-type-errors-in-haskell", "title": "Debugging type Errors in Haskell", "body": "<p>I'm trying to write a function, returning all permutations from a list in Haskell:</p>\n\n<pre><code>perms :: [a] -&gt; [[a]]\nperms [] = [[]]\nperms xs = map (\\y -&gt; concat_each y (perms (list_without y xs))) xs\n\nlist_without :: (Eq a) =&gt; a -&gt; [a] -&gt; [a]\nlist_without x xs =\n    filter (\\y -&gt; not (y==x)) xs\n\nconcat_each :: a -&gt; [[a]] -&gt; [[a]]\nconcat_each x xs =\n    map (\\y -&gt; x:y) xs\n</code></pre>\n\n<p>What I think happens in line3:\ny is <code>a</code> and x is <code>[a]</code>, so\nlist_without y xs is <code>[a]</code>.</p>\n\n<p>perms (list_without ...) is thus <code>[[a]]</code></p>\n\n<p>so concat_each y (perms ...) gets <code>a</code> and <code>[[a]]</code>, resulting in <code>[[a]]</code> </p>\n\n<p>So the function for map is <code>a -&gt; [[a]]</code> and everything should be okay.</p>\n\n<p>But the compiler seems to see things differently:</p>\n\n<pre><code>Couldn't match type `a' with `[a]'\n  `a' is a rigid type variable bound by\n      the type signature for perms :: [a] -&gt; [[a]]\n      at C:\\Users\\Philipp\\Desktop\\permutations.hs:1:10\nExpected type: [a]\n  Actual type: [[a]]\nRelevant bindings include\n  y :: a (bound at permutations.hs:3:18)\n  xs :: [a] (bound at permutations.hs:3:7)\n  perms :: [a] -&gt; [[a]]\n    (bound at permutations.hs:2:1)\nIn the expression: concat_each y (perms (list_without y xs))\nIn the first argument of `map', namely\n  `(\\ y -&gt; concat_each y (perms (list_without y xs)))'\n</code></pre>\n\n<p>How would I debug this error message properly? I don't really know where to start checking my types.</p>\n"}, {"tags": ["haskell", "configuration", "directory", "project", "haskell-stack"], "comments": [{"owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 2, "creation_date": 1538830616, "post_id": 52679220, "comment_id": 92287218, "body": "If you <code>cd</code> into different directory and invoke the about command, does that still result in <code>C:\\Users\\username</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "edited": false, "score": 0, "creation_date": 1538838108, "post_id": 52679325, "comment_id": 92289145, "body": "<code>cd</code> doesn&#39;t change the current drive by default. <code>cd &#47;d d:\\project</code> might work better."}], "tags": [], "owner": {"reputation": 827, "user_id": 1276388, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4ae985df9e533570f5ac2ea9bfc25dfd?s=128&d=identicon&r=PG", "display_name": "\u0397\u03bb\u03b5\u03ba\u03c4\u03c1\u03bf\u03bb\u03cc\u03b3\u03bf\u03c2 \u039c\u03b7\u03c7\u03b1\u03bd\u03b9\u03ba\u03cc\u03c2", "link": "https://stackoverflow.com/users/1276388/%ce%97%ce%bb%ce%b5%ce%ba%cf%84%cf%81%ce%bf%ce%bb%cf%8c%ce%b3%ce%bf%cf%82-%ce%9c%ce%b7%cf%87%ce%b1%ce%bd%ce%b9%ce%ba%cf%8c%cf%82"}, "is_accepted": false, "score": 3, "last_activity_date": 1539059625, "last_edit_date": 1539059625, "creation_date": 1538830729, "answer_id": 52679325, "question_id": 52679220, "link": "https://stackoverflow.com/questions/52679220/configuring-haskells-default-directory-for-project-creation/52679325#52679325", "title": "Configuring Haskell&#39;s default directory for project creation", "body": "<p>It's because you current directory is <code>C:\\Users\\username</code></p>\n\n<p>I think the simple solution is just <code>cd</code> to your preferred directory.\nFor example if have a project directory named <code>project</code> in drive <code>D</code> then\n<code>cd D:\\project</code> followed by <code>stack new my-project new-template</code>.</p>\n\n<p>If you use <code>cmd.exe</code>, then you must type <code>d:</code> first.</p>\n"}], "owner": {"reputation": 95, "user_id": 7484415, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c1bfc6b76f692e24e73a9302cf8595c?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7484415/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539059625, "creation_date": 1538829805, "question_id": 52679220, "link": "https://stackoverflow.com/questions/52679220/configuring-haskells-default-directory-for-project-creation", "title": "Configuring Haskell&#39;s default directory for project creation", "body": "<p>As someone who is new to Haskell, I was setting up my text-editors, environments etc. when I found that any new projects I created using the command-line:</p>\n\n<pre><code>stack new my-project new-template\n</code></pre>\n\n<p>would always be stored in the directory:</p>\n\n<pre><code>C:\\Users\\username\n</code></pre>\n\n<p>This isn't  ideal, and I wondered if it was possible to change the default directory somehow (this also happens when I clone projects from GitLab).</p>\n\n<p>My operating system is Windows 10 (64 bit) and I have installed Haskell 8.4.3 along with Haskell stack and Git.</p>\n\n<p>Any potential solution would be greatly appreciated; please do ask for more information if it's needed.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["list", "haskell", "random", "shuffle"], "answers": [{"comments": [{"owner": {"reputation": 2570, "user_id": 4142266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rMCN5.png?s=128&g=1", "display_name": "mschmidt", "link": "https://stackoverflow.com/users/4142266/mschmidt"}, "edited": false, "score": 3, "creation_date": 1538830187, "post_id": 52679179, "comment_id": 92287119, "body": "It also allows to shuffle only a prefix of the list which may be important for infinite lists."}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "edited": false, "score": 0, "creation_date": 1538838286, "post_id": 52679179, "comment_id": 92289189, "body": "It doesn&#39;t work with infinite lists, because the list is passed as is to <code>buildTree</code>. It might have if it used <code>take len elements</code>."}], "tags": [], "owner": {"reputation": 19532, "user_id": 570689, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4eed5285039322bafbeee9102367b0a4?s=128&d=identicon&r=PG", "display_name": "\u0414\u041c\u0418\u0422\u0420\u0418\u0419 \u041c\u0410\u041b\u0418\u041a\u041e\u0412", "link": "https://stackoverflow.com/users/570689/%d0%94%d0%9c%d0%98%d0%a2%d0%a0%d0%98%d0%99-%d0%9c%d0%90%d0%9b%d0%98%d0%9a%d0%9e%d0%92"}, "is_accepted": false, "score": 3, "last_activity_date": 1538830500, "last_edit_date": 1538830500, "creation_date": 1538829565, "answer_id": 52679179, "question_id": 52679084, "link": "https://stackoverflow.com/questions/52679084/why-does-the-shuffle-function-require-an-int-parameter/52679179#52679179", "title": "Why does the shuffle&#39; function require an Int parameter?", "body": "<p>It might be a case when length of the given list is already known, and doesn't need to be calculated again. Thus, it might be considered as an optimisation.</p>\n\n<p>Besides, in general, the resulting list doesn't need to have the same size as the original one. Thus, this argument could be used for setting this length.</p>\n\n<p>This is true for the original idea of Oleg (source - <a href=\"http://okmij.org/ftp/Haskell/perfect-shuffle.txt\" rel=\"nofollow noreferrer\">http://okmij.org/ftp/Haskell/perfect-shuffle.txt</a>):</p>\n\n<pre><code>-- examples\n\nt1 = shuffle1 ['a','b','c','d','e'] [0,0,0,0]\n-- \"abcde\"\n-- Note, that rseq of all zeros leaves the sequence unperturbed.\n\nt2 = shuffle1 ['a','b','c','d','e'] [4,3,2,1]\n-- \"edcba\"\n-- The rseq of (n-i | i&lt;-[1..n-1]) reverses the original sequence of elements\n</code></pre>\n\n<p>However, it's not the same for the 'random-shuffle' package implementation:</p>\n\n<pre><code>&gt; shuffle [0..10] [0,0,0,0]\n[0,1,2,3random-shuffle.hs: [shuffle] called with lists of different lengths\n</code></pre>\n\n<p>I think it worth to follow-up with the packages maintainers in order to understand the contract of this function.</p>\n"}, {"comments": [{"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 1, "creation_date": 1538839076, "post_id": 52679585, "comment_id": 92289372, "body": "<code>inner</code> takes a list of nodes, and <code>join</code>s them into half as many nodes. That is, <code>[n1, n2, n3, n4 ...]</code> becomes <code>[join n1 n2, join n3 n4 ...]</code> (with slop at the end). <code>fix growLevel</code> simply frames this computation, repeating <code>inner</code> until everything boils down to one node. That&#39;s why it&#39;s called <code>growLevel</code>. We start with <code>n</code> height <code>1</code> nodes (<code>map Leaf</code>), then move to <code>n&#47;2</code> height <code>2</code> nodes, then <code>n&#47;4</code> height <code>3</code> nodes, until we get to <code>1 = n&#47;(2^(h - 1))</code> node of height <code>h = log2(n) + 1</code> (disregarding aforementioned slop; please correct me if I&#39;m wrong)."}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1538840539, "post_id": 52679585, "comment_id": 92289755, "body": "I understand that, and that <code>fix</code> should reach this fixed point where there&#39;s no more than one entry somehow, but I haven&#39;t wrapped my head around how it actually works. It&#39;s like <code>head . head . dropWhile (\\x -&gt; length x &gt; 1) $ iterate inner es</code>"}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1538841809, "post_id": 52679585, "comment_id": 92290108, "body": "I think you&#39;ve misunderstood how the <code>fix</code> works. <code>fix growLevel</code> is <code>growLevel (growLevel (growLevel ...)) = \\case { [node] -&gt; node; l -&gt; (\\case { [node] -&gt; node; l -&gt; (...) (inner l)}) (inner l)</code>. The &quot;data structure that contains itself&quot; is not the list, it&#39;s the function. <code>let</code>ing the infinity away/inlining <code>fix</code> produces: <code>fix growLevel = let { function [node] = [node]; function l = function (inner l) } in function</code>. Honestly, I have no clue why <code>fix</code> was used. It&#39;s useful for inline recursive definitions, or to allow itself to be replaced, but the definition is neither inline nor public."}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1538898964, "post_id": 52679585, "comment_id": 92300315, "body": "I understand what it does; the dropWhile method was just a way to accomplish the same result for this case. The nested calls are what <code>iterate</code> does. It&#39;s the particulars of how <code>fix</code> performs the test that have me puzzled, and your description might help with that if I mull it over."}], "tags": [], "owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "is_accepted": true, "score": 4, "last_activity_date": 1538833416, "last_edit_date": 1538833416, "creation_date": 1538832809, "answer_id": 52679585, "question_id": 52679084, "link": "https://stackoverflow.com/questions/52679084/why-does-the-shuffle-function-require-an-int-parameter/52679585#52679585", "title": "Why does the shuffle&#39; function require an Int parameter?", "body": "<p><code>shuffle</code> operates by building a tree form of its input list, <em>including the tree size</em>. The <code>buildTree</code> function performs this task using <a href=\"https://hackage.haskell.org/package/base-4.10.0.0/docs/Data-Function.html#v:fix\" rel=\"nofollow noreferrer\"><code>Data.Function.fix</code></a> in a manner I haven't quite wrapped my head around. Somehow (I think due to the recursion of <code>inner</code>, not the <code>fix</code> magic), it produces a balanced tree, which then has logarithmic lookup. Then it consumes this tree, rebuilding it for every extracted item. The advantage of the data structure would be that it only holds remaining items in an immutable form; lazy updates work for it. But the size of the tree is required data during the indexing, so there's no need to pass it separately to generate the indices used to build the permutation. <code>System.Random.Shuffle.shuffle</code> indeed has no random element - it is only a permutation function. <code>shuffle'</code> exists to feed it a random sequence, using its internal helper <code>rseq</code>. So the reason <code>shuffle'</code> takes a length argument appears to be because they didn't want it to touch the list argument at all; it's only passed into <code>shuffle</code>. </p>\n\n<p>The task doesn't seem terribly suitable for singly linked lists in the first place. I'd probably consider using <a href=\"https://hackage.haskell.org/package/vector-shuffling\" rel=\"nofollow noreferrer\">VectorShuffling</a> instead. And I'm baffled as to why <code>rseq</code> isn't among the exported functions, being the one that uses a random number generator to build a permutation... which in turn might have been better handled using <a href=\"https://hackage.haskell.org/package/permutation-0.5.0.5/docs/Data-Permute.html\" rel=\"nofollow noreferrer\">Data.Permute</a>. Probably the reasons have to with history, such as Data.Permute being written later and System.Random.Shuffle being based on a paper on immutable random access queues. </p>\n\n<p><a href=\"http://hackage.haskell.org/package/random-extras-0.19/docs/Data-Random-Extras.html#g:2\" rel=\"nofollow noreferrer\">Data.Random.Extras</a> seems to have a more straight forward Seq-based shuffle function. </p>\n"}], "owner": {"reputation": 1474, "user_id": 8025936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Kue08.png?s=128&g=1", "display_name": "schuelermine", "link": "https://stackoverflow.com/users/8025936/schuelermine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 52679585, "answer_count": 2, "score": 2, "last_activity_date": 1538833416, "creation_date": 1538828858, "question_id": 52679084, "link": "https://stackoverflow.com/questions/52679084/why-does-the-shuffle-function-require-an-int-parameter", "title": "Why does the shuffle&#39; function require an Int parameter?", "body": "<p>In <code>System.Random.Shuffle</code>,</p>\n\n<pre><code>shuffle' :: RandomGen gen =&gt; [a] -&gt; Int -&gt; gen -&gt; [a]\n</code></pre>\n\n<p>The <a href=\"http://hackage.haskell.org/package/random-shuffle-0.0.4/docs/System-Random-Shuffle.html\" rel=\"nofollow noreferrer\">hackage page</a> mentions this <code>Int</code> argument as</p>\n\n<blockquote>\n  <p>..., its length,...</p>\n</blockquote>\n\n<p>However, it seems that a simple wrapper function like</p>\n\n<pre><code>shuffle'' x = shuffle' x (length x)\n</code></pre>\n\n<p>should've sufficed.</p>\n"}, {"tags": ["list", "sorting", "haskell"], "comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1538841540, "post_id": 52678277, "comment_id": 92290031, "body": "<code>then :</code> is bad syntax. <code>:</code> does not belong there. If you have several definitions you can put them into one <code>let</code>, as <code>let { a = ... ; b = ... ; c = ... } in ...</code>."}], "answers": [{"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1538842409, "post_id": 52679391, "comment_id": 92290274, "body": "try <code>take (length xs) (braid (reverse $ sort xs) (sort xs))</code>. I wonder if it could be faster. (still it will be slower than the other one of course, as that one directly produces the reversed list)."}, {"owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "edited": false, "score": 0, "creation_date": 1538843095, "post_id": 52679391, "comment_id": 92290449, "body": "the problem is actually <code>reverse $ sort xs</code>, replacing it by <code>sortOn Down</code> produces same speed code than other solutions. I didn&#39;t expect reverse to be such slow"}, {"owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "reply_to_user": {"reputation": 893, "user_id": 6248287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPegr.jpg?s=128&g=1", "display_name": "\u019b\u019b\u019b", "link": "https://stackoverflow.com/users/6248287/%c6%9b%c6%9b%c6%9b"}, "edited": false, "score": 1, "creation_date": 1538843118, "post_id": 52679391, "comment_id": 92290455, "body": "@\u019b\u019b\u019b criterion library"}], "tags": [], "owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "is_accepted": true, "score": 2, "last_activity_date": 1538843415, "last_edit_date": 1538843415, "creation_date": 1538831248, "answer_id": 52679391, "question_id": 52678277, "link": "https://stackoverflow.com/questions/52678277/rearrange-sort-list-by-largest-smallest-second-largest-second-smallest-etc/52679391#52679391", "title": "Rearrange/sort list by largest, smallest, second largest, second smallest etc", "body": "<p><code>braid</code> function intercalates two list elem by elem. We next apply <code>braid</code> to the list ordered in ascending and descending. Finally, since we end up with the orginal list duplicated, we take just the length of the original list.</p>\n\n<pre><code>braid :: [Int] -&gt; [Int] -&gt; [Int]    \nbraid []     as     = as\nbraid ds     []     = ds\nbraid (d:ds) (a:as) = d:a:braid ds as\n\nwave :: [Int] -&gt; [Int]\nwave xs = take (length xs) braided \n  where asc  = sort xs\n        desc = reverse asc\n        braided = braid desc asc\n</code></pre>\n\n<h2>Benchmark Edit:</h2>\n\n<p>despite of the fact that I think my implementation is easier to understand for haskell beginers, I got to say that after having benckmarked my solution against \u019b\u019b\u019b's solution, mine is ~ 4 to 7 times slower than his/her.</p>\n\n<p>For One hundred thousand length list:</p>\n\n<ul>\n<li>mine: 211 ms</li>\n<li>\u019b\u019b\u019b's: 53 ms</li>\n</ul>\n\n<p>For One million length list:</p>\n\n<ul>\n<li>mine: 3.8 sec</li>\n<li>\u019b\u019b\u019b's: 547 ms</li>\n</ul>\n\n<h2>Edit Two: Don't use <code>reverse</code></h2>\n\n<p>Replacing <code>desc = reverse asc</code> by <code>desc = sortOn Down xs</code> produces same speed program as \u019b\u019b\u019b's applicative solution and willness comprehension list implementation. </p>\n"}, {"comments": [{"owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "edited": false, "score": 1, "creation_date": 1538841018, "post_id": 52679773, "comment_id": 92289887, "body": "nice solution. 4 times faster than the one I proposed. Only one suggest <code>sortBy (comparing Down)</code> can bu substitute by <code>sortOn Down</code>"}], "tags": [], "owner": {"reputation": 893, "user_id": 6248287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPegr.jpg?s=128&g=1", "display_name": "\u019b\u019b\u019b", "link": "https://stackoverflow.com/users/6248287/%c6%9b%c6%9b%c6%9b"}, "is_accepted": false, "score": 5, "last_activity_date": 1538834191, "creation_date": 1538834191, "answer_id": 52679773, "question_id": 52678277, "link": "https://stackoverflow.com/questions/52678277/rearrange-sort-list-by-largest-smallest-second-largest-second-smallest-etc/52679773#52679773", "title": "Rearrange/sort list by largest, smallest, second largest, second smallest etc", "body": "<p><code>frontEndSort</code> consumes a list <code>xs</code>, it sorts its elements in descending order. Next, pair each element in <code>xs</code> with element from the same list but in ascending order. Convert each pair to a list then flatten the whole list. Finally, we take as many elements as in <code>xs</code>.</p>\n\n<pre><code>frontEndSort :: [Int] -&gt; [Int] \nfrontEndSort xs = take (length xs) $ do\n    (x, y) &lt;- zip &lt;$&gt; sortBy (comparing Down) &lt;*&gt; sort $ xs\n    [x, y]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 1, "last_activity_date": 1538877271, "last_edit_date": 1538877271, "creation_date": 1538843496, "answer_id": 52681098, "question_id": 52678277, "link": "https://stackoverflow.com/questions/52678277/rearrange-sort-list-by-largest-smallest-second-largest-second-smallest-etc/52681098#52681098", "title": "Rearrange/sort list by largest, smallest, second largest, second smallest etc", "body": "<p>Another way to use the zipping:</p>\n\n<pre><code>import Data.Ord\n\nfrontEndSort :: [Int] -&gt; [Int] \nfrontEndSort xs =\n    zipWith (flip const) xs\n       ( concat . getZipList . traverse ZipList\n                $ [sortBy (comparing Down) xs, sort xs] )\n</code></pre>\n\n<p>Here <code>traverse ZipList :: [[b]] -&gt; ZipList [b]</code> so it already produces the pairs as lists, not tuples.</p>\n"}], "owner": {"reputation": 21, "user_id": 10465388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a2beb1bdbfcc9124538e656d9fc886?s=128&d=identicon&r=PG&f=1", "display_name": "Cleola", "link": "https://stackoverflow.com/users/10465388/cleola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 0, "accepted_answer_id": 52679391, "answer_count": 3, "score": 0, "last_activity_date": 1563080432, "creation_date": 1538822899, "last_edit_date": 1563080432, "question_id": 52678277, "link": "https://stackoverflow.com/questions/52678277/rearrange-sort-list-by-largest-smallest-second-largest-second-smallest-etc", "title": "Rearrange/sort list by largest, smallest, second largest, second smallest etc", "body": "<p>Given an array of integers, how can I sort them by : largest-smallest-2nd largest - 2nd smallest?</p>\n\n<p>I'm trying to :\n- Duplicate and sort an array in order ascending and descending\n- Create the sorted array by picking the head of each arrays describes as above</p>\n\n<p>I am not familiar with Haskell programming but here's what I've done</p>\n\n<pre><code>sort :: [Int] -&gt; [Int]\nsort [] = []\nsort (x:xs) = sort smaller ++ [x] ++ sort larger\n  where\n    smaller = filter (&lt;= x) xs\n    larger = filter (&gt; x) xs\n\nwave :: [Int] -&gt; [Int]\nwave [] = []\nwave [x] = [x]\nwave (x:xs) = if length (x:xs)&gt;1 \n    then :\n        ascending = sort (x:xs)\n        descending = reverse (ascending)\n        iterator = length(x:xs)\n        if iterator &gt; 0 &amp;&amp; (length(ascending)==0 || length(descending)==0)\n            then do wave(x:xs) = head(descending) + head(ascending)\n                tail(descending)\n                tail(ascending)\n</code></pre>\n\n<p>Thanks by advance for your help</p>\n"}, {"tags": ["haskell", "recursion"], "comments": [{"owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "edited": false, "score": 0, "creation_date": 1538816662, "post_id": 52677027, "comment_id": 92283755, "body": "Err, <code>length . countPositivesRec</code> ?"}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "edited": false, "score": 3, "creation_date": 1538817475, "post_id": 52677027, "comment_id": 92283953, "body": "<code>i++</code> is fundamentally not Haskell; that&#39;s the postincrement operator in C, implying both defined computation order and mutable variables. The closest equivalent might be <code>succ</code>, which increments, but the new value is a distinct value."}, {"owner": {"reputation": 1197, "user_id": 4051020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42660a4e623fd8d2c850081291bcb585?s=128&d=identicon&r=PG&f=1", "display_name": "dopamane", "link": "https://stackoverflow.com/users/4051020/dopamane"}, "edited": false, "score": 0, "creation_date": 1538823101, "post_id": 52677027, "comment_id": 92285435, "body": "<code>filter (&gt;=0)</code> would avoid recursion and use library functions."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1538833648, "post_id": 52677027, "comment_id": 92287965, "body": "Where do you want the count to appear? Do you want a function with a type signature like <code>[Int] -&gt; (Int, [Int])</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 1, "last_activity_date": 1538813424, "creation_date": 1538813424, "answer_id": 52677052, "question_id": 52677027, "link": "https://stackoverflow.com/questions/52677027/number-of-loops-in-recursion/52677052#52677052", "title": "Number of loops in recursion", "body": "<p>Here's a hint: follow the same recursion scheme as before, but return an int at every step.</p>\n\n<pre><code>countPositivesRec :: [Int] -&gt; Int\n                              ---\ncountPositivesRec [] = 0 -- no positives in the empty list\ncountPositivesRec (x:xs) | x &gt;= 0    = ??\n                         | otherwise = ??\n                          where tl = countPositivesRec xs\n</code></pre>\n\n<p>One you solve this, it can be rewritten using <code>foldr</code>, if you want.</p>\n\n<p>If you really want to use <code>foldl</code> instead, I would suggest you start by defining a function <code>f</code> such that</p>\n\n<pre><code>f (f (f 0 x0) x1) x2\n</code></pre>\n\n<p>evaluates to the number of positives in <code>x0,x1,x2</code>. Then you can use <code>foldl f 0 inputList</code></p>\n"}, {"tags": [], "owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "is_accepted": false, "score": 1, "last_activity_date": 1538819492, "creation_date": 1538819492, "answer_id": 52677796, "question_id": 52677027, "link": "https://stackoverflow.com/questions/52677027/number-of-loops-in-recursion/52677796#52677796", "title": "Number of loops in recursion", "body": "<p>The function you've written is <code>filter (&gt;=0)</code>. As Paul pointed out, the only step remaining is to count and <code>length</code> does that. We can transform the function step by step:</p>\n\n<pre><code>countPositivesRec :: [Int] -&gt; [Int]\ncountPositivesRec [] = []\ncountPositivesRec (x:xs) | x &gt;= 0 = x : tl\n                         | otherwise = tl\n                           where tl = countPositivesRec xs\n</code></pre>\n\n<p>Observe that <code>xs</code> is only used in the transformed form <code>tl</code>. That's what makes this a right fold. </p>\n\n<pre><code>onlypos1 = foldr maybekeep []\n  where maybekeep x tl | x &gt;= 0    = x : tl\n                       | otherwise = tl\n</code></pre>\n\n<p>This operation is known as a <code>filter</code>, keeping only some parts:</p>\n\n<pre><code>onlypos2 = filter dowekeep\n  where dowekeep x = x &gt;= 0\nonlypos3 = filter (\\x -&gt; x &gt;= 0)\nonlypos4 = filter (&gt;= 0)\n</code></pre>\n\n<p>But this is of course only one of many possible approaches. For instance, strictness analysis can lead to the conclusion that <code>length</code> is better implemented as <code>foldl' (\\a _ -&gt; succ a) 0</code> than <code>foldr (\\_ a -&gt; succ a) 0</code>. Indeed, that is its basic form in the Prelude:</p>\n\n<pre><code>length = foldl' (\\c _ -&gt; c+1) 0\n</code></pre>\n\n<p>We see that the combining function of <code>length</code> ignores the value of one argument, merely requires it to be there. This can naturally be merged with our condition that only some elements count:</p>\n\n<pre><code>lengthFilter1 = length . filter\nlengthFilter2 pred = foldl' predCount 0\n  where predCount c x = if pred x then c+1 else c\ncountNonNegative = lengthFilter2 nonNegative\n  where nonNegative x = x &gt;= 0\n</code></pre>\n\n<p>Incidentally, 0 isn't positive. It's non-negative. </p>\n\n<p>In the end, Haskell's lazy lists mean we can use them to fuse traversals; <code>length . filter (&gt;=0)</code> will only read the input list once, because the only reason it's processing results from <code>filter</code> is that <code>length</code> consumes them. The filtered list never exists as a fully expanded structure, unlike e.g. Python or PHP. This form is likely one of the most readable, but others exist, e.g.:</p>\n\n<pre><code>countNonNegatives xs = sum [1 | x &lt;- xs, x &gt;= 0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 1, "last_activity_date": 1539065417, "last_edit_date": 1539065417, "creation_date": 1538821309, "answer_id": 52678045, "question_id": 52677027, "link": "https://stackoverflow.com/questions/52677027/number-of-loops-in-recursion/52678045#52678045", "title": "Number of loops in recursion", "body": "<p>You have</p>\n\n<pre><code>filtering p cons x r = if | p x -&gt; cons x r | otherwise -&gt; r\n\ncountPositives = length \n                   . filter (&gt; 0)\n               = foldr (\\x r -&gt; r + 1) 0                              -- r++\n                   . foldr (filtering (&gt; 0) (:)            ) []\n               =     foldr (filtering (&gt; 0) (\\x r -&gt; r + 1))  0\n</code></pre>\n\n<p>(since folds <em>fuse</em> by composing their reducer transformers, a-la <em>\"fold replaces the cons with a reducer operation, so why create the cons in the first place if it gonna be replaced anyway\"</em>), and</p>\n\n<pre><code>filtering (&gt; 0) (\\x r -&gt; r + 1) x r \n                     = if | (&gt; 0) x -&gt; (\\x r -&gt; r + 1) x r | otherwise -&gt; r\n                     = if | x &gt; 0 -&gt; r + 1 | otherwise -&gt; r\n</code></pre>\n\n<p>and thus, a version with <em>fold</em> and <em>increment</em> that you wanted,</p>\n\n<pre><code>countPositives = foldr (\\x r -&gt; if | x &gt; 0 -&gt; r + 1 | otherwise -&gt; r) 0  -- r++\n</code></pre>\n\n<p>You can take it from here.</p>\n"}], "owner": {"reputation": 19, "user_id": 4949031, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205373356911199/picture?type=large", "display_name": "Petr Stejskal", "link": "https://stackoverflow.com/users/4949031/petr-stejskal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1539065417, "creation_date": 1538813227, "last_edit_date": 1538819844, "question_id": 52677027, "link": "https://stackoverflow.com/questions/52677027/number-of-loops-in-recursion", "title": "Number of loops in recursion", "body": "<p>I would like to count the number of positive integers/elements in the list. This returns the elements with positive values, how can I count the elements? would like to construct something like count(array(...)).</p>\n\n<p>I would like to see a version with <em>i++</em> and <em>foldl</em>. That would be very helpful.</p>\n\n<pre><code>countPositivesRec :: [Int] -&gt; [Int]\ncountPositivesRec [] = []\ncountPositivesRec (x:xs) | x &gt;= 0 = x : tl\n                         | otherwise = tl\n                           where tl = countPositivesRec xs\n</code></pre>\n"}, {"tags": ["bash", "haskell", "cabal"], "comments": [{"owner": {"reputation": 12530, "user_id": 381619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f67f35200cf319e30329dddd412b6d?s=128&d=identicon&r=PG", "display_name": "Neil Mayhew", "link": "https://stackoverflow.com/users/381619/neil-mayhew"}, "edited": false, "score": 3, "creation_date": 1539116801, "post_id": 52675596, "comment_id": 92382819, "body": "I don&#39;t agree that this is a duplicate. The poster is asking specifically about doing this in a cabal-managed dependency environment, and if using a sandbox or a new-build that&#39;s not the same as the environment you get with <code>runghc</code>."}, {"owner": {"reputation": 12530, "user_id": 381619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f67f35200cf319e30329dddd412b6d?s=128&d=identicon&r=PG", "display_name": "Neil Mayhew", "link": "https://stackoverflow.com/users/381619/neil-mayhew"}, "edited": false, "score": 3, "creation_date": 1539116969, "post_id": 52675596, "comment_id": 92382883, "body": "<code>cabal exec runghc script [args]</code> is probably what you&#39;re looking for."}], "owner": {"reputation": 672, "user_id": 7254247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffdeb233783cfab7ea49517265777cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Spent Death", "link": "https://stackoverflow.com/users/7254247/spent-death"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "closed_date": 1538811509, "answer_count": 0, "score": 1, "last_activity_date": 1538842138, "creation_date": 1538798657, "last_edit_date": 1538842138, "question_id": 52675596, "link": "https://stackoverflow.com/questions/52675596/how-do-i-run-a-haskell-as-a-script-with-cabal", "closed_reason": "Duplicate", "title": "How do I run a Haskell as a script, with cabal?", "body": "<p>I have a a small library written in Haskell. I've been testing this library using <code>cabal repl</code> and executing my functions. How can I run these functions from cli/as a bash script? With <code>python</code> this is easy, I can just do <code>python script [args]</code>. Is there an analogy with <code>cabal</code>? I am using <code>cabal</code> for the build process to make my entire project. I don't need a compiled binary, a script is fine (but I would like to know how both are done just in case).</p>\n\n<p>Edit: Just to be clear, I have a <code>cabal</code> project, and <code>cabal</code> is taking care of resolving my dependencies. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/8676331/how-to-run-a-haskell-file-in-interpreted-mode\">How to run a haskell file in interpreted mode</a></p>\n\n<p>Doesn't mention <code>cabal</code> projects.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 1197, "user_id": 4051020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42660a4e623fd8d2c850081291bcb585?s=128&d=identicon&r=PG&f=1", "display_name": "dopamane", "link": "https://stackoverflow.com/users/4051020/dopamane"}, "edited": false, "score": 0, "creation_date": 1538805822, "post_id": 52674974, "comment_id": 92281552, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52602474/function-to-generate-the-unique-combinations-of-a-list-in-haskell\">Function to generate the unique combinations of a list in Haskell</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "is_accepted": false, "score": 6, "last_activity_date": 1538791603, "creation_date": 1538791603, "answer_id": 52675118, "question_id": 52674974, "link": "https://stackoverflow.com/questions/52674974/haskell-generating-subsets-of-length-k/52675118#52675118", "title": "Haskell - Generating Subsets of Length k", "body": "<p>Let's consider some recursive definitions, without going into code quite yet.</p>\n\n<p>If you want to get every subset of size <em>n</em>, then you might pick an element, and append that to a subset of size <em>n-1</em>. If we do that for each element, then we should get all subsets of size <em>n</em>. That's a useful starting point!</p>\n\n<p>Let's put that into code now:</p>\n\n<pre><code>-- A base case:\nsubsetsOfSize 0 _ = [[]]\n\n-- If there are no elements, there are no subsets:\nsubsetsOfSize _ [] = []\n\n-- The case discussed above:\nsubsetsOfSize n (x:xs) =\n    [x : subs | subs &lt;- subsetsOfSize (n-1) xs] -- ones starting with x,\n    ++ subsetsOfSize n xs                       -- ones starting with other elements.\n</code></pre>\n\n<p>As for efficiency? That's left to you, since this does look a bit like work you should be doing on your own. What do you think is inefficient about this function? Here are a few ideas:</p>\n\n<ul>\n<li>If the length of a list <code>list</code> is <em>m</em>, and m is less than n, then <code>subsetsOfSize n list = []</code>. Do we check for that already?</li>\n<li>It's well-known that <code>++</code> is not performant. What could we use instead? Is there a way to 'rephrase' this function?</li>\n</ul>\n"}], "owner": {"reputation": 9, "user_id": 10464220, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jOWEOpQjsrE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWkhwMWsgxyUpy4zja_mP1cNaLzrg/mo/photo.jpg?sz=128", "display_name": "Rose", "link": "https://stackoverflow.com/users/10464220/rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538791603, "creation_date": 1538789773, "question_id": 52674974, "link": "https://stackoverflow.com/questions/52674974/haskell-generating-subsets-of-length-k", "title": "Haskell - Generating Subsets of Length k", "body": "<p>I have a Haskell function that computes subsets of a set.</p>\n\n<pre><code>subsets :: [a] -&gt; [[a]]\nsubsets [] = [[]]\nsubsets (x:xs) = [zs | ys &lt;- subsets xs, zs &lt;- [ys, (x:ys)]]\n</code></pre>\n\n<p>Example of use:</p>\n\n<pre><code>*Main&gt; subsets [1,2,3]\n[[],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]]\n</code></pre>\n\n<p>If I add the definition: </p>\n\n<pre><code>ksubsets k xs = [ys | ys&lt;-subsets xs, length ys==k]\n</code></pre>\n\n<p>I can compute the subsets of a set of n elements where each subset has exactly k elements</p>\n\n<pre><code>Example of use:\n*Main&gt; ksubsets 3 [1,2,3,4,5]\n[[1,2,3],[1,2,4],[1,3,4],[2,3,4],[1,2,5],[1,3,5],[2,3,5],[1,4,5],[2,4,5], \n[3,4,5]]\n</code></pre>\n\n<p>How could I create a more efficient function that generates the subsets of a set with n elements having exactly k elements but without generating all of the subsets.  How do I only find the subsets of k elements.  </p>\n"}, {"tags": ["haskell", "switch-statement", "maybe"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538775921, "post_id": 52673595, "comment_id": 92276985, "body": "Conceptually it makes more sense to just return a list in that case, since an empty list can be seen as a <code>Nothing</code>, and a non-empty lists all the indices."}], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 3, "last_activity_date": 1538775765, "creation_date": 1538775765, "answer_id": 52673618, "question_id": 52673595, "link": "https://stackoverflow.com/questions/52673595/multiple-just-x-for-case-maybeval-of-in-haskell/52673618#52673618", "title": "Multiple &#39;Just x&#39; for &#39;case maybeVal of&#39; in haskell", "body": "<p>No, it does not work in that way, you need a guard like this:</p>\n\n<pre><code>findElement element list = \n   case (listToMaybe list) of\n      Nothing               -&gt; ...\n      Just e | e == element -&gt; ...\n      Just _                -&gt; ...\n</code></pre>\n\n<p>The problem is: every variable occurring in patterns gets bound to the matching value. If you write <code>Just element</code> this does <em>not</em> refer to the previous variable <code>element</code> but introduces a <em>new</em> local variable instead, must as <code>e</code> in my code above.</p>\n\n<p>So, pattern matching on <code>Just element</code> is very similar to</p>\n\n<pre><code> findElement element list = \n    let element = ...\n    in ...\n</code></pre>\n\n<p>In the last line, the previous variable <code>element</code> gets \"shadowed\" by the later binding.</p>\n\n<p>To avoid this mistake, I strongly suggest to turn on warnings with <code>-Wall</code>: that would point out the dangerous shadowings.</p>\n"}], "owner": {"reputation": 13, "user_id": 9499497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2187ace665957aadebef0a569775334f?s=128&d=identicon&r=PG", "display_name": "gSivaych", "link": "https://stackoverflow.com/users/9499497/gsivaych"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1538780590, "accepted_answer_id": 52673618, "answer_count": 1, "score": 0, "last_activity_date": 1538776306, "creation_date": 1538775611, "last_edit_date": 1538776306, "question_id": 52673595, "link": "https://stackoverflow.com/questions/52673595/multiple-just-x-for-case-maybeval-of-in-haskell", "closed_reason": "Duplicate", "title": "Multiple &#39;Just x&#39; for &#39;case maybeVal of&#39; in haskell", "body": "<p>Do multiple 'Just' cases work in haskell, and in order eg. in </p>\n\n<pre><code>findElement :: Ord a =&gt; a -&gt; [a] -&gt; Maybe Int\nfindElement element list = case (listToMaybe list) of\n                             Nothing -&gt; Nothing\n                             Just element -&gt; Just 0\n                             Just _ -&gt; Just (1 + (fromMaybe 0 (findElement element (tail list))))\n</code></pre>\n\n<p>Only one of Just cases seem to work (which-ever is placed first).\nExpected outcome is-</p>\n\n<pre><code>&gt; findElement 4 [1,2,3,4,5,6,7,8]\nJust 3\n&gt; findElement 3 [5,6,4,7,8,0]\nNothing\n&gt; findElement 4 []\nNothing\n&gt; findElement 'o' \"Hello world\"\nJust 4\n&gt; findElement 'x' \"\"\nNothing\n</code></pre>\n"}, {"tags": ["haskell", "profiling", "gnupg", "gpgme"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 2, "creation_date": 1538780516, "post_id": 52673584, "comment_id": 92278019, "body": "1.5s to initialize the library does seem a bit crazy. Perhaps it&#39;s time to add some cost centers inside the gpgme library so you can see what&#39;s taking so long in there."}, {"owner": {"reputation": 932, "user_id": 6629874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3SUbo.jpg?s=128&g=1", "display_name": "5ndG", "link": "https://stackoverflow.com/users/6629874/5ndg"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1538811000, "post_id": 52673584, "comment_id": 92282522, "body": "What does &quot;add some cost centers&quot; mean please?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1538825689, "post_id": 52673584, "comment_id": 92285980, "body": "<a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/profiling.html\" rel=\"nofollow noreferrer\">GHC\u2019s profiling system assigns costs to cost centres. A cost is simply the time or space (memory) required to evaluate an expression. Cost centres are program annotations around expressions; all costs incurred by the annotated expression are assigned to the enclosing cost centre.</a>"}], "owner": {"reputation": 932, "user_id": 6629874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3SUbo.jpg?s=128&g=1", "display_name": "5ndG", "link": "https://stackoverflow.com/users/6629874/5ndg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1538775561, "creation_date": 1538775561, "question_id": 52673584, "link": "https://stackoverflow.com/questions/52673584/haskell-gpgme-much-slower-at-signing-than-gpg", "title": "Haskell GPGME much slower at signing than GPG", "body": "<p>My program uses GPG for signing files. I'm using <a href=\"http://hackage.haskell.org/package/h-gpgme\" rel=\"nofollow noreferrer\">GPGME</a> in Haskell and the issue is that it is about 16 times slower than using GPG from the command line. Here is an example:</p>\n\n<p>Haskell code:</p>\n\n<pre><code>module Main where\n\nimport qualified Data.ByteString as B\nimport qualified Crypto.Gpgme as Gpg\n\nmain :: IO ()\nmain = do\n    fileContents &lt;- B.readFile \"randomfile\"\n    eitherSigned &lt;- sign fileContents\n    case eitherSigned of\n        Left err -&gt; print err\n        Right signed -&gt;\n            B.writeFile \"signedfile\" signed\n\nsign :: B.ByteString -&gt; IO (Either [Gpg.InvalidKey] B.ByteString)\nsign bs =\n    let\n        sign' :: Gpg.Ctx -&gt; IO (Either [Gpg.InvalidKey] Gpg.Plain)    \n        sign' ctx = Gpg.sign ctx [] Gpg.Normal bs\n    in\n        Gpg.withCtx \"/home/t/.gnupg\" \"C\" Gpg.OpenPGP sign'\n</code></pre>\n\n<p>I generate a junk 10MB file with</p>\n\n<pre><code>$ dd if=/dev/zero of=randomfile bs=10000000 count=1\n</code></pre>\n\n<p>I sign it with GPG from the command line:</p>\n\n<pre><code>$ time gpg -s randomfile\n</code></pre>\n\n<p>and get</p>\n\n<pre><code>gpg -s randomfile  0.14s user 0.00s system 99% cpu 0.136 total\n</code></pre>\n\n<p>I sign it with my Haskell program with</p>\n\n<pre><code>$ time stack exec hasksign\n</code></pre>\n\n<p>and get</p>\n\n<pre><code>stack exec hasksign  0.27s user 0.07s system 14% cpu 2.239 total\n</code></pre>\n\n<p>I tried running the Haskell code again with profiling on and got this result:</p>\n\n<pre><code>       hasksign +RTS -p -RTS randomfile\n\n    total time  =        2.21 secs   (2208 ticks @ 1000 us, 1 processor)\n    total alloc = 115,627,312 bytes  (excludes profiling overheads)\n\nCOST CENTRE        MODULE                SRC                                           %time %alloc\n\nnewCtx             Crypto.Gpgme.Ctx      src/Crypto/Gpgme/Ctx.hs:(21,1)-(51,21)         77.0    0.0\nsignIntern         Crypto.Gpgme.Crypto   src/Crypto/Gpgme/Crypto.hs:(310,1)-(354,14)    20.4    8.6\ncollectResult.go.\\ Crypto.Gpgme.Internal src/Crypto/Gpgme/Internal.hs:(29,21)-(34,46)    2.1   81.9\nmain               Main                  src/Main.hs:(7,1)-(13,43)                       0.1    8.7\n</code></pre>\n\n<p>I have looked in the <a href=\"https://github.com/rethab/h-gpgme/blob/master/src/Crypto/Gpgme/Ctx.hs\" rel=\"nofollow noreferrer\">newCtx</a> function where the time is spent but it is not clear to me what is costing so much.</p>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1538746527, "post_id": 52666615, "comment_id": 92263425, "body": "Do you happen to be on Arch or some related distribution? In <code>$HOME&#47;.stack&#47;config.yaml</code>, is there a line mentioning system packages? (if so, try removing it)"}, {"owner": {"reputation": 9281, "user_id": 393758, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3ee15f717c343aabe3e14db32c22130b?s=128&d=identicon&r=PG", "display_name": "danza", "link": "https://stackoverflow.com/users/393758/danza"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1538749850, "post_id": 52666615, "comment_id": 92265519, "body": "nope, my <code>~&#47;.stack&#47;config.yaml</code> is empty"}, {"owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 1, "creation_date": 1538790191, "post_id": 52666615, "comment_id": 92279472, "body": "What version of stack are you using ?"}, {"owner": {"reputation": 9281, "user_id": 393758, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3ee15f717c343aabe3e14db32c22130b?s=128&d=identicon&r=PG", "display_name": "danza", "link": "https://stackoverflow.com/users/393758/danza"}, "edited": false, "score": 0, "creation_date": 1539087341, "post_id": 52666615, "comment_id": 92366733, "body": "using version 1.7.1"}], "answers": [{"comments": [{"owner": {"reputation": 9281, "user_id": 393758, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3ee15f717c343aabe3e14db32c22130b?s=128&d=identicon&r=PG", "display_name": "danza", "link": "https://stackoverflow.com/users/393758/danza"}, "edited": false, "score": 0, "creation_date": 1540302274, "post_id": 52889493, "comment_id": 92809163, "body": "with this question, i was trying to get into the understanding of the internal data model of some software, like i did successfully <a href=\"https://stackoverflow.com/q/21025314/393758\">in the past</a>. Stack overflow has changed though, so it seems like now it&#39;s not that popular to ask broader questions. Thanks for fixing this specific problem, you get the correct answer :)"}], "tags": [], "owner": {"reputation": 186, "user_id": 9372046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HsNa3.png?s=128&g=1", "display_name": "Hexirp", "link": "https://stackoverflow.com/users/9372046/hexirp"}, "is_accepted": true, "score": 2, "last_activity_date": 1539941015, "creation_date": 1539941015, "answer_id": 52889493, "question_id": 52666615, "link": "https://stackoverflow.com/questions/52666615/the-following-packages-are-broken-because-other-packages-they-depend-on-are-miss/52889493#52889493", "title": "the following packages are broken because other packages they depend on are missing. these broken packages must be rebuilt before they can be used", "body": "<p>This problem has already been reported and resolved. The fix was included in <code>stack-1.9.1</code>.</p>\n\n<ul>\n<li><a href=\"https://github.com/jaspervdj/hakyll/issues/659\" rel=\"nofollow noreferrer\">https://github.com/jaspervdj/hakyll/issues/659</a></li>\n<li><a href=\"https://github.com/commercialhaskell/stack/issues/4071\" rel=\"nofollow noreferrer\">https://github.com/commercialhaskell/stack/issues/4071</a></li>\n<li><a href=\"https://github.com/commercialhaskell/stack/pull/4111\" rel=\"nofollow noreferrer\">https://github.com/commercialhaskell/stack/pull/4111</a></li>\n</ul>\n"}], "owner": {"reputation": 9281, "user_id": 393758, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/3ee15f717c343aabe3e14db32c22130b?s=128&d=identicon&r=PG", "display_name": "danza", "link": "https://stackoverflow.com/users/393758/danza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 52889493, "answer_count": 1, "score": -1, "last_activity_date": 1539941015, "creation_date": 1538745760, "question_id": 52666615, "link": "https://stackoverflow.com/questions/52666615/the-following-packages-are-broken-because-other-packages-they-depend-on-are-miss", "title": "the following packages are broken because other packages they depend on are missing. these broken packages must be rebuilt before they can be used", "body": "<p>The question title comes from an error returned by <a href=\"https://docs.haskellstack.org/en/stable/GUIDE/\" rel=\"nofollow noreferrer\">the Haskell tool Stack</a> and it's followed by a line containing the following:</p>\n\n<pre><code>installed package &lt;a&gt; is broken due to missing package &lt;b&gt;\n</code></pre>\n\n<p>One can find reports of similar errors online. In my case the specific error is:</p>\n\n<pre><code>installed package haddock-library-1.5.0.1 is broken due to missing package haddock-library-1.5.0.1-919WkNWGnku6Kvc4vlhbv1-attoparsec\n</code></pre>\n\n<p>Returned during the installation of Pandoc. Here i am asking about the generic error, because i feel like it refers to something that i didn't learn reading the Stack documentation. Maybe it's obvious, or maybe if other people turn to have the same problem we could think about expanding the doc.</p>\n\n<p>So, package <code>a</code> is broken because package <code>b</code> is missing. Missing from where? From the resolver? Is there anything i can do, or should i rather change the resolver? The broken packages must be rebuilt ... after i changed the resolver? If i want to understand the error better do i want to look on Stack, Cabal or GHC? Or do we want people to open issues on the tracker for package <code>a</code> when this error happens?</p>\n"}, {"tags": ["haskell", "testing", "quickcheck", "doctest"], "comments": [{"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1538746966, "post_id": 52666241, "comment_id": 92263735, "body": "Can you not import modules in <a href=\"https://github.com/sol/doctest#setup-code\" rel=\"nofollow noreferrer\">doctest&#39;s setup code block</a>?"}, {"owner": {"reputation": 3411, "user_id": 69663, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aiMZN.png?s=128&g=1", "display_name": "unhammer", "link": "https://stackoverflow.com/users/69663/unhammer"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1538837744, "post_id": 52666241, "comment_id": 92289044, "body": "Not if they&#39;re not a part of the library, as far as I can tell. (Or, if I can, I&#39;d like to know how!)"}], "answers": [{"comments": [{"owner": {"reputation": 3411, "user_id": 69663, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aiMZN.png?s=128&g=1", "display_name": "unhammer", "link": "https://stackoverflow.com/users/69663/unhammer"}, "edited": false, "score": 0, "creation_date": 1538837708, "post_id": 52673289, "comment_id": 92289035, "body": "Say I have instances defined in <code>test&#47;QCInstances.hs</code>, which is under cabal&#39;s <code>test-suite</code>, which depends on QuickCheck. If I now run <code>stack exec doctest src&#47;Foo.hs</code> where Foo is under cabal&#39;s <code>library</code> I get <code>Could not find module \u2018QCInstances\u2019</code>."}, {"owner": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "reply_to_user": {"reputation": 3411, "user_id": 69663, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aiMZN.png?s=128&g=1", "display_name": "unhammer", "link": "https://stackoverflow.com/users/69663/unhammer"}, "edited": false, "score": 0, "creation_date": 1538838173, "post_id": 52673289, "comment_id": 92289161, "body": "Did you add the module and source directory (test) to the test-suite of the cabal file? Did you add the line <code>-- &gt;&gt;&gt; import QCInstances</code> under the line <code>-- $setup</code> in the file with the doctests?"}, {"owner": {"reputation": 3411, "user_id": 69663, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aiMZN.png?s=128&g=1", "display_name": "unhammer", "link": "https://stackoverflow.com/users/69663/unhammer"}, "edited": false, "score": 0, "creation_date": 1538849489, "post_id": 52673289, "comment_id": 92292106, "body": "I&#39;ve tried putting <code>QCInstances.hs</code> in <code>other-modules</code> of <code>test-suite</code> (cabal complains <code>Unknown field</code> if I try <code>exposed-modules</code> \u2013 I guess that&#39;s not supported for test-suites), but it still fails. It doesn&#39;t seem to matter if I try importing it in <code>-- $setup</code> or in the actual test \u2013 it still fails to import. And, I mean, this makes sense, why would doctest import modules from a test-suite when it&#39;s running the repl of the main library? Just like I can&#39;t import any test-suite modules when running the regular stack repl."}, {"owner": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "reply_to_user": {"reputation": 3411, "user_id": 69663, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aiMZN.png?s=128&g=1", "display_name": "unhammer", "link": "https://stackoverflow.com/users/69663/unhammer"}, "edited": false, "score": 0, "creation_date": 1538855366, "post_id": 52673289, "comment_id": 92293634, "body": "Try adding <code>-isrc test</code> to the parameters of doctest (not exactly sure how to do that with stack exec). Alternatively, you could use <code>stack test</code> and have a main file for your test suite that calls the doctest function: <a href=\"https://github.com/sol/doctest#cabal-integration\" rel=\"nofollow noreferrer\">github.com/sol/doctest#cabal-integration</a>"}, {"owner": {"reputation": 3411, "user_id": 69663, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aiMZN.png?s=128&g=1", "display_name": "unhammer", "link": "https://stackoverflow.com/users/69663/unhammer"}, "edited": false, "score": 0, "creation_date": 1538910845, "post_id": 52673289, "comment_id": 92302948, "body": "<code>stack exec doctest -- -isrc test src&#47;Foo.hs</code> gives <code>test&#47;QCInstances.hs:26:53:   Couldn&#39;t match expected type \u2018QC.Gen MyType\u2019   with actual type \u2018QuickCheck-2.8.2@Quick_AOTWGguKtKLBCUhkngiI4l:Test.QuickChe&zwnj;&#8203;ck.Gen.Gen  a5 NB: \u2018QC.Gen\u2019   is defined in \u2018Test.QuickCheck.Gen\u2019   in package \u2018QuickCheck-2.8.2@Quick_6TxL5Cx3o2p0HsyT59KWiD\u2019</code> (and I had to delete some hs files from test first, o/w I get multiple Main&#39;s)"}], "tags": [], "owner": {"reputation": 947, "user_id": 934323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed728497754b4892f67b5fa8b20b9ec2?s=128&d=identicon&r=PG", "display_name": "Jonas Dureg&#229;rd", "link": "https://stackoverflow.com/users/934323/jonas-dureg%c3%a5rd"}, "is_accepted": false, "score": 0, "last_activity_date": 1538773670, "creation_date": 1538773670, "answer_id": 52673289, "question_id": 52666241, "link": "https://stackoverflow.com/questions/52666241/doctest-quickcheck-can-i-import-qc-instances-only-in-doctests/52673289#52673289", "title": "doctest QuickCheck \u2013 can I import QC instances only in doctests?", "body": "<p>Here is an example of exactly what you are looking for:\n<a href=\"https://github.com/sol/doctest#quickcheck-properties\" rel=\"nofollow noreferrer\">https://github.com/sol/doctest#quickcheck-properties</a></p>\n\n<p>Just add whatever imports you need in the setup code.</p>\n"}], "owner": {"reputation": 3411, "user_id": 69663, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/aiMZN.png?s=128&g=1", "display_name": "unhammer", "link": "https://stackoverflow.com/users/69663/unhammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1538773670, "creation_date": 1538744512, "question_id": 52666241, "link": "https://stackoverflow.com/questions/52666241/doctest-quickcheck-can-i-import-qc-instances-only-in-doctests", "title": "doctest QuickCheck \u2013 can I import QC instances only in doctests?", "body": "<p>I'm using <a href=\"https://github.com/sol/doctest#readme\" rel=\"nofollow noreferrer\">doctest</a>, and like the fact that I can test non-exported functions from where they're defined:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>module Foo (frobnicate) where\n\n-- |\n-- &gt;&gt;&gt; randomInt = 42\n-- True\nrandomInt :: Int\nrandomInt = 42\n</code></pre>\n\n<p>I've so far kept QuickCheck instances in the <code>test-suite</code> so the <code>library</code> doesn't depend on testing packages, but this means I can't run QuickCheck from doctests.</p>\n\n<p>I can of course not use doctest and run QC from <code>test-suite</code>, but then I have to export each function that I want to test. </p>\n\n<p>Is there a way to have doctests that use QC instances without having the main <code>library</code> depend on QC, (and without re-writing the instances in the doctest \"repl\")?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1538742957, "post_id": 52665382, "comment_id": 92261207, "body": "I think the sequential one is optimized to run in constant memory: &quot;66,688 bytes maximum residency&quot;. The parallel one instead uses &gt;2GB. I don&#39;t know why."}], "answers": [{"comments": [{"owner": {"reputation": 1409, "user_id": 7518695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dT38T.jpg?s=128&g=1", "display_name": "GrayCat", "link": "https://stackoverflow.com/users/7518695/graycat"}, "edited": false, "score": 0, "creation_date": 1538779480, "post_id": 52669813, "comment_id": 92277782, "body": "I tested you version - it sped up the execution significantly. Also inspecting it in ThreadScope revealed that execution took place on 2 cores using them quite efficiently. Thank you!"}, {"owner": {"reputation": 1409, "user_id": 7518695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dT38T.jpg?s=128&g=1", "display_name": "GrayCat", "link": "https://stackoverflow.com/users/7518695/graycat"}, "edited": false, "score": 0, "creation_date": 1538779661, "post_id": 52669813, "comment_id": 92277824, "body": "still I am wondering what was GCd so excessively in my implementation."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 1409, "user_id": 7518695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dT38T.jpg?s=128&g=1", "display_name": "GrayCat", "link": "https://stackoverflow.com/users/7518695/graycat"}, "edited": false, "score": 1, "creation_date": 1538780798, "post_id": 52669813, "comment_id": 92278074, "body": "@GrayCat I think it&#39;s just having a big list at all. If you toss in some <code>{-# NOINLINE #-}</code> then the sequential version also gets very inefficient."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 3, "last_activity_date": 1538756765, "creation_date": 1538756765, "answer_id": 52669813, "question_id": 52665382, "link": "https://stackoverflow.com/questions/52665382/parallel-numeric-integrator-function-slower-than-sequential-version-why/52669813#52669813", "title": "Parallel numeric integrator function slower than sequential version. Why?", "body": "<p>A strategy like <code>parListChunk</code> only makes sense when by far most of the computational cost is in evaluating the individual list elements, compared to the overhead of building the list spine etc. in the first place. With <code>integrateT</code> over a simple polynomial however, these elements are very cheap to compute and <em>most</em> of the cost will be in list overhead. The only reason it still runs efficiently in the sequential version is that GHC can inline/fuse most of that business away, but apparently not in the parallelised version.</p>\n\n<p>Solution: let <em>each thread</em> run a properly fusable sequential version, i.e. divide up the <em>interval</em> rather than its discretised list form. Like</p>\n\n<pre><code>integrateT :: (Fractional a, Enum a, NFData a) =&gt; (a -&gt; a) -&gt; (a,a) -&gt; a -&gt; a \nintegrateT f (ini, fin) dx \n  = let lst = map f [ini,ini+dx..fin]\n    in sum lst * dx - 0.5 * (f ini + f fin) * dx\n\nintegrateT_par :: (Fractional a, Enum a, NFData a) =&gt; (a -&gt; a) -&gt; (a,a) -&gt; a -&gt; a\nintegrateT_par f (l,r) dx\n  = let chunks = [ integrateT f (l + i*wChunk, l + (i+1)*wChunk) dx\n                 | i&lt;-[0..nChunks-1] ]\n               `using` parList rdeepseq\n    in sum chunks\n where nChunks = 100\n       wChunk = (r-l)/nChunks\n</code></pre>\n\n<p>This will then not have significantly worse memory or performance than the sequential version.</p>\n\n<p>Mind, as I test it now it doesn't actually seem to run in parallel at all, but pretty sure I just missed something in the setup...</p>\n"}], "owner": {"reputation": 1409, "user_id": 7518695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dT38T.jpg?s=128&g=1", "display_name": "GrayCat", "link": "https://stackoverflow.com/users/7518695/graycat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 52669813, "answer_count": 1, "score": 6, "last_activity_date": 1538756765, "creation_date": 1538741553, "question_id": 52665382, "link": "https://stackoverflow.com/questions/52665382/parallel-numeric-integrator-function-slower-than-sequential-version-why", "title": "Parallel numeric integrator function slower than sequential version. Why?", "body": "<p>I am learning parallel Strategies in Haskell.</p>\n\n<h2>Problem</h2>\n\n<p>I wrote integrator function based on trapezoidal rule (sequential):</p>\n\n<pre><code>integrateT :: (Fractional a, Enum a, NFData a) =&gt; (a -&gt; a) -&gt; (a,a) -&gt; a -&gt; a \nintegrateT f (ini, fin) dx \n  = let lst = map f [ini,ini+dx..fin]\n    in sum lst * dx - 0.5 * (f ini + f fin) * dx\n</code></pre>\n\n<p>And I run it as follows:</p>\n\n<pre><code>main = do\n  print $ (integrateT (\\x -&gt; x^4 - x^3 + x^2 + x/13 + 1) (0.0,1000000.0) 0.01 :: Double)\n</code></pre>\n\n<p>Here are statistics from run:</p>\n\n<pre><code>stack exec lab5 -- +RTS -ls -N2 -s\n1.9999974872991426e29\n  18,400,147,552 bytes allocated in the heap\n      20,698,168 bytes copied during GC\n          66,688 bytes maximum residency (2 sample(s))\n          35,712 bytes maximum slop\n               3 MB total memory in use (0 MB lost due to fragmentation)\n\n                                 Tot time (elapsed)  Avg pause  Max pause\n  Gen  0     17754 colls, 17754 par    0.123s   0.105s     0.0000s    0.0011s\n  Gen  1         2 colls,     1 par    0.000s   0.000s     0.0001s    0.0002s\n\n  Parallel GC work balance: 0.27% (serial 0%, perfect 100%)\n\n  TASKS: 6 (1 bound, 5 peak workers (5 total), using -N2)\n\n  SPARKS: 0 (0 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)\n\n  INIT    time    0.001s  (  0.001s elapsed)\n  MUT     time    6.054s  (  5.947s elapsed)\n  GC      time    0.123s  (  0.106s elapsed)\n  EXIT    time    0.001s  (  0.008s elapsed)\n  Total   time    6.178s  (  6.061s elapsed)\n\n  Alloc rate    3,039,470,269 bytes per MUT second\n\n  Productivity  98.0% of total user, 98.2% of total elapsed\n\ngc_alloc_block_sync: 77\nwhitehole_spin: 0\ngen[0].sync: 0\ngen[1].sync: 0\n</code></pre>\n\n<p>As you can see it runs pretty fast. However when I attempt to make it parallel like this for example:</p>\n\n<pre><code>integrateT :: (Fractional a, Enum a, NFData a) =&gt; (a -&gt; a) -&gt; (a,a) -&gt; a -&gt; a \nintegrateT f (ini, fin) dx \n  = let lst = (map f [ini,ini+dx..fin]) `using` parListChunk 100 rdeepseq\n    in sum lst * dx - 0.5 * (f ini + f fin) * dx\n</code></pre>\n\n<p>It always runs much longer. Here are example statistics from run above:</p>\n\n<pre><code>stack exec lab5 -- +RTS -ls -N2 -s\n1.9999974872991426e29\n  59,103,320,488 bytes allocated in the heap\n  17,214,458,128 bytes copied during GC\n  2,787,092,160 bytes maximum residency (15 sample(s))\n  43,219,264 bytes maximum slop\n        5570 MB total memory in use (0 MB lost due to fragmentation)\n\n                                 Tot time (elapsed)  Avg pause  Max pause\n  Gen  0     44504 colls, 44504 par   16.907s  10.804s     0.0002s    0.0014s\n  Gen  1        15 colls,    14 par    4.006s   2.991s     0.1994s    1.2954s\n\n  Parallel GC work balance: 33.60% (serial 0%, perfect 100%)\n\n  TASKS: 6 (1 bound, 5 peak workers (5 total), using -N2)\n\n  SPARKS: 1000001 (1000001 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)\n\n  INIT    time    0.001s  (  0.001s elapsed)\n  MUT     time   14.298s  ( 12.392s elapsed)\n  GC      time   20.912s  ( 13.795s elapsed)\n  EXIT    time    0.000s  (  0.003s elapsed)\n  Total   time   35.211s  ( 26.190s elapsed)\n\n  Alloc rate    4,133,806,996 bytes per MUT second\n\n  Productivity  40.6% of total user, 47.3% of total elapsed\n\ngc_alloc_block_sync: 2304055\nwhitehole_spin: 0\ngen[0].sync: 0\ngen[1].sync: 1105370\n</code></pre>\n\n<p>Few things I see here:</p>\n\n<ul>\n<li>Much more memory used</li>\n<li>Longer time</li>\n<li>A lot of time spent in GC</li>\n</ul>\n\n<h2>What else I did</h2>\n\n<p>I experimented a bit:</p>\n\n<ul>\n<li>Used parMap, parList and custom parListChunk' function to evaluate list - every time with result much worse than sequential version</li>\n<li>Used different chunk sizes - from very small like 5 to as big as half of the list's length - result was much worse than sequential version every time</li>\n<li>Changed factors in main function to something very big as as x^123442 for example added more divisions instead of multiplications etc. And also I reduced domain of the problem. All to make fewer sparks but more expensive computionally each. Here I got results similar to those of sequential version (which run about 28 sec with those new powers) - parallel run finished in 31 sec</li>\n<li>Tested every run with Threadscope to ensure two cores were used when expected - they were!</li>\n</ul>\n\n<h2>Question</h2>\n\n<ol>\n<li>As parallel performance improved with increasing computation cost of each chunk (e.g x^12345) and decreasing number of chunks - is it that switching between chunks kills performance in case when factors are very small (e.g x^4, x^3 - fast to compute), hence sequential version is faster? Is there a way to successfully parallelize it with better performance?</li>\n<li>Why parallel version used so much memory and GC time?</li>\n<li>How to reduce time spent in GC in parallel version?</li>\n</ol>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1538740685, "post_id": 52665150, "comment_id": 92259938, "body": "Haskell has no autoconversions in general. All conversions are done <i>explicitly</i>."}, {"owner": {"reputation": 349, "user_id": 5006014, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/437a8a23959c7c7150c242c9a3efab0e?s=128&d=identicon&r=PG&f=1", "display_name": "stefa ng", "link": "https://stackoverflow.com/users/5006014/stefa-ng"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1538740986, "post_id": 52665150, "comment_id": 92260099, "body": "@carcigenicate no there is only this one with ByteString <a href=\"http://hackage.haskell.org/package/http-conduit-2.3.2/docs/Network-HTTP-Simple.html#v:addRequestHeader\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/http-conduit-2.3.2/docs/&hellip;</a>"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1538741279, "post_id": 52665150, "comment_id": 92260249, "body": "You may perhaps use the <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-OverloadedStrings\" rel=\"nofollow noreferrer\"><code>{-# LANGUAGE OverloadedStrings #-}</code></a> language extension."}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 5006014, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/437a8a23959c7c7150c242c9a3efab0e?s=128&d=identicon&r=PG&f=1", "display_name": "stefa ng", "link": "https://stackoverflow.com/users/5006014/stefa-ng"}, "edited": false, "score": 0, "creation_date": 1538741656, "post_id": 52665326, "comment_id": 92260460, "body": "thx. thats it. i checked that. it only works with static-string-literals not with string-variables. \ud83d\udc4c"}, {"owner": {"reputation": 1706, "user_id": 1840613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfd4d21060ccd9b972864e0f6cb8c4?s=128&d=identicon&r=PG", "display_name": "Jeremy List", "link": "https://stackoverflow.com/users/1840613/jeremy-list"}, "reply_to_user": {"reputation": 349, "user_id": 5006014, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/437a8a23959c7c7150c242c9a3efab0e?s=128&d=identicon&r=PG&f=1", "display_name": "stefa ng", "link": "https://stackoverflow.com/users/5006014/stefa-ng"}, "edited": false, "score": 0, "creation_date": 1538952035, "post_id": 52665326, "comment_id": 92313849, "body": "@stefang with string-variables you generally want to be more specific than &quot;convert to a bytestring&quot; since there are several different incompatible ways to do that (not a Haskell problem: it&#39;s just more visible in Haskell since it&#39;s one of the older languages to use unicode strings by default)"}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 5, "last_activity_date": 1538741341, "creation_date": 1538741341, "answer_id": 52665326, "question_id": 52665150, "link": "https://stackoverflow.com/questions/52665150/is-there-a-auto-conversion-from-string-to-bytestring/52665326#52665326", "title": "Is there a auto-conversion from String to ByteString?", "body": "<p>There is an \"autoconversion\" for string <em>literals</em>, i.e. for those strings given explicitly between quotes <code>\"...\"</code>, like your <code>\"application/json\"</code>.</p>\n\n<p>To turn it on you need the <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html?highlight=overloaded#extension-OverloadedStrings\" rel=\"noreferrer\"><code>OverloadedStrings</code></a> extension.</p>\n\n<p>Other string expressions (e.g., variables of type <code>String</code>, return values of functions, ...) will not be automatically converted.</p>\n"}], "owner": {"reputation": 349, "user_id": 5006014, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/437a8a23959c7c7150c242c9a3efab0e?s=128&d=identicon&r=PG&f=1", "display_name": "stefa ng", "link": "https://stackoverflow.com/users/5006014/stefa-ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 52665326, "answer_count": 1, "score": 0, "last_activity_date": 1538741753, "creation_date": 1538740664, "last_edit_date": 1538741753, "question_id": 52665150, "link": "https://stackoverflow.com/questions/52665150/is-there-a-auto-conversion-from-string-to-bytestring", "title": "Is there a auto-conversion from String to ByteString?", "body": "<pre><code>addRequestHeader (H.hContentType, \"application/json\")\n</code></pre>\n\n<p>this is a example of the usage of Network.HTTP.Simple package, i have seen a couple of times. how does that work to pass a String to that function as its signature is:</p>\n\n<pre><code>addRequestHeader :: Network.HTTP.Types.Header.HeaderName\n -&gt; Data.ByteString.Internal.ByteString -&gt; Request -&gt; Request\n</code></pre>\n\n<p>when i try this, i get the error <strong>couldn't match expected type \u2018C8.ByteString\u2019 with actual type \u2018[Char]\u2019</strong>, so i have to use <strong>Data.ByteString.Char8.pack</strong> function to make this work. why don't the others have to do that? is there a auto-convertion or whats going on here?</p>\n"}, {"tags": ["haskell", "compilation", "decompiling"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1538737291, "post_id": 52664117, "comment_id": 92258089, "body": "Well the interpreter is free to do what it want, but most interpreters will <i>not</i> construct a huge (lambda)expression. In <i>lambda calculus</i>, it holds that you can express every Haskell program with a single lambda-expression. But in reality a compiler is more &quot;pragmatic&quot;. In lambda-calculus, integers are for example typically implemented as peano numbers, but that would make it very slow."}], "answers": [{"tags": [], "owner": {"reputation": 3016, "user_id": 3190654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c321c5241605255cae9ecf3fb2dffc0b?s=128&d=identicon&r=PG", "display_name": "bergey", "link": "https://stackoverflow.com/users/3190654/bergey"}, "is_accepted": true, "score": 3, "last_activity_date": 1538758225, "creation_date": 1538758225, "answer_id": 52670138, "question_id": 52664117, "link": "https://stackoverflow.com/questions/52664117/generalizing-compiling-haskell-code-into-a-lambda/52670138#52670138", "title": "Generalizing/compiling haskell code into a lambda", "body": "<p>Let's make a distinction between the <em>semantics</em> of Haskell and the implementation of GHC.  Mostly because we use different terms for language semantics than for assembly, but also because some other compiler might do things differently than GHC.</p>\n\n<p>Every Haskell program defines <code>main</code>, which is an <em>expression</em> of type <code>IO ()</code>.  I don't like to call it a \"lambda expression\" because the type shows that it's not a function.  The definition of <code>main</code> is some nested tree of function calls.  Even the sequential lines in a <code>do</code> block are defined as calls to the functions <code>(&gt;&gt;)</code> and <code>(&gt;&gt;=)</code>.</p>\n\n<p>GHC uses heuristics to decide what to inline, to get the best runtime performance.  It will usually inline small expressions that aren't recursive. I believe the runtime system maintains a callstack of functions currently being evaluated, not unlike the runtime result of compiling function calls in C or other imperative languages. </p>\n\n<p>GHC provides <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/debugging.html#dumping-out-compiler-intermediate-structures\" rel=\"nofollow noreferrer\">many options for printing intermediate stages of compilation</a>.  I'm not sure which you will find interesting.  Core is the lowest-level representation that feels like Haskell.  Cmm (also called C--) is the highest-level representation that feels like assembly.</p>\n"}], "owner": {"reputation": 1192, "user_id": 7023187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/321015561587503/picture?type=large", "display_name": "Rares Dima", "link": "https://stackoverflow.com/users/7023187/rares-dima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 52670138, "answer_count": 1, "score": 0, "last_activity_date": 1538758225, "creation_date": 1538737138, "question_id": 52664117, "link": "https://stackoverflow.com/questions/52664117/generalizing-compiling-haskell-code-into-a-lambda", "title": "Generalizing/compiling haskell code into a lambda", "body": "<p>I am pretty much 90% sure that the title of this question is wrong however I have no idea what the right title would be (I will gladly edit the title if suggestions come along!). </p>\n\n<p>When reading up on Haskell and the core principles of the language you always find that it is a language \"based on lambda expressions\". I remember reading somewhere that this means that at the end, the <code>main</code> function just gets \"proprocessed\" into one big lambda, everything gets inlined, basically your entire code becomes one single, huge, lambda expression. </p>\n\n<p>My questions are:</p>\n\n<ol>\n<li><p>Is what I said above true?</p></li>\n<li><p>If the answer to question 1 is \"yes\", is there any... decompiler/partial compiler/preprocessor? I know about <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">this</a> that lets you see the assembly code behind languages like C/++ and Haskell but is there anything I could use to explore the generated lambda expression?</p></li>\n</ol>\n\n<p>This question is asked from a purely educational standpoint and not intended to seek a solution to a particular problem. I simply wish to learn more about a language I find extremely fascinating.</p>\n"}, {"tags": ["excel", "vba", "haskell", "dll", "ghc"], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 10792244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be8f3e8c6d471f9114038f20a72006b?s=128&d=identicon&r=PG&f=1", "display_name": "A. Soikkeli", "link": "https://stackoverflow.com/users/10792244/a-soikkeli"}, "is_accepted": true, "score": 5, "last_activity_date": 1544824649, "creation_date": 1544824649, "answer_id": 53787420, "question_id": 52662440, "link": "https://stackoverflow.com/questions/52662440/export-haskell-lib-as-dll/53787420#53787420", "title": "Export Haskell lib as DLL", "body": "<p>I was struggling with the same problem, but after a long fight, I managed to run the command from 64bit Excel. Follow these steps:</p>\n\n<p>1) Create Adder.hs (notice ccall, not stdcall):</p>\n\n<pre><code>{-# LANGUAGE ForeignFunctionInterface #-}\nmodule Adder where\n\nadder :: Int -&gt; Int -&gt; IO Int  -- gratuitous use of IO\nadder x y = return (x+y)\n\nforeign export ccall adder :: Int -&gt; Int -&gt; IO Int\n</code></pre>\n\n<p>2) Create StartEnd.c:</p>\n\n<pre><code>#include &lt;Rts.h&gt;\n\nvoid HsStart()\n{\n   int argc = 1;\n   char* argv[] = {\"ghcDll\", NULL}; // argv must end with NULL\n\n   // Initialize Haskell runtime\n   char** args = argv;\n   hs_init(&amp;argc, &amp;args);\n}\n\nvoid HsEnd()\n{\n   hs_exit();\n}\n</code></pre>\n\n<p>3) Compile these files:</p>\n\n<pre><code>ghc -c Adder.hs\nghc -c StartEnd.c\n</code></pre>\n\n<p>4) Copy following files from \"C:\\Program Files\\Haskell Platform\\8.6.3\\lib\\include\" to your build folder (remember to put stg/Types.h into stg folder). You may also copy all the contents of /include folder if you wish:</p>\n\n<pre><code>HsFFI.h\nghcconfig.h\nghcautoconf.h\nghcplatform.h\nstg/Types.h\n</code></pre>\n\n<p>5) Create the dll:</p>\n\n<pre><code>ghc -shared -o Adder.dll Adder.o Adder_stub.h StartEnd.o\n</code></pre>\n\n<p>6) Now open the Excel and use this macro (use first HsStart before Adder). Remember to link to your own folder:</p>\n\n<pre><code>Private Declare PtrSafe Function Adder Lib \"C:\\Users\\User\\haskell\\Adder.dll\" Alias \"adder\" _\n  (ByVal x As Long, ByVal y As Long) As Long\n\nPrivate Declare PtrSafe Sub HsStart Lib \"C:\\Users\\User\\haskell\\Adder.dll\" ()\nPrivate Declare PtrSafe Sub HsEnd Lib \"C:\\Users\\User\\haskell\\Adder.dll\" ()\n\nPrivate Sub Document_Close()\nHsEnd\nEnd Sub\n\nPrivate Sub Document_Open()\nHsStart\nEnd Sub\n\nPublic Sub Test()\nMsgBox \"12 + 5 = \" &amp; Adder(12, 5)\nEnd Sub\n</code></pre>\n\n<p>7) Be amazed!</p>\n"}], "owner": {"reputation": 542, "user_id": 4440871, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/8gHuC.jpg?s=128&g=1", "display_name": "Fabian Schneider", "link": "https://stackoverflow.com/users/4440871/fabian-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 2, "accepted_answer_id": 53787420, "answer_count": 1, "score": 5, "last_activity_date": 1544824649, "creation_date": 1538731554, "last_edit_date": 1539153392, "question_id": 52662440, "link": "https://stackoverflow.com/questions/52662440/export-haskell-lib-as-dll", "title": "Export Haskell lib as DLL", "body": "<p>I am working with GHC version 7.6.1, following the steps in the docs for creating a DLL from a Haskell lib for using it in VBA:\n<a href=\"https://downloads.haskell.org/~ghc/7.6.1/docs/html/users_guide/win32-dlls.html#win32-dlls-create\" rel=\"nofollow noreferrer\">GHC Docs 7.6.1 # Make a DLL</a></p>\n\n<p>The files I use are the exact same ones as in the Docs. When it comes to compiling, the following to commands work nearly as expected:</p>\n\n<pre><code>ghc -c Adder.hs\nghc -c StartEnd.c\n</code></pre>\n\n<p>The first command returns this:</p>\n\n<pre><code>Adder.hs:7:1: Warning:\n    the 'stdcall' calling convention is unsupported on this platform,\n    treating as ccall\n    When checking declaration:\n      foreign export stdcall \"adder\" adder :: Int -&gt; Int -&gt; IO Int\n</code></pre>\n\n<p>Which I guess should be fine...</p>\n\n<p>However, the last command <code>ghc -shared -o Adder.dll Adder.o Adder_stub.o StartEnd.o</code> produces this error:</p>\n\n<pre><code>Adder_stub.h:1:19:  fatal error: HsFFI.h: No such file or directory\ncompilation terminated.\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/33272417/trying-to-export-a-haskell-lib-for-c\">This thread</a> pointed me towards recognizing that GHC isn't using the header files located in its <code>GHC-HOME/lib/include</code>.\nThe solution in this thread was to use GHC with the option <code>-I [path to include-folder]</code>, however, when trying it (and looking at the man and docs) there is no such option for this version of GHC; nor is there in the newer versions up to 8.4.3.</p>\n\n<p>When <a href=\"https://downloads.haskell.org/~ghc/7.6.1/docs/html/users_guide/modes.html\" rel=\"nofollow noreferrer\">reading this docs</a> I also encountered that it should be possible to use the option <code>mk-dll</code> under windows to generate dlls; however, according to the man page of my installed GHC, there is no such option, even though I downloaded and installed the windows 64-bit installer.</p>\n\n<p>I then tried to just copy the include folder to some other location; copying the files needed by the third compilation command into the folder too and tried it again. It successfully compiled the DLL;</p>\n\n<p>However, when I try to use the DLL from an Excel(macro-enabled) workbook, I get the error DLL not found. When attempting to reference the DLL in excel (via Tools->References->Browse-> chooseDll) it tells me that it can't add the DLL.</p>\n\n<p>Examining the DLL with DependencyWalker, I get this error:</p>\n\n<pre><code>Error: At least one required implicit or forwarded dependency was not found.\nError: At least one module has an unresolved import due to a missing export function in an implicitly dependent module.\nError: Modules with different CPU types were found.\nWarning: At least one delay-load dependency module was not found.\nWarning: At least one module has an unresolved import due to a missing export function in a delay-load dependent module.\n</code></pre>\n\n<p>Do you have any ideas on how to resolve this?\nThanks a lot...</p>\n\n<h2>Update</h2>\n\n<p>When I try to use the compiled library from C++ as discribed in the docs I end up with this error message:</p>\n\n<pre><code>PS C:\\Users\\dev\\programming\\excel_haskell_binding&gt; ghc -o tester.exe .\\Tester.cpp .\\include\\Adder.dll.a\nC:\\Users\\dev\\AppData\\Local\\Temp\\ghc4088_0\\ghc4088_0.o:ghc4088_0.c:(.text+0x0): multiple definition of `main'\nTester.o:Tester.cpp:(.text+0x0): first defined here\nC:\\Users\\dev\\AppData\\Local\\Temp\\ghc4088_0\\ghc4088_0.o:ghc4088_0.c:(.text+0x4f): undefined reference to `ZCMain_main_closure'\nc:/ghc/ghc-7.6.1/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.6.3/../../../../x86_64-w64-mingw32/bin/ld.exe: C:\\Users\\dev\\AppData\\Local\\Temp\\ghc4088_0\\ghc4088_0.o: bad reloc address 0x0 in section `.pdata'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<h2>Update 2</h2>\n\n<p>I am also trying a different approach; see this question <a href=\"https://stackoverflow.com/questions/52734002/ghc-compile-dll-for-use-in-vba\">GHC compile DLL for use in VBA</a></p>\n"}, {"tags": ["haskell", "esqueleto", "haskell-persistent"], "answers": [{"tags": [], "owner": {"reputation": 3016, "user_id": 3190654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c321c5241605255cae9ecf3fb2dffc0b?s=128&d=identicon&r=PG", "display_name": "bergey", "link": "https://stackoverflow.com/users/3190654/bergey"}, "is_accepted": true, "score": 1, "last_activity_date": 1538746669, "creation_date": 1538746669, "answer_id": 52666918, "question_id": 52657920, "link": "https://stackoverflow.com/questions/52657920/mixing-esqueleto-and-persistent-in-same-function/52666918#52666918", "title": "Mixing Esqueleto and Persistent in same function", "body": "<p>You can add <code>BackendCompatible SqlBackend backend</code> to the constraints list of <code>handleFactionConstruction</code>, to get:</p>\n\n<pre><code>handleFactionConstruction :: (BaseBackend backend ~ SqlBackend,\n    BackendCompatible SqlBackend backend\n    PersistStoreWrite backend, PersistQueryRead backend, \n    PersistUniqueRead backend, MonadIO m) =&gt;\n    Time -&gt; Entity Faction -&gt; ReaderT backend m ()\n</code></pre>\n\n<p>More generally, a <code>Could not deduce</code> error means that your type signature is more general than one of the functions it allows.  There are three ways to handle this:</p>\n\n<ul>\n<li>add the constraint, making the type signature more specific (as above)</li>\n<li>make the function you're calling (<code>loadPlanetConstructionQueue</code>) more general</li>\n<li>if neither of the above is possible, rewrite the code some other way</li>\n</ul>\n"}], "owner": {"reputation": 125, "user_id": 1270776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cb6ca1df7bc96e5c5662ccb6a698938?s=128&d=identicon&r=PG", "display_name": "Tuukka Turto", "link": "https://stackoverflow.com/users/1270776/tuukka-turto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 52666918, "answer_count": 1, "score": 1, "last_activity_date": 1538746669, "creation_date": 1538709723, "question_id": 52657920, "link": "https://stackoverflow.com/questions/52657920/mixing-esqueleto-and-persistent-in-same-function", "title": "Mixing Esqueleto and Persistent in same function", "body": "<p>I might be doing something horribly stupid, but I would like to mix some Esqueleto with regular Persistent queries in same function.</p>\n\n<p>I have function:</p>\n\n<pre><code>handleFactionConstruction :: (BaseBackend backend ~ SqlBackend,\n    PersistStoreWrite backend, PersistQueryRead backend, \n    PersistUniqueRead backend, MonadIO m) =&gt;\n    Time -&gt; Entity Faction -&gt; ReaderT backend m ()\nhandleFactionConstruction date faction = do\n    planets &lt;- selectList [ PlanetOwnerId ==. Just (entityKey faction)] []\n    queues &lt;- mapM loadPlanetConstructionQueue $ map entityKey planets\n    return ()\n</code></pre>\n\n<p>and loadPlanetConstructionQueue has signature (this one performs a join and therefore I would like to use Esqueleto here):</p>\n\n<pre><code>loadPlanetConstructionQueue :: (MonadIO m, BackendCompatible SqlBackend backend, \n    PersistQueryRead backend, PersistUniqueRead backend) =&gt;\n    Key Planet -&gt; ReaderT backend m (Maybe (Entity Planet), [Entity BuildingConstruction\n</code></pre>\n\n<p>This doesn't work and I get following error:</p>\n\n<pre><code>Could not deduce (BackendCompatible SqlBackend backend)\n    arising from a use of \u2018loadPlanetConstructionQueue\u2019\n  from the context: (BaseBackend backend ~ SqlBackend,\n                     PersistStoreWrite backend, PersistQueryRead backend,\n                     PersistUniqueRead backend, MonadIO m)\n    bound by the type signature for:\n               handleFactionConstruction :: forall backend (m :: * -&gt; *).\n                                            (BaseBackend backend ~ SqlBackend,\n                                             PersistStoreWrite backend,\n                                             PersistQueryRead backend,\n                                             PersistUniqueRead backend, MonadIO m) =&gt;\n                                            Time -&gt; Entity Faction -&gt; ReaderT backend m ()\n</code></pre>\n\n<p>I think it has something to do with the difference between \"BackendCompatible SqlBackend backend\" and \"BaseBackend backend ~ SqlBackend\".</p>\n\n<p>Is there a way I could get this working? In this case I could write selectList portion with Esqueleto, but further down the line there will be need to use replace, which isn't supported by Esqueleto (I think).</p>\n\n<p>I Don't know much about Haskell, Persistent or Esqueleto, so I'm a bit lost here.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1538765978, "post_id": 52654626, "comment_id": 92273394, "body": "Are you sure you want <code>f other</code> instead of <code>other</code>? Are you sure you want <code>map f _fparams</code> instead of <code>map (descend f) _fparams</code>? Are you sure you want <code>ExprCall _fname $ map f _fparams</code> instead of <code>f (ExprCall _fname (map (descend f) _fparams))</code>? There&#39;s a lot of variants that all seem sensible, and the type gives you (and your users) no guidance about which one this should be. <code>fmap</code>&#39;s type, though, does give guidance: all and only the &quot;contained values&quot; in its second argument are modified, and the structure is left untouched, and this property is partially checked by the type system."}], "answers": [{"comments": [{"owner": {"reputation": 941, "user_id": 1364783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4eda80ff284139c0614e80a943d9c307?s=128&d=identicon&r=PG", "display_name": "rausted", "link": "https://stackoverflow.com/users/1364783/rausted"}, "edited": false, "score": 1, "creation_date": 1538685179, "post_id": 52654723, "comment_id": 92240842, "body": "Sure I guess that answers the immediate question, but not the meta question of why I should prefer polymorphic always"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 941, "user_id": 1364783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4eda80ff284139c0614e80a943d9c307?s=128&d=identicon&r=PG", "display_name": "rausted", "link": "https://stackoverflow.com/users/1364783/rausted"}, "edited": false, "score": 1, "creation_date": 1538686390, "post_id": 52654723, "comment_id": 92241319, "body": "@rausted I agree, I&#39;m not really addressing that. After some thinking, I believe the two options &quot;mono/poly-morphic&quot; are not even two comparable options, since they solve different problems. See above the &quot;major downside&quot;."}, {"owner": {"reputation": 941, "user_id": 1364783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4eda80ff284139c0614e80a943d9c307?s=128&d=identicon&r=PG", "display_name": "rausted", "link": "https://stackoverflow.com/users/1364783/rausted"}, "edited": false, "score": 0, "creation_date": 1538686860, "post_id": 52654723, "comment_id": 92241499, "body": "I see, just curious why did you chose to make <code>_fparams :: [k]</code> and not: <code>data Expr k = ExprCall { _fname :: k, _fparams :: [Expr k] } ...</code> which makes more sense imo (making the base type free while keeping the recursive type definition)."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 941, "user_id": 1364783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4eda80ff284139c0614e80a943d9c307?s=128&d=identicon&r=PG", "display_name": "rausted", "link": "https://stackoverflow.com/users/1364783/rausted"}, "edited": false, "score": 1, "creation_date": 1538686992, "post_id": 52654723, "comment_id": 92241539, "body": "@rausted I see. It depends what you want to affect with your <code>fmap</code>: if you want it to affect your <code>fname</code>s, then yours is the way to go. If you want the immediate subexpressions, then you need the one in my answer."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 941, "user_id": 1364783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4eda80ff284139c0614e80a943d9c307?s=128&d=identicon&r=PG", "display_name": "rausted", "link": "https://stackoverflow.com/users/1364783/rausted"}, "edited": false, "score": 1, "creation_date": 1538687289, "post_id": 52654723, "comment_id": 92241666, "body": "@rausted Actually, I <i>really</i> don&#39;t like this answer. It can be quite confusing (reflecting the confusion I have in my mind right now), and I was really tempted to delete it. I won&#39;t, only because I hope someone can provide more insight. If that happens, please don&#39;t hesitate to move the tick."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 3, "last_activity_date": 1538686506, "last_edit_date": 1538686506, "creation_date": 1538685062, "answer_id": 52654723, "question_id": 52654626, "link": "https://stackoverflow.com/questions/52654626/why-is-everything-a-functor-and-what-about-monomorphic-types/52654723#52654723", "title": "Why is everything a Functor and what about Monomorphic types", "body": "<p>(I don't like this answer very much, but I'm keeping it, hoping that it can inspire someone to write a better answer.)</p>\n\n<hr>\n\n<p>The standard type classes apply to polymorphic containers, only: containers that can hold any type of values.</p>\n\n<p>For instance, regular functors provide</p>\n\n<pre><code>fmap :: (a -&gt; b) -&gt; f a -&gt; f b\n</code></pre>\n\n<p>which allows <code>a</code> and <code>b</code> to be distinct types. This would not be possible to implement for your <code>Expr</code>, since it is not polymorphic.</p>\n\n<p>For monomorphic \"containers\" like your <code>Expr</code>, we have the <a href=\"https://hackage.haskell.org/package/mono-traversable-1.0.9.0\" rel=\"nofollow noreferrer\"><code>mono-traversable</code></a> package that provides monomorphic alternatives.</p>\n\n<p>For instance the <code>MonoFunctor</code> class can provide</p>\n\n<pre><code>omap :: (E -&gt; E) -&gt; C -&gt; C    -- simplified\n</code></pre>\n\n<p>where <code>E</code> is the type of the \"contained\" type and <code>C</code> is the type of the container. For your <code>Expr</code>, these are the same, and this should work:</p>\n\n<pre><code>type instance Element Expr = Expr\n\ninstance MonoFunctor Expr where\n   omap f expr = ...\n</code></pre>\n\n<hr>\n\n<p>It's hard to decide whether it's better to keep <code>Expr</code> monomorphic or turn it into a polymorphic type. It depends on what you are planning to do.</p>\n\n<p>First, monomorphic is simpler. Your recursive type is exactly what you need, no bells and whistles.</p>\n\n<p>Polymorphic is more tricky, and would involve a type-level fixed point:</p>\n\n<pre><code>import Data.Functor.Foldable  -- not the \"other\" foldable\n\n-- the functor\ndata ExprF k \n        = ExprCall { _fname :: Text, _fparams :: [k] }\n        | ...\n     deriving Functor\n\n-- the fixed point\ntype Expr = Fix ExprF\n</code></pre>\n\n<p>Downside: now you need to pattern match <code>Fix</code> constructors everywhere, e.g.</p>\n\n<pre><code>foo :: Expr -&gt; ...\nfoo (Fix (ExprCall ...)) = ...\n</code></pre>\n\n<p>Major (?) downside: the foldable/traversable instance associated to the functor only care about the <em>first</em> layer of your <code>Expr</code>, so they are not that useful. E.g. <code>foldMap</code> does not really visit the whole expression, since it is defined on <code>ExprF a</code> where <code>a</code> does not have to be an expression, not on <code>Expr</code>. This does not seem very useful.</p>\n\n<p>Upside: you get catamorphism and anamorphisms for free.</p>\n\n<p>Personally, I'd recommend the monomorphic version, unless one feels quite adventurous, and understands <code>recursion-schemes</code> quite well.</p>\n"}, {"comments": [{"owner": {"reputation": 4234, "user_id": 4942760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f322d06b4f3e34278f29a954e0f38cb1?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Robertson", "link": "https://stackoverflow.com/users/4942760/dan-robertson"}, "edited": false, "score": 0, "creation_date": 1538694705, "post_id": 52654848, "comment_id": 92243745, "body": "On the one hand, I think this is a good answer. It aims to say why the program for a general type may be more limited than the program for a specific type: If one must compute some result for any type then one cannot inspect the values of that type (other than by a few restricted ways). On the other hand, I\u2019m not sure one should be convinced by the answer. It is hard for me to tell this because I know the answer is true. I\u2019m also not sure that this answer would be the right place to explain the point. However I feel like the \u201ctechnically tells us very little ...\u201d point is a bit wishy-washy."}], "tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": true, "score": 3, "last_activity_date": 1538685729, "creation_date": 1538685729, "answer_id": 52654848, "question_id": 52654626, "link": "https://stackoverflow.com/questions/52654626/why-is-everything-a-functor-and-what-about-monomorphic-types/52654848#52654848", "title": "Why is everything a Functor and what about Monomorphic types", "body": "<p>Polymorphism for these classes has some benefits: the types are more descriptive, and they prevent certain implementation mistakes.</p>\n\n<p>The main reason for both of these advantages is that there are generally much fewer implementations of polymorphic types than more specialized ones. If we exclude exceptions and infinite loops, there are really only two ways to implement <code>fmap :: (a -&gt; b) -&gt; Maybe a -&gt; Maybe b</code>, and one is a constant function, so only the other is really sensible:</p>\n\n<pre><code>fmap f (Just a) = Just (f a)\nfmap f Nothing = Nothing\n\n-- or\n\nfmap f (Just _) = Nothing\nfmap f Nothing = Nothing\n</code></pre>\n\n<p>In contrast, the type <code>(Int -&gt; Int) -&gt; Maybe Int -&gt; Maybe Int</code> technically tells us very little about what such a function does. In particular, one can forget to use the first argument, which is not too far-fetched a mistake to make IMO:</p>\n\n<pre><code>fmap :: (Int -&gt; Int) -&gt; Maybe Int -&gt; Maybe Int\nfmap f (Just a) = Just a\nfmap f Nothing = Nothing\n</code></pre>\n"}], "owner": {"reputation": 941, "user_id": 1364783, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4eda80ff284139c0614e80a943d9c307?s=128&d=identicon&r=PG", "display_name": "rausted", "link": "https://stackoverflow.com/users/1364783/rausted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 52654848, "answer_count": 2, "score": 6, "last_activity_date": 1538686506, "creation_date": 1538684658, "question_id": 52654626, "link": "https://stackoverflow.com/questions/52654626/why-is-everything-a-functor-and-what-about-monomorphic-types", "title": "Why is everything a Functor and what about Monomorphic types", "body": "<p>I'm building an optimizer for various function calls in haskell, here's my AST</p>\n\n<pre><code> data Expr = ExprCall { _fname :: Text, _fparams :: [Expr] }\n              | ExprVar { _var :: Text }\n              | ExprNat { _nat :: Int }\n</code></pre>\n\n<p>And here is an example of syntax, <code>mod</code> and <code>random</code> are external functions and their semantics are opaque to haskell.</p>\n\n<pre><code>mod(random(), 10)\n</code></pre>\n\n<p>All it has is the AST representation of the syntax, for the example above that would be:</p>\n\n<pre><code>ExprCall \"mod\" [ExprCall \"random\" [], ExprNat 10]\n</code></pre>\n\n<p>I have a lot of passes that have type <code>Expr-&gt;Expr</code> and I have a function called <code>descend</code> which traverses the AST and applies a pass to every <code>Expr</code>. Here is my descend function</p>\n\n<pre><code>{- # LANGUAGE RecordWildCards #-}\ndescend :: (Expr -&gt; Expr) -&gt; Expr -&gt; Expr\ndescend f ExprCall   { .. } = ExprCall _fname $ map f _fparams\n-- Base expressions\ndescend f other = f other\n</code></pre>\n\n<p>Now I realize this is exacatly what <code>Data.Traversable</code> does and I wanted to make my Expr an instance of that, however, all typeclasses in that hierarchy <code>Functor</code>, <code>Foldable</code>, <code>Traversable</code> etc only accept kinds <code>* -&gt; *</code>. Why?</p>\n\n<p>Is there some way I can make my <code>Expr</code> to a <code>(* -&gt; *)</code> so that it makes sense logically? Alternatively, is there a way to have monomorphic traversables?</p>\n\n<p>What are the advantages of declaring data as <code>data Expr a</code> compared to what I have, <code>data Expr</code>?</p>\n"}, {"tags": ["haskell", "pointfree"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1538675104, "post_id": 52652030, "comment_id": 92236899, "body": "<code>\\combiner -&gt; flip $ foldMap combiner</code> is <code>\\combiner -&gt; ($) flip (foldMap combiner)</code>, so as you can see, eta doesn&#39;t apply: the last argument on the RHS is <code>foldMap combiner</code>, not <code>combiner</code>!"}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 7, "creation_date": 1538675453, "post_id": 52652300, "comment_id": 92237053, "body": "This answer is completely correct (+1), but let me add that I consider <code>flip . foldMap</code> to be less readable than the original code. Indeed, <code>flip . f</code> does not immediately trigger &quot;oh, it&#39;s <code>f</code> with the 2nd and 3rd argument flipped&quot;, like the original code."}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 10, "last_activity_date": 1538674008, "last_edit_date": 1538674008, "creation_date": 1538673654, "answer_id": 52652300, "question_id": 52652030, "link": "https://stackoverflow.com/questions/52652030/seemingly-legal-eta-reduction-causing-issues/52652300#52652300", "title": "Seemingly legal Eta reduction causing issues", "body": "<p>The error is raised, because <code>g b = f $ a b</code> is not equivalent to <code>g = f $ a</code>.</p>\n\n<p>In the first case you get the following sequence of evaluation:</p>\n\n<ul>\n<li>apply the function <code>a</code> to <code>b</code> (call <code>a</code> with <code>b</code> as an argument)</li>\n<li>apply the function <code>f</code> to the result</li>\n</ul>\n\n<p>In the second case:</p>\n\n<ul>\n<li>apply the function <code>f</code> to <code>a</code></li>\n</ul>\n\n<p>Thus, you just <code>flip</code> the <code>foldMap</code> function, but actually want to <code>flip</code> the <code>foldMap</code> function <em>after</em> passing <code>combiner</code> to it. This leads us to the conclusion, that you actually want the composition, i. e. <code>.</code> function:</p>\n\n<pre><code>foldr = flip . foldMap where\n  ...\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 8207355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b97cf1b0439fe13dd27c8f4c3ee0f9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Craig", "link": "https://stackoverflow.com/users/8207355/sam-craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 52652300, "answer_count": 1, "score": 6, "last_activity_date": 1538674008, "creation_date": 1538672543, "question_id": 52652030, "link": "https://stackoverflow.com/questions/52652030/seemingly-legal-eta-reduction-causing-issues", "title": "Seemingly legal Eta reduction causing issues", "body": "<p>I am attempting to \u03b7-reduce the function</p>\n\n<pre><code>foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; BinaryTree a -&gt; b\nfoldr combiner base tree = foldMap combiner tree base where\n  foldMap = ...\n</code></pre>\n\n<p>with </p>\n\n<pre><code>foldMap :: (a -&gt; b -&gt; b) -&gt; BinaryTree a -&gt; b -&gt; b\n</code></pre>\n\n<p>working as intended. </p>\n\n<p>I have \u03b7-reduced </p>\n\n<pre><code>foldr combiner base tree = foldMap combiner tree base\n</code></pre>\n\n<p>to </p>\n\n<pre><code>foldr combiner = flip $ foldMap combiner where\n  ...\n</code></pre>\n\n<p>This works as intended. It seems like I should be able to \u03b7-reduce completely to get the pointfree function</p>\n\n<pre><code>foldr = flip $ foldMap where\n  ...\n</code></pre>\n\n<p>However, this causes a compilation error</p>\n\n<pre><code>Couldn't match type \u2018a -&gt; b -&gt; b\u2019 with \u2018BinaryTree t0\u2019\nExpected type: (a -&gt; b -&gt; b) -&gt; b -&gt; BinaryTree a -&gt; b\n  Actual type: BinaryTree t0 -&gt; (t0 -&gt; b -&gt; b) -&gt; b -&gt; b\n</code></pre>\n\n<p>Is it possible to \u03b7-reduce farther, and if so, how?</p>\n"}, {"tags": ["haskell", "haskell-stack", "haskell-platform"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 4, "creation_date": 1538661869, "post_id": 52648717, "comment_id": 92229274, "body": "Frankly, you&#39;d be better off simply installing stack and not bothering with HP at all nowadays"}, {"owner": {"reputation": 3960, "user_id": 1556475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbf54fca536242c214a1f99a6b9b8931?s=128&d=identicon&r=PG", "display_name": "Cameron Ball", "link": "https://stackoverflow.com/users/1556475/cameron-ball"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1538661908, "post_id": 52648717, "comment_id": 92229303, "body": "Sure, I do use stack, and will stick with it. But I&#39;m curious."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1538661938, "post_id": 52648717, "comment_id": 92229320, "body": "Are you 100% positive that <code>stack.exe</code> isn&#39;t present anywhere on your system? Maybe it&#39;s just a PATH issue."}, {"owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 1, "creation_date": 1538662002, "post_id": 52648717, "comment_id": 92229366, "body": "Complete guess: Maybe Debian ships older version of platform. Did you install via package manager ? If yes, then what version did it install ?"}, {"owner": {"reputation": 3960, "user_id": 1556475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbf54fca536242c214a1f99a6b9b8931?s=128&d=identicon&r=PG", "display_name": "Cameron Ball", "link": "https://stackoverflow.com/users/1556475/cameron-ball"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1538662090, "post_id": 52648717, "comment_id": 92229434, "body": "@BartekBanachewicz I&#39;m not sure, that&#39;s why I&#39;m asking :D"}, {"owner": {"reputation": 3960, "user_id": 1556475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbf54fca536242c214a1f99a6b9b8931?s=128&d=identicon&r=PG", "display_name": "Cameron Ball", "link": "https://stackoverflow.com/users/1556475/cameron-ball"}, "reply_to_user": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 0, "creation_date": 1538662093, "post_id": 52648717, "comment_id": 92229437, "body": "@Sibi - I installed it via Debian&#39;s package manager (version 2014.2.0.0.debian4). Clearly it&#39;s quite old... Since when was Stack included?"}], "answers": [{"comments": [{"owner": {"reputation": 3960, "user_id": 1556475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbf54fca536242c214a1f99a6b9b8931?s=128&d=identicon&r=PG", "display_name": "Cameron Ball", "link": "https://stackoverflow.com/users/1556475/cameron-ball"}, "edited": false, "score": 2, "creation_date": 1538662475, "post_id": 52648901, "comment_id": 92229702, "body": "Mystery solved! And yes, I do use stack. I just found out about haskell-platform and was curious (the install instructions from haskell-platform explicitly said to use Debian&#39;s package manager as well :( ). Thanks."}], "tags": [], "owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "is_accepted": true, "score": 2, "last_activity_date": 1538662294, "creation_date": 1538662294, "answer_id": 52648901, "question_id": 52648717, "link": "https://stackoverflow.com/questions/52648717/how-does-haskell-platform-use-stack/52648901#52648901", "title": "How does haskell-platform use Stack?", "body": "<p>Haskell platform 2014.2.0 version doesn't come up with Stack. You can verify it from here: <a href=\"https://www.haskell.org/platform/contents.html\" rel=\"nofollow noreferrer\">https://www.haskell.org/platform/contents.html</a></p>\n\n<p>Haskell platform 8.0.1 is the first version which supports Stack. Also the versioning scheme of the platform seemed to change after 2014.2.0.</p>\n\n<p>In my opinion, you should generally not try installing from Debian's package manager as it is usually quite old. Also, these days I would just recommend you to use Stack and install it from <a href=\"https://haskell-lang.org/get-started\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 3960, "user_id": 1556475, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbf54fca536242c214a1f99a6b9b8931?s=128&d=identicon&r=PG", "display_name": "Cameron Ball", "link": "https://stackoverflow.com/users/1556475/cameron-ball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 52648901, "answer_count": 1, "score": 1, "last_activity_date": 1542487474, "creation_date": 1538661769, "question_id": 52648717, "link": "https://stackoverflow.com/questions/52648717/how-does-haskell-platform-use-stack", "title": "How does haskell-platform use Stack?", "body": "<p>The page: <a href=\"https://www.haskell.org/platform/\" rel=\"nofollow noreferrer\">https://www.haskell.org/platform/</a> claims that haskell-platform comes with the Stack tool. However, on my Debian system after installing the haskell-platform package, I do not have the command <code>stack</code> available to me (which I would if I followed the instructions for installing Stack from the Stack website).</p>\n\n<p>I can't find any information on how Stack is included in haskell-platform. It seems to be mentioned on the front page of the site, and no where else.</p>\n\n<p>So, in what way is Stack \"included\" with the haskell-platform?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 19, "user_id": 10456652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-td_-BVBVlIQ/AAAAAAAAAAI/AAAAAAAAAMo/ESlv9jKlifY/photo.jpg?sz=128", "display_name": "Vlad Russu", "link": "https://stackoverflow.com/users/10456652/vlad-russu"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1538658996, "post_id": 52647223, "comment_id": 92227212, "body": "oh yeah, i made a mistake"}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1538660184, "post_id": 52647223, "comment_id": 92228026, "body": "Closely related: <a href=\"https://stackoverflow.com/q/27670028/2751851\"><i>Haskell application, or section?</i></a> (I&#39;m not closing against that because, in this question, the main issue is expressed in a clearer way)."}], "answers": [{"comments": [{"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1538660093, "post_id": 52648074, "comment_id": 92227962, "body": "&quot;Let&#39;s look at both of these functions, and expand out the point-free piece [...]&quot; -- Or, if we were to make them fully point-free, <code>xor1 = (&#47;=)</code>, and <code>xor2 = flip (&#47;=)</code>."}, {"owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "reply_to_user": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1538660408, "post_id": 52648074, "comment_id": 92228184, "body": "@duplode Exactly right, but I think beginners typically can get confused by point-free notation so I went the opposite direction. Do you mind if I edit that into my answer as an extra example of how to solve this problem?"}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 0, "creation_date": 1538661205, "post_id": 52648074, "comment_id": 92228819, "body": "Feel free to edit it in. (By the way, I agree with prioritising the pointful way in this answer. To me, the main motivation for also showing the other way would be that <code>xor1 = (&#47;=)</code> makes it clear that operators are just functions, with a bit of extra syntactic sugar on the top -- though your <code>notEqual</code> example arguably plays that role already.)"}], "tags": [], "owner": {"reputation": 4071, "user_id": 3806046, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5fedf50ce7cd2659bca902e9a2969158?s=128&d=identicon&r=PG&f=1", "display_name": "jkeuhlen", "link": "https://stackoverflow.com/users/3806046/jkeuhlen"}, "is_accepted": false, "score": 5, "last_activity_date": 1538750871, "last_edit_date": 1538750871, "creation_date": 1538659978, "answer_id": 52648074, "question_id": 52647223, "link": "https://stackoverflow.com/questions/52647223/are-these-two-partial-applications-different-haskell/52648074#52648074", "title": "Are these two partial applications different? Haskell", "body": "<blockquote>\n  <p>So my question is, are these two implementations of the xor function any different from each other?</p>\n</blockquote>\n\n<p>Yes! The implementations are different; however, the results will be the same due to the nature of equality. </p>\n\n<p>Let's look at both of these functions, and expand out the point-free piece:</p>\n\n<pre><code>xor1 :: Bool -&gt; Bool -&gt; Bool\nxor1 x y = (/=) x y\n\nxor2 :: Bool -&gt; Bool -&gt; Bool\nxor2 x y = (/= x) y\n</code></pre>\n\n<p>So if we move these to an infix style to compare, we can more easily see what the difference is in the implementation:</p>\n\n<pre><code>xor1 :: Bool -&gt; Bool -&gt; Bool\nxor1 x y = x /= y \n\nxor2 :: Bool -&gt; Bool -&gt; Bool\nxor2 x y = y /= x\n</code></pre>\n\n<p>However, since equality is commutative, these are equivalent expressions. </p>\n\n<p>Since <code>/=</code> is defined as an operator, it's behavior is different from normal functions in that it is applied infix by default. This behavior is changed by using the full parenthetical operator <code>(/=)</code>. This is the opposite from other functions which have to be expressed as infix using backticks. If we change to using a <code>notEqual</code> function that is not an operator, the implementation would be the same! </p>\n\n<pre><code>notEqual = (/=)\n\nxor1 :: Bool -&gt; Bool -&gt; Bool\nxor1 x y = notEqual x y\n\nxor2 :: Bool -&gt; Bool -&gt; Bool\nxor2 x y = (notEqual x) y = notEqual x y\n</code></pre>\n\n<hr>\n\n<p>As @duplode mentions in the comments, another way to look at this problem is to go fully point-free instead of point-full: </p>\n\n<pre><code>xor1 :: Bool -&gt; Bool -&gt; Bool\nxor1 = (/=) \n\nxor2 :: Bool -&gt; Bool -&gt; Bool\nxor2 = flip (/=) \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10456652, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-td_-BVBVlIQ/AAAAAAAAAAI/AAAAAAAAAMo/ESlv9jKlifY/photo.jpg?sz=128", "display_name": "Vlad Russu", "link": "https://stackoverflow.com/users/10456652/vlad-russu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1538750871, "creation_date": 1538657552, "last_edit_date": 1538659047, "question_id": 52647223, "link": "https://stackoverflow.com/questions/52647223/are-these-two-partial-applications-different-haskell", "title": "Are these two partial applications different? Haskell", "body": "<p>I want to implement the \"xor\" (exclusive or) function in Haskell in different ways using only partial applications. I am not allowed to use pattern matching or lambda expressions. So my question is, are these two implementations of the xor function any different from each other? </p>\n\n<pre><code>xor1 :: Bool -&gt; Bool -&gt; Bool\nxor1 x = (/=) x\n\nxor2 :: Bool -&gt; Bool -&gt; Bool\nxor2 x = (/= x)\n</code></pre>\n"}, {"tags": ["parsing", "haskell", "functional-programming", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1538652898, "post_id": 52645684, "comment_id": 92223317, "body": "You can use <code>alex</code>, and <code>happy</code>: <a href=\"https://www.haskell.org/alex/\" rel=\"nofollow noreferrer\">haskell.org/alex</a> <a href=\"https://www.haskell.org/happy/\" rel=\"nofollow noreferrer\">haskell.org/happy</a>"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 4, "creation_date": 1538652921, "post_id": 52645684, "comment_id": 92223333, "body": "<i>Why</i> do you not want to use any library?"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 2, "creation_date": 1538652964, "post_id": 52645684, "comment_id": 92223365, "body": "<i>without the use of parsec or any library</i> - without saying why, this is an absurd requirement."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1538655505, "post_id": 52645684, "comment_id": 92224926, "body": "The nice thing about using libraries, is that typically you can focus more on the <i>what</i> than the <i>how</i>. Lexers and parsers tend to be rather &quot;hard&quot; to &quot;wire yourself&quot;. So it is typically better to use a tool that prevents making mistakes."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1538657167, "post_id": 52645684, "comment_id": 92226003, "body": "To write a recursive descent parser, you first need to rewrite your grammar in LL(1) form. After that, you can write your top-down parser by checking the first character/token and selecting the right production. Libraries can do part of this for you, but you don&#39;t want to use them for some reason."}], "answers": [{"tags": [], "owner": {"reputation": 7666, "user_id": 1241193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0331e5e748a0ac3860b68f6cac130ef1?s=128&d=identicon&r=PG", "display_name": "Bob Dalgleish", "link": "https://stackoverflow.com/users/1241193/bob-dalgleish"}, "is_accepted": false, "score": 2, "last_activity_date": 1538663434, "creation_date": 1538663434, "answer_id": 52649276, "question_id": 52645684, "link": "https://stackoverflow.com/questions/52645684/haskell-recursive-descent-parser/52649276#52649276", "title": "haskell recursive descent parser", "body": "<p>First, you need to define your abstract syntax tree, likely as some declared data types. Then you want to define your basic parsing action. For instance,</p>\n\n<pre><code>type ParseResult = Either String AST\ntype ParseState  = (ParseResult, String)\n</code></pre>\n\n<p>Your parse action is straightforward:</p>\n\n<pre><code>re, sq, ba, el :: ParseState -&gt; ParseState\n</code></pre>\n\n<p>where <code>re</code> is the top level parser action.</p>\n\n<p>The concrete parsing step might look like this:</p>\n\n<pre><code>el (_, ('(':restOfInput)) = case re (Right restOfInput) of\n                             err@(Left error, s) -&gt; err\n                             (result, ')':s) -&gt; (El result, s)\n                             (_, s) -&gt; (Left \"no closing parens\", s)\nel (_, input@(c:restOfInput)) = if lowerOrDigit c \n                                then (El c, restOfInput) \n                                else (Left \"bad character\", \"\")\n</code></pre>\n\n<p>Where a parsing library buys you a lot of traction is in handling all of the parsing state and propagating errors up the call stack. </p>\n"}], "owner": {"reputation": 1, "user_id": 10456206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad334483ebff00c94c939f043a8e2e42?s=128&d=identicon&r=PG&f=1", "display_name": "D.J Monads1", "link": "https://stackoverflow.com/users/10456206/d-j-monads1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1026, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1538663434, "creation_date": 1538652864, "question_id": 52645684, "link": "https://stackoverflow.com/questions/52645684/haskell-recursive-descent-parser", "title": "haskell recursive descent parser", "body": "<p>How can i create a recursive decent parser without the use of parsec or any library, for this grammar?\nThe output should be an error message if the string does not belong in this  grammar?\nparse::String -> AST</p>\n\n<p>Re -> Sq | Sq + Re</p>\n\n<p>Sq -> Ba | Ba Sq</p>\n\n<p>Ba -> El | Ba*</p>\n\n<p>El -> lower-or-digit | (Re)</p>\n\n<p>lower-or-digit are just lowercase letters or digits</p>\n"}, {"tags": ["haskell", "casting", "integer"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1538649635, "post_id": 52644585, "comment_id": 92221419, "body": "The safe version would actually be <code>bits n = fromInteger (n`mod`2) + bits (n`div`2)</code>. Alternatively <code>case n`divMod`2 of (q,r) -&gt; fromInteger r + bits q</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1538666704, "post_id": 52644585, "comment_id": 92232543, "body": "How is calling <code>bits</code> better than simply calling <code>fromInteger</code>? Aside from using more CPU cycles, <code>bits</code> <i>is</i> <code>fromInteger</code>. You&#39;re basically converting <code>12 :: Integer</code> to <code>12 :: Int</code> by recognizing that <code>12 == 8 + 4</code>, then adding <code>8</code> and <code>4</code> to get back <code>12</code>."}], "answers": [{"tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": false, "score": 2, "last_activity_date": 1538649504, "creation_date": 1538649504, "answer_id": 52644660, "question_id": 52644585, "link": "https://stackoverflow.com/questions/52644585/haskell-cast-integer-to-int/52644660#52644660", "title": "Haskell cast Integer to Int", "body": "<p>Because you don't need it for the 2nd call:</p>\n\n<pre><code>bits :: Integer -&gt; Int \nbits 0 = 0\nbits n = fromInteger n `mod` 2 + bits (n `div` 2) \n</code></pre>\n\n<p>The 2nd <code>fromInteger</code> simply resulted in <code>Integer</code> again, as forced by the parameter to <code>bits</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1538650165, "post_id": 52644832, "comment_id": 92221739, "body": "But the original signature makes sense actually, because this function can break huge numbers down to a small digest."}], "tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 0, "last_activity_date": 1538649990, "creation_date": 1538649990, "answer_id": 52644832, "question_id": 52644585, "link": "https://stackoverflow.com/questions/52644585/haskell-cast-integer-to-int/52644832#52644832", "title": "Haskell cast Integer to Int", "body": "<p>You may perhaps tweak the signature a little bit and get rid of all <code>fromInteger</code>s.</p>\n\n<pre><code>bits :: Integral a =&gt; a -&gt; a \nbits 0 = 0\nbits n = n `mod` 2 + bits (n `div` 2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "is_accepted": true, "score": 1, "last_activity_date": 1538761173, "creation_date": 1538761173, "answer_id": 52670795, "question_id": 52644585, "link": "https://stackoverflow.com/questions/52644585/haskell-cast-integer-to-int/52670795#52670795", "title": "Haskell cast Integer to Int", "body": "<p>Here is the reason that this version doesn't typecheck:</p>\n\n<pre><code>bits :: Integer -&gt; Int\nbits 0 = 0\nbits n = let m = fromInteger n in m `mod` 2 + bits(m `div` 2)\n</code></pre>\n\n<p>First, note that the first usage of <code>m</code> requires that <code>m</code> be an <code>Int</code> because the result of a <code>bits</code> call must be an <code>Int</code> which means the left hand side of the addition (namely <code>m `mod` 2</code>) must be an <code>Int</code>.  Why is this?  Well, it's because the signature of the <code>+</code> operator is:</p>\n\n<pre><code>(+) :: (Num a) =&gt; a -&gt; a -&gt; a\n</code></pre>\n\n<p>which requires both arguments of <code>+</code> to have the same type as its result.  Similarly, because <code>m `mod` 2</code> must be an <code>Int</code>, the left hand side of the <code>`mod`</code> call (namely <code>m</code>) must be an <code>Int</code>, because <code>mod</code> has signature:</p>\n\n<pre><code>mod :: (Integral a) =&gt; a -&gt; a -&gt; a\n</code></pre>\n\n<p>So, that's why the first usage of <code>m</code> requires <code>m :: Int</code>.  Whew!</p>\n\n<p>For much the same reason, the <strong>second</strong> usage of <code>m</code> requires that <code>m</code> be an <code>Integer</code>.  That's because the argument to <code>bits</code> in the expression <code>bits (m `div` 2)</code> must be an <code>Integer</code> which requires that the left hand side of the <code>`div`</code> operator must be an <code>Integer</code>.</p>\n\n<p>Therefore, we have a requirement that <code>m</code> be both an <code>Int</code> and an <code>Integer</code>.  This isn't necessarily a problem.  If you had instead written:</p>\n\n<pre><code>bits :: Integer -&gt; Int\nbits 0 = 0\nbits n = m `mod` 2 + bits(m `div` 2)\n  where m :: (Integral a) =&gt; a\n        m = fromInteger n\n</code></pre>\n\n<p>and given <code>m</code> an explicit polymorphic type signature, then <code>m</code> could be used as both an <code>Int</code> and and <code>Integer</code> simultaneously.  However, because of something called the monomorphism restriction, without an explicit type signature, <code>m</code> is required to have a single non-polymorphic (i.e., monomorphic type).  If you add the pragma:</p>\n\n<pre><code>{-# LANGUAGE NoMonomorphismRestriction #-}\n</code></pre>\n\n<p>to the top of your file, then the original definition typechecks fine:</p>\n\n<pre><code>{-# LANGUAGE NoMonomorphismRestriction #-}\n\nbits :: Integer -&gt; Int\nbits 0 = 0\nbits n = let m = fromInteger n in m `mod` 2 + bits(m `div` 2)\n</code></pre>\n\n<p>Others have noted, though, that you don't actually need <code>fromInteger</code> in both places; and that using <code>Int</code> and <code>Integer</code> simultaneously is unnecessary, and using a single integer type with a constraint (<code>Integral a</code>) <em>might</em> be even better.</p>\n\n<p>Also, if you wanted this function for real work instead of just practice, it's already available as <code>popCount</code> in module <code>Data.Bits</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 9819885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/892ca5c59747cc842dff26a07eaac73c?s=128&d=identicon&r=PG&f=1", "display_name": "user9819885", "link": "https://stackoverflow.com/users/9819885/user9819885"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1393, "favorite_count": 0, "accepted_answer_id": 52670795, "answer_count": 3, "score": 1, "last_activity_date": 1538761173, "creation_date": 1538649268, "question_id": 52644585, "link": "https://stackoverflow.com/questions/52644585/haskell-cast-integer-to-int", "title": "Haskell cast Integer to Int", "body": "<p>Why the first one is correct and the second one isn't?\nI'd like to implement the code in the second way so that I won't have to call every time fromInteger, but I don't understand how...</p>\n\n<p>Correct</p>\n\n<pre><code>bits :: Integer -&gt; Int \nbits 0 = 0\nbits n = fromInteger n `mod` 2 + bits(fromInteger n `div` 2) \n</code></pre>\n\n<p>Incorrect</p>\n\n<pre><code>bits :: Integer -&gt; Int \nbits 0 = 0\nbits n = let m = fromInteger n in m `mod` 2 + bits(m `div` 2) \n</code></pre>\n"}, {"tags": ["haskell", "functional-programming", "character", "alphabet", "letter"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1538645705, "post_id": 52643395, "comment_id": 92219156, "body": "Good luck with making that function :) What is the question?"}, {"owner": {"reputation": 21, "user_id": 4734423, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H2i6p9Vm_kI/AAAAAAAAAAI/AAAAAAAACeU/zQ2Pe6mg2bM/photo.jpg?sz=128", "display_name": "Attila Fodor", "link": "https://stackoverflow.com/users/4734423/attila-fodor"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538645792, "post_id": 52643395, "comment_id": 92219201, "body": "The question is how can i define that a string or a character is contain something in haskell?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1538645882, "post_id": 52643395, "comment_id": 92219263, "body": "By writing a function."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1538645905, "post_id": 52643395, "comment_id": 92219279, "body": "Please show some effort. For example present a <i>conceptual</i> algorithm, or parts that you managed to implement. Explain what is not working with your attempt."}, {"owner": {"reputation": 1947, "user_id": 6022937, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Wm7nH.png?s=128&g=1", "display_name": "Nestor Sokil", "link": "https://stackoverflow.com/users/6022937/nestor-sokil"}, "edited": false, "score": 1, "creation_date": 1538646076, "post_id": 52643395, "comment_id": 92219390, "body": "When asking a question please make it clear what your problem at hand is, not the overall task or project you are doing. When it&#39;s done please take another look at the question and think if the answer could be easily found in documentation. If the answer is Yes maybe there is no point in posting a question. Cheers. :)"}, {"owner": {"reputation": 21, "user_id": 4734423, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H2i6p9Vm_kI/AAAAAAAAAAI/AAAAAAAACeU/zQ2Pe6mg2bM/photo.jpg?sz=128", "display_name": "Attila Fodor", "link": "https://stackoverflow.com/users/4734423/attila-fodor"}, "edited": false, "score": 1, "creation_date": 1538646488, "post_id": 52643395, "comment_id": 92219662, "body": "I&#39;m really sorry my english is not that good. I&#39;m a freshman at the UNI.  And my task was to write one function which decides the string/character if it is one of the alphabet, the outcome may be true of false. But the problem is i do not know which of the functions should i use for contain.  Something like that: isLetter :: Char -&gt; Bool isLetter n = [&#39;a..Z&#39;] == n"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 2, "creation_date": 1538646824, "post_id": 52643395, "comment_id": 92219868, "body": "Welcome to Stack Overflow. FWIW, people aren&#39;t complaining about your English, but rather that it&#39;s not clear what your question is. ATM, it looks as though your question is <i>please write the code for me</i>, which most regulars here discourage; this is a Q&amp;A site, not a free code-writing service."}], "answers": [{"tags": [], "owner": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "is_accepted": false, "score": 4, "last_activity_date": 1538646418, "creation_date": 1538646418, "answer_id": 52643698, "question_id": 52643395, "link": "https://stackoverflow.com/questions/52643395/string-contains-only-the-alphabet-in-haskell/52643698#52643698", "title": "String contains only the alphabet in haskell", "body": "<p>You can use <code>Data.Char.isAlpha</code> to check that character is alphabet symbol.</p>\n"}, {"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1570044344, "post_id": 52644458, "comment_id": 102794119, "body": "According to the Wikipedia article, the people (linguists?) who devised the writing system used &quot;\u02c0&quot;, but because that wasn&#39;t available on typewriters or in typical pre-Unicode encodings, it&#39;s conventionally written &quot;7&quot;. So the numeral 7 is also a letter in S\u1e35wx\u0331w&#250;7mesh sn&#237;chim, which really messes with rigid notions of classification!"}], "tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": true, "score": 11, "last_activity_date": 1538652997, "last_edit_date": 1538652997, "creation_date": 1538648887, "answer_id": 52644458, "question_id": 52643395, "link": "https://stackoverflow.com/questions/52643395/string-contains-only-the-alphabet-in-haskell/52644458#52644458", "title": "String contains only the alphabet in haskell", "body": "<p>You can define this function yourself,</p>\n\n<pre><code>isLetter :: Char -&gt; Bool\nisLetter 'A' = True\nisLetter 'B' = True\n...\nisLetter 'Z' = True\n</code></pre>\n\n<p>But what about lowercase letters? What about foreign letters like <code>'\u00df'</code>, <code>'\u00fc'</code>, <code>'\u0424'</code>, <code>'\u0419'</code> or <code>'\u00c6'</code> and their uppercase/lowercase variants? Because Unicode is so complex, for any production-level use you should depend on already built library functions. When you don't know what they're called, <a href=\"https://www.haskell.org/hoogle/?hoogle=Char+-%3E+Bool\" rel=\"noreferrer\">go to Hoogle and search for \"<code>Char -&gt; Bool</code>\"</a> and you'll often be pointed to a library that contains exactly what you want. :-)</p>\n\n<p>For example, the documentation for <code>Data.Char.isAlpha</code> says:</p>\n\n<blockquote>\n  <p>Selects alphabetic Unicode characters (lower-case, upper-case and title-case letters, plus letters of caseless scripts and modifiers letters). <strong>This function is equivalent to <code>Data.Char.isLetter</code>.</strong></p>\n</blockquote>\n\n<p>I bet you didn't think of <em>title-case letters</em>, <em>letters of caseless scripts</em> and <em>modifier letters</em>! (I didn't.)</p>\n\n<p>I didn't even know <em>modifier letters</em> existed. Apparently, <a href=\"https://en.wikipedia.org/wiki/Glottal_stop_(letter)\" rel=\"noreferrer\"><code>'\u02c0'</code></a> (glottal stop) is a letter used by the <a href=\"https://en.wikipedia.org/wiki/Squamish_language\" rel=\"noreferrer\">Squamish people</a> of southwestern British Columbia, Canada. There are Canadian road signs out there that your function isn't taking into account!</p>\n\n<p>Are you gonna be the guy who tells \u1e06\u00f8\u1d47 that he can't get on the plane?! :\u0110</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12155369, "user_type": "registered", "profile_image": "https://graph.facebook.com/755859014850055/picture?type=large", "display_name": "Alstonomy", "link": "https://stackoverflow.com/users/12155369/alstonomy"}, "is_accepted": false, "score": 0, "last_activity_date": 1570038702, "creation_date": 1570038702, "answer_id": 58206778, "question_id": 52643395, "link": "https://stackoverflow.com/questions/52643395/string-contains-only-the-alphabet-in-haskell/58206778#58206778", "title": "String contains only the alphabet in haskell", "body": "<p>I think this will work for you.    </p>\n\n<pre><code>isLetter :: Char -&gt; Bool\nisLetter c = (('a' &lt;= c &amp;&amp; c &lt;= 'z') || ('A' &lt;= c &amp;&amp; c &lt;= 'Z'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13225876, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TWbLlt0FAow/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJPA09Lelm-ELfh2MO9J6_Gs1PhV1Q/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/13225876/juan-carlos-ramirez"}, "is_accepted": false, "score": 0, "last_activity_date": 1586479410, "creation_date": 1586479410, "answer_id": 61132415, "question_id": 52643395, "link": "https://stackoverflow.com/questions/52643395/string-contains-only-the-alphabet-in-haskell/61132415#61132415", "title": "String contains only the alphabet in haskell", "body": "<p>We can use the <code>elem</code> function and ranges to see if a character is a letter or not. Notice that the range  <code>['a'..'z']</code> contains all the letters from <strong>a</strong> to <strong>z</strong> in a list. Likewise, the range <code>['A'..'Z']</code>is a list that contains all the uppercase letters. So, the function will check if the given character belongs to any of these lists and if it does, it returns <code>True</code>; otherwise, it returns <code>False</code>.</p>\n\n<pre><code>isLetter :: Char -&gt; Bool\nisLetter character = if character `elem` ['a'..'z'] || character `elem` ['A'..'Z']\n                     then True\n                     else False\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4734423, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H2i6p9Vm_kI/AAAAAAAAAAI/AAAAAAAACeU/zQ2Pe6mg2bM/photo.jpg?sz=128", "display_name": "Attila Fodor", "link": "https://stackoverflow.com/users/4734423/attila-fodor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1619, "favorite_count": 0, "accepted_answer_id": 52644458, "answer_count": 4, "score": 1, "last_activity_date": 1586479410, "creation_date": 1538645324, "last_edit_date": 1538648551, "question_id": 52643395, "link": "https://stackoverflow.com/questions/52643395/string-contains-only-the-alphabet-in-haskell", "title": "String contains only the alphabet in haskell", "body": "<p>I want to make a functions which decides wheter the character is a letter in the alphabet in Haskell</p>\n\n<pre><code>isLetter :: Char -&gt; Bool\n</code></pre>\n\n<p>So the outcome may look like this: if I type <code>isLetter 'c'</code>, the outcome will be <code>True</code>, and if it's <code>isLetter ' '</code>, then the outcome is <code>False</code>.</p>\n"}, {"tags": ["string", "haskell", "fold"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538644995, "post_id": 52643248, "comment_id": 92218707, "body": "In your interpreter, you do not <i>call</i> the <code>join</code>, only some parameters. Since <code>&quot;X&quot;</code> is a <code>String</code>, Hasekell can not perform function application, hence the error."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538645027, "post_id": 52643248, "comment_id": 92218721, "body": "It is however better to use a <code>foldr</code> here."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538645136, "post_id": 52643248, "comment_id": 92218788, "body": "The third example is probably wrong as well?"}, {"owner": {"reputation": 97, "user_id": 10422222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a66ede9ebac7c16933020177bc488f?s=128&d=identicon&r=PG&f=1", "display_name": "SeePlusPlus", "link": "https://stackoverflow.com/users/10422222/seeplusplus"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538645179, "post_id": 52643248, "comment_id": 92218824, "body": "I tried using a foldr, but when I do, it always ends up with the output <code>&quot;one, two, three, &quot;</code> for the first test case."}, {"owner": {"reputation": 97, "user_id": 10422222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a66ede9ebac7c16933020177bc488f?s=128&d=identicon&r=PG&f=1", "display_name": "SeePlusPlus", "link": "https://stackoverflow.com/users/10422222/seeplusplus"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1538645243, "post_id": 52643248, "comment_id": 92218861, "body": "Using foldr1 is better since it splits the list into parts, which would prevent an extra comma at the end."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1538645386, "creation_date": 1538645386, "answer_id": 52643412, "question_id": 52643248, "link": "https://stackoverflow.com/questions/52643248/joining-strings-from-list-into-a-single-string-by-putting-separator-in-between-t/52643412#52643412", "title": "Joining Strings from List into a Single String by Putting Separator in Between Them Using a Fold Function (No Recursion)", "body": "<p><strong>In short</strong>: you do <em>not</em> call the function. In the example cases, the <code>join</code> function is called:</p>\n\n<pre><code>*Main&gt; <b>join</b> \", \" [\"one\",\"two\",\"three\"]\n\"one, two, three\"\n*Main&gt; <b>join</b> \"+\" [\"1\",\"2\",\"3\"]\n\"1+2+3\"\n*Main> <b>join</b> \"X\" [\"abc\"]\n\"abc\"\n*Main&gt; <b>join</b> \"X\" []\n\"\"</code></pre>\n\n<p>If you write <code>\"X\" [\"abc\"]</code> in the shell, Haskell will aim to perform function application with <code>\"X\"</code> the function, but since a <code>String</code> is not a function, the types do not match.</p>\n\n<p>If you call the function, you get:</p>\n\n<pre><code>Prelude&gt; :{\nPrelude| join :: String -&gt; [String] -&gt; String\nPrelude| join _ [] = \"\"\nPrelude| join a xs = foldr1 (concat) xs\nPrelude|   where\nPrelude|     concat b c = b ++ a ++ c\nPrelude| :}\nPrelude&gt; join \", \" [\"one\", \"two\", \"three\"]\n\"one, two, three\"\nPrelude&gt; join \"+\" [\"1\", \"2\", \"3\"]\n\"1+2+3\"\nPrelude&gt; join \"X\" [\"abc\"]\n\"abc\"\nPrelude&gt; join \"X\" []\n\"\"\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10422222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a66ede9ebac7c16933020177bc488f?s=128&d=identicon&r=PG&f=1", "display_name": "SeePlusPlus", "link": "https://stackoverflow.com/users/10422222/seeplusplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 52643412, "answer_count": 1, "score": 1, "last_activity_date": 1538645386, "creation_date": 1538644847, "question_id": 52643248, "link": "https://stackoverflow.com/questions/52643248/joining-strings-from-list-into-a-single-string-by-putting-separator-in-between-t", "title": "Joining Strings from List into a Single String by Putting Separator in Between Them Using a Fold Function (No Recursion)", "body": "<p>We are supposed to create a function in Haskell that takes a string (the separator) and a list of strings, and joining them into a single string by putting the separator in between them. We are not allowed to use recursion and we must use a fold function. </p>\n\n<p>Here are examples:</p>\n\n<pre><code>*Main&gt; join \", \" [\"one\",\"two\",\"three\"]\n\"one, two, three\"\n*Main&gt; join \"+\" [\"1\",\"2\",\"3\"]\n\"1+2+3\"\n*Main&gt; join \"X\" [\"abc\"]\n\"abc\"\n*Main&gt; join \"X\" []\n\"\"\n</code></pre>\n\n<p>Now, here is my code: </p>\n\n<pre><code>join :: String -&gt; [String] -&gt; String\njoin _ [] = \"\"\njoin a xs = foldr1 (concat) xs\n  where\n    concat b c = b ++ a ++ c\n</code></pre>\n\n<p>My code works for the first two test cases, but produces an error when I have to deal with the \"X\" separator.</p>\n\n<p>Here is the error message: </p>\n\n<pre><code>*Main&gt; \"X\" []\n\n&lt;interactive&gt;:190:1: error:\n    \u2022 Couldn't match expected type \u2018[a0] -&gt; t\u2019\n                  with actual type \u2018[Char]\u2019\n    \u2022 The function \u2018\"X\"\u2019 is applied to one argument,\n      but its type \u2018[Char]\u2019 has none\n      In the expression: \"X\" []\n      In an equation for \u2018it\u2019: it = \"X\" []\n    \u2022 Relevant bindings include it :: t (bound at &lt;interactive&gt;:190:1)\n\n*Main&gt; \"X\" [\"abc\"]\n\n&lt;interactive&gt;:191:1: error:\n    \u2022 Couldn't match expected type \u2018[[Char]] -&gt; t\u2019\n                  with actual type \u2018[Char]\u2019\n    \u2022 The function \u2018\"X\"\u2019 is applied to one argument,\n      but its type \u2018[Char]\u2019 has none\n      In the expression: \"X\" [\"abc\"]\n      In an equation for \u2018it\u2019: it = \"X\" [\"abc\"]\n    \u2022 Relevant bindings include it :: t (bound at &lt;interactive&gt;:191:1)\n</code></pre>\n\n<p>I'm not really sure what is causing these errors. Any help would be greatly appreciated. Thanks.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1538639115, "post_id": 52641516, "comment_id": 92215387, "body": "There are package that use Haskell&#39;s <i>quasiquotes</i>, to help produce raw strings."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 2, "creation_date": 1538666531, "post_id": 52641516, "comment_id": 92232428, "body": "Depending on the application, you could also consider whether ASCII double quote characters are really the best choice. For instance many markup and dynamical languages (though not JSON) also allow single quotes for strings. And, if the quotes are actually supposed to appear in human-readable text, then you should probably use Unicode <code>\u201c U+201C LEFT DOUBLE QUOTATION MARK</code> and <code>\u201d U+201D RIGHT DOUBLE QUOTATION MARK</code>. All of these can appear in Haskell string literals without any escaping."}], "answers": [{"tags": [], "owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "is_accepted": false, "score": 10, "last_activity_date": 1538639487, "last_edit_date": 1538639487, "creation_date": 1538639089, "answer_id": 52641556, "question_id": 52641516, "link": "https://stackoverflow.com/questions/52641516/how-to-escape-double-quotes-in-haskell/52641556#52641556", "title": "How to escape double quotes in Haskell?", "body": "<p>Use <code>\\\"</code>. There is no other way in vanilla Haskell. Eg:</p>\n\n<pre><code>\u03bb&gt; putStrLn \"\\\"\"\n\"\n\u03bb&gt; putStrLn \"my string with \\\"double quotes\\\" blablabla\"\nmy string with \"double quotes\" blablabla\n</code></pre>\n\n<p>Further information on this can be very easily found in the <a href=\"https://www.haskell.org/definition/haskell2010.pdf\" rel=\"noreferrer\">Haskell 2010 Report</a> (See \u00a72.6 on character and string literals, particularly the definition of <em>charesc</em>.).</p>\n\n<p>However, by using Template Haskell, a metaprogramming system for Haskell, you can create raw strings. From <a href=\"http://hackage.haskell.org/package/raw-strings-qq-1.1/docs/Text-RawString-QQ.html\" rel=\"noreferrer\">the package page</a>:</p>\n\n<pre><code>\u03bb&gt; :set -XQuasiQuotes\n\u03bb&gt; import Text.RawString.QQ\n\u03bb&gt; let s = [r|\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}|]\n\u03bb&gt; s\n\"\\\\w+@[a-zA-Z_]+?\\\\.[a-zA-Z]{2,3}\"\n\u03bb&gt; [r|C:\\Windows\\SYSTEM|] ++ [r|\\user32.dll|]\n\"C:\\\\Windows\\\\SYSTEM\\\\user32.dll\"\n</code></pre>\n\n<p>Similarly you can type the strings above:</p>\n\n<pre><code>\u03bb&gt; [r|my string with \"double quotes\" blablabla|]\n\"my string with \\\"double quotes\\\" blablabla\"\n</code></pre>\n\n<p>Note that in Haskell source files this requires that you use the <code>{-# LANGUAGE QuasiQuotes #-}</code> pragma at the top of your file.</p>\n"}, {"comments": [{"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 3, "creation_date": 1538666655, "post_id": 52641668, "comment_id": 92232519, "body": "Speaking about Yesod and Shakespeare, <code>shakespeare</code> has <code>Text.Shakespeare.Text</code> with <code>text</code> and <code>stext</code> quasiquoters for this purpose."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 13, "last_activity_date": 1538665758, "last_edit_date": 1538665758, "creation_date": 1538639488, "answer_id": 52641668, "question_id": 52641516, "link": "https://stackoverflow.com/questions/52641516/how-to-escape-double-quotes-in-haskell/52641668#52641668", "title": "How to escape double quotes in Haskell?", "body": "<p>You escape double quotes with a backslash (<code>\\\"</code> in a string), like:</p>\n\n<pre><code>\"\\\"To be, or not to be\\\" - William Shakespeare\"\n</code></pre>\n\n<p>The above can of course be rather cumbersome in case you need to write a lot of double quotes. Haskell enables <em>quasiquotes</em> a way that is used by many Haskell packages to develop \"mini-languages\" inside Haskell. Quasiquotes are to the best of my knowledge not specified in the Haskell report, so it is not really a \"Haskell feature\", but the most popular compiler (GHC) supports this. A package like <a href=\"https://hackage.haskell.org/package/raw-strings-qq-1.1/docs/Text-RawString-QQ.html\" rel=\"noreferrer\"><strong><code>raw-strings-qq</code></strong> [Hackage]</a> allows you to make use of this feature to write raw strings, like this:</p>\n\n<pre><code>{-# LANGUAGE QuasiQuotes #-}\n\nimport Text.RawString.QQ(r)\n\nquote = [r|\"To be, or not to be\" - William Shakespeare|]\n</code></pre>\n\n<p>this thus produces strings like:</p>\n\n<pre><code>Prelude Text.RawString.QQ&gt; [r|\"To be, or not to be\" - William Shakespeare|]\n\"\\\"To be, or not to be\\\" - William Shakespeare\"\n</code></pre>\n\n<p>QuasiQuotes are not only used to produce raw strings. In Yesod for example there are a few mini-languages to define HTML/CSS/JavaScript templates in Shakespearean languages (<code>hamlet</code>, <code>lucius</code>, <code>cassius</code>, <code>julius</code>). It is typically used if expressing something in \"vanilla\" Haskell would take a lot of work, whereas writing it in a specific language makes it easier.</p>\n"}], "owner": {"reputation": 153, "user_id": 5556147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ndlV.jpg?s=128&g=1", "display_name": "Mantas Savaniakas", "link": "https://stackoverflow.com/users/5556147/mantas-savaniakas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2523, "favorite_count": 0, "accepted_answer_id": 52641668, "answer_count": 2, "score": 8, "last_activity_date": 1538669604, "creation_date": 1538638981, "last_edit_date": 1538669604, "question_id": 52641516, "link": "https://stackoverflow.com/questions/52641516/how-to-escape-double-quotes-in-haskell", "title": "How to escape double quotes in Haskell?", "body": "<p>I know that to escape special characters in Haskell we can use <code>\\\"</code>, so if I try to pass as parameter:</p>\n\n<pre><code>parseString :: String\nparseString = \"{\\\"coord\\\":[\\\"D\\\",\\\"7\\\"],\\\"result\\\":\\\"HIT\\\",\\\"prev\\\":{\\\"coord\\\":[\\\"A\\\",\\\"10\\\"],\\\"result\\\":null,\\\"prev\\\":null}}\"\n</code></pre>\n\n<p>to the function</p>\n\n<pre><code>take 7 parseString\n</code></pre>\n\n<p>everything works fine, but I'm wondering is there are shorter way to produce the same result, without putting escape symbol <code>\\\"</code> everywhere (imagine big JSON)?</p>\n\n<p>For example, Python has this:</p>\n\n<pre><code>&gt;&gt;&gt; s = \"\"\"my string with \"double quotes\" blablabla\"\"\"\n'my string with \"double quotes\" blablabla'\n</code></pre>\n"}, {"tags": ["haskell", "tree"], "answers": [{"comments": [{"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "edited": false, "score": 1, "creation_date": 1538623494, "post_id": 52638417, "comment_id": 92209806, "body": "Assuming I wanted PNode to take a list (so I could have a variable number of nodes), Would the signature of <code>PTree</code> look like this instead?  <code>data KTree a =  KLeaf a | KNode [(KTree a)]   deriving Show</code> ?  And if I modified my data structure to look like that, how would I change my pList function?"}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "edited": false, "score": 0, "creation_date": 1538623879, "post_id": 52638417, "comment_id": 92209884, "body": "When I write something like this  <code>kLeafList :: (Ord a) =&gt; KTree a -&gt; [a] kLeafList (KLeaf a)  = [a] kLeafList (KNode [left,right])  = kLeafList left ++ kLeafList right</code> It sort of gives me the answer I want, but this only handles a list with 2 nodes. How do I go about making this variable.?"}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "edited": false, "score": 0, "creation_date": 1538624733, "post_id": 52638417, "comment_id": 92210059, "body": "Okay, so now I have this  <code>kLeafList :: (Ord a) =&gt; KTree a -&gt; [a] kLeafList (KLeaf a)  = [a] kLeafList (KNode (x:xs))  = kLeafList x ++ kLeafList (KNode xs)</code>  When I run that, it gives me the answer I need [5,6,7,8 **** Exception: Non-exhaustive patterns in function.  I can&#39;t seem to see which pattern I am missing."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "edited": false, "score": 1, "creation_date": 1538625641, "post_id": 52638417, "comment_id": 92210252, "body": "@Kaylo I suggest turning on <code>-Wall</code>. It&#39;ll help you avoid some mistakes. It&#39;ll tell you you&#39;re missing the <code>KNode []</code> case. You can also avoid matching on the list altogether with <code>concatMap</code> or a list comprehension."}, {"owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1538625908, "post_id": 52638417, "comment_id": 92210305, "body": "@HTNW Oh wow, thank you. There are so many errors in my code. lol"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "edited": false, "score": 0, "creation_date": 1538638044, "post_id": 52638417, "comment_id": 92214833, "body": "@Kaylo You <code>KTree</code> looks correct. For the recursive case <code>KNode subtrees</code>: you have a function <code>leaflist :: KTree a -&gt; [a]</code> and <code>subtrees :: [KTree a]</code>. To apply a function to all the elements of a list you can use <code>map</code> as in <code>map leaflist subtrees :: [[a]]</code>. This will produce a list-of-lists, which you can <code>concat</code>enate to get a single list. Your explicit-recursion approach <code>kLeafList x ++ kLeafList (KNode xs)</code> also looks correct, provided you fix the other errors :)"}], "tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": true, "score": 6, "last_activity_date": 1538622690, "creation_date": 1538622690, "answer_id": 52638417, "question_id": 52638198, "link": "https://stackoverflow.com/questions/52638198/haskell-deriving-a-list-from-a-p-tree/52638417#52638417", "title": "Haskell: Deriving a list from a P-Tree", "body": "<pre><code>data PTree a = PNode (PTree a) (PTree a) | PLeaf a\n                   --   ^ One    ^ Two\n   deriving Show\n</code></pre>\n\n<p>Here <code>PTree</code> is a tree where each internal node has two children (see 'One' and 'Two) and internal nodes do not carry values of type <code>a</code>.  A PTree does not have P children - each node has two.  How many leafs total is not specified by the type.</p>\n\n<pre><code>pList :: (Ord a) =&gt; PTree a -&gt; [a]\npList PLeaf a = [a]\npList (PNode left right)  = pList left ++ pList right\n</code></pre>\n\n<p>Close!  try <code>pList (PLeaf a) = [a]</code>.  Your way makes <code>PLeaf</code> and <code>a</code> separate arguments instead of pattern matching on a single argument.</p>\n\n<pre><code>pList (PNode [PLeaf 5, PLeaf 6, PLeaf 7, PLeaf 8])\n</code></pre>\n\n<p>Mmmm.... less close.  Above you already showed <code>PNode</code> takes two <code>PTree</code>s and not a list.  Consider instead:</p>\n\n<pre><code>PNode (PNode (PLeaf 5) (PLeaf 6)) (PNode (PLeaf 7) (PLeaf 8))\n</code></pre>\n"}], "owner": {"reputation": 244, "user_id": 7012554, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4e27f589084cc7b4fc26009c9fd99ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Kaylo", "link": "https://stackoverflow.com/users/7012554/kaylo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 52638417, "answer_count": 1, "score": 3, "last_activity_date": 1538622690, "creation_date": 1538620756, "question_id": 52638198, "link": "https://stackoverflow.com/questions/52638198/haskell-deriving-a-list-from-a-p-tree", "title": "Haskell: Deriving a list from a P-Tree", "body": "<p>I am coming from a background of Imperative languages, so Haskell and functional programming are a pretty new concept to me.</p>\n\n<p>I have a data type that builds P-trees, a tree with p children. It's similar to a binary tree except for the fact that the leaves have values but the internal nodes do not.</p>\n\n<p>This is the data type I came up with (Kindly correct me If I am wrong).</p>\n\n<pre><code>data PTree a = PNode (PTree a) (PTree a) | PLeaf a\n   deriving Show\n</code></pre>\n\n<p>I want to write a function that takes in a PTree and returns a list of the elements in the tree. This is what I have come up with so far</p>\n\n<pre><code>pList :: (Ord a) =&gt; PTree a -&gt; [a]\npList PLeaf a = [a]\npList (PNode left right)  = pList left ++ pList right\n</code></pre>\n\n<p>I'm not getting my intended results. For instance, if I try to run the following code in ghci,</p>\n\n<pre><code>pList (PNode [PLeaf 5, PLeaf 6, PLeaf 7, PLeaf 8])\n</code></pre>\n\n<p>I am hoping to get a list of [5,6,7,8]. Could someone please give me a clue on figuring this out and guide me onto the correct path.</p>\n"}, {"tags": ["haskell", "recursion"], "comments": [{"owner": {"reputation": 10230, "user_id": 2427222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4h1qN.png?s=128&g=1", "display_name": "ymonad", "link": "https://stackoverflow.com/users/2427222/ymonad"}, "edited": false, "score": 3, "creation_date": 1538619362, "post_id": 52637589, "comment_id": 92208966, "body": "Your code matches the line <code>9 `elem` [9] = [9]</code> so it just returns <code>[9]</code>"}, {"owner": {"reputation": 53, "user_id": 10429855, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W_igRWf4x3s/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4trEcL4TtM1k3bD1zAi529BmJoQ/mo/photo.jpg?sz=128", "display_name": "Thierno Diallo", "link": "https://stackoverflow.com/users/10429855/thierno-diallo"}, "reply_to_user": {"reputation": 10230, "user_id": 2427222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4h1qN.png?s=128&g=1", "display_name": "ymonad", "link": "https://stackoverflow.com/users/2427222/ymonad"}, "edited": false, "score": 0, "creation_date": 1538627625, "post_id": 52637589, "comment_id": 92210689, "body": "I realized this is the issue but the trouble im having is coming up with a comparison that won\u2019t return the beginning of the function."}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1538631865, "post_id": 52637589, "comment_id": 92211874, "body": "How does the description of the intended behaviour relate to the example? The example looks like it&#39;s using the output from one step as input to the next step, but if that&#39;s the case, why does it stop after 12 iterations?"}, {"owner": {"reputation": 53, "user_id": 10429855, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W_igRWf4x3s/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4trEcL4TtM1k3bD1zAi529BmJoQ/mo/photo.jpg?sz=128", "display_name": "Thierno Diallo", "link": "https://stackoverflow.com/users/10429855/thierno-diallo"}, "reply_to_user": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1538632009, "post_id": 52637589, "comment_id": 92211942, "body": "@MarkSeemann The example stops at 12 iterations since the front of the list (14) had already occurred once in the list."}, {"owner": {"reputation": 1197, "user_id": 4051020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42660a4e623fd8d2c850081291bcb585?s=128&d=identicon&r=PG&f=1", "display_name": "dopamane", "link": "https://stackoverflow.com/users/4051020/dopamane"}, "edited": false, "score": 0, "creation_date": 1538635307, "post_id": 52637589, "comment_id": 92213451, "body": "Why is the second to last element in the example list <code>26</code> instead of <code>28</code>? <code>9</code> is odd, so <code>9*3+1=28</code>? Am I missing something?"}, {"owner": {"reputation": 1197, "user_id": 4051020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42660a4e623fd8d2c850081291bcb585?s=128&d=identicon&r=PG&f=1", "display_name": "dopamane", "link": "https://stackoverflow.com/users/4051020/dopamane"}, "edited": false, "score": 0, "creation_date": 1538638703, "post_id": 52637589, "comment_id": 92215184, "body": "Ah, that makes more sense, thanks for the edit!"}], "answers": [{"tags": [], "owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "is_accepted": false, "score": 2, "last_activity_date": 1538635278, "creation_date": 1538635278, "answer_id": 52640549, "question_id": 52637589, "link": "https://stackoverflow.com/questions/52637589/haskellcheck-if-first-element-in-a-list-is-a-duplicate/52640549#52640549", "title": "Haskell:Check if first element in a list is a duplicate", "body": "<p>Why the signature is <code>[Integer] -&gt; [Integer]</code>? the input is actually just a number. The following code works.</p>\n\n<pre><code>threeN :: Integer -&gt; [Integer]\nthreeN n = threeN' n []\n  where threeN' n acc \n          | n `elem` acc = n:acc\n          | even n = threeN' (n `div` 2) (n:acc)\n          | odd n = threeN' (3 * n - 1) (n:acc)\n</code></pre>\n\n<p>If you are force to use <code>[Integer]</code> as input signature:</p>\n\n<pre><code>threeN :: [Integer] -&gt; [Integer]\nthreeN [n] = threeN' n []\n  where threeN' n acc \n          | n `elem` acc = n:acc\n          | even n = threeN' (n `div` 2) (n:acc)\n          | odd n = threeN' (3 * n - 1) (n:acc)\n</code></pre>\n\n<p>But I think It does not make sense.</p>\n\n<p>Regards!</p>\n"}, {"tags": [], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "is_accepted": false, "score": 3, "last_activity_date": 1538637560, "creation_date": 1538637560, "answer_id": 52641111, "question_id": 52637589, "link": "https://stackoverflow.com/questions/52637589/haskellcheck-if-first-element-in-a-list-is-a-duplicate/52641111#52641111", "title": "Haskell:Check if first element in a list is a duplicate", "body": "<p>Even if you can only use basic functions, it still helps if you can decompose the problem into smaller problems. Based on the OP and the comments thread, it seems that these three requirements must be fulfilled:</p>\n\n<ul>\n<li>Calculate a number based on a previous number</li>\n<li>Generate a list where the next element is based on the previous element</li>\n<li>Stop generating when a duplicate is encountered</li>\n</ul>\n\n<p>I'd suggest solving each of these problems independently of each other, and then combining the solutions.</p>\n\n<h1>Calculate the next number</h1>\n\n<p>At first glance, this seems to be the heart of the problem. This is where you need to detect whether the number is even or odd, and calculate a result accordingly. Implement this as a function that you could call, say, <code>calcNext</code>. It needs to have a type like this:</p>\n\n<pre><code>Prelude&gt; :t calcNext\ncalcNext :: Integral a =&gt; a -&gt; a\n</code></pre>\n\n<p>With it, you can calculate the next number based on any input:</p>\n\n<pre><code>Prelude&gt; calcNext 9 \n26\nPrelude&gt; calcNext 26\n13\nPrelude&gt; calcNext 13\n38\nPrelude&gt; calcNext 38\n19\n</code></pre>\n\n<p>I'll leave the implementation of <code>calcNext</code> as an exercise.</p>\n\n<h1>Generate a list</h1>\n\n<p>Sometimes, it can be helpful to look for existing functions. Perhaps there's already a function that can be used to generate a list from a function like <code>calcNext</code>.</p>\n\n<p>One way to look for such functions is to use <a href=\"https://www.haskell.org/hoogle/\" rel=\"nofollow noreferrer\">Hoogle</a>.</p>\n\n<p>Making a guess and typing <code>(a -&gt; a) -&gt; [a]</code> into the search field on Hoogle yields a number of results, among which is <code>iterate</code>, which has the similar (but not identical) type of <code>(a -&gt; a) -&gt; a -&gt; [a]</code>. That seems to be close enough, because it enables you to kick off list generation like this:</p>\n\n<pre><code>Prelude&gt; take 10 $ iterate calcNext 9\n[9,26,13,38,19,56,28,14,7,20]\n</code></pre>\n\n<p>Here I chose to <code>take 10</code> because <code>iterate</code> will go on forever.</p>\n\n<p>The order here is reversed compared to the OP, but I'll leave it as another exercise to reverse a (finite) list, if the order matters.</p>\n\n<p>If you want to base a solution entirely on functions you wrote yourself, you can try to implement your own <code>iterate</code> function. If you need a hint, then you can always peek at the source code of the built-in <code>iterate</code> function - it's open source.</p>\n\n<h1>Stop on duplicate</h1>\n\n<p>This one is probably the trickiest part, since you need to 'remember' all the previous elements. What you can do is to create a function that not only calculates the next element, but also keeps a list of all previous elements around. You could write a wrapper function around <code>calcNext</code> that has a type like this:</p>\n\n<pre><code>Prelude&gt; :t calcNextAcc\ncalcNextAcc :: Integral a =&gt; (a, [a]) -&gt; (a, [a])\n</code></pre>\n\n<p>Since this function still returns the same type as its input, you can still use it with <code>iterate</code>:</p>\n\n<pre><code>Prelude&gt; take 15 $ iterate calcNextAcc (9, [])\n[(9,[]),(26,[9]),(13,[26,9]),(38,[13,26,9]),(19,[38,13,26,9]),(56,[19,38,13,26,9]),\n (28,[56,19,38,13,26,9]),(14,[28,56,19,38,13,26,9]),(7,[14,28,56,19,38,13,26,9]),\n (20,[7,14,28,56,19,38,13,26,9]),(10,[20,7,14,28,56,19,38,13,26,9]),\n (5,[10,20,7,14,28,56,19,38,13,26,9]),(14,[5,10,20,7,14,28,56,19,38,13,26,9]),\n (7,[14,5,10,20,7,14,28,56,19,38,13,26,9]),(20,[7,14,5,10,20,7,14,28,56,19,38,13,26,9])]\n</code></pre>\n\n<p>Notice how the second element of each tuple contains all elements calculated so far. Now you just need to go look for duplicates.</p>\n\n<p>You could, for example, write a function called <code>containsDuplicates</code> with this type:</p>\n\n<pre><code>Prelude&gt; :t containsDuplicates\ncontainsDuplicates :: Eq a =&gt; [a] -&gt; Bool\n</code></pre>\n\n<p>With that, you can use a function like the built-in <code>takeWhile</code> to <code>iterate</code> until you find a duplicate:</p>\n\n<pre><code>Prelude&gt; takeWhile (not . containsDuplicates . snd) $ iterate calcNextAcc (9, [])\n[(9,[]),(26,[9]),(13,[26,9]),(38,[13,26,9]),(19,[38,13,26,9]),(56,[19,38,13,26,9]),\n (28,[56,19,38,13,26,9]),(14,[28,56,19,38,13,26,9]),(7,[14,28,56,19,38,13,26,9]),\n (20,[7,14,28,56,19,38,13,26,9]),(10,[20,7,14,28,56,19,38,13,26,9]),\n (5,[10,20,7,14,28,56,19,38,13,26,9]),(14,[5,10,20,7,14,28,56,19,38,13,26,9])]\n</code></pre>\n\n<p>The last element there contains your solution:</p>\n\n<pre><code>Prelude&gt; last $ takeWhile (not . containsDuplicates . snd) $ iterate calcNextAcc (9, [])\n(14,[5,10,20,7,14,28,56,19,38,13,26,9])\n</code></pre>\n\n<p>You can easily turn that tuple into a list:</p>\n\n<pre><code>Prelude&gt; uncurry (:) $ last $ takeWhile (not . containsDuplicates . snd) $ iterate calcNextAcc (9, [])\n[14,5,10,20,7,14,28,56,19,38,13,26,9]\n</code></pre>\n\n<p>I've left the implementation of the various functions as an exercise.</p>\n"}, {"tags": [], "owner": {"reputation": 1197, "user_id": 4051020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42660a4e623fd8d2c850081291bcb585?s=128&d=identicon&r=PG&f=1", "display_name": "dopamane", "link": "https://stackoverflow.com/users/4051020/dopamane"}, "is_accepted": false, "score": 0, "last_activity_date": 1538649523, "last_edit_date": 1538649523, "creation_date": 1538637936, "answer_id": 52641230, "question_id": 52637589, "link": "https://stackoverflow.com/questions/52637589/haskellcheck-if-first-element-in-a-list-is-a-duplicate/52641230#52641230", "title": "Haskell:Check if first element in a list is a duplicate", "body": "<p>You could use <code>head</code> and <code>tail</code> with <code>elem</code> to test whether the first element already exists in the list. Note however that <code>head</code> and <code>tail</code> are unsafe functions. They will crash if given an empty list. </p>\n\n<pre><code>threeN :: [Integer] -&gt; [Integer]\nthreeN ns | n `elem` tail ns = ns\n          | even n = threeN ([n `div` 2]++ns)\n          | odd  n = threeN ([3*n-1]++ns)\n  where\n    n = head ns\n</code></pre>\n\n<p>Also if you do not want the repeat number to be in the output, then have the first guard just equal <code>tail ns</code> instead of <code>ns</code>. There is probably a more efficient algorithm to generate these lists, but this just modifies what you've provided.</p>\n"}, {"tags": [], "owner": {"reputation": 893, "user_id": 6248287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tPegr.jpg?s=128&g=1", "display_name": "\u019b\u019b\u019b", "link": "https://stackoverflow.com/users/6248287/%c6%9b%c6%9b%c6%9b"}, "is_accepted": true, "score": 3, "last_activity_date": 1538676288, "last_edit_date": 1538676288, "creation_date": 1538668637, "answer_id": 52650979, "question_id": 52637589, "link": "https://stackoverflow.com/questions/52637589/haskellcheck-if-first-element-in-a-list-is-a-duplicate/52650979#52650979", "title": "Haskell:Check if first element in a list is a duplicate", "body": "<p><code>threeN</code> consumes a list: <code>xs</code>, starting with a single element in it. It produces a new element: <code>x'</code> based on the value of the head: <code>x</code> of <code>xs</code>; it prepends <code>x'</code> to <code>xs</code> if <code>x'</code> hasn't occurred in <code>xs</code>. </p>\n\n<pre><code>threeN :: [Int] -&gt; [Int]\nthreeN []          = []\nthreeN l@(x:xs) \n    | x' `elem` l  = l                      -- base case\n    | otherwise    = threeN (x':l)\n    where\n      x' =  if even x then x `div` 2 else x * 3 - 1\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10429855, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W_igRWf4x3s/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV4trEcL4TtM1k3bD1zAi529BmJoQ/mo/photo.jpg?sz=128", "display_name": "Thierno Diallo", "link": "https://stackoverflow.com/users/10429855/thierno-diallo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 52650979, "answer_count": 4, "score": 1, "last_activity_date": 1538676288, "creation_date": 1538615195, "last_edit_date": 1538637740, "question_id": 52637589, "link": "https://stackoverflow.com/questions/52637589/haskellcheck-if-first-element-in-a-list-is-a-duplicate", "title": "Haskell:Check if first element in a list is a duplicate", "body": "<p>I am writing a recursive function called <code>threeN</code> that takes a list with one element and adds a new number depending on if it's even or odd. If it's even divide it by 2, and if it's odd multiply it by three and subtract 1. I'm having trouble with my base case which will check the list to see if an element is already contained in the list.</p>\n\n<p>It should be like this:</p>\n\n<pre><code>prelude&gt; threeN [9]\n[14,5,10,20,7,14,28,56,19,38,13,26,9]\n</code></pre>\n\n<p>But Instead I get this:</p>\n\n<pre><code>prelude&gt; threeN [9]\n[9]\n</code></pre>\n\n<p>This is my code so far:</p>\n\n<pre><code>threeN :: [Integer] -&gt; [Integer]\nthreeN [] = []\nthreeN [n]\n    | n `elem` [n] = [n]\n    | n `mod` 2 ==0 = threeN[n `div` 2] ++ [n]\n    | n `mod` 2 ==1 = threeN[(3*n)-1] ++ [n]\n</code></pre>\n\n<p>This is supposed to be done with basic functions, so I can't use very advanced ones to solve the issue, which is why I'm having trouble. </p>\n"}]