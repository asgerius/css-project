[{"tags": ["haskell", "ghc", "quickcheck"], "comments": [{"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1573088787, "post_id": 58739571, "comment_id": 103770964, "body": "<code>trace &quot;GOOD&quot; True</code> has no free variables; it is most likely getting optimized and redefined as a global constant so you will see it print at most once."}, {"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1573089196, "post_id": 58739571, "comment_id": 103771032, "body": "It is kind of suspicious that there is no mention of your library in the stack trace. Now that you have a counterexample you might want to try isolating it in a standalone executable."}, {"owner": {"reputation": 2681, "user_id": 359181, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d6b5837e011a620150043143f9b0dfcb?s=128&d=identicon&r=PG", "display_name": "Rupert Swarbrick", "link": "https://stackoverflow.com/users/359181/rupert-swarbrick"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1573122446, "post_id": 58739571, "comment_id": 103782107, "body": "Duh... Thanks for spotting the trace problem. I&#39;ll have a proper stare at this again this evening."}], "answers": [{"tags": [], "owner": {"reputation": 2681, "user_id": 359181, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d6b5837e011a620150043143f9b0dfcb?s=128&d=identicon&r=PG", "display_name": "Rupert Swarbrick", "link": "https://stackoverflow.com/users/359181/rupert-swarbrick"}, "is_accepted": true, "score": 0, "last_activity_date": 1574507527, "creation_date": 1574507527, "answer_id": 59007003, "question_id": 58739571, "link": "https://stackoverflow.com/questions/58739571/how-to-debug-diverging-test-using-quickcheck/59007003#59007003", "title": "How to debug diverging test using QuickCheck", "body": "<p>For anyone who finds this question, the problem with my code was that my <code>arbitrary</code> instance for expressions didn't constrain sizes properly, so sometimes tried to make enormous trees. See the \"Generating Recursive Data Types\" section of the <a href=\"http://www.cse.chalmers.se/~rjmh/QuickCheck/manual.html\" rel=\"nofollow noreferrer\">QuickCheck manual</a> for what I should have been doing!</p>\n\n<p>I found that running commands like:</p>\n\n<pre><code>./long/path/to/foo-test -o3 +RTS -xc\n</code></pre>\n\n<p>helped me figure out what was going on. Strangely, the backtrace still shows several threads of execution. I don't really understand why, but at least I could then see that I was spending time in my \"<code>makeAnExpr</code>\" function. The trick is to tune the timeout (3 seconds above) so that it doesn't kill a test until it's well and truly stuck, but does stop it before it starts eating all your RAM!</p>\n"}], "owner": {"reputation": 2681, "user_id": 359181, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d6b5837e011a620150043143f9b0dfcb?s=128&d=identicon&r=PG", "display_name": "Rupert Swarbrick", "link": "https://stackoverflow.com/users/359181/rupert-swarbrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59007003, "answer_count": 1, "score": 1, "last_activity_date": 1574507527, "creation_date": 1573080489, "question_id": 58739571, "link": "https://stackoverflow.com/questions/58739571/how-to-debug-diverging-test-using-quickcheck", "title": "How to debug diverging test using QuickCheck", "body": "<p>I have some parsing code using Megaparsec that I've written a simple property to test (it generates a random expression tree, pretty-prints it, and then checks that the result parses back to the original tree).</p>\n\n<p>Unfortunately, there seems to be a bug and if I run the tests without any limits, I see the GHC process allocating more and more memory until either I kill it or the OOM killer gets there first.</p>\n\n<p>Not a problem, I thought... but I can't for the life of me figure out what's causing the divergence. The property itself looks like this: (I've ripped out the proper testing and the shrinking code to try to minimise the code that actually runs)</p>\n\n<pre><code>prop_parse_expr :: Property\nprop_parse_expr =\n  forAll arbitrary $\n  (\\ pe -&gt;\n     let str = prettyParExpr 0 pe in\n       counterexample (\"Rendered to: \" ++ show str) $\n       trace (\"STARTING TEST: \" ++ show str) $\n       case parse (expr &lt;* eof) \"\" str of\n         Left _ -&gt; trace \"NOPE\" $ False\n         Right _ -&gt; trace \"GOOD\" $ True)\n</code></pre>\n\n<p>If I compile with profiling (using <code>stack test --profile</code>), I can run the resulting binary with RTS options. Ahah, I thought, and ran with <code>-xc</code>, thinking that I'd get a helpful stack trace when I sent a SIGINT to the stuck job. It seems not. Running with</p>\n\n<pre><code>./long/path/to/foo-test -j1 --test-seed 1 +RTS -xc\n</code></pre>\n\n<p>I see this output:</p>\n\n<pre><code>STARTING TEST: \"0\"\nGOOD\nSTARTING TEST: \"(x [( !0 )]) \"\nSTARTING TEST: \"({ 2 {( !0 )}} ) \"\nSTARTING TEST: \"{ 2{ ( x[0? {( 0) ,( x ) } :((0 )? (x ):0) -: ( -(^( x  )) ) ]), 0**( x )} } \"\nSTARTING TEST: \"| (0? (x[({ 1{ (0)? x : ( 0 ) }} ) ]) :(~&amp;( 0) ?( x):( (x ) ^( x ) )))\"\nSTARTING TEST: \"(0 )\"\nSTARTING TEST: \"0\"\n^C*** Exception (reporting due to +RTS -xc): (THUNK_STATIC), stack trace: \n  Test.Framework.Improving.runImprovingIO,\n  called from Test.Framework.Providers.QuickCheck2.runProperty,\n  called from Test.Framework.Providers.QuickCheck2.runTest,\n  called from Test.Framework.Runners.Core.runSimpleTest,\n  called from Test.Framework.Runners.Core.runTestTree.go,\n  called from Test.Framework.Runners.Core.runTestTree,\n  called from Test.Framework.Runners.Core.runTests',\n  called from Test.Framework.Runners.Core.runTests,\n  called from Test.Framework.Runners.Console.defaultMainWithOpts,\n  called from Test.Framework.Runners.Console.defaultMainWithArgs,\n  called from Test.Framework.Runners.Console.defaultMain,\n  called from Main.main\n&lt;snip: 2 more identical backtraces&gt;\n*** Exception (reporting due to +RTS -xc): (THUNK_STATIC), stack trace: \n  Test.Framework.Runners.Console.Utilities.hideCursorDuring,\n  called from Test.Framework.Runners.Console.Run.showRunTestsTop,\n  called from Test.Framework.Improving.runImprovingIO,\n  called from Test.Framework.Providers.QuickCheck2.runProperty,\n  called from Test.Framework.Providers.QuickCheck2.runTest,\n  called from Test.Framework.Runners.Core.runSimpleTest,\n  called from Test.Framework.Runners.Core.runTestTree.go,\n  called from Test.Framework.Runners.Core.runTestTree,\n  called from Test.Framework.Runners.Core.runTests',\n  called from Test.Framework.Runners.Core.runTests,\n  called from Test.Framework.Runners.Console.defaultMainWithOpts,\n  called from Test.Framework.Runners.Console.defaultMainWithArgs,\n  called from Test.Framework.Runners.Console.defaultMain,\n  called from Main.main\n</code></pre>\n\n<p>Can anyone tell me:</p>\n\n<ol>\n<li><p>Why I see multiple <code>STARTING TEST</code> lines without <code>GOOD</code> or <code>NOPE</code> between them, despite the -j1?</p></li>\n<li><p>How I get an actual stack trace that shows where the test is allocating all its memory?</p></li>\n</ol>\n\n<p>Thanks for any ideas!</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 5, "creation_date": 1573076273, "post_id": 58738825, "comment_id": 103767615, "body": "It&#39;s defined in the block you quoted."}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 4, "last_activity_date": 1573077322, "last_edit_date": 1573077322, "creation_date": 1573077013, "answer_id": 58739010, "question_id": 58738825, "link": "https://stackoverflow.com/questions/58738825/what-does-the-operator-do-in-haskell/58739010#58739010", "title": "What does the `&gt;||&lt;` operator do in Haskell?", "body": "<p>In haskell, functions can be named with symbols if they are closed by parentheses. For example</p>\n\n<pre><code>(+-+) :: Num a =&gt; a -&gt; a -&gt; a -&gt; a\n(+-+) x y z = (x+y) - z\n</code></pre>\n\n<p>it can be used:</p>\n\n<pre><code>(+-+) 3 4 2\n=&gt; 5\n</code></pre>\n\n<p>When you use a <code>where</code> clause, you are telling Haskell to create a function with the scope of the function where is called, so, for example:</p>\n\n<pre><code>fun1 r m = doSome r m\n  where\n  doSome r1 m1 = r1 + m1\n</code></pre>\n\n<p>here, <code>doSome</code> function can be called only in <code>fun1</code> scope, and it takes two numbers and sum them together. In your example:</p>\n\n<pre><code>dpll e v\n  where\n  units = ...\n  unitLit =  ...\n  lit = ...\n  propagate n e = ...\n  (&gt;||&lt;) x y = if x /= [] then x else y\n</code></pre>\n\n<p>your functions has the type:</p>\n\n<pre><code>(&gt;||&lt;) :: Eq a =&gt; [a] -&gt; [a] -&gt; [a]\n</code></pre>\n\n<p><code>(&gt;||&lt;)</code> its a function defined in <code>dpll</code> scope, and it returns the first list if the first list is not empty, if the first list is  empty, it return the second list.</p>\n"}], "owner": {"reputation": 9, "user_id": 12334516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JHhSO.jpg?s=128&g=1", "display_name": "hghh hhh", "link": "https://stackoverflow.com/users/12334516/hghh-hhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573716595, "creation_date": 1573076071, "last_edit_date": 1573716595, "question_id": 58738825, "link": "https://stackoverflow.com/questions/58738825/what-does-the-operator-do-in-haskell", "title": "What does the `&gt;||&lt;` operator do in Haskell?", "body": "<p>Does anyone know what <code>'&gt;||&lt;'</code> does in the Haskell piece of code that's below-7th line? (the DPLL algorithm)</p>\n\n<pre><code>dpll :: Eq a =&gt; CNF a -&gt; Valuation a -&gt; Valuation a\ndpll e v\n| e == [] = v\n| elem [] e = []\n| units /= [] = dpll (propagate unitLit e) (v ++ [unitLit])\n| otherwise = dpll (propagate lit e) (v ++ [lit])\n&gt;||&lt; dpll (propagate (neg lit) e) (v ++ [(neg lit)])\nwhere\nunits = filter (\\x -&gt; (length x) == 1) e\nunitLit = head $ head units\nlit = head $ head e\npropagate n e = map (\\\\ [neg n]) $ filter (notElem n) e\n(&gt;||&lt;) x y = if x /= [] then x else y\n\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1573065375, "post_id": 58736525, "comment_id": 103763195, "body": "Where are you getting <code>With</code> from? That&#39;s not a standard type constructor."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1573065406, "post_id": 58736525, "comment_id": 103763208, "body": "The data constructor of <code>With</code> is, based on your sample output <code>:-</code>, so it should be <code>buildWith a = length a :- head a</code>."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 1, "creation_date": 1573065678, "post_id": 58736525, "comment_id": 103763330, "body": "Ha..! interesting... so infix data constructors ara allowed if they start with a colon... I learned this today. <a href=\"https://stackoverflow.com/q/30039123/4543207\">stackoverflow.com/q/30039123/4543207</a>"}, {"owner": {"reputation": 1, "user_id": 10413178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12c9d25d8f5a73a56464b7188030637?s=128&d=identicon&r=PG&f=1", "display_name": "N. Jans.", "link": "https://stackoverflow.com/users/10413178/n-jans"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1573065815, "post_id": 58736525, "comment_id": 103763388, "body": "@WillemVanOnsem This was it, thanks for your help! Shame I did not think about this..."}, {"owner": {"reputation": 1, "user_id": 10413178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12c9d25d8f5a73a56464b7188030637?s=128&d=identicon&r=PG&f=1", "display_name": "N. Jans.", "link": "https://stackoverflow.com/users/10413178/n-jans"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1573065826, "post_id": 58736525, "comment_id": 103763394, "body": "@chepner My bad, I found it hidden inside an imported file, I thought is was a standard type."}], "owner": {"reputation": 1, "user_id": 10413178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12c9d25d8f5a73a56464b7188030637?s=128&d=identicon&r=PG&f=1", "display_name": "N. Jans.", "link": "https://stackoverflow.com/users/10413178/n-jans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573065964, "creation_date": 1573065251, "last_edit_date": 1573065964, "question_id": 58736525, "link": "https://stackoverflow.com/questions/58736525/haskell-with-datatype", "title": "Haskell &quot;With&quot; datatype", "body": "<p>I am making a function in Haskell that will give me the frequencies of chars in a string.</p>\n\n<p>Input:</p>\n\n<pre><code>frequencies \"hello world\"\n</code></pre>\n\n<p>Disired output:</p>\n\n<pre><code>[1 :- \u2019 \u2019,1 :- \u2019d\u2019,1 :- \u2019e\u2019,1 :- \u2019h\u2019,3 :- \u2019l\u2019,2 :- \u2019o\u2019,1 :- \u2019r\u2019,1 :- \u2019w\u2019]\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>frequencies  ::  (Ord char) =&gt; [char] -&gt; [With Int char]\nfrequencies a = map (buildWith) (group (sort (head (tails a))))\n\nbuildWith :: [char] -&gt; With Int char\nbuildWith a = With (length a) (head a)\n</code></pre>\n\n<p>Now I cannot get this to work, mainly because I cannot find the information about the \"With\" datatype. I do not know if I use it correctly. This is the fault the Haskell interpreter gives back:</p>\n\n<pre><code>[3 of 3] Compiling Huffman          ( C:\\\\Huffman.hs, interpreted )\n\nC:\\\\Huffman.hs:17:16: error:\n    Data constructor not in scope: With :: Int -&gt; char -&gt; With Int char\n   |\n17 | buildWith a = (With (length a) (head a))\n   |                ^^^^\nFailed, two modules loaded.\n</code></pre>\n\n<p>I am curious what I am doing wrong and how I can fix it. Thanks in advance!</p>\n\n<p>Edit:\nFor the ones interested in the With datatype:</p>\n\n<pre><code>infix 1 :-\ndata With a b  =  a :- b\n  deriving (Show)\n\nsatellite :: With a b -&gt; b\nsatellite (_ :- b)  =  b\n\ninstance (Eq a) =&gt; Eq (With a b) where\n  (a :- _) == (b :- _)  =  a == b\ninstance (Ord a) =&gt; Ord (With a b) where\n  (a :- _) &lt;= (b :- _)  =  a &lt;= b\n</code></pre>\n"}, {"tags": ["haskell", "logic"], "comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1573061754, "post_id": 58735572, "comment_id": 103761546, "body": "It seems obvious to me that this is impossible, but maybe I am wrong. If so, a useful starting point is that a function with thefully polymorphic type <code>((a -&gt; b) -&gt; b)</code> is isomorphic to <code>a</code>: the only possible implementation is <code>g f = f someHardcodedA</code>."}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1573061820, "post_id": 58735572, "comment_id": 103761576, "body": "@amalloy there is another possible implementation: <code>g = const someHardcodedB</code>"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1573069753, "post_id": 58735572, "comment_id": 103765008, "body": "Ah, of course. It is either <code>a</code> or <code>b</code>. Makes sense."}, {"owner": {"reputation": 578, "user_id": 5670773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcc0792657c4665d871ee71ad7362e05?s=128&d=identicon&r=PG&f=1", "display_name": "benrg", "link": "https://stackoverflow.com/users/5670773/benrg"}, "edited": false, "score": 1, "creation_date": 1573097953, "post_id": 58735572, "comment_id": 103772806, "body": "If Haskell had call/cc, then <code>to f = callcc (\\k -&gt; k (Right (f (\\a -&gt; k (Left a)))))</code> would work. (This is a valid classical proof of the implication.)"}], "answers": [{"tags": [], "owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "is_accepted": false, "score": 4, "last_activity_date": 1573065500, "creation_date": 1573065500, "answer_id": 58736578, "question_id": 58735572, "link": "https://stackoverflow.com/questions/58735572/is-there-a-way-to-realize-a-function-of-type-a-b-b-either-a-b/58736578#58736578", "title": "Is there a way to realize a function of type ((a -&gt; b) -&gt; b) -&gt; Either a b?", "body": "<p>No, it's not possible, but it's a bit subtle. The problem is that the type variables <code>a</code> and <code>b</code> are universally quantified.</p>\n\n<pre><code>to :: ((a -&gt; b) -&gt; b) -&gt; Either a b\nto f = ...\n</code></pre>\n\n<p><code>a</code> and <code>b</code> are universally quantified.  The caller chooses what type they are, so you can't just create a value of either type.  This implies you can't just create a value of type <code>Either a b</code> while ignoring the argument <code>f</code>.  But using <code>f</code> is also impossible.  Without knowing what types <code>a</code> and <code>b</code> are, you can't create a value of type <code>a -&gt; b</code> to pass to <code>f</code>. There's just not enough information available when the types are universally quantified.</p>\n\n<p>As far as why the isomorphism doesn't work in Haskell - are you sure those propositions are equivalent in a constructive intuitionist logic? Haskell does not implement a classical deductive logic.</p>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 9, "last_activity_date": 1573075157, "last_edit_date": 1573075157, "creation_date": 1573065655, "answer_id": 58736612, "question_id": 58735572, "link": "https://stackoverflow.com/questions/58735572/is-there-a-way-to-realize-a-function-of-type-a-b-b-either-a-b/58736612#58736612", "title": "Is there a way to realize a function of type ((a -&gt; b) -&gt; b) -&gt; Either a b?", "body": "<p>No, it is impossible. Consider the special case where <code>Q = Void</code>.</p>\n\n<p><code>Either P Q</code> is then <code>Either P Void</code>, which is isomorphic to <code>P</code>.</p>\n\n<pre><code>iso :: P -&gt; Either P Void\niso = Left\n\niso_inv :: Either P Void -&gt; P\niso_inv (Left p)  = p\niso_inv (Right q) = absurd q\n</code></pre>\n\n<p>Hence, if we had a function term</p>\n\n<pre><code>impossible :: ((P -&gt; Void) -&gt; Void) -&gt; Either P Void\n</code></pre>\n\n<p>we could also have a term</p>\n\n<pre><code>impossible2 :: ((P -&gt; Void) -&gt; Void) -&gt; P\nimpossible2 = iso_inv . impossible\n</code></pre>\n\n<p>According to the Curry-Howard correspondence, this would be a tautology in <em>intuitionistic</em> logic:</p>\n\n<pre><code>((P -&gt; False) -&gt; False) -&gt; P\n</code></pre>\n\n<p>But the above is double negation elimination, which is well known to be impossible to prove in <em>intuitionistic</em> logic -- hence a contradiction. (The fact that we could prove it in <em>classical</em> logic is not relevant.)</p>\n\n<p>(Final note: this assumes that out Haskell program terminate. Of course, using infinite recursion, <code>undefined</code>, and similar ways to actually avoid to return a result, we can inhabit any type in Haskell.)</p>\n"}, {"tags": [], "owner": {"reputation": 11487, "user_id": 1308058, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2be2ab74793559ea1c1dbdf55ccdf90b?s=128&d=identicon&r=PG", "display_name": "phadej", "link": "https://stackoverflow.com/users/1308058/phadej"}, "is_accepted": false, "score": 14, "last_activity_date": 1573114691, "last_edit_date": 1573114691, "creation_date": 1573066406, "answer_id": 58736788, "question_id": 58735572, "link": "https://stackoverflow.com/questions/58735572/is-there-a-way-to-realize-a-function-of-type-a-b-b-either-a-b/58736788#58736788", "title": "Is there a way to realize a function of type ((a -&gt; b) -&gt; b) -&gt; Either a b?", "body": "<blockquote>\n  <p>Propositions <code>(P -&gt; Q) -&gt; Q</code> and <code>P \\/ Q</code> are equivalent.</p>\n</blockquote>\n\n<p>This is true in classical logic, but not in the constructive logic.</p>\n\n<p>In constructive logic we don't have <a href=\"https://en.wikipedia.org/wiki/Law_of_excluded_middle\" rel=\"nofollow noreferrer\">law of excluded middle</a>, i.e. we cannot start our thinking with \"either P is true or P is not true\".</p>\n\n<p>Classically we reason like:</p>\n\n<ul>\n<li>if P is true (i.e we have (<code>x :: P</code>)) then return <code>Left x</code>. </li>\n<li>if P is false, then in Haskell speak we'd have <code>nx :: P -&gt; Void</code> function. Then <code>absurd . nx :: P -&gt; Q</code> (we can peak any type, we take <code>Q</code>) and call given <code>f :: (P -&gt; Q) -&gt; Q)</code> with <code>absurd . nx</code> to get value of type <code>Q</code>.</li>\n</ul>\n\n<p>The problem, that there aren't general function of a type:</p>\n\n<pre><code>lem :: forall p. Either p (p -&gt; Void)\n</code></pre>\n\n<p>For some concrete types there are, e.g. <code>Bool</code> is inhabited so we can write</p>\n\n<pre><code>lemBool :: Either Bool (Bool -&gt; Void)\nlemBool = Left True -- arbitrary choice\n</code></pre>\n\n<p>but again, in general we cannot.</p>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 2, "last_activity_date": 1573137193, "last_edit_date": 1573137193, "creation_date": 1573076693, "answer_id": 58738952, "question_id": 58735572, "link": "https://stackoverflow.com/questions/58735572/is-there-a-way-to-realize-a-function-of-type-a-b-b-either-a-b/58738952#58738952", "title": "Is there a way to realize a function of type ((a -&gt; b) -&gt; b) -&gt; Either a b?", "body": "<p>As others have pointed out, this is impossible because we don't have the law of the excluded middle. Let me go through that a bit more explicitly. Suppose we have</p>\n\n<pre><code>bogus :: ((a -&gt; b) -&gt; b) -&gt; Either a b\n</code></pre>\n\n<p>and we set <code>b ~ Void</code>. Then we get</p>\n\n<pre><code>-- chi calls this `impossible2`.\ndouble_neg_elim :: ((a -&gt; Void) -&gt; Void) -&gt; a\nbouble_neg_elim f = case bogus f of\n             Left a -&gt; a\n             Right v -&gt; absurd v\n</code></pre>\n\n<p>Now, let's prove the double negation of the law of the excluded middle <em>as applied to a specific proposition</em>.</p>\n\n<pre><code>nnlem :: forall a. (Either a (a -&gt; Void) -&gt; Void) -&gt; Void\nnnlem f = not_not_a not_a\n  where\n    not_a :: a -&gt; Void\n    not_a = f . Left\n\n    not_not_a :: (a -&gt; Void) -&gt; Void\n    not_not_a = f . Right\n</code></pre>\n\n<p>So now</p>\n\n<pre><code>lem :: Either a (a -&gt; Void)\nlem = double_neg_elim nnlem\n</code></pre>\n\n<p><code>lem</code> clearly cannot exist because <code>a</code> can encode the proposition that any Turing machine configuration I happen to pick will halt.</p>\n\n<hr>\n\n<p>Let's verify that <code>lem</code> is sufficient:</p>\n\n<pre><code>bogus :: forall a b. ((a -&gt; b) -&gt; b) -&gt; Either a b\nbogus f = case lem @a of\n  Left a -&gt; Left a\n  Right na -&gt; Right $ f (absurd . na)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "is_accepted": false, "score": 0, "last_activity_date": 1573093684, "creation_date": 1573093684, "answer_id": 58741121, "question_id": 58735572, "link": "https://stackoverflow.com/questions/58735572/is-there-a-way-to-realize-a-function-of-type-a-b-b-either-a-b/58741121#58741121", "title": "Is there a way to realize a function of type ((a -&gt; b) -&gt; b) -&gt; Either a b?", "body": "<p>I have no idea what whether this is valid in terms of logic, or what it means for your equivalence, but yes it is possible to write such a function in Haskell.</p>\n\n<p>To construct an <code>Either a b</code>, we need either an <code>a</code> or a <code>b</code> value. We don't have any way to construct an <code>a</code> value, but we do have a function that returns a <code>b</code> that we could call. To do that, we need to supply a function that converts an <code>a</code> into a <code>b</code>, but given the types are unknown we could at best make a function that returns a constant <code>b</code>. To get that <code>b</code> value, we can't construct it any other way than before, so this becomes circular reasoning - and we can solve that by simply creating a <strong>fixpoint</strong>:</p>\n\n<pre><code>to :: ((a -&gt; b) -&gt; b) -&gt; Either a b\nto f = let x = f (\\_ -&gt; x) in Right x\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12333506"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 1, "answer_count": 5, "score": 18, "last_activity_date": 1573137193, "creation_date": 1573061254, "question_id": 58735572, "link": "https://stackoverflow.com/questions/58735572/is-there-a-way-to-realize-a-function-of-type-a-b-b-either-a-b", "title": "Is there a way to realize a function of type ((a -&gt; b) -&gt; b) -&gt; Either a b?", "body": "<p>Propositions <code>(P -&gt; Q) -&gt; Q</code> and <code>P \\/ Q</code> are equivalent.</p>\n\n<p>Is there a way to witness this equivalence in Haskell:</p>\n\n<pre><code>from :: Either a b -&gt; ((a -&gt; b) -&gt; b)\nfrom x = case x of\n         Left a -&gt; \\f -&gt; f a\n         Right b -&gt; \\f -&gt; b\n\nto :: ((a -&gt; b) -&gt; b) -&gt; Either a b\nto = ???\n</code></pre>\n\n<p>such that</p>\n\n<p><code>from . to = id</code> and <code>to . from = id</code>?</p>\n"}, {"tags": ["haskell", "functional-programming", "monads"], "comments": [{"owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "edited": false, "score": 0, "creation_date": 1573058055, "post_id": 58733711, "comment_id": 103759467, "body": "How have you used <code>Cont</code>?  When you say you haven&#39;t needed to use something more powerful than <code>cont</code>, does that mean you haven&#39;t used <code>reset</code> or <code>shift</code> either?"}, {"owner": {"reputation": 1510, "user_id": 2142728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b3ca006aaf7a1160f11d133c2762e75f?s=128&d=identicon&r=PG", "display_name": "Alejandro Navas", "link": "https://stackoverflow.com/users/2142728/alejandro-navas"}, "reply_to_user": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "edited": false, "score": 0, "creation_date": 1573058220, "post_id": 58733711, "comment_id": 103759574, "body": "I haven&#39;t used <code>reset</code> or <code>shift</code>. I&#39;ve used it to define an eembedded language that can be suspended until a given action is resolved by another process, and then it resumes with the given &quot;continuation&quot;. Maybe I give the impression of having a lot of experience with Cont Monad, but not that much really, I just really want to understand callCC"}], "answers": [{"comments": [{"owner": {"reputation": 1510, "user_id": 2142728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b3ca006aaf7a1160f11d133c2762e75f?s=128&d=identicon&r=PG", "display_name": "Alejandro Navas", "link": "https://stackoverflow.com/users/2142728/alejandro-navas"}, "edited": false, "score": 0, "creation_date": 1573081510, "post_id": 58734983, "comment_id": 103769303, "body": "I get it! and <code>b</code> is basically just a wildcard so that you can chain more continuations inside callCC. Anyway, once <code>ret</code> is applied, the continuation produced by call cc will &quot;return&quot; whatever was put in <code>ret</code>. That&#39;s pretty convoluted, yet pretty smart, yet extremely powerful I see not a lot of places where using such power is not like killing a fly with a nuke"}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "reply_to_user": {"reputation": 1510, "user_id": 2142728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b3ca006aaf7a1160f11d133c2762e75f?s=128&d=identicon&r=PG", "display_name": "Alejandro Navas", "link": "https://stackoverflow.com/users/2142728/alejandro-navas"}, "edited": false, "score": 1, "creation_date": 1573097011, "post_id": 58734983, "comment_id": 103772622, "body": "@caeus Glad I could help. If you liked my answer, would you consider accepting it?"}], "tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 10, "last_activity_date": 1573065405, "last_edit_date": 1573065405, "creation_date": 1573059074, "answer_id": 58734983, "question_id": 58733711, "link": "https://stackoverflow.com/questions/58733711/what-can-i-do-with-callcc-that-cannot-be-done-with-cont/58734983#58734983", "title": "What can I do with callCC that cannot be done with cont?", "body": "\n\n<p><code>callCC</code> gives you \"early return\" semantics, but in a monadic context.</p>\n\n<p>Say you wanted to <code>doOne</code>, and if that returns <code>True</code>, you immediately stop, otherwise you go on to <code>doTwo</code> and <code>doThree</code>:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>doOne :: Cont r Bool\ndoTwo :: Cont r ()\ndoThree :: Cont r ()\n\ndoThings :: Cont r ()\ndoThings = do\n    one &lt;- doOne\n    if one\n        then pure ()\n        else do\n            doTwo\n            doThree\n</code></pre>\n\n<p>See that <code>if</code> branching there? One branch is not that bad, could be dealt with, but imagine there are multiple such points where you just want to bail? This gets very ugly very quickly.</p>\n\n<p>With <code>callCC</code> you can have \"early return\": you bail at the branching point and don't have to nest the rest of the computation:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>doThings = callCC \\ret -&gt; do\n    one &lt;- doOne\n    when one $ ret ()\n    doTwo\n    doThree\n</code></pre>\n\n<p>Much more pleasant to read!</p>\n\n<p>More importantly, since <code>ret</code> here is not a special syntax (like <code>return</code> in C-like languages), but just a value like any other, you can pass it to other functions too! And those functions can then perform what's called \"non-local return\" - i.e. they can \"stop\" the <code>doThings</code> computation, even from multiple nested calls deep. For example, I could factor out checking of the <code>doOne</code>'s result into a separate function <code>checkOne</code> like this:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>checkOne ret = do\n    one &lt;- doOne\n    when one $ ret ()\n\ndoThings = callCC \\ret -&gt; do\n    checkOne ret\n    doTwo\n    doThree\n</code></pre>\n"}], "owner": {"reputation": 1510, "user_id": 2142728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b3ca006aaf7a1160f11d133c2762e75f?s=128&d=identicon&r=PG", "display_name": "Alejandro Navas", "link": "https://stackoverflow.com/users/2142728/alejandro-navas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 4, "accepted_answer_id": 58734983, "answer_count": 1, "score": 9, "last_activity_date": 1573080273, "creation_date": 1573054641, "last_edit_date": 1573080273, "question_id": 58733711, "link": "https://stackoverflow.com/questions/58733711/what-can-i-do-with-callcc-that-cannot-be-done-with-cont", "title": "What can I do with callCC that cannot be done with cont?", "body": "<p>I'm really really struggling with understanding callCC. I get the power of Continuations and I've been using the concept in some of my projects to create cool concepts. But never have I needed to use something with greater capabilities than <code>cont :: ((a-&gt;r)-&gt;r)-&gt; Cont r a</code>.</p>\n\n<p>After using it, it makes a lot of sense why they call the Cont Monad the mother of all monads, YET, I don't get when would I need to use <code>callCC</code>, and that's exactly my question.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1573037798, "post_id": 58728467, "comment_id": 103748021, "body": "If you use a <code>let</code> without an <code>in</code>, then it only makes sense in a <code>do</code> block (but you here have a non-monadic type, so you can not use a <code>do</code> block). You should use <code>let .. in</code>. Note that you can not use <code>i = i + 1</code> here."}, {"owner": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1573037876, "post_id": 58728467, "comment_id": 103748053, "body": "so what should I do to increase 1?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1573037955, "post_id": 58728467, "comment_id": 103748097, "body": "you don&#39;t. Haskell is a declarative language, so that means that <i>all</i> variable are immutable. You should think of it like: I have the count of the tail (<code>count xs</code>) what should I return for <code>counta (x:xs)</code>."}, {"owner": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1573038761, "post_id": 58728467, "comment_id": 103748514, "body": "i still dont quite get it sorry about that im weak at haskell. why do i need tail( count xs) or is it tail(counta xs)?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1573044848, "post_id": 58728467, "comment_id": 103751788, "body": "He&#39;s not referring to the function <code>tail</code>; <code>xs</code> is already the tail of the input."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "edited": false, "score": 0, "creation_date": 1573039654, "post_id": 58728980, "comment_id": 103748962, "body": "so what should i do to increase 1 ? how should I increase 1 when isDigit?"}, {"owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "reply_to_user": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "edited": false, "score": 0, "creation_date": 1573039778, "post_id": 58728980, "comment_id": 103749032, "body": "Try to come up with a recursive solution for the problem before writing any code, after that it should be easy to implement."}, {"owner": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "edited": false, "score": 0, "creation_date": 1573040798, "post_id": 58728980, "comment_id": 103749612, "body": "I have the idea of checking whether is its digit from a list of char using isDigit for the head of the list. if the head isDigit, then i replace into x : counta (xs). This is my idea. Isnt it correct?"}, {"owner": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "edited": false, "score": 0, "creation_date": 1573040822, "post_id": 58728980, "comment_id": 103749627, "body": "And since i cant mutate variables how do i do it?"}, {"owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "reply_to_user": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "edited": false, "score": 0, "creation_date": 1573041376, "post_id": 58728980, "comment_id": 103749905, "body": "you don&#39;t need to use head explicitly , <code>x</code> is head and <code>xs</code> is tail in your function. You can&#39;t mutate values but you can return new values, for example <code>f x = x + 1</code> takes a number returns a new number without mutating input."}, {"owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "reply_to_user": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "edited": false, "score": 1, "creation_date": 1573041473, "post_id": 58728980, "comment_id": 103749973, "body": "If you weak in haskell as you said, I would recommend <a href=\"http://learnyouahaskell.com/chapters\" rel=\"nofollow noreferrer\">learnyouahaskell.com/chapters</a> you should be able to solve this problem after reading the first chapter itself"}], "tags": [], "owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "is_accepted": false, "score": 2, "last_activity_date": 1573039255, "creation_date": 1573039255, "answer_id": 58728980, "question_id": 58728467, "link": "https://stackoverflow.com/questions/58728467/why-when-i-run-in-the-haskell-compiler-it-just-says-there-is-an-error-in-parse-i/58728980#58728980", "title": "why when I run in the haskell compiler it just says there is an error in parse input &quot;if&quot;", "body": "<p>There are multiple problems in your code</p>\n\n<ul>\n<li><code>counta [] = []</code> returns a list but you have declared <code>counta :: [Char]-&gt;Int</code> which indicates it should return a Int</li>\n<li>you don't need parentheses for applying function, you should write <code>isDigit x</code> instead of <code>isDigit(x)</code></li>\n<li>As Willem already pointed out you can't use <code>let</code> without <code>in</code> outside a <code>do</code> block, Also you can't mutate variables</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "edited": false, "score": 0, "creation_date": 1573052012, "post_id": 58730627, "comment_id": 103755902, "body": "Thank you for your feedback it really do help me alot"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 3, "last_activity_date": 1573044715, "creation_date": 1573044715, "answer_id": 58730627, "question_id": 58728467, "link": "https://stackoverflow.com/questions/58728467/why-when-i-run-in-the-haskell-compiler-it-just-says-there-is-an-error-in-parse-i/58730627#58730627", "title": "why when I run in the haskell compiler it just says there is an error in parse input &quot;if&quot;", "body": "<p><code>if</code> itself is an expression; it produces a 0 or 1 that you then add to the return value of the recursive call. You don't need a variable.</p>\n\n<pre><code>counta :: [Char] -&gt; Int\ncounta [] = 0\ncounta (x:xs) = (if isDigit x then 1 else 0) + counta xs\n</code></pre>\n\n<p>You can shorten this by taking advantage of the <code>Enum</code> instance defined for <code>Bool</code>, which converts <code>True</code> to <code>1</code> and <code>False</code> to <code>0</code>.</p>\n\n<pre><code>counta (x:xs) = fromEnum (isDigit x) + counta xs\n</code></pre>\n\n<hr>\n\n<p>A proper way to use a <code>let</code> statement that defines <code>i</code> would be</p>\n\n<pre><code>counta (x:xs) = let i = if isDigit x then 1 else 0\n                in i + counta xs\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9511450, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mp0AWXgi_LQ/AAAAAAAAAAI/AAAAAAAAA90/RaWf1LjKfHs/photo.jpg?sz=128", "display_name": "TheCodeLearner", "link": "https://stackoverflow.com/users/9511450/thecodelearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58730627, "answer_count": 2, "score": -1, "last_activity_date": 1573044715, "creation_date": 1573037618, "question_id": 58728467, "link": "https://stackoverflow.com/questions/58728467/why-when-i-run-in-the-haskell-compiler-it-just-says-there-is-an-error-in-parse-i", "title": "why when I run in the haskell compiler it just says there is an error in parse input &quot;if&quot;", "body": "<p>The question says i need am required to count number of digits in a list of characters and will return the Int of number of digit in the list. I may use isDigit and i need to do it with recursion</p>\n\n<pre><code>counta :: [Char] -&gt; Int\ncounta [] = []\ncounta (x:xs) = let i = 0\n                if isDigit(x) then i = i + 1\n                counta xs\n                else counta xs\n</code></pre>\n\n<p>it shows parse error in input \"if\"</p>\n"}, {"tags": ["haskell", "binary-tree"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1573037231, "post_id": 58728301, "comment_id": 103747660, "body": "In this definition a <code>BT</code> is either a <code>Leaf</code> (not containing any values), or a <code>Branch</code> that contains two such <code>BT</code> subtrees, and an <code>a</code> and a <code>b</code> value."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1573037394, "post_id": 58728301, "comment_id": 103747762, "body": "This is a <a href=\"https://en.wikipedia.org/wiki/B-tree\" rel=\"nofollow noreferrer\"><i>B-tree</i></a>, a specific binary tree."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1573047586, "post_id": 58728301, "comment_id": 103753434, "body": "It&#39;s a slightly odd definition, though. I would think <code>data BT a = Leaf | Branch (BT a) a a (BT a)</code> would be more likely."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1573047644, "post_id": 58728301, "comment_id": 103753464, "body": "Also, a B-Tree usually (necessarily?) allows <code>n+1</code> children for a node with <code>n</code> values."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1573049098, "post_id": 58728301, "comment_id": 103754242, "body": "I suspect that <code>a</code> is the search key and <code>b</code> is the actual data. That would suggest functions like <code>insert :: Ord a =&gt; a -&gt; b -&gt; BT a b -&gt; BT a b</code> and <code>find :: Ord a =&gt; a -&gt; BT a b -&gt; Maybe b</code>."}], "answers": [{"tags": [], "owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "is_accepted": true, "score": 1, "last_activity_date": 1573058874, "creation_date": 1573058874, "answer_id": 58734937, "question_id": 58728301, "link": "https://stackoverflow.com/questions/58728301/binary-search-tree-implementation-in-haskell/58734937#58734937", "title": "Binary Search Tree Implementation in Haskell", "body": "<p>I think @chepner has nailed it.  This is intended to be a binary tree that contains both keys (of type <code>a</code>) and values (of type <code>b</code>).</p>\n\n<p>Think of it this way.  If you started with the definition:</p>\n\n<pre><code>data Tree a = EmptyTree | Node a (Tree a) (Tree a) deriving (Show) \n</code></pre>\n\n<p>and wanted to store a key/value pair at each node, you could make type <code>a</code> into a pair.  The following isn't a legal Haskell <code>data</code> type because you can't use <code>(k,v)</code> on the left-hand side, but it illustrates what the valid type <code>Tree (k,v)</code> would look like:</p>\n\n<pre><code>data Tree (k,v) = EmptyTree | Node (k,v) (Tree (k,v)) (Tree (k,v))\n</code></pre>\n\n<p>You could make this a valid Haskell type definition by making <code>k</code> and <code>v</code> proper arguments to the type constructor <code>Tree</code>, i.e., replacing <code>Tree (k,v)</code> with <code>Tree k v</code> everywhere:</p>\n\n<pre><code>data Tree k v = EmptyTree | Node (k,v) (Tree k v) (Tree k v)\n</code></pre>\n\n<p>Now, as a general rule, if you have a data type with a constructor that includes a pair:</p>\n\n<pre><code>data SomeType a b = Pair1 (a,b)\n</code></pre>\n\n<p>it's more or less equivalent to:</p>\n\n<pre><code>data SomeOtherType a b = Pair2 a b\n</code></pre>\n\n<p>After all, you can write <code>Pair1 (2,\"hello\")</code> or <code>Pair2 2 \"hello\"</code>, and they both store the same data.</p>\n\n<p>Given this, we can rewrite the definition of <code>Tree k v</code> as:</p>\n\n<pre><code>data Tree k v = EmptyTree | Node k v (Tree k v) (Tree k v)\n</code></pre>\n\n<p>Now, the four fields in the <code>Node</code> constructor don't <em>have</em> to be in that order; we could reorder them and still store exactly the same information, so let's move the \"left branch\" field to the front:</p>\n\n<pre><code>data Tree k v = EmptyTree | Node (Tree k v) k v (Tree k v)\n</code></pre>\n\n<p>Now this exactly matches the structure of your <code>BT</code> type:</p>\n\n<pre><code>data BT a b = Leaf | Branch (BT a b) a b (BT a b)\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7298643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2D13T.png?s=128&g=1", "display_name": "jengels", "link": "https://stackoverflow.com/users/7298643/jengels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 1, "accepted_answer_id": 58734937, "answer_count": 1, "score": 2, "last_activity_date": 1573058874, "creation_date": 1573037081, "question_id": 58728301, "link": "https://stackoverflow.com/questions/58728301/binary-search-tree-implementation-in-haskell", "title": "Binary Search Tree Implementation in Haskell", "body": "<p>I am working on an assignment in Haskell and had a question about the implementation of a binary search tree that I was given. The book I am using to learn Haskell uses the following implementation for a binary tree:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>data Tree a = EmptyTree | Node a (Tree a) (Tree a) deriving (Show) \n</code></pre>\n\n<p>This definition makes a lot of sense to me as it shows that a tree is either an empty tree or an element that contains a value and two trees. However, the implementation of a binary search tree that I was given in my assignment is as followed: </p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>data BT a b\n  = Leaf\n  | Branch (BT a b) a b (BT a b)\n  deriving (Eq, Show)\n</code></pre>\n\n<p>In this implementation does each branch represent a pair of nodes that either is made up of more branches or leaves? Also what advantages/disadvantages would this implementation have over the traditional one? Any help would be greatly appreciated!   </p>\n"}, {"tags": ["haskell", "max", "foldable"], "comments": [{"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 2, "creation_date": 1573037254, "post_id": 58728080, "comment_id": 103747671, "body": "For some additional context <a href=\"https://stackoverflow.com/questions/36460833/why-does-length-return-1-for-a-tuple-with-2-elements-and-gives-an-error-for-a-t\">Why does length return 1 for a tuple with 2 elements, and gives an error for a tuple with more elements?</a>"}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 2, "creation_date": 1573039901, "post_id": 58728080, "comment_id": 103749097, "body": "A key concern is that for <b>tuples</b>, the types of the 2 elements are allowed to differ, so that (8, True) and (True, 8) are perfectly legal Haskell expressions. So there is no general way to define a maximum function that is both general and intuitively satisfying. For <b>lists</b>, all elements have to be of the same type, so [True, 8] is illegal, while maximum [8,1]  and maximum [1,8] are both legal and evaluate to 8, as you would intuitively expect."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 4, "creation_date": 1573045022, "post_id": 58728080, "comment_id": 103751875, "body": "Tuples aren&#39;t sequences in the sense that lists are. They are single values with multi-values tags. <code>(8, 1)</code> can be thought of as <code>1</code> with a tag of <code>8</code>; <code>(1,2,3,4,5)</code> can be thought of as a <code>5</code> with a four distinguished tags <code>1</code>, <code>2</code>, <code>3</code>, and <code>4</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11496, "user_id": 5438433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OJ1qY.png?s=128&g=1", "display_name": "TheInnerLight", "link": "https://stackoverflow.com/users/5438433/theinnerlight"}, "edited": false, "score": 0, "creation_date": 1573037205, "post_id": 58728230, "comment_id": 103747641, "body": "Do you know why it&#39;s defined this way rather than taking both values into account?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 11496, "user_id": 5438433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OJ1qY.png?s=128&g=1", "display_name": "TheInnerLight", "link": "https://stackoverflow.com/users/5438433/theinnerlight"}, "edited": false, "score": 1, "creation_date": 1573037280, "post_id": 58728230, "comment_id": 103747687, "body": "@TheInnerLight: it can not take both values into account since the instance of a <code>Foldable</code> should be of kind <code>* -&gt; *</code>, so an <code>instance Foldable (,)</code> would &quot;crash&quot;, since that has as kind <code>* -&gt; * -&gt; *</code>."}, {"owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "reply_to_user": {"reputation": 11496, "user_id": 5438433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OJ1qY.png?s=128&g=1", "display_name": "TheInnerLight", "link": "https://stackoverflow.com/users/5438433/theinnerlight"}, "edited": false, "score": 1, "creation_date": 1573037400, "post_id": 58728230, "comment_id": 103747773, "body": "@TheInnerLight what would be the maximum of this <code>(&#39;qwerty&#39;, 12345)</code>? Define the maximum of any tuple is actually senseless. But you can always define your own <code>maxTuple</code> function for tuples of type <code>(Int, Int)</code>"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 11496, "user_id": 5438433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OJ1qY.png?s=128&g=1", "display_name": "TheInnerLight", "link": "https://stackoverflow.com/users/5438433/theinnerlight"}, "edited": false, "score": 3, "creation_date": 1573037490, "post_id": 58728230, "comment_id": 103747822, "body": "@TheInnerLight Because the types are different, in general. For instance <code>maximum (&quot;hello&quot;, 4)</code> can not consider both elements. Here the type is <code>(,) String Int</code>, which is seen by <code>Foldable</code> as a container-like type <code>(,) String</code> which happens to have <code>Int</code> as its element. I&#39;m not terribly convinced it was a good idea to allow <code>Foldable ((,) a)</code> in the libraries, but if we allow that, we have no type-safe option but to consider only the second component of the pairs."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1573037895, "post_id": 58728230, "comment_id": 103748062, "body": "@chi: me neither. TO be honest, I think a 2-tuple should probably not be a <code>Foldable</code>, since it creates a lot of confusion. Yes, we can see a 2-tuple as some sort of &quot;value with a context&quot; (that context is then the first item), but it will likely give a lot of confusion."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1573047310, "post_id": 58728230, "comment_id": 103753246, "body": "To play devil&#39;s advocate, I think the <code>Foldable</code> instance is good not because you would often want to fold a single-element container, but because it emphasizes the fact that a tuple is not just a minor variation on a list. The fact that <code>maximum (8,1)</code> doesn&#39;t return <code>8</code> should force you to stop and ask yourself why you have a tuple in the first place."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1573053756, "post_id": 58728230, "comment_id": 103757015, "body": "I&#39;m not sure where that metaphor is going. My point is, if you think passing a tuple to <code>maximum</code> is a good idea, rethink why you are using a tuple. Tuples are foldable, just not in the way lists are foldable, and that&#39;s neither good nor bad, just <i>different</i>."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1573055465, "post_id": 58728230, "comment_id": 103758027, "body": "@chepner If the goal is to discourage me from using <code>maximum (x,y)</code>, a type error would be the most effective means, IMO. Unrelated: I wonder how many packages on hackage rely on such a weird instance, after it being in <code>base</code> for 5? years."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1573056334, "post_id": 58728230, "comment_id": 103758518, "body": "My goal <i>isn&#39;t</i> to discourage you from using <code>maximum (x,y)</code>; it&#39;s to discourage you from using <code>(x, y)</code> in a context where you think comparing <code>x</code> and <code>y</code> to each other will be necessary."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 8, "last_activity_date": 1573036862, "creation_date": 1573036862, "answer_id": 58728230, "question_id": 58728080, "link": "https://stackoverflow.com/questions/58728080/why-in-haskell-maximum-8-1-1/58728230#58728230", "title": "Why in Haskell maximum (8,1) = 1?", "body": "<p><strong>Short answer</strong>: for a 2-tuple, the <code>Foldable</code> instance takes (only) the second item into account. The <code>maximum</code> function will thus always return the second item of the 2-tuple.</p>\n\n<p>Because a 2-tuple is an instance of <code>Foldable</code>. Indeed, it is <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/src/Data.Foldable.html#line-339\" rel=\"noreferrer\">defined as [src]</a>:</p>\n\n<blockquote>\n<pre><code>instance Foldable ((,) a) where\n    foldMap f (_, y) = f y\n\n    foldr f z (_, y) = f y z\n</code></pre>\n</blockquote>\n\n<p>The <code>maximum</code> is in essence a foldr pattern. It is implemented as an equivalent of:</p>\n\n<pre><code>maximum = foldr1 max\n</code></pre>\n\n<p>Where <code>foldr1</code> is implemented as:</p>\n\n<pre><code>foldr1 f = fromMaybe (error &quot;&hellip;&quot;) . foldr mf Nothing\n    where mf x m = Just (case m of\n                             Nothing -&gt; x\n                             Just y  -&gt; f x y)</code></pre>\n\n<p>So that means that for a 2-tuple, it will be implemented as:</p>\n\n<pre><code>maximum (_, y) = fromMaybe (error &quot;&hellip;&quot;) (mf y Nothing)\n    where mf x m = Just (case m of\n                             Nothing -&gt; x\n                             Just y  -&gt; max x y)</code></pre>\n\n<p>So here we call <code>mf</code> with <code>y</code> (as <code>x</code> parameter), and <code>Nothing</code> as <code>m</code>. The <code>case &hellip; of &hellip;</code> this matches with <code>Nothing</code> and returns <code>x</code>. So the maximum for a 2-tuple is defined as:</p>\n\n<pre><code>maximum (_, y) = fromMaybe (error &quot;&hellip;&quot;) (Just y)</code></pre>\n\n<p>and thus shorter:</p>\n\n<pre><code>-- maximum for a (a, b)\nmaximum (_, y) = <b>y</b></code></pre>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1573056615, "last_edit_date": 1573056615, "creation_date": 1573056165, "answer_id": 58734164, "question_id": 58728080, "link": "https://stackoverflow.com/questions/58728080/why-in-haskell-maximum-8-1-1/58734164#58734164", "title": "Why in Haskell maximum (8,1) = 1?", "body": "<p>Tuples in Haskell are not multi-valued containers like they are in, say, Python. Rather, they are closer to <em>single</em>-valued containers like <code>Maybe a</code> or <code>Either b a</code>: a value with a context. While both <code>Maybe</code> and <code>Either</code> carry the concept of possibly no value (<code>Either</code> simply providing more information than <code>Maybe</code> about the lack of a value), a tuple carries the context of information about the value itself.</p>\n\n<p>A value like <code>(8, 1</code>) does not <em>contain</em> two values <code>8</code> and <code>1</code>. Rather, <code>8</code> is <em>part of</em> a container that contains a <code>1</code>.</p>\n\n<p>As such, tuples are foldable, even if doing so seems trivial. Reducing a value of type <code>(a, b)</code> to a value of <code>b</code> simply has to return the value of type <code>b</code>, without worrying about what to do with the other values of type <code>b</code>, because there <em>aren't</em> any.</p>\n\n<pre><code>&gt;&gt;&gt; maximum (Just 5)\n5\n&gt;&gt;&gt; minimum (Just 5)\n5\n\n&gt;&gt;&gt; maximum (Right 5)\n5\n&gt;&gt;&gt; minimum (Right 5)\n5\n\n&gt;&gt;&gt; maximum (True, 5)\n5\n&gt;&gt;&gt; minimum (True, 5)\n5\n</code></pre>\n\n<p>Such functions are <em>total</em> with tuples, though, as compared to <code>Maybe</code> or <code>Either</code>:</p>\n\n<pre><code>&gt;&gt;&gt; maximum Nothing\n*** Exception: maximum: empty structure\n&gt;&gt;&gt; maximum (Left 5)\n*** Exception: maximum: empty structure\n</code></pre>\n\n<p>No matter how many types the tuple contains, all but the right-most one will fixed for any given instance of <code>Foldable</code>.</p>\n\n<pre><code>-- Actual instance for (a, b)\ninstance Foldable ((,) a) where\n    foldMap f (_, y) = f y\n    foldr f z (_, y) = f y z\n\n\n-- Instance for (a, b, c) if you wanted it\ninstance Foldable ((,,) a b) where\n    foldMap f (_, _, y) = f y\n    foldr f z (_, _, y) = f y z\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 12331325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be089ce2791893812da38498d5fb9eb?s=128&d=identicon&r=PG", "display_name": "Supriyo Halder", "link": "https://stackoverflow.com/users/12331325/supriyo-halder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "closed_date": 1573074337, "answer_count": 2, "score": 8, "last_activity_date": 1573056615, "creation_date": 1573036337, "last_edit_date": 1573056259, "question_id": 58728080, "link": "https://stackoverflow.com/questions/58728080/why-in-haskell-maximum-8-1-1", "closed_reason": "Duplicate", "title": "Why in Haskell maximum (8,1) = 1?", "body": "<p>I have just started learning Haskell. As I know <code>maximum</code> gives the max value for a list of integers. So, <code>maximum [2,5,7,1]</code> gives 7. But why by giving a tuple input does maximum always give the second element? E.g., <code>maximum (8,1)</code> gives 1. The same thing happens with <code>sum (8,1)</code>, <code>product (5,2)</code>, <code>minimum (4,5)</code>... all give the second element of the tuple. So, can anyone explain to a beginner why this happens?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1573035807, "post_id": 58727738, "comment_id": 103746888, "body": "The \u201csignature lacks accompanying binding\u201d isn&#39;t in the code you posted. Always make sure you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also, your attempt could use a bit more explanation of how you intended to solve the problem with it. Right now it barely does <i>anything</i> related to the task."}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1573041763, "post_id": 58727738, "comment_id": 103750113, "body": "You might want to start by looking at the <a href=\"https://hackage.haskell.org/package/MissingH-1.4.2.1/docs/Data-List-Utils.html#v:subIndex\" rel=\"nofollow noreferrer\">subIndex</a> library function."}], "answers": [{"tags": [], "owner": {"reputation": 488, "user_id": 3265362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXfiq.jpg?s=128&g=1", "display_name": "nader.h", "link": "https://stackoverflow.com/users/3265362/nader-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1573038057, "creation_date": 1573038057, "answer_id": 58728603, "question_id": 58727738, "link": "https://stackoverflow.com/questions/58727738/functions-that-takes-3-strings-where-the-first-is-part-of-the-3rd-and-changes/58728603#58728603", "title": "Functions that takes 3 Strings, where the first is part of the 3rd , and changes the 1st string in the 3rd with the second string", "body": "<p>We could use the <code>replace :: Text -&gt; Text -&gt; Text -&gt; Text</code> function of the <code>Data.Text</code>. </p>\n\n<p>First add this pragma <code>{-# LANGUAGE OverloadedStrings #-}</code>, you can read about it here <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#overloaded-string-literals\" rel=\"nofollow noreferrer\">https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#overloaded-string-literals</a></p>\n\n<p>Then the change function would be like this :</p>\n\n<pre><code>{-# LANGUAGE OverloadedStrings #-}\n\nimport Data.Text ( pack, unpack, replace)\n\nchange :: String -&gt; String -&gt; String -&gt; String\nchange xs ys = unpack . replace (pack xs) (pack ys) . pack\n\n</code></pre>\n\n<p>As you can see i'm using <code>pack</code> and <code>unpack</code> to switch <code>Text</code> and <code>String</code>\nPlease see <a href=\"https://hackage.haskell.org/package/text-1.2.4.0/docs/Data-Text.html\" rel=\"nofollow noreferrer\">https://hackage.haskell.org/package/text-1.2.4.0/docs/Data-Text.html</a> if you want to understand more <code>Data.Text</code></p>\n"}, {"tags": [], "owner": {"reputation": 210, "user_id": 12331325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be089ce2791893812da38498d5fb9eb?s=128&d=identicon&r=PG", "display_name": "Supriyo Halder", "link": "https://stackoverflow.com/users/12331325/supriyo-halder"}, "is_accepted": false, "score": 0, "last_activity_date": 1573042328, "last_edit_date": 1573042328, "creation_date": 1573039837, "answer_id": 58729172, "question_id": 58727738, "link": "https://stackoverflow.com/questions/58727738/functions-that-takes-3-strings-where-the-first-is-part-of-the-3rd-and-changes/58729172#58729172", "title": "Functions that takes 3 Strings, where the first is part of the 3rd , and changes the 1st string in the 3rd with the second string", "body": "<p>I am also new to Haskell.As I think, the code you have written has no error.But It does not gives the desired result as you want. Basically it gives a output string depending on the length of the shorter string.As for your example, the output is \"ye class\".</p>\n\n<p>This program work for desired result,</p>\n\n<pre><code>change :: String -&gt; String -&gt; String -&gt; String\nchange _  _    \"\"   =  \"\"\n\nchange l1 l2 (z:zs) = if l1 == take (length l1) (z:zs) then l2 ++ drop (length l1) (z:zs) else z:(change l1 l2 zs)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12325658"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1573042328, "creation_date": 1573035245, "last_edit_date": 1573036375, "question_id": 58727738, "link": "https://stackoverflow.com/questions/58727738/functions-that-takes-3-strings-where-the-first-is-part-of-the-3rd-and-changes", "title": "Functions that takes 3 Strings, where the first is part of the 3rd , and changes the 1st string in the 3rd with the second string", "body": "<p>I need to write a Haskell function, which takes 3 strings as input, where the 1st string is part of the 3rd string and substitutes the first string with the second one.</p>\n\n<p>I've tried using recursion for that, but it seems that I didn't set my base cases properly and also receive\" signature  lacks accompanying binding error\" ( I am completely new to Haskell)</p>\n\n<pre><code>change:: String -&gt; String -&gt; String -&gt; String\nchange [] [] [] = []\nchange [] ys zs = ys\nchange xs [] zs = zs\nchange xs ys [] = []\nchange (x:xs) (y:ys) (z:zs) =  change xs ys zs\n</code></pre>\n\n<p>code here</p>\n\n<p>The function output should be for example:\nchange \"Hello\" \"Goodbye\" \"Hello class\" \n\"Goodbye Class\"</p>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1572989482, "post_id": 58719726, "comment_id": 103732341, "body": "That&#39;s basically the definition of the Applicative instance for lists. It&#39;s not special to <code>(++)</code> or to lists of lists: <code>liftA2 f xs ys</code> is always equivalent to <code>[f x y | x &lt;- xs, y &lt;- ys]</code>."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572989555, "post_id": 58719726, "comment_id": 103732372, "body": "In fact, on checking the documentation, I&#39;m slightly surprised to find that <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/src/GHC.Base.html#line-972\" rel=\"nofollow noreferrer\">explicitly stated in the source code</a>. (I had expected only <code>&lt;*&gt;</code> to be explicitly defined in the instance, and to have to derive the correct formula for <code>liftA2</code> from it.)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572991683, "post_id": 58719726, "comment_id": 103733227, "body": "GHC implements the <code>[]</code> instance in terms of list comprehensions, making the required equivalence trivial."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1572998505, "post_id": 58719726, "comment_id": 103735122, "body": "Though tedious, you can derive the equivalence using section 3.11 of the <a href=\"https://www.haskell.org/definition/haskell2010.pdf\" rel=\"nofollow noreferrer\">Haskell Report</a> and the definition of the <code>Applicative</code> instance for <code>[]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1572994191, "post_id": 58720544, "comment_id": 103733972, "body": "I&#39;m not sure why you lean so much on Monads when <code>liftA2</code> (or <code>&lt;$&gt;</code> and <code>&lt;*&gt;</code> if you prefer, in terms of which <code>liftA2</code> can be defined, as you said) is available for any Applicative."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1572994294, "post_id": 58720544, "comment_id": 103734005, "body": "And I find it hard to understand what your (opinionated) last paragraph is really saying. What exactly &quot;should be avoided&quot;? Lists only form an applicative/monad because an instance is supplied, and that instance can be written in terms of a list comprehension. There are other ways of writing it down but they all come to the same thing."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572994963, "post_id": 58720544, "comment_id": 103734206, "body": "@Robin Zigmond It&#39;s OK to use <code>liftAn</code> functions of course only after one clearly understands what they simplify and their limitations. And yes... it&#39;s opiniated true.. but i don&#39;t like list comprehensions. I think there is no need to turn Haskell into JS where you have tons of different ways to do the very same thing, especially designed per type base. Wouldn&#39;t you agree..?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1572995676, "post_id": 58720544, "comment_id": 103734411, "body": "Are you getting Javascript confused with Python? JS has no list comprehensions or anything resembling them. And I don&#39;t see anything wrong with having different ways to achieve the same thing (that&#39;s one area where I disagree with the &quot;Zen of Python&quot;, which thankfully I don&#39;t think the language really achieves). Do you dislike <code>do</code> notation for the same reason? (In regards to your first point, I probably wouldn&#39;t ever use a <code>liftAn</code> for <code>n</code> greater than 2, certainly not more than 3, but I don&#39;t have a particularly strong opinion.)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 4, "creation_date": 1572996088, "post_id": 58720544, "comment_id": 103734509, "body": "<code>liftA2</code> is not an abstraction over monad; it&#39;s a <i>relaxation</i> of the monad abstraction. Monads make promises that applicatives do  not, allowing additional optimizations available to the compiler. Haskell itself doesn&#39;t even define how a list comprehension should be implemented; the Haskell report only provides some equivalences (none of which involve monads or applicatives) that a list comprehension must obey."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1572996270, "post_id": 58720544, "comment_id": 103734547, "body": "And Python <i>borrowed</i> list comprehensions from Haskell, despite the fact that they didn&#39;t provide anything you couldn&#39;t already write in Python, in apparent violation of the Zen of Python. That should tell you something about the general perception of the expressiveness of list comprehensions."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572996386, "post_id": 58720544, "comment_id": 103734574, "body": "@Robin Zigmond I had actually meant JS, not because of the list comprehensions but the mess it ended up with by the introduction of tons of BS just to make it feel <i>more</i> functional but also <i>more</i> comfy at the same time for some coders with old/other habbits. Yes i know list comprehensions is something original to Haskell.. however somehing ugly. And yes.. you have got me... about the do notation. I don&#39;t like it too. I think it is harmful. (may be i should keep this to myself)"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572997757, "post_id": 58720544, "comment_id": 103734920, "body": "I definitely think <code>do</code> notation <i>can</i> be &quot;harmful&quot;, and is definitely overused (every time I see something like <code>main = do putStrLn &quot;hello world&quot;</code> in some beginners&#39; text, as I often do, I die a little inside), but I think there&#39;s no denying that for a lot of monadic code it makes a vast improvement in readability. [And regarding JS, I&#39;ll commit blasphemy and admit I actually like it, despite its obvious warts - it&#39;s more consistent than most developers realise, and it&#39;s been &quot;functional&quot; (not in the Haskell sense o/c) since the very beginning. Scheme was one of its direct ancestors.]"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572998466, "post_id": 58720544, "comment_id": 103735110, "body": "@chepner The <i>relaxation</i> part is a nice point. I will think about it. Thanks."}], "tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 1, "last_activity_date": 1572993586, "creation_date": 1572993586, "answer_id": 58720544, "question_id": 58719726, "link": "https://stackoverflow.com/questions/58719726/why-are-this-two-equivalents/58720544#58720544", "title": "Why are this two equivalents?", "body": "<p>This is exactly the reason why i don't like using <code>liftA&lt;2..n&gt;</code> type of functions. They are an abstraction over the monad abstraction. It's just so because applicative is introduced after monads just to simplify to context of monads those contain functional values (functions).</p>\n\n<p>Basically <code>liftA2 (++) xs ys</code> is <code>(++) &lt;$&gt; xs &lt;*&gt; ys</code> which makes more sense since it involves functor operator <code>fmap</code> in it's inline form <code>&lt;$&gt;</code>. Once you undertand the mechanics of the latter <code>liftA2</code> starts to make sense.</p>\n\n<p><code>fmap</code> just applies the <code>(++)</code> function to the elements of the <code>xs</code> list (assume that <code>xs</code> is <code>[[1,2],[3,4]]</code>) and turns it into an applicative list (a list that contains functions) such as;</p>\n\n<pre><code>[([1,2] ++), ([3,4] ++)] :: Num a =&gt; [[a] -&gt; [a]]\n</code></pre>\n\n<p>and the applicative operator <code>&lt;*&gt;</code> is now eligible to apply these functions in our list to another list which contains some other lists such as say, <code>[[1,2],[3,4]]</code>.</p>\n\n<p>At this very moment <strong>we have to know</strong> how exactly lists are handled <em>monadically</em>. Lists are undeterministic data types. So every single element of the first list has to be applied to the every single element of the second list. So</p>\n\n<pre><code>[([1,2] ++), ([3,4] ++)] &lt;*&gt; [[1,2],[3,4]]\n</code></pre>\n\n<p>turns out to be</p>\n\n<pre><code>[[1,2,1,2],[1,2,3,4],[3,4,1,2],[3,4,3,4]]\n</code></pre>\n\n<p>All in all <code>liftA2 (++)</code> just lifts the simple <code>(++)</code> function to the list monad. Simply saying, concatenate inner lists with each other monadically.</p>\n\n<p>Having said that the list comprehensions version of this is a joke in Haskell. It is redundant and should be avoided in my honest opinion. It just takes a whole monad abstraction down to list level only whereas monadical approaches hold for all data types according to their appropriate monad instances.</p>\n"}, {"comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1573051419, "post_id": 58724674, "comment_id": 103755540, "body": "How about <code>[ f | f &lt;- fmap (++) xs ] = fmap id (fmap (++) xs) = fmap (++) xs = [ (++) x | x &lt;- xs ]</code>?"}], "tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": true, "score": 3, "last_activity_date": 1573024054, "last_edit_date": 1573024054, "creation_date": 1573023634, "answer_id": 58724674, "question_id": 58719726, "link": "https://stackoverflow.com/questions/58719726/why-are-this-two-equivalents/58724674#58724674", "title": "Why are this two equivalents?", "body": "<p>The reason is <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/src/GHC.Base.html#line-972\" rel=\"nofollow noreferrer\">right here</a> in the source code.</p>\n\n<pre><code>instance Applicative [] where\n    pure x    = [x]\n    fs &lt;*&gt; xs = [f x | f &lt;- fs, x &lt;- xs]\n    liftA2 f xs ys = [f x y | x &lt;- xs, y &lt;- ys]\n</code></pre>\n\n<p>The <code>liftA2</code> definition is an optimization, and we could also do it manually with the default definition of <code>liftA2</code>:</p>\n\n<pre><code>liftA2 f x y = f &lt;$&gt; x &lt;*&gt; y\n</code></pre>\n\n<p>So</p>\n\n<pre><code>liftA2 (++) xs ys\n   = (++) &lt;$&gt; xs &lt;*&gt; ys\n   = fmap (++) xs &lt;*&gt; ys                  -- definition of &lt;$&gt; \n   = [ f y | f &lt;- fmap (++) xs, y &lt;- ys ] -- definition of &lt;*&gt; above\n   = [ (++) x y | x &lt;- xs, y &lt;- ys ]      -- some law about fmap/bind\n   = [ x ++ y | x &lt;- xs, y &lt;- ys ]\n</code></pre>\n\n<p>There you have it.</p>\n\n<hr>\n\n<p>\"Some law about fmap/bind\" is this one:</p>\n\n<pre><code>fmap f x &gt;&gt;= t = x &gt;&gt;= t . f\n</code></pre>\n\n<p>which applies if you understand how list comprehensions are desugared.  The proof is:</p>\n\n<pre>\nfmap f x >>= t\n    = x >>= pure . f >>= t             -- <a href=\"https://stackoverflow.com/questions/53022087/do-the-monadic-liftm-and-the-functorial-fmap-have-to-be-equivalent\">fmap = liftM coherence</a>\n    = x >>= (\\y -> pure (f y) >>= t)   -- definition of (.)\n    = x >>= (\\y -> t (f y))            -- left unit monad law\n    = x >>= t . f                      -- definition of (.)\n</pre>\n"}], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 58724674, "answer_count": 2, "score": 1, "last_activity_date": 1573024054, "creation_date": 1572989316, "question_id": 58719726, "link": "https://stackoverflow.com/questions/58719726/why-are-this-two-equivalents", "title": "Why are this two equivalents?", "body": "<p>I don't quite understand why given two list of lists <code>xss :: [[a]]</code> and <code>yss :: [[a]]</code></p>\n\n<pre><code>liftA2 (++) xss yss\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>[xs ++ ys | xs &lt;- xss, ys &lt;- yss]\n</code></pre>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 4, "last_activity_date": 1572989152, "creation_date": 1572989152, "answer_id": 58719700, "question_id": 58719668, "link": "https://stackoverflow.com/questions/58719668/writing-a-function-in-haskell-using-recursion-to-determine-how-many-digits-there/58719700#58719700", "title": "Writing a function in haskell using recursion to determine how many digits there are in a list of characters", "body": "<p>Like any recursive function over a list, start by handling the head and recursing on the tail.</p>\n\n<pre><code>counta :: [Char] -&gt; Int\ncounta [] = _\ncounta (x:xs) = let this = _  -- something involving x\n                    that = counta xs\n                in _ -- something involving this and that\n</code></pre>\n\n<p>If you try to compile this, the compiler will tell exactly what type each <code>_</code> should be, which should help you replace them with the correct expressions.</p>\n"}, {"comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1573025332, "post_id": 58721652, "comment_id": 103741700, "body": "Hi @crjake, welcome to stackoverflow! Thanks for answering. It&#39;s the tradition of the haskell tag here not to &quot;do people&#39;s homework for them&quot;. You have the right idea with the request &quot;try to understand it&quot;; but we usually take it one step further by giving a hint, some guidance, explaining what&#39;s wrong, or showing a solution to a closely related problem and invite the OP to make the analogy. If you must give a complete solution (occasionally it is called for), try to offer some words of insight along with it: by what principle did you find it; what pattern does it follow; etc. Thanks again!"}], "tags": [], "owner": {"reputation": 11, "user_id": 12329302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nPMcPzF7n6U/AAAAAAAAAAI/AAAAAAAABZY/O2B0yyTozow/photo.jpg?sz=128", "display_name": "crjake", "link": "https://stackoverflow.com/users/12329302/crjake"}, "is_accepted": false, "score": 0, "last_activity_date": 1573004099, "last_edit_date": 1573004099, "creation_date": 1573002257, "answer_id": 58721652, "question_id": 58719668, "link": "https://stackoverflow.com/questions/58719668/writing-a-function-in-haskell-using-recursion-to-determine-how-many-digits-there/58721652#58721652", "title": "Writing a function in haskell using recursion to determine how many digits there are in a list of characters", "body": "<p>Here's a simple way - try to understand it before just using it.</p>\n\n<pre><code>counta :: [Char] -&gt; Int\ncounta [] = 0\ncounta (c:cs)\n | isDigit c = 1 + counta cs\n | otherwise = counta cs\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 12325447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406948378ae5a4cbee9767d646911587?s=128&d=identicon&r=PG&f=1", "display_name": "mgt", "link": "https://stackoverflow.com/users/12325447/mgt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573716385, "creation_date": 1572988967, "last_edit_date": 1573716385, "question_id": 58719668, "link": "https://stackoverflow.com/questions/58719668/writing-a-function-in-haskell-using-recursion-to-determine-how-many-digits-there", "title": "Writing a function in haskell using recursion to determine how many digits there are in a list of characters", "body": "<p>I need to count how many digits there are in a list of characters using recursion so for this list <code>['a','b','c','1','2','3']</code>  the answer should be <code>3</code></p>\n\n<p>I have managed to do it using this code but I am struggling to do it using recursion</p>\n\n<pre><code>counta :: [Char] -&gt; Int \ncounta = length . filter isDigit\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>Main&gt; counta ['a','b','c','1','2','3']\n</code></pre>\n\n<p>Answer should be: <code>3</code></p>\n"}, {"tags": ["list", "haskell"], "answers": [{"comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 4, "creation_date": 1572985644, "post_id": 58718687, "comment_id": 103730851, "body": "imo it&#39;s cleaner to define it as <code>doit = liftA2 (++)</code> - not only is that easier to read and understand (imo, anyway), it makes it clearer that you don&#39;t need the <code>Monad</code> interface, just the <code>Applicative</code> one."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572986094, "post_id": 58718687, "comment_id": 103731040, "body": "@Robin Zigmond Yes sure."}], "tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 1, "last_activity_date": 1572984485, "creation_date": 1572984485, "answer_id": 58718687, "question_id": 58718516, "link": "https://stackoverflow.com/questions/58718516/how-to-combine-list-of-lists-with-list-of-lists/58718687#58718687", "title": "How to combine list of lists with list of lists", "body": "<p>You may do like</p>\n\n<pre><code>Prelude&gt; let doit = \\as bs -&gt; as &gt;&gt;= \\a -&gt; bs &gt;&gt;= \\b -&gt; pure (a ++ b)\nPrelude&gt; doit [[1,2],[3,4],[5,6],[7,8]] [[1,2],[3,4],[5,6],[7,8]]\n[[1,2,1,2],[1,2,3,4],[1,2,5,6],[1,2,7,8],[3,4,1,2],[3,4,3,4],[3,4,5,6],[3,4,7,8],[5,6,1,2],[5,6,3,4],[5,6,5,6],[5,6,7,8],[7,8,1,2],[7,8,3,4],[7,8,5,6],[7,8,7,8]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 4, "last_activity_date": 1572986955, "creation_date": 1572986955, "answer_id": 58719268, "question_id": 58718516, "link": "https://stackoverflow.com/questions/58718516/how-to-combine-list-of-lists-with-list-of-lists/58719268#58719268", "title": "How to combine list of lists with list of lists", "body": "<p>You can use a list comprehension:</p>\n\n<pre><code>[ xs ++ ys | xs &lt;- listOfLists1, ys &lt;- listOfLists2 ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1573016394, "creation_date": 1573016394, "answer_id": 58723368, "question_id": 58718516, "link": "https://stackoverflow.com/questions/58718516/how-to-combine-list-of-lists-with-list-of-lists/58723368#58723368", "title": "How to combine list of lists with list of lists", "body": "<p>As Robin says in a comment, you can also do it like:</p>\n\n<pre><code>liftA2 (++)\n</code></pre>\n\n<p>I ask my self <a href=\"https://stackoverflow.com/questions/58719726/why-are-this-two-equivalents\">a question</a> trying to understand why that is equivalent to:</p>\n\n<pre><code>[xs ++ ys | xs &lt;- xss, ys &lt;- yss]\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10889999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32f712776594692c571d3b48d493da9?s=128&d=identicon&r=PG&f=1", "display_name": "mehukatti", "link": "https://stackoverflow.com/users/10889999/mehukatti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1573016394, "creation_date": 1572983573, "question_id": 58718516, "link": "https://stackoverflow.com/questions/58718516/how-to-combine-list-of-lists-with-list-of-lists", "title": "How to combine list of lists with list of lists", "body": "<p>I have lists of lists and need to combine it with another list of lists.\nExample inputs:\n A: [[1,2],[3,4],[5,6],[7,8]]\n B: [[1,2],[3,4],[5,6],[7,8]]</p>\n\n<p>Example output:\n [[1,2,1,2],[1,2,3,4],..,[7,8,5,6],[7,8,7,8]]</p>\n\n<p>2 lists of lists with 4 lists inside both would return us a list of lists size 4*4 = 16</p>\n\n<p>I've tried just recursively combine the lists, but i know it wouldn't work even if would go through. </p>\n\n<pre><code>  mergeAll [[]] [[]] = [[]]\n  mergeAll [[]] b = b\n  mergeAll a [[]] = a\n  mergeAll xs ys = mergeAll (merge xs ys) (drop 1 ys) \n\n  merge :: [[a]] -&gt; [[a]] -&gt; [[a]]\n  merge [[]] [[]] = [[]]\n  merge xs [[]] = xs\n  merge [[]] ys = ys\n  merge (x:xs) (y:ys)  = ((x++y):xs)\n\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "edited": false, "score": 0, "creation_date": 1572982086, "post_id": 58718110, "comment_id": 103729347, "body": "note: my workaround for now is to just implement <code>runClientSafe&#39; :: MonadUnliftIO m =&gt; FdsEnv -&gt; (ClientState -&gt; m a) -&gt; m a</code>, passing in the FdsEnv argument manually and using <code>initCass&#39;</code> instead of <code>initCass</code> in the implementaiton"}, {"owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "edited": false, "score": 1, "creation_date": 1572989283, "post_id": 58718110, "comment_id": 103732258, "body": "Can you explain why specializing the type signature to <code>runClientSafe :: (ClientState -&gt; RIO FdsEnv a) -&gt; RIO FdsEnv a</code> with the same implementation won&#39;t work?"}, {"owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "reply_to_user": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "edited": false, "score": 0, "creation_date": 1573064274, "post_id": 58718110, "comment_id": 103762667, "body": "@K.A.Buhr At some point, I tried it, and in the current context it was at least slightly problematic (I think) to pass in a desired function generating a <code>RIO FdsEnv a</code>, though I could probably have done so with a bit of extra work on the caller&#39;s side"}], "answers": [{"tags": [], "owner": {"reputation": 8621, "user_id": 1848029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjAy.jpg?s=128&g=1", "display_name": "lehins", "link": "https://stackoverflow.com/users/1848029/lehins"}, "is_accepted": false, "score": 0, "last_activity_date": 1573049220, "last_edit_date": 1573049220, "creation_date": 1573048787, "answer_id": 58731858, "question_id": 58718110, "link": "https://stackoverflow.com/questions/58718110/how-to-write-a-bracket-function-executing-an-arbitrary-monadunliftio-within-a-ri/58731858#58731858", "title": "How to write a bracket function executing an arbitrary MonadUnliftIO within a RIO environment?", "body": "<p>As @K. A. Buhr suggested, normally you'd stay in the same monad for bracket, in this case RIO:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>runClientSafe :: (ClientState -&gt; RIO FdsEnv a) -&gt; RIO FdsEnv a\nrunClientSafe cliFun = bracket initCass shutdown cliFun\n</code></pre>\n\n<p>That being said, in another situation where you want the function to be polymorphic, but still unify with <code>RIO</code>, like you said in the question:</p>\n\n<blockquote>\n  <p>I guess what is really needed is a way to from <code>MonadUnliftIO m -&gt; RIO e</code></p>\n</blockquote>\n\n<p>you could use <code>RankNTypes</code> to solve this problem:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>runClientSafe :: (forall m. MonadUnliftIO m =&gt; ClientState -&gt; m a) -&gt; RIO FdsEnv a\nrunClientSafe cliFun = bracket initCass shutdown cliFun\n</code></pre>\n"}], "owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573049220, "creation_date": 1572981874, "question_id": 58718110, "link": "https://stackoverflow.com/questions/58718110/how-to-write-a-bracket-function-executing-an-arbitrary-monadunliftio-within-a-ri", "title": "How to write a bracket function executing an arbitrary MonadUnliftIO within a RIO environment?", "body": "<p>In the following case, I can directly use <code>initCass' fdsEnv</code> (of type <code>MonadUnliftIO m</code>) within a <code>RIO</code> <code>do</code> block:</p>\n\n<pre><code>initCass :: RIO FdsEnv ClientState\ninitCass = do\n  fdsEnv &lt;- ask\n  initCass' fdsEnv\n\ninitCass' :: MonadUnliftIO m =&gt; FdsEnv -&gt; m ClientState\ninitCass' fdsEnv = do\n  let config = fdsConfig fdsEnv\n  let logger = fdsLogger fdsEnv\n  initCassandra (dbName config) (dbHost config) (dbPort config) logger\n</code></pre>\n\n<p>However, when I try to do something similar here:</p>\n\n<pre><code>runClientSafe :: MonadUnliftIO m =&gt; (ClientState -&gt; m a) -&gt; RIO FdsEnv a\nrunClientSafe cliFun = do\n  fdsEnv &lt;- ask\n  bracket (runRIO fdsEnv initCass) shutdown cliFun\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>    \u2022 Couldn't match type \u2018m\u2019 with \u2018RIO FdsEnv\u2019\n      \u2018m\u2019 is a rigid type variable bound by\n        the type signature for:\n          runClientSafe :: forall (m :: * -&gt; *) a.\n                           MonadUnliftIO m =&gt;\n                           (ClientState -&gt; m a) -&gt; RIO FdsEnv a\n        at src/FDS/Database/Cassandra.hs:75:1-72\n      Expected type: RIO FdsEnv a\n        Actual type: m a\n    \u2022 In a stmt of a 'do' block:\n        bracket (runRIO fdsEnv initCass) shutdown cliFun\n      In the expression:\n        do fdsEnv &lt;- ask\n           bracket (runRIO fdsEnv initCass) shutdown cliFun\n      In an equation for \u2018runClientSafe\u2019:\n          runClientSafe cliFun\n            = do fdsEnv &lt;- ask\n                 bracket (runRIO fdsEnv initCass) shutdown cliFun\n    \u2022 Relevant bindings include\n        cliFun :: ClientState -&gt; m a\n          (bound at src/FDS/Database/Cassandra.hs:76:15)\n        runClientSafe :: (ClientState -&gt; m a) -&gt; RIO FdsEnv a\n          (bound at src/FDS/Database/Cassandra.hs:76:1)\n   |\n78 |   bracket (runRIO fdsEnv initCass) shutdown cliFun\n   |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>I think the discrepancy is that in the first case <code>initCass'</code>'s m resolves to be <code>RIO FdsEnv</code>, so that makes sense. I guess what is really needed is a way to from <code>MonadUnliftIO m -&gt; RIO e</code>, but not sure that is possible.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 1, "creation_date": 1572973748, "post_id": 58716167, "comment_id": 103725705, "body": "Can you describe the rule for how you come up with <code>[(1,0),(2,0),(3,1),(4,1)]</code> from <code>[[1,2],[3,4]]</code> in words?"}, {"owner": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "reply_to_user": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1572974109, "post_id": 58716167, "comment_id": 103725861, "body": "Its just appending the array index of the outer array onto the inner array, as a tuple. So, with the array a[] containing two arrrays, each one gets its index appended to it."}, {"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1572974970, "post_id": 58716167, "comment_id": 103726254, "body": "Keep the problem and your attempts to tackle it in the above space. It will be harder for posterity to follow if you leave it in the comment area."}, {"owner": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "edited": false, "score": 0, "creation_date": 1572975201, "post_id": 58716167, "comment_id": 103726373, "body": "I was answering a question someone asked."}, {"owner": {"reputation": 8621, "user_id": 1848029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjAy.jpg?s=128&g=1", "display_name": "lehins", "link": "https://stackoverflow.com/users/1848029/lehins"}, "edited": false, "score": 0, "creation_date": 1573049787, "post_id": 58716167, "comment_id": 103754573, "body": "Why don&#39;t you use an array library that has this functionality built in?"}], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "edited": false, "score": 0, "creation_date": 1572975339, "post_id": 58716636, "comment_id": 103726444, "body": "There is a lot of very odd syntax there. Can you explain what is actually taking place and how you came to this answer?"}, {"owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "reply_to_user": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "edited": false, "score": 0, "creation_date": 1572975763, "post_id": 58716636, "comment_id": 103726629, "body": "Basically the auxiliary function just &quot;zips&quot; the indexes onto each of the tuples"}, {"owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "reply_to_user": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "edited": false, "score": 0, "creation_date": 1572975827, "post_id": 58716636, "comment_id": 103726653, "body": "You can see what happens by trying out the function that zipWith uses against a two element list."}, {"owner": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "edited": false, "score": 0, "creation_date": 1572976314, "post_id": 58716636, "comment_id": 103726851, "body": "I suppose I&#39;ll look at that. And why does this fail on on single element lists? eg [[1]] fails with <code>*Main&gt; addYIndex [[1]] [(1,0),(*** Exception: Prelude.!!: index too large</code> instead of producing (1,0)"}, {"owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "reply_to_user": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "edited": false, "score": 0, "creation_date": 1572976567, "post_id": 58716636, "comment_id": 103726958, "body": "it&#39;s currently implemented for 2-element lists. I&#39;ll edit this  by doing the inner op with a map"}], "tags": [], "owner": {"reputation": 1782, "user_id": 10548514, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hky6xOH08T4/AAAAAAAAAAI/AAAAAAAABSM/Tw8IuIniovs/photo.jpg?sz=128", "display_name": "Juan Carlos Ramirez", "link": "https://stackoverflow.com/users/10548514/juan-carlos-ramirez"}, "is_accepted": false, "score": 3, "last_activity_date": 1572977957, "last_edit_date": 1572977957, "creation_date": 1572975293, "answer_id": 58716636, "question_id": 58716167, "link": "https://stackoverflow.com/questions/58716167/appending-index-to-a-list-of-lists-in-haskell/58716636#58716636", "title": "Appending index to a list of lists, in Haskell", "body": "<p>This function appends the coordinate value to the end of the tuple for every element in the list</p>\n\n<pre><code>let zipperfun coord pairlist =  map (\\item-&gt;(item, coord)) pairlist\n\n</code></pre>\n\n<p>We use the previous function to create faux, a function that outputs a list of lists of tuples, (one per original list), Where each index is zipped to its corresponding tuples by applying zipperfun.</p>\n\n<pre><code>let faux lst = zipWith zipperfun [0..] lst\n\n</code></pre>\n\n<p>would produce</p>\n\n<p>[[(1,0),(2,0)],[(3,1),(4,1)]]\nThen we just concatenate the all the lists. This gives us a list of the desired tuples. We put this together in flattenerfun.</p>\n\n<p>To create the following flattenerfun:</p>\n\n<pre><code>\nlet flattenerfun lst = concat (faux lst)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 3, "creation_date": 1572976020, "post_id": 58716673, "comment_id": 103726726, "body": "or <code>join . zipWith (map . flip (,)) [0..]</code>. (you can edit it in.) :)"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1572977413, "post_id": 58716673, "comment_id": 103727355, "body": "@Will Ness No need..! It deserves a <i>glorious first comment</i> badge had there been one."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 2, "creation_date": 1572989969, "post_id": 58716673, "comment_id": 103732536, "body": "it&#39;s <i>your</i> code, I just massaged it a little bit. :)"}], "tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": true, "score": 2, "last_activity_date": 1572975812, "last_edit_date": 1572975812, "creation_date": 1572975447, "answer_id": 58716673, "question_id": 58716167, "link": "https://stackoverflow.com/questions/58716167/appending-index-to-a-list-of-lists-in-haskell/58716673#58716673", "title": "Appending index to a list of lists, in Haskell", "body": "<p>The <code>zipWith</code> function is a good starting point. Accordingly you may do like</p>\n\n<pre><code>Prelude&gt; zipWith (\\as i -&gt; as &gt;&gt;= pure . flip (,) i) [[1,2],[3,4]] [0..] &gt;&gt;= id\n[(1,0),(2,0),(3,1),(4,1)]\n</code></pre>\n\n<p>The final <code>&gt;&gt;= id</code> stage just concatenates the inner lists.</p>\n"}], "owner": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 58716673, "answer_count": 2, "score": 0, "last_activity_date": 1573049696, "creation_date": 1572973445, "last_edit_date": 1573049696, "question_id": 58716167, "link": "https://stackoverflow.com/questions/58716167/appending-index-to-a-list-of-lists-in-haskell", "title": "Appending index to a list of lists, in Haskell", "body": "<p>I'm trying to find a way to convert a <code>[[Int]]</code> to <code>[(Int, Int)]</code> pairs in haskell.</p>\n\n<p>Eg, <code>[[1,2],[3,4]]</code> should become <code>[(1,0),(2,0),(3,1),(4,1)]</code></p>\n\n<p>I've been messing with zip and list comprehension to try to accomplish this, but I've yet to find even the slightest success. What is the correct way to do this?</p>\n"}, {"tags": ["haskell", "haskell-turtle"], "answers": [{"tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": true, "score": 2, "last_activity_date": 1572975765, "last_edit_date": 1572975765, "creation_date": 1572975423, "answer_id": 58716671, "question_id": 58715748, "link": "https://stackoverflow.com/questions/58715748/is-there-a-turtle-function-or-other-haskell-abstraction-for-joining-commands-usi/58716671#58716671", "title": "Is there a turtle function or other Haskell abstraction for joining commands using .&amp;&amp;", "body": "<p>Would this work?</p>\n\n<pre><code>runCmds argss = foldr (.&amp;&amp;.) (pure ExitSuccess) (fmap someCmdWith argss)\n</code></pre>\n\n<p>If you want to write it even shorter, I believe this would also work:</p>\n\n<pre><code>runCmds = foldr (.&amp;&amp;.) (pure ExitSuccess) . fmap someCmdWith\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "is_accepted": false, "score": 2, "last_activity_date": 1572982236, "last_edit_date": 1572982236, "creation_date": 1572979739, "answer_id": 58717682, "question_id": 58715748, "link": "https://stackoverflow.com/questions/58715748/is-there-a-turtle-function-or-other-haskell-abstraction-for-joining-commands-usi/58717682#58717682", "title": "Is there a turtle function or other Haskell abstraction for joining commands using .&amp;&amp;", "body": "<p><code>(.&amp;&amp;.)</code> looks associative and there seems to be a neutral element (<code>pure ExitSuccess</code>) so let's define a <code>Monoid</code>:</p>\n\n<pre><code>newtype UntilFailure = UntilFailure { runUntilFailure :: IO ExitCode }\n\ninstance Monoid UntilFailure where\n     mappend (UntilFailure a1) (UntilFailure a2) =  UntilfFailure (a1 .&amp;&amp;. a2)\n     mempty = UntilFailure (pure ExitSuccess)\n</code></pre>\n\n<p>Then we can write stuff like:</p>\n\n<pre><code>runUntilFailure . foldMap UntilFailure $ someCmdWith &lt;$&gt; argss\n</code></pre>\n\n<p>The nice thing about defining a <code>Monoid</code> is that we don't have to remember which is the neutral element every time we fold a list of items, as it comes \"baked in the type\", so to speak.</p>\n\n<p>I don't think one can define a monoid out of <a href=\"https://www.stackage.org/haddock/lts-14.13/turtle-1.5.15/Turtle-Prelude.html#v:.-38--38-.\" rel=\"nofollow noreferrer\"><code>(.||.)</code></a> however, because the neutral element would have to somehow preserve the exit code of the previous command. One could still define a <code>Semigroup</code>, though.</p>\n"}], "owner": {"reputation": 4593, "user_id": 2289983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LG4hj.jpg?s=128&g=1", "display_name": "Damian Nadales", "link": "https://stackoverflow.com/users/2289983/damian-nadales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 58716671, "answer_count": 2, "score": 1, "last_activity_date": 1573716145, "creation_date": 1572971895, "last_edit_date": 1573716145, "question_id": 58715748, "link": "https://stackoverflow.com/questions/58715748/is-there-a-turtle-function-or-other-haskell-abstraction-for-joining-commands-usi", "title": "Is there a turtle function or other Haskell abstraction for joining commands using .&amp;&amp;", "body": "<p>I have the following piece of code:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>foldM (\\exitCode args -&gt; pure exitCode .&amp;&amp;. someCmdWith args) ExitSuccess argss\n</code></pre>\n\n<p>Which uses <a href=\"https://www.stackage.org/haddock/lts-14.13/turtle-1.5.15/\" rel=\"nofollow noreferrer\"><code>turtle</code></a>'s  <a href=\"https://www.stackage.org/haddock/lts-14.13/turtle-1.5.15/Turtle-Prelude.html#v:.-38--38-.\" rel=\"nofollow noreferrer\"><code>(.&amp;&amp;.)</code></a> operator.</p>\n\n<p>Is there a better abstraction I could use to apply <code>.&amp;&amp;.</code> to the results of applying <code>someCmdWith</code> to <code>argss</code>?</p>\n"}, {"tags": ["haskell", "io", "pattern-matching"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 6, "creation_date": 1572965425, "post_id": 58713862, "comment_id": 103720911, "body": "Compile with <code>-Wall</code>, it will list the patterns you did not cover."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 4, "creation_date": 1572965702, "post_id": 58713862, "comment_id": 103721046, "body": "Spoiler alert: what will <code>questionaire []</code> do?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572966450, "post_id": 58713862, "comment_id": 103721489, "body": "You can use <code>mapM</code> here."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1572987341, "post_id": 58713862, "comment_id": 103731543, "body": "@WillemVanOnsem Not quite, if you want to preserve the <code>&quot;&quot; -&gt; return []</code> behavior."}], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "edited": false, "score": 0, "creation_date": 1572968513, "post_id": 58714080, "comment_id": 103722751, "body": "Still so much to learn.... Nice and elegant solution. Answered."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1572987311, "post_id": 58714080, "comment_id": 103731527, "body": "...but this does not have the early-exit-on-<code>&quot;&quot;</code> behavior of the original."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1572987437, "post_id": 58714080, "comment_id": 103731580, "body": "@DanielWagner Oops, you&#39;re right, I forgot about that."}, {"owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "edited": false, "score": 0, "creation_date": 1573020124, "post_id": 58714080, "comment_id": 103739744, "body": "@chepner, practically I can catch the &quot;&quot; later before writing to sql, so will stick to answered."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 2, "last_activity_date": 1572987871, "last_edit_date": 1572987871, "creation_date": 1572966155, "answer_id": 58714080, "question_id": 58713862, "link": "https://stackoverflow.com/questions/58713862/haskell-how-to-terminate-recursive-call-and-avoid-non-exhaustive-patterns/58714080#58714080", "title": "Haskell how to terminate recursive call and avoid non-exhaustive patterns", "body": "<p>You don't actually need explicit recursion here, making it impossible to forget to define <code>questionaire</code> when its argument is an empty list.</p>\n\n<pre><code>questionaire :: [String] -&gt; IO [String]\nquestionaire  = traverse getWithPrompt\n  where getWithPrompt x = do\n            putStr x\n            (***)\n            getLine\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>&gt; users &lt;- questionaire [\"name? \", \"name? \", \"name? \"]\nname? alice\nname? bob\nname? charlie\n&gt; users\n[\"alice\",\"bob\",\"charlie\"]\n</code></pre>\n\n<hr>\n\n<p><code>getWithPrompt</code> has type <code>String -&gt; IO String</code>. <code>traverse</code> is a little like <code>map</code>, except where <code>map getWithPrompt prompts</code> would leave you with a value of type <code>[IO String]</code>, <code>traverse</code> combines the list of <code>IO</code> actions into a single <code>IO</code> action which executes each <code>IO</code> action and gathers their results into a single list.</p>\n\n<hr>\n\n<p>As pointed out by Daniel Wagner, I forgot about stopping if the empty string is entered. To handle that, we can go back to your original recursion, but remembering to define what <code>questionnaire []</code> means.</p>\n\n<pre><code>questionnaire :: [String] -&gt; IO [String]\nquestionnaire [] = return []\nquestionnaire (x:xs) = do\n    putStr x\n    (***) \n    user &lt;- getLine\n    case user of \n        \"\" -&gt; return []\n        _  -&gt; do\n            nextUser &lt;- questionnaire xs\n            return (user : nextUser)\n</code></pre>\n"}], "owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "closed_date": 1572987648, "accepted_answer_id": 58714080, "answer_count": 1, "score": 0, "last_activity_date": 1572987871, "creation_date": 1572965380, "question_id": 58713862, "link": "https://stackoverflow.com/questions/58713862/haskell-how-to-terminate-recursive-call-and-avoid-non-exhaustive-patterns", "closed_reason": "Duplicate", "title": "Haskell how to terminate recursive call and avoid non-exhaustive patterns", "body": "<p>Working on terminal based app that uses a number of <code>putStr</code>/<code>getLine</code>'s for gathering user input. Would like to use the following function to shorten the tedious <code>putStr</code> <code>getLine</code> by feeding it a list of questions and returning the answers in a list (recursively). Although the <code>getLine</code>s terminate nicely, I cannot avoid the <code>non-exhaustive patterns</code> on the <code>putStr</code> side of things. \nThis is not a duplicate. Multiple <code>getLine</code>'s can be done using <code>replicateM</code>, but it's the combination of questions/answers I am after.</p>\n\n<pre><code>(***) = hFlush stdout\n\nquestionnaire :: [String] -&gt; IO [String]\nquestionnaire (x:xs) = do\n    putStr x\n    (***) \n    user &lt;- getLine\n    case user of \n        \"\" -&gt; return []\n        _  -&gt; do\n            nextUser &lt;- questionnaire xs\n            return (user : nextUser)\n</code></pre>\n"}, {"tags": ["list", "haskell", "boolean", "isbn"], "answers": [{"comments": [{"owner": {"reputation": 755, "user_id": 10646292, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6gC15EORa3I/AAAAAAAAAAI/AAAAAAAAB1Q/Z08eioKbmwc/photo.jpg?sz=128", "display_name": "Mandingo", "link": "https://stackoverflow.com/users/10646292/mandingo"}, "edited": false, "score": 0, "creation_date": 1572968750, "post_id": 58713178, "comment_id": 103722906, "body": "Hi, could you help me, I&#39;m trying to do something like <code>isValid [x1, x2, x3] | (x3 = x1 + x2) = True</code> but not sure what the correct syntax is? E.g. <code>isValid [x1, x2, x3] | x3 &gt; x1 + x2 = True</code> has correct syntax but I need to check if x3 is equal, not &gt; or &lt;."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 755, "user_id": 10646292, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6gC15EORa3I/AAAAAAAAAAI/AAAAAAAAB1Q/Z08eioKbmwc/photo.jpg?sz=128", "display_name": "Mandingo", "link": "https://stackoverflow.com/users/10646292/mandingo"}, "edited": false, "score": 1, "creation_date": 1572968800, "post_id": 58713178, "comment_id": 103722936, "body": "@Mandingo: you check equality with <code>==</code>, so <code>1 == 1</code> is <code>True</code>, and <code>1 == 2</code> is <code>False</code>."}, {"owner": {"reputation": 755, "user_id": 10646292, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6gC15EORa3I/AAAAAAAAAAI/AAAAAAAAB1Q/Z08eioKbmwc/photo.jpg?sz=128", "display_name": "Mandingo", "link": "https://stackoverflow.com/users/10646292/mandingo"}, "edited": false, "score": 0, "creation_date": 1572969564, "post_id": 58713178, "comment_id": 103723377, "body": "Thank you, I understand now and solved my problem. Is there a quicker way to write the code? Let&#39;s say if there were many more digits than 13? If so, would that be a better way to do it?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 755, "user_id": 10646292, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6gC15EORa3I/AAAAAAAAAAI/AAAAAAAAB1Q/Z08eioKbmwc/photo.jpg?sz=128", "display_name": "Mandingo", "link": "https://stackoverflow.com/users/10646292/mandingo"}, "edited": false, "score": 1, "creation_date": 1572969684, "post_id": 58713178, "comment_id": 103723459, "body": "@Mandingo: usually if there is a pattern, you can use recursion to iterate over the list, or use a function like <code>zipWith</code>, etc. to do the recursion for you."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1572964686, "last_edit_date": 1572964686, "creation_date": 1572963112, "answer_id": 58713178, "question_id": 58713127, "link": "https://stackoverflow.com/questions/58713127/isbn-13-digit-check-using-haskell/58713178#58713178", "title": "ISBN-13 digit check using Haskell", "body": "<p>You can just pattern match on a list of 13 elements, like:</p>\n\n<pre><code>isValid :: [Int] -&gt; Bool\nisValid [x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13] = &hellip;\nisValid _ = False</code></pre>\n\n<p>with <code>&hellip;</code> the part you still need to fill in. Hint: you can use <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:mod\" rel=\"nofollow noreferrer\"><strong><code>mod :: Integral a =&gt; a -&gt; a -&gt; a</code></strong></a> to calculate a modulo (in some programming languages that is done with <code>%</code>).</p>\n\n<p>Here <code>x13</code> is thus the last digit that you can use in the check.</p>\n"}], "owner": {"reputation": 755, "user_id": 10646292, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6gC15EORa3I/AAAAAAAAAAI/AAAAAAAAB1Q/Z08eioKbmwc/photo.jpg?sz=128", "display_name": "Mandingo", "link": "https://stackoverflow.com/users/10646292/mandingo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 58713178, "answer_count": 1, "score": 1, "last_activity_date": 1572964686, "creation_date": 1572962962, "last_edit_date": 1572963414, "question_id": 58713127, "link": "https://stackoverflow.com/questions/58713127/isbn-13-digit-check-using-haskell", "title": "ISBN-13 digit check using Haskell", "body": "<p>I just started functional programming, using Haskell, and I want to write a short function that checks a 13-digit code and checks if it is an ISBN number.</p>\n\n<p>The formula for the check is:</p>\n\n<pre><code>x13 = (10 \u2212 ((x1 + 3x2 +x3 + 3x4 +x5 + 3x6 +x7 + 3x8 +x9 + 3x10 +x11 + 3x12)%10))%10\n</code></pre>\n\n<p>(<code>x1</code> being the first digit, <code>x2</code> the second, ..., <code>x13</code> the last digit etc.)</p>\n\n<p>I want the input to be a list so it's easier for me (13 integers, each 0-9).</p>\n\n<p>So something like this (stuff below is simplified):</p>\n\n<pre><code>isValid :: [Int] -&gt; Bool\n--isValid = True if (lastdigit = formula)    -- can this be done in one (long) line?\n</code></pre>\n\n<p>So, for example:</p>\n\n<pre><code> isValid [ 9, 7, 8, 0, 1, 3, 7, 0, 5, 3, 4, 6, 9 ]\n</code></pre>\n\n<p>should return <code>True</code></p>\n\n<p>I've been trying to do this for a few hours but I'm not good enough at Haskell yet and it's confusing me. Can someone point me in the right direction? I don't know much about Haskell, which is the main problem.</p>\n"}, {"tags": ["function", "haskell", "recursion"], "comments": [{"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 1, "creation_date": 1572965220, "post_id": 58713082, "comment_id": 103720796, "body": "(1) You need to drop a word from the tail every time you take a word. (2) when you take a word, you need to check if it&#39;s empty."}, {"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1572968670, "post_id": 58713082, "comment_id": 103722852, "body": "When you try, what goes wrong for you? Include your attempted code above."}, {"owner": {"reputation": 1, "user_id": 12113123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yer_JNh2mDk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfw5VBc0ukK9g8oJGAookICKWai0A/photo.jpg?sz=128", "display_name": "Skyline", "link": "https://stackoverflow.com/users/12113123/skyline"}, "reply_to_user": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 2, "creation_date": 1572971537, "post_id": 58713082, "comment_id": 103724560, "body": "@Michael Litchard it\u2019s there the words\u2019 function is it which should do the work. takeWord is taking the first word of a string dropWord is dropping the first word of a string and words\u2019 should make a list of words from a string with the help of the previous two function."}, {"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1572975025, "post_id": 58713082, "comment_id": 103726281, "body": "Doh! I see it now."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1572978156, "post_id": 58713082, "comment_id": 103727665, "body": "<code>words&#39; (&#39; &#39;:xs) = takeWord xs : words&#39; xs</code> looks like it is duplicating words, since <code>xs</code> is used twice. Are you sure you don&#39;t need to recurse as <code>words&#39; (dropWords xs)</code> or something similar?"}, {"owner": {"reputation": 1, "user_id": 12113123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yer_JNh2mDk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfw5VBc0ukK9g8oJGAookICKWai0A/photo.jpg?sz=128", "display_name": "Skyline", "link": "https://stackoverflow.com/users/12113123/skyline"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1572979877, "post_id": 58713082, "comment_id": 103728376, "body": "@chi Now it looks like this: <code>words&#39; (&#39; &#39;:xs) = takeWord xs : words&#39; (dropWord xs)</code> and the output is : <code>[&quot;&quot;,&quot;&quot;,&quot;Correct&quot;,&quot;&quot;,&quot;&quot;,&quot;answer&quot;,&quot;&quot;,&quot;&quot;,&quot;is&quot;,&quot;&quot;,&quot;&quot;,&quot;this&quot;]</code> so the problem is it&#39;s only dropping one <code>&#39; &#39;</code> instead of three which i have in the input"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1572980916, "post_id": 58713082, "comment_id": 103728869, "body": "Maybe I&#39;d try instead <code>words&#39; (&#39; &#39;:xs) = words&#39; xs</code> to skip the leading spaces and see what happens."}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1572981140, "post_id": 58713082, "comment_id": 103728950, "body": "@Skyline If you have a result such as <code>[&quot;&quot;,&quot;&quot;,&quot;Correct&quot;,&quot;&quot;,&quot;&quot;,&quot;answer&quot;,&quot;&quot;,&quot;&quot;,&quot;is&quot;,&quot;&quot;,&quot;&quot;,&quot;this&quot;]</code>, you could just try to pass it to <code>filter (not . null)</code> . Not massively elegant, but it would work."}, {"owner": {"reputation": 1, "user_id": 12113123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yer_JNh2mDk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfw5VBc0ukK9g8oJGAookICKWai0A/photo.jpg?sz=128", "display_name": "Skyline", "link": "https://stackoverflow.com/users/12113123/skyline"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1572981988, "post_id": 58713082, "comment_id": 103729304, "body": "@chi Thank you now it&#39;s working!"}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1572982417, "post_id": 58713082, "comment_id": 103729476, "body": "@Skyline  Great ! BTW it is perfectly acceptable for you to answer your own question. But you are not supposed to (self)accept your own answer before waiting for a couple of days."}, {"owner": {"reputation": 1, "user_id": 12113123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yer_JNh2mDk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfw5VBc0ukK9g8oJGAookICKWai0A/photo.jpg?sz=128", "display_name": "Skyline", "link": "https://stackoverflow.com/users/12113123/skyline"}, "reply_to_user": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1572983639, "post_id": 58713082, "comment_id": 103729995, "body": "@jpmarinier Why can&#39;t I mark the answers useful or accept them as an answer? I could do that earlier at an other question"}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1572984039, "post_id": 58713082, "comment_id": 103730180, "body": "@Skyline I am a bit confused - there are no answers at all, only comments here, so you cannot accept a non-existent answer. You can just upvote the comments by clicking on their upward-pointing triangle."}, {"owner": {"reputation": 1, "user_id": 12113123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yer_JNh2mDk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfw5VBc0ukK9g8oJGAookICKWai0A/photo.jpg?sz=128", "display_name": "Skyline", "link": "https://stackoverflow.com/users/12113123/skyline"}, "reply_to_user": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1572984722, "post_id": 58713082, "comment_id": 103730478, "body": "@jpmarinier Yes, but can&#39;t see the triangles at the comments."}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1572985101, "post_id": 58713082, "comment_id": 103730630, "body": "@Skyline  No idea why. On my screen, the triangle appears in grey at the left of the comment, above the little flag. Note that the flag is only to be clicked when you want to mark the comment as abusive. One of your own comments has been upvoted twice, including by me. So I see a &quot;2&quot; digit just left of its triangle. And the triangle is now orange instead of grey."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12113123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yer_JNh2mDk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfw5VBc0ukK9g8oJGAookICKWai0A/photo.jpg?sz=128", "display_name": "Skyline", "link": "https://stackoverflow.com/users/12113123/skyline"}, "is_accepted": false, "score": 0, "last_activity_date": 1572986290, "creation_date": 1572986290, "answer_id": 58719114, "question_id": 58713082, "link": "https://stackoverflow.com/questions/58713082/haskell-redefine-words-function-with-recursion/58719114#58719114", "title": "Haskell redefine words function with recursion", "body": "<p>Got the working solution from @chi </p>\n\n<p>\"Maybe I'd try instead words' (' ':xs) = words' xs to skip the leading spaces and see what happens.\"</p>\n"}], "owner": {"reputation": 1, "user_id": 12113123, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yer_JNh2mDk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfw5VBc0ukK9g8oJGAookICKWai0A/photo.jpg?sz=128", "display_name": "Skyline", "link": "https://stackoverflow.com/users/12113123/skyline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1572986290, "creation_date": 1572962803, "question_id": 58713082, "link": "https://stackoverflow.com/questions/58713082/haskell-redefine-words-function-with-recursion", "title": "Haskell redefine words function with recursion", "body": "<p>I need to redefine the words function with recursion. I have 2 helper function but I can't really manage to put together the final function. Any ideas?</p>\n\n<pre><code>takeWord :: String -&gt; String\ntakeWord  \"\"      = \"\"\ntakeWord (' ':xs) = \"\"\ntakeWord (x  :xs) = x : takeWord xs\n\ndropWord :: String -&gt; String\ndropWord  \"\"      = \"\"\ndropWord (' ':xs) =  ' ' : xs\ndropWord (x  :xs) =  dropWord xs\n\nwords' :: String -&gt; [String]\nwords' \"\" = []\nwords' (' ':xs) = takeWord xs : words' xs\nwords' (x:xs) =  takeWord (x:xs) : words' (dropWord xs)\n</code></pre>\n\n<p>The result for this input <code>\"   Correct   answer   is   this\"</code> should be <code>[\"Correct\",\"answer\",\"is\",\"this\"]</code>. Now I'm getting this output: <code>[\"\",\"\",\"Correct\",\"Correct\",\"\",\"\",\"answer\",\"answer\",\"\",\"\",\"is\",\"is\",\"\",\"\",\"this\",\"this\"]</code></p>\n"}, {"tags": ["haskell", "random", "state"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572953663, "post_id": 58710448, "comment_id": 103714715, "body": "You should use <code>return []</code>, or <code>pure []</code>."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1572954246, "last_edit_date": 1572954246, "creation_date": 1572953913, "answer_id": 58710582, "question_id": 58710448, "link": "https://stackoverflow.com/questions/58710448/problems-to-make-a-function-that-rollsndice-in-haskell/58710582#58710582", "title": "Problems to make a function that rollsNDice in Haskell", "body": "<p>The reason this does not work is because <code>[]</code> has type <code>[a]</code>, you can not use <code>[] :: State StdGen [Int]</code> to convert it to a <code>State StdGen [Int]</code>.</p>\n\n<p>You can however use <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:pure\" rel=\"nofollow noreferrer\"><strong><code>pure :: Applicative m =&gt; a -&gt; m a</code></strong></a> to wrap this in a <code>State StdGen [Int]</code>:</p>\n\n<pre><code>rollNDice :: Int -&gt; State StdGen [Int]\nrollNDice 0 = <b>pure []</b>\nrollNDice n = (:) &lt;$&gt; rollDie &lt;*&gt; rollNDice (n-1)</code></pre>\n\n<p>That being said, you can make use of <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#v:replicateM\" rel=\"nofollow noreferrer\"><strong><code>replicateM :: Applicative m =&gt; Int -&gt; m a -&gt; m [a]</code></strong></a> here to generate a list of <code>n</code> items:</p>\n\n<pre><code>import Control.Monad(replicateM)\n\nrollNDice :: Int -&gt; State StdGen [Int]\nrollNDice = (<b>`replicateM` rollDie</b>)</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude System.Random Control.Monad.Trans.State Control.Monad&gt; evalState (rollNDice 5) (mkStdGen 0)\n[6,6,4,1,5]\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 11972131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ftpuGrBsu5M/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rDLImau73Ng1duuAS9ooewP7mmJw/mo/photo.jpg?sz=128", "display_name": "Lucas Cruz dos Reis", "link": "https://stackoverflow.com/users/11972131/lucas-cruz-dos-reis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58710582, "answer_count": 1, "score": 1, "last_activity_date": 1572954246, "creation_date": 1572953468, "question_id": 58710448, "link": "https://stackoverflow.com/questions/58710448/problems-to-make-a-function-that-rollsndice-in-haskell", "title": "Problems to make a function that rollsNDice in Haskell", "body": "<p>I'm experimenting with randomness in Haskell and I wanted to do a function that given an Int n returns a list of states of random numbers between 1 and 6:</p>\n\n<pre><code>-- auxiliar function\nrollDie :: State StdGen Int\nrollDie = do generator &lt;- get\n                let (value, newGenerator) = randomR (1,6) generator\n                put newGenerator\n                return value\n\nrollNDice :: Int -&gt; State StdGen [Int]\nrollNDice n | n == 0    = [] :: State StdGen [Int]\n  | otherwise = (:) &lt;$&gt; rollDie &lt;*&gt; rollNDice (n-1)\n</code></pre>\n\n<p>but when I try to run it in ghci I get:</p>\n\n<pre><code>Couldn't match type \u2018[a0]\u2019\n                     with \u2018StateT StdGen Data.Functor.Identity.Identity [Int]\u2019\n      Expected type: State StdGen [Int]\n        Actual type: [a0]\n    \u2022 In the expression: [] :: State StdGen [Int]\n      In an equation for \u2018rollNDice\u2019:\n          rollNDice n\n            | n == 0 = [] :: State StdGen [Int]\n            | otherwise = (:) &lt;$&gt; rollDie &lt;*&gt; rollNDice (n - 1)\n</code></pre>\n\n<p>I don't understand the error. Any ideas?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1572952418, "post_id": 58710107, "comment_id": 103714094, "body": "Try using recursion for the other case."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1572960041, "post_id": 58710107, "comment_id": 103717861, "body": "What should triple-spaces do? You might consider <code>normaliseSpace = unwords . words</code> if you&#39;re okay with collapsing arbitrarily long sequences of whitespace (but beware: including newlines) to a single space."}], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 2, "creation_date": 1572952574, "post_id": 58710168, "comment_id": 103714167, "body": "Actually, it would likely be better to recurse <code>normaliseSpace $ &#39; &#39;:xs</code>, so multiple-spaces are also reduced to one. (But this is not clear from the OP.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12325658"}, "edited": false, "score": 1, "creation_date": 1572954350, "post_id": 58710168, "comment_id": 103715090, "body": "That works great. Thank you very much! I tried using recursion before, but I have missed on of the base cases most likely."}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573246869, "post_id": 58710168, "comment_id": 103833411, "body": "Why rebuild <code>&#39; &#39;:xs</code> instead of using an at-pattern?"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 5, "last_activity_date": 1573247248, "last_edit_date": 1573247248, "creation_date": 1572952443, "answer_id": 58710168, "question_id": 58710107, "link": "https://stackoverflow.com/questions/58710107/converts-a-double-space-into-single-one-anywhere-in-a-string-in-haskell/58710168#58710168", "title": "Converts a double space into single one anywhere in a String in Haskell", "body": "<p>The reason this happens is because <code>y:xs</code> and <code>xs</code> will not <em>recurse</em> on te rest of the string. You thus want to perform the function on the rest of the string.</p>\n\n<p>You thus should call <code>normaliseSpace</code> on <code>xs</code> as tail. For example:</p>\n\n<pre><code>normaliseSpace:: String -&gt; String\nnormaliseSpace \"\" = \"\"\nnormaliseSpace (' ' : ' ' : xs) = ' ' : <b>normaliseSpace xs</b>\nnormalissSpace (x:xs) = x : <b>normaliseSpace xs</b></code></pre>\n\n<p>Note that you need to add a pattern for the empty string (list) as well. Since otherwise eventually the recursion will reach the end of the list, and thus raise an error because there is no clause that can \"fire\".</p>\n\n<p>If you want to reduce a sequence of spaces (two or <em>more</em> to one), then we even need to pass <code>' ' : xs</code> through the <code>normalizeSpace</code>, like <a href=\"https://stackoverflow.com/questions/58710107/converts-a-double-space-into-single-one-anywhere-in-a-string-in-haskell/58710168?noredirect=1#comment103714167_58710168\">@leftroundabout says</a>:</p>\n\n<pre><code>normaliseSpace:: String -&gt; String\nnormaliseSpace \"\" = \"\"\nnormaliseSpace (' ' : ' ' : xs) = <b>normaliseSpace (' ':xs)</b>\nnormalissSpace (x:xs) = x : normaliseSpace xs</code></pre>\n\n<p>We can use an as-pattern here, like <a href=\"https://stackoverflow.com/questions/58710107/converts-a-double-space-into-single-one-anywhere-in-a-string-in-haskell/58710168?noredirect=1#comment103833411_58710168\">@JosephSible suggests</a>:</p>\n\n<pre><code>normaliseSpace:: String -&gt; String\nnormaliseSpace \"\" = \"\"\nnormaliseSpace (' ' : <b>xs@</b>(' ' : _)) = normaliseSpace <b>xs</b>\nnormalissSpace (x:xs) = x : normaliseSpace xs</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 0, "last_activity_date": 1573251579, "creation_date": 1573251579, "answer_id": 58774461, "question_id": 58710107, "link": "https://stackoverflow.com/questions/58710107/converts-a-double-space-into-single-one-anywhere-in-a-string-in-haskell/58774461#58774461", "title": "Converts a double space into single one anywhere in a String in Haskell", "body": "<p>May be you can simply do like</p>\n\n<pre><code>*Main&gt; let normSpaces = unwords . words\n*Main&gt; normSpaces \"hello     world\"\n\"hello world\"\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12325658"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573251579, "creation_date": 1572952194, "last_edit_date": 1572952332, "question_id": 58710107, "link": "https://stackoverflow.com/questions/58710107/converts-a-double-space-into-single-one-anywhere-in-a-string-in-haskell", "title": "Converts a double space into single one anywhere in a String in Haskell", "body": "<p>I've been trying to complete a function that converts\ndouble space in a String into a single space in Haskell. </p>\n\n<pre><code>normaliseSpace:: String -&gt; String\nnormaliseSpace (x:y:xs)= if x==' ' &amp;&amp; y==' ' then y:xs\nelse xs\n</code></pre>\n\n<p>The problem with my code  is that only converts double spaces in the beginning of a String. I suppose it has something to do with pattern matching, but as I am completely new to Haskell I really don't have an idea how to do it. Any help will be appreciated!</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "is_accepted": false, "score": 1, "last_activity_date": 1572950051, "creation_date": 1572950051, "answer_id": 58709476, "question_id": 58709370, "link": "https://stackoverflow.com/questions/58709370/counting-digits-in-a-list-of-characters/58709476#58709476", "title": "counting digits in a list of characters", "body": "<p>Not far off, but your <code>isNumber'</code> needs to take a character, not a string. So it would be of type</p>\n\n<pre><code>isNumber' :: Char -&gt; Bool\n</code></pre>\n\n<p>Using <code>read</code> is not necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 12325447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406948378ae5a4cbee9767d646911587?s=128&d=identicon&r=PG&f=1", "display_name": "mgt", "link": "https://stackoverflow.com/users/12325447/mgt"}, "edited": false, "score": 0, "creation_date": 1572952975, "post_id": 58709490, "comment_id": 103714372, "body": "Do know how to do this using recursion"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 83, "user_id": 12325447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406948378ae5a4cbee9767d646911587?s=128&d=identicon&r=PG&f=1", "display_name": "mgt", "link": "https://stackoverflow.com/users/12325447/mgt"}, "edited": false, "score": 0, "creation_date": 1572953020, "post_id": 58709490, "comment_id": 103714394, "body": "@g.s: try to make recursive functions for <code>length</code> and <code>filter</code> first. I think that will likely help you make a recursive function for <code>counta</code>."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 2, "last_activity_date": 1572950103, "creation_date": 1572950103, "answer_id": 58709490, "question_id": 58709370, "link": "https://stackoverflow.com/questions/58709370/counting-digits-in-a-list-of-characters/58709490#58709490", "title": "counting digits in a list of characters", "body": "<p>Since you say it is a list of characters, the type of <code>counta</code> should be:</p>\n\n<pre><code>counta :: <b>[Char]</b> -&gt; Int \ncounta = length . filter isNumber'</code></pre>\n\n<p>So that means that <code>isNumber'</code> has as signature <code>Char -&gt; Bool</code>, and thus checks if a character is a digit. We however do not need to implement such function: in the <code>Data.Char</code> module, there is an <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Char.html#v:isDigit\" rel=\"nofollow noreferrer\"><strong><code>isDigit :: Char -&gt; Bool</code></strong></a> function, so we can implement the <code>counta</code> with:</p>\n\n<pre><code>import Data.Char(isDigit)\n\ncounta :: [Char] -> Int\ncounta = length . filter <b>isDigit</b></code></pre>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 5400197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bd95a827950f2c0a00b6eb48041613?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Chandak", "link": "https://stackoverflow.com/users/5400197/ravi-chandak"}, "is_accepted": false, "score": 0, "last_activity_date": 1572950104, "creation_date": 1572950104, "answer_id": 58709491, "question_id": 58709370, "link": "https://stackoverflow.com/questions/58709370/counting-digits-in-a-list-of-characters/58709491#58709491", "title": "counting digits in a list of characters", "body": "<p>You can use \n<code>Char -&gt; Bool</code> instead of <code>String -&gt; Bool</code> and it should work without the read </p>\n"}], "owner": {"reputation": 83, "user_id": 12325447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406948378ae5a4cbee9767d646911587?s=128&d=identicon&r=PG&f=1", "display_name": "mgt", "link": "https://stackoverflow.com/users/12325447/mgt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1572956754, "creation_date": 1572949697, "last_edit_date": 1572956754, "question_id": 58709370, "link": "https://stackoverflow.com/questions/58709370/counting-digits-in-a-list-of-characters", "title": "counting digits in a list of characters", "body": "<p>I need to count how many digits appear in a list of characters using haskell.\neg. <code>['2','3','d','r','t','5']</code>\nwould output 3</p>\n\n<p>I have managed to do it using string but cannot get it to work while using characters</p>\n\n<p>this is my code for string</p>\n\n<pre><code>isNumber' :: String -&gt; Bool\nisNumber' s = case (reads s) :: [(Int, String)] of\n[(_,\"\")] -&gt; True\n_         -&gt; False\n\ncounta :: [String] -&gt; Int \ncounta = length . filter isNumber'\n</code></pre>\n\n<p>e.g. <code>['2','3','d','r','t','5']</code>\nwould output 3</p>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 639, "user_id": 10654293, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N3y4b1ilweA/AAAAAAAAAAI/AAAAAAAAAAQ/nO5VTzQiUu0/photo.jpg?sz=128", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/10654293/mcbear-holden"}, "edited": false, "score": 0, "creation_date": 1572948889, "post_id": 58708106, "comment_id": 103712257, "body": "Thanks! BTW: Do I have to put import RIO in every module file?"}, {"owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "reply_to_user": {"reputation": 639, "user_id": 10654293, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N3y4b1ilweA/AAAAAAAAAAI/AAAAAAAAAAQ/nO5VTzQiUu0/photo.jpg?sz=128", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/10654293/mcbear-holden"}, "edited": false, "score": 0, "creation_date": 1572952564, "post_id": 58708106, "comment_id": 103714162, "body": "@McBearHolden Yes, you would need to import it to the functions in it."}], "tags": [], "owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "is_accepted": true, "score": 3, "last_activity_date": 1572968474, "last_edit_date": 1572968474, "creation_date": 1572945679, "answer_id": 58708106, "question_id": 58707828, "link": "https://stackoverflow.com/questions/58707828/how-to-print-stuff-to-stdout-with-rio-library/58708106#58708106", "title": "How to print stuff to stdout with RIO library", "body": "<p>The standard way is to use the <a href=\"https://www.stackage.org/haddock/lts-14.13/rio-0.1.12.0/RIO.html#g:8\" rel=\"nofollow noreferrer\">logging functions</a>:</p>\n\n<pre><code>#!/usr/bin/env stack\n-- stack --resolver lts-13.19 script\n{-# LANGUAGE OverloadedStrings #-}\n\nimport RIO\n\nmain :: IO ()\nmain = runSimpleApp $ do logInfo \"Hello World\"\n</code></pre>\n\n<p>And on executing them:</p>\n\n<pre><code>$ stack rio.hs\nHello World\n</code></pre>\n\n<p>You can also use the <a href=\"https://www.stackage.org/haddock/lts-14.13/rio-0.1.12.0/RIO.html#v:logOptionsHandle\" rel=\"nofollow noreferrer\">logOptionsHandle</a> to pass any type of <code>Handle</code> to it (including <code>stdout</code> or a file handle if you want the logging on a file) and configure accordingly. You can even use the Prelude's <code>print</code> if you want, but unlike logging approach above this is not as efficient and is not thread safe, which means it can result in interleaved output in a concurrent setting:</p>\n\n<pre><code>import Prelude (print)\nimport RIO\n\nmain :: IO ()\nmain = runSimpleApp $ do liftIO $ print \"hello\"\n</code></pre>\n\n<p>There is more <a href=\"https://tech.fpcomplete.com/haskell/library/rio\" rel=\"nofollow noreferrer\">detailed documentation on rio here</a>.</p>\n"}], "owner": {"reputation": 639, "user_id": 10654293, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N3y4b1ilweA/AAAAAAAAAAI/AAAAAAAAAAQ/nO5VTzQiUu0/photo.jpg?sz=128", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/10654293/mcbear-holden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 58708106, "answer_count": 1, "score": 1, "last_activity_date": 1572968474, "creation_date": 1572944784, "last_edit_date": 1572945065, "question_id": 58707828, "link": "https://stackoverflow.com/questions/58707828/how-to-print-stuff-to-stdout-with-rio-library", "title": "How to print stuff to stdout with RIO library", "body": "<p>How do people print stuff out to stdout when using the RIO library?</p>\n\n<p>I've read the discussion on the RIO github discussing:</p>\n\n<p><a href=\"https://github.com/commercialhaskell/rio/issues/5#issuecomment-355061756\" rel=\"nofollow noreferrer\">https://github.com/commercialhaskell/rio/issues/5#issuecomment-355061756</a></p>\n\n<p>But couldn't find a solution.</p>\n"}, {"tags": ["haskell", "artificial-intelligence", "fold", "minimax"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 8739454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5924dca8bfab2b03fa5a99cc6409bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDS18", "link": "https://stackoverflow.com/users/8739454/mds18"}, "edited": false, "score": 0, "creation_date": 1572938164, "post_id": 58705770, "comment_id": 103706925, "body": "thanks a lot! Yeah I was just trying to wrap my head around how to do get the best score, i wasn&#39;t really even thinking about how to associate the score with the move. I guess a tuple would be the best way to do this. Would the above code change a lot with that addition?"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 81, "user_id": 8739454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5924dca8bfab2b03fa5a99cc6409bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDS18", "link": "https://stackoverflow.com/users/8739454/mds18"}, "edited": false, "score": 0, "creation_date": 1572938332, "post_id": 58705770, "comment_id": 103706999, "body": "Not a lot. You&#39;ll change the return values and use <code>maximumBy snd</code> or something instead of <code>maximum</code>."}, {"owner": {"reputation": 81, "user_id": 8739454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5924dca8bfab2b03fa5a99cc6409bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDS18", "link": "https://stackoverflow.com/users/8739454/mds18"}, "edited": false, "score": 0, "creation_date": 1572939648, "post_id": 58705770, "comment_id": 103707504, "body": "So i tried your code and got some type errors. I think its because my applyMove function is actually of type Move -&gt; Position -&gt; Position. This is consistent throughout my code and used in other functions. Should i change it in my original code or is there another solution?"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 81, "user_id": 8739454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5924dca8bfab2b03fa5a99cc6409bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDS18", "link": "https://stackoverflow.com/users/8739454/mds18"}, "edited": false, "score": 0, "creation_date": 1572940999, "post_id": 58705770, "comment_id": 103708037, "body": "You can change <code>applyMove pos</code> to <code>(flip applyMove pos)</code> to keep the same types. I do think that my order is &quot;better&quot;, because it fits better with the kinds of partial application you will tend to do (i.e., apply multiple different moves to the same board). Your version makes it easy to apply the same move to many different boards, which seems a bit less common. It&#39;s a pretty subtle difference, though, and there are arguments for your type being better as well."}, {"owner": {"reputation": 81, "user_id": 8739454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5924dca8bfab2b03fa5a99cc6409bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDS18", "link": "https://stackoverflow.com/users/8739454/mds18"}, "edited": false, "score": 0, "creation_date": 1572941536, "post_id": 58705770, "comment_id": 103708282, "body": "That worked! Thanks so much for all your help man, you&#39;re a real lifesaver! Your type does seem to fit what i&#39;m trying to do, but unfortunately my professor uses this type throughout the frontend he has set up for us, so it would be unwise of me to change it! Again, thanks so much for your help."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 81, "user_id": 8739454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5924dca8bfab2b03fa5a99cc6409bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDS18", "link": "https://stackoverflow.com/users/8739454/mds18"}, "edited": false, "score": 0, "creation_date": 1572942143, "post_id": 58705770, "comment_id": 103708567, "body": "Naturally, I do encourage you to understand how this solution works. Of course foremost this will aid your education, but also what I&#39;ve written is pretty clearly not in the style a beginner would use, so if merely copied it will stick out to a professor."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1572944617, "post_id": 58705770, "comment_id": 103709773, "body": "This is elegant, even if I somewhat dislike the <code>negate . negate . negate ... . eval</code> thunks that are being built up. Also, I think <code>maximum . map negate</code> can be replaced by <code>negate . minimum</code> which should only perform a single negation."}, {"owner": {"reputation": 81, "user_id": 8739454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5924dca8bfab2b03fa5a99cc6409bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDS18", "link": "https://stackoverflow.com/users/8739454/mds18"}, "edited": false, "score": 0, "creation_date": 1573009796, "post_id": 58705770, "comment_id": 103737388, "body": "@amalloy If you&#39;re still willing to help me out, how would I go about changing the return values so that it returns the correct move?"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1573012694, "post_id": 58705770, "comment_id": 103737929, "body": "Not really. That belongs in a new question where you explain what you have (a minimax evaluator), what you need (a minimax move selector), how you&#39;ve tried to get there, and what&#39;s tripping you up along the way."}], "tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": true, "score": 7, "last_activity_date": 1572937145, "last_edit_date": 1572937145, "creation_date": 1572936051, "answer_id": 58705770, "question_id": 58704888, "link": "https://stackoverflow.com/questions/58704888/implementing-minimax-by-recursively-folding/58705770#58705770", "title": "Implementing minimax by recursively folding", "body": "<p>You have a few functions already:</p>\n\n<pre><code>legalMoves :: Position -&gt; [Move]\napplyMove :: Position -&gt; Move -&gt; Position\n</code></pre>\n\n<p>I think your <code>minimax</code> would be cleaner with a different signature: instead of taking a Bool to decide whether to maximize or minimize, with different cases for each, it's simpler to always try to maximize, and vary the evaluation function instead, by flipping its sign at each step.</p>\n\n<p>Once you have that, you don't really need to write a fold manually: just <code>map</code> recursive calls over each legal move, and glue them together with <code>maximum</code> to find the best move for the current player.</p>\n\n<pre><code>minimax :: (Position -&gt; Int) -&gt; Int -&gt; Position -&gt; Int\nminimax eval 0 pos = eval pos\nminimax eval n pos = case legalMoves pos of\n  [] -&gt; eval pos\n  moves -&gt; maximum . map negate \n       . map (minimax (negate . eval) (n - 1) . applyMove pos) \n       $ moves\n</code></pre>\n\n<p>Note that your specification makes it impossible to decide <em>what move</em> is the best, only what score you could get by making the best move. To find the best move, you'll want to make <code>minimax</code> return a tuple containing both the score and the move made to get there, or something of that sort.</p>\n"}], "owner": {"reputation": 81, "user_id": 8739454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5924dca8bfab2b03fa5a99cc6409bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDS18", "link": "https://stackoverflow.com/users/8739454/mds18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 58705770, "answer_count": 1, "score": 3, "last_activity_date": 1572987760, "creation_date": 1572930927, "last_edit_date": 1572987760, "question_id": 58704888, "link": "https://stackoverflow.com/questions/58704888/implementing-minimax-by-recursively-folding", "title": "Implementing minimax by recursively folding", "body": "<p>I'm writing a checkers AI for a standard 8*8 drafts version of the game. \n The state is represented as a lens with lists of Coords representing the pieces on the board. What I am trying to do is follow this pseudo code for a Min-Max search.</p>\n\n<pre><code>function minimax(position, depth, maximizingPlayer)\n   if depth == 0 or game over in position\n        return static evaluation of position\n\n   if maximizingPlayer\n         maxEval = -infinity\n         for each child of position\n              eval = minimax(child, depth-1, False)\n              maxEval = max(maxEval, eval)\n         return maxEval\n   else \n          minEval = +infinity\n          for each child of position\n              eval = minimax(child, depth-1, true)\n              minEval = min(minEval, eval)\n         return minEval\n</code></pre>\n\n<p>By my understanding, in my case, <code>position</code> would be the <code>GameState</code>. So in my program, I would want to call <code>minimax</code> again on all children of the <code>GameState</code>, which would each just be a <code>GameState</code> with a move applied to it. Eventually I would hit depth 0 in which I would return a heuristic I have made a function to calculate. Where I am stuck is how to iterate through each possible GameState after a move. I have a function that calculates all possible moves that can be made from a specific GameState, but I'm stuck on how to iterate through all those moves, calling minimax with the new GameState resulting from the application of every one of the moves.</p>\n\n<p>Going back to the pseudocode, I know that <code>child</code> will be a function call  <code>applyMove</code> which takes in a Move and the current GameState, and returns a GameState with the new placement of pieces. Each \"child\" will be a different GameState resulting from different moves. I'm pretty new to Haskell and I know I'll probably need to use a fold for this. But I'm just stuck on how to write it, and I can't find many examples that I can easily relate to my situation. Any advice/tips are greatly appreciated.</p>\n\n<p>The moves list would look something like this: <code>[[(1,2),(2,3)],[(3,6),(2,7)]]</code> and the <code>child</code> of a <code>GameState</code> would be a GameState after the application of a move, e.g </p>\n\n<p><code>applyMove [(1,2),(2,3)] gameState</code>.</p>\n"}, {"tags": ["parsing", "haskell", "sudoku"], "comments": [{"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1572921353, "post_id": 58703662, "comment_id": 103702877, "body": "Your compiler should tell you what&#39;s wrong. In particular your indentations are off!"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 4, "creation_date": 1572921448, "post_id": 58703662, "comment_id": 103702893, "body": "This is a terrible way to approach this problem.  You should try to learn the basic syntactical approaches that haskell has rather than brute forcing it this way."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1572921530, "post_id": 58703662, "comment_id": 103702906, "body": "also please share a complete example (with the main function) so that someone can test it out"}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 2, "creation_date": 1572921761, "post_id": 58703662, "comment_id": 103702955, "body": "<code>let</code> must be followed by some code that uses the defined variable, otherwise it&#39;s completely useless. All your <code>let</code>s aren&#39;t followed by anything."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 1, "creation_date": 1572922803, "post_id": 58703662, "comment_id": 103703133, "body": "@FyodorSoikin Well, the first 11 are &quot;fine&quot; because they&#39;re in a do block (although obviously very messy either way)."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 4, "creation_date": 1572923273, "post_id": 58703662, "comment_id": 103703224, "body": "Holy heck, there&#39;s a lot of oddities in this one snippet. Can I recommend that once you get it doing what you want you take it over to <a href=\"http://codereview.stackexchange.com\">codereview.stackexchange.com</a>?"}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1572923824, "post_id": 58703662, "comment_id": 103703315, "body": "@amalloy yes, you&#39;re right. I only meant the ones inside the <code>if</code>s."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1572942547, "post_id": 58703662, "comment_id": 103708744, "body": "Please do not use <code>do</code>, unless you understand the implications. It usually results in people trying to write imperative-style in Haskell."}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1573075497, "post_id": 58703662, "comment_id": 103767354, "body": "You could replace the 9 <i>let</i> lines for the initialization of variables x0 to x8 by some pattern matching: <code>let [x0,x1,x2,x3,x4,x5,x6,x7,x8] = board  in  (some expression using the xi variables)</code> as it seems your Board data type is a list."}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1573077596, "post_id": 58703662, "comment_id": 103768092, "body": "You could define a tiny list sectioning function like this : <code>let sp ln idx ls = (take ln . drop idx) ls</code> and then you can replace this: <code>[x3!!6, x3!!7, x3!!8, x4!!6, x4!!7, x4!!8, x5!!6, x5!!7, x5!!8]</code> by that: <code>(sp 3 6 x3) ++ (sp 3 6 x4) ++ (sp 3 6 x5)</code> and on top of that you can get rid of the <code>let z</code> at the left of those code lines."}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 4, "last_activity_date": 1572923129, "creation_date": 1572923129, "answer_id": 58703910, "question_id": 58703662, "link": "https://stackoverflow.com/questions/58703662/why-is-there-a-parse-error-in-this-haskell-else-if-statement/58703910#58703910", "title": "Why is there a parse error in this Haskell &#39;else if&#39; statement?", "body": "<p>Just delete <code>let z =</code> everywhere it appears, and you'll be on your way to your next error.</p>\n"}, {"tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": false, "score": 0, "last_activity_date": 1573027169, "creation_date": 1573027169, "answer_id": 58725486, "question_id": 58703662, "link": "https://stackoverflow.com/questions/58703662/why-is-there-a-parse-error-in-this-haskell-else-if-statement/58725486#58725486", "title": "Why is there a parse error in this Haskell &#39;else if&#39; statement?", "body": "<p>A <code>let</code> expression has a binding and a body.  A prototypical <code>let</code> expression is:</p>\n\n<pre><code>let x = 2 in x + x\n    ^^^^^    ^^^^^\n   binding    body\n</code></pre>\n\n<p>Which just means <em>substitute <code>2</code> for <code>x</code></em> in the body. That's all <code>let</code> ever means (that is, you could always get rid of the <code>let</code> manually by substituting).  It is a bit obscured by the allowed syntax for <code>let</code> within a <code>do</code> block, which may give the impression that it is like a mutable variable in an imperative language, but it is not.</p>\n\n<pre><code>do \n    let i = x\n    let j = y\n    pure (i + j)\n</code></pre>\n\n<p>Means</p>\n\n<pre><code>let i = x in \n  let j = y in \n    pure (i + j)\n</code></pre>\n\n<p>That is, the body of the let is the remainder of the <code>do</code> block.</p>\n\n<p>Any variable can be traced back to a single unique definition or function parameter.  A variable can't be defined by multiple different <code>let</code> statements dynamically, as you are trying to do.  You need to define <code>z</code> only once.  In your case, this can be done with <em>guards</em>, which is a way to make conditional definitions.</p>\n\n<pre><code>let z\n    | i == 0 &amp;&amp; j == 0 = [x0!!0, x0!!1, -- oh my god I am not typing this\n    | i == 0 &amp;&amp; j == 1 = [x0!!3, x0!!4, -- more?\n    | ...\n</code></pre>\n\n<p>You could have also done it without guards, you just need to move your chain of <code>if</code>s inside the <code>let</code>:</p>\n\n<pre><code>let z = if i == 0 &amp;&amp; j == 0 then [...]\n        else if i == 0 &amp;&amp; j == 1 then [...]\n        ...\n</code></pre>\n\n<p>I hope this helps.  May the pains of your brute-force solutions be amortized.</p>\n"}], "owner": {"reputation": 1, "user_id": 12323437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21d9c5e8fb32d857d428e48130efab2b?s=128&d=identicon&r=PG&f=1", "display_name": "rudydemon", "link": "https://stackoverflow.com/users/12323437/rudydemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1573027169, "creation_date": 1572921122, "question_id": 58703662, "link": "https://stackoverflow.com/questions/58703662/why-is-there-a-parse-error-in-this-haskell-else-if-statement", "title": "Why is there a parse error in this Haskell &#39;else if&#39; statement?", "body": "<p>I am looking for a hint or explanation as to why this chunk of code keeps getting a parse error on the first else if statement in the block. It says it may be a problem with indentation or parenthesis but I cant seem to find them. So I was looking for another set of experienced eyes to set me on the right course. I feel like there is something very small I am overlooking, but I just cant seem to find it. This is for a sudoku solver(Ill admit the whole sudoku solver is a class assignment. This is my first time posting so Im not 100% certain if this is an acceptable question, please let me know if it is not). </p>\n\n<p>This function is to take a sudoku game board (Which is basically a list of lists) and two ints which are the coordinates for the 3x3 section of the board you are looking at and then return the sequence of numbers from that 3x3 section of board. </p>\n\n<p>I know this isnt the haskelian way to solve this problem (I sort of brute forced it in the end), Im really only been learning Haskell for a few weeks, but I wanted to figure out why the else if keeps popping up as an error. </p>\n\n<pre><code>getBox :: Board -&gt; Int -&gt; Int -&gt; Sequence\ngetBox b x y = do\n  let i = x\n  let j = y\n\n\n  let x0 = b!!0\n  let x1 = b!!1\n  let x2 = b!!2\n  let x3 = b!!3\n  let x4 = b!!4\n  let x5 = b!!5\n  let x6 = b!!6\n  let x7 = b!!7\n  let x8 = b!!8\n\n  if (i==0 &amp;&amp; j==0)\n      then let z = [x0!!0, x0!1, x0!!2, x1!!0 x1!!1, x1!!2, x2!!0, x2!!1, x2!!2]\n  else if (i==0 &amp;&amp; j==1)\n      then let z = [x0!!3, x0!4, x0!!5, x1!!3 x1!!4, x1!!5, x2!!3, x2!!4, x2!!5]\n  else if (i==0 &amp;&amp; j==2)\n      then let z = [x0!!6, x0!7, x0!!8, x1!!6 x1!!7, x1!!8, x2!!6, x2!!7, x2!!8]\n  else if (i==1 &amp;&amp; j==0)\n      then let z = [x3!!0, x3!!1, x3!!2, x4!!0, x4!!1, x4!!2, x5!!0, x5!!1, x5!!2]\n  else if (i==1 &amp;&amp; j==1)\n      then let z = [x3!!3, x3!!4, x3!!5, x4!!3, x4!!4, x4!!5, x5!!3, x5!!4, x5!!5]\n  else if (i==1 &amp;&amp; j==2)\n      then let z = [x3!!6, x3!!7, x3!!8, x4!!6, x4!!7, x4!!8, x5!!6, x5!!7, x5!!8]\n  else if (i==2 &amp;&amp; j==0)\n      then let z = [x6!!0, x6!!1, x6!!2, x7!!0, x7!!1, x7!!2, x8!!0, x8!!1, x8!!2]\n  else if (i==2 &amp;&amp; j==1)\n      then let z = [x6!!3, x6!!4, x6!!5, x7!!3, x7!!4, x7!!5, x8!!3, x8!!4, x8!!5]\n  else let z = [x6!!6, x6!!7, x6!!8, x7!!6, x7!!7, x7!!8, x8!!6, x8!!7, x8!!8]\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1572915968, "post_id": 58702851, "comment_id": 103701881, "body": "While this is pretty easy to achieve, I&#39;d recommend you give some thought to whether you really need it at all. There&#39;s generally not much point to using any other type but <code>Double</code> for numerical calculations in Haskell \u2013 <code>Float</code> isn&#39;t really faster on modern processor unless you use SIMD instructions (which GHC doesn&#39;t do by itself), and not more memory-efficient unless you use unboxed arrays."}, {"owner": {"reputation": 4282, "user_id": 290443, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f822f8f82def56dc3237cc4ff794e9e?s=128&d=identicon&r=PG", "display_name": "MikeRand", "link": "https://stackoverflow.com/users/290443/mikerand"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1572916151, "post_id": 58702851, "comment_id": 103701915, "body": "Good point. Was really just using the example to grok typeclass vs type interactions, and the parameterized data class pretty much nailed it."}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 4, "last_activity_date": 1572913891, "creation_date": 1572913891, "answer_id": 58702867, "question_id": 58702851, "link": "https://stackoverflow.com/questions/58702851/haskell-how-to-generalize-across-float-and-double/58702867#58702867", "title": "Haskell - How to generalize across Float and Double", "body": "<p>Let your distribution parameters data structure be parameterized by the <code>Floating</code> instance:</p>\n\n<pre><code>data Uniform a = Uniform\n     { lowerBound :: a\n     , upperBound :: a\n     } deriving (Show)\n\nclass ContinuousDistribution d where\n    ppf :: Floating a =&gt; d a -&gt; a -&gt; a\n\ninstance ContinuousDistribution Uniform where\n    ppf d q = (1.0 - q) * lowerBound d + q * upperBound d\n</code></pre>\n"}], "owner": {"reputation": 4282, "user_id": 290443, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f822f8f82def56dc3237cc4ff794e9e?s=128&d=identicon&r=PG", "display_name": "MikeRand", "link": "https://stackoverflow.com/users/290443/mikerand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58702867, "answer_count": 1, "score": 1, "last_activity_date": 1572913891, "creation_date": 1572913614, "question_id": 58702851, "link": "https://stackoverflow.com/questions/58702851/haskell-how-to-generalize-across-float-and-double", "title": "Haskell - How to generalize across Float and Double", "body": "<p>I have a simple type class used to represent continuous probability distributions, with one instance. I'd like to write the typeclass and formulas as general as possible so that, for example, I could chose between Float or Double as appropriate.</p>\n\n<p>This does not compile:</p>\n\n<pre><code>class ContinuousDistribution d where\n    ppf :: Floating a =&gt; d -&gt; a -&gt; a\n\ndata Uniform = Uniform\n     { lowerBound :: Float\n     , upperBound :: Float\n     } deriving (Show)\n\ninstance ContinuousDistribution Uniform where\n    ppf d q = (1.0 - q) * lowerBound d + q * upperBound d\n</code></pre>\n\n<p>Producing</p>\n\n<pre><code>stats.hs:10:27: error:\n    \u2022 Couldn't match expected type \u2018a\u2019 with actual type \u2018Float\u2019\n      \u2018a\u2019 is a rigid type variable bound by\n        the type signature for:\n          ppf :: forall a. Floating a =&gt; Uniform -&gt; a -&gt; a\n        at stats.hs:10:5\n    \u2022 In the second argument of \u2018(*)\u2019, namely \u2018lowerBound d\u2019\n      In the first argument of \u2018(+)\u2019, namely \u2018(1.0 - q) * lowerBound d\u2019\n      In the expression: (1.0 - q) * lowerBound d + q * upperBound d\n    \u2022 Relevant bindings include\n        q :: a (bound at stats.hs:10:11)\n        ppf :: Uniform -&gt; a -&gt; a (bound at stats.hs:10:5)\nFailed, modules loaded: none.\n</code></pre>\n\n<p>Specifying the types in the type-class declaration compiles, but restricts me to Float.</p>\n\n<pre><code>class ContinuousDistribution d where\n    ppf :: d -&gt; Float -&gt; Float\n\ndata Uniform = Uniform\n     { lowerBound :: Float\n     , upperBound :: Float\n     } deriving (Show)\n\ninstance ContinuousDistribution Uniform where\n    ppf d q = (1.0 - q) * lowerBound d + q * upperBound d\n</code></pre>\n\n<p>What's the canonical way to modify the typeclass so I can use Float or Double as needed?</p>\n"}, {"tags": ["file", "haskell", "input", "lazy-evaluation"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 9679270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799982581af44d586c92a0ebd1719c4f?s=128&d=identicon&r=PG&f=1", "display_name": "GrundleMoof", "link": "https://stackoverflow.com/users/9679270/grundlemoof"}, "edited": false, "score": 0, "creation_date": 1572919111, "post_id": 58702797, "comment_id": 103702479, "body": "Hi, I should&#39;ve been more clear: the chunks aren&#39;t contiguous. A chunk is  composed of 32 random lines from random (non sequential) positions in in the file."}, {"owner": {"reputation": 169, "user_id": 9679270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799982581af44d586c92a0ebd1719c4f?s=128&d=identicon&r=PG&f=1", "display_name": "GrundleMoof", "link": "https://stackoverflow.com/users/9679270/grundlemoof"}, "edited": false, "score": 0, "creation_date": 1572919212, "post_id": 58702797, "comment_id": 103702501, "body": "also, maybe I&#39;m not understanding something, but: <code>readFile</code> is lazy too, right? but it seems like <code>mapM</code> evaluates the whole map anyway? so if I understand that correctly, using <code>hGetContents</code> still wouldn&#39;t help because it would get evaluated?"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 169, "user_id": 9679270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799982581af44d586c92a0ebd1719c4f?s=128&d=identicon&r=PG&f=1", "display_name": "GrundleMoof", "link": "https://stackoverflow.com/users/9679270/grundlemoof"}, "edited": false, "score": 0, "creation_date": 1572921648, "post_id": 58702797, "comment_id": 103702920, "body": "I think <code>mapM</code> would preserve the laziness of the returned file, if given a sufficiently lazy function. Your problem is that <code>get_data_batch_from_ind_batch</code> as written is dreadfully un-lazy. It reads the file into a String, and then <i>reuses</i> that string to look up multiple times by index. If you want to avoid keeping the file in memory, you can&#39;t ever reuse the string produced by getContents. You have to re-read the file every time you want to start a new scan."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 169, "user_id": 9679270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799982581af44d586c92a0ebd1719c4f?s=128&d=identicon&r=PG&f=1", "display_name": "GrundleMoof", "link": "https://stackoverflow.com/users/9679270/grundlemoof"}, "edited": false, "score": 0, "creation_date": 1572921732, "post_id": 58702797, "comment_id": 103702944, "body": "Plus, scanning through it one byte at a time is pointlessly slow: I&#39;d point the handle at the desired byte offset first with something like <code>hSeek</code>, and then read only the bytes you want."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 169, "user_id": 9679270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799982581af44d586c92a0ebd1719c4f?s=128&d=identicon&r=PG&f=1", "display_name": "GrundleMoof", "link": "https://stackoverflow.com/users/9679270/grundlemoof"}, "edited": false, "score": 0, "creation_date": 1572921919, "post_id": 58702797, "comment_id": 103702978, "body": "Note that this is not something special about <code>hGetContents</code>: any lazy operation in Haskell is only lazy &quot;the first time&quot;. If you want to use a value twice, you have to either hold it in memory, or recompute it. When you save the string produced by <code>hGetContents</code> and use it multiple times, you are forcing Haskell to keep it all in memory."}, {"owner": {"reputation": 169, "user_id": 9679270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799982581af44d586c92a0ebd1719c4f?s=128&d=identicon&r=PG&f=1", "display_name": "GrundleMoof", "link": "https://stackoverflow.com/users/9679270/grundlemoof"}, "edited": false, "score": 0, "creation_date": 1572923776, "post_id": 58702797, "comment_id": 103703310, "body": "Okay! I think I understand now. Let me try something and get right back to you."}, {"owner": {"reputation": 169, "user_id": 9679270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799982581af44d586c92a0ebd1719c4f?s=128&d=identicon&r=PG&f=1", "display_name": "GrundleMoof", "link": "https://stackoverflow.com/users/9679270/grundlemoof"}, "edited": false, "score": 0, "creation_date": 1572932171, "post_id": 58702797, "comment_id": 103704969, "body": "Hey I got it!! So I think I can accept this. One quick question though: right now I&#39;m using <code>hSeek</code> like you said and for each item of a batch, opening the file, doing <code>hSeek</code> to that line position, and doing <code>hGetLine</code> to get the line. If I do that, can I do it multiple times with the same file handle without the file getting read in? It seems like I should be able to, because it&#39;s just seeking to specific spots."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 169, "user_id": 9679270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799982581af44d586c92a0ebd1719c4f?s=128&d=identicon&r=PG&f=1", "display_name": "GrundleMoof", "link": "https://stackoverflow.com/users/9679270/grundlemoof"}, "edited": false, "score": 0, "creation_date": 1572932250, "post_id": 58702797, "comment_id": 103705003, "body": "I imagine you can, but of course Try It And See is the best answer."}], "tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": true, "score": 1, "last_activity_date": 1572913068, "creation_date": 1572913068, "answer_id": 58702797, "question_id": 58702669, "link": "https://stackoverflow.com/questions/58702669/how-can-i-repeatedly-read-in-shuffled-lines-of-a-large-data-file-in-haskell/58702797#58702797", "title": "How can I repeatedly read in shuffled lines of a large data file in Haskell?", "body": "<p><code>hGetContents</code> will return the contents of the file lazily, but if you do much of anything with the result you will realize the whole file at once. I suggest reading the file once, and scanning over it for newlines, so that you can build an index of which chunk starts at which byte offset. That index will be quite small, so you can shuffle it easily. Then you can iterate through the index, each time opening the file and reading only a defined sub-range of it, and parsing only that one chunk.</p>\n"}], "owner": {"reputation": 169, "user_id": 9679270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799982581af44d586c92a0ebd1719c4f?s=128&d=identicon&r=PG&f=1", "display_name": "GrundleMoof", "link": "https://stackoverflow.com/users/9679270/grundlemoof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58702797, "answer_count": 1, "score": 0, "last_activity_date": 1572913068, "creation_date": 1572911671, "question_id": 58702669, "link": "https://stackoverflow.com/questions/58702669/how-can-i-repeatedly-read-in-shuffled-lines-of-a-large-data-file-in-haskell", "title": "How can I repeatedly read in shuffled lines of a large data file in Haskell?", "body": "<p>I have a data file of 60k lines, where each line has ~1k comma separated Ints (that I want to immediately turn into Doubles).</p>\n\n<p>I want to iterate over a sequence of random \"batches\" of 32 lines, where a batch is a random subset of all of the lines, and none of the batches share lines in common. Since there are 60k lines and 32 lines per batch, there should be 1875 batches.</p>\n\n<p>I'm open to changing things if necessary, but I'd like them to be in the form of a list (of batches) that's lazily evaluated. The code that needs this is a <code>foldM</code>, where I'm using it like:</p>\n\n<pre><code>resulting_struct &lt;- foldM fold_fn my_struct batch_list\n</code></pre>\n\n<p>so that it repeatedly calls <code>fold_fn</code> on the result of the current accumulator <code>my_struct</code> and the next element of <code>batch_list</code>.</p>\n\n<p>I'm very confused. It was easy when I didn't need to shuffle them; I simply read them in and chunked them, and they were evaluated lazily, so I had no problems. Now I'm completely stuck and feel like I must be missing something simple.</p>\n\n<p>I've tried the following:</p>\n\n<ol>\n<li><p>Reading the file into a list of lines and naively shuffling the input. This doesn't work, as <code>readFile</code> is lazily evaluated, but it needs to read the whole file into memory to shuffle it randomly, and it quickly eats up all my ~8 GB RAM.</p></li>\n<li><p>Getting the length of the file, and then creating a list of batches of shuffled <em>indices</em> from 0 to 60k that correspond to the line numbers that will be selected to form the batches. Then, when I want to actually get the data batches, I do:</p></li>\n</ol>\n\n<pre><code>ind_batches &lt;- get_shuffled_ind_batches_from_file fname\nbatch_list &lt;- mapM (get_data_batch_from_ind_batch fname) ind_batches\n</code></pre>\n\n<p>where:</p>\n\n<pre><code>get_shuffled_ind_batches_from_file :: String -&gt; IO [[Int]]\nget_shuffled_ind_batches_from_file fname = do\n  contents &lt;- get_contents_from_file fname -- uses readFile, returns [[Double]]\n  let n_samps = length contents\n      ind = [0..(n_samps-1)]\n  shuffled_indices &lt;- shuffle_list ind\n  let shuffled_ind_chunks = take 1800 $ chunksOf 32 shuffled_indices\n  return shuffled_ind_chunks\n\nget_data_batch_from_ind_batch :: String -&gt; [Int] -&gt; IO [[Double]]\nget_data_batch_from_ind_batch fname ind_chunk = do\n  contents &lt;- get_contents_from_file fname\n  let data_batch = get_elems_at_indices contents ind_chunk\n  return data_batch\n\nshuffle_list :: [a] -&gt; IO [a]\nshuffle_list xs = do\n        ar &lt;- newArray n xs\n        forM [1..n] $ \\i -&gt; do\n            j &lt;- randomRIO (i,n)\n            vi &lt;- readArray ar i\n            vj &lt;- readArray ar j\n            writeArray ar j vi\n            return vj\n  where\n    n = length xs\n    newArray :: Int -&gt; [a] -&gt; IO (IOArray Int a)\n    newArray n xs =  newListArray (1,n) xs\n\nget_elems_at_indices :: [a] -&gt; [Int] -&gt; [a]\nget_elems_at_indices my_list ind_list = (map . (!!)) my_list ind_list\n\n</code></pre>\n\n<p>however, it seems like <code>mapM</code> evaluates immediately, which then tries to read in the file contents repeatedly (I think, the RAM blows up anyway).</p>\n\n<ol start=\"3\">\n<li>A bit more searching told me that I could try using <code>unsafeInterleaveIO</code> to make it so it lazily evaluates an action, so I tried sticking it in like so:</li>\n</ol>\n\n<pre><code>get_data_batch_from_ind_batch :: String -&gt; [Int] -&gt; IO [[Double]]\nget_data_batch_from_ind_batch fname ind_chunk = unsafeInterleaveIO $ do\n  contents &lt;- get_contents_from_file fname\n  let data_batch = get_elems_at_indices contents ind_chunk\n  return data_batch\n</code></pre>\n\n<p>but no luck, same problem as above.</p>\n\n<p>I feel like I've been banging my head against the wall here and must be missing something very simple. Someone suggested using streams or conduits instead, but when I looked at the documentation for them, it wasn't really clear to me how I could use them to solve this problem.</p>\n\n<p><strong>How can I read in a large data file and also shuffle it, without using up all my memory?</strong></p>\n"}, {"tags": ["haskell", "text", "predicate"], "answers": [{"comments": [{"owner": {"reputation": 1290, "user_id": 3088888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b7e0846120d52a1322e4b9ad743bb8?s=128&d=identicon&r=PG&f=1", "display_name": "mjarosie", "link": "https://stackoverflow.com/users/3088888/mjarosie"}, "edited": false, "score": 0, "creation_date": 1572898584, "post_id": 58700295, "comment_id": 103696933, "body": "Sorry, obviously I meant &quot;OR&quot;, not &quot;AND&quot;. I&#39;ll edit my question. Thanks for your answer, it&#39;s really helpful and clear!"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 3, "creation_date": 1572908089, "post_id": 58700295, "comment_id": 103700223, "body": "If you find yourself doing this a lot, it&#39;s kinda neat IMO to define <code>(&lt;||&gt;) = liftA2 (||)</code>, so that you can write <code>strippedInput = T.filter (C.isMark &lt;||&gt; C.isAlpha)</code>."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 6, "last_activity_date": 1572898785, "last_edit_date": 1572898785, "creation_date": 1572897784, "answer_id": 58700295, "question_id": 58700253, "link": "https://stackoverflow.com/questions/58700253/combining-two-functions-to-apply-them-to-the-same-input/58700295#58700295", "title": "Combining two functions to apply them to the same input", "body": "<p>The simplest is to make use of a <em>lambda-expression</em>:</p>\n\n<pre><code>strippedInput :: Text -&gt; Text\nstrippedInput input = T.filter (<b>\\x -> C.isMark x || C.isAlpha x</b>) input</code></pre>\n\n<p>You can furthermore make use of the fact that a function is an applicative functor, and thus work with:</p>\n\n<pre><code>import Control.Applicative(liftA2)\n\nstrippedInput :: Text -&gt; Text\nstrippedInput input = T.filter (<b>liftA2 (||) C.isMark C.isAlpha</b>) input</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1290, "user_id": 3088888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b7e0846120d52a1322e4b9ad743bb8?s=128&d=identicon&r=PG&f=1", "display_name": "mjarosie", "link": "https://stackoverflow.com/users/3088888/mjarosie"}, "edited": false, "score": 1, "creation_date": 1572953553, "post_id": 58708940, "comment_id": 103714665, "body": "Whoa that looks complicated from the beginner&#39;s perspective. I&#39;ll try to delve into monads next. Thanks for directions!"}], "tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 1, "last_activity_date": 1572948264, "creation_date": 1572948264, "answer_id": 58708940, "question_id": 58700253, "link": "https://stackoverflow.com/questions/58700253/combining-two-functions-to-apply-them-to-the-same-input/58708940#58708940", "title": "Combining two functions to apply them to the same input", "body": "<p>The accepted answer is perfectly right. Perhaps I would like to use the applicative operator though;</p>\n\n<pre><code>strippedInput = T.filter $ (||) &lt;$&gt; C.isMark &lt;*&gt; C.isAlpha\n</code></pre>\n\n<p>However the problem with <code>liftA2</code> is, as depicted by the name, it is hardwired only to two parameter functions and yes, it is OK for this question. Yet... Haskell provides a more reasonable <em>general</em> abstraction for this job. It's basically called the function monad that is mostly generalized as the Reader monad by adding some utility functions and transformer abilities. However for simplicity we can try the function monad here.</p>\n\n<p>Function/Reader monad is used to chain up not only two but indefinite number of functions (each taking two parameters) in which case the first parameter is fed by the previous function result and the second by a common read only state (in this case it is the <code>input</code>)</p>\n\n<p>So the answer to this question could also be like</p>\n\n<pre><code>strippedInput = T.filter (C.isMark &gt;&gt;= (\\b c -&gt; b || C.isAlpha c) &gt;&gt;= return)\n</code></pre>\n\n<p>However since the <code>Data.Char</code> package is full of <code>isThis</code>, <code>isThat</code> type of checks we can show how one may extend this approach.</p>\n\n<pre><code>strippedInput = T.filter (C.isMark &gt;&gt;= (\\b c -&gt; b || C.isAlpha  c)\n                                   &gt;&gt;= (\\b c -&gt; b || C.isSymbol c)\n                                    .\n                                    .\n                                   &gt;&gt;= return)\n</code></pre>\n\n<p>and.. nobody stops you to make a comparison function such as</p>\n\n<pre><code>orWith f      = \\b c -&gt; b || f c\nstrippedInput = T.filter $ C.isMark &gt;&gt;= orWith C.isAlpha\n                                    &gt;&gt;= orWith C.isSymbol\n                                     .\n                                     .\n                                    &gt;&gt;= return\n</code></pre>\n"}], "owner": {"reputation": 1290, "user_id": 3088888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50b7e0846120d52a1322e4b9ad743bb8?s=128&d=identicon&r=PG&f=1", "display_name": "mjarosie", "link": "https://stackoverflow.com/users/3088888/mjarosie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 2, "accepted_answer_id": 58700295, "answer_count": 2, "score": 4, "last_activity_date": 1572948264, "creation_date": 1572897518, "last_edit_date": 1572898628, "question_id": 58700253, "link": "https://stackoverflow.com/questions/58700253/combining-two-functions-to-apply-them-to-the-same-input", "title": "Combining two functions to apply them to the same input", "body": "<p>I'm new to Haskell and I'm still getting my head around it. I'm trying to combine two functions (<code>isMark</code> and <code>isAlpha</code> from <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Char.html\" rel=\"nofollow noreferrer\">Data.Char</a> module in <code>base</code> package) as a first argument to <a href=\"https://hackage.haskell.org/package/text-1.2.4.0/docs/Data-Text.html#v:filter\" rel=\"nofollow noreferrer\">Data.Text.filter</a> function. What I've tried so far was:</p>\n\n<pre><code>import qualified Data.Char as C\nimport qualified Data.Text as T\nimport           Data.Text (Text)\n\nstrippedInput :: Text -&gt; Text\nstrippedInput input = T.filter (C.isMark || C.isAlpha) input\n</code></pre>\n\n<p>which doesn't work, or</p>\n\n<pre><code>strippedInput input = T.filter (C.isMark . C.isAlpha) input\n</code></pre>\n\n<p>but obviously it doesn't work either, as the type of <code>C.isAlpha</code> is <code>Char -&gt; Bool</code> which then becomes an input to <code>C.isMark</code> which is also of type <code>Char -&gt; Bool</code> so types don't match.</p>\n\n<p>I'd like to achieve the \"<code>C.isMark</code> OR <code>C.isAlpha</code>\" logic in the predicate but because of my very limited knowledge I've run out of ideas on how to search for the solution.</p>\n"}, {"tags": ["haskell", "error-handling"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1572880986, "post_id": 58696338, "comment_id": 103689174, "body": "<code>exitWith</code> has type <code>exitWith :: ExitCode -&gt; IO a</code>, so it can not return an <code>Int</code>. But it is very <i>odd</i> to do an exit anyway, since a non-IO function has no specific evaluation order. It thus can mean that the program will evaluate it at a completely different timestamp than when you intend to."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572881013, "post_id": 58696338, "comment_id": 103689189, "body": "Often a non-total function is emulated with a <code>Maybe ...</code> as return type."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572881062, "post_id": 58696338, "comment_id": 103689215, "body": "You could use <code>error</code>, but that would be &quot;<i>ugly</i>&quot; for the same reasons as listed above."}, {"owner": {"reputation": 109, "user_id": 10628180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7bTVQYf2k74/AAAAAAAAAAI/AAAAAAAADCM/l_PdWAySHfg/photo.jpg?sz=128", "display_name": "Osa", "link": "https://stackoverflow.com/users/10628180/osa"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572881072, "post_id": 58696338, "comment_id": 103689223, "body": "Does this mean putting Maybe Int could work ?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572881140, "post_id": 58696338, "comment_id": 103689255, "body": "you do not <i>exit</i> the program with such <code>Maybe</code>, the point is that you use it to &quot;<i>encode</i>&quot; the non-totalness of the function. So then you can inspect that in the <code>IO</code> monad (for example <code>main</code>, and let <code>main</code> perform an <code>exitWith</code>)."}, {"owner": {"reputation": 109, "user_id": 10628180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7bTVQYf2k74/AAAAAAAAAAI/AAAAAAAADCM/l_PdWAySHfg/photo.jpg?sz=128", "display_name": "Osa", "link": "https://stackoverflow.com/users/10628180/osa"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572881167, "post_id": 58696338, "comment_id": 103689275, "body": "Yes but is there a way to return a value using error, so that when I type <code>echo $?</code> it displays a chosen value ?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1572881915, "post_id": 58696338, "comment_id": 103689661, "body": "With your function, no. With an IO action that <i>uses</i> your function, yes."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1572882311, "post_id": 58696338, "comment_id": 103689902, "body": "If there&#39;s an error with <code>read</code> (it&#39;s a partial function), your <code>case</code> expression won&#39;t see it. Your program just stops then and there. You need to catch the exception, or use a total function in the first place."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 4, "creation_date": 1572882553, "post_id": 58696338, "comment_id": 103690032, "body": "Perhaps the easiest sort-of-clean option could be to throw an exception (those can also be thrown in pure code), catch it in <code>main</code> (we need to be inside <code>IO</code> to catch them), and there use <code>exitWith</code>. Still, it&#39;s rare to use exceptions in Haskell, so this is not really idiomatic (indeed, I don&#39;t even remember how this is concretely done in code; I&#39;d need to google that). Still, why would a pure function need to abort the program?"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1572882849, "post_id": 58696338, "comment_id": 103690185, "body": "@chi yes, I think this is exactly the sort of situation where an exception is the right approach."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1572883178, "post_id": 58696338, "comment_id": 103690338, "body": "@leftaroundabout Could be. To be honest, I think we could even have a pure <code>errorWith :: ExitCode -&gt; a</code>, since it would be not really worse than <code>error</code> (IMO). But we can&#39;t implement that without unsafe primitives, so exceptions seem to be the &quot;best&quot; alternative which is still kosher."}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1572905905, "post_id": 58696338, "comment_id": 103699577, "body": "The <i>trace</i> function from Debug.Trace manages to write tracing info on stderr while in pure code. Similarly, would it be possible to write a C function that would call exit(), and then call that C function from pure Haskell code using the <a href=\"https://wiki.haskell.org/Foreign_Function_Interface\" rel=\"nofollow noreferrer\">FFI</a> (Foreign Function Interface) using a clause like <code>foreign import ccall &quot;myExit&quot; ... </code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 10628180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7bTVQYf2k74/AAAAAAAAAAI/AAAAAAAADCM/l_PdWAySHfg/photo.jpg?sz=128", "display_name": "Osa", "link": "https://stackoverflow.com/users/10628180/osa"}, "edited": false, "score": 0, "creation_date": 1572882633, "post_id": 58696421, "comment_id": 103690057, "body": "I tried to do something like this, but now the result is considered as a <code>Maybe Int</code>, which means I can&#39;t pass it to a function that takes a simple <code>Int</code> as parameter."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 109, "user_id": 10628180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7bTVQYf2k74/AAAAAAAAAAI/AAAAAAAADCM/l_PdWAySHfg/photo.jpg?sz=128", "display_name": "Osa", "link": "https://stackoverflow.com/users/10628180/osa"}, "edited": false, "score": 1, "creation_date": 1572883012, "post_id": 58696421, "comment_id": 103690263, "body": "@Osa \u201cwhich means I can&#39;t pass it to a function that takes a simple Int as parameter\u201d \u2013 well, that&#39;s somewhat by design. The function <i>doesn&#39;t</i> return a simple <code>Int</code> as the result in the error case, so... \u2014 Then again, we do need to recognise that Haskell isn&#39;t a total language, <i>can</i> crash, and it could be debated whether giving a particular exit code should be considered an illegal side-effect any more than <code>error</code>. I think chi&#39;s suggestion of an exception makes sense here."}, {"owner": {"reputation": 109, "user_id": 10628180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7bTVQYf2k74/AAAAAAAAAAI/AAAAAAAADCM/l_PdWAySHfg/photo.jpg?sz=128", "display_name": "Osa", "link": "https://stackoverflow.com/users/10628180/osa"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1572883212, "post_id": 58696421, "comment_id": 103690359, "body": "@leftaroundabout I&#39;d like to do it but as you can see/guess, I&#39;m quite a beginner in Haskell, and I still don&#39;t understand how to throw/catch exceptions"}, {"owner": {"reputation": 109, "user_id": 10628180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7bTVQYf2k74/AAAAAAAAAAI/AAAAAAAADCM/l_PdWAySHfg/photo.jpg?sz=128", "display_name": "Osa", "link": "https://stackoverflow.com/users/10628180/osa"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1572883549, "post_id": 58696421, "comment_id": 103690533, "body": "@leftaroundabout but isn&#39;t there a way to do something like : if the function returned Nothing, then exitWith(etc), else send the result as an Int ? Since it&#39;s either an Int or Nothing ?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 109, "user_id": 10628180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7bTVQYf2k74/AAAAAAAAAAI/AAAAAAAADCM/l_PdWAySHfg/photo.jpg?sz=128", "display_name": "Osa", "link": "https://stackoverflow.com/users/10628180/osa"}, "edited": false, "score": 0, "creation_date": 1572884892, "post_id": 58696421, "comment_id": 103691240, "body": "@Osa Certainly: in your <code>IO</code>-based caller, you may run <code>do { v &lt;- case example &quot;foo&quot; of { Nothing -&gt; exitWith (ExitFailure 84); Just v -&gt; pure v }; ... }</code> and in the <code>...</code>, you will have <code>v :: Int</code>. Or, you may change <code>example</code> to do <code>IO</code> directly, as in <code>example :: String -&gt; IO Int; example s = case read s of 0 -&gt; pure 0; _ -&gt; exitWith (ExitFailure 84)</code> and then in your <code>IO</code>-based caller you may <code>do { v &lt;- example &quot;foo&quot;; ... }</code> and again you will have <code>v :: Int</code> in the <code>...</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572887145, "post_id": 58696421, "comment_id": 103692343, "body": "This answer doesn&#39;t address the issue that if <code>read</code> is what raises the exception, it doesn&#39;t matter if you change the return type from <code>Int</code> to <code>Maybe Int</code>, because <code>j</code> never gets set, let alone examined."}, {"owner": {"reputation": 109, "user_id": 10628180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7bTVQYf2k74/AAAAAAAAAAI/AAAAAAAADCM/l_PdWAySHfg/photo.jpg?sz=128", "display_name": "Osa", "link": "https://stackoverflow.com/users/10628180/osa"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572956337, "post_id": 58696421, "comment_id": 103716031, "body": "@chepner I wasn&#39;t clear about something, my example with read was just an example, I actually don&#39;t use read, I just wanted to be able to interrupt my program in a given situation, which I was able to do now"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 2, "last_activity_date": 1572881664, "last_edit_date": 1572881664, "creation_date": 1572881163, "answer_id": 58696421, "question_id": 58696338, "link": "https://stackoverflow.com/questions/58696338/is-it-possible-to-exit-a-function-in-haskell-with-its-current-return-type/58696421#58696421", "title": "Is it possible to exit a function in Haskell with it&#39;s current return type?", "body": "<p>An option as the comments says is Maybe:</p>\n\n<pre><code>example :: String -&gt; Maybe Int\nexample s = do\nlet j = read s\ncase j of\n    0 -&gt; Just j\n    _ -&gt; Nothing\n</code></pre>\n\n<p>and then, whenever you use it you can pattern match over the Maybe value. That is not the same as \"exit the program\". But it is a way to handle a failure.</p>\n\n<p>Other way is with <code>Either</code></p>\n\n<pre><code>type ErrorMsg = String \n\nexample :: String -&gt; Either ErrorMsg Int\nexample s = do\nlet j = read s\ncase j of\n    0 -&gt; Right j\n    _ -&gt; Left \"exitFailure: 84\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 2, "last_activity_date": 1572893911, "creation_date": 1572893911, "answer_id": 58699519, "question_id": 58696338, "link": "https://stackoverflow.com/questions/58696338/is-it-possible-to-exit-a-function-in-haskell-with-its-current-return-type/58699519#58699519", "title": "Is it possible to exit a function in Haskell with it&#39;s current return type?", "body": "<p>Here's an alternative, exploiting exceptions.</p>\n\n<p>First, we declare a custom exception type, containing our <code>ExitCode</code></p>\n\n<pre><code>import Control.Exception\nimport System.Exit\n\ndata TerminationException = TE ExitCode\n   deriving Show\n\ninstance Exception TerminationException where\n</code></pre>\n\n<p>Then, we can use it in pure code, throwing an exception as needed.</p>\n\n<pre><code>example :: String -&gt; Int\nexample s = let\n   j = read s\n   in case j of\n      0 -&gt; j\n      _ -&gt; throw (TE (ExitFailure 84))\n</code></pre>\n\n<p>Note in passing that the above <code>read</code> will crash the program if the input string does not parse to a number. I'm including that only to be as close as possible to the original code, but it would be better to use <code>readMaybe</code> or <code>reads</code>, instead.</p>\n\n<p>We can then define a little exception handler.</p>\n\n<pre><code>withExit :: IO a -&gt; IO a\nwithExit action = action `catch` (\\(TE code) -&gt; exitWith code) \n</code></pre>\n\n<p>Finally, we need to wrap the <code>main</code> with our handler, as follows.</p>\n\n<pre><code>main :: IO ()\nmain = withExit $ do\n   putStrLn \"hello 1\"\n   print (example \"0\")  -- passes\n   putStrLn \"hello 2\"\n   print (example \"1\")  -- ** --\n   putStrLn \"hello 3\"\n</code></pre>\n\n<p>The above <code>main</code> triggers the exception at the <code>**</code>-marked line. There, nothing is <code>print</code>ed and the program is exited with return code <code>84</code>, as specified in <code>example</code>.</p>\n"}], "owner": {"reputation": 109, "user_id": 10628180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7bTVQYf2k74/AAAAAAAAAAI/AAAAAAAADCM/l_PdWAySHfg/photo.jpg?sz=128", "display_name": "Osa", "link": "https://stackoverflow.com/users/10628180/osa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 0, "accepted_answer_id": 58696421, "answer_count": 2, "score": 3, "last_activity_date": 1573532705, "creation_date": 1572880879, "last_edit_date": 1573532705, "question_id": 58696338, "link": "https://stackoverflow.com/questions/58696338/is-it-possible-to-exit-a-function-in-haskell-with-its-current-return-type", "title": "Is it possible to exit a function in Haskell with it&#39;s current return type?", "body": "<p>Is it possible to have a function that returns Int to close the program on an error? For example, and exit with a chosen value?\n<br>\nHere is my code:</p>\n\n<pre><code>example :: String -&gt; Int\nexample s = do\nlet j = read  s\ncase j of\n    0 -&gt; j\n    _ -&gt; exitWith (exitFailure: 84)\n</code></pre>\n\n<p>I just want to stop the program on an error in a function that is not IO, and I can't find a way but using the \"error\" function, which doesn't return any value.</p>\n"}, {"tags": ["list", "haskell", "recursion", "functional-programming"], "answers": [{"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1572905373, "post_id": 58695267, "comment_id": 103699390, "body": "this should be the accepted answer, I have to learn how to highlight with html the answers like yours, pretty nice"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 10, "last_activity_date": 1572876980, "creation_date": 1572876980, "answer_id": 58695267, "question_id": 58695184, "link": "https://stackoverflow.com/questions/58695184/couldnt-match-expected-type-integer-with-actual-type-bool/58695267#58695267", "title": "Couldn&#39;t match expected type `[Integer]&#39; with actual type `Bool&#39;", "body": "<p>The line:</p>\n\n<pre><code>allZero (0:s) = <b>0 : allZero s</b></code></pre>\n\n<p>does not make much sense, since <code>0 : allZero s</code> means you are constructing a list, a list of numbers. But you want to return a <code>Bool</code>.</p>\n\n<p>Furthermore the line:</p>\n\n<pre><code>allZero <b>(0:_)</b> = True</code></pre>\n\n<p>Is incorrect as well, since that means that means that every list that starts with <code>0</code> satisfies the functions. But in a list <code>[0,1,4,2,5]</code>, not all numbers are <code>0</code>.</p>\n\n<p>We can check this with:</p>\n\n<pre><code>allZero (Num a, Eq a) =&gt; [a] -&gt; Bool\nallZero [] = True\nallZero (0:s) = <b>allZero s</b>\nallZero (_:_) = False</code></pre>\n\n<p>We can make use of <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:all\" rel=\"noreferrer\"><strong><code>all :: Foldable f =&gt; (a -&gt; Bool) -&gt; f a -&gt; Bool</code></strong></a> and write this as:</p>\n\n<pre><code>allZero :: (Num a, Eq a, Foldable f) =&gt; f a -&gt; Bool\nallZero = <b>all (0 ==)</b></code></pre>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1572879004, "post_id": 58695447, "comment_id": 103688100, "body": "Though laziness only gets you so far: <code>&amp;&amp;</code> is strict in its first argument, but lazy in its second. <code>False &amp;&amp; undefined</code> evaluates to <code>False</code>, but <code>undefined &amp;&amp; False</code> raises an exception."}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 2, "last_activity_date": 1572905232, "last_edit_date": 1572905232, "creation_date": 1572877606, "answer_id": 58695447, "question_id": 58695184, "link": "https://stackoverflow.com/questions/58695184/couldnt-match-expected-type-integer-with-actual-type-bool/58695447#58695447", "title": "Couldn&#39;t match expected type `[Integer]&#39; with actual type `Bool&#39;", "body": "<p>I will try to explain the error and the solution. The solution should be:</p>\n\n<pre><code>allZero :: [Int] -&gt; Bool\nallZero [] = True\nallZero (x:xs) = (x == 0) &amp;&amp; (allZero xs)\n</code></pre>\n\n<p>Think of the two patterns. First, if there is no elements, all are 0, that has sense, that is the first pattern <code>[]</code>.\n In the second pattern you ask if the first is <code>0</code> and you say that value <code>&amp;&amp;</code> all the rest of the elements must be <code>0</code> (using recursion)</p>\n\n<p>In your example:</p>\n\n<pre><code>allZero :: [Int] -&gt; Bool\nallZero (0:_) = True --Wrong, here you are saying if it start with 0, True, no matter what is next, and that's not correct\nallZero (0:s) = 0 : allZero s -- this could be right along side with other patterns\nallZero (_:s) = False -- this is wrong by sure, you are saying if a list has at list one element, False\nallZero _ = False -- And this one has no sense among the others\n</code></pre>\n\n<p>You have a lot of patterns, and incorrect. You can change my first answer as the equivalent:</p>\n\n<pre><code>allZero :: [Int] -&gt; Bool\nallZero []     = True\nallZero (0:xs) = (allZero xs)\nallZero _      = False \n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 10709678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd5e4701f662b32082bebba0472c2b7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/10709678/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 58695447, "answer_count": 2, "score": 3, "last_activity_date": 1572905232, "creation_date": 1572876691, "last_edit_date": 1572891383, "question_id": 58695184, "link": "https://stackoverflow.com/questions/58695184/couldnt-match-expected-type-integer-with-actual-type-bool", "title": "Couldn&#39;t match expected type `[Integer]&#39; with actual type `Bool&#39;", "body": "<p>I'm trying to iterate recursive over the list and checking if all the values are equal 0,\nthe error im getting is:</p>\n\n<pre><code> * Couldn't match expected type `[Integer]' with actual type `Bool'\n    * In the second argument of `(:)', namely `allZero s'\n      In the expression: 0 : allZero s\n      In an equation for `allZero': allZero (0 : s) = 0 : allZero s\n</code></pre>\n\n<p>and my code is:</p>\n\n<pre><code>allZero :: [Int] -&gt; Bool\nallZero (0:_) = True\nallZero (0:s) = 0 : allZero s\nallZero (_:s) = False;\nallZero _ = False\n</code></pre>\n\n<p>I don't understand why im getting this error, in the line of <code>allZero (0:s) = 0 : allZero s</code> im giving it the correct parameter, a list 's'</p>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572861793, "post_id": 58690982, "comment_id": 103679651, "body": "What if you add <code>gtk2hs-buildtools &gt;=0.13.5.4 &amp;&amp; &lt;0.14</code> for example?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1572861814, "post_id": 58690982, "comment_id": 103679669, "body": "I think you need to specify some version constraint, similarly to the <code>base</code> line. E.g. <code>gtk2hs-buildtools &gt;= 0.13 &amp;&amp; &lt; 0.14</code>."}, {"owner": {"reputation": 1364, "user_id": 5105791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/54ffN.jpg?s=128&g=1", "display_name": "Saurabh kukade", "link": "https://stackoverflow.com/users/5105791/saurabh-kukade"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572861864, "post_id": 58690982, "comment_id": 103679706, "body": "Got this <code>In the dependencies for TicTacToe-0.1.0.0:     gtk2hs-buildtools must match &gt;=0.13.5.4 &amp;&amp; &lt;0.14, but the stack configuration has no specified                       version  (latest matching version is 0.13.5.4)</code>  @WillemVanOnsem"}], "answers": [{"tags": [], "owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "is_accepted": true, "score": 2, "last_activity_date": 1572882007, "creation_date": 1572882007, "answer_id": 58696650, "question_id": 58690982, "link": "https://stackoverflow.com/questions/58690982/getting-error-while-using-gtk2hs-buildtool-library-in-haskell-project-using-stac/58696650#58696650", "title": "Getting error while using gtk2hs-buildtool library in Haskell project using Stack", "body": "<p>If you are using <code>stack</code> tool you shouldn't touch the <code>&lt;packagename&gt;.cabal</code> file. <code>stack</code> is in charge to generate it from <code>package.yaml</code>. Despite of the fact that is a common practise to modify the <code>&lt;packagename&gt;.cabal</code>, development workflow will be easier if you don't.</p>\n\n<p>The files you are interested in (and the ones that <code>stack</code> tool uses) are the <code>stack.yaml</code> and <code>package.yaml</code>. </p>\n\n<p>In <code>stack.yaml</code> you should see an entry called <code>resolver: lts-XX.XX</code>. That means that your dependencies version are managed such that they match those in the given <code>lts</code> (a.k.a. <code>snapshot</code>). You can go to <a href=\"https://www.stackage.org/\" rel=\"nofollow noreferrer\">https://www.stackage.org/</a>, click on your <code>lts</code> version and search for the <code>gtk2hs-buildtools</code> package to get the right version for your project (example: <code>lts-12.26</code> uses <code>gtk2hs-buildtools-0.13.4.0</code>). In your <code>package.yaml</code>, in the <code>dependencies</code> section write the entry entry <code>- gtk2hs-buildtools</code></p>\n\n<p>From <code>lts-13.11</code> and above <code>gtk2hs-buildtools</code> is not available in stackage, so you need to add it as an extra-dep. in the <code>stack.yaml</code>, in the section <code>extra-dep</code> add the following entry <code>gtk2hs-buildtools-0.13.4.0</code> (or the version number you'd like to use). Then add in the <code>package.yaml</code> and entry <code>gtk2hs-buildtools</code>. It is necessary to add the entry in both files. Refer to stack docs o understand why.</p>\n\n<p>Just to ensure you can build your project, your files should something look like the following:</p>\n\n<p><strong>if using resolver above or equal to <code>13.11</code></strong></p>\n\n<p><code>stack.yaml</code></p>\n\n<pre><code>resolver: lts-13.11\nextra-deps: \n - gtk2hs-buildtools-0.13.4.0\n</code></pre>\n\n<p><code>package.yaml</code></p>\n\n<pre><code>dependencies:\n - base\n - gtk2hs-buildtools\n</code></pre>\n\n<p><strong>if using resolver below <code>13.11</code></strong></p>\n\n<p><code>stack.yaml</code></p>\n\n<pre><code>resolver: lts-12.26\nextra-deps:\n</code></pre>\n\n<p><code>package.yaml</code></p>\n\n<pre><code>dependencies:\n - base\n - gtk2hs-buildtools\n</code></pre>\n"}], "owner": {"reputation": 1364, "user_id": 5105791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/54ffN.jpg?s=128&g=1", "display_name": "Saurabh kukade", "link": "https://stackoverflow.com/users/5105791/saurabh-kukade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 58696650, "answer_count": 1, "score": 0, "last_activity_date": 1572882007, "creation_date": 1572861525, "last_edit_date": 1572861724, "question_id": 58690982, "link": "https://stackoverflow.com/questions/58690982/getting-error-while-using-gtk2hs-buildtool-library-in-haskell-project-using-stac", "title": "Getting error while using gtk2hs-buildtool library in Haskell project using Stack", "body": "<p>I am trying to add dependency of <code>gtk2hs-buildtool</code> to my Haskell project but following error while building stack.</p>\n\n<pre><code>In the dependencies for TicTacToe-0.1.0.0:\n    gtk2hs-buildtools needed, but the stack configuration has no specified version  (latest matching\n                      version is 0.13.5.4)\nneeded since TicTacToe is a build target.\n</code></pre>\n\n<p>TicTacToe.cabal file:</p>\n\n<pre><code>library\n  exposed-modules:\n      TicTacToeEngine\n  other-modules:\n      Paths_TicTacToe\n  hs-source-dirs:\n      src\n  build-depends:\n      base &gt;=4.7 &amp;&amp; &lt;5,\n      gtk2hs-buildtools\n  default-language: Haskell2010\n</code></pre>\n"}, {"tags": ["haskell", "syntax-error", "conditional-statements"], "comments": [{"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 1, "creation_date": 1572852412, "post_id": 58688706, "comment_id": 103675680, "body": "What do you expect that <code>if</code> expression to do?"}, {"owner": {"reputation": 23, "user_id": 10458176, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ucq5qKyQFR0/AAAAAAAAAAI/AAAAAAAALuk/AUGSCOtzFQk/photo.jpg?sz=128", "display_name": "Jordan Durci", "link": "https://stackoverflow.com/users/10458176/jordan-durci"}, "reply_to_user": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 0, "creation_date": 1572918270, "post_id": 58688706, "comment_id": 103702329, "body": "This if statement is just meant to be a simple way to get my feelers out into how Haskell conditional statements work.  It&#39;s not particularly meant to do anything other than work, in all honesty."}], "answers": [{"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1572854696, "post_id": 58688847, "comment_id": 103676505, "body": "this is not where the error is coming from, though."}, {"owner": {"reputation": 23, "user_id": 10458176, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ucq5qKyQFR0/AAAAAAAAAAI/AAAAAAAALuk/AUGSCOtzFQk/photo.jpg?sz=128", "display_name": "Jordan Durci", "link": "https://stackoverflow.com/users/10458176/jordan-durci"}, "edited": false, "score": 0, "creation_date": 1572918400, "post_id": 58688847, "comment_id": 103702350, "body": "This helped me to realize that some of my initial thoughts about how to go about this code segment were correct.  Thanks!"}], "tags": [], "owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "is_accepted": false, "score": 2, "last_activity_date": 1572852348, "creation_date": 1572852348, "answer_id": 58688847, "question_id": 58688706, "link": "https://stackoverflow.com/questions/58688706/how-do-i-fix-my-haskell-conditional-statement/58688847#58688847", "title": "How do I fix my Haskell conditional statement?", "body": "<p>You have declared <code>eql</code> to be a <code>Integer -&gt; Bool</code> which is a function that takes Integer and returns bool and then assigned it Integer value 10. Unlike dynamically typed languages like python you can't re-assign variables a value of different type.\nWhat you probably want is:</p>\n\n<pre><code>numberA ::Integer\nnumberB ::Integer\neql :: Bool\nnumberA = 10\nnumberB = 10\neql = numberA == numberB\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 3, "last_activity_date": 1572853453, "creation_date": 1572853453, "answer_id": 58689064, "question_id": 58688706, "link": "https://stackoverflow.com/questions/58688706/how-do-i-fix-my-haskell-conditional-statement/58689064#58689064", "title": "How do I fix my Haskell conditional statement?", "body": "<p>Let's slow down things a little bit, first of all, let's review the type of eq:</p>\n\n<pre><code>(==) :: Eq a =&gt; a -&gt; a -&gt; Bool\n</code></pre>\n\n<p>you want to compare two <code>Integer</code></p>\n\n<pre><code>numberB :: Integer\nnumberB = 10\neql :: Integer\neql = 10\n</code></pre>\n\n<p>and yes, one way s to do:</p>\n\n<pre><code>comparision = if eql == numberB\n              then True\n              else False\n</code></pre>\n\n<p>But by definition of <code>==</code> you can remove the <code>if</code>, is redundant, so:</p>\n\n<pre><code>comparisionShort = eql == numberB\n</code></pre>\n\n<p>and remember also, in Haskell you have to bind the values to something, you can't just write an <code>if</code> just like that.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 10458176, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ucq5qKyQFR0/AAAAAAAAAAI/AAAAAAAALuk/AUGSCOtzFQk/photo.jpg?sz=128", "display_name": "Jordan Durci", "link": "https://stackoverflow.com/users/10458176/jordan-durci"}, "edited": false, "score": 0, "creation_date": 1572918209, "post_id": 58689237, "comment_id": 103702318, "body": "This helped me to reformat my code quite a bit, fixing my main issue.  Thank you very much!"}], "tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": true, "score": 4, "last_activity_date": 1572874393, "last_edit_date": 1572874393, "creation_date": 1572854314, "answer_id": 58689237, "question_id": 58688706, "link": "https://stackoverflow.com/questions/58688706/how-do-i-fix-my-haskell-conditional-statement/58689237#58689237", "title": "How do I fix my Haskell conditional statement?", "body": "<p>Nothing wrong with your conditional <s>statement</s> expression, but to what definition does it belong?</p>\n\n<p>To decide that, Haskell uses <em>indentation</em>. Any code which is a part of some definition must be indented at least one space under it:</p>\n\n<pre><code>name =   -- value\n  if eql == numberB\n    then True\n    else False\n</code></pre>\n\n<p>But your <code>if ...</code> starts at the same column as the preceding definition, <code>eql = ...</code>.</p>\n\n<p>Thus it is a piece of code which does not belong to any definition, and that is the syntax error which you get (which talks about \"declarations\" which I guess is the official term for it). </p>\n\n<p>In the definition</p>\n\n<pre><code>eql = 10\n</code></pre>\n\n<p>the name is <code>eql</code> and the value is <code>10</code>. It wouldn't match the declared type,</p>\n\n<pre><code>eql :: Integer -&gt; Bool\n</code></pre>\n\n<p>but the syntax error aborts the compilation even before the types are checked.</p>\n"}], "owner": {"reputation": 23, "user_id": 10458176, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ucq5qKyQFR0/AAAAAAAAAAI/AAAAAAAALuk/AUGSCOtzFQk/photo.jpg?sz=128", "display_name": "Jordan Durci", "link": "https://stackoverflow.com/users/10458176/jordan-durci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 58689237, "answer_count": 3, "score": 2, "last_activity_date": 1572874393, "creation_date": 1572851523, "last_edit_date": 1572867668, "question_id": 58688706, "link": "https://stackoverflow.com/questions/58688706/how-do-i-fix-my-haskell-conditional-statement", "title": "How do I fix my Haskell conditional statement?", "body": "<p>I'm trying to make a simple conditional statement that checks if a value is equal to another value, then sets a boolean to either true or false, but I'm having some difficulties.</p>\n\n<p>So far, I've tried to reformat my text several different ways, none of which have worked, but I'm not finding much help in official documentation or from googling the issue.</p>\n\n<pre><code>import Data.List\n\nnumberB :: Integer\nnumberB = 10\neql :: Integer -&gt; Bool\neql = 10\nif eql == numberB\n  then True\n  else False\n</code></pre>\n\n<p>The error I'm currently getting says:</p>\n\n<pre><code>functions.hs:14:1: error:\n    Parse error: module header, import declaration\n    or top-level declaration expected.\n   |\n14 | if eql == numberB\n   | ^^^^^^^^^^^^^^^^^...\n</code></pre>\n\n<p>I'm not fully certain what it's looking for me to do here, as I can't find any effective import declarations.  I also don't think there's any modules I really need to use, either, as I'm not making a module here, and, as I mentioned before, there were no import statements I could find that would make this work.  I'm also not sure what a top-level declaration is, as I'm not that experienced in Haskell.  That said, I don't know what that would even do to fix this error.</p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1572851666, "post_id": 58688657, "comment_id": 103675429, "body": "Unless <code>Board</code> is a synonym for <code>Sequence</code>, your types don&#39;t agree."}, {"owner": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "edited": false, "score": 1, "creation_date": 1572851674, "post_id": 58688657, "comment_id": 103675431, "body": "<code>getBox s y x = [ (trimBoard c x) | c &lt;- (trimBoard s y)]</code> is rejected by ghc with a flood of errors which I dont understand. I THINK they are complaining that x is supposed to be an int, but has instead somehow become an [int], but I am unsure about that."}, {"owner": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "edited": false, "score": 0, "creation_date": 1572851742, "post_id": 58688657, "comment_id": 103675457, "body": "Board is [[int]], and sequence is [int]. The top two functions operate fine, on their own. Only the third fails."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1572851759, "post_id": 58688657, "comment_id": 103675465, "body": "Please edit your question and add the errors.  Also add the definitions of the <code>Board</code> and <code>Sequence</code> types.  This is for future readers and searchability."}, {"owner": {"reputation": 2194, "user_id": 7940614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697c574cc5dfb3a4d5e4aff46a1721a?s=128&d=identicon&r=PG&f=1", "display_name": "assembly.jc", "link": "https://stackoverflow.com/users/7940614/assembly-jc"}, "edited": false, "score": 2, "creation_date": 1572852345, "post_id": 58688657, "comment_id": 103675663, "body": "<code>c</code> in expression <code>c &lt;- (trimBoard s y)</code> has type <code>[Int]</code>, but the first argument of <code>trimBoard</code> need type <code>Board</code>, i.e. <code>[[Int]]</code>, it is not match. In addition, <code>getBox</code> finally has type <code>[Board]</code> not [Sequence]`."}, {"owner": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "reply_to_user": {"reputation": 2194, "user_id": 7940614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697c574cc5dfb3a4d5e4aff46a1721a?s=128&d=identicon&r=PG&f=1", "display_name": "assembly.jc", "link": "https://stackoverflow.com/users/7940614/assembly-jc"}, "edited": false, "score": 0, "creation_date": 1572852553, "post_id": 58688657, "comment_id": 103675734, "body": "Odd. Why? trimBoard :: Board -&gt; Int -&gt; Board, produces a board. why doesnt c &lt;- trimBoard produce a board? @assembly.jc"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1572852640, "post_id": 58688657, "comment_id": 103675764, "body": "@RNPF, list comprehension <code>[ ... | c &lt;- trimBoard... ]</code> means <i>for each element</i> <code>c</code> of the list <code>trimBoard</code>.  So <code>c</code> has the <i>element type</i> of whatever list you are binding it to."}], "answers": [{"tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": true, "score": 5, "last_activity_date": 1572852572, "creation_date": 1572852572, "answer_id": 58688902, "question_id": 58688657, "link": "https://stackoverflow.com/questions/58688657/haskell-using-function-with-list-comprehensions/58688902#58688902", "title": "Haskell, using function with list comprehensions", "body": "<p>It seems you have written all your functional code correctly but have not correctly specified your type signatures.  <code>trimBoard</code> expects a <code>Board</code> as its first argument, but you have passed it <code>c</code> which is a single row.</p>\n\n<p>What you may be complaining about is that <code>trimBoard</code> ought to work perfectly well if you pass it a single row instead of a complete board.  And indeed it does, you just need to learn how to say so:</p>\n\n<pre><code>trimBoard :: [a] -&gt; Int -&gt; [a]\n</code></pre>\n\n<p>That it, <code>trimBoard</code> takes a list of <em>any</em> type, and an <code>Int</code>, and returns a list of that same type.  Now you are not restricted to passing lists of lists of <code>Int</code>, and everything works fine.</p>\n\n<p>You could also have omitted the type signature of <code>trimBoard</code> and Haskell would have inferred this one, which is the most general one.  (But it is good to write type signatures and learn how to do so -- in fact, with practice, this becomes an invaluable tool that I miss dearly in other languages).</p>\n"}], "owner": {"reputation": 328, "user_id": 5831606, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b65000a9d48a3451c1d7a03eb8c3dcd?s=128&d=identicon&r=PG&f=1", "display_name": "RNPF", "link": "https://stackoverflow.com/users/5831606/rnpf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58688902, "answer_count": 1, "score": 0, "last_activity_date": 1572852572, "creation_date": 1572851258, "last_edit_date": 1572852144, "question_id": 58688657, "link": "https://stackoverflow.com/questions/58688657/haskell-using-function-with-list-comprehensions", "title": "Haskell, using function with list comprehensions", "body": "<p>I am trying to accomplish the following:</p>\n\n<pre><code>slice :: Int -&gt; Int -&gt; [a] -&gt; [a]\nslice from to xs = take (to - from + 1) (drop from xs)\n\ntrimBoard :: Board -&gt; Int -&gt; Board\ntrimBoard s y = slice ((y*3)) (((y+1)*3)-1) s\n\ngetBox :: Board -&gt; Int -&gt; Int -&gt; [Sequence]\ngetBox s y x = [ (trimBoard c x) | c &lt;- (trimBoard s y)]\n</code></pre>\n\n<p>Specifically, I'm trying to run a function, take the result <code>[[int]]</code>, then map another function onto that result. Which haskell appearantly abhors, and I need to use some combination of \"lambda functions\" and other wizardry I cant read or comprehend at all to get this chugging along.</p>\n\n<p>Is there any simple way to do this that wont require a 7 month course in mathematical function syntax?</p>\n\n<p>As mentioned above, the result, board, is [[int]], and sequence is simply [int]. </p>\n\n<p>The errors it produces are</p>\n\n<pre><code>sudoku.hs:139:19: error:\n    \u2022 Couldn't match type \u2018[Int]\u2019 with \u2018Int\u2019\n      Expected type: Sequence\n        Actual type: Board\n    \u2022 In the expression: (trimBoard c x)\n      In the expression: [(trimBoard c x) | c &lt;- (trimBoard s y)]\n      In an equation for \u2018getBox\u2019:\n          getBox s y x = [(trimBoard c x) | c &lt;- (trimBoard s y)]\n\nsudoku.hs:139:29: error:\n    \u2022 Couldn't match type \u2018Int\u2019 with \u2018[Int]\u2019\n      Expected type: Board\n        Actual type: Sequence\n    \u2022 In the first argument of \u2018trimBoard\u2019, namely \u2018c\u2019\n      In the expression: (trimBoard c x)\n      In the expression: [(trimBoard c x) | c &lt;- (trimBoard s y)] Failed, modules loaded: none.\n</code></pre>\n"}, {"tags": ["haskell", "types", "type-inference", "composition", "function-composition"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 6, "creation_date": 1572850204, "post_id": 58687737, "comment_id": 103674986, "body": "I think you wanted to say &quot;type of composition&quot; rather than &quot;composition of types&quot;."}, {"owner": {"reputation": 2418, "user_id": 1232832, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c492983af89b49d44250c79579a2641?s=128&d=identicon&r=PG", "display_name": "Shou Ya", "link": "https://stackoverflow.com/users/1232832/shou-ya"}, "edited": false, "score": 1, "creation_date": 1572861322, "post_id": 58687737, "comment_id": 103679424, "body": "Not totally related to the question, but here&#39;s a recommended reading: <a href=\"http://adit.io/posts/2013-07-22-lenses-in-pictures.html\" rel=\"nofollow noreferrer\">adit.io/posts/2013-07-22-lenses-in-pictures.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 5817767, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/209584382725014/picture?type=large", "display_name": "Pawan Kumar", "link": "https://stackoverflow.com/users/5817767/pawan-kumar"}, "edited": false, "score": 1, "creation_date": 1572865256, "post_id": 58691152, "comment_id": 103681374, "body": "Can you please derive the composed type for this please. f = undefined :: (x -&gt; y -&gt; w -&gt; z -&gt; a) -&gt; g x -&gt; g y. I am bit confused for this example."}, {"owner": {"reputation": 1263, "user_id": 5817767, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/209584382725014/picture?type=large", "display_name": "Pawan Kumar", "link": "https://stackoverflow.com/users/5817767/pawan-kumar"}, "edited": false, "score": 0, "creation_date": 1572867517, "post_id": 58691152, "comment_id": 103682372, "body": "Thanks I will try the same kind of derivation for some more types &amp; make me feel comfortable and I will approve the answer."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 1263, "user_id": 5817767, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/209584382725014/picture?type=large", "display_name": "Pawan Kumar", "link": "https://stackoverflow.com/users/5817767/pawan-kumar"}, "edited": false, "score": 0, "creation_date": 1572867609, "post_id": 58691152, "comment_id": 103682409, "body": "main thing is, don&#39;t panic, i.e. work slowly and carefully; and carefully rename the type variables for each new reference to the same object."}], "tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": true, "score": 3, "last_activity_date": 1573110968, "last_edit_date": 1573110968, "creation_date": 1572862125, "answer_id": 58691152, "question_id": 58687737, "link": "https://stackoverflow.com/questions/58687737/how-to-derive-type-of-composition-in-haskell/58691152#58691152", "title": "How to derive type of composition in Haskell", "body": "<p>Type derivation is a purely <a href=\"https://stackoverflow.com/search?q=user%3A849891%20mechanical\">mechanical</a> process.</p>\n\n<pre><code>(.)  ::              (b          -&gt; c             ) -&gt; (a          -&gt; b             ) -&gt; \n                                                       (a                             -&gt; c)\nfmap\u2082 :: Functor f =&gt; (t3 -&gt; t4) -&gt; (f t3 -&gt; f t4)\nfmap\u2081 :: Functor g =&gt;                                  ((t1 -&gt; t2) -&gt; (g t1 -&gt; g t2))\n-------------------------------------------------------------------------------------------\n                                                   a ~ (t1 -&gt; t2)  b ~ (g t1 -&gt; g t2)\n                 b ~ (t3 -&gt; t4)  c ~ (f t3 -&gt; f t4)                b ~ (t3   -&gt; t4  )\n-------------------------------------------------------------------------------------------\nfmap\u2082 . fmap\u2081 :: (Functor f, Functor g) \n              =&gt;  a          -&gt;  c\n           ~      (t1 -&gt; t2) -&gt;  (f t3     -&gt; f t4    )\n           ~      (t1 -&gt; t2) -&gt;  (f (g t1) -&gt; f (g t2))\n</code></pre>\n\n<p>This is much nicer with <code>(.)</code>'s cousin, <code>(&gt;&gt;&gt;) fmap\u2081 fmap\u2082 = fmap\u2082 . fmap\u2081</code>:</p>\n\n<pre><code>(&gt;&gt;&gt;)  ::            (a           -&gt; b                               ) -&gt; \n                     (               b              -&gt; c             ) -&gt; \n                     (a                             -&gt; c             )\nfmap\u2081 :: Functor g =&gt;  (t1 -&gt; t2) -&gt; (g t1 -&gt; g t2)\nfmap\u2082 :: Functor f =&gt;                (t3   -&gt; t4  ) -&gt; (f t3 -&gt; f t4) \n------------------------------------------------------------------------------\n                  a ~ (t1 -&gt; t2)   b ~ (g t1 -&gt; g t2)\n                                   b ~ (t3   -&gt; t4  )  c ~ (f t3 -&gt; f t4)\n------------------------------------------------------------------------------\nfmap\u2081 &gt;&gt;&gt; fmap\u2082 :: (Functor f, Functor g) \n              =&gt;    a             -&gt;                   c\n           ~          (t1 -&gt; t2)  -&gt;                   (f t3     -&gt; f t4    )\n           ~          (t1 -&gt; t2)  -&gt;                   (f (g t1) -&gt; f (g t2))\n</code></pre>\n\n<hr>\n\n<p>To your specific problem:</p>\n\n<pre><code>f = undefined :: (x -&gt; y -&gt; w -&gt; z -&gt; a) -&gt; g x -&gt; g y\n\nf\u2082 . f\u2081 = f\u2081 &gt;&gt;&gt; f\u2082 :: \n (x -&gt; y -&gt; w -&gt; z -&gt; a) -&gt; ((-&gt;) (g x) (g       y               ))\n                            ((-&gt;) x2    ((-&gt;) y2 (w2 -&gt; z2 -&gt; a2))) -&gt; (g2 x2 -&gt; g2 y2)\n ---------------------------------------------------------------------------------------\n                       x2 ~ g x     g ~ ((-&gt;) y2)    y ~ (w2 -&gt; z2 -&gt; a2)\n ---------------------------------------------------------------------------------------\n (x -&gt; y                -&gt; w -&gt; z -&gt; a)                    -&gt;  ( g2 x2        -&gt; g2 y2)  ~\n (x -&gt; y                -&gt; w -&gt; z -&gt; a)                    -&gt;  ( g2 (g     x) -&gt; g2 y2)  ~\n (x -&gt; (w2 -&gt; z2 -&gt; a2) -&gt; w -&gt; z -&gt; a)                    -&gt;  ( g2 (y2 -&gt; x) -&gt; g2 y2)\n</code></pre>\n\n<p>which is what you got from GHCi, up to the renaming of variables.</p>\n"}], "owner": {"reputation": 1263, "user_id": 5817767, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/209584382725014/picture?type=large", "display_name": "Pawan Kumar", "link": "https://stackoverflow.com/users/5817767/pawan-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 1, "accepted_answer_id": 58691152, "answer_count": 1, "score": 2, "last_activity_date": 1573110968, "creation_date": 1572845883, "last_edit_date": 1572867280, "question_id": 58687737, "link": "https://stackoverflow.com/questions/58687737/how-to-derive-type-of-composition-in-haskell", "title": "How to derive type of composition in Haskell", "body": "<p>I am new to Haskell. \nI am trying to understand how composition of types work.</p>\n\n<pre><code>(.) :: (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c\n\nfmap :: Functor f =&gt; (x -&gt; y) -&gt; f x -&gt; f y\nfmap . fmap :: (Functor f1, Functor f2) =&gt; (x -&gt; y) -&gt; f1 (f2 x) -&gt; f1 (f2 y)\n</code></pre>\n\n<p>How I understood the above type information is as below.</p>\n\n<pre><code>\n1. (x -&gt; y) -&gt; f1 x -&gt; f1 y  -- First fmap\n      -&gt; (x' -&gt; y') -&gt; f2 x' -&gt; f2 y'  -- Second fmap\n2. Compare the (1) with (.) type signature then we get\n     In (b -&gt; c)\n        b = (x -&gt; y)\n        c = f1 x -&gt; f1 y\n     In (a -&gt; b)\n        a = (x' -&gt; y')\n        b = f2 x' -&gt; f2 y'\n3. Now the result is a -&gt; c but before that b in (b -&gt; c) should be b in (a -&gt; b)\n     (x -&gt; y) === f2 x' -&gt; f2 y'\n     That means x = f2 x' &amp; y = f2 y'\n4. Result is a -&gt; c\n     (x' -&gt; y') -&gt; f1 x -&gt; f1 y\n     Substituting (3) results here\n     (x' -&gt; y') -&gt; f1 (f2 x') -&gt; f1 (f2 y')\n     This is Alpha equivalent to  (x -&gt; y) -&gt; f1 (f2 x) -&gt; f1 (f2 y)\n\n</code></pre>\n\n<p>To test my understanding I tried with various data types and I am success in few. \nBelow is the type signature I can't figure out. </p>\n\n<pre><code>\n f = undefined :: (x -&gt; y -&gt; w -&gt; z -&gt; a) -&gt; g x -&gt; g y\n -- Type of f . f in prelude\n f . f :: (x -&gt; (w1 -&gt; z1 -&gt; a1) -&gt; w2 -&gt; z2 -&gt; a2) -&gt; g (y -&gt; x) -&gt; g y\n\n</code></pre>\n\n<p>My approach to the above one</p>\n\n<pre><code>1. (x -&gt; y -&gt; w -&gt; z -&gt; a) -&gt; g x -&gt; g y\n     -&gt; (x' -&gt; y' -&gt; w' -&gt; z' -&gt; a') -&gt; g' x' -&gt; g' y'\n2. Comparing with (.) then \n     In (b -&gt; c)\n        b = (x -&gt; y -&gt; w -&gt; z -&gt; a)\n        c = g x -&gt; g y\n     In (a -&gt; b)\n        a = (x' -&gt; y' -&gt; w' -&gt; z' -&gt; a')\n        b = g' x' -&gt; g' y'\n3. Comparing b from (b -&gt; c) &amp; (a -&gt; b)\n     (x -&gt; y -&gt; w -&gt; z -&gt; a) === g' x' -&gt; g' y'\n     That means x = g' x'  &amp;  y -&gt; w -&gt; z -&gt; a = g' y'\n4. Result is a -&gt; c\n     (x' -&gt; y' -&gt; w' -&gt; z' -&gt; a') -&gt; g x -&gt; g y\n     Now there is no direct y I can substitute in g y\n</code></pre>\n\n<p>My approach of seeing the composition is not working out for me.</p>\n"}, {"tags": ["haskell", "lambda-calculus", "church-encoding"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 12224496, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v0vMk-Q_SQ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfllaEQCakXJL96tSYRwLRUhfE1qQ/photo.jpg?sz=128", "display_name": "Budz Owein", "link": "https://stackoverflow.com/users/12224496/budz-owein"}, "edited": false, "score": 0, "creation_date": 1572846951, "post_id": 58687736, "comment_id": 103674025, "body": "Thanks you, that makes sense! I only had to switch s to (Var s) for it to work because I define variables as Strings, so the equality does not work without this change. If I may ask, what the second line indicate, I understand that you are adding 1 to the base case, but the syntax using &lt;$&gt; is throwing me off."}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "reply_to_user": {"reputation": 35, "user_id": 12224496, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v0vMk-Q_SQ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfllaEQCakXJL96tSYRwLRUhfE1qQ/photo.jpg?sz=128", "display_name": "Budz Owein", "link": "https://stackoverflow.com/users/12224496/budz-owein"}, "edited": false, "score": 0, "creation_date": 1572847992, "post_id": 58687736, "comment_id": 103674352, "body": "2. Sorry I missed the nested <code>Var</code> there. I have updated the answer."}], "tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 3, "last_activity_date": 1572847948, "last_edit_date": 1572847948, "creation_date": 1572845880, "answer_id": 58687736, "question_id": 58687538, "link": "https://stackoverflow.com/questions/58687538/converting-from-church-encoding-to-numerals/58687736#58687736", "title": "Converting from Church Encoding to Numerals", "body": "<p>You should match on the outer <code>(Lam \"s\" (Lam \"z\" ))</code>, but the inner chain of <code>App</code>s should be parsed recursively, mirroring the way it was constructed:</p>\n\n<pre><code>fromNumeral (Lam s (Lam z apps)) = go apps\n    where\n        go (Var x) | x == z = Just 0\n        go (App (Var f) e) | f == s = (+ 1) &lt;$&gt; go e\n        go _ = Nothing\n\nfromNumeral _ = Nothing\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 12224496, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v0vMk-Q_SQ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfllaEQCakXJL96tSYRwLRUhfE1qQ/photo.jpg?sz=128", "display_name": "Budz Owein", "link": "https://stackoverflow.com/users/12224496/budz-owein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 58687736, "answer_count": 1, "score": 2, "last_activity_date": 1572847948, "creation_date": 1572844549, "question_id": 58687538, "link": "https://stackoverflow.com/questions/58687538/converting-from-church-encoding-to-numerals", "title": "Converting from Church Encoding to Numerals", "body": "<p>I am trying to convert Church Encoding to numerals. I have defined my own Lambda definition as follows:</p>\n\n<pre><code>type Variable = String\n\ndata Lambda = Lam Variable Lambda\n            | App Lambda Lambda\n            | Var Variable\n            deriving (Eq, Show)\n</code></pre>\n\n<p>I have already written a conversion of numerals to church encoding and it works as I expect it to, here's how I defined it:</p>\n\n<pre><code>toNumeral :: Integer -&gt; Lambda\ntoNumeral n = Lam \"s\" (Lam \"z\" (wrapWithAppS n (Var \"z\")))\n  where\n    wrapWithAppS :: Integer -&gt; Lambda -&gt; Lambda\n    wrapWithAppS i e\n        | i == 0 = e\n        | otherwise = wrapWithAppS (i-1) (App (Var \"s\") e)\n</code></pre>\n\n<p>I ran my own tests and here's the outputs from the terminal when testing for 0, 1, and 2:</p>\n\n<pre><code>*Church&gt; toNumeral 0\nLam \"s\" (Lam \"z\" (Var \"z\"))\n*Church&gt; toNumeral 1\nLam \"s\" (Lam \"z\" (App (Var \"s\") (Var \"z\")))\n*Church&gt; toNumeral 2\nLam \"s\" (Lam \"z\" (App (Var \"s\") (App (Var \"s\") (Var \"z\"))))\n</code></pre>\n\n<p>Now I am trying to do the opposite and I just cannot wrap my head around the arguments that need to be passed. Here's what I have:</p>\n\n<pre><code>fromNumeral :: Lambda -&gt; Maybe Integer\nfromNumeral  (Lam s (Lam z (App e (Var x))))\n    | 0 == x = Just 0\n    | ...\n</code></pre>\n\n<p>I tried replacing <code>(App e (Var x))</code> with <code>(Var x)</code> but I get this error for both when I try to test my base case of converting church encoding of 0 to Just 0:  </p>\n\n<pre><code>*** Exception: Church.hs:(166,1)-(167,23): Non-exhaustive patterns in function fromNumeral\n</code></pre>\n\n<p>The way I am understanding the lambda encoding for the 3 numbers is this way:</p>\n\n<blockquote>\n  <p>0: \\s. \\z. z</p>\n  \n  <p>1: \\s. \\z. s z</p>\n  \n  <p>2: \\s. \\z. s (s z)</p>\n</blockquote>\n\n<p>So I assume my logic is correct, but I am having a difficult time figuring out how the reverse conversion would be. I am fairly new to Haskell so any help with explaining what I could be doing wrong is greatly appreciated.</p>\n"}, {"tags": ["list", "haskell", "filter", "functional-programming"], "answers": [{"comments": [{"owner": {"reputation": 492, "user_id": 4170988, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-AOOLG8v7KNM/AAAAAAAAAAI/AAAAAAAAIJA/BO3ac6ZxzyM/photo.jpg?sz=128", "display_name": "Frederick &#193;lvarez", "link": "https://stackoverflow.com/users/4170988/frederick-%c3%81lvarez"}, "edited": false, "score": 0, "creation_date": 1572847691, "post_id": 58687764, "comment_id": 103674278, "body": "I was a bit lost with the filters, I thought I had to use that combined with the fold to iterate over two elements at a time, I&#39;m still in the imperative world, thanks a lot, I will have to study a bit more to understand this example and the (x:y:xs) notation :)"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 492, "user_id": 4170988, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-AOOLG8v7KNM/AAAAAAAAAAI/AAAAAAAAIJA/BO3ac6ZxzyM/photo.jpg?sz=128", "display_name": "Frederick &#193;lvarez", "link": "https://stackoverflow.com/users/4170988/frederick-%c3%81lvarez"}, "edited": false, "score": 0, "creation_date": 1572854928, "post_id": 58687764, "comment_id": 103676589, "body": "@Frederick&#193;lvarez I use this pattern matching when I need to go throw the list consuming two elements each time, you can also read a little more about fold1, sometimes is useful too"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 492, "user_id": 4170988, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-AOOLG8v7KNM/AAAAAAAAAAI/AAAAAAAAIJA/BO3ac6ZxzyM/photo.jpg?sz=128", "display_name": "Frederick &#193;lvarez", "link": "https://stackoverflow.com/users/4170988/frederick-%c3%81lvarez"}, "edited": false, "score": 0, "creation_date": 1572869405, "post_id": 58687764, "comment_id": 103683267, "body": "@Frederick&#193;lvarez <code>let xs = [1, 2, 5, 6, 3] in [ y | (x,y) &lt;- zip xs (drop 1 xs), even x]</code> is also a possibility.  I see now that another answer already uses the <code>zip</code> function, but with list comprehensions the code can be clearer (although you did ask for <code>filter</code>)."}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 3, "last_activity_date": 1572846056, "creation_date": 1572846056, "answer_id": 58687764, "question_id": 58687161, "link": "https://stackoverflow.com/questions/58687161/how-to-filter-list-elements-in-haskell-based-on-previous-value-in-the-list/58687764#58687764", "title": "How to filter list elements in Haskell based on previous value in the list?", "body": "<blockquote>\n  <p>Edit</p>\n</blockquote>\n\n<p>It should be:</p>\n\n<pre><code>myFunction []       =  []\nmyFunction [x]      =  []\nmyFunction [x,y]    =  if (x `mod` 2) == 0 then [y] else []\nmyFunction (x:y:xs) =  if (x `mod` 2) == 0 \n                      then y : (myFunction xs)\n                      else myFunction (y:xs)\n</code></pre>\n\n<p>because for the input:</p>\n\n<pre><code>myFuntion [1, 2, 5, 6, 3]\n</code></pre>\n\n<p>the correct output should be:</p>\n\n<pre><code>[5,3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "is_accepted": false, "score": 2, "last_activity_date": 1572863236, "creation_date": 1572863236, "answer_id": 58691485, "question_id": 58687161, "link": "https://stackoverflow.com/questions/58687161/how-to-filter-list-elements-in-haskell-based-on-previous-value-in-the-list/58691485#58691485", "title": "How to filter list elements in Haskell based on previous value in the list?", "body": "<p>If you prefer to use library functions, there is a known trick for this sort of situations, which consists in zip'ing the input with its own tail, that is the initial list minus its first element.</p>\n\n<pre><code> \u03bb&gt; \n \u03bb&gt; inls = [1, 2, 5, 6, 3]\n \u03bb&gt; \n \u03bb&gt; let pairs = zip (tail inls) inls\n \u03bb&gt; pairs\n [(2,1),(5,2),(6,5),(3,6)]\n \u03bb&gt; \n</code></pre>\n\n<p>and the resulting pair list is then an easy target for <code>map</code> and <code>filter</code>.\nAs in:</p>\n\n<pre><code>\u03bb&gt; let myFunction ls = let pairs = zip (tail ls) ls  in  map fst $ filter (even . snd) pairs\n\u03bb&gt; \n\u03bb&gt; ls\n [1,2,5,6,3]\n\u03bb&gt; \n\u03bb&gt; myFunction ls\n[5,3]\n\u03bb&gt; \n</code></pre>\n"}], "owner": {"reputation": 492, "user_id": 4170988, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-AOOLG8v7KNM/AAAAAAAAAAI/AAAAAAAAIJA/BO3ac6ZxzyM/photo.jpg?sz=128", "display_name": "Frederick &#193;lvarez", "link": "https://stackoverflow.com/users/4170988/frederick-%c3%81lvarez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 58687764, "answer_count": 2, "score": 2, "last_activity_date": 1572869163, "creation_date": 1572841357, "last_edit_date": 1572869163, "question_id": 58687161, "link": "https://stackoverflow.com/questions/58687161/how-to-filter-list-elements-in-haskell-based-on-previous-value-in-the-list", "title": "How to filter list elements in Haskell based on previous value in the list?", "body": "<p>I'm working on creating a function in Haskell that filters the numbers of a list on a condition based on the previous element in the list.</p>\n\n<p>Example</p>\n\n<p>the previous number is a multiple of 2</p>\n\n<pre><code>myFunction [1, 2, 5, 6, 3]\n# expected output:\n[5,3]\n</code></pre>\n\n<p>I know how to apply <code>filter</code> but so far I have seen that the filters take only one argument at a time.</p>\n\n<p>I tried with <code>scanl1</code>, <code>foldl1</code>, and <code>map</code> but I'm new to Haskell and I have not been able to do so; any clue?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1572834685, "post_id": 58686433, "comment_id": 103671860, "body": "That&#39;s not the corresponding code. <code>mappend</code> comes from the <code>Monoid</code> typeclass, so the corresponding code should include it, rather than just <code>Semigroup</code>."}, {"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 1, "creation_date": 1572834709, "post_id": 58686433, "comment_id": 103671863, "body": "Are you sure that&#39;s the code responsible? That error message seems much more likely to be associated with an empty <code>Monoid</code> instance later in the code."}, {"owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "edited": false, "score": 0, "creation_date": 1572835727, "post_id": 58686433, "comment_id": 103672022, "body": "Agree! I found the solution. <code>mappend</code> needs to be added."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572860427, "post_id": 58686433, "comment_id": 103678946, "body": "@DanielStephens: normally <code>mappend</code> uses as default <code>(&lt;&gt;)</code>: <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/src/GHC.Base.html#Monoid\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.12.0.0/docs/src/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11487, "user_id": 1308058, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2be2ab74793559ea1c1dbdf55ccdf90b?s=128&d=identicon&r=PG", "display_name": "phadej", "link": "https://stackoverflow.com/users/1308058/phadej"}, "is_accepted": true, "score": 4, "last_activity_date": 1572865959, "creation_date": 1572865959, "answer_id": 58692253, "question_id": 58686433, "link": "https://stackoverflow.com/questions/58686433/mappend-missing-in-haskell-instance/58692253#58692253", "title": "Mappend missing in Haskell instance", "body": "<p>The warning comes from the definition of a <code>Monoid</code> instance, probably somewhere later in the code, which you left (half) empty.</p>\n\n<p>You probably have something like</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>instance Monoid Macros where\n    mempty = Macros [] [] []\n</code></pre>\n\n<p>However, since <code>mappend</code> is a member of <code>Monoid</code>, you should write</p>\n\n<pre><code>instance Monoid Macros where\n    mempty = Macros [] [] []\n    mappend = (&lt;&gt;)\n</code></pre>\n\n<p>Note: since base-4.11 (GHC-8.2) the <code>mappend</code> can be omitted, as there is default definition in the type-class</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>class Semigroup =&gt; Monoid m where\n    -- | Identity of 'mappend'\n    mempty  :: a\n\n    -- | An associative operation\n    --\n    -- __NOTE__: This method is redundant and has the default\n    -- implementation @'mappend' = '(&lt;&gt;)'@ since /base-4.11.0.0/.\n    mappend :: a -&gt; a -&gt; a\n    mappend = (&lt;&gt;)\n</code></pre>\n\n<p><a href=\"https://hackage.haskell.org/package/base-4.11.0.0/docs/src/GHC.Base.html#mappend\" rel=\"nofollow noreferrer\">https://hackage.haskell.org/package/base-4.11.0.0/docs/src/GHC.Base.html#mappend</a></p>\n\n<p>Leaving <code>mappend = (&lt;&gt;)</code> in the instance is fine, if you need to support multiple GHC versions.</p>\n"}], "owner": {"reputation": 446, "user_id": 10050942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896d0e87b08f04037bec7a1b3818b932?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Stephens", "link": "https://stackoverflow.com/users/10050942/daniel-stephens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 58692253, "answer_count": 1, "score": -1, "last_activity_date": 1572865959, "creation_date": 1572833960, "question_id": 58686433, "link": "https://stackoverflow.com/questions/58686433/mappend-missing-in-haskell-instance", "title": "Mappend missing in Haskell instance", "body": "<p>I am compiling a Haskell project and get a message I have not seen before. Does anyone know what exactly is missing?</p>\n\n<pre><code>No instance nor default method for class operation mappend\n</code></pre>\n\n<p>The corresponding code is:</p>\n\n<pre><code>instance S.Semigroup Macros where \n    x &lt;&gt; y = Macros\n        (commands x ++ commands y)\n        (environments x ++ environments y)\n        (counters x ++ counters y)\n</code></pre>\n\n<p>The function <code>mappend</code> seems to be an associate operator but I am not familiar yet with Haskell. </p>\n"}, {"tags": ["html", "haskell", "bootstrap-4", "haskell-lucid"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1572822379, "post_id": 58685370, "comment_id": 103669937, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7828072/how-does-haskell-printf-work\">How does Haskell printf work?</a>"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1572822389, "post_id": 58685370, "comment_id": 103669939, "body": "Different function, but exact same magic."}, {"owner": {"reputation": 1502, "user_id": 2545980, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FaKkG.jpg?s=128&g=1", "display_name": "Alojzy Leszcz", "link": "https://stackoverflow.com/users/2545980/alojzy-leszcz"}, "reply_to_user": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1572824248, "post_id": 58685370, "comment_id": 103670205, "body": "Fair enough. Sorry, wasn&#39;t aware of the fact :-). I&#39;ll review the article you posted and then will close my question as a duplicate."}], "answers": [{"tags": [], "owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "is_accepted": true, "score": 4, "last_activity_date": 1572853121, "last_edit_date": 1572853121, "creation_date": 1572851347, "answer_id": 58688679, "question_id": 58685370, "link": "https://stackoverflow.com/questions/58685370/the-true-meaning-of-lucids-term-type/58688679#58688679", "title": "The true meaning of Lucid&#39;s &quot;Term&quot; type", "body": "<p>The <code>Term</code> typeclass is very convenient\u2014we don't need different <code>term</code> functions for creating elements with or without attributes\u2014but can be a bit difficult to understand.</p>\n\n<p>The definition of <a href=\"http://hackage.haskell.org/package/lucid-2.9.12/docs/Lucid-Html5.html#v:button_\" rel=\"nofollow noreferrer\"><code>button_</code></a> is</p>\n\n<pre><code>-- | @button@ element\nbutton_ :: Term arg result =&gt; arg -&gt; result\nbutton_ = term \"button\"\n</code></pre>\n\n<p><a href=\"http://hackage.haskell.org/package/lucid-2.9.12/docs/Lucid.html#v:term\" rel=\"nofollow noreferrer\"><code>term</code></a> is a method of the <a href=\"http://hackage.haskell.org/package/lucid-2.9.12/docs/Lucid.html#t:Term\" rel=\"nofollow noreferrer\"><code>Term</code></a> typeclass, and has type:</p>\n\n<pre><code>term :: Text -&gt; arg -&gt; result   \n</code></pre>\n\n<p>That is: you give it the name of the element, some argument whose type depends on the particular instance, and it returns some result whose type depends on the particular instance. But what instances are available? There are three:</p>\n\n<pre><code>Term Text Attribute\n-- here, term :: Text -&gt; Text -&gt; Attribute\n</code></pre>\n\n<p>This one is for creating attributes, not elements.</p>\n\n<pre><code>Applicative m =&gt; Term (HtmlT m a) (HtmlT m a)\n-- here, term :: Text -&gt; HtmlT m a -&gt; HtmlT m a\n</code></pre>\n\n<p>This one is for creating elements without attributes. The <code>arg</code> we pass as argument to <code>term</code> is some piece of html representing the children, and we get another piece of html in return.</p>\n\n<pre><code>(Applicative m, f ~ HtmlT m a) =&gt; Term [Attribute] (f -&gt; HtmlT m a)\n-- here, term :: Text -&gt; [Attribute] -&gt; HtmlT m a -&gt; HtmlT m a\n</code></pre>\n\n<p>This one is the most confusing, and the one that is being used in your code. Here, <code>arg</code> is a list of <a href=\"http://hackage.haskell.org/package/lucid-2.9.12/docs/Lucid.html#t:Attribute\" rel=\"nofollow noreferrer\"><code>Attribute</code></a> values. That much is clear. But <code>result</code> is the type of a function! After passing the attributes, we are left with <em>another</em> function <code>HtmlT m a</code> -> <code>HtmlT m a</code> which allows us to supply the contents of the button (\"Primary\" in your case).</p>\n\n<p>The <code>f ~ HtmlT m a</code> is another wrinkle that isn't really relevant for this answer. It simply says that <code>f</code> is equal to <code>HtmlT m a</code>. Why not put it directly then? Well, in certain cases it can help <a href=\"https://chrisdone.com/posts/haskell-constraint-trick/\" rel=\"nofollow noreferrer\">drive type inference</a> in desirable ways.</p>\n"}], "owner": {"reputation": 1502, "user_id": 2545980, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FaKkG.jpg?s=128&g=1", "display_name": "Alojzy Leszcz", "link": "https://stackoverflow.com/users/2545980/alojzy-leszcz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58688679, "answer_count": 1, "score": 2, "last_activity_date": 1572853121, "creation_date": 1572821769, "question_id": 58685370, "link": "https://stackoverflow.com/questions/58685370/the-true-meaning-of-lucids-term-type", "title": "The true meaning of Lucid&#39;s &quot;Term&quot; type", "body": "<p>I've been playing with Haskell, trying to create a very simple website using Servant and Lucid. At the moment I reached the stage \"My code works, I have no idea why\". \nI tried creating Bootstrap button. According the the doc, it should be defined as:</p>\n\n<pre><code>&lt;button type=\"button\" class=\"btn btn-primary\"&gt;Primary&lt;/button&gt;\n</code></pre>\n\n<p>So I found Lucid.Html5 doc: <a href=\"https://hackage.haskell.org/package/lucid-2.9.11/docs/Lucid-Html5.html\" rel=\"nofollow noreferrer\">https://hackage.haskell.org/package/lucid-2.9.11/docs/Lucid-Html5.html</a> and worked out the function that creates a button:</p>\n\n<pre><code>button_ :: Term arg result =&gt; arg -&gt; result\n</code></pre>\n\n<p>After spending some time trying to work out the correct syntax, I came up with this:</p>\n\n<pre><code>-- correctly replicates the html pasted above\nbutton_ [type_ \"button\", class_ \"btn btn-primary\"] \"Primary\"\n</code></pre>\n\n<p>Typically I would have called it a victory and focused on other tasks, but this one looks like a true piece of magic to me.</p>\n\n<p>The doc says \"button_\" is a function that takes an argument \"arg\" and returns a value of a generic type \"result\". However, in my application \"button_\" clearly takes two arguments and returns \"Html ()\".</p>\n\n<pre><code>-- f                       arg                     arg again ??\nbutton_ [type_ \"button\", class_ \"btn btn-primary\"] \"Primary\"\n</code></pre>\n\n<p>It must do something with the \"Term\" typeclass, but I'm not sure how to understand it. Can someone help me with this ? I tried loading the module into ghci and inspecting types with \":t\", but that didn't help me too much.</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 5, "last_activity_date": 1572859854, "creation_date": 1572859854, "answer_id": 58690492, "question_id": 58685331, "link": "https://stackoverflow.com/questions/58685331/how-to-use-inline-c-to-wrap-functions-returning-pointer-to-custom-struct-type/58690492#58690492", "title": "How to use inline-c to wrap functions returning pointer to custom struct type?", "body": "<p>The type argument to <code>Ptr</code> is just a tag, to remind you what it's pointing to. The type doesn't need to be <code>Storable</code> or anything. Note that your situation is not novel; the C standard library contains types like <code>FILE</code> which are only accessed through pointers, just like yours. Following their lead, you can write a dummy type</p>\n\n<pre><code>data Workbook = Workbook -- constructor does not have to/should not be exported\n</code></pre>\n\n<p>and then you can write a <code>Context</code> containing that type:</p>\n\n<pre><code>import qualified Data.Map as M\nimport qualified Language.C.Inline.Context as C\nimport qualified Language.C.Inline.Types as C\n\nlxwContext :: C.Context\nlxwContext = mempty { ctxTypesTable = M.singleton (C.TypeName \"lxw_workbook\") [t| Workbook |] }\n</code></pre>\n\n<p>Which can then be loaded as usual</p>\n\n<pre><code>import qualified Language.Inline.C as C\n\nC.context (baseCtx &lt;&gt; lxwContext)\n\nC.include \"whatever.h\" -- wherever you get workbook_new from\n\nexample :: IO (Ptr Workbook)\nexample = [C.exp| lxw_workbook* { workbook_new(\"filename.xlsx\") } ]\n</code></pre>\n"}], "owner": {"reputation": 639, "user_id": 10654293, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N3y4b1ilweA/AAAAAAAAAAI/AAAAAAAAAAQ/nO5VTzQiUu0/photo.jpg?sz=128", "display_name": "McBear Holden", "link": "https://stackoverflow.com/users/10654293/mcbear-holden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 2, "accepted_answer_id": 58690492, "answer_count": 1, "score": 2, "last_activity_date": 1572860834, "creation_date": 1572821378, "last_edit_date": 1572860834, "question_id": 58685331, "link": "https://stackoverflow.com/questions/58685331/how-to-use-inline-c-to-wrap-functions-returning-pointer-to-custom-struct-type", "title": "How to use inline-c to wrap functions returning pointer to custom struct type?", "body": "<p>I plan to use <code>inline-c</code> to wrap a C function:</p>\n\n<pre><code>lxw_workbook  *workbook  = workbook_new(\"filename.xlsx\");\n</code></pre>\n\n<p>I need to capture the returned Ptr to use in other functions later.</p>\n\n<p>Question:\nThe Ptr points to lxw_workbook which is a custom struct. Do I need to write a Storage instance for a Haskell type corresponding to this?\nBecause if I don't use the struct directly, only the Ptr, can I skip this step?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "edited": false, "score": 0, "creation_date": 1572814999, "post_id": 58684290, "comment_id": 103668427, "body": "You have forgotten to explain the type called <code>Result</code>. Is it a type synonym for <code>[String]</code>?"}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "edited": false, "score": 0, "creation_date": 1572817476, "post_id": 58684290, "comment_id": 103668969, "body": "Also I think there is some confusion of white and black in your post. The example you provide displays the first list of chess pieces in capital letters, and your specification says that capital letters are for black pieces and the first list is that of the white. I think this is contradictory."}, {"owner": {"reputation": 43, "user_id": 9898913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fzYOZvpToc8/AAAAAAAAAAI/AAAAAAAAZtM/Vr6n8hS4klc/photo.jpg?sz=128", "display_name": "Lishaak", "link": "https://stackoverflow.com/users/9898913/lishaak"}, "reply_to_user": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "edited": false, "score": 0, "creation_date": 1572868355, "post_id": 58684290, "comment_id": 103682753, "body": "Result was synonym for [String], edited. The white and black was reversed, so the first list is black and white is the second list."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9898913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fzYOZvpToc8/AAAAAAAAAAI/AAAAAAAAZtM/Vr6n8hS4klc/photo.jpg?sz=128", "display_name": "Lishaak", "link": "https://stackoverflow.com/users/9898913/lishaak"}, "edited": false, "score": 0, "creation_date": 1572868914, "post_id": 58685116, "comment_id": 103683037, "body": "I quite understand what you did, some of the functions are confusing, eg. function fold or overlay - never used that. Thank you. But I think your code is too intermediate. On our lessons we never did so many tricks. It was only some easy coded functions (eg. reverse Picture ([String]) - so function was <code>revPic = reverse</code> and so on. Or example to find all goldbach numbers.. Never something that complicated. I&#39;ll try to understand your code more and try to simplify it somehow - to be more understandable for beginners like me."}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 43, "user_id": 9898913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fzYOZvpToc8/AAAAAAAAAAI/AAAAAAAAZtM/Vr6n8hS4klc/photo.jpg?sz=128", "display_name": "Lishaak", "link": "https://stackoverflow.com/users/9898913/lishaak"}, "edited": false, "score": 0, "creation_date": 1572873427, "post_id": 58685116, "comment_id": 103685232, "body": "@Lishaak You will be amazed how <i>&quot;intermediate&quot;</i> <a href=\"https://stackoverflow.com/a/57840965\">a solution to a seemingly trivial problem</a> may get if one makes an effort to ensure it is free of corner case errors. But behind these seemingly complicated constructions is dead simple thinking. It may be possible with ingenuity to construct a solution that explores some unique features of a problem to get a compact <i>&quot;shortcut&quot;</i> solution, but then the code will be hard to grasp, narrow and fragile, while a program built out of simple and verified abstractions is straightforward, flexible and robust."}, {"owner": {"reputation": 43, "user_id": 9898913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fzYOZvpToc8/AAAAAAAAAAI/AAAAAAAAZtM/Vr6n8hS4klc/photo.jpg?sz=128", "display_name": "Lishaak", "link": "https://stackoverflow.com/users/9898913/lishaak"}, "edited": false, "score": 0, "creation_date": 1572970632, "post_id": 58685116, "comment_id": 103724051, "body": "Can you explain the replaceAt function? I never seen something like   <code>replaceAt i y xs = let (before, (_: after)) = splitAt i xs     in  before ++ y: after</code> what&#39;s before and after? And how you can combine ++ and : in <code>before ++ y: after</code>? Thanks"}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 43, "user_id": 9898913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fzYOZvpToc8/AAAAAAAAAAI/AAAAAAAAZtM/Vr6n8hS4klc/photo.jpg?sz=128", "display_name": "Lishaak", "link": "https://stackoverflow.com/users/9898913/lishaak"}, "edited": false, "score": 0, "creation_date": 1572984580, "post_id": 58685116, "comment_id": 103730409, "body": "@Lishaak <code>replaceAt</code> is prior art, see for example <a href=\"https://stackoverflow.com/a/53989351\">here</a> <i>(called <code>patch</code>)</i> and <a href=\"https://stackoverflow.com/a/23428227\">here</a>. A search even reveals a dedicated <a href=\"https://stackoverflow.com/q/9220022\">question</a>. <code>before</code> and <code>after</code> are the parts of the list before and after the element to be replaced. <code>++</code> and <code>:</code> are <code>infixr</code> <i>(check with, for example, <code>:info (++)</code> in <code>ghci</code>)</i>, so they associate to the right: the reading is <code>before ++ (y: after)</code>."}], "tags": [], "owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "is_accepted": true, "score": 2, "last_activity_date": 1573319908, "last_edit_date": 1573319908, "creation_date": 1572819383, "answer_id": 58685116, "question_id": 58684290, "link": "https://stackoverflow.com/questions/58684290/how-to-print-chess-board-with-list-of-positions-of-chess-pieces/58685116#58685116", "title": "How to print chess board with list of positions of chess pieces", "body": "<h2>Foreword.</h2>\n\n<p>I will give you an overview, and allow myself to leave some details unpolished. Please adjust\nmy advice to your liking.</p>\n\n<p>My answer will be structured like this:</p>\n\n<ol>\n<li>Explain the idea.</li>\n<li>Decide on the strategy.</li>\n<li>Draft the types.</li>\n<li>Fill in the definitions.</li>\n</ol>\n\n<p>In real life my process is <em>\"dialectic\"</em>, and all these lines of thought grow simultaneously, by\ntrial and error.</p>\n\n<h2>Idea.</h2>\n\n<p>I am thinking that, given two fields with some pieces each, I can always put these fields <em>\"on top\nof each other\"</em>, so that every piece is found in the same place in the received field as it was in\none of the given fields. <em>(Unless there are two pieces on the same place, in which case the\nbehaviour is undefined.)</em> Once I can add two fields this way, I can add any number thereof. And it\nshould not be too hard to produce a field with a single piece. This technique is called <em>\"folding\na monoid\"</em> and you will see it used a lot in Haskell.</p>\n\n<h2>Strategy.</h2>\n\n<p>This is how I will solve this problem:</p>\n\n<ul>\n<li>Define a <code>getPiece</code> function to read a piece.</li>\n<li>Define a <code>putPiece</code> function to display a field with one piece.</li>\n<li>Define an <code>overlay</code> function that overlays any two fields.</li>\n<li>Fold over the list of pieces with this function.</li>\n</ul>\n\n<h2>Types.</h2>\n\n<pre><code>type Piece = (Char, Int, Int)  -- Piece, row, column.\n\ntype Field = [String]  -- Rows.\n\ngetPiece :: String -&gt; Piece\n\nputPiece :: Piece -&gt; Field\n\noverlay :: Field -&gt; Field -&gt; Field\n\nchess :: [String] -&gt; [String] -&gt; Field\n</code></pre>\n\n<p>It may be worth your time to take a piece of paper and draw some pictures of how these types and functions may possibly connect.</p>\n\n<h2>Definitions.</h2>\n\n<pre><code>getPiece :: String -&gt; Piece\ngetPiece [v, x, y] = (piece, row, column)\n  where\n    piece  = v\n    row    = (Char.ord y - 48)\n    column = (Char.ord x - 96)\n\nputPiece :: Piece -&gt; Field\nputPiece (v, x, y) = reverse\n                   $ replaceAt (x - 1) (replaceAt (y - 1) v blank) (replicate 8 blank)\n  where\n    blank = replicate 8 ' '\n\n    replaceAt :: Int -&gt; a -&gt; [a] -&gt; [a]\n    replaceAt i y xs =\n      let (before, (_: after)) = List.splitAt i xs\n      in  before ++ y: after\n\noverlay :: Field -&gt; Field -&gt; Field\noverlay u v = zipWith (zipWith overlayOne) u v\n  where\n    overlayOne ' ' y = y\n    overlayOne  x  _ = x\n\nchess :: [String] -&gt; [String] -&gt; Field\nchess white black = List.foldl1' overlay . fmap putPiece $ pieces\n  where\n    pieces = fmap (makeWhite . getPiece) white ++ fmap getPiece black\n\n    makeWhite :: Piece -&gt; Piece\n    makeWhite (c, x, y) = (Char.toLower c, x, y)\n</code></pre>\n\n<p>A tricky part here is how two <code>zipWith</code> functions are combined to achieve a <em>\"zip\"</em> effect on a\nlist of lists. Notice also that I am not hesitating to define a helper function <code>replaceAt</code> when I\nthink it will make the main function really simple.</p>\n\n<h2>Conclusion.</h2>\n\n<p>I find it to be most comfortable to approach even a simple problem with the right toolbox of\nabstractions. In this case, we make use of a monoid <em>(defined by <code>overlay</code>)</em> and a recursion\nscheme <em>(<code>List.foldl'</code> is an instance of \"catamorphism\")</em>. I am sure you will\nmeet many more cases in your programming practice where these ideas can be put to use.</p>\n\n<p>Leave me a comment if something is not approachable or poorly explained.</p>\n\n<p>Enjoy Haskell!</p>\n\n<p>&nbsp;</p>\n\n<p><strong>P.S.</strong> &nbsp; See also another, <a href=\"https://stackoverflow.com/a/58781396\">algorithmically faster approach</a> to a very similar problem.</p>\n"}], "owner": {"reputation": 43, "user_id": 9898913, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fzYOZvpToc8/AAAAAAAAAAI/AAAAAAAAZtM/Vr6n8hS4klc/photo.jpg?sz=128", "display_name": "Lishaak", "link": "https://stackoverflow.com/users/9898913/lishaak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 58685116, "answer_count": 1, "score": 2, "last_activity_date": 1603718404, "creation_date": 1572812641, "last_edit_date": 1572868431, "question_id": 58684290, "link": "https://stackoverflow.com/questions/58684290/how-to-print-chess-board-with-list-of-positions-of-chess-pieces", "title": "How to print chess board with list of positions of chess pieces", "body": "<p>I'm stuck at doing my homework. I have to write a function that has 2 [String]. List string contains 3 chars:</p>\n\n<ul>\n<li>1st is Chess piece (e.g. 'K' - King, 'Q' - Queen, 'R' - Rook, 'B' - Bishops, 'N' - Knights, 'P' - Pawns)</li>\n<li>2nd specifies column ('a' - 'h')</li>\n<li>3rd is the row number ('1' - '8')</li>\n</ul>\n\n<p>First list of string is for BLACK pieces, the second is for WHITE pieces. Free fields of the boards are represented by '.'. Black chess pieces will be upper cased, white will be lower cased.</p>\n\n<p>Printing 1-8 and a-h on board isn't necessary.</p>\n\n<p>This is required function type:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>chess :: [String] -&gt; [String] -&gt; [String]\n</code></pre>\n\n<p>we have this function for print</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>pp :: Result -&gt; IO ()\npp x = putStr (concat (map (++\"\\n\") x))\n</code></pre>\n\n<p>This is IO example:</p>\n\n<pre><code>Prelude&gt; pp( chess[\"Ke1\",\"Ra1\",\"Rh1\",\"Pa2\",\"Be5\"] [\"Ke8\",\"Ra8\",\"Rh8\",\"Pa7\",\"Qd8\",\"Bc8\",\"Nb8\"])\n8rnbqk..r\n7p.......\n6........\n5....B...\n4........\n3........\n2P.......\n1R...K..R\n abcdefgh\n</code></pre>\n\n<p>What have I tried:\neg. </p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>chess :: [String] -&gt; [String] -&gt; [String]\nchess _ [] = []\nchess [] _ = []\nchess ((x1:x2:x3:_):xs) ((y1:y2:y3:y3s):ys) \n    | 'a' == x2 &amp;&amp; '1' == x3 = [x1] : chess xs ys\n    | 'a' == y2 &amp;&amp; '1' == y3 = [y1] : chess xs ys\n    | 'b' == x2 &amp;&amp; '1' == x3 = [x1] : chess xs ys\n    | 'c' == x2 &amp;&amp; '1' == x3 = [x1] : chess xs ys\n    | 'd' == x2 &amp;&amp; '1' == x3 = [x1] : chess xs ys\n    | 'e' == x2 &amp;&amp; '1' == x3 = [x1] : chess xs ys\n    | 'e' == x2 &amp;&amp; '1' == x3 = [x1] : chess xs ys\n    | 'g' == x2 &amp;&amp; '1' == x3 = [x1] : chess xs ys\n    | otherwise = ['.'] : chess xs ys\n</code></pre>\n\n<p>Input was: chess[\"Ke1\",\"Ra1\",\"Rh1\",\"Pa2\",\"Be1\"] [\"Kb1\",\"Ra8\",\"Rh8\",\"Pa7\",\"Qd8\",\"Bc8\",\"Na1\"]\nOutput was: [\"K\",\"R\",\".\",\".\",\"B\"]</p>\n\n<p>One more..</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>chess :: [String] -&gt; [String] -&gt; [String]\nchess _ [] = []\nchess [] _ = []\nchess ((x1:x2:x3:_):xs) ((y1:y2:y3:y3s):ys) \n    | (x2 == 'a' &amp;&amp; x3 == ['1']) = [x1] : chess (xs) (ys)\n    | (x2 == 'a' &amp;&amp; x3 == ['2']) = [x1] : chess (xs) (ys)\n    | (x2 == 'a' &amp;&amp; x3 == ['3']) = [x1] : chess (xs) (ys)\n    | (x2 == 'a' &amp;&amp; x3 == ['4']) = [x1] : chess (xs) (ys)\n    | (x2 == 'a' &amp;&amp; x3 == ['5']) = [x1] : chess (xs) (ys)\n    | (x2 == 'a' &amp;&amp; x3 == ['6']) = [x1] : chess (xs) (ys)\n    | (x2 == 'a' &amp;&amp; x3 == ['7']) = [x1] : chess (xs) (ys)\n    | (x2 == 'a' &amp;&amp; x3 == ['8']) = [x1] : chess (xs) (ys)\n    | otherwise =  chess (xs) (ys)\n</code></pre>\n\n<p>Input: chess[\"Ke1\",\"Ra1\",\"Rh1\",\"Pa2\",\"Be1\"] [\"Ke8\",\"Ra8\",\"Rh8\",\"Pa7\",\"Qd8\",\"Bc8\",\"Nb8\"]\nOutput:\nK\nR\nR</p>\n\n<p>None of them work as I wanted. I've tried checking one row first, then each column (a-h) - this is right I think, because I need to print something like [\"K...Q...\", \"P.......\"] - each element is one row. \nWhat if I check eg. black, and if there's not black, there still can be white, so I need to check second string for white pieces before printing '.'.\nPlease help, I'm confused. I've tried to code like 4 functions, but they took more than 4 hours. Thank you</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1572811144, "post_id": 58684085, "comment_id": 103667433, "body": "<code>4.99</code> is not an <code>Integral</code>..."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 1, "creation_date": 1572811206, "post_id": 58684085, "comment_id": 103667444, "body": "Your <code>testfn</code> doesn&#39;t return an <code>Integer</code> type in the first place."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1572811524, "creation_date": 1572811524, "answer_id": 58684158, "question_id": 58684085, "link": "https://stackoverflow.com/questions/58684085/number-conversion-in-haskell/58684158#58684158", "title": "Number conversion in haskell", "body": "<p>In Haskell operations of the <code>Num</code> class like multiplication are defined as <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:-42-\" rel=\"nofollow noreferrer\"><strong><code>(*) :: Num a =&gt; a -&gt; a -&gt; a</code></strong></a>. That means that the two operands and the result all have the same type.</p>\n\n<p>By writing <code>4.99 * fromIntegral &hellip;</code> you thus say that <code>4.99</code> and <code>fromIntegral &hellip;</code> and the result (an <code>Integer</code> according to your signature), should be the same. So the compiler derives that <code>4.99</code> should be an <code>Integer</code>, but <code>4.99</code> is not a literal that can be a <code>Integer</code>. Since it has a decimal dot, it should be of a type taht is a member of the <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional\" rel=\"nofollow noreferrer\"><strong><code>Fractional</code></strong> type class</a>.</p>\n\n<p>It is likely that you simply do not want the result to be an <code>Integer</code>, since multiplying with <code>4.99</code> is rather non-sensical if the result should be an <code>Integer</code>. You can for example use <code>Float</code>:</p>\n\n<pre><code>testfn :: Float -&gt; <b>Float</b>\ntestfn n = 4.99 * fromIntegral (ceiling (n / 4.0))</code></pre>\n\n<p>The <code>calculate_price</code> is just the same as <code>testfn</code>:</p>\n\n<pre><code>calculate_price :: Float -&gt; <b>Float</b>\ncalculate_price = testfn</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1572836863, "creation_date": 1572836863, "answer_id": 58686696, "question_id": 58684085, "link": "https://stackoverflow.com/questions/58684085/number-conversion-in-haskell/58686696#58686696", "title": "Number conversion in haskell", "body": "<p>Remember the hierarchy of <code>Num</code> Typeclass:</p>\n\n<pre><code>             Num a\n             /   \\  \n            /     \\ \n           /       \\\n  (Fractional a)  (Integral a)\n      /   \\           /   \\  \n     /     \\         /     \\ \n    /       \\       /       \\\n Double   Float   Integer   Int\n</code></pre>\n\n<p>And all this functions are from Num:</p>\n\n<pre><code>(+), (*), abs, signum, fromInteger, (negate | (-))\n</code></pre>\n\n<p>In your case:</p>\n\n<pre><code>(*) :: Num a =&gt; a -&gt; a -&gt; a \n</code></pre>\n\n<p>As you can see, <code>a -&gt; a -&gt; a</code>  means all of the same type, so:</p>\n\n<pre><code>testfn n = 4.99 * fromIntegral (ceiling (n / 4.0))\n</code></pre>\n\n<p>You can see:</p>\n\n<pre><code>4.99 :: Float\n\n*\n\nfromIntegral(ceiling(n * (1.0/4.0))) :: Integral a =&gt; a\n</code></pre>\n\n<p>And there is the error, you cannot apply <code>*</code> to different types.</p>\n"}], "owner": {"reputation": 787, "user_id": 5666503, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/03717a78503b9c561206ff55176b3174?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo", "link": "https://stackoverflow.com/users/5666503/gustavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1572836863, "creation_date": 1572811057, "question_id": 58684085, "link": "https://stackoverflow.com/questions/58684085/number-conversion-in-haskell", "title": "Number conversion in haskell", "body": "<p>The following code gives me an error which is somehow related to any type conversion issue: </p>\n\n<pre><code>testfn:: Float -&gt; Integer\ntestfn n = 4.99 * fromIntegral(ceiling(n * (1.0/4.0)))\n\ncalculate_price:: Float -&gt; Integer\ncalculate_price n = testfn(n)\n\nmain = do \n    print(calculate_price 3)\n</code></pre>\n\n<p>I'm new to haskell and I do not really understand why a multiplication is such a pain. The error is the following when I compile with ghc: </p>\n\n<pre><code>\u2022 No instance for (Fractional Integer)\n    arising from the literal \u20184.99\u2019\n\u2022 In the first argument of \u2018(*)\u2019, namely \u20184.99\u2019\n  In the expression: 4.99 * fromIntegral (ceiling (n * (1.0 / 4.0)))\n  In an equation for \u2018testfn\u2019:\n      testfn n = 4.99 * fromIntegral (ceiling (n * (1.0 / 4.0)))\n</code></pre>\n\n<p>|\n2 | testfn n = 4.99 * fromIntegral(ceiling(n * (1.0/4.0)))\n  |            ^^^^</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 5, "creation_date": 1572804179, "post_id": 58682986, "comment_id": 103665593, "body": "I doubt your business or classroom goal was stated as &quot;you need as second show instance of this Haskell type.&quot;  What are you actually trying to accomplish?"}], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1572809869, "post_id": 58683028, "comment_id": 103667145, "body": "It&#39;s worth discussing <a href=\"https://doi.org/10.1145/3242744.3242752\" rel=\"nofollow noreferrer\">doi.org/10.1145/3242744.3242752</a> in this context."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1572812543, "post_id": 58683028, "comment_id": 103667840, "body": "@leftaroundabout, I&#39;m really not a big fan of their approach. The coherence mechanism is complex and smells brittle. Have you seen my GHC proposal for local types and locally defined instances? It&#39;s much narrower, but seems likely better behaved."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572812651, "post_id": 58683028, "comment_id": 103667875, "body": "Is there a link to a freely available copy of the paper?"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 7, "last_activity_date": 1572810640, "last_edit_date": 1572810640, "creation_date": 1572803718, "answer_id": 58683028, "question_id": 58682986, "link": "https://stackoverflow.com/questions/58682986/how-to-declare-multiple-instances-for-the-same-type/58683028#58683028", "title": "How to declare multiple instances for the same type?", "body": "<p>You can only have one instance per type. If you need (or rather, want) another one, you need to define a new type.</p>\n\n<pre><code>newtype ZZOther = ZZOther ZZ\n\ninstance Show ZZOther where\n    show (ZZOther zz) = ... -- do something with zz :: ZZ\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 10264600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b841979464b11a302f56ce496febbaa?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Xoxo", "link": "https://stackoverflow.com/users/10264600/sarah-xoxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1572810640, "creation_date": 1572803495, "last_edit_date": 1572804741, "question_id": 58682986, "link": "https://stackoverflow.com/questions/58682986/how-to-declare-multiple-instances-for-the-same-type", "title": "How to declare multiple instances for the same type?", "body": "<p>I have the following instance:</p>\n\n<pre><code>instance Show ZZ where\n   show zz = toHexa (zzToInt zz)\n</code></pre>\n\n<p>I need another instance of <code>Show</code> for the type <code>ZZ</code> like </p>\n\n<pre><code>instance Show ZZ where\n   show zz = ...\n</code></pre>\n\n<p>How can I solve this problem? I need to declare the second <code>Show</code> in another way.</p>\n"}, {"tags": ["haskell", "directory", "filepath"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1572800406, "post_id": 58682357, "comment_id": 103664508, "body": "Have you seen <code>createDirectoryIfMissing</code>?  It does all the directory creation you ask for then you just need to write <code>&quot;&quot;</code> to your file (catching any exceptions as you see fit)."}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "reply_to_user": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 2, "creation_date": 1572807542, "post_id": 58682357, "comment_id": 103666497, "body": "Yes, I have seen. This function doesn&#39;t do what is required. <code>createDirectoryIfMissing True &quot;foo&#47;bar.txt&quot;</code> creates two directories and not one directory and one file."}], "answers": [{"comments": [{"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "edited": false, "score": 1, "creation_date": 1572852392, "post_id": 58685979, "comment_id": 103675675, "body": "Thanks, it works! It&#39;s also excellent that it works on files like <code>foo.txt</code> because <code>takeDirectory</code> returns <code>.</code> and <code>createDirectoryIfMissing</code> does nothing in such cases. I haven&#39;t tested it on Windows, but since I&#39;m on Linux, this works for me."}, {"owner": {"reputation": 824, "user_id": 6914498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025023af1858a74ebe1cb8c9b21f47ab?s=128&d=identicon&r=PG", "display_name": "wisn", "link": "https://stackoverflow.com/users/6914498/wisn"}, "reply_to_user": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "edited": false, "score": 2, "creation_date": 1572858538, "post_id": 58685979, "comment_id": 103678111, "body": "@Shersh I&#39;m glad to hear that! Have a nice day~"}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "edited": false, "score": 0, "creation_date": 1572864584, "post_id": 58685979, "comment_id": 103681045, "body": "I just noticed that <code>filename</code> variable is redundant in your code."}, {"owner": {"reputation": 824, "user_id": 6914498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025023af1858a74ebe1cb8c9b21f47ab?s=128&d=identicon&r=PG", "display_name": "wisn", "link": "https://stackoverflow.com/users/6914498/wisn"}, "reply_to_user": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "edited": false, "score": 0, "creation_date": 1572865005, "post_id": 58685979, "comment_id": 103681257, "body": "@Shersh Ah, yes. Edited."}], "tags": [], "owner": {"reputation": 824, "user_id": 6914498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/025023af1858a74ebe1cb8c9b21f47ab?s=128&d=identicon&r=PG", "display_name": "wisn", "link": "https://stackoverflow.com/users/6914498/wisn"}, "is_accepted": true, "score": 5, "last_activity_date": 1572864985, "last_edit_date": 1572864985, "creation_date": 1572828585, "answer_id": 58685979, "question_id": 58682357, "link": "https://stackoverflow.com/questions/58682357/how-to-create-a-file-and-its-parent-directories-in-haskell/58685979#58685979", "title": "How to create a file and its parent directories in Haskell?", "body": "<p>I'm trying to find the easiest way for this but can't find any.\nThe only way is to implement our own function based on your needs.\nFortunately, this is using <code>System.Directory</code> and <code>System.FilePath.Posix</code> libraries only.</p>\n\n<pre><code>import Prelude\n\nimport System.Directory (createDirectoryIfMissing)\nimport System.FilePath.Posix (takeDirectory)\n\nmain :: IO ()\nmain = createAndWriteFile \"foo/bar/baz/quux.txt\" \"something\"\n\ncreateAndWriteFile :: FilePath -&gt; String -&gt; IO ()\ncreateAndWriteFile path content = do\n  createDirectoryIfMissing True $ takeDirectory path\n\n  writeFile path content\n</code></pre>\n\n<p>Below is the result based on the code above.</p>\n\n<pre><code>foo\n\u2514\u2500\u2500 bar\n    \u2514\u2500\u2500 baz\n        \u2514\u2500\u2500 quux.txt\n</code></pre>\n\n<p>You may edit the code however you like.</p>\n"}], "owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 58685979, "answer_count": 1, "score": 1, "last_activity_date": 1572864985, "creation_date": 1572799352, "question_id": 58682357, "link": "https://stackoverflow.com/questions/58682357/how-to-create-a-file-and-its-parent-directories-in-haskell", "title": "How to create a file and its parent directories in Haskell?", "body": "<p>I want to write content to a file by a non-trivial path and create all parent directories if they don't exist. So the following code:</p>\n\n<pre><code>mkFile \"foo/bar/baz/quux.txt\"\n</code></pre>\n\n<p>will create all directories <code>foo/</code>, <code>foo/bar/</code> and <code>foo/bar/baz/</code> if they don't exist (and the file <code>quux.txt</code> as well of course). What is the easiest way to implement such a function? Ideally, I would like to see a solution that uses only <code>directory</code> and <code>filepath</code> libraries.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572799265, "post_id": 58682099, "comment_id": 103664182, "body": "If you annotate the function, you need to do so with a function type: <code>(binaer_zu_a :: String -&gt; Bool) &quot;True&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "is_accepted": true, "score": 8, "last_activity_date": 1572798341, "creation_date": 1572798341, "answer_id": 58682173, "question_id": 58682099, "link": "https://stackoverflow.com/questions/58682099/haskell-call-function-of-certain-instance/58682173#58682173", "title": "haskell call function of certain instance", "body": "<p>Specify the type argument like this</p>\n\n<pre><code>&gt; (binaer_zu_a \"b\") :: Integer\n3\n&gt; (binaer_zu_a \"b\") :: Bool\nTrue\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 3, "last_activity_date": 1572799378, "creation_date": 1572799378, "answer_id": 58682358, "question_id": 58682099, "link": "https://stackoverflow.com/questions/58682099/haskell-call-function-of-certain-instance/58682358#58682358", "title": "haskell call function of certain instance", "body": "<p>With the <code>TypeApplications</code> extension, you can specify the type (or rather, an expression representing the type) as the first argument.</p>\n\n<pre><code>&gt; :set -XTypeApplications\n&gt; binaer_zu_a @Bool \"True\"\nTrue\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 10264600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b841979464b11a302f56ce496febbaa?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Xoxo", "link": "https://stackoverflow.com/users/10264600/sarah-xoxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 58682173, "answer_count": 2, "score": 0, "last_activity_date": 1572799378, "creation_date": 1572797839, "question_id": 58682099, "link": "https://stackoverflow.com/questions/58682099/haskell-call-function-of-certain-instance", "title": "haskell call function of certain instance", "body": "<p>I have a class :</p>\n\n<pre><code>&gt; class Binaer a where\n&gt;   binaer_zu_a :: String -&gt; a\n</code></pre>\n\n<p>And two instances:</p>\n\n<pre><code>&gt; instance Binaer Integer where\n&gt;   binaer_zu_a b = 3\n\n&gt; instance Binaer Bool where\n&gt;   binaer_zu_a b = True\n</code></pre>\n\n<p>So the input to he function binaer_zu_a is always a string, but how do I have to call the function so that the function \"knows\" which of them it should execute?</p>\n\n<p>If I try to call it like <code>binaer_zu_a :: Bool \"01\"</code> for example I ge an<code>ERROR - Syntax error in input (unexpected string literal)</code></p>\n\n<p>So how do I need to call that function?</p>\n"}, {"tags": ["haskell", "distance", "euclidean-distance"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572795343, "post_id": 58681682, "comment_id": 103663017, "body": "Hint: take a look at <code>zipWith</code>."}, {"owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "edited": false, "score": 0, "creation_date": 1572804172, "post_id": 58681682, "comment_id": 103665591, "body": "The Accepted answer to your own previous question has the answer you are seeking : <a href=\"https://stackoverflow.com/a/58428386/4762234\">stackoverflow.com/a/58428386/4762234</a>"}], "owner": {"reputation": 33, "user_id": 12163851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-79n3R-_C8vo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGhYJemL5ZVEMC3anTgULEGnIAXQ/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/12163851/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572795110, "creation_date": 1572795110, "question_id": 58681682, "link": "https://stackoverflow.com/questions/58681682/distance-beetween-points-using-higher-order-functions-haskell", "title": "Distance beetween points using higher order functions haskell", "body": "<p>I made this function in order to calculate the total distance of a list of point</p>\n\n<pre><code>distancia :: [(Float,Float)] -&gt; Float\ndistancia [] = 0\ndistancia [x] = 0\ndistancia (x:y:xs) = aux + distancia (y:xs)\n      where aux = sqrt ((fst y - fst x)^2 + (snd y - snd x)^2)\n\nghci&gt; distancia [(0,0), (0,0), (1,0), (1,10)] \n11.0 \nghci&gt; distancia [(1,1), (3,4)] \n3.6055512\n</code></pre>\n\n<p>I made with recursion, but now I need to make this exact one but using higher order functions, map, filter or fold, im new to haskell and dont really know how to start. Any help? Thanks</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 0, "last_activity_date": 1572792310, "creation_date": 1572792310, "answer_id": 58681263, "question_id": 58681189, "link": "https://stackoverflow.com/questions/58681189/haskell-resolve-type-error-given-type-constraint/58681263#58681263", "title": "Haskell - resolve type error given type constraint", "body": "<p><a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:exp\" rel=\"nofollow noreferrer\"><strong><code>exp :: Floating a =&gt; a -&gt; a</code></strong></a> is a <em>function</em> that takes a parameter. An expression like <code>exp ** (x ** 2)</code>, thus does not make much sense.</p>\n\n<p>We can call <code>exp</code> with a parameter, like <code>exp (-(x ** 2))</code>, or simpler <code>exp (-x*x)</code>:</p>\n\n<pre><code>erf :: Floating a =&gt; a -&gt; a\nerf x = 1.0 - poly * <b>exp (-x*x)</b>\n    where p = 0.3275911\n          t = 1.0 / (1.0 + p * x)\n          a1 = 0.254829592\n          a2 = -0.284496736\n          a3 = 1.421413741\n          a4 = -1.453152027\n          a5 = 1.061405429\n          poly = t * (a1 + t * (a2 + t * (a3 + t * (a4 + t * a5))))</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude&gt; erf 0\n9.999999717180685e-10\nPrelude&gt; erf 1\n0.8427006897475899\nPrelude&gt; erf 2\n0.9953221395812188\nPrelude&gt; erf 3\n0.9999778948511022\nPrelude&gt; erf 4\n0.9999999845397042\n</code></pre>\n"}], "owner": {"reputation": 4282, "user_id": 290443, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f822f8f82def56dc3237cc4ff794e9e?s=128&d=identicon&r=PG", "display_name": "MikeRand", "link": "https://stackoverflow.com/users/290443/mikerand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572792310, "creation_date": 1572791871, "question_id": 58681189, "link": "https://stackoverflow.com/questions/58681189/haskell-resolve-type-error-given-type-constraint", "title": "Haskell - resolve type error given type constraint", "body": "<p>I'm trying to implement a numerical approximation of the Gaussian error function in Haskell as so.</p>\n\n<pre><code>erf :: (Floating a) =&gt; a -&gt; a\nerf x = 1.0 - poly * (exp ** (-(x ** 2)))\n    where p = 0.3275911\n          t = 1.0 / (1.0 + p * x)\n          a1 = 0.254829592\n          a2 = -0.284496736\n          a3 = 1.421413741\n          a4 = -1.453152027\n          a5 = 1.061405429\n          poly = t * (a1 + t * (a2 + t * (a3 + t * (a4 + t * a5))))\n</code></pre>\n\n<p>Attempting to load into GHCI raises the following error:</p>\n\n<pre><code>ghci&gt; :l stats\n[1 of 1] Compiling Main             ( stats.hs, interpreted )\n\nstats.hs:2:33: error:\n    \u2022 Couldn't match expected type \u2018a0 -&gt; a0\u2019 with actual type \u2018a\u2019\n      \u2018a\u2019 is a rigid type variable bound by\n        the type signature for:\n          erf :: forall a. Floating a =&gt; a -&gt; a\n        at stats.hs:1:8\n    \u2022 In the expression: (x ** 2)\n      In the second argument of \u2018(**)\u2019, namely \u2018(- (x ** 2))\u2019\n      In the second argument of \u2018(*)\u2019, namely \u2018(exp ** (- (x ** 2)))\u2019\n    \u2022 Relevant bindings include\n        poly :: a0 -&gt; a0 (bound at stats.hs:10:11)\n        t :: a0 -&gt; a0 (bound at stats.hs:4:11)\n        p :: a0 -&gt; a0 (bound at stats.hs:3:11)\n        a1 :: a0 -&gt; a0 (bound at stats.hs:5:11)\n        a2 :: a0 -&gt; a0 (bound at stats.hs:6:11)\n        a3 :: a0 -&gt; a0 (bound at stats.hs:7:11)\n        x :: a (bound at stats.hs:2:5)\n        (Some bindings suppressed; use -fmax-relevant-binds=N or -fno-max-relevant-binds)\n\nstats.hs:4:32: error:\n    \u2022 Couldn't match expected type \u2018a0 -&gt; a0\u2019 with actual type \u2018a\u2019\n      \u2018a\u2019 is a rigid type variable bound by\n        the type signature for:\n          erf :: forall a. Floating a =&gt; a -&gt; a\n        at stats.hs:1:8\n    \u2022 In the second argument of \u2018(*)\u2019, namely \u2018x\u2019\n      In the second argument of \u2018(+)\u2019, namely \u2018p * x\u2019\n      In the second argument of \u2018(/)\u2019, namely \u2018(1.0 + p * x)\u2019\n    \u2022 Relevant bindings include\n        t :: a0 -&gt; a0 (bound at stats.hs:4:11)\n        p :: a0 -&gt; a0 (bound at stats.hs:3:11)\n        a1 :: a0 -&gt; a0 (bound at stats.hs:5:11)\n        a2 :: a0 -&gt; a0 (bound at stats.hs:6:11)\n        a3 :: a0 -&gt; a0 (bound at stats.hs:7:11)\n        a4 :: a0 -&gt; a0 (bound at stats.hs:8:11)\n        x :: a (bound at stats.hs:2:5)\n        (Some bindings suppressed; use -fmax-relevant-binds=N or -fno-max-relevant-binds)\nFailed, modules loaded: none.\nghci&gt; \n</code></pre>\n\n<p>I've tried all sorts of castings to <code>a</code> in the <code>where</code> section of the function to no avail. How do I fix this function?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 2194, "user_id": 7940614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697c574cc5dfb3a4d5e4aff46a1721a?s=128&d=identicon&r=PG&f=1", "display_name": "assembly.jc", "link": "https://stackoverflow.com/users/7940614/assembly-jc"}, "edited": false, "score": 4, "creation_date": 1572774253, "post_id": 58678608, "comment_id": 103658057, "body": "What happen of <code>a_zu_binaer (3::Integer)</code> ? It seems you have more than one instance of <code>class Binaer</code>."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1572774514, "post_id": 58678608, "comment_id": 103658104, "body": "Haskell does not know if that <code>3</code> is an integer or any other numeric type. After all, one could later on add instances for <code>Binaer Int</code>, <code>Binaer Float</code>, etc. These can even be declared in another file."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 2194, "user_id": 7940614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b697c574cc5dfb3a4d5e4aff46a1721a?s=128&d=identicon&r=PG&f=1", "display_name": "assembly.jc", "link": "https://stackoverflow.com/users/7940614/assembly-jc"}, "edited": false, "score": 0, "creation_date": 1572774619, "post_id": 58678608, "comment_id": 103658120, "body": "@assembly.jc It does not matter if you have more instances right now or not. Haskell works under an &quot;open world&quot; assumption, where instances might always be added (even in other source files)."}, {"owner": {"reputation": 101, "user_id": 10264600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b841979464b11a302f56ce496febbaa?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Xoxo", "link": "https://stackoverflow.com/users/10264600/sarah-xoxo"}, "edited": false, "score": 0, "creation_date": 1572793133, "post_id": 58678608, "comment_id": 103662391, "body": "calling it over a_zu_binaer (3::Integer) solves my problem. Thank you1!"}], "answers": [{"tags": [], "owner": {"reputation": 823, "user_id": 560478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9cede0930b58ad165da51737fff5644?s=128&d=identicon&r=PG", "display_name": "Philipp Siegmantel", "link": "https://stackoverflow.com/users/560478/philipp-siegmantel"}, "is_accepted": true, "score": 0, "last_activity_date": 1572881564, "creation_date": 1572881564, "answer_id": 58696529, "question_id": 58678608, "link": "https://stackoverflow.com/questions/58678608/haskell-instance-unresolved-overloading/58696529#58696529", "title": "haskell instance unresolved overloading", "body": "<p>If you want to enter a multi line definition into ghci, you have to surround it with <code>:{</code> and <code>:}</code>.</p>\n\n<p>In Your case, the first line declares a class without methods, the second a signature to a unrelated funktion and so on.</p>\n\n<p>I's in general a good idea to store your definitions in a file and use ghci only to try them out.</p>\n"}], "owner": {"reputation": 101, "user_id": 10264600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b841979464b11a302f56ce496febbaa?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Xoxo", "link": "https://stackoverflow.com/users/10264600/sarah-xoxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 58696529, "answer_count": 1, "score": 1, "last_activity_date": 1572881564, "creation_date": 1572770668, "question_id": 58678608, "link": "https://stackoverflow.com/questions/58678608/haskell-instance-unresolved-overloading", "title": "haskell instance unresolved overloading", "body": "<p>I have a class Binaer with the method a_zu_binaer:</p>\n\n<pre><code>&gt; class Binaer a where\n&gt;   a_zu_binaer :: a -&gt; String\n</code></pre>\n\n<p>And an instance:</p>\n\n<pre><code>&gt; instance Binaer Integer where\n&gt;   a_zu_binaer b = \"needs to be converted\"\n</code></pre>\n\n<p>When I call for example </p>\n\n<pre><code>a_zu_binaer 3 \n</code></pre>\n\n<p>I get the error <code>Unresolved Overloading</code></p>\n\n<p>What is the reason for this? How can I solve this problem?</p>\n"}, {"tags": ["list", "haskell", "types", "tuples"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 9, "creation_date": 1572732105, "post_id": 58675608, "comment_id": 103652512, "body": "You can&#39;t do this because the type depends on the data (full on dependent types)."}, {"owner": {"reputation": 31, "user_id": 12313846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4409e642af37d193f940eaaf802d823b?s=128&d=identicon&r=PG&f=1", "display_name": "dingo1337", "link": "https://stackoverflow.com/users/12313846/dingo1337"}, "reply_to_user": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1572732541, "post_id": 58675608, "comment_id": 103652579, "body": "Thanks for the answer, that was kinda the realization I was getting at, but was hoping I had overseen something."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 5, "creation_date": 1572733312, "post_id": 58675608, "comment_id": 103652749, "body": "You could define your own custom type <code>data T = Empty | Nonempty (Integer, T)</code> to represent the arbitrary nesting of tuples, but in doing that we are only giving another name to the standard list type, so there&#39;s nothing to gain. Why do you think you need tuples for your data?"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1572739298, "post_id": 58675608, "comment_id": 103653696, "body": "Another possible encoding: <code>data NTup t = Here t | There (NTup (Integer,t))</code>. Then you can use <code>NTup ()</code> for a nested tuple of any size. By the time you recurse down to <code>Here</code>, <code>t</code> will be a nested tuple of the appropriate size (try <code>show</code>ing it to see).  This is called a non-regular type, and I can&#39;t really see a point to doing it in this instance, but it&#39;s a good technique to know."}], "answers": [{"comments": [{"owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "edited": false, "score": 0, "creation_date": 1572745581, "post_id": 58676417, "comment_id": 103654445, "body": "how did you add type constraints in instance definition, and how does it work? Also ghci complained about turning on <code>TupleSections</code>"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "reply_to_user": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "edited": false, "score": 0, "creation_date": 1572756273, "post_id": 58676417, "comment_id": 103655667, "body": "@Yogendra you can do it just like that.  <code>instance &lt;constraints&gt; =&gt; ClassName params</code>.  It works by <i>first</i> selecting the instance as if there were no constraints, committing to that choice, and then trying to solve the constraints.  (Thinking of it as an &quot;if then&quot;, while tempting, seduces you into thinking you can do things you can&#39;t)"}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 5, "last_activity_date": 1572740360, "creation_date": 1572740360, "answer_id": 58676417, "question_id": 58675608, "link": "https://stackoverflow.com/questions/58675608/convert-list-to-nested-tuple-haskell/58676417#58676417", "title": "Convert list to nested tuple Haskell", "body": "<p>As Thomas M. DuBuisson commented, this is just not really doable in a good way, since the list length is only known at runtime, but tuples of different depth have different types, and types must be known at compile time.</p>\n\n<p>(Technically speaking, Haskell is actually able to act as a full dynamically typed language, by using the <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Dynamic.html#t:Dynamic\" rel=\"noreferrer\"><code>Data.Dynamic</code></a> type, but this really impractical to use.)</p>\n\n<p>There is however another way to have a sensible-ish list-to-tuples conversion: if you <em>do</em> know at compile time what would be the correct depth, and a list of mismatching length should simply be an invalid input. In this case, you can use something like</p>\n\n<pre><code>{-# LANGUAGE FunctionalDependencies, FlexibleInstances #-}\n\nclass NestedTup e t where\n  toNestedTup :: [e] -&gt; Maybe t\n\ninstance NestedTup e e where\n  toNestedTup [e] = Just e\n  toNestedTup _ = Nothing\ninstance NestedTup h t =&gt; NestedTup h (h,t) where\n  toNestedTup (h:t) = (h,)&lt;$&gt;toNestedTup t\n  toNestedTup [] = Nothing\n</code></pre>\n\n<pre><code>*Main> toNestedTup [1,2,3,4 :: Int] :: Maybe (Int,(Int,(Int,Int)))\nJust (1,(2,(3,4)))\n*Main> toNestedTup [1,2,3,4,5 :: Int] :: Maybe (Int,(Int,(Int,Int)))\nNothing\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12313846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4409e642af37d193f940eaaf802d823b?s=128&d=identicon&r=PG&f=1", "display_name": "dingo1337", "link": "https://stackoverflow.com/users/12313846/dingo1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1572745523, "creation_date": 1572731426, "last_edit_date": 1572745523, "question_id": 58675608, "link": "https://stackoverflow.com/questions/58675608/convert-list-to-nested-tuple-haskell", "title": "Convert list to nested tuple Haskell", "body": "<p>Short and sweet, my issue is that I am parsing a list of numbers ([Integer]), and I want to transform that list into nested tuples, so for example the list [1,2,3,4] would be (1,(2,(3,4))) this seems to me to be doable with a fold operation. I think the problem I am having is that the type is not determined before hand, making the tuple nest potentially infinite. </p>\n\n<p>EDIT BASED ON COMMENTS</p>\n\n<p>Thanks for the good replies, the root problem is for an assignment, so that is why details of the greater issue is sparse, but in an effort to not leave you wondering I can expand a bit, although I am not looking for answers to the expansion. My problem boils down to an issue with a right recursive and right associative part of a context free grammar, where I have something like </p>\n\n<p>A -> n A</p>\n\n<p>so I could get an expression like so 'n n n n A' which parses to 'n(n(n(n A)))' (A does have other terminals). I can parse it to '[n,n,n,n] A', which is why I wanted the conversion (I know there is a better way, I am just struggling to find it).</p>\n"}, {"tags": ["sql", "postgresql", "haskell", "haskell-beam"], "owner": {"reputation": 6426, "user_id": 3946931, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a45b621c0a6b96ea0996dfd51867c541?s=128&d=identicon&r=PG&f=1", "display_name": "therewillbecode", "link": "https://stackoverflow.com/users/3946931/therewillbecode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 1, "answer_count": 0, "score": 8, "last_activity_date": 1572954268, "creation_date": 1572725295, "last_edit_date": 1572725821, "question_id": 58674880, "link": "https://stackoverflow.com/questions/58674880/how-do-i-write-a-query-which-returns-a-nested-list-using-the-beam-library-in-has", "title": "How do I write a query which returns a nested list using the Beam library in Haskell?", "body": "<p>I need help rewriting myQuery so that I can retrieve all the class types associated \nwith a purchased class pass. The query I desire would have the signature:</p>\n\n<pre><code>myQuery :: Text -&gt; Pg [(PurchasedClassPass, [ClassType])]\n</code></pre>\n\n<p>I have the following postgres schema using the Beam library:</p>\n\n<pre><code>import           Database.Beam\nimport           Database.Beam.Migrate\nimport           Database.Beam.Postgres\nimport           Data.Text                      ( Text )\n\n\ndata MyDb f = MyDb\n  {   _class_types :: f (TableEntity ClassTypeT)\n    , _class_pass_types :: f (TableEntity ClassPassTypeT)\n    , _class_passes :: f (TableEntity ClassPassT)\n    , _purchased_class_passes :: f (TableEntity PurchasedClassPassT)\n    } deriving (Generic, Database Postgres)\n\n\ndata ClassTypeT f = ClassType\n  { _id :: Columnar f Text\n  , _name :: Columnar f Text\n  }\n  deriving (Generic, Beamable)\n\ninstance Table ClassTypeT where\n  data PrimaryKey ClassTypeT f = ClassTypeId {\n       unClassTypeId :: Columnar f Text \n    } deriving (Generic, Beamable)\n  primaryKey = ClassTypeId . _id\n\ntype ClassType = ClassTypeT Identity\n\ntype ClassTypeId = PrimaryKey ClassTypeT Identity\n\n\ndata ClassPassT f = ClassPass\n  { _class_type_id :: PrimaryKey ClassType.ClassTypeT f\n  , _class_pass_type_id :: PrimaryKey ClassPassTypeT f\n  , _created_at :: Columnar f LocalTime\n  , _updated_at :: Columnar f LocalTime\n  } deriving (Generic, Beamable)\n\n\n-- the kinds of class passes which can be purchased\ndata ClassPassTypeT f = ClassPassType\n  {   _id :: Columnar f Text\n    , _name :: Columnar f Text\n  }\n  deriving (Generic, Beamable)\n\ninstance Table ClassPassTypeT where\n    data PrimaryKey ClassPassTypeT f = ClassPassTypeId { unClassPassTypeId :: Columnar f Text } deriving (Generic, Beamable)\n    primaryKey = ClassPassTypeId . _id\n\ntype ClassPassType = ClassPassTypeT Identity\n\ntype ClassPassTypeId = PrimaryKey ClassPassTypeT Identity\n\n-- purchases\ndata PurchasedClassPassT f = PurchasedClassPass\n  { _id :: Columnar f Text\n  , _student_email :: Columnar f Text\n  , _class_pass_type_id :: PrimaryKey ClassPassTypeT f\n  } deriving (Generic, Beamable)\n\ninstance Table PurchasedClassPassT where\n  data PrimaryKey PurchasedClassPassT f = PurchasedClassPassId { unPurchasedClassPassId :: Columnar f Text } deriving (Generic, Beamable)\n  primaryKey = PurchasedClassPassId . _id\n\ntype PurchasedClassPass = PurchasedClassPassT Identity\n\ntype PurchasedClassPassId = PrimaryKey PurchasedClassPassT Identity\n\n\n-- join table which expresses the many &lt;-&gt; many relation between \n-- class pass types and the Class types.\n-- A row here linking a class pass type and the class type says that\n-- the class pass can be redeemed as credit against the given class type\ninstance Table ClassPassT where\n    data PrimaryKey ClassPassT f\n      = ClassPassId\n          (PrimaryKey ClassType.ClassTypeT f)\n          (PrimaryKey ClassPassTypeT f)\n      deriving Generic\n    primaryKey =\n        ClassPassId\n        &lt;$&gt; _class_type_id\n        &lt;*&gt; _class_pass_type_id\n\ntype ClassPass = ClassPassT Identity\n\ninstance Beamable (PrimaryKey ClassPassT)\n\n\nclassPassTypeClassTypeRelationship ::  \n  Q Postgres\n  MyDb\n  s\n  (ClassPassTypeT (QExpr Postgres s))\n  -&gt; Q Postgres MyDb s (ClassTypeT (QExpr Postgres s))\n  -&gt; Q Postgres\n     MyDb\n     s\n     (ClassPassT (QExpr Postgres s), ClassPassTypeT (QExpr Postgres s),\n      ClassTypeT (QExpr Postgres s))\nclassPassTypeClassTypeRelationship =\n  manyToManyPassthrough_ (_class_passes MyDb)\n    _class_pass_type_id\n    _class_type_id\n</code></pre>\n\n<p>For each row in the <code>purchased_class_passes</code> table there is a foreign key in the row (<code>_class_pass_type_id</code>)\nwhich links to the <code>class_pass_types table</code>. </p>\n\n<p>This <code>class_pass_type</code> entity then has many entries in the \n<code>class_passes</code> table which then again has many <code>class_type</code> entities associated with it. \nThe <code>class_passes</code> table is a join through table expressing this many to many relation between \n<code>class_pass_types</code> and <code>class_types</code>.</p>\n\n<p>I need help writing a query which can return a list of all purchased class passes for a given <code>student_email</code>\nand another nested list of all the class types the purchase class pass relates to\n - in other words all the class types for all the purchased class passes (filtered by <code>student_email</code>).</p>\n\n<p>So this is my current failing attempt.</p>\n\n<pre><code>getPurchasedClassPassSummaries studentEmail = do\n  purchasedClassPasses &lt;- all_ (_purchased_class_passes MyDb)\n  guard_ $ _student_email purchasedClassPasses ==. val_ studentEmail  \n\n  classPassTypes &lt;- related_ (MyDb ^. class_pass_types) (_class_pass_type_id purchasedClassPasses)\n\n  classPasses &lt;- leftJoin_ (all_ (MyDb ^. class_passes))\n    (\\classPass -&gt; _class_pass_type_id classPass `references_` classPassTypes)\n\n  classTypes &lt;- related_ (MyDb ^. class_types) (_class_type_id classPasses)\n\n  pure (purchasedClassPasses, classTypes)\n</code></pre>\n\n<p>Although this type checks as</p>\n\n<pre><code>getPurchasedClassPassSummaries :: \n  Text -&gt; \n  Q Postgres MyDb s           \n    [(\n      PurchasedClassPassT (QExpr Postgres s),\n      ClassTypeT (QExpr Postgres s)\n    )]\n\nmyQuery :: Text -&gt; Pg [(PurchasedClassPass, ClassType)]\nmyQuery studentEmail =\n  runSelectReturningList $ do \n    select $ getPurchasedClassPassSummaries studentEmail\n</code></pre>\n\n<p>This is inadequate as I really would like to rewrite the query so that I can get the following \ntype signature.</p>\n\n<pre><code>getPurchasedClassPassSummaries ::\n  Text -&gt; \n  Q Postgres MyDb s           \n    [ \n      (  PurchasedClassPassT (QExpr Postgres s)\n        , [ClassTypeT (QExpr Postgres s)] )\n    ]\ngetPurchasedClassPassSummaries studentEmail = undefined\n\nmyQuery :: Text -&gt; Pg [(PurchasedClassPass, [ClassType])]\nmyQuery studentEmail =\n  runSelectReturningList $ do \n    select $ getPurchasedClassPassSummaries studentEmail\n</code></pre>\n"}, {"tags": ["haskell", "implicit"], "comments": [{"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1572717677, "post_id": 58673757, "comment_id": 103649290, "body": "I&#39;m not a haskeller but it seems that you&#39;re looking for single dispatching, dispatching based on argument type? You can create an instance of a for strings"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1572717990, "post_id": 58673757, "comment_id": 103649380, "body": "You can do that by defining a typeclass, and then create instances for <code>String</code> and <code>Int</code>."}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 8941497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73ef14622ee81e7247a804e94da912e0?s=128&d=identicon&r=PG&f=1", "display_name": "f23aaz", "link": "https://stackoverflow.com/users/8941497/f23aaz"}, "edited": false, "score": 0, "creation_date": 1572727171, "post_id": 58673899, "comment_id": 103651473, "body": "Is there any way of extending this so you can ignore the functions and convert automatically, such as <code>value :: Int \\n value = &quot;how long&quot;</code> and it will call length without explicitly writing it?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 347, "user_id": 8941497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73ef14622ee81e7247a804e94da912e0?s=128&d=identicon&r=PG&f=1", "display_name": "f23aaz", "link": "https://stackoverflow.com/users/8941497/f23aaz"}, "edited": false, "score": 3, "creation_date": 1572741985, "post_id": 58673899, "comment_id": 103654034, "body": "@w1220 No, not generally. There is something for <code>String</code>, specifically (the <code>OverloadedStrings</code> extension), but I strongly recommend that you do not use it for this. Learn to write Haskell, not Scala, in your Haskell code."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 7, "last_activity_date": 1572718254, "creation_date": 1572718254, "answer_id": 58673899, "question_id": 58673757, "link": "https://stackoverflow.com/questions/58673757/implicitly-call-function/58673899#58673899", "title": "Implicitly call function", "body": "<p>What you here describe is <a href=\"https://en.wikipedia.org/wiki/Ad_hoc_polymorphism\" rel=\"noreferrer\"><em>ad hoc polymorphism</em> [wiki]</a>. In Haskell that is achieved through <a href=\"https://en.wikipedia.org/wiki/Type_class\" rel=\"noreferrer\"><em>type classes</em> [wiki]</a>.</p>\n\n<p>We can for example define a class:</p>\n\n<pre><code>class Foo c where\n    a :: c -&gt; Int</code></pre>\n\n<p>Now we can define two instances of <code>Foo</code>: an instance for <code>Int</code>, and an instance for <code>String</code>:</p>\n\n<pre><code>{-# LANGUAGE <b>FlexibleInstances</b> #-}\n\ninstance Foo [Char] where\n    a = length\n\ninstance Foo Int where\n    a = (+) 1</code></pre>\n\n<p>Next we thus can call <code>a</code> with:</p>\n\n<pre><code>Prelude&gt; a \"how long\"\n8\nPrelude&gt; a (5 :: Int)\n6\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 8941497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73ef14622ee81e7247a804e94da912e0?s=128&d=identicon&r=PG&f=1", "display_name": "f23aaz", "link": "https://stackoverflow.com/users/8941497/f23aaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 58673899, "answer_count": 1, "score": 4, "last_activity_date": 1572718254, "creation_date": 1572717413, "question_id": 58673757, "link": "https://stackoverflow.com/questions/58673757/implicitly-call-function", "title": "Implicitly call function", "body": "<p>I need to find a way to implicitly call a function in Haskell in a similar way that you can do using <code>implicit</code> functions in Scala.</p>\n\n<p>I've looked into using <code>{-# LANGUAGE ImplicitParams #-}</code> like shown in <a href=\"https://stackoverflow.com/questions/11141600/implicit-parameter-and-function\">Implicit parameter and function</a> but I can't figure out how to achieve something similar without explicitly defining it.</p>\n\n<p>This is a very reduced version of my code</p>\n\n<pre><code>a :: Int -&gt; Int\na n = n + 1\n\nb :: [Char] -&gt; Int\nb cs = length cs\n</code></pre>\n\n<p>I want to be able to run</p>\n\n<pre><code>Test&gt; a \"how long\" -- outputs 8, as it implicitly calls a (b \"how long\")\n</code></pre>\n\n<p>as well as </p>\n\n<pre><code>Test&gt; a 5 -- outputs 6\n</code></pre>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"reputation": 1555, "user_id": 7508046, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59f0e6ee17bb67e5884e12aa6b192c11?s=128&d=identicon&r=PG&f=1", "display_name": "Yamahari", "link": "https://stackoverflow.com/users/7508046/yamahari"}, "edited": false, "score": 7, "creation_date": 1572696956, "post_id": 58670986, "comment_id": 103643743, "body": "In Haskell [1] == 1:[]"}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1572722301, "post_id": 58670986, "comment_id": 103650415, "body": "The command <code>ghc -fwarn-incomplete-patterns</code> fails to complain about your code. Hence (x:xs) is found to match with [1]. In fact, your function f is basically the same thing as <code>take 1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2624, "user_id": 1289801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/8a1c3093e5ea650e39c4a875f62a0bd4?s=128&d=identicon&r=PG", "display_name": "TMOTTM", "link": "https://stackoverflow.com/users/1289801/tmottm"}, "edited": false, "score": 0, "creation_date": 1572697574, "post_id": 58671009, "comment_id": 103643908, "body": "OK. First of all I wonder why my function definition does even compile in the first place, because the function type is <code>[Int] -&gt; [Int]</code>, so if I give it the empty list, then that is not <code>[Int]</code> as a result, is it? Second then, how to I match a list with exactly two elements? [a, b]?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 2624, "user_id": 1289801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/8a1c3093e5ea650e39c4a875f62a0bd4?s=128&d=identicon&r=PG", "display_name": "TMOTTM", "link": "https://stackoverflow.com/users/1289801/tmottm"}, "edited": false, "score": 2, "creation_date": 1572697684, "post_id": 58671009, "comment_id": 103643937, "body": "@TMOTTM: (a) An empty list <code>[]</code> has type <code>[] :: [a]</code>, so it can match <code>a ~ Int</code>, and an empty list thus can be of type <code>[Int]</code>; (b) you can match it with <code>f [a, b] = ...</code> or <code>f (a:b:[]) = ...</code>, both are identical, since <code>[a,b]</code> is just <i>syntactical sugar</i> for <code>(a:b:[])</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1572699400, "post_id": 58671009, "comment_id": 103644381, "body": "Put another way, if you don&#39;t think that <code>[]</code> can be a value of type <code>[Int]</code>, then what <i>is</i> its type?"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 2, "creation_date": 1572746096, "post_id": 58671009, "comment_id": 103654515, "body": "An empty list is still a list, just like a backpack with nothing in it is still a backpack"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 10, "last_activity_date": 1572697844, "last_edit_date": 1572697844, "creation_date": 1572696955, "answer_id": 58671009, "question_id": 58670986, "link": "https://stackoverflow.com/questions/58670986/haskell-why-does-xxs-match-the-list-with-only-one-element/58671009#58671009", "title": "Haskell: Why does (x:xs) match the list with only one element?", "body": "<p>If you write <code>[x]</code>, a list with one element, this is short for <code>(x : [])</code>, or even more verbose <code>(:) x []</code>. So it is a \"cons\" (<code>(:)</code>) with <code>x</code> as element, and the empty list as tail.</p>\n\n<p>So your function <code>f (x:xs)</code> will indeed match a list with one (or more) elements. For a list with one element, <code>x</code> will be the element, and <code>xs</code> an empty list.</p>\n\n<blockquote>\n  <p>would not match, because the pattern <code>(x:xs)</code> only matches, if there are more elements <code>xs</code> after the <code>x</code> in the list, which is not the case for the list <code>[1]</code>.</p>\n</blockquote>\n\n<p>No the <code>(x:xs)</code> matches with every <em>non-empty</em> list, with <code>x</code> the first element of the list, and <code>xs</code> a (possibly empty) list of remaining elements.</p>\n\n<p>If you want to match only lists with for example two or more elements. You can match this with:</p>\n\n<pre><code>-- two or more elements\nf (x<sub>1</sub> : x<sub>2</sub> : xs) = &hellip;</code></pre>\n\n<p>Here <code>x<sub>1</sub></code> and <code>x<sub>2</sub></code> will match the first and second item of the list respectively, and <code>xs</code> is a list that contains the remaining elements.</p>\n\n<p><strong>EDIT</strong>: to answer <a href=\"https://stackoverflow.com/questions/58670986/haskell-why-does-xxs-match-the-list-with-only-one-element/58671009?noredirect=1#comment103643908_58671009\">your comments</a>:</p>\n\n<blockquote>\n  <p>I wonder why my function definition does even compile in the first place, because the function type is <code>[Int] -&gt; [Int]</code>, so if I give it the empty list, then that is not <code>[Int]</code> as a result, is it?</p>\n</blockquote>\n\n<p>The empty list <code>[]</code> is one of the data constructors of the <code>[a]</code> type, so that means that <code>[]</code> has type <code>[] :: [a]</code>. It can match the type variable <code>a</code> with <code>Int</code>, and thus <code>[]</code> can have type <code>[] :: [Int]</code>.</p>\n\n<blockquote>\n  <p>Second then, how to I match a list with exactly two elements? <code>[a, b]</code>?</p>\n</blockquote>\n\n<p>You can match such list with:</p>\n\n<pre><code>f (a : b : []) = &hellip;</code></pre>\n\n<p>or you can match it with:</p>\n\n<pre><code>f [a, b] = &hellip;</code></pre>\n\n<p>The two are equivalent. <code>[a, b]</code> is <em>syntactical sugar</em>: it is replaced by the compiler to <code>(a : b : [])</code>, but for humans, it is of course more convenient to work with <code>[a, b]</code>.</p>\n"}], "owner": {"reputation": 2624, "user_id": 1289801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/8a1c3093e5ea650e39c4a875f62a0bd4?s=128&d=identicon&r=PG", "display_name": "TMOTTM", "link": "https://stackoverflow.com/users/1289801/tmottm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 58671009, "answer_count": 1, "score": 2, "last_activity_date": 1572697844, "creation_date": 1572696785, "last_edit_date": 1572697212, "question_id": 58670986, "link": "https://stackoverflow.com/questions/58670986/haskell-why-does-xxs-match-the-list-with-only-one-element", "title": "Haskell: Why does (x:xs) match the list with only one element?", "body": "<p>Given this definition of a function <code>f</code>:</p>\n\n<pre><code>f :: [Int] -&gt; [Int]\nf [] = []\nf (x:xs) = x:[]\n</code></pre>\n\n<p>I would assume that a call such as</p>\n\n<pre><code>f [1]\n</code></pre>\n\n<p>would not match, because the pattern <code>(x:xs)</code> only matches, if there are more elements <code>xs</code> after the <code>x</code> in the list, which is not the case for the list <code>[1]</code>. Or is it?</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 10, "last_activity_date": 1572692443, "creation_date": 1572692443, "answer_id": 58670432, "question_id": 58670411, "link": "https://stackoverflow.com/questions/58670411/how-to-call-a-haskell-instance-without-explicit-type/58670432#58670432", "title": "How to call a haskell instance without explicit type", "body": "<p>Indentation matters.</p>\n\n<pre><code>class Binaer a where\na_zu_binaer :: a -&gt; String\n</code></pre>\n\n<p>This defines a class with <em>no methods</em>, and a completely unrelated <code>a_zu_binaer</code> function.\nTo make that into a method, indent it.</p>\n\n<pre><code>class Binaer a where\n   a_zu_binaer :: a -&gt; String\n</code></pre>\n\n<p>I'd recommend you write your code in a file, instead of entering it in GHCi. In GHCi, you will need to write everything on one line, or use one of the multi-line entry modes, but that's less convenient.</p>\n"}], "owner": {"reputation": 101, "user_id": 10264600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b841979464b11a302f56ce496febbaa?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Xoxo", "link": "https://stackoverflow.com/users/10264600/sarah-xoxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 58670432, "answer_count": 1, "score": -1, "last_activity_date": 1573809309, "creation_date": 1572692222, "last_edit_date": 1573809309, "question_id": 58670411, "link": "https://stackoverflow.com/questions/58670411/how-to-call-a-haskell-instance-without-explicit-type", "title": "How to call a haskell instance without explicit type", "body": "<p>I have a class with no explicit type a.</p>\n\n<pre><code>&gt; class Binaer a where\n&gt; a_zu_binaer :: a -&gt; String\n</code></pre>\n\n<p>And I am building an instance of that class. The function <code>toBin</code> requires as input an Integer.</p>\n\n<pre><code>&gt; instance Binaer Integer where\n&gt; a_zu_binaer b = toBin b \n</code></pre>\n\n<p>Doing so I get the following error:</p>\n\n<pre><code>Inferred type is not general enough\n*** Expression    : a_zu_binaer\n*** Expected type : a -&gt; String\n*** Inferred type : Integer -&gt; String\n</code></pre>\n\n<p>Is there a way to solve this problem? I can not give an explicit type for \"a\"</p>\n"}, {"tags": ["haskell", "functional-programming", "monads"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572691084, "post_id": 58670103, "comment_id": 103642419, "body": "I don&#39;t have time for a full explanation/answer - which involves features of the Haskell type system that you may not have encountered yet - but this should work if you replace <code>system &quot;ls&quot;</code> with <code>liftIO $ system &quot;ls&quot;</code>. (<code>liftIO</code> is from the <code>Control.Monad.IO.Class</code> module). I can attempt an explanation when I have more time later, if someone else hasn&#39;t done so yet."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1572691096, "post_id": 58670103, "comment_id": 103642421, "body": "You seem to know what the problem is - now use <a href=\"http://hackage.haskell.org/package/scotty-0.11.5/docs/Web-Scotty-Internal-Types.html#v:liftIO\" rel=\"nofollow noreferrer\"><code>liftIO</code></a> to fix it :-) Compare <a href=\"https://stackoverflow.com/a/51865577/1048572\">this answer</a>"}], "answers": [{"comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1572692906, "post_id": 58670304, "comment_id": 103642827, "body": "I&#39;d prefer to call these &quot;values&quot; or &quot;expressions&quot;, not &quot;statements&quot; - even if they are statement-like in <code>do</code> notation."}, {"owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1572693704, "post_id": 58670304, "comment_id": 103643036, "body": "@Bergi Yeah, in Haskell all &quot;statements&quot; are actually values like any other. In a way, the <code>Monad</code> typeclass defines what operations and laws a type must satisfy in order for its values to be statement-like."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 3, "creation_date": 1572696567, "post_id": 58670304, "comment_id": 103643659, "body": "@Bergi Curiously, the Haskell report uses <code>do { stmts }</code> in the reference <a href=\"https://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-470003.14\" rel=\"nofollow noreferrer\">grammar</a>, and <code>;</code> is called an &quot;empty statement&quot;, so I guess the official term is statement. This is probably not the best term, for the reasons you mention."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572697568, "post_id": 58670304, "comment_id": 103643906, "body": "I think the idea is that monadic values in Haskell correspond to statements in imperative languages. This is clear in the case of <code>IO</code>, which is presumably what motivated the idea, but more of a stretch with other monads. For example a <code>State s a</code> value can feel quite &quot;statement-like&quot; (particularly those which alter the state and ignore the result value), but it would feel very awkward to describe, say, a list as a &quot;statement&quot;."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1572699820, "post_id": 58670304, "comment_id": 103644517, "body": "@ch You have to admit, there are a <i>lot</i> of things in Haskell that could do with better names :)"}, {"owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1572704636, "post_id": 58670304, "comment_id": 103645719, "body": "@RobinZigmond This is very subjective but, do-blocks in the list monad do feel like composed of statements to me! Yes, there&#39;s a difference with <code>IO</code> in that each identifier bound with a <code>&lt;-</code> corresponds not to a single value, but to a whole level in an implicit search tree. List &quot;statements&quot; have the &quot;effect&quot; of adding new levels to the tree. I still see this as sequential, if only logically, and have trouble visualizing the search tree when not using do notation."}], "tags": [], "owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "is_accepted": true, "score": 7, "last_activity_date": 1572699632, "last_edit_date": 1572699632, "creation_date": 1572691291, "answer_id": 58670304, "question_id": 58670103, "link": "https://stackoverflow.com/questions/58670103/how-to-use-system-cmd-in-scotty-action/58670304#58670304", "title": "How to use System.cmd in Scotty action", "body": "<p>In Haskell, <a href=\"https://en.wikibooks.org/wiki/Haskell/do_notation\" rel=\"nofollow noreferrer\"><code>do</code>-notation</a> is used to chain statement-like things. A statement is some type constructor like <code>IO</code> applied to a particular result type. For example, the statement <code>system \"ls\"</code> has type <code>IO ExitCode</code>.</p>\n\n<p>Other type constructors other than <code>IO</code> can work as statements. All that <code>do</code>-notation requires is that the type constructor implements the <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad\" rel=\"nofollow noreferrer\"><code>Monad</code></a> <a href=\"https://en.wikipedia.org/wiki/Type_class\" rel=\"nofollow noreferrer\">interface</a> which explains how to chain statements sensibly.</p>\n\n<p>However, within a single <code>do</code>-block, <em>only one</em> type of statement is allowed! They must be all <code>IO</code> statements, or all <code>ActionT Text IO</code> statements. In your example you are mixing the two, which causes the error. Scotty's <a href=\"https://en.wikibooks.org/wiki/Haskell/do_notation\" rel=\"nofollow noreferrer\"><code>get</code></a> function expects an <a href=\"http://hackage.haskell.org/package/scotty-0.11.5/docs/Web-Scotty-Internal-Types.html#t:ActionT\" rel=\"nofollow noreferrer\"><code>ActionT Text IO</code></a> statement:</p>\n\n<pre><code>get :: RoutePattern -&gt; ActionM () -&gt; ScottyM ()\n-- ActionM is actually a synonym for ActionT Text IO\n</code></pre>\n\n<p>The good news is that there's a way to convert (the usual Haskell term is \"lift\") <code>IO</code> statements into <code>ActionT Text IO</code> statements. The latter are actually a kind of \"decorator\"   (the usual Haskell term is <a href=\"https://wiki.haskell.org/Monad_Transformers_Explained\" rel=\"nofollow noreferrer\">\"monad transformer\"</a>) over <code>IO</code> actions, which enable extra functionality related to Scotty. You can \"lift\" <code>IO</code> actions into the decorator using the <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad-IO-Class.html#v:liftIO\" rel=\"nofollow noreferrer\"><code>liftIO</code></a> function, like this:</p>\n\n<pre><code>get \"/url\" $ do                         \n     liftIO (system \"ls\")\n     text \"Success\"\n</code></pre>\n\n<p>In general, when can we use <code>liftIO</code> to lift a plain <code>IO</code> statement into a \"decorated\" statement? The \"decorator\" type constructor must have a <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad-IO-Class.html#t:MonadIO\" rel=\"nofollow noreferrer\"><code>MonadIO</code></a> instance besides the usual <code>Monad</code> instance. <code>MonadIO</code> is what provides the <code>liftIO</code> function.</p>\n\n<p>In our case, looking at the available instances for <a href=\"http://hackage.haskell.org/package/scotty-0.11.5/docs/Web-Scotty-Internal-Types.html#t:ActionT\" rel=\"nofollow noreferrer\"><code>ActionT</code></a>:</p>\n\n<pre><code>(MonadIO m, ScottyError e) =&gt; MonadIO (ActionT e m)\n</code></pre>\n\n<p>Which means something like \"if <code>m</code> is has a <code>MonadIO</code> instance\u2014like <code>IO</code> trivially does\u2014and the error type <code>e</code> has a <code>ScottyError</code> instance\u2014like <code>Text</code> does\u2014then we can lift <code>IO</code> statements to <code>ActionT e m</code> statements\".</p>\n\n<p>And the specialized type for <code>liftIO</code> is:</p>\n\n<pre><code>liftIO :: IO a -&gt; ActionT Text IO a\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 11550995, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KIbvl65k4cY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePwDhDfhhki8ZWaSLo97LoIowNRQ/mo/photo.jpg?sz=128", "display_name": "Rafael P&#225;ez Bastida", "link": "https://stackoverflow.com/users/11550995/rafael-p%c3%a1ez-bastida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 58670304, "answer_count": 1, "score": 4, "last_activity_date": 1602339839, "creation_date": 1572689603, "last_edit_date": 1602339839, "question_id": 58670103, "link": "https://stackoverflow.com/questions/58670103/how-to-use-system-cmd-in-scotty-action", "title": "How to use System.cmd in Scotty action", "body": "<p>I am trying to learn how do statements in haskell work. I a trying to make a very simple program where you can call a REST endpoint and execute a system command (something very simple like \"ls\") The problem comes with combining different actions types in a single do statement.</p>\n\n<pre><code>\nimport Web.Scotty\nimport System.Cmd\n\nmain = do\n  putStrLn \"Starting Server\"\n  scotty 3000 $ do\n    get \"/url\" $ do                         \n      system \"ls\"\n      text \"Success\"\n</code></pre>\n\n<p>But I get the next compiler error:</p>\n\n<pre><code>Main.hs:12:7:\n    Couldn't match expected type \u2018Web.Scotty.Internal.Types.ActionT\n                                    Data.Text.Internal.Lazy.Text IO a0\u2019\n                with actual type \u2018IO GHC.IO.Exception.ExitCode\u2019\n    In a stmt of a 'do' block: system \"ls\"\n    In the second argument of \u2018($)\u2019, namely\n      \u2018do { system \"ls\";\n            text \"Success\" }\u2019\n\n</code></pre>\n\n<p>I am having a hard time trying to learn Haskell!</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1572686329, "post_id": 58669715, "comment_id": 103641448, "body": "If you did this, like you here demonstrate, then that is not a problem. But it looks like you defined a <i>new</i> function <code>show</code> <i>outside</i> the <code>instance Show</code> scope."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1572686504, "post_id": 58669715, "comment_id": 103641478, "body": "Can you show exactly how you <i>use</i> <code>show</code> here? So share the part of the code that throws this error?"}, {"owner": {"reputation": 101, "user_id": 10264600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b841979464b11a302f56ce496febbaa?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Xoxo", "link": "https://stackoverflow.com/users/10264600/sarah-xoxo"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572686878, "post_id": 58669715, "comment_id": 103641545, "body": "I added it now above"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572687072, "post_id": 58669715, "comment_id": 103641585, "body": "Although not really a solution to the problem, it looks very &quot;odd&quot; to call <code>show</code> a second time, since <code>toBin (...)</code> will already return a string."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1572687505, "creation_date": 1572687505, "answer_id": 58669856, "question_id": 58669715, "link": "https://stackoverflow.com/questions/58669715/haskell-convert-integer-to-string-without-show/58669856#58669856", "title": "haskell convert Integer to String without show", "body": "<p>Your <code>toBin</code> does not need a call to <code>show</code> here. Indeed <code>toBin</code> has signature <code>Int -&gt; String</code>, so that means that <code>toBin (n `div` 2)</code> will return a <code>String</code>. By calling <code>show</code> on that value, you will add double quotes around it (making it look like a string literal).</p>\n\n<p>You thus can implement the <code>toBin</code> as:</p>\n\n<p>import Data.Char(intToDigit)</p>\n\n<pre><code>toBin :: Int -&gt; String\ntoBin 0 = \"0\"\ntoBin 1 = \"1\"\ntoBin n\n  | mod n 2 == 0 = rest ++ \"0\"\n  | otherwise = rest ++ \"1\"\n  where rest = toBin (div n 2)\n</code></pre>\n\n<p>or more efficient:</p>\n\n<pre><code>import Data.Char(intToDigit)\n\ntoBin :: Int -&gt; String\ntoBin = reverse . go\n    where go 0 = \"0\"\n          go 1 = \"1\"\n          go n = intToDigit (mod n 2) : go (div n 2)\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude Data.Char&gt; toBin 1425\n\"10110010001\"\n</code></pre>\n\n<p>Defining an extra instance for <code>Show</code> is not a problem. In fact the base package of Haskell has several dozens of <code>Show</code> instances.</p>\n\n<p>There are two reasons why the call might be ambiguous:</p>\n\n<ol>\n<li>it is not clear to the compiler what the type is you call show on. You can sometimes add a type clause to give the compiler a hint, like <code>show (a :: Int)</code>;</li>\n<li>you defined another <code>show</code> function <em>outside</em> the <code>instance Show &hellip; where &hellip;</code> scope, and thus defined another function.</li>\n</ol>\n"}], "owner": {"reputation": 101, "user_id": 10264600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b841979464b11a302f56ce496febbaa?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Xoxo", "link": "https://stackoverflow.com/users/10264600/sarah-xoxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 58669856, "answer_count": 1, "score": 2, "last_activity_date": 1572687505, "creation_date": 1572686191, "last_edit_date": 1572686860, "question_id": 58669715, "link": "https://stackoverflow.com/questions/58669715/haskell-convert-integer-to-string-without-show", "title": "haskell convert Integer to String without show", "body": "<p>Is there a way to convert an Integer to String in Haskell without using show?</p>\n\n<p>The problem is that in my code I have already declared a show instance.</p>\n\n<pre><code>instance Show ZZ where\n    show zz = toHexa (zzToInt zz)\n</code></pre>\n\n<p>So that the program throws the following error when I try to use show at another position</p>\n\n<p><code>Ambiguous variable occurrence \"show\"</code></p>\n\n<p>The way I try to use the \"normal\" show is the following:</p>\n\n<pre><code>toBin :: Int -&gt; String\ntoBin 0 = \"0\"\ntoBin 1 = \"1\"\ntoBin n\n | n `mod` 2 == 0 = show (toBin (n `div` 2)) ++ \"0\"\n | otherwise = show (toBin (n `div` 2)) ++ \"1\"\n</code></pre>\n\n<p>So I need another possibility for show</p>\n"}, {"tags": ["haskell", "haskell-lens"], "answers": [{"comments": [{"owner": {"reputation": 1994, "user_id": 1578857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MfJtz.png?s=128&g=1", "display_name": "Dima Kurilo", "link": "https://stackoverflow.com/users/1578857/dima-kurilo"}, "edited": false, "score": 0, "creation_date": 1572646507, "post_id": 58666441, "comment_id": 103635889, "body": "Thank you! I knew it should be simple. :) Didn&#39;t notice traverseOf."}], "tags": [], "owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "is_accepted": true, "score": 1, "last_activity_date": 1572645896, "creation_date": 1572645896, "answer_id": 58666441, "question_id": 58666061, "link": "https://stackoverflow.com/questions/58666061/what-is-the-proper-way-to-fill-some-complex-structure-with-data-from-io-using-le/58666441#58666441", "title": "What is the proper way to fill some complex structure with data from IO using Lenses?", "body": "<p>Yes, there's a better way. You're just missing some of the combinators lens offers. I suggest <a href=\"https://hackage.haskell.org/package/lens-4.18.1/docs/src/Control.Lens.Traversal.html#traverseOf\" rel=\"nofollow noreferrer\"><code>traverseOf</code></a>, though it also has several other aliases in the lens library... And all of them are just implemented as <code>id</code> anyway...</p>\n\n<pre><code>ds' &lt;- traverseOf (traverse . traverse . _1) (const getId) ds\n</code></pre>\n"}], "owner": {"reputation": 1994, "user_id": 1578857, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MfJtz.png?s=128&g=1", "display_name": "Dima Kurilo", "link": "https://stackoverflow.com/users/1578857/dima-kurilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 58666441, "answer_count": 1, "score": 1, "last_activity_date": 1572645896, "creation_date": 1572643355, "question_id": 58666061, "link": "https://stackoverflow.com/questions/58666061/what-is-the-proper-way-to-fill-some-complex-structure-with-data-from-io-using-le", "title": "What is the proper way to fill some complex structure with data from IO using Lenses?", "body": "<pre><code>{- Some code to illustrate what I mean: -}\nmodule Main where\n\nimport System.IO\nimport Control.Monad\nimport Control.Lens\nimport Data.UUID\nimport Data.UUID.V4\n\n-- I have complex data structure (initially, JSON) and I can use\n-- Data.Aeson.Lens to work with this structure. It's pretty comfortble\n-- in most cases. But let's suppose we have broken data structure.\n-- Instead of \"a\" I need to have unique key. Easiest way is to use GUID.\nds = [ [(\"a\", \"z\"),(\"a\", \"x\"),(\"a\", \"c\")]\n     , [(\"a\", \"v\"),(\"a\", \"b\"),(\"a\", \"n\")]\n     , [(\"a\", \"m\"),(\"a\", \",\"),(\"a\", \".\")]\n     ]\n\n-- So that's how we can get unique ID.\ngetId :: IO String\ngetId = toString &lt;$&gt; nextRandom\n\nmain :: IO ()\nmain = do\n-- To insert unique ID I can use a awkward way like this:\n-- generate pool of ids that is big enough.\n    let count = length $ ds ^.. traversed &lt;.&gt; traversed\n    ids &lt;- forM [0..count * count] $ const getId\n-- use Indexed Lens to have list of IDs for each data structure level\n-- and insert ID from pre generated list where I need it\n    let ds' = ds &amp; traversed &lt;.&gt; traversed %@~\n                 (\\(i1, i2) v -&gt; v &amp; _1 %~\n                    (\\v' -&gt; (ids !! (i1 * count + i2)) ++ v'))\n    print ds'\n-- It works. But I wonder if there is some better way to do the same.\n</code></pre>\n"}, {"tags": ["haskell", "higher-order-functions"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 3, "creation_date": 1572632183, "post_id": 58663922, "comment_id": 103631230, "body": "Why do you call it &quot;guessing&quot;? There&#39;s no guesswork involved."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572632377, "post_id": 58663922, "comment_id": 103631329, "body": "But to be more constructive: have you attempted to figure out for yourself what the types must be? (Start with the first one, as its easier, although exactly the same reasoning applies for both.) How much can you say in words about the type of the first argument <code>g</code> for example?"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1572633152, "post_id": 58663922, "comment_id": 103631604, "body": "The type signatures are perfectly clear. <code>f :: (a -&gt; b -&gt; c) </code> which means the first parameter of <code>f</code> is of type <code>a</code> yields the return value of <code>g</code> has to be of type <code>a</code>. The second parameter of <code>f</code> which is <code>x</code>, is of type <code>b</code> which yields the first parameter of <code>g</code> which is also <code>x</code> to become of type <code>b</code> which yields <code>g</code> to take a type signature like <code>(b -&gt; d -&gt; a)</code> whereas the type parameter <code>d</code> is assigned for the <code>y</code> parameter of the function <code>h</code>. So the type of <code>h</code> function turns out to be <code>(a -&gt; b -&gt; c) -&gt; (b -&gt; d -&gt; a) -&gt; b -&gt; d -&gt; c</code>"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "edited": false, "score": 1, "creation_date": 1572640961, "post_id": 58664904, "comment_id": 103634407, "body": "Thank I figure it out second one with the same logic!"}], "tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": true, "score": 4, "last_activity_date": 1572637193, "last_edit_date": 1572637193, "creation_date": 1572636727, "answer_id": 58664904, "question_id": 58663922, "link": "https://stackoverflow.com/questions/58663922/haskell-higher-order-function-type/58664904#58664904", "title": "Haskell Higher order function Type", "body": "<p>I'll walk you through the first one: hopefully this gives you enough of an idea that you can figure out the second one by yourself.</p>\n\n<p>So the function definition is:</p>\n\n<pre><code>f g (x,y)= g x y\n</code></pre>\n\n<p><code>f</code> is the function we're interested in, and we can see from the above - just from the left hand side in fact -  that it takes 2 arguments: <code>g</code> and the tuple <code>(x,y)</code>. So let's use some type variables:</p>\n\n<ul>\n<li>we'll use <code>a</code> for the type of <code>g</code></li>\n<li><code>b</code> for the type of <code>x</code></li>\n<li><code>c</code> for the type of <code>y</code></li>\n<li>and <code>d</code> for the type that <code>f</code> outputs when given the two arguments.</li>\n</ul>\n\n<p>This gives us</p>\n\n<pre><code>f :: a -&gt; (b, c) -&gt; d\n</code></pre>\n\n<p>and further that is <em>all</em> the information that we can get from the left of the <code>=</code>. We can learn more by looking at the right hand side - the <code>g x y</code> which must be of type <code>d</code>.</p>\n\n<p>Well the expression <code>g x y</code> itself tells us that <code>g</code> is a function which can take 2 arguments. And further we have already assigned types to those arguments - and to its return value (since this is the same value that <code>f g (x,y)</code> outputs, which we already said has type <code>d</code>).</p>\n\n<p>Writing it all out, we find that the type of <code>g</code> is simply <code>b -&gt; c -&gt; d</code>. Substituting that in the type of <code>f</code> which we wrote down above, we get:</p>\n\n<pre><code>f :: (b -&gt; c -&gt; d) -&gt; (b, c) -&gt; d\n</code></pre>\n\n<p>If we cared, we could rename the type variables now so that this matches the signature you were given - but hopefully you can see that they're the same without having to do that.</p>\n\n<p>As I said, although slightly more involved, the second exercise can be solved using exactly the same logic.</p>\n"}], "owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 58664904, "answer_count": 1, "score": 1, "last_activity_date": 1572637193, "creation_date": 1572631823, "last_edit_date": 1572632683, "question_id": 58663922, "link": "https://stackoverflow.com/questions/58663922/haskell-higher-order-function-type", "title": "Haskell Higher order function Type", "body": "<p>I am studying haskell now.\nBut I am struggling with 'Type'. </p>\n\n<ol>\n<li>For example,\ntype of <code>f</code> function is</li>\n</ol>\n\n<p><code>f g (x,y)= g x y</code></p>\n\n<p><code>(a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c</code></p>\n\n<ol start=\"2\">\n<li>type of the following Haskell function h</li>\n</ol>\n\n<p><code>h f g x y = f (g x y) x</code></p>\n\n<p><code>(a -&gt; b -&gt; c) -&gt; (b -&gt; d -&gt; a) -&gt; b -&gt; d -&gt; c</code></p>\n\n<p>How can I understand how to guess type of function?</p>\n"}, {"tags": ["haskell", "numbers"], "comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 3, "creation_date": 1572602290, "post_id": 58657137, "comment_id": 103617763, "body": "<a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:realToFrac\" rel=\"nofollow noreferrer\"><code>realToFrac</code></a>?"}, {"owner": {"reputation": 3695, "user_id": 6213048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8fcf68f42b160a352e7fa157dba36392?s=128&d=identicon&r=PG", "display_name": "soywod", "link": "https://stackoverflow.com/users/6213048/soywod"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1572602643, "post_id": 58657137, "comment_id": 103617878, "body": "I searched for a while, but I didn&#39;t find this... It fits perfectly my needs, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "is_accepted": true, "score": 2, "last_activity_date": 1572638854, "creation_date": 1572638854, "answer_id": 58665298, "question_id": 58657137, "link": "https://stackoverflow.com/questions/58657137/fixed-number-conversion-with-different-precision/58665298#58665298", "title": "Fixed number conversion with different precision", "body": "<p>I could be wrong, but it feels like this deserves a longer answer than the one in the comments...</p>\n\n<p>The <code>NominalDiffTime</code> type has instances for various numeric typeclasses (<code>Num</code>, <code>Fractional</code>, etc.) which allow it to be treated as a plain numeric type in seconds.  This allows you to write things like:</p>\n\n<pre><code>halfSecondLater :: NominalDiffTime -&gt; NominalDiffTime\nhalfSecondLater x = x + 0.5\n</code></pre>\n\n<p>Similarly, <code>Micro</code> is just a type alias for <code>Fixed E6</code> which is a fixed precision numeric type with an appropriate set of numeric typeclasses.</p>\n\n<p>So, converting a <code>NominalDiffTime</code> type (which is a numeric type in seconds) to a <code>Micro</code> (which is a numeric type in some unspecified unit that could be seconds) is not much different than converting a <code>Double</code> to a <code>Float</code>.</p>\n\n<p>The general conversion function between real, but non-integer, numeric types is the function <code>realToFrac</code>, which no one can ever remember or find, because it's named for the typeclasses it converts between (since <code>Real</code> implements <code>toRational</code> while <code>Fractional</code> implements <code>fromRational</code>) instead of what it's actually used for.</p>\n\n<p>So, you could use <code>realToFrac</code> directly, or write a specialization:</p>\n\n<pre><code>nominalToMicro :: NominalDiffTime -&gt; Micro\nnominalToMicro = realToFrac\n</code></pre>\n"}], "owner": {"reputation": 3695, "user_id": 6213048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8fcf68f42b160a352e7fa157dba36392?s=128&d=identicon&r=PG", "display_name": "soywod", "link": "https://stackoverflow.com/users/6213048/soywod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 58665298, "answer_count": 1, "score": 2, "last_activity_date": 1572638854, "creation_date": 1572601879, "question_id": 58657137, "link": "https://stackoverflow.com/questions/58657137/fixed-number-conversion-with-different-precision", "title": "Fixed number conversion with different precision", "body": "<p>I'm new to Haskell, and I can't figure out how to convert a <strong>NominalDiffTimeSource</strong> (from the package <a href=\"https://hackage.haskell.org/package/time-1.7/docs/Data-Time-Clock.html#t:NominalDiffTime\" rel=\"nofollow noreferrer\">time</a>, which has a precision of <code>10^-12</code>) to a <strong>Micro</strong> (from the <a href=\"http://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Fixed.html#t:Micro\" rel=\"nofollow noreferrer\">base</a> package, which has a precision of <code>10^-6</code>).</p>\n"}, {"tags": ["list", "haskell", "integer"], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572613687, "post_id": 58655684, "comment_id": 103622589, "body": "Nice, hadn&#39;t heard the term &quot;Fairbairn threshold&quot; before."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1572621244, "post_id": 58655684, "comment_id": 103626253, "body": "very nice answer indeed"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1572640758, "post_id": 58655684, "comment_id": 103634342, "body": "My favorite example of something exceeding the Fairbairn threshold (almost) only because few people would think of the most efficient way to do it is <code>Data.Sequence.intersperse</code>. I&#39;m quite proud of that one."}], "tags": [], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "is_accepted": true, "score": 5, "last_activity_date": 1572608840, "last_edit_date": 1572608840, "creation_date": 1572593628, "answer_id": 58655684, "question_id": 58655450, "link": "https://stackoverflow.com/questions/58655450/find-index-of-largest-integer/58655684#58655684", "title": "Find index of largest Integer", "body": "<p>You can simplify the code like this:</p>\n\n<pre><code>aiRow :: Board -&gt; IO Int\naiRow xs = return $ snd $ aiHelper xs\n</code></pre>\n\n<p>Or, by making an <a href=\"https://wiki.haskell.org/Eta_conversion\" rel=\"nofollow noreferrer\">Eta reduction</a>, to this:</p>\n\n<pre><code>aiRow :: Board -&gt; IO Int\naiRow = return . snd . aiHelper\n</code></pre>\n\n<p>But, really, you don't need to return <code>IO Int</code>. Why not just the following?</p>\n\n<pre><code>aiRow :: Board -&gt; Int\naiRow = snd . aiHelper\n</code></pre>\n\n<p>At this point, however, you're probably below the <a href=\"https://wiki.haskell.org/Fairbairn_threshold\" rel=\"nofollow noreferrer\">Fairbairn threshold</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": false, "score": 1, "last_activity_date": 1572603418, "creation_date": 1572603418, "answer_id": 58657491, "question_id": 58655450, "link": "https://stackoverflow.com/questions/58655450/find-index-of-largest-integer/58657491#58657491", "title": "Find index of largest Integer", "body": "<p>After Mark's proposal, <code>aiRow</code> now does so little on its own that you might as well combine it with <code>aiHelper</code>:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>maximumIndex :: Ord a =&gt; [a] -&gt; Int\nmaximumIndex = fst . maximumBy (comparing snd) . zip [1..]\n</code></pre>\n\n<p>(Switching <code>fst</code> and <code>snd</code>.)</p>\n"}], "owner": {"reputation": 190, "user_id": 12105730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0733efb1cec773dd7b2a6bab463b11cc?s=128&d=identicon&r=PG&f=1", "display_name": "DonnumS", "link": "https://stackoverflow.com/users/12105730/donnums"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "accepted_answer_id": 58655684, "answer_count": 2, "score": 2, "last_activity_date": 1572608840, "creation_date": 1572592303, "last_edit_date": 1572593719, "question_id": 58655450, "link": "https://stackoverflow.com/questions/58655450/find-index-of-largest-integer", "title": "Find index of largest Integer", "body": "<p>I'm dabbling in some Haskell and have stumbled upon a bump in the road</p>\n\n<p>I want to write a function that an AI uses to choose a row in a simple board game. The board in said game is represented by a list of integers. Like this:</p>\n\n<pre><code>board = [1,2,3,4,5]\n</code></pre>\n\n<p>The index + 1 of the numbers in the row on the board and the <code>Int</code> itself is the number of pieces left on said row. How I aim to make this function work is by first to find the largest number in the list and then return (index + 1) of this number in the form of an <code>IO Int</code>. </p>\n\n<p>This is where I'm struggling since I can't seem to find any good answer to this online</p>\n\n<p>This is what I'm working with so far:</p>\n\n<pre><code>-- Returns index of row with largest number along the number itself\naiHelper :: Board -&gt; (Int, Int)\naiHelper xs = maximumBy (comparing fst) (zip xs [1..])\n\n-- Returns row with largest number as IO Int\naiRow :: Board -&gt; IO Int\naiRow xs = do\n              let y = snd $ aiHelper xs\n              return $ y\n</code></pre>\n\n<p>I'm not quite sure if this code does what I'm looking for, and is there an easier and cleaner solution to my code?</p>\n"}, {"tags": ["haskell", "ghc", "type-variables", "type-kinds", "type-constructor"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1572595272, "post_id": 58655104, "comment_id": 103615390, "body": "Note that <code>(a,b)</code> is syntactic sugar for <code>(,) a b</code>, while <code>(a,b,c)</code> is syntactic sugar for <code>(,,) a b c</code>, and so on. Even <code>a -&gt; b</code> is shorthand for <code>(-&gt;) a b</code>, and <code>[a]</code> is sugar for <code>[] a</code>. Hence, all these types are of the form <code>T arg1 ... argn</code> for some type constructor <code>T</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572614943, "post_id": 58655104, "comment_id": 103623215, "body": "Specifically, <code>c</code> is the partial application of <code>(,,)</code> to <code>()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1572593838, "creation_date": 1572593838, "answer_id": 58655718, "question_id": 58655104, "link": "https://stackoverflow.com/questions/58655104/what-ghc-haskell-specification-says-that-free-type-constructors-match-rightmost/58655718#58655718", "title": "What GHC/Haskell specification says that free type constructors match rightmost types?", "body": "<p>Unless I misunderstand the question, this simply follows from type application being left-associative, just like function application.</p>\n\n<p><code>(a, b)</code> is <code>(,) a b</code> is <code>((,) a) b</code>. So <code>(Int, a)</code> is <code>((,) Int) a</code>, but <code>(a, Int)</code> isn't <code>&lt;something&gt; a</code>.</p>\n"}], "owner": {"reputation": 2773, "user_id": 3925507, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/bXVeK.png?s=128&g=1", "display_name": "concat", "link": "https://stackoverflow.com/users/3925507/concat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 58655718, "answer_count": 1, "score": 1, "last_activity_date": 1572593838, "creation_date": 1572590307, "question_id": 58655104, "link": "https://stackoverflow.com/questions/58655104/what-ghc-haskell-specification-says-that-free-type-constructors-match-rightmost", "title": "What GHC/Haskell specification says that free type constructors match rightmost types?", "body": "<p>I was caught off guard recently when I tried to pass a constructor for a type of kind <code>* -&gt; * -&gt; *</code>, with one bound type var, to a function expecting a constructor for <code>* -&gt; *</code>. Concretely, it was along the lines of passing <code>(\\x -&gt; (x, 42)) :: (forall a. a -&gt; (a, Int))</code> to a function of type <code>forall c. (forall a. a -&gt; c a) -&gt; ...</code>. This is ambiguous but not an error in GHC: <code>(,)</code> cast to <code>* -&gt; *</code> could be interpreted as a constructor for either the left or righthand argument, and GHC appears to just default to the righthand argument. For higher-kinded matches, it'll take the right<i>most</i> arguments. To see this, just test the inferred type:</p>\n\n<pre><code>foo :: c a b -&gt; a -&gt; b -&gt; ()\nfoo _ _ _ = ()\n\nbar = foo ((), 42, 'a') 42 'a' -- typechecks\n</code></pre>\n\n<p>I wrongly believed instead that it would match the free variables in order, but this higher-rank case is the only time where that would obviously be preferred, and other times it's a wash. Is there official documentation describing this rule? I'm slightly annoyed but also understanding of the fact that this is not an error, because I can foresee that saves wrapping a lot of things in newtypes.</p>\n"}, {"tags": ["haskell", "char", "int"], "answers": [{"comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1572570107, "post_id": 58652788, "comment_id": 103610484, "body": "This needs a language extension, doesn&#39;t it? ViewPatterns or something?"}, {"owner": {"reputation": 190, "user_id": 12105730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0733efb1cec773dd7b2a6bab463b11cc?s=128&d=identicon&r=PG&f=1", "display_name": "DonnumS", "link": "https://stackoverflow.com/users/12105730/donnums"}, "edited": false, "score": 0, "creation_date": 1572570816, "post_id": 58652788, "comment_id": 103610624, "body": "Hi! Thanks for answering my question. I tried implementing your suggestion but I get the following error message in ghci:  ``` Variable not in scope: readMaybe :: String -&gt; Maybe Int  ```"}, {"owner": {"reputation": 190, "user_id": 12105730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0733efb1cec773dd7b2a6bab463b11cc?s=128&d=identicon&r=PG&f=1", "display_name": "DonnumS", "link": "https://stackoverflow.com/users/12105730/donnums"}, "edited": false, "score": 0, "creation_date": 1572571912, "post_id": 58652788, "comment_id": 103610820, "body": "Actually my own stupidity caused an error on this one. I didn&#39;t even think about the fact that there was a module I had to import. Works perfectly now thanks!"}, {"owner": {"reputation": 34864, "user_id": 237428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ThNhZ.jpg?s=128&g=1", "display_name": "Antal Spector-Zabusky", "link": "https://stackoverflow.com/users/237428/antal-spector-zabusky"}, "edited": false, "score": 2, "creation_date": 1572578802, "post_id": 58652788, "comment_id": 103611960, "body": "amalloy: Not anymore \u2013 Haskell 2010 added PatternGuards, which is the extension you\u2019re thinking of."}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 7, "last_activity_date": 1572568517, "creation_date": 1572568517, "answer_id": 58652788, "question_id": 58652589, "link": "https://stackoverflow.com/questions/58652589/how-to-code-a-case-block-in-haskell-that-works-with-int-and-char/58652788#58652788", "title": "How to code a case block in Haskell that works with Int and Char", "body": "<p>The input will <em>always</em> be a string. That string may contain a decimal representation of an integer, but that doesn't change anything about the type.</p>\n\n<p>So, what you want to check there is whether it is a string <em>that can be parsed</em> as an integer. A nice way to do that is with <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Text-Read.html#v:readMaybe\" rel=\"noreferrer\"><code>readMaybe</code></a>. That means however you're not checking on <code>h</code> itself, but rather on <code>readMaybe h</code>, on in fact <code>mapM readMaybe inputs</code> (i.e. trying to read <em>all</em> of the input, check whether all succeed). But we can still use the same <code>case</code> block, we just need to introduce the modified expression to match on with a <em>pattern guard</em>. While we're at it, let's get rid of <code>h</code> entirely, just put <code>inputs</code> in the case expression:</p>\n\n<pre><code>          case inputs of\n             [\"q\"] -&gt; do\n                play\n             [\"?\"] -&gt; do\n                putStrLn \"r is the row and a is amount to remove\"\n                putStrLn \"The person to remove the last piece wins\"\n                play board player\n\n             -- The case below is the one that I can't seem to make work\n             -- Wrote Int -&gt; do now just to make it clear what I'm looking to do \n             _ | Just [row, num] &lt;- mapM readMaybe inputs\n               -&gt; if valid board row num then\n                   ...\n</code></pre>\n"}], "owner": {"reputation": 190, "user_id": 12105730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0733efb1cec773dd7b2a6bab463b11cc?s=128&d=identicon&r=PG&f=1", "display_name": "DonnumS", "link": "https://stackoverflow.com/users/12105730/donnums"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 58652788, "answer_count": 1, "score": -1, "last_activity_date": 1572568517, "creation_date": 1572566458, "question_id": 58652589, "link": "https://stackoverflow.com/questions/58652589/how-to-code-a-case-block-in-haskell-that-works-with-int-and-char", "title": "How to code a case block in Haskell that works with Int and Char", "body": "<p>I'm working on some Haskell code and stumbled upon a problem. Basically I'm coding a case of block to check the input given by the user that checks if the input is any of the accepted chars as well as Ints</p>\n\n<p>I've tried coding another case block after the first one, but I couldn't work that out. I've tried to code an if-else block that checks if the input is int even before the case block, but that also failed</p>\n\n<p>This is the block of code taken from the middle of the function:</p>\n\n<pre><code>if player == 1 then\n           do newline\n              putStr \"Nim: r a / ? / q &gt; \"\n              inp &lt;- getLine\n              let inputs = words inp\n                  h = head inputs\n              case h of\n                 \"q\" -&gt; do\n                    play\n                 \"?\" -&gt; do\n                    putStrLn \"r is the row and a is amount to remove\"\n                    putStrLn \"The person to remove the last piece wins\"\n                    play board player\n\n                 -- The case below is the one that I can't seem to make work\n                 -- Wrote Int -&gt; do now just to make it clear what I'm looking to do \n                 Int -&gt; do\n                    let row = (read(inputs !! 0) :: Int)\n                    let row = (read(inputs !! 1) :: Int)\n                    if valid board row num then\n                       play (move board row num) (next player)\n                    else\n                       do newline\n                          putStrLn \"ERROR: Invalid move\"\n                          play board player\n\n</code></pre>\n\n<p>Expected scenarios:</p>\n\n<pre><code>Nim: r a / ? / q &gt; q\n&gt;&gt; \"quits game\"\n\nNim: r a / ? / q &gt; ?\n&gt;&gt; r is the row and a is amount to remove\n&gt;&gt; etc etc...\n\nNim: r a / ? / q &gt; 2 2\n&gt;&gt; \"Perform move 2 2\"\n\n</code></pre>\n\n<p>The first two scenarios work. My only problem is to integrate a way to check if the inputs are integers in the case block.</p>\n\n<p>Any help is appreciated</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 5, "creation_date": 1572563062, "post_id": 58652201, "comment_id": 103609071, "body": "This is the question for <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 1, "creation_date": 1572589646, "post_id": 58652201, "comment_id": 103613842, "body": "I&#39;m voting to close this question as off-topic because it belongs on the Code Review Q&amp;A site."}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1572634883, "post_id": 58652201, "comment_id": 103632246, "body": "I am not familiar with hackerRank, but their page for the Haskell version of this question looks a bit weird. The C++ version looks perfectly reasonable. Regarding your code, it might have been reinventing some pre-existing library functionality. Please let us know if you post something into <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}], "owner": {"reputation": 301, "user_id": 2773933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-wD8zUbBMBVI/AAAAAAAAAAI/AAAAAAAAIGs/njtrAvsaRVk/photo.jpg?sz=128", "display_name": "presci", "link": "https://stackoverflow.com/users/2773933/presci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572563010, "creation_date": 1572563010, "question_id": 58652201, "link": "https://stackoverflow.com/questions/58652201/suggestion-on-the-hackerrank-solution-about-alphabets-and-weight", "title": "Suggestion on the hackerRank solution about alphabets and weight", "body": "<p>I have solved the <a href=\"https://www.hackerrank.com/challenges/designer-pdf-viewer/problem\" rel=\"nofollow noreferrer\">designer pdf</a> question  with haskell. The code works. I am posting the code here to know how I could have done it better.</p>\n\n<ul>\n<li>First line contains the weight of each alphabet</li>\n<li>Second line contains the word.</li>\n</ul>\n\n<p>Sample input</p>\n\n<pre><code>1 3 1 3 1 4 1 3 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 7\nzaba\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>28\n</code></pre>\n\n<p>explanation each character would take 1 space and multiply it with the max weight</p>\n\n<pre><code>4 characters * 1 space * 7 weight = 28\n</code></pre>\n\n<p>'z' has the max weight of 7.</p>\n\n<p>Code</p>\n\n<pre><code>import Data.List\nimport Data.Maybe\n\ngetintval::(Maybe Int) -&gt; Int\ngetintval Nothing = 1\ngetintval (Just x) = x\n\nsolve'::[Char]-&gt;[(Char, Int)] -&gt; Int\nsolve' ch lst = k $  map getintval $ map (\\x -&gt; finder' x) ch\n  where\n  k::[Int] -&gt; Int\n  k fb = (*) (length ch)   $ foldl (\\acc x -&gt; max acc x) 1 fb\n  finder'::Char -&gt; Maybe Int\n  finder' g =  case i of\n            Just(x1,x2) -&gt; Just x2\n            Nothing -&gt; Just 1\n            where i = find(\\(val1, val2) -&gt; val1 == g) lst\n\n\nsolve::[Char] -&gt; [Char] -&gt; Int\nsolve wght val = solve' val rec\n  where\n  rec::[(Char, Int)]\n  rec = zipWith (\\x y -&gt; (x, y)) ['a'..'z'] word1\n  word1::[Int]\n  word1 = map(read::String-&gt;Int) $ words wght\n\nmain::IO()\nmain = do\n  weight &lt;- getLine\n  pdfstr &lt;- getLine\n  putStr . show $ solve weight pdfstr\n</code></pre>\n\n<p>All the test on HackerRank are success</p>\n"}, {"tags": ["haskell", "time", "functional-programming", "equality"], "comments": [{"owner": {"reputation": 26323, "user_id": 108915, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a00512b12118ebd20d2043802b38bd02?s=128&d=identicon&r=PG", "display_name": "ziggystar", "link": "https://stackoverflow.com/users/108915/ziggystar"}, "edited": false, "score": 0, "creation_date": 1572535700, "post_id": 58646633, "comment_id": 103598292, "body": "A minute has passed <b>since when</b>? Now is never in a minute."}, {"owner": {"reputation": 23, "user_id": 9897406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1046cad97e3ac031abc54e51ae9a4632?s=128&d=identicon&r=PG&f=1", "display_name": "Icenezz", "link": "https://stackoverflow.com/users/9897406/icenezz"}, "reply_to_user": {"reputation": 26323, "user_id": 108915, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a00512b12118ebd20d2043802b38bd02?s=128&d=identicon&r=PG", "display_name": "ziggystar", "link": "https://stackoverflow.com/users/108915/ziggystar"}, "edited": false, "score": 0, "creation_date": 1572535739, "post_id": 58646633, "comment_id": 103598309, "body": "@ziggystar since the last previous current time"}], "answers": [{"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 7, "last_activity_date": 1572536227, "creation_date": 1572536227, "answer_id": 58646796, "question_id": 58646633, "link": "https://stackoverflow.com/questions/58646633/is-there-a-way-in-haskell-to-check-if-a-minute-has-passed-since-the-previous-cur/58646796#58646796", "title": "Is there a way in Haskell to check if a minute has passed since the previous current time?", "body": "<p>This would do basically what you're asking:</p>\n\n<pre><code>import Data.Time\n\nmain :: IO ()\nmain = do\n   t0 &lt;- getCurrentTime\n   go t0\n where go tl = do\n         t &lt;- getCurrentTime\n         if t &gt;= 60`addUTCTime`tl\n          then do\n             putStrLn \"You got a point!\"\n             go t\n          else go tl\n</code></pre>\n\n<p>Of course, this busy waiting in a recursive loop isn't exactly efficient. A much simpler and better solution would be just</p>\n\n<pre><code>import Control.Concurrent (threadDelay)\nimport Control.Monad (forever)\n\nmain :: IO ()\nmain = forever $ do\n   threadDelay $ 60 * 10^6\n   putStrLn \"You got a point!\"\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9897406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1046cad97e3ac031abc54e51ae9a4632?s=128&d=identicon&r=PG&f=1", "display_name": "Icenezz", "link": "https://stackoverflow.com/users/9897406/icenezz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 58646796, "answer_count": 1, "score": 2, "last_activity_date": 1572536227, "creation_date": 1572535605, "question_id": 58646633, "link": "https://stackoverflow.com/questions/58646633/is-there-a-way-in-haskell-to-check-if-a-minute-has-passed-since-the-previous-cur", "title": "Is there a way in Haskell to check if a minute has passed since the previous current time?", "body": "<p>I'm new to Haskell and I'm trying to set up a bot that gives you points according if a minute has passed</p>\n\n<p>I've tried looking up ways to get a current time and adding a minute on top of that and check whenever that would equal when a minute has passed such as addUTCTime.</p>\n\n<p>How I would love it to look is just like this</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>if(timeNow == timeInAMinute) then sendMsg (\"You got a point added!\") else return ()\n</code></pre>\n\n<p>I've come to no avail just yet, so I would hope there is some actual way to go about this. I also still have to deal with the IO stuff still. So back to my question, is there a way to check if a minute has passed from the current time?</p>\n"}, {"tags": ["parsing", "haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1572533155, "post_id": 58645859, "comment_id": 103596710, "body": "You can use <code>deriving (Show, Read)</code> in your <code>data BinaryTree</code>, and thne it will make a parser itself."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572533330, "post_id": 58645859, "comment_id": 103596822, "body": "There is something not entirely correct with the function code, it should be <code>return (Branch x y)</code> for example."}], "answers": [{"tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": true, "score": 2, "last_activity_date": 1572538134, "last_edit_date": 1592644375, "creation_date": 1572538134, "answer_id": 58647311, "question_id": 58645859, "link": "https://stackoverflow.com/questions/58645859/parse-binarytree-with-read-a-show-a/58647311#58647311", "title": "Parse BinaryTree with (Read a, Show a)", "body": "<p>As Willem says, you can derive <code>Read</code> to get this function for free:</p>\n<pre class=\"lang-hs prettyprint-override\"><code>data Letter = A | B | C | D | E | F | G\n  deriving (Show, Eq, Enum, Bounded, Read)\n\ndata BinaryTree a = Leaf a | Branch (BinaryTree a) (BinaryTree a)\n  deriving (Eq, Show, Read)\n\nt :: BinaryTree Letter\nt = Branch (Leaf A) (Branch (Branch (Leaf A) (Leaf C)) (Leaf D))\n</code></pre>\n<p>Trying this:</p>\n<pre class=\"lang-hs prettyprint-override\"><code>\u03bb&gt; t == read (show t)\nTrue\n</code></pre>\n<blockquote>\n<p>create the tree else return &quot;&quot; for failed parsing all without <code>deriving (Show, Read)</code>.</p>\n<pre class=\"lang-hs prettyprint-override\"><code>parseTree = do{ item; symb &quot;Leaf&quot;; ... +++ ... }\n</code></pre>\n</blockquote>\n<p>I'm not sure what &quot;&quot; means in the context of reading a binary tree from a string: According to your definition of binary tree, trees cannot be empty, since even <code>Leaf</code> contains at least one letter. So maybe you're looking for a function <code>String -&gt; Maybe (BinaryTree Letter)</code>.</p>\n<p>Since your reluctance to use derived <code>Show</code> and <code>Read</code> instances, this must be an exercise in writing a parser. You could structure a recursive-descent parser in the following way:</p>\n<pre class=\"lang-hs prettyprint-override\"><code>parseLetter :: String -&gt; Maybe (Letter, String)\nparseLetter s = ...\n\nparseTree :: String -&gt; Maybe (BinaryTree Letter, String)\nparseTree s\n  | &quot;Leaf &quot; `isPrefixOf` s = ...\n  | &quot;Branch &quot; `isPrefixOf` s = ...\n  | otherwise = Nothing\n</code></pre>\n<p>Here the <code>(..., String)</code> is the left-over of the string being parsed that isn't consumed by a sub-parser. E.g. in parsing <code>Branch (Leaf A) (Leaf B)</code>, when <code>parseLetter</code> has parsed <code>A</code>, it may return <code>(A, &quot;) (Leaf B)&quot;)</code> for its caller.</p>\n<p>Note, however, that getting something of comparable quality to <code>deriving Read</code> requires being pretty flexible with regards to whitespace and parentheses:</p>\n<pre><code>\u03bb&gt; read &quot;Branch ( Leaf A)(  Branch (  Leaf B )   ((Leaf C) )   ) &quot; :: BinaryTree Letter\nBranch (Leaf A) (Branch (Leaf B) (Leaf C))\n</code></pre>\n<blockquote>\n<p>I am unsure how I would handle the case of going through a leaf or branch</p>\n</blockquote>\n<p>Going through a leaf means parsing a single letter.</p>\n<p>Going through a branch means calling upon the parser recursively.</p>\n<p>You may want to use a more efficient and ergonomic parsing library, like <a href=\"http://hackage.haskell.org/package/base/docs/Text-Read.html\" rel=\"nofollow noreferrer\">what <code>Text.Read</code> exposes</a> (it even contains an example of reading a tree type), or you might want to use a parser combinator framework like <a href=\"https://markkarpov.com/megaparsec/megaparsec.html\" rel=\"nofollow noreferrer\">Megaparsec</a> or <a href=\"https://hackage.haskell.org/package/base/docs/Text-ParserCombinators-ReadP.html#t:ReadP\" rel=\"nofollow noreferrer\">ReadP</a>.</p>\n"}], "owner": {"reputation": 45, "user_id": 8600572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfwkI.gif?s=128&g=1", "display_name": "Killimanjaro", "link": "https://stackoverflow.com/users/8600572/killimanjaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58647311, "answer_count": 1, "score": 2, "last_activity_date": 1572538134, "creation_date": 1572533086, "last_edit_date": 1572537890, "question_id": 58645859, "link": "https://stackoverflow.com/questions/58645859/parse-binarytree-with-read-a-show-a", "title": "Parse BinaryTree with (Read a, Show a)", "body": "<p>I am having a little trouble on how to start this problem. I am supposed to parse a string representation of a binary tree and check whether the contents of a leaf have valid letters and if they do then create the tree else return \"\" for failed parsing all without deriving  (Show,Read)</p>\n\n<pre><code>data BinaryTree a = Leaf a | Branch (BinaryTree a) (BinaryTree a) deriving Show\n\n\ndata letters = A | B | C | D | E | F | G deriving (Show, Eq, Enum, Bounded, Read)\n\nlett = [(A)..(G)]\nstr = \"Branch (Leaf A) (Branch (Branch (Leaf A) (Leaf C)) (Leaf D))\"\n\nparse:: (Read a, Show a) =&gt; [a] -&gt; String -&gt;  BinaryTree  a\n</code></pre>\n\n<p>Using a typical parser library I could use  something along the lines of </p>\n\n<pre><code>parseTree = do{item; symb \"Leaf\"; x &lt;- string; return Leaf (read x)} +++ {item; symb \"Branch\"; item;x &lt;- parseTree; item; item; y &lt;- parseTree; item; return (Branch x y)} \n</code></pre>\n\n<p>The type constraint of  (Read a, Show a) confuses me as I am unsure how I would handle the case of going through a leaf or branch.</p>\n"}, {"tags": ["function", "loops", "haskell"], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 4, "last_activity_date": 1572569228, "last_edit_date": 1572569228, "creation_date": 1572530956, "answer_id": 58645141, "question_id": 58644957, "link": "https://stackoverflow.com/questions/58644957/how-to-take-an-output-list-of-a-function-as-input-to-another-function-in-haskell/58645141#58645141", "title": "How to take an output list of a function as input to another function in Haskell?", "body": "<blockquote>\n  <p>Now how to take each element in this list and put it here</p>\n\n<pre><code>evaluate (And (Var 'a') (Or (Var 'c') (Var 'b'))) \"HERE\"\n</code></pre>\n</blockquote>\n\n<p>Like this:</p>\n\n<pre><code>map (evaluate (And ...)) (subsets \"abc\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 1, "last_activity_date": 1572596054, "last_edit_date": 1572596054, "creation_date": 1572538296, "answer_id": 58647369, "question_id": 58644957, "link": "https://stackoverflow.com/questions/58644957/how-to-take-an-output-list-of-a-function-as-input-to-another-function-in-haskell/58647369#58647369", "title": "How to take an output list of a function as input to another function in Haskell?", "body": "<blockquote>\n<pre><code>&gt; truthtable (And (Var 'a') (Or (Var 'c') (Var 'b')))\n\n[(\"\",False),(\"c\",False),(\"b\",False), ...\n</code></pre>\n</blockquote>\n\n<p>You mean,</p>\n\n<pre><code>truthtable expr =\n            [ evaluate expr s | s &lt;- subsets (variables expr) ]\n{-\n expr ::               BoolExpr\n variables ::          BoolExpr -&gt; [Variable]\n variables expr ::                 [Variable]\n subsets ::                        [Variable] -&gt; [[Variable]]\n subsets (variables expr) ::                     [[Variable]]\n s ::                                             [Variable]\n evaluate ::           BoolExpr                -&gt; [Variable]  -&gt;  Bool\n evaluate              expr                       s           ::  Bool\n[evaluate              expr                       s         ] :: [Bool]\n-----------------------------------------------------------------------\ntruthtable ::          BoolExpr                               -&gt; [Bool]\n-}\n</code></pre>\n\n<p>The <code>[ foo | x &lt;- xs ]</code> syntax is known as <em>\"list comprehension\"</em>. </p>\n\n<p>It is <em>analogous</em> to a <em>loop</em> in imperative paradigm, and can be read as <em>\"the list of <code>foo</code>s, for <code>x</code> in <code>xs</code>\".</em> It is also equivalent to <code>map (\\ x -&gt; foo ) xs</code>; also</p>\n\n<pre><code>  [ foo | x &lt;- [a, b, c] ]\n=\n  [ foo | x &lt;- [a]   ++              [b]   ++              [c] ]\n=\n  [ foo | x &lt;- [a] ] ++ [ foo | x &lt;- [b] ] ++ [ foo | x &lt;- [c] ]\n=\n  [ foo | let x=a  ] ++ [ foo | let x=b  ] ++ [ foo | let x=c  ]\n</code></pre>\n\n<p><code>::</code> means <em>\"has type\"</em>.</p>\n"}], "owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572596054, "creation_date": 1572530352, "last_edit_date": 1572530868, "question_id": 58644957, "link": "https://stackoverflow.com/questions/58644957/how-to-take-an-output-list-of-a-function-as-input-to-another-function-in-haskell", "title": "How to take an output list of a function as input to another function in Haskell?", "body": "<p>Let's say that we have a function <code>truthtable ::BoolExpr -&gt; [([Variable], Bool)]</code> that returns the value in List of ordered pairs of the variable and it's Bool evaluation.</p>\n\n<p>functions are defined as following </p>\n\n<pre><code>module BoolExpr (Variable, BoolExpr(..), evaluate) where\nimport Data.List\nimport System.IO\n\ntype Variable = Char\ndata BoolExpr = T\n |F\n |Var Variable\n |Not BoolExpr\n |And BoolExpr BoolExpr\n |Or BoolExpr BoolExpr\n deriving(Show)\n\n\n-- evaluates an expression\nevaluate :: BoolExpr -&gt; [Variable] -&gt; Bool\nevaluate T _            = True\nevaluate F _            = False\nevaluate (Var v) vs     = v `elem` vs\nevaluate (Not e) vs     = not (evaluate e vs)\nevaluate (And e1 e2) vs = evaluate e1 vs &amp;&amp; evaluate e2 vs\nevaluate (Or  e1 e2) vs = evaluate e1 vs || evaluate e2 vs\n\n--remove duplicates\nrmdups :: (Ord a) =&gt; [a] -&gt; [a]\nrmdups = map head . group . sort\n\n\nvariables :: BoolExpr -&gt; [Variable]\nvariables T = []\nvariables F = []\nvariables (Var e1) = [e1]\nvariables (And e1 e2) =rmdups$ sort $ variables e1 ++ variables e2\nvariables (Or e1 e2) =rmdups$ sort $ variables e1 ++ variables e2\nvariables (Not e) = variables e\n\n\n\n --function to get the subsets of a list\nsubsets :: [Variable] -&gt; [[Variable]]\nsubsets [] = [[]]\nsubsets (x:xs) = [zs | ys &lt;- subsets xs, zs &lt;- [ys, (x:ys)]]\n\n\n</code></pre>\n\n<p>Now the function subsets return all possible subsets in a string \neg.</p>\n\n<pre><code>&gt; subsets \"abc\"\n[\"\",\"c\",\"b\",\"bc\",\"a\",\"ac\",\"ab\",\"abc\"]\n</code></pre>\n\n<p>Now how to take each element in this list and put it here</p>\n\n<p><code>evaluate (And (Var 'a') (Or (Var 'c') (Var 'b'))) \"HERE\"</code></p>\n\n<p>I know how to do something like this in C using iteration over the list and doing the calculation.</p>\n\n<p>My approach : <strong><em>number of subsets of string= 2^n</em></strong>, where n is the number of elements </p>\n\n<p>now I would use a scenario like this: </p>\n\n<pre><code>let x=0\niterate form x to (n-1) (subsets $ variables (And e1 e2)) !! x\n</code></pre>\n\n<p>i know that <code>!!</code> operator allow to pick element from the list according to the index written.\nFinally the result of the chunk above is applied to the <code>evaluate</code> function at the end part HERE. that what the function <code>truthtable</code> evaluate as a whole</p>\n\n<pre><code>&gt; truthtable (And (Var 'a') (Or (Var 'c') (Var 'b')))\n\n[(\"\",False),(\"c\",False),(\"b\",False),(\"bc\",False),(\"a\",False),(\"ac\",True),(\"ab\",True),(\"abc\",True)]\n</code></pre>\n\n<p>any ideas how to apply this in Haskell</p>\n"}, {"tags": ["haskell", "indentation"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 4, "creation_date": 1572528009, "post_id": 58644245, "comment_id": 103593768, "body": "You wrote an <code>if</code> (in <code>if player == 1</code>) without an <code>else</code>. Haskell does not have an <code>if .. then ..</code>, only an <code>if .. then .. else ..</code>, since an expression is supposed to always return something. That being said, please do <i>not</i> use <code>IO</code> blocks for non-io logic."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572528955, "post_id": 58644245, "comment_id": 103594293, "body": "Indentation does not cause errors. Improper <i>use</i> of indentation does."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 3, "creation_date": 1572529755, "post_id": 58644245, "comment_id": 103594720, "body": "Some of the most common misunderstandings seem present in this question.  See <a href=\"https://wiki.haskell.org/Common_Misunderstandings\" rel=\"nofollow noreferrer\">wiki.haskell.org/Common_Misunderstandings</a>"}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 4, "last_activity_date": 1572530026, "creation_date": 1572530026, "answer_id": 58644853, "question_id": 58644245, "link": "https://stackoverflow.com/questions/58644245/does-block-indentation-cause-errors/58644853#58644853", "title": "Does block indentation cause errors?", "body": "<p>Every <code>if</code> needs an <code>else</code>... including your <code>if player == 1</code>.</p>\n\n<p>That said, I'd recommend two things:</p>\n\n<ol>\n<li>Use a custom type that has just the right values, instead of <code>Int</code> which has way too many values.</li>\n<li>Use <code>case</code> instead of <code>if</code>.</li>\n</ol>\n\n<p>Like this:</p>\n\n<pre><code>data Player = Human | AI\n\nplay :: Board -&gt; Player -&gt; IO ()\nplay board player = do\n    newline\n    putBoard board player\n    case (finished board, player) of\n        (True, _) -&gt; do\n            newline\n            putStrLn $ \"Player \" ++ show (next player) ++ \" wins!\"\n        (_, Human) -&gt; do\n            newline\n            row &lt;- getDigit \"Enter a row number: \"\n            {- ... etc. -}\n        _ -&gt; {- compute a move -}\n</code></pre>\n"}], "owner": {"reputation": 190, "user_id": 12105730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0733efb1cec773dd7b2a6bab463b11cc?s=128&d=identicon&r=PG&f=1", "display_name": "DonnumS", "link": "https://stackoverflow.com/users/12105730/donnums"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 58644853, "answer_count": 1, "score": 0, "last_activity_date": 1572530026, "creation_date": 1572527915, "last_edit_date": 1572527959, "question_id": 58644245, "link": "https://stackoverflow.com/questions/58644245/does-block-indentation-cause-errors", "title": "Does block indentation cause errors?", "body": "<p>I'm working on a nim game in Haskell and run into a problem when I tried to implement a way to choose when the human player can make a move </p>\n\n<p>The code works as it should, but only for human players. The problem is that when the computer ai is supposed to make a move. I therefore have to create an if to check who's turn it is. </p>\n\n<p>I have not yet implemented the ai, but the goal is to get the ai to make a move when player == 2, or by using an else for the <code>if player == 1 then</code></p>\n\n<p>This is the code that runs my game:</p>\n\n<pre><code>-- To run the game\nplay :: Board -&gt; Int -&gt; IO ()\nplay board player =\n   do newline\n      putBoard board 1\n      if finished board then\n         do newline\n            putStr \"Player \"\n            putStr (show (next player))\n            putStrLn \" wins!\"\n      else\n        if player == 1 then\n            do newLine\n               putStr \"Player \"\n               putStrLn (show player)\n               row &lt;- getDigit \"Enter a row number: \"\n               num &lt;- getDigit \"Stars to remove: \"\n               if valid board row num then\n                 play (move board row num) (next player)\n               else\n                  do newline\n                     putStrLn \"That move is not valid, try again!\"\n                     play board player\n\nnim :: Int -&gt; IO ()\nnim x = play (initial x) 1\n</code></pre>\n\n<p>The players are given an int at the start of the game (<code>player</code>). What I aim to achieve is that the function give the human player the move when this variable is equal to 1 (it changes every turn between 1 and 2). This is the error code I'm getting: </p>\n\n<pre><code>parse error (possibly incorrect indentation or mismatched brackets)\n    |\n124 | nim :: Int -&gt; IO ()\n    | ^\n</code></pre>\n\n<p>This error did not pop up before I added the <code>if player == 1 then</code> line.</p>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["haskell", "boolean", "pattern-matching"], "comments": [{"owner": {"reputation": 5911, "user_id": 1688785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07b2da937aa23792045dff6ff19556eb?s=128&d=identicon&r=PG", "display_name": "Caramiriel", "link": "https://stackoverflow.com/users/1688785/caramiriel"}, "edited": false, "score": 3, "creation_date": 1572524310, "post_id": 58643146, "comment_id": 103591635, "body": "Try to match on <code>variables (And e1 e2)</code> instead of <code>variables (And (Var e1) (Var e2))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572524886, "post_id": 58643256, "comment_id": 103591972, "body": "It&#39;s worth adding that this approach will fail some of the testcases because a variable will appear multiple times in the output list if it appears multiple times in the expression. Of course that&#39;s not difficult to fix, but it&#39;s worth mentioning that some changes are needed before it does exactly as specified."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1572525112, "post_id": 58643256, "comment_id": 103592098, "body": "@RobinZigmond that would perhaps be better as a comment to the <i>question</i>. The most practical solution is to switch from <code>[]</code> to <code>Data.Set</code> as the result container, not to introduce some ad-hoc duplicates removal method."}, {"owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "edited": false, "score": 1, "creation_date": 1572526229, "post_id": 58643256, "comment_id": 103592752, "body": "@WillemVanOnsem you meant <code>variables e</code> not <code>variable e</code>."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1572527603, "post_id": 58643256, "comment_id": 103593534, "body": "@leftaroundabout I agree about <code>Set</code> but I feel it wouldn&#39;t have been appropriate to mention that as a direct response to the question when the issue was with how the OP was trying to write the original (list-based) function. Especially as I would guess this type signature has been specified by the class tutor. I personally still think my comment is more appropriate to this answer because I&#39;m basically saying &quot;the answer is correct, but needs a little tweaking in order to exactly fulfill the given test cases&quot;."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1572526264, "last_edit_date": 1572526264, "creation_date": 1572524447, "answer_id": 58643256, "question_id": 58643146, "link": "https://stackoverflow.com/questions/58643146/how-to-get-the-list-of-variables-that-appear-in-a-boolean-expression/58643256#58643256", "title": "How to get the list of variables that appear in a boolean expression?", "body": "<p>Your pattern matching is <em>too</em> specific. For example you write a clause:</p>\n\n<pre><code>variables (And (Var e1) (Var e2)) = &hellip;</code></pre>\n\n<p>and thus you restrict yourself to an <code>And</code> where the operands are values wrapped in a <code>Var</code> data constructor. But that is not necessaary. We can just write this as:</p>\n\n<pre><code>variables (And <b>e1</b> <b>e2</b>) = &hellip;</code></pre>\n\n<p>so then <code>e1</code> and <code>e2</code> are <code>BoolExpr</code>s that can be constructed with all possible data constructors. We thus can define the function as:</p>\n\n<pre><code>variables :: BoolExpr -&gt; [Variable]\nvariables T = []\nvariables F = []\nvariables (Var e1) = [e1]\nvariables (And e1 e2) = variables e1 ++ variables e2\nvariables (Or e1 e2) = variables e1 ++ variables e2\nvariables (Not e) = variables e</code></pre>\n\n<p>Note that a variable will occur <em>multiple</em> times if it is part of the expression multiple times. You thus might want to pass the result through a <em>uniqness filter</em> if you want a list of <em>unique</em> variables. You furthermore might want to sort the result as well.</p>\n\n<p>We can do that by defining a function that works on top of the variables, like:</p>\n\n<pre><code>uniqVariables :: BoolExpr -&gt; [Variable]\nuniqVariables e = _ (variables e)</code></pre>\n\n<p>where <code>_</code> is something you need to fill in. I leave this as an exercise.</p>\n"}], "owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58643256, "answer_count": 1, "score": 2, "last_activity_date": 1572526264, "creation_date": 1572524077, "question_id": 58643146, "link": "https://stackoverflow.com/questions/58643146/how-to-get-the-list-of-variables-that-appear-in-a-boolean-expression", "title": "How to get the list of variables that appear in a boolean expression?", "body": "<p>Hello I need help in constructing a function that returns the variables of a Boolean expression. I am trying to get the pattern but I can't fund a general approach that works with all test cases.</p>\n\n<p>Here is the code </p>\n\n<pre><code>module BoolExpr (Variable, BoolExpr(..), evaluate) where\nimport Data.List\nimport System.IO\n\ntype Variable = Char\ndata BoolExpr = T\n |F\n |Var Variable\n |Not BoolExpr\n |And BoolExpr BoolExpr\n |Or BoolExpr BoolExpr\n deriving(Show)\n\n\n--this is my attempt \nvariables :: BoolExpr -&gt; [Variable]\nvariables T = []\nvariables F = []\nvariables (Var e1)= [e1]\nvariables (And (Var e1) (Var e2))=variables (Var e1) ++variables (Var e2)\nvariables (Or (Var e1) (Var e2))=variables (Var e1) ++variables (Var e2)\nvariables ( And (Var e1) (Or (Var e2)(Var e3)) ) = variables (Var e1) ++ variables (Var e2) ++ variables (Var e3) \nvariables (xy)=variables x ++ variables y\nvariables _ = []\n\n\n</code></pre>\n\n<p>Some testcases and their desired output</p>\n\n<pre><code>&gt; variables T\n\"\"\n\n&gt; variables (Or T F)\n\"\"\n\n&gt; variables (Var 'a')\n\"a\"\n\n&gt; variables (And (Var 'a') (Or (Var 'c') (Var 'b')))\n\"abc\"\n\n&gt; variables (And (Var 'a') (Or (Var 'a') (Var 'a')))\n\"a\"\n\n</code></pre>\n\n<p>But if more than three variables are used or so, the function will fail. I can't make it in a general form</p>\n"}, {"tags": ["haskell", "double", "rounding", "integral"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 12302998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a9c07fc4e19d0cafb3e3846b8f10398?s=128&d=identicon&r=PG&f=1", "display_name": "longroad", "link": "https://stackoverflow.com/users/12302998/longroad"}, "edited": false, "score": 0, "creation_date": 1572523881, "post_id": 58643040, "comment_id": 103591416, "body": "No this does not work. Double is a frac so I do not have to declare it to one using fromIntegral, do I? However, it does not work. I am getting same error like before."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 75, "user_id": 12302998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a9c07fc4e19d0cafb3e3846b8f10398?s=128&d=identicon&r=PG&f=1", "display_name": "longroad", "link": "https://stackoverflow.com/users/12302998/longroad"}, "edited": false, "score": 1, "creation_date": 1572524020, "post_id": 58643040, "comment_id": 103591472, "body": "@longroad: then why does the prelude demonstrates with sample output. A <code>Double</code> is an instance of many typeclasses: <code>Enum</code>, <code>Num</code>, <code>Eq</code>, <code>Floating</code>, etc. hence the <code>fromIntegral</code> will specialize to <code>Double</code>. The fact that you get the same error, suggests that there is another problem located somewhere else triggering the same (or a very similar) error message."}, {"owner": {"reputation": 75, "user_id": 12302998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a9c07fc4e19d0cafb3e3846b8f10398?s=128&d=identicon&r=PG&f=1", "display_name": "longroad", "link": "https://stackoverflow.com/users/12302998/longroad"}, "edited": false, "score": 0, "creation_date": 1572524386, "post_id": 58643040, "comment_id": 103591675, "body": "this is the whole code in my file: <code>r :: Double -&gt; Double r x = round (fromIntegral(x))</code> and I am getting this output in GHCi &gt;GHCi, version 8.6.5: <a href=\"http://www.haskell.org/ghc/\" rel=\"nofollow noreferrer\">haskell.org/ghc</a>  :? for help [1 of 1] Compiling Main             ( \\test.hs, interpreted ) test.hs:12:7: error:     * No instance for (Integral Double) arising from a use of <code>round&#39;     * In the expression: round (fromIntegral (x))       In an equation for </code>r&#39;: r x = round (fromIntegral (x))    | 12 | r x = round (fromIntegral(x))    |       ^^^^^^^^^^^^^^^^^^^^^^^"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 75, "user_id": 12302998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a9c07fc4e19d0cafb3e3846b8f10398?s=128&d=identicon&r=PG&f=1", "display_name": "longroad", "link": "https://stackoverflow.com/users/12302998/longroad"}, "edited": false, "score": 4, "creation_date": 1572524486, "post_id": 58643040, "comment_id": 103591724, "body": "@longroad: but you swapped the two, it is <code>fromIntegral (round x)</code>, note that we call <code>fromIntegral</code> on the <i>result</i>."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1572523642, "creation_date": 1572523642, "answer_id": 58643040, "question_id": 58642974, "link": "https://stackoverflow.com/questions/58642974/haskell-no-instance-for-integral-double/58643040#58643040", "title": "Haskell No instance for Integral Double", "body": "<p>That is logical, since a type that is an instance of <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Integral\" rel=\"nofollow noreferrer\"><strong><code>Integral</code></strong></a>, well..., is usually \"integral\". It thus means it is something that behave like an <code>Integer</code>. Examples of <code>Integral</code>, are <code>Integer</code>, <code>Int</code>, <code>Word8</code>, etc. A <code>Float</code>, <code>Double</code>, etc. is not integral, like the error says.</p>\n\n<p>You can use <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:fromIntegral\" rel=\"nofollow noreferrer\"><strong><code>fromIntegral :; (Num b, Integral a) =&gt; a -&gt; b</code></strong></a> to convert something that is of an <code>Integral</code> type, to a <code>Num</code>erical type:</p>\n\n<pre><code>r :: Double -> Double\nr = <b>fromIntegral</b> . round</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude&gt; r 14.25\n14.0\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 12302998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a9c07fc4e19d0cafb3e3846b8f10398?s=128&d=identicon&r=PG&f=1", "display_name": "longroad", "link": "https://stackoverflow.com/users/12302998/longroad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 58643040, "answer_count": 1, "score": 0, "last_activity_date": 1572523642, "creation_date": 1572523412, "question_id": 58642974, "link": "https://stackoverflow.com/questions/58642974/haskell-no-instance-for-integral-double", "title": "Haskell No instance for Integral Double", "body": "<p>I am trying to round a variable using Haskell.</p>\n\n<pre><code>r :: Double -&gt; Double\nr x = round (x)\n</code></pre>\n\n<p>Trying to compile this, Im getting the following error</p>\n\n<blockquote>\n  <p>No instance for (Integral Double) arising from a use of 'round'</p>\n</blockquote>\n\n<p>How can I fix this? Thank you!</p>\n"}, {"tags": ["haskell", "persistent", "data-integrity"], "comments": [{"owner": {"reputation": 1894, "user_id": 412417, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/880a205c1958574d83803d5e30da95ca?s=128&d=identicon&r=PG&f=1", "display_name": "MCH", "link": "https://stackoverflow.com/users/412417/mch"}, "edited": false, "score": 1, "creation_date": 1572524780, "post_id": 58639719, "comment_id": 103591904, "body": "I would say using Persistent&#39;s template haskell system is already not very Haskell-y because you have already given up control of type definition. As far as I know you can&#39;t declare <code>User</code> type outside of the template system then pass it to Persistent to automate all the type classes you want. I see it as a tradeoff. It is convenient because it generates a lot of things for you, but you give up a certain amount of control."}, {"owner": {"reputation": 2447, "user_id": 2061783, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5fc1d7081d9f24bd0307795baea57d56?s=128&d=identicon&r=PG", "display_name": "danbroooks", "link": "https://stackoverflow.com/users/2061783/danbroooks"}, "reply_to_user": {"reputation": 1894, "user_id": 412417, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/880a205c1958574d83803d5e30da95ca?s=128&d=identicon&r=PG&f=1", "display_name": "MCH", "link": "https://stackoverflow.com/users/412417/mch"}, "edited": false, "score": 0, "creation_date": 1572532974, "post_id": 58639719, "comment_id": 103596616, "body": "I&#39;m not sure that would really make a difference here, you would still have to define your own <code>PersistField</code> instance, which would come up against the same problem. I&#39;m not the biggest fan of TH myself but I don&#39;t think that is the problem here."}, {"owner": {"reputation": 1894, "user_id": 412417, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/880a205c1958574d83803d5e30da95ca?s=128&d=identicon&r=PG&f=1", "display_name": "MCH", "link": "https://stackoverflow.com/users/412417/mch"}, "edited": false, "score": 0, "creation_date": 1572556384, "post_id": 58639719, "comment_id": 103607234, "body": "I guess I was just trying to make you not feel bad for doing some un Haskell-y things hehe, but if I understand the problem I think there is a good solution. You can define an <code>EmailAddress</code> type which is just a newtype wrapper over <code>Text</code>, hide the constructor, then export a custom constructor <code>mkEmail :: Text -&gt; Maybe EmailAddress</code> which is responsible for making sure it is valid email. Then you can be sure all values of <code>EmailAddress</code> are valid emails and you don&#39;t have to worry about it in to and from PersistValue."}], "owner": {"reputation": 2447, "user_id": 2061783, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5fc1d7081d9f24bd0307795baea57d56?s=128&d=identicon&r=PG", "display_name": "danbroooks", "link": "https://stackoverflow.com/users/2061783/danbroooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572512070, "creation_date": 1572512070, "question_id": 58639719, "link": "https://stackoverflow.com/questions/58639719/what-is-best-practice-for-handling-data-integrity-when-using-haskells-persisten", "title": "What is best practice for handling data integrity when using Haskell&#39;s Persistent library?", "body": "<p>Lets say I have a basic model in my application for handling users:</p>\n\n<pre><code>User\n  username Text\n  password Text\n  email Text\n</code></pre>\n\n<p>Based on these types I can store whatever I like (as long as it is <code>Text</code> obviously) to any of these fields. Say I want to begin enforcing some rules around what can and cannot be considered an email. I create this email module:</p>\n\n<pre><code>{-# LANGUAGE GeneralizedNewtypeDeriving #-}\n\nmodule Model.EmailAddress\n  ( EmailAddress\n  , parseEmailAddress\n  ) where\n\nimport           Data.Aeson\nimport           Data.Text (Text)\nimport qualified Data.Text.Encoding as T\nimport qualified Data.Text.Lazy as TL\nimport qualified Data.Text.Lazy.Builder as TL\nimport           Database.Persist\nimport           Database.Persist.Sql\nimport           Text.Shakespeare.Text (ToText (..))\n\nnewtype EmailAddress = EmailAddress (Either InvalidEmailAddress ValidEmailAddress)\n  deriving (Show, Eq)\n\ninstance ToJSON EmailAddress where\n  toJSON = String . toStrictText\n\ninstance FromJSON EmailAddress where\n  parseJSON = withText \"EmailAddress\" (pure . parseEmailAddress)\n\ninstance ToText EmailAddress where\n  toText (EmailAddress e) = either toText toText e\n\nnewtype ValidEmailAddress = ValidEmailAddress Text\n  deriving (Show, Eq)\n\ninstance ToText ValidEmailAddress where\n  toText (ValidEmailAddress t) = toText t\n\ndata InvalidEmailAddress = InvalidEmailAddress\n  { invalidEmailAddressValue :: Text\n  , invalidEmailAddressReason :: Text\n  } deriving (Show, Eq)\n\ninstance ToText InvalidEmailAddress where\n  toText = toText . invalidEmailAddressValue\n\nparseEmailAddress :: Text -&gt; EmailAddress\nparseEmailAddress t = \n  -- super basic validation example\n  EmailAddress $ case T.count \"@\" t of\n    0 -&gt; Left (InvalidEmailAddress t \"Must contain @ symbol\")\n    1 -&gt; Right (ValidEmailAddress t)\n    _ -&gt; Left (InvalidEmailAddress t \"Contains more than one @ symbol\")\n\ninstance PersistFieldSql EmailAddress where\n   sqlType _ = SqlString\n\ninstance PersistField EmailAddress where\n  fromPersistValue =\n    decodePersistTextValue parseEmailAddress\n\n  toPersistValue =\n    PersistText . toStrictText\n\ndecodePersistTextValue :: PersistField a =&gt; (Text -&gt; a) -&gt; PersistValue -&gt; Either Text a\ndecodePersistTextValue f = \\case\n  PersistByteString bs -&gt;\n    fromPersistValue $ PersistText (T.decodeUtf8 bs)\n  v -&gt;\n    f &lt;$&gt; fromPersistValue v\n\ntoStrictText :: ToText t =&gt; t -&gt; Text\ntoStrictText = builderToStrictText . toText\n\nbuilderToStrictText :: TL.Builder -&gt; Text\nbuilderToStrictText = TL.toStrict . TL.toLazyText\n</code></pre>\n\n<p>I could now define my model like so:</p>\n\n<pre><code>User\n  username Text\n  password Text\n  email EmailAddress\n</code></pre>\n\n<p>However, this does not stop me from writing a bad email address to the database. If the rules around what constitutes a valid email address changes, I can read them from the DB still, and previously valid emails will come out of the DB as invalid, and this is fine, I like this. However I cannot enforce (at the persistent level anyway) preventing writing an invalid email to the database, because <code>toPersistValue</code> has the type <code>a -&gt; PersistValue</code>, I suppose I would have to enforce this a layer up (when data is coming into the app, form decoders, json decoders etc) to ensure when a <code>Left InvalidEmailAddress</code> appears the user is given an error.</p>\n\n<p>This leads me to thinking, is this the best practice around enforcing data integrity when using persistent? is there a better approach? Should persistent not be involved at all? ie the field remains as a <code>Text</code> and it is down to the app to convert these fields when they're being accessed?</p>\n\n<p>I would really like a way of writing my entities to the database in a type safe way that allows me to determine what to do in the situation where an invalid email is used to try and save my <code>User</code> type, I could throw an <code>error</code> in the <code>toPersistValue</code> implementation but this feels a bit dirty to me, and not very Haskell'y.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1572511750, "post_id": 58639448, "comment_id": 103585004, "body": "It is not really clear to me what you aim to do. For example both <code>6</code> and <code>3</code> are used in the set, but <code>(3,6), (6,3)</code> is still part of the expected result?"}, {"owner": {"reputation": 139, "user_id": 10564793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea55694a1fd734c241fe4d99816ee4c?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar Smith", "link": "https://stackoverflow.com/users/10564793/edgar-smith"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572511996, "post_id": 58639448, "comment_id": 103585128, "body": "Yes, the pair should be in the result, but the other pairs shouldn&#39;t use those numbers"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1572512093, "post_id": 58639448, "comment_id": 103585182, "body": "but then it is not clear why <code>(2,3)</code> and <code>(3,2)</code> is not in the result, and <code>(3,6),(6,3)</code> is. Since <code>(2,3)</code> is in the original list before <code>(3,6)</code>."}, {"owner": {"reputation": 139, "user_id": 10564793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea55694a1fd734c241fe4d99816ee4c?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar Smith", "link": "https://stackoverflow.com/users/10564793/edgar-smith"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572512370, "post_id": 58639448, "comment_id": 103585281, "body": "I don&#39;t think it would matter how it was put together, there&#39;s not just one possible answer, I was just giving one example, but yes, logically it would probably first take the (2,3), it would include (3,2), and the rest of the set would be different."}, {"owner": {"reputation": 139, "user_id": 10564793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea55694a1fd734c241fe4d99816ee4c?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar Smith", "link": "https://stackoverflow.com/users/10564793/edgar-smith"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1572512631, "post_id": 58639448, "comment_id": 103585379, "body": "In the end I need a set like I&#39;ve described, symmetric pairs where the numbers aren&#39;t used again, taken from a list, e.g. 2..7, that satisfy some predicate. In this case, the original list satisfies the predicate, odd (x + y) where x and y come from the pairs (x,y). Eventually I&#39;ll need to know if all the numbers from the list are used as well."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1572530651, "post_id": 58639448, "comment_id": 103595226, "body": "See also the <a href=\"https://en.wikipedia.org/wiki/Maximum_cardinality_matching\" rel=\"nofollow noreferrer\">Wikipedia page on maximum cardinality matching</a>."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 0, "last_activity_date": 1572514321, "creation_date": 1572514321, "answer_id": 58640301, "question_id": 58639448, "link": "https://stackoverflow.com/questions/58639448/take-symmetrical-pairs-of-different-numbers-from-list/58640301#58640301", "title": "Take symmetrical pairs, of different numbers from list", "body": "<p>It probably makes more sense to use a 2-tuple of 2-tuples in your list comprehension, since that makes it more easy to do pattern matching, and thus \"by contract\" enforces the fact that there are two items. We thus can construct 2-tuples that contain the 2-tuples with:</p>\n\n<pre><code>g :: Eq a =&gt; [(a, a)] -&gt; [((a, a), (a, a))]\ng xs = [ (t, s) | (t@(x,y):ts) &lt;- tails xs, let s = (y, x), elem s ts ]\n</code></pre>\n\n<p>Here the <code>elem s ts</code> checks if the \"swapped\" 2-tuple occurs in the rest of the list.</p>\n\n<p>Then we still need to filter the elements. We can make use of a function that uses an accumulator for the thus far obtained items:</p>\n\n<pre><code>h :: Eq a =&gt; [((a, a), (a, a))] -&gt; [(a, a)]\nh = go []\n    where go _ [] = []\n          go seen ((t@(x, y), s):xs)\n              | notElem x seen &amp;&amp; notElem y seen = t : s : go (x:y:seen) xs\n              | otherwise = go seen xs\n</code></pre>\n\n<p>For the given sample input, we thus get:</p>\n\n<pre><code>Prelude Data.List&gt; (h . g) [(2,3),(2,5),(2,7),(3,2),(3,4),(3,6),(4,3),(4,5),(4,7),(5,2),(5,4),(5,6),(6,3),(6,5),(6,7),(7,2),(7,4),(7,6)]\n[(2,3),(3,2),(4,5),(5,4),(6,7),(7,6)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "is_accepted": false, "score": 0, "last_activity_date": 1572516477, "creation_date": 1572516477, "answer_id": 58640934, "question_id": 58639448, "link": "https://stackoverflow.com/questions/58639448/take-symmetrical-pairs-of-different-numbers-from-list/58640934#58640934", "title": "Take symmetrical pairs, of different numbers from list", "body": "<p>after reading a few times your question, I got an elegant solution to your problem. Thinking that if you have a list of pairs without any repeated number, you can get the list of swapped pairs easily, solving your problem. So your problem can be reduce to <em>given a list, get the list of all pairs using each number just one</em>. </p>\n\n<p>For a given list, there are many solutions to this, ex: for <code>[1,2,3,4]</code> valid solutions are: <code>[(2,4),(4,2),(1,3),(3,1)]</code> and <code>[(2,3),(3,2),(1,4),(4,1)]</code>, etc... The approach here is: </p>\n\n<ul>\n<li>take a permutation if the original list (say <code>[1,4,3,2]</code>)</li>\n<li>pick one element for each half and pair them together (for simplicity, you can pick consecutive elements too)</li>\n<li>for each pair, create a the swapped pair and put all together</li>\n</ul>\n\n<p>By doing so you end up with a list of non repeating numbers of pairs and its symmetric. More over, looping around all permutaitons, you can get all the solutions to your problem. </p>\n\n<pre><code>import Data.List (permutations, splitAt)\nimport Data.Tuple (swap)\n\n-- This function splits a list by the half of the length\nsplitHalf :: [a] -&gt; ([a], [a])\nsplitHalf xs = splitAt (length xs `quot` 2) xs\n\n-- This zip a pair of list into a list of pairs \nzipHalfs :: ([a], [a]) -&gt; [(a,a)]\nzipHalfs (xs, ys) = zip xs ys\n\n-- Given a list of tuples, creates a larger list with all tuples and all swapped tuples\nmakeSymetrics :: [(a,a)] -&gt; [(a,a)]\nmakeSymetrics xs = foldr (\\t l -&gt; t:(swap t):l) [] xs\n\n-- This chain all of the above. \n-- Take all permutations of xs &gt;&gt;&gt; for each permutations &gt;&gt;&gt; split it in two &gt;&gt;&gt; zip the result &gt;&gt;&gt; make swapped pairs\ngetPairs :: [a] -&gt; [[(a,a)]]\ngetPairs xs =  map (makeSymetrics . zipHalfs . splitHalf) $ permutations xs\n</code></pre>\n\n<pre><code>&gt;&gt;&gt; getPairs [1,2,3,4]\n[[(1,3),(3,1),(2,4),(4,2)],[(2,3),(3,2),(1,4),(4,1)] ....\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 10564793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea55694a1fd734c241fe4d99816ee4c?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar Smith", "link": "https://stackoverflow.com/users/10564793/edgar-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1572516477, "creation_date": 1572510937, "question_id": 58639448, "link": "https://stackoverflow.com/questions/58639448/take-symmetrical-pairs-of-different-numbers-from-list", "title": "Take symmetrical pairs, of different numbers from list", "body": "<p>I have a list like this:</p>\n\n<pre><code>[(2,3),(2,5),(2,7),(3,2),(3,4),(3,6),(4,3),(4,5),(4,7),(5,2),(5,4),(5,6),(6,3),(6,5),(6,7),(7,2),(7,4),(7,6)]\n</code></pre>\n\n<p>The digits are from [2..7]. I want to take a set where there are any symmetrical pairs. e.g. [(1,2),(2,1)], but those two numbers aren't used again in the set. An example would be:</p>\n\n<pre><code>[(3,6),(6,3),(2,5),(5,2),(4,7),(7,4)]\n</code></pre>\n\n<p>I wanted to first put symmetric pairs together as I thought it might be easier to work with so i created this function, which actually creates the pairs and puts them in another list</p>\n\n<pre><code>g xs = [ (y,x):(x,y):[] | (x,y) &lt;- xs ]\n</code></pre>\n\n<p>with which the list turns to this:</p>\n\n<pre><code>[[(3,2),(2,3)],[(5,2),(2,5)],[(7,2),(2,7)],[(2,3),(3,2)],[(4,3),(3,4)],[(6,3),(3,6)],[(3,4),(4,3)],[(5,4),(4,5)],[(7,4),(4,7)],[(2,5),(5,2)],[(4,5),(5,4)],[(6,5),(5,6)],[(3,6),(6,3)],[(5,6),(6,5)],[(7,6),(6,7)],[(2,7),(7,2)],[(4,7),(7,4)],[(6,7),(7,6)]]\n</code></pre>\n\n<p>Then from here I was hoping to somehow remove duplicates.</p>\n\n<p>I made a function that will look at all of the fst elements of all of the pairs:</p>\n\n<pre><code>flatList xss = [ x | xs &lt;- xss, (x,y) &lt;- xs ]\n</code></pre>\n\n<p>to use with another function to remove the duplicates. </p>\n\n<pre><code>h (x:xs) | (fst (head x)) `elem` (flatList xs) = h xs\n         | otherwise = (head x):(last x):(h xs)\n</code></pre>\n\n<p>which gives me the list </p>\n\n<pre><code>[(3,6),(6,3),(5,6),(6,5),(2,7),(7,2),(4,7),(7,4),(6,7),(7,6)]\n</code></pre>\n\n<p>which has duplicate numbers. That function only takes into account the first element of the first pair in the list of lists,the problem is when I also take into account the first element of the second pair (or the second element of the first pair):</p>\n\n<pre><code>h (x:xs) | (fst (head x)) `elem` (flatList xs) || (fst (last x)) `elem` (flatList xs) = h xs\n         | otherwise = (head x):(last x):(h xs)\n</code></pre>\n\n<p>I only get these two pairs:</p>\n\n<p>[(6,7),(7,6)]</p>\n\n<p>I see that the problem is that this method of deleting duplicates grabs the last repeated element, and would work with a list of digits, but not a list of pairs, as it misses pairs it needs to take.</p>\n\n<p>Is there another way to solve this, or an alteration I could make?</p>\n"}, {"tags": ["haskell", "functional-programming", "boolean"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1572508082, "post_id": 58637724, "comment_id": 103583578, "body": "Note that, unless I&#39;ve misunderstood what the function is supposed to do, the best way to define this function is to have one case for each constructor and use recursion for those constructors which hold <code>BoolExpr</code> values themselves. Which is exactly what you&#39;ve already (and correctly) done in <code>evaluate</code>."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1572509775, "post_id": 58637724, "comment_id": 103584207, "body": "You are only handling very specific cases like <code>variables (Or T F) = []</code>. You should remove that and similar lines, and instead provide a definition of the form <code>variables (Or e1 e2) = ...</code> handling the case where <code>e1</code> and <code>e2</code> are <i>arbitrary</i> formulas. You already did that for <code>evaluate</code> in your own code. You&#39;ll need to use recursion, as you did for <code>evaluate</code>."}], "answers": [{"comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1572505341, "post_id": 58638193, "comment_id": 103582598, "body": "Hint: you can use <code>variables _ = []</code> to catch &quot;everything that doesn&#39;t match one of the above patterns&quot; and shorten the definition."}], "tags": [], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "is_accepted": false, "score": 3, "last_activity_date": 1572505486, "last_edit_date": 1572505486, "creation_date": 1572504858, "answer_id": 58638193, "question_id": 58637724, "link": "https://stackoverflow.com/questions/58637724/boolean-non-exhaustive-patterns-in-haskell/58638193#58638193", "title": "Boolean Non-exhaustive patterns in Haskell", "body": "<p>If you turn on the compiler warning for incomplete patterns, the compiler will tell you which patterns have no matches:</p>\n\n<pre><code>Prelude&gt; :set -Wincomplete-patterns\nPrelude&gt; :l 58637724.hs\n[1 of 1] Compiling BoolExpr         ( 58637724.hs, interpreted )\n\n58637724.hs:29:1: warning: [-Wincomplete-patterns]\n    Pattern match(es) are non-exhaustive\n    In an equation for `variables':\n        Patterns not matched:\n            (Not _)\n            (And T T)\n            (And T (Var _))\n            (And T (Not _))\n            ...\n   |\n29 | variables (Or T F) = []\n   | ^^^^^^^^^^^^^^^^^^^^^^^^...\nOk, one module loaded.\n</code></pre>\n\n<p>Add those cases to the <code>variables</code> function, and the problem should go away.</p>\n\n<p>Notice the ellipsis (<code>...</code>) after the first four patterns. That indicates that there's more unmatched patterns, so once you've addressed those four missing patterns, look at the compiler warning again.</p>\n"}], "owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1572531090, "answer_count": 1, "score": -1, "last_activity_date": 1572505486, "creation_date": 1572502368, "last_edit_date": 1572505355, "question_id": 58637724, "link": "https://stackoverflow.com/questions/58637724/boolean-non-exhaustive-patterns-in-haskell", "closed_reason": "Duplicate", "title": "Boolean Non-exhaustive patterns in Haskell", "body": "<p>I am constructing a basic function in Haskell that return the list of variables that appear in a Boolean expression.</p>\n\n<p>For some reason I am stuck in a test case.</p>\n\n<p>I am a still beginner so can someone explain what's happening here?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>module BoolExpr (Variable, BoolExpr(..), evaluate) where\nimport Data.List\nimport System.IO\n\ntype Variable = Char\ndata BoolExpr = T\n |F\n |Var Variable\n |Not BoolExpr\n |And BoolExpr BoolExpr\n |Or BoolExpr BoolExpr\n deriving(Show)\n\n\n-- evaluates an expression\nevaluate :: BoolExpr -&gt; [Variable] -&gt; Bool\nevaluate T _            = True\nevaluate F _            = False\nevaluate (Var v) vs     = v `elem` vs\nevaluate (Not e) vs     = not (evaluate e vs)\nevaluate (And e1 e2) vs = evaluate e1 vs &amp;&amp; evaluate e2 vs\nevaluate (Or  e1 e2) vs = evaluate e1 vs || evaluate e2 vs\n\n\n\n\n--here is the function\nvariables :: BoolExpr -&gt; [Variable]\nvariables (Or T F) = []\nvariables (And T F) = []\nvariables (Var  a)= [a]\nvariables (Or (Var a) (Var b)) =[a]++[b]\nvariables (And (Var a) (Var b))=[a]++[b]\nvariables T = []\nvariables F = []\n\n\nsubsets :: [Variable] -&gt; [[Variable]]\nsubsets [] = [[]]\nsubsets (x:xs) = [zs | ys &lt;- subsets xs, zs &lt;- [ys, (x:ys)]]\n</code></pre>\n\n<p><strong><em>input</em></strong> : <code>variables (And (Var 'a') (Or (Var 'c') (Var 'b')))</code></p>\n\n<p><strong><em>output</em></strong>: <code>Non-exhaustive patterns in function variables</code></p>\n\n<p><strong><em>expected output</em></strong>: <code>\"abc\"</code></p>\n\n<p>other test cases:</p>\n\n<p><strong><em>input</em></strong>:<code>variables (And (Var 'a') (Or (Var 'a') (Var 'a')))</code></p>\n\n<p><strong><em>expected output</em></strong>: <code>\"a\"</code>\n`</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 5, "creation_date": 1572488469, "post_id": 58636082, "comment_id": 103578898, "body": "There are four cases to consider. Can you think of what the value of <code>polyValue (Coef c) n</code> should be? How about the value of <code>polyValue X n</code>?"}, {"owner": {"reputation": 1, "user_id": 12125561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efea68fbb452c6617cf3331ef135c05e?s=128&d=identicon&r=PG&f=1", "display_name": "breezus99", "link": "https://stackoverflow.com/users/12125561/breezus99"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1572490992, "post_id": 58636082, "comment_id": 103579335, "body": "polyValue (Coef c) n should multiply n * (Coef c) and polyValue X n should just = n?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1572492623, "post_id": 58636082, "comment_id": 103579657, "body": "You\u2019re right about <code>polyValue X n = n</code>. I\u2019m not sure about <code>Coef</code>. Consider: is the polynomial 2x + 1 representable as a <code>Poly</code>? If so, what does it look like?"}, {"owner": {"reputation": 1, "user_id": 12125561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efea68fbb452c6617cf3331ef135c05e?s=128&d=identicon&r=PG&f=1", "display_name": "breezus99", "link": "https://stackoverflow.com/users/12125561/breezus99"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1572530899, "post_id": 58636082, "comment_id": 103595365, "body": "yeah it is. 2x + 1 would look like (Sum (Prod (Coef 2) X) (Coef 1)). so the coef should just be c then"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1572566627, "post_id": 58636082, "comment_id": 103609867, "body": "Correct! Now that you can evaluate <code>Poly</code>s that don\u2019t involve other <code>Poly</code>s, do you have any tentative implementations for <code>polyValue (Sum p1 p2) n</code> and <code>polyValue (Prod p1 p2) n</code>?"}, {"owner": {"reputation": 1, "user_id": 12125561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efea68fbb452c6617cf3331ef135c05e?s=128&d=identicon&r=PG&f=1", "display_name": "breezus99", "link": "https://stackoverflow.com/users/12125561/breezus99"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1572574521, "post_id": 58636082, "comment_id": 103611229, "body": "yeah, I used polyValue (Sum p1 p2) n  = (polyValue p1 n) + (polyValue p2 n) and * for polyValue (Prod p1 p2). Thanks for the help Ry"}], "answers": [{"tags": [], "owner": {"reputation": 1894, "user_id": 412417, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/880a205c1958574d83803d5e30da95ca?s=128&d=identicon&r=PG&f=1", "display_name": "MCH", "link": "https://stackoverflow.com/users/412417/mch"}, "is_accepted": false, "score": 0, "last_activity_date": 1574112851, "creation_date": 1574112851, "answer_id": 58923248, "question_id": 58636082, "link": "https://stackoverflow.com/questions/58636082/evaluating-a-polynomial-for-a-given-value/58923248#58923248", "title": "evaluating a polynomial for a given value", "body": "<p>I am not sure if this is homework or not, so I will try to guide you without giving you the exact answer. You have declared a sum type with four constructors: <code>X</code>, <code>Coef a</code>, <code>Sum (Poly a) (Poly a)</code> and <code>Prod (Poly a) (Poly a)</code>. On the left hand side of your function you can match each of the constructors and define a unique function body that returns the same type as the type signature. I leave the function body empty for you to fill out.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>polyValue :: Num a =&gt; Poly a -&gt; a -&gt; a\npolyValue X n =\npolyValue (Coef a) n =\npolyValue (Sum a b) n = -- you can call polyValue on a and b because they are Poly types\npolyValue (Prod a b) n = -- you can call polyValue on a and b because they are Poly types\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12125561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efea68fbb452c6617cf3331ef135c05e?s=128&d=identicon&r=PG&f=1", "display_name": "breezus99", "link": "https://stackoverflow.com/users/12125561/breezus99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574112851, "creation_date": 1572488239, "last_edit_date": 1572488459, "question_id": 58636082, "link": "https://stackoverflow.com/questions/58636082/evaluating-a-polynomial-for-a-given-value", "title": "evaluating a polynomial for a given value", "body": "<p>Hi I have a algebraic type Poly a</p>\n\n<pre><code>data Poly a = X\n\n| Coef a\n\n| Sum (Poly a) (Poly a)\n\n| Prod (Poly a) (Poly a)\n\nderiving Show\n</code></pre>\n\n<p>I want to write a function that will evaluate poly a when given a number n</p>\n\n<pre><code>polyValue :: Num a =&gt; Poly a -&gt; a -&gt; a\n\npolyValue p n =\n</code></pre>\n\n<p>I'm having a hard time figuring this out and feel like I'm not actually understanding the type Poly a. Thank you for the help.</p>\n"}]