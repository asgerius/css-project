[{"tags": ["haskell", "pattern-matching", "towers-of-hanoi", "io-monad", "do-notation"], "comments": [{"owner": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 9, "creation_date": 1570055847, "post_id": 58210011, "comment_id": 102797844, "body": "There is no issue with &quot;async execution of IO monad&quot; (I assume you&#39;re referring interleaving of output on lazy streams - this is not occuring) or any other issues with monads. Indeed, your program is correct. Every call <code>hanoi n ...</code> for every positive <code>n</code> will first call <code>hanoi (n-1) ..</code> before doing <i>anything else</i> - this is by definition of <code>hanoi n</code>, clearly, since its first statement is <code>hanoi (n-1)</code>. By induction, every call to <code>hanoi n</code> will call <code>hanoi 0</code> before doing anything else. Hence, &quot;Tower .. empty&quot; precedes every line!"}, {"owner": {"reputation": 39, "user_id": 4804688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2372fe6aa31af50281b70f97edbfe03f?s=128&d=identicon&r=PG&f=1", "display_name": "djoloho", "link": "https://stackoverflow.com/users/4804688/djoloho"}, "reply_to_user": {"reputation": 13807, "user_id": 2407038, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/538f6f4a9aa43841841de7d8e8b169fc?s=128&d=identicon&r=PG&f=1", "display_name": "user2407038", "link": "https://stackoverflow.com/users/2407038/user2407038"}, "edited": false, "score": 0, "creation_date": 1570093115, "post_id": 58210011, "comment_id": 102807521, "body": "Thank you, your explanation was very helpful!"}, {"owner": {"reputation": 338, "user_id": 7541700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f94e9d444b4e9a195613481d2db8c1?s=128&d=identicon&r=PG", "display_name": "costargc", "link": "https://stackoverflow.com/users/7541700/costargc"}, "edited": false, "score": 0, "creation_date": 1570384362, "post_id": 58210011, "comment_id": 102888389, "body": "you should check out <a href=\"https://stackoverflow.com/a/58259294/7541700\">this answer in - Tower of Hanoi: Recursive Algorithm</a>"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4804688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2372fe6aa31af50281b70f97edbfe03f?s=128&d=identicon&r=PG&f=1", "display_name": "djoloho", "link": "https://stackoverflow.com/users/4804688/djoloho"}, "edited": false, "score": 0, "creation_date": 1570093174, "post_id": 58212458, "comment_id": 102807554, "body": "Never mind for previous comments.. I understood. Thank you also."}], "tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": true, "score": 3, "last_activity_date": 1570077899, "creation_date": 1570077899, "answer_id": 58212458, "question_id": 58210011, "link": "https://stackoverflow.com/questions/58210011/haskell-do-notation-and-pattern-matching/58212458#58212458", "title": "Haskell do notation and pattern matching?", "body": "<p>I don't know where your misunderstanding is, but you are probably blaming the Monad boogeyman too soon.  Tracing through this program in Haskell seems identical to tracing through it's rather straight-forward C counterpart which yields the same as you showed:</p>\n\n<pre><code>// move :: [Char] -&gt; [Char] -&gt; IO ()\nvoid move(char *f, char *t)\n{\n    // move f t = do { putStrLn (\"Moving from \\\"\" ++ f ++ \"\\\" to \\\"\" ++ t ++ \"\\\"!\") }\n    printf(\"Moving from \\\"%s\\\" to \\\"%s\\\"!\\n\", f, t);\n}\n\n// hanoi :: Integer -&gt; [Char] -&gt; [Char] -&gt; [Char] -&gt; IO ()\nvoid hanoi(int64_t n, char *f, char *h, char *t)\n{\n    if (0 == n) {\n        // hanoi 0 f _ _ = do { putStrLn (\"Lane \\\"\"++ f ++ \"\\\" empty!\") }\n        printf(\"Lane \\\"%s\\\" empty!\\n\", f);\n    } else {\n        // hanoi n f h t =\n        hanoi(n-1,f,t,h); // hanoi (n - 1) f t h\n        move(f,t);        // move f t\n        hanoi(n-1,h,f,t); // hanoi (n - 1) h f t\n    }\n}\n\nint main()\n{\n    hanoi(4,\"A\",\"B\",\"C\");\n    return 0;\n}\n</code></pre>\n\n<p>Consider what's going on.  You said <code>hanoi 4 ...</code> and the next line of code of any significance is <code>hanoi (4 - 1) ...</code> which, as @user2407038 has already commented, is going to be followed by <code>hanoi 2</code>, <code>hanoi 1</code> and <code>hanoi 0</code>.</p>\n\n<p>I think you should consider your algorithm more carefully.</p>\n\n<blockquote>\n  <p>[some problem with] pattern matching and do notation</p>\n</blockquote>\n\n<p>While not entirely unrelated, these concepts are pretty distinct.  The only pattern you have is <code>0</code> and you don't have any patterns due to binds in your do blocks (i.e. <code>[some pattern] &lt;- move</code>).</p>\n"}], "owner": {"reputation": 39, "user_id": 4804688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2372fe6aa31af50281b70f97edbfe03f?s=128&d=identicon&r=PG&f=1", "display_name": "djoloho", "link": "https://stackoverflow.com/users/4804688/djoloho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 58212458, "answer_count": 1, "score": 2, "last_activity_date": 1570077899, "creation_date": 1570054511, "question_id": 58210011, "link": "https://stackoverflow.com/questions/58210011/haskell-do-notation-and-pattern-matching", "title": "Haskell do notation and pattern matching?", "body": "<p>So here is my code..</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>move :: [Char] -&gt; [Char] -&gt; IO ()\nmove f t = do { putStrLn (\"Moving from \\\"\" ++ f ++ \"\\\" to \\\"\" ++ t ++ \"\\\"!\") }\n\nhanoi :: Integer -&gt; [Char] -&gt; [Char] -&gt; [Char] -&gt; IO ()\nhanoi 0 f _ _ = do { putStrLn (\"Lane \\\"\"++ f ++ \"\\\" empty!\") }\nhanoi n f h t = do { hanoi (n - 1) f t h\n                   ; move f t\n                   ; hanoi (n - 1) h f t } \n</code></pre>\n\n<p>When I execute <strong><em>hanoi 4 \"A\" \"B\" \"C\"</em></strong> I expect something like this:</p>\n\n<pre><code>Moving from \"A\" to \"B\"!\nMoving from \"A\" to \"C\"!\nMoving from \"B\" to \"C\"!\nMoving from \"A\" to \"B\"!\nMoving from \"C\" to \"A\"!\nMoving from \"C\" to \"B\"!\nMoving from \"A\" to \"B\"!\nTower \"A\" empty!\n...\n</code></pre>\n\n<p>But I am getting :</p>\n\n<pre><code>Tower \"A\" empty!\nMoving from \"A\" to \"B\"!\nTower \"C\" empty!\nMoving from \"A\" to \"C\"!\nTower \"B\" empty!\nMoving from \"B\" to \"C\"!\nTower \"A\" empty!\nMoving from \"A\" to \"B\"!\nTower \"C\" empty!\nMoving from \"C\" to \"A\"!\nTower \"B\" empty!\nMoving from \"C\" to \"B\"!\n...\n</code></pre>\n\n<p>Seems to me that there is some issue with <em>pattern matching</em> and <em>do notation</em>, and I cant figure out what.\nCan someone explain to me what am I doing wrong or not getting here, I suppose there is someting connected with async execution of IO monad.</p>\n\n<p>I am new to Haskell, and still have not entirely figured out monads...</p>\n"}, {"tags": ["haskell", "greatest-common-divisor"], "comments": [{"owner": {"reputation": 2139, "user_id": 465100, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/debe4d3217980e495cf1f15e7e4b4c9f?s=128&d=identicon&r=PG", "display_name": "Artem Pelenitsyn", "link": "https://stackoverflow.com/users/465100/artem-pelenitsyn"}, "edited": false, "score": 1, "creation_date": 1570040079, "post_id": 58207049, "comment_id": 102792216, "body": "You don&#39;t need parens in <code>max(a b)</code>. Haskell uses \u201capplicative notation\u201d meaning that what you used to write as <code>max(a, b)</code> in other languages, becomes <code>max a b</code> here."}], "answers": [{"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1570041690, "post_id": 58207129, "comment_id": 102792942, "body": "What is the shortcut for lambda symbol?"}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1570042878, "post_id": 58207129, "comment_id": 102793523, "body": "@Dami&#225;nRafaelLattenero Ctrl+Shift+03bb, why?"}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "reply_to_user": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1570043131, "post_id": 58207129, "comment_id": 102793642, "body": "@Dami&#225;nRafaelLattenero Try putting <code>:set prompt &quot;\u03bb &quot;</code> in your <code>~&#47;.ghc&#47;ghci.conf</code>. You will not be disappointed."}], "tags": [], "owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "is_accepted": true, "score": 7, "last_activity_date": 1571987519, "last_edit_date": 1571987519, "creation_date": 1570040158, "answer_id": 58207129, "question_id": 58207049, "link": "https://stackoverflow.com/questions/58207049/trying-to-find-gcd-with-haskell-where-is-the-error-in-my-code/58207129#58207129", "title": "Trying to find GCD with Haskell. Where is the error in my code?", "body": "<p>Well, there are 2 mistakes.</p>\n\n<ol>\n<li><p>In Haskell, you do not write <code>max(a b)</code>, but simply <code>max a b</code>. This is called <a href=\"https://en.wikipedia.org/wiki/Currying\" rel=\"nofollow noreferrer\"><em>currying</em></a>.</p></li>\n<li><p>Your function actually locates <em>all</em> common factors. For instance:</p>\n\n<pre><code>\u03bb lnko 8 16\n[1,2,4,8]\n</code></pre>\n\n<p>If you amend the type signature accordingly, it will work. Or you may select one of the factors somehow.</p></li>\n</ol>\n\n<p>Overall, this is great code. Keep going!</p>\n"}, {"comments": [{"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "edited": false, "score": 0, "creation_date": 1570040975, "post_id": 58207148, "comment_id": 102792639, "body": "Actually this answer is better."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 5, "last_activity_date": 1570046359, "last_edit_date": 1570046359, "creation_date": 1570040211, "answer_id": 58207148, "question_id": 58207049, "link": "https://stackoverflow.com/questions/58207049/trying-to-find-gcd-with-haskell-where-is-the-error-in-my-code/58207148#58207148", "title": "Trying to find GCD with Haskell. Where is the error in my code?", "body": "<p>The types do not match. Indeed, in your function:</p>\n\n<pre><code>lnko :: Integer -&gt; Integer -&gt; Integer\nlnko a b = <b>[</b>n | n &lt;- [1..max(a b)], (n `divides` a) && (n `divides` b) <b>]</b></code></pre>\n\n<p>You here return a list, since you use list comprehension. Furthermore you made some syntactical errors. For example <code>max (a b)</code> means that you perform a function application with <code>a</code> as function, and <code>b</code> as parameter. This should be <code>max a b</code>.</p>\n\n<p>You can rewrite this to:</p>\n\n<pre><code>lnko :: Integer -&gt; Integer -&gt; Integer\nlnko a b = <b>maximum</b> [n | n &lt;- [1..<b>min a b</b>], n `divides` a, n `divides` b ]</code></pre>\n\n<p>But nevertheless, you here use a method where you iterate over all possible dividers, to find the largest one. You can for example use the <a href=\"https://en.wikipedia.org/wiki/Euclidean_algorithm\" rel=\"nofollow noreferrer\"><em>Euclidean algorithm</em> [wiki]</a> which will usually outperform linear search:</p>\n\n<pre><code>lnko :: Integral i =&gt; i -&gt; i -&gt; i\nlnko a 0 = a\nlnko a b = lnko b (mod a b)</code></pre>\n\n<p>This will be more safe as well, for example if you use negative numbers in the parameters.</p>\n"}], "owner": {"reputation": 357, "user_id": 12117801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f0b1a5a3f823ef8adbd669c294bee1?s=128&d=identicon&r=PG&f=1", "display_name": "erdostamasa", "link": "https://stackoverflow.com/users/12117801/erdostamasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 58207129, "answer_count": 2, "score": 3, "last_activity_date": 1571987519, "creation_date": 1570039796, "last_edit_date": 1570040925, "question_id": 58207049, "link": "https://stackoverflow.com/questions/58207049/trying-to-find-gcd-with-haskell-where-is-the-error-in-my-code", "title": "Trying to find GCD with Haskell. Where is the error in my code?", "body": "<p>As an exercise, I'm trying to write this by myself but I'm stuck and don't know where the error is in my code.</p>\n\n<pre><code>module Hf where\n\n--sumSquaresTo :: Integer -&gt; Integer\n--sumSquaresTo x = sum [ n^2 | n &lt;- [1..x] ]\n\ndivides a b = b `mod` a == 0\n\ndivisors a = [n | n &lt;- [1..a], n `divides` a ]\n\n\nlnko :: Integer -&gt; Integer -&gt; Integer\nlnko a b = [n | n &lt;- [1..max(a b)], (n `divides` a) &amp;&amp; (n `divides` b) ]\n</code></pre>\n\n<p>GHCI output:</p>\n\n<pre><code>error:\n    * Couldn't match expected type `Integer'\n                  with actual type `[a0 -&gt; a0]'\n    * In the expression:\n        [n | n &lt;- [1 .. max (a b)], (n `divides` a) &amp;&amp; (n `divides` b)]\n      In an equation for `lnko':\n          lnko a b\n            = [n | n &lt;- [1 .. max (a b)], (n `divides` a) &amp;&amp; (n `divides` b)]\n   |\n12 | lnko a b = [n | n &lt;- [1..max(a b)], (n `divides` a) &amp;&amp; (n `divides` b) ]\n   |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nerror:\n    * Couldn't match expected type `Integer -&gt; a0'\n                  with actual type `Integer'\n    * The function `a' is applied to one argument,\n      but its type `Integer' has none\n      In the first argument of `max', namely `(a b)'\n      In the expression: max (a b)\n   |\n12 | lnko a b = [n | n &lt;- [1..max(a b)], (n `divides` a) &amp;&amp; (n `divides` b) ]\n   |                              ^^^\n\nerror:\n    * Couldn't match expected type `a0 -&gt; a0'\n                  with actual type `Integer'\n    * In the second argument of `divides', namely `a'\n      In the first argument of `(&amp;&amp;)', namely `(n `divides` a)'\n      In the expression: (n `divides` a) &amp;&amp; (n `divides` b)\n    * Relevant bindings include\n        n :: a0 -&gt; a0\n          (bound at C:\\\\Users\\erdos\\Desktop\\haskell\\hazi1.hs:12:17)\n   |\n12 | lnko a b = [n | n &lt;- [1..max(a b)], (n `divides` a) &amp;&amp; (n `divides` b) ]\n   |                                                  ^\n\nerror:\n    * Couldn't match expected type `a0 -&gt; a0'\n                  with actual type `Integer'\n    * In the second argument of `divides', namely `b'\n      In the second argument of `(&amp;&amp;)', namely `(n `divides` b)'\n      In the expression: (n `divides` a) &amp;&amp; (n `divides` b)\n    * Relevant bindings include\n        n :: a0 -&gt; a0\n          (bound at C:\\\\Users\\erdos\\Desktop\\haskell\\hazi1.hs:12:17)\n   |\n12 | lnko a b = [n | n &lt;- [1..max(a b)], (n `divides` a) &amp;&amp; (n `divides` b) ]\n   |                                                                     ^\nFailed, no modules loaded.\n</code></pre>\n"}, {"tags": ["parsing", "haskell", "functional-programming", "typeclass"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1570033406, "post_id": 58205250, "comment_id": 102789183, "body": "<code>read &quot;S3&quot; :: Card</code> works fine. The problem is that you can&#39;t say <code>read &quot;S3H5&quot; :: [Card]</code> because the list instance for <code>Read</code> assumes the string contains an actual list literal, not just juxtaposed strings for the type <code>a</code> of the list you want to read."}, {"owner": {"reputation": 13, "user_id": 12154552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6a8fe84f2022d2465baa28050d437b?s=128&d=identicon&r=PG&f=1", "display_name": "alphawolf", "link": "https://stackoverflow.com/users/12154552/alphawolf"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570033988, "post_id": 58205250, "comment_id": 102789475, "body": "Then how can I read such that I am able to produce the output <code>[Card Spade Three, Card Heart Ace]</code>?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570034524, "post_id": 58205250, "comment_id": 102789716, "body": "I think you could use the <code>FlexibleInstances</code> extension to define your own <code>[Card]</code> instance for <code>Read</code> (which would also have to use the state monad in some way to traverse the string; <code>(s, rest) &lt;- reads str</code> is doing to try to create a card from <i>every</i> character in the string, not just read a single character from the string and move on). I would suggest, though, using a proper parsing library like <code>parsec</code> or one of its variants instead of <code>Read</code>."}, {"owner": {"reputation": 13, "user_id": 12154552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6a8fe84f2022d2465baa28050d437b?s=128&d=identicon&r=PG&f=1", "display_name": "alphawolf", "link": "https://stackoverflow.com/users/12154552/alphawolf"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570034996, "post_id": 58205250, "comment_id": 102789937, "body": "I don&#39;t think I can do that given that my task requirement does not allow me to modify the source code (for the custom data type of <code>Card</code>, <code>Suit</code>, and <code>Rank</code> above, but only utilizing those data types to create the output an array of <code>[Card]</code>. I am not sure how to achieve this output with parsing method (my knowledge on haskell and parsing is very shallow), could you provide an example on how to parse an output of <code>[Card]</code>? Thanks."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1570038049, "post_id": 58205250, "comment_id": 102791336, "body": "For lists, I think you need to redefine the <code>readList</code> method in your <code>Read Card</code> instance. If you do that then the predefined <code>instance Read a =&gt; Read [a]</code> will automagically call your own <code>readList</code>, and everything should work. <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:readList\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.12.0.0/docs/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "is_accepted": false, "score": 0, "last_activity_date": 1570080595, "last_edit_date": 1570080595, "creation_date": 1570077560, "answer_id": 58212397, "question_id": 58205250, "link": "https://stackoverflow.com/questions/58205250/reading-a-custom-data-type-with-error-prelude-read-no-parse/58212397#58212397", "title": "Reading a custom data type with error Prelude.read: no parse", "body": "<p>As @chi says in the comments to the question, the most straightforward way to achieve your aim is to define the <code>readList</code> method for <code>Card</code>.</p>\n\n<blockquote>\n  <p>For lists, I think you need to redefine the <code>readList</code> method in your <code>Read Card</code> instance. If you do that then the predefined instance <code>Read a =&gt; Read [a]</code> will automagically call your own <code>readList</code>, and everything should work.</p>\n</blockquote>\n\n<p>One possible definition:</p>\n\n<pre><code>instance Read Card where\n  ...\n\n  readList str = do\n      (card, rest) &lt;- reads str\n      if null rest then return ([card], \"\")\n          else fmap (Data.Bifunctor.bimap (card:) id) (readList rest\n</code></pre>\n\n<p>Or maybe:</p>\n\n<pre><code>import Text.ParserCombinators.ReadP\n\n...\n\ninstance Read Card where\n  ...\n\n  readList = readP_to_S (many (readS_to_P reads))\n</code></pre>\n\n<p>&nbsp;</p>\n\n<p>However, note also that a default <code>Show</code> and <code>Read</code> instance has some advantages:</p>\n\n<ul>\n<li>It is usual \u2014 that is, people will know what to expect. With a custom instance, it is necessary to inspect the instance definition in order to use it correctly, while a default instance can be used immediately and effortlessly <em>(except for a lot of typing)</em>.</li>\n<li>It is automatically generated \u2014 so it is unlikely there to be errors. It gives you a solid ground to stand on, for free, while a custom definition needs to be thoroughly checked if you want to ship the code in good faith.</li>\n</ul>\n\n<p>Therefore, it may be more reasonable to put the same code into monomorphic functions, like say <code>parseCard</code>, <code>parseCards</code>, <code>renderCard</code> and <code>renderCards</code>, and have the best of both worlds.</p>\n\n<p>&nbsp;</p>\n\n<p>Actually, I think custom <code>Read</code> instances are an obscure corner of Haskell. When I was researching for a similar problem a while ago, I could not find any guides on this subject. <em>(Compare with the abundance of guides on, say, cellular automata or free monads.)</em> This is maybe because people mostly live with the default derived instances until they really need to parse a lot of data, which is when advanced parsing libraries, such as <code>parsec</code>, come into play.</p>\n"}], "owner": {"reputation": 13, "user_id": 12154552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6a8fe84f2022d2465baa28050d437b?s=128&d=identicon&r=PG&f=1", "display_name": "alphawolf", "link": "https://stackoverflow.com/users/12154552/alphawolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570080595, "creation_date": 1570032261, "last_edit_date": 1570078280, "question_id": 58205250, "link": "https://stackoverflow.com/questions/58205250/reading-a-custom-data-type-with-error-prelude-read-no-parse", "title": "Reading a custom data type with error Prelude.read: no parse", "body": "<p>I am extremely new to functional programming and I have few custom data types of the following to represent a deck of cards.</p>\n\n<p><strong>Data type for Suit</strong></p>\n\n<pre><code>data Suit = Spade | Club | Diamond | Heart\n  deriving (Eq, Ord, Enum, Bounded)\n\ninstance Show Suit where\n  show Spade = \"S\"\n  show Club = \"C\"\n  show Diamond = \"D\"\n  show Heart = \"H\"\n\ninstance Read Suit where\n  readsPrec _ [] = []\n  readsPrec _ (s: str) = case s of\n    'S' -&gt; [(Spade, str)]\n    'C' -&gt; [(Club, str)]\n    'D' -&gt; [(Diamond, str)]\n    'H' -&gt; [(Heart, str)]\n    _ -&gt; []\n</code></pre>\n\n<p><strong>Data type for Rank</strong></p>\n\n<pre><code>data Rank = Two | Three | Four | Five | Six | Seven | Eight | Nine | Ten\n          | Jack | Queen | King | Ace\n  deriving (Eq, Ord, Enum, Bounded)\n\ninstance Show Rank where\n  show Ace = \"A\"\n  show King = \"K\"\n  show Queen = \"Q\"\n  show Jack = \"J\"\n  show rank = show $ fromEnum rank + 2\n\ninstance Read Rank where\n  readsPrec _ [] = []\n  readsPrec _ (s: str) = case s of\n      'A' -&gt; [(Ace, str)]\n      'K' -&gt; [(King, str)]\n      'Q' -&gt; [(Queen, str)]\n      'J' -&gt; [(Jack, str)]\n      _   -&gt; readNum\n    where\n      readNum\n        | s &gt;= '2' &amp;&amp; s &lt;= '9' = [(toEnum (ord s - ord '2') :: Rank, str)]\n        | s == '1' = readZero str -- Read a following 0\n        | otherwise = []\n      readZero ('0': rest) = [(Ten, rest)]\n      readZero _ = []\n</code></pre>\n\n<p><strong>Data type for Card</strong></p>\n\n<pre><code>data Card = Card Suit Rank\n  deriving (Eq)\n\ninstance Show Card where\n  show (Card suit rank) = show suit ++ show rank\n\ninstance Read Card where\n  readsPrec _ str = do\n     (s, rest) &lt;- reads str\n     (r, end) &lt;- reads rest\n     return (Card s r, end)\n</code></pre>\n\n<p>When I typed <code>read \"S3H5\" :: Card</code> in my stack ghci console, it shows an exception error of <code>*** Exception: Prelude.read: no parse</code>. </p>\n\n<p><strong>May I ask how to fix this?</strong></p>\n\n<p>I have a string of Card information, for instance, \"S3HA\" which represents two Cards:</p>\n\n<ul>\n<li>Spade Three</li>\n<li>Heart Ace</li>\n</ul>\n\n<p>What I am trying to achieve:</p>\n\n<p>When I read the string of \"S3HA\", I want the output to be an array of</p>\n\n<p><code>[Card Spade Three, Card Heart Ace]</code></p>\n\n<p><strong>Please advise! I am relatively new to Haskell functional programming!</strong></p>\n\n<p>And I do not want to modify the source code for the custom data type of <code>Card</code>, <code>Suit</code> and <code>Rank</code> above but utilizing those data types to create an array of <code>[Card]</code>. Could anyone provide ways to parse a string into a <code>[Card]</code>?</p>\n"}, {"tags": ["list", "haskell", "tree"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1570030960, "post_id": 58204881, "comment_id": 102787983, "body": "&quot;fails because xs is a list of trees and not a single tree like the function type signature indicates&quot; - then why are you applying <code>labels</code> to the list <code>xs</code>? You want to apply it <i>to each element</i> of this list, and the function that does exactly this is...? You also don&#39;t need to separate <code>x</code> from <code>xs</code> in `labels."}, {"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1570031108, "post_id": 58204881, "comment_id": 102788056, "body": "Because Im not sure how I apply to each element in a list instead of the whole list.."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1570031223, "post_id": 58204881, "comment_id": 102788121, "body": "you&#39;re almost there. You should <code>map</code> this function over your list: <code>labels (Node label children) = label : (map labels children)</code>"}, {"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1570031355, "post_id": 58204881, "comment_id": 102788197, "body": "I tried doing that earlier but get an error saying :<code>Occurs check: cannot construct the infinite type: a ~ [a]       Expected type: [a]         Actual type: [[a]]</code>"}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1570031380, "post_id": 58204881, "comment_id": 102788215, "body": "I recommend to you to add the labels function in another question, with the full stack error"}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 1, "last_activity_date": 1570031725, "last_edit_date": 1570031725, "creation_date": 1570031301, "answer_id": 58205005, "question_id": 58204881, "link": "https://stackoverflow.com/questions/58204881/finding-the-height/58205005#58205005", "title": "Finding the height", "body": "<p>Taking in account I defined the Tree as:</p>\n\n<pre><code>data GenTree a = NodeG a [GenTree a] deriving (Show)\n</code></pre>\n\n<p>Well, in this one you where a little closer:</p>\n\n<pre><code>height:: GenTree a -&gt; Integer\nheight (NodeG _ [])    = 0 -- Deep 0\nheight (NodeG _ trees) = 1 + (maximum $ heightLs trees) -- take the max\n\n-- (maximum $ heightLs trees) == (maximum (heightLs trees))\n\nheightLs (x:xs) = map height (x:xs) -- here is perfect\n\ngenTree1 = NodeG \"1\" [NodeG \"2\" [],\n                         NodeG \"3\" [NodeG \"4\" [],\n                                   NodeG \"5\" [NodeG \"6\" [],\n                                             NodeG \"7\" [],\n                                             NodeG \"8\" [\n                                                        NodeG \"9\" []\n                                                        ]\n                                             ]\n                                   ]\n                         ]\n</code></pre>\n\n<blockquote>\n  <p>Example</p>\n</blockquote>\n\n<pre><code>$&gt;   height genTree1\n=&gt; 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 5, "last_activity_date": 1570031910, "creation_date": 1570031910, "answer_id": 58205171, "question_id": 58204881, "link": "https://stackoverflow.com/questions/58204881/finding-the-height/58205171#58205171", "title": "Finding the height", "body": "<p>You can write this in a one liner with:</p>\n\n<pre><code>height :: Integral i =&gt; Tree a -&gt; i\nheight (Node _ cs) = 1 + maximum (0 : map height cs)\n</code></pre>\n\n<p>Here for every node, we thus return <code>1 + &hellip;</code> where <code>&hellip;</code> is the maximum of <code>0</code> and the heights of the children of these nodes. We here use <code>0</code> to prevent that, if the <code>Node</code> hase no children, the <code>maximum</code> will work over an empty list, and thus raise an error.</p>\n"}], "owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58205005, "answer_count": 2, "score": 2, "last_activity_date": 1570032256, "creation_date": 1570030803, "last_edit_date": 1570032256, "question_id": 58204881, "link": "https://stackoverflow.com/questions/58204881/finding-the-height", "title": "Finding the height", "body": "<p>I have the following data type</p>\n\n<p><code>data Tree a -&gt; Node a [Tree a]</code></p>\n\n<p>and would like to find the labels of all the Nodes and height of the tree.</p>\n\n<p>Here is what I did:</p>\n\n<pre><code>height:: Tree a -&gt; Integer height\n\n (Node _ (x:xs)) = 1 + maximum height' (x:xs)\n height' (x:xs) = map height (x:xs)\n</code></pre>\n\n<p>I was hoping that height' would return a list of height mapped over x:xs and try to find the max of that value but ghci does not approve of the map function here.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570017809, "post_id": 58201101, "comment_id": 102780115, "body": "What should happen when you &quot;reject&quot;? Raise an error and let the program terminate?"}, {"owner": {"reputation": 2970, "user_id": 1298865, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/hOaaf.png?s=128&g=1", "display_name": "Nicolas Henin", "link": "https://stackoverflow.com/users/1298865/nicolas-henin"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1570017910, "post_id": 58201101, "comment_id": 102780170, "body": "Let&#39;s say if I reach the limit I display the number of elements and terminate the program..."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570018116, "post_id": 58201101, "comment_id": 102780274, "body": "I would tweak this question slightly. Don&#39;t limit one small part of your program; let it grow as much as it wants, but use your OS to limit how much memory the program as a whole can allocate. Then your question becomes &quot;How do I handle an out-of-memory exception in Haskell?&quot;"}], "owner": {"reputation": 2970, "user_id": 1298865, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/hOaaf.png?s=128&g=1", "display_name": "Nicolas Henin", "link": "https://stackoverflow.com/users/1298865/nicolas-henin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "closed_date": 1570018330, "answer_count": 0, "score": 3, "last_activity_date": 1570024868, "creation_date": 1570017722, "last_edit_date": 1570017824, "question_id": 58201101, "link": "https://stackoverflow.com/questions/58201101/how-to-get-the-memory-size-of-a-datatype-in-haskell", "closed_reason": "Duplicate", "title": "How to get the memory size of a dataType in Haskell?", "body": "<p>Is there a way to get the memory size of a datatype in Haskell ? </p>\n\n<p>E.g : I have a list of item a, and I want to limit this list to x bytes in memory... I will reject all the next items to add above that threshold...</p>\n"}, {"tags": ["list", "haskell", "tree"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570016598, "post_id": 58200737, "comment_id": 102779465, "body": "Why do I not want three arguments?   <code>count [] = ..</code> is supposed to be a base case for the recursion so it will stop when we are at the bottom of the tree. How do I implement this?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1570017118, "post_id": 58200737, "comment_id": 102779726, "body": "&quot;Why do I not want three arguments?&quot; Because <code>count</code> takes a single <code>Tree a</code> and returns an integer. That&#39;s only one argument, as your type signature shows."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570017258, "post_id": 58200737, "comment_id": 102779804, "body": "I expect you just forgot, or didn&#39;t realise you needed, parentheses, and intended <code>count (Node label [childrenTree a])</code>, which is a single tree argument. (Although seemingly for a tree type which has data attached to the nodes, which yours doesn&#39;t. That in itself is unusual - the <code>a</code> in the type definition isn&#39;t actually used.)"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1570017318, "post_id": 58200737, "comment_id": 102779855, "body": "@RobinZigmond Indeed, and <code>[childrenTree a]</code> is not a valid pattern anyway."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570017442, "post_id": 58200737, "comment_id": 102779911, "body": "@AdityaSubramanian See my last edit for an approach which is more similar to yours, where you can recurse."}, {"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1570017714, "post_id": 58200737, "comment_id": 102780061, "body": "So I indeed forgot (ok didnt realize) that I need to have parentheses but is the folloiwing implementation faulty? It seems to return the correct values.   <code>count:: Tree a -&gt; Integer count (Node a [childrenTrees]) = 1 + count childrenTrees </code>   @RobinZigmond I was thinking that a in the type definition would be an object with type Tree with identifier a but that does not seem to be the case?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 1, "creation_date": 1570018515, "post_id": 58200737, "comment_id": 102780489, "body": "@AdityaSubramanian That will fail once there is more than one children, since <code>[childrenTrees]</code> matches only with lists of length <i>one</i>."}, {"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570018819, "post_id": 58200737, "comment_id": 102780672, "body": "Alright I understand!  However I tried implementing as per that realization as the following     ``` count:: Tree a -&gt; Integer count (Node a (t:ts)) = 1 + count t + count ts ``` but now ghci fails because it cannot match the expected type &quot;Tree a2&quot; with the actual type [Tree a]. I get a similar error when I try to implement a height function as the following:   <code>height:: Tree a -&gt; Integer  height (Node a [t:ts]) = 1 + max(height child, height forest)</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570023080, "post_id": 58200737, "comment_id": 102783171, "body": "@AdityaSubramanian <code>Node</code> also takes one one argument; you keep try to match it with <i>two</i>. Your type declaration doesn&#39;t include a label in a <code>Node</code> value."}, {"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1570023432, "post_id": 58200737, "comment_id": 102783417, "body": "@chepner I seemed to have confused myself properly. Would you mind elaborating?"}, {"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570025813, "post_id": 58200737, "comment_id": 102784858, "body": "Unfortunately, it seems like I cannot edit previous comments in this thread so I will try re-formulate.  I tried to implement count as the following  ``` count:: Tree a -&gt; Integer count (Node _ []) = 0 count (Node _ (t:ts)) = 1 + count t + count ts ```  but as ts is a list of (remaining) trees ghci will not compile due to not being able to match types. (ts is a list of trees and count needs a single tree). After trying to google my way out of this I have gotten quite stuck."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570027784, "post_id": 58200737, "comment_id": 102786080, "body": "@AdityaSubramanian That&#39;s a nice progress. <code>1 + count t + count ts</code> sounds almost right. You are right when you say that <code>count ts</code> is wrong, since you need a single tree there, instead of a list-of-trees. Fortunately, <code>Node</code> is a constructor which can turn a list-of-trees into a single tree, so you need to exploit that, and everything should be fine (you&#39;ll need parentheses)."}, {"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570028749, "post_id": 58200737, "comment_id": 102786680, "body": "I have tried to add Node and Node (ts) to various places but Im not quite sure I understand what you mean. Would you mind elaborating?"}, {"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570028939, "post_id": 58200737, "comment_id": 102786799, "body": "I did try that but I receive a similar type of error as earlier:     Couldn&#39;t match expected type <code>Tree a0&#39;                   with actual type </code>[Tree [Tree a]] -&gt; Tree [Tree a]&#39;"}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 4, "last_activity_date": 1570037450, "last_edit_date": 1570037450, "creation_date": 1570016297, "answer_id": 58200737, "question_id": 58200689, "link": "https://stackoverflow.com/questions/58200689/constructor-not-in-scope-pattern-matching-parse-error/58200737#58200737", "title": "Constructor not in Scope / Pattern matching parse error", "body": "<p>This specifies that function <code>count</code> has three arguments, which is not what you want:</p>\n\n<pre><code>count Node label [childrenTree a] = ...\n   -- ^1   ^2    ^3\n</code></pre>\n\n<p>Further,</p>\n\n<pre><code>count [] = ...\n</code></pre>\n\n<p>specifies that there is a single argument, which must be a list (an empty list, to be exact). You want <code>count</code> to take trees as argument, not lists.</p>\n\n<p>The right way to write the code is:</p>\n\n<pre><code>count:: Tree a -&gt; Integer\ncount (Node subtrees) = ...   -- here, we have subtrees :: [Tree a]\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>count:: Tree a -&gt; Integer\ncount (Node [])     = ...\ncount (Node (t:ts)) = ...\n           --here t is the first tree in the list, ts is the list of remaining ones\n</code></pre>\n\n<hr>\n\n<p>Here's a complete working program:</p>\n\n<pre><code>data Tree a = Node [Tree a]\n\ncount:: Tree a -&gt; Integer\ncount (Node [])     = 1\ncount (Node (t:ts)) = count t + count (Node ts)\n\n-- a little test\nmain :: IO ()\nmain = print (count (Node [Node [], Node [Node[], Node[]]]))\n</code></pre>\n\n<p>The output is <code>5</code>, which is the number of <code>Node</code>s in the input.</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570030128, "post_id": 58204384, "comment_id": 102787522, "body": "So this somehow works without running into the type matching error that I got earlier, Im not quite sure how you managed to get around that. How would you do this for the height of a tree? My current implementation tries to mimic yours but Im failing to nail it:  <code>height:: Tree a -&gt; Integer height (Node _ (x:xs)) = 1 + maximum height&#39; (x:xs) height&#39; (x:xs) = map height (x:xs)</code>  I was hoping that height&#39; would map height over the whole list and the maximum would return the maximum value of this list but somewhere things seem to be going wrong."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "edited": false, "score": 0, "creation_date": 1570030341, "post_id": 58204384, "comment_id": 102787647, "body": "@AdityaSubramanian that&#39;s a total different question, and you should add it as a new question. For now, if some of this two answers works for your, accept one, and move on with a new question, because if we mix all the questions in one, further readers wont understand"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 2, "last_activity_date": 1570030426, "last_edit_date": 1570030426, "creation_date": 1570029163, "answer_id": 58204384, "question_id": 58200689, "link": "https://stackoverflow.com/questions/58200689/constructor-not-in-scope-pattern-matching-parse-error/58204384#58204384", "title": "Constructor not in Scope / Pattern matching parse error", "body": "<p>There is a tricky part in General Trees to take account, you have the function in the Tree itself, and you have the recursion over the list of tree so.\n  Another thing is, you tree as it is, doesn't save any valuable information, you can change it a little bit as:</p>\n\n<pre><code>data Tree a = Node a [Tree a] deriving (Show)\n</code></pre>\n\n<p>and the two functions will be like:</p>\n\n<pre><code>count:: Tree a -&gt; Integer\ncount (Node _ trees) = 1 + countLs trees\n\ncountLs []     = 0\ncountLs (t:ts) = (count t) + (countLs ts)\n</code></pre>\n\n<p>and a little demo:</p>\n\n<pre><code>genTree1 = NodeG \"1\" [NodeG \"2\" [],\n                         NodeG \"3\" [NodeG \"4\" [],\n                                   NodeG \"5\" [NodeG \"6\" [],\n                                             NodeG \"7\" [],\n                                             NodeG \"8\" []\n                                             ]\n                                   ]\n                         ]\n</code></pre>\n\n<blockquote>\n  <p>runing example:</p>\n</blockquote>\n\n<pre><code>$&gt; count genTree1\n8\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 12153461, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v3T0oc6csTw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdJ_yKXt7W9RyNRLbo2vYpqsi3rEA/photo.jpg?sz=128", "display_name": "Aditya Subramanian", "link": "https://stackoverflow.com/users/12153461/aditya-subramanian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58204384, "answer_count": 2, "score": 2, "last_activity_date": 1570037450, "creation_date": 1570016137, "last_edit_date": 1570032278, "question_id": 58200689, "link": "https://stackoverflow.com/questions/58200689/constructor-not-in-scope-pattern-matching-parse-error", "title": "Constructor not in Scope / Pattern matching parse error", "body": "<p>I have the following datatype:</p>\n\n<pre><code>data Tree a = Node [Tree a]\n</code></pre>\n\n<p>and I want to count how many nodes are in such a tree so I defined the following: </p>\n\n<pre><code>count:: Tree a -&gt; Integer\ncount [] = 0\ncount Node label [childrenTree a] = 1 + count a\n</code></pre>\n\n<p>which gives me an error saying \"Parse error in pattern: true\". If I change <code>childrenTree a</code> to <code>Tree a</code> it says that the data constructor is not in scope.</p>\n\n<p>How do I solve this?</p>\n"}, {"tags": ["java", "haskell", "functional-programming", "monads", "vavr"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1569999566, "post_id": 58196371, "comment_id": 102771502, "body": "<a href=\"https://www.xanthir.com/b4fM0\" rel=\"nofollow noreferrer\">xanthir.com/b4fM0</a>"}], "answers": [{"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 1, "last_activity_date": 1570129080, "last_edit_date": 1570129080, "creation_date": 1570000421, "answer_id": 58196786, "question_id": 58196371, "link": "https://stackoverflow.com/questions/58196371/why-cant-all-functors-be-monads/58196786#58196786", "title": "Why can&#39;t all Functors be Monads?", "body": "<p>If a type implements <code>flatMap()</code> (as well as <code>return()/unit()/emit()/inject()/wrap()/...</code>), it is already a Monad, by definition. </p>\n\n<p>A \"Functor\" is a very narrow view of a given type. It only considers its ability to <code>map()</code>. There's no regard to any specifics of the given type, when regarding it as an instance of \"Functor\". </p>\n\n<p>If a given type can have a <strong>law-abiding</strong><sup>(</sup>*<sup>)</sup> <code>flatMap()</code> implemented (as well as <code>return()</code>), then it can also be viewed as a lawful instance of \"Monad\".</p>\n\n<p>If an opaque type does not supply us with <code>return()</code>, it can't be viewed as a Monad, is one possibility.</p>\n\n<p>Another is <code>flatMap()</code> which does not follow the Monad laws.</p>\n\n<p><em>edit:</em> <sup>(</sup>*<sup>)</sup> thanks to <a href=\"https://stackoverflow.com/users/745903/leftaroundabout\">@leftaroundabout</a> for pointing out about the laws. on the other hand declaring an unlawful Monad instance in Haskell is still technically possible, even though it's certainly not advisable.</p>\n"}, {"comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1570013540, "post_id": 58197208, "comment_id": 102777981, "body": "Is this pseudo Haskell? I cannot declare a Functor instance: &quot;Illegal instance delaration for <code>Functor m</code>&quot;. <a href=\"https://repl.it/repls/TiredThunderousMigration\" rel=\"nofollow noreferrer\">repl.it/repls/TiredThunderousMigration</a>"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1570015459, "post_id": 58197208, "comment_id": 102778889, "body": "@MichaWiedenmann <code>{-# LANGUAGE FlexibleInstances, UndecidableInstances #-} </code> is required for this kind of instance declaration. Those are pretty common language extensions, you&#39;ll actually find them on (my estimate) half of all Haskell source files. (But even with those extensions, it will of course give errors if you write that instance, because it conflicts with directly-declared <code>Functor</code> instances.)"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1570058936, "post_id": 58197208, "comment_id": 102798486, "body": "@leftaroundabout Thanks for editing that in! It looks like you\u2019ve been correcting many of my other answers lately, so thank you for those ones as well!"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "reply_to_user": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1570059057, "post_id": 58197208, "comment_id": 102798508, "body": "@MichaWiedenmann I did intend it to be somewhat \u2018pseudo Haskell\u2019. You can\u2019t actually define such an instance because it conflicts with many other Functor instances for types with already-defined Monad instances, but it shows that such an instance <i>can</i> be defined in a way that typechecks and (sort-of) works. A better example would have been to define a new function <code>monad_fmap :: Monad m =&gt; (a -&gt; b) -&gt; m a -&gt; m b</code>, and implement that instead of <code>fmap</code>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1570092081, "post_id": 58197208, "comment_id": 102806971, "body": "@bradrn <code>monad_fmap</code> a.k.a. <code>liftM</code>. :)"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1570100189, "post_id": 58197208, "comment_id": 102811313, "body": "@WillNess I know this already exists as <code>liftM</code>. I just wanted to make the name absolutely clear even for people who may not know about <code>liftM</code>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1570100917, "post_id": 58197208, "comment_id": 102811690, "body": "so it&#39;s good to be made aware of it, right? seeing something from several POVs often helps to see it clearer."}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1570103832, "post_id": 58197208, "comment_id": 102813062, "body": "Good point @WillNess! I thought you were just correcting me, but you\u2019re right in that different POVs are important."}], "tags": [], "owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "is_accepted": false, "score": 4, "last_activity_date": 1570016421, "last_edit_date": 1570016421, "creation_date": 1570002315, "answer_id": 58197208, "question_id": 58196371, "link": "https://stackoverflow.com/questions/58196371/why-cant-all-functors-be-monads/58197208#58197208", "title": "Why can&#39;t all Functors be Monads?", "body": "<p>The statement <em>all monads are functors</em> means that, using only the methods from Monad, we can implement the methods from Functor. This can indeed be done, which is why we say that all monads are functors. I don\u2019t know Vavr, but here\u2019s some code in Haskell which does this:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>{-# LANGUAGE FlexibleInstances, UndecidableInstances #-}\n\ninstance Monad m =&gt; Functor m where\n    fmap f x = x &gt;&gt;= (\\x' -&gt; return (f x'))\n</code></pre>\n\n<p>By contrast, the statement <em>all functors are monads</em> means that, using only the methods from Functor, we can implement the methods from Monad. And this can\u2019t be done, since you can do things with monads which you can\u2019t do with functors. So we say that not all functors are monads.</p>\n"}], "owner": {"reputation": 1679, "user_id": 1764648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0EGrJ.jpg?s=128&g=1", "display_name": "Gopal S Akshintala", "link": "https://stackoverflow.com/users/1764648/gopal-s-akshintala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "closed_date": 1570006048, "answer_count": 2, "score": 0, "last_activity_date": 1570129080, "creation_date": 1569998518, "last_edit_date": 1570005360, "question_id": 58196371, "link": "https://stackoverflow.com/questions/58196371/why-cant-all-functors-be-monads", "closed_reason": "Duplicate", "title": "Why can&#39;t all Functors be Monads?", "body": "<p>To my knowledge, Functors are those which have <code>map()</code> and Monads are those which also have <code>flatMap()</code>.\nAll Monads are Functors but not vice-versa. What prevents Functors to implement a <code>flatMap()</code> and be a Monad?\nAre there any Functors which stayed that way due to some limitation. Can you please provide some examples. Thanks.</p>\n"}, {"tags": ["xml", "haskell", "hxt"], "answers": [{"tags": [], "owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "is_accepted": true, "score": 0, "last_activity_date": 1570412020, "creation_date": 1570412020, "answer_id": 58262559, "question_id": 58195952, "link": "https://stackoverflow.com/questions/58195952/extract-multiple-elements-in-an-arrow-proc-context/58262559#58262559", "title": "Extract multiple elements in an Arrow proc context", "body": "<p>Try this:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>readGroup :: LA XmlTree Groups\nreadGroup = deep (isElem &gt;&gt;&gt; hasName \"Groups\") &gt;&gt;&gt;\n  proc root -&gt; do\n    a &lt;- getChildren &gt;&gt;&gt; readGroupA -&lt; root\n    b &lt;- getChildren &gt;&gt;&gt; readGroupB -&lt; root\n    returnA -&lt; Groups a b\n\nreadGroupA :: LA XmlTree GroupA\nreadGroupA = isElem &gt;&gt;&gt; hasName \"GroupA\" &gt;&gt;&gt;\n  proc root -&gt; do\n    n &lt;- getChildren &gt;&gt;&gt; isElem &gt;&gt;&gt; hasName \"Name\" /&gt; getText -&lt; root\n    s &lt;- getChildren &gt;&gt;&gt; isElem &gt;&gt;&gt; hasName \"Sum\"  /&gt; getText -&lt; root\n    returnA -&lt; GroupA n s\n\nreadGroupB :: LA XmlTree GroupB\nreadGroupB = isElem &gt;&gt;&gt; hasName \"GroupB\" &gt;&gt;&gt;\n  proc root -&gt; do\n    n &lt;- getChildren &gt;&gt;&gt; isElem &gt;&gt;&gt; hasName \"Name\" /&gt; getText -&lt; root\n    s &lt;- getChildren &gt;&gt;&gt; isElem &gt;&gt;&gt; hasName \"Sum\"  /&gt; getText -&lt; root\n    returnA -&lt; GroupB n s\n</code></pre>\n\n<p>When the call to <code>getChildren</code> is outside the <code>do</code>-block, you are committing to one child before even entering the <code>proc</code>. Inside the <code>proc</code>, you check (for instance) whether that child has name <code>Name</code> <em>and</em> name <code>Sum</code>. Unsurprisingly, you don't find any child fitting these contradictory requirements.</p>\n\n<p>By moving <code>getChildren</code> inside, you allow different children to be traversed for (for instance) <code>n</code> and <code>s</code>.</p>\n"}], "owner": {"reputation": 1861, "user_id": 722695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02e5730386e784c40ab552297e5c3f95?s=128&d=identicon&r=PG", "display_name": "Roby", "link": "https://stackoverflow.com/users/722695/roby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 58262559, "answer_count": 1, "score": 5, "last_activity_date": 1570412020, "creation_date": 1569995922, "last_edit_date": 1570010568, "question_id": 58195952, "link": "https://stackoverflow.com/questions/58195952/extract-multiple-elements-in-an-arrow-proc-context", "title": "Extract multiple elements in an Arrow proc context", "body": "<p>I want to parse the following sample XML file, without the pickler module.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;Groups&gt; \n    &lt;Name&gt;ABC&lt;/Name&gt;\n    &lt;GroupA&gt;\n        &lt;Name&gt;Foo&lt;/Name&gt;\n        &lt;Sum&gt;100&lt;/Sum&gt;\n    &lt;/GroupA&gt;\n    &lt;GroupB&gt;\n        &lt;Name&gt;Bar&lt;/Name&gt;\n        &lt;Sum&gt;0&lt;/Sum&gt;\n    &lt;/GroupB&gt;\n&lt;/Groups&gt;\n</code></pre>\n\n<p>I ended up with this:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>{-# language Arrows #-}\n\nimport Text.XML.HXT.Core\n\ndata Groups = Groups GroupA GroupB deriving Show\ndata GroupA = GroupA String String deriving Show\ndata GroupB = GroupB String String deriving Show\n\n\nreadGroup :: LA XmlTree Groups\nreadGroup = deep (isElem &gt;&gt;&gt; hasName \"Groups\") &gt;&gt;&gt; getChildren &gt;&gt;&gt;\n  proc root -&gt; do\n    a &lt;- readGroupA -&lt; root\n    b &lt;- readGroupB -&lt; root\n    returnA -&lt; Groups a b\n\nreadGroupA :: LA XmlTree GroupA\nreadGroupA = isElem &gt;&gt;&gt; hasName \"GroupA\" &gt;&gt;&gt; getChildren &gt;&gt;&gt;\n  proc root -&gt; do\n    n &lt;- isElem &gt;&gt;&gt; hasName \"Name\" /&gt; getText -&lt; root\n    s &lt;- isElem &gt;&gt;&gt; hasName \"Sum\"  /&gt; getText -&lt; root\n    returnA -&lt; GroupA n s\n\nreadGroupB :: LA XmlTree GroupB\nreadGroupB = isElem &gt;&gt;&gt; hasName \"GroupB\" &gt;&gt;&gt; getChildren &gt;&gt;&gt;\n  proc root -&gt; do\n    n &lt;- isElem &gt;&gt;&gt; hasName \"Name\" /&gt; getText -&lt; root\n    s &lt;- isElem &gt;&gt;&gt; hasName \"Sum\"  /&gt; getText -&lt; root\n    returnA -&lt; GroupB n s\n\n</code></pre>\n\n<p>Unfortunately, this does not work. \nIf I try to extract just a single element in a <code>proc</code> context it works.\nBut trying to extract multiple elements will always fail\\ return the empty list. I might have a misunderstanding of the composition <code>&gt;&gt;&gt;</code>.</p>\n\n<p>I run the example with <code>runLa (xreadDoc &gt;&gt;&gt; readGroups)</code></p>\n"}, {"tags": ["haskell", "graph", "functional-programming", "custom-data-type"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "edited": false, "score": 0, "creation_date": 1569996878, "post_id": 58195513, "comment_id": 102770540, "body": "Ohhh, thanks a lot i didn&#39;t know that empty was alredy in Data.Map"}, {"owner": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "edited": false, "score": 0, "creation_date": 1569996893, "post_id": 58195513, "comment_id": 102770542, "body": "Have a nice day"}, {"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "reply_to_user": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "edited": false, "score": 0, "creation_date": 1570009395, "post_id": 58195513, "comment_id": 102776118, "body": "@VelyynS: You can also use <code>mempty</code> here because <code>Map</code> is an instance of <code>Monoid</code>\u2014judiciously choosing polymorphic functions like <code>mempty</code> over <code>Data.Map.empty</code>, or <code>fmap</code> over <code>map</code>, makes code slightly more resilient to changes in representation, i.e., coding to the interface rather than the implementation"}, {"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "reply_to_user": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "edited": false, "score": 0, "creation_date": 1570009433, "post_id": 58195513, "comment_id": 102776134, "body": "@VelyynS: And of course you can enumerate the fields explicitly using record notation: <code>emptyGraph = Graph { arcsMap = mempty, labelMap = mempty, styleMap = mempty }</code>"}], "tags": [], "owner": {"reputation": 66, "user_id": 3370961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eab2de473ce3048d021758fab427b54?s=128&d=identicon&r=PG", "display_name": "epicallan", "link": "https://stackoverflow.com/users/3370961/epicallan"}, "is_accepted": true, "score": 4, "last_activity_date": 1569992879, "creation_date": 1569992879, "answer_id": 58195513, "question_id": 58195420, "link": "https://stackoverflow.com/questions/58195420/accessing-members-of-a-graph-data-type-in-haskell/58195513#58195513", "title": "Accessing members of a Graph data type in Haskell", "body": "<pre><code>import Data.Map (Map, empty)\n\n-- | A directed graph\ndata Graph v = Graph\n   { arcsMap :: Map v [v]     -- A map associating a vertex with its successors\n   , labelMap :: Map v String -- The Graphviz label of each node\n   , styleMap :: Map v String -- The Graphviz style of each node\n   }\n\n-- | Returns an empty graph\nemptyGraph :: Graph v\nemptyGraph = Graph empty empty empty\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 12151860, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDzSn6OW34aHl_xg7YF7kz32Jz-b-dU3b3x6Ktl=k-s128", "display_name": "Velyyn S", "link": "https://stackoverflow.com/users/12151860/velyyn-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 58195513, "answer_count": 1, "score": 0, "last_activity_date": 1569992879, "creation_date": 1569992243, "question_id": 58195420, "link": "https://stackoverflow.com/questions/58195420/accessing-members-of-a-graph-data-type-in-haskell", "title": "Accessing members of a Graph data type in Haskell", "body": "<p>My question is simple, I'm really new in the world of functional programming so I was wondering how I can access the element of my data type to create an empty graph, for example.</p>\n\n<pre><code>module Graph where\n\nimport Data.Map (Map)\n\nimport Graphviz\n\n-- | A directed graph\ndata Graph v = Graph\n    { arcsMap :: Map v [v]     -- A map associating a vertex with its successors\n    , labelMap :: Map v String -- The Graphviz label of each node\n    , styleMap :: Map v String -- The Graphviz style of each node\n    }\n\n-- | Returns an empty graph\nemptyGraph :: Graph v\nemptyGraph = ???\n</code></pre>\n\n<p>thankyou!</p>\n"}, {"tags": ["haskell", "ghc"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1569989361, "post_id": 58194161, "comment_id": 102768804, "body": "You could use hoogle (maybe a local instance) to search for the name and make a good guess."}, {"owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1569990614, "post_id": 58194161, "comment_id": 102769005, "body": "@luqui That solved my immediate problem, thank you! I already had a local hoogle built anyway. Do you know if hoogle would have found the name being re-exported if the whole module was imported and re-exported (which would have meant that the name of the identifier of interest need not appear in the source in either version)? That turned out not to be the case here, but I was worried about it. But if hoogle can report all exported symbols from a module regardless of whether they&#39;re explicitly named, then it might be a general solution to this problem."}], "answers": [{"tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 6, "last_activity_date": 1569980521, "creation_date": 1569980521, "answer_id": 58194228, "question_id": 58194161, "link": "https://stackoverflow.com/questions/58194161/is-it-possible-to-trace-the-chain-of-imports-that-lead-to-a-particular-identifie/58194228#58194228", "title": "Is it possible to trace the chain of imports that lead to a particular identifier?", "body": "<p>I don't know a way to ask for the whole chain, but you could use <code>-ddump-minimal-imports</code> to ask for the first step in the chain, then iterate.</p>\n"}], "owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1569980521, "creation_date": 1569979764, "question_id": 58194161, "link": "https://stackoverflow.com/questions/58194161/is-it-possible-to-trace-the-chain-of-imports-that-lead-to-a-particular-identifie", "title": "Is it possible to trace the chain of imports that lead to a particular identifier?", "body": "<p>A Haskell package (let's call it package <strong>A</strong>) has stopped compiling for me due to updated dependencies, with an error about an undefined variable. I have access to an old environment of dependencies where the exact same code <em>does</em> still compile, so I can open the module in GHCi and use <code>:info</code> to track down where it originally came from, which leads me to package <strong>B</strong>.</p>\n\n<p>The trouble is that the now-broken module in <strong>A</strong> does not <em>directly</em> import the module from <strong>B</strong> defining this missing identifier; it must have been getting it through another import that re-exports it. But neither <strong>A</strong> nor <strong>B</strong> have changed at all changed between the two environments. So that means that a module in some <em>third</em> package <strong>C</strong> must previously have imported and re-exported my the identifier from <strong>B</strong>, to then be imported (possibly via further re-exports) by the broken module in <strong>A</strong>, and <strong>C</strong> has changed between the two environments to no longer re-export the identifier.</p>\n\n<p>Is there some way I can ask GHC or Cabal in the working environment for the full chain of imports that leads to an identifier being in scope, so that I can identify the package <strong>C</strong>? Otherwise I don't know how to narrow down the cause of the problem without manually reviewing all of the (transitive) dependencies of <strong>A</strong> that could plausibly import something from <strong>B</strong>.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 1, "creation_date": 1569979445, "post_id": 58193911, "comment_id": 102767180, "body": "I&#39;m not sure I understand the conflict you are trying to set up with this question. For example, you ask why this has the same syntax as the &quot;has type&quot; operator... but it <i>is</i> the &quot;has type&quot; operator! Similarly, you say normally <code>::</code> is like a type annotation; and then you show an example where <code>::</code> is used as a type annotation (and imply that this is not the normal use... but it is the normal use)."}, {"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 2, "creation_date": 1569981363, "post_id": 58193911, "comment_id": 102767484, "body": "Does it help to know that <code>::</code> is syntax, not an operator? &quot;Operator&quot; in Haskell has a specific meaning - an infix function that can be sectioned. There are several tokens made from operator characters that are reserved as syntax instead, like <code>&lt;-</code>, <code>-&gt;</code>, <code>|</code>, and <code>::</code>. (That list is not exhaustive.) They aren&#39;t operators, and they don&#39;t work like operators. They&#39;re just syntax."}], "answers": [{"tags": [], "owner": {"reputation": 2501, "user_id": 598892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a22954b638ce69b9994c9e3623953a5?s=128&d=identicon&r=PG", "display_name": "Chris Smith", "link": "https://stackoverflow.com/users/598892/chris-smith"}, "is_accepted": true, "score": 5, "last_activity_date": 1569978192, "creation_date": 1569978192, "answer_id": 58194001, "question_id": 58193911, "link": "https://stackoverflow.com/questions/58193911/how-does-the-operator-syntax-work-in-the-context-of-bounded-typeclass/58194001#58194001", "title": "How does the :: operator syntax work in the context of bounded typeclass?", "body": "<p>There is no separate operator: <code>::</code> is a type annotation in that example.  Perhaps the best way to understand this is to consider this code:</p>\n\n<pre><code>main = print (f minBound)\n\nf :: Int -&gt; Int\nf = id\n</code></pre>\n\n<p>This also prints <code>-2147483648</code>.  The use of <code>minBound</code> is inferred to be an <code>Int</code> because it is the parameter to <code>f</code>.  Once the type has been inferred, the value for that type is known.</p>\n\n<p>Now, back to:</p>\n\n<pre><code>main = print (minBound :: Int)\n</code></pre>\n\n<p>This works in the same way, except that <code>minBound</code> is known to be an <code>Int</code> because of the type annotation, rather than for some more complex reason.  The <code>::</code> isn't some binary operation; it just directs the compiler that the expression <code>minBound</code> has the type <code>Int</code>.  Once again, since the type is known, the value can be determined from the type class.</p>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1570102337, "post_id": 58194783, "comment_id": 102812386, "body": "&quot;another example:&quot; ... ? something&#39;s missing. :)"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1569986229, "creation_date": 1569986229, "answer_id": 58194783, "question_id": 58193911, "link": "https://stackoverflow.com/questions/58193911/how-does-the-operator-syntax-work-in-the-context-of-bounded-typeclass/58194783#58194783", "title": "How does the :: operator syntax work in the context of bounded typeclass?", "body": "<p>Just to add another example, with Monads you can play a little like this:</p>\n\n<pre><code>import Control.Monad\n\nanyMonad :: (Monad m) =&gt; Int -&gt; m Int\nanyMonad x = (pure x) &gt;&gt;= (\\x -&gt; pure (x*x)) &gt;&gt;= (\\x -&gt; pure (x+2))\n\n$&gt;  anyMonad 4 :: [Int]\n=&gt; [18]\n$&gt;   anyMonad 4 :: Either a Int\n=&gt; Right 18\n$&gt;   anyMonad 4 :: Maybe Int\n=&gt; Just 18\n</code></pre>\n\n<p>it's a generic example telling you that the functionality may change with the type, another example:</p>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1570103329, "post_id": 58195168, "comment_id": 102812839, "body": "I wish more Haskell answers were like this, thorough and detailed."}], "tags": [], "owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "is_accepted": false, "score": 3, "last_activity_date": 1570071850, "last_edit_date": 1570071850, "creation_date": 1569990044, "answer_id": 58195168, "question_id": 58193911, "link": "https://stackoverflow.com/questions/58193911/how-does-the-operator-syntax-work-in-the-context-of-bounded-typeclass/58195168#58195168", "title": "How does the :: operator syntax work in the context of bounded typeclass?", "body": "<p><code>::</code> still means \"has type\" in that example.</p>\n\n<p>There are two ways you can use <code>::</code> to write down type information. Type declarations, and inline type annotations. Presumably you've been used to seeing type declarations, as in:</p>\n\n<pre><code>plusOne :: Integer -&gt; Integer\nplusOne = (+1)\n</code></pre>\n\n<p>Here the <code>plusOne :: Integer -&gt; Integer</code> line is a <em>separate</em> declaration about the identifier <code>plusOne</code>, informing the compiler what its type should be. It is then actually defined on the following line in another declaration.</p>\n\n<p>The other way you can use <code>::</code> is that you can embed type information in the middle of any expression. Any expression can be followed by <code>::</code> and then a type, and it means the same thing as the expression on its own except with the additional constraint that it must have the given type. For example:</p>\n\n<pre><code>foo = ('a', 2) :: (Char, Integer)\nbar = ('a', 2 :: Integer)\n</code></pre>\n\n<p>Note that for <code>foo</code> I attached the entire expression, so it is very little different from having used a separate <code>foo :: (Char, Integer)</code> declaration. <code>bar</code> is more interesting, since I gave a type annotation for just the <code>2</code> but used that within a larger expression (for the whole pair). <code>2 :: Integer</code> is still an expression for the <strong>value</strong> <code>2</code>; <code>::</code> is not an operator that takes <code>2</code> as input and computes some result. Indeed if the <code>2</code> were already used in a context that requires it to be an <code>Integer</code> then the <code>:: Integer</code> annotation changes nothing at all. But because <code>2</code> is normally polymorphic in Haskell (it could fit into a context requiring an <code>Integer</code>, or a <code>Double</code>, or a <code>Complex Float</code>) the type annotation pins down that the type of <em>this</em> particular expression is <code>Integer</code>.</p>\n\n<p>The use is that it avoids you having to restructure your code to have a separate declaration for the expression you want to attach a type to. To do that with my simple example would have required something like this:</p>\n\n<pre><code>two :: Integer\ntwo = 2\n\nbaz = ('a', two)\n</code></pre>\n\n<p>Which adds a relatively large amount of extra code just to have something to attach <code>:: Integer</code> to. It also means when you're reading <code>bar</code>, you have to go read a whole separate definition to know what the second element of the pair is, instead of it being clearly stated right there.</p>\n\n<hr>\n\n<p>So now we can answer your direct question. <code>::</code> has no special or particular meaning with the <code>Bounded</code> type class or with <code>minBound</code> in particular. However it's <em>useful</em> with <code>minBound</code> (and other type class methods) because the whole point of type classes is to have overloaded names that do different things depending on the type. So selecting the type you want is useful!</p>\n\n<p><code>minBound :: Int</code> is just an expression using the value of <code>minBound</code> under the constraint that this particular time <code>minBound</code> is used as an <code>Int</code>, and so the value is <code>-2147483648</code>. As opposed to <code>minBound :: Char</code> which is <code>'\\NUL'</code>, or <code>minBound :: Bool</code> which is <code>False</code>.</p>\n\n<p>None of those options mean anything different from using <code>minBound</code> where there was already some context requiring it to be an <code>Int</code>, or <code>Char</code>, or <code>Bool</code>; it's just a very quick and simple way of <em>adding</em> that context if there isn't one already.</p>\n\n<hr>\n\n<p>It's worth being clear that both forms of <code>::</code> are <strong>not</strong> operators as such. There's nothing terribly wrong with informally using the word operator for it, but be aware that \"operator\" has a specific meaning in Haskell; it refers to symbolic function names like <code>+</code>, <code>*</code>, <code>&amp;&amp;</code>, etc. Operators are first-class citizens of Haskell: we can bind them to variables<sup>1</sup> and pass them around. For example I can do:</p>\n\n<pre><code>(|+|) = (+)\n\nx = 1 |+| 2\n</code></pre>\n\n<p>But you cannot do this with <code>::</code>. It is \"hard-wired\" into the language, just as the <code>=</code> symbol used for introducing definitions is, or the <code>module Main ( main ) where</code> syntax for module headers. As such there are lots of things that are true about Haskell operators that are not true about <code>::</code>, so you need to be careful not to confuse yourself or others when you use the word \"operator\" informally to include <code>::</code>.</p>\n\n<hr>\n\n<p><sup>1</sup> Actually an operator is just a particular kind of variable name that is applied by writing it between two arguments instead of before them. The same function can be bound to operator and ordinary variables, even at the same time.</p>\n"}], "owner": {"reputation": 5328, "user_id": 1525061, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b671721393d55dd00c01daaec6efd13e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1525061/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 58194001, "answer_count": 3, "score": 2, "last_activity_date": 1570071850, "creation_date": 1569977162, "last_edit_date": 1570050005, "question_id": 58193911, "link": "https://stackoverflow.com/questions/58193911/how-does-the-operator-syntax-work-in-the-context-of-bounded-typeclass", "title": "How does the :: operator syntax work in the context of bounded typeclass?", "body": "<p>I'm learning Haskell and trying to understand the reasoning behind it's syntax design at the same time. Most of the syntax is beautiful.</p>\n\n<p>But since <code>::</code> normally is like a type annotation, How is it that this works:</p>\n\n<pre><code>Input: minBound::Int\n\nOutput: -2147483648\n</code></pre>\n"}, {"tags": ["list", "haskell", "recursion"], "comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1569951098, "post_id": 58189681, "comment_id": 102759021, "body": "what should <code>inRangeRec 3 5 [10,5,1,3,9,4]</code> return? Should it be <code>[]</code> or <code>[5,3,4]</code>?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 4, "creation_date": 1569951258, "post_id": 58189681, "comment_id": 102759089, "body": "<code>[x | x &lt;- xs]</code> is the same as <code>xs</code>; it&#39;s not the same <code>x</code> as the head of the list you matched. Also, <code>lo</code> may not actually be in the list, but you are adding it to the result."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 6, "creation_date": 1569951343, "post_id": 58189681, "comment_id": 102759123, "body": "<code>otherwise</code> should always go last.  Consider <code>if True then inRangeRec ... ; else []</code>.  <code>otherwise</code> literally equals <code>True</code>."}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 4, "last_activity_date": 1569951726, "creation_date": 1569951726, "answer_id": 58189847, "question_id": 58189681, "link": "https://stackoverflow.com/questions/58189681/how-can-i-make-my-list-stop-at-a-certain-value/58189847#58189847", "title": "How can I make my list stop at a certain value?", "body": "<p>I think what you are trying to say is to let the value <code>x</code> if it is in range, if not, remove it, and stop if <code>x</code> is greater than max, so:</p>\n\n<pre><code>inRangeRec :: Int -&gt; Int -&gt; [Int] -&gt; [Int]\ninRangeRec lo hi [] = []\ninRangeRec lo hi xss@(x:xs) | lo &lt;= x &amp;&amp; x &lt;= hi = x : inRangeRec lo hi xs\n                            | x &gt; hi             = [] \n                            | otherwise          = inRangeRec lo hi xs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1569967556, "creation_date": 1569967556, "answer_id": 58192857, "question_id": 58189681, "link": "https://stackoverflow.com/questions/58189681/how-can-i-make-my-list-stop-at-a-certain-value/58192857#58192857", "title": "How can I make my list stop at a certain value?", "body": "<p>We can make use of <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:takeWhile\" rel=\"nofollow noreferrer\"><strong><code>takeWhile :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</code></strong></a> to take elements as long as a certain condition holds.</p>\n\n<p>We can here thus use <code>filter</code> and <code>takeWhile</code>, like:</p>\n\n<pre><code>inRange :: Ord a =&gt; a -&gt; a -&gt; [a] -&gt; [a]\ninRange lo hi = filter (&gt; lo) . takeWhile (&lt; hi)\n</code></pre>\n\n<p>or in case we know that the list is in ascending order, we can use <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:dropWhile\" rel=\"nofollow noreferrer\"><strong><code>dropWhile :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</code></strong></a> as well:</p>\n\n<pre><code>inRange :: Ord a =&gt; a -&gt; a -&gt; [a] -&gt; [a]\ninRange lo hi = dropWhile (&lt; lo) . takeWhile (&lt; hi)\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 12125886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lL_tHSWvd4A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf83z8SWPpiCu8AqntU5mT9fDe0kA/photo.jpg?sz=128", "display_name": "Kale Joe", "link": "https://stackoverflow.com/users/12125886/kale-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 58189847, "answer_count": 2, "score": 1, "last_activity_date": 1572883253, "creation_date": 1569950842, "last_edit_date": 1572883253, "question_id": 58189681, "link": "https://stackoverflow.com/questions/58189681/how-can-i-make-my-list-stop-at-a-certain-value", "title": "How can I make my list stop at a certain value?", "body": "<p>I am trying to set the range of the list by the values that I give. I was able to set the head of the list and write the rest of it. However I am couldn't make the list stop at the hi value that I put in the function. How do I make my list stop at that specific value?</p>\n\n<p>I tried different combinations between the conditions that I wrote. I tried putting x > hi = [] as the first condition, I thought once the next element on the list was greater than hi the list would end. </p>\n\n<pre><code>inRangeRec :: Int -&gt; Int -&gt; [Int] -&gt; [Int]\ninRangeRec lo hi [] = []\ninRangeRec lo hi (x:xs) | lo &lt;= x &amp;&amp; x &lt;= hi = lo : [ x | x &lt;- xs]\n                        | otherwise          = inRangeRec lo hi xs\n                        | x &gt; hi             = [] \n</code></pre>\n\n<p>I expect inRangeRec 3 5 [1..10] == [3,4,5]\nbut the output I get is [3,4,5,6,7,8,9,10]</p>\n"}, {"tags": ["haskell", "lambda", "filter", "grahams-scan"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1569952439, "post_id": 58187801, "comment_id": 102759524, "body": "Among other errors: since <code>p3 :: Direction p</code>, <code>MyLeft p3 :: Direction (Direction p)</code>, which is the wrong type."}, {"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "edited": false, "score": 0, "creation_date": 1570009842, "post_id": 58187801, "comment_id": 102776337, "body": "Aside: <code>length xs &gt; 1</code> traverses the whole spine of <code>xs</code> because <code>Int</code> is strict; it doesn\u2019t matter here, but if <code>length xs</code> is expected to be large (or infinite) then you can make this more efficient using for example <code>not (small xs)</code> where <code>small = null . drop 1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 11372625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26f5fb2bbbe8f1060006686c1d94fe5?s=128&d=identicon&r=PG&f=1", "display_name": "mushishi", "link": "https://stackoverflow.com/users/11372625/mushishi"}, "edited": false, "score": 0, "creation_date": 1570010306, "post_id": 58188003, "comment_id": 102776569, "body": "None of the following avoid the above error:  (length . filter (== MyLeft) $ [p1, p2, p3]) (length . filter (== MyLeft)  [p1, p2, p3])  ((length . filter (== MyLeft)) [p1, p2, p3])  (length $ filter (== MyLeft) [p1, p2, p3])"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 139, "user_id": 11372625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26f5fb2bbbe8f1060006686c1d94fe5?s=128&d=identicon&r=PG&f=1", "display_name": "mushishi", "link": "https://stackoverflow.com/users/11372625/mushishi"}, "edited": false, "score": 0, "creation_date": 1570030050, "post_id": 58188003, "comment_id": 102787478, "body": "Those suggestions fix your first type error, but not the second (that <code>(== MyLeft)</code> is itself not a very good function)."}], "tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": false, "score": 2, "last_activity_date": 1569943514, "creation_date": 1569943514, "answer_id": 58188003, "question_id": 58187801, "link": "https://stackoverflow.com/questions/58187801/haskell-length-and-filter-to-determine-convexity-or-concavity-of-a-line/58188003#58188003", "title": "Haskell length and filter to determine convexity or concavity of a line", "body": "<p>Same as the recent question <a href=\"https://stackoverflow.com/questions/58171265/why-does-odd-fst-not-work-with-the-filter-function\">Why does odd.fst not work with the filter function?</a>. When you write</p>\n\n<pre><code>length . filter f xs\n</code></pre>\n\n<p>this is parsed as</p>\n\n<pre><code>length . (filter f xs)\n</code></pre>\n\n<p>This clearly isn't right: <code>filter f xs</code> is a list, not a function, so it makes no sense to compose it with <code>length</code>. Instead, you could write</p>\n\n<pre><code>(length . filter f) xs\n</code></pre>\n\n<p>although a more popular way to spell that would be</p>\n\n<pre><code>length . filter f $ xs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 2, "last_activity_date": 1569959081, "last_edit_date": 1569959081, "creation_date": 1569949332, "answer_id": 58189352, "question_id": 58187801, "link": "https://stackoverflow.com/questions/58187801/haskell-length-and-filter-to-determine-convexity-or-concavity-of-a-line/58189352#58189352", "title": "Haskell length and filter to determine convexity or concavity of a line", "body": "<p>You can create functions that tells you if it is right or left instead of using <code>==</code></p>\n\n<pre><code>import Data.List \n\ndata Direction point = MyLeft point | MyRight point | Straight deriving (Show)\n\ngetDirectionFromTriple :: Direction p -&gt; Direction p -&gt; Direction p -&gt; Direction p\ngetDirectionFromTriple p1 p2 p3 \n  | isDirection isLeft  [p1, p2, p3]  = MyLeft (getValue p3)\n  | isDirection isRight [p1, p2, p3]  = MyRight (getValue p3)\n  | otherwise = Straight\n\nisDirection :: (Direction p -&gt; Bool) -&gt; [Direction p] -&gt; Bool\nisDirection f ps = (length . filter f) ps &gt; 1\n\ngetValue (MyLeft a) = a\ngetValue (MyRight a) = a\ngetValue Straight  = error \"No value in Straight\"\n\nisLeft  (MyLeft _)  = True\nisLeft   _          = False\nisRight (MyRight _) = True\nisRight  _          = False\n\nmain = do\n  putStrLn $ show $ getDirectionFromTriple (MyRight 2) Straight (MyLeft 1)\n  putStrLn $ show $ getDirectionFromTriple (MyRight 2) (MyRight 3) (MyLeft 1)\n  putStrLn $ show $ getDirectionFromTriple (MyLeft 1) (MyLeft 1) (MyRight 2) \n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 11372625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26f5fb2bbbe8f1060006686c1d94fe5?s=128&d=identicon&r=PG&f=1", "display_name": "mushishi", "link": "https://stackoverflow.com/users/11372625/mushishi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58189352, "answer_count": 2, "score": 2, "last_activity_date": 1569959081, "creation_date": 1569942711, "question_id": 58187801, "link": "https://stackoverflow.com/questions/58187801/haskell-length-and-filter-to-determine-convexity-or-concavity-of-a-line", "title": "Haskell length and filter to determine convexity or concavity of a line", "body": "<p>I am reading Real World Haskell, trying to solve <a href=\"http://book.realworldhaskell.org/read/defining-types-streamlining-functions.html\" rel=\"nofollow noreferrer\">Ch3, Q10</a> using ghc <a href=\"https://www.jdoodle.com/execute-haskell-online/\" rel=\"nofollow noreferrer\">online</a>. </p>\n\n<p>So far I have the following code: </p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>data Direction point = MyLeft point | MyRight point | Straight deriving (Show)\n\ngetDirectionFromTriple :: Direction p -&gt; Direction p -&gt; Direction p -&gt; Direction p\ngetDirectionFromTriple p1 p2 p3 \n  | (length . filter (== MyLeft) [p1, p2, p3]) &gt; 1 = MyLeft p3\n  | (length . filter (== MyRight) [p1, p2, p3]) &gt; 1 = MyRight p3\n  | otherwise = Straight\n\n</code></pre>\n\n<p>I receive the following error when trying to compile this code (only parts posted, the same error pops up several times) : </p>\n\n<pre><code>[1 of 1] Compiling Main             ( jdoodle.hs, jdoodle.o )\n\n\njdoodle.hs:17:15: error:\n    * Couldn't match expected type `a0 -&gt; t0 a1'\n                  with actual type `[point0 -&gt; Direction point0]'\n    * Possible cause: `filter' is applied to too many arguments\n      In the second argument of `(.)', namely\n        `filter (== MyLeft) [p1, p2, p3]'\n      In the first argument of `(&gt;)', namely\n        `(length . filter (== MyLeft) [p1, p2, p3])'\n      In the expression: (length . filter (== MyLeft) [p1, p2, p3]) &gt; 2\n   |\n17 |   | (length . filter (== MyLeft) [p1, p2, p3]) &gt; 2 = MyLeft p3\n   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\njdoodle.hs:17:35: error:\n    * Couldn't match expected type `point0 -&gt; Direction point0'\n                  with actual type `Direction p'\n    * In the expression: p1\n      In the second argument of `filter', namely `[p1, p2, p3]'\n      In the second argument of `(.)', namely\n        `filter (== MyLeft) [p1, p2, p3]'\n    * Relevant bindings include\n        p3 :: Direction p (bound at jdoodle.hs:16:30)\n        p2 :: Direction p (bound at jdoodle.hs:16:27)\n        p1 :: Direction p (bound at jdoodle.hs:16:24)\n        getDirectionFromTriple :: Direction p\n                                  -&gt; Direction p -&gt; Direction p -&gt; Direction p\n          (bound at jdoodle.hs:16:1)\n   |\n17 |   | (length . filter (== MyLeft) [p1, p2, p3]) &gt; 2 = MyLeft p3\n   |                                   ^^\n\njdoodle.hs:17:39: error:\n    * Couldn't match expected type `point0 -&gt; Direction point0'\n                  with actual type `Direction p'\n    * In the expression: p2\n      In the second argument of `filter', namely `[p1, p2, p3]'\n      In the second argument of `(.)', namely\n        `filter (== MyLeft) [p1, p2, p3]'\n    * Relevant bindings include\n        p3 :: Direction p (bound at jdoodle.hs:16:30)\n        p2 :: Direction p (bound at jdoodle.hs:16:27)\n        p1 :: Direction p (bound at jdoodle.hs:16:24)\n        getDirectionFromTriple :: Direction p\n                                  -&gt; Direction p -&gt; Direction p -&gt; Direction p\n          (bound at jdoodle.hs:16:1)\n   |\n17 |   | (length . filter (== MyLeft) [p1, p2, p3]) &gt; 2 = MyLeft p3\n   |                                       ^^\n</code></pre>\n\n<p>I would appreciate either suggestions how to fix my code or suggestions for more succint solutions determining the dominant direction from a triple of points.</p>\n"}, {"tags": ["haskell", "monads"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1569936439, "post_id": 58185790, "comment_id": 102751308, "body": "It parses <code>(tell &quot;gcd &quot;) ++ sshow a ++ ...</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1569936486, "post_id": 58185790, "comment_id": 102751334, "body": "You should use brackets, like <code>tell (&quot;gcd &quot; ++ show a ++ ...)</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1569937094, "post_id": 58185790, "comment_id": 102751713, "body": "Anyone know of a canonical duplicate for the precedence of function application vs any other operator?"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1570007760, "post_id": 58185790, "comment_id": 102775277, "body": "Please, never edit questions to completely change the problem that&#39;s asked about. Either edit the new problem to the bottom of the original post (if it&#39;s just a small addition), or ask a new question (if it&#39;s a substantial new issue). In either case, of course first make sure you&#39;ve tried to solve the problem yourself."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 9289742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d0123d26ba33237ede523e75d847af?s=128&d=identicon&r=PG&f=1", "display_name": "Purple dragon unicorn", "link": "https://stackoverflow.com/users/9289742/purple-dragon-unicorn"}, "edited": false, "score": 0, "creation_date": 1569937685, "post_id": 58186077, "comment_id": 102752073, "body": "I have edited my original question to include the parentheses, but the error message still appears. I wrote this code as an exercise to test my understanding of the Writer monad, hence why I didn&#39;t use trace."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 55, "user_id": 9289742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d0123d26ba33237ede523e75d847af?s=128&d=identicon&r=PG&f=1", "display_name": "Purple dragon unicorn", "link": "https://stackoverflow.com/users/9289742/purple-dragon-unicorn"}, "edited": false, "score": 1, "creation_date": 1569937714, "post_id": 58186077, "comment_id": 102752095, "body": "@Purpledragonunicorn: I&#39;ve tested the proposed solution, and it seems to work. It compiles."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 55, "user_id": 9289742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d0123d26ba33237ede523e75d847af?s=128&d=identicon&r=PG&f=1", "display_name": "Purple dragon unicorn", "link": "https://stackoverflow.com/users/9289742/purple-dragon-unicorn"}, "edited": false, "score": 1, "creation_date": 1569937824, "post_id": 58186077, "comment_id": 102752172, "body": "@Purpledragonunicorn: included sample output when I compile the proposed solution. Perhaps there is a syntax error before/after that code fragment."}, {"owner": {"reputation": 55, "user_id": 9289742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d0123d26ba33237ede523e75d847af?s=128&d=identicon&r=PG&f=1", "display_name": "Purple dragon unicorn", "link": "https://stackoverflow.com/users/9289742/purple-dragon-unicorn"}, "edited": false, "score": 2, "creation_date": 1569937941, "post_id": 58186077, "comment_id": 102752258, "body": "Ah, I realise I forgot to change the type signature in my actual code, and that&#39;s why it didn&#39;t compile when I added the brackets (my type signature was still Writer [String] Int. Very silly mistake on my part, how embarrassing!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1569937786, "last_edit_date": 1569937786, "creation_date": 1569937225, "answer_id": 58186077, "question_id": 58185790, "link": "https://stackoverflow.com/questions/58185790/why-does-my-gcd-function-in-haskell-only-work-when-it-returns-type-writer-strin/58186077#58186077", "title": "Why does my gcd function in haskell only work when it returns type Writer [String] Int and not Writer String Int?", "body": "<p>Your first attempt does not work since function application takes precedence over operators. So it is parsed as:</p>\n\n<pre><code>(tell \"gcd \") ++ (show a) ++ \" \" ++ (show b) ++ \"\\n \"\n</code></pre>\n\n<p>In the second attempt, you wrap the strings each time in a singleton list, so then you write a list of <code>String</code>s (well all these lists contain one string, but that still does not make these <code>String</code>s).</p>\n\n<p>You can solve the problem by adding brackets here:</p>\n\n<pre><code>gcd' :: Int -&gt; Int -&gt; Writer String Int\ngcd' a b = do\n    tell <b>(</b>&quot;gcd &quot; ++ show a ++ &quot; &quot; ++ show b ++ &quot; \\n&quot;<b>)</b>\n    if b == 0 then\n        return a\n    else\n        gcd' b (a `mod` b)</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude Control.Monad.Trans.Writer.CPS&gt; runWriter (gcd' 15 5)\n(5,\"gcd 15 5 \\ngcd 5 0 \\n\")\n</code></pre>\n\n<p>Note that for debugging purposes, it more convenient for you to use <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Debug-Trace.html#v:trace\" rel=\"nofollow noreferrer\"><strong><code>trace :: String -&gt; a -&gt; a</code></strong></a> instead of a <code>Writer</code>, as it will more nicely do what you want.</p>\n"}], "owner": {"reputation": 55, "user_id": 9289742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d0123d26ba33237ede523e75d847af?s=128&d=identicon&r=PG&f=1", "display_name": "Purple dragon unicorn", "link": "https://stackoverflow.com/users/9289742/purple-dragon-unicorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 58186077, "answer_count": 1, "score": 2, "last_activity_date": 1570007584, "creation_date": 1569936357, "last_edit_date": 1570007584, "question_id": 58185790, "link": "https://stackoverflow.com/questions/58185790/why-does-my-gcd-function-in-haskell-only-work-when-it-returns-type-writer-strin", "title": "Why does my gcd function in haskell only work when it returns type Writer [String] Int and not Writer String Int?", "body": "<p>The following code does not work:</p>\n\n<pre><code>gcd' :: Int -&gt; Int -&gt; Writer String Int\ngcd' a b \n | b == 0 = do\n     tell \"gcd \" ++ show a ++ \" \" ++ show b ++ \" \\n\"\n     return a\n | otherwise = do\n     tell \"gcd \" ++ show a ++ \" \" ++ show b ++ \" \\n\"\n     gcd' b (a `mod` b)\n</code></pre>\n\n<p>When I changed the code to this, it now works:</p>\n\n<pre><code>gcd' :: Int -&gt; Int -&gt; Writer [String] Int\ngcd' a b \n | b == 0 = do\n     tell [\"gcd \" ++ show a ++ \" \" ++ show b ++ \" \\n\"]\n     return a\n | otherwise = do\n     tell [\"gcd \" ++ show a ++ \" \" ++ show b ++ \" \\n\"]\n     gcd' b (a `mod` b)\n</code></pre>\n\n<p>Although I'd now have to concatenate the list of strings.</p>\n\n<p>I don't understand why my original code doesn't work. Surely, my original code should concatenate the strings from each step to give an overall log. But instead, it gives me the following error message: </p>\n\n<pre><code>gcdLogger.hs:6:6: error:\n    \u2022 Couldn't match type \u2018[]\u2019\n                     with \u2018WriterT String Data.Functor.Identity.Identity\u2019\n      Expected type: WriterT String Data.Functor.Identity.Identity ()\n        Actual type: [()]\n    \u2022 In a stmt of a 'do' block:\n        tell \"gcd \" ++ show a ++ \" \" ++ show b ++ \" /n\"\n      In the expression:\n        do tell \"gcd \" ++ show a ++ \" \" ++ show b ++ \" /n\"\n           return a\n      In an equation for \u2018gcd'\u2019:\n          gcd' a b\n            | b == 0\n            = do tell \"gcd \" ++ show a ++ \" \" ++ show b ++ \" /n\"\n                 return a\n            | otherwise\n            = do tell \"gcd \" ++ show a ++ \" \" ++ show b ++ \" /n\"\n                 gcd' b (a `mod` b)\n</code></pre>\n"}, {"tags": ["html", "sqlite", "haskell", "yesod"], "comments": [{"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 0, "creation_date": 1569935500, "post_id": 58183866, "comment_id": 102750720, "body": "So what&#39;s your question?"}, {"owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "reply_to_user": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 0, "creation_date": 1569938721, "post_id": 58183866, "comment_id": 102752713, "body": "How to get <code>name</code> and <code>age</code> from <code>getInputR</code> into <code>sqliteInsertEntry</code> instead of printed on a page in a <code>Person</code>-widget."}], "answers": [{"comments": [{"owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "edited": false, "score": 0, "creation_date": 1569941451, "post_id": 58186894, "comment_id": 102754542, "body": "that little push helped me out tremendously! Marked as answer."}], "tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 0, "last_activity_date": 1569939759, "creation_date": 1569939759, "answer_id": 58186894, "question_id": 58183866, "link": "https://stackoverflow.com/questions/58183866/haskell-yesod-web-form-to-sqlite3/58186894#58186894", "title": "Haskell Yesod web-form to Sqlite3", "body": "<p>If you look at <a href=\"https://www.stackage.org/haddock/lts-14.7/yesod-core-1.6.16.1/Yesod-Core-Types.html#t:HandlerFor\" rel=\"nofollow noreferrer\">the definition of <code>Handler</code></a>, you'll see that it has an instance of <code>MonadIO</code>, so if you want to execute an <code>IO</code> action in it, you just need to <code>liftIO</code> it:</p>\n\n<pre><code>getInputR :: Handler Html\ngetInputR = do \n  person &lt;- runInputGet $ Person \n            &lt;$&gt;ireq textField \"name\"\n            &lt;*&gt;ireq intField \"age\" \n  liftIO $ sqliteInsertEntry (personName person) (personAge person)\n  defaultLayout [whamlet|&lt;p&gt;Saved!|]\n</code></pre>\n"}], "owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58186894, "answer_count": 1, "score": 1, "last_activity_date": 1569939759, "creation_date": 1569929235, "question_id": 58183866, "link": "https://stackoverflow.com/questions/58183866/haskell-yesod-web-form-to-sqlite3", "title": "Haskell Yesod web-form to Sqlite3", "body": "<p>Looking for a way to get the information gathered from the webform:</p>\n\n<pre><code>getInputR :: Handler Html\ngetInputR = do \n  person &lt;- runInputGet $ Person \n            &lt;$&gt;ireq textField \"name\"\n            &lt;*&gt;ireq intField \"age\" \n  defaultLayout [whamlet|&lt;p&gt;#{show person}|]\n</code></pre>\n\n<p>into Sqlite3:</p>\n\n<pre><code>sqliteInsertEntry :: String -&gt; Integer -&gt; IO () \nsqliteInsertEntry name age = do \n  conn &lt;- connectSqlite3 \"sqlite.db\"\n  run conn \"INSERT INTO persons (Person,Age) VALUES (?, ?) \"\n    [ toSql (\"Name\" :: String)\n    , toSql (35 :: Integer)\n    ]\n  commit conn\n  disconnect conn\n</code></pre>\n\n<p>but I can't seem to get away from <code>Handler Html</code> </p>\n\n<p>Full code: </p>\n\n<pre><code>{-# LANGUAGE EmptyDataDecls \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0        #-}\n{-# LANGUAGE FlexibleContexts\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0        #-}\n{-# LANGUAGE GADTs         \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0        #-}\n{-# LANGUAGE GeneralizedNewtypeDeriving\u00a0\u00a0\u00a0\u00a0#-}\n{-# LANGUAGE MultiParamTypeClasses\u00a0        #-}\n{-# LANGUAGE OverloadedStrings\u00a0\u00a0\u00a0\u00a0\u00a0        #-}\n{-# LANGUAGE QuasiQuotes\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0        #-}\n{-# LANGUAGE TemplateHaskell\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0        #-}\n{-# LANGUAGE TypeFamilies\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0        #-}\n\nmodule Main where\nimport Yesod \nimport Data.Text (Text) \nimport Control.Applicative \nimport Database.SQLite.Simple \nimport Database.HDBC.Sqlite3\nimport Database.HDBC\nimport System.IO\nimport Data.List\n\ndata App = App\n\nmkYesod \"App\" [parseRoutes|\n  /       HomeR   GET \n  /input  InputR  GET\n|]\n\ninstance Yesod App \n\ninstance RenderMessage App FormMessage where \n  renderMessage _ _ = defaultFormMessage \n\ndata Person = Person { \n    personName :: Text \n  , personAge  :: Int \n} deriving Show \n\ngetHomeR :: Handler Html \ngetHomeR = defaultLayout \n  [whamlet| \n    &lt;form action=@{InputR}&gt;\n      &lt;p&gt;My name is \n      &lt;input type=text name=name&gt;\n      and I am \n      &lt;input type=text name=age&gt;\n      &lt;input type=submit value=\"Introduce myself\"&gt; \n  |]\n\ngetInputR :: Handler Html\ngetInputR = do \n  person &lt;- runInputGet $ Person \n            &lt;$&gt;ireq textField \"name\"\n            &lt;*&gt;ireq intField \"age\" \n  defaultLayout [whamlet|&lt;p&gt;#{show person}|]\n\nsqliteInsertEntry :: String -&gt; Integer -&gt; IO () \nsqliteInsertEntry name age = do \n  conn &lt;- connectSqlite3 \"sqlite.db\"\n  run conn \"INSERT INTO persons (Person,Age) VALUES (?, ?) \"\n    [ toSql (\"Name\" :: String)\n    , toSql (35 :: Integer)\n    ]\n  commit conn\n  disconnect conn\n\nfromPerson whois = print $ whois \n\nrunWarp :: IO () \nrunWarp = warp 666 App \n\nmain :: IO ()\nmain = runWarp\n</code></pre>\n\n<p>Note: still learning, but would like to start using Haskell for real. </p>\n"}, {"tags": ["haskell", "integer", "primes"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1569921856, "post_id": 58181761, "comment_id": 102743480, "body": "What did you try to rotate the numbers?"}, {"owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569921955, "post_id": 58181761, "comment_id": 102743531, "body": "I don&#39;t know how to rotate the number in a way that convert a number like 1193 to  1931,9311,3119"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1569922093, "post_id": 58181761, "comment_id": 102743604, "body": "can you make a fair attempt to implement that and specify what is not working with that attempt? Hint: use <a href=\"https://stackoverflow.com/questions/3963269/split-a-number-into-its-digits-with-haskell\" title=\"split a number into its digits with haskell\">stackoverflow.com/questions/3963269/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "edited": false, "score": 0, "creation_date": 1570137770, "post_id": 58182315, "comment_id": 102829095, "body": "could you provide more simple approach because there is a lot here that I don&#39;t understand. If you could suggest a solution using the functions in the duplicated question I would really appreciate it"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 2, "last_activity_date": 1569923690, "creation_date": 1569923690, "answer_id": 58182315, "question_id": 58181761, "link": "https://stackoverflow.com/questions/58181761/circular-prime-numbers/58182315#58182315", "title": "Circular prime numbers", "body": "<p>You can improve the efficiency and elegance of your <code>isPrime</code> function easily by implementing it as:</p>\n\n<pre><code>isPrime ::  Integral i =&gt; i -&gt; Bool\nisPrime 1 = False\nisPrime n = all ((/=) 0 . mod n) (takeWhile (\\x -&gt; x*x &lt;= n) [2..])\n</code></pre>\n\n<p>In order to rotate numbers, we can make use of two helper functions here: one to convert a number to a list of digits, and one to convert a list of digits to a number, we do this in reverse, since that is more convenient to implement, but will not matter:</p>\n\n<pre><code>num2dig :: Integral i =&gt; i -&gt; [i]\nnum2dig n | n &lt; 10 = [n]\n          | otherwise = r : num2dig q\n    where (q, r) = quotRem n 10\n\n\ndig2num :: (Foldable t, Num a) =&gt; t a -&gt; a\ndig2num = foldr ((. (10 *)) . (+)) 0\n</code></pre>\n\n<p>Now we can make a simple function to generate, for a list of items, all rotations:</p>\n\n<pre><code>import Control.Applicative(liftA2)\nimport Data.List(inits, tails)\n\nrots :: [a] -&gt; [[a]]\nrots = drop 1 . liftA2 (zipWith (++)) tails inits\n</code></pre>\n\n<p>So we can use this to construct all rotated numbers:</p>\n\n<pre><code>rotnum :: Integral i =&gt; i -&gt; [i]\nrotnum = map dig2num . rots . num2dig\n</code></pre>\n\n<p>For example for <code>1425</code>, the rotated numbers are:</p>\n\n<pre><code>Prelude Control.Applicative Data.List&gt; rotnum 1425\n[5142,2514,4251,1425]\n</code></pre>\n\n<p>I leave using <code>isPrime</code> on these numbers as an exercise.</p>\n"}, {"tags": [], "owner": {"reputation": 665, "user_id": 10610632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3bb8dce0aefdec2cde25c0a79c32739?s=128&d=identicon&r=PG&f=1", "display_name": "RoyM", "link": "https://stackoverflow.com/users/10610632/roym"}, "is_accepted": false, "score": 0, "last_activity_date": 1570145131, "last_edit_date": 1570145131, "creation_date": 1570144712, "answer_id": 58228054, "question_id": 58181761, "link": "https://stackoverflow.com/questions/58181761/circular-prime-numbers/58228054#58228054", "title": "Circular prime numbers", "body": "<p>Referencing your question <a href=\"https://stackoverflow.com/questions/58226986/circular-prime-using-simple-haskell-functions\">here</a>, you can achieve what you want by adding a single new function:</p>\n\n<pre><code>check :: Integer -&gt; Bool\ncheck n = and [isPrime (stringToInt cs) | cs &lt;- circle (intToString n)]\n</code></pre>\n\n<p>This is to add an easier to understand solution from where you already were in your specific code, as I can see you were asking for that specifically. Usage:</p>\n\n<pre><code>*Main&gt; check 1931\nTrue\n\n*Main&gt; check 1019\nFalse\n</code></pre>\n\n<p>Mind you, I have made some type-changes. I assume you want each function to be type-specific, due to their names. Full code, taken from your example:</p>\n\n<pre><code>circle :: String -&gt; [String]\ncircle xs = take (length xs) (iterate (\\(y:ys) -&gt; ys ++ [y]) xs)\n\nstringToInt :: String -&gt; Integer\nstringToInt x = read (x) :: Integer\n\nintToString :: Integer -&gt; String\nintToString x = show x\n\nisPrime :: Integer -&gt; Bool\nisPrime 1 = False\nisPrime 2 = True\nisPrime n\n    | (length [x | x &lt;- [2 .. n-1], n `mod` x == 0]) &gt; 0 = False\n    | otherwise = True\n\ncheck :: Integer -&gt; Bool\ncheck n = and [isPrime (stringToInt cs) | cs &lt;- circle (intToString n)]\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570145131, "creation_date": 1569921787, "last_edit_date": 1569932035, "question_id": 58181761, "link": "https://stackoverflow.com/questions/58181761/circular-prime-numbers", "title": "Circular prime numbers", "body": "<p>I am trying to convert the following function which test the number if it's prime to another one that test if the integer is a circular prime.\neg. 1193 is a circular prime, since 1931, 9311 and 3119 all are also prime.\nSo i need to rotate the digits of the integer and test if the number is prime or not. any ideas? \nnote: I am new to Haskell Programming </p>\n\n<pre><code>isPrime ::  Integer -&gt; Bool\n\nisPrime 1 = False\nisPrime 2 = True\nisPrime n \n | (length [x | x &lt;- [2 .. n-1],  n  `mod` x == 0]) &gt; 0 = False\n | otherwise = True \n\n\nisCircPrime ::  Integer -&gt; Bool\n</code></pre>\n"}, {"tags": ["haskell", "random"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 4, "creation_date": 1569906834, "post_id": 58178148, "comment_id": 102737028, "body": "You can&#39;t sensibly make it <code>Int -&gt; Int</code>. The closest you can get and still behave sensibly is <code>Int -&gt; StdGen -&gt; (StdGen, Int)</code>; this type may be implemented using <code>randomR</code> rather than <code>randomRIO</code>."}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 3, "creation_date": 1569907372, "post_id": 58178148, "comment_id": 102737159, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/57836652/how-can-i-generate-different-random-values-in-haskell\">How can I generate different random values in Haskell?</a>"}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 1, "creation_date": 1569907394, "post_id": 58178148, "comment_id": 102737171, "body": "<code>rng x = fst $ randomR (0, x-1) $ makeStdGen $ length &quot;https:&#47;&#47;xkcd.com&#47;221&quot;</code> :P"}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1569947325, "post_id": 58178148, "comment_id": 102757586, "body": "You do not need to involve IO, but because of Haskell <i>referential transparency</i> you cannot have that  <code>Int -&gt; Int</code> type signature. <a href=\"https://stackoverflow.com/a/57890878/11282404\">See here for a more detailed explanation</a>."}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1569907930, "post_id": 58178442, "comment_id": 102737342, "body": "No reason to specify this down to <code>[Int]</code>. <code>randomElementFromList :: [a] -&gt; IO a</code>"}, {"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "edited": false, "score": 0, "creation_date": 1570151247, "post_id": 58178442, "comment_id": 102832087, "body": "And of course the pattern <code>do { x &lt;- m; return (f x) }</code> is equivalent to <code>fmap f m</code> / <code>f &lt;$&gt; m</code>, e.g.: <code>(list !!) &lt;$&gt; rng (length list)</code>. When I was learning Haskell, picking up these patterns helped me understand the functor/applicative/monad operators, as \u201cabbreviations\u201d of patterns in <code>do</code> notation (or, in another sense, just different kinds of application and composition)."}], "tags": [], "owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "is_accepted": false, "score": 2, "last_activity_date": 1569909198, "last_edit_date": 1569909198, "creation_date": 1569907076, "answer_id": 58178442, "question_id": 58178148, "link": "https://stackoverflow.com/questions/58178148/how-can-i-generate-random-numbers-in-haskell-without-io-in-a-range/58178442#58178442", "title": "How can I generate random numbers in Haskell without IO in a range?", "body": "<p>Haskell was not built to generate random numbers without using <code>IO</code>. </p>\n\n<p>Your example, <code>list !! rng (length list)</code>, doesn't work because <code>rng</code> returns <code>IO Int</code> and <code>!!</code> expects a <code>Int</code>. </p>\n\n<p>Here is a function that uses your <code>rng</code> function to get a random element from a list:</p>\n\n<pre><code>-- Will crash on empty list\nrandomElementFromList :: [a] -&gt; IO a\nrandomElementFromList list = do\n  r &lt;- rng (length list)\n  return $ list !! r\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": true, "score": 6, "last_activity_date": 1569925382, "last_edit_date": 1569925382, "creation_date": 1569924626, "answer_id": 58182586, "question_id": 58178148, "link": "https://stackoverflow.com/questions/58178148/how-can-i-generate-random-numbers-in-haskell-without-io-in-a-range/58182586#58182586", "title": "How can I generate random numbers in Haskell without IO in a range?", "body": "<p>I the spirit of <a href=\"https://xkcd.com/221/\" rel=\"noreferrer\">https://xkcd.com/221/</a>, here's a \u201csolution\u201d without any IO:</p>\n\n<pre><code>rng :: Int -&gt; Int\nrng upper\n | upper&lt;=4   = upper\n | otherwise  = 4\n</code></pre>\n\n<p>So that gives you an \u201cRFC 1149.5 compliant random number\u201d. It's always four, unless that is outside the range.</p>\n\n<p>What's the problem with this? Well, clearly it gives always <em>the same number</em> \u2013 and so <em>it must be</em>, because all Haskell functions must be <a href=\"https://en.wikipedia.org/wiki/Function_(mathematics)\" rel=\"noreferrer\">functions</a>, i.e. <a href=\"https://en.wikipedia.org/wiki/Referential_transparency\" rel=\"noreferrer\">referentially transparent</a>. OTOH, a random number <em>generator</em> is supposed to give <em>different</em> number each time you call it... it is thus <em>not</em> a function, and most other programming languages merely pretend it is a function <em>with side-effect</em> \u2013 because they have no proper means to express what side-effects are. Well, Haskell does have a proper means of expressing that, and it is the IO monad: you can have computations that depend on a side effect, but clearly these computations if you run them will then have that side-effect themselves.<br>In that light, the signature <code>Int -&gt; IO Int</code> does make sense for the function. (This <em>is</em> a function, but the result is an <em>IO action</em> and only <em>executing</em> that action gives you an <code>Int</code>.)</p>\n\n<p>What's ugly about that is that <code>IO Int</code> could literally do <em>anything</em> in <code>IO</code> \u2013 it could, for instance, <a href=\"http://hackage.haskell.org/package/acme-missiles-0.3/docs/Acme-Missiles.html\" rel=\"noreferrer\">launch some missiles</a> and give you back the number of casualities. More realistically, it could easily modify some file in you home directory. Whereas what you want is actually just a teeny tiny harmless side-effect, just enough to produce a new random number the next time. Usually, random number generators are anyways not really random but <a href=\"https://en.wikipedia.org/wiki/Pseudorandom_number_generator\" rel=\"noreferrer\">PRNGs</a>, which keep a constant-size <em>state variable</em> that is updated in a random-looking way each time you pull a value. The next time, this state will be different and thus you get a different value, as desired. This state variable <em>could</em> be held in an <code>IO</code>-mutable location</p>\n\n<pre><code>import Data.IORef\n\ntype RandStV = Int\ntype RandSt = IORef RandStV\n\nrng' :: RandSt -&gt; Int -&gt; IO Int\nrng' rSt upper = do\n   x &lt;- readIORef rSt\n   let x' = ((x * 1103515245) + 12345) `mod` 0x7fffffff -- https://sourceware.org/git/?p=glibc.git;a=blob;f=stdlib/random_r.c;hb=glibc-2.26#l362\n   writeIORef rSt x'\n   return $ x `mod` upper\n</code></pre>\n\n<p>...or, you could just explicitly pass the updated state along with the result</p>\n\n<pre><code>rng'' :: Int -&gt; RandStV -&gt; (RandStV, Int)\nrng'' upper x =\n   let x' = ((x * 1103515245) + 12345) `mod` 0x7fffffff\n   in (x', x `mod` upper)\n</code></pre>\n\n<p>...or it could be passed around in a dedicated <a href=\"https://hackage.haskell.org/package/transformers-0.5.6.2/docs/Control-Monad-Trans-State-Lazy.html#t:State\" rel=\"noreferrer\">state monad</a>, which is just another way of writing the passing-on of an updated variable:</p>\n\n<pre><code>type RandStM = State RandStV\n\nrng''' :: Int -&gt; RandStM Int\nrng''' upper = do\n   x &lt;- get\n   let x' = ((x * 1103515245) + 12345) `mod` 0x7fffffff\n   put x'\n   return $ x `mod` upper\n</code></pre>\n\n<p>See <a href=\"http://hackage.haskell.org/package/random-fu\" rel=\"noreferrer\">the random-fu package</a> for useful helpers on such a <em>random monad</em>.</p>\n\n<p>One mathematical way to interpret <code>rng'''</code> is to say it is a function that takes an upper bound as the argument and gives you back a <a href=\"https://en.wikipedia.org/wiki/Distribution_(mathematics)\" rel=\"noreferrer\">distribution</a> of numbers. The distribution is always the same, but it \u201ccontains\u201d many numbers together with the probability of them occuring. Actually <em>generating</em> an integer means you're <em>sampling</em> from the distribution.</p>\n"}], "owner": {"reputation": 500, "user_id": 11303290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5926bac6c5617d83b1af462ded299752?s=128&d=identicon&r=PG&f=1", "display_name": "llamaro25", "link": "https://stackoverflow.com/users/11303290/llamaro25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "accepted_answer_id": 58182586, "answer_count": 2, "score": -2, "last_activity_date": 1569925382, "creation_date": 1569904922, "last_edit_date": 1569908214, "question_id": 58178148, "link": "https://stackoverflow.com/questions/58178148/how-can-i-generate-random-numbers-in-haskell-without-io-in-a-range", "title": "How can I generate random numbers in Haskell without IO in a range?", "body": "<p>I would like to generate random numbers in a range and the type signature to be <code>Int -&gt; Int</code>. I've read multiple other posts but none of them suggested ways to return a type <code>Int</code>. I used <code>System.IO.Unsafe</code> in my code but it is not recommended to do so. Here's my code:</p>\n\n<pre><code>import System.IO.Unsafe\n\n-- random number generator\nrng :: Int -&gt; Int\nrng upper = unsafePerformIO $ randomRIO (0,upper-1) \n</code></pre>\n\n<p>Does anyone have any suggests on how to generate random Int in a range in Haskell?</p>\n\n<p>Edit: It might be impossible to change <code>IO Int -&gt; Int</code> so I converted my code to</p>\n\n<pre><code>-- random number generator\nrng :: Int -&gt; IO Int\nrng upper = randomRIO (0,upper-1) \n</code></pre>\n\n<p>The reason why I need a rng is because I want to get random numbers within the range length of the list to get an index for an element of a list. </p>\n\n<p><code>list !! rng (length list)</code> but I'm getting the error <code>Couldn't match expected type \u2018Int\u2019 with actual type \u2018IO Int\u2019</code> which is expected. </p>\n\n<p>It's not a duplicate because 1. I want values in a range, 2. my rng does not return the same values. I'm new to Haskell and I don't know how to manipulate Monads. Any help is appreciated.</p>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 3991, "user_id": 6378530, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5325e39f6f9f2d12029b11d4f8e56a69?s=128&d=identicon&r=PG&f=1", "display_name": "doctopus", "link": "https://stackoverflow.com/users/6378530/doctopus"}, "edited": false, "score": 0, "creation_date": 1569905616, "post_id": 58178198, "comment_id": 102736760, "body": "THat seems to get it to compile, but also break the functionality of the original code...Is there any way I could get it to run without flip?"}, {"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "reply_to_user": {"reputation": 3991, "user_id": 6378530, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5325e39f6f9f2d12029b11d4f8e56a69?s=128&d=identicon&r=PG&f=1", "display_name": "doctopus", "link": "https://stackoverflow.com/users/6378530/doctopus"}, "edited": false, "score": 0, "creation_date": 1569905721, "post_id": 58178198, "comment_id": 102736781, "body": "I don&#39;t know what the original code is supposed to do. You could replace <code>foldl</code> with <code>foldr</code>, and that should also work."}, {"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "reply_to_user": {"reputation": 3991, "user_id": 6378530, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5325e39f6f9f2d12029b11d4f8e56a69?s=128&d=identicon&r=PG&f=1", "display_name": "doctopus", "link": "https://stackoverflow.com/users/6378530/doctopus"}, "edited": false, "score": 1, "creation_date": 1569905805, "post_id": 58178198, "comment_id": 102736796, "body": "It&#39;s not a syntax problem; it&#39;s a problem of using the wrong method."}], "tags": [], "owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "is_accepted": false, "score": 4, "last_activity_date": 1569905394, "creation_date": 1569905394, "answer_id": 58178198, "question_id": 58178098, "link": "https://stackoverflow.com/questions/58178098/why-wont-this-case-of-syntax-compile-properly/58178198#58178198", "title": "Why won&#39;t this case of syntax compile properly?", "body": "<p>The types of <code>foldr</code> and <code>foldl</code> are slightly different:</p>\n\n<p><code>foldr :: Foldable t =&gt; (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b</code></p>\n\n<p><code>foldl :: Foldable t =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b</code></p>\n\n<p>But you are passing the same function <code>f</code> to both. </p>\n\n<p>If you replace the argument <code>f</code> with <code>flip f</code> the types work out:</p>\n\n<pre><code>splitHeader :: Alignment -&gt; String -&gt; [(String,Int)]\nsplitHeader a h = case a of\n            AlignLeft -&gt;  reverse ((foldr f b h) (\"\", 0) [] 2)\n            AlignRight -&gt; reverse ((foldl (flip f) b h) (\"\", 0) [] 2) \n    where b (n', w') l' m' = (reverse n', w'):l'\n          f c b (n, w) l m \n              | m == 2 &amp;&amp; c == ' ' = b (n, w+1)   l 0\n              | m == 2 &amp;&amp; c /= ' ' = b (c:n, w+1) l 1\n              | m == 1 &amp;&amp; c == ' ' = b (n, w+1)   l 0\n              | m == 1 &amp;&amp; c /= ' ' = b (c:n, w+1) l 1\n              | m == 0 &amp;&amp; c == ' ' = b (n, w+1)   l 0\n              | m == 0 &amp;&amp; c /= ' ' = b ([c], 1)   ((reverse n, w):l) 1\n</code></pre>\n"}], "owner": {"reputation": 3991, "user_id": 6378530, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5325e39f6f9f2d12029b11d4f8e56a69?s=128&d=identicon&r=PG&f=1", "display_name": "doctopus", "link": "https://stackoverflow.com/users/6378530/doctopus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569905394, "creation_date": 1569904499, "question_id": 58178098, "link": "https://stackoverflow.com/questions/58178098/why-wont-this-case-of-syntax-compile-properly", "title": "Why won&#39;t this case of syntax compile properly?", "body": "<p>Very new to Haskell here. I'm not sure why this piece of case of syntax won't compile properly:</p>\n\n<pre><code>-- | Use column headers to determine offsets for each row in a table\nsplitHeader :: Alignment -&gt; String -&gt; [(String,Int)]\nsplitHeader a h = case a of\n            AlignLeft -&gt; reverse ((foldr f b h) (\"\", 0) [] 2)\n            AlignRight -&gt; reverse ((foldl f b h) (\"\", 0) [] 2) \n    where b (n', w') l' m' = (reverse n', w'):l'\n          f c b (n, w) l m \n              | m == 2 &amp;&amp; c == ' ' = b (n, w+1)   l 0\n              | m == 2 &amp;&amp; c /= ' ' = b (c:n, w+1) l 1\n              | m == 1 &amp;&amp; c == ' ' = b (n, w+1)   l 0\n              | m == 1 &amp;&amp; c /= ' ' = b (c:n, w+1) l 1\n              | m == 0 &amp;&amp; c == ' ' = b (n, w+1)   l 0\n              | m == 0 &amp;&amp; c /= ' ' = b ([c], 1)   ((reverse n, w):l) 1\n</code></pre>\n\n<p>Compile error:</p>\n\n<pre><code>Kata.hs:50:43: warning: [-Wdeferred-type-errors]\n    \u2022 Couldn't match type \u2018([Char], Int)\n                           -&gt; [([Char], Int)] -&gt; Integer -&gt; [([Char], Int)]\u2019\n                     with \u2018Char\u2019\n      Expected type: (([Char], Int)\n                      -&gt; [([Char], Int)] -&gt; Integer -&gt; [([Char], Int)])\n                     -&gt; (([Char], Int) -&gt; [([Char], Int)] -&gt; Integer -&gt; [([Char], Int)])\n                     -&gt; ([Char], Int)\n                     -&gt; [([Char], Int)]\n                     -&gt; Integer\n                     -&gt; [([Char], Int)]\n        Actual type: Char\n                     -&gt; (([Char], Int) -&gt; [([Char], Int)] -&gt; Integer -&gt; [([Char], Int)])\n                     -&gt; ([Char], Int)\n                     -&gt; [([Char], Int)]\n                     -&gt; Integer\n                     -&gt; [([Char], Int)]\n    \u2022 In the first argument of \u2018foldl\u2019, namely \u2018f\u2019\n      In the first argument of \u2018reverse\u2019, namely\n        \u2018((foldl f b h) (\"\", 0) [] 2)\u2019\n      In the expression: reverse ((foldl f b h) (\"\", 0) [] 2)\n   |\n50 |             AlignRight -&gt; reverse ((foldl f b h) (\"\", 0) [] 2)\n   |                                           ^\n\nKata.hs:50:47: warning: [-Wdeferred-type-errors]\n    \u2022 Couldn't match type \u2018Char\u2019\n                     with \u2018([Char], Int)\n                           -&gt; [([Char], Int)] -&gt; Integer -&gt; [([Char], Int)]\u2019\n      Expected type: [([Char], Int)\n                      -&gt; [([Char], Int)] -&gt; Integer -&gt; [([Char], Int)]]\n        Actual type: String\n    \u2022 In the third argument of \u2018foldl\u2019, namely \u2018h\u2019\n      In the first argument of \u2018reverse\u2019, namely\n        \u2018((foldl f b h) (\"\", 0) [] 2)\u2019\n      In the expression: reverse ((foldl f b h) (\"\", 0) [] 2)\n   |\n50 |             AlignRight -&gt; reverse ((foldl f b h) (\"\", 0) [] 2)\n   |                                               ^\nOk, one module loaded.\n</code></pre>\n"}, {"tags": ["haskell", "graph"], "comments": [{"owner": {"reputation": 767, "user_id": 814796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQemO.jpg?s=128&g=1", "display_name": "madgen", "link": "https://stackoverflow.com/users/814796/madgen"}, "edited": false, "score": 0, "creation_date": 1569885411, "post_id": 58176265, "comment_id": 102733259, "body": "The code is not very readable at the moment. Maybe if you pull the functions you use as arguments to the folds out and annotate, we might be able to help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12139655"}, "reply_to_user": {"reputation": 767, "user_id": 814796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZQemO.jpg?s=128&g=1", "display_name": "madgen", "link": "https://stackoverflow.com/users/814796/madgen"}, "edited": false, "score": 0, "creation_date": 1569885693, "post_id": 58176265, "comment_id": 102733313, "body": "I edit my code by another way, but it didn`t work properly("}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1569899225, "post_id": 58176265, "comment_id": 102735581, "body": "If the intent is to represent a graph as a list of edges between nodes represented by integers, then <code>[(Int, Int)]</code> would be a much better type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12139655"}, "edited": false, "score": 0, "creation_date": 1569936493, "post_id": 58176265, "comment_id": 102751340, "body": "The task is to use adjancy matrix"}], "owner": {"user_type": "does_not_exist", "display_name": "user12139655"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1569885665, "creation_date": 1569884679, "last_edit_date": 1569885665, "question_id": 58176265, "link": "https://stackoverflow.com/questions/58176265/graph-predicate-in-haskell", "title": "Graph predicate in Haskell", "body": "<p>I need to determine if the list is a directed graph</p>\n\n<p>I wrote such code:</p>\n\n<pre><code>type Graph = [[Int]]\n\nisGraph :: Graph -&gt; Bool\nisGraph :: Graph -&gt; Bool\nisGraph graph =isGraphFor graph 1 where\n    isGraphFor gr cur \n        |cur &gt; length gr = True\n        |otherwise = (foldl (&amp;&amp;) True (map (isInList) (getAccessibleEdges gr cur))) &amp;&amp; (isGraphFor gr (cur+1)) where\n            isInList edge = cur `elem` (getAccessibleEdges gr edge)\n\ngetAccessibleEdges :: Graph -&gt; Int -&gt; [Int]\ngetAccessibleEdges gr edge = dfsEdges gr [] (gr!!(edge-1))\n\ndfs :: Graph -&gt; [Int] -&gt; Int -&gt; [Int]\ndfs gr st cur = cur: (dfsEdges gr (cur:st) (gr !! (cur-1)))\n\ndfsEdges :: Graph -&gt; [Int] -&gt; [Int] -&gt; [Int]\ndfsEdges _ _ [] = []\ndfsEdges gr st (x:xs) = \n    if not (x `elem` st) then \n       let new = dfs gr st x\n       in  new ++ (dfsEdges gr (new++st) xs) \n    else \n       dfsEdges gr st xs\n</code></pre>\n\n<p>But when I give such input [[1,2,3],[1,2,3],[1,2,3],[1,2,3],[0,1,2,3]] the answer is false.\nPlease, help me to solve my problem</p>\n"}, {"tags": ["haskell", "recursive-datastructures", "recursion-schemes"], "comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 3, "creation_date": 1569882362, "post_id": 58175656, "comment_id": 102732636, "body": "I&#39;m not sure I&#39;ve followed your code correctly, but <code>descend</code> looks like a paramorphism to me. You want to look at the to-be-folded node first, to see if it should be replaced, and if not then you look at the already-recursively-folded result that a catamorphism would give you. Does the signature of <a href=\"http://hackage.haskell.org/package/recursion-schemes-5.1.3/docs/Data-Functor-Foldable.html#v:para\" rel=\"nofollow noreferrer\">para</a>, specialized to your types, look promising?"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1569884164, "post_id": 58175656, "comment_id": 102733002, "body": "@amalloy <code>para</code> is <code>(Base t (t, a) -&gt; a) -&gt; t -&gt; a</code>. To me, this looks close but not quite perfect. Wouldn&#39;t I actually want <code>((t, Base t a) -&gt; a) -&gt; t -&gt; a</code> or <code>((t, Base t (t, a)) -&gt; a) -&gt; t -&gt; a</code> so that I can look at the element I&#39;m on?"}], "answers": [{"comments": [{"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 1, "creation_date": 1569898289, "post_id": 58176575, "comment_id": 102735423, "body": "Perhaps it would be more enlightening to implement <code>para&#39;</code> in terms of <code>para</code>, using <code>fmap fst</code> and <code>fmap snd</code>?"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 1, "creation_date": 1569938596, "post_id": 58176575, "comment_id": 102752641, "body": "@HTNW Is that even possible without adding a <code>Corecursive</code> constraint? Without that, it looks like you can get a <code>Base t t</code> but not the <code>t</code> you need."}], "tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": false, "score": 3, "last_activity_date": 1569888177, "creation_date": 1569888177, "answer_id": 58176575, "question_id": 58175656, "link": "https://stackoverflow.com/questions/58175656/how-can-i-walk-this-type-with-a-recursion-scheme-instead-of-explicit-recursion/58176575#58176575", "title": "How can I walk this type with a recursion scheme instead of explicit recursion?", "body": "<p>Following up from the discussion under your question</p>\n\n<blockquote>\n  <p><code>para</code> is <code>(Base t (t, a) -&gt; a) -&gt; t -&gt; a</code>. To me, this looks close but not quite perfect. Wouldn't I actually want <code>((t, Base t a) -&gt; a) -&gt; t -&gt; a</code> or <code>((t, Base t (t, a)) -&gt; a) -&gt; t -&gt; a</code> so that I can look at the element I'm on? </p>\n</blockquote>\n\n<p>That's still a paramorphism. The type of <code>para</code> looks weird but it is the more precise one. A pair <code>(t, Base t a)</code> does not encode the invariant that both components are always going to have the \"same\" constructor.</p>\n\n<p>What you propose still seems like the most natural way of defining <code>makeReplacements</code>, it's just not defined in the recursion-schemes library.</p>\n\n<pre><code>para' :: Recursive t =&gt; (t -&gt; Base t a -&gt; a) -&gt; t -&gt; a\npara' alg = go where\n  go x = alg x (fmap go (project x))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 1, "creation_date": 1569963952, "post_id": 58177042, "comment_id": 102763795, "body": "<code>apo</code> looks more apropos to me. In one sense my suggestion of <code>para</code>, the dual of <code>apo</code>, was very close; in another I was the wrongest it is possible to be!"}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1569937200, "last_edit_date": 1569937200, "creation_date": 1569893305, "answer_id": 58177042, "question_id": 58175656, "link": "https://stackoverflow.com/questions/58175656/how-can-i-walk-this-type-with-a-recursion-scheme-instead-of-explicit-recursion/58177042#58177042", "title": "How can I walk this type with a recursion scheme instead of explicit recursion?", "body": "<p>I found a solution that I'm reasonably happy with: an apomorphism.</p>\n\n<pre><code>makeReplacements replacements = apo coalg\n  where\n    coalg :: MyStructure -&gt; MyStructureF (Either MyStructure MyStructure)\n    coalg structure = case lookup structure replacements of\n      Just replacement -&gt; Left &lt;$&gt; project replacement\n      Nothing -&gt; Right &lt;$&gt; project structure\n</code></pre>\n\n<p>Having thought about this a little more, I also saw a symmetry in this that leads to an equivalent paramorphism:</p>\n\n<pre><code>makeReplacements replacements = para alg\n  where\n    alg :: MyStructureF (MyStructure, MyStructure) -&gt; MyStructure\n    alg structure = case lookup (embed $ fst &lt;$&gt; structure) replacements of\n      Just replacement -&gt; replacement\n      Nothing -&gt; embed $ snd &lt;$&gt; structure\n</code></pre>\n"}], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 58177042, "answer_count": 2, "score": 6, "last_activity_date": 1569937200, "creation_date": 1569879936, "question_id": 58175656, "link": "https://stackoverflow.com/questions/58175656/how-can-i-walk-this-type-with-a-recursion-scheme-instead-of-explicit-recursion", "title": "How can I walk this type with a recursion scheme instead of explicit recursion?", "body": "<p>Consider this code:</p>\n\n<pre><code>import Data.Maybe (fromMaybe)\n\ndata MyStructure = Foo Int | Bar String MyStructure | Baz MyStructure MyStructure | Qux Bool Bool MyStructure MyStructure deriving(Eq,Show)\n\nmakeReplacements :: [(MyStructure, MyStructure)] -&gt; MyStructure -&gt; MyStructure\nmakeReplacements replacements structure = fromMaybe (descend structure) (lookup structure replacements)\n  where\n    descend :: MyStructure -&gt; MyStructure\n    descend (Foo x) = Foo x\n    descend (Bar x y) = Bar x (makeReplacements replacements y)\n    descend (Baz x y) = Baz (makeReplacements replacements x) (makeReplacements replacements y)\n    descend (Qux x y z w) = Qux x y (makeReplacements replacements z) (makeReplacements replacements w)\n</code></pre>\n\n<p>It defines a recursive data type, and a function that performs a search-and-replace by walking it. However, I'm using explicit recursion and would like to use a recursion scheme instead.</p>\n\n<p>First, I threw in <code>makeBaseFunctor ''MyStructure</code>. For clarity, I expanded the resulting Template Haskell and the derived Functor instance below. I was then able to rewrite <code>descend</code>:</p>\n\n<pre><code>{-# LANGUAGE DeriveTraversable, TypeFamilies #-}\n\nimport Data.Maybe (fromMaybe)\nimport Data.Functor.Foldable (Base, Recursive(..), Corecursive(..))\n\ndata MyStructure = Foo Int | Bar String MyStructure | Baz MyStructure MyStructure | Qux Bool Bool MyStructure MyStructure deriving(Eq,Show)\n\nmakeReplacements :: [(MyStructure, MyStructure)] -&gt; MyStructure -&gt; MyStructure\nmakeReplacements replacements structure = fromMaybe (descend structure) (lookup structure replacements)\n  where\n    descend :: MyStructure -&gt; MyStructure\n    descend = embed . fmap (makeReplacements replacements) . project\n\n-- begin code that would normally be auto-generated\ndata MyStructureF r = FooF Int | BarF String r | BazF r r | QuxF Bool Bool r r deriving(Foldable,Traversable)\n\ninstance Functor MyStructureF where\n  fmap _ (FooF x) = FooF x\n  fmap f (BarF x y) = BarF x (f y)\n  fmap f (BazF x y) = BazF (f x) (f y)\n  fmap f (QuxF x y z w) = QuxF x y (f z) (f w)\n\ntype instance Base MyStructure = MyStructureF\n\ninstance Recursive MyStructure where\n  project (Foo x) = FooF x\n  project (Bar x y) = BarF x y\n  project (Baz x y) = BazF x y\n  project (Qux x y z w) = QuxF x y z w\n\ninstance Corecursive MyStructure where\n  embed (FooF x) = Foo x\n  embed (BarF x y) = Bar x y\n  embed (BazF x y) = Baz x y\n  embed (QuxF x y z w) = Qux x y z w\n-- end code that would normally be auto-generated\n</code></pre>\n\n<p>If I were to stop here, I'd already have a win: I no longer have to write out all of the cases in <code>descend</code>, and I can't accidentally make a mistake like <code>descend (Baz x y) = Baz x (makeReplacements replacements y)</code> (forgetting to replace inside <code>x</code>). However, there's still explicit recursion here, since I'm still using <code>makeReplacements</code> from inside its own definition. How can I rewrite this to remove that, so that I'm doing all of my recursion inside of the recursion schemes?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1569870776, "post_id": 58173811, "comment_id": 102728634, "body": "Your  <code>solve</code>  function looks correct to me (although it would be more concise and easier to read if you used pattern matching on the 4-tuple <code>acc</code>). Can you explain what&#39;s not working about it? Is there a particular test case it fails on?"}, {"owner": {"reputation": 301, "user_id": 2773933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-wD8zUbBMBVI/AAAAAAAAAAI/AAAAAAAAIGs/njtrAvsaRVk/photo.jpg?sz=128", "display_name": "presci", "link": "https://stackoverflow.com/users/2773933/presci"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1569871177, "post_id": 58173811, "comment_id": 102728786, "body": "I want to display last and second last values of tuple. for example 4 &amp; 2. Currently I am able to show just the highest value using show"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1569873003, "post_id": 58173811, "comment_id": 102729551, "body": "Can you please give a clear description of what the inputs and outputs should be. I confess I missed your definition of <code>main</code> and just treated your <code>solve</code> examples as showing what should happen. Please show us what the inputs to <code>main</code> should be and what the corresponding output would be."}, {"owner": {"reputation": 301, "user_id": 2773933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-wD8zUbBMBVI/AAAAAAAAAAI/AAAAAAAAIGs/njtrAvsaRVk/photo.jpg?sz=128", "display_name": "presci", "link": "https://stackoverflow.com/users/2773933/presci"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1569873622, "post_id": 58173811, "comment_id": 102729829, "body": "Updated the Question at the bottom of the question I have provided the Input and Output."}], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 2773933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-wD8zUbBMBVI/AAAAAAAAAAI/AAAAAAAAIGs/njtrAvsaRVk/photo.jpg?sz=128", "display_name": "presci", "link": "https://stackoverflow.com/users/2773933/presci"}, "is_accepted": false, "score": 0, "last_activity_date": 1569874009, "creation_date": 1569874009, "answer_id": 58174634, "question_id": 58173811, "link": "https://stackoverflow.com/questions/58173811/how-to-use-show-function-with-2-values/58174634#58174634", "title": "How to use show function with 2 values", "body": "<p>I found the solution to the question. I created 1 more function that would override the show</p>\n\n<pre><code>mxscore::(a,a,a,a) -&gt; a\nmxscore (_,a,_,_) = a\nmnscore::(a,a,a,a) -&gt; a\nmnscore (a,_,_,_) = a\nlscore :: (a, a,a,a) -&gt; a\nlscore (_,_,a,_) = a\nhscore :: (a, a,a,a) -&gt; a\nhscore (_,_,_,a) = a\n\n\nmain = interact $ show1  .solve . map read . tail . words \n\nshow1::(Int, Int, Int, Int) -&gt; String\nshow1 (_,_,a,b) = show b ++ \" \" ++ show a\n\n\nsolve::[Int] -&gt; (Int, Int, Int, Int)\nsolve (x:xs) =  solve1 x xs\n    where solve1 d dx = foldl(\\acc x -&gt; if x &gt; mxscore acc \n                        then (mnscore acc, x, lscore acc, hscore acc + 1) \n                        else if x &lt; mnscore acc then (x, mxscore acc, lscore acc  + 1, hscore acc) else acc ) (d,d,0,0) dx \n</code></pre>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 301, "user_id": 2773933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-wD8zUbBMBVI/AAAAAAAAAAI/AAAAAAAAIGs/njtrAvsaRVk/photo.jpg?sz=128", "display_name": "presci", "link": "https://stackoverflow.com/users/2773933/presci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1569874009, "creation_date": 1569870126, "last_edit_date": 1569873589, "question_id": 58173811, "link": "https://stackoverflow.com/questions/58173811/how-to-use-show-function-with-2-values", "title": "How to use show function with 2 values", "body": "<p>I am trying to solve the problem on HackerRank <a href=\"https://www.hackerrank.com/challenges/breaking-best-and-worst-records/problem\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/breaking-best-and-worst-records/problem</a></p>\n\n<p>What the question ask is to display 2 values no of times the record is broken for min score and highest score</p>\n\n<p>I have wrote the algorithm to find it. I am stuck with how to output 2 values.</p>\n\n<p>Following is my solution. Currently it display's the number of highest record broken. I want to show 2 values so that it passes the test in hackerrank.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>mxscore::(a,a,a,a) -&gt; a\nmxscore (_,a,_,_) = a\nmnscore::(a,a,a,a) -&gt; a\nmnscore (a,_,_,_) = a\nlscore :: (a, a,a,a) -&gt; a\nlscore (_,_,a,_) = a\nhscore :: (a, a,a,a) -&gt; a\nhscore (_,_,_,a) = a\n\n\nmain = interact $ show . hscore .solve . map read . tail . words \n\n\nsolve::[Int] -&gt; (Int, Int, Int, Int)\nsolve (x:xs) =  solve1 x xs\n    where solve1 d dx = foldl(\\acc x -&gt; if x &gt; mxscore acc \n                        then (mnscore acc, x, lscore acc, hscore acc + 1) \n                        else if x &lt; mnscore acc then (x, mxscore acc, lscore acc  + 1, hscore acc) else acc ) (d,d,0,0) dx \n\n</code></pre>\n\n<p>Current solution works as follows</p>\n\n<pre><code>*Main&gt; solve [10, 5, 20, 20, 4, 5, 2, 25, 1]\n\n(1,25,4,2)\n</code></pre>\n\n<p>where 4 is number of time lowest record is broken\nand 2 is number of time highest record is broken</p>\n\n<pre><code>*Main&gt; solve [3, 4, 21, 36, 10, 28, 35, 5, 24, 42]\n\n(3,42,0,4)\n</code></pre>\n\n<p>where 0 is number of time lowest record is broken\nand 4 is number of times highest record is broken</p>\n\n<p>The first number is no. of scores \nThe second line is Score</p>\n\n<p>Input:</p>\n\n<p>9</p>\n\n<p>10 5 20 20 4 5 2 25 1</p>\n\n<p>Output :</p>\n\n<p>2 4</p>\n\n<p>Ans. explanation 2 is the number of time the records were broken for highest score\n4 is the number of time the records were broken of lowest score</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "edited": false, "score": 0, "creation_date": 1569894163, "post_id": 58173642, "comment_id": 102734716, "body": "I presume <code>returnValue</code> in <code>returnValueList</code> ought to read <code>returnValueList</code>, and <code>returnreturnValueList matrix</code> should be <code>returnValueList m matrix</code>"}], "answers": [{"tags": [], "owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "is_accepted": false, "score": 0, "last_activity_date": 1570010214, "last_edit_date": 1570010214, "creation_date": 1569894469, "answer_id": 58177147, "question_id": 58173642, "link": "https://stackoverflow.com/questions/58173642/how-to-change-a-value-in-a-certain-postion-of-the-matrixand-return-the-whole-ma/58177147#58177147", "title": "How to change a value in a certain postion of the matrix(and return the whole matrix changed)?", "body": "<p>You can build <code>changeValueMatrix</code> from the functions you\u2019ve already defined:</p>\n\n<pre><code>changeValueMatrix :: MatrixPosition -&gt; a -&gt; Matrix a -&gt; Matrix a\nchangeValueMatrix (r, c) value matrix\n  = changeValueList r              -- (3)\n    (changeValueList c value       -- (2)\n      (returnValueList r matrix))  -- (1)\n    matrix\n</code></pre>\n\n<p>At (1) you look up the row at index <code>r</code> in <code>matrix</code>, at (2) you replace the element at column <code>c</code> in that row with <code>value</code>, and at (3) you replace the row at index <code>r</code> in <code>matrix</code> with the modified row. For example:</p>\n\n<pre><code>-- Given: mat = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n\nchangeValueMatrix (1, 1) 0 mat\n==\nchangeValueList 1\n  (changeValueList 1 0\n    (returnValueList 1 mat))\n  mat\n==\nchangeValueList 1\n  (changeValueList 1 0 [4, 5, 6])\n  mat\n==\nchangeValueList 1 [4, 0, 6] mat\n==\n[ [1, 2, 3]\n, [4, 0, 6]\n, [7, 8, 9]\n]\n</code></pre>\n\n<p>If you want a version of this using explicit recursion, which only traverses the rows once, you can inline the definition of <code>changeValueList</code> into <code>changeValueMatrix</code>:</p>\n\n<pre><code>changeValueMatrix (0, c) value (x : xs)\n  = changeValueList c value x : xs\n\nchangeValueMatrix (r, c) value (x : xs)\n  = x : changeValueMatrix (r - 1, c) value xs\n</code></pre>\n\n<p>Be aware that your code has a few failure cases, though:</p>\n\n<ul>\n<li><p>Negative indices will produce infinite loops because you only test for <code>0</code> and recur with <code>i - 1</code> on any other number</p></li>\n<li><p>Overly large indices will run into the end of the list and crash because you don\u2019t handle the <code>[]</code> case\u2014the pattern matches are non-exhaustive, which the compiler will point out when enabling all warnings with <code>-Wall</code></p></li>\n<li><p>Similarly, matrices of zero width or height are representable, but these functions don\u2019t handle the possibility (e.g. <code>matrixDimension</code> calls <code>head</code> on a possibly-empty list); you can avoid this using <code>Data.List.NonEmpty</code> or <code>Data.Array</code> as your backing type, the latter of which is also more efficient</p></li>\n</ul>\n"}], "owner": {"reputation": 31, "user_id": 6939242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7dd9bba4852d8c48da6d04bc24a29b?s=128&d=identicon&r=PG&f=1", "display_name": "opbravo", "link": "https://stackoverflow.com/users/6939242/opbravo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570010214, "creation_date": 1569869454, "question_id": 58173642, "link": "https://stackoverflow.com/questions/58173642/how-to-change-a-value-in-a-certain-postion-of-the-matrixand-return-the-whole-ma", "title": "How to change a value in a certain postion of the matrix(and return the whole matrix changed)?", "body": "<p>My current code is below. I think all of the functions, except for the last one are correct. What I'm trying to achieve with <code>changeValueMatrix</code> is to give a matrix, a matrix position and a value and then that value will replace the one that is at the current position. I've managed to reach the position and to change the value but I can only return the row on which I changed it and not the whole matrix. I am a Haskell beginner and I've only learned recursion just now but it would be ideal to use it here if possible.</p>\n\n<pre><code>type Matrix a = [[a]]\ntype MatrixDimension = (Int,Int)  \ntype MatrixPosition = (Int,Int)\n\nmatrixDimension :: Matrix a -&gt; MatrixDimension\nmatrixDimension m = (length m, length (head m))\n\nreturnValueList :: Int -&gt; [a] -&gt; a\nreturnValueList 0 (x:xs) = x\nreturnValueList i(x:xs) = returnValue (i-1)(xs)\n\nchangeValueList :: Int -&gt; a -&gt; [a] -&gt; [a]\nchangeValueList 0 value (x:xs) = (value:xs)\nchangeValueList i value (x:xs) =  x:(changeValueList (i-1) (value) (xs))\n\nreturnValueMatrix :: MatrixPosition-&gt; Matrix a -&gt; a\nreturnValueMatrix(m,n) matrix = returnValueList n (returnreturnValueList matrix) \n\nchangeValueMatrix :: MatrixPosition -&gt; a -&gt; Matrix a -&gt; Matrix a\nchangeValueMatrix(0,c) value (x:xs) = a:xs          \n              where a = changeValueList c value x\n\nchangeValueMatrix(r,c) valor (x:xs) = \n              where \n                    row = returnValueList r (x:xs)\n                    b = changeValueList c value row\n</code></pre>\n"}, {"tags": ["haskell", "process"], "answers": [{"comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1569931163, "post_id": 58177337, "comment_id": 102748231, "body": "Thank you so much! Out of curiosity, do you happen to know if <code>\\\\.\\NUL</code> also works on older GHC&#39;s?"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1569932278, "post_id": 58177337, "comment_id": 102748813, "body": "I&#39;m not sure, unfortunately."}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1569938430, "post_id": 58177337, "comment_id": 102752545, "body": "No worries. For my use case I only need to support 8.8 and HEAD. I\u2019m still a bit surprised there isn\u2019t something in the libraries bundled with GHC that lets you get a cross-platform null handle (or at least a Maybe of one - perhaps some weird platform doesn\u2019t have something like this)."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1569896544, "creation_date": 1569896544, "answer_id": 58177337, "question_id": 58173386, "link": "https://stackoverflow.com/questions/58173386/cross-platform-null-handle-or-ignoring-a-process-output/58177337#58177337", "title": "Cross-platform null handle OR ignoring a process&#39; output", "body": "<p>From <a href=\"https://downloads.haskell.org/~ghc/8.8.1/docs/html/users_guide/win32-dlls.html#file-paths-under-windows\" rel=\"nofollow noreferrer\">File paths under Windows</a> in the GHC manual:</p>\n\n<blockquote>\n  <p>Since GHC 8.6.1, the Haskell I/O manager automatically promotes paths\n  in the legacy format to Win32 file namespace. By default the I/O\n  manager will do two things to your paths:</p>\n  \n  <ul>\n  <li>replace <code>\\</code> with <code>\\\\</code></li>\n  <li>expand relative paths to absolute paths</li>\n  </ul>\n  \n  <p>If you want\n  to opt out of all preprocessing just expliticly use namespaces in your\n  paths. Due to this change, if you need to open raw devices (e.g. COM\n  ports) you need to use the device namespace explicitly. (e.g.\n  <code>\\\\.\\COM1</code>). GHC and Haskell programs in general no longer support\n  opening devices in the legacy format.</p>\n</blockquote>\n\n<p>Thus, in GHC 8.6.1 and later, instead of using <code>NUL</code>, you now need to use <code>\\\\.\\NUL</code>, <a href=\"https://github.com/hspec/silently/commit/2ce0d591fbd020b0df5cfeb5975c5b5159878516\" rel=\"nofollow noreferrer\">like <code>silently</code> had to change</a>.</p>\n"}], "owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 58177337, "answer_count": 1, "score": 1, "last_activity_date": 1569896544, "creation_date": 1569868293, "question_id": 58173386, "link": "https://stackoverflow.com/questions/58173386/cross-platform-null-handle-or-ignoring-a-process-output", "title": "Cross-platform null handle OR ignoring a process&#39; output", "body": "<p>This seems pretty straightforward a problem: if on a Unix system I want to discard output of a process (from the <code>process</code> library), the following comment (<a href=\"https://hackage.haskell.org/package/process-1.6.5.1/docs/System-Process.html#v:NoStream\" rel=\"nofollow noreferrer\">original Haddock link</a>) seems relevant:</p>\n\n<blockquote>\n  <p>... If you wish to ignore the child process's output you should either create a pipe and drain it manually or pass a <code>Handle</code> that writes to <code>/dev/null</code>.</p>\n</blockquote>\n\n<p>And it works fine. The problem I have is that <code>openFile \"/dev/null\" WriteMode</code> does not work properly on Windows - it creates an actual file called <code>/dev/null</code>.</p>\n\n<p>Is there some cross-platform way of getting a <code>Handle</code> that just ignores its input? Other SO questions have me thinking one of <code>openFile \"nul\" WriteMode</code> or <code>openFile \"null\" WriteMode</code> should work, but neither seem to properly ignore output (see <a href=\"https://ci.appveyor.com/project/harpocrates/haddock#L462\" rel=\"nofollow noreferrer\">this line 462 of this log</a> for an example of the former <em>not</em> working).</p>\n"}, {"tags": ["string", "haskell", "char"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 8, "creation_date": 1569861512, "post_id": 58171938, "comment_id": 102724910, "body": "Try <code>map addSpace y</code>."}, {"owner": {"reputation": 71, "user_id": 11330280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e40112638611ba4ebf281d8fb91d0f?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysThresh", "link": "https://stackoverflow.com/users/11330280/alwaysthresh"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1569861718, "post_id": 58171938, "comment_id": 102725005, "body": "@melpomene I swear that was the first thing I tried... but it worked... Thank you so much. I can&#39;t believe it was so simple."}, {"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 7, "creation_date": 1569862097, "post_id": 58171938, "comment_id": 102725157, "body": "You could also have <code>addSpaces = map addSpace</code>"}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "is_accepted": true, "score": 2, "last_activity_date": 1569956476, "creation_date": 1569956476, "answer_id": 58190788, "question_id": 58171938, "link": "https://stackoverflow.com/questions/58171938/how-to-apply-a-char-function-via-map-to-a-char/58190788#58190788", "title": "How to apply a Char function via map to a [Char]", "body": "<p>You should pass in <code>y</code> as the second argument to <code>map</code>.</p>\n\n<pre><code>addSpaces y = map addSpace y\n</code></pre>\n\n<p>Or, you could remove the argument <code>y</code>, and have the argument passed in implicitly (pointfree style). </p>\n\n<pre><code>addSpaces = map addSpace\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 11330280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e40112638611ba4ebf281d8fb91d0f?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysThresh", "link": "https://stackoverflow.com/users/11330280/alwaysthresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 58190788, "answer_count": 1, "score": 0, "last_activity_date": 1570100040, "creation_date": 1569861373, "last_edit_date": 1570100040, "question_id": 58171938, "link": "https://stackoverflow.com/questions/58171938/how-to-apply-a-char-function-via-map-to-a-char", "title": "How to apply a Char function via map to a [Char]", "body": "<p>I'm working on a very specific question however I've stumbled upon a logical error that I just cannot seem to solve. </p>\n\n<p>Basically I have a function that that takes a char and returns it as a string with a space appended. From there I am required to map that function to a string and return a string of strings, each as a char with a space appended.</p>\n\n<p>I have attempted so many different things I don't even recall what gives me the least errors anymore. After staring at this for two <em>sad</em> hours I could really use some input.</p>\n\n<pre><code>addSpace :: Char -&gt; [Char]\naddSpace t = [t,' ']\n\naddSpaces :: [Char] -&gt; [[Char]]\naddSpaces y = map addSpace[????????]\n</code></pre>\n\n<p>The main issue I have is, no matter what I put into the 'map addSpace' function I get type errors.</p>\n\n<p>I apologize if this question is way simpler than I think it is. I'm just having a rough time.\nThanks in advance! I have really appreciated the help I have received in the past from the Haskell community on stack overflow.</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 1191, "user_id": 825093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87f060b749a77b7f6d03c3d6f56d3873?s=128&d=identicon&r=PG", "display_name": "silleknarf", "link": "https://stackoverflow.com/users/825093/silleknarf"}, "is_accepted": false, "score": 6, "last_activity_date": 1569860100, "last_edit_date": 1569860100, "creation_date": 1569858912, "answer_id": 58171371, "question_id": 58171265, "link": "https://stackoverflow.com/questions/58171265/why-does-odd-fst-not-work-with-the-filter-function/58171371#58171371", "title": "Why does odd.fst not work with the filter function?", "body": "<p>The reason you're getting a type mismatch compiler error is because the order of precedence is not as you're expecting. If you add more brackets then you will get the desired result:</p>\n\n<pre><code>filter (odd.fst) [(1,2), (2,3)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 14, "last_activity_date": 1569858941, "creation_date": 1569858941, "answer_id": 58171377, "question_id": 58171265, "link": "https://stackoverflow.com/questions/58171265/why-does-odd-fst-not-work-with-the-filter-function/58171377#58171377", "title": "Why does odd.fst not work with the filter function?", "body": "<p>For the same reason that <code>2 * 3+4</code> is <code>10</code>, not <code>14</code>. Operator precedence does not care about spacing: <code>2 * 3+4</code> parses as <code>(2 * 3) + 4</code>.</p>\n\n<p>Similarly,</p>\n\n<pre><code>filter odd.fst [(1,2), (2,3)]\n</code></pre>\n\n<p>parses as</p>\n\n<pre><code>(filter odd) . (fst [(1,2), (2,3)])\n</code></pre>\n\n<p>no matter how you space it. This is because function application has higher precedence than any infix operator.</p>\n\n<p>You want</p>\n\n<pre><code>filter (odd . fst) [(1,2), (2,3)]\n</code></pre>\n\n<p>instead.</p>\n"}], "owner": {"reputation": 43, "user_id": 11261405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23f70445e91e14feace9c0e9c40d5312?s=128&d=identicon&r=PG&f=1", "display_name": "boneofmysword", "link": "https://stackoverflow.com/users/11261405/boneofmysword"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 58171377, "answer_count": 2, "score": 4, "last_activity_date": 1569860100, "creation_date": 1569858469, "question_id": 58171265, "link": "https://stackoverflow.com/questions/58171265/why-does-odd-fst-not-work-with-the-filter-function", "title": "Why does odd.fst not work with the filter function?", "body": "<p>Why does <code>filter odd.fst [(1,2), (2,3)]</code> give me a compile error? <code>odd.fst</code> should take in a tuple of ints and output a boolean, so I am confused as to why the compiler is telling me it can't match types. </p>\n"}, {"tags": ["parsing", "haskell", "logic", "expression", "parsec"], "comments": [{"owner": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "edited": false, "score": 0, "creation_date": 1569857716, "post_id": 58171020, "comment_id": 102723253, "body": "Your test query &#39;where&#39; is lowercase. You only check for uppercase though."}, {"owner": {"reputation": 815, "user_id": 2999349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6f8c06e9cd70225f8ec5af4d4225a351?s=128&d=identicon&r=PG&f=1", "display_name": "user2999349", "link": "https://stackoverflow.com/users/2999349/user2999349"}, "reply_to_user": {"reputation": 720, "user_id": 10696884, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZLhm3qAv5U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gTJ8AUH3mkzlYyEQgF0K4AqDVXLw/mo/photo.jpg?sz=128", "display_name": "Thomas Lang", "link": "https://stackoverflow.com/users/10696884/thomas-lang"}, "edited": false, "score": 0, "creation_date": 1569858111, "post_id": 58171020, "comment_id": 102723442, "body": "@ThomasLang My bad, the actual query did have them in uppercase. I updated my post."}], "answers": [{"comments": [{"owner": {"reputation": 815, "user_id": 2999349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6f8c06e9cd70225f8ec5af4d4225a351?s=128&d=identicon&r=PG&f=1", "display_name": "user2999349", "link": "https://stackoverflow.com/users/2999349/user2999349"}, "edited": false, "score": 0, "creation_date": 1569866126, "post_id": 58171798, "comment_id": 102726701, "body": "Thanks! I wasn&#39;t aware of the parser interpreting a first match as a success. The try method fixed it for me, according to your example."}], "tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 2, "last_activity_date": 1569860821, "creation_date": 1569860821, "answer_id": 58171798, "question_id": 58171020, "link": "https://stackoverflow.com/questions/58171020/haskell-parsing-queries-parsec/58171798#58171798", "title": "Haskell parsing queries (Parsec)", "body": "<p>This happens because the <code>SELECT FROM</code> alternative has succeeded and returned its result, the parsing never got to trying the <code>SELECT FROM WHERE</code> alternative.</p>\n\n<p>In this specific case, I would just flip their order: try <code>SELECT FROM WHERE</code> first, and if that doesn't work, fall back to <code>SELECT FROM</code>. You would also need to wrap it in a <code>try</code> in order for the parser to roll back to the beginning of the query.</p>\n\n<p>Alternatively, you could make the <code>WHERE</code> parsing a conditional part of the <code>SELECT FROM</code> parser, something like this:</p>\n\n<pre><code>do\n    reserved \"SELECT\"\n    select &lt;- sequenceOfExpr\n    reserved \"FROM\"\n    table &lt;- identifier\n    whereQ &lt;- try (reserved \"WHERE\" *&gt; bExpression) &lt;|&gt; (pure $ BoolConst True)\n    semi\n    return $ Select select table whereQ\n</code></pre>\n"}], "owner": {"reputation": 815, "user_id": 2999349, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6f8c06e9cd70225f8ec5af4d4225a351?s=128&d=identicon&r=PG&f=1", "display_name": "user2999349", "link": "https://stackoverflow.com/users/2999349/user2999349"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 58171798, "answer_count": 1, "score": 1, "last_activity_date": 1569860821, "creation_date": 1569857422, "last_edit_date": 1569858058, "question_id": 58171020, "link": "https://stackoverflow.com/questions/58171020/haskell-parsing-queries-parsec", "title": "Haskell parsing queries (Parsec)", "body": "<p>I'm trying to make a queries parser in Haskell, but don't understand how I'm supposed to allow different optional paths of parser logic. My attempt:</p>\n\n<pre><code>query :: Parser Query\nquery = do\n    -- add more queries\n    reserved \"SELECT\"\n    select &lt;- sequenceOfExpr\n    reserved \"FROM\"\n    table &lt;- identifier\n    semi\n    return $ Select select table (BoolConst True)\n    &lt;|&gt; do\n    reserved \"SELECT\"\n    select &lt;- sequenceOfExpr\n    reserved \"FROM\"\n    table &lt;- identifier\n    reserved \"WHERE\"\n    whereQ &lt;- bExpression\n    semi\n    return $ Select select table whereQ\n    &lt;|&gt; do\n    reserved \"INSERT\"\n    insert &lt;- sequenceOfExpr\n    reserved \"INTO\"\n    table &lt;- identifier\n    semi\n    return $ Insert insert table\n    &lt;|&gt; do\n    reserved \"REMOVE\"\n    reserved \"FROM\"\n    table &lt;- identifier\n    reserved \"WHERE\"\n    whereQ &lt;- bExpression\n    semi\n    return $ Remove table whereQ\n    &lt;|&gt; do\n    reserved \"CREATE\"\n    table &lt;- identifier\n    fields &lt;- sequenceOfExpr\n    semi\n    return $ Create table fields\n    &lt;|&gt; do\n    reserved \"DROP\"\n    table &lt;- identifier\n    semi\n    return $ Drop table\n</code></pre>\n\n<p>Which works when parsing a string that corresponds to the first do stmt structure, e.g.:</p>\n\n<pre><code>\"SELECT testField FROM testTable;\"\n</code></pre>\n\n<p>but not for the others. E.g. when parsing:</p>\n\n<pre><code>\"SELECT testField FROM testTable WHERE TRUE\"\n</code></pre>\n\n<p>Instead of trying the other paths, it returns:</p>\n\n<pre><code>unexpected \"W\"\nexpecting \";\"\n</code></pre>\n\n<p>In other words it seems like it only tries the first logic. What am I doing wrong? </p>\n\n<p>Any help would be much appreciated!</p>\n"}, {"tags": ["parsing", "haskell"], "comments": [{"owner": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "edited": false, "score": 9, "creation_date": 1569841242, "post_id": 58166444, "comment_id": 102714639, "body": "Didn&#39;t you answer your own question? Since they are right-associative with the same precedence, the expression is evaluated from the right and not from the left."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 12142534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9d8d49b58b4b6e0fd49dab0ceaa096?s=128&d=identicon&r=PG&f=1", "display_name": "user188895", "link": "https://stackoverflow.com/users/12142534/user188895"}, "edited": false, "score": 0, "creation_date": 1569873686, "post_id": 58166483, "comment_id": 102729853, "body": "The fact that wasn&#39;t clear to me - and that&#39;s also not entirely obvious from your answer - is that associativity in Haskell is used not only to disambiguate expressions of the form x\u2295y\u2295z but also to disambiguate expressions of the form x\u2295y\u2297z when \u2295 and \u2297 have <b>the same precedence and the same associativity.</b> To quote the Haskell 2010 report: &quot;Consecutive unparenthesized operators with the same precedence must both be either left or right associative to avoid a syntax error.&quot;"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 41, "user_id": 12142534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9d8d49b58b4b6e0fd49dab0ceaa096?s=128&d=identicon&r=PG&f=1", "display_name": "user188895", "link": "https://stackoverflow.com/users/12142534/user188895"}, "edited": false, "score": 1, "creation_date": 1569874302, "post_id": 58166483, "comment_id": 102730100, "body": "@user188895: yes indeed, given the same precedence, it means these are parsed right-to-left (also with &quot;mixed&quot; operators, as you show in the comment). Note that the associativity of the operators must be the same, as is noted in the Haskell report: &quot;<i>Consecutive unparenthesized operators with the same precedence must both be either left or right associative to avoid a syntax error.</i>&quot; (chapter 3)."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 11, "last_activity_date": 1569841346, "last_edit_date": 1569841346, "creation_date": 1569840990, "answer_id": 58166483, "question_id": 58166444, "link": "https://stackoverflow.com/questions/58166444/haskell-parsing-x-y-z/58166483#58166483", "title": "Haskell Parsing: x ++ y : z", "body": "<p>The fact that they are <strong><em>right associative</em></strong> means that these are parsed \"right-to-left\" so to speak. It thus means that <em>x &oplus; y &oplus; z</em> is parsed as <em>x&oplus; (y &oplus; z)</em>. So that means that <code>x ++ y : z</code> is indeed parsed as <code>x ++ (y : z)</code>.</p>\n\n<p>There are good reasons to make both <code>(:)</code> and <code>(++)</code> right associative. For the \"cons\" <code>(:)</code> operator, it means that we can write <code>1 : 4 : 2 : []</code>, since it is parsed as <code>1 : (4 : (2: []))</code>, which is correct in terms of the types. If would parse it like <code>((1:4):2:[])</code>, then <code>1:4</code> would for example be wrong, since it expects an item as the first operand, and list of these items as the second operand. We can of course still let the Haskell parser parse it as a list, but that would result in a large amount of extra parenthesis.</p>\n\n<p>For <code>(++)</code> it is better to parse it right-to-left as well due to performance reasons. <code>x ++ y</code> takes linear time in the size of <code>x</code>. So that means that if we parse <code>x ++ (y ++ z)</code>, it will take <em>|x| + |y|</em> steps. If we would parse this as <code>(x ++ y) ++ z</code>, it would take <em>2&times;|x|+|y|</em>, since the first time we apply <code>(x ++ y)</code> it runs in the size of <code>x</code>, but then <code>(x ++ y) ++ z</code> runs in the size of <code>x ++ y</code>. This thus would mean that if we concatenate <em>n</em> lists each with a size of <em>m</em>, it will not run in <em>O(n&times;m)</em>, but in <em>O(n<sup>2</sup>&times;m)</em>.</p>\n"}], "owner": {"reputation": 41, "user_id": 12142534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9d8d49b58b4b6e0fd49dab0ceaa096?s=128&d=identicon&r=PG&f=1", "display_name": "user188895", "link": "https://stackoverflow.com/users/12142534/user188895"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 58166483, "answer_count": 1, "score": 3, "last_activity_date": 1569841346, "creation_date": 1569840855, "question_id": 58166444, "link": "https://stackoverflow.com/questions/58166444/haskell-parsing-x-y-z", "title": "Haskell Parsing: x ++ y : z", "body": "<p>In Haskell, why is <code>x ++ y : z</code> parsed as <code>x ++ (y : z)</code> and not as <code>(x ++ y) : z</code>?</p>\n\n<p>For instance, <code>[1] ++ 2 : [3]</code> evaluates to <code>[1,2,3]</code>.</p>\n\n<p>Both <code>(++)</code> and <code>(:)</code> are right-associative with precedence 5.</p>\n"}, {"tags": ["sorting", "haskell", "ord"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1569836627, "post_id": 58165292, "comment_id": 102712258, "body": "That makes sense: where do you use <code>x</code> here in your second clause."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1569837005, "post_id": 58165292, "comment_id": 102712466, "body": "Enabling warnings would report that <code>x</code> is defined by never used."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 7, "last_activity_date": 1569836809, "creation_date": 1569836809, "answer_id": 58165350, "question_id": 58165292, "link": "https://stackoverflow.com/questions/58165292/missing-first-element-from-list-output-in-haskell/58165350#58165350", "title": "Missing first element from list output in Haskell", "body": "<blockquote>\n  <p>My question is, why is this skipping the first element of the list <code>xs</code>?</p>\n</blockquote>\n\n<p>It is not skipping the first element of the list <code>xs</code>. It is just skipping <code>x</code>. <code>(x:xs)</code> is a pattern where <code>x</code> is the \"head\" of the list (the first item), whereas <code>xs</code> is the <em>tail</em> of the list (a list containing the remaining elements).</p>\n\n<p>You thus likely want to use:</p>\n\n<pre><code>pairs:: (Ord a) =&gt; [a] -&gt; [(a,a)]\npairs <b>xs</b> = [(i, j) | i &lt;- xs, j &lt;- xs, i &gt; j]</code></pre>\n\n<p>Here we thus capture the entire list <code>xs</code>.</p>\n\n<p>If the order does not matter much, we can make this a bit more efficient by calculating the minimum and maximum, and iterating over the tails:</p>\n\n<pre><code>import Data.List(tails)\n\norder2 :: Ord a =&gt; a -&gt; a -&gt; (a, a)\norder2 x y | x &gt; y = (x, y)\n           | otherwise = (y, x)\n\npairs:: (Ord a) =&gt; [a] -&gt; [(a,a)]\npairs <b>xs</b> = [order2 i j | (i:js) &lt;- tails xs, j &lt;- js, i /= j]</code></pre>\n\n<p>Here we thus first take an element <code>i</code>, and the remaining elements are stored in <code>js</code>. We then iterate over <code>js</code>. If <code>i</code> and <code>j</code> are not the same, we use <code>order2</code> to create a 2-tuple where the first item is larger than the second item.</p>\n"}], "owner": {"reputation": 157, "user_id": 5608517, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9eed034d912be0a2c2ef78e9b37500d2?s=128&d=identicon&r=PG&f=1", "display_name": "Noopty", "link": "https://stackoverflow.com/users/5608517/noopty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 58165350, "answer_count": 1, "score": 2, "last_activity_date": 1569836809, "creation_date": 1569836603, "last_edit_date": 1569836644, "question_id": 58165292, "link": "https://stackoverflow.com/questions/58165292/missing-first-element-from-list-output-in-haskell", "title": "Missing first element from list output in Haskell", "body": "<p>I am a beginner in Haskell and I am missing a concept while using Ord. I am trying to unique pairs out of a list in Haskell through the function below</p>\n\n<pre><code>pairs:: (Ord a) =&gt; [a] -&gt; [(a,a)]\npairs[] = []\npairs(x:xs) = [(i, j) | i &lt;- xs, j &lt;- xs, i &gt; j]\n</code></pre>\n\n<p>So for example if i want to get the unique pairs of [4,3,1,2] i should get the output\n[(4,3),(4,1),(4,2),(3,1),(3,2),(2,1)]</p>\n\n<p>but I am getting [(3,1),(3,2)] instead.</p>\n\n<p>my question is, why is this skipping the first element of the list xs?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569836462, "post_id": 58165029, "comment_id": 102712170, "body": "It will usually recompile all flags that <i>depend</i> on the changed file. So if file <code>B</code> imports <code>A</code>, and you change <code>A</code>, it will recompile <code>B</code> as well. This can result in a &quot;chain&quot; of recompilations. If <code>C</code> for example imports <code>B</code>, then if you rewrite <code>A</code>, eventually <code>C</code> will need to recompile as well, since <code>B</code> was recompiled."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569836537, "post_id": 58165029, "comment_id": 102712215, "body": "You can use <code>--force-dirty</code> to recompile the entire project."}, {"owner": {"reputation": 2970, "user_id": 1298865, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/hOaaf.png?s=128&g=1", "display_name": "Nicolas Henin", "link": "https://stackoverflow.com/users/1298865/nicolas-henin"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569842955, "post_id": 58165029, "comment_id": 102715457, "body": "what it &#39;s doing is that if B import A but I only change B, it recompiles also A... actually it recompiles everything all the times.... That&#39;s what I was trying to explain... maybe I have a --force-dirty hidden somewhere.. I&#39;m going to look at it.."}, {"owner": {"reputation": 2970, "user_id": 1298865, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/hOaaf.png?s=128&g=1", "display_name": "Nicolas Henin", "link": "https://stackoverflow.com/users/1298865/nicolas-henin"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569843976, "post_id": 58165029, "comment_id": 102715921, "body": "Didn&#39;t find anything about force-dirty in my config... btw I have the impression my IDE (Intellij is not recompiling everything though...), it looks like it&#39;s only in my terminal (not sure about it...)..."}, {"owner": {"reputation": 2970, "user_id": 1298865, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/hOaaf.png?s=128&g=1", "display_name": "Nicolas Henin", "link": "https://stackoverflow.com/users/1298865/nicolas-henin"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569844140, "post_id": 58165029, "comment_id": 102715985, "body": "Could it be due to my IDE ?? like it is changing something somehow ? I&#39;m going to do some tests"}, {"owner": {"reputation": 2970, "user_id": 1298865, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/hOaaf.png?s=128&g=1", "display_name": "Nicolas Henin", "link": "https://stackoverflow.com/users/1298865/nicolas-henin"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569844348, "post_id": 58165029, "comment_id": 102716082, "body": "This is my IDE !! somehow it&#39;s changing something in all my files..."}, {"owner": {"reputation": 150, "user_id": 8061073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104ff920dbf1ef3c4508e3d57556613b?s=128&d=identicon&r=PG&f=1", "display_name": "Pasindu Muthukuda", "link": "https://stackoverflow.com/users/8061073/pasindu-muthukuda"}, "edited": false, "score": 0, "creation_date": 1605143029, "post_id": 58165029, "comment_id": 114564206, "body": "@NicolasHenin Are you using intellij-haskell? Did you find a solution to this problem?"}, {"owner": {"reputation": 150, "user_id": 8061073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104ff920dbf1ef3c4508e3d57556613b?s=128&d=identicon&r=PG&f=1", "display_name": "Pasindu Muthukuda", "link": "https://stackoverflow.com/users/8061073/pasindu-muthukuda"}, "edited": false, "score": 0, "creation_date": 1605145886, "post_id": 58165029, "comment_id": 114564814, "body": "Never mind, I just decided to use a separate directory for building with it&#39;s own <code>.stack-work</code>. I think when <code>.stack-work</code> is shared with the IDE is when we get this problem. This building directory just contains symlinks to the source files so that doing <code>stack build</code> in the building directory will work."}], "owner": {"reputation": 2970, "user_id": 1298865, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/hOaaf.png?s=128&g=1", "display_name": "Nicolas Henin", "link": "https://stackoverflow.com/users/1298865/nicolas-henin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1570859662, "creation_date": 1569835686, "last_edit_date": 1570859662, "question_id": 58165029, "link": "https://stackoverflow.com/questions/58165029/compilation-optimisation-issue-of-a-haskell-project", "title": "Compilation Optimisation issue of a Haskell project", "body": "<p>I have the impression my Haskell project recompiles all the files each time I do a <code>stack build</code> even if I have changed only a Haskell files that has no dependencies with the majority of the other ones.</p>\n\n<p>Am I having a setting that forces to recompile everything or maybe it's the behaviour by default ? How can I optimise it ?  </p>\n\n<p>I see <code>Compiling .... [Optimisation flags changed]</code> all the time also, maybe it's related to my issue... </p>\n"}, {"tags": ["haskell", "foldable"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1569834994, "post_id": 58164820, "comment_id": 102711338, "body": "With the function <code>a -&gt; m</code>. This sometimes is just an <code>id</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569835459, "post_id": 58164820, "comment_id": 102711615, "body": "You can implement <code>foldMap f</code> here as <code>foldr (\\x -&gt; mappend (f x)) mempty</code>. Note that a <code>Foldable</code> does <i>not</i> imply a <code>Functor</code>."}, {"owner": {"reputation": 500, "user_id": 11303290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5926bac6c5617d83b1af462ded299752?s=128&d=identicon&r=PG&f=1", "display_name": "llamaro25", "link": "https://stackoverflow.com/users/11303290/llamaro25"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569835666, "post_id": 58164820, "comment_id": 102711736, "body": "@WillemVanOnsem I tried that but I got the error (edited in my post) instead."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569835821, "post_id": 58164820, "comment_id": 102711828, "body": "you forgot to add <code>Foldable</code> type constraint in the signature."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1569836245, "creation_date": 1569836245, "answer_id": 58165189, "question_id": 58164820, "link": "https://stackoverflow.com/questions/58164820/what-does-the-type-foldmap-monoid-m-a-m-f-a-m-mean-and-how-to/58165189#58165189", "title": "What does the type foldMap :: (Monoid m) =&gt; (a -&gt; m) -&gt; f a -&gt; m mean and how to implement it?", "body": "<blockquote>\n  <p>they explained it as \"Map each element of the structure to a monoid, and combine the results.\" but I don't quite understand what it means. How can I map an element to the structure of a Monoid?</p>\n</blockquote>\n\n<p>We do that with the function with signature <code>a -&gt; m</code>. So we define the \"mapping\" function ourself.</p>\n\n<p>A <a href=\"https://en.wikipedia.org/wiki/Monoid\" rel=\"nofollow noreferrer\"><em>monoid</em> [wiki]</a> is an algebraic structure. It is in essence a 3-tuple <em>(S, &oplus;, s<sub>0</sub>)</em> where <em>S</em> is the set of values, <em>&oplus; :: S &times; S &rightarrow; S</em> is an <em>associative</em> binary operator, and <em>s<sub>0</sub></em> is an identity element, such that <em>s<sub>0</sub> &oplus; s = s \n&oplus; s<sub>0</sub> = s</em>.</p>\n\n<p>Types that are members of the <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Foldable\" rel=\"nofollow noreferrer\"><strong><code>Foldable</code></strong> class</a> are data structures that can be \"folded\". It means that if you for example have a <code>Tree</code> that contains <code>Int</code>s, so a <code>Tree Int</code>, such that you, for a function <code>f :: Int -&gt; Int -&gt; Int</code>, and a neutral element <code>z</code>, you can derive an <code>Int</code>.</p>\n\n<p>By using <code>foldMap</code> we will call a function <code>f :: a -&gt; m</code> on these elements, and use the monoid function <em>&oplus;</em> to \"fold\" the values. For data structures that implement <code>Functor</code> as well, it is thus, more or less equivalent to <code>foldMap f = foldr mappend mempty . fmap f</code>.</p>\n\n<p>We can however use the <code>f</code> in the <code>foldr</code> function itself, like:</p>\n\n<pre><code>foldMap' :: (Foldable f, Monoid m) =&gt; (a -&gt; m) -&gt; f a -&gt; m\nfoldMap' f x = foldr (\\y -&gt; mappend (f y)) mempty x\n</code></pre>\n\n<p>or shorter:</p>\n\n<pre><code>foldMap' :: (Foldable f, Monoid m) =&gt; (a -&gt; m) -&gt; f a -&gt; m\nfoldMap' f = foldr (mappend . f) mempty\n</code></pre>\n\n<p>Here we thus first pre-process the values in the datastructure with <code>f</code> to convert these to a monoid object, and we call <code>mappend</code> as folding function on these items.</p>\n"}, {"comments": [{"owner": {"reputation": 500, "user_id": 11303290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5926bac6c5617d83b1af462ded299752?s=128&d=identicon&r=PG&f=1", "display_name": "llamaro25", "link": "https://stackoverflow.com/users/11303290/llamaro25"}, "edited": false, "score": 1, "creation_date": 1569851755, "post_id": 58166064, "comment_id": 102720088, "body": "very concise explanation and thanks for including the definition of foldr"}], "tags": [], "owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "is_accepted": false, "score": 2, "last_activity_date": 1569839539, "creation_date": 1569839539, "answer_id": 58166064, "question_id": 58164820, "link": "https://stackoverflow.com/questions/58164820/what-does-the-type-foldmap-monoid-m-a-m-f-a-m-mean-and-how-to/58166064#58166064", "title": "What does the type foldMap :: (Monoid m) =&gt; (a -&gt; m) -&gt; f a -&gt; m mean and how to implement it?", "body": "<p>So you have the following signature: <code>foldMap :: (Monoid m, Foldable f) =&gt; (a -&gt; m) -&gt; f a -&gt; m</code>. Let's go step by step</p>\n\n<h3>The constraints:</h3>\n\n<p>a <code>Monoid</code> is data which can be combine by some operation. You can get many examples if you think a while. Just to mention here:</p>\n\n<ul>\n<li><code>Integer</code> as data and <code>+</code> as the operation. The elements <code>1</code> and <code>2</code> can be combine giving <code>3 = 1 + 2</code>. </li>\n<li><code>Integer</code> as data and <code>*</code> as the operation. The elements <code>1</code> and <code>2</code> can be combine giving <code>2 = 1 * 2</code>.</li>\n<li><code>List</code> as data and <code>++</code> as the operation. The elements <code>[1,2]</code> and <code>[2,3]</code> can be combine giving <code>[1,2,2,3] = [1,2] ++ [2,3]</code>.</li>\n<li><code>Vector</code> of size 2 as data and <code>+</code> as the operation. The elements <code>&lt;1,2&gt;</code> and <code>&lt;4,5&gt;</code> can be combine giving <code>&lt;5,7&gt; = &lt;1,2&gt; + &lt;4,5&gt;</code>.</li>\n<li>etc..</li>\n</ul>\n\n<p>All of the examples above have a <code>Monoid</code> representation in haskell, tipically defined using <code>newtype</code> or <code>data</code> key words. In haskell the monoid operation is represented as <code>&lt;&gt;</code>. </p>\n\n<p>An important property is that monoids have a neutral element and are associative. In the context of <code>Integer</code> under <code>+</code> the neutral element is <code>0</code> an associativity is given by the fact that <code>(a + b) + c = a + (b + c)</code>. You can easily find this properties in all given examples. Try out!</p>\n\n<p>The <code>Foldable</code> constraint is easier. Essentially, you can summarize a <code>Foldable</code> data structure into one single value. </p>\n\n<h3>The function parameters</h3>\n\n<p>Code worths thousand words so...</p>\n\n<pre><code>foldMap :: (Monoid m, Foldable f) =&gt; (a -&gt; m) -&gt; f a -&gt; m\n--          ^^^^^^^^^^^^^^^^^^^^     ^^^^^^^     ^^^\n--          |- We've seen this       |           |\n--                                   |           |- A 'Set' of a's which can be collapse into a single value\n--                                   |- A function to convert a's into a monoid\n\n</code></pre>\n\n<p>So by definition you can easily follow this reasoning/algorithim:</p>\n\n<p><strong>Premises</strong></p>\n\n<ol>\n<li>I have a Structure of elements which can be collapse into a single value</li>\n<li>I have a way to convert this elements into a monoid's element</li>\n<li>Monoids have a neutral element</li>\n<li>Two monoids element can be combine together</li>\n</ol>\n\n<p><strong>Algorithim</strong></p>\n\n<ul>\n<li>collapse elements of the structure by combining them using the monoid operator</li>\n<li>if the structure is empty use the neutral element as the result.</li>\n</ul>\n\n<h3>very fancy but... I'm still not getting It</h3>\n\n<p>The problem is that when you define an instance of <code>Foldable</code>, you haven't define yet how to fold the structure, and that's different for each one!. As in Willem's answer, you can define <code>foldMap</code> in terms of <code>foldr</code>, meaning that <code>foldr</code> is defining the way you can collapse your structure. Viceversa is also true: you can define <code>foldr</code> in terms of <code>foldMap</code>, and probably that's the gotcha!! if you haven't defined <code>foldr</code>, there isn't  a universal way to implement <code>foldMap</code>, It'll depends on your data structure. So as a code-sumary:</p>\n\n<pre><code>class Foldable t where\n  foldMap :: Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m -- A default instance can be provided if you define foldr (a.k.a a way to collapse the structure)\n  foldr   :: (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b  -- A default instance can be provided if you define foldMap (a.k.a a way to collapse the structure into a monoid element)\n  -- but if you don't provide at least one, It'll be impossible to implement any\n  -- because you aren't telling me how to collapse the structure!!\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 11303290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5926bac6c5617d83b1af462ded299752?s=128&d=identicon&r=PG&f=1", "display_name": "llamaro25", "link": "https://stackoverflow.com/users/11303290/llamaro25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 58165189, "answer_count": 2, "score": 3, "last_activity_date": 1569839539, "creation_date": 1569834949, "last_edit_date": 1569835729, "question_id": 58164820, "link": "https://stackoverflow.com/questions/58164820/what-does-the-type-foldmap-monoid-m-a-m-f-a-m-mean-and-how-to", "title": "What does the type foldMap :: (Monoid m) =&gt; (a -&gt; m) -&gt; f a -&gt; m mean and how to implement it?", "body": "<p>Can someone explain what the type mean and how to implement this?</p>\n\n<pre><code>class Foldable f where\n  foldMap :: (Monoid m) =&gt; (a -&gt; m) -&gt; f a -&gt; m\n</code></pre>\n\n<p>Based on <a href=\"https://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Foldable.html#v:foldMap\" rel=\"nofollow noreferrer\">https://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Foldable.html#v:foldMap</a>,\nthey explained it as \"Map each element of the structure to a monoid, and combine the results.\" but I don't quite understand what it means. How can I map an element to the structure of a Monoid? </p>\n\n<p>I tried \n<code>foldMap f = mconcat . (&lt;$&gt;) f</code>\nbut I got this error:</p>\n\n<pre><code> \u2022 Couldn't match type \u2018f\u2019 with \u2018[]\u2019\n      \u2018f\u2019 is a rigid type variable bound by\n        the class declaration for \u2018Foldable\u2019\n        at traversable.hs:41:16\n      Expected type: f a -&gt; m\n        Actual type: [a] -&gt; m\n    \u2022 In the expression: mconcat . (&lt;$&gt;) f\n      In an equation for \u2018foldMap\u2019: foldMap f = mconcat . (&lt;$&gt;) f\n    \u2022 Relevant bindings include\n        foldMap :: (a -&gt; m) -&gt; f a -&gt; m (bound at traversable.hs:45:3)\n</code></pre>\n\n<p>I tried @WillemVanOnsem's code and got this error:</p>\n\n<pre><code>error:\n    \u2022 Could not deduce (Data.Foldable.Foldable f)\n        arising from a use of \u2018foldr\u2019\n      from the context: Foldable f\n        bound by the class declaration for \u2018Foldable\u2019\n        at traversable.hs:41:7-14\n      or from: Monoid m\n        bound by the type signature for:\n                   foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; f a -&gt; m\n        at traversable.hs:42:14-47\n      Possible fix:\n        add (Data.Foldable.Foldable f) to the context of\n          the type signature for:\n            foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; f a -&gt; m\n          or the class declaration for \u2018Foldable\u2019\n    \u2022 In the expression: foldr (\\ x -&gt; mappend (f x)) mempty\n      In an equation for \u2018foldMap\u2019:\n          foldMap f = foldr (\\ x -&gt; mappend (f x)) mempty\n</code></pre>\n"}, {"tags": ["haskell", "programming-languages", "interpreter"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 4, "creation_date": 1569805584, "post_id": 58160405, "comment_id": 102702973, "body": "What have you tried? What specifically about this do you need help with?"}, {"owner": {"reputation": 19, "user_id": 12122708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2974148a344952cc73b49f75ce0817?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/12122708/bill"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1569805676, "post_id": 58160405, "comment_id": 102702989, "body": "@Carcigenicate I haven&#39;t been able to really figure anything out but I was told &quot;For example, the function plus can be described by the equations  plus 0 y = y plus (S x) y = S (plus x y)&quot;"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1569805693, "post_id": 58160405, "comment_id": 102702991, "body": "Are you sure this is Haskell? In Haskell, <code>[]</code> means the empty list, not <code>#</code>."}, {"owner": {"reputation": 19, "user_id": 12122708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2974148a344952cc73b49f75ce0817?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/12122708/bill"}, "reply_to_user": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1569805842, "post_id": 58160405, "comment_id": 102703016, "body": "@JosephSible to be honest I&#39;m not sure. I added some more info above"}, {"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 1, "creation_date": 1569806201, "post_id": 58160405, "comment_id": 102703072, "body": "I imagine you are looking for something like this: <code>even []           = True; even [a]         = False; even (a:b:xs) = True &amp;&amp; even xs;</code>"}, {"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 3, "creation_date": 1569806310, "post_id": 58160405, "comment_id": 102703099, "body": "I think the <code>S</code> and <code>S 0</code> is probably some Peano number encoding."}, {"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 5, "creation_date": 1569806704, "post_id": 58160405, "comment_id": 102703178, "body": "What does the <code>CBN</code> in <code>execCBN</code> stand for? It seems like you don&#39;t need a Haskell program, but a program written in a language you have an interpreter for. If you add more information about that in your question, it would be helpful."}, {"owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "edited": false, "score": 1, "creation_date": 1569833950, "post_id": 58160405, "comment_id": 102710774, "body": "@Bill: I think people are eager to answer if you supply enough information. It seems that you&#39;re not building a Haskell function that checks if a Haskell list has an even number of elements, but rather an interpreter for a simple lambda calculus in which lists are Peano encoded. Please specify this if it&#39;s the case, so that people don&#39;t answer a question you didn&#39;t ask."}, {"owner": {"reputation": 19, "user_id": 12122708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2974148a344952cc73b49f75ce0817?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/12122708/bill"}, "reply_to_user": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "edited": false, "score": 0, "creation_date": 1569867337, "post_id": 58160405, "comment_id": 102727182, "body": "@SimonShine Ya I am building a an interpreter for a simple lambda calculus equation"}, {"owner": {"reputation": 19, "user_id": 12122708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2974148a344952cc73b49f75ce0817?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/12122708/bill"}, "reply_to_user": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 0, "creation_date": 1569867596, "post_id": 58160405, "comment_id": 102727300, "body": "@Garrison CBN stand for call by need. It&#39;s written in a haskell file so I&#39;m not 100% sure if it&#39;s in haskell or something else"}], "answers": [{"tags": [], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "is_accepted": false, "score": 1, "last_activity_date": 1569921977, "last_edit_date": 1592644375, "creation_date": 1569921977, "answer_id": 58181817, "question_id": 58160405, "link": "https://stackoverflow.com/questions/58160405/trying-to-make-a-basic-haskell-program/58181817#58181817", "title": "Trying to make a basic haskell program", "body": "<p>First, here are some suggestions to improve on your future Q&amp;As on StackOverflow:</p>\n<ul>\n<li>Make sure your question contains a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>. Your example code leaves out parts that are necessary to run or even understand what's going on.</li>\n<li>Provide enough context to make the question understandable: Having &quot;CBN&quot; in the code wasn't enough for every commenter to understand what was going on. It took some effort for me to figure out that what you meant was &quot;inside this lambda evaluator&quot;, and even then &quot;whether a string is either even or odd&quot; is still not completely obvious: What's a string? Do you mean to encode character string literals using Peano numbers, or do you mean &quot;whether a Peano-encoded <em>natural number</em> is even or odd&quot;?</li>\n<li>If you don't provide enough context, you make the question immensely hard to answer, because the answerer will either have to go out of their way and recreate a part of your situation, provide multiple answers for each possible interpretation, or make a random guess.</li>\n</ul>\n<hr />\n<p>Second, here is my interpretation of what you're asking:</p>\n<blockquote>\n<p>Given the following lambda calculus interpreter, how would I construct an <code>Exp</code> that represents a function that returns if a Peano-encoded natural number is even or odd? That is, if my <code>even :: Exp</code> is an <code>EAbs &quot;x&quot; ...</code>, then</p>\n<pre><code>eval (EApp even zero)  `shouldBe` true\neval (EApp even one)   `shouldBe` false\neval (EApp even two)   `shouldBe` true\neval (EApp even three) `shouldBe` false\neval (EApp even four)  `shouldBe` true\nwhere\n  zero = ENat0\n  one = ENatS zero\n  two = ENatS one\n  three = ENatS two\n  four = ENatS three\n  true = one\n  false = zero\n</code></pre>\n<p>What would go into <code>even = EAbs &quot;x&quot; ...</code>?</p>\n</blockquote>\n<p>And third, if I were to answer that question, I'd say:</p>\n<p>You can do that in a number of ways, but since your lambda calculus has <code>Fix</code> and <code>Rec</code>, it would make sense to try and express recursion through them. You might start off by wondering how it's made in Haskell, then abstract out recursion, and then convert it to your lambda calculus interpreter.</p>\n<p>With that approach, you might have:</p>\n<pre class=\"lang-hs prettyprint-override\"><code>even :: Int -&gt; Int\neven 0 = 1\neven 1 = 0\neven n = even (n - 2)\n</code></pre>\n<p><a href=\"https://en.wikibooks.org/wiki/Haskell/Fix_and_recursion#Recursion\" rel=\"nofollow noreferrer\">Abstracting out recursion</a>, you might get:</p>\n<pre class=\"lang-hs prettyprint-override\"><code>even :: Int -&gt; Int\neven = fix (\\rec n -&gt;\n  if n == 0 then 1 else\n  if n == 1 then 0 else\n  rec (n - 2))\n</code></pre>\n<p>I'll leave the rest for you to express using terms from your syntax tree.</p>\n"}], "owner": {"reputation": 19, "user_id": 12122708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2974148a344952cc73b49f75ce0817?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/12122708/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1569921977, "creation_date": 1569805534, "last_edit_date": 1569805905, "question_id": 58160405, "link": "https://stackoverflow.com/questions/58160405/trying-to-make-a-basic-haskell-program", "title": "Trying to make a basic haskell program", "body": "<p>I'm trying to make some haskell code to determine whether a string is either even or odd. </p>\n\n<pre><code>even l evaluates to S 0 if l is a list of even length and evaluates to 0 if l is not of even length, for example\n\neven a1:a2:a3:a4:#      ---&gt;   S 0    \neven a1:a2:a3:a4:a5:#   ---&gt;   0    \n</code></pre>\n\n<p>I'm not sure where to go and any help would be greatly appreciated. The interpreter looks like this</p>\n\n<pre><code>execCBN :: Program -&gt; Exp\nexecCBN (Prog e) = evalCBN e\n\nevalCBN :: Exp -&gt; Exp\nevalCBN (EApp e1 e2) = case (evalCBN e1) of\n    (EAbs i e1') -&gt; evalCBN (subst i e2 e1')\n    e1' -&gt; EApp e1' e2\nevalCBN (EIf e1 e2 e3 e4) = if (evalCBN e1) == (evalCBN e2) then evalCBN e3 else evalCBN e4\nevalCBN (ELet i e1 e2) = evalCBN (EApp (EAbs i e2) e1) \nevalCBN (ERec i e1 e2) = evalCBN (EApp (EAbs i e2) (EFix (EAbs i e1)))\nevalCBN (EFix e) = evalCBN (EApp e (EFix e)) \nevalCBN (EMinusOne e) = case (evalCBN e) of\n    ENat0 -&gt; ENat0\n    (ENatS e) -&gt; e\nevalCBN (ENatS e') = ENatS (evalCBN e')\nevalCBN x = x\n</code></pre>\n"}, {"tags": ["list", "haskell", "types"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1569792431, "post_id": 58159285, "comment_id": 102700966, "body": "It&#39;s just a precedence issue: <code>(ListMap (k, v):t)</code> is parsed as <code>((ListMap (k, v)) : t)</code> which is nonsense. Try <code>(ListMap ((k, v):t))</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "is_accepted": true, "score": 6, "last_activity_date": 1569793196, "creation_date": 1569793196, "answer_id": 58159412, "question_id": 58159285, "link": "https://stackoverflow.com/questions/58159285/cant-match-expected-type-with-actual-type-for-list-construction/58159412#58159412", "title": "Can&#39;t match expected type with actual type for list construction", "body": "<p><code>ListMap (k, v):t</code> is parsed as <code>((ListMap (k, v)) : t)</code>. Since <code>(:)</code> has type <code>a -&gt; [a] -&gt; [a]</code>, and <code>ListMap</code> constructs a <code>ListMap k v</code>, <code>t</code> must have type <code>[ListMap k v]</code> to typecheck. Since <code>t</code> (correctly) has type <code>[(k, v)]</code> the check fails. You also have another error, namely that <code>(k, v)</code> does not have the required type of <code>[(k, v)]</code> to be used as an argument to the <code>ListMap</code> constructor.</p>\n\n<p>You can fix both of these by ensuring the parse you want, either:</p>\n\n<pre><code>ListMap ((k, v):t)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ListMap $ (k,v):t\n</code></pre>\n"}], "owner": {"reputation": 19222, "user_id": 789186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d232cc5abe46092d3972d4f85833e42?s=128&d=identicon&r=PG", "display_name": "user4035", "link": "https://stackoverflow.com/users/789186/user4035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58159412, "answer_count": 1, "score": 0, "last_activity_date": 1569793196, "creation_date": 1569792020, "question_id": 58159285, "link": "https://stackoverflow.com/questions/58159285/cant-match-expected-type-with-actual-type-for-list-construction", "title": "Can&#39;t match expected type with actual type for list construction", "body": "<p>Problem: having a typeclass MapLike, looking like a map type, implement an instance for MapLike for the type ListMap. ListMap is defined as a list of pairs (key, value). For each key there must be only 1 value. insert function changes the old value to the new one if the key is contained in the map.</p>\n\n<p>It implemented it partially, but for insert function I get an error:</p>\n\n<blockquote>\n  <p>error:</p>\n\n<pre><code>\u2022 Couldn't match expected type \u2018[ListMap k0 v0]\u2019\n              with actual type \u2018ListMap k v\u2019\n\u2022 In the second argument of \u2018(:)\u2019, namely \u2018t\u2019\n  In the expression: (ListMap (k, v) : t)\n  In the expression:\n    let t = insert key val (ListMap xs) in (ListMap (k, v) : t)\n</code></pre>\n</blockquote>\n\n<p>I don't understant what's wrong, I am checking whether the key is in the head of the list.\nIf it's there, we change the value and cons it with the tail.\nIf it's not there, we get the list with exchanged or concatenated key/value pair and add a head to it.\nWhat's wrong?</p>\n\n<pre><code>import Prelude hiding (lookup)\nimport qualified Data.List as L\n\nclass MapLike m where\n    empty :: m k v\n    lookup :: Ord k =&gt; k -&gt; m k v -&gt; Maybe v\n    insert :: Ord k =&gt; k -&gt; v -&gt; m k v -&gt; m k v\n    delete :: Ord k =&gt; k -&gt; m k v -&gt; m k v\n    fromList :: Ord k =&gt; [(k,v)] -&gt; m k v\n    fromList [] = empty\n    fromList ((k,v):xs) = insert k v (fromList xs)\n\nnewtype ListMap k v = ListMap { getListMap :: [(k,v)] }\n    deriving (Eq,Show)\n\ninstance MapLike ListMap where\n  empty = ListMap []\n  lookup key (ListMap []) = Nothing\n  lookup key (ListMap ((k, v):xs)) | key == k = Just v\n                                   | otherwise = lookup key (ListMap xs)\n  insert key val (ListMap []) = ListMap [(key, val)]\n  insert key val (ListMap ((k, v):xs)) | key == k = ListMap ((k, val):xs)\n                                       | otherwise = let (ListMap t) = insert key val (ListMap xs) in\n                                           (ListMap (k, v):t) -- &lt;-?\n</code></pre>\n"}, {"tags": ["haskell", "typeclass"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5265393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ytdRdb17wKw/AAAAAAAAAAI/AAAAAAAAC8w/yhBqZLv7u8c/photo.jpg?sz=128", "display_name": "gregory michael travis", "link": "https://stackoverflow.com/users/5265393/gregory-michael-travis"}, "edited": false, "score": 0, "creation_date": 1569858017, "post_id": 58158274, "comment_id": 102723403, "body": "Thanks for the very clear explanation!  I wonder if you might suggest another way to do this that won&#39;t require a ton of explicit annotations.  What I&#39;m trying to do is allow for the creation, for any given type, an open-ended set of delta types that represent changes to values of that type.  That&#39;s why I wanted to leave off the functional dependency.  I suspect type families might have an answer, but I have learn about those first."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 31, "user_id": 5265393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ytdRdb17wKw/AAAAAAAAAAI/AAAAAAAAC8w/yhBqZLv7u8c/photo.jpg?sz=128", "display_name": "gregory michael travis", "link": "https://stackoverflow.com/users/5265393/gregory-michael-travis"}, "edited": false, "score": 0, "creation_date": 1569860971, "post_id": 58158274, "comment_id": 102724687, "body": "@gregorymichaeltravis Do you really need the same delta type to apply to many types. I can see why you do not want the fundep <code>a -&gt; b</code>, but maybe <code>b -&gt; a</code> can be added without losing too much?"}, {"owner": {"reputation": 31, "user_id": 5265393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ytdRdb17wKw/AAAAAAAAAAI/AAAAAAAAC8w/yhBqZLv7u8c/photo.jpg?sz=128", "display_name": "gregory michael travis", "link": "https://stackoverflow.com/users/5265393/gregory-michael-travis"}, "edited": false, "score": 0, "creation_date": 1569873911, "post_id": 58158274, "comment_id": 102729952, "body": "No, you&#39;re totally right, that hadn&#39;t occurred to me.  The delta only needs to apply to one type."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 3, "last_activity_date": 1569784098, "last_edit_date": 1569784098, "creation_date": 1569783370, "answer_id": 58158274, "question_id": 58158165, "link": "https://stackoverflow.com/questions/58158165/im-having-trouble-with-a-multi-parameter-typeclass/58158274#58158274", "title": "I&#39;m having trouble with a multi-parameter typeclass", "body": "<p>The compiler has to account for the possibility that, later on, and possibly in another module, someone defines something like</p>\n\n<pre><code>instance Foo Double (Baz a) where\n  bar i (Baz _) = i + 1\n</code></pre>\n\n<p>In such case, <code>putStrLn $ show $ bar 3 (Baz 4)</code> could print <code>3</code> or <code>4.0</code> depending on the type of the literal <code>3</code>. Hence, it is rejected.</p>\n\n<p>Note that the error mentions ambiguity, not the failure of unification:</p>\n\n<pre><code>prog.hs:16:14: error:\n    \u2022 Ambiguous type variable \u2018a0\u2019 arising from a use of \u2018show\u2019\n      prevents the constraint \u2018(Show a0)\u2019 from being solved.\n      Probable fix: use a type annotation to specify what \u2018a0\u2019 should be.\n</code></pre>\n\n<p>In your GHCi session, <code>&gt; :t 3 + 4</code> can output <code>Num a =&gt; a</code> since it is possible for that to report a polymorphic type. If you run <code>&gt; :t show (3+4)</code> the result is a monomorphic <code>String</code>, and that forced GHCi to choose a specific type <code>a</code> to instantiate the constants with. It happens that <code>Num</code> receives special care by Haskell, and some \"default\" types are tried when that happens. This is indeed called \"defaulting\", and only happens with a few <code>Prelude</code> classes. It does not apply to custom classes such as your <code>Foo</code>, where instead an ambiguity is reported.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5265393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ytdRdb17wKw/AAAAAAAAAAI/AAAAAAAAC8w/yhBqZLv7u8c/photo.jpg?sz=128", "display_name": "gregory michael travis", "link": "https://stackoverflow.com/users/5265393/gregory-michael-travis"}, "edited": false, "score": 0, "creation_date": 1569935884, "post_id": 58177901, "comment_id": 102750981, "body": "Thank you as well for this very clear answer.  In addition to understanding it better, your first footnote made me realize that needing annotations probably won&#39;t be a burden most of the time."}, {"owner": {"reputation": 31, "user_id": 5265393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ytdRdb17wKw/AAAAAAAAAAI/AAAAAAAAC8w/yhBqZLv7u8c/photo.jpg?sz=128", "display_name": "gregory michael travis", "link": "https://stackoverflow.com/users/5265393/gregory-michael-travis"}, "edited": false, "score": 0, "creation_date": 1569936038, "post_id": 58177901, "comment_id": 102751077, "body": "One thing I am curious about -- your fully polymorphic version unifies with the call site, but so does the hypothetical <code>Foo Double (Baz a)</code> and <code>Foo a (Baz Float)</code> -- why does this not cause an ambiguity?  Is it because the fully polymorphic one includes/subsumes the two more specific ones?"}, {"owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "reply_to_user": {"reputation": 31, "user_id": 5265393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ytdRdb17wKw/AAAAAAAAAAI/AAAAAAAAC8w/yhBqZLv7u8c/photo.jpg?sz=128", "display_name": "gregory michael travis", "link": "https://stackoverflow.com/users/5265393/gregory-michael-travis"}, "edited": false, "score": 0, "creation_date": 1569969203, "post_id": 58177901, "comment_id": 102765352, "body": "@gregory Yes, because it&#39;s invalid to have overlapping instances (without extensions) when the polymorphic instance exists then no more-specific one can exist. So when the compiler tries to solve the polymorphic constraint <code>Foo a (Bar b)</code> it only has to look for a polymorphic instance; if it finds a general one, then no specific ones can exist so there&#39;s no ambiguity, and if it doesn&#39;t find a general one then it can throw an error because it would be ambiguous."}], "tags": [], "owner": {"reputation": 56659, "user_id": 450128, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2f72b3fdc99fe9fd1bbeb2f9da1d2c0a?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/450128/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1569902884, "creation_date": 1569902884, "answer_id": 58177901, "question_id": 58158165, "link": "https://stackoverflow.com/questions/58158165/im-having-trouble-with-a-multi-parameter-typeclass/58177901#58177901", "title": "I&#39;m having trouble with a multi-parameter typeclass", "body": "<p><code>standaloneBar</code> doesn't really have the same type. It is <code>a -&gt; b -&gt; a</code>, which is the same type as the type given for <code>bar</code> in the <strong>class</strong>. But the problem isn't that <code>bar 3 (Baz 4)</code> is failing to match the general type from the class, rather it is that <code>bar 3 (Baz 4)</code> is failing to uniquely determine an <strong>instance</strong>.</p>\n\n<p>When type classes are involved, type inference doesn't just have to determine that there is <em>some</em> assignment of type variables that is well-typed, it has to actually decide which specific instance will be selected<sup>1</sup>. Different instances could have very different behaviour, so the choice matters.</p>\n\n<p>The type the compiler infers for the use of <code>bar</code> in your code is <code>bar :: (Foo a (Baz b), Num a, Num b, Show a) =&gt; a -&gt; Baz b -&gt; a</code> (the <code>Show</code> constraint comes from the result being passed to <code>show</code>). Now, the version of <code>bar</code> from the <code>Foo Int (Baz a)</code> instance has type <code>Int -&gt; Baz a -&gt; Int</code>, which obviously <em>does</em> unify with your usage of <code>bar</code>. But other possible instances might also unify. There could be <code>Foo Double (Baz a)</code>, or <code>Foo a (Baz Float)</code>, or any number of other possibilities.</p>\n\n<p>It would be possible for the compiler to work by picking <code>Foo Int (Baz a)</code>, since that't the only instance in scope and it <em>does</em> fit. However the rules of the language are designed so that the compiler actually should not consider the instances which are in scope when it determines which instance is needed! It is required that the appropriate instance is uniquely clear from the context of the call, and <em>then</em> the compiler checks whether such an instance is actually available. So there would need to be a polymorphic <code>Foo a (Baz b)</code> instance in scope for this code to work. And indeed, if I replace your instance with:</p>\n\n<pre><code>instance Foo a (Baz b) where\n  bar i _ = i\n</code></pre>\n\n<p>Then your code compiles and runs without error!</p>\n\n<p>So your original code isn't specific enough about the types to uniquely determine that <code>Foo Int (Baz b)</code> is the required instance, so the compiler reports errors about ambiguous types. The problem isn't that it your use of <code>bar</code> doesn't unify with <code>a -&gt; b -&gt; a</code>, or even that it doesn't unify with <code>Int -&gt; Baz b -&gt; Int</code>; it <em>does</em> unify with both. Rather the problem is that it isn't <em>specific</em> to the type <code>Int -&gt; Baz b -&gt; Int</code>. Adding additional type information resolves that, and is required.</p>\n\n<p>The reason for this language design decision is so that variations in which instances are in scope (say by adding and removing imports) can never change the meaning of valid code into other valid code. If you remove a required instance the code will stop working, and if you add a conflicting instance the code will cause an error, but if you have code that compiles with 2 instances in scope by using 1 of them, you can never make it continue to work and use the other one solely by changing your imports. The intent is that the choice of instance should be inherently required by your code supplied by the programmer, the choice should not be just accidentally made by the compiler.</p>\n\n<hr>\n\n<p>It's worth noting that there is a major exception to this rule of instance selection not being based on which instances are actually in scope<sup>2</sup>. That is type defaulting.</p>\n\n<p>Simple expressions involving numeric literals would almost always be ambiguous under the rules I described above. An example is <code>show $ 1 + 2</code>. The <code>+</code> and the <code>show</code> in that have differing behaviour for different instances (<code>+</code> isn't even fully associative for floating point numbers for example!), so by the reasoning above this code should be invalid, and the programmer should be required to write something like <code>show $ 1 + (2 :: Int)</code>.</p>\n\n<p>The language designers considered this to be too onerous, so the defaulting rules were defined. They're described in more detail in <a href=\"https://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4\" rel=\"nofollow noreferrer\">the Haskell Report</a>, but basically they allow ambiguous type variables to be defaulted if there is a constraint involving one of the \"numeric\" type classes (like <code>Num</code>, <code>Integral</code>, etc) from the Prelude, and the ambiguous type does not have any type class constraints <em>except</em> those involving classes defined in the Prelude. If these (very conservative) constraints are met, then some default types will be tried (the default list of default types is <code>Integer, Double</code>, but it can be customised; the conditions under which defaulting will be tried cannot be customised, however), and if one of those allows instances to be found for all constraints then the code will be accepted with the compiler choosing those instances for you.</p>\n\n<p>This means that the ambiguous type variables <code>a</code> and <code>b</code> in <code>bar :: (Foo a (Baz b), Num a, Num b, Show a) =&gt; a -&gt; Baz b -&gt; a</code> cannot be defaulted; they're involved in the constraint <code>Foo a (Baz b)</code>, which is not for a class defined in the Prelude.</p>\n\n<p>But when you use <code>standaloneBar</code> (or you use my more polymorphic <code>Foo a (Baz b)</code> instance above), then the only constraints that the compiler is unable to resolve are <code>(Num a, Num b, Show a)</code>. Here all of the constraints are Prelude classes, and <code>Num</code> is a \"numeric class\", so the compiler tries <code>Integer</code> for both <code>a</code> and <code>b</code>, which works and allows the code to compile.</p>\n\n<hr>\n\n<p><sup>1</sup> Unless the type class constraint can be \"passed on\" in the signature of the caller, but the caller here is <code>main :: IO ()</code>, so that option isn't available.</p>\n\n<p><sup>2</sup> If you enable further extensions such as <code>OverlappingInstances</code> then there are more exceptions, but I'm not describing that here.</p>\n"}], "owner": {"reputation": 31, "user_id": 5265393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ytdRdb17wKw/AAAAAAAAAAI/AAAAAAAAC8w/yhBqZLv7u8c/photo.jpg?sz=128", "display_name": "gregory michael travis", "link": "https://stackoverflow.com/users/5265393/gregory-michael-travis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1569902884, "creation_date": 1569782482, "last_edit_date": 1569783044, "question_id": 58158165, "link": "https://stackoverflow.com/questions/58158165/im-having-trouble-with-a-multi-parameter-typeclass", "title": "I&#39;m having trouble with a multi-parameter typeclass", "body": "<p>Calling the 'bar' method of 'Foo', I get an error to the effect\u00a0that it can't unify the types of 3 and 4 because they're overloaded literals.\u00a0 But 'standaloneBar', which has seemingly the same type, works fine.\u00a0 The difference must be the typeclass parameters, but I don't see why this prevents the unification.</p>\n\n<pre><code>{-# LANGUAGE MultiParamTypeClasses #-}\nmodule Main where\n\nclass Foo a b where\n\u00a0 bar :: a -&gt; b -&gt; a\n\ndata Baz a = Baz a\ninstance Foo Int (Baz a) where\n\u00a0 bar i (Baz _) = i\n\nstandaloneBar :: a -&gt; b -&gt; a\nstandaloneBar x _ = x\n\nmain = do\n\u00a0 --putStrLn $ show $ bar 3 (Baz 4) \u00a0 \u00a0 \u00a0 \u00a0 \u00a0-- Can't unify\n\u00a0 putStrLn $ show $ standaloneBar 3 (Baz 4) \u00a0-- Works fine\n\u00a0 putStrLn $ show $ bar (3::Int) (Baz 4) \u00a0 \u00a0 -- Works fine\n  putStrLn $ show $ ((bar 3 (Baz 4)) :: Int) -- Works fine\n</code></pre>\n\n<p>If I add type annotations, then it works fine.</p>\n\n<p>The way I understand unification here, even though 3 and 4 are ambiguous, they can still be unified:</p>\n\n<pre><code>*Util Delta Exp Tmi Util&gt; :t 3\n3 :: Num p =&gt; p\n*Util Delta Exp Tmi Util&gt; :t 4\n4 :: Num p =&gt; p\n*Util Delta Exp Tmi Util&gt; :t 3 + 4\n3 + 4 :: Num a =&gt; a\n</code></pre>\n\n<p>So why can't it do the same for 'bar'?</p>\n\n<p>(I realize that a functional dependency here fixes the problem, but I'm specifically trying to allow for multiple instances that would be prevented by that.)</p>\n"}, {"tags": ["haskell"], "answers": [{"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 1, "last_activity_date": 1569794342, "last_edit_date": 1569794342, "creation_date": 1569784443, "answer_id": 58158409, "question_id": 58157569, "link": "https://stackoverflow.com/questions/58157569/data-types-a-la-carte-injection-on-the-right-questions/58158409#58158409", "title": "&quot;Data Types a la carte&quot; - injection on the right questions", "body": "<blockquote>\n  <p>Why is not declared like this: <code>instance {-# OVERLAPPING #-} =&gt; (f :&lt;: (g :+: f))</code> where ... similar to the injection to the left.</p>\n</blockquote>\n\n<p>The way the original code uses makes an instance head strictly more specific than the other. That is: <code>f :&lt;: (f :+: g)</code> is more specific than <code>f :&lt;: (h :+: g)</code>, since the first only matches a (strict) subset of cases w.r.t. the latter.</p>\n\n<p>This makes the compiler happy: the first instance can be tried. If it matches, great. If it does not match, and it does not unify, we can commit to the second more general instance. (If it does not match but unifies, then we are stuck and we can not commit to either instance.)</p>\n\n<p>Doing it your way increases the possibility that constraint solving gets stuck, since when resolving <code>F :&lt;: (F :+: F)</code> both instances apply. In original code, the first would be applied, since it is more specific.</p>\n\n<blockquote>\n  <p>Second question, is the <code>inj = Inr . inj</code> calling itself recursively?</p>\n</blockquote>\n\n<p>No. The last <code>inj</code> is that define by the instance for <code>f :&lt;: g</code>, so it is a different function. This often happens, e.g.</p>\n\n<pre><code>-- pseudocode\ninstance Show a =&gt; Show (Maybe a) where\n   show Nothing = \"Nothing\"\n   show (Just x) = \"Just \" ++ show x\n</code></pre>\n\n<p>The last line calls the <code>Show a</code> method, and does not recurse.</p>\n"}], "owner": {"reputation": 3229, "user_id": 832783, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c824694b26c4feffa972390f740044f7?s=128&d=identicon&r=PG", "display_name": "costa", "link": "https://stackoverflow.com/users/832783/costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58158409, "answer_count": 1, "score": 4, "last_activity_date": 1569794342, "creation_date": 1569778052, "question_id": 58157569, "link": "https://stackoverflow.com/questions/58157569/data-types-a-la-carte-injection-on-the-right-questions", "title": "&quot;Data Types a la carte&quot; - injection on the right questions", "body": "<p>I am looking at the code specified in this article: <a href=\"http://www.staff.science.uu.nl/~swier004/publications/2008-jfp.pdf\" rel=\"nofollow noreferrer\">http://www.staff.science.uu.nl/~swier004/publications/2008-jfp.pdf</a>, Data types a la carte.</p>\n\n<pre><code>{-# LANGUAGE FlexibleContexts #-}\n{-# LANGUAGE FlexibleInstances #-}\n{-# LANGUAGE MultiParamTypeClasses #-}\n{-# LANGUAGE OverloadedStrings #-}\n{-# LANGUAGE TypeOperators #-}\n{-# LANGUAGE ScopedTypeVariables #-}\n\n\ndata Expr f = In (f (Expr f))\n\ndata Val e = Val Int\ndata Add e = Add e e \ndata Mul x = Mul x x\n\ntype IntExpr = Expr Val\n\ntype AddExpr = Expr Add\n\n\ndata ( f:+:g ) e = Inl (f e)| Inr (g e)\n\nclass (Functor sub, Functor sup) =&gt; sub :&lt;: sup where\n  inj :: sub a -&gt; sup a\n\ninstance Functor sym =&gt; sym :&lt;: sym where\n  inj = id\n\ninstance {-# OVERLAPPING #-} (Functor f, Functor g) =&gt; (f :&lt;: (f :+: g)) where \n  inj = Inl\n\ninstance {-# OVERLAPPING #-} (Functor f, Functor g, Functor h, f :&lt;: g) =&gt; (f :&lt;: (h :+: g)) where\n  inj l = Inr (inj l)\n\naddExample::Expr ( Val :+: Add )\naddExample= In( \n               Inr( \n                   Add\n                   (In (Inl (Val 118)  ) ) \n                   (In (Inl (Val 1219) ) ) \n                  ) \n               )\ninstance Functor Val where\n  fmap f (Val x)=Val x\n\ninstance Functor Add where\n  fmap f (Add e1 e2) = Add (f e1) (f e2)\n\ninstance Functor Mul where\n  fmap f (Mul e1 e2) = Mul (f e1) (f e2)\n\n\ninstance (Functor f, Functor g) =&gt; Functor (f :+: g) where\n  fmap f (Inl e1) = Inl (fmap f e1)\n  fmap f (Inr e2) = Inr (fmap f e2)\n\nfoldExpr::Functor f =&gt; (f a -&gt; a) -&gt; Expr f -&gt; a \nfoldExpr f (In t) = f (fmap (foldExpr f) t)\n\nclass Functor f =&gt; Eval f where\n  evalAlgebra ::f Int -&gt; Int\n\ninstance Eval Val where\n  evalAlgebra (Val x) = x\n\ninstance Eval Add where\n  evalAlgebra (Add e1 e2) = e1 + e2\n\ninstance Eval Mul where\n  evalAlgebra (Mul e1 e2) = e1 * e2\n\ninstance (Eval f, Eval g) =&gt; Eval (f :+: g) where\n  evalAlgebra (Inl x) = evalAlgebra x\n  evalAlgebra (Inr y) = evalAlgebra y\n\n\neval::Eval f =&gt; Expr f -&gt; Int\neval expr = foldExpr evalAlgebra expr\n\ninject::(g :&lt;: f) =&gt; g (Expr f) -&gt; Expr f\ninject = In . inj\n\nval::(Val :&lt;: f) =&gt; Int -&gt; Expr f\nval x = inject (Val x)\n\ninfixl 6 \u2295\n(\u2295):: (Add :&lt;: f) =&gt; Expr f -&gt; Expr f -&gt; Expr f\nx \u2295 y = inject (Add x y) \n\ninfixl 7 \u2297\n(\u2297):: (Mul :&lt;: f) =&gt; Expr f -&gt; Expr f -&gt; Expr f\nx \u2297 y = inject (Mul x y)\n\nxxx :: Int -&gt; Expr (Val :+: (Mul :+: Add) ) \nxxx x = val 100 \u2297 val 5\n</code></pre>\n\n<p>I have trouble wrapping my head around the injection to the right. Two questions:</p>\n\n<ul>\n<li><p>Why is not declared like this: <code>instance {-# OVERLAPPING #-} =&gt; (f :&lt;: (g :+: f)) where ...</code> similar to the injection to the left.</p></li>\n<li><p>Second question, is the <code>inj = Inr . inj</code> calling itself recursively?</p></li>\n</ul>\n"}, {"tags": ["haskell", "haskell-hedgehog"], "comments": [{"owner": {"reputation": 158, "user_id": 2512259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a349b2b2439bbd5e39f6944fa1f5bdf?s=128&d=identicon&r=PG", "display_name": "Sebastiaan", "link": "https://stackoverflow.com/users/2512259/sebastiaan"}, "edited": false, "score": 0, "creation_date": 1569876946, "post_id": 58157292, "comment_id": 102731065, "body": "What is <code>Var</code> here?"}, {"owner": {"reputation": 4424, "user_id": 34996, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ca2e2c3442a73f84394abb35d6236b12?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/34996/magnus"}, "reply_to_user": {"reputation": 158, "user_id": 2512259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a349b2b2439bbd5e39f6944fa1f5bdf?s=128&d=identicon&r=PG", "display_name": "Sebastiaan", "link": "https://stackoverflow.com/users/2512259/sebastiaan"}, "edited": false, "score": 0, "creation_date": 1569963570, "post_id": 58157292, "comment_id": 102763676, "body": "<code>Var</code> is documented <a href=\"https://hackage.haskell.org/package/hedgehog-1.0.1/docs/Hedgehog.html#t:Var\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 4424, "user_id": 34996, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ca2e2c3442a73f84394abb35d6236b12?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/34996/magnus"}, "reply_to_user": {"reputation": 158, "user_id": 2512259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a349b2b2439bbd5e39f6944fa1f5bdf?s=128&d=identicon&r=PG", "display_name": "Sebastiaan", "link": "https://stackoverflow.com/users/2512259/sebastiaan"}, "edited": false, "score": 0, "creation_date": 1570022631, "post_id": 58157292, "comment_id": 102782866, "body": "Ouch, seems to be a known, and unfixed, issue: <a href=\"https://github.com/hedgehogqa/haskell-hedgehog/issues/113\" rel=\"nofollow noreferrer\">github.com/hedgehogqa/haskell-hedgehog/issues/113</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4424, "user_id": 34996, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ca2e2c3442a73f84394abb35d6236b12?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/34996/magnus"}, "edited": false, "score": 0, "creation_date": 1592231071, "post_id": 62143436, "comment_id": 110343400, "body": "The <code>action</code> <i>does</i> specify exactly how many items will be in the list, so that&#39;s not a problem in this case. In any case, I managed to work around this by switching to <code>quickcheck-state-machine</code>."}], "tags": [], "owner": {"reputation": 11, "user_id": 12295011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90d19db21e558e32d88aed3aff135039?s=128&d=identicon&r=PG&f=1", "display_name": "user12295011", "link": "https://stackoverflow.com/users/12295011/user12295011"}, "is_accepted": false, "score": 1, "last_activity_date": 1591061502, "creation_date": 1591061502, "answer_id": 62143436, "question_id": 58157292, "link": "https://stackoverflow.com/questions/58157292/returning-a-list-and-getting-to-the-items-in-hedgehog-state-machine/62143436#62143436", "title": "Returning a list and getting to the items in Hedgehog state machine", "body": "<p>This can't work, but there's a good reason why.</p>\n\n<p>Think of state machine testing as automatic writing a test programs, where each <code>Var a Symbolic</code> as a binding in the program.</p>\n\n<p>So imagine I was testing a little buffer, with operations <code>create :: Size -&gt; Buf</code>, <code>put :: Buf -&gt; Int -&gt; IO ()</code> and <code>get :: Buf -&gt; IO Int</code>.</p>\n\n<p>I could hand roll a unit test.</p>\n\n<pre><code>test :: TestT IO ()\ntest = do\n  buf &lt;- create 3\n  put buf 5\n  put buf 10\n  put buf 20\n  retrieved &lt;- get buf\n  retrieved === Just 5\n</code></pre>\n\n<p>with appropriate commands, hedgehog could also generate this exact test as</p>\n\n<pre><code>test :: TestT IO ()\ntest = do\n  Var 1 = create 3\n  Var 2 = put (Var 1) 5\n  Var 3 = put (Var 1) 10\n  Var 4 = put (Var 1) 20\n  Var 5 = get (Var 1)\n  Var 5 === Just 5\n</code></pre>\n\n<p>So each execution is given a variable name.</p>\n\n<p>When you way you want something like this:</p>\n\n<pre><code>splitNames :: Var [UUID] v -&gt; [Var UUID v]\n</code></pre>\n\n<p>What you're asking for is essentially each return from the execution list to be given its own variable name. The rest of the program could then use those variable names. The best way I can think to show this is:</p>\n\n<pre><code>test :: TestT IO ()\ntest = do\n  Var 1 = returnSomeNumberOfItems\n  Var 2 = Var 1 ! 0\n  Var 3 = Var 1 ! 1\n</code></pre>\n\n<p>Now the issue here is that we just don't know how long the list returned by <code>returnSomeNumberOfItems</code> is; we haven't run it yet; there's no way to do this safely. </p>\n"}], "owner": {"reputation": 4424, "user_id": 34996, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ca2e2c3442a73f84394abb35d6236b12?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/34996/magnus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1591061502, "creation_date": 1569775740, "question_id": 58157292, "link": "https://stackoverflow.com/questions/58157292/returning-a-list-and-getting-to-the-items-in-hedgehog-state-machine", "title": "Returning a list and getting to the items in Hedgehog state machine", "body": "<p>I have a model for a state machine that is</p>\n\n<pre><code>newtype State (v :: * -&gt; *) = State (M.Map (Var UUID v) DataPerItem)\n    deriving (Eq, Show)\n</code></pre>\n\n<p>I then have a <code>Command gen exec [Update update]</code> with <code>exec</code> returning a list of <code>UUID</code>, i.e. it has type</p>\n\n<pre><code>exec :: action -&gt; m [UUID]\n</code></pre>\n\n<p>which in turns mean that <code>update</code> needs a type like this</p>\n\n<pre><code>update :: State v -&gt; action -&gt; Var [UUID] v -&gt; State V\n</code></pre>\n\n<p>AFAICS I need to, in order to actually update my model, turn that <code>Var [UUID] v</code> into <code>[Var UUID v]</code>. I've been staring at the functions in Hedgehog for a while now but nothing jumps out... or am I, once again, thinking about it all wrong? :)</p>\n"}, {"tags": ["haskell", "haskell-stack"], "comments": [{"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 1, "creation_date": 1569771315, "post_id": 58156569, "comment_id": 102695990, "body": "The error is &quot;access denied&quot;, so could it be that the file in question somehow got restricted access control list, perhaps as a result of first downloading it as admin? Have you tried to nuke the stack cache?"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "reply_to_user": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 0, "creation_date": 1569771633, "post_id": 58156569, "comment_id": 102696074, "body": "@FyodorSoikin Yes, I have tried to uninstall Stack, wiped <code>C:\\sr</code> and <code>%LOCALAPPDATA%\\Programs\\stack</code>, as well as the local <code>.stack-work</code> directory, rebooted, installed Stack again; it makes no difference."}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "reply_to_user": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 0, "creation_date": 1570482332, "post_id": 58156569, "comment_id": 102920622, "body": "@FyodorSoikin Thanks to you, I was able to resolve the issue, as I&#39;ve described in my answer. I do feel, however, that the solution is thanks to you, so if you wish to add an answer, I&#39;ll be happy to accept it."}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 1, "creation_date": 1570482655, "post_id": 58156569, "comment_id": 102920725, "body": "No, that&#39;s fine. Amassing reputation is not my goal, and I didn&#39;t actually have an answer, just a hint of what to dig for."}], "answers": [{"comments": [{"owner": {"reputation": 3279, "user_id": 1231686, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d259a07003c8f42a90ecb426641e478b?s=128&d=identicon&r=PG", "display_name": "Lumen", "link": "https://stackoverflow.com/users/1231686/lumen"}, "edited": false, "score": 0, "creation_date": 1587028015, "post_id": 58277125, "comment_id": 108349309, "body": "I can confirm that. On my machine, there are two copies of <code>pthread.dll</code> below <code>C:\\Windows</code>: one is in <code>System32</code> and one is in a subdirectory of <code>System32\\DriverStore</code>. My standard user doesn\u2019t have any permissions for the file in <code>C:\\Windows\\System32</code>. It seems to be shipped with a driver for an Intel broadband modem on my HP Elitebook."}], "tags": [], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "is_accepted": true, "score": 3, "last_activity_date": 1570482259, "creation_date": 1570482259, "answer_id": 58277125, "question_id": 58156569, "link": "https://stackoverflow.com/questions/58156569/stack-ghci-cant-load-pthread-unless-running-as-administrator/58277125#58277125", "title": "stack ghci can&#39;t load pthread unless running as Administrator", "body": "<p>Thanks to Fyodor Soikin, I was able to track down the issue.</p>\n\n<h1>Summary</h1>\n\n<p>Give your user account <code>Read &amp; execute</code> permissions to <code>pthread.dll</code>.</p>\n\n<h1>Details</h1>\n\n<p>I didn't understand why this new machine of mine exhibited this problem while another machine with the same OS and basically the same setup didn't have any problems.</p>\n\n<p>On close inspection, it turned out that that other machine <em>didn't have a <code>pthread.dll</code> file at all</em>.</p>\n\n<p>It did have quite a few copies of <code>pthread.h</code>, though, and I suppose that this was enough to enable <em>Stack</em> to build the code.</p>\n\n<p>The new machine had <code>pthread.dll</code> in a few places, including a subdirectory of <code>C:\\Windows\\System32\\DriverStore</code>, which implies to me that this file originally arrived via a driver that the new machine uses, but the old machine didn't have. It also has a copy of <code>pthread.dll</code> in <code>C:\\Windows\\System32</code>, but this file was extraordinarily locked down. My own user account didn't have <code>Read</code> or <code>Execute</code> rights to the file, but I could view and change the permissions in <em>Administrator</em> mode.</p>\n\n<p>I gave the local <em>Users</em> group <code>Read &amp; execute</code> rights to the file, after which everything seems to work as it's previously done on my other machines.</p>\n"}], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 58277125, "answer_count": 1, "score": 5, "last_activity_date": 1570482259, "creation_date": 1569770301, "question_id": 58156569, "link": "https://stackoverflow.com/questions/58156569/stack-ghci-cant-load-pthread-unless-running-as-administrator", "title": "stack ghci can&#39;t load pthread unless running as Administrator", "body": "<p>When I run <code>stack ghci</code> on a brand-new project, it fails to load:</p>\n\n<pre><code>$ stack new repro simple\nDownloading template \"simple\" to create project \"repro\" in repro\\ ...\n</code></pre>\n\n<p>(Additional output omitted to make the question more readable.)</p>\n\n<pre><code>$ cd repro/\n\n$ stack ghci\nUsing main module: 1. Package `repro' component repro:exe:repro with main-is file: C:\\Users\\mark\\Desktop\\repro\\src\\Main.hs\nBuilding all executables for `repro' once. After a successful build of all of them, only specified executables will be rebuilt.\nrepro&gt; configure (exe)\nConfiguring repro-0.1.0.0...\nrepro&gt; initial-build-steps (exe)\nConfiguring GHCi with the following packages: repro\nGHCi, version 8.6.5: http://www.haskell.org/ghc/  :? for help\n&lt;command line&gt;: user specified .o/.so/.DLL could not be loaded (addDLL: pthread or dependencies not loaded. (Win32 error 5))\nWhilst trying to load:  (dynamic) pthread\nAdditional directories searched:   C:\\\\Users\\\\mark\\\\AppData\\\\Local\\\\Programs\\\\stack\\\\x86_64-windows\\\\msys2-20180531\\\\mingw64\\\\lib\n   C:\\\\Users\\\\mark\\\\AppData\\\\Local\\\\Programs\\\\stack\\\\x86_64-windows\\\\msys2-20180531\\\\mingw64\\\\bin\n   C://Users//mark//AppData//Local//Programs//stack//x86_64-windows//ghc-8.6.5//mingw//bin/\n   C://Users//mark//AppData//Local//Programs//stack//x86_64-windows//ghc-8.6.5//mingw//bin/../lib/\n   C://Users//mark//AppData//Local//Programs//stack//x86_64-windows//ghc-8.6.5//mingw//bin/../lib/gcc/x86_64-w64-mingw32/7.2.0/\n   C:/Users/mark/AppData/Local/Programs/stack/x86_64-windows/ghc-8.6.5/mingw/bin/../lib/gcc/x86_64-w64-mingw32/7.2.0/\n   C:/Users/mark/AppData/Local/Programs/stack/x86_64-windows/ghc-8.6.5/mingw/bin/../lib/gcc/\n   C:/Users/mark/AppData/Local/Programs/stack/x86_64-windows/ghc-8.6.5/mingw/bin/../lib/gcc/x86_64-w64-mingw32/7.2.0/../../../../x86_64-w64-mingw32/lib/../lib/\n   C:/Users/mark/AppData/Local/Programs/stack/x86_64-windows/ghc-8.6.5/mingw/bin/../lib/gcc/x86_64-w64-mingw32/7.2.0/../../../../lib/\n   C:/Users/mark/AppData/Local/Programs/stack/x86_64-windows/ghc-8.6.5/mingw/bin/../lib/gcc/x86_64-w64-mingw32/7.2.0/../../../../x86_64-w64-mingw32/lib/\n   C:/Users/mark/AppData/Local/Programs/stack/x86_64-windows/ghc-8.6.5/mingw/bin/../lib/gcc/x86_64-w64-mingw32/7.2.0/../../../\n   C:\\Windows\\system32\n</code></pre>\n\n<p>This is on Windows 10 (x64). I have another machine with a similar OS configuration and stack version, and on that machine, I have no problems. This seems to be an environment issue, but I can't figure out what it is.</p>\n\n<p>I'm running from <em>Git Bash</em>, and if I run it as Administrator, it works:</p>\n\n<pre><code>$ stack ghci\nUsing main module: 1. Package `repro' component repro:exe:repro with main-is file: C:\\Users\\mark\\Desktop\\repro\\src\\Main.hs\nBuilding all executables for `repro' once. After a successful build of all of them, only specified executables will be rebuilt.\nrepro&gt; initial-build-steps (exe)\nConfiguring GHCi with the following packages: repro\nGHCi, version 8.6.5: http://www.haskell.org/ghc/  :? for help\n[1 of 1] Compiling Main             ( C:\\Users\\mark\\Desktop\\repro\\src\\Main.hs, interpreted )\nOk, one module loaded.\nLoaded GHCi configuration from C:\\\\Users\\\\mark\\\\AppData\\\\Local\\\\Temp\\\\haskell-stack-ghci\\\\2524149e\\\\ghci-script\n*Main&gt;\n</code></pre>\n\n<p>I've been working with Stack for years on Windows, and this is the first time I've have to run as Administrator, and it really bothers me. What could be the issue, and how do I address it?</p>\n\n<p>FWIW, this is the Stack version:</p>\n\n<pre><code>$ stack --version\nVersion 2.1.3, Git revision 0fa51b9925decd937e4a993ad90cb686f88fa282 (7739 commits) x86_64 hpack-0.31.2\n</code></pre>\n\n<p>This is the same version as I have on the other machine where the issue doesn't appear.</p>\n\n<p>Examples here are copied from running <em>Git Bash</em>, but the issue is the same if I use <code>cmd</code>.</p>\n"}, {"tags": ["haskell", "currying", "pointfree", "tacit-programming"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1569749920, "post_id": 58154012, "comment_id": 102691048, "body": "First you need to realize that every function in Haskell has at most one argument."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 1, "creation_date": 1569843585, "post_id": 58154012, "comment_id": 102715719, "body": "@bipll and <a href=\"http://conal.net/blog/posts/everything-is-a-function-in-haskell\" rel=\"nofollow noreferrer\">at least</a> one argument. IOW, every function has <i>exactly</i> one argument."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1569859919, "post_id": 58154012, "comment_id": 102724250, "body": "@leftaroundabout <code>zero = 0</code>"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 1, "creation_date": 1569860799, "post_id": 58154012, "comment_id": 102724607, "body": "@bipll that&#39;s not a function. there&#39;s no <code>-&gt;</code> in <code>zero</code>&#39;s type."}], "answers": [{"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569763540, "post_id": 58154031, "comment_id": 102694012, "body": "that&#39;s not what is asked in the question, though."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569763585, "post_id": 58154031, "comment_id": 102694021, "body": "@WillNess: it asks to make a curried function, not a point-free one."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569763597, "post_id": 58154031, "comment_id": 102694024, "body": "look at the types. :) it&#39;s not the first time an asker is confused about the terminology."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569764207, "post_id": 58154031, "comment_id": 102694173, "body": "@WillNess: I honestly don&#39;t see what the types do here :) especially since Haskell&#39;s syntax already is curried, and making something point-free should of course not alter the types."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569764323, "post_id": 58154031, "comment_id": 102694210, "body": "the types of <code>prod&#39;</code> and <code>prod&#39;&#39;</code> are both <code>Integer-&gt;Integer-&gt;Integer-&gt;Integer-&gt;Integer</code>. the types of your partially applied examples are different. so I interpreted this as OP&#39;s confusion about terminology."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569764325, "post_id": 58154031, "comment_id": 102694214, "body": "Furthermore I don&#39;t see any proof of confusion with point-free either. It is not strange that people that come from for example JavaScript, think that <code>prod x y z t = ...</code> is equivalent to <code>func prod(x, y, z, y) { ... }</code>, and thus aim to make something like <code>prod(x) { ... }</code> to do it. My Occam&#39;s razor sees that as a more logical explanation (since Haskell&#39;s syntax is a bit &quot;overconvenient&quot; by some)."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569764412, "post_id": 58154031, "comment_id": 102694233, "body": "@WillNess: of course they are, these are only to demonstrate that we can do currying. It thus demonstrates that we can call <code>prod 2</code> in the first place. Since in JavaScript (to continue on the example), calling <code>prod(2)</code> on a <code>func prod (x, y, z, t) { ... }</code> would usually end up with an error."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569764815, "post_id": 58154031, "comment_id": 102694332, "body": "a nitpick: we don&#39;t &quot;do&quot; currying, we use it; Haskell <i>the language</i> is what&#39;s curried -- as you write, &quot;all functions in Haskell are [already and irrevocably --wn] automatically curried&quot;. (the usual talk of <code>(a,b)-&gt;c ==&gt; a-&gt;b-&gt;c</code> being &quot;currying&quot; just adds to the confusion.)"}, {"owner": {"reputation": 43, "user_id": 1998109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afb1d22bddee0986ad3095a5da97eef?s=128&d=identicon&r=PG", "display_name": "moliverac8", "link": "https://stackoverflow.com/users/1998109/moliverac8"}, "edited": false, "score": 0, "creation_date": 1569770075, "post_id": 58154031, "comment_id": 102695660, "body": "I get that Haskell actually only receives one argument and is returning functions until it reaches the last argument and then returns the actual value. That&#39;s why I thought about doing it like this but its not working and I can&#39;t understand why:                                                                                                prod&#39;&#39; :: Integer-&gt;Integer-&gt;Integer-&gt;Integer-&gt;Integer     prod&#39;&#39; x y = (<i>) ((</i>) (x*y))"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 43, "user_id": 1998109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afb1d22bddee0986ad3095a5da97eef?s=128&d=identicon&r=PG", "display_name": "moliverac8", "link": "https://stackoverflow.com/users/1998109/moliverac8"}, "edited": false, "score": 0, "creation_date": 1569770354, "post_id": 58154031, "comment_id": 102695728, "body": "@moliverac8: well you can make it entirely &quot;pointfree&quot; with <code>prod = ((((*) .) . (*)) .) . (*)</code>, or with one argument, you can use <code>prod x = ((*) .) . (*) . (x *)</code>."}, {"owner": {"reputation": 43, "user_id": 1998109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afb1d22bddee0986ad3095a5da97eef?s=128&d=identicon&r=PG", "display_name": "moliverac8", "link": "https://stackoverflow.com/users/1998109/moliverac8"}, "edited": false, "score": 0, "creation_date": 1569770699, "post_id": 58154031, "comment_id": 102695823, "body": "Hmm, I don&#39;t know what that term &quot;pointfree&quot; means. I&#39;ll investigate it"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 43, "user_id": 1998109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afb1d22bddee0986ad3095a5da97eef?s=128&d=identicon&r=PG", "display_name": "moliverac8", "link": "https://stackoverflow.com/users/1998109/moliverac8"}, "edited": false, "score": 0, "creation_date": 1569771275, "post_id": 58154031, "comment_id": 102695981, "body": "@moliverac8 &quot;<a href=\"https://stackoverflow.com/questions/tagged/pointfree\">pointfree</a>&quot; means &quot;without explicit arguments&quot;, like your <code>prod&#39;</code> does not name <code>t</code>, and <code>prod&#39;&#39;</code> does not name <code>t</code> nor <code>z</code>. see the <a href=\"https://stackoverflow.com/tags/pointfree/info\">tag info page</a>. another name for it is &quot;<a href=\"https://stackoverflow.com/questions/tagged/tacit-programming\">tacit-programming</a>&quot; (judging from that tag&#39;s description)."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 5, "last_activity_date": 1569770700, "last_edit_date": 1569770700, "creation_date": 1569749912, "answer_id": 58154031, "question_id": 58154012, "link": "https://stackoverflow.com/questions/58154012/currying-in-haskell-with-2-arguments/58154031#58154031", "title": "Currying in Haskell with 2+ arguments", "body": "<blockquote>\n  <p>This is the uncurried function:</p>\n\n<pre><code>prod :: Integer -&gt; Integer -&gt; Integer -&gt; Integer -&gt; Integer\nprod x y z t = x * y * z * t\n</code></pre>\n</blockquote>\n\n<p>This is <em>already</em> a curried function. In fact all functions in Haskell are automatically curried. Indeed, you here wrote a function that looks like:</p>\n\n<pre><code>prod :: Integer -&gt; (Integer -&gt; (Integer -&gt; (Integer -&gt; Integer)))\n</code></pre>\n\n<p>Haskell will thus produce a function that looks like:</p>\n\n<pre><code>prod :: Integer -&gt; (Integer -&gt; (Integer -&gt; (Integer -&gt; Integer)))\nprod = \\x -&gt; (\\y -&gt; (\\z -&gt; (\\t -&gt; x * y * z * t)))\n</code></pre>\n\n<p>Indeed, we can for example generate such function:</p>\n\n<pre><code>prod2 = prod 2\n</code></pre>\n\n<p>This will have type:</p>\n\n<pre><code>prod2 :: Integer -&gt; (Integer -&gt; (Integer -&gt; Integer))\nprod2 = prod 2\n</code></pre>\n\n<p>and we can continue with:</p>\n\n<pre><code>prod2_4 :: Integer -&gt; (Integer -&gt; Integer)\nprod2_4 = prod2 4\n</code></pre>\n\n<p>and eventually:</p>\n\n<pre><code>prod2_4_6 :: Integer -&gt; Integer\nprod2_4_6 = prod2_4 6\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>The function <code>prod'</code> with:</p>\n\n<pre><code>prod'' x y = (*) ((*) (x*y))\n</code></pre>\n\n<p>Since that means you multiply <code>(*) (x*y)</code> with the next parameter. But <code>(*) (x*y)</code> is a function. You can only multiply numbers. Strictly speaking you can make functions numbers. But the Haskell compiler thus complains that:</p>\n\n<pre><code>Prelude&gt; prod'' x y = (*) ((*) (x*y))\n\n&lt;interactive&gt;:1:1: error:\n    \u2022 Non type-variable argument in the constraint: Num (a -&gt; a)\n      (Use FlexibleContexts to permit this)\n    \u2022 When checking the inferred type\n        prod'' :: forall a.\n                  (Num (a -&gt; a), Num a) =&gt;\n                  a -&gt; a -&gt; (a -&gt; a) -&gt; a -&gt; a\n</code></pre>\n\n<p>It thus says that you here aim to perform an operation with a function <code>a -&gt; a</code> as first operand, but that this function is not an instance of the <code>Num</code> typeclass.</p>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 4, "last_activity_date": 1569827285, "last_edit_date": 1569827285, "creation_date": 1569754488, "answer_id": 58154520, "question_id": 58154012, "link": "https://stackoverflow.com/questions/58154012/currying-in-haskell-with-2-arguments/58154520#58154520", "title": "Currying in Haskell with 2+ arguments", "body": "<p>What you have is</p>\n\n<pre><code>prod x y z t  =    x * y * z * t\n              =   (x * y * z) * t\n              =  (*) (x * y * z) t\n</code></pre>\n\n<p>Hence by <em>eta reduction</em> (where we replace <code>foo x = bar x</code> with <code>foo = bar</code>)</p>\n\n<pre><code>prod x y z    =  (*) (x * y * z)\n              =  (*) ( (x * y) * z )\n              =  (*) ( (*) (x * y) z )\n              =  ((*) . (*) (x * y)) z \n</code></pre>\n\n<p>so that by eta reduction again,</p>\n\n<pre><code>prod x y      =   (*) . (*) (x * y)\n</code></pre>\n\n<p>Here <code>(.)</code> is the function composition operator, defined as</p>\n\n<pre><code>(f . g) x  =  f (g x)\n</code></pre>\n\n<p>What you're asking about is known as <em>point-free style</em>. \"Point-free\" means \"without explicitly mentioning the [implied] arguments\" (\"point\" is a mathematician's jargon for \"argument\" here).</p>\n\n<p>\"Currying\" is an orthogonal issue, although Haskell being a curried <em>language</em> makes such definitions -- and partial application ones, shown in Willem's answer -- easier to write. \"Currying\" means functions take their arguments one at a time, so it is easy to partially apply a function to a value.</p>\n\n<p>We can continue the process of pulling the last argument <em>out</em> so it can be eliminated by eta reduction further. But it usually rapidly leads to more and more obfuscated code, like <code>prod = ((((*) .) . (*)) .) . (*)</code>. </p>\n\n<p>That's because written code is a one-dimensional encoding of an inherently two-dimensional (or even higher-dimensional) computational graph structure,</p>\n\n<pre><code>  prod =           \n                  /\n                 *\n                / \\\n               *   \n              / \\\n         &lt;-- *   \n              \\\n</code></pre>\n\n<p>You can experiment with it <a href=\"http://pointfree.io/\" rel=\"nofollow noreferrer\">here</a>. E.g., if <code>(*)</code> were right-associative, we'd get even more convoluted code</p>\n\n<pre><code>\\x y z t -&gt; x * (y * (z * t))\n==\n(. ((. (*)) . (.) . (*))) . (.) . (.) . (*)\n</code></pre>\n\n<p>representing just as clear-looking, just slightly rearranged, graph structure</p>\n\n<pre><code>              / \n         &lt;-- *   \n              \\ /\n               *\n                \\ /\n                 *\n                  \\\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 1998109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5afb1d22bddee0986ad3095a5da97eef?s=128&d=identicon&r=PG", "display_name": "moliverac8", "link": "https://stackoverflow.com/users/1998109/moliverac8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1569827285, "creation_date": 1569749751, "last_edit_date": 1569771440, "question_id": 58154012, "link": "https://stackoverflow.com/questions/58154012/currying-in-haskell-with-2-arguments", "title": "Currying in Haskell with 2+ arguments", "body": "<p>I'm starting to learn Haskell so I need to understand currying also (it's the first time I've seen this technique too). I think I get how it works in some cases where the currification only \"eliminates\" one of the parameters. Like in the next example where I'm trying to calculate the product of 4 numbers.\nThis is the uncurried function:</p>\n\n<pre><code>prod :: Integer-&gt;Integer-&gt;Integer-&gt;Integer-&gt;Integer\nprod x y z t = x * y * z * t\n</code></pre>\n\n<p>This is the curried function:</p>\n\n<pre><code>prod' :: Integer-&gt;Integer-&gt;Integer-&gt;Integer-&gt;Integer\nprod' x y z = (*) (x*y*z)\n</code></pre>\n\n<p>But I don't understand how could I continue this dynamic and do for example the same function with only two arguments and so on:</p>\n\n<pre><code>prod'' :: Integer-&gt;Integer-&gt;Integer-&gt;Integer-&gt;Integer\nprod'' x y =\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1569724174, "post_id": 58151689, "comment_id": 102687150, "body": "As soon as the first definition fails to pattern-match, you already <i>know</i> the argument in the second definition is <i>not</i> empty. <code>notEmpty [] = &quot;False&quot;; notEmpty _ = &quot;True&quot;</code>."}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1569725504, "post_id": 58151689, "comment_id": 102687298, "body": "@chepner But that isn&#39;t &quot;using prelude functions&quot;."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "reply_to_user": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1569738689, "post_id": 58151689, "comment_id": 102689030, "body": "@JosephSible <code>notEmpty [] = const &quot;False&quot; &quot;joe&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 2929507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ud2BO.png?s=128&g=1", "display_name": "bluewolfxD", "link": "https://stackoverflow.com/users/2929507/bluewolfxd"}, "edited": false, "score": 0, "creation_date": 1569724863, "post_id": 58151740, "comment_id": 102687236, "body": "Omg! Can&#180;t believe that! Thanks a lot sir! You saved my day!"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 53, "user_id": 2929507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ud2BO.png?s=128&g=1", "display_name": "bluewolfxD", "link": "https://stackoverflow.com/users/2929507/bluewolfxd"}, "edited": false, "score": 3, "creation_date": 1569725527, "post_id": 58151740, "comment_id": 102687303, "body": "@bluewolfxD If my answer solved your problem, please mark it as accepted with the check mark icon."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 9, "last_activity_date": 1569723927, "creation_date": 1569723927, "answer_id": 58151740, "question_id": 58151689, "link": "https://stackoverflow.com/questions/58151689/haskell-trying-to-implement-null-function-on-if/58151740#58151740", "title": "Haskell trying to implement null function on if", "body": "<p><code>[x]</code> doesn't mean \"a list called <code>x</code>\". It means \"a list with one element, where the one element is called <code>x</code>\". Just use <code>x</code> instead of <code>[x]</code>, and your first way will work:</p>\n\n<pre><code>notEmpty :: [Int] -&gt; [Char]\nnotEmpty x = if (null x) then \"False\" else \"True\"\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 2929507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ud2BO.png?s=128&g=1", "display_name": "bluewolfxD", "link": "https://stackoverflow.com/users/2929507/bluewolfxd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 58151740, "answer_count": 1, "score": 0, "last_activity_date": 1569726414, "creation_date": 1569723293, "last_edit_date": 1569726414, "question_id": 58151689, "link": "https://stackoverflow.com/questions/58151689/haskell-trying-to-implement-null-function-on-if", "title": "Haskell trying to implement null function on if", "body": "<p>So basically i have a question for ym homework that says: \"Create a function that checks if a list is not empty using prelude functions\"\nI saw the null function and i wanted to use it and print the message. \nSo i tried the following:</p>\n\n<pre><code>notEmpty :: [Int] -&gt; [Char]\nnotEmpty [x] = if (null[x]) then \"False\" else \"True\"\n</code></pre>\n\n<p>If i call notEmpty [ ], it gives me this error: Non.Exhaustive patterns in function notEmpty\nafter several learning i came up with this:</p>\n\n<pre><code>notEmpty :: [Int] -&gt; [Char]\nnotEmpty [] = \"False\"\nnotEmpty [x] = if (null[x])then \"False\" else \"True\"\n</code></pre>\n\n<p>but after this, i tried the following input: notEmpty[1,2] and it gave me the same error.</p>\n\n<p>My question is, when i run null [1,2] it gives me False, so what am i doing wrong?</p>\n"}, {"tags": ["haskell", "floating-point"], "comments": [{"owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "edited": false, "score": 0, "creation_date": 1569723408, "post_id": 58151469, "comment_id": 102687077, "body": "I found this <a href=\"https://mail.haskell.org/pipermail/haskell/2003-October/012931.html\" rel=\"nofollow noreferrer\">mail.haskell.org/pipermail/haskell/2003-October/012931.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 2951059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306b73823397b4e4e9b511229689f5e0?s=128&d=identicon&r=PG", "display_name": "Garrison", "link": "https://stackoverflow.com/users/2951059/garrison"}, "is_accepted": false, "score": 3, "last_activity_date": 1569733863, "creation_date": 1569733863, "answer_id": 58152413, "question_id": 58151469, "link": "https://stackoverflow.com/questions/58151469/how-do-i-get-the-floating-point-number-immediately-before-after-a-given-number-i/58152413#58152413", "title": "How do I get the floating-point number immediately before/after a given number in Haskell?", "body": "<p>This algorithm was stolen from mail.haskell.org/pipermail/haskell/2003-October/012931.html</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>import GHC.Float\n\nnextafter1 :: Float -&gt; Float\nnextafter1 0 = 0\nnextafter1 x | GHC.Float.isNaN x = x\nnextafter1 x | GHC.Float.isInfinite x = x\nnextafter1 x = try (abs x)\n  where try d = let d1 = d/2\n                in if x + d1 == x then improve d1 d else try d1\n        improve a b = let middle = (a+b)/2\n                      in if middle == b || middle == a \n                         then x + b\n                         else if x + middle &gt; x \n                              then improve a middle \n                              else improve middle b\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 5, "last_activity_date": 1569758379, "last_edit_date": 1569758379, "creation_date": 1569757489, "answer_id": 58154864, "question_id": 58151469, "link": "https://stackoverflow.com/questions/58151469/how-do-i-get-the-floating-point-number-immediately-before-after-a-given-number-i/58154864#58154864", "title": "How do I get the floating-point number immediately before/after a given number in Haskell?", "body": "<p>You can make use of the <a href=\"https://hackage.haskell.org/package/ieee754-0.8.0/docs/Numeric-IEEE.html#v:succIEEE\" rel=\"noreferrer\"><strong><code>succIEEE :: IEEE a =&gt; a -&gt; a</code></strong></a> function that will, for a type that belongs to the <code>IEEE</code> typeclass (<code>Float</code>, <code>Double</code>, <code>CFloat</code> and <code>CDouble</code> belong to this typeclass) calculate the next representable number. Or as specified in the documentation:</p>\n\n<blockquote>\n  <p>Return the next largest IEEE value (Infinity and NaN are unchanged).</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>Prelude Numeric.IEEE&gt; succIEEE 0\n5.0e-324\nPrelude Numeric.IEEE&gt; succIEEE 1\n1.0000000000000002\nPrelude Numeric.IEEE&gt; succIEEE 0 :: Float\n1.0e-45\nPrelude Numeric.IEEE&gt; succIEEE 1 :: Float\n1.0000001\nPrelude Numeric.IEEE&gt; succIEEE (0 :: Float) == 1.40129846432481707092372958328991613128026194187651577175706828388979108268586060148663818836212158203125e-45\nTrue\n</code></pre>\n"}], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1569758379, "creation_date": 1569720052, "question_id": 58151469, "link": "https://stackoverflow.com/questions/58151469/how-do-i-get-the-floating-point-number-immediately-before-after-a-given-number-i", "title": "How do I get the floating-point number immediately before/after a given number in Haskell?", "body": "<p>Given a <code>Float</code> or <code>Double</code>, how can I get the next-larger or -smaller one of it? In other words, how do I perform equivalent functionality to <a href=\"https://en.cppreference.com/w/cpp/numeric/math/nextafter\" rel=\"noreferrer\">C++'s <code>std::nextafter</code> functions</a>? For example, given <code>0 :: Float</code>, I'd want to get <code>1.40129846432481707092372958328991613128026194187651577175706828388979108268586060148663818836212158203125e-45</code> (which <code>show</code>s as <code>1.0e-45</code>) as the next-larger one, and given <code>1 :: Float</code>, I'd want to get <code>0.999999940395355224609375</code> (which <code>show</code>s as 0.99999994) as the next-smaller one. If possible, I'd like to know how to do this myself in Haskell, rather than just doing it with a third-party library (I'm fine with something in <code>base</code> though) or by using the FFI to call that C++ function.</p>\n"}, {"tags": ["dictionary", "haskell", "recursion", "backtracking"], "comments": [{"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1569716312, "post_id": 58151196, "comment_id": 102686202, "body": "&quot;it outputs the errors&quot; -- Please include these errors in your question, it will help us answer it."}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1569717902, "post_id": 58151196, "comment_id": 102686392, "body": "You\u2019ve included lots of irrelevant errors, but the main error here seems to be that you\u2019ve used a <code>recTakuzu</code> function but have not defined it."}, {"owner": {"reputation": 119, "user_id": 9403008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873e524f7881db3823bbcbf5cc62082d?s=128&d=identicon&r=PG&f=1", "display_name": "stackoverload", "link": "https://stackoverflow.com/users/9403008/stackoverload"}, "edited": false, "score": 0, "creation_date": 1569718129, "post_id": 58151196, "comment_id": 102686419, "body": "Sorry, that was a typo, and it is still not working"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 9403008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873e524f7881db3823bbcbf5cc62082d?s=128&d=identicon&r=PG&f=1", "display_name": "stackoverload", "link": "https://stackoverflow.com/users/9403008/stackoverload"}, "edited": false, "score": 0, "creation_date": 1569719764, "post_id": 58151400, "comment_id": 102686632, "body": "Basically what I am trying to do is to permute list of string, that is [&quot;<i>&quot;, &quot;</i>&quot;] , where * should be substituted by &quot;1&quot; or &quot;0&quot;, and it should output [[&quot;0&quot;, &quot;0&quot;], [&quot;0&quot;, &quot;1&quot;], [&quot;1&quot;, &quot;0&quot;], [&quot;1&quot;, &quot;1&quot;]] and I already have a function for permuting string"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "reply_to_user": {"reputation": 119, "user_id": 9403008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873e524f7881db3823bbcbf5cc62082d?s=128&d=identicon&r=PG&f=1", "display_name": "stackoverload", "link": "https://stackoverflow.com/users/9403008/stackoverload"}, "edited": false, "score": 0, "creation_date": 1569720454, "post_id": 58151400, "comment_id": 102686705, "body": "@stackoverload I\u2019m not sure I understand. Could you give an example of how you would call <code>recGame</code>, and the expected result?"}, {"owner": {"reputation": 119, "user_id": 9403008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873e524f7881db3823bbcbf5cc62082d?s=128&d=identicon&r=PG&f=1", "display_name": "stackoverload", "link": "https://stackoverflow.com/users/9403008/stackoverload"}, "edited": false, "score": 0, "creation_date": 1569751394, "post_id": 58151400, "comment_id": 102691373, "body": "I added input and output of the program"}], "tags": [], "owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "is_accepted": true, "score": 2, "last_activity_date": 1569719043, "creation_date": 1569719043, "answer_id": 58151400, "question_id": 58151196, "link": "https://stackoverflow.com/questions/58151196/applying-haskell-map-function-in-recursion/58151400#58151400", "title": "Applying Haskell map function in recursion", "body": "<p>Looking at the error message, it looks like GHC is inferring the wrong type for <code>recGame</code>. (How do I know this? It\u2019s because every time <code>recGame</code> is mentioned in the error messages, there\u2019s a lot of <code>[a] -&gt; [a]</code> stuff, which doesn\u2019t look right.) So, as a first step, let\u2019s add a type signature:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>solveGame :: [String] -&gt; [[String]]\nsolveGame ts = recGame [] ts\n  where \n    recGame :: [String] -&gt; [String] -&gt; [[String]]\n    recGame xs [] = [xs]\n    recGame xs (t:ts) = map (recGame (xs ++ ) ts) [[x] | x &lt;- (gen t)]\n</code></pre>\n\n<p>Once we do this, we get some more useful error messages:</p>\n\n<pre><code>so.hs:10:30: error:\n    \u2022 Couldn't match expected type \u2018[String] -&gt; [String]\u2019\n                  with actual type \u2018[[String]]\u2019\n    \u2022 Possible cause: \u2018recGame\u2019 is applied to too many arguments\n      In the first argument of \u2018map\u2019, namely \u2018(recGame (xs ++) ts)\u2019\n      In the expression: map (recGame (xs ++) ts) [[x] | x &lt;- (gen t)]\n      In an equation for \u2018recGame\u2019:\n          recGame xs (t : ts) = map (recGame (xs ++) ts) [[x] | x &lt;- (gen t)]\n   |\n10 |     recGame xs (t:ts) = map (recGame (xs ++ ) ts) [[x] | x &lt;- (gen t)]\n   |                              ^^^^^^^^^^^^^^^^^^^\n\nso.hs:10:39: error:\n    \u2022 Couldn't match expected type \u2018[String]\u2019\n                  with actual type \u2018[String] -&gt; [String]\u2019\n    \u2022 In the first argument of \u2018recGame\u2019, namely \u2018(xs ++)\u2019\n      In the first argument of \u2018map\u2019, namely \u2018(recGame (xs ++) ts)\u2019\n      In the expression: map (recGame (xs ++) ts) [[x] | x &lt;- (gen t)]\n   |\n10 |     recGame xs (t:ts) = map (recGame (xs ++ ) ts) [[x] | x &lt;- (gen t)]\n   |                                       ^^^^^\n</code></pre>\n\n<p>So, it looks like in the <code>(t:ts)</code> case, you\u2019re giving <code>(xs++)</code> as a parameter to <code>recGame</code> \u2014 but <code>(xs++)</code> is a function, so you can\u2019t do that! I don\u2019t know what you\u2019re trying to do here, so I can\u2019t suggest a fix, but that is definitely the error, and it\u2019s one you should fix.</p>\n"}], "owner": {"reputation": 119, "user_id": 9403008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873e524f7881db3823bbcbf5cc62082d?s=128&d=identicon&r=PG&f=1", "display_name": "stackoverload", "link": "https://stackoverflow.com/users/9403008/stackoverload"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58151400, "answer_count": 1, "score": 0, "last_activity_date": 1569745995, "creation_date": 1569715719, "last_edit_date": 1569745995, "question_id": 58151196, "link": "https://stackoverflow.com/questions/58151196/applying-haskell-map-function-in-recursion", "title": "Applying Haskell map function in recursion", "body": "<p>Recently I've been doing some Haskell. I need to generate all possibilities of strings, that is I am given <code>[String]</code>, I should output <code>[[String]]</code>.</p>\n\n<pre><code>solveGame :: [String] -&gt; [[String]]\nsolveGame ts = recGame [] ts\n  where recGame xs [] = [xs]\n        recGame xs (t:ts) = map (recGame (xs ++ ) ts) [[x] | x &lt;- (gen t)]\n</code></pre>\n\n<p>where, <code>gen</code> outputs number of all possible strings to recur, therefore,\n<code>gen :: String -&gt; [String]</code>. So basically the problem is to permute all possible strings, generated by <code>gen</code>. I tried to run my version, but it outputs the errors. Is it alright to do it in this way?</p>\n\n<p>Input for <code>solveGame</code> will be matrix n*n of stars\n(for example <code>[\"**\", \"**\"]</code>) and the output should be list of all possible matrices filled with 1 and 0 (this list will will contain 16 matrices like <code>[\"10\", \"01\"]</code>)</p>\n\n<p>The errors that I have:</p>\n\n<pre><code>Takuzu.hs:15:16: error:\n    \u2022 Couldn't match expected type \u2018[[String]]\u2019\n                  with actual type \u2018[String] -&gt; [a1]\u2019\n    \u2022 Probable cause: \u2018recGame\u2019 is applied to too few arguments\n      In the expression: recGame [] ts\n      In an equation for \u2018solveGame\u2019:\n          solveGame ts\n            = recGame [] ts\n            where\n                recGame xs [] = [xs]\n                recGame xs (t : ts)\n                  = map (recGame (xs ++) ts) [[...] | x &lt;- (gen t)]\n   |\n15 | solveGame ts = recGame [] ts\n   |                ^^^^^^^^^^^^^\n\nTakuzu.hs:15:24: error:\n    \u2022 Couldn't match expected type \u2018[a1] -&gt; [a1]\u2019\n                  with actual type \u2018[a0]\u2019\n    \u2022 In the first argument of \u2018recGame\u2019, namely \u2018[]\u2019\n      In the expression: recGame [] ts\n      In an equation for \u2018solveGame\u2019:\n          solveGame ts\n            = recGame [] ts\n            where\n                recGame xs [] = [xs]\n                recGame xs (t : ts)\n                  = map (recGame (xs ++) ts) [[...] | x &lt;- (gen t)]\n   |\n15 | solveGame ts = recGame [] ts\n   |                        ^^\n\nTakuzu.hs:16:9: error:\n    \u2022 Couldn't match type \u2018[a]\u2019 with \u2018[a] -&gt; [a]\u2019\n      Expected type: ([a] -&gt; [a]) -&gt; [String] -&gt; [String] -&gt; [a]\n        Actual type: [a] -&gt; [String] -&gt; [[a]]\n    \u2022 In an equation for \u2018solveGame\u2019:\n          solveGame ts\n            = recGame [] ts\n            where\n                recGame xs [] = [xs]\n                recGame xs (t : ts)\n                  = map (recGame (xs ++) ts) [[...] | x &lt;- (gen t)]\n    \u2022 Relevant bindings include\n        recGame :: ([a] -&gt; [a]) -&gt; [String] -&gt; [String] -&gt; [a]\n          (bound at Takuzu.hs:16:9)\n   |\n16 |   where recGame xs [] = [xs]\n   |         ^^^^^^^^^^^^^^^^^^^^...\nFailed, no modules loaded.\n\n</code></pre>\n"}, {"tags": ["haskell", "haskell-platform"], "comments": [{"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1569703982, "post_id": 58150101, "comment_id": 102684396, "body": "Note the warning at the beginning: <i>Tab character found here</i>. Have you tried resolving that warning?"}], "answers": [{"tags": [], "owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "is_accepted": true, "score": 4, "last_activity_date": 1569705844, "creation_date": 1569705844, "answer_id": 58150416, "question_id": 58150101, "link": "https://stackoverflow.com/questions/58150101/ghci-failed-to-load-interface-for-system-time/58150416#58150416", "title": "GHCI Failed to load interface for \u2018System.Time\u2019", "body": "<p>Just use <code>cabal install</code> to install a package globally</p>\n\n<pre><code>$ cabal install old-time\n</code></pre>\n\n<p>It will give you a warning, but that's ok if you are just using it for ghci support.</p>\n\n<p>Also note <a href=\"http://hackage.haskell.org/package/old-time-1.1.0.3/docs/System-Time.html\" rel=\"nofollow noreferrer\">the documentation</a> warns:</p>\n\n<blockquote>\n  <p>This library is deprecated, please look at <code>Data.Time</code> in the time package instead.</p>\n</blockquote>\n"}], "owner": {"reputation": 387, "user_id": 5377722, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MHeNHEtZhiI/AAAAAAAAAAI/AAAAAAAAAFo/racMaZDaQHE/photo.jpg?sz=128", "display_name": "Sergii Sopin", "link": "https://stackoverflow.com/users/5377722/sergii-sopin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 58150416, "answer_count": 1, "score": 1, "last_activity_date": 1569705844, "creation_date": 1569702949, "question_id": 58150101, "link": "https://stackoverflow.com/questions/58150101/ghci-failed-to-load-interface-for-system-time", "title": "GHCI Failed to load interface for \u2018System.Time\u2019", "body": "<p>I am learning Haskell and trying to build an example from the book. \nWhen I load the code using \":l BetterPredicate\" command in GHCI, I am getting following error: </p>\n\n<pre><code>Prelude&gt; :l BetterPredicate\n[1 of 2] Compiling RecursiveContents ( RecursiveContents.hs, interpreted )\n\nRecursiveContents.hs:12:32: warning: [-Wtabs]\n    Tab character found here.\n    Please use spaces instead.\n[2 of 2] Compiling Main             ( BetterPredicate.hs, interpreted )\n\nBetterPredicate.hs:3:1: error:\n    Failed to load interface for \u2018System.Time\u2019\n    Perhaps you meant\n      System.CPUTime (from base-4.9.1.0)\n      System.Cmd (from process-1.4.3.0)\n      System.Mem (from base-4.9.1.0)\n    Use -v to see a list of the files searched for.\nFailed, modules loaded: RecursiveContents.\n</code></pre>\n\n<p>Here is the code I am trying to compile:</p>\n\n<pre><code>import Control.Monad (filterM)\nimport System.Directory (Permissions (..), getModificationTime, getPermissions)\nimport System.Time (ClockTime(..))\nimport System.FilePath (takeExtension)\nimport Control.Exception (bracket, handle)\nimport System.IO (IOMode(..), hClose, hFileSize, openFile)\n\n-- Our functions\nimport RecursiveContents (getRecursiveContents)\n\ntype Predicate = FilePath        -- Path to directory entry\n              -&gt; Permissions     -- permissions\n              -&gt; Maybe Integer   -- file size (Nothing if not file)\n              -&gt; ClockTime       -- last modified\n              -&gt; Bool\n-- TBD\ngetFileSize :: FilePath -&gt; IO (Maybe Integer)\n\nbetterFind :: Predicate -&gt; FilePath -&gt; IO [FilePath]\nbetterFind p path = getRecursiveContents &gt;&gt;= filterM check\n    where check name = do \n              perms &lt;- getPermissions name\n              size  &lt;- getFileSize name\n              modified &lt;- getModificationTime name \n              return (p name perms size modified)\n\nsimpleFileSize :: FilePath -&gt; IO Integer\nsimpleFileSize path = do\n    h &lt;- openFile path ReadMode\n    size &lt;- hFileSize h\n    hClose\n    return size\n\nsaferFileSize :: FilePath -&gt; IO (Maybe Integer)\nsaferFileSize path = handle (\\_ -&gt; return Nothing) $ do\n    h &lt;- openFile path ReadMode\n    size &lt;- hFileSize h\n    hClose\n    return (Just size)\n\ngetFileSize :: FilePath -&gt; IO (Maybe Integer)\ngetFileSize path = handle (\\_ -&gt; return Nothing) $\n    bracket (openFile path ReadOnly) hClose $ \\h -&gt; do\n        size &lt;- hFileSize h\n        hClose\n        return (Just size)\n\n\ntype InfoP a =  FilePath       -- path to directory entry\n             -&gt; Permissions    -- permissions\n             -&gt; Maybe Integer  -- file size (Nothing if not file)\n             -&gt; ClockTime      -- last modified\n             -&gt; a \n\npathP :: InfoP FilePath\npathP path _ _ _ = path\n\nsizeP :: InfoP Integer\nsizeP _ _ (Just size) _ = size\nsizeP _ _ Nothing     _ = -1\n\nequalP :: (Eq a) =&gt; InfoP a -&gt; a -&gt; InfoP Bool\n--equalP f k = \\w x y z -&gt; f w x y z == k\nequalP f k w x y z = f w x y z == k\n</code></pre>\n\n<p>According to the documentation: <a href=\"http://hackage.haskell.org/package/old-time-1.1.0.3/docs/System-Time.html\" rel=\"nofollow noreferrer\">http://hackage.haskell.org/package/old-time-1.1.0.3/docs/System-Time.html</a> this module is part of old-time library, so I suppose I need to import it somehow, but I am not sure how to do it if I am not building a package using Cabal (there is no *.cabal file) or something else, I just want to use my code in GHCI. </p>\n"}, {"tags": ["haskell", "ssl", "https", "warp"], "answers": [{"tags": [], "owner": {"reputation": 327, "user_id": 6651168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b45f362ea8f2d6346f9008a1df0afff?s=128&d=identicon&r=PG&f=1", "display_name": "Jimbo", "link": "https://stackoverflow.com/users/6651168/jimbo"}, "is_accepted": true, "score": 0, "last_activity_date": 1570909089, "last_edit_date": 1570909089, "creation_date": 1570379095, "answer_id": 58259164, "question_id": 58149674, "link": "https://stackoverflow.com/questions/58149674/warp-tls-errors-with-handshakefailed-error-misc-no-keys-found/58259164#58259164", "title": "warp-tls errors with HandshakeFailed (Error_Misc &quot;no keys found)", "body": "<p>So it turned out to be my private key format. GoDaddy gave me the incorrect private key format. I needed to generate an RSA 2048-bit key.</p>\n"}], "owner": {"reputation": 327, "user_id": 6651168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b45f362ea8f2d6346f9008a1df0afff?s=128&d=identicon&r=PG&f=1", "display_name": "Jimbo", "link": "https://stackoverflow.com/users/6651168/jimbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 58259164, "answer_count": 1, "score": 0, "last_activity_date": 1570909089, "creation_date": 1569699295, "question_id": 58149674, "link": "https://stackoverflow.com/questions/58149674/warp-tls-errors-with-handshakefailed-error-misc-no-keys-found", "title": "warp-tls errors with HandshakeFailed (Error_Misc &quot;no keys found)", "body": "<p>I'm trying to setup https on my website. I'm using a servant exec on a google cloud vm instance (ubuntu). This is my code:</p>\n\n<pre><code>startApp :: FilePath -&gt;  IO ()\nstartApp dbFile = do\n     let tls = tlsSettings \"ssl/22cb488c23a886e2.crt\" \"ssl/generated-private-key.pem\"\n     runTLS tls (setPort 443 defaultSettings) $ app dbFile\n</code></pre>\n\n<p>When I run my exec (it's in the same dir as the <code>ssl</code> dir) I get the following:</p>\n\n<pre><code>HandshakeFailed (Error_Misc \"no keys found\\nCallStack (from HasCallStack):\\n  error, called at ./Network/Wai/Handler/W\narpTLS.hs:265:20 in warp-tls-3.2.5-2FsWeMf1nNvA0nztofVYMj:Network.Wai.Handler.WarpTLS\")\n</code></pre>\n\n<p>I have tried setting the file permissions of my .crt and .pem file with chmod 777 with no success.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1569667156, "post_id": 58145492, "comment_id": 102675902, "body": "I am not really following what the &quot;same&quot; letter here does. If I understand it correctly, you each time add <code>3</code> to the &quot;delta&quot;, so <code>ABC</code> would encode to <code>XVT</code>, or am I missing something?"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569667551, "post_id": 58145492, "comment_id": 102675982, "body": "@WillemVanOnsem My interpretation is that a character represented by <code>c :: Int</code> will be mapped to <code>(c - (n * key)) `mod` 26</code>, where <code>n</code> is the position of <code>c</code> in the string. But then the question still doesn\u2019t make sense: as I see it, whether a letter has been used already has no relevance to this cipher."}, {"owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "edited": false, "score": 0, "creation_date": 1569667595, "post_id": 58145492, "comment_id": 102675989, "body": "if you add 3 to the <code>X</code>, it will be <code>U</code> to the left and again move 3 to the left which is <code>R</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569667610, "post_id": 58145492, "comment_id": 102675993, "body": "@bradm: yes that was more or less the same formula I had in mind."}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1569667676, "post_id": 58145492, "comment_id": 102676010, "body": "@dagosom I interpret the result of adding 3 to <code>X</code> to be <code>A</code>; this is because counting three forward from <code>X</code> gives <code>Y</code>, <code>Z</code>, <code>A</code>."}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1569667797, "post_id": 58145492, "comment_id": 102676042, "body": "@dasogom Also, a minor note: \u2018complicated Caeser cipher\u2019 isn\u2019t really the best way to describe this. I would suggest calling this a modified <a href=\"https://www.dcode.fr/trithemius-cipher\" rel=\"nofollow noreferrer\">Trithemius cipher</a> instead."}, {"owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "reply_to_user": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1569667893, "post_id": 58145492, "comment_id": 102676065, "body": "@bradrn thanks for the advice! I am just a beginner of Haskell."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569668222, "post_id": 58145492, "comment_id": 102676132, "body": "@dasogom: can you edit your question, and show how you solved the original Caesar cypher?"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1569668305, "post_id": 58145492, "comment_id": 102676154, "body": "You\u2019re welcome @dasogom! Good to see you\u2019re learning Haskell. I still have one question though: why do you need to determine whether a character has been used before? From my knowledge of polyalphabetic substitution ciphers this should be irrelevant."}, {"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1569668984, "post_id": 58145492, "comment_id": 102676285, "body": "Irrespective of cryptography, if we call the string <code>st</code>, an expression testing whether character &#39;A&#39; appears inside st is <code>elem &#39;A&#39; st</code> and if you want to restrict the test to say the first 7 characters in st, that would be <code>elem &#39;A&#39; (take 7 st)</code>  . Does that help ?"}, {"owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "reply_to_user": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1569670721, "post_id": 58145492, "comment_id": 102676602, "body": "@bradrn Oh I was a stupid. I misunderstude the question. So the question wants after adding 3, adding 6, adding 9."}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1569671646, "post_id": 58145492, "comment_id": 102676815, "body": "@dasogom That makes a lot more sense now \u2014 thanks! One standard way to do this is to use an auxilliary function (I don\u2019t know if that\u2019s standard terminology); that is, define <code>cipher myString = go myString 0</code>, and then define <code>go</code> as a recursive function where the last parameter is incremented for every character. Another way to do this is to do <code>zip [0,3..] myString</code> to associate each character with its shift, then <code>map</code> a shifting function over each (shift,character) pair. For doing the shift itself I recommend using <code>chr</code> and <code>ord</code> from <code>Data.Char</code>."}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1569672039, "post_id": 58145492, "comment_id": 102676900, "body": "Or, as @WillemVanOnsem has just answered, you can use <code>zipWith</code>; I should note that this is equivalent to my previous suggestion of using <code>zip</code> and then mapping, but is a much cleaner alternative!"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "edited": false, "score": 0, "creation_date": 1569672640, "post_id": 58146084, "comment_id": 102677031, "body": "What about Input has to be: <code>encrypt 3 &quot;AAA&quot;</code> ?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "edited": false, "score": 0, "creation_date": 1569673859, "post_id": 58146084, "comment_id": 102677276, "body": "@dasogom: that I leave as an exercise :)"}, {"owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "edited": false, "score": 0, "creation_date": 1569674013, "post_id": 58146084, "comment_id": 102677315, "body": "<code>encode n ss = zipWith shift [n, n*2..n*(length(ss)] [ss] </code> is not work?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "edited": false, "score": 0, "creation_date": 1569674678, "post_id": 58146084, "comment_id": 102677490, "body": "@dasogom: why do you expect that definition to work in the first place? Try to think how you can write <code>encode n ss</code> in terms of <code>trithemiusEncrypt</code>."}, {"owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "edited": false, "score": 0, "creation_date": 1569675237, "post_id": 58146084, "comment_id": 102677628, "body": "Btw what about space? For example, <code>AAA AAA</code> have to be &#39;YWU SQO&#39;. If <code>zipWith</code> count space it becom <code>YWU QOM</code>."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "edited": false, "score": 0, "creation_date": 1569675298, "post_id": 58146084, "comment_id": 102677645, "body": "@dasogom: I would really advice that you look <i>how</i> the above function is working, and adapt it, instead of just to copy it."}, {"owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "edited": false, "score": 0, "creation_date": 1569675870, "post_id": 58146084, "comment_id": 102677747, "body": "Thx for advice and I will try to take a look first."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1569671926, "creation_date": 1569671926, "answer_id": 58146084, "question_id": 58145492, "link": "https://stackoverflow.com/questions/58145492/how-to-make-code-in-haskell-to-decide-next-character-from-the-string-is-same-as/58146084#58146084", "title": "How to make code in Haskell to decide next character from the string is same as before character?", "body": "<p>We only need to keep track of the position if I understand it correctly. We can do so by <code>zipWith</code> the <code>[i, i+d ..]</code> list.</p>\n\n<p>So we can construct a function that looks like:</p>\n\n<pre><code>trithemiusEncrypt :: Int -&gt; Int -&gt; String -&gt; String\ntrithemiusEncrypt i d = <b>zipWith</b> _ [i, i+d .. ]</code></pre>\n\n<p>with <code>_</code> something we still need to fill in. This function should have type <code>Int -&gt; Char -&gt; Char</code>, so here <code>Int</code> is the \"shift\" we need to perform on the character. We can thus define this as:</p>\n\n<pre><code>import Data.Char(ord, chr)\n\ntrithemiusEncrypt :: Int -&gt; Int -&gt; String -&gt; String\ntrithemiusEncrypt i d = zipWith f [i, i+d .. ]\n    where f s c = chr (ca + mod (ord c - ca - s) 26)\n          ca = ord 'A'</code></pre>\n\n<p>This gives us the expected result:</p>\n\n<pre><code>Prelude&gt; trithemiusEncrypt 3 3 \"AAA\"\n\"XUR\"\nPrelude&gt; trithemiusEncrypt 3 3 \"ABC\"\n\"XVT\"\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 12112804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L6iIP.jpg?s=128&g=1", "display_name": "dasogom", "link": "https://stackoverflow.com/users/12112804/dasogom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 58146084, "answer_count": 1, "score": 0, "last_activity_date": 1569671926, "creation_date": 1569667052, "last_edit_date": 1569670666, "question_id": 58145492, "link": "https://stackoverflow.com/questions/58145492/how-to-make-code-in-haskell-to-decide-next-character-from-the-string-is-same-as", "title": "How to make code in Haskell to decide next character from the string is same as before character?", "body": "<p>Now I am making code for complicated caesar cipher in Haskell.\nI succeeded to make code for normal caesar cipher.\nBut what I want to do is rotating by key positions again after having used a letter from the string.</p>\n\n<p>For example, AAA with key position 3 will be XUR.</p>\n\n<p>So my problem is after move 3, how can I make next letter will be move 6, and next move 9?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1569666006, "post_id": 58145130, "comment_id": 102675672, "body": "Anything wrong with this ?  <code>h1 . toHtml  &lt;$&gt;  Just &quot;My Title&quot;</code>"}, {"owner": {"reputation": 10980, "user_id": 200445, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/322dfbdffdbb24e5595f3585e1b5c140?s=128&d=identicon&r=PG", "display_name": "Vasiliy Faronov", "link": "https://stackoverflow.com/users/200445/vasiliy-faronov"}, "reply_to_user": {"reputation": 2485, "user_id": 11282404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e3829cb91cc6be3541a37381b5ff21?s=128&d=identicon&r=PG&f=1", "display_name": "jpmarinier", "link": "https://stackoverflow.com/users/11282404/jpmarinier"}, "edited": false, "score": 0, "creation_date": 1569666990, "post_id": 58145130, "comment_id": 102675865, "body": "@jpmarinier How would it work?  <code>Couldn&#39;t match type \u2018Maybe\u2019 with \u2018Text.Blaze.Internal.MarkupM\u2019</code>. In any case, it relies on the ADT in question being a <code>Functor</code>. Consider instead <code>data Foo = Baz Text | Baz Int | ...</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "reply_to_user": {"reputation": 10980, "user_id": 200445, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/322dfbdffdbb24e5595f3585e1b5c140?s=128&d=identicon&r=PG", "display_name": "Vasiliy Faronov", "link": "https://stackoverflow.com/users/200445/vasiliy-faronov"}, "edited": false, "score": 2, "creation_date": 1569668278, "post_id": 58145428, "comment_id": 102676147, "body": "<code>&#47;= Nothing</code> and <code>fromJust</code> is considered a bool blindness and anti-pattern, so you shouldn&#39;t this approach. Regarding your question: are you looking for some generic way to match only on the specific single constructor with <code>pure ()</code> on all other constructors?"}, {"owner": {"reputation": 10980, "user_id": 200445, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/322dfbdffdbb24e5595f3585e1b5c140?s=128&d=identicon&r=PG", "display_name": "Vasiliy Faronov", "link": "https://stackoverflow.com/users/200445/vasiliy-faronov"}, "edited": false, "score": 0, "creation_date": 1569668401, "post_id": 58145428, "comment_id": 102676176, "body": "Yes, that\u2019s what I\u2019m looking for. I realize this may be impossible, but I just recently discovered e.g. <code>ViewPatterns</code>, so who knows what else is lurking there in GHC extensions."}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "reply_to_user": {"reputation": 10980, "user_id": 200445, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/322dfbdffdbb24e5595f3585e1b5c140?s=128&d=identicon&r=PG", "display_name": "Vasiliy Faronov", "link": "https://stackoverflow.com/users/200445/vasiliy-faronov"}, "edited": false, "score": 2, "creation_date": 1569668916, "post_id": 58145428, "comment_id": 102676278, "body": "@VasiliyFaronov Ah, in that case, I have bad news for you :( Unfortunately, no GHC extension allows achieving the desired behaviour. What you want is something like <i>first class patterns</i> and Haskell/GHC doesn&#39;t have that. The closest thing to what you want is using prisms from the <code>lens</code> library. But they are not automatically provided. You need to (1) depend on a library, (2) generate prisms using Haskell macros system and (3) use functions to extract required parts of your data types."}, {"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 1, "creation_date": 1569784419, "post_id": 58145428, "comment_id": 102699268, "body": "You don&#39;t need to go to an external library for this - it&#39;s <code>Data.Foldable.for_</code> in base."}, {"owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "reply_to_user": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 0, "creation_date": 1569786177, "post_id": 58145428, "comment_id": 102699631, "body": "@Carl You do need to go to an external library because you can&#39;t implement <code>instance Foldable</code> for a data type like <code>Foo</code> from my answer."}], "tags": [], "owner": {"reputation": 8237, "user_id": 2900502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/R1OjD.jpg?s=128&g=1", "display_name": "Shersh", "link": "https://stackoverflow.com/users/2900502/shersh"}, "is_accepted": true, "score": 3, "last_activity_date": 1569691212, "last_edit_date": 1569691212, "creation_date": 1569666574, "answer_id": 58145428, "question_id": 58145130, "link": "https://stackoverflow.com/questions/58145130/is-there-a-way-to-combine-partial-pattern-matching-with-return/58145428#58145428", "title": "Is there a way to combine partial pattern matching with return?", "body": "<p>What you want is a function of the following type:</p>\n\n<pre><code>Applicative f =&gt; Maybe a -&gt; (a -&gt; f ()) -&gt; f ()\n</code></pre>\n\n<p>Using <a href=\"https://hoogle.haskell.org/\" rel=\"nofollow noreferrer\">Hoogle</a> you can find several options. So it seems like the most common name for this function is <code>whenJust</code>. You can find it <a href=\"https://hackage.haskell.org/package/relude-0.5.0/docs/Relude-Monad-Maybe.html#v:whenJust\" rel=\"nofollow noreferrer\">for example in the <code>relude</code> library</a>.</p>\n\n<p>If you're interested in a generic solution for this problem, the closest thing to achieve is to use prisms from the <code>lens</code> library. Below I provide the complete code with a followup explanation:</p>\n\n<pre><code>{-# LANGUAGE Rank2Types      #-}\n{-# LANGUAGE TemplateHaskell #-}\n\nmodule Prism where\n\nimport Control.Lens (Prism', makePrisms, preview)\n\ndata Foo\n    = Bar String\n    | Baz Int\n    | Quux Bool\n\nmakePrisms ''Foo\n\nwhenMatched :: Applicative f =&gt; Prism' s a -&gt; s -&gt; (a -&gt; f ()) -&gt; f ()\nwhenMatched prism val f = case preview prism val of\n    Nothing -&gt; pure ()\n    Just a  -&gt; f a\n</code></pre>\n\n<p>Function <code>makePrisms</code> is a Haskell macro which requires to enable <code>TemplateHaskell</code> extension. This function will generate prisms with names <code>_Bar</code>, <code>_Baz</code> and <code>_Quux</code>. You can inspect their type in GHCi:</p>\n\n<pre><code>\u03bb: :t _Bar\n_Bar\n  :: (profunctors-5.3:Data.Profunctor.Choice.Choice p,\n      Applicative f) =&gt;\n     p String (f String) -&gt; p Foo (f Foo)\n\u03bb: :t _Baz\n_Baz\n  :: (profunctors-5.3:Data.Profunctor.Choice.Choice p,\n      Applicative f) =&gt;\n     p Int (f Int) -&gt; p Foo (f Foo)\n</code></pre>\n\n<p>Types probably look scary but this is because of complicated internals of the <code>lens</code> library. I've implemented <code>whenMatched</code> function that should help to work with prisms in a simpler way. Here is how you can use it:</p>\n\n<pre><code>\u03bb: whenMatched _Bar (Bar \"foo\") putStrLn \nfoo\n\u03bb: whenMatched _Bar (Baz 42) putStrLn \n</code></pre>\n"}], "owner": {"reputation": 10980, "user_id": 200445, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/322dfbdffdbb24e5595f3585e1b5c140?s=128&d=identicon&r=PG", "display_name": "Vasiliy Faronov", "link": "https://stackoverflow.com/users/200445/vasiliy-faronov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 58145428, "answer_count": 1, "score": 2, "last_activity_date": 1569691212, "creation_date": 1569664036, "last_edit_date": 1569664677, "question_id": 58145130, "link": "https://stackoverflow.com/questions/58145130/is-there-a-way-to-combine-partial-pattern-matching-with-return", "title": "Is there a way to combine partial pattern matching with return?", "body": "<p>I\u2019m writing a Haskell program that uses <a href=\"http://hackage.haskell.org/package/blaze-html\" rel=\"nofollow noreferrer\">blaze-html</a> to construct an HTML document. When a <code>title :: Maybe Text</code> is not <code>Nothing</code>, I want to produce an <a href=\"http://hackage.haskell.org/package/blaze-html/docs/Text-Blaze-XHtml5.html#v:h1\" rel=\"nofollow noreferrer\"><code>h1</code></a> from it. I can do it like this:</p>\n\n<pre><code>case title of\n  Just t  -&gt; H.h1 $ toHtml t\n  _       -&gt; return ()\n</code></pre>\n\n<p>Or, in the specific case of <code>Maybe</code>, I can do it like this:</p>\n\n<pre><code>when (title /= Nothing) $ H.h1 $ toHtml $ fromJust title\n</code></pre>\n\n<p>Can I have (perhaps with a GHC extension) something that looks more like the second example, but for <strong>arbitrary</strong> ADTs? Something like partial pattern matching that just defaults to <code>return ()</code>. I imagine syntax like this:</p>\n\n<pre><code>-- imaginary syntax\nwhen title of Just t -&gt; H.h1 $ toHtml t\n</code></pre>\n"}, {"tags": ["function", "haskell", "call", "haskell-stack"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1569654388, "post_id": 58143848, "comment_id": 102673729, "body": "A much cleaner spelling of <code>truthtable</code> that has the exact same behavior would be <code>truthtable a1 = [(p, q, f p q, a1) | p &lt;- [0,1], q &lt;- [0,1]] where f = case a1 of &quot;mynot&quot; -&gt; mynot; &quot;myand&quot; -&gt; myand; &quot;myor&quot; -&gt; myor; &quot;myimply&quot; -&gt; myimply</code>. But if I were doing this, I think I would implement a very different behavior. For example, I&#39;d want <code>data Operation = Not | And | Or | Imply</code> rather than using <code>String</code>s; I&#39;d want <code>Bool</code> instead of integers; and I definitely wouldn&#39;t return the operator name in the result. (None of these address your question; they are style comments only.)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12133794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GgDEOKlsg9I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlUHO1CZ6FJREotWfuD_hsPUWONg/photo.jpg?sz=128", "display_name": "Jan van Dongen", "link": "https://stackoverflow.com/users/12133794/jan-van-dongen"}, "edited": false, "score": 0, "creation_date": 1569698255, "post_id": 58144067, "comment_id": 102683021, "body": "Thanks for the help! I think I can use your help, the reason why I&#39;m working with integers instead of booleans is because that is a restriction within the assignment (for some reason).. So I would have to have one more function than I already have to call a result that can say more than just return the truth tables again right?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 3, "user_id": 12133794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GgDEOKlsg9I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlUHO1CZ6FJREotWfuD_hsPUWONg/photo.jpg?sz=128", "display_name": "Jan van Dongen", "link": "https://stackoverflow.com/users/12133794/jan-van-dongen"}, "edited": false, "score": 0, "creation_date": 1569699074, "post_id": 58144067, "comment_id": 102683238, "body": "@JanvanDongen I don&#39;t understand what is the &quot;one more function&quot;. Can you elaborate?"}, {"owner": {"reputation": 3, "user_id": 12133794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GgDEOKlsg9I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlUHO1CZ6FJREotWfuD_hsPUWONg/photo.jpg?sz=128", "display_name": "Jan van Dongen", "link": "https://stackoverflow.com/users/12133794/jan-van-dongen"}, "edited": false, "score": 0, "creation_date": 1569738958, "post_id": 58144067, "comment_id": 102689084, "body": "Maybe it is not a function but what you say with data Equivresult ... Equivalent / TTable?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 3, "user_id": 12133794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GgDEOKlsg9I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlUHO1CZ6FJREotWfuD_hsPUWONg/photo.jpg?sz=128", "display_name": "Jan van Dongen", "link": "https://stackoverflow.com/users/12133794/jan-van-dongen"}, "edited": false, "score": 0, "creation_date": 1569742110, "post_id": 58144067, "comment_id": 102689601, "body": "@JanvanDongen That is a new data type definition, with its associated constructors. You can either use that, or rely on the already-defined <code>Maybe</code> types."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 2, "last_activity_date": 1569654021, "last_edit_date": 1569654021, "creation_date": 1569653700, "answer_id": 58144067, "question_id": 58143848, "link": "https://stackoverflow.com/questions/58143848/how-to-determine-if-true-false-and-then-return-a-function/58144067#58144067", "title": "How to determine if true/false and then return a function", "body": "<p>The most idiomatic solution here is to use a custom return data type</p>\n\n<pre><code>type TTable = [(Int,Int,Int,Int)]\n\ndata EquivResult\n  = Equivalent\n  | NotEquivalent TTable\n\nequiv :: TTable -&gt; TTable -&gt; EquivResult\nequiv a1 a2\n | truthtable a1 == truthtable a2 = Equivalent\n | otherwise                      = NotEquivalent (counterEx a1 a2)\n</code></pre>\n\n<p>One can also use <code>Maybe TTable</code> instead of defining a custom <code>EquivResult</code>, but it is less obvious that <code>Nothing</code> would mean \"equivalent\", and <code>Just _</code> would mean \"_ is a counterexample\".</p>\n\n<pre><code>equiv :: TTable -&gt; TTable -&gt; Maybe TTable\nequiv a1 a2\n | truthtable a1 == truthtable a2 = Nothing\n | otherwise                      = Just (counterEx a1 a2)\n</code></pre>\n\n<p>By the way, why do you use the integers <code>0</code> and <code>1</code> for booleans? Why not <code>False</code> and <code>True</code> of type <code>Bool</code>. Using <code>Int</code> for booleans feels weird, and allows invalid values like <code>2</code>.</p>\n\n<p>(As a general recommendation, I would suggest to start writing each function by declaring its type. Type signatures are very important to detect potential errors soon, and to help the compiler to produce better error messages.)</p>\n"}], "owner": {"reputation": 3, "user_id": 12133794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GgDEOKlsg9I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlUHO1CZ6FJREotWfuD_hsPUWONg/photo.jpg?sz=128", "display_name": "Jan van Dongen", "link": "https://stackoverflow.com/users/12133794/jan-van-dongen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 58144067, "answer_count": 1, "score": 0, "last_activity_date": 1569662721, "creation_date": 1569651002, "last_edit_date": 1569662721, "question_id": 58143848, "link": "https://stackoverflow.com/questions/58143848/how-to-determine-if-true-false-and-then-return-a-function", "title": "How to determine if true/false and then return a function", "body": "<p>I have truth tables for different logical operators; </p>\n\n<pre><code>truthtable a1\n | a1 == \"mynot\"   = [(p,q,r,s) | p &lt;- [0,1], q &lt;- [0,1], let r = mynot p, s &lt;- [\"mynot\"]]\n | a1 == \"myand\"   = [(p,q,r,s) | p &lt;- [0,1], q &lt;- [0,1], let r = myand p q, s &lt;- [\"myand\"]]\n | a1 == \"myor\"    = [(p,q,r,s) | p &lt;- [0,1], q &lt;- [0,1], let r = myor p q, s &lt;- [\"myor\"]]\n | a1 == \"myimply\" = [(p,q,r,s) | p &lt;- [0,1], q &lt;- [0,1], let r = myimply p q, s &lt;- [\"myimply\"]]\n</code></pre>\n\n<p>Now I have to make a function (<code>equiv</code>) that determines if two operators act the same and give a counter example if not. So for <code>equiv \"myimply\" \"myimply\"</code> it should determine that it is equivalent, but for <code>equiv \"myimply\" \"myor\"</code> it should call the function <code>counterEx</code> which gives a counterexample (that the operators are not the same). </p>\n\n<p>Now I had this:</p>\n\n<pre><code>equiv a1 a2\n | truthtable a1 == truthtable a2 = True\n | otherwise = counterEx a1 a2\n\ncounterEx a1 a2 = truthtable a1 ++ truthtable a2\n</code></pre>\n\n<p>But of course, <code>equiv</code> has different outcomes and thus is not possible. However I don't really know how I can give a better counter example (than just give all possibilities and you would just look what is not the same). As well I don't really know how I can call the function <code>counterEx</code> if the truth tables are not equivalent but only determine that they are the same if the truth tables really are the same.</p>\n"}, {"tags": ["haskell", "literate-programming"], "comments": [{"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 1, "creation_date": 1569636317, "post_id": 58142797, "comment_id": 102671546, "body": "Just out of interest, why do you want to do this? Is it purely to see if this is possible, or do you have a particular application in mind?"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1569636371, "post_id": 58142797, "comment_id": 102671552, "body": "Anyway, now that I think about it, I thought that GHC doesn\u2019t care what extension files have? So can\u2019t you just do <code>ghc myfile.yy.xxx</code> and have it compile? Or do you run into an error when you try that?"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1569641003, "post_id": 58142797, "comment_id": 102672029, "body": "Intererestingly, <code>runghc</code> doesn&#39;t mind arbitrary extensions but <code>ghc</code> does. Guess the reason is to allow scripts to have a name without extension."}, {"owner": {"reputation": 532, "user_id": 660339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ba401042a68ed65c16f73c8cf3a15287?s=128&d=identicon&r=PG", "display_name": "Ivan Perez", "link": "https://stackoverflow.com/users/660339/ivan-perez"}, "edited": false, "score": 0, "creation_date": 1569707062, "post_id": 58142797, "comment_id": 102684909, "body": "@bradm How will ghc find other modules that also have <code>.yy.xxx</code> extension?"}], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 660339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ba401042a68ed65c16f73c8cf3a15287?s=128&d=identicon&r=PG", "display_name": "Ivan Perez", "link": "https://stackoverflow.com/users/660339/ivan-perez"}, "edited": false, "score": 0, "creation_date": 1569706890, "post_id": 58149745, "comment_id": 102684876, "body": "Great. This (using it with md) was also my thinking. The problem, I guess, is that that module might import another module also in an .md file which would not be listed in the command line.  I see that GHC supports the flags <code>-osuf</code> and <code>-hisuf</code> (<a href=\"http://downloads.haskell.org/~ghc/latest/docs/html/users_guide/separate_compilation.html#output-files\" rel=\"nofollow noreferrer\">downloads.haskell.org/~ghc/latest/docs/html/users_guide/&hellip;</a>). I wonder how complex adding -hssuf and -lhssuf would be."}, {"owner": {"reputation": 532, "user_id": 660339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ba401042a68ed65c16f73c8cf3a15287?s=128&d=identicon&r=PG", "display_name": "Ivan Perez", "link": "https://stackoverflow.com/users/660339/ivan-perez"}, "edited": false, "score": 0, "creation_date": 1569706989, "post_id": 58149745, "comment_id": 102684896, "body": "Github chooses how to render files based purely on the extension. However, if the extension is <code>.md</code>, then you need to create a link to the file from an lhs for this to be found by GHC. If we could name them <code>.hs.md</code> and <code>.lhs.md</code> (or the other way around), then we might be able to get github to support literate haskell with markdown."}], "tags": [], "owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "is_accepted": false, "score": 0, "last_activity_date": 1569699840, "creation_date": 1569699840, "answer_id": 58149745, "question_id": 58142797, "link": "https://stackoverflow.com/questions/58142797/custom-extension-for-haskell-file/58149745#58149745", "title": "Custom extension for haskell file", "body": "<p>GHC has a <code>-x</code> option to override the meaning of file suffixes, see <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/using.html#ghc-flag--x%20%E2%9F%A8suffix%E2%9F%A9\" rel=\"nofollow noreferrer\">the user guide</a>:</p>\n\n<blockquote>\n  <p>-x \u27e8suffix\u27e9<br>\n  Causes all files following this option on the command line to be processed as if they had the suffix \u27e8suffix\u27e9. For example, to compile a Haskell module in the file M.my-hs, use ghc -c -x hs M.my-hs.</p>\n</blockquote>\n\n<p>I've used this to compile <code>.md</code> files as <code>.lhs</code> (instead of storing the files directly as <code>.lhs</code>, which may prevent other tooling from telling the format to render from).</p>\n"}], "owner": {"reputation": 532, "user_id": 660339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ba401042a68ed65c16f73c8cf3a15287?s=128&d=identicon&r=PG", "display_name": "Ivan Perez", "link": "https://stackoverflow.com/users/660339/ivan-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569699840, "creation_date": 1569635892, "question_id": 58142797, "link": "https://stackoverflow.com/questions/58142797/custom-extension-for-haskell-file", "title": "Custom extension for haskell file", "body": "<p>Is it possible to customize the extension that haskell files can have?</p>\n\n<p>That is, to tell GHC that a file with extension .yy.xxx should be accepted as a valid haskell file, and that a file with extension .yy.lxx should be accepted as literate haskell?</p>\n"}, {"tags": ["haskell", "cryptography"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1569632149, "post_id": 58142544, "comment_id": 102671156, "body": "<code>&quot;\\1\\2\\3\\4\\5&quot;</code> is a representation of the bytes [1, 2, 3, 4, 5]. The bytes [97, 98, 99, 100, 101] would show up as <code>&quot;abcde&quot;</code>. They\u2019re the printable ASCII interpretation when possible, and octal escape sequences otherwise."}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1569632150, "post_id": 58142544, "comment_id": 102671157, "body": "That&#39;s just a string, consisting mostly of unprintable characters - which is to be expected, given that only 95 out of 256 possible byte values correspond to an ASCII character.  The rest of the bytes are represented by an <i>escape sequence</i> of some sort: there are abbreviated ones for commonly-used control characters (<code>\\n</code> for example), names for less common control characters (<code>\\NAK</code>, etc.), and for everything else just a numeric character code (<code>\\159</code>, etc.)."}, {"owner": {"reputation": 80, "user_id": 3485832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ca82dbb0d58629330c67d346ec6643?s=128&d=identicon&r=PG&f=1", "display_name": "Krieger", "link": "https://stackoverflow.com/users/3485832/krieger"}, "edited": false, "score": 0, "creation_date": 1569632649, "post_id": 58142544, "comment_id": 102671222, "body": "Hmm thanks! I thought that&#39;s what it was but the brackets were throwing me."}], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 3485832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ca82dbb0d58629330c67d346ec6643?s=128&d=identicon&r=PG&f=1", "display_name": "Krieger", "link": "https://stackoverflow.com/users/3485832/krieger"}, "edited": false, "score": 0, "creation_date": 1569632816, "post_id": 58142600, "comment_id": 102671248, "body": "Thanks! I had the product (after a base64 conversion) and was able to work backwards and get that exact value but could not figure out the step I was missing. You made the connection for me!"}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1569632425, "creation_date": 1569632425, "answer_id": 58142600, "question_id": 58142544, "link": "https://stackoverflow.com/questions/58142544/haskell-crypto-hash-sha256-output/58142600#58142600", "title": "Haskell Crypto.Hash.SHA256 Output", "body": "<p>You're looking at the binary representation of the hash. You're probably used to seeing the hexadecimal representation. To get that, import <code>Data.ByteString.Builder</code> and call <code>toLazyByteString . byteStringHex</code> on it. With the hash in your question, the hexadecimal representation will be <code>9ffcaa4d15ddbd530abf7bc579091f55788f33f9c64b7d5d27c30a559a0f33c7</code>.</p>\n"}], "owner": {"reputation": 80, "user_id": 3485832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ca82dbb0d58629330c67d346ec6643?s=128&d=identicon&r=PG&f=1", "display_name": "Krieger", "link": "https://stackoverflow.com/users/3485832/krieger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 58142600, "answer_count": 1, "score": 1, "last_activity_date": 1569632425, "creation_date": 1569631426, "last_edit_date": 1569632197, "question_id": 58142544, "link": "https://stackoverflow.com/questions/58142544/haskell-crypto-hash-sha256-output", "title": "Haskell Crypto.Hash.SHA256 Output", "body": "<p>I'm new to Haskell so forgive me for not understanding the basics.</p>\n\n<p>When using the Crypto.Hash.SHA256 to hash the result is something like below.</p>\n\n<pre><code>\\159\\252\\170M\\NAK\\221\\189S\\n\\191{\\197y\\t\\USUx\\143\\&amp;3\\249\\198K}]'\\195\\nU\\154\\SI3\\199\n</code></pre>\n\n<p>Can anyone explain what the hell it is I'm looking at?</p>\n"}, {"tags": ["haskell", "generics", "lenses"], "comments": [{"owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "edited": false, "score": 0, "creation_date": 1569616122, "post_id": 58140677, "comment_id": 102668166, "body": "fixes a few confusing issues where I renamed sxLabel -&gt; getLabel, and replaced the the wrong code snipped from the last code block that shows a working example of using <code>field</code> (well, now it does)"}], "answers": [{"tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 3, "last_activity_date": 1569633851, "creation_date": 1569633851, "answer_id": 58142684, "question_id": 58140677, "link": "https://stackoverflow.com/questions/58140677/what-is-giving-rise-to-unsolved-type-constraints-in-this-generic-lens-applicatio/58142684#58142684", "title": "What is giving rise to unsolved type constraints in this generic-lens application?", "body": "<p>Your signature asks for <code>HasField'</code> on <code>HKD structure f</code> (for some unknown <code>f</code>), but you're actually trying to use <code>field'</code> on an <code>HKD structure (Const Text)</code>. Hence the \"missing instance\" error.</p>\n\n<p>You need to replace <code>f</code> with <code>Const Text</code> in the constraint and get rid of <code>f</code>:</p>\n\n<pre><code>getLabel :: forall ft structure inner.\n  G.HasField' ft (HKD structure (Const Text)) (Const Text inner) =&gt;\n  Labels structure -&gt; Text\ngetLabel labels = getConst $ labels ^. G.field' @ft\n</code></pre>\n"}], "owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58142684, "answer_count": 1, "score": 2, "last_activity_date": 1569633851, "creation_date": 1569614167, "last_edit_date": 1569616054, "question_id": 58140677, "link": "https://stackoverflow.com/questions/58140677/what-is-giving-rise-to-unsolved-type-constraints-in-this-generic-lens-applicatio", "title": "What is giving rise to unsolved type constraints in this generic-lens application?", "body": "<p>I have the following module based on examples from <a href=\"https://github.com/i-am-tom/higgledy\" rel=\"nofollow noreferrer\">higgledy</a> README as well as the <a href=\"https://hackage.haskell.org/package/higgledy-0.3.0.0/docs/src/Data.Generic.HKD.html#field\" rel=\"nofollow noreferrer\">source code</a> thereof.</p>\n\n<pre><code>{-# LANGUAGE AllowAmbiguousTypes       #-}\n{-# LANGUAGE ExistentialQuantification #-}\n{-# LANGUAGE FlexibleContexts          #-}\n{-# LANGUAGE KindSignatures            #-}\n{-# LANGUAGE ScopedTypeVariables       #-}\n{-# LANGUAGE TypeApplications          #-}\n\n\nmodule FDS.UtilTypes where\n\nimport           Control.Lens                     ((^.), Const (..))\nimport qualified Data.Generics.Internal.VL.Lens   as G\nimport qualified Data.Generics.Product            as G\nimport           Data.Functor.Const               (Const (..))\nimport           Data.Generic.HKD\nimport           Data.Kind (Type)\n\ntype Labels a = HKD a (Const Text) -- Every field holds a string.\n\nclass TextLabel (structure :: Type) where\n  textLabel :: HKD structure (Const Text)\n\ngetLabel :: forall ft f structure inner.\n  G.HasField' ft (HKD structure f) (f inner) =&gt;\n  Labels structure -&gt; Text\ngetLabel labels = getConst $ labels ^. G.field' @ft\n</code></pre>\n\n<p>It seems like I've faithfully reproduced their higgledy's <code>field</code> value in the first part of the signature of <code>getLabel</code>, but something is still amiss:</p>\n\n<pre><code>    \u2022 Could not deduce: Data.Generics.Product.Fields.ErrorUnless\n                          ft\n                          (HKD structure (Const Text))\n                          (generic-lens-1.1.0.0:Data.Generics.Internal.Families.Collect.CollectField                                                                              \n                             ft (GHKD_ (Const Text) (GHC.Generics.Rep structure)))\n        arising from a use of \u2018G.field'\u2019\n      from the context: G.HasField' ft (HKD structure f) (f inner)\n        bound by the type signature for:\n                   getLabel :: forall (ft :: ghc-prim-0.5.3:GHC.Types.Symbol) (f :: *\n                                                                                   -&gt; *) structure inner.                                                                         \n                              G.HasField' ft (HKD structure f) (f inner) =&gt;\n                              Labels structure -&gt; Text\n        at src/FDS/UtilTypes.hs:(45,1)-(47,26)\n    \u2022 In the second argument of \u2018(^.)\u2019, namely \u2018G.field' @ft\u2019\n      In the second argument of \u2018($)\u2019, namely \u2018labels ^. G.field' @ft\u2019\n      In the expression: getConst $ labels ^. G.field' @ft\n    \u2022 Relevant bindings include\n        labels :: Labels structure (bound at src/FDS/UtilTypes.hs:48:9)\n        getLabel :: Labels structure -&gt; Text\n          (bound at src/FDS/UtilTypes.hs:48:1)\n   |\n48 | getLabel labels = getConst $ labels ^. G.field' @ft\n   |                                       ^^^^^^^^^^^^\n\n    \u2022 Could not deduce (Data.Functor.Contravariant.Contravariant\n                          (GHKD_ (Const Text) (GHC.Generics.Rep structure)))\n        arising from a use of \u2018G.field'\u2019\n      from the context: G.HasField' ft (HKD structure f) (f inner)\n        bound by the type signature for:\n                   getLabel :: forall (ft :: ghc-prim-0.5.3:GHC.Types.Symbol) (f :: *\n                                                                                   -&gt; *) structure inner.                                                                         \n                              G.HasField' ft (HKD structure f) (f inner) =&gt;\n                              Labels structure -&gt; Text\n        at src/FDS/UtilTypes.hs:(45,1)-(47,26)\n    \u2022 In the second argument of \u2018(^.)\u2019, namely \u2018G.field' @ft\u2019\n      In the second argument of \u2018($)\u2019, namely \u2018labels ^. G.field' @ft\u2019\n      In the expression: getConst $ labels ^. G.field' @ft\n   |\n48 | getLabel labels = getConst $ labels ^. G.field' @ft\n   |                                       ^^^^^^^^^^^^\n</code></pre>\n\n<p>I can directly use higgledy's <code>field</code> implementation in the same code base like:</p>\n\n<pre><code>sxLabels :: Labels SxRecord\nsxLabels = textLabel @SxRecord\n\nmarkKey :: Text\nmarkKey = getConst $ sxLabels ^. field @\"mark\"\n\n</code></pre>\n\n<p>So why does this not work in the first case? Is there a fix?</p>\n"}, {"tags": ["haskell", "parametric-polymorphism", "type-constructor"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569605458, "post_id": 58139078, "comment_id": 102664645, "body": "I assume that there is <code>data</code> in front of that line?"}, {"owner": {"reputation": 81, "user_id": 11042609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2139b66b36b8cb251ef2e3f5d5daf4f?s=128&d=identicon&r=PG&f=1", "display_name": "chrometic", "link": "https://stackoverflow.com/users/11042609/chrometic"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569605646, "post_id": 58139078, "comment_id": 102664736, "body": "Yeah, you&#39;re right"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 7, "last_activity_date": 1569605683, "creation_date": 1569605683, "answer_id": 58139147, "question_id": 58139078, "link": "https://stackoverflow.com/questions/58139078/learning-the-meaning-of-operator-in-haskell/58139147#58139147", "title": "Learning the meaning of &quot; :?: &quot; operator in Haskell", "body": "<blockquote>\n  <p>My question is, what is the meaning of <code>:?:</code></p>\n</blockquote>\n\n<p>You are here <strong>defining</strong> a data constructor that is the <code>:?:</code> operator. Indeed, in GHCi you can query the type of the <code>(:?:)</code> function:</p>\n\n<pre><code>:t (:?:)\n(:?:) :: a -&gt; ListaOrd a -&gt; ListaOrd \n</code></pre>\n\n<p>It is thus exactly the same as if you would have used another name, like:</p>\n\n<pre><code>data ListaOrd a = <b>Conso</b> a (ListaOrd a) | Nulo deriving Show</code></pre>\n\n<p>But here we define a data constructor with name <code>(:?:)</code> that can be used with operator syntax as well. In fact you likely already used such data constructor(s). For example <code>(:)</code> is a data constructor for a list.</p>\n"}], "owner": {"reputation": 81, "user_id": 11042609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2139b66b36b8cb251ef2e3f5d5daf4f?s=128&d=identicon&r=PG&f=1", "display_name": "chrometic", "link": "https://stackoverflow.com/users/11042609/chrometic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 58139147, "answer_count": 1, "score": 2, "last_activity_date": 1569605683, "creation_date": 1569605346, "last_edit_date": 1569605625, "question_id": 58139078, "link": "https://stackoverflow.com/questions/58139078/learning-the-meaning-of-operator-in-haskell", "title": "Learning the meaning of &quot; :?: &quot; operator in Haskell", "body": "<p>I'm learning Haskell and I just saw this weird data structure in my book, it looks like this: <code>data ListaOrd a = a :?: (ListaOrd a) | Nulo deriving Show</code>. It was said that this supposed to represent an ordered list, but I don't think I really understood it. My question is, what is the meaning of \" :?: \" symbol in that code?</p>\n"}, {"tags": ["css", "haskell", "yesod"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1569578981, "post_id": 58132409, "comment_id": 102651688, "body": "Can you specify what you exactly did, and what problems that generates (compiler error, incorrect output, ...)?"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1569584446, "post_id": 58132409, "comment_id": 102654460, "body": "What exactly do you mean by <code>addStylesheetRemote...</code>? As far as I know, <code>...</code> is not Haskell syntax, yet you included it in a code block; if you didn\u2019t mean it to be code, then could you edit it to clarify?"}, {"owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "edited": false, "score": 0, "creation_date": 1569584924, "post_id": 58132409, "comment_id": 102654664, "body": "Willem, Brad: full - condensed - code added. Was testing Yesod as front-end client (I love it!) but my front-end looks very 1980-ish now owing to not having the css in, and prefer to not have it inline with every page load."}], "owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569591363, "creation_date": 1569578872, "last_edit_date": 1569591363, "question_id": 58132409, "link": "https://stackoverflow.com/questions/58132409/yesod-external-stylesheet-using-localhost", "title": "Yesod external stylesheet using localhost", "body": "<p>I am running a Haskell/Yesod webapp on <code>localhost:666</code>. I used <code>addScriptRemote</code> to load <code>JQuery</code>, which works fine. I would also like to load an external stylesheet and tried: <code>&lt;link rel=...&gt;</code> in <code>toWidgetHead</code>, <code>addStylesheetRemote...</code> <code>addStyleSheet</code> with typesafe URL.\nHowever, I can't seem to load the stylesheet. I did set the <code>approot</code> to <code>approot = ApprootStatic \"http://127.0.0.1\"</code> by reading another similar question on SO. </p>\n\n<pre><code>{-# LANGUAGE MultiParamTypeClasses #-}\n{-# LANGUAGE OverloadedStrings     #-}\n{-# LANGUAGE QuasiQuotes           #-}\n{-# LANGUAGE TemplateHaskell       #-}\n{-# LANGUAGE TypeFamilies          #-}\n\n\nmodule Main where\nimport           Text.Blaze.Html\nimport qualified Data.Text as T \nimport           Yesod\nimport           Hyper \n\ndata             WebApp = WebApp \ndata             MyRoute = Ext1 | Ext2 | Css1\ninstance         Yesod WebApp where \n  approot = ApprootStatic \"http://127.0.0.1:666\"\n\nmkYesod \"WebApp\" [parseRoutes|\n  /      HomeR  GET \n  /Page1 Page1R GET\n  /Page2 Page2R GET \n  -- /Json1 Json1R GET \n|]\n-- getHomeR is a handler-function. Most Yesod code lives in handler-functions\ngetHomeR :: Handler Html \ngetHomeR = defaultLayout [whamlet|placeholder&lt;a href=@{Page1R}&gt;to next #{pageVarPage}!|]\ngetPage1R :: Handler Html \ngetPage1R = defaultLayout [whamlet|\n  &lt;p style=\"font-family:sans-serif;color:red;\"&gt;placeholder static page 1.\n    nav towards &lt;a href=@{Page2R}&gt;page 2.\n|] \ngetPage2R :: Handler Html \ngetPage2R = defaultLayout $ do \n    setTitle \"#{pageVarPage}\"\n    toWidget [lucius| h1 {color:green;} |] \n    addScriptRemote \"https://code.jquery.com/jquery-3.4.1.js\"\n    addStylesheetRemote \"http://127.0.0.1/styles.css\"\n    toWidget\n      [julius|\n        $(function() {\n          $(\"h1\").click(function(){\n            alert (\"Test from the book\");\n          });\n        });\n      |]\n    toWidgetHead \n      [hamlet|\n        &lt;meta name=keywords content=\"haskell yesod framework\"&gt; \n        &lt;script type=\"javascript\" src=\"https://code.jquery.com/jquery-3.4.1.js\"&gt;\n        &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"styles.css\"&gt;\n      |]\n    toWidget \n      [hamlet|\n        &lt;h1&gt;Page header placeholder\n      |]\n    toWidgetBody \n      [hamlet|\n        &lt;p style=\"font-family:sans-serif\"&gt;placeholder for main text and divs\n      |]\n-- footer is currently of no relevance\n    [whamlet|\n      &lt;p&gt;footer\n      ^{footer}\n    |]\n</code></pre>\n"}, {"tags": ["haskell", "cabal"], "answers": [{"comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1569606373, "post_id": 58132379, "comment_id": 102665017, "body": "(Probably the sentence that starts &quot;Unfortunately&quot; should mention two different versions of <code>set-monad</code>.)"}], "tags": [], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "is_accepted": false, "score": 1, "last_activity_date": 1569578749, "creation_date": 1569578749, "answer_id": 58132379, "question_id": 58130569, "link": "https://stackoverflow.com/questions/58130569/cannot-install-set-monad-package-in-brand-new-ghc-installation/58132379#58132379", "title": "Cannot install set-monad package in brand new GHC installation", "body": "<p>This was introduced in <a href=\"https://github.com/giorgidze/set-monad/commit/da3ee07f69bf1fae13c57b20d65215e474de79c3\" rel=\"nofollow noreferrer\">da3ee07</a>, which changed the set-monad package from the <a href=\"https://prime.haskell.org/wiki/Libraries/Proposals/SemigroupMonoid\" rel=\"nofollow noreferrer\">old-style <code>Monoid</code> to current <code>Semigroup</code></a>. Unfortunately, that commit didn't think of keeping backwards compatibility as well, so that <code>set-monad-0.2</code> works <em>only</em> with GHC&lt;8.4 and <code>set-monad-0.2</code> only with GHC>8.2. Worse, that wasn't made explicit in the version bounds.</p>\n\n<p>This is already subject of <a href=\"https://github.com/giorgidze/set-monad/pull/3\" rel=\"nofollow noreferrer\">a pull request</a>, however it's never been merged.</p>\n\n<p>Simple solution: install <code>set-monad-0.2</code>.</p>\n"}], "owner": {"reputation": 501, "user_id": 3288446, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a9f15434d8ba934701d0abbf69f818cc?s=128&d=identicon&r=PG&f=1", "display_name": "incud", "link": "https://stackoverflow.com/users/3288446/incud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569578749, "creation_date": 1569572454, "question_id": 58130569, "link": "https://stackoverflow.com/questions/58130569/cannot-install-set-monad-package-in-brand-new-ghc-installation", "title": "Cannot install set-monad package in brand new GHC installation", "body": "<p>I just have installed GHC and Cabal. I'm getting stuck installing <code>set-monad</code> package. My setting is:</p>\n\n<pre><code>xxx:~$ ghc --version\nThe Glorious Glasgow Haskell Compilation System, version 8.2.2\n\nxxx:~$ cabal --version\ncabal-install version 2.0.0.1\ncompiled using version 2.0.1.0 of the Cabal library \n\nxxx:~$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 18.10\nRelease:    18.10\nCodename:   cosmic\n</code></pre>\n\n<p>When I'm trying to install the package I get:</p>\n\n<pre><code>xxx:~$ cabal update\nDownloading the latest package list from hackage.haskell.org\n\nxxx:~$ cabal install set-monad\nResolving dependencies...\nConfiguring set-monad-0.3.0.0...\nBuilding set-monad-0.3.0.0...\nFailed to install set-monad-0.3.0.0\nBuild log ( /home/incud/.cabal/logs/ghc-8.2.2/set-monad-0.3.0.0-3UdszwszaTh17UtmYfmrwd.log ):\ncabal: Entering directory '/tmp/cabal-tmp-12518/set-monad-0.3.0.0'\nConfiguring set-monad-0.3.0.0...\nPreprocessing library for set-monad-0.3.0.0..\nBuilding library for set-monad-0.3.0.0..\n[1 of 1] Compiling Data.Set.Monad   ( Data/Set/Monad.hs, dist/build/Data/Set/Monad.o )\n\nData/Set/Monad.hs:210:10: error:\n    Not in scope: type constructor or class \u2018Semigroup\u2019\n    |\n210 | instance Semigroup (Set a) where\n    |          ^^^^^^^^^\ncabal: Leaving directory '/tmp/cabal-tmp-12518/set-monad-0.3.0.0'\ncabal: Error: some packages failed to install:\nset-monad-0.3.0.0-3UdszwszaTh17UtmYfmrwd failed during the building phase. The\nexception was:\nExitFailure 1\n</code></pre>\n\n<p>Am I missing something? There aren't any further information on <a href=\"http://hackage.haskell.org/package/set-monad-0.3.0.0/set-monad.cabal\" rel=\"nofollow noreferrer\">hackage</a> about installing the package. </p>\n"}, {"tags": ["haskell", "haskell-hedgehog"], "comments": [{"owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "edited": false, "score": 0, "creation_date": 1569571069, "post_id": 58128625, "comment_id": 102647532, "body": "The Hedgehog issue tracker has the <a href=\"https://github.com/hedgehogqa/haskell-hedgehog/issues/287\" rel=\"nofollow noreferrer\">Stateful generation</a> issue that mentions that an instance is missing for StateT and some people demonstrate workarounds."}], "owner": {"reputation": 14543, "user_id": 235908, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/rTstt.jpg?s=128&g=1", "display_name": "Simon Shine", "link": "https://stackoverflow.com/users/235908/simon-shine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1569566394, "creation_date": 1569564068, "last_edit_date": 1569566394, "question_id": 58128625, "link": "https://stackoverflow.com/questions/58128625/running-a-stateful-hedgehog-generator", "title": "Running a stateful Hedgehog generator", "body": "<p>I've taken the following tree generator:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>genTree0 :: MonadGen m =&gt; m (Tree String)\ngenTree0 =\n  Gen.recursive Gen.choice\n    [ Node \"X\" [] ]\n    [ Node \"X\" &lt;$&gt; Gen.list (Range.linear 0 20) genTree0 ]\n</code></pre>\n\n<p>and rewritten it into a stateful one:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>genTree1 :: (MonadGen m, MonadState Int m) =&gt; m (Tree String)\ngenTree1 =\n  Gen.recursive Gen.choice\n    [ (`Node` []) &lt;$&gt; next ]\n    [ Node &lt;$&gt; next &lt;*&gt; Gen.list (Range.linear 0 20) genTree1 ]\n  where\n    next :: MonadState Int m =&gt; m String\n    next = fmap show (get &lt;* modify (+1))\n</code></pre>\n\n<p>But whereas I could before write e.g.</p>\n\n<pre><code>Gen.sample genTree &gt;= putStrLn . drawTree\n</code></pre>\n\n<p>I can no longer do that with the stateful version, because surely I have not initialized the state:</p>\n\n<pre><code>&gt; Gen.sample genTree\n\n&lt;interactive&gt;:149:12: error:\n    \u2022 No instance for (MonadState Int Identity)\n        arising from a use of \u2018genTree\u2019\n</code></pre>\n\n<p>Trying to fix this (assuming but not being fully convinced that <code>GenT</code> and <code>StateT</code> commute),</p>\n\n<pre><code>&gt; Gen.sample (evalStateT genTree 0)\n\n&lt;interactive&gt;:5:23: error:\n    \u2022 Could not deduce (MonadGen\n                          (StateT Int (Hedgehog.Internal.Gen.GenT Identity)))\n</code></pre>\n\n<p>I think there's a very small, last part related to type families that I'm not grokking. What could that be? If, for example, I add</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>genTree1 :: ( MonadGen m\n            , MonadState Int m\n            , GenBase m ~ Identity)\n         =&gt; m (Tree String)\n</code></pre>\n\n<p>(simply because I've seen this before)</p>\n\n<p>I get another error instead,</p>\n\n<pre><code>&gt; Gen.sample (runStateT genTree 0)\n\n&lt;interactive&gt;:15:23: error:\n    \u2022 Couldn't match type \u2018GenBase (StateT Int (GenT Identity))\u2019\n                     with \u2018Identity\u2019\n</code></pre>\n\n<p>Unfortunately, at this point, I just start guessing wrong at which constraint to apply.</p>\n\n<p><strong>Update:</strong> In another vein, I've tried to construct a specific monad transformer stack, since <code>genTree0</code> and <code>genTree1</code> have quite general signatures:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>newtype StateGen s a = StateGen { runStateGen :: StateT s (GenT IO) a }\n  deriving ( Functor, Applicative, Monad\n           , MonadState s\n           , MonadGen\n           , MonadIO\n           )\n</code></pre>\n\n<p>but this is also slightly wrong wrt. at least <code>MonadGen</code>.</p>\n\n<p>What must I type here, to get going, and better yet, where can I learn a better way than guessing?</p>\n"}, {"tags": ["list", "haskell"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1569560151, "post_id": 58128081, "comment_id": 102643479, "body": "Do you know how to do it in a non-tail-recursive way?"}, {"owner": {"reputation": 103, "user_id": 10972627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d00af50aff1717041d56488c6445e0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry.Fish", "link": "https://stackoverflow.com/users/10972627/larry-fish"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1569560879, "post_id": 58128081, "comment_id": 102643607, "body": "Yes, should I edit this and include it?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1569560899, "post_id": 58128081, "comment_id": 102643612, "body": "That sounds rather inefficient. Why do you want it to be tail recursive?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1569560976, "post_id": 58128081, "comment_id": 102643623, "body": "@Larry.Fish: Yes, you should. :)"}, {"owner": {"reputation": 103, "user_id": 10972627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d00af50aff1717041d56488c6445e0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry.Fish", "link": "https://stackoverflow.com/users/10972627/larry-fish"}, "edited": false, "score": 0, "creation_date": 1569561171, "post_id": 58128081, "comment_id": 102643673, "body": "I am doing this for a homework assignment"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1569561229, "post_id": 58128081, "comment_id": 102643686, "body": "@Larry.Fish You want three arguments then, <code>l1</code> and <code>l2</code> and the accumulator."}, {"owner": {"reputation": 103, "user_id": 10972627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d00af50aff1717041d56488c6445e0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry.Fish", "link": "https://stackoverflow.com/users/10972627/larry-fish"}, "edited": false, "score": 0, "creation_date": 1569561506, "post_id": 58128081, "comment_id": 102643764, "body": "Wouldn&#39;t that require 3 arguments passed in when I call it? What would I pass in as the third?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1569571268, "post_id": 58128081, "comment_id": 102647618, "body": "Yes, an accumulator-based solution uses a helper function with an additional argument. Initially, it can be an empty list. While recursing, prepend the element you wish to &quot;output&quot; to the accumulator. At the very end, the accumulator will contain the wanted list, in reversed order."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1569606214, "post_id": 58128081, "comment_id": 102664947, "body": "One of the following two things is almost certainly a bad sign: 1. <code>mergeTail</code> does not call <code>merge2</code> anywhere, OR 2. <code>mergeTail</code> does not call <code>(&gt;)</code> anywhere."}], "answers": [{"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1572893761, "post_id": 58139423, "comment_id": 103695122, "body": "the standard remedy for such cases is to build the accumulator in reverse, with the <i>efficient</i> <code>(:)</code>, and reverse the accumulated result in the base case before returning."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1572908161, "post_id": 58139423, "comment_id": 103700241, "body": "@WillNess I don&#39;t quite understand your concept, how it should be? I didn&#39;t know it"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1572934795, "post_id": 58139423, "comment_id": 103705747, "body": "you change <code>mergeAccum (acc ++ [y]) ...</code> in the recursive clauses into <code>mergeAccum (y : acc) ...</code> and you change the base case clause <code>... = acc</code> into <code>... = reverse acc</code>. :)"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 2, "last_activity_date": 1569608695, "last_edit_date": 1569608695, "creation_date": 1569607088, "answer_id": 58139423, "question_id": 58128081, "link": "https://stackoverflow.com/questions/58128081/tail-recursive-way-to-sort-and-merge-two-lists/58139423#58139423", "title": "Tail recursive way to sort and merge two lists", "body": "<p>First of all, let's see how a non-tail-recursive looks like:</p>\n\n<pre><code>merge :: Ord a =&gt; [a] -&gt; [a] -&gt; [a]\nmerge xs []                                 = xs\nmerge [] ys                                 = ys\nmerge fullXs@(x:xs) fullYs@(y:ys)  | x &lt;= y = x : merge xs fullYs\n                                   | x &gt; y  = y : merge fullXs ys\n</code></pre>\n\n<p>To make it tail recursion, you must have an <code>accum</code> somewhere, and call a sub function helper.\n As it is tail recursive, you must add the element at the end in order to maintain the order:</p>\n\n<p>See what happens with <code>foldl</code> :</p>\n\n<pre><code>foldl (flip (:)) [] [1,2,3,4,5]\n=&gt; [5,4,3,2,1]\n</code></pre>\n\n<p>So the function will be:</p>\n\n<pre><code>mergeTail :: Ord a =&gt; [a] -&gt; [a] -&gt; [a]\nmergeTail xs [] = xs\nmergeTail [] ys = ys\nmergeTail xs ys = mergeAccum [] xs ys\n\n\nmergeAccum :: Ord a =&gt; [a] -&gt; [a] -&gt; [a] -&gt; [a]\nmergeAccum acc [] []                       = acc\nmergeAccum acc [] (y:ys)                   = mergeAccum (acc ++ [y]) [] ys\nmergeAccum acc (x:xs) []                   = mergeAccum (acc ++ [x]) xs []\nmergeAccum acc (x:xs) (y:ys)  | x &lt;= y     = mergeAccum (acc ++ [x]) xs (y:ys)\n                              | x &gt; y      = mergeAccum (acc ++ [y]) (x:xs) ys\n</code></pre>\n\n<p>ejemplo:</p>\n\n<pre><code>$&gt; mergeTail [1,2,6] [1,2,3,5]\n=&gt; [1,1,2,2,3,5,6]\n</code></pre>\n\n<blockquote>\n  <p>Note:</p>\n</blockquote>\n\n<p>In this case this function is inefficient because it has to go to the end of the <code>accum</code> list every each recursive call. </p>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1572935163, "post_id": 58142604, "comment_id": 103705869, "body": "BTW <code>reverseOnto</code> is so common a paradigm to use in Lisps, I always thought there&#39;s  even a built-in for that, <code>revappend</code> or something; or should be, if there isn&#39;t. (or of course we can do <code>flip $ foldl&#39; (flip (:))</code> in Haskell). :)"}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 3, "last_activity_date": 1569632493, "creation_date": 1569632493, "answer_id": 58142604, "question_id": 58128081, "link": "https://stackoverflow.com/questions/58128081/tail-recursive-way-to-sort-and-merge-two-lists/58142604#58142604", "title": "Tail recursive way to sort and merge two lists", "body": "<p>As others have noted, this is a highly artificial exercise: merging two sorted lists to form one sorted list should <em>not</em> be done tail recursively in Haskell. But if you were building a <em>strict-spined</em> list in a language environment with a very limited call stack size and no support for tail recursion modulo cons, this could be a reasonable thing to do. In such an environment, it's usually best to divide problems like this into two parts:</p>\n\n<ol>\n<li><p>Walk through the list(s), building a list in reverse as an accumulator.</p></li>\n<li><p>Build the final result using the accumulator.</p></li>\n</ol>\n\n<p>Let's start with that.</p>\n\n<pre><code>merge :: Ord a =&gt; [a] -&gt; [a] -&gt; [a]\nmerge = \\xs ys -&gt; go [] xs ys\n  where\n    go acc [] ys = reverse acc ++ ys\n    go acc xs [] = reverse acc ++ xs\n    go acc xss@(x : xs) yss@(y : ys)\n      | x &lt;= y = go (x : acc) xs yss\n      | otherwise = go (y : acc) xss ys\n</code></pre>\n\n<p>There's an efficiency problem (even under the conditions described above): <code>reverse</code> completely rebuilds its argument, and <code>++</code> completely rebuilds its <em>first</em> argument. So <code>reverse acc ++ ys</code> rebuilds <code>acc</code> twice (if <code>++</code> were also written tail-recursively, it would be rebuilt <em>three times</em>). Let's fix that.</p>\n\n<pre><code>-- reverseOnto xs ys = reverse xs ++ ys\nreverseOnto :: [a] -&gt; [a] -&gt; [a]\nreverseOnto [] ys = ys\nreverseOnto (x : xs) ys = reverseOnto xs (x : ys)\n</code></pre>\n\n<p>Finally,</p>\n\n<pre><code>merge :: Ord a =&gt; [a] -&gt; [a] -&gt; [a]\nmerge = \\xs ys -&gt; go [] xs ys\n  where\n    go acc [] ys = acc `reverseOnto` ys\n    go acc xs [] = acc `reverseOnto` xs\n    go acc xss@(x : xs) yss@(y : ys)\n      | x &lt;= y = go (x : acc) xs yss\n      | otherwise = go (y : acc) xss ys\n</code></pre>\n\n<p>I believe that's about the best you can do under your constraints.</p>\n"}], "owner": {"reputation": 103, "user_id": 10972627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d00af50aff1717041d56488c6445e0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry.Fish", "link": "https://stackoverflow.com/users/10972627/larry-fish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1572883571, "creation_date": 1569560072, "last_edit_date": 1572883571, "question_id": 58128081, "link": "https://stackoverflow.com/questions/58128081/tail-recursive-way-to-sort-and-merge-two-lists", "title": "Tail recursive way to sort and merge two lists", "body": "<p>I'm trying to write a tail recursive way to merge two sorted lists into a single sorted list.</p>\n\n<p>Here is what I have. First I have non tail recursive way</p>\n\n<pre><code>merge2 :: Ord a =&gt; [a] -&gt; [a] -&gt; [a]\nmerge2 l1 [] = l1\nmerge2 [] l2 = l2\nmerge2 (x:xs) (y:ys) | x &gt; y = y : merge2 (x:xs) ys\n                     | x &lt; y = x : merge2 xs (y:ys)\n                     | otherwise = x : merge2 (x:xs) ys\n\nmergeTail :: Ord a =&gt; [a] -&gt; [a] -&gt; [a]\nmergeTail accum [] = accum\nmergeTail accum (x:xs) = mergeTail (x:accum) xs\n</code></pre>\n\n<p>When I input something like merge2Tail [1,2] [2,3,4] I expect to get [1,2,2,3,4] as the output but instead I get it in some random order. I'm not sure where or how to implement a case for checking order while keeping it tail recursive.</p>\n"}, {"tags": ["haskell", "int"], "comments": [{"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 3, "creation_date": 1569558061, "post_id": 58127646, "comment_id": 102643027, "body": "Well, no.  That&#39;s not how various integral types are defined.  The main way you can tell is that constructors are disjoint between types, but <code>(1 :: Int8)</code> and <code>(1 :: Integer)</code> both are valid.  That directly means that <code>1</code> isn&#39;t a constructor."}, {"owner": {"reputation": 3231, "user_id": 1013393, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bca51e5ae3eb8dc24a98616b4e5d6fd?s=128&d=identicon&r=PG", "display_name": "sjakobi", "link": "https://stackoverflow.com/users/1013393/sjakobi"}, "edited": false, "score": 5, "creation_date": 1569559615, "post_id": 58127646, "comment_id": 102643372, "body": "Types like Int, Integer, Int8 are primitive types, that are built into the compiler (GHC). <a href=\"https://www.fpcomplete.com/blog/2015/02/primitive-haskell\" rel=\"nofollow noreferrer\">This article</a> explains the basics."}, {"owner": {"reputation": 1263, "user_id": 5817767, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/209584382725014/picture?type=large", "display_name": "Pawan Kumar", "link": "https://stackoverflow.com/users/5817767/pawan-kumar"}, "reply_to_user": {"reputation": 3231, "user_id": 1013393, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bca51e5ae3eb8dc24a98616b4e5d6fd?s=128&d=identicon&r=PG", "display_name": "sjakobi", "link": "https://stackoverflow.com/users/1013393/sjakobi"}, "edited": false, "score": 1, "creation_date": 1569560287, "post_id": 58127646, "comment_id": 102643498, "body": "@sjakobi Thanks a lot for the article. That what I was looking for."}, {"owner": {"reputation": 1263, "user_id": 5817767, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/209584382725014/picture?type=large", "display_name": "Pawan Kumar", "link": "https://stackoverflow.com/users/5817767/pawan-kumar"}, "reply_to_user": {"reputation": 3231, "user_id": 1013393, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bca51e5ae3eb8dc24a98616b4e5d6fd?s=128&d=identicon&r=PG", "display_name": "sjakobi", "link": "https://stackoverflow.com/users/1013393/sjakobi"}, "edited": false, "score": 0, "creation_date": 1569561074, "post_id": 58127646, "comment_id": 102643642, "body": "@sjakobi Is there any Free material of haskell from &quot;fpcomplete&quot; guys. If so please provide a link."}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 2, "creation_date": 1569569610, "post_id": 58127646, "comment_id": 102646846, "body": "@PKChem You can find more of their articles at <a href=\"https://www.fpcomplete.com/blog\" rel=\"nofollow noreferrer\">fpcomplete.com/blog</a>. They\u2019re very interesting, but probably not the best resource to learn Haskell from (many of them assume intermediate to advanced Haskell knowledge as a prerequisite)."}], "owner": {"reputation": 1263, "user_id": 5817767, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/209584382725014/picture?type=large", "display_name": "Pawan Kumar", "link": "https://stackoverflow.com/users/5817767/pawan-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1569557755, "creation_date": 1569556509, "last_edit_date": 1569557755, "question_id": 58127646, "link": "https://stackoverflow.com/questions/58127646/how-numeric-types-are-defined-in-haskell", "title": "How Numeric types are defined in Haskell?", "body": "<p>I am new to haskell.</p>\n\n<p>Is Int defined as </p>\n\n<pre><code>data Int8 = (-128) | (-127) | (-126) | ..... | 0 | ..... | 126 | 127\n</code></pre>\n\n<p>then How about </p>\n\n<pre><code>data Integer = ?\n</code></pre>\n\n<p>&amp; how instance of Num Int is created</p>\n\n<pre><code>instance Num Int8 where\n   1 + 2 = 3\n   2 + 1 = 3\n   -- All permutation &amp; Combinations?\n</code></pre>\n"}, {"tags": ["list", "haskell", "tuples"], "comments": [{"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1569539309, "post_id": 58125768, "comment_id": 102639691, "body": "What do you mean by &quot;It does not work&quot;? Provide error message."}], "answers": [{"tags": [], "owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "is_accepted": false, "score": 1, "last_activity_date": 1569540266, "creation_date": 1569540266, "answer_id": 58125897, "question_id": 58125768, "link": "https://stackoverflow.com/questions/58125768/how-to-convert-a-list-of-strings-to-a-list-of-tuples-haskell/58125897#58125897", "title": "How to convert a list of Strings to a list of tuples? (Haskell)", "body": "<p>There are quite a few errors in your provided attempt. Luckily, these errors are mostly syntactical, and you are approaching the problem correctly.</p>\n\n<p>Let\u2019s go line by line:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>listToTuples :: [[String]] -&gt; [(String | Integer)]\n</code></pre>\n\n<p>This is almost correct, but:</p>\n\n<ul>\n<li>You have specified the input type to be <code>[[String]]</code> \u2014 that is, a list of list of strings. However, your input is actually a list of strings \u2014 that is, <code>[String]</code>.</li>\n<li><code>(String | Integer)</code> is not correct Haskell syntax. Correct syntax is <code>(String, Integer)</code>. Additionally, your output type is actually a tuple of a string, an integer, a string, an integer, a string, and an integer, which translates to <code>(String, Int, String, Int, String, Int)</code>. (You <em>can</em> use <code>Integer</code> if you want, but it\u2019s not required; if you\u2019re interested, search for the difference between <code>Int</code> and <code>Integer</code> in Haskell.)</li>\n</ul>\n\n<p>Putting these together, you get:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>listToTuples :: [String] -&gt; [(String, Int, String, Int, String, Int)]\n</code></pre>\n\n<p>That is, <code>listToTuples</code>, given a list of strings, will return a list of tuples. That sounds about right now!</p>\n\n<p>Now, onto the next line:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>    listToTuples = map listToTuples\n</code></pre>\n\n<p>You have two more mistakes here:</p>\n\n<ul>\n<li>Don\u2019t indent it! If you indent this line, Haskell will interpret it as a continuation of the previous line, which this shouldn\u2019t be. (For more information on Haskell indentation, refer to <a href=\"https://en.wikibooks.org/wiki/Haskell/Indentation\" rel=\"nofollow noreferrer\">https://en.wikibooks.org/wiki/Haskell/Indentation</a>).</li>\n<li>You are defining <code>listToTuples</code> in terms of <code>listToTuples</code>. This cannot possibly do anything! When the compiler tries to run your code, it will run into an infinite loop, where in order to run <code>listToTuples</code>, it will try to run <code>listToTuples</code> on every element on the list, which in term means it has to run <code>listToTuples</code> on every element of <em>those</em>, meaning\u2026</li>\n</ul>\n\n<p>Luckily, you are doing one thing right: you are using <code>map</code>! As you have noticed, <code>map</code> is exactly the right tool for this problem. So a solution would look like the following:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>listToTuples :: [String] -&gt; [(String, Int, String, Int, String, Int)]\nlistToTuples = map _\n</code></pre>\n\n<p>But with <code>_</code> replaced with a function converting a <code>String</code> to a <code>(String, Int, String, Int, String, Int)</code>. I will leave it to you to figure out what that function could be. (Hint: Use recursion to find all the bits between spaces, then use <code>read</code> to convert the strings to numbers.)</p>\n"}], "owner": {"reputation": 53, "user_id": 11882183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9065932e2b5338e2a92b2e253f6fbb64?s=128&d=identicon&r=PG&f=1", "display_name": "dvargasp", "link": "https://stackoverflow.com/users/11882183/dvargasp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1569569834, "creation_date": 1569539132, "last_edit_date": 1569569834, "question_id": 58125768, "link": "https://stackoverflow.com/questions/58125768/how-to-convert-a-list-of-strings-to-a-list-of-tuples-haskell", "title": "How to convert a list of Strings to a list of tuples? (Haskell)", "body": "<p>I have a list of Strings: students, their grade in a certain course, course name. I need to convert each String inside the list to a tuple since it holds both Strings and Integers. </p>\n\n<p>[\"PHL 220 A 3 Ada Lovelace A\", \"PHL 220 A 3 Grace Hopper C\",\"THE 105 A 3 Grace Hopper B+\"] </p>\n\n<p>to </p>\n\n<p>[(\"PHL\",220,\"A\",3,\"Lovelace, Ada\",4.0), (\"THE\",105,\"A\",3,\"Hopper, Grace\",3.33)]</p>\n\n<p>I tried this, but it does not work.</p>\n\n<pre><code>listToTuples :: [[String]] -&gt; [(String | Integer)]\n    listToTuples = map listToTuples\n</code></pre>\n\n<p>I am very new to Haskell, so the syntax is very confusing. </p>\n"}, {"tags": ["list", "haskell", "functional-programming"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user933161"}, "edited": false, "score": 2, "creation_date": 1569530450, "post_id": 58124431, "comment_id": 102637391, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/40097116/get-all-permutations-of-a-list-in-haskell\">Get all permutations of a list in Haskell</a>"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569530910, "post_id": 58124431, "comment_id": 102637579, "body": "What if the string is <code>&quot;abab&quot;</code>, should that result in <code>[&quot;abab&quot;, &quot;baba&quot;]</code>, or <code>[&quot;abab&quot;, &quot;baba&quot;, &quot;abab&quot;, &quot;baba&quot;]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 3, "creation_date": 1569530762, "post_id": 58124489, "comment_id": 102637510, "body": "Rotations are not the same as permutations. For example given &quot;abc&quot;, the rotations are &quot;abc&quot;, &quot;bca&quot;, and &quot;cab&quot;. Note that &quot;bac&quot; isn&#39;t in this list, even though it is a valid permutation."}], "tags": [], "owner": {"reputation": 2976, "user_id": 7493840, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/227486944377608/picture?type=large", "display_name": "Sereja Bogolubov", "link": "https://stackoverflow.com/users/7493840/sereja-bogolubov"}, "is_accepted": false, "score": 0, "last_activity_date": 1569530494, "creation_date": 1569530494, "answer_id": 58124489, "question_id": 58124431, "link": "https://stackoverflow.com/questions/58124431/rotating-a-list-in-haskell-with-all-posibilities/58124489#58124489", "title": "Rotating a list in Haskell with all posibilities", "body": "<p>Seems like you're interested in all permutations of all permutations. It means that you're dealing with a <code>[ [] ]</code> - list of list (recall that <code>\"ab\"</code> is just <code>['a', 'b']</code>). <code>Data.List</code> has what you need. <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-List.html#v:permutations\" rel=\"nofollow noreferrer\">Source code</a>. Otherwise, I've completely misunderstood your intention.</p>\n"}, {"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": false, "score": 0, "last_activity_date": 1569530649, "creation_date": 1569530649, "answer_id": 58124520, "question_id": 58124431, "link": "https://stackoverflow.com/questions/58124431/rotating-a-list-in-haskell-with-all-posibilities/58124520#58124520", "title": "Rotating a list in Haskell with all posibilities", "body": "<p>I would start by reusing the <code>rotate</code> function and apply some recursion:</p>\n\n<pre><code>circle text = text : (circle $ rotate text)\n</code></pre>\n\n<p>Now this produces an infinite list. If you only want each rotation once, then use <code>take</code>:</p>\n\n<pre><code>circle text = take (length text) $ text : (circle $ rotate text)\n</code></pre>\n\n<p>This version has the disadvantage of calculating the length of <code>text</code> each time you call <code>circle</code>. Instead, you could use a helper function with a counter that decrements for each recursion:</p>\n\n<pre><code>circle = circle' (length text)\n  where circle' 0 _ = []\n        circle' n text = text : (circle' (rotate text) (n - 1))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1569533270, "post_id": 58124740, "comment_id": 102638299, "body": "Use <code>tails</code> instead of <code>iterate tail</code>. The former doesn&#39;t rely on an infinite argument to produce fully-defined results."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1569535482, "post_id": 58124740, "comment_id": 102638908, "body": "@dfeuer I considered this, but I didn&#39;t really want to add an import, and the argument is guaranteed to be infinite."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1569536270, "post_id": 58124740, "comment_id": 102639104, "body": "<code>iterate (drop 1)</code>?"}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1569537230, "post_id": 58124740, "comment_id": 102639309, "body": "I&#39;m perfectly happy to use <code>tali</code> in cases where the list is locally known to be non-empty and pattern-matching would be inconvenient. Until <code>tail</code> is removed from the Prelude, I don&#39;t want to use weird stuff like <code>drop 1</code> to avoid it in the cases it&#39;s perfect for."}], "tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": false, "score": 7, "last_activity_date": 1569531737, "creation_date": 1569531737, "answer_id": 58124740, "question_id": 58124431, "link": "https://stackoverflow.com/questions/58124431/rotating-a-list-in-haskell-with-all-posibilities/58124740#58124740", "title": "Rotating a list in Haskell with all posibilities", "body": "<p>You can avoid any calls to <code>length</code>, as well as the repeated calls to <code>cycle</code> and ever-larger arguments to <code>drop</code>, by instead zipping any otherwise-infinite lists against the finite input list, to trim them to be the size you expect, discarding later elements:</p>\n\n<pre><code>circle xs = let trim ys = zipWith const ys xs\n            in trim . map trim . iterate tail . cycle $ xs\n\n*Main&gt; circle \"abc\"\n[\"abc\",\"bca\",\"cab\"]\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 12127295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e07b6af34c7bccf3e50e2e61fcafa1?s=128&d=identicon&r=PG&f=1", "display_name": "John C.", "link": "https://stackoverflow.com/users/12127295/john-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1569531737, "creation_date": 1569530211, "question_id": 58124431, "link": "https://stackoverflow.com/questions/58124431/rotating-a-list-in-haskell-with-all-posibilities", "title": "Rotating a list in Haskell with all posibilities", "body": "<p>How can I edit the following code to make Haskell show all the possibilities of rotating an input list from the user :</p>\n\n<pre><code>rotate ::  Int -&gt; [a] -&gt; [a]\nrotate n text = take (length text) (drop n (cycle text)) \n</code></pre>\n\n<p>I assume that to print all the possibilities we need to drop the first element X times. where X is the length of the list entered.</p>\n\n<pre><code>circle ::  [a] -&gt; [[a]]\ncircle text = take (length text) (drop (1) (cycle text))\n</code></pre>\n\n<p>I can't perform the operation where the list is printed X times. Also I have errors while running the above code which states the following:  <strong>Couldn't match type \u2018a\u2019 with \u2018[a]\u2019</strong> </p>\n\n<p>I wanted the Output to be something like that: </p>\n\n<pre><code>circle \"ab\"\n[\"ab\",\"ba\"]\n</code></pre>\n"}, {"tags": ["list", "haskell", "range"], "comments": [{"owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "edited": false, "score": 0, "creation_date": 1569522596, "post_id": 58122501, "comment_id": 102634079, "body": "Thanks, it really is a duplicate. Not sure if I have to delete it now or not according to StackOverflow policy."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1569522769, "post_id": 58122501, "comment_id": 102634182, "body": "No need to delete it. This question can serve as a search engine waypoint for people having the same problem."}], "owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1569521598, "answer_count": 0, "score": 0, "last_activity_date": 1569521617, "creation_date": 1569521438, "question_id": 58122501, "link": "https://stackoverflow.com/questions/58122501/ranges-in-haskell-for-type-that-is-a-combination-of-enumerated-types", "closed_reason": "Duplicate", "title": "Ranges in Haskell for type that is a combination of enumerated types", "body": "<p>Let's say I have these datatypes:</p>\n\n<pre><code>data A = A1 | A2 | A3 | A4 | A5 deriving (Enum)\ndata B = B1 | B2 | B3 | B4 deriving (Enum)\n\ndata C = C {a :: A, b :: B} \n</code></pre>\n\n<p>And then I want to create a list of [C], that contains all possible variants of combinations of As and Bs, with As at least A3. \nI thought it would work if I write it like this:</p>\n\n<pre><code>myListC = [(C A3 B1) .. (C A5 B4)]\n</code></pre>\n\n<p>and Haskell would automatically enumerate all of them. But, obviously, no. Deriving Enum in data C definition is also impossible. </p>\n\n<p>I understand that in this case, it isn't that hard to do it manually, but what if I have more variants in my data C? Is there some way to do it quickly? Would appreciate your help!</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1569513420, "post_id": 58120202, "comment_id": 102629910, "body": "<code>calc f x = sum (map (\\(coef, exp) -&gt; coef * x ^ exp) f)</code>"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 1, "creation_date": 1569515735, "post_id": 58120202, "comment_id": 102631000, "body": "<code>[(2,2),(3,1),(0,3)]</code> should be <code>[(2,2),(3,1),(3,0)]</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1569517725, "post_id": 58120202, "comment_id": 102631960, "body": "Read up on <a href=\"https://en.wikipedia.org/wiki/Horner%27s_method\" rel=\"nofollow noreferrer\">Horner&#39;s method</a> for a more efficient way to compute the value."}, {"owner": {"reputation": 3922, "user_id": 1198582, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/02d3e1025aed5f061c481871986c45b1?s=128&d=identicon&r=PG", "display_name": "Michael Litchard", "link": "https://stackoverflow.com/users/1198582/michael-litchard"}, "edited": false, "score": 0, "creation_date": 1569538797, "post_id": 58120202, "comment_id": 102639588, "body": "Welcome to Stack Overflow. Stack Overflow is not a code writing service."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12125985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/495d45046ad17a2c9a0bcd42cd653bde?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12125985/alex"}, "edited": false, "score": 0, "creation_date": 1569513579, "post_id": 58120574, "comment_id": 102629995, "body": "Sorry I dont know what folding is (it&#39;s my 3rd day of studying haskell)"}, {"owner": {"reputation": 6181, "user_id": 1025555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GBIIj.png?s=128&g=1", "display_name": "Good Night Nerd Pride", "link": "https://stackoverflow.com/users/1025555/good-night-nerd-pride"}, "reply_to_user": {"reputation": 1, "user_id": 12125985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/495d45046ad17a2c9a0bcd42cd653bde?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12125985/alex"}, "edited": false, "score": 0, "creation_date": 1569514656, "post_id": 58120574, "comment_id": 102630466, "body": "@Alex I was trolling a bit ;) Since you didn&#39;t tell us what you have tried, I gave the shortest answer I could come up with."}, {"owner": {"reputation": 1, "user_id": 12125985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/495d45046ad17a2c9a0bcd42cd653bde?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12125985/alex"}, "edited": false, "score": 0, "creation_date": 1569514856, "post_id": 58120574, "comment_id": 102630561, "body": "ok, fair enough"}], "tags": [], "owner": {"reputation": 6181, "user_id": 1025555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GBIIj.png?s=128&g=1", "display_name": "Good Night Nerd Pride", "link": "https://stackoverflow.com/users/1025555/good-night-nerd-pride"}, "is_accepted": false, "score": 0, "last_activity_date": 1569513233, "creation_date": 1569513233, "answer_id": 58120574, "question_id": 58120202, "link": "https://stackoverflow.com/questions/58120202/how-to-calculate-a-polynomial-equation-in-haskell/58120574#58120574", "title": "How to calculate a polynomial equation in haskell", "body": "<p>Easy: just fold over the list. The accumulator function should add the current term (solved for x) to the accumulate. The seed needs to be 0, of course.</p>\n"}, {"tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 2, "last_activity_date": 1569516042, "creation_date": 1569516042, "answer_id": 58121294, "question_id": 58120202, "link": "https://stackoverflow.com/questions/58120202/how-to-calculate-a-polynomial-equation-in-haskell/58121294#58121294", "title": "How to calculate a polynomial equation in haskell", "body": "<p>If you want a basic solution, try using explicit recursion:</p>\n\n<pre><code>evaluate :: [(Int, Int)] -&gt; Int -&gt; Int\nevaluate []             _x = .... -- TODO (1)\nevaluate ((a,n) : rest)  x = .... -- TODO (2)\n   where\n   result = evaluate rest x\n</code></pre>\n\n<p>Above, in <code>(1)</code> we need to specify what is the result of evaluating an \"empty\" polynomial (with no coefficients at all). This is the base case of our recursion.</p>\n\n<p>Instead, <code>(2)</code> is the recursive step. Here, we split the coefficients-pairs into the first <code>(a,n)</code>, and the rest of the list <code>rest</code>. We then recursively define <code>result = evaluate rest x</code> to evaluate the polynomial \"without the first coefficient\", that is <em>a</em><sub>1</sub>\u00b7<em>x</em><sup><em>n</em>\u22121</sup> + ... + <em>a</em><sub><em>n</em>\u22121</sub>\u00b7<em>x</em> + <em>a</em><sub><em>n</em></sub>.\nThen, in line <code>(2)</code> we need to combine this <code>result</code> with the first monomial, evaluated in <code>x</code>.</p>\n\n<p>You should now be able to fill the dots.</p>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1569516078, "creation_date": 1569516078, "answer_id": 58121306, "question_id": 58120202, "link": "https://stackoverflow.com/questions/58120202/how-to-calculate-a-polynomial-equation-in-haskell/58121306#58121306", "title": "How to calculate a polynomial equation in haskell", "body": "<p>something like this</p>\n\n<pre><code>&gt; peval p x = foldr (\\(a,n) s -&gt; s+(a*x^n)) 0 p\n&gt; poly = peval [(2,2),(3,1),(3,0)]\n&gt; map poly [0..5]\n\n[3,8,17,30,47,68]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12125985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/495d45046ad17a2c9a0bcd42cd653bde?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12125985/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "closed_date": 1569588031, "answer_count": 3, "score": -5, "last_activity_date": 1569516078, "creation_date": 1569511884, "last_edit_date": 1569512547, "question_id": 58120202, "link": "https://stackoverflow.com/questions/58120202/how-to-calculate-a-polynomial-equation-in-haskell", "closed_reason": "Needs more focus", "title": "How to calculate a polynomial equation in haskell", "body": "<p>Basically I need to calculate a polynomial in haskell based on a value x, and the values of the coeficients need to be stored in a list of tupples.</p>\n\n<p>So for example the polynomial <em>f</em>(<em>x</em>) = <em>a</em>\u00b7<em>x</em><sup><em>n</em></sup> + <em>a</em><sub>1</sub>\u00b7<em>x</em><sup><em>n</em>\u22121</sup> + ... + <em>a</em><sub><em>n</em>\u22121</sub>\u00b7<em>x</em> + <em>a</em><sub><em>n</em></sub> will be represented in a list of tuples like <code>f = [(a0, n), (a1, n-1), ... , (an-1, 1), (an, 0)]</code> , so if I want to calculate \n<code>2*x^2 + 3*x + 3</code> for <code>x=20</code> I will need the list <code>[(2,2), (3,1) , (0,3)]</code>.</p>\n\n<p>Thanks a lot in advance and sorry if I explained this exercise in a messy way :)</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1569510816, "post_id": 58119851, "comment_id": 102628626, "body": "What do you mean with &quot;since I can not write the code&quot;."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 5, "creation_date": 1569510845, "post_id": 58119851, "comment_id": 102628638, "body": "Can you explain why you think the above fragment, will generate the desired output?"}, {"owner": {"reputation": 2352, "user_id": 4518180, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQeHB.png?s=128&g=1", "display_name": "mkUltra", "link": "https://stackoverflow.com/users/4518180/mkultra"}, "edited": false, "score": 0, "creation_date": 1569513598, "post_id": 58119851, "comment_id": 102629998, "body": "Do you expect that <code>xs</code> is ordered? What about the infinite list?"}], "answers": [{"comments": [{"owner": {"reputation": 2352, "user_id": 4518180, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HQeHB.png?s=128&g=1", "display_name": "mkUltra", "link": "https://stackoverflow.com/users/4518180/mkultra"}, "edited": false, "score": 0, "creation_date": 1569514418, "post_id": 58119931, "comment_id": 102630352, "body": "It&#39;s can be a bit optimized checking that <code>lo</code> is less than <code>hi</code> and return an empty list if not."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 4, "last_activity_date": 1569522429, "last_edit_date": 1569522429, "creation_date": 1569510995, "answer_id": 58119931, "question_id": 58119851, "link": "https://stackoverflow.com/questions/58119851/how-to-set-the-range-of-a-list/58119931#58119931", "title": "How to set the range of a list?", "body": "<p>We can <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:filter\" rel=\"nofollow noreferrer\"><strong><code>filter :: (a -&gt; Bool) -&gt; [a] -&gt; [a]</code></strong></a> the list, such that it only retains values <code>x</code> for which <code>lo &lt;= x &amp;&amp; x &lt;= hi</code> holds: </p>\n\n<pre><code>inRange :: Ord a =&gt; a -&gt; a -&gt; [a] -&gt; [a]\ninRange lo hi = filter (<b>\\x -&gt; lo &lt;= x &amp;&amp; x &lt;= hi</b>)</code></pre>\n\n<p>We can optimize this for the case where <code>lo &gt; hi</code>, since then, no element can satisfy the condition, and hence we can return an empty list.</p>\n\n<pre><code>inRange :: Ord a =&gt; a -&gt; a -&gt; [a] -&gt; [a]\ninRange lo hi\n    | lo &gt; hi = []\n    | otherwise = filter (<b>\\x -&gt; lo &lt;= x &amp;&amp; x &lt;= hi</b>)</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1569519747, "creation_date": 1569519747, "answer_id": 58122112, "question_id": 58119851, "link": "https://stackoverflow.com/questions/58119851/how-to-set-the-range-of-a-list/58122112#58122112", "title": "How to set the range of a list?", "body": "<p>with list comprehensions</p>\n\n<pre><code>&gt; inRange lo hi xs = [ x | x &lt;- xs, x&gt;=lo &amp;&amp; x&lt;=hi ]\n&gt; inRange 5 10 [1..15]\n[5,6,7,8,9,10]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 0, "last_activity_date": 1569956727, "creation_date": 1569956727, "answer_id": 58190842, "question_id": 58119851, "link": "https://stackoverflow.com/questions/58119851/how-to-set-the-range-of-a-list/58190842#58190842", "title": "How to set the range of a list?", "body": "<p>With pattern matching you can do this like:</p>\n\n<pre><code>inRange :: Int -&gt; Int -&gt; [Int] -&gt; [Int]\ninRange _ _ [] = []\ninRange lo hi (x:xs)\n  | lo &gt; hi             = []\n  | lo &lt;= x &amp;&amp; x &lt;= hi  = x : (inRange lo hi xs)\n  | x &gt; hi              = []\n  | otherwise           = inRange lo hi xs\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 12125886, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lL_tHSWvd4A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf83z8SWPpiCu8AqntU5mT9fDe0kA/photo.jpg?sz=128", "display_name": "Kale Joe", "link": "https://stackoverflow.com/users/12125886/kale-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1569956727, "creation_date": 1569510743, "last_edit_date": 1569510788, "question_id": 58119851, "link": "https://stackoverflow.com/questions/58119851/how-to-set-the-range-of-a-list", "title": "How to set the range of a list?", "body": "<p>I have to write a code that that returns all numbers in the input list within the range given by the first two arguments.</p>\n\n<p>I tried to set the head of the list as the lowest input. </p>\n\n<pre><code>inRange :: Int -&gt; Int -&gt; [Int] -&gt; [Int]\ninRange lo hi xs = (x == lo : xs == hi)\n</code></pre>\n\n<p>I expect having a result such as \n<code>inRange 5 10 [1..15]  ==  [5,6,7,8,9,10]</code>, but since I cannot write the code the modular is not loading.</p>\n"}, {"tags": ["haskell", "yesod", "blaze-html", "shakespeare-text"], "comments": [{"owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "edited": false, "score": 0, "creation_date": 1569492597, "post_id": 58114329, "comment_id": 102618247, "body": "It seems that I overlooked the fact that if I make a <code>Widget</code> from a Shakespearean template I can have it served up by Warp. Not sure if this is the only way though..."}], "owner": {"reputation": 999, "user_id": 8604871, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36382829e5be7f6da95308288d976949?s=128&d=identicon&r=PG&f=1", "display_name": "Madderote", "link": "https://stackoverflow.com/users/8604871/madderote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1569492154, "creation_date": 1569492154, "question_id": 58114329, "link": "https://stackoverflow.com/questions/58114329/haskell-calling-html-using-shakespeare-without-yesod-widgets", "title": "Haskell calling HTML using Shakespeare without Yesod widgets", "body": "<p>Like Yesod, so diving in deep. Have a question: using Yesod I can call eg. data type <code>App</code> with <code>Warp</code> (<code>warp 3000 App</code>).\nHow can I serve up HTML created using Shakespeare templates (like below). Got this from Michael Snoyman's book. </p>\n\n<pre><code>{-# LANGUAGE OverloadedStrings         #-}\n{-# LANGUAGE TypeFamilies              #-}\n{-# LANGUAGE QuasiQuotes               #-}\n{-# LANGUAGE TemplateHaskell           #-}\nmodule Main where\n\nimport Text.Blaze.Html.Renderer.String (renderHtml) \nimport Text.Hamlet (HtmlUrl, hamlet) \nimport Data.Text (Text) \nimport Yesod\n\ndata WebRoutes = Home | Time | Stylesheet\n\nrender :: WebRoutes -&gt; [(Text, Text)] -&gt; Text \nrender Home _       = \"/home\"\nrender Time _       = \"/time\" \nrender Stylesheet _ = \"/stylesheet\" \n\ntemplate :: Text -&gt; HtmlUrl WebRoutes \ntemplate title = [hamlet|\n&lt;html&gt;\n  &lt;head&gt; \n    &lt;title&gt;#{varTitle} \n    &lt;link rel=stylesheet href=@{Stylesheet}&gt;\n  &lt;body&gt;\n    &lt;h1 #headerId&gt;#{title}\n|]\nvarTitle :: String \nvarTitle = \"Test outputd\" \n\nmain :: IO ()\nmain = putStrLn $ renderHtml $ template \"Test output\" render\n</code></pre>\n"}, {"tags": ["list", "haskell", "nested", "runtime-error", "non-exhaustive-patterns"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 3, "creation_date": 1569481065, "post_id": 58110682, "comment_id": 102612205, "body": "<code>countInRange v1 v2 [iL]</code> should be <code>countInRange v1 v2 iL</code> (no square brackets, your version only applies to a singleton list, whose member is itself a list of numbers). Unless you really want it to accept a list of lists, but that (even with the input that &quot;works&quot;) looks quite strange to me."}, {"owner": {"reputation": 103, "user_id": 10972627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d00af50aff1717041d56488c6445e0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry.Fish", "link": "https://stackoverflow.com/users/10972627/larry-fish"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1569482466, "post_id": 58110682, "comment_id": 102612930, "body": "Well the requirement is that I need to pass in two values and a nested list because I need to be able to work on the lists within the list."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1569483153, "post_id": 58110682, "comment_id": 102613270, "body": "(Minor style point: <code>rangeHelper v1 v2 x = x &gt; v1 &amp;&amp; x &lt; v2</code> is simpler. Don&#39;t check if a boolean value is true/false only to return the exact same value.)"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1569483443, "post_id": 58110682, "comment_id": 102613420, "body": "I don&#39;t completely understand your goal. What is the expected result of <code>countInRange 3 10 [[1,2],[3,40]]</code>? Three? So, in general <code>countInRange 3 10 [[a,b],[c,d]]</code> must be the same as <code>countInRange 3 10 [[a,b,c,d]]</code>? If so, consider <code>concat</code>enating the list of lists into a single list before counting."}, {"owner": {"reputation": 103, "user_id": 10972627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d00af50aff1717041d56488c6445e0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry.Fish", "link": "https://stackoverflow.com/users/10972627/larry-fish"}, "edited": false, "score": 0, "creation_date": 1569484544, "post_id": 58110682, "comment_id": 102613989, "body": "The goal would be to print the value of 3 when I call countInRange 3 10 [[1,2], [4,5,6]] because 4,5,6 are the only values that are greater 3 and less than 10."}], "answers": [{"comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569488176, "post_id": 58111889, "comment_id": 102615789, "body": "The answer is much better with your edit. StackOverflow at its best (imho). And thanks to you."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1569507310, "post_id": 58111889, "comment_id": 102626494, "body": "just a little copy editing, is all. :) the main idea is yours. and you&#39;re welcome. this reminds me of <a href=\"https://stackoverflow.com/questions/tagged/failure-slice\">failure-slice</a>: to see the problem clearer, minimize the code as much as possible while it still exhibits the same problematic behaviour."}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1569507411, "post_id": 58111889, "comment_id": 102626551, "body": "I call it minimization or test case generation and it is my favorite/go-to debugging technique."}], "tags": [], "owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "is_accepted": false, "score": 3, "last_activity_date": 1569485998, "last_edit_date": 1569485998, "creation_date": 1569483870, "answer_id": 58111889, "question_id": 58110682, "link": "https://stackoverflow.com/questions/58110682/count-the-number-of-values-in-a-nested-list-that-are-greater-and-less-than-certa/58111889#58111889", "title": "Count the number of values in a nested list that are greater and less than certain values", "body": "<p>If we were to simplify your function even to just</p>\n\n<pre><code>countInRange v1 v2 [ iL ]  =  0\n</code></pre>\n\n<p>we would still observe the same behavior:</p>\n\n<pre><code>countInRange 3 10 [ [4,5,6]        ]   -- returns 0\ncountInRange 3 10 [ [1,2], [4,5,6] ]   -- ***Error: Non-exhaustive patterns\n</code></pre>\n\n<p>Can you see the problem, here?</p>\n"}, {"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1569500019, "post_id": 58112197, "comment_id": 102622205, "body": "Instead of filtering &amp; counting each list, and then summing the counts, I think it&#39;s simpler to concatenate, filter, and then count, as in <code>length . filter (rangeHelper v1 v2) . concat</code>."}, {"owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1569508949, "post_id": 58112197, "comment_id": 102627589, "body": "@chi sure, that would be a better solution, I was just trying to change as little as possible in the existing solution"}], "tags": [], "owner": {"reputation": 362, "user_id": 4762234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/880403468672301/picture?type=large", "display_name": "Yogendra", "link": "https://stackoverflow.com/users/4762234/yogendra"}, "is_accepted": true, "score": 2, "last_activity_date": 1569488244, "last_edit_date": 1569488244, "creation_date": 1569485025, "answer_id": 58112197, "question_id": 58110682, "link": "https://stackoverflow.com/questions/58110682/count-the-number-of-values-in-a-nested-list-that-are-greater-and-less-than-certa/58112197#58112197", "title": "Count the number of values in a nested list that are greater and less than certain values", "body": "<p>Your <code>countInRange</code> function only expects a list that contains one list. When you write <code>countInRange v1 v2 [iL]</code> you only define it to match pattern when your list contains single element called <code>iL</code>. You can also use <code>count  = length</code></p>\n\n<p>You can fix this issue by defining it like this:</p>\n\n<pre><code>countInRange v1 v2 xs  = sum (map (length.filter (rangeHelper v1 v2)) xs)\n-- or\ncountInRange v1 v2     = sum.map (length.filter (rangeHelper v1 v2))\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 10972627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d00af50aff1717041d56488c6445e0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry.Fish", "link": "https://stackoverflow.com/users/10972627/larry-fish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 58112197, "answer_count": 2, "score": 1, "last_activity_date": 1569488244, "creation_date": 1569479006, "last_edit_date": 1569485904, "question_id": 58110682, "link": "https://stackoverflow.com/questions/58110682/count-the-number-of-values-in-a-nested-list-that-are-greater-and-less-than-certa", "title": "Count the number of values in a nested list that are greater and less than certain values", "body": "<p>I'm working on a function for a homework problem that counts the number of values in a list for which the values are greater than <code>v1</code> and less than <code>v2</code>. I've put something together that works but only in a specific case. When I try something else I get the error of</p>\n\n<blockquote>\n  <p>*** Exception: Non-exhaustive patterns in function countInRange</p>\n</blockquote>\n\n<p>This function is supposed to call on <code>getInRange</code>. <code>getInRange</code> just returns values from a list that are greater than <code>v1</code> and less than <code>v2</code>. Here is what it looks like.</p>\n\n<pre><code>rangeHelper v1 v2 x | x &gt; v1 &amp;&amp; x &lt; v2 = True\n                    | otherwise = False\n\ngetInRange :: Ord a =&gt; a -&gt; a -&gt; [a] -&gt; [a]\ngetInRange v1 v2 iL = filter(rangeHelper v1 v2) iL\n\ncount iL = sum (map (const 1) iL)\n\ncountInRange :: Ord a =&gt; a -&gt; a -&gt; [[a]] -&gt; Int\ncountInRange v1 v2 [iL] = count ((getInRange v1 v2) iL)\n</code></pre>\n\n<p>If I were to call </p>\n\n<pre><code>countInRange 3 10 [[4,5,6]]         -- works, prints 3\ncountInRange 3 10 [[1,2], [4,5,6]]  -- error: non exhaustive patterns\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 0, "creation_date": 1569477100, "post_id": 58110296, "comment_id": 102610604, "body": "Welcome to SO! I&#39;m a little bit confused by your question - are you asking why the typeclasses <code>Ord</code> and <code>Num</code> exist in the first place? Or are you asking why LearnYouAHaskell teaches the first one instead of the second?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1569477707, "post_id": 58110296, "comment_id": 102610801, "body": "You\u2019re right \u2013 <code>Integral</code> would be better. <code>replicate&#39; 3.3 5</code> shouldn\u2019t do what it does."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1569481817, "post_id": 58110296, "comment_id": 102612599, "body": "<code>Integral</code> implies <code>Num</code> and <code>Ord</code>."}, {"owner": {"reputation": 31, "user_id": 10848902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35da153b0a61f3bc40568961c82ce826?s=128&d=identicon&r=PG&f=1", "display_name": "Karthikeyan", "link": "https://stackoverflow.com/users/10848902/karthikeyan"}, "reply_to_user": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 0, "creation_date": 1569561330, "post_id": 58110296, "comment_id": 102643712, "body": "@FrankSchmitt I am trying to understand the difference."}], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 2, "creation_date": 1569512884, "post_id": 58111467, "comment_id": 102629639, "body": "N.b. in case of the <code>replicate&#39; 0 x = []</code> implementation, <code>replicate&#39; 3.14</code> would <i>also</i> generate an infinite list!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 11, "last_activity_date": 1569568865, "last_edit_date": 1569568865, "creation_date": 1569482312, "answer_id": 58111467, "question_id": 58110296, "link": "https://stackoverflow.com/questions/58110296/haskell-difference-between-num-a-ord-a-integral-a/58111467#58111467", "title": "Haskell: Difference between (Num a, Ord a) &amp; (Integral a)", "body": "<p>Haskell always aims to construct the most generic type signature. If we take a look at the implementation:</p>\n\n<pre><code>replicate' :: (Num i, Ord i) =&gt; i -&gt; a -&gt; [a]  \nreplicate' n x  \n    | n &lt;= 0    = []  \n    | otherwise = x:replicate' (n-1) x\n</code></pre>\n\n<p>We see that the <code>(&lt;=) :: Ord a =&gt; a -&gt; a -&gt; Bool</code> function is applied to <code>n</code>, and we calculate <code>n-1</code> in the recursion (with <code>(-) :: Num a =&gt; a -&gt; a -&gt; a</code>). The most generic type signature thus will add a <code>Num</code> and <code>Ord</code> type constraint on that number.</p>\n\n<p>We thus can call <code>replicate' 3.1415 1</code>, and it will return the first four items. But it is probably nonsensical to do that.</p>\n\n<p>The <code>Integral</code> typeclass is a typeclass for integral numbers. It supports integer division. Any <code>Integral</code> type must be a member of the <code>Real</code> and <code>Enum</code> typeclass.</p>\n\n<p>A type that is a member of the <code>Real</code> typeclass, should support a function <code>toRational :: Real a =&gt; a -&gt; Rational</code> to convert that number to a <code>Rational</code>, and furthermore should be a member of the <code>Num</code> and <code>Ord</code> typeclasses.</p>\n\n<p>This thus means that if a type is a member of the <code>Integral</code> typeclass, it is a member of <code>Num</code>, <code>Enum</code>, <code>Ord</code> and <code>Real</code> as well. You thus made the type more <em>restrictive</em>. But I think in the context of a <code>replicate'</code> it makes perfect sense to do that.</p>\n\n<p>Note that it might <em>not</em> be ideal to write:</p>\n\n<pre><code>replicate' :: (Num a, Ord a) =&gt; a -&gt; b -&gt; [b]\nreplicate' 0 x = []\nreplicate' n x = x:replicate' (n-1) x\n</code></pre>\n\n<p>In case we here call <code>replicate (-3) 1</code>, or <code>replicate 3.14 1</code> (as <a href=\"https://stackoverflow.com/questions/58110296/haskell-difference-between-num-a-ord-a-integral-a/58111467?noredirect=1#comment102629639_58111467\">@leftroundabout pointed out</a>), we will obtain an infinite list of <code>1</code>s.</p>\n"}], "owner": {"reputation": 31, "user_id": 10848902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35da153b0a61f3bc40568961c82ce826?s=128&d=identicon&r=PG&f=1", "display_name": "Karthikeyan", "link": "https://stackoverflow.com/users/10848902/karthikeyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1569568865, "creation_date": 1569476839, "last_edit_date": 1569562902, "question_id": 58110296, "link": "https://stackoverflow.com/questions/58110296/haskell-difference-between-num-a-ord-a-integral-a", "title": "Haskell: Difference between (Num a, Ord a) &amp; (Integral a)", "body": "<p>Both the following declarations work for <code>replicate' 3 5</code>. I am not able to understand why you need Num and Ord when Integral would do. The second one was what I came up with and the first one was here - <a href=\"http://learnyouahaskell.com/recursion\" rel=\"nofollow noreferrer\">http://learnyouahaskell.com/recursion</a>.</p>\n\n<p>What do I lost with just Integral?</p>\n\n<p>1</p>\n\n<pre><code>replicate' :: (Num a, Ord a) =&gt; a -&gt; b -&gt; [b]\nreplicate' 0 x = []\nreplicate' n x = x:replicate' (n-1) x\n</code></pre>\n\n<p>2</p>\n\n<pre><code>replicate' :: (Integral a) =&gt; a -&gt; b -&gt; [b]\nreplicate' 0 x = []\nreplicate' n x = x:replicate' (n-1) x\n</code></pre>\n\n<p>Note: I need to give some clarification here after willem's answer below (he understood the question without this clarification). The code in <a href=\"http://learnyouahaskell.com/recursion\" rel=\"nofollow noreferrer\">http://learnyouahaskell.com/recursion</a> is</p>\n\n<pre><code>replicate' :: (Num i, Ord i) =&gt; i -&gt; a -&gt; [a]  \nreplicate' n x  \n    | n &lt;= 0    = []  \n    | otherwise = x:replicate' (n-1) x  \n</code></pre>\n\n<p>Not what I have mentioned in 1. Willem's reply explains all three snippets.</p>\n\n<p>Also, a related question is available at <a href=\"https://stackoverflow.com/questions/15927000/haskell-type-definition-etc?rq=1\">Haskell type definition, =&gt; etc</a></p>\n"}, {"tags": ["haskell", "haskell-lens", "lenses"], "answers": [{"comments": [{"owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 1, "creation_date": 1569481898, "post_id": 58110503, "comment_id": 102612642, "body": "Hmm, does this force me to define a new setter for every setter in Control.Lens that I want to use, eg. <code>+~</code>, <code>-~</code>, <code>||~</code>, <code>&lt;&gt;~</code>, <code>.~</code>, <code>%~</code>, etc? I would be surprised that Control.Lens, being the ultimate swiss-army knife that it is, doesn&#39;t have something like this out of the box."}, {"owner": {"reputation": 67060, "user_id": 783743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/835bdcdab3e4bf466f0d59f809c50035?s=128&d=identicon&r=PG", "display_name": "Aadit M Shah", "link": "https://stackoverflow.com/users/783743/aadit-m-shah"}, "reply_to_user": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 0, "creation_date": 1569510501, "post_id": 58110503, "comment_id": 102628465, "body": "Yes, yes you would. However, it&#39;s not as bad as it seems. You can create a generic setter combinator and specialize it. For example, <code>maybeSetter :: (a -&gt; a -&gt; a) -&gt; ASetter s t a a -&gt; Maybe a -&gt; s -&gt; t; maybeSetter g f x = runIdentity . f (Identity . maybe id g x)</code>. Then, you can create specific functions like <code>(+!) = maybeSetter (+)</code>, <code>(-!) = maybeSetter subtract</code>, <code>(||!) = maybeSetter (||)</code>, <code>(&lt;&gt;!) = maybeSetter (flip (&lt;&gt;))</code>, <code>(.!) = maybeSetter const</code>, and <code>(%!) = maybeSetter id</code>. Note that this code is untested because I&#39;m typing it on my phone."}], "tags": [], "owner": {"reputation": 67060, "user_id": 783743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/835bdcdab3e4bf466f0d59f809c50035?s=128&d=identicon&r=PG", "display_name": "Aadit M Shah", "link": "https://stackoverflow.com/users/783743/aadit-m-shah"}, "is_accepted": false, "score": 5, "last_activity_date": 1569526805, "last_edit_date": 1569526805, "creation_date": 1569478078, "answer_id": 58110503, "question_id": 58110197, "link": "https://stackoverflow.com/questions/58110197/apply-a-lens-setter-only-when-the-input-value-is-a-just-x/58110503#58110503", "title": "Apply a lens &quot;setter&quot; only when the input value is a &quot;Just x&quot;?", "body": "<p>You could always define your own setter.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>maybeSetter :: (b -&gt; a -&gt; a) -&gt; ASetter s t a a -&gt; Maybe b -&gt; s -&gt; t\nmaybeSetter g f x = runIdentity . f (Identity . maybe id g x)\n\n(+!) :: Num a =&gt; ASetter s t a a -&gt; Maybe a -&gt; s -&gt; t\n(+!) = maybeSetter (+)\n\nlet target = (1, 2)\n    input1 = Just 10\n    input2 = Nothing\nin\n    (11, 2) == target &amp; (_1 . someSetter) +! input1 \n                      &amp; (_2 . someSetter) +! input2\n</code></pre>\n\n<p>You can also define other setters easily.</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>(-!) :: Num a =&gt; ASetter s t a a -&gt; Maybe a -&gt; s -&gt; t\n(-!) = maybeSetter subtract\n\n(||!) :: ASetter s t Bool Bool -&gt; Maybe Bool -&gt; s -&gt; t\n(||!) = maybeSetter (||)\n\n(&lt;&gt;!) :: Semigroup a =&gt; ASetter s t a a -&gt; Maybe a -&gt; s -&gt; t\n(&lt;&gt;!) = maybeSetter (flip (&lt;&gt;))\n\n(.!) :: ASetter s t a a -&gt; Maybe a -&gt; s -&gt; t\n(.!) = maybeSetter const\n\n(%!) :: ASetter s t a a -&gt; Maybe (a -&gt; a) -&gt; s -&gt; t\n(%!) = maybeSetter id\n</code></pre>\n\n<p>That's the cool thing about lenses. They are just regular functions.</p>\n"}], "owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1569526805, "creation_date": 1569476233, "last_edit_date": 1569476608, "question_id": 58110197, "link": "https://stackoverflow.com/questions/58110197/apply-a-lens-setter-only-when-the-input-value-is-a-just-x", "title": "Apply a lens &quot;setter&quot; only when the input value is a &quot;Just x&quot;?", "body": "<p>Is there any way to apply the combinators/setters mentioned at <a href=\"http://hackage.haskell.org/package/lens-4.17.1/docs/Control-Lens-Setter.html#g:4\" rel=\"nofollow noreferrer\">Control-Lens-Setter.html#g:4</a> when the <strong>input value</strong> (<em>not</em> the field being set), is a <code>Just x</code>?</p>\n\n<p>For example, considering the <code>(~+)</code> combinator, if I have the following:</p>\n\n<pre><code>let target = (1, 2)\n    input1 = Just 10\n    input2 = Nothing\n</code></pre>\n\n<p>I want a setter that does the following:</p>\n\n<pre><code>(11, 2) == target &amp; (_1 . someSetter) +~ input1 \n                  &amp; (_2 . someSetter) +~ input2\n</code></pre>\n\n<p>I'm trying to avoid using <code>fmap</code> or <code>maybe/fromMaybe</code> in this case, because I have a lot of such operations to do, and would prefer avoiding the boilerplate by leveraging the terseness/conciseness of lenses.</p>\n"}, {"tags": ["haskell", "programming-languages"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 12122708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2974148a344952cc73b49f75ce0817?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/12122708/bill"}, "edited": false, "score": 0, "creation_date": 1569891705, "post_id": 58109909, "comment_id": 102734297, "body": "Is there any way you can help with another part of this?"}], "tags": [], "owner": {"reputation": 2501, "user_id": 598892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a22954b638ce69b9994c9e3623953a5?s=128&d=identicon&r=PG", "display_name": "Chris Smith", "link": "https://stackoverflow.com/users/598892/chris-smith"}, "is_accepted": true, "score": 4, "last_activity_date": 1569474592, "creation_date": 1569474592, "answer_id": 58109909, "question_id": 58109339, "link": "https://stackoverflow.com/questions/58109339/trying-to-figure-out-what-this-haskell-code-means/58109909#58109909", "title": "Trying to figure out what this haskell code means", "body": "<p>To understand Haskell code, you usually want to look first at the types!  You haven't included them here, but they probably look something like this:</p>\n\n<pre><code>newtype Program = Program Exp\n\ndata Exp\n    = EApp Exp Exp\n    | EAbs String Exp\n    | EIf Exp Exp Exp Exp\n    | ELet String Exp Exp\n    | ERec String Exp Exp\n    | EFix Exp\n    | EVar String\n</code></pre>\n\n<p>I'm guessing at some details of the <code>Exp</code> type, for sure!</p>\n\n<p>Now, here's what's going on.  This defines the abstract syntax tree for a very simple programming language based on lambda calculus.  Each of the constructors for <code>Exp</code> is some syntax construct in the language: an function application (<code>EApp</code>), a lambda (<code>EAbs</code>), an if statement (<code>EIf</code>), and so on.  The <code>evalCBN</code> function is defining an interpreter, or evaluator, for that programming language.  Because there are many different syntax constructs, <code>evalCBN</code> is defined with <em>pattern matching</em>, where there's a different equation for each kind of syntax node that might need to be evaluated.  Because the tree structure is recursive, the evaluation function is also recursive.</p>\n\n<p>Presumably, the name <code>evalCBN</code> refers to the fact that it's evaluating using a \"call by need\" strategy, as opposed to a \"call by value\" strategy.  You can see that in the equation for applying a function:</p>\n\n<pre><code>evalCBN (EApp e1 e2) = case (evalCBN e1) of\n    (EAbs i e1') -&gt; evalCBN (subst i e2 e1')\n    e1' -&gt; EApp e1' e2\n</code></pre>\n\n<p>Notice how the argument <code>e2</code> isn't evaluated at all.  Instead, it's just substituted in its unevaluated form into the expression <code>e1'</code>.  A call by value variation would evaluate <code>e2</code> before substituting it.</p>\n\n<p>The equations for <code>ELet</code> and <code>ERec</code> (non-recursive let, and recursive let) are interesting in that all they do is rewrite the <code>ELet</code> or <code>ERec</code> into a different expression, and evaluate that instead.  This is a great example of what's called \"syntactic sugar\".  These syntactic forms don't make the language any more expressive; instead, they get shallowly rewritten into more a fundamental form in a \"desugaring\" process.</p>\n\n<p>If you have further questions, please ask something more specific.  There's a lot to this bit of code, so I can't answer everything!</p>\n"}], "owner": {"reputation": 19, "user_id": 12122708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed2974148a344952cc73b49f75ce0817?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/12122708/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1569478004, "accepted_answer_id": 58109909, "answer_count": 1, "score": -1, "last_activity_date": 1569474592, "creation_date": 1569470054, "question_id": 58109339, "link": "https://stackoverflow.com/questions/58109339/trying-to-figure-out-what-this-haskell-code-means", "closed_reason": "Needs more focus", "title": "Trying to figure out what this haskell code means", "body": "<p>Hey I'm very new to haskell and I can't quite seem to understand what is going on in this chunk of code</p>\n\n<pre><code>execCBN :: Program -&gt; Exp\nexecCBN (Prog e) = evalCBN e\n\nevalCBN :: Exp -&gt; Exp\nevalCBN (EApp e1 e2) = case (evalCBN e1) of\n    (EAbs i e1') -&gt; evalCBN (subst i e2 e1')\n    e1' -&gt; EApp e1' e2\nevalCBN (EIf e1 e2 e3 e4) = if (evalCBN e1) == (evalCBN e2) then evalCBN e3 else evalCBN e4\nevalCBN (ELet i e1 e2) = evalCBN (EApp (EAbs i e2) e1) \nevalCBN (ERec i e1 e2) = evalCBN (EApp (EAbs i e2) (EFix (EAbs i e1))\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["haskell"], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4789917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c66188d3afe7070457570133fe7395?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4789917/alex"}, "edited": false, "score": 0, "creation_date": 1569473102, "post_id": 58109633, "comment_id": 102609301, "body": "For flip, would it necessarily do this:  f foldListTree ?"}, {"owner": {"reputation": 1239, "user_id": 8887578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nMBo.png?s=128&g=1", "display_name": "Do Say Lazy", "link": "https://stackoverflow.com/users/8887578/do-say-lazy"}, "reply_to_user": {"reputation": 173, "user_id": 4789917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c66188d3afe7070457570133fe7395?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4789917/alex"}, "edited": false, "score": 0, "creation_date": 1569474199, "post_id": 58109633, "comment_id": 102609603, "body": "I&#39;m not sure what you mean. If I understand you correctly, no, <code>f foldListTree</code> is definitely not the same thing as <code>flip $ foldListTree f</code>. Syntactically flipping the two names and writing <code>f foldListTree</code> means that you&#39;re calling <code>f</code> with <code>foldListTree</code> as an argument, which wouldn&#39;t typecheck. The expression <code>foldListTree f</code> is a function itself, and <code>flip</code> switches the order of its two arguments."}], "tags": [], "owner": {"reputation": 1239, "user_id": 8887578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nMBo.png?s=128&g=1", "display_name": "Do Say Lazy", "link": "https://stackoverflow.com/users/8887578/do-say-lazy"}, "is_accepted": true, "score": 3, "last_activity_date": 1586536018, "last_edit_date": 1586536018, "creation_date": 1569472596, "answer_id": 58109633, "question_id": 58109262, "link": "https://stackoverflow.com/questions/58109262/folding-list-of-trees-hasekell/58109633#58109633", "title": "Folding list of trees - hasekell", "body": "<p>Let's look at this line:</p>\n\n<pre><code>foldListTree f base (ListNODE iL) = foldListTree f base (map f iL)\n</code></pre>\n\n<p>You have the following values available:</p>\n\n<ul>\n<li><code>foldListTree :: (a -&gt; a -&gt; a) -&gt; a -&gt; ListTree a -&gt; a</code></li>\n<li><code>f            :: a -&gt; (a -&gt; a)</code></li>\n<li><code>base         :: a</code></li>\n<li><code>iL           :: [ListTree a]</code></li>\n</ul>\n\n<p>and you need to inhabit <code>a</code>.</p>\n\n<p>Let's trace the type of your expression:</p>\n\n<ul>\n<li><code>map   :: forall c d. (c -&gt; d) -&gt; ([c] -&gt; [d])</code></li>\n<li><code>map f :: [a] -&gt; [a -&gt; a]</code>, where <code>c</code> is instantiated to <code>a</code> and <code>d</code> is instantiated to <code>a -&gt; a</code>.</li>\n</ul>\n\n<p>For the expression <code>map f iL</code> to be well-typed, <code>iL</code> should have type <code>[a]</code>, but it has type <code>[ListTree a]</code>. That's one type error, but not the one that the typechecker is reporting.</p>\n\n<p>In the code <code>foldListTree f base (map f iL)</code>, the third parameter should have type <code>ListTree a</code>. However, <code>map f iL</code> has type <code>[a -&gt; a]</code>.</p>\n\n<p>What you actually want is:</p>\n\n<pre><code>foldListTree f base (ListNODE iL) = foldl' (foldListTree f) base iL\n</code></pre>\n\n<p>This is the derivation:</p>\n\n<ul>\n<li><code>foldListTree                          :: (a -&gt; a -&gt; a) -&gt; a -&gt; ListTree a -&gt; a</code></li>\n<li><code>foldListTree f                        :: a -&gt; ListTree a -&gt; a</code></li>\n<li><code>foldl' (foldListTree f)         :: a -&gt; [ListTree a] -&gt; a</code></li>\n<li><code>foldl' (foldListTree f) base    :: [ListTree a] -&gt; a</code></li>\n<li><code>foldl' (foldListTree f) base iL :: a</code></li>\n</ul>\n\n<p>Note that the question asks for the leaves to be visited from left to right. (If <code>f</code> is not commutative, the order that you visit the leaves matters.) In your base case, you've used <code>foldr</code>, but you should actually use <code>foldl</code> or <code>foldl'</code>. I use <code>foldl'</code> here because it avoids thunk buildup.</p>\n\n<p>To use <code>foldl'</code>, you must import it:</p>\n\n<pre><code>import Data.List (foldl')\n</code></pre>\n\n<p>Update April 10, 2020: Update answer to use <code>foldl'</code> instead of <code>foldr</code>.</p>\n"}], "owner": {"reputation": 173, "user_id": 4789917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c66188d3afe7070457570133fe7395?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4789917/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 58109633, "answer_count": 1, "score": 0, "last_activity_date": 1586536018, "creation_date": 1569469385, "last_edit_date": 1569470325, "question_id": 58109262, "link": "https://stackoverflow.com/questions/58109262/folding-list-of-trees-hasekell", "title": "Folding list of trees - hasekell", "body": "<p>I am working on this problem and got stumped hard.  The problem is posted on the picture below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SeXpF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SeXpF.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/SeXpF.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/SeXpF.png</a></p>\n\n<p>Before it is marked as duplicate, someone has already answered this question but they changed the function definition to make their answer work. I've posted their solution here: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/58059220/find-sum-of-leaves\">Find Sum of leaves</a></p>\n\n<p>I'm looking for an answer that would actually work with the function definition described in the question itself.</p>\n\n<pre><code>foldListTree :: (a -&gt; a -&gt; a) -&gt; a -&gt; ListTree a -&gt; a\n</code></pre>\n\n<p>I've attempted to do the solution as follows: </p>\n\n<pre><code>data ListTree a = ListLEAF [a] | ListNODE [(ListTree a)]\n                  deriving (Show, Read, Eq)\n\nfoldListTree :: (a -&gt; a -&gt; a) -&gt; a -&gt; ListTree a -&gt; a\nfoldListTree f base (ListLEAF a) = foldr f base a\nfoldListTree f base (ListNODE iL) = foldListTree f base (map f iL)\n</code></pre>\n\n<p>However I get an error:</p>\n\n<pre><code>Couldn't match expected type `ListTree a' with actual type `[a -&gt; a]'\n\n</code></pre>\n\n<p>Any help would be appreciated, thanks!</p>\n"}, {"tags": ["haskell", "depth", "traversable"], "comments": [{"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 3, "creation_date": 1569457511, "post_id": 58108011, "comment_id": 102606449, "body": "It is impossible. Consider that both depth-first and breadth-first order give a valid Traversable implementation."}, {"owner": {"reputation": 14582, "user_id": 2225384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30b04ed4d0b3fc4bc791a28815f34ca?s=128&d=identicon&r=PG", "display_name": "Rein Henrichs", "link": "https://stackoverflow.com/users/2225384/rein-henrichs"}, "edited": false, "score": 0, "creation_date": 1569457883, "post_id": 58108011, "comment_id": 102606509, "body": "Also, consider what you need <i>in addition to</i> <code>Traversable</code>, which is at least some of what <a href=\"http://hackage.haskell.org/package/tree-traversals\" rel=\"nofollow noreferrer\">tree-traversals</a> provides, such as <code>Control.Applicative.Phase</code>."}], "answers": [{"tags": [], "owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "is_accepted": true, "score": 4, "last_activity_date": 1569468888, "creation_date": 1569468888, "answer_id": 58109214, "question_id": 58108011, "link": "https://stackoverflow.com/questions/58108011/is-it-impossible-to-get-the-depth-of-elements-inside-a-traversable/58109214#58109214", "title": "Is it impossible to get the depth of elements inside a Traversable?", "body": "<p>It is indeed impossible, as going from <code>Foldable</code> to <code>Traversable</code> cant't actually help. Obtaining the depths of your <code>Tree</code>s requires merging information from both subtrees under a branch. As far as...</p>\n\n<pre><code>traverse :: (Traversable t, Applicative f) =&gt; (a -&gt; f b) -&gt; t a -&gt; f (t b)\n</code></pre>\n\n<p>... is concerned, any such merger can only be attained through the combined applicative effect <code>f</code> of the result (a lawful <code>traverse</code> must preserve the shape of the <code>t</code> structure, and each <code>b</code> value is obtained from an individual <code>a</code> value through the <code>a -&gt; f b</code> function). Obtaining a combined effect, though, <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Foldable.html#v:traverse_\" rel=\"nofollow noreferrer\">is already possible through <code>Foldable</code></a>...</p>\n\n<pre><code>traverse_ :: (Foldable t, Applicative f) =&gt; (a -&gt; f b) -&gt; t a -&gt; f ()\n</code></pre>\n\n<p>... and so the additional power of <code>Traversable</code> makes no difference here.</p>\n\n<p>If merely pointing to <code>traverse_</code> feels insufficiently sharp, here is an alternative way of presenting the final step of the argument above. One of the naturality properties of <code>traverse</code> is the one called \"'naturality' in the datatype\" by Bird et al. in <a href=\"https://www.cs.ox.ac.uk/publications/publication7024-abstract.html\" rel=\"nofollow noreferrer\"><em>Understanding Idiomatic Traversals Backwards and Forwards</em></a> (see section 6 of that paper for details):</p>\n\n<pre><code>-- r is a natural transformation that preserves toList:\n-- toList = toList . r\nfmap r . traverse f = traverse f . r\n</code></pre>\n\n<p>Consider an arbitrary <code>toList</code>-preserving tree rearrangement <code>r :: Tree a -&gt; Tree a</code>, and some <code>f</code> such that the result of <code>traverse f</code> somehow encodes the depth of the tree. Since, as discussed above, only the combined effect matters for the purposes of computing the depth, <code>fmap (const ()) . traverse f</code> will encode the depth just as well as <code>traverse f</code>. Now, let's take the naturality property and compose <code>fmap (const ())</code> on both sides:</p>\n\n<pre><code>fmap (const ()) . fmap r . traverse f = fmap (const ()) . traverse f . r\n-- Or simply:\nfmap (const ()) . traverse f = fmap (const ()) . traverse f . r\n</code></pre>\n\n<p>Since <code>fmap (const ()) . traverse f</code> encodes the depth, this means <code>r</code>, whatever it is, won't change the depth of the tree. That, however, is not the case, as illustrated, for instance, by this counterexample:</p>\n\n<pre><code>-- Makes a tree with only leaves as left subtrees, preserving traversal order.\n-- Assuming a toList that matches your traverse, or the derived one. \nstraighten :: Tree a -&gt; Tree a\nstraighten = foldr dangle Leaf . toList\n    where\n    dangle x t = Branch Leaf x t\n</code></pre>\n"}], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 58109214, "answer_count": 1, "score": 3, "last_activity_date": 1569468888, "creation_date": 1569457115, "question_id": 58108011, "link": "https://stackoverflow.com/questions/58108011/is-it-impossible-to-get-the-depth-of-elements-inside-a-traversable", "title": "Is it impossible to get the depth of elements inside a Traversable?", "body": "<p>Suppose I have this <code>Tree</code> type:</p>\n\n<pre><code>{-# LANGUAGE DeriveFoldable, DeriveFunctor #-}\n\ndata Tree a = Leaf | Branch (Tree a) a (Tree a) deriving(Functor,Foldable)\n\ninstance Traversable Tree where -- equivalent to the one I could derive, but written out for clarity\n  traverse _ Leaf = pure Leaf\n  traverse f (Branch l x r) = Branch &lt;$&gt; traverse f l &lt;*&gt; f x &lt;*&gt; traverse f r\n</code></pre>\n\n<p>It's easy to write a function to calculate the maximum depth of things inside that specific type:</p>\n\n<pre><code>depth Leaf = 0\ndepth (Branch l _ r) = 1 + max (depth l) (depth r)\n</code></pre>\n\n<p>But it's not so easy to calculate the maximum depth of things inside an arbitrary <code>Traversable</code>. I already know that just <code>Functor</code> isn't enough for this, since you get no information about the \"position\" of things inside of them via <code>fmap</code>, and I also already know that just <code>Foldable</code> isn't enough for this, since <code>foldr</code> and <code>foldMap</code> both only give as much structure as lists have. <code>Traversable</code> might be, though, because it's more general than both <code>Functor</code> and <code>Foldable</code>.</p>\n\n<p>However, after doing some experimentation, I don't think there's a way to do it with <code>Traversable</code> either. Here's my logic so far. Consider these two trees:</p>\n\n<pre><code>fooTree = Branch (Branch Leaf () Leaf) () (Branch Leaf () Leaf)\nbarTree = Branch (Branch Leaf () (Branch Leaf () Leaf)) () Leaf\n</code></pre>\n\n<p>Now, <code>traverse (\\() -&gt; thingy) fooTree</code> is:</p>\n\n<pre><code>Branch &lt;$&gt; (Branch &lt;$&gt; pure Leaf &lt;*&gt; thingy &lt;*&gt; pure Leaf) &lt;*&gt; thingy &lt;*&gt; (Branch &lt;$&gt; pure Leaf &lt;*&gt; thingy &lt;*&gt; pure Leaf)\n</code></pre>\n\n<p>After lots of use of the Applicative laws and some simplification, that becomes:</p>\n\n<pre><code>(\\x y z -&gt; Branch (Branch Leaf x Leaf) y (Branch Leaf z Leaf)) &lt;$&gt; thingy &lt;*&gt; thingy &lt;*&gt; thingy\n</code></pre>\n\n<p>Similarly, <code>traverse (\\() -&gt; thingy) barTree</code> is:</p>\n\n<pre><code>Branch &lt;$&gt; (Branch &lt;$&gt; pure Leaf &lt;*&gt; thingy &lt;*&gt; (Branch &lt;$&gt; pure Leaf &lt;*&gt; thingy &lt;*&gt; pure Leaf)) &lt;*&gt; thingy &lt;*&gt; pure Leaf\n</code></pre>\n\n<p>After lots of use of the Applicative laws and some simplification, that becomes:</p>\n\n<pre><code>(\\x y z -&gt; Branch (Branch Leaf x (Branch Leaf y Leaf)) z Leaf) &lt;$&gt; thingy &lt;*&gt; thingy &lt;*&gt; thingy\n</code></pre>\n\n<p>Now <code>traverse (\\() -&gt; thingy) fooTree</code> and <code>traverse (\\() -&gt; thingy) barTree</code> look like they have the same \"shape\" (the only difference is the lambda at the beginning, and even the types of those are the same), but they came from trees that have different depths. This leads me to believe that it's impossible to find the depth in terms of <code>traverse</code>, but I'm not 100% sure about it and I'm not sure how to explain it rigorously.</p>\n\n<p>Am I right that it's impossible? If so, then how can this actually be explained rigorously? If not, then how would you implement it?</p>\n"}, {"tags": ["haskell", "conduit"], "comments": [{"owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "edited": false, "score": 0, "creation_date": 1569460986, "post_id": 58107971, "comment_id": 102607019, "body": "I just noticed there was a <code>ConduitM</code> in the message, but apparently <code>type ConduitM = ConduitT</code>, so that isn&#39;t the issue."}, {"owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "edited": false, "score": 0, "creation_date": 1569511364, "post_id": 58107971, "comment_id": 102628878, "body": "I&#39;m coming to realize that the issue relates <code>runConduit</code> (and all variants thereof) expecting <code>()</code> at the input position, and relatedly, I have no &quot;source&quot; that would have unit in the input position as currently written .... hmm"}], "answers": [{"tags": [], "owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "is_accepted": false, "score": 0, "last_activity_date": 1569530769, "creation_date": 1569530769, "answer_id": 58124544, "question_id": 58107971, "link": "https://stackoverflow.com/questions/58107971/why-is-there-an-unexpected-expected-type-of-in-this-conduit-composition-fu/58124544#58124544", "title": "Why is there an unexpected &quot;expected type&quot; of () in this conduit composition (fusion)?", "body": "<p>The reason is that <code>runConduit</code> requires <code>()</code> to be in the input type of the conduit component it is passed. But that is clearly not what we have here: we need a source for that, and we just don't have one in this context. Then we need to implement the function without using <code>runConduit</code>, so we can no longer construct intermediary conduits. See <a href=\"https://stackoverflow.com/questions/58104485/how-to-implement-a-takewhile-like-function-using-conduit-combinators\">How to implement a takeWhile-like function using Conduit combinators?</a> for an implementation that works.</p>\n\n<p><strong>Note</strong>: I came to this conclusion after playing out with the following conduits that made it a bit easier to see what was happening with types and variation in composition. The commented out examples have trouble compiling.</p>\n\n<pre><code>testCondComposedSink :: forall i o m. Monad m =&gt; ConduitT i o m [i]\ntestCondComposedSink = awaitVals () .| sinkList\n\ntestCondComposedTakeW :: forall i m. Monad m =&gt; ConduitT i i m ()\ntestCondComposedTakeW = awaitVals () .| CC.takeWhile (\\_ -&gt; True)\n\ntestCondComposedAll :: forall i o m. Monad m =&gt; ConduitT i o m [i]\ntestCondComposedAll = awaitVals () .| CC.takeWhile (\\_ -&gt; True) .| sinkList\n\ntakeWhileSinkList :: forall i o m. Monad m =&gt; (i -&gt; Bool) -&gt; ConduitT i o m [i]\ntakeWhileSinkList predicate = CC.takeWhile predicate .| sinkList\n\ntestCondComposedAll2 :: forall i o m. Monad m =&gt; ConduitT i o m [i]\ntestCondComposedAll2 = awaitVals () .| takeWhileSinkList (\\_ -&gt; True)\n\n-- testCondComposedAll2Run ::  forall i m. Monad m =&gt; m [i]\n-- testCondComposedAll2Run = testCondComposedAll2 &amp; runConduit\n\n-- takeWhileSinkList2 :: forall i m. Monad m =&gt; (i -&gt; Bool) -&gt; ConduitT () Void m [i]\n-- takeWhileSinkList2 predicate = CC.takeWhile predicate .| sinkList\n\n-- testCondComposedAll3 :: forall i o m. Monad m =&gt; ConduitT () o m [i]\n-- testCondComposedAll3 = awaitVals () .| takeWhileSinkList2 (\\_ -&gt; True)\n\n-- testCondComposedAll3Run ::  forall i m. Monad m =&gt; m [i]\n-- testCondComposedAll3Run = testCondComposedAll3 &amp; runConduit\n\n-- testCondDownsteram :: forall i o r m. Monad m =&gt; () -&gt; ConduitT i o m r\n-- testCondDownsteram = undefined\n</code></pre>\n"}], "owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569530769, "creation_date": 1569456703, "question_id": 58107971, "link": "https://stackoverflow.com/questions/58107971/why-is-there-an-unexpected-expected-type-of-in-this-conduit-composition-fu", "title": "Why is there an unexpected &quot;expected type&quot; of () in this conduit composition (fusion)?", "body": "<p>I have the following conduit components that are being fused together:</p>\n\n<pre><code>awaitVals () :: ConduitT (Element mono) (Element mono) m ()\nintermTmp :: forall o. (Element mono -&gt; Bool) -&gt; ConduitT (Element mono) o m ([Element mono])\n</code></pre>\n\n<p>The fusion occurs like: <code>awaitVals () .| intermTmp curPred</code>.</p>\n\n<p>According to the fuse function (<code>.|</code>), I think the types should be OK here. Fuse is:</p>\n\n<pre><code>(.|) :: Monad m\n     =&gt; ConduitT a b m ()\n     -&gt; ConduitT b c m r\n     -&gt; ConduitT a c m r\n</code></pre>\n\n<p>Here's the entire function definition:</p>\n\n<pre><code>takeWhileGrouped :: forall m mono. (Monad m, MonoFoldable mono) =&gt;\n  ([Element mono -&gt; Bool])\n  -&gt; ConduitT (Element mono) [Element mono] m ()\ntakeWhileGrouped preds = go preds\n  where\n    go (curPred:nextPreds) = yieldM (goIter curPred) &gt;&gt; go nextPreds\n    go [] = yield []\n    intermTmp :: forall o. (Element mono -&gt; Bool) -&gt; ConduitT (Element mono) o m ([Element mono])\n    intermTmp curPred = CC.takeWhile curPred .| sinkList\n    goIter :: (Element mono -&gt; Bool) -&gt; m ([Element mono])\n    goIter curPred =\n      (awaitVals () :: ConduitT (Element mono) (Element mono) m ())\n        .| (intermTmp curPred) &amp; runConduit\n\nawaitVals :: forall a m. Monad m =&gt; () -&gt; ConduitT a a m ()\nawaitVals _ = do\n  nextValMay &lt;- await\n  case nextValMay of\n    Just val -&gt; do\n      yield val\n      awaitVals ()\n    Nothing -&gt; pure ()\n</code></pre>\n\n<p>And here is the error:</p>\n\n<pre><code>    \u2022 Couldn't match type \u2018Element mono\u2019 with \u2018()\u2019\n      Expected type: ConduitM () () m ()\n        Actual type: ConduitT (Element mono) (Element mono) m ()\n    \u2022 In the first argument of \u2018(.|)\u2019, namely\n        \u2018(awaitVals () :: ConduitT (Element mono) (Element mono) m ())\u2019\n      In the first argument of \u2018(&amp;)\u2019, namely\n        \u2018(awaitVals () :: ConduitT (Element mono) (Element mono) m ())\n           .| (intermTmp curPred)\u2019\n      In the expression:\n        (awaitVals () :: ConduitT (Element mono) (Element mono) m ())\n          .| (intermTmp curPred)\n          &amp; runConduit\n    \u2022 Relevant bindings include\n        curPred :: Element mono -&gt; Bool\n          (bound at src/FDS/Data/Conduits.hs:151:12)\n        goIter :: (Element mono -&gt; Bool) -&gt; m [Element mono]\n          (bound at src/FDS/Data/Conduits.hs:151:5)\n        intermTmp :: forall o.\n                     (Element mono -&gt; Bool)\n                     -&gt; ConduitT (Element mono) o m [Element mono]\n          (bound at src/FDS/Data/Conduits.hs:149:5)\n        preds :: [Element mono -&gt; Bool]\n          (bound at src/FDS/Data/Conduits.hs:144:18)\n        takeWhileGrouped :: [Element mono -&gt; Bool]\n                            -&gt; ConduitT (Element mono) [Element mono] m ()\n          (bound at src/FDS/Data/Conduits.hs:144:1)\n    |\n151 |     goIter curPred = (awaitVals () :: ConduitT (Element mono) (Element mono) m ()) .| (intermTmp curPred) &amp; runConduit\n    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>I don't understand why the expected type disagrees with the actual type.\nHere's a more general question that I haven't totally wrapped up, but it does have a working solution near the end (but it doesn't use fuse to compose conduits at the outermost level): <a href=\"https://stackoverflow.com/questions/58104485/how-to-implement-a-takewhile-like-function-using-conduit-combinators\">How to implement a takeWhile-like function using Conduit combinators?</a>\nI should probably wait to look at this after having slept a reasonable amount, but I was very curious about this...</p>\n"}]