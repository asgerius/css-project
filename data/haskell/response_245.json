[{"tags": ["haskell", "types"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1568850338, "post_id": 58001891, "comment_id": 102409560, "body": "Hint: your function as it stands can return either <code>[]</code> or an element of the input list - and these therefore must have the same type. (I suspect the exercise doesn&#39;t intend for you to handle the error cases - and I don&#39;t think there&#39;s a good way to handle them other than using <code>Maybe</code>, which you may not have learned about yet.)"}, {"owner": {"reputation": 146, "user_id": 12068941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6b64b47bbb14429ecd2a9d6bc397d9?s=128&d=identicon&r=PG&f=1", "display_name": "trujello", "link": "https://stackoverflow.com/users/12068941/trujello"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1568852079, "post_id": 58001891, "comment_id": 102409832, "body": "Oh I see my error. I fixed it by all together returning <code>head xs</code> when <code>length xs &lt;= 2</code>.   But ideally, I would want to somehow treat the case of an empty list or a singleton list differently--if this were python, perhaps I would print an error message or something. But I can&#39;t really do that in Haskell; if I want to treat these cases differently, I must return something of type <code>a</code> if the input is of type <code>[a]</code>. Do you have any suggestions on how to handle this?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1568853663, "post_id": 58001891, "comment_id": 102410101, "body": "You could make it a runtime error, but a function of type <code>[a] -&gt; Maybe a</code> is more appropriate. &quot;Short&quot; lists return <code>Nothing</code>; longer lists return <code>Just x</code> (where <code>x</code> is the appropriate value from the list)."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1568856740, "post_id": 58001891, "comment_id": 102410633, "body": "@trujello, <code>head</code> in the prelude raises a runtime error if the list is empty.  People don&#39;t like it very much, but until you learn a better technique it&#39;s okay.  You can just say e.g. <code>error &quot;List was empty&quot;</code>."}, {"owner": {"reputation": 146, "user_id": 12068941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6b64b47bbb14429ecd2a9d6bc397d9?s=128&d=identicon&r=PG&f=1", "display_name": "trujello", "link": "https://stackoverflow.com/users/12068941/trujello"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1568866433, "post_id": 58001891, "comment_id": 102412255, "body": "@luqui I understand, thanks so much!"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1568877593, "post_id": 58001891, "comment_id": 102416190, "body": "As a general thumb rule, if you are using any of <code>head, tail, !!</code> you should consider using pattern matching instead -- those functions can easily crash your program on wrong input, when (exhaustive) pattern matching never does. Instead <code>length list == constant</code> never crashes, but is usually inefficient, since it scans the whole list when only the first elements would suffice -- again, pattern matching is the way to go."}], "answers": [{"tags": [], "owner": {"reputation": 194, "user_id": 4856316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMUS6.jpg?s=128&g=1", "display_name": "lzbernardo", "link": "https://stackoverflow.com/users/4856316/lzbernardo"}, "is_accepted": false, "score": 1, "last_activity_date": 1568851369, "creation_date": 1568851369, "answer_id": 58002075, "question_id": 58001891, "link": "https://stackoverflow.com/questions/58001891/haskell-type-signatures-question-on-type-signature-of-lastbutone-program/58002075#58002075", "title": "Haskell type signatures: Question on type signature of lastButOne Program", "body": "<p>You may explicitly declare your function's type signature by adding <code>lastButOne :: [a] -&gt; [a]</code> to your code. The function will then expect xs to be a list.</p>\n\n<p>But then we would meet another error: the fact that one of the outputs of your function (<code>head xs</code>) isn't in fact a list <code>[a]</code>, but rather an element <code>a</code>.</p>\n\n<p>A similar error message will pop up if you add the signature <code>lastButOne :: [a] -&gt; a</code>, but this time because <code>[]</code> is not an element of type <code>a</code>.</p>\n\n<p>A simple solution might be to return your second to last element inside a list, using <code>[head xs]</code> as an output.</p>\n"}, {"comments": [{"owner": {"reputation": 146, "user_id": 12068941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6b64b47bbb14429ecd2a9d6bc397d9?s=128&d=identicon&r=PG&f=1", "display_name": "trujello", "link": "https://stackoverflow.com/users/12068941/trujello"}, "edited": false, "score": 0, "creation_date": 1568860153, "post_id": 58002648, "comment_id": 102411197, "body": "Sorry I&#39;m a beginner in Haskell; could you clarify on what you mean here, i.e., on pattern matching?"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "reply_to_user": {"reputation": 146, "user_id": 12068941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6b64b47bbb14429ecd2a9d6bc397d9?s=128&d=identicon&r=PG&f=1", "display_name": "trujello", "link": "https://stackoverflow.com/users/12068941/trujello"}, "edited": false, "score": 3, "creation_date": 1568865639, "post_id": 58002648, "comment_id": 102412116, "body": "@trujello, pattern matching is the name given to this style of definition, where you give multiple equations for a function you are defining.  The first one says what to do when it is given an empty list, the second one when given a list with one element, and so on.  <a href=\"http://learnyouahaskell.com/syntax-in-functions\" rel=\"nofollow noreferrer\">read more here</a>"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1568877722, "post_id": 58002648, "comment_id": 102416258, "body": "I&#39;m not completely convinced the OP wants <code>lastButOne [x] = x</code> instead of being an error. (+1 anyway)"}], "tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": true, "score": 5, "last_activity_date": 1568857790, "creation_date": 1568857790, "answer_id": 58002648, "question_id": 58001891, "link": "https://stackoverflow.com/questions/58001891/haskell-type-signatures-question-on-type-signature-of-lastbutone-program/58002648#58002648", "title": "Haskell type signatures: Question on type signature of lastButOne Program", "body": "<p>You can acomplish that with pattern matching like:</p>\n\n<pre><code>lastButOne :: [a] -&gt; a\nlastButOne []    = error \"not elements\"\nlastButOne [x]   = x\nlastButOne [x,_] = x\nlastButOne (x:xs) = lastButOne xs\n</code></pre>\n"}], "owner": {"reputation": 146, "user_id": 12068941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6b64b47bbb14429ecd2a9d6bc397d9?s=128&d=identicon&r=PG&f=1", "display_name": "trujello", "link": "https://stackoverflow.com/users/12068941/trujello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 58002648, "answer_count": 2, "score": 3, "last_activity_date": 1568857790, "creation_date": 1568849370, "question_id": 58001891, "link": "https://stackoverflow.com/questions/58001891/haskell-type-signatures-question-on-type-signature-of-lastbutone-program", "title": "Haskell type signatures: Question on type signature of lastButOne Program", "body": "<p>I'm reading through <em>Real World Haskell</em> and one of the exercises is to construct a function lastButOne, which simply returns the second to last element of a list. </p>\n\n<p>My code so far:</p>\n\n<pre><code>lastButOne xs = if null xs || length xs == 1\n                    then []\n                else if length xs == 2\n                    then head xs\n                else lastButOne (tail xs)\n\n</code></pre>\n\n<p><strong>My problem</strong>:\nThe input <em>should</em> be a list, which then returns an empty list if it is either nonempty or is of length 1, and in other cases returns the second to last element. However, I get an error when I input a list. I don't get any errors when I input a second order nested list.</p>\n\n<p>I suspected something was wrong with the type signature, and when I call the type signature, it returns </p>\n\n<pre><code>lastButOne :: [[a]] -&gt; [a].\n</code></pre>\n\n<p>But I want the type signature to be <code>[a] -&gt; a</code>. I've stared at this function for a while and have explored other posts, but I can't seem to figure out why the type signature is <code>[[a]] -&gt; a</code>. Any hints would be appreciated.</p>\n"}, {"tags": ["haskell", "stack-overflow"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 6, "creation_date": 1568840591, "post_id": 58000613, "comment_id": 102407156, "body": "Hint: <code>id (43 + 94) == (id 43) + 94</code>, but that&#39;s not true for an arbitrary function."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 6, "last_activity_date": 1568840363, "creation_date": 1568840363, "answer_id": 58000652, "question_id": 58000613, "link": "https://stackoverflow.com/questions/58000613/why-does-mc-haskell-function-result-in-stack-overflow/58000652#58000652", "title": "Why does MC Haskell function result in stack overflow", "body": "<p>The first expression</p>\n\n<pre><code>mc $ mc x+11\n</code></pre>\n\n<p>is interpreted as</p>\n\n<pre><code>mc ((mc x) + 11)\n</code></pre>\n\n<p>since function application takes precedence over operators.</p>\n\n<p>The second expression</p>\n\n<pre><code>mc $ mc (x+11)\n</code></pre>\n\n<p>is interpreted as:</p>\n\n<pre><code>mc (mc (x+11))\n</code></pre>\n\n<p>The first indeed will never get evaluated, since if you write:</p>\n\n<pre><code><b>mc x</b> | x &gt; 100 = x-10\n     | otherwise = mc (<b>(mc x)</b> + 11)</code></pre>\n\n<p>then you define <code>mc x</code> in terms of <code>mc x</code>. Unless that <code>mc x</code> in that expression is not evaluated, you thus will call <code>mc x</code>, when calculating <code>mc x</code>, and thus it will keep making calls.</p>\n"}, {"tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": false, "score": 4, "last_activity_date": 1568840373, "creation_date": 1568840373, "answer_id": 58000655, "question_id": 58000613, "link": "https://stackoverflow.com/questions/58000613/why-does-mc-haskell-function-result-in-stack-overflow/58000655#58000655", "title": "Why does MC Haskell function result in stack overflow", "body": "<p>It's purely about operator precedence. In particular, function application takes precedence over all operators. So this:</p>\n\n<pre><code>mc x+11\n</code></pre>\n\n<p>is actually parsed as</p>\n\n<pre><code>(mc x)+11\n</code></pre>\n\n<p>and the fact that you tried to \"visually\" indicate the desired grouping by spacing or lack of it makes no difference. This of course is why your second version works better, since you explicitly indicated the grouping you want.</p>\n\n<p>Of course, the unintended interpretation means that, for <code>x &lt;= 100</code>, in order to evaluate <code>mc x</code> the compiler has to first evaluate <code>mc x</code>, and so on ad infinitum. Hence the eventual stack overflow.</p>\n"}], "owner": {"reputation": 55, "user_id": 9983599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7dkL0NLGwBY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3K1y5W1VIAFIZ_S8WOunFE7UTw-A/mo/photo.jpg?sz=128", "display_name": "jamesfake namesmith", "link": "https://stackoverflow.com/users/9983599/jamesfake-namesmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 58000652, "answer_count": 2, "score": 3, "last_activity_date": 1568843769, "creation_date": 1568840079, "last_edit_date": 1568843769, "question_id": 58000613, "link": "https://stackoverflow.com/questions/58000613/why-does-mc-haskell-function-result-in-stack-overflow", "title": "Why does MC Haskell function result in stack overflow", "body": "<p>I am working my way through the Haskell book and am on chapter 8. While doing the exercises I noticed something I didn't understand.</p>\n\n<p>Why does this result in stack overflow </p>\n\n<pre><code>mc x | x&gt;100 = x-10\n     | otherwise = mc $ mc x+11\n\n</code></pre>\n\n<p>but this doesn't</p>\n\n<pre><code>mc x | x&gt;100 = x-10\n     | otherwise = mc $ mc (x+11)\n</code></pre>\n\n<p>I think it has something to do with x+11 not being evaluated in the first example but aren't expressions like that always evaluated</p>\n\n<p>for example </p>\n\n<pre><code>Prelude&gt; id 43+94\n137\n</code></pre>\n"}, {"tags": ["string", "if-statement", "haskell", "types"], "answers": [{"comments": [{"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 2, "creation_date": 1568827888, "post_id": 57997789, "comment_id": 102402218, "body": "Not sure how lazy evaluation is relevant here. Particularly for if/then/else, Haskell&#39;s evaluation strategy is very similar to an imperative language&#39;s."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1568828558, "post_id": 57997789, "comment_id": 102402453, "body": "@amalloy: the <code>if ... then ... else ...</code> block itself is not eagerly evaluated. <code>foo = if ... then ... else ...</code> will not evaluate the condition, unless it is forced to evaluate <code>foo</code>."}, {"owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1568829408, "post_id": 57997789, "comment_id": 102402793, "body": "Sure, but so what? That&#39;s true of any expression. When telling someone how to implement <code>fib n = ...</code> we don&#39;t usually preface it by saying &quot;by the way, the body will only be evaluated if the result of <code>fib n</code> is needed&quot;. In this context it sounds like you are giving advice about some special consideration that must be made for if/then/else expressions, but I know of none such."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "edited": false, "score": 0, "creation_date": 1568829851, "post_id": 57997789, "comment_id": 102402971, "body": "@amalloy: indeed, although in the past I&#39;ve seen some questions where the OP thinks that <code>if ... then ... else</code> is not a function (see for example <a href=\"https://stackoverflow.com/questions/48355417/could-if-then-else-always-be-replaced-by-a-function-call\" title=\"could if then else always be replaced by a function call\">stackoverflow.com/questions/48355417/&hellip;</a>), but something &quot;special&quot; (just like <code>do</code> notation is often seen, as something &quot;non-functional&quot;)."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1568854385, "post_id": 57997789, "comment_id": 102410217, "body": "But it <i>is</i> something special and not a function; it&#39;s a separate syntactic construct equivalent to <code>case ... of True -&gt; ...; False -&gt; ...</code>."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1568830157, "last_edit_date": 1568830157, "creation_date": 1568826700, "answer_id": 57997789, "question_id": 57997702, "link": "https://stackoverflow.com/questions/57997702/defines-a-function-that-lets-you-see-if-the-integer-m-is-a-multiple-of-n/57997789#57997789", "title": "Defines a function that lets you see if the integer m is a multiple of n", "body": "<p>You are quite close. You can see an <code>if &hellip; then &hellip; else &hellip;</code> as a ternary operator in imperative languages. There is nothing special about <code>if &hellip; then &hellip; else &hellip;</code>, it can be seen as syntactical sugar for an expression <code>if' &hellip; &hellip; &hellip;</code>, and it has the same laziness rules as any other function. So it is similar to <code>&hellip; ? &hellip; : &hellip;</code> in Java, C#, etc.</p>\n\n<p>You thus can define this as:</p>\n\n<pre><code>multiple :: Integral a =&gt; a -&gt; a -&gt; String\nmultiple m n = <b>if</b> mod m n /= 0 <b>then</b> \"not multiple\" <b>else</b> \"multiple\"</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 12086308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0744fc863cb84f667cbf12ccc0e3bfb9?s=128&d=identicon&r=PG&f=1", "display_name": "unstablespartan", "link": "https://stackoverflow.com/users/12086308/unstablespartan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568845256, "creation_date": 1568826349, "last_edit_date": 1568845256, "question_id": 57997702, "link": "https://stackoverflow.com/questions/57997702/defines-a-function-that-lets-you-see-if-the-integer-m-is-a-multiple-of-n", "title": "Defines a function that lets you see if the integer m is a multiple of n", "body": "<p>I cannot have a correct use of if-sentences and I get the error \"parse error (possibly incorrect indentation or mismatched brackets)\".</p>\n\n<p>I've tried to use different if-sentences, but my experience is in Imperative Language, so I really don't know how to use properly the if-sentences in Haskell</p>\n\n<blockquote>\n<pre><code>multiple m n = mod m n\nif mod m n /= 0 then \"not multiple\"\n</code></pre>\n</blockquote>\n\n<p>OR</p>\n\n<blockquote>\n<pre><code>multiple m n = mod m n\nif mod m n = 0\nthen putStrLn \"multiple\"\n</code></pre>\n</blockquote>\n\n<p>OR</p>\n\n<blockquote>\n<pre><code>if multiple m n = 0 then \"multiple m n\" = \"multiple\"\n</code></pre>\n</blockquote>\n\n<p>And another amount of things</p>\n\n<p>I expected to get an answer like \"Multiple\" or \"Not Multiple\".</p>\n"}, {"tags": ["haskell", "record", "compiler-warnings"], "comments": [{"owner": {"reputation": 8621, "user_id": 1848029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjAy.jpg?s=128&g=1", "display_name": "lehins", "link": "https://stackoverflow.com/users/1848029/lehins"}, "edited": false, "score": 6, "creation_date": 1568822620, "post_id": 57996527, "comment_id": 102400108, "body": "I usually prefix them with underscore <code>_blah</code>"}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1568823528, "post_id": 57996527, "comment_id": 102400497, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8221201/how-to-temporarily-suppress-defined-but-not-used-warnings\">How to &#91;temporarily&#93; suppress &quot;defined but not used&quot; warnings?</a>"}, {"owner": {"reputation": 81794, "user_id": 9859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KEZOL.jpg?s=128&g=1", "display_name": "rampion", "link": "https://stackoverflow.com/users/9859/rampion"}, "edited": false, "score": 0, "creation_date": 1568838227, "post_id": 57996527, "comment_id": 102406315, "body": "I like the underscore solution, since it&#39;s consistent with my use of underscore variables for unused function arguments that I want to document."}], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1568840918, "post_id": 57997153, "comment_id": 102407264, "body": "The infinite-curry-unfolding trick is really quite neat. I&#39;m not sure like the <code>:: a</code> signature, but that can easily be changed."}, {"owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1568843494, "post_id": 57997153, "comment_id": 102408056, "body": "Yeah, you can give it whatever type you want obviously."}, {"owner": {"reputation": 8621, "user_id": 1848029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjAy.jpg?s=128&g=1", "display_name": "lehins", "link": "https://stackoverflow.com/users/1848029/lehins"}, "edited": false, "score": 0, "creation_date": 1568848230, "post_id": 57997153, "comment_id": 102409147, "body": "I&#39;d recommend this solution only if you can&#39;t or don&#39;t want to put underscores on the record names themselves. For example I&#39;ve used a similar trick with yesod/persistent data types generated with template haskell"}], "tags": [], "owner": {"reputation": 18055, "user_id": 936310, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/302ec54987694b9746abf8e2e0ad8caf?s=128&d=identicon&r=PG&f=1", "display_name": "alias", "link": "https://stackoverflow.com/users/936310/alias"}, "is_accepted": false, "score": 6, "last_activity_date": 1568824043, "creation_date": 1568824043, "answer_id": 57997153, "question_id": 57996527, "link": "https://stackoverflow.com/questions/57996527/whats-the-recommended-way-to-have-module-private-record-types-without-setting-o/57997153#57997153", "title": "What&#39;s the recommended way to have module-private record types without setting off -Wunused-top-binds?", "body": "<p>To avoid these, I usually add a definition like this to the module:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>_unused :: a\n_unused = error \"don't complain\" bla\n</code></pre>\n\n<p>The nice thing is you can chain them, like so:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>_unused :: a\n_unused = error \"don't complain\" bla bah foo bar\n</code></pre>\n\n<p>It's kind of crude, but gets the job done.</p>\n"}], "owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1568840809, "creation_date": 1568821525, "last_edit_date": 1568840809, "question_id": 57996527, "link": "https://stackoverflow.com/questions/57996527/whats-the-recommended-way-to-have-module-private-record-types-without-setting-o", "title": "What&#39;s the recommended way to have module-private record types without setting off -Wunused-top-binds?", "body": "<p>This module</p>\n\n<pre><code>module Foo (Foo, qux) where\n\ndata Foo = Foo {bla::Int}\n\nqux :: Foo\nqux = Foo 37\n</code></pre>\n\n<p>causes a warning when compiled with <code>-Wall</code>:</p>\n\n<pre><code>/tmp/wtmpf-file12937.hs:3:17: warning: [-Wunused-top-binds]\n    Defined but not used: \u2018bla\u2019\n  |\n3 | data Foo = Foo {bla::Int}\n  |                 ^^^\n</code></pre>\n\n<p>Ok \u2013 if <code>bla</code> were just a standalone function, this would be easy and should be fixed by removing <code>bla</code>. But for a record, the fields do more than just provide a name that can be used, they also serve as documentation in the code.</p>\n\n<p>What is the preferred way to get rid of the warning?</p>\n\n<p>It should be a permanent solution, should preferrably keep the record as-is, and preferrably not disable any warnings for the rest of the module.</p>\n"}, {"tags": ["haskell", "servant"], "comments": [{"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1568822326, "post_id": 57996516, "comment_id": 102399965, "body": "Certainly not an answer but:  Why is sqlite easier during development for you?  I find <code>docker run -p 5432 postgres</code> to be really clean and allows me to work with the same API as production.  Is it a resource constraint?  A platform issue?"}, {"owner": {"reputation": 83, "user_id": 2633351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dcbc02ff182062ac8f09635b9a4bf7c?s=128&d=identicon&r=PG", "display_name": "user2633351", "link": "https://stackoverflow.com/users/2633351/user2633351"}, "reply_to_user": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 1, "creation_date": 1569850871, "post_id": 57996516, "comment_id": 102719544, "body": "Hi Thomas, this is the option I have gone for; I think it makes the most sense."}], "owner": {"reputation": 83, "user_id": 2633351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dcbc02ff182062ac8f09635b9a4bf7c?s=128&d=identicon&r=PG", "display_name": "user2633351", "link": "https://stackoverflow.com/users/2633351/user2633351"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1568821470, "creation_date": 1568821470, "question_id": 57996516, "link": "https://stackoverflow.com/questions/57996516/using-servant-selda-and-sqlite-together", "title": "Using Servant, Selda, and SQLite together", "body": "<p>I have been using Haskell for a year or so, and it is fantastic. I have recently started using Servant; and I would like to use an SQL-library such as Selda, so that everything is type-safe. (This is truely incredible when combined with Elm! :) )</p>\n\n<p>There is an example here: <a href=\"https://github.com/dmjio/servant-selda\" rel=\"nofollow noreferrer\">https://github.com/dmjio/servant-selda</a> of using Selda with Servant, but only for postgres. During initial development, I've found it can be really useful to use SQLite.</p>\n\n<p>I feel this should be possible, but I can't seem to find any examples. I have tried to look at the type signatures, to understand how to pass SQLite as a Pool; but this is a little above my Haskell'ing skills!</p>\n\n<p>Has anyone experience of doing with Selda, or had success using another typesafe sql library with Servant? I am open to using other libraries other than Selda; I would like to use UUID's as primary-keys, and Persistent wasn't too happy when I tried this.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["haskell", "lenses"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1568806495, "post_id": 57991801, "comment_id": 102390665, "body": "Isn&#39;t your generalized from not a generalization of <code>[Maybe Text] -&gt; Maybe Text</code>?"}, {"owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568806955, "post_id": 57991801, "comment_id": 102390905, "body": "No, its actually <code>[Maybe Text] - &gt; Text</code> which should default to <code>&quot;&quot;</code> (empty string) for the edge-case."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568807011, "post_id": 57991801, "comment_id": 102390930, "body": "but your <code>(Monoid a, Traversable t) =&gt; t a -&gt; a</code> hints that you get a <code>Traversable</code> of <code>a</code>s (so <code>Maybe b</code>s), and thus if <code>a ~ Maybe b</code>, then it will thus return an <code>a</code> hence <code>Maybe b</code>."}, {"owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568807071, "post_id": 57991801, "comment_id": 102390961, "body": "I think my generalisation is wrong, in that case. The examples are the actual behaviour I want."}], "answers": [{"comments": [{"owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 0, "creation_date": 1568807167, "post_id": 57991969, "comment_id": 102391010, "body": "wow - I never realised that <code>Maybe</code>&#39;s monoid instance behaves this way - <code>Just &quot;abc&quot; &lt;&gt; Just &quot;def&quot; == Just &quot;abcdef&quot;</code>"}, {"owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 0, "creation_date": 1568807212, "post_id": 57991969, "comment_id": 102391032, "body": "This is a fine answer, but just for kicks, I&#39;ll wait to see if someone can come up with a solution with a lenses."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 1, "creation_date": 1568807229, "post_id": 57991969, "comment_id": 102391040, "body": "@SaurabhNanda: Yes <code>Maybe a</code> is an instance of <code>Monoid</code> *given <code>a</code> is an instance of <code>Monoid</code>. It will map a <code>Nothing &lt;&gt; Just x == Just x &lt;&gt; Nothing == Just x</code>, and <code>Just x &lt;&gt; Just y == Just (x &lt;&gt; y)</code>."}, {"owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 0, "creation_date": 1568807246, "post_id": 57991969, "comment_id": 102391049, "body": "I don&#39;t know why I was expecting <code>&lt;&gt;</code> to behave like <code>&lt;|&gt;</code> in the case of <code>Maybe</code>"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 7, "last_activity_date": 1568809226, "last_edit_date": 1568809226, "creation_date": 1568806945, "answer_id": 57991969, "question_id": 57991801, "link": "https://stackoverflow.com/questions/57991801/how-to-concatenate-maybe-text-with-lenses/57991969#57991969", "title": "How to concatenate [Maybe Text] with lenses?", "body": "<p>Your <code>(Monoid a, Traversable t) =&gt; t a -&gt; a</code> function can be generalized further to a simple <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Foldable.html#v:fold\" rel=\"noreferrer\"><strong><code>fold :: (Foldable f, Monoid a) =&gt; f a -&gt; a</code></strong></a>.</p>\n\n<p>For example:</p>\n\n<pre><code>Prelude&gt; import Data.Foldable\nPrelude Data.Foldable&gt; fold [Just \"abc\", Nothing, Just \"def\"]\nJust \"abcdef\"\n</code></pre>\n\n<p>We can unwrap it out of the <code>Maybe</code> with:</p>\n\n<pre><code>import Data.Foldable(fold, mempty)\nimport Data.Maybe(maybe)\n\nfoldMaybe :: (Foldable f, Monoid a) =&gt; f (Maybe a) -&gt; a\nfoldMaybe = fromMaybe mempty . fold\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Prelude Data.Foldable Data.Maybe&gt; foldMaybe [Just \"abc\", Nothing, Just \"def\"]\n\"abcdef\"\nPrelude Data.Foldable Data.Maybe&gt; foldMaybe [Nothing] :: String\n\"\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 4, "creation_date": 1568821825, "post_id": 57992470, "comment_id": 102399691, "body": "Better, I think: <code>foldMap fold</code>."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1568822747, "post_id": 57992470, "comment_id": 102400171, "body": "@dfeuer Agreed. Added."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1568840000, "post_id": 57992470, "comment_id": 102406956, "body": "If <code>p</code> is a monoid morphism, then we should have <code>p . foldMap f = foldMap (p . f)</code> (an unstated naturality law that Ed Kmett told me is guaranteed by parametricity). For <code>Maybe</code>, fold is indeed a monoid morphism. So fold @Maybe . foldMap f = foldMap (fold @Maybe . f). In this case, f = id."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1568909480, "post_id": 57992470, "comment_id": 102434078, "body": "Even better, <code>foldMap g</code> is generally a monoid morphism for <code>Maybe</code>, lists, and sequences, but not for sets or maps (even the &quot;monoidal&quot; style). I believe monoidal maps guarantee <code>foldMap g</code> is a commutative monoid morphism, but don&#39;t quote me on that."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 7, "last_activity_date": 1568822702, "last_edit_date": 1568822702, "creation_date": 1568808574, "answer_id": 57992470, "question_id": 57991801, "link": "https://stackoverflow.com/questions/57991801/how-to-concatenate-maybe-text-with-lenses/57992470#57992470", "title": "How to concatenate [Maybe Text] with lenses?", "body": "<p>As a variant to Willem's solution, I prefer a double <code>fold</code> (one for the list, another for the <code>Maybe</code>):</p>\n\n<pre><code>&gt; fold . fold $ [Just \"abc\", Nothing, Just \"def\"]\n\"abcdef\"\n</code></pre>\n\n<p>In fact, <code>fold = maybe mempty id = fromMaybe mempty</code> for <code>Maybe</code>, so it's really the same.</p>\n\n<p>Its general type is:</p>\n\n<pre><code>fold . fold :: (Monoid a, Foldable t1, Foldable t2, Monoid (t1 a)) =&gt; t2 (t1 a) -&gt; a\n</code></pre>\n\n<p>which perfectly applies to <code>[Maybe a]</code>.</p>\n\n<hr>\n\n<p>Another nice solution, suggested below by @dfeuer:</p>\n\n<pre><code>foldMap fold\n</code></pre>\n\n<p>Here, <code>fold</code> removes the <code>Just</code> wrappers while replacing <code>Nothing</code>s with empty strings. Then, <code>foldMap</code> concatenates all the resulting strings.</p>\n"}, {"tags": [], "owner": {"reputation": 12941, "user_id": 292731, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e3f90adedab79538799e2375a9731920?s=128&d=identicon&r=PG", "display_name": "Justin L.", "link": "https://stackoverflow.com/users/292731/justin-l"}, "is_accepted": false, "score": 4, "last_activity_date": 1568843422, "creation_date": 1568843422, "answer_id": 58001179, "question_id": 57991801, "link": "https://stackoverflow.com/questions/57991801/how-to-concatenate-maybe-text-with-lenses/58001179#58001179", "title": "How to concatenate [Maybe Text] with lenses?", "body": "<p>The answer is just a fold, so you can \"use lenses\" in a silly way using <code>foldOf</code></p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>foldOf :: Monoid a =&gt; Fold s a -&gt; s -&gt; a\n</code></pre>\n\n<p>so if you could find a <code>myFold :: Fold (t a) a</code>, you can use it with <code>foldOf</code> to get:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>foldOf myFold :: Monoid a =&gt; t a -&gt; a\n</code></pre>\n\n<p>Luckily for any instance of <code>Foldable t</code>, we have accesses to <code>folded :: Fold (t a) a</code>.  So we can use <code>foldOf</code> with <code>folded</code>:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>foldOf :: Monoid a =&gt; Fold s a -&gt; s -&gt; a\nfolded :: Foldable t =&gt; Fold (t a) a\n\nfoldOf folded :: (Foldable t, Monoid a) =&gt; t a -&gt; a\n</code></pre>\n"}], "owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 57991969, "answer_count": 3, "score": 3, "last_activity_date": 1568843422, "creation_date": 1568806396, "question_id": 57991801, "link": "https://stackoverflow.com/questions/57991801/how-to-concatenate-maybe-text-with-lenses", "title": "How to concatenate [Maybe Text] with lenses?", "body": "<p>Is there any way to write the following with lenses...</p>\n\n<pre><code>[Maybe Text] -&gt; Text\n</code></pre>\n\n<p>...which can probably be generalised to:</p>\n\n<pre><code>(Monoid a, Traversable t) =&gt; t a -&gt; a\n</code></pre>\n\n<p>A concrete example of what I'm trying to do:</p>\n\n<pre><code>[Just \"abc\", Nothing, Just \"def\"] -&gt; \"abcdef\"\n[Nothing, Nothing] -&gt; \"\"\n</code></pre>\n\n<p>PS: I'm <em>assuming</em> that lenses have some funky combinator to do this. If I'm being blindsided by the awesomeness of lenses, and this is achieved easily by a simpler combinator, please let me know.</p>\n"}, {"tags": ["scala", "haskell", "functional-programming", "terminology", "category-theory"], "comments": [{"owner": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "edited": false, "score": 7, "creation_date": 1568794788, "post_id": 57988106, "comment_id": 102383994, "body": "<a href=\"https://en.m.wikipedia.org/wiki/Universe_(mathematics)\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Universe_(mathematics)</a>"}, {"owner": {"reputation": 31243, "user_id": 2751851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ddc0.png?s=128&g=1", "display_name": "duplode", "link": "https://stackoverflow.com/users/2751851/duplode"}, "edited": false, "score": 12, "creation_date": 1568802908, "post_id": 57988106, "comment_id": 102388647, "body": "I suggest quoting a passage of <i>Category Theory for Programmers</i> that uses &quot;universe&quot; in the way you are thinking of, for the sake of a more precise answer."}, {"owner": {"reputation": 3831, "user_id": 5536315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/38Cjm.png?s=128&g=1", "display_name": "scriptum", "link": "https://stackoverflow.com/users/5536315/scriptum"}, "edited": false, "score": 0, "creation_date": 1568807994, "post_id": 57988106, "comment_id": 102391425, "body": "In FP context I&#39;d say it just means everything that is beyond the scope of your purely functional program, i.e. the term is used in a metaphorical sense."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 3831, "user_id": 5536315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/38Cjm.png?s=128&g=1", "display_name": "scriptum", "link": "https://stackoverflow.com/users/5536315/scriptum"}, "edited": false, "score": 3, "creation_date": 1568808905, "post_id": 57988106, "comment_id": 102391952, "body": "@bob: That is more commonly called the &quot;environment&quot; or the &quot;world&quot;. Universe in the sense the OP is asking about has a precisely defined meaning, and is related to the concept of &quot;universe of discourse&quot; in philosophy. So, in some sense, it is the exact opposite of what you are saying: it is everything that <i>is</i> in the scope of the program."}], "answers": [{"tags": [], "owner": {"reputation": 9111, "user_id": 90088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c018f213204496b4bbf481e7c8e6c15c?s=128&d=identicon&r=PG", "display_name": "Bartosz Milewski", "link": "https://stackoverflow.com/users/90088/bartosz-milewski"}, "is_accepted": true, "score": 7, "last_activity_date": 1568846978, "creation_date": 1568846978, "answer_id": 58001647, "question_id": 57988106, "link": "https://stackoverflow.com/questions/57988106/what-does-the-universe-mean/58001647#58001647", "title": "What does the universe mean?", "body": "<p>In the context of category theory, universes were introduced in order to bypass the paradoxes of set theory. For instance, Set is the category of sets, so its objects correspond to sets. The set of all objects in this category would be the set of all sets. But there is no set of all sets! <a href=\"https://en.wikipedia.org/wiki/Grothendieck_universe\" rel=\"noreferrer\">Grothendieck</a> introduced the idea of universes to deal with that. Essentially the set of all sets in a given universe is not a set in that universe--it's a set in the next bigger universe.</p>\n\n<p>In programming, we have to deal with polymorphic functions, which are functions defined for all types. But all types don't form a set. So languages like <a href=\"https://agda.readthedocs.io/en/v2.6.0/language/universe-levels.html\" rel=\"noreferrer\">Agda</a> let you work with types within a given universe. They call the lowest universe Set, but Set itself is a member of Set<sub>1</sub> and so on.</p>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 2, "accepted_answer_id": 58001647, "answer_count": 1, "score": 6, "last_activity_date": 1568846978, "creation_date": 1568794655, "last_edit_date": 1568836801, "question_id": 57988106, "link": "https://stackoverflow.com/questions/57988106/what-does-the-universe-mean", "title": "What does the universe mean?", "body": "<p>The articles about functional programming, a lot of them have mentioned about the universe.\nI am reading the book \"Category Theory for Programmers\" by Bartosz Milewski and he has also mentioned about universe a lot of times.\nThe question is, what does the universe mean in context of functional programming and category theory?  </p>\n"}, {"tags": ["haskell", "lambda-calculus", "quickcheck"], "comments": [{"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1568782218, "post_id": 57985003, "comment_id": 102378871, "body": "Yes there are libraries for this purpose <a href=\"https://hackage.haskell.org/package/generic-random\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/generic-random</a> you&#39;ll probably need to first learn how to use QuickCheck or some other randomness library though."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1568783492, "post_id": 57985003, "comment_id": 102379199, "body": "Do you want to generate only well-typed terms, or is garbage okay too?"}, {"owner": {"reputation": 779, "user_id": 5760615, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Y7T9x.jpg?s=128&g=1", "display_name": "Zeina Migeed", "link": "https://stackoverflow.com/users/5760615/zeina-migeed"}, "edited": false, "score": 0, "creation_date": 1568783688, "post_id": 57985003, "comment_id": 102379250, "body": "Ideally well-typed terms, but even if not, I can probably work with any random terms then filter them with my type checker"}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1568790223, "post_id": 57985003, "comment_id": 102381639, "body": "You can do it using a <a href=\"http://hackage.haskell.org/package/control-monad-omega\" rel=\"nofollow noreferrer\">fair backtracking monad</a>.  I wrote a <a href=\"https://lukepalmer.wordpress.com/2008/05/02/enumerating-a-context-free-language/\" rel=\"nofollow noreferrer\">blog post</a> about it some years ago."}, {"owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "edited": false, "score": 0, "creation_date": 1568903021, "post_id": 57985003, "comment_id": 102430533, "body": "Not that his language includes <code>Lam</code>, a binding construct."}], "answers": [{"tags": [], "owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "is_accepted": false, "score": 2, "last_activity_date": 1568902993, "creation_date": 1568902993, "answer_id": 58013194, "question_id": 57985003, "link": "https://stackoverflow.com/questions/57985003/generating-random-terms-from-a-grammar-simply-typed-lambda-calculus/58013194#58013194", "title": "Generating random terms from a grammar (simply typed lambda calculus)", "body": "<p>I don't really know of a library you could re-use. That library would probably also lock you in on a particular approach to binding constructs, like De Bruijn, Names, (P)HOAS or <code>bound</code>.</p>\n\n<p>I however know of an implementation in Haskell that does generate close, well-typed terms randomly: <a href=\"https://github.com/Gabriel439/Haskell-Morte-Library/blob/3c61df86985a7ccf97fe0765deac73f06b12c476/test/ClosedWellTyped.hs#L38\" rel=\"nofollow noreferrer\">https://github.com/Gabriel439/Haskell-Morte-Library/blob/3c61df86985a7ccf97fe0765deac73f06b12c476/test/ClosedWellTyped.hs#L38</a></p>\n\n<p>Maybe this is enough to get you rolling?</p>\n"}, {"comments": [{"owner": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "edited": false, "score": 0, "creation_date": 1569227037, "post_id": 58033049, "comment_id": 102513824, "body": "Note that this doesn&#39;t bother to produce semantically correct programs. As a result, the resulting generator will be very slow to generate non-trivial lambda terms. Also it is a little misleading in terms of hiding where the complexity lies: Coming up with <code>[&quot;x&quot;, &quot;y&quot;]</code> is the hard part here and depends on the result of <code>boolExpr</code> for any reasonable implementation."}, {"owner": {"reputation": 98, "user_id": 9224699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ayZoN.png?s=128&g=1", "display_name": "Commodore64", "link": "https://stackoverflow.com/users/9224699/commodore64"}, "reply_to_user": {"reputation": 3295, "user_id": 388010, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f6c6f0feb5cb53e7023d5d9ecc443767?s=128&d=identicon&r=PG", "display_name": "Sebastian Graf", "link": "https://stackoverflow.com/users/388010/sebastian-graf"}, "edited": false, "score": 0, "creation_date": 1569235784, "post_id": 58033049, "comment_id": 102518178, "body": "@SebastianGraf That&#39;s why I said <i>generating lambda terms in the STLC poses a particular problem</i>. I gave a fairly bogus example only to show what the library is capable of. I definitely agree that writing a good generator is hard, but that is for OP to figure out."}], "tags": [], "owner": {"reputation": 98, "user_id": 9224699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ayZoN.png?s=128&g=1", "display_name": "Commodore64", "link": "https://stackoverflow.com/users/9224699/commodore64"}, "is_accepted": true, "score": 1, "last_activity_date": 1569001719, "creation_date": 1569001719, "answer_id": 58033049, "question_id": 57985003, "link": "https://stackoverflow.com/questions/57985003/generating-random-terms-from-a-grammar-simply-typed-lambda-calculus/58033049#58033049", "title": "Generating random terms from a grammar (simply typed lambda calculus)", "body": "<p>Yes, the QuickCheck library is what you need.</p>\n\n<p>First I assume that <code>Name</code> is a type synonym for <code>String</code>?\nOf course generating lambda terms in the STLC poses a particular problem. \nQuickcheck lets you generate terms in the <code>Gen</code> Monad, allowing for compositional generation of terms. Default <code>Gen</code>s for a Type can be declared by making said type instance of the typeclass <code>Arbitrary</code>. That is, once you have a generator of a nested type, you can use it to create a generator of a value constructor using it.</p>\n\n<p>To give you an example, we could write a generator for a lambda abstraction taking a parameter of type <code>Tint</code> named x or y and returning a Bool (assuming you have written a generator <code>boolExpr</code>) as:</p>\n\n<pre><code>intLambda :: Gen Expr\nintLambda = Lam Tint &lt;$&gt; elements [\"x\",\"y\"] &lt;*&gt; (boolExpr :: Gen Expr)\n</code></pre>\n\n<p>(Note I am using Applicative Notation, which is often more elegant in this Monad.)</p>\n\n<p>A good place to get started is <a href=\"http://hackage.haskell.org/package/QuickCheck-2.13.2/docs/Test-QuickCheck-Gen.html\" rel=\"nofollow noreferrer\">the hackage documentation</a> for the <code>Gen</code> module. A lot of QuickChecks modules are especially for executing the tests, which it seems is not your primary concern.</p>\n"}], "owner": {"reputation": 779, "user_id": 5760615, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Y7T9x.jpg?s=128&g=1", "display_name": "Zeina Migeed", "link": "https://stackoverflow.com/users/5760615/zeina-migeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 58033049, "answer_count": 2, "score": 1, "last_activity_date": 1569001719, "creation_date": 1568780094, "last_edit_date": 1568783854, "question_id": 57985003, "link": "https://stackoverflow.com/questions/57985003/generating-random-terms-from-a-grammar-simply-typed-lambda-calculus", "title": "Generating random terms from a grammar (simply typed lambda calculus)", "body": "<p>I have the following grammar representing the simply typed lambda calculus (STLC) in Haskell. I saw a lot of papers in the literature about how to generate random lambda terms but was wondering if there are any libraries in Haskell that can generate random instances from the grammar below? I am interested in generating the programs only once. </p>\n\n<p>I saw a library called QuickCheck but can this be used for this purpose?</p>\n\n<pre><code>data Vtype = Tint\n           | Tbool\n           | Tfun Vtype Vtype\n           deriving (Eq, Data)\n\ndata Expr = Vi Int\n          | Vb Bool\n          | Vv Name\n          | App Expr Expr\n          | Lam Vtype Name Expr\n          deriving (Eq, Data)\n</code></pre>\n\n<p>My second question is, I know there are many benchmarks available for languages like Java and Python, but I tried looking for something like that for the lambda calculus and could not find anything. Is there any chance benchmarks for STLC or the untyped lambda calculus are available?</p>\n"}, {"tags": ["haskell", "currying"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1568768301, "post_id": 57983381, "comment_id": 102376246, "body": "Hint: use <code>filter</code> instead of <code>foldr</code>."}, {"owner": {"reputation": 173, "user_id": 4789917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c66188d3afe7070457570133fe7395?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4789917/alex"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1568769379, "post_id": 57983381, "comment_id": 102376426, "body": "@chepner so would I do something like: let x = filter (&gt; v1) iL, then use filter again for v2? But at the same time, is filter a high order function?"}, {"owner": {"reputation": 194, "user_id": 4856316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMUS6.jpg?s=128&g=1", "display_name": "lzbernardo", "link": "https://stackoverflow.com/users/4856316/lzbernardo"}, "edited": false, "score": 1, "creation_date": 1568771054, "post_id": 57983381, "comment_id": 102376750, "body": "Besides fixing your existing solution, always remember you could also use a <code>list comprehension</code> approach to generate the same results: <code>getInRange v1 v2 iL = [x | x &lt;- iL, x &gt; v1, x &lt; v2]</code> That essentially means &quot;take x from the list iL, but only when x &gt; v1 and x &lt; v2&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1568777733, "post_id": 57983922, "comment_id": 102377920, "body": "I took some liberties, including fixing the partial match earlier. If you disagree, feel free to revert."}, {"owner": {"reputation": 173, "user_id": 4789917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c66188d3afe7070457570133fe7395?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4789917/alex"}, "edited": false, "score": 1, "creation_date": 1569007859, "post_id": 57983922, "comment_id": 102470421, "body": "Thanks for the explanation, it really me helped understand what I was doing wrong."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1568778093, "last_edit_date": 1568778093, "creation_date": 1568770896, "answer_id": 57983922, "question_id": 57983381, "link": "https://stackoverflow.com/questions/57983381/get-in-range-without-recursion-in-haskell/57983922#57983922", "title": "Get in range without recursion in haskell", "body": "<p>You're getting a syntax error because you don't have an <code>else</code> for your <code>if</code>. In Haskell, this is always mandatory.</p>\n\n<p>The normal way to filter elements from a list is the <code>filter</code> function, thus the rest of my answer will be split: one that uses <code>filter</code> (as is idiomatic), and one that uses <code>foldr</code>, even though that's unusual (in case you'd like to do it that way, either to learn or just for fun).</p>\n\n<h1><code>filter</code></h1>\n\n<p>Since <code>filter</code> takes a filtering function of type <code>a -&gt; Bool</code>, and your condition returns a <code>Bool</code>, you don't need an <code>if</code> at all, so change your <code>check</code> function to this:</p>\n\n<pre><code>check v1 v2 z  = z &gt; v1 &amp;&amp; z &lt; v2\n</code></pre>\n\n<p>And then change your <code>getInRange</code> function to use <code>filter</code>:</p>\n\n<pre><code>getInRange :: Ord a =&gt; a -&gt; a-&gt; [a] -&gt; [a]\ngetInRange v1 v2 = filter (check v1 v2) -- see below about your (x:xs)\n</code></pre>\n\n<h1><code>foldr</code></h1>\n\n<p>To use <code>foldr</code>, you need a folding function of type <code>a -&gt; b -&gt; b</code>, where <code>a</code> is the type of the list elements, and <code>b</code> is the type of the result. In this case, that comes out to <code>Ord a =&gt; a -&gt; [a] -&gt; [a]</code>. To make <code>check</code> work, it needs to append the element to the result it's building if your condition is true, and leave the result alone if not:</p>\n\n<pre><code>check v1 v2 z acc  = if (z &gt; v1 &amp;&amp; z &lt; v2) then z:acc else acc\n</code></pre>\n\n<p>Or, cleaned up a bit:</p>\n\n<pre><code>check v1 v2 z acc =\n  if z &gt; v1 &amp;&amp; z &lt; v2\n    then z:acc\n    else acc\n</code></pre>\n\n<p>If you want, you can express the conditional using a guard instead of an <code>if</code> statement, which some people consider to be more idiomatic:</p>\n\n<pre><code>check v1 v2 z acc\n  | z &gt; v1 &amp;&amp; z &lt; v2 = z:acc\n  | otherwise = acc\n</code></pre>\n\n<h1>Final note about both ways</h1>\n\n<p>You use <code>(x:xs)</code> to match the list. This means that your pattern match is incomplete, and your function is thus partial, and will fail at runtime if you call it with an empty list. To fix this, just change <code>(x:xs)</code> to a single variable (like <code>xs</code>) in both places, or just remove it entirely, since it's at the end of both the left and right side (this is called eta-reducing).</p>\n"}], "owner": {"reputation": 173, "user_id": 4789917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c66188d3afe7070457570133fe7395?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4789917/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 1, "accepted_answer_id": 57983922, "answer_count": 1, "score": 2, "last_activity_date": 1568778093, "creation_date": 1568765139, "question_id": 57983381, "link": "https://stackoverflow.com/questions/57983381/get-in-range-without-recursion-in-haskell", "title": "Get in range without recursion in haskell", "body": "<p>I'm learning Haskell and am stuck this problem. I'm creating a function called getInRange that takes two ints and a list as parameters, v1, v2, and iL . Basically I want to traverse through the list, iL, and get the numbers in range from v1 and v2. I'm trying to use a high order function to do this problem, so no recursion. I am also new to currying and have attempted to try use it in my solution.  I have a helper function 'check' that would check if given value x, is in range of v1 and v2.  I try running my code, but I end up getting <code>error: parse error on input 'getInRange'</code>  Here is my code:</p>\n\n<pre><code>check v1 v2 z  = if (z &gt; v1 &amp;&amp; z &lt; v2) then z\n\n--getInRange\ngetInRange :: Ord a =&gt; a -&gt; a-&gt; [a] -&gt; [a]\ngetInRange v1 v2 (x:xs) = foldr (check v1 v2) [] (x:xs)\n</code></pre>\n\n<p>As an example input and output,</p>\n\n<pre><code>getInrange 3 5 [1,2,3,4,5,6,7] \n= [4]\n</code></pre>\n"}, {"tags": ["haskell", "runtime-error"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1568744929, "post_id": 57980048, "comment_id": 102369440, "body": "You&#39;ve only defined the function for a singleton list: <code>[lst]</code> means a list of one element, which you are referring to as <code>lst</code> in the function body. If <code>lst</code> is supposed to mean the entire list, as it seems, just replace <code>[lst]</code> by <code>lst</code> everywhere."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1568753338, "post_id": 57980048, "comment_id": 102372851, "body": "Enabling warnings would spot this at compile time, and report the cases you are not handling (lists of length /= 1). Strongly recommended."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568768425, "post_id": 57980048, "comment_id": 102376270, "body": "How do I enable warnings? I could not find any option in <code>ghc --help</code> output."}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 1, "last_activity_date": 1568746663, "last_edit_date": 1568746663, "creation_date": 1568745023, "answer_id": 57980100, "question_id": 57980048, "link": "https://stackoverflow.com/questions/57980048/runtime-error-non-exhaustive-patterns-in-function/57980100#57980100", "title": "Runtime error - Non-exhaustive patterns in function", "body": "<blockquote>\n  <p>Edit:</p>\n</blockquote>\n\n<p>To achieve what you want, now I understand your goal reading your </p>\n\n<pre><code>addtimes :: Int -&gt; [Int]\naddtimes 0       = []\naddtimes n       = if n &gt; 0\n                   then addtimes_ 1 n\n                   else error \"Doesn't work with negatives\"\n\naddtimes_ :: Int -&gt; Int -&gt; [Int]\naddtimes_ m n = if n &gt; m\n                then m : (addtimes_ (m+1) n) \n                else [n]\n\nmain = \n    print $ addtimes (10)\n</code></pre>\n\n<p>That will create a list with the numbers adding 1 consecutively</p>\n\n<pre><code>[1,2,3,4,5,6,7,8,9,10]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1568746322, "post_id": 57980322, "comment_id": 102370028, "body": "as an example of what I mean about type signature, pasting in your original code, and asking GHCI to tell me the type of <code>addtimes</code> with <code>:t addtimes</code> produces the result <code>(Ord t, Num t) =&gt; t -&gt; [[t]]</code>. That is, your version returns a list of lists, not a list of &quot;plain elements&quot; as you intended. If you&#39;d have included the type signature (and don&#39;t worry too much about the <code>(Ord a, Num a)</code> stuff if you don&#39;t understand it yet, <code>Int -&gt; [Int]</code> would have been fine for your purposes), then you&#39;d have got a type error from that function."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568768812, "post_id": 57980322, "comment_id": 102376334, "body": "I get the usefulness of adding signatures."}], "tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": true, "score": 5, "last_activity_date": 1568746724, "last_edit_date": 1568746724, "creation_date": 1568746055, "answer_id": 57980322, "question_id": 57980048, "link": "https://stackoverflow.com/questions/57980048/runtime-error-non-exhaustive-patterns-in-function/57980322#57980322", "title": "Runtime error - Non-exhaustive patterns in function", "body": "<p>See the following, with corrected syntax (and type signatures added, seriously these are essential for both code documentation and for better error messages):</p>\n\n<pre><code>addtimes :: (Num a, Ord a) =&gt; a -&gt; [a]\naddtimes n = addtimes_ [] n\n\naddtimes_ :: (Num a, Ord a) =&gt; [a] -&gt; a -&gt; [a]\naddtimes_ lst a =\n    if a &lt; 1 \n    then lst\n    else  addtimes_ (a:lst) (a-1)\n\nmain :: IO ()\nmain = \n    print $ addtimes 10\n</code></pre>\n\n<p>As well as referring to <code>[lst]</code> (a singleton list containing the one element <code>lst</code>) instead of <code>lst</code> (which can refer to anything, which in the context of your function must be a list, but can be of any length), you had put <code>[a:lst]</code> (again a singleton list, this time containing a list) instead of <code>(a:lst)</code>, a list made up of first element <code>a</code> appended to the front of <code>lst</code>. (The parentheses are not needed for any syntactic reason, but are usually needed in practice, as in the above code, because of operator precedence: <code>addtimes_ a:list (a-1)</code> would be parsed as <code>(addtimes_ a):(list (a-1))</code>, which definitely isn't what you mean.</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57980322, "answer_count": 2, "score": 1, "last_activity_date": 1568746979, "creation_date": 1568744754, "last_edit_date": 1568746979, "question_id": 57980048, "link": "https://stackoverflow.com/questions/57980048/runtime-error-non-exhaustive-patterns-in-function", "title": "Runtime error - Non-exhaustive patterns in function", "body": "<p>I want to write a function which prints out a list of numbers from 1 to n:  [1,2,...n], I know it can be done by <code>[1..n]</code> but I want to make my own function:</p>\n\n<pre><code>addtimes n = addtimes_ [] n\naddtimes_ [lst] a =\n    if a &lt; 1 \n    then [lst]\n    else  addtimes_ [a:lst] (a-1)\nmain = \n    print $ addtimes 10\n</code></pre>\n\n<p>Though above code compiles and runs, it gives following runtime error: </p>\n\n<pre><code>testing: testing.hs:(3,1)-(6,37): Non-exhaustive patterns in function addtimes_\n</code></pre>\n\n<p>Where is the problem and how can it be solved?</p>\n"}, {"tags": ["haskell", "recursion"], "comments": [{"owner": {"reputation": 2360, "user_id": 367332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6D0rd.png?s=128&g=1", "display_name": "DarthFennec", "link": "https://stackoverflow.com/users/367332/darthfennec"}, "edited": false, "score": 1, "creation_date": 1568743043, "post_id": 57979596, "comment_id": 102368655, "body": "I expect it&#39;s just convention, and perhaps it&#39;s more readable. Recursively calling <code>main</code> is surprising, simply for how uncommon it is, but recursively calling a function called <code>loop</code> makes it clear what&#39;s going on. There may be more concrete reasons too, though."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 3, "creation_date": 1568755495, "post_id": 57979596, "comment_id": 102373607, "body": "For readability I prefer <code>forever $ do</code> over <code>f = ... &gt;&gt; f</code>.  This is as applicable to <code>main</code> as any other procedure."}], "answers": [{"tags": [], "owner": {"reputation": 75362, "user_id": 625403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/786eed7da67079cb5d63a49d469af25b?s=128&d=identicon&r=PG", "display_name": "amalloy", "link": "https://stackoverflow.com/users/625403/amalloy"}, "is_accepted": true, "score": 14, "last_activity_date": 1568759599, "last_edit_date": 1568759599, "creation_date": 1568743789, "answer_id": 57979832, "question_id": 57979596, "link": "https://stackoverflow.com/questions/57979596/haskell-ok-to-recursively-call-main/57979832#57979832", "title": "Haskell: ok to recursively call main?", "body": "<p>It's perfectly fine, but it's pretty uncommon that every part of your program is repeated indefinitely. Usually you have some one-time setup or something, and then you enter into a loop to execute the remainder; or you have some cleanup to do after the main loop finishes. In that case you can't call <code>main</code> again, because it would do the one-time setup (or cleanup) every time. If you have no one-time setup, feel free to have <code>main</code> call itself.</p>\n"}, {"tags": [], "owner": {"reputation": 194, "user_id": 4856316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMUS6.jpg?s=128&g=1", "display_name": "lzbernardo", "link": "https://stackoverflow.com/users/4856316/lzbernardo"}, "is_accepted": false, "score": 2, "last_activity_date": 1568743877, "creation_date": 1568743877, "answer_id": 57979850, "question_id": 57979596, "link": "https://stackoverflow.com/questions/57979596/haskell-ok-to-recursively-call-main/57979850#57979850", "title": "Haskell: ok to recursively call main?", "body": "<p>Since last call optimizations are a regular thing in Haskell, yes, that's completely fine. <a href=\"http://learnyouahaskell.com/input-and-output\" rel=\"nofollow noreferrer\">Learn You A Haskell</a> includes some examples using this kind of recursion. Also, this <a href=\"https://stackoverflow.com/questions/28203214/why-how-does-recursive-io-work\">StackOverflow's post</a> digs a little deeper in this topic.</p>\n"}], "owner": {"reputation": 4918, "user_id": 1631106, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42cac823ac4fa7a9c9e91599a0ff528f?s=128&d=identicon&r=PG", "display_name": "ivan", "link": "https://stackoverflow.com/users/1631106/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "accepted_answer_id": 57979832, "answer_count": 2, "score": 6, "last_activity_date": 1568759599, "creation_date": 1568742632, "question_id": 57979596, "link": "https://stackoverflow.com/questions/57979596/haskell-ok-to-recursively-call-main", "title": "Haskell: ok to recursively call main?", "body": "<p>I've seen plenty of examples where <code>main</code> calls a helper function that calls itself recursively, e.g.</p>\n\n<pre><code>main = loop\n  where\n    loop = do\n      putStrLn \"I'm in a loop\"\n      loop\n</code></pre>\n\n<p>I have never seen a case where <code>main</code> calls itself recursively, e.g.</p>\n\n<pre><code>main = do\n  putStrLn \"I'm in a loop\"\n  main\n</code></pre>\n\n<p>It seems to work fine though, which leaves me wondering why I've never seen it. Is it considered non-idiomatic? Does it change something about the compiled program?</p>\n"}, {"tags": ["haskell", "types"], "answers": [{"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568732686, "post_id": 57976880, "comment_id": 102363891, "body": "Thanks for your answer. Why is Haskell so particular about this seemingly small difference in type (<code>IO String</code> vs <code>String</code>)?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 2, "creation_date": 1568732952, "post_id": 57976880, "comment_id": 102364031, "body": "Haskell only allows pure functions, so <code>getLine</code> cannot be a function; instead  it is a <i>value</i>  called an IO action. Each time the action is <i>executed</i>, it can produce a new value, but <i>you</i>, the Haskell programmer, cannot execute it. Only the runtime can execute an IO action, so the most you can do is <i>compose</i> IO actions to produce one you ultimately want execute."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 1, "creation_date": 1568733024, "post_id": 57976880, "comment_id": 102364071, "body": "In a nutshell, though, the idea is <code>isGreen &gt;&gt;= putStrLn</code> creates an IO action that takes <code>putStrLn</code> as a &quot;callback&quot;. You can&#39;t execute <code>isGreen</code>, but <code>&gt;&gt;=</code> effectively says: &quot;Once you execute <code>isGreen</code> to produce a <code>String</code>, please call <code>putStrLn</code> on that <code>String</code>."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568733062, "post_id": 57976880, "comment_id": 102364088, "body": "The ultimate goal is to provide <i>referential transparency</i>; you never have to &quot;simulate&quot; your code to reason about what it does."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 5, "last_activity_date": 1568733980, "last_edit_date": 1568733980, "creation_date": 1568731763, "answer_id": 57976880, "question_id": 57976753, "link": "https://stackoverflow.com/questions/57976753/match-type-errors-between-io-char-and-char/57976880#57976880", "title": "Match type errors between IO Char and [Char]", "body": "<p><code>isGreen</code> uses <code>IO</code>, so the type needs to be <code>IO String</code>, not <code>String</code>. It is an IO action that can <em>produce</em> a string, not a string itself.</p>\n\n<pre><code>isGreen :: IO String\nisGreen = do\n    putStrLn \"Is green your favorite color?\"\n    inpStr &lt;- getLine\n    return $ if (toUpper (head inpStr) == 'Y') then \"YES\" else \"NO\"\n</code></pre>\n\n<p>Likewise, <code>print</code> expects a <code>String</code>, not an <code>IO String</code>, so you need to use the <code>IO</code> monad instance. (Actually, you should use <code>putStrLn</code>, since you don't need the implicit <code>show</code> that <code>print</code> will use.)</p>\n\n<pre><code>main = isGreen &gt;&gt;= putStrLn\n</code></pre>\n\n<p>Here, <code>&gt;&gt;=</code> is creating a <em>new</em> <code>IO</code> action which will execute the <code>IO</code> action on the left (<code>isGreen</code>), and pass the value produced to the function on the right (<code>putStrLn</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568732593, "post_id": 57976883, "comment_id": 102363828, "body": "Thanks for your answer. Why can&#39;t compiler ignore <code>IO</code> part of <code>IO a</code> and proceed?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 3, "creation_date": 1568732754, "post_id": 57976883, "comment_id": 102363922, "body": "@mso: there is a fundamental difference between an <code>IO a</code> and an <code>a</code>. In some papers it is written as &quot;Monads as nuclear waste containers&quot; :). In fact, a compiler does not need to know at all about <code>IO</code>, it is just a type constructor. The type systems says that <code>a</code> and <code>IO a</code> are different, so that is basically it."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568734331, "post_id": 57976883, "comment_id": 102364778, "body": "&quot;Monads as nuclear waste containers&quot; is very interesting. Is it mentioned in a positive or negative sense? Are monads very useful or very dangerous? I believe they must be very useful as protecting from error prone code."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 1, "creation_date": 1568736856, "post_id": 57976883, "comment_id": 102366016, "body": "@rnso: very useful. Haskell is one of the few languages that makes destinction between all sorts of side-effects, and for such side effects uses monads (as a container) to prevent it from &quot;infecting&quot; the rest of the program."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568752584, "post_id": 57976883, "comment_id": 102372556, "body": "@rnso In most languages, when <code>f()</code> has type &quot;integer&quot;, the expression <code>f() + f()</code> can evaluate to an odd integer, thanks to side effects (e.g. asking the user for input). In Haskell, if <code>f () :: Int</code>, then <code>f () + f ()</code> must have exactly the same semantics of <code>2 * f ()</code>, so it has to be even (if it terminates). Performance might differ, but the results are the same. If instead <code>f () :: IO Int</code>, then we allow side effects again, and summing can result in an odd number again. We write the sum as <code>(+) &lt;$&gt; f () &lt;*&gt; f ()</code>, in this case, resulting in type <code>IO Int</code> because of the side effects."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 2, "last_activity_date": 1568731771, "creation_date": 1568731771, "answer_id": 57976883, "question_id": 57976753, "link": "https://stackoverflow.com/questions/57976753/match-type-errors-between-io-char-and-char/57976883#57976883", "title": "Match type errors between IO Char and [Char]", "body": "<p>Since <code>isGreen</code> here is an <code>IO a</code>, you can not use <code>if &hellip; then &hellip; else &hellip;</code> as last line. You need to return an <code>IO a</code>.</p>\n\n<p>You can however use <code>pure</code> here (or <code>return</code>, although there is nothing inherently wrong with that, it ):</p>\n\n<pre><code>import Data.Char(toUpper)\n\nisGreen :: IO String\nisGreen = do\n    putStrLn \"Is green your favorite color?\"\n    inpStr &lt;- getLine\n    <b>pure</b> (if \"Y\" == take 1 (map toUpper inpStr) then \"YES\" else \"NO\")</code></pre>\n\n<p>Here <code>\"Y\" == take 1 (map toUpper inpStr)</code> is more safe, since if the user has written an empty line, then <code>head</code> will error on the empty list.</p>\n\n<p>Since <code>isGreen</code> has type <code>IO String</code>, then you can not use <code>print isGreen</code>, you here can use <em>bind</em> <code>(&gt;&gt;=)</code>:</p>\n\n<pre><code>main :: IO ()\nmain = isGreen <b>&gt;&gt=</b> print</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48938, "user_id": 246886, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd1ebaade6623fc538fb8af3338e730d?s=128&d=identicon&r=PG", "display_name": "Jon Purdy", "link": "https://stackoverflow.com/users/246886/jon-purdy"}, "edited": false, "score": 0, "creation_date": 1568926879, "post_id": 57977050, "comment_id": 102441267, "body": "The flipped version, <code>print =&lt;&lt; isGreen</code>, corresponds more directly to the typical right-to-left data flow order in Haskell\u2014cf. <code>.</code>, <code>$</code>, <code>&lt;$&gt;</code>, <code>&lt;*&gt;</code>"}], "tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": true, "score": 8, "last_activity_date": 1568732319, "creation_date": 1568732319, "answer_id": 57977050, "question_id": 57976753, "link": "https://stackoverflow.com/questions/57976753/match-type-errors-between-io-char-and-char/57977050#57977050", "title": "Match type errors between IO Char and [Char]", "body": "<p>Your problem is, essentially, confusing <code>IO</code> code with non-IO, or \"pure\" code.</p>\n\n<p>In <code>isGreen</code>, you have a <code>do</code> block involving <code>putStrLn</code> and <code>getLine</code>. This means the function must return a value of some type <code>IO a</code>. You can't get a \"plain string\" from it, which seems to be your intention. The final line of the <code>do</code> block must be a monadic value, in this case an <code>IO</code> value - so you can't simply have a string here.</p>\n\n<p>However, you can use the <code>return</code> function to make an <code>IO String</code> out of a <code>String</code>, as in the commented out code that \"also does not work\":</p>\n\n<pre><code>if (toUpper (head inpStr) == 'Y') then return \"YES\" else return \"NO\" \n</code></pre>\n\n<p>This works fine, and is necessary, as far as <code>isGreen</code> is concerned. The error comes because of what happens in <code>main</code>. You cannot <code>print</code> an <code>IO</code> value - an <code>IO String</code> is not actually a string, it's basically a \"promise\" of a future string, that will only materialise at runtime based on (in this case) the user's input.</p>\n\n<p>But since <code>main</code> is an <code>IO</code> action anyway, this isn't a problem. Just do this instead:</p>\n\n<pre><code>main = do\n    isItGreen &lt;- isGreen\n    print isItGreen\n</code></pre>\n\n<p>or, completely equivalently, but imo more succinctly,</p>\n\n<pre><code>main = isGreen &gt;&gt;= print\n</code></pre>\n\n<p>You might prefer <code>putStrLn</code> to <code>print</code>, which when printing a string will include the enclosing quotes.</p>\n\n<p>Note that, if you had included a type signature for each top level value (here <code>isGreen</code> and <code>main</code>), you'd have got more useful information from the compiler as to where the errors were.</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57977050, "answer_count": 3, "score": 1, "last_activity_date": 1568733980, "creation_date": 1568731377, "last_edit_date": 1568732912, "question_id": 57976753, "link": "https://stackoverflow.com/questions/57976753/match-type-errors-between-io-char-and-char", "title": "Match type errors between IO Char and [Char]", "body": "<p>I am trying to get input from user and print out depending on input (code modified from <a href=\"http://book.realworldhaskell.org/read/io.html\" rel=\"nofollow noreferrer\">here</a>): </p>\n\n<pre><code>import Data.Char (toUpper)\n\nisGreen = do\n    putStrLn \"Is green your favorite color?\"\n    inpStr &lt;- getLine\n    if (toUpper (head inpStr) == 'Y') then \"YES\" else \"NO\"\n    -- following also does not work: \n    -- if (toUpper (head inpStr) == 'Y') then return \"YES\" else return \"NO\" \n\nmain = do\n    print isGreen\n</code></pre>\n\n<p>However, I am getting many errors: </p>\n\n<pre><code>testing.hs:7:44: error:\n    \u2022 Couldn't match type \u2018[]\u2019 with \u2018IO\u2019\n      Expected type: IO Char\n        Actual type: [Char]\n    \u2022 In the expression: \"YES\"\n      In a stmt of a 'do' block:\n        if (toUpper (head inpStr) == 'Y') then \"YES\" else \"NO\"\n      In the expression:\n        do { putStrLn \"Is green your favorite color?\";\n             inpStr &lt;- getLine;\n             if (toUpper (head inpStr) == 'Y') then \"YES\" else \"NO\" }\n\ntesting.hs:7:55: error:\n    \u2022 Couldn't match type \u2018[]\u2019 with \u2018IO\u2019\n      Expected type: IO Char\n        Actual type: [Char]\n    \u2022 In the expression: \"NO\"\n      In a stmt of a 'do' block:\n        if (toUpper (head inpStr) == 'Y') then \"YES\" else \"NO\"\n      In the expression:\n        do { putStrLn \"Is green your favorite color?\";\n             inpStr &lt;- getLine;\n             if (toUpper (head inpStr) == 'Y') then \"YES\" else \"NO\" }\n\ntesting.hs:12:5: error:\n    \u2022 No instance for (Show (IO Char)) arising from a use of \u2018print\u2019\n    \u2022 In a stmt of a 'do' block: print isGreen\n      In the expression: do { print isGreen }\n      In an equation for \u2018main\u2019: main = do { print isGreen }\n</code></pre>\n\n<p>Where is the problem and how can it be solved?</p>\n"}, {"tags": ["haskell", "dependent-type", "type-families", "type-level-computation", "data-kinds"], "answers": [{"comments": [{"owner": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "edited": false, "score": 0, "creation_date": 1568724028, "post_id": 57973702, "comment_id": 102358559, "body": "This does not solve the problem at all since I still need to create this <code>SList</code> that requires <code>ins</code> which I don&#39;t have in my hands."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "edited": false, "score": 1, "creation_date": 1568724524, "post_id": 57973702, "comment_id": 102358809, "body": "@radrow See my last edit. IMO, this is the best we can achieve in Haskell, since we haven&#39;t full dependent types and <code>ins</code> is not present at runtime, so we can&#39;t pattern match on that unless we use a singleton argument (or a typeclass constraint <code>SingList ins</code> which provides it)."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": false, "score": 7, "last_activity_date": 1568724445, "last_edit_date": 1568724445, "creation_date": 1568721317, "answer_id": 57973702, "question_id": 57973103, "link": "https://stackoverflow.com/questions/57973103/sequence-over-heterogeneous-list-in-haskell/57973702#57973702", "title": "Sequence over heterogeneous list in Haskell", "body": "<p>First, there's an error here:</p>\n\n<pre><code>type family Map (f :: * -&gt; *) (xs :: [*]) where\n    Map f '[] = '[]\n    Map f (x ': xs) = (f x) ': Map f xs\n                             --^^^^^-- we need this\n</code></pre>\n\n<p>After that is fixed, the issue here is that we need to proceed by induction on <code>ins</code>, not on <code>Map f ins</code>. To achieve that, we need a singleton type:</p>\n\n<pre><code>data SList :: [*] -&gt; * where\n    SNil  :: SList '[] \n    SCons :: SList zs -&gt; SList ( z ': zs )\n</code></pre>\n\n<p>and then an additional argument:</p>\n\n<pre><code>hSequence :: Applicative m =&gt; SList ins -&gt; HList (Map m ins) -&gt; m (HList ins)\nhSequence SNil         HNil        = pure HNil\nhSequence (SCons ins') (x :&gt; rest) = (:&gt;) &lt;$&gt; x &lt;*&gt; hSequence ins' rest\n</code></pre>\n\n<p>This now compiles. Matching on <code>SNil / SCons</code> refines <code>ins</code> to either <code>'[]</code> or <code>z ': zs</code>, so <code>Map m ins</code> can be unfolded one step as well. This allows us to make the recursive call.</p>\n\n<p>As usual, we can remove the additional singleton argument through a suitable typeclass. I'm reasonably sure that some of this can be automated exploiting the <code>singletons</code> library.</p>\n\n<pre><code>class SingList ins where\n    singList :: SList ins\n\ninstance SingList '[] where\n    singList = SNil\n\ninstance SingList zs =&gt; SingList (z ': zs) where\n    singList = SCons singList\n\nhSequence2 :: (Applicative m, SingList ins)\n              =&gt; HList (Map m ins) -&gt; m (HList ins)\nhSequence2 = hSequence singList\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1568753264, "post_id": 57980348, "comment_id": 102372834, "body": "Nice. I&#39;d suggest to note that &quot;<code>mapNil&#39;</code> exists&quot; is not enough to ensure safety. We also need it to be total -- without termination the unsafe stuff might be really unsafe. Ditto for <code>mapCons&#39;</code>."}, {"owner": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "edited": false, "score": 0, "creation_date": 1568801561, "post_id": 57980348, "comment_id": 102387898, "body": "Btw, why do I need <code>mapNil&#39;</code> here? Does the compiler need it somehow or is it just for the sake of formality? When I remove it everything seems to work, so why don&#39;t I just put <code>undefined</code> in the definition of <code>mapNil</code>?"}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "edited": false, "score": 0, "creation_date": 1568811543, "post_id": 57980348, "comment_id": 102393442, "body": "@radrow For justification, yes. If you just <code>mapNil = unsafeCoerce Refl</code>, then you haven&#39;t proved that it&#39;s true. If you got its type wrong, you run the risk of segfaults and all that. If you write <code>mapNil&#39;</code>, then you <i>know</i> what the type should be, so you don&#39;t have that risk."}], "tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": false, "score": 2, "last_activity_date": 1568748011, "last_edit_date": 1568748011, "creation_date": 1568746163, "answer_id": 57980348, "question_id": 57973103, "link": "https://stackoverflow.com/questions/57973103/sequence-over-heterogeneous-list-in-haskell/57980348#57980348", "title": "Sequence over heterogeneous list in Haskell", "body": "<p>This GADT preserves the spine (\"length\") of type level lists past type erasure:</p>\n\n<pre><code>data Spine (xs :: [k]) :: Type where\n  NilSpine :: Spine '[]\n  ConsSpine :: Spine xs -&gt; Spine (x : xs)\n</code></pre>\n\n<p>From this, we can prove these lemmas:</p>\n\n<pre><code>mapNil' :: forall f xs. Map f xs ~ '[] =&gt; Spine xs -&gt; xs :~: '[]\nmapNil' NilSpine = Refl\n\ntype family Head (xs :: [k]) :: k where Head (x : _) = x\ntype family Tail (xs :: [k]) :: [k] where Tail (_ : xs) = xs\ndata MapCons f y ys xs =\n  forall x xs'. (xs ~ (x : xs'), y ~ f x, ys ~ Map f xs') =&gt; MapCons\nmapCons' :: forall f xs y ys. Map f xs ~ (y : ys) =&gt; Spine xs -&gt; MapCons f y ys xs\nmapCons' (ConsSpine _) = MapCons\n</code></pre>\n\n<p>Now, <code>Spine</code> is a singleton family: <code>Spine xs</code> has exactly one value for each <code>xs</code>. We can therefore erase it.</p>\n\n<pre><code>mapNil :: forall f xs. Map f xs ~ '[] =&gt; xs :~: '[]\nmapNil = unsafeCoerce Refl -- safe because mapNil' exists\nmapCons :: forall f xs y ys. Map f xs ~ (y : ys) =&gt; MapCons f y ys xs\nmapCons = unsafeCoerce MapCons -- safe because mapCons' exists\n</code></pre>\n\n<p>These lemmas can then be used to define your function:</p>\n\n<pre><code>hSequence :: forall m ins. Applicative m =&gt; HList (Map m ins) -&gt; m (HList ins)\nhSequence HNil | Refl &lt;- mapNil @m @ins = pure HNil\nhSequence (x :&gt; rest) | MapCons &lt;- mapCons @m @ins = (:&gt;) &lt;$&gt; x &lt;*&gt; hSequence rest\n</code></pre>\n\n<p>By starting with <code>Spine</code>, we can build a justification for why our logic works. Then, we can erase all the singleton junk we don't need at runtime. This is an extension of how we use types to build a justification for why our programs work, and then we erase them for the runtime. It's important to write <code>mapNil'</code> and <code>mapCons'</code> so we know what we're doing works.</p>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 2, "last_activity_date": 1568785571, "last_edit_date": 1568785571, "creation_date": 1568784835, "answer_id": 57985703, "question_id": 57973103, "link": "https://stackoverflow.com/questions/57973103/sequence-over-heterogeneous-list-in-haskell/57985703#57985703", "title": "Sequence over heterogeneous list in Haskell", "body": "<p><code>HList</code> is quite an unwieldy type. I recommend using something like this one instead, which is similar to one from <code>vinyl</code>.</p>\n\n<pre><code>{-# language PolyKinds, DataKinds, GADTs, ScopedTypeVariables, RankNTypes, TypeOperators #-}\nimport Data.Kind\nimport Control.Applicative\n\ninfixr 4 :&gt;\n\n-- Type is the modern spelling of the * kind\ndata Rec :: [k] -&gt; (k -&gt; Type) -&gt; Type \nwhere\n  Nil :: Rec '[] f\n  (:&gt;) :: f a -&gt; Rec as f -&gt; Rec (a ': as) f\n\nhtraverse\n  :: forall (xs :: [k]) (f :: k -&gt; Type) (g :: k -&gt; Type) m.\n     Applicative m\n  =&gt; (forall t. f t -&gt; m (g t))\n  -&gt; Rec xs f -&gt; m (Rec xs g)\nhtraverse _f Nil = pure Nil\nhtraverse f (x :&gt; xs) =\n  liftA2 (:&gt;) (f x) (htraverse f xs)\n</code></pre>\n\n<p>If you like, you can define</p>\n\n<pre><code>hsequence\n  :: forall (xs :: [k]) (g :: k -&gt; Type) m.\n     Applicative m\n  =&gt; Rec xs (Compose m g) -&gt; m (Rec xs g)\nhsequence = htraverse getCompose\n</code></pre>\n\n<p>Note that</p>\n\n<pre><code>HList xs ~= Rec xs Identity\n</code></pre>\n"}], "owner": {"reputation": 4072, "user_id": 4400060, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9g6QZ.png?s=128&g=1", "display_name": "radrow", "link": "https://stackoverflow.com/users/4400060/radrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1568785571, "creation_date": 1568718998, "last_edit_date": 1568720446, "question_id": 57973103, "link": "https://stackoverflow.com/questions/57973103/sequence-over-heterogeneous-list-in-haskell", "title": "Sequence over heterogeneous list in Haskell", "body": "<p>Consider following definition of a <code>HList</code>:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>infixr 5 :&gt;\ndata HList (types :: [*]) where\n  HNil :: HList '[]\n  (:&gt;) :: a -&gt; HList l -&gt; HList (a:l)\n</code></pre>\n\n<p>And a type family <code>Map</code> to map over typelevel lists:</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>type family Map (f :: * -&gt; *) (xs :: [*]) where\n    Map f '[] = '[]\n    Map f (x ': xs) = (f x) ': xs\n</code></pre>\n\n<p>Now I would like to define <code>sequence</code> equivalence for <code>HList</code>s. My attempt looks like</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>hSequence :: Applicative m =&gt; HList (Map m ins) -&gt; m (HList ins)\nhSequence HNil = pure HNil\nhSequence (x :&gt; rest) = (:&gt;) &lt;$&gt; x &lt;*&gt; hSequence rest\n</code></pre>\n\n<p>But I get errors like this:</p>\n\n<pre><code>Could not deduce: ins ~ '[]\n       from the context: Map m ins ~ '[]\n         bound by a pattern with constructor: HNil :: HList '[]\n</code></pre>\n\n<p>For me it looks like the compiler isn't sure that if <code>Map m</code> returns <code>[]</code> on some list then the list is empty. Sadly, I don't see any way to convince it to that fact. What should I do in this situation?</p>\n\n<hr>\n\n<p>I am using GHC <code>8.6.5</code> with following extensions:</p>\n\n<pre><code>{-# LANGUAGE FlexibleContexts #-}\n{-# LANGUAGE ScopedTypeVariables #-}\n{-# LANGUAGE FlexibleInstances #-}\n{-# LANGUAGE DataKinds #-}\n{-# LANGUAGE KindSignatures #-}\n{-# LANGUAGE TypeFamilies #-}\n{-# LANGUAGE RankNTypes #-}\n{-# LANGUAGE GADTs #-}\n{-# LANGUAGE TypeApplications #-}\n{-# LANGUAGE TypeOperators #-}\n</code></pre>\n"}, {"tags": ["haskell", "haskell-req"], "answers": [{"tags": [], "owner": {"reputation": 1083, "user_id": 5272159, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee102cff2130800106cdd7d99db787e?s=128&d=identicon&r=PG&f=1", "display_name": "timothyylim", "link": "https://stackoverflow.com/users/5272159/timothyylim"}, "is_accepted": false, "score": 1, "last_activity_date": 1568710726, "creation_date": 1568710726, "answer_id": 57970780, "question_id": 57970425, "link": "https://stackoverflow.com/questions/57970425/ambiguous-type-variable-a0-arising-from-a-use-of-req/57970780#57970780", "title": "Ambiguous type variable \u2018a0\u2019 arising from a use of \u2018req\u2019", "body": "<p>Fixed it like this:</p>\n\n<pre><code>main :: IO ()\nmain = runReq defaultHttpConfig $ do\n  r &lt;- req GET (https \"google.com\") NoReqBody jsonResponse mempty\n  liftIO $ print (responseBody r :: Value)\n</code></pre>\n"}], "owner": {"reputation": 1083, "user_id": 5272159, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bee102cff2130800106cdd7d99db787e?s=128&d=identicon&r=PG&f=1", "display_name": "timothyylim", "link": "https://stackoverflow.com/users/5272159/timothyylim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1586462553, "creation_date": 1568709429, "last_edit_date": 1586462553, "question_id": 57970425, "link": "https://stackoverflow.com/questions/57970425/ambiguous-type-variable-a0-arising-from-a-use-of-req", "title": "Ambiguous type variable \u2018a0\u2019 arising from a use of \u2018req\u2019", "body": "<p>I am trying to retrieve a response from an endpoint using the req Haskell package. </p>\n\n<p>I understand that I need to use a type annotation to specify what 'a0' should be but I'm not sure what 'a0' is referring to and what type I should give it.</p>\n\n<pre><code>{-# LANGUAGE OverloadedStrings #-}\nmodule Main where\n\nimport Control.Monad.IO.Class\nimport Data.Aeson\nimport Network.HTTP.Req\n\nmain :: IO ()\nmain = runReq defaultHttpConfig $ do\n  r &lt;- req GET\n    (https \"google.com\")\n    NoReqBody\n    jsonResponse\n    mempty\n  liftIO $ print jsonResponse\n</code></pre>\n\n<p>Full traceback:</p>\n\n<pre><code>/Users/timothy/repos/uptime-bot/app/Main.hs:10:14: error:\n    \u2022 Ambiguous type variable \u2018a0\u2019 arising from a use of \u2018req\u2019\n      prevents the constraint \u2018(FromJSON a0)\u2019 from being solved.\n      Probable fix: use a type annotation to specify what \u2018a0\u2019 should be.\n      These potential instances exist:\n        instance FromJSON DotNetTime\n          -- Defined in \u2018aeson-1.4.5.0:Data.Aeson.Types.FromJSON\u2019\n        instance FromJSON Value\n          -- Defined in \u2018aeson-1.4.5.0:Data.Aeson.Types.FromJSON\u2019\n        instance (FromJSON a, FromJSON b) =&gt; FromJSON (Either a b)\n          -- Defined in \u2018aeson-1.4.5.0:Data.Aeson.Types.FromJSON\u2019\n        ...plus 25 others\n        ...plus 63 instances involving out-of-scope types\n        (use -fprint-potential-instances to see them all)\n    \u2022 In a stmt of a 'do' block:\n        r &lt;- req GET (https \"google.com\") NoReqBody jsonResponse mempty\n      In the second argument of \u2018($)\u2019, namely\n        \u2018do r &lt;- req GET (https \"google.com\") NoReqBody jsonResponse mempty\n            liftIO $ print jsonResponse\u2019\n      In the expression:\n        runReq defaultHttpConfig\n          $ do r &lt;- req\n                      GET (https \"google.com\") NoReqBody jsonResponse mempty\n               liftIO $ print jsonResponse\n   |\n10 |         r &lt;- req GET\n   |              ^^^^^^^^...\n</code></pre>\n"}, {"tags": ["haskell", "command-line", "haskell-stack"], "comments": [{"owner": {"reputation": 1270, "user_id": 2383766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc13aeb9c9f89e097f48d815b81541d5?s=128&d=identicon&r=PG", "display_name": "Z-Y.L", "link": "https://stackoverflow.com/users/2383766/z-y-l"}, "edited": false, "score": 0, "creation_date": 1568695483, "post_id": 57967169, "comment_id": 102345235, "body": "What do you want?"}, {"owner": {"reputation": 25, "user_id": 11408107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/499c209b369f4b67fdf3285765940a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai", "link": "https://stackoverflow.com/users/11408107/nikolai"}, "reply_to_user": {"reputation": 1270, "user_id": 2383766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc13aeb9c9f89e097f48d815b81541d5?s=128&d=identicon&r=PG", "display_name": "Z-Y.L", "link": "https://stackoverflow.com/users/2383766/z-y-l"}, "edited": false, "score": 0, "creation_date": 1568696386, "post_id": 57967169, "comment_id": 102345486, "body": "@Z-Y.L I want to upgrade stack to it&#39;s latest version"}, {"owner": {"reputation": 1270, "user_id": 2383766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc13aeb9c9f89e097f48d815b81541d5?s=128&d=identicon&r=PG", "display_name": "Z-Y.L", "link": "https://stackoverflow.com/users/2383766/z-y-l"}, "edited": false, "score": 0, "creation_date": 1568704850, "post_id": 57967169, "comment_id": 102348616, "body": "Then what&#39;s your problem? I seems you have installed successfully, except that you haven&#39;t set the environment variable. Do as the message suggests."}], "answers": [{"tags": [], "owner": {"reputation": 1213, "user_id": 544707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LVoaL.jpg?s=128&g=1", "display_name": "Anler", "link": "https://stackoverflow.com/users/544707/anler"}, "is_accepted": false, "score": 2, "last_activity_date": 1568719087, "creation_date": 1568719087, "answer_id": 57973130, "question_id": 57967169, "link": "https://stackoverflow.com/questions/57967169/trying-to-upgrade-haskell-stack/57973130#57973130", "title": "Trying to Upgrade Haskell stack", "body": "<p>It has upgraded correctly, the warning it shows mean that <code>/root/.local/bin</code> directory is not in the <a href=\"https://en.wikipedia.org/wiki/PATH_(variable)\" rel=\"nofollow noreferrer\"><code>PATH</code></a> environment variable.</p>\n\n<p>For example, in my case, if I run <code>stack path | grep local-bin-path</code> it shows:</p>\n\n<p><code>local-bin-path: /home/anler/.local/bin</code></p>\n\n<p>that is, I have it installed under my user home directory and I can check that path is in my <code>PATH</code> environment variable by running: <code>$(echo $PATH | grep -q '\\/home\\/anler\\/.local\\/bin') &amp;&amp; echo yes || echo no</code></p>\n"}], "owner": {"reputation": 25, "user_id": 11408107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/499c209b369f4b67fdf3285765940a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai", "link": "https://stackoverflow.com/users/11408107/nikolai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572098999, "creation_date": 1568692884, "last_edit_date": 1572098999, "question_id": 57967169, "link": "https://stackoverflow.com/questions/57967169/trying-to-upgrade-haskell-stack", "title": "Trying to Upgrade Haskell stack", "body": "<p>I have Haskell stack installed on my computer and when I type in <code>stack --version</code> I get </p>\n\n<pre><code>    Version 1.5.1 x86_64\n    Compiled with: \n</code></pre>\n\n<p>and it's a bunch of different files. When I run <code>stack upgrade</code> I get </p>\n\n<pre><code>Downloading from: https://github.com/commercialhaskell/stack/releases/download/v2.1.3/stack-2.1.3-linux-x86_64-static.tar.gz\n    Download complete, testing executable\n    Version 2.1.3, Git revision 636e3a759d51127df2b62f90772def126cdf6d1f (7735 commits) x86_64 hpack-0.31.2\n\n    WARNING: Installation path /root/.local/bin not found on the PATH environment variable\n    New stack executable available at /root/.local/bin/stack\n</code></pre>\n"}, {"tags": ["sql", "postgresql", "haskell", "postgresql-simple"], "comments": [{"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 1, "creation_date": 1568679004, "post_id": 57965574, "comment_id": 102342311, "body": "To protect from SQL injection, the usual approach is to use parameterized queries."}, {"owner": {"reputation": 608, "user_id": 4417894, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/b167616728ad1b28658665b14863fc99?s=128&d=identicon&r=PG&f=1", "display_name": "emg184", "link": "https://stackoverflow.com/users/4417894/emg184"}, "reply_to_user": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 0, "creation_date": 1568679471, "post_id": 57965574, "comment_id": 102342383, "body": "How would i use paramterized queries before hand if i am not sure what filters would be supplied? With each filter wouldn&#39;t i need to add another argument to the tuple of (?,?,?) that i am passing."}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 2, "creation_date": 1568679588, "post_id": 57965574, "comment_id": 102342402, "body": "You assemble the query and the parameter list separately in parallel, each filter adding the part of the query and the parameters that it needs. Once everything is assembled, you issue the query."}], "owner": {"reputation": 608, "user_id": 4417894, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/b167616728ad1b28658665b14863fc99?s=128&d=identicon&r=PG&f=1", "display_name": "emg184", "link": "https://stackoverflow.com/users/4417894/emg184"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568678758, "creation_date": 1568676996, "last_edit_date": 1568678758, "question_id": 57965574, "link": "https://stackoverflow.com/questions/57965574/suggested-approach-for-building-dynamic-sql-queries-with-haskell", "title": "Suggested approach for building dynamic sql queries with haskell", "body": "<p>I would like to use postgresql-simple for my database access layer in my application and i was wondering what the best method would be for dynamically building my sql queries. A simple example of what i would want to accomplish would be the following:</p>\n\n<p>A user has a series of filters than can apply to the things they are searching:</p>\n\n<ul>\n<li>Number of pets</li>\n<li>Name of pet </li>\n<li>When pet was created</li>\n<li>etc</li>\n</ul>\n\n<p>How should i handle composing the filters such that i dont make myself susceptible to attacks. My frst instinct would be that i would need to only worry about String/Text data since i can check that the number that comes in is actually a number and the date supplied is actually a date. Using the following format:</p>\n\n<pre><code>makeNumberOfPetsFragment :: String -&gt; Either String String\nmakeNumberOfPetsFragment candidate = \n  case createStatement of\n   Left _ -&gt; Left \"Error creating number of pets filter\"\n   Right x -&gt; Right (\"WHERE number_of_pets = \" ++ (show x)) \n  where createStatement = readEither candidate :: Either String Int \n</code></pre>\n\n<p>I'm not sure if this is just a bad approach or if it would be better to just use existing libraries or if there is a better approach in pre made statements that i just am not thinking about.</p>\n"}, {"tags": ["haskell", "set", "coerce"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 4, "creation_date": 1568667022, "post_id": 57963881, "comment_id": 102339495, "body": "Fantastic question. I look forward to seeing a comprehensive answer; the GHC documentation itself is incredibly vague about what you&#39;re actually allowed to use <code>unsafeCoerce</code> for. It&#39;s got a couple rules of thumb, but isn&#39;t clear (to me at least) exactly whether those rules apply here or not! I hope we get a GHC internals expert to write in some real detail what is and isn&#39;t kosher."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 3, "creation_date": 1568667780, "post_id": 57963881, "comment_id": 102339746, "body": "@DanielWagner my experience with haskell libraries is the more unsafe something is the more cagey people get with their docs, unfortunately."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1568776309, "post_id": 57963881, "comment_id": 102377660, "body": "@jberryman, the more unsafe something is the less likely the people writing/documenting it understand just how unsafe it is, and the more likely it is to get more unsafe when something else in the compiler or a library changes. Safety rules for <code>unsafeDupablePerformIO</code> are pretty straightforward, but I doubt anyone could confidently give you reliable ones for almost any uses of <code>unsafeInlinePerformIO</code>."}], "answers": [{"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1568703564, "post_id": 57965852, "comment_id": 102347988, "body": "Arguably, the library is a bit self-contradictory here, since it allows us to break the invariant using <code>mapMonotonic</code>, but disables <code>coerce</code> because it can break the invariant. This might be the pragmatic way to do it, though, since one can hardly miss the requirement of <code>mapMonotonic</code> and break it, while it would be easier to break it using <code>coerce</code> on a larger type which involves a set somewhere inside. Still, the library could  provide a way to enable safe coercions &quot;on demand&quot; on sets, e.g. using a <code>Dict</code>, letting the user guarantee that the types have the same ordering."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1568730805, "post_id": 57965852, "comment_id": 102362786, "body": "@chi I&#39;m interested in your <code>Dict</code> idea but don&#39;t have much experience working with constraint kinds and so on. It would be neat if we could somehow get a <code>coerce</code> on sets that was <i>safer</i> than <code>mapMonotonic</code>"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1568750103, "post_id": 57965852, "comment_id": 102371593, "body": "@chi, <code>mapMonotonic</code> would be in a different, &quot;unsafe&quot;, module if I&#39;d been maintainer when it was added. But yes, being explicit is good. The only way to expose the optional coercion you want, with today&#39;s GHC, is to build it using <code>unsafeCoerce</code>. I&#39;m thinking about a proposal to change that by removing the backwards reasoning from <code>Coercible</code> (it doesn&#39;t seem useful enough to justify these problems)."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1568759879, "post_id": 57965852, "comment_id": 102374797, "body": "@chi, please see <a href=\"https://github.com/ghc-proposals/ghc-proposals/pull/276\" rel=\"nofollow noreferrer\">github.com/ghc-proposals/ghc-proposals/pull/276</a>"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1568760091, "post_id": 57965852, "comment_id": 102374854, "body": "Oh, the other option would of course be to make <code>Set</code> a newtype around an underlying internal <code>Set</code> type with a <code>representational</code> parameter role, but that would be a major implementation pain."}], "tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 12, "last_activity_date": 1568689292, "last_edit_date": 1568689292, "creation_date": 1568679920, "answer_id": 57965852, "question_id": 57963881, "link": "https://stackoverflow.com/questions/57963881/can-all-typechecking-occurrences-of-coerce-safely-be-replaced-with-unsafecoer/57965852#57965852", "title": "Can all typechecking occurrences of `coerce` safely be replaced with `unsafeCoerce`?", "body": "<p>This <em>should</em> be safe.</p>\n\n<p>A valid <code>coerce @a @b</code> can always be replaced with a valid <code>unsafeCoerce @a @b</code>. Why? Because, at the Core level, they are the same function, <code>coerce</code> (which just returns its input, like <code>id</code>). The thing is that <code>coerce</code> takes, as argument, a proof that the two things being coerced have the same representation. With normal <code>coerce</code>, this proof is an actual proof, but with <code>unsafeCoerce</code>, this proof is just a token that says \"trust me\". This proof is passed as a type argument, and so, by type erasure, has no effect on the behavior of the program. Thus <code>unsafeCoerce</code> and <code>coerce</code> are equivalent whenever both are possible.</p>\n\n<p>Now, this isn't the end of the story for <code>Set</code>, because <code>coerce</code> doesn't work on <code>Set</code>. Why? Let's peek at its definition.</p>\n\n<pre><code>data Set a = Bin !Size !a !(Set a) !(Set a) | Tip\n</code></pre>\n\n<p>From this definition, we see that <code>a</code> does not appear inside any type equalities etc. This means that we have congruence of representational equality at <code>Set</code>: if <code>a ~#R b</code> (if <code>a</code> has the same representation as <code>b</code>\u2014<code>~#R</code> is unboxed <code>Coercible</code>), then <code>Set a ~#R Set b</code>. So, from the definition of <code>Set</code> alone, <code>coerce</code> <em>should</em> work on <code>Set</code>, and thus your <code>unsafeCoerce</code> <em>should</em> be safe. The <code>containers</code> library has to use a specific</p>\n\n<pre><code>type role Set nominal\n</code></pre>\n\n<p>to hide this fact from the world, artificially disabling <code>coerce</code>. You can never disable <code>unsafeCoerce</code>, though, and, reiterating, <code>unsafeCoerce</code> (in this context) is safe.</p>\n\n<p>(Do be careful that the <code>unsafeCoerce</code> and the <code>coerce</code> have the same type! See @dfeuer's answer for an example of a situation where \"overzealous\" type inference bends everything out of shape. )</p>\n"}, {"comments": [{"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1568689113, "post_id": 57966149, "comment_id": 102344168, "body": "I don&#39;t think this is particularly fair. You&#39;ve turned <code>coerce @(Buh Rational) @(Buh Rational)</code> into <code>unsafeCoerce @(Buh Rational) @(Buh Double)</code>, by abusing the rules of type inference. This is not a problem with the <code>coerce</code>-&gt;<code>unsafeCoerce</code> substitution itself, since you haven&#39;t &quot;really&quot; substituted <code>unsafeCoerce</code> for <code>coerce</code> at all. I do agree this is rather alarming, though."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 1, "creation_date": 1568689162, "post_id": 57966149, "comment_id": 102344174, "body": "@HTNW, for sure. My point is that a blind syntactic substitution of one for the other may not be safe."}], "tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 6, "last_activity_date": 1568810882, "last_edit_date": 1568810882, "creation_date": 1568682960, "answer_id": 57966149, "question_id": 57963881, "link": "https://stackoverflow.com/questions/57963881/can-all-typechecking-occurrences-of-coerce-safely-be-replaced-with-unsafecoer/57966149#57966149", "title": "Can all typechecking occurrences of `coerce` safely be replaced with `unsafeCoerce`?", "body": "<p>Yes, this should be safe in typical realistic circumstances. However, it <em>is</em> possible to come up with contrived examples where it's not. Here's one that uses defaulting. I imagine it might be possible to use overlapping instances or other wacky features to do something similar, but I don't know.</p>\n\n<pre><code>{-# language GADTs, TypeOperators, ExistentialQuantification #-}\n\nimport Data.Coerce\nimport Unsafe.Coerce\nimport Data.Type.Equality\n\ndata Buh a = Buh (a :~: Rational) a\n\ndata Bah = forall a. Bah (a :~: Rational) a\n\ninstance Show Bah where\n  show (Bah Refl x) = show x\n\ngoo :: Rational -&gt; Bah\ngoo x = case coerce p of\n          Buh pf m -&gt;\n            let _q = truncate m\n            in Bah pf 12\n  where\n    p = Buh Refl x\n</code></pre>\n\n<p>If you call <code>goo</code>, everything will be fine. If you replace <code>coerce</code> with <code>unsafeCoerce</code>, calling <code>goo</code> will segfault or do something else bad.</p>\n"}], "owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 3, "accepted_answer_id": 57965852, "answer_count": 2, "score": 23, "last_activity_date": 1568810882, "creation_date": 1568665074, "last_edit_date": 1568751589, "question_id": 57963881, "link": "https://stackoverflow.com/questions/57963881/can-all-typechecking-occurrences-of-coerce-safely-be-replaced-with-unsafecoer", "title": "Can all typechecking occurrences of `coerce` safely be replaced with `unsafeCoerce`?", "body": "<p>I believe the following is as safe as <code>Set.mapMonotonic coerce</code>. i.e. the worst that can happen is I will break the <code>Set</code> invariants if <code>a</code> or <code>b</code> have different <code>Ord</code> instances:</p>\n\n<pre><code>coerceSet :: Coercible a b=&gt; Set.Set a -&gt; Set.Set b\ncoerceSet = unsafeCoerce\n</code></pre>\n\n<p>Is that correct?</p>\n\n<p><strong>EDIT</strong>: relevant feature issue for <code>Set</code>: <a href=\"https://github.com/haskell/containers/issues/308\" rel=\"noreferrer\">https://github.com/haskell/containers/issues/308</a></p>\n"}, {"tags": ["haskell", "windows-subsystem-for-linux", "haskell-stack"], "comments": [{"owner": {"reputation": 307, "user_id": 1864720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ee00e822e2b0430dade0417e516085?s=128&d=identicon&r=PG&f=1", "display_name": "parml", "link": "https://stackoverflow.com/users/1864720/parml"}, "edited": false, "score": 0, "creation_date": 1583875581, "post_id": 57962794, "comment_id": 107258987, "body": "This happens to me also (WSL2 instance). I&#39;d like to mention that I can successfully wget the resources that stack is attempting and fails to access."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 13305289, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7BghYCbpzWM/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJO8gzv4S1O_XWfKKcjVboRYRpwZPw/photo.jpg?sz=128", "display_name": "Anton Kucher", "link": "https://stackoverflow.com/users/13305289/anton-kucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1599587365, "creation_date": 1599587365, "answer_id": 63799165, "question_id": 57962794, "link": "https://stackoverflow.com/questions/57962794/haskell-stack-connection-timeout/63799165#63799165", "title": "Haskell stack connection timeout", "body": "<p>I have wls2 ubuntu 20.02 installed on my pc <br>\nfixed this problem with changing the contents of /etc/resolv.conf</p>\n<pre><code>cd /etc\nsudo *your favorite editor* resolv.conf\n</code></pre>\n<p>added Google DNS servers as</p>\n<pre><code>nameserver 8.8.8.8\nnameserver 8.8.4.4\n</code></pre>\n<p>this fixed stack not working for me.</p>\n"}], "owner": {"reputation": 1905, "user_id": 1819861, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d6a4df7c88cd6b6049278e30a88d3596?s=128&d=identicon&r=PG", "display_name": "Jonathan Gallagher", "link": "https://stackoverflow.com/users/1819861/jonathan-gallagher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1599587365, "creation_date": 1568659798, "last_edit_date": 1574272733, "question_id": 57962794, "link": "https://stackoverflow.com/questions/57962794/haskell-stack-connection-timeout", "title": "Haskell stack connection timeout", "body": "<p>I have installed stack on WSL Ubuntu using WSL2 on Windows 10.  The installation completed successfully, but when I test stack with </p>\n\n<pre><code>stack path --local-bin\n</code></pre>\n\n<p>I get the following error message:</p>\n\n<pre><code>Writing implicit global project config file to: \n/home/jdgallag/.stack  /global-project/stack.yaml \nNote: You can change snapshot via the resolver field there.      \nHttpExceptionRequest Request {                                                                                            \nhost                 = \"s3.amazonaws.com\"                                                                               \nport                 = 443                                                                                              \nsecure               = True                                                                                             \nrequestHeaders       = [(\"Accept\",\"application/json\"),(\"User-Agent\",\"The Haskell Stack\")]\npath                 = \"/haddock.stackage.org/snapshots.json\"                                                           \nqueryString          = \"\"                                                                                               \nmethod               = \"GET\"                                                                                            \nproxy                = Nothing                                                                                          \nrawBody              = False                                                                                            \nredirectCount        = 10                                                                                               \nresponseTimeout      = ResponseTimeoutDefault       \nrequestVersion       = HTTP/1.1                                                                                       \n}                                                                                                                        \nConnectionTimeout   \n</code></pre>\n\n<p>I have seen some other posts about issues like this one, but none that are resolved, and they are older.  Also, I am not on a proxy, this is my personal computer, and I turned the firewall completely off.  That said, when I attempt this over a vpn connection I get a different error.  Could it be an ssl/https issue since WSL2 is technically a different IP address from Windows, and so the connection is being blocked on the amazon side?</p>\n\n<p>For the record when attempting the command on a VPN, the error I get is</p>\n\n<pre><code>Writing implicit global project config file to: \n/home/jdgallag/.stack/global-project/stack.yaml                         \nNote: You can change the snapshot via the resolver field there.                                                         \nHttpExceptionRequest Request {                                                                                            \nhost                 = \"s3.amazonaws.com\"                                                                               \nport                 = 443                                                                                              \nsecure               = True                  \nrequestHeaders       = [(\"Accept\",\"application/json\"),(\"User-Agent\",\"The Haskell Stack\")]                               \npath                 = \"/haddock.stackage.org/snapshots.json\"                                                           \nqueryString          = \"\"                                                                                               \nmethod               = \"GET\"                                                                                            \nproxy                = Nothing                                                                                          \nrawBody              = False                                                                                            \nredirectCount        = 10                                                                                               \nresponseTimeout      = ResponseTimeoutDefault                                                                           \nrequestVersion       = HTTP/1.1                                                                                       \n}                                                                                                                        \n(InternalException (HandshakeFailed Error_EOF)) \n</code></pre>\n\n<h3>Update</h3>\n\n<p>Reverting to WSL-1 \"solves\" the problem, so the issue is something specific to WSL-2.  I replicated the problem with a fresh install of Windows on a separate machine, but haven't found a way around the issue yet.</p>\n"}, {"tags": ["list", "haskell", "hashmap"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568649924, "post_id": 57960636, "comment_id": 102332957, "body": "A classic problem: it is <code>(x:ys)</code> with <i>round</i> brackets, not <code>[y:ys]</code>."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568650021, "post_id": 57960636, "comment_id": 102332998, "body": "This does not work- gives some other error. I have added it to my question above."}, {"owner": {"reputation": 1519, "user_id": 1486848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KNtLf.jpg?s=128&g=1", "display_name": "ShamPooSham", "link": "https://stackoverflow.com/users/1486848/shampoosham"}, "edited": false, "score": 0, "creation_date": 1568650355, "post_id": 57960636, "comment_id": 102333131, "body": "You don&#39;t need to put brackets around <code>[ys]</code> when doing the recursive <code>list2dict</code> calls, since ys is already a list"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568653033, "post_id": 57960636, "comment_id": 102334208, "body": "I realized I do not need <code>(sort mylist)</code>- just <code>mylist</code> works."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1568659210, "post_id": 57960636, "comment_id": 102336597, "body": "See also my answer to <a href=\"https://stackoverflow.com/a/12398993/791604\">How to group similar items in a list using Haskell?</a>. tl;dr <code>list2dict xs = Map.fromListWith (+) [(x, 1) | x &lt;- xs]</code>."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568683336, "post_id": 57960636, "comment_id": 102343093, "body": "Very nice. Can such a function be used here to count occurrences?"}], "answers": [{"comments": [{"owner": {"reputation": 1780, "user_id": 4168972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc92e82d2eb21eb030d4c133c70ff554?s=128&d=identicon&r=PG&f=1", "display_name": "David Fletcher", "link": "https://stackoverflow.com/users/4168972/david-fletcher"}, "edited": false, "score": 4, "creation_date": 1568650955, "post_id": 57960752, "comment_id": 102333381, "body": "Feels like you are almost reinventing <code>fromListWith</code> with the fold and alter.  I&#39;d do something like (untested): <code>fromListWith (+) . map (flip (,) 1)</code>"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568651032, "post_id": 57960752, "comment_id": 102333410, "body": "Thanks for a good answer. But other one is simpler for me to understand."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 5, "last_activity_date": 1568651805, "last_edit_date": 1568651805, "creation_date": 1568650309, "answer_id": 57960752, "question_id": 57960636, "link": "https://stackoverflow.com/questions/57960636/converting-a-list-to-a-data-map-giving-type-error/57960752#57960752", "title": "Converting a list to a data.map giving type error", "body": "<p>You made a classic error: a non-empty list has as pattern <code>(x:xs)</code> (notice the empty brackets). But you make things too complicated here.</p>\n\n<p>You can implement this with a <code>foldr</code> pattern, that can convert any <code>(Ord a, Foldable f) =&gt; f a</code> to a <code>(Ord a, Integral i) =&gt; Map a i</code>:</p>\n\n<pre><code>import Data.Map(Map, alter, empty)\nimport Data.Maybe(maybe)\n\ntoCounter :: (Ord a, Foldable f, Integral i) =&gt; f a -&gt; Map a i\ntoCounter = foldr (alter (Just . maybe 1 (1+))) empty</code></pre>\n\n<p>We thus start with an <code>empty</code> map, and for each item in the <code>Foldable</code>, we perform an <code>alter</code> where, in case the item already exists (then it gives us a <code>Just <i>n</i></code>, we return a <code>Just <i>(n+1)</i></code>, and for a <code>Nothing</code> we fallback on <code>1</code>.</p>\n\n<p>Since it works on <code>(Ord a, Foldable f) =&gt; f a</code>, you can make a \"counter\" for anything of a type that is an instance of the <code>Ord</code> typeclass, and is stored in a object of a type that is an instance of a <code>Foldable</code>. So it can count items in a list, <code>Maybe</code> (well this has exactly one or no item), a <code>Tree</code>, etc.</p>\n\n<p>For example:</p>\n\n<pre><code>*Main&gt; toCounter [\"one\",\"one\",\"two\",\"three\",\"two\",\"two\",\"three\",\"four\",\"four\",\"four\",\"four\",\"five\",\"five\",\"two\"]\nfromList [(\"five\",2),(\"four\",4),(\"one\",2),(\"three\",2),(\"two\",4)]\n</code></pre>\n\n<p>A shorter version, that works on lists is one written by <a href=\"https://stackoverflow.com/questions/57960636/converting-a-list-to-a-data-map-giving-type-error/57960752?noredirect=1#comment102333381_57960752\">@DavidFletcher</a>:</p>\n\n<pre><code>import Data.Map(Map, fromListWith)\n\ntoCounter :: (Ord a, Integral i) =&gt; [a] -&gt; Map a i\ntoCounter = fromListWith (+) . map (flip (,) 1)</code></pre>\n\n<p>we can however use <code>toList</code> to let it work with <code>Foldable</code>s as well:</p>\n\n<pre><code>import Data.Foldable(toList)\nimport Data.Map(Map, fromListWith)\n\ntoCounter :: (Ord a, Foldable f, Integral i) =&gt; f a -&gt; Map a i\ntoCounter = fromListWith (+) . map (flip (,) 1) . toList</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568650865, "post_id": 57960759, "comment_id": 102333334, "body": "@rnso I don&#39;t know why and can&#39;t reproduce it. When I take your code and replace your second case of <code>list2dict</code>, it works perfectly with no other changes for me."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568650970, "post_id": 57960759, "comment_id": 102333389, "body": "Yes, it works fine now. Probably some indentation problem. Thanks."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1568650666, "last_edit_date": 1568650666, "creation_date": 1568650340, "answer_id": 57960759, "question_id": 57960636, "link": "https://stackoverflow.com/questions/57960636/converting-a-list-to-a-data-map-giving-type-error/57960759#57960759", "title": "Converting a list to a data.map giving type error", "body": "<p>Willem Van Onsem already pointed out the first problem in a comment: you used <code>[y:ys]</code> instead of <code>(y:ys)</code>. The second problem is that you used <code>[ys]</code> instead of just <code>ys</code> in two places. The third problem is that you say <code>((Map.lookup y) + 1)</code>, which creates a nonsensical type. (Even if you had used <code>((Map.lookup y mymap) + 1)</code> instead, which is closer to correct, you still would have just gotten a different error.) This way will work instead:</p>\n\n<pre><code>list2dict (y:ys) mymap = case Map.lookup y mymap of\n    Just x -&gt; list2dict ys $ Map.insert y (x + 1) mymap\n    Nothing -&gt; list2dict ys $ Map.insert y 1 mymap\n</code></pre>\n\n<p>Note that I pattern-match on the <code>Maybe</code> rather than testing it with <code>if</code> and then trying to extract the value separately after that.</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 57960759, "answer_count": 2, "score": 1, "last_activity_date": 1568651805, "creation_date": 1568649876, "last_edit_date": 1568650065, "question_id": 57960636, "link": "https://stackoverflow.com/questions/57960636/converting-a-list-to-a-data-map-giving-type-error", "title": "Converting a list to a data.map giving type error", "body": "<p>I am trying to convert a list to a data.map so that from a list like: </p>\n\n<pre><code>mylist = [\"one\",\"one\",\"two\",\"three\",\"two\",\"two\",\"three\",\"four\",\"four\",\"four\",\"four\",\"five\",\"five\",\"two\"]\n</code></pre>\n\n<p>I get something like: </p>\n\n<pre><code>(\"one\", 2)  (\"two\", 4) ...\n</code></pre>\n\n<p>I am trying following code: </p>\n\n<pre><code>import qualified Data.Map as Map\nimport Data.List \n\nlist2dict [] mymap = print mymap\nlist2dict [y:ys] mymap = do\n    if (Map.lookup y mymap) /= Nothing\n    then list2dict [ys] $ Map.insert y ((Map.lookup y) + 1) mymap \n    else list2dict [ys] $ Map.insert y 1 mymap \n\nmylist = [\"one\",\"one\",\"two\",\"three\",\"two\",\"two\",\"three\",\"four\",\"four\",\"four\",\"four\",\"five\",\"five\",\"two\"]\nmain = do\n    list2dict (sort mylist) $ Map.empty\n</code></pre>\n\n<p>However, I am getting following error: </p>\n\n<pre><code>soq_list2dict.hs:5:1: error:\n    \u2022 Non type-variable argument\n        in the constraint: Show (Map.Map k a -&gt; Maybe a)\n      (Use FlexibleContexts to permit this)\n    \u2022 When checking the inferred type\n        list2dict :: forall a k.\n                     (Show (Map.Map k a -&gt; Maybe a), Show k, Ord k,\n                      Num (Map.Map k a -&gt; Maybe a), Eq (Map.Map k a -&gt; Maybe a)) =&gt;\n                     [[k]] -&gt; Map.Map k (Map.Map k a -&gt; Maybe a) -&gt; IO ()\n</code></pre>\n\n<p>How can this be solved? </p>\n\n<p>Edit: using (y:ys) instead of [y:ys] gives following error: </p>\n\n<pre><code>soq_list2dict.hs:5:1: error:\n    \u2022 Occurs check: cannot construct the infinite type: k ~ [k]\n      Expected type: [[k]] -&gt; Map.Map k (Map.Map k a -&gt; Maybe a) -&gt; IO ()\n        Actual type: [k] -&gt; Map.Map k (Map.Map k a -&gt; Maybe a) -&gt; IO ()\n    \u2022 Relevant bindings include\n        list2dict :: [[k]] -&gt; Map.Map k (Map.Map k a -&gt; Maybe a) -&gt; IO ()\n          (bound at soq_list2dict.hs:5:1)\n</code></pre>\n"}, {"tags": ["haskell", "pattern-matching", "racket"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568646249, "post_id": 57959599, "comment_id": 102331037, "body": "It looks like your <code>match expr</code> maps everything to an empty list? So then I think it might make more sense to define it as <code>tailCalls = const []</code>."}, {"owner": {"reputation": 3683, "user_id": 330242, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9f3ffc3e30d25eb64e2e464f0a86bd7?s=128&d=identicon&r=PG", "display_name": "przemo_li", "link": "https://stackoverflow.com/users/330242/przemo-li"}, "edited": false, "score": 0, "creation_date": 1568650816, "post_id": 57959599, "comment_id": 102333311, "body": "tailCalls :: Expr -&gt; [Expr] guarantees us at lease a single argument - it can be &quot;empty expression&quot; only if Expr allows empty expression"}, {"owner": {"reputation": 3683, "user_id": 330242, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9f3ffc3e30d25eb64e2e464f0a86bd7?s=128&d=identicon&r=PG", "display_name": "przemo_li", "link": "https://stackoverflow.com/users/330242/przemo-li"}, "edited": false, "score": 2, "creation_date": 1568652062, "post_id": 57959599, "comment_id": 102333815, "body": "I think, aswer is very specific to the structure that holds expressions in Racket implementation. Please provide definition of such structure so that proper pattern matching can be devised."}, {"owner": {"reputation": 1290, "user_id": 2210825, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e6bf054665642464cfba9834709a2758?s=128&d=identicon&r=PG", "display_name": "donkey", "link": "https://stackoverflow.com/users/2210825/donkey"}, "edited": false, "score": 0, "creation_date": 1568673880, "post_id": 57959599, "comment_id": 102341355, "body": "Expr would any type of racket expression for example a string, function call, number, if statement etc."}], "answers": [{"tags": [], "owner": {"reputation": 28585, "user_id": 23567, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HmHeE.png?s=128&g=1", "display_name": "soegaard", "link": "https://stackoverflow.com/users/23567/soegaard"}, "is_accepted": true, "score": 1, "last_activity_date": 1568889809, "last_edit_date": 1568889809, "creation_date": 1568889435, "answer_id": 58009132, "question_id": 57959599, "link": "https://stackoverflow.com/questions/57959599/pattern-matching-in-racket/58009132#58009132", "title": "Pattern matching in Racket", "body": "<p>Here is an example to get you started:</p>\n\n<pre class=\"lang-lisp prettyprint-override\"><code>#lang racket\n\n(struct Expr ()              #:transparent)\n(struct Number  Expr (n)     #:transparent)\n(struct Boolean Expr (b)     #:transparent)\n(struct Or      Expr (exprs) #:transparent)\n\n(define (format-Expr e)\n  (define ~ format-Expr)\n  (match e\n    [(Number n)  (~a n)]\n    [(Boolean b) (if b \"true\" \"false\")]\n    [(Or es)     (match es\n                   ['()              \"true\"]\n                   [(list e)         (~ e)]\n                   [(list e1 e2)     (~a (~ e1) \" or \" (~ e2))]\n                   [(list e1 es ...) (~a (~ e1) \" or \" (~ (Or es)))])]\n    [(? Expr? e)\n     ; we get here if we forgot to implement a case\n     (error 'format-expr (~a \"internal error, got: \" e))]\n    [_\n     ; this on the other hand is an user error\n     (error 'format-expr (~a \"expected an Expr, got: \" e))]))\n\n(format-Expr (Or (list (Boolean #t) (Boolean #f))))\n</code></pre>\n"}], "owner": {"reputation": 1290, "user_id": 2210825, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e6bf054665642464cfba9834709a2758?s=128&d=identicon&r=PG", "display_name": "donkey", "link": "https://stackoverflow.com/users/2210825/donkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "accepted_answer_id": 58009132, "answer_count": 1, "score": 1, "last_activity_date": 1568928145, "creation_date": 1568646127, "last_edit_date": 1568928145, "question_id": 57959599, "link": "https://stackoverflow.com/questions/57959599/pattern-matching-in-racket", "title": "Pattern matching in Racket", "body": "<p>I have this code snippet in Haskell:</p>\n\n<pre><code>matchEx :: Expr -&gt; [Expr]\nmatchEx (Number n) = undefined\nmatchEx (Boolean b) = undefined\nmatchEx (If condStatement thenStatement elseStatement) = undefined\n</code></pre>\n\n<p>What would the equivalent pattern matching looks like in racket? After looking at the documentation, this is what I have. Thanks.</p>\n\n<pre><code>(define (matchEx-calls expr)\n  (match expr\n    [(literal n) ([])]\n    [(id ident) ([])]\n    [(If condStatement thenStatement elseStatement) ([])] \n   )\n  )\n</code></pre>\n"}, {"tags": ["haskell", "types"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568624109, "post_id": 57953376, "comment_id": 102318921, "body": "You can not do a <code>map readFirstLine</code> here, since then you get a list <code>[IO (Maybe String)]</code> back."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568624268, "post_id": 57953376, "comment_id": 102318997, "body": "What should be done and is this the only error? A full answer is requested."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1568624687, "post_id": 57953376, "comment_id": 102319210, "body": "I think it would really benefit, if you first try to understand the difference between an <code>IO a</code> and an <code>a</code>, this looks like the key concept you are missing here."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1568626687, "post_id": 57953376, "comment_id": 102320271, "body": "I love that you are learning haskell but it&#39;s really not very good at this sort of thing. <code>for f in *; do head -n 1 $f | perl -nle &#39;&#47;.*\\&#47;(.*)&#47; &amp;&amp; print $1&#39;; done</code> will do the job."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 1, "creation_date": 1568630337, "post_id": 57953376, "comment_id": 102322138, "body": "@luqui sure Perl will do it in less characters... but that doesn&#39;t mean it&#39;s necessarily the better tool for the task."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1568638734, "post_id": 57953376, "comment_id": 102326550, "body": "@luqui Will this perl code skip binary files?"}], "answers": [{"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568644171, "post_id": 57953551, "comment_id": 102329813, "body": "Yes, it works. Thanks. Is there any way to combine first 3 statements into 1 like last 6 statements?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568645788, "post_id": 57953551, "comment_id": 102330784, "body": "@rnso: you can desugar the do, so <code>main = getAbsoluteDirContents &quot;.&quot; &gt;&gt;= filterM doesFileExist &gt;&gt;= mapM readFirstLine &gt;&gt;= print . map last . map (splitOn &quot;&#47;&quot;) . filter hasSlash . catMaybes</code>"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 1, "creation_date": 1568649641, "post_id": 57953551, "comment_id": 102332823, "body": "Very nice. Haskell is very versatile."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 5, "last_activity_date": 1568645985, "last_edit_date": 1568645985, "creation_date": 1568624625, "answer_id": 57953551, "question_id": 57953376, "link": "https://stackoverflow.com/questions/57953376/multiple-type-mismatches-in-this-program/57953551#57953551", "title": "Multiple type mismatches in this program", "body": "<p>You can not just use <code>filter doesFileExists</code> here, since <code>doesFileExists</code> is a <code>FilePath -&gt; IO Bool</code> function, not a <code>FilePath -&gt; Bool</code> function, the same happens with <code>map readFirstLine</code>, by using <code>map</code>, you are building a <code>[IO (Maybe String)]</code>, not an <code>IO [Maybe String]</code>. You furthermore forgot to use brackets for your <code>map (splitOn \"/\")</code>.</p>\n\n<p>You can fix this by using <code>filterM</code> and <code>mapM</code> here:</p>\n\n<pre><code>main = do\n    fps &lt;- getAbsoluteDirContents \".\"\n    fexists &lt;- filterM doesFileExist fps\n    flines &lt;- mapM readFirstLine fexists\n    print\n      $ map last              -- get only last string\n      $ map (splitOn \"/\")     -- split first line\n      $ filter hasSlash       -- filter out those that do not have '/'\n      $ catMaybes flines      -- get Just ones</code></pre>\n\n<p>or a desugared variant:</p>\n\n<pre><code>main :: IO ()\nmain = getAbsoluteDirContents \".\" &gt;&gt;= filterM doesFileExist &gt;&gt;= mapM readFirstLine &gt;&gt;= print . map (last . splitOn \"/\") . filter hasSlash . catMaybes\n</code></pre>\n\n<p>Your <code>hasSlash</code> makes use of a <code>do</code>, but you here do not use a monad at all, so it is better to write this as a simple:</p>\n\n<pre><code>hasSlash :: String -&gt; Bool\nhasSlash = elem '/'</code></pre>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 57953551, "answer_count": 1, "score": 1, "last_activity_date": 1568645985, "creation_date": 1568623907, "question_id": 57953376, "link": "https://stackoverflow.com/questions/57953376/multiple-type-mismatches-in-this-program", "title": "Multiple type mismatches in this program", "body": "<p>I have a Linux folder with many files some of which are binary while others are script file where the first line contains <code>#! /bin/bash</code> or similar. I am trying to read first line of such files, split that line and print out a list of last member (indicating program used): </p>\n\n<pre><code>import Control.Exception(catch, IOException)\nimport System.IO(IOMode(ReadMode), withFile, hGetLine)\nimport Data.Maybe(catMaybes)\nimport Data.List\nimport System.Directory (getDirectoryContents, doesFileExist, getFileSize)\nimport System.FilePath ((&lt;/&gt;))\nimport Control.Monad(filterM)\n\ngetAbsoluteDirContents :: String -&gt; IO [FilePath]\ngetAbsoluteDirContents dir = do\n    contents &lt;- getDirectoryContents dir\n    return $ map (dir &lt;/&gt;) contents\n\nreadFirstLine :: FilePath -&gt; IO (Maybe String)\nreadFirstLine fp = withFile fp ReadMode $\n    \\h -&gt; (catch (fmap Just (hGetLine h))\n        ((const :: a -&gt; IOException -&gt; a) (return Nothing)))\n\nhasSlash :: String -&gt; Bool\nhasSlash firline = do\n    elem '/' firline\n\n-- main :: IO ()\nmain = do\n    print\n    $ map last              -- get only last string\n    $ map splitOn \"/\"       -- split first line\n    $ filter hasSlash       -- filter out those that do not have '/'\n    $ catMaybes             -- get Just ones\n    $ map readFirstLine     -- read first line of each file\n    $ filter doesFileExist  -- filter out dirs\n    $ getAbsoluteDirContents \".\" -- get a list of all files &amp; dirs\n</code></pre>\n\n<p>In the main function, execution will be going from below up!</p>\n\n<p>However, above code is giving multiple type mismatches: </p>\n\n<pre><code>soq_firstline6.hs:28:11: error:\n    \u2022 Couldn't match expected type \u2018[String] -&gt; [[b0]]\u2019\n                  with actual type \u2018[b1]\u2019\n    \u2022 The first argument of ($) takes one argument,\n      but its type \u2018[b1]\u2019 has none\n      In the second argument of \u2018($)\u2019, namely\n        \u2018map splitOn \"/\"\n         $ filter hasSlash\n           $ catMaybes\n             $ map readFirstLine\n               $ filter doesFileExist $ getAbsoluteDirContents \".\"\u2019\n      In the second argument of \u2018($)\u2019, namely\n        \u2018map last\n         $ map splitOn \"/\"\n           $ filter hasSlash\n             $ catMaybes\n               $ map readFirstLine\n                 $ filter doesFileExist $ getAbsoluteDirContents \".\"\u2019\n\nsoq_firstline6.hs:28:15: error:\n    \u2022 Variable not in scope: splitOn :: Char -&gt; b1\n    \u2022 Perhaps you meant \u2018splitAt\u2019 (imported from Data.List)\n\nsoq_firstline6.hs:31:7: error:\n    \u2022 Couldn't match type \u2018IO (Maybe String)\u2019 with \u2018Maybe String\u2019\n      Expected type: [Maybe String]\n        Actual type: [IO (Maybe String)]\n    \u2022 In the second argument of \u2018($)\u2019, namely\n        \u2018map readFirstLine\n         $ filter doesFileExist $ getAbsoluteDirContents \".\"\u2019\n      In the second argument of \u2018($)\u2019, namely\n        \u2018catMaybes\n         $ map readFirstLine\n           $ filter doesFileExist $ getAbsoluteDirContents \".\"\u2019\n      In the second argument of \u2018($)\u2019, namely\n        \u2018filter hasSlash\n         $ catMaybes\n           $ map readFirstLine\n             $ filter doesFileExist $ getAbsoluteDirContents \".\"\u2019\n\nsoq_firstline6.hs:32:14: error:\n    \u2022 Couldn't match type \u2018IO Bool\u2019 with \u2018Bool\u2019\n      Expected type: FilePath -&gt; Bool\n        Actual type: FilePath -&gt; IO Bool\n    \u2022 In the first argument of \u2018filter\u2019, namely \u2018doesFileExist\u2019\n      In the expression: filter doesFileExist\n      In the second argument of \u2018($)\u2019, namely\n        \u2018filter doesFileExist $ getAbsoluteDirContents \".\"\u2019\n\nsoq_firstline6.hs:33:7: error:\n    \u2022 Couldn't match expected type \u2018[FilePath]\u2019\n                  with actual type \u2018IO [FilePath]\u2019\n    \u2022 In the second argument of \u2018($)\u2019, namely\n        \u2018getAbsoluteDirContents \".\"\u2019\n      In the second argument of \u2018($)\u2019, namely\n        \u2018filter doesFileExist $ getAbsoluteDirContents \".\"\u2019\n      In the second argument of \u2018($)\u2019, namely\n        \u2018map readFirstLine\n         $ filter doesFileExist $ getAbsoluteDirContents \".\"\u2019\n</code></pre>\n\n<p>How can these errors be corrected. Thanks for your help.</p>\n"}, {"tags": ["list", "function", "haskell", "filter", "list-comprehension"], "comments": [{"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 3, "creation_date": 1568614283, "post_id": 57951054, "comment_id": 102314673, "body": "A boolean expression in a list comprehension is already treated as a filter.  You don&#39;t need to say <code>filter even x</code>, you just say <code>even x</code>.  Also the language is case sensitive, make sure you say <code>Int</code> instead of <code>int</code> in your type signature."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1568615744, "post_id": 57951054, "comment_id": 102315222, "body": "Sorry to hear that.  <a href=\"https://stackoverflow.com/questions/56215405/custom-filter-function-with-predicate-using-list-comprehension/56215421#56215421\">List comprehensions are fun</a>. :)"}, {"owner": {"reputation": 1780, "user_id": 4168972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc92e82d2eb21eb030d4c133c70ff554?s=128&d=identicon&r=PG&f=1", "display_name": "David Fletcher", "link": "https://stackoverflow.com/users/4168972/david-fletcher"}, "edited": false, "score": 1, "creation_date": 1568623520, "post_id": 57951054, "comment_id": 102318626, "body": "Not worth writing an answer for but no-one has told you the nicest solution yet: <code>evens n = [0,2..n]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1568631770, "post_id": 57951533, "comment_id": 102322902, "body": "I think there is more going on here. You have used <code>xs :: [Integer]</code> but OP has <code>x :: Int</code>. And infact <code>:t filter even (1::Int)</code> complains: &quot;Couldn&#39;t match <code>[a]</code> with <code>Int</code>, whereas <code>:t filter even (1::_)</code> reports <code>1</code> to be of type <code>[a]</code>. A newcomer might be very confused that the number 1 is accepted by Haskell as a list (of type <code>[a]</code>). Maybe one should discuss this topic in a separate question but I want to point that out for future readers."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1568650298, "post_id": 57951533, "comment_id": 102333106, "body": "@MichaWiedenmann uh, I think I understand your comment now. you probably referred to the <code>x</code> in <code>filter even x</code> in the OP&#39;s code, which type is known as <code>x :: Integer</code> (or <code>Int</code>, whatever) from the context; but when I show the type derivation I derive the type of the expression <code>filter even xs</code> <i>&quot;in itself&quot;</i>, i.e. just from the type of <code>filter</code> and <code>even</code> -- to follow the error message. GHC <i>could</i> choose your approach, to focus on the <code>x</code> instead of <code>filter even x</code>, then say &quot;by LC <code>x</code> is known to be <code>Int</code>, but <code>filter even</code> expects <code>[a]</code>&quot; ...."}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1568658221, "post_id": 57951533, "comment_id": 102336224, "body": "Yes. (Curiously in <code>evens :: a -&gt; [a]; evens n =  [x | x &lt;- &quot;&quot;, filter even x]</code> the compiler gives a second warning (<code>[Integer]</code> doesn&#39;t match with <code>Char</code>), but it doesn&#39;t in ` evens :: a -&gt; [a]; evens n =  [x | x &lt;- [0], filter even x]`)."}], "tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": true, "score": 7, "last_activity_date": 1568630759, "last_edit_date": 1592644375, "creation_date": 1568615865, "answer_id": 57951533, "question_id": 57951054, "link": "https://stackoverflow.com/questions/57951054/list-comprehension-even-numbers-from-0-to-x/57951533#57951533", "title": "List Comprehension: Even numbers from 0 to x", "body": "<p>Just remove the word <code>filter</code> from that code.</p>\n<p>The <code>Boolean</code> that is expected is <code>even x</code>. When this value is <code>True</code>, <code>x</code> will be included in the output list.</p>\n<p><code>filter</code> is a <em>list</em>-creating function, but the list comprehension is already creating a list, itself.</p>\n<p>In fact, <code>filter p</code> could be coded as</p>\n<pre><code>filter p xs = [x | x &lt;- xs, p x]\n</code></pre>\n<p>So using <code>filter</code> on the inside is quite redundant.</p>\n<hr />\n<p>About that error message. You say</p>\n<blockquote>\n<p>I do see its expecting a Boolean but quite frankly I don't understand where or why.</p>\n</blockquote>\n<p>But the error message shows us <em>where</em>:</p>\n<blockquote>\n<p>ex1.hs:9:29: error:</p>\n<p>\u2022 Couldn't match expected type \u2018Bool\u2019 with actual type \u2018[Integer]\u2019</p>\n<p>\u2022 In the expression: <code>filter even x</code></p>\n</blockquote>\n<p>This is where. It is the most immediate culprit: the expression <code>filter even x</code>. It is <em>its</em> actual type, <code>[Integer]</code>, that does not match the expected type, <code>Bool</code>.</p>\n<blockquote>\n<p>In a stmt of a list comprehension: <code>filter even x</code></p>\n</blockquote>\n<p>That expression appears <s>in</s> as a <s>&quot;stmt&quot;</s> statement in our list comprehension,</p>\n<blockquote>\n<p>In the expression: <code>[x | x &lt;- [0 .. n], filter even x]</code></p>\n</blockquote>\n<p>which is the above full expression. So we just need to read those messages <em>inside-out</em>, to find our way to the (immediate) place of the error.</p>\n<hr />\n<p>So from the context of the list comprehension, <code>[ r | x &lt;- xs, q]</code>, the <code>q</code> is expected to have the type <code>Bool</code>.</p>\n<p>But in itself, <code>q = filter even x</code> has type <code>[Integer]</code>, the list of integers.</p>\n<p>Why? Because (with the simplified, non-polymorphic types as pertinent to this context)</p>\n<pre><code>  filter      :: (Integer -&gt; Bool) -&gt; [Integer] -&gt; [Integer]\n         even :: (Integer -&gt; Bool)\n  -----------------------------------------------------------\n  filter even ::                      [Integer] -&gt; [Integer]\n              xs                   :: [Integer]\n  -----------------------------------------------------------\n  filter even xs                                :: [Integer]\n</code></pre>\n<p>(read <code>::</code> as &quot;has type&quot;); whereas</p>\n<pre><code>  even   :: (Integer -&gt; Bool)\n       x ::  Integer\n  ---------------------------\n  even x             :: Bool\n</code></pre>\n<hr />\n<p>And if you're wondering why it's <code>Integer</code> even though you wrote <code>int</code>, the short answer to that is, <code>int</code> is a <em>type variable</em> just like <code>a</code> or <code>b</code> or <code>t</code> or ... . It is not a <em>type</em>, like <code>Int</code>. So you get the default which, here, is <code>Integer</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1568668011, "post_id": 57951577, "comment_id": 102339809, "body": "<code>\\x -&gt; even x</code> is equivalent to <code>even</code> in this context."}, {"owner": {"reputation": 5056, "user_id": 4276090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r87tb.jpg?s=128&g=1", "display_name": "Skam", "link": "https://stackoverflow.com/users/4276090/skam"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1568669594, "post_id": 57951577, "comment_id": 102340294, "body": "yes, that is an equivalent function but for a haskell noobie, I think it&#39;s a little more clear what is going on when you express it as a lambda"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1568669874, "post_id": 57951577, "comment_id": 102340388, "body": "If anything, I think it implies a difference between a function defined by the expression and the original function that simply doesn&#39;t exist."}], "tags": [], "owner": {"reputation": 5056, "user_id": 4276090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r87tb.jpg?s=128&g=1", "display_name": "Skam", "link": "https://stackoverflow.com/users/4276090/skam"}, "is_accepted": false, "score": 3, "last_activity_date": 1568671371, "last_edit_date": 1568671371, "creation_date": 1568616084, "answer_id": 57951577, "question_id": 57951054, "link": "https://stackoverflow.com/questions/57951054/list-comprehension-even-numbers-from-0-to-x/57951577#57951577", "title": "List Comprehension: Even numbers from 0 to x", "body": "<p>An alternative but also correct formulation would be,</p>\n\n<pre><code>Prelude&gt; filter (\\x -&gt; even x) [1..10]\n[2,4,6,8,10]\n</code></pre>\n\n<p>You can also drop the lambda function here and do</p>\n\n<pre><code>Prelude&gt; filter even [1..10]\n[2,4,6,8,10]\n</code></pre>\n\n<p>More succinctly, in the list-comprehension format.</p>\n\n<pre><code>Prelude&gt; [x | x &lt;- [1..10], even x]\n[2,4,6,8,10]\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 11330280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e40112638611ba4ebf281d8fb91d0f?s=128&d=identicon&r=PG&f=1", "display_name": "AlwaysThresh", "link": "https://stackoverflow.com/users/11330280/alwaysthresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 57951533, "answer_count": 2, "score": 3, "last_activity_date": 1568671371, "creation_date": 1568613280, "last_edit_date": 1568638283, "question_id": 57951054, "link": "https://stackoverflow.com/questions/57951054/list-comprehension-even-numbers-from-0-to-x", "title": "List Comprehension: Even numbers from 0 to x", "body": "<p>I'm currently learning Haskell and I must say, I am having a terrible time.</p>\n\n<p>I've been tasked with the exercise of creating a function, evens, which takes a value, <code>x</code>, and returns a list of all even values from <code>0</code> to <code>x</code>.</p>\n\n<p>For example:</p>\n\n<blockquote>\n<pre><code>&gt;  evens 10\n\n&gt; [2,4,6,8,10]\n</code></pre>\n</blockquote>\n\n<p>I have been attempting to modify some example functions using list comprehension to achieve my goal however I have simply been riddled with errors, worse even I've tried so many things everything is one big confusing blur. </p>\n\n<p>My last attempt went as follows:</p>\n\n<pre><code>evens :: int -&gt; [int]\nevens n = [x | x &lt;- [0..n], filter even x]\n</code></pre>\n\n<p>It produced the error:</p>\n\n<blockquote>\n  <p>ex1.hs:9:29: error:</p>\n  \n  <p>\u2022 Couldn't match expected type \u2018Bool\u2019 with actual type \u2018[Integer]\u2019</p>\n  \n  <p>\u2022 In the expression: <code>filter even x</code></p>\n  \n  <p>In a stmt of a list comprehension: <code>filter even x</code></p>\n  \n  <p>In the expression: <code>[x | x &lt;- [0 .. n], filter even x]</code></p>\n</blockquote>\n\n<p>I do see its expecting a Boolean but quite frankly I don't understand where or why.</p>\n\n<p>Any help would be largely appreciated. I have never had any experience with functional programming languages and I am having a hard time figuring out my errors in thought. I feel like I've overthought this one simple question to a point beyond belief.</p>\n"}, {"tags": ["haskell", "applicative"], "answers": [{"comments": [{"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1568609965, "post_id": 57950397, "comment_id": 102313536, "body": "I have serious doubts about <code>(&lt;*&gt;) _ Nil = Nil</code>. I haven&#39;t tried checking the laws, but that feels off."}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1568610190, "post_id": 57950397, "comment_id": 102313589, "body": "@dfeuer I don&#39;t see anything that could go wrong with that one. The only case I foresee possibly failing is the composition law, when <code>u</code>, <code>v</code>, and <code>w</code> are all <code>Node</code>s with stuff in the lists."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 0, "creation_date": 1568610576, "post_id": 57950397, "comment_id": 102313670, "body": "I don&#39;t really mean with regard to the laws (though I wouldn&#39;t be shocked of they were violated somehow) so much as with regard to some coherent concept. Consider what happens when you simply remove that equation."}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1568610643, "post_id": 57950397, "comment_id": 102313686, "body": "@dfeuer Then <code>pure id &lt;*&gt; Nil</code> would be bottom, since no case matches, and it definitely wouldn&#39;t be lawful then."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 2, "creation_date": 1568622791, "post_id": 57950397, "comment_id": 102318259, "body": "Points 1,2,3 do not completely convince me. I mean, <code>ZipList</code> is an applicative, yet it applies each function to a single item, and viceversa, in a pointwise way, effectively truncating the lists to the same length. Maybe we can implement a (lawful?) <code>ZipRoseTree</code> applicative instance, where the trees are pruned to their largest common shape, and then application is pointwise like for zip lists. If this is also lawful, the question becomes: which instance does the OP want?"}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1568639174, "post_id": 57950397, "comment_id": 102326837, "body": "@chi Those points came from the asker&#39;s test cases. I&#39;m pretty sure we could implement a lawful <code>ZipRoseTree</code>, but I see no possible way such a thing could pass those tests."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 1, "creation_date": 1568642817, "post_id": 57950397, "comment_id": 102329026, "body": "Ah, that&#39;s a good point. I missed the test cases, which do exclude a &quot;zip-tree&quot; instance."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1568661172, "post_id": 57950397, "comment_id": 102337338, "body": "I took a sledgehammer to it; you might find my answer interesting and/or terrifying."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1568663885, "post_id": 57950397, "comment_id": 102338327, "body": "Ah, I finally remembered why this seemed familiar.... <code>RoseTree ~= CofreeT [] Maybe</code>. That avoids needing a totally custom proof."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1568830901, "last_edit_date": 1568830901, "creation_date": 1568608178, "answer_id": 57950397, "question_id": 57950226, "link": "https://stackoverflow.com/questions/57950226/how-do-i-map-functions-over-a-rosetree-in-applicative-haskell/57950397#57950397", "title": "How do I map functions over a RoseTree in Applicative (Haskell)?", "body": "<p>Types can have more than one valid Applicative instance (such as how lists have one directly on <code>[]</code>, and another on their <code>newtype</code> wrapper <code>ZipList</code>). Your <code>&lt;*&gt;</code> function appears to be valid for <strong>an</strong> Applicative instance, just not the one that you want according to your test cases (and also not one that uses this definition of <code>pure</code>).</p>\n\n<p>The problem is here:</p>\n\n<pre>(&lt;*&gt;) (Node f tree) (Node x subtrees) = Node (f x) (<b>zipWith (&lt;*&gt;) tree subtrees</b>)</pre>\n\n<p>There's three main issues with it, given what your test cases expect:</p>\n\n<ol>\n<li>It doesn't ever apply <code>f</code> to anything in <code>subtrees</code>.</li>\n<li>It doesn't ever apply anything in <code>tree</code> to <code>x</code>.</li>\n<li>It only applies each <code>tree</code> element to one element in <code>subtrees</code>.</li>\n</ol>\n\n<p>This line should work instead:</p>\n\n<pre><code>(&lt;*&gt;) (Node f tree) n@(Node x subtrees) = Node (f x) (map (fmap f) subtrees ++ map (&lt;*&gt; n) tree)\n</code></pre>\n\n<p>Also, while this makes your test cases work as expected, I haven't rigorously verified that it's actually a lawful instance. (I've looked at it briefly and it seems fine, but I'm also writing this at 1am.)</p>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 2, "last_activity_date": 1568674272, "last_edit_date": 1568674272, "creation_date": 1568661025, "answer_id": 57963068, "question_id": 57950226, "link": "https://stackoverflow.com/questions/57950226/how-do-i-map-functions-over-a-rosetree-in-applicative-haskell/57963068#57963068", "title": "How do I map functions over a RoseTree in Applicative (Haskell)?", "body": "<p>We can see your <code>RoseTree</code> as a particular application of a particular monad transformer. Let's put your own definition in a module called <code>Rose</code> and derive <code>Read</code> and <code>Show</code> instances for <code>RoseTree</code>. Now we can get fancy. Note: you probably won't understand everything in here just yet. Some of it uses pretty advanced GHC language extensions. But I think it's interesting anyway.</p>\n\n<p>We'll use the <a href=\"http://hackage.haskell.org/package/free-5.1.2/docs/Control-Comonad-Trans-Cofree.html#t:CofreeT\" rel=\"nofollow noreferrer\">cofree comonad transformer</a> from the <code>free</code> package. As the name indicates, it plays a special role relative to the <code>Comonad</code> class, but it turns out to do useful things with <code>Monad</code>s too!</p>\n\n<pre><code>{-# language PatternSynonyms, ViewPatterns, GeneralizedNewtypeDeriving #-}\nmodule FancyRose where\n\nimport Text.Read (Read (readPrec))\nimport qualified Rose\nimport Control.Comonad.Trans.Cofree\n{-\nnewtype CofreeT f w a = CofreeT\n  { runCofreeT :: w (CofreeF f a (CofreeT f w a)) }\n\ndata CofreeF f a b = a :&lt; f b\n-}\n\nnewtype RoseTree a = RoseTree { unRoseTree :: CofreeT [] Maybe a }\n  deriving (Functor, Applicative, Monad, Eq, Ord)\n</code></pre>\n\n<p>The great thing is that we don't have to come up with proofs of the <code>Applicative</code> (or <code>Monad</code>) laws ourselves. You can find them all <a href=\"https://github.com/ekmett/free/tree/master/doc/proof/Control/Comonad/Trans/Cofree\" rel=\"nofollow noreferrer\">in the <code>free</code> git repository</a>!</p>\n\n<p>These pattern synonyms allow users to pretend\n(for the most part) that <code>RoseTree</code> is defined\nthe simple way. Don't worry too much about the details.</p>\n\n<pre><code>-- Create or match on an empty 'RoseTree'. This is a simple\n-- bidirectional pattern synonym: writing `Nil` in an expression\n-- or a pattern is just the same as writing\n-- `RoseTree (CofreeT Nothing)`\npattern Nil :: RoseTree a\npattern Nil = RoseTree (CofreeT Nothing)\n\n-- Create or match on a non-empty 'RoseTree'. This is an explicit\n-- bidirectional pattern synonym. We use a view pattern to show\n-- how to match on a node, and then in the `where` clause we show\n-- how to construct one.\npattern Node :: a -&gt; [RoseTree a] -&gt; RoseTree a\npattern Node a ts &lt;- RoseTree (CofreeT (fmap (fmap RoseTree) -&gt; Just (a :&lt; ts)))\n  where\n    Node a ts = RoseTree $ CofreeT $ Just $ a :&lt; map unRoseTree ts\n</code></pre>\n\n<p>Here's how we can implement <code>Show</code> and <code>Read</code> without much fuss:</p>\n\n<pre><code>-- Convert a `RoseTree` to the simple representation of one.\n-- Note that the pattern synonyms make this really easy!\ntoBasicRose :: RoseTree a -&gt; Rose.RoseTree a\ntoBasicRose Nil = Rose.Nil\ntoBasicRose (Node a ts) = Rose.Node a (map toBasicRose ts)\n\n-- Convert the simple representation back to a `RoseTree`.\nfromBasicRose :: Rose.RoseTree a -&gt; RoseTree a\nfromBasicRose Rose.Nil = Nil\nfromBasicRose (Rose.Node a ts) = Node a (map fromBasicRose ts)\n\ninstance Show a =&gt; Show (RoseTree a) where\n  showsPrec p = showsPrec p . toBasicRose\ninstance Read a =&gt; Read (RoseTree a) where\n  readPrec = fmap fromBasicRose readPrec\n</code></pre>\n\n<p>All your test cases pass.</p>\n\n<h3>Performance note</h3>\n\n<p>I was concerned that all the mapping could make the <code>Node</code> pattern slow. But I've just checked the compiler intermediate language and determined that GHC's rewrite rules actually kick in and get rid of all the mapping unconditionally.</p>\n"}], "owner": {"reputation": 500, "user_id": 11303290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5926bac6c5617d83b1af462ded299752?s=128&d=identicon&r=PG&f=1", "display_name": "llamaro25", "link": "https://stackoverflow.com/users/11303290/llamaro25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "accepted_answer_id": 57950397, "answer_count": 2, "score": 1, "last_activity_date": 1568830901, "creation_date": 1568606457, "last_edit_date": 1568607383, "question_id": 57950226, "link": "https://stackoverflow.com/questions/57950226/how-do-i-map-functions-over-a-rosetree-in-applicative-haskell", "title": "How do I map functions over a RoseTree in Applicative (Haskell)?", "body": "<p>How do I apply applicative to a RoseTree, i.e. return a tree composed of trees created by the successive application of functions to initial nodes. Here's the code that I have written:</p>\n\n<pre><code>{-# LANGUAGE DeriveFunctor, InstanceSigs #-}\n\ndata RoseTree a = Nil | Node a [RoseTree a] deriving(Functor,Show)\n\ninstance Applicative RoseTree where\n    pure :: a -&gt; RoseTree a\n    pure x = Node x []\n\n    (&lt;*&gt;) :: RoseTree (a -&gt; b) -&gt; RoseTree a -&gt; RoseTree b\n    (&lt;*&gt;) _ Nil = Nil\n    (&lt;*&gt;) Nil _ = Nil\n    (&lt;*&gt;) (Node f tree) (Node x subtrees) = Node (f x) (zipWith (&lt;*&gt;) tree subtrees)\n</code></pre>\n\n<p>I am unsure what's wrong with my definition of pure and (&lt;*>). Here's the error I got:</p>\n\n<p>Error:\n<code>failure in expression `(Node (+1) []) &lt;*&gt; (Node 7 [Node 1 [], Node 2 [], Node 3 [Node 4 []]])'\nexpected: Node 8 [Node 2 [],Node 3 [],Node 4 [Node 5 []]]\n but got: Node 8 []</code></p>\n\n<p>Test cases for reference:</p>\n\n<pre><code>-- &gt;&gt;&gt; (Node (+1) [Node (*2) []]) &lt;*&gt; Nil\n-- Nil\n--\n-- &gt;&gt;&gt; Nil &lt;*&gt; (Node 7 [Node 1 [], Node 2 [], Node 3 [Node 4 []]])\n-- Nil\n--\n-- &gt;&gt;&gt; (Node (+1) []) &lt;*&gt; (Node 7 [Node 1 [], Node 2 [], Node 3 [Node 4 []]])\n-- Node 8 [Node 2 [],Node 3 [],Node 4 [Node 5 []]]\n--\n-- &gt;&gt;&gt; (Node (+1) [Node (*2) []]) &lt;*&gt; (Node 5 [Node 2 [], Node 8 [Node 1 []]])\n-- Node 6 [Node 3 [],Node 9 [Node 2 []],Node 10 [Node 4 [],Node 16 [Node 2 []]]]\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 27561, "user_id": 214446, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5deb6b87326686b1f2e9fdb37ceac210?s=128&d=identicon&r=PG", "display_name": "mb21", "link": "https://stackoverflow.com/users/214446/mb21"}, "edited": false, "score": 0, "creation_date": 1568619470, "post_id": 57949784, "comment_id": 102316825, "body": "hm... not sure I follow what your code is trying to do... but I would approach this with the idea of making exactly one pass through the input string; i.e. looking at the first character in the string, do the right thing depending on whether it&#39;s in the whitelist or blacklist, and call <code>tokenize</code> with the rest of the input string. Something like: <code>tokenize (x:xs) whitelist blacklist = res ++ tokenize xs whitelist blacklist</code>"}, {"owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "edited": false, "score": 0, "creation_date": 1568634685, "post_id": 57949784, "comment_id": 102324373, "body": "so what should return <code>tokenize &quot;ab cd e-f&quot; &quot;-&quot; &quot; &quot;</code>? I guess <code>[&quot;ab&quot;,&quot;cd&quot;,&quot;e&quot;, &quot;-&quot;, &quot;f&quot;]</code>.  And for <code>tokenize &quot;ab cd -ef&quot; &quot;-&quot; &quot;f&quot;</code>?. Up to your description, <code>f</code> should be remove, so the output should be <code>[&quot;ab&quot;,&quot;cd&quot;,  &quot;-&quot;, &quot;e&quot;]</code>. Am I wrong?"}, {"owner": {"reputation": 4416, "user_id": 2108477, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f30268b2a1d0a8a18012e602cd3cb783?s=128&d=identicon&r=PG", "display_name": "Ignat Insarov", "link": "https://stackoverflow.com/users/2108477/ignat-insarov"}, "edited": false, "score": 1, "creation_date": 1568706122, "post_id": 57949784, "comment_id": 102349204, "body": "<b>N.B.</b>   As per <a href=\"https://translate.google.com/#view=home&amp;op=translate&amp;sl=no&amp;tl=en&amp;text=ord%0Afjern%20ord%0Afinnes\" rel=\"nofollow noreferrer\">Google Translate</a>, in Norwegian, <i>&quot;ord&quot;</i> = &quot;word&quot;, <i>&quot;fjern ord&quot;</i> = &quot;remove words&quot;, <i>&quot;finnes&quot;</i> = &quot;exists&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 2623, "user_id": 9271266, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2K9ibxquX4/AAAAAAAAAAI/AAAAAAAAABU/Jq4JVvo766Q/photo.jpg?sz=128", "display_name": "lsmor", "link": "https://stackoverflow.com/users/9271266/lsmor"}, "is_accepted": false, "score": 0, "last_activity_date": 1568711963, "creation_date": 1568711963, "answer_id": 57971157, "question_id": 57949784, "link": "https://stackoverflow.com/questions/57949784/tokenize-function-that-doesnt-split-up-string-properly/57971157#57971157", "title": "tokenize function that doesn&#39;t split up string properly", "body": "<p>So this is a rather verbose implementation of what I think you want... which is not so clear to me. The idea is: <em>For each token apply a function which converts them into a list of string. Then concat all results into one</em>. From this definition is more less clear that you need something like below:</p>\n\n<pre><code>import Data.List\ntokenize s imp del = concatMap g $ words s\n                     ^^^^^^^^  ^   ^^^^^^^  \n                     |         |   |- This the list of token\n                     |         |- This is a function that apply the logic to each token. We'll think about this later\n                     |- This will apply g to each token a concat the results\n</code></pre>\n\n<p><code>concatMap</code> and <code>words</code> are given by <code>Data.List</code> module. We need to think only about <code>g</code>. Now for each token you need an accumulator which behaves as follow:</p>\n\n<p><em>for each char in the token: if the char is in <code>del</code>, just ignore it and continue. if the char is in <code>imp</code>, build a string, accumulate it and continue. Otherwise join the char with the last accumulate value</em> <strong>if such a value is not in</strong> <code>imp</code>. </p>\n\n<p>Due to the fact that you need to check twice if a character is in <code>imp</code> or not, It makes sense to keep track of such check in your accumulator. Therefore the type of it should be <code>([String], Bool)</code>. The <code>[String]</code> will be holding your strings, whereas the <code>Bool</code> is a flag saying <em>\"Hey!, The last value you append to the list is an important one\"</em>. having said all of this, the implementation quite follows it word by word</p>\n\n<pre><code>import Data.List\n\ntype DelString = [Char]\ntype ImpString = [Char]\n\ntokenize :: String -&gt; ImpString -&gt; DelString -&gt; [String]\ntokenize s imp del = concatMap (fst . foldr (g imp del) ([], False) ) $ words s\n                                ^^^   ^^^^^ \n--                              |     |- Remeber this foldr is apply to each token\n--                              |- The final result is a Tuple. Take the first element\n\ng :: ImpString -&gt; DelString -&gt; Char -&gt; ([String], Bool) -&gt; ([String], Bool)\ng imp del c acc@(l, b)\n  | c `elem` del = acc                   -- If c in del, just continue without touching the acc\n  | c `elem` imp = ([c] : l, True)       -- If c is important, append it as a String and set the flag to True\n  | otherwise    = case acc of\n      ([]  ,     _)  -&gt; ([c] : l, False) -- Probably you can get rid of this... but just in case (no pun intended)\n      (_   ,  True)  -&gt; ([c] : l, False) -- The case of previous value being important\n      (s:ss, False) -&gt; ((c:s):ss, False) -- The regular case\n\n\n\n&gt; tokenize \"ab cd -ef\" \"\" \"\"\n[\"ab\",\"cd\",\"-ef\"]\n&gt; tokenize \"ab cd -ef\" \"-\" \"\"\n[\"ab\",\"cd\",\"-\",\"ef\"]\n&gt; tokenize \"ab cd -ef\" \"-\" \"c\"\n[\"ab\",\"d\",\"-\",\"ef\"]\n&gt; tokenize \"ab c#d -e*f\" \"-*#\" \"c\"\n[\"ab\",\"#\",\"d\",\"-\",\"e\",\"*\",\"f\"]\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 12013587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b921c97c1fb20fe3c7b241b8402d7a1?s=128&d=identicon&r=PG&f=1", "display_name": "alisemiles", "link": "https://stackoverflow.com/users/12013587/alisemiles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1568711963, "creation_date": 1568601595, "last_edit_date": 1568603314, "question_id": 57949784, "link": "https://stackoverflow.com/questions/57949784/tokenize-function-that-doesnt-split-up-string-properly", "title": "tokenize function that doesn&#39;t split up string properly", "body": "<p>I'm working on some code for an assignment that should tokenize a String. It takes in 3 strings as arguments, and returns a list of strings. The arguments are the string that should be tokenized, a string, <code>s</code>, of characters that should stand as a single string in the list if it occurs in <code>s</code>, and a string of characters that should be removed from <code>s</code>.</p>\n\n<p>Some examples that we should get:</p>\n\n<blockquote>\n  <p><code>tokenize \"ab cd -ef\" \"\" \" \"</code> should give: <code>[\"ab\",\"cd\",\"-ef\"]</code></p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p><code>tokenize \"ab cd -ef\" \"-\" \" \"</code> should give: <code>[\"ab\",\"cd\",\"-\",\"ef\"]</code></p>\n</blockquote>\n\n<p>I've looked online and in books for help, and my code gives correct output for some of the examples, but not all. I'm still learning Haskell, so I don't understand all of the help other has gotten online(and I don't want to copy&amp;paste)</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>tokenize :: String -&gt; [Char] -&gt; [Char] -&gt; [String]\ntokenize [] imp rem = []\ntokenize (x:xs) imp rem = if null imp &amp;&amp; null rem then [(x:xs)]\n                            else if null imp &amp;&amp; rem == \" \" then ord (x:xs)\n                            else if finnes rem x then tokenize xs imp rem\n                            else if finnes imp x then [x]:(tokenize xs imp rem)\n                            else [x] : (tokenize xs imp rem)\n\nord :: String -&gt; [String]\nord [] = []\nord s = takeWhile (/= ' ') s : (ord (fjernOrd s ' '))\n\nfjernOrd :: String -&gt; Char -&gt; String\nfjernOrd [] c = []\nfjernOrd xs c = if (head xs) /= c then fjernOrd (tail xs) c else tail xs\n\n--wrote my own version of elem to check if a character exists in a string\nfinnes :: String -&gt; Char -&gt; Bool\nfinnes \"\" c = False\nfinnes (s:xs) c | s == c = True\n                | otherwise = finnes xs c\n</code></pre>\n\n<p>All the other functions run as they should when I try them, so the problem is in the tokenize-function.</p>\n\n<p>It works when I put <code>\" \"</code> for <code>rem</code>, and <code>\"\"</code> for <code>imp</code>, but not when i put characters in <code>imp</code>(f.ex. \"-\")</p>\n\n<p>For example when I write <code>tokenize \"ab cd -ef\"</code>, I get <code>[\"ab\",\"cd\",\"-ef\"]</code>, which is correct, but when I type <code>tokenize \"ab cd -ef\" \"-\" \" \"</code>, I should get\n<code>[\"ab\",\"cd\",\"-\",\"ef\"]</code>, but instead I get <code>[\"a\",\"b\",\"c\",\"d\",\"-\",\"e\",\"f\"]</code></p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1568623288, "post_id": 57948829, "comment_id": 102318511, "body": "The issue here is that <code>Hello (2 :: Int)</code> chooses <code>a</code> (good!) but does not allow GHC to infer <code>b</code> (bad). GHCi uses more aggressive defaulting rules and chooses <code>b = ()</code> (I think), but GHC is less eager to do that, since it might lead to unwanted surprising results, in the general case. Hence, we need an annotation for the whole expression <code>Hello 2 :: EitherOr MyTypeA MyTypeB</code> (as done below by Thomas)."}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1568640433, "post_id": 57948829, "comment_id": 102327602, "body": "@chi Maybe you can add another answer or merge it with Thomas M. DuBuissons answer (with his permission of course). Since you are essentially answering the question. (And merging would provide the best answer for future readers imho.)"}], "answers": [{"tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": true, "score": 5, "last_activity_date": 1568589389, "creation_date": 1568589389, "answer_id": 57948859, "question_id": 57948829, "link": "https://stackoverflow.com/questions/57948829/chapter-6-exercise-7-haskell-from-first-principles/57948859#57948859", "title": "Chapter 6, exercise 7, Haskell from first principles", "body": "<p>The type defaulting rules in GHCi are different than those used when compiling a program such as with GHC.  When a type is ambiguous you should give an explicit signature such as:</p>\n\n<pre><code>print (Hello 2 == (Hello 2 :: EitherOr Integer ())\n</code></pre>\n\n<p>In practice this isn't needed too often because the types are implied by other parts of the program.  Toy and educational snippets like the above do not have much in the way of context which could add information for the type checker.</p>\n"}], "owner": {"reputation": 649, "user_id": 3034580, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b79832c826b77bab56982225b17901df?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/3034580/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 57948859, "answer_count": 1, "score": 3, "last_activity_date": 1568589389, "creation_date": 1568588976, "question_id": 57948829, "link": "https://stackoverflow.com/questions/57948829/chapter-6-exercise-7-haskell-from-first-principles", "title": "Chapter 6, exercise 7, Haskell from first principles", "body": "<p>For the following code:</p>\n\n<pre><code>module Main where\n\ndata EitherOr a b = Hello a | Goodbye b deriving Show\n\ninstance (Eq a, Eq b) =&gt; Eq (EitherOr a b) where\n  (==) (Hello x) (Hello x') = x == x'\n  (==) (Goodbye x) (Goodbye x') = x == x'\n  (==) _ _ = False\n\nmain :: IO ()\nmain = do\n  print (Hello 2 == Hello 2)\n  -- print (Hello 3 == Hello 2)\n  -- print (Goodbye 3 == Goodbye 3)\n  -- print (Goodbye 4 == Goodbye 3)\n  -- print (Hello 3 == Goodbye 3)\n</code></pre>\n\n<p>executed under runhaskell, i.e., under ghc, I get the following error:</p>\n\n<pre><code>    \u2022 Ambiguous type variable \u2018b0\u2019 arising from a use of \u2018==\u2019\n      prevents the constraint \u2018(Eq b0)\u2019 from being solved.\n      Probable fix: use a type annotation to specify what \u2018b0\u2019 should be.\n      These potential instances exist:\n        instance Eq Ordering -- Defined in \u2018GHC.Classes\u2019\n        instance Eq Integer\n          -- Defined in \u2018integer-gmp-1.0.2.0:GHC.Integer.Type\u2019\n        instance (Eq a, Eq b) =&gt; Eq (EitherOr a b)\n          -- Defined at /tmp/runghcXXXX61964-0.hs:5:10. &lt;-- This is because I am using org-mode source blocks\n        ...plus 23 others\n        ...plus 11 instances involving out-of-scope types\n        (use -fprint-potential-instances to see them all)\n    \u2022 In the first argument of \u2018print\u2019, namely \u2018(Hello 2 == Hello 2)\u2019\n      In a stmt of a 'do' block: print (Hello 2 == Hello 2)\n      In the expression: do print (Hello 2 == Hello 2)\n   |\n12 |   print (Hello 2 == Hello 2)\n   |          ^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>I thought I could give the compiler a type hint by doing </p>\n\n<pre><code>print ((Hello (2 :: Int)) == (Hello (2 :: Int)))\n</code></pre>\n\n<p>or something similar, but that doesn't seem to be enough. I see that a and b are polymorphic, but I thought the use of == in main might be enough to help the compiler infer types.</p>\n\n<p>Next I loaded the data type and typeclass instance in ghci and explored the types a bit and found that, for instance</p>\n\n<pre><code>\u03bb&gt; :t Hello (2 :: Int)\nHello (2 :: Int) :: EitherOr Int b\n</code></pre>\n\n<p>As expected. Again in ghci, I do more exploration and see that default types are being used</p>\n\n<p>\u03bb> :t (Hello 2 == Hello 2)</p>\n\n<pre><code>&lt;interactive&gt;:1:2: warning: [-Wtype-defaults]\n    \u2022 Defaulting the following constraints to type \u2018Integer\u2019\n        (Eq a0) arising from a use of \u2018==\u2019 at &lt;interactive&gt;:1:2-19\n        (Num a0) arising from the literal \u20182\u2019 at &lt;interactive&gt;:1:8\n    \u2022 In the expression: (Hello 2 == Hello 2)\n\n&lt;interactive&gt;:1:2: warning: [-Wtype-defaults]\n    \u2022 Defaulting the following constraint to type \u2018()\u2019\n        Eq b0 arising from a use of \u2018==\u2019\n    \u2022 In the expression: (Hello 2 == Hello 2)\n(Hello 2 == Hello 2) :: Bool\n</code></pre>\n\n<p>which is what I want, of course.</p>\n\n<p>Then I actually execute the code in ghci and get the right answer with some defaulting going on</p>\n\n<pre><code>\u03bb&gt; Hello 2 == Hello 2\n\n&lt;interactive&gt;:27:1: warning: [-Wtype-defaults]\n    \u2022 Defaulting the following constraints to type \u2018Integer\u2019\n        (Eq a0) arising from a use of \u2018==\u2019 at &lt;interactive&gt;:27:1-18\n        (Num a0) arising from the literal \u20182\u2019 at &lt;interactive&gt;:27:7\n    \u2022 In the expression: Hello 2 == Hello 2\n      In an equation for \u2018it\u2019: it = Hello 2 == Hello 2\n\n&lt;interactive&gt;:27:1: warning: [-Wtype-defaults]\n    \u2022 Defaulting the following constraint to type \u2018()\u2019\n        Eq b0 arising from a use of \u2018==\u2019\n    \u2022 In the expression: Hello 2 == Hello 2\n      In an equation for \u2018it\u2019: it = Hello 2 == Hello 2\n\n&lt;interactive&gt;:27:1: warning: [-Wtype-defaults]\n    \u2022 Defaulting the following constraints to type \u2018Integer\u2019\n        (Eq a0) arising from a use of \u2018==\u2019 at &lt;interactive&gt;:27:1-18\n        (Num a0) arising from the literal \u20182\u2019 at &lt;interactive&gt;:27:7\n    \u2022 In the expression: Hello 2 == Hello 2\n      In an equation for \u2018it\u2019: it = Hello 2 == Hello 2\n\n&lt;interactive&gt;:27:1: warning: [-Wtype-defaults]\n    \u2022 Defaulting the following constraint to type \u2018()\u2019\n        Eq b0 arising from a use of \u2018==\u2019\n    \u2022 In the expression: Hello 2 == Hello 2\n      In an equation for \u2018it\u2019: it = Hello 2 == Hello 2\nTrue\n</code></pre>\n\n<p>But the same code executed under runhaskell, i.e., under ghc compilation, fails with the error I first gave. What do I need to learn here?</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 1, "creation_date": 1568584241, "post_id": 57948230, "comment_id": 102309759, "body": "You seem to be a Haskell beginner. I&#39;d reccomend reading <a href=\"http://learnyouahaskell.com/chapters\" rel=\"nofollow noreferrer\">LYAH</a> to completion before asking question like this\u2014LYAH covers this problem very quickly."}], "answers": [{"tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 9, "last_activity_date": 1568583679, "last_edit_date": 1568583679, "creation_date": 1568583321, "answer_id": 57948338, "question_id": 57948230, "link": "https://stackoverflow.com/questions/57948230/saving-the-result-of-applying-a-function-to-a-variable-in-the-same-variable/57948338#57948338", "title": "Saving the result of applying a function to a variable in the same variable", "body": "<p><code>test</code> on the first line and <code>test</code> on the second line are <em>not</em>, in fact, the same variable. They're two different, separate, unrelated variables that just happen to have the same name.</p>\n\n<p>Further, the concept of \"saving in a variable\" does not apply to Haskell. In Haskell, variables cannot be interpreted as \"memory cells\", which can hold values. Haskell's variables are more like mathematical variables - just names that you give to complex expressions for easier reasoning (well, this is a bit of an oversimplification, but good enough for now)</p>\n\n<p>Consequently, variables in Haskell are <em>immutable</em>. You cannot change the value of a variable by assignment, like you can in many other languages. This property follows from interpreting the concept of \"variable\" in the mathematical sense, as described above.</p>\n\n<p>Furthermore, definitions (aka \"bindings\") in Haskell are <em>recursive</em>. This means that the right side (the body) of a binding may refer to its left side. This is very handy for constructing infinite data structures, for example:</p>\n\n<pre><code>x = 42 : x\n</code></pre>\n\n<p>An infinite list of <code>42</code>s</p>\n\n<p>In your example, when you write <code>test = drop 1 test</code>, you're defining a list named <code>test</code>, which is completely unrelated to the list defined on the previous line, and which is equal to <em>itself without the first element</em>. It's only natural that trying to print such a list results in an infinite loop. </p>\n\n<p>The bottom line is: you cannot do what you're trying to do. You cannot create a new binding, which shadows an existing binding, while at the same time references it. Just give it a different name.</p>\n"}], "owner": {"reputation": 11, "user_id": 11110636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm864.jpg?s=128&g=1", "display_name": "Marcos", "link": "https://stackoverflow.com/users/11110636/marcos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57948338, "answer_count": 1, "score": -2, "last_activity_date": 1568584164, "creation_date": 1568582168, "last_edit_date": 1568584164, "question_id": 57948230, "link": "https://stackoverflow.com/questions/57948230/saving-the-result-of-applying-a-function-to-a-variable-in-the-same-variable", "title": "Saving the result of applying a function to a variable in the same variable", "body": "<p>I was remembering the haskell programming I learnt the last year and suddenly I had a little problem.</p>\n\n<pre><code>ghci&gt; let test = [1,2,3,4]\nghci&gt; test = drop 1 test\nghci&gt; test\n\n\n\n^CInterrupted.\n</code></pre>\n\n<p>I do not remember if it is possible.\nThanks!</p>\n"}, {"tags": ["haskell", "filter"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 3, "creation_date": 1568574529, "post_id": 57946743, "comment_id": 102307868, "body": "You might also like <code>hasSlash = elem &#39;&#47;&#39;</code>."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 2, "creation_date": 1568578478, "post_id": 57946743, "comment_id": 102308725, "body": "You don&#39;t need <code>do</code>  in <code>hasSlash</code>; it doesn&#39;t do any monadic binding."}], "answers": [{"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 1, "creation_date": 1568570927, "post_id": 57946765, "comment_id": 102306916, "body": "Good method. Thanks."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1568578434, "last_edit_date": 1568578434, "creation_date": 1568570132, "answer_id": 57946765, "question_id": 57946743, "link": "https://stackoverflow.com/questions/57946743/neither-filter-nor-filterm-bool-vs-io-bool-difference/57946765#57946765", "title": "Neither filter nor filterM - Bool vs IO Bool difference", "body": "<p>You don't need or want <code>IO</code> or any other monad for that filtering. Do this instead:</p>\n\n<pre><code>import Data.List\n\nhasSlash :: [Char] -&gt; Bool\nhasSlash firline = isInfixOf \"/\" firline\n\nmain :: IO ()\nmain = do\n    let d = [\"abcd\",\"abc/d\",\"a/bcd\",\"abcd\",\"ab/cd\"]\n    -- filter out those that do not have '/'\n    let e = filter hasSlash d\n    print e\n</code></pre>\n\n<p>Note the use of <code>let e =</code> instead of <code>e &lt;-</code> to avoid needing a monadic context.</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 57946765, "answer_count": 1, "score": 1, "last_activity_date": 1568578434, "creation_date": 1568569982, "question_id": 57946743, "link": "https://stackoverflow.com/questions/57946743/neither-filter-nor-filterm-bool-vs-io-bool-difference", "title": "Neither filter nor filterM - Bool vs IO Bool difference", "body": "<p>I am trying to filter out those strings that contain a slash: </p>\n\n<pre><code>import Data.List\nimport Control.Monad(filterM)\n\nhasSlash :: [Char] -&gt; Bool\nhasSlash firline = do\n    isInfixOf \"/\" firline\n\nmain :: IO ()\nmain = do\n    let d = [\"abcd\",\"abc/d\",\"a/bcd\",\"abcd\",\"ab/cd\"]\n    -- filter out those that do not have '/'\n    e &lt;- filterM hasSlash d\n    print e\n</code></pre>\n\n<p>However, I am getting following error: </p>\n\n<pre><code>soq_filter.hs:13:18: error:\n    \u2022 Couldn't match type \u2018Bool\u2019 with \u2018IO Bool\u2019\n      Expected type: [Char] -&gt; IO Bool\n        Actual type: [Char] -&gt; Bool\n    \u2022 In the first argument of \u2018filterM\u2019, namely \u2018hasSlash\u2019\n      In a stmt of a 'do' block: e &lt;- filterM hasSlash d\n      In the expression:\n        do { let d = ...;\n             e &lt;- filterM hasSlash d;\n             print e }\n</code></pre>\n\n<p>Where is the problem and how can it be solved? Thanks.</p>\n"}, {"tags": ["haskell", "treeview", "gtk", "gtk3", "gobject-introspection"], "comments": [{"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 2, "creation_date": 1568643612, "post_id": 57945543, "comment_id": 102329452, "body": "I don&#39;t know how it&#39;s done in haskell, but if it was C, I&#39;d say that your <code>TreeViewColumn</code> 1) doesn&#39;t have a GtkCellRenderer. 2) doesn&#39;t know, where to get data from. Take a look at <a href=\"https://developer.gnome.org/gtk3/stable/GtkTreeViewColumn.html#gtk-tree-view-column-new-with-attributes\" rel=\"nofollow noreferrer\">this</a> method. maybe it&#39;ll help you."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 1798586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1c9008ee67a450ada765469e3b8d66?s=128&d=identicon&r=PG", "display_name": "Sergey  Stretovich", "link": "https://stackoverflow.com/users/1798586/sergey-stretovich"}, "is_accepted": false, "score": 0, "last_activity_date": 1596902247, "last_edit_date": 1596902247, "creation_date": 1595354229, "answer_id": 63020362, "question_id": 57945543, "link": "https://stackoverflow.com/questions/57945543/example-of-programmatically-creating-and-populating-a-treeview-in-gi-gtk/63020362#63020362", "title": "Example of programmatically creating and populating a TreeView in gi-gtk", "body": "<p>Here's my working example :</p>\n<pre><code>{-# LANGUAGE OverloadedStrings #-}\n{-# LANGUAGE OverloadedLabels #-}\n{-# LANGUAGE ScopedTypeVariables #-}\n\nmodule Main where\n\nimport Data.GI.Base\nimport Control.Monad \nimport Data.Text (Text, pack)\nimport qualified GI.Gtk as Gtk\nimport qualified GI.Pango as Pango\n\ndemoList::[Text]\ndemoList = [&quot;1 James&quot;,&quot;2 John&quot;,&quot;3 Robert&quot;,&quot;4 Michael&quot;,&quot;5 William&quot;,&quot;6 David&quot;,&quot;7 Richard&quot;,&quot;8 Joseph&quot;,&quot;9 Thomas&quot;,&quot;10 Charles&quot;]\n \nsetValuesToListStore :: Gtk.ListStore -&gt;  [Text] -&gt; Int -&gt; IO Gtk.TreeIter\nsetValuesToListStore lsts artx counter = do\n             let stT::Text = artx !! counter\n             gv &lt;- toGValue (Just stT)\n             if (counter == (length artx)-1) then Gtk.listStoreInsertWithValuesv lsts (-1) [0] [gv]              \n             else do               \n               m &lt;- (Gtk.listStoreInsertWithValuesv lsts (-1) [0] [gv])\n               setValuesToListStore lsts artx (counter + 1)\n\nmain :: IO ()\nmain = do\n    void $ Gtk.init Nothing\n\n    window &lt;- new Gtk.Window []\n    on window #destroy Gtk.mainQuit\n\n    column &lt;- new Gtk.TreeViewColumn [ #title := &quot;Column name&quot; ]\n    render &lt;- new Gtk.CellRendererText [ #ellipsize :=  Pango.EllipsizeModeEnd\n                                       , #editable := False ]\n    #packStart column render True\n    #addAttribute column render &quot;text&quot; 0\n\n    mlistStore &lt;- Gtk.listStoreNew [gtypeString]\n   \n    setValuesToListStore mlistStore demoList 0 \n    \n    view &lt;- new Gtk.TreeView[#enableTreeLines := True, #headersVisible := True]     \n    lk &lt;- (Gtk.treeViewSetModel view (Just mlistStore))\n    \n    #appendColumn view column\n\n    #expandAll view\n    #add window view\n    #showAll window\n\n    Gtk.main\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4956000, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a58e7c6cf4b4a3756deffa6711867adc?s=128&d=identicon&r=PG&f=1", "display_name": "fsestini", "link": "https://stackoverflow.com/users/4956000/fsestini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1596902247, "creation_date": 1568561142, "question_id": 57945543, "link": "https://stackoverflow.com/questions/57945543/example-of-programmatically-creating-and-populating-a-treeview-in-gi-gtk", "title": "Example of programmatically creating and populating a TreeView in gi-gtk", "body": "<p>I don't seem to be able to write working code that creates and populates a TreeView using the gtk 3 bindings of <code>gi-gtk</code> (specifically version 3.0.32). All examples I could find online are for different (and older) bindings that do not apply to <code>gi-gtk</code>. The documentation itself is particularly useless in this case.</p>\n\n<p>I have tried replicating a simplified version (one row, one column) of <a href=\"https://developer.gnome.org/gtkmm-tutorial/stable/sec-treeview-examples.html.en\" rel=\"nofollow noreferrer\">this example</a>, as follows</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>import qualified GI.Gtk as Gtk\nimport Data.GI.Base.GType (gtypeString)\nimport Data.GI.Base.GValue (IsGValue(..))\n\nmain :: IO ()\nmain = do\n  Gtk.init Nothing\n  w &lt;- Gtk.windowNew Gtk.WindowTypeToplevel\n  treeView &lt;- Gtk.treeViewNew\n  store &lt;- Gtk.listStoreNew [gtypeString]\n  Gtk.treeViewSetModel treeView (Just store)\n\n  iter &lt;- Gtk.listStoreAppend store\n  str &lt;- toGValue (Just \"foo\")\n  Gtk.listStoreSetValue store iter 0 str\n\n  Gtk.treeViewColumnNew &gt;&gt;= Gtk.treeViewAppendColumn treeView\n\n  Gtk.containerAdd w treeView\n  #showAll w\n\n  Gtk.main\n</code></pre>\n\n<p>The result is obviously wrong, and looks like a partially drawn treeview, no text shown. I have no idea what I'm doing wrong, so I would appreciate if somebody could show how to fix the code or point me to a working example.</p>\n"}, {"tags": ["haskell", "file-read"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568559935, "post_id": 57945352, "comment_id": 102304307, "body": "A binary file has no &quot;lines&quot;, so that indeed makes sense. What would you return in that case?"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568559961, "post_id": 57945352, "comment_id": 102304314, "body": "I want to skip such files."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1568561442, "creation_date": 1568561442, "answer_id": 57945576, "question_id": 57945352, "link": "https://stackoverflow.com/questions/57945352/reading-first-line-of-each-file-getting-aborted-at-binary-files/57945576#57945576", "title": "Reading first line of each file getting aborted at binary files", "body": "<p>A binary file is a file that contains byte sequences that can not be decoded to a valid string. But a binary file is not different from a text file if you do not inspect its content.</p>\n\n<p>It might be better to use an \"It's <strong>E</strong>asier to <strong>A</strong>sk <strong>F</strong>orgiveness than <strong>P</strong>ermission (EAFP)\" approach: we try to read the first line, and if that fails, we ignore the output.</p>\n\n<pre><code>import Control.Exception(catch, IOException)\nimport System.IO(IOMode(ReadMode), withFile, hGetLine)\n\nreadFirstLine :: FilePath -&gt; IO (Maybe String)\nreadFirstLine fp = withFile fp ReadMode $\n    \\h -&gt; (catch (fmap Just (hGetLine h))\n        ((const :: a -&gt; IOException -&gt; a) (return Nothing)))\n</code></pre>\n\n<p>For a <code>FilePath</code> this returns an <code>IO (Maybe String)</code>. If we run the <code>IO (Maybe String)</code>, it will return a <code>Just x</code> with <code>x</code> the first line if it can read such file, and <code>Nothing</code> if an <code>IOException</code> was encoutered.</p>\n\n<p>We can then make use of <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Maybe.html#v:catMaybes\" rel=\"nofollow noreferrer\"><strong><code>catMaybes :: [Maybe a] -&gt; [a]</code></strong></a> to obtain the <code>Just x</code>s:</p>\n\n<pre><code>import Data.Maybe(<b>catMaybes</b>)\n\nmain :: IO ()\nmain = do\n    -- get a list of all files &amp; dirs\n    contents &lt;- getAbsoluteDirContents &quot;.&quot;\n    -- filter out dirs\n    files &lt;- filterM doesFileExist contents\n    -- read first line of each file\n    d &lt;- mapM readFirstLine files\n    print (<b>catMaybes</b> d)</code></pre>\n\n<p>or you can make use of <a href=\"https://hackage.haskell.org/package/extra-1.6.18/docs/Control-Monad-Extra.html#v:mapMaybeM\" rel=\"nofollow noreferrer\"><strong><code>mapMaybeM :: Monad m =&gt; (a -&gt; m (Maybe b)) -&gt; [a] -&gt; m [b]</code></strong></a> in the <a href=\"https://hackage.haskell.org/package/extra/\" rel=\"nofollow noreferrer\"><strong><code>extra</code></strong> package [Hackage]</a> that will automate that work for you.</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57945576, "answer_count": 1, "score": 1, "last_activity_date": 1568561442, "creation_date": 1568559900, "last_edit_date": 1568559937, "question_id": 57945352, "link": "https://stackoverflow.com/questions/57945352/reading-first-line-of-each-file-getting-aborted-at-binary-files", "title": "Reading first line of each file getting aborted at binary files", "body": "<p>I am trying to read first line of each file in current directory: </p>\n\n<pre><code>import System.IO(IOMode(ReadMode), withFile, hGetLine)\nimport System.Directory (getDirectoryContents, doesFileExist, getFileSize)\nimport System.FilePath ((&lt;/&gt;))\nimport Control.Monad(filterM)\n\nreadFirstLine :: FilePath -&gt; IO String\nreadFirstLine fp = withFile fp ReadMode System.IO.hGetLine\n\ngetAbsoluteDirContents :: String -&gt; IO [FilePath]\ngetAbsoluteDirContents dir = do\n    contents &lt;- getDirectoryContents dir\n    return $ map (dir &lt;/&gt;) contents\n\nmain :: IO ()\nmain = do\n    -- get a list of all files &amp; dirs\n    contents &lt;- getAbsoluteDirContents \".\"\n    -- filter out dirs\n    files &lt;- filterM doesFileExist contents\n    -- read first line of each file\n    d &lt;- mapM readFirstLine files\n    print d\n</code></pre>\n\n<p>It is compiling and running but getting aborted with following error at a binary file:</p>\n\n<pre><code>mysrcfile: ./aBinaryFile: hGetLine: invalid argument (invalid byte sequence)\n</code></pre>\n\n<p>I want to detect and avoid such files and go on to next file.</p>\n"}, {"tags": ["list", "haskell", "printing"], "comments": [{"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 1, "creation_date": 1568551466, "post_id": 57944147, "comment_id": 102302270, "body": "mylist os a function, the let inside addfn is shadowing not overriding it"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1568551530, "post_id": 57944147, "comment_id": 102302289, "body": "But there is an error if I omit <code>let</code>. What is the solution?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1568551571, "post_id": 57944147, "comment_id": 102302298, "body": "You can&#39;t update variables in place in Haskell, as you seem to be assuming. All &quot;variables&quot; are constant and immutable. When you say <code>myList = []</code>, that&#39;s what it is for the entirety of the program."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1568551768, "post_id": 57944147, "comment_id": 102302354, "body": "In Haskell everything is immutable, so you can <i>not</i> add something to a list."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1568553019, "post_id": 57944147, "comment_id": 102302644, "body": "I get the idea. Thanks @RobinZigmond and others for your comments."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 1, "creation_date": 1568557341, "post_id": 57944147, "comment_id": 102303641, "body": "You appear to be a Haskell beginner. Before asking questions like this one, I&#39;d recommend reading <a href=\"http://learnyouahaskell.com/chapters\" rel=\"nofollow noreferrer\">LYAH</a> to completion. This question is about a basic concept in Haskell you&#39;re asking about which LYAH covers almost immediately."}], "answers": [{"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568551621, "post_id": 57944228, "comment_id": 102302313, "body": "How can I create an empty list and then populate it?"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568551728, "post_id": 57944228, "comment_id": 102302342, "body": "Is it impossible to create an empty list and then populate it? How can I create a list dynamically?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 1, "creation_date": 1568551745, "post_id": 57944228, "comment_id": 102302346, "body": "@mso That&#39;s impossible, an empty list will remain empty once created. What you can do is to create an already populated list. Or, at most, to create an empty list, then use that value to compute another list (2), then use that to create yet another list (3), and so on. But at no point you &quot;modify&quot; the original empty list, you create new ones."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568551805, "post_id": 57944228, "comment_id": 102302366, "body": "Isn&#39;t that computationally expensive? Can you put this in code in your answer above?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568551870, "post_id": 57944228, "comment_id": 102302380, "body": "@rnso: no, since functional programming uses data structures that can easily generate copies. For example by prepending the list, you have an <i>O(1)</i> operation to create a new list, since you share the &quot;tail&quot; with the old list. Haskell uses for example a <i>finger tree</i> as a tree that is good in incremental copies."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568551929, "post_id": 57944228, "comment_id": 102302396, "body": "How do I code if I have to read a list of files and add first line of each file to a list? Can I never do this?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568552018, "post_id": 57944228, "comment_id": 102302419, "body": "@mso: you definitely can, Haskell is turing complete, so everything you can do with Java, C++, Python, can be done in Haskell as well. In fact it will probably be even easier than doing this in Java, etc."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 2, "creation_date": 1568552238, "post_id": 57944228, "comment_id": 102302469, "body": "@rnso Haskell can be efficient if used right, but if you&#39;re a beginner I recommend you disregard efficiency at first and learn the language. In your example, you don&#39;t &quot;add the first line to a list&quot;, but you &quot;create a list with the first lines of the files inside&quot; instead. Don&#39;t think in terms of the state, think in terms of the result. Anyway, I created an (inefficient) example just to show that you can do a &quot;loop modifying a list&quot;, without actually modifying anything."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 3, "last_activity_date": 1568552005, "last_edit_date": 1568552005, "creation_date": 1568551526, "answer_id": 57944228, "question_id": 57944147, "link": "https://stackoverflow.com/questions/57944147/code-to-copy-each-element-of-list-to-another-runs-without-error-but-does-nothing/57944228#57944228", "title": "Code to copy each element of list to another runs without error but does nothing", "body": "<pre><code>addfn ss = do   -- trying to add sent string ss to mylist\n    let mylist = ss:mylist\n    return ()\n</code></pre>\n\n<p>This defined a local binding <code>mylist</code> to be the infinite list <code>ss:ss:ss:...</code>. Then, it's not used, so this definition is irrelevant. Hence, the code is equivalent to:</p>\n\n<pre><code>addfn ss = return ()\n</code></pre>\n\n<p>which is a no-op.</p>\n\n<p>Haskell is not an imperative language. You are probably trying to modify the global variable <code>mylist</code>, but that's impossible. Once you define <code>mylist = []</code>, it will be <code>[]</code> forever.</p>\n\n<p>You could do this instead:</p>\n\n<pre><code>orilist =  [\"a\", \"b\", \"c\"]\n\nmain = do \n    let mylist = orilist\n    mapM_ putStrLn mylist   -- trying to print each element of mylist\n</code></pre>\n\n<p>Or even</p>\n\n<pre><code>orilist =  [\"a\", \"b\", \"c\"]\n\nmain = mapM_ putStrLn orilist\n</code></pre>\n\n<hr>\n\n<p>Another example: suppose we want to start with an empty list and, for 10 times, reverse it and append its length. We can do this as follows, using recursion:</p>\n\n<pre><code>doOnce oldList = reverse oldList ++ [length oldList]\n\nnewList = go 0 []\n   where go 10 list = list\n         go n list = go (n+1) (reverse list ++ [length list])\n</code></pre>\n\n<p>This is very inefficient, but I hope but you get the idea.</p>\n"}, {"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568553518, "post_id": 57944433, "comment_id": 102302747, "body": "Ok. So, make a function to read one line and then use mapM to get list of lines from different files."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568553671, "post_id": 57944433, "comment_id": 102302781, "body": "@mso: indeed, that is the idea behind the <code>main</code> here."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 4, "last_activity_date": 1568553166, "creation_date": 1568553166, "answer_id": 57944433, "question_id": 57944147, "link": "https://stackoverflow.com/questions/57944147/code-to-copy-each-element-of-list-to-another-runs-without-error-but-does-nothing/57944433#57944433", "title": "Code to copy each element of list to another runs without error but does nothing", "body": "<p>Your <code>addfn</code> will not do anything, well it only returns a unit <code>()</code>. Indeed, your <code>addfn</code> function:</p>\n\n<pre><code>addfn ss = do   -- trying to add sent string ss to mylist\n    let mylist = ss:mylist\n    return ()\n</code></pre>\n\n<p>Is equivalent to:</p>\n\n<pre><code>addfn _ = return ()\n</code></pre>\n\n<p>since you never use <code>mylist</code>. If you would use <code>mylist</code>, it will be an infinite list that contains <code>[ss, ss, &hellip;]</code>.</p>\n\n<p>In Haskell there are no <em>assignments</em>: you do not assign a value to a variable, you <em>declare</em> a variable. Once a variable has a value, you can never alter that value. So even if if there was a variable named <code>mylist</code> earlier, it would still not use that variable.</p>\n\n<p>After you used <code>mapM_ addfn orilist</code>, each <code>addfn</code> will have returned <code>()</code>, and have not changed the state of anything, hence the list remains empty.</p>\n\n<p>In <a href=\"https://stackoverflow.com/questions/57944147/code-to-copy-each-element-of-list-to-another-runs-without-error-but-does-nothing#comment102302396_57944228\">your comment</a>, you look to read the first line of each file. You can do that, for example by writing a function that reads the first line of a file:</p>\n\n<pre><code>import System.IO(IOMode(ReadMode), withFile, hGetLine)\n\nreadFirstLine :: FilePath -&gt; IO String\nreadFirstLine fp = withFile fp ReadMode hGetLine\n</code></pre>\n\n<p>Then we can for example obtain a list of first lines of files with:</p>\n\n<pre><code>main :: IO ()\nmain = do\n    d &lt;- mapM readFirstLine [\"foo.txt\", \"bar.txt\"]\n    print d\n</code></pre>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 57944228, "answer_count": 2, "score": 0, "last_activity_date": 1568553166, "creation_date": 1568550851, "question_id": 57944147, "link": "https://stackoverflow.com/questions/57944147/code-to-copy-each-element-of-list-to-another-runs-without-error-but-does-nothing", "title": "Code to copy each element of list to another runs without error but does nothing", "body": "<p>I am trying to learn Haskell. In following code, I am trying to copy each element of a list to another through own function and then trying to print new list. </p>\n\n<pre><code>orilist =  [\"a\", \"b\", \"c\"]\nmylist = []\naddfn ss = do   -- trying to add sent string ss to mylist\n    let mylist = ss:mylist\n    return ()\nmain = do \n    mapM_ addfn orilist     -- trying to send each element of orilist to addfn\n    mapM_ putStrLn mylist   -- trying to print each element of mylist \n    return ()       -- no error but nothing is printed\n</code></pre>\n\n<p>The code runs without any error but nothing is printed. Where is the problem? Thanks for your help.</p>\n"}, {"tags": ["haskell", "http-proxy", "haskell-wai"], "answers": [{"comments": [{"owner": {"reputation": 1007, "user_id": 1632519, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4169b372ce9a0bf75abf2282a4e9808f?s=128&d=identicon&r=PG", "display_name": "Philippe", "link": "https://stackoverflow.com/users/1632519/philippe"}, "edited": false, "score": 0, "creation_date": 1568579110, "post_id": 57946498, "comment_id": 102308840, "body": "rawPathInfo only returns the path part of the URI. Not the query, and not the parts before the path"}, {"owner": {"reputation": 1007, "user_id": 1632519, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4169b372ce9a0bf75abf2282a4e9808f?s=128&d=identicon&r=PG", "display_name": "Philippe", "link": "https://stackoverflow.com/users/1632519/philippe"}, "edited": false, "score": 0, "creation_date": 1568579887, "post_id": 57946498, "comment_id": 102308991, "body": "I updated my question. I wasn&#39;t very clear in my original question."}, {"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "reply_to_user": {"reputation": 1007, "user_id": 1632519, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4169b372ce9a0bf75abf2282a4e9808f?s=128&d=identicon&r=PG", "display_name": "Philippe", "link": "https://stackoverflow.com/users/1632519/philippe"}, "edited": false, "score": 0, "creation_date": 1568580759, "post_id": 57946498, "comment_id": 102309159, "body": "@Philippe So you&#39;re saying that the client is sending an absolute URI, and <code>rawPathInfo</code> doesn&#39;t show it anyway?"}, {"owner": {"reputation": 1007, "user_id": 1632519, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4169b372ce9a0bf75abf2282a4e9808f?s=128&d=identicon&r=PG", "display_name": "Philippe", "link": "https://stackoverflow.com/users/1632519/philippe"}, "edited": false, "score": 0, "creation_date": 1568580907, "post_id": 57946498, "comment_id": 102309185, "body": "Yes, I&#39;m using curl with the -x flag."}, {"owner": {"reputation": 1007, "user_id": 1632519, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4169b372ce9a0bf75abf2282a4e9808f?s=128&d=identicon&r=PG", "display_name": "Philippe", "link": "https://stackoverflow.com/users/1632519/philippe"}, "edited": false, "score": 0, "creation_date": 1568582348, "post_id": 57946498, "comment_id": 102309422, "body": "It&#39;d be weird if it did. The path is only one part of an URI."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1568579542, "last_edit_date": 1568579542, "creation_date": 1568568117, "answer_id": 57946498, "question_id": 57943402, "link": "https://stackoverflow.com/questions/57943402/get-absolute-form-request-target-of-http-request-using-wai/57946498#57946498", "title": "Get absolute-form request target of HTTP request using WAI", "body": "<p>The <code>rawPathInfo</code> accessor method will provide this. See <a href=\"https://hackage.haskell.org/package/wai-3.2.2.1/docs/Network-Wai.html#v:rawPathInfo\" rel=\"nofollow noreferrer\">https://hackage.haskell.org/package/wai-3.2.2.1/docs/Network-Wai.html#v:rawPathInfo</a> for details.</p>\n\n<p>If you want the query string too, it's available via the <code>rawQueryString</code> accessor.</p>\n\n<p>As for the host, HTTP requests don't normally look like your example (HTTP/1.1 clients will only look like that if they're connecting to a proxy, rather than to the destination Web server). Instead, they often look like this:</p>\n\n<pre><code>GET /index.html HTTP/1.1\nHost: www.example.org\n</code></pre>\n\n<p>If you want <code>http://www.example.org</code> too, then you'll have to rebuild it yourself from the host and protocol information.</p>\n"}], "owner": {"reputation": 1007, "user_id": 1632519, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4169b372ce9a0bf75abf2282a4e9808f?s=128&d=identicon&r=PG", "display_name": "Philippe", "link": "https://stackoverflow.com/users/1632519/philippe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569238063, "creation_date": 1568544607, "last_edit_date": 1569238063, "question_id": 57943402, "link": "https://stackoverflow.com/questions/57943402/get-absolute-form-request-target-of-http-request-using-wai", "title": "Get absolute-form request target of HTTP request using WAI", "body": "<p>The <code>Request</code> type provides accessors for the request method and the request version but not for the bit in between.</p>\n\n<p>So if I have the following request:</p>\n\n<p><code>GET http://www.example.org/index.html HTTP/1.1</code></p>\n\n<p>I want the <code>http://www.example.org/index.html</code> in between</p>\n\n<p><a href=\"https://tools.ietf.org/html/rfc7230#section-5.3.2\" rel=\"nofollow noreferrer\">RFC7230 Section 5.3.2</a> allows for this when making a request to a proxy. Section 5.4 says that the <code>Host</code> header should be overriden by the proxy with the host in the URI if the request is in <code>absolute-form</code>. This seems good enough for me, I don't know if WAI would handle this correctly if a client was not behaving correctly and sending a Host header different from the <code>absolute-form</code> URI.</p>\n\n<p>Alternatively, if this is not possible: I'd like to ask if there is a more low level HTTP library than WAI available in Haskell?</p>\n"}, {"tags": ["windows", "haskell", "package", "cabal"], "answers": [{"tags": [], "owner": {"reputation": 37486, "user_id": 371753, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/znFEK.jpg?s=128&g=1", "display_name": "sclv", "link": "https://stackoverflow.com/users/371753/sclv"}, "is_accepted": false, "score": 1, "last_activity_date": 1570859823, "creation_date": 1570859823, "answer_id": 58351312, "question_id": 57942878, "link": "https://stackoverflow.com/questions/57942878/network-bsd-hidden-hence-not-found/58351312#58351312", "title": "network-bsd hidden hence not found", "body": "<p><code>uni-htk</code> has not been updated to work with newer versions of libraries (i.e. it is bitrotted, with last version in 2016). If you <code>cabal unpack uni-htk</code> you can get a local directory with all the source, and edit its <code>cabal</code> file and otherwise to fix it up yourself.</p>\n\n<p>(This particular error is because the <code>Network.BSD</code> module has been moved from the <code>network</code> package to the new <code>network-bsd</code> package, I think. But you'll probably hit other errors as well!)</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570859823, "creation_date": 1568540364, "question_id": 57942878, "link": "https://stackoverflow.com/questions/57942878/network-bsd-hidden-hence-not-found", "title": "network-bsd hidden hence not found", "body": "<p>I am trying to install uni-htk in Windows but getting following error: </p>\n\n<pre><code>Util\\HostName.hs:8:1: error:\n    Could not load module `Network.BSD'\n    It is a member of the hidden package `network-bsd-2.8.1.0'.\n    Perhaps you need to add `network-bsd' to the build-depends in your .cabal file.\n    Use -v to see a list of the files searched for.\n  |\n8 | import Network.BSD\n  | ^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>As mentioned in error above, network-bsd is installed but hidden. I cannot find any .cabal file where I could make changes. </p>\n\n<p>How can this problem be solved?</p>\n"}, {"tags": ["haskell", "contract"], "comments": [{"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 2, "creation_date": 1568542965, "post_id": 57942791, "comment_id": 102300590, "body": "I assume this is using a library. Could you specify which library you are using?"}, {"owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "reply_to_user": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1568543232, "post_id": 57942791, "comment_id": 102300632, "body": "@bradrn I don&#39;t. I define the Contract type and assert function myself"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1568543803, "post_id": 57942791, "comment_id": 102300755, "body": "Then could you provide us with the definitions? We can\u2019t help you unless we know what you\u2019re using."}, {"owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "reply_to_user": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1568544265, "post_id": 57942791, "comment_id": 102300840, "body": "@bradrn I did. After the word &quot;Here&quot;, at the end of the question. (I edited the question)"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1568544321, "post_id": 57942791, "comment_id": 102300858, "body": "Oh, sorry! I completely missed those definitions!  (And @RobinZigmond, they were there when I first commented \u2014 I just didn\u2019t notice them.) Sorry about the confusion."}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "edited": false, "score": 2, "creation_date": 1568545853, "post_id": 57942791, "comment_id": 102301146, "body": "Side note: Haskell has plenty of expressions, not so many statements (the report describes <code>import</code> and entries in <code>do</code> as statements)."}], "answers": [{"tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": true, "score": 6, "last_activity_date": 1568545327, "creation_date": 1568545327, "answer_id": 57943485, "question_id": 57942791, "link": "https://stackoverflow.com/questions/57942791/contract-true-such-that-assert-true-x-x-holds/57943485#57943485", "title": "Contract &quot;true&quot;, such that &quot;assert true x==x&quot; holds", "body": "<p>You can see the problem very clearly if you consider your definitions of <code>true</code> and <code>assert</code>. Here are the relevant parts:</p>\n\n<pre><code>true :: Contract a\ntrue = Pred (\\a -&gt; True) \n\nassert :: Contract a -&gt; a -&gt; a\nassert (Pred p)       x = if p x then x else error \"contract violation\"\n...\n</code></pre>\n\n<p>Put them together and you see that <code>assert true x</code> will test <code>(\\a -&gt; True) x</code> and either produce <code>x</code> or throw an error, depending on if it's <code>True</code> or <code>False</code>. And that this will always be <code>True</code>, no matter what expression you use for <code>x</code>, since the predicate by definition always returns <code>True</code>, and ignores its argument.</p>\n\n<p>The simple fix is to have the <code>true</code> \"contract\" actually test its argument, like this:</p>\n\n<pre><code>true :: Contract Bool\ntrue = Pred id\n</code></pre>\n\n<p>That is, this new <code>true</code> can only apply to a value of type <code>Bool</code> (because it really doesn't make sense for any others) and does nothing to it. It lets the value through unchanged if it's <code>True</code>, and otherwise throws the contract violation error you want:</p>\n\n<pre><code>Prelude&gt; assert true (5==6)\n*** Exception: contract violation\nCallStack (from HasCallStack):\n  error, called at &lt;interactive&gt;:21:46 in interactive:Ghci2\nPrelude&gt; assert true (5==5)\nTrue\n</code></pre>\n\n<p>And note the parentheses in <code>assert true (5==6)</code>, since <code>assert true 5==6</code> is parsed as <code>(assert true 5)==6</code>, due to function application being the most precedent \"operator\" in Haskell. <code>assert true 5==6</code> leads to an error because this corrected version of <code>true</code> only works on a Boolean value, and therefore not on <code>5</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1568545337, "creation_date": 1568545337, "answer_id": 57943486, "question_id": 57942791, "link": "https://stackoverflow.com/questions/57942791/contract-true-such-that-assert-true-x-x-holds/57943486#57943486", "title": "Contract &quot;true&quot;, such that &quot;assert true x==x&quot; holds", "body": "<p>Note that <code>assert true x == x</code> compares <code>assert true x</code> to <code>x</code>; so <code>assert true 5</code> is <code>5</code> and of course <code>5 == 6</code> is false and not a contract violation. </p>\n\n<p>If you intended <code>assert true (x == x)</code> to hold instead, then it seems like </p>\n\n<pre><code>true :: Contract Bool\ntrue = Pred id\n\nassert true (5==6)  -- Contract violation\n</code></pre>\n\n<p>is what you want</p>\n"}, {"tags": [], "owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "is_accepted": false, "score": 0, "last_activity_date": 1568545369, "creation_date": 1568545369, "answer_id": 57943490, "question_id": 57942791, "link": "https://stackoverflow.com/questions/57942791/contract-true-such-that-assert-true-x-x-holds/57943490#57943490", "title": "Contract &quot;true&quot;, such that &quot;assert true x==x&quot; holds", "body": "<p>\"when running assert true x == x compiler says that x is undefined\" is rather key here. Your <code>assert</code> call appears to me to be one expression containing two references to <code>x</code>, and the outermost function is <code>(==)</code>. Neither side can be evaluated without a binding for <code>x</code>. The <code>assert true x</code> portion never sees <code>==</code>, and if we rewrote it to <code>assert true (x == x)</code> we'd still need to provide an <code>x :: Eq a</code>. I don't know how to examine a function as such, but there certainly are options I'm not well versed in. </p>\n"}], "owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 57943485, "answer_count": 3, "score": 0, "last_activity_date": 1568545369, "creation_date": 1568539526, "last_edit_date": 1568541117, "question_id": 57942791, "link": "https://stackoverflow.com/questions/57942791/contract-true-such-that-assert-true-x-x-holds", "title": "Contract &quot;true&quot;, such that &quot;assert true x==x&quot; holds", "body": "<p>Is it possible to write a contract that checks whether a statement is true? \nFor example, I want to define a contract</p>\n\n<pre><code>true :: Contract a\n</code></pre>\n\n<p>such that for all values x, the equation</p>\n\n<pre><code>assert true x == x\n</code></pre>\n\n<p>holds. </p>\n\n<p>I have tried something like this:</p>\n\n<pre><code>true :: Contract a\ntrue = Pred (\\a -&gt; True) \n</code></pre>\n\n<p>But when running <code>assert true x == x</code> compiler says that <code>x</code> is undefined. \nWhen running  <code>assert true 5==6</code> the result is  <code>False</code>, and I have hoped for a  <code>Contract violation error</code>.\nHow should I change this  <code>true</code> contract? Would appreciate your help.</p>\n\n<p>Here</p>\n\n<pre><code>data Contract :: * -&gt; * where\n  Pred :: (a -&gt; Bool) -&gt; Contract a\n  Fun  :: Contract a -&gt; Contract b -&gt; Contract (a -&gt; b)\n</code></pre>\n\n<p>Assert will cause a run-time failure if a contract is violated, and otherwise return the original result:</p>\n\n<pre><code>assert :: Contract a -&gt; a -&gt; a\nassert (Pred p)       x = if p x then x else error \"contract violation\"\nassert (Fun pre post) f = assert post . f . assert pre\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 1, "creation_date": 1568539683, "post_id": 57942771, "comment_id": 102300043, "body": "There are no problems with syntax here\u2014the compiler would tell you so. Rewrite the code to omit strings which contain only a space, and note that some strings start with a space."}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 3, "creation_date": 1568539726, "post_id": 57942771, "comment_id": 102300056, "body": "If you want to use <code>groupBy</code> to throw all the spaces into their own groups, you need to look at <code>x</code> as well. Otherwise the spaces gets grouped together with the non-space after it.  And <code>null</code> checks for empty strings (zero characters), not blank strings (only space)."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 5, "last_activity_date": 1568539887, "creation_date": 1568539887, "answer_id": 57942822, "question_id": 57942771, "link": "https://stackoverflow.com/questions/57942771/how-do-i-syntax-in-haskell/57942822#57942822", "title": "How do i syntax in haskell", "body": "<p><code>groupBy</code> means that you put <code>x</code> and <code>y</code> in the same group, given the condition is satisfied. But here you group the two together, given <code>y</code> is not equal to a space.</p>\n\n<p>You thus can alter your grouping predicate, and put <code>x</code> and <code>y</code> in the same group, given both are spaces, or non-spaces:</p>\n\n<pre><code>import Data.Char(<b>isSpace</b>)\n\nord :: String -&gt; [String]\nord [] = []\nord xs = let\n    ys = groupBy (<b>\\x y -&gt; isSpace x == isSpace y</b>) xs\n    in filter (not . null) ys</code></pre>\n\n<p>or shorter:</p>\n\n<pre><code>import Data.Char(<b>isSpace</b>)\nimport Data.Function(on)\n\nord :: String -&gt; [String]\nord [] = []\nord xs = let\n    ys = groupBy (<b>on (==) isSpace</b>) xs\n    in filter (not . null) ys</code></pre>\n\n<p>Now we retrieve:</p>\n\n<pre><code>Prelude Data.List&gt; ord \"aa b       c   -    dd\"\n[\"aa\",\" \",\"b\",\"       \",\"c\",\"   \",\"-\",\"    \",\"dd\"]\n</code></pre>\n\n<p>We of course still not obtain the expected result. In stead of filtering out empty strings, we can filter out strings that only contain spacing characters:</p>\n\n<pre><code>import Data.Char(isSpace)\nimport Data.Function(on)\n\nord :: String -&gt; [String]\nord [] = []\nord xs = let\n    ys = groupBy (on (==) isSpace) xs\n    in filter (<b>not . all isSpace</b>) ys</code></pre>\n\n<p>We do not need to covert the empty case manually, since <code>groupBy</code> on an empty list produces an empty list, we can thus construct a one liner to do the processing:</p>\n\n<pre><code>import Data.Char(isSpace)\nimport Data.Function(on)\n\nord :: String -&gt; [String]\nord = filter (not . all isSpace) . groupBy (on (==) isSpace)</code></pre>\n\n<p>Then we obtain the expected result:</p>\n\n<pre><code>Prelude Data.List Data.Char&gt; ord \"aa b       c   -    dd\"\n[\"aa\",\"b\",\"c\",\"-\",\"dd\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "is_accepted": false, "score": 2, "last_activity_date": 1568598331, "creation_date": 1568598331, "answer_id": 57949497, "question_id": 57942771, "link": "https://stackoverflow.com/questions/57942771/how-do-i-syntax-in-haskell/57949497#57949497", "title": "How do i syntax in haskell", "body": "<p>I wouldn't bother with <code>groupBy</code> at all here. In particular, there's no need to build lists of spaces just to throw them away. Let's start with a function that drops initial spaces and then grabs everything to the first space:</p>\n\n<pre><code>grab :: String -&gt; (String, String)\ngrab = break isSpace . dropWhile isSpace\n</code></pre>\n\n<p>Note that the first component of <code>grab xs</code> will be empty if and only if all the elements of <code>xs</code> are spaces.</p>\n\n<p>Now we can write</p>\n\n<pre><code>myWords :: String -&gt; [String]\nmyWords xs = case grab xs of\n  ([], _) -&gt; []\n  (beginning, end) -&gt; beginning : myWords end\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 11346784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13d07a32bbb6e1118706478f2fa47d7f?s=128&d=identicon&r=PG&f=1", "display_name": "Mampenda", "link": "https://stackoverflow.com/users/11346784/mampenda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1568598331, "creation_date": 1568539387, "last_edit_date": 1568574379, "question_id": 57942771, "link": "https://stackoverflow.com/questions/57942771/how-do-i-syntax-in-haskell", "title": "How do i syntax in haskell", "body": "<p>Im trying to write a function that takes in a string and then returns the string as a list of string-words (like the words built-in function) and so far i've written </p>\n\n<pre><code>ord :: String -&gt; [String]\nord [] = []\nord xs = let\n    ys = groupBy (\\x y -&gt; y /= ' ') xs\n    in filter (not . null) ys\n</code></pre>\n\n<p>I thougth this would get rid of the empty strings from the list but i only get this output</p>\n\n<p>input:</p>\n\n<pre><code>ord  \u201caa b       c   -    dd\u201d \n</code></pre>\n\n<p>output: </p>\n\n<pre><code>[\"aa\",\" b\",\" \",\" \",\" \",\" \",\" \",\" \",\" c\",\" \",\" \",\" -\",\" \",\" \",\" \",\" dd\"]\n</code></pre>\n\n<p>when this is the output i want: </p>\n\n<pre><code>[\u201caa\u201d, \u201db\u201d, \u201dc\u201d, \u201d-\u201c, \u201ddd\u201d]\n</code></pre>\n\n<p>I get the same result if i try and write </p>\n\n<pre><code>ord :: String -&gt; [String]\nord [] = []\nord xs = filter (not . null) ys\n    where\n        ys = groupBy (\\x y -&gt; y /= ' ') xs\n</code></pre>\n\n<p>How do i re-write this code so that i rid the list of its empty strings? \nOr use the proper syntax? Im just learning Haskell and im still having trouble with the syntax...</p>\n"}, {"tags": ["list", "haskell", "recursion", "return"], "comments": [{"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 4, "creation_date": 1568531147, "post_id": 57941772, "comment_id": 102298406, "body": "<code>return</code> is not a keyword or special syntax. It&#39;s a function like any other."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1568530726, "creation_date": 1568530726, "answer_id": 57941847, "question_id": 57941772, "link": "https://stackoverflow.com/questions/57941772/haskell-recursion-how-to-return-an-empty-list-and-ignore-recursively-generated-l/57941847#57941847", "title": "Haskell Recursion how to return an empty list and ignore recursively generated list", "body": "<p><code>return</code> is not a statement in Haskell, but even if it was it would not work anyway. Since due to recursion, you then return that list at that specific level.</p>\n\n<p>It looks however that you simply want to know if <em>all</em> elements are smaller than <code>10</code>. If that is the case, you return the entire list, otherwise you return an empty list.</p>\n\n<p>You can do that with:</p>\n\n<pre><code>func :: (Num a, Ord a) =&gt; [a] -&gt; [a]\nfunc xs | all (&lt; 10) xs = xs\n        | otherwise = []\n</code></pre>\n\n<p>or we can use recursion, and make use of <code>Maybe</code>:</p>\n\n<pre><code>func :: (Num a, Ord a) =&gt; [a] -&gt; Maybe [a]\nfunc [] = Just []\nfunc (x:xs) | x &lt; 10 = fmap (x:) (func xs)\n            | otherwise = Nothing\n</code></pre>\n\n<p>We can then later convert the <code>Nothing</code> value with <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Maybe.html#v:fromMaybe\" rel=\"nofollow noreferrer\"><strong><code>fromMaybe :: a -&gt; Maybe a -&gt; a</code></strong></a> to an empty list, although a <code>Maybe</code> might be better idea here, that allows us to differentatie between <code>func []</code> and <code>func [14]</code> for example.</p>\n"}], "owner": {"reputation": 33, "user_id": 11505818, "user_type": "registered", "profile_image": "https://graph.facebook.com/2166800323368095/picture?type=large", "display_name": "Andrew Zhang", "link": "https://stackoverflow.com/users/11505818/andrew-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 57941847, "answer_count": 1, "score": 1, "last_activity_date": 1568531177, "creation_date": 1568529921, "last_edit_date": 1568531177, "question_id": 57941772, "link": "https://stackoverflow.com/questions/57941772/haskell-recursion-how-to-return-an-empty-list-and-ignore-recursively-generated-l", "title": "Haskell Recursion how to return an empty list and ignore recursively generated list", "body": "<p>I'm writing a recursive function that builds a list, but has some conditions where, if met, the function should ignore the list that's been built so far and simply return an empty list on its own.</p>\n\n<p>A simple example:</p>\n\n<pre><code>func (x:xs)\n   | x &lt; 10 = [x] ++ func xs\n   | otherwise = (\"return an empty list without the already built up list\")\n</code></pre>\n\n<p>So if <code>xs</code> was a list <code>[1 .. 12]</code> then once it's built a list that's <code>[1..9]</code> then when it reaches <code>10</code>, it'll disregard the list it's built and just return an empty array <code>[]</code>, and <strong>not</strong> return an empty array that's passed back to the already built up list.</p>\n\n<p>Is there a way to do this in Haskell? I've tried doing <code>return []</code> but it gave me the error:</p>\n\n<blockquote>\n  <p>Couldn't match expected type \u2018Int\u2019 with actual type \u2018[t0]\u2019</p>\n</blockquote>\n"}, {"tags": ["windows", "haskell", "gtk", "msys2", "pkg-config"], "comments": [{"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1568526227, "post_id": 57940965, "comment_id": 102297790, "body": "Are you running <code>cabal</code> in an environment where it can find <code>pkg-config</code>? The <a href=\"https://github.com/haskell-gi/haskell-gi/wiki/Using-haskell-gi-in-Windows\" rel=\"nofollow noreferrer\"><code>haskell-gi</code> installation guide for Windows</a> recommends changing the <code>PATH</code> so <code>pkg-config</code> can be found."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1568526965, "post_id": 57940965, "comment_id": 102297866, "body": "Ok. I will try these steps and give feedback."}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1568565910, "post_id": 57940965, "comment_id": 102305701, "body": "Also, are you <i>sure</i> you want to <code>cabal v1-install haskell-gi</code>? <code>v1-install</code> is <i>broken</i>, and doing this means you open yourself up to the possibility of horrendous version conflicts."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568566125, "post_id": 57940965, "comment_id": 102305749, "body": "So, I should use <code>new-install</code> command?"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 906, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568518872, "creation_date": 1568518872, "question_id": 57940965, "link": "https://stackoverflow.com/questions/57940965/pkg-config-installed-but-not-found", "title": "pkg-config installed but not found", "body": "<p>I am trying to install Gtk for Haskell in Windows and getting following error: </p>\n\n<pre><code>C:\\Users\\abcd&gt;cabal install haskell-gi\nWarning: The install command is a part of the legacy v1 style of cabal usage.\n\nPlease switch to using either the new project style and the new-install\ncommand or the legacy v1-install alias as new-style projects will become the\ndefault in the next version of cabal-install. Please file a bug if you cannot\nreplicate a working v1- use case with the new-style commands.\n\nFor more information, see: https://wiki.haskell.org/Cabal/NewBuild\n\nResolving dependencies...\nConfiguring haskell-gi-base-0.23.0...\ncabal: The program 'pkg-config' version &gt;=0.9.0 is required but it could not\nbe found.\n\nFailed to install haskell-gi-base-0.23.0\ncabal: Error: some packages failed to install:\nhaskell-gi-0.23.0-1JHtHU5x2lkFiOcPtWhSw4 depends on haskell-gi-0.23.0 which\nfailed to install.\nhaskell-gi-base-0.23.0-6DTOa44NYLKIXS94FQX9lI failed during the configure\nstep. The exception was:\nExitFailure 1\n</code></pre>\n\n<p>However, I have already installed (and reinstalled) pkg-config using Msys2: </p>\n\n<pre><code>$ pacman -S pkg-config\nwarning: pkg-config-0.29.2-1 is up to date -- reinstalling\nresolving dependencies...\nlooking for conflicting packages...\n\nPackages (1) pkg-config-0.29.2-1\n\nTotal Installed Size:  0.54 MiB\nNet Upgrade Size:      0.00 MiB\n\n:: Proceed with installation? [Y/n]\n(1/1) checking keys in keyring                                                                                                     [###############################################################################] 100%\n(1/1) checking package integrity                                                                                                   [###############################################################################] 100%\n(1/1) loading package files                                                                                                        [###############################################################################] 100%\n(1/1) checking for file conflicts                                                                                                  [###############################################################################] 100%\n(1/1) checking available disk space                                                                                                [###############################################################################] 100%\n:: Processing package changes...\n(1/1) reinstalling pkg-config                                                                                                      [###############################################################################] 100%\n</code></pre>\n\n<p>Where is the problem and how can it be solved? Thanks for your help.</p>\n"}, {"tags": ["haskell", "package", "cabal"], "answers": [{"comments": [{"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568504400, "post_id": 57937645, "comment_id": 102295282, "body": "Actually @rnso, you\u2019re better off installing <code>gi-gtk</code> rather than <code>haskell-gi-base</code> here, as that\u2019s where <code>GI.Gtk</code> comes from.  Installation of this library can be a bit tricky though; for more information see <a href=\"https://github.com/haskell-gi/haskell-gi#installation\" rel=\"nofollow noreferrer\">github.com/haskell-gi/haskell-gi#installation</a>."}], "tags": [], "owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "is_accepted": true, "score": 0, "last_activity_date": 1568480962, "creation_date": 1568480962, "answer_id": 57937645, "question_id": 57937581, "link": "https://stackoverflow.com/questions/57937581/which-package-to-install-to-run-this-code-successfully/57937645#57937645", "title": "Which package to install to run this code successfully", "body": "<p>You can search <a href=\"https://www.stackage.org\" rel=\"nofollow noreferrer\">Stackage</a> (the FPComplete package repository, the de-facto standard for Haskell) for the module, type, or function name.</p>\n\n<p>For example, when I type in <code>Data.GI.Base</code>, I get <a href=\"https://www.stackage.org/haddock/lts-14.5/haskell-gi-base-0.23.0/Data-GI-Base.html\" rel=\"nofollow noreferrer\">its documentation page</a>, which tells me (at the very top) that the module is available in the package <code>haskell-gi-base</code>.</p>\n\n<p>Not every package is available on Stackage though. If you can't find something, try <a href=\"http://hackage.haskell.org/\" rel=\"nofollow noreferrer\">Hackage</a> next. It's less regulated and controlled, but has more stuff because of it.</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57937645, "answer_count": 1, "score": 0, "last_activity_date": 1568480962, "creation_date": 1568480446, "question_id": 57937581, "link": "https://stackoverflow.com/questions/57937581/which-package-to-install-to-run-this-code-successfully", "title": "Which package to install to run this code successfully", "body": "<p>I am trying following simple code from <a href=\"https://haskell-at-work.com/episodes/2018-11-13-gtk-programming-with-haskell.html\" rel=\"nofollow noreferrer\">here</a> : </p>\n\n<pre><code>import Data.GI.Base\nimport qualified GI.Gtk as Gtk\n\nmain :: IO()\nmain = do\n  Gtk.init Nothing\n  Gtk.main\n</code></pre>\n\n<p>However, I am getting following error: </p>\n\n<pre><code>    Could not find module `Data.GI.Base'\n    Use -v to see a list of the files searched for.\n  |\n1 | import Data.GI.Base\n  | ^^^^^^^^^^^^^^^^^^^\n\nsimplewin.hs:2:1: error:\n    Could not find module `GI.Gtk'\n    Use -v to see a list of the files searched for.\n  |\n2 | import qualified GI.Gtk as Gtk\n  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>Following attempts to install packages do not find any matches:</p>\n\n<pre><code>&gt;cabal list Data.GI.Base\nNo matches found.\n\n&gt;cabal list GI.Gtk\nNo matches found.\n</code></pre>\n\n<p>Which packages do I install with cabal to correct above errors?</p>\n"}, {"tags": ["haskell", "types", "nested", "functor"], "comments": [{"owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "edited": false, "score": 0, "creation_date": 1568467258, "post_id": 57935896, "comment_id": 102287732, "body": "I have accidentally deleted the previous version of this very same question and this is a bit updated version"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568467475, "post_id": 57935896, "comment_id": 102287790, "body": "You can not use <code>mapSquare</code> since that type is too restrictive. The <code>fmap</code> function takes type <code>(c -&gt; d) -&gt; Square c -&gt; Square d</code> here."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1568467855, "post_id": 57935896, "comment_id": 102287900, "body": "You <code>map</code>s look more like <code>(&lt;*&gt;)</code>s (so <i>sequential applications</i>) at first sight: <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:-60--42--62-\" rel=\"nofollow noreferrer\">hackage.haskell.org/package/base-4.12.0.0/docs/&hellip;</a>"}, {"owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568468017, "post_id": 57935896, "comment_id": 102287954, "body": "@WillemVanOnsem I don&#39;t think it should. I must have messed up with all the type declarations"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1568468134, "post_id": 57935896, "comment_id": 102287987, "body": "but your <code>mapSquare&#39;</code> takes <i>two</i> <code>Square&#39; ...</code>s as input. An <code>fmap</code> takes a function <code>a -&gt; b</code>, and a single &quot;functor object&quot; <code>f a</code>. So something really looks incorrect here."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1568478015, "post_id": 57935896, "comment_id": 102290359, "body": "What are <code>Nil</code> and <code>Cons</code>? (Looking at the previous question, why are they seperate types instead of data constructors for a <i>single</i> type?)"}, {"owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1568479594, "post_id": 57935896, "comment_id": 102290737, "body": "@chepner I am not sure, but I think it has something to do with the necessity of <code>Square</code> to be defined in an eta-reduced form."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "edited": false, "score": 0, "creation_date": 1568473022, "post_id": 57936039, "comment_id": 102289146, "body": "Why exactly do you mean by &quot;too restrictive&quot;?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "edited": false, "score": 1, "creation_date": 1568473179, "post_id": 57936039, "comment_id": 102289176, "body": "@arryn: initially your <code>mapSquare</code> function has type <code>((a -&gt; b) -&gt; a -&gt; b) -&gt; Square a -&gt; Square b</code>, If I&#39;ve seen that correctly, but then you thus force <code>c</code> and <code>d</code> to be of type <code>a -&gt; b</code>, you can not define <code>fmap</code> on a subset of the possibilities an <code>fmap</code> should support."}, {"owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "edited": false, "score": 0, "creation_date": 1568473342, "post_id": 57936039, "comment_id": 102289208, "body": "Got it. Can I use <code>mapSquare</code> in an <code>Applicative</code> instance for <code>(&lt;*&gt;)</code>?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "edited": false, "score": 1, "creation_date": 1568473425, "post_id": 57936039, "comment_id": 102289228, "body": "@arryn: you can use your <code>mapSquare</code>, but you will need to fill in something for <code>((a -&gt; b) -&gt; a -&gt; b)</code>. Note that you can not just use any implementation. It needs to satisfy the fact that <code>pure f &lt;*&gt; g</code> yields the same result as <code>f &lt;$&gt; g</code>. `"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1568468274, "creation_date": 1568468274, "answer_id": 57936039, "question_id": 57935896, "link": "https://stackoverflow.com/questions/57935896/functor-for-square-matrices/57936039#57936039", "title": "Functor for square matrices", "body": "<p>You can not use <code>mapSquare</code> since that type is too restrictive. A functor has type <code>fmap :: Functor f =&gt; (c -&gt; d) -&gt; f c -&gt; f d</code>. But <code>((a -&gt; b) -&gt; a -&gt; b) -&gt; (Square (a -&gt; b)) -&gt; Square a -&gt; Square b</code> would only cover a subset of that. Your <code>mapSquare'</code> looks more like a \"<em>sequential application</em>\" <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#v:-60--42--62-\" rel=\"nofollow noreferrer\"><strong><code>(&lt;*&gt;) :: Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b</code></strong></a>. Notice that a <code>(&lt;*&gt;)</code> takes two <code>f <i>x</i></code> items, not one, like the <code>fmap</code> does.</p>\n\n<p>If you want to declare <code>Square</code> an instance of <code>Functor</code>, it is likely, depending on the way you implement it, that <code>Nil</code> and <code>Const</code> needs to be an instance of <code>Functor</code> as well. We can easily make these an instance of <code>Functor</code>:</p>\n\n<pre><code>instance Functor Nil where\n    fmap _ Nil = Nil\n\ninstance Functor t =&gt; Functor (Cons t) where\n    fmap f (Cons x xs) = Cons (f x) (fmap f xs)</code></pre>\n\n<p>Now we can make <code>Square'</code> an instance of <code>Functor</code> with:</p>\n\n<pre><code>instance Functor t =&gt; Functor (Square' t) where\n    fmap f (Zero x) = Zero (fmap (fmap f) x)\n    fmap f (Succ x) = Succ (fmap f x)</code></pre>\n\n<p>You actually do not generate those yourself. You can use the <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#extension-DeriveFunctor\" rel=\"nofollow noreferrer\"><strong><code>DeriveFunctor</code></strong> [ghc-doc]</a> compiler option, and let the compiler derive the functions for you:</p>\n\n<pre><code>{-# LANGUAGE <b>DeriveFunctor</b> #-}\n\ndata Square' t a = Zero (t (t a) ) | Succ (Square' (Cons t) a) <b>deriving Functor</b>\ndata Nil a = Nil <b>deriving Functor</b>\ndata Cons t a = Cons a (t a) <b>deriving Functor</b></code></pre>\n\n<p>This will construct the functors specified as here discussed.</p>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "is_accepted": false, "score": 1, "last_activity_date": 1568486382, "last_edit_date": 1568486382, "creation_date": 1568478564, "answer_id": 57937358, "question_id": 57935896, "link": "https://stackoverflow.com/questions/57935896/functor-for-square-matrices/57937358#57937358", "title": "Functor for square matrices", "body": "<p>Here is an answer to the question I meant to ask, rather than actually asked, since the way I put it is a bit ambiguous. \nFirst of all, I actually did mess up and mixed <code>(&lt;*&gt;)</code> with <code>fmap</code>, thanks @WillemVanOnsem for pointing that out.\nSo, what I really meant to do was this:</p>\n\n<pre><code>mapNil :: ((a -&gt; b) -&gt; a -&gt; b) -&gt; ((a -&gt; b) -&gt; Nil a -&gt; Nil b )\nmapNil mapA f Nil = Nil\n\nmapCons :: (forall b . ((a -&gt; b) -&gt; a -&gt; b) -&gt; ((a -&gt; b) -&gt; t a -&gt; t b))\n        -&gt; ((a -&gt; b) -&gt; a -&gt; b)\n        -&gt; ((a -&gt; b) -&gt; Cons t a -&gt; Cons t b)\nmapCons mapT mapA f (Cons x consx) =  Cons (f x) (mapT mapA f consx)\n</code></pre>\n\n<p>And then...</p>\n\n<pre><code>mapSquare' :: (forall b . ((a -&gt; b) -&gt; a -&gt; b) -&gt; ((a -&gt; b) -&gt; t a -&gt; t b))\n           -&gt; ((a -&gt; b) -&gt; a -&gt; b)\n           -&gt; ((a -&gt; b) -&gt; Square' t a -&gt; Square' t b)\nmapSquare' mapT mapA f (Zero xs) = Zero (mapT (mapT mapA) f xs) \nmapSquare' mapT mapA f (Succ xs) = Succ (mapSquare' (mapCons mapT) mapA f xs)\n</code></pre>\n\n<p><code>t</code> is a type constructor of kind <code>* -&gt; *</code>, so a map function on <code>t</code> (<code>mapT</code>) should take a map function on its argument (<code>mapA</code>) as a parameter. So I need both  <code>mapT</code> and <code>mapA</code> </p>\n"}], "owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 57936039, "answer_count": 2, "score": 1, "last_activity_date": 1568488946, "creation_date": 1568467213, "last_edit_date": 1568488946, "question_id": 57935896, "link": "https://stackoverflow.com/questions/57935896/functor-for-square-matrices", "title": "Functor for square matrices", "body": "<p>In my previous question here (<a href=\"https://stackoverflow.com/questions/57918937/nested-datatype-for-square-matrices\">Nested datatype for square matrices</a>) a datatype <code>Square</code> has been introduced. Now I want to write a functor instance for it. So I begin with map functions for all the four types. I have managed to do so for <code>Nil</code> and <code>Cons</code>:</p>\n\n<pre><code>mapNil :: ((a -&gt; b) -&gt; a -&gt; b) -&gt; (Nil (a -&gt; b) -&gt; Nil a -&gt; Nil b )\nmapNil map f Nil = Nil\n\n\nmapCons :: (forall b . ((a -&gt; b) -&gt; a -&gt; b) -&gt; (t (a -&gt; b) -&gt; t a -&gt; t b))\n        -&gt; ((a -&gt; b) -&gt; a -&gt; b)\n        -&gt; ((Cons t (a -&gt; b)) -&gt; Cons t a -&gt; Cons t b)\nmapCons mapT mapA (Cons f consf) (Cons x consx) =  Cons (mapA f x) (mapT mapA consf consx)\n</code></pre>\n\n<p>Now, the <code>Square'</code> type:</p>\n\n<pre><code>mapSquare' :: (forall b . ((a -&gt; b) -&gt; a -&gt; b) -&gt; (t (a -&gt; b) -&gt; t a -&gt; t b))\n           -&gt; ((a -&gt; b) -&gt; a -&gt; b)\n           -&gt; ((Square' t (a -&gt; b)) -&gt; Square' t a -&gt; Square' t b)\nmapSquare' mapT mapA (Zero fs) (Zero xs) = Zero (mapT (mapT mapA) fs xs) -- it is wrong\nmapSquare' mapT mapA (Succ fs) (Succ xs) = mapSquare' (mapCons mapT) mapA fs xs\n</code></pre>\n\n<p>And then I will do something like this: </p>\n\n<pre><code>mapSquare = ...\n\n-- this is, actually, the final goal:\ninstance Functor Square where\nfmap = mapSquare\n</code></pre>\n\n<p>So far, for my <code>mapSquare'</code> Haskell says this:</p>\n\n<pre><code>\u2022 Occurs check: cannot construct the infinite type: a ~ t a\n  Expected type: (a -&gt; t b) -&gt; a -&gt; t b\n    Actual type: t (a -&gt; b) -&gt; t a -&gt; t b\n\u2022 In the first argument of \u2018mapT\u2019, namely \u2018(mapT mapA)\u2019\n  In the first argument of \u2018Zero\u2019, namely \u2018(mapT (mapT mapA) fs xs)\u2019\n  In the expression: Zero (mapT (mapT mapA) fs xs)\n</code></pre>\n\n<p>My plan was that <code>(mapT mapA)</code> would \"lift\" it all between <code>(t (t a))</code> and <code>(t a)</code> levels. What is my mistake? I would appreciate your help.  </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568453341, "post_id": 57934158, "comment_id": 102284707, "body": "<code>[chr] : tokenize</code> is the culprit here, but that being said, this looks like way too complex."}, {"owner": {"reputation": 57, "user_id": 8609723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bqlb.jpg?s=128&g=1", "display_name": "sodapunk", "link": "https://stackoverflow.com/users/8609723/sodapunk"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568453534, "post_id": 57934158, "comment_id": 102284753, "body": "Yea i figured. It&#39;s my first time trying functional programming so I am not that used to it yet. The problem is that if i remove the brackets I don&#39;t get elements of imp in their own list :/"}, {"owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "edited": false, "score": 1, "creation_date": 1568453813, "post_id": 57934158, "comment_id": 102284806, "body": "What is the type of &quot;tokenize&quot; meant to be? If you give it a type definition you will often get a more helpful error message."}, {"owner": {"reputation": 57, "user_id": 8609723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bqlb.jpg?s=128&g=1", "display_name": "sodapunk", "link": "https://stackoverflow.com/users/8609723/sodapunk"}, "edited": false, "score": 0, "creation_date": 1568453859, "post_id": 57934158, "comment_id": 102284821, "body": "Oh, sorry I&#39;ll add that!"}, {"owner": {"reputation": 16362, "user_id": 49220, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/431cd43aaf713caa80316e852a87a840?s=128&d=identicon&r=PG", "display_name": "Paul Johnson", "link": "https://stackoverflow.com/users/49220/paul-johnson"}, "edited": false, "score": 0, "creation_date": 1568453892, "post_id": 57934158, "comment_id": 102284828, "body": "Its probably down to the fact that in one place you say <code>[chr]:tokenize</code> and later on you say <code>chr:tokenize</code>."}, {"owner": {"reputation": 57, "user_id": 8609723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bqlb.jpg?s=128&g=1", "display_name": "sodapunk", "link": "https://stackoverflow.com/users/8609723/sodapunk"}, "edited": false, "score": 0, "creation_date": 1568454005, "post_id": 57934158, "comment_id": 102284860, "body": "Yea, it works when i remove it or use ++ in place of :, but then I don&#39;t get the elements of imp in their own string"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 6, "last_activity_date": 1568453998, "creation_date": 1568453998, "answer_id": 57934249, "question_id": 57934158, "link": "https://stackoverflow.com/questions/57934158/haskell-newbie-occurs-check-cannot-construct-the-infinite-type-a-a/57934249#57934249", "title": "Haskell Newbie - Occurs check: cannot construct the infinite type: a ~ [a]", "body": "<p>In your expression, you use two subexpressions:</p>\n\n<pre><code>[chr] : (tokenize (tail str) imp remm))\n</code></pre>\n\n<p>and</p>\n\n<pre><code>chr: (tokenize (tail str) imp remm)\n</code></pre>\n\n<p>the two can not be in harmony with each other, since that would mean <code>[chr]</code> and <code>chr</code> have the same type hence the error.</p>\n\n<p>Usually in functional programming the parameters are written in a different order. Indeed, it makes more sense to write it as <code>tokenize imp remm str</code> with <code>imp</code> the important characters, <code>remm</code> the characters to remove and <code>str</code> the string to process.</p>\n\n<p>We can implement the fuction by using a helper function <code>go</code>. Here <code>go</code> basically should consider four cases:</p>\n\n<ol>\n<li>we reached the end of the list, and thus return a singleton list with an empty list;</li>\n<li>the first character is something to eliminate from the output, we recurse on the tail of the string;</li>\n<li>the character is important, we yield an empty list, the character wrapped in a list, and recurse on the tail; and</li>\n<li>if all above is not applicable, we prepend the character to the head of the list we retrieve when we recurse.</li>\n</ol>\n\n<p>We filter out empty lists, that can occur when we have for example two consecutive characters that are in <code>imp</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>tokenize :: [Char] -&gt; [Char] -&gt; String -&gt; [String]\ntokenize imp remm = filter (not . null) . go\n    where go [] = [[]]\n          go (x:xs) | elem x remm = go xs\n                    | elem x imp = [] : [x] : go xs\n                    | otherwise = let (y:ys) = go xs in (x:y) : ys</code></pre>\n\n<p>We then yield:</p>\n\n<pre><code>Prelude&gt; tokenize \"abc\" \"def\" \"defaabyesays\"\n[\"a\",\"a\",\"b\",\"ys\",\"a\",\"ys\"]\n</code></pre>\n\n<p>It might however be better to solve separate problems by separte functions. For example first have a function that removes characters from <code>remm</code>, etc. This makes it more easy to understand and bugfix your function.</p>\n"}], "owner": {"reputation": 57, "user_id": 8609723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bqlb.jpg?s=128&g=1", "display_name": "sodapunk", "link": "https://stackoverflow.com/users/8609723/sodapunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 57934249, "answer_count": 1, "score": 1, "last_activity_date": 1568632269, "creation_date": 1568453191, "last_edit_date": 1568632269, "question_id": 57934158, "link": "https://stackoverflow.com/questions/57934158/haskell-newbie-occurs-check-cannot-construct-the-infinite-type-a-a", "title": "Haskell Newbie - Occurs check: cannot construct the infinite type: a ~ [a]", "body": "<p>I am trying to make a function \"tokenize\" that takes 3 arguments; main String, String of chars that should be in their own String and a String of chars to remove from the string.</p>\n\n<pre><code>tokenize :: String -&gt; String -&gt; String -&gt; [String]\ntokenize [] imp remm = []\ntokenize str imp remm =   let chr = (head str) in\n                          if elem chr imp then ([chr] : (tokenize (tail str) imp remm))\n                          else if (elem chr  remm ) then (tokenize (tail str) imp remm)\n                          else chr: (tokenize (tail str) imp remm)\n</code></pre>\n\n<p>I get this error message :</p>\n\n<pre><code>Occurs check: \ncannot construct the infinite type: a ~ [a]\nExpected type: [a]\nActual type: [[a]]\n</code></pre>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "edited": false, "score": 2, "creation_date": 1568442255, "post_id": 57932373, "comment_id": 102282730, "body": "Syntax is the first hurdle when learning a language. To get a feel for it, I would start with much simpler examples than what you&#39;re trying now, and then work towards the more difficult stuff"}], "answers": [{"tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": false, "score": 7, "last_activity_date": 1568446019, "last_edit_date": 1568446019, "creation_date": 1568441790, "answer_id": 57932973, "question_id": 57932373, "link": "https://stackoverflow.com/questions/57932373/error-parse-error-on-input-where-4-where-f-y-x-xy/57932973#57932973", "title": "error: parse error on input \u2018where\u2019 | 4 | where f y x = [x]:y | ^^^^^", "body": "<pre><code>main :: IO ()    -- This says that main is an IO action.\n</code></pre>\n\n<p>Correct, this is a type signature for a procedure named <code>main</code>.</p>\n\n<pre><code>drop 95 (foldl f [] [1..100])\n</code></pre>\n\n<p>This line is nonsense.  Expressions are not valid at the top level.  Suppose I told a C compiler <code>1 + 7</code>.  What should it make of that?  It seems unreasonable.</p>\n\n<p>Perhaps, having given main a type, you intended to define main: <code>main = ...</code>.  Even then, the <code>drop</code> function is not an IO action.  You probably want to perform the computation then <em>use</em> the result somehow like printing it to the screen.</p>\n\n<pre><code>where f y x = [x]:y\n</code></pre>\n\n<p>Again this is nonsensical without the definition of a procedure, such as I proposed with <code>main = ...</code>.  Imagine I said \"at the movies\" and left off the \"meet us at seven\" - the context is rather critical.</p>\n\n<p>Putting it together, I suspect you are looking for:</p>\n\n<pre><code>main :: IO () -- a type signature much like a C prototype\nmain = print (drop 95 (foldl f [] [1..100]))\n  where f y x = [x]:y\n</code></pre>\n\n<p>Be aware that the indentation of <code>where</code> is important.</p>\n"}], "owner": {"reputation": 1, "user_id": 12065794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e25382943f1a66d8d8b6593067964b?s=128&d=identicon&r=PG&f=1", "display_name": "MCDurga", "link": "https://stackoverflow.com/users/12065794/mcdurga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1568446019, "creation_date": 1568434294, "question_id": 57932373, "link": "https://stackoverflow.com/questions/57932373/error-parse-error-on-input-where-4-where-f-y-x-xy", "title": "error: parse error on input \u2018where\u2019 | 4 | where f y x = [x]:y | ^^^^^", "body": "<pre><code>main :: IO ()    -- This says that main is an IO action.\ndrop 95 (foldl f [] [1..100])\n\n\nwhere f y x = [x]:y\n</code></pre>\n\n<p>main = return () -- This tells main to do nothing</p>\n"}, {"tags": ["haskell", "package", "cabal"], "comments": [{"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1568478463, "post_id": 57932348, "comment_id": 102290458, "body": "What version of cabal-install are you using?"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "edited": false, "score": 0, "creation_date": 1568482502, "post_id": 57932348, "comment_id": 102291417, "body": "I installed cabal.exe from <code>cabal-install-3.0.0.0-x86_64-unknown-mingw32.zip</code> file."}], "answers": [{"tags": [], "owner": {"reputation": 37486, "user_id": 371753, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/znFEK.jpg?s=128&g=1", "display_name": "sclv", "link": "https://stackoverflow.com/users/371753/sclv"}, "is_accepted": false, "score": 1, "last_activity_date": 1570861815, "creation_date": 1570861815, "answer_id": 58351503, "question_id": 57932348, "link": "https://stackoverflow.com/questions/57932348/cabal-install-works-but-cabal-list-does-not-find-package/58351503#58351503", "title": "Cabal install works but cabal list does not find package", "body": "<p>Good catch! I opened up an issue on the <code>cabal</code> tracker.</p>\n\n<p>With <code>cabal-install</code> 3.0 and beyond, packages you \"install\" are put into the <code>store</code> rather than the packagedb, and then made available through tools by being listed in the global <code>ghc environment</code> file. The <code>list</code> command isn't updated to be aware of this workflow, and only lists packages which are in the standard packagedb.</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570861815, "creation_date": 1568433839, "question_id": 57932348, "link": "https://stackoverflow.com/questions/57932348/cabal-install-works-but-cabal-list-does-not-find-package", "title": "Cabal install works but cabal list does not find package", "body": "<p>I have separately installed cabal in I:\\cabal and ghc in I:\\ghc folders. I had a previous installation of Haskell-Platform which did not work and I had to uninstall it. But there is a folder named <code>C:\\Users\\myname\\AppData\\Roaming\\cabal</code> which has many packages (total size 705mb). </p>\n\n<p>Now when I try to install a package, I get error message: </p>\n\n<pre><code>&gt;cabal install easyplot\nResolving dependencies...\nUp to date\ncabal: installdir is not defined. Set it in your cabal config file or use\n--installdir=&lt;path&gt;\n</code></pre>\n\n<p>So, I do following and it installs ok:  </p>\n\n<pre><code>&gt;cabal install easyplot --lib --installdir=\"C:\\Users\\myname\\AppData\\Roaming\\cabal\"\nResolving dependencies...\nUp to date\n</code></pre>\n\n<p>There is now an easyplot package in folder <code>C:\\Users\\myname\\AppData\\Roaming\\cabal\\packages\\hackage.haskell.org</code></p>\n\n<p>But when I try list command, it is shown as not installed: </p>\n\n<pre><code>&gt;cabal list easyplot\n* easyplot\n    Synopsis: A tiny plotting library, utilizes gnuplot for plotting.\n    Default available version: 1.0\n    Installed versions: [ Not installed ]    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; NOTE\n    Homepage: http://hub.darcs.net/scravy/easyplot\n    License:  MIT\n</code></pre>\n\n<p>Where is the problem and how can it be solved? Thanks for your help.</p>\n"}, {"tags": ["haskell", "types", "polymorphism", "map-function", "foldable"], "answers": [{"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 1, "creation_date": 1568426109, "post_id": 57931884, "comment_id": 102280859, "body": "Can I use mapM or mapM_ in some way?"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568478612, "post_id": 57931884, "comment_id": 102290503, "body": "@rnso in <i>this</i> case, yes, <code>case autocorrelation (V.fromList sampleA) of (a,b,c) -&gt; mapM_ print [a,b,c]</code>, since <code>a,b,c</code> happen to be of the same type, <code>Vector Double</code>."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568479042, "post_id": 57931884, "comment_id": 102290614, "body": "Thanks. Best to add this also in your answer."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": false, "score": 5, "last_activity_date": 1568425874, "creation_date": 1568425874, "answer_id": 57931884, "question_id": 57931873, "link": "https://stackoverflow.com/questions/57931873/how-to-use-mapm-in-this-situation/57931884#57931884", "title": "How to use mapM_ in this situation", "body": "<p>The simplest thing is just to pattern match.</p>\n\n<pre><code>main = do\n    let (a,b,c) = autocorrelation $ V.fromList sampleA\n    print a\n    print b\n    print c\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1568932406, "last_edit_date": 1568932406, "creation_date": 1568433342, "answer_id": 57932322, "question_id": 57931873, "link": "https://stackoverflow.com/questions/57931873/how-to-use-mapm-in-this-situation/57932322#57932322", "title": "How to use mapM_ in this situation", "body": "<p>If you <em>really</em> don't want to pattern-match yourself, you can use <a href=\"https://hackage.haskell.org/package/fixed-vector-1.2.0.0\" rel=\"nofollow noreferrer\">the fixed-vector package</a> to help you. Note that it comes with its own <code>mapM_</code> that you'd have to use:</p>\n\n<pre><code>import Data.Vector as V\nimport qualified Data.Vector.Fixed as F\nimport Statistics.Autocorrelation\nimport Data.Typeable\n\nsampleA = [1.0, 2.0, 3.0, 4.0, 1.0, 2.0, 3.0, 4]\n\nmain = do\n    let res = autocorrelation $ V.fromList sampleA\n    putStr \"Type of result of autocorrelation test: \"\n    print $ typeOf res\n    print res\n    F.mapM_ print res\n</code></pre>\n\n<p>Alternatively, you could make a <code>newtype</code> and stick your tuple in there:</p>\n\n<pre><code>{-# LANGUAGE DeriveFoldable #-}\n\nimport Data.Vector as V\nimport Statistics.Autocorrelation\nimport Data.Typeable\n\nnewtype Triple a = Triple (a, a, a) deriving(Foldable)\n\nsampleA = [1.0, 2.0, 3.0, 4.0, 1.0, 2.0, 3.0, 4]\n\nmain = do\n    let res = autocorrelation $ V.fromList sampleA\n    putStr \"Type of result of autocorrelation test: \"\n    print $ typeOf res\n    print res\n    Prelude.mapM_ print $ Triple res\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 2, "last_activity_date": 1568451378, "creation_date": 1568451378, "answer_id": 57933957, "question_id": 57931873, "link": "https://stackoverflow.com/questions/57931873/how-to-use-mapm-in-this-situation/57933957#57933957", "title": "How to use mapM_ in this situation", "body": "<p>We can make use of the <a href=\"http://hackage.haskell.org/package/lens\" rel=\"nofollow noreferrer\"><strong><code>lens</code></strong> [Hackage]</a> package to transform a tuple into a list:</p>\n\n<pre><code>import Control.Lens(toListOf, each)\nimport qualified Data.Vector as V\nimport Statistics.Autocorrelation\n\nsampleA = [1.0, 2.0, 3.0, 4.0, 1.0, 2.0, 3.0, 4]\n\nmain :: IO ()\nmain = mapM_ print (<b>toListOf each</b> (autocorrelation (V.fromList sampleA)))</code></pre>\n\n<p>But it is probably better to do pattern matching like <a href=\"https://stackoverflow.com/a/57931884/67579\">@DanielWagner</a> says, since then you make it more explicit what is happening.</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1568932406, "creation_date": 1568425664, "last_edit_date": 1568478227, "question_id": 57931873, "link": "https://stackoverflow.com/questions/57931873/how-to-use-mapm-in-this-situation", "title": "How to use mapM_ in this situation", "body": "<p>I am trying to print different components of result of <a href=\"http://hackage.haskell.org/package/statistics-0.15.0.0/docs/Statistics-Autocorrelation.html\" rel=\"nofollow noreferrer\">autocorrelation</a> on different lines: </p>\n\n<pre><code>import Data.Vector as V\nimport Statistics.Autocorrelation\nimport Data.Typeable\n\nsampleA = [1.0, 2.0, 3.0, 4.0, 1.0, 2.0, 3.0, 4]\n\nmain = do\n    let res = autocorrelation $ V.fromList sampleA\n    putStr \"Type of result of autocorrelation test: \"\n    print $ typeOf res\n    print res\n    -- Prelude.mapM_ print res      -- not working; \n</code></pre>\n\n<p>The output is: </p>\n\n<pre><code>Type of result of autocorrelation test: ((Vector Double),(Vector Double),(Vector Double))\n\n([1.0,2.5e-2,-0.45,-0.325,0.5,0.125,-0.15],[1.0,-1.3255000000000001,-1.4039375473415425,-1.442999810318651,-1.5311377955236107,-1.5364636906417393,-1.544097864842309],[1.0,1.0755000000000001,1.1539375473415425,1.192999810318651,1.2811377955236107,1.2864636906417393,1.294097864842309])\n</code></pre>\n\n<p>However, if I uncomment last line, I get error: </p>\n\n<pre><code>\u2022 No instance for (Foldable ((,,) (Vector Double) (Vector Double)))\n    arising from a use of \u2018Prelude.mapM_\u2019\n\u2022 In a stmt of a 'do' block: Prelude.mapM_ print res\n  In the expression:\n    do { let res = autocorrelation $ fromList sampleA;\n         putStr \"Type of result of autocorrelation test: \";\n         print $ typeOf res;\n         print res;\n         .... }\n  In an equation for \u2018main\u2019:\n      main\n        = do { let res = ...;\n               putStr \"Type of result of autocorrelation test: \";\n               print $ typeOf res;\n               .... }\n</code></pre>\n\n<p>How can I print all parts of result on separate lines? Thanks for your help.</p>\n"}, {"tags": ["haskell", "parsec", "megaparsec"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568411978, "post_id": 57930737, "comment_id": 102278914, "body": "A work around could be to see <code>x ? y : z</code> as two operators, so something like <code>x ? (y : z)</code>. As long as you pass correct objects, etc. That is not per se a huge problem. You can use a <code>Maybe</code>, etc. to denote failure. But as the article says, building a parser with <code>Parsec</code> itself is not that hard."}], "answers": [{"tags": [], "owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 7, "last_activity_date": 1568416379, "creation_date": 1568416379, "answer_id": 57931261, "question_id": 57930737, "link": "https://stackoverflow.com/questions/57930737/how-to-parse-ternary-expression-using-parsec/57931261#57931261", "title": "How to parse ternary expression using Parsec?", "body": "<p>One of the great benefits of monadic parsers is that they compose really well. </p>\n\n<p>This means that you don't have to try to trick a single <code>buildExpressionParser</code> into building the exact parser you want. You can simply use it to build a parser, and then use that parser like any other for anything, including another <code>buildExpressionParser</code>.</p>\n\n<p>In your case, you can:</p>\n\n<ol>\n<li>Use <code>buildExpressionParser</code> to create a parser for expressions with higher precedence than <code>?:</code></li>\n<li>Create a parser for <code>?:</code> using the above</li>\n<li>Use <code>buildExpressionParser</code> to create a parser for expressions with lower precedence than <code>?:</code> using the above</li>\n</ol>\n\n<p>Here's a complete example:</p>\n\n<pre><code>import Control.Monad.Identity\nimport Text.Parsec\nimport Text.Parsec.Expr\n\ndata Ex = Var String | Mul Ex Ex | Add Ex Ex | Assign Ex Ex | Trinary Ex Ex Ex\n    deriving (Show)\n\nvar = Var &lt;$&gt; many1 letter\ntopOps = [ [binary \"*\" Mul], [binary \"+\" Add] ]\ntopParser = buildExpressionParser topOps var\n\ntrinaryExpr = do\n    expr &lt;- topParser\n    trinary expr &lt;|&gt; return expr\n  where\n    trinary expr = do\n        string \"?\"\n        thenV &lt;- trinaryExpr\n        string \":\"\n        elseV &lt;- trinaryExpr\n        return $ Trinary expr thenV elseV\n\nbottomOps = [ [ binary \"=\" Assign ] ]\nbottomParser = buildExpressionParser bottomOps trinaryExpr\n\nbinary :: String -&gt; (Ex -&gt; Ex -&gt; Ex) -&gt; Operator String () Identity Ex\nbinary s t = Infix (string s &gt;&gt; return t) AssocLeft\n\ntestParse s = runParser bottomParser () \"\" s\nmain = print $ testParse \"a=b+c*d?e+f:g*h\"\n</code></pre>\n\n<p>The output (manually formatted) is:</p>\n\n<pre><code>Right \n  (Assign \n    (Var \"a\") \n    (Trinary \n      (Add (Var \"b\") \n           (Mul (Var \"c\") (Var \"d\"))) \n      (Add (Var \"e\") (Var \"f\")) \n      (Mul (Var \"g\") (Var \"h\"))))\n</code></pre>\n"}], "owner": {"reputation": 962, "user_id": 490815, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/366f7b0d571e7811680c53984c34c966?s=128&d=identicon&r=PG", "display_name": "sinoTrinity", "link": "https://stackoverflow.com/users/490815/sinotrinity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 57931261, "answer_count": 1, "score": 7, "last_activity_date": 1568416379, "creation_date": 1568411673, "last_edit_date": 1568412454, "question_id": 57930737, "link": "https://stackoverflow.com/questions/57930737/how-to-parse-ternary-expression-using-parsec", "title": "How to parse ternary expression using Parsec?", "body": "<p><a href=\"http://hackage.haskell.org/package/parsec-3.1.14.0/docs/Text-Parsec-Expr.html\" rel=\"noreferrer\">buildExpressionParser</a> only deals with unary and binary operators. Can it handle ternary operators like <code>?:</code>? There are some discussions <a href=\"http://compgroups.net/comp.lang.functional/parsing-ternary-operator-with-parsec/1052460\" rel=\"noreferrer\">here</a> and <a href=\"http://hackage.haskell.org/package/WebBits-2.2/docs/src/BrownPLT-JavaScript-Parser.html\" rel=\"noreferrer\">here</a>, but none is conclusive.</p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1568403592, "post_id": 57929256, "comment_id": 102276471, "body": "What is <code>mod x [1..x-1]</code> supposed to do?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1568403807, "post_id": 57929256, "comment_id": 102276551, "body": "@melpomene: I would gess it has as intention something like <code>all (\\y -&gt; 0 == mod x y)</code>, so placing <code>== 0</code> everywhere. But it indeed looks like some invented syntax. Python does not understand such expression either."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1568403996, "post_id": 57929256, "comment_id": 102276617, "body": "To me it looks like you&#39;re missing the concept of <code>filter</code>, both in <code>factor</code> (where you&#39;re trying to apply <code>mod</code> to a list, which does not work) and in <code>main</code> (where you&#39;re using <code>map</code> instead). The only language I know that lets you express a filter using <code>map</code> is Perl (because its <code>map</code> is closer to <code>concatMap</code>). Is that where you&#39;re coming from?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1568411742, "post_id": 57929256, "comment_id": 102278862, "body": "It would be better to <i>show</i> your attempt at using <code>Maybe</code> than to write psuedocode involving an undefined <code>None</code> value."}, {"owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "edited": false, "score": 0, "creation_date": 1568450055, "post_id": 57929256, "comment_id": 102284124, "body": "I&#39;m a little curious which language&#39;s <code>None</code> construct this refers to. For instance, in Python it&#39;s an immutable false singleton, while in Scala and Rust it&#39;s an Option value analogous to Haskell&#39;s Nothing."}, {"owner": {"reputation": 31, "user_id": 12037485, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pmQQ8PaWeHk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxIbYCE_Xg_cg9NHvzjU1e_jXjxA/photo.jpg?sz=128", "display_name": "Ruben Rubensson", "link": "https://stackoverflow.com/users/12037485/ruben-rubensson"}, "edited": false, "score": 0, "creation_date": 1568457462, "post_id": 57929256, "comment_id": 102285586, "body": "I&#39;m a python guy so that&#39;s where the &quot;return None&quot; comes from. I realize that the code is pretty awful, I overestimated my abilities with Haskell, which lead to this mess. I watched a video where &quot;map&quot; was used to apply a function to each item in a list so I decided to try and use that without looking into it much more than that. The plan behind &quot;mod x[1..x-1]&quot; was for it to check, along with the rest of the function, which numbers from 1 to x-1 would equal 0, meaning that they were divisors, as stated in a reply, not factors as I called them (language barrier)."}], "answers": [{"tags": [], "owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "is_accepted": false, "score": 4, "last_activity_date": 1568403070, "creation_date": 1568403070, "answer_id": 57929404, "question_id": 57929256, "link": "https://stackoverflow.com/questions/57929256/whats-a-valid-replacement-for-none-as-an-empty-return-value-in-this-case/57929404#57929404", "title": "What&#39;s a valid replacement for &quot;None&quot; as an empty return value in this case", "body": "<p>The <a href=\"https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Maybe\" rel=\"nofollow noreferrer\">Maybe</a> type is the primary optional type in Haskell. For instance, you could use <code>Just x</code> and <code>Nothing</code>, or using its Monad, <code>return x</code> and <code>fail \"not perfect\"</code>. Note that <code>return</code> is a function of monads, moving values from pure (which is frequently the Applicative name for the same function) to monadic, and not needed when you don't need to wrap a value. </p>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1568403680, "post_id": 57929469, "comment_id": 102276509, "body": "Alternatively: <code>sum [ k | k &lt;- [1 .. x-1], mod x k == 0 ]</code>"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 11, "last_activity_date": 1568410293, "last_edit_date": 1568410293, "creation_date": 1568403442, "answer_id": 57929469, "question_id": 57929256, "link": "https://stackoverflow.com/questions/57929256/whats-a-valid-replacement-for-none-as-an-empty-return-value-in-this-case/57929469#57929469", "title": "What&#39;s a valid replacement for &quot;None&quot; as an empty return value in this case", "body": "<p>Usually a <strong><code><a href=\"https://hackage.haskell.org/package/base/docs/Prelude.html#t:Maybe\" rel=\"noreferrer\">Maybe</a> a</code></strong> type is used to return a computation that can fail, or an <strong><code><a href=\"https://hackage.haskell.org/package/base/docs/Prelude.html#t:Either\" rel=\"noreferrer\">Either</a> String a</code></strong> where the <code>Left</code> constructor returns an error message.</p>\n\n<p>Note that Haskell has no <code>return</code> <em>statement</em>. <code>return</code> is a function that is used for monads. Strictly speaking, you can use <code>return</code> here to wrap the result in a <code>Just</code> constructor, but it is probably more readable to do that explicitly.</p>\n\n<p>That being said, your program has a lot of problems, both syntactically and semantically:</p>\n\n<ol>\n<li>\"<em>In number theory, a perfect number is a positive integer that is equal to the sum of its positive divisors, excluding the number itself.</em>\" <a href=\"https://en.wikipedia.org/wiki/Perfect_number\" rel=\"noreferrer\">[wiki]</a>, not factors.</li>\n<li><code>x == sum factor x</code> will not calculate the sum of the factors/divisors, since <code>factor</code> will return a single number (probably wrapped in a <code>Maybe</code>), yes, you can calculate the sum of a <code>Num a =&gt; Maybe a</code> type, but that is the sum of the only item it wraps, or <code>0</code> in case of a <code>Nothing</code>;</li>\n<li>as said, you probably should not use <code>return</code> here in the first place, Haskell has no <code>return</code> <em>statement</em>;</li>\n<li>you can not append a string with a list of numbers, you can however use <code>show :: Show a =&gt; a -&gt; String</code> to convert it to a string;</li>\n<li>by using <code>map checkPerfect</code> you will generate a list that contains for each item a <code>Just x</code> or a <code>Nothing</code>, you probably want to use <code>filter</code> instead.</li>\n</ol>\n\n<p>I think it makes more sense here to return a <code>Bool</code> instead, and then filter the list:</p>\n\n<pre><code>checkPerfect :: Integral i =&gt; i -&gt; Bool\ncheckPerfect x = x == sum (filter ((==) 0 . mod x) [1 .. x-1])</code></pre>\n\n<p>or as <a href=\"https://stackoverflow.com/questions/57929256/whats-a-valid-replacement-for-none-as-an-empty-return-value-in-this-case/57929469#comment102276509_57929469\">@melpomene</a> says with list comprehension:</p>\n\n<pre><code>checkPerfect :: Integral i =&gt; i -&gt; Bool\ncheckPerfect x = x == sum [ k | k &lt;- [1 .. x-1], mod x k == 0 ]</code></pre>\n\n<p>and then print the list of items with:</p>\n\n<pre><code>main = do\n    putStrLn \"Upper limit?\"\n    limit &lt;- readLn :: IO Int\n    putStrLn (\"Perfect numbers: \" ++ <b>show</b> (filter checkPerfect [1 .. limit]))</code></pre>\n\n<p>If we take as limit 10'000, we get:</p>\n\n<pre><code>Prelude&gt; main\nUpper limit?\n10000\nPerfect numbers: [6,28,496,8128]\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12037485, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pmQQ8PaWeHk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxIbYCE_Xg_cg9NHvzjU1e_jXjxA/photo.jpg?sz=128", "display_name": "Ruben Rubensson", "link": "https://stackoverflow.com/users/12037485/ruben-rubensson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 57929469, "answer_count": 2, "score": 2, "last_activity_date": 1568410293, "creation_date": 1568402268, "last_edit_date": 1568402335, "question_id": 57929256, "link": "https://stackoverflow.com/questions/57929256/whats-a-valid-replacement-for-none-as-an-empty-return-value-in-this-case", "title": "What&#39;s a valid replacement for &quot;None&quot; as an empty return value in this case", "body": "<p>I want to return None (Or Haskell's equivalent to None, rather) to this list of valid factors and whenever I encounter a number that isn't valid (a number that doesn't return a value of 0 when I run it in the modulus function along with x), I want to return None so that the list only contains the factors. There might be some errors in the code, I am new to Haskell, so you'll have to excuse sloppy code and such.</p>\n\n<p>I've tried using return maybe x, since I heard that it would work, but I had no luck with it (might've been using it incorrectly, though). I also thought about using some kind of standard value and using a seoarate function to filter the values out, but I reckoned that there must be a better way.</p>\n\n<pre><code>import Data.List\nimport System.IO\n\ncheckPerfect x\n    | x == sum factor x = return x\n    | otherwise = return None\n\nfactor x\n    | mod x [1..x-1] == 0 = return x\n    | otherwise = return None\n\nmain = do\n    putStrLn \"Upper limit?\"\n    limit &lt;- readLn\n    let uncheckedNumbers = [1..limit]\n    let perfectNumbersRaw = map checkPerfect uncheckedNumbers\n    putStrLn (\"Perfect numbers: \" ++ perfectNumbersRaw)\n</code></pre>\n"}, {"tags": ["haskell", "dependent-type", "data-kinds"], "comments": [{"owner": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1568384525, "post_id": 57924969, "comment_id": 102268368, "body": "If you really want to reuse the same logic, Template Haskell seems to be the only way: run the smart constructor at compile time, then quote the result into the code."}, {"owner": {"reputation": 1750, "user_id": 3929481, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/3ZrH1.jpg?s=128&g=1", "display_name": "mcmayer", "link": "https://stackoverflow.com/users/3929481/mcmayer"}, "reply_to_user": {"reputation": 24509, "user_id": 6863749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UyoQv.jpg?s=128&g=1", "display_name": "Li-yao Xia", "link": "https://stackoverflow.com/users/6863749/li-yao-xia"}, "edited": false, "score": 0, "creation_date": 1568384643, "post_id": 57924969, "comment_id": 102268431, "body": "@Li-yaoXia I see your point. If at all possible I&#39;d like to avoid TH, though."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1568394027, "post_id": 57924969, "comment_id": 102272928, "body": "You are asking a lot of Haskell&#39;s type system.  Maybe you want to use a language with proper dependent types like Idris?"}, {"owner": {"reputation": 24211, "user_id": 1364288, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JVtNl.png?s=128&g=1", "display_name": "danidiaz", "link": "https://stackoverflow.com/users/1364288/danidiaz"}, "edited": false, "score": 0, "creation_date": 1568406768, "post_id": 57924969, "comment_id": 102277520, "body": "This link <a href=\"https://blog.jle.im/entry/practical-dependent-types-in-haskell-2.html\" rel=\"nofollow noreferrer\">blog.jle.im/entry/practical-dependent-types-in-haskell-2.htm&zwnj;&#8203;l</a> might throw some light on the second problem."}], "owner": {"reputation": 1750, "user_id": 3929481, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/3ZrH1.jpg?s=128&g=1", "display_name": "mcmayer", "link": "https://stackoverflow.com/users/3929481/mcmayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1568383189, "creation_date": 1568382863, "last_edit_date": 1568383189, "question_id": 57924969, "link": "https://stackoverflow.com/questions/57924969/dependent-types-crossing-the-type-kind-runtime-compiletime-barrier", "title": "Dependent types: Crossing the type/kind (runtime/compiletime) barrier", "body": "<p>While venturing deeper into Haskell's dependent types I keep bumping into problems with the strict separation of run-time and compile-time checks.</p>\n\n<p>Let me demonstrate the issue(s) with a little example of integers with a given bit-length.</p>\n\n<pre><code>{-# LANGUAGE DataKinds, GADTs, TypeFamilies, TypeOperators #-}\nimport GHC.TypeNats\nimport Data.Bits\n\ndata Sign = Signed | Unsigned\n\ndata Int_ (s::Sign) (n::Nat) where\n    Int_  :: Integer -&gt; Int_ Signed n\n    UInt_  :: Integer -&gt; Int_ Unsigned n\n</code></pre>\n\n<p>It's a type <code>Int s n</code> with signature <code>s</code> and bit-length <code>n</code>.\nSome useful class instances would look like this:</p>\n\n<pre><code>instance (KnownNat n) =&gt; Show (Int_ s n) where\n    -- Verilog style\n    show i@(Int_ v)  = (show.natVal) i &lt;&gt; \"'sd\" &lt;&gt; show v\n    show i@(UInt_ v) = (show.natVal) i &lt;&gt; \"'ud\" &lt;&gt; show v\n\ninstance (KnownNat n) =&gt; Eq (Int_ s n) where\n    (Int_ u) == (Int_ v) = u==v\n    (UInt_ u) == (UInt_ v) = u==v\n</code></pre>\n\n<p>Smart constructors that check bounds are</p>\n\n<pre><code>int8 :: Integer -&gt; Int_ Signed 8\nint8 i = if i&lt;2^7 &amp;&amp; i&gt;=(-2^7) then Int_ i else error \"int8 Overflow\"\n\nuint8 :: Integer -&gt; Int_ Unsigned 8\nuint8 i = if i&gt;=0 &amp;&amp; i&lt;2^8 then UInt_ i else error \"uint8 Overflow\"\n</code></pre>\n\n<p>These smart constructors are already not so nice because the sanity check against overflow happens at run-time.</p>\n\n<p><strong>Problem 1:</strong> I have no clue how to write a smart constructor that would stop me from creating silly ints at compile-time. Moreover I'd need two types of constructors, one with the run-time check and one with the compile-time check. </p>\n\n<p>This 'duplication' problem, that is needing one set of operations with run-time checks and another set of operations for compile-time checks is quite common.</p>\n\n<p>For example, a concatenation operation would look like this:</p>\n\n<pre><code>(.++) :: (KnownNat m, KnownNat n) =&gt; Int_ Unsigned m \n         -&gt; Int_ Unsigned n -&gt; Int_ Unsigned (m+n)\ni@(UInt_ x) .++ j@(UInt_ y) = UInt_ (x*2^(natVal j)+y)\n</code></pre>\n\n<p>and here's a shift operation:</p>\n\n<pre><code>(.&gt;&gt;) :: Int_ s m -&gt; Int -&gt; Int_ s m\ni@(UInt_ x) .&gt;&gt; n = UInt_ (x `quot` (2 ^ n))\ni@(Int_ x) .&gt;&gt; n = Int_ (x `quot` (2 ^ n))\n</code></pre>\n\n<p>It's a sensible definition, but it would also be sensible to let <code>.&gt;&gt;</code> return a truncated <code>Int_ s k</code> (for the left shift it would in fact be the more sensible thing to do). I.e. </p>\n\n<pre><code>(.&gt;&gt;) :: Int_ s m -&gt; Nat n -&gt; Int_ s (m-n)  -- not proper syntax\n</code></pre>\n\n<p>It clearly isn't as simple as that: <code>m-n</code> can't be negative - coming back to the bounds check problem above.</p>\n\n<p><strong>Problem 2</strong>, a fundamental one, I believe, is that sometimes I know the <code>n</code> to shift by at compile-time, and sometimes I don't. When I do know the <code>n</code> at compile-time I'd like to have the compile-time checks. When <code>n</code> is dynamic (determined at run-time) I obviously can't have them. Is there a way to set this up in order to mix-and-match, so to speak, i.e. avoid the duplication of all the logic, one at the value-level and one at the type level, plus the glue between the two?</p>\n\n<p>My hunch is that I need some type class that introduces polymorphism over <code>Int</code> and some <code>Nat</code> sort of thing, but I'm totally unsure where this is going.</p>\n"}, {"tags": ["haskell", "haskell-stack"], "answers": [{"tags": [], "owner": {"reputation": 8621, "user_id": 1848029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjAy.jpg?s=128&g=1", "display_name": "lehins", "link": "https://stackoverflow.com/users/1848029/lehins"}, "is_accepted": true, "score": 4, "last_activity_date": 1568421916, "creation_date": 1568421916, "answer_id": 57931627, "question_id": 57924638, "link": "https://stackoverflow.com/questions/57924638/stack-run-with-profiling-in-haskell/57931627#57931627", "title": "stack run with profiling in haskell", "body": "<p>The command that you use <code>stack run</code> is a convenience command that not only runs the binary, but also builds it prior to that. So when you run <code>stack build --profile</code> it compiles you binary with all of the necessary ghc flags, but when you call <code>stack run</code> it compiles it again, but now without all of the profiling flags. So there are two way to do it properly:</p>\n\n<ol>\n<li>Don't run <code>stack build</code>, since it is redundant:</li>\n</ol>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ stack --profile run myexec --rts-options -p\n</code></pre>\n\n<ol start=\"2\">\n<li>or call the executable directly with <code>+RTS</code> flags, but make sure to pass <code>--profile</code> to both <code>stack</code> invocations, otherwise the <code>stack exec</code> will be looking in the wrong place for the binary (namely non-profiling build) and will fail to find it.</li>\n</ol>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ stack --profile build\n$ stack --profile exec -- myexec +RTS -p\n</code></pre>\n"}], "owner": {"reputation": 5328, "user_id": 325809, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b858606c4daae58cfdb362bf2fc4caa5?s=128&d=identicon&r=PG", "display_name": "fakedrake", "link": "https://stackoverflow.com/users/325809/fakedrake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "accepted_answer_id": 57931627, "answer_count": 1, "score": 9, "last_activity_date": 1568421916, "creation_date": 1568381626, "last_edit_date": 1568382058, "question_id": 57924638, "link": "https://stackoverflow.com/questions/57924638/stack-run-with-profiling-in-haskell", "title": "stack run with profiling in haskell", "body": "<p>I tried running</p>\n\n<pre><code>$ stack build --profile &amp;&amp; stack run myexec --rts-options -p\n</code></pre>\n\n<p>But I get</p>\n\n<pre><code>... \nRegistering library for mylibrary-0.1.0.1..\nCompleted 2 action(s).      \nmyexec: the flag -p requires the program to be built with -prof\n...\n</code></pre>\n\n<p>I know I could run </p>\n\n<pre><code>$ .stack-work/dist/x86_64-linux/Cabal-2.4.0.1/build/myexe/myexe +RTS -p\n</code></pre>\n\n<p>But what's the point of <code>stack run</code> then? I don't want to have to know the version of cabal and the architecture etc (this all happens in a makefile).</p>\n"}, {"tags": ["haskell", "types", "nested"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568359305, "post_id": 57918937, "comment_id": 102256008, "body": "<code>t</code> is a type constructor that takes a type and returns a type. So <code>Nil</code> is a candidate here. If you say <code>Square&#39; t a</code>, you will indeed construct a <code>Zero (Nil (Nil Int))</code>"}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1568514131, "post_id": 57918937, "comment_id": 102296317, "body": "You will likely enjoy Okasaki&#39;s paper, <a href=\"http://citeseerx.ist.psu.edu/viewdoc/summary;jsessionid=25088B69E37CE0B8357F9AD7FCD6C162?doi=10.1.1.456.357\" rel=\"nofollow noreferrer\">From fast exponentiation to square matrices: an adventure in types</a>."}], "answers": [{"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1568385702, "post_id": 57919180, "comment_id": 102268983, "body": "What QED stands for?"}, {"owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "reply_to_user": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1568393181, "post_id": 57919180, "comment_id": 102272558, "body": "@Dami&#225;nRafaelLattenero Latin &quot;quod erat demonstrandum&quot; lit. &quot;that which was to be shown&quot;. Used to terminate mathematical proofs, acting basically as a formal &quot;there you have it&quot;. In modern use, it often has a humorous tinge to it."}, {"owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "edited": false, "score": 0, "creation_date": 1568401484, "post_id": 57919180, "comment_id": 102275691, "body": "Thank you @chi , now I get it on the theoretical level! On the practical one, I still have some doubts. Is this <code>m</code> from  <code>let m = Succ (Succ (Zero ( Cons (Cons Nil 1) 2) 3) 4)</code> a matrix <code>((1,2)(3,4))</code> ?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "reply_to_user": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "edited": false, "score": 0, "creation_date": 1568402930, "post_id": 57919180, "comment_id": 102276212, "body": "@arryn No, that would be a type error. It&#39;s easier if you define a row at a time. <code>let row1 = Cons 1 (Cons 2 Nil)</code> and then <code>let row2 = Cons 3 (Cons 4 Nil)</code> and finally <code>let m = Succ (Succ (Zero (Cons row1 (Cons row2 Nil))))</code>."}], "tags": [], "owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "is_accepted": true, "score": 8, "last_activity_date": 1568376846, "last_edit_date": 1568376846, "creation_date": 1568359970, "answer_id": 57919180, "question_id": 57918937, "link": "https://stackoverflow.com/questions/57918937/nested-datatype-for-square-matrices/57919180#57919180", "title": "Nested datatype for square matrices", "body": "<p>Let's introduce some informal notation to guide intuition. Write <code>T :&gt; U</code> to denote that <code>T</code> is a sum type having one or more subcases, and <code>U</code> is one of them (at least modulo some isomorphism). We'll also use <code>=</code> between types to denote isomorphism.</p>\n\n<p>So, by definition, we have</p>\n\n<pre><code>Square a = Square' Nil a\n:&gt; { taking the Zero branch }\nNil (Nil a)\n=\n()\n</code></pre>\n\n<p>So, this case denotes the empty \"0x0\" matrix.</p>\n\n<pre><code>Square a = Square' Nil a\n:&gt; { taking the Succ branch }\nSquare' (Cons Nil) a\n:&gt; { taking the Zero branch }\nCons Nil (Cons Nil a)\n=  { def of Cons }\n(Cons Nil a, Nil (Cons Nil a))\n=  { def of Cons }\n((a, Nil a), Nil (Cons Nil a))\n=  { def of Nil }\n((a, ()), ())\n=\na\n</code></pre>\n\n<p>So, this is the 1x1 matrix.</p>\n\n<pre><code>Square a = Square' Nil a\n:&gt; { taking the Succ branch }\nSquare' (Cons Nil) a\n:&gt; { taking the Succ branch again }\nSquare' (Cons (Cons Nil)) a\n:&gt; { taking the Zero branch }\nCons (Cons Nil) (Cons (Cons Nil) a)\n=\nCons (Cons Nil) (a, Cons Nil a)\n=\nCons (Cons Nil) (a, a, Nil a)\n=\nCons (Cons Nil) (a, a, ())\n=\nCons (Cons Nil) (a, a)\n=\n((a,a), Cons Nil (a, a))\n=\n((a,a), (a,a), Nil (a, a))\n=\n((a,a), (a,a), ())\n=\n((a,a), (a,a))\n</code></pre>\n\n<p>So, this is the 2x2 matrix.</p>\n\n<p>We should now be able to spot some pattern. Taking the <code>Succ</code> branches, we end up with a type of the form</p>\n\n<pre><code>Square' (Cons (Cons (Cons (...(Cons Nil))))) a\n</code></pre>\n\n<p>Which becomes, with the final <code>Zero</code>,</p>\n\n<pre><code>F (F a)\n  where F = (Cons (Cons (Cons (...(Cons Nil)))))\n</code></pre>\n\n<p>Note that we considered all possible cases, so the final type must indeed be of the form <code>F (F a)</code> with some <code>F</code> of the form above.</p>\n\n<p>Now, one can see that <code>F a</code> is isomorphic to <code>(a,a,a,....)</code> where the number N of <code>a</code>s it exactly the number N of <code>Cons</code>es in the definition of <code>F</code>. Hence, <code>F (F a)</code> will produce a square matrix (an N-tuple of N-tuples = square matrix).</p>\n\n<p>Let's prove that by induction on the number of <code>Cons</code>es. For the zero case, we have <code>F = Nil</code>, and indeed, as we wanted, zero <code>a</code>s appear:</p>\n\n<pre><code>Nil a = ()\n</code></pre>\n\n<p>For the induction case, assume <code>F a</code> with N <code>Cons</code>es is <code>(a,a,...)</code> with N <code>a</code>s. The N+1 case to prove would state that <code>(Cons F) a</code> is <code>(a,a,...,a)</code>, having N+1 <code>a</code>s. Indeed:</p>\n\n<pre><code>Cons F a\n=\n(a, F a)\n=\n(a, (a,a....))   { 1 + N a's , as wanted }\n</code></pre>\n\n<p>QED.</p>\n"}], "owner": {"reputation": 313, "user_id": 12047827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465cdede6feeb53d122d87d7ccd42c5e?s=128&d=identicon&r=PG&f=1", "display_name": "arryn", "link": "https://stackoverflow.com/users/12047827/arryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 2, "accepted_answer_id": 57919180, "answer_count": 1, "score": 7, "last_activity_date": 1568376846, "creation_date": 1568358862, "question_id": 57918937, "link": "https://stackoverflow.com/questions/57918937/nested-datatype-for-square-matrices", "title": "Nested datatype for square matrices", "body": "<p>I am trying to understand how this datatype (Square) represents square matrices.</p>\n\n<pre><code>type Square = Square' Nil\ndata Square' t a = Zero (t (t a) ) | Succ (Square' (Cons t) a)\ndata Nil a = Nil\ndata Cons t a = Cons a (t a)\n</code></pre>\n\n<p>So. What is <code>t</code> here? I suppose it is one of the types declared above. \nI decided to start with the simplest, so </p>\n\n<pre><code>Zero (Nil (Nil Int))\n</code></pre>\n\n<p>If I put integer 4 as a value, is this a matrix <code>(4)</code>? </p>\n\n<p>Suppose it is something. Now, what is this:</p>\n\n<pre><code>Succ ( Zero (Cons t) a) \n</code></pre>\n\n<p>if I am right about <code>t</code>, then this, perhaps, must represent some 2\u00d72 matrix, but what are its values?</p>\n\n<pre><code>Succ (Zero (Cons Nil) a) \n</code></pre>\n\n<p>I would appreciate your help in my understanding of how it is a square matrix.</p>\n"}, {"tags": ["haskell", "package", "ghc", "cabal"], "answers": [{"tags": [], "owner": {"reputation": 754, "user_id": 2140910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CtvpI.jpg?s=128&g=1", "display_name": "Bjartur Thorlacius", "link": "https://stackoverflow.com/users/2140910/bjartur-thorlacius"}, "is_accepted": false, "score": 1, "last_activity_date": 1568367529, "creation_date": 1568367529, "answer_id": 57921062, "question_id": 57917507, "link": "https://stackoverflow.com/questions/57917507/aligning-configuration-between-separate-ghc-cabal-and-previous-installation/57921062#57921062", "title": "Aligning configuration between separate ghc, cabal and previous installation", "body": "<p>Try running <code>cabal configure</code>. For GHC, read the follow excerpt the <a href=\"https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/packages.html#package-databases\" rel=\"nofollow noreferrer\">ghc-pkg</a> documentation:</p>\n\n<blockquote>\n  <p>You can control GHC\u2019s package database stack using the following\n  options:</p>\n  \n  <p>-package-db \u27e8file\u27e9</p>\n\n<pre><code>Add the package database \u27e8file\u27e9 on top of the current stack.\n</code></pre>\n  \n  <p>-no-global-package-db</p>\n\n<pre><code>Remove the global package database from the package database stack.\n</code></pre>\n  \n  <p>-no-user-package-db</p>\n\n<pre><code>Prevent loading of the user\u2019s local package database in the initial stack.\n</code></pre>\n  \n  <p>-clear-package-db</p>\n\n<pre><code>Reset the current package database stack. This option removes every previously specified package database (including those read from\n</code></pre>\n  \n  <p>the GHC_PACKAGE_PATH environment variable) from the package database\n  stack.</p>\n  \n  <p>-global-package-db</p>\n\n<pre><code>Add the global package database on top of the current stack. This option can be used after -no-global-package-db to specify the position\n</code></pre>\n  \n  <p>in the stack where the global package database should be loaded.</p>\n  \n  <p>-user-package-db</p>\n\n<pre><code>Add the user\u2019s package database on top of the current stack. This option can be used after -no-user-package-db to specify the position\n</code></pre>\n  \n  <p>in the stack where the user\u2019s package database should be loaded.</p>\n  \n  <p>6.9.5.1. The GHC_PACKAGE_PATH environment variable</p>\n  \n  <p>GHC_PACKAGE_PATH</p>\n\n<pre><code>The GHC_PACKAGE_PATH environment variable may be set to a :-separated (;-separated on Windows) list of files containing package\n</code></pre>\n  \n  <p>databases.\n  This list of package databases is used by GHC and ghc-pkg. The order is analogous to the PATH environment variable\n  where entries earlier in the PATH override ones that come later.</p>\n</blockquote>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568367529, "creation_date": 1568350735, "question_id": 57917507, "link": "https://stackoverflow.com/questions/57917507/aligning-configuration-between-separate-ghc-cabal-and-previous-installation", "title": "Aligning configuration between separate ghc, cabal and previous installation", "body": "<p>I have installed ghc (in c:\\ghc) and cabal (in c:\\cabal) separately from <a href=\"https://www.haskell.org/ghc/download_ghc_8_8_1.html#windows64\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://www.haskell.org/cabal/download.html\" rel=\"nofollow noreferrer\">here</a>, respectively. </p>\n\n<p>I also have a folder from a previous (now uninstalled) installation named C:\\Users\\myname\\AppData\\Roaming\\cabal 700mb in size which has following folders and files:</p>\n\n<pre><code>13-09-2019  08:40    &lt;DIR&gt;          .\n13-09-2019  08:40    &lt;DIR&gt;          ..\n13-09-2019  07:00             5,519 config\n12-09-2019  12:40             5,519 config.backup\n13-09-2019  08:40    &lt;DIR&gt;          logs\n12-09-2019  14:26    &lt;DIR&gt;          packages\n13-09-2019  08:39    &lt;DIR&gt;          store\n               2 File(s)         11,038 bytes\n               5 Dir(s)   3,257,618,432 bytes free\n</code></pre>\n\n<p>I now want to configure both ghc and cabal to use c:\\cabghc folder. How can I do this while also moving existing packages to this folder? Thanks for your help. </p>\n"}, {"tags": ["haskell", "ghc", "cabal"], "comments": [{"owner": {"reputation": 1610, "user_id": 11257715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ef71a9bfa4abd30cb98cbb290b909?s=128&d=identicon&r=PG", "display_name": "moonGoose", "link": "https://stackoverflow.com/users/11257715/moongoose"}, "edited": false, "score": 0, "creation_date": 1568343541, "post_id": 57916703, "comment_id": 102251935, "body": "I think you just got GHC (with source for cabal). You probably want the Haskell platform instead"}], "answers": [{"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": true, "score": 1, "last_activity_date": 1568343576, "creation_date": 1568343576, "answer_id": 57916779, "question_id": 57916703, "link": "https://stackoverflow.com/questions/57916703/cabal-not-present-after-latest-haskell-install/57916779#57916779", "title": "Cabal not present after latest Haskell install", "body": "<p>GHC is just the compiler and a set of core libraries and executables, of which <code>cabal</code>-the-program is not one. The <code>Cabal</code> you found is a library for package management. The <code>cabal</code> <em>program</em> is part of the <a href=\"https://hackage.haskell.org/package/cabal-install\" rel=\"nofollow noreferrer\"><code>cabal-install</code></a> package, and it depends on the <code>Cabal</code> library. Without <code>cabal-install</code> installed, you cannot <code>cabal install cabal-install</code>. Instead, you have to manually download the <code>cabal</code> program from <a href=\"https://www.haskell.org/cabal/download.html\" rel=\"nofollow noreferrer\">the website</a>. You can build it from source or you can use one of the pre-built binaries.</p>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 57916779, "answer_count": 1, "score": 0, "last_activity_date": 1568343576, "creation_date": 1568342702, "last_edit_date": 1568343344, "question_id": 57916703, "link": "https://stackoverflow.com/questions/57916703/cabal-not-present-after-latest-haskell-install", "title": "Cabal not present after latest Haskell install", "body": "<p>I am trying latest Haskell from <a href=\"https://www.haskell.org/ghc/download_ghc_8_8_1.html#windows64\" rel=\"nofollow noreferrer\">here</a> on Windows7. I downloaded ghc-8.8.1-x86_64-unknown-mingw32.tar.xz (377.3 MB) and untarred it in a folder and added bin folder path to environment. </p>\n\n<p>Now I can run ghc but cabal or cabal-install are not there. </p>\n\n<p>Although I:\\ghc-8.8.1\\lib\\Cabal-3.0.0.0 is there in package but there is no cabal.exe or cabal-install.exe </p>\n\n<p>How can I get an run cabal in this setup? Thanks for your help.</p>\n"}, {"tags": ["haskell", "documentation", "haddock", "hackage", "cabal-new"], "comments": [{"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1568347301, "post_id": 57916341, "comment_id": 102252529, "body": "If you install the package locally with documentation (see <code>--enable-documentation</code>. for <code>cabal</code>), your local docs will link to the other external packages&#39; local docs. Regarding Hackage: when you upload your package to Hackage, docs linking to other packages on Hackage wwill automatically be created. There is no way to link your local package Hackage docs though."}, {"owner": {"reputation": 9455, "user_id": 1172541, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LROoN.png?s=128&g=1", "display_name": "PyRulez", "link": "https://stackoverflow.com/users/1172541/pyrulez"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1568389987, "post_id": 57916341, "comment_id": 102271197, "body": "@Alec I had issues building the docs for the dependencies. Could I download the ones from hackage instead of trying to build them myself?"}, {"owner": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 1, "creation_date": 1568400032, "post_id": 57916341, "comment_id": 102275162, "body": "Unfortunately, I don&#39;t think you can. That seems like a potentially neat feature though, so I&#39;ve opened a feature request: <a href=\"https://github.com/haskell/haddock/issues/1086\" rel=\"nofollow noreferrer\">github.com/haskell/haddock/issues/1086</a>."}, {"owner": {"reputation": 9455, "user_id": 1172541, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LROoN.png?s=128&g=1", "display_name": "PyRulez", "link": "https://stackoverflow.com/users/1172541/pyrulez"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1568410783, "post_id": 57916341, "comment_id": 102278658, "body": "@Alec okay. Also, thank you! I was considering doing that myself, but just wanted to make sure it wasn&#39;t already in it."}, {"owner": {"reputation": 9455, "user_id": 1172541, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LROoN.png?s=128&g=1", "display_name": "PyRulez", "link": "https://stackoverflow.com/users/1172541/pyrulez"}, "reply_to_user": {"reputation": 29444, "user_id": 3072788, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/220a45c2fcff7e7358d144551b116205?s=128&d=identicon&r=PG&f=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/3072788/alec"}, "edited": false, "score": 0, "creation_date": 1568592275, "post_id": 57916341, "comment_id": 102310954, "body": "@Alec This cabal command seems to say it can work with haddock, but I can&#39;t get it to work: <a href=\"https://cabal.readthedocs.io/en/latest/nix-local-build.html#cfg-flag---html-location\" rel=\"nofollow noreferrer\">cabal.readthedocs.io/en/latest/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 6255674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1f08713330e67540f83a3d95c7c8d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pranay Sashank", "link": "https://stackoverflow.com/users/6255674/pranay-sashank"}, "is_accepted": false, "score": 1, "last_activity_date": 1579852234, "last_edit_date": 1579852234, "creation_date": 1573741715, "answer_id": 58859107, "question_id": 57916341, "link": "https://stackoverflow.com/questions/57916341/how-to-instruct-haddock-to-link-to-hackage-documentation-for-hackage-packages/58859107#58859107", "title": "How to instruct haddock to link to hackage documentation for hackage packages?", "body": "<p>I usually do,</p>\n\n<pre><code>cabal v2-haddock --haddock-html-location='https://hackage.haskell.org/package/$pkg-$version/docs' --haddock-hyperlink-source --haddock-quickjump\n</code></pre>\n\n<p>The only problem for me with this approach is that, it may link with latest packages that are not yet available on Hackage.\nFor example, when I run this on ghc-8.8 it links to base-4.13 which hasn't been released on Hackage yet.</p>\n"}], "owner": {"reputation": 9455, "user_id": 1172541, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LROoN.png?s=128&g=1", "display_name": "PyRulez", "link": "https://stackoverflow.com/users/1172541/pyrulez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1579852234, "creation_date": 1568338899, "question_id": 57916341, "link": "https://stackoverflow.com/questions/57916341/how-to-instruct-haddock-to-link-to-hackage-documentation-for-hackage-packages", "title": "How to instruct haddock to link to hackage documentation for hackage packages?", "body": "<p>So, I am using haddock (through cabal) to generate documentation for my local Haskell package. It has no trouble hyperlinking its own local html documents to each other. However, whenever my package references a symbol from another package, it does not create the link.</p>\n\n<p>Most of my outside dependencies have haddock documentation on Hackage. Is there a way to set up haddock such that it can find the documentation of Hackage and hyperlink to it?</p>\n"}, {"tags": ["haskell", "type-inference", "gadt", "existential-type"], "comments": [{"owner": {"reputation": 7033, "user_id": 288201, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b4b21f0f66f55fe614e7eeac6807f7f4?s=128&d=identicon&r=PG", "display_name": "Koterpillar", "link": "https://stackoverflow.com/users/288201/koterpillar"}, "edited": false, "score": 0, "creation_date": 1568331450, "post_id": 57915598, "comment_id": 102249858, "body": "Are you trying to define an analogue to <code>tail :: [a] -&gt; [a]</code> or <code>last :: [a] -&gt; a</code>?"}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "reply_to_user": {"reputation": 7033, "user_id": 288201, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b4b21f0f66f55fe614e7eeac6807f7f4?s=128&d=identicon&r=PG", "display_name": "Koterpillar", "link": "https://stackoverflow.com/users/288201/koterpillar"}, "edited": false, "score": 0, "creation_date": 1568331792, "post_id": 57915598, "comment_id": 102249909, "body": "@Koterpillar You&#39;re absolutely right, I meant to write <code>last</code> not <code>tail</code>. Let me fix that. Though I think defining an analogue to <code>tail</code> might be very interesting too!"}, {"owner": {"reputation": 7033, "user_id": 288201, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b4b21f0f66f55fe614e7eeac6807f7f4?s=128&d=identicon&r=PG", "display_name": "Koterpillar", "link": "https://stackoverflow.com/users/288201/koterpillar"}, "edited": false, "score": 0, "creation_date": 1568333392, "post_id": 57915598, "comment_id": 102250198, "body": "Tail will be easy. Unfortunately I don&#39;t have an answer for your <code>eLast</code>..."}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 7033, "user_id": 288201, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b4b21f0f66f55fe614e7eeac6807f7f4?s=128&d=identicon&r=PG", "display_name": "Koterpillar", "link": "https://stackoverflow.com/users/288201/koterpillar"}, "edited": false, "score": 0, "creation_date": 1568335494, "post_id": 57915598, "comment_id": 102250540, "body": "@Koterpillar <code>tail</code> may be harder than you expect. It&#39;s minorly tricky (though at least by now a well-known trick) to even write the type for <code>tail</code>."}, {"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1568335529, "post_id": 57915598, "comment_id": 102250550, "body": "@DanielWagner My immediate thought was that it was impossible, since the type is existential?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1568335653, "post_id": 57915598, "comment_id": 102250572, "body": "@AJFarmar There are two standard tricks for encoding existentials in Haskell: via CPS (<code>exists e. List e a</code> -&gt; <code>(EList a -&gt; b, NEList a -&gt; b) -&gt; b</code>) and existential wrappers (<code>data SomeList a where SomeList :: List e a -&gt; SomeList a</code>; sometimes paired with a GADT that lets you recover <code>e</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1568335492, "post_id": 57915948, "comment_id": 102250539, "body": "I happen to have pre-emptively completed that exercise! I suppose the reason for needing this pattern is that GHC checks for exhaustive patterns only <i>after</i> type-checking?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 2, "creation_date": 1568335787, "post_id": 57915948, "comment_id": 102250599, "body": "@AJFarmar I think part of what makes it tricky to know that &quot;<code>Cons a Nil</code> doesn&#39;t match&quot; implies &quot;<code>Cons a (Cons b _)</code> does match&quot; is that, in the presence of GADTs, it&#39;s not always clear that all constructors are type-correct possibilities, so it&#39;s not correct to simply try all the constructors not yet listed. For example, suppose that your lists had three constructors; which, if any, of the two remaining patterns&#39; type equalities should be introduced on the right-hand side of <code>last (Cons a Nil) = a; last (Cons a b) = {- here -}</code>?"}, {"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "reply_to_user": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "edited": false, "score": 0, "creation_date": 1568335970, "post_id": 57915948, "comment_id": 102250629, "body": "@AJFarmar And, by the way, if you already have <code>foldr</code> and <code>foldr1</code>, you could consider <code>last = foldr1 (\\x y -&gt; y)</code>."}], "tags": [], "owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "is_accepted": true, "score": 4, "last_activity_date": 1568334780, "last_edit_date": 1568334780, "creation_date": 1568334457, "answer_id": 57915948, "question_id": 57915598, "link": "https://stackoverflow.com/questions/57915598/how-can-i-convince-ghc-that-ive-excluded-a-certain-case/57915948#57915948", "title": "How can I \u2018convince\u2019 GHC that I&#39;ve excluded a certain case?", "body": "<p>One thing you can do is pass around an alternative for empty lists:</p>\n\n<pre><code>lastDef :: a -&gt; List e a -&gt; a\nlastDef a Nil = a\nlastDef _ (Cons a b) = lastDef a b\n</code></pre>\n\n<p>Then wrap it up once at the top level.</p>\n\n<pre><code>last :: NEList a -&gt; a\nlast (Cons a b) = lastDef a b\n</code></pre>\n\n<p>Extending this pattern to <code>foldr</code> and <code>foldr1</code> is left as an exercise for the reader.</p>\n"}, {"tags": [], "owner": {"reputation": 22091, "user_id": 5684257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5090cde8ea066a1fda67ed52dd5084?s=128&d=identicon&r=PG&f=1", "display_name": "HTNW", "link": "https://stackoverflow.com/users/5684257/htnw"}, "is_accepted": false, "score": 3, "last_activity_date": 1568342503, "last_edit_date": 1568342503, "creation_date": 1568337776, "answer_id": 57916246, "question_id": 57915598, "link": "https://stackoverflow.com/questions/57915598/how-can-i-convince-ghc-that-ive-excluded-a-certain-case/57916246#57916246", "title": "How can I \u2018convince\u2019 GHC that I&#39;ve excluded a certain case?", "body": "<p>You've \"defined\" <code>NEList</code> (I say that in a loose way) the same way <code>base</code> defines <code>NonEmpty</code>: as a single element tacked onto the head of a potentially empty list.</p>\n\n<pre><code>data NonEmpty a = a :| [a]\n</code></pre>\n\n<p>Another presentation of <code>NonEmpty</code> instead places that single element at the end.</p>\n\n<pre><code>data NonEmpty a = Single a | Multiple a (NonEmpty a)\n</code></pre>\n\n<p>This presentation, no surprise, makes <code>eLast</code> easy:</p>\n\n<pre><code>eLast (Single x) = x\neLast (Multiple _ xs) = eLast xs\n</code></pre>\n\n<p>Whenever you want multiple sets of constructors on the same type, look to pattern synonyms. Instead of the base <code>NonEmpty</code>, we can also translate to your <code>List</code>.</p>\n\n<pre><code>pattern Single :: forall e a. () =&gt; e ~ 'NotEmpty =&gt; a -&gt; List e a\npattern Single x = Cons x Nil\npattern Multiple :: forall e a. () =&gt; e ~ 'NotEmpty =&gt; a -&gt; List 'NotEmpty a -&gt; List e a\npattern Multiple x xs &lt;- Cons x xs@(Cons _ _)\n  where Multiple x xs = Cons x xs\n-- my dormant bidirectional pattern synonyms GHC proposal would allow just\n-- pattern Multiple x (Cons y xs) = Cons x (Cons y xs)\n-- but current pattern synonyms are a little stupid, so Multiple is ugly\n{-# COMPLETE Nil, Single, Multiple :: List #-}\n-- Single and Multiple are actually patterns on List e a, not List NotEmpty a\n-- Therefore the COMPLETE must include Nil, or else we'd show that all\n-- Lists are nonempty (\\case { Single _ -&gt; Refl; Multiple _ _ -&gt; Refl })\n-- They are, however, still complete on List NotEmpty a\n-- GHC will \"infer\" this by \"trying\" the Nil constructor and deeming it impossible\n</code></pre>\n\n<p>Giving</p>\n\n<pre><code>eLast :: NEList a -&gt; a\neLast (Single x) = x\neLast (Multiple _ xs) = eLast xs\n</code></pre>\n"}], "owner": {"reputation": 11366, "user_id": 3922954, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76ba47d2fdd24ab56b0b273cce2075e5?s=128&d=identicon&r=PG&f=1", "display_name": "AJF", "link": "https://stackoverflow.com/users/3922954/ajf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 57915948, "answer_count": 2, "score": 6, "last_activity_date": 1568342503, "creation_date": 1568330895, "last_edit_date": 1568337232, "question_id": 57915598, "link": "https://stackoverflow.com/questions/57915598/how-can-i-convince-ghc-that-ive-excluded-a-certain-case", "title": "How can I \u2018convince\u2019 GHC that I&#39;ve excluded a certain case?", "body": "<p>I have the following toy implementation of a non-empty list (<code>NEList</code>) datatype:</p>\n\n<pre><code>-- A type to describe whether or not a list is empty.\ndata Emptiness :: Type where\n  Empty    :: Emptiness\n  NotEmpty :: Emptiness\n\n-- The list itself. Note the existential type in `Cons'.\ndata List :: Emptiness -&gt; Type -&gt; Type where\n  Nil :: List 'Empty a\n  Cons :: a -&gt; List e a -&gt; List 'NotEmpty a\n\ntype EList a = List 'Empty a\ntype NEList a = List 'NotEmpty a\n</code></pre>\n\n<p>For example it's very easy to define a 'safe head' function that only operates on non-empty lists:</p>\n\n<pre><code>eHead :: NEList a -&gt; a\neHead (Cons a _) = a\n</code></pre>\n\n<p>The last is similarly easy, but has a little complication:</p>\n\n<pre><code>eLast :: NEList a -> a\neLast (Cons a Nil) = a\neLast (Cons _ <b>b@(Cons _ _)</b>) = eLast b</code></pre>\n\n<p>The reason the pattern needs to be like this is to convince GHC that the type of <code>b</code> is indeed <code>List 'NotEmpty</code>, instead of an unknown existential type. The following code fails for that reason: (<code>Couldn't match type \u2018e\u2019 with \u2018'NotEmpty\u2019 ...</code>)</p>\n\n<pre><code>eLast :: NEList a -> a\neLast (Cons a Nil) = a\neLast (Cons _ <b>b</b>) = eLast b</code></pre>\n\n<p>I'm fully aware <em>why</em> this is happening. What I'd like to know is, can I avoid having to write <code>b@(Cons _ _)</code> every time? Is there some <em>other</em> way I can restrict the type, so that GHC knows that <code>b</code> is referring strictly to something of type <code>List 'NotEmpty</code>?</p>\n\n<p>One obvious way is to use <code>unsafeCoerce</code> but this defeats the point of the exercise.</p>\n\n<hr>\n\n<p><i>\nFor the sake of reproducibility, here is my preamble:</p>\n\n<pre><code>{-# OPTIONS_GHC -Wall -Werror #-} -- To prevent missed cases.\n{-# LANGUAGE DataKinds        #-}\n{-# LANGUAGE GADTs            #-}\n{-# LANGUAGE KindSignatures   #-}\nimport Data.Kind\n</code></pre>\n\n<p></i></p>\n"}, {"tags": ["haskell", "statistics"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568316087, "post_id": 57913252, "comment_id": 102245642, "body": "This is not output, these are compilation errors."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568316149, "post_id": 57913252, "comment_id": 102245660, "body": "Yes, I meant error report."}, {"owner": {"reputation": 57219, "user_id": 33796, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/08727b23ba62e634b32988cdff082663?s=128&d=identicon&r=PG", "display_name": "luqui", "link": "https://stackoverflow.com/users/33796/luqui"}, "edited": false, "score": 0, "creation_date": 1568367049, "post_id": 57913252, "comment_id": 102259607, "body": "An explicit type signature on <code>sampleA</code> would have helped you find this error.  As  a rule of thumb: when type error messages are confusing, add more type signatures.  It usually doesn&#39;t fix the problem, but it improves the error messages."}], "answers": [{"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568316363, "post_id": 57913290, "comment_id": 102245740, "body": "I never needed to do this in my earlier examples."}], "tags": [], "owner": {"reputation": 39903, "user_id": 128645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3697685173ba67283f38ba931bd71f8c?s=128&d=identicon&r=PG", "display_name": "Jeff Foster", "link": "https://stackoverflow.com/users/128645/jeff-foster"}, "is_accepted": false, "score": 3, "last_activity_date": 1568316187, "last_edit_date": 1592644375, "creation_date": 1568316187, "answer_id": 57913290, "question_id": 57913252, "link": "https://stackoverflow.com/questions/57913252/simple-code-producing-so-much-error-report/57913290#57913290", "title": "Simple code producing so much error report", "body": "<p>Here's the super relevant bits of the error report.</p>\n<blockquote>\n<p>Ambiguous type variable \u2018t0\u2019 arising from the literal \u20184\u2019</p>\n<p>Probable fix: use a type annotation to specify what \u2018t0\u2019 should be.</p>\n</blockquote>\n<p>Is it an <code>Int</code>, <code>Double</code>, <code>Float</code>? The compiler can't tell since 2 it is ambiguous.</p>\n<p>Adding a type signature ought to fix things.</p>\n<pre><code>sampleA :: [Double]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1568316361, "creation_date": 1568316361, "answer_id": 57913338, "question_id": 57913252, "link": "https://stackoverflow.com/questions/57913252/simple-code-producing-so-much-error-report/57913338#57913338", "title": "Simple code producing so much error report", "body": "<p>You can not use <code>0.05</code> as <a href=\"http://hackage.haskell.org/package/statistics-0.15.0.0/docs/Statistics-Types.html#t:PValue\" rel=\"nofollow noreferrer\"><strong><code>PValue</code></strong></a>, you can use the <a href=\"http://hackage.haskell.org/package/statistics-0.15.0.0/docs/Statistics-Types.html#v:mkPValue\" rel=\"nofollow noreferrer\"><strong><code>mkPValue :: (Ord a, Num a) =&gt; a -&gt; PValue a</code></strong></a> to construct a <code>PValue</code>:</p>\n\n<pre><code>import Statistics.Types(<b>mkPValue</b>)\n\nmain = do \n    putStrLn \"\\nResult of mannWhitneyUtest: \"\n    print $\n       mannWhitneyUtest SamplesDiffer <b>(mkPValue</b> 0.05<b>)</b> (VU.fromList sampleA) (VU.fromList sampleB)</code></pre>\n\n<p>This prints as result:</p>\n\n<pre><code>Result of mannWhitneyUtest: \nJust Significant\n</code></pre>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 57913338, "answer_count": 2, "score": 1, "last_activity_date": 1568316361, "creation_date": 1568316019, "last_edit_date": 1568316170, "question_id": 57913252, "link": "https://stackoverflow.com/questions/57913252/simple-code-producing-so-much-error-report", "title": "Simple code producing so much error report", "body": "<p>I am trying to do MannWhitney-U test as described <a href=\"http://hackage.haskell.org/package/statistics-0.15.0.0/docs/Statistics-Test-MannWhitneyU.html\" rel=\"nofollow noreferrer\">here</a>. Following is my code: </p>\n\n<pre><code>import Data.Vector as V\nimport Data.Vector.Unboxed as VU\nimport Statistics.Test.MannWhitneyU\n\nsampleA = [1.0, 2.0, 3.0, 4.0, 1.0, 2.0, 3.0, 4]\nsampleB = [2.0, 4.0, 5.0, 5.0, 3.0, 4.0, 5.0, 6]\n\nmain = do \n    putStrLn \"\\nResult of mannWhitneyUtest: \"\n    print (mannWhitneyUtest SamplesDiffer 0.05 (VU.fromList sampleA) (VU.fromList sampleB) )\n</code></pre>\n\n<p>However, the error is much longer than above code: </p>\n\n<pre><code>[1 of 1] Compiling Main             ( rnmann.hs, rnmann.o )\n\nrnmann.hs:6:12: error:\n    \u2022 Ambiguous type variable \u2018t0\u2019 arising from the literal \u20181.0\u2019\n      prevents the constraint \u2018(Fractional t0)\u2019 from being solved.\n      Relevant bindings include sampleA :: [t0] (bound at rnmann.hs:6:1)\n      Probable fix: use a type annotation to specify what \u2018t0\u2019 should be.\n      These potential instances exist:\n        instance Fractional Double -- Defined in \u2018GHC.Float\u2019\n        instance Fractional Float -- Defined in \u2018GHC.Float\u2019\n        ...plus four instances involving out-of-scope types\n        (use -fprint-potential-instances to see them all)\n    \u2022 In the expression: 1.0\n      In the expression: [1.0, 2.0, 3.0, 4.0, ....]\n      In an equation for \u2018sampleA\u2019: sampleA = [1.0, 2.0, 3.0, ....]\n\nrnmann.hs:6:47: error:\n    \u2022 Ambiguous type variable \u2018t0\u2019 arising from the literal \u20184\u2019\n      prevents the constraint \u2018(Num t0)\u2019 from being solved.\n      Relevant bindings include sampleA :: [t0] (bound at rnmann.hs:6:1)\n      Probable fix: use a type annotation to specify what \u2018t0\u2019 should be.\n      These potential instances exist:\n        instance Num Integer -- Defined in \u2018GHC.Num\u2019\n        instance Num Double -- Defined in \u2018GHC.Float\u2019\n        instance Num Float -- Defined in \u2018GHC.Float\u2019\n        ...plus two others\n        ...plus 13 instances involving out-of-scope types\n        (use -fprint-potential-instances to see them all)\n    \u2022 In the expression: 4\n      In the expression: [1.0, 2.0, 3.0, 4.0, ....]\n      In an equation for \u2018sampleA\u2019: sampleA = [1.0, 2.0, 3.0, ....]\n\nrnmann.hs:7:12: error:\n    \u2022 Ambiguous type variable \u2018t0\u2019 arising from the literal \u20182.0\u2019\n      prevents the constraint \u2018(Fractional t0)\u2019 from being solved.\n      Relevant bindings include sampleB :: [t0] (bound at rnmann.hs:7:1)\n      Probable fix: use a type annotation to specify what \u2018t0\u2019 should be.\n      These potential instances exist:\n        instance Fractional Double -- Defined in \u2018GHC.Float\u2019\n        instance Fractional Float -- Defined in \u2018GHC.Float\u2019\n        ...plus four instances involving out-of-scope types\n        (use -fprint-potential-instances to see them all)\n    \u2022 In the expression: 2.0\n      In the expression: [2.0, 4.0, 5.0, 5.0, ....]\n      In an equation for \u2018sampleB\u2019: sampleB = [2.0, 4.0, 5.0, ....]\n\nrnmann.hs:7:47: error:\n    \u2022 Ambiguous type variable \u2018t0\u2019 arising from the literal \u20186\u2019\n      prevents the constraint \u2018(Num t0)\u2019 from being solved.\n      Relevant bindings include sampleB :: [t0] (bound at rnmann.hs:7:1)\n      Probable fix: use a type annotation to specify what \u2018t0\u2019 should be.\n      These potential instances exist:\n        instance Num Integer -- Defined in \u2018GHC.Num\u2019\n        instance Num Double -- Defined in \u2018GHC.Float\u2019\n        instance Num Float -- Defined in \u2018GHC.Float\u2019\n        ...plus two others\n        ...plus 13 instances involving out-of-scope types\n        (use -fprint-potential-instances to see them all)\n    \u2022 In the expression: 6\n      In the expression: [2.0, 4.0, 5.0, 5.0, ....]\n      In an equation for \u2018sampleB\u2019: sampleB = [2.0, 4.0, 5.0, ....]\n\nrnmann.hs:11:16: error:\n    \u2022 Ambiguous type variable \u2018t0\u2019 arising from a use of \u2018mannWhitneyUtest\u2019\n      prevents the constraint \u2018(Ord t0)\u2019 from being solved.\n      Probable fix: use a type annotation to specify what \u2018t0\u2019 should be.\n      These potential instances exist:\n        instance Ord Ordering -- Defined in \u2018GHC.Classes\u2019\n        instance Ord Integer\n          -- Defined in \u2018integer-gmp-1.0.0.1:GHC.Integer.Type\u2019\n        instance Ord PositionTest -- Defined in \u2018Statistics.Test.Types\u2019\n        ...plus 26 others\n        ...plus 25 instances involving out-of-scope types\n        (use -fprint-potential-instances to see them all)\n    \u2022 In the first argument of \u2018print\u2019, namely\n        \u2018(mannWhitneyUtest\n            SamplesDiffer 0.05 (VU.fromList sampleA) (VU.fromList sampleB))\u2019\n      In a stmt of a 'do' block:\n        print\n          (mannWhitneyUtest\n             SamplesDiffer 0.05 (VU.fromList sampleA) (VU.fromList sampleB))\n      In the expression:\n        do { putStrLn\n               \"\\n\\\n               \\Result of mannWhitneyUtest: \";\n             print\n               (mannWhitneyUtest\n                  SamplesDiffer 0.05 (VU.fromList sampleA) (VU.fromList sampleB)) }\n\nrnmann.hs:11:47: error:\n    \u2022 No instance for (Fractional (Statistics.Types.PValue Double))\n        arising from the literal \u20180.05\u2019\n    \u2022 In the second argument of \u2018mannWhitneyUtest\u2019, namely \u20180.05\u2019\n      In the first argument of \u2018print\u2019, namely\n        \u2018(mannWhitneyUtest\n            SamplesDiffer 0.05 (VU.fromList sampleA) (VU.fromList sampleB))\u2019\n      In a stmt of a 'do' block:\n        print\n          (mannWhitneyUtest\n             SamplesDiffer 0.05 (VU.fromList sampleA) (VU.fromList sampleB))\n\nrnmann.hs:11:75: error:\n    \u2022 Ambiguous type variable \u2018t0\u2019 arising from a use of \u2018VU.fromList\u2019\n      prevents the constraint \u2018(Unbox t0)\u2019 from being solved.\n      Probable fix: use a type annotation to specify what \u2018t0\u2019 should be.\n      These potential instances exist:\n        instance Unbox () -- Defined in \u2018Data.Vector.Unboxed.Base\u2019\n        instance (Unbox a, Unbox b) =&gt; Unbox (a, b)\n          -- Defined in \u2018Data.Vector.Unboxed.Base\u2019\n        instance (Unbox a, Unbox b, Unbox c) =&gt; Unbox (a, b, c)\n          -- Defined in \u2018Data.Vector.Unboxed.Base\u2019\n        ...plus 9 others\n        ...plus 16 instances involving out-of-scope types\n        (use -fprint-potential-instances to see them all)\n    \u2022 In the fourth argument of \u2018mannWhitneyUtest\u2019, namely\n        \u2018(VU.fromList sampleB)\u2019\n      In the first argument of \u2018print\u2019, namely\n        \u2018(mannWhitneyUtest\n            SamplesDiffer 0.05 (VU.fromList sampleA) (VU.fromList sampleB))\u2019\n      In a stmt of a 'do' block:\n        print\n          (mannWhitneyUtest\n             SamplesDiffer 0.05 (VU.fromList sampleA) (VU.fromList sampleB))\n</code></pre>\n\n<p>I think the key problem is how to mention 0.05 as the Pvalue. </p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["haskell", "statistics", "box", "haskell-vector"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1568313383, "creation_date": 1568313383, "answer_id": 57912723, "question_id": 57912625, "link": "https://stackoverflow.com/questions/57912625/how-to-unbox-vector-with-2-values/57912723#57912723", "title": "How to unbox vector with 2 values", "body": "<p>You need to convert the list of 2-tuples to a <code>Vector</code> with <a href=\"http://hackage.haskell.org/package/vector-0.12.0.1/docs/Data-Vector-Unboxed.html#v:fromList\" rel=\"nofollow noreferrer\"><strong><code>fromList :: Unbox a =&gt; [a] -&gt; Vector a</code></strong></a> here from the <code>Data.Vector.Unboxed</code> package to create such a vector:</p>\n\n<pre><code>import Data.Vector.Unboxed as <b>VU</b>\nimport Statistics.Test.WilcoxonT\n\nmain = do\n    putStrLn \"\\nResult of wilcoxonMatchedPairTest: \"\n    print (wilcoxonMatchedPairTest AGreater (<b>VU.fromList</b> (Prelude.zip sampleA sampleB)))</code></pre>\n\n<p>or if you have two <code>Vector</code>s, you can use <a href=\"http://hackage.haskell.org/package/vector-0.12.0.1/docs/Data-Vector-Unboxed.html#v:zip\" rel=\"nofollow noreferrer\"><strong><code>zip :: (Unbox a, Unbox b) =&gt; Vector a -&gt; Vector b -&gt; Vector (a, b)</code></strong></a> to zip two <code>Vector</code>s to a <code>Vector</code> of items:</p>\n\n<pre><code>import Data.Vector.Unboxed as <b>VU</b>\nimport Statistics.Test.WilcoxonT\n\nsampleA = VU.fromList [1.0,2.0,3.0,4.0,1.0,2.0,3.0,4]\nsampleB = VU.fromList [2.0,4.0,5.0,5.0,3.0,4.0,5.0,6]\n\nmain = do\n    putStrLn \"\\nResult of wilcoxonMatchedPairTest: \"\n    print (wilcoxonMatchedPairTest AGreater (<b>VU.zip</b> sampleA sampleB))</code></pre>\n\n<p>For the given sample data, this gives us:</p>\n\n<pre><code>Prelude VU Statistics.Test.WilcoxonT&gt; main\n\nResult of wilcoxonMatchedPairTest: \nTest {testSignificance = mkPValue 1.0, testStatistics = 36.0, testDistribution = ()}\n</code></pre>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57912723, "answer_count": 1, "score": 2, "last_activity_date": 1568336759, "creation_date": 1568312965, "last_edit_date": 1568336759, "question_id": 57912625, "link": "https://stackoverflow.com/questions/57912625/how-to-unbox-vector-with-2-values", "title": "How to unbox vector with 2 values", "body": "<p>I am trying to do wilcoxonMatchedPairTest as given <a href=\"http://hackage.haskell.org/package/statistics-0.15.0.0/docs/Statistics-Test-WilcoxonT.html\" rel=\"nofollow noreferrer\">here</a>: </p>\n\n<pre><code>import Data.Vector as V\nimport Statistics.Test.WilcoxonT\n\nsampleA = [1.0,2.0,3.0,4.0,1.0,2.0,3.0,4]\nsampleB = [2.0,4.0,5.0,5.0,3.0,4.0,5.0,6]\n\nmain = do\n    putStrLn \"\\nResult of wilcoxonMatchedPairTest: \"\n    print (wilcoxonMatchedPairTest AGreater (Prelude.zip sampleA sampleB))\n</code></pre>\n\n<p>However, I am getting following error: </p>\n\n<pre><code>rnwilcox.hs:10:50: error:\n    \u2022 Couldn't match expected type \u2018Data.Vector.Unboxed.Base.Vector\n                                      (a0, a0)\u2019\n                  with actual type \u2018[(Double, Double)]\u2019\n    \u2022 In the second argument of \u2018wilcoxonMatchedPairTest\u2019, namely\n        \u2018(Prelude.zip sampleA sampleB)\u2019\n      In the first argument of \u2018print\u2019, namely\n        \u2018(wilcoxonMatchedPairTest AGreater (Prelude.zip sampleA sampleB))\u2019\n      In a stmt of a 'do' block:\n        print\n          (wilcoxonMatchedPairTest AGreater (Prelude.zip sampleA sampleB))\n</code></pre>\n\n<p>Apparently, I need to unbox the vector here. I tried using <code>#</code> as follows: </p>\n\n<pre><code>(# Prelude.zip sampleA sampleB #)\n</code></pre>\n\n<p>But it does not work. Where is the problem and how can it be solved? Thanks for your help.</p>\n"}, {"tags": ["haskell", "statistics", "t-test"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568309998, "post_id": 57911975, "comment_id": 102243251, "body": "The data constructor is <code>StudenTTest</code>, not <code>StudentT</code>."}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568310123, "post_id": 57911975, "comment_id": 102243303, "body": "Ok. Yes, it works with <code>studentTTest</code>."}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 3, "last_activity_date": 1568310161, "creation_date": 1568310161, "answer_id": 57912017, "question_id": 57911975, "link": "https://stackoverflow.com/questions/57911975/why-data-constructor-is-not-in-scope-here/57912017#57912017", "title": "Why data constructor is not in scope here", "body": "<p>I think you have to change the constructor to <code>studentTTest</code>    </p>\n\n<pre><code>main = print $ studentTTest sampleA sampleB SamplesDiffer\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1568310236, "post_id": 57912022, "comment_id": 102243365, "body": "is not that with lower case?"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1568310416, "last_edit_date": 1568310416, "creation_date": 1568310192, "answer_id": 57912022, "question_id": 57911975, "link": "https://stackoverflow.com/questions/57911975/why-data-constructor-is-not-in-scope-here/57912022#57912022", "title": "Why data constructor is not in scope here", "body": "<p>You made two mistakes here:</p>\n\n<ol>\n<li>the function is <code>studenT<b>Test</b></code>, not <code>StudentT</code>, that is the name of the <em>type</em> constructor; and</li>\n<li>the constructor takes a <code>PositionTest</code> foollowed by two vectors.</li>\n</ol>\n\n<pre><code>import Data.Vector as V\nimport Statistics.Test.StudentT\n\nsampleA = V.fromList [1.0,2.0,3.0,4.0,1.0,2.0,3.0,4]\nsampleB = V.fromList [2.0,4.0,5.0,5.0,3.0,4.0,5.0,6]\n\nmain = print (studentTTest SamplesDiffer sampleA sampleB)</code></pre>\n\n<p>For the given sample data, this gives us:</p>\n\n<pre><code>Prelude V Statistics.Test.StudentT&gt; main\nJust (Test {testSignificance = mkPValue 1.351738152442984e-2, testStatistics = -2.8243130467507513, testDistribution = studentT 14.0})\n</code></pre>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57912022, "answer_count": 2, "score": 2, "last_activity_date": 1568310416, "creation_date": 1568309945, "question_id": 57911975, "link": "https://stackoverflow.com/questions/57911975/why-data-constructor-is-not-in-scope-here", "title": "Why data constructor is not in scope here", "body": "<p>I am trying to do Student T-test as provided <a href=\"http://hackage.haskell.org/package/statistics-0.15.0.0/docs/Statistics-Test-StudentT.html\" rel=\"nofollow noreferrer\">here</a>: </p>\n\n<pre><code>import Data.Vector as V\nimport Statistics.Test.StudentT\nsampleA = V.fromList [1.0,2.0,3.0,4.0,1.0,2.0,3.0,4]\nsampleB = V.fromList [2.0,4.0,5.0,5.0,3.0,4.0,5.0,6]\nmain = print $ StudentT sampleA sampleB SamplesDiffer\n</code></pre>\n\n<p>However, I am getting following error: </p>\n\n<pre><code>rnunttest.hs:8:16: error:\n    Data constructor not in scope:\n      StudentT :: Vector Double -&gt; Vector Double -&gt; PositionTest -&gt; a0\n</code></pre>\n\n<p>Where is the problem and how can it be solved? Thanks for your help. </p>\n"}, {"tags": ["haskell"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 6, "creation_date": 1568303902, "post_id": 57910462, "comment_id": 102240666, "body": "You don&#39;t say that data B is also data A in Haskell. Without further details about your <i>goals</i> (rather than the first <i>implementation plan</i> that comes to mind for fulfilling those goals), there&#39;s basically nothing more that can be said about alternatives."}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "reply_to_user": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1568304052, "post_id": 57910462, "comment_id": 102240733, "body": "Thank you. I have a system which I want to design as:  class A { .... }; class B : public A {}; class C : public A {}; Where A has no functions, only data members.   If this isn&#39;t doable in Haskell, how do we go about designing systems where this is  the way to do in C++?   (Thanks for the reply again)"}, {"owner": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 5, "creation_date": 1568305251, "post_id": 57910462, "comment_id": 102241287, "body": "The Haskell approach is to throw out everything you&#39;ve heard about object-oriented design and work from statements about data. What is the input? What&#39;s is the output? How do I transform between them?"}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 5, "creation_date": 1568305329, "post_id": 57910462, "comment_id": 102241321, "body": "There is no subtyping in Haskell like there is in C++. We might model that scenario by composition rather than inheritance, in C++ lingo. Values of type <code>B</code> will contain a value of type <code>A</code>, but will not be implicitly convertible to type <code>A</code>. A hard part of learning a new language is to avoid &quot;thinking in the old language&quot; and trying to apply the same idioms. Haskell and C++ are so radically different that learning any one after the other requires to retrain one&#39;s habits, requiring as much effort as if one were learning their very first programming language."}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "reply_to_user": {"reputation": 24028, "user_id": 383200, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9dc722f936cb1059adaae4fe39c07f0?s=128&d=identicon&r=PG", "display_name": "Carl", "link": "https://stackoverflow.com/users/383200/carl"}, "edited": false, "score": 0, "creation_date": 1568305906, "post_id": 57910462, "comment_id": 102241569, "body": "@Carl: Let me try to frame this differently - B has a lot of data members, C has a lot of data members and a very significant number of them is common. Further, I want to do: type Either B C = A and manipulate data with A, basically I will have a list of As and then, map some functions on that list. Pardon me if I am not making sense."}, {"owner": {"reputation": 11496, "user_id": 5438433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OJ1qY.png?s=128&g=1", "display_name": "TheInnerLight", "link": "https://stackoverflow.com/users/5438433/theinnerlight"}, "edited": false, "score": 4, "creation_date": 1568306112, "post_id": 57910462, "comment_id": 102241657, "body": "If <code>B</code> and <code>C</code> have a lot of common data, then why not create <code>D</code> that contains the common elements and <code>B</code> and <code>C</code> each contain a <code>D</code>?"}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "reply_to_user": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1568306193, "post_id": 57910462, "comment_id": 102241690, "body": "@chi:  Thank you. I am trying to learn but somehow keep on getting stuck. I have some classes B, C, D all of them will contain A&#39;s data in that case by composition. Now, can I create a list of B, C ... D and map a function f on the underlying A in that way? How would you go about doing that."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1568306983, "post_id": 57910462, "comment_id": 102242006, "body": "A class in Haskell is <i>not</i> the same as a class in Java/C#/... it is more what would be an interface in Java. You <code>data_member</code> should problaby have type <code>a -&gt; Int</code>. And you should furthermore specify that <code>data_member = x</code> to fix this, but that will likely not help you with what you aim to achieve."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1568386058, "post_id": 57910462, "comment_id": 102269183, "body": "@PratyushRathore <i>&quot;map a function <code>f</code> on the underlying <code>A</code>&quot;</i> remember, you <i>can&#39;t</i> modify a given value, only create a modified copy of it."}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1568460115, "post_id": 57910462, "comment_id": 102286090, "body": "@WillNess: Yes. That I knew. Thanks :)."}], "answers": [{"tags": [], "owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "is_accepted": false, "score": 3, "last_activity_date": 1568308799, "creation_date": 1568308799, "answer_id": 57911707, "question_id": 57910462, "link": "https://stackoverflow.com/questions/57910462/how-to-say-a-data-of-type-a-is-also-of-type-b-in-haskell/57911707#57911707", "title": "How to say a data of type A is also of type B in Haskell?", "body": "<p>You can create a new type containing both:</p>\n\n<pre><code>data A = A Int\ndata B = B Int\n\ndata AB = MakeA A | MakeB B\n\n:t MakeA $ A 4\nMakeA $ A 4 :: AB\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1568310202, "post_id": 57911913, "comment_id": 102243344, "body": "super great answer here"}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "edited": false, "score": 1, "creation_date": 1568324450, "post_id": 57911913, "comment_id": 102248417, "body": "Got it. It is the function which implements the virtual part of it. Though, I am not sure if I would not be confused tomorrow."}, {"owner": {"reputation": 34692, "user_id": 356440, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d16fc2844c1d9f8f815f318734554266?s=128&d=identicon&r=PG", "display_name": "Stephane Rolland", "link": "https://stackoverflow.com/users/356440/stephane-rolland"}, "reply_to_user": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "edited": false, "score": 0, "creation_date": 1568355748, "post_id": 57911913, "comment_id": 102254626, "body": "@PratyushRathore Haskell is different. Start using the words &quot;Pattern Matching&quot; and &quot;Destructuring&quot; instead of virtuality: it is different indeed. Here values of type PureVirtualA, can be destructured into a (ConcreteB x y) or a (ConcreteC z). This operation is called pattern match. Nothing beats training and repetition exercise: Do it on really small examples, several times, tomorrow or at some days of interval, and you will get it, I assure you. It is simpler than the C++ inheritance system. Much simpler. Play with it, your brain will get it. You can also think of it as an enhanced enum type"}, {"owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "edited": false, "score": 0, "creation_date": 1568358513, "post_id": 57911913, "comment_id": 102255656, "body": "@StephaneRolland: Thanks. I am definitely going to put more time into it."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1568385706, "post_id": 57911913, "comment_id": 102268987, "body": "&quot;enhanced enum type&quot; a.k.a. <a href=\"https://en.wikipedia.org/wiki/Tagged_union\" rel=\"nofollow noreferrer\">tagged union</a>. :)"}], "tags": [], "owner": {"reputation": 34692, "user_id": 356440, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d16fc2844c1d9f8f815f318734554266?s=128&d=identicon&r=PG", "display_name": "Stephane Rolland", "link": "https://stackoverflow.com/users/356440/stephane-rolland"}, "is_accepted": true, "score": 6, "last_activity_date": 1568391254, "last_edit_date": 1568391254, "creation_date": 1568309695, "answer_id": 57911913, "question_id": 57910462, "link": "https://stackoverflow.com/questions/57910462/how-to-say-a-data-of-type-a-is-also-of-type-b-in-haskell/57911913#57911913", "title": "How to say a data of type A is also of type B in Haskell?", "body": "<p>Like Damian suggests, use a Sum type: The <code>|</code> type operator/constructor.</p>\n\n<p>Using ADT (Algebraic Data Types) is a great strength of Haskell. Dive blindlessly into using them whenever you can, I think all programmer learning haskell with an Imperative background come to this same conclusion: ADT are incredibly useful and concise. </p>\n\n<p>Coming from a C++ background, when I first groked the Sum type I was translating it to C++ in my mind this way:</p>\n\n<pre><code>data PureVirtualClassA = ConcreteClassB Member1 Member2 | ConcreteClassC Member3\n</code></pre>\n\n<p>where Member1, Member2, and Member3 would be the types of a struct member. You can simplify this example with all the three being Int:</p>\n\n<pre><code>data PureVirtualClassA = ConcreteClassB Int Int | ConcreteClassC Int\n</code></pre>\n\n<p>(If you want a named data member, you should go for using Records, but they are not always needed) </p>\n\n<p>Now you can use it in a function, just like you would use C++ polymorphism, where ConcreteClassB and ConcreteClassC would be deriving from PureVirtualClassA:</p>\n\n<pre><code>myFunction :: PureVirtualClassA -&gt; Int\nmyFunction (ConcreteClassB x y) = x + y\nmyFunction (ConcreteClassC z) = z\n</code></pre>\n\n<p>IMPORTANT NOTE: In those examples for the C++ programmer I have used the word Class with the C++ meaning! Don't use the word Class this way in Haskell. A class in Haskell is something different, it's more like an interface, but the comparison does not stand. </p>\n"}], "owner": {"reputation": 148, "user_id": 2477035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1380a31e6e8acf9a0aa4a405dac33e00?s=128&d=identicon&r=PG", "display_name": "Pratyush Rathore", "link": "https://stackoverflow.com/users/2477035/pratyush-rathore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 57911913, "answer_count": 2, "score": 5, "last_activity_date": 1568391254, "creation_date": 1568303599, "question_id": 57910462, "link": "https://stackoverflow.com/questions/57910462/how-to-say-a-data-of-type-a-is-also-of-type-b-in-haskell", "title": "How to say a data of type A is also of type B in Haskell?", "body": "<p>I am learning haskell and am having trouble following the line of thought. I am trying to think in C++ terms and I am unable to find the equivalent of C++ subclass in Haskell. How do I say data B is also data A for simple structs A and B?</p>\n\n<p>Background: I have read LearnYouAHaskell at least thrice. I am able to write basic Haskell code, but nothing very advanced and am fairly experienced working in C++. </p>\n\n<p>Attempts: I was trying to think in terms of defining A as a type class and making B an instance of A. However, I don't want to write new definition of the method/data member and just want to use the definition of A. I am unable to comprehend the error messages. </p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>-- Trial.hs \n\nclass A a where \n    data_member :: Int \n\ndata B = B { \n    x :: Int \n}\n\ninstance A B;\n</code></pre>\n\n<pre><code>Trial.hs:2:9: error:\n    \u2022 Could not deduce (A a0)\n      from the context: A a\n        bound by the type signature for:\n                   data_member :: A a =&gt; Int\n        at Trial.hs:2:9-26\n      The type variable \u2018a0\u2019 is ambiguous\n    \u2022 In the ambiguity check for \u2018data_member\u2019\n      To defer the ambiguity check to use sites, enable AllowAmbiguousTypes\n      When checking the class method: data_member :: forall a. A a =&gt; Int\n      In the class declaration for \u2018A\u2019\n</code></pre>\n"}, {"tags": ["haskell", "memory-leaks", "memory-profiling"], "comments": [{"owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "edited": false, "score": 0, "creation_date": 1568392742, "post_id": 57910077, "comment_id": 102272406, "body": "Just to clarify, I tracked down the actual problem, and it was neither the fault of GHC or of Conduit. It was me forgetting that several months ago, I had prototyped the code to read in an entire CSV file into memory. Now that I have much larger files, this is an issue. conduit-csv provides <code>intoCSV</code> for streaming reads."}], "owner": {"reputation": 7711, "user_id": 3096687, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/31c95c0c159392d4c16fca6b55b5848d?s=128&d=identicon&r=PG", "display_name": "bbarker", "link": "https://stackoverflow.com/users/3096687/bbarker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1568392636, "creation_date": 1568302255, "last_edit_date": 1568392636, "question_id": 57910077, "link": "https://stackoverflow.com/questions/57910077/why-does-a-haskell-profiling-graph-indicate-decreasing-memory-when-it-keeps-gro", "title": "Why does a Haskell profiling graph indicate decreasing memory, when it keeps growing according to the OS?", "body": "<p>I, unfortunately, have a memory leak that is most likely <s>due to <a href=\"https://www.well-typed.com/blog/2016/09/sharing-conduit/\" rel=\"nofollow noreferrer\">my use of Conduit</a></s> (see comment below). I tried out profiling for the first time, and ran the exe for about 30 minutes (maybe longer). During this time, according to <code>top</code>, the memory use steadily climbed to about 8 GB.</p>\n\n<p>I canceled the execution with <code>Ctrl-C</code>, and received this message:</p>\n\n<pre><code> 207,273,173,680 bytes allocated in the heap\n3,249,532,925,152 bytes copied during GC\n   4,354,654,920 bytes maximum residency (1647 sample(s))\n      43,810,104 bytes maximum slop\n            4152 MB total memory in use (0 MB lost due to fragmentation)\n\n                                     Tot time (elapsed)  Avg pause  Max pause\n  Gen  0     113916 colls,     0 par   26.122s  25.869s     0.0002s    0.0084s\n  Gen  1      1647 colls,     0 par   4052.216s  4015.805s     2.4383s    7.0176s\n\n  TASKS: 5 (1 bound, 4 peak workers (4 total), using -N1)\n\n  SPARKS: 0(0 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)\n\n  INIT    time    0.007s  (  0.008s elapsed)\n  MUT     time    0.000s  (-1697.639s elapsed)\n  GC      time  2194.239s  (2175.089s elapsed)\n  RP      time    0.000s  (  0.000s elapsed)\n  PROF    time  1884.099s  (1866.585s elapsed)\n  EXIT    time  1884.099s  (1866.586s elapsed)\n  Total   time  4246.975s  (4210.628s elapsed)\n\n  Alloc rate    0 bytes per MUT second\n\n  Productivity -40.4% of total user, -40.3% of total elapsed\n</code></pre>\n\n<p>The resulting graph, generated by <code>hp2ps -e8in -c FarmDataServer.exe.hp</code>, only shows about 30 minutes, and actually shows a largely decreasing trend ... unless the graph isn't showing cumulative memory state but only allocations in a particular window of time?</p>\n\n<p><a href=\"https://i.stack.imgur.com/6hCPj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6hCPj.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["haskell", "ghci"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 7, "creation_date": 1568278331, "post_id": 57903080, "comment_id": 102226266, "body": "<code>(-&gt;)</code> is a type constructor. You can investigate it with <code>:k (-&gt;)</code>"}, {"owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568278454, "post_id": 57903080, "comment_id": 102226319, "body": "Thank you! Can you also shed some light on the GHC.Prim mistery?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568280006, "post_id": 57903080, "comment_id": 102227123, "body": "<code>GCH.Prim</code> are the primitive types."}, {"owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1568280667, "post_id": 57903080, "comment_id": 102227493, "body": "I know, but then why <code>:info</code> says that <code>data (-&gt;)</code> is defined in GHC.Prim ? Where is <code>data (-&gt;)</code> actually defined?"}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 6, "creation_date": 1568280777, "post_id": 57903080, "comment_id": 102227556, "body": "I believe the answer is, <i>it isn&#39;t</i> really defined. In older Haskell versions, it wouldn&#39;t even have been possible. It&#39;s really just a compiler build-in."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 6, "creation_date": 1568280859, "post_id": 57903080, "comment_id": 102227608, "body": "@MarcoFaustinelli: it is defined in the compiler. The module does not really exists."}, {"owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "edited": false, "score": 0, "creation_date": 1568281095, "post_id": 57903080, "comment_id": 102227743, "body": "Fair enough. Thank you. Can I assume the same for <code>TYPE</code> ?"}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 5, "creation_date": 1568281224, "post_id": 57903080, "comment_id": 102227809, "body": "@MarcoFaustinelli To expand on WillemVanOnsem\u2019s statement, <code>GHC.Prim</code> contains <a href=\"http://hackage.haskell.org/package/ghc-prim-0.5.3/docs/src/GHC.Prim.html\" rel=\"nofollow noreferrer\">a whole lot of definitions for primitive types</a>, but just defines them as <a href=\"https://wiki.haskell.org/Bottom\" rel=\"nofollow noreferrer\">_|_</a>, and leaves the actual definitions to the compiler itself."}, {"owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "reply_to_user": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "edited": false, "score": 0, "creation_date": 1568282185, "post_id": 57903080, "comment_id": 102228332, "body": "@bradrn - thank you for mentioning <code>_|_</code>. On the other hand, <code>(-&gt;)</code> (or many other variations I tried on that) is not mentioned in the page you linked. So the info provided by <code>:info (-&gt;)</code> seems to be <a href=\"https://www.youtube.com/watch?v=SEbwZfkeIt8\" rel=\"nofollow noreferrer\">not entirely accurate</a>..."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1568288178, "post_id": 57903080, "comment_id": 102231593, "body": "Unless you are dealing with advanced stuff, you can pretend that <code>(-&gt;) :: * -&gt; * -&gt; *</code>, so <code>(-&gt;)</code> takes two types and returns a type. More in depth: <code>*</code> is just another name for <code>Type</code>, or the lower level <code>TYPE &#39;LiftedRep</code>. In the general case <code>(-&gt;)</code> is &quot;polykinded&quot; as if it were something like <code>(-&gt;) :: forall rep. TYPE rep -&gt; TYPE rep -&gt; *</code> which allows specializations like <code>(-&gt;) :: TYPE &#39;UnliftedRep -&gt; TYPE &#39;UnliftedRep -&gt; *</code> which are used on unlifted types e.g.  <code>(Int# -&gt; Int#) :: *</code>. This is used to enable the low-level optimizations involving unlifted primitive values/tuples/sums."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1568303107, "post_id": 57903080, "comment_id": 102240324, "body": "<code>GHC.Prim</code> has no source code anywhere. It&#39;s completely generated by the compiler. The bogus definitions you&#39;ll see if you look at the source link in the Haddock documentation exist only in that documentation. Some things that are assigned a &quot;home module&quot; of <code>GHC.Prim</code> don&#39;t even appear in its documentation because it&#39;s too inconvenient to make that happen. General rule: <code>GHC.Prim</code> is a lie that exists for the convenience of compiler implementers. With rare temporary exceptions, you shouldn&#39;t use it and don&#39;t need to bother looking at it."}, {"owner": {"reputation": 44013, "user_id": 1477667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/trgKM.jpg?s=128&g=1", "display_name": "dfeuer", "link": "https://stackoverflow.com/users/1477667/dfeuer"}, "edited": false, "score": 1, "creation_date": 1568303128, "post_id": 57903080, "comment_id": 102240335, "body": "When GHCi tells you something is defined there, read that as &quot;from the sky&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "is_accepted": true, "score": 1, "last_activity_date": 1568978159, "last_edit_date": 1568978159, "creation_date": 1568977231, "answer_id": 58027101, "question_id": 57903080, "link": "https://stackoverflow.com/questions/57903080/investigating-with-ghci-and-trying-to-get-to-its-roots/58027101#58027101", "title": "Investigating (-&gt;) with ghci and trying to get to its roots", "body": "<p>Since answers have been given in the comments, I sum them up here:</p>\n\n<ul>\n<li><p><code>(-&gt;)</code> is a type constructor. You can investigate it with <code>:k (-&gt;)</code> <a href=\"https://stackoverflow.com/users/67579/willem-van-onsem\">@Willem van Onsem</a></p></li>\n<li><p><code>GHC.Prim</code> has no source code anywhere. It is completely generated by the compiler and you don't need to bother looking at it. When GHCi tells you something is defined there, read that as saying it comes \"from the sky\" <a href=\"https://stackoverflow.com/users/1477667/dfeuer\">@dfeuer</a></p></li>\n</ul>\n"}], "owner": {"reputation": 2695, "user_id": 1924798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1ba7bffbe41ca39353b6f8bbfd4624a8?s=128&d=identicon&r=PG", "display_name": "Marco Faustinelli", "link": "https://stackoverflow.com/users/1924798/marco-faustinelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 58027101, "answer_count": 1, "score": 6, "last_activity_date": 1568978159, "creation_date": 1568278262, "last_edit_date": 1568278355, "question_id": 57903080, "link": "https://stackoverflow.com/questions/57903080/investigating-with-ghci-and-trying-to-get-to-its-roots", "title": "Investigating (-&gt;) with ghci and trying to get to its roots", "body": "<p>I am trying to use ghci to investigate type <code>(-&gt;)</code>.</p>\n\n<p>I'd love to understand why I can ask <code>:t (+)</code>, but not <code>:t (-&gt;)</code>:</p>\n\n<pre><code>Prelude&gt; :t (-&gt;)\n&lt;interactive&gt;:1:2: error: parse error on input \u2018-&gt;\u2019\n</code></pre>\n\n<p>Luckily, both operators allow investigation using <code>:i</code>, so I presume it's all because <code>(+)</code> is a method of class Num, whereas <code>(-&gt;)</code> is a data.</p>\n\n<p>Diving deeper into <code>(-&gt;)</code>:</p>\n\n<pre><code>Prelude&gt; :i (-&gt;)\ndata (-&gt;) (a :: TYPE q) (b :: TYPE r)   -- Defined in \u2018GHC.Prim\u2019\ninfixr 0 -&gt;\ninstance Applicative ((-&gt;) a) -- Defined in \u2018GHC.Base\u2019\ninstance Functor ((-&gt;) r) -- Defined in \u2018GHC.Base\u2019\ninstance Monad ((-&gt;) r) -- Defined in \u2018GHC.Base\u2019\ninstance Monoid b =&gt; Monoid (a -&gt; b) -- Defined in \u2018GHC.Base\u2019\ninstance Semigroup b =&gt; Semigroup (a -&gt; b) -- Defined in \u2018GHC.Base\u2019\n</code></pre>\n\n<p>But there is no trace of <code>data (-&gt;)</code> in the <a href=\"http://hackage.haskell.org/package/ghc-prim-0.5.3/docs/GHC-Prim.html\" rel=\"noreferrer\">Hackage page for GHC.Prim</a>. Possibly I am checking the wrong language version, but AFAIS 0.5.3 is the most recent one, and my ghci version is the latest.</p>\n\n<p><strong>Where can I find the declaration of <code>data (-&gt;)</code>?</strong></p>\n\n<p>Eventually, I'd like to read about <code>TYPE</code>, but all the pages I retrieve on Google are talking of <code>type</code>.</p>\n\n<p><strong>Where can I find information about <code>TYPE</code>?</strong></p>\n"}, {"tags": ["windows", "haskell", "installation"], "comments": [{"owner": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 0, "creation_date": 1568289929, "post_id": 57902098, "comment_id": 102232577, "body": "Since Haskell platform comes with <code>stack</code>, you can just use <code>stack ghci</code> to invoke ghci. But, I would just directly use stack directly: <a href=\"https://docs.haskellstack.org/en/stable/README/#how-to-install\" rel=\"nofollow noreferrer\">docs.haskellstack.org/en/stable/README/#how-to-install</a>"}, {"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "reply_to_user": {"reputation": 43759, "user_id": 1651941, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a513bc1fa519d2fcf5e4e0d9b5500101?s=128&d=identicon&r=PG", "display_name": "Sibi", "link": "https://stackoverflow.com/users/1651941/sibi"}, "edited": false, "score": 0, "creation_date": 1568291077, "post_id": 57902098, "comment_id": 102233221, "body": "But simple Windows install should work perfectly."}, {"owner": {"reputation": 46777, "user_id": 1100107, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8789d3da0b482bcd8e562bfdf3687c74?s=128&d=identicon&r=PG", "display_name": "St&#233;phane Laurent", "link": "https://stackoverflow.com/users/1100107/st%c3%a9phane-laurent"}, "edited": false, "score": 0, "creation_date": 1568293512, "post_id": 57902098, "comment_id": 102234600, "body": "Normally they are in <code>C:\\Program Files\\Haskell Platform\\8.6.5\\bin</code>. Try to reinstall."}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 560, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568277738, "creation_date": 1568274667, "last_edit_date": 1568277738, "question_id": 57902098, "link": "https://stackoverflow.com/questions/57902098/no-ghc-or-ghci-commands-after-installing-in-windows", "title": "No ghc or ghci commands after installing in Windows", "body": "<p>I downloaded HaskellPlatform-core setup file from <a href=\"https://www.haskell.org/platform/\" rel=\"nofollow noreferrer\">here</a> and installed it. </p>\n\n<p>The installation process went all right but on trying in a terminal, there is no command ghc or ghci. There are commands runghc and runhaskell, but they give error: </p>\n\n<pre><code>runghc: C:\\Program Files\\Haskell Platform\\8.6.5\\bin\\ghc-stage2.exe: rawSystem: does not exist (No such file or directory)\n</code></pre>\n\n<p>The bin directory contains following files: </p>\n\n<pre><code> Directory of C:\\Program Files\\Haskell Platform\\8.6.5\\bin\n\n12-09-2019  12:39    &lt;DIR&gt;          .\n12-09-2019  12:39    &lt;DIR&gt;          ..\n23-04-2019  11:28                 0 haddock.exe\n23-04-2019  11:28           442,498 hp2ps.exe\n23-04-2019  11:28        20,918,891 hpc.exe\n23-04-2019  11:28        19,891,856 hsc2hs.exe\n23-04-2019  11:28        16,968,286 runghc.exe\n23-04-2019  11:28        16,968,286 runhaskell.exe\n               6 File(s)     75,189,817 bytes\n               2 Dir(s)   1,848,975,360 bytes free\n</code></pre>\n\n<p>ghc.exe and ghci.exe are not there. Also there is no file named ghc-stage2.exe in any of the directories under HaskellPlatform.</p>\n\n<p>Where is the problem and how can it be solved? Thanks for your help.</p>\n\n<p>Edit: The path automatically added by setup program includes: </p>\n\n<pre><code>C:\\Program Files\\Haskell Platform\\8.6.5\\lib\\extralibs\\bin;\nC:\\Program Files\\Haskell Platform\\8.6.5\\bin\nC:\\Program Files\\Haskell Platform\\8.6.5\\mingw\\bin\n</code></pre>\n"}, {"tags": ["haskell", "default", "monads", "ghci"], "comments": [{"owner": {"reputation": 126897, "user_id": 791604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ce991df7a056248d5e4f6fc3659ba733?s=128&d=identicon&r=PG", "display_name": "Daniel Wagner", "link": "https://stackoverflow.com/users/791604/daniel-wagner"}, "edited": false, "score": 0, "creation_date": 1568304837, "post_id": 57899103, "comment_id": 102241075, "body": "See also <a href=\"https://stackoverflow.com/q/53031608/791604\">What is the default type evaluation of MonadPlus in Haskell?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 9528586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qdnxs.jpg?s=128&g=1", "display_name": "Namudon&#39;tdie", "link": "https://stackoverflow.com/users/9528586/namudontdie"}, "edited": false, "score": 8, "creation_date": 1568257379, "post_id": 57899118, "comment_id": 102219079, "body": "I think your answer explains another behavior that I observed: GHCI displays the same result for <code>return (Just 1)</code> and <code>Just 1 &gt;&gt;= return</code>. The former expression itself evaluates to <code>IO (Just 1)</code> and it is displayed as <code>Just 1</code> since it is wrapped with a <code>IO</code> monad. In the latter case the expression evaluated to <code>Just 1</code> and GHCI just printed the value out."}, {"owner": {"reputation": 7817, "user_id": 7345298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9477d048c5c29b16307b3356146d497a?s=128&d=identicon&r=PG&f=1", "display_name": "bradrn", "link": "https://stackoverflow.com/users/7345298/bradrn"}, "reply_to_user": {"reputation": 183, "user_id": 9528586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qdnxs.jpg?s=128&g=1", "display_name": "Namudon&#39;tdie", "link": "https://stackoverflow.com/users/9528586/namudontdie"}, "edited": false, "score": 3, "creation_date": 1568257817, "post_id": 57899118, "comment_id": 102219158, "body": "That is correct @Namudon&#39;tdie. In general, GHCi automatically runs any <code>IO a</code> value you give it, and then prints out the value it returns; if you give it a non-<code>IO</code> type, it will just print the result (if it can)."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": true, "score": 14, "last_activity_date": 1568274229, "last_edit_date": 1568274229, "creation_date": 1568256986, "answer_id": 57899118, "question_id": 57899103, "link": "https://stackoverflow.com/questions/57899103/i-think-i-found-a-non-existent-monad/57899118#57899118", "title": "I think I found a &quot;non-existent monad&quot;", "body": "<p><code>return 1</code> isn't just <code>1</code>. What you think is the \"non-existent monad\" is really <code>IO</code>. When you use <code>return 1</code>, GHCi is assuming that you mean <code>IO</code>, and then helpfully executing the IO expression and displaying the result. You get a type error with <code>1 &gt;&gt;= ...</code> because <code>1</code> isn't a monad.</p>\n\n<p>As <a href=\"https://stackoverflow.com/users/7345298/bradrn\">@bradrn</a> mentions <a href=\"https://stackoverflow.com/questions/57899103/i-think-i-found-a-non-existent-monad#comment102219158_57899118\">in the comments</a>, in general GHCi automatically runs any <em><code>IO a</code></em> value you give it, and then prints out the value <em>it</em> returns; if you give GHCi a non-<em><code>IO</code></em> type value, it will just print that value (if it can).</p>\n\n<p>As an aside, there is a monad called <code>Identity</code> which essentially does work as a \"non-existent monad\" as you put it, in that <code>return x</code> is isomorphic to <code>x</code> no matter what you put in it. It doesn't get used automatically, though; you'd need to manually wrap and unwrap it to use it.</p>\n"}], "owner": {"reputation": 183, "user_id": 9528586, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qdnxs.jpg?s=128&g=1", "display_name": "Namudon&#39;tdie", "link": "https://stackoverflow.com/users/9528586/namudontdie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 1, "accepted_answer_id": 57899118, "answer_count": 1, "score": 4, "last_activity_date": 1568274429, "creation_date": 1568256818, "last_edit_date": 1568274429, "question_id": 57899103, "link": "https://stackoverflow.com/questions/57899103/i-think-i-found-a-non-existent-monad", "title": "I think I found a &quot;non-existent monad&quot;", "body": "<p>I found a weird feature of Haskell which made me believe I am thinking in the wrong way. I think in Haskell, there should be some <em>\"non-existent\"</em> monad. This is because of the following.</p>\n\n<pre><code>Prelude&gt; return 1\n1\nPrelude&gt; return 1 &gt;&gt;= \\x -&gt; if even x then return True else return False\nFalse\n</code></pre>\n\n<p><code>&gt;&gt;=</code> is of type <code>m a -&gt; (a -&gt; m b) -&gt; m b</code> where <code>m</code> can be any monad. My theory is this: since <code>return 1</code> evaluates to a mere <code>1</code>, <code>return 1</code> can be thought of as a <code>1</code> lifted to a value wrapped inside of a <em>\"non-existent\"</em> monad. Haskell captured this fact and evaluated the entire expression</p>\n\n<pre><code>return 1 &gt;&gt;= \\x -&gt; if even x then return True else return False\n</code></pre>\n\n<p>to <code>False</code> since it has to yield a <em>\"non-existent <code>False</code>\"</em> which is a mere <code>False</code>.</p>\n\n<p>However, I have never heard about such <em>\"non-existent\"</em> monads before.</p>\n\n<p>I am sure I am theorizing it in the wrong way, because if <em>\"non-existent <code>1</code>\"</em> is just <code>1</code>, the following expression must be type consistent, but it is not. It is a modified version of the above one.</p>\n\n<pre><code>1 &gt;&gt;= \\x -&gt; if even x then return True else return False\n\n&lt;interactive&gt;:57:1: error:\n    \u2022 Could not deduce (Integral a0)\n      from the context: (Monad m, Integral a, Num (m a))\n        bound by the inferred type for \u2018it\u2019:\n                   forall (m :: * -&gt; *) a. (Monad m, Integral a, Num (m a)) =&gt; m Bool\n        at &lt;interactive&gt;:57:1-56\n      The type variable \u2018a0\u2019 is ambiguous\n    \u2022 In the ambiguity check for the inferred type for \u2018it\u2019\n      To defer the ambiguity check to use sites, enable AllowAmbiguousTypes\n      When checking the inferred type\n        it :: forall (m :: * -&gt; *) a.\n              (Monad m, Integral a, Num (m a)) =&gt;\n              m Bool\n</code></pre>\n\n<p>So, there must be a contradiction in my theory. What am I missing?</p>\n"}, {"tags": ["haskell", "statistics", "chi-squared"], "answers": [{"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568291246, "post_id": 57899133, "comment_id": 102233311, "body": "It does not work properly. Pl see edit in my question above."}, {"owner": {"reputation": 66224, "user_id": 180286, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/tAXU2.jpg?s=128&g=1", "display_name": "Fyodor Soikin", "link": "https://stackoverflow.com/users/180286/fyodor-soikin"}, "edited": false, "score": 0, "creation_date": 1568297549, "post_id": 57899133, "comment_id": 102237090, "body": "That&#39;s not how parameters are passed to functions in Haskell. Try writing <i>exactly</i> what @JosephSible suggested."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1568257113, "creation_date": 1568257113, "answer_id": 57899133, "question_id": 57898864, "link": "https://stackoverflow.com/questions/57898864/chi-square-test-not-able-to-match-types/57899133#57899133", "title": "Chi-square test - not able to match types", "body": "<p><code>chi2test</code> takes two arguments, and you're only passing it one. Instead of calling <code>chi2test sample</code>, call <code>chi2test df sample</code>, where <code>df</code> is the number of additional degrees of freedom.</p>\n"}, {"comments": [{"owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568303568, "post_id": 57908370, "comment_id": 102240516, "body": "This is exactly what I was looking for. Thanks. Do you think Haskell is good for scientific computing? Any advantages over Python?"}, {"owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "reply_to_user": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "edited": false, "score": 0, "creation_date": 1568841518, "post_id": 57908370, "comment_id": 102407483, "body": "I don&#39;t do much scientific computing in Haskell myself.  You may be interested in the <a href=\"https://github.com/Gabriel439/post-rfc/blob/master/sotu.md#data-science\" rel=\"nofollow noreferrer\">Data science</a> and <a href=\"https://github.com/Gabriel439/post-rfc/blob/master/sotu.md#numerical-programming\" rel=\"nofollow noreferrer\">Numerical programming</a> entries in Gabriel Gonzales&#39; &quot;State of the Haskell Ecosystem&quot;.  Also, Google for &quot;scientific computing in Haskell&quot; and read some of the resulting blog hits."}], "tags": [], "owner": {"reputation": 34158, "user_id": 7203016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ybAMw.png?s=128&g=1", "display_name": "K. A. Buhr", "link": "https://stackoverflow.com/users/7203016/k-a-buhr"}, "is_accepted": true, "score": 4, "last_activity_date": 1568297475, "last_edit_date": 1568297475, "creation_date": 1568296685, "answer_id": 57908370, "question_id": 57898864, "link": "https://stackoverflow.com/questions/57898864/chi-square-test-not-able-to-match-types/57908370#57908370", "title": "Chi-square test - not able to match types", "body": "<p>The <code>chi2test</code> function performs a general chi-square goodness-of-fit test, not a chi-square test on a 2x2 contingency table.  It expects a set of pairs representing the \"observed\" actual counts and the \"expected\" theoretical mean counts under the null hypothesis, rather than just the counts from the table.</p>\n\n<p>In other words, you need to work through a fair bit of statistical theory to use this function to analyse a 2x2 table, but here's a function that appears to work:</p>\n\n<pre><code>import Data.Vector as V\nimport Statistics.Test.ChiSquared\n\nsample = ((12, 8), (16, 9))\nmain = print $ chi2table sample\n\nchi2table ((a,b), (c,d))\n  = chi2test 2 $ V.fromList $ Prelude.zip [a,b,c,d] [ea,eb,ec,ed]\n  where n = a + b + c + d\n\n        ea = expected (a+b) (a+c)\n        eb = expected (a+b) (b+d)\n        ec = expected (c+d) (a+c)\n        ed = expected (c+d) (b+d)\n\n        expected rowtot coltot = (rowtot * coltot) `fdiv` n\n\n        fdiv x y = fromIntegral x / fromIntegral y\n</code></pre>\n\n<p>This gives output:</p>\n\n<pre><code>&gt; main\nJust (Test {testSignificance = mkPValue 0.7833089019485086, \ntestStatistics = 7.56302521008404e-2, testDistribution = chiSquared 2})\n</code></pre>\n\n<p><em>Update:</em>  With respect to the degrees of freedom, the test itself is calculated using a chi-square with 1 degree of freedom (basically (R-1)*(C-1) for R and C the number of rows and columns of the table).  The reason we have to specify 2 here is that the 2 represents the number of degrees of freedom \"lost\" or \"constrained\" in addition to the total count.  We start with 4 degrees of freedom total, we lose one for the total count across all cells, and we are constrained to lose two more to get down to the 1 degree of freedom for the test.</p>\n\n<p>Anyway, this will match the output of statistical software only if you turn off continuity correction.  For example, in R:</p>\n\n<pre><code>&gt; chisq.test(rbind(c(12,8),c(16,9)), correct=FALSE)\n\n    Pearson's Chi-squared test\n\ndata:  rbind(c(12, 8), c(16, 9))\nX-squared = 0.07563, df = 1, p-value = 0.7833\n\n&gt; \n</code></pre>\n"}], "owner": {"reputation": 20623, "user_id": 3522130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f83ceae9da7eb5d15dba167d1ff9357e?s=128&d=identicon&r=PG&f=1", "display_name": "rnso", "link": "https://stackoverflow.com/users/3522130/rnso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57908370, "answer_count": 2, "score": -1, "last_activity_date": 1568297475, "creation_date": 1568254247, "last_edit_date": 1568279165, "question_id": 57898864, "link": "https://stackoverflow.com/questions/57898864/chi-square-test-not-able-to-match-types", "title": "Chi-square test - not able to match types", "body": "<p>I am trying to do chi-square test using <a href=\"http://hackage.haskell.org/package/statistics-0.15.0.0/docs/Statistics-Test-ChiSquared.html\" rel=\"nofollow noreferrer\">this</a> statistics package function. I have following contingency table: </p>\n\n<pre><code>       A   B\nTrue:  12  8\nFalse: 16  9\n</code></pre>\n\n<p>I used following code: </p>\n\n<pre><code>import Data.Vector\nimport Statistics.Test.ChiSquared\nsample = fromList [(12, 8), (16, 9)]\nmain = print(chi2test(sample))\n</code></pre>\n\n<p>However, it gives following error: </p>\n\n<pre><code>[1 of 1] Compiling Main             ( rnchisq.hs, rnchisq.o )\n\nrnchisq.hs:9:23: error:\n    \u2022 Couldn't match expected type \u2018Int\u2019\n                  with actual type \u2018Vector (Integer, Integer)\u2019\n    \u2022 In the first argument of \u2018chi2test\u2019, namely \u2018(sample)\u2019\n      In the first argument of \u2018print\u2019, namely \u2018(chi2test (sample))\u2019\n      In the expression: print (chi2test (sample))\n</code></pre>\n\n<p>Where is the problem and how can it be solved? Thanks for your help.</p>\n\n<p>Edit: As suggested in the answer by @JosephSible I also tried: </p>\n\n<pre><code>main = print(chi2test(1, sample))\n</code></pre>\n\n<p>(1 being degree of freedom)</p>\n\n<p>But here I get error: </p>\n\n<pre><code>rnchisq.hs:7:22: error:\n    \u2022 Couldn't match expected type \u2018Int\u2019\n                  with actual type \u2018(Integer, Vector (Integer, Integer))\u2019\n    \u2022 In the first argument of \u2018chi2test\u2019, namely \u2018(1, sample)\u2019\n      In the first argument of \u2018print\u2019, namely \u2018(chi2test (1, sample))\u2019\n      In the expression: print (chi2test (1, sample))\n</code></pre>\n\n<p>Following compiled and ran: </p>\n\n<pre><code>main = print $ chi2test 1 sample\n</code></pre>\n\n<p>However, the output is </p>\n\n<pre><code>Nothing\n</code></pre>\n\n<p>I expected some value. It remains <code>Nothing</code> even if I drastically change numbers in <code>sample</code>. Why am I getting <code>Nothing</code>? </p>\n"}]