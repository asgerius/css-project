[{"tags": ["c#"], "comments": [{"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 0, "creation_date": 1534379346, "post_id": 51867909, "comment_id": 90688041, "body": "Don&#39;t know why this was marked as a duplicate, the issue here isn&#39;t with the NRE being thrown, but rather with why does GetComponent&lt;T&gt;() returns null. Which, if I were to guess, I&#39;d avance that it&#39;s because your gameObject does not have an Inventory component?"}, {"owner": {"reputation": 21, "user_id": 10216362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9a86ab622113d00ab6c99bc069b6b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vinsanityjr", "link": "https://stackoverflow.com/users/10216362/vinsanityjr"}, "reply_to_user": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 0, "creation_date": 1534379698, "post_id": 51867909, "comment_id": 90688134, "body": "The Inventory Component is attatched to a gameobject called &quot;Inventory.&quot; Is this done incorrectly?"}, {"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 0, "creation_date": 1534379770, "post_id": 51867909, "comment_id": 90688147, "body": "And the script that does the GetComponent(), is it on that same gameObject? Because GetComponent() only looks up components on the same gameObject."}, {"owner": {"reputation": 21, "user_id": 10216362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9a86ab622113d00ab6c99bc069b6b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vinsanityjr", "link": "https://stackoverflow.com/users/10216362/vinsanityjr"}, "reply_to_user": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 0, "creation_date": 1534379854, "post_id": 51867909, "comment_id": 90688168, "body": "oh, no! thank you for helping me out here. the GetComponent() script is on my player. is there a different way that I need to call this?"}, {"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 0, "creation_date": 1534379951, "post_id": 51867909, "comment_id": 90688188, "body": "Instead of using GetComponent() to initialize the field, make it public, and then it&#39;ll show up in the inspector for your player. You can then drag/drop the inventory gameObject on that to create a reference."}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "reply_to_user": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 0, "creation_date": 1534382164, "post_id": 51867909, "comment_id": 90688608, "body": "@Etienne de Martel   I agree on the duplicate. You should provide an answer here."}, {"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "reply_to_user": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "edited": false, "score": 0, "creation_date": 1534434349, "post_id": 51867909, "comment_id": 90713199, "body": "@Jimi I would, but the question needs to be reopened first."}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "reply_to_user": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 0, "creation_date": 1534434508, "post_id": 51867909, "comment_id": 90713293, "body": "@Etienne de Martel  I voted for reopeing. Ping Plutonix and Camilo Terevinto."}], "owner": {"reputation": 21, "user_id": 10216362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9a86ab622113d00ab6c99bc069b6b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vinsanityjr", "link": "https://stackoverflow.com/users/10216362/vinsanityjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "closed_date": 1534378809, "answer_count": 0, "score": 1, "last_activity_date": 1534377689, "creation_date": 1534377457, "last_edit_date": 1534377689, "question_id": 51867909, "link": "https://stackoverflow.com/questions/51867909/when-trying-to-call-getcomponent-my-class-inventory-comes-back-as-null", "closed_reason": "Duplicate", "title": "when trying to call GetComponent&lt;&gt;() my class &#39;Inventory&#39; comes back as null", "body": "<p>I am using unity</p>\n\n<p>I am trying to destroy a gameObject in Unity, and once that gameObject is destroyed, It adds the item to the player's inventory. The issue is, when I call this method inside Unity, I get the error: </p>\n\n<p>NullReferenceException: Object reference not set to an instance of an object</p>\n\n<p>all of the gameObject destruction is handled in my Character script under this method:</p>\n\n<pre><code>    void PlayerInput()\n    {\n        if (Input.GetKeyDown(KeyCode.Mouse0))\n        {\n            Vector3 c = Camera.main.ScreenToWorldPoint(Input.mousePosition);\n            RaycastHit2D hit2D = Physics2D.Raycast(transform.position, c - transform.position);\n\n            if (hit2D.collider.gameObject != null)\n            {\n                int TileID = hit2D.collider.gameObject.GetComponent&lt;IDScript&gt;().ObjectID;\n                //inventory.AddItem(TileID);\n                Destroy(hit2D.collider.gameObject);\n            }\n        }\n    }\n</code></pre>\n\n<p>my issue arises once I remove the comment from inventory.AddItem(TileID); and try to run it. here is the method AddItem:</p>\n\n<pre><code>    public void AddItem(int id)\n    {\n        Item itemToAdd = database.FetchItemByID(id);\n\n        for (int i = 0; i &lt; Items.Count; i++)\n        {\n            if (Items[i].ID == -1)\n            {\n                Items[i] = itemToAdd;\n                GameObject itemObj = Instantiate(inventoryItem);\n                itemObj.transform.SetParent(slots[i].transform);\n                itemObj.transform.position = Vector2.zero;\n                itemObj.GetComponent&lt;Image&gt;().sprite = itemToAdd.Sprite;\n                itemObj.name = itemToAdd.Title;\n\n                break;\n            }\n        }\n    }\n</code></pre>\n\n<p>I did a little bit of debugging, and found that when I run Debug.Log(Inventory); in my Character class, the Inventory class returns null. here is the code I use to \"introduce\" my Inventory class to the character class:</p>\n\n<pre><code>Inventory inventory;\n\n    void Start()\n    {\n        inventory = GetComponent&lt;Inventory&gt;();\n    }\n</code></pre>\n\n<p>Again, I am horribly sorry if this is an easily fixable issue or something that can be found with a search query. I have searched for a good while and nothing seems to be helpful. I'm probably doing something wrong, but if I need to provide the full code I am more than willing. sorry for the long question. Thanks!</p>\n"}, {"tags": ["javascript", "c#", "css", "asp.net", "asp.net-core"], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 6474915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlLZy.jpg?s=128&g=1", "display_name": "Russell Alan", "link": "https://stackoverflow.com/users/6474915/russell-alan"}, "edited": false, "score": 0, "creation_date": 1534378482, "post_id": 51867969, "comment_id": 90687854, "body": "what using directive are you using for &quot;Configure&quot;? Everything else looks good but it doesn&#39;t like Configure because &quot;A namespace cannot directly contain members such as fields or methods&quot;"}, {"owner": {"reputation": 21656, "user_id": 6265620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/uf6qO.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/6265620/edward"}, "reply_to_user": {"reputation": 116, "user_id": 6474915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlLZy.jpg?s=128&g=1", "display_name": "Russell Alan", "link": "https://stackoverflow.com/users/6474915/russell-alan"}, "edited": false, "score": 0, "creation_date": 1534400758, "post_id": 51867969, "comment_id": 90692947, "body": "@RussellAlan Share us your <code>Startup.cs</code>. Where did this error happen?"}, {"owner": {"reputation": 116, "user_id": 6474915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlLZy.jpg?s=128&g=1", "display_name": "Russell Alan", "link": "https://stackoverflow.com/users/6474915/russell-alan"}, "reply_to_user": {"reputation": 21656, "user_id": 6265620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/uf6qO.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/6265620/edward"}, "edited": false, "score": 0, "creation_date": 1534507955, "post_id": 51867969, "comment_id": 90740875, "body": "@Edward I&#39;ll provide the Startup.cs file later today. I don&#39;t have access to the project at the moment."}], "tags": [], "owner": {"reputation": 1093, "user_id": 2476111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a41971f65e7a7e2d429e68f6285fa8?s=128&d=identicon&r=PG", "display_name": "Cobster", "link": "https://stackoverflow.com/users/2476111/cobster"}, "is_accepted": false, "score": 0, "last_activity_date": 1534377902, "creation_date": 1534377902, "answer_id": 51867969, "question_id": 51867879, "link": "https://stackoverflow.com/questions/51867879/how-do-i-add-custom-stylesheets-and-scripts-to-a-asp-net-core-project/51867969#51867969", "title": "How do I add custom stylesheets and scripts to a ASP.NET Core project?", "body": "<p>In order to serve the scripts and css from a directory other than wwwroot, you need to add another static file handler to your request pipeline.</p>\n\n<pre><code>public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n{\n    app.UseStaticFiles();\n    app.UseStaticFiles(new StaticFileOptions \n    {\n        FileProvider = new PhysicalFileProvider(Path.Combine(env.ContentRootPath, \"Content\")),\n        RequestPath = \"/Content\"\n    });\n}\n</code></pre>\n\n<p>See more details in the ASP.NET Core documentation on <a href=\"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/static-files?view=aspnetcore-2.1&amp;tabs=aspnetcore2x\" rel=\"nofollow noreferrer\">Static files</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 16951, "user_id": 2147652, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WqlGm.jpg?s=128&g=1", "display_name": "mybirthname", "link": "https://stackoverflow.com/users/2147652/mybirthname"}, "is_accepted": false, "score": 0, "last_activity_date": 1534399594, "creation_date": 1534399594, "answer_id": 51870560, "question_id": 51867879, "link": "https://stackoverflow.com/questions/51867879/how-do-i-add-custom-stylesheets-and-scripts-to-a-asp-net-core-project/51870560#51870560", "title": "How do I add custom stylesheets and scripts to a ASP.NET Core project?", "body": "<p>You can try with <a href=\"https://www.nuget.org/packages/BuildBundlerMinifier/\" rel=\"nofollow noreferrer\">BuildBundlerMinifier</a></p>\n\n<pre><code>Install-Package BuildBundlerMinifier -Version 2.8.391\n</code></pre>\n\n<p>Install this package in your web project, after that create in the root of the project <code>bundleconfig.json</code> file. <strong>Here an example of the content of this file, you could only put your custom js/css files, if you don't want to change the jquery references in the layout.</strong></p>\n\n<pre><code>[\n  {\n    \"outputFileName\": \"wwwroot/css/globalCss.min.css\",\n    \"inputFiles\": [\n      \"node_modules/bootstrap/dist/css/bootstrap.min.css\",\n      \"node_modules/font-awesome/css/font-awesome.min.css\"\n    ]\n  },\n  {\n    \"outputFileName\": \"wwwroot/js/globalJs.min.js\",\n    \"inputFiles\": [\n      \"node_modules/jquery/dist/jquery.min.js\",\n      \"node_modules/bootstrap/dist/js/bootstrap.min.js\",\n      \"JS/site.js\"\n    ]\n  },\n  {\n    \"outputFileName\": \"wwwroot/js/pageJs.min.js\",\n    \"inputFiles\": [\n      \"node_modules/jquery-validation/dist/jquery.validate.js\",\n      \"node_modules/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.js\"\n    ]\n  }\n\n]\n</code></pre>\n\n<p>This JS/CSS files are created on build of your project. If you make changes only in the js files you could Clean/Rebuild your project so they are reload properly. This is what you should see on build in your output:</p>\n\n<pre><code>Bundler: Begin processing bundleconfig.json\nMinified wwwroot/css/globalCss.min.css\nMinified wwwroot/js/globalJs.min.js\nMinified wwwroot/js/pageJs.min.js\nBundler: Done processing bundleconfig.json\n</code></pre>\n"}], "owner": {"reputation": 116, "user_id": 6474915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DlLZy.jpg?s=128&g=1", "display_name": "Russell Alan", "link": "https://stackoverflow.com/users/6474915/russell-alan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 728, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1534399935, "creation_date": 1534377097, "last_edit_date": 1534399935, "question_id": 51867879, "link": "https://stackoverflow.com/questions/51867879/how-do-i-add-custom-stylesheets-and-scripts-to-a-asp-net-core-project", "title": "How do I add custom stylesheets and scripts to a ASP.NET Core project?", "body": "<p>Let me start off by saying I've seen a StackOverflow question related to this but none of the solutions solved the problem.</p>\n\n<p>I'm trying to add custom stylesheets and JS script files to a new ASP.NET Core solution.</p>\n\n<p>The css and JS files in wwwroot do work just fine, but I'd like to be able to add my own as well.</p>\n\n<p>I've added a Content folder to the project with a CSS folder inside of that(Content folder > CSS folder > Site.css), attempted to wire it up with a link tag in the _Layout.cshtml file but no success.</p>\n\n<p>I also have a \"Scripts\" folder inside of the Content folder (Content folder > Scripts folder > CustomJS.js) mentioned above with the Javscript file (CustomJS.js) inside of that but am not sure how to wire that up either now that the BundleConfig file in the AppStart folder is gone.</p>\n\n<p>What am I missing here?</p>\n\n<p>Here is the _Layout.cshtml file from top to end of <em>head</em> tags.</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;title&gt;@ViewData[\"Title\"] - JavascriptPractice&lt;/title&gt;\n\n    &lt;environment include=\"Development\"&gt;\n        &lt;link rel=\"stylesheet\" href=\"~/lib/bootstrap/dist/css/bootstrap.css\" /&gt;\n        &lt;link rel=\"stylesheet\" href=\"~/css/site.css\" /&gt;\n        **&lt;link rel=\"stylesheet\" href=\"~/Content/CSS/Site.css\" /&gt;**\n    &lt;/environment&gt;\n    &lt;environment exclude=\"Development\"&gt;\n        &lt;link rel=\"stylesheet\" href=\"https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/css/bootstrap.min.css\"\n              asp-fallback-href=\"~/lib/bootstrap/dist/css/bootstrap.min.css\"\n              asp-fallback-test-class=\"sr-only\" asp-fallback-test-property=\"position\" asp-fallback-test-value=\"absolute\" /&gt;\n        &lt;link rel=\"stylesheet\" href=\"~/css/site.min.css\" asp-append-version=\"true\" /&gt;\n    &lt;/environment&gt;\n&lt;/head&gt;\n</code></pre>\n"}, {"tags": ["c#", "unity3d", "virtual-reality", "coroutine"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5109763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qvxYIbDUszM/AAAAAAAAAAI/AAAAAAAASqc/uGeJDztTcT0/photo.jpg?sz=128", "display_name": "Amin A. Nakhjavani", "link": "https://stackoverflow.com/users/5109763/amin-a-nakhjavani"}, "edited": false, "score": 0, "creation_date": 1534428483, "post_id": 51870465, "comment_id": 90709430, "body": "So I don&#39;t have a preference on what to use. I tried writing my own thing that&#39;s similar to yours but I had problem either getting it to connect to the controllers, or the code functioning. But I think after I look more closely into the Unity code you shared I should be able to figure it out. Thanks a lot"}], "tags": [], "owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "is_accepted": false, "score": 1, "last_activity_date": 1534401535, "last_edit_date": 1534401535, "creation_date": 1534399107, "answer_id": 51870465, "question_id": 51867817, "link": "https://stackoverflow.com/questions/51867817/trying-to-use-coroutine-to-activate-and-deactivate-objects-in-the-scene-in-vr-de/51870465#51870465", "title": "Trying to use Coroutine to activate and deactivate objects in the scene in VR development", "body": "<p>I don't know why you want to use Coroutines for that instead of simple methods .. </p>\n\n<p>To be honest I don't know in specific the <code>Valve.VR.InteractionSystem</code></p>\n\n<p>But I would just do simple methods like:</p>\n\n<pre><code>public GameObject obj1;\n\nprivate void Update()\n{\n    if(Input.GetButton(\"Button1\") // or however you access your button 1\n    {\n        obj1.SetActive(true);\n    } else if (Input.GetButton(\"Button2\") // or however you access your button2\n    {\n        obj1.SetActive(false);\n    }\n}\n</code></pre>\n\n<p>I use else there so only one button press is executed at the same time.</p>\n\n<hr>\n\n<p>In a quick search I now also found an <a href=\"https://unity3d.college/2016/11/16/steamvr-controller-input/\" rel=\"nofollow noreferrer\">Unity manual for SteamVr controler input</a>.</p>\n\n<p>They have a complete example using event handlers/callbacks. Here is a shortened one that should fit your need (they also explain quite well how it all works)</p>\n\n<pre><code>using UnityEngine; \n\npublic class ObjectEnabler : MonoBehaviour\n{   \n    private SteamVR_TrackedController _controller;  \n\n    public GameObject obj1;\n\n    private void OnEnable() \n    {       \n        // Get the controller this component is attached to\n        _controller = GetComponent&lt;SteamVR_TrackedController&gt;();    \n\n        // Register callbacks to your buttons\n        // I've left this on the ones from the example .. if you need others \n        // You have to look them up\n        // In the example there is also a complete list of all button events\n        RegisterCallbacks();\n    }   \n\n    private void OnDisable()    \n    {       \n        UnregisterCallbacks();\n    }\n\n    // Register callbacks for controler events\n    private void RegisterCallbacks()\n    {\n        // It is always save to remove callbacks \n        // So just to be sure we only register once so methods are not executed twice\n        // I personaly always first unregister callbacks:\n        UnregisterCallbacks();\n\n        // now I register the callback that means e.g.\n        // Everytime the event TriggerClicked is \n        // invoked anywhere in the Scene I want to execute HandleTrickerClicked\n        // hint the method can be called as you like .. could also simply be EnableObject e.g.\n        _controller.TriggerClicked += HandleTriggerClicked;     \n        _controller.PadClicked += HandlePadClicked; \n        // For more information how the callbacks work\n        // see the link I provided\n    }\n\n    // Unregister callbacks for events\n    private void UnregisterCallbacks()\n    {\n        _controller.TriggerClicked -= HandleTriggerClicked;     \n        _controller.PadClicked -= HandlePadClicked; \n    }\n\n    // Called on TriggerClicked\n    // Enables the obj1\n    private void HandleTriggerClicked() \n    {\n        obj1.SetActive(true);\n    }   \n\n    // Called on PadClicked\n    // Disables the obj1\n    private void HandlePadClicked()\n    {\n        obj1.SetActive(false);\n    } \n}\n</code></pre>\n\n<p>You now just have to attach this script to a controller (next to a <code>SteamVR_TrackedController</code> Component) and it should do what you wanted.</p>\n\n<p>(I'm not sure right now because I never used it and I'm on a mobile but their script might eventually miss some <code>using</code> namespaces e.g. starting with the entire <code>using Valve.VR;</code> stuff but I don't know how exactly this is implemented)</p>\n"}], "owner": {"reputation": 55, "user_id": 5109763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qvxYIbDUszM/AAAAAAAAAAI/AAAAAAAASqc/uGeJDztTcT0/photo.jpg?sz=128", "display_name": "Amin A. Nakhjavani", "link": "https://stackoverflow.com/users/5109763/amin-a-nakhjavani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534442733, "creation_date": 1534376363, "last_edit_date": 1534442733, "question_id": 51867817, "link": "https://stackoverflow.com/questions/51867817/trying-to-use-coroutine-to-activate-and-deactivate-objects-in-the-scene-in-vr-de", "title": "Trying to use Coroutine to activate and deactivate objects in the scene in VR development", "body": "<p>I'm designing a VR game and I'm trying to make a menu that attaches to the left controller. I have two buttons, one is used to activate a few objects in the scene, and the other one is used to take the player to a different scene.</p>\n\n<p>I've been looking at the SteamVR Interactive Sample and I'm trying to mimic the buttons they have used in Sample Scene. Except in the sample they are using Coroutine to start different hints on the controller so they are using the Hand class. I'm just trying to use it to activate and deactivate objects and more to a different scene.</p>\n\n<p>Just to make things clear these are the things I'm trying to achieve:</p>\n\n<ol>\n<li>When user hits the first button, activate the object (obj1) that is specified through the Inspector tab in Unity.</li>\n<li>When user hits the second button, deactivate the objects (obj1) and move to a different scene.</li>\n</ol>\n\n<p>Here is the C# code that's in the Sample scene. It has three buttons and they either activate \"Button Hints\" or \"Text Hints\":</p>\n\n<pre class=\"lang-C# prettyprint-override\"><code>//======= Copyright (c) Valve Corporation, All rights reserved. ===============\n//\n// Purpose: Demonstrates the use of the controller hint system\n//\n//=============================================================================\n\nusing UnityEngine;\nusing System.Collections;\nusing Valve.VR;\n\nnamespace Valve.VR.InteractionSystem\n{\n    //-------------------------------------------------------------------------\n    public class ControllerHintsExample : MonoBehaviour\n    {\n        private Coroutine buttonHintCoroutine;\n        private Coroutine textHintCoroutine;\n\n        //-------------------------------------------------\n        public void ShowButtonHints( Hand hand )\n        {\n            if ( buttonHintCoroutine != null )\n            {\n                StopCoroutine( buttonHintCoroutine );\n            }\n            buttonHintCoroutine = StartCoroutine( TestButtonHints( hand ) );\n        }\n\n\n        //-------------------------------------------------\n        public void ShowTextHints( Hand hand )\n        {\n            if ( textHintCoroutine != null )\n            {\n                StopCoroutine( textHintCoroutine );\n            }\n            textHintCoroutine = StartCoroutine( TestTextHints( hand ) );\n        }\n\n\n        //-------------------------------------------------\n        public void DisableHints()\n        {\n            if ( buttonHintCoroutine != null )\n            {\n                StopCoroutine( buttonHintCoroutine );\n                buttonHintCoroutine = null;\n            }\n\n            if ( textHintCoroutine != null )\n            {\n                StopCoroutine( textHintCoroutine );\n                textHintCoroutine = null;\n            }\n\n            foreach ( Hand hand in Player.instance.hands )\n            {\n                ControllerButtonHints.HideAllButtonHints( hand );\n                ControllerButtonHints.HideAllTextHints( hand );\n            }\n        }\n\n\n        //-------------------------------------------------\n        // Cycles through all the button hints on the controller\n        //-------------------------------------------------\n        private IEnumerator TestButtonHints( Hand hand )\n        {\n            ControllerButtonHints.HideAllButtonHints( hand );\n\n            while ( true )\n            {\n                ControllerButtonHints.ShowButtonHint( hand, EVRButtonId.k_EButton_ApplicationMenu );\n                yield return new WaitForSeconds( 1.0f );\n                ControllerButtonHints.ShowButtonHint( hand, EVRButtonId.k_EButton_System );\n                yield return new WaitForSeconds( 1.0f );\n                ControllerButtonHints.ShowButtonHint( hand, EVRButtonId.k_EButton_Grip );\n                yield return new WaitForSeconds( 1.0f );\n                ControllerButtonHints.ShowButtonHint( hand, EVRButtonId.k_EButton_SteamVR_Trigger );\n                yield return new WaitForSeconds( 1.0f );\n                ControllerButtonHints.ShowButtonHint( hand, EVRButtonId.k_EButton_SteamVR_Touchpad );\n                yield return new WaitForSeconds( 1.0f );\n\n                ControllerButtonHints.HideAllButtonHints( hand );\n                yield return new WaitForSeconds( 1.0f );\n            }\n        }\n\n\n        //-------------------------------------------------\n        // Cycles through all the text hints on the controller\n        //-------------------------------------------------\n        private IEnumerator TestTextHints( Hand hand )\n        {\n            ControllerButtonHints.HideAllTextHints( hand );\n\n            while ( true )\n            {\n                ControllerButtonHints.ShowTextHint( hand, EVRButtonId.k_EButton_ApplicationMenu, \"Application\" );\n                yield return new WaitForSeconds( 3.0f );\n                ControllerButtonHints.ShowTextHint( hand, EVRButtonId.k_EButton_System, \"System\" );\n                yield return new WaitForSeconds( 3.0f );\n                ControllerButtonHints.ShowTextHint( hand, EVRButtonId.k_EButton_Grip, \"Grip\" );\n                yield return new WaitForSeconds( 3.0f );\n                ControllerButtonHints.ShowTextHint( hand, EVRButtonId.k_EButton_SteamVR_Trigger, \"Trigger\" );\n                yield return new WaitForSeconds( 3.0f );\n                ControllerButtonHints.ShowTextHint( hand, EVRButtonId.k_EButton_SteamVR_Touchpad, \"Touchpad\" );\n                yield return new WaitForSeconds( 3.0f );\n\n                ControllerButtonHints.HideAllTextHints( hand );\n                yield return new WaitForSeconds( 3.0f );\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This is what I have which is similar copy of the sample code. I got stuck at figuring out the object activation and haven't touched scene change yet:</p>\n\n<pre class=\"lang-C# prettyprint-override\"><code>using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.SceneManagement;\nusing Valve.VR;\n\nnamespace Valve.VR.InteractionSystem\n{\n    //................................................\n    public class HandMenueActions : MonoBehaviour\n    {\n        public GameObject AllProducts;\n\n        private Coroutine allProductsCoroutine;\n        private Coroutine aboutUsCoroutine;\n\n        //............................................\n        public void ShowAllProducts(GameObject AllProducts)\n        {\n            if (allProductsCoroutine != null)\n            {\n                StopCoroutine(allProductsCoroutine);\n            }\n            allProductsCoroutine = StartCoroutine(TestAllProducts);\n        }\n\n\n        //............................................\n        //Turns on all products in the scene\n        //............................................\n        private IEnumerable TestAllProducts()\n        {\n            AllProducts.SetActive(true);\n        }\n    }\n</code></pre>\n\n\n\n<p>I'm not that experienced and I try to write code for unity with the documentation open right next to it but I'm still here.</p>\n"}, {"tags": ["c#", "json", "asp.net-mvc", "datetime"], "comments": [{"owner": {"reputation": 759, "user_id": 1191559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/768903ea2e6545017d0d98e757967fef?s=128&d=identicon&r=PG", "display_name": "dalcam", "link": "https://stackoverflow.com/users/1191559/dalcam"}, "reply_to_user": {"reputation": 1413, "user_id": 2157801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nAlCW.png?s=128&g=1", "display_name": "JSON", "link": "https://stackoverflow.com/users/2157801/json"}, "edited": false, "score": 0, "creation_date": 1534376349, "post_id": 51867680, "comment_id": 90687428, "body": "Hi @Json - the only time i modify the dates is on JSON Serialization to tell the receiver that the date IS UTC:             <code>JsonConvert.DefaultSettings = () =&gt; new JsonSerializerSettings             {                    DateTimeZoneHandling = DateTimeZoneHandling.Utc             };</code>"}, {"owner": {"reputation": 759, "user_id": 1191559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/768903ea2e6545017d0d98e757967fef?s=128&d=identicon&r=PG", "display_name": "dalcam", "link": "https://stackoverflow.com/users/1191559/dalcam"}, "reply_to_user": {"reputation": 1413, "user_id": 2157801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nAlCW.png?s=128&g=1", "display_name": "JSON", "link": "https://stackoverflow.com/users/2157801/json"}, "edited": false, "score": 0, "creation_date": 1534377255, "post_id": 51867680, "comment_id": 90687614, "body": "Thats the thing Json - im not touching the dates in the controller or the repository. Im simply using Automapper to map from the VM to the DTO and then inserting. I will add this if you really think this is neccessary but i cant yet see how it is!"}, {"owner": {"reputation": 1413, "user_id": 2157801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nAlCW.png?s=128&g=1", "display_name": "JSON", "link": "https://stackoverflow.com/users/2157801/json"}, "edited": false, "score": 1, "creation_date": 1534377728, "post_id": 51867680, "comment_id": 90687717, "body": "My best guess here is that you need to config your (&quot;Automapper&quot;) mapping for dates. try creating a new map specifying the kind of conversion that you want"}, {"owner": {"reputation": 759, "user_id": 1191559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/768903ea2e6545017d0d98e757967fef?s=128&d=identicon&r=PG", "display_name": "dalcam", "link": "https://stackoverflow.com/users/1191559/dalcam"}, "reply_to_user": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 1, "creation_date": 1534380140, "post_id": 51867680, "comment_id": 90688226, "body": "@mjwills you are completely right! I was looking at the date component thinking that the 12am was the UTC time! Well this is embarrasing..."}, {"owner": {"reputation": 759, "user_id": 1191559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/768903ea2e6545017d0d98e757967fef?s=128&d=identicon&r=PG", "display_name": "dalcam", "link": "https://stackoverflow.com/users/1191559/dalcam"}, "reply_to_user": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 0, "creation_date": 1534384413, "post_id": 51867680, "comment_id": 90689030, "body": "Thanks @mjwills i have done, and now the question has changed completey! Its coming into the model binder as a local date now that I know not to look at the time in the date component! Thanks so much for your help and advice. Much appreciated."}, {"owner": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 1, "creation_date": 1534384600, "post_id": 51867680, "comment_id": 90689055, "body": "<a href=\"https://stackoverflow.com/questions/10293440/how-to-make-asp-net-mvc-model-binder-treat-incoming-date-as-utc\" title=\"how to make asp net mvc model binder treat incoming date as utc\">stackoverflow.com/questions/10293440/&hellip;</a> may be of interest."}, {"owner": {"reputation": 759, "user_id": 1191559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/768903ea2e6545017d0d98e757967fef?s=128&d=identicon&r=PG", "display_name": "dalcam", "link": "https://stackoverflow.com/users/1191559/dalcam"}, "reply_to_user": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 0, "creation_date": 1534387779, "post_id": 51867680, "comment_id": 90689604, "body": "thanks @mjwills that was exactly what i needed. Thank you so much!"}], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 1191559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/768903ea2e6545017d0d98e757967fef?s=128&d=identicon&r=PG", "display_name": "dalcam", "link": "https://stackoverflow.com/users/1191559/dalcam"}, "is_accepted": false, "score": 0, "last_activity_date": 1534387722, "creation_date": 1534387722, "answer_id": 51868943, "question_id": 51867680, "link": "https://stackoverflow.com/questions/51867680/mvc-json-utc-handling-in-a-local-non-utc-environment/51868943#51868943", "title": "MVC JSON UTC handling in a local NON UTC Environment", "body": "<p>As per @mjwills coment, this article answers and fixes the problem: <a href=\"https://stackoverflow.com/questions/10293440/how-to-make-asp-net-mvc-model-binder-treat-incoming-date-as-utc\">How to make ASP.Net MVC model binder treat incoming date as UTC?</a></p>\n"}], "owner": {"reputation": 759, "user_id": 1191559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/768903ea2e6545017d0d98e757967fef?s=128&d=identicon&r=PG", "display_name": "dalcam", "link": "https://stackoverflow.com/users/1191559/dalcam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "closed_date": 1534390003, "answer_count": 1, "score": 0, "last_activity_date": 1534387722, "creation_date": 1534375153, "last_edit_date": 1534384282, "question_id": 51867680, "link": "https://stackoverflow.com/questions/51867680/mvc-json-utc-handling-in-a-local-non-utc-environment", "closed_reason": "Duplicate", "title": "MVC JSON UTC handling in a local NON UTC Environment", "body": "<p>I am having issues in my local environment (ASP.NET MVC - UTC-5 Offset) where MVC Model Binding is converting my UTC DateTimes back to the Local DateTime.</p>\n\n<p>In the DB we are attempting to store all datetimes in UTC. EF Reads these dates fine out of the DB correctly as UTC, and on the client i am succesffuly converting these back to local time on display, and sending UTC back to the server on posts. Here is an example post:<a href=\"https://i.stack.imgur.com/AGq7k.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AGq7k.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>However on entry into the controller, the datetime is now in local time:\n<a href=\"https://i.stack.imgur.com/uwW2q.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uwW2q.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>My JsonSerializer in global.asax looks like this:</p>\n\n<pre><code>JsonConvert.DefaultSettings = () =&gt; new JsonSerializerSettings\n{\n     DateTimeZoneHandling = DateTimeZoneHandling.Utc\n};\n</code></pre>\n\n<p>I assumed the Json serialiser would convert that to UTC on model binding back in to the controller, but its not. Other than manually converting every date on back to UTC, is there any way to get this working site wide so that it reads the JSON dates from clients as UTC?</p>\n"}, {"tags": ["c#", "ajax", "asp.net-mvc"], "answers": [{"tags": [], "owner": {"reputation": 189551, "user_id": 5233410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XAODw.png?s=128&g=1", "display_name": "Nkosi", "link": "https://stackoverflow.com/users/5233410/nkosi"}, "is_accepted": true, "score": 1, "last_activity_date": 1534375962, "creation_date": 1534375962, "answer_id": 51867770, "question_id": 51867551, "link": "https://stackoverflow.com/questions/51867551/unable-to-pass-values-to-mvc-controller-via-ajax/51867770#51867770", "title": "Unable to pass values to MVC Controller via AJAX", "body": "<p>You need an object model that matches the data being sent</p>\n\n<pre><code>public class DataObject {\n    public int ticketId { get; set; }\n    public TicketReply ticketReply { get; set; }\n}\n</code></pre>\n\n<p>next you update the controller action to expect the data using the <code>[FromBody]</code> attribute so that the model binder can create and populate the sent data</p>\n\n<pre><code>[HttpPost]\npublic async Task&lt;JsonResult&gt; AddComment([FromBody]DataObject dataObject) {\n\n    int ticketId = dataObject.ticketId;\n    TicketReply ticketReply = dataObject.ticketReply;\n\n    //...\n}\n</code></pre>\n\n<p>Finally you need to send the data correctly from the client.</p>\n\n<pre><code>var dataObject = {\n    ticketId: ticketId , \n    ticketReply: { Attachements: attachements }\n};\n\n$.ajax({\n    url: $('#updateTicketURL').val(),\n    data: JSON.stringify(dataObject),\n    type: 'POST',\n    dataType: 'JSON',\n    contentType: 'application/json',\n    success: function (data) {\n        console.log(data);\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 1471, "user_id": 2084421, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bbf0876f023643c89a760b66b51f2663?s=128&d=identicon&r=PG", "display_name": "GrahamJRoy", "link": "https://stackoverflow.com/users/2084421/grahamjroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 51867770, "answer_count": 1, "score": 0, "last_activity_date": 1534376109, "creation_date": 1534373967, "last_edit_date": 1534376109, "question_id": 51867551, "link": "https://stackoverflow.com/questions/51867551/unable-to-pass-values-to-mvc-controller-via-ajax", "title": "Unable to pass values to MVC Controller via AJAX", "body": "<p>I have an MVC controller which takes an int and a complex object</p>\n\n<pre><code>[HttpPost]\npublic async Task&lt;JsonResult&gt; AddComment(int ticketId, TicketReply ticketReply)\n</code></pre>\n\n<p>Even if I take out the object, I can't seem to pass a simple value. Here's what the AJAX call looks like</p>\n\n<pre><code>var dataObject = {\n    ticketId: ticketId //, ticketReply: { Attachements: attachements }\n};\n\n$.ajax({\n    url: $('#updateTicketURL').val(),\n    data: dataObject, //, //JSON.stringify(dataObject),  //JSON.stringify(dataObject),\n    type: 'POST',\n    //dataType: 'JSON',\n    contentType: 'application/json',\n    success: function (data) {\n        console.log(data);\n\n    }\n})\n</code></pre>\n\n<p>I have tried every combination of <code>JSON.stringyfy</code> etc. but I never seem to get the value. Even if I replace with static values it never seems to work.</p>\n"}, {"tags": ["c#", "json"], "comments": [{"owner": {"reputation": 25472, "user_id": 105084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae860f9442151273f880bb1e0d790a5a?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/105084/matthew"}, "edited": false, "score": 0, "creation_date": 1534379594, "post_id": 51867509, "comment_id": 90688107, "body": "This is a valid question, but I&#39;m curious why you need to avoid all third-party dependencies, even <a href=\"https://www.nuget.org/packages\" rel=\"nofollow noreferrer\">the #1 most-downloaded package on NuGet.org</a>."}, {"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 1, "creation_date": 1534381403, "post_id": 51867509, "comment_id": 90688463, "body": "<a href=\"https://docs.microsoft.com/en-us/uwp/api/windows.data.json\" rel=\"nofollow noreferrer\">Windows.Data.Json</a> is for parsing &amp; formatting JSON, not (de)serializing.  If you need a serializer see <a href=\"https://stackoverflow.com/q/18242429\">How to Deserialize JSON data?</a> and <a href=\"https://stackoverflow.com/q/7895105\">Deserialize JSON with C#</a> whose answers include several built-in options."}], "answers": [{"comments": [{"owner": {"reputation": 1005, "user_id": 131149, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/afsXU.png?s=128&g=1", "display_name": "ClairelyClaire", "link": "https://stackoverflow.com/users/131149/clairelyclaire"}, "edited": false, "score": 0, "creation_date": 1534385799, "post_id": 51867673, "comment_id": 90689247, "body": "Is <code>DataContractJsonSerializer</code> preferred? From what I&#39;d read, it&#39;s a really inefficient implementation - is that still the case?"}, {"owner": {"reputation": 369, "user_id": 778827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4e5aa441370b79c4bf86537c382bd812?s=128&d=identicon&r=PG", "display_name": "Dimith", "link": "https://stackoverflow.com/users/778827/dimith"}, "reply_to_user": {"reputation": 1005, "user_id": 131149, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/afsXU.png?s=128&g=1", "display_name": "ClairelyClaire", "link": "https://stackoverflow.com/users/131149/clairelyclaire"}, "edited": false, "score": 1, "creation_date": 1534389181, "post_id": 51867673, "comment_id": 90689849, "body": "Preferred is json.net to be honest. But an alternative deserializer as you have asked would be <code>DataContractJsonSerializer</code>. I am not sure about the inefficiency though. I have seen some mention it as bit of a over-engineering."}], "tags": [], "owner": {"reputation": 369, "user_id": 778827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4e5aa441370b79c4bf86537c382bd812?s=128&d=identicon&r=PG", "display_name": "Dimith", "link": "https://stackoverflow.com/users/778827/dimith"}, "is_accepted": false, "score": 0, "last_activity_date": 1534389464, "last_edit_date": 1534389464, "creation_date": 1534375077, "answer_id": 51867673, "question_id": 51867509, "link": "https://stackoverflow.com/questions/51867509/uwp-c-how-to-deserialize-jsonobject-into-a-class-using-windows-data-json/51867673#51867673", "title": "UWP C# - How to deserialize JsonObject into a class using Windows.Data.Json?", "body": "<p>You have to decorate your class with <code>[DataContract]</code> and <code>[DataMember]</code> attributes. Write the json into a memory stream and deserialize using <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.runtime.serialization.json.datacontractjsonserializer?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">DataContractJsonSerializer</a></p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/how-to-serialize-and-deserialize-json-data\" rel=\"nofollow noreferrer\">Here</a> is a more elaborated sample.</p>\n\n<p>In addition to @Nkosi's answer below are some Comparisons between JSON.net and other alternatives:</p>\n\n<ul>\n<li><a href=\"http://banachowski.com/deprogramming/2010/08/json-net-vs-net-datacontractjsonserializer/\" rel=\"nofollow noreferrer\">JSON.Net vs DataContractJsonSerializer</a></li>\n<li><a href=\"http://james.newtonking.com/archive/2012/09/14/json-net-vs-windows-data-json\" rel=\"nofollow noreferrer\">JSON.Net vs Windows.Data.Json</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1005, "user_id": 131149, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/afsXU.png?s=128&g=1", "display_name": "ClairelyClaire", "link": "https://stackoverflow.com/users/131149/clairelyclaire"}, "edited": false, "score": 0, "creation_date": 1534386035, "post_id": 51867679, "comment_id": 90689292, "body": "That makes sense. I wasn&#39;t clear on whether or not <code>Windows.Data.Json</code> had a deserializer built in."}, {"owner": {"reputation": 189551, "user_id": 5233410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XAODw.png?s=128&g=1", "display_name": "Nkosi", "link": "https://stackoverflow.com/users/5233410/nkosi"}, "reply_to_user": {"reputation": 1005, "user_id": 131149, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/afsXU.png?s=128&g=1", "display_name": "ClairelyClaire", "link": "https://stackoverflow.com/users/131149/clairelyclaire"}, "edited": false, "score": 0, "creation_date": 1534386931, "post_id": 51867679, "comment_id": 90689447, "body": "@ClairelyClaire No. Not to my knowledge. You could always write your own, but again it would be a lot of work with very little payoff."}], "tags": [], "owner": {"reputation": 189551, "user_id": 5233410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XAODw.png?s=128&g=1", "display_name": "Nkosi", "link": "https://stackoverflow.com/users/5233410/nkosi"}, "is_accepted": true, "score": 3, "last_activity_date": 1534375149, "creation_date": 1534375149, "answer_id": 51867679, "question_id": 51867509, "link": "https://stackoverflow.com/questions/51867509/uwp-c-how-to-deserialize-jsonobject-into-a-class-using-windows-data-json/51867679#51867679", "title": "UWP C# - How to deserialize JsonObject into a class using Windows.Data.Json?", "body": "<blockquote>\n  <p>I've been trying to find a clear example of this, and everything I've found uses Json.Net.</p>\n</blockquote>\n\n<p>Because reinventing existing functionality is a waste of time especially when all the hard work has already been done for you.</p>\n\n<p>If you insist on not using it then you will have to manually construct the object model based on the expected JSON.</p>\n\n<p>For example, assuming publicly available properties</p>\n\n<pre><code>public class TwitterJson {\n    public bool hasMore { get; set; } // has_more_items\n    public string rawText { get; set; } // items_html\n    public string nextKey { get; set; } // min_position\n}\n</code></pre>\n\n<p>Then parsing the above to the desired object model</p>\n\n<pre><code>JsonObject theJson = JsonObject.Parse(result);\nvar model = new TwitterJson {\n    hasMore = theJson.GetNamedBoolean(\"has_more_items\"),\n    rawText = theJson.GetNamedString(\"items_html\"),\n    nextKey = theJson.GetNamedString(\"min_position\")\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1395, "user_id": 3244198, "user_type": "registered", "accept_rate": 21, "profile_image": "https://i.stack.imgur.com/K1J2F.jpg?s=128&g=1", "display_name": "Dishant", "link": "https://stackoverflow.com/users/3244198/dishant"}, "is_accepted": false, "score": 0, "last_activity_date": 1534378824, "creation_date": 1534378824, "answer_id": 51868059, "question_id": 51867509, "link": "https://stackoverflow.com/questions/51867509/uwp-c-how-to-deserialize-jsonobject-into-a-class-using-windows-data-json/51868059#51868059", "title": "UWP C# - How to deserialize JsonObject into a class using Windows.Data.Json?", "body": "<p>As mentioned by @Dimith, you need to decorate your class with <code>[DataContract]</code> and <code>[DateMember]</code>, Please refer to below code which will convert your JSON into a given object.</p>\n\n<pre><code> // Deserialize a JSON string to a given object.  \n public static T ReadToObject&lt;T&gt;(string json) where T: class, new()\n { \n    DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));\n    using (MemoryStream stream = new MemoryStream(Encoding.UTF8.GetBytes(json)))\n    {\n       return ser.ReadObject(stream) as T;\n    }\n }\n</code></pre>\n\n<p><strong>Class:</strong></p>\n\n<pre><code>[DataContract]\n    public class TwitterJson\n    {\n        [DataMember(Name = \"has_more_items\")]\n        bool hasMore { get; set; } // has_more_items\n\n        [DataMember(Name = \"items_html\")]\n        string rawText { get; set; } // items_html\n\n        [DataMember(Name = \"min_position\")]\n        string nextKey { get; set; } // min_position\n    }\n</code></pre>\n\n<p>Sample on how to use:</p>\n\n<pre><code>var result = \"{\\\"has_more_items\\\": false, \\\"items_html\\\": \\\"...\\\",\\\"min_position\\\": \\\"1029839231781429248\\\"}\";\nvar obj = ReadToObject&lt;TwitterJson&gt;(result);\n</code></pre>\n"}], "owner": {"reputation": 1005, "user_id": 131149, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/afsXU.png?s=128&g=1", "display_name": "ClairelyClaire", "link": "https://stackoverflow.com/users/131149/clairelyclaire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 1, "accepted_answer_id": 51867679, "answer_count": 3, "score": 1, "last_activity_date": 1534389464, "creation_date": 1534373588, "last_edit_date": 1534374109, "question_id": 51867509, "link": "https://stackoverflow.com/questions/51867509/uwp-c-how-to-deserialize-jsonobject-into-a-class-using-windows-data-json", "title": "UWP C# - How to deserialize JsonObject into a class using Windows.Data.Json?", "body": "<p>I don't want to use Newtonsoft's Json.Net library. I'm avoiding any third-party dependencies if I can help it in this project.</p>\n\n<p>If I have JSON that looks like this:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n    \"has_more_items\": false,\n    \"items_html\": \"...\",\n    \"min_position\": \"1029839231781429248\"\n}\n</code></pre>\n\n<p>and I have a class that looks like this:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class TwitterJson\n{\n    bool hasMore { get; set; } // has_more_items\n    string rawText { get; set; } // items_html\n    string nextKey { get; set; } // min_position\n}\n</code></pre>\n\n<p>and I have a JsonObject containing the above JSON:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>JsonObject theJson = JsonObject.Parse(result);\n</code></pre>\n\n<p>How do I deserialize the JsonObject into my class? I've been trying to find a clear example of this, and everything I've found uses Json.Net.</p>\n"}, {"tags": ["c#", "json", "json.net"], "comments": [{"owner": {"reputation": 71114, "user_id": 567435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zYyZz.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/567435/rahul"}, "edited": false, "score": 0, "creation_date": 1534372860, "post_id": 51867386, "comment_id": 90686670, "body": "No, you can&#39;t. probably use a dictionary rather or <code>Expando</code>"}, {"owner": {"reputation": 6833, "user_id": 240564, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/U17en.png?s=128&g=1", "display_name": "Alexan", "link": "https://stackoverflow.com/users/240564/alexan"}, "reply_to_user": {"reputation": 71114, "user_id": 567435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zYyZz.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/567435/rahul"}, "edited": false, "score": 0, "creation_date": 1534373166, "post_id": 51867386, "comment_id": 90686742, "body": "@Rahul, what is expando?"}, {"owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 0, "creation_date": 1534373514, "post_id": 51867386, "comment_id": 90686831, "body": "@Alexan Rahul refers <a href=\"https://stackoverflow.com/questions/1653046/what-are-the-true-benefits-of-expandoobject\">to this by Expando</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "is_accepted": true, "score": 3, "last_activity_date": 1534373150, "creation_date": 1534373150, "answer_id": 51867446, "question_id": 51867386, "link": "https://stackoverflow.com/questions/51867386/deserialize-different-json-files-using-the-same-class/51867446#51867446", "title": "Deserialize different json files using the same class", "body": "<p>In both JSONs, <code>data</code> and <code>success</code> are part of an object, so you can use a generic wrapper:</p>\n\n<pre><code>public class Wrapper&lt;T&gt; \n{\n    // No need for [JsonProperty(\"data\")] here\n    public T[] Data { get; set; }\n    public bool Success { get; set; }\n}\n</code></pre>\n\n<p>And then you just need to specify <code>T</code> when de/serializing:</p>\n\n<pre><code>string json = \"...\";\nvar wrappedSuscribers = JsonConvert.DeserializeObject&lt;Wrapper&lt;Suscriber&gt;&gt;(json);\n//OR\nvar wrappedSomething = JsonConvert.DeserializeObject&lt;Wrapper&lt;string&gt;&gt;(json);\n</code></pre>\n"}], "owner": {"reputation": 6833, "user_id": 240564, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/U17en.png?s=128&g=1", "display_name": "Alexan", "link": "https://stackoverflow.com/users/240564/alexan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 51867446, "answer_count": 1, "score": 1, "last_activity_date": 1534373150, "creation_date": 1534372678, "question_id": 51867386, "link": "https://stackoverflow.com/questions/51867386/deserialize-different-json-files-using-the-same-class", "title": "Deserialize different json files using the same class", "body": "<p>I use the following class to deserialize json:</p>\n\n<pre><code>public class Welcome\n    {\n        [JsonProperty(\"data\")]\n        public Subscriber[] Data { get; set; }\n\n        [JsonProperty(\"success\")]\n        public bool Success { get; set; }            \n\n        public static Welcome FromJson(string json) =&gt; JsonConvert.DeserializeObject&lt;Welcome&gt;(json, Settings);\n\n        public static readonly JsonSerializerSettings Settings = new JsonSerializerSettings\n        {\n            MetadataPropertyHandling = MetadataPropertyHandling.Ignore,\n            DateParseHandling = DateParseHandling.None,\n            Converters = {\n                new IsoDateTimeConverter { DateTimeStyles = DateTimeStyles.AssumeUniversal }\n            },\n        };\n    }\n</code></pre>\n\n<p>It works fine with the following json:</p>\n\n<pre><code>{\n  \"data\": [\n    {\n      \"id\": \"04f8ab66-a44a-4918-a938-2d73f193b031\",\n      \"firstName\": \"Autumn\",\n      \"lastName\": \"Alexander\",\n      \"magazineIds\": [\n        5,\n        8,\n        7,\n        2,\n        9\n      ]\n    },\n    {\n      \"id\": \"63da0606-9b5a-4ac9-923b-f70045e95735\",\n      \"firstName\": \"Rebecca\",\n      \"lastName\": \"Parker\",\n      \"magazineIds\": [\n        5,\n        8,\n        1\n      ]\n    },    \n  ],\n  \"success\": true  \n}\n</code></pre>\n\n<p>And deserialized to the following class:</p>\n\n<pre><code>public class Subscriber\n    {      \n\n        [JsonProperty(\"id\")]\n        public Guid Id { get; set; }\n\n        [JsonProperty(\"firstName\")]\n        public string FirstName { get; set; }\n\n        [JsonProperty(\"lastName\")]\n        public string LastName { get; set; }\n\n        [JsonProperty(\"magazineIds\")]\n        public long[] MagazineIds { get; set; }\n    }\n</code></pre>\n\n<p>But I want to deserialize the following json:</p>\n\n<pre><code>{\n  \"data\": [\n    \"Science\",\n    \"Political\",\n    \"News\"\n  ],\n  \"success\": true  \n}\n</code></pre>\n\n<p>Data part is different.</p>\n\n<p>Can I use the same class for deserializing both?</p>\n"}, {"tags": ["c#", "acumatica"], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 1203107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f8f6105bf1e00ab362f43a5e6800f4c?s=128&d=identicon&r=PG", "display_name": "Jerry Welliver", "link": "https://stackoverflow.com/users/1203107/jerry-welliver"}, "edited": false, "score": 0, "creation_date": 1534953288, "post_id": 51941272, "comment_id": 90891863, "body": "See the latest code above.  The inventory issue is still not released.  Everything else is ok.  The invoice is released to open status and the shipment is completed."}], "tags": [], "owner": {"reputation": 2140, "user_id": 3973142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VtlaF.jpg?s=128&g=1", "display_name": "DChhapgar", "link": "https://stackoverflow.com/users/3973142/dchhapgar"}, "is_accepted": false, "score": 0, "last_activity_date": 1534823167, "creation_date": 1534823167, "answer_id": 51941272, "question_id": 51867337, "link": "https://stackoverflow.com/questions/51867337/release-invoice-and-inventory-issue-in-code/51941272#51941272", "title": "Release Invoice and Inventory Issue in code", "body": "<p>You can refer below code and revise yours</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>using System.Collections;\nusing PX.Data;\nusing PX.Objects.AR;\nusing PX.Objects.SO;\n\nnamespace PXDemoPkg\n{\n    public class SOShipmentEntryPXExt : PXGraphExtension&lt;SOShipmentEntry&gt;\n    {\n        public PXAction&lt;SOShipment&gt; DummyCustomAction;\n        [PXButton()]\n        [PXUIField(DisplayName = \"Dummy Custom Action\",\n                   MapEnableRights = PXCacheRights.Select,\n                   MapViewRights = PXCacheRights.Select)]\n        protected virtual IEnumerable dummyCustomAction(PXAdapter adapter)\n        {\n            SOShipment shipment = Base.Document.Current;\n\n            SOOrderShipment soOrderShipment = PXSelect&lt;SOOrderShipment,\n                                                    Where&lt;SOOrderShipment.shipmentNbr, Equal&lt;Required&lt;SOOrderShipment.shipmentNbr&gt;&gt;&gt;&gt;.\n                                                    Select(Base, shipment.ShipmentNbr);\n\n            ARInvoice arInvoice = PXSelect&lt;ARInvoice, Where&lt;ARInvoice.refNbr, Equal&lt;Required&lt;ARInvoice.refNbr&gt;&gt;,\n                                                        And&lt;ARInvoice.docType, Equal&lt;Required&lt;ARInvoice.docType&gt;&gt;&gt;&gt;&gt;.\n                                                        Select(Base, soOrderShipment.InvoiceNbr, \"INV\");\n\n            PXLongOperation.StartOperation(Base, delegate ()\n            {\n                SOInvoiceEntry soInvoiceGraph = PXGraph.CreateInstance&lt;SOInvoiceEntry&gt;();\n                SOShipmentEntry soShipmentGraph = PXGraph.CreateInstance&lt;SOShipmentEntry&gt;();\n\n                //Release Sales Invoice\n                soInvoiceGraph.Clear();\n                soInvoiceGraph.Document.Current = soInvoiceGraph.Document.Search&lt;ARInvoice.docType, ARInvoice.refNbr&gt;(arInvoice.DocType, arInvoice.RefNbr);\n                soInvoiceGraph.release.Press();\n\n                //Update IN on Shipment\n                soShipmentGraph.Clear();\n                soShipmentGraph.Document.Current = soShipmentGraph.Document.Search&lt;SOShipment.shipmentNbr&gt;(shipment.ShipmentNbr);\n                soShipmentGraph.UpdateIN.Press();\n\n            });\n            return adapter.Get();\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 325, "user_id": 1203107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f8f6105bf1e00ab362f43a5e6800f4c?s=128&d=identicon&r=PG", "display_name": "Jerry Welliver", "link": "https://stackoverflow.com/users/1203107/jerry-welliver"}, "is_accepted": true, "score": 0, "last_activity_date": 1535065347, "creation_date": 1535065347, "answer_id": 51995373, "question_id": 51867337, "link": "https://stackoverflow.com/questions/51867337/release-invoice-and-inventory-issue-in-code/51995373#51995373", "title": "Release Invoice and Inventory Issue in code", "body": "<p>After much browsing through the code repository, I found some code for releasing issues.  I adapted it to my situation and came up with the solution below which works.  I am posting it in case someone else is in a similar situation.</p>\n\n<pre><code>if (arInvoice != null)\n{\n    //Release Invoice\n    PXLongOperation.StartOperation(this, delegate ()\n    {\n        soInvoiceGraph.Clear();\n        soInvoiceGraph.Document.Current = arInvoice;\n        soInvoiceGraph.release.Press();\n\n        //Lookup issue, add to list, and call release\n        INRegister issue = PXSelect&lt;INRegister,\n            Where&lt;INRegister.sOShipmentNbr, Equal&lt;Required&lt;INRegister.sOShipmentNbr&gt;&gt;,\n            And&lt;INRegister.docType, Equal&lt;Required&lt;INRegister.docType&gt;&gt;&gt;&gt;&gt;\n            .Select(this, asnShipment.ShipmentNbr, INDocType.Issue);\n        //Check setup flag and issue status\n        if (sosetup.Current.AutoReleaseIN == true &amp;&amp;\n            issue.Hold == false &amp;&amp;\n            issue.Released == false)\n        {\n            List&lt;INRegister&gt; issues = new List&lt;INRegister&gt;();\n            issues.Add(issue);\n            INDocumentRelease.ReleaseDoc(issues, false);\n        }\n    });\n}\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 1203107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f8f6105bf1e00ab362f43a5e6800f4c?s=128&d=identicon&r=PG", "display_name": "Jerry Welliver", "link": "https://stackoverflow.com/users/1203107/jerry-welliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 51995373, "answer_count": 2, "score": 0, "last_activity_date": 1535065347, "creation_date": 1534372314, "last_edit_date": 1534953192, "question_id": 51867337, "link": "https://stackoverflow.com/questions/51867337/release-invoice-and-inventory-issue-in-code", "title": "Release Invoice and Inventory Issue in code", "body": "<p>I have a routine to release an invoice and post to inventory that worked in v6.1.  I think it was working in 2017R2 also, but I don't know for sure.  It does not seem to work at all in 2018R1.  The invoice releases, but the inventory issue is not released.  The automations are all set to automatically release the issue and they work when processed manually.  Only my code does not release the issue.  I am at a loss as to why.  Any ideas?</p>\n\n<p>============================================================</p>\n\n<p>I have updated the code to the latest version based on your suggestions, but the inventory issue is still not released.</p>\n\n<pre><code>foreach (EDASNShipment asnShipment in PXSelect&lt;EDASNShipment,\n    Where&lt;EDASNShipment.aSNNbr, Equal&lt;Required&lt;EDASN.aSNNbr&gt;&gt;&gt;&gt;.Select(this, asn.ASNNbr))\n{\n    soShipmentGraph.Clear();\n    SOShipment soShipment = soShipmentGraph.Document.Search&lt;SOShipment.shipmentNbr&gt;(asnShipment.ShipmentNbr);\n    var soShipmentExt = PXCache&lt;SOShipment&gt;.GetExtension&lt;SOShipmentExt&gt;(soShipment);\n\n    SOOrderShipment soOrderShipment = PXSelect&lt;SOOrderShipment,\n        Where&lt;SOOrderShipment.shipmentNbr, Equal&lt;Required&lt;SOOrderShipment.shipmentNbr&gt;&gt;&gt;&gt;.Select(this, asnShipment.ShipmentNbr);\n\n    ARInvoice arInvoice = PXSelect&lt;ARInvoice, Where&lt;ARInvoice.refNbr, Equal&lt;Required&lt;ARInvoice.refNbr&gt;&gt;,\n        And&lt;ARInvoice.docType, Equal&lt;Required&lt;ARInvoice.docType&gt;&gt;&gt;&gt;&gt;.Select(this, soOrderShipment.InvoiceNbr, \"INV\");\n    if (soShipment.Status != \"C\")\n    {\n        if (autoReleaseInvoices)\n        {\n            if (arInvoice != null)\n            {\n                /*\n                soInvoiceGraph.Clear();\n                soInvoiceGraph.Document.Current = arInvoice;\n                soInvoiceGraph.release.Press();\n                var a = new PXAdapter(soShipmentGraph.Document)\n                {\n                    Searches = new object[] { soShipment.ShipmentNbr }\n                };\n                //Note: Post Invoice to IN is Action 3 \n                a.Arguments.Add(\"actionID\", 3);\n                a.MassProcess = false;                       //Don't pop up invoice screen\n                a.MaximumRows = 1;\n                PXLongOperation.StartOperation(this, () =&gt;\n                {\n                    foreach (SOShipment shipment in soShipmentGraph.action.Press(a))\n                    {\n                        shipment.ShipmentNbr = shipment.ShipmentNbr;\n                    }\n                });\n                */\n\n                //Release Invoice\n                PXLongOperation.StartOperation(this, delegate ()\n                {\n                    soInvoiceGraph.Clear();\n                    soInvoiceGraph.Document.Current = arInvoice;\n                    soInvoiceGraph.release.Press();\n\n                    //Update IN on Shipment\n                    soShipmentGraph.Clear();\n                    soShipmentGraph.Document.Current = \n                            soShipmentGraph.Document.Search&lt;SOShipment.shipmentNbr&gt;(asnShipment.ShipmentNbr);\n                    soShipmentGraph.UpdateIN.Press();\n                });\n            }\n            else\n            {\n                statusText += String.Format(\"Acumatica Invoice could not be located: {0}  \", soOrderShipment.InvoiceNbr);\n                errorOccurred = true;\n                bolAtLeastOneError = true;\n            }\n        }\n    }\n    soShipmentGraph.Clear();\n    soShipment = soShipmentGraph.Document.Search&lt;SOShipment.shipmentNbr&gt;(asnShipment.ShipmentNbr);\n    soShipmentExt = PXCache&lt;SOShipment&gt;.GetExtension&lt;SOShipmentExt&gt;(soShipment);\n    soShipmentExt.UsrEDIStatus = \"S\";       //Sent\n    soShipmentGraph.Document.Update(soShipment);\n    soShipmentGraph.Persist();\n}\n</code></pre>\n"}, {"tags": ["c#", "wpf", "wpfdatagrid"], "comments": [{"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 1, "creation_date": 1534372523, "post_id": 51867329, "comment_id": 90686594, "body": "Did you try binding <code>Mode=TwoWay</code>?"}, {"owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "reply_to_user": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1534372605, "post_id": 51867329, "comment_id": 90686608, "body": "Didn&#39;t hear of that before - this is my first time with graphical applications... Were - or better: for which element - do I have to set this?"}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1534372632, "post_id": 51867329, "comment_id": 90686614, "body": "OK I&#39;ll try to verify and post an answer."}], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "edited": false, "score": 0, "creation_date": 1534375533, "post_id": 51867612, "comment_id": 90687258, "body": "Very working, much wow! Thanks, now I can go to sleep in peace. Cheers!"}], "tags": [], "owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "is_accepted": true, "score": 1, "last_activity_date": 1534374528, "creation_date": 1534374528, "answer_id": 51867612, "question_id": 51867329, "link": "https://stackoverflow.com/questions/51867329/wpf-datagrid-does-not-save-changed-value-to-variable/51867612#51867612", "title": "WPF DataGrid does not save changed value to variable", "body": "<p>I see you've already figured out <code>Mode=TwoWay</code> (which isn't necessary anyway, as it is the default if you don't explicitly set it). Now all you have to do is set <code>UpdateSourceTrigger</code> to <code>PropertyChanged</code>.</p>\n\n<pre><code>&lt;DataTemplate&gt;\n    &lt;CheckBox IsChecked=\"{Binding enabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}\"/&gt;\n&lt;/DataTemplate&gt;\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 51867612, "answer_count": 1, "score": 1, "last_activity_date": 1534374528, "creation_date": 1534372253, "last_edit_date": 1534374099, "question_id": 51867329, "link": "https://stackoverflow.com/questions/51867329/wpf-datagrid-does-not-save-changed-value-to-variable", "title": "WPF DataGrid does not save changed value to variable", "body": "<p>So, I have this little WPF snippet:</p>\n\n<pre><code>&lt;DataGrid x:Name=\"lstCategories\" AutoGenerateColumns=\"False\" Grid.Row=\"0\"\n              Margin=\"5,5,5,5\" ScrollViewer.CanContentScroll=\"True\" SelectionMode=\"Single\" CanUserSortColumns=\"False\" CanUserReorderColumns=\"False\"&gt;\n        &lt;DataGrid.Columns&gt;\n            &lt;DataGridTemplateColumn&gt;\n                &lt;DataGridTemplateColumn.Header&gt;\n                    &lt;DataGridColumnHeader Tag=\"All\" Click=\"DataGridColumnHeader_Click\"&gt;All&lt;/DataGridColumnHeader&gt;\n                &lt;/DataGridTemplateColumn.Header&gt;\n                &lt;DataGridTemplateColumn.CellTemplate&gt;\n                    &lt;DataTemplate&gt;\n                        &lt;CheckBox IsChecked=\"{Binding enabled}\" /&gt;\n                    &lt;/DataTemplate&gt;\n                &lt;/DataGridTemplateColumn.CellTemplate&gt;\n            &lt;/DataGridTemplateColumn&gt;\n            &lt;DataGridTextColumn Header=\"Category\" Width=\"Auto\" IsReadOnly=\"True\" Binding=\"{Binding category}\" /&gt;\n        &lt;/DataGrid.Columns&gt;\n    &lt;/DataGrid&gt;\n</code></pre>\n\n<p>Which displays data as given in:</p>\n\n<pre><code>lstCategories.ItemsSource = categoryList;\n</code></pre>\n\n<p>Now, when the user clicks the checkbox, I'd expect the datagrid to write this change to <code>categoryListItem.enabled</code>, but when I check the value, it says true no matter what.\nHow can I make the DataGrid store changes to the variable it uses as data source?</p>\n\n<p>Additional Info: I've chosen the TemplateColumn-approach with an embedded checkbox because this way the user does not have to click two times to modify the check box.</p>\n\n<p><strong>Update 1:</strong>\nI've updated the XAML to incorporate TwoWay-Binding as:</p>\n\n<pre><code>&lt;CheckBox IsChecked=\"{Binding enabled, Mode=TwoWay}\"/&gt;\n</code></pre>\n\n<p>The data source variable still does not get updated.</p>\n"}, {"tags": ["c#", "unit-testing", "moq"], "comments": [{"owner": {"reputation": 71114, "user_id": 567435, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zYyZz.jpg?s=128&g=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/567435/rahul"}, "edited": false, "score": 0, "creation_date": 1534372312, "post_id": 51867124, "comment_id": 90686554, "body": "what if you rather do <code>.Returns(Task.FromResult(expectedReturn))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1624, "user_id": 315850, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f62ff2e06a2accc9ee86805d4d6b715c?s=128&d=identicon&r=PG", "display_name": "Carl Bussema", "link": "https://stackoverflow.com/users/315850/carl-bussema"}, "edited": false, "score": 0, "creation_date": 1534433493, "post_id": 51867568, "comment_id": 90712716, "body": "My oversimplified example wound up having some other problems, it seems. You&#39;re correct this seems to work. I wound up deciding that <code>Run()</code> really didn&#39;t need to take <code>Func&lt;&gt;</code> anyway and refactoring around that."}], "tags": [], "owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "is_accepted": true, "score": 2, "last_activity_date": 1534374127, "creation_date": 1534374127, "answer_id": 51867568, "question_id": 51867124, "link": "https://stackoverflow.com/questions/51867124/moq-with-funcfoo-tasklistbar/51867568#51867568", "title": "Moq with Func&lt;Foo, Task&lt;List&lt;Bar&gt;&gt;&gt;&gt;", "body": "<p>I am using Moq 4.9.0 and have tested this both on .NET Core 2.1, as well as inside LINQPad using the .NET Framework. It compiles and runs for me without any problems. I am able to run the mock setup, and I am also able to call the mocked method on the mock object, and retrieve the expected return result.</p>\n\n<p>The following is my test code:</p>\n\n<pre><code>class Program\n{\n    static void Main(string[] args)\n    {\n        var expectedReturn = new List&lt;Product&gt; { new Product { StockNumber = \"123\" } };\n\n        var provider = new Mock&lt;IProvider&gt;();\n        provider\n            .Setup(x =&gt; x.Run(\n                It.IsAny&lt;Func&lt;IRemoteClient, Task&lt;List&lt;Product&gt;&gt;&gt;&gt;(),\n                It.IsAny&lt;string&gt;()))\n            .ReturnsAsync(expectedReturn);\n\n        var result = provider.Object.Run(client =&gt; client.GetAsync&lt;List&lt;Product&gt;&gt;(null), \"foo\");\n\n        Console.WriteLine(result.Result[0].StockNumber);\n    }\n}\n\npublic interface IProvider\n{\n    Task&lt;T&gt; Run&lt;T&gt;(Func&lt;IRemoteClient, Task&lt;T&gt;&gt; action, string name);\n}\npublic interface IRemoteClient\n{\n    Task&lt;T&gt; GetAsync&lt;T&gt;(object request);\n}\npublic class Product\n{\n    public string StockNumber { get; set; }\n}\n</code></pre>\n"}], "owner": {"reputation": 1624, "user_id": 315850, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f62ff2e06a2accc9ee86805d4d6b715c?s=128&d=identicon&r=PG", "display_name": "Carl Bussema", "link": "https://stackoverflow.com/users/315850/carl-bussema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 51867568, "answer_count": 1, "score": 2, "last_activity_date": 1534374127, "creation_date": 1534370968, "last_edit_date": 1534372022, "question_id": 51867124, "link": "https://stackoverflow.com/questions/51867124/moq-with-funcfoo-tasklistbar", "title": "Moq with Func&lt;Foo, Task&lt;List&lt;Bar&gt;&gt;&gt;&gt;", "body": "<p>Scenario:</p>\n\n<p>We are in the lovely scenario of a terrible data source that requires an arcane syntax. We have built our \"repository\" layer to translate simple parameters (primitive values) into the correct syntax for the destination. </p>\n\n<p>We would like to unit test that:</p>\n\n<ol>\n<li>The correct filters have been applied (can be done by checking the string that the repo's helper methods create)</li>\n<li>The (mocked) remote data source is called exactly once</li>\n<li>The (mocked) data we have defined the remote data source as returning is passed back as the return value when we call the repo.  </li>\n</ol>\n\n<p>For example</p>\n\n<pre><code>var expectedReturn = new List&lt;Product&gt; { new Product { StockNumber = \"123\" } };\n\nprovider.Setup(x =&gt; x.Run(It.IsAny&lt;Func&lt;IRemoteClient, Task&lt;List&lt;Product&gt;&gt;&gt;&gt;(),\n    It.IsAny&lt;string&gt;())).ReturnsAsync(expectedReturn);\n</code></pre>\n\n<p>Moq is failing on the <code>Setup</code> line with a <code>NotSupportedException</code>. I've read probably a dozen or more SO posts and can't find out why it doesn't work. </p>\n\n<p>In normal usage, the Repo will use something like:</p>\n\n<pre><code>provider.Run(x =&gt; x.GetAsync&lt;List&lt;Product&gt;&gt;(requestBuilder.Request), \"foo\")\n</code></pre>\n\n<p>Definition of run in <code>provider</code> interface:</p>\n\n<pre><code>Task&lt;T&gt; Run&lt;T&gt;(Func&lt;IRemoteClient, Task&lt;T&gt;&gt; action, string name);\n</code></pre>\n\n<p>Since the requestBuilder is injected as well, we can easily evaluate that the request is built correctly as far as the number and type of parameters, but we can't run the test at all because the <code>Mock</code> call fails the setup and so we never get there.</p>\n"}, {"tags": ["c#", "unity3d"], "comments": [{"owner": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1534370486, "post_id": 51867023, "comment_id": 90686096, "body": "Your code only shows the position update, not the rotation update."}, {"owner": {"reputation": 271, "user_id": 5741614, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f13fa37f0b07d80da80f8a2a483c5488?s=128&d=identicon&r=PG&f=1", "display_name": "dulongj", "link": "https://stackoverflow.com/users/5741614/dulongj"}, "reply_to_user": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1534370531, "post_id": 51867023, "comment_id": 90686103, "body": "The rotation is updated in the last line, by setting the camera transform.up to be the same as the players."}, {"owner": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1534371634, "post_id": 51867023, "comment_id": 90686389, "body": "You probably shouldn&#39;t use FixedUpdate for this."}, {"owner": {"reputation": 271, "user_id": 5741614, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f13fa37f0b07d80da80f8a2a483c5488?s=128&d=identicon&r=PG&f=1", "display_name": "dulongj", "link": "https://stackoverflow.com/users/5741614/dulongj"}, "reply_to_user": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1534371887, "post_id": 51867023, "comment_id": 90686447, "body": "If I use Update or LateUpdate then I get very jittery movement from my player."}, {"owner": {"reputation": 271, "user_id": 5741614, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f13fa37f0b07d80da80f8a2a483c5488?s=128&d=identicon&r=PG&f=1", "display_name": "dulongj", "link": "https://stackoverflow.com/users/5741614/dulongj"}, "reply_to_user": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1534373858, "post_id": 51867023, "comment_id": 90686903, "body": "I believe it doesn&#39;t have anything to do with FixedUpdate.  I believe I need to use Quaternions somehow to allow the rotation of the camera to exceed 360 and just continue spinning.  This would replace the last line of the method, but I&#39;m not sure how to properly use Quaternion."}], "answers": [{"tags": [], "owner": {"reputation": 271, "user_id": 5741614, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f13fa37f0b07d80da80f8a2a483c5488?s=128&d=identicon&r=PG&f=1", "display_name": "dulongj", "link": "https://stackoverflow.com/users/5741614/dulongj"}, "is_accepted": false, "score": 0, "last_activity_date": 1534374355, "creation_date": 1534374355, "answer_id": 51867591, "question_id": 51867023, "link": "https://stackoverflow.com/questions/51867023/unity-camera-flicker-when-going-from-359-rotation-to-0/51867591#51867591", "title": "Unity Camera flicker when going from 359 rotation to 0", "body": "<p>I solved my issue by changing the last line from <br>\n<code>trans.up = target.up;</code><br>\nto <br>\n<code>trans.rotation = target.rotation;</code></p>\n"}], "owner": {"reputation": 271, "user_id": 5741614, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f13fa37f0b07d80da80f8a2a483c5488?s=128&d=identicon&r=PG&f=1", "display_name": "dulongj", "link": "https://stackoverflow.com/users/5741614/dulongj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534402224, "creation_date": 1534370324, "last_edit_date": 1534402224, "question_id": 51867023, "link": "https://stackoverflow.com/questions/51867023/unity-camera-flicker-when-going-from-359-rotation-to-0", "title": "Unity Camera flicker when going from 359 rotation to 0", "body": "<p>I'm using this simple CameraFollow script to have my camera follow behind my player's movements.  The problem is that my player can spin a full 360 degrees, and the camera has to rotate with it.  This works well, except when completing a full turn. When the player transform goes from 359 degrees back to 0, the camera flickers as it does a full backwards 360 degree loop to catch up, instead of moving 1 degree to catch up.  How can I fix this? <br>\nIn the code below the 'target' is my player, and 'trans' is the transform of the camera.  It's also worth noting that if the player stops at exactly 0 degrees it jumps back to 180 for some reason.</p>\n\n<pre><code> public class CameraFollow : MonoBehaviour {\n\n   [SerializeField] Transform target;\n   [SerializeField] Vector3 defaultDistance = new Vector3(0f, 3.5f, -12f);\n   [SerializeField] float distanceDamp = 0.05f;\n   [SerializeField] Vector3 velocity = Vector3.one;\n\n   Transform trans;\n\n   private void Awake()\n   {\n       trans = transform;\n   }\n\n   private void FixedUpdate()\n   {\n       Vector3 toPos = target.position + (target.rotation * defaultDistance);\n       Vector3 curPos = Vector3.SmoothDamp(trans.position, toPos, ref velocity, distanceDamp);\n       trans.position = curPos;\n       trans.up = target.up;\n   }\n}\n</code></pre>\n"}, {"tags": ["c#", "jenkins"], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 3049733, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/f4e6b0696522dfa31f6c634ae324ea7c?s=128&d=identicon&r=PG&f=1", "display_name": "Pranav Raj", "link": "https://stackoverflow.com/users/3049733/pranav-raj"}, "edited": false, "score": 0, "creation_date": 1534455225, "post_id": 51867518, "comment_id": 90722749, "body": "The problem is getting the lastBuild in  <a href=\"https://Jenkins-Pipeline-URL/lastBuild/api/json\" rel=\"nofollow noreferrer\">Jenkins-Pipeline-URL/lastBuild/api/json</a> url.  I can access the list of builds from <a href=\"https://Jenkins-Pipeline-URL/api/json\" rel=\"nofollow noreferrer\">Jenkins-Pipeline-URL/api/json</a> url, but how will I know which build did i kick off - It can happen that while my code was starting the job, another user also came in and kicked off another job"}, {"owner": {"reputation": 2153, "user_id": 3687725, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1We1W.jpg?s=128&g=1", "display_name": "Preston Martin", "link": "https://stackoverflow.com/users/3687725/preston-martin"}, "reply_to_user": {"reputation": 603, "user_id": 3049733, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/f4e6b0696522dfa31f6c634ae324ea7c?s=128&d=identicon&r=PG&f=1", "display_name": "Pranav Raj", "link": "https://stackoverflow.com/users/3049733/pranav-raj"}, "edited": false, "score": 0, "creation_date": 1534457117, "post_id": 51867518, "comment_id": 90723343, "body": "If that is a concern, you could add a &quot;quiet period&quot; to your builds (30 seconds for example). This ensures that builds can only be ran within the specified time frame of each other. If two builds are kicked off within 30 seconds of each other, the later will overwrite the former build. <a href=\"https://jenkins.io/blog/2010/08/11/quiet-period-feature\" rel=\"nofollow noreferrer\">jenkins.io/blog/2010/08/11/quiet-period-feature</a>"}, {"owner": {"reputation": 5404, "user_id": 537503, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/74b320743aa89bafb58a43cc5e08123b?s=128&d=identicon&r=PG", "display_name": "Andy Dufresne", "link": "https://stackoverflow.com/users/537503/andy-dufresne"}, "edited": false, "score": 0, "creation_date": 1568185846, "post_id": 51867518, "comment_id": 102190244, "body": "I could see the pipeline api working i.e. http://&lt;machine-name&gt;:8080/view/&lt;pipeline&gt;/api/json?pretty=t&zwnj;&#8203;rue but I get a 404 for the lastBuild api mentioned here - http://&lt;machine-name&gt;:8080/view/&lt;pipeline&gt;/lastBuild/api/jso&zwnj;&#8203;n?pretty=true. Is there anything I am missing? I am looking to get the current status of the pipeline."}], "tags": [], "owner": {"reputation": 2153, "user_id": 3687725, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1We1W.jpg?s=128&g=1", "display_name": "Preston Martin", "link": "https://stackoverflow.com/users/3687725/preston-martin"}, "is_accepted": false, "score": 3, "last_activity_date": 1534373620, "last_edit_date": 1592644375, "creation_date": 1534373620, "answer_id": 51867518, "question_id": 51866992, "link": "https://stackoverflow.com/questions/51866992/jenkins-pipeline-getting-the-pipeline-status-in-c/51867518#51867518", "title": "Jenkins pipeline - Getting the pipeline status in C#", "body": "<p>From the Jenkins API documentation:</p>\n<blockquote>\n<p><strong>Accessing Progressive Console Output</strong></p>\n<p>You can retrieve in-progress\nconsole output by making repeated GET requests with a parameter.\nYou'll basically send GET request to this URL (or this URL if you want\nHTML that can be put into  tag.) The start parameter controls the\nbyte offset of where you start.</p>\n<p>The response will contain a chunk of the console output, as well as\nthe X-Text-Size header that represents the bytes offset (of the raw\nlog file). This is the number you want to use as the start parameter\nfor the next call.</p>\n<p>If the response also contains the X-More-Data: true header, the server\nis indicating that the build is in progress, and you need to repeat\nthe request after some delay. The Jenkins UI waits 5 seconds before\nmaking the next call. When this header is not present, you know that\nyou've retrieved all the data and the build is complete.</p>\n</blockquote>\n<p>Your url will look something like:</p>\n<p><code>https://Jenkins-Pipeline-URL/lastBuild/logText/progressiveText?start=0</code></p>\n<p>Depending on what you plan to do with the status, you can either keep polling the entire logs, or you can increment the start counter as you read in text based on the number of characters read. This will give you new running output from the build.</p>\n<p>Also from the documentation:</p>\n<blockquote>\n<p><code>https://Jenkins-Pipeline-URL/lastBuild/buildNumber</code></p>\n<p>This URL returns the build number in text/plain format.</p>\n</blockquote>\n<p>If you only wish to obtain whether the build passed or failed:</p>\n<p><code>https://Jenkins-Pipeline-URL/lastBuild/api/json</code></p>\n<p>Will return json (or xml if <em>json</em> is replaced in the url) that can be parsed for the result object:</p>\n<blockquote>\n<p>&quot;result&quot;:&quot;SUCCESS&quot;</p>\n</blockquote>\n<p>You can create repeated GET requests, similar to the first answer, to get an updated status.</p>\n"}], "owner": {"reputation": 603, "user_id": 3049733, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/f4e6b0696522dfa31f6c634ae324ea7c?s=128&d=identicon&r=PG&f=1", "display_name": "Pranav Raj", "link": "https://stackoverflow.com/users/3049733/pranav-raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534373620, "creation_date": 1534370109, "last_edit_date": 1534372329, "question_id": 51866992, "link": "https://stackoverflow.com/questions/51866992/jenkins-pipeline-getting-the-pipeline-status-in-c", "title": "Jenkins pipeline - Getting the pipeline status in C#", "body": "<p>I was able to kick off a Jenkins pipeline build by sending a post request (with username/password) to <code>Jenkins-Pipeline-URL/buildwithParameter</code>.</p>\n\n<p>Is there a way inside the code to know which build I kicked off and also get the status of that build using some rest API?</p>\n"}, {"tags": ["javascript", "c#", "hex", "buffer"], "comments": [{"owner": {"reputation": 36762, "user_id": 869621, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7ab9817b53b7e7b0e735528bc9c2372?s=128&d=identicon&r=PG", "display_name": "Kevin Gosse", "link": "https://stackoverflow.com/users/869621/kevin-gosse"}, "edited": false, "score": 0, "creation_date": 1534369876, "post_id": 51866880, "comment_id": 90685918, "body": "If that an empty buffer? What is the MD5 you&#39;re getting from the Javascript and what is the MD5 you were expecting?"}, {"owner": {"reputation": 1144, "user_id": 4927236, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7IKWp.jpg?s=128&g=1", "display_name": "TJBlackman", "link": "https://stackoverflow.com/users/4927236/tjblackman"}, "reply_to_user": {"reputation": 36762, "user_id": 869621, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7ab9817b53b7e7b0e735528bc9c2372?s=128&d=identicon&r=PG", "display_name": "Kevin Gosse", "link": "https://stackoverflow.com/users/869621/kevin-gosse"}, "edited": false, "score": 0, "creation_date": 1534370207, "post_id": 51866880, "comment_id": 90686021, "body": "I updated the question to show the result of the <code>md5()</code> function, which is a STRING. The package has 850K+ downloads per week, so I&#39;m sure it is reliable. The issue is using the md5 hash to generate a hexadecimal pairs, as shown in the C# documentation: <a href=\"https://msdn.microsoft.com/en-us/library/3a733s97(v=vs.110).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/3a733s97(v=vs.110).aspx</a>"}], "owner": {"reputation": 1144, "user_id": 4927236, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7IKWp.jpg?s=128&g=1", "display_name": "TJBlackman", "link": "https://stackoverflow.com/users/4927236/tjblackman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1534370237, "answer_count": 0, "score": 0, "last_activity_date": 1534431785, "creation_date": 1534369519, "last_edit_date": 1534431785, "question_id": 51866880, "link": "https://stackoverflow.com/questions/51866880/given-an-arraybuffer-of-known-size-get-string-of-hexadecimal-pairs", "closed_reason": "Duplicate", "title": "Given an ArrayBuffer of known size, get string of hexadecimal pairs", "body": "<p>I'm attempting to re-create this bit of C# code, but in Javascript, but the results are not coming out the same at all. The goal is to take a buffer of a known size, get an MD5 hash of it, then convert the MD5 hash to a string of <a href=\"https://msdn.microsoft.com/en-us/library/3a733s97(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><strong>hexadecimal pairs separated by hyphens</strong></a>, where each pair represents the corresponding element in value, then remove all the <code>-</code>'s in the string. But... do it in Javascript. </p>\n\n<p><strong>C# Code</strong></p>\n\n<pre><code>internal static string ComputeHash(byte[] buffer)\n{\n    HashAlgorithm MD5 = new MD5CryptoServiceProvider();\n    return BitConverter.ToString(MD5.ComputeHash(buffer)).Replace(\"-\", string.Empty);\n}\n</code></pre>\n\n<p><strong>My Javascript</strong></p>\n\n<pre><code>const buffer    = new ArrayBuffer(1024); \nconst md5       = require('md5'); // https://www.npmjs.com/package/md5\nconst hash      = md5(buffer); // 441018525208457705bf09a8ee3c1093\nconst hexString = hash.toString('hex');\n\nconsole.log(hexString); // not correct\n</code></pre>\n\n<p>I appreciate any and all pointers and tips, even minor suggestions on how to improve the actual question itself. Thanks for looking! </p>\n\n<p><strong>SOLVED:</strong> This package did it correctly for me... Sorry for the (semi)-duplicate answer.\n<a href=\"https://www.npmjs.com/package/md5-hex\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/md5-hex</a></p>\n"}, {"tags": ["c#", "wpf", "custom-controls", "controltemplate"], "comments": [{"owner": {"reputation": 476, "user_id": 6859121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCTLp.png?s=128&g=1", "display_name": "Squirrel.Downy", "link": "https://stackoverflow.com/users/6859121/squirrel-downy"}, "edited": false, "score": 0, "creation_date": 1534386356, "post_id": 51866779, "comment_id": 90689347, "body": "Try &quot;UserControl&quot;. It&#39;s very convenient to use in this case. Read more: <a href=\"https://stackoverflow.com/questions/11247708/custom-vs-user-control\">Custom vs User control</a>"}, {"owner": {"reputation": 799, "user_id": 8890256, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62b21a4f88cd467630b4f224cbfce13a?s=128&d=identicon&r=PG&f=1", "display_name": "RezaNoei", "link": "https://stackoverflow.com/users/8890256/rezanoei"}, "reply_to_user": {"reputation": 476, "user_id": 6859121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCTLp.png?s=128&g=1", "display_name": "Squirrel.Downy", "link": "https://stackoverflow.com/users/6859121/squirrel-downy"}, "edited": false, "score": 0, "creation_date": 1534431128, "post_id": 51866779, "comment_id": 90711309, "body": "@mm8 answer was great. this is good to know the secrets."}], "answers": [{"comments": [{"owner": {"reputation": 799, "user_id": 8890256, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62b21a4f88cd467630b4f224cbfce13a?s=128&d=identicon&r=PG&f=1", "display_name": "RezaNoei", "link": "https://stackoverflow.com/users/8890256/rezanoei"}, "edited": false, "score": 0, "creation_date": 1534430956, "post_id": 51874076, "comment_id": 90711186, "body": "Thanks !!! That was great. so if i had multiple controls; should i place whole styles in this file (<code>generic.xaml</code> i mean). does it possible to put them in separate files ?"}, {"owner": {"reputation": 133235, "user_id": 7252182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUgxG.png?s=128&g=1", "display_name": "mm8", "link": "https://stackoverflow.com/users/7252182/mm8"}, "reply_to_user": {"reputation": 799, "user_id": 8890256, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62b21a4f88cd467630b4f224cbfce13a?s=128&d=identicon&r=PG&f=1", "display_name": "RezaNoei", "link": "https://stackoverflow.com/users/8890256/rezanoei"}, "edited": false, "score": 0, "creation_date": 1534431016, "post_id": 51874076, "comment_id": 90711230, "body": "You can use the MergedDictionaries property to merge several different resources into generic.xaml."}, {"owner": {"reputation": 799, "user_id": 8890256, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62b21a4f88cd467630b4f224cbfce13a?s=128&d=identicon&r=PG&f=1", "display_name": "RezaNoei", "link": "https://stackoverflow.com/users/8890256/rezanoei"}, "edited": false, "score": 0, "creation_date": 1534459569, "post_id": 51874076, "comment_id": 90723972, "body": "MergedDictionaries not working for me. I added this into generic.xaml : <code>&lt;ResourceDictionary.MergedDictionaries&gt;&lt;ResourceDictionary Source=&quot;Panel.xaml&quot;&#47;&gt;&lt;&#47;ResourceDictionary.MergedDictionaries&zwnj;&#8203;&gt;</code> but i have runtime error: <code>Cannot locate resource &#39;panel.xaml&#39;</code> (Panel.xaml is in Themes folder; i tried to change it&#39;s location and test it again but it still not working)"}, {"owner": {"reputation": 799, "user_id": 8890256, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62b21a4f88cd467630b4f224cbfce13a?s=128&d=identicon&r=PG&f=1", "display_name": "RezaNoei", "link": "https://stackoverflow.com/users/8890256/rezanoei"}, "edited": false, "score": 0, "creation_date": 1534495472, "post_id": 51874076, "comment_id": 90734086, "body": "I have found that Relative source doesn&#39;t accepted in generic.xaml. I replaced my resourceDictionary to <code>&lt;ResourceDictionary Source=&quot;pack:&#47;&#47;application:,,,&#47;Bootstrap;component&#47;Themes&#47;Pa&zwnj;&#8203;nel.xaml&quot;&#47;&gt;</code> in generic.xaml and its working now."}], "tags": [], "owner": {"reputation": 133235, "user_id": 7252182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUgxG.png?s=128&g=1", "display_name": "mm8", "link": "https://stackoverflow.com/users/7252182/mm8"}, "is_accepted": true, "score": 1, "last_activity_date": 1534412658, "creation_date": 1534412658, "answer_id": 51874076, "question_id": 51866779, "link": "https://stackoverflow.com/questions/51866779/setting-default-controltemplate-for-wpf-customcontrol/51874076#51874076", "title": "Setting default ControlTemplate for WPF CustomControl", "body": "<p>A default <code>Style</code> for a control should be define in a <code>ResourceDictionary</code> called <code>generic.xaml</code> and this <code>ResourceDictionary</code> should be located in a folder called <code>Themes</code> at the root of the assembly in which the control is defined by default. </p>\n\n<p>These names are by convention so just move your <code>Style</code> to <code>Themes/generic.xaml</code>.</p>\n"}], "owner": {"reputation": 799, "user_id": 8890256, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62b21a4f88cd467630b4f224cbfce13a?s=128&d=identicon&r=PG&f=1", "display_name": "RezaNoei", "link": "https://stackoverflow.com/users/8890256/rezanoei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 51874076, "answer_count": 1, "score": 0, "last_activity_date": 1534412658, "creation_date": 1534368905, "question_id": 51866779, "link": "https://stackoverflow.com/questions/51866779/setting-default-controltemplate-for-wpf-customcontrol", "title": "Setting default ControlTemplate for WPF CustomControl", "body": "<p>I have designed some WPF CustomControl and I wrote a ControlTemplate for them, and i assigned ControlTemplates to those controls through styles :</p>\n\n<p>for Example: </p>\n\n<pre><code> public class BootstrapText : TextBox\n {\n     protected override void OnLostFocus(RoutedEventArgs e)\n     {\n          // ...\n     }\n\n     protected override void OnTextChanged(TextChangedEventArgs e)\n     {\n         // ...\n         base.OnTextChanged(e);\n     }\n\n     public static readonly DependencyProperty RegexProperty = DependencyProperty.Register(\"Regex\", typeof(string), typeof(BootstrapText), new PropertyMetadata(null));\n\n     public bool IsValid\n     {\n        // ...\n     }\n\n     public string Regex\n     {\n       // ...          \n     }\n\n     static BootstrapText()\n     {\n         DefaultStyleKeyProperty.OverrideMetadata(typeof(BootstrapText), new FrameworkPropertyMetadata(typeof(BootstrapText)));\n     }\n }\n</code></pre>\n\n<p>and ControlTemplate (Actually Style) is Something like: </p>\n\n<pre><code> &lt;Style TargetType=\"Controls:BootstrapText\" BasedOn=\"{StaticResource FontBase}\"&gt;\n     &lt;Setter Property=\"Padding\" Value=\"2\"/&gt;\n     &lt;Setter Property=\"Width\" Value=\"240\"/&gt;\n     &lt;Setter Property=\"SnapsToDevicePixels\" Value=\"True\"&gt;&lt;/Setter&gt;\n     &lt;Setter Property=\"Background\" Value=\"#FEFEFE\"/&gt;\n     &lt;!--&lt;Setter Property=\"VerticalContentAlignment\" Value=\"Center\"/&gt;--&gt;\n     &lt;Setter Property=\"Template\"&gt;\n         &lt;Setter.Value&gt;\n             &lt;ControlTemplate TargetType=\"Controls:BootstrapText\"&gt;\n                 &lt;Grid&gt;\n                     &lt;Border Name=\"container\" HorizontalAlignment=\"Left\" Padding=\"{TemplateBinding Padding}\" Height=\"{TemplateBinding Height}\" BorderThickness=\"1\" BorderBrush=\"#ccc\" Background=\"{TemplateBinding Background}\"&gt;\n                         &lt;ScrollViewer Padding=\"0\" x:Name=\"PART_ContentHost\" Width=\"{TemplateBinding Width}\" Height=\"{TemplateBinding Height}\" VerticalContentAlignment=\"{TemplateBinding VerticalContentAlignment}\" TextBlock.TextAlignment=\"Center\" SnapsToDevicePixels=\"{TemplateBinding SnapsToDevicePixels}\"/&gt;\n                     &lt;/Border&gt;\n</code></pre>\n\n<p>While i have no <code>x:Key=\"SomeKey\"</code> in the style. this style will affects all <code>BootstrapText</code>s.</p>\n\n<p>This is Good. But I have another problem. Somewhere in a Form, I want to Style these Controls and Set some Margin and Padding for them but leave the defaults as they are. but my Control will be disappeared !!!</p>\n\n<p>I think twice styling will hides the default style.\nIn the standard Controls like <code>TextBox</code>, <code>Button</code>, ... whenever we write some style, everything is good and style simply sets our properties.</p>\n\n<p>I think, I must assign my ControlTemplate directly to the CustomControl Because i must get ride of this Styling process. but I don't know how ?</p>\n"}, {"tags": ["c#", "unit-testing", "asp.net-core", "nunit", "moq"], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 6362723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc75c632f9e4b2ab3d635806850ce8d3?s=128&d=identicon&r=PG", "display_name": "Ben_jamin", "link": "https://stackoverflow.com/users/6362723/ben-jamin"}, "edited": false, "score": 0, "creation_date": 1534486645, "post_id": 51888225, "comment_id": 90729704, "body": "Perfect thank you. I had tried      mockUserManager     .Setup(_ =&gt; _.GetUserAsync(user))     .Returns(appUser);  but hit what now feels like an obvious error with async returing a task not a user. didnt think to make it RetrunAsync()"}], "tags": [], "owner": {"reputation": 189551, "user_id": 5233410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XAODw.png?s=128&g=1", "display_name": "Nkosi", "link": "https://stackoverflow.com/users/5233410/nkosi"}, "is_accepted": true, "score": 1, "last_activity_date": 1534478503, "creation_date": 1534478503, "answer_id": 51888225, "question_id": 51866713, "link": "https://stackoverflow.com/questions/51866713/unit-testing-controller-that-uses-getuserasync-user/51888225#51888225", "title": "Unit Testing Controller that uses GetUserASync (User)", "body": "<p>Set up the mock to return a task so that it can be awaited and allow the code to flow as intended</p>\n\n<pre><code>//...\n\nvar appUser = new ApplicationUser {\n    //...populate as needed\n}\n\n mockUserManager\n    .Setup(_ =&gt; _.GetUserAsync(user))\n    .ReturnsAsync(appUser); // Allows mocked member to be awaited and return desired type\n\n//...\n</code></pre>\n"}], "owner": {"reputation": 186, "user_id": 6362723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc75c632f9e4b2ab3d635806850ce8d3?s=128&d=identicon&r=PG", "display_name": "Ben_jamin", "link": "https://stackoverflow.com/users/6362723/ben-jamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 51888225, "answer_count": 1, "score": 1, "last_activity_date": 1534502484, "creation_date": 1534368560, "last_edit_date": 1534502484, "question_id": 51866713, "link": "https://stackoverflow.com/questions/51866713/unit-testing-controller-that-uses-getuserasync-user", "title": "Unit Testing Controller that uses GetUserASync (User)", "body": "<p>I am trying to Unit Test that a controller action returns the correct view. I am using .NET Core, Moq, and NUnit.</p>\n\n<p>I want test the default <code>ManageController</code>,</p>\n\n<p>The Constructor is below,</p>\n\n<pre><code>public ManageController(\n  UserManager&lt;ApplicationUser&gt; userManager,\n  SignInManager&lt;ApplicationUser&gt; signInManager,\n  IEmailSender emailSender,\n  ILogger&lt;ManageController&gt; logger,\n  UrlEncoder urlEncoder)\n{\n    _userManager = userManager;\n    _signInManager = signInManager;\n    _emailSender = emailSender;\n    _logger = logger;\n    _urlEncoder = urlEncoder;\n}\n</code></pre>\n\n<p>And am trying to Unit Test the following <code>Index</code> Action, and Assert that it returns the correct ViewModel when successful. (And will add other paths that return different ViewModels in future)</p>\n\n<pre><code>[HttpGet]\npublic async Task&lt;IActionResult&gt; Index()\n{\n    var user = await _userManager.GetUserAsync(User);\n    if (user == null)\n    {\n        throw new ApplicationException($\"Unable to load user with ID '{_userManager.GetUserId(User)}'.\");\n    }\n\n    var model = new IndexViewModel\n    {\n        Username = user.UserName,\n        Email = user.Email,\n        PhoneNumber = user.PhoneNumber,\n        IsEmailConfirmed = user.EmailConfirmed,\n        StatusMessage = StatusMessage\n    };\n\n    return View(model);\n}\n</code></pre>\n\n<p>After many attempts, my closest solution is as follows,</p>\n\n<p>I have mocked, <code>UserManager</code>, and Setup the <code>GetUserASync</code> method with a <code>ClaimsPrincipal</code> with the Id \"1\". I have also set the <code>HttpContext</code> to use the same <code>ClaimsPrincipal</code> and passed that the the controller.</p>\n\n<p>As the Action is async, I was forced to make the test method async. Currently the test fails due to the async <code>Task</code> that is returned being null. I can't see if the rest of the test passes as I can't get past this error.</p>\n\n<pre><code>[Test]\npublic async Task Index_UserExists_ReturnsViewAsync()\n{\n     var mockUserStore = new Mock&lt;IUserStore&lt;ApplicationUser&gt;&gt;();\n     var mockUserManager = new Mock&lt;UserManager&lt;ApplicationUser&gt;&gt;(mockUserStore.Object, null, null, null, null, null, null, null, null);\n\n    var user = new ClaimsPrincipal(new ClaimsIdentity(new Claim[]\n    {\n        new Claim(ClaimTypes.NameIdentifier, \"1\"),\n    }));\n\n    mockUserManager.Setup(x =&gt; x.GetUserAsync(user));\n\n    var controller = new ManageController(mockUserManager.Object, null, null, null, null)\n    {\n        ControllerContext = new ControllerContext()\n        {\n            HttpContext = new DefaultHttpContext() { User = user }\n        }\n    };\n\n    //Act\n    var result = await controller.Index();\n\n    //Assert\n    Assert.IsInstanceOf&lt;ViewResult&gt;(result);\n}\n</code></pre>\n"}, {"tags": ["c#", "file", "replace"], "comments": [{"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534368618, "post_id": 51866689, "comment_id": 90685505, "body": "You need to provide a better problem statement and desired functionality.  What do you want this to do?  What have you found to be the issue when you debug?  Remember <i>to debug</i>"}, {"owner": {"reputation": 93997, "user_id": 3010968, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5c9bc5babd6d3ceafcc3f95fbdd5b313?s=128&d=identicon&r=PG&f=1", "display_name": "Selman Gen&#231;", "link": "https://stackoverflow.com/users/3010968/selman-gen%c3%a7"}, "edited": false, "score": 0, "creation_date": 1534368665, "post_id": 51866689, "comment_id": 90685518, "body": "It&#39;s really not clear what you are doing there. Do you want a loop that continues to ask input until the user enters a path? Why are you declaring temp and not assigning the result of <code>ReadLine</code> to path directly ? Why are you initializing path to &quot;###&quot; ?"}, {"owner": {"reputation": 57, "user_id": 9917470, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HiX1HXLtPN8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0Fgylcog8P0APj4p0Ds-oD1KqZSA/mo/photo.jpg?sz=128", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/9917470/ricardo"}, "edited": false, "score": 0, "creation_date": 1534368786, "post_id": 51866689, "comment_id": 90685554, "body": "The reason I initialized path to @&quot;###&quot; was in order to replace from the input from the user. So I could add the path the variable, however the replace does not seem to work using the temp variable to it."}, {"owner": {"reputation": 93997, "user_id": 3010968, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5c9bc5babd6d3ceafcc3f95fbdd5b313?s=128&d=identicon&r=PG&f=1", "display_name": "Selman Gen&#231;", "link": "https://stackoverflow.com/users/3010968/selman-gen%c3%a7"}, "edited": false, "score": 1, "creation_date": 1534368825, "post_id": 51866689, "comment_id": 90685566, "body": "But why do you need to replace in the first place? You could just store the input in path directly?"}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1534369782, "post_id": 51866689, "comment_id": 90685887, "body": "also, <code>temp</code> is declared in the <code>do</code> loop block, so it&#39;s local to that block, and will be out of scope outside of that block"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 9917470, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HiX1HXLtPN8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0Fgylcog8P0APj4p0Ds-oD1KqZSA/mo/photo.jpg?sz=128", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/9917470/ricardo"}, "edited": false, "score": 0, "creation_date": 1534368891, "post_id": 51866747, "comment_id": 90685588, "body": "Will it add @ to the variable in order to export data to Txt? Or it has to come from the user?"}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "reply_to_user": {"reputation": 57, "user_id": 9917470, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HiX1HXLtPN8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0Fgylcog8P0APj4p0Ds-oD1KqZSA/mo/photo.jpg?sz=128", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/9917470/ricardo"}, "edited": false, "score": 0, "creation_date": 1534368935, "post_id": 51866747, "comment_id": 90685598, "body": "I&#39;m sorry, didn&#39;t understand what you meant."}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "reply_to_user": {"reputation": 57, "user_id": 9917470, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HiX1HXLtPN8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0Fgylcog8P0APj4p0Ds-oD1KqZSA/mo/photo.jpg?sz=128", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/9917470/ricardo"}, "edited": false, "score": 1, "creation_date": 1534369108, "post_id": 51866747, "comment_id": 90685652, "body": "@Ricardo your IDE lets you make adjustments, test and debug.  You should <i>use it</i>.  You can see for yourself <a href=\"https://dotnetfiddle.net/zRsL56\" rel=\"nofollow noreferrer\">here</a> that any normal path inputs typed in work as expected.  The <code>@</code> character in a string assigment just means its a verbatim string literal, its only useful when the string is typed <i>in code</i> so that no escaping happens"}], "tags": [], "owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "is_accepted": false, "score": 3, "last_activity_date": 1534368703, "creation_date": 1534368703, "answer_id": 51866747, "question_id": 51866689, "link": "https://stackoverflow.com/questions/51866689/ask-to-user-the-path-to-export-file-on-c-console/51866747#51866747", "title": "Ask to user the Path to export File on C# Console", "body": "<p>The following line</p>\n\n<pre><code>path = path.Replace(\"###\", \"temp\"); \n</code></pre>\n\n<p>replaces the part <code>###</code> in the path with the literal string <code>temp</code>.</p>\n\n<p>At the end of the operation, <em>contents</em> of your <code>path</code> variable will be \"temp\".</p>\n\n<p>You don't really need to do a <code>Replace</code> at all. Instead,</p>\n\n<pre><code>string path = string.Empty;\ndo\n{\n    Console.Write(\"Insert the path in oder to export data: \");\n    path = Console.ReadLine();\n} \nwhile (String.IsNullOrEmpty(path));\n</code></pre>\n\n<p>will assign the user entered path into your <code>path</code> variable.</p>\n"}], "owner": {"reputation": 57, "user_id": 9917470, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HiX1HXLtPN8/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0Fgylcog8P0APj4p0Ds-oD1KqZSA/mo/photo.jpg?sz=128", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/9917470/ricardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534372222, "creation_date": 1534368454, "last_edit_date": 1534368568, "question_id": 51866689, "link": "https://stackoverflow.com/questions/51866689/ask-to-user-the-path-to-export-file-on-c-console", "title": "Ask to user the Path to export File on C# Console", "body": "<p>I am new at programming and I'm trying to add into a string variable the path to create a txt File. However I'm not getting it right if can it be done using Replace or Concat. I have never used that on C#. Here\u00b4s what I\u00b4ve done so far:</p>\n\n<pre><code>string path = @\"###\";\ndo\n{\n    Console.Write(\"Insert the path in oder to export data: \");\n    string temp = Console.ReadLine();\n} \nwhile (String.IsNullOrEmpty(path));\n\npath = path.Replace(\"###\", \"temp\"); \n</code></pre>\n"}, {"tags": ["c#", "c#-4.0"], "comments": [{"owner": {"reputation": 3140, "user_id": 1090802, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aCvOQ.jpg?s=128&g=1", "display_name": "Victor Stoddard", "link": "https://stackoverflow.com/users/1090802/victor-stoddard"}, "edited": false, "score": 2, "creation_date": 1534368619, "post_id": 51866674, "comment_id": 90685506, "body": "Files don&#39;t contain elements. Are you talking about collections, such as lists or arrays? To check if files changed, you should use hash functions like md5. To compare arrays, there are plenty of built-in methods in the collections/list objects."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9525431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dce8231bc022b4f1c6a72bfeba2424b?s=128&d=identicon&r=PG&f=1", "display_name": "TimHar", "link": "https://stackoverflow.com/users/9525431/timhar"}, "edited": false, "score": 0, "creation_date": 1534434645, "post_id": 51867895, "comment_id": 90713373, "body": "Thanks Sach. I pretty much have a similar process to this. What I wanted to know really is which property of the class changed for example, did SysName or SysCount change in each instane"}], "tags": [], "owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "is_accepted": false, "score": 0, "last_activity_date": 1534377299, "creation_date": 1534377299, "answer_id": 51867895, "question_id": 51866674, "link": "https://stackoverflow.com/questions/51866674/comparing-items-from-two-files-to-determine-which-elements-changed/51867895#51867895", "title": "Comparing Items From Two Files To Determine Which Elements Changed", "body": "<p>Even though you use the word 'file' it appears to me that you've already done the part where you read the contents of the files. And I believe that <code>NewFile</code> and <code>OldFile</code> are lists of some class instances that represent the content of a line of a file.</p>\n\n<p>So I'm going to name it <code>FileItem</code>, and will look something like this.</p>\n\n<pre><code>public class FileItem\n{\n    public int FileID { get; set; }\n    public int SysCount { get; set; }\n    public string SysName { get; set; }\n}\n</code></pre>\n\n<p>And I think you essentially want to find out which are the items unique to <code>OldFile</code>, and which are the items unique to <code>NewFile</code> (and maybe what's common to both as well).</p>\n\n<p>For this, I would first write an <code>EqualityComparer</code> so I can compare items in the two lists. From your code it appears that you consider two items equal if three properties of that class are equal. So I'm following along that logic.</p>\n\n<pre><code>public class FileComparer : IEqualityComparer&lt;FileItem&gt;\n{\n    public bool Equals(FileItem x, FileItem y)\n    {\n        return (x.FileID == y.FileID &amp;&amp; x.SysCount == y.SysCount &amp;&amp; x.SysName == y.SysName);\n    }\n\n    public int GetHashCode(FileItem obj)\n    {\n        unchecked\n        {\n            int hash = 17;\n            if (obj != null)\n            {\n                hash = hash * 23 + obj.FileID.GetHashCode();\n                hash = hash * 23 + obj.SysCount.GetHashCode();\n                hash = hash * 23 + obj.SysName.GetHashCode();\n            }\n            return 0;\n        }\n    }\n}\n</code></pre>\n\n<p>Now it's as easy as using <code>LINQ</code> methods <code>Except()</code> and <code>Intersect()</code> to get what you want.</p>\n\n<pre><code>static void Main(string[] args)\n{\n    List&lt;FileItem&gt; OldFile = new List&lt;FileItem&gt;\n    {\n        new FileItem() { FileID = 1, SysCount = 100, SysName = \"One\" },\n        new FileItem() { FileID = 2, SysCount = 200, SysName = \"Two\" },\n        new FileItem() { FileID = 3, SysCount = 300, SysName = \"Three\" },\n        new FileItem() { FileID = 4, SysCount = 400, SysName = \"Four\" },\n        new FileItem() { FileID = 5, SysCount = 500, SysName = \"Five\" }\n    };\n\n    List&lt;FileItem&gt; NewFile = new List&lt;FileItem&gt;\n    {\n        new FileItem() { FileID = 1, SysCount = 100, SysName = \"One\" },\n        new FileItem() { FileID = 200, SysCount = 200, SysName = \"Two\" },\n        new FileItem() { FileID = 3, SysCount = 300, SysName = \"Three\" },\n        new FileItem() { FileID = 400, SysCount = 400, SysName = \"Four\" },\n        new FileItem() { FileID = 5, SysCount = 500, SysName = \"Five\" }\n    };\n\n    var onlyInNew = NewFile.Except(OldFile, new FileComparer());\n    var onlyInOld = OldFile.Except(NewFile, new FileComparer());\n    var commonToBoth = OldFile.Intersect(NewFile, new FileComparer());\n\n    Console.ReadLine();\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9525431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dce8231bc022b4f1c6a72bfeba2424b?s=128&d=identicon&r=PG&f=1", "display_name": "TimHar", "link": "https://stackoverflow.com/users/9525431/timhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1534377299, "creation_date": 1534368382, "last_edit_date": 1534368857, "question_id": 51866674, "link": "https://stackoverflow.com/questions/51866674/comparing-items-from-two-files-to-determine-which-elements-changed", "title": "Comparing Items From Two Files To Determine Which Elements Changed", "body": "<p>Im doing a comparison of data from two files (an old and new file). The files are similar except that the new file has items from the old file that have changed. I need to add the changed items to a changed list and the unchanged items to an unchanged list. I do this by searching for each item from the new file in the old file and comparing file elements. If the new item is found, it is added to the unchanged list, otherwise it is added to the changed list.</p>\n\n<p>What I am trying to determine now is which item in the new file has changed. How can I determine this if the item was not found? Also, more than one element in the new file could be different from the old file.</p>\n\n<p>Heres the snippet:</p>\n\n<pre><code>foreach (var newfileItem in NewFile)\n{\n    var checkitem = OldFile.FirstOrDefault(d =&gt; d.fileID == newfileItem.fileID &amp;&amp; d.SysName == newfileItem.Sysname &amp;&amp; d.SysCount == newfileItem.SysCount);\n    if (checkitem == null) //item not found therefore something changed\n    {\n        //which item changed??\n        changedlist.Add(checkitem);\n    }\n    else //item found, therefore unchanged\n    {\n        unchangedlist.Add(newfileItem);\n    }\n    checkitem = null;\n}\n</code></pre>\n"}, {"tags": ["c#", "asp.net-web-api", "design-patterns", "asp.net-core", "dependency-injection"], "comments": [{"owner": {"reputation": 2608, "user_id": 4430183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CHS4j.jpg?s=128&g=1", "display_name": "Emre Savc\u0131", "link": "https://stackoverflow.com/users/4430183/emre-savc%c4%b1"}, "edited": false, "score": 6, "creation_date": 1534368215, "post_id": 51866611, "comment_id": 90685386, "body": "Instead of sharing image paste your code as text in your question. <a href=\"https://stackoverflow.com/help/mcve\">You should provide minimal complete verifiable example</a>"}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 2, "creation_date": 1534368313, "post_id": 51866611, "comment_id": 90685427, "body": "Well its also probably a little slow because all your registrations are scoped as Singleton..."}, {"owner": {"reputation": 9, "user_id": 10231358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8318175db14926c4f244f4281d22f239?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Santos", "link": "https://stackoverflow.com/users/10231358/andres-santos"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534421399, "post_id": 51866611, "comment_id": 90704611, "body": "@maccettura Yes, I chose singleton because of the need to not instantiate classes at all times. There is also the reason that I have an obligation to declare as singleton the dependent classes of another singleton class"}, {"owner": {"reputation": 31485, "user_id": 809357, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fe164036841e4bc8029ea2f842a5e5d7?s=128&d=identicon&r=PG", "display_name": "trailmax", "link": "https://stackoverflow.com/users/809357/trailmax"}, "edited": false, "score": 0, "creation_date": 1534424029, "post_id": 51866611, "comment_id": 90706353, "body": "OK, by &quot;little slow&quot; what exactly do you mean? Have you measured? If yes, how? And have you found a bottleneck?"}, {"owner": {"reputation": 31485, "user_id": 809357, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fe164036841e4bc8029ea2f842a5e5d7?s=128&d=identicon&r=PG", "display_name": "trailmax", "link": "https://stackoverflow.com/users/809357/trailmax"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534424112, "post_id": 51866611, "comment_id": 90706406, "body": "@maccettura if anything, singleton will consume more memory. Why singleton will have to be any slower than transient? (not taking into account implementations of classes - that can really break stuff)"}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "reply_to_user": {"reputation": 31485, "user_id": 809357, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fe164036841e4bc8029ea2f842a5e5d7?s=128&d=identicon&r=PG", "display_name": "trailmax", "link": "https://stackoverflow.com/users/809357/trailmax"}, "edited": false, "score": 0, "creation_date": 1534424723, "post_id": 51866611, "comment_id": 90706815, "body": "@trailmax it\u2019s a web app which means there is potentially multiple requests coming in at once, if there are only a single instance of <i>every</i> dependent service then multiple requests would not be optimized"}, {"owner": {"reputation": 31485, "user_id": 809357, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fe164036841e4bc8029ea2f842a5e5d7?s=128&d=identicon&r=PG", "display_name": "trailmax", "link": "https://stackoverflow.com/users/809357/trailmax"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534424910, "post_id": 51866611, "comment_id": 90706930, "body": "@maccettura I don&#39;t understand what you mean by &quot;multiple requests would not be optimized&quot;? Deep down inside of DI there will be some sort of a dictionary that contains a reference to the class instance and all what DI will have to do is to look up that reference by a key (that is usually a type name)."}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "reply_to_user": {"reputation": 31485, "user_id": 809357, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fe164036841e4bc8029ea2f842a5e5d7?s=128&d=identicon&r=PG", "display_name": "trailmax", "link": "https://stackoverflow.com/users/809357/trailmax"}, "edited": false, "score": 0, "creation_date": 1534425157, "post_id": 51866611, "comment_id": 90707089, "body": "@trailmax I know. But what if a GET request comes in at the same time as a POST. They both depend on the <i>same</i> service. There is only one instance of that service so one request has exclusive use of that service at a time (since there can only ever be one instance of each service)"}, {"owner": {"reputation": 31485, "user_id": 809357, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fe164036841e4bc8029ea2f842a5e5d7?s=128&d=identicon&r=PG", "display_name": "trailmax", "link": "https://stackoverflow.com/users/809357/trailmax"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534425426, "post_id": 51866611, "comment_id": 90707290, "body": "@maccettura This &quot;request has exclusive use of that service at a time&quot; is just not true. Unless service is implemented in thread-safe manner with locking. When multiple requests demand the same service, they are handed refrences to the same instance and no locking is happening. And then requests are free to do whatever they like with the instances. And if singleton&#39;s state changes, you get threading issues and race conditions."}, {"owner": {"reputation": 9, "user_id": 10231358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8318175db14926c4f244f4281d22f239?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Santos", "link": "https://stackoverflow.com/users/10231358/andres-santos"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534428707, "post_id": 51866611, "comment_id": 90709594, "body": "@maccettura Well, I did not do any measurement that gives me any real reason for slowness, just the feeling while debugging the application compared to other applications. However, as you said, it may be the implementation of the classes themselves. We conclude then that usually the number of clarifications in the container can easily surpass 50 without causing bottlenecks?"}, {"owner": {"reputation": 9, "user_id": 10231358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8318175db14926c4f244f4281d22f239?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Santos", "link": "https://stackoverflow.com/users/10231358/andres-santos"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534428781, "post_id": 51866611, "comment_id": 90709656, "body": "@maccettura Also, great explanation about sharing singleton classes between requests, we just have to be careful that they are stateless"}, {"owner": {"reputation": 1551, "user_id": 2648798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vbzoy.png?s=128&g=1", "display_name": "Robert Perry", "link": "https://stackoverflow.com/users/2648798/robert-perry"}, "edited": false, "score": 0, "creation_date": 1549461148, "post_id": 51866611, "comment_id": 95910112, "body": "I think you&#39;ve misunderstood the Singleton scope. Almost certainly in a WebApi project services should be registered as Transient, or Scoped. Almost never as Singleton. (There are exceptions of course). I can only see problems with using Singleton for everything. Least of all memory issues."}], "owner": {"reputation": 9, "user_id": 10231358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8318175db14926c4f244f4281d22f239?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Santos", "link": "https://stackoverflow.com/users/10231358/andres-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534421730, "creation_date": 1534368074, "last_edit_date": 1534421730, "question_id": 51866611, "link": "https://stackoverflow.com/questions/51866611/performance-for-dependency-injection-web-api-c", "title": "Performance for Dependency Injection - Web Api c#", "body": "<p>I have been developing an API with .NET Core 2 and I am putting together several learning about design patterns. Lately I've been feeling confused as to whether I'm actually applying the pattern correctly. The project is based on Controllers, Services, Repository and a management I created to handle errors.</p>\n\n<p>The point is that everything revolves around dependency injection and whatever structure I create for the project I have to define it in the Startup file as Singleton. According to the code below, the DI statements are growing with every resource I create (what the code shows is just a part).</p>\n\n<pre><code>services.TryAddSingleton&lt;ISistemaAssinaturasItensServiceError, SistemaAssinaturasItensServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaAssinaturasServiceError, SistemaAssinaturasServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaCompraStatusServiceError, SistemaCompraStatusServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaDescontosTiposServiceError, SistemaDescontosTiposServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaPeriodicidadeServiceError, SistemaPeriodicidadeServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaPeriodosServiceError, SistemaPeriodosServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosPrecoServiceError, SistemaPlanosPrecoServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosServiceError, SistemaPlanosServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosVigenciaServiceError, SistemaPlanosVigenciaServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaPrecificacaoServiceError, SistemaPrecificacaoServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaVigenciaServiceError, SistemaVigenciaServiceError&gt;();\nservices.TryAddSingleton&lt;ICustomerServiceError, CustomerServiceError&gt;();\nservices.TryAddSingleton&lt;IPaymentProfilesServiceError, PaymentProfilesServiceError&gt;();\nservices.TryAddSingleton&lt;IPlanServiceError, PlanServiceError&gt;();\nservices.TryAddSingleton&lt;ISubscriptionServiceError, SubscriptionServiceError&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosVigenciaService, SistemaPlanosVigenciaService&gt;();\nservices.TryAddSingleton&lt;ISistemaPeriodosService, SistemaPeriodosService&gt;();\nservices.TryAddSingleton&lt;ISistemaVigenciaService, SistemaVigenciaService&gt;();\nservices.TryAddSingleton&lt;ISistemaPeriodicidadeService, SistemaPeriodicidadeService&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosPrecoService, SistemaPlanosPrecoService&gt;();\nservices.TryAddSingleton&lt;IAssinaturaService, AssinaturaService&gt;();\nservices.TryAddSingleton&lt;IContratoService, ContratoService&gt;();\nservices.TryAddSingleton&lt;ISistemaPrecificacaoService, SistemaPrecificacaoService&gt;();\nservices.TryAddSingleton&lt;ISistemaDescontosTiposService, SistemaDescontosTiposService&gt;();\nservices.TryAddSingleton&lt;ISistemaCompraPlanosService, SistemaCompraPlanosService&gt;();\nservices.TryAddSingleton&lt;ISistemaCompraPlanosItensService, SistemaCompraPlanosItensService&gt;();\nservices.TryAddSingleton&lt;ISistemaCompraService, SistemaCompraService&gt;();\nservices.TryAddSingleton&lt;ISistemaCompraItensService, SistemaCompraItensService&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosService, SistemaPlanosService&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosItensService, SistemaPlanosItensService&gt;();\nservices.TryAddSingleton&lt;ISistemaAssinaturasService, SistemaAssinaturas&gt;();\nservices.TryAddSingleton&lt;ISistemaAssinaturasItensService, SistemaAssinaturasItensService&gt;();\nservices.TryAddSingleton&lt;ISistemaCreditosLogService, SistemaCreditosLogService&gt;();\nservices.TryAddSingleton&lt;ISistemaAssinaturaUsuariosService, SistemaAssinaturaUsuariosService&gt;();\nservices.TryAddSingleton&lt;ISistemaItensService, SistemaItensService&gt;();\nservices.TryAddSingleton&lt;ISistemaCreditosService, SistemaCreditosService&gt;();\nservices.TryAddSingleton&lt;ITClientesContratosService, TClientesContratosService&gt;();\nservices.TryAddSingleton&lt;ITClientesContratosPermissoesService, TClientesContratosPermissoesService&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosPermissoesService, SistemaPlanosPermissoesService&gt;();\nservices.TryAddSingleton&lt;ITClientesContratosValoresService, TClientesContratosValoresService&gt;();\nservices.TryAddSingleton&lt;ITClientesContratosFormasPagamentoService, TClientesContratosFormasPagamentoService&gt;();\nservices.TryAddSingleton&lt;ITClientesContratosCronogramaPagamentoService, TClientesContratosCronogramaPagamentoService&gt;();\nservices.TryAddSingleton&lt;IUsuariosPermissoesService, UsuariosPermissoesService&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosVigenciaRepository, SistemaPlanosVigenciaDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaPeriodosRepository, SistemaPeriodosDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaVigenciaRepository, SistemaVigenciaDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaAssinaturasRepository, SistemaAssinaturasDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaAssinaturasItensRepository, SistemaAssinaturasItensDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaAssinaturaUsuariosRepository, SistemaAssinaturaUsuariosDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaCompraItensRepository, SistemaCompraItensDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaCreditosRepository, SistemaCreditosDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaCompraPlanosItensRepository, SistemaCompraPlanosItensDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaCompraPlanosRepository, SistemaCompraPlanosDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaCompraRepository, SistemaCompraDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaCreditosLogRepository, SistemaCreditosLogDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaCreditosRepository, SistemaCreditosDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaDescontosTiposRepository, SistemaDescontosTiposDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaItensRepository, SistemaItensDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaPeriodicidadeRepository, SistemaPeriodicidadeDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaPermissoesRepository, SistemaPermissoesDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosItensRepository, SistemaPlanosItensDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosPermissoesRepository, SistemaPlanosPermissoesDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosPrecoRepository, SistemaPlanosPrecoDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaPlanosRepository, SistemaPlanosDapper&gt;();\nservices.TryAddSingleton&lt;ISistemaPrecificacaoRepository, SistemaPrecificacaoDapper&gt;();\nservices.TryAddSingleton&lt;ITClientesContratosCronogramaPagamentoRepository, TClientesContratosCronogramaPagamentoDapper&gt;();\nservices.TryAddSingleton&lt;ITClientesContratosFormasPagamentoRepository, TClientesContratosFormasPagamentoDapper&gt;();\nservices.TryAddSingleton&lt;ITClientesContratosPermissoesRepository, TClientesContratosPermissoesDapper&gt;();\nservices.TryAddSingleton&lt;ITClientesContratosRepository, TClientesContratosDapper&gt;();\nservices.TryAddSingleton&lt;IClientesContratosValoresRepository, TClientesContratosValoresDapper&gt;();\nservices.TryAddSingleton&lt;IUsuariosPermissoesRepository, UsuariosPermissoesDapper&gt;();\n</code></pre>\n\n<p>Do you have a pattern that says how to follow these statements?</p>\n\n<p>NOTE: I feel that the API is a little slow compared to other projects that do not follow the same pattern, although I have a nice idea that adding references as singleton prevents classes being instantiated at all times</p>\n"}, {"tags": ["c#", "asp.net-core", "asp.net-identity", "asp.net-core-2.0", "claims-based-identity"], "answers": [{"comments": [{"owner": {"reputation": 758, "user_id": 2343826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YKHKS.jpg?s=128&g=1", "display_name": "Fraze", "link": "https://stackoverflow.com/users/2343826/fraze"}, "edited": false, "score": 0, "creation_date": 1534418229, "post_id": 51872477, "comment_id": 90702803, "body": "Thank you so much for your very thorough answer.  This is more than helpful!!!!  Appreciate this much!"}], "tags": [], "owner": {"reputation": 17465, "user_id": 10091607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43cf7091720f30ab76ac44b1b597225a?s=128&d=identicon&r=PG", "display_name": "itminus", "link": "https://stackoverflow.com/users/10091607/itminus"}, "is_accepted": true, "score": 4, "last_activity_date": 1534407213, "creation_date": 1534407213, "answer_id": 51872477, "question_id": 51866551, "link": "https://stackoverflow.com/questions/51866551/best-practice-customize-asp-net-core-identity-authorization/51872477#51872477", "title": "best practice: customize asp.net core identity authorization", "body": "<p>Earlier verions of ASP.NET used a <strong>Role-Based</strong> approach . However , in this case the new <strong>Claims-Based</strong> approach is prefered . Because we can hardly determine which role is allowed to access the resource .</p>\n\n<p>Let's say the three users and claims you described above : </p>\n\n<ul>\n<li><code>Adam</code>  : Role= Global Admin</li>\n<li><code>Joe</code> : Role=Admin; Location=Indy&amp;Location=Chicago ; Division=Safety; Entity=News</li>\n<li><code>Blow</code> : Admin ; Location = Indy ;  Division = IT ;</li>\n</ul>\n\n<p>the <code>AspNetUserClaims</code> table records the claims of users as bleow : </p>\n\n<p>ID | UserID | ClaimType | ClaimValue |</p>\n\n<p>----|:------|:----------|:----------:|</p>\n\n<p>3 | 3ff3d2db-5a8f-4b01-99b5-fe46d22c240c | Role | Global Admin</p>\n\n<p>4 | cea5d395-fd46-4e6a-aa81-2f4c011b74be | Role | Admin</p>\n\n<p>5 | cea5d395-fd46-4e6a-aa81-2f4c011b74be | Location | Indy</p>\n\n<p>6 | cea5d395-fd46-4e6a-aa81-2f4c011b74be | Location | Chicago</p>\n\n<p>8 | cea5d395-fd46-4e6a-aa81-2f4c011b74be | Division | Safety</p>\n\n<p>9 | cea5d395-fd46-4e6a-aa81-2f4c011b74be | Entity | News</p>\n\n<p>10 | b60c7b75-e31b-4856-ba98-666d013c8201 | Role | Admin</p>\n\n<p>11 | b60c7b75-e31b-4856-ba98-666d013c8201 | Location | Indy</p>\n\n<p>15 | b60c7b75-e31b-4856-ba98-666d013c8201 | Division | IT</p>\n\n<p>As you see , the records of <strong>Claim-Based</strong> approach is rather simple and clean .When there's a need to authorize user , we can compare the user's claims with a policy :</p>\n\n<pre><code>services.AddAuthorization(opts=&gt; {\n    // ... other policy ...\n    // ...\n    opts.AddPolicy(\"Check:Role|Location|Division|Entity\", pb=&gt;\n        pb.RequireAssertion(async context=&gt; await RldeChecker.Handle(context) )\n    );\n})\n</code></pre>\n\n<p>the <strong>Checker.Handle(context)</strong> here is a simple static method which receives an instance of <strong>AuthorizationHandlerContex</strong> as parameter and  check if a user can access some specific resource .</p>\n\n<p>To make it more clear , we can add a <strong>PolicyChecker/</strong> folder , and place the <code>RldeChecker</code> class into it  :</p>\n\n<pre><code>public class RldeChecker\n{\n    // ...\n\n    public static async Task&lt;bool&gt; Handle(AuthorizationHandlerContext context) {\n\n        var user = context.User;\n        // bypass all checks\n        if (user.HasClaim(\"Role\",\"Global Admin\" )) { return true; }\n        try\n        {\n            // retrieve the user claims\n            var userLocation = user.FindFirst(\"Location\")?.Value;\n            var userDivision = user.FindFirst(\"Division\")?.Value;\n            var userEntity = user.FindFirst(\"Entity\")?.Value;\n            // retrieve the resource that the user want to access at runtime\n            var resource = (Dictionary&lt;string, string&gt;)context.Resource; \n            var targetLocation = resource[\"Location\"];\n            var targetDivision = resource[\"Division\"];\n            var targetEntity = resource[\"Entity\"];\n\n            // check for local admin\n            // ...\n        }\n        catch {\n            return false;\n        }\n        return false;\n    }\n}\n</code></pre>\n\n<p>when we want to authorize the user within an action method , we can simply inject an instance of <code>IAuthorizationService</code> to check by <code>authService.Authorize(user,resource,\"Check:Role|Location|Division|Entity\")</code>. In addition , the claim-Based approach allow us to use it in a service way and then we can inject it everywhere as we need , for example , displaying different contents according to current user's Location/Division/Entity :</p>\n\n<pre><code>var resource = new Dictionary&lt;string, string&gt;() {\n    { \"Location\",\"Indy\"},\n    { \"Division\",\"IT\"},\n    { \"Entity\",\"News\"},\n};\nvar x = await this._authorizationService.AuthorizeAsync(User, resource, \"Check:Role|Location|Division|Entity\");\nif (x.Succeeded)\n{\n    return View();\n}\nelse\n{\n    return new ForbidResult();\n}\n</code></pre>\n"}], "owner": {"reputation": 758, "user_id": 2343826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YKHKS.jpg?s=128&g=1", "display_name": "Fraze", "link": "https://stackoverflow.com/users/2343826/fraze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 935, "favorite_count": 1, "accepted_answer_id": 51872477, "answer_count": 1, "score": 2, "last_activity_date": 1589292334, "creation_date": 1534367753, "last_edit_date": 1589292334, "question_id": 51866551, "link": "https://stackoverflow.com/questions/51866551/best-practice-customize-asp-net-core-identity-authorization", "title": "best practice: customize asp.net core identity authorization", "body": "<p>I am fairly new with asp.net identity server.  I know how to customize the IdentityUser entity and scaffold / override Identity UI.  I'm looking for a high level how-to, best practice on authorization given these circumstances:</p>\n\n<p>A component within the application needs to consider these items for authorization:</p>\n\n<ul>\n<li>roles</li>\n<li>location</li>\n<li>division</li>\n<li>entity (the specific component within the application.  Like \"Manage News\")</li>\n</ul>\n\n<p>Coming from a class web forms background, I tend to think like so to define roles:</p>\n\n<pre><code>public int assignId; //key\npublic int userId;\npublic int roleId;\npublic int? locationId;\npublic int? divisionId;\npublic int? entityId;\n</code></pre>\n\n<h2>Real World Scenarios</h2>\n\n<ul>\n<li>User \"Adam\" with Role \"Global Admin\" has rights to everything.</li>\n<li>User \"Joe\" with Role \"Admin\" and Location \"Indy\" has rights to every Entity in the \"Indy\" location.</li>\n<li>User \"Blow\" with Role \"Admin\" and Location \"Indy\" and Division \"IT\" has rights to every \"IT\" entity in \"Indy\"</li>\n<li>User \"Joe\" with Role \"Admin\" and Location \"Chicago\" and Division \"Safety\" and Entity \"News\" could post news for Safety division in Chicago only. (In addition to the rule above regarding Joe and Indy) </li>\n</ul>\n\n<h3>So, my question?</h3>\n\n<p>What would be the best way to handle these sort of authorization rules / policies using asp.net core 2.1 identity?  Adding claims like \"loc\"/\"indy\"?  </p>\n\n<p>Would I setup custom authorization handlers to check claims?  Or would I set up a middleware table to handle the associations like I would back in the traditional webforms days? Or is there a best practice for this scenario??</p>\n\n<p><i>Thank you for your help!!!!!!!</i></p>\n"}, {"tags": ["c#", "php", "encryption", ".net-4.5", "php-7.2"], "answers": [{"tags": [], "owner": {"reputation": 325, "user_id": 1305420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97861ef979d6b5414dbdda858285eb28?s=128&d=identicon&r=PG", "display_name": "kernelk", "link": "https://stackoverflow.com/users/1305420/kernelk"}, "is_accepted": false, "score": 0, "last_activity_date": 1591277497, "last_edit_date": 1591277497, "creation_date": 1589597266, "answer_id": 61831249, "question_id": 51866531, "link": "https://stackoverflow.com/questions/51866531/c-encrypt-decrypt-methods-which-are-equivalent-to-php7-openssl/61831249#61831249", "title": "C# encrypt/decrypt methods which are equivalent to PHP7 openssl", "body": "<p>Old question, but I ran into this again recently.</p>\n\n<p>When using PHP 7.2 openssl_decrypt/openssl_encrypt padding as OPENSSL_RAW_DATA, it only worked for me when the chsarp AES padding was set to PaddingMode.PKCS7.</p>\n\n<p><strong>The original post has PaddingMode.None for decrypt and PaddingMode.PKCS7 for encrypt.</strong></p>\n"}], "owner": {"reputation": 1243, "user_id": 31274, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bb4921d3e9661c2a701e94017eb11ea1?s=128&d=identicon&r=PG", "display_name": "D. Rattansingh", "link": "https://stackoverflow.com/users/31274/d-rattansingh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1591277497, "creation_date": 1534367626, "question_id": 51866531, "link": "https://stackoverflow.com/questions/51866531/c-encrypt-decrypt-methods-which-are-equivalent-to-php7-openssl", "title": "C# encrypt/decrypt methods which are equivalent to PHP7 openssl", "body": "<p>I have the following lines in a PHP 7 program encrypting/decrypting data:</p>\n\n<pre><code>$key = base64_decode(\"mykey===\");\n$iv = substr(hash('sha256', \"myiv======\"), 0, 16);\nprintf(base64_encode(openssl_encrypt(\"hello\", \"aes-256-cbc\", $key, OPENSSL_RAW_DATA, $iv)));\nprintf(\"&lt;br&gt;\");\nprintf(openssl_decrypt(base64_decode(\"2XJxQXSbPuJ9LMsZ/FESGw==\"), \"aes-256-cbc\", $key, OPENSSL_RAW_DATA, $iv));\n</code></pre>\n\n<p>This is working, PHP decrypts \"hello\" to \"2XJxQXSbPuJ9LMsZ/FESGw==\" and vice versa. However I'm trying to decrypt and encrypt the same data (from a Database) with C# but can't seem to figure it out. I used the following method for decryption (C#):</p>\n\n<pre><code>private string aes_decrypt(string cipherText, string key, string iv)\n    {\n        RijndaelManaged aes = new RijndaelManaged();\n        aes.KeySize = 256;\n        aes.BlockSize = 128;\n        aes.Mode = CipherMode.CBC;\n        aes.Padding = PaddingMode.None;\n        aes.Key = Convert.FromBase64String(key);\n        aes.IV = Encoding.UTF8.GetBytes(iv);\n\n        if (aes.Key.Length &lt; 32)\n        {\n            var paddedkey = new byte[32];\n            Buffer.BlockCopy(aes.Key, 0, paddedkey, 0, aes.Key.Length);\n            aes.Key = paddedkey;\n        }\n\n        var decrypt = aes.CreateDecryptor();\n        byte[] xBuff = null;\n        using (var ms = new MemoryStream())\n        {\n            using (var cs = new CryptoStream(ms, decrypt, CryptoStreamMode.Write))\n            {\n                byte[] xXml = Convert.FromBase64String(cipherText);\n                cs.Write(xXml, 0, xXml.Length);\n            }\n\n            xBuff = ms.ToArray();\n        }\n\n        String Output = Encoding.UTF8.GetString(xBuff);\n        return Output;\n\n    }\n</code></pre>\n\n<p>But a call to this method:</p>\n\n<pre><code>string encryptionkey = \"mykey===\";\nstring encryptioniv = GenerateSHA256String(\"myiv======\").Substring(0, 16);\nstring str = aes_decrypt(\"2XJxQXSbPuJ9LMsZ/FESGw==\", encryptionkey, encryptioniv);\nConsole.WriteLine(@str);\n</code></pre>\n\n<p>returns: HellO++++??????+</p>\n\n<p>The encryption method doesnt seem to work either (referenced online and modified):</p>\n\n<pre><code>private static String EncryptIt(String s, string akey, string aIV)\n    {\n        String result;\n        byte[] key = Convert.FromBase64String(akey);\n        byte[] IV = Encoding.UTF8.GetBytes(aIV);\n\n        RijndaelManaged rijn = new RijndaelManaged();\n        rijn.Mode = CipherMode.CBC;\n        rijn.Padding = PaddingMode.PKCS7;\n        rijn.KeySize = 256;\n        rijn.BlockSize = 128;\n\n        using (MemoryStream msEncrypt = new MemoryStream())\n        {\n            using (ICryptoTransform encryptor = rijn.CreateEncryptor(key, IV))\n            {\n                using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))\n                {\n                    using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))\n                    {\n                        swEncrypt.Write(s);\n                    }\n                }\n            }\n            result = Convert.ToBase64String(msEncrypt.ToArray());\n        }\n        rijn.Clear();\n\n        return result;\n    }\n</code></pre>\n\n<p>A call to this method: EncryptIt(\"hello\", encryptionkey, encryptioniv); returns ul0axDR0WWGcpeijPRNusg== and not 2XJxQXSbPuJ9LMsZ/FESGw== which was generated by PHP. Anyone knows what's wrong here?</p>\n\n<p>For reference, I used these methods with the IV, they are working without errors:</p>\n\n<pre><code>private string GenerateSHA256String(string inputString)\n    {\n        SHA256 sha256 = SHA256Managed.Create();\n        byte[] bytes = Encoding.UTF8.GetBytes(inputString);\n        byte[] hash = sha256.ComputeHash(bytes);\n        return GetStringFromHash(hash);\n    }\n    private string GetStringFromHash(byte[] hash)\n    {\n        StringBuilder result = new StringBuilder();\n        for (int i = 0; i &lt; hash.Length; i++)\n        {\n            result.Append(hash[i].ToString(\"X2\"));\n        }\n        return result.ToString();\n    }\n</code></pre>\n"}, {"tags": ["c#", "oauth-2.0", "azure-active-directory", "access-token"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 1062175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765074c0081e2ecd36dfa40bf75602d0?s=128&d=identicon&r=PG&f=1", "display_name": "Art", "link": "https://stackoverflow.com/users/1062175/art"}, "edited": false, "score": 1, "creation_date": 1535050025, "post_id": 51867467, "comment_id": 90934433, "body": "Neo99 the Client Credentials flow won&#39;t work for me because it will allow daemon app to read mail for any mailbox in a given tenant. I want to restrict it to just a given service account."}], "tags": [], "owner": {"reputation": 7881, "user_id": 10130385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34KiA.png?s=128&g=1", "display_name": "Rohit Saigal", "link": "https://stackoverflow.com/users/10130385/rohit-saigal"}, "is_accepted": false, "score": 1, "last_activity_date": 1534390764, "last_edit_date": 1534390764, "creation_date": 1534373272, "answer_id": 51867467, "question_id": 51866524, "link": "https://stackoverflow.com/questions/51866524/grant-daemon-process-access-to-read-user-mail/51867467#51867467", "title": "Grant daemon process access to read user mail", "body": "<p>For daemon process/console app where you don't want user to explicitly sign-in, you can use client credentials grant. </p>\n\n<p>You can create an application in Azure AD for your process and then use clientid and client secret to access the required resources. For mailbox your resource would be something like /users/{userPrincipalName}/mailfolders/inbox/messages under the graph api.</p>\n\n<p>Here\u2019s a sample for client credentials grant flow from daemon app - <a href=\"https://github.com/Azure-Samples/active-directory-dotnet-daemon/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/active-directory-dotnet-daemon/blob/master/README.md</a></p>\n\n<p>Specifically for avoiding an explicit consent part see steps 9, 10 under this link - <a href=\"https://github.com/Azure-Samples/active-directory-dotnet-daemon/blob/master/README.md#step-2--register-the-sample-with-your-azure-active-directory-tenant\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/active-directory-dotnet-daemon/blob/master/README.md#step-2--register-the-sample-with-your-azure-active-directory-tenant</a>. </p>\n\n<p>Steps refer to 'TodoListService' as sample api, but in your case it will be graph I suppose.</p>\n\n<blockquote>\n  <p>Configure Permissions for your application. To that extent, in the\n  Settings menu, choose the 'Required permissions' section and then,\n  click on Add, then Select an API, and type TodoListService in the\n  textbox. Then, click on Select Permissions and select 'TodoListAdmin'.\n  This will allow this client app to access the service app using\n  TodoListAdmin role.</p>\n  \n  <p>At this stage permissions are assigned correctly but client app is a\n  daemon service so it cannot accept the consent via UI to use the\n  service app. To avoid this situation, please click on \"Grant\n  permissions\" which will accept the consent for the app at the admin\n  level.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1462, "user_id": 1923475, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3a14952c19053ca3e835b7a2990fdcba?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1923475/rohit"}, "is_accepted": false, "score": 0, "last_activity_date": 1599135183, "creation_date": 1599135183, "answer_id": 63723438, "question_id": 51866524, "link": "https://stackoverflow.com/questions/51866524/grant-daemon-process-access-to-read-user-mail/63723438#63723438", "title": "Grant daemon process access to read user mail", "body": "<p>Late answer but it may help someone. I had a similar situation where I wanted to use a daemon to read from a shared mailbox but admins in my organization were not allowing the Mail.Read permission because of its capabilities to read from all mailboxes. I had to restrict the app to only one mailbox to get the consent from admin.</p>\n<p>There is an option to scope the application permission to specific mailbox. This ensures that you are not reading from any other mailbox but only the ones you are allowed to. I used the client credential flow in my daemon.</p>\n<p>Check the documentation here - <a href=\"https://docs.microsoft.com/en-us/graph/auth-limit-mailbox-access\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/graph/auth-limit-mailbox-access</a></p>\n"}], "owner": {"reputation": 101, "user_id": 1062175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765074c0081e2ecd36dfa40bf75602d0?s=128&d=identicon&r=PG&f=1", "display_name": "Art", "link": "https://stackoverflow.com/users/1062175/art"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1599135183, "creation_date": 1534367598, "question_id": 51866524, "link": "https://stackoverflow.com/questions/51866524/grant-daemon-process-access-to-read-user-mail", "title": "Grant daemon process access to read user mail", "body": "<p>We have a console app that we want to run on a schedule in the context of <strong>service_account1</strong>.<br>\nThe app needs to access Outlook account for <strong>service_account2</strong> using Graph API and read incoming emails.</p>\n\n<p>I am trying to figure out the way to access <strong>service_account2</strong> mailbox without requiring user intervention and skipping the consent screen. </p>\n\n<p>One option I see is to manually get authentication code from <strong>/authorize</strong> endpoint by signing in as <strong>service_account2</strong> and consenting to mailbox access by the application. This will give me the authentication code that I can use to get <strong>access_token</strong> and <strong>refresh_token</strong> programmatically and that would do the trick.</p>\n\n<p>Is there a way to programmatically do it without having this initial manual step?</p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 6718, "user_id": 68693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/081abbd481555f4929927a36ae5b3d47?s=128&d=identicon&r=PG", "display_name": "Tipx", "link": "https://stackoverflow.com/users/68693/tipx"}, "edited": false, "score": 1, "creation_date": 1534367636, "post_id": 51866476, "comment_id": 90685192, "body": "Unrelated comment: In a few days, that code will be unreadable even for you. Rather than doing everything in a &quot;single&quot; statement, I&#39;d suggest on improving readability, which will at the same time help you figure out the problem."}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 1, "creation_date": 1534367898, "post_id": 51866476, "comment_id": 90685286, "body": "Can you please provide a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> so we don&#39;t have to write the classes ourselves and populate with data."}, {"owner": {"reputation": 938, "user_id": 4380513, "user_type": "registered", "profile_image": "https://graph.facebook.com/553865196/picture?type=large", "display_name": "Zakk Diaz", "link": "https://stackoverflow.com/users/4380513/zakk-diaz"}, "edited": false, "score": 0, "creation_date": 1534368210, "post_id": 51866476, "comment_id": 90685383, "body": "Above comments are right. You could make a static class to perform these operations for you such as bool EntryNameMatchesRegex(&quot;<i>regex</i>&quot;) or List&lt;Entries&gt; SelectEntriesWithMatchingResults(&quot;<i>regex</i>&quot;) and call each one distinctly. Look up some principles of single responsibility"}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1534369321, "post_id": 51866476, "comment_id": 90685727, "body": "Do not use Regex.  The values are in a DataTable and it is much easier to group and sort rows of a datatable than to use regex."}, {"owner": {"reputation": 69330, "user_id": 1612975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nVzDH.png?s=128&g=1", "display_name": "TheGeneral", "link": "https://stackoverflow.com/users/1612975/thegeneral"}, "edited": false, "score": 0, "creation_date": 1534375759, "post_id": 51866476, "comment_id": 90687305, "body": "You may or may not have a list of something for which the items may or may not be null, which may or may not have a type, name, or weight. You are using regex when don&#39;t need it, and you are checking for null on the results from linq extension methods when they never do.. This really is a case of start again, and potentially make a more solid class and methods to hold your concerns"}], "answers": [{"tags": [], "owner": {"reputation": 442, "user_id": 8008349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TAyA4.png?s=128&g=1", "display_name": "i regular", "link": "https://stackoverflow.com/users/8008349/i-regular"}, "is_accepted": false, "score": 0, "last_activity_date": 1534371022, "last_edit_date": 1534371022, "creation_date": 1534370213, "answer_id": 51867007, "question_id": 51866476, "link": "https://stackoverflow.com/questions/51866476/c-how-to-populate-variable-with-same-regex-results/51867007#51867007", "title": "C# how to populate variable with same RegEx results?", "body": "<p>I will try to answer your question of how to \"to be able to fill ItemList by each type, and if there is no car from that type, fill it with another type\" by using the conditional operator. As you did not give an <em>MCVE</em> as pointed out in the comments I will be using a simple list of strings as my example (you should be able to draw it to the context of your example by simple substitution i.e. instead of checking for each single value you would check for each Regex match)</p>\n\n<pre><code>var entries = new List&lt;string&gt;(){\"a\", \"a\", \"b\"};\n\nvar itemList = entries.Any(e =&gt; e == \"a\") ? entries.Where(e =&gt; e == \"a\") \n                      : entries.Any(e =&gt; e == \"b\")  \n                      ? entries.Where(e =&gt; e == \"b\") // continue for all your types\n                      : null;\n</code></pre>\n\n<p>The idea is quite simply check if the list contains any matching of your specific type if so return all elements of that type and short circuit else check for the next type and so on. You can probably do this more efficient this was just to give a possible solution to your problem </p>\n"}], "owner": {"reputation": 63, "user_id": 8478201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95d2306048b28534ac0c2a0ee10af00?s=128&d=identicon&r=PG&f=1", "display_name": "fluffypuffy", "link": "https://stackoverflow.com/users/8478201/fluffypuffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560158857, "creation_date": 1534367364, "last_edit_date": 1560158857, "question_id": 51866476, "link": "https://stackoverflow.com/questions/51866476/c-how-to-populate-variable-with-same-regex-results", "title": "C# how to populate variable with same RegEx results?", "body": "<p>I'm having bit of struggle with selecting some data from given dataset. Let's say I do have a list of cars without specified types. So I need to select them by names and from those I'm able to know types.</p>\n\n<pre><code>var ItemList = Entries?.Where(entry =&gt; (entry?.Type?.IsCar() ?? false))\n    ?.OrderBy(entry =&gt; entry?.Name?.RegexMatchSuccessIgnoreCase(@\"ferrari|lamborghini|mclaren\"))        //sports cars\n    ?.OrderBy(entry =&gt; entry?.Name?.RegexMatchSuccessIgnoreCase(@\"bmw|audi|mercedes\"))                  // personal cars\n    ?.OrderBy(entry =&gt; entry?.Name?.RegexMatchSuccessIgnoreCase(@\"man|iveco\"))                          //trucks\n    ?.ThenBy(entry =&gt; entry?.Weight ?? int.MaxValue)\n    ?.ToArray();\n</code></pre>\n\n<p>This will get me list of all cars and ordered by names and weight which is kind of ok, but not fully.</p>\n\n<p>What I'm looking for is to be able to fill <code>ItemList</code> by each type, and if there is no car from that type, fill it with another type. So firstly <code>ItemList</code> have to contain only sports cars, if there are none, try to find out personal cars, if there are none, try to find out trucks.</p>\n\n<p>Eg. something like:</p>\n\n<pre><code>var ItemList = Entries?.Select(entry =&gt;\n    entry?.Name?.RegexMatchSuccessIgnoreCase(@\"ferrari|lamborghini|mclaren\") ??       //sports cars\n    entry?.Name?.RegexMatchSuccessIgnoreCase(@\"bmw|audi|mercedes\") ??        // personal cars\n    entry?.Name?.RegexMatchSuccessIgnoreCase(@\"man|iveco\")                 //trucks\n    ).DefaultIfEmpty(false);\n</code></pre>\n\n<p>But this gives me true/false since first one returns entry with which I can work.</p>\n\n<blockquote>\n  <p>Can somebody kick my brain how to select those by type and be able to use them as entries not bools?</p>\n</blockquote>\n\n<p>Thanks</p>\n"}, {"tags": ["c#", "entity-framework"], "comments": [{"owner": {"reputation": 6718, "user_id": 68693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/081abbd481555f4929927a36ae5b3d47?s=128&d=identicon&r=PG", "display_name": "Tipx", "link": "https://stackoverflow.com/users/68693/tipx"}, "edited": false, "score": 0, "creation_date": 1534367865, "post_id": 51866456, "comment_id": 90685271, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11148662/mapping-a-foreign-key-with-a-custom-column-name\">Mapping a foreign key with a custom column name</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6718, "user_id": 68693, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/081abbd481555f4929927a36ae5b3d47?s=128&d=identicon&r=PG", "display_name": "Tipx", "link": "https://stackoverflow.com/users/68693/tipx"}, "edited": false, "score": 2, "creation_date": 1534368022, "post_id": 51866581, "comment_id": 90685318, "body": "I would also recommend renaming the &quot;Staff&quot; member to be more precise."}], "tags": [], "owner": {"reputation": 2460, "user_id": 2308162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8402e03e88349e7c1d7699e972cd22da?s=128&d=identicon&r=PG", "display_name": "3dd", "link": "https://stackoverflow.com/users/2308162/3dd"}, "is_accepted": false, "score": 2, "last_activity_date": 1534368120, "last_edit_date": 1534368120, "creation_date": 1534367932, "answer_id": 51866581, "question_id": 51866456, "link": "https://stackoverflow.com/questions/51866456/how-to-setup-two-foreign-keys-to-the-same-parent-column-entity-framework/51866581#51866581", "title": "How to setup two foreign keys to the same parent column (Entity Framework)", "body": "<p>This should do the trick</p>\n\n<pre><code>public class Member\n{\npublic int Id { get; set; }\npublic string MemberName { get; set; }\n\n//FK to Staff model which stores the ICC Staff Type value\n[ForeignKey(\"Staff\")]\npublic int? StaffId { get; set; }\n\n//FK to Staff model which stores the FP Staff Type value\n[ForeignKey(\"FPStaff\")]\npublic int? FPNumber { get; set; }\n\n//Navigation property \npublic virtual Staff Staff { get; set; }  //Use a better descriptive Name than Staff\n\npublic virtual Staff FPStaff{ get; set; }\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 2823788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d60581da77f2844ad5dcdb0916151095?s=128&d=identicon&r=PG&f=1", "display_name": "Soul", "link": "https://stackoverflow.com/users/2823788/soul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534368120, "creation_date": 1534367264, "last_edit_date": 1534367700, "question_id": 51866456, "link": "https://stackoverflow.com/questions/51866456/how-to-setup-two-foreign-keys-to-the-same-parent-column-entity-framework", "title": "How to setup two foreign keys to the same parent column (Entity Framework)", "body": "<p>I'm using ASP.NET MVC and I have the following class models</p>\n\n<p>Position:</p>\n\n<pre><code>public enum PosType\n{\n    ICC, FP\n}\n\npublic class Position\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public PosType? PosType { get; set; }\n}\n</code></pre>\n\n<p>Staff:</p>\n\n<pre><code>public class Staff\n{\n    public int Id { get; set; }\n    public string StaffName { get; set; }\n\n    //FK to Position\n    public int PositionId { get; set; }\n\n    //Navigation property\n    public virtual Position Position { get; set; }\n</code></pre>\n\n<p>Member:</p>\n\n<pre><code>public class Member\n{\n    public int Id { get; set; }\n    public string MemberName { get; set; }\n\n    //FK to Staff model which stores the ICC Staff Type value\n    public int? StaffId { get; set; }\n\n    //FK to Staff model which stores the FP Staff Type value\n    public int? FPNumber { get; set; }\n\n    //Navigation property \n    public virtual Staff Staff { get; set; }\n</code></pre>\n\n<p>On the Member model the <code>StaffId</code> property is a foreign key to the <code>Staff</code> model which is a pretty straight forward approach. The issue I'm having is how to handle the <code>FPnumber</code> property since I would like it to be a foreign key to the <code>Staff</code> model as well. My overall goal is have the <code>Member.StaffId</code> property store ICC staff type and the <code>Member.FPNumber</code> property store FP staff type. I tried adding the <code>ForeignKey</code>  attribute to the <code>FPNumber</code> property, but it did not work since the <code>StaffId</code>got removed from the Member table. Any other suggestions?</p>\n"}, {"tags": ["c#", "singleton", "subclass", "idisposable"], "comments": [{"owner": {"reputation": 43407, "user_id": 2791540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd133916bdbabcde7c31ab28f4b4e6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Wu", "link": "https://stackoverflow.com/users/2791540/john-wu"}, "edited": false, "score": 0, "creation_date": 1534367341, "post_id": 51866444, "comment_id": 90685065, "body": "Why not make the factory disposable?"}, {"owner": {"reputation": 2202, "user_id": 298511, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/dHHGI.png?s=128&g=1", "display_name": "Mike Lowery", "link": "https://stackoverflow.com/users/298511/mike-lowery"}, "reply_to_user": {"reputation": 43407, "user_id": 2791540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd133916bdbabcde7c31ab28f4b4e6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Wu", "link": "https://stackoverflow.com/users/2791540/john-wu"}, "edited": false, "score": 0, "creation_date": 1534368247, "post_id": 51866444, "comment_id": 90685402, "body": "@JohnWu It is, but in theory, the base class shouldn&#39;t know anything about the subclasses, or the 3rd party DLL calls."}, {"owner": {"reputation": 43407, "user_id": 2791540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd133916bdbabcde7c31ab28f4b4e6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Wu", "link": "https://stackoverflow.com/users/2791540/john-wu"}, "edited": false, "score": 0, "creation_date": 1534368780, "post_id": 51866444, "comment_id": 90685553, "body": "I disagree; lifetime management is definitely in scope for a factory."}, {"owner": {"reputation": 2202, "user_id": 298511, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/dHHGI.png?s=128&g=1", "display_name": "Mike Lowery", "link": "https://stackoverflow.com/users/298511/mike-lowery"}, "reply_to_user": {"reputation": 43407, "user_id": 2791540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd133916bdbabcde7c31ab28f4b4e6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Wu", "link": "https://stackoverflow.com/users/2791540/john-wu"}, "edited": false, "score": 0, "creation_date": 1534372352, "post_id": 51866444, "comment_id": 90686563, "body": "What if I had multiple PCI cards and 3rd party APIs with different close methods? I wouldn&#39;t want the factory to have to know which methods to call in its finalizer. Leave that to the subclass."}, {"owner": {"reputation": 43407, "user_id": 2791540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd133916bdbabcde7c31ab28f4b4e6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Wu", "link": "https://stackoverflow.com/users/2791540/john-wu"}, "edited": false, "score": 0, "creation_date": 1534375157, "post_id": 51866444, "comment_id": 90687167, "body": "It doesn&#39;t need to. The factory could simply call its children or raise an event."}], "owner": {"reputation": 2202, "user_id": 298511, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/dHHGI.png?s=128&g=1", "display_name": "Mike Lowery", "link": "https://stackoverflow.com/users/298511/mike-lowery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534367223, "creation_date": 1534367223, "question_id": 51866444, "link": "https://stackoverflow.com/questions/51866444/subclass-finalizers", "title": "Subclass finalizers", "body": "<p>I've got a C# project that calls into a 3rd party unmanaged DLL for controlling a PCI card. Their API documentation states that a call to <code>CardClose</code> must be made before my application terminates. Because the card is multifunctional, I've written two interfaces for it and implemented them using separate singleton classes. There is also a base class for sharing common information, such as the <code>CardHandle</code>, and for generating the singleton instances (factory pattern).</p>\n\n<p>My challenge is figuring out how to use finalizers in the subclasses to call <code>CardClose</code> when the class is disposed. But I only want that to happen when both classes have been disposed, otherwise the card becomes unavailable to the other class that is still using it. (I realize you wouldn't normally dispose of a singleton, but I have reasons for doing so in this case.) One solution is to combine these classes into one, but I'm curious if there's a better way.</p>\n\n<p>Here's the dispose code for the base class:</p>\n\n<pre><code>    protected static int CardHandle { get; set; } = -1;\n    protected static bool IsAvailable { get; set; } = false;\n    protected static uint InstancesCount { get; private set; } = 0;\n\n    #region IDisposable Support\n    private bool m_alreadyDisposed = false; // To detect redundant calls\n\n    protected virtual void Dispose(bool disposing) // Overridden by subclasses which should then call base.Dispose(disposing)\n    {\n        if (m_alreadyDisposed) return;\n\n        if (disposing)\n        {\n            // Dispose managed state (managed objects). \n        }\n\n        // Free unmanaged resources (unmanaged objects) and override a finalizer below.\n        InstancesCount--;\n        m_alreadyDisposed = true;\n    }\n\n    // Override a finalizer only if Dispose(bool disposing) above has code to free unmanaged resources.\n    //~Arinc()\n    //{\n    //    // Do not change this code. Put cleanup code in Dispose(bool disposing) above.\n    //    Dispose(false);\n    //}\n\n    public void Dispose()\n    {\n        // Put cleanup code in Dispose(bool disposing) above.\n        Dispose(true); // When overriden, this will call the derived class's Dispose(boolean).\n        GC.SuppressFinalize(this);\n    }\n    #endregion\n</code></pre>\n\n<p>First subclass with finalizer:</p>\n\n<pre><code>    #region IDisposable Support\n    private bool m_alreadyDisposed = false; // To detect redundant calls\n\n    protected override void Dispose(bool disposing)\n    {\n        if (m_alreadyDisposed) return;\n\n        if (disposing)\n        {\n            // Dispose managed state (managed objects).\n            Arinc429Device = null; // This class instance, stored as a property.\n        }\n\n        // Free unmanaged resources (unmanaged objects) and override a finalizer below.\n        if (InstancesCount == 1) // This is the last instance if true.\n        {\n            L43_CardReset(CardHandle); // Unmanaged code call.\n            L43_CardClose(CardHandle); // Unmanaged code call.\n            CardHandle = -1;\n            IsAvailable = false;\n        }\n\n        m_alreadyDisposed = true;\n\n        base.Dispose(disposing);\n    }\n\n    ~Arinc429Ballard()\n    {\n        // Do not change this code. Put cleanup code in Dispose(bool disposing) above.\n        Dispose(false);\n    }\n    #endregion\n</code></pre>\n\n<p>The second subclass uses the same dispose code but with a different instance property. As you can see, I'm attempting to keep track of the total instances count using the <code>InstancesCount</code> property which is incremented by the factory. When the last instance is disposed, the card is closed, but this approach is proving to be less than reliable.</p>\n"}, {"tags": ["c#", "wpf", "xaml", "design-data"], "answers": [{"tags": [], "owner": {"reputation": 439, "user_id": 2619824, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/90d9a347f8739dce6a82a290ff04948f?s=128&d=identicon&r=PG", "display_name": "user2619824", "link": "https://stackoverflow.com/users/2619824/user2619824"}, "is_accepted": true, "score": 0, "last_activity_date": 1539639524, "creation_date": 1539639524, "answer_id": 52825106, "question_id": 51866439, "link": "https://stackoverflow.com/questions/51866439/issue-with-getting-designdata-to-show-up-in-designer-preview/52825106#52825106", "title": "Issue with getting designdata to show up in designer preview", "body": "<p>I changed the implementation to use a custom control that overrides the ProgressBar WPF control. Then the design data showed up as expected.</p>\n"}], "owner": {"reputation": 439, "user_id": 2619824, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/90d9a347f8739dce6a82a290ff04948f?s=128&d=identicon&r=PG", "display_name": "user2619824", "link": "https://stackoverflow.com/users/2619824/user2619824"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 52825106, "answer_count": 1, "score": 0, "last_activity_date": 1539639524, "creation_date": 1534367189, "question_id": 51866439, "link": "https://stackoverflow.com/questions/51866439/issue-with-getting-designdata-to-show-up-in-designer-preview", "title": "Issue with getting designdata to show up in designer preview", "body": "<p>I'm trying to get design data to show up in my designer preview. The UserControl works fine when I run the program; however I can't get the designer to populate with values.</p>\n\n<p>First off, my UserControl named SignalStrengthControl</p>\n\n<pre><code>&lt;UserControl x:Class=\"Connection.SignalStrengthControl\"\n             xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n             xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n             xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" \n             xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\" \n             xmlns:local=\"clr-namespace:Connection\"\n             mc:Ignorable=\"d\" \n             d:DesignHeight=\"53.833\" d:DesignWidth=\"100.917\"\n             d:DataContext=\"{d:DesignData Source=DesignData/SignalStrengthControlDesignData.xaml}\"&gt;\n    &lt;Grid Background=\"Transparent\"&gt;\n        &lt;Grid.Resources&gt;\n            &lt;SolidColorBrush x:Key=\"OnColor\" Color=\"#FF4a6bc8\"&gt;&lt;/SolidColorBrush&gt;\n            &lt;SolidColorBrush x:Key=\"OffColor\" Color=\"#50FFFFFF\"&gt;&lt;/SolidColorBrush&gt;\n            &lt;local:RatingConverter x:Key=\"RatingConverter\" OnBrush=\"{StaticResource OnColor}\" OffBrush=\"{StaticResource OffColor}\" /&gt;\n\n            &lt;Style TargetType=\"Rectangle\"&gt;\n                &lt;Setter Property=\"VerticalAlignment\" Value=\"Bottom\" /&gt;\n            &lt;/Style&gt;\n        &lt;/Grid.Resources&gt;\n\n        &lt;Grid.ColumnDefinitions&gt;\n            &lt;ColumnDefinition Width=\"1*\"&gt;&lt;/ColumnDefinition&gt;\n            &lt;ColumnDefinition Width=\".4*\"&gt;&lt;/ColumnDefinition&gt;\n            &lt;ColumnDefinition Width=\"1*\"&gt;&lt;/ColumnDefinition&gt;\n            &lt;ColumnDefinition Width=\".4*\"&gt;&lt;/ColumnDefinition&gt;\n            &lt;ColumnDefinition Width=\"1*\"&gt;&lt;/ColumnDefinition&gt;\n            &lt;ColumnDefinition Width=\".4*\"&gt;&lt;/ColumnDefinition&gt;\n            &lt;ColumnDefinition Width=\"1*\"&gt;&lt;/ColumnDefinition&gt;\n            &lt;ColumnDefinition Width=\".4*\"&gt;&lt;/ColumnDefinition&gt;\n            &lt;ColumnDefinition Width=\"1*\"&gt;&lt;/ColumnDefinition&gt;\n        &lt;/Grid.ColumnDefinitions&gt;\n\n        &lt;Grid Grid.Column=\"0\"&gt;\n            &lt;Grid.RowDefinitions&gt;\n                &lt;RowDefinition Height=\"4*\"&gt;&lt;/RowDefinition&gt;\n                &lt;RowDefinition Height=\"1*\"&gt;&lt;/RowDefinition&gt;\n            &lt;/Grid.RowDefinitions&gt;\n            &lt;Rectangle Grid.Row=\"1\"\n                       Fill=\"{Binding Path=RatingValue, ConverterParameter=1, Converter={StaticResource RatingConverter}, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:SignalStrengthControl}}}\"\n                       Width=\"{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"\n                       Height=\"{Binding ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"/&gt;\n        &lt;/Grid&gt;\n\n        &lt;Grid Grid.Column=\"2\"&gt;\n            &lt;Grid.RowDefinitions&gt;\n                &lt;RowDefinition Height=\"3*\"&gt;&lt;/RowDefinition&gt;\n                &lt;RowDefinition Height=\"2*\"&gt;&lt;/RowDefinition&gt;\n            &lt;/Grid.RowDefinitions&gt;\n            &lt;Rectangle Grid.Row=\"1\"\n                       Fill=\"{Binding Path=RatingValue, ConverterParameter=2, Converter={StaticResource RatingConverter}, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:SignalStrengthControl}}}\"\n                       Width=\"{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"\n                       Height=\"{Binding ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"/&gt;\n        &lt;/Grid&gt;\n\n        &lt;Grid Grid.Column=\"4\"&gt;\n            &lt;Grid.RowDefinitions&gt;\n                &lt;RowDefinition Height=\"2*\"&gt;&lt;/RowDefinition&gt;\n                &lt;RowDefinition Height=\"3*\"&gt;&lt;/RowDefinition&gt;\n            &lt;/Grid.RowDefinitions&gt;\n            &lt;Rectangle Grid.Row=\"1\"\n                       Fill=\"{Binding Path=RatingValue, ConverterParameter=3, Converter={StaticResource RatingConverter}, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:SignalStrengthControl}}}\"\n                       Width=\"{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"\n                       Height=\"{Binding ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"/&gt;\n        &lt;/Grid&gt;\n\n        &lt;Grid Grid.Column=\"6\"&gt;\n            &lt;Grid.RowDefinitions&gt;\n                &lt;RowDefinition Height=\"1*\"&gt;&lt;/RowDefinition&gt;\n                &lt;RowDefinition Height=\"4*\"&gt;&lt;/RowDefinition&gt;\n            &lt;/Grid.RowDefinitions&gt;\n            &lt;Rectangle Grid.Row=\"1\"\n                       Fill=\"{Binding Path=RatingValue, ConverterParameter=4, Converter={StaticResource RatingConverter}, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:SignalStrengthControl}}}\"\n                       Width=\"{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"\n                       Height=\"{Binding ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"/&gt;\n        &lt;/Grid&gt;\n\n        &lt;Grid Grid.Column=\"8\"&gt;\n            &lt;Grid.RowDefinitions&gt;\n                &lt;RowDefinition Height=\"0*\"&gt;&lt;/RowDefinition&gt;\n                &lt;RowDefinition Height=\"5*\"&gt;&lt;/RowDefinition&gt;\n            &lt;/Grid.RowDefinitions&gt;\n            &lt;Rectangle Grid.Row=\"1\"\n                       Fill=\"{Binding Path=RatingValue, ConverterParameter=5, Converter={StaticResource RatingConverter}, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:SignalStrengthControl}}}\"\n                       Width=\"{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"\n                       Height=\"{Binding ActualHeight, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Grid}}\"/&gt;\n        &lt;/Grid&gt;\n    &lt;/Grid&gt;\n&lt;/UserControl&gt;\n</code></pre>\n\n<p>You can see that I have an ignorable DataContext which points to some design data (no issues finding the file). The idea behind this UserControl is that it contains an enum dependency property and it has an enum converter which controls the fill of bars which creates something like a wifi signal strength indicator.</p>\n\n<pre><code>&lt;local:SignalStrengthControlDesignData\n    xmlns:local=\"clr-namespace:Connection.DesignData\"\n    xmlns:connection=\"clr-namespace:Connection\"\n    xmlns:markup=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n    RatingValue=\"FourBars\"\n/&gt;\n&lt;!--RatingValue=\"{markup:Static connection:SignalStrength.FourBars}\"--&gt;\n</code></pre>\n\n<p>Here is my SignalStrengthControlDesignData.xaml. I tried the commented out code and it doesn't work either. I believe \"FourBars\" is being interpreted as an enum because autocomplete says it's an enum member. Below is the design data code behind.</p>\n\n<pre><code>internal sealed class SignalStrengthControlDesignData\n{\n    public SignalStrength RatingValue { get; set; }\n}\n</code></pre>\n\n<p>Here's the code behind for the SignalStrengthControl, has the dependency property, enum and converter.</p>\n\n<pre><code>public partial class SignalStrengthControl \n{\n    public SignalStrengthControl()\n    {\n        InitializeComponent();\n    }\n\n    public SignalStrength RatingValue\n    {\n        get { return (SignalStrength)GetValue(RatingValueProperty); }\n        set { SetValue(RatingValueProperty, value); }\n    }\n\n    // Using a DependencyProperty as the backing store for RatingValue.  This enables animation, styling, binding, etc...\n    public static readonly DependencyProperty RatingValueProperty =\n        DependencyProperty.Register(\"RatingValue\", typeof(SignalStrength), typeof(SignalStrengthControl), new UIPropertyMetadata(SignalStrength.ZeroBars));\n}\n\npublic enum SignalStrength\n{\n    ZeroBars,\n    OneBar,\n    TwoBars,\n    ThreeBars,\n    FourBars,\n    FiveBars\n}\n\npublic class RatingConverter : IValueConverter\n{\n    public Brush OnBrush { get; set; }\n    public Brush OffBrush { get; set; }\n\n    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)\n    {\n        if (value == null || parameter == null)\n        {\n            return Brushes.Transparent;\n        }\n\n        // There are five bars in the xaml with each having a barNumber associated with it. The smallest bar\n        // on the left has a barNumber value of 1, the largest has 5.\n        int barNumber;\n        if (int.TryParse(parameter.ToString(), out barNumber))\n        {\n            var signalStrengthRating = (int)value; \n            if (barNumber &lt;= signalStrengthRating)\n            {\n                return this.OnBrush;\n            }\n            return this.OffBrush;\n        }\n        return Brushes.Transparent;\n    }\n\n    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)\n    {\n        throw new NotImplementedException();\n    }\n}\n</code></pre>\n\n<p>I've also replaced this.OnBrush with Brushes.WhateverColor and it still does not appear in the designer.</p>\n\n<p>I know that one way to get something showing is to have a FallBackValue but in the future I may need something more complex than this showing up. </p>\n\n<p>Open to all suggestions.</p>\n"}, {"tags": ["c#", "sql-server", "ssis"], "answers": [{"comments": [{"owner": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534369127, "post_id": 51866723, "comment_id": 90685659, "body": "The &quot;pkg&quot; path is on the local computer, so I can set that to C:\\Temp. So where do you provide the server path? For example if I want to save from \\MSDB\\Custom Packages\\"}, {"owner": {"reputation": 30925, "user_id": 7031230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sPvnP.jpg?s=128&g=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/7031230/hadi"}, "reply_to_user": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534369319, "post_id": 51866723, "comment_id": 90685726, "body": "I am a bit confused. Are you asking how to save the package on local machine. Or how to load it from SQL Server??"}, {"owner": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 1, "creation_date": 1534369343, "post_id": 51866723, "comment_id": 90685732, "body": "I have a package on a SQL Server. I want to save it (export) to my local machine."}, {"owner": {"reputation": 30925, "user_id": 7031230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sPvnP.jpg?s=128&g=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/7031230/hadi"}, "reply_to_user": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534369376, "post_id": 51866723, "comment_id": 90685747, "body": "Then you should use the method i provided"}, {"owner": {"reputation": 30925, "user_id": 7031230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sPvnP.jpg?s=128&g=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/7031230/hadi"}, "reply_to_user": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534369400, "post_id": 51866723, "comment_id": 90685754, "body": "The first argument is the destination path"}, {"owner": {"reputation": 30925, "user_id": 7031230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sPvnP.jpg?s=128&g=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/7031230/hadi"}, "reply_to_user": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534369447, "post_id": 51866723, "comment_id": 90685766, "body": "If you need to export it to <code>C:\\Temp</code> then you should pass <code>C:\\Temp\\myNewPackage.dtsx</code>"}, {"owner": {"reputation": 30925, "user_id": 7031230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sPvnP.jpg?s=128&g=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/7031230/hadi"}, "reply_to_user": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534369744, "post_id": 51866723, "comment_id": 90685879, "body": "@coinbird i am waiting for your reply"}, {"owner": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534369852, "post_id": 51866723, "comment_id": 90685912, "body": "It says  Failed to open package file &quot;C:\\Temp\\newPackage.dtsx&quot; due to error 0x800C0006 &quot;The system cannot locate the object specified.&quot;  I&#39;m not sure that method is right, it doesn&#39;t have a parameter for a SQL Server. Or a path in Integration Services. How does it even know where to look for the package I want to save?"}, {"owner": {"reputation": 30925, "user_id": 7031230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sPvnP.jpg?s=128&g=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/7031230/hadi"}, "reply_to_user": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534370022, "post_id": 51866723, "comment_id": 90685959, "body": "The error you provided is thrown during Package Load not Package saving!!"}, {"owner": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534370087, "post_id": 51866723, "comment_id": 90685975, "body": "Right, because the package does not exist at that C:\\Temp location. It&#39;s on the SQL Server. I updated my post with the code you suggested."}, {"owner": {"reputation": 30925, "user_id": 7031230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sPvnP.jpg?s=128&g=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/7031230/hadi"}, "reply_to_user": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534370089, "post_id": 51866723, "comment_id": 90685979, "body": "@coinbird The code you provided is trying to open the package <code>C:\\Temp\\newPackage.dtsx</code> and save it to <code>TestPackage</code>"}, {"owner": {"reputation": 30925, "user_id": 7031230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sPvnP.jpg?s=128&g=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/7031230/hadi"}, "reply_to_user": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 0, "creation_date": 1534370172, "post_id": 51866723, "comment_id": 90686000, "body": "To load package from SQL Server follow this link <a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.sqlserver.dts.runtime.application.loadfromsqlserver?view=sqlserver-2017#Microsoft_SqlServer_Dts_Runtime_Application_LoadFromSqlServer_System_String_System_String_System_String_System_String_Microsoft_SqlServer_Dts_Runtime_IDTSEvents_\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/api/&hellip;</a>"}, {"owner": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "edited": false, "score": 1, "creation_date": 1534370729, "post_id": 51866723, "comment_id": 90686167, "body": "For anyone reading this in the future: the &quot;pkgIn&quot; path already has &quot;MSDB&quot; built into the path, so if you need &quot;\\MSDB\\packages&quot; or whatever, just use &quot;\\packages&quot;"}], "tags": [], "owner": {"reputation": 30925, "user_id": 7031230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sPvnP.jpg?s=128&g=1", "display_name": "Hadi", "link": "https://stackoverflow.com/users/7031230/hadi"}, "is_accepted": true, "score": 1, "last_activity_date": 1534370315, "last_edit_date": 1534370315, "creation_date": 1534368584, "answer_id": 51866723, "question_id": 51866405, "link": "https://stackoverflow.com/questions/51866405/saving-ssis-package-to-local-machine/51866723#51866723", "title": "Saving SSIS package to local machine", "body": "<p>You have to use <code>SaveToXml()</code> Function to achieve that.</p>\n\n<pre><code>app.SaveToXml(\"C:\\Temp\\myNewPackage.dtsx\", pkg, null);  \n</code></pre>\n\n<p>You can refer to this link:</p>\n\n<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.sqlserver.dts.runtime.application.savetoxml?view=sqlserver-2017\" rel=\"nofollow noreferrer\">Application.SaveToXml(String, Package, IDTSEvents) Method</a></li>\n</ul>\n\n<hr>\n\n<h1>Update 1</h1>\n\n<p>Try using a similar code:</p>\n\n<pre><code>Package pkgIn = new Package();  \npkgIn = app.LoadFromSqlServer(\"\\\\myNewPackage\", \"yourserver\", null, null, null);\napp.SaveToXml(\"C:\\Temp\\myNewPackage.dtsx\", pkgIn , null);\n</code></pre>\n\n<p>You can refer to this link for more information about loading package from SQL Server:</p>\n\n<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.sqlserver.dts.runtime.application.loadfromsqlserver?view=sqlserver-2017#Microsoft_SqlServer_Dts_Runtime_Application_LoadFromSqlServer_System_String_System_String_System_String_System_String_Microsoft_SqlServer_Dts_Runtime_IDTSEvents_\" rel=\"nofollow noreferrer\">Application.LoadFromSqlServer(String, String, String, String, IDTSEvents) Method</a></li>\n</ul>\n"}], "owner": {"reputation": 1084, "user_id": 2829492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cMV8k.jpg?s=128&g=1", "display_name": "coinbird", "link": "https://stackoverflow.com/users/2829492/coinbird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 51866723, "answer_count": 1, "score": 2, "last_activity_date": 1534370646, "creation_date": 1534367000, "last_edit_date": 1534370646, "question_id": 51866405, "link": "https://stackoverflow.com/questions/51866405/saving-ssis-package-to-local-machine", "title": "Saving SSIS package to local machine", "body": "<p>Right now I'm able to upload an SSIS package from my local computer to SQL Server with my C# program:</p>\n\n<pre><code>Microsoft.SqlServer.Dts.Runtime.Application app;\napp = new Microsoft.SqlServer.Dts.Runtime.Application();\n\n\nstring pkg = @\"C:\\Temp\\myPackage.dtsx\";\nPackage loadedPkg = app.LoadPackage(pkg, null);\n\napp.SaveToSqlServerAs(loadedPkg, null, \"myNewPackage\", \"myServer\", null, null);\n</code></pre>\n\n<p>This works great. Now I want to do the opposite of this, save an SSIS package from the SQL Server to my local computer. I'm using the Microsoft documentation here: <a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.sqlserver.dts.runtime.application?view=sqlserver-2017\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/api/microsoft.sqlserver.dts.runtime.application?view=sqlserver-2017</a></p>\n\n<p>It doesn't seem to have any methods to save to a computer. I see the \"load\" methods, but I haven't been able to get those to work. I think they just prep a package to be uploaded to the server, like in my previous example. Is this possible through the same \"Application\" class?</p>\n\n<p><strong>edit</strong>: For anyone reading this in the future: the \"pkgIn\" path from @Hadi's answer already has \"MSDB\" built into the path, so if you need \"\\MSDB\\packages\" or whatever, just use \"\\packages\"</p>\n"}, {"tags": ["c#", "linq", "associations", "predicate", "linq-expressions"], "comments": [{"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1534367213, "post_id": 51866404, "comment_id": 90685028, "body": "Since you are passing in <code>predicate</code> that is an <code>Expression&lt;Func&lt;T1,T2,bool&gt;&gt;</code> what are you gaining by calling <code>WhatToCallThis</code>?"}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 0, "creation_date": 1534369560, "post_id": 51866404, "comment_id": 90685814, "body": "Start by trying both of those and even seeing if they work.  Then decide which one you like better, if you still have a decision left."}, {"owner": {"reputation": 411, "user_id": 8624010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/499a5db74626b6d59a0b6fa2515f00e1?s=128&d=identicon&r=PG&f=1", "display_name": "tb-mtg", "link": "https://stackoverflow.com/users/8624010/tb-mtg"}, "reply_to_user": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1534373312, "post_id": 51866404, "comment_id": 90686783, "body": "@NetMage: For some ORM&#39;s I use I need to call the method with T1 as first argument and then T2 as first argument on other side of association."}], "answers": [{"tags": [], "owner": {"reputation": 411, "user_id": 8624010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/499a5db74626b6d59a0b6fa2515f00e1?s=128&d=identicon&r=PG&f=1", "display_name": "tb-mtg", "link": "https://stackoverflow.com/users/8624010/tb-mtg"}, "is_accepted": false, "score": 0, "last_activity_date": 1576627630, "last_edit_date": 1576627630, "creation_date": 1576626965, "answer_id": 59383755, "question_id": 51866404, "link": "https://stackoverflow.com/questions/51866404/create-linq-expressions-t2-t1-bool-from-t1-t2-bool/59383755#59383755", "title": "Create Linq Expressions &lt;T2,T1,bool&gt; from &lt;T1,T2,bool&gt;", "body": "<p>It seems all 3 methods below work, but which would be the best to use performance wise?</p>\n\n<p>SwapParameters1 using <strong>Expression.Lambda</strong>:</p>\n\n<pre><code>public static Expression&lt;Func&lt;T2, T1, TResult&gt;&gt; SwapParameters1&lt;T1, T2, TResult&gt;\n  (this Expression&lt;Func&lt;T1, T2, TResult&gt;&gt; exprFunc)\n  =&gt; Expression.Lambda&lt;Func&lt;T2, T1, TResult&gt;&gt;(exprFunc.Body\n                                            , exprFunc.Parameters[1]\n                                            , exprFunc.Parameters[0]);\n</code></pre>\n\n<p>SwapParameters2 using <strong>.Compile():</strong></p>\n\n<pre><code>public static Expression&lt;Func&lt;T2, T1, TResult&gt;&gt; SwapParameters2&lt;T1, T2, TResult&gt;\n  (this Expression&lt;Func&lt;T1, T2, TResult&gt;&gt; exprFunc)\n  =&gt; (t1, t2) =&gt; exprFunc.Compile()(t2, t1);\n</code></pre>\n\n<p>SwapParameters3 using an <strong>ExpressionVisitor</strong> to replace parameters (this <a href=\"https://stackoverflow.com/questions/21154906/how-to-modify-type-parameter-of-expressionfunc-bool\">so</a> question helped):</p>\n\n<pre><code>public static Expression&lt;Func&lt;T2, T1, TResult&gt;&gt; SwapParameters3&lt;T1, T2, TResult&gt;\n  (this Expression&lt;Func&lt;T1, T2, TResult&gt;&gt; exprFunc) {\n  var param1 = Expression.Parameter(typeof(T1));\n  var param2 = Expression.Parameter(typeof(T2));\n  return Expression.Lambda&lt;Func&lt;T2, T1, TResult&gt;&gt;(exprFunc.Body\n    .Replace(exprFunc.Parameters[0], param1)\n    .Replace(exprFunc.Parameters[1], param2)\n    , param1, param2);\n}\n\npublic static Expression&lt;Func&lt;TNewParam, TResult&gt;&gt; ReplaceParameter&lt;TNewParam, TOldParam, TResult&gt;\n  (this Expression&lt;Func&lt;TOldParam, TResult&gt;&gt; expression)\n  where TNewParam : TOldParam {\n  var param = Expression.Parameter(typeof(TNewParam));\n  return Expression.Lambda&lt;Func&lt;TNewParam, TResult&gt;&gt;(\n    expression.Body.Replace(expression.Parameters[0], param)\n    , param);\n}\n\npublic class ReplaceVisitor : ExpressionVisitor {\n  private readonly Expression from, to;\n  public ReplaceVisitor(Expression from, Expression to) {\n    this.from = from;\n    this.to = to;\n  }\n\n  public override Expression Visit(Expression node) =&gt; node == from ? to : base.Visit(node);\n}\n\npublic static Expression Replace(this Expression expression, Expression searchExpression, Expression replaceExpression)\n  =&gt; new ReplaceVisitor(searchExpression, replaceExpression).Visit(expression);\n</code></pre>\n\n<p>I am leaning towards using SwapParameters1.</p>\n"}], "owner": {"reputation": 411, "user_id": 8624010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/499a5db74626b6d59a0b6fa2515f00e1?s=128&d=identicon&r=PG&f=1", "display_name": "tb-mtg", "link": "https://stackoverflow.com/users/8624010/tb-mtg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576627630, "creation_date": 1534366996, "question_id": 51866404, "link": "https://stackoverflow.com/questions/51866404/create-linq-expressions-t2-t1-bool-from-t1-t2-bool", "title": "Create Linq Expressions &lt;T2,T1,bool&gt; from &lt;T1,T2,bool&gt;", "body": "<p>I would like to prevent duplicating the same predicate logic used for both side of joins/associations in ORMs. Should I:</p>\n\n<p>1) use <code>Func&lt;T1, T2, bool&gt;</code> and use extension methods to get expressions:</p>\n\n<pre><code>public static Expression&lt;Func&lt;T1, T2, bool&gt;&gt; ExpressionFuncT1T2&lt;T1, T2&gt;(this Func&lt;T1, T2, bool&gt; func) =&gt; (t1, t2) =&gt; func(t1, t2);\n\npublic static Expression&lt;Func&lt;T2, T1, bool&gt;&gt; ExpressionFuncT2T1&lt;T1, T2&gt;(this Func&lt;T1, T2, bool&gt; func) =&gt; (t1, t2) =&gt; func(t2, t1);\n</code></pre>\n\n<p>or </p>\n\n<p>2) use <code>Expression&lt;Func&lt;T1, T2, bool&gt;&gt;</code> for one side and convert it to <code>Expression&lt;Func&lt;T2, T1, bool&gt;&gt;</code> like something below based on this <a href=\"https://stackoverflow.com/questions/7626965/linq-creating-expressiont1-from-expressiont2\">stackoverflow question</a> answer:</p>\n\n<pre><code>public static Expression&lt;Func&lt;T2, T1, bool&gt;&gt; WhatToCallThis&lt;T1,T2&gt;(\n         this Expression&lt;Func&lt;T1, T2, bool&gt;&gt; predicate) {\n\n      var t1 = Expression.Parameter(typeof(T1), \"t1\");\n      var t2 = Expression.Parameter(typeof(T2), \"t2\");\n      return Expression.Lambda&lt;Func&lt;T2, T1, bool&gt;&gt;(\n          Expression.Invoke(predicate, \n          Expression.PropertyOrField(t2, \"T1\"), \n          Expression.PropertyOrField(t1, \"T2\")\n          ), t2, t1);\n    }\n</code></pre>\n\n<p>Also what would you name this method?</p>\n"}, {"tags": ["c#", "asp.net", "asp.net-web-api", "webforms"], "comments": [{"owner": {"reputation": 2471, "user_id": 1481690, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0f0c254614dbc3ea9542407643e35c87?s=128&d=identicon&r=PG", "display_name": "Peru", "link": "https://stackoverflow.com/users/1481690/peru"}, "edited": false, "score": 0, "creation_date": 1534368247, "post_id": 51866397, "comment_id": 90685401, "body": "where is the code for if site.name == (???)"}, {"owner": {"reputation": 367, "user_id": 5490120, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/164b3308717c8f1b3072d45f100c5910?s=128&d=identicon&r=PG&f=1", "display_name": "phroureo", "link": "https://stackoverflow.com/users/5490120/phroureo"}, "reply_to_user": {"reputation": 2471, "user_id": 1481690, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0f0c254614dbc3ea9542407643e35c87?s=128&d=identicon&r=PG", "display_name": "Peru", "link": "https://stackoverflow.com/users/1481690/peru"}, "edited": false, "score": 0, "creation_date": 1534368316, "post_id": 51866397, "comment_id": 90685428, "body": "That&#39;s exactly what I was asking. I hadn&#39;t the slightest for what to put in that code. Tracy Zhou gave me a solution that worked below. :)"}], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 5490120, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/164b3308717c8f1b3072d45f100c5910?s=128&d=identicon&r=PG&f=1", "display_name": "phroureo", "link": "https://stackoverflow.com/users/5490120/phroureo"}, "edited": false, "score": 0, "creation_date": 1534368824, "post_id": 51866520, "comment_id": 90685565, "body": "Can I make this code return some kind of value that my <code>aspx.cs</code> page where I&#39;m running the <code>POST</code> can look to determine what the aspx page should do depending on whether it posted successfully or not?"}, {"owner": {"reputation": 461, "user_id": 7925679, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2SI0eLFF-Z8/AAAAAAAAAAI/AAAAAAAAAFk/D3NS7asdQWk/photo.jpg?sz=128", "display_name": "Tracy Zhou", "link": "https://stackoverflow.com/users/7925679/tracy-zhou"}, "reply_to_user": {"reputation": 367, "user_id": 5490120, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/164b3308717c8f1b3072d45f100c5910?s=128&d=identicon&r=PG&f=1", "display_name": "phroureo", "link": "https://stackoverflow.com/users/5490120/phroureo"}, "edited": false, "score": 0, "creation_date": 1534370812, "post_id": 51866520, "comment_id": 90686189, "body": "You are welcome. The answer was just edited with status code, let me know if it works."}, {"owner": {"reputation": 367, "user_id": 5490120, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/164b3308717c8f1b3072d45f100c5910?s=128&d=identicon&r=PG&f=1", "display_name": "phroureo", "link": "https://stackoverflow.com/users/5490120/phroureo"}, "edited": false, "score": 0, "creation_date": 1534371527, "post_id": 51866520, "comment_id": 90686369, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 461, "user_id": 7925679, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2SI0eLFF-Z8/AAAAAAAAAAI/AAAAAAAAAFk/D3NS7asdQWk/photo.jpg?sz=128", "display_name": "Tracy Zhou", "link": "https://stackoverflow.com/users/7925679/tracy-zhou"}, "is_accepted": true, "score": 2, "last_activity_date": 1534370536, "last_edit_date": 1534370536, "creation_date": 1534367579, "answer_id": 51866520, "question_id": 51866397, "link": "https://stackoverflow.com/questions/51866397/how-to-limit-post-in-web-api/51866520#51866520", "title": "How to limit POST in web API", "body": "<p>Check if the record exists first</p>\n\n<pre><code>if(!db.site.Any(s =&gt; s.Name == site.name))\n{\n    db.site.Add(site);\n    db.SaveChanges();\n}\n</code></pre>\n\n<p>If you like to get the status, here is some sample code:</p>\n\n<pre><code>// POST: api/site\npublic HttpResponseMessage Postsite(site site)\n{\n       if(!db.site.Any(s =&gt; s.Name == site.name))\n       {\n           db.site.Add(site);\n           db.SaveChanges();\n           var message = Request.CreateResponse(HttpStatusCode.Created, site);\n           message.Headers.Location = new Uri(Request.RequestUri + site.Id.ToString());\n           return message;\n       }\n       else\n       {\n          return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ex);\n       }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 5490120, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/164b3308717c8f1b3072d45f100c5910?s=128&d=identicon&r=PG&f=1", "display_name": "phroureo", "link": "https://stackoverflow.com/users/5490120/phroureo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 51866520, "answer_count": 1, "score": 0, "last_activity_date": 1534370536, "creation_date": 1534366977, "question_id": 51866397, "link": "https://stackoverflow.com/questions/51866397/how-to-limit-post-in-web-api", "title": "How to limit POST in web API", "body": "<p>I have the following <code>POST</code> code in my SiteController.cs file. </p>\n\n<pre><code>// POST: api/site\n[ResponseType(typeof(site))]\npublic IHttpActionResult Postsite(site site)\n{\n    if (!ModelState.IsValid)\n    {\n        return BadRequest(ModelState);\n    }\n\n    db.site.Add(site);\n    db.SaveChanges();\n\n    return CreatedAtRoute(\"DefaultApi\", new { id = site.id }, site);\n}\n</code></pre>\n\n<p>I have a web form where I'm using code to <code>POST</code> the fields to the Site table in my database. </p>\n\n<p>In the database (and also in my site.cs class), Site has 5 attributes: ID, Name, City, State, and Country. When I use the <code>POST</code> form it adds to this table.</p>\n\n<p>What I want to do is check in the <code>POST</code> code above if the <code>Name</code> attribute of the class already exists with that name in the table/API results. How would I go about making this <code>POST</code> method capable of making this check? </p>\n\n<p>I've tried doing something like <code>if site.name == (???)</code> and then throw an error, but I'm not sure what would go in the (???) to check the rest of the API's results. </p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 5023, "user_id": 5198140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1cee3e602ccec4e9fb715c9413d3f31?s=128&d=identicon&r=PG&f=1", "display_name": "Richardissimo", "link": "https://stackoverflow.com/users/5198140/richardissimo"}, "edited": false, "score": 0, "creation_date": 1534395479, "post_id": 51866306, "comment_id": 90691162, "body": "Which query was being executed at the time? (The stack trace will tell you.) Unrelated tip: MOS is IDisposable so should be in a <code>using</code> block."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8510290, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155588904159194/picture?type=large", "display_name": "Chris Dewey", "link": "https://stackoverflow.com/users/8510290/chris-dewey"}, "edited": false, "score": 0, "creation_date": 1534427440, "post_id": 51869602, "comment_id": 90708690, "body": "Thank you this worked. So simple but did not see it. Thanks again."}], "tags": [], "owner": {"reputation": 493, "user_id": 8674428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ew6lG.png?s=128&g=1", "display_name": "MSDN.WhiteKnight", "link": "https://stackoverflow.com/users/8674428/msdn-whiteknight"}, "is_accepted": true, "score": 1, "last_activity_date": 1534393588, "creation_date": 1534393588, "answer_id": 51869602, "question_id": 51866306, "link": "https://stackoverflow.com/questions/51866306/i-get-an-invalid-query-error-when-foreach-managementobject-mo-in-mos-get/51869602#51869602", "title": "I get an invalid query error when foreach (ManagementObject mo in mos.Get())", "body": "<p>Your query is incorrect, you need to insert whitespace between tokens: <code>\"SELECT * FROM \" + hwclass</code>, then it will work. </p>\n"}], "owner": {"reputation": 33, "user_id": 8510290, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155588904159194/picture?type=large", "display_name": "Chris Dewey", "link": "https://stackoverflow.com/users/8510290/chris-dewey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 51869602, "answer_count": 1, "score": 0, "last_activity_date": 1534393588, "creation_date": 1534366557, "last_edit_date": 1534367021, "question_id": 51866306, "link": "https://stackoverflow.com/questions/51866306/i-get-an-invalid-query-error-when-foreach-managementobject-mo-in-mos-get", "title": "I get an invalid query error when foreach (ManagementObject mo in mos.Get())", "body": "<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Windows.Forms;\nusing System.Management;\n\nnamespace NetPrimate_Provisioning_Tool_1\n{\n    public partial class Form1 : Form\n    {\n        public Form1()\n        {\n            InitializeComponent();\n        }\n\n        private void btnGet_Click(object sender, EventArgs e)\n        {\n\n            foreach (string cpu in GetComponents(\"WIN32_Processor\", \"Name\"))\n            {\n                txtInfo.AppendText(\"CPU:\" + cpu + Environment.NewLine);\n            }\n\n            foreach (string gpu in GetComponents(\"WIN32_VideoController\", \"Name\"))\n            {\n                txtInfo.AppendText(\"GPU:\" + gpu + Environment.NewLine);\n            }\n\n            foreach (string os in GetComponents(\"WIN32_OperatingSystem\", \"Caption\"))\n            {\n                txtInfo.AppendText(\"OS:\" + os);\n                if(Environment.Is64BitOperatingSystem)\n                {\n                    txtInfo.AppendText(\"64Bit\" + Environment.NewLine);\n                }\n                else\n                {\n                    txtInfo.AppendText(\"32Bit\" + Environment.NewLine);\n                }\n            }\n\n            string ram = GetComponents(\"WIN32_ComputerSystem\", \"TotalPhysicalMemory\")[0];\n\n            double db_ram = Convert.ToDouble(ram) / 1073741824;\n\n            int size = (int)Math.Ceiling(db_ram);\n\n            txtInfo.AppendText(\"RAM:\" + size.ToString() + \"GB\");\n\n        }\n\n        public List&lt;string&gt; GetComponents(string hwclass, string syntax)\n        {\n            List&lt;string&gt; details = new List&lt;string&gt;();\n\n            ManagementObjectSearcher mos = new ManagementObjectSearcher(\"root\\\\CIMV2\", \"SELECT*FROM \" + hwclass);\n\n            foreach (ManagementObject mo in mos.Get())    ##ERROR HERE##\n\n            {\n                details.Add(mo[syntax].ToString());\n            }\n\n            return details;\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Hi All im getting invalid query on the line i have marked (##ERROR HERE##) but i cant seem to locate a fix can anyone help. This script should look at the system and get system information.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qlVHc.png\" rel=\"nofollow noreferrer\">Photo of the Program</a></p>\n"}, {"tags": ["c#", "asp.net", "asp.net-mvc"], "comments": [{"owner": {"reputation": 196067, "user_id": 40521, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8faa5e8a474933dd207c86fb886a7f28?s=128&d=identicon&r=PG", "display_name": "Shyju", "link": "https://stackoverflow.com/users/40521/shyju"}, "edited": false, "score": 0, "creation_date": 1534366441, "post_id": 51866222, "comment_id": 90684728, "body": "You need to use <code>FormData</code> Refer this post <a href=\"https://stackoverflow.com/questions/38703182/how-to-upload-files-using-ajax-to-asp-net-mvc-controller-action/38703844#38703844\">How to upload files using ajax to asp.net mvc controller action</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3559349"}, "edited": false, "score": 0, "creation_date": 1534370138, "post_id": 51866222, "comment_id": 90685992, "body": "<code>enctype</code> has nothing at all to do with upload files using ajax"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 9187311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6J9O6.jpg?s=128&g=1", "display_name": "Stephan Oomen", "link": "https://stackoverflow.com/users/9187311/stephan-oomen"}, "is_accepted": false, "score": 0, "last_activity_date": 1534368617, "creation_date": 1534368617, "answer_id": 51866732, "question_id": 51866222, "link": "https://stackoverflow.com/questions/51866222/httppostedfilebase-returning-null-from-ajax-post-in-asp-net-mvc-app/51866732#51866732", "title": "HttpPostedFileBase returning null from AJAX post in ASP.NET MVC App", "body": "<p>When you want to post multipart form-data using <code>XMLHttpRequest</code> or a wrapper that uses it (like jQuery). You need to create a <code>FormData</code> object and add the files and formdata you want to send to the server. Only then the data is being sent accordingly to the server.</p>\n\n<p>There are already some answers on how to use the <code>FormData</code> object</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax\">Sending multipart/formdata with jQuery.ajax</a></p>\n\n<p><a href=\"https://www.mkyong.com/jquery/jquery-ajax-submit-a-multipart-form/\" rel=\"nofollow noreferrer\">https://www.mkyong.com/jquery/jquery-ajax-submit-a-multipart-form/</a></p>\n"}], "owner": {"reputation": 1008, "user_id": 8604465, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5f4ff41ec61421ef2f45bee26d922ccc?s=128&d=identicon&r=PG&f=1", "display_name": "J.G.Sable", "link": "https://stackoverflow.com/users/8604465/j-g-sable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1295, "favorite_count": 0, "closed_date": 1534370172, "answer_count": 1, "score": 0, "last_activity_date": 1534370190, "creation_date": 1534366188, "question_id": 51866222, "link": "https://stackoverflow.com/questions/51866222/httppostedfilebase-returning-null-from-ajax-post-in-asp-net-mvc-app", "closed_reason": "Duplicate", "title": "HttpPostedFileBase returning null from AJAX post in ASP.NET MVC App", "body": "<p>I've done a little research on this and it always says the same thing, make sure you have enctype for \"multipart/form-data\" when trying to do an ajax post with a file to an mvc controller. As far as I can tell, I have done that yet still when I run through the debugger, HttpPostedFileBase always returns null. I'm not seeing where I'm missing something probably very obvious.</p>\n\n<p>Here is the razor view form.</p>\n\n<pre><code>@using (Html.BeginForm(\"Edit\", \"Story\", FormMethod.Post, new { encType = \"multipart/form-data\" }))\n            {\n                @Html.AntiForgeryToken()\n                @Html.ValidationSummary(true, \"\", new { @class = \"text-danger\" })\n                @Html.HiddenFor(x =&gt; x.StoryId)\n\n                &lt;div class=\"form-group\"&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class=\"col-sm-4\"&gt;\n                            &lt;div class=\"card\"&gt;\n                                &lt;div class=\"card-body\"&gt;\n                                    &lt;p class=\"card-text\"&gt;Add/Edit cover art to your story&lt;/p&gt;\n                                    &lt;img class=\"img-thumbnail\" src=\"~/Imgs/@Model.CoverArt\" /&gt;\n                                    &lt;input type=\"file\" id=\"file\" name=\"file\" class=\"form-control\" /&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"col-sm-8\"&gt;&lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"form-row\"&gt;\n                    &lt;div class=\"col-6\"&gt;\n                        @Html.LabelFor(model =&gt; model.Title, htmlAttributes: new { @class = \"control-label text-muted\" })\n                        @Html.EditorFor(model =&gt; model.Title, new { htmlAttributes = new { @class = \"form-control\" } })\n                        @Html.ValidationMessageFor(model =&gt; model.Title, \"\", new { @class = \"text-danger\" })\n                    &lt;/div&gt;\n                    &lt;div class=\"col-3\"&gt;\n                        @Html.LabelFor(x =&gt; x.Genre, htmlAttributes: new { @class = \"control-label text-muted\" })\n                        @Html.DropDownListFor(x =&gt; x.Genre, new SelectList(Model.Genres, \"Id\", \"Name\"), new { @class = \"form-control\" })\n                        @Html.ValidationMessageFor(model =&gt; model.Genre, \"\", new { @class = \"text-danger\" })\n                    &lt;/div&gt;\n                    &lt;div class=\"col-3\"&gt;\n                        @Html.Label(\"Visibility\", htmlAttributes: new { @class = \"control-label text-muted\" })\n                        &lt;i class=\"fa fa-question-circle-o\" data-toggle=\"popover\" title=\"What does visibility mean?\" data-placement=\"right\" data-content=\"Visibility determines whether other users can see this story or not. Public means any other user can read, vote, and review the story. You can change this to private, which will hide the story from other users. You, as the author, will be able to see all of your stories - both public and prviate - under your account.\"&gt;&lt;/i&gt;\n                        @Html.DropDownListFor(x =&gt; x.Visibility, new SelectList(Model.Visibilities, \"Id\", \"Name\"), new { @class = \"form-control\" })\n                        @Html.ValidationMessageFor(model =&gt; model.Visibility, \"\", new { @class = \"text-danger\" })\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;div class=\"form-row mt-3\"&gt;\n                    &lt;div class=\"col-6\"&gt;\n                        @Html.Label(\"Story Type\", htmlAttributes: new { @class = \"control-label text-muted\" })\n                        @Html.DropDownListFor(x =&gt; x.StoryType, new SelectList(Model.StoryTypes, \"Id\", \"Name\"), new { @class = \"form-control\" })\n                        @Html.ValidationMessageFor(model =&gt; model.StoryType, \"\", new { @class = \"text-danger\" })\n                    &lt;/div&gt;\n                    &lt;div class=\"col-6\"&gt;\n                        @Html.Label(\"Target Age Range\", htmlAttributes: new { @class = \"control-label text-muted\" })\n                        @Html.DropDownListFor(x =&gt; x.StoryAgeRange, new SelectList(Model.StoryAgeRanges, \"Id\", \"Name\"), new { @class = \"form-control\" })\n                        @Html.ValidationMessageFor(model =&gt; model.StoryAgeRange, \"\", new { @class = \"text-danger\" })\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"form-row mt-5\"&gt;\n                    &lt;div class=\"col-12\"&gt;\n                        @Html.Label(\"Write below\", htmlAttributes: new { @class = \"control-label text-muted\" })\n                        @Html.TextAreaFor(model =&gt; model.Content, new { htmlAttributes = new { @class = \"form-control\" } })\n                        @Html.ValidationMessageFor(model =&gt; model.Content, \"\", new { @class = \"text-danger\" })\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"form-row mt-3\"&gt;\n                    &lt;div class=\"btn-group\"&gt;\n                        @Html.ActionLink(\"Cancel\", \"Index\", \"Story\", null, new { @class = \"btn btn-red\" })\n                        &lt;input type=\"button\" id=\"editStoryBtn\" value=\"Edit story\" class=\"btn btn-blue\" /&gt;\n                        &lt;a class=\"btn btn-link ml-auto\" href=\"@Url.Action(\"PublishingRules\", \"Legal\")\"&gt;Publishing Guidelines&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n            }\n</code></pre>\n\n<p>Here is the javascript for the ajax call (and the function I use to get the filename):</p>\n\n<pre><code>//get the filename of the uploaded file\n                var fullPath = document.getElementById('file').value;\n                if (fullPath) {\n                    var startIndex = (fullPath.indexOf('\\\\') &gt;= 0 ? fullPath.lastIndexOf('\\\\') : fullPath.lastIndexOf('/'));\n                    var filename = fullPath.substring(startIndex);\n                    if (filename.indexOf('\\\\') === 0 || filename.indexOf('/') === 0) {\n                        filename = filename.substring(1);\n                    }\n                }\n\n                //create the new story object\n                var editedStory = {\n                    __RequestVerificationToken: token,\n                    StoryId: storyId,\n                    CoverArt: filename,\n                    Title: $(\"input[name='Title']\").val(),\n                    Content: CKEDITOR.instances.Content.getData(),\n                    Genre: $('#Genre').val(),\n                    Visibility: $('#Visibility').val(),\n                    StoryType: $('#StoryType').val(),\n                    StoryAgeRange: $('#StoryAgeRange').val(),\n                    WordCount: finalWordCount\n                }\n\n                //post the edited story to the controller\n                $.ajax({\n                    url: \"/story/edit/\" + storyId,\n                    type: 'POST',\n                    data: editedStory,\n                    success: function (data) {\n                        window.location.href = data.Url;\n                    },\n                    error: function (error) {\n                        console.log(\"error is \" + error);\n                    }\n                });\n</code></pre>\n\n<p>And here is the controller.</p>\n\n<pre><code>//POST story/edit/5\n[Authorize]\n[HttpPost]\n[ValidateAntiForgeryToken]\n[ValidateInput(false)]\npublic ActionResult Edit (EditStoryViewModel viewModel, HttpPostedFileBase file)\n{\n            //confirm model state is valid\n            if (ModelState.IsValid)\n            {\n                //find the correct story by the id and include the reference tables\n                var StoryToEdit = dbContext.Stories.SingleOrDefault(x =&gt; x.Id == viewModel.StoryId);\n\n                //verify file upload\n                if (file != null)\n                {\n                    StoryToEdit.CoverArt = StoryToEdit.Id + Path.GetExtension(file.FileName);\n                    file.SaveAs(Server.MapPath(\"/Imgs/\") + StoryToEdit.CoverArt);\n                }\n\n                StoryToEdit.Title = viewModel.Title;\n                StoryToEdit.Content = viewModel.Content;\n                StoryToEdit.GenreId = viewModel.Genre;\n                StoryToEdit.StoryAgeRangeId = viewModel.StoryAgeRange;\n                StoryToEdit.StoryTypeId = viewModel.StoryType;\n                StoryToEdit.VisibilityId = viewModel.Visibility;\n                StoryToEdit.WordCount = viewModel.WordCount;\n                StoryToEdit.UpdatedAt = DateTime.Now;\n\n                dbContext.Entry(StoryToEdit).State = EntityState.Modified;\n                dbContext.SaveChanges();\n\n                var redirectUrl = new UrlHelper(Request.RequestContext).Action(\"Details\", \"Story\", new { id = StoryToEdit.Id });\n\n                return Json(new { Url = redirectUrl });\n            }\n            else\n            {\n                return View(viewModel);\n            }\n        }\n</code></pre>\n\n<p>What's going wrong because the file is never being saved (everything else works).</p>\n"}, {"tags": ["c#", "monogame", "openfiledialog"], "answers": [{"tags": [], "owner": {"reputation": 1352, "user_id": 2735344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d369895803df5664eb8669ae12980ff3?s=128&d=identicon&r=PG&f=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/2735344/steven"}, "is_accepted": false, "score": 0, "last_activity_date": 1534486704, "creation_date": 1534486704, "answer_id": 51889431, "question_id": 51866191, "link": "https://stackoverflow.com/questions/51866191/refocus-main-window-after-closing-openfiledialog-in-monogame/51889431#51889431", "title": "Refocus main window after closing OpenFileDialog in Monogame", "body": "<p>I thought there would be an simple method for it. <br>(like <code>Game.IsActive</code>, which only checks if the game is out of focus)</p>\n\n<p>After a while, I've found this one around, you can place it in the method where the FileDialog is closing:</p>\n\n<pre><code>using System.Windows.Forms;\n\nForm myForm = (Form)Form.FromHandle(this.Window.Handle);\nmyForm.Activate();\n</code></pre>\n\n<p>This however does use <code>System.Windows.Forms</code>, and that means that your game have to be Windows-exclusive for it. But if you're working in Windows Forms, you can see it as a workaround for now.</p>\n"}], "owner": {"reputation": 1, "user_id": 10231119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e424d666f14600db2b47eff4306500?s=128&d=identicon&r=PG&f=1", "display_name": "Keiji Tadashi", "link": "https://stackoverflow.com/users/10231119/keiji-tadashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534486704, "creation_date": 1534366013, "question_id": 51866191, "link": "https://stackoverflow.com/questions/51866191/refocus-main-window-after-closing-openfiledialog-in-monogame", "title": "Refocus main window after closing OpenFileDialog in Monogame", "body": "<p>I have the user select a file using an OpenFileDialog. After the file is selected, and the dialog is closed, the main window is the last application when alt-tabbing. I want to have the main window regain focus and be on the foreground without having to alt+tab to it after closing the dialog window. Is this possible and if so how?</p>\n\n<pre><code>public class Game1 : Game\n{\n    GraphicsDeviceManager graphics;\n    SpriteBatch spriteBatch;\n    Class1 c1;\n\n    public Game1()\n    {\n        graphics = new GraphicsDeviceManager(this);\n        Content.RootDirectory = \"Content\";\n    }\n\n    protected override void Initialize()\n    {\n        c1 = c1.Instance;\n        base.Initialize();\n    }\n\n    protected override void LoadContent()\n    {\n        spriteBatch = new SpriteBatch(GraphicsDevice);\n        c1.Load(Content);\n\n        c1.GetFile();\n    }\n}\n\n\npublic sealed class Class1\n{\n    private static Class1 _instance = null;\n    private static readonly object _padlock = new object();\n\n    private Class1()\n    {\n    }\n\n    public static Class1 Instance\n    {\n        get\n        {\n            lock (_padlock)\n            {\n                if (_instance == null)\n                {\n                    _instance = new Class1();\n                }\n                return _instance;\n            }\n        }\n    }\n\n    public void GetFile()\n    {\n        string path;\n        OpenFileDialog ofdSelectLayout = new OpenFileDialog();\n        if(ofdSelectLayout.ShowDialog() == DialogResult.OK)\n        {\n            path = ofdSelectLayout.FileName;\n        }\n        //some code\n    }\n\n    public void Load(ContentManager content)\n    {\n        //Loading some textures\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "user-interface", "placeholder"], "comments": [{"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534366169, "post_id": 51866174, "comment_id": 90684628, "body": "WPF? WinForms? WinRT? What framework do you use?"}, {"owner": {"reputation": 509, "user_id": 3127554, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b90595218744ad681da28f57612ae1cd?s=128&d=identicon&r=PG&f=1", "display_name": "user3127554", "link": "https://stackoverflow.com/users/3127554/user3127554"}, "reply_to_user": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534366424, "post_id": 51866174, "comment_id": 90684721, "body": "i use devexpress for my GUI&#39;s so I guess WinForms"}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534366825, "post_id": 51866174, "comment_id": 90684866, "body": "You guess? Meaning, you don&#39;t know? devexpress also has a suite for wpf.. Get one of the forms and check its base class and paste here a full name with namespaces. That will answer all about the framework. Oh, and the version of devx could be needed as well if someone tries to answer."}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534367018, "post_id": 51866174, "comment_id": 90684945, "body": "Re the problem, if that&#39;s winforms, then at base level any container (Form, etc) where you can put your controls can host another controls defined elsewhere (but cannot host other Forms directly). It&#39;s all matter of assigning Parent/Child and some anchors and margins.."}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1534367020, "post_id": 51866174, "comment_id": 90684947, "body": "From DevX, you could try out <a href=\"https://documentation.devexpress.com/WindowsForms/5368/Controls-and-Libraries/Docking-Library\" rel=\"nofollow noreferrer\">documentation.devexpress.com/WindowsForms/5368/&hellip;</a> or <a href=\"https://documentation.devexpress.com/WindowsForms/3406/Controls-and-Libraries/Form-Layout-Managers/Layout-and-Data-Layout-Controls\" rel=\"nofollow noreferrer\">documentation.devexpress.com/WindowsForms/3406/&hellip;</a>, and <a href=\"https://documentation.devexpress.com/WindowsForms/11359/Controls-and-Libraries/Application-UI-Manager\" rel=\"nofollow noreferrer\">documentation.devexpress.com/WindowsForms/11359/&hellip;</a> - they all seem to be able to do something like what you want."}], "owner": {"reputation": 509, "user_id": 3127554, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b90595218744ad681da28f57612ae1cd?s=128&d=identicon&r=PG&f=1", "display_name": "user3127554", "link": "https://stackoverflow.com/users/3127554/user3127554"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534365930, "creation_date": 1534365930, "question_id": 51866174, "link": "https://stackoverflow.com/questions/51866174/placeholder-for-switching-between-guis", "title": "Placeholder for switching between GUI&#39;s", "body": "<p>I have a C# main form where I have the buttons of my functionalities: </p>\n\n<p><a href=\"https://i.stack.imgur.com/f8S2k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f8S2k.png\" alt=\"enter image description here\"></a></p>\n\n<p>Example: I have opened my 'Manage companies'-form but want to open it inside the main form itself. </p>\n\n<p>I want to do this for all of my other functionalities. </p>\n\n<p>Is there some kind of placeholder or something else that I could use without having to change too much of my existing GUI's? </p>\n\n<p>Thanks </p>\n"}, {"tags": ["c#", "linq", "razorengine"], "comments": [{"owner": {"reputation": 2740, "user_id": 4009972, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9f96fc16291174858bf8e03c12cd0c1a?s=128&d=identicon&r=PG&f=1", "display_name": "codeMonkey", "link": "https://stackoverflow.com/users/4009972/codemonkey"}, "edited": false, "score": 0, "creation_date": 1534368209, "post_id": 51866114, "comment_id": 90685381, "body": "Please post the code from your view.  I have strongly typed views that use Linq with no problem, so would need to see your code to know why it doesn&#39;t work."}, {"owner": {"reputation": 193, "user_id": 2183359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf6a7cc003eeaafbd8d86a0275de45f?s=128&d=identicon&r=PG", "display_name": "manoftheyear", "link": "https://stackoverflow.com/users/2183359/manoftheyear"}, "reply_to_user": {"reputation": 2740, "user_id": 4009972, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9f96fc16291174858bf8e03c12cd0c1a?s=128&d=identicon&r=PG&f=1", "display_name": "codeMonkey", "link": "https://stackoverflow.com/users/4009972/codemonkey"}, "edited": false, "score": 0, "creation_date": 1534369637, "post_id": 51866114, "comment_id": 90685843, "body": "@codeMonkey addded a snippet!"}, {"owner": {"reputation": 2740, "user_id": 4009972, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9f96fc16291174858bf8e03c12cd0c1a?s=128&d=identicon&r=PG&f=1", "display_name": "codeMonkey", "link": "https://stackoverflow.com/users/4009972/codemonkey"}, "edited": false, "score": 0, "creation_date": 1534380829, "post_id": 51866114, "comment_id": 90688350, "body": "Thank you!  Well, I&#39;m using MVC, so maybe that&#39;s the difference.  Have you checked out <a href=\"https://weblog.west-wind.com/posts/2010/Dec/27/Hosting-the-Razor-Engine-for-Templating-in-NonWeb-Applications\" rel=\"nofollow noreferrer\">this link</a>?"}, {"owner": {"reputation": 2213, "user_id": 304326, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/89e7f6dfa7ee2ed59af1a1ee2c6dfd1f?s=128&d=identicon&r=PG", "display_name": "Dave M", "link": "https://stackoverflow.com/users/304326/dave-m"}, "edited": false, "score": 0, "creation_date": 1534381580, "post_id": 51866114, "comment_id": 90688494, "body": "Make sure the build directory for the project is just bin/ (not the default bin/debug/) and copy the system.core.dll to the bin directory."}, {"owner": {"reputation": 193, "user_id": 2183359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf6a7cc003eeaafbd8d86a0275de45f?s=128&d=identicon&r=PG", "display_name": "manoftheyear", "link": "https://stackoverflow.com/users/2183359/manoftheyear"}, "reply_to_user": {"reputation": 2740, "user_id": 4009972, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9f96fc16291174858bf8e03c12cd0c1a?s=128&d=identicon&r=PG&f=1", "display_name": "codeMonkey", "link": "https://stackoverflow.com/users/4009972/codemonkey"}, "edited": false, "score": 0, "creation_date": 1534442481, "post_id": 51866114, "comment_id": 90717395, "body": "@codeMonkey Thanks! I assume using MVC include the necessary packages for VS to recognize the commands? Apparently, adding MVC to the project solves the problem, but I was looking for a way to the this without bloating the solution."}, {"owner": {"reputation": 193, "user_id": 2183359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf6a7cc003eeaafbd8d86a0275de45f?s=128&d=identicon&r=PG", "display_name": "manoftheyear", "link": "https://stackoverflow.com/users/2183359/manoftheyear"}, "reply_to_user": {"reputation": 2213, "user_id": 304326, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/89e7f6dfa7ee2ed59af1a1ee2c6dfd1f?s=128&d=identicon&r=PG", "display_name": "Dave M", "link": "https://stackoverflow.com/users/304326/dave-m"}, "edited": false, "score": 0, "creation_date": 1534442590, "post_id": 51866114, "comment_id": 90717445, "body": "@DaveM Copying the system.core.dll to bin solved the problem even without changing the build directory (any idea why?). Could post this as an answer  so I can accept it?"}, {"owner": {"reputation": 2213, "user_id": 304326, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/89e7f6dfa7ee2ed59af1a1ee2c6dfd1f?s=128&d=identicon&r=PG", "display_name": "Dave M", "link": "https://stackoverflow.com/users/304326/dave-m"}, "edited": false, "score": 0, "creation_date": 1534443868, "post_id": 51866114, "comment_id": 90718112, "body": "@manoftheyear Done. I have no idea why. A visual studio dev would probably have to say. Using razor outside MVC doesn\u2019t seem to be a common use case unfortunately. So support for that scenario in VS is missing."}], "answers": [{"tags": [], "owner": {"reputation": 2213, "user_id": 304326, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/89e7f6dfa7ee2ed59af1a1ee2c6dfd1f?s=128&d=identicon&r=PG", "display_name": "Dave M", "link": "https://stackoverflow.com/users/304326/dave-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1534443574, "creation_date": 1534443574, "answer_id": 51883162, "question_id": 51866114, "link": "https://stackoverflow.com/questions/51866114/linq-namespace-with-razorengine/51883162#51883162", "title": "Linq namespace with RazorEngine", "body": "<p>Simply copy <code>system.core.dll</code> to the bin directory of your project.</p>\n\n<p>In the past I have also found it necessary to use <code>bin</code> as my build directory instead of <code>bin\\debug</code> but this appears to no longer be necessary.</p>\n"}], "owner": {"reputation": 193, "user_id": 2183359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf6a7cc003eeaafbd8d86a0275de45f?s=128&d=identicon&r=PG", "display_name": "manoftheyear", "link": "https://stackoverflow.com/users/2183359/manoftheyear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 51883162, "answer_count": 1, "score": 2, "last_activity_date": 1534443574, "creation_date": 1534365682, "last_edit_date": 1534369611, "question_id": 51866114, "link": "https://stackoverflow.com/questions/51866114/linq-namespace-with-razorengine", "title": "Linq namespace with RazorEngine", "body": "<p>I'm trying to use <code>LINQ</code> extension methods to query some <strong>strongly</strong> typed collections in a razor view, powered by RazorEngine. The problem is, it doesn't recognize <code>System.Linq</code> namespace; <code>@using System.Linq</code> generates an error in Intellisense:</p>\n\n<blockquote>\n  <p>the type or namespace Linq does not exist in the namespace (are you\n  missing an assembly reference )</p>\n</blockquote>\n\n<p>I'm looking for a solution without installing <code>WebPages</code> or <code>MVC</code>  packages.</p>\n\n<hr>\n\n<p>Things I have already tried (from other answers for related problems around here):</p>\n\n<ul>\n<li>Moving RazorEngine.dll to bin</li>\n<li>Adding <code>&lt;add key=\"webpages:Version\" value=\"3.0.0.0\" /&gt;</code> to app.config</li>\n<li>Adding <code>&lt;system.web&gt;&lt;compilation debug=\"false\" targetFramework=\"4.5.2\" /&gt;&lt;/system.web&gt;</code> to app.config</li>\n</ul>\n\n<p>Each of these measure solved some problems: initially Intellisense didn't work at all, now it recognizes the following <code>System</code> sub-namespaces: </p>\n\n<blockquote>\n  <p>CodeDom, Collections, ComponentModel, Configuration, Data,<br>\n  Deployment, Diagnostics, Drawning, EnterpriseServices, Globalization, \n  IO, Media, Net, Reflection, Resourcers, Runtime, Security, Text,<br>\n  Threading, Timers, Web, Windows, Xml</p>\n</blockquote>\n\n<hr>\n\n<p>Snippet of my view:</p>\n\n<pre><code>@using RazorEngine.Template\n@using System.Linq &lt;!--namespace doesn't exist in System--&gt;\n@using Namespace.Of.My.Models\n@inherits TemplateBase&lt;ThisPageModel&gt;\n\n&lt;table class=\"my-table-class\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Column1&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Column2&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        @foreach(var item in Model.Children)\n        {\n            &lt;tr&gt;\n                &lt;td&gt;                    \n                    @item.ListOfThings.First() &lt;!--List&lt;Things&gt; does not contains a definition for First--&gt;                     \n                &lt;/td&gt;\n            &lt;/tr&gt;\n        }\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n"}, {"tags": ["c#", "asp.net-core"], "comments": [{"owner": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 3, "creation_date": 1534365758, "post_id": 51866068, "comment_id": 90684432, "body": "This article may help, try returning default(T) or restrict T to a reference type (<a href=\"https://stackoverflow.com/questions/302096/how-can-i-return-null-from-a-generic-method-in-c\" title=\"how can i return null from a generic method in c\">stackoverflow.com/questions/302096/&hellip;</a>)"}, {"owner": {"reputation": 19524, "user_id": 1705266, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/eV8wY.png?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1705266/sam"}, "reply_to_user": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1534366033, "post_id": 51866068, "comment_id": 90684564, "body": "Thank you! Both comments were useful and going with what @KirkLarkin suggested. If one of you posted your comment as answer, I can accept it. Thank you!"}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1534366038, "post_id": 51866068, "comment_id": 90684569, "body": "You can do <code>Task.FromResult&lt;T&gt;(null)</code>."}, {"owner": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "reply_to_user": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1534366079, "post_id": 51866068, "comment_id": 90684584, "body": "Sorry, I deleted my comment as I didn&#39;t see @RyanWilson&#39;s first. Perhaps it&#39;s a duplicate?"}, {"owner": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1534366167, "post_id": 51866068, "comment_id": 90684626, "body": "@Sam I think you should just vote to close this as the answer is well documented in the link I provided. Thank you for considering us with an accepted answer though."}, {"owner": {"reputation": 19524, "user_id": 1705266, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/eV8wY.png?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1705266/sam"}, "reply_to_user": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1534366205, "post_id": 51866068, "comment_id": 90684642, "body": "@RyanWilson I just did :-) Thanks again!"}, {"owner": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1534366221, "post_id": 51866068, "comment_id": 90684646, "body": "@Sam Sure thing. Glad to help."}], "owner": {"reputation": 19524, "user_id": 1705266, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/eV8wY.png?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1705266/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1534366107, "answer_count": 0, "score": 1, "last_activity_date": 1534365491, "creation_date": 1534365491, "question_id": 51866068, "link": "https://stackoverflow.com/questions/51866068/handling-no-content-in-apiclient", "closed_reason": "Duplicate", "title": "Handling No Content in ApiClient", "body": "<p>My ASP.NET Core 2.1 API app communicates with a third party API so I'm creating an ApiClient with generic CRUD methods in it.</p>\n\n<p>The question is how I should handle a scenario where I got nothing from the API call -- I've seen cases where sometimes APIs return <code>204</code> but sometimes, they just return nothing at all with a status <code>200</code>.</p>\n\n<p>When I try to return <code>null</code> in case my <code>response</code> has nothing in it, I'm getting an error that says I can't do it because <code>T</code> may not be <code>nullable</code>.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>private readonly HttpClient _httpClient\n\npublic MyClass(HttpClient httpClient)\n{\n   _httpClient = httpClient;\n}\n\npublic Task&lt;T&gt; GetMyData&lt;T&gt;()\n{\n   try\n   {\n      var response = _httpClient.GetStringAsycn(\"https://someApiUrl\");\n\n      // This is where I'm a bit stuck\n      if(string.IsNullOrEmpty(response))\n         return null; // &lt;&lt;-- Can't return NULL!\n\n      var data = JsonConvert.DeserializeObject&lt;T&gt;(response);\n      return data;\n   }\n   catch(Exception e)\n   {\n       throw new Exception(e.Message);\n   }\n}\n</code></pre>\n"}, {"tags": ["c#", "post", "webhooks", "discord"], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 10194428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6720f0ebddd92f363ea83e9e97c4cbd1?s=128&d=identicon&r=PG&f=1", "display_name": "vividpk21", "link": "https://stackoverflow.com/users/10194428/vividpk21"}, "is_accepted": false, "score": 0, "last_activity_date": 1534368159, "last_edit_date": 1534368159, "creation_date": 1534367508, "answer_id": 51866505, "question_id": 51865962, "link": "https://stackoverflow.com/questions/51865962/discord-bot-program-should-posts-a-message-when-a-certain-action-takes-place/51866505#51866505", "title": "Discord Bot/Program should posts a message when a certain action takes place", "body": "<p>My assumption is that your code is all in main and that everything you posted is what you have. That being said since you are calling an asynchronous method and not waiting for it to complete your program is terminating prior to a full post request being complete. The only difference in the two code examples you posted, python/C#, is that the requests library is not asynchronous so you will need to take that into account when dealing with the HttpClient.</p>\n\n<p>To check if this is in fact the issue try changing your last line of code to:</p>\n\n<pre><code>var res = client.PostAsync(webhook, content).Result;\n//If you want to check result value\nif(res.IsSuccessStatusCode){\n    Console.WriteLine(\"Posted message!\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6085211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6517e6cbe3473a51367ee569d9a8b14?s=128&d=identicon&r=PG&f=1", "display_name": "7151921", "link": "https://stackoverflow.com/users/6085211/7151921"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534368159, "creation_date": 1534364949, "last_edit_date": 1534365045, "question_id": 51865962, "link": "https://stackoverflow.com/questions/51865962/discord-bot-program-should-posts-a-message-when-a-certain-action-takes-place", "title": "Discord Bot/Program should posts a message when a certain action takes place", "body": "<p>The goal: When a certain action occurs this code will execute sending an update to a discord sever the webhook is referring to. This is written in C#</p>\n\n<p>The issue: The event will fire, but no message will be displayed. I have tried WebClient with StringUpload and did not find success. </p>\n\n<pre><code>    HttpClient client = new HttpClient();\n\n    Dictionary&lt;string, string&gt; discordToPost = new Dictionary&lt;string, string&gt;();\n    discordToPost.Add(\"content\", \"Hello World\");\n\n    var content = new FormUrlEncodedContent(discordToPost);\n\n    Uri webhook = new Uri(\"webhook goes here\");\n    client.PostAsync(webhook, content);\n</code></pre>\n\n<p>I found success when I did the exact same task in python 3. Is there a step I am forgetting in C#? Anything helps and is much appreciated. </p>\n\n<pre><code>import requests\nimport sys\n\ndiscord_webhook = 'webhook goes here'\nmessage = { \"content\" : \"Hello World\" }\nrequests.post( discord_webhook, data = message }\n</code></pre>\n"}, {"tags": ["c#", "generics"], "comments": [{"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 1, "creation_date": 1534364911, "post_id": 51865932, "comment_id": 90684119, "body": "should you make <code>IVisistsService</code> generic?"}, {"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "edited": false, "score": 3, "creation_date": 1534364929, "post_id": 51865932, "comment_id": 90684129, "body": "What exactly is the question?"}, {"owner": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "edited": false, "score": 1, "creation_date": 1534364956, "post_id": 51865932, "comment_id": 90684139, "body": "I think you meant to define the generics on the interface, and not the method <code>IVisitsService&lt;T, S&gt;</code>.  I&#39;d also recommend giving them better names.  The typical way to name generics is with a capital T then a meaningful name.  Maybe <code>IVisitsService&lt;TResult, TFilters&gt;</code>?"}, {"owner": {"reputation": 406, "user_id": 2404597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/375a308026bd80cd6b9e7b5169161116?s=128&d=identicon&r=PG", "display_name": "user2404597", "link": "https://stackoverflow.com/users/2404597/user2404597"}, "edited": false, "score": 0, "creation_date": 1534365988, "post_id": 51865932, "comment_id": 90684541, "body": "how can you down vote without even reading the question. Someone with great knowledge actually answered my question."}], "answers": [{"tags": [], "owner": {"reputation": 93997, "user_id": 3010968, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5c9bc5babd6d3ceafcc3f95fbdd5b313?s=128&d=identicon&r=PG&f=1", "display_name": "Selman Gen&#231;", "link": "https://stackoverflow.com/users/3010968/selman-gen%c3%a7"}, "is_accepted": true, "score": 5, "last_activity_date": 1534364913, "creation_date": 1534364913, "answer_id": 51865951, "question_id": 51865932, "link": "https://stackoverflow.com/questions/51865932/interface-with-generics/51865951#51865951", "title": "Interface with Generics", "body": "<p>You need to make your interface generic:</p>\n\n<pre><code>public interface IVisitsService&lt;T, S&gt;\n</code></pre>\n\n<p>Then you can implement it by supplying type arguments:</p>\n\n<pre><code>public class VisitsBService : IVisitsService&lt;VisitsHcs,VisitFilters&gt;\n</code></pre>\n"}], "owner": {"reputation": 406, "user_id": 2404597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/375a308026bd80cd6b9e7b5169161116?s=128&d=identicon&r=PG", "display_name": "user2404597", "link": "https://stackoverflow.com/users/2404597/user2404597"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 51865951, "answer_count": 1, "score": -1, "last_activity_date": 1534364913, "creation_date": 1534364811, "last_edit_date": 1534364868, "question_id": 51865932, "link": "https://stackoverflow.com/questions/51865932/interface-with-generics", "title": "Interface with Generics", "body": "<p>I have a Interface like this...</p>\n\n<pre><code>public interface IVisitsService\n{\n    IEnumerable&lt;T&gt; GetVisits&lt;T,S&gt;(S filters);\n}\n</code></pre>\n\n<p>My Application will be using this interface for different objects. Say Class \"A\" and Class \"B\" will implement this interface, however they will supply their own objects for the \"T\" and \"S\" Generics, hence the return type and the parameter type will VARY  per object. I am having hard time to solve this issue properly.</p>\n\n<p>For example...</p>\n\n<pre><code>public class VisitsBService : IVisitsService\n{    \n    public IEnumerable&lt;T&gt; GetVisits&lt;T,S&gt;(S filters)\n    {\n        return _visitRepo.GetVisits&lt;VisitsHcs,VisitFilters&gt;(filters);\n    }\n}\n</code></pre>\n\n<p>Then another class can use it with its own object...</p>\n\n<pre><code>public class VisitsAService : IVisitsService\n{    \n    public IEnumerable&lt;T&gt; GetVisits&lt;T,S&gt;(S filters)\n    {\n        return _visitRepo.GetVisits&lt;VisitsBcs,VisitBFilters&gt;(filters);\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "asp.net-mvc", "signalr", "signalr-hub"], "comments": [{"owner": {"reputation": 1065, "user_id": 2981403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0lENO.png?s=128&g=1", "display_name": "Hozikimaru", "link": "https://stackoverflow.com/users/2981403/hozikimaru"}, "edited": false, "score": 0, "creation_date": 1534365446, "post_id": 51865925, "comment_id": 90684317, "body": "Did you make sure that the hub is registered and active?"}, {"owner": {"reputation": 1, "user_id": 10231157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f238aa208b092299906897298c8a0b?s=128&d=identicon&r=PG&f=1", "display_name": "tgolebiowski", "link": "https://stackoverflow.com/users/10231157/tgolebiowski"}, "reply_to_user": {"reputation": 1065, "user_id": 2981403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0lENO.png?s=128&g=1", "display_name": "Hozikimaru", "link": "https://stackoverflow.com/users/2981403/hozikimaru"}, "edited": false, "score": 0, "creation_date": 1534366997, "post_id": 51865925, "comment_id": 90684937, "body": "@Hozikimaru Yes. Hub is otherwise properly sending messages and they are being received on the client end."}, {"owner": {"reputation": 2744, "user_id": 4098052, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cf60de4dccb4a7525e0d49f5b20a99f?s=128&d=identicon&r=PG", "display_name": "Stephu", "link": "https://stackoverflow.com/users/4098052/stephu"}, "edited": false, "score": 0, "creation_date": 1534404468, "post_id": 51865925, "comment_id": 90694798, "body": "Did you also tried: <a href=\"https://stackoverflow.com/questions/14442689/signalr-override-method-for-sending-messages\" title=\"signalr override method for sending messages\">stackoverflow.com/questions/14442689/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 10231157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f238aa208b092299906897298c8a0b?s=128&d=identicon&r=PG&f=1", "display_name": "tgolebiowski", "link": "https://stackoverflow.com/users/10231157/tgolebiowski"}, "reply_to_user": {"reputation": 2744, "user_id": 4098052, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8cf60de4dccb4a7525e0d49f5b20a99f?s=128&d=identicon&r=PG", "display_name": "Stephu", "link": "https://stackoverflow.com/users/4098052/stephu"}, "edited": false, "score": 0, "creation_date": 1534458420, "post_id": 51865925, "comment_id": 90723700, "body": "@Stephu the linked example seems to deal with hub and client information but nothing with accessing messages or their sizes"}], "owner": {"reputation": 1, "user_id": 10231157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f238aa208b092299906897298c8a0b?s=128&d=identicon&r=PG&f=1", "display_name": "tgolebiowski", "link": "https://stackoverflow.com/users/10231157/tgolebiowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1128, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534364795, "creation_date": 1534364795, "question_id": 51865925, "link": "https://stackoverflow.com/questions/51865925/monitoring-signalr-message-sizes", "title": "Monitoring SignalR message sizes", "body": "<p>I am aware of a potential performance issue with SignalR when messages exceed 32K in size, what I would like to do is extend SignalR's normal process to check messages sizes and log if they exceed the 32K cutoff. I am trying to do so by registering custom types inheriting from SignalR's own types as documented here: <a href=\"https://github.com/SignalR/SignalR/wiki/Extensibility\" rel=\"nofollow noreferrer\">https://github.com/SignalR/SignalR/wiki/Extensibility</a> however the expected methods are not being hit when objects are pushed to clients from the server. Am I doing something wrong or is there an alternate way to monitor for objects exceeding the 32K size?</p>\n\n<pre><code>    public class MessageBusWithChecking : MessageBus\n    {       \n        public MessageBusWithChecking(IDependencyResolver resolver) : base(resolver)\n        {\n\n        }\n\n        //This method is never hit\n        public override Task Publish(Message message)\n        {\n            var messageSize = message.Value.Count();\n\n            const int mem32K = 1024 * 32;\n            if (messageSize &gt; mem32K)\n            {\n                //Do Logging here\n            }\n\n            return base.Publish(message);\n        }\n    }\n\n//App startup code...\npublic class Startup\n    {\n    public void Configuration(IAppBuilder app)\n        {\n            ...\n            //Register custom class\n            GlobalHost.DependencyResolver.Register(typeof(IMessageBus), () =&gt; new MessageBusWithChecking(GlobalHost.DependencyResolver));\n            ...\n        }\n    }\n</code></pre>\n\n<p>I also attempted the same process as above with \"IJsonSerializer\" to no results as well.</p>\n"}, {"tags": ["c#", "unity3d", "events", "casting", "gameobject"], "comments": [{"owner": {"reputation": 2904, "user_id": 580627, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bdab596b1c704403fba98930c6955a56?s=128&d=identicon&r=PG", "display_name": "Fredrik Widerberg", "link": "https://stackoverflow.com/users/580627/fredrik-widerberg"}, "edited": false, "score": 1, "creation_date": 1534366969, "post_id": 51865898, "comment_id": 90684927, "body": "What is the definition of ISceneComponent? I guess it doesnt have a gameObject-field? You could add a getGameObject() method on the interface and use that? Is there any case where sender is not a gameobject?"}], "answers": [{"tags": [], "owner": {"reputation": 2083, "user_id": 9638051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/699e59e6a363089ae0059a22a8279a9e?s=128&d=identicon&r=PG&f=1", "display_name": "Immorality", "link": "https://stackoverflow.com/users/9638051/immorality"}, "is_accepted": true, "score": 2, "last_activity_date": 1534405420, "creation_date": 1534405420, "answer_id": 51872015, "question_id": 51865898, "link": "https://stackoverflow.com/questions/51865898/referencing-a-gameobject-from-a-c-interface-event-in-unity/51872015#51872015", "title": "referencing a gameObject from a c# interface event in Unity", "body": "<p>I have run into your issue myself before.</p>\n\n<p>The fix is quite simple.</p>\n\n<p>Assuming that you created the interface ISceneComponent, add the gameObject field to your Interface</p>\n\n<pre><code>public interface ISceneComponent\n{\n    GameObject gameObject { get; set; }\n    // ...\n}\n</code></pre>\n\n<p>If the object implementing ISceneComponent also is a monobehaviour, gameObject will automatically be filled and you can reference it easily.</p>\n"}], "owner": {"reputation": 26625, "user_id": 287436, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9de28331e6a1541de76b16b0c1d96ecd?s=128&d=identicon&r=PG", "display_name": "mheavers", "link": "https://stackoverflow.com/users/287436/mheavers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 51872015, "answer_count": 1, "score": 1, "last_activity_date": 1534405420, "creation_date": 1534364658, "question_id": 51865898, "link": "https://stackoverflow.com/questions/51865898/referencing-a-gameobject-from-a-c-interface-event-in-unity", "title": "referencing a gameObject from a c# interface event in Unity", "body": "<p>I have an event manager in Unity which can handle events sent from scene components. The classes are all a bit abstracted from the standard Unity components. I am successfully able to fire an event from a button, and have that button's parent listen to the event (the <code>onEventReceived</code> you see below).</p>\n\n<p>Using the Unity Debugger extension for VSCode, I can log the sender. If I type <code>sender.gameObject</code> and it returns a correct reference to the GameObject the sender is attached to. However, I cannot reference <code>sender.gameObject</code> within the <code>OnEventReceived</code> function itself - because it is of type <code>ISceneComponent</code> I suppose. How do I get a reference to the game object of the clicked sender?</p>\n\n<p><a href=\"https://i.stack.imgur.com/EHC6K.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EHC6K.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "asp.net-web-api", "model-binding"], "comments": [{"owner": {"reputation": 192, "user_id": 7320670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHkkti_b39I/AAAAAAAAAAI/AAAAAAAAHsw/DJMm4iH7PCY/photo.jpg?sz=128", "display_name": "Rutger Vk", "link": "https://stackoverflow.com/users/7320670/rutger-vk"}, "edited": false, "score": 0, "creation_date": 1534364839, "post_id": 51865833, "comment_id": 90684078, "body": "In your Person model, you set the type of your properties and make them nullable. with the, the modelstate will be valid if the properties are of the correct type."}, {"owner": {"reputation": 553, "user_id": 886432, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3d6cea6632e81e287c5e16fd4cda1a01?s=128&d=identicon&r=PG", "display_name": "FunkMonkey33", "link": "https://stackoverflow.com/users/886432/funkmonkey33"}, "reply_to_user": {"reputation": 192, "user_id": 7320670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHkkti_b39I/AAAAAAAAAAI/AAAAAAAAHsw/DJMm4iH7PCY/photo.jpg?sz=128", "display_name": "Rutger Vk", "link": "https://stackoverflow.com/users/7320670/rutger-vk"}, "edited": false, "score": 0, "creation_date": 1534368121, "post_id": 51865833, "comment_id": 90685358, "body": "Thanks, but it doesn&#39;t answer my first question.  What you would suggest would work if I were passing in a model object.  But I&#39;m passing in a list of primitives."}], "answers": [{"tags": [], "owner": {"reputation": 2740, "user_id": 4009972, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9f96fc16291174858bf8e03c12cd0c1a?s=128&d=identicon&r=PG&f=1", "display_name": "codeMonkey", "link": "https://stackoverflow.com/users/4009972/codemonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1534368516, "creation_date": 1534368516, "answer_id": 51866706, "question_id": 51865833, "link": "https://stackoverflow.com/questions/51865833/model-validation-for-primitives-in-asp-net-web-api/51866706#51866706", "title": "Model Validation for Primitives in ASP.NET Web API", "body": "<p><code>ModelState</code> is an MVC thing, not a WebAPI thing; that's why it's always <code>false</code>.  There's nothing wrong with decorating method signature with nullable params.  If you want to create some custom errors for types I would recommend <a href=\"https://docs.microsoft.com/en-us/aspnet/web-api/overview/error-handling/exception-handling\" rel=\"nofollow noreferrer\">this link</a>.  If you want to hook up <code>ModelState</code> to work in WebAPI, recommend <a href=\"https://docs.microsoft.com/en-us/aspnet/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api\" rel=\"nofollow noreferrer\">this link</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 553, "user_id": 886432, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3d6cea6632e81e287c5e16fd4cda1a01?s=128&d=identicon&r=PG", "display_name": "FunkMonkey33", "link": "https://stackoverflow.com/users/886432/funkmonkey33"}, "is_accepted": false, "score": 0, "last_activity_date": 1534972711, "creation_date": 1534972711, "answer_id": 51975288, "question_id": 51865833, "link": "https://stackoverflow.com/questions/51865833/model-validation-for-primitives-in-asp-net-web-api/51975288#51975288", "title": "Model Validation for Primitives in ASP.NET Web API", "body": "<p>It turns out that ModelState does in fact work with WebApi, but it will return false for IsValid if you have any blank input params.  So if you call </p>\n\n<p><a href=\"https://myApiSite/api/person/get?name=Aaron&amp;age=\" rel=\"nofollow noreferrer\">https://myApiSite/api/person/get?name=Aaron&amp;age=</a></p>\n\n<p>ModelState.IsValid will be false, because of the blank age parameter.</p>\n\n<p>If, on the other hand, you call </p>\n\n<p><a href=\"https://myApiSite/api/person/get?name=Aaron\" rel=\"nofollow noreferrer\">https://myApiSite/api/person/get?name=Aaron</a></p>\n\n<p>ModelState.IsValid will be true.  Age still comes in blank, as do all the other params you didn't pass, but the model will pass validation. Go figure.</p>\n\n<p>Thanks.</p>\n\n<p>Aaron</p>\n"}], "owner": {"reputation": 553, "user_id": 886432, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/3d6cea6632e81e287c5e16fd4cda1a01?s=128&d=identicon&r=PG", "display_name": "FunkMonkey33", "link": "https://stackoverflow.com/users/886432/funkmonkey33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534972711, "creation_date": 1534364289, "question_id": 51865833, "link": "https://stackoverflow.com/questions/51865833/model-validation-for-primitives-in-asp-net-web-api", "title": "Model Validation for Primitives in ASP.NET Web API", "body": "<p>We have defined a Get method that accepts a long list of nullable types as parameters.  Something like:</p>\n\n<pre><code>[Route(\"api/person/get\")]\npublic IEnumerable&lt;Person&gt; Get(int? age = null, string name = null, bool? isDeceased = null)\n{\n    ...\n}\n</code></pre>\n\n<p>The idea here is that all the input parameters are nullable.  They either provide a parameter value or they don't.  If they do, we'll use it to filter their results.  This removes the need for the client to construct a JSON object and pass that in.  </p>\n\n<p>Question 1: Is this a good idea?  </p>\n\n<p>Question 2 is that we don't want them to pass 'ABC' for Age.  If they do, the Age parameter gets populated with null.  This isn't ideal.  We'd instead like to throw an appropriate exception.</p>\n\n<p>If seen a lot of posts about defining a ValidateModelAttribute and decorating my web api method with that (<a href=\"https://www.jerriepelser.com/blog/validation-response-aspnet-core-webapi/\" rel=\"nofollow noreferrer\">https://www.jerriepelser.com/blog/validation-response-aspnet-core-webapi/</a> for example).  My problem is that ModelState.IsValid is false if any of the nullable parameters are actually null.  So unless they provide an argument for every single parameter (our real method has 67 of them), ModelState.isValid will be false.</p>\n\n<p>Thanks in advance for your help.</p>\n\n<p>Aaron</p>\n"}, {"tags": ["c#", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1534364631, "post_id": 51865801, "comment_id": 90683999, "body": "Have you checked to see what maxScrollY is set to?"}, {"owner": {"reputation": 1227, "user_id": 5295657, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/cKG8M.jpg?s=128&g=1", "display_name": "Mahsum Akbas", "link": "https://stackoverflow.com/users/5295657/mahsum-akbas"}, "edited": false, "score": 0, "creation_date": 1534402681, "post_id": 51865801, "comment_id": 90693837, "body": "Where do you want to move scroll? end of page? or, move to a specific element&#39;s location?"}, {"owner": {"reputation": 3, "user_id": 2320213, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3be951b2992ca9ca785f9fcff9bffc91?s=128&d=identicon&r=PG", "display_name": "user2320213", "link": "https://stackoverflow.com/users/2320213/user2320213"}, "reply_to_user": {"reputation": 1227, "user_id": 5295657, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/cKG8M.jpg?s=128&g=1", "display_name": "Mahsum Akbas", "link": "https://stackoverflow.com/users/5295657/mahsum-akbas"}, "edited": false, "score": 0, "creation_date": 1534421789, "post_id": 51865801, "comment_id": 90704869, "body": "@MahsumAkbas I would like to move it to the end of the page"}, {"owner": {"reputation": 3, "user_id": 2320213, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3be951b2992ca9ca785f9fcff9bffc91?s=128&d=identicon&r=PG", "display_name": "user2320213", "link": "https://stackoverflow.com/users/2320213/user2320213"}, "reply_to_user": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1534421859, "post_id": 51865801, "comment_id": 90704906, "body": "@RyanWilson - Yes maxScrollY shows the height. Is there any way I can find out if the scroll height is correct or not?"}, {"owner": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1534424563, "post_id": 51865801, "comment_id": 90706715, "body": "@user2320213 Please check out this post (<a href=\"https://stackoverflow.com/questions/11715646/scroll-automatically-to-the-bottom-of-the-page\" title=\"scroll automatically to the bottom of the page\">stackoverflow.com/questions/11715646/&hellip;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 1092, "user_id": 980991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NRbsu.jpg?s=128&g=1", "display_name": "Arnon Axelrod", "link": "https://stackoverflow.com/users/980991/arnon-axelrod"}, "edited": false, "score": 1, "creation_date": 1534400255, "post_id": 51866273, "comment_id": 90692694, "body": "You&#39;re right that <code>IJavaScriptExecutor.ExecuteScript</code> returns an object, but concatenating a string and an object calls ToSring on that object, so I don&#39;t believe that that&#39;s the problem"}], "tags": [], "owner": {"reputation": 396, "user_id": 8934040, "user_type": "registered", "profile_image": "https://graph.facebook.com/1966803400003643/picture?type=large", "display_name": "Thodoris Koskinopoulos", "link": "https://stackoverflow.com/users/8934040/thodoris-koskinopoulos"}, "is_accepted": false, "score": 0, "last_activity_date": 1534366363, "creation_date": 1534366363, "answer_id": 51866273, "question_id": 51865801, "link": "https://stackoverflow.com/questions/51865801/scroll-bar-not-working-selenium-webdriver/51866273#51866273", "title": "Scroll Bar not working - Selenium Webdriver", "body": "<p>It is possible that var maxScrollY is not a string, (<code>ExecuteScript</code> returns <code>object</code> from what I can recall). Try to save the object <code>ExecuteScript</code>to a string with  <code>string maxScrollY = Driver.Scripts().ExecuteScript(\"return document.documentElement.scrollHeight;\").ToString()</code>.</p>\n\n<p>Also, check with debug the object's value and see what <code>window.scrollTo(0,\" + maxScrollY + \")</code> equals to.</p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 6183892, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eSSAs5kFA6Y/AAAAAAAAAAI/AAAAAAAAFAI/53AJWu6RD0c/photo.jpg?sz=128", "display_name": "Rajib Chakraborty", "link": "https://stackoverflow.com/users/6183892/rajib-chakraborty"}, "is_accepted": true, "score": 0, "last_activity_date": 1534404677, "last_edit_date": 1534404677, "creation_date": 1534402468, "answer_id": 51871208, "question_id": 51865801, "link": "https://stackoverflow.com/questions/51865801/scroll-bar-not-working-selenium-webdriver/51871208#51871208", "title": "Scroll Bar not working - Selenium Webdriver", "body": "<p>Use <code>scrollIntoView</code> function of <code>JavascriptExecutor</code> interface to scroll to that location where the Image is.</p>\n\n<pre><code>WebElement element = driver.findElement(\"locator of the image\")\nJavascriptExector js = (JavascriptExecutor)driver;\njs.executeScript(\"argument[0].scrollIntoView\");\",element)\n</code></pre>\n\n<p>or </p>\n\n<p>we can use method <code>Scroll(x,y)</code> to scroll to particular location</p>\n"}, {"tags": [], "owner": {"reputation": 1227, "user_id": 5295657, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/cKG8M.jpg?s=128&g=1", "display_name": "Mahsum Akbas", "link": "https://stackoverflow.com/users/5295657/mahsum-akbas"}, "is_accepted": false, "score": 0, "last_activity_date": 1534511650, "creation_date": 1534511650, "answer_id": 51896237, "question_id": 51865801, "link": "https://stackoverflow.com/questions/51865801/scroll-bar-not-working-selenium-webdriver/51896237#51896237", "title": "Scroll Bar not working - Selenium Webdriver", "body": "<p>it is working for me:</p>\n\n<pre><code>((IJavaScriptExecutor)Driver).ExecuteScript(\"window.scrollTo(0, document.body.scrollHeight)\");\n</code></pre>\n\n<p>i use it as a function to be easier:</p>\n\n<pre><code>public void ScrollToEndOfThePage()\n        {\n            ((IJavaScriptExecutor)Driver).ExecuteScript(\"window.scrollTo(0, document.body.scrollHeight)\");\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 7646148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FNnZbdEekVs/AAAAAAAAAAI/AAAAAAAAAeA/ZoLOunHbhJU/photo.jpg?sz=128", "display_name": "martin pb", "link": "https://stackoverflow.com/users/7646148/martin-pb"}, "is_accepted": false, "score": 0, "last_activity_date": 1534687130, "creation_date": 1534687130, "answer_id": 51918414, "question_id": 51865801, "link": "https://stackoverflow.com/questions/51865801/scroll-bar-not-working-selenium-webdriver/51918414#51918414", "title": "Scroll Bar not working - Selenium Webdriver", "body": "<p>if any JS script is not helping you to scroll, then try MoveToElement?</p>\n\n<pre><code>IWebElement element = driver.FindElement(By.Id(\"yourLookingId\"));\nnew Actions(driver).MoveToElement(element).Perform(); \n</code></pre>\n\n<p>I am using this in a complicated web application with scroll bar and it works perfectly. </p>\n"}], "owner": {"reputation": 3, "user_id": 2320213, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3be951b2992ca9ca785f9fcff9bffc91?s=128&d=identicon&r=PG", "display_name": "user2320213", "link": "https://stackoverflow.com/users/2320213/user2320213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 1, "accepted_answer_id": 51871208, "answer_count": 4, "score": 0, "last_activity_date": 1534687130, "creation_date": 1534364141, "question_id": 51865801, "link": "https://stackoverflow.com/questions/51865801/scroll-bar-not-working-selenium-webdriver", "title": "Scroll Bar not working - Selenium Webdriver", "body": "<p><a href=\"https://i.stack.imgur.com/gam2Q.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>Attached is the picture of the scroll bar that I would like to move.</p>\n\n<p>I already have a method that is not working. could you please tell me what's wrong?</p>\n\n<pre><code>    public static void ScrollPageToEnd(this IWebDriver Driver)\n    {\n        var maxScrollY = Driver.Scripts().ExecuteScript(\"return document.documentElement.scrollHeight;\");\n        Driver.Scripts().ExecuteScript(\"window.scrollTo(0,\" + maxScrollY + \")\");        \n\n    }\n</code></pre>\n"}, {"tags": ["c#", "functional-programming", "optional", "either"], "comments": [{"owner": {"reputation": 6190, "user_id": 3523446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/268d77718b0875284cdfff02b4ec54b5?s=128&d=identicon&r=PG&f=1", "display_name": "qxg", "link": "https://stackoverflow.com/users/3523446/qxg"}, "edited": false, "score": 0, "creation_date": 1534399261, "post_id": 51865761, "comment_id": 90692324, "body": "Maybe you can convert validation error to exception, or convert exception and validation error to unified error code. This makes function signature simpler."}, {"owner": {"reputation": 11711, "user_id": 1361787, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XR9JP.png?s=128&g=1", "display_name": "ChiefTwoPencils", "link": "https://stackoverflow.com/users/1361787/chieftwopencils"}, "edited": false, "score": 0, "creation_date": 1543714500, "post_id": 51865761, "comment_id": 94017396, "body": "It&#39;s a good start. I think the best you can do is further specialize the generics away. <code>OptionResult&lt;T&gt;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 2976, "user_id": 7493840, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/227486944377608/picture?type=large", "display_name": "Sereja Bogolubov", "link": "https://stackoverflow.com/users/7493840/sereja-bogolubov"}, "is_accepted": true, "score": 1, "last_activity_date": 1545228005, "creation_date": 1545228005, "answer_id": 53852823, "question_id": 51865761, "link": "https://stackoverflow.com/questions/51865761/c-fp-validation-and-execution-with-error-handling-functional-way-space-for-i/53852823#53852823", "title": "C# FP: Validation and execution with error handling functional way - space for improvement?", "body": "<ol>\n<li>Well, yeah. Depending upon the complexity involved, a modern (C# 7 I guess) tuple might be sufficient: <code>(bool failed, T result)</code>. The limitation is that there is no methods responsible for proper chaining - <code>fmap</code>ing in terms of Haskell - your containers (better to say, however not quite theoretically correct - your <code>Functor</code>s and, less frequently, your <code>Monad</code>s).</li>\n<li><code>Either&lt;IEnumerable&lt;ValidationError&gt;, Either&lt;Exception, Option&lt;T&gt;&gt; LoadRecord&lt;T&gt;(int id)</code> - nah. Observe your signature: <strong>as for the <code>TFail</code></strong>, you either get an <code>IEnumerable&lt;ValidationError&gt;</code> or <code>Exception</code>; so, technically, you need an <code>Exception | IEnumerable&lt;ValidationError&gt;</code> type there, thought it will take quite a bit of boilderplate coding to implement in the <code>C#</code>. Same applies to the <code>Option&lt;T&gt;</code> part, which represents a successful result: you don't need <code>IOption</code> to be returned; even if it is there, your <strong>implementation</strong> is responsible to unwrap successful result and just spit out <code>T</code>, or report an <code>TFail</code> error through the <code>Either</code> mechanism. As a conclusion: yeah, containers are great, but avoid endless nesting: <strong>there is time to wrap things and there is time to unwrap them: feel the moment</strong>.</li>\n<li>The last but far no the least: exception handling should be delegated to the containers themselves. <code>Rx</code> is a good example: it asks you for the <code>onError: Action&lt;Exception&gt;</code> lambda, which is invoked when exception is captured. Thus you let your client customize desired behavior, rather than hardcode it once. More than that, as your particular example is specific, <code>IOption</code> is a way to handle error, so in your particular case - <strong>but not as a general rule</strong> - no <code>onError</code> needed: just swallow an exception and return <code>Nothing</code>.</li>\n</ol>\n"}], "owner": {"reputation": 809, "user_id": 4842985, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cc906ebadb54250ef5e4f8a58704b03c?s=128&d=identicon&r=PG", "display_name": "Zden\u011bk", "link": "https://stackoverflow.com/users/4842985/zden%c4%9bk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 1, "accepted_answer_id": 53852823, "answer_count": 1, "score": 6, "last_activity_date": 1545228005, "creation_date": 1534363972, "question_id": 51865761, "link": "https://stackoverflow.com/questions/51865761/c-fp-validation-and-execution-with-error-handling-functional-way-space-for-i", "title": "C# FP: Validation and execution with error handling functional way - space for improvement?", "body": "<p>I'm new to functional way of thinking in C# (well... not limited to language). Let's say there's method:</p>\n\n<pre><code>T LoadRecord&lt;T&gt;(int id)\n</code></pre>\n\n<h2>Concept</h2>\n\n<h3>1. Validation</h3>\n\n<p>When invalid input is given, I should return something like <code>Either&lt;IEnumerable&lt;ValidationError&gt;, T&gt;</code>.</p>\n\n<h3>2. Execution</h3>\n\n<p>When calling DB/API/... which could throw, I should return <code>Either&lt;Exception, T&gt;</code>.</p>\n\n<h3>3. Some or none record</h3>\n\n<p>Because entry may or may not exist I'm returning <code>Option&lt;T&gt;</code>.</p>\n\n<h2>Final signature</h2>\n\n<p>If you combine all above, you end up with this:</p>\n\n<pre><code>Either&lt;IEnumerable&lt;ValidationError&gt;, Either&lt;Exception, Option&lt;T&gt;&gt; LoadRecord&lt;T&gt;(int id)\n</code></pre>\n\n<p>I can introduce types such as:</p>\n\n<ul>\n<li><code>Validation&lt;T&gt;</code> (~ <code>: Either&lt;IEnumerable&lt;ValidationError&gt;, T&gt;</code>)</li>\n<li><code>Result&lt;T&gt;</code> (~ <code>: Either&lt;Exception, T&gt;</code>)</li>\n</ul>\n\n<p>Now, signature of my method would look like:</p>\n\n<pre><code>Validation&lt;Result&lt;Option&lt;T&gt;&gt;&gt; LoadRecord&lt;T&gt;(int id)\n</code></pre>\n\n<h2>Usage</h2>\n\n<pre><code>return LoadRecord&lt;User&gt;(1).Match(\n           vl =&gt; BadRequest(),\n           vr =&gt; vr.Match(\n                     el =&gt; StatusCode(500),\n                     er =&gt; er.Some(u =&gt; Ok(u))\n                             .None(NotFound());\n</code></pre>\n\n<h2>Imperative implementation</h2>\n\n<pre><code>try\n{\n    var u = LoadRecord&lt;User&gt;(id);\n    if (u == null)\n    {\n        return NotFound();\n    }\n\n    return Ok(u);\n}\ncatch (ValidationException)\n{\n    return BadRequest();\n}\ncatch (Exception)\n{\n    return StatusCode(500);\n}\n</code></pre>\n\n<h2>Question</h2>\n\n<p>As you can see signature of method is still quite odd - at first sight it gives you \"validation\", but I'm really asking for <code>T</code>. Usage is also not very pretty looking, but indeed more concise than imperative one.</p>\n\n<p>Is this correct approach? Is there way how to improve signature/readability of code?</p>\n"}, {"tags": ["c#", ".net", "winforms", "data-binding", "dataset"], "comments": [{"owner": {"reputation": 725, "user_id": 8672765, "user_type": "registered", "profile_image": "https://graph.facebook.com/1996264813992755/picture?type=large", "display_name": "Daniel Loudon", "link": "https://stackoverflow.com/users/8672765/daniel-loudon"}, "edited": false, "score": 1, "creation_date": 1534363634, "post_id": 51865693, "comment_id": 90683534, "body": "Can we see sample code?"}, {"owner": {"reputation": 192, "user_id": 7320670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHkkti_b39I/AAAAAAAAAAI/AAAAAAAAHsw/DJMm4iH7PCY/photo.jpg?sz=128", "display_name": "Rutger Vk", "link": "https://stackoverflow.com/users/7320670/rutger-vk"}, "edited": false, "score": 0, "creation_date": 1534363815, "post_id": 51865693, "comment_id": 90683616, "body": "can&#39;t you just bind the text to a property en set the value of your DataSetName in your VM?"}, {"owner": {"reputation": 95, "user_id": 5176003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10153247206359262/picture?type=large", "display_name": "Adam R. Turner", "link": "https://stackoverflow.com/users/5176003/adam-r-turner"}, "edited": false, "score": 0, "creation_date": 1534364447, "post_id": 51865693, "comment_id": 90683904, "body": "This should be relatively straight forward: See <a href=\"https://msdn.microsoft.com/en-us/library/system.data.dataset.datasetname(v=vs.110).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/&hellip;</a>. If you&#39;re having trouble with BindingSource, maybe you could try a DataTable? It&#39;s hard to know exactly what you&#39;re doing without code. Are you setting markup or code-behind?"}, {"owner": {"reputation": 2425, "user_id": 693943, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bef0b29b7ebaec03aeff8accf444aefe?s=128&d=identicon&r=PG", "display_name": "Matthew Goulart", "link": "https://stackoverflow.com/users/693943/matthew-goulart"}, "reply_to_user": {"reputation": 725, "user_id": 8672765, "user_type": "registered", "profile_image": "https://graph.facebook.com/1996264813992755/picture?type=large", "display_name": "Daniel Loudon", "link": "https://stackoverflow.com/users/8672765/daniel-loudon"}, "edited": false, "score": 0, "creation_date": 1534366258, "post_id": 51865693, "comment_id": 90684665, "body": "@DanielLoudon Edited"}], "answers": [{"tags": [], "owner": {"reputation": 103049, "user_id": 3110834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/777326f9f1ab58d98d927662f028944e?s=128&d=identicon&r=PG", "display_name": "Reza Aghaei", "link": "https://stackoverflow.com/users/3110834/reza-aghaei"}, "is_accepted": false, "score": 0, "last_activity_date": 1534424842, "last_edit_date": 1534424842, "creation_date": 1534404193, "answer_id": 51871669, "question_id": 51865693, "link": "https://stackoverflow.com/questions/51865693/bind-textbox-text-to-dataset-datasetname/51871669#51871669", "title": "Bind TextBox.Text to DataSet.DataSetName", "body": "<p>The <code>CurrencyManager</code> uses <code>ListBindingHelper.GetListItemProperties(yourDataset)</code> to get its properties and since it doesn't return any property because of its type descriptor, then the data-binding fails.</p>\n\n<p>You can expose <code>DataSet</code> properties in a different way by using a wrapper around data set, implementing a custom type descriptor to provide data set properties:</p>\n\n<pre><code>using System;\nusing System.ComponentModel;\npublic class CustomObjectWrapper : CustomTypeDescriptor\n{\n    public object WrappedObject { get; private set; }\n    public CustomObjectWrapper(object o) : base()\n    {\n        WrappedObject = o ?? throw new ArgumentNullException(nameof(o));\n    }\n    public override PropertyDescriptorCollection GetProperties()\n    {\n        return this.GetProperties(new Attribute[] { });\n    }\n    public override PropertyDescriptorCollection GetProperties(Attribute[] attributes)\n    {\n        return TypeDescriptor.GetProperties(WrappedObject, true);\n    }\n    public override object GetPropertyOwner(PropertyDescriptor pd)\n    {\n        return WrappedObject;\n    }\n}\n</code></pre>\n\n<p>Then use it this way:</p>\n\n<pre><code>var myDataSet = new DataSet(\"myDataSet\");\nvar wrapper = new CustomObjectWrapper(myDataSet);\ntextBox1.DataBindings.Add(\"Text\", wrapper, \"DataSetName\", true, \n    DataSourceUpdateMode.OnPropertyChanged);\n</code></pre>\n"}], "owner": {"reputation": 2425, "user_id": 693943, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bef0b29b7ebaec03aeff8accf444aefe?s=128&d=identicon&r=PG", "display_name": "Matthew Goulart", "link": "https://stackoverflow.com/users/693943/matthew-goulart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1562604847, "creation_date": 1534363602, "last_edit_date": 1562604847, "question_id": 51865693, "link": "https://stackoverflow.com/questions/51865693/bind-textbox-text-to-dataset-datasetname", "title": "Bind TextBox.Text to DataSet.DataSetName", "body": "<p>I am trying to bind a <code>TextBox</code>'s <code>Text</code> property to a <code>DataSet</code>'s <code>DataSetName</code> property.</p>\n\n<p>I get </p>\n\n<blockquote>\n  <p>System.ArgumentException: 'Cannot bind to the property or column DataSetName on the DataSource.\n  Parameter name: dataMember'</p>\n</blockquote>\n\n<p>If there a way to bind a single text box in this way? I think it has something to do with the fact that <code>DataSet</code> is a collection, so the <code>BindingSource</code> is expecting to have a table bound with it, not a text box.</p>\n\n<p>Can I achieve this without creating a \"container\" class to hold my <code>DataSetName</code> property and a <code>DataSet</code>?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>It was silly of me to not include any code. So here you go:</p>\n\n<pre><code>this.tableGroupBindingSource.DataSource = typeof(DataSet);\n...\nthis.TableGroupNameTextBox.DataBindings.Add(new System.Windows.Forms.Binding(\"Text\", this.tableGroupBindingSource, \"DataSetName\", true, System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged));\n...\ntableGroupBindingSource.DataSource =    node.TableGroup;\n</code></pre>\n\n<ul>\n<li><code>node.TableGroup</code> is correct (not null, points top the right <code>DataSet</code>)</li>\n</ul>\n\n<p>Once the <code>TextBox</code> is actually painted, I get the above exception.</p>\n\n<p>I am using Windows Forms with the designer, so the two first lines of code are automatically generated.</p>\n"}, {"tags": ["c#", "wpf", "xaml", "caliburn"], "answers": [{"tags": [], "owner": {"reputation": 8184, "user_id": 645, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/26a88898ca6479a9874aed21ddeaf2e8?s=128&d=identicon&r=PG", "display_name": "Joel Lucsy", "link": "https://stackoverflow.com/users/645/joel-lucsy"}, "is_accepted": true, "score": 0, "last_activity_date": 1534365706, "creation_date": 1534365706, "answer_id": 51866120, "question_id": 51865635, "link": "https://stackoverflow.com/questions/51865635/iterations-through-more-collections-in-xaml/51866120#51866120", "title": "Iterations through more collections in XAML", "body": "<p>I suspect you just are not taking into account that when displaying sub-elements the DataContext of those items are the individual items iterated in the parent.</p>\n\n<pre><code>&lt;ItemsControl ItemsSource=\"{Binding Shippers}\"&gt;\n        &lt;ItemsControl.ItemTemplate&gt;\n            &lt;DataTemplate&gt;\n                &lt;ItemsControl MaxWidth=\"300\" MaxHeight=\"100\" ItemsSource=\"{Binding Parcels}\" ItemsPanel=\"{DynamicResource ItemsPanelTemplate1}\" \n                  Style=\"{DynamicResource ItemsControlStyle1}\"&gt;\n                    &lt;ItemsControl.ItemTemplate&gt;\n                        &lt;DataTemplate DataType=\"{x:Type Button}\"&gt;\n                            &lt;Button Height=\"50\" Width=\"50\" Background=\"Red\" Content=\"{Binding ParcelNumber}\" Margin=\"0,0,5,5\"/&gt;\n                        &lt;/DataTemplate&gt;\n                    &lt;/ItemsControl.ItemTemplate&gt;\n                &lt;/ItemsControl&gt;\n            &lt;/DataTemplate&gt;\n        &lt;/ItemsControl.ItemTemplate&gt;\n    &lt;/ItemsControl&gt;\n</code></pre>\n\n<p>You should look at the output from the debugger as it'll output any bindings it can't figure out.</p>\n"}], "owner": {"reputation": 121, "user_id": 8620575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fce9355f5713531478e0d7a389b2dae1?s=128&d=identicon&r=PG&f=1", "display_name": "user8620575", "link": "https://stackoverflow.com/users/8620575/user8620575"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 51866120, "answer_count": 1, "score": 0, "last_activity_date": 1534365706, "creation_date": 1534363284, "last_edit_date": 1534364250, "question_id": 51865635, "link": "https://stackoverflow.com/questions/51865635/iterations-through-more-collections-in-xaml", "title": "Iterations through more collections in XAML", "body": "<p>I need to iterate through Shippers, then shipper.Parcels and finally use shipper.parcel.parcelNumber.</p>\n\n<p>Application displays me only blank form (instead of generated buttons).</p>\n\n<p>I am 100% sure, this error is caused only because of this XAML code. \nPlease, does somebody see some mistake here? </p>\n\n<p>Here is my whole XAML, the important part is described:</p>\n\n<pre><code>&lt;Window x:Class=\"EnterEventTextBox.DataView\"\n        xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n        xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n        xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\"\n        xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n        xmlns:local=\"clr-namespace:EnterEventTextBox\"\n        mc:Ignorable=\"d\" Background=\"Black\"\n        Title=\"DataView\" Height=\"450\" Width=\"300\"\n        xmlns:cal=\"http://www.caliburnproject.org\"\n        &gt;\n    &lt;Window.Resources&gt;\n        &lt;ItemsPanelTemplate x:Key=\"ItemsPanelTemplate1\"&gt;\n            &lt;WrapPanel MaxWidth=\"300\" Orientation=\"Horizontal\" IsItemsHost=\"True\"/&gt;\n        &lt;/ItemsPanelTemplate&gt;\n        &lt;Style x:Key=\"ItemsControlStyle1\" TargetType=\"{x:Type ItemsControl}\"&gt;\n            &lt;Setter Property=\"Template\"&gt;\n                &lt;Setter.Value&gt;\n                    &lt;ControlTemplate TargetType=\"{x:Type ItemsControl}\"&gt;\n                        &lt;Border BorderBrush=\"{TemplateBinding BorderBrush}\" BorderThickness=\"{TemplateBinding BorderThickness}\" \n                                Background=\"{TemplateBinding Background}\" Padding=\"{TemplateBinding Padding}\" SnapsToDevicePixels=\"true\"&gt;\n                            &lt;ScrollViewer CanContentScroll=\"True\" VerticalScrollBarVisibility=\"Visible\" HorizontalScrollBarVisibility=\"Visible\"&gt;\n                                &lt;ItemsPresenter SnapsToDevicePixels=\"{TemplateBinding SnapsToDevicePixels}\"/&gt;\n                            &lt;/ScrollViewer&gt;\n                        &lt;/Border&gt;\n                    &lt;/ControlTemplate&gt;\n                &lt;/Setter.Value&gt;\n            &lt;/Setter&gt;\n        &lt;/Style&gt;\n    &lt;/Window.Resources&gt;    \n\n    &lt;!-- HERE STARTS IMPORTANT CODE PIECE --&gt;\n    &lt;Grid&gt;\n        &lt;Grid.RowDefinitions&gt;\n            &lt;RowDefinition Height=\"Auto\" /&gt;\n            &lt;RowDefinition Height=\"Auto\" /&gt;\n            &lt;RowDefinition Height=\"*\" /&gt;\n        &lt;/Grid.RowDefinitions&gt;\n        &lt;ItemsControl ItemsSource=\"{Binding Shippers}\"&gt;\n            &lt;ItemsControl.ItemTemplate&gt;\n                &lt;DataTemplate&gt;\n                    &lt;ItemsControl MaxWidth=\"300\" MaxHeight=\"100\" ItemsSource=\"{Binding Shipper_Parcels}\" ItemsPanel=\"{DynamicResource ItemsPanelTemplate1}\" \n                      Style=\"{DynamicResource ItemsControlStyle1}\"&gt;\n                        &lt;ItemsControl.ItemTemplate&gt;\n                            &lt;DataTemplate DataType=\"{x:Type Button}\"&gt;\n                                &lt;Button Height=\"50\" Width=\"50\" Background=\"Red\" Content=\"{Binding Shipper_Parcel_ParcelNumber}\" Margin=\"0,0,5,5\"/&gt;\n                            &lt;/DataTemplate&gt;\n                        &lt;/ItemsControl.ItemTemplate&gt;\n                    &lt;/ItemsControl&gt;\n                &lt;/DataTemplate&gt;\n            &lt;/ItemsControl.ItemTemplate&gt;\n        &lt;/ItemsControl&gt;\n    &lt;/Grid&gt;\n    &lt;!-- END --&gt;\n&lt;/Window&gt;\n</code></pre>\n"}, {"tags": ["c#", "oop", "operators", "overriding"], "comments": [{"owner": {"reputation": 85575, "user_id": 880990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/123d02be3a4fb6074b72b7e28bc05bad?s=128&d=identicon&r=PG", "display_name": "Olivier Jacot-Descombes", "link": "https://stackoverflow.com/users/880990/olivier-jacot-descombes"}, "edited": false, "score": 0, "creation_date": 1534363488, "post_id": 51865606, "comment_id": 90683486, "body": "You can also just write <code>a.GetType() == b.GetType()</code> without <code>.Name</code> and <code>(obj as TFoo) == this</code>."}, {"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "edited": false, "score": 0, "creation_date": 1534363765, "post_id": 51865606, "comment_id": 90683593, "body": "what about <code>a == b as TFoo</code>?"}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1534368261, "post_id": 51865606, "comment_id": 90685405, "body": "I cannot understand why you are checking to see if two types are equal by their reflected name. Why are you doing this strange, dangerous, wrong thing? If the intention is to say that the types must be identical then <b>why are you not comparing the types directly</b>?"}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1534368472, "post_id": 51865606, "comment_id": 90685468, "body": "Also, this is dangerous because it is not null-safe. We expect that <code>foo == null</code> should work, but in your implementation, it always crashes."}], "answers": [{"tags": [], "owner": {"reputation": 6470, "user_id": 6230863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008565f2c61035b443406297643f68f7?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine V", "link": "https://stackoverflow.com/users/6230863/antoine-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1534368556, "last_edit_date": 1534368556, "creation_date": 1534366477, "answer_id": 51866291, "question_id": 51865606, "link": "https://stackoverflow.com/questions/51865606/c-how-to-call-the-base-class-operator-without-explicitly-typecasting/51866291#51866291", "title": "C# How to call the base class == operator, without explicitly typecasting?", "body": "<p>I think you can simply override <code>Equals</code> in <code>TFoo</code> and call it from <code>==</code>, and then override it again in <code>TBar</code>. Then, you just call <code>base.Equals</code> from <code>TBar.Equals</code> for check the base properties</p>\n\n<p>It will simplify the logic I think</p>\n\n<pre><code>class TFoo\n{\n    public int foo;\n\n    public static bool operator ==(TFoo a, TFoo b)\n    {\n        return a.Equals(b);\n    }  \n\n    public override bool Equals(object obj)\n    {\n        return this.GetType() == obj.GetType()\n            &amp;&amp; this.foo == ((TFoo)obj).foo;\n    }\n\n    //your code\n}\n\n\nclass TBar : TFoo\n{\n    public int bar;\n\n    public static bool operator ==(TBar a, TBar b)\n    {\n        return a.Equals(b);\n    }\n\n    public override bool Equals(object obj)\n    {\n        return (obj is TBar) &amp;&amp; this.bar == ((TBar)obj).bar &amp;&amp; base.Equals(obj);\n    }\n\n    //your code\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 85575, "user_id": 880990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/123d02be3a4fb6074b72b7e28bc05bad?s=128&d=identicon&r=PG", "display_name": "Olivier Jacot-Descombes", "link": "https://stackoverflow.com/users/880990/olivier-jacot-descombes"}, "is_accepted": false, "score": 0, "last_activity_date": 1534421544, "last_edit_date": 1534421544, "creation_date": 1534368300, "answer_id": 51866659, "question_id": 51865606, "link": "https://stackoverflow.com/questions/51865606/c-how-to-call-the-base-class-operator-without-explicitly-typecasting/51866659#51866659", "title": "C# How to call the base class == operator, without explicitly typecasting?", "body": "<p>The reason why you must do the casting <code>(TFoo)a == (TFoo)b</code> is that the <code>==</code> operator is static. I.e., the runtime type is not considered, instead the <code>==</code> operator of the static type known at compile-time will be used, if you don't' cast. In contrast, <code>Equals</code> is an instance member whose implementation is determined at runtime by the actual type of the caller object. If you want a dynamic behavior, base your <code>==</code> operator on <code>Equals</code>.</p>\n\n<p>We expect the <code>==</code> operator to be symmetric. I.e., <code>a == b</code> should be the same as <code>b == a</code>. But we do not necessarily expect <code>a.Equals(b)</code> to be the same a <code>b.Equals(a)</code>, since if <code>a</code> and <code>b</code> have different types, then different implementations of <code>Equals</code> will be called. Therefore, I suggest implementing the <code>==</code> operator by calling <code>a.Equals(b) &amp;&amp; b.Equals(a)</code> (and to handle nulls).</p>\n\n<pre><code>class Foo\n{\n    public int foo;\n\n    public override bool Equals(object other)\n    {\n        return other is Foo otherFoo &amp;&amp; foo.Equals(otherFoo.foo);\n    }\n\n    public static bool operator ==(Foo first, Foo second)\n    {\n        if ((object)first == null) {\n            return (object)second == null;\n        }\n        return first.Equals(second) &amp;&amp; second.Equals(first);\n    }\n\n    public static bool operator !=(Foo first, Foo second)\n    {\n        return !(first == second);\n    }\n\n    public override int GetHashCode()\n    {\n        unchecked {\n            return foo.GetHashCode();\n        }\n    }\n}\n</code></pre>\n\n<p>And the derived class</p>\n\n<pre><code>class Bar : Foo\n{\n    public int bar;\n\n    public override bool Equals(object other)\n    {\n        return other is Bar otherBar &amp;&amp; bar.Equals(otherBar.bar) &amp;&amp; base.Equals(other);\n    }\n\n    public static bool operator ==(Bar first, Bar second)\n    {\n        if ((object)first == null) {\n            return (object)second == null;\n        }\n        return first.Equals(second) &amp;&amp; second.Equals(first); // In case one is more derived.\n    }\n\n    public static bool operator !=(Bar first, Bar second)\n    {\n        return !(first == second);\n    }\n\n    public override int GetHashCode()\n    {\n        unchecked {\n            return (base.GetHashCode() * 53) ^ bar.GetHashCode();\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "edited": false, "score": 1, "creation_date": 1534375520, "post_id": 51866784, "comment_id": 90687254, "body": "If you&#39;re ultimately calling the virtual <code>EqualsImplementation</code> method, and binary operators are inherited, is there any need to implement the <code>==</code> operator in the derived class, provided you have overloaded <code>EqualsImplementation</code>?"}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "reply_to_user": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "edited": false, "score": 0, "creation_date": 1534377487, "post_id": 51866784, "comment_id": 90687662, "body": "@JonathonChase: That&#39;s a great observation! I think it is nice for both debugging purposes and self-documenting purposes to implement them -- it sends a message to the consumer that comparing two Bars for equality is by-design -- but you are right to note that it is not strictly necessary. I&#39;ll add a note to the code."}, {"owner": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "edited": false, "score": 0, "creation_date": 1534378544, "post_id": 51866784, "comment_id": 90687872, "body": "A mistake I made while playing around with this was not making sure that every possible path was checking for type equality between the operands. You have this covered with everything going through the <code>Foo.Equals(Object)</code> method at some point, but failing to cover that case can definitely lead to oddness like <code>(SomeFoo == SomeBar) != (SomeBar == SomeFoo)</code> being true. I suppose that just comes with the territory, but it&#39;s a potentially nasty mistake."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "reply_to_user": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "edited": false, "score": 2, "creation_date": 1534378716, "post_id": 51866784, "comment_id": 90687897, "body": "@JonathonChase: Right, this whole area is nothing but pitfalls. That&#39;s why I consider this to be a design failure. We want C# to be a &quot;pit of success&quot; language, where the right way and the easy way are the same. Equality definitely does not have that property!  The problem has many roots, but a big one is that equality is defined both as a single dispatch virtual method <i>and</i> a static dispatch method, when what we want is a double dispatch virtual method <i>which as you note must maintain symmetry</i>. That concept just doesn&#39;t exist in the runtime."}, {"owner": {"reputation": 3525, "user_id": 1440433, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/mKFTJ.jpg?s=128&g=1", "display_name": "Joker_vD", "link": "https://stackoverflow.com/users/1440433/joker-vd"}, "edited": false, "score": 1, "creation_date": 1534841270, "post_id": 51866784, "comment_id": 90839269, "body": "&quot;You can have two types from two different assemblies with the same name&quot; \u2014 Immediate flashbacks of Delphi&#39;s &quot;Instance of &#39;TBitmap&#39; is not an instance of &#39;TBitmap&#39; class&quot; messages."}], "tags": [], "owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "is_accepted": true, "score": 4, "last_activity_date": 1534377591, "last_edit_date": 1534377591, "creation_date": 1534368935, "answer_id": 51866784, "question_id": 51865606, "link": "https://stackoverflow.com/questions/51865606/c-how-to-call-the-base-class-operator-without-explicitly-typecasting/51866784#51866784", "title": "C# How to call the base class == operator, without explicitly typecasting?", "body": "<p>Implementing equality both correctly and elegantly in C# is unnecessarily hard; this is an area of the language which I strongly believe to have been under-designed.</p>\n\n<p>My advice is:</p>\n\n<p>First, fix your implementation. It is broken in many ways:</p>\n\n<ul>\n<li><code>==</code> should never crash, but your implementation crashes immediately if <code>==</code> is given a <code>null</code> operand</li>\n<li>Types are <em>already</em> compared using value semantics; you should never compare two types for equality by their names! You can have two types from two different assemblies with the same name, or two types that are the same type from the same assembly loaded into different contexts!  Compare types by comparing types. If the intention is to say that <code>a</code> and <code>b</code> must be exactly the same type then say <code>a.GetType() == b.GetType()</code>, after you know that neither is null</li>\n</ul>\n\n<p>Once you've fixed your implementation, improve it:</p>\n\n<ul>\n<li>Take cheap, easy outs when you can get them.  Always check for reference equality first, using <code>object.ReferenceEquals</code> to make it clear to the reader that this is what you are doing.</li>\n<li>Conversely: if you are checking for reference equality, call <code>object.ReferenceEquals</code> explicitly, and avoid many dumb bugs where you accidentally call <code>operator ==</code> when you meant to do reference equality.</li>\n<li>Write <em>one</em> method that is a <em>single source of truth</em> for equality for a given type, and then call that method -- directly or indirectly -- from all the other methods that implement equality.  Since your intention is to make the implementation of the derived class depend on the details of the base class, <strong>make it a protected virtual method</strong>.</li>\n<li>Since you're doing all this work anyways you might as well implement <code>IEquatable&lt;T&gt;</code> on your types while you're at it.</li>\n</ul>\n\n<p>I would do something like this:</p>\n\n<pre><code>class Foo : IEquatable&lt;Foo&gt; \n{\n  public override bool GetHashcode() { ... }\n  protected virtual bool EqualsImplementation(Foo f) \n  {\n    if (object.ReferenceEquals(this, f)) return true;\n    if (object.ReferenceEquals(f, null)) return false;\n    ... We now have this and f as valid, not ref equal Foos.\n    ... implement the comparison logic here\n  }\n  // Now implement Equals(object) by using EqualsImplementation():\n  public bool Equals(object f) =&gt; \n    (!object.ReferenceEquals(f, null)) &amp;&amp;  \n    (f.GetType() == this.GetType()) &amp;&amp;\n    this.EqualsImplementation((Foo)f);\n  // Now implement Equals(Foo) using Equals(object)\n  public bool Equals(Foo f) =&gt; this.Equals((object)f);\n  // Now implement Equals(Foo, Foo) using Equals(Foo)\n  public static bool Equals(Foo f1, Foo f2) =&gt;\n    object.ReferenceEquals(f1, null) ? \n      object.ReferenceEquals(f2, null) :\n      f1.Equals(f2);\n  // You see how this goes. Every subsequent method uses\n  // the correctness of the previous method to ensure its\n  // correctness in turn!\n  public static bool operator ==(Foo f1, Foo f2) =&gt; \n    Equals(f1, f2);\n  public static bool operator !=(Foo f1, Foo f2) =&gt; \n    !(f1 == f2);\n  ...\n}\n</code></pre>\n\n<p>And now everything is easy peasy in the derived class:</p>\n\n<pre><code>class Bar : Foo, IEquatable&lt;Bar&gt; \n{\n  public override bool GetHashcode() { ... }\n  protected override bool EqualsImplementation(Foo f) \n  {\n    // Again, take easy outs when you find them.\n    if (object.ReferenceEquals(this, f)) return true;\n    Bar b = f as Bar;\n    if (object.ReferenceEquals(b, null)) return false;\n    if (!base.EqualsImplementation(f)) return false;\n    ... We have b and this, not ref equal, both Bars, both\n    ... equal according to Foo.  Do the Bar logic here.\n  }\n\n  // Note that there is no need to override Equals(object). It\n  // already has a correct implementation in Foo.\n\n  // And once again we can use the correctness of the previous\n  // method to implement the next method.  We need this method\n  // to implement IEquatable&lt;Bar&gt;'s contract:\n\n  public bool Equals(Bar b) =&gt; this.Equals((object)b);\n\n  // As noted in a comment below, the following are not strictly\n  // necessary, as the (Foo, Foo) methods in the base class do\n  // the right thing when given two Bars.  However, it might be\n  // nice for debugging or self-documenting-code reasons to implement\n  // them, and they're easy.  Omit them if you like.\n\n  public static bool Equals(Bar b1, Bar b2) =&gt;\n    object.ReferenceEquals(b1, null) ? \n      object.ReferenceEquals(b2, null) : \n      b1.Equals(b2);\n  public static bool operator ==(Bar b1, Bar b2) =&gt; Equals(b1, b2);\n  public static bool operator !=(Bar b1, Bar b2) =&gt; !(b1 == b2);\n}\n</code></pre>\n\n<p>And we're done.  We have boilerplate implementations of <code>Equals(object)</code>, <code>Equals(T)</code>, <code>Equals(T, T)</code>, <code>==(T, T)</code> and <code>!=(T, T)</code> that can be simply cut-n-pasted when you need this pattern, and the type-specific details go into a type-specific virtual protected method, where they belong.</p>\n"}], "owner": {"reputation": 73, "user_id": 7318823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/070bef41bc89b16a55b49d6474af19f1?s=128&d=identicon&r=PG", "display_name": "DavidMoksha", "link": "https://stackoverflow.com/users/7318823/davidmoksha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 2, "accepted_answer_id": 51866784, "answer_count": 3, "score": 0, "last_activity_date": 1534454240, "creation_date": 1534363162, "last_edit_date": 1534454240, "question_id": 51865606, "link": "https://stackoverflow.com/questions/51865606/c-how-to-call-the-base-class-operator-without-explicitly-typecasting", "title": "C# How to call the base class == operator, without explicitly typecasting?", "body": "<p>I have a base class (TFoo) and descendant class (TBar); I am overriding the == operator for both. I would like the descendant class to check its own fields and also call the base class's == operator so that the base class will do its own checks.</p>\n\n<p>In the below code, you will see that within the <code>TBar == operator</code>, I typecast to the base class to check base class equality, like so: <code>(TFoo)a == (TFoo)b</code>.</p>\n\n<p>(This appears to work! Hopefully there is not some gotcha that I have missed in my tests.)</p>\n\n<p>However, I am looking for a more elegant way to do this. For example, <code>(base)a == (base)b</code> or <code>a base.== b</code> or <code>base.==(a, b)</code> or <code>a.base.Equals(b)</code> or something.</p>\n\n<p>Obviously the above examples do not work and may look ridiculous; and as noted, <code>(TFoo)a == (TFoo)b</code> does work properly. I'm looking for a way to do this <em>without explicitly naming</em> the <code>TFoo</code> class.</p>\n\n<p><strong><em>Edit: thanks for all the wonderful responses! I have modified the original code below, to compare <code>.GetType()</code> directly; I removed the <code>.Name</code> that several people have pointed out is dumb and dangerous.</em></strong></p>\n\n<pre><code>class TFoo\n{\n    public int foo;\n\n    public static bool operator ==(TFoo a, TFoo b)\n    {\n        return a.GetType() == b.GetType()\n            &amp;&amp; a.foo == b.foo;\n    }\n\n    public static bool operator !=(TFoo a, TFoo b)\n    {\n        return !(a == b);\n    }\n\n    public override bool Equals(object obj)\n    {\n        return (obj is TFoo) &amp;&amp; this == (TFoo)obj;\n    }\n\n    public override int GetHashCode()\n    {\n        return this.foo;\n    }\n}\n\nclass TBar : TFoo\n{\n    public int bar;\n\n    public static bool operator ==(TBar a, TBar b)\n    {\n        return (TFoo)a == (TFoo)b\n            &amp;&amp; a.bar == b.bar;\n    }\n\n    public static bool operator !=(TBar a, TBar b)\n    {\n        return !(a == b);\n    }\n\n    public override bool Equals(object obj)\n    {\n        return (obj is TBar) &amp;&amp; this == (TBar)obj;\n    }\n\n    public override int GetHashCode()\n    {\n        return base.GetHashCode();\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "ms-word", "office-interop"], "answers": [{"tags": [], "owner": {"reputation": 23462, "user_id": 3077495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZE6fb.png?s=128&g=1", "display_name": "Cindy Meister", "link": "https://stackoverflow.com/users/3077495/cindy-meister"}, "is_accepted": true, "score": 0, "last_activity_date": 1534432074, "creation_date": 1534432074, "answer_id": 51880239, "question_id": 51865571, "link": "https://stackoverflow.com/questions/51865571/how-to-check-a-box-using-microsoft-word-interop-bookmarks-c/51880239#51880239", "title": "How to check a box using Microsoft Word Interop Bookmarks C#", "body": "<p>When working with form fields it's better to address the formfield object rather than the bookmark name. The bookmark name serves as the index value for the <code>FormFields</code> collection.</p>\n\n<p>For example:</p>\n\n<pre><code>object bookmark1 = \"bkm1\";\nobject bookmark2 = \"bkm2\";\nwordDoc.FormFields[ref bookmark1].Result = \"Text in textbox\";\nwordDoc.FormFields[ref bookmark2].CheckBox.Value = true;\n</code></pre>\n"}], "owner": {"reputation": 1389, "user_id": 6480913, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-Zks_iqZEYu8/AAAAAAAAAAI/AAAAAAAARf4/AjxTbr8Zsfg/photo.jpg?sz=128", "display_name": "Jordan Lewallen", "link": "https://stackoverflow.com/users/6480913/jordan-lewallen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 51880239, "answer_count": 1, "score": 0, "last_activity_date": 1534673770, "creation_date": 1534362972, "last_edit_date": 1534673770, "question_id": 51865571, "link": "https://stackoverflow.com/questions/51865571/how-to-check-a-box-using-microsoft-word-interop-bookmarks-c", "title": "How to check a box using Microsoft Word Interop Bookmarks C#", "body": "<p>I am trying to modify a document with form fields and check boxes using C#'s Microsoft Word Interop. I've successfully managed to update the form fields using the following code, but I can't figure out how to mark a checkbox as \"checked\"</p>\n\n<p>I created a list of items in the form that need to be updated, each form item has a <code>BookmarkTag</code> and respective data string:</p>\n\n<pre><code>string filename = @\"C:\\Users\\...docx\"; //removed for brevity\n\nApplication wordApp = null;\nwordApp = new Application();\nwordApp.Visible = false;\nDocument wordDoc = wordApp.Documents.Add(filename);\n\nList&lt;FormItem&gt; formItems = new List&lt;FormItem&gt;\n    {\n        new FormItem { BookmarkTag = \"author\", Data = doc.Author.DisplayName },\n        new FormItem { BookmarkTag = \"phonenumber\", Data = doc.Author.PhoneNumber },\n    };\n\nforeach(var formItem in formItems)\n{\n    if (!String.IsNullOrWhiteSpace(formItem.Data))\n    {\n        Bookmark bookmark = wordDoc.Bookmarks[formItem.BookmarkTag];\n        bookmark.Select();\n        wordApp.Selection.TypeText(formItem.Data);\n    }\n}\n</code></pre>\n\n<p>Obviously this will only work with text items, but how can I identify a bookmark like \"checkbox1\" and mark it's value as \"checked\"? </p>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["c#", "ajax", "asp.net-web-api"], "comments": [{"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1534363064, "post_id": 51865569, "comment_id": 90683304, "body": "you don&#39;t have anything inheriting from a <code>Controller</code>."}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534363102, "post_id": 51865569, "comment_id": 90683321, "body": "What controller is your <code>Post</code> method in?  What is the route?"}, {"owner": {"reputation": 11, "user_id": 5578572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f3eb22d7d466dd3707d486604a3ccb?s=128&d=identicon&r=PG&f=1", "display_name": "TheMelancholicMan", "link": "https://stackoverflow.com/users/5578572/themelancholicman"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534363306, "post_id": 51865569, "comment_id": 90683404, "body": "@maccettura edited"}, {"owner": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "edited": false, "score": 0, "creation_date": 1534363366, "post_id": 51865569, "comment_id": 90683421, "body": "You need to add <code>[Route(&quot;&quot;)]</code> to your POST method too."}, {"owner": {"reputation": 11, "user_id": 5578572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f3eb22d7d466dd3707d486604a3ccb?s=128&d=identicon&r=PG&f=1", "display_name": "TheMelancholicMan", "link": "https://stackoverflow.com/users/5578572/themelancholicman"}, "reply_to_user": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "edited": false, "score": 1, "creation_date": 1534363763, "post_id": 51865569, "comment_id": 90683591, "body": "@KirkLarkin Now no matter what I type in input text boxes I get two nulls in Point parameter"}, {"owner": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "edited": false, "score": 0, "creation_date": 1534363944, "post_id": 51865569, "comment_id": 90683678, "body": "Well, that&#39;s a new issue: add <code>contentType: &#39;application&#47;json&#39;</code> to your <code>$.ajax</code> object. You may also need to use <code>JSON.stringify</code> on the <code>data</code> object but I&#39;m not sure - I don&#39;t do much jQuery myself. Here&#39;s an <a href=\"https://stackoverflow.com/a/9758335/2630078\">example</a>."}, {"owner": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "edited": false, "score": 0, "creation_date": 1534365163, "post_id": 51865569, "comment_id": 90684214, "body": "I just noticed that you get the values of <code>#input1</code> and <code>#input2</code> <i>outside</i> of the <code>click</code> handler, which means the values of <code>x</code> and <code>y</code> might not be up-to-date when clicking the button."}, {"owner": {"reputation": 11, "user_id": 5578572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f3eb22d7d466dd3707d486604a3ccb?s=128&d=identicon&r=PG&f=1", "display_name": "TheMelancholicMan", "link": "https://stackoverflow.com/users/5578572/themelancholicman"}, "edited": false, "score": 1, "creation_date": 1534365401, "post_id": 51865569, "comment_id": 90684305, "body": "Ok, I got it, &quot;contentType: &#39;application/json&#39;&quot; it helped and the second thing you told about.. I don&#39;t know how it happend :D"}], "answers": [{"tags": [], "owner": {"reputation": 2740, "user_id": 4009972, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9f96fc16291174858bf8e03c12cd0c1a?s=128&d=identicon&r=PG&f=1", "display_name": "codeMonkey", "link": "https://stackoverflow.com/users/4009972/codemonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1534368271, "creation_date": 1534368271, "answer_id": 51866646, "question_id": 51865569, "link": "https://stackoverflow.com/questions/51865569/getting-method-not-allowed-error-after-handling-a-post-request/51866646#51866646", "title": "Getting &quot;Method not allowed&quot; error after handling a POST request", "body": "<p>Your url should be <code>api/images/post</code>.  The <code>RoutePrefix</code> is \"api/images\", so you're missing the name of the method.</p>\n"}], "owner": {"reputation": 11, "user_id": 5578572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f3eb22d7d466dd3707d486604a3ccb?s=128&d=identicon&r=PG&f=1", "display_name": "TheMelancholicMan", "link": "https://stackoverflow.com/users/5578572/themelancholicman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534368271, "creation_date": 1534362961, "last_edit_date": 1534365075, "question_id": 51865569, "link": "https://stackoverflow.com/questions/51865569/getting-method-not-allowed-error-after-handling-a-post-request", "title": "Getting &quot;Method not allowed&quot; error after handling a POST request", "body": "<p>I have a problem like the topic says. I'm new with that stuff and I don't even know where to look for that issue. That's my post method:</p>\n\n<pre><code>public class Point\n{\n    public string x { get; set; }\n    public string y { get; set; }\n}\n\n[HttpPost]\npublic IHttpActionResult Post([FromBody] Point point)\n{\n    // do stuff\n    return StatusCode(HttpStatusCode.OK);\n}\n</code></pre>\n\n<p>and that's my ajax request:</p>\n\n<pre><code>var x = $('#input1').val();\nvar y = $('#input2').val();\n\n$(\"#btnUpload\").click(function () {\n    $.ajax({\n        type: \"POST\",\n        url: \"api/images\",\n        data: { x: x, y: y },\n        success: function (result) { alert(result) },\n        error: function (err) { alert(err.statusText) }\n    });\n});\n</code></pre>\n\n<p>Did I forget about something?</p>\n\n<p>EDIT: My controller:</p>\n\n<pre><code>[RoutePrefix(\"api/images\")]\npublic class ImagesController : ApiController\n{\n    private Bitmap CreateBoard()\n    {\n        // some stuff I need\n    }\n\n    [HttpPost]\n    public IHttpActionResult Post([FromBody] Point point)\n    {\n        // do stuff\n        return StatusCode(HttpStatusCode.OK);\n    }\n\n    [Route(\"\")]\n    [HttpGet]\n    public List&lt;int&gt; Get()\n    {\n        // do other stuff\n    }\n\n    [Route(\"{id}\")]\n    [HttpGet]\n    public HttpResponseMessage Get(int id)\n    {\n        // do other other stuff\n    }\n}\n</code></pre>\n\n<p>GET is working fine.</p>\n"}, {"tags": ["c#", ".net", "xaml", "xamarin", "xamarin.forms"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 9936923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee96e572b2318d1d1f1b5c0f9db102af?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/9936923/nathan"}, "is_accepted": true, "score": 0, "last_activity_date": 1534862903, "creation_date": 1534862903, "answer_id": 51951339, "question_id": 51865568, "link": "https://stackoverflow.com/questions/51865568/unable-to-refresh-a-xaml-contentpage-cleanly-with-a-large-amount-of-items/51951339#51951339", "title": "Unable to refresh a xaml Contentpage cleanly with a large amount of items", "body": "<p>The issue here is the ListView's ScrollTo() function. When we call:</p>\n\n<pre><code>            logListView.ScrollTo(logObservableCollection.LastOrDefault(), ScrollToPosition.End, true);\n</code></pre>\n\n<p>The ScrollTo function seems to go through the entire observable collection to find the last item in the list. </p>\n\n<p>I circumvented this by creating a method instead of using this onAppearing event handler.</p>\n\n<p>Here is my updated code. Note that both have to be invoked on the main thread.</p>\n\n<pre><code>       if (statementObject.Types.Contains(LogType.diffLogType))\n        {\n            Device.BeginInvokeOnMainThread(() =&gt; {\n                _incidentLabelListCollection.Add(logStatement);\n                if (autoScroll)\n                    EnableAutoScroll(logStatement,null);\n            });\n        }\n</code></pre>\n\n<p>second method</p>\n\n<pre><code>    private void EnableAutoScroll(Label label, ListView listView)\n    {\n        Device.BeginInvokeOnMainThread(() =&gt;\n        {\n            if(logListView.IsVisible)\n                logListView.ScrollTo(label, ScrollToPosition.End, false);\n\n        });\n    }\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 9936923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee96e572b2318d1d1f1b5c0f9db102af?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/9936923/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 51951339, "answer_count": 1, "score": 2, "last_activity_date": 1534862903, "creation_date": 1534362955, "last_edit_date": 1534363955, "question_id": 51865568, "link": "https://stackoverflow.com/questions/51865568/unable-to-refresh-a-xaml-contentpage-cleanly-with-a-large-amount-of-items", "title": "Unable to refresh a xaml Contentpage cleanly with a large amount of items", "body": "<p>I'm trying to create a logging page that adds logs while the application runs.\nA feature that's required is the ability to autoscroll to the latest(last) added log.</p>\n\n<p>The problem is that when I use the scrollto function on an observablecollection the logging page seems to reload the whole list.</p>\n\n<p>This would not be an issue but when the list is large enough it causes the page to blink when redrawing the list.</p>\n\n<p>Is there anyway add log statements to a page and scroll to the last element of the page without causing the page to blink.</p>\n\n<p><strong>I'm up for any solution really but it must meet the requirements of:</strong></p>\n\n<ol>\n<li><p>be able to refresh in real time when a log is created/added (which is frequently)</p></li>\n<li><p>be able to automatically scroll to the end of the page.</p></li>\n<li><p>be able to refresh cleanly(no blinking or other type of issue).</p></li>\n</ol>\n\n<p><strong>My Attempts:</strong></p>\n\n<p>I have tried two different ways to implement this. </p>\n\n<p>The first way was adding a label of a \"logstatement\"(string) to a \ncontent page. I would then use a lastorDefault() method to find the last child in the layout(in this case a stacklayout) \nand then scroll to that item(in this case a Label()). </p>\n\n<p>I have to add the label to the main thread by using Device.BeginInvokeOnMainThread(otherwise it conflicts with other aspects of the program) this causes a race condition between the scrolling function and this invocation which eventually throws an exception when the list is large enough.\nThe second issue with this way is that it also has this blinking issue when the page gets big enough and we're adding statements.</p>\n\n<p>The second way i've tried implementing it is by using an observable collection in which I add labels to the observablecollection and use\na datatemplate to access the label's text and textcolor. I use the scrollto function to scroll to the bottom of the list after adding a label.\nThis works fine when the list is small (less than 150 or so) but afterwards the page blinks when adding labels(logstatements).</p>\n\n<p>My current idea is to only have the last 50 or so items in the observable collection so the refresh is clean \nI'm looking for a better solution but maybe that does not exist.</p>\n\n<p>I've heavily modified the code displayed so some of it won't make sense but I've tried to keep the logic pure here.</p>\n\n<p>I am unable to add compilable code right now but I will create a test project if this code is insufficient please let me know.</p>\n\n<p>Code:</p>\n\n<pre><code>    public LoggingPage()\n    {\n        InitializeComponent();\n        loggingPage.ItemAppearing += EnableAutoScroll;\n        DisplayLogsOnScreen(logstatements);\n    }\n\n    //adds the logs to the screen\n    private void DisplayLogsOnScreen(LogStatement logstatements)\n    {\n        Label loggingLabel = new Label();\n\n\n        foreach (typeOfLog tempLogType in differentlogTypes)\n        {\n            switch (tempLogType)\n            {\n                case typeOfLog.FIRSTTYPE:\n                    Device.BeginInvokeOnMainThread(() =&gt; {\n                        logObservableCollection.Add(loggingLabel);\n                    });\n                    break;\n                case LogType.SECONDTYPE:\n                    Device.BeginInvokeOnMainThread(() =&gt; {\n                        differentLogObservableCollection.Add(loggingLabel);\n                    });\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n\n\n\n   // have to wrap the scrollto events in an itemAppeared event handler \n   // otherwise the update to the UI is laggy\n   // it still has issues updating the logview this workaround is not perfect\n\n    private void AddAutoScroll(object sender, EventArgs e)\n    {\n            if (autoScroll)//a button that enables and disables autoscroll\n            {\n                logListView.ScrollTo(logObservableCollection.LastOrDefault(), ScrollToPosition.End, true);\n                logListView.ScrollTo(differentLogObservableCollection.LastOrDefault(), ScrollToPosition.End, true);\n\n            }\n    }\n</code></pre>\n\n<p>Xaml:</p>\n\n<pre><code>&lt;ContentPage Title=\"logPage\"&gt;\n    &lt;ContentPage.Content&gt;\n        &lt;ListView x:Name=\"loggingPage\"&gt;\n            &lt;ListView.ItemTemplate&gt;\n                &lt;DataTemplate&gt;\n                    &lt;ViewCell&gt;\n                        &lt;Label Text=\"{Binding Text}\" TextColor=\"{Binding TextColor}\"/&gt;\n                    &lt;/ViewCell&gt;\n                &lt;/DataTemplate&gt;\n            &lt;/ListView.ItemTemplate&gt;\n        &lt;/ListView&gt;\n    &lt;/ContentPage.Content&gt;\n&lt;/ContentPage&gt;\n</code></pre>\n"}, {"tags": ["c#", "sql", "function", "combobox"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10220647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3831fdbe71642bc166f7d8f3ac254d27?s=128&d=identicon&r=PG&f=1", "display_name": "Chris D", "link": "https://stackoverflow.com/users/10220647/chris-d"}, "edited": false, "score": 0, "creation_date": 1534365439, "post_id": 51865920, "comment_id": 90684316, "body": "I made this change and I do not receive the error on the combobox.DisplayMember line, however, I now receive it on the combobox.ValueMember line?"}, {"owner": {"reputation": 725, "user_id": 8672765, "user_type": "registered", "profile_image": "https://graph.facebook.com/1996264813992755/picture?type=large", "display_name": "Daniel Loudon", "link": "https://stackoverflow.com/users/8672765/daniel-loudon"}, "reply_to_user": {"reputation": 11, "user_id": 10220647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3831fdbe71642bc166f7d8f3ac254d27?s=128&d=identicon&r=PG&f=1", "display_name": "Chris D", "link": "https://stackoverflow.com/users/10220647/chris-d"}, "edited": false, "score": 0, "creation_date": 1534365489, "post_id": 51865920, "comment_id": 90684332, "body": "Did you do the change for both? So update combobox.ValueMember = Options; aswell?"}, {"owner": {"reputation": 11, "user_id": 10220647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3831fdbe71642bc166f7d8f3ac254d27?s=128&d=identicon&r=PG&f=1", "display_name": "Chris D", "link": "https://stackoverflow.com/users/10220647/chris-d"}, "edited": false, "score": 0, "creation_date": 1534365548, "post_id": 51865920, "comment_id": 90684362, "body": "Yes, I will update my question to show the new code."}], "tags": [], "owner": {"reputation": 725, "user_id": 8672765, "user_type": "registered", "profile_image": "https://graph.facebook.com/1996264813992755/picture?type=large", "display_name": "Daniel Loudon", "link": "https://stackoverflow.com/users/8672765/daniel-loudon"}, "is_accepted": false, "score": 0, "last_activity_date": 1534364778, "creation_date": 1534364778, "answer_id": 51865920, "question_id": 51865560, "link": "https://stackoverflow.com/questions/51865560/cannot-bind-to-the-new-display-member-c-sql-server/51865920#51865920", "title": "Cannot bind to the new display member C# &amp; SQL Server", "body": "<p>Try this:</p>\n\n<pre><code>Options = Option + \"_name\";\n</code></pre>\n\n<p>And then assign like this:</p>\n\n<pre><code>combobox.DisplayMember = Options;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10221554, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_Q_G6olUDGs/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rqbC7bt0ryW4ElQvADeALZEb80SQ/mo/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/10221554/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1534375665, "last_edit_date": 1534375665, "creation_date": 1534366155, "answer_id": 51866217, "question_id": 51865560, "link": "https://stackoverflow.com/questions/51865560/cannot-bind-to-the-new-display-member-c-sql-server/51866217#51866217", "title": "Cannot bind to the new display member C# &amp; SQL Server", "body": "<p>Your table name is hard coded in the query string </p>\n\n<pre><code>string Query = \"SELECT \" + Options + \" FROM Food\"; \n</code></pre>\n\n<p>Also, try changing the order of statements as:</p>\n\n<pre><code>    combobox.DataSource = ds.Tables[Options];\n    combobox.DisplayMember = Options;\n    combobox.ValueMember = Options;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10220647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3831fdbe71642bc166f7d8f3ac254d27?s=128&d=identicon&r=PG&f=1", "display_name": "Chris D", "link": "https://stackoverflow.com/users/10220647/chris-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1534375665, "creation_date": 1534362929, "last_edit_date": 1534365584, "question_id": 51865560, "link": "https://stackoverflow.com/questions/51865560/cannot-bind-to-the-new-display-member-c-sql-server", "title": "Cannot bind to the new display member C# &amp; SQL Server", "body": "<p>I have previously researched this topic which lead me to adding this line of code to my program.</p>\n\n<pre><code>public static string Options { get; set; }\n</code></pre>\n\n<p>However, I still get this error:</p>\n\n<blockquote>\n  <p>System.ArgumentException: 'Cannot bind to the new display member. Parameter name: newDisplayMember'</p>\n</blockquote>\n\n<p>I have created this function in order to fill up two separate comboboxes (one of all the drinks and one off all the food). This information is provided to the program from two separate tables. The variable 'Option' will either be assigned Drink or Food which will decide what information is shown.</p>\n\n<p>Here is the complete function:</p>\n\n<pre><code>    public static void FillFoodCombo(ComboBox combobox, string Option)\n    {\n        Options = Option + \"_Name\";\n\n        string Query = \"SELECT \" + Options + \" FROM Food\";\n\n        SqlDataAdapter da = new SqlDataAdapter(Query, LogInForm.connection);\n        DataSet ds = new DataSet();\n        da.Fill(ds, Options);\n        combobox.DisplayMember = Options;\n        combobox.ValueMember = Options;\n        combobox.DataSource = ds.Tables[Options];\n    }\n</code></pre>\n\n<p>Sorry if this is just me being thick :)</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c#", "unity3d"], "answers": [{"tags": [], "owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "is_accepted": true, "score": 8, "last_activity_date": 1534366540, "creation_date": 1534366540, "answer_id": 51866305, "question_id": 51865539, "link": "https://stackoverflow.com/questions/51865539/unity-setting-player-settings-target-architectures-via-script/51866305#51866305", "title": "Unity setting Player Settings Target Architectures via Script", "body": "<p>The second parameter of the <code>PlayerSettings.SetArchitecture</code> function expects <code>0</code> for None, <code>1</code> for ARM64 and <code>2</code> for Universal. This is <strong>not</strong> what you are really looking for.</p>\n\n<hr>\n\n<p>With the screenshot in your question, you are looking for the <a href=\"https://docs.unity3d.com/ScriptReference/PlayerSettings.Android-targetArchitectures.html\" rel=\"noreferrer\"><code>PlayerSettings.Android.targetArchitectures</code></a> property which can be used to set ARM64, ARMv7 or X86 as the build architecture with the <a href=\"https://docs.unity3d.com/ScriptReference/AndroidArchitecture.html\" rel=\"noreferrer\"><code>AndroidArchitecture</code></a> enum.</p>\n\n<p>To set only one architecture:</p>\n\n<pre><code>PlayerSettings.Android.targetArchitectures = AndroidArchitecture.X86;\n</code></pre>\n\n<hr>\n\n<p>To set only <strong>multiple</strong> architecture, use enum flags since <code>AndroidArchitecture</code> is declared with the <code>Flags</code> attribute which allows the bitwise manipulations to be used to select multiple values:</p>\n\n<pre><code>AndroidArchitecture aac = AndroidArchitecture.ARM64 | AndroidArchitecture.ARMv7 | AndroidArchitecture.X86;\nPlayerSettings.Android.targetArchitectures = aac;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>AndroidArchitecture aac = AndroidArchitecture.ARM64;\naac |= AndroidArchitecture.ARMv7;\naac |= AndroidArchitecture.X86;   \nPlayerSettings.Android.targetArchitectures = aac;\n</code></pre>\n\n<p>You can learn more about enum flags <a href=\"https://stackoverflow.com/questions/8447/what-does-the-flags-enum-attribute-mean-in-c\">here</a>.</p>\n\n<p>If you just want to use all the architectures then simply use <code>AndroidArchitecture.All</code>.</p>\n\n<pre><code>PlayerSettings.Android.targetArchitectures = AndroidArchitecture.All;\n</code></pre>\n"}], "owner": {"reputation": 1383, "user_id": 6771167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b40332422e569947e35ee494585400c2?s=128&d=identicon&r=PG&f=1", "display_name": "sswwqqaa", "link": "https://stackoverflow.com/users/6771167/sswwqqaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5402, "favorite_count": 2, "accepted_answer_id": 51866305, "answer_count": 1, "score": 4, "last_activity_date": 1534366565, "creation_date": 1534362830, "last_edit_date": 1534366565, "question_id": 51865539, "link": "https://stackoverflow.com/questions/51865539/unity-setting-player-settings-target-architectures-via-script", "title": "Unity setting Player Settings Target Architectures via Script", "body": "<p>I have my custom build script and I want to add more options in it.\nOne of them is Target Architectures. (I'm using IL2CPP as a scripting backend - I set it by script)</p>\n\n<p>Here you can see which settings I want to change:\n<a href=\"https://i.stack.imgur.com/YQqge.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YQqge.png\" alt=\"\"></a></p>\n\n<p>According to <a href=\"https://docs.unity3d.com/ScriptReference/PlayerSettings.SetArchitecture.html\" rel=\"nofollow noreferrer\">docs</a> I can use PlayerSettings.SetArchitecture(), but it seems not to work for me at all. It only has an option for 0 - None, 1 - ARM64, 2 - Universal and I want All. So I tried using:</p>\n\n<pre><code>PlayerSettings.SetArchitecture(BuildTargetGroup.Android, unchecked((int)AndroidArchitecture.All));\n</code></pre>\n\n<p>but it doesn't change anything, also the lines below does not change anything:</p>\n\n<pre><code>PlayerSettings.SetArchitecture(BuildTargetGroup.Android, unchecked((int)AndroidArchitecture.ARM64));\nPlayerSettings.SetArchitecture(BuildTargetGroup.Android, unchecked((int)AndroidArchitecture.ARMv7));\nPlayerSettings.SetArchitecture(BuildTargetGroup.Android, unchecked((int)AndroidArchitecture.X86));\n</code></pre>\n\n<p>I'm wondering how I can do it correctly?</p>\n"}, {"tags": ["c#", "http"], "comments": [{"owner": {"reputation": 30401, "user_id": 1497454, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0a1b529539a71d7255c4215112c8385d?s=128&d=identicon&r=PG", "display_name": "omega", "link": "https://stackoverflow.com/users/1497454/omega"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1534362818, "post_id": 51865325, "comment_id": 90683209, "body": "I tried putting the answer from the link, but it says <code>__DynamicallyInvokable</code> is not defined."}], "answers": [{"comments": [{"owner": {"reputation": 30401, "user_id": 1497454, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0a1b529539a71d7255c4215112c8385d?s=128&d=identicon&r=PG", "display_name": "omega", "link": "https://stackoverflow.com/users/1497454/omega"}, "edited": false, "score": 1, "creation_date": 1534363636, "post_id": 51865673, "comment_id": 90683537, "body": "How can I attach this custom content type then? If I can send this in postman, there should be a way in c#?"}, {"owner": {"reputation": 97, "user_id": 1516044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e1b67bea76e0ca68a87aa624dbcb99?s=128&d=identicon&r=PG", "display_name": "kooch", "link": "https://stackoverflow.com/users/1516044/kooch"}, "reply_to_user": {"reputation": 30401, "user_id": 1497454, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0a1b529539a71d7255c4215112c8385d?s=128&d=identicon&r=PG", "display_name": "omega", "link": "https://stackoverflow.com/users/1497454/omega"}, "edited": false, "score": 0, "creation_date": 1534630041, "post_id": 51865673, "comment_id": 90775889, "body": "I don\u2019t believe the boundary info should be part of the content type."}], "tags": [], "owner": {"reputation": 97, "user_id": 1516044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e1b67bea76e0ca68a87aa624dbcb99?s=128&d=identicon&r=PG", "display_name": "kooch", "link": "https://stackoverflow.com/users/1516044/kooch"}, "is_accepted": false, "score": 0, "last_activity_date": 1534363502, "creation_date": 1534363502, "answer_id": 51865673, "question_id": 51865325, "link": "https://stackoverflow.com/questions/51865325/invalid-content-type-format-in-c-http-request/51865673#51865673", "title": "Invalid content type format in c# http request", "body": "<p>The answer s/b somewhat obvious from the error message.  <code>\"multipart/form-data;boundary=ce4da8a9-0e0d-4ba6-9f00-e7f3b002a717\"</code> is not a valid content type. Even if you were creating a custom content type, you are prohibited from using the following characters: </p>\n\n<pre><code>( ) @ &lt; &gt; , ; : \\ \" / [ ] ? = { }\n</code></pre>\n\n<p>The presence of any of these in your content type will cause   </p>\n\n<pre><code>StringContent(postData, Encoding.UTF8, content_type)\n</code></pre>\n\n<p>to fail with a <code>System.FormatException</code></p>\n"}], "owner": {"reputation": 30401, "user_id": 1497454, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0a1b529539a71d7255c4215112c8385d?s=128&d=identicon&r=PG", "display_name": "omega", "link": "https://stackoverflow.com/users/1497454/omega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1534629990, "creation_date": 1534361961, "last_edit_date": 1534362554, "question_id": 51865325, "link": "https://stackoverflow.com/questions/51865325/invalid-content-type-format-in-c-http-request", "title": "Invalid content type format in c# http request", "body": "<p>I am trying to set a content type of this:</p>\n\n<blockquote>\n  <p>System.FormatException: 'The format of value 'multipart/form-data;boundary=ce4da8a9-0e0d-4ba6-9f00-e7f3b002a717' is invalid.'</p>\n</blockquote>\n\n<p>when executing this</p>\n\n<pre><code>HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post, uri)\n{\n    Content = new StringContent(postData, Encoding.UTF8, content_type) // CONTENT-TYPE header\n};\n</code></pre>\n\n<p>but according to this </p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/skype-sdk/ucwa/batchingrequests\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/skype-sdk/ucwa/batchingrequests</a>\n<a href=\"https://ucwa.skype.com/documentation/Resources-batch-3\" rel=\"nofollow noreferrer\">https://ucwa.skype.com/documentation/Resources-batch-3</a>\n<a href=\"https://ucwa.skype.com/documentation/ProgrammingConcepts-Batch\" rel=\"nofollow noreferrer\">https://ucwa.skype.com/documentation/ProgrammingConcepts-Batch</a></p>\n\n<p>All the resources say to use the format that I have. And it doesn't complain about this in Postman too. Is there a way I can force this content type in the <code>StringContent</code> in c#?</p>\n\n<p>There is an answer here</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21057354/how-do-i-send-arbitrary-json-data-with-a-custom-header-to-a-rest-server\">How do I send arbitrary JSON data, with a custom header, to a REST server?</a></p>\n\n<p>but I'm not sure how to implement this.</p>\n"}, {"tags": ["c#", "castle-windsor", "ioc-container", "property-injection"], "comments": [{"owner": {"reputation": 26640, "user_id": 13163, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/67f7ed4d56aafb0563abfe2c74697a3d?s=128&d=identicon&r=PG", "display_name": "Krzysztof Kozmic", "link": "https://stackoverflow.com/users/13163/krzysztof-kozmic"}, "edited": false, "score": 0, "creation_date": 1534489555, "post_id": 51865317, "comment_id": 90730944, "body": "Have a look at the documentation. <a href=\"https://github.com/castleproject/Windsor/blob/master/docs/how-properties-are-injected.md\" rel=\"nofollow noreferrer\">github.com/castleproject/Windsor/blob/master/docs/&hellip;</a> You can subclass <code>PropertiesDependenciesModelInspector</code> which should allow you to remove a lot of the boilerplate"}, {"owner": {"reputation": 21, "user_id": 2019434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea11c1b6019658d4a116f41aac4e8977?s=128&d=identicon&r=PG", "display_name": "gradyal", "link": "https://stackoverflow.com/users/2019434/gradyal"}, "reply_to_user": {"reputation": 26640, "user_id": 13163, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/67f7ed4d56aafb0563abfe2c74697a3d?s=128&d=identicon&r=PG", "display_name": "Krzysztof Kozmic", "link": "https://stackoverflow.com/users/13163/krzysztof-kozmic"}, "edited": false, "score": 0, "creation_date": 1534603904, "post_id": 51865317, "comment_id": 90769744, "body": "@KrzysztofKozmic That&#39;s essentially what I&#39;ve done with my workaround I mentioned above although I inherited directly from IContributeComponentModelConstruction. The only way that this (or the subclass of PropertiesDependenciesModelInspector) works is if I remove the implementation of PropertiesDependenciesModelInspector from the ComponentModelBuilder and add my own. But my implementation ends up being very similar to the original apart from the check for my own attribute."}, {"owner": {"reputation": 21, "user_id": 2019434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea11c1b6019658d4a116f41aac4e8977?s=128&d=identicon&r=PG", "display_name": "gradyal", "link": "https://stackoverflow.com/users/2019434/gradyal"}, "reply_to_user": {"reputation": 26640, "user_id": 13163, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/67f7ed4d56aafb0563abfe2c74697a3d?s=128&d=identicon&r=PG", "display_name": "Krzysztof Kozmic", "link": "https://stackoverflow.com/users/13163/krzysztof-kozmic"}, "edited": false, "score": 0, "creation_date": 1534603953, "post_id": 51865317, "comment_id": 90769758, "body": "@KrzysztofKozmic So is the example in this documentation here: <a href=\"https://github.com/castleproject/Windsor/blob/aa9b8b353ee2e533d586495eec254e216f800c09/docs/componentmodel-construction-contributors.md\" rel=\"nofollow noreferrer\">github.com/castleproject/Windsor/blob/&hellip;</a> no longer valid? That&#39;s a much simpler approach."}, {"owner": {"reputation": 26640, "user_id": 13163, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/67f7ed4d56aafb0563abfe2c74697a3d?s=128&d=identicon&r=PG", "display_name": "Krzysztof Kozmic", "link": "https://stackoverflow.com/users/13163/krzysztof-kozmic"}, "edited": false, "score": 0, "creation_date": 1534777385, "post_id": 51865317, "comment_id": 90817125, "body": "The documentation should be valid. The first example was just more closely related"}, {"owner": {"reputation": 21, "user_id": 2019434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea11c1b6019658d4a116f41aac4e8977?s=128&d=identicon&r=PG", "display_name": "gradyal", "link": "https://stackoverflow.com/users/2019434/gradyal"}, "reply_to_user": {"reputation": 26640, "user_id": 13163, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/67f7ed4d56aafb0563abfe2c74697a3d?s=128&d=identicon&r=PG", "display_name": "Krzysztof Kozmic", "link": "https://stackoverflow.com/users/13163/krzysztof-kozmic"}, "edited": false, "score": 0, "creation_date": 1534778497, "post_id": 51865317, "comment_id": 90817805, "body": "@KrzysztofKozmic Got it. So if the link that I provided is valid, any ideas on how to make that approach work? I&#39;m just trying to figure out what I&#39;m missing."}], "owner": {"reputation": 21, "user_id": 2019434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea11c1b6019658d4a116f41aac4e8977?s=128&d=identicon&r=PG", "display_name": "gradyal", "link": "https://stackoverflow.com/users/2019434/gradyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1534361946, "creation_date": 1534361946, "question_id": 51865317, "link": "https://stackoverflow.com/questions/51865317/requiring-an-attribute-for-castlewindsor-property-injection", "title": "Requiring an attribute for CastleWindsor property injection", "body": "<p>Although I prefer constructor injection, I want developers on my team to be able to  use property injection as long as they explicitly mark the property as injectable with an attribute. According to CastleWindsor documentation <a href=\"https://github.com/castleproject/Windsor/blob/aa9b8b353ee2e533d586495eec254e216f800c09/docs/componentmodel-construction-contributors.md\" rel=\"nofollow noreferrer\">here</a>, this should be possible by creating a contributor and then calling AddContributor with it through the Kernel. I cannot seem to get this to work. All public properties (even those without the attribute) are injected. </p>\n\n<p>When I set a breakpoint in my contributor ProcessModel method, it sets all properties with the attribute to mandatory (IsOptional = false) and skips over any properties that do not have the attribute. But despite this, the properties without the attribute still get injected. What am I doing wrong?</p>\n\n<p>Below is my code:</p>\n\n<p><strong>Contributor</strong></p>\n\n<pre><code>public class PropertyInjectionContributor : IContributeComponentModelConstruction\n{\n    public void ProcessModel(IKernel kernel, ComponentModel model)\n    {\n        model.Properties\n            .Where(p =&gt; p.Property.IsDefined(typeof(InjectedAttribute)))\n            .All(p =&gt; p.Dependency.IsOptional = false);\n    }\n}\n</code></pre>\n\n<p><strong>Attribute</strong></p>\n\n<pre><code>[AttributeUsage(AttributeTargets.Property)]\npublic class InjectedAttribute : Attribute { }\n</code></pre>\n\n<p><strong>Add contributor to Kernel.ComponentModelBuilder and register components</strong></p>\n\n<pre><code>public class Program\n{\n    public static void Main(string[] args)\n    {\n        var container = new WindsorContainer();\n\n        container.Kernel.ComponentModelBuilder.AddContributor(new PropertyInjectionContributor());\n\n        container.Register(Component.For&lt;IClass1&gt;()\n            .ImplementedBy&lt;Class1&gt;()\n            .LifestyleTransient());\n\n        container.Register(Component.For&lt;IClass2&gt;()\n            .ImplementedBy&lt;Class2&gt;()\n            .LifestyleTransient());\n\n        var class1 = container.Resolve&lt;IClass1&gt;();\n        class1.DoSomething();\n    }\n}\n</code></pre>\n\n<p><strong>Class1</strong></p>\n\n<pre><code>public class Class1 : IClass1\n{\n    //[Injected]\n    public IClass2 Class2 { get; set; }\n\n    public void DoSomething()\n    {\n        Class2.DoSomething();\n    }\n}\n</code></pre>\n\n<p>The Class2 property within Class1 is injected even though it is not decorated with the Injected attribute.</p>\n\n<p>My current workaround for this is to remove CastleWindsor's PropertiesDependenciesModelInspector and replace it with an implementation that forces IsOptional to be false. It works but it repeats a lot of CW's code. I'd prefer to use the simple approach above if I can only get it to work!</p>\n"}, {"tags": ["c#", "json", "json.net"], "answers": [{"tags": [], "owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "is_accepted": true, "score": 9, "last_activity_date": 1534362456, "last_edit_date": 1534362456, "creation_date": 1534362052, "answer_id": 51865346, "question_id": 51865305, "link": "https://stackoverflow.com/questions/51865305/getting-error-deserialising-json-to-listt/51865346#51865346", "title": "Getting error deserialising JSON to List&lt;T&gt;", "body": "<p>Your Json is <em>not</em> a <code>List&lt;Product&gt;</code>, its an object with a single property called <code>records</code> which <em>is</em> a <code>List&lt;Product&gt;</code>.  </p>\n\n<p>So your actual C# model is this:</p>\n\n<pre><code>public class RootObject\n{\n    public List&lt;Product&gt; records { get; set; }\n}\n</code></pre>\n\n<p>And you deserialize like this:</p>\n\n<pre><code>RootObject productsRoot = JsonConvert.DeserializeObject&lt;RootObject&gt;(content);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 938, "user_id": 4380513, "user_type": "registered", "profile_image": "https://graph.facebook.com/553865196/picture?type=large", "display_name": "Zakk Diaz", "link": "https://stackoverflow.com/users/4380513/zakk-diaz"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1534362131, "post_id": 51865358, "comment_id": 90682916, "body": "Fair enough, you beat me to the alternative of building a more complex object. I was in the middle of that piece when your post popped up :) I didn&#39;t feel like trying to answer something that was already posted and I didn&#39;t want to delete what I had already done since it wasn&#39;t touched on by your post."}], "tags": [], "owner": {"reputation": 938, "user_id": 4380513, "user_type": "registered", "profile_image": "https://graph.facebook.com/553865196/picture?type=large", "display_name": "Zakk Diaz", "link": "https://stackoverflow.com/users/4380513/zakk-diaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1534362488, "last_edit_date": 1534362488, "creation_date": 1534362085, "answer_id": 51865358, "question_id": 51865305, "link": "https://stackoverflow.com/questions/51865305/getting-error-deserialising-json-to-listt/51865358#51865358", "title": "Getting error deserialising JSON to List&lt;T&gt;", "body": "<p>The problem is your json structure. Below is an example of a json array - notice i removed the property \"records\". </p>\n\n<pre><code>[\n    {\n        \"id\": \"60\",\n        \"name\": \"Rolex Watch\",\n        \"description\": \"Luxury watch.\",\n        \"price\": \"25000\",\n        \"category_id\": \"1\",\n        \"category_name\": \"Fashion\"\n    },\n    {\n        \"id\": \"48\",\n        \"name\": \"Bristol Shoes\",\n        \"description\": \"Awesome shoes.\",\n        \"price\": \"999\",\n        \"category_id\": \"5\",\n        \"category_name\": \"Movies\"\n    },\n    {\n        \"id\": \"42\",\n        \"name\": \"Nike Shoes for Men\",\n        \"description\": \"Nike Shoes\",\n        \"price\": \"12999\",\n        \"category_id\": \"3\",\n        \"category_name\": \"Motors\"\n    }\n]  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 6806901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e1be615b36d714d0feee8e75c658e98?s=128&d=identicon&r=PG&f=1", "display_name": "David Wimbley", "link": "https://stackoverflow.com/users/6806901/david-wimbley"}, "is_accepted": false, "score": 2, "last_activity_date": 1534362469, "last_edit_date": 1534362469, "creation_date": 1534362128, "answer_id": 51865370, "question_id": 51865305, "link": "https://stackoverflow.com/questions/51865305/getting-error-deserialising-json-to-listt/51865370#51865370", "title": "Getting error deserialising JSON to List&lt;T&gt;", "body": "<p>The issue is that your response JSON you've provided is an object which contains a list, but you are trying to deserialize the data into a straight list. I think all you need to do is add a second class which contains the list into your code, then deserialize using that list.</p>\n\n<pre><code>public class Product\n{\n    public int id { get; set; }\n    public string name { get; set; }\n    public string description { get; set; }\n    public decimal price { get; set; }\n    public int category_id { get; set; }\n    public string category_name { get; set; }\n}\n\npublic class RootProduct\n{\n    public List&lt;Product&gt; Products {get;set;}\n}\n</code></pre>\n\n<p>Then you change your deserialization portion from List to</p>\n\n<pre><code>RootProduct response = JsonConvert.DeserializeObject&lt;RootProduct&gt;(content);\n</code></pre>\n\n<p>The usage would then simply be products. response.Products to access the list of items.</p>\n"}, {"tags": [], "owner": {"reputation": 4607, "user_id": 5361412, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/NntGT.png?s=128&g=1", "display_name": "Kolob Canyon", "link": "https://stackoverflow.com/users/5361412/kolob-canyon"}, "is_accepted": false, "score": 0, "last_activity_date": 1600374866, "creation_date": 1600374866, "answer_id": 63945846, "question_id": 51865305, "link": "https://stackoverflow.com/questions/51865305/getting-error-deserialising-json-to-listt/63945846#63945846", "title": "Getting error deserialising JSON to List&lt;T&gt;", "body": "<p>Given this data</p>\n<pre><code>[\n    {\n        &quot;id&quot;: &quot;60&quot;,\n        &quot;name&quot;: &quot;Rolex Watch&quot;,\n        &quot;description&quot;: &quot;Luxury watch.&quot;,\n        &quot;price&quot;: &quot;25000&quot;,\n        &quot;category_id&quot;: &quot;1&quot;,\n        &quot;category_name&quot;: &quot;Fashion&quot;\n    },\n    {\n        &quot;id&quot;: &quot;48&quot;,\n        &quot;name&quot;: &quot;Bristol Shoes&quot;,\n        &quot;description&quot;: &quot;Awesome shoes.&quot;,\n        &quot;price&quot;: &quot;999&quot;,\n        &quot;category_id&quot;: &quot;5&quot;,\n        &quot;category_name&quot;: &quot;Movies&quot;\n    },\n    {\n        &quot;id&quot;: &quot;42&quot;,\n        &quot;name&quot;: &quot;Nike Shoes for Men&quot;,\n        &quot;description&quot;: &quot;Nike Shoes&quot;,\n        &quot;price&quot;: &quot;12999&quot;,\n        &quot;category_id&quot;: &quot;3&quot;,\n        &quot;category_name&quot;: &quot;Motors&quot;\n    }\n]  \n</code></pre>\n<p>And this class definition</p>\n<pre><code>public class Order\n{\n    public int id { get; set; }\n    public string name { get; set; }\n    public string description { get; set; }\n    public string price { get; set; }\n    public string category_id { get; set; }\n    public string category_name { get; set; }\n}\n</code></pre>\n<p>The code to convert it from JSON to a C# <code>List&lt;Order&gt;</code> is:</p>\n<pre><code>public static List&lt;Order&gt; Map(string json)\n{\n    return Newtonsoft.Json.JsonConvert.DeserializeObject&lt;List&lt;Order&gt;&gt;(json);\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6221929"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6901, "favorite_count": 1, "accepted_answer_id": 51865346, "answer_count": 4, "score": 2, "last_activity_date": 1606403740, "creation_date": 1534361904, "last_edit_date": 1606403740, "question_id": 51865305, "link": "https://stackoverflow.com/questions/51865305/getting-error-deserialising-json-to-listt", "title": "Getting error deserialising JSON to List&lt;T&gt;", "body": "<p>I want to deserialize this json to a List of Product objects but i get this error:</p>\n\n<blockquote>\n  <p>Newtonsoft.Json.JsonSerializationException: Cannot deserialize the current JSON object (e.g. {\"name\":\"value\"}) into type 'System.Collections.Generic.List`1[ShoppingList.Product]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly.\n  To fix this error either change the JSON to a JSON array (e.g. [1,2,3]) or change the deserialized type so that it is a normal .NET type (e.g. not a primitive type like integer, not a collection type like an array or List) that can be deserialized from a JSON object. JsonObjectAttribute can also be added to the type to force it to deserialize from a JSON object.</p>\n</blockquote>\n\n<p>This is my code:</p>\n\n<pre><code>{\n    \"records\": [\n        {\n            \"id\": \"60\",\n            \"name\": \"Rolex Watch\",\n            \"description\": \"Luxury watch.\",\n            \"price\": \"25000\",\n            \"category_id\": \"1\",\n            \"category_name\": \"Fashion\"\n        },\n        {\n            \"id\": \"48\",\n            \"name\": \"Bristol Shoes\",\n            \"description\": \"Awesome shoes.\",\n            \"price\": \"999\",\n            \"category_id\": \"5\",\n            \"category_name\": \"Movies\"\n        },\n        {\n            \"id\": \"42\",\n            \"name\": \"Nike Shoes for Men\",\n            \"description\": \"Nike Shoes\",\n            \"price\": \"12999\",\n            \"category_id\": \"3\",\n            \"category_name\": \"Motors\"\n        }\n    ]   \n}\n\npublic class Product\n{\n    public int id { get; set; }\n    public string name { get; set; }\n    public string description { get; set; }\n    public decimal price { get; set; }\n    public int category_id { get; set; }\n    public string category_name { get; set; }\n}\n\npublic async Task&lt;List&lt;Product&gt;&gt; GetProductsAsync()\n    {\n        Products = new List&lt;Product&gt;();\n\n        var uri = new Uri(\"https://hostname/api/product/read.php\");\n\n        try\n        {\n            var response = await client.GetAsync(uri);\n            if (response.IsSuccessStatusCode)\n            {\n                var content = await response.Content.ReadAsStringAsync();\n                Products = JsonConvert.DeserializeObject&lt;List&lt;Product&gt;&gt;(content);\n            }\n        }\n        catch (Exception )\n        {\n            throw;\n        }\n\n        return Products;\n    }\n</code></pre>\n"}, {"tags": ["c#", "multithreading", "class", "parallel-processing", "mono"], "comments": [{"owner": {"reputation": 36762, "user_id": 869621, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7ab9817b53b7e7b0e735528bc9c2372?s=128&d=identicon&r=PG", "display_name": "Kevin Gosse", "link": "https://stackoverflow.com/users/869621/kevin-gosse"}, "edited": false, "score": 0, "creation_date": 1534369605, "post_id": 51865297, "comment_id": 90685831, "body": "Is the program taking significantly longer to run on Linux? Or is CPU usage the only visible impact?"}, {"owner": {"reputation": 83, "user_id": 4462088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136508319726728/picture?type=large", "display_name": "Fredrik Anfinsen", "link": "https://stackoverflow.com/users/4462088/fredrik-anfinsen"}, "reply_to_user": {"reputation": 36762, "user_id": 869621, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7ab9817b53b7e7b0e735528bc9c2372?s=128&d=identicon&r=PG", "display_name": "Kevin Gosse", "link": "https://stackoverflow.com/users/869621/kevin-gosse"}, "edited": false, "score": 0, "creation_date": 1534370909, "post_id": 51865297, "comment_id": 90686216, "body": "It also takes longer time to run"}, {"owner": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1534396718, "post_id": 51865297, "comment_id": 90691523, "body": "@FredrikAnfinsen What version of Mono are you using as I definitely do not see that when using <code>Parallel.ForEach</code>. What exactly does your Parallel.ForEach look like. Also please do not user images for code, paste the formatted code directly into your question (images are not searchable, indexable, readable on different screen sizes, limits accessibly, etc..)"}, {"owner": {"reputation": 83, "user_id": 4462088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136508319726728/picture?type=large", "display_name": "Fredrik Anfinsen", "link": "https://stackoverflow.com/users/4462088/fredrik-anfinsen"}, "reply_to_user": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1534403360, "post_id": 51865297, "comment_id": 90694180, "body": "@SushiHangover I am using <code>Mono JIT compiler version 5.14.0.177</code>. The <code>Parallel.ForEach</code> function is a system function under <code>System.Threading.Tasks</code>."}, {"owner": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1534404610, "post_id": 51865297, "comment_id": 90694899, "body": "@FredrikAnfinsen I understand what Parallel.ForEach is, what I am asking it how have you used it to break your RemoveDegeneratedTriangles method into parallel threads?"}, {"owner": {"reputation": 83, "user_id": 4462088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136508319726728/picture?type=large", "display_name": "Fredrik Anfinsen", "link": "https://stackoverflow.com/users/4462088/fredrik-anfinsen"}, "reply_to_user": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1534406134, "post_id": 51865297, "comment_id": 90695764, "body": "@SushiHangover My misunderstanding. I have updated the code about where you can see how we are using Parallel.ForEach."}, {"owner": {"reputation": 83, "user_id": 4462088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136508319726728/picture?type=large", "display_name": "Fredrik Anfinsen", "link": "https://stackoverflow.com/users/4462088/fredrik-anfinsen"}, "reply_to_user": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1534411078, "post_id": 51865297, "comment_id": 90698611, "body": "@SushiHangover I have updated the question with a small code snippet to reproduce the problem we had."}, {"owner": {"reputation": 83, "user_id": 4462088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136508319726728/picture?type=large", "display_name": "Fredrik Anfinsen", "link": "https://stackoverflow.com/users/4462088/fredrik-anfinsen"}, "reply_to_user": {"reputation": 36762, "user_id": 869621, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7ab9817b53b7e7b0e735528bc9c2372?s=128&d=identicon&r=PG", "display_name": "Kevin Gosse", "link": "https://stackoverflow.com/users/869621/kevin-gosse"}, "edited": false, "score": 0, "creation_date": 1534411090, "post_id": 51865297, "comment_id": 90698621, "body": "@KevinGosse The question has been updated"}, {"owner": {"reputation": 36762, "user_id": 869621, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7ab9817b53b7e7b0e735528bc9c2372?s=128&d=identicon&r=PG", "display_name": "Kevin Gosse", "link": "https://stackoverflow.com/users/869621/kevin-gosse"}, "edited": false, "score": 1, "creation_date": 1534457641, "post_id": 51865297, "comment_id": 90723486, "body": "I suspect the JIT is smart enough to remove the useless loop when you remove the <code>var test_triangle = new Triangle();</code> line, thus making the iteration complete faster. I&#39;m not sure that&#39;s enough to explain the difference in CPU usage though"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4462088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136508319726728/picture?type=large", "display_name": "Fredrik Anfinsen", "link": "https://stackoverflow.com/users/4462088/fredrik-anfinsen"}, "edited": false, "score": 0, "creation_date": 1535445469, "post_id": 51931302, "comment_id": 91057220, "body": "Thank you for the reply. This was just a small example to reproduce the problem we have for a bigger project. We are building for release on the big project which gives the same bad utilization of cores as for a debug build."}], "tags": [], "owner": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "is_accepted": false, "score": 0, "last_activity_date": 1534775545, "last_edit_date": 1534775545, "creation_date": 1534769916, "answer_id": 51931302, "question_id": 51865297, "link": "https://stackoverflow.com/questions/51865297/c-mono-not-utilizing-all-cores/51931302#51931302", "title": "C# (mono) not utilizing all cores", "body": "<p>You should never ever profile a debug build, because in a debug build is a lot of code which is removed in a release build and that gives you another behavior than a release build does.</p>\n\n<p>Your creation of new Triangle is basically useless because it will be removed in a release build, because there's no result which will be used.</p>\n\n<p>I've no mono so I tried to reproduce your described behavior on a windows machine (.NET Core 2.1). I could see your described behavior too with a debug build.\nWith a release build i get nearly 94% cpu usage and with a debug build nearly 56% with the \nline</p>\n\n<pre><code>var test_triangle = new Triangle();\n</code></pre>\n\n<p>I expect this happens because in a debug build the line </p>\n\n<pre><code>var test_triangle = new Triangle();\n</code></pre>\n\n<p>is executed. While in a release build it's optimized away, which could lead to optimize the whole for loop away, than the compiler can optimize the second for loop and so on, which will not be done in a debug build. The generated IL code has to be checked to verify this, I'm too lazy to do it now. :)</p>\n\n<p>So first you should profile a release build and second to get a better test you should do something inside the inner loop which you will use at the end of the programm. To do so the optimizer can't remove the loop.</p>\n"}], "owner": {"reputation": 83, "user_id": 4462088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136508319726728/picture?type=large", "display_name": "Fredrik Anfinsen", "link": "https://stackoverflow.com/users/4462088/fredrik-anfinsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1534775545, "creation_date": 1534361879, "last_edit_date": 1534411002, "question_id": 51865297, "link": "https://stackoverflow.com/questions/51865297/c-mono-not-utilizing-all-cores", "title": "C# (mono) not utilizing all cores", "body": "<p>We are running a C# project in Mono where we want to utilize multicore CPUs. We are using <code>System.Threading.Tasks.Parallel.For</code> to do so. But we see in <code>$ top</code> that Mono only uses 350% of CPU when we are running on a 8 core laptop (which is weird, we expect 700 - 800 %).</p>\n\n<p>We have tried to debug it without any luck but we found something weird. But managed to reproduce the problem with this code snippet:</p>\n\n<pre><code>using System;\nusing System.Threading.Tasks;\n\nnamespace Cognite.OptimizerMain\n{\n  public class Triangle\n  {\n  }\n\n  internal static class Program\n  {\n    private static void Main(string[] args)\n    {\n      Console.WriteLine(\"Starting parallel work\");\n      double sum = 0.0;\n      Parallel.For(0, 5000, node =&gt;\n      {\n        for (var k = 0; k &lt; 1000000; k++)\n        {\n          sum += Math.Abs(Math.Cos(k));\n          for (var j = 0; j &lt; 5000; j++)\n          {\n            // var test_triangle = new Triangle();\n          }\n        }\n      });\n      Console.WriteLine(sum);\n      Console.WriteLine(\"Ended parallel work\");\n    }\n  }\n}\n</code></pre>\n\n<p>If you run it as it is it utilize 700% - 800% of the CPU. If you uncomment the line with <code>test_triangle</code> then we only utilize 350% of the CPU.</p>\n\n<p>We are using this build command: <code>msbuild Optimizer.sln /p:Configuration=Debug</code> and running the program like this <code>mono program.exe</code></p>\n\n<p>Can there be any problem with memory allocation / garbage collection?</p>\n"}, {"tags": ["c#", "windows-installer", "installscript-msi"], "comments": [{"owner": {"reputation": 2034, "user_id": 2486496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rpd3r.jpg?s=128&g=1", "display_name": "gravity", "link": "https://stackoverflow.com/users/2486496/gravity"}, "edited": false, "score": 0, "creation_date": 1534364610, "post_id": 51865252, "comment_id": 90683986, "body": "This part: <code>&quot;&#47;s &#47; f1\\&quot;.\\\\Unin...</code>.  Did you intend for a space between the <code>&#47;</code> and the <code>f1</code> where it isn&#39;t in your manually run command-line example?"}, {"owner": {"reputation": 704, "user_id": 3171260, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c4e056b60e5418f849f0ca409ea3f73f?s=128&d=identicon&r=PG&f=1", "display_name": "Ben_G", "link": "https://stackoverflow.com/users/3171260/ben-g"}, "reply_to_user": {"reputation": 2034, "user_id": 2486496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rpd3r.jpg?s=128&g=1", "display_name": "gravity", "link": "https://stackoverflow.com/users/2486496/gravity"}, "edited": false, "score": 0, "creation_date": 1534366732, "post_id": 51865252, "comment_id": 90684840, "body": "Nope - it got in there copying and pasting from batch to c# for some reason. There was another space added that I caught but this one slipped by. Thanks - it seems to work now - great eye seeing that!"}], "answers": [{"tags": [], "owner": {"reputation": 34253, "user_id": 129130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/FJpdt.gif?s=128&g=1", "display_name": "Stein &#197;smul", "link": "https://stackoverflow.com/users/129130/stein-%c3%85smul"}, "is_accepted": false, "score": 1, "last_activity_date": 1596444568, "last_edit_date": 1596444568, "creation_date": 1534396050, "answer_id": 51869939, "question_id": 51865252, "link": "https://stackoverflow.com/questions/51865252/uninstalling-an-installshield-installscript-msi-program-using-c-silently/51869939#51869939", "title": "Uninstalling an InstallShield Installscript MSI program using C# silently", "body": "<p>There are some further instructions towards the bottom of this PDF: <a href=\"https://resources.flexera.com/web/pdf/archive/silent_installs.pdf\" rel=\"nofollow noreferrer\">https://resources.flexera.com/web/pdf/archive/silent_installs.pdf</a></p>\n<pre><code>setup.exe /s /f1&quot;C:\\sample\\uninstall.iss&quot; /f2&quot;C:\\sample\\uninstall.log&quot;\n</code></pre>\n<p>Did you try it manually with full paths for both the <strong><code>/f1</code></strong> and <strong><code>/f2</code></strong> parameters?</p>\n<p>I am actively trying to forget how to write batch files, but I think you can get the folder where the batch file is running from like this:</p>\n<pre><code>set here=%~dp0\ncd %here%\n</code></pre>\n<p>Could changing the setup.exe file name cause problems? Maybe you can try without changing the name of the setup.exe and see if that completes?</p>\n<p>Could passing the command to <strong><code>cmd.exe</code></strong> via the /c parameter be an idea? (&quot;<em>carries out the command specified by the string and then terminates</em>&quot;):</p>\n<pre><code>cmd.exe /c &quot;%here%\\setup.exe /s /f1&quot;C:\\sample\\uninstall.iss&quot; /f2&quot;C:\\sample\\uninstall.log&quot;&quot;\n</code></pre>\n<p>Maybe try adding the <a href=\"https://www.itninja.com/question/what-does-the-sms-in-this-script-mean-setup-exe-s-sms-v-qn\" rel=\"nofollow noreferrer\"><strong>/SMS switch</strong></a> to ensure that the setup.exe does not exit prematurely before the actual uninstall is complete. As rumor has it this /SMS switch is not needed for late-generation Installshield setup.exe, but it is needed for older versions.</p>\n"}, {"tags": [], "owner": {"reputation": 704, "user_id": 3171260, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c4e056b60e5418f849f0ca409ea3f73f?s=128&d=identicon&r=PG&f=1", "display_name": "Ben_G", "link": "https://stackoverflow.com/users/3171260/ben-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1534432485, "creation_date": 1534432485, "answer_id": 51880355, "question_id": 51865252, "link": "https://stackoverflow.com/questions/51865252/uninstalling-an-installshield-installscript-msi-program-using-c-silently/51880355#51880355", "title": "Uninstalling an InstallShield Installscript MSI program using C# silently", "body": "<p>As Gravity pointed out the problem was a space between the / and the f1. It got added somehow during the cut &amp; paste.</p>\n"}], "owner": {"reputation": 704, "user_id": 3171260, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c4e056b60e5418f849f0ca409ea3f73f?s=128&d=identicon&r=PG&f=1", "display_name": "Ben_G", "link": "https://stackoverflow.com/users/3171260/ben-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1293, "favorite_count": 0, "accepted_answer_id": 51880355, "answer_count": 2, "score": 0, "last_activity_date": 1596444568, "creation_date": 1534361678, "last_edit_date": 1534510063, "question_id": 51865252, "link": "https://stackoverflow.com/questions/51865252/uninstalling-an-installshield-installscript-msi-program-using-c-silently", "title": "Uninstalling an InstallShield Installscript MSI program using C# silently", "body": "<p>This is going to be very specific to InstallShield, so I doubt anyone has dealt with this before, but I wrote a batch file to uninstall prior versions of our product and it doesn't work. (We always uninstall prior versions prior to an install/upgrade since the Upgrades in InstallShield don't seem to work). Uninstalling Installscript MSI projects is very different from typical uninstalls in that you need to \"record\" an uninstall and store the results in a file i.e.:</p>\n\n<pre><code>setup.exe /x /r /f1\"C:\\temp\\UNINST.ISS\"\n</code></pre>\n\n<p>This stores the uninstall image in c:\\temp\\UNINST.ISS and then you need to pass that to the uninstaller to get the product to uninstall:</p>\n\n<pre><code>setup.exe /s /f1\"UNINST.ISS\"\n</code></pre>\n\n<p>So I did this for all prior versions of our product and then wrote a batch script (with the product code being {7F2A0A82-BB08-4062-85F8-F21BFC3F3708} to do the uninstalls that looks like this:</p>\n\n<pre><code>echo Uninstalling 5.3.0\npause\nif exist \"C:\\Program Files (x86)\\InstallShield Installation Information\\ {7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup.exe\" (\n    del /q \"C:\\Program Files (x86)\\InstallShield Installation Information\\{7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup-5.3.0.exe\"\n    copy /y \"C:\\Program Files (x86)\\InstallShield Installation Information\\{7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup.exe\" \"C:\\Program Files (x86)\\InstallShield Installation Information\\{7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup-5.3.0.exe\"\n    cls\n    echo Uninstalling 5.3.0\n    \"C:\\Program Files (x86)\\InstallShield Installation Information\\{7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup-5.3.0.exe\" /s /f1\".\\Uninstall response files\\5.3.0\\UNINST-5.3.0.ISS\"\n    :wait1\n        timeout /t 3 /NOBREAK &gt; nul\n        tasklist | find /i \"Setup-5.3.0.exe\" &gt;nul 2&gt;nul\n        if not errorlevel 1 goto wait1\n)\n\necho Uninstalling 5.3.1...\n</code></pre>\n\n<p>The problem is that it doesn't work. If I execute the uninstall from an elevated CMD window it works fine:</p>\n\n<pre><code>\"C:\\Program Files (x86)\\InstallShield Installation Information\\{7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup-5.3.0.exe\" /s /f1\".\\Uninstall response files\\5.3.0\\UNINST-5.3.0.ISS\"\n</code></pre>\n\n<p>But when I execute the batch script it just seems to pass right by the uninstall and not do anything. SO I thought I'd try to write a simple C# program to do this but that's not working either:</p>\n\n<pre><code>Console.Clear();\nConsole.WriteLine(\"Uninstalling 5.3.0\");\nif (File.Exists(@\"C:\\Program Files (x86)\\InstallShield Installation Information\\{7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup.exe\"))\n    {\n        File.Copy(@\"C:\\Program Files (x86)\\InstallShield Installation Information\\{7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup.exe\", @\"C:\\Program Files (x86)\\InstallShield Installation Information\\{7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup-5.3.0.exe\", true);\n\n        ProcessStartInfo startInfo = new ProcessStartInfo();\n        startInfo.FileName = @\"C:\\Program Files (x86)\\InstallShield Installation Information\\{7F2A0A82-BB08-4062-85F8-F21BFC3F3708}\\setup-5.3.0.exe\";\n        Directory.SetCurrentDirectory(@\"..\\..\\..\\\");\n        startInfo.Arguments = \"/s / f1\\\".\\\\Uninstall response files\\\\5.3.0\\\\UNINST-5.3.0.ISS\\\"\";\n        startInfo.UseShellExecute = false;\n        startInfo.WindowStyle = ProcessWindowStyle.Normal;\n        using (Process process = new Process())\n        {\n            process.StartInfo = startInfo;\n            process.Start();\n            process.WaitForExit();\n        }\n    }\n</code></pre>\n\n<p>I've tried debugging this and confirmed that the current directory is correct (using <code>Directory.GetCurrentDirectory()</code>), but I get this error:</p>\n\n<pre><code>process.StandardError' threw an exception of type 'System.InvalidOperationException'    System.IO.StreamReader {System.InvalidOperationException}\n</code></pre>\n"}, {"tags": ["c#", "html", "sql"], "comments": [{"owner": {"reputation": 192, "user_id": 7320670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHkkti_b39I/AAAAAAAAAAI/AAAAAAAAHsw/DJMm4iH7PCY/photo.jpg?sz=128", "display_name": "Rutger Vk", "link": "https://stackoverflow.com/users/7320670/rutger-vk"}, "edited": false, "score": 1, "creation_date": 1534365639, "post_id": 51865251, "comment_id": 90684393, "body": "I am not entirely sure what you are trying to do here? why dont use EF? are you sure the SP is working?"}, {"owner": {"reputation": 1, "user_id": 6271445, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201629747262546/picture?type=large", "display_name": "Gordy McElroy", "link": "https://stackoverflow.com/users/6271445/gordy-mcelroy"}, "reply_to_user": {"reputation": 192, "user_id": 7320670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHkkti_b39I/AAAAAAAAAAI/AAAAAAAAHsw/DJMm4iH7PCY/photo.jpg?sz=128", "display_name": "Rutger Vk", "link": "https://stackoverflow.com/users/7320670/rutger-vk"}, "edited": false, "score": 0, "creation_date": 1534420177, "post_id": 51865251, "comment_id": 90703873, "body": "I&#39;m trying to populate a Gridview with selections made on the form.  The RO field is a checkboxlist and I want all the values selected in it, to be associated with the @RO variable that I can pass to the stored procedure."}, {"owner": {"reputation": 1, "user_id": 6271445, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201629747262546/picture?type=large", "display_name": "Gordy McElroy", "link": "https://stackoverflow.com/users/6271445/gordy-mcelroy"}, "reply_to_user": {"reputation": 192, "user_id": 7320670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHkkti_b39I/AAAAAAAAAAI/AAAAAAAAHsw/DJMm4iH7PCY/photo.jpg?sz=128", "display_name": "Rutger Vk", "link": "https://stackoverflow.com/users/7320670/rutger-vk"}, "edited": false, "score": 0, "creation_date": 1534429904, "post_id": 51865251, "comment_id": 90710481, "body": "Sorry what is EF?  Also, the stored procedure works."}, {"owner": {"reputation": 192, "user_id": 7320670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHkkti_b39I/AAAAAAAAAAI/AAAAAAAAHsw/DJMm4iH7PCY/photo.jpg?sz=128", "display_name": "Rutger Vk", "link": "https://stackoverflow.com/users/7320670/rutger-vk"}, "edited": false, "score": 0, "creation_date": 1534440062, "post_id": 51865251, "comment_id": 90716255, "body": "EF is Entity Framework, an ORM which is commonly used for database actions in the .NET framework. It makes life a lot easier"}], "owner": {"reputation": 1, "user_id": 6271445, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201629747262546/picture?type=large", "display_name": "Gordy McElroy", "link": "https://stackoverflow.com/users/6271445/gordy-mcelroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534369870, "creation_date": 1534361677, "last_edit_date": 1534369870, "question_id": 51865251, "link": "https://stackoverflow.com/questions/51865251/c-asp-net-query-by-form-how-to-get-multiple-list-items-from-a-checkboxlist-int", "title": "C# ASP.NET query by form: How to get multiple list items from a checkboxlist into SQL query for output to Gridview", "body": "<p>on click event for method to execute LOAD_CHECKLIST_Click:</p>\n\n<pre><code>&lt;asp:Button ID=\"Button234\" UseSubmitBehavior=\"true\" runat=\"server\" Text=\"Preview Assessment List\" Cssclass=\"btn btn-2925c btn-sm\" onclick=\"LoadChecklist_Click\"/&gt;  \n</code></pre>\n\n<p>codebehind, load Checklist takes parameters from four controls CheckboxList:</p>\n\n<pre><code>public void LoadChecklist_Click(Object sender, System.EventArgs e)\n{\n    string strConnString =  System.Configuration.ConfigurationManager.ConnectionStrings      [\"SQLDEV1\"].ConnectionString;\n    var SearchResultsTable = new DataTable();\n    var con = new SqlConnection(strConnString);\n    var cmd = new SqlCommand(\"sp_get_QUADRA_CHECKLIST\", con);\n    cmd.CommandType = CommandType.StoredProcedure;\n    var adapter = new SqlDataAdapter(cmd);\n    con.Open();\n    SqlParameter param = new SqlParameter(\"@RO\", lbRO);\n\n    var texts = lbRO.Items\n        .Cast&lt;ListItem&gt;()\n        .Select(item =&gt; item.Text)\n        .ToString();\n\n    cmd.Parameters.Add(\"@AP_DEV\", SqlDbType.Bit).Value = CbAPDev.Checked;\n    cmd.Parameters.Add(\"@PROD_DEV\", SqlDbType.Bit).Value =     cbProdDev.Checked;\n    cmd.Parameters.Add(\"@SIPA\", SqlDbType.NVarChar, (255)).Value =  ddlSIPA.Text;\n\n    for (int i = 0; i &lt; lbRO.Items.Count - 1; i++)\n    {\n        if(lbRO.Items.Count &gt; 0)\n        {\n            List&lt;string&gt; selectedValues = lbRO.Items.Cast&lt;ListItem&gt;().Where(li =&gt; li.Selected).Select(li =&gt; li.Value).ToList();\n            //cmd.Parameters.Add(\"@RO\", SqlDbType.NVarChar, (255)).Value = selectedValues;\n        }\n        else\n        {\n            Response.Write(\"An error has occured!\");\n            con.Close();\n        }\n\n        //cmd.Parameters.Add(\"@RO\", SqlDbType.Structured).Value = dtSIPA;\n        try\n        {\n            adapter.Fill(SearchResultsTable);\n            GV1.DataSource = SearchResultsTable;\n            GV1.DataBind();\n        }\n        catch (System.Data.SqlClient.SqlException ex)\n        {\n            Response.Write(ex);\n        }\n        finally\n        {\n            con.Close();\n        }\n    }\n}\n</code></pre>\n\n<p>SQL parameterized query for checkboxlist value of RO:</p>\n\n<pre><code>ALTER PROCEDURE [dbo].[sp_get_QUADRA_CHECKLIST] @AP_DEV bit = '',     @PROD_DEV     bit = '', @SIPA nvarchar(255) = '', @RO nvarchar(255) = '' AS\nSELECT  cl.SIPA\n    , cl.RO\n    , cl.QUES_ID\n    , 1 AS REV\n    , cl.DFQRO AS QDRO\n    , cl.QUADRA_QUES\n    , '' AS QUES_ANSWER\n    , ''AS COMMENTS\nFROM Tbl_QUADRA_CL cl\nWHERE (cl.RO = @RO or @RO is NULL)--(cl.RO IN(SELECT RO FROM @RO) OR (SELECT COUNT(RO) FROM @RO) = 0)\nAND (cl.SIPA LIKE('%@SIPA%') OR @SIPA IS NULL)\nAND (cl.AP_DEV = @AP_DEV)\nAND (cl.PROD_DEV = @PROD_DEV)\nGROUP BY \n cl.SIPA\n, cl.RO\n, cl.QUES_ID\n, cl.DFQRO\n, cl.QUADRA_QUES\n</code></pre>\n"}, {"tags": ["c#", "r", "json", "tidyverse", "jsonlite"], "comments": [{"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 1, "creation_date": 1534361337, "post_id": 51865172, "comment_id": 90682582, "body": "Create a model that represents your data and then use <code>Json.NET</code> for deserialization/serializtion"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 5079780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6f9128a513afd6797ca74aceef2e9f34?s=128&d=identicon&r=PG&f=1", "display_name": "Mikey", "link": "https://stackoverflow.com/users/5079780/mikey"}, "edited": false, "score": 0, "creation_date": 1534867910, "post_id": 51865488, "comment_id": 90855891, "body": "PM&gt; Install-Package Newtonsoft.Json Install-Package : Project &#39;Default&#39; is not found. At line:1 char:1 + Install-Package Newtonsoft.Json + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~     + CategoryInfo          : ObjectNotFound: (Default:String) [Install-Package], ItemNotFoundException     + FullyQualifiedErrorId : NuGetProjectNotFound,NuGet.PackageManagement.PowerShellCmdle&zwnj;&#8203;ts.InstallPackageCom&zwnj;&#8203;mand  I&#39;ve tried <a href=\"https://stackoverflow.com/questions/10130333/cant-install-packages-with-nuget-500-internal-server-error\" title=\"cant install packages with nuget 500 internal server error\">stackoverflow.com/questions/10130333/&hellip;</a>"}, {"owner": {"reputation": 2252, "user_id": 7510463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWE8T.jpg?s=128&g=1", "display_name": "Fabulous", "link": "https://stackoverflow.com/users/7510463/fabulous"}, "reply_to_user": {"reputation": 145, "user_id": 5079780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6f9128a513afd6797ca74aceef2e9f34?s=128&d=identicon&r=PG&f=1", "display_name": "Mikey", "link": "https://stackoverflow.com/users/5079780/mikey"}, "edited": false, "score": 0, "creation_date": 1535014202, "post_id": 51865488, "comment_id": 90913155, "body": "When running that command, ensure that you have the project you wish to add the package to selected. I&#39;ll update my answer to reflect that. And it appears the question you linked to is based on a different problem (a server issue at the time of asking)"}], "tags": [], "owner": {"reputation": 2252, "user_id": 7510463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWE8T.jpg?s=128&g=1", "display_name": "Fabulous", "link": "https://stackoverflow.com/users/7510463/fabulous"}, "is_accepted": false, "score": 4, "last_activity_date": 1535014349, "last_edit_date": 1535014349, "creation_date": 1534362613, "answer_id": 51865488, "question_id": 51865172, "link": "https://stackoverflow.com/questions/51865172/c-json-parse-instead-of-r/51865488#51865488", "title": "C# JSON parse instead of R", "body": "<p>A quick way to explore this structure and get started with json in C# is to copy the json packet as you expect it to be. Taking what you have in your question as an example, copy the json into the clipboard and create a new C# code file and write your default namespace only as follows:</p>\n\n<pre><code>namespace Data\n{\n    // Next step will be here\n}\n</code></pre>\n\n<p>After that, place your cursor between the curly braces, click the edit menu, then paste special, <strong>JSON as Classes</strong></p>\n\n<p>This will generate some classes for you that match the JSON schema you have. In this case, there's a Class1 because it cannot determine the name of the object with the <code>toplevel</code>, <code>secondlevel</code> etc properties. You can give it a more meaningful name for your case.</p>\n\n<p>Open the package manager console (if you can't see it in VS, press Ctrl+Q and type \"Package Manager Console\"). In the package manager, type the following</p>\n\n<pre><code>Install-Package Newtonsoft.Json\n</code></pre>\n\n<p>after ensuring that you have your solution saved and specifying the project you want to add that package to as your default project as in the screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OHY1p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OHY1p.png\" alt=\"Screenshot of Package Manager Console with default project selected and highlighted.\"></a></p>\n\n<p>and wait for it to complete. You'll now have the ability to deserialize JSON you have into your classes. Go to where you want to do the processing and type the following...</p>\n\n<pre><code>// at the top of the file...\nusing Newtonsoft.Json;\n\n// where you need to decode it...\nstring jsonData = GetYourJsonDataFromAFileOrAPICall(); // replace with how you get the json\nvar items = JsonConvert.DeserializeObject&lt;IEnumerable&lt;MyItem&gt;&gt;(jsonData);\n</code></pre>\n\n<p>At this point, you'll have an <code>IEnumerable&lt;MyItem&gt;</code> (<code>MyItem</code> is what I renamed <code>Class1</code>) representing your json. You can change that to be a list, or array if you want a more specific collection.</p>\n"}], "owner": {"reputation": 145, "user_id": 5079780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6f9128a513afd6797ca74aceef2e9f34?s=128&d=identicon&r=PG&f=1", "display_name": "Mikey", "link": "https://stackoverflow.com/users/5079780/mikey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1535014349, "creation_date": 1534361288, "last_edit_date": 1534366286, "question_id": 51865172, "link": "https://stackoverflow.com/questions/51865172/c-json-parse-instead-of-r", "title": "C# JSON parse instead of R", "body": "<p>Suppose I have a nested json file which looks like this:</p>\n\n<blockquote>\n  <p>[{\"toplevel\":{\"firstleveldata\":{\"id\":12345,\"no\":123}},\"secondleveldata\":{\"fruit\":{\"apples\":\"y\"},\"veg\":{\"small\":{\"gree\":{\"fresh\":{\"available\":3}}}}},\"thirdleveldata\":{\"fruit\":{\"changes\":[{\"itemid\":1,\"subno\":1,\"green\":[],\"red\":[{\"extraid\":2,\"element\":5}]}]}}}]</p>\n</blockquote>\n\n<p>and the following R code which can parse the it to a nice data.frame except for the last one (if that can be fixed to that's a bonus)</p>\n\n<p>what would be neat altenative using C# look like? It's not something i've ever coded in before so wouldn't know where to start.  </p>\n\n<p>The end goal being to export the nested JSON into a csv, multiple csvs with primary / foreign keys to merge on of necessary.</p>\n\n<p>R code for context.</p>\n\n<pre><code>library(jsonlite)\n\nlibrary(tidyverse)\n\nfun &lt;- function(x)\n       {list(\n#keys\nid = pluck(x,\"toplevel\",\"firstleveldata\",\"id\", .default = NA),\nno = pluck(x,\"toplevel\",\"firstleveldata\",\"no\", .default = NA),\n\napples = pluck(x,\"secondleveldata\",\"fruit\",\"apples\", .default = NA),\nitemid = pluck(x,\"toplevel\",\"thirdleveldata\",\"fruit\",\"changes\",\"itemid\", .default = NA) #doesn't work)}\n\nout&lt;-map_df(list.files(\"my_json_file\",full.names=TRUE),~map_df(fromJSON(txt=., simplifyVector=FALSE), fun))\n\nout\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c#"], "answers": [{"comments": [{"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 0, "creation_date": 1534362159, "post_id": 51865248, "comment_id": 90682924, "body": "There&#39;s a NodaTime based solution <a href=\"https://stackoverflow.com/a/24378695/634824\">here</a>.  Thanks."}], "tags": [], "owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "is_accepted": false, "score": 1, "last_activity_date": 1534361673, "creation_date": 1534361673, "answer_id": 51865248, "question_id": 51865168, "link": "https://stackoverflow.com/questions/51865168/get-daylight-saving-time-info-from-timezoneinfo/51865248#51865248", "title": "Get Daylight Saving Time info from TimeZoneInfo", "body": "<p>As you've observed, <code>TimeZoneInfo</code> doesn't really expose much directly other than conversions of a single instant in time. The rules for any particular time zone are available (via <a href=\"https://docs.microsoft.com/en-gb/dotnet/api/system.timezoneinfo.getadjustmentrules\" rel=\"nofollow noreferrer\"><code>TimeZoneInfo.GetAdjustmentRules</code></a>, but they're hard to work with accurately.</p>\n\n<p>The <a href=\"https://nodatime.org\" rel=\"nofollow noreferrer\">Noda Time project</a> <em>does</em> expose this information: you ask a time zone for the sequence of \"zone intervals\" used between a start point and an end point (via <a href=\"https://nodatime.org/2.3.x/api/NodaTime.DateTimeZone.html#NodaTime_DateTimeZone_GetZoneIntervals_NodaTime_Instant_NodaTime_Instant_\" rel=\"nofollow noreferrer\"><code>DateTimeZone.ZoneIntervals</code></a>). There can be transitions other than into and out of DST; a time zone's standard offset can change, for example. The zone intervals returned cover the interval of time you ask for.</p>\n\n<p>Noda Time is mostly designed to work with the IANA time zones, but you can use the Windows time zones too in the full .NET framework version (not in the .NET Core version at the moment).</p>\n\n<p>Let me know if you'd like a code example - if you can't use Noda Time, it doesn't make much sense to work up the example.</p>\n"}], "owner": {"reputation": 1100, "user_id": 3937941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5642931c64fb512106e59b6ba5989a5f?s=128&d=identicon&r=PG", "display_name": "Zysce", "link": "https://stackoverflow.com/users/3937941/zysce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "closed_date": 1534362117, "answer_count": 1, "score": 3, "last_activity_date": 1534361673, "creation_date": 1534361275, "question_id": 51865168, "link": "https://stackoverflow.com/questions/51865168/get-daylight-saving-time-info-from-timezoneinfo", "closed_reason": "Duplicate", "title": "Get Daylight Saving Time info from TimeZoneInfo", "body": "<p>I need to retrieve the information of the Daylight Saving Time (start date and end date) from a timezone.</p>\n\n<p>You can do that with the class TimeZone but it's deprecated and it only returns the timezone of the computer/server.</p>\n\n<p>You don't have these information in the class TimeZoneInfo, so how to get them ?</p>\n\n<p>Ex:</p>\n\n<pre><code>var tzi = TimeZoneInfo.FindSystemTimeZoneById(\"Eastern Standard Time\");\nConsole.WriteLine(tzi.DaylightName); // I have the name but no info\n\nvar tz = TimeZone.CurrentTimeZone;\nDaylightTime dst = tz.GetDaylightChanges(DateTime.UtcNow.Year);\nConsole.WriteLine($\"DST: start {dst.Start} - end {dst.End}\"); // that's what I need but for a given timezone\n</code></pre>\n"}, {"tags": ["c#", "notepad++", "notepad", "writefile", "writealltext"], "comments": [{"owner": {"reputation": 59217, "user_id": 156695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3390f053c9414f150c48f700afaa3e7a?s=128&d=identicon&r=PG", "display_name": "Tigran", "link": "https://stackoverflow.com/users/156695/tigran"}, "edited": false, "score": 7, "creation_date": 1534361328, "post_id": 51865151, "comment_id": 90682577, "body": "please use <code>&quot;P&quot; + new string(&#39; &#39;, 513)</code>"}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 1, "creation_date": 1534361329, "post_id": 51865151, "comment_id": 90682578, "body": "Notepad is incorrectly detecting the file encoding.  <code>File.WriteAllText(string,string)</code> uses UTF-8 by default."}, {"owner": {"reputation": 20646, "user_id": 22437, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/H4s3Z.jpg?s=128&g=1", "display_name": "Dour High Arch", "link": "https://stackoverflow.com/users/22437/dour-high-arch"}, "edited": false, "score": 1, "creation_date": 1534361430, "post_id": 51865151, "comment_id": 90682624, "body": "See <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20070417-00/?p=27223\" rel=\"nofollow noreferrer\">the Notepad file-encoding problem</a>. If you want to fix the problem, specify UTF-8 and start your file with a BOM."}, {"owner": {"reputation": 790, "user_id": 2568805, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/14773e403a06353d2ff288938ae8e588?s=128&d=identicon&r=PG", "display_name": "amyn", "link": "https://stackoverflow.com/users/2568805/amyn"}, "reply_to_user": {"reputation": 59217, "user_id": 156695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3390f053c9414f150c48f700afaa3e7a?s=128&d=identicon&r=PG", "display_name": "Tigran", "link": "https://stackoverflow.com/users/156695/tigran"}, "edited": false, "score": 0, "creation_date": 1534361436, "post_id": 51865151, "comment_id": 90682626, "body": "@Tigran same result"}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 4, "creation_date": 1534361475, "post_id": 51865151, "comment_id": 90682645, "body": "@amyn His suggestion wasn&#39;t to fix your problem.  It&#39;s to shorten your code, because 513 spaces in a string is nuts."}, {"owner": {"reputation": 59217, "user_id": 156695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3390f053c9414f150c48f700afaa3e7a?s=128&d=identicon&r=PG", "display_name": "Tigran", "link": "https://stackoverflow.com/users/156695/tigran"}, "edited": false, "score": 1, "creation_date": 1534361482, "post_id": 51865151, "comment_id": 90682648, "body": "@amyn: it was for shortness of writing, and not a solution."}, {"owner": {"reputation": 790, "user_id": 2568805, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/14773e403a06353d2ff288938ae8e588?s=128&d=identicon&r=PG", "display_name": "amyn", "link": "https://stackoverflow.com/users/2568805/amyn"}, "reply_to_user": {"reputation": 20646, "user_id": 22437, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/H4s3Z.jpg?s=128&g=1", "display_name": "Dour High Arch", "link": "https://stackoverflow.com/users/22437/dour-high-arch"}, "edited": false, "score": 0, "creation_date": 1534361714, "post_id": 51865151, "comment_id": 90682741, "body": "@DourHighArch that&#39;s what I wanted. thanks"}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "edited": false, "score": 0, "creation_date": 1534362047, "post_id": 51865151, "comment_id": 90682877, "body": "<code>File.WriteAllText(@&quot;test.txt&quot;, (&quot;P&quot; + new string(&#39; &#39;, 513)), Encoding.UTF8);</code>"}, {"owner": {"reputation": 790, "user_id": 2568805, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/14773e403a06353d2ff288938ae8e588?s=128&d=identicon&r=PG", "display_name": "amyn", "link": "https://stackoverflow.com/users/2568805/amyn"}, "reply_to_user": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "edited": false, "score": 0, "creation_date": 1534362119, "post_id": 51865151, "comment_id": 90682909, "body": "@Jimi I already tried that and that does open up fine in Notepad. What I was curious was about the number 513. Doesn&#39;t happen with 512 or 514 but 513."}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "edited": false, "score": 0, "creation_date": 1534362752, "post_id": 51865151, "comment_id": 90683189, "body": "Have you ever wondered why Notepad is sooo slooow in opening some simple text files which take a fraction of that time to load anywhere else? Your text file begins with <code>50 20</code>. Now, is it Unicode (UTF16LE)? Is it the other Unicode (UTF8), the other Unicode (...), Is it ANSI. Anxiety. Better recheck. No wait, lets read the WHOLE file an get the Byte Order Mark then re-encode. Then I&#39;ll be sure..."}, {"owner": {"reputation": 4431, "user_id": 4739488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8m1k.png?s=128&g=1", "display_name": "Flydog57", "link": "https://stackoverflow.com/users/4739488/flydog57"}, "edited": false, "score": 0, "creation_date": 1534363132, "post_id": 51865151, "comment_id": 90683332, "body": "Notepad&#39;s file format detection routine works nearly all the time.  But, not always.  It probably has something to do with the fact that 512 is a nice round number (2 to the 9th).  So, it sees a file that is 514 characters long and sees the last 512 of them as spaces, and figures the first two bytes must be some kind of badly formed byte order mark: (0x50, 0x20) and says &quot;oh well, let me fall off the deep end&quot;.  Report it as a bug to Microsoft (but don&#39;t hold your breath about getting it fixed)."}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "reply_to_user": {"reputation": 4431, "user_id": 4739488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8m1k.png?s=128&g=1", "display_name": "Flydog57", "link": "https://stackoverflow.com/users/4739488/flydog57"}, "edited": false, "score": 0, "creation_date": 1534363580, "post_id": 51865151, "comment_id": 90683513, "body": "@Flydog57  Well, 103 should be enough to throw it off (can&#39;t test now, just a guess)."}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "edited": false, "score": 0, "creation_date": 1534364052, "post_id": 51865151, "comment_id": 90683729, "body": "Forgot to mention: check out what character is Unicode <code>U+2020</code>."}, {"owner": {"reputation": 3578, "user_id": 947986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpYrz.jpg?s=128&g=1", "display_name": "Dusty", "link": "https://stackoverflow.com/users/947986/dusty"}, "edited": false, "score": 0, "creation_date": 1534365620, "post_id": 51865151, "comment_id": 90684386, "body": "See my answer below. There&#39;s nothing magic about 513, just that an odd number of spaces plus the original single character yields an even number of bytes. You&#39;re right that 512 and 514 don&#39;t duplicate your issue, but other combinations/lengths that result in an even number of <i>bytes</i> reproduce it quite easily."}], "answers": [{"tags": [], "owner": {"reputation": 1229, "user_id": 3733407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2UTsO.jpg?s=128&g=1", "display_name": "Nathan Alard", "link": "https://stackoverflow.com/users/3733407/nathan-alard"}, "is_accepted": false, "score": 3, "last_activity_date": 1534364044, "creation_date": 1534364044, "answer_id": 51865775, "question_id": 51865151, "link": "https://stackoverflow.com/questions/51865151/write-text-to-file-in-c-with-513-space-characters/51865775#51865775", "title": "Write text to file in C# with 513 space characters", "body": "<p>Try passing in a different encoding:</p>\n\n<pre><code>i. System.IO.File.WriteAllText(filename , stringVariable, Encoding.UTF8);\nii. System.IO.File.WriteAllText(filename , stringVariable, Encoding.UTF32);\niii. etc.\n</code></pre>\n\n<p>Also You could try using another way to build your string, to make it be easier to read, change and count, instead of tapping the space bar 513 times;</p>\n\n<p>i. Use the string constructor (like @Tigran suggested)</p>\n\n<pre><code>var result = \"P\" + new String(' ', 513);\n</code></pre>\n\n<p>ii. Use the stringBuilder</p>\n\n<pre><code>var stringBuilder = new StringBuilder();\nstringBuilder.Append(\"P\");\n\nfor (var i = 1; i &lt;= 513; i++) { stringBuilder.Append(\" \"); }\n</code></pre>\n\n<p>iii. Or both</p>\n\n<pre><code>public string AppendSpacesToString(string stringValue, int numberOfSpaces) \n{\n    var stringBuilder = new StringBuilder();\n    stringBuilder.Append(stringValue);\n    stringBuilder.Append(new String(' ', numberOfSpaces));\n    return stringBuilder.ToString();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1534374378, "post_id": 51866052, "comment_id": 90687011, "body": "Yes, if you aren&#39;t telling a program which encoding a text file uses, it is guessing. (Unless there is some standard that applies such as JSON, XML, HTML, \u2026, or other source of this essential information such as project file, etc.)"}], "tags": [], "owner": {"reputation": 3578, "user_id": 947986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpYrz.jpg?s=128&g=1", "display_name": "Dusty", "link": "https://stackoverflow.com/users/947986/dusty"}, "is_accepted": false, "score": 5, "last_activity_date": 1534368112, "last_edit_date": 1534368112, "creation_date": 1534365388, "answer_id": 51866052, "question_id": 51865151, "link": "https://stackoverflow.com/questions/51865151/write-text-to-file-in-c-with-513-space-characters/51866052#51866052", "title": "Write text to file in C# with 513 space characters", "body": "<p>What you are missing is that Notepad is guessing, and it is not because your length is specifically 513 spaces ... it is because it is an <strong>even number of bytes</strong> and the file size is >= 100 total bytes. Try 511 or 515 spaces ... or 99 ... you'll see the same misinterpretation of your file contents. With an odd number of bytes, Notepad can assume that your file is not any of the double-byte encodings, because those would all result in 2 bytes per character = even number of total bytes in the file. If you give the file a few more low-order ASCII characters at the beginning (e.g., \"PICKLE\" + spaces), Notepad does a much better job of understanding that it should treat the content as single-byte chars.</p>\n\n<p>The suggested approach of including <code>Encoding.UTF8</code> is the easiest fix ... it will write a BOM to the beginning of the file which <em>tells</em> Notepad (and Notepad++) what the format of the data is, so that it doesn't have to resort to this guessing behavior (you can see the difference between your original approach and the BOM approach by opening both in Notepad++, then look in the bottom-right corner of the app. With the BOM, it will tell you the encoding is <code>UTF-8-BOM</code> ... without it, it will just say <code>UTF-8</code>).</p>\n\n<p>I should also say that the <em>contents</em> of your file are not 'wrong', per se... the weird format is purely due to Notepad's \"guessing\" algorithm. So unless it's a requirement that people use Notepad to read your file with 1 letter and a large, odd number of spaces ... maybe just don't sweat it. If you do change to writing the file with <code>Encoding.UTF8</code>, then you do need to ensure that any other system that reads your file knows how to honor the BOM, because it <strong>is</strong> a real change to the contents of your file. If you cannot verify that all consumers of your file can/will handle the BOM, then it may be safer to just understand that Notepad happens to make a bad guess for your specific use case, and leave the raw contents exactly how you want them.</p>\n\n<p>You can verify the physical difference in your file with the BOM by doing a binary read and then converting them to a string (you can't \"see\" the change with <code>ReadAllText</code>, because it honors &amp; strips the BOM):</p>\n\n<pre><code>byte[] contents = System.IO.File.ReadAllBytes(\"test.txt\");\nConsole.WriteLine(Encoding.ASCII.GetString(contents));\n</code></pre>\n"}], "owner": {"reputation": 790, "user_id": 2568805, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/14773e403a06353d2ff288938ae8e588?s=128&d=identicon&r=PG", "display_name": "amyn", "link": "https://stackoverflow.com/users/2568805/amyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1534368112, "creation_date": 1534361217, "question_id": 51865151, "link": "https://stackoverflow.com/questions/51865151/write-text-to-file-in-c-with-513-space-characters", "title": "Write text to file in C# with 513 space characters", "body": "<p>Here is a code that writes the string to a file</p>\n\n<pre><code>System.IO.File.WriteAllText(\"test.txt\", \"P                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 \");\n</code></pre>\n\n<p>It's basically the character 'P' followed by a total of 513 space character.</p>\n\n<p>When I open the file in Notepad++, it appears to be fine. However, when I open in windows Notepad, all I see is garbled characters.</p>\n\n<p>If instead of 513 space character, I add 514 or 512, it opens fine in Notepad.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c#", "xml"], "comments": [{"owner": {"reputation": 1250, "user_id": 3636427, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ZeDOQ.jpg?s=128&g=1", "display_name": "mahlatse", "link": "https://stackoverflow.com/users/3636427/mahlatse"}, "edited": false, "score": 0, "creation_date": 1534363281, "post_id": 51865145, "comment_id": 90683395, "body": "I am not sure what you are asking for exactly, editing of XML values is easier is you use XElement,I cant give more feedback as I dont understand the question"}, {"owner": {"reputation": 1065, "user_id": 2981403, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0lENO.png?s=128&g=1", "display_name": "Hozikimaru", "link": "https://stackoverflow.com/users/2981403/hozikimaru"}, "edited": false, "score": 0, "creation_date": 1534366451, "post_id": 51865145, "comment_id": 90684732, "body": "The explanation of the question is rather convoluted. You can use XElement to build a IEnumerable XML to Linq structure, and simply call SetValue on a specific XElement."}, {"owner": {"reputation": 91, "user_id": 9224015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf766e8f609e5ad5e259d9a667d8038e?s=128&d=identicon&r=PG&f=1", "display_name": "xXConcasXx", "link": "https://stackoverflow.com/users/9224015/xxconcasxx"}, "edited": false, "score": 0, "creation_date": 1534371689, "post_id": 51865145, "comment_id": 90686400, "body": "Problem solved, thanks for the answers."}], "owner": {"reputation": 91, "user_id": 9224015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf766e8f609e5ad5e259d9a667d8038e?s=128&d=identicon&r=PG&f=1", "display_name": "xXConcasXx", "link": "https://stackoverflow.com/users/9224015/xxconcasxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534371921, "creation_date": 1534361183, "last_edit_date": 1534371921, "question_id": 51865145, "link": "https://stackoverflow.com/questions/51865145/c-xml-read-and-edit-child-value", "title": "C# XML read and edit child value", "body": "<p><strong>EDIT</strong></p>\n\n<p>Problem solved, for those who need it, here's what I did</p>\n\n<p><strong><em>Edited XML:</em></strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\r\n&lt;!-- DON'T EDIT THIS FILE!--&gt;\r\n&lt;config&gt;\r\n  &lt;DirectoryIndex value=\"False\" /&gt;\r\n  &lt;FirstRun value=\"True\" /&gt;\r\n  &lt;GamePath value=\"\" /&gt;\r\n  &lt;Language value=\"English\" /&gt;\r\n&lt;/config&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong><em>GET VALUES FROM XML:</em></strong></p>\n\n<pre><code>var XMLDoc = XDocument.Load(AppDomain.CurrentDomain.BaseDirectory + \"config.xml\");\n\nstring DirectoryIndex = XMLDoc.Root.Element(XName.Get(\"DirectoryIndex\")).Attribute(\"value\").Value;\nstring GamePath = XMLDoc.Root.Element(XName.Get(\"GamePath\")).Attribute(\"value\").Value;\nstring Language = XMLDoc.Root.Element(XName.Get(\"Language\")).Attribute(\"value\").Value;\nstring FirstRun = XMLDoc.Root.Element(XName.Get(\"FirstRun\")).Attribute(\"value\").Value;\n</code></pre>\n\n<p><strong><em>EDIT AND SAVE THE VALUES:</em></strong></p>\n\n<pre><code>XMLDoc.Root.Element(XName.Get(\"DirectoryIndex\")).Attribute(\"value\").SetValue(\"NewValue\");\nXMLDoc.Root.Element(XName.Get(\"GamePath\")).Attribute(\"value\").SetValue(\"NewValue\");\nXMLDoc.Root.Element(XName.Get(\"Language\")).Attribute(\"value\").SetValue(\"NewValue\");\nXMLDoc.Root.Element(XName.Get(\"FirstRun\")).Attribute(\"value\").SetValue(\"NewValue\");\n\nXMLDoc.Save(AppDomain.CurrentDomain.BaseDirectory + \"config.xml\");\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>I've this XML file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;!-- DON'T EDIT THIS FILE!--&gt;\n&lt;config&gt;\n  &lt;setting key=\"DirectoryIndex\"&gt;\n    &lt;value&gt;False&lt;/value&gt;\n  &lt;/setting&gt;\n  &lt;setting key=\"GamePath\"&gt;\n    &lt;value&gt;&lt;/value&gt;\n  &lt;/setting&gt;\n  &lt;setting key=\"Language\"&gt;\n    &lt;value&gt;English&lt;/value&gt;\n  &lt;/setting&gt;\n  &lt;setting key=\"FirstRun\"&gt;\n    &lt;value&gt;True&lt;/value&gt;\n  &lt;/setting&gt;\n&lt;/config&gt;\n</code></pre>\n  \n  <p>My application need to allocate in a string variables all values from\n  XML file.. example:</p>\n\n<pre><code>string DirectoryIndex = \"Instructions To Get \"DirectoryIndex\" value from XML file\";\nstring GamePath = \"Instructions To Get \"GamePath\" value from XML file\";\nstring Language = \"Instructions To Get \"Language\" value from XML file\";\nstring FirstRun= \"Instructions To Get \"FirstRun\" value from XML file\";\n</code></pre>\n  \n  <p>Next, when all variables are allocated i need to edit the values in\n  XML file.. example:</p>\n\n<pre><code>string NewValueForDirectoryIndex = \"True\";\n</code></pre>\n  \n  <p>I would like this output:</p>\n\n<pre><code>&lt;setting key=\"DirectoryIndex\"&gt;\n  &lt;value&gt;True&lt;/value&gt; &lt;!-- Obtained from \"NewValueForDirectoryIndex\" --&gt;\n</code></pre>\n</blockquote>\n"}, {"tags": ["c#", ".net", ".net-core", "apple-push-notifications"], "answers": [{"tags": [], "owner": {"reputation": 556, "user_id": 2207508, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/efd58545ae60582e56af85c58e9cb7a5?s=128&d=identicon&r=PG", "display_name": "David C", "link": "https://stackoverflow.com/users/2207508/david-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1534438258, "creation_date": 1534438258, "answer_id": 51881918, "question_id": 51865108, "link": "https://stackoverflow.com/questions/51865108/apns-payload-format-exception-in-memorystream/51881918#51881918", "title": "APNS Payload format exception in MemoryStream", "body": "<p>It turned out that I was calling the <a href=\"https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/BinaryProviderAPI.html#//apple_ref/doc/uid/TP40008194-CH13-SW1\" rel=\"nofollow noreferrer\">Legacy Binary Provider API</a> which the first byte of the sequence determines the command. I was sending through 0 as the command and the max payload size of that API is 256 bytes. Obviously my payload was slightly larger than that and was being rejected.. </p>\n\n<p>I then sent 2 as the command and built up the necessary frame data.</p>\n"}], "owner": {"reputation": 556, "user_id": 2207508, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/efd58545ae60582e56af85c58e9cb7a5?s=128&d=identicon&r=PG", "display_name": "David C", "link": "https://stackoverflow.com/users/2207508/david-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534438258, "creation_date": 1534360962, "question_id": 51865108, "link": "https://stackoverflow.com/questions/51865108/apns-payload-format-exception-in-memorystream", "title": "APNS Payload format exception in MemoryStream", "body": "<p>I'm trying to send push notifications from C#/dotnetcore and I'm running into an issue when serialising and sending my payload to APNS.</p>\n\n<p>If you look at the code sample below, the iosPayload object has one commented out property. Without it in the payload, the notification is received successfully, with it, the notification does not reach the device.</p>\n\n<p>The error is <code>System.FormatException</code> with the message <code>Additional non-parsable characters are at the end of the string</code>. I'm actually sending from within an Azure Webjob and it's only there that I get the error message, running locally with a simple console application doesn't show any error, but also never reaches the device.</p>\n\n<pre><code>public void SendNotification(string deviceToken)\n{\n    int port = 2195;\n    string hostname = \"gateway.sandbox.push.apple.com\";\n\n    var iosPayload = new {\n        aps = new {\n            alert = \"The title\",\n            sound = \"default\"\n        },\n        app_group_id = 1,\n        notification_id = \"notification_id\",\n        campaignName = \"Campaign Name\",\n        push_title = \"Campaign Title\",\n        push_message = \"The main body\",\n        type = \"sdkNotification\",\n        push_on_click_behaviour = \"1\"//,\n        //another_property = \"4\"\n    };\n\n    string certificatePath = @\"./com.myCompany.sampleIOS.DEV.p12\";\n    X509Certificate2 clientCertificate = new X509Certificate2(File.ReadAllBytes(certificatePath), \"\");\n    X509Certificate2Collection certificatesCollection = new X509Certificate2Collection(clientCertificate);\n    TcpClient tcpClient = new TcpClient(hostname, port);\n    SslStream sslStream = new SslStream(tcpClient.GetStream(), false, new RemoteCertificateValidationCallback(ValidateServerCertificate), null);\n    try\n    {\n        sslStream.AuthenticateAsClient(hostname, certificatesCollection, SslProtocols.Tls, false);\n        MemoryStream memoryStream = new MemoryStream();\n        BinaryWriter writer = new BinaryWriter(memoryStream);\n        writer.Write((byte)0);\n        writer.Write((byte)0);\n        writer.Write((byte)32);\n        writer.Write(HexStringToByteArray(deviceToken.ToUpper()));\n        var payload = JsonConvert.SerializeObject(iosPayload);\n        writer.Write((byte)0);\n        writer.Write((byte)payload.Length);\n        byte[] payloadBytes = System.Text.Encoding.UTF8.GetBytes(payload);\n        writer.Write(payloadBytes);\n        writer.Flush();\n        byte[] memoryStreamAsBytes = memoryStream.ToArray();\n        sslStream.Write(memoryStreamAsBytes);\n        sslStream.Flush();\n\n\n    }\n\n    catch (Exception ex)\n    {\n        Console.WriteLine(ex.Message);\n        tcpClient.Close();\n    }\n}\n\nprivate byte[] HexStringToByteArray(string hexString)\n{\n    return Enumerable.Range(0, hexString.Length)\n             .Where(x =&gt; x % 2 == 0)\n             .Select(x =&gt; Convert.ToByte(hexString.Substring(x, 2), 16))\n             .ToArray();\n}\n\nprivate bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)\n{\n    if (sslPolicyErrors == SslPolicyErrors.None) return true;\n    return false;\n}\n</code></pre>\n\n<p>Edit: strangely I can send my full payload from Pusher...</p>\n"}, {"tags": ["c#", ".net", "akka.net"], "comments": [{"owner": {"reputation": 10654, "user_id": 476048, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/dhByN.jpg?s=128&g=1", "display_name": "Berin Loritsch", "link": "https://stackoverflow.com/users/476048/berin-loritsch"}, "edited": false, "score": 1, "creation_date": 1534361643, "post_id": 51865082, "comment_id": 90682711, "body": "To be fair to akka.net, they are <b>not</b> doing the exact same work.  Your second is only getting the jobs our of one <code>js</code> and is not merging the lists in any way.  I don&#39;t know enough about akka.net to say why one is faster than the other."}, {"owner": {"reputation": 3599, "user_id": 3608792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AeAON.jpg?s=128&g=1", "display_name": "Dan Wilson", "link": "https://stackoverflow.com/users/3608792/dan-wilson"}, "edited": false, "score": 0, "creation_date": 1534362744, "post_id": 51865082, "comment_id": 90683186, "body": "It&#39;s quicker to pick up a hammer and start driving nails (<code>Parallel.ForEach()</code>) but it&#39;s more efficient in the long-run to build a house with a nailgun (Akka.NET streams). They are different tools."}], "answers": [{"tags": [], "owner": {"reputation": 6652, "user_id": 2721139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/8beJH.jpg?s=128&g=1", "display_name": "Bartosz Sypytkowski", "link": "https://stackoverflow.com/users/2721139/bartosz-sypytkowski"}, "is_accepted": false, "score": 1, "last_activity_date": 1534451986, "last_edit_date": 1534451986, "creation_date": 1534450178, "answer_id": 51884625, "question_id": 51865082, "link": "https://stackoverflow.com/questions/51865082/akka-net-stream-is-slower-than-parallel-loop/51884625#51884625", "title": "Akka.Net stream is slower than parallel loop", "body": "<p><strong>Akka.NET streams primary use case is to work over long (potentially infinite) streams of events that can consist of many different processing steps.</strong> If calling several jobs in parallel is what you want, this is definitely not an appropriate tool for your need.</p>\n\n<p>That being said if you want to process different events asynchronously you can to it like that:</p>\n\n\n\n<pre><code>jbesSource\n    // use SelectAsync if the order of output values must match order of inputs\n    .SelectAsyncUnordered(maxParallelism, FindJobsAsync)\n    .RunWith(Sink.Seq&lt;T&gt;(), materializer);\n</code></pre>\n\n<p>Where <code>maxParallelism</code> could be for example <code>Environment.ProcessorCount</code> or any value matching the number of your machine cores.</p>\n"}], "owner": {"reputation": 33608, "user_id": 140877, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/317698d41135bf29fb65324a437ecfa7?s=128&d=identicon&r=PG", "display_name": "ryudice", "link": "https://stackoverflow.com/users/140877/ryudice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1534469862, "creation_date": 1534360831, "last_edit_date": 1534469862, "question_id": 51865082, "link": "https://stackoverflow.com/questions/51865082/akka-net-stream-is-slower-than-parallel-loop", "title": "Akka.Net stream is slower than parallel loop", "body": "<p>I have the following two codes:</p>\n\n<pre><code>var jbesSource = Source.From(jobSeekers);\nvar runnableGraph = jbesSource\n    .Via(Flow.FromGraph(GraphDsl.Create(b =&gt;\n    {\n        Flow&lt;(JobSeeker_JBE, List&lt;JBE&gt;), Dictionary&lt;JBE, ICollection&lt;JobCI&gt;&gt;, NotUsed&gt; worker =\n        FindJobsFlow.Instance(cache);\n        var merge = b.Add(new Merge&lt;Dictionary&lt;JBE, ICollection&lt;JobCI&gt;&gt;&gt;(8));\n        var balancer2 = b.Add(new Balance&lt;JobSeeker_JBE&gt;(8));\n\n        b.From(balancer2).Via(filterJobAlertsFlow).Via(worker).To(merge);\n        b.From(balancer2).Via(filterJobAlertsFlow).Via(worker).To(merge);\n        b.From(balancer2).Via(filterJobAlertsFlow).Via(worker).To(merge);\n        b.From(balancer2).Via(filterJobAlertsFlow).Via(worker).To(merge);\n        b.From(balancer2).Via(filterJobAlertsFlow).Via(worker).To(merge);\n        b.From(balancer2).Via(filterJobAlertsFlow).Via(worker).To(merge);\n        b.From(balancer2).Via(filterJobAlertsFlow).Via(worker).To(merge);\n        b.From(balancer2).Via(filterJobAlertsFlow).Via(worker).To(merge);\n\n        return new FlowShape&lt;JobSeeker_JBE, Dictionary&lt;JBE, ICollection&lt;JobCI&gt;&gt;&gt;\n                   (balancer2.In, merge.Out);\n    })).Async())\n        .Async()\n        .ToMaterialized(Sink.Seq&lt;Dictionary&lt;JBE, ICollection&lt;JobCI&gt;&gt;&gt;(), Keep.Right);\n</code></pre>\n\n<p>This is much faster than the above:</p>\n\n<pre><code>Parallel.ForEach(jobseekers, js =&gt;\n{\n    var jobs = FindJobs(js);\n}\n</code></pre>\n\n<p>Both are doing exactly the same work.</p>\n\n<p>The FindJobs function consume a REST API, so it's IO basically.</p>\n\n<p>Any ideas why a simple loop would be much faster than Akka.Streaming?</p>\n"}, {"tags": ["c#", "dns", "fqdn"], "answers": [{"tags": [], "owner": {"reputation": 328, "user_id": 7354452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ii8yY.png?s=128&g=1", "display_name": "C Sharp Conner", "link": "https://stackoverflow.com/users/7354452/c-sharp-conner"}, "is_accepted": true, "score": 1, "last_activity_date": 1534437537, "last_edit_date": 1534437537, "creation_date": 1534437201, "answer_id": 51881675, "question_id": 51865028, "link": "https://stackoverflow.com/questions/51865028/iphostentry-need-to-force-it-to-return-fqdn-hostname-from-another-domain/51881675#51881675", "title": "IPHostEntry - Need to force it to return FQDN HostName from another domain", "body": "<p>It appears that Microsoft has done some very questionable coding practices.  From what I can tell, Windows won't give you the FQDN name from another domain, but you can set up a DNS Suffix List that will force querying a name with Domain suffixes.  This appears to force Windows to search for an entry that matches the FQDN (even though it can do this with just the hostname).  The difference is when it return the IP Address and the name it used, the name it used was the FQDN it created from the List you specified.</p>\n\n<p>I have verified that once I had the machine with the list, I was able to use my function and it would resolve the HostName from another domain to the correct FQDN.</p>\n\n<h3>On the machine itself</h3>\n\n<ol>\n<li>Click Start</li>\n<li>Search for \"Network and Sharing Center\"</li>\n<li>Click \"Change adapter settings\"</li>\n<li>For each Adapter, Right Click it and select Properties</li>\n<li>Click either Internet Protocol Version 6 (TCP/IPv6) or Internet Protocol Version 4 (TCP/IPv4)</li>\n<li>Click \"Properties\" button</li>\n<li>Click \"Advanced...\" button</li>\n<li>Click DNS Tab</li>\n<li>Select Option \"Append these DNS suffixes (in order)\"</li>\n<li>Click \"Add...\" and add the domain you are on first</li>\n<li>Repeat click \"Add...\" and add each domain you might need the FQDN from.</li>\n<li>Again, ensure the top of the list is the domain this machine is on</li>\n<li>Click OK on the Advanced TCP/IP Settings Window</li>\n<li>Click OK on the Internet Protocol Properties Window</li>\n<li>Click \"Close\" or \"OK\" on the Adapter Properties Window</li>\n<li>Try pinging a computer by name on a different domain, you should see the FQDN returned.</li>\n<li>You can also IPv4 ping via \"ping -4 COMPUTERNAME\"</li>\n<li>If it doesn't appear working:\n\n<ul>\n<li>Open cmd.exe as Admin</li>\n<li>ipconfig /flushdns</li>\n<li>ipconfig /registerdns</li>\n</ul></li>\n</ol>\n\n<h3>Or Using Group Policy</h3>\n\n<ol>\n<li>Run Group Policy Management with sufficient Domain/Forest\nAdministrator Credentials</li>\n<li>Select what Policy you want to alter.  In this example, Default Domain Policy</li>\n<li>Right Click and choose Edit</li>\n<li>Navigate down to [Computer Configuration > Policies > Administrative Templates > Network > DNS Client]</li>\n<li>Open \"DNS Suffix Search List\"</li>\n<li>Select \"Enable\"</li>\n<li>In the DNS Suffixes textbox, type your Comma separated DNS Suffixes.  Ex.  We are on Beta.ca domain, so we type Beta.ca,Alpha.ca</li>\n<li>Click OK or Apply then close the Windows</li>\n<li>If you need to policy to apply to a machine ASAP, on the machine you can open cmd.exe and type gpupdate /force</li>\n</ol>\n\n<p>I personally think it is so incredibly stupid that DNS can match an IP address or the HostName FROM ANOTHER DOMAIN.... it finds the record but it won't give you back the FQDN of the record WHICH IT APPEARS TO KNOW WHEN YOU LOOK AT THE RECORD, IT APPEARS TO BE RIGHT THERE! ... but you can't have it unless you hardcode a list of DNS Suffixes and then you get the FQDN back which then makes the code work properly.  Very poor performance indeed!</p>\n\n<pre><code>//Once you add Alpha.ca to the DNS Suffix List on the machine running this code....\n//This will now correctly return Win7-Alpha.Alpha.ca\nDns.GetHostEntry(\"Win7-Alpha\").HostName;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/RmvSs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RmvSs.png\" alt=\"DNS Suffix present to create FQDN\"></a></p>\n"}], "owner": {"reputation": 328, "user_id": 7354452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ii8yY.png?s=128&g=1", "display_name": "C Sharp Conner", "link": "https://stackoverflow.com/users/7354452/c-sharp-conner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 51881675, "answer_count": 1, "score": 3, "last_activity_date": 1534437537, "creation_date": 1534360568, "last_edit_date": 1534361138, "question_id": 51865028, "link": "https://stackoverflow.com/questions/51865028/iphostentry-need-to-force-it-to-return-fqdn-hostname-from-another-domain", "title": "IPHostEntry - Need to force it to return FQDN HostName from another domain", "body": "<p>I've created a function that works perfectly within the same domain.<br>\nIt can take a name like \"Win7-Alpha\" and return \"Win7-Alpha.Alpha.ca\" when being used on the \"Alpha.ca\" Domain.</p>\n\n<pre><code>public static string TryGetServerFQDN(string ServerName)\n{\n    string ServerFQDN = ServerName;\n    if (!string.IsNullOrEmpty(ServerName))\n    {\n        IPHostEntry serverIPEntry = null;\n        try\n        {\n            serverIPEntry = Dns.GetHostEntry(ServerName);\n        }\n        catch\n        {\n        }\n\n        if (serverIPEntry != null &amp;&amp; !string.IsNullOrEmpty(serverIPEntry.HostName))\n        {\n            ServerFQDN = serverIPEntry.HostName;\n        }\n    }\n    return ServerFQDN;\n}\n</code></pre>\n\n<p>However, if I try the very same thing on the \"Beta.ca\" Domain, it only returns \"Win7-Alpha\".  It is able to resolve the IPv4 Address if it is passed instead, but again, it only returns \"Win7-Alpha\"....\nI don't want just \"Win7-Alpha\", I want the FQDN!</p>\n\n<p>On Beta.ca DNS I can see the FQDN that I want so why won't it give it to me?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ih43z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ih43z.png\" alt=\"DNS on Beta.ca\"></a></p>\n"}, {"tags": ["c#", "asp.net", "asp.net-web-api"], "answers": [{"comments": [{"owner": {"reputation": 21683, "user_id": 4228458, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/fj2C5.jpg?s=128&g=1", "display_name": "CodingYoshi", "link": "https://stackoverflow.com/users/4228458/codingyoshi"}, "edited": false, "score": 0, "creation_date": 1534361280, "post_id": 51865087, "comment_id": 90682552, "body": "This does not answer the question."}, {"owner": {"reputation": 1871, "user_id": 1479976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6da8c804cd3731fc9dd8dbf5fd621523?s=128&d=identicon&r=PG", "display_name": "Simons0n", "link": "https://stackoverflow.com/users/1479976/simons0n"}, "edited": false, "score": 0, "creation_date": 1534362442, "post_id": 51865087, "comment_id": 90683057, "body": "That is right, i know how to return a custom error message, but I want to do it automatically before the controller"}, {"owner": {"reputation": 180, "user_id": 6818572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a975d2441a36e765ef41eb933a68e9?s=128&d=identicon&r=PG&f=1", "display_name": "M Hanif", "link": "https://stackoverflow.com/users/6818572/m-hanif"}, "reply_to_user": {"reputation": 1871, "user_id": 1479976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6da8c804cd3731fc9dd8dbf5fd621523?s=128&d=identicon&r=PG", "display_name": "Simons0n", "link": "https://stackoverflow.com/users/1479976/simons0n"}, "edited": false, "score": 0, "creation_date": 1563700328, "post_id": 51865087, "comment_id": 100779785, "body": "@Simons0n you  can use delagate handler for this"}], "tags": [], "owner": {"reputation": 732, "user_id": 2748245, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/578784511/picture?type=large", "display_name": "Keith Harris", "link": "https://stackoverflow.com/users/2748245/keith-harris"}, "is_accepted": false, "score": -1, "last_activity_date": 1534360851, "creation_date": 1534360851, "answer_id": 51865087, "question_id": 51864899, "link": "https://stackoverflow.com/questions/51864899/return-a-custom-error-response-from-webapi-without-throwing-exception/51865087#51865087", "title": "Return a custom error Response from WebApi without throwing Exception", "body": "<p>For custom errors, use IHttpActionResult type:</p>\n\n<pre><code>[Put]\n[Route(\"api/{userId}\")] \npublic IHttpActionResult UpdateUser(Guid userId, [FromBody] user)  \n{\n     if (userId == null) \n     {\n       var message = \"Sorry, this is not a valid GUID\";\n       HttpError err = new HttpError(message);\n       return ResponseMessage(Request.CreateResponse(HttpStatusCode.InternalServerError, err));\n     }\n\n    . . .\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1871, "user_id": 1479976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6da8c804cd3731fc9dd8dbf5fd621523?s=128&d=identicon&r=PG", "display_name": "Simons0n", "link": "https://stackoverflow.com/users/1479976/simons0n"}, "edited": false, "score": 0, "creation_date": 1534363823, "post_id": 51865678, "comment_id": 90683624, "body": "Ok thanks, this seems like the thing that I would need. But I would have to go over the request via reflection, right? If I do this like a filter and make this for every request would that not decrease performance only to handel some few edgcases? Implementing the IActionFilter and iterating over the ActionParameters is the way to go, right? Will try this tomorrow, thanks allready =)"}, {"owner": {"reputation": 13057, "user_id": 729541, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9c8f35ef59003de814a4bca351071045?s=128&d=identicon&r=PG", "display_name": "John H", "link": "https://stackoverflow.com/users/729541/john-h"}, "reply_to_user": {"reputation": 1871, "user_id": 1479976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6da8c804cd3731fc9dd8dbf5fd621523?s=128&d=identicon&r=PG", "display_name": "Simons0n", "link": "https://stackoverflow.com/users/1479976/simons0n"}, "edited": false, "score": 0, "creation_date": 1534364219, "post_id": 51865678, "comment_id": 90683798, "body": "@Simons0n It depends on how complex your case is (i.e. do you really need reflection, or is this just to handle odd cases?). By that I mean, if you&#39;re only really looking for id-type properties, like <code>userId</code> in your example, there&#39;s no reason not to just use the attribute via [InterceptBadRequestFilter(&quot;userId&quot;)] and look for the offending item using that key. Anything more than that, and it&#39;s really a case of profiling to see. Just remember you don&#39;t have to register it globally, and it&#39;s perfecly fine to have separate filters performing similar logic if performance is that important."}], "tags": [], "owner": {"reputation": 13057, "user_id": 729541, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9c8f35ef59003de814a4bca351071045?s=128&d=identicon&r=PG", "display_name": "John H", "link": "https://stackoverflow.com/users/729541/john-h"}, "is_accepted": true, "score": 1, "last_activity_date": 1534363525, "creation_date": 1534363525, "answer_id": 51865678, "question_id": 51864899, "link": "https://stackoverflow.com/questions/51864899/return-a-custom-error-response-from-webapi-without-throwing-exception/51865678#51865678", "title": "Return a custom error Response from WebApi without throwing Exception", "body": "<p>You can do this yes, and you're close when you mention <code>ExceptionFilter</code>s, because you actually handle this case using a custom <code>ActionFilter</code>. Something like this:</p>\n\n<pre><code>using System.Web.Http.Filters;\n\npublic class InterceptBadRequestFilter : ActionFilterAttribute\n{\n    public override void OnActionExecuting(HttpActionContext actionContext)\n    {\n        // whatever your condition is\n        if (...)\n        {\n            var response = actionContext\n                .Request\n                .CreateErrorResponse(HttpStatusCode.BadRequest, \"Custom error message\");\n\n            actionContext.Response = response;\n        }\n    }\n}\n</code></pre>\n\n<p>There is an <code>OnActionExecutingAsync</code> method you can override as well, if you need that.</p>\n"}], "owner": {"reputation": 1871, "user_id": 1479976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6da8c804cd3731fc9dd8dbf5fd621523?s=128&d=identicon&r=PG", "display_name": "Simons0n", "link": "https://stackoverflow.com/users/1479976/simons0n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3616, "favorite_count": 1, "accepted_answer_id": 51865678, "answer_count": 2, "score": 1, "last_activity_date": 1534363525, "creation_date": 1534359918, "last_edit_date": 1534362573, "question_id": 51864899, "link": "https://stackoverflow.com/questions/51864899/return-a-custom-error-response-from-webapi-without-throwing-exception", "title": "Return a custom error Response from WebApi without throwing Exception", "body": "<p>I would like to return a custom Response (ProblemJson) from my asp.net web api controller, but before the method of the controller itself gets executed. Given a controller that looks like this:</p>\n\n<pre><code>[Put]\n[Route(\"api/{userId}\")]\npublic User UpdateUser(Guid userId, [FromBody] user)  \n{\n     .... \n}\n</code></pre>\n\n<p>and i call the api with this</p>\n\n<pre><code>api/thisIsNoGuid\n</code></pre>\n\n<p>Then WebApi answers with a default error message that I would like to change so it fits with our other error messages with is a defined ProblemJson. Right now we generate these ProblemDocuments by throwing exceptions and catching them in the WebApi filters that generate the ProblemDocument for us. I could make the Guid nullable and throw an exception if the Guid is null, so our filters do the work, but I do not think that this is a good idea, as it will be forgotten and then the api is inconsistent.</p>\n\n<p>I want to avoid code like this:</p>\n\n<pre><code>[Put]\n[Route(\"api/{userId}\")]\npublic User UpdateUser(Guid userId, [FromBody] user)  \n{\n     if (userId == null) return new Error()\n     .... \n}\n</code></pre>\n\n<p>So what I would like is something like the ExceptionFilters where you can override the <code>OnException</code> method to create your own response but for error cases that happen before the request reaches the controller. Is it possible to override the default behaviour of WebApi like this?</p>\n"}, {"tags": ["c#", "git", "tfs", "azure-devops"], "answers": [{"tags": [], "owner": {"reputation": 28250, "user_id": 5475003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed59b990fdc2c28e25f954d1578ce70?s=128&d=identicon&r=PG&f=1", "display_name": "Eddie Chen - MSFT", "link": "https://stackoverflow.com/users/5475003/eddie-chen-msft"}, "is_accepted": false, "score": 0, "last_activity_date": 1534383684, "creation_date": 1534383684, "answer_id": 51868513, "question_id": 51864875, "link": "https://stackoverflow.com/questions/51864875/tfs-client-side-api-equivalent-constructs-in-vsts-client-side-api-for-git/51868513#51868513", "title": "TFS Client Side API equivalent constructs in VSTS Client Side API for GIT", "body": "<p>The first code you mentioned is for Team Foundation Version Control System(TFVC), not for Git. TFVC and Git are different version control system, the constructs of the API is different too. So you won't find the same constructs for Git. If you want to get the items in a Git repository, use <code>GetItemsAsync()</code> method in GitHttpClient.</p>\n\n<p>By the way, the TFS Client Side API you mentioned is the legacy SOAP API and the VSTS Client Side API is the new Rest API. They are both available for TFS&amp;VSTS.</p>\n"}], "owner": {"reputation": 847, "user_id": 1713916, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0d8f4228b9e128f3c6f57b9f2c117172?s=128&d=identicon&r=PG", "display_name": "KP1", "link": "https://stackoverflow.com/users/1713916/kp1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534383684, "creation_date": 1534359794, "question_id": 51864875, "link": "https://stackoverflow.com/questions/51864875/tfs-client-side-api-equivalent-constructs-in-vsts-client-side-api-for-git", "title": "TFS Client Side API equivalent constructs in VSTS Client Side API for GIT", "body": "<p>I currently have a project that uses TFS Client Side API. The project is in C#. The project has references to the following constructs:</p>\n\n<ul>\n<li>VersionControlServer</li>\n<li>VersionControlLabel</li>\n<li>Item</li>\n<li>ItemSet</li>\n<li>VersionSpec</li>\n</ul>\n\n<p>Here is sample of current code:</p>\n\n<pre><code>using (TfsTeamProjectCollection tpc = new TfsTeamProjectCollection(new Uri(collectionUri)))\n{\n    VersionControlServer vcServer = tpc.GetService&lt;VersionControlServer&gt;();\n    ItemSet itemSet = vcServer.GetItems(\"$/\", RecursionType.OneLevel);\n    foreach (Item item in itemSet.Items)\n    {\n        //do stuff with the item\n    }\n}\n</code></pre>\n\n<p>Now I have projects in VSTS (configure to use Git) that i would like to target. From what i have seen so far the above constructs do not exist in VSTS Client Side API if you're using Git source.</p>\n\n<p>What are the equivalent constructs in VSTS Client side API where the source is Git?</p>\n\n<p>Here is my VSTS sample code:</p>\n\n<pre><code>  VssConnection connection = new VssConnection(new Uri(vstsOrTfsCollectionUrl), new VssClientCredentials());\n\n//The ProjectHttpClient\n ProjectHttpClient projectClient = connection.GetClient&lt;ProjectHttpClient&gt;();\n\n BuildHttpClient buildServer = connection.GetClient&lt;BuildHttpClient&gt;();\n\n//Get Basic Project - Shallow Reference\n IEnumerable&lt;TeamProjectReference&gt; projects = \n projectClient.GetProjects().Result;\n\n//Create GIT since some projects use Git\nGitHttpClient gitClient = connection.GetClient&lt;GitHttpClient&gt;();\n\n..projectName.. and other code here..\n\nTeamProject theProject = projectClient.GetProject(projectName).Result;\n\nList&lt;GitRepository&gt; gitRepositoryList = \ngitClient.GetRepositoriesAsync(theProject.Name).Result;\n</code></pre>\n"}, {"tags": ["c#", "datetime"], "comments": [{"owner": {"reputation": 3279, "user_id": 1459036, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yeDJp.jpg?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/1459036/brad"}, "edited": false, "score": 1, "creation_date": 1534359565, "post_id": 51864804, "comment_id": 90681796, "body": "Because your converting your formatted date to a datetime, so it adds the time to it.  Try just converting to Date, otheriwse it will always have time on it (thus the type is datetime.  And a datetime is a specific format by default"}, {"owner": {"reputation": 1853, "user_id": 3029274, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/678505a60d20e850fb26b7bc12a440a0?s=128&d=identicon&r=PG&f=1", "display_name": "Maddy", "link": "https://stackoverflow.com/users/3029274/maddy"}, "edited": false, "score": 0, "creation_date": 1534359611, "post_id": 51864804, "comment_id": 90681816, "body": "<a href=\"https://stackoverflow.com/questions/32386839/convert-string-to-shortdate-time\" title=\"convert string to shortdate time\">stackoverflow.com/questions/32386839/&hellip;</a>"}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 4, "creation_date": 1534359728, "post_id": 51864804, "comment_id": 90681884, "body": "<code>DateTime</code> has no format, its a measurement.  You format it when you <code>ToString()</code> it for display.  It can be in whatever format you want."}, {"owner": {"reputation": 2953, "user_id": 5133088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d0efad94ced5dcd194c0a482cafd4f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jeroen Heier", "link": "https://stackoverflow.com/users/5133088/jeroen-heier"}, "edited": false, "score": 0, "creation_date": 1534360205, "post_id": 51864804, "comment_id": 90682093, "body": "Show us the UI code where you need the formated MatchCalendarDate value."}, {"owner": {"reputation": 23, "user_id": 10230915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c20ca5e09e6d5b149271293eb4ff5304?s=128&d=identicon&r=PG&f=1", "display_name": "user10230915", "link": "https://stackoverflow.com/users/10230915/user10230915"}, "reply_to_user": {"reputation": 3279, "user_id": 1459036, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yeDJp.jpg?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/1459036/brad"}, "edited": false, "score": 0, "creation_date": 1534361439, "post_id": 51864804, "comment_id": 90682627, "body": "@Brad how is possible convert only a date?"}, {"owner": {"reputation": 968, "user_id": 5910169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601a40180e3fa49fbf4e55145adf54d9?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Ball", "link": "https://stackoverflow.com/users/5910169/frank-ball"}, "edited": false, "score": 0, "creation_date": 1534364210, "post_id": 51864804, "comment_id": 90683791, "body": "Your code is doing nothing more than taking a date and returning that very same date.  Dates don&#39;t have formats until you display them.  Once you&#39;re displaying them, then you use a specific format to determine how you display the date.  The time portion of your date is nothing more than the precision of the date.  Seeing 08/15/2018 12:00:00 AM for 08/15/2018 is the same as seeing 100.00 for 100.  The values are identical , the only difference is how they look."}, {"owner": {"reputation": 3279, "user_id": 1459036, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yeDJp.jpg?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/1459036/brad"}, "edited": false, "score": 0, "creation_date": 1534532694, "post_id": 51864804, "comment_id": 90754149, "body": "@user10230915 you would do what you are doing now, but just not return it as a datetime, just return a string.  Or move the formatting of the date to wherever you are displaying it."}], "answers": [{"tags": [], "owner": {"reputation": 3268, "user_id": 9850970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/85lTf.png?s=128&g=1", "display_name": "Aldert", "link": "https://stackoverflow.com/users/9850970/aldert"}, "is_accepted": false, "score": 1, "last_activity_date": 1534359974, "creation_date": 1534359974, "answer_id": 51864910, "question_id": 51864804, "link": "https://stackoverflow.com/questions/51864804/cannot-convert-date-into-specific-format/51864910#51864910", "title": "Cannot convert date into specific format", "body": "<p>Return matchCalendarDate.Date; returns the date component, time set to zero</p>\n"}, {"comments": [{"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 1, "creation_date": 1534360329, "post_id": 51864938, "comment_id": 90682143, "body": "This would not compile"}, {"owner": {"reputation": 547, "user_id": 6774208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x98Oe.png?s=128&g=1", "display_name": "kishea", "link": "https://stackoverflow.com/users/6774208/kishea"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1535282842, "post_id": 51864938, "comment_id": 91001654, "body": "The code was autoformated by the app. I Edited the Answer. Please check if it still applies."}], "tags": [], "owner": {"reputation": 547, "user_id": 6774208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x98Oe.png?s=128&g=1", "display_name": "kishea", "link": "https://stackoverflow.com/users/6774208/kishea"}, "is_accepted": false, "score": 0, "last_activity_date": 1535282746, "last_edit_date": 1535282746, "creation_date": 1534360105, "answer_id": 51864938, "question_id": 51864804, "link": "https://stackoverflow.com/questions/51864804/cannot-convert-date-into-specific-format/51864938#51864938", "title": "Cannot convert date into specific format", "body": "<p>You may have to consider converting to the original format first then to your required format</p>\n\n<pre><code> private  DateTimeDateTime _matchCalendarDate, _matchCalendarD = DateTime.Now;\n\n    public DateTime MatchCalendarDate\n    {\n       get\n       {\n          var date = _matchCalendarDate.Value.ToString(\"dd-MM-yyyy\");\n\n          var dt = DateTime.ParseExact(date, \"MM/dd/yyyy hh:mm:ss tt\", CultureInfo.InvariantCulture);\n\n          var c = dt.ToString(\"dd/M/yyyy\", CultureInfo.InvariantCulture);\n\n          return c;\n       }\n       set\n       {\n          _matchCalendarDate = value;\n          OnPropertyChanged();\n       }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "is_accepted": true, "score": 1, "last_activity_date": 1549318258, "last_edit_date": 1549318258, "creation_date": 1534361770, "answer_id": 51865272, "question_id": 51864804, "link": "https://stackoverflow.com/questions/51864804/cannot-convert-date-into-specific-format/51865272#51865272", "title": "Cannot convert date into specific format", "body": "<p>When you say it returns <code>8/15/2018 12:00:00 AM</code>, I'm guessing you're simply calling <code>ToString()</code> on the property, like so:</p>\n\n<pre><code>MatchCalendarDate.ToString();\n</code></pre>\n\n<p>The thing is, a <code>DateTime</code> object doesn't have it's own inherent 'format'. It's format is whatever you want it to be.</p>\n\n<p>So when you actually use the property to print the value it returns, you can choose how you want it do be displayed.</p>\n\n<p>Something like;</p>\n\n<pre><code>MatchCalendarDate.ToString(\"dd-MM-yyyy\");\n</code></pre>\n\n<p>But then, that essentially renders the conversion in your property redundant. So assuming your intention is to store a <code>DateTime</code> object, but retrieve it in the format you like, what you should do is declare a second string property that does the conversion for you.</p>\n"}], "owner": {"reputation": 23, "user_id": 10230915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c20ca5e09e6d5b149271293eb4ff5304?s=128&d=identicon&r=PG&f=1", "display_name": "user10230915", "link": "https://stackoverflow.com/users/10230915/user10230915"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 1, "accepted_answer_id": 51865272, "answer_count": 3, "score": 0, "last_activity_date": 1549318258, "creation_date": 1534359491, "question_id": 51864804, "link": "https://stackoverflow.com/questions/51864804/cannot-convert-date-into-specific-format", "title": "Cannot convert date into specific format", "body": "<p>I'm trying to convert a <code>Date</code> into a specific format, I saw a lot of questions here with the same target but all the proposed solutions return a string, I need to return a <code>DateTime</code> in my custom format. </p>\n\n<p>This is my code:</p>\n\n<pre><code>private DateTime? _matchCalendarDate = DateTime.Now;\n\npublic DateTime? MatchCalendarDate\n{\n   get\n   {\n      var date = _matchCalendarDate.Value.ToString(\"dd-MM-yyyy\");\n      var c = DateTime.ParseExact(date, \"dd-MM-yyyy\", CultureInfo.InvariantCulture);\n      return c;\n   }\n   set\n   {\n      _matchCalendarDate = value;\n      OnPropertyChanged();\n   }\n}\n</code></pre>\n\n<p>this return: <code>8/15/2018 12:00:00 AM</code> but should return <code>15/08/2018</code></p>\n"}, {"tags": ["c#", "string"], "comments": [{"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1534359406, "post_id": 51864673, "comment_id": 90681730, "body": "Your time measurements may have been affected by the <code>Console.WriteLine()</code> between the <code>Start()</code> and <code>Stop()</code> of the timer. The <code>WriteLine()</code> is costly and slows things down a lot. You may want to eliminate that and do a measurement first."}, {"owner": {"reputation": 202711, "user_id": 1197518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cjKiP.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/1197518/steve"}, "edited": false, "score": 0, "creation_date": 1534359412, "post_id": 51864673, "comment_id": 90681731, "body": "Not the answer, but... Change ReadAllLines with ReadLines and change Substring with IndexOf. Redo your tests"}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "reply_to_user": {"reputation": 93997, "user_id": 3010968, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5c9bc5babd6d3ceafcc3f95fbdd5b313?s=128&d=identicon&r=PG&f=1", "display_name": "Selman Gen&#231;", "link": "https://stackoverflow.com/users/3010968/selman-gen%c3%a7"}, "edited": false, "score": 0, "creation_date": 1534359643, "post_id": 51864673, "comment_id": 90681836, "body": "@SelmanGen&#231;, the OP already pointed to that question."}, {"owner": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "edited": false, "score": 5, "creation_date": 1534359660, "post_id": 51864673, "comment_id": 90681845, "body": "Console.WriteLine and File.ReadAllLines are orders of magnitude slower than anything related to the actual test. When measuring performance, also make sure you&#39;re compiling in Release mode and &#39;warm up&#39; your code (make sure everyting is JIT compiled by calling each function once)"}, {"owner": {"reputation": 93997, "user_id": 3010968, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5c9bc5babd6d3ceafcc3f95fbdd5b313?s=128&d=identicon&r=PG&f=1", "display_name": "Selman Gen&#231;", "link": "https://stackoverflow.com/users/3010968/selman-gen%c3%a7"}, "reply_to_user": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1534359664, "post_id": 51864673, "comment_id": 90681847, "body": "@Sach oh didn&#39;t realize it"}, {"owner": {"reputation": 93997, "user_id": 3010968, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5c9bc5babd6d3ceafcc3f95fbdd5b313?s=128&d=identicon&r=PG&f=1", "display_name": "Selman Gen&#231;", "link": "https://stackoverflow.com/users/3010968/selman-gen%c3%a7"}, "reply_to_user": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "edited": false, "score": 1, "creation_date": 1534359960, "post_id": 51864673, "comment_id": 90681982, "body": "@jeroenh is right, you can also use libraries that are specifically dedicated to benchmarking like Benchmark.NET"}, {"owner": {"reputation": 115, "user_id": 3508594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa50ff9515a992579b421ed85c73c6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mardoch", "link": "https://stackoverflow.com/users/3508594/mardoch"}, "edited": false, "score": 0, "creation_date": 1534360018, "post_id": 51864673, "comment_id": 90682005, "body": "I&#39;m not worried about the cost of the Console.WriteLine or the File.ReadAllLines from the code above. I&#39;m only running this test code to generate some comparative numbers that aren&#39;t from the multi-minute runtime of the real application the code came from"}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "reply_to_user": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "edited": false, "score": 1, "creation_date": 1534360539, "post_id": 51864673, "comment_id": 90682249, "body": "<i>only running this test code to generate some comparative numbers</i>. Those numbers are affected by the read and write operations. As @jeroenh pointed out, if you do a proper test the results are different. I did a similar test with one line which contains one <code>.</code> repeated 2 million times, and I got roughly 2400ms vs 2000ms in favor of <code>CountOccurrences()</code>."}, {"owner": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "edited": false, "score": 0, "creation_date": 1534361129, "post_id": 51864673, "comment_id": 90682503, "body": "@Mardoch the point is not whether you should worry about Console.WriteLine or File.ReadAllLines. The point is that both of those methods make the test pointless if you include them in the measurements."}, {"owner": {"reputation": 115, "user_id": 3508594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa50ff9515a992579b421ed85c73c6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mardoch", "link": "https://stackoverflow.com/users/3508594/mardoch"}, "reply_to_user": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "edited": false, "score": 0, "creation_date": 1534361204, "post_id": 51864673, "comment_id": 90682530, "body": "@jeroenh ah, well, I do suppose that&#39;s fair. Just noise, as it were."}, {"owner": {"reputation": 1239, "user_id": 2382272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LsINL.png?s=128&g=1", "display_name": "Ilhan", "link": "https://stackoverflow.com/users/2382272/ilhan"}, "edited": false, "score": 3, "creation_date": 1534630514, "post_id": 51864673, "comment_id": 90775990, "body": "I&#39;m the author of that SO question you mentioned in the link! Please note that when doing benchmarks and profiling there is no one solution that works equally for all problems. In my case the issue was generation of hundreds of milions possibly billions of substrings and the GC couldn&#39;t simply keep up collecting. Avoid IO operations as pointed out and compute averages on at least 100 runs. In my case the performance increase was 3000% in that particular special use case but in some general scenario the speed increase on .NET is between 2x and 4x from my personal experience."}, {"owner": {"reputation": 1239, "user_id": 2382272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LsINL.png?s=128&g=1", "display_name": "Ilhan", "link": "https://stackoverflow.com/users/2382272/ilhan"}, "edited": false, "score": 1, "creation_date": 1534630601, "post_id": 51864673, "comment_id": 90776005, "body": "Also note that I was optimizing that routine for months up to the point of decompiling it down to IL and comparing different versions of the same code untill I&#39;ve &quot;hit the jackpot&quot;."}, {"owner": {"reputation": 115, "user_id": 3508594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa50ff9515a992579b421ed85c73c6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mardoch", "link": "https://stackoverflow.com/users/3508594/mardoch"}, "reply_to_user": {"reputation": 1239, "user_id": 2382272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LsINL.png?s=128&g=1", "display_name": "Ilhan", "link": "https://stackoverflow.com/users/2382272/ilhan"}, "edited": false, "score": 1, "creation_date": 1534656940, "post_id": 51864673, "comment_id": 90779503, "body": "Hey @Ilhan! I hadn&#39;t even considered span in this way before I saw one of the .Net team link your SO question on Twitter. This is really my first venture into something really perf intensive in this way so it was a pure learning experience. Thanks for posting your solution to your own question."}, {"owner": {"reputation": 1239, "user_id": 2382272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LsINL.png?s=128&g=1", "display_name": "Ilhan", "link": "https://stackoverflow.com/users/2382272/ilhan"}, "edited": false, "score": 0, "creation_date": 1534683357, "post_id": 51864673, "comment_id": 90785479, "body": "May I have a link to he twitter post? You got me curious now =). But yes  the speed increase is mainly due to the memory copying avoided with Span."}, {"owner": {"reputation": 115, "user_id": 3508594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa50ff9515a992579b421ed85c73c6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mardoch", "link": "https://stackoverflow.com/users/3508594/mardoch"}, "edited": false, "score": 1, "creation_date": 1534718794, "post_id": 51864673, "comment_id": 90794451, "body": "Sorry, I misremembered the actual source of the post. It&#39;s this one <a href=\"https://twitter.com/vcsjones/status/1028484794676600833\" rel=\"nofollow noreferrer\">twitter.com/vcsjones/status/1028484794676600833</a> and it appeared in my stream through a retweet from David Fowler."}], "answers": [{"comments": [{"owner": {"reputation": 48971, "user_id": 571563, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ce5650bd7433e6f5bd0164a309b69608?s=128&d=identicon&r=PG", "display_name": "Chris Shain", "link": "https://stackoverflow.com/users/571563/chris-shain"}, "edited": false, "score": 0, "creation_date": 1534360374, "post_id": 51864934, "comment_id": 90682166, "body": "To add to this answer... Because of the string creation and subsequent GC activity, the relative performance will probably vary significantly depending on available resources, the lengths of the substrings, etc."}, {"owner": {"reputation": 115, "user_id": 3508594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa50ff9515a992579b421ed85c73c6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mardoch", "link": "https://stackoverflow.com/users/3508594/mardoch"}, "edited": false, "score": 0, "creation_date": 1534361793, "post_id": 51864934, "comment_id": 90682769, "body": "That&#39;s interesting. I took your code, and ran it on my machine and added an additional method to check. I also ran my file in the same fashion immediately after ward and my results look like this:  Text CountOccurencesIndexOf Done in 1342 ms Text CountOccurencesSequenceEqual Done in 1072 ms Text CountOccurencesSub Done in 1729 ms File CountOccurencesIndexOf Done in 1274 ms File CountOccurencesSequenceEqual Done in 1028 ms File CountOccurencesSub Done in 1619 ms  So A) the shape of the strings matters a lot and B) SequenceEqual is by far the best choice."}], "tags": [], "owner": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "is_accepted": false, "score": 4, "last_activity_date": 1534360085, "creation_date": 1534360085, "answer_id": 51864934, "question_id": 51864673, "link": "https://stackoverflow.com/questions/51864673/c-readonlyspanchar-vs-substring-for-string-dissection/51864934#51864934", "title": "C# ReadOnlySpan&lt;char&gt; vs Substring for string dissection", "body": "<p>I was intrigued and tried to repeat your test. Depending on how large the data set is, the code using <code>ReadOnlySpan</code> performs almost twice as fast:</p>\n\n<pre><code>CountOccurences Done in 1080 ms\nCountOccurencesSub Done in 1789 ms\n</code></pre>\n\n<p>With larger data sets, the difference seems to increase (which seems logical as Substring allocates a string, which increases GC pressure).</p>\n\n<p>I used this code to test:</p>\n\n<pre><code>static void Main(string[] args)\n{\n    var r = new Random();\n\n    // generate 100000 lines of 1000 random characters\n    var text = Enumerable.Range(0, 100000).Select(x =&gt; new string(Enumerable.Range(0, 1000).Select(i =&gt; (char)r.Next(255)).ToArray())).ToArray();\n\n    // warm up\n    \"\".CountOccurrencesSub(\"\");\n    \"\".CountOccurrences(\"\");\n\n    Measure(text, \"CountOccurencesSub\", s =&gt; s.CountOccurrencesSub(\".\"));\n\n    Measure(text, \"CountOccurences\", s =&gt; s.CountOccurrences(\".\"));\n\n    Console.ReadKey();\n}\n\nprivate static void Measure(string[] text, string test, Action&lt;string&gt; action)\n{\n    Stopwatch sw = new Stopwatch();\n    sw.Start();\n\n    foreach (string s in text)\n    {\n        action(s);\n    }\n\n    sw.Stop();\n\n    Console.WriteLine($\"{test} Done in {sw.ElapsedMilliseconds} ms\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 3508594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa50ff9515a992579b421ed85c73c6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mardoch", "link": "https://stackoverflow.com/users/3508594/mardoch"}, "edited": false, "score": 0, "creation_date": 1534427157, "post_id": 51868303, "comment_id": 90708480, "body": "I noted the difference in Core vs Framework performance myself and I&#39;m guessing it&#39;s due to peculiarities in the underlying implementations? I definitely still find value in your answer and thanks for the time you put into it! I&#39;ve learned much more than I expected by asking this question."}, {"owner": {"reputation": 2009, "user_id": 8656352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QowvE.jpg?s=128&g=1", "display_name": "Adam Simon", "link": "https://stackoverflow.com/users/8656352/adam-simon"}, "reply_to_user": {"reputation": 115, "user_id": 3508594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa50ff9515a992579b421ed85c73c6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mardoch", "link": "https://stackoverflow.com/users/3508594/mardoch"}, "edited": false, "score": 0, "creation_date": 1534429936, "post_id": 51868303, "comment_id": 90710505, "body": "I&#39;m glad to read you&#39;ve found my efforts helpful. It&#39;s likely that there are some implementational differences explaining the results of the Span approach but I&#39;m afraid only someone insider would be able to shed light on this..."}, {"owner": {"reputation": 1239, "user_id": 2382272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LsINL.png?s=128&g=1", "display_name": "Ilhan", "link": "https://stackoverflow.com/users/2382272/ilhan"}, "edited": false, "score": 0, "creation_date": 1534631101, "post_id": 51868303, "comment_id": 90776085, "body": "I&#39;m the author of the referenced SO question (and answer). My initial post was about that specific code segment which was bottlenecked due to an insane amount of substrings generated and the GC not being able to handle it very well. Quite literally reading it from the memory using Span&lt;T&gt; made a 3000% difference. Note that I am optimizing a small function for months up to the point of decompiling it to IL and comparing different styles of implementation. Some personal tests (although undocumented and not as thorough as yours) yielded roughly the same results (cca 2-4x performance increase)"}, {"owner": {"reputation": 732, "user_id": 9750451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0df0dd42da08ba3574f565287e531039?s=128&d=identicon&r=PG", "display_name": "Andy Ayers", "link": "https://stackoverflow.com/users/9750451/andy-ayers"}, "edited": false, "score": 2, "creation_date": 1535905493, "post_id": 51868303, "comment_id": 91227399, "body": "The implementation and optimization of <code>Span&lt;T&gt;</code> is different on full framework than it it on core, and on full framework code using span will run more slowly than on core (sometimes referred to as <a href=\"http://adamsitnik.com/Span/\" rel=\"nofollow noreferrer\">&quot;fast span&quot; vs &quot;slow span&quot;</a>)."}], "tags": [], "owner": {"reputation": 2009, "user_id": 8656352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QowvE.jpg?s=128&g=1", "display_name": "Adam Simon", "link": "https://stackoverflow.com/users/8656352/adam-simon"}, "is_accepted": true, "score": 17, "last_activity_date": 1534381286, "creation_date": 1534381286, "answer_id": 51868303, "question_id": 51864673, "link": "https://stackoverflow.com/questions/51864673/c-readonlyspanchar-vs-substring-for-string-dissection/51868303#51868303", "title": "C# ReadOnlySpan&lt;char&gt; vs Substring for string dissection", "body": "<p>Although I'm a bit late to the party but I think I can still add relevant information to this topic.</p>\n\n<p>First of all, some words about the other posters' measurements.</p>\n\n<p>OP's results are clearly incorrect. As it was pointed out in the comments, the I/O operations completely distorts the stats.</p>\n\n<p>The poster of the accepted answer is on the right track. His method eliminates the slow I/O operations and focuses clearly on the subject of the benchmark. However, he doesn't mention the environment (especially the .NET runtime) used and his \"warm-up method\" is rather debatable.</p>\n\n<p>Performance measurement is a really tricky business, it's very hard to get it right. I wouldn't even try to code it myself if I wanted to get valid results. So I decided to check out this issue using the widely-adopted <a href=\"https://benchmarkdotnet.org/\" rel=\"noreferrer\">Benchmark.NET</a> library. To make this all more interesting I added a third candidate to the mix. This implementation uses <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.string.compareordinal?redirectedfrom=MSDN&amp;view=netframework-4.7.2#System_String_CompareOrdinal_System_String_System_Int32_System_String_System_Int32_System_Int32_\" rel=\"noreferrer\">String.CompareOrdinal</a> for occurence counting and I expected pretty good results from it.</p>\n\n<h2>The benchmark</h2>\n\n<p>Before the measurement starts (at the global setup stage), I generate 1,000,000 lines of lorem ipsum text. This data is used throughout the measurement.</p>\n\n<p>Each method is exercised with 1,000 and 1,000,000 lines and with a shorter (5 characters long) and a longer (39 characters long) search text.</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing BenchmarkDotNet.Attributes;\nusing BenchmarkDotNet.Running;\n\nnamespace MyBenchmarks\n{\n#if NETCOREAPP2_1\n    [CoreJob]\n#else\n    [ClrJob]\n#endif\n    [RankColumn, MarkdownExporterAttribute.StackOverflow]\n    public class Benchmark\n    {\n        static readonly string[] words = new[]\n        {\n            \"lorem\", \"ipsum\", \"dolor\", \"sit\", \"amet\", \"consectetuer\",\n            \"adipiscing\", \"elit\", \"sed\", \"diam\", \"nonummy\", \"nibh\", \"euismod\",\n            \"tincidunt\", \"ut\", \"laoreet\", \"dolore\", \"magna\", \"aliquam\", \"erat\"\n        };\n\n        // borrowed from greg (https://stackoverflow.com/questions/4286487/is-there-any-lorem-ipsum-generator-in-c)\n        static IEnumerable&lt;string&gt; LoremIpsum(Random random, int minWords, int maxWords, int minSentences, int maxSentences, int numLines)\n        {\n            var line = new StringBuilder();\n            for (int l = 0; l &lt; numLines; l++)\n            {\n                line.Clear();\n                var numSentences = random.Next(maxSentences - minSentences) + minSentences + 1;\n                for (int s = 0; s &lt; numSentences; s++)\n                {\n                    var numWords = random.Next(maxWords - minWords) + minWords + 1;\n                    line.Append(words[random.Next(words.Length)]);\n                    for (int w = 1; w &lt; numWords; w++)\n                    {\n                        line.Append(\" \");\n                        line.Append(words[random.Next(words.Length)]);\n                    }\n                    line.Append(\". \");\n                }\n                yield return line.ToString();\n            }\n        }\n\n        string[] lines;\n\n        [Params(1000, 1_000_000)]\n        public int N;\n\n        [Params(\"lorem\", \"lorem ipsum dolor sit amet consectetuer\")]\n        public string SearchValue;\n\n        [GlobalSetup]\n        public void GlobalSetup()\n        {\n            lines = LoremIpsum(new Random(), 6, 8, 2, 3, 1_000_000).ToArray();\n        }\n\n        public static int CountOccurrencesSub(string val, string searchFor)\n        {\n            if (string.IsNullOrEmpty(val) || string.IsNullOrEmpty(searchFor))\n            { return 0; }\n\n            int count = 0;\n\n            for (int x = 0; x &lt;= val.Length - searchFor.Length; x++)\n            {\n                if (val.Substring(x, searchFor.Length) == searchFor)\n                { count++; }\n            }\n\n            return count;\n        }\n\n        public static int CountOccurrences(string val, string searchFor)\n        {\n            if (string.IsNullOrEmpty(val) || string.IsNullOrEmpty(searchFor))\n            { return 0; }\n\n            int count = 0;\n\n            ReadOnlySpan&lt;char&gt; vSpan = val.AsSpan();\n            ReadOnlySpan&lt;char&gt; searchSpan = searchFor.AsSpan();\n\n            for (int x = 0; x &lt;= vSpan.Length - searchSpan.Length; x++)\n            {\n                if (vSpan.Slice(x, searchSpan.Length).SequenceEqual(searchSpan))\n                { count++; }\n            }\n\n            return count;\n        }\n\n        public static int CountOccurrencesCmp(string val, string searchFor)\n        {\n            if (string.IsNullOrEmpty(val) || string.IsNullOrEmpty(searchFor))\n            { return 0; }\n\n            int count = 0;\n\n            for (int x = 0; x &lt;= val.Length - searchFor.Length; x++)\n            {\n                if (string.CompareOrdinal(val, x, searchFor, 0, searchFor.Length) == 0)\n                { count++; }\n            }\n\n            return count;\n        }\n\n\n        [Benchmark(Baseline = true)]\n        public int Substring()\n        {\n            int occurences = 0;\n            for (var i = 0; i &lt; N; i++)\n                occurences += CountOccurrencesSub(lines[i], SearchValue);\n            return occurences;\n        }\n\n        [Benchmark]\n        public int Span()\n        {\n            int occurences = 0;\n            for (var i = 0; i &lt; N; i++)\n                occurences += CountOccurrences(lines[i], SearchValue);\n            return occurences;\n        }\n\n        [Benchmark]\n        public int Compare()\n        {\n            int occurences = 0;\n            for (var i = 0; i &lt; N; i++)\n                occurences += CountOccurrencesCmp(lines[i], SearchValue);\n            return occurences;\n        }\n    }\n\n    public class Program\n    {\n        public static void Main(string[] args)\n        {\n            BenchmarkRunner.Run&lt;Benchmark&gt;();\n        }\n    }\n}\n</code></pre>\n\n<h2>The results</h2>\n\n<p><strong>NET Core 2.1</strong></p>\n\n<pre><code>BenchmarkDotNet=v0.11.0, OS=Windows 7 SP1 (6.1.7601.0)\nIntel Core i3-4360 CPU 3.70GHz (Haswell), 1 CPU, 4 logical and 2 physical cores\nFrequency=3604970 Hz, Resolution=277.3948 ns, Timer=TSC\n.NET Core SDK=2.1.400\n  [Host] : .NET Core 2.1.2 (CoreCLR 4.6.26628.05, CoreFX 4.6.26629.01), 64bit RyuJIT\n  Core   : .NET Core 2.1.2 (CoreCLR 4.6.26628.05, CoreFX 4.6.26629.01), 64bit RyuJIT\n\nJob=Core  Runtime=Core  \n\n    Method |       N |          SearchValue |           Mean |           Error |          StdDev |         Median | Scaled | ScaledSD | Rank |\n---------- |-------- |--------------------- |---------------:|----------------:|----------------:|---------------:|-------:|---------:|-----:|\n Substring |    1000 |                lorem |     2,149.4 us |       2.2763 us |       2.1293 us |     2,149.4 us |   1.00 |     0.00 |    3 |\n      Span |    1000 |                lorem |       555.5 us |       0.2786 us |       0.2470 us |       555.5 us |   0.26 |     0.00 |    1 |\n   Compare |    1000 |                lorem |     1,471.8 us |       0.2133 us |       0.1891 us |     1,471.8 us |   0.68 |     0.00 |    2 |\n           |         |                      |                |                 |                 |                |        |          |      |\n Substring |    1000 | lorem(...)etuer [39] |     2,128.7 us |       1.0414 us |       0.9741 us |     2,128.6 us |   1.00 |     0.00 |    3 |\n      Span |    1000 | lorem(...)etuer [39] |       388.9 us |       0.0440 us |       0.0412 us |       388.9 us |   0.18 |     0.00 |    1 |\n   Compare |    1000 | lorem(...)etuer [39] |     1,215.6 us |       0.7016 us |       0.6220 us |     1,215.5 us |   0.57 |     0.00 |    2 |\n           |         |                      |                |                 |                 |                |        |          |      |\n Substring | 1000000 |                lorem | 2,239,510.8 us | 241,887.0796 us | 214,426.5747 us | 2,176,083.7 us |   1.00 |     0.00 |    3 |\n      Span | 1000000 |                lorem |   558,317.4 us |     447.3105 us |     418.4144 us |   558,338.9 us |   0.25 |     0.02 |    1 |\n   Compare | 1000000 |                lorem | 1,471,941.2 us |     190.7533 us |     148.9276 us | 1,471,955.8 us |   0.66 |     0.05 |    2 |\n           |         |                      |                |                 |                 |                |        |          |      |\n Substring | 1000000 | lorem(...)etuer [39] | 2,350,820.3 us |  46,974.4500 us | 115,229.1264 us | 2,327,187.2 us |   1.00 |     0.00 |    3 |\n      Span | 1000000 | lorem(...)etuer [39] |   433,567.7 us |  14,445.7191 us |  42,593.5286 us |   417,333.4 us |   0.18 |     0.02 |    1 |\n   Compare | 1000000 | lorem(...)etuer [39] | 1,299,065.2 us |  25,474.8504 us |  46,582.2045 us | 1,296,892.8 us |   0.55 |     0.03 |    2 |  \n</code></pre>\n\n<p><strong>NET Framework 4.7.2</strong></p>\n\n<pre><code>BenchmarkDotNet=v0.11.0, OS=Windows 7 SP1 (6.1.7601.0)\nIntel Core i3-4360 CPU 3.70GHz (Haswell), 1 CPU, 4 logical and 2 physical cores\nFrequency=3604960 Hz, Resolution=277.3956 ns, Timer=TSC\n  [Host] : .NET Framework 4.7.2 (CLR 4.0.30319.42000), 64bit RyuJIT-v4.7.3062.0\n  Clr    : .NET Framework 4.7.2 (CLR 4.0.30319.42000), 64bit RyuJIT-v4.7.3062.0\n\nJob=Clr  Runtime=Clr  \n\n    Method |       N |          SearchValue |           Mean |          Error |          StdDev |         Median | Scaled | ScaledSD | Rank |\n---------- |-------- |--------------------- |---------------:|---------------:|----------------:|---------------:|-------:|---------:|-----:|\n Substring |    1000 |                lorem |     2,025.8 us |      2.4639 us |       1.9237 us |     2,025.4 us |   1.00 |     0.00 |    3 |\n      Span |    1000 |                lorem |     1,216.6 us |      4.2994 us |       4.0217 us |     1,217.8 us |   0.60 |     0.00 |    1 |\n   Compare |    1000 |                lorem |     1,295.5 us |      5.2427 us |       4.6475 us |     1,293.1 us |   0.64 |     0.00 |    2 |\n           |         |                      |                |                |                 |                |        |          |      |\n Substring |    1000 | lorem(...)etuer [39] |     1,939.5 us |      0.4428 us |       0.4142 us |     1,939.3 us |   1.00 |     0.00 |    3 |\n      Span |    1000 | lorem(...)etuer [39] |       944.9 us |      2.6648 us |       2.3622 us |       944.7 us |   0.49 |     0.00 |    1 |\n   Compare |    1000 | lorem(...)etuer [39] |     1,002.0 us |      0.2475 us |       0.2067 us |     1,002.1 us |   0.52 |     0.00 |    2 |\n           |         |                      |                |                |                 |                |        |          |      |\n Substring | 1000000 |                lorem | 2,065,805.7 us |  2,009.2139 us |   1,568.6619 us | 2,065,555.1 us |   1.00 |     0.00 |    3 |\n      Span | 1000000 |                lorem | 1,209,976.4 us |  6,238.6091 us |   5,835.5982 us | 1,206,554.3 us |   0.59 |     0.00 |    1 |\n   Compare | 1000000 |                lorem | 1,303,321.8 us |  1,257.7418 us |   1,114.9552 us | 1,303,330.1 us |   0.63 |     0.00 |    2 |\n           |         |                      |                |                |                 |                |        |          |      |\n Substring | 1000000 | lorem(...)etuer [39] | 2,085,652.9 us | 62,651.7471 us | 168,309.8501 us | 1,973,522.2 us |   1.00 |     0.00 |    3 |\n      Span | 1000000 | lorem(...)etuer [39] |   958,421.2 us |  3,703.5508 us |   3,464.3034 us |   958,324.9 us |   0.46 |     0.03 |    1 |\n   Compare | 1000000 | lorem(...)etuer [39] | 1,007,936.8 us |    802.1730 us |     750.3531 us | 1,007,680.3 us |   0.49 |     0.04 |    2 |\n</code></pre>\n\n<h2>Conclusion</h2>\n\n<p><strong>It's clear that there is a solid performance gain using Span&lt;T&gt;</strong>. What's somewhat surprising that it's 4-5x on .NET Core and only 2x on .NET Framework. What reasons could be behind that? Does anyone have a clue?</p>\n\n<p><strong><em>String.CompareOrdinal</em> performs pretty good as well.</strong> I expected somewhat better results because theoretically it's just the same byte by byte compare but it's not bad at all. On .NET Framework it's a viable option by all means.</p>\n\n<p>The length of the search string (except for extremities, of course) doesn't seem to have too much impact on the results.</p>\n"}, {"tags": [], "owner": {"reputation": 322, "user_id": 1751490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c042ae9fd1fcef04c0abe6bc4dd0aec?s=128&d=identicon&r=PG", "display_name": "PESMITH_MSFT", "link": "https://stackoverflow.com/users/1751490/pesmith-msft"}, "is_accepted": false, "score": -1, "last_activity_date": 1537937074, "creation_date": 1537937074, "answer_id": 52510087, "question_id": 51864673, "link": "https://stackoverflow.com/questions/51864673/c-readonlyspanchar-vs-substring-for-string-dissection/52510087#52510087", "title": "C# ReadOnlySpan&lt;char&gt; vs Substring for string dissection", "body": "<p>The performance benchmark that hurt me the most with ReadOnlySpan is that it put me in a world of hurt when I tried to use it in an app that gets put into the Windows app store. The ReadOnlySpan&lt;> stuff isn't compatible (yet, it seems) with compiling with the .NETNative tool chain. That, in turn may (or may not) trigger a cascade of subsequent WACK test errors that will block submission to the store.</p>\n\n<p>So far, I've spent two days just trying to get an app that uses ReadOnlySpan&lt;> into the store. That far, far outweighs any possible performance improvements I might have potentially gotten.</p>\n"}], "owner": {"reputation": 115, "user_id": 3508594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa50ff9515a992579b421ed85c73c6cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mardoch", "link": "https://stackoverflow.com/users/3508594/mardoch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5982, "favorite_count": 2, "accepted_answer_id": 51868303, "answer_count": 3, "score": 8, "last_activity_date": 1537937074, "creation_date": 1534358900, "question_id": 51864673, "link": "https://stackoverflow.com/questions/51864673/c-readonlyspanchar-vs-substring-for-string-dissection", "title": "C# ReadOnlySpan&lt;char&gt; vs Substring for string dissection", "body": "<p>I have a fairly simple string extension method that gets called very frequently in a system I have that is doing a lot of string manipulations. I read this post (<a href=\"https://stackoverflow.com/questions/51673659/string-substring-seems-to-bottleneck-this-code/51681829\">String.Substring() seems to bottleneck this code</a>) and thought I would try the same method to see if I could find some performance by changing how I'm reading the string. My results are not quite what I was expecting (I was expecting ReadOnlySpan to provide a significant perf boost), and I'm wondering why that is. In my production code on a real run I found a very slight loss of performance.</p>\n\n<p>I generated a file with ~1.15 million rows of strings with the character I care about, called the method on each, and dumped the results to console. </p>\n\n<p>My results (runtime in milliseconds) are:</p>\n\n<pre><code>ReadOnlySpan.IndexOf Framework 4.7.1: 68538\nReadOnlySpan.IndexOf Core 2.1: 64486\n\nReadOnlySpan.SequenceEqual Framework 4.7.1: 63650\nReadOnlySpan.SequenceEqual Core 2.1: 65071\n\nsubstring Framework 4.7.1: 63508\nsubstring Core 2.1: 64125\n</code></pre>\n\n<p><br>The code (all identical from Full Framework to Core 2.1):</p>\n\n<p>The calling code:</p>\n\n<pre><code>static void Main(string[] args)\n{\n    Stopwatch sw = new Stopwatch();\n    sw.Start();\n\n    var f = File.ReadAllLines(\"periods.CSV\");\n\n    foreach (string s in f)\n    { Console.WriteLine(s.CountOccurrences(\".\")); }\n\n    sw.Stop();\n    Console.WriteLine(\"Done in \" + sw.ElapsedMilliseconds + \" ms\");\n    Console.ReadKey();\n}\n</code></pre>\n\n<p><br>The original substring form of my method:</p>\n\n<pre><code>public static int CountOccurrencesSub(this string val, string searchFor)\n{\n    if (string.IsNullOrEmpty(val) || string.IsNullOrEmpty(searchFor))\n    { return 0; }\n\n    int count = 0;\n\n    for (int x = 0; x &lt;= val.Length - searchFor.Length; x++)\n    {\n        if (val.Substring(x, searchFor.Length) == searchFor)\n        { count++; }\n    }\n\n    return count;\n}\n</code></pre>\n\n<p><br>The ReadOnlySpan version (which I've tested with both IndexOf and SequenceEqual for equality checks):</p>\n\n<pre><code>public static int CountOccurrences(this string val, string searchFor)\n{\n    if (string.IsNullOrEmpty(val) || string.IsNullOrEmpty(searchFor))\n    { return 0; }\n\n    int count = 0;\n\n    ReadOnlySpan&lt;char&gt; vSpan = val.AsSpan();\n    ReadOnlySpan&lt;char&gt; searchSpan = searchFor.AsSpan();\n\n    for (int x = 0; x &lt;= vSpan.Length - searchSpan.Length; x++)\n    {\n        if (vSpan.Slice(x, searchSpan.Length).SequenceEqual(searchSpan))\n        { count++; }\n    }\n\n    return count;\n}\n</code></pre>\n\n<p><br>\nDoes the equality comparison do an allocation in the methods I'm calling, and therefor no boost? Is this just not a good application for ReadOnlySpan? Am I just plain old missing something?</p>\n"}, {"tags": ["c#", "wpf", "mvvm"], "comments": [{"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1534360961, "post_id": 51864618, "comment_id": 90682431, "body": "Maybe you can try setting column&#39;s <code>Visibility</code> to <code>Collapsed</code>."}, {"owner": {"reputation": 192, "user_id": 7320670, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zHkkti_b39I/AAAAAAAAAAI/AAAAAAAAHsw/DJMm4iH7PCY/photo.jpg?sz=128", "display_name": "Rutger Vk", "link": "https://stackoverflow.com/users/7320670/rutger-vk"}, "edited": false, "score": 0, "creation_date": 1534361694, "post_id": 51864618, "comment_id": 90682735, "body": "can you use like an ObservableCollection instead of a datatable? and bind to that"}, {"owner": {"reputation": 69, "user_id": 4019882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-AZWjz_aKI_8/AAAAAAAAAAI/AAAAAAAAAKg/JuGgeCibXeM/photo.jpg?sz=128", "display_name": "TTalma", "link": "https://stackoverflow.com/users/4019882/ttalma"}, "edited": false, "score": 0, "creation_date": 1534429301, "post_id": 51864618, "comment_id": 90710033, "body": "I tried the ObservableCollection, Unfortunately the end result was the same."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4019882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-AZWjz_aKI_8/AAAAAAAAAAI/AAAAAAAAAKg/JuGgeCibXeM/photo.jpg?sz=128", "display_name": "TTalma", "link": "https://stackoverflow.com/users/4019882/ttalma"}, "edited": false, "score": 0, "creation_date": 1534429406, "post_id": 51874706, "comment_id": 90710116, "body": "I believe I follow what you mean. Since this is a view issue, it should be handled where the view is. I thought by removing the column in the DataTable, the DataGrid would also update, which it does, but it leaves the empty column. How would I tell the DataGrid to rebuild itself, or remove the column?"}], "tags": [], "owner": {"reputation": 133235, "user_id": 7252182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUgxG.png?s=128&g=1", "display_name": "mm8", "link": "https://stackoverflow.com/users/7252182/mm8"}, "is_accepted": false, "score": 0, "last_activity_date": 1534414733, "creation_date": 1534414733, "answer_id": 51874706, "question_id": 51864618, "link": "https://stackoverflow.com/questions/51864618/delete-column-in-datagrid-in-an-mvvm-environment/51874706#51874706", "title": "delete column in DataGrid in an MVVM environment", "body": "<p>A view model shouldn't know anything about some columns in a <code>DataGrid</code> in a view. It is the view or the control itself that should be responsible for adding or removing columns from the <code>DataGrid</code>.</p>\n\n<p>So your view model should probably notify the view when a column is removed from the <code>DataTable</code> and the view should then delete the column from the <code>DataGrid</code> in response to this action. This is proabably sort of what you are currently doing I guess. </p>\n\n<p>Don't try to reference the <code>DataGrid</code> itself from the view model. Raise an event when the <code>DataTable</code> is modified and handle this event in the view.</p>\n"}], "owner": {"reputation": 69, "user_id": 4019882, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-AZWjz_aKI_8/AAAAAAAAAAI/AAAAAAAAAKg/JuGgeCibXeM/photo.jpg?sz=128", "display_name": "TTalma", "link": "https://stackoverflow.com/users/4019882/ttalma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534414733, "creation_date": 1534358664, "question_id": 51864618, "link": "https://stackoverflow.com/questions/51864618/delete-column-in-datagrid-in-an-mvvm-environment", "title": "delete column in DataGrid in an MVVM environment", "body": "<p>I am attempting to delete an entire column from a DataGrid. My DataGrid Itemsource is bound to a Datatable. When I delete the column from the DataTable, the contents of the rows in the DataGrid disappear, but the header stays as well as the empty boxes.</p>\n\n<p>I tried adding a DataGrid in my viewmodel and binding the dataGrid to that, but it did not seem to have any effect and my code got pretty ugly. I was able to add a button to delete it in code behind using:</p>\n\n<pre><code>TestDG.Columns.RemoveAt(idNum);\n</code></pre>\n\n<p>But this didn't seem like the correct approach, and I would like it tied to the view model for error checking etc. It seems like the DataTable and DataGrid could get out of sync deleting in 2 different spots.</p>\n\n<p>My Xaml for the Datagrid:</p>\n\n<pre><code>&lt;DataGrid x:Name=\"dataGrid\" ItemsSource=\"{Binding DTLines}\" CanUserAddRows=\"False\" ColumnWidth=\"*\"&gt;            \n    &lt;/DataGrid&gt;\n</code></pre>\n\n<p>My code in my view model</p>\n\n<pre><code>...\n    public DataTable DTLines\n    {\n        get\n        {\n            return testDT;\n        }\n        set\n        {\n            testDT = value;\n            OnPropertyChanged(\"DTLines\");\n        }\n    } \n...\n    private void ExecuteCloseLang()\n    {\n        TestDT.Columns.Remove(\"German\");\n        // What do I put here to remove the line?\n    }\n</code></pre>\n\n<p>If you need anything else to clarify please let me know.</p>\n"}, {"tags": ["c#", "ssl", "xamarin", "bluetooth-lowenergy", "tls1.2"], "comments": [{"owner": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1534358709, "post_id": 51864573, "comment_id": 90681419, "body": "Is the &quot;BLE Peripheral&quot; actually providing a <i>transparent</i> pass-through network proxy?"}, {"owner": {"reputation": 2416, "user_id": 1140570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/52f26c02e6927615a777854b47d40c6e?s=128&d=identicon&r=PG", "display_name": "Taras", "link": "https://stackoverflow.com/users/1140570/taras"}, "reply_to_user": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1534359202, "post_id": 51864573, "comment_id": 90681631, "body": "@SushiHangover, yes. It is a transparent proxy, we tested with a proprietary communication protocol"}, {"owner": {"reputation": 2416, "user_id": 1140570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/52f26c02e6927615a777854b47d40c6e?s=128&d=identicon&r=PG", "display_name": "Taras", "link": "https://stackoverflow.com/users/1140570/taras"}, "reply_to_user": {"reputation": 67998, "user_id": 4984832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/be4bc3e019d1082f7945b8db7ab313c9?s=128&d=identicon&r=PG", "display_name": "SushiHangover", "link": "https://stackoverflow.com/users/4984832/sushihangover"}, "edited": false, "score": 0, "creation_date": 1534359322, "post_id": 51864573, "comment_id": 90681689, "body": "@SushiHangover the main challenge is to establish connection between SSLStream from one side and TCPListener from the other side, assuming all SSL session related data will be passed through BLE proxy back and forth"}], "owner": {"reputation": 2416, "user_id": 1140570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/52f26c02e6927615a777854b47d40c6e?s=128&d=identicon&r=PG", "display_name": "Taras", "link": "https://stackoverflow.com/users/1140570/taras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1534358571, "creation_date": 1534358392, "last_edit_date": 1534358571, "question_id": 51864573, "link": "https://stackoverflow.com/questions/51864573/how-to-create-tcp-proxy-for-ssl-stream", "title": "How to create TCP proxy for SSL stream", "body": "<p>There's a transparent BLE to IP communication established between mobile (Xamarin) and BLE device.\nThe high-level diagram is the following: </p>\n\n<p><code>Mobile TCP/IP socket &lt;---&gt; BLE Central &lt;---&gt; BLE Peripheral &lt;---&gt; SSL server on device</code></p>\n\n<p>I want to establish TLS session over BLE, for this purpose the client connects to Mobile TCP/IP server socket over SSLStream, but on a method AuthenticateAsClient it hangs and mobile TCP/IP socket doesn't receive any data.\nTaking in account that SSL is located above TCP I was expecting that TCP socket will receive all data related to SSL handshake process..</p>\n\n<p>Please advise any ideas how to solve this.</p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 2621, "user_id": 7884305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f582791bc217379415cc2bc54abc718?s=128&d=identicon&r=PG&f=1", "display_name": "Chayim Friedman", "link": "https://stackoverflow.com/users/7884305/chayim-friedman"}, "edited": false, "score": 0, "creation_date": 1534358458, "post_id": 51864542, "comment_id": 90681273, "body": "Why are you using nested block inside <code>Send_Click()</code>?"}, {"owner": {"reputation": 2621, "user_id": 7884305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f582791bc217379415cc2bc54abc718?s=128&d=identicon&r=PG&f=1", "display_name": "Chayim Friedman", "link": "https://stackoverflow.com/users/7884305/chayim-friedman"}, "edited": false, "score": 0, "creation_date": 1534358529, "post_id": 51864542, "comment_id": 90681308, "body": "What is the <code>__ClientSockets</code> variable?"}, {"owner": {"reputation": 2621, "user_id": 7884305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f582791bc217379415cc2bc54abc718?s=128&d=identicon&r=PG&f=1", "display_name": "Chayim Friedman", "link": "https://stackoverflow.com/users/7884305/chayim-friedman"}, "edited": false, "score": 1, "creation_date": 1534358620, "post_id": 51864542, "comment_id": 90681355, "body": "So, why you said &quot;this is my code <b>in the server</b>&quot;?"}, {"owner": {"reputation": 2621, "user_id": 7884305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f582791bc217379415cc2bc54abc718?s=128&d=identicon&r=PG&f=1", "display_name": "Chayim Friedman", "link": "https://stackoverflow.com/users/7884305/chayim-friedman"}, "edited": false, "score": 0, "creation_date": 1534358716, "post_id": 51864542, "comment_id": 90681423, "body": "What&#39;s contains <code>txt_Text</code> and what <code>rich_Text</code>? (I guess that the first is <code>System.Windows.Forms.TextBox</code> and the second is <code>System.Text.StringBuilder</code>, yes?)"}, {"owner": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "edited": false, "score": 0, "creation_date": 1534358949, "post_id": 51864542, "comment_id": 90681518, "body": "Because you&#39;re looping over the sockets and sending the message to all of them? This doesn&#39;t (based on the code you&#39;ve given) appear to depend on the state of your checkbox."}, {"owner": {"reputation": 43407, "user_id": 2791540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd133916bdbabcde7c31ab28f4b4e6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Wu", "link": "https://stackoverflow.com/users/2791540/john-wu"}, "edited": false, "score": 0, "creation_date": 1534359038, "post_id": 51864542, "comment_id": 90681556, "body": "You probably need to uncomment this part: <code>if (__ClientSockets[j]._Name.Equals(&quot;@&quot;+t))</code>. Otherwise <code>t</code> isn&#39;t used at all and you&#39;ll send messages to all of the sockets."}, {"owner": {"reputation": 2537, "user_id": 4167186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0e37559a079e50b2122462bdd92844?s=128&d=identicon&r=PG&f=1", "display_name": "Brian from state farm", "link": "https://stackoverflow.com/users/4167186/brian-from-state-farm"}, "edited": false, "score": 0, "creation_date": 1534359160, "post_id": 51864542, "comment_id": 90681607, "body": "Because selected items indicates items that have focus.  You should use CheckedItems for the items that are actively checked."}, {"owner": {"reputation": 11, "user_id": 9512798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d4c95ae40272329e1a2efd86f18937?s=128&d=identicon&r=PG&f=1", "display_name": "John Denver", "link": "https://stackoverflow.com/users/9512798/john-denver"}, "edited": false, "score": 0, "creation_date": 1534536406, "post_id": 51864542, "comment_id": 90755526, "body": "I edited my whole question. Sorry for disturbing you guys."}, {"owner": {"reputation": 11, "user_id": 9512798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d4c95ae40272329e1a2efd86f18937?s=128&d=identicon&r=PG&f=1", "display_name": "John Denver", "link": "https://stackoverflow.com/users/9512798/john-denver"}, "reply_to_user": {"reputation": 2537, "user_id": 4167186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0e37559a079e50b2122462bdd92844?s=128&d=identicon&r=PG&f=1", "display_name": "Brian from state farm", "link": "https://stackoverflow.com/users/4167186/brian-from-state-farm"}, "edited": false, "score": 0, "creation_date": 1534537321, "post_id": 51864542, "comment_id": 90755890, "body": "Sir @Brianfromstatefarm and JohnWu Thank you guys! I combined your answer and it works fine. Thank you!"}, {"owner": {"reputation": 13115, "user_id": 150605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pFmKd.png?s=128&g=1", "display_name": "Lance U. Matthews", "link": "https://stackoverflow.com/users/150605/lance-u-matthews"}, "edited": false, "score": 0, "creation_date": 1535401065, "post_id": 51864542, "comment_id": 91043825, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52043648/cannot-access-a-disposed-object-c-sharp\">Cannot access a disposed Object C#</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9512798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d4c95ae40272329e1a2efd86f18937?s=128&d=identicon&r=PG&f=1", "display_name": "John Denver", "link": "https://stackoverflow.com/users/9512798/john-denver"}, "edited": false, "score": 0, "creation_date": 1534536913, "post_id": 51864732, "comment_id": 90755729, "body": "Sir are you there? Can you help me with this?"}, {"owner": {"reputation": 2868, "user_id": 922202, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8a909d49e7e0b73f4b1e10dc15b3e20f?s=128&d=identicon&r=PG", "display_name": "Guillaume CR", "link": "https://stackoverflow.com/users/922202/guillaume-cr"}, "reply_to_user": {"reputation": 11, "user_id": 9512798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d4c95ae40272329e1a2efd86f18937?s=128&d=identicon&r=PG&f=1", "display_name": "John Denver", "link": "https://stackoverflow.com/users/9512798/john-denver"}, "edited": false, "score": 0, "creation_date": 1534863102, "post_id": 51864732, "comment_id": 90852922, "body": "@JohnDenver This seems like a completely new question. You should create a new question for it, that will get you a lot more attention. Did you read both articles I linked to? They should help you with your code and with asking the right question to get a quick answer. I can&#39;t tell which line in your new example fails, but it does look like you close your socket when you receive &quot;Server: -O&quot;. Once you closed it, you can&#39;t call BeginReceive again. That will fail."}, {"owner": {"reputation": 11, "user_id": 9512798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d4c95ae40272329e1a2efd86f18937?s=128&d=identicon&r=PG&f=1", "display_name": "John Denver", "link": "https://stackoverflow.com/users/9512798/john-denver"}, "edited": false, "score": 0, "creation_date": 1535352697, "post_id": 51864732, "comment_id": 91017800, "body": "Asking another question takes a week. It fails when i try to Open another form I need to close the socket so the client sockets will not be doubled in Checklistbox. When another form opens it connects to server again. And the server can remote it back to Login form. I get error every time I Close the form and the sockets. Sorry for my English."}, {"owner": {"reputation": 2868, "user_id": 922202, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8a909d49e7e0b73f4b1e10dc15b3e20f?s=128&d=identicon&r=PG", "display_name": "Guillaume CR", "link": "https://stackoverflow.com/users/922202/guillaume-cr"}, "reply_to_user": {"reputation": 11, "user_id": 9512798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d4c95ae40272329e1a2efd86f18937?s=128&d=identicon&r=PG&f=1", "display_name": "John Denver", "link": "https://stackoverflow.com/users/9512798/john-denver"}, "edited": false, "score": 0, "creation_date": 1535378443, "post_id": 51864732, "comment_id": 91032622, "body": "@JohnDenver Your English is fine. This is a new question that needs a new minimal, complete and verifiable example. Please read the two pages I linked in my answer, and ask a new question."}, {"owner": {"reputation": 11, "user_id": 9512798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d4c95ae40272329e1a2efd86f18937?s=128&d=identicon&r=PG&f=1", "display_name": "John Denver", "link": "https://stackoverflow.com/users/9512798/john-denver"}, "edited": false, "score": 0, "creation_date": 1535386289, "post_id": 51864732, "comment_id": 91037235, "body": "Already read that. There&#39;s no error in my code. It can run smooth but every time I open and close a form it comes up. I want to get rid of it. The program can run with it but its to irritating. Because when I try to open a client it will pop up. And when the time of the client is done. The form will close and the login will come out with another pop up of Cannot access a disposed object. Object name: System.net.Sockets.Socket"}, {"owner": {"reputation": 11, "user_id": 9512798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d4c95ae40272329e1a2efd86f18937?s=128&d=identicon&r=PG&f=1", "display_name": "John Denver", "link": "https://stackoverflow.com/users/9512798/john-denver"}, "edited": false, "score": 0, "creation_date": 1535386328, "post_id": 51864732, "comment_id": 91037253, "body": "Thank you for your time I&#39;m going to delete this and ask a new question."}], "tags": [], "owner": {"reputation": 2868, "user_id": 922202, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8a909d49e7e0b73f4b1e10dc15b3e20f?s=128&d=identicon&r=PG", "display_name": "Guillaume CR", "link": "https://stackoverflow.com/users/922202/guillaume-cr"}, "is_accepted": false, "score": 0, "last_activity_date": 1534359170, "creation_date": 1534359170, "answer_id": 51864732, "question_id": 51864542, "link": "https://stackoverflow.com/questions/51864542/cannot-access-a-disposed-object-object-name-system-net-sockets-socket/51864732#51864732", "title": "Cannot access a disposed object. Object name: System.net.Sockets.Socket", "body": "<p>Before you do anything, please read this article on <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">how to debug a small program</a>. It will help this time and every time in the future.</p>\n\n<p>Since we don't have a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete and verifiable example</a>, I'm going to make some assumptions.</p>\n\n<p>It looks like you continuously add to your __ClientSockets list every time you click. Since there is no code that removes from __ClientSockets, then every subsequent click and call to Sendata simply adds to more ip's, even if you unselected them from your checkboxes. Depending on how you want your program to work, you can either add code that removes clients from __ClientSockets, or you can clear the list completely every time you click on the button. Up to you.</p>\n\n<p>Either way, you will find your problem by debugging a small program.</p>\n"}], "owner": {"reputation": 11, "user_id": 9512798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d4c95ae40272329e1a2efd86f18937?s=128&d=identicon&r=PG&f=1", "display_name": "John Denver", "link": "https://stackoverflow.com/users/9512798/john-denver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1845, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1535389785, "creation_date": 1534358237, "last_edit_date": 1535389785, "question_id": 51864542, "link": "https://stackoverflow.com/questions/51864542/cannot-access-a-disposed-object-object-name-system-net-sockets-socket", "title": "Cannot access a disposed object. Object name: System.net.Sockets.Socket", "body": "<p>I am having a hard time where to put the <code>BeginReceive.</code> I am new to this. Can someone help me with this. Every time I call the <code>_clientSocket.Close();</code> I got an error message.</p>\n\n<blockquote>\n  <p>Cannot access a disposed object. Object name:\n  System.net.Sockets.Socket</p>\n</blockquote>\n\n<p>Your suggestions will much appreciated. Correct me if I'm wrong thank you!</p>\n\n<p><strong>I edited the whole question because I cannot ask again and I need to improve how to ask a question. Sorry I'm new to this page.</strong></p>\n\n<pre><code>private void ReceiveData(IAsyncResult ar)\n{\n     try\n     {\n         int received = _clientSocket.EndReceive(ar);\n         if (received == 0)\n         {\n             return;\n         }\n\n         Array.Resize(ref receivedBuf, received);\n         string text = Encoding.Default.GetString(receivedBuf);\n\n         if (text == \"Server: -O\")\n         {\n             Thread NT = new Thread(() =&gt;\n             {\n                 this.BeginInvoke((Action)delegate ()\n                 {\n                   textBox1.Text = \"Guest\";\n                   this.Hide();\n                   _clientSocket.Close();\n                   Usertimer us = new Usertimer(textBox1.Text);\n                   us.Show();\n                 });\n             });\n             NT.Start();\n\n         }\n\n         Array.Resize(ref receivedBuf, _clientSocket.ReceiveBufferSize);\n         AppendtoTextBox(text);\n         _clientSocket.BeginReceive(receivedBuf, 0, receivedBuf.Length, SocketFlags.None, new AsyncCallback(ReceiveData), null);\n     }\n     catch (Exception ex)\n     {\n         MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);\n     }\n}\n</code></pre>\n"}, {"tags": ["c#", "file-transfer", "response.transmitfile"], "comments": [{"owner": {"reputation": 883, "user_id": 1253154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e09e6361bb7b0a2063aa394fd11ea3d?s=128&d=identicon&r=PG", "display_name": "Dean Goodman", "link": "https://stackoverflow.com/users/1253154/dean-goodman"}, "edited": false, "score": 1, "creation_date": 1534358639, "post_id": 51864541, "comment_id": 90681369, "body": "When you say &quot;Mac users&quot;, do you mean the when the download happens via Safari?"}, {"owner": {"reputation": 485, "user_id": 1569709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UUrAn.jpg?s=128&g=1", "display_name": "RichP", "link": "https://stackoverflow.com/users/1569709/richp"}, "reply_to_user": {"reputation": 883, "user_id": 1253154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e09e6361bb7b0a2063aa394fd11ea3d?s=128&d=identicon&r=PG", "display_name": "Dean Goodman", "link": "https://stackoverflow.com/users/1253154/dean-goodman"}, "edited": false, "score": 0, "creation_date": 1534358783, "post_id": 51864541, "comment_id": 90681452, "body": "I&#39;m waiting for an answer back from the small user base. They are not very well versed in computers to say it nicely. I believe it is Safari. I&#39;ve asked them to try a different browser on their computers. For now I know it is a MacBook and that is about it"}], "answers": [{"tags": [], "owner": {"reputation": 883, "user_id": 1253154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e09e6361bb7b0a2063aa394fd11ea3d?s=128&d=identicon&r=PG", "display_name": "Dean Goodman", "link": "https://stackoverflow.com/users/1253154/dean-goodman"}, "is_accepted": false, "score": 1, "last_activity_date": 1534359958, "last_edit_date": 1534359958, "creation_date": 1534359075, "answer_id": 51864706, "question_id": 51864541, "link": "https://stackoverflow.com/questions/51864541/net-file-download-on-mac-only-get-jpeg-appended/51864706#51864706", "title": ".net File Download on Mac only get .JPEG appended", "body": "<p>Generally, you should quote your filename in the Content-Disposition header -- <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition\" rel=\"nofollow noreferrer\">see here</a>.  Note also that unexpected filename characters could play a role in your issue.  It's probably worth using the built-in .NET <code>ContentDispositionHeaderValue</code> class to help create your header.</p>\n\n<p>Try this - it should also be safe for all the other browsers you list.</p>\n\n<p><code>Response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue(\"attachment\") { FileName = sOriginalFileName };</code></p>\n"}], "owner": {"reputation": 485, "user_id": 1569709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UUrAn.jpg?s=128&g=1", "display_name": "RichP", "link": "https://stackoverflow.com/users/1569709/richp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1534359958, "creation_date": 1534358235, "last_edit_date": 1534358637, "question_id": 51864541, "link": "https://stackoverflow.com/questions/51864541/net-file-download-on-mac-only-get-jpeg-appended", "title": ".net File Download on Mac only get .JPEG appended", "body": "<p>I've got a legacy app that allows upload and download of files. The files are stored on disc the files names in a SQL database. To allow duplicate files names from the users, the database store the user original file name and a unique name. The files are displayed in a .NET repeater with the command argument supplying both files names (original and unique). When the file is downloaded the code below serves up the file to the user with the original name.</p>\n\n<p>All works fine on PC with Chrome, IE, FFox. For Mac user, they get FileName.ext.jpeg when they should be getting just FileName.ext</p>\n\n<p>I'm not very well versed in Mac stuff. Is there something I can do to ContentType or Content-Dispositon to fix this for the few Mac users and not impact my large PC user base?</p>\n\n<p>Here is the code to rename the file stored on the server with the original name:</p>\n\n<pre><code>LinkButton btn = (LinkButton)(sender);\nstring sURL = \"\";\nstring sFileName = btn.CommandArgument;\n\nstring sOriginalFileName = sFileName.Substring(0, sFileName.LastIndexOf(\"~\"));\nstring sServerFileName = sFileName.Substring(sFileName.LastIndexOf(\"~\") + 1); ;\n\nsURL = sResourceRoot + \"\\\\\" + sServerFileName;\n\nResponse.ContentType = \"image/jpeg\";\nResponse.AppendHeader(\"Content-Disposition\", \"attachment; filename=\" + sOriginalFileName);\nResponse.TransmitFile(Server.MapPath(@\"~/\" + sURL));\nResponse.End();\n</code></pre>\n"}, {"tags": ["c#", ".net", "type-conversion"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 7936621, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3EZ0rzhxD_Y/AAAAAAAAAAI/AAAAAAAAA4A/EmAjKyi9-Fw/photo.jpg?sz=128", "display_name": "Ross Degrand", "link": "https://stackoverflow.com/users/7936621/ross-degrand"}, "is_accepted": false, "score": 3, "last_activity_date": 1534358608, "creation_date": 1534358608, "answer_id": 51864606, "question_id": 51864526, "link": "https://stackoverflow.com/questions/51864526/whats-the-best-way-of-converting-a-string-to-a-double/51864606#51864606", "title": "Whats the best way of converting a string to a double", "body": "<p><code>public static double Parse(string input){\n    double.Parse(input, NumberStyles.AllowCurrencySymbol | NumberStyles.Number);\n}</code></p>\n"}, {"tags": [], "owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1534359102, "last_edit_date": 1534359102, "creation_date": 1534358797, "answer_id": 51864645, "question_id": 51864526, "link": "https://stackoverflow.com/questions/51864526/whats-the-best-way-of-converting-a-string-to-a-double/51864645#51864645", "title": "Whats the best way of converting a string to a double", "body": "<p>The <code>decimal</code> type has a <a href=\"https://msdn.microsoft.com/en-us/library/91fwbcsb(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>Parse</code> method</a> overload that allows you to specify that the string represents a currency-formatted number (which will account for the currency symbol and thousands separator), so can do something like this:</p>\n\n<pre><code>Price = decimal.Parse(p.InnerText.Trim(), NumberStyles.Currency));\n</code></pre>\n"}], "owner": {"reputation": 917, "user_id": 7808468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c924a8fbf9f80bccb176fe9a60788bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Denom", "link": "https://stackoverflow.com/users/7808468/mark-denom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1534358773, "accepted_answer_id": 51864645, "answer_count": 2, "score": -2, "last_activity_date": 1534360247, "creation_date": 1534358178, "last_edit_date": 1534360247, "question_id": 51864526, "link": "https://stackoverflow.com/questions/51864526/whats-the-best-way-of-converting-a-string-to-a-double", "closed_reason": "Duplicate", "title": "Whats the best way of converting a string to a double", "body": "<p>So storing a <code>Price</code> property should be a decimal because when ever it comes to currecny it's best practice to use decimal (iirc)\nHow ever what my example here does is that it downloads a string that looks like this <code>$12.99</code>\nWhat I could easily do is remove the first index of that string, and parse the rest as a double but using this example here makes it feel like its code smell.</p>\n\n<pre><code>internal class Program\n    {\n        private static readonly List&lt;Product&gt; Products = new List&lt;Product&gt;();\n\n        private static void Main(string[] args)\n        {\n            var web = new HtmlWeb();\n            var doc = web.Load(\"https://www.petco.com/shop/en/petcostore/category/cat/cat-food/natural-cat-food\");\n            var titles = doc.DocumentNode.SelectNodes(\"//*[@class = 'product-name']/a[@title]\");\n            var prices = doc.DocumentNode.SelectNodes(\"//*[@class = 'product-price-promo']\");\n\n            foreach (var product in titles.Zip(prices,\n                (t, p) =&gt; new Product {Name = t.InnerText.Trim(), Price = p.InnerText.Trim()}))\n                Products.Add(product);\n\n            Console.ReadLine();\n        }\n    }\n</code></pre>\n\n<p>The Product Model is simple, just a name and a price property (I want to use decimal instead of string for the price that's kinda the goal here)</p>\n\n<pre><code>internal class Product\n    {\n        public string Name { get; set; }\n        public string Price { get; set; }\n    }\n</code></pre>\n\n<p>My question is, when doing something like this what is the proper way of converting <code>p.InnerText.Trim()</code> to a decimal</p>\n"}, {"tags": ["c#", "asp.net-core", "razor-pages", "asp.net-core-viewcomponent"], "answers": [{"comments": [{"owner": {"reputation": 687, "user_id": 1634205, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/mM8wK.png?s=128&g=1", "display_name": "Ryan Taite", "link": "https://stackoverflow.com/users/1634205/ryan-taite"}, "edited": false, "score": 0, "creation_date": 1534429670, "post_id": 51874583, "comment_id": 90710302, "body": "It&#39;s always the little things, isn&#39;t it? Thanks!"}], "tags": [], "owner": {"reputation": 21656, "user_id": 6265620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/uf6qO.jpg?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/6265620/edward"}, "is_accepted": true, "score": 1, "last_activity_date": 1534414335, "creation_date": 1534414335, "answer_id": 51874583, "question_id": 51864509, "link": "https://stackoverflow.com/questions/51864509/model-binding-a-view-component-in-razor-pages/51874583#51874583", "title": "Model Binding a View Component in Razor Pages", "body": "<p>For resolving empty <code>Contacts</code>, try to change <code>Html.BeginCollectionItem(\"Contacts\")</code> to <code>Html.BeginCollectionItem(\"Organization.Contacts\")</code>.       </p>\n\n<p>Since <code>Contacts</code> is collection of <code>Organization</code>, you need to pass <code>Organization.Contacts[index].Property</code>, otherwise, it will fail to bind the request to model.</p>\n"}], "owner": {"reputation": 687, "user_id": 1634205, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/mM8wK.png?s=128&g=1", "display_name": "Ryan Taite", "link": "https://stackoverflow.com/users/1634205/ryan-taite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3506, "favorite_count": 0, "accepted_answer_id": 51874583, "answer_count": 1, "score": 1, "last_activity_date": 1534414335, "creation_date": 1534358101, "question_id": 51864509, "link": "https://stackoverflow.com/questions/51864509/model-binding-a-view-component-in-razor-pages", "title": "Model Binding a View Component in Razor Pages", "body": "<p>I'm using ASP.NET Core 2.1, Razor Pages, and a View Component (though I'm not sold if View Components are needed yet)</p>\n\n<p>I have a parent Model, <code>Organization</code>, that contains a list of child Models, <code>Contacts</code>:</p>\n\n<p><strong>Organization</strong></p>\n\n<pre><code>public Guid Id { get; set; }\npublic string OrganizationName { get; set; }\n\npublic ICollection&lt;Contact&gt; Contacts { get; set; }\n</code></pre>\n\n<p><strong>Contact</strong></p>\n\n<pre><code>public Guid Id { get; set; }\npublic string ContactName { get; set; }\npublic Guid OrganizationId { get; set; }\n</code></pre>\n\n<p>What I'm trying to do is have a list of n number of Contacts in Organization that I can add and delete from a View and have that reflected when I hit my <code>OnPost()</code> Page Model method</p>\n\n<hr>\n\n<p>In my previous project, an MVC5 web app:</p>\n\n<ul>\n<li>I used Ajax to add Partial Views to a view: <a href=\"https://stackoverflow.com/questions/39186120/update-a-div-with-a-partial-view-on-button-click-dynamic/47559138#47559138\">Update a DIV with a Partial View on Button Click (dynamic)</a></li>\n<li>And I was able to get at least one level deep lists to return to the Controller: <a href=\"https://stackoverflow.com/questions/47912801/c-sharp-mvc-link-together-nested-partial-views\">C# MVC, Link Together Nested Partial Views</a></li>\n</ul>\n\n<p>The combination of those two looks a lot like this: <a href=\"https://stackoverflow.com/questions/29774822/mvc-5-begincollectionitem-with-partial-crud/29869344#29869344\">MVC 5 BeginCollectionItem with Partial CRUD</a></p>\n\n<hr>\n\n<p><strong>Current status</strong></p>\n\n<p>In <code>~/ViewComponents/Contact.cs</code> I have:</p>\n\n<pre><code>public class Contact : ViewComponent\n{\n    private readonly ApplicationDbContext _context;\n\n    public Contact(ApplicationDbContext context)\n    {\n        _context = context;\n    }\n\n    public async Task&lt;IViewComponentResult&gt; InvokeAsync(Guid organizationId, Guid contactId)\n    {\n        var contact = new Models.Contact { Id = contactId, OrganizationId = organizationId };\n        return View(contact);\n    }\n}\n</code></pre>\n\n<p>Which invokes <code>~/Pages/Shared/Components/Contact/Default.cshtml</code>, <a href=\"https://stackoverflow.com/questions/38864912/using-begincollectionitem-in-asp-net-core\">uses a ported version of BeginCollectionItem</a>:</p>\n\n<pre><code>@model Models.Contact\n\n@using (Html.BeginCollectionItem(\"Contacts\"))\n{\n    &lt;div class=\"row\"&gt;\n        &lt;input asp-for=\"Id\" type=\"hidden\" /&gt;\n        &lt;input asp-for=\"OrganizationId\" type=\"hidden\"/&gt;\n        &lt;input asp-for=\"ContactName\" class=\"form-control\"/&gt;\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>I'm then directly loading this in Organiztion's <code>~/Pages/Organizations/Create.cshtml</code>:</p>\n\n<pre><code>@page\n@using System.Linq\n@using ViewComponents\n@model CreateModel\n\n@{\n    ViewData[\"Title\"] = \"Create\";\n}\n\n&lt;h2&gt;Create&lt;/h2&gt;\n\n&lt;h4&gt;Organization&lt;/h4&gt;\n&lt;hr /&gt;\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;form method=\"post\"&gt;\n            &lt;div class=\"form-group\"&gt;\n                &lt;input asp-for=\"Organization.OrganizationName\" class=\"form-control\" /&gt;\n            &lt;/div&gt;\n            &lt;div class=\"form-group\"&gt;\n                &lt;label asp-for=\"OrganizationContacts\" class=\"col-form-label\"&gt;&lt;/label&gt;\n  &lt;!-- HERE --&gt; @await Component.InvokeAsync(nameof(ViewComponents.Contact), new { organizationId = Model.Organization.Id, contactId = Guid.NewGuid() })\n            &lt;/div&gt;\n            &lt;div class=\"form-group\"&gt;\n                &lt;input type=\"submit\" value=\"Create\" class=\"btn btn-primary\" /&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>When I click the Submit button, it hits the <code>OnPostAsync()</code> method in <code>Create.cshtml.cs</code>:</p>\n\n<pre><code>public class CreateModel : PageModel\n{\n    private readonly ApplicationDbContext _context;\n\n    [BindProperty]\n    public Organization Organization { get; set; }\n\n    public CreateModel(ApplicationDbContext context, IMapper mapper)\n    {\n        _context = context;\n    }\n\n    public IActionResult OnGet()\n    {\n        Organization = new Organization{ Contacts = new List&lt;Contact&gt;() };\n        return Page();\n    }\n\n    public async Task&lt;IActionResult&gt; OnPostAsync()\n    {\n        _context.Organizations.Add(Organization); // &lt;--- Always has an empty Contacts list\n        await _context.SaveChangesAsync();\n\n        return RedirectToPage(\"./Index\");\n    }\n}\n</code></pre>\n\n<p>When I hit <code>OnPostAsync</code>, the bound <code>Organization</code> Model has it's <code>OrganizationName</code> value just fine, but the <code>Contacts</code> list is always empty.</p>\n\n<p>How can I add a Contact to Organization's <code>Contacts</code> list knowing that later I want to have n number of Contacts added or removed?</p>\n\n<p>Most answers I've seen to this kind of question have <code>for</code> loops, but they require me to know ahead of time how many Contacts are or will be in an Organization and that simply isn't the case for me.</p>\n"}, {"tags": ["c#", "xml", "xmlwriter"], "answers": [{"tags": [], "owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "is_accepted": true, "score": 2, "last_activity_date": 1534405680, "last_edit_date": 1534405680, "creation_date": 1534367007, "answer_id": 51866408, "question_id": 51864429, "link": "https://stackoverflow.com/questions/51864429/xmlwriter-wont-generate-the-namespaces-i-need-correctly/51866408#51866408", "title": "XmlWriter won&#39;t generate the namespaces I need correctly", "body": "<p>The following code works and writes your required XML successfully:</p>\n\n<pre><code>var issueInstant = DateTime.Parse(\"2018-07-04T19:19:53.284Z\", CultureInfo.InvariantCulture);\n\nusing (var xw = XmlWriter.Create(sw, xws))\n{\n    var samplNs = \"urn:oasis:names:tc:SAML:2.0:protocol\";\n    var defaultNs = \"urn:oasis:names:tc:SAML:2.0:assertion\";\n\n    // XmlWriter.WriteStartElement(String prefix,\u2002String localName,\u2002String ns)\n    xw.WriteStartElement(\"samlp\", \"AuthnRequest\", samplNs);\n\n    // Write the xmlns:samlp=\"urn:oasis:names:tc:SAML:2.0:protocol\" namespace.\n    // Actually this is redundant as the attribute will be automatically be written at the end of the\n    // attribute list do to the previous call to xw.WriteStartElement().  Call it here only if, for some\n    // reason, you need to control the attribute order.\n    xw.WriteAttributeString(\"xmlns\", \"samlp\", null, samplNs);               \n\n    // Write the default namespace\n    xw.WriteAttributeString(\"xmlns\", defaultNs);\n\n    // Write attribute values.              \n    xw.WriteAttributeString(\"IssueInstant\", XmlConvert.ToString(issueInstant, XmlDateTimeSerializationMode.Utc));\n    xw.WriteAttributeString(\"ProtocolBinding\", \"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\");\n    xw.WriteAttributeString(\"Version\", \"2.0\");\n\n    // Write samlp:NameIDPolicy\n    // No need to specify prefix since it is specified in the document root.\n    xw.WriteStartElement(\"NameIDPolicy\", samplNs);\n    xw.WriteAttributeString(\"AllowCreate\", XmlConvert.ToString(true));\n    xw.WriteAttributeString(\"Format\", \"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified\");\n\n    // Write the end of NameIDPolicy\n    xw.WriteEndElement();\n\n    // Write the end of AuthnRequest\n    xw.WriteEndElement();\n}       \n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li><p>The method <a href=\"https://msdn.microsoft.com/en-us/library/7579ed08.aspx\" rel=\"nofollow noreferrer\"><code>XmlWriter.WriteStartElement(String localName, String ns)</code></a> takes the <em>namespace</em> as the second argument, but you were passing the namespace <em>prefix <code>\"samlp\"</code></em>.  So that didn't work.</p></li>\n<li><p>But calling </p>\n\n<pre><code>xw.WriteStartElement(\"AuthnRequest\", \"urn:oasis:names:tc:SAML:2.0:protocol\"); \n</code></pre>\n\n<p>would also fail because doing so establishes <code>\"urn:oasis:names:tc:SAML:2.0:protocol\"</code> as the <em>default</em> namespace, whereas you want it to be a non-default namespace with the prefix <code>sampl</code>.  Thus <a href=\"https://msdn.microsoft.com/en-us/library/7cdfkth5.aspx\" rel=\"nofollow noreferrer\"><code>XmlWriter.WriteStartElement(String prefix,\u2002String localName,\u2002String ns)</code></a> must be used.</p></li>\n<li><p>Having explicitly written the <code>AuthnRequest</code> element with a specified namespace and namespace prefix, it isn't actually necessary to write the namespace attribute any more -- <code>XmlWriter</code> will do it for you automatically at the end of the attribute list.  You only need to write the namespace attribute manually if you want to control its placement in the attribute list.  However, according to the <a href=\"https://www.w3.org/TR/xml/#sec-starttags\" rel=\"nofollow noreferrer\">XML Standard</a>:</p>\n\n<blockquote>\n  <p>Note that the order of attribute specifications in a start-tag or empty-element tag is not significant.</p>\n</blockquote>\n\n<p>So, you could just skip that.</p></li>\n<li><p>Methods from the <a href=\"https://msdn.microsoft.com/en-us/library/system.xml.xmlconvert_methods.aspx\" rel=\"nofollow noreferrer\"><code>XmlConvert</code></a> class can be used to correctly convert non-string primitives from and to XML.</p></li>\n</ul>\n\n<p>Sample fiddle here: <a href=\"https://dotnetfiddle.net/99hu1I\" rel=\"nofollow noreferrer\">https://dotnetfiddle.net/99hu1I</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "is_accepted": false, "score": 1, "last_activity_date": 1534368770, "creation_date": 1534368770, "answer_id": 51866756, "question_id": 51864429, "link": "https://stackoverflow.com/questions/51864429/xmlwriter-wont-generate-the-namespaces-i-need-correctly/51866756#51866756", "title": "XmlWriter won&#39;t generate the namespaces I need correctly", "body": "<p>I  find it is much easier to just parse a string when you have complicated namespaces.  Using xml linq :</p>\n\n<pre><code>            string xml =\n                \"&lt;samlp:AuthnRequest\" +\n                    \" xmlns:samlp=\\\"urn:oasis:names:tc:SAML:2.0:protocol\\\"\" +\n                    \" xmlns=\\\"urn:oasis:names:tc:SAML:2.0:assertion\\\"\" +\n                    \" IssueInstant=\\\"2018-07-04T19:19:53.284Z\\\"\" +\n                    \" ProtocolBinding=\\\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\\\"\" +\n                    \" Version=\\\"2.0\\\"&gt;\" +\n                    \"&lt;samlp:NameIDPolicy\" +\n                       \" AllowCreate=\\\"true\\\"\" +\n                       \" Format=\\\"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified\\\"/&gt;\" +\n                \"&lt;/samlp:AuthnRequest&gt;\";\n\n            XDocument doc = XDocument.Parse(xml);\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 5447158, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d4fc1246cc3094b5562377623d3c3974?s=128&d=identicon&r=PG&f=1", "display_name": "Kaito Kid", "link": "https://stackoverflow.com/users/5447158/kaito-kid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "accepted_answer_id": 51866408, "answer_count": 2, "score": 2, "last_activity_date": 1534405680, "creation_date": 1534357749, "last_edit_date": 1534397228, "question_id": 51864429, "link": "https://stackoverflow.com/questions/51864429/xmlwriter-wont-generate-the-namespaces-i-need-correctly", "title": "XmlWriter won&#39;t generate the namespaces I need correctly", "body": "<p>I am trying to generate XML data that matches this format:</p>\n\n<pre><code>&lt;samlp:AuthnRequest\n        xmlns:samlp=\"urn:oasis:names:tc:SAML:2.0:protocol\"\n        xmlns=\"urn:oasis:names:tc:SAML:2.0:assertion\"\n        IssueInstant=\"2018-07-04T19:19:53.284Z\"\n        ProtocolBinding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\"\n        Version=\"2.0\"&gt;\n    &lt;samlp:NameIDPolicy\n            AllowCreate=\"true\"\n            Format=\"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified\"/&gt;\n&lt;/samlp:AuthnRequest&gt;\n</code></pre>\n\n<p>It's obviously missing a lot of tags for anonymity reasons.</p>\n\n<p>I am using <code>XmlWriter</code>.</p>\n\n<p>I managed to generate this data with different sets of WriteStartElement() and WriteAttributeString(), but I can never get it right. Either the result is slightly different, or it just crashes halfway with XmlException like</p>\n\n<pre><code>System.Xml.XmlException: 'The prefix '' cannot be redefined from 'samlp' to\n'urn:oasis:names:tc:SAML:2.0:assertion' within the same start element tag.'\n</code></pre>\n\n<p>Here are a couple of my attempts and results.</p>\n\n<p>Attempt #1</p>\n\n<pre><code>using (XmlWriter xw = XmlWriter.Create(sw, xws))\n{\n    xw.WriteStartElement(\"AuthnRequest\", \"samlp\");\n    xw.WriteAttributeString(\"xmlns\", \"samlp\", null, \"urn:oasis:names:tc:SAML:2.0:protocol\");\n    xw.WriteAttributeString(\"xmlns\", \"urn:oasis:names:tc:SAML:2.0:assertion\");\n    // ...\n}\n</code></pre>\n\n<p>Result #1</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Crashed with the above message.\n</code></pre>\n\n<p>Attempt #2</p>\n\n<pre><code>using (XmlWriter xw = XmlWriter.Create(sw, xws))\n{\n    xw.WriteStartElement(\"AuthnRequest\", \"samlp\");\n    xw.WriteAttributeString(\"xmlns\", \"samlp\", null, \"urn:oasis:names:tc:SAML:2.0:protocol\");\n    // ...\n}\n</code></pre>\n\n<p>Result #2</p>\n\n<pre><code>&lt;AuthnRequest\n    xmlns:samlp=\"urn:oasis:names:tc:SAML:2.0:protocol\"\n    ForceAuthn=\"false\" ID=\"ID_4f85b6d1-a839-4899-972c-12275bf8711c\"\n    IssueInstant=\"2018-08-15T18:23:49Z\"\n    ProtocolBinding=\"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST\"\n    Version=\"2.0\"\n    xmlns=\"samlp\"&gt;\n    ...\n</code></pre>\n\n<p>The rest of the attempts are all slight variations of those two, moving around parameters but none are as close as them to my desired result.</p>\n\n<p>Specifically, I have a lot of trouble with generating this attribute:</p>\n\n<pre><code>xmlns=\"urn:oasis:names:tc:SAML:2.0:assertion\"\n</code></pre>\n\n<p>Either it doesn't show up or is wrong.</p>\n\n<p>I can't figure out what I'm missing in order to generate it the way I need.</p>\n"}, {"tags": ["c#", "importerror", "python.net"], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 6705318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0efdeaf07629c40ad0656665b6b20eac?s=128&d=identicon&r=PG&f=1", "display_name": "STREETKILLER007", "link": "https://stackoverflow.com/users/6705318/streetkiller007"}, "is_accepted": false, "score": 2, "last_activity_date": 1534843129, "last_edit_date": 1534843129, "creation_date": 1534482887, "answer_id": 51888768, "question_id": 51864404, "link": "https://stackoverflow.com/questions/51864404/pythonnet-import-error-visbrain-in-anaconda-3/51888768#51888768", "title": "Pythonnet Import Error Visbrain in Anaconda 3", "body": "<p>according to <a href=\"https://github.com/pythonnet/pythonnet/wiki/Troubleshooting-on-Windows,-Linux,-and-OSX\" rel=\"nofollow noreferrer\">https://github.com/pythonnet/pythonnet/wiki/Troubleshooting-on-Windows,-Linux,-and-OSX</a></p>\n\n<p>it mentioned</p>\n\n<blockquote>\n  <p>\"Unable to load DLL pythonXX\": CPython is not installed, or not\n  registered in %PATH% and %PYTHONHOME% environment variables.\n  Alternatively set PythonEngine.PythonHome property before initializing\n  Python runtime.</p>\n</blockquote>\n\n<p>Instead of setting up PythonHome and Path manually, you set them up by coding.</p>\n\n<p>before <code>PythonEngine.Initialize();</code>\njust remember to set the PATH and PYTHONHOME, just as example</p>\n\n<pre><code>// Modify Path\nstring path = @\"d:\\Anaconda3\\envs\\py36;\" + Environment.GetEnvironmentVariable(\"PATH\", EnvironmentVariableTarget.Machine); \n\n// Set Path\nEnvironment.SetEnvironmentVariable(\"PATH\", path, EnvironmentVariableTarget.Process);\n\n// Set PythonHome\nEnvironment.SetEnvironmentVariable(\"PYTHONHOME\", @\"d:\\Anaconda3\\envs\\py36\", EnvironmentVariableTarget.Process);\n\n// Set PythonPath\n// ONLY SET THIS IF YOU ARE SURE WHAT YOU ARE DOING\nEnvironment.SetEnvironmentVariable(\"PYTHONPATH\", @\"d:\\Anaconda3\\envs\\py36\\Lib\", EnvironmentVariableTarget.Process);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 317, "user_id": 8298327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32be090482d5af7292aaf5e3a3a84584?s=128&d=identicon&r=PG&f=1", "display_name": "bricx", "link": "https://stackoverflow.com/users/8298327/bricx"}, "is_accepted": false, "score": 0, "last_activity_date": 1598478696, "creation_date": 1598478696, "answer_id": 63606230, "question_id": 51864404, "link": "https://stackoverflow.com/questions/51864404/pythonnet-import-error-visbrain-in-anaconda-3/63606230#63606230", "title": "Pythonnet Import Error Visbrain in Anaconda 3", "body": "<p>I had a similar issue with Miniconda, apparently Python.NET does not work well with conda. See <a href=\"https://stackoverflow.com/a/63605963/8298327\">this answer</a>: best is do reinstall python (without conda).</p>\n"}], "owner": {"reputation": 119, "user_id": 6705318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0efdeaf07629c40ad0656665b6b20eac?s=128&d=identicon&r=PG&f=1", "display_name": "STREETKILLER007", "link": "https://stackoverflow.com/users/6705318/streetkiller007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1598478696, "creation_date": 1534357685, "last_edit_date": 1546357090, "question_id": 51864404, "link": "https://stackoverflow.com/questions/51864404/pythonnet-import-error-visbrain-in-anaconda-3", "title": "Pythonnet Import Error Visbrain in Anaconda 3", "body": "<p>Environment :</p>\n\n<ul>\n<li>Pythonnet version: 2.3.0, installed with pip in Amaconda3</li>\n<li>Python version: 3.6.6 using with Anaconda</li>\n<li>Visual Studio 2017 Community</li>\n<li>Operating System: Windows 7, 64 bit</li>\n</ul>\n\n<p>I am running Visbrain module by Pythonnet.\nI had create a virtual environment named py36 in Anaconda 3. Anaconda 3 is in D drive.\nTrying to run below code in my c# program.</p>\n\n<pre><code>using (Py.GIL())\n{\n dynamic np = Py.Import(\"visbrain\");\n}\n</code></pre>\n\n<p>But it pops out an error which is </p>\n\n<pre><code>Python.Runtime.PythonException: 'ModuleNotFoundError : No module named 'visbrain''\n</code></pre>\n\n<p>stack trace :</p>\n\n<pre><code>Python.Runtime.PythonException\n  HResult=0x80131500\n  Message=ModuleNotFoundError : No module named 'visbrain'\n  Source=Python.Runtime\n  StackTrace:\n</code></pre>\n\n<p>i had visbrain under Lib\\site-packages.</p>\n\n<p>Tried Solution but did not success:</p>\n\n<p>1) add PATH, PYTHONHOME in environment variable.\nPATH : D:\\Anaconda3\\envs\\py36;\nPYTHONHOME : D:\\Anaconda3\\envs\\py36;</p>\n\n<p>2) <a href=\"https://stackoverflow.com/questions/47559658/pythonnet-embedding-python-in-net-example-failing-to-load-module\">pythonnet Embedding Python in .net example failing to load module</a>\nadded PYTHONPATH : D:\\Anaconda3\\envs\\py36\\Lib\\site-packages;</p>\n\n<p>===</p>\n\n<p>i am strange that \"numpy\" module is also inside of the Lib\\site-packages.</p>\n\n<p>when i tried below example </p>\n\n<pre><code>dynamic np = Py.Import(\"numpy\");\n</code></pre>\n\n<p>It is fine.</p>\n\n<p>Would like to know what is the issue here and how to solve this, thank you.</p>\n"}, {"tags": ["c#", "arrays", "function", "class", "inheritance"], "comments": [{"owner": {"reputation": 3762, "user_id": 3276027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2e43f741889c0d1c599747a318ddf5?s=128&d=identicon&r=PG&f=1", "display_name": "Gian Paolo", "link": "https://stackoverflow.com/users/3276027/gian-paolo"}, "edited": false, "score": 0, "creation_date": 1534441549, "post_id": 51864378, "comment_id": 90716947, "body": "A zoo is not a cat. A zoo cannot &quot;eatMouse&quot;, &quot;meow&quot;, &quot;sleep&quot;. there is no need for Zoo to inherit from cat. Don&#39;t misuse nor abuse of inheritance"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 9984963, "user_type": "registered", "profile_image": "https://graph.facebook.com/1880618131989915/picture?type=large", "display_name": "Tony Slepian", "link": "https://stackoverflow.com/users/9984963/tony-slepian"}, "edited": false, "score": 0, "creation_date": 1534436766, "post_id": 51878551, "comment_id": 90714529, "body": "Thank you for your help, the bool function works perfectly, but when I copy it and try to use it, i get a System.NullReferenceException message on the GetAvgWeight() part, and I&#39;m npt really sure what&#39;s the reason for it.. any chance you (or anyone) sees the problem?"}, {"owner": {"reputation": 2811, "user_id": 8417363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hO0vR.png?s=128&g=1", "display_name": "Jimenemex", "link": "https://stackoverflow.com/users/8417363/jimenemex"}, "reply_to_user": {"reputation": 53, "user_id": 9984963, "user_type": "registered", "profile_image": "https://graph.facebook.com/1880618131989915/picture?type=large", "display_name": "Tony Slepian", "link": "https://stackoverflow.com/users/9984963/tony-slepian"}, "edited": false, "score": 0, "creation_date": 1534436997, "post_id": 51878551, "comment_id": 90714654, "body": "@TonySlepian Did you call <code>CreateZoo()</code> before you called <code>GetAvgWeight()</code>? The <code>System.NullReferenceException</code> means that <code>arcats</code> is <code>null</code> which means it never got initialized with the <code>new</code> keyword."}, {"owner": {"reputation": 53, "user_id": 9984963, "user_type": "registered", "profile_image": "https://graph.facebook.com/1880618131989915/picture?type=large", "display_name": "Tony Slepian", "link": "https://stackoverflow.com/users/9984963/tony-slepian"}, "edited": false, "score": 0, "creation_date": 1534439019, "post_id": 51878551, "comment_id": 90715763, "body": "I&#39;m sorry but I stil dont understand ... wasnt CreateZoo() called in the line <b>z.CreateZoo(21);</b> ? I&#39;m sorry if it looks like I&#39;m asking too much or trying to use someone to fix my problems for me, I just joined a programming behind and the material is for people who had some experience with programming, but I&#39;m still new to this so I&#39;m lagging behind...."}, {"owner": {"reputation": 2811, "user_id": 8417363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hO0vR.png?s=128&g=1", "display_name": "Jimenemex", "link": "https://stackoverflow.com/users/8417363/jimenemex"}, "reply_to_user": {"reputation": 53, "user_id": 9984963, "user_type": "registered", "profile_image": "https://graph.facebook.com/1880618131989915/picture?type=large", "display_name": "Tony Slepian", "link": "https://stackoverflow.com/users/9984963/tony-slepian"}, "edited": false, "score": 0, "creation_date": 1534441333, "post_id": 51878551, "comment_id": 90716847, "body": "@TonySlepian I Actually had some mistakes in my code. Replace <code>.length</code> with <code>.Length</code> and the real reason why you are getting <code>System.NullReferenceException</code> is because it was trying to do <code>cat.GetWeight()</code> when <code>cat</code> is <code>null</code>. For example, We originally created the array to be of size <code>21</code>,  but only filled in <code>3 Cats</code>. So once the <code>foreach</code> loop got to the fourth index in <code>arcats</code> it would try to do <code>null.GetWeight()</code> since we never put anything in the forth index. One way to fix this is to put a <code>Cat</code> object in each index of <code>arcats</code> or simply create the Zoo with size <code>3</code>. Code is updated"}, {"owner": {"reputation": 53, "user_id": 9984963, "user_type": "registered", "profile_image": "https://graph.facebook.com/1880618131989915/picture?type=large", "display_name": "Tony Slepian", "link": "https://stackoverflow.com/users/9984963/tony-slepian"}, "edited": false, "score": 0, "creation_date": 1534441564, "post_id": 51878551, "comment_id": 90716957, "body": "@ Jimenemex It works now!! Thank you so much for all your time, also your explanations reall helped me understand the code, thank you so, so much I wish you the best ^^ (:"}], "tags": [], "owner": {"reputation": 2811, "user_id": 8417363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/hO0vR.png?s=128&g=1", "display_name": "Jimenemex", "link": "https://stackoverflow.com/users/8417363/jimenemex"}, "is_accepted": true, "score": 1, "last_activity_date": 1534441136, "last_edit_date": 1534441136, "creation_date": 1534426984, "answer_id": 51878551, "question_id": 51864378, "link": "https://stackoverflow.com/questions/51864378/having-trouble-writing-a-function-that-puts-together-variables-of-two-different/51878551#51878551", "title": "Having trouble writing a function that puts together variables of two different classes", "body": "<p>Great question, there are a few things that I notice right off the bat. One is that all your method names should be CarmelCased, meaning <code>setname</code> should be <code>SetName</code>, and <code>getname</code> should be <code>GetName</code>, etc.</p>\n\n<p>Also your logic for <code>iscatsfull</code> doesn't look right. It looks like you should be returning <code>true</code> when the <code>arcats</code> array is above <code>20</code>. It also looks like you should be saving the cats in <code>arcats</code> as <code>Cat</code> objects and <strong>not</strong> as <code>strings</code>.</p>\n\n<p>The <code>counter</code> in <code>cat</code> is useless as it shouldn't live in the <code>Cats</code> class, but the <code>Zoo</code> class.</p>\n\n<p>Your <code>Cat</code> class can be refactored as:</p>\n\n<pre><code>public class Cat\n{\n    private string name;\n    private float weight;\n    private float speed;\n\n    public Cat()\n    {\n        this.name = \"\";\n        this.weight = 0.0;\n        this.speed = 0.0;\n    }\n\n    public void SetName(string name)\n    {\n        this.name = name;\n    }\n\n    public void SetWeight(float weight)\n    {\n        this.weight = weight;\n    }\n\n    public void SetSpeed(float speed)\n    {\n        this.speed = speed;\n    }\n\n    public string GetName()\n    {\n        return this.name;\n    }\n\n    public float GetWeight() \n    {\n        return this.weight;\n    }\n\n    public float GetSpeed()\n    {\n        return this.speed;\n    }\n}\n</code></pre>\n\n<p>Your Zoo Class can be:</p>\n\n<pre><code>public class Zoo\n{\n    public Cat [] arcats;\n\n    public void CreateZoo(int counter)\n    {\n        arcats = new Cat[counter];\n    }\n\n    public void AddCat(int counter, Cat cat)\n    {\n        arcats[counter] = cat;\n    }\n\n    public bool IsZooFull()\n    {\n        if (arcats.Length &gt; 20)\n        {\n            return true;\n        }\n        else\n        {\n            return false;\n        }\n    }\n\n    public double GetAvgWeight()\n    {\n        double totalWeight = 0.0;\n        foreach(Cat cat in arcats) // Loop through all the cats in arcats and add all their weights\n        {\n            totalWeight += cat.GetWeight();\n        }\n        return totalWeight / arcats.Length; // Divide total weight by number of cats\n    }\n}\n</code></pre>\n\n<p>You can now work with them in the <code>Main</code> as so:</p>\n\n<pre><code>class Program\n{\n    static void Main(string[] args)\n    {\n        Cat cat1 = new Cat();\n        cat1.SetWeight(50.5f);\n\n        Cat cat2 = new Cat();\n        cat2.SetWeight(67.7f);\n\n        Cat  cat3 = new Cat();\n        cat3.SetWeight(54.3f);\n\n        Zoo z = new Zoo();\n        // Create new Zoo with arcats of length 3\n        // z.CreateZoo(21);\n        z.CreateZoo(3);\n        // Add the three Cats to the Zoo\n        z.AddCat(0, cat1);\n        z.AddCat(1, cat2);\n        z.AddCat(2, cat3);\n\n        Console.WriteLine(\"Checking if Zoo is full: \" + z.IsZooFull()); // false\n        Console.WriteLine(\"Average weight of Cats in Zoo: \" + z.GetAvgWeight());\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9984963, "user_type": "registered", "profile_image": "https://graph.facebook.com/1880618131989915/picture?type=large", "display_name": "Tony Slepian", "link": "https://stackoverflow.com/users/9984963/tony-slepian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 51878551, "answer_count": 1, "score": 1, "last_activity_date": 1534441136, "creation_date": 1534357618, "last_edit_date": 1534424806, "question_id": 51864378, "link": "https://stackoverflow.com/questions/51864378/having-trouble-writing-a-function-that-puts-together-variables-of-two-different", "title": "Having trouble writing a function that puts together variables of two different classes", "body": "<p>I have a code with two different classes (beside the main program class).\nThe first class is called \"cat\" and looks like this:</p>\n\n<pre><code>class cat\n{\n    private string name;\n    private float weight;\n    private float speed;\n    static private int counter;\n\n    //-----------------------------------------------\n    public cat()\n    {\n        counter++;\n    }\n\n    public static int getcounter()\n    {\n        return counter;\n    }\n    //----------------------------------------------\n    public void setname(string name)\n    {\n        this.name = name;\n    }\n\n    public void setweight(float weight)\n    {\n        this.weight = weight;\n    }\n\n    public void setspeed(float speed)\n    {\n        this.speed = speed;\n    }\n    //-----------------------------------------------\n    public string getname()\n    {\n        return name;\n    }\n\n    public float getweight() \n    {\n        return weight;\n    }\n\n    public float getspeed()\n    {\n        return speed;\n    }\n}\n</code></pre>\n\n<p>The second class, called \"zoo\", inherits the \"cat\" class and looks like this:</p>\n\n<pre><code>class zoo : cat\n{\n    public string[] arcats;\n    //--------------------------------------------------\n    public void addcats(int counter)\n    {\n        arcats = new string[counter];\n    }\n\n    public void setcats(int counter, string cat)\n    {\n        arcats[counter] = cat;\n    }\n    //-----------------------------------------------------\n    public bool iscatsfull(bool limit)\n    {\n       limit = false;\n        if (getcounter() &gt; 20)\n        {\n            return limit;\n        }\n        else\n            return true;\n    }\n    //-----------------------------------------------------\n    public int Getcounter()\n    {\n        return getcounter();\n    }\n}\n</code></pre>\n\n<p>The main program looks like this:</p>\n\n<pre><code>class Program\n{\n    static void Main(string[] args)\n    {\n        cat l = new cat();\n        l.setweight(50.5f);\n        cat t = new cat();\n        t.setweight(67.7f);\n        cat c = new cat();\n        c.setweight(54.3f);\n\n    }\n}\n</code></pre>\n\n<p>What I'm trying to do here is to create in the \"zoo\" class an array that will catch all of the \"cat\" objects (the bool function is to make sure there are no more than 20 objects in the array).\nAfter I have a working array, I want to create two new functions in the \"zoo\" class, one that calculates the average weight of all cats in the array, and one that does the same with speed.</p>\n\n<p>I tried using this function, but it isnt working:</p>\n\n<pre><code>   public float Weightavg()\n    {\n        return (cat.getweight())/ getcounter();\n    }\n</code></pre>\n\n<p>I tried adding the \"static\" keyword to the function but that just messes up a different part of the code. Can anyone show me how to get the function to work using the code I already work? Of course, if there are any problems in the code that I'm unaware off, I'll be more than happy to hear about that as well.\nThanks in advance for anyone that finds the time to help ^^</p>\n"}, {"tags": ["c#", "serialization", "reflection", "domain-events", "eventstoredb"], "comments": [{"owner": {"reputation": 8494, "user_id": 2948212, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fsymy.png?s=128&g=1", "display_name": "diegosasw", "link": "https://stackoverflow.com/users/2948212/diegosasw"}, "edited": false, "score": 0, "creation_date": 1534357903, "post_id": 51864332, "comment_id": 90681011, "body": "I am thinking of another idea as OPTION 3: Would the decorator or similar pattern be an option? Could I keep the same <code>IDomainEvent</code> and <code>IEventStore</code> interfaces but &quot;wrap&quot; my domain events with some serializer-deserializer capabilities. I have only seen the decorator pattern used to &quot;chain&quot; calculations but never to add methods that don&#39;t exist in the abstract class or interface, so maybe this is a silly comment."}, {"owner": {"reputation": 54977, "user_id": 11635, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/eeb54edab107fb3d31133ed009abd863?s=128&d=identicon&r=PG", "display_name": "Ruben Bartelink", "link": "https://stackoverflow.com/users/11635/ruben-bartelink"}, "edited": false, "score": 3, "creation_date": 1534366007, "post_id": 51864332, "comment_id": 90684552, "body": "you&#39;re making this way too hard by trying to encapsulate abstract and framework things. First get something sensible working using the standard examples. forget the IDomainEvent marker interface stuff and just use plain classes that json.net can just roundtrip before getting mappers involved. And Resharper is correct about the double iteration - use arrays"}, {"owner": {"reputation": 8494, "user_id": 2948212, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fsymy.png?s=128&g=1", "display_name": "diegosasw", "link": "https://stackoverflow.com/users/2948212/diegosasw"}, "reply_to_user": {"reputation": 54977, "user_id": 11635, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/eeb54edab107fb3d31133ed009abd863?s=128&d=identicon&r=PG", "display_name": "Ruben Bartelink", "link": "https://stackoverflow.com/users/11635/ruben-bartelink"}, "edited": false, "score": 0, "creation_date": 1534582454, "post_id": 51864332, "comment_id": 90764168, "body": "how would you go making DTO immutable and able to be serialized and deserialized into without public setters and without Newtonsoft attributes polluting the DTO? It&#39;s an option to explore, but I think my question and the goal is valid unless there&#39;s a better way"}, {"owner": {"reputation": 54977, "user_id": 11635, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/eeb54edab107fb3d31133ed009abd863?s=128&d=identicon&r=PG", "display_name": "Ruben Bartelink", "link": "https://stackoverflow.com/users/11635/ruben-bartelink"}, "edited": false, "score": 0, "creation_date": 1534603302, "post_id": 51864332, "comment_id": 90769570, "body": "I&#39;m saying for your events... just <code>{get;set;}</code> properties, just keep the types simple with no transformations, marker interfaces of any kind. the folded aggregate state is a completely different matter"}, {"owner": {"reputation": 14634, "user_id": 64348, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h3b3u.png?s=128&g=1", "display_name": "Kit", "link": "https://stackoverflow.com/users/64348/kit"}, "edited": false, "score": 0, "creation_date": 1534791531, "post_id": 51864332, "comment_id": 90823916, "body": "JSON can be deserialized against private setters if you use a contract resolver that uses reflection."}, {"owner": {"reputation": 54977, "user_id": 11635, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/eeb54edab107fb3d31133ed009abd863?s=128&d=identicon&r=PG", "display_name": "Ruben Bartelink", "link": "https://stackoverflow.com/users/11635/ruben-bartelink"}, "edited": false, "score": 0, "creation_date": 1534798470, "post_id": 51864332, "comment_id": 90826822, "body": "there is no good reason to make events not just have read-writable properties - we&#39;re not trying to secure against hackers - we&#39;re trying to write simple easy to read code. No matter what any book anywhere says about encapsulation or abstraction, you still get to think for yourself."}, {"owner": {"reputation": 8494, "user_id": 2948212, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fsymy.png?s=128&g=1", "display_name": "diegosasw", "link": "https://stackoverflow.com/users/2948212/diegosasw"}, "edited": false, "score": 0, "creation_date": 1534838615, "post_id": 51864332, "comment_id": 90837949, "body": "Kit, yes, I could use reflection to &quot;hack&quot; the deserialization but I would try to avoid it. However I was thinking of decorating my <code>IDomainEvent</code> with serialize and deserialize capability so that each event knows how to print itself into Json for example?"}, {"owner": {"reputation": 8494, "user_id": 2948212, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fsymy.png?s=128&g=1", "display_name": "diegosasw", "link": "https://stackoverflow.com/users/2948212/diegosasw"}, "edited": false, "score": 0, "creation_date": 1534839546, "post_id": 51864332, "comment_id": 90838406, "body": "At the end the main issue remains: how to know which specific mapper to use given a list of <code>IDomainEvent</code>. It does not matter whether I map/unmap before using EventStore (in its client) or delay this until EventStore&#39;s execution. At the end in my domain I expect concrete types of <code>IDomainEvent</code> and at some point I must convert them to serializable objects (let&#39;s say EventDto) and deserialize back into the proper EventDto. There must be a way, maybe using reflection? I&#39;d like something like looping on <code>IDomainEvent</code> collection, grab its type and instantiate a specific mapper from DI container"}, {"owner": {"reputation": 54977, "user_id": 11635, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/eeb54edab107fb3d31133ed009abd863?s=128&d=identicon&r=PG", "display_name": "Ruben Bartelink", "link": "https://stackoverflow.com/users/11635/ruben-bartelink"}, "edited": false, "score": 0, "creation_date": 1535065810, "post_id": 51864332, "comment_id": 90940335, "body": "if you use json.net, you can attach converters via attributes without any explicit mappers involved. I do agree you should do this in a controlled fashion between app layer and ES, but a) you don&#39;t need IDomainEvent for anything b) you&#39;re overthinking it. I have thought and fought a lot about this but dont have code to show right now newer than <a href=\"https://github.com/bartelink/FunDomain\" rel=\"nofollow noreferrer\">github.com/bartelink/FunDomain</a> (that&#39;s in a pipeline to opensourcing atm), but I&#39;ve tried it many different ways and keeping the events as simple types (in discriminated unions if you have lang support) is the way to go"}], "answers": [{"comments": [{"owner": {"reputation": 8494, "user_id": 2948212, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fsymy.png?s=128&g=1", "display_name": "diegosasw", "link": "https://stackoverflow.com/users/2948212/diegosasw"}, "edited": false, "score": 0, "creation_date": 1581584799, "post_id": 53987869, "comment_id": 106486781, "body": "I must say, with time I decided having domain events that are not &quot;easily&quot; serializable or deserializable is a bad practice. See my update"}], "tags": [], "owner": {"reputation": 8494, "user_id": 2948212, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fsymy.png?s=128&g=1", "display_name": "diegosasw", "link": "https://stackoverflow.com/users/2948212/diegosasw"}, "is_accepted": true, "score": 2, "last_activity_date": 1581585386, "last_edit_date": 1581585386, "creation_date": 1546261599, "answer_id": 53987869, "question_id": 51864332, "link": "https://stackoverflow.com/questions/51864332/serialize-and-deserialize-domain-events-to-persist-and-retrieve-from-event-store/53987869#53987869", "title": "Serialize and Deserialize domain events to persist and retrieve from Event Store in generic implementation", "body": "<p><strong>UPDATED ANSWER:</strong></p>\n\n<p>I have come to realize with time that the whole approach was a bad practice. I think a domain event should never have abstract (polymorphic) properties that could take different shape and therefore have issues when deserializing to know exactly what shape had the event been serialized into.</p>\n\n<p>The problem is not technical (although for that, my answer below is still valid) but rather philosophical.</p>\n\n<p>I strongly believe that domain events should only use basic types. Things that don't change (string, int, maybe some \"safe\" custom types such as money, etc.). It does no make much sense to have polymorphic domain events. <strong>If an event can take different shapes probably we are talking about different events</strong>.</p>\n\n<p>It's important to take into consideration that a very old event (e.g: an event that was raised a year ago) also has to be deserialized when creating a projection (e.g: during a replay, or simply during the instantiation of an aggregate with event sourcing) and therefore this event should be deserialized properly without failing. Imagine the mess if for whatever reason somebody modified one of the classes that event was using and now the old info is not deserializable into the new class. We would be violating the most fundamental thing in event sourcing.</p>\n\n<p>That's why I think we shouldn't use domain events with complex objects unless we are 100% sure these classes won't change, and we shouldn't use polymorphic domain events at all.</p>\n\n<hr>\n\n<p>I have implemented a wrapper over EventStore .NET Client that implements my <code>IEventStore</code> interface and abstracts my client application from anything behind the scenes.</p>\n\n<pre><code>public interface IEventStore\n{\n    Task&lt;IEnumerable&lt;IDomainEvent&gt;&gt; GetEventsAsync(Guid aggregateId, Type aggregateType);\n    Task PersistAsync(IAggregateRoot aggregateRoot, IEnumerable&lt;IDomainEvent&gt; domainEvents);\n}\n</code></pre>\n\n<p>The way I solved the main problem with serialization/deserialization is by providing custom serializer/deserializer for the domain events that are \"special\" (because they have abstract or interface properties that couldn't be deserialized unless knowing its specific concrete type). Also for each domain event persisted I save metadata headers stating which specific domain event type it is and which specific serializable event type it is.</p>\n\n<p>In other words, the flow goes like this when persisting:\n<code>IDomainEvent -&gt; convert to a serializable type (if needed) -&gt; transform in bytes -&gt; save stream data</code></p>\n\n<p>and when retrieving\n<code>Stream Data -&gt; transform to serializable type -&gt; transform to IDomainEvent</code></p>\n\n<p><strong>I have uploaded the whole project in my personal repository in GitLab</strong> here:\n<a href=\"https://gitlab.com/iberodev/DiDrDe.EventStore.Infra.EventStore\" rel=\"nofollow noreferrer\">https://gitlab.com/iberodev/DiDrDe.EventStore.Infra.EventStore</a>\n, feel free to have a look and run all the integration and unit tests with xUnit to understand it. And of course feel free to provide any feedback!</p>\n\n<p>The heavy lifting on my solution is in the part of the client that needs to use an event store. It's the responsibility of its infrastructure layer (Autofac registration in its host application) to register EventStore using an Autofac extension and to provide the required custom serializers/deserializers if needed.</p>\n\n<p>That way I can keep the implementation of the EventStore wrapper completely agnostic to specific settings and to specific domain events. It's a generic solution.</p>\n\n<p>The <a href=\"https://gitlab.com/iberodev/DiDrDe.EventStore.Infra.EventStore/blob/master/README.md\" rel=\"nofollow noreferrer\">README</a> of the project clarifies this, but basically event store can be registered like this if the domain events are serializable (no abstract properties):</p>\n\n<pre><code>var builder = new ContainerBuilder(); // Autofac container\nbuilder\n    .RegisterEventStore(\n        ctx =&gt;\n        {\n            var eventStoreOptions =\n                new EventStoreOptions\n                {\n                    ConnectionString = \"ConnectTo=tcp://admin:changeit@127.0.0.1:1113; HeartBeatTimeout=500\";\n                };\n            return eventStoreOptions;\n        });\nvar container = builder.Build();\n</code></pre>\n\n<p>and like this if there are domain events that are special because they have abstract properties:</p>\n\n<pre><code>var builder = new ContainerBuilder();\nbuilder\n    .RegisterEventStore(\n        ctx =&gt;\n        {\n            var eventStoreOptions =\n                new EventStoreOptions\n                {\n                    ConnectionString = \"ConnectTo=tcp://admin:changeit@127.0.0.1:1113; HeartBeatTimeout=500\";\n                };\n            return eventStoreOptions;\n        },\n        ctx =&gt;\n        {\n            var customDomainEventMappersOptions =\n                new CustomDomainEventMappersOptions()\n                    .UsesCustomMappers&lt;FakeDomainEventNotSerializable, FakeSerializableEvent&gt;(\n                        domainEvent =&gt;\n                        {\n                            var mapper =\n                                new FakeDomainEventNotSerializableToFakeSerializableEventMapper();\n                            var result = mapper.Map(domainEvent);\n                            return result;\n                        },\n                        serializableEvent =&gt;\n                        {\n                            var mapper =\n                                new FakeSerializableEventToFakeDomainEventNotSerializableMapper();\n                            var result = mapper.Map(serializableEvent);\n                            return result;\n                        });\n            return customDomainEventMappersOptions;\n        });\n\nvar container = builder.Build();\n</code></pre>\n"}], "owner": {"reputation": 8494, "user_id": 2948212, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fsymy.png?s=128&g=1", "display_name": "diegosasw", "link": "https://stackoverflow.com/users/2948212/diegosasw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1206, "favorite_count": 1, "accepted_answer_id": 53987869, "answer_count": 1, "score": 8, "last_activity_date": 1603792214, "creation_date": 1534357402, "last_edit_date": 1603792214, "question_id": 51864332, "link": "https://stackoverflow.com/questions/51864332/serialize-and-deserialize-domain-events-to-persist-and-retrieve-from-event-store", "title": "Serialize and Deserialize domain events to persist and retrieve from Event Store in generic implementation", "body": "<p>I am using DDD with CQRS and Event Sourcing.\nI need to use an Event Store (specifically <a href=\"https://eventstore.org/\" rel=\"nofollow noreferrer\">this event store</a>) within my custom implementation of <code>IEventStore</code> to persist and retrieve domain events but I am having difficulties with the approach to take that deals with serialization/deserialization.</p>\n\n<p>This is the interface I am implementing:</p>\n\n<pre><code>public interface IEventStore\n{\n    Task&lt;IEnumerable&lt;IDomainEvent&gt;&gt; GetEventsAsync(Identity aggregateIdentity, Type aggregateType);\n\n    Task PersistAsync(IAggregateRoot aggregateRoot, IEnumerable&lt;IDomainEvent&gt; domainEvents);\n}\n</code></pre>\n\n<p>Outside my implementation of <code>IEventStore</code> I can have mappers from every <code>IDomainEvent</code> into some serializable/deserializable EventDto or json string. That's not a problem.\nBut these are my restrictions: </p>\n\n<ul>\n<li><p>my domain events are <strong>immutable objects</strong> that implement <code>IDomainEvent</code> (i.e: no setters)</p></li>\n<li><p>my domain events are not always easily serializable/deserializable in a generic way. <strong>Often they have abstract or interface properties</strong>, so the concrete mappers between my domain events and some serializable object such as string json or event DTO are decided outside my <code>IEventStore</code> implementation.</p></li>\n<li><p>My <code>IEventStore</code> implementation needs to be generic in a way that <strong>if I add new domain event types, I should not need to touch anything</strong> within the <code>IEventStore</code> implementation</p></li>\n<li><p>My <code>IEventStore</code> implementation can receive injected some specific implementations of <code>IMapper&lt;TSource, TDestination&gt;</code>, so that I could use a them to serialize/deserialize between specific types (not interfaces).</p>\n\n<pre><code>public interface IMapper&lt;in TSource, out TDestination&gt;\n{\n    TDestination Map(TSource source); // I have implementations of this if needed\n}\n</code></pre></li>\n</ul>\n\n<p>This below is my attempt:</p>\n\n<pre><code>public class MyEventStore\n    : IEventStore\n{\n    private readonly IStreamNameFactory _streamNameFactory;\n    private readonly IEventStoreConnection _eventStoreConnection; //this is the Greg Young's EventStore product that I want to use as database\n    private readonly IDomainEventFactory _domainEventFactory;\n    private readonly IEventDataFactory _eventDataFactory;\n\n    public EventStore(\n        IStreamNameFactory streamNameFactory, \n        IEventStoreConnection eventStoreConnection, \n        IDomainEventFactory domainEventFactory, \n        IEventDataFactory eventDataFactory)\n    {\n        _streamNameFactory = streamNameFactory;\n        _eventStoreConnection = eventStoreConnection;\n        _domainEventFactory = domainEventFactory;\n        _eventDataFactory = eventDataFactory;\n    }\n\n    public async Task&lt;IEnumerable&lt;IDomainEvent&gt;&gt; GetEventsAsync(\n        Identity aggregateIdentity, \n        Type aggregateType)\n    {\n        var aggregateIdentityValue = aggregateIdentity.Value;\n        var streamName = _streamNameFactory.Create(aggregateIdentityValue, aggregateType);\n\n        var streamEventSlice =\n            await _eventStoreConnection.ReadStreamEventsForwardAsync(streamName, 0, Int32.MaxValue, false);\n\n        var domainEvents = streamEventSlice\n            .Events\n            .Select(x =&gt; _domainEventFactory.Create(x));\n\n        return domainEvents;\n    }\n\n    [SuppressMessage(\"ReSharper\", \"PossibleMultipleEnumeration\")]\n    public async Task PersistAsync(\n        IAggregateRoot aggregateRoot, \n        IEnumerable&lt;IDomainEvent&gt; domainEvents)\n    {\n        var numberOfEvents = domainEvents.Count();\n        var aggregateRootVersion = aggregateRoot.Version;\n        var originalVersion = aggregateRootVersion - numberOfEvents;\n        var expectedVersion = originalVersion - 1;\n\n        var aggregateIdentityValue = aggregateRoot.AggregateIdentity.Value;\n        var aggregateRootType = aggregateRoot.GetType();\n        var streamName = _streamNameFactory.Create(aggregateIdentityValue, aggregateRootType);\n        var assemblyQualifiedName = aggregateRootType.AssemblyQualifiedName;\n\n        var eventsToStore = domainEvents.Select(x =&gt; _eventDataFactory.Create(x, assemblyQualifiedName));\n\n        await _eventStoreConnection.AppendToStreamAsync(streamName, expectedVersion, eventsToStore);\n    }\n}\n</code></pre>\n\n<p>The problems is mainly, as you can imagine, in the <code>IDomainEventFactory</code> implementation. I need a class that implements the following interface:</p>\n\n<pre><code>public interface IDomainEventFactory\n{\n    IDomainEvent Create(ResolvedEvent resolvedEvent);\n}\n</code></pre>\n\n<p>This class needs to <strong>know which specific <code>IDomainEvent</code> does it need to deserialize the resolvedEvent to at runtime</strong>. In other words, if the event being retrieved is a json representation of <code>MyThingCreatedEvent</code> maybe I can use a service such as <code>IMapper&lt;ResolvedEvent, MyThingCreatedEvent&gt;</code>. But if the event being retrieved is a json representation of <code>MyThingUpdatedEvent</code> then I would need a service such as <code>IMapper&lt;ResolvedEvent, MyThingUpdatedEvent&gt;</code>. </p>\n\n<p>Some approaches came to my mind.</p>\n\n<p><strong>OPTION 1:</strong>\nI thought I could have the <code>IDomainEventFactory</code> implementation use the autofac <code>IComponentContext</code> so that at runtime I could somehow manage to do some <code>_componentContext.Resolve(theNeededType)</code>. But I don't know how to retrieve the IMapper that I need. Maybe this is something possible but I doubt it. </p>\n\n<p><strong>OPTION 2:</strong>\nMaybe I could have some mapping service such as IBetterMapper such as</p>\n\n<pre><code>public interface IBetterMapping\n{\n    TDestination Map&lt;TDestination&gt;(object source) where TDestination : class;\n}\n</code></pre>\n\n<p>so that my factory can delegate the concern of knowing how to deserialize anything into <code>TDestination</code>. But I would have the same problem: I don't know how to create a type at runtime from a string, for example, to do something like <code>_myBetterMapper.Map&lt;WhichTypeHere&gt;</code> and there is the additional problem of implementing that Map method, which I guess would require some registration table and based on the type choose one or another specific mapper.</p>\n\n<p>I am really stuck with this. Hopefully I get some help from you guys! :)</p>\n\n<p><strong>UPDATE</strong>: I have implemented my own solution and uploaded the project here in my personal repo: <a href=\"https://gitlab.com/iberodev/DiDrDe.EventStore.Infra.EventStore\" rel=\"nofollow noreferrer\">https://gitlab.com/iberodev/DiDrDe.EventStore.Infra.EventStore</a>\nThe solution I went with is to keep the event store wrapper agnostic but to provide custom serializer/deserializer at DI registration for those events that are a bit \"special\". EventStore allows adding custom metadata headers, so I am using some custom headers to specify concrete implementation types on each data stream so that I know where to deserialize when retrieving the persisted events.</p>\n"}, {"tags": ["c#", "asp.net", "cloudflare"], "comments": [{"owner": {"reputation": 10256, "user_id": 1043380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2388aa1beb9ac75029a5b4fafec11eec?s=128&d=identicon&r=PG", "display_name": "gunr2171", "link": "https://stackoverflow.com/users/1043380/gunr2171"}, "edited": false, "score": 0, "creation_date": 1534357303, "post_id": 51864262, "comment_id": 90680741, "body": "What part of the code do you have a problem with (you don&#39;t say which part)?"}, {"owner": {"reputation": 490, "user_id": 9990572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bc5c73c96c4a853c56701fd57e589d?s=128&d=identicon&r=PG&f=1", "display_name": "MattHodson", "link": "https://stackoverflow.com/users/9990572/matthodson"}, "reply_to_user": {"reputation": 10256, "user_id": 1043380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2388aa1beb9ac75029a5b4fafec11eec?s=128&d=identicon&r=PG", "display_name": "gunr2171", "link": "https://stackoverflow.com/users/1043380/gunr2171"}, "edited": false, "score": 0, "creation_date": 1534357442, "post_id": 51864262, "comment_id": 90680804, "body": "The actual code I have works without Cloudflare. It simply picks a random image from a folder. What I need help with it changing which folder it picks that random image from, based off which country Cloudflare says the users from"}, {"owner": {"reputation": 10256, "user_id": 1043380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2388aa1beb9ac75029a5b4fafec11eec?s=128&d=identicon&r=PG", "display_name": "gunr2171", "link": "https://stackoverflow.com/users/1043380/gunr2171"}, "edited": false, "score": 0, "creation_date": 1534357495, "post_id": 51864262, "comment_id": 90680833, "body": "Do you already have code that calls their service?"}, {"owner": {"reputation": 490, "user_id": 9990572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bc5c73c96c4a853c56701fd57e589d?s=128&d=identicon&r=PG&f=1", "display_name": "MattHodson", "link": "https://stackoverflow.com/users/9990572/matthodson"}, "reply_to_user": {"reputation": 10256, "user_id": 1043380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2388aa1beb9ac75029a5b4fafec11eec?s=128&d=identicon&r=PG", "display_name": "gunr2171", "link": "https://stackoverflow.com/users/1043380/gunr2171"}, "edited": false, "score": 0, "creation_date": 1534357564, "post_id": 51864262, "comment_id": 90680868, "body": "Nope. There doesn&#39;t seem to be any support from Cloudflare with C#, so I&#39;m a bit of a lost sheep here."}, {"owner": {"reputation": 10256, "user_id": 1043380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2388aa1beb9ac75029a5b4fafec11eec?s=128&d=identicon&r=PG", "display_name": "gunr2171", "link": "https://stackoverflow.com/users/1043380/gunr2171"}, "edited": false, "score": 0, "creation_date": 1534357790, "post_id": 51864262, "comment_id": 90680962, "body": "For now, take a look at the <a href=\"https://api.cloudflare.com/#getting-started-endpoints\" rel=\"nofollow noreferrer\">REST api documentation</a> and some community made libraries like <a href=\"https://github.com/JSkimming/CloudFlare.NET\" rel=\"nofollow noreferrer\">CloudFlare.Net</a>. As this question stands, it&#39;s too broad to answer here."}, {"owner": {"reputation": 490, "user_id": 9990572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bc5c73c96c4a853c56701fd57e589d?s=128&d=identicon&r=PG&f=1", "display_name": "MattHodson", "link": "https://stackoverflow.com/users/9990572/matthodson"}, "reply_to_user": {"reputation": 10256, "user_id": 1043380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2388aa1beb9ac75029a5b4fafec11eec?s=128&d=identicon&r=PG", "display_name": "gunr2171", "link": "https://stackoverflow.com/users/1043380/gunr2171"}, "edited": false, "score": 0, "creation_date": 1534357837, "post_id": 51864262, "comment_id": 90680980, "body": "if (Request.Headers.AllKeys.Contains(&quot;CF-IPCountry&quot;)) {     Response.Write(Request.Headers[&quot;CF-IPCountry&quot;]); }, apparently this works. But... I cannot implement it. Maybe I haven&#39;t added enough info to the question."}], "answers": [{"tags": [], "owner": {"reputation": 490, "user_id": 9990572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bc5c73c96c4a853c56701fd57e589d?s=128&d=identicon&r=PG&f=1", "display_name": "MattHodson", "link": "https://stackoverflow.com/users/9990572/matthodson"}, "is_accepted": false, "score": 0, "last_activity_date": 1534371855, "creation_date": 1534371855, "answer_id": 51867262, "question_id": 51864262, "link": "https://stackoverflow.com/questions/51864262/using-cloudflare-cf-ipcountry-to-pick-which-folder-to-grab-an-image-from/51867262#51867262", "title": "Using Cloudflare CF-IPCountry to pick which folder to grab an image from", "body": "<p>To answer my own question:</p>\n\n<pre><code>    protected void Page_Load(object sender, EventArgs e)\n{\n    string filename = \"\";\n    if (Request.Headers.AllKeys.Contains(\"CF-IPCountry\"))\n    {\n        string countrycode = Request.Headers[\"CF-IPCountry\"].ToString();\n        if (Directory.Exists(Server.MapPath(\"~/img/\" + countrycode)))\n        {\n            string[] files = Directory.GetFiles(Server.MapPath(\"~/img/\" + countrycode + \"/\"), \"*.jpg\");\n            Random _r = new Random();\n            int randomimage = _r.Next(files.Length);\n            filename = \"/img/\" + countrycode + \"/\" + Path.GetFileName(files[randomimage]);\n        }\n\n    }\n    if (filename.Length == 0)\n    {\n        string[] files = Directory.GetFiles(Server.MapPath(\"~/img/none/\"), \"*.jpg\");\n        Random _r = new Random();\n        int randomimage = _r.Next(files.Length);\n        filename = \"/img/none/\" + Path.GetFileName(files[randomimage]);\n    }\n    Literal1.Text = filename;\n}\n</code></pre>\n"}], "owner": {"reputation": 490, "user_id": 9990572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bc5c73c96c4a853c56701fd57e589d?s=128&d=identicon&r=PG&f=1", "display_name": "MattHodson", "link": "https://stackoverflow.com/users/9990572/matthodson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 511, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534371855, "creation_date": 1534357075, "last_edit_date": 1534358603, "question_id": 51864262, "link": "https://stackoverflow.com/questions/51864262/using-cloudflare-cf-ipcountry-to-pick-which-folder-to-grab-an-image-from", "title": "Using Cloudflare CF-IPCountry to pick which folder to grab an image from", "body": "<p>I'm currently trying to learn C# and it's kind of alien to me so I apologise if I'm asking something basic.</p>\n\n<p>I'm wanting to use Cloudflares GEO IP, which feeds back a country code eg. US, GB, AU.</p>\n\n<p>Based on the country is given, I want to pick a different directory to randomly pick an image from.</p>\n\n<p>So for example, if CF says GB I want it to pick a random image from /img/gb/.\nExactly like <a href=\"https://stackoverflow.com/questions/51212132/picking-a-random-image-out-of-different-directories-based-on-geo-locations/51212277#51212277\">this script</a>, just in C#.</p>\n\n<p>I've written this so far, which works in one folder, but I've been stuck on this part.</p>\n\n<pre><code>public class getimage : IHttpHandler\n{\n    public void ProcessRequest (HttpContext context)\n    {\n        // Set a default for images\n        string imgdirectory = \"/img\";\n\n        // check if a directory has been given as a source for images\n        if (context.Request.QueryString[\"d\"] != null)\n        {\n            imgdirectory = context.Request.QueryString[\"d\"];\n        }\n\n        // read in all the images into an array\n        string[] imgarray = Directory.GetFiles(HttpContext.Current.Server.MapPath(imgdirectory), \"*.jpg\");\n\n        // generate a radom number upto the total number of images\n        Random random = new Random();\n        int randomNumber = random.Next(0, imgarray.Length);\n\n        // read in the file\n        byte[] imageBytes =File.ReadAllBytes(imgarray[randomNumber]);\n\n        // output the image \n        using (MemoryStream ms = new MemoryStream(imageBytes))\n        {\n            context.Response.ContentType = \"image/jpg\";\n            ms.WriteTo(context.Response.OutputStream);\n        }\n    }\n\n    public bool IsReusable {\n        get {\n            return false;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "wpf", "xaml"], "comments": [{"owner": {"reputation": 18804, "user_id": 3225, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cplXg.png?s=128&g=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/3225/kenny"}, "edited": false, "score": 1, "creation_date": 1534357449, "post_id": 51864251, "comment_id": 90680811, "body": "add code behind that when the myUserControl.FontSize is changed you change this. Another way is a ValueConverter and bind it to that property as a parameter."}, {"owner": {"reputation": 88, "user_id": 7615851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2296cbf9b2b6c797e316201787f937?s=128&d=identicon&r=PG&f=1", "display_name": "JarbingleMan", "link": "https://stackoverflow.com/users/7615851/jarbingleman"}, "reply_to_user": {"reputation": 18804, "user_id": 3225, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cplXg.png?s=128&g=1", "display_name": "kenny", "link": "https://stackoverflow.com/users/3225/kenny"}, "edited": false, "score": 0, "creation_date": 1534358009, "post_id": 51864251, "comment_id": 90681056, "body": "@kenny I am not sure how to reference in code behind when UserControl.FontSize is changed - I have looked for an OnFontSizeChanged method to override but I can&#39;t find any."}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 7615851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2296cbf9b2b6c797e316201787f937?s=128&d=identicon&r=PG&f=1", "display_name": "JarbingleMan", "link": "https://stackoverflow.com/users/7615851/jarbingleman"}, "edited": false, "score": 0, "creation_date": 1534358216, "post_id": 51864395, "comment_id": 90681149, "body": "can you provide an example of how to use? Also, I would greatly prefer to not have to use an entire external library to solve such a small issue."}, {"owner": {"reputation": 964, "user_id": 4104496, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/nvkZ6.jpg?s=128&g=1", "display_name": "Shashi Bhushan", "link": "https://stackoverflow.com/users/4104496/shashi-bhushan"}, "reply_to_user": {"reputation": 88, "user_id": 7615851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2296cbf9b2b6c797e316201787f937?s=128&d=identicon&r=PG&f=1", "display_name": "JarbingleMan", "link": "https://stackoverflow.com/users/7615851/jarbingleman"}, "edited": false, "score": 0, "creation_date": 1534358466, "post_id": 51864395, "comment_id": 90681277, "body": "Examples are available here - <a href=\"https://github.com/Alex141/CalcBinding\" rel=\"nofollow noreferrer\">github.com/Alex141/CalcBinding</a>. Wpf doesn&#39;t provide such flexibility in Binding out of box. However you can make use of code behind to implement same but i personally avoid code behind for binding changes."}], "tags": [], "owner": {"reputation": 964, "user_id": 4104496, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/nvkZ6.jpg?s=128&g=1", "display_name": "Shashi Bhushan", "link": "https://stackoverflow.com/users/4104496/shashi-bhushan"}, "is_accepted": false, "score": 0, "last_activity_date": 1534357663, "last_edit_date": 1592644375, "creation_date": 1534357663, "answer_id": 51864395, "question_id": 51864251, "link": "https://stackoverflow.com/questions/51864251/how-to-set-a-textblocks-font-size-to-be-a-ratio-of-another-font-size-property/51864395#51864395", "title": "How to set a TextBlock&#39;s font size to be a ratio of another font size property?", "body": "<p>You can use <a href=\"https://www.nuget.org/packages/CalcBinding/\" rel=\"nofollow noreferrer\">https://www.nuget.org/packages/CalcBinding/</a> library for this.</p>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 7615851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2296cbf9b2b6c797e316201787f937?s=128&d=identicon&r=PG&f=1", "display_name": "JarbingleMan", "link": "https://stackoverflow.com/users/7615851/jarbingleman"}, "is_accepted": false, "score": 1, "last_activity_date": 1534361675, "creation_date": 1534361675, "answer_id": 51865249, "question_id": 51864251, "link": "https://stackoverflow.com/questions/51864251/how-to-set-a-textblocks-font-size-to-be-a-ratio-of-another-font-size-property/51865249#51865249", "title": "How to set a TextBlock&#39;s font size to be a ratio of another font size property?", "body": "<p>The best answer (credit to @Kenny) is a simple converter that takes the user control font size as it's input.</p>\n\n<p>Use in xaml:</p>\n\n<pre><code>&lt;z:RatioConverter x:Key=\"AdjustTitleFontSizeConverter\" Ratio=\"1.07\" /&gt;\n\n&lt;TextBlock \n    x:Name=\"Title\" \n    FontSize=\"{Binding FontSize, Converter={StaticResource AdjustTitleFontSizeConverter}\"&gt; \n    Hello Custom User Control! \n&lt;/TextBlock&gt;\n</code></pre>\n\n<p>RatioConverter.cs</p>\n\n<pre><code>using System;\nusing System.Globalization;\nusing System.Windows;\nusing System.Windows.Data;\n\npublic class RatioConverter : IValueConverter\n{\n    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)\n    {\n        // Input santize first..\n        return (System.Convert.ToDouble(value)) * this.Ratio;\n    }\n\n    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)\n    {\n        throw new NotImplementedException();\n    }\n\n    public Double Ratio\n    {\n        get { return (Double)GetValue(RatioProperty); }\n        set { SetValue(RatioProperty, value); }\n    }\n\n    public static readonly DependencyProperty RatioProperty = DependencyProperty.Register(\n        \"Ratio\", typeof(Double), typeof(RatioConverter), new FrameworkPropertyMetadata(1.0));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30288, "user_id": 1506454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FWxUV.png?s=128&g=1", "display_name": "ASh", "link": "https://stackoverflow.com/users/1506454/ash"}, "is_accepted": false, "score": 1, "last_activity_date": 1534363747, "creation_date": 1534363747, "answer_id": 51865724, "question_id": 51864251, "link": "https://stackoverflow.com/questions/51864251/how-to-set-a-textblocks-font-size-to-be-a-ratio-of-another-font-size-property/51865724#51865724", "title": "How to set a TextBlock&#39;s font size to be a ratio of another font size property?", "body": "<p>Apply <code>ScaleTransform</code> with a desired scale factor.</p>\n\n<p>In this example all TextBlock inherit FontSize=20 from parent Window (it is Dependency Property inheritance). Then I change FontSize to 22 for one TextBlock, and scale another (20 * 1.1 == 22). They look similar to me.</p>\n\n<pre><code>&lt;Window x:Class=\"WpfDemos.FontWindow\"\n    xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n    xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n    Title=\"WpfDemos\" Height=\"300\" Width=\"300\" FontSize=\"20\"&gt;\n    &lt;StackPanel&gt;\n        &lt;TextBlock Text=\"Hello Custom User Control!\"/&gt;\n        &lt;TextBlock Text=\"Hello Custom User Control!\"/&gt;\n\n        &lt;TextBlock Text=\"Hello Custom User Control!\"&gt;\n            &lt;TextBlock.LayoutTransform&gt;\n                &lt;ScaleTransform ScaleX=\"1.1\" ScaleY=\"1.1\"/&gt;\n            &lt;/TextBlock.LayoutTransform&gt;\n        &lt;/TextBlock&gt;\n\n        &lt;TextBlock Text=\"Hello Custom User Control!\" FontSize=\"22\"/&gt;\n\n        &lt;TextBlock Text=\"Hello Custom User Control!\"/&gt;\n        &lt;TextBlock Text=\"Hello Custom User Control!\"/&gt;\n    &lt;/StackPanel&gt;\n&lt;/Window&gt;\n</code></pre>\n"}], "owner": {"reputation": 88, "user_id": 7615851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2296cbf9b2b6c797e316201787f937?s=128&d=identicon&r=PG&f=1", "display_name": "JarbingleMan", "link": "https://stackoverflow.com/users/7615851/jarbingleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1534363747, "creation_date": 1534357040, "question_id": 51864251, "link": "https://stackoverflow.com/questions/51864251/how-to-set-a-textblocks-font-size-to-be-a-ratio-of-another-font-size-property", "title": "How to set a TextBlock&#39;s font size to be a ratio of another font size property?", "body": "<p>I have a TextBlock inside a custom user control that I would like to be slightly larger (maybe 7% larger) than the global font size property for that user control. I am unsure of the best way to go about this. Does anyone have any suggestions?</p>\n\n<p>(Obviously this attempt is atrocious, but hopefully it helps visualize what I'm asking).</p>\n\n<pre><code>&lt;TextBlock \n    x:Name=\"Title\" \n    FontSize=\"{myUserControl.FontSize * 1.07}\"&gt; \n    Hello Custom User Control! \n&lt;/TextBlock&gt;\n</code></pre>\n"}, {"tags": ["c#", "wpf", "asynchronous"], "comments": [{"owner": {"reputation": 25472, "user_id": 105084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae860f9442151273f880bb1e0d790a5a?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/105084/matthew"}, "edited": false, "score": 2, "creation_date": 1534357072, "post_id": 51864196, "comment_id": 90680658, "body": "You should familiarize yourself with <code>async</code>/<code>await</code> in C#. See <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/async/\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/csharp/programming-guide/&hellip;</a>"}, {"owner": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "edited": false, "score": 1, "creation_date": 1534357108, "post_id": 51864196, "comment_id": 90680674, "body": "What kind of application? WinForms, WPF?"}, {"owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "reply_to_user": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "edited": false, "score": 0, "creation_date": 1534357363, "post_id": 51864196, "comment_id": 90680765, "body": "@jeroenh it&#39;s WPF"}, {"owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 1, "creation_date": 1534357500, "post_id": 51864196, "comment_id": 90680835, "body": "And what&#39;s running this code? What happens after you get the result in <code>indexedItems</code>?"}, {"owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "reply_to_user": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 0, "creation_date": 1534357723, "post_id": 51864196, "comment_id": 90680940, "body": "@CamiloTerevinto there is some seconds worth of magic happening to it and then finally it gets displayed in a dataGrid. Please remember that I really want to understand this issue, not just get a plain solution..."}, {"owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 0, "creation_date": 1534357845, "post_id": 51864196, "comment_id": 90680982, "body": "Please <a href=\"https://stackoverflow.com/posts/51864196/edit\">edit</a> your question to show that, since it&#39;s a bit unfortunate that you left out updating the UI after the asynchronous work which is quite important for answering"}, {"owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "reply_to_user": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 0, "creation_date": 1534358234, "post_id": 51864196, "comment_id": 90681158, "body": "@CamiloTerevinto I&#39;ve added the original code snippet so you can check what gets done. Also: in the original there was no instanciation for the list - this is normally handled in the init of the window but when I tried this earlier it told me about the list belonging to the original thread so I tried to move the instanciation..."}, {"owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "edited": false, "score": 0, "creation_date": 1534358465, "post_id": 51864196, "comment_id": 90681276, "body": "The <code>BuildCategoryList</code> is the worst part. It takes several seconds, sometime more. When this is happening, I definately need the user to know, that it&#39;s reading the index and building this list."}, {"owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "reply_to_user": {"reputation": 25472, "user_id": 105084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae860f9442151273f880bb1e0d790a5a?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/105084/matthew"}, "edited": false, "score": 0, "creation_date": 1534358695, "post_id": 51864196, "comment_id": 90681410, "body": "@Matthew I&#39;ve read this article before. As I get it, I have to call &#39;natives&#39; like <code>GetStringAsync</code> and such. Isn&#39;t it possible to just move this function to another thread, update the UI and then wait for the other thread to finish?"}, {"owner": {"reputation": 25472, "user_id": 105084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae860f9442151273f880bb1e0d790a5a?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/105084/matthew"}, "edited": false, "score": 0, "creation_date": 1534359250, "post_id": 51864196, "comment_id": 90681654, "body": "@traxx2012 Yep, and that&#39;s what my answer does (it still uses <code>FileHandling.ReadIndexFile</code>). The downside is that now you have to worry about multi-threading issues in <code>ReadIndexFile</code>, whereas if your only async calls are to known-good functions like <code>GetStringAsync</code>, you probably don&#39;t. That&#39;s why I said that adding <code>ReadIndexFileAsync</code> is the best (not only) way to do this."}], "answers": [{"comments": [{"owner": {"reputation": 3454, "user_id": 6485082, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3c127a713f55a0f952b1b7941f25ace8?s=128&d=identicon&r=PG&f=1", "display_name": "FCin", "link": "https://stackoverflow.com/users/6485082/fcin"}, "edited": false, "score": 0, "creation_date": 1534357627, "post_id": 51864335, "comment_id": 90680896, "body": "You probably mean <code>Task.Run</code>, not <code>new Task.Run</code>. This will not compile."}, {"owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "edited": false, "score": 0, "creation_date": 1534357905, "post_id": 51864335, "comment_id": 90681014, "body": "I&#39;ve tried to change <code>ReadIndexFile</code> to <code>public static async Task&lt;List&lt;Manga&gt;&gt; ReadIndexFileAsync (string path)</code> and now I get &quot;FileHandling has no definition for ReadIndexFile&quot;. This is what I originally meant - I don&#39;t understand the errors happpening when I try to do async magic."}, {"owner": {"reputation": 25472, "user_id": 105084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae860f9442151273f880bb1e0d790a5a?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/105084/matthew"}, "reply_to_user": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "edited": false, "score": 1, "creation_date": 1534357992, "post_id": 51864335, "comment_id": 90681053, "body": "@traxx2012 Converting a synchronous method to <code>async</code> involves more than just changing the signature. You should probably take some time to read up on <code>async</code>/<code>await</code> before continuing."}, {"owner": {"reputation": 25472, "user_id": 105084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae860f9442151273f880bb1e0d790a5a?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/105084/matthew"}, "edited": false, "score": 0, "creation_date": 1534358172, "post_id": 51864335, "comment_id": 90681134, "body": "The error you see is because you replaced <code>ReadIndexFile</code> with <code>ReadIndexFileAsync</code>, but you&#39;re still calling <code>ReadIndexFile</code>. Replace <code>Task.Run(() =&gt; FileHandling.ReadIndexFile(downloadPath))</code> with just <code>FileHandling.ReadIndexFileAsync(downloadPath)</code>. But if you don&#39;t change the implementation of <code>ReadIndexFileAsync</code> to use async IO, it will still run synchronously."}, {"owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "edited": false, "score": 1, "creation_date": 1534359532, "post_id": 51864335, "comment_id": 90681780, "body": "@Matthew I needed some time to actually understand your example but I think I got it now. Thank you!"}, {"owner": {"reputation": 25472, "user_id": 105084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae860f9442151273f880bb1e0d790a5a?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/105084/matthew"}, "reply_to_user": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "edited": false, "score": 0, "creation_date": 1534359552, "post_id": 51864335, "comment_id": 90681791, "body": "@traxx2012 Awesome :) Good luck!"}], "tags": [], "owner": {"reputation": 25472, "user_id": 105084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae860f9442151273f880bb1e0d790a5a?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/105084/matthew"}, "is_accepted": true, "score": 1, "last_activity_date": 1534962202, "last_edit_date": 1534962202, "creation_date": 1534357418, "answer_id": 51864335, "question_id": 51864196, "link": "https://stackoverflow.com/questions/51864196/c-async-task-running-with-return-value-for-a-function-with-parameters/51864335#51864335", "title": "c# Async task running with return value for a function with parameters", "body": "<p>The best way to do this is to add an asynchronous method <code>async Task FileHandling.ReadIndexFileAsync(string path)</code>. If you can't make changes to <code>FileHandling</code>, try something like this:</p>\n\n<pre><code>async Task MySnippet(string downloadPath)\n{\n    // Start reading the index file, but don't wait for the result.\n    Task&lt;List&lt;myType&gt;&gt; indexedItemsTask = Task.Run(() =&gt; FileHandling.ReadIndexFile(downloadPath));\n    // Alternatively, if you can add a method FileHandling.ReadIndexFileAsync:\n    // Task&lt;List&lt;myType&gt;&gt; indexedItemsTask = FileHandling.ReadIndexFileAsync(downloadPath);\n\n    // Update the UI.\n    lblProgress.Content = \"Reading index file...\";\n    lstItems.ItemsSource = null;\n\n    // *Now* wait for the result.\n    List&lt;myType&gt; indexedItems = await indexedItemsTask;\n\n    // Do stuff with indexedItems.\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 7123934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-jwD0a1gxMqY/AAAAAAAAAAI/AAAAAAAAACY/UPrssrUC3oY/photo.jpg?sz=128", "display_name": "traxx2012", "link": "https://stackoverflow.com/users/7123934/traxx2012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "accepted_answer_id": 51864335, "answer_count": 1, "score": 0, "last_activity_date": 1534962202, "creation_date": 1534356770, "last_edit_date": 1534358121, "question_id": 51864196, "link": "https://stackoverflow.com/questions/51864196/c-async-task-running-with-return-value-for-a-function-with-parameters", "title": "c# Async task running with return value for a function with parameters", "body": "<p>So I've searched the Net for ways of executing some heavy tasks async to keep the UI responsive. And to be quite honest - I did not find anything that describes my actual situation in a way <em>I can understand</em>.</p>\n\n<p>So I have this code snippet:</p>\n\n<pre><code>List&lt;myType&gt; indexedItems = new List&lt;myType&gt;();           \nTask t = new Task.Run(() =&gt; indexedItems = FileHandling.ReadIndexFile(downloadPath));\nlblProgress.Content = \"Reading index file...\";\nlstItems.ItemsSource = null;\nt.Wait();\n</code></pre>\n\n<p>What I actually want is to run the <code>ReadIndexFile</code> function with the paramether <code>downloadPath</code> to write the value of <code>indexItems</code> while allowing me to repaint and alter the UI and then wait for the Task to finish.</p>\n\n<p>I've ran into so many problems with that piece of code that I just ask for an example for this particular scenario and a brief explanation.</p>\n\n<p>Any help would be greatly appreciated!</p>\n\n<p>EDIT\nOriginal snippet with plain old sync. execution to show what happens:</p>\n\n<pre><code>if (File.Exists(downloadPath + @\"\\index.sbmdi\"))\n        {\n            lblProgress.Content = \"Reading index file...\";\n            lstMangas.ItemsSource = null;\n            indexedMangas = FileHandling.ReadIndexFile(downloadPath);\n            categoryList = Library.BuildCategoryList(indexedMangas);\n\n            lstMangas.ItemsSource = indexedMangas;\n            lblProgress.Content = \"Ready.\";\n        }\nlblProgress.Content = \"Ready.\";\nprgrssUpper.IsIndeterminate = false;\n</code></pre>\n\n<p>Then there are some UI updates in another method which are not related to this data, just updating labels, buttons, etc.</p>\n"}, {"tags": ["c#", "umbraco", "umbraco7"], "comments": [{"owner": {"reputation": 3143, "user_id": 632981, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8f38ba14897710e91e4abe78336d0089?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/632981/mark"}, "edited": false, "score": 0, "creation_date": 1534400871, "post_id": 51864175, "comment_id": 90692999, "body": "Is there anything in the logfiles? Is the user maybe locked out (check the umbracouser database table)?"}, {"owner": {"reputation": 390, "user_id": 5653130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zcqdq.jpg?s=128&g=1", "display_name": "Rushabh Master", "link": "https://stackoverflow.com/users/5653130/rushabh-master"}, "edited": false, "score": 0, "creation_date": 1563915583, "post_id": 51864175, "comment_id": 100857489, "body": "Have you looked into umbraco version compare <a href=\"https://our.umbraco.com/download/releases/compare\" rel=\"nofollow noreferrer\">our.umbraco.com/download/releases/compare</a> ? are there any breaking changes?"}], "owner": {"reputation": 1276, "user_id": 3954928, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/89a580b624983d6009fd4eaaecc488f5?s=128&d=identicon&r=PG&f=1", "display_name": "avechuche", "link": "https://stackoverflow.com/users/3954928/avechuche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534356685, "creation_date": 1534356685, "question_id": 51864175, "link": "https://stackoverflow.com/questions/51864175/umbraco-update-from-7-2-8-to-7-12", "title": "Umbraco update from 7.2.8 to 7.12", "body": "<p>I have a site running on Umbraco 7.2.8 and it works perfectly, but I would like to update it to the latest version (7.12). The site runs perfectly, but when updating and entering <code>localhost:4123/umbraco</code> I can not log in with the following error \"Login failed for user MyUser\". Looking at the code and debugging note that it never calls the \"ValidateUser\" method that I have extended. What's going on? Thx!</p>\n\n<pre><code>public class TFAMembershipProvider : UsersMembershipProvider, ITFAMembershipProvider\n{\n    private readonly IUserService _userService = ApplicationContext.Current.Services.UserService;\n\n    public override bool ValidateUser(string username, string password)\n    {\n        ... \n    }\n\n    public IUser ValidateOneTimeCode(string username, string onetimecode)\n    {\n        ...\n    }\n\n}\n</code></pre>\n\n<p>Web.config</p>\n\n<pre><code>&lt;membership defaultProvider=\"UmbracoMembershipProvider\" userIsOnlineTimeWindow=\"15\"&gt;\n    &lt;providers&gt;\n        &lt;clear /&gt;\n        &lt;add name=\"UmbracoMembershipProvider\" type=\"Umbraco.Web.Security.Providers.MembersMembershipProvider, Umbraco\" minRequiredNonalphanumericCharacters=\"0\" minRequiredPasswordLength=\"4\" useLegacyEncoding=\"true\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" defaultMemberTypeAlias=\"Member\" passwordFormat=\"Hashed\" /&gt;\n        &lt;add name=\"UsersMembershipProvider\" type=\"TwoFactorAuthentication.Package.Membership.BackOffice.TFAMembershipProvider, TwoFactorAuthentication.Package\" minRequiredNonalphanumericCharacters=\"0\" minRequiredPasswordLength=\"4\" useLegacyEncoding=\"true\" enablePasswordRetrieval=\"false\" enablePasswordReset=\"true\" requiresQuestionAndAnswer=\"false\" maxInvalidPasswordAttempts=\"5\" passwordFormat=\"Hashed\" /&gt;\n    &lt;/providers&gt;\n&lt;/membership&gt;\n</code></pre>\n"}, {"tags": ["c#", "json.net"], "answers": [{"tags": [], "owner": {"reputation": 2621, "user_id": 7884305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f582791bc217379415cc2bc54abc718?s=128&d=identicon&r=PG&f=1", "display_name": "Chayim Friedman", "link": "https://stackoverflow.com/users/7884305/chayim-friedman"}, "is_accepted": false, "score": 1, "last_activity_date": 1534358048, "creation_date": 1534358048, "answer_id": 51864495, "question_id": 51864124, "link": "https://stackoverflow.com/questions/51864124/how-to-deserialize-json-net-text-using-c-from-autodesk-plm/51864495#51864495", "title": "How to Deserialize JSON.NET text using C# from Autodesk PLM", "body": "<p>JSON is case-sensitive. You should use <code>list</code> instead of <code>List</code>. And this is invalid to cast <code>list</code> to <code>JArray</code>, since it's an object. Instead, use the following code, if you want to get the JSON string of each item:</p>\n\n<pre><code>var jObj = JObject.Parse(jText);\nvar token = (JArray)jObj.SelectToken(\"list\").SelectToken(\"item\");\n\nforeach (var item in token)\n{\n    string json = JsonConvert.SerializeObject(item);\n    // Process 'json' here...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "is_accepted": true, "score": 1, "last_activity_date": 1534358200, "creation_date": 1534358200, "answer_id": 51864534, "question_id": 51864124, "link": "https://stackoverflow.com/questions/51864124/how-to-deserialize-json-net-text-using-c-from-autodesk-plm/51864534#51864534", "title": "How to Deserialize JSON.NET text using C# from Autodesk PLM", "body": "<p>Here's how to parse that json text with Newtonsoft.JSon, using <code>dynamic</code>:</p>\n\n<pre><code>dynamic jobject = JObject.Parse(jText);\nstring descriptor = jobject.list.item[0].details.descriptor;\nJArray metaFields = jobject.list.item[0].metaFields.entry;\nvar array = metaFields.ToObject&lt;dynamic[]&gt;();\nvar part = array\n       .Where(d =&gt; d.key == \"AFFECTED_PART_NUMBERS\")\n       .Select(d =&gt; d.fieldData.value).First();\n</code></pre>\n"}], "owner": {"reputation": 297, "user_id": 9291003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da85a160080ee9f6d44bf57ee496203a?s=128&d=identicon&r=PG&f=1", "display_name": "Secret", "link": "https://stackoverflow.com/users/9291003/secret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 51864534, "answer_count": 2, "score": 1, "last_activity_date": 1534358200, "creation_date": 1534356423, "question_id": 51864124, "link": "https://stackoverflow.com/questions/51864124/how-to-deserialize-json-net-text-using-c-from-autodesk-plm", "title": "How to Deserialize JSON.NET text using C# from Autodesk PLM", "body": "<p>I read a number of answers and tried several times but I could not get this work.</p>\n\n<ul>\n<li>I have a JSON text which is the result I retrieve from our company's PLM system. </li>\n<li>I use json2csharp com to convert JSON text to class(es)</li>\n<li>To make the problem simple, I only want to get the <code>descriptor</code> which is <code>\"ID000001 - BMW - 2342152\"</code> and the <code>AFFECTED_PLANTS_SYSTEM1</code> which <code>value = \"HT\"</code></li>\n</ul>\n\n<p>I tried several possible Class Name for on</p>\n\n<pre><code>        JObject jObj = JObject.Parse(jText);\n        var token = (JArray)jObj.SelectToken(\"List\");\n\n\n        foreach (var item in token)\n        {\n           string json = JsonConvert.SerializeObject(item.SelectToken(\"item\"));\n\n        }\n</code></pre>\n\n<p>But <code>\"List\"</code>, <code>\"Item\"</code>, <code>\"Details\"</code>....all return <code>token is null object</code></p>\n\n<p>I tried dynamic, etc... but I cannot get anything and I am think about just extract text using string manipulation. Any help will be appreciated.</p>\n\n<pre><code>{\n  \"list\": {\n    \"item\": [\n      {\n        \"uri\": \"https://MyFirm.autodeskplm360.net/api/rest/v1/workspaces/921/items/258\",\n        \"id\": 258,\n        \"description\": \"ID000001 - BMW - 2342152\",\n        \"details\": {\n          \"descriptor\": \"ID000001 - BMW - 2342152\",\n          \"workspaceID\": 921,\n          \"deleted\": false,\n          \"versionID\": 145,\n          \"version\": 1,\n          \"timeStamp\": \"2018-01-29T15:22:44.399-05:00\",\n          \"lastModified\": \"2018-02-22T08:11:44.263-05:00\",\n          \"createdByUser\": {\n            \"uri\": \"https://MyFirm.autodeskplm360.net/api/rest/v1/users/IvSYN\",\n            \"id\": \"IvSYN\",\n            \"userNumber\": 0\n          },\n          \"owner\": {\n            \"uri\": \"https://MyFirm.autodeskplm360.net/api/rest/v1/users/IvSYN\",\n            \"id\": \"IvSYN\",\n            \"userNumber\": 0\n          },\n          \"additionalOwners\": {\n            \"group\": null,\n            \"user\": null\n          },\n          \"lifecycleState\": {\n            \"stateID\": 0,\n            \"stateName\": \"Work In Progress\",\n            \"effectivity\": false\n          },\n          \"lifecycleStatus\": \"Working\",\n          \"latest\": true,\n          \"working\": true,\n          \"workflowState\": {\n            \"stateId\": 457,\n            \"stateName\": \"Form Distributed\"\n          },\n          \"lastModifiedBy\": {\n            \"uri\": \"https://MyFirm.autodeskplm360.net/api/rest/v1/users/IvSYN\",\n            \"id\": \"IvSYN\",\n            \"userNumber\": 0\n          },\n          \"status\": \"Unreleased\",\n          \"dmsID\": 258\n        },\n        \"metaFields\": {\n          \"entry\": [\n            {\n              \"key\": \"AFFECTED_PART_NUMBERS\",\n              \"fieldData\": {\n                \"value\": \"234\\2453\\4646\\2324\",\n                \"formattedValue\": \"234\\2453\\4646\\2324\",\n                \"dataType\": \"Paragraph\"\n              }\n            },\n            {\n              \"key\": \"AFFECTED_PLANTS_SYSTEM2\",\n              \"fieldData\": {\n                \"value\": \"MO\",\n                \"formattedValue\": \"MO\",\n                \"dataType\": \"Paragraph\"\n              }\n            },\n            {\n              \"key\": \"SUPPLIER_PCN_NUMBER\",\n              \"fieldData\": {\n                \"value\": \"2342152\",\n                \"formattedValue\": \"2342152\",\n                \"dataType\": \"Single Line Text\"\n              }\n            },\n            {\n              \"key\": \"AFFECTED_CUSTOMERS_SYSTEM0\",\n              \"fieldData\": {\n                \"value\": \"na\",\n                \"formattedValue\": \"na\",\n                \"dataType\": \"Paragraph\"\n              }\n            },\n            {\n              \"key\": \"SUPPLIER\",\n              \"fieldData\": {\n                \"value\": \"BMW\",\n                \"formattedValue\": \"BMW\",\n                \"dataType\": \"Single Line Text\"\n              }\n            },\n            {\n              \"key\": \"AFFECTED_PLANTS_SYSTEM0\",\n              \"fieldData\": {\n                \"value\": \"No access\",\n                \"formattedValue\": \"No access\",\n                \"dataType\": \"Paragraph\"\n              }\n            },\n            {\n              \"key\": \"PRODUCT_DESCRIPTION\",\n              \"fieldData\": {\n                \"value\": \"SYSTEM FAILTURE\",\n                \"formattedValue\": \"SYSTEM FAILTURE\",\n                \"dataType\": \"Single Line Text\"\n              }\n            },\n            {\n              \"key\": \"IMPACT\",\n              \"fieldData\": {\n                \"value\": \"3\",\n                \"label\": \"PPAP\",\n                \"dataType\": \"Radio Button\"\n              }\n            },\n            {\n              \"key\": \"AFFECTED_PLANTS_SYSTEM1\",\n              \"fieldData\": {\n                \"value\": \"HT\",\n                \"formattedValue\": \"HT\",\n                \"dataType\": \"Paragraph\"\n              }\n            },\n            {\n              \"key\": \"DATE_OF_PCN\",\n              \"fieldData\": {\n                \"value\": \"2018-10-09 00:00:00.0\",\n                \"formattedValue\": \"10/09/2018\",\n                \"dataType\": \"Date\"\n              }\n            },\n            {\n              \"key\": \"NOTE\",\n              \"fieldData\": {\n                \"value\": \"None\",\n                \"formattedValue\": \"None\",\n                \"dataType\": \"Paragraph\"\n              }\n            },\n            {\n              \"key\": \"AFFECTED_CUSTOMERS_SYSTEM2\",\n              \"fieldData\": {\n                \"value\": \"BWM (MA)\",\n                \"formattedValue\": \"BWM (MA)\",\n                \"dataType\": \"Paragraph\"\n              }\n            },\n            {\n              \"key\": \"AFFECTED_CUSTOMERS_SYSTEM1\",\n              \"fieldData\": {\n                \"value\": \"na\",\n                \"formattedValue\": \"na\",\n                \"dataType\": \"Paragraph\"\n              }\n            },\n            {\n              \"key\": \"ID\",\n              \"fieldData\": {\n                \"value\": \"ID000001\",\n                \"formattedValue\": \"ID000001\",\n                \"dataType\": \"Auto Number\"\n              }\n            },\n            {\n              \"key\": \"AFFECTED_CUSTOMERS_SYSTEM3\",\n              \"fieldData\": {\n                \"value\": \"AT\",\n                \"formattedValue\": \"AT\",\n                \"dataType\": \"Paragraph\"\n              }\n            }\n            ,\n            {\n              \"key\": \"AFFECTED_CUSTOMERS_SYSTEM3\",\n              \"fieldData\": {\n                \"value\": \"HONDA\",\n                \"formattedValue\": \"HONDA\",\n                \"dataType\": \"Paragraph\"\n              }\n            }\n          ]\n        },\n        \"relations\": {\n          \"entry\": [\n            {\n              \"key\": \"REV0\",\n              \"value\": null\n            },\n            {\n              \"key\": \"REV1\",\n              \"value\": null\n            }\n          ]\n        }\n      }\n    ]\n  }\n}\n</code></pre>\n"}, {"tags": ["c#", "unity3d"], "comments": [{"owner": {"reputation": 6783, "user_id": 5935112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ymenn.jpg?s=128&g=1", "display_name": "Just Shadow", "link": "https://stackoverflow.com/users/5935112/just-shadow"}, "edited": false, "score": 0, "creation_date": 1534356350, "post_id": 51864029, "comment_id": 90680336, "body": "Could you please provide slightly more details on what you&#39;ve tried and what&#39;s the exact problem?"}, {"owner": {"reputation": 91, "user_id": 8105932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9e587d5596e45426ae0790627f872bb?s=128&d=identicon&r=PG", "display_name": "Simpson G.", "link": "https://stackoverflow.com/users/8105932/simpson-g"}, "reply_to_user": {"reputation": 6783, "user_id": 5935112, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ymenn.jpg?s=128&g=1", "display_name": "Just Shadow", "link": "https://stackoverflow.com/users/5935112/just-shadow"}, "edited": false, "score": 0, "creation_date": 1534356788, "post_id": 51864029, "comment_id": 90680536, "body": "Ok I&#39;m going to edit the question"}, {"owner": {"reputation": 3172, "user_id": 5024009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4d977b88978feaf3a94f04d3bc3368f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Brookes", "link": "https://stackoverflow.com/users/5024009/jack-brookes"}, "edited": false, "score": 0, "creation_date": 1534358271, "post_id": 51864029, "comment_id": 90681182, "body": "Try initially setting x position to <code>Input.mousePosition.x</code>?"}, {"owner": {"reputation": 3486, "user_id": 3427520, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vb17V.jpg?s=128&g=1", "display_name": "zwcloud", "link": "https://stackoverflow.com/users/3427520/zwcloud"}, "edited": false, "score": 0, "creation_date": 1534437755, "post_id": 51864029, "comment_id": 90715080, "body": "Show us some code..."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 8105932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9e587d5596e45426ae0790627f872bb?s=128&d=identicon&r=PG", "display_name": "Simpson G.", "link": "https://stackoverflow.com/users/8105932/simpson-g"}, "edited": false, "score": 0, "creation_date": 1534361246, "post_id": 51864882, "comment_id": 90682543, "body": "I must put this script on the sphere?"}, {"owner": {"reputation": 658, "user_id": 2227456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e3203c58148813db9eb84850251b17?s=128&d=identicon&r=PG", "display_name": "Julxzs", "link": "https://stackoverflow.com/users/2227456/julxzs"}, "reply_to_user": {"reputation": 91, "user_id": 8105932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9e587d5596e45426ae0790627f872bb?s=128&d=identicon&r=PG", "display_name": "Simpson G.", "link": "https://stackoverflow.com/users/8105932/simpson-g"}, "edited": false, "score": 0, "creation_date": 1534449790, "post_id": 51864882, "comment_id": 90720646, "body": "You can put this on the sphere if you want. You would just need to change <code>ball.transform</code> to <code>transform</code>."}], "tags": [], "owner": {"reputation": 658, "user_id": 2227456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e3203c58148813db9eb84850251b17?s=128&d=identicon&r=PG", "display_name": "Julxzs", "link": "https://stackoverflow.com/users/2227456/julxzs"}, "is_accepted": false, "score": 1, "last_activity_date": 1534359811, "creation_date": 1534359811, "answer_id": 51864882, "question_id": 51864029, "link": "https://stackoverflow.com/questions/51864029/object-follow-finger-only-when-it-swipe-on-the-screen/51864882#51864882", "title": "Object Follow finger Only when it swipe on the Screen", "body": "<p>From what I understand, it seems you want to get the position of the user's finger and move the ball accordingly?</p>\n\n<p>You could achieve this with <a href=\"https://docs.unity3d.com/ScriptReference/Touch-position.html\" rel=\"nofollow noreferrer\">Touch.position</a></p>\n\n<p>Example:</p>\n\n<pre><code>private void Update()\n{\n    Touch touch = Input.GetTouch(0); // Get the touch data for the first finger\n    Vector2 position = touch.position; // Get the position in screen-space\n    Vector3 worldPosition = Camera.main.ScreenToWorldPoint(position); // Convert the position to world space\n\n    Vector3 ballPosition = ball.transform.position;\n    ball.transform.position = new Vector3(worldPosition.x, ballPosition.y, ballPosition.z); // Move the ball\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 556, "user_id": 9855648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvzwe.png?s=128&g=1", "display_name": "Horothenic", "link": "https://stackoverflow.com/users/9855648/horothenic"}, "is_accepted": false, "score": 0, "last_activity_date": 1534446098, "creation_date": 1534446098, "answer_id": 51883772, "question_id": 51864029, "link": "https://stackoverflow.com/questions/51864029/object-follow-finger-only-when-it-swipe-on-the-screen/51883772#51883772", "title": "Object Follow finger Only when it swipe on the Screen", "body": "<p>I think you should handle the input separately from the sphere.</p>\n\n<p>Put this on a script to detect the swiping on the screen.</p>\n\n<pre><code>    bool inputBegan = false;\n    Vector2 beganPosition;\n\n    void Update()\n    {\n        if (!inputBegan &amp;&amp; Input.GetMouseButtonDown (0))\n        {\n            inputBegan = true;\n            beganPosition = Input.mousePosition;\n        }\n        else if (inputBegan &amp;&amp; Input.GetMouseButtonUp (0))\n        {\n            //If you want a threshold you need to change this comparison\n            if (beganPosition.x &gt; Input.mousePosition) \n            {\n                MoveBallLeft ();\n            }\n            else\n            {\n                MoveBallRight ();\n            }\n            inputBegan = false;\n        }\n    }\n</code></pre>\n\n<p>The movement of the balls you can achieve it adding or substracting <code>Vector2.right * movingDistance</code> to the sphere Transform if you want it to teleport or making the sphere move slowly using a <code>targetPosition</code> and <code>currentPosition</code> and each Update cycle add a little bit of transform distance.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 8105932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9e587d5596e45426ae0790627f872bb?s=128&d=identicon&r=PG", "display_name": "Simpson G.", "link": "https://stackoverflow.com/users/8105932/simpson-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1534516651, "creation_date": 1534516651, "answer_id": 51897711, "question_id": 51864029, "link": "https://stackoverflow.com/questions/51864029/object-follow-finger-only-when-it-swipe-on-the-screen/51897711#51897711", "title": "Object Follow finger Only when it swipe on the Screen", "body": "<p>I solved it doing <a href=\"https://stackoverflow.com/questions/43169474/unity-touch-input-for-rolling-sky-x-axis-control\">this</a> and setting the variable NavigationMultiplier to 10000</p>\n"}], "owner": {"reputation": 91, "user_id": 8105932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9e587d5596e45426ae0790627f872bb?s=128&d=identicon&r=PG", "display_name": "Simpson G.", "link": "https://stackoverflow.com/users/8105932/simpson-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1534516651, "creation_date": 1534355974, "last_edit_date": 1534437719, "question_id": 51864029, "link": "https://stackoverflow.com/questions/51864029/object-follow-finger-only-when-it-swipe-on-the-screen", "title": "Object Follow finger Only when it swipe on the Screen", "body": "<p>I have a sphere in that is moving foward and I need it to follow my finger smoothly when it swipes on the screen but only in the x axis.\nI trying to make the exact movent like <a href=\"https://play.google.com/store/apps/details?id=com.turbochilli.rollingsky\" rel=\"nofollow noreferrer\">Rolling Sky</a>, <a href=\"https://play.google.com/store/apps/details?id=com.bigframes.color_road\" rel=\"nofollow noreferrer\">Color Road</a> </p>\n\n<p><img src=\"https://i.stack.imgur.com/xXQMX.jpg\" alt=\"enter image description here\"></p>\n\n<p>The ball Should <strong>follow my finger when it swipes in the x axis and move smoothly.</strong>\nJust like in the games I mention before.\nI try <code>OnMouseDrag</code> and a lot of ways but it dont work correctly beacuse it dont dont follow the finger or it dont move while finger is swiping.</p>\n"}, {"tags": ["c#", "entity-framework-core", "asp.net-core-2.0"], "answers": [{"comments": [{"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1534414307, "post_id": 51872916, "comment_id": 90700554, "body": "The thing is more complicated though because <code>OnModelCreating</code> by default is called only once per context type (and options?)"}, {"owner": {"reputation": 93252, "user_id": 861716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb1a28030a6da0e72693e36c77eb3cd6?s=128&d=identicon&r=PG", "display_name": "Gert Arnold", "link": "https://stackoverflow.com/users/861716/gert-arnold"}, "reply_to_user": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1534414518, "post_id": 51872916, "comment_id": 90700679, "body": "I think that should do, at least, I took it that this table name should be specified only once, i.e. depending on the connected database."}, {"owner": {"reputation": 553, "user_id": 564274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e06e0ee64ebe06392123dcca2195bd0?s=128&d=identicon&r=PG", "display_name": "pckben", "link": "https://stackoverflow.com/users/564274/pckben"}, "edited": false, "score": 0, "creation_date": 1534451010, "post_id": 51872916, "comment_id": 90721121, "body": "I wanted to use EF to work with similar tables in the db, table name is dependent on some value entered by a user, and is changeable. So your approach doesn&#39;t work for the reason that Ivan stated. I assume this is not possible for now and I&#39;m changing the design to have a single table instead. It was probably a bad design in the first place anyway."}, {"owner": {"reputation": 93252, "user_id": 861716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb1a28030a6da0e72693e36c77eb3cd6?s=128&d=identicon&r=PG", "display_name": "Gert Arnold", "link": "https://stackoverflow.com/users/861716/gert-arnold"}, "edited": false, "score": 0, "creation_date": 1534451896, "post_id": 51872916, "comment_id": 90721510, "body": "OK, so the name has to change several times during the life-time of one application. That&#39;s indeed not easy with EF because EF initializes (and stores) the compiled model only once. You <i>could</i> initialize and store compiled models manually for each table name, but that should be a last resort if everything else fails and the requirement can&#39;t be dropped. Fortunately, in your case there&#39;s a better alternative."}, {"owner": {"reputation": 93252, "user_id": 861716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb1a28030a6da0e72693e36c77eb3cd6?s=128&d=identicon&r=PG", "display_name": "Gert Arnold", "link": "https://stackoverflow.com/users/861716/gert-arnold"}, "edited": false, "score": 0, "creation_date": 1534452206, "post_id": 51872916, "comment_id": 90721639, "body": "I think it can be valuable for future readers to see why you wanted this initially (explain in the question) and how you solved this. I&#39;ve seen people struggling with similar issues before. I&#39;ll remove my answer but I&#39;d love to see the result of our discussion preserved somehow."}, {"owner": {"reputation": 553, "user_id": 564274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e06e0ee64ebe06392123dcca2195bd0?s=128&d=identicon&r=PG", "display_name": "pckben", "link": "https://stackoverflow.com/users/564274/pckben"}, "edited": false, "score": 0, "creation_date": 1534452856, "post_id": 51872916, "comment_id": 90721927, "body": "I have an unusual scenario where I allow user to upload a dataset of arbitrary schema, the back-end store that dataset in a new dynamically created table using ADO. Now I have a common way to process the dataset and store the outputs to a new table (<code>MyTableClass</code>). Initially I wanted these results table to be separated from each other. But I guess I should create a key pair of (<code>datasetId</code>, <code>datarowId</code>) in <code>MyTableClass</code> and store all the results together."}, {"owner": {"reputation": 553, "user_id": 564274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e06e0ee64ebe06392123dcca2195bd0?s=128&d=identicon&r=PG", "display_name": "pckben", "link": "https://stackoverflow.com/users/564274/pckben"}, "edited": false, "score": 0, "creation_date": 1534452911, "post_id": 51872916, "comment_id": 90721951, "body": "if the answer is &quot;No, you can&#39;t do it with EF&quot;, then I&#39;ll accept your answer if you could add it. I think it&#39;s a valuable discussion to keep."}, {"owner": {"reputation": 93252, "user_id": 861716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb1a28030a6da0e72693e36c77eb3cd6?s=128&d=identicon&r=PG", "display_name": "Gert Arnold", "link": "https://stackoverflow.com/users/861716/gert-arnold"}, "edited": false, "score": 0, "creation_date": 1534454243, "post_id": 51872916, "comment_id": 90722412, "body": "OK, I modified the answer."}, {"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 1, "creation_date": 1534486899, "post_id": 51872916, "comment_id": 90729799, "body": "@Gert, this can be made working by implementing custom <code>IModelCacheKeyFactory</code>. It&#39;s the service interface controlling the model caching."}], "tags": [], "owner": {"reputation": 93252, "user_id": 861716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb1a28030a6da0e72693e36c77eb3cd6?s=128&d=identicon&r=PG", "display_name": "Gert Arnold", "link": "https://stackoverflow.com/users/861716/gert-arnold"}, "is_accepted": true, "score": 1, "last_activity_date": 1534454014, "last_edit_date": 1534454014, "creation_date": 1534408658, "answer_id": 51872916, "question_id": 51864015, "link": "https://stackoverflow.com/questions/51864015/entity-framework-map-model-class-to-table-at-run-time/51872916#51872916", "title": "Entity Framework map model class to table at run time", "body": " \n\n<p>I've seen situations where databases with identical structure but varying table names had been deployed to several sites. In that case, EF only needs the know the table name(s) at application startup.</p>\n\n<p>This can be done by adding a constructor parameter to the context:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>private readonly string _userDefinedTableName;\n\npublic MyContext(string userDefinedTableName)\n{\n    _userDefinedTableName = userDefinedTableName;\n}\n</code></pre>\n\n<p>Then, in <code>OnModelCreating</code>:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>modelBuilder.Entity&lt;MyTableClass&gt;().ToTable(_userDefinedTableName);\n</code></pre>\n\n<p>However, in your case the name has to change any number of times at runtime. With Entity Framework, that's impossible (well, more exactly, too impractical to really contemplate it). EF compiles and stores model once per context class, because it would be too expensive to do all that for each context instantiation.</p>\n\n<p>That means that <code>OnModelCreating</code> runs not more than once in an application and the first table name remains.</p>\n\n<p>You'll have to find other ways to address table data dynamically, or change the design so the multiple tables can be converted into one fixed table.</p>\n"}, {"tags": [], "owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "is_accepted": false, "score": 0, "last_activity_date": 1534527050, "last_edit_date": 1534527050, "creation_date": 1534523355, "answer_id": 51899590, "question_id": 51864015, "link": "https://stackoverflow.com/questions/51864015/entity-framework-map-model-class-to-table-at-run-time/51899590#51899590", "title": "Entity Framework map model class to table at run time", "body": "<p>Since this is an interesting issue which might help other people that need some dynamic model building, here is how it can be implemented.</p>\n\n<p>Let say we have a custom context with custom table name provided via constructor (as Gert Arnold suggested in the other answer):</p>\n\n<pre><code>public class CustomDbContext : DbContext\n{\n    // \u2026\n\n    private string customTableName;\n    public string CustomTableName =&gt; customTableName ?? \"DefaultCustomTableName\";\n}\n</code></pre>\n\n<p>and we use it inside the <code>OnModelCreating</code> (it should be there, currently there is no other simple way to create model using the predefined convention sets):</p>\n\n<pre><code>modelBuilder.Entity&lt;CustomEntity&gt;().ToTable(CustomTableName); \n</code></pre>\n\n<p>The only problem is that by default the <code>OnModelCreating</code> is called just once per context type and is cached. Luckily EF Core is built on top of a (replaceable) services architecture. The service interface responsible for model caching is <a href=\"https://docs.microsoft.com/en-us/ef/core/api/microsoft.entityframeworkcore.infrastructure.imodelcachekeyfactory\" rel=\"nofollow noreferrer\"><code>IModelCacheKeyFactory</code></a>:</p>\n\n<blockquote>\n  <p>Creates keys that uniquely identifies the model for a given context. This is used to store and lookup a cached model for a given context. </p>\n</blockquote>\n\n<p>It has a single method</p>\n\n<pre><code>object Create(DbContext context)\n</code></pre>\n\n<p>The returned object <code>GetHashCode</code> / <code>Equals</code> methods are used to identify the passed context instance. The default EF Core service implementation returns an object which compares the type of the context.</p>\n\n<p>In order to make the custom context model working, we need to replace it with a custom service which also compares the custom state (<code>CustomTableName</code> in our case). The implementation could be like this (using C#7.0 value tuples):</p>\n\n<pre><code>class CustomModelCacheKeyFactory : IModelCacheKeyFactory\n{\n    public object Create(DbContext context) =&gt; new CustomModelCacheKey(context);\n}\n\nclass CustomModelCacheKey\n{\n    (Type ContextType, string CustomTableName) key;\n    public CustomModelCacheKey(DbContext context)\n    {\n        key.ContextType = context.GetType();\n        key.CustomTableName = (context as CustomDbContext)?.CustomTableName;\n    }\n    public override int GetHashCode() =&gt; key.GetHashCode();\n    public override bool Equals(object obj) =&gt; obj is CustomModelCacheKey other &amp;&amp; key.Equals(other.key);\n}\n</code></pre>\n\n<p>The only thing remaining is to replace the existing service with the custom. It can be done inside <code>OnConfiguring</code> override:</p>\n\n<pre><code>optionsBuilder.ReplaceService&lt;IModelCacheKeyFactory, CustomModelCacheKeyFactory&gt;();\n</code></pre>\n\n<p>And that's all. Anytime you create context with different <code>CustomTableName</code>, EF Core will create a new model and map the <code>CustomEntity</code> to that table.</p>\n\n<p>The same technique can be applied to any context containing custom model affecting state by including all custom state in <code>CustomModelCacheKey.key</code> tuple. Of course it could be implemented w/o value tuples, just with them the <code>GetHashCode</code> and <code>Equals</code> overrides are easier to implement. Actually instead of <code>CustomModelCacheKey</code> the custom service can return directly value tuple containing the context type and custom state member values.</p>\n"}], "owner": {"reputation": 553, "user_id": 564274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e06e0ee64ebe06392123dcca2195bd0?s=128&d=identicon&r=PG", "display_name": "pckben", "link": "https://stackoverflow.com/users/564274/pckben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1624, "favorite_count": 0, "accepted_answer_id": 51872916, "answer_count": 2, "score": 0, "last_activity_date": 1534527050, "creation_date": 1534355926, "last_edit_date": 1534522728, "question_id": 51864015, "link": "https://stackoverflow.com/questions/51864015/entity-framework-map-model-class-to-table-at-run-time", "title": "Entity Framework map model class to table at run time", "body": "<p>In a project using ASP.NET Core 2.0 and Entity Framework, I'm trying to map a known table schema (coded into class <code>MyTableClass</code>) to an unknown table name. This table name is given by the user at run time, so this is done outside of the <code>OnModelCreating</code> method of the Context class. Is there a way to do something like the following pseudocode:</p>\n\n<pre><code>void OnUserEnteredTableNameFromUI(string tableName)\n{\n    var modelBuilder = new ModelBuilder(???);  // how?\n    modelBuilder.Entity&lt;MyTableClass&gt;().ToTable(tableName);\n    // how to get a ref to DbSet&lt;MyTableClass&gt; myTable from here?\n}\n</code></pre>\n"}, {"tags": ["c#", "json.net", "jsonconvert"], "comments": [{"owner": {"reputation": 25472, "user_id": 105084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae860f9442151273f880bb1e0d790a5a?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/105084/matthew"}, "edited": false, "score": 0, "creation_date": 1534356732, "post_id": 51863848, "comment_id": 90680505, "body": "What is your question? What have you tried?"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 1, "creation_date": 1534357084, "post_id": 51863848, "comment_id": 90680668, "body": "Sounds like you need to implement <code>ReadJson</code>. Just do the opposite of what you did previously; look for the <code>Flat</code> attribute on properties of <code>objectType</code>. For each property that has it, create an object of the type of that property, and fill its values with the values it needs for JSON."}, {"owner": {"reputation": 500, "user_id": 4977168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab582c6c0a0524f7dfc3197f1e2c45b2?s=128&d=identicon&r=PG&f=1", "display_name": "KolesnichenkoDS", "link": "https://stackoverflow.com/users/4977168/kolesnichenkods"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1534415673, "post_id": 51863848, "comment_id": 90701323, "body": "@HereticMonkey yep, tried to do that, works for some cases but sometimes throws an <code>InvalidCastException</code> and I don&#39;t understand why that happens and how to fix it. Updated the code btw."}], "owner": {"reputation": 500, "user_id": 4977168, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab582c6c0a0524f7dfc3197f1e2c45b2?s=128&d=identicon&r=PG&f=1", "display_name": "KolesnichenkoDS", "link": "https://stackoverflow.com/users/4977168/kolesnichenkods"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 439, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534418219, "creation_date": 1534355234, "last_edit_date": 1534418219, "question_id": 51863848, "link": "https://stackoverflow.com/questions/51863848/how-to-map-flat-json-to-nested-object-using-custom-jsonconverter", "title": "How to map flat JSON to nested object using custom JsonConverter?", "body": "<p>I need to map flat JSON to nested object, where flattened properties are marked with <code>Flat</code> attribute. E.g. mapping</p>\n\n<pre><code>{\n    \"x\": 1,\n    \"y\": 2,\n    \"z\": 3\n}\n</code></pre>\n\n<p>to the following model</p>\n\n<pre><code>public class Foo {\n    public int X { get; set; }\n    public int Y { get; set; }\n}\n\npublic class Bar {\n    [JsonFlat]\n    public Foo Foo { get; set; }\n    public int Z { get; set; }\n}\n</code></pre>\n\n<p>should give <code>Bar { Foo { X = 1, Y = 2 }, Z = 3 }</code>. I've implemented converting complex object to JSON but not vice versa:</p>\n\n<pre><code>public class FlatJsonConverter : JsonConverter\n{\n    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)\n    {\n        writer.WriteStartObject();\n        WriteObject(writer, value, serializer);\n        writer.WriteEndObject();\n    }\n\n    private void WriteObject(JsonWriter writer, object value, JsonSerializer serializer)\n    {\n        var t = JToken.FromObject(value);\n        var flatNames = new List&lt;string&gt;();\n        if (t.Type == JTokenType.Object)\n        {\n            var type = value.GetType();\n            foreach (var propertyInfo in type.GetProperties())\n            {\n                var flatAttr = propertyInfo.GetCustomAttribute(typeof(JsonFlatAttribute));\n                if (flatAttr != null) flatNames.Add(propertyInfo.Name.ToLower());\n            }\n\n            foreach (var token in t.Children())\n            {\n                if (token.Type == JTokenType.Property &amp;&amp; flatNames.Contains(((JProperty) token).Name.ToLower()))\n                {\n                    foreach (var child in token.Children())\n                    {\n                        WriteObject(writer, child.Value&lt;object&gt;(), serializer);\n                    }\n                }\n                else\n                {\n                    WriteObject(writer, token.Value&lt;object&gt;(), serializer);\n                }\n            }\n        }\n        else\n        {\n            t.WriteTo(writer);\n        }\n    }\n\n    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)\n    {\n        var jObject = JObject.Load(reader);\n        var value = objectType.GetConstructor(new Type[] { }).Invoke(new object[] { });\n\n        return ReadObject(objectType, jObject, value);\n    }\n\n    private object ReadObject(Type objectType, JObject jObject, object value)\n    {\n        foreach (var propertyInfo in objectType.GetProperties())\n        {\n            var flatAttr = propertyInfo.GetCustomAttribute(typeof(JsonFlatAttribute));\n            if (flatAttr != null)\n            {\n                var obj = propertyInfo.PropertyType.GetConstructor(new Type[] { }).Invoke(new object[] { });\n                foreach (var property in obj.GetType().GetProperties())\n                {\n                    var method = jObject.GetType().GetMethod(\"Value\").MakeGenericMethod(property.PropertyType);\n                    var val = method.Invoke(jObject, new object[] { property.Name.ToLower() });\n                    property.SetValue(obj, val);\n                }\n\n                propertyInfo.SetValue(value, obj);\n            }\n            else\n            {\n                var method = jObject.GetType().GetMethod(\"Value\").MakeGenericMethod(propertyInfo.PropertyType);\n                var val = method.Invoke(jObject, new object[] { propertyInfo.Name.ToLower() }); // &lt;- System.InvalidCastException: Cannot cast JObject to JToken.\n                propertyInfo.SetValue(value, val);\n            }\n        }\n\n        return value;\n    }\n\n    public override bool CanConvert(Type objectType)\n    {\n        return true;\n    }\n\n    public override bool CanRead =&gt; true;\n    public override bool CanWrite =&gt; true;\n}\n</code></pre>\n\n<p><strong>UPD</strong>: Updated the code. It works for some cases, but for some (non-flat) properties it throws <code>InvalidCastException</code> when trying to read JSON (see <code>ReadObject</code>, there's a comment with exception message). E.g. I have DTO class like</p>\n\n<pre><code>class FooDto { ... }\nclass BarDto {\n    public string Name { get; set; }\n    public FooDto Foo { get; set; }\n    ...\n}\n</code></pre>\n\n<p><code>Name</code> is handled correctly but trying to read <code>Foo</code> leads to an exception.\nMinimal reproducible example: <a href=\"https://pastebin.com/2gXNiLMz\" rel=\"nofollow noreferrer\">https://pastebin.com/2gXNiLMz</a></p>\n"}, {"tags": ["c#", "uwp", "uwp-xaml", "windows-community-toolkit"], "comments": [{"owner": {"reputation": 12140, "user_id": 1054961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72445c52b16d4761b6add427071f2ff?s=128&d=identicon&r=PG", "display_name": "Shawn Kendrot", "link": "https://stackoverflow.com/users/1054961/shawn-kendrot"}, "edited": false, "score": 1, "creation_date": 1534363485, "post_id": 51863836, "comment_id": 90683483, "body": "When new blades are added, they should scroll into view automatically. If it is not doing that in your application, please <a href=\"https://github.com/Microsoft/WindowsCommunityToolkit/issues\" rel=\"nofollow noreferrer\">submit an issue</a> with a reproducible sample."}], "answers": [{"comments": [{"owner": {"reputation": 12140, "user_id": 1054961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72445c52b16d4761b6add427071f2ff?s=128&d=identicon&r=PG", "display_name": "Shawn Kendrot", "link": "https://stackoverflow.com/users/1054961/shawn-kendrot"}, "edited": false, "score": 0, "creation_date": 1534448922, "post_id": 51865862, "comment_id": 90720330, "body": "If you need to call UpdateLayout() then there is a bug we would need to fix. Can you please file an issue on github"}], "tags": [], "owner": {"reputation": 1005, "user_id": 131149, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/afsXU.png?s=128&g=1", "display_name": "ClairelyClaire", "link": "https://stackoverflow.com/users/131149/clairelyclaire"}, "is_accepted": true, "score": 2, "last_activity_date": 1534364409, "creation_date": 1534364409, "answer_id": 51865862, "question_id": 51863836, "link": "https://stackoverflow.com/questions/51863836/uwp-xaml-bladeview-control-scroll-newly-created-bladeitem-into-view/51865862#51865862", "title": "UWP XAML BladeView control - scroll newly-created BladeItem into view", "body": "<p>I just needed to use <code>bladeView.UpdateLayout()</code> before calling <code>StartBringIntoView()</code>.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>if (bladeView.BladeMode == BladeMode.Fullscreen)\n{\n    // update the layout so StartBringIntoView() works\n    bladeView.UpdateLayout();\n\n    // scroll BladeView to newly-created BladeItem\n    newBlade.StartBringIntoView();\n}\n</code></pre>\n"}], "owner": {"reputation": 1005, "user_id": 131149, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/afsXU.png?s=128&g=1", "display_name": "ClairelyClaire", "link": "https://stackoverflow.com/users/131149/clairelyclaire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 51865862, "answer_count": 1, "score": 3, "last_activity_date": 1534364409, "creation_date": 1534355185, "last_edit_date": 1534357042, "question_id": 51863836, "link": "https://stackoverflow.com/questions/51863836/uwp-xaml-bladeview-control-scroll-newly-created-bladeitem-into-view", "title": "UWP XAML BladeView control - scroll newly-created BladeItem into view", "body": "<p>I'm using the <code>BladeView</code> control from Microsoft's Windows Community Toolkit. When the application window is &lt; 640px, the <code>BladeMode</code> property changes to <code>Fullscreen</code>.</p>\n\n<p>When a new blade is created in my code behind, I want the <code>BladeView</code> to scroll to the right so that new blade is displayed. It <em>seems</em> like I should be able to use <code>StartBringIntoView()</code> to accomplish this, but it's not doing anything.</p>\n\n<p>Here's what I'm doing:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>if (bladeView.BladeMode == BladeMode.Fullscreen)\n{\n    // current window width\n    Rect windowBounds = Window.Current.Bounds;\n    int currentWidth = (int)windowBounds.Width;\n\n    // scroll to view\n    BringIntoViewOptions opts = new BringIntoViewOptions();\n    Rect target = new Rect { Height = windowBounds.Height, Width = windowBounds.Width, X = currentWidth, Y = 0 };\n    opts.TargetRect = target;\n    newBlade.StartBringIntoView(opts);\n}\n</code></pre>\n\n<p>This is what my XAML tree looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JYkaj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JYkaj.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "arrays", "string", "tcp"], "comments": [{"owner": {"reputation": 360447, "user_id": 3043, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/61d2a0f034915fa9d2acd6f6b145bba8?s=128&d=identicon&r=PG", "display_name": "Joel Coehoorn", "link": "https://stackoverflow.com/users/3043/joel-coehoorn"}, "edited": false, "score": 2, "creation_date": 1534355456, "post_id": 51863813, "comment_id": 90679847, "body": "<code>result</code> shows <code>null</code> because that line hasn&#39;t executed yet. You haven&#39;t finished the assignment to the variable. What happens if you press <code>F10</code>?"}, {"owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "edited": false, "score": 1, "creation_date": 1534355463, "post_id": 51863813, "comment_id": 90679852, "body": "Have you stepped forward in your debugger to check if the variable was assigned? Your image is at the step, but <code>result</code> won&#39;t be assigned until you continue past that step."}, {"owner": {"reputation": 152, "user_id": 9931524, "user_type": "registered", "profile_image": "https://graph.facebook.com/1745968532152058/picture?type=large", "display_name": "Jay Tailor", "link": "https://stackoverflow.com/users/9931524/jay-tailor"}, "edited": false, "score": 0, "creation_date": 1534355770, "post_id": 51863813, "comment_id": 90680022, "body": "Ya it works my apologies I didn&#39;t realize I had the break-point at the variable."}], "answers": [{"tags": [], "owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "is_accepted": true, "score": 2, "last_activity_date": 1534355520, "creation_date": 1534355520, "answer_id": 51863925, "question_id": 51863813, "link": "https://stackoverflow.com/questions/51863813/converting-client-string-to-array-on-server-c/51863925#51863925", "title": "Converting Client String to Array on Server C#", "body": "<p>You have stopped at the break-point.</p>\n\n<p>You should proceed one more step, in order for that line to be executed.</p>\n\n<p>Currently, you're at a step similar to this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Hc0pI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hc0pI.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you proceed one more step using <code>F10</code> (or 'Step Over' button) , it will execute that line and assign the value of addition to <code>c</code> in this example.</p>\n"}], "owner": {"reputation": 152, "user_id": 9931524, "user_type": "registered", "profile_image": "https://graph.facebook.com/1745968532152058/picture?type=large", "display_name": "Jay Tailor", "link": "https://stackoverflow.com/users/9931524/jay-tailor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 51863925, "answer_count": 1, "score": 0, "last_activity_date": 1534355520, "creation_date": 1534355106, "question_id": 51863813, "link": "https://stackoverflow.com/questions/51863813/converting-client-string-to-array-on-server-c", "title": "Converting Client String to Array on Server C#", "body": "<p>I want to convert the string the server is receiving from the client to in an array. However when I use the String.Split method the result variable is showing null. Anyone know why that might be?</p>\n\n<p><a href=\"https://i.stack.imgur.com/aEe6a.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aEe6a.jpg\" alt=\"Array is not filled when using &lt;code&gt;split&lt;/code&gt;\"></a></p>\n\n<pre><code>namespace ExampleLib.Server\n{\n\n    public class Server\n    {\n        private class ConnectedClient\n        {\n            public int ID { get; }\n            private TcpClient _client;\n            private StreamReader _streamReader;\n\n            public delegate void NetDataEventHandler(object sender, NetDataEventArgs e);\n\n            public event NetDataEventHandler NetData;\n\n            public virtual void OnNetData(NetDataEventArgs e)\n            {\n                NetData?.Invoke(this, e);\n            }\n\n            public class NetDataEventArgs\n            {\n                public NetDataEventArgs(int id, string message)\n                {\n                    ID = id;\n                    Message = message;\n                }\n\n                public string Message { get; }\n                public int ID { get; }\n            }\n        public ConnectedClient(int id, TcpClient client)\n          {\n            ID = id;\n            _client = client;\n           }\n\n    private void ClientReceiveData(object sender, ConnectedClient.NetDataEventArgs e)\n            {\n                if (string.IsNullOrEmpty(e.Message) == false)\n                {\n                    Trace.WriteLine($\" Client {e.ID}: {e.Message}\");\n                    var result = e.Message.Split(',');\n                }\n            }\n</code></pre>\n"}, {"tags": ["c#", ".net", "windows", "visual-studio", "group-policy"], "comments": [{"owner": {"reputation": 11603, "user_id": 1007019, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/HjT3D.png?s=128&g=1", "display_name": "UnhandledExcepSean", "link": "https://stackoverflow.com/users/1007019/unhandledexcepsean"}, "edited": false, "score": 1, "creation_date": 1534355176, "post_id": 51863800, "comment_id": 90679719, "body": "What framework are you targeting and what does your app.config look like?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1534356239, "post_id": 51863800, "comment_id": 90680294, "body": "&quot;meant to run with administrator privileges&quot; is surely the problem.  You can&#39;t prompt the user with the UAC consent dialog at startup, he&#39;ll have no idea why the prompt appeared.  So this is actively suppressed by the OS.  Only workaround is use two apps, one you can start automatically, with a button that starts the second app and thus triggers the consent dialog.  Or a scheduled task or service."}, {"owner": {"reputation": 115, "user_id": 8697268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LcS7l.jpg?s=128&g=1", "display_name": "andrewlewisdev", "link": "https://stackoverflow.com/users/8697268/andrewlewisdev"}, "edited": false, "score": 0, "creation_date": 1534358147, "post_id": 51863800, "comment_id": 90681121, "body": "The app is used to signout the laptop. It&#39;s not meant to ask the user&#39;s permission, though I&#39;m still figuring that part out. It should have admin rights by default, without querying the user about it. If they don&#39;t enter their name, it signs them back out of Windows. The app also blocks access to task manager by way of the registry."}, {"owner": {"reputation": 115, "user_id": 8697268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LcS7l.jpg?s=128&g=1", "display_name": "andrewlewisdev", "link": "https://stackoverflow.com/users/8697268/andrewlewisdev"}, "edited": false, "score": 0, "creation_date": 1534358295, "post_id": 51863800, "comment_id": 90681200, "body": "Does that matter? If I get it working correctly so that the user isn&#39;t confronted with the UAC dialog, will that fix the issue? Or do I still need to start it from another app?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1534365369, "post_id": 51863800, "comment_id": 90684293, "body": "Like Hans said, set up the launch through task scheduler."}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 8697268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LcS7l.jpg?s=128&g=1", "display_name": "andrewlewisdev", "link": "https://stackoverflow.com/users/8697268/andrewlewisdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1535663287, "creation_date": 1535663287, "answer_id": 52105369, "question_id": 51863800, "link": "https://stackoverflow.com/questions/51863800/windows-form-app-wont-run-at-startup-but-will-run-manually/52105369#52105369", "title": "Windows Form app won&#39;t run at startup but will run manually", "body": "<p>My ultimate solution for this problem was to build an installer for the program instead of just copying the release version over to the laptops manually</p>\n"}], "owner": {"reputation": 115, "user_id": 8697268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LcS7l.jpg?s=128&g=1", "display_name": "andrewlewisdev", "link": "https://stackoverflow.com/users/8697268/andrewlewisdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535663287, "creation_date": 1534355030, "question_id": 51863800, "link": "https://stackoverflow.com/questions/51863800/windows-form-app-wont-run-at-startup-but-will-run-manually", "title": "Windows Form app won&#39;t run at startup but will run manually", "body": "<p>I'm attempting to run an app on startup on a Dell laptop running Windows 10 Enterprise. It is written in C# using Visual Studio. The app is meant to run with administrator privileges. If I manually start the app, it works just fine. When I attempt to run it automatically using local group policy editor, it gives me the following error on login: \"This application could not be started.\"</p>\n\n<p>I looked up that error and wound up at the following link: <a href=\"https://support.microsoft.com/en-us/help/2715633/shim-errors-for-the-net-framework-version-and-platform-support\" rel=\"nofollow noreferrer\">https://support.microsoft.com/en-us/help/2715633/shim-errors-for-the-net-framework-version-and-platform-support</a>. It said: \"The app is not configured in a way that makes it possible to determine the appropriate version of the .NET Framework runtime. The corresponding shim code is SHIM_NOVERSION_FOUND.\"</p>\n\n<p>I used information found here: <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/how-to-determine-which-versions-are-installed\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/how-to-determine-which-versions-are-installed</a> to determine which .NET frameworks were installed on the target device. There were a few, including version 4.0.</p>\n\n<p>I added a config file to my project using instructions from the following link: <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/how-to-configure-an-app-to-support-net-framework-4-or-4-5\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/how-to-configure-an-app-to-support-net-framework-4-or-4-5</a>.</p>\n\n<p>When I rebuild the project and try to run it on the target machine, I get the same error as before.</p>\n\n<p>NOTE: The target computer is under a group policy which may or may not be affecting the app. We don't know. </p>\n"}, {"tags": ["c#", "xaml", "uwp"], "comments": [{"owner": {"reputation": 1395, "user_id": 3244198, "user_type": "registered", "accept_rate": 21, "profile_image": "https://i.stack.imgur.com/K1J2F.jpg?s=128&g=1", "display_name": "Dishant", "link": "https://stackoverflow.com/users/3244198/dishant"}, "edited": false, "score": 1, "creation_date": 1534372863, "post_id": 51863796, "comment_id": 90686672, "body": "Are you setting some Visibility for this button from code behind?"}, {"owner": {"reputation": 2088, "user_id": 6233938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SbmyV.png?s=128&g=1", "display_name": "walterlv", "link": "https://stackoverflow.com/users/6233938/walterlv"}, "edited": false, "score": 1, "creation_date": 1534375040, "post_id": 51863796, "comment_id": 90687140, "body": "Try to open the Visual Studio Live Visual Tree, find your button node and right click on it, select &quot;Show Properties&quot; to view whether the Button is still visible."}], "owner": {"reputation": 41, "user_id": 9377393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cdb6a3273aed37a3b278aa10dbe9c19?s=128&d=identicon&r=PG&f=1", "display_name": "Grootpoot", "link": "https://stackoverflow.com/users/9377393/grootpoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534355016, "creation_date": 1534355016, "question_id": 51863796, "link": "https://stackoverflow.com/questions/51863796/button-in-uwp-not-showing-when-i-launch", "title": "button in uwp not showing when i launch", "body": "<p>ok so the problem is that my button is not showing when I enter debug mode. when I design it shows but not when I Launch. The other pages buttons work fine just this. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;Grid Background=\"#FF6C0000\"&gt;\r\n        &lt;Image HorizontalAlignment=\"Center\" Height=\"162\" Margin=\"0,0,0,0\" VerticalAlignment=\"Top\" Width=\"425\" Source=\"ctu headers.png\" Visibility=\"Visible\"/&gt;\r\n        &lt;Button x:Name=\"backbutton\" Content=\"Back\"  HorizontalAlignment=\"Left\" Margin=\"10,156,0,0\" VerticalAlignment=\"Top\" Width=\"95\" Height=\"50\" BorderBrush=\"White\" FontSize=\"18\" Click=\"Button_Click\"&gt;\r\n            &lt;Button.Background&gt;\r\n                &lt;AcrylicBrush TintColor=\"#CC918989\"/&gt;\r\n            &lt;/Button.Background&gt;\r\n\r\n        &lt;/Button&gt;\r\n\r\n\r\n    &lt;/Grid&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c#", "mysql", "winforms"], "comments": [{"owner": {"reputation": 24091, "user_id": 23633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e781c45e7703c212bd6c4f912f67bb12?s=128&d=identicon&r=PG", "display_name": "Bradley Grainger", "link": "https://stackoverflow.com/users/23633/bradley-grainger"}, "edited": false, "score": 0, "creation_date": 1534360115, "post_id": 51863720, "comment_id": 90682054, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/578357/visual-studio-contextswitchdeadlock\">Visual Studio: ContextSwitchDeadlock</a>"}, {"owner": {"reputation": 24091, "user_id": 23633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e781c45e7703c212bd6c4f912f67bb12?s=128&d=identicon&r=PG", "display_name": "Bradley Grainger", "link": "https://stackoverflow.com/users/23633/bradley-grainger"}, "edited": false, "score": 0, "creation_date": 1534360172, "post_id": 51863720, "comment_id": 90682079, "body": "Disabling the <code>ContextSwitchDeadlock</code> Managed Debugging Assistant may let you work around the issue. (I assume you moved just your MySQL Server to GoDaddy hosting, not the Windows Forms application, correct?)"}, {"owner": {"reputation": 69, "user_id": 6079998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0d226e1a8068644b5b71d4e1573588c?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Gonz&#225;lez", "link": "https://stackoverflow.com/users/6079998/jos%c3%a9-gonz%c3%a1lez"}, "reply_to_user": {"reputation": 24091, "user_id": 23633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e781c45e7703c212bd6c4f912f67bb12?s=128&d=identicon&r=PG", "display_name": "Bradley Grainger", "link": "https://stackoverflow.com/users/23633/bradley-grainger"}, "edited": false, "score": 0, "creation_date": 1534365065, "post_id": 51863720, "comment_id": 90684177, "body": "Yes, I also disabled it in the past sorry I forgot to mention it. But the form just won&#180;t retrieve more data after a couple of queries. It does fetch some data but doesnt finish."}, {"owner": {"reputation": 24091, "user_id": 23633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e781c45e7703c212bd6c4f912f67bb12?s=128&d=identicon&r=PG", "display_name": "Bradley Grainger", "link": "https://stackoverflow.com/users/23633/bradley-grainger"}, "edited": false, "score": 0, "creation_date": 1534365853, "post_id": 51863720, "comment_id": 90684476, "body": "What&#39;s your full connection string (without the password)? Are you setting the <code>ConnectionTimeout</code> setting? What happens if you leave that at its default of 15 (or reduce it to, say, 5)? Do you get an exception? If so, what are the full exception details?"}, {"owner": {"reputation": 69, "user_id": 6079998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0d226e1a8068644b5b71d4e1573588c?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Gonz&#225;lez", "link": "https://stackoverflow.com/users/6079998/jos%c3%a9-gonz%c3%a1lez"}, "reply_to_user": {"reputation": 24091, "user_id": 23633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e781c45e7703c212bd6c4f912f67bb12?s=128&d=identicon&r=PG", "display_name": "Bradley Grainger", "link": "https://stackoverflow.com/users/23633/bradley-grainger"}, "edited": false, "score": 0, "creation_date": 1534368505, "post_id": 51863720, "comment_id": 90685476, "body": "It looks like this one       Server=myServerAddress;Port=1234;Database=myDataBase;Uid=myU&zwnj;&#8203;sername; Pwd=myPassword;Convert Zero Datetime=True;"}, {"owner": {"reputation": 69, "user_id": 6079998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0d226e1a8068644b5b71d4e1573588c?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Gonz&#225;lez", "link": "https://stackoverflow.com/users/6079998/jos%c3%a9-gonz%c3%a1lez"}, "reply_to_user": {"reputation": 24091, "user_id": 23633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e781c45e7703c212bd6c4f912f67bb12?s=128&d=identicon&r=PG", "display_name": "Bradley Grainger", "link": "https://stackoverflow.com/users/23633/bradley-grainger"}, "edited": false, "score": 0, "creation_date": 1534378014, "post_id": 51863720, "comment_id": 90687764, "body": "I tried applying the ConnectionTimeOut with five seconds and the first form won&#180;t even start."}, {"owner": {"reputation": 24091, "user_id": 23633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e781c45e7703c212bd6c4f912f67bb12?s=128&d=identicon&r=PG", "display_name": "Bradley Grainger", "link": "https://stackoverflow.com/users/23633/bradley-grainger"}, "edited": false, "score": 0, "creation_date": 1534391920, "post_id": 51863720, "comment_id": 90690370, "body": "I suspect you&#39;re getting a <code>MySqlException</code> but it&#39;s being caught during form startup and preventing it from being displayed. Try enabling &quot;Break on exceptions&quot; in VS and seeing if you can get the exception details: <a href=\"http://idownvotedbecau.se/noexceptiondetails/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/noexceptiondetails</a>"}, {"owner": {"reputation": 69, "user_id": 6079998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0d226e1a8068644b5b71d4e1573588c?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Gonz&#225;lez", "link": "https://stackoverflow.com/users/6079998/jos%c3%a9-gonz%c3%a1lez"}, "reply_to_user": {"reputation": 24091, "user_id": 23633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e781c45e7703c212bd6c4f912f67bb12?s=128&d=identicon&r=PG", "display_name": "Bradley Grainger", "link": "https://stackoverflow.com/users/23633/bradley-grainger"}, "edited": false, "score": 0, "creation_date": 1534466796, "post_id": 51863720, "comment_id": 90725385, "body": "I did, with no different results. My guess is that the server is not permiting more queries. I doesn&#180;t seem to be an issue with the connection but with the amount of queries."}], "owner": {"reputation": 69, "user_id": 6079998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0d226e1a8068644b5b71d4e1573588c?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Gonz&#225;lez", "link": "https://stackoverflow.com/users/6079998/jos%c3%a9-gonz%c3%a1lez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534365180, "creation_date": 1534354658, "last_edit_date": 1534365180, "question_id": 51863720, "link": "https://stackoverflow.com/questions/51863720/why-does-c-winforms-stops-queriyng-the-mysql-database-after-a-couple-of-queries", "title": "Why does C# Winforms stops queriyng the Mysql Database after a couple of queries on a WebHosting?", "body": "<p>I have a small database used for a C# WinForms with Mysql Net Connector. \nAll worked well during localhost development but when I moved it to a GoDaddy hosting I started getting 'ContextSwitchDeadlock'.\nI suspect this is because the server is rejecting the new connections as the programs starts okey and open the first connection but as I try to recover data from it, it stops responding. I use this main schema in most of the forms.</p>\n\n<pre><code>try\n{\n    Using(MySqlConnection Connection = new MySqlConnection(\"ConnectionString\"))\n   {\n      Connection.Open();\n      //Fetching Data putting in Combobox,Textbox,DatagridView etc.\n   }\n}\ncatch(MySqlException ex)\n{\n    //Handling\n}\n</code></pre>\n\n<p>This is in most forms OnLoad event, so each time a form is opened a new connection is opened. Im aware of Connection pooling so I opened a connection in the main form and in the next one I did just</p>\n\n<pre><code>  Using(MySqlConnection Connection = new MySqlConnection())\n {\n  Connection.Open();\n }\n</code></pre>\n\n<p>I also disabled the exeption in the debugger options but it just no longer fetch data after some queries.</p>\n"}, {"tags": ["c#", "selenium", "firefox", "selenium-webdriver", "headless"], "comments": [{"owner": {"reputation": 1268, "user_id": 6864688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JHAzI.jpg?s=128&g=1", "display_name": "Bouke", "link": "https://stackoverflow.com/users/6864688/bouke"}, "edited": false, "score": 0, "creation_date": 1534357717, "post_id": 51863624, "comment_id": 90680937, "body": "This has been an issue in the Firefox driver, but maximizing still doesn&#39;t seem to work. Just tried <code>firefoxDriver.Manage().Window.FullScreen()</code>, but that gives the same result."}, {"owner": {"reputation": 1268, "user_id": 6864688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JHAzI.jpg?s=128&g=1", "display_name": "Bouke", "link": "https://stackoverflow.com/users/6864688/bouke"}, "edited": false, "score": 0, "creation_date": 1534357977, "post_id": 51863624, "comment_id": 90681046, "body": "According to this post the issue should have been fixed: <a href=\"https://github.com/mozilla/geckodriver/issues/993\" rel=\"nofollow noreferrer\">github.com/mozilla/geckodriver/issues/993</a>.   But that doesn&#39;t seem te case."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4132137, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f5dd2e0bd95133b119f963794b92ee23?s=128&d=identicon&r=PG&f=1", "display_name": "Smith", "link": "https://stackoverflow.com/users/4132137/smith"}, "edited": false, "score": 0, "creation_date": 1534424872, "post_id": 51875470, "comment_id": 90706913, "body": "Not good, there are other webdrivers (mobile with different resolutions, desktop)"}, {"owner": {"reputation": 4321, "user_id": 961215, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/W8HF0.jpg?s=128&g=1", "display_name": "Abhishek_Mishra", "link": "https://stackoverflow.com/users/961215/abhishek-mishra"}, "reply_to_user": {"reputation": 93, "user_id": 4132137, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f5dd2e0bd95133b119f963794b92ee23?s=128&d=identicon&r=PG&f=1", "display_name": "Smith", "link": "https://stackoverflow.com/users/4132137/smith"}, "edited": false, "score": 0, "creation_date": 1534444054, "post_id": 51875470, "comment_id": 90718194, "body": "To handle other driver just make it condition specific \ud83d\ude0a"}], "tags": [], "owner": {"reputation": 4321, "user_id": 961215, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/W8HF0.jpg?s=128&g=1", "display_name": "Abhishek_Mishra", "link": "https://stackoverflow.com/users/961215/abhishek-mishra"}, "is_accepted": false, "score": 2, "last_activity_date": 1534417239, "creation_date": 1534417239, "answer_id": 51875470, "question_id": 51863624, "link": "https://stackoverflow.com/questions/51863624/firefox-in-headless-mode-run-in-small-size-1366-768/51875470#51875470", "title": "Firefox in headless mode run in small size (1366, 768)", "body": "<p>Try using the Dimension Class after driver object creation.</p>\n\n<pre><code>Dimension d = new Dimension(1920,1080);\ndriver.manage().window().setSize(d);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 4132137, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f5dd2e0bd95133b119f963794b92ee23?s=128&d=identicon&r=PG&f=1", "display_name": "Smith", "link": "https://stackoverflow.com/users/4132137/smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1534429312, "creation_date": 1534429312, "answer_id": 51879343, "question_id": 51863624, "link": "https://stackoverflow.com/questions/51863624/firefox-in-headless-mode-run-in-small-size-1366-768/51879343#51879343", "title": "Firefox in headless mode run in small size (1366, 768)", "body": "<p>I find it:</p>\n\n<pre><code>firefoxOptions.AddArguments(\"-width=1920\");\nfirefoxOptions.AddArguments(\"-height=1080\");\n</code></pre>\n\n<p>but if you call somewhere in your code this:</p>\n\n<pre><code>webDriver.Manage().Window.Maximize();\n</code></pre>\n\n<p>then set to default resolution.. {Width = 1366 Height = 768}</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13157432, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiYyBQrdcx-vjuPAgwSo2XCaO_BC_dm-tK87WCh=k-s128", "display_name": "Zain UL Abdeen", "link": "https://stackoverflow.com/users/13157432/zain-ul-abdeen"}, "is_accepted": false, "score": 0, "last_activity_date": 1611681444, "creation_date": 1611681444, "answer_id": 65906025, "question_id": 51863624, "link": "https://stackoverflow.com/questions/51863624/firefox-in-headless-mode-run-in-small-size-1366-768/65906025#65906025", "title": "Firefox in headless mode run in small size (1366, 768)", "body": "<p>I am able to run firefox without GUI on ubuntu after a couple of search, here you can try</p>\n<pre><code># install Xvfb (X Virtual Frame Buffer) and related Fonts \n$ sudo apt-get install xvfb \n$ sudo apt-get install xfonts-100dpi xfonts-75dpi xfonts-scalable xfonts-cyrillic \n\n# Setup Display \n$ export DISPLAY=:1 \n\n# run Xvfb in background, set screen resolution as HDMI (1920x1080, 24 dpi), run on display:1 \n$ Xvfb :1 -screen 0 1920x1080x24 &amp;\n\n# Run firefox\nfirefox &amp;\n\n# OR\nfirefox --headless &amp;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4132137, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f5dd2e0bd95133b119f963794b92ee23?s=128&d=identicon&r=PG&f=1", "display_name": "Smith", "link": "https://stackoverflow.com/users/4132137/smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2290, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1611681444, "creation_date": 1534354338, "last_edit_date": 1534356320, "question_id": 51863624, "link": "https://stackoverflow.com/questions/51863624/firefox-in-headless-mode-run-in-small-size-1366-768", "title": "Firefox in headless mode run in small size (1366, 768)", "body": "<p>Firefox in headless mode run in small size (1366, 768)</p>\n\n<pre><code>  FirefoxOptions firefoxOptions = new FirefoxOptions();\n  firefoxOptions.AddArguments(\"--headless\");\n  firefoxOptions.AddArguments(\"--window-size=1920,1080\");\n\n  FirefoxDriver firefoxDriver = new FirefoxDriver(firefoxOptions);\n\n  firefoxDriver.Manage().Window.Maximize();\n\n  firefoxDriver.Navigate().GoToUrl(\"https://www.google.com/\");\n  var size = firefoxDriver.Manage().Window.Size; //{Width = 1366 Height = 768}\n</code></pre>\n\n<p>Any suggestions, how to run in full HD? I\nneed to set here...</p>\n\n<p>For example with chrome working correctly:</p>\n\n<pre><code>       ChromeOptions options = new ChromeOptions();\n        options.AddArguments(\"headless\");\n        options.AddArguments(\"window-size=1920x1080\");\n</code></pre>\n"}, {"tags": ["javascript", "c#", "webforms", "modal-dialog", "confirm"], "answers": [{"tags": [], "owner": {"reputation": 6142, "user_id": 8732818, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WopVT.jpg?s=128&g=1", "display_name": "Calvin Nunes", "link": "https://stackoverflow.com/users/8732818/calvin-nunes"}, "is_accepted": false, "score": 1, "last_activity_date": 1534357012, "last_edit_date": 1534357012, "creation_date": 1534354343, "answer_id": 51863627, "question_id": 51863334, "link": "https://stackoverflow.com/questions/51863334/something-like-confirmare-u-sure-javascript/51863627#51863627", "title": "something like confirm(&quot;Are U sure?&quot;) JavaScript", "body": "<p>There's some modifications to make on your code...\nYou cannot bind a <code>click</code> event many times on the same element or it will trigger many times, so first you need to remove the bind to add it again with another callback.</p>\n\n<p>Also, you can make an \"overlay\", that covers the entire page until some button is clicked. See the <code>css</code> part to take a look on what I did.</p>\n\n<p>See the example below and check if this it's something you need.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(\"#dialogBtn\").on(\"click\", dialog.bind(this, 'Are you Sure?', yesCallback, noCallback));\r\n\r\nfunction dialog(message, yesCallback, noCallback) {\r\n      var modal = $(\"#modal_dialog\");\r\n      modal.show();\r\n      $('.title').html(message);\r\n            \r\n      $('#dialogBtnYes').off(\"click\").on(\"click\", function() {\r\n           modal.hide()\r\n           yesCallback.call();\r\n      });\r\n      $('#dialogBtnNo').off(\"click\").on(\"click\", function() {\r\n            modal.hide()\r\n            noCallback.call();\r\n      });\r\n}\r\n\r\nfunction yesCallback(){\r\n  console.log(\"YES\");\r\n}\r\nfunction noCallback(){\r\n  console.log(\"NO\");\r\n}</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#modal_dialog{\r\n  display: none;\r\n  width: 100%;\r\n  height: 100vh;\r\n  background-color: rgba(0,0,0, 0.1);  \r\n  z-index: 1000;\r\n  position: absolute;\r\n  top: 0;  \r\n  left: 0;\r\n}\r\n\r\n#modal-content{\r\n  padding: 12px;\r\n  border: 1px solid;\r\n  box-shadow: 1px 1px 3px black;\r\n  background-color: #fff;\r\n  margin: auto;\r\n  position: relative;\r\n  width: 50%;\r\n  top: 50%;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;input type='button' value='Dialog' id=\"dialogBtn\"/&gt;\r\n\r\n&lt;div id='modal_dialog'&gt;\r\n  &lt;div id=\"modal-content\"&gt;\r\n    &lt;div class='title'&gt;&lt;/div&gt;\r\n    &lt;input type='button' value='yes' id='dialogBtnYes' /&gt;\r\n    &lt;input type='button' value='no' id='dialogBtnNo' /&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1241, "user_id": 3826059, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/4BBvI.jpg?s=128&g=1", "display_name": "M.Khooryani", "link": "https://stackoverflow.com/users/3826059/m-khooryani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1534357012, "creation_date": 1534353120, "question_id": 51863334, "link": "https://stackoverflow.com/questions/51863334/something-like-confirmare-u-sure-javascript", "title": "something like confirm(&quot;Are U sure?&quot;) JavaScript", "body": "<p>I use </p>\n\n<p><code>string js = @\" return confirm('Are you sure you want to do this?');\";\n myAspButton.OnClientClick = js;</code></p>\n\n<p>event rises after \"OK\" clicking and nothing happen after \"Cancel\"</p>\n\n<p>I want to create my custom modal, but server event fired before any button click!</p>\n\n<p>how to implement my own function like <code>confirm(Are you sure you want to do this?')</code> which returns value after button click?</p>\n\n<p>my code:</p>\n\n<pre><code>string js = @\"dialog('Are you sure you want to do this?',\n            function() {\n                        return true;\n                    },\n            function() {\n                        return false;\n                    }\n        );\";\n\n        myAspButton.OnClientClick = js;\n</code></pre>\n\n<p>JS code:</p>\n\n<pre><code>    function dialog(message, yesCallback, noCallback) {\n        $('.title').html(message);\n        var dialog = $('#modal_dialog').dialog();\n\n        $('#btnYes').click(function() {\n            dialog.dialog('close');\n            yesCallback();\n        });\n        $('#btnNo').click(function() {\n            dialog.dialog('close');\n            noCallback();\n        });\n    }\n</code></pre>\n\n<p>HTML code:</p>\n\n<pre><code>&lt;div id='modal_dialog'&gt;\n&lt;div class='title'&gt;\n&lt;/div&gt;\n&lt;input type='button' value='yes' id='btnYes' /&gt;\n&lt;input type='button' value='no' id='btnNo' /&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["c#", "image-processing", "hough-transform"], "answers": [{"comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 1, "creation_date": 1534359383, "post_id": 51864740, "comment_id": 90681721, "body": "Regarding the original Q.3: the C++ code doesn&#39;t need to test <code>radius</code> because there the parameter space (<code>_accu</code>) is defined such that any radius you can define within the image will be within the valid range."}], "tags": [], "owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "is_accepted": true, "score": 2, "last_activity_date": 1534359210, "creation_date": 1534359210, "answer_id": 51864740, "question_id": 51863258, "link": "https://stackoverflow.com/questions/51863258/hough-transform-c-code/51864740#51864740", "title": "Hough Transform C# code", "body": "<h1>Q.1.</h1>\n\n<p>This line simply ensures that the bounding rectangle is completely inside the image. If you were to skip this, and <code>rect</code> is (partly) outside the image, you'd end up indexing out of bounds.</p>\n\n<p>Note that pixel access is done through a pointer, incrementing the pointer by 1 for every x-increment, and by <code>offset</code> for every y-increment. If <code>rect</code> is larger than the image, we'd increment the pointer past the image buffer. If <code>rect</code> is simply shifted out the image bounds, but not too large, we'd read pixels that do not correspond to the coordinates we're using.</p>\n\n<h1>Q.2.</h1>\n\n<p>Note that</p>\n\n<pre><code>int stopX  = width  - halfWidth  - ( width  - rect.Right );\nint stopY  = height - halfHeight - ( height - rect.Bottom );\n</code></pre>\n\n<p>can be simplified to </p>\n\n<pre><code>int stopX  = - halfWidth  + rect.Right;\nint stopY  = - halfHeight + rect.Bottom;\n</code></pre>\n\n<p>The code defines the origin of the coordinate system in the middle of the image. This bit of code shifts the bounding box (originally defined in the range [0,<code>width</code>) and [0,<code>height</code>) ) to the new coordinate system.</p>\n\n<p>Usually the Hough transform is defined with the origin in the top-left pixel. But in principle it does not matter how the coordinate system is defined, this just modifies the parametrization of a line. The sinusoid drawn for each input pixel will be different, but the local maxima will still appear for the set of parameters corresponding to lines in the image.</p>\n"}], "owner": {"reputation": 17456, "user_id": 159072, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/217605bccd955128d5ffc2c6e3d8267e?s=128&d=identicon&r=PG&f=1", "display_name": "user366312", "link": "https://stackoverflow.com/users/159072/user366312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1835, "favorite_count": 0, "closed_date": 1534410329, "accepted_answer_id": 51864740, "answer_count": 1, "score": 2, "last_activity_date": 1534391062, "creation_date": 1534352761, "last_edit_date": 1534391062, "question_id": 51863258, "link": "https://stackoverflow.com/questions/51863258/hough-transform-c-code", "closed_reason": "Needs more focus", "title": "Hough Transform C# code", "body": "<p>Let us take a look at  <a href=\"https://github.com/andrewkirillov/AForge.NET/blob/a9453dad025d1fbffab165293cedc976187da535/Sources/Imaging/HoughLineTransformation.cs#L457\" rel=\"nofollow noreferrer\">this C# implementation</a>,</p>\n\n<pre><code>        ... ...\n\n        // get source image size\n        int width       = image.Width;\n        int height      = image.Height;\n        int halfWidth   = width / 2;\n        int halfHeight  = height / 2;\n\n        // make sure the specified rectangle recides with the source image\n        rect.Intersect( new Rectangle( 0, 0, width, height ) );\n\n        int startX = -halfWidth  + rect.Left;\n        int startY = -halfHeight + rect.Top;\n        int stopX  = width  - halfWidth  - ( width  - rect.Right );\n        int stopY  = height - halfHeight - ( height - rect.Bottom );\n\n        int offset = image.Stride - rect.Width;\n\n        // calculate Hough map's width\n        int halfHoughWidth = (int) Math.Sqrt( halfWidth * halfWidth + halfHeight * halfHeight );\n        int houghWidth = halfHoughWidth * 2;\n\n        houghMap = new short[houghHeight, houghWidth];\n\n        // do the job\n        unsafe\n        {\n            byte* src = (byte*) image.ImageData.ToPointer( ) +\n                rect.Top * image.Stride + rect.Left;\n\n            // for each row\n            for ( int y = startY; y &lt; stopY; y++ )\n            {\n                // for each pixel\n                for ( int x = startX; x &lt; stopX; x++, src++ )\n                {\n                    if ( *src != 0 )\n                    {\n                        // for each Theta value\n                        for ( int theta = 0; theta &lt; houghHeight; theta++ )\n                        {\n                            int radius = (int) Math.Round( cosMap[theta] * x - sinMap[theta] * y ) + halfHoughWidth;\n\n                            if ( ( radius &lt; 0 ) || ( radius &gt;= houghWidth ) )\n                                continue;\n\n                            houghMap[theta, radius]++;\n                        }\n                    }\n                }\n                src += offset;\n            }\n        }\n\n        ... ... ...\n</code></pre>\n\n<p><strong>Q.1.</strong> <em><code>rect.Intersect(new Rectangle( 0, 0, width, height));</code> - why is this line important?</em></p>\n\n<p><strong>Q.2.</strong> <em>Why are values modified using <code>rect</code> In the following code:</em></p>\n\n<pre><code>int startX = -halfWidth  + rect.Left;\nint startY = -halfHeight + rect.Top;\nint stopX  = width  - halfWidth  - ( width  - rect.Right );\nint stopY  = height - halfHeight - ( height - rect.Bottom );\n</code></pre>\n\n<p><strong>Q.3.</strong> <em>Why are the y, and x loops starting in a negative point?</em> </p>\n"}, {"tags": ["c#", "asp.net", "sql-server", "database", "xamarin.ios"], "comments": [{"owner": {"reputation": 9401, "user_id": 276469, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/rbsdG.png?s=128&g=1", "display_name": "Crowcoder", "link": "https://stackoverflow.com/users/276469/crowcoder"}, "edited": false, "score": 1, "creation_date": 1534352821, "post_id": 51863222, "comment_id": 90678686, "body": "You actually don&#39;t want to do that. Expose the operations you need as an API from your web site."}, {"owner": {"reputation": 3, "user_id": 10221823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3e057bba177d7677c5acd301ebdfa1?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza Sh", "link": "https://stackoverflow.com/users/10221823/alireza-sh"}, "reply_to_user": {"reputation": 9401, "user_id": 276469, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/rbsdG.png?s=128&g=1", "display_name": "Crowcoder", "link": "https://stackoverflow.com/users/276469/crowcoder"}, "edited": false, "score": 0, "creation_date": 1534352988, "post_id": 51863222, "comment_id": 90678755, "body": "@Crowcoder Do you have any complete tutorials for that? Or a keyword that I can search on Internet for that?"}, {"owner": {"reputation": 9401, "user_id": 276469, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/rbsdG.png?s=128&g=1", "display_name": "Crowcoder", "link": "https://stackoverflow.com/users/276469/crowcoder"}, "edited": false, "score": 0, "creation_date": 1534353313, "post_id": 51863222, "comment_id": 90678914, "body": "Such a service is often called a Web API. Maybe search &quot;mobile backend&quot;. Any information on services for &quot;single page apps&quot; would be relevant too."}, {"owner": {"reputation": 3, "user_id": 10221823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3e057bba177d7677c5acd301ebdfa1?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza Sh", "link": "https://stackoverflow.com/users/10221823/alireza-sh"}, "reply_to_user": {"reputation": 9401, "user_id": 276469, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/rbsdG.png?s=128&g=1", "display_name": "Crowcoder", "link": "https://stackoverflow.com/users/276469/crowcoder"}, "edited": false, "score": 0, "creation_date": 1534353375, "post_id": 51863222, "comment_id": 90678944, "body": "@Crowcoder Uh-huh! So my website should be MVC too. Thanks for your answer. \ud83d\ude4f\ud83c\udffc\ud83d\ude4f\ud83c\udffc\ud83d\ude4f\ud83c\udffc"}], "owner": {"reputation": 3, "user_id": 10221823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba3e057bba177d7677c5acd301ebdfa1?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza Sh", "link": "https://stackoverflow.com/users/10221823/alireza-sh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534352579, "creation_date": 1534352579, "question_id": 51863222, "link": "https://stackoverflow.com/questions/51863222/access-sql-server-database-on-asp-net-website-from-xamarin-ios", "title": "Access SQL Server Database on ASP.Net website from Xamarin.iOS", "body": "<p>I want to access my database on my ASP.Net website in my Xamarin.iOS app. I want to know how I can work with SQL commands to access my procedures, insert, update, or delete values. I also want to return values from my database and show them in my app. How is this possible? Thanks everyone.</p>\n"}, {"tags": ["c#", ".net", "amazon-web-services", "amazon-s3", "metadata"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 10177855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68e80ca4a0fa99bc897a52622273966?s=128&d=identicon&r=PG&f=1", "display_name": "dee", "link": "https://stackoverflow.com/users/10177855/dee"}, "edited": false, "score": 0, "creation_date": 1534859909, "post_id": 51865525, "comment_id": 90850810, "body": "Thank you! I think the link is invalid."}], "tags": [], "owner": {"reputation": 249, "user_id": 2250610, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9110b0b0762f91c9fa40202c6f3eec0f?s=128&d=identicon&r=PG", "display_name": "KCIsLearning", "link": "https://stackoverflow.com/users/2250610/kcislearning"}, "is_accepted": false, "score": 2, "last_activity_date": 1534948070, "last_edit_date": 1534948070, "creation_date": 1534362765, "answer_id": 51865525, "question_id": 51863220, "link": "https://stackoverflow.com/questions/51863220/how-can-i-pull-metadata-for-an-object-in-a-s3-bucket-using-c/51865525#51865525", "title": "How can I pull metadata for an object in a S3 bucket using C#?", "body": "<pre><code>using (var amazonClient = new AmazonS3Client())\n{\n      var getObjectMetadataRequest = new GetObjectMetadataRequest() { BucketName = RawBucketName, Key = fileName };\n}\n</code></pre>\n\n<p>methods\nlink <a href=\"https://docs.aws.amazon.com/sdkfornet1/latest/apidocs/html/T_Amazon_S3_Model_GetObjectMetadataRequest.htm\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdkfornet1/latest/apidocs/html/T_Amazon_S3_Model_GetObjectMetadataRequest.htm</a></p>\n"}], "owner": {"reputation": 91, "user_id": 10177855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d68e80ca4a0fa99bc897a52622273966?s=128&d=identicon&r=PG&f=1", "display_name": "dee", "link": "https://stackoverflow.com/users/10177855/dee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534948070, "creation_date": 1534352574, "question_id": 51863220, "link": "https://stackoverflow.com/questions/51863220/how-can-i-pull-metadata-for-an-object-in-a-s3-bucket-using-c", "title": "How can I pull metadata for an object in a S3 bucket using C#?", "body": "<p>I am wondering how I could pull metadata for an object in an S3 bucket. I am using AWS SDK for .NET. I already know how to pull a list of objects but I need to know how to pull metadata for each objects. Please help me out.</p>\n"}, {"tags": ["javascript", "c#", "html", "model-view-controller", "datatables"], "comments": [{"owner": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 1, "creation_date": 1534352793, "post_id": 51863198, "comment_id": 90678671, "body": "What is your question? And you are going to try and show a table in your View with any n number of columns based on some integer value? What happens if n &gt; 20 or worse yet, n &gt; 50. I&#39;d hate to have to try and scroll through a webpage to view 20+ columns in a table."}, {"owner": {"reputation": 1, "user_id": 10230344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SM31H.png?s=128&g=1", "display_name": "Guilherme Lima", "link": "https://stackoverflow.com/users/10230344/guilherme-lima"}, "reply_to_user": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1534353374, "post_id": 51863198, "comment_id": 90678942, "body": "The question is how can I do a DataTable with a undefined quantity of columns (this quantity is defined according to the ammount of &#39;Low Tier Ids&#39;) and how can I show the data respective to these columns.   The DataTable will have to show every single field as a column, even with the scroll, because it&#39;s not expected that the DB will have a lot of registers of that field."}, {"owner": {"reputation": 1810, "user_id": 2630903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JSNUo.png?s=128&g=1", "display_name": "Richard Hubley", "link": "https://stackoverflow.com/users/2630903/richard-hubley"}, "edited": false, "score": 0, "creation_date": 1534356843, "post_id": 51863198, "comment_id": 90680563, "body": "you may need to recreate the DataTable when you get a different list of columns, I don&#39;t see an API for changing columns, just show or hide."}, {"owner": {"reputation": 1, "user_id": 10230344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SM31H.png?s=128&g=1", "display_name": "Guilherme Lima", "link": "https://stackoverflow.com/users/10230344/guilherme-lima"}, "edited": false, "score": 0, "creation_date": 1534424842, "post_id": 51863198, "comment_id": 90706891, "body": "But how can I assign the right data to the fields (the &#39;Quantities&#39;) of these undefined columns?"}], "owner": {"reputation": 1, "user_id": 10230344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SM31H.png?s=128&g=1", "display_name": "Guilherme Lima", "link": "https://stackoverflow.com/users/10230344/guilherme-lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1534352454, "creation_date": 1534352454, "question_id": 51863198, "link": "https://stackoverflow.com/questions/51863198/how-to-create-a-datatable-with-a-dynamic-columns-structure", "title": "How to create a DataTable with a dynamic columns structure?", "body": "<p>I need to construct a DataTable that will not have pre-defined columns in my MVC project. The ammount of columns should be defined after the quantity of existing data in a field of the DB.</p>\n\n<p>I have a field in my Model called Low Tier ID, it's a FK from another table (Low Tier table). I need to create columns for each Low Tier ID registered in the database. Aside that, the columns can't have the Low Tier ID as the title of the header, they need to show the Low Tier Name as titles, field one that I need to get by the FK.</p>\n\n<p>The data that will be showed will be from the Quantity field (field from the Base Hour table, main table of the View). Each cholumn should be able to show the respective Quantites to the Low Tier ID of the column.</p>\n\n<p>Until now, I was trying to create columns in this way below, but still without putting the data that the fields will be supposed to show and not even the right titles for the header.</p>\n\n<p><strong>JAVASCRIPT</strong></p>\n\n<pre><code>var colsBaseLT = [];\nfunction CreateColumnsBH() {\n$.ajax({\n    url: urlLTList, //refers to the LT List method from the Controller\n    dataType: 'json',\n    type: 'POST',\n    aynsc: false,\n    success: function (result) {\n        //the result comeback an array of Low Tier Ids\n        //The function below iterate an Array and try to create a columns for each element on it \n        var ltLength = result.length;\n        for (var i = 0; i &lt; ltLength; i++) {\n            colsBaseLT.push({ data: null, orderable: false, className: 'col-sm-2 text-center', title: \"titulo\", defaultContent: '' });\n        }\n    }\n});\n\n\nfunction CreateTableBH() {\n$.ajax({\n    url: urlCreateTableBH, //refers to the GetBaseHour method from the Controller\n    type: 'POST',\n    success: function (result) {\n        dataTableBH = DataTablesAjaxScrollHeight('#tableBaseHour', colsBaseLT, result.Grid, null, \"350px\");\n    }\n}); \n\n$(document).ready(function () {\n    CreateColumnsBH();\n    DataTablesAjaxPagination(\"#tableBaseHour\", colsBaseLT, null, null, 12, 'BaseHour');\n    CreateTableBH();\n}\n</code></pre>\n\n<p><strong>CONTROLLER (C#)</strong></p>\n\n<pre><code>    public JsonResult GetBaseHour()\n    {\n        //get the data from the Base Hour table, the main table of the View\n        return Json(new { Grid = new BaseHourBusiness().GetList&lt;BaseHour&gt;(Util.AuxiliaryMethods.BMPerRequestInstance)});\n    }\n\n    public JsonResult LTList()\n    {\n        var lowTierList = new LowTierBusiness().GetList&lt;LowTier&gt;(Util.AuxiliaryMethods.BMPerRequestInstance).Select(\n                s =&gt; new\n                {\n                    s.Name\n                }).ToList();\n        //in the Join above I try to get the LowTierNames of the Low Tier table\n        return Json(lowTierList);\n    }\n</code></pre>\n"}, {"tags": ["c#"], "answers": [{"tags": [], "owner": {"reputation": 219328, "user_id": 15498, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wi4EN.png?s=128&g=1", "display_name": "Damien_The_Unbeliever", "link": "https://stackoverflow.com/users/15498/damien-the-unbeliever"}, "is_accepted": true, "score": 4, "last_activity_date": 1534353533, "last_edit_date": 1534353533, "creation_date": 1534352343, "answer_id": 51863170, "question_id": 51863109, "link": "https://stackoverflow.com/questions/51863109/bitwise-or-operator-used-on-a-sign-extended-operand-when-or-ing-two-ulongs/51863170#51863170", "title": "&quot;Bitwise-or operator used on a sign-extended operand&quot; when or-ing two ulongs", "body": "<p>The point it's making is that <code>Length</code> returned an <code>int</code><sup>*</sup>. You then forced a conversion to <code>ulong</code> which resulted in sign-extension (because, effectively, it first went via <code>long</code>).</p>\n\n<p>If you had cast to <code>uint</code> before casting to <code>ulong</code>, the warning would disappear<sup>1</sup>.</p>\n\n<pre><code>var a = (ulong)5;\nvar b = a | (ulong)(uint)new int[10].Length;\n</code></pre>\n\n<p>This, in many ways boils down to the fact that the C# cast can do different things. Some don't change the data at all, just how the compiler acts on it, others require actual conversions. I <em>sometimes</em> yearn for modern C++'s <code>reinterpret_cast</code>, etc.</p>\n\n<hr>\n\n<p><sup>*</sup>Yes, we all know that <code>Length</code> will never return a negative number anyway, so sign extension here is a non-issue. However, there are multiple reasons why unsigned types, <em>in general</em>, should be consigned to the bin.</p>\n\n<p>For instance, if you're doing bit manipulation, you generally care about the <em>bits</em> rather than how they might be interpreted as a number. <code>ulong</code> vs <code>long</code> often doesn't make sense here, since it's <em>not</em> a number, it's a bit field.</p>\n\n<p><sup>1</sup>I.e. what the warning already told you to do. First cast to the smaller unsigned type.</p>\n"}], "owner": {"reputation": 19162, "user_id": 1142970, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3dce6a26e6a1d06a1aa280ef279fc60c?s=128&d=identicon&r=PG", "display_name": "ChaseMedallion", "link": "https://stackoverflow.com/users/1142970/chasemedallion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 51863170, "answer_count": 1, "score": 0, "last_activity_date": 1534353533, "creation_date": 1534352110, "question_id": 51863109, "link": "https://stackoverflow.com/questions/51863109/bitwise-or-operator-used-on-a-sign-extended-operand-when-or-ing-two-ulongs", "title": "&quot;Bitwise-or operator used on a sign-extended operand&quot; when or-ing two ulongs", "body": "<p>The following C# code generates a warning:</p>\n\n<pre><code>var a = (ulong)5;\nvar b = a | (ulong)new int[10].Length;\n</code></pre>\n\n<blockquote>\n  <p>Bitwise-or operator used on a sign-extended operand; consider casting\n  to a smaller unsigned type first</p>\n</blockquote>\n\n<p>What is the reasoning for this warning? It seems to me that both sides of the OR should have static type <code>ulong</code> and therefore no sign-extension should be happening.</p>\n"}, {"tags": ["c#", "json", "firebase", "firebase-realtime-database", "json.net"], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 1928672, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xqFrd.png?s=128&g=1", "display_name": "T.Y. Kucuk", "link": "https://stackoverflow.com/users/1928672/t-y-kucuk"}, "edited": false, "score": 1, "creation_date": 1534356300, "post_id": 51863856, "comment_id": 90680315, "body": "This works only on one level. PoolData object also has an Alarm list which has Firebase ID as well."}, {"owner": {"reputation": 328, "user_id": 1928672, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xqFrd.png?s=128&g=1", "display_name": "T.Y. Kucuk", "link": "https://stackoverflow.com/users/1928672/t-y-kucuk"}, "edited": false, "score": 1, "creation_date": 1534356464, "post_id": 51863856, "comment_id": 90680390, "body": "Project throws this error justifiably : Cannot deserialize the current JSON object (e.g. {&quot;name&quot;:&quot;value&quot;}) into type &#39;List&lt;Alarm&gt;&#39; because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly. Because &quot;Alarms&quot; property is not a json array."}, {"owner": {"reputation": 2061, "user_id": 335363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XUNr2.jpg?s=128&g=1", "display_name": "Ricardo Smania", "link": "https://stackoverflow.com/users/335363/ricardo-smania"}, "reply_to_user": {"reputation": 328, "user_id": 1928672, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xqFrd.png?s=128&g=1", "display_name": "T.Y. Kucuk", "link": "https://stackoverflow.com/users/1928672/t-y-kucuk"}, "edited": false, "score": 1, "creation_date": 1534359222, "post_id": 51863856, "comment_id": 90681639, "body": "I improved the answer based on you feedback, hope it now helps you with your real scenario."}, {"owner": {"reputation": 328, "user_id": 1928672, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xqFrd.png?s=128&g=1", "display_name": "T.Y. Kucuk", "link": "https://stackoverflow.com/users/1928672/t-y-kucuk"}, "edited": false, "score": 1, "creation_date": 1534374931, "post_id": 51863856, "comment_id": 90687114, "body": "A great approach using a JsonConverter class, because It accepts generic type so I can use it without a nested level limit."}], "tags": [], "owner": {"reputation": 2061, "user_id": 335363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XUNr2.jpg?s=128&g=1", "display_name": "Ricardo Smania", "link": "https://stackoverflow.com/users/335363/ricardo-smania"}, "is_accepted": true, "score": 2, "last_activity_date": 1534359170, "last_edit_date": 1534359170, "creation_date": 1534355251, "answer_id": 51863856, "question_id": 51863103, "link": "https://stackoverflow.com/questions/51863103/convert-nested-firebase-database-object-to-c-object-using-json-net/51863856#51863856", "title": "Convert nested Firebase database object to C# object using Json.NET", "body": "<p>You can deserialize the JSON to a <code>Dictionary&lt;string, PoolData&gt;</code>, change each value so the key of the dictionary goes into the FirebaseId property, and then put it into an array, something like this:</p>\n\n<pre><code>class Origin\n{\n    public Dictionary&lt;string, PoolData&gt; PoolDatas { get; set; }\n}\n\nclass Destination\n{\n    public PoolData[] PoolDatas { get; set; }\n}\n\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        string json = File.ReadAllText(\"data.json\");\n        var data = JsonConvert.DeserializeObject&lt;Origin&gt;(json);\n        var destination = new Destination();\n        destination.PoolDatas = data.PoolDatas.Select(i =&gt;\n        {\n            i.Value.FirebaseId = i.Key;\n            return i.Value;\n        }).ToArray();\n\n    }\n}\n</code></pre>\n\n<p>You will need to install and import the Json.Net package <code>using Newtonsoft.Json;</code>.</p>\n\n<p>EDIT: as mentioned in the comments, this will not work for nested objects. For that scenario, maybe you could use a custom serializer, something like this:</p>\n\n<pre><code>using Newtonsoft.Json;\nusing Newtonsoft.Json.Linq;\nusing System;\nusing System.Collections.Generic;\nusing System.IO;\nusing System.Linq;\n\nnamespace ConsoleApp1\n{\n\n    public interface IFirebaseObject\n    {\n        string FirebaseId { get; set; }\n    }\n\n    public class PoolData\n    {\n        public string FirebaseId { get; set; }\n        public string Alias { get; set; }\n        public string Address { get; set; }\n        [JsonConverter(typeof(MapToArrayConverter&lt;Alarm&gt;))]\n        public List&lt;Alarm&gt; Alarms { get; set; }\n    }\n\n    public class Alarm: IFirebaseObject\n    {\n        public string FirebaseId { get; set; }\n        public Threshold Threshold { get; set; } //object\n    }\n\n    public class Threshold\n    {\n        public int Value { get; set; }\n    }\n\n    class Origin\n    {\n        public Dictionary&lt;string, PoolData&gt; PoolDatas { get; set; }\n    }\n\n    class Destination\n    {\n        public PoolData[] PoolDatas { get; set; }\n    }\n\n\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            string json = File.ReadAllText(\"data.json\");\n            var data = JsonConvert.DeserializeObject&lt;Origin&gt;(json);\n            var destination = new Destination();\n            destination.PoolDatas = data.PoolDatas.Select(i =&gt;\n            {\n                i.Value.FirebaseId = i.Key;\n                return i.Value;\n            }).ToArray();\n        }\n    }\n\n\n    public class MapToArrayConverter&lt;T&gt; : JsonConverter where T : IFirebaseObject\n    {\n        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)\n        {\n            if (reader.TokenType == JsonToken.StartObject)\n            {\n                JObject item = JObject.Load(reader);\n                Dictionary&lt;string, T&gt; value = JsonConvert.DeserializeObject&lt;Dictionary&lt;string, T&gt;&gt;(item.ToString());\n                // TODO also consider single values instead of lists\n                return value.Select(i =&gt;\n                {\n                    i.Value.FirebaseId = i.Key;\n                    return i.Value;\n                }).ToList();\n            } else\n            {\n                return null;\n            }\n        }\n\n        public override bool CanConvert(Type objectType)\n        {\n            // TODO validate the object type\n            return true;\n        }\n\n        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)\n        {\n            // TODO implement the reverse method to also write\n            throw new NotImplementedException();\n        }\n    }\n}\n</code></pre>\n\n<p>But as you can see the solution starts to get somewhat complex. Unless you need to do this for many types, maybe manually converting would be less time consuming and simpler to maintain.</p>\n"}], "owner": {"reputation": 328, "user_id": 1928672, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xqFrd.png?s=128&g=1", "display_name": "T.Y. Kucuk", "link": "https://stackoverflow.com/users/1928672/t-y-kucuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1986, "favorite_count": 1, "accepted_answer_id": 51863856, "answer_count": 1, "score": 2, "last_activity_date": 1534359170, "creation_date": 1534352099, "last_edit_date": 1534355638, "question_id": 51863103, "link": "https://stackoverflow.com/questions/51863103/convert-nested-firebase-database-object-to-c-object-using-json-net", "title": "Convert nested Firebase database object to C# object using Json.NET", "body": "<p>I need to convert firebase-ish data structure to C# object using JSON.Net library.</p>\n\n<p>I store my data on Firebase Database like following;</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code> {\n    \"PoolDatas\": {\n        \"-LGGJGTAv_DPtzkmjIbl\": {\n            \"CoinType\": 2,\n            \"PoolType\": 4,\n            \"Alias\": \"First Alias\",\n            \"Address\": \"0xAE12EF212\",\n            \"Alarms\": {\n                \"-LGsdsdv_DPtzkmjIbl\": {\n                    \"Threshold\": {\n                        \"Type\": 2,\n                        \"Val\": 100\n                    },\n                    \"AlarmType\": 3\n                },\n                \"-LBAsdsdv_DPtzkmjIbl\": {\n                    \"Threshold\": {\n                        \"Type\": 1,\n                        \"Val\": 1\n                    },\n                    \"AlarmType\": 2\n                }\n            }\n        },\n        \"-LEAJGTAv_DPtzkmjIbl\": {\n            \"CoinType\": 1,\n            \"PoolType\": 1,\n            \"Alias\": \"Second Alias\",\n            \"Address\": \"0xAeeeEF212\",\n            \"Alarms\": {\n                \"-LGsdsdv_DPtzkmjIbl\": {\n                    \"Threshold\": {\n                        \"Type\": 10,\n                        \"Val\": 120\n                    },\n                    \"AlarmType\": 1\n                },\n                \"-LBAsdsdv_DPtzkmjIbl\": {\n                    \"Threshold\": {\n                        \"Type\": 1,\n                        \"Val\": 250\n                    },\n                    \"AlarmType\": 2\n                }\n            }\n        }\n    }\n }\n</code></pre>\n\n<p>All list objects have firebase generated ID. I cannot map this data to C# class because firebase IDs don't comply with the list structure. </p>\n\n<p>Please see my model in C# side;</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class PoolData\n{\n     public string FirebaseId{ get; set; }\n     public string Alias { get; set; }\n     public PoolType PoolType { get; set; } //enum\n     public CoinType CoinType { get; set; } //enum\n     public string Address { get; set; }\n     public List&lt;Alarm&gt; Alarms { get; set; }\n}\n\npublic class Alarm\n{\n     public string FirebaseId{ get; set; }\n     public AlarmType AlarmType{ get; set; } //enum\n     public Threshold Threshold { get; set; } //object\n}\n\npublic class Threshold\n{\n     public ThresholdType Type{ get; set; } //enum\n     public int Value { get; set; }\n}\n</code></pre>\n\n<p>In order to be able to convert Firebase-ish json into C# object I need a json like this;</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>{\n   \"PoolDatas\": [\n      {\n         \"FirebaseId\": \"-LGGJGTAv_DPtzkmjIbl\",\n         \"CoinType\": 1,\n         \"PoolType\": 1,\n         \"Alias\": \"First Alias\",\n         \"Alarms\": [\n            {\n               \"FirebaseId\": \"-LGsdsdv_DPtzkmjIbl\",\n               \"Threshold\": {\n                  \"Type\": 1,\n                  \"Val\": 1\n               },\n               \"AlarmType\": 1\n            },\n            {\n               \"FirebaseId\": \"-LBAsdsdv_DPtzkmjIbl\",\n               \"Threshold\": {\n                  \"Type\": 1,\n                  \"Val\": 1\n               },\n               \"AlarmType\": 2\n            }\n         ],\n         \"Address\": \"0xAE12EF212\"\n      },\n      {\n         \"FirebaseId\": \"-LEAJGTAv_DPtzkmjIbl\",\n         \"CoinType\": 1,\n         \"PoolType\": 1,\n         \"Alias\": \"First Alias\",\n         \"Alarms\": [\n            {\n               \"FirebaseId\": \"-LGsdsdv_DPtzkmjIbl\",\n               \"Threshold\": {\n                  \"Type\": 1,\n                  \"Val\": 1\n               },\n               \"AlarmType\": 1\n            },\n            {\n               \"FirebaseId\": \"-LBAsdsdv_DPtzkmjIbl\",\n               \"Threshold\": {\n                  \"Type\": 1,\n                  \"Val\": 1\n               },\n               \"AlarmType\": 2\n            }\n         ],\n         \"Address\": \"0xAE12EF212\"\n      }\n   ]\n}\n</code></pre>\n\n<p>How can I obtain this json from the first one? </p>\n\n<p>I tried several recursive processes using JObject loops but it didn't work.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c#", "azure", "asp.net-web-api", "azure-functions"], "owner": {"reputation": 21, "user_id": 10230360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b687b1d14252dae0894f9240eae3886a?s=128&d=identicon&r=PG&f=1", "display_name": "Nik Singh", "link": "https://stackoverflow.com/users/10230360/nik-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1534352466, "creation_date": 1534351831, "last_edit_date": 1534352466, "question_id": 51863029, "link": "https://stackoverflow.com/questions/51863029/azure-function-v2-httpclient-post-to-webapi-on-net-framework-4-5-results-in-nul", "title": "Azure Function V2 HttpClient POST to WebAPI on .NET Framework 4.5 results in NULL payload", "body": "<p>I have an Azure function which is uses V2-beta runtime and POSTs to a WebAPI endpoint, the payload is always NULL. </p>\n\n<p>If I use V1 of Azure function then the payload comes in fine. <br></p>\n\n<p><strong>Azure function runtime</strong>: V2-beta<br>\n<strong>WebAPI service</strong>: .NET Framework 4.5, AspNet WebAPi 2<br>\n<strong>Endpoint uses</strong>: Strongly typed model<br>\n<strong>Result</strong>: NULL</p>\n\n<hr>\n\n<p><strong>Azure function runtime</strong>: V2-beta<br>\n<strong>WebAPI service</strong>: .NET Framework 4.5, AspNet WebAPi 2<br>\n<strong>Endpoint uses</strong>: HttpRequestMessage<br>\n<strong>Result</strong>: Object is populated<br></p>\n\n<hr>\n\n<p><strong>Azure function runtime</strong>: V1<br>\n<strong>WebAPI service</strong>: .NET Framework 4.5, AspNet WebAPi 2<br>\n<strong>Endpoint uses</strong>: Strongly typed model<br>\n<strong>Result</strong>: Properties populated</p>\n\n<hr>\n\n<pre><code>new HttpClient().PostAsJsonAsync(payload).Result;\n</code></pre>\n\n<p>Is this something is which is a known behavior? </p>\n\n<p>Please can someone enlighten me what could be causing this behavior?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c#", "dependency-injection", "inversion-of-control"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 593840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46cac80b68c6991953e24e9bf610818?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/593840/kilian"}, "edited": false, "score": 0, "creation_date": 1534400092, "post_id": 51863266, "comment_id": 90692623, "body": "1. Everything=every dependency that will be needed in any part of the app because it&#39;s a bad practice directly use <i>new</i> or make calls to the container. 2. <code>ISettingsManager</code> makes sense in this case"}, {"owner": {"reputation": 6997, "user_id": 4646738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/afLRC.png?s=128&g=1", "display_name": "V0ldek", "link": "https://stackoverflow.com/users/4646738/v0ldek"}, "reply_to_user": {"reputation": 37, "user_id": 593840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46cac80b68c6991953e24e9bf610818?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/593840/kilian"}, "edited": false, "score": 0, "creation_date": 1534402324, "post_id": 51863266, "comment_id": 90693669, "body": "But you don&#39;t need to <i>instantiate</i> any dependency manually. The IoC container should create and inject any dependency by itself. So, let&#39;s say you have <code>IDependency</code> with a parameterless ctor and <code>IService</code> that takes this dependency as a parameter. If you register implementations for both in your IoC container, then calling <code>container.Resolve&lt;IService&gt;</code> in your <code>Main</code> method will return a functioning instance of <code>IService</code> - IoC will construct the <code>IDependency</code> for you, under the hood. The only <code>new</code> you would need is the one to create the container itself."}, {"owner": {"reputation": 37, "user_id": 593840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46cac80b68c6991953e24e9bf610818?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/593840/kilian"}, "edited": false, "score": 0, "creation_date": 1534405339, "post_id": 51863266, "comment_id": 90695366, "body": "Sorry I didn&#39;t explained it right. I understand the concept of IoC container, but I don&#39;t see how to use it (without calling it) when you are not in the root (<code>Main</code>method). For example, if <code>MainWindow</code> opens a <code>SettingsWindow</code>, it should receive an instance of it. If it opens 100 different windows, it should receive an instance of all of them (and indirectly all their dependences will be instantiated by the IoC container) because it is not &quot;allowed&quot; to use the IoC container or the <code>new</code> keyword. This is insane!."}, {"owner": {"reputation": 6997, "user_id": 4646738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/afLRC.png?s=128&g=1", "display_name": "V0ldek", "link": "https://stackoverflow.com/users/4646738/v0ldek"}, "reply_to_user": {"reputation": 37, "user_id": 593840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46cac80b68c6991953e24e9bf610818?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/593840/kilian"}, "edited": false, "score": 1, "creation_date": 1534415600, "post_id": 51863266, "comment_id": 90701293, "body": "Well yes, <i>that</i> is insane. An IoC container is not the god of your code. If you open a new window - that needs a new instance of a window. It&#39;d be perfectly right for the <code>MainWindow</code> to instantiate a new <code>SettingsWindow</code> - and it&#39;s a perfect place for the factory design pattern - you&#39;d have an <code>IWindowFactory</code> injected into your <code>MainWindow</code> (or the service handling window openings) with a method <code>CreateSettingsWindow</code> returning a <code>SettingsWindow</code>. Factories are your go-to place to hide <code>new</code> keyword calls."}, {"owner": {"reputation": 37, "user_id": 593840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46cac80b68c6991953e24e9bf610818?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/593840/kilian"}, "edited": false, "score": 0, "creation_date": 1534416351, "post_id": 51863266, "comment_id": 90701682, "body": "I like your solution, but I have one more question about it. The implementation of IWindowFactory will have to receive a reference to the IoC container (or an abstraction of it) to resolve the dependencies of the new windows. Is it acceptable to inject and use the IoC container when using the factory pattern?"}, {"owner": {"reputation": 6997, "user_id": 4646738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/afLRC.png?s=128&g=1", "display_name": "V0ldek", "link": "https://stackoverflow.com/users/4646738/v0ldek"}, "reply_to_user": {"reputation": 37, "user_id": 593840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46cac80b68c6991953e24e9bf610818?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/593840/kilian"}, "edited": false, "score": 0, "creation_date": 1534436555, "post_id": 51863266, "comment_id": 90714407, "body": "I think we&#39;re getting into the &quot;opinion&quot;-based&quot; territory, but I&#39;d say it&#39;s acceptable, while I&#39;d probably not use the container and just would call the ctors manually. The container is already a factory, so you&#39;ll basicaly be creating a facade for another factory. If you want to keep all interface-implementation bindings in the container, though, I&#39;d say that&#39;s ok."}, {"owner": {"reputation": 37, "user_id": 593840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46cac80b68c6991953e24e9bf610818?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/593840/kilian"}, "edited": false, "score": 0, "creation_date": 1534437596, "post_id": 51863266, "comment_id": 90714986, "body": "Ok. Thank you very much for your help."}], "tags": [], "owner": {"reputation": 6997, "user_id": 4646738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/afLRC.png?s=128&g=1", "display_name": "V0ldek", "link": "https://stackoverflow.com/users/4646738/v0ldek"}, "is_accepted": true, "score": 1, "last_activity_date": 1534352783, "creation_date": 1534352783, "answer_id": 51863266, "question_id": 51863007, "link": "https://stackoverflow.com/questions/51863007/how-to-pass-data-to-injected-services/51863266#51863266", "title": "How to pass data to injected services", "body": "<ol>\n<li><p>As you've said, you have to ask for some services in the entry point, but what do you mean ask for <em>everything</em>? Your entry point should have only the services it directly uses speciifed as ctor parameters. If your application grows and you suddenly have a dozen services called directly by your entry point - that could indicate that some of the services could be consolidated into a bigger packet. That's opinion-based territory though, as long as you consider it maintainable it's okay.</p></li>\n<li><p>Many possible solutions here, one would be an <code>ISettingsManager</code> allowing for realtime access to the settings across any services that take it as a dependency. </p></li>\n</ol>\n"}], "owner": {"reputation": 37, "user_id": 593840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46cac80b68c6991953e24e9bf610818?s=128&d=identicon&r=PG", "display_name": "Kilian", "link": "https://stackoverflow.com/users/593840/kilian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 51863266, "answer_count": 1, "score": 0, "last_activity_date": 1534352783, "creation_date": 1534351715, "question_id": 51863007, "link": "https://stackoverflow.com/questions/51863007/how-to-pass-data-to-injected-services", "title": "How to pass data to injected services", "body": "<p>I want to code a small WinForms or WPF program that controls that only one person/computer a time uses a specific shared file through a network share. This file needs to be copied locally when working and copied back to the network share when the work is finished. </p>\n\n<p>I want to create a small WPF application with only one button to flag the file as locked, copy it locally and open the application associated to that file extension. When this application is closed, the file is copied back to the network share and the lock is released. Each computer will use this application to access the file, so it should never be two computers editing the same file at the same time.</p>\n\n<p>The application has to have some kind of configuration file with the path for local and remote folders, the name of the file and the path of the application to open that file. To ease setting up the application it will be done with a SettingsWindow.</p>\n\n<p>I am trying to do it with IoC and some kind of lightweight DI container (i.e. SimpleInjector), but I am having some questions about how to do it properly:</p>\n\n<p><strong>Program.cs</strong></p>\n\n<pre><code>static class Program\n{\n    [STAThread]\n    static void Main()\n    {\n        var container = Bootstrap();\n\n        // Any additional other configuration, e.g. of your desired MVVM toolkit.\n\n        RunApplication(container);\n    }\n\n    private static Container Bootstrap()\n    {\n        // Create the container as usual.\n        var container = new Container();\n\n        // Register your types, for instance:\n        container.Register&lt;ILauncher, Launcher&gt;();\n        container.Register&lt;IFileSyncService, FileSyncronizer&gt;();\n        container.Register&lt;IAppRunnerService, AppRunnerService&gt;();\n        container.Register&lt;ILockService, LockService&gt;();\n\n        // Register your windows and view models:\n        container.Register&lt;MainWindow&gt;();\n        container.Register&lt;ConfigurationWindow&gt;();\n\n        container.Verify();\n\n        return container;\n    }\n\n    private static void RunApplication(Container container)\n    {\n        try\n        {\n            var app = new App();\n            var mainWindow = container.GetInstance&lt;MainWindow&gt;();\n            app.Run(mainWindow);\n        }\n        catch (Exception ex)\n        {\n            //Log the exception and exit\n        }\n    }\n}\n</code></pre>\n\n<p><strong>MainWindow</strong></p>\n\n<p>I modified the constructor to receive an interface ILauncher that will be resolved by the DI container.</p>\n\n<pre><code>    public partial class MainWindow : Window\n    {\n        public MainWindow(ILauncher launcher)\n        {\n            InitializeComponent();\n        }\n\u2026\n}\n</code></pre>\n\n<p><strong>ILauncher interface</strong></p>\n\n<pre><code>public interface ILauncher\n{\n    void Run();\n}\n</code></pre>\n\n<p><strong>Launcher implementation</strong></p>\n\n<p>The launcher implementation will take care of coordinating every task needed to launch the application and edit the file. This consists of: checking and acquiring the lock, synchronizing the file, executing and monitoring that the application has been closed. To follow the Single Responsibility Principle (SRP) this is done through some services injected:</p>\n\n<pre><code>public class Launcher : ILauncher\n{\n    public Launcher(\n        ILockService lockService,\n        IAppRunnerService appRunnerService,\n        IFileSyncService fileSyncService\n        )\n    {\n        LockService = lockService;\n        AppRunnerService = appRunnerService;\n        FileSyncService = fileSyncService;\n    }\n\n    public ILockService LockService { get; }\n    public IAppRunnerService AppRunnerService { get; }\n    public IFileSyncService FileSyncService { get; }\n\n    public void Run()\n    {\n        //TODO check lock + adquire lock\n        //TODO Sinchronize file\n        //TODO Subscribe to the IAppRunnerService.OnStop event \n        //TODO Start app through IAppRunnerService.Run method\n    }\n}\n</code></pre>\n\n<p>My questions:</p>\n\n<ol>\n<li><p>Creating new instances with the \u201cnew\u201d keyword or with manual calls to the container inside classes or windows is a bad practice, so the entry point of the desktop application (usually some kind of a main window) should ask (via the constructor) for everything. It doesn\u2019t seem a proper way when the application grows. Am I right? What is the solution?</p></li>\n<li><p>In my application, every service needs some kind of runtime data (the executable file path, the local or remote directory\u2026). The container instantiates them early in the application execution, even before this data is known. How can the services receive this data? (Please note that data could be modified later by the SettingsWindow). </p></li>\n</ol>\n\n<p>Sorry for the extension of this post but I wanted to make my problem and the context clear.</p>\n"}, {"tags": ["c#", "linq", "group-by"], "comments": [{"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 1, "creation_date": 1534352080, "post_id": 51862933, "comment_id": 90678358, "body": "Are you asking us to answer here the <a href=\"https://stackoverflow.com/questions/51860661/grouping-the-same-object-according-to-the-elements-of-their-lists\">question</a> you were trying to answer with the above code?"}, {"owner": {"reputation": 5391, "user_id": 5525311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hzYIS.png?s=128&g=1", "display_name": "Grizzly", "link": "https://stackoverflow.com/users/5525311/grizzly"}, "reply_to_user": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1534352136, "post_id": 51862933, "comment_id": 90678380, "body": "@IvanStoev yes, I&#39;m currently trying to figure out how to adjust the groupby and select, but having trouble.. if you want to answer on that question that&#39;s fine.. at this point I&#39;m curious"}, {"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1534353262, "post_id": 51862933, "comment_id": 90678890, "body": "I think the whole problem is stated wrongly. First <code>lstApplications.GroupBy(x =&gt; x.Questions)</code> does nothing useful - the lists are compared by reference, hence the result is basically the same list as the input. Second the <code>Section</code> class is strange - it should contain single <code>Question</code>, not list. Which at the end leads to how to transform  <code>List&lt;(Application, List&lt;Questions&gt;)&gt;</code> to <code>List&lt;(Question, List&lt;Application&gt;)&gt;</code> which is trivial - <code>SelectMany</code> + <code>GroupBy</code>"}, {"owner": {"reputation": 489, "user_id": 4568656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BrYfc.jpg?s=128&g=1", "display_name": "Lyco", "link": "https://stackoverflow.com/users/4568656/lyco"}, "edited": false, "score": 0, "creation_date": 1534353623, "post_id": 51862933, "comment_id": 90679056, "body": "I added an answer to the other one that I think gives the desired output (untested so take it with a grain of salt). It&#39;s <a href=\"https://stackoverflow.com/questions/51860661/grouping-the-same-object-according-to-the-elements-of-their-lists/51863064#51863064\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5391, "user_id": 5525311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hzYIS.png?s=128&g=1", "display_name": "Grizzly", "link": "https://stackoverflow.com/users/5525311/grizzly"}, "edited": false, "score": 0, "creation_date": 1534353576, "post_id": 51863356, "comment_id": 90679035, "body": "Sorry, can you write this out in lambda form?"}, {"owner": {"reputation": 489, "user_id": 4568656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BrYfc.jpg?s=128&g=1", "display_name": "Lyco", "link": "https://stackoverflow.com/users/4568656/lyco"}, "reply_to_user": {"reputation": 5391, "user_id": 5525311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hzYIS.png?s=128&g=1", "display_name": "Grizzly", "link": "https://stackoverflow.com/users/5525311/grizzly"}, "edited": false, "score": 0, "creation_date": 1534353901, "post_id": 51863356, "comment_id": 90679171, "body": "@M12Bennett I think it&#39;s <code>lstApplications.SelectMany(x =&gt; application.Questions, (x, y) =&gt; new { x, y });</code>"}], "tags": [], "owner": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "is_accepted": true, "score": 3, "last_activity_date": 1534354222, "last_edit_date": 1534354222, "creation_date": 1534353202, "answer_id": 51863356, "question_id": 51862933, "link": "https://stackoverflow.com/questions/51862933/change-style-of-output-with-linq-groupby/51863356#51863356", "title": "Change style of output with LINQ, GroupBy", "body": "<p>I'm not quite sure what the method syntax would be, but here's a query syntax that will get you the desired output. I think the trouble you're having in trying to get the method syntax down is likely due to using a <code>Select</code> where you'd want to use a <code>SelectMany</code>.</p>\n\n<pre><code>var questionGroups = from application in lstApplications\n                     from question in application.Questions\n                     group application.AppId by question.ActualQuestion;\n\n\nforeach (var question in questionGroups)\n    Console.WriteLine($\"{string.Join(\" \", question.Select(x =&gt; $\"A{x}\"))} - {question.Key}\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2009, "user_id": 8656352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QowvE.jpg?s=128&g=1", "display_name": "Adam Simon", "link": "https://stackoverflow.com/users/8656352/adam-simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1534353949, "creation_date": 1534353949, "answer_id": 51863545, "question_id": 51862933, "link": "https://stackoverflow.com/questions/51862933/change-style-of-output-with-linq-groupby/51863545#51863545", "title": "Change style of output with LINQ, GroupBy", "body": "<p>With query syntax:</p>\n\n<pre><code>var appGroups =\n  from app in lstApplications\n  from question in app.Questions\n  group app by question;\n</code></pre>\n\n<p>With lambda syntax:</p>\n\n<pre><code>var appGroups = lstApplications\n    .SelectMany(app =&gt; app.Questions, (app, question) =&gt; new { app, question })\n    .GroupBy(item =&gt; item.question, item =&gt; item.app);\n</code></pre>\n\n<p>Printing the output:</p>\n\n<pre><code>foreach (var appGroup in appGroups)\n    Console.WriteLine($\"{string.Join(\", \", appGroup.Select(app =&gt; \"A\" + app.AppId))} - {appGroup.Key.ActualQuestion}\");\n</code></pre>\n"}], "owner": {"reputation": 5391, "user_id": 5525311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hzYIS.png?s=128&g=1", "display_name": "Grizzly", "link": "https://stackoverflow.com/users/5525311/grizzly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 51863356, "answer_count": 2, "score": -1, "last_activity_date": 1534354222, "creation_date": 1534351467, "question_id": 51862933, "link": "https://stackoverflow.com/questions/51862933/change-style-of-output-with-linq-groupby", "title": "Change style of output with LINQ, GroupBy", "body": "<p>I have this <a href=\"https://dotnetfiddle.net/PAcgWg\" rel=\"nofollow noreferrer\">DotNetFiddle</a>.</p>\n\n<p>Code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\npublic class Program\n{\n    public static void Main()\n    {       \n        // create Questions\n\n        var questionOne = new Question(){QuestionId = 1, ActualQuestion = \"Who\"};\n        var questionTwo = new Question(){QuestionId = 2, ActualQuestion = \"What\"};\n        var questionThree = new Question(){QuestionId = 3, ActualQuestion = \"Where\"};\n\n        // Assign questions to the specified list of questions\n\n        var applicationOneQuestions = new List&lt;Question&gt;(){questionOne, questionTwo, questionThree};\n        var applicationTwoQuestions = new List&lt;Question&gt;() {questionOne, questionTwo};\n        var applicationThreeQuestions = new List&lt;Question&gt;() {questionOne, questionThree};\n        var applicationFourQuestions = new List&lt;Question&gt;() {questionOne};\n\n        // Create Applications\n\n        var applicationOne = new Application(){AppId = 1, Questions = applicationOneQuestions};\n        var applicationTwo = new Application(){AppId = 2, Questions = applicationTwoQuestions};\n        var applicationThree = new Application() {AppId = 3, Questions = applicationThreeQuestions};\n        var applicationFour = new Application() {AppId = 4, Questions = applicationFourQuestions};\n\n        // Create List of Applications\n\n        var lstApplications = new List&lt;Application&gt;(){applicationOne, applicationTwo, applicationThree, applicationFour};\n\n        // Group Applications based on Questions\n\n        var groupApplications = lstApplications.GroupBy(x =&gt; x.Questions).Select(t =&gt; new Section { AppIds = t.Select(z =&gt; z.AppId).ToList() , Questions = t.Key}).ToList();\n\n        foreach(var item in groupApplications)\n        {\n            foreach(var appId in item.AppIds)\n            {\n                Console.WriteLine(appId);\n\n            }\n\n            foreach(var question in item.Questions)\n            {\n                Console.WriteLine(question.ActualQuestion);\n            }\n\n            Console.WriteLine(\"\\n\");\n        }\n    }\n}\n\npublic class Application\n    {\n        public int AppId { get; set; }\n        public List&lt;Question&gt; Questions { get; set; }\n    }\n\npublic class Section\n       {\n            public List&lt;int&gt; AppIds { get; set; }\n            public List&lt;Question&gt; Questions { get; set; }\n        }\n\npublic class Question\n{\n    public int QuestionId {get;set;}\n    public string ActualQuestion {get;set;} \n}\n</code></pre>\n\n<p>Once you run the program, you get an output like so:</p>\n\n<pre><code>1\nWho\nWhat\nWhere\n\n\n2\nWho\nWhat\n\n\n3\nWho\nWhere\n\n\n4\nWho\n</code></pre>\n\n<p>Now, I would like to change the output to look like this:</p>\n\n<pre><code>A1, A2, A3, A4 - Who\nA1, A2 - What\nA1, A3 - Where\n</code></pre>\n\n<p>Basically, </p>\n\n<ul>\n<li>application 1,2,3,4 all contain question 1 - who</li>\n<li>application 1, 2 contain question 2 - what</li>\n<li>application 1, 3 contain question 3 - where</li>\n</ul>\n\n<p>How do I achieve this output?</p>\n"}]