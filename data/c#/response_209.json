[{"tags": ["c#", "wpf", "binding"], "answers": [{"tags": [], "owner": {"reputation": 18836, "user_id": 328848, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hHtsL.jpg?s=128&g=1", "display_name": "Dean Chalk", "link": "https://stackoverflow.com/users/328848/dean-chalk"}, "is_accepted": true, "score": 1, "last_activity_date": 1547123032, "creation_date": 1547123032, "answer_id": 54128656, "question_id": 54120205, "link": "https://stackoverflow.com/questions/54120205/how-to-extend-a-collectionviews-filter/54128656#54128656", "title": "How to extend a CollectionView&#39;s filter?", "body": "<p>Firstly, it is correct that <code>IEnumerable</code> isnt called if your collection class implements <code>ICollectionViewFactory</code>.\nDeep in the WPF framework the <code>ItemsSource</code> (<code>IEnumerable</code>) has its default collection view created. In that code, if the collection already implements <code>ICollectionViewFactory</code> then it takes <code>CreateView</code> as the actual items source. If it doesnt implement it then it creates a default view with the <code>IEnumerable</code> as the items source.</p>\n\n<p>Secondly, your composite filter logic seems reasonable. Expression trees take a lot more implementing, but would also provide a good solution also. Personally I would stick with what you have</p>\n"}], "owner": {"reputation": 1179, "user_id": 4247806, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/u5kfT.jpg?s=128&g=1", "display_name": "mike", "link": "https://stackoverflow.com/users/4247806/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54128656, "answer_count": 1, "score": 0, "last_activity_date": 1547123032, "creation_date": 1547078399, "last_edit_date": 1547113649, "question_id": 54120205, "link": "https://stackoverflow.com/questions/54120205/how-to-extend-a-collectionviews-filter", "title": "How to extend a CollectionView&#39;s filter?", "body": "<p>I have a class that represents a collection and implements, amongst others, the following interfaces:</p>\n\n<ul>\n<li><code>IEnumerable</code> so that I can bind a WPF <code>ItemsControl.ItemsSource</code> to it.</li>\n<li><code>ICollectionViewFactory</code> to use a view I can configure instead of creating a default view</li>\n</ul>\n\n<p>So far, all is fine: I can bind a control, including sorting, filtering and even \"live shaping\". </p>\n\n<p><strong>First question</strong>: Due to the <code>ICollectionViewFactory</code> the <code>IEnumerable.GetEnumerator</code> is never called (by the UI), but it still appears to be required. <strong>Should I be smelling something here?</strong></p>\n\n<p>Then, I have one specific scenario where I want to do some additional filtering and the criteria will depend on the render context which is why I thought I'd use an <code>IValueConverter</code> with something like this:</p>\n\n<pre><code>public object Convert(object value, Type targetType, object parameter, CultureInfo culture)\n{\n    var cv = (ICollectionViewFactory)value.CreateView();\n    cv.ExtendFilter(i =&gt; i.AdditionalFilterProperty);\n\n    return cv;\n}\n</code></pre>\n\n<p>The <code>ExtendFilter</code> extension method looks like this:</p>\n\n<pre><code>public static void ExtendFilter(this ICollectionView view, Predicate&lt;object&gt; filter)\n{\n    if (view.Filter == null)\n    {\n        view.Filter = filter;\n    }\n    else\n    {\n        var originalFilter = view.Filter;\n        view.Filter = item =&gt; originalFilter(item) &amp;&amp; filter(item);\n    }\n}\n</code></pre>\n\n<p><strong>Second question</strong>: Is there a better way to do this? I was thinking, maybe, expression trees...</p>\n"}, {"tags": ["c#", "notepad++", "sendmessage"], "comments": [{"owner": {"reputation": 1061, "user_id": 7293119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eznd2.png?s=128&g=1", "display_name": "Pretasoc", "link": "https://stackoverflow.com/users/7293119/pretasoc"}, "edited": false, "score": 2, "creation_date": 1547078487, "post_id": 54120185, "comment_id": 95072628, "body": "As far as i know notepad++ runs normally as a single instance application. So if you start notepad++ using <code>Process.Start</code> a new tab should open."}, {"owner": {"reputation": 4431, "user_id": 4739488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8m1k.png?s=128&g=1", "display_name": "Flydog57", "link": "https://stackoverflow.com/users/4739488/flydog57"}, "edited": false, "score": 0, "creation_date": 1547078525, "post_id": 54120185, "comment_id": 95072635, "body": "A couple of guesses: Old fashioned DDE (and, no, I don&#39;t remember how that works).  The other way would be to put a file object onto the clipboard, and then send a Drag/Drop message (or sequence of messages) to Notepad++"}, {"owner": {"reputation": 4431, "user_id": 4739488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8m1k.png?s=128&g=1", "display_name": "Flydog57", "link": "https://stackoverflow.com/users/4739488/flydog57"}, "reply_to_user": {"reputation": 1061, "user_id": 7293119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eznd2.png?s=128&g=1", "display_name": "Pretasoc", "link": "https://stackoverflow.com/users/7293119/pretasoc"}, "edited": false, "score": 0, "creation_date": 1547079644, "post_id": 54120185, "comment_id": 95072927, "body": "If you do try @Pretasoc&#39;s <code>Process.Start</code> suggestion, I&#39;m pretty sure you&#39;ll need to set <code>UseShellExecute</code> to <code>true</code> (in a <code>ProcessStartInfo</code>).  But, then again..."}, {"owner": {"reputation": 593, "user_id": 3663152, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/61f472c223db40927182c401062f9f95?s=128&d=identicon&r=PG&f=1", "display_name": "LeY", "link": "https://stackoverflow.com/users/3663152/ley"}, "edited": false, "score": 0, "creation_date": 1547082217, "post_id": 54120185, "comment_id": 95073448, "body": "Process.Start should be the right way to go"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10892544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5353ced7fd5e11b5d3a6827dcaf0f1?s=128&d=identicon&r=PG&f=1", "display_name": "James Nelson", "link": "https://stackoverflow.com/users/10892544/james-nelson"}, "edited": false, "score": 0, "creation_date": 1547600024, "post_id": 54121084, "comment_id": 95244326, "body": "Thanks for the response, however this doesnt resolve my issue. at the start of my application i open notepad++ and embed it into my form."}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "reply_to_user": {"reputation": 1, "user_id": 10892544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5353ced7fd5e11b5d3a6827dcaf0f1?s=128&d=identicon&r=PG&f=1", "display_name": "James Nelson", "link": "https://stackoverflow.com/users/10892544/james-nelson"}, "edited": false, "score": 0, "creation_date": 1547613205, "post_id": 54121084, "comment_id": 95246982, "body": "Where in your question did you mention this or showed that you&#39;re using  SetParent? BTW, I don&#39;t know why you&#39;re doing it, but that&#39;s quite a bad idea. Parenting Top Windows always ends up in tragedy. Use a RichTextBox."}], "tags": [], "owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1547265152, "last_edit_date": 1547265152, "creation_date": 1547086502, "answer_id": 54121084, "question_id": 54120185, "link": "https://stackoverflow.com/questions/54120185/sendmessage-to-notepad-to-open-a-file/54121084#54121084", "title": "SendMessage to Notepad++ to open a file", "body": "<p>If you simply want to open a file in Notepad++, you can just start a new <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.process?f1url=https%3A%2F%2Fmsdn.microsoft.com%2Fquery%2Fdev15.query%3FappId%3DDev15IDEF1%26l%3DEN-US%26k%3Dk(System.Diagnostics.Process);k(TargetFrameworkMoniker-.NETFramework%26f%3D255%26MSPPError%3D-2147217396&amp;view=netframework-4.7.2\" rel=\"nofollow noreferrer\">Process</a>: </p>\n\n<ul>\n<li>set the path of the file you want to open to the <code>Arguments</code> property of the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.processstartinfo.-ctor?f1url=https%3A%2F%2Fmsdn.microsoft.com%2Fquery%2Fdev15.query%3FappId%3DDev15IDEF1%26l%3DEN-US%26k%3Dk(System.Diagnostics.ProcessStartInfo.%2523ctor);k(TargetFrameworkMoniker-.NETFramework%26f%3D255%26MSPPError%3D-2147217396&amp;view=netframework-4.7.2\" rel=\"nofollow noreferrer\">ProcessStartInfo</a> class.  </li>\n<li>the <code>FileName</code> property is set to the path of the program you want to open.  </li>\n<li><code>UseShellExecute</code> and <code>CreateNoWindow</code> are irrelevant here, leave the default.  </li>\n</ul>\n\n<hr>\n\n<pre><code>using System.Diagnostics;\n\nProcess process = new Process();\nProcessStartInfo procInfo = new ProcessStartInfo()\n{\n    FileName = @\"C:\\Program Files\\Notepad++\\notepad++.exe\",\n    Arguments = Path.Combine(Application.StartupPath, \"[Some File].txt\"),\n};\nprocess.StartInfo = procInfo;\nprocess.Start();\nif (process != null) process.Dispose();\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10892544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5353ced7fd5e11b5d3a6827dcaf0f1?s=128&d=identicon&r=PG&f=1", "display_name": "James Nelson", "link": "https://stackoverflow.com/users/10892544/james-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547265152, "creation_date": 1547078229, "last_edit_date": 1547177362, "question_id": 54120185, "link": "https://stackoverflow.com/questions/54120185/sendmessage-to-notepad-to-open-a-file", "title": "SendMessage to Notepad++ to open a file", "body": "<p>I am trying to programmatically open a file in notepad++ using <code>SendMessage</code> but I'am having no luck.<br>\nI figured that because I can drag and drop a file onto Notepad++ and it will open it, that a <code>SendMessage</code> would work.</p>\n\n<p>Declarations:</p>\n\n<pre><code>[DllImport(\"user32.dll\", SetLastError = true)]\npublic static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter, string lpszClass, string lpszWindow);\n\n[DllImport(\"user32.dll\", SetLastError = true)]\npublic static extern int SendMessage(IntPtr hWnd, int uMsg, int wParam, string lParam);\n</code></pre>\n\n<p>Method:<br>\nI launch Notepad++ using <code>Process.Start</code>:  </p>\n\n<pre><code>IntPtr cHwnd = FindWindowEx(pDocked.MainWindowHandle, IntPtr.Zero, \"Scintilla\", null);\nSendMessage(cHwnd, WM_SETTEXT, 0, \"C:\\Users\\nelsonj\\Desktop\\lic.txt\");\n</code></pre>\n\n<p>When <code>SendMessage</code> executes it will send my text into the 'edit' section of Notepad++ instead of opening the file.<br>\nAny help would be great.</p>\n"}, {"tags": ["c#", "expression-trees"], "comments": [{"owner": {"reputation": 1061, "user_id": 7293119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eznd2.png?s=128&g=1", "display_name": "Pretasoc", "link": "https://stackoverflow.com/users/7293119/pretasoc"}, "edited": false, "score": 1, "creation_date": 1547079421, "post_id": 54120167, "comment_id": 95072870, "body": "Is there a specific reason to use Expression trees? Simple lambdas could also capture a local variable. But i don&#39;t see where this might be usefull."}, {"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1547081640, "post_id": 54120167, "comment_id": 95073355, "body": "what is the end goal of that function?"}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "reply_to_user": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1547083447, "post_id": 54120167, "comment_id": 95073668, "body": "@DanielA.White I added some background explanation."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "reply_to_user": {"reputation": 1061, "user_id": 7293119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eznd2.png?s=128&g=1", "display_name": "Pretasoc", "link": "https://stackoverflow.com/users/7293119/pretasoc"}, "edited": false, "score": 0, "creation_date": 1547083455, "post_id": 54120167, "comment_id": 95073672, "body": "@Pretasoc I added some background explanation."}, {"owner": {"reputation": 39263, "user_id": 323924, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/19c51b649e40894c34905f0225196907?s=128&d=identicon&r=PG", "display_name": "Cheng Chen", "link": "https://stackoverflow.com/users/323924/cheng-chen"}, "edited": false, "score": 0, "creation_date": 1547091034, "post_id": 54120167, "comment_id": 95075174, "body": "&quot;Dictionary won&#39;t create a value for a missing value, so you need a new type of Dictionary that auto-creates missing values&quot; why not check <code>.ContainsKey</code> and give an initial count 0?"}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 4, "creation_date": 1547098733, "post_id": 54120167, "comment_id": 95076802, "body": "<i>&quot;Imagine you have a <code>List&lt;T&gt;</code> with duplicate elements and want to create a <code>Dictionary&lt;T,int&gt;</code> that allows you to look up the count for each unique T in the list.</i> OK, I am imagining it, and my imagination is <code>mylist.GroupBy(x=&gt;x).ToDictionary(g =&gt; g.Key, g =&gt; g.Count())</code> and we&#39;re done. I don&#39;t understand why you are doing any of this stuff with expression trees and whatnot. Can you explain?"}, {"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1547139252, "post_id": 54120167, "comment_id": 95098282, "body": "There are many ways to do what you ask with compiled expressions or delegates, all requiring creating instance of some reference type, but I don&#39;t see any benefits doing that instead of having simple <code>class Ref&lt;T&gt; { public T Value; }</code> and use simply <code>new Ref&lt;int&gt;()</code> for creating &quot;multiple runtime variables&quot;"}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "reply_to_user": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1547146764, "post_id": 54120167, "comment_id": 95101991, "body": "@EricLippert So you are calling <code>GroupBy</code> which will create a <code>Lookup</code> internally, then you are breaking down the <code>Lookup</code> to create a <code>Dictionary</code>. I would do <code>var lu = mylist.ToLookup(x=&gt;x)</code> and just use <code>lu[n].Count()</code> (or maybe <code>((ICollection&lt;int&gt;)lu[n]).Count</code>) which at least doesn&#39;t create two dictionary like objects. However, counting isn&#39;t the only reason to want a reference to a value type."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "reply_to_user": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1547146928, "post_id": 54120167, "comment_id": 95102075, "body": "@IvanStoev Perhaps that should be called <code>OnHeap&lt;T&gt; where T : struct</code> instead? The <code>Ref</code> class is a more generic construct and I would prefer to have one class rather than a specialized type for this, but perhaps that isn&#39;t best."}, {"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1547148369, "post_id": 54120167, "comment_id": 95102747, "body": "@NetMage Well, you can call it whatever you like (<code>Variable&lt;T&gt;</code>? :-) All it needs to be is a mutable class with public gettable/settable field/property. Unfortunately cannot use standard <code>Tuple&lt;T&gt;</code> class because <code>Item1</code> has no setter."}], "answers": [{"comments": [{"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1549311774, "post_id": 54508555, "comment_id": 95849987, "body": "While this doesn&#39;t answer the question (the <code>Ref</code> class can be used to capture an already existing lvalue (variable or array member) as well as create a dynamic one from a constant), perhaps this can be used to simplify the implementation of the constant case."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1549312191, "post_id": 54508555, "comment_id": 95850189, "body": "The <code>Expression</code> trees are used because the <code>Ref</code> class is generic, but if this can be used to simplify the constant case, then it does answer the question."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1549406351, "post_id": 54508555, "comment_id": 95889253, "body": "I changed my mind - it doesn&#39;t matter why I am using <code>Expression</code> trees, the question remains how to dynamically create an object (variable) using <code>Expression</code> trees without using <code>Array</code>."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1611608010, "post_id": 54508555, "comment_id": 116502223, "body": "I don&#39;t think is a complete answer to my final question, but it ended up serving my purposes close enough."}], "tags": [], "owner": {"reputation": 15285, "user_id": 113158, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/48b539a26d13f6c9e40081805d8f47ac?s=128&d=identicon&r=PG", "display_name": "Jean Hominal", "link": "https://stackoverflow.com/users/113158/jean-hominal"}, "is_accepted": true, "score": 2, "last_activity_date": 1549371455, "last_edit_date": 1549371455, "creation_date": 1549235811, "answer_id": 54508555, "question_id": 54120167, "link": "https://stackoverflow.com/questions/54120167/in-c-how-can-i-create-a-value-type-variable-at-runtime/54508555#54508555", "title": "In C#, how can I create a value type variable at runtime?", "body": "<p>I agree with some of the question commenters that expression trees seem unnecessary, so here is a simple implementation of the shown API without them:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>struct Box&lt;T&gt; {\n    public T Value;\n}\n\n(Func&lt;T&gt; getFn, Action&lt;T&gt; setFn) MakePair&lt;T&gt;(T initialVal) {\n    var box = new Box&lt;T&gt; { Value = initialVal };\n    return (() =&gt; box.Value, v =&gt; box.Value = v);\n}\n</code></pre>\n\n<p>As an answer to the stated question (how to define <code>dynref</code> without a lambda), then, is there something wrong with the following modifications to <code>dynvar</code> and <code>dynref</code>?</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>var dynvar = new T[] { initialVal };\nvar dynref = Expression.Constant(dynvar);\n</code></pre>\n"}], "owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1173, "favorite_count": 0, "accepted_answer_id": 54508555, "answer_count": 1, "score": 3, "last_activity_date": 1611606638, "creation_date": 1547078111, "last_edit_date": 1611606638, "question_id": 54120167, "link": "https://stackoverflow.com/questions/54120167/in-c-how-can-i-create-a-value-type-variable-at-runtime", "title": "In C#, how can I create a value type variable at runtime?", "body": "<p>I am attempting to implement a method like:</p>\n<pre><code>(Func&lt;T&gt; getFn, Action&lt;T&gt; setFn) MakePair&lt;T&gt;(T initialVal) {\n}\n</code></pre>\n<p>It will return two runtime generated lambdas that get and set a dynamically created variable using <code>Expression</code> trees to create the code.</p>\n<p>My current solution is to dynamically create an array of the type with one element, and reference that:</p>\n<pre><code>(Func&lt;T&gt; getFn, Action&lt;T&gt; setFn) MakePair&lt;T&gt;(T initialVal) {\n    var dynvar = Array.CreateInstance(typeof(T), 1);\n    Expression&lt;Func&lt;Array&gt;&gt; f = () =&gt; dynvar;\n    var dynref = Expression.Convert(f.Body, typeof(T).MakeArrayType());\n    var e0 = Expression.Constant(0);\n    var getBody = Expression.ArrayIndex(dynref, e0);\n    var setParam = Expression.Parameter(typeof(T));\n    var setBody = Expression.Assign(Expression.ArrayAccess(dynref, e0), setParam);\n    \n    var getFn = Expression.Lambda&lt;Func&lt;T&gt;&gt;(getBody).Compile();\n    var setFn = Expression.Lambda&lt;Action&lt;T&gt;&gt;(setBody, setParam).Compile();\n\n    return (getFn, setFn);\n}\n</code></pre>\n<p>Is there a better way to create what may be a value type variable at runtime that can be read/written to than using an array?</p>\n<p>Is there a better way to reference the runtime created array other than using a lambda to create the (field?) reference for use in the <code>ArrayIndex</code>/<code>ArrayAccess</code> method calls?</p>\n<p><strong>Excessive Background Info</strong>\nFor those that wonder, ultimately this came up in an attempt to create something like Perl auto-virification of lvalues for Perl hashes.</p>\n<p>Imagine you have a <code>List&lt;T&gt;</code> with duplicate elements and want to create a <code>Dictionary&lt;T,int&gt;</code> that allows you to look up the count for each unique <code>T</code> in the list. You can use a few lines of code to count (in this case <code>T</code> is <code>int</code>):</p>\n<pre><code>var countDict = new Dictionary&lt;int, int&gt;();\nforeach (var n in testarray) {\n    countDict.TryGetValue(n, out int c);\n    countDict[n] = c + 1;\n}\n</code></pre>\n<p>But I want to do this with LINQ, and I want to avoid double-indexing <code>countDict</code> (interestingly, <code>ConcurrentDictionary</code> has <code>AddOrUpdate</code> for this purpose) so I use Aggregate:</p>\n<pre><code>var countDict = testarray.Aggregate(new Dictionary&lt;int,int&gt;(), (d, n) =&gt; { ++d[n]; return d; });\n</code></pre>\n<p>But this has a couple of issues. First, <code>Dictionary</code> won't create a value for a missing value, so you need a new type of <code>Dictionary</code> that auto-creates missing values using e.g. a seed lambda:</p>\n<pre><code>var countDict = testarray.Aggregate(new SeedDictionary&lt;int, Ref&lt;int&gt;&gt;(() =&gt; Ref.Of(() =&gt; 0)), (d, n) =&gt; { var r = d[n]; ++r.Value; return d; });\n</code></pre>\n<p>But you still have the lvalue problem, so you replace the plain <code>int</code> counter with a <code>Ref</code> class. Unfortunately, C# can't create a C++ first class <code>Ref</code> class, but using one based around auto-creating a setter lambda from a getter lambda (using expression trees) is close enough. (Unfortunately C# still won't accept <code>++d[n].Value;</code> even though it should be valid, so you have to create a temporary.)</p>\n<p>But now you have the problem of creating multiple runtime integer variables to hold the counts. I extended the <code>Ref&lt;&gt;</code> class to take a lambda that returns a constant (<code>ConstantExpression</code>) and create a runtime variable and build a getter and setter with the constant being the initial value.</p>\n"}, {"tags": ["c#", "ajax", "asp.net-mvc"], "comments": [{"owner": {"reputation": 5865, "user_id": 884101, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/67f7c5940eff152578a015bacbffa89f?s=128&d=identicon&r=PG", "display_name": "Chetan Ranpariya", "link": "https://stackoverflow.com/users/884101/chetan-ranpariya"}, "edited": false, "score": 0, "creation_date": 1547085683, "post_id": 54119956, "comment_id": 95074144, "body": "How do you render this View from the Controller action?"}, {"owner": {"reputation": 141, "user_id": 6178773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d506b478b9a4745cd58d16b526529d3?s=128&d=identicon&r=PG&f=1", "display_name": "J H", "link": "https://stackoverflow.com/users/6178773/j-h"}, "reply_to_user": {"reputation": 5865, "user_id": 884101, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/67f7c5940eff152578a015bacbffa89f?s=128&d=identicon&r=PG", "display_name": "Chetan Ranpariya", "link": "https://stackoverflow.com/users/884101/chetan-ranpariya"}, "edited": false, "score": 0, "creation_date": 1547091168, "post_id": 54119956, "comment_id": 95075198, "body": "you mean this? <code>return PartialView(&quot;_scheduleShiftsTable&quot;, scheduleVM);</code>"}, {"owner": {"reputation": 5865, "user_id": 884101, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/67f7c5940eff152578a015bacbffa89f?s=128&d=identicon&r=PG", "display_name": "Chetan Ranpariya", "link": "https://stackoverflow.com/users/884101/chetan-ranpariya"}, "edited": false, "score": 0, "creation_date": 1547092033, "post_id": 54119956, "comment_id": 95075346, "body": "Yes.. you need to call that controller action via AJAX."}, {"owner": {"reputation": 141, "user_id": 6178773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d506b478b9a4745cd58d16b526529d3?s=128&d=identicon&r=PG&f=1", "display_name": "J H", "link": "https://stackoverflow.com/users/6178773/j-h"}, "reply_to_user": {"reputation": 5865, "user_id": 884101, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/67f7c5940eff152578a015bacbffa89f?s=128&d=identicon&r=PG", "display_name": "Chetan Ranpariya", "link": "https://stackoverflow.com/users/884101/chetan-ranpariya"}, "edited": false, "score": 0, "creation_date": 1547093971, "post_id": 54119956, "comment_id": 95075756, "body": "How can I do it, could you give me the reference?"}, {"owner": {"reputation": 5865, "user_id": 884101, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/67f7c5940eff152578a015bacbffa89f?s=128&d=identicon&r=PG", "display_name": "Chetan Ranpariya", "link": "https://stackoverflow.com/users/884101/chetan-ranpariya"}, "edited": false, "score": 0, "creation_date": 1547095805, "post_id": 54119956, "comment_id": 95076063, "body": "Please refer <a href=\"https://stackoverflow.com/questions/6119098/how-to-call-controller-actions-using-jquery-in-asp-net-mvc\">this</a>"}, {"owner": {"reputation": 141, "user_id": 6178773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d506b478b9a4745cd58d16b526529d3?s=128&d=identicon&r=PG&f=1", "display_name": "J H", "link": "https://stackoverflow.com/users/6178773/j-h"}, "reply_to_user": {"reputation": 5865, "user_id": 884101, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/67f7c5940eff152578a015bacbffa89f?s=128&d=identicon&r=PG", "display_name": "Chetan Ranpariya", "link": "https://stackoverflow.com/users/884101/chetan-ranpariya"}, "edited": false, "score": 0, "creation_date": 1547099221, "post_id": 54119956, "comment_id": 95076937, "body": "I aimed to utilize $(&#39;.shift-template&#39;).html(X); instead of get to call the url action. honestly i am not sure your suggestion valid for my original intention."}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 6178773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d506b478b9a4745cd58d16b526529d3?s=128&d=identicon&r=PG&f=1", "display_name": "J H", "link": "https://stackoverflow.com/users/6178773/j-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1547157636, "creation_date": 1547157636, "answer_id": 54137537, "question_id": 54119956, "link": "https://stackoverflow.com/questions/54119956/ajax-jquery-to-load-a-html-contents/54137537#54137537", "title": "ajax jquery to load a html contents", "body": "<p>First time for my ajax experiment and learned how ajax works.\nHere is what I have succeeded.</p>\n\n<p>I created a new method to feed the port of table rows from database and let the ajax call the method and update the table rows specifically.</p>\n\n<pre><code>$.ajax({\n    type: \"GET\",\n    url: \"@Url.Action(\"DropDownAction\", \"Schedule\")\",\n    success: function(response) {\n        $('.shift-template').html(response);\n    },\n    error:function(){\n    alert(\"Error!\");\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 6178773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d506b478b9a4745cd58d16b526529d3?s=128&d=identicon&r=PG&f=1", "display_name": "J H", "link": "https://stackoverflow.com/users/6178773/j-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547157636, "creation_date": 1547076521, "last_edit_date": 1547083285, "question_id": 54119956, "link": "https://stackoverflow.com/questions/54119956/ajax-jquery-to-load-a-html-contents", "title": "ajax jquery to load a html contents", "body": "<p>Sorry if the code/question doesn't make sense, but if it does, hopefully someone helps give me some guidance.</p>\n\n<p>In AJAX (jquery),\n<code>$('.shift-template').html(X);</code></p>\n\n<p>I need to feed to 'X' with this code (dynamic contents).</p>\n\n<pre><code>@model ScheduleUsers.Models.ScheduledWorkPeriod\n\n@{\n    var shifttemplates = ViewData[\"shifttemplates\"] as List&lt;ScheduleUsers.Models.ScheduleShiftTemplate&gt;;\n}\n\n&lt;td id=\"shift-template-content\"&gt;\n    &lt;select id=\"shift-template-@shiftcount\" name=\"shifttemplate\" class=\"form-control shift-template\"&gt;\n        @foreach (var st in shifttemplates)\n        {\n            @* If shift Id is (id 1), then display blank*@\n            if (st.Id == \"1\")\n            {\n                &lt;option value=\"@st.Id\"&gt;-&lt;/option&gt;\n            }\n            @* Else show shift template row*@\n            else\n            {\n                var st_start = st.StartTime.Value.ToString(\"h:mm tt\");\n                var st_end = st.EndTime.Value.ToString(\"h:mm tt\");\n                &lt;option value=\"@st_start|@st_end\"&gt;@st_start - @st_end&lt;/option&gt;\n            }\n        }\n    &lt;/select&gt;\n\n&lt;/td&gt;\n</code></pre>\n\n<p>What I try to accomplish is when the jquery success, the portion (contents) of entire page needs to auto refreshed with it instead of the entire page manual reload.</p>\n"}, {"tags": ["c#", "regex"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1547077312, "post_id": 54119909, "comment_id": 95072379, "body": "What exactly are you trying to do? Arey you always only trying to separate the first &quot;word&quot; (i.e., always splitting only on the first uppercase character <i>inside</i> the string)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1547078538, "post_id": 54119909, "comment_id": 95072638, "body": "I am just going to throw this at your feet: <code>var myArray = Regex.Split(myString, &quot;(?&lt;!^|([A-Z].*){2})(?=[A-Z])&quot;);</code>. If you want to know how it works (why wouldn&#39;t you?), there are plenty of Regex tutorials/guides out there that will tell you in detail what those symbols in in this regex pattern mean..."}, {"owner": {"reputation": 33, "user_id": 10890840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157105614363534/picture?type=large", "display_name": "Tim Kelly", "link": "https://stackoverflow.com/users/10890840/tim-kelly"}, "edited": false, "score": 0, "creation_date": 1547078797, "post_id": 54119909, "comment_id": 95072702, "body": "Thanks! Yes Basically split verb / noun. First word is very, everything that follows is Noun."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1547081767, "post_id": 54119944, "comment_id": 95073382, "body": "Now lets try it with something like <code>&quot;SetAccessDate&quot;</code> ;-)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1547113092, "post_id": 54119944, "comment_id": 95082766, "body": "I see exactly the same as you would when using &quot;SetAccessDate&quot;. That you would not see the same as me would be really, really surprising since it only involves setting the input string in your fiddle accordingly (on a side note, providing a fiddle is commendable, even if your answer is only working for a few limited words and not generally doing what OP is asking for). And what i saw -- and what you would see if you only would try -- is not the outcome OP is asking for."}, {"owner": {"reputation": 23752, "user_id": 1118978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2rloq.jpg?s=128&g=1", "display_name": "Dervi\u015f Kay\u0131mba\u015f\u0131o\u011flu", "link": "https://stackoverflow.com/users/1118978/dervi%c5%9f-kay%c4%b1mba%c5%9f%c4%b1o%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1547113438, "post_id": 54119944, "comment_id": 95082956, "body": "I believe that what you are doing right now is misleading, I put one sample data, If you put <code>SetAccessDate</code> it splits it to <code>Set, Access, Date</code>. Tell me a string which does not satisfy what OP is asking for?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1547113534, "post_id": 54119944, "comment_id": 95083013, "body": "So much leg-pullery here... Or do you really believe OP is really only asking about just the two specific string <i>examples</i> in their question?"}, {"owner": {"reputation": 23752, "user_id": 1118978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2rloq.jpg?s=128&g=1", "display_name": "Dervi\u015f Kay\u0131mba\u015f\u0131o\u011flu", "link": "https://stackoverflow.com/users/1118978/dervi%c5%9f-kay%c4%b1mba%c5%9f%c4%b1o%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1547113675, "post_id": 54119944, "comment_id": 95083077, "body": "Again I am asking you do you have any string/pattern example which fails? I really would like to see my mistake. Please provide me an example"}], "tags": [], "owner": {"reputation": 23752, "user_id": 1118978, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/2rloq.jpg?s=128&g=1", "display_name": "Dervi\u015f Kay\u0131mba\u015f\u0131o\u011flu", "link": "https://stackoverflow.com/users/1118978/dervi%c5%9f-kay%c4%b1mba%c5%9f%c4%b1o%c4%9flu"}, "is_accepted": false, "score": -1, "last_activity_date": 1547078500, "last_edit_date": 1547078500, "creation_date": 1547076437, "answer_id": 54119944, "question_id": 54119909, "link": "https://stackoverflow.com/questions/54119909/regular-expression-to-extract-based-on-capital-letters/54119944#54119944", "title": "Regular expression to extract based on capital letters", "body": "<p>Try the regex below</p>\n\n<pre><code>(?![A-Z][a-z]+Key)[A-Z][a-z]+|[A-Z][a-z]+Key\n</code></pre>\n\n<p><a href=\"/questions/tagged/c%23\" class=\"post-tag\" title=\"show questions tagged &#39;c#&#39;\" rel=\"tag\">c#</a> code</p>\n\n<pre><code>var matches = Regex.Matches(input, @\"(?![A-Z][a-z]+Key)[A-Z][a-z]+|[A-Z][a-z]+Key\");\n        foreach (Match match in  matches)\n            match.Groups[0].Value.Dump();\n</code></pre>\n\n<p>for Splitting</p>\n\n<pre><code>matches.OfType&lt;Match&gt;().Select(x =&gt; x.Value).ToArray().Dump();      \n</code></pre>\n\n<p><a href=\"https://dotnetfiddle.net/z0nTu2\" rel=\"nofollow noreferrer\">Fiddle</a></p>\n"}, {"tags": [], "owner": {"reputation": 439, "user_id": 1171270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c52dce737a1cf75e70cc85d9ebac7078?s=128&d=identicon&r=PG", "display_name": "ES2018", "link": "https://stackoverflow.com/users/1171270/es2018"}, "is_accepted": false, "score": 2, "last_activity_date": 1547077820, "creation_date": 1547077820, "answer_id": 54120113, "question_id": 54119909, "link": "https://stackoverflow.com/questions/54119909/regular-expression-to-extract-based-on-capital-letters/54120113#54120113", "title": "Regular expression to extract based on capital letters", "body": "<p>This can be solved in different ways; one method is the following</p>\n\n<pre><code>string source = \"GetForeignKey\";\n\nvar result = Regex.Matches(source, \"[A-Z]\").OfType&lt;Match&gt;().Select(x =&gt; x.Index).ToArray();\nstring a, b;\nif (result.Length &gt; 1)\n{\n    a = source.Substring(0, result[1]);\n    b = source.Substring(result[1]);\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10890840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157105614363534/picture?type=large", "display_name": "Tim Kelly", "link": "https://stackoverflow.com/users/10890840/tim-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547078500, "creation_date": 1547076289, "question_id": 54119909, "link": "https://stackoverflow.com/questions/54119909/regular-expression-to-extract-based-on-capital-letters", "title": "Regular expression to extract based on capital letters", "body": "<p>Hi please can someone help with a C# regex to split into just two words as follows:</p>\n\n<pre><code>\"SetTable\" -&gt;&gt; [\"Set\", \"Table\"]\n\"GetForeignKey\" -&gt;&gt; [\"Get\", \"ForeignKey\"]  //No split on Key!\n</code></pre>\n"}, {"tags": ["c#", ".net", "fips"], "comments": [{"owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 0, "creation_date": 1547076720, "post_id": 54119906, "comment_id": 95072255, "body": "Check the Registry value at <code>HKLM\\System\\CurrentControlSet\\Control\\Lsa\\FIPSAlgorithmPolic&zwnj;&#8203;y\\Enabled</code>?"}, {"owner": {"reputation": 25908, "user_id": 242520, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0623460a9ea717d56fd359f797f98d77?s=128&d=identicon&r=PG", "display_name": "ta.speot.is", "link": "https://stackoverflow.com/users/242520/ta-speot-is"}, "edited": false, "score": 1, "creation_date": 1547116152, "post_id": 54119906, "comment_id": 95084555, "body": "FWIW If you&#39;re dealing with FIPS enforcing certain classes be used in .NET, <a href=\"https://blogs.msdn.microsoft.com/dotnet/2018/11/28/announcing-net-framework-4-8-early-access-build-3694/\" rel=\"nofollow noreferrer\">.NET 4.8</a> fixes this: <i>the SHA256Managed class (and the other managed cryptography classes) will redirect the cryptographic operations to a system cryptography library.</i>"}, {"owner": {"reputation": 25908, "user_id": 242520, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0623460a9ea717d56fd359f797f98d77?s=128&d=identicon&r=PG", "display_name": "ta.speot.is", "link": "https://stackoverflow.com/users/242520/ta-speot-is"}, "edited": false, "score": 2, "creation_date": 1547116284, "post_id": 54119906, "comment_id": 95084639, "body": "Otherwise this might do <a href=\"https://referencesource.microsoft.com/#mscorlib/system/security/cryptography/cryptoconfig.cs,60dba5f3579c03b5\" rel=\"nofollow noreferrer\">referencesource.microsoft.com/#mscorlib/system/security/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 131158, "user_id": 266143, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/487f6927f37c3005e5b918d131892715?s=128&d=identicon&r=PG", "display_name": "CodeCaster", "link": "https://stackoverflow.com/users/266143/codecaster"}, "edited": false, "score": 1, "creation_date": 1547115947, "post_id": 54126433, "comment_id": 95084421, "body": "You might not want to create that key if it doesn&#39;t exist."}, {"owner": {"reputation": 745, "user_id": 729122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5bb2a61eefcf834861b8bb98a25f69?s=128&d=identicon&r=PG", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/729122/gaurav"}, "reply_to_user": {"reputation": 131158, "user_id": 266143, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/487f6927f37c3005e5b918d131892715?s=128&d=identicon&r=PG", "display_name": "CodeCaster", "link": "https://stackoverflow.com/users/266143/codecaster"}, "edited": false, "score": 0, "creation_date": 1547116165, "post_id": 54126433, "comment_id": 95084568, "body": "Yeah its fine we can remove the if condition if user don&#39;t want to create the key."}], "tags": [], "owner": {"reputation": 745, "user_id": 729122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5bb2a61eefcf834861b8bb98a25f69?s=128&d=identicon&r=PG", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/729122/gaurav"}, "is_accepted": true, "score": 0, "last_activity_date": 1547115750, "last_edit_date": 1547115750, "creation_date": 1547115472, "answer_id": 54126433, "question_id": 54119906, "link": "https://stackoverflow.com/questions/54119906/detecting-if-fips-is-being-enforced-via-net-c/54126433#54126433", "title": "Detecting if FIPS is being enforced via .NET C#", "body": "<p>You can use this code to check whether FIPS is enabled or not:</p>\n\n<pre><code>public static object getKey(string Name)\n{\n    RegistryKey uac = Registry.LocalMachine.OpenSubKey(@\"System\\CurrentControlSet\\Control\\Lsa\\FIPSAlgorithmPolicy\", true);\n    if (uac == null)\n    {\n        uac = Registry.LocalMachine.CreateSubKey(@\"System\\CurrentControlSet\\Control\\Lsa\\FIPSAlgorithmPolicy\");\n    }\n    return uac.GetValue(Name);\n}\n</code></pre>\n\n<p>Just pass \"Enabled\" key into it and it will return 1 or 0 based on the enabled or disabled.</p>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 1614567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a4deeb3bca37633aa1a524a153c78a?s=128&d=identicon&r=PG", "display_name": "blueharoon", "link": "https://stackoverflow.com/users/1614567/blueharoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1587821377, "creation_date": 1587821377, "answer_id": 61426404, "question_id": 54119906, "link": "https://stackoverflow.com/questions/54119906/detecting-if-fips-is-being-enforced-via-net-c/61426404#61426404", "title": "Detecting if FIPS is being enforced via .NET C#", "body": "<p>It has already been answered by @ta-speot-is in the comments, adding it as an answer if someone overlooks that comment.</p>\n\n<p>To know if FIPS is enabled we can simply check the boolean flag <code>CryptoConfig.AllowOnlyFipsAlgorithms</code> available in .Net Framework 4.0 and higher versions.</p>\n"}], "owner": {"reputation": 637, "user_id": 8521445, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8b1e5c476ea736f8ec6749237752bf98?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/8521445/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 54126433, "answer_count": 2, "score": 2, "last_activity_date": 1587821377, "creation_date": 1547076277, "question_id": 54119906, "link": "https://stackoverflow.com/questions/54119906/detecting-if-fips-is-being-enforced-via-net-c", "title": "Detecting if FIPS is being enforced via .NET C#", "body": "<p>Is there a way to determine from the .NET framework whether or not the FIPS policy is being enforced on the windows computer?</p>\n"}, {"tags": ["c#", "pointers", "dependency-properties"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 2, "creation_date": 1547075614, "post_id": 54119754, "comment_id": 95071990, "body": "If you share the attempt you\u2019ve made, it would likely generate better answers."}, {"owner": {"reputation": 4431, "user_id": 4739488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8m1k.png?s=128&g=1", "display_name": "Flydog57", "link": "https://stackoverflow.com/users/4739488/flydog57"}, "edited": false, "score": 0, "creation_date": 1547075804, "post_id": 54119754, "comment_id": 95072042, "body": "When you are working with <i>Reference Types</i> in C#, what your variables represent is a reference to an object created on the heap. If you say <code>var b1 = new Button(); var b2 = b1; b2.Text = &quot;New Text&quot;;</code> and then look at b1&#39;s Text property, you will see that it changed (since both b1 and b2 refer to the same object).  If you add b1 to a collection, the reference in the collection and b1 (and b2) now all refer to the same button.  C# doesn&#39;t have pointers in normal (aka &quot;safe&quot;) code, but it has references for free for everything but <i>Value Types</i>"}], "owner": {"reputation": 838, "user_id": 5617177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34362350f98c8f738605360393da7f50?s=128&d=identicon&r=PG&f=1", "display_name": "bwall", "link": "https://stackoverflow.com/users/5617177/bwall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547075406, "creation_date": 1547075406, "question_id": 54119754, "link": "https://stackoverflow.com/questions/54119754/can-you-make-a-list-of-pointers-in-c", "title": "Can you make a list of Pointers in C#?", "body": "<p>If I have a group of DependencyProperties:</p>\n\n<pre><code>public UIElement Button0\n{\n    get { return (UIElement)GetValue(Button1Property); }\n    set { SetValue(Button1Property, value); }\n}\npublic static DependencyProperty Button1Property = \n    DependencyProperty.Register(nameof(Button1), typeof(UIElement), typeof(myClass), new PropertyMetadata(null));\n\n\npublic UIElement Button1....\n\npublic UIElement Button2....\n\n...\n</code></pre>\n\n<p>Is there a way to create an observable collection of those properties, such that </p>\n\n<pre><code>AllButtons[0] = new Button(); //actually does: SetValue(Button0Property, value);\nvar button = AllButtons[1]; // actually does button = (UIElement)GetValue(Button1Property);\n</code></pre>\n\n<p>I've been struggling with this for a while, and was hoping that the new <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/ref-returns\" rel=\"nofollow noreferrer\"><strong>ref</strong> return values in C# 7.0</a>  would do this easily, but yet again I've hit a brick wall. Isn't there some way in C# to make a list of pointers to properties?</p>\n"}, {"tags": ["c#", "linq", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 604, "user_id": 6472007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qf3Bl.jpg?s=128&g=1", "display_name": "Nonik", "link": "https://stackoverflow.com/users/6472007/nonik"}, "is_accepted": false, "score": 0, "last_activity_date": 1547076289, "creation_date": 1547076289, "answer_id": 54119910, "question_id": 54119752, "link": "https://stackoverflow.com/questions/54119752/lambda-select-columns-without-an-expression/54119910#54119910", "title": "Lambda Select Columns Without an Expression", "body": "<p>yes, you can use Expression</p>\n\n<pre><code>ParameterExpression param = Expression.Parameter(typeof(Table), yourVariable);\nMemberExpression propExpression = Expression.PropertyOrField(param, yourVariable);\nExpression&lt;Func&lt;Table, string&gt;&gt; selector = Expression.Lambda&lt;Func&lt;Table, string&gt;&gt;(propExpression, param);\nvar result = db.Table.Select(selector).First();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547089195, "post_id": 54120665, "comment_id": 95074856, "body": "I don&#39;t think this is quite what I need. As stated, the column name in the select list will be a variable, not a string."}, {"owner": {"reputation": 15446, "user_id": 7299782, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nNfiq.png?s=128&g=1", "display_name": "Anu Viswan", "link": "https://stackoverflow.com/users/7299782/anu-viswan"}, "reply_to_user": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547089437, "post_id": 54120665, "comment_id": 95074910, "body": "@extensionhelp when you say variable . do you mean , a string variable which has columnname ? say columnName = &quot;Department&quot; ? or ?"}, {"owner": {"reputation": 15446, "user_id": 7299782, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nNfiq.png?s=128&g=1", "display_name": "Anu Viswan", "link": "https://stackoverflow.com/users/7299782/anu-viswan"}, "reply_to_user": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547089560, "post_id": 54120665, "comment_id": 95074931, "body": "@extensionhelp if that&#39;s the case, as explained in OP, please check updated answer"}, {"owner": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547091622, "post_id": 54120665, "comment_id": 95075269, "body": "That didn\u2019t produce an error, but when I added ToList() to the end, it did. Any idea why?"}, {"owner": {"reputation": 15446, "user_id": 7299782, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nNfiq.png?s=128&g=1", "display_name": "Anu Viswan", "link": "https://stackoverflow.com/users/7299782/anu-viswan"}, "reply_to_user": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547126822, "post_id": 54120665, "comment_id": 95090523, "body": "You could use .ToListAsync()."}, {"owner": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547138733, "post_id": 54120665, "comment_id": 95097953, "body": "The error is a NullReferenceException on <code>model.PbiData.Add(PbiFieldData);</code> ... I&#39;ve updated the full code in OP."}, {"owner": {"reputation": 15446, "user_id": 7299782, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nNfiq.png?s=128&g=1", "display_name": "Anu Viswan", "link": "https://stackoverflow.com/users/7299782/anu-viswan"}, "reply_to_user": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547173390, "post_id": 54120665, "comment_id": 95110580, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/186510/discussion-between-anu-viswan-and-extensionhelp\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 15446, "user_id": 7299782, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nNfiq.png?s=128&g=1", "display_name": "Anu Viswan", "link": "https://stackoverflow.com/users/7299782/anu-viswan"}, "is_accepted": false, "score": 0, "last_activity_date": 1547126910, "last_edit_date": 1547126910, "creation_date": 1547082412, "answer_id": 54120665, "question_id": 54119752, "link": "https://stackoverflow.com/questions/54119752/lambda-select-columns-without-an-expression/54120665#54120665", "title": "Lambda Select Columns Without an Expression", "body": "<p>You could use <a href=\"https://www.nuget.org/packages/System.Linq.Dynamic/\" rel=\"nofollow noreferrer\">System.Linq.Dynamic</a> Nuget for the purpose</p>\n\n<pre><code>var fieldName = \"Department\";\nvar results = context.PbiData\n                     .Where(x=&gt; DatasetList.Contains(x.DatasetId))\n                     .Select(fieldName);\n</code></pre>\n\n<p>Based on comment, to convert to List, one can use</p>\n\n<pre><code>var results = await context.PbiData\n                     .Where(x=&gt; DatasetList.Contains(x.DatasetId))\n                     .Select(fieldName).ToListAsync();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547174096, "post_id": 54122899, "comment_id": 95110728, "body": "No luck. This one immediately produces an error on the first @ symbol &quot;Keyword, identifier, or string expected after verbatim specifier @&quot;"}, {"owner": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547214164, "post_id": 54122899, "comment_id": 95126442, "body": "I&#39;m getting the error <code>Invalid pseudocolumn &quot;$abffc3b5&quot;.</code> ... I should have mentioned, the DatasetList and the DatasetIds are GUIDs, so maybe they need to be treated differently."}, {"owner": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "edited": false, "score": 0, "creation_date": 1547214507, "post_id": 54122899, "comment_id": 95126621, "body": "To clarify, the string &quot;abffc3b5&quot; is part of the GUID of the first dataset."}], "tags": [], "owner": {"reputation": 12891, "user_id": 5630778, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3yro_KhP3ds/AAAAAAAAAAI/AAAAAAAAACE/mDQEhphwsL0/photo.jpg?sz=128", "display_name": "Slava Utesinov", "link": "https://stackoverflow.com/users/5630778/slava-utesinov"}, "is_accepted": false, "score": 0, "last_activity_date": 1547227934, "last_edit_date": 1547227934, "creation_date": 1547101146, "answer_id": 54122899, "question_id": 54119752, "link": "https://stackoverflow.com/questions/54119752/lambda-select-columns-without-an-expression/54122899#54122899", "title": "Lambda Select Columns Without an Expression", "body": "<p>You can write native sql query:</p>\n\n<pre><code>var FieldValues = ctx.Database.SqlQuery&lt;string&gt;\n(\n$@\"select {fieldName} from PbiData \nwhere DatasetId in ({string.Join(\", \", DatasetList.Select(x =&gt; $\"'{x}'\"))})\"\n).ToList();\n</code></pre>\n"}], "owner": {"reputation": 494, "user_id": 10581807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebae5a589919e09b87559b0a6f19ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "extensionhelp", "link": "https://stackoverflow.com/users/10581807/extensionhelp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1547227934, "creation_date": 1547075390, "last_edit_date": 1547138775, "question_id": 54119752, "link": "https://stackoverflow.com/questions/54119752/lambda-select-columns-without-an-expression", "title": "Lambda Select Columns Without an Expression", "body": "<p>I want an EF query to return an entire column, but I want to choose that column with a variable. Can that be done? I.E. use a variable instead of a lambda expression as such:</p>\n\n<pre><code>FieldValues = db.PbiData\n  .Where(x =&gt; DatasetList.Contains(x.DatasetId))\n  .Select(FieldName)\n  .ToList()\n</code></pre>\n\n<p>FieldName will always match one of the column names of the PbiData table. For example, the first FieldName value is \"Department\", and the query below works just fine: </p>\n\n<pre><code>FieldValues = db.PbiData\n  .Where(x =&gt; DatasetList.Contains(x.DatasetId))\n  .Select(x=&gt;x.Department)\n  .ToList()\n</code></pre>\n\n<p>The where clause in each of these queries simply restricts the data returned to the data relevant to the current user.</p>\n\n<p>My attempt, per a comment below:</p>\n\n<pre><code>    foreach(var F in model.FieldMetaData)\n    {\n\n        if (F.FieldType == \"String\")\n        {\n            PbiFieldData PbiFieldData = new PbiFieldData()\n            {\n                FieldName = F.FieldName,\n                FieldValues = await db.PbiData.Where(x =&gt; DatasetList.Contains(x.DatasetId)).Select(F.FieldName).ToListAsync()\n        };\n\n            model.PbiData.Add(PbiFieldData);\n        };\n    }\n</code></pre>\n"}, {"tags": ["c#", "nunit", "specflow"], "comments": [{"owner": {"reputation": 2753, "user_id": 5803406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Im0fc.jpg?s=128&g=1", "display_name": "devNull", "link": "https://stackoverflow.com/users/5803406/devnull"}, "edited": false, "score": 3, "creation_date": 1547075332, "post_id": 54119701, "comment_id": 95071920, "body": "What errors are you getting?"}, {"owner": {"reputation": 21, "user_id": 7897972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRAH4.jpg?s=128&g=1", "display_name": "Buddhika", "link": "https://stackoverflow.com/users/7897972/buddhika"}, "reply_to_user": {"reputation": 2753, "user_id": 5803406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Im0fc.jpg?s=128&g=1", "display_name": "devNull", "link": "https://stackoverflow.com/users/5803406/devnull"}, "edited": false, "score": 0, "creation_date": 1547076029, "post_id": 54119701, "comment_id": 95072098, "body": "CS1002 ; expected , CS1003 Syntax error, &#39;(&#39; expected , CS8107 Feature &#39;readonly refernece&#39; is not avaiable in c# 7.0. Please use language version 7.2 or greater , CS8124 Tuple must contain at least two elements etc"}, {"owner": {"reputation": 8173, "user_id": 2717391, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bHSSZ.jpg?s=128&g=1", "display_name": "Sateesh Pagolu", "link": "https://stackoverflow.com/users/2717391/sateesh-pagolu"}, "edited": false, "score": 0, "creation_date": 1547076244, "post_id": 54119701, "comment_id": 95072145, "body": "Which line in the code is that error pointing to?"}, {"owner": {"reputation": 21, "user_id": 7897972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRAH4.jpg?s=128&g=1", "display_name": "Buddhika", "link": "https://stackoverflow.com/users/7897972/buddhika"}, "edited": false, "score": 0, "creation_date": 1547076480, "post_id": 54119701, "comment_id": 95072209, "body": "Pretty much the underlying feature file: <a href=\"https://www.useloom.com/share/09514ef83e54424bb159d671c43e2fd3\" rel=\"nofollow noreferrer\">useloom.com/share/09514ef83e54424bb159d671c43e2fd3</a>"}, {"owner": {"reputation": 2753, "user_id": 5803406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Im0fc.jpg?s=128&g=1", "display_name": "devNull", "link": "https://stackoverflow.com/users/5803406/devnull"}, "edited": false, "score": 0, "creation_date": 1547076845, "post_id": 54119701, "comment_id": 95072285, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14898006/error-with-specflow-in-visual-studio-2012-with-unittestprovider\">Error with specflow in visual studio 2012 with &lt;unitTestProvider&gt;</a>"}, {"owner": {"reputation": 21, "user_id": 7897972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRAH4.jpg?s=128&g=1", "display_name": "Buddhika", "link": "https://stackoverflow.com/users/7897972/buddhika"}, "edited": false, "score": 0, "creation_date": 1547077934, "post_id": 54119701, "comment_id": 95072512, "body": "No. I just checked it and there is only one &lt;unitTestProvider&gt; in the app config <a href=\"https://www.useloom.com/share/d4c79f9e4a3f496a9316145b7c58f052\" rel=\"nofollow noreferrer\">useloom.com/share/d4c79f9e4a3f496a9316145b7c58f052</a>"}, {"owner": {"reputation": 10075, "user_id": 1569967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58379d5103ffb1304afdccb438ce53fb?s=128&d=identicon&r=PG", "display_name": "Charlie", "link": "https://stackoverflow.com/users/1569967/charlie"}, "edited": false, "score": 0, "creation_date": 1547105356, "post_id": 54119701, "comment_id": 95078915, "body": "It seems clear that you are trying to compile code that uses features beyond C# 7 with the language set to 7.0. Either change the compiler setting or change the code. :-)"}, {"owner": {"reputation": 5062, "user_id": 3155323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/907d70b2680a6f5cf836a3d58dd2c375?s=128&d=identicon&r=PG", "display_name": "Andreas Willich", "link": "https://stackoverflow.com/users/3155323/andreas-willich"}, "edited": false, "score": 0, "creation_date": 1547113720, "post_id": 54119701, "comment_id": 95083103, "body": "If you save the feature-file, does the error in the code-behind file go away?"}], "owner": {"reputation": 21, "user_id": 7897972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRAH4.jpg?s=128&g=1", "display_name": "Buddhika", "link": "https://stackoverflow.com/users/7897972/buddhika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547226828, "creation_date": 1547075059, "last_edit_date": 1547226828, "question_id": 54119701, "link": "https://stackoverflow.com/questions/54119701/specflow-compiling-errors-in-vs2017", "title": "SpecFlow Compiling errors in VS2017", "body": "<p>I have just added a new specFlow feature fil, and almost 200 errors are generated when I try to build the project.</p>\n\n<p>Tools:</p>\n\n<ul>\n<li>Visual Studio 2017</li>\n<li>Nunit 3.0.0</li>\n<li>SpecFlow 2.4.1</li>\n<li>SpecFlow.MSTest 2.4.1</li>\n<li>SpecFlow.Nunit 2.4.1</li>\n<li>SpecFlow.Nunit.Runner 2.4.1</li>\n<li>SpecFlow.Tools.MsBuild.Generation 2.4.1</li>\n<li>SpecRun.SpecFlow 1.8.5</li>\n<li>SpecRun.SpecFlow.2-4-0 1.8.5</li>\n</ul>\n\n<p>The error I'm getting:</p>\n\n<blockquote>\n  <p>CS1002 ; expected , CS1003 Syntax error, '(' expected , CS8107 Feature 'readonly refernece' is not avaiable in c# 7.0. Please use language version 7.2 or greater , CS8124 Tuple must contain at least two elements etc</p>\n</blockquote>\n"}, {"tags": ["c#", "arrays", "2d", "gaussian"], "comments": [{"owner": {"reputation": 2334, "user_id": 9893154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5vkTj.jpg?s=128&g=1", "display_name": "\u30bf\u30b3\u30b9", "link": "https://stackoverflow.com/users/9893154/%e3%82%bf%e3%82%b3%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1547076283, "post_id": 54119603, "comment_id": 95072152, "body": "You should definitely hit the Unity forums for this; though you may get responses here, they are bound to be slow for advanced material."}, {"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547105801, "post_id": 54119603, "comment_id": 95079110, "body": "I think this question is not really about Unity in the first place but about your algorithm. It should probably rather go to the <a href=\"https://math.stackexchange.com/\">Mathematics</a> page"}, {"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547106495, "post_id": 54119603, "comment_id": 95079431, "body": "Alo have a look at <a href=\"https://en.wikipedia.org/wiki/Gaussian_function#Two-dimensional_Gaussian_function\" rel=\"nofollow noreferrer\">Wikipedia: Two-dimensional_Gaussian_function</a>. There is no implementation example for c# but maybe it&#39;s a good startpoint"}], "owner": {"reputation": 1, "user_id": 10892352, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uyYTgBjHkeY/AAAAAAAAAAI/AAAAAAAADMY/mCYp-P2X50c/photo.jpg?sz=128", "display_name": "pAkwe", "link": "https://stackoverflow.com/users/10892352/pakwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547105853, "creation_date": 1547074473, "last_edit_date": 1547105853, "question_id": 54119603, "link": "https://stackoverflow.com/questions/54119603/what-is-the-best-way-to-get-a-coefficient-for-a-2d-normal-distribution-over-a-2d", "title": "What is the best way to get a coefficient for a 2d normal distribution over a 2d array with mean value in the middle and minimum in the corners?", "body": "<p>I am currently working on a project (Unity, C#) where I need to reproduce the lens distortion of a camera. </p>\n\n<p>Long story short is that I have a 2d array that represents the lens from which I am raycasting to the map to get a value for how well the object struck by the ray is seen by the camera. Each cell in the array is just a Vector3 through which the ray, originating from the camera, passes. For each cell I am calculating a quality of view value, which I explained above.</p>\n\n<p>To apply distortion I would need a 2d gaussian-distributed multiplicative factor to be applied on this array, with the maximum (1) in the middle points and the minimum (something &lt;1) in the 4 corners. I came up with this code as of now</p>\n\n<pre><code>QualityOfView(projectedRays[p1, p2]) * DeformCameraLens(p1, p2, projectedRays);\n</code></pre>\n\n<p>With</p>\n\n<pre><code>private float DeformCameraLens(int index1, int index2, Vector3[,] projectedRaysArray)\n{\n    int max1 = projectedRaysArray.GetLength(0);\n    int max2 = projectedRaysArray.GetLength(1);\n\n    float percentPerIndexPoint1 = (1 - maxQOVPercentDeformation) / (max1 / 2f);\n    float percentPerIndexPoint2 = (1 - maxQOVPercentDeformation) / (max2 / 2f);\n\n    float percent1 = 1 - percentPerIndexPoint1 * Mathf.Abs(index1 - (max1) / 2f);\n    float percent2 = 1 - percentPerIndexPoint2 * Mathf.Abs(index2 - (max2) / 2f);\n\n    return (percent1 + percent2) / 2f;\n</code></pre>\n\n<p>Which is obviously a placeholder and is just a cone (I think, right?) with the vertex in the middle of my array.</p>\n\n<p>I have little to no clue on how to edit DeformCameraLens to make it return a gaussian-distributed value, thus here lies my question.</p>\n\n<p>How would DeformCameraLens need to be implemented?</p>\n"}, {"tags": ["c#", "unity3d"], "comments": [{"owner": {"reputation": 1518, "user_id": 2434628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f694c7757c0085ac1f0ed88d960ff657?s=128&d=identicon&r=PG", "display_name": "AresCaelum", "link": "https://stackoverflow.com/users/2434628/arescaelum"}, "edited": false, "score": 0, "creation_date": 1547074780, "post_id": 54119578, "comment_id": 95071777, "body": "Yes dont increment it 1 value at a time get the difference between the 2 values, figure how fast you want him to count it, and calculate how fast it needs to count in that time and increment it.  For example, you want to to take 5 seconds difference of 100 points will in rent at a rate for 100/5 &#215; time.deltaTime."}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 5455191, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/SVzoD.jpg?s=128&g=1", "display_name": "wasicool2", "link": "https://stackoverflow.com/users/5455191/wasicool2"}, "edited": false, "score": 0, "creation_date": 1547079085, "post_id": 54119745, "comment_id": 95072776, "body": "Thank you for your suggestion, however I&#39;m a little confused. Would it be possible for you to show me an example? Thank you again!"}, {"owner": {"reputation": 409, "user_id": 10023317, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x8s-6L2oXzo/AAAAAAAAAAI/AAAAAAAADtA/_Oln0NvBiDI/photo.jpg?sz=128", "display_name": "Eric Bishop", "link": "https://stackoverflow.com/users/10023317/eric-bishop"}, "reply_to_user": {"reputation": 159, "user_id": 5455191, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/SVzoD.jpg?s=128&g=1", "display_name": "wasicool2", "link": "https://stackoverflow.com/users/5455191/wasicool2"}, "edited": false, "score": 0, "creation_date": 1547080186, "post_id": 54119745, "comment_id": 95073077, "body": "Sure! No problem! In your code, it has <code>i++</code>. To make it go faster, change it to something like <code>i += 10</code> or any other number really."}], "tags": [], "owner": {"reputation": 409, "user_id": 10023317, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x8s-6L2oXzo/AAAAAAAAAAI/AAAAAAAADtA/_Oln0NvBiDI/photo.jpg?sz=128", "display_name": "Eric Bishop", "link": "https://stackoverflow.com/users/10023317/eric-bishop"}, "is_accepted": false, "score": 0, "last_activity_date": 1547075366, "creation_date": 1547075366, "answer_id": 54119745, "question_id": 54119578, "link": "https://stackoverflow.com/questions/54119578/unity3d-speed-up-highscore-count-up/54119745#54119745", "title": "Unity3D: Speed up highscore count up", "body": "<p>The reason it isn't going up very fast is because this code is in an <code>Update</code> function, which means that it will be called every frame of the game. So, the number will increase once per frame, which means the lower the frames per second, the more time it will take to reach the highscore. For instance, if the game was running at 20 fps, and the highscore was 400, it would take 20 seconds to reach the highscore. This also means that the speed of the animation will vary from system to system. I would try incrementing the number by a larger amount to speed up the animation,</p>\n"}, {"comments": [{"owner": {"reputation": 159, "user_id": 5455191, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/SVzoD.jpg?s=128&g=1", "display_name": "wasicool2", "link": "https://stackoverflow.com/users/5455191/wasicool2"}, "edited": false, "score": 1, "creation_date": 1547081141, "post_id": 54120307, "comment_id": 95073268, "body": "THANK YOU very much I appreciate the assistance and information, it was very helpful! Thank you again, I really appreciate it! :)"}, {"owner": {"reputation": 858, "user_id": 4644010, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/QsfpN.jpg?s=128&g=1", "display_name": "Micha\u0142 Lipa", "link": "https://stackoverflow.com/users/4644010/micha%c5%82-lipa"}, "edited": false, "score": 0, "creation_date": 1578218153, "post_id": 54120307, "comment_id": 105361658, "body": "@empty could you check topic I created based on your answear? <a href=\"https://stackoverflow.com/questions/59598597/incrementing-score-value-throught-time-unity-c-sharp\" title=\"incrementing score value throught time unity c sharp\">stackoverflow.com/questions/59598597/&hellip;</a>"}], "tags": [], "owner": {"reputation": 463, "user_id": 10892554, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KduMVEJMVBI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcatx7149IKUHNDbnv0OdAjShlhAHg/mo/photo.jpg?sz=128", "display_name": "Empty", "link": "https://stackoverflow.com/users/10892554/empty"}, "is_accepted": true, "score": 2, "last_activity_date": 1547079138, "creation_date": 1547079138, "answer_id": 54120307, "question_id": 54119578, "link": "https://stackoverflow.com/questions/54119578/unity3d-speed-up-highscore-count-up/54120307#54120307", "title": "Unity3D: Speed up highscore count up", "body": "<p>This is an ideal place to use a lerp (linear interpolation)</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> public float t = 0.0f; //renamed i to t, for convention (i is for loops, t is for lerping or easing function \"time\" variables\r\n public Text highScore;\r\n public float highScoreAnimationLength = 2.0f; //how long in seconds it should take to go from score 0 to the players final score\r\n\r\n void Update () {\r\n  if(playerDeath == false) {\r\n     t = 0.0f;\r\n  }  \r\n   else if (playerDeath == true) {\r\n     t = Mathf.MoveTowards(t, 1.0f, Time.deltaTime/highScoreAnimationLength); //move t closer to 1.0, we use Time.deltaTime to make it move in \"realtime\" rather than frame time, MoveTowards will always stop at the target value, so we never go over it.\r\n     int displayedScore = (int)Mathf.Lerp(0, highScore, t); //Here we use a lerp to calculate what number to display, we then cast it to an int to display it correctly (no decimals)\r\n    highCoinText.text = \"\" + displayedScore.ToString ();\r\n  }\r\n }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here we use 2 handy functions, MoveTowards and Lerp, they're similar and both very handy.</p>\n\n<p>MoveTowards takes a number as it's first argument, a target as it's 2nd, and a \"max distance\" as it's third, it will move the first argument towards the target argument, but only add or subtract up to the third argument in order to reach it. MoveTowards will never go over the target. You can think of it as MoveTowards(from, to, amount)</p>\n\n<p>Lerp takes similar arguments (Lerp(from, to, t) but behaves differently. It takes the same from and to arguments, but the third argument is where it should place it's result linearly. You can imagine a number line starting at \"from\" ending with \"to\" and the third argument \"t\" is how far to place it along that line, with 0 being exactly on \"from\", 1 being exactly on \"to\" and 0.5 being exactly in the middle.</p>\n\n<p>Here we use movetowards to increment our internal variable \"t\", which we're using as a timer to tick from 0 to 1, we use Time.deltaTime, which is essentially the duration of the current frame in seconds, to seperate our calculation from our framerate, meaning the process should be practically identical at 10fps, or 60fps. All we are doing is moving \"t\" from 0 to 1, over \"highScoreAnimationLength\" (2) seconds.</p>\n\n<p>We then use the result from t as our argument for Lerp, which means over those 2 seconds, we will linearly interpolate (in simpler terms, slide) between our initial score (0) and our target score (highScore).</p>\n\n<p>The advantages of doing it this way are multiple:</p>\n\n<ul>\n<li>It always takes 2 seconds, whether the high score is 10 or 100000</li>\n<li>It's not tied to framerate, so on every machine it will always take 2 seconds</li>\n<li>Our editor variable is in easily understood units, seconds. This makes it much more intuitive to tweak the value as you can easily predict and estimate how it will behave. (A common pitfall with things like this is for a variable to just be called something like \"speed\" and have no real world unit, so you have to edit by trial and error to get it right)</li>\n</ul>\n\n<p>Extra Credits: You can look into \"easing functions\" for more specific, fine tuned control over your animation. Lerp looks very stiff as it has no acceleration and deceleration, easing functions are essentially a way to Lerp but with a smoother motion. I've already made this fairly convoluted so I won't bog you down with even more info, but they're well worth looking into for extra polish.</p>\n"}], "owner": {"reputation": 159, "user_id": 5455191, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/SVzoD.jpg?s=128&g=1", "display_name": "wasicool2", "link": "https://stackoverflow.com/users/5455191/wasicool2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "accepted_answer_id": 54120307, "answer_count": 2, "score": 0, "last_activity_date": 1547079138, "creation_date": 1547074364, "question_id": 54119578, "link": "https://stackoverflow.com/questions/54119578/unity3d-speed-up-highscore-count-up", "title": "Unity3D: Speed up highscore count up", "body": "<p>I have a integer that holds the player's highscore and it is shown when the player dies in my game over panel. When the player gets a new highscore, I created a function to increase the int to make a cool highscore count up effect; it works, however it is not as fast as I'd hope it to be, especially if the player were to get a very high highscore, like for example : 400. Is there a way to make my highscore count up function much faster?  </p>\n\n<p>This is my code:</p>\n\n<pre><code> public int i;\n public Text highScore;\n\n void Update () {\n  if(playerDeath == false) {\n     i = 0;\n  }  \n   else if (playerDeath == true) {\n     i++;\n     if (i &gt;= PlayerPrefs.GetInt (\"Highest\", 0)) {\n         i = PlayerPrefs.GetInt (\"Highest\", 0);\n     }\n    highCoinText.text = \"\" + i.ToString ();\n  }\n }\n</code></pre>\n"}, {"tags": ["c#", "x509", "certificate-store"], "comments": [{"owner": {"reputation": 2730, "user_id": 2265446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39Qa6.png?s=128&g=1", "display_name": "Cleptus", "link": "https://stackoverflow.com/users/2265446/cleptus"}, "edited": false, "score": 0, "creation_date": 1547074550, "post_id": 54119524, "comment_id": 95071706, "body": "A bit strange but maybe <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.storename?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">StoreName.AddressBook</a> matches your requirement. It says something about &quot;other users certificates&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 2730, "user_id": 2265446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/39Qa6.png?s=128&g=1", "display_name": "Cleptus", "link": "https://stackoverflow.com/users/2265446/cleptus"}, "edited": false, "score": 1, "creation_date": 1547075199, "post_id": 54119602, "comment_id": 95071888, "body": "As an alternative there is a X509Certificate2 ctor that admits the filename of the cert file"}], "tags": [], "owner": {"reputation": 2144, "user_id": 3485669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8zfUU.jpg?s=128&g=1", "display_name": "Forty3", "link": "https://stackoverflow.com/users/3485669/forty3"}, "is_accepted": false, "score": 1, "last_activity_date": 1547074472, "creation_date": 1547074472, "answer_id": 54119602, "question_id": 54119524, "link": "https://stackoverflow.com/questions/54119524/load-x509certificates-from-selected-folder/54119602#54119602", "title": "Load X509Certificates from selected folder", "body": "<p>Have a look at the reference for <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509certificate2.import?view=netframework-4.7.2#System_Security_Cryptography_X509Certificates_X509Certificate2_Import_System_String_\" rel=\"nofollow noreferrer\">X509Certificate2.Import</a>. This allows you load a certificate from the filesystem (among other methods). In this case, you would simply loop through the certificate files in your folder rather than opening the CertificateStore.</p>\n\n<pre><code>foreach (var file in Directory.GetFiles(yourFolder, \"*.cer\"))\n        {\n            var mCert = X509Certificate2.Import(file);\n\n            string email1 = mCert.GetNameInfo(X509NameType.SimpleName, false);\n            string stringAfterChar = email1.Substring(email1.IndexOf(\"-\") + 1);\n            string name = mCert.GetNameInfo(X509NameType.SimpleName, false);\n            string[] splitString = name.Split('-');\n\n            string namewithoutemail = splitString[0].Trim();\n\n            dt.Rows.Add(namewithoutemail , stringAfterChar,  mCert.NotBefore, mCert.GetExpirationDateString() , mCert.Thumbprint);\n        }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10431427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547074472, "creation_date": 1547074126, "question_id": 54119524, "link": "https://stackoverflow.com/questions/54119524/load-x509certificates-from-selected-folder", "title": "Load X509Certificates from selected folder", "body": "<p>Load X509 Certificates from Folder</p>\n\n<p>I'm using c#, and i need to load X509 certificates from a folder.I need to load files from folder to show in a table inside my encryption program.</p>\n\n<pre><code>public partial class Form1 : Form\n{\n    DataTable dt = new DataTable();\n    public Form1()\n    {\n        InitializeComponent();\n    }\n\n    private void Form1_Load(object sender, EventArgs e)\n    {\n        var store = new X509Store(StoreName.My, storeLocation: StoreLocation.LocalMachine);\n        store.Open(OpenFlags.ReadOnly);\n\n        DataColumn dc1 = new DataColumn(\"Name\", typeof(string));\n        DataColumn dc2 = new DataColumn(\"E-mail\", typeof(string));\n        DataColumn dc3 = new DataColumn(\"valid from\", typeof(string));\n        DataColumn dc4 = new DataColumn(\"Expiry Date\", typeof(string));\n        DataColumn dc5 = new DataColumn(\"ThumbPrint\", typeof(string));\n        dt.Columns.Add(dc1);\n        dt.Columns.Add(dc2);\n        dt.Columns.Add(dc3);\n        dt.Columns.Add(dc4);\n        dt.Columns.Add(dc5);\n\n        foreach (X509Certificate2 mCert in store.Certificates)\n        {\n            string email1 = mCert.GetNameInfo(X509NameType.SimpleName, false);\n            string stringAfterChar = email1.Substring(email1.IndexOf(\"-\") + 1);\n            string name = mCert.GetNameInfo(X509NameType.SimpleName, false);\n            string[] splitString = name.Split('-');\n\n            string namewithoutemail = splitString[0].Trim();\n\n            dt.Rows.Add(namewithoutemail , stringAfterChar,  mCert.NotBefore, mCert.GetExpirationDateString() , mCert.Thumbprint);\n        }\n\n        dataGridView1.DataSource = dt;\n\n    }\n</code></pre>\n\n<p>This is my code and actually I can load Certificates from CertificateStore but I want to load certificates from folder.Other thing i can do its create a special certificate store to my program but i think it's impossible.\nThanks for any help</p>\n"}, {"tags": ["c#", "json", "json.net", "ado.net", "deserialization"], "comments": [{"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 1, "creation_date": 1547093514, "post_id": 54119426, "comment_id": 95075673, "body": "You could validate your JSON using a <a href=\"https://stackoverflow.com/questions/tagged/jsonschema\">jsonschema</a>.   String max length is supported, see e.g. <a href=\"https://stackoverflow.com/q/10276928\">Use JSON.NET to generate JSON schema with extra attributes</a> or <a href=\"https://stackoverflow.com/q/47699237\">Possible to specify min/max length of a string in JSON schema (v4)?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 469685, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ae48c783e60012b3aa16c005366c907e?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/469685/steve"}, "edited": false, "score": 0, "creation_date": 1547153249, "post_id": 54135346, "comment_id": 95104840, "body": "Cool idea.. do you know if this would support splitting the results into valid and invalid lists of objects? Ergo.. could I write it in such a way that I would be able to get a list of objects that passes the MaxLength critieria and a seperate list of objects that doesn&#39;t pass the criteria?"}, {"owner": {"reputation": 108943, "user_id": 10263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e51Ks.jpg?s=128&g=1", "display_name": "Brian Rogers", "link": "https://stackoverflow.com/users/10263/brian-rogers"}, "reply_to_user": {"reputation": 467, "user_id": 469685, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ae48c783e60012b3aa16c005366c907e?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/469685/steve"}, "edited": false, "score": 0, "creation_date": 1547156286, "post_id": 54135346, "comment_id": 95106085, "body": "No, you would not be able to split it into two lists during the deserialization process; that&#39;s not how deserialization works. You could potentially make it write to a log or maybe add an entry to a dictionary somewhere which indicates that the length truncation was triggered for a particular property/object; then you could split things up based on this information post-deserialization. But now it sounds like you are really looking for more of a validation solution rather than just truncation.  In that case, I would look at schema validation as suggested by @dbc in the comments."}], "tags": [], "owner": {"reputation": 108943, "user_id": 10263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e51Ks.jpg?s=128&g=1", "display_name": "Brian Rogers", "link": "https://stackoverflow.com/users/10263/brian-rogers"}, "is_accepted": true, "score": 3, "last_activity_date": 1547147708, "last_edit_date": 1547147708, "creation_date": 1547147082, "answer_id": 54135346, "question_id": 54119426, "link": "https://stackoverflow.com/questions/54119426/string-truncation-during-json-deserialization-and-ado-persistance/54135346#54135346", "title": "String Truncation during Json Deserialization and ADO Persistance", "body": "<p>Json.Net does not have built-in string truncation capabilities, but you could use a custom <a href=\"https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_IContractResolver.htm\" rel=\"nofollow noreferrer\"><code>ContractResolver</code></a> in combination with a custom <a href=\"https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Serialization_IValueProvider.htm\" rel=\"nofollow noreferrer\"><code>ValueProvider</code></a> to do what you want.  The <code>ContractResolver</code> would look for string properties in all of your classes and apply the <code>ValueProvider</code> to them, while the <code>ValueProvider</code> would do the actual truncating during deserialization.  You could make the resolver use a default max length of 300 (or whatever), but also look for any <code>[MaxLength]</code> attributes (from System.ComponentModel.DataAnnotations) you may have applied to your string properties and use that length instead as an override.  So that would handle the length 4000 case.  </p>\n\n<p>Here is the code you would need:</p>\n\n<pre><code>public class StringTruncatingPropertyResolver : DefaultContractResolver\n{\n    public int DefaultMaxLength { get; private set; }\n\n    public StringTruncatingPropertyResolver(int defaultMaxLength)\n    {\n        DefaultMaxLength = defaultMaxLength;\n    }\n\n    protected override IList&lt;JsonProperty&gt; CreateProperties(Type type, MemberSerialization memberSerialization)\n    {\n        IList&lt;JsonProperty&gt; props = base.CreateProperties(type, memberSerialization);\n\n        // Apply a StringTruncatingValueProvider to all string properties\n        foreach (JsonProperty prop in props.Where(p =&gt; p.PropertyType == typeof(string)))\n        {\n            var attr = prop.AttributeProvider\n                           .GetAttributes(true)\n                           .OfType&lt;MaxLengthAttribute&gt;()\n                           .FirstOrDefault();\n            int maxLength = attr != null ? attr.Length : DefaultMaxLength;\n            prop.ValueProvider = new StringTruncatingValueProvider(prop.ValueProvider, maxLength);\n        }\n\n        return props;\n    }\n\n    class StringTruncatingValueProvider : IValueProvider\n    {\n        private IValueProvider InnerValueProvider { get; set; }\n        private int MaxLength { get; set; }\n\n        public StringTruncatingValueProvider(IValueProvider innerValueProvider, int maxLength)\n        {\n            InnerValueProvider = innerValueProvider;\n            MaxLength = maxLength;\n        }\n\n        // GetValue is called by Json.Net during serialization.\n        // The target parameter has the object from which to read the string;\n        // the return value is a string that gets written to the JSON.\n        public object GetValue(object target)\n        {\n            return InnerValueProvider.GetValue(target);\n        }\n\n        // SetValue gets called by Json.Net during deserialization.\n        // The value parameter has the string value read from the JSON;\n        // target is the object on which to set the (possibly truncated) value.\n        public void SetValue(object target, object value)\n        {\n            string s = (string)value;\n            if (s != null &amp;&amp; s.Length &gt; MaxLength)\n            {\n                s = s.Substring(0, MaxLength);\n            }\n            InnerValueProvider.SetValue(target, s);\n        }\n    }\n}\n</code></pre>\n\n<p>To use the resolver, add it to an instance of <code>JsonSerializerSettings</code> and pass the settings to <code>JsonConvert.DeserializeObject</code> like this:</p>\n\n<pre><code>var settings = new JsonSerializerSettings\n{\n    ContractResolver = new StringTruncatingPropertyResolver(300)\n};\nvar foo = JsonConvert.DeserializeObject&lt;Foo&gt;(json, settings);\n</code></pre>\n\n<p>Here is a working demo:  <a href=\"https://dotnetfiddle.net/YOGsP5\" rel=\"nofollow noreferrer\">https://dotnetfiddle.net/YOGsP5</a></p>\n"}], "owner": {"reputation": 467, "user_id": 469685, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ae48c783e60012b3aa16c005366c907e?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/469685/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 0, "accepted_answer_id": 54135346, "answer_count": 1, "score": 2, "last_activity_date": 1547148634, "creation_date": 1547073454, "last_edit_date": 1592644375, "question_id": 54119426, "link": "https://stackoverflow.com/questions/54119426/string-truncation-during-json-deserialization-and-ado-persistance", "title": "String Truncation during Json Deserialization and ADO Persistance", "body": "<p>I am writing a console app that will hit a REST api, deserialize the JSON to a C# model and then persist that model using ADO into a db table.</p>\n<p>First issue is that during the first run of the app we found that one of the JSON properties exceeded the column definition of <code>nvarchar(300)</code>.  We increased that column to <code>nvarchar(4000)</code>, but I have no idea if any of the other dozen string properties <em>might</em> exceed the default of 300 I gave them.</p>\n<p>FYI, the SQL error I got was:</p>\n<blockquote>\n<p>String or binary data would be truncated.</p>\n<p>The data for table-valued parameter &quot;@Items&quot; doesn't conform to the table type of the parameter. SQL Server error is: 8152, state: 10</p>\n<p>The statement has been terminated.</p>\n</blockquote>\n<p>...which makes sense if I was passing in a string with length 500 to an <code>nvarchar(300)</code></p>\n<p>So my desire: during deserialization or model creation in C# I would like to truncate the string properties/fields and give them a max length before I hit my persistence code so that I can ensure with 100% confidence that my fields will never exceed the nvarchar lengths and will never trigger the 'truncation error'.</p>\n<p>I tried using System.ComponentModel.DataAnnotations and <code>[MaxLength(4000)]</code>, but that seemed only for MVC and input validation during form POSTing.</p>\n<p>I thought about making backing fields with custom setters, but that means having twice the lines of code in each of my entities. I have 9 entities and each probably has 2 dozen strings that I want to configure/truncate.</p>\n<p>So question: is there any fancy way to truncate strings using some sort of NewtonSoft data annotation or a C# data annotation? Also, is there a magic way to avoid having a bazillion back fields? Or should I just make a custom string class and inherit from String that has a max length property?</p>\n"}, {"tags": ["c#", "json", "xamarin.mac"], "comments": [{"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 0, "creation_date": 1547083980, "post_id": 54119398, "comment_id": 95073793, "body": "Also, I notice that, in your setter, you are catching and silently swallowing exceptions.  Are you sure that this isn&#39;t masking some sort of error?  See <a href=\"https://stackoverflow.com/q/1742940/3744182\">Why not catch general Exceptions</a>."}, {"owner": {"reputation": 33, "user_id": 2533581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yclB.jpg?s=128&g=1", "display_name": "kanaloa", "link": "https://stackoverflow.com/users/2533581/kanaloa"}, "edited": false, "score": 0, "creation_date": 1547094086, "post_id": 54119398, "comment_id": 95075779, "body": "Hey dbc, I chose not to catch exceptions in the model because the xcode control calls change events on every keystroke. So when the user tries to update a date field using the databound Outline View there&#39;s an exception on every keystroke until the string has enough characters to convert the value to DateTime. Ideally I&#39;d rather use an event that&#39;s called on end edit like good old .net DataGrid. But I haven&#39;t found the equivalent of that in my short time with xamarin.mac so far."}, {"owner": {"reputation": 33, "user_id": 2533581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yclB.jpg?s=128&g=1", "display_name": "kanaloa", "link": "https://stackoverflow.com/users/2533581/kanaloa"}, "edited": false, "score": 0, "creation_date": 1547094310, "post_id": 54119398, "comment_id": 95075822, "body": "I also get the same problem when trying deserialze the much simpler SimpleContact class, so I don&#39;t think the silenced exceptions in the full class are affecting the deserialization. I&#39;ll edit the question and post the full exception."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 2533581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yclB.jpg?s=128&g=1", "display_name": "kanaloa", "link": "https://stackoverflow.com/users/2533581/kanaloa"}, "edited": false, "score": 0, "creation_date": 1547104514, "post_id": 54120080, "comment_id": 95078593, "body": "Thanks Evgeny! You inspired my solution. I&#39;ve never seen get &amp; set methods like yours, looks super cool. I couldn&#39;t figure out how to use those, how do they work?"}], "tags": [], "owner": {"reputation": 26, "user_id": 10892401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ps7QL.jpg?s=128&g=1", "display_name": "Evgeny Nazarov", "link": "https://stackoverflow.com/users/10892401/evgeny-nazarov"}, "is_accepted": true, "score": 1, "last_activity_date": 1547077898, "last_edit_date": 1547077898, "creation_date": 1547077536, "answer_id": 54120080, "question_id": 54119398, "link": "https://stackoverflow.com/questions/54119398/malloc-error-for-object-pointer-being-freed-was-not-allocated-during-json-d/54120080#54120080", "title": "malloc: *** error for object pointer being freed was not allocated during JSON deserializing", "body": "<p>It is always better to stick with the plain DTO (Data Transfer Object) when serializing/deserializing data which are POD (Plain Old Data, i. e. contains only get/set properties of fields with no business logic associated).</p>\n\n<p>In that sense your ContactRoot type is POD, however Contact type is not POD (due to inheritance of NSObject). For this scenario I would introduce a separate DTO type for Contact which would follow POD standard. You could create an alternative property for contacts list and have a play with JsonIgnore and JsonProperty attributes to mimic desiried behavior.</p>\n\n<p>Quick snippet:</p>\n\n<pre><code>public class ContactDto\n{\n    /* List relevant properties here */\n}\n\npublic class ContactRoot\n{\n    [JsonIgnore] // Do not serialize this\n    public List&lt;Contact&gt; Contacts { get; set; }\n\n    [JsonProperty(Propertyname = nameof(Contacts)]\n    public List&lt;ContactDto&gt; SerializableContacts { \n        get =&gt; Contacts?.Select(x =&gt; /* data extraction */).ToList();\n        set =&gt; Contacts = value?.Select(x =&gt; /* data extraction */)?.ToList();\n    }\n}\n</code></pre>\n\n<p>Addition: it appears that for CLR languages POD is called <a href=\"https://en.wikipedia.org/wiki/Plain_old_CLR_object\" rel=\"nofollow noreferrer\">POCO</a></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 2533581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yclB.jpg?s=128&g=1", "display_name": "kanaloa", "link": "https://stackoverflow.com/users/2533581/kanaloa"}, "is_accepted": false, "score": 1, "last_activity_date": 1547104318, "creation_date": 1547104318, "answer_id": 54123535, "question_id": 54119398, "link": "https://stackoverflow.com/questions/54119398/malloc-error-for-object-pointer-being-freed-was-not-allocated-during-json-d/54123535#54123535", "title": "malloc: *** error for object pointer being freed was not allocated during JSON deserializing", "body": "<p>OK, thanks to Evengy Nazarov who pointed me in the right direction, I have a working solution. </p>\n\n<p>First, here's a POCO verson of my simplified class:</p>\n\n<pre><code>public class ContactDto\n{\n    private string _fullname = String.Empty;\n\n    public int id { get; set; }\n\n    public string first { get; set; }\n\n    public string last { get; set; }\n\n    [JsonIgnore]\n    public string fullname {\n        get { return this.first + \" \" + this.last; }\n        set { _fullname = value; }\n    }\n}\n</code></pre>\n\n<p>Notice no NSObject inheritance or property decorations (other than <code>[JsonIgnore]</code>.</p>\n\n<p>Changed ContactRoot to this:</p>\n\n<pre><code>public class ContactRoot\n{\n    [JsonIgnore] // Do not serialize this\n    public List&lt;SimpleContact&gt; SimpleContacts { get; set; }\n\n    [JsonProperty(PropertyName = nameof(Contacts))]\n    public List&lt;ContactDto&gt; SerializableContacts { get; set; }\n}\n</code></pre>\n\n<p>Then I created conversion methods to convert between the DTO and the NSObject versions using System.Reflection:</p>\n\n<pre><code>public ContactDto ConvertToDto(SimpleContact simpleContact)\n    {\n        var contactdto = new ContactDto();\n        foreach (PropertyInfo prop in simpleContact.GetType().GetProperties().Where(t =&gt; t.DeclaringType == typeof(SimpleContact)))\n        {\n            var value = prop.GetValue(simpleContact);\n            if (value != null)\n            {\n                var prop2 = contactdto.GetType().GetProperty(prop.Name);\n                prop2.SetValue(contactdto, value);\n            }\n        }\n        return contactdto;\n    }\npublic SimpleContact ConvertToContact(ContactDto contactDto)\n    {\n        var simplecontact = new SimpleContact();\n        foreach (PropertyInfo prop in contactDto.GetType().GetProperties())\n        {\n            var value = prop.GetValue(contactDto);\n            if (value != null)\n            {\n                var prop2 = simplecontact.GetType().GetProperty(prop.Name);\n                prop2.SetValue(simplecontact, value);\n            }\n        }\n        return simplecontact;\n    }\n</code></pre>\n\n<p>Then my new Serialize method:</p>\n\n<pre><code>var contactroot = new ContactRoot\n            {\n                SimpleContacts = DataSource.SimpleContacts,\n                SerializableContacts = new List&lt;ContactDto&gt;()\n            };\n\n            foreach (var simplecontact in contactroot.SimpleContacts)\n            {\n                contactroot.SerializableContacts.Add(ConvertToDto(simplecontact));\n            }\n\n            var desktop = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);\n            var filename = Path.Combine(desktop, \"WBAddon.json\");\n            if (File.Exists(filename))\n            {\n                File.Delete(filename);\n            }\n\n            using (StreamWriter file = File.CreateText(filename))\n            {\n                var serializer = new JsonSerializer()\n                {\n                    Formatting = Formatting.Indented,\n                    TypeNameHandling = TypeNameHandling.Auto,\n                    TypeNameAssemblyFormatHandling = TypeNameAssemblyFormatHandling.Simple,\n                    ReferenceLoopHandling = ReferenceLoopHandling.Ignore\n                };\n                await Task.Run(() =&gt; serializer.Serialize(file, contactroot));\n            }\n</code></pre>\n\n<p>And Deserialization:</p>\n\n<pre><code>var jsettings = new JsonSerializerSettings\n            {\n                Formatting = Formatting.Indented,\n                TypeNameHandling = TypeNameHandling.Auto,\n                TypeNameAssemblyFormatHandling = TypeNameAssemblyFormatHandling.Simple,\n                ReferenceLoopHandling = ReferenceLoopHandling.Ignore\n            };\n            string json = string.Empty;\n            using (StreamReader file = new StreamReader(filename))\n            {\n                json = file.ReadToEnd();\n\n            }\n\n            var contactroot = JsonConvert.DeserializeObject&lt;ContactRoot&gt;(json);\n            DataSource.SimpleContacts = new List&lt;SimpleContact&gt;();\n            foreach (var contactdto in contactroot.SerializableContacts)\n            {\n                DataSource.SimpleContacts.Add(ConvertToContact(contactdto));\n            }\n</code></pre>\n\n<p>Works like I hoped! Now I just need to create a dto version of my full Contact class with all 70+ properties.  There might be a better way but this gets the job done.</p>\n"}], "owner": {"reputation": 33, "user_id": 2533581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yclB.jpg?s=128&g=1", "display_name": "kanaloa", "link": "https://stackoverflow.com/users/2533581/kanaloa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 54120080, "answer_count": 2, "score": 1, "last_activity_date": 1547104318, "creation_date": 1547073304, "last_edit_date": 1547095021, "question_id": 54119398, "link": "https://stackoverflow.com/questions/54119398/malloc-error-for-object-pointer-being-freed-was-not-allocated-during-json-d", "title": "malloc: *** error for object pointer being freed was not allocated during JSON deserializing", "body": "<p>I'm trying to deserialize a JSON string into a List using C# in Visual Studio for Mac for an Xamarin.Mac project. </p>\n\n<p>I can serialize without any problem with this:</p>\n\n<pre><code>using (StreamWriter file = File.CreateText(filename))\n            {\n                var serializer = new JsonSerializer()\n                {\n                    Formatting = Formatting.Indented,\n                    TypeNameHandling = TypeNameHandling.Auto,\n                    TypeNameAssemblyFormatHandling = TypeNameAssemblyFormatHandling.Simple,\n                    ReferenceLoopHandling = ReferenceLoopHandling.Ignore\n                };\n                await Task.Run(() =&gt; serializer.Serialize(file, contactroot));\n            }\n</code></pre>\n\n<p>But I get the error above when I try to deserialize using this:</p>\n\n<pre><code>var contacts = JsonConvert.DeserializeObject&lt;ContactRoot&gt;(json);\n</code></pre>\n\n<p>ContactRoot class:</p>\n\n<pre><code>public class ContactRoot\n{\n    public List&lt;Contact&gt; contacts { get; set; }\n}\n</code></pre>\n\n<p>The Contact class inherits the NSObject class as required for binding to controls in the Mac app. I'd include that too but there's over 70 properties with multiple attributes. Here's a couple of snippets from that class:</p>\n\n<pre><code>[Register(\"Contact\")]\npublic class Contact : NSObject\n</code></pre>\n\n<p>... and a lot of properties like this:</p>\n\n<pre><code>public DateTime? updated_at { get; set; }\n\n    [Export(\"updatedString\"), Display(Name = \"Updated Date\"), Category(\"Misc\"), Description(\"3\"), DefaultValue(TypeOfValue.DateTime)]\n    public string updatedString\n    {\n        get {\n            if (this.updated_at.HasValue){\n                return this.updated_at.Value.ToString();\n            } else{\n                return string.Empty;\n            }\n        }\n        set\n        {\n            WillChangeValue(\"updatedString\");\n            try\n            {\n                if (!String.IsNullOrEmpty(value)) this.updated_at = Convert.ToDateTime(value);\n            }\n            catch (Exception)\n            {\n            }\n            DidChangeValue(\"updatedString\");\n        }\n    }\n</code></pre>\n\n<p>I'm using DateTime? because the API source requires that, and since Xamarin data binding doesn't seem to handle nulls for int or DateTime I'm using a string property to do the conversion. That works fine when using the app, but not sure if that's contributing to the error when deserializing.\nI'm new to developing for Mac, so I've probably missed something.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Wow thanks for the quick responses!  Prior to seeing any comments I tried a simpler class but got the same result:</p>\n\n<pre><code>[Register(\"SimpleContact\")]\npublic class SimpleContact : NSObject\n{\n    int _id = 0;\n    string _first = String.Empty;\n    string _last = String.Empty;\n\n    [Export(\"id\")]\n    public int id {\n        get { return _id; }\n        set {\n            WillChangeValue(\"id\");\n            _id = value;\n            DidChangeValue(\"id\");\n        }\n    }\n\n    [Export(\"first\")]\n    public string first {\n        get { return _first; }\n        set {\n            WillChangeValue(\"first\");\n            _first = value;\n            DidChangeValue(\"first\");\n        }\n    }\n\n    [Export(\"last\")]\n    public string last\n    {\n        get { return _last; }\n        set\n        {\n            WillChangeValue(\"last\");\n            _last = value;\n            DidChangeValue(\"last\");\n        }\n    }\n\n    [Export(\"fullname\")]\n    public string fullname\n    {\n        get { return this.first + \" \" + this.last; }\n    }\n\n    public SimpleContact()\n    {}\n\n    public SimpleContact(int id, string first, string last)\n    {\n        this.id = id;\n        this.first = first;\n        this.last = last;\n    }\n\n    public override string ToString()\n    {\n        return this.fullname;\n    }\n}\n</code></pre>\n\n<p>I will try the POCO approach next and post the results. Thank you so much!</p>\n\n<p><strong>EDIT</strong>\nHere's what looks like the meat of the exception. I don't think the rest of the exception would be of any use:</p>\n\n<pre><code>Crashed Thread:        0  tid_307  Dispatch queue: com.apple.main-thread\n\nException Type:        EXC_CRASH (SIGABRT)\nException Codes:       0x0000000000000000, 0x0000000000000000\nException Note:        EXC_CORPSE_NOTIFY\n\nExternal Modification Warnings:\nDebugger attached to process.\n\nApplication Specific Information:\nabort() called\nWealthBox Addon(6016,0x11d9ae5c0) malloc: *** error for object 0x7fff7f110880: pointer being freed was not allocated\n\n\nThread 0 Crashed:: tid_307  Dispatch queue: com.apple.main-thread\n0   libsystem_kernel.dylib          0x00007fff7f08223e __pthread_kill + 10\n1   libsystem_pthread.dylib         0x00007fff7f138c1c pthread_kill + 285\n2   libsystem_c.dylib               0x00007fff7efeb268 __abort + 144\n3   libsystem_c.dylib               0x00007fff7efeb1d8 abort + 142\n4   libsystem_malloc.dylib          0x00007fff7f0fa6e2 malloc_vreport + 545\n5   libsystem_malloc.dylib          0x00007fff7f0fa4a3 malloc_report + 152\n6   libsystem_malloc.dylib          0x00007fff7f0f2aff malloc_set_zone_name + 47\n7   ???                             0x00000001162ad420 0 + 4666872864\n8   ???                             0x000000011616c6a3 0 + 4665558691\n9   ???                             0x0000000116275739 0 + 4666644281\n10  ???                             0x0000000116265443 0 + 4666577987\n11  ???                             0x000000011625cbd3 0 + 4666543059\n12  ???                             0x000000011618480b 0 + 4665657355\n13  ???                             0x00000001162755bb 0 + 4666643899\n14  ???                             0x0000000116265443 0 + 4666577987\n15  ???                             0x000000011625cbd3 0 + 4666543059\n16  ???                             0x000000011618480b 0 + 4665657355\n17  ???                             0x000000011618885b 0 + 4665673819\n18  ???                             0x0000000116185c7b 0 + 4665662587\n19  ???                             0x000000011618486b 0 + 4665657451\n20  ???                             0x000000011609f303 0 + 4664718083\n21  ???                             0x000000011609cc03 0 + 4664708099\n22  ???                             0x000000011609c84e 0 + 4664707150\n23  ???                             0x0000000116095663 0 + 4664677987\n24  ???                             0x0000000116087a33 0 + 4664621619\n25  Browning-Financial.WealthBox-Addon  0x000000010edc5593 mono_jit_runtime_invoke + 1443 (mini-runtime.c:2806)\n26  Browning-Financial.WealthBox-Addon  0x000000010eeaee4f mono_runtime_invoke_checked + 127 (object.c:2887)\n27  Browning-Financial.WealthBox-Addon  0x000000010eeb36fc mono_runtime_invoke + 76 (object.c:2941)\n28  Browning-Financial.WealthBox-Addon  0x000000010ecadaa2 xamarin_invoke_trampoline + 6018 (trampolines-invoke.m:456)\n29  Browning-Financial.WealthBox-Addon  0x000000010ecaec7d xamarin_arch_trampoline + 189 (trampolines-x86_64.m:547)\n30  Browning-Financial.WealthBox-Addon  0x000000010ecb00b1 xamarin_x86_64_common_trampoline + 110\n31  com.apple.AppKit                0x00007fff4f3deb5a -[NSViewController _sendViewDidLoad] + 97\n32  com.apple.AppKit                0x00007fff4f3dbeb5 _noteLoadCompletionForObject + 645\n33  com.apple.AppKit                0x00007fff4f24d99f -[NSIBObjectData nibInstantiateWithOwner:options:topLevelObjects:] + 2086\n34  com.apple.AppKit                0x00007fff4f3e3114 -[NSNib _instantiateNibWithExternalNameTable:options:] + 679\n35  com.apple.AppKit                0x00007fff4f3e2d70 -[NSNib _instantiateWithOwner:options:topLevelObjects:] + 136\n36  com.apple.AppKit                0x00007fff4f3e1fdc -[NSViewController loadView] + 343\n37  com.apple.AppKit                0x00007fff4f3ddb60 -[NSViewController _loadViewIfRequired] + 75\n38  com.apple.AppKit                0x00007fff4f3ddacb -[NSViewController view] + 30\n39  com.apple.AppKit                0x00007fff4f4d01da -[NSWindow _contentViewControllerChanged] + 109\n40  com.apple.Foundation            0x00007fff540c7450 -[NSObject(NSKeyValueCoding) setValue:forKey:] + 331\n41  com.apple.AppKit                0x00007fff4f3da987 -[NSWindow setValue:forKey:] + 111\n42  com.apple.AppKit                0x00007fff4f32ce0c -[NSIBUserDefinedRuntimeAttributesConnector establishConnection] + 637\n43  com.apple.AppKit                0x00007fff4f24d739 -[NSIBObjectData nibInstantiateWithOwner:options:topLevelObjects:] + 1472\n44  com.apple.AppKit                0x00007fff4f3e3114 -[NSNib _instantiateNibWithExternalNameTable:options:] + 679\n45  com.apple.AppKit                0x00007fff4f3e2d70 -[NSNib _instantiateWithOwner:options:topLevelObjects:] + 136\n46  com.apple.AppKit                0x00007fff4fada64c -[NSStoryboard instantiateControllerWithIdentifier:] + 236\n47  com.apple.AppKit                0x00007fff4f23e855 NSApplicationMain + 702\n48  ???                             0x00000001151c56b7 0 + 4649146039\n49  ???                             0x00000001151c53ab 0 + 4649145259\n50  Browning-Financial.WealthBox-Addon  0x000000010edc5593 mono_jit_runtime_invoke + 1443 (mini-runtime.c:2806)\n51  Browning-Financial.WealthBox-Addon  0x000000010eeaee4f mono_runtime_invoke_checked + 127 (object.c:2887)\n52  Browning-Financial.WealthBox-Addon  0x000000010eeb5c2e mono_runtime_exec_main_checked + 110 (object.c:4782)\n53  Browning-Financial.WealthBox-Addon  0x000000010ed1087f mono_jit_exec + 287 (driver.g.c:1210)\n54  Browning-Financial.WealthBox-Addon  0x000000010ed1384a mono_main + 11114 (driver.g.c:2418)\n55  Browning-Financial.WealthBox-Addon  0x000000010ecb0a8e xamarin_main + 1182 (launcher.m:661)\n56  Browning-Financial.WealthBox-Addon  0x000000010ecb1a04 main + 36 (launcher.m:679)\n57  libdyld.dylib                   0x00007fff7ef42ed9 start + 1\n\nThread 1:\n0   libsystem_pthread.dylib         0x00007fff7f1353f8 start_wqthread + 0\n1   ???                             0x0000000054485244 0 + 1414025796\n\nThread 2:: SGen worker\n0   libsystem_kernel.dylib          0x00007fff7f07f7de __psynch_cvwait + 10\n1   libsystem_pthread.dylib         0x00007fff7f139593 _pthread_cond_wait + 724\n2   Browning-Financial.WealthBox-Addon  0x000000010ef7416e thread_func + 558 (mono-os-mutex.h:173)\n3   libsystem_pthread.dylib         0x00007fff7f136305 _pthread_body + 126\n4   libsystem_pthread.dylib         0x00007fff7f13926f _pthread_start + 70\n5   libsystem_pthread.dylib         0x00007fff7f135415 thread_start + 13\n\nThread 3:: Finalizer\n0   libsystem_kernel.dylib          0x00007fff7f07c1b6 semaphore_wait_trap + 10\n1   Browning-Financial.WealthBox-Addon  0x000000010ee4c7a5 finalizer_thread + 293 (mono-os-semaphore.h:90)\n2   Browning-Financial.WealthBox-Addon  0x000000010ef01b50 start_wrapper + 704 (threads.c:1004)\n3   libsystem_pthread.dylib         0x00007fff7f136305 _pthread_body + 126\n4   libsystem_pthread.dylib         0x00007fff7f13926f _pthread_start + 70\n5   libsystem_pthread.dylib         0x00007fff7f135415 thread_start + 13\n\nThread 4:: Debugger agent\n0   libsystem_kernel.dylib          0x00007fff7f07f3e6 __recvfrom + 10\n1   Browning-Financial.WealthBox-Addon  0x000000010ed0515e socket_transport_recv + 78 (debugger-agent.c:1153)\n2   Browning-Financial.WealthBox-Addon  0x000000010ecf5a7c debugger_thread + 28588 (debugger-agent.c:1558)\n3   Browning-Financial.WealthBox-Addon  0x000000010ef01b50 start_wrapper + 704 (threads.c:1004)\n4   libsystem_pthread.dylib         0x00007fff7f136305 _pthread_body + 126\n5   libsystem_pthread.dylib         0x00007fff7f13926f _pthread_start + 70\n6   libsystem_pthread.dylib         0x00007fff7f135415 thread_start + 13\n\nThread 5:\n0   libsystem_pthread.dylib         0x00007fff7f1353f8 start_wqthread + 0\n1   ???                             0x0000000054485244 0 + 1414025796\n\nThread 0 crashed with X86 Thread State (64-bit):\n  rax: 0x0000000000000000  rbx: 0x000000011d9ae5c0  rcx: 0x00007ffee0f81a18  rdx: 0x0000000000000000\n  rdi: 0x0000000000000307  rsi: 0x0000000000000006  rbp: 0x00007ffee0f81a50  rsp: 0x00007ffee0f81a18\n   r8: 0x0000000000000000   r9: 0x0000000000989680  r10: 0x0000000000000000  r11: 0x0000000000000206\n  r12: 0x0000000000000307  r13: 0x000000011597b000  r14: 0x0000000000000006  r15: 0x000000000000002d\n  rip: 0x00007fff7f08223e  rfl: 0x0000000000000206  cr2: 0x00007fffb1d2c188\n\nLogical CPU:     0\nError Code:      0x02000148\nTrap Number:     133\n</code></pre>\n"}, {"tags": ["c#", "sql-server", "asp.net-mvc", "performance"], "comments": [{"owner": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 0, "creation_date": 1547076133, "post_id": 54119310, "comment_id": 95072113, "body": "What version of dotTrace are you using?"}, {"owner": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 0, "creation_date": 1547076205, "post_id": 54119310, "comment_id": 95072135, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50228854/85-5-of-native-code-when-profiling-with-jet-brains-dottrace\">~85.5% of native code when profiling with Jet Brain&#39;s dotTrace?</a>"}, {"owner": {"reputation": 61, "user_id": 1487138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BW3ig.jpg?s=128&g=1", "display_name": "Lane Campbell", "link": "https://stackoverflow.com/users/1487138/lane-campbell"}, "reply_to_user": {"reputation": 21694, "user_id": 34092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e78a68c6e32f9b8aeb47a968ebea9f?s=128&d=identicon&r=PG&f=1", "display_name": "mjwills", "link": "https://stackoverflow.com/users/34092/mjwills"}, "edited": false, "score": 0, "creation_date": 1547090439, "post_id": 54119310, "comment_id": 95075063, "body": "@mjwills I&#39;m using 2018.3"}], "owner": {"reputation": 61, "user_id": 1487138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BW3ig.jpg?s=128&g=1", "display_name": "Lane Campbell", "link": "https://stackoverflow.com/users/1487138/lane-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 346, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547072800, "creation_date": 1547072800, "question_id": 54119310, "link": "https://stackoverflow.com/questions/54119310/asp-net-mvc-performance-profiling-results-showing-97-of-bottlenecks-in-code-wi", "title": "Asp.net MVC performance profiling results showing 97% of bottlenecks in code &quot;without resolved functions&quot;", "body": "<p>I am trying to profile a moderately complex asp.net mvc web app with SQL Server backend. I'm seeing the same issue using both Ants Performance Profiler and dotTract Profiler. Both basically state that over 97% of the processing is occurring in \"Native stack traces without resolved functions\"</p>\n\n<p>We've done a load test on the app and I know that the part of workflow I used to run profile test has performance issues - it doesn't scale well and has errors at a fairly low load. I was hoping the profiling would allow me to see the specific methods causing performance issues, but there seems to maybe be something else going on.</p>\n\n<p>Any idea if maybe something else is going on here not directly related to my code?\n<a href=\"https://i.stack.imgur.com/R2DB4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R2DB4.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/t12EL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t12EL.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "asp.net-core", "jwt"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 899974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77be3b28cd3567ffa632d75aba0a2090?s=128&d=identicon&r=PG", "display_name": "ishahrier", "link": "https://stackoverflow.com/users/899974/ishahrier"}, "edited": false, "score": 0, "creation_date": 1547135067, "post_id": 54119574, "comment_id": 95095686, "body": "Wow very interesting approach. I am totally not familiar with this. But I will give it a go and if I get stuck I hope you would be kind enough to help further. In any case I am marking your response as the answer to the question. THANKS!"}, {"owner": {"reputation": 13310, "user_id": 49742, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/174bi.png?s=128&g=1", "display_name": "Subliminal Hash", "link": "https://stackoverflow.com/users/49742/subliminal-hash"}, "edited": false, "score": 0, "creation_date": 1592020916, "post_id": 54119574, "comment_id": 110281511, "body": "You shouldn&#39;t mark an answer as accepted unless it actually solves your problem. It will mislead future comers."}], "tags": [], "owner": {"reputation": 36, "user_id": 10892406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1rtBl.jpg?s=128&g=1", "display_name": "AquaSky", "link": "https://stackoverflow.com/users/10892406/aquasky"}, "is_accepted": true, "score": 1, "last_activity_date": 1555151476, "last_edit_date": 1555151476, "creation_date": 1547074342, "answer_id": 54119574, "question_id": 54119235, "link": "https://stackoverflow.com/questions/54119235/how-to-authorize-using-jwt-token/54119574#54119574", "title": "How to Authorize Using JWT token", "body": "<p>You can totally achieve what you want:</p>\n\n<pre><code>services\n    .AddAuthentication()\n    .AddJwtBearer(\"Firebase\", options =&gt;\n    {\n        options.Authority = \"https://securetoken.google.com/my-firebase-project\"\n        options.TokenValidationParameters = new TokenValidationParameters\n        {\n            ValidateIssuer = true,\n            ValidIssuer = \"my-firebase-project\"\n            ValidateAudience = true,\n            ValidAudience = \"my-firebase-project\"\n            ValidateLifetime = true\n        };\n    })\n    .AddJwtBearer(\"Custom\", options =&gt;\n    {\n        // Configuration for your custom\n        // JWT tokens here\n    });\n\nservices\n    .AddAuthorization(options =&gt;\n    {\n        options.DefaultPolicy = new AuthorizationPolicyBuilder()\n            .RequireAuthenticatedUser()\n            .AddAuthenticationSchemes(\"Firebase\", \"Custom\")\n            .Build();\n    });\n</code></pre>\n\n<p>Let's go through the differences between your code and that one.</p>\n\n<p>AddAuthentication has no parameter\nIf you set a default authentication scheme, then on every single request the authentication middleware will try to run the authentication handler associated with the default authentication scheme. Since we now have two opssible authentication schemes, there's no point in running one of them.</p>\n\n<p>Use another overload of AddJwtBearer\nEvery single AddXXX method to add an authentication has several overloads:</p>\n\n<p>One where the default authentication scheme associated with the authentication method is used, as you can see here for cookies authentication\nOne where you pass, in addition to the configuration of the options, the name of the authentication scheme, as on this overload\nNow, because you use the same authentication method twice but authentication schemes must be unique, you need to use the second overload.</p>\n\n<p>Update the default policy\nSince the requests won't be authenticated automatically anymore, putting [Authorize] attributes on some actions will result in the requests being rejected and an HTTP 401 will be issued.</p>\n\n<p>Since that's not what we want because we want to give the authentication handlers a chance to authenticate the request, we change the default policy of the authorization system by indicating both the Firebase and Custom authentication schemes should be tried to authenticate the request.</p>\n\n<p>That doesn't prevent you from being more restrictive on some actions; the [Authorize] attribute has an AuthenticationSchemes property that allows you to override which authentication schemes are valid.</p>\n\n<p>If you have more complex scenarios, you can make use of policy-based authorization. I find the official documentation is great.</p>\n\n<p>Let's imagine some actions are only available to JWT tokens issued by Firebase and must have a claim with a specific value; you could do it this way:</p>\n\n<pre><code>services\n    .AddAuthorization(options =&gt;\n    {\n        options.DefaultPolicy = new AuthorizationPolicyBuilder()\n            .RequireAuthenticatedUser()\n            .AddAuthenticationSchemes(\"Firebase\", \"Custom\")\n            .Build();\n\n        options.AddPolicy(\"FirebaseAdministrators\", new AuthorizationPolicyBuilder()\n            .RequireAuthenticatedUser()\n            .AddAuthenticationSchemes(\"Firebase\")\n            .RequireClaim(\"role\", \"admin\")\n            .Build());\n    });\n</code></pre>\n\n<p>You could then use <code>[Authorize(Policy = \"FirebaseAdministrators\")]</code> on some actions.</p>\n"}], "owner": {"reputation": 85, "user_id": 899974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77be3b28cd3567ffa632d75aba0a2090?s=128&d=identicon&r=PG", "display_name": "ishahrier", "link": "https://stackoverflow.com/users/899974/ishahrier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 1, "accepted_answer_id": 54119574, "answer_count": 1, "score": 0, "last_activity_date": 1555151476, "creation_date": 1547072379, "question_id": 54119235, "link": "https://stackoverflow.com/questions/54119235/how-to-authorize-using-jwt-token", "title": "How to Authorize Using JWT token", "body": "<p>I have a web api end point that give me JWT token. It is not an fully authorization server. It just can generate a JWT token.</p>\n\n<p>Now I have another web app written in aspnet core. In which inside the startup.cs I have added the following lines so that I can authorize using the JWT token I receive </p>\n\n<pre><code>            services.AddAuthentication(options =&gt;\n        {\n            options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n            options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n\n        }).AddJwtBearer(configureOptions =&gt;\n        {...});\n</code></pre>\n\n<p>I also have a login form (in the web app) where user enters username and password that I send to web api and get the token. And to protect any controller in the web app I just use the [Authorize] attribute.</p>\n\n<p>Everything works fine until the token expires. The token is very short lived but it does come with a refresh token. </p>\n\n<p>My question is that , how can I detect that the Token (from the web api) is now expired and I need to get a new one using the refresh token. I know that in javascript world I can intercept the http request and renew the token with the refresh token. </p>\n\n<p>But how do I do this in an aspnet core client app??</p>\n\n<p>(NOTE: I do not want to use any authentication server like IdentityServer4 etc)</p>\n\n<p>Thank you in advance!!</p>\n"}, {"tags": ["c#", "mysql", "database", "ssh", "ssh.net"], "comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1547106438, "post_id": 54118968, "comment_id": 95079411, "body": "If the server tends to drop connections, it can drop one even in a middle of some command. So you will have to deal with reconnect in any case."}, {"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1547436279, "post_id": 54118968, "comment_id": 95179594, "body": "How long does it take to setup+setup+forward+start+stop+disconnect?  Your second option is limiting MySQL&#39;s queries-per-second to that."}, {"owner": {"reputation": 624, "user_id": 3805124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4add9217b9f50ce20a47ff343ea5bb78?s=128&d=identicon&r=PG&f=1", "display_name": "PhilS", "link": "https://stackoverflow.com/users/3805124/phils"}, "edited": false, "score": 1, "creation_date": 1547546250, "post_id": 54118968, "comment_id": 95219717, "body": "Is there a reason why you are doing an SSH connection followed by sql commands as opposed to using the relavent database client library?  This whole approach (whether long running or single command) is likely to cause you issues when the connection has dropped and error handling which would be considerably easier to handle if you were using a database client.  Some issues that will be difficult to handle are if the connection drops, did the last SQL command complete successfully?  Even if the connection stays alive parsing the output stream for errors is going to be troublesome."}, {"owner": {"reputation": 624, "user_id": 3805124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4add9217b9f50ce20a47ff343ea5bb78?s=128&d=identicon&r=PG&f=1", "display_name": "PhilS", "link": "https://stackoverflow.com/users/3805124/phils"}, "edited": false, "score": 0, "creation_date": 1547546353, "post_id": 54118968, "comment_id": 95219761, "body": "What are your transactional requirements?  Is each of the sql commands atomic or do they need to be wrapped in a transaction, if so then you need the first long running connection approach."}], "answers": [{"tags": [], "owner": {"reputation": 18262, "user_id": 97754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/49d678618a22b1ae47b4395554eea6a9?s=128&d=identicon&r=PG", "display_name": "Margus", "link": "https://stackoverflow.com/users/97754/margus"}, "is_accepted": false, "score": 5, "last_activity_date": 1547898239, "last_edit_date": 1592644375, "creation_date": 1547898239, "answer_id": 54266713, "question_id": 54118968, "link": "https://stackoverflow.com/questions/54118968/c-ssh-net-one-ssh-connection-vs-multiple-ssh-connections/54266713#54266713", "title": "C# SSH.NET - one SSH connection vs multiple SSH connections", "body": "<h2>Part 1: Minimize the connection lifetime.</h2>\n<p>A common &quot;best practice&quot; with <strong>SQL connections</strong> is that you want to <strong>minimize the connection open time</strong> - this means that you open the connection just before you execute your query and close it just after that. Same applies to <strong>SSH connections</strong>.</p>\n<p>The dangling resources that you do not dispose of after their use have a name and they are referred to as <strong>memory leaks</strong>.</p>\n<h2>Part 2: Use the transactions to ensure DB state consistency</h2>\n<p>If a single statement in your SQL query transactions fails then the transaction will fail. You want to fail, roll back the state DB was in before the error ex: connection dropped and retry later.</p>\n<p>If you do not need logging of the error then you can use <code>set xact_abort on</code> before your transaction to rolls back automatically in case of error ex: timeout or drop the connection.</p>\n<p>For more info</p>\n<ul>\n<li><a href=\"http://www.informit.com/articles/article.aspx?p=29312\" rel=\"nofollow noreferrer\">http://www.informit.com/articles/article.aspx?p=29312</a></li>\n<li><a href=\"https://docs.microsoft.com/en-us/sql/t-sql/statements/set-xact-abort-transact-sql?view=sql-server-2017\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/sql/t-sql/statements/set-xact-abort-transact-sql?view=sql-server-2017</a></li>\n<li><a href=\"https://social.technet.microsoft.com/wiki/contents/articles/40078.sql-server-set-xact-abort-vs-try-catch.aspx\" rel=\"nofollow noreferrer\">https://social.technet.microsoft.com/wiki/contents/articles/40078.sql-server-set-xact-abort-vs-try-catch.aspx</a></li>\n</ul>\n<h2>Part 3: Create a retry policy</h2>\n<p>Generally, the best practice is that you do not want to avoid failure but instead accept it, fail fast and have a way to try again. What kind of policy you pick for the retry is up to you.</p>\n<p>If you want to do anything more complex than manual retry then I would recommend that you take a look at Rx observable (reactive extension) or Polly. It does have a bit of a learning curve, but you get used to it.</p>\n<pre><code> // Policy to retry 5 times, waiting {2, 4, 8, 16, 32} seconds between retries.\n var policy = Policy\n   .Handle&lt;SqlException&gt;()\n   .WaitAndRetry(5, retryAttempt =&gt; TimeSpan.FromSeconds(Math.Pow(2, retryAttempt)));\n\n policy.Execute(() =&gt; UpdateDatabase1(obj1));\n</code></pre>\n"}], "owner": {"reputation": 746, "user_id": 2181948, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7993a7ca7aabc103c6e91ad4370872e1?s=128&d=identicon&r=PG", "display_name": "user2181948", "link": "https://stackoverflow.com/users/2181948/user2181948"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1301, "favorite_count": 3, "answer_count": 1, "score": 1, "last_activity_date": 1547898239, "creation_date": 1547071044, "last_edit_date": 1547418871, "question_id": 54118968, "link": "https://stackoverflow.com/questions/54118968/c-ssh-net-one-ssh-connection-vs-multiple-ssh-connections", "title": "C# SSH.NET - one SSH connection vs multiple SSH connections", "body": "<p>I have a C# application which uses the <a href=\"https://github.com/sshnet/SSH.NET\" rel=\"nofollow noreferrer\">SSH.NET</a> library to connect to a server. The application executes SQL commands to the database through multiple methods.</p>\n\n<p>Is it better to have one long-running SSH connection that encompasses all SQL commands, eg:</p>\n\n<pre><code>using (var sshClient = getSshClient()))\n{\n    sshClient.Connect();\n\n    if (sshClient.IsConnected)\n    {\n        using (var portForward = setupPortForward()))\n        {\n            sshClient.AddForwardedPort(setupPortForward());\n            portForward.Start();\n\n            // Start SQL commands\n\n            if (!sshClient.IsConnected) {\n                sshClient.Connect();\n            }\n            else {\n                executeSQLCommand1();\n            }\n\n            if (!sshClient.IsConnected) {\n                sshClient.Connect();\n            }\n            else {\n                executeSQLCommand2();\n            }\n\n            // End SQL commands\n\n            portForward.Stop();\n            sshClient.Disconnect();\n        }\n    }\n}\n</code></pre>\n\n<p>Or to open an SSH connection at the start of each SQL statement?</p>\n\n<pre><code>using (var sshClient = setupSshClient()))\n{\n    sshClient.Connect();\n\n    if (sshClient.IsConnected)\n    {\n        using (var portForward = setupPortForward()))\n        {\n            sshClient.AddForwardedPort(portForward);\n            portForward.Start();\n\n            executeSQLCommand1();\n\n            portForward.Stop();\n            sshClient.Disconnect();\n        }\n    }\n}\n\nusing (var sshClient = setupSshClient()))\n{\n    sshClient.Connect();\n\n    if (sshClient.IsConnected)\n    {\n        using (var portForward = setupPortForward()))\n        {\n            sshClient.AddForwardedPort(portForward);\n            portForward.Start();\n\n            executeSQLCommand2();\n\n            portForward.Stop();\n            sshClient.Disconnect();\n        }\n    }\n}\n</code></pre>\n\n<p>The server is known to sometimes drop connections, so I imagine the second method is better in terms 'cleaner' logic for re-establishing a connection? Or are there any other better ways for reconnecting?</p>\n"}, {"tags": ["c#", "class", "generics", "dynamic", "ml.net"], "comments": [{"owner": {"reputation": 4184, "user_id": 7484766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b51b5dab8aebf8aa404ef48acee400c?s=128&d=identicon&r=PG", "display_name": "JohanP", "link": "https://stackoverflow.com/users/7484766/johanp"}, "edited": false, "score": 1, "creation_date": 1547071440, "post_id": 54118956, "comment_id": 95070683, "body": "I&#39;m not sure what exactly the question is. Is the problem that <code>method == null</code> i.e. the method can&#39;t be found on <code>TransformerChain</code>?"}, {"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 2, "creation_date": 1547071623, "post_id": 54118956, "comment_id": 95070750, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - clearly that <code>TransformerChain</code> (whatever it is) does not have a method you are looking for... But there is no way to know why without real sample."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1547071862, "post_id": 54118956, "comment_id": 95070835, "body": "What makes you think <code>TransformerChain</code> has a <i>MakePredictionFunction</i> method? (I assume this is the ML.NET <code>Microsoft.ML.Data.TransformerChain</code> type)"}, {"owner": {"reputation": 77, "user_id": 10475726, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wczN_92FY6U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXKLqcZ7E7isY-Fx6nRF2cCUwfj2g/mo/photo.jpg?sz=128", "display_name": "Paprika", "link": "https://stackoverflow.com/users/10475726/paprika"}, "edited": false, "score": 0, "creation_date": 1547071955, "post_id": 54118956, "comment_id": 95070875, "body": "Thanks for the reply, everyone. I&#39;ve added the full source."}, {"owner": {"reputation": 4184, "user_id": 7484766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b51b5dab8aebf8aa404ef48acee400c?s=128&d=identicon&r=PG", "display_name": "JohanP", "link": "https://stackoverflow.com/users/7484766/johanp"}, "edited": false, "score": 0, "creation_date": 1547071997, "post_id": 54118956, "comment_id": 95070896, "body": "From what I can gather, <code>MakePredictionFunction</code> sits on <code>model</code> and not <code>TransformerChain</code>?"}, {"owner": {"reputation": 36762, "user_id": 869621, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7ab9817b53b7e7b0e735528bc9c2372?s=128&d=identicon&r=PG", "display_name": "Kevin Gosse", "link": "https://stackoverflow.com/users/869621/kevin-gosse"}, "edited": false, "score": 0, "creation_date": 1547072247, "post_id": 54118956, "comment_id": 95070989, "body": "<code>MakePredictionFunction</code> is an extension method. Behind the scenes, it&#39;s a static function defined on <code>PredictionFunctionExtensions</code>"}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 1, "creation_date": 1547072287, "post_id": 54118956, "comment_id": 95071002, "body": "@Paprika You&#39;ve now shown tons of <i>irrelevant</i> code.  You should be showing a <i>minimal</i> reproducible example.  Show what needs to be there to reproduce the problem, no more."}, {"owner": {"reputation": 77, "user_id": 10475726, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wczN_92FY6U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXKLqcZ7E7isY-Fx6nRF2cCUwfj2g/mo/photo.jpg?sz=128", "display_name": "Paprika", "link": "https://stackoverflow.com/users/10475726/paprika"}, "edited": false, "score": 0, "creation_date": 1547072482, "post_id": 54118956, "comment_id": 95071078, "body": "I used TransformerChain because that&#39;s what Monodevelop says the model variable is. I also tried getting the type. <code>Type modelType = model.GetType();  MethodInfo method = modelType.GetMethod(&quot;MakePredictionFunction&quot;);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1547073805, "post_id": 54118956, "comment_id": 95071484, "body": "I guess you confused <code>TransformerChain</code> with <code>TransformerChain&lt;T&gt;</code>... <code>TransformerChain</code> is a static class (object instances or variables cannot have this type), whereas <code>TransformerChain&lt;T&gt;</code> is an instantiable class. But still, even <code>TransformerChain&lt;T&gt;</code> does not have a <code>MakePredictionFunction </code> method (and it is a sealed class, too). So, you can&#39;t query the type for the method."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 1, "creation_date": 1547074215, "post_id": 54118956, "comment_id": 95071605, "body": "However, as Kevin Grosse pointed out, <code>MakePredictionFunction</code> is an extension method that can be applied to <code>ITransformer</code> instances, and <code>TransformerChain&lt;T&gt;</code> is implementing <code>ITransformer</code>. Note that this extension method is not part of the <code>TransformerChain&lt;T&gt;</code> type definition, thus you would also get <code>null</code> when querying the <code>TransformerChain&lt;T&gt;</code> type. If you need the MethodInfo of an extension method, you need to query the type that declares the extension method. In case of <code>MakePredictionFunction</code> you would need to query the <code>PredictionFunctionExtensions</code> type..."}, {"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 2, "creation_date": 1547074828, "post_id": 54118956, "comment_id": 95071786, "body": "@elgonzo you probably should convert your comment into an answer... Or maybe we should close this as dup of &quot;call extension via reflection&quot; (like <a href=\"https://stackoverflow.com/questions/1452261/how-do-i-invoke-an-extension-method-using-reflection\" title=\"how do i invoke an extension method using reflection\">stackoverflow.com/questions/1452261/&hellip;</a>)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "reply_to_user": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 0, "creation_date": 1547075968, "post_id": 54118956, "comment_id": 95072088, "body": "@AlexeiLevenkov, i guess closing should be fine. There was a minor confusion about <code>TransformerChain</code> and <code>TransformerChain&lt;T&gt;</code>, but the core of the problem is indeed how to find an extension method through reflection..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "edited": false, "score": 0, "creation_date": 1547076134, "post_id": 54118956, "comment_id": 95072114, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1452261/how-do-i-invoke-an-extension-method-using-reflection\">How do I invoke an extension method using reflection?</a>"}, {"owner": {"reputation": 1249, "user_id": 2088029, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73a7ae522f4de7727b0baaaef4d813d6?s=128&d=identicon&r=PG", "display_name": "MrD at KookerellaLtd", "link": "https://stackoverflow.com/users/2088029/mrd-at-kookerellaltd"}, "edited": false, "score": 0, "creation_date": 1547119148, "post_id": 54118956, "comment_id": 95086310, "body": "for a generic call to work you must know statically what the type is....if you know what the type is, can&#39;t you just cast it...if you don&#39;t know the type...then you can&#39;t do anything...(its been a while since I used dynamic....and I&#39;ve only used it about twice ever...I also know nothing about the problem domain)"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 10475726, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wczN_92FY6U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXKLqcZ7E7isY-Fx6nRF2cCUwfj2g/mo/photo.jpg?sz=128", "display_name": "Paprika", "link": "https://stackoverflow.com/users/10475726/paprika"}, "edited": false, "score": 0, "creation_date": 1547077658, "post_id": 54119236, "comment_id": 95072444, "body": "This seems to be a good answer, it allows me to remove the need for a generated class entirely and get the data straight from the IDataView. Thank you!"}], "tags": [], "owner": {"reputation": 1180, "user_id": 1572751, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/04f1be1a3371f77104850e062d8551a3?s=128&d=identicon&r=PG", "display_name": "amy8374", "link": "https://stackoverflow.com/users/1572751/amy8374"}, "is_accepted": true, "score": 0, "last_activity_date": 1547072383, "creation_date": 1547072383, "answer_id": 54119236, "question_id": 54118956, "link": "https://stackoverflow.com/questions/54118956/how-to-pass-dynamic-classes-to-a-generic-function/54119236#54119236", "title": "How to pass dynamic classes to a generic function?", "body": "<p>Try reading your test data in an IDataView, than pass that IDataView to model.Transform();</p>\n\n<p>That should insert the Score and the PredictedLabel as separate columns in your test data. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2819245"}, "is_accepted": false, "score": 0, "last_activity_date": 1547075784, "creation_date": 1547075784, "answer_id": 54119827, "question_id": 54118956, "link": "https://stackoverflow.com/questions/54118956/how-to-pass-dynamic-classes-to-a-generic-function/54119827#54119827", "title": "How to pass dynamic classes to a generic function?", "body": "<p>It seems, when trying to reflect for the <code>MakePredictionFunction</code>, you confused the <code>TransformerChain&lt;TLastTransformer&gt;</code> type (which is an instantiable generic type) with the static class <code>TransformerChain</code>.</p>\n\n<p>But even reflecting upon <code>TransformerChain&lt;TLastTransformer&gt;</code> will not succeed, because <code>MakePredictionFunction</code> is not a method declared by this type. Rather, <code>MakePredictionFunction</code> is an extension method declared in the static class <code>PredictionFunctionExtensions</code>\u207d\u00b9\u207e.</p>\n\n<p>Thus, to get the <em>MethodInfo</em> for <code>MakePredictionFunction</code>, try this:</p>\n\n<pre><code>MethodInfo method = typeof(PredictionFunctionExtensions).GetMethod(\"MakePredictionFunction\");\n</code></pre>\n\n<p><br></p>\n\n<hr>\n\n<p>\u207d\u00b9\u207e\nI am not 100% certain which namespace <em>PredictionFunctionExtensions</em> resides in. Searching the ML.NET 0.9.0 API documentation, it seems it resides in the <em>Microsoft.ML.Runtime.Data</em> namespace. But trying to visit the actual documentation page for <em>MakePredictionFunction</em> currently only results in a 404 error, so there is a chance that this information might perhaps not be accurate (i am no ML.NET user, so i can't verify) :-(</p>\n"}], "owner": {"reputation": 77, "user_id": 10475726, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wczN_92FY6U/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXKLqcZ7E7isY-Fx6nRF2cCUwfj2g/mo/photo.jpg?sz=128", "display_name": "Paprika", "link": "https://stackoverflow.com/users/10475726/paprika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 54119236, "answer_count": 2, "score": -1, "last_activity_date": 1547077984, "creation_date": 1547070986, "last_edit_date": 1547077984, "question_id": 54118956, "link": "https://stackoverflow.com/questions/54118956/how-to-pass-dynamic-classes-to-a-generic-function", "title": "How to pass dynamic classes to a generic function?", "body": "<p>I want to make a machine learning api for use with a web application, the field names will be passed to the api with their data types.</p>\n\n<p>Currently I am making a class at runtime with the code provided in this answer: <a href=\"https://stackoverflow.com/a/3862241\">https://stackoverflow.com/a/3862241</a></p>\n\n<p>The problem arises when I need to call the ML.NET PredictionFunction, I can't pass in the types for the generic function since they are made at runtime.\nI've tried using reflection to call it however it seems to not be able to find the function.</p>\n\n<p>NOTE: Right now the docs for ML.NET is being updated for 0.9.0 so it is unavailable.</p>\n\n<p>What I've tried is this (minimal):</p>\n\n<pre><code>Type[] typeArgs = { generatedType, typeof(ClusterPrediction) };\nobject[] parametersArray = { mlContext }; // value\n\nMethodInfo method = typeof(TransformerChain).GetMethod(\"MakePredictionFunction\");\nif (method == null) { // Using PredictionFunctionExtensions helps here\n  Console.WriteLine(\"Method not found!\");\n}\nMethodInfo generic = method.MakeGenericMethod(typeArgs);\nvar temp = generic.Invoke(model, parametersArray);\n</code></pre>\n\n<p>The full (revised and trimmed) source (for more context):\nProgram.cs</p>\n\n<pre><code>namespace Generic {\n  class Program {\n    public class GenericData {\n      public float SepalLength;\n      public float SepalWidth;\n      public float PetalLength;\n      public float PetalWidth;\n    }\n    public class ClusterPrediction {\n      public uint PredictedLabel;\n      public float[] Score;\n    }\n\n    static void Main(string[] args) {\n      List&lt;Field&gt; fields = new List&lt;Field&gt;() {\n                new Field(){ name=\"SepalLength\", type=typeof(float)},\n                new Field(){ name=\"SepalWidth\", type=typeof(float)},\n                new Field(){ name=\"PetalLength\", type=typeof(float)},\n                new Field(){ name=\"PetalWidth\", type=typeof(float)},\n            };\n      var generatedType = GenTypeBuilder.CompileResultType(fields);\n\n      var mlContext = new MLContext(seed: 0);\n      TextLoader textLoader = mlContext.Data.TextReader(new TextLoader.Arguments() {\n        Separator = \",\",\n        Column = new[]\n        {\n          new TextLoader.Column(\"SepalLength\", DataKind.R4, 0),\n          new TextLoader.Column(\"SepalWidth\", DataKind.R4, 1),\n          new TextLoader.Column(\"PetalLength\", DataKind.R4, 2),\n          new TextLoader.Column(\"PetalWidth\", DataKind.R4, 3)\n        }\n      });\n      IDataView dataView = textLoader.Read(Path.Combine(Environment.CurrentDirectory, \"Data\", \"flowers.txt\"););\n\n      var pipeline = mlContext.Transforms\n        .Concatenate(\"Features\", \"SepalLength\", \"SepalWidth\", \"PetalLength\", \"PetalWidth\")\n        .Append(mlContext.Clustering.Trainers.KMeans(\"Features\", clustersCount: 3));\n      var model = pipeline.Fit(dataView);\n\n      Type[] typeArgs = { generatedType, typeof(ClusterPrediction) };\n      object[] parametersArray = { mlContext }; // value\n\n      MethodInfo method = typeof(TransformerChain).GetMethod(\"MakePredictionFunction\");\n      if (method == null) { // Using PredictionFunctionExtensions helps here\n        Console.WriteLine(\"Method not found!\");\n      }\n      MethodInfo generic = method.MakeGenericMethod(typeArgs);\n      var temp = generic.Invoke(model, parametersArray);\n\n      var prediction = temp.Predict(new GenericData {SepalLength = 5.6f, SepalWidth = 2.5f,\n                                                     PetalLength = 3.9f, PetalWidth = 1.1f});\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c#", "visual-studio", "xamarin", "xamarin.android"], "comments": [{"owner": {"reputation": 4560, "user_id": 8093394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-rAl_keJkKAM/AAAAAAAAAAI/AAAAAAAAl0o/Y2pvHWTFzBM/photo.jpg?sz=128", "display_name": "Diego Rafael Souza", "link": "https://stackoverflow.com/users/8093394/diego-rafael-souza"}, "edited": false, "score": 0, "creation_date": 1547070217, "post_id": 54118669, "comment_id": 95070147, "body": "I don&#39;t know the newest IDE version, but this behavior looks like a layout view container... Probably AbsoluteLayout ou RelativeLayout. Can you switch to source code view? Is there a XAML editor option?"}, {"owner": {"reputation": 2119, "user_id": 5879778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ELi77pnET0A/AAAAAAAAAAI/AAAAAAAAAEQ/7gEOlIOZ6ow/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/5879778/chris"}, "edited": false, "score": 0, "creation_date": 1547071035, "post_id": 54118669, "comment_id": 95070512, "body": "Do you have a <code>&lt;Grid &#47;&gt;</code> in the XAML? That&#39;s typically the reason it does that."}, {"owner": {"reputation": 5513, "user_id": 2913599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098f6fabc851434459585bb8170f950f?s=128&d=identicon&r=PG", "display_name": "jgoldberger - MSFT", "link": "https://stackoverflow.com/users/2913599/jgoldberger-msft"}, "edited": false, "score": 0, "creation_date": 1547079852, "post_id": 54118669, "comment_id": 95072972, "body": "Perhaps you would do well to read the documentation in the UI designer for Xamarin.Android: <a href=\"https://docs.microsoft.com/en-us/xamarin/android/user-interface/android-designer/\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/xamarin/android/user-interface/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 140, "user_id": 4380567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2hMQP.jpg?s=128&g=1", "display_name": "iamlawrencev", "link": "https://stackoverflow.com/users/4380567/iamlawrencev"}, "is_accepted": false, "score": 0, "last_activity_date": 1547110328, "creation_date": 1547110328, "answer_id": 54124889, "question_id": 54118669, "link": "https://stackoverflow.com/questions/54118669/wrong-location-of-components-in-xamarin/54124889#54124889", "title": "Wrong location of components in xamarin", "body": "<p>You would need a container like <code>FrameLayout</code> first. Then you can add multiple items inside and drag them around within it's dimensions.</p>\n"}], "owner": {"reputation": 1, "user_id": 10892124, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9qL0UsFnpzw/AAAAAAAAAAI/AAAAAAAAAA8/TUKqoWVcRbU/photo.jpg?sz=128", "display_name": "John", "link": "https://stackoverflow.com/users/10892124/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547110328, "creation_date": 1547069453, "question_id": 54118669, "link": "https://stackoverflow.com/questions/54118669/wrong-location-of-components-in-xamarin", "title": "Wrong location of components in xamarin", "body": "<p>I'm started making android app in xamarin using c# and I want support with adding controls from toolbox onto design surface.</p>\n\n<p>Problem - when I drag the any of controls and place it onto design surface, it automaticaly set its location to the top-left corner, but I need to set other location - how to do?</p>\n\n<p>I expect, that controls will sort themself under each of them - but now all of controls are situated in the top-left corner. Thanks for any advice!!</p>\n"}, {"tags": ["c#", "fluentvalidation"], "comments": [{"owner": {"reputation": 5401, "user_id": 456669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865f6e52b2997cf077edb24d807fd0ca?s=128&d=identicon&r=PG", "display_name": "Nikki9696", "link": "https://stackoverflow.com/users/456669/nikki9696"}, "edited": false, "score": 0, "creation_date": 1547070377, "post_id": 54118646, "comment_id": 95070225, "body": "I&#39;m not sure that&#39;s possible. Take a look at this thread, might be useful? <a href=\"https://stackoverflow.com/questions/27213058/how-can-i-access-the-collection-item-being-validated-when-using-ruleforeach\" title=\"how can i access the collection item being validated when using ruleforeach\">stackoverflow.com/questions/27213058/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1121, "user_id": 123445, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/49fa4d8785794cb4fa7924e54d645175?s=128&d=identicon&r=PG", "display_name": "Michael D.", "link": "https://stackoverflow.com/users/123445/michael-d"}, "edited": false, "score": 0, "creation_date": 1547131969, "post_id": 54119101, "comment_id": 95093743, "body": "Thanks, I already started working in the same direction - was hoping there is something build in available."}], "tags": [], "owner": {"reputation": 13234, "user_id": 561113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8b050fcc50ffb8de47e6704660aa98?s=128&d=identicon&r=PG", "display_name": "Xiaoy312", "link": "https://stackoverflow.com/users/561113/xiaoy312"}, "is_accepted": true, "score": 1, "last_activity_date": 1547072008, "last_edit_date": 1547072008, "creation_date": 1547071696, "answer_id": 54119101, "question_id": 54118646, "link": "https://stackoverflow.com/questions/54118646/ruleforeach-need-access-to-items-index/54119101#54119101", "title": "RuleForEach - need access to item&#39;s index", "body": "<p>You can override the <code>Validate</code> + <code>ValidateAsync</code> method to modify the result:</p>\n\n<pre><code>public abstract class ValidatorWithFullIndexerPath&lt;T&gt; : AbstractValidator&lt;T&gt;\n{\n    public override ValidationResult Validate(ValidationContext&lt;T&gt; context)\n    {\n        var result = base.Validate(context);\n        FixIndexedPropertyErrorMessage(result);\n\n        return result;\n    }\n    public override async Task&lt;ValidationResult&gt; ValidateAsync(ValidationContext&lt;T&gt; context, CancellationToken cancellation = default(CancellationToken))\n    {\n        var result = await base.ValidateAsync(context, cancellation);\n        FixIndexedPropertyErrorMessage(result);\n\n        return result;\n    }\n\n    protected void FixIndexedPropertyErrorMessage(ValidationResult result)\n    {\n        if (result.Errors?.Any() ?? false)\n        {\n            foreach (var error in result.Errors)\n            {\n                // check if \n                if (Regex.IsMatch(error.PropertyName, @\"\\[\\d+\\]\") &amp;&amp;\n                    error.FormattedMessagePlaceholderValues.TryGetValue(\"PropertyName\", out var propertyName))\n                {\n                    // replace PropertyName with its full path\n                    error.ErrorMessage = error.ErrorMessage\n                        .Replace($\"'{propertyName}'\", $\"'{error.PropertyName}'\");\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And, update <code>RequestValidator</code> and any other classes where full path is desired:</p>\n\n<pre><code>public class RequestValidator : ValidatorWithFullIndexerPath&lt;Request&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5120, "user_id": 4151019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8938308839e5234c8fbafcec7c82144d?s=128&d=identicon&r=PG&f=1", "display_name": "mountain traveller", "link": "https://stackoverflow.com/users/4151019/mountain-traveller"}, "is_accepted": false, "score": 0, "last_activity_date": 1551440134, "creation_date": 1551440134, "answer_id": 54943831, "question_id": 54118646, "link": "https://stackoverflow.com/questions/54118646/ruleforeach-need-access-to-items-index/54943831#54943831", "title": "RuleForEach - need access to item&#39;s index", "body": "<p>FluentValidation 8.1 contains a new method <code>OverrideIndexer()</code> to support this:</p>\n\n<ul>\n<li><a href=\"https://jeremyskinner.co.uk/2018/12/06/fluentvalidation-81-released/\" rel=\"nofollow noreferrer\">release notes</a></li>\n<li><a href=\"https://github.com/JeremySkinner/FluentValidation/issues/874#issuecomment-417567970\" rel=\"nofollow noreferrer\">github issue</a></li>\n<li><a href=\"https://github.com/JeremySkinner/FluentValidation/commit/65c10a3efbd6af5ca476d2753baad6e9394b0972\" rel=\"nofollow noreferrer\">code</a></li>\n</ul>\n"}], "owner": {"reputation": 1121, "user_id": 123445, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/49fa4d8785794cb4fa7924e54d645175?s=128&d=identicon&r=PG", "display_name": "Michael D.", "link": "https://stackoverflow.com/users/123445/michael-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1300, "favorite_count": 0, "accepted_answer_id": 54119101, "answer_count": 2, "score": 1, "last_activity_date": 1551440134, "creation_date": 1547069338, "last_edit_date": 1547069799, "question_id": 54118646, "link": "https://stackoverflow.com/questions/54118646/ruleforeach-need-access-to-items-index", "title": "RuleForEach - need access to item&#39;s index", "body": "<p>Considering this simplified code:</p>\n\n<pre><code>public class Request\n{\n    public List&lt;Selection&gt; Selections { get; set; }\n}\n\npublic class Selection\n{\n    public decimal Price { get; set; }\n}\n\npublic class RequestValidator(): AbstractValidator&lt;Request&gt;\n{\n    public RequestValidator()\n    {\n        RuleForEach(x =&gt; x.Selections).SetValidator(new SelectionValidator());\n    }\n}\n\npublic class SelectionValidator : AbstractValidator&lt;Selection&gt;\n{\n    public SelectionValidator()\n    {\n        RuleFor(x =&gt; x.Price).NotEqual(0); \n    }\n}\n</code></pre>\n\n<p>If I have a <code>Selection</code> item with <code>Price</code> equal to 0 I do get error message:\n<code>'Price' must not be equal to '0'.</code></p>\n\n<p>What I am missing is reference to which element in collection has this error.</p>\n\n<p>When debugging i can clearly see that <code>Error.PropertyName</code> is set to  <code>Selections[0].Price</code>, but formatted name is missing that reference to the item.</p>\n\n<p>Is there a way to correctly format the full property name? Maybe by using <code>.WithMessage()</code> but it does not seems to work.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UFGcF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UFGcF.png\" alt=\"Example of debug info\"></a></p>\n\n<p>To make it clear, my goal is to have error on Nested Items look like this:\n<code>&lt;CollectionPropertyName&gt;[&lt;index&gt;].&lt;PropertyName&gt; &lt;error text&gt;</code>. ex. <code>Selectons[0].Price must not be equal to 0</code></p>\n"}, {"tags": ["c#", "wcf", "custom-binding"], "comments": [{"owner": {"reputation": 2362, "user_id": 2016162, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/yLfkw.jpg?s=128&g=1", "display_name": "Popo", "link": "https://stackoverflow.com/users/2016162/popo"}, "edited": false, "score": 0, "creation_date": 1547083337, "post_id": 54118644, "comment_id": 95073645, "body": "Maybe try using system.diagnostic trace logs to see if you get a better idea on what the error is: <a href=\"https://stackoverflow.com/a/4271597/2016162\">stackoverflow.com/a/4271597/2016162</a>"}, {"owner": {"reputation": 63, "user_id": 3535209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5de13dfd3dcb9ea1fa1c6d58dc01ca?s=128&d=identicon&r=PG&f=1", "display_name": "kaisfarza", "link": "https://stackoverflow.com/users/3535209/kaisfarza"}, "reply_to_user": {"reputation": 2362, "user_id": 2016162, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/yLfkw.jpg?s=128&g=1", "display_name": "Popo", "link": "https://stackoverflow.com/users/2016162/popo"}, "edited": false, "score": 0, "creation_date": 1547126948, "post_id": 54118644, "comment_id": 95090598, "body": "Using Diagnostic i get this error : Failed to lookup a channel to receive an incoming message. Either the endpoint or the SOAP action was not found"}, {"owner": {"reputation": 2362, "user_id": 2016162, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/yLfkw.jpg?s=128&g=1", "display_name": "Popo", "link": "https://stackoverflow.com/users/2016162/popo"}, "edited": false, "score": 0, "creation_date": 1547155829, "post_id": 54118644, "comment_id": 95105914, "body": "Do you have the correct contract value in your client endpoint section?"}, {"owner": {"reputation": 63, "user_id": 3535209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5de13dfd3dcb9ea1fa1c6d58dc01ca?s=128&d=identicon&r=PG&f=1", "display_name": "kaisfarza", "link": "https://stackoverflow.com/users/3535209/kaisfarza"}, "reply_to_user": {"reputation": 2362, "user_id": 2016162, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/yLfkw.jpg?s=128&g=1", "display_name": "Popo", "link": "https://stackoverflow.com/users/2016162/popo"}, "edited": false, "score": 0, "creation_date": 1547210537, "post_id": 54118644, "comment_id": 95124638, "body": "Yes it is correct, when i change Binding to BasicHttpBehavior it works,"}, {"owner": {"reputation": 6039, "user_id": 10163251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Fwrh.jpg?s=128&g=1", "display_name": "Abraham Qian", "link": "https://stackoverflow.com/users/10163251/abraham-qian"}, "edited": false, "score": 0, "creation_date": 1547539981, "post_id": 54118644, "comment_id": 95216705, "body": "I noticed that you assigned the absolute address and base address to the service endpoint. There is one thing should be noted is that the base address is provided by IIS when hosted in IIS. It is unnecessary to specify the absolute uri. <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/d42fc165-052d-476a-9580-1240b3d0293d/specify-endpoint-in-wcf-webconfig?forum=wcf\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/vstudio/en-US/&hellip;</a>"}], "owner": {"reputation": 63, "user_id": 3535209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb5de13dfd3dcb9ea1fa1c6d58dc01ca?s=128&d=identicon&r=PG&f=1", "display_name": "kaisfarza", "link": "https://stackoverflow.com/users/3535209/kaisfarza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547127766, "creation_date": 1547069329, "last_edit_date": 1547127766, "question_id": 54118644, "link": "https://stackoverflow.com/questions/54118644/how-can-i-resolve-failed-to-lookup-a-channel-to-receive-an-incoming-message-ei", "title": "How can I resolve &#171;Failed to lookup a channel to receive an incoming message. Either the endpoint or the SOAP action was not found&#187; With CustomBinding", "body": "<p>I tried to consome a WCF service configured with CustomBinding and SSL/TLC Certificate but i Get everytime a <strong>System.ServiceModel.EndpointNotFoundException</strong>\u00a0<em>\u00abThere was no listening endpoint on https: //localhost/Helloword/HelloWord.svc that can accept the message.\u00bb</em></p>\n\n<p>Here is my Service Web.config :</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n\n  &lt;appSettings&gt;\n    &lt;add key=\"aspnet:UseTaskFriendlySynchronizationContext\" value=\"true\" /&gt;\n  &lt;/appSettings&gt;\n  &lt;system.web&gt;\n    &lt;compilation debug=\"true\" targetFramework=\"4.6.1\" /&gt;\n    &lt;httpRuntime targetFramework=\"4.6.1\"/&gt;\n  &lt;/system.web&gt;\n  &lt;system.serviceModel&gt;\n    &lt;behaviors&gt;\n      &lt;serviceBehaviors&gt;\n        &lt;behavior name=\"MyCustomBehavior\"&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\"/&gt;\n          &lt;serviceCredentials&gt;\n            &lt;clientCertificate&gt;\n              &lt;authentication certificateValidationMode=\"PeerTrust\" trustedStoreLocation=\"LocalMachine\" /&gt;\n            &lt;/clientCertificate&gt;\n            &lt;serviceCertificate findValue=\"ServerCert\" x509FindType=\"FindBySubjectName\" storeLocation=\"LocalMachine\" storeName=\"My\"/&gt;\n          &lt;/serviceCredentials&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n        &lt;behavior&gt;\n          &lt;serviceMetadata httpGetEnabled=\"true\" httpsGetEnabled=\"true\"/&gt;\n          &lt;serviceDebug includeExceptionDetailInFaults=\"false\"/&gt;\n        &lt;/behavior&gt;\n      &lt;/serviceBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;bindings&gt;\n      &lt;customBinding&gt;\n        &lt;binding name=\"MyCustomBinding\"&gt;\n          &lt;textMessageEncoding /&gt;\n          &lt;security authenticationMode=\"CertificateOverTransport\" requireSecurityContextCancellation=\"true\"/&gt;\n          &lt;httpsTransport authenticationScheme=\"IntegratedWindowsAuthentication\" /&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n    &lt;/bindings&gt;\n    &lt;serviceHostingEnvironment aspNetCompatibilityEnabled=\"true\" multipleSiteBindingsEnabled=\"true\" /&gt;\n    &lt;services&gt;\n      &lt;service behaviorConfiguration=\"MyCustomBehavior\" name=\"CustomBindingWifService.HelloWord\"&gt;\n        &lt;host&gt;\n          &lt;baseAddresses&gt;\n            &lt;add baseAddress =\"HelloWord.svc\" /&gt;\n          &lt;/baseAddresses&gt;\n        &lt;/host&gt;\n        &lt;endpoint address=\"https://localhost/Helloword/HelloWord.svc\" binding=\"customBinding\"\n            bindingConfiguration=\"MyCustomBinding\" contract=\"CustomBindingWifService.IHelloWord\"&gt;\n          &lt;identity&gt;\n            &lt;certificateReference x509FindType=\"FindBySubjectName\" findValue=\"ServerCert\" /&gt;\n          &lt;/identity&gt;\n        &lt;/endpoint&gt;\n        &lt;endpoint address=\"mex\" binding=\"mexHttpBinding\" contract=\"IMetadataExchange\"/&gt;\n      &lt;/service&gt;\n    &lt;/services&gt;\n  &lt;/system.serviceModel&gt;\n  &lt;system.webServer&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\"/&gt;\n    &lt;directoryBrowse enabled=\"true\"/&gt;\n  &lt;/system.webServer&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n\n<p>And There is my Client App.config</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n  &lt;system.serviceModel&gt;\n    &lt;bindings&gt;\n      &lt;customBinding&gt;\n        &lt;binding name=\"MyCustomBinding\"&gt;\n          &lt;textMessageEncoding /&gt;\n          &lt;security authenticationMode=\"CertificateOverTransport\" requireSecurityContextCancellation=\"true\"/&gt;\n          &lt;httpsTransport /&gt;\n        &lt;/binding&gt;\n      &lt;/customBinding&gt;\n    &lt;/bindings&gt;\n    &lt;behaviors&gt;\n      &lt;endpointBehaviors&gt;\n        &lt;behavior name=\"MyCustomBehavior\"&gt;\n          &lt;clientCredentials&gt;\n            &lt;clientCertificate\n            findValue=\"ClientCert\"\n            storeLocation=\"LocalMachine\"\n            storeName=\"My\"\n            x509FindType=\"FindBySubjectName\" /&gt;\n            &lt;serviceCertificate&gt;\n              &lt;authentication\n              certificateValidationMode=\"PeerTrust\"/&gt;\n            &lt;/serviceCertificate&gt;\n          &lt;/clientCredentials&gt;\n        &lt;/behavior&gt;\n      &lt;/endpointBehaviors&gt;\n    &lt;/behaviors&gt;\n    &lt;client&gt;\n      &lt;endpoint address=\"https://localhost/Helloword/HelloWord.svc\"\n        binding=\"customBinding\" bindingConfiguration=\"MyCustomBinding\"\n        contract=\"ServiceHelloWord.IHelloWord\" name=\"HelloWordEndPoint\" \n        behaviorConfiguration=\"MyCustomBehavior\" /&gt;\n    &lt;/client&gt;\n  &lt;/system.serviceModel&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p>The Program.cs :</p>\n\n<pre><code>namespace CustomBindingWifServiceClient\n{\n    public class Program\n    {\n        public static void Main(string[] args)\n        {\n            System.Net.ServicePointManager.ServerCertificateValidationCallback += (se, cert, chain, sslerror) =&gt; true;\n\n            var channel = new ChannelFactory&lt;ServiceHelloWord.IHelloWord&gt;(\"HelloWordEndPoint\");\n\n            var client = channel.CreateChannel();\n\n            var input = \"Client Console\";\n\n            while (input != null &amp;&amp; input.ToLower() != \"exit\")\n            {\n                var result = client.HelloWord(input);\n                Console.WriteLine(result);\n                input = Console.ReadLine();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I get Error in : var result = client.HelloWord(input);</p>\n\n<p>In the Browser, the Service looks fine </p>\n\n<p><a href=\"https://i.stack.imgur.com/gqbLE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gqbLE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks for your reply</p>\n"}, {"tags": ["c#", "html", "asp.net", "href", "asp.net-4.5"], "answers": [{"comments": [{"owner": {"reputation": 63413, "user_id": 159270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Sh4jD.jpg?s=128&g=1", "display_name": "Aristos", "link": "https://stackoverflow.com/users/159270/aristos"}, "edited": false, "score": 0, "creation_date": 1547079233, "post_id": 54118862, "comment_id": 95072821, "body": "if you do not have to post any data, then you can avoid all that - and its bad design. Except if you actually post some data"}], "tags": [], "owner": {"reputation": 6890, "user_id": 1761307, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QQQps.jpg?s=128&g=1", "display_name": "Eray Balkanli", "link": "https://stackoverflow.com/users/1761307/eray-balkanli"}, "is_accepted": true, "score": 0, "last_activity_date": 1547070498, "creation_date": 1547070498, "answer_id": 54118862, "question_id": 54118548, "link": "https://stackoverflow.com/questions/54118548/how-to-get-ispostback-true-when-a-href-object-is-clicked-in-c/54118862#54118862", "title": "How to get ispostback=true when &lt;a href&gt; object is clicked in c#", "body": "<p>Changing hrefs into \"asp:LinkButton\" and setting AutoPostBack property to true for those linkbuttons fixed my issue.</p>\n"}], "owner": {"reputation": 6890, "user_id": 1761307, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QQQps.jpg?s=128&g=1", "display_name": "Eray Balkanli", "link": "https://stackoverflow.com/users/1761307/eray-balkanli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 54118862, "answer_count": 1, "score": 0, "last_activity_date": 1547070498, "creation_date": 1547068857, "last_edit_date": 1547069302, "question_id": 54118548, "link": "https://stackoverflow.com/questions/54118548/how-to-get-ispostback-true-when-a-href-object-is-clicked-in-c", "title": "How to get ispostback=true when &lt;a href&gt; object is clicked in c#", "body": "<p>I have 2 hrefs like below in asp.net 4.5:</p>\n\n<pre><code>&lt;a href=\"/Admin/&lt;%= prevPage %&gt;\" role=\"button\" &gt;&lt;i class=\"fa fa-left\"&gt;&lt;/i&gt;&lt;/a&gt;\n&lt;a href=\"/Admin/&lt;%= nextPage %&gt;\" role=\"button\" &gt;&lt;i class=\"fa fa-right\"&gt;&lt;/i&gt;&lt;/a&gt;\n</code></pre>\n\n<p>where I have some process to do in page_load in c# like</p>\n\n<pre><code>protected void Page_Load(object sender, EventArgs e)\n{\n    if (!IsPostBack)\n    {\n       //loading data from db;\n    }\n}\n</code></pre>\n\n<p>When I click on this a href, the page_load event is triggered and IsPostBack comes as false. Therefore, it is loading the data again and again whenever someone clicks previous or next page hrefs, causing a performance issue. I need to prevent this happening, meaning that I want IsPostBack = true after an href link is clicked. What is the best way to handle this issue?</p>\n\n<p>I have tried to use onclientlick=\"return false;\", it did not work. \nI have tried to use asp:button and asp:linkbutton like below, did not work.</p>\n\n<pre><code>&lt;asp:Button ID=\"btnPrev\" runat=\"server\" Text=\"left\" OnClick=\"RedirectPreviousPage\" /&gt;\nprotected void RedirectPreviousPage(object sender, EventArgs e)\n{\n   var prevPage = CurrentPage == 1 ? -1 : CurrentPage - 1;\n   Response.Redirect(\"/Admin/\" + prevPage);\n}\n</code></pre>\n\n<p>What is the best solution? Any help or advise would be appreciated. I've checked lots of previous topics with related issue, but couldn't find a proper solution for my case. Apologies if I am causing a duplication. Regards.</p>\n\n<p>Edit: also did not work.</p>\n\n<pre><code>&lt;script&gt;\n     function RedirectPreviousPage()\n     {\n          window.location.href = \"/Admin/&lt;%= prevPage %&gt;\";\n     }\n&lt;/script&gt;\n&lt;a href=\"#\" role=\"button\" onclick=\"RedirectPreviousPage(); return false;\" &gt;&lt;i class=\"fa fa-chevron-left\"&gt;&lt;/i&gt;&lt;/a&gt;\n</code></pre>\n"}, {"tags": ["c#", "linq", "ef-core-2.1"], "comments": [{"owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 3, "creation_date": 1547068839, "post_id": 54118456, "comment_id": 95069590, "body": "Most likely a bug, but just wondering, why are you selecting an anonymous object instead of just <code>s =&gt; s.Benefits</code>? Also, the first <code>Include</code> for <code>Dates</code> is omitted as it is not used. You could have just used <code>_context.Benefits.Include(x =&gt; x.Dates).Where(x =&gt; x.SubscriberId == 13643).ToList()</code>"}, {"owner": {"reputation": 8691, "user_id": 372296, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3a0300d506022a067fed1599cd48f91?s=128&d=identicon&r=PG", "display_name": "RHarris", "link": "https://stackoverflow.com/users/372296/rharris"}, "reply_to_user": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 0, "creation_date": 1547122818, "post_id": 54118456, "comment_id": 95088298, "body": "So the query I&#39;m after is much more complex but when it wasn&#39;t working, I started simplifying it down to just the pieces that needed to be included.  So, while I&#39;m not using <code>Subscriber.Dates</code> at this point in time, I will be using it once I get this simplistic model resolved.  (The same goes for the selecting to anonymous -- not necessary in my example, but will be necessary in the final query)"}, {"owner": {"reputation": 11005, "user_id": 8211528, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0831ca2a26e862e3e42c159c624e2ded?s=128&d=identicon&r=PG", "display_name": "Hooman Bahreini", "link": "https://stackoverflow.com/users/8211528/hooman-bahreini"}, "edited": false, "score": 0, "creation_date": 1547249727, "post_id": 54118456, "comment_id": 95141784, "body": "Something to keep in mind when writing complex queries using EF, is perforamce... EF converts your linq query to SQL, but it may not be as efficient as your own SQL. Personally I would not use LINQ to SQL for writing complex queries... you could potentially write more efficient SQL. See point #3 <a href=\"http://www.sqlservercentral.com/articles/Entity+Framework/141158/\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8691, "user_id": 372296, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3a0300d506022a067fed1599cd48f91?s=128&d=identicon&r=PG", "display_name": "RHarris", "link": "https://stackoverflow.com/users/372296/rharris"}, "edited": false, "score": 0, "creation_date": 1547122711, "post_id": 54121053, "comment_id": 95088241, "body": "Sorry, I actually did use <code>b</code> in my code rather than <code>s</code> -- I&#39;ve updated my code to reflect that change.  I&#39;ll trying the cast and see if that makes a difference."}, {"owner": {"reputation": 8691, "user_id": 372296, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3a0300d506022a067fed1599cd48f91?s=128&d=identicon&r=PG", "display_name": "RHarris", "link": "https://stackoverflow.com/users/372296/rharris"}, "edited": false, "score": 0, "creation_date": 1547127060, "post_id": 54121053, "comment_id": 95090669, "body": "Casting <code>(b as Benefit)</code> did not help.  I also tried removing <code>.Include(s =&gt; s.Dates)</code> (subscriber dates), and that didn&#39;t help either.  Benefits still get returned with no Dates."}, {"owner": {"reputation": 1654, "user_id": 40609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/048b20d3efe61f2ae5b7658c04b4bcc7?s=128&d=identicon&r=PG", "display_name": "Olaj", "link": "https://stackoverflow.com/users/40609/olaj"}, "edited": false, "score": 0, "creation_date": 1552906323, "post_id": 54121053, "comment_id": 97174277, "body": "Casting help me in a similar case."}], "tags": [], "owner": {"reputation": 11005, "user_id": 8211528, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0831ca2a26e862e3e42c159c624e2ded?s=128&d=identicon&r=PG", "display_name": "Hooman Bahreini", "link": "https://stackoverflow.com/users/8211528/hooman-bahreini"}, "is_accepted": false, "score": 0, "last_activity_date": 1547092717, "last_edit_date": 1547092717, "creation_date": 1547086284, "answer_id": 54121053, "question_id": 54118456, "link": "https://stackoverflow.com/questions/54118456/include-not-working-in-linq-query-but-works-in-linq-fluent-api/54121053#54121053", "title": "Include not working in LINQ query but works in LINQ Fluent API", "body": "<p>This is just a guess: since You have <code>Datas</code>, in both <code>Subscribers</code> and <code>Benefits</code>, there is a chance that you are not querying the correct model/entity... you can try confirming the entity type like below (assuming <code>Benefit</code> is your Entity type).</p>\n\n<pre><code>var list1 = (from s in _context.Subscribers\n               .Include(s =&gt; s.Dates)\n               .Include(s =&gt; s.Benefits)\n               .ThenInclude(b =&gt; (b as Benefit).Dates)\n               where s.Id == 13643\n               select new { benefits = s.Benefits }).ToList();\n\nvar list2 = _context.Subscribers\n           .Include(s =&gt; s.Dates)\n           .Include(s =&gt; s.Benefits)\n           .ThenInclude(b =&gt; (b as Benefit).Dates) // &lt;-- I suggest renaming s to b\n           .Where(s =&gt; s.Id == 13643)\n           .Select(s =&gt; new { benefits = s.Benefits}).ToList();\n</code></pre>\n"}], "owner": {"reputation": 8691, "user_id": 372296, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3a0300d506022a067fed1599cd48f91?s=128&d=identicon&r=PG", "display_name": "RHarris", "link": "https://stackoverflow.com/users/372296/rharris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 858, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1547151675, "creation_date": 1547068477, "last_edit_date": 1547151675, "question_id": 54118456, "link": "https://stackoverflow.com/questions/54118456/include-not-working-in-linq-query-but-works-in-linq-fluent-api", "title": "Include not working in LINQ query but works in LINQ Fluent API", "body": "<p><strong>The Problem</strong></p>\n\n<p>I have a LINQ query (against Entity Framework) that use <code>Include</code> to include some navigation properties.  One of those properties uses <code>ThenInclude</code> to include its own property collection.  When I run the query, the first level properties are included on the primary object but the sub-collection (the one using ThenInclude) is always empty.</p>\n\n<p>However, if I change the query to use Fluent API form, the query works and the sub-collection is actually included.  Why does this work for the Fluent form and not the normal LINQ query?</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>//FAIL - This returns Benefits but Benefits.Dates.Count = 0 on all Benefits\nvar list1 = (from s in _context.Subscribers\n               .Include(s =&gt; s.Dates)\n               .Include(s =&gt; s.Benefits)\n               .ThenInclude(b =&gt; b.Dates)\n               where s.Id == 13643\n               select new { benefits = s.Benefits }).ToList();\n\n//SUCCESS - This returns Benefits and Benefits.Dates.Count is &gt; 0 on the ones with Dates\nvar list2 = _context.Subscribers\n               .Include(s =&gt; s.Dates)\n               .Include(s =&gt; s.Benefits)\n               .ThenInclude(b =&gt; b.Dates)\n               .Where(s =&gt; s.Id == 13643)\n               .Select(s =&gt; new { benefits = s.Benefits}).ToList();\n</code></pre>\n\n<p>Am I mistaken that these queries should give the same output? </p>\n\n<p><strong>Update</strong></p>\n\n<p>I just tried manually linking things using LINQ and I am able to get Benefit dates included -- granted, its not apples to apples as the resulting set is different, but the point is that <code>Include(b =&gt; b.Dates)</code> seems to work in this case.  </p>\n\n<pre><code>var list3 = (from s in _context.Subscribers.Include(s =&gt; s.Dates)\n             join b in _context.Benefits.Include(b =&gt; b.Dates) on s.Id equals b.SubscriberId\n             select new {benefits = b}).ToList();\n</code></pre>\n\n<p>I'm beginning to wonder if <code>ThenInclude()</code> may be a little more restrictive in where/when it can be used?</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>I just noticed a warning in my Debug Output window that led me to <a href=\"https://docs.microsoft.com/en-us/ef/core/querying/related-data#ignored-includes\" rel=\"nofollow noreferrer\">this link about ignored includes</a>.  This seems to be on the right track as the Debug Output clearly indicates that these includes are being ignored.</p>\n\n<p>What doesn't make sense, though, is that I'm actually selecting to anonymous in both examples and only one of them seems to ignore the includes.  Why one and not the other?</p>\n"}, {"tags": ["c#", "unity3d", "math", "vector"], "answers": [{"comments": [{"owner": {"reputation": 16662, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "reply_to_user": {"reputation": 756, "user_id": 8157029, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/074942783234568a3632db47917e8428?s=128&d=identicon&r=PG&f=1", "display_name": "jtth", "link": "https://stackoverflow.com/users/8157029/jtth"}, "edited": false, "score": 0, "creation_date": 1547148700, "post_id": 54118589, "comment_id": 95102915, "body": "@jtth I edited my answer and replaced all mentions of <code>ContactPoint</code> with <code>RaycastHit</code>. I had used the wrong one in my answer for using raycasts like you are doing. However, they both have <code>normal</code> and <code>point</code> properties, so the procedure in using them is the same."}], "tags": [], "owner": {"reputation": 16662, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "is_accepted": true, "score": 3, "last_activity_date": 1547149382, "last_edit_date": 1547149382, "creation_date": 1547069018, "answer_id": 54118589, "question_id": 54118344, "link": "https://stackoverflow.com/questions/54118344/calculate-depth-of-indentation-in-an-model-using-three-point-system/54118589#54118589", "title": "Calculate depth of indentation in an model using three point system?", "body": "<p>This is a pretty open question because simply \"depth\" is pretty vague. Here are two approaches if you can find some points on the model in world space:</p>\n\n<h1>Method 1: Create reference plane from 3 points on surface.</h1>\n\n<ol>\n<li><p>Have the user click on the point whose \"depth\" they want to know.</p>\n\n<pre><code>RaycastHit indentHit;\nVector3 depthPoint = indentHit.point;\n</code></pre></li>\n<li><p>Have the user click on three points outside of the \"indentation\". These three points define a plane that we are going to use as a reference for our \"depth\" measurement.</p>\n\n<pre><code>RaycastHit hitA;\nRaycastHit hitB;\nRaycastHit hitC;\n\nVector3 a = hitA.point;\nVector3 b = hitB.point;\nVector3 c = hitC.point; \n\nPlane surfacePlane = new Plane(a, b, c); \n</code></pre></li>\n<li><p>Find the distance of the point from the plane using <code>Plane.GetDistanceToPoint</code>. We don't care about the direction, just the distance, so we use <code>Mathf.Abs</code> to make sure our distance is positive:</p>\n\n<pre><code>float depth = Mathf.Abs(surfacePlane.GetDistanceToPoint(depthPoint));\n</code></pre></li>\n</ol>\n\n<h1>Method 2: Create reference plane from 1 point on surface and its normal.</h1>\n\n<p>Another way you can do it is by taking one point on the surface of the model and one point on the indentation, and creating a plane out of the single point on the surface of the model and using its normal to create a plane from that one point:</p>\n\n<ol>\n<li><p>Have the user click on the point whose \"depth\" they want to know.</p>\n\n<pre><code>RaycastHit indentHit;\nVector3 depthPoint = indentHit.point;\n</code></pre></li>\n<li><p>Have the user click on one point outside of the \"indentation\". Then, find the normal at that point. From these, you can generate a plane.</p>\n\n<pre><code>RaycastHit surfaceHit;\nVector3 surfacePoint = surfaceHit.point;\nVector3 surfaceNormal = surfaceHit.normal;\n\nPlane surfacePlane = new Plane(surfaceNormal.normalized, surfacePoint);\n</code></pre>\n\n<p>Something that might be worth trying is allowing for taking multiple points and normals and averaging them out to create the plane. <em>If you try this, just make sure that you get the <code>normalized</code> form of the normal.</em></p></li>\n<li><p>Find the distance of the point from the plane using <code>Plane.GetDistanceToPoint</code>. We don't care about the direction, just the distance, so we use <code>Mathf.Abs</code> to make sure our distance is positive:</p>\n\n<pre><code>float depth = Mathf.Abs(surfacePlane.GetDistanceToPoint(depthPoint));\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "is_accepted": false, "score": 1, "last_activity_date": 1547074506, "creation_date": 1547074506, "answer_id": 54119610, "question_id": 54118344, "link": "https://stackoverflow.com/questions/54118344/calculate-depth-of-indentation-in-an-model-using-three-point-system/54119610#54119610", "title": "Calculate depth of indentation in an model using three point system?", "body": "<p>To complement Ruzihm's answer, as I pointed in the <a href=\"https://stackoverflow.com/questions/54084055/calculate-depth-of-indentation-in-model-using-two-points/54084614\">previous question</a> you really need 4 (3+1) points. 3 (2+1) points are still not enough. Going back to my previous example assume that one point on the surface plane <code>a</code> is <code>A</code> is <code>(0,0,0)</code>, another <code>B</code> is <code>(0,0,1)</code>, and the point on the indentation plane <code>b</code> is <code>I</code> is (2,1,0). How deep is the indentation? The answer is: you still don't know. Adding the point <code>B</code> still left valid two choices from that example:</p>\n\n<ul>\n<li><code>a</code> is <code>X = 0</code> while <code>b</code> is <code>X = 2</code>. Then the indentation depth is clearly 2.</li>\n<li><code>a</code> is <code>Y = 0</code> while <code>b</code> is <code>Y = 1</code>. Then the indentation depth is clearly 1.</li>\n</ul>\n\n<p>And there are still infinitely many other options.</p>\n\n<p>This happens because two points (<code>A</code> and <code>B</code>) only fix a line rather than whole plane. To fix a plane you really need 3 points (not lying on the same line). And this is what Ruzihm's answers does.</p>\n"}], "owner": {"reputation": 756, "user_id": 8157029, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/074942783234568a3632db47917e8428?s=128&d=identicon&r=PG&f=1", "display_name": "jtth", "link": "https://stackoverflow.com/users/8157029/jtth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 54118589, "answer_count": 2, "score": 0, "last_activity_date": 1547509813, "creation_date": 1547067891, "last_edit_date": 1547509813, "question_id": 54118344, "link": "https://stackoverflow.com/questions/54118344/calculate-depth-of-indentation-in-an-model-using-three-point-system", "title": "Calculate depth of indentation in an model using three point system?", "body": "<p>Via Raycasting one can select a point on an GameObjects Collider. In the short visual three points are represented with small spheres denoting user selection. The desire is to calculate the depth of any spot in an models indentation. Current thought is to use a system in which the user selects two points outside the depth and a point within the depth of the indentation than calculate the indentations depth.</p>\n\n<p>The information available to us is the three points (Vectors) in space, the distance between them and any other Vector math utilizing three points. How do we use the aforementioned data to calculate the depth of our indentation? Is it feasible and a reasonable approach to calculate a point perpendicular to the point in the depth? Thought being if this point is calculable than the depth would be the distance between those two points. How to go about this, is it feasible, is there perhaps a better approach?</p>\n\n<p><a href=\"https://i.stack.imgur.com/CQ9OJ.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CQ9OJ.gif\" alt=\"short_visual\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/DpQRZ.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DpQRZ.gif\" alt=\"indenttest_003_A\"></a>\n<a href=\"https://i.stack.imgur.com/Qqy6L.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qqy6L.gif\" alt=\"indenttest_003_B\"></a></p>\n"}, {"tags": ["c#", "sql", "winforms"], "comments": [{"owner": {"reputation": 202711, "user_id": 1197518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cjKiP.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/1197518/steve"}, "edited": false, "score": 0, "creation_date": 1547068279, "post_id": 54118320, "comment_id": 95069337, "body": "Related? <a href=\"https://stackoverflow.com/questions/450675/datatable-internal-index-is-corrupted\" title=\"datatable internal index is corrupted\">stackoverflow.com/questions/450675/&hellip;</a>"}, {"owner": {"reputation": 619, "user_id": 2623538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dhR1w.jpg?s=128&g=1", "display_name": "NaDeR Star", "link": "https://stackoverflow.com/users/2623538/nader-star"}, "edited": false, "score": 0, "creation_date": 1547069821, "post_id": 54118320, "comment_id": 95069984, "body": "@Matt Switch between the default TableAdapterManager.UpdateOrderOption.InsertUpdateDelete to UpdateInsertDelete may help you"}, {"owner": {"reputation": 5205, "user_id": 685760, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1565f64650e291ed40e33f20b1112b5?s=128&d=identicon&r=PG", "display_name": "Mr Moose", "link": "https://stackoverflow.com/users/685760/mr-moose"}, "edited": false, "score": 0, "creation_date": 1547069862, "post_id": 54118320, "comment_id": 95070000, "body": "Looks like you&#39;d find it at <code>TableAdapterManager.UpdateAll(MYPROGRAMDataSetdataSet) in C:\\MYPROGRAM\\MYPROGRAMDataSet.Designer.cs:line 11240</code> according to your stacktrace."}, {"owner": {"reputation": 13325, "user_id": 2641576, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/K9yqy.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2641576/matt"}, "edited": false, "score": 1, "creation_date": 1547070310, "post_id": 54118320, "comment_id": 95070192, "body": "Added TableAdapterManager.UpdateAll(MYPROGRAMDataSetdataSet)"}, {"owner": {"reputation": 13325, "user_id": 2641576, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/K9yqy.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2641576/matt"}, "reply_to_user": {"reputation": 619, "user_id": 2623538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dhR1w.jpg?s=128&g=1", "display_name": "NaDeR Star", "link": "https://stackoverflow.com/users/2623538/nader-star"}, "edited": false, "score": 0, "creation_date": 1547070658, "post_id": 54118320, "comment_id": 95070331, "body": "@NaDeRStar YES!! this worked! Thank you, please leave it as an answer"}, {"owner": {"reputation": 619, "user_id": 2623538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dhR1w.jpg?s=128&g=1", "display_name": "NaDeR Star", "link": "https://stackoverflow.com/users/2623538/nader-star"}, "edited": false, "score": 0, "creation_date": 1547070878, "post_id": 54118320, "comment_id": 95070441, "body": "@Matt awesome :)"}], "answers": [{"tags": [], "owner": {"reputation": 619, "user_id": 2623538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dhR1w.jpg?s=128&g=1", "display_name": "NaDeR Star", "link": "https://stackoverflow.com/users/2623538/nader-star"}, "is_accepted": true, "score": 2, "last_activity_date": 1547070920, "creation_date": 1547070920, "answer_id": 54118946, "question_id": 54118320, "link": "https://stackoverflow.com/questions/54118320/c-datatable-internal-index-is-corrupted-5-on-save-in-windows-form/54118946#54118946", "title": "C# DataTable internal index is corrupted: &#39;5&#39; on Save in Windows Form", "body": "<p>Ok you tried and you know</p>\n\n<p>Switch between the default </p>\n\n<pre><code>TableAdapterManager.UpdateOrderOption.InsertUpdateDelete\n</code></pre>\n\n<p>to </p>\n\n<pre><code>TableAdapterManager.UpdateOrderOption.UpdateInsertDelete \n</code></pre>\n"}], "owner": {"reputation": 13325, "user_id": 2641576, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/K9yqy.png?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2641576/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "accepted_answer_id": 54118946, "answer_count": 1, "score": 1, "last_activity_date": 1549371966, "creation_date": 1547067794, "last_edit_date": 1549371966, "question_id": 54118320, "link": "https://stackoverflow.com/questions/54118320/c-datatable-internal-index-is-corrupted-5-on-save-in-windows-form", "title": "C# DataTable internal index is corrupted: &#39;5&#39; on Save in Windows Form", "body": "<p>I have a small form which connects to a single data source (SQL Server database) as has two bindings to two of the tables.</p>\n\n<p>When inputting data:</p>\n\n<pre><code>Reg (A read only list box from table `vehicles`)\nID (A Read only auto generated id which increments from the max id in table 'serv')\nDesc (Text input, table 'serv')\nDate (Datetime picker, table 'serv')\n</code></pre>\n\n<p>If I put in data that has a date of the future it works ok, if I use a date from the past after I have previously input a record with a date from the future then I get an error:</p>\n\n<blockquote>\n  <p>System.InvalidOperationException: DataTable internal index is corrupted: '5'.</p>\n</blockquote>\n\n<p>Record input testing:</p>\n\n<ul>\n<li>Future then Future = OK </li>\n<li>Past then Past = OK </li>\n<li>Past then Future = OK</li>\n<li>Future then Past = Error</li>\n</ul>\n\n<p>I cannot figure out why this is the case on such a simple form.</p>\n\n<p>Full Error:</p>\n\n<pre><code>See the end of this message for details on invoking \njust-in-time (JIT) debugging instead of this dialog box.\n\n************** Exception Text **************\nSystem.InvalidOperationException: DataTable internal index is corrupted: '5'.\n   at MYPROGRAM.MYPROGRAMDataSetTableAdapters.TableAdapterManager.UpdateAll(MYPROGRAMDataSetdataSet) in C:\\MYPROGRAM\\MYPROGRAMDataSet.Designer.cs:line 11240\n   at MYPROGRAM.NewService.servicesBindingNavigatorSaveItem_Click(Object sender, EventArgs e) in C:\\MYPROGRAM\\NewService.cs:line 50\n   at System.Windows.Forms.ToolStripItem.RaiseEvent(Object key, EventArgs e)\n   at System.Windows.Forms.ToolStripButton.OnClick(EventArgs e)\n   at System.Windows.Forms.ToolStripItem.HandleClick(EventArgs e)\n   at System.Windows.Forms.ToolStripItem.HandleMouseUp(MouseEventArgs e)\n   at System.Windows.Forms.ToolStripItem.FireEventInteractive(EventArgs e, ToolStripItemEventType met)\n   at System.Windows.Forms.ToolStripItem.FireEvent(EventArgs e, ToolStripItemEventType met)\n   at System.Windows.Forms.ToolStrip.OnMouseUp(MouseEventArgs mea)\n   at System.Windows.Forms.Control.WmMouseUp(Message&amp; m, MouseButtons button, Int32 clicks)\n   at System.Windows.Forms.Control.WndProc(Message&amp; m)\n   at System.Windows.Forms.ScrollableControl.WndProc(Message&amp; m)\n   at System.Windows.Forms.ToolStrip.WndProc(Message&amp; m)\n   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message&amp; m)\n   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message&amp; m)\n   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)\n\n\n************** Loaded Assemblies **************\nmscorlib\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3260.0 built by: NET472REL1LAST_C\n    CodeBase: file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/mscorlib.dll\n----------------------------------------\nMYPROGRAM\n    Assembly Version: 1.0.0.0\n    Win32 Version: 1.0.0.0\n    CodeBase: file:///C:/MYPROGRAM.exe\n----------------------------------------\nSystem.Windows.Forms\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3221.0 built by: NET472REL1LAST_C\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll\n----------------------------------------\nSystem\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3314.0 built by: NET472REL1LAST_B\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll\n----------------------------------------\nSystem.Drawing\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3056.0 built by: NET472REL1\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll\n----------------------------------------\nSystem.Configuration\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3056.0 built by: NET472REL1\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll\n----------------------------------------\nSystem.Core\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3221.0 built by: NET472REL1LAST_C\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll\n----------------------------------------\nSystem.Xml\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3056.0 built by: NET472REL1\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll\n----------------------------------------\nSystem.Data\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3260.0 built by: NET472REL1LAST_C\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll\n----------------------------------------\nSystem.Data.DataSetExtensions\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3056.0 built by: NET472REL1\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Data.DataSetExtensions/v4.0_4.0.0.0__b77a5c561934e089/System.Data.DataSetExtensions.dll\n----------------------------------------\nSystem.Numerics\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3056.0 built by: NET472REL1\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Numerics/v4.0_4.0.0.0__b77a5c561934e089/System.Numerics.dll\n----------------------------------------\nAccessibility\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3056.0 built by: NET472REL1\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/Accessibility/v4.0_4.0.0.0__b03f5f7f11d50a3a/Accessibility.dll\n----------------------------------------\nSystem.Transactions\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3221.0 built by: NET472REL1LAST_C\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.Transactions/v4.0_4.0.0.0__b77a5c561934e089/System.Transactions.dll\n----------------------------------------\nSystem.EnterpriseServices\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3056.0 built by: NET472REL1\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_32/System.EnterpriseServices/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll\n----------------------------------------\nSystem.Runtime.Caching\n    Assembly Version: 4.0.0.0\n    Win32 Version: 4.7.3056.0\n    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Runtime.Caching/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Runtime.Caching.dll\n----------------------------------------\n\n************** JIT Debugging **************\nTo enable just-in-time (JIT) debugging, the .config file for this\napplication or computer (machine.config) must have the\njitDebugging value set in the system.windows.forms section.\nThe application must also be compiled with debugging\nenabled.\n\nFor example:\n\n&lt;configuration&gt;\n    &lt;system.windows.forms jitDebugging=\"true\" /&gt;\n&lt;/configuration&gt;\n\nWhen JIT debugging is enabled, any unhandled exception\nwill be sent to the JIT debugger registered on the computer\nrather than be handled by this dialog box.\n</code></pre>\n\n<p>Save Button Code:</p>\n\n<pre><code>private void servicesBindingNavigatorSaveItem_Click(object sender, EventArgs e)\n{\n    RegTextBox.Visible = true;\n    RegTextBox.Text = regComboBox.Text;\n    RegTextBox.Visible = false;\n    RegTextBox.Visible = true;\n\n    string RText = RegTextBox.Text;\n\n    SqlConnection conn = new SqlConnection(\"SQLCON\");\n\n    DataSet ds = new DataSet();\n\n    SqlDataAdapter da = new SqlDataAdapter(SQLQuery, conn);\n    da.Fill(ds);\n\n    RegTextBox.Visible = false;\n    this.Validate();\n    this.servicesBindingSource.EndEdit();\n    this.tableAdapterManager.UpdateAll(this.MYPROGRAMDataSet);\n\n    bindingNavigatorAddNewItem.Visible = true;\n    servicesBindingNavigatorSaveItem.Visible = false;\n\n    regComboBox.Visible = false;\n    serviceIDTextBox.Visible = false;\n    service_TypeTextBox.Visible = false;\n    service_DescriptionTextBox.Visible = false;\n    service_DateDateTimePicker.Visible = false;\n\n    MessageBox.Show(\"Service Saved\", \"\", MessageBoxButtons.OK, MessageBoxIcon.Information);\n\n    // this.servicesTableAdapter.Fill(this.MYPROGRAMDataSet.Services); (Commented out as not needed as I reopen form below)\n    NewService.ActiveForm.Close();\n\n    var newForm = new NewService();\n    newForm.Show();\n}\n</code></pre>\n\n<p>TableAdapterManager.UpdateAll(MYPROGRAMDataSetdataSet) (Down to line 11240)</p>\n\n<pre><code>    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]\n    [global::System.CodeDom.Compiler.GeneratedCodeAttribute(\"System.Data.Design.TypedDataSetGenerator\", \"15.0.0.0\")]\n    public virtual int UpdateAll(MYPROGRAMDataSet dataSet) {\n        if ((dataSet == null)) {\n            throw new global::System.ArgumentNullException(\"dataSet\");\n        }\n        if ((dataSet.HasChanges() == false)) {\n            return 0;\n        }\n        if (((this._consumablesTableAdapter != null) \n                    &amp;&amp; (this.MatchTableAdapterConnection(this._consumablesTableAdapter.Connection) == false))) {\n            throw new global::System.ArgumentException(\"All TableAdapters managed by a TableAdapterManager must use the same connection s\" +\n                    \"tring.\");\n        }\n        if (((this._employeesTableAdapter != null) \n                    &amp;&amp; (this.MatchTableAdapterConnection(this._employeesTableAdapter.Connection) == false))) {\n            throw new global::System.ArgumentException(\"All TableAdapters managed by a TableAdapterManager must use the same connection s\" +\n                    \"tring.\");\n        }\n        if (((this._holidaysTableAdapter != null) \n                    &amp;&amp; (this.MatchTableAdapterConnection(this._holidaysTableAdapter.Connection) == false))) {\n            throw new global::System.ArgumentException(\"All TableAdapters managed by a TableAdapterManager must use the same connection s\" +\n                    \"tring.\");\n        }\n        if (((this._servicesTableAdapter != null) \n                    &amp;&amp; (this.MatchTableAdapterConnection(this._servicesTableAdapter.Connection) == false))) {\n            throw new global::System.ArgumentException(\"All TableAdapters managed by a TableAdapterManager must use the same connection s\" +\n                    \"tring.\");\n        }\n        if (((this._vehiclesTableAdapter != null) \n                    &amp;&amp; (this.MatchTableAdapterConnection(this._vehiclesTableAdapter.Connection) == false))) {\n            throw new global::System.ArgumentException(\"All TableAdapters managed by a TableAdapterManager must use the same connection s\" +\n                    \"tring.\");\n        }\n        if (((this._damagesTableAdapter != null) \n                    &amp;&amp; (this.MatchTableAdapterConnection(this._damagesTableAdapter.Connection) == false))) {\n            throw new global::System.ArgumentException(\"All TableAdapters managed by a TableAdapterManager must use the same connection s\" +\n                    \"tring.\");\n        }\n        if (((this._versionTableAdapter != null) \n                    &amp;&amp; (this.MatchTableAdapterConnection(this._versionTableAdapter.Connection) == false))) {\n            throw new global::System.ArgumentException(\"All TableAdapters managed by a TableAdapterManager must use the same connection s\" +\n                    \"tring.\");\n        }\n        if (((this._trailersTableAdapter != null) \n                    &amp;&amp; (this.MatchTableAdapterConnection(this._trailersTableAdapter.Connection) == false))) {\n            throw new global::System.ArgumentException(\"All TableAdapters managed by a TableAdapterManager must use the same connection s\" +\n                    \"tring.\");\n        }\n        if (((this._trailerSITableAdapter != null) \n                    &amp;&amp; (this.MatchTableAdapterConnection(this._trailerSITableAdapter.Connection) == false))) {\n            throw new global::System.ArgumentException(\"All TableAdapters managed by a TableAdapterManager must use the same connection s\" +\n                    \"tring.\");\n        }\n        global::System.Data.IDbConnection workConnection = this.Connection;\n        if ((workConnection == null)) {\n            throw new global::System.ApplicationException(\"TableAdapterManager contains no connection information. Set each TableAdapterMana\" +\n                    \"ger TableAdapter property to a valid TableAdapter instance.\");\n        }\n        bool workConnOpened = false;\n        if (((workConnection.State &amp; global::System.Data.ConnectionState.Broken) \n                    == global::System.Data.ConnectionState.Broken)) {\n            workConnection.Close();\n        }\n        if ((workConnection.State == global::System.Data.ConnectionState.Closed)) {\n            workConnection.Open();\n            workConnOpened = true;\n        }\n        global::System.Data.IDbTransaction workTransaction = workConnection.BeginTransaction();\n        if ((workTransaction == null)) {\n            throw new global::System.ApplicationException(\"The transaction cannot begin. The current data connection does not support transa\" +\n                    \"ctions or the current state is not allowing the transaction to begin.\");\n        }\n        global::System.Collections.Generic.List&lt;global::System.Data.DataRow&gt; allChangedRows = new global::System.Collections.Generic.List&lt;global::System.Data.DataRow&gt;();\n        global::System.Collections.Generic.List&lt;global::System.Data.DataRow&gt; allAddedRows = new global::System.Collections.Generic.List&lt;global::System.Data.DataRow&gt;();\n        global::System.Collections.Generic.List&lt;global::System.Data.Common.DataAdapter&gt; adaptersWithAcceptChangesDuringUpdate = new global::System.Collections.Generic.List&lt;global::System.Data.Common.DataAdapter&gt;();\n        global::System.Collections.Generic.Dictionary&lt;object, global::System.Data.IDbConnection&gt; revertConnections = new global::System.Collections.Generic.Dictionary&lt;object, global::System.Data.IDbConnection&gt;();\n        int result = 0;\n        global::System.Data.DataSet backupDataSet = null;\n        if (this.BackupDataSetBeforeUpdate) {\n            backupDataSet = new global::System.Data.DataSet();\n            backupDataSet.Merge(dataSet);\n        }\n        try {\n            // ---- Prepare for update -----------\n            //\n            if ((this._consumablesTableAdapter != null)) {\n                revertConnections.Add(this._consumablesTableAdapter, this._consumablesTableAdapter.Connection);\n                this._consumablesTableAdapter.Connection = ((global::System.Data.SqlClient.SqlConnection)(workConnection));\n                this._consumablesTableAdapter.Transaction = ((global::System.Data.SqlClient.SqlTransaction)(workTransaction));\n                if (this._consumablesTableAdapter.Adapter.AcceptChangesDuringUpdate) {\n                    this._consumablesTableAdapter.Adapter.AcceptChangesDuringUpdate = false;\n                    adaptersWithAcceptChangesDuringUpdate.Add(this._consumablesTableAdapter.Adapter);\n                }\n            }\n            if ((this._employeesTableAdapter != null)) {\n                revertConnections.Add(this._employeesTableAdapter, this._employeesTableAdapter.Connection);\n                this._employeesTableAdapter.Connection = ((global::System.Data.SqlClient.SqlConnection)(workConnection));\n                this._employeesTableAdapter.Transaction = ((global::System.Data.SqlClient.SqlTransaction)(workTransaction));\n                if (this._employeesTableAdapter.Adapter.AcceptChangesDuringUpdate) {\n                    this._employeesTableAdapter.Adapter.AcceptChangesDuringUpdate = false;\n                    adaptersWithAcceptChangesDuringUpdate.Add(this._employeesTableAdapter.Adapter);\n                }\n            }\n            if ((this._holidaysTableAdapter != null)) {\n                revertConnections.Add(this._holidaysTableAdapter, this._holidaysTableAdapter.Connection);\n                this._holidaysTableAdapter.Connection = ((global::System.Data.SqlClient.SqlConnection)(workConnection));\n                this._holidaysTableAdapter.Transaction = ((global::System.Data.SqlClient.SqlTransaction)(workTransaction));\n                if (this._holidaysTableAdapter.Adapter.AcceptChangesDuringUpdate) {\n                    this._holidaysTableAdapter.Adapter.AcceptChangesDuringUpdate = false;\n                    adaptersWithAcceptChangesDuringUpdate.Add(this._holidaysTableAdapter.Adapter);\n                }\n            }\n            if ((this._servicesTableAdapter != null)) {\n                revertConnections.Add(this._servicesTableAdapter, this._servicesTableAdapter.Connection);\n                this._servicesTableAdapter.Connection = ((global::System.Data.SqlClient.SqlConnection)(workConnection));\n                this._servicesTableAdapter.Transaction = ((global::System.Data.SqlClient.SqlTransaction)(workTransaction));\n                if (this._servicesTableAdapter.Adapter.AcceptChangesDuringUpdate) {\n                    this._servicesTableAdapter.Adapter.AcceptChangesDuringUpdate = false;\n                    adaptersWithAcceptChangesDuringUpdate.Add(this._servicesTableAdapter.Adapter);\n                }\n            }\n            if ((this._vehiclesTableAdapter != null)) {\n                revertConnections.Add(this._vehiclesTableAdapter, this._vehiclesTableAdapter.Connection);\n                this._vehiclesTableAdapter.Connection = ((global::System.Data.SqlClient.SqlConnection)(workConnection));\n                this._vehiclesTableAdapter.Transaction = ((global::System.Data.SqlClient.SqlTransaction)(workTransaction));\n                if (this._vehiclesTableAdapter.Adapter.AcceptChangesDuringUpdate) {\n                    this._vehiclesTableAdapter.Adapter.AcceptChangesDuringUpdate = false;\n                    adaptersWithAcceptChangesDuringUpdate.Add(this._vehiclesTableAdapter.Adapter);\n                }\n            }\n            if ((this._damagesTableAdapter != null)) {\n                revertConnections.Add(this._damagesTableAdapter, this._damagesTableAdapter.Connection);\n                this._damagesTableAdapter.Connection = ((global::System.Data.SqlClient.SqlConnection)(workConnection));\n                this._damagesTableAdapter.Transaction = ((global::System.Data.SqlClient.SqlTransaction)(workTransaction));\n                if (this._damagesTableAdapter.Adapter.AcceptChangesDuringUpdate) {\n                    this._damagesTableAdapter.Adapter.AcceptChangesDuringUpdate = false;\n                    adaptersWithAcceptChangesDuringUpdate.Add(this._damagesTableAdapter.Adapter);\n                }\n            }\n            if ((this._versionTableAdapter != null)) {\n                revertConnections.Add(this._versionTableAdapter, this._versionTableAdapter.Connection);\n                this._versionTableAdapter.Connection = ((global::System.Data.SqlClient.SqlConnection)(workConnection));\n                this._versionTableAdapter.Transaction = ((global::System.Data.SqlClient.SqlTransaction)(workTransaction));\n                if (this._versionTableAdapter.Adapter.AcceptChangesDuringUpdate) {\n                    this._versionTableAdapter.Adapter.AcceptChangesDuringUpdate = false;\n                    adaptersWithAcceptChangesDuringUpdate.Add(this._versionTableAdapter.Adapter);\n                }\n            }\n            if ((this._trailersTableAdapter != null)) {\n                revertConnections.Add(this._trailersTableAdapter, this._trailersTableAdapter.Connection);\n                this._trailersTableAdapter.Connection = ((global::System.Data.SqlClient.SqlConnection)(workConnection));\n                this._trailersTableAdapter.Transaction = ((global::System.Data.SqlClient.SqlTransaction)(workTransaction));\n                if (this._trailersTableAdapter.Adapter.AcceptChangesDuringUpdate) {\n                    this._trailersTableAdapter.Adapter.AcceptChangesDuringUpdate = false;\n                    adaptersWithAcceptChangesDuringUpdate.Add(this._trailersTableAdapter.Adapter);\n                }\n            }\n            if ((this._trailerSITableAdapter != null)) {\n                revertConnections.Add(this._trailerSITableAdapter, this._trailerSITableAdapter.Connection);\n                this._trailerSITableAdapter.Connection = ((global::System.Data.SqlClient.SqlConnection)(workConnection));\n                this._trailerSITableAdapter.Transaction = ((global::System.Data.SqlClient.SqlTransaction)(workTransaction));\n                if (this._trailerSITableAdapter.Adapter.AcceptChangesDuringUpdate) {\n                    this._trailerSITableAdapter.Adapter.AcceptChangesDuringUpdate = false;\n                    adaptersWithAcceptChangesDuringUpdate.Add(this._trailerSITableAdapter.Adapter);\n                }\n            }\n            // \n            //---- Perform updates -----------\n            //\n            if ((this.UpdateOrder == UpdateOrderOption.UpdateInsertDelete)) {\n                result = (result + this.UpdateUpdatedRows(dataSet, allChangedRows, allAddedRows));\n                result = (result + this.UpdateInsertedRows(dataSet, allAddedRows));\n            }\n            else {\n                result = (result + this.UpdateInsertedRows(dataSet, allAddedRows));\n                result = (result + this.UpdateUpdatedRows(dataSet, allChangedRows, allAddedRows));\n            }\n            result = (result + this.UpdateDeletedRows(dataSet, allChangedRows));\n            // \n            //---- Commit updates -----------\n            //\n            workTransaction.Commit();\n            if ((0 &lt; allAddedRows.Count)) {\n                global::System.Data.DataRow[] rows = new System.Data.DataRow[allAddedRows.Count];\n                allAddedRows.CopyTo(rows);\n                for (int i = 0; (i &lt; rows.Length); i = (i + 1)) {\n                    global::System.Data.DataRow row = rows[i];\n                    row.AcceptChanges();\n                }\n            }\n            if ((0 &lt; allChangedRows.Count)) {\n                global::System.Data.DataRow[] rows = new System.Data.DataRow[allChangedRows.Count];\n                allChangedRows.CopyTo(rows);\n                for (int i = 0; (i &lt; rows.Length); i = (i + 1)) {\n                    global::System.Data.DataRow row = rows[i];\n                    row.AcceptChanges();\n                }\n            }\n        }\n        catch (global::System.Exception ex) {\n            workTransaction.Rollback();\n            // ---- Restore the dataset -----------\n            if (this.BackupDataSetBeforeUpdate) {\n                global::System.Diagnostics.Debug.Assert((backupDataSet != null));\n                dataSet.Clear();\n                dataSet.Merge(backupDataSet);\n            }\n            else {\n                if ((0 &lt; allAddedRows.Count)) {\n                    global::System.Data.DataRow[] rows = new System.Data.DataRow[allAddedRows.Count];\n                    allAddedRows.CopyTo(rows);\n                    for (int i = 0; (i &lt; rows.Length); i = (i + 1)) {\n                        global::System.Data.DataRow row = rows[i];\n                        row.AcceptChanges();\n                        row.SetAdded();\n                    }\n                }\n            }\n            throw ex;\n</code></pre>\n"}, {"tags": ["c#", "asp.net-mvc", "elmah"], "comments": [{"owner": {"reputation": 4296, "user_id": 758765, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f3fed18422c9db37c455728ecf3f880c?s=128&d=identicon&r=PG", "display_name": "ThomasArdal", "link": "https://stackoverflow.com/users/758765/thomasardal"}, "edited": false, "score": 0, "creation_date": 1547108017, "post_id": 54118074, "comment_id": 95080077, "body": "I just created a blank MVC project and copy pasted your code. The error thrown when posting the ajax form is logged in ELMAH. Can you re-create this in a sample project for me to try out?"}, {"owner": {"reputation": 87, "user_id": 1601902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c81e868995ee023c628ee5123ba086?s=128&d=identicon&r=PG", "display_name": "kcabrams", "link": "https://stackoverflow.com/users/1601902/kcabrams"}, "reply_to_user": {"reputation": 4296, "user_id": 758765, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f3fed18422c9db37c455728ecf3f880c?s=128&d=identicon&r=PG", "display_name": "ThomasArdal", "link": "https://stackoverflow.com/users/758765/thomasardal"}, "edited": false, "score": 0, "creation_date": 1547737420, "post_id": 54118074, "comment_id": 95301902, "body": "I didn&#39;t realize there was a rich text editor on the page sending html. This is an apparent bug with elmah as seen here: <a href=\"https://stackoverflow.com/questions/11630435/elmah-not-logging-exceptions-for-http-post-requests-in-mvc-app-if-the-request?rq=1\" title=\"elmah not logging exceptions for http post requests in mvc app if the request\">stackoverflow.com/questions/11630435/&hellip;</a>"}, {"owner": {"reputation": 4296, "user_id": 758765, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f3fed18422c9db37c455728ecf3f880c?s=128&d=identicon&r=PG", "display_name": "ThomasArdal", "link": "https://stackoverflow.com/users/758765/thomasardal"}, "edited": false, "score": 1, "creation_date": 1547791364, "post_id": 54118074, "comment_id": 95321052, "body": "Maybe write an answer with that information and mark that as the correct answer?"}], "answers": [{"tags": [], "owner": {"reputation": 87, "user_id": 1601902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c81e868995ee023c628ee5123ba086?s=128&d=identicon&r=PG", "display_name": "kcabrams", "link": "https://stackoverflow.com/users/1601902/kcabrams"}, "is_accepted": true, "score": 0, "last_activity_date": 1559060637, "creation_date": 1559060637, "answer_id": 56346480, "question_id": 54118074, "link": "https://stackoverflow.com/questions/54118074/elmah-doesnt-log-exceptions-raised-from-asp-net-mvc-ajax-beginform/56346480#56346480", "title": "ELMAH doesn&#39;t log exceptions raised from ASP.NET MVC Ajax.BeginForm", "body": "<p>I didn't realize there was a rich text editor on the page sending html. This is an apparent bug with ELMAH as seen here: <a href=\"https://stackoverflow.com/questions/11630435/elmah-not-logging-exceptions-for-http-post-requests-in-mvc-app-if-the-request?rq=1\">Elmah not logging exceptions for http post requests in MVC app - if the request contains XML</a></p>\n"}], "owner": {"reputation": 87, "user_id": 1601902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c81e868995ee023c628ee5123ba086?s=128&d=identicon&r=PG", "display_name": "kcabrams", "link": "https://stackoverflow.com/users/1601902/kcabrams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 56346480, "answer_count": 1, "score": 1, "last_activity_date": 1559060637, "creation_date": 1547066700, "question_id": 54118074, "link": "https://stackoverflow.com/questions/54118074/elmah-doesnt-log-exceptions-raised-from-asp-net-mvc-ajax-beginform", "title": "ELMAH doesn&#39;t log exceptions raised from ASP.NET MVC Ajax.BeginForm", "body": "<p>I added ELMAH to my ASP.NET MVC project and all was well. I noticed that exceptions that arise from Ajax.BeginForm (simple ajax form post) do not get logged. </p>\n\n<p>When I make those same exceptions happen by calling the Controller Action directly OR doing a JQUERY $.post() ELMAH catches these exceptions.</p>\n\n<p>Controller .cs</p>\n\n<pre><code>[HttpPost]\n[Roles(AcctRoles.ThisRole)]\npublic ActionResult CreateTicket(TicketCreateViewModel ticketvm)\n{            \n    throw new Exception(\"HEY THIS IS AN AJAX ERROR. TEST.\");\n    return null;\n}\n</code></pre>\n\n<p>View (ELMAH DOES NOT LOG)</p>\n\n<pre><code>@using (Ajax.BeginForm(\"CreateTicket\", \"Tickets\", null, new AjaxOptions\n{\n    HttpMethod = \"POST\"\n}))\n{\n\n    &lt;div class=\"form-horizontal\"&gt;\n    Form here\n    &lt;/div&gt;\n}\n</code></pre>\n\n<p>JQUERY (ELMAH DOES LOG)</p>\n\n<pre><code> &lt;button onclick=\"$.post('@Url.Action(\"CreateTicket\", \"Tickets\")', '');\"&gt;TEST EXCEPTION BUTTON&lt;/button&gt;\n</code></pre>\n\n<p>When I use Fiddler or the Chrome Inspector network tab to view the response i see the normal Yellow Screen of death. When I look at the event viewer I see the standard ASP.NET warning entry.</p>\n"}, {"tags": ["c#", "unity3d"], "comments": [{"owner": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "edited": false, "score": 7, "creation_date": 1547066561, "post_id": 54118013, "comment_id": 95068610, "body": "Because C# defines literals for common types like strings and ints."}, {"owner": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "edited": false, "score": 3, "creation_date": 1547066625, "post_id": 54118013, "comment_id": 95068633, "body": "It&#39;s probably of little comfort now, especially for Unity, but C# 8 does combat this verbosity with it&#39;s <i>target-typed new-expressions</i> feature <a href=\"https://blogs.msdn.microsoft.com/dotnet/2018/11/12/building-c-8-0/\" rel=\"nofollow noreferrer\">seen here</a>."}, {"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 2, "creation_date": 1547066924, "post_id": 54118013, "comment_id": 95068747, "body": "Side note: with rectangular selection you really don&#39;t need to type that much... Keep &quot;Alt&quot; pressed when doing selection and select column - typing will fill all rows at the same time..."}, {"owner": {"reputation": 4573, "user_id": 395685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/506a37c8660a6faa6382086e4a538811?s=128&d=identicon&r=PG", "display_name": "Nyerguds", "link": "https://stackoverflow.com/users/395685/nyerguds"}, "edited": false, "score": 2, "creation_date": 1547067114, "post_id": 54118013, "comment_id": 95068828, "body": "Looking at that vector, there&#39;s only 11 unique float values in it. I&#39;d just hardcode those as array and write a couple of lines to generate the vector array itself."}, {"owner": {"reputation": 4431, "user_id": 4739488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8m1k.png?s=128&g=1", "display_name": "Flydog57", "link": "https://stackoverflow.com/users/4739488/flydog57"}, "edited": false, "score": 0, "creation_date": 1547067196, "post_id": 54118013, "comment_id": 95068872, "body": "And, more technically, <code>struct System.Int32</code> has no non-default constructor, so you can&#39;t say <code>var i = new int(42);</code>.  I&#39;m assuming that <code>Vector3</code> is a struct.  When you say: <code>new Vector3(-1.32f,1.32f),</code>, you are invoking its constructor that takes two floats.  If it is a <code>struct</code>, it has a system-written default constructor that simply initializes all its members to their default values."}, {"owner": {"reputation": 1578, "user_id": 342842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98efa40198faaa312c6465b969f1fae?s=128&d=identicon&r=PG", "display_name": "Immersive", "link": "https://stackoverflow.com/users/342842/immersive"}, "edited": false, "score": 0, "creation_date": 1547098175, "post_id": 54118013, "comment_id": 95076659, "body": "Simple answer for OP is that <code>int</code> is a <i>primitive</i> type and <code>Vector3</code> is a complex type.  With an array that size you should probably look into programmatically generating it, especially it&#39;s a defined and constant grid pattern.  A 1D-Array of values that you index into from a nested-for loop would be ideal."}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 5904738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3e8b8f1f15fcdd558f389dbbe00801?s=128&d=identicon&r=PG", "display_name": "bug", "link": "https://stackoverflow.com/users/5904738/bug"}, "edited": false, "score": 0, "creation_date": 1547068780, "post_id": 54118363, "comment_id": 95069570, "body": "I was about to answer with something like this, but I think they are using Unity&#39;s Vector3 struct, and as of C# 7 it&#39;s not currently possible to make a custom operator for a datatype you didn&#39;t define."}, {"owner": {"reputation": 10586, "user_id": 3645638, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/RZsDa.jpg?s=128&g=1", "display_name": "Svek", "link": "https://stackoverflow.com/users/3645638/svek"}, "reply_to_user": {"reputation": 88, "user_id": 5904738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3e8b8f1f15fcdd558f389dbbe00801?s=128&d=identicon&r=PG", "display_name": "bug", "link": "https://stackoverflow.com/users/5904738/bug"}, "edited": false, "score": 0, "creation_date": 1547069305, "post_id": 54118363, "comment_id": 95069762, "body": "@bug -- would inheriting the object not be an option?"}, {"owner": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "edited": false, "score": 2, "creation_date": 1547069363, "post_id": 54118363, "comment_id": 95069784, "body": "@Svek It&#39;s a <code>struct</code>, so no."}], "tags": [], "owner": {"reputation": 10586, "user_id": 3645638, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/RZsDa.jpg?s=128&g=1", "display_name": "Svek", "link": "https://stackoverflow.com/users/3645638/svek"}, "is_accepted": false, "score": 0, "last_activity_date": 1547076563, "last_edit_date": 1592644375, "creation_date": 1547067979, "answer_id": 54118363, "question_id": 54118013, "link": "https://stackoverflow.com/questions/54118013/why-do-we-use-the-new-keyword-when-initialising-a-vector3-but-not-an-integer/54118363#54118363", "title": "Why do we use the &quot;new&quot; keyword when initialising a Vector3, but not an integer?", "body": "<p>Based on the recent comments I would like to propose this solution (via an extension method).</p>\n<pre><code>var list  = new (float X, float Y, float Z)[2, 2]\n{\n    {(-1.32f, 0f, 1.32f), (-1.32f, 0f, 1.32f)},\n    {(-1.32f, 0f, 1.32f), (-1.32f, 0f, 1.32f)}\n};\n\nVector3[,] coordsList = list.ToVector3();\n</code></pre>\n<p>and then you could use an Extension method...</p>\n<pre><code>public static class Vector3Extensions\n{\n    public static Vector3[,] ToVector3(this (float X, float Y, float Z)[,] value)\n    {\n        int columnCount = value.GetUpperBound(0);\n        int rowCount = value.GetLength(0);\n        \n        var result = new Vector3[rowCount, columnCount];\n        for (int i = 0; i &lt; rowCount; i++)\n        {\n            for (int j = 0; j &lt; columnCount; j++)\n            {\n                var tuple = ((float X, float Y, float Z))value.GetValue(i, j);\n                result[i, j] = tuple.ToVector3();\n            }\n        }\n        \n        return result;\n    }\n    \n    public static Vector3 ToVector3(this (float X, float Y, float Z) value)\n    {\n        return new Vector3(value.X, value.Y, value.Z);\n    }\n}\n</code></pre>\n<blockquote>\n<p>Certainly, the original solution would be more efficient, but I was unaware that you were using a struct from Unity at the time. However, this solution still attempts to solve the same problem of readability and repetitive code.</p>\n</blockquote>\n<hr />\n<h2>Original Post</h2>\n<p>I will assume that the objective of your question is to do about readability and refactoring repetitive code. You could use <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/tuples\" rel=\"nofollow noreferrer\">tuples</a> alongside <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/implicit\" rel=\"nofollow noreferrer\">implicit operators</a> to make it a bit more like what you want....</p>\n<pre><code>public class Vector3\n{\n    public Vector3(float x, float y)\n    {\n        this.X = x;\n        this.Y = y;\n    }\n    \n    public float X { get; set; }\n    public float Y { get; set; }\n    \n    public static implicit operator (float X, float Y)(Vector3 value)\n    {\n        return (value.X, value.Y);\n    }\n\n    public static implicit operator Vector3 ((float X, float Y) value)\n    {\n        return new Vector3(value.X, value.Y);\n    }\n}\n</code></pre>\n<p>then you can construct it like so...</p>\n<pre><code>Vector3[,] coordsList  = new Vector3[2, 2]\n{\n    {(-1.32f,1.32f), (-1.32f,1.32f)},\n    {(-1.32f,1.32f), (-1.32f,1.32f)}\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2599, "user_id": 951139, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7ac47d5d14a032d62728a7aa202fcf3a?s=128&d=identicon&r=PG&f=1", "display_name": "TVOHM", "link": "https://stackoverflow.com/users/951139/tvohm"}, "is_accepted": false, "score": 3, "last_activity_date": 1547069052, "creation_date": 1547069052, "answer_id": 54118599, "question_id": 54118013, "link": "https://stackoverflow.com/questions/54118013/why-do-we-use-the-new-keyword-when-initialising-a-vector3-but-not-an-integer/54118599#54118599", "title": "Why do we use the &quot;new&quot; keyword when initialising a Vector3, but not an integer?", "body": "<pre><code>Vector3[][] list = new (float x, float y)[][]\n{\n    new[] { (1.5f, 3.4f), (1.5f, 6.8f) },\n    new[] { (1.5f, 3.4f), (1.5f, 6.8f) },\n    new[] { (1.5f, 3.4f), (1.5f, 6.8f) },\n    new[] { (1.5f, 3.4f), (1.5f, 6.8f) },\n}.Select(r =&gt; r.Select(v =&gt; new Vector3(v.x, v.y)).ToArray()).ToArray();\n</code></pre>\n\n<p>You could use <a href=\"https://blogs.msdn.microsoft.com/mazhou/2017/05/26/c-7-series-part-1-value-tuples/\" rel=\"nofollow noreferrer\">Value Tuples</a> (now supported in the latest version of Unity 2018.3) to construct your data in a readable and less tedious way - then you can use <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.select?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">Select</a> to transform these into Vector3s.</p>\n\n<p>I think most of the comments adequately cover your questions about the hows and whys of the new keyword here.</p>\n"}, {"comments": [{"owner": {"reputation": 10220, "user_id": 70104, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/859c44ae8a94cf8def8a9728369fcd2e?s=128&d=identicon&r=PG", "display_name": "Chris Dunaway", "link": "https://stackoverflow.com/users/70104/chris-dunaway"}, "edited": false, "score": 0, "creation_date": 1547233545, "post_id": 54119598, "comment_id": 95136151, "body": "It&#39;s not a <code>class</code>  but a <code>struct</code>.  <code>new</code> is required to call the constructor."}, {"owner": {"reputation": 409, "user_id": 10023317, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x8s-6L2oXzo/AAAAAAAAAAI/AAAAAAAADtA/_Oln0NvBiDI/photo.jpg?sz=128", "display_name": "Eric Bishop", "link": "https://stackoverflow.com/users/10023317/eric-bishop"}, "reply_to_user": {"reputation": 10220, "user_id": 70104, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/859c44ae8a94cf8def8a9728369fcd2e?s=128&d=identicon&r=PG", "display_name": "Chris Dunaway", "link": "https://stackoverflow.com/users/70104/chris-dunaway"}, "edited": false, "score": 0, "creation_date": 1547249794, "post_id": 54119598, "comment_id": 95141801, "body": "Thanks for the help! I edited the answer to be more correct."}], "tags": [], "owner": {"reputation": 409, "user_id": 10023317, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-x8s-6L2oXzo/AAAAAAAAAAI/AAAAAAAADtA/_Oln0NvBiDI/photo.jpg?sz=128", "display_name": "Eric Bishop", "link": "https://stackoverflow.com/users/10023317/eric-bishop"}, "is_accepted": false, "score": 1, "last_activity_date": 1547249755, "last_edit_date": 1547249755, "creation_date": 1547074451, "answer_id": 54119598, "question_id": 54118013, "link": "https://stackoverflow.com/questions/54118013/why-do-we-use-the-new-keyword-when-initialising-a-vector3-but-not-an-integer/54119598#54119598", "title": "Why do we use the &quot;new&quot; keyword when initialising a Vector3, but not an integer?", "body": "<p>The reason that the <code>Vector3</code> requires the <code>new</code> keyword is that a <code>Vector3</code> is a struct built into Unity, so every time you use the <code>new</code> keyword, you are making a new instance of a <code>Vector3</code> struct, whereas with a <code>string</code> or an <code>int</code>, these basic data types are from C#.</p>\n\n<p>Hope this helps explain the difference!</p>\n"}, {"tags": [], "owner": {"reputation": 1578, "user_id": 342842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a98efa40198faaa312c6465b969f1fae?s=128&d=identicon&r=PG", "display_name": "Immersive", "link": "https://stackoverflow.com/users/342842/immersive"}, "is_accepted": false, "score": 0, "last_activity_date": 1547099320, "creation_date": 1547099320, "answer_id": 54122590, "question_id": 54118013, "link": "https://stackoverflow.com/questions/54118013/why-do-we-use-the-new-keyword-when-initialising-a-vector3-but-not-an-integer/54122590#54122590", "title": "Why do we use the &quot;new&quot; keyword when initialising a Vector3, but not an integer?", "body": "<p>Your coords are an XY-mirrored grid, which means you only have about 6 unique values.  However, to make things easier, we'll keep track of the negative ones as well.</p>\n\n<pre><code>float[] values = new float[] { \n    1.32f,  1.08f,  0.84f,  0.6f,  0.36f,  0.12f, \n   -0.12f, -0.36f, -0.6f, -0.84f, -1.08f, -1.32f };\n</code></pre>\n\n<p>Now use a nested for-loop to populate your coords array:</p>\n\n<pre><code>Vector3[,] coordsList = new Vector3[11,11];\n\nvoid Init() { \n\n    for ( int x = 0; x &lt; coordsList.GetLength(0); x++) {\n        for ( int y = 0; y &lt; coordsList.GetLength(1); y++ ) {\n            coordsList[x, y] = new Vector3(-values[x], values[y]);\n        }\n    }\n}\n</code></pre>\n\n<p>If you want to maintain disparate coordinates (ie, not grid-mapped) then there are other means of forming the input data, but the conversion to <code>Vector3</code> is not going to change much at all.</p>\n"}], "owner": {"reputation": 345, "user_id": 9482067, "user_type": "registered", "profile_image": "https://graph.facebook.com/2023426007873730/picture?type=large", "display_name": "Tom Ryan", "link": "https://stackoverflow.com/users/9482067/tom-ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1547249755, "creation_date": 1547066428, "question_id": 54118013, "link": "https://stackoverflow.com/questions/54118013/why-do-we-use-the-new-keyword-when-initialising-a-vector3-but-not-an-integer", "title": "Why do we use the &quot;new&quot; keyword when initialising a Vector3, but not an integer?", "body": "<p>Why is it then if I were to initialise a string or an integer I could simply do this:</p>\n\n<pre><code>int number = 1;\nstring word = \"word\";\n</code></pre>\n\n<p>But if I want to initialise a Vector3 then I have to do:</p>\n\n<pre><code>Vector3 coordinate = new Vector3(1f,1f,1f);\n</code></pre>\n\n<p>The context to this is that I was creating a pretty large array and had to write out new Vector3... every time and it got pretty tedious:</p>\n\n<pre><code>Vector3[,] coordsList = new Vector3[11, 11]\n{\n    {new Vector3(-1.32f,1.32f), new Vector3(-1.08f,1.32f), new Vector3(-0.84f,1.32f), new Vector3(-0.6f,1.32f), new Vector3(-0.36f,1.32f), new Vector3(-0.12f,1.32f), new Vector3(0.12f,1.32f), new Vector3(0.36f,1.32f), new Vector3(0.6f,1.32f), new Vector3(0.84f,1.32f), new Vector3(1.08f,1.32f) },\n    {new Vector3(-1.32f,1.08f), new Vector3(-1.08f,1.08f), new Vector3(-0.84f,1.08f), new Vector3(-0.6f,1.08f), new Vector3(-0.36f,1.08f), new Vector3(-0.12f,1.08f), new Vector3(0.12f,1.08f), new Vector3(0.36f,1.08f), new Vector3(0.6f,1.08f), new Vector3(0.84f,1.08f), new Vector3(1.08f,1.08f) },\n    {new Vector3(-1.32f,0.84f), new Vector3(-1.08f,0.84f), new Vector3(-0.84f,0.84f), new Vector3(-0.6f,0.84f), new Vector3(-0.36f,0.84f), new Vector3(-0.12f,0.84f), new Vector3(0.12f,0.84f), new Vector3(0.36f,1.32f), new Vector3(0.6f,0.84f), new Vector3(0.84f,0.84f), new Vector3(1.08f,0.84f) },\n    {new Vector3(-1.32f,0.60f), new Vector3(-1.08f,0.60f), new Vector3(-0.84f,0.60f), new Vector3(-0.6f,0.60f), new Vector3(-0.36f,0.60f), new Vector3(-0.12f,0.60f), new Vector3(0.12f,0.60f), new Vector3(0.36f,0.60f), new Vector3(0.6f,0.60f), new Vector3(0.84f,0.60f), new Vector3(1.08f,0.60f) },\n    {new Vector3(-1.32f,0.36f), new Vector3(-1.08f,0.36f), new Vector3(-0.84f,0.36f), new Vector3(-0.6f,0.36f), new Vector3(-0.36f,0.36f), new Vector3(-0.12f,0.36f), new Vector3(0.12f,0.36f), new Vector3(0.36f,0.36f), new Vector3(0.6f,0.36f), new Vector3(0.84f,0.36f), new Vector3(1.08f,0.36f) },\n    {new Vector3(-1.32f,0.12f), new Vector3(-1.08f,0.12f), new Vector3(-0.84f,0.12f), new Vector3(-0.6f,0.12f), new Vector3(-0.36f,0.12f), new Vector3(-0.12f,0.12f), new Vector3(0.12f,0.12f), new Vector3(0.36f,0.12f), new Vector3(0.6f,0.12f), new Vector3(0.84f,0.12f), new Vector3(1.08f,0.12f) },\n    {new Vector3(-1.32f,-0.12f), new Vector3(-1.08f,-0.12f), new Vector3(-0.84f,-0.12f), new Vector3(-0.6f,-0.12f), new Vector3(-0.36f,-0.12f), new Vector3(-0.12f,-0.12f), new Vector3(0.12f,1.32f), new Vector3(0.36f,-0.12f), new Vector3(0.6f,-0.12f), new Vector3(0.84f,-0.12f), new Vector3(1.08f,-0.12f) },\n    {new Vector3(-1.32f,-0.36f), new Vector3(-1.08f,-0.36f), new Vector3(-0.84f,-0.36f), new Vector3(-0.6f,-0.36f), new Vector3(-0.36f,-0.36f), new Vector3(-0.12f,-0.36f), new Vector3(0.12f,-0.36f), new Vector3(0.36f,-0.36f), new Vector3(0.6f,-0.36f), new Vector3(0.84f,-0.36f), new Vector3(1.08f,-0.36f) },\n    {new Vector3(-1.32f,-0.6f), new Vector3(-1.08f,-0.6f), new Vector3(-0.84f,-0.6f), new Vector3(-0.6f,-0.6f), new Vector3(-0.36f,-0.6f), new Vector3(-0.12f,-0.6f), new Vector3(0.12f,-0.6f), new Vector3(0.36f,-0.6f), new Vector3(0.6f,-0.6f), new Vector3(0.84f,-0.6f), new Vector3(1.08f,-0.6f) },\n    {new Vector3(-1.32f,-0.84f), new Vector3(-1.08f,-0.84f), new Vector3(-0.84f,-0.84f), new Vector3(-0.6f,-0.84f), new Vector3(-0.36f,-0.84f), new Vector3(-0.12f,-0.84f), new Vector3(0.12f,-0.84f), new Vector3(0.36f,-0.84f), new Vector3(0.6f,-0.84f), new Vector3(0.84f,-0.84f), new Vector3(1.08f,-0.84f) },\n    {new Vector3(-1.32f,-1.08f), new Vector3(-1.08f,-1.08f), new Vector3(-0.84f,-1.08f), new Vector3(-0.6f,-1.08f), new Vector3(-0.36f,-1.08f), new Vector3(-0.12f,-1.08f), new Vector3(0.12f,-1.08f), new Vector3(0.36f,-1.08f), new Vector3(0.6f,-1.08f), new Vector3(0.84f,-1.08f), new Vector3(1.08f,-1.08f) },\n};\n</code></pre>\n\n<p>But yet it would have been considerably easier had it been an array of integers? What is it about a Vector3 that requires this <code>new</code> keyword that an integer or a string does not.</p>\n"}, {"tags": ["c#", "asp.net", "entity-framework", "api"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1547066899, "post_id": 54117956, "comment_id": 95068736, "body": "I think you&#39;re going to have to show us the code for your <code>EventLocalApi</code> class, if there&#39;s any hope of getting you an answer."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1547066975, "post_id": 54117956, "comment_id": 95068776, "body": "Also, you&#39;d better get used to being more precise, both in your English and in how you format your code.  Computers are brutal taskmasters when it comes to precision."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1547067026, "post_id": 54117956, "comment_id": 95068798, "body": "I guess you&#39;d better show us your stored procedure as well."}, {"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1547067276, "post_id": 54117956, "comment_id": 95068896, "body": "is your db context recreated every time? use a new dbcontext for every request."}, {"owner": {"reputation": 1, "user_id": 9798470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5eca193ef989b590034d1b0892359cc?s=128&d=identicon&r=PG&f=1", "display_name": "LioStudent", "link": "https://stackoverflow.com/users/9798470/liostudent"}, "edited": false, "score": 0, "creation_date": 1547067356, "post_id": 54117956, "comment_id": 95068928, "body": "Yeah I use a new dbContext for every request because i know it can mess things up"}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1547067488, "post_id": 54117956, "comment_id": 95068979, "body": "Well, this is almost certainly happening because you have changes to an EF Entity and a Stored Procedure in play at the same time.  How to fix it?  Hard to tell; this code strikes me as more complicated than it needs to be, and I don&#39;t have a database schema in front of me, so."}, {"owner": {"reputation": 1, "user_id": 9798470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5eca193ef989b590034d1b0892359cc?s=128&d=identicon&r=PG&f=1", "display_name": "LioStudent", "link": "https://stackoverflow.com/users/9798470/liostudent"}, "edited": false, "score": 0, "creation_date": 1547067800, "post_id": 54117956, "comment_id": 95069119, "body": "I don&#39;t see where in the code an EF Entity would be changed, if that&#39;s the case, how can i proceed to find which one?"}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1547067881, "post_id": 54117956, "comment_id": 95069154, "body": "<code>local.SaveChanges();</code> implies that an EF entity is being changed."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1547067934, "post_id": 54117956, "comment_id": 95069170, "body": "You may not need SaveChanges at all.  The SP will work without it.  But again, I don&#39;t understand your code well enough to know for sure."}, {"owner": {"reputation": 1, "user_id": 9798470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5eca193ef989b590034d1b0892359cc?s=128&d=identicon&r=PG&f=1", "display_name": "LioStudent", "link": "https://stackoverflow.com/users/9798470/liostudent"}, "edited": false, "score": 0, "creation_date": 1547067980, "post_id": 54117956, "comment_id": 95069196, "body": "Excuse me because i&#39;ts could be a dumb question, but after a delete query, have I to do local.SaveChanges() or this is not an obligation?"}, {"owner": {"reputation": 1, "user_id": 9798470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5eca193ef989b590034d1b0892359cc?s=128&d=identicon&r=PG&f=1", "display_name": "LioStudent", "link": "https://stackoverflow.com/users/9798470/liostudent"}, "edited": false, "score": 0, "creation_date": 1547068005, "post_id": 54117956, "comment_id": 95069205, "body": "Ok you just answered my question, thank you ! I&#39;ll try that"}, {"owner": {"reputation": 1, "user_id": 9798470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5eca193ef989b590034d1b0892359cc?s=128&d=identicon&r=PG&f=1", "display_name": "LioStudent", "link": "https://stackoverflow.com/users/9798470/liostudent"}, "edited": false, "score": 0, "creation_date": 1547068262, "post_id": 54117956, "comment_id": 95069329, "body": "The local.SaveChanges is not the problem"}], "owner": {"reputation": 1, "user_id": 9798470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5eca193ef989b590034d1b0892359cc?s=128&d=identicon&r=PG&f=1", "display_name": "LioStudent", "link": "https://stackoverflow.com/users/9798470/liostudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1547068133, "answer_count": 0, "score": 0, "last_activity_date": 1547068561, "creation_date": 1547066237, "last_edit_date": 1547068561, "question_id": 54117956, "link": "https://stackoverflow.com/questions/54117956/new-transaction-is-not-allowed-because-there-are-other-threads-running-in-the-se", "closed_reason": "Duplicate", "title": "New transaction is not allowed because there are other threads running in the session SQL error Web API C# Entity Framework", "body": "<p>I'm developing a Web API, I use Entity Framework to access the database. In one of my controllers, I'm running a delete query by calling a stored procedure. And when the query is executed, this exception is thrown:</p>\n\n<blockquote>\n  <p>New transaction is not allowed because there are other threads running in the session. </p>\n</blockquote>\n\n<p>Here is my code :</p>\n\n<pre><code>using (var local = new EventLocalApi()) \n{ \n    var result = local.getParticipationById(userId,id);\n    int nbParticipation = local.getPartipationsEvent(id).Count();\n    int role = local.getPartipationsEvent(id).First().Role;\n\n    if (result == null)\n    {\n        return Request.CreateResponse(HttpStatusCode.NotFound, \"Event does not exist\");\n    }\n    else\n    {\n        if (role == 1)\n        {\n            if (nbParticipation == 1)\n            {\n                db.DeleteParticipations(id, userId);\n            }\n            else\n            {\n                try\n                {\n                    local.DeleteParticipations(id, userId);\n                    var Participation = local.getPartipationsEvent(id);\n                    Participation.First().Role = 1;\n                }\n                catch (System.Data.Entity.Core.EntityException ex)\n                {\n                    return Request.CreateResponse(HttpStatusCode.NotFound, ex.Message);\n                }\n            }\n        }\n        else\n        {\n            local.DeleteParticipations(id, userId);\n        }              \n    }\n\n    local.SaveChanges();\n\n    return Request.CreateResponse(HttpStatusCode.Accepted, \"Participation Deleted\");\n}\n</code></pre>\n\n<p>I've read many topics about this error, but it's always because of a foreach statement or saveChanges() performed at the wrong place, but I don't see any of these mistakes in my code.</p>\n\n<p>The code of EventLocalApi :</p>\n\n<pre><code>public virtual int DeleteParticipations(Nullable&lt;int&gt; idEvent, Nullable&lt;int&gt; idUser)\n{\n    var idEventParameter = idEvent.HasValue ?\n        new ObjectParameter(\"idEvent\", idEvent) :\n        new ObjectParameter(\"idEvent\", typeof(int));\n\n    var idUserParameter = idUser.HasValue ?\n        new ObjectParameter(\"idUser\", idUser) :\n        new ObjectParameter(\"idUser\", typeof(int));\n\n    return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction(\"DeleteParticipations\", idEventParameter, idUserParameter);\n}\n</code></pre>\n\n<p>The stored procedure in SQL Server :</p>\n\n<pre><code>DELETE p\nFROM Participations p\nWHERE IdEvent = @idEvent AND @idUser = UserId\n</code></pre>\n"}, {"tags": ["c#", "php", "encryption"], "comments": [{"owner": {"reputation": 44030, "user_id": 453002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/66e564e1221dfd0bfd24e7c47e2079ea?s=128&d=identicon&r=PG", "display_name": "Alex Howansky", "link": "https://stackoverflow.com/users/453002/alex-howansky"}, "edited": false, "score": 3, "creation_date": 1547066493, "post_id": 54117949, "comment_id": 95068582, "body": "The PHP mcrypt extension has been deprecated, you should avoid writing new code with it."}, {"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1547066598, "post_id": 54117949, "comment_id": 95068622, "body": "Show us the C# code you tried...  StackOverflow isn&#39;t a code writing service."}, {"owner": {"reputation": 33, "user_id": 6599140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7775a429cd5a0d20e1a71f06ef7e0fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/6599140/mohammad"}, "edited": false, "score": 0, "creation_date": 1547066668, "post_id": 54117949, "comment_id": 95068651, "body": "@AlexHowanskyThank you for response it&#39;s a htto://chatwing.com example for integrating custom login with my website I don&#39;t know PHP I just want similar code in .NET to integrate my authentication with Chatwing"}, {"owner": {"reputation": 33, "user_id": 6599140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7775a429cd5a0d20e1a71f06ef7e0fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/6599140/mohammad"}, "edited": false, "score": 0, "creation_date": 1547067001, "post_id": 54117949, "comment_id": 95068788, "body": "@LukeJoshuaParkI know but I couldn&#39;t finish it because functions are different and I couldn&#39;t write anything useful"}, {"owner": {"reputation": 33, "user_id": 6599140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7775a429cd5a0d20e1a71f06ef7e0fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/6599140/mohammad"}, "reply_to_user": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 0, "creation_date": 1547068206, "post_id": 54117949, "comment_id": 95069299, "body": "@LukeJoshuaPark i edited the question and added my code"}], "owner": {"reputation": 33, "user_id": 6599140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7775a429cd5a0d20e1a71f06ef7e0fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/6599140/mohammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547068158, "creation_date": 1547066221, "last_edit_date": 1547068158, "question_id": 54117949, "link": "https://stackoverflow.com/questions/54117949/translating-php-encryption-code-to-c-mcrypt-encrypt", "title": "Translating PHP encryption code to C# (mcrypt_encrypt)", "body": "<p>I have a few lines of code in PHP and I wanna the same code in c# \nI tried to translate it by myself but I couldn't </p>\n\n<p>here is my code :</p>\n\n<pre><code>$data = array(\n  'id' =&gt; 1,\n  'name' =&gt; 'Custom Login',\n  'avatar' =&gt; 'http://example.com/avatar/1.png',\n  'expiration' =&gt; round(microtime(true) * 1000) + 60*60*1000 // in millisecond\n);\n\n$data = json_encode($data);\n\n$blocksize = 16;\n\n$secret = '';\n$md5 = md5($secret);\n\n// Strictly maintains the length of key and iv\n$key = substr($md5, 0, 16);\n$iv = substr($md5, 16, 16);\n\n// We need to pad the input manually to match with the server-side's padding scheme\n$pad = $blocksize - (strlen($data) % $blocksize);\n$data = $data . str_repeat(chr($pad), $pad);\n\n$encryptedSession = bin2hex(mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_CBC, $iv));\n</code></pre>\n\n<p>I'm now familiar with PHP and the methods seem to have different functionality in PHP and c#</p>\n\n<p>here's the code I've tried : </p>\n\n<pre><code>public static string CreateMD5(string input)\n            {\n                using (System.Security.Cryptography.MD5 md5 = System.Security.Cryptography.MD5.Create())\n                {\n                    byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(input);\n                    byte[] hashBytes = md5.ComputeHash(inputBytes);\n\n                    // Convert the byte array to hexadecimal string\n                    StringBuilder sb = new StringBuilder();\n                    for (int i = 0; i &lt; hashBytes.Length; i++)\n                    {\n                        sb.Append(hashBytes[i].ToString(\"X2\"));\n                    }\n                    return sb.ToString();\n                }\n            }\n</code></pre>\n\n<p>the section above for getting MD5 </p>\n\n<pre><code>static public String EncryptRJ256(string data,int blockSize,string secret)\n        {\n            var md5 = CreateMD5(secret);\n\n            var encoding = new UTF8Encoding();\n            var Key = md5.Substring(0, 16);\n            var IV = md5.Substring(16,16);\n            var pad = blockSize - (data.Length % blockSize);\n\n            data = string.Join(\"\", Enumerable.Repeat((char)pad, 2));\n            byte[] encrypted;\n            using (var rj = new RijndaelManaged())\n            {\n                try\n                {\n                    rj.Padding = PaddingMode.PKCS7;\n                    rj.Mode = CipherMode.CBC;\n                    rj.KeySize = 256;\n                    rj.BlockSize = blockSize;\n                    rj.Key = Encoding.ASCII.GetBytes(Key);\n                    rj.IV = Encoding.ASCII.GetBytes(IV);\n\n                    var ms = new MemoryStream();\n\n                    using (var cs = new CryptoStream(ms, rj.CreateEncryptor(rj.Key, rj.IV), CryptoStreamMode.Write))\n                    {\n                        using (var sr = new StreamWriter(cs))\n                        {\n                            sr.Write(data);\n                            sr.Flush();\n                            cs.FlushFinalBlock();\n                        }\n                        encrypted = ms.ToArray();\n                    }\n                }\n                finally\n                {\n                    rj.Clear();\n                }\n            }\n\n            return Convert.ToBase64String(encrypted);\n        }\n</code></pre>\n\n<p>the section above for simulating php mcrypt_encrypt</p>\n\n<p>any suggestion?</p>\n"}, {"tags": ["c#", "gaussian"], "comments": [{"owner": {"reputation": 1190, "user_id": 9714791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hpV5X.png?s=128&g=1", "display_name": "Mehrdad Dowlatabadi", "link": "https://stackoverflow.com/users/9714791/mehrdad-dowlatabadi"}, "edited": false, "score": 0, "creation_date": 1547070827, "post_id": 54117920, "comment_id": 95070412, "body": "can you provide rest of code?"}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1547073855, "post_id": 54117920, "comment_id": 95071501, "body": "This question doesn&#39;t make any sense; a normal distribution that is clamped to a particular range is <i>not a normal distribution</i>, so asking why you&#39;re not getting that is a strange question. Can you explain in much more detail what you believe a &quot;normal&quot; distribution is, and why you believe it should have a limited range? The whole <i>point</i> of a normal distribution is that any value can be sampled from it."}, {"owner": {"reputation": 1, "user_id": 10891963, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ATwkK5azTF4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZT0olZ5MDYCpe29x8GQNecrWrLrg/mo/photo.jpg?sz=128", "display_name": "Carl Cassar", "link": "https://stackoverflow.com/users/10891963/carl-cassar"}, "reply_to_user": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1547112030, "post_id": 54117920, "comment_id": 95082131, "body": "Hi @EricLippert, this is a question I have in an assignment. The scenario is:  In a 3 dimensional scenario, lines within a unit square are selected as described below: Define a line within the unit cube by its two end-points: (\ud835\udc651, \ud835\udc661, \ud835\udc671) and (\ud835\udc652, \ud835\udc662, \ud835\udc672), where \ud835\udc651, \ud835\udc652, \ud835\udc661, \ud835\udc662, \ud835\udc671, \ud835\udc672 \u2208 [0, 1]  The Question asked in the assignment is then :  In a variation of the 3-dim problem above, \ud835\udc651, \ud835\udc652, \ud835\udc661, \ud835\udc662, \ud835\udc671, \ud835\udc672 are generated using \ud835\udca9(0, 1). In other words, the coordinates of the line are generated using the standard normal distribution (mean 0 and standard deviation 1)."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1547132521, "post_id": 54117920, "comment_id": 95094132, "body": "Then the assignment needs a great deal of clarification; I would talk to your instructor or teaching assistant and ask what the distribution is intended to be, because &quot;normally distributed on a unit cube&quot; doesn&#39;t make sense."}], "answers": [{"tags": [], "owner": {"reputation": 1061, "user_id": 7293119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eznd2.png?s=128&g=1", "display_name": "Pretasoc", "link": "https://stackoverflow.com/users/7293119/pretasoc"}, "is_accepted": false, "score": 0, "last_activity_date": 1547073215, "last_edit_date": 1547073215, "creation_date": 1547072525, "answer_id": 54119264, "question_id": 54117920, "link": "https://stackoverflow.com/questions/54117920/generating-random-standard-normal-distribution-number-using-box-muller-method/54119264#54119264", "title": "Generating Random Standard normal distribution number using box-muller method", "body": "<p>I think you problen lies in a missunderstanding of the normal distribution. A normal distribution gives you numbers in range <code>(-inf, inf)</code>. Although the larger the absolute value the less probable the number is (not linear). You can see that on every picture of a normal distribution. To put it simple the mean is the value of the hightest probability and the standard deviation defines how peaky the curve is,</p>\n\n<p>Since you want only values in <code>[mean, mean + standard dev]</code> i recommend to tweak the distribution a little and use the absolute value of the random number (in relation to the mean) and cut that at the standard deviation treating this value as the value of <code>mean + standart dev</code>.</p>\n\n<pre><code>public static double NextRandomWithinStandardDeviation(this Gaussian gaussian)\n{\n    return Math.Min(\n        Math.Abs(gaussian.NextRandom() - gaussian.Mean) + gaussian.Mean,\n        gaussian.Mean + gaussian.StandardDeviation\n    );\n}\n</code></pre>\n\n<p>However this will not be truely normal distributed. In fact 21.73% of all generated random numbers will be outside of your interval, witch raises the probability to get <code>mean + standard deviation</code> significantly.</p>\n\n<p>An other approach could be to generate random number, until the generated number is within the interval. This could theoretically take forever, but probability to get a number outside of the interval after the fifth iteration is less than 0.01%.</p>\n\n<pre><code>public static double NextRandomWithinStandardDeviation(this Gaussian gaussian)\n{\n    double randomNumer;\n    do\n    {\n        randomNumber = Math.Abs(gaussian.NextRandom() - gaussian.Mean) + gaussian.Mean;\n    }while(randomNumber &gt; gaussian.Mean + gaussian.StandardDeviation);\n\n    return randomNumber;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10891963, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ATwkK5azTF4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZT0olZ5MDYCpe29x8GQNecrWrLrg/mo/photo.jpg?sz=128", "display_name": "Carl Cassar", "link": "https://stackoverflow.com/users/10891963/carl-cassar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1547073215, "creation_date": 1547066077, "question_id": 54117920, "link": "https://stackoverflow.com/questions/54117920/generating-random-standard-normal-distribution-number-using-box-muller-method", "title": "Generating Random Standard normal distribution number using box-muller method", "body": "<p>I need to generate Random standard normal distribution numbers between 0 and 1 both included with mean 0 and Standard dev 1. The problem is that although code is working the random numbers generated are not between 0 and 1.</p>\n\n<p>This is the method using Box-muller algorithm:</p>\n\n<pre><code>public double NextGaussian()\n    {\n            double u1 = r.NextDouble();\n            double u2 = r.NextDouble();\n            double left = Math.Cos(2.0 * Math.PI * u1);\n            double right = Math.Sqrt(-2.0 * Math.Log(u2));\n            double z = left * right;\n            return this.mean + (z * this.standardDeviation);          \n    }\n</code></pre>\n\n<p>Then in the main method:</p>\n\n<pre><code>Gaussian g = new Gaussian(0.0, 1.0);\ndouble a = g.NextGaussian();\n</code></pre>\n\n<p>I expect variable a to have a value between 0 and 1 both included, but the actual output are all the numbers</p>\n"}, {"tags": ["c#"], "answers": [{"comments": [{"owner": {"reputation": 43407, "user_id": 2791540, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/bbd133916bdbabcde7c31ab28f4b4e6b?s=128&d=identicon&r=PG&f=1", "display_name": "John Wu", "link": "https://stackoverflow.com/users/2791540/john-wu"}, "edited": false, "score": 0, "creation_date": 1547066406, "post_id": 54117972, "comment_id": 95068550, "body": "I&#39;d upvote but this is a code-only answer, which are discouraged."}], "tags": [], "owner": {"reputation": 100, "user_id": 6371323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a291107dc20d4c374ad2513860fb0a3b?s=128&d=identicon&r=PG&f=1", "display_name": "Vadim", "link": "https://stackoverflow.com/users/6371323/vadim"}, "is_accepted": true, "score": 0, "last_activity_date": 1547066819, "last_edit_date": 1547066819, "creation_date": 1547066291, "answer_id": 54117972, "question_id": 54117816, "link": "https://stackoverflow.com/questions/54117816/fill-view-model-after-fill-another-properties/54117972#54117972", "title": "Fill view model after fill another properties", "body": "<p>You can use <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/member-access-operator\" rel=\"nofollow noreferrer\"><strong>. operator</strong></a> to access <em>PreliminaryDesignNames</em> property from instance of <em>PurchaseOrderPreliminaryCSVModel</em> type (tempResult in your code)</p>\n\n<pre><code>...\nforeach (var r in records)\n{\n    PurchaseOrderPreliminaryCSVModel tempResult = new PurchaseOrderPreliminaryCSVModel\n    {\n        Item1 = r.Item1,\n        Item2 = r.Item2,\n        Item3 = r.Item3,\n        Item4 = r.Item4,\n    };\n    var designNames = _purchaseOrderRepository.GetPreliminaryDesignNames(fileName);\n    tempResult.PreliminaryDesignNames.AddRange(designNames);\n    result.Add(tempResult);\n}\n...\n</code></pre>\n"}], "owner": {"reputation": 571, "user_id": 10463112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c1dd11ace2db311a7cf8a80ec59dc0?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/10463112/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 54117972, "answer_count": 1, "score": 0, "last_activity_date": 1547066819, "creation_date": 1547065607, "question_id": 54117816, "link": "https://stackoverflow.com/questions/54117816/fill-view-model-after-fill-another-properties", "title": "Fill view model after fill another properties", "body": "<p>I have a Model like:</p>\n\n<pre><code> public class PurchaseOrderPreliminaryCSVModel\n    {\n        public string Item1 { get; set; }\n        public string Item2 { get; set; }\n        public string Item3 { get; set; }\n        public string Item4 { get; set; }\n        public IList&lt;PreliminaryPurchaseOrderDesignNameViewModel&gt; PreliminaryDesignNames { get; set; } = new List&lt;PreliminaryPurchaseOrderDesignNameViewModel&gt;();\n\n        public class PreliminaryPurchaseOrderDesignNameViewModel\n        {\n            public List&lt;IEnumerable&gt; DesignName { get; set; }\n        }\n    }\n</code></pre>\n\n<p>So I fill item objects as:</p>\n\n<pre><code>List&lt;PurchaseOrderPreliminaryCSVModel&gt; result = new List&lt;PurchaseOrderPreliminaryCSVModel&gt;();\n try\n            {\n                if (Path.GetExtension(fileName).Equals(\".csv\"))\n                {\n                    using (MemoryStream memory = new MemoryStream(model.PreliminaryFile.File))\n                    {\n                        using (var reader = new StreamReader(memory))\n\n                        using (var csv = new CsvReader(reader))\n                        {\n                            var record = new PurchaseOrderPreliminaryCSVModel();\n                            var records = csv.EnumerateRecords(record);\n\n                            foreach (var r in records)\n                            {\n                                PurchaseOrderPreliminaryCSVModel tempResult = new PurchaseOrderPreliminaryCSVModel\n                                {\n                                    Item1 = r.Item1,\n                                    Item2 = r.Item2,\n                                    Item3 = r.Item3,\n                                    Item4 = r.Item4,\n                                };\n                                result.Add(tempResult);\n                            }\n                        }\n                    }\n</code></pre>\n\n<p>So I get list of ViewModel into another method that I execute as:</p>\n\n<pre><code>var designNames = _purchaseOrderRepository.GetPreliminaryDesignNames(fileName);\n</code></pre>\n\n<p>My question is: how can I fill that model:  <code>PreliminaryDesignNames { get; set; }</code> once another records are added into <code>foreach</code>, something like:</p>\n\n<pre><code>result.Add(designNames);\n</code></pre>\n\n<p>But specifying to fill that view model. How can I do that? Regards</p>\n"}, {"tags": ["c#", "forms", "class"], "comments": [{"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "edited": false, "score": 0, "creation_date": 1547065825, "post_id": 54117758, "comment_id": 95068309, "body": "It&#39;s generally best to create a model, a class, that represents the data you&#39;re entering and create instances of that model to hold your data."}, {"owner": {"reputation": 13, "user_id": 10891888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b56331b04f7cb4d940ecf668aca1046?s=128&d=identicon&r=PG&f=1", "display_name": "NootyToot", "link": "https://stackoverflow.com/users/10891888/nootytoot"}, "reply_to_user": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "edited": false, "score": 0, "creation_date": 1547066041, "post_id": 54117758, "comment_id": 95068395, "body": "Thanks for replying, does that mean I would have to create enough instances in advance, say, I know I&#39;m going to enter 5 peoples worth of data, therefore set up 5 instances in advance, then on my data entry form, I can have a save button, that will take the data in the text boxes and add that to an instance? thanks again!"}, {"owner": {"reputation": 298, "user_id": 8716703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1567167013369661/picture?type=large", "display_name": "RKrum", "link": "https://stackoverflow.com/users/8716703/rkrum"}, "edited": false, "score": 1, "creation_date": 1547066043, "post_id": 54117758, "comment_id": 95068397, "body": "My guess is that no answer you may get here would satisfy your needs fully.. My advice is that you take some reading on Object Orientation before proceeding with your project. It will help you a lot on &quot;why&quot;, &quot;how&quot; and &quot;when&quot; to use classes, like this one: <a href=\"https://dev.to/charanrajgolla/beginners-guide---object-oriented-programming\" rel=\"nofollow noreferrer\">dev.to/charanrajgolla/&hellip;</a>"}, {"owner": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 0, "creation_date": 1547066117, "post_id": 54117758, "comment_id": 95068433, "body": "You should contrive an example that you can play with and try different things out to learn the different aspects.  It would also help you ask better, more concrete questions.  This is a bit...open ended"}, {"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "edited": false, "score": 0, "creation_date": 1547066173, "post_id": 54117758, "comment_id": 95068451, "body": "You wouldn&#39;t create 5 instances in advance, just create them as needed. Right now this question is far too broad to answer but try to put together an example you can learn with and ask a more specific question."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10891888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b56331b04f7cb4d940ecf668aca1046?s=128&d=identicon&r=PG&f=1", "display_name": "NootyToot", "link": "https://stackoverflow.com/users/10891888/nootytoot"}, "edited": false, "score": 0, "creation_date": 1547067282, "post_id": 54118096, "comment_id": 95068898, "body": "i&#39;m pretty sure your explanation just answered a bunch of my questions and made a few things click into place, so thanks for that! :)"}, {"owner": {"reputation": 4573, "user_id": 395685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/506a37c8660a6faa6382086e4a538811?s=128&d=identicon&r=PG", "display_name": "Nyerguds", "link": "https://stackoverflow.com/users/395685/nyerguds"}, "edited": false, "score": 0, "creation_date": 1547067408, "post_id": 54118096, "comment_id": 95068947, "body": "Added note: &quot;Should I make methods for getting/setting these variables&quot;? <b>No</b>. The concept of Properties takes care of that. <code>Public String Name { get; set; }</code> is the C# equivalent to what in Java would be a private variable with its public getter and setter functions. Note that properties <i>can</i> be used to set private variables (look that up yourself), but unless the setting/getting is more code than just passing along the value, it shouldn&#39;t be needed."}, {"owner": {"reputation": 57478, "user_id": 1783619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BIvl.png?s=128&g=1", "display_name": "BradleyDotNET", "link": "https://stackoverflow.com/users/1783619/bradleydotnet"}, "reply_to_user": {"reputation": 4573, "user_id": 395685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/506a37c8660a6faa6382086e4a538811?s=128&d=identicon&r=PG", "display_name": "Nyerguds", "link": "https://stackoverflow.com/users/395685/nyerguds"}, "edited": false, "score": 1, "creation_date": 1547067568, "post_id": 54118096, "comment_id": 95069004, "body": "@Nyerguds Thanks, missed that mistake in the OP. Added to my answer."}], "tags": [], "owner": {"reputation": 57478, "user_id": 1783619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BIvl.png?s=128&g=1", "display_name": "BradleyDotNET", "link": "https://stackoverflow.com/users/1783619/bradleydotnet"}, "is_accepted": true, "score": 2, "last_activity_date": 1547067550, "last_edit_date": 1547067550, "creation_date": 1547066796, "answer_id": 54118096, "question_id": 54117758, "link": "https://stackoverflow.com/questions/54117758/using-classes-with-forms/54118096#54118096", "title": "Using classes with forms", "body": "<ul>\n<li>Should you store those fields in objects? <strong>Yes</strong></li>\n<li>Should those objects be stored in a collection (like an array)? <strong>Yes</strong></li>\n<li>Would persisting that collection to a file make sense? <strong>Yes</strong></li>\n</ul>\n\n<p>Basically, you are asking to choose an alternative among things that aren't really comparable, much less mutually exclusive. As the comments suggest, make sure to read up on object oriented programming, but here's a quick explanation of each of the above:</p>\n\n<p><strong>Objects</strong> provide a structured way to store information (giving each field a name and a type, for starters) and a way for the language/compiler to enforce that structure. Storing all the related data for an entity in an object is a <em>great</em> idea, you almost never want to have a bunch of members for that purpose.</p>\n\n<p><strong>Arrays</strong> or more generally, collections, are groups of \"things\". You <em>could</em> have stored all that information in an array instead of an object (and then for multiple records had \"parallel\" arrays\" but this is a very messy and amateur technique). A collection of your objects however, is a totally reasonable thing to do (you don't want <code>object1</code>, <code>object2</code>, <code>object3</code> variables in your code).</p>\n\n<p><strong>Files</strong> are important because both objects and collections (which are, in and of themselves, objects) are stored in <em>memory</em>, they will go away when the application closes. Files (and similar, like databases) give you a way to persist them (hence such techniques being referred to as a \"persistence\" layer). You can then load the persisted data into a new instance of your program (say if the user restarts the computer).</p>\n\n<hr>\n\n<p>Side note: Should I make methods for getting/setting these variables? <strong>No</strong>.</p>\n\n<p>Just use properties (ie, <code>public string Address {get; set;}</code>). They provide both a backing field (at least with an auto property like the above) and are syntactic sugar for both get and set methods (which you can override with a \"full\" property).</p>\n\n<p>As a bonus, if using WPF you can automate the population of properties from UI with data binding, but that's a question for another day :).</p>\n"}], "owner": {"reputation": 13, "user_id": 10891888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b56331b04f7cb4d940ecf668aca1046?s=128&d=identicon&r=PG&f=1", "display_name": "NootyToot", "link": "https://stackoverflow.com/users/10891888/nootytoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 54118096, "answer_count": 1, "score": 0, "last_activity_date": 1547067550, "creation_date": 1547065363, "last_edit_date": 1547065723, "question_id": 54117758, "link": "https://stackoverflow.com/questions/54117758/using-classes-with-forms", "title": "Using classes with forms", "body": "<p>I'm trying to understand whether or not it is correct to use a class when entering data into a form. I am unsure whether my understanding is correct, I don't know if I should be trying to create a new object when entering the data, or if my data should be stored in an array/file etc. </p>\n\n<p>This is just for my understanding, I am just learning for myself, so don't have a specific example of what I'm trying to achieve. I am trying to understand classes, and when to use them, currently I'm messing about with c# forms in visual studio</p>\n\n<p>lets say, I want to enter information into a form of all of the members of my fishing club, i.e. name, address, contact info etc. should I be attempting to create a new object of a class that contains methods for getting/setting these variables, or should I be storing these details somewhere else, in an array, or write them to a text file/excel file for example? As I'm new I think I'm struggling with the concept of classes and where to use them. </p>\n\n<p>I expect that to use a class for this purpose I would have to learn to create a class instance at run time in order to create multiple instances of a class, whereas entering the data into an array I would just need to initialize the size of the array. </p>\n\n<p>I'm a bit lost so any help would be very much appreciated. </p>\n"}, {"tags": ["c#", "serial-port", "rfid"], "comments": [{"owner": {"reputation": 1221, "user_id": 7002012, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02ed3bfc071e1d0ffbb736c0b5347130?s=128&d=identicon&r=PG&f=1", "display_name": "Expressingx", "link": "https://stackoverflow.com/users/7002012/expressingx"}, "edited": false, "score": 0, "creation_date": 1547065407, "post_id": 54117704, "comment_id": 95068120, "body": "I had the same problem when I had to implement gRPC server. When I had breakpoints it worked fine. The problem was deadlock."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1547066764, "post_id": 54117704, "comment_id": 95068690, "body": "You do know that <code>DataReceived</code> arrives on a different thread, correct?  And if it happens again before the first call is done processing data, you can have multiple <code>DataReceived</code> events being simultaneously processed.  It&#39;s not pretty."}, {"owner": {"reputation": 1548, "user_id": 2009197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kzFYk.png?s=128&g=1", "display_name": "Baddack", "link": "https://stackoverflow.com/users/2009197/baddack"}, "edited": false, "score": 0, "creation_date": 1547166426, "post_id": 54117704, "comment_id": 95109117, "body": "Try using <code>BeginInvoke</code> instead of <code>Invoke</code>.  It&#39;s as the others have suggested, the invoke is blocking."}], "owner": {"reputation": 1079, "user_id": 2132845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/582e2783dcbd9bcf52085b3cf1ac660b?s=128&d=identicon&r=PG", "display_name": "rigamonk", "link": "https://stackoverflow.com/users/2132845/rigamonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547066189, "creation_date": 1547065173, "last_edit_date": 1547066189, "question_id": 54117704, "link": "https://stackoverflow.com/questions/54117704/serial-port-will-only-receive-datareceived-when-in-break-status", "title": "Serial Port will only receive DataReceived when in break status", "body": "<p>I am using a serial port to receive data from an RFID reader. it will recieve and display the dta the first time it is send, but will not after that...EXCEPT when I put a break point on the DataReceived event. Then, it works every time. Hits the break point and upon F5, displays it fine. Tried timers and all kinds of stuff, but have yet to get it working reliably (outside having a break point). I do not understand why and how to fix this.\nHere is the class code I am using, its not the neatest anymore since i have been mucking about in it:</p>\n\n<pre><code>public class RFIDReader\n{\n    private System.IO.Ports.SerialPort _scannerPort;\n\n    private Control _control;\n    private string _port;\n    private int _baud;\n    private string _pariStr;\n    private int _dataBits;\n    private int _stopBits;\n    private string _suffix;\n\n    /// &lt;summary&gt;\n    /// Starts the specified Serial Scanner.\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"tagCheck\"&gt;The beginning character to verify against, and the control to place value in&lt;/param&gt;\n    public void Start(Control tagCheck)\n    {\n        _control = tagCheck;\n\n        GetScannerSettings();\n        try\n        {\n            _scannerPort.DataReceived += DataReceivedHandler;\n            _scannerPort.DtrEnable = true;\n            _scannerPort.Open();\n        }\n        catch (Exception _e)\n        {\n            MessageWindow.Show(\"Scanner Setting Error\", _e.Message, MessageWindow.ButtonStyle.Ok,\n                MessageWindow.IconStyle.Error);\n            Environment.Exit(1);\n        }\n    }\n\n    public void Close()\n    {\n        try\n        {\n            _scannerPort.Close();\n            _scannerPort.Dispose();\n        }\n        catch (Exception e)\n        {\n            Console.WriteLine(e);\n            throw;\n        }\n    }\n\n    private void GetScannerSettings()\n    {\n        string port = MySettings.get_Item(\"RFIDPort\");\n        string[] _sArr = MySettings.get_Item(\"RFIDSettings\").Split(',');\n        int _baud = Convert.ToInt32(_sArr[0]);\n        string _pariStr = _sArr[1];\n        int _dataBits = Convert.ToInt16(_sArr[2]);\n        int _stopBits = Convert.ToInt16(_sArr[3]);\n        string suffix = _sArr[4];\n        Parity _pariSetting = ParseParity(_pariStr);\n        StopBits _stopBitsSetting = ParseStopBits(_stopBits);\n        _scannerPort = new SerialPort(MySettings.get_Item(\"RFIDPort\"))\n        {\n            BaudRate = _baud,\n            DataBits = _dataBits,\n            StopBits = _stopBitsSetting,\n            Parity = _pariSetting\n        };\n    }\n\n    private StopBits ParseStopBits(int stopBits)\n    {\n        StopBits _stopBitsSetting;\n        switch (stopBits)\n        {\n            case 0:\n                _stopBitsSetting = StopBits.None;\n                break;\n            case 1:\n                _stopBitsSetting = StopBits.One;\n                break;\n            case 2:\n                _stopBitsSetting = StopBits.Two;\n                break;\n            default:\n                _stopBitsSetting = StopBits.One;\n                break;\n        }\n        return _stopBitsSetting;\n    }\n\n    /// &lt;summary&gt;\n    ///     Parses the parity.\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"pariStr\"&gt;The pari string.&lt;/param&gt;\n    /// &lt;returns&gt;&lt;/returns&gt;\n    private Parity ParseParity(string pariStr)\n    {\n        Parity _pariSetting;\n        switch (pariStr)\n        {\n            case \"e\":\n                _pariSetting = Parity.Even;\n                break;\n            case \"m\":\n                _pariSetting = Parity.Mark;\n                break;\n            case \"n\":\n                _pariSetting = Parity.None;\n                break;\n            case \"o\":\n                _pariSetting = Parity.Odd;\n                break;\n            case \"s\":\n                _pariSetting = Parity.Space;\n                break;\n            default:\n                _pariSetting = Parity.None;\n                break;\n        }\n        return _pariSetting;\n    }\n\n    private void DataReceivedHandler(object sender, SerialDataReceivedEventArgs e)\n    {\n        string _b = ((SerialPort)sender).ReadExisting();\n        if (_b.Contains(\"\\n\"))\n        {\n            _b = _b.Remove(_b.IndexOf(\"\\n\", StringComparison.Ordinal));\n        }\n        if (_b.Contains(\"\\r\"))\n        {\n            _b = _b.Remove(_b.IndexOf(\"\\r\", StringComparison.Ordinal));\n        }\n        SetTextCallback t = SetText;\n\n        _control.Invoke(t, _b, _control);\n        _control.Invoke(CallEmulateEnter);\n\n    }\n\n    private void SetText(string text, Control control)\n    {\n        control.Text = text;\n    }\n\n    private delegate void SetTextCallback(string text, Control control);\n    public Func&lt;bool&gt; CallEmulateEnter { get; set; }\n}\n</code></pre>\n"}, {"tags": ["c#", "wpf", "xaml", "combobox", "datagrid"], "comments": [{"owner": {"reputation": 917, "user_id": 10290408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e1feed163c02636f1eea4c5d67bbc7?s=128&d=identicon&r=PG&f=1", "display_name": "Selthien", "link": "https://stackoverflow.com/users/10290408/selthien"}, "edited": false, "score": 0, "creation_date": 1547067821, "post_id": 54117682, "comment_id": 95069133, "body": "I am having a little trouble following along. Could you possibly add a picture of what you mean?"}, {"owner": {"reputation": 886, "user_id": 6401734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dbeb33da7c89f7b7a55a8bcf792301?s=128&d=identicon&r=PG&f=1", "display_name": "MattE", "link": "https://stackoverflow.com/users/6401734/matte"}, "reply_to_user": {"reputation": 917, "user_id": 10290408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e1feed163c02636f1eea4c5d67bbc7?s=128&d=identicon&r=PG&f=1", "display_name": "Selthien", "link": "https://stackoverflow.com/users/10290408/selthien"}, "edited": false, "score": 0, "creation_date": 1547068156, "post_id": 54117682, "comment_id": 95069280, "body": "@Selthien I can&#39;t add a picture but basically I have a DataGrid where I am loading data from the server into an ObservableCollection populating Client To Employee relationships.  User_ID, CurrentEmp, ClientName, StartDate, EndDate are the fields.  The column &quot;Current Emp&quot; is a combobox column, with combobox items of all employees(the items source is different from the DataGrid). I want each row to automatically select the CurrentEmp in the ClientToEmp ItemsSource the datagrid is using as the selected value(ie, display this in the combobox when it loads). I cannot get this working."}, {"owner": {"reputation": 728, "user_id": 10718884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ea8ab3f08a6e6593a8c04e5fd0a27b?s=128&d=identicon&r=PG&f=1", "display_name": "nosale", "link": "https://stackoverflow.com/users/10718884/nosale"}, "edited": false, "score": 0, "creation_date": 1547069227, "post_id": 54117682, "comment_id": 95069732, "body": "@MattE Of which type is &quot;CurrentEmp&quot;? Same as &quot;User_ID&quot; of an item from your ComboBox-Source?"}], "answers": [{"comments": [{"owner": {"reputation": 886, "user_id": 6401734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dbeb33da7c89f7b7a55a8bcf792301?s=128&d=identicon&r=PG&f=1", "display_name": "MattE", "link": "https://stackoverflow.com/users/6401734/matte"}, "edited": false, "score": 0, "creation_date": 1547066260, "post_id": 54117846, "comment_id": 95068494, "body": "Doesn&#39;t work...already tried that...the problem is I need to get it to bind to the cvsClientToEmp User_ID value of the datagrid row NOT the cvsEmp ItemsSource that the combobox is bound to...it also will change every combobox in the datagrid to have this value instead of only the single one I change.  Also If I use the DataGridComboBoxColumn I would need to edit the ElementStyle of the ComboBox and EditedElementStyle...your solution is not valid for that"}, {"owner": {"reputation": 728, "user_id": 10718884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ea8ab3f08a6e6593a8c04e5fd0a27b?s=128&d=identicon&r=PG&f=1", "display_name": "nosale", "link": "https://stackoverflow.com/users/10718884/nosale"}, "reply_to_user": {"reputation": 886, "user_id": 6401734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dbeb33da7c89f7b7a55a8bcf792301?s=128&d=identicon&r=PG&f=1", "display_name": "MattE", "link": "https://stackoverflow.com/users/6401734/matte"}, "edited": false, "score": 0, "creation_date": 1547068301, "post_id": 54117846, "comment_id": 95069349, "body": "@MattE Okay that is strange, cause <code>SelectedValue</code> corresponds to the item of the row."}, {"owner": {"reputation": 886, "user_id": 6401734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dbeb33da7c89f7b7a55a8bcf792301?s=128&d=identicon&r=PG&f=1", "display_name": "MattE", "link": "https://stackoverflow.com/users/6401734/matte"}, "edited": false, "score": 0, "creation_date": 1547068383, "post_id": 54117846, "comment_id": 95069390, "body": "I even tried SelectedValue=&quot;{Binding Source=cvsClientToEmp, Path=User_ID}&quot; and still the same issue..."}, {"owner": {"reputation": 728, "user_id": 10718884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ea8ab3f08a6e6593a8c04e5fd0a27b?s=128&d=identicon&r=PG&f=1", "display_name": "nosale", "link": "https://stackoverflow.com/users/10718884/nosale"}, "reply_to_user": {"reputation": 886, "user_id": 6401734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dbeb33da7c89f7b7a55a8bcf792301?s=128&d=identicon&r=PG&f=1", "display_name": "MattE", "link": "https://stackoverflow.com/users/6401734/matte"}, "edited": false, "score": 0, "creation_date": 1547069768, "post_id": 54117846, "comment_id": 95069964, "body": "@MattE Edit my answer based on your comment about the properties. This should work as long the type of <code>CurrentEmp</code>(item in row) can be cast to the type of <code>User_ID</code>(item in ComboBox)"}, {"owner": {"reputation": 886, "user_id": 6401734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dbeb33da7c89f7b7a55a8bcf792301?s=128&d=identicon&r=PG&f=1", "display_name": "MattE", "link": "https://stackoverflow.com/users/6401734/matte"}, "edited": false, "score": 0, "creation_date": 1547070288, "post_id": 54117846, "comment_id": 95070184, "body": "Need it to be like this, can&#39;t get it.  &lt;ComboBox ItemsSource=&quot;{Binding Path=DataContext.cvsEmp, RelativeSource={RelativeSource AncestorType=Window}}&quot;                                               DisplayMemberPath=&quot;DisplayName&quot;                                               SelectedValuePath=&quot;User_ID&quot;                                               SelectedValue=&quot;{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext.cvsClientToEmp.User_ID, UpdateSourceTrigger=PropertyChanged}&quot;&gt;                                                                              &lt;/ComboBox&gt;"}, {"owner": {"reputation": 728, "user_id": 10718884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ea8ab3f08a6e6593a8c04e5fd0a27b?s=128&d=identicon&r=PG&f=1", "display_name": "nosale", "link": "https://stackoverflow.com/users/10718884/nosale"}, "reply_to_user": {"reputation": 886, "user_id": 6401734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dbeb33da7c89f7b7a55a8bcf792301?s=128&d=identicon&r=PG&f=1", "display_name": "MattE", "link": "https://stackoverflow.com/users/6401734/matte"}, "edited": false, "score": 0, "creation_date": 1547072038, "post_id": 54117846, "comment_id": 95070907, "body": "@MattE Am I right? You have a collection <code>ClientToEmp</code> which lets say contains items of type <code>ClientToEmpRelation</code> with the properties User_ID, CurrentEmp, ClientName, StartDate, EndDate. <code>ClientToEmp</code> is the source of your <code>DataGrid</code>. Then you have a second collection <code>Employes</code> which contains items of type <code>Employe</code> with at least the properties User_Id and DisplayName. Now lets say you change the value of the ComboBox in the row which contains the <code>ClientToEmpRelation</code> with name/id = 1337. Now what exactly should happen?"}, {"owner": {"reputation": 165, "user_id": 7533577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DHya0.png?s=128&g=1", "display_name": "Smits", "link": "https://stackoverflow.com/users/7533577/smits"}, "edited": false, "score": 0, "creation_date": 1547095020, "post_id": 54117846, "comment_id": 95075930, "body": "Try to keep DisplayMemberPath &amp; SelectedValuePath same."}, {"owner": {"reputation": 728, "user_id": 10718884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ea8ab3f08a6e6593a8c04e5fd0a27b?s=128&d=identicon&r=PG&f=1", "display_name": "nosale", "link": "https://stackoverflow.com/users/10718884/nosale"}, "reply_to_user": {"reputation": 165, "user_id": 7533577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DHya0.png?s=128&g=1", "display_name": "Smits", "link": "https://stackoverflow.com/users/7533577/smits"}, "edited": false, "score": 0, "creation_date": 1547107442, "post_id": 54117846, "comment_id": 95079866, "body": "@Smits There is no reason in doing so. In real life applications most of the time they have to differ cause of usability/readability."}], "tags": [], "owner": {"reputation": 728, "user_id": 10718884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ea8ab3f08a6e6593a8c04e5fd0a27b?s=128&d=identicon&r=PG&f=1", "display_name": "nosale", "link": "https://stackoverflow.com/users/10718884/nosale"}, "is_accepted": false, "score": 0, "last_activity_date": 1547069626, "last_edit_date": 1547069626, "creation_date": 1547065760, "answer_id": 54117846, "question_id": 54117682, "link": "https://stackoverflow.com/questions/54117682/wpf-datagrid-combobox-binding-to-data-on-load-with-separate-itemssource/54117846#54117846", "title": "WPF DataGrid Combobox binding to data on load with separate ItemsSource", "body": "<p>You are missing <code>SelectedValue</code> in your <code>ComboBox</code></p>\n\n<pre><code>&lt;ComboBox ItemsSource=\"{Binding Path=DataContext.cvsEmp, RelativeSource={RelativeSource AncestorType=Window}}\"\n    DisplayMemberPath=\"DisplayName\"\n    SelectedValue=\"{Binding CurrentEmp}\"\n    SelectedValuePath=\"User_ID\"/&gt;\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/a/4902454/10718884\">https://stackoverflow.com/a/4902454/10718884</a> for a good explanation</p>\n\n<hr>\n\n<p><strong>Note:</strong> There is also a <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.windows.controls.datagridcomboboxcolumn?view=netframework-4.7.2\" rel=\"nofollow noreferrer\"><code>DataGridComboBoxColumn</code></a> </p>\n\n<pre><code>&lt;DataGridComboBoxColumn\n    ItemsSource=\"{Binding Path=DataContext.cvsEmp, RelativeSource={RelativeSource AncestorType=Window}}\"\n    DisplayMemberPath=\"DisplayName\"\n    SelectedValueBinding=\"{Binding CurrentEmp}\"\n    SelectedValuePath=\"User_ID\"&gt;\n&lt;/DataGridComboBoxColumn&gt;\n</code></pre>\n"}], "owner": {"reputation": 886, "user_id": 6401734, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dbeb33da7c89f7b7a55a8bcf792301?s=128&d=identicon&r=PG&f=1", "display_name": "MattE", "link": "https://stackoverflow.com/users/6401734/matte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547070817, "creation_date": 1547065077, "last_edit_date": 1547070817, "question_id": 54117682, "link": "https://stackoverflow.com/questions/54117682/wpf-datagrid-combobox-binding-to-data-on-load-with-separate-itemssource", "title": "WPF DataGrid Combobox binding to data on load with separate ItemsSource", "body": "<p>I have a little bit of a quandary that I haven't been able to resolve, at least not in a method that makes sense from an MVVM standpoint.</p>\n\n<p>I have a datagrid that contains client-employee data with start and end dates for each client/employee relationship.  </p>\n\n<p>The DataGrid overall ItemsSource is the ClientToEmp CollectionViewSource bound to the ClientToEmpObservableCollection. However, in the combobox column that allows them to change/update the current employee the ItemsSource is the Employee CollectionViewSource bound to the User ObservableCollection(ie, a list of all employees they can choose for this client).  </p>\n\n<p>This part works fine, when I click the combobox, the proper employees are displayed to select from in the combobox. However when the datagrid loads, I want the CurrentEmp from the ClientToEmp cvs to be showing as the selected employee(ie, the employee that is currently assigned to this client). When they click on it, they should be able to change the Employee(from the separate employee cvs), which would then update the value in the ClientToEmp cvs.</p>\n\n<pre><code>&lt;DataGrid Name=\"ClientToEmpMDG\" ItemsSource=\"{Binding cvsClientToEmp}\" \n                      AutoGenerateColumns=\"False\" AutoGeneratingColumn=\"Gen_AutoGridColumns\"&gt;\n                &lt;DataGrid.Columns&gt;\n                    &lt;DataGridTextColumn Binding=\"{Binding ClientName}\" Header=\"Client Name\" IsReadOnly=\"True\"/&gt;\n                    &lt;DataGridTemplateColumn Header=\"Current Emp\"&gt;\n                        &lt;DataGridTemplateColumn.CellTemplate&gt;\n                            &lt;DataTemplate&gt;\n                                &lt;ComboBox ItemsSource=\"{Binding Path=DataContext.cvsEmp, RelativeSource={RelativeSource AncestorType=Window}}\"\n                                          DisplayMemberPath=\"DisplayName\"\n                                          SelectedValuePath=\"User_ID\"/&gt;\n                            &lt;/DataTemplate&gt;\n                        &lt;/DataGridTemplateColumn.CellTemplate&gt;\n\n                    &lt;/DataGridTemplateColumn&gt;\n                    &lt;DataGridTemplateColumn Header=\"Start Date\"&gt;\n                        &lt;DataGridTemplateColumn.CellTemplate&gt;\n                            &lt;DataTemplate&gt;\n                                &lt;DatePicker Name=\"StartDateDP\" SelectedDate=\"{Binding Path=Start_Date}\"/&gt;\n                            &lt;/DataTemplate&gt;\n                        &lt;/DataGridTemplateColumn.CellTemplate&gt;\n                    &lt;/DataGridTemplateColumn&gt;\n                    &lt;DataGridTemplateColumn Header=\"End Date\"&gt;\n                        &lt;DataGridTemplateColumn.CellTemplate&gt;\n                            &lt;DataTemplate&gt;\n                                &lt;DatePicker Name=\"EndDateDP\" SelectedDate=\"{Binding Path=End_Date}\"/&gt;\n                            &lt;/DataTemplate&gt;\n                        &lt;/DataGridTemplateColumn.CellTemplate&gt;\n                    &lt;/DataGridTemplateColumn&gt;\n                &lt;/DataGrid.Columns&gt;\n            &lt;/DataGrid&gt;\n</code></pre>\n\n<p>How can I get the current employee to show properly on load? The selected value should match the User_ID from the two ObservableCollections. If I use the SelectedValue Property, all comboboxes in the grid show the same value, and it still doesn't bind properly to the cvsClientToEmp value I want it to bind to.  I want each combobox to have it's own value, not all of them to share a single value.</p>\n\n<p>UPDATE: I fixed the issue with all of the comboboxes displaying the same value by changing adding \"IsSynchronizedWithCurrentItem\" to False...Still cannot get it to bind to the value coming back from the DB as to who the current employee is</p>\n"}, {"tags": ["c#", ".net", "asynchronous", "concurrency", "concurrentdictionary"], "comments": [{"owner": {"reputation": 30188, "user_id": 3218692, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/4pA4T.jpg?s=128&g=1", "display_name": "Yeldar Kurmangaliyev", "link": "https://stackoverflow.com/users/3218692/yeldar-kurmangaliyev"}, "edited": false, "score": 3, "creation_date": 1547065060, "post_id": 54117652, "comment_id": 95067980, "body": "For me it sounds like async <code>GetOrAdd</code> doesn&#39;t make much sense. This method can only be executed synchronously."}, {"owner": {"reputation": 4184, "user_id": 7484766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b51b5dab8aebf8aa404ef48acee400c?s=128&d=identicon&r=PG", "display_name": "JohanP", "link": "https://stackoverflow.com/users/7484766/johanp"}, "edited": false, "score": 7, "creation_date": 1547065114, "post_id": 54117652, "comment_id": 95067998, "body": "Adding to a dictionary is not an IO bound operation, it won&#39;t make sense to have async version of it."}, {"owner": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "edited": false, "score": 1, "creation_date": 1547065554, "post_id": 54117652, "comment_id": 95068180, "body": "If you need to await something I&#39;d suggest checking if the key is in the dictionary, and if not then await the Http call then call <code>GeOrAdd</code> with the result.  Ultimately you&#39;ll have to check again in case something else inserted the key while you were waiting on the IO."}], "answers": [{"comments": [{"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 0, "creation_date": 1547066742, "post_id": 54117951, "comment_id": 95068682, "body": "If you&#39;re going to explicitly lock then you need to explicitly lock everywhere else that uses this collection as well, in order to ensure the operation is logically atomic."}, {"owner": {"reputation": 2394, "user_id": 1981581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2m4.png?s=128&g=1", "display_name": "odyss-jii", "link": "https://stackoverflow.com/users/1981581/odyss-jii"}, "reply_to_user": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 0, "creation_date": 1547066797, "post_id": 54117951, "comment_id": 95068704, "body": "The collection is ConcurrentDictionary, the collection itself is thread-safe. You are locking for a different reason here."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 1, "creation_date": 1547067161, "post_id": 54117951, "comment_id": 95068854, "body": "The collection won&#39;t throw some sort of index out of bounds exception or return garbage data, because it&#39;s designed to be used from multiple threads, but you&#39;re now trying to perform multiple operations from it in sequence, and are relying on no changes to the collection during that time, which it won&#39;t provide for you.  You&#39;ll need to explicitly lock not just here, but <i>everywhere</i> using the collection to ensure that someone else doesn&#39;t add the value after you found it missing, or anything like that."}, {"owner": {"reputation": 2394, "user_id": 1981581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2m4.png?s=128&g=1", "display_name": "odyss-jii", "link": "https://stackoverflow.com/users/1981581/odyss-jii"}, "reply_to_user": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 0, "creation_date": 1547067550, "post_id": 54117951, "comment_id": 95068997, "body": "I am not sure which hypothetical scenario you are thinking of, but it does not apply to this particular case. This is a fetch from a source with an in-memory cache, it does not matter if the collection changes during that time. The purpose of the lock is to protect the source from a surge if there are several concurrent cache misses; the purpose is not to synchronize access to the collection."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 1, "creation_date": 1547070022, "post_id": 54117951, "comment_id": 95070056, "body": "Yes, it  <i>does</i> matter if the collection changes.  It can result in performing work multiple times that&#39;s not supposed to be repeated, for example."}], "tags": [], "owner": {"reputation": 2394, "user_id": 1981581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2m4.png?s=128&g=1", "display_name": "odyss-jii", "link": "https://stackoverflow.com/users/1981581/odyss-jii"}, "is_accepted": false, "score": 7, "last_activity_date": 1547066573, "last_edit_date": 1547066573, "creation_date": 1547066223, "answer_id": 54117951, "question_id": 54117652, "link": "https://stackoverflow.com/questions/54117652/concurrentdictionary-getoradd-async/54117951#54117951", "title": "ConcurrentDictionary GetOrAdd async", "body": "<p>The <code>GetOrAdd</code> method is not that great to use for this purpose. Since it does not guarantee that the factory runs only once, the only purpose it has is a minor optimization (minor since additions are rare anyway) in that it doesn't need to hash and find the correct bucket twice (which would happen twice if you get and set with two separate calls).</p>\n\n<p>I would suggest that you check the cache first, if you do not find the value in the cache, then enter some form of critical section (lock, semaphore, etc.), re-check the cache, if still missing then fetch the value and insert into the cache.</p>\n\n<p>This ensures that your backing store is only hit once; even if multiple requests get a cache miss at the same time, only the first one will actually fetch the value, the other requests will await the semaphore and then return early since they re-check the cache in the critical section.</p>\n\n<p>Psuedo code (using SemaphoreSlim with count of 1, since you can await it asynchronously):</p>\n\n<pre><code>async Task&lt;TResult&gt; GetAsync(TKey key)\n{\n    // Try to fetch from catch\n    if (cache.TryGetValue(key, out var result)) return result;\n\n    // Get some resource lock here, for example use SemaphoreSlim \n    // which has async wait function:\n    await semaphore.WaitAsync();    \n    try \n    {\n        // Try to fetch from cache again now that we have entered \n        // the critical section\n        if (cache.TryGetValue(key, out result)) return result;\n\n        // Fetch data from source (using your HttpClient or whatever), \n        // update your cache and return.\n        return cache[key] = await FetchFromSourceAsync(...);\n    }\n    finally\n    {\n        semaphore.Release();\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2394, "user_id": 1981581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2m4.png?s=128&g=1", "display_name": "odyss-jii", "link": "https://stackoverflow.com/users/1981581/odyss-jii"}, "edited": false, "score": 0, "creation_date": 1547068282, "post_id": 54118193, "comment_id": 95069340, "body": "This puts an incomplete <code>Task</code> in the cache. What happens if the <code>Task</code> faults or is cancelled? The task represents an HTTP request to a remote resource, chance of it failing is not negligible."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 2394, "user_id": 1981581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2m4.png?s=128&g=1", "display_name": "odyss-jii", "link": "https://stackoverflow.com/users/1981581/odyss-jii"}, "edited": false, "score": 0, "creation_date": 1547069938, "post_id": 54118193, "comment_id": 95070019, "body": "@odyss-jii Yes, they would need to handle the error case and that would most likely involve removing it from the cache."}, {"owner": {"reputation": 2394, "user_id": 1981581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2m4.png?s=128&g=1", "display_name": "odyss-jii", "link": "https://stackoverflow.com/users/1981581/odyss-jii"}, "edited": false, "score": 2, "creation_date": 1547103662, "post_id": 54118193, "comment_id": 95078286, "body": "That is absolutely horrible design for a cache. It breaks the abstraction completely. If I fetch a value from a subsystem it is not my responsibility to clean-up its internal cache because it has a broken implementation."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 2394, "user_id": 1981581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2m4.png?s=128&g=1", "display_name": "odyss-jii", "link": "https://stackoverflow.com/users/1981581/odyss-jii"}, "edited": false, "score": 0, "creation_date": 1547129891, "post_id": 54118193, "comment_id": 95092358, "body": "It doesn&#39;t need to be the end consumer of the cache that handles it, it can be the wrapper around this code that the OP writes.  The code in this answer is not a completed production ready fully featured cache.  It shows how to solve the question asked, which the OP will need to finish in their own wrapping cache to make it production worthy code.  Just like how your answer has problems making it not completed production ready code, but rather just a solution to the question asked about."}, {"owner": {"reputation": 1939, "user_id": 162641, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/edee6bd31de7122d04f647e5b9476dfa?s=128&d=identicon&r=PG", "display_name": "Darragh", "link": "https://stackoverflow.com/users/162641/darragh"}, "edited": false, "score": 0, "creation_date": 1593378981, "post_id": 54118193, "comment_id": 110753268, "body": "I feel like the Lazy is redundant. Executing something like <code>_httpClient.GetAsync(url)</code> will return the Task immediately."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 1939, "user_id": 162641, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/edee6bd31de7122d04f647e5b9476dfa?s=128&d=identicon&r=PG", "display_name": "Darragh", "link": "https://stackoverflow.com/users/162641/darragh"}, "edited": false, "score": 1, "creation_date": 1593390806, "post_id": 54118193, "comment_id": 110755867, "body": "@Darragh But then you&#39;re performing the operation more than once.  That&#39;s very often not acceptable.  The Lazy doesn&#39;t ensure the operation returns any faster, it ensures it never runs more than once."}], "tags": [], "owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "is_accepted": false, "score": 23, "last_activity_date": 1560259083, "last_edit_date": 1560259083, "creation_date": 1547067205, "answer_id": 54118193, "question_id": 54117652, "link": "https://stackoverflow.com/questions/54117652/concurrentdictionary-getoradd-async/54118193#54118193", "title": "ConcurrentDictionary GetOrAdd async", "body": "<p><code>GetOrAdd</code> won't become an asynchronous operation because accessing the value of a dictionary isn't a long running operation.</p>\n\n<p>What you can do however is simply store tasks in the dictionary, rather than the materialized result.  Anyone needing the results can then await that task.</p>\n\n<p>However, you also need to ensure that the operation is only ever started once, and not multiple times.  To ensure that some operation runs only once, and not multiple times, you also need to add in <code>Lazy</code>:</p>\n\n<pre><code>ConcurrentDictionary&lt;string, Lazy&lt;Task&lt;Response&gt;&gt;&gt; _cache = new ConcurrentDictionary&lt;string, Lazy&lt;Task&lt;Response&gt;&gt;&gt;();\n\nvar response = await _cache.GetOrAdd(\"id\", url =&gt; new Lazy&lt;Task&lt;Response&gt;&gt;(_httpClient.GetAsync(url))).Value;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "edited": false, "score": 0, "creation_date": 1610513264, "post_id": 65265024, "comment_id": 116154500, "body": "This implementation of <code>GetOrAddAsync</code> does not preserve the order of operations. Scenario: the Workflow-1 invokes <code>.GetOrAddAsync(&quot;Key&quot;, GetAsync(&quot;A&quot;))</code>, then the Workflow-2 invokes <code>.GetOrAddAsync(&quot;Key&quot;, GetAsync(&quot;B&quot;))</code>, then the Workflow-3 invokes <code>.TryRemove(&quot;Key&quot;, out _)</code>. Finally the dictionary could end up having either the value &quot;A&quot; or &quot;B&quot;, or no value at all. This happens because this <code>GetOrAddAsync</code> implementation postpones storing anything into the dictionary until the asynchronous delegate completes."}, {"owner": {"reputation": 5347, "user_id": 4572240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NC4-RI4Wd_Q/AAAAAAAAAAI/AAAAAAAABjk/vEq-BTQa44E/photo.jpg?sz=128", "display_name": "Siderite Zackwehdex", "link": "https://stackoverflow.com/users/4572240/siderite-zackwehdex"}, "reply_to_user": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "edited": false, "score": 0, "creation_date": 1610518940, "post_id": 65265024, "comment_id": 116155993, "body": "You mean if you use it without await?"}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "edited": false, "score": 0, "creation_date": 1610520286, "post_id": 65265024, "comment_id": 116156395, "body": "Siderite no, I mean if you await the method properly. My scenario involves three independent asynchronous workflows, where each workflow calls the API and <code>await</code>s the returned task. In this scenario the task awaited by the Workflow-1 could take longer to complete than the task awaited by the Workflow-2, in which case the Workflow-1 would overwrite the value entered in the dictionary by the Workflow-2. This behavior would be surprising to say the least."}, {"owner": {"reputation": 5347, "user_id": 4572240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NC4-RI4Wd_Q/AAAAAAAAAAI/AAAAAAAABjk/vEq-BTQa44E/photo.jpg?sz=128", "display_name": "Siderite Zackwehdex", "link": "https://stackoverflow.com/users/4572240/siderite-zackwehdex"}, "reply_to_user": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "edited": false, "score": 0, "creation_date": 1610522643, "post_id": 65265024, "comment_id": 116157137, "body": "I&#39;ve updated my answer. I appreciate the level of attention in your implementation, but I believe it is overly complicated for the reasons I listed in the answer. The SO question was about using GetOrAdd with an async delegate, which implies accepting the limitations of the original method."}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "edited": false, "score": 0, "creation_date": 1610523633, "post_id": 65265024, "comment_id": 116157499, "body": "Siderite I see your point. Your implementation has indeed a similar behavior to the native <code>GetOrAdd</code> (<a href=\"https://referencesource.microsoft.com/mscorlib/system/Collections/Concurrent/ConcurrentDictionary.cs.html#d8b8308343be2763\" rel=\"nofollow noreferrer\">source code</a>). I guess that the typical asynchronous work has a longer duration than the typical synchronous work, and this could make the drawbacks of the native behavior more prominent. In any case my downvote was unwarranted and I revoked it."}], "tags": [], "owner": {"reputation": 5347, "user_id": 4572240, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NC4-RI4Wd_Q/AAAAAAAAAAI/AAAAAAAABjk/vEq-BTQa44E/photo.jpg?sz=128", "display_name": "Siderite Zackwehdex", "link": "https://stackoverflow.com/users/4572240/siderite-zackwehdex"}, "is_accepted": false, "score": 3, "last_activity_date": 1610522533, "last_edit_date": 1610522533, "creation_date": 1607776780, "answer_id": 65265024, "question_id": 54117652, "link": "https://stackoverflow.com/questions/54117652/concurrentdictionary-getoradd-async/65265024#65265024", "title": "ConcurrentDictionary GetOrAdd async", "body": "<p>Try this extension method:</p>\n<pre><code>/// &lt;summary&gt;\n/// Adds a key/value pair to the &lt;see cref=&quot;ConcurrentDictionary{TKey, TValue}&quot;/&gt; by using the specified function \n/// if the key does not already exist. Returns the new value, or the existing value if the key exists.\n/// &lt;/summary&gt;\npublic static async Task&lt;TResult&gt; GetOrAddAsync&lt;TKey,TResult&gt;(\n    this ConcurrentDictionary&lt;TKey,TResult&gt; dict,\n    TKey key, Func&lt;TKey,Task&lt;TResult&gt;&gt; asyncValueFactory)\n{\n    if (dict.TryGetValue(key, out TResult resultingValue))\n    {\n        return resultingValue;\n    }\n    var newValue = await asyncValueFactory(key);\n    return dict.GetOrAdd(key, newValue);\n}\n</code></pre>\n<p>Instead of <code>dict.GetOrAdd(key,key=&gt;something(key))</code>, you use <code>await dict.GetOrAddAsync(key,async key=&gt;await something(key))</code>. Obviously, in this situation you just write it as <code>await dict.GetOrAddAsync(key,something)</code>, but I wanted to make it clear.</p>\n<p>In regards to concerns about preserving the order of operations, I have the following observations:</p>\n<ol>\n<li>Using the normal GetOrAdd will get the same effect if you look at the way it is implemented. I literally used the same code and made it work for async. Reference says</li>\n</ol>\n<blockquote>\n<p>the valueFactory delegate is called outside the locks to avoid the\nproblems that can arise from executing unknown code under a lock.\nTherefore, GetOrAdd is not atomic with regards to all other operations\non the ConcurrentDictionary&lt;TKey,TValue&gt; class</p>\n</blockquote>\n<ol start=\"2\">\n<li>SyncRoot is not supported in ConcurrentDictionary, they use an internal locking mechanism, so locking on it is not possible. Using your own lock mechanism works only for this extension method, though. If you use another flow   (using GetOrAdd for example) you will face the same problem.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 1, "creation_date": 1613459433, "post_id": 65694270, "comment_id": 117074145, "body": "I&#39;ve some questions abount your solution. Is <code>Unwrap</code> the same like <code>await newTaskTask</code>? Why not just using <code>source.TryRemove(key, out _)</code> instead of casting the <code>source</code> to <code>ICollection&lt;&gt;</code>? I&#39;m a little confused about the <code>newTaskTask.RunSynchronously(TaskScheduler.Default)</code>. This looks a little strange. Do we need this? The caller will do an <code>await</code>. Will this ensure that the task is called?"}, {"owner": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613462794, "post_id": 65694270, "comment_id": 117075222, "body": "The question is: Is <a href=\"https://dotnetfiddle.net/GD4mwq\" rel=\"nofollow noreferrer\">this implementation</a> more or less equivalent to your example? Yes I know that the execution is &quot;deferred&quot; (not really) until the first caller awaits the returned task."}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "reply_to_user": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613463264, "post_id": 65694270, "comment_id": 117075404, "body": "@SebastianSchumann sure, and thanks for asking. The <code>newTaskTask.Unwrap()</code> is indeed the same with <code>await newTaskTask</code>, provided that task is hot (i.e. it has already started). This is not the case here, and a deadlock will ensue if we try to <code>await</code> the task. The task is intentionally cold, because we want to start the task only after it has been successfully inserted into the dictionary. Otherwise, in case the race to update the dictionary has been lost, the cold task will just be discarded."}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "reply_to_user": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613463303, "post_id": 65694270, "comment_id": 117075421, "body": "The reason that the <code>source.TryRemove(key, out _)</code> is not sufficient is because the <code>GetOrAddAsync</code> is just an extension method, and it doesn&#39;t control entirely the contents of the dictionary. So it is possible that while the task is running, some other code may replace the task with another task. In case our task fails, we want to remove it from the dictionary only if it&#39;s still there, and not remove some other task that is not known to us."}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "reply_to_user": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613463375, "post_id": 65694270, "comment_id": 117075449, "body": "The <code>newTaskTask.RunSynchronously(TaskScheduler.Default)</code> starts the outer task, which invokes the <code>valueFactory</code> delegate. Before reaching this point, the <code>valueFactory</code> has not been invoked. It is essential that the <code>valueFactory</code> is invoked only once, in case that multiple threads are racing to insert this key into the dictionary. The <code>TaskScheduler.Default</code> argument ensures that the <code>valueFactory</code> will be invoked synchronously by a well known <code>TaskScheduler</code>, and that we are not in the mercy of the <code>TaskScheduler.Current</code> (the default value of the parameter), whatever it may be."}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "reply_to_user": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613463392, "post_id": 65694270, "comment_id": 117075457, "body": "So, no, <a href=\"https://dotnetfiddle.net/GD4mwq\" rel=\"nofollow noreferrer\">that</a> implementation is not equivalent with the implementation of this answer! \ud83d\ude03"}, {"owner": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613464089, "post_id": 65694270, "comment_id": 117075721, "body": "Oh yes, sorry - I was totally blind. I didn&#39;t see the <i>cold</i> task. This is indeed correct and needed. And yes I forgot the possibility to change a value using <code>dict[key] = value</code> that changes the value. Sorry for that."}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "reply_to_user": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613464188, "post_id": 65694270, "comment_id": 117075753, "body": "@SebastianSchumann no worries. I am happy that someone asked, so that I can explain the nuances of this peculiar-looking method. :-)"}, {"owner": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613466305, "post_id": 65694270, "comment_id": 117076587, "body": "Yes. I deleted my question after I read the docs about that function."}, {"owner": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613466505, "post_id": 65694270, "comment_id": 117076677, "body": "But there is still one confusion left: Why do we need that call to <code>RunSynchronously</code>? There is a race condition: Let&#39;s assume that one call creates that task, adds it to the dict and a context switch occurs just before the call to <code>Run..</code>. An other task get the already added task and awaits it. This should invoke the <code>valueFactory</code>. And should even this factory be also invoked by <code>Run...</code>. What am I missing here?"}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "reply_to_user": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613466866, "post_id": 65694270, "comment_id": 117076849, "body": "@SebastianSchumann awaiting the task is not sufficient to invoke the <code>valueFactory</code>. Only the current thread knows about the nested <code>Task&lt;Task&lt;TValue&gt;&gt;</code>, and has the means to start it. If it omits to start it, both tasks, the nested and the unwrapped, will remain cold forever. Any workflow that attempts to await the task, will just deadlock."}, {"owner": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613467214, "post_id": 65694270, "comment_id": 117076986, "body": "Okay - I think I got it. Just to be sure: The <code>newTaskTask</code> is only known by the current thread - that&#39;s obvious. Only this thread is able to call it - clear. A concurrent call gets the <code>newTask</code> - also obious. An await to this <code>newTask</code> will block because the <code>newTaskTask</code> has not been started. Puh - okay. If this assumption holds the implementation is correct."}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "reply_to_user": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613467353, "post_id": 65694270, "comment_id": 117077049, "body": "@SebastianSchumann yeap, there is a lot going on in this little method. :-)"}, {"owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "reply_to_user": {"reputation": 2782, "user_id": 2729609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/3woLx.jpg?s=128&g=1", "display_name": "Sebastian Schumann", "link": "https://stackoverflow.com/users/2729609/sebastian-schumann"}, "edited": false, "score": 0, "creation_date": 1613474309, "post_id": 65694270, "comment_id": 117080060, "body": "@SebastianSchumann btw the same idea has been used <a href=\"https://stackoverflow.com/questions/28340177/enforce-an-async-method-to-be-called-once/65714904#65714904\">here</a> in order to implement an improved <code>AsyncLazy&lt;T&gt;</code> class. Creating cold tasks is rarely a good idea, but when it is, it works wonders! \ud83d\ude03"}], "tags": [], "owner": {"reputation": 15450, "user_id": 11178549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N3P6o.png?s=128&g=1", "display_name": "Theodor Zoulias", "link": "https://stackoverflow.com/users/11178549/theodor-zoulias"}, "is_accepted": false, "score": 1, "last_activity_date": 1610525398, "last_edit_date": 1610525398, "creation_date": 1610499646, "answer_id": 65694270, "question_id": 54117652, "link": "https://stackoverflow.com/questions/54117652/concurrentdictionary-getoradd-async/65694270#65694270", "title": "ConcurrentDictionary GetOrAdd async", "body": "<p>Probably using a dedicated memory cache (like the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.caching.memory.memorycache\" rel=\"nofollow noreferrer\">new</a> or the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.runtime.caching.memorycache\" rel=\"nofollow noreferrer\">old</a> <code>MemoryCache</code> classes, or <a href=\"https://www.nuget.org/packages/LazyCache\" rel=\"nofollow noreferrer\" title=\"LazyCache by Alastair Crabtree\">this</a> third-party library) should be preferable to using a simple <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2\" rel=\"nofollow noreferrer\"><code>ConcurrentDictionary</code></a>. Unless you don't really need commonly used functionality like time-based expiration, size-based compacting, automatic eviction of entries that are dependent on other entries that have expired, or dependent on mutable external resources (like files, databases etc). It should be noted though that the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.caching.memory.memorycache\" rel=\"nofollow noreferrer\"><code>MemoryCache</code></a> may still need some work in order to handle asynchronous delegates properly, since its out-of-the-box behavior <a href=\"https://stackoverflow.com/questions/65640644/stop-reentrancy-on-memorycache-calls\">is not ideal</a>.</p>\n<p>Below is a custom extension method <code>GetOrAddAsync</code> for <code>ConcurrentDictionary</code>s that have <code>Task&lt;TValue&gt;</code> values. It accepts a factory method, and ensures that the method will be invoked at most once. It also ensures that failed tasks are removed from the dictionary. This implementation is optimized for the case where getting an existing task happens frequently, and creating a new one happens rarely.</p>\n<pre><code>/// &lt;summary&gt;\n/// Returns an existing task from the concurrent dictionary, or adds a new task\n/// using the specified asynchronous factory method. Concurrent invocations for\n/// the same key are prevented, unless the task is removed before the completion\n/// of the delegate. Failed tasks are evicted from the concurrent dictionary.\n/// &lt;/summary&gt;\npublic static Task&lt;TValue&gt; GetOrAddAsync&lt;TKey, TValue&gt;(\n    this ConcurrentDictionary&lt;TKey, Task&lt;TValue&gt;&gt; source, TKey key,\n    Func&lt;TKey, Task&lt;TValue&gt;&gt; valueFactory)\n{\n    if (!source.TryGetValue(key, out var currentTask))\n    {\n        Task&lt;TValue&gt; newTask = null;\n        var newTaskTask = new Task&lt;Task&lt;TValue&gt;&gt;(async () =&gt;\n        {\n            try { return await valueFactory(key).ConfigureAwait(false); }\n            catch\n            {\n                ((ICollection&lt;KeyValuePair&lt;TKey, Task&lt;TValue&gt;&gt;&gt;)source)\n                    .Remove(new KeyValuePair&lt;TKey, Task&lt;TValue&gt;&gt;(key, newTask));\n                //source.TryRemove(KeyValuePair.Create(key, newTask)); // .NET 5\n                throw;\n            }\n        });\n        newTask = newTaskTask.Unwrap();\n        currentTask = source.GetOrAdd(key, newTask);\n        if (currentTask == newTask)\n            newTaskTask.RunSynchronously(TaskScheduler.Default);\n    }\n    return currentTask;\n}\n</code></pre>\n<p>Usage example:</p>\n<pre><code>var cache = new ConcurrentDictionary&lt;string, Task&lt;HttpResponseMessage&gt;&gt;();\n\nvar response = await cache.GetOrAddAsync(&quot;https://stackoverflow.com&quot;, async url =&gt;\n{\n    return await _httpClient.GetAsync(url);\n});\n</code></pre>\n<p>For removing the faulted tasks, this implementation uses the explicitly implemented <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2.system-collections-generic-icollection-system-collections-generic-keyvaluepair-tkey-tvalue---remove\" rel=\"nofollow noreferrer\"><code>ICollection&lt;T&gt;.Remove</code></a> API. More info about this API can be found <a href=\"https://stackoverflow.com/questions/39679779/how-to-achieve-remove-if-functionality-in-net-concurrentdictionary\" title=\"How to achieve remove_if functionality in .NET ConcurrentDictionary\">here</a>. From .NET 5 onwards the new <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.collections.concurrent.concurrentdictionary-2.tryremove#System_Collections_Concurrent_ConcurrentDictionary_2_TryRemove_System_Collections_Generic_KeyValuePair__0__1__\" rel=\"nofollow noreferrer\"><code>TryRemove(KeyValuePair&lt;TKey, TValue&gt; item)</code></a> method could be used instead.</p>\n<p>Btw in case supreme performance is required, you may want to take a look at the <a href=\"https://github.com/bitfaster/BitFaster.Caching\" rel=\"nofollow noreferrer\" title=\"By Alex Peck\">BitFaster.Caching</a> third-party library. I've never used it personally, but the diagrams with its benchmarks look impressive.</p>\n"}], "owner": {"reputation": 4681, "user_id": 1012984, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/78c40743c7d3a4cfa070bf72af576589?s=128&d=identicon&r=PG", "display_name": "Zeus82", "link": "https://stackoverflow.com/users/1012984/zeus82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6678, "favorite_count": 3, "answer_count": 4, "score": 25, "last_activity_date": 1610525398, "creation_date": 1547064964, "last_edit_date": 1610512448, "question_id": 54117652, "link": "https://stackoverflow.com/questions/54117652/concurrentdictionary-getoradd-async", "title": "ConcurrentDictionary GetOrAdd async", "body": "<p>I want to use something like <code>GetOrAdd</code> with a <code>ConcurrentDictionary</code> as a cache to a webservice.  Is there an async version of this dictionary? <code>GetOrAdd</code> will be making a web request using <code>HttpClient</code>, so it would be nice if there was a version of this dictionary where <code>GetOrAdd</code> was async.</p>\n<p>To clear up some confusion, the contents of the dictionary will be the response from a call to a webservice.</p>\n<pre><code>ConcurrentDictionary&lt;string, Response&gt; _cache\n    = new ConcurrentDictionary&lt;string, Response&gt;();\n\nvar response = _cache.GetOrAdd(&quot;id&quot;,\n    (x) =&gt; { _httpClient.GetAsync(x).GetAwaiter().GetResponse(); });\n</code></pre>\n"}, {"tags": ["c#", "xml", "list", "class", "unity3d"], "answers": [{"tags": [], "owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "is_accepted": true, "score": 0, "last_activity_date": 1547069472, "last_edit_date": 1547069472, "creation_date": 1547065824, "answer_id": 54117865, "question_id": 54117651, "link": "https://stackoverflow.com/questions/54117651/unity-2d-get-value-from-list-of-class-by-class-variables-value/54117865#54117865", "title": "Unity 2D - Get value from list of class by class variable&#39;s value", "body": "<p>You could either add a Dictionary like</p>\n\n<pre><code>[XmlRoot(\"DialogCollection\")]\npublic class DialogContainer\n{\n    [XmlArray(\"Dialogs\")]\n    [XmlArrayItem(\"Dialog\")]\n    public List&lt;Dialog&gt; dialogs = new List&lt;Dialog&gt;();\n\n    public Dictionary&lt;string, string&gt; IdToText = new Dictionary&lt;string, string&gt;();\n\n    public static DialogContainer Load(string path)\n    {\n        TextAsset _xml = Resources.Load&lt;TextAsset&gt;(path);\n\n        XmlSerializer serializer = new XmlSerializer(typeof(DialogContainer));\n\n        // use a better variable name since \"dialogs\" is also a field of it\n        DialogContainer dialogContainer;\n\n        // use \"using\" for disposables\n        using(StringReader reader = new StringReader(_xml.text))\n        {\n            dialogContainer = serializer.Deserialize(reader) as DialogContainer;\n        }\n\n        // reset dictionary\n        dialogContainer.IdToText.Clear();\n        foreach(var entry in dialogContainer.dialogs)\n        {\n            dialogContainer.IdToText.Add(entry.id, entry.text);\n        }\n\n        return dialogContainer;\n    }\n}\n</code></pre>\n\n<p>Than you can later use e.g.</p>\n\n<pre><code>aDialogContainer.idTotext[\"1\"];\n</code></pre>\n\n<p>note that this will throw an exception is searched key is not in the dictionary! So refer to the solution below.</p>\n\n<hr>\n\n<p>Anther option is to implement a getter method instead of the dictionary to look up the correct text on the fly using <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.firstordefault?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">LINQ: FirstOrDefault</a>:</p>\n\n<pre><code>public string IdtoText(string id)\n{\n    var foundDialog = dialogs.FirstOrDefault(dialog =&gt; string.Equals(dialog.id, id));\n\n    //         here you can decide whether to        |\n    //         return null or \"\" if no element found v \n    return foundDialog != null ? foundDialog.text : \"\";\n}\n</code></pre>\n\n<p>Than you would use</p>\n\n<pre><code>aDialogContainer.IdTotext(\"1\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547066055, "post_id": 54117900, "comment_id": 95068403, "body": "note that <code>Where</code> doesn&#39;t return a single value but instead an <code>IEnumerable&lt;Dialog&gt;</code>"}, {"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547066483, "post_id": 54117900, "comment_id": 95068578, "body": "note that <a href=\"https://docs.microsoft.com/dotnet/api/system.linq.enumerable.where?view=netframework-4.7.2\" rel=\"nofollow noreferrer\"><code>Where</code></a> returns a an <code>IEnumerable&lt;Dialog&gt;</code>, <b>not</b> a single value"}, {"owner": {"reputation": 1652, "user_id": 10311601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B8Svm.png?s=128&g=1", "display_name": "bolkay", "link": "https://stackoverflow.com/users/10311601/bolkay"}, "reply_to_user": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547067945, "post_id": 54117900, "comment_id": 95069177, "body": "Somehow, I felt I typed <code>FirstOrDefault();</code> Thanks for calling my attention to that."}, {"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547069332, "post_id": 54117900, "comment_id": 95069770, "body": "in this case .. why the unecessary call of <code>Where</code> .. you can diractly use <code>FirstOrDefault</code> on the original list. You also would have to make the method either <code>static</code> and use <code>var theDialog = DialogContainer.GetSingleDialog(&quot;1&quot;, dialogs);</code> or use <code>var theDialog = dc.GetSingleDialog(&quot;1&quot;, dialogs);</code> .. however in this case it is a bit redundant to have to get the List reference first ..."}], "tags": [], "owner": {"reputation": 1652, "user_id": 10311601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B8Svm.png?s=128&g=1", "display_name": "bolkay", "link": "https://stackoverflow.com/users/10311601/bolkay"}, "is_accepted": false, "score": 0, "last_activity_date": 1547067990, "last_edit_date": 1547067990, "creation_date": 1547065976, "answer_id": 54117900, "question_id": 54117651, "link": "https://stackoverflow.com/questions/54117651/unity-2d-get-value-from-list-of-class-by-class-variables-value/54117900#54117900", "title": "Unity 2D - Get value from list of class by class variable&#39;s value", "body": "<p>You could use Linq to filter a list of dialogs and simply return the first one matching your condiction.</p>\n\n<p>Something like this:</p>\n\n<pre><code>public Dialog GetSingleDialog(string id, List&lt;Dialog&gt; dialogs){\n\nreturn dialogs.Where(x=&gt;x.id==id).FirstOrDefault();\n}\n</code></pre>\n\n<p>You can use like this:</p>\n\n<pre><code>DialogContainer dc = DialogContainer.Load(path);\n//Get list of dialogs\nvar dialogs=dc.dialogs;\nvar theDialog=GetSingleDialog(\"1\",dialogs);\n</code></pre>\n\n<p>//Get your text</p>\n\n<pre><code>Debug.Log(theDialog.Text);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10723440, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jXHOvcHm3As/AAAAAAAAAAI/AAAAAAAABaE/nnQnfNsfWr0/photo.jpg?sz=128", "display_name": "adam", "link": "https://stackoverflow.com/users/10723440/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 54117865, "answer_count": 2, "score": 0, "last_activity_date": 1547069472, "creation_date": 1547064961, "question_id": 54117651, "link": "https://stackoverflow.com/questions/54117651/unity-2d-get-value-from-list-of-class-by-class-variables-value", "title": "Unity 2D - Get value from list of class by class variable&#39;s value", "body": "<p>My Xml loader saves data from xml file to list of class . Dialog is class with 2 properties: id and text, where are save content of xml file. I want to get \"text\" variable value in DialogLoader.cs from list in DialogContainer.cs by value of id variable. How can I do that? It's probably easy, but i don't know how.</p>\n\n<p><strong>dialogs.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;DialogCollection&gt;\n  &lt;Dialogs&gt;\n    &lt;Dialog id=\"1\"&gt;\n      &lt;Text&gt;Hello my friend&lt;/Text&gt;\n    &lt;/Dialog&gt;\n    &lt;Dialog id=\"2\"&gt;\n      &lt;Text&gt;Hello my grandma&lt;/Text&gt;\n    &lt;/Dialog&gt;\n    &lt;Dialog id=\"3\"&gt;\n      &lt;Text&gt;Hello my grandpa&lt;/Text&gt;\n    &lt;/Dialog&gt;\n  &lt;/Dialogs&gt;\n&lt;/DialogCollection&gt;\n</code></pre>\n\n<p><strong>DialogLoader.cs</strong></p>\n\n<pre><code>public class DialogLoader : MonoBehaviour\n{\n\npublic const string path = \"dialogs\";\n\nvoid Start()\n{\n    DialogContainer dc = DialogContainer.Load(path);\n//There I want to get text for example by id 1 (Hello my friend)\n    foreach (Dialog item in dc.dialogs)\n    {\n        print(item.text);\n    }\n}\n</code></pre>\n\n<p><strong>DialogContainer.cs</strong></p>\n\n<pre><code>[XmlRoot(\"DialogCollection\")]\npublic class DialogContainer\n{\n\n    [XmlArray(\"Dialogs\")]\n    [XmlArrayItem(\"Dialog\")]\n    public List&lt;Dialog&gt; dialogs = new List&lt;Dialog&gt;();\n\n    public static DialogContainer Load(string path)\n    {\n        TextAsset _xml = Resources.Load&lt;TextAsset&gt;(path);\n\n        XmlSerializer serializer = new XmlSerializer(typeof(DialogContainer));\n\n        StringReader reader = new StringReader(_xml.text);\n\n        DialogContainer dialogs = serializer.Deserialize(reader) as DialogContainer;\n\n\n        reader.Close();\n\n        return dialogs;\n    }\n\n\n}\n</code></pre>\n\n<p><strong>Dialog.cs</strong></p>\n\n<pre><code>public class Dialog\n{\n\n    [XmlAttribute(\"id\")]\n    public string id;\n\n    [XmlElement(\"Text\")]\n    public string text;\n\n\n}\n</code></pre>\n"}, {"tags": ["c#", "xamarin", "qr-code", "zxing"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 1709024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eacc6587ea37c8895286cdda22d70c1c?s=128&d=identicon&r=PG", "display_name": "J&#225;nos Tigyi", "link": "https://stackoverflow.com/users/1709024/j%c3%a1nos-tigyi"}, "edited": false, "score": 0, "creation_date": 1547068526, "post_id": 54118224, "comment_id": 95069452, "body": "Thansk ,but finaly I found the solution. The problem is the Xamarin Live player. I don&#39;t know why, but if I plug in via usb it works, but if I use live player it throws me the error. I don&#39;t understand."}], "tags": [], "owner": {"reputation": 60, "user_id": 4533460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BO121.jpg?s=128&g=1", "display_name": "Loveless", "link": "https://stackoverflow.com/users/4533460/loveless"}, "is_accepted": false, "score": 0, "last_activity_date": 1547067341, "creation_date": 1547067341, "answer_id": 54118224, "question_id": 54117574, "link": "https://stackoverflow.com/questions/54117574/xamarin-forms-shared-zxingscannerpage-keynotfoundexception/54118224#54118224", "title": "Xamarin forms shared ZXingScannerPage KeyNotFoundException", "body": "<p>Can you try this code and let me know if it works? It's hard to say what might be the problem based on that exception message.</p>\n\n<pre><code>        try\n        {\n            var scanPage = new ZXingScannerPage();\n            scanPage.IsScanning = true;\n\n            scanPage.OnScanResult += (result) =&gt;\n            {\n            // Stop scanning\n            scanPage.IsScanning = false;\n\n            // Pop the page and show the result\n            Device.BeginInvokeOnMainThread(async () =&gt;\n                {\n                    await Navigation.PopAsync(true);\n\n                    await DisplayAlert(\"Scanned Code\", result.Text, \"OK\");\n                });\n            };\n\n            Navigation.PushAsync(scanPage);\n        }\n        catch\n        {\n            // handle exception\n        }\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 1709024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eacc6587ea37c8895286cdda22d70c1c?s=128&d=identicon&r=PG", "display_name": "J&#225;nos Tigyi", "link": "https://stackoverflow.com/users/1709024/j%c3%a1nos-tigyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547067341, "creation_date": 1547064606, "question_id": 54117574, "link": "https://stackoverflow.com/questions/54117574/xamarin-forms-shared-zxingscannerpage-keynotfoundexception", "title": "Xamarin forms shared ZXingScannerPage KeyNotFoundException", "body": "<p>I have created a new xamarin project using shared code.</p>\n\n<p>I have installed the <strong>ZXing.Net.Mobile</strong> and <strong>ZXing.Net.Mobile.Forms</strong> nuget packages. I tried to follow a lots of tutorial but it keeps throwing exception when I call the scannerpage.</p>\n\n<p><a href=\"https://i.stack.imgur.com/n7KfL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n7KfL.png\" alt=\"enter image description here\"></a></p>\n\n<p>this is my code:</p>\n\n<pre><code> private void Button_OnClicked(object sender, EventArgs e)\n        {\n            var scan = new ZXingScannerPage();\n\n            Navigation.PushAsync(scan);\n\n            scan.OnScanResult += Scan_OnScanResult;\n        }\n\n        private void Scan_OnScanResult(ZXing.Result result)\n        {\n            if (result != null)\n            {\n                Device.BeginInvokeOnMainThread(\n                                               async () =&gt;\n                                                   {\n                                                       await Navigation.PopAsync(true);\n                                                       MyCode.Text = result.Text;\n                                                   });\n            }\n        }\n</code></pre>\n\n<p>Any idea how to get it work on a new xamarin project?\nI have checked the Camera in android manifest.</p>\n"}, {"tags": ["c#", "asp.net-core", "botframework", "azure-cosmosdb", "state-management"], "comments": [{"owner": {"reputation": 32375, "user_id": 185859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5f734ebbdfb504c718edd0c7d4d3874?s=128&d=identicon&r=PG", "display_name": "Drew Marsh", "link": "https://stackoverflow.com/users/185859/drew-marsh"}, "edited": false, "score": 0, "creation_date": 1547506901, "post_id": 54117431, "comment_id": 95208970, "body": "@TomasPicierri Did the answer below help you? Do you need any more info? If it helped please make sure to upvote and/or mark it as the answer to help other people in the future."}, {"owner": {"reputation": 39, "user_id": 6061975, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-OutuwDjdMH8/AAAAAAAAAAI/AAAAAAAAChc/Ryada-1O-SQ/photo.jpg?sz=128", "display_name": "Tomas Pichierri", "link": "https://stackoverflow.com/users/6061975/tomas-pichierri"}, "reply_to_user": {"reputation": 32375, "user_id": 185859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5f734ebbdfb504c718edd0c7d4d3874?s=128&d=identicon&r=PG", "display_name": "Drew Marsh", "link": "https://stackoverflow.com/users/185859/drew-marsh"}, "edited": false, "score": 1, "creation_date": 1547576776, "post_id": 54117431, "comment_id": 95236328, "body": "Hi @DrewMarsh, my code is a mess right now, so I can&#39;t test yours right now. But the links did helped me to understand more the framework. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6061975, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-OutuwDjdMH8/AAAAAAAAAAI/AAAAAAAAChc/Ryada-1O-SQ/photo.jpg?sz=128", "display_name": "Tomas Pichierri", "link": "https://stackoverflow.com/users/6061975/tomas-pichierri"}, "edited": false, "score": 0, "creation_date": 1547124789, "post_id": 54121218, "comment_id": 95089350, "body": "Hi Drew! I&#39;m really lost with these because the Microsoft&#39;s documentation is really bad and it&#39;s changing all the time. Your code helped me a lot to understand some concepts. Sadly other things broke when I made the changes. Do you have some link with info about the concepts of ConversationSate and UserSate so I can read upon?"}, {"owner": {"reputation": 1289, "user_id": 10530481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9njHN.jpg?s=128&g=1", "display_name": "Dana V", "link": "https://stackoverflow.com/users/10530481/dana-v"}, "edited": false, "score": 1, "creation_date": 1547137971, "post_id": 54121218, "comment_id": 95097526, "body": "You can look at these two articles for some help on concepts, etc.. <a href=\"https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-concept-state?view=azure-bot-service-4.0\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/azure/bot-service/&hellip;</a>  <a href=\"https://docs.microsoft.com/en-us/azure/bot-service/bot-builder-howto-v4-state?view=azure-bot-service-4.0&amp;tabs=csharp\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/azure/bot-service/&hellip;</a>"}, {"owner": {"reputation": 1289, "user_id": 10530481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9njHN.jpg?s=128&g=1", "display_name": "Dana V", "link": "https://stackoverflow.com/users/10530481/dana-v"}, "edited": false, "score": 0, "creation_date": 1547138082, "post_id": 54121218, "comment_id": 95097585, "body": "Let us know what broke and how."}, {"owner": {"reputation": 32375, "user_id": 185859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5f734ebbdfb504c718edd0c7d4d3874?s=128&d=identicon&r=PG", "display_name": "Drew Marsh", "link": "https://stackoverflow.com/users/185859/drew-marsh"}, "reply_to_user": {"reputation": 1289, "user_id": 10530481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9njHN.jpg?s=128&g=1", "display_name": "Dana V", "link": "https://stackoverflow.com/users/10530481/dana-v"}, "edited": false, "score": 0, "creation_date": 1547138926, "post_id": 54121218, "comment_id": 95098082, "body": "Yes, @DanaV&#39;s links are the ones you want to check out and if you are still having a problem please post another question and we&#39;ll do our best to help you out. And, if you have a second and you this answer useful, please give it an upvote and/or mark as the answer so it can help other people in the future! \ud83d\ude0a"}], "tags": [], "owner": {"reputation": 32375, "user_id": 185859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5f734ebbdfb504c718edd0c7d4d3874?s=128&d=identicon&r=PG", "display_name": "Drew Marsh", "link": "https://stackoverflow.com/users/185859/drew-marsh"}, "is_accepted": true, "score": 1, "last_activity_date": 1547096814, "last_edit_date": 1547096814, "creation_date": 1547087690, "answer_id": 54121218, "question_id": 54117431, "link": "https://stackoverflow.com/questions/54117431/how-to-store-userstate-and-conversationstate-in-azure-cosmos-db-botframework/54121218#54121218", "title": "How to store UserState and ConversationState in Azure Cosmos DB (BotFramework)?", "body": "<p>Ok, I'm not sure where you got this code from, but it looks like it's from a pre-release build. <code>ConversationState</code> and <code>UserState</code> are no longer middleware and no longer generic (e.g. don't have type arguments).</p>\n\n<p>This is what a <code>Startup::ConfigureServices</code> should look like when using CosmosDB for state storage on a 4.x release build:</p>\n\n<pre><code>public class Startup\n{\n     public void ConfigureServices(IServiceCollection services)\n     {\n        // Only need a single storage instance unless you really are storing your conversation state and user state in two completely DB instances\n        var storage = new CosmosDbStorage(new CosmosDbStorageOptions\n        {\n            // \u2026 set options here \u2026\n        });\n\n        var conversationState = new ConversationState(storage);\n        var userState = new UserState(storage);\n\n        // Add the states as singletons\n        services.AddSingleton(conversationState);\n        services.AddSingleton(userState);\n\n        // Create state properties accessors and register them as singletons\n        services.AddSingleton(conversationState.CreateProperty&lt;YourBotConversationState&gt;(\"MyBotConversationState\"));\n        services.AddSingleton(userState.CreateProperty&lt;YourBotUserState&gt;(\"MyBotUserState\"));\n\n        services.AddBot&lt;SeguritoBot&gt;(options =&gt;\n        {\n           // \u2026 set options here \u2026\n        });\n     }\n}\n</code></pre>\n\n<p>Now, in your bot, if you want to access those properties, you take them as dependencies via the constructor:</p>\n\n<pre><code>public class SeguritoBot : IBot\n{\n    private readonly ConversationState _conversationState;\n    private readonly UserState _userState;\n    private readonly IStatePropertyAccessor&lt;YourBotConversationState&gt; _conversationStatePropertyAccessor;\n    private readonly IStatePropertyAccessor&lt;YourBotUserState&gt; _userStatePropertyAccessor;\n\n    public SeguritoBot(\n        ConversationState conversationState, \n        UserState userState,\n        IStatePropertyAccessor&lt;YourBotConversationState&gt; conversationStatePropertyAccessor,\n        IStatePropertyAccessor&lt;YourBotUserState&gt; userStatePropertyAccesssor)\n    {\n        _conversationState = conversationState;\n        _userState = userState;\n        _conversationStatePropertyAcessor = conversationStatePropertyAcessor;\n        _userStatePropertyAcessor = userStatePropertyAcessor;\n    }\n\n    public async Task OnTurnAsync(ITurnContext turnContext, CancellationToken cancellationToken = default(CancellationToken))\n    {\n        var currentConversationState = await _conversationStatePropertyAccessor.GetAsync(\n            turnContext,\n            () =&gt; new YourBotConversationState(), \n            cancellationToken);\n\n        // Access properties for this conversation\n        // currentConversationState.SomeProperty\n\n        // Update your conversation state property\n        await _conversationStatePropertyAccessor.SetAsync(turnContext, currentConversationState, cancellationToken);\n\n        // Commit any/all changes to conversation state properties\n        await _conversationState.SaveChangesAsync(turnContext, cancellationToken);\n    }\n}\n</code></pre>\n\n<p>Obviously you can do the same with the user state property and you can support multiple properties per state scope with more calls to <code>CreateProperty</code> and injecting those <code>IStatePropertyAccessor&lt;T&gt;</code> as well, etc.</p>\n"}], "owner": {"reputation": 39, "user_id": 6061975, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-OutuwDjdMH8/AAAAAAAAAAI/AAAAAAAAChc/Ryada-1O-SQ/photo.jpg?sz=128", "display_name": "Tomas Pichierri", "link": "https://stackoverflow.com/users/6061975/tomas-pichierri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "accepted_answer_id": 54121218, "answer_count": 1, "score": 2, "last_activity_date": 1547096814, "creation_date": 1547063929, "last_edit_date": 1547086627, "question_id": 54117431, "link": "https://stackoverflow.com/questions/54117431/how-to-store-userstate-and-conversationstate-in-azure-cosmos-db-botframework", "title": "How to store UserState and ConversationState in Azure Cosmos DB (BotFramework)?", "body": "<p>I'm doing a bot with de Microsoft Bot Framework version V4. The documentation is really awful, and I'm having problems with Cosmos DB (Azure) when I try to store de UserSate and the ConversationState.</p>\n\n<p>I tried every result in Google but nothing has worked yet. Plus, there no much information about the framework really.</p>\n\n<p>Bellow is the code of the file Startup.cs.</p>\n\n<pre><code>public void ConfigureServices(IServiceCollection services)\n{\n    services.AddBot&lt;SeguritoBot&gt;(options =&gt;\n   {\n       var secretKey = Configuration.GetSection(\"botFileSecret\")?.Value;\n       var botFilePath = Configuration.GetSection(\"botFilePath\")?.Value;\n\n    // Loads .bot configuration file and adds a singleton that your Bot can access through dependency injection.\n    var botConfig = BotConfiguration.Load(botFilePath ?? @\".\\Segurito.bot\", secretKey);\n   services.AddSingleton(sp =&gt; botConfig ?? throw new InvalidOperationException($\"The .bot config file could not be loaded. ({botConfig})\"));\n\n    // Retrieve current endpoint.\n    var environment = _isProduction ? \"production\" : \"development\";\n   var service = botConfig.Services.FirstOrDefault(s =&gt; s.Type == \"endpoint\" &amp;&amp; s.Name == environment);\n   if (!(service is EndpointService endpointService))\n   {\n       throw new InvalidOperationException($\"The .bot file does not contain an endpoint with name '{environment}'.\");\n   }\n\n   options.CredentialProvider = new SimpleCredentialProvider(endpointService.AppId, endpointService.AppPassword);\n\n    // Creates a logger for the application to use.\n    ILogger logger = _loggerFactory.CreateLogger&lt;SeguritoBot&gt;();\n\n    // Catches any errors that occur during a conversation turn and logs them.\n    options.OnTurnError = async (context, exception) =&gt;\n   {\n       logger.LogError($\"Exception caught : {exception}\");\n       await context.SendActivityAsync(\"Sorry, it looks like something went wrong.\");\n   };\n\n   var optionsConversation = new CosmosDbStorageOptions()\n   {\n       CosmosDBEndpoint = new Uri(\"--secret--\"),\n       AuthKey = \"--secret--\",\n       DatabaseId = \"--secret--\",\n       CollectionId = \"--secret--\"\n   };\n\n   var optionsUser = new CosmosDbStorageOptions()\n   {\n       CosmosDBEndpoint = new Uri(\"--secret--\"),\n       AuthKey = \"--secret--\",\n       DatabaseId = \"--secret--\",\n       CollectionId = \"--secret--\"\n   };\n\n   IStorage dataStoreConversationState = new CosmosDbStorage(optionsConversation);\n   IStorage dataStoreUserState = new CosmosDbStorage(optionsUser);\n\n   options.Middleware.Add(new ConversationState&lt;ConversationState&gt;(dataStoreConversationState));\n   options.Middleware.Add(new UserState&lt;UserState&gt;(dataStoreUserState));\n   });\n}\n</code></pre>\n\n<p>The last to lines are giving the error:</p>\n\n<pre><code>The non-generic type 'ConversationState' cannot be used with type arguments\nThe non-generic type 'ConversationState' cannot be used with type arguments \n</code></pre>\n"}, {"tags": ["c#", "angular", "iis", "asp.net-core-2.0"], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 9380981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ZIP4.jpg?s=128&g=1", "display_name": "Flightdoc5242", "link": "https://stackoverflow.com/users/9380981/flightdoc5242"}, "edited": false, "score": 0, "creation_date": 1547065228, "post_id": 54117550, "comment_id": 95068035, "body": "I came across this answer before in research, i&#39;m not using impersonation, that&#39;s a different issue, i&#39;m talking about the Service account that runs the IIS site is returning an empty string from the UserPrincipal"}, {"owner": {"reputation": 186, "user_id": 9380981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ZIP4.jpg?s=128&g=1", "display_name": "Flightdoc5242", "link": "https://stackoverflow.com/users/9380981/flightdoc5242"}, "edited": false, "score": 0, "creation_date": 1547083190, "post_id": 54117550, "comment_id": 95073620, "body": "Thread static properties are ignored in .Net Core because of Dependency Injection I believe."}], "tags": [], "owner": {"reputation": 4119, "user_id": 10839105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b19eba5c32ea65bb432a004aad5e3?s=128&d=identicon&r=PG", "display_name": "Manoj Choudhari", "link": "https://stackoverflow.com/users/10839105/manoj-choudhari"}, "is_accepted": true, "score": 1, "last_activity_date": 1547064489, "creation_date": 1547064489, "answer_id": 54117550, "question_id": 54117403, "link": "https://stackoverflow.com/questions/54117403/how-to-fix-userprincipal-returning-empty-string-from-api-call/54117550#54117550", "title": "How to fix UserPrincipal returning empty string from API call", "body": "<p>What you need is you want to get the identity of the caller and you are assuming that as you are using windows authentication, you should get it.</p>\n\n<p>But .Net core APIs do not support impersonation.  The work around is either to use below code for getting user name </p>\n\n<p>Documentation: <a href=\"https://docs.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?tabs=visual-studio&amp;view=aspnetcore-2.2#impersonation\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?tabs=visual-studio&amp;view=aspnetcore-2.2#impersonation</a></p>\n\n<p>Below code may help you:</p>\n\n<pre><code>app.Run(async (context) =&gt;\n{\n    try\n    {\n        var user = (WindowsIdentity)context.User.Identity;\n\n        await context.Response\n            .WriteAsync($\"User: {user.Name}\\tState: {user.ImpersonationLevel}\\n\");\n\n        WindowsIdentity.RunImpersonated(user.AccessToken, () =&gt;\n        {\n            var impersonatedUser = WindowsIdentity.GetCurrent();\n            var message =\n                $\"User: {impersonatedUser.Name}\\t\" +\n                $\"State: {impersonatedUser.ImpersonationLevel}\";\n\n            var bytes = Encoding.UTF8.GetBytes(message);\n            context.Response.Body.Write(bytes, 0, bytes.Length);\n        });\n    }\n    catch (Exception e)\n    {\n        await context.Response.WriteAsync(e.ToString());\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 186, "user_id": 9380981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3ZIP4.jpg?s=128&g=1", "display_name": "Flightdoc5242", "link": "https://stackoverflow.com/users/9380981/flightdoc5242"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54117550, "answer_count": 1, "score": 0, "last_activity_date": 1547064489, "creation_date": 1547063774, "question_id": 54117403, "link": "https://stackoverflow.com/questions/54117403/how-to-fix-userprincipal-returning-empty-string-from-api-call", "title": "How to fix UserPrincipal returning empty string from API call", "body": "<p>I have a .net-core 2.2 application running on a windows server 2012, using angular as the front end SPA. In a windows domain, I have integrated windows authentication running, on the IIS server, I have the site running with Windows Auth as well, the main problem seems to be the service account running the AppPool, IF i run the site with my AD credentials, the site returns the user name and it displays in the angular front end correct, with a </p>\n\n<h3>Welcome, John Smith</h3>\n\n<p>when I run the AppPool with a service account that was created by our security team, the site returns the username as </p>\n\n<blockquote>\n  <p>\" \" </p>\n</blockquote>\n\n<p>empty string.  i confirmed that the service account that runs the app pool does indeed have access to read into Active Directory,  I am at a loss at this point on what else could be wrong. </p>\n\n<ol>\n<li>I've used my AD account to run the AppPool and the site runs fine. (this works)</li>\n<li>I've run the AppPool with the service account and the site does not return the UserPrincipal properly. (broken)</li>\n<li>I've confirmed the service account can read into Active Directory by running AD users and groups as the service account ( this works)</li>\n</ol>\n\n<p>API Controller: </p>\n\n<pre><code>```\n\n\n#region Get the logged in user\n        [HttpGet(\"api/getLoggedInUserObject\")] \n        public async Task&lt;ActionResult&gt; CheckForLoggedInUser()\n        {\n            try\n            {\n                var user = await userResolverSerivce.GetUserObject();\n\n                return Ok(user);\n            }\n            catch (Exception ex)\n            {\n                Debug.Write(ex.InnerException.ToString());\n                throw new Exception(\"User is not logged in\");\n\n            }\n\n        }\n        #endregion\n\n```\n</code></pre>\n\n<p>User Prinicipal repo</p>\n\n<pre><code>```\n\n    public class UserResolver : IUserResolver\n        {\n\n\n            private AuthorizedGroups AuthorizedGroups { get; set; }\n            private User _user { get; set; }\n\n\n            public UserResolver(IOptions&lt;AuthorizedGroups&gt; authorizedGroups, User user)\n            {\n                AuthorizedGroups = authorizedGroups.Value;\n                _user = user;\n\n            }\n\n\n            public Task&lt;User&gt; GetUserObject()\n            {\n\n                _user.FirstName = UserPrincipal.Current.GivenName;\n                _user.LastName = UserPrincipal.Current.Surname;\n                _user.FullName = $\"{_user.FirstName} {_user.LastName}\";\n                _user.AuthorizedRoles = GetAuthorizedRoles();\n\n\n                return Task.FromResult(_user);\n\n            }\n\n```\n</code></pre>\n\n<p>Angular HTML: </p>\n\n<pre><code>```\n\n    &lt;div&gt;\n      &lt;nav class=\"navbar-dark nav-bar-large bg-dark fixed-top\"&gt;\n        &lt;span class=\"pull-right userHighlight\"&gt;Welcome, {{data.userData.fullName}}&lt;/span&gt;\n        &lt;div class=\"container\" id=\"navbarNav\"&gt;\n\n          &lt;img class=\"image-center\" src=\"../../assets/img/logo_sm.png\" /&gt;\n\n        &lt;/div&gt;\n      &lt;/nav&gt;\n    &lt;/div&gt;\n\n```\n</code></pre>\n\n<p>Angular TS: </p>\n\n<pre><code>```\n\n    import { Component, OnInit, ViewEncapsulation } from '@angular/core';\n    import { UserService } from '../services/user.service';\n    import { User } from '../models/user';\n    import { ActivatedRoute } from '@angular/router';\n\n    @Component({\n      selector: 'app-main-container',\n      templateUrl: './main-container.component.html',\n      styleUrls: ['./main-container.component.css'],\n      encapsulation: ViewEncapsulation.None\n    })\n    export class MainContainerComponent implements OnInit {\n\n      private data: any;\n      private user: User[];\n\n      constructor(private route: ActivatedRoute) { }\n\n      ngOnInit() {\n        this.data = this.route.snapshot.data;\n        console.log(this.route.snapshot.data);\n      }\n\n\n\n    }\n\n```\n</code></pre>\n\n<p>The expected output should return the username, under the service account and not an empty string,  I've been scratching my head on why one service account works but not another.  there are no errors in the console.</p>\n"}, {"tags": ["c#", "asp.net-core"], "comments": [{"owner": {"reputation": 52302, "user_id": 11182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yfpsb.jpg?s=128&g=1", "display_name": "Lex Li", "link": "https://stackoverflow.com/users/11182/lex-li"}, "edited": false, "score": 0, "creation_date": 1547067535, "post_id": 54117354, "comment_id": 95068992, "body": "<a href=\"https://blogs.msdn.microsoft.com/dotnet/2017/11/16/announcing-the-windows-compatibility-pack-for-net-core/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/dotnet/2017/11/16/&hellip;</a>"}, {"owner": {"reputation": 28253, "user_id": 1139830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fAXTi.jpg?s=128&g=1", "display_name": "mason", "link": "https://stackoverflow.com/users/1139830/mason"}, "edited": false, "score": 0, "creation_date": 1547067916, "post_id": 54117354, "comment_id": 95069164, "body": "Instead of passing the name of a connection string, why don&#39;t you pass the connection string itself? Then the code responsible for creating the class (in .NET Core or .NET Framework) can use whatever way is appropriate to get the connection string."}, {"owner": {"reputation": 786, "user_id": 5503932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9ded9df61dec23139a6cccd9021dc11c?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5503932/sal"}, "reply_to_user": {"reputation": 28253, "user_id": 1139830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fAXTi.jpg?s=128&g=1", "display_name": "mason", "link": "https://stackoverflow.com/users/1139830/mason"}, "edited": false, "score": 0, "creation_date": 1547106688, "post_id": 54117354, "comment_id": 95079517, "body": "@mason yes for legacy dll not allow to modify. The code written in dll must be reference."}, {"owner": {"reputation": 28253, "user_id": 1139830, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/fAXTi.jpg?s=128&g=1", "display_name": "mason", "link": "https://stackoverflow.com/users/1139830/mason"}, "edited": false, "score": 1, "creation_date": 1547126343, "post_id": 54117354, "comment_id": 95090247, "body": "In that case, you should offer an alternative constructor that accepts a connection string (perhaps in a wrapper object, call it OracleConnectionSettings or something like that). Also, your library should be moved to .NET Standard so it can properly be referenced by both .NET Core and .NET Framework."}], "answers": [{"comments": [{"owner": {"reputation": 786, "user_id": 5503932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9ded9df61dec23139a6cccd9021dc11c?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5503932/sal"}, "edited": false, "score": 0, "creation_date": 1547122217, "post_id": 54117424, "comment_id": 95087982, "body": "this will not solve the legacy problem. Problem is what i cannot change the ConfigurationManager.AppSettings as it is embaded in in the dll."}, {"owner": {"reputation": 4119, "user_id": 10839105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b19eba5c32ea65bb432a004aad5e3?s=128&d=identicon&r=PG", "display_name": "Manoj Choudhari", "link": "https://stackoverflow.com/users/10839105/manoj-choudhari"}, "reply_to_user": {"reputation": 786, "user_id": 5503932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9ded9df61dec23139a6cccd9021dc11c?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5503932/sal"}, "edited": false, "score": 0, "creation_date": 1547128370, "post_id": 54117424, "comment_id": 95091429, "body": "asp.net core does not use the system.configuration namespace.  Hence that code would not work as it is.  Please refer [this documentation on supported configurations] (<a href=\"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-2.2\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/aspnet/core/fundamentals/configura&zwnj;&#8203;tion/&hellip;</a>)."}], "tags": [], "owner": {"reputation": 4119, "user_id": 10839105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b19eba5c32ea65bb432a004aad5e3?s=128&d=identicon&r=PG", "display_name": "Manoj Choudhari", "link": "https://stackoverflow.com/users/10839105/manoj-choudhari"}, "is_accepted": false, "score": 0, "last_activity_date": 1547063897, "creation_date": 1547063897, "answer_id": 54117424, "question_id": 54117354, "link": "https://stackoverflow.com/questions/54117354/net-core-with-net-framework-configuration/54117424#54117424", "title": ".Net Core with .Net Framework Configuration", "body": "<p>You can certainly keep the repository layer in the .net framework instead of using Core. </p>\n\n<p>Instead of using the ConfigurationManager.AppSettings, I would suggest to inject the required settings in form of either KeyValuePair collection or Dictionary. </p>\n\n<p>Then you can initialize this KeyValuePair collection or Dictionary in the startup method. </p>\n"}], "owner": {"reputation": 786, "user_id": 5503932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9ded9df61dec23139a6cccd9021dc11c?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5503932/sal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1547067678, "creation_date": 1547063514, "last_edit_date": 1547067678, "question_id": 54117354, "link": "https://stackoverflow.com/questions/54117354/net-core-with-net-framework-configuration", "title": ".Net Core with .Net Framework Configuration", "body": "<p>How to set the Configuration Manager AppSetting into legacy .Net Framework dependency.\nThe WebApi in .Net Core but for the data access have to use the legacy .Net Framework. Then Base library structure is </p>\n\n<pre><code>public class OracleRepository : BaseRepository\n{\n    public OracleRepository() : base(ConnectionString)\n    {\n    }\n}\n\npublic abstract class BaseRepository\n{\n    private string _connectionString;\n\n    public BaseRepository(string connectionString)\n    {\n        ConnectionString = ConfigurationManager.AppSettings[connectionString];\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "wpf", "data-binding", "two-way-binding"], "comments": [{"owner": {"reputation": 109436, "user_id": 1136211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd80cd7d5927902f3af471fa0353836?s=128&d=identicon&r=PG", "display_name": "Clemens", "link": "https://stackoverflow.com/users/1136211/clemens"}, "edited": false, "score": 1, "creation_date": 1547069550, "post_id": 54117308, "comment_id": 95069860, "body": "To avoid confusion like this, bind all controls to a common view model. As a note, instead of binding the Label&#39;s Content to <code>SelectedItem.iLDX</code> it might be simpler to bind to <code>SelectedValue</code>, and set <code>SelectedValuePath=&quot;iLDX&quot;</code> on the ListBox, just like you did on the Combobox."}, {"owner": {"reputation": 133, "user_id": 7782598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WOKO.jpg?s=128&g=1", "display_name": "john_m", "link": "https://stackoverflow.com/users/7782598/john-m"}, "reply_to_user": {"reputation": 109436, "user_id": 1136211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd80cd7d5927902f3af471fa0353836?s=128&d=identicon&r=PG", "display_name": "Clemens", "link": "https://stackoverflow.com/users/1136211/clemens"}, "edited": false, "score": 0, "creation_date": 1547119818, "post_id": 54117308, "comment_id": 95086681, "body": "Thank you for the suggestion. The code shown here is just for demostration purposes to present the case. My real ListBox has 15+ fields with other similar indexes, so the SelectedValuePath cannot be applied there.  You are right though, I had a confusing statement within the commented-out code, which is now corrected. Nevertheless, the problem is still there."}, {"owner": {"reputation": 2496, "user_id": 3512524, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d86f158f96941fef8bb311262cf3ad0e?s=128&d=identicon&r=PG&f=1", "display_name": "Krzysztof Skowronek", "link": "https://stackoverflow.com/users/3512524/krzysztof-skowronek"}, "reply_to_user": {"reputation": 109436, "user_id": 1136211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd80cd7d5927902f3af471fa0353836?s=128&d=identicon&r=PG", "display_name": "Clemens", "link": "https://stackoverflow.com/users/1136211/clemens"}, "edited": false, "score": 0, "creation_date": 1547149453, "post_id": 54117308, "comment_id": 95103250, "body": "@Clemens had very good advice. Don&#39;t do the binding between the controls, only to the ViewModel. That way it always work as you expect, even if you don&#39;t kwno the details of binding framework"}, {"owner": {"reputation": 133, "user_id": 7782598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WOKO.jpg?s=128&g=1", "display_name": "john_m", "link": "https://stackoverflow.com/users/7782598/john-m"}, "edited": false, "score": 0, "creation_date": 1547150145, "post_id": 54117308, "comment_id": 95103561, "body": "I am sorry but am not using any ViewModel and don&#39;t intend to. Am coding for hobby &amp; for entertainment, and in the old-fashioned way. At the same time, I expect the basic language functions to work properly, without going to Paris via North Pole :)"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 7782598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WOKO.jpg?s=128&g=1", "display_name": "john_m", "link": "https://stackoverflow.com/users/7782598/john-m"}, "edited": false, "score": 0, "creation_date": 1547119946, "post_id": 54121653, "comment_id": 95086757, "body": "Thank you for the answer. Could you please provide a link, where this behavior is documented, as originally asked ? I am asking because, for example, when binding 2 TextBoxes in OneWay mode and the second textbox (the target, setting the binding) is updated manually, the binding continues to function normally,  i.e. all text entered in the first (source) textbox is shown in the second through the binding, even if the second&#39;s Text is independently modified by hand.  But when this second Textbox.Text property is changed by code, then the binding is cleared, so the behavior is not consistent."}, {"owner": {"reputation": 1300, "user_id": 9250153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3d55650526a7e58bb9739dda4a0cff?s=128&d=identicon&r=PG&f=1", "display_name": "Alex.Wei", "link": "https://stackoverflow.com/users/9250153/alex-wei"}, "reply_to_user": {"reputation": 133, "user_id": 7782598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WOKO.jpg?s=128&g=1", "display_name": "john_m", "link": "https://stackoverflow.com/users/7782598/john-m"}, "edited": false, "score": 0, "creation_date": 1547133040, "post_id": 54121653, "comment_id": 95094418, "body": "@john_m Actually, there isn&#39;t any official document I know. But you could dig up this fact from the source code of <code>DependencyObject.SetValue</code> <a href=\"https://referencesource.microsoft.com/#WindowsBase/Base/System/Windows/DependencyObject.cs,76dfd12a4655a37a\" rel=\"nofollow noreferrer\">referencesource.microsoft.com/#WindowsBase/Base/System/Windo&zwnj;&#8203;ws/&hellip;</a>. And editing a <code>TextBox</code> would replace the binding expression is because if text was changed by editing, instead of  calling <code>SetValue</code>, <code>TextBox</code> call <code>SetCurrentDeferredVaule</code> which will not replace local value for better performance.  This is also can be found in the source code of <code>TextBox.OnTextContainerChanged</code>."}, {"owner": {"reputation": 133, "user_id": 7782598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WOKO.jpg?s=128&g=1", "display_name": "john_m", "link": "https://stackoverflow.com/users/7782598/john-m"}, "edited": false, "score": 0, "creation_date": 1547149395, "post_id": 54121653, "comment_id": 95103224, "body": "I found some documentation (pls see my EDIT). There was in fact some kind of bug, which in my opinion is not yet completely solved, with the Two-way binding erasing existing bindings. In any case, your mentioning of SetCurrentValue helped me in solving the problem."}, {"owner": {"reputation": 1300, "user_id": 9250153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3d55650526a7e58bb9739dda4a0cff?s=128&d=identicon&r=PG&f=1", "display_name": "Alex.Wei", "link": "https://stackoverflow.com/users/9250153/alex-wei"}, "reply_to_user": {"reputation": 133, "user_id": 7782598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WOKO.jpg?s=128&g=1", "display_name": "john_m", "link": "https://stackoverflow.com/users/7782598/john-m"}, "edited": false, "score": 0, "creation_date": 1547172516, "post_id": 54121653, "comment_id": 95110410, "body": "I think that early version of wpf didn&#39;t provide an api to set effective value it&#39;s more like a design miss than a bug. Since in most situations, we want to get the effective value and set the local value, there&#39;s nothing wrong about the implement of <code>GetValue</code> and <code>SetValue</code>."}, {"owner": {"reputation": 133, "user_id": 7782598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WOKO.jpg?s=128&g=1", "display_name": "john_m", "link": "https://stackoverflow.com/users/7782598/john-m"}, "edited": false, "score": 0, "creation_date": 1547188973, "post_id": 54121653, "comment_id": 95114190, "body": "MS called it a bug, and i&#39;m just using their words. Thanks anyway :)"}], "tags": [], "owner": {"reputation": 1300, "user_id": 9250153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3d55650526a7e58bb9739dda4a0cff?s=128&d=identicon&r=PG&f=1", "display_name": "Alex.Wei", "link": "https://stackoverflow.com/users/9250153/alex-wei"}, "is_accepted": true, "score": 2, "last_activity_date": 1547092457, "last_edit_date": 1547092457, "creation_date": 1547091641, "answer_id": 54121653, "question_id": 54117308, "link": "https://stackoverflow.com/questions/54117308/c-wpf-unexpected-behavior-of-oneway-mode-chain-binding-between-listbox-la/54121653#54121653", "title": "C# &amp; wpf - Unexpected behavior of (OneWay-Mode) chain-binding between ListBox-Label-ComboBox", "body": "<p>There's nothing strange at all. Data binding is designed to work this way. When you assign a binding to a dependency property, it means you change the local value of this dependency property to a binding expression. And any update provide by the binding source will be the effective value of this dependency property. If the binding is working in one way mode, any update to this dependency property from other then binding source, will overwrite the local value, result in losing the binding. On the other side, becuase two mode is suppose to update the binding source, dependency object will count any non-expression value as effective value, binding will keep working until you replace or clear it.</p>\n\n<ul>\n<li><code>DependencyObject.GetValue</code> gets the effective value.</li>\n<li><code>DependencyObject.ReadLocalValue</code> gets the local value.</li>\n<li><code>DependencyObject.SetValue</code> sets the local value.</li>\n<li><code>DependencyObject.SetCurrentValue</code> sets the effective value.</li>\n<li><code>DependencyObject.ClearValue</code> clears the local value.</li>\n</ul>\n"}], "owner": {"reputation": 133, "user_id": 7782598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WOKO.jpg?s=128&g=1", "display_name": "john_m", "link": "https://stackoverflow.com/users/7782598/john-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 54121653, "answer_count": 1, "score": 0, "last_activity_date": 1547150963, "creation_date": 1547063344, "last_edit_date": 1547150963, "question_id": 54117308, "link": "https://stackoverflow.com/questions/54117308/c-wpf-unexpected-behavior-of-oneway-mode-chain-binding-between-listbox-la", "title": "C# &amp; wpf - Unexpected behavior of (OneWay-Mode) chain-binding between ListBox-Label-ComboBox", "body": "<p>I have the following strange (for me) situation<br>\nA ListBox is bound (as Source) to a Label with OneWay Mode, i.e. ListBox is read-only.\nThe Label is then bound to a ComboBox with TwoWay binding  </p>\n\n<pre><code>ListBox --&gt; Label &lt;--&gt; ComboBox - arrows denote binding mode\n</code></pre>\n\n<p>The strange thing is that when the program starts and the user selects through the list in the ListBox, all 3 controls behave as expected.\nBut as soon as one index is chosen from Combobox, the Label continues to work properly (is updated by the Combo), but the OneWay binding to ListBox disappears (is null) and the ListBox cannot update the Label any more.</p>\n\n<p>It seems to me that when Label Content is set by other means besides the OneWay binding (as here with the Combo updating or maybe with a ValueConverter), this binding is cleared by WPF.</p>\n\n<p>The other strange behavior is that if this OneWay binding between ListBox and Label is turned into a TwoWay one, then everything works perfectly.</p>\n\n<p><strong>The question is</strong> what am I doing wrong, or if this is the normal behavior, where could I find relevant documentation.</p>\n\n<p>Please find below simplified code and XAML demonstrating the case.\nMy workaround is to set the Label Content with code in ListBox_SelectionChanged.</p>\n\n<pre><code>using System.Collections.Generic;\nusing System.Windows;\nusing System.Windows.Controls;\nusing System.Windows.Data;\n\nnamespace Test_Chained_controls\n{\n   public partial class MainWindow : Window\n   {\n      public class ComboItems\n      {\n         public int iDX { get; set; }\n         public string sDesc { get; set; }\n\n         public ComboItems(int a, string b)\n         {\n            iDX = a;\n            sDesc = b;\n         }\n      }\n\n      public class ListItems\n      {\n         public int iLDX { get; set; }\n         public ListItems(int a)\n         {\n            iLDX = a;\n         }\n      }\n\n      public List&lt;ListItems&gt; intList = new List&lt;ListItems&gt;();\n      public List&lt;ComboItems&gt; idx_StrList = new List&lt;ComboItems&gt;();\n\n      public MainWindow()\n      {\n         InitializeComponent();\n\n         intList.Add(new ListItems(0));\n         intList.Add(new ListItems(1));\n         intList.Add(new ListItems(2));\n         intList.Add(new ListItems(3));\n\n         idx_StrList.Add(new ComboItems(0, \"Zero\"));\n         idx_StrList.Add(new ComboItems(1, \"One\"));\n         idx_StrList.Add(new ComboItems(2, \"Two\"));\n         idx_StrList.Add(new ComboItems(3, \"Three\"));\n      }\n\n      private void Window_Loaded(object sender, RoutedEventArgs e)\n      {\n         listBox.ItemsSource = intList;\n         comboBox.ItemsSource = idx_StrList;\n      }\n\n      private void ListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)\n      {\n         //// Set Label Content in case of OneWay\n         // var binding = BindingOperations.GetBinding(label, Label.ContentProperty);\n         // if (binding != null)\n         // {\n         //    if (binding.Mode == BindingMode.OneWay)\n         //       {}  // Binding set - do nothing\n         // }\n         // else label.Content = listBox.SelectedItem;\n      }\n   }\n}\n</code></pre>\n\n<p>XAML</p>\n\n<pre><code>&lt;Window ... normal stuff\n        xmlns:local=\"clr-namespace:Test_Chained_controls\"\n        mc:Ignorable=\"d\"\n        Title=\"MainWindow\" Height=\"182\" Width=\"500\" Loaded=\"Window_Loaded\"&gt;\n    &lt;Grid&gt;\n        &lt;Grid.ColumnDefinitions&gt;\n            &lt;ColumnDefinition Width=\"100\"/&gt;\n            &lt;ColumnDefinition Width=\"120\"/&gt;\n            &lt;ColumnDefinition Width=\"140\"/&gt;\n        &lt;/Grid.ColumnDefinitions&gt;\n\n        &lt;Grid.RowDefinitions&gt;\n            &lt;RowDefinition Height=\"40\"/&gt;\n            &lt;RowDefinition Height=\"100\"/&gt;\n        &lt;/Grid.RowDefinitions&gt;\n\n        &lt;Label Content=\"ListBox\"    Grid.Row=\"0\" Grid.Column=\"0\" Margin=\"20,10,0,0\" /&gt;\n        &lt;Label Content=\"Label\"      Grid.Row=\"0\" Grid.Column=\"1\" Margin=\"20,10,0,0\" /&gt;\n        &lt;Label Content=\"ComboBox\"   Grid.Row=\"0\" Grid.Column=\"2\" Margin=\"20,10,0,0\" /&gt;\n\n        &lt;ListBox x:Name=\"listBox\"   Grid.Row=\"1\" Grid.Column=\"0\" Margin=\"0\"  \n                 DisplayMemberPath=\"iLDX\" \n                 SelectedIndex=\"0\"\n                 IsSynchronizedWithCurrentItem=\"True\" \n                 SelectionChanged=\"ListBox_SelectionChanged\"/&gt;\n\n        &lt;Border BorderThickness=\"1\" Grid.Row=\"1\" Grid.Column=\"1\" Height=\"30\" \n                Margin=\"20,20,0,0\" BorderBrush=\"#FFACACAC\"  &gt;\n\n            &lt;!-- *********** Label with Mode=OneWay or TwoWay *********** --&gt;\n            &lt;Label x:Name=\"label\" Width=\"100\" Height=\"25\"\n                   Content=\"{Binding ElementName=listBox, \n                             Path=SelectedItem.iLDX, Mode=OneWay }\" /&gt;\n        &lt;/Border&gt;\n\n        &lt;ComboBox x:Name=\"comboBox\" Grid.Row=\"1\" Grid.Column=\"2\" \n                                   Height=\"30\" Margin=\"20,20,0,0\"  \n\n                  DisplayMemberPath=\"sDesc\" \n                  SelectedValue=\"{Binding ElementName=label, Path=Content, \n                  TargetNullValue=0, FallbackValue=0, Mode=TwoWay}\"\n                  SelectedValuePath=\"iDX\"  /&gt;\n    &lt;/Grid&gt;\n&lt;/Window&gt;\n</code></pre>\n\n<p><strong>EDIT</strong>  </p>\n\n<p>Relevant documentation: <a href=\"https://docs.microsoft.com/en-us/previous-versions/windows/apps/hh700353(v=win.10)\" rel=\"nofollow noreferrer\">Dependency properties overview</a></p>\n\n<blockquote>\n  <p><strong>Local value:</strong> A local value might be set through the convenience of the property wrapper, which also equates to setting as an attribute or property element in XAML, or by a call to the <strong>SetValue</strong> method using a property of a specific instance. If you set a local value by using a binding or a static resource, these each act in the precedence as if a local value was set, <strong>and bindings or resource references are erased if a new local value is set.</strong>  </p>\n</blockquote>\n\n<p>and further down  </p>\n\n<blockquote>\n  <p>If you set another local value for a property that originally held a Binding value, <strong>you will overwrite the binding entirely, not just the binding's run-time value.</strong></p>\n</blockquote>\n\n<p>As I understand, there was some kind of bug related to this case, fixed with the introduction of DependencyObject.<strong>SetCurrentValue</strong>   <a href=\"https://blogs.msdn.microsoft.com/vinsibal/2009/05/21/the-control-local-values-bug-solution-and-new-wpf-4-0-related-apis/\" rel=\"nofollow noreferrer\">The Control Local Values Bug Solution</a>  </p>\n\n<pre><code>public void SetCurrentValue (System.Windows.DependencyProperty dp, object value);\n// Sets the value of a dependency property without changing its value source.\n</code></pre>\n\n<p>It seems to me that Combobox TwoWay binding is still using <strong>SetValue</strong>, and that's why the binding for (label) gets erased when my (combobox) is used.  </p>\n\n<p>To overcome this, I changed the TwoWay binding of (comboBox) to OneWay, and entered the following in the comboBox_DropDownClosed event (showing the currently selected Item), in order to update (label) by code without erasing the existing binding  </p>\n\n<pre><code>  private void comboBox_DropDownClosed(object sender, System.EventArgs e)\n  {\n     Binding binding = BindingOperations.GetBinding(label, Label.ContentProperty);\n     if (binding != null)\n     {\n        ComboItems ComboItem = comboBox.SelectedItem as ComboItems;\n        int iDX = ComboItem.iDX;\n\n        // Set label value without affecting existing binding\n        label.SetCurrentValue(Label.ContentProperty, iDX);\n     }\n  }\n</code></pre>\n\n<p>With the use of <strong>SetCurrentValue</strong>, code works now as originally intended by \"simulating\" the TwoWay mode.</p>\n"}, {"tags": ["c#", "c", "windows", "security", "ntfs"], "comments": [{"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1547064491, "post_id": 54117283, "comment_id": 95067735, "body": "See pinvoke : <a href=\"http://www.pinvoke.net/default.aspx/ntdll/NtQueryInformationFile.html\" rel=\"nofollow noreferrer\">pinvoke.net/default.aspx/ntdll/NtQueryInformationFile.html</a>"}, {"owner": {"reputation": 157, "user_id": 7016967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1Nb1tdGhGNs/AAAAAAAAAAI/AAAAAAAABTg/GXJ-sCh0nPo/photo.jpg?sz=128", "display_name": "Cade Bryant", "link": "https://stackoverflow.com/users/7016967/cade-bryant"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1547068202, "post_id": 54117283, "comment_id": 95069297, "body": "I can&#39;t find anything on that site that deals with ACLs/permissions."}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1547119641, "post_id": 54117283, "comment_id": 95086575, "body": "Here is the c++ wrapper : FileAccessInformation,  The structure has FileInformationClass which is defined here : <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/ddi/content/ntifs/ns-ntifs-_file_all_information\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows-hardware/drivers/ddi/conten&zwnj;&#8203;t/&hellip;</a>.  And then you get : FILE_ACCESS_INFORMATION and finally : ACCESS_MASK defined here : <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/kernel/access-mask\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows-hardware/drivers/kernel/&hellip;</a>"}, {"owner": {"reputation": 157, "user_id": 7016967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1Nb1tdGhGNs/AAAAAAAAAAI/AAAAAAAABTg/GXJ-sCh0nPo/photo.jpg?sz=128", "display_name": "Cade Bryant", "link": "https://stackoverflow.com/users/7016967/cade-bryant"}, "reply_to_user": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1547152289, "post_id": 54117283, "comment_id": 95104441, "body": "The PInvoke documentation doesn&#39;t help me, because the sample code involves creating a FileStream object on the files I want to retrieve information about.  I am trying to avoid directly accessing the files.  Instead I want to retrieve the Security IDs from all the files via the $MFT file (which I&#39;ve figured out how to do already)....and then use those SecurityIDS to retrieve the related ACLs from the $Secure file.  In order to do this, I need to know what to pass to the lpOverlapped parameter of the kernel32 function ReadFile()."}], "owner": {"reputation": 157, "user_id": 7016967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1Nb1tdGhGNs/AAAAAAAAAAI/AAAAAAAABTg/GXJ-sCh0nPo/photo.jpg?sz=128", "display_name": "Cade Bryant", "link": "https://stackoverflow.com/users/7016967/cade-bryant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547063650, "creation_date": 1547063254, "last_edit_date": 1547063650, "question_id": 54117283, "link": "https://stackoverflow.com/questions/54117283/how-i-programmatically-retrieve-data-from-the-ntfs-secure-file", "title": "How I programmatically retrieve data from the NTFS $Secure file?", "body": "<p>I figured out how to read the NTFS $MFT file by accessing the boot sector and passing in the appropriate MftStartLcn value into the third parameter of ReadFile().  Now I want to access the $Secure file in a similar way.  How do I do this?</p>\n\n<p>I'm writing this code in order to return the ACL for each folder and file on my hard drive (Windows 10).  My code below gets me the basic file metadata, but not the ACLs and other security information.  I <em>do</em> get the Security ID.  I'm assuming that I can then use this value to retrieve the related Security Descriptor (and thus the ACLs) in the $Secure file.  Thanks in advance for showing me how to do this.</p>\n\n<pre><code>//Read the $MFT record from disk into memory, which is always the first record in the MFT. \nReadFile(buffer, _diskInfo.BytesPerMftRecord, _diskInfo.MftStartLcn * _diskInfo.BytesPerSector * _diskInfo.SectorsPerCluster);\n//This brings back the basic file metadata but not the security/permissions data\n</code></pre>\n"}, {"tags": ["c#", "entity-framework", "linq"], "comments": [{"owner": {"reputation": 10516, "user_id": 2872388, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8a10ec2ce33bfdb3a0c44e39adf3092b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/2872388/steve"}, "edited": false, "score": 0, "creation_date": 1547063025, "post_id": 54117168, "comment_id": 95067162, "body": "whats db.Orders? whats the result set for orders? whats shipvia?"}, {"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "edited": false, "score": 0, "creation_date": 1547063092, "post_id": 54117168, "comment_id": 95067180, "body": "Plugging in a mock collection of <code>orders</code> with valid items the query returns the expected items for me. I can&#39;t repro the behavior you&#39;re seeing."}, {"owner": {"reputation": 1, "user_id": 3545284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa2cec59caed281ad5d796c087664d?s=128&d=identicon&r=PG&f=1", "display_name": "user3545284", "link": "https://stackoverflow.com/users/3545284/user3545284"}, "edited": false, "score": 0, "creation_date": 1547063168, "post_id": 54117168, "comment_id": 95067209, "body": "db.Orders is a table in my database, the DB query returns 900+ records into the list orders which is then filtered for shipvia to create exporders, but that is where it fails."}, {"owner": {"reputation": 1, "user_id": 3545284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa2cec59caed281ad5d796c087664d?s=128&d=identicon&r=PG&f=1", "display_name": "user3545284", "link": "https://stackoverflow.com/users/3545284/user3545284"}, "edited": false, "score": 0, "creation_date": 1547063369, "post_id": 54117168, "comment_id": 95067288, "body": "JSteward: that is discouraging, that is why I posted here; it looks like it should work but it&#39;s not"}, {"owner": {"reputation": 138646, "user_id": 1081897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46b160c4e606ce0be84dae336ab25f0?s=128&d=identicon&r=PG&f=1", "display_name": "D Stanley", "link": "https://stackoverflow.com/users/1081897/d-stanley"}, "edited": false, "score": 0, "creation_date": 1547063380, "post_id": 54117168, "comment_id": 95067291, "body": "Is it possible the <code>SHIPVIA</code> values contain trailing whitespace? I also note that you could do all that in one query and it would be MUCH faster since the filtering would be done on the SQL side:  <code>db.Orders.Where(x =&gt; x.VOID != &quot;Y&quot; &amp;&amp; x.GONEDATE == &quot;&quot; &amp;&amp; shipvia.Contains(x.SHIPVIA.ToUpper())).ToList();</code>"}, {"owner": {"reputation": 4119, "user_id": 10839105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b19eba5c32ea65bb432a004aad5e3?s=128&d=identicon&r=PG", "display_name": "Manoj Choudhari", "link": "https://stackoverflow.com/users/10839105/manoj-choudhari"}, "edited": false, "score": 0, "creation_date": 1547063450, "post_id": 54117168, "comment_id": 95067319, "body": "did you try using .TRIM() method ?"}, {"owner": {"reputation": 1, "user_id": 3545284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa2cec59caed281ad5d796c087664d?s=128&d=identicon&r=PG&f=1", "display_name": "user3545284", "link": "https://stackoverflow.com/users/3545284/user3545284"}, "edited": false, "score": 0, "creation_date": 1547064063, "post_id": 54117168, "comment_id": 95067568, "body": "Stanley, that is how I started, all in one query but since it didn&#39;t work, I split it to troubleshoot.  My first query works and returns 900+ items"}, {"owner": {"reputation": 1, "user_id": 3545284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa2cec59caed281ad5d796c087664d?s=128&d=identicon&r=PG&f=1", "display_name": "user3545284", "link": "https://stackoverflow.com/users/3545284/user3545284"}, "edited": false, "score": 0, "creation_date": 1547064115, "post_id": 54117168, "comment_id": 95067588, "body": "Yes, I used Trim() but it did not help"}], "answers": [{"tags": [], "owner": {"reputation": 4879, "user_id": 1212994, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0Z0E2.jpg?s=128&g=1", "display_name": "Todd Skelton", "link": "https://stackoverflow.com/users/1212994/todd-skelton"}, "is_accepted": false, "score": 0, "last_activity_date": 1547063499, "creation_date": 1547063499, "answer_id": 54117347, "question_id": 54117168, "link": "https://stackoverflow.com/questions/54117168/filter-entity-using-a-string-array-is-not-working/54117347#54117347", "title": "Filter entity using a string array is not working", "body": "<p>Just a take a stab. You might have white space in your database table. You can try to trim the results first.</p>\n\n<pre><code>shipvia.Contains(x.SHIPVIA.Trim().ToUpper())\n</code></pre>\n\n<p>I would suggest doing this filter before the results are returned. This will speed up the database query time.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3545284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa2cec59caed281ad5d796c087664d?s=128&d=identicon&r=PG&f=1", "display_name": "user3545284", "link": "https://stackoverflow.com/users/3545284/user3545284"}, "is_accepted": false, "score": 0, "last_activity_date": 1547066057, "creation_date": 1547066057, "answer_id": 54117914, "question_id": 54117168, "link": "https://stackoverflow.com/questions/54117168/filter-entity-using-a-string-array-is-not-working/54117914#54117914", "title": "Filter entity using a string array is not working", "body": "<p>I had to use a work-around since I only had three strings to check for, I expanded my filter by using or... not the most elegant but it lets me continue with my project!</p>\n\n<p>If anyone figures out why the .Contains is not working, please let me know...</p>\n\n<pre><code>public List&lt;Order&gt; GetOrderstoShip()\n    {\n        var shipvia = new string[] { \"UPS\", \"FED\", \"EX\", \"USP\" };\n        var orders = db.Orders.Where(\n            x =&gt; x.VOID != \"Y\" &amp;&amp; x.GONEDATE == \"\" &amp;&amp; (\n            x.SHIPVIA.Contains(\"UPS\") ||\n            x.SHIPVIA.Contains(\"FED\") ||\n            x.SHIPVIA.Contains(\"USP\"))\n            ).ToList();\n\n        var exporders = orders.Where(\n            x =&gt; shipvia.Contains(x.SHIPVIA.Trim().ToUpper())\n            ).ToList();\n\n        // Problem: exporders contains 0 items\n        // My database field contains the following:\n        // FEDEX, UPS, USPS, FEDEX GND, FEDEXGND\n        // And, I made sure orders has a list of 900+ items\n        return orders;\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3545284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa2cec59caed281ad5d796c087664d?s=128&d=identicon&r=PG&f=1", "display_name": "user3545284", "link": "https://stackoverflow.com/users/3545284/user3545284"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1547066057, "creation_date": 1547062710, "last_edit_date": 1547064894, "question_id": 54117168, "link": "https://stackoverflow.com/questions/54117168/filter-entity-using-a-string-array-is-not-working", "title": "Filter entity using a string array is not working", "body": "<p>I've researched and found that I use .Contains on the array to filter an entity, but my resulting list is empty what is wrong?</p>\n\n<pre><code>public List&lt;Order&gt; GetOrderstoShip()\n    {\n        var shipvia = new string[] { \"UPS\", \"FED\", \"EX\", \"USP\" };\n        var orders = db.Orders.Where(\n            x =&gt; x.VOID != \"Y\" &amp;&amp; x.GONEDATE == \"\")\n            .ToList();\n        var exporders = orders.Where(\n            x =&gt; shipvia.Contains(x.SHIPVIA.ToUpper())\n            ).ToList();\n        // Problem: exporders contains 0 items\n        // My database field contains the following:\n        // FEDEX, UPS, USPS, FEDEX GND, FEDEXGND\n        // And, I made sure orders has a list of 900+ items\n        return exporders;\n    }\n</code></pre>\n\n<p>New Development: I went into my DB and edited one record.  I set the ShipVia field exaclty to UPS (previously it was UPS GND) and I got one item back in exporder.\nThat means the .Contains is exact match.  So how do I get it to do something similar to the SQL Like?</p>\n\n<p>I thought the whole point of using contains was that is does partial match.</p>\n"}, {"tags": ["c#", "unity3d"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10864394, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PKzxiCiXN7s/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYW7VPAt8exilvOUctVJWfbbnNFnQ/mo/photo.jpg?sz=128", "display_name": "Aironas", "link": "https://stackoverflow.com/users/10864394/aironas"}, "edited": false, "score": 0, "creation_date": 1547144258, "post_id": 54116975, "comment_id": 95100852, "body": "How can I set a specific tile to the TileBase variable, I&#39;m trying to dig through the documentation but can&#39;t quite seem to find it. For example I have a tile called GroundTile and I would like to use it when using the SetTile method, how can I refer to it specifically or do I need to set the class to be serializable and use the unity inspector to specify the asset I want to use?"}, {"owner": {"reputation": 3923, "user_id": 6837889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148983ab46f8c60cf357c240c183c751?s=128&d=identicon&r=PG&f=1", "display_name": "ryeMoss", "link": "https://stackoverflow.com/users/6837889/ryemoss"}, "reply_to_user": {"reputation": 31, "user_id": 10864394, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PKzxiCiXN7s/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYW7VPAt8exilvOUctVJWfbbnNFnQ/mo/photo.jpg?sz=128", "display_name": "Aironas", "link": "https://stackoverflow.com/users/10864394/aironas"}, "edited": false, "score": 0, "creation_date": 1547145664, "post_id": 54116975, "comment_id": 95101428, "body": "Either would work. You can either assign through the unity inspector or use Resources.Load to grab it"}], "tags": [], "owner": {"reputation": 3923, "user_id": 6837889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148983ab46f8c60cf357c240c183c751?s=128&d=identicon&r=PG&f=1", "display_name": "ryeMoss", "link": "https://stackoverflow.com/users/6837889/ryemoss"}, "is_accepted": true, "score": 0, "last_activity_date": 1547062204, "last_edit_date": 1547062204, "creation_date": 1547061889, "answer_id": 54116975, "question_id": 54116808, "link": "https://stackoverflow.com/questions/54116808/paint-a-specific-pallet-element-in-a-specified-grid-position-using-c-in-unity/54116975#54116975", "title": "Paint a specific pallet element in a specified grid position using c# in unity", "body": "<p>You can use Vector3int and <a href=\"https://docs.unity3d.com/ScriptReference/Tilemaps.Tilemap.SetTile.html\" rel=\"nofollow noreferrer\">SetTile</a> to specify the position and paint the tile on your grid. </p>\n\n<pre><code>Tilemap myMap; \nTileBase myTile;\nVector3int tilePosition;\n//assign your values to these variables\n\nmyMap.setTile(tilePosition, myTile);\n</code></pre>\n\n<p>to remove a tile you can use <code>setTile(tilePosition, null);</code></p>\n\n<p>To use the Tilemap class you will likely to need to include the library.</p>\n\n<pre><code>using UnityEngine.Tilemaps;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10864394, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PKzxiCiXN7s/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYW7VPAt8exilvOUctVJWfbbnNFnQ/mo/photo.jpg?sz=128", "display_name": "Aironas", "link": "https://stackoverflow.com/users/10864394/aironas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 54116975, "answer_count": 1, "score": 0, "last_activity_date": 1547062204, "creation_date": 1547061202, "last_edit_date": 1547061466, "question_id": 54116808, "link": "https://stackoverflow.com/questions/54116808/paint-a-specific-pallet-element-in-a-specified-grid-position-using-c-in-unity", "title": "Paint a specific pallet element in a specified grid position using c# in unity", "body": "<p>I want to know how to refer to a specific grid position in unity, so I can either paint a new tile on it or destroy an old one by using a script. I want to refer to a specific tile as shown in this picture: </p>\n\n<p><a href=\"https://i.stack.imgur.com/Q9ufY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q9ufY.png\" alt=\"unity image\"></a> </p>\n\n<p>and paint something from the palatte there. </p>\n\n<p>I'm trying to create an auto scroller, so I want to be able to fill in new tiles on the fly and destroy the old ones. Sorry if this is something obvious I'm new to unity.</p>\n"}, {"tags": ["c#", "winforms", "datagridview"], "answers": [{"comments": [{"owner": {"reputation": 4119, "user_id": 10839105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b19eba5c32ea65bb432a004aad5e3?s=128&d=identicon&r=PG", "display_name": "Manoj Choudhari", "link": "https://stackoverflow.com/users/10839105/manoj-choudhari"}, "reply_to_user": {"reputation": 328, "user_id": 5999841, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRgjN.jpg?s=128&g=1", "display_name": "pacmaninbw", "link": "https://stackoverflow.com/users/5999841/pacmaninbw"}, "edited": false, "score": 1, "creation_date": 1547061613, "post_id": 54116748, "comment_id": 95066534, "body": "@pacmaninbw : Edited my anwer and added working code of winforms."}], "tags": [], "owner": {"reputation": 4119, "user_id": 10839105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5b19eba5c32ea65bb432a004aad5e3?s=128&d=identicon&r=PG", "display_name": "Manoj Choudhari", "link": "https://stackoverflow.com/users/10839105/manoj-choudhari"}, "is_accepted": true, "score": 0, "last_activity_date": 1547061352, "last_edit_date": 1547061352, "creation_date": 1547060888, "answer_id": 54116748, "question_id": 54116577, "link": "https://stackoverflow.com/questions/54116577/is-there-a-simpler-or-one-line-method-to-get-the-selected-index-of-a-datagridvie/54116748#54116748", "title": "Is there a simpler or one line method to get the selected index of a DataGridViewComboBoxCell?", "body": "<p>you can use below code:</p>\n\n<pre><code> myDGV.Columns[\"SampleColumn\"].Index;\n</code></pre>\n\n<p>This would work in winForms.</p>\n"}], "owner": {"reputation": 328, "user_id": 5999841, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRgjN.jpg?s=128&g=1", "display_name": "pacmaninbw", "link": "https://stackoverflow.com/users/5999841/pacmaninbw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 54116748, "answer_count": 1, "score": 0, "last_activity_date": 1547061352, "creation_date": 1547060055, "question_id": 54116577, "link": "https://stackoverflow.com/questions/54116577/is-there-a-simpler-or-one-line-method-to-get-the-selected-index-of-a-datagridvie", "title": "Is there a simpler or one line method to get the selected index of a DataGridViewComboBoxCell?", "body": "<p>I have a datagrid that contains mostly DataGridViewComboBoxColumn columns as data. The number of columns in the DataGridView varies based on the type of\nproduct being listed. To make editing of each row of the data easier I have created a modal editor to display all the columns as multiple rows and columns\n(need to remove the horizontal scrolling forced on the user by the data grid). The data in one row of the datagrid needs to be transferred to the modal editor.</p>\n\n<p>Obviously the controls in the modal editor will not be of type DataGridViewComboBoxCell. They are currently of type ListBox, but in most of\nthe cases this is easy enough to change to ComboBox.</p>\n\n<p>The controls in the modal editor need to be initiated with the currently\nselected values of the DataGridViewComboBox Cells if the user has previously\nedited the control.</p>\n\n<p>The way I originally planed to do it was to get the selected index of the\nDataGridViewComboBox but that doesn't seem to exist. Is there a method to get\nthe selected index that does not involve comparing the Cell Value to each of\nthe items in the DataGridViewComboBoxColumn.items list?</p>\n\n<p>This question refers to the second constructor where it is looping through the list of items to get selected index.</p>\n\n<pre><code>public class ControlTransferData\n{\n    private List&lt;string&gt; _valueStrings;\n    private string _name;\n    private bool _hasSelection;\n    private int _indexSelected;\n\n    public ControlTransferData()\n    {\n        _valueStrings = new List&lt;string&gt;();\n        _name = null;\n        _indexSelected = -1;\n        _hasSelection = false;\n        Width = 0;\n        Height = 0;\n    }\n\n    public ControlTransferData(DataGridViewComboBoxColumn CboxCol, DataGridViewCell currentControlToTransfer)\n    {\n        _valueStrings = new List&lt;string&gt;();\n        foreach (string item in CboxCol.Items)\n        {\n            string itemStringValue = item.ToString();\n            if (!string.IsNullOrWhiteSpace(itemStringValue) &amp;&amp; !string.IsNullOrEmpty(itemStringValue))\n            {\n                _valueStrings.Add(itemStringValue);\n            }\n        }\n\n        if (currentControlToTransfer.Value != null)\n        {\n            _hasSelection = true;\n            int selectedIndex = 0;\n            string selectedItem = currentControlToTransfer.Value.ToString();\n            foreach (string currentString in _valueStrings)\n            {\n                if (currentString.CompareTo(selectedItem) == 0)\n                {\n                    _indexSelected = selectedIndex;\n                }\n                selectedIndex++;\n            }\n        }\n        else\n        {\n            _indexSelected = -1;\n            _hasSelection = false;\n        }\n\n        _name = CboxCol.HeaderText;\n        Width = 0;\n        Height = 0;\n    }\n\n    public string Name { set { _name = value } get { return _name; } }\n    public List&lt;string&gt; ValueStrings { set { _valueStrings = value; } get { return _valueStrings; } }\n    public bool HasSelection { set { _hasSelection = value; } get { return _hasSelection; } }\n    public int IndexSelected { set { _indexSelected = value; } get { return _indexSelected; } }\n    public int Width { set; get; }\n    public int Height { set; get; }\n}\n</code></pre>\n"}, {"tags": ["c#", "text-files"], "comments": [{"owner": {"reputation": 214980, "user_id": 470005, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/09536b39b586f3ae555f8ce20d5d8bd1?s=128&d=identicon&r=PG", "display_name": "Sergey Berezovskiy", "link": "https://stackoverflow.com/users/470005/sergey-berezovskiy"}, "edited": false, "score": 2, "creation_date": 1547060004, "post_id": 54116532, "comment_id": 95065865, "body": "Side note: take a look at <a href=\"https://blog.codinghorror.com/flattening-arrow-code/\" rel=\"nofollow noreferrer\">Arrow Code</a>"}, {"owner": {"reputation": 3268, "user_id": 9850970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/85lTf.png?s=128&g=1", "display_name": "Aldert", "link": "https://stackoverflow.com/users/9850970/aldert"}, "edited": false, "score": 0, "creation_date": 1547060163, "post_id": 54116532, "comment_id": 95065927, "body": "So did you debug? What is the value of containsUser?"}, {"owner": {"reputation": 14377, "user_id": 166556, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/SvcFY.png?s=128&g=1", "display_name": "Paul Michaels", "link": "https://stackoverflow.com/users/166556/paul-michaels"}, "edited": false, "score": 1, "creation_date": 1547060297, "post_id": 54116532, "comment_id": 95065977, "body": "Difficult to say without debugging it, but are the users all in the same case (username1 != Username1).  My advice would be to separate the part of your logic that checks for the username inside the text and put that in a separate function (pass the string in) and then write a unit test.  That should help you to determine what the issue is quickly."}, {"owner": {"reputation": 937, "user_id": 8447562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xYRil.png?s=128&g=1", "display_name": "Symon", "link": "https://stackoverflow.com/users/8447562/symon"}, "edited": false, "score": 0, "creation_date": 1547060420, "post_id": 54116532, "comment_id": 95066032, "body": "Could read text file and grab all <code>usernames</code> from file and put it into a <code>list</code>, check new <code>username</code> against <code>list</code>"}], "answers": [{"comments": [{"owner": {"reputation": 214980, "user_id": 470005, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/09536b39b586f3ae555f8ce20d5d8bd1?s=128&d=identicon&r=PG", "display_name": "Sergey Berezovskiy", "link": "https://stackoverflow.com/users/470005/sergey-berezovskiy"}, "edited": false, "score": 0, "creation_date": 1547063720, "post_id": 54116704, "comment_id": 95067427, "body": "<code>Contains(&quot;~&quot; + username + &quot;~&quot;)</code> will not work, because someone could use password which equals given username."}, {"owner": {"reputation": 46070, "user_id": 1410664, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/vGygm.gif?s=128&g=1", "display_name": "Caius Jard", "link": "https://stackoverflow.com/users/1410664/caius-jard"}, "reply_to_user": {"reputation": 214980, "user_id": 470005, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/09536b39b586f3ae555f8ce20d5d8bd1?s=128&d=identicon&r=PG", "display_name": "Sergey Berezovskiy", "link": "https://stackoverflow.com/users/470005/sergey-berezovskiy"}, "edited": false, "score": 0, "creation_date": 1547063844, "post_id": 54116704, "comment_id": 95067475, "body": "Yes, I&#39;ve covered that"}], "tags": [], "owner": {"reputation": 46070, "user_id": 1410664, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/vGygm.gif?s=128&g=1", "display_name": "Caius Jard", "link": "https://stackoverflow.com/users/1410664/caius-jard"}, "is_accepted": false, "score": 1, "last_activity_date": 1547064241, "last_edit_date": 1547064241, "creation_date": 1547060654, "answer_id": 54116704, "question_id": 54116532, "link": "https://stackoverflow.com/questions/54116532/how-to-check-if-a-user-input-already-exists-in-a-text-file-within-c/54116704#54116704", "title": "how to check if a user input already exists in a text file within c#", "body": "<p>Here's a one-liner that will check whether your file contains the username:</p>\n\n<pre><code>bool usernameExists = File.ReadAllText(@\"C:\\path\\to\\your\\file.txt\").Contains(\"~\" + username + \"~\");\n</code></pre>\n\n<p>The reason why your program registers new users all the time is because you made a slight logic error in the use of <code>ReadLines()</code> - it returns an array of strings. If your file has 3 lines:</p>\n\n<pre><code>John smith~john~password1\nJane smith~jane~password2\nFred smith~fred~password3\n</code></pre>\n\n<p>That's what you get as an array, as if you'd done this in code:</p>\n\n<pre><code>var array = new string[3];\narray[0] = \"John smith~john~password1\";\narray[1] = \"Jane smith~jane~password2\";\narray[2] = \"Fred smith~fred~password3\"; \n</code></pre>\n\n<p>Then if you ask an entire array if it <code>.Contains()</code> the username, it will only respond true if one of the strings inside the array is exactly \"john\". </p>\n\n<p>This array doesn't have a string that is exactly \"john\", though one of those lines does have within it the text \"john\".. But when you use <code>.Contains()</code> on an array of string it will only return true if one of the strings in the array is equal to \"john\"</p>\n\n<p>None of your strings in your array is equal to John</p>\n\n<p>If you'd said:</p>\n\n<pre><code>File.ReadLines(...).Contains(\"John smith~john~password1\");\n</code></pre>\n\n<p>then the result would be true, because one of the strings in the array really is equal to \"John smith~john~password1\". </p>\n\n<p>Alternatively, if you'd looped through the array of strings and asked each string if it cointains \"john\" within it:</p>\n\n<pre><code>string[] lines = File.ReadLines(...);\nforeach(string line in lines)\n  if(line.Contains(\"~\" + username + \"~\"))\n    contains = true;\n</code></pre>\n\n<p>this also would have worked out.</p>\n\n<p>TLDR:</p>\n\n<ul>\n<li>ArrayOfString.Contains(\"john\") --> checks whenther one of the strings in the array is equal to the string \"john\"</li>\n<li>ASingleString.Contains(\"john\") --> checks whether the single string has \"john\" somewhere within it</li>\n</ul>\n\n<p>Possibly confusing, i know, that both Array and String classes both have a method called Contains, but it happens a lot - same name, different behavior</p>\n\n<hr>\n\n<p>The reason why the ReadAllText() works out is that it just gives you the file as one long string. Your usernames always have a ~ either side of them, so a string of <code>John smith~john~password1\\r\\nJane smith~jane~password2\\r\\nFred smith~fred~password3</code> does indeed contain <code>~john~</code></p>\n\n<p>There's a slight bug potential with this: if one of the passwords is \"john\" this way will also return true. Of course, you're going to be hashing your passwords so they can't be read, for security right? ;) but it's a risk to be aware of and deal with as appropriate (later)</p>\n\n<hr>\n\n<p>I'd be tempted to use <code>File.AppendAllText</code> to add your usernames to your file rather than the way you've done it: it's a one line method that opens the file, writes to it and closes it again.</p>\n\n<p>You might want to get more sophisticated than my File.ReadAllText, and go for your method, but remember to treat the array of strings properly:</p>\n\n<pre><code>string[] lines = File.ReadLines(...);\nforeach(string line in lines){\n  string[] bits = line.Split('~');\n  string fullname = bits[0];\n  string username = bits[1];\n  string password = bits[2];\n  string lastlogin= bits[3];\n\n  //now you can do more thorough checks\n  if(userinput.Equals(username, InvariantCultureIgnoreCase)) //case insensitive compare\n}\n</code></pre>\n\n<p>Splitting the string on ~ into its components is a more reliable way of checking your data, it will help later with checking they typed the right password, returning their full name for the welcome message etc..</p>\n"}, {"comments": [{"owner": {"reputation": 46070, "user_id": 1410664, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/vGygm.gif?s=128&g=1", "display_name": "Caius Jard", "link": "https://stackoverflow.com/users/1410664/caius-jard"}, "edited": false, "score": 0, "creation_date": 1547063901, "post_id": 54116914, "comment_id": 95067503, "body": "Considering the audience, I didn&#39;t think using LINQ to be particularly appropriate. I&#39;d also extend this &quot;sense of what is suited to the audience&quot; to most of your bullet points.."}, {"owner": {"reputation": 214980, "user_id": 470005, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/09536b39b586f3ae555f8ce20d5d8bd1?s=128&d=identicon&r=PG", "display_name": "Sergey Berezovskiy", "link": "https://stackoverflow.com/users/470005/sergey-berezovskiy"}, "reply_to_user": {"reputation": 46070, "user_id": 1410664, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/vGygm.gif?s=128&g=1", "display_name": "Caius Jard", "link": "https://stackoverflow.com/users/1410664/caius-jard"}, "edited": false, "score": 0, "creation_date": 1547067369, "post_id": 54116914, "comment_id": 95068933, "body": "Considering the fact that the &#39;audience&#39; is already used LINQ I don&#39;t see any reasons to move away from it. Also, SO is not only for the person who asks the question - anyone who reads the answers is the &#39;audience&#39;. You, for example."}], "tags": [], "owner": {"reputation": 214980, "user_id": 470005, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/09536b39b586f3ae555f8ce20d5d8bd1?s=128&d=identicon&r=PG", "display_name": "Sergey Berezovskiy", "link": "https://stackoverflow.com/users/470005/sergey-berezovskiy"}, "is_accepted": false, "score": 0, "last_activity_date": 1547062014, "last_edit_date": 1547062014, "creation_date": 1547061636, "answer_id": 54116914, "question_id": 54116532, "link": "https://stackoverflow.com/questions/54116532/how-to-check-if-a-user-input-already-exists-in-a-text-file-within-c/54116914#54116914", "title": "how to check if a user input already exists in a text file within c#", "body": "<p>Here you check whether a file contains a line which <strong>exactly</strong> matches user name</p>\n\n<pre><code>File.ReadLines(\"users.txt\").Contains(username)\n</code></pre>\n\n<p>But your lines look like <code>fullname + \"~\" + username + \"~\" + password + \"~\" + lastlogin</code> and of course there never will be a line which maches <code>username</code>. What you should do is splitting each line on the separator symbol you are using (<code>~</code>) and getting user name from it:</p>\n\n<pre><code>var registeredUsers =\n      from line in File.ReadLines(\"users.txt\")\n      let parts = line.Split('~')\n      select parts[1]; // because first goes full name\n\nbool containsUser = registeredUsers.Contains(username);\n</code></pre>\n\n<hr>\n\n<p>Few notes:</p>\n\n<ul>\n<li>Keeping passwords is a bad idea - you should store password hashes instead. </li>\n<li>Consider using a database to avoid parsing all users data each time your users are logged in or registered</li>\n<li>Consider using Guard Conditions to avoid Arrow Code antipattern</li>\n<li>Consider separating UI code, business logic, and persistence-related code. It will simplify your programs a lot. E.g. in this case you can have <code>UserRepository</code> which knows how to hidrate users from storage, <code>UserService</code> which is responsible for business logic (e.g. checking if username already in use before registering new user), and UI code which is responsible for getting data from controls and displaying results to user (it should call service to get results).</li>\n</ul>\n"}], "owner": {"reputation": 7, "user_id": 10879001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7378c87e1730604fbcb5ac68a2ef21?s=128&d=identicon&r=PG&f=1", "display_name": "james poriam", "link": "https://stackoverflow.com/users/10879001/james-poriam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1547064241, "creation_date": 1547059839, "last_edit_date": 1547060964, "question_id": 54116532, "link": "https://stackoverflow.com/questions/54116532/how-to-check-if-a-user-input-already-exists-in-a-text-file-within-c", "title": "how to check if a user input already exists in a text file within c#", "body": "<p>i am making a c# application for my a a level computing coursework. my coursework requires me to have a registration and login  system and i am currently stuck with the registration part because my registration system is meant to check if a username chosen by the user already exists within the text file.</p>\n\n<p>i have already searched on stack overflow on a solution and have tried to implement similar solutions bu it dosent seem to work as my code still lets new users to register with an already existing password</p>\n\n<pre><code> string firstname = txtBoxFirstname.Text;\n string surname = txtBoxSurname.Text;\n string fullname = txtBoxFirstname.Text+\" \"+txtBoxSurname.Text;\n string username = txtBoxUsername.Text;\n string password = txtBoxPassword.Text;\n string confirmedPassword = txtBoxConfirmedPassword.Text;\n DateTime lastlogin = DateTime.Now;\n bool containsUser = File.ReadLines(\"users.txt\").Contains(username);\n\nif ((!string.IsNullOrEmpty(firstname)) &amp;&amp; \n   ((!string.IsNullOrEmpty(surname)) &amp;&amp; \n   ((!string.IsNullOrEmpty(username)) &amp;&amp; \n   (!string.IsNullOrEmpty(password)) &amp;&amp; \n   (!string.IsNullOrEmpty(confirmedPassword)))))\n{\n\n    if ((!username.Contains(\"~\")) || (!password.Contains(\"~\")))\n    {\n        if (password == confirmedPassword)\n        {\n            if (containsUser == false)//this is the part that check if a username already exists\n            {\n                FileStream fileStream = new FileStream(\"users.txt\", FileMode.Append, FileAccess.Write);\n                StreamWriter streamWriter = new StreamWriter(fileStream);\n\n                try\n                {\n                    streamWriter.WriteLine(fullname + \"~\" + username + \"~\" + password + \"~\" + lastlogin);\n\n                    MessageBox.Show(\"User registered successfully\", \"Registration Successful\");\n\n                    this.Hide();\n                    var homeForm = new HomeForm();\n                    homeForm.Closed += (s, args) =&gt; this.Close();\n                    homeForm.Show();\n\n                }\n                catch (Exception)\n                {\n                    MessageBox.Show(\"Error registering the user\", \"Please try again\");\n                }\n                finally\n                {\n                    streamWriter.Close();\n                    fileStream.Close();\n                }\n            }\n            else\n            {\n                MessageBox.Show(\"Sorry this username is already taken\", \"Please try again\");\n            }\n        }\n        else\n        {\n            MessageBox.Show(\"Passwords must match\",\n                        \"Incorrect Details\");\n        }\n    }\n    else\n    {\n        MessageBox.Show(\"Username and password must not contain any special characters i.e. ~\", \"~ entered\");\n    }\n\n}\nelse\n{\n    MessageBox.Show(\"Please ensure all data is entered into the fields\",\n        \"Details missing\");\n}\n</code></pre>\n\n<p>my expected code should return a message saying that this username is already taken if the username entered already exists but my program still creates the user an account anyway</p>\n"}, {"tags": ["c#", "database", "sqlite", "unity3d"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10891055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8082a89ccee85de65b141f51a81976?s=128&d=identicon&r=PG&f=1", "display_name": "Bradzcg", "link": "https://stackoverflow.com/users/10891055/bradzcg"}, "edited": false, "score": 0, "creation_date": 1547060086, "post_id": 54116453, "comment_id": 95065896, "body": "how would i make it so that one recipe can have many ingredients. Forgive me if this is a novice question working with SQL is very new to me"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1547059456, "creation_date": 1547059456, "answer_id": 54116453, "question_id": 54116418, "link": "https://stackoverflow.com/questions/54116418/is-there-a-way-to-search-a-list-in-a-sqlite-database/54116453#54116453", "title": "Is there a way to search a list in a SQLite database?", "body": "<p>the classic relational way to do that is to have an ingredients table and a relator table (ingedientrecipe) so that you can query for all the ingredients in a recipe or all recipes that contain a given ingredient</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10891055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8082a89ccee85de65b141f51a81976?s=128&d=identicon&r=PG&f=1", "display_name": "Bradzcg", "link": "https://stackoverflow.com/users/10891055/bradzcg"}, "edited": false, "score": 0, "creation_date": 1547062236, "post_id": 54116697, "comment_id": 95066804, "body": "In my database my tables are setup as such: CREATE TABLE &quot;Ingredient_Recipe&quot; ( \t&quot;ID&quot;\tINTEGER, \t&quot;Recipe_ID&quot;\tTEXT, \t&quot;Ingredient_ID&quot;\tINTEGER, \tPRIMARY KEY(&quot;ID&quot;) ); CREATE TABLE &quot;Ingredients&quot; ( \t&quot;Ingredient_ID&quot;\tINTEGER, \t&quot;Ingredient_Name&quot;\tTEXT, \tPRIMARY KEY(&quot;Ingredient_ID&quot;) ); CREATE TABLE &quot;Recipe&quot; ( \t&quot;Recipe_ID&quot;\tINTEGER, \t&quot;Recipe_Name&quot;\tTEXT, \tPRIMARY KEY(&quot;Recipe_ID&quot;) ); // How can this be applied to my database as i am having difficulty understanding yours"}, {"owner": {"reputation": 182, "user_id": 8865906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ea94324dde2dea76f5fc7c2dd8f269?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan_L", "link": "https://stackoverflow.com/users/8865906/ryan-l"}, "reply_to_user": {"reputation": 1, "user_id": 10891055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8082a89ccee85de65b141f51a81976?s=128&d=identicon&r=PG&f=1", "display_name": "Bradzcg", "link": "https://stackoverflow.com/users/10891055/bradzcg"}, "edited": false, "score": 0, "creation_date": 1547062585, "post_id": 54116697, "comment_id": 95066962, "body": "You need to create another table named whatever you want, with it&#39;s own primary key, and two foreign keys, &quot;Recipe_ID&quot; and &quot;Ingredient_ID&quot;.  Then you need to join on all 3 tables."}, {"owner": {"reputation": 1, "user_id": 10891055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8082a89ccee85de65b141f51a81976?s=128&d=identicon&r=PG&f=1", "display_name": "Bradzcg", "link": "https://stackoverflow.com/users/10891055/bradzcg"}, "edited": false, "score": 0, "creation_date": 1547062722, "post_id": 54116697, "comment_id": 95067023, "body": "I am using the &quot;Ingredient_Recipe&quot; table in order to join the recipe and ingredients tables"}, {"owner": {"reputation": 182, "user_id": 8865906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ea94324dde2dea76f5fc7c2dd8f269?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan_L", "link": "https://stackoverflow.com/users/8865906/ryan-l"}, "reply_to_user": {"reputation": 1, "user_id": 10891055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8082a89ccee85de65b141f51a81976?s=128&d=identicon&r=PG&f=1", "display_name": "Bradzcg", "link": "https://stackoverflow.com/users/10891055/bradzcg"}, "edited": false, "score": 0, "creation_date": 1547063709, "post_id": 54116697, "comment_id": 95067420, "body": "I don&#39;t know specifics about SQLite, but you need to declare Recipe_ID and Ingredient_ID to be foreign keys of the Ingredient_Recipe table."}], "tags": [], "owner": {"reputation": 182, "user_id": 8865906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ea94324dde2dea76f5fc7c2dd8f269?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan_L", "link": "https://stackoverflow.com/users/8865906/ryan-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1547060633, "creation_date": 1547060633, "answer_id": 54116697, "question_id": 54116418, "link": "https://stackoverflow.com/questions/54116418/is-there-a-way-to-search-a-list-in-a-sqlite-database/54116697#54116697", "title": "Is there a way to search a list in a SQLite database?", "body": "<p>You need to read up on how relational databases work.  Right now, with everything in one table, your database isn't really any more useful than a simple Excel spreadsheet.</p>\n\n<p>You want three tables; one for ingredients, one for recipes, and one to join them, which I'll call Ingredient_Recipe.  Ingredient_Recipe table will have two foreign keys, one from the ingredients table, one from the recipe table.  Then you can do SQL queries like this example:</p>\n\n<pre><code>select Recipes.recipeName\nfrom Recipes\nINNER JOIN Ingredient_Recipe ON recipe_ID = Ingredient_Recipe.recipe_ID\nWhere Ingredient_ID = \"oregano\"\n</code></pre>\n\n<p>Which should tell you every recipe that contains oregano.</p>\n"}], "owner": {"reputation": 1, "user_id": 10891055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f8082a89ccee85de65b141f51a81976?s=128&d=identicon&r=PG&f=1", "display_name": "Bradzcg", "link": "https://stackoverflow.com/users/10891055/bradzcg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 54116697, "answer_count": 2, "score": -3, "last_activity_date": 1547060633, "creation_date": 1547059311, "question_id": 54116418, "link": "https://stackoverflow.com/questions/54116418/is-there-a-way-to-search-a-list-in-a-sqlite-database", "title": "Is there a way to search a list in a SQLite database?", "body": "<p>I am creating a health and nutrition application and I am using unity as my engine. I have a SQLite database which holds the recipes, the fields are ID (primary key), Name, Ingredients and Method. Each recipe is a record in the database and they have their own lists of ingredients. The intent is to allow the user to input ingredients and the program will filter the recipe by ingredients</p>\n\n<p>I expect that when the user inputs flour (as an example) it will show all the recipes that use flour. E.g.: Apple pie, cake and so on. Instead if i want to search the ingredients the input has to be identical to the entire lest</p>\n"}, {"tags": ["c#", "xml", "wpf", "xaml", "settings"], "comments": [{"owner": {"reputation": 8584, "user_id": 426185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed64e54f32c14d0f11e4e91009703322?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/426185/andy"}, "edited": false, "score": 0, "creation_date": 1547061869, "post_id": 54116290, "comment_id": 95066651, "body": "The scope of this question is quite broad. Even though you&#39;re asking for &quot;some advice&quot; I think you could well find people consider this out of scope or unsuitable for SO. Good luck."}, {"owner": {"reputation": 43527, "user_id": 98094, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VkdLW.jpg?s=128&g=1", "display_name": "Icemanind", "link": "https://stackoverflow.com/users/98094/icemanind"}, "edited": false, "score": 0, "creation_date": 1547063008, "post_id": 54116290, "comment_id": 95067157, "body": "You&#39;ll just want to create your user interface, bind it to a class, then save them in the app.config. Use <a href=\"https://docs.microsoft.com/en-us/visualstudio/ide/managing-application-settings-dotnet?view=vs-2017\" rel=\"nofollow noreferrer\">this documentation</a> for reference on how to do that."}, {"owner": {"reputation": 2093, "user_id": 99804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qRakj.jpg?s=128&g=1", "display_name": "bic", "link": "https://stackoverflow.com/users/99804/bic"}, "edited": false, "score": 0, "creation_date": 1547109752, "post_id": 54116290, "comment_id": 95080917, "body": "I would have to agree with everyone else here. This is not a suitable task for a beginner in WPF. There are too many other considerations besides WPF that you need to understand first. I would suggest running through a tutorial first. For example: <a href=\"https://wpf-tutorial.com/\" rel=\"nofollow noreferrer\">wpf-tutorial.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8584, "user_id": 426185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed64e54f32c14d0f11e4e91009703322?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/426185/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1547061794, "creation_date": 1547061794, "answer_id": 54116954, "question_id": 54116290, "link": "https://stackoverflow.com/questions/54116290/advice-about-building-a-wpf-form-to-modify-usersettings/54116954#54116954", "title": "Advice about building a WPF form to modify userSettings", "body": "<p>I don't think this is an assignment suitable for someone new to wpf let alone c#.\nEven experienced wpf developers are likely to find some tricky bits in this task.</p>\n\n<p>app.config will be in the same folder as your exe. If that is in program files then you will not be able to edit and save. Unless your users are win 7 or earlier.</p>\n\n<p>User settings will usually be stored in appdata for this reason. Since the user is expected to likely want to change them.\nThey go in a user.config file. The location of one off my system is:</p>\n\n<p>C:\\Users\\Andrew\\AppData\\Local\\MapEditor\\MapEditor.exe_Url_aszfdqs5110y44xmg0kfuuqbatf5la5a\\1.0.0.0\\user.config</p>\n\n<p>I am user Andrew on the machine and these are the user settings for MapEditor.exe.</p>\n\n<p>The file itself is xml.</p>\n\n<p>In there I see\n        </p>\n\n<p>And there's a bunch of stuff inside that.</p>\n\n<p>I would not try and edit xml directly.\nAnd this is your first bit you'll find isn't exactly easy.\nBecause you need to translate xml.\n\"All the user properties.\"\nYou presumably know what they are.\nBecause the user can't just add them.\nThey need to be defined in the app.</p>\n\n<p>I'd pick out the pieces you want them to change and copy data to a viewmodel. Or observable collection of viewmodels presented by a parent viewmodel.\nProbably simplest as an observablecollection.\nYou can then have a different viewmodel class per type of property.\nThey enter a string in a number then it'll fail to transfer back to the viewmodel and you can trap validation.errors that'll bubble.\nTo save, translate the viewmodels back into xml and save it.</p>\n"}], "owner": {"reputation": 11, "user_id": 10885337, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W4DmkU8B_ow/AAAAAAAAAAI/AAAAAAAAbdc/kHZhDVy_GKU/photo.jpg?sz=128", "display_name": "Guy Levitsky", "link": "https://stackoverflow.com/users/10885337/guy-levitsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547073719, "creation_date": 1547058760, "last_edit_date": 1547073719, "question_id": 54116290, "link": "https://stackoverflow.com/questions/54116290/advice-about-building-a-wpf-form-to-modify-usersettings", "title": "Advice about building a WPF form to modify userSettings", "body": "<p>I'm totally new to C#, and got an assignment building a WPF form to modify settings in an existing C# program using Visual Studio and WPF.   </p>\n\n<p><strong>I have numerous goals:</strong></p>\n\n<ol>\n<li>Get a list of all of the Settings names.</li>\n<li>Retrieve all of the user properties.</li>\n<li>Add a line for every setting to the form, and allow the user to restore the original settings, use the current ones, or modify them to a new value.</li>\n<li>Make sure that the user input is in the correct Type.</li>\n<li>Bind between the TextBox and the values in the line, not sure what is the best way to send the details. What object do you recommend to bind to the xaml? The list containing the property lines? Or to bind every line separately? </li>\n</ol>\n\n<p>I think that I need to access the App.config file for 3, so far unsuccessfully. I would have like to get an advice about the architecture, since I'm new to VS, C# and WPF.</p>\n"}, {"tags": ["c#", "sql", "linq", "entity-framework-core"], "comments": [{"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1547058861, "post_id": 54116279, "comment_id": 95065410, "body": "This sounds more like client evaluation (non SQL translatable construct) issue rather than OR operator. What is <code>FreeText</code> in your query?"}, {"owner": {"reputation": 25, "user_id": 5381249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/447b55feb6aaa393dd2847eb5656b2df?s=128&d=identicon&r=PG&f=1", "display_name": "bheem prakash", "link": "https://stackoverflow.com/users/5381249/bheem-prakash"}, "reply_to_user": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1547058901, "post_id": 54116279, "comment_id": 95065427, "body": "Any help would be really appreciated"}, {"owner": {"reputation": 25, "user_id": 5381249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/447b55feb6aaa393dd2847eb5656b2df?s=128&d=identicon&r=PG&f=1", "display_name": "bheem prakash", "link": "https://stackoverflow.com/users/5381249/bheem-prakash"}, "reply_to_user": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1547058939, "post_id": 54116279, "comment_id": 95065447, "body": "FreeText is a list which contains string which needs to be checked in the where condition as like"}, {"owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 0, "creation_date": 1547059029, "post_id": 54116279, "comment_id": 95065480, "body": "<code>table1.name.Any(res=&gt;FreeText.Contains(res))</code> is backwards. That <code>Any</code> is from <code>string</code>&#39;s <code>IEnumerable&lt;char&gt;</code>. You wanted <code>FreeText.Contains(table1.name)</code>"}, {"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1547059031, "post_id": 54116279, "comment_id": 95065481, "body": "But if <code>table1.name</code> is <code>string</code>, then <code>res</code> must be <code>char</code>, right? If <code>FreeText</code> is <code>string[]</code>, the code should not even compile."}, {"owner": {"reputation": 2155, "user_id": 1745913, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ocSXH.jpg?s=128&g=1", "display_name": "jtate", "link": "https://stackoverflow.com/users/1745913/jtate"}, "edited": false, "score": 0, "creation_date": 1547061304, "post_id": 54116279, "comment_id": 95066410, "body": "check this answer:  <a href=\"https://stackoverflow.com/a/7180331/1745913\">stackoverflow.com/a/7180331/1745913</a>"}], "answers": [{"comments": [{"owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 0, "creation_date": 1547060180, "post_id": 54116590, "comment_id": 95065935, "body": "How would a string contain a list of strings in it? This doesn&#39;t even compile"}, {"owner": {"reputation": 25, "user_id": 5381249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/447b55feb6aaa393dd2847eb5656b2df?s=128&d=identicon&r=PG&f=1", "display_name": "bheem prakash", "link": "https://stackoverflow.com/users/5381249/bheem-prakash"}, "edited": false, "score": 0, "creation_date": 1547060876, "post_id": 54116590, "comment_id": 95066260, "body": "FreeText is a list of string. Each element in the list should be compared to the name column using contains"}, {"owner": {"reputation": 162, "user_id": 4824387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lO9dG.jpg?s=128&g=1", "display_name": "Sria Pathre", "link": "https://stackoverflow.com/users/4824387/sria-pathre"}, "edited": false, "score": 0, "creation_date": 1547061145, "post_id": 54116590, "comment_id": 95066353, "body": "check the edited answer. I&#39;ve added StringComparison.InvariantCultureIgnoreCase to ignore case."}], "tags": [], "owner": {"reputation": 162, "user_id": 4824387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lO9dG.jpg?s=128&g=1", "display_name": "Sria Pathre", "link": "https://stackoverflow.com/users/4824387/sria-pathre"}, "is_accepted": false, "score": -1, "last_activity_date": 1547061016, "last_edit_date": 1547061016, "creation_date": 1547060146, "answer_id": 54116590, "question_id": 54116279, "link": "https://stackoverflow.com/questions/54116279/need-multiple-where-conditions-to-a-query-with-or-operator/54116590#54116590", "title": "Need multiple where conditions to a query with OR operator", "body": "<p>try this...</p>\n\n<pre><code>var res= from table1 in context.table1\n         join table2 in context.table2\n         on table1.id equals table2.id\n         where table1.name==\"res1\" || table1.description==\"desc\"\n         || FreeText.Any(p =&gt; table1.name.Contains(p, StringComparison.InvariantCultureIgnoreCase))\n         select table1\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5381249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/447b55feb6aaa393dd2847eb5656b2df?s=128&d=identicon&r=PG&f=1", "display_name": "bheem prakash", "link": "https://stackoverflow.com/users/5381249/bheem-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547061016, "creation_date": 1547058696, "last_edit_date": 1547058865, "question_id": 54116279, "link": "https://stackoverflow.com/questions/54116279/need-multiple-where-conditions-to-a-query-with-or-operator", "title": "Need multiple where conditions to a query with OR operator", "body": "<p>I have a requirement to add multiple where conditions with or operator out of which one where condition will have to check if the db column has any of the item in a list provided. Please consider the query below</p>\n\n<pre><code>var res= from table1 in context.table1\n         join table2 in context.table2\n         on table1.id equals table2.id\n         where table1.name==\"res1\" || table1.description==\"desc\"\n         || table1.name.any(res=&gt;FreeText.Contains(res))\n         select table1\n</code></pre>\n\n<p>this query is leading the compiler to run query multiple times and I am not getting required result. My end goal is to achieve the following sql query</p>\n\n<pre><code>select * from table1 join table2 on table1.id ==table2.id \n  where table1.name==\"res1\" || table1.description==\"desc\" || table1.name like \"%item1%\" ||table1.name like \"%item2% ......\"\n</code></pre>\n\n<p>the like statements should be dynamically added based on the items in the list.</p>\n"}, {"tags": ["c#", "excel", "oledbconnection"], "comments": [{"owner": {"reputation": 2071, "user_id": 7478530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGr5i.png?s=128&g=1", "display_name": "Dragonthoughts", "link": "https://stackoverflow.com/users/7478530/dragonthoughts"}, "edited": false, "score": 0, "creation_date": 1547058903, "post_id": 54116257, "comment_id": 95065428, "body": "Which line does this fail on?  Since you&#39;re taking parameters from text boxes, are you sure that you are getting the correct values?"}, {"owner": {"reputation": 862, "user_id": 4409834, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-G015Bz1NxeA/AAAAAAAAAAI/AAAAAAAAAEc/3QFP2KQPfyQ/photo.jpg?sz=128", "display_name": "Vishnu", "link": "https://stackoverflow.com/users/4409834/vishnu"}, "edited": false, "score": 0, "creation_date": 1547060387, "post_id": 54116257, "comment_id": 95066017, "body": "when is the above code getting executed, are you executing it after getting proper value in textbox ? if you are doing it in page load it will not work as in that case the value in textbox will be empty."}, {"owner": {"reputation": 1, "user_id": 10891478, "user_type": "registered", "profile_image": "https://graph.facebook.com/2117848171790570/picture?type=large", "display_name": "Rukmal Weliwatta", "link": "https://stackoverflow.com/users/10891478/rukmal-weliwatta"}, "edited": false, "score": 0, "creation_date": 1547060402, "post_id": 54116257, "comment_id": 95066024, "body": "this line dbDataAdapter.Fill(dt);  I think I get correct values."}, {"owner": {"reputation": 348226, "user_id": 267, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1b11262da6d1cd26b1b0bc99a2620cee?s=128&d=identicon&r=PG", "display_name": "Lasse V. Karlsen", "link": "https://stackoverflow.com/users/267/lasse-v-karlsen"}, "edited": false, "score": 0, "creation_date": 1547062090, "post_id": 54116257, "comment_id": 95066744, "body": "Do you need the <code>$</code> to be part of the name of whatever it is you&#39;re selecting from?"}, {"owner": {"reputation": 5847, "user_id": 3187033, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DfSEN.png?s=128&g=1", "display_name": "JohnyL", "link": "https://stackoverflow.com/users/3187033/johnyl"}, "edited": false, "score": 0, "creation_date": 1547062857, "post_id": 54116257, "comment_id": 95067090, "body": "Did you check the value of text box? Maybe, it&#39;s empty?"}], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 10028531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0CxX.jpg?s=128&g=1", "display_name": "Holly Plyler", "link": "https://stackoverflow.com/users/10028531/holly-plyler"}, "is_accepted": false, "score": 1, "last_activity_date": 1547061610, "last_edit_date": 1547061610, "creation_date": 1547061274, "answer_id": 54116821, "question_id": 54116257, "link": "https://stackoverflow.com/questions/54116257/uploading-a-excel-sheet-in-c-using-visual-studio/54116821#54116821", "title": "Uploading a Excel Sheet in C# using Visual Studio", "body": "<p>Could it possibly be the \"$\"\nin</p>\n\n<pre><code>(\"Select * From [\" + textBox1.Text + \"$]\", conn);\n</code></pre>\n\n<p>Try</p>\n\n<pre><code>(\"Select * From \"+ textBox1.Text , conn);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(\"Select * From [\"+ textBox1.Text +\"]\", conn);\n</code></pre>\n\n<p>which looks like a more correct sql statement to me.</p>\n\n<p>And if I might make a suggestion, try giving your text boxes names that mean more so that your code is more maintainable in the future.</p>\n"}], "owner": {"reputation": 1, "user_id": 10891478, "user_type": "registered", "profile_image": "https://graph.facebook.com/2117848171790570/picture?type=large", "display_name": "Rukmal Weliwatta", "link": "https://stackoverflow.com/users/10891478/rukmal-weliwatta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547064339, "creation_date": 1547058592, "last_edit_date": 1547064339, "question_id": 54116257, "link": "https://stackoverflow.com/questions/54116257/uploading-a-excel-sheet-in-c-using-visual-studio", "title": "Uploading a Excel Sheet in C# using Visual Studio", "body": "<p>My code is </p>\n\n<pre><code>string PathConn = \"Provider= Microsoft.Jet.OLEDB.4.0;Data Source=\" + textBox10.Text + \";Extended Properties=\\\"Excel 8.0;HDR=Yes;\\\";\";\n\nOleDbConnection conn = new OleDbConnection(PathConn);\n\nOleDbDataAdapter dbDataAdapter = new OleDbDataAdapter(\"Select * From [\" + textBox1.Text + \"$]\", conn);\n\nDataTable dt = new DataTable();\ndbDataAdapter.Fill(dt);\n\ndataGridView1.DataSource = dt;\n</code></pre>\n\n<p>I get the error:</p>\n\n<blockquote>\n  <p>System.Data.OleDb.OleDbException: ''$' is not a valid name. Make sure that it does not include invalid characters or punctuation and that it is not too long</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c#", "regex", "string", "substring"], "comments": [{"owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 1, "creation_date": 1547058121, "post_id": 54116134, "comment_id": 95065065, "body": "Would it be possible to look after the first occurence of &#39;{&#39; ?"}, {"owner": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 1, "creation_date": 1547058149, "post_id": 54116134, "comment_id": 95065081, "body": "<code>string s = log.Substring(log.LastIndexOf(fromWhereToCut) + fromWhereToCut.Length);</code>?"}, {"owner": {"reputation": 37, "user_id": 10617365, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--ZFWwWhVi4U/AAAAAAAAAAI/AAAAAAAAAC8/TyDEDJswPPI/photo.jpg?sz=128", "display_name": "nicktheone", "link": "https://stackoverflow.com/users/10617365/nicktheone"}, "reply_to_user": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1547058241, "post_id": 54116134, "comment_id": 95065126, "body": "@MikNiller as you can see in the Pastebin (especially in the last section) it&#39;s way more complicated than that."}, {"owner": {"reputation": 37, "user_id": 10617365, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--ZFWwWhVi4U/AAAAAAAAAAI/AAAAAAAAAC8/TyDEDJswPPI/photo.jpg?sz=128", "display_name": "nicktheone", "link": "https://stackoverflow.com/users/10617365/nicktheone"}, "reply_to_user": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1547058390, "post_id": 54116134, "comment_id": 95065194, "body": "@AhmedAbdelhameed that would leave me with a variable number of characters (the part between parentheses &quot;112&quot;) that changes at each iteration of the log file, meaning once I could get (112) and another (1)."}, {"owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1547058533, "post_id": 54116134, "comment_id": 95065255, "body": "I see, then another idea could be to look for [ or { , when one of them is found then continue searching the string for the matching character of same type and then extract the data between the two as json, continue with that until the end of the string. Proberly not very efficient, and a regex master would most likely have a better solution You need to keep track of additional { [ inside the block you are searching by keeping some kind of refcount"}, {"owner": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1547058612, "post_id": 54116134, "comment_id": 95065297, "body": "@nicktheone Then call <code>Substring</code> again on the result and look for the first occurrence of &quot;{&quot;."}, {"owner": {"reputation": 37, "user_id": 10617365, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--ZFWwWhVi4U/AAAAAAAAAAI/AAAAAAAAAC8/TyDEDJswPPI/photo.jpg?sz=128", "display_name": "nicktheone", "link": "https://stackoverflow.com/users/10617365/nicktheone"}, "reply_to_user": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1547058831, "post_id": 54116134, "comment_id": 95065391, "body": "@MikNiller feels like a drag but it&#39;s the same conclusion I reached unfortunately without using RegEx."}, {"owner": {"reputation": 37, "user_id": 10617365, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--ZFWwWhVi4U/AAAAAAAAAAI/AAAAAAAAAC8/TyDEDJswPPI/photo.jpg?sz=128", "display_name": "nicktheone", "link": "https://stackoverflow.com/users/10617365/nicktheone"}, "reply_to_user": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1547059057, "post_id": 54116134, "comment_id": 95065490, "body": "@AhmedAbdelhameed that&#39;s a good idea to strip the remaining header but unfortunately I don&#39;t know how to face the problem the result of <code>LastIndexOf</code> on the header name may not be last instance in the file, as seen in the example above where &quot;Deck.GetDeckLists&quot; is repeated inside the section itself."}, {"owner": {"reputation": 1261, "user_id": 2472345, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/8Y0sd.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/2472345/aaron"}, "edited": false, "score": 0, "creation_date": 1547062558, "post_id": 54116134, "comment_id": 95066945, "body": "When Newtonsoft JSON throws an exception that it cannot parse does it give the line number where it cannot parse? If so then maybe you can have a try catch that tries to parse, catches the exception, and removes the line where the exception occurred until it gets valid json and is able to parse?"}], "answers": [{"tags": [], "owner": {"reputation": 5847, "user_id": 3187033, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DfSEN.png?s=128&g=1", "display_name": "JohnyL", "link": "https://stackoverflow.com/users/3187033/johnyl"}, "is_accepted": false, "score": 0, "last_activity_date": 1547067269, "creation_date": 1547067269, "answer_id": 54118204, "question_id": 54116134, "link": "https://stackoverflow.com/questions/54116134/removing-header-from-a-formatted-string/54118204#54118204", "title": "Removing header from a formatted string", "body": "<p>I hope this is what you need. :) Actually, regex finds json in <em>all</em> sections, but I included getting only last section (<code>matches[matches.Count - 1]</code>). Since JToken doesn't have <code>TryParse</code> method, you have to use try/catch:</p>\n\n<pre><code>static void ParseLog()\n{\n    var s = File.ReadAllText(@\"C:\\log.json\");\n    var pattern =\n        @\"(?s)(?'header'\\[\\w+\\]\\d{1,2}/\\d{1,2}/\\d{4}\\s\\d{1,2}:\\d{1,2}:\\d{1,2}\\s(A|P)M\\r\\n\" +\n        @\"&lt;?==&gt;?.+?\\r\\n)\" +\n        @\"(?'body'.+?)(?=$|\\[\\w+\\]\\d{1,2}/\\d{1,2}/\\d{4}\\s\\d{1,2}:\\d{1,2}:\\d{1,2}\\s(A|P)M)\";\n    var matches = Regex.Matches(s, pattern);\n    if (matches.Count &gt; 0)\n    {\n        JToken last_json = null;\n        try\n        {\n            var text = matches[matches.Count - 1].Groups[\"body\"].Value;\n            last_json = JToken.Parse(text);\n            WriteLine(last_json.ToString());\n        }\n        catch (Exception ex) { WriteLine(ex.ToString()); }\n    }\n    else\n    {\n        WriteLine(\"No matches found\");\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1547118489, "last_edit_date": 1547118489, "creation_date": 1547070721, "answer_id": 54118910, "question_id": 54116134, "link": "https://stackoverflow.com/questions/54116134/removing-header-from-a-formatted-string/54118910#54118910", "title": "Removing header from a formatted string", "body": "<p>If the Log is the same as <a href=\"https://pastebin.com/kxUqqEmY\" rel=\"nofollow noreferrer\">the one found in PasteBin</a>, this deserializes fine.<br>\nI'm using a support class (<strong><code>JSON_Logs</code></strong>) to contain the extracted data.<br>\nThe <code>JSON</code> is read from a file in this simulation.  </p>\n\n<p>Reading the structure of the data, the most probable candidate to identify the start of the actual data, is the recurring string <code>\"Deck.GetDeckLists\"</code>. In the parsing method it's assigned to a variable called  <strong><code>excludedSection</code></strong>.<br>\nThe data starts right after the last one of those string. I'm using <strong><code>logFile.LastIndexOf(excludedSection)</code></strong> to find the index of the last of these entries, then use this index to identify the first data structure.  </p>\n\n<p><a href=\"https://www.newtonsoft.com/json/help/html/Overload_Newtonsoft_Json_JsonConvert_DeserializeObject.htm\" rel=\"nofollow noreferrer\">JsonConvert.DeserializeObject</a> is then used to deserialize the data into a List of class objects.<br>\nI didn't find any problem during the deserialization process.</p>\n\n<pre><code>string searchString = \"Deck.GetDeckLists\";\nList&lt;JSON_Logs.Header&gt; jsonLogs = ParseJsonLog(searchString, \"JSON_Logs.txt\");\n\nprivate List&lt;JSON_Logs.Header&gt; ParseJsonLog(string excludedSection, string fileName)\n{\n    string logFile = File.ReadAllText(fileName);\n\n    int refIndex = logFile.LastIndexOf(excludedSection);\n    logFile = logFile.Substring(logFile.IndexOf(\"[\", refIndex));\n\n    return JsonConvert.DeserializeObject&lt;List&lt;JSON_Logs.Header&gt;&gt;(logFile);\n}\n</code></pre>\n\n<p>Support class:  </p>\n\n<pre><code>public class JSON_Logs\n{\n    public class Header\n    {\n        public string id { get; set; }\n        public string name { get; set; }\n        public string description { get; set; }\n        public string format { get; set; }\n        public string resourceId { get; set; }\n        public int deckTileId { get; set; }\n        public MainDeck[] mainDeck { get; set; }\n        public object[] sideboard { get; set; }\n        public DateTime lastUpdated { get; set; }\n        public bool lockedForUse { get; set; }\n        public bool lockedForEdit { get; set; }\n        public bool isValid { get; set; }\n    }\n\n    public class MainDeck\n    {\n        public string id { get; set; }\n        public int quantity { get; set; }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10617365, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--ZFWwWhVi4U/AAAAAAAAAAI/AAAAAAAAAC8/TyDEDJswPPI/photo.jpg?sz=128", "display_name": "nicktheone", "link": "https://stackoverflow.com/users/10617365/nicktheone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 54118910, "answer_count": 2, "score": 1, "last_activity_date": 1547118489, "creation_date": 1547057960, "question_id": 54116134, "link": "https://stackoverflow.com/questions/54116134/removing-header-from-a-formatted-string", "title": "Removing header from a formatted string", "body": "<p>I have a formatted log file I'm trying to parse; the file is divided in sections with an header and the data inside each section is formatted with JSON like follows. <a href=\"https://pastebin.com/kxUqqEmY\" rel=\"nofollow noreferrer\">Link to an extract of the log file here</a> </p>\n\n<pre><code>[UnityCrossThreadLogger]1/8/2019 7:49:19 PM\n==&gt; Deck.GetDeckLists(112):\n{\n\n  \"jsonrpc\": \"2.0\",\n\n  \"method\": \"Deck.GetDeckLists\",\n\n  \"params\": {},\n\n  \"id\": \"112\"\n\n}\n</code></pre>\n\n<p>My issue here is manipulating the whole string in a way I get to the section I want and there strip the meaningless data and parse the remaining through <code>Newtonsoft JSON</code>. For now I'm cutting everything I don't need using this function, since the log file is in chronological order and only the latest occurrence of the entry is needed:</p>\n\n<pre><code>//Cut the whole log to the last entry\n    private static string CutLog(string fromWhereToCut)\n    {\n        string log = GetLog();\n        //In this case fromWhereToCut would be \"Deck.GetDeckLists\"\n        string s = log.Substring(log.LastIndexOf(fromWhereToCut));\n\n        return s;\n    }\n</code></pre>\n\n<p>The problem is the fact i<strong>t leaves the header in place I need to remove</strong> before deserializing the JSON and <strong>it's prone to breaking because the name of the sections aren't that unique</strong> and they could be repeated further down as non-header titles (as can be seen in my example). Furthermore I don't know how to stop at the end of the section I need before another one begins.</p>\n\n<p>I thought RegEx could be used but this seems way to big even for a RegEx and maybe there's a better solution.</p>\n"}, {"tags": ["c#", "xaml", "uwp", "windows-runtime", "xamlparseexception"], "comments": [{"owner": {"reputation": 777, "user_id": 7814396, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc195e12e1c237961ce40f297bda4d2b?s=128&d=identicon&r=PG", "display_name": "Luca Lindholm", "link": "https://stackoverflow.com/users/7814396/luca-lindholm"}, "edited": false, "score": 1, "creation_date": 1547080894, "post_id": 54116081, "comment_id": 95073222, "body": "Does the library have the same minimum and target Win 10 version as the main project?"}, {"owner": {"reputation": 25248, "user_id": 7254781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FsIFV.jpg?s=128&g=1", "display_name": "Nico Zhu - MSFT", "link": "https://stackoverflow.com/users/7254781/nico-zhu-msft"}, "edited": false, "score": 0, "creation_date": 1547105666, "post_id": 54116081, "comment_id": 95079047, "body": "Do you want show dialog in background task ?"}, {"owner": {"reputation": 25248, "user_id": 7254781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FsIFV.jpg?s=128&g=1", "display_name": "Nico Zhu - MSFT", "link": "https://stackoverflow.com/users/7254781/nico-zhu-msft"}, "edited": false, "score": 0, "creation_date": 1547105832, "post_id": 54116081, "comment_id": 95079122, "body": "The structure of your project looks complex, do you mind share a simple sample?"}, {"owner": {"reputation": 691, "user_id": 1496014, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/af3112083d8be2b4b530ed32bd7a29a0?s=128&d=identicon&r=PG", "display_name": "Noorul", "link": "https://stackoverflow.com/users/1496014/noorul"}, "edited": false, "score": 0, "creation_date": 1585921849, "post_id": 54116081, "comment_id": 107942242, "body": "Facing the same error, did you found any solution !?"}, {"owner": {"reputation": 691, "user_id": 1496014, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/af3112083d8be2b4b530ed32bd7a29a0?s=128&d=identicon&r=PG", "display_name": "Noorul", "link": "https://stackoverflow.com/users/1496014/noorul"}, "edited": false, "score": 0, "creation_date": 1585921908, "post_id": 54116081, "comment_id": 107942279, "body": "I am also trying to show content dialog from class library , which is a dll. I am getting this XamlParseException. Anyone help!"}], "answers": [{"tags": [], "owner": {"reputation": 1656, "user_id": 5199288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0Cru.jpg?s=128&g=1", "display_name": "MattWhilden", "link": "https://stackoverflow.com/users/5199288/mattwhilden"}, "is_accepted": false, "score": 1, "last_activity_date": 1576627233, "creation_date": 1576627233, "answer_id": 59383785, "question_id": 54116081, "link": "https://stackoverflow.com/questions/54116081/uwp-xaml-parsing-failed-with-class-library-dll/59383785#59383785", "title": "uwp xaml parsing failed with class library dll", "body": "<p>If you're seeing this on ARM64 targets, it's possible this can be resolved by adding this to your project:</p>\n\n<pre><code>&lt;ProperytGroup&gt;\n    &lt;!-- ARM64 builds for managed apps use .NET Native. We can't use the Reflection Provider for that. --&gt;\n    &lt;EnableTypeInfoReflection Condition=\"'$(Configuration)' == 'ARM64'\"&gt;false&lt;/EnableTypeInfoReflection&gt;\n&lt;/ProperytGroup&gt;\n</code></pre>\n\n<p>Essentially, the XAML/.NET layer works differently on ARM64 and there's an issue at that boundary. My understanding is that the Windows SDK folks are working to address this.</p>\n"}], "owner": {"reputation": 3687, "user_id": 6346554, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/y8FJF.jpg?s=128&g=1", "display_name": "touseefbsb", "link": "https://stackoverflow.com/users/6346554/touseefbsb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1576627233, "creation_date": 1547057669, "last_edit_date": 1547073244, "question_id": 54116081, "link": "https://stackoverflow.com/questions/54116081/uwp-xaml-parsing-failed-with-class-library-dll", "title": "uwp xaml parsing failed with class library dll", "body": "<p>I have a very simple uwp app in which I refer to a class library which is also a uwp project obviously and has a Custom ContentDialog. When I reference it directly as a project then it works just fine and the ContentDialog opens as well. But when I remove the project and use its produced dll ( Debug for debug mode and Release for Release mode ) and refer that dll then I get a xaml Parse exception in the constructor of that ContentDialog.</p>\n\n<p><strong>UWP client app code</strong></p>\n\n<pre><code>public sealed partial class MainPage : Page\n{\n    private async Task Test()\n    {\n        var exitNode = new ExitNodeCode.ExitNode();\n        await exitNode.AskForPermissionPopup();\n    }\n\n    public MainPage() =&gt; InitializeComponent();\n\n    protected async override void OnNavigatedTo(NavigationEventArgs e)\n    {\n        await Test();\n        base.OnNavigatedTo(e);  \n    }\n}\n</code></pre>\n\n<p>the exception is thrown on <strong>Test()</strong> method but the stacktrace ( confirmed with breakpoint ) leads to the InitializeComponent() method in constructor of that custom contentDialog.</p>\n\n<p><strong>Method in class library project</strong></p>\n\n<pre><code>public async Task AskForPermissionPopup()\n{\n    var dialog = new PermissionDialog();\n    await dialog.ShowAsync();                \n}\n</code></pre>\n\n<p><strong>xaml for Custom content Dialog</strong></p>\n\n<pre><code>&lt;ContentDialog\n    x:Class=\"ExitNodeCode.PermissionDialog\"\n    xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n    xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n    xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    mc:Ignorable=\"d\"\n    PrimaryButtonText=\"I Agree!\"\n    SecondaryButtonText=\"Maybe Later\"\n    PrimaryButtonClick=\"PermissionDialog_PrimaryButtonClick\"\n    SecondaryButtonClick=\"PermissionDialog_SecondaryButtonClick\"&gt;\n    &lt;Grid &gt;           \n    &lt;/Grid&gt;\n&lt;/ContentDialog&gt;\n</code></pre>\n\n<p><strong>cs code for the dialog</strong></p>\n\n<pre><code>public sealed partial class PermissionDialog : ContentDialog\n{\n    public PermissionDialog()\n    {\n        InitializeComponent();\n    }\n}\n</code></pre>\n\n<p>the class library project is referenced by a \"windows runtime component\" project which is a background task and client app references this background task, but I think that is irrelevant here because this is a xaml parse exception and the background task is not even registered when exception occurs</p>\n"}, {"tags": ["c#", ".net", "msbuild"], "comments": [{"owner": {"reputation": 525, "user_id": 623116, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7475bc783bd08dfeca408e5814b5cc78?s=128&d=identicon&r=PG", "display_name": "JosephRT", "link": "https://stackoverflow.com/users/623116/josephrt"}, "edited": false, "score": 0, "creation_date": 1547058157, "post_id": 54116069, "comment_id": 95065084, "body": "Would breaking it up into two builds be an option?  I&#39;ve worked in code bases where generated code is built with one build process, and the resulting package is imported via Nuget into the solution that depends on it.  Granted it requires some set up, either a CICD pipeline, dumping the generated packages into a local Nuget repo, or something similar, but it does solve the chicken-egg problem."}], "owner": {"reputation": 27154, "user_id": 39923, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/UF9rB.png?s=128&g=1", "display_name": "Max Toro", "link": "https://stackoverflow.com/users/39923/max-toro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547057596, "creation_date": 1547057596, "question_id": 54116069, "link": "https://stackoverflow.com/questions/54116069/how-to-execute-code-in-msbuild-after-references-are-copied", "title": "How to execute code in MSBuild after references are copied", "body": "<p>I need to perform code generation before a project builds, so the generated code is included in the build. For that I am using PreBuildEvent. The problem is when I need to use an assembly that is referenced by the project, and in PreBuildEvent it is not copied yet. Is there another event I can use? BTW, I'm using C# (csproj).</p>\n"}, {"tags": ["c#", "wpf", "visual-studio-2008", ".net-3.5", "statusbar"], "answers": [{"tags": [], "owner": {"reputation": 917, "user_id": 10290408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e1feed163c02636f1eea4c5d67bbc7?s=128&d=identicon&r=PG&f=1", "display_name": "Selthien", "link": "https://stackoverflow.com/users/10290408/selthien"}, "is_accepted": true, "score": 2, "last_activity_date": 1547058205, "creation_date": 1547058205, "answer_id": 54116176, "question_id": 54116006, "link": "https://stackoverflow.com/questions/54116006/avoid-wpf-statusbar-to-increase-its-height-on-window-vertical-resize/54116176#54116176", "title": "Avoid WPF Statusbar to increase its height on window vertical resize", "body": "<p>Try setting your VerticalAlignment= Bottom on your status bar. Here is what your new code would be.</p>\n\n<pre><code>&lt;DockPanel&gt;\n    &lt;Grid DockPanel.Dock=\"Top\"&gt;\n        &lt;!-- Grid stuff here --&gt;\n        &lt;ListView&gt;&lt;/ListView&gt;\n    &lt;/Grid&gt;\n\n    &lt;StatusBar DockPanel.Dock=\"Bottom\"                   \n               VerticalAlignment=\"Bottom\"&gt;\n\n        &lt;StatusBar.ItemsPanel&gt;\n            &lt;ItemsPanelTemplate&gt;\n                &lt;Grid&gt;\n                    &lt;Grid.RowDefinitions&gt;\n                        &lt;RowDefinition Height=\"*\" /&gt;\n                    &lt;/Grid.RowDefinitions&gt;\n\n                    &lt;Grid.ColumnDefinitions&gt;\n                        &lt;ColumnDefinition Width=\"100\" /&gt;\n                        &lt;ColumnDefinition Width=\"Auto\" /&gt;\n                        &lt;ColumnDefinition Width=\"*\" /&gt;\n                        &lt;ColumnDefinition Width=\"Auto\" /&gt;\n                        &lt;ColumnDefinition Width=\"100\" /&gt;\n                    &lt;/Grid.ColumnDefinitions&gt;\n                &lt;/Grid&gt;\n            &lt;/ItemsPanelTemplate&gt;\n        &lt;/StatusBar.ItemsPanel&gt;\n        &lt;StatusBarItem Grid.Column=\"0\"&gt;\n            &lt;TextBlock Text=\"Item1\"/&gt;\n        &lt;/StatusBarItem&gt;\n        &lt;Separator Grid.Column=\"1\" /&gt;\n        &lt;StatusBarItem Grid.Column=\"2\"&gt;\n            &lt;TextBlock /&gt;\n        &lt;/StatusBarItem&gt;\n        &lt;Separator Grid.Column=\"3\" /&gt;\n        &lt;StatusBarItem Grid.Column=\"4\"&gt;\n            &lt;TextBlock Text=\"AnotherItem\" /&gt;\n        &lt;/StatusBarItem&gt;\n    &lt;/StatusBar&gt;\n&lt;/DockPanel&gt;\n</code></pre>\n"}], "owner": {"reputation": 7656, "user_id": 1624552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c865f94187e48bb3500f4b478b468443?s=128&d=identicon&r=PG", "display_name": "Ralph", "link": "https://stackoverflow.com/users/1624552/ralph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 54116176, "answer_count": 1, "score": 0, "last_activity_date": 1547058205, "creation_date": 1547057261, "question_id": 54116006, "link": "https://stackoverflow.com/questions/54116006/avoid-wpf-statusbar-to-increase-its-height-on-window-vertical-resize", "title": "Avoid WPF Statusbar to increase its height on window vertical resize", "body": "<p>I have a WPF StatusBar and I place it at the bottom by doing the following:</p>\n\n<pre><code>&lt;Window&gt;\n\n  &lt;DockPanel&gt;\n     &lt;Grid DockPanel.Dock=\"Top\"&gt;\n         &lt;!-- Grid stuff here --&gt;\n     &lt;/Grid&gt;\n\n     &lt;StatusBar DockPanel.Dock=\"Bottom\"                   \n                VerticalAlignment=\"Stretch\"&gt;\n\n            &lt;StatusBar.ItemsPanel&gt;\n                &lt;ItemsPanelTemplate&gt;\n                    &lt;Grid&gt;\n                        &lt;Grid.RowDefinitions&gt;\n                            &lt;RowDefinition Height=\"*\" /&gt;\n                        &lt;/Grid.RowDefinitions&gt;\n\n                        &lt;Grid.ColumnDefinitions&gt;\n                            &lt;ColumnDefinition Width=\"100\" /&gt;\n                            &lt;ColumnDefinition Width=\"Auto\" /&gt;\n                            &lt;ColumnDefinition Width=\"*\" /&gt;\n                            &lt;ColumnDefinition Width=\"Auto\" /&gt;\n                            &lt;ColumnDefinition Width=\"100\" /&gt;\n                        &lt;/Grid.ColumnDefinitions&gt;\n                    &lt;/Grid&gt;\n                &lt;/ItemsPanelTemplate&gt;\n            &lt;/StatusBar.ItemsPanel&gt;\n            &lt;StatusBarItem Grid.Column=\"0\"&gt;\n                &lt;TextBlock Text=\"Item1\"/&gt;\n            &lt;/StatusBarItem&gt;\n            &lt;Separator Grid.Column=\"1\" /&gt;\n            &lt;StatusBarItem Grid.Column=\"2\"&gt;\n                &lt;TextBlock /&gt;\n            &lt;/StatusBarItem&gt;\n            &lt;Separator Grid.Column=\"3\" /&gt;\n            &lt;StatusBarItem Grid.Column=\"4\"&gt;\n                &lt;TextBlock Text=\"AnotherItem\" /&gt;\n            &lt;/StatusBarItem&gt;\n  &lt;/DockPanel&gt;\n\n&lt;/Window&gt;\n</code></pre>\n\n<p>The problem is when user resizes the window vertically, the Statusbar increases its height and I want to avoid this. I want Statusbar to always keep its height (the same). How can I do this?</p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1547057331, "post_id": 54115994, "comment_id": 95064719, "body": "can you make it generic?"}, {"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1547057334, "post_id": 54115994, "comment_id": 95064720, "body": "How you are going to use this function?"}, {"owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1547057460, "post_id": 54115994, "comment_id": 95064777, "body": "You want to return either an ErrorRecord or a PSObject, so why not just let the method return an object? Or create a new type that contains both types and return that. Or return a PSObject, and add an ErrorRecord out paramater"}, {"owner": {"reputation": 43527, "user_id": 98094, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VkdLW.jpg?s=128&g=1", "display_name": "Icemanind", "link": "https://stackoverflow.com/users/98094/icemanind"}, "edited": false, "score": 3, "creation_date": 1547057529, "post_id": 54115994, "comment_id": 95064805, "body": "In both your <code>foreach</code> loops, you are reassigning <code>endResult</code> with each iteration, which means only the last value will be assigned to <code>endResult</code>."}, {"owner": {"reputation": 99, "user_id": 9894339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lior", "link": "https://stackoverflow.com/users/9894339/lior"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1547057562, "post_id": 54115994, "comment_id": 95064823, "body": "@pm100  I thought about Generic, but I don\u2019t know how to do that.  And Fabio this method is in a class and initiating this method is in another class"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1547057957, "post_id": 54115994, "comment_id": 95064986, "body": "reading the code it seems you want to return either an error or a psobject, in that case I would throw the error and declare the function as returning a PSObject"}, {"owner": {"reputation": 20646, "user_id": 22437, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/H4s3Z.jpg?s=128&g=1", "display_name": "Dour High Arch", "link": "https://stackoverflow.com/users/22437/dour-high-arch"}, "edited": false, "score": 3, "creation_date": 1547058024, "post_id": 54115994, "comment_id": 95065010, "body": "This sounds line an <a href=\"https://meta.stackexchange.com/questions/66377/\">XY Problem</a>; why do you need \u201cto have different return value types\u201d? How does the calling routine know which type is being returned?"}, {"owner": {"reputation": 30188, "user_id": 3218692, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/4pA4T.jpg?s=128&g=1", "display_name": "Yeldar Kurmangaliyev", "link": "https://stackoverflow.com/users/3218692/yeldar-kurmangaliyev"}, "edited": false, "score": 0, "creation_date": 1547058911, "post_id": 54115994, "comment_id": 95065434, "body": "Every time you come to an idea of using <code>dynamic</code>, rethink it, because most probably you are doing something wrong."}, {"owner": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 0, "creation_date": 1547059197, "post_id": 54115994, "comment_id": 95065543, "body": "<code>I don\u2019t know how to do that</code> What a great day for you!!! A chance to learn something new."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9894339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lior", "link": "https://stackoverflow.com/users/9894339/lior"}, "edited": false, "score": 0, "creation_date": 1547071320, "post_id": 54116250, "comment_id": 95070630, "body": "Thank you, managed to work with out keyword. Works! thank you"}], "tags": [], "owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "is_accepted": true, "score": 3, "last_activity_date": 1547058853, "last_edit_date": 1547058853, "creation_date": 1547058548, "answer_id": 54116250, "question_id": 54115994, "link": "https://stackoverflow.com/questions/54115994/how-to-have-different-return-value-to-a-function-in-c/54116250#54116250", "title": "How to have different return value to a function in C#", "body": "<p>One option when you want to return multiple types is to wrap them in a class that has properties of the types you want to return.</p>\n\n<p>For example:</p>\n\n<pre><code>class PowerShellResult\n{\n    public List&lt;ErrorRecord&gt; ErrorRecords { get; set; }\n    public List&lt;PSObject&gt; Results { get; set; }\n}\n</code></pre>\n\n<p>Then you can just return an object of this new type:</p>\n\n<pre><code>public static PowerShellResult PowerShellLocal(string scriptBlock)\n{\n    var result = new PowerShellResult();\n\n    using (PowerShell powerShell = PowerShell.Create())\n    {\n        powerShell.AddScript(scriptBlock);\n        result.Results = powerShell.Invoke().ToList();\n        result.ErrorRecords = powerShell.Streams.Error.ToList();\n    }\n\n    return result;\n}\n</code></pre>\n\n<hr>\n\n<p>Another common option is to return one of the types directly from the method, and have an <code>out</code> parameter for the other type.</p>\n\n<p>For example:</p>\n\n<pre><code>public static IEnumerable&lt;PSObject&gt; PowerShellLocal(string scriptBlock, \n    out IEnumerable&lt;ErrorRecord&gt; errors)\n{\n    using (PowerShell powerShell = PowerShell.Create())\n    {\n        powerShell.AddScript(scriptBlock);\n        var results = powerShell.Invoke();\n        errors = powerShell.Streams.Error.ToList();\n        return results.ToList();\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8200, "user_id": 3120446, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/heCaC.jpg?s=128&g=1", "display_name": "dx_over_dt", "link": "https://stackoverflow.com/users/3120446/dx-over-dt"}, "is_accepted": false, "score": 0, "last_activity_date": 1547061131, "last_edit_date": 1547061131, "creation_date": 1547060731, "answer_id": 54116720, "question_id": 54115994, "link": "https://stackoverflow.com/questions/54115994/how-to-have-different-return-value-to-a-function-in-c/54116720#54116720", "title": "How to have different return value to a function in C#", "body": "<h3>A good approach</h3>\n\n<p>Use a <code>try</code>/<code>catch</code> approach, where the function returns your <code>Collection&lt;PSObject&gt;</code>, and if the script has an error, collect the <code>ErrorRecords</code>, and throw either an <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.aggregateexception.-ctor?view=netframework-4.7.2#System_AggregateException__ctor_System_Exception___\" rel=\"nofollow noreferrer\"><code>AggregateException</code></a>, if you can easily convert <code>ErrorRecord</code>s to <code>Exception</code>s, or write your own custom <code>Exception</code> class.  (The latter is almost certainly better unless <code>ErrorRecord</code> is a subclass if <code>Exception</code>, which, by C# naming convention, it is not.)</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class PSScriptException : Exception\n{\n    public PSScriptException(Collection&lt;ErrorRecord&gt; errorRecords)\n    {\n        this.ErrorRecords = errorRecords;\n    }\n\n    public PSScriptException(Collection&lt;ErrorRecord&gt; errorRecords, string message): this(errorRecords)\n    {\n        this.Message = message;\n    }\n\n    Collection&lt;ErrorRecord&gt; ErrorRecords { public get; private set; }\n}\n\n// ...\n\n// within some class\npublic static Collection&lt;PSObject&gt; PowerShellLocal(string scriptBlock)\n{\n    using (PowerShell powerShell = PowerShell.Create())\n    {\n        powerShell.AddScript(scriptBlock);\n        var results = powerShell.Invoke();\n        if (powerShell.Streams.Error.Count &gt; 0)\n        {\n            throw new PSScriptException(powerShell.Streams.Error.ToList());\n        }\n\n        return results.ToList();\n    }\n}\n\n// ...\n\nvoid DoScript(string scriptBlock)\n{\n    try\n    {\n        Collection&lt;PSObject&gt; results = PowerShellLocal(scriptBlock);\n        doTheThing(results);\n    }\n    catch (PSScriptException scriptEx)\n    {\n        handleTheErrors(scriptEx);\n    }\n}\n</code></pre>\n\n<hr>\n\n<h3>A hacky approach</h3>\n\n<p>Preface: I <strong><em>do not</em></strong> recommend this method, but it does answer the question asked in the simplest way.</p>\n\n<p>You can return <code>Collection&lt;object&gt;</code> and then wherever you use the result, check its type.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>Collection&lt;object&gt; myResult = PowerShellLocal(myScript);\nif (myResult is Collection&lt;PSObject&gt; myPSObjects) {\n    doTheThing(myPSObjects);\n}\nelse\n{\n   Collection&lt;ErrorRecord&gt; myErrors = myResult as Collection&lt;ErrorRecord&gt;;\n   handleTheError(myErrors);\n}\n</code></pre>\n\n<p>The reason I don't recommend this is that C# is intentionally a strongly-typed language.  If you do not want to use the <code>try</code>/<code>catch</code> method, a better approach than this answer was mentioned in @Rafus's answer, using an <code>out</code> parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 1533, "user_id": 6135511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lbs4X.jpg?s=128&g=1", "display_name": "Danilo Calzetta", "link": "https://stackoverflow.com/users/6135511/danilo-calzetta"}, "is_accepted": false, "score": 0, "last_activity_date": 1547070047, "creation_date": 1547070047, "answer_id": 54118776, "question_id": 54115994, "link": "https://stackoverflow.com/questions/54115994/how-to-have-different-return-value-to-a-function-in-c/54118776#54118776", "title": "How to have different return value to a function in C#", "body": "<p>using \"object\" cuold be a good solution?</p>\n\n<pre><code>    public static object PowerShellLocal(string scriptBlock)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 9894339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lior", "link": "https://stackoverflow.com/users/9894339/lior"}, "edited": false, "score": 0, "creation_date": 1547382424, "post_id": 54139836, "comment_id": 95166604, "body": "You are right, didn&#39;t mention why I need this. First of all thank you for the example. Basically I have a windows forms application that on a button click returns output to a Textbox. This operation will help me maybe to log?"}], "tags": [], "owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "is_accepted": false, "score": 0, "last_activity_date": 1547285498, "last_edit_date": 1547285498, "creation_date": 1547175803, "answer_id": 54139836, "question_id": 54115994, "link": "https://stackoverflow.com/questions/54115994/how-to-have-different-return-value-to-a-function-in-c/54139836#54139836", "title": "How to have different return value to a function in C#", "body": "<p>You are asking for a function API contract without providing context about how this function will be used.<br>\nWhat consumers of the function will do with the result?  </p>\n\n<p>For question \"How I can return two different types from one function\" you already got good answers. But actual question is how much \"troubles\" those approaches will produce for the consumers of the function.<br>\nAs a consumer of the function\n - I need provide a variable for every call\n - If I care about errors, every time I call a method, I need check for errors existence\n - If I don't care about possible errors, creation of <code>out</code> error variable is useless</p>\n\n<p>Based on the logic function will return only one result, which can be of \"Successful\" type or of \"Error\" type.  </p>\n\n<p>That is why question \"How you are going to use this method?\" is very important (which you didn't answer properly). </p>\n\n<p>Just for fun I will speculate, for example you want to save result, to database when result is successful and to \"errors\" when function failed.</p>\n\n<p>Then I would create an interface to abstract behaviour on the result.</p>\n\n<pre><code>public interface ISavePowerShellResult\n{\n    void Save();\n}\n</code></pre>\n\n<p>Then will create implementations of this interface one for Sql database(Successful records) and one for XML file(Errors).  </p>\n\n<pre><code>public class SaveSuccessfulObjects : ISavePowerShellResult\n{\n    private IEnumerable&lt;PSObject&gt; _objects;\n\n    public SaveSuccessfulObjects(IEnumerable&lt;PSObject&gt; objects) =&gt; _objects = objects;\n\n    public void Save()\n    {\n        foreach (var psobject in _objects)\n        {\n            // save to sql database\n        }\n    }\n}\n\npublic class SaveErrors : ISavePowerShellResult\n{\n    private IEnumerable&lt;ErrorRecord&gt; _errors;\n\n    public SaveErrors(IEnumerable&lt;ErrorRecord&gt; errors) =&gt; _errors = errors;\n\n    public void Save()\n    {\n        foreach (var record in _errors)\n        {\n            // save error to xml file\n        }\n    }\n}\n</code></pre>\n\n<p>Make returned type to be an interface and function to return implementation of this interface.</p>\n\n<pre><code>public static ISavePowerShellResult PowerShellLocal(string scriptBlock)\n{\n    using (PowerShell powerShell = PowerShell.Create())\n    {\n        powerShell.AddScript(scriptBlock);\n        var results = powerShell.Invoke();\n\n        if (powerShell.Streams.Error.Count &gt; 0)\n        {\n            return new SaveErrors(powerShell.Streams.Error);\n        }\n\n        return new SaveSuccessfulObjects(results);\n   }\n}\n</code></pre>\n\n<p>Then usage of the function will be very simple for the consumer. </p>\n\n<pre><code>var script = \"Invoke-Something ...\";\n\nvar result = PowerShellLocal(script);\nresult.Save();\n</code></pre>\n\n<p>With this approach, adding more functionalities for the function can be much easier, because only you need to do is create new implementation of the interface, without touching the code where function is consumed.</p>\n"}], "owner": {"reputation": 99, "user_id": 9894339, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lior", "link": "https://stackoverflow.com/users/9894339/lior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 54116250, "answer_count": 4, "score": -1, "last_activity_date": 1547373127, "creation_date": 1547057218, "last_edit_date": 1547373127, "question_id": 54115994, "link": "https://stackoverflow.com/questions/54115994/how-to-have-different-return-value-to-a-function-in-c", "title": "How to have different return value to a function in C#", "body": "<p>I have creating a function to run PowerShell scripts and I need a way to have different return value types to it. In my situation is or <code>Collection&lt;PSObject&gt;</code> or <code>Collection&lt;ErrorRecord&gt;</code>.</p>\n\n<p>I tried to use Tuple, tried Dynamic... is There a better way to do that?</p>\n\n<p>This is my code of using the latest approach: Dynamic.   </p>\n\n<pre><code>public static dynamic PowerShellLocal(string scriptBlock)\n        {\n            using (PowerShell powerShell = PowerShell.Create())\n            {\n                object endResult = null;\n                powerShell.AddScript(scriptBlock);\n                var results = powerShell.Invoke();\n                if (powerShell.Streams.Error.Count &gt; 0)\n                {\n                    endResult = error;  \n                }\n                else\n                {\n                    endResult = result;  \n                }\n                return endResult;\n            }\n        }\n</code></pre>\n\n<p>This approach gave me an exception gave me an exception that I cannot enumerate, because then in my code I use for each to iterate through the result. \nIs there a better way doing that?</p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 478, "user_id": 567647, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56c6586948f501cc2752cce1fb8efe6e?s=128&d=identicon&r=PG", "display_name": "frostshoxx", "link": "https://stackoverflow.com/users/567647/frostshoxx"}, "edited": false, "score": 0, "creation_date": 1547057478, "post_id": 54115969, "comment_id": 95068045, "body": "I would recommend to place breakpoints on all three <code>if</code> statements and run a debugger to confirm that the <code>NodeType</code> and the <code>LocalName</code> checks match with what you expect when compare against the actual data on the XML doc."}, {"owner": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1547057643, "post_id": 54115969, "comment_id": 95064855, "body": "I might be mistaken but perhaps <code>ReadInnerXml()</code> reads the entire XML causing the next call of <code>Read()</code> to return false?"}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1547058202, "post_id": 54115969, "comment_id": 95065106, "body": "Please refrain from updating the question with &quot;Fixed&quot; messaging.  Let the answers speak to that."}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1547060619, "post_id": 54115969, "comment_id": 95066122, "body": "@StackUser77288 That is how it is done on SO.  It&#39;s not an attempt at a joke."}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1547060758, "post_id": 54115969, "comment_id": 95066196, "body": "@StackUser77288 See <a href=\"https://meta.stackexchange.com/questions/86278/detect-edits-to-add-solved-or-resolved-to-the-title-and-direct-the-user-to-a\" title=\"detect edits to add solved or resolved to the title and direct the user to a\">meta.stackexchange.com/questions/86278/&hellip;</a>.  And related: <a href=\"https://meta.stackexchange.com/questions/116101/is-it-ok-to-add-solved-to-the-title-of-a-question\" title=\"is it ok to add solved to the title of a question\">meta.stackexchange.com/questions/116101/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1547058073, "post_id": 54116102, "comment_id": 95065035, "body": "No.  <code>Console.WriteLine</code> only writes to the console.  You are calling <code>ReadInnerXml()</code>.  <code>Console.WriteLine</code> does not &quot;create the exit&quot;."}, {"owner": {"reputation": 19, "user_id": 10529951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2101aae19e2cc5f7f5432930f5c98a0d?s=128&d=identicon&r=PG&f=1", "display_name": "StackUser77288", "link": "https://stackoverflow.com/users/10529951/stackuser77288"}, "reply_to_user": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1547060574, "post_id": 54116102, "comment_id": 95066101, "body": "ReadInnerXml() still works. Upon removing Console.writeline my problem is solved, so in this instance it seems that was causing an exit, as according to my traps the exit occurred right after that line was executed."}], "tags": [], "owner": {"reputation": 19, "user_id": 10529951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2101aae19e2cc5f7f5432930f5c98a0d?s=128&d=identicon&r=PG&f=1", "display_name": "StackUser77288", "link": "https://stackoverflow.com/users/10529951/stackuser77288"}, "is_accepted": false, "score": -2, "last_activity_date": 1547057803, "creation_date": 1547057803, "answer_id": 54116102, "question_id": 54115969, "link": "https://stackoverflow.com/questions/54115969/reading-xml-but-not-exiting-on-an-if-statement/54116102#54116102", "title": "Reading XML, but not exiting on an IF statement", "body": "<p>Apparently Console.WriteLine creates the exit. I'm a bit thrown off, but removing the console.writeline has fixed the issue here.</p>\n"}], "owner": {"reputation": 19, "user_id": 10529951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2101aae19e2cc5f7f5432930f5c98a0d?s=128&d=identicon&r=PG&f=1", "display_name": "StackUser77288", "link": "https://stackoverflow.com/users/10529951/stackuser77288"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1547058179, "creation_date": 1547057110, "last_edit_date": 1547058179, "question_id": 54115969, "link": "https://stackoverflow.com/questions/54115969/reading-xml-but-not-exiting-on-an-if-statement", "title": "Reading XML, but not exiting on an IF statement", "body": "<p>I'm reading an XML doc, and building a string with the selected data. My IF statement is exiting on the first occurrence in a while. Which shouldn't happen?</p>\n\n<p>Code:`</p>\n\n<pre><code>            XmlReader rdr = XmlReader.Create(new StringReader(responseXML.InnerXml.ToString()));\n            string t = \"\";\n            string v = \"\";\n            while (rdr.Read())\n            {\n                if (rdr.NodeType == XmlNodeType.Element)\n                {\n                    if (rdr.LocalName == \"tKey\")\n                    {\n                        Console.WriteLine(rdr.ReadInnerXml().ToString());\n                        t = rdr.ReadInnerXml().ToString();\n                    }\n                    if (rdr.LocalName == \"vKey\")\n                    {\n                        Console.WriteLine(rdr.ReadInnerXml().ToString());\n                        v = rdr.ReadInnerXml().ToString();\n                    }\n                }\n            }\n</code></pre>\n\n<p>v isn't getting set, but t is always set, hence the statement exits the code. Perhaps my understanding of IF statements isn't right, if so how should I go about setting both strings? (The console write isn't reached, nor is any traps after the first IF.</p>\n"}, {"tags": ["c#", "dependency-injection"], "comments": [{"owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1547057189, "post_id": 54115933, "comment_id": 95064657, "body": "Yes why shouldn&#39;t it?"}, {"owner": {"reputation": 161, "user_id": 7880573, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1321298124591776/picture?type=large", "display_name": "Oscar Cabrera Rodr&#237;guez", "link": "https://stackoverflow.com/users/7880573/oscar-cabrera-rodr%c3%adguez"}, "reply_to_user": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1547057512, "post_id": 54115933, "comment_id": 95064798, "body": "I just thought that DI would only work, let&#39;s say, for class A, which is the one that implements the interface"}, {"owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1547057606, "post_id": 54115933, "comment_id": 95064839, "body": "B implements the interface as well because it is derived from A (at least in the languages i know, assuming the above is c#) When the DI framework resolves it, you get an instance that implements I, so any additional methods and properties on B are &#39;hidden&#39;"}, {"owner": {"reputation": 161, "user_id": 7880573, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1321298124591776/picture?type=large", "display_name": "Oscar Cabrera Rodr&#237;guez", "link": "https://stackoverflow.com/users/7880573/oscar-cabrera-rodr%c3%adguez"}, "reply_to_user": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1547058290, "post_id": 54115933, "comment_id": 95065150, "body": "Yes, that&#39;s what I supposed to happen, but I&#39;m having trouble setting up DI in a config like that, and I thought that not directly implementing the interface would be the cause"}, {"owner": {"reputation": 150628, "user_id": 264697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/53813b7dc989271bf45d1a047db31a1f?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/264697/steven"}, "edited": false, "score": 0, "creation_date": 1547109975, "post_id": 54115933, "comment_id": 95081026, "body": "I think you should make your question more concrete. It is currently really abstract and I would even say <i>unclear what you&#39;re asking</i>. What does it mean to &quot;to setup DI for a class B&quot;? Can you give a realistic example with classes and dependencies? Where does Dependency Injection come into play here? Neither class <code>A</code> nor class <code>B</code> have any dependencies being <i>injected</i>? How are class <code>A</code> and <code>B</code> expected to be used/injected?"}], "answers": [{"tags": [], "owner": {"reputation": 7267, "user_id": 1051621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JAEvg.jpg?s=128&g=1", "display_name": "Mark Shevchenko", "link": "https://stackoverflow.com/users/1051621/mark-shevchenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1547110399, "creation_date": 1547110399, "answer_id": 54124912, "question_id": 54115933, "link": "https://stackoverflow.com/questions/54115933/dependency-injection-on-base-class/54124912#54124912", "title": "Dependency injection on base class", "body": "<p>Usually DI containers (such as Castle, Unity, Autofac etc.) let you differ the type registration and the interface linking.</p>\n\n<p>F.e. in Autofac you can register single type and declare a few base classes and interfaces:</p>\n\n<pre><code>builder.RegisterType&lt;B&gt;()\n       .AsSelf()\n       .As&lt;A&gt;()\n       .As&lt;I&gt;();\n</code></pre>\n\n<p>Now the instance of <code>B</code> class will be resolved when you need <code>B</code> class, <code>A</code> class, or <code>I</code> interface.</p>\n"}, {"tags": [], "owner": {"reputation": 656, "user_id": 2053617, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/RYDJI.jpg?s=128&g=1", "display_name": "Majid Shahabfar", "link": "https://stackoverflow.com/users/2053617/majid-shahabfar"}, "is_accepted": false, "score": 0, "last_activity_date": 1613629176, "creation_date": 1613629176, "answer_id": 66254636, "question_id": 54115933, "link": "https://stackoverflow.com/questions/54115933/dependency-injection-on-base-class/66254636#66254636", "title": "Dependency injection on base class", "body": "<p>If you are using ASP.NET Core you can simply use a generic Base Controller class:</p>\n<pre><code>public abstract class BaseController&lt;T&gt; : Controller\n{\n    private IFoo _fooInstance;\n    private IBar _barInstance;\n\n    protected IFoo _foo =&gt; _fooInstance ??= HttpContext.RequestServices.GetService&lt;IFoo&gt;();\n    protected IBar _bar =&gt; _barInstance ??= HttpContext.RequestServices.GetService&lt;IBar&gt;();\n}\n</code></pre>\n<p>and if you are using Razor pages:</p>\n<pre><code>class BasePageModel&lt;T&gt; : PageModel where T : class\n{\n    private IFoo _fooInstance;\n    private IBar _barInstance;\n\n    protected IFoo _foo =&gt; _fooInstance ??= HttpContext.RequestServices.GetService&lt;IFoo&gt;();\n    protected IBar _bar =&gt; _barInstance ??= HttpContext.RequestServices.GetService&lt;IBar&gt;();\n}\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 7880573, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1321298124591776/picture?type=large", "display_name": "Oscar Cabrera Rodr&#237;guez", "link": "https://stackoverflow.com/users/7880573/oscar-cabrera-rodr%c3%adguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 54124912, "answer_count": 2, "score": -1, "last_activity_date": 1613629176, "creation_date": 1547056982, "last_edit_date": 1547109712, "question_id": 54115933, "link": "https://stackoverflow.com/questions/54115933/dependency-injection-on-base-class", "title": "Dependency injection on base class", "body": "<p>Would it work to setup DI for a class B that has inheritance from class A, which in turns implemets interface I, like this:</p>\n\n<pre><code>public interface I {\n SomeMethod();\n}\n\npublic abstract class A : I {\n//some code ...\n}\n\npublic class B : A {\n//some code...\n}\n</code></pre>\n\n<p>Question is would DI work on such a scheme, I mean setting DI for the B class?</p>\n"}, {"tags": ["c#", "sql-server", "datatable"], "comments": [{"owner": {"reputation": 4496, "user_id": 3325290, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ba85b021834dcc4f71e91234f93332b6?s=128&d=identicon&r=PG&f=1", "display_name": "KeithL", "link": "https://stackoverflow.com/users/3325290/keithl"}, "edited": false, "score": 0, "creation_date": 1547061837, "post_id": 54115837, "comment_id": 95066630, "body": "It&#39;s very likely that the column DateAdded in the DB is set to not allow nulls and is almost always defaulted to getdate(). If the default is properly set then do not attempt to even insert to that column."}, {"owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "reply_to_user": {"reputation": 4496, "user_id": 3325290, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ba85b021834dcc4f71e91234f93332b6?s=128&d=identicon&r=PG&f=1", "display_name": "KeithL", "link": "https://stackoverflow.com/users/3325290/keithl"}, "edited": false, "score": 0, "creation_date": 1547219556, "post_id": 54115837, "comment_id": 95129418, "body": "@KeithL Thank you.  That is pretty much toni&#39;s answer.  We tried that and it still gives the error.  I updated my question to show we&#39;ve tried that."}, {"owner": {"reputation": 4496, "user_id": 3325290, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ba85b021834dcc4f71e91234f93332b6?s=128&d=identicon&r=PG&f=1", "display_name": "KeithL", "link": "https://stackoverflow.com/users/3325290/keithl"}, "edited": false, "score": 0, "creation_date": 1547220650, "post_id": 54115837, "comment_id": 95130023, "body": "I still think the table does not allow nulls to be inserted into that column. In other words it needs a value."}, {"owner": {"reputation": 6624, "user_id": 1750324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eea6f502a6e4334864b2d0f47181db2?s=128&d=identicon&r=PG", "display_name": "Steve Ford", "link": "https://stackoverflow.com/users/1750324/steve-ford"}, "edited": false, "score": 0, "creation_date": 1547298559, "post_id": 54115837, "comment_id": 95149841, "body": "Have you tried setting the CheckConstraints SQLBulkCopy Option?"}, {"owner": {"reputation": 6624, "user_id": 1750324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eea6f502a6e4334864b2d0f47181db2?s=128&d=identicon&r=PG", "display_name": "Steve Ford", "link": "https://stackoverflow.com/users/1750324/steve-ford"}, "edited": false, "score": 0, "creation_date": 1547299942, "post_id": 54115837, "comment_id": 95150159, "body": "It looks like SQLBulkCopy only correctly handles this if you exclude the column. i.e. all rows would have a default value for this column. Here&#39;s the source code for SQLBulkCopy <a href=\"http://www.dotnetframework.org/default.aspx/4@0/4@0/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/fx/src/Data/System/Data/SqlClient/SqlBulkCopy@cs/1305376/SqlBulkCopy@cs\" rel=\"nofollow noreferrer\">dotnetframework.org/default.aspx/4@0/4@0/DEVDIV_TFS/Dev10/&hellip;</a>"}, {"owner": {"reputation": 6624, "user_id": 1750324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eea6f502a6e4334864b2d0f47181db2?s=128&d=identicon&r=PG", "display_name": "Steve Ford", "link": "https://stackoverflow.com/users/1750324/steve-ford"}, "edited": false, "score": 0, "creation_date": 1547300119, "post_id": 54115837, "comment_id": 95150202, "body": "I would perhaps split your bulk copy into two statements, one that inserts the rows with values in the dateadded column and one where these columns are null and you could exclude them, You should be able to accomplish this by some simple linq queries on your datatable."}, {"owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "reply_to_user": {"reputation": 6624, "user_id": 1750324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eea6f502a6e4334864b2d0f47181db2?s=128&d=identicon&r=PG", "display_name": "Steve Ford", "link": "https://stackoverflow.com/users/1750324/steve-ford"}, "edited": false, "score": 0, "creation_date": 1547302721, "post_id": 54115837, "comment_id": 95150770, "body": "@SteveFord That is good information, if not disheartening.  Also, for some tables with <i>a bunch</i> of columns, though perhaps 4 or 5 <code>Date</code>-type columns, that is a lot of permutations of different Bulk Copy paths that would have to be taken.  I just really hope that isn&#39;t the case."}, {"owner": {"reputation": 6624, "user_id": 1750324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eea6f502a6e4334864b2d0f47181db2?s=128&d=identicon&r=PG", "display_name": "Steve Ford", "link": "https://stackoverflow.com/users/1750324/steve-ford"}, "edited": false, "score": 0, "creation_date": 1547306311, "post_id": 54115837, "comment_id": 95151627, "body": "@Suamere you haven&#39;t stated what the default value is, could you not add this in load code or at least use a value you can identify later so that you can perform an update table set datefield = default where datefile = &#39;2999-12-31&#39; for instance."}, {"owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "reply_to_user": {"reputation": 6624, "user_id": 1750324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eea6f502a6e4334864b2d0f47181db2?s=128&d=identicon&r=PG", "display_name": "Steve Ford", "link": "https://stackoverflow.com/users/1750324/steve-ford"}, "edited": false, "score": 0, "creation_date": 1547308470, "post_id": 54115837, "comment_id": 95152238, "body": "@SteveFord If I query the DataBase, the Default Value <code>syscomments.text</code> is &#39;NULL&#39;.  But when I do an <code>INSERT</code> statement with either the column omitted or with the insert keyword <code>DEFAULT</code>, it becomes the value of GETDATE().  So the default for the column is <code>GETDATE()</code>?  Perhaps <code>syscomments</code> isn&#39;t the place to check for the default value?"}, {"owner": {"reputation": 6624, "user_id": 1750324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eea6f502a6e4334864b2d0f47181db2?s=128&d=identicon&r=PG", "display_name": "Steve Ford", "link": "https://stackoverflow.com/users/1750324/steve-ford"}, "edited": false, "score": 0, "creation_date": 1547309519, "post_id": 54115837, "comment_id": 95152531, "body": "@Suamere you can check for defaults through SSMS column properties, you can also script the table out (right-click-&gt;script) to see defaults and other constraints. If the default is getdate(), you could just add the current date &amp; time in your code."}], "answers": [{"comments": [{"owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 0, "creation_date": 1547162968, "post_id": 54116840, "comment_id": 95108253, "body": "I previously marked this as an answer, but have un-marked it.  What I did was completely skip the Assignment of a Value for that column, though the column still existed in the DataTable definition.  It seemed to work, but turned out I hadn&#39;t removed my prior test code that had actually been removing the column from the DataTable definition.  So it was a false positive on fixing the issue.  I&#39;ll put some time into looking at the FireTriggers and re-apply this as the answer if that helps solve the issue."}, {"owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 0, "creation_date": 1547163802, "post_id": 54116840, "comment_id": 95108474, "body": "I removed FireTriggers and it still said <code>Column DateAdded does not allow DBNull.Value</code>.  But thank you for the path for me to attempt."}, {"owner": {"reputation": 123, "user_id": 4777209, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/88fb51810e8c9d573d82b4baf17a89b3?s=128&d=identicon&r=PG&f=1", "display_name": "toni", "link": "https://stackoverflow.com/users/4777209/toni"}, "reply_to_user": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 0, "creation_date": 1547249423, "post_id": 54116840, "comment_id": 95141706, "body": "Does your table have an insert trigger?  Not certain but I believe a insert from any source will fire a trigger.  Another thing to verify is that the field in your table does allow nulls.  From your description however, it sounds like it certainly does."}, {"owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 0, "creation_date": 1547257503, "post_id": 54116840, "comment_id": 95142994, "body": "No, the field in my table is <code>NOT NULL</code>.  e.g.: Does not allow nulls.  That&#39;s why I&#39;m trying to send the signal to use &quot;Default&quot; value.  I just want to tell the Bulk Insert to use the Default Value for that Column.  And, just like with a regular <code>INSERT</code> statement, if I omit the column, SQL has no choice but to use <code>DEFAULT</code>, and it works.  However, I do <b>NOT</b> want to Omit the column.  Because in bulk of dozens of thousands, batched by 500, occasionally there is a value."}, {"owner": {"reputation": 123, "user_id": 4777209, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/88fb51810e8c9d573d82b4baf17a89b3?s=128&d=identicon&r=PG&f=1", "display_name": "toni", "link": "https://stackoverflow.com/users/4777209/toni"}, "reply_to_user": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 0, "creation_date": 1547392643, "post_id": 54116840, "comment_id": 95169362, "body": "I realized this information is missing - what value do you want to be in the date field in the sql table when there is no valid date/time?  null? some default? the min sql date (which is &#39;1900-01-01 00:00:00.000&#39;)?"}, {"owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 0, "creation_date": 1547438074, "post_id": 54116840, "comment_id": 95179878, "body": "Whatever the specified <code>default</code> is.  If I Create Table to Script, it is <code>GETUTCDATE()</code>.  But this question isn&#39;t limited to this table and column.  So I don&#39;t want to hard-code that.  I just want it to use the default value."}], "tags": [], "owner": {"reputation": 123, "user_id": 4777209, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/88fb51810e8c9d573d82b4baf17a89b3?s=128&d=identicon&r=PG&f=1", "display_name": "toni", "link": "https://stackoverflow.com/users/4777209/toni"}, "is_accepted": false, "score": 1, "last_activity_date": 1547355201, "last_edit_date": 1547355201, "creation_date": 1547061359, "answer_id": 54116840, "question_id": 54115837, "link": "https://stackoverflow.com/questions/54115837/column-does-not-allow-dbnull-value-no-keepnulls-proper-column-mappings/54116840#54116840", "title": "Column does not allow DBNull.Value - No KeepNulls - Proper Column Mappings", "body": "<p>This combination does not work for SqlBulkCopy:</p>\n\n<ol>\n<li>The date field in the SQL table is configured as not null.</li>\n<li>Your C# DataTable has records with unset date values (or has set values but they are not actual date/time values).</li>\n</ol>\n\n<p>This combination does work:</p>\n\n<ol>\n<li>The date field in the SQL table is configured to allow nulls but use a default value.</li>\n<li>Your C# DataTable has records with unset date values (SQL will use the default value when the date field is not specified in the C# DataTable).</li>\n</ol>\n\n<p>If the date field in your table MUST be configured to not accept null, then you have more work to do (create a staging table that accepts nulls, bulk insert into the staging table, call a stored proc that you write that inserts from the staging table into your regular table).</p>\n\n<p>The simplest path to what I think you're looking for is this:</p>\n\n<p>Your table should allow NULL for the date field but with a default:</p>\n\n<pre><code>CREATE TABLE [dbo].[MyTable](\n    [Field1] [varchar](50) NULL,\n    [MyDateField] [datetime] NULL,\n) ON [PRIMARY]\nGO\n\nALTER TABLE [dbo].[MyTable] ADD  CONSTRAINT [DF_Table_1_MyDateField] DEFAULT (getdate()) FOR [MyDateField]\nGO\n</code></pre>\n\n<p>Then in C#:</p>\n\n<pre><code>        DataTable dt = new DataTable(\"dbo.MyTable\");\n\n        dt.Columns.Add(\"Field1\");\n        dt.Columns.Add(\"MyDateField\");\n\n        DataRow row1 = dt.NewRow();\n        row1[\"Field1\"] = \"test row 1\";\n        row1[\"MyDateField\"] = DateTime.Now; //specify a value for the date field in C#\n        dt.Rows.Add(row1);\n\n        DataRow row2 = dt.NewRow();\n        row2[\"Field1\"] = \"test row 2\";\n        //do not specify a value for the date field - SQL will use the default value\n        dt.Rows.Add(row2);\n\n        do the bulk copy\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 0, "creation_date": 1547421723, "post_id": 54170663, "comment_id": 95177219, "body": "This is pretty much what I&#39;m doing right now to get around it.  You&#39;re right that I don&#39;t have the access to change the target database.  Your answer solves the situation, but not the exact solution to the exact question.  This is great information for somebody else who is looking for this path, but I&#39;m hoping there are other options and I&#39;m hoping those options will appear by tomorrow."}, {"owner": {"reputation": 2569, "user_id": 2322099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70050a4af12caab9b00d4df7ff993ae?s=128&d=identicon&r=PG", "display_name": "iSR5", "link": "https://stackoverflow.com/users/2322099/isr5"}, "reply_to_user": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 0, "creation_date": 1547423852, "post_id": 54170663, "comment_id": 95177585, "body": "@Suamere I think the appropriate option for your case is to solve it from the source or the target databases, since they have schema differences. So, either the source should be set to not have nulls, or your target table should accept it. This would solve it permanently."}, {"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "reply_to_user": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 0, "creation_date": 1547443933, "post_id": 54170663, "comment_id": 95181025, "body": "@Suamere After digging into the <code>SqlBulkCopy</code> class source code, I have to say that unfortunately there is a code which prevents passing null value to a database table column which does not allow NULL. They are retrieving the metadata information for the destination table from the database, and there is no mapping/controlling option to avoid that check. Which is bug in my opinion, but it is what it is -   so no exact solution to the exact question, you have to accept some of the workarounds."}, {"owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "edited": false, "score": 1, "creation_date": 1547476842, "post_id": 54170663, "comment_id": 95195514, "body": "Thanks for the update, Ivan.  I actually found that same thing.  I also used SQL Profiler and found that I can&#39;t see the resulting call, other than some basic BCP metadata.  I may have to just suck it up and force a code-calculated Default."}], "tags": [], "owner": {"reputation": 2569, "user_id": 2322099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70050a4af12caab9b00d4df7ff993ae?s=128&d=identicon&r=PG", "display_name": "iSR5", "link": "https://stackoverflow.com/users/2322099/isr5"}, "is_accepted": false, "score": 1, "last_activity_date": 1547395568, "creation_date": 1547395568, "answer_id": 54170663, "question_id": 54115837, "link": "https://stackoverflow.com/questions/54115837/column-does-not-allow-dbnull-value-no-keepnulls-proper-column-mappings/54170663#54170663", "title": "Column does not allow DBNull.Value - No KeepNulls - Proper Column Mappings", "body": "<blockquote>\n  <p>Of the 100,000 records, maybe 20 of them have data. So in my batches\n  of 500, sometimes None have data in the DateAdded field, sometimes one\n  or two have data.</p>\n</blockquote>\n\n<p>I'm guessing some of your records have nulls in DateAdded, while the DateAdded is configured to not aceept nulls. </p>\n\n<p>To overcome this, you have multiple ways to do it : </p>\n\n<ol>\n<li>(Easier one) is just to alter column DateAdded to accept null.</li>\n<li>Assign a default value to column DateAdded (from MSSQL).</li>\n<li>Manage the nulls on the records from your code.</li>\n</ol>\n\n<p>If you don't have permissions or your work requirment specified that DateAdded cannot accept nulls or have a default value from MSSQL OR 1 &amp; 2 didn't solve your problem. \nThen, you can manage the nulls on DateAdded column on each batch before you copy it to the server. </p>\n\n<p>In this case, in your code, while you're populating the data, you should add a condition to this column with something like this : </p>\n\n<pre><code>if(field.ColumnName == \"DateAdded\")\n{\n    // Do something to handle this column if it's null \n\n    // Set a default value \n    DateTimeOffset dtoffset = DateTimeOffset.Parse(\"2019-01-01 00:00:00.0000000 -00:00\", CultureInfo.InvariantCulture); // change it to the required offset \n    string defaultDateAdded = dtoffset.ToString(\"yyyy-MM-dd HH:mm:ss.fffffff zzz\", CultureInfo.InvariantCulture);               \n\n    // Add the default value \n    newRow[field.ColumnName] = defaultDateAdded;\n}\nelse\n{\n    // Do something to handle the rest of columns if they're null \n\n}   \n</code></pre>\n\n<p>then when you're done from handling all columns, you just add the new row into your datatable, then copy the finalized datatable to the server.</p>\n"}, {"tags": [], "owner": {"reputation": 316, "user_id": 1714826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c7415b0845ce24b2b19d7b9e2c1572?s=128&d=identicon&r=PG", "display_name": "MasterHman", "link": "https://stackoverflow.com/users/1714826/masterhman"}, "is_accepted": true, "score": 4, "last_activity_date": 1547657971, "creation_date": 1547657971, "answer_id": 54221882, "question_id": 54115837, "link": "https://stackoverflow.com/questions/54115837/column-does-not-allow-dbnull-value-no-keepnulls-proper-column-mappings/54221882#54221882", "title": "Column does not allow DBNull.Value - No KeepNulls - Proper Column Mappings", "body": "<p>Simply put, you can't do what you want.  The best reference for how the BulkCopy works with default values is <a href=\"https://stackoverflow.com/questions/27027013/sqlbulkcopy-into-table-that-default-column-values-fails-when-source-datatable-ro/27044891#27044891\">This Answer</a> by Rutzky.</p>\n\n<p>The problem is, BulkCopy includes a step where it queries the target database and determines the structure of the table.  If it determines that the target column is <code>NOT NULL</code>able, and you are passing null or DBNull, it throws an exception before even trying to pass the data.</p>\n\n<p>If you use SQL Profiler, you'll see the BCP Calls, but not the data (The data would never show up anyway).  All you'll see is the call to define the Column List and Flags.</p>\n\n<p>When the BulkCopy finally decides to pass the data along.  If the column exists, and the field is <code>NULL</code>able, and the value is DBNull.Value, and the column has a Default Value; Bulk Copy essentially passes the <code>DEFAULT</code> flag along for that column.  But some decision was made such that those conditions, except if the field is <code>NOT NULL</code>able, that the default value should not be used and instead an exception should be thrown.</p>\n\n<p>As far as I can tell this is a bug or oversight by Microsoft.</p>\n\n<p>The common workaround, as some other answers state, is to just handle those values manually by calculating what the value should be in-code.  Of course, if you calculate default values, then the DBA changes the actual SQL Default Value for a field, your systems won't match.  The next step is to add a subsystem to your system that queries and/or tracks/caches the currently specified default values from the SQL Server you're hitting, and assigning those.  That's way more work than should be required.</p>\n\n<p>TLDR: You can't do what you want.  But there are sub-optimal workarounds that others have specified.</p>\n"}], "owner": {"reputation": 4450, "user_id": 1831054, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2fb38aeeabb5903d65185c35a05ae352?s=128&d=identicon&r=PG", "display_name": "Suamere", "link": "https://stackoverflow.com/users/1831054/suamere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7677, "favorite_count": 1, "accepted_answer_id": 54221882, "answer_count": 3, "score": 10, "last_activity_date": 1547657971, "creation_date": 1547056538, "last_edit_date": 1547437547, "question_id": 54115837, "link": "https://stackoverflow.com/questions/54115837/column-does-not-allow-dbnull-value-no-keepnulls-proper-column-mappings", "title": "Column does not allow DBNull.Value - No KeepNulls - Proper Column Mappings", "body": "<p>I am using c# with .NET 4.5.2, pushing to SQL Server 2017 14.0.1000.169</p>\n\n<p>In my database, I have a table with a DateAdded field, of type <code>DateTimeOffset</code>.</p>\n\n<p>I am attempting to BulkCopy with the following code:</p>\n\n<pre><code>private Maybe BulkCopy(SqlSchemaTable table, System.Data.DataTable dt, bool identityInsertOn)\n{\n    try\n    {\n        var options = SqlBulkCopyOptions.TableLock | SqlBulkCopyOptions.FireTriggers | SqlBulkCopyOptions.UseInternalTransaction; //  | SqlBulkCopyOptions.CheckConstraints; // Tried CheckConstraints, but it didn't change anything.\n        if (identityInsertOn) options |= SqlBulkCopyOptions.KeepIdentity;\n        using (var conn = new SqlConnection(_connString))\n        using (var bulkCopy = new SqlBulkCopy(conn, options, null))\n        {\n            bulkCopy.DestinationTableName = table.TableName;\n            dt.Columns.Cast&lt;System.Data.DataColumn&gt;().ToList()\n                .ForEach(x =&gt; bulkCopy.ColumnMappings.Add(new SqlBulkCopyColumnMapping(x.ColumnName, x.ColumnName)));\n\n            try\n            {\n                conn.Open();\n                bulkCopy.WriteToServer(dt);\n            }\n            catch (Exception ex)\n            {\n                return Maybe.Failure(ex);\n            }\n        }\n    }\n    catch (Exception ex)\n    {\n        return Maybe.Failure(ex);\n    }\n\n    return Maybe.Success();\n}\n</code></pre>\n\n<p>The two possible reasons I know of for the <code>does not allow DBNull</code> error are:</p>\n\n<ol>\n<li>Columns are in the wrong order, which is solved by either putting them in the same order as their Database Ordinal, or by performing a Column Mapping.</li>\n<li>KeepNulls is enabled, and <code>DBNull.Value</code> (or <code>null</code>?) are set in the DataTable.</li>\n</ol>\n\n<p>But I am Mapping correctly and NOT ever setting KeepNulls.</p>\n\n<p>Yet I am receiving the error: </p>\n\n<blockquote>\n  <p>Column DateAdded does not allow DBNull.Value</p>\n</blockquote>\n\n<p><strong>EDIT</strong> I also tried just NOT SETTING anything, including <code>null</code>, <code>DBNull.Value</code>, and <code>DefaultValue</code>... just literally not setting that column at all.</p>\n\n<p>Also, if I Remove the DateAdded column from the DataTable, it Works.  But I don't want that.  Of the 100,000 records, maybe 20 of them have data.  So in my batches of 500, sometimes None have data in the DateAdded field, sometimes one or two have data.</p>\n\n<p>So I'd like to keep the column in my DataTable but let it use the DefaultValue.</p>\n\n<p>One last note: I have alternated between setting the DataColumn's Value to <code>DBNull.Value</code> versus <code>dt.Columns[x.ColumnName].DefaultValue</code>.  Both ways give the same error.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>This is the code I'm using to populate the data in my Data Table:</p>\n\n<pre><code>foreach (var column in table)\n{\n    System.Data.DataRow newRow = dt.NewRow();\n    foreach (var field in column)\n    {\n        if (!IsNull(field.Value) &amp;&amp; !IsEmptyDateOrNumber(field.ColumnType, field.Value))\n        {\n            // For DateAdded, this is not hit on the first batch, though there are columns Before and After DateAdded on the same row which do have value.\n            // But it WILL be hit once or twice a few batches later.  So I don't want to completely remove the definition from the DataTable.\n            newRow[field.ColumnName] = field.Value;\n        }\n        else\n        {\n            // newRow[field.ColumnName] = dt.Columns[field.ColumnName].DefaultValue;\n            // newRow[field.ColumnName] = DBNull.Value;\n            // dt.Columns[field.ColumnName].AllowDBNull = true;\n        }\n    }\n    dt.Rows.Add(newRow);\n}\n</code></pre>\n\n<p><code>IsNull()</code> returns <code>TRUE</code> if the value is <code>null</code> or the string <code>\"null\"</code>, as is required for my business requirements.</p>\n\n<p><code>IsEmptyDateOrNumber()</code> will return <code>TRUE</code> if the field is a numeric or date type, and the value is null or empty <code>\"\"</code>.  Because while empty is valid for many string-like fields, it is never a valid numeric value.</p>\n\n<p>The condition to assign the field a value is hit exactly <strong>0 percent</strong> of the time for this particular column.  Thus nothing is set.</p>\n"}, {"tags": ["c#", "layout", "asp.net-core-mvc", "asp.net-mvc-partialview"], "comments": [{"owner": {"reputation": 10219, "user_id": 304683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pPt7E.jpg?s=128&g=1", "display_name": "EdSF", "link": "https://stackoverflow.com/users/304683/edsf"}, "edited": false, "score": 0, "creation_date": 1547056264, "post_id": 54115725, "comment_id": 95064283, "body": "That sounds like a job for frontend Javascript (add/remove attributes based on frontend events, user action, etc.). Hth."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6855542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991db8377868e1e1c9e80923c7189154?s=128&d=identicon&r=PG&f=1", "display_name": "Dev X", "link": "https://stackoverflow.com/users/6855542/dev-x"}, "edited": false, "score": 0, "creation_date": 1547247183, "post_id": 54116109, "comment_id": 95141140, "body": "I&#39;m trying to learn a front end framework as the comment above, but this is great - thank you... I like this approach (I&#39;m a traditional app programmer who dabbles in web stuff, so, I feel more comfortable with this!)"}], "tags": [], "owner": {"reputation": 206107, "user_id": 654031, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9d0a45dd92ecc2cb15cdbc5f80befb15?s=128&d=identicon&r=PG", "display_name": "Chris Pratt", "link": "https://stackoverflow.com/users/654031/chris-pratt"}, "is_accepted": true, "score": 0, "last_activity_date": 1547057840, "creation_date": 1547057840, "answer_id": 54116109, "question_id": 54115725, "link": "https://stackoverflow.com/questions/54115725/what-is-the-best-way-to-pass-a-variable-to-a-partial-in-the-layout-about-the-cur/54116109#54116109", "title": "What is the best way to pass a variable to a partial in the layout about the current page?", "body": "<p>You don't need <code>if</code> statements, but you will need to employ ternaries (i.e. some amount of conditional logic is required). The most terse way I've found to handle this sort of thing is with code along the lines of:</p>\n\n<pre><code>@{ string url; /* define anywhere, just needs to be before nav HTML */ } \n\n...\n\n@{ url = Url.Action(\"Foo\"); }\n&lt;li class=\"@(Request.Path == url ? \"active\" : null)\"&gt;\n    &lt;a href=\"@url\"&gt;Foo&lt;/a&gt;\n&lt;/li&gt;\n@{ url = Url.Action(\"Bar\"); }\n&lt;li class=\"@(Request.Path == url ? \"active\" : null)\"&gt;\n    &lt;a href=\"@url\"&gt;Bar&lt;/a&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>The <code>url</code> variable is declared first just so 50,000 different variables aren't necessary. The URL is saved to a variable at all simply so you do not need to repeat any calls to <code>Url.Action</code> and such (i.e. one for the conditional and another for the actual link). Here, I'm just doing a direct comparison match, but you may want the list item marked active even if the current page is a sub item. For that you'd simply use <code>Request.Path.StartsWith(url)</code> instead as your conditional. However, don't use that on the link to your homepage (i.e. <code>/</code>) or it will always be marked active.</p>\n\n<p>Follow the same approach with your \"treeview\" items.</p>\n\n<pre><code>@{ url = Url.Action(\"Item1\"); }\n&lt;li class=\"treeview @(Request.Path == url ? \"active menu-open\" : null)\"&gt;\n    &lt;a href=\"@url\"&gt;Tree view item&lt;/a&gt;\n&lt;/li&gt;\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 6855542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991db8377868e1e1c9e80923c7189154?s=128&d=identicon&r=PG&f=1", "display_name": "Dev X", "link": "https://stackoverflow.com/users/6855542/dev-x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 54116109, "answer_count": 1, "score": 0, "last_activity_date": 1547057840, "creation_date": 1547056057, "question_id": 54115725, "link": "https://stackoverflow.com/questions/54115725/what-is-the-best-way-to-pass-a-variable-to-a-partial-in-the-layout-about-the-cur", "title": "What is the best way to pass a variable to a partial in the layout about the current page?", "body": "<p>I've implemented a huge template to a new .Net Core MVC app and have separated it to various partials (header, sidebar, footer).</p>\n\n<p>It works well - however, the side menu bar is meant to have</p>\n\n<pre><code>&lt;li class=\"active\"&gt;\n</code></pre>\n\n<p>on the currently visited page and change from:</p>\n\n<pre><code>&lt;li class=\"treeview\"&gt;\n</code></pre>\n\n<p>to </p>\n\n<pre><code>&lt;li class=\"treeview active menu-open\"&gt;\n</code></pre>\n\n<p>on any open section.</p>\n\n<p>Other than loads of if statements or a lot of <strong>VERY</strong> messy code, I can't figure out how to do this. Can someone point me in the correct direction please?</p>\n"}, {"tags": ["c#", "visual-studio", "powershell", "deployment", "azure-service-fabric"], "comments": [{"owner": {"reputation": 1390, "user_id": 8748848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4JRxr.jpg?s=128&g=1", "display_name": "Micah_MSFT", "link": "https://stackoverflow.com/users/8748848/micah-msft"}, "edited": false, "score": 0, "creation_date": 1547075701, "post_id": 54115696, "comment_id": 95072016, "body": "Download the StandAlone package here: <a href=\"https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-creation-for-windows-server\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/azure/service-fabric/&hellip;</a> then run the CleanServiceFabric.ps1 to clear any prior SF deployments. Then see if you can deploy the cluster"}, {"owner": {"reputation": 123, "user_id": 6179181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5aa734b64800b936a3ec0843dff404?s=128&d=identicon&r=PG&f=1", "display_name": "spektro37", "link": "https://stackoverflow.com/users/6179181/spektro37"}, "reply_to_user": {"reputation": 1390, "user_id": 8748848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4JRxr.jpg?s=128&g=1", "display_name": "Micah_MSFT", "link": "https://stackoverflow.com/users/8748848/micah-msft"}, "edited": false, "score": 0, "creation_date": 1547206683, "post_id": 54115696, "comment_id": 95122642, "body": "@Micah_MSFT, thank you for your reply. Did you mean the &quot;CleanFabric.ps1&quot; script? I can&#39;t see the &quot;CleanServiceFabric.ps1&quot; script anywhere in the archive."}, {"owner": {"reputation": 1390, "user_id": 8748848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4JRxr.jpg?s=128&g=1", "display_name": "Micah_MSFT", "link": "https://stackoverflow.com/users/8748848/micah-msft"}, "edited": false, "score": 0, "creation_date": 1547227950, "post_id": 54115696, "comment_id": 95133970, "body": "Yes sorry CleanFabric.ps1 :)"}], "owner": {"reputation": 123, "user_id": 6179181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5aa734b64800b936a3ec0843dff404?s=128&d=identicon&r=PG&f=1", "display_name": "spektro37", "link": "https://stackoverflow.com/users/6179181/spektro37"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1842, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1547055942, "creation_date": 1547055942, "last_edit_date": 1592644375, "question_id": 54115696, "link": "https://stackoverflow.com/questions/54115696/the-powershell-script-failed-to-execute-service-fabric", "title": "The PowerShell script failed to execute - Service Fabric", "body": "<p>I am trying to build a Service Fabric project, but I am getting the &quot;The PowerShell script failed to execute&quot; error message.</p>\n<p>I am running Visual Studio 2017 Enterprise (15.9.5) as administrator.</p>\n<p>I have tried running the following PS code, as suggested <a href=\"https://stackoverflow.com/a/51796706/6179181\">here</a>, but it didn't resolve the issue:</p>\n<pre><code>Set-ExecutionPolicy -ExecutionPolicy Unrestricted -Force -Scope CurrentUser\n</code></pre>\n<p>I have tried to find any additional info in the Service Fabric Tools area of the &quot;output&quot; tab, as the full text of the error says, but there was nothing there:</p>\n<blockquote>\n<p>The PowerShell script failed to execute. See the Service Fabric Tools pane in the output window for details.</p>\n</blockquote>\n<p>I am happy to provide any information that could help troubleshoot this issue, as I couldn't find any solution to this problem anywhere.</p>\n"}, {"tags": ["c#", "xml", "asp.net-core", ".net-core", "xmldocument"], "comments": [{"owner": {"reputation": 5847, "user_id": 3187033, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DfSEN.png?s=128&g=1", "display_name": "JohnyL", "link": "https://stackoverflow.com/users/3187033/johnyl"}, "edited": false, "score": 0, "creation_date": 1547056318, "post_id": 54115667, "comment_id": 95064312, "body": "Is it a requirement to use XmlDocument? What about XDocument?"}, {"owner": {"reputation": 37, "user_id": 10719691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8129b1cf8b766e9f7a723b1ee930b7?s=128&d=identicon&r=PG&f=1", "display_name": "M. Mis", "link": "https://stackoverflow.com/users/10719691/m-mis"}, "reply_to_user": {"reputation": 5847, "user_id": 3187033, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DfSEN.png?s=128&g=1", "display_name": "JohnyL", "link": "https://stackoverflow.com/users/3187033/johnyl"}, "edited": false, "score": 0, "creation_date": 1547058688, "post_id": 54115667, "comment_id": 95065337, "body": "Yes, i need use XmlDocument"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10719691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8129b1cf8b766e9f7a723b1ee930b7?s=128&d=identicon&r=PG&f=1", "display_name": "M. Mis", "link": "https://stackoverflow.com/users/10719691/m-mis"}, "edited": false, "score": 0, "creation_date": 1547058422, "post_id": 54116144, "comment_id": 95065202, "body": "I had read that post, but it need &#180;XmlElement root = doc.DocumentElement;     doc.InsertBefore(xmldecl, root);&#180; but with that throw a error, Cannot insert the node in the specified location. Because exits, InnerXml and OuterXml show it but return does&#39;n&#39;t"}, {"owner": {"reputation": 10586, "user_id": 3645638, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/RZsDa.jpg?s=128&g=1", "display_name": "Svek", "link": "https://stackoverflow.com/users/3645638/svek"}, "reply_to_user": {"reputation": 37, "user_id": 10719691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8129b1cf8b766e9f7a723b1ee930b7?s=128&d=identicon&r=PG&f=1", "display_name": "M. Mis", "link": "https://stackoverflow.com/users/10719691/m-mis"}, "edited": false, "score": 0, "creation_date": 1547059631, "post_id": 54116144, "comment_id": 95065714, "body": "@M.Mis -- given that you needed a more clear answer (rather than a hint) I have updated my answer to show the entire method for you."}, {"owner": {"reputation": 37, "user_id": 10719691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8129b1cf8b766e9f7a723b1ee930b7?s=128&d=identicon&r=PG&f=1", "display_name": "M. Mis", "link": "https://stackoverflow.com/users/10719691/m-mis"}, "edited": false, "score": 0, "creation_date": 1547129680, "post_id": 54116144, "comment_id": 95092219, "body": "Thank, but nothing change, even string requestXML = Request.Body throw error. doc.OuterXml return a string with declaration, not a xml but, how my original question says, my code with OuterXml return declaration too. I guess, my problem is with configuration but i don&#39;t know what i miss"}], "tags": [], "owner": {"reputation": 10586, "user_id": 3645638, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/RZsDa.jpg?s=128&g=1", "display_name": "Svek", "link": "https://stackoverflow.com/users/3645638/svek"}, "is_accepted": false, "score": 0, "last_activity_date": 1547059588, "last_edit_date": 1547059588, "creation_date": 1547058029, "answer_id": 54116144, "question_id": 54115667, "link": "https://stackoverflow.com/questions/54115667/net-core-xmldocument-doesnt-return-declaration/54116144#54116144", "title": ".Net Core XmlDocument doesn&#39;t return declaration", "body": "<p>You might want to craft your response with explicit property values set on the <code>XmlDeclaration</code> class.</p>\n\n<blockquote>\n  <p>I suggest you take a look at the <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.xml.xmldeclaration?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">XmlDeclaration Class</a></p>\n</blockquote>\n\n<pre><code>[HttpPost]\n[Consumes(\"application/xml\")]\n[Produces(\"application/xml\")]\npublic ActionResult&lt;XmlDocument&gt; EchoXmlAndChangeEncoding()\n{\n    string requestXML = Request.Body;\n\n    XmlDocument doc = new XmlDocument();\n    doc.Load(new StringReader(requestXML));\n\n    // Grab the XML declaration. \n    XmlDeclaration xmldecl = doc.ChildNodes.OfType&lt;XmlDeclaration&gt;().FirstOrDefault();\n    xmldecl.Encoding = \"UTF-8\";\n    xmldecl.Standalone = null;   // &lt;-- or do whatever you need\n\n    ... // set other declarations here\n\n    // Output the modified XML document \n    return Ok(doc.OuterXml);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 1287051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad68e68ec1b97a69ac0f36c5c08a449?s=128&d=identicon&r=PG", "display_name": "elsueco", "link": "https://stackoverflow.com/users/1287051/elsueco"}, "is_accepted": false, "score": 0, "last_activity_date": 1567068156, "creation_date": 1567068156, "answer_id": 57706343, "question_id": 54115667, "link": "https://stackoverflow.com/questions/54115667/net-core-xmldocument-doesnt-return-declaration/57706343#57706343", "title": ".Net Core XmlDocument doesn&#39;t return declaration", "body": "<p>You could try to configure your XmlSerializerOutputFormatter in the ConfigureServices method using XmlWriterSettings.OmitXmlDeclaration and setting it to false as this is set to true by default.</p>\n\n<pre><code>private void ConfigureXmlOutpuFormatter(MvcOptions options)\n{\n     XmlWriterSettings settings = new XmlWriterSettings\n     {\n       OmitXmlDeclaration = false\n     };\n     options.OutputFormatters.Add(new XmlSerializerOutputFormatter(settings));\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10719691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8129b1cf8b766e9f7a723b1ee930b7?s=128&d=identicon&r=PG&f=1", "display_name": "M. Mis", "link": "https://stackoverflow.com/users/10719691/m-mis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 878, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1567068156, "creation_date": 1547055776, "last_edit_date": 1547232126, "question_id": 54115667, "link": "https://stackoverflow.com/questions/54115667/net-core-xmldocument-doesnt-return-declaration", "title": ".Net Core XmlDocument doesn&#39;t return declaration", "body": "<p>I have a .net core web application with a XmlDocument, this doesn't return declaration, even without modifications.</p>\n\n<p>I have this code</p>\n\n<pre><code>[HttpPost]\n[Consumes(\"application/xml\")]\n[Produces(\"application/xml\")]\npublic ActionResult&lt;XmlDocument&gt; GW1()\n{\n    XmlDocument xmlDocRec = new XmlDocument();\n    xmlDocRec.Load(Request.Body);\n    return Ok(xmlDocRec);\n}\n</code></pre>\n\n<p>Request</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;GR User=\"User1\" PropertyCode=\"90001045\"&gt;\n    &lt;GW&gt;1&lt;/GW&gt;\n&lt;/GR&gt;\n</code></pre>\n\n<p>Response</p>\n\n<pre><code>&lt;GR User=\"User1\" PropertyCode=\"90001045\"&gt;\n    &lt;GW&gt;1&lt;/GW&gt;\n&lt;/GR&gt;\n</code></pre>\n\n<p>I have this in Startup</p>\n\n<pre><code>services.AddMvc()\n                .SetCompatibilityVersion(CompatibilityVersion.Version_2_1)\n                .AddXmlSerializerFormatters();\n</code></pre>\n\n<p>I need in response <code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</code> but i don't know why it doesn't not return. In xmlDocRec.InnerXml and xmlDocRec.OuterXml exists.</p>\n\n<p>I haven't class as parameters and response neither, i can't use it for requirement, for that i use Request.Body</p>\n\n<p>Obviously i work with xmlDocRec, i add and update elements, but result is the same. When i work with xmlDocRec, xmlDocRec.InnerXml and xmlDocRec.OuterXml contains <code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"no\"?&gt;</code>. Later, i will need to delete standalone=\"no\" because it must not be in response.</p>\n\n<p>--- Edit</p>\n\n<p>I don't know if it is rigth way, but for now i'm using this</p>\n\n<pre><code>[HttpPost]\npublic ContentResult GW1()\n{\n    XmlDocument xmlDocRec = new XmlDocument();\n    xmlDocRec.Load(Request.Body);\n\n    return new ContentResult\n    {\n        ContentType = \"application/xml\",\n        Content = xmlDocRec.OuterXml,\n        StatusCode = 200\n    };\n}\n</code></pre>\n\n<p>With that, i don't need Consumes, Produces and AddXmlSerializerFormatters in startup.</p>\n\n<p>If some know a better way I'm willing to try.</p>\n"}, {"tags": ["c#", "unity3d"], "comments": [{"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547058277, "post_id": 54115638, "comment_id": 95065144, "body": "Is the object you want to move the one this component is attached to? and is that object also the same one the Rigidbody <code>Ball</code> is attached to? In that case use <a href=\"https://docs.unity3d.com/ScriptReference/Rigidbody.MovePosition.html\" rel=\"nofollow noreferrer\">Rigidbody.MovePosition</a> instead of setting the position via the <code>Transform</code> component!"}, {"owner": {"reputation": 229, "user_id": 9541768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026e4d94930c7b28800b36b29d51ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Taik", "link": "https://stackoverflow.com/users/9541768/taik"}, "reply_to_user": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547058670, "post_id": 54115638, "comment_id": 95065323, "body": "@derHugo I&#39;ve edited the post, check it again please."}, {"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547058863, "post_id": 54115638, "comment_id": 95065413, "body": "Well now the code is very different ... you didn&#39;t answer my question ^^ And .. because you are setting the <code>draggin</code> to true on MouseDown (the moment you click) and then set the position. Why did you remove the the <code>OnMouseDown</code> and <code>OnMouseDrag</code> implementation?"}, {"owner": {"reputation": 229, "user_id": 9541768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026e4d94930c7b28800b36b29d51ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Taik", "link": "https://stackoverflow.com/users/9541768/taik"}, "reply_to_user": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547059352, "post_id": 54115638, "comment_id": 95065604, "body": "I removed it because I want to move the object when dragging any place on the screen"}, {"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "edited": false, "score": 0, "creation_date": 1547059508, "post_id": 54115638, "comment_id": 95065663, "body": "Oh I see than let me update my answer ^^"}], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 9541768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026e4d94930c7b28800b36b29d51ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Taik", "link": "https://stackoverflow.com/users/9541768/taik"}, "edited": false, "score": 0, "creation_date": 1547059971, "post_id": 54116438, "comment_id": 95065855, "body": "It still move without dragging :("}, {"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "reply_to_user": {"reputation": 229, "user_id": 9541768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026e4d94930c7b28800b36b29d51ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Taik", "link": "https://stackoverflow.com/users/9541768/taik"}, "edited": false, "score": 0, "creation_date": 1547060123, "post_id": 54116438, "comment_id": 95065911, "body": "what would you define as <code>dragging</code> than? Maybe I didn&#39;t completely understand what you are trying to do yet"}, {"owner": {"reputation": 229, "user_id": 9541768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026e4d94930c7b28800b36b29d51ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Taik", "link": "https://stackoverflow.com/users/9541768/taik"}, "edited": false, "score": 0, "creation_date": 1547060344, "post_id": 54116438, "comment_id": 95066001, "body": "The object still moving to the mouse position when I first click, I want the object to move only when I click+move the mouse."}, {"owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "reply_to_user": {"reputation": 229, "user_id": 9541768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026e4d94930c7b28800b36b29d51ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Taik", "link": "https://stackoverflow.com/users/9541768/taik"}, "edited": false, "score": 0, "creation_date": 1547061186, "post_id": 54116438, "comment_id": 95066366, "body": "I updated my answer. I think I got it now: You want to click anywhere on the screen and than only use the difference between the current value and that intitial mouseDown position. But I&#39;m still not sure ... do you really want to move the object on the global X-axis?"}, {"owner": {"reputation": 229, "user_id": 9541768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026e4d94930c7b28800b36b29d51ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Taik", "link": "https://stackoverflow.com/users/9541768/taik"}, "edited": false, "score": 0, "creation_date": 1547063229, "post_id": 54116438, "comment_id": 95067236, "body": "I used this line &quot;Ball.MovePosition(new Vector3(rayPoint.x + initialPosition.x, transform.position.y, transform.position.z));&quot; instead of this &quot;Ball.MovePosition(initialPosition + new Vector3(rayPoint.x, 0, 0));&quot; to move it only on X axis, but I still get a weird movement, when clicking and releasing the object move fast on the X axis."}, {"owner": {"reputation": 229, "user_id": 9541768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026e4d94930c7b28800b36b29d51ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Taik", "link": "https://stackoverflow.com/users/9541768/taik"}, "edited": false, "score": 0, "creation_date": 1547063524, "post_id": 54116438, "comment_id": 95067344, "body": "the first time you click, the object move correctly, but the second time after just clicking the object move, and the next time you click the object move faster ... so the more you click the more the movement become faster and weird."}], "tags": [], "owner": {"reputation": 46970, "user_id": 7111561, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/SNnq7.png?s=128&g=1", "display_name": "derHugo", "link": "https://stackoverflow.com/users/7111561/derhugo"}, "is_accepted": false, "score": 0, "last_activity_date": 1547061564, "last_edit_date": 1547061564, "creation_date": 1547059394, "answer_id": 54116438, "question_id": 54115638, "link": "https://stackoverflow.com/questions/54115638/object-follow-mouse-dragging-unity-3d/54116438#54116438", "title": "Object Follow Mouse Dragging Unity 3D", "body": "<p>For the continues movement you can use <code>GetMouseButton</code> which is true while the button stays pressed (in contrary to <code>GetMouseButtonDown</code> which is true only the first frame the button is pressed)</p>\n\n<p>You said the script is attached to the same as the <code>RigiBody</code> component. In such a case you should never place an object using</p>\n\n<pre><code>transform.position = ...\n</code></pre>\n\n<p>but instead use <a href=\"https://docs.unity3d.com/ScriptReference/Rigidbody.MovePosition.html\" rel=\"nofollow noreferrer\">RigidBody.MovePosition</a> like</p>\n\n<pre><code>Ball.MovePosition(new Vector3( ... ));\n</code></pre>\n\n<p>Finally store the initial position on mouse down and than use it as a reference point:</p>\n\n<pre><code>Vector3 initialPosition;\n\nvoid Update()\n{\n    // called the first time mouse button is pressed\n    if (Input.GetMouseButtonDown(0))\n    {\n        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);\n        initialPosition = transform.position;\n\n        Vector3 rayPoint = ray.GetPoint(0);\n\n        // Not sure but this might get you a slightly better value for distance\n        distance = Vector3.Distance(transform.position, rayPoint );\n    }\n\n    // called while button stays pressed\n    if (Input.GetMouseButton(0))\n    {\n        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);\n        Vector3 rayPoint = ray.GetPoint(distance);\n        Ball.MovePosition(initialPosition + new Vector3(rayPoint.x, 0, 0));\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Also note that I'm not sure that</p>\n\n<pre><code>// Update is called once per frame\nvoid FixedUpdate () {\n    Ball.velocity = transform.forward * Speed * Time.deltaTime;\n}\n</code></pre>\n\n<p>is what you want to do. The usage of <code>Time.deltaTime</code> makes not much sense here in my eyes. You either want to set the velocity to a certain speed like </p>\n\n<pre><code>Ball.velocity = transform.forward * Speed;\n</code></pre>\n\n<p>or you want to change a position using <code>Time.deltaTime</code> to have a smooth movement like</p>\n\n<pre><code>Ball.MovePosition(transform.position + transform.forward * Speed * Time.deltaTime);\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 9541768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026e4d94930c7b28800b36b29d51ff7a?s=128&d=identicon&r=PG&f=1", "display_name": "Taik", "link": "https://stackoverflow.com/users/9541768/taik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4708, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547088752, "creation_date": 1547055660, "last_edit_date": 1547058629, "question_id": 54115638, "link": "https://stackoverflow.com/questions/54115638/object-follow-mouse-dragging-unity-3d", "title": "Object Follow Mouse Dragging Unity 3D", "body": "<p>I have an object moving forward constantly, I want to make it move on the X axis by mouse dragging any part of the screen (swiping), so I tried this code but when first clicking on the screen the object move to the mouse X position (without dragging)! do you have any suggestions on how to make it move only when dragging?</p>\n\n<p><strong>The Script:</strong></p>\n\n<pre><code>private bool dragging = false;\nprivate float distance;\n\npublic Rigidbody Ball;\npublic float Speed = 100;\n\n\n// Use this for initialization\nvoid Start () {\n\n}\n\n// Update is called once per frame\nvoid FixedUpdate () {\n\n    Ball.velocity = transform.forward * Speed * Time.deltaTime;\n}\n\n\nvoid Update()\n{\n    if (Input.GetMouseButtonDown(0))\n    {\n        distance = Vector3.Distance(transform.position, Camera.main.transform.position);\n        dragging = true;\n    }\n\n    if(Input.GetMouseButtonUp(0))\n    {\n        dragging = false;\n    }\n\n    if (dragging)\n    {\n        Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);\n        Vector3 rayPoint = ray.GetPoint(distance);\n        transform.position = new Vector3(rayPoint.x, transform.position.y, transform.position.z);\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", ".net", "datatable", "datarow", "datarowcollection"], "comments": [{"owner": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 1, "creation_date": 1547056095, "post_id": 54115600, "comment_id": 95064208, "body": "Figure out which table <i>first</i> then create the NewRow from that table...or add the data directly.  <code>dt1.NewRow()</code> creates a new row for dt1.  Trying to add it to dt2 will be...problematic"}], "answers": [{"tags": [], "owner": {"reputation": 1826, "user_id": 1895086, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7410f79377e33960f63e398b312ade94?s=128&d=identicon&r=PG", "display_name": "CDove", "link": "https://stackoverflow.com/users/1895086/cdove"}, "is_accepted": true, "score": 0, "last_activity_date": 1547474401, "creation_date": 1547474401, "answer_id": 54182949, "question_id": 54115600, "link": "https://stackoverflow.com/questions/54115600/how-do-i-populate-a-datarow-and-assign-it-to-one-of-two-tables-based-on-a-condit/54182949#54182949", "title": "How do I populate a DataRow and assign it to one of two tables based on a condition?", "body": "<p>I found my solution.   Since I can't add the row built off of one table to the other table directly, I figured it was the <code>DataRow</code> object that was problematic, but the  <code>ItemArray</code> property was probably all I needed. </p>\n\n<pre><code>                    if (isErrorRow)\n                    {                           \n                        //nr is the NewRow for dt1\n                        var nr2 = dt2.NewRow();\n                        nr2.ItemArray = nr.ItemArray;\n                        dt2.Rows.Add(nr2);\n                    }\n</code></pre>\n\n<p>This effectively cloned the rows. </p>\n"}], "owner": {"reputation": 1826, "user_id": 1895086, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7410f79377e33960f63e398b312ade94?s=128&d=identicon&r=PG", "display_name": "CDove", "link": "https://stackoverflow.com/users/1895086/cdove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 54182949, "answer_count": 1, "score": 1, "last_activity_date": 1547474401, "creation_date": 1547055490, "question_id": 54115600, "link": "https://stackoverflow.com/questions/54115600/how-do-i-populate-a-datarow-and-assign-it-to-one-of-two-tables-based-on-a-condit", "title": "How do I populate a DataRow and assign it to one of two tables based on a condition?", "body": "<p>I have data being processed by an app which needs to sort the data based on whether or not a bit is flipped.   The tables <strong>are identical</strong>.  The code as it stands looks something like this: </p>\n\n<pre><code>DataTable dt2 = dt1.Clone();\n\nDataRow r = dt1.NewRow();\nFillUp(ref r);\n\nif(bitISetEarlier)\n   dt2.ImportRow(r);\nelse\n   dt1.ImportRow(r);\n</code></pre>\n\n<p>Now, a clear problem I was having is that if the row wasn't already attached to a table, <code>ImportRow()</code> fails silently and I end up with an empty table.   When I changed this to:</p>\n\n<pre><code>    if(bitISetEarlier)\n       dt2.Rows.Add(r);\n    else\n       dt1.Rows.Add(r);\n</code></pre>\n\n<p>I started getting an exception saying that a function was trying to add a row that existed for another table.   So when I tried this:</p>\n\n<pre><code>if(bitISetEarlier)\n    if(r.RowState == DataRowState.Detached) \n         dt2.Rows.Add(r) \n    else dt2.ImportRow(r);\n else\n     if(r.RowState == DataRowState.Detached) \n          dt1.Rows.Add(r) \n     else dt1.ImportRow(r);\n</code></pre>\n\n<p>the exception stopped, but any attempt to assign to <code>dt2</code> still states that the row belongs to another table, but if I comment out the <code>dt2</code> <code>if</code> statement and just attempt <code>ImportRow()</code>, the <code>dt2.Rows.Count</code> remains at 0 and no records assigned.</p>\n\n<p>I need to populate the <code>DataRow</code> before knowing which table it belongs in, but I have no idea what columns the row will have before it hits this function.  The condition that indicates which table it should go to is <em>not</em> stored with the data in the <code>DataTable</code>.</p>\n\n<p>Is the problem that even though they have identical columns, <code>NewRow()</code> is adding an attribute to the row that makes it incompatible with the sister table? Is there a way I can get the same functionality as <code>NewRow()</code> (copy schema without knowing what any of the columns are ahead of time) but that I can dynamically assign?  I'm aware I could probably manually construct a row that is compatible with either by wrapping it in a <code>for</code> loop and building out the columns every time i need the new row using the <code>DataTable.Columns</code> property, but I'd like to avoid doing that if possible. </p>\n"}, {"tags": ["c#", "azure", "azure-storage", "azure-storage-blobs"], "answers": [{"comments": [{"owner": {"reputation": 4233, "user_id": 233697, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0d65b679279e3b93008adacda512ce0a?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearning", "link": "https://stackoverflow.com/users/233697/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1547056254, "post_id": 54115635, "comment_id": 95064278, "body": "Would need to wrap it in a try catch. Wanted to avoid generating exceptions as far as possible \ud83d\ude42"}, {"owner": {"reputation": 40761, "user_id": 1658906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4748ed2fb97e8a8d4dd6d439625135?s=128&d=identicon&r=PG", "display_name": "juunas", "link": "https://stackoverflow.com/users/1658906/juunas"}, "reply_to_user": {"reputation": 4233, "user_id": 233697, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0d65b679279e3b93008adacda512ce0a?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearning", "link": "https://stackoverflow.com/users/233697/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1547056336, "post_id": 54115635, "comment_id": 95064322, "body": "Right, that would indeed be nice. If you could tell the Storage SDK to not throw, but return null if not found etc.."}, {"owner": {"reputation": 4233, "user_id": 233697, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0d65b679279e3b93008adacda512ce0a?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearning", "link": "https://stackoverflow.com/users/233697/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1547056438, "post_id": 54115635, "comment_id": 95064363, "body": "I did check the decomiled code. It adds the if-match header with a value of &#39;*&#39;. Don&#39;t know how that&#39;s processed by the server though"}, {"owner": {"reputation": 40761, "user_id": 1658906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4748ed2fb97e8a8d4dd6d439625135?s=128&d=identicon&r=PG", "display_name": "juunas", "link": "https://stackoverflow.com/users/1658906/juunas"}, "reply_to_user": {"reputation": 4233, "user_id": 233697, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0d65b679279e3b93008adacda512ce0a?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearning", "link": "https://stackoverflow.com/users/233697/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1547056540, "post_id": 54115635, "comment_id": 95064415, "body": "The AccessCondition can be specified so you can specify a <i>lease id</i> if you have acquired a lease on the blob."}], "tags": [], "owner": {"reputation": 40761, "user_id": 1658906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4748ed2fb97e8a8d4dd6d439625135?s=128&d=identicon&r=PG", "display_name": "juunas", "link": "https://stackoverflow.com/users/1658906/juunas"}, "is_accepted": false, "score": 1, "last_activity_date": 1547055639, "creation_date": 1547055639, "answer_id": 54115635, "question_id": 54115575, "link": "https://stackoverflow.com/questions/54115575/fetch-azure-blob-metadata-only-if-the-blob-exists/54115635#54115635", "title": "Fetch Azure blob metadata only if the blob exists", "body": "<p>Looking at the documentation for the action: <a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/get-blob-properties\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/rest/api/storageservices/get-blob-properties</a>.</p>\n\n<p>It's basically a HEAD request to the blob, and there is no mention of If-Match etc. for headers.</p>\n\n<p>So I think the most optimal way of doing it is just calling FetchAttributesAsync.\nIf that causes a 404, then the blob did not exist.\nIt only does 1 HTTP request.</p>\n"}], "owner": {"reputation": 4233, "user_id": 233697, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0d65b679279e3b93008adacda512ce0a?s=128&d=identicon&r=PG&f=1", "display_name": "alwayslearning", "link": "https://stackoverflow.com/users/233697/alwayslearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 857, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547055639, "creation_date": 1547055363, "question_id": 54115575, "link": "https://stackoverflow.com/questions/54115575/fetch-azure-blob-metadata-only-if-the-blob-exists", "title": "Fetch Azure blob metadata only if the blob exists", "body": "<p>I need to fetch the metadata for an Azure blob if it exists and would like to achieve this with minimal REST calls (by the storage SDK to the storage service)</p>\n\n<p>I know I can do something like</p>\n\n<ul>\n<li><code>CloudBlockBlob.ExistsAsync()</code> and then </li>\n<li><code>CloudBlockBlob.FetchAttributesAsync()</code> if the blob exists</li>\n</ul>\n\n<p>I tried to combine these 2 calls into one</p>\n\n<ul>\n<li><code>CloudBlockBlob.FetchAttributesAsync(AccessCondition.GenerateIfExistsCondition(),new BlobRequestOptions(), new OperationContext());</code></li>\n</ul>\n\n<p>Docs on '<a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.windowsazure.storage.accesscondition.generateifexistscondition?view=azure-dotnet\" rel=\"nofollow noreferrer\">AccessCondition.GenerateIfExistsCondition()</a>' say - </p>\n\n<blockquote>\n  <p>Constructs an access condition such that an operation will be\n  performed only if the resource exists.</p>\n</blockquote>\n\n<p>but it still fails with a 404 not found. </p>\n\n<p>Any idea if what I want to achieve is even possible and what I might be doing wrong?</p>\n"}, {"tags": ["c#", "asp.net-web-api", "dependency-injection", "autofac"], "answers": [{"comments": [{"owner": {"reputation": 150628, "user_id": 264697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/53813b7dc989271bf45d1a047db31a1f?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/264697/steven"}, "reply_to_user": {"reputation": 352, "user_id": 872821, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40179311cf5167378c2fd9df9122e9a1?s=128&d=identicon&r=PG", "display_name": "Adrian Botor", "link": "https://stackoverflow.com/users/872821/adrian-botor"}, "edited": false, "score": 1, "creation_date": 1547193361, "post_id": 54125082, "comment_id": 95115820, "body": "That&#39; why Stack Overflow asks you to build a MCVE. It&#39;s not only for us to understand, but for yourself as well. Your new solution is this MCVE."}, {"owner": {"reputation": 352, "user_id": 872821, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40179311cf5167378c2fd9df9122e9a1?s=128&d=identicon&r=PG", "display_name": "Adrian Botor", "link": "https://stackoverflow.com/users/872821/adrian-botor"}, "edited": false, "score": 0, "creation_date": 1547196494, "post_id": 54125082, "comment_id": 95117160, "body": "I think I was in a premature euphoria. During the changes, I removed the inheritance from this class. I created a project on github at <a href=\"https://github.com/fruex/StackOverflowAutofac\" rel=\"nofollow noreferrer\">github.com/fruex/StackOverflowAutofac</a>, it generates the same error as described above.  I also prepared a test that directly generates an error (<a href=\"https://github.com/fruex/StackOverflowAutofac/blob/master/StackOverflowAutofacTest/RODControllerTests.cs\" rel=\"nofollow noreferrer\">github.com/fruex/StackOverflowAutofac/blob/master/&hellip;</a>). The URL for this controller is host:port/api/ro/convert"}], "tags": [], "owner": {"reputation": 150628, "user_id": 264697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/53813b7dc989271bf45d1a047db31a1f?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/264697/steven"}, "is_accepted": true, "score": 1, "last_activity_date": 1547110952, "creation_date": 1547110952, "answer_id": 54125082, "question_id": 54115550, "link": "https://stackoverflow.com/questions/54115550/autofac-registering-nested-generic-interfaces-and-classes/54125082#54125082", "title": "Autofac: Registering nested generic Interfaces and classes", "body": "<p>The exception states that Autofac looks for a type named <code>DPB</code> in the constructor of <code>ROD&lt;T&gt;</code>, but there is no registration for <code>DPB</code>. There is, however, a registration for <code>IDPB</code> that <em>maps</em> to <code>DPB</code>. Did you meant to let <code>ROD&lt;T&gt;</code> depend on <code>IDPB</code> instead?</p>\n"}], "owner": {"reputation": 352, "user_id": 872821, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40179311cf5167378c2fd9df9122e9a1?s=128&d=identicon&r=PG", "display_name": "Adrian Botor", "link": "https://stackoverflow.com/users/872821/adrian-botor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 54125082, "answer_count": 1, "score": 0, "last_activity_date": 1547205062, "creation_date": 1547055289, "last_edit_date": 1547205062, "question_id": 54115550, "link": "https://stackoverflow.com/questions/54115550/autofac-registering-nested-generic-interfaces-and-classes", "title": "Autofac: Registering nested generic Interfaces and classes", "body": "<p>I have a DI Autofac in my WebApi project. Autofac cannot resolve. I would like to achieve a situation when I can create new interfaces that implement `IDB to provide new subclass that overrides some methods. I also want to replace DPB with some inherited class in the future.</p>\n\n<p>Here is the code structure:</p>\n\n<pre><code>[RoutePrefix(\"api/ro\")]\npublic class RODController : ApiController\n{\n    public RODController(IFO fO, IROD&lt;IDPB&gt; rOD)\n    {\n        _fO = fO ?? throw new ArgumentNullException(nameof(fO));\n        _rOD = rOD ?? throw new ArgumentNullException(nameof(rOD));\n    }\n}\n\npublic interface IROD&lt;T&gt; : IDB&lt;T&gt; where T : IDPB\n{ }\n\npublic class ROD&lt;T&gt; : DB&lt;T&gt;, IROD&lt;IDPB&gt; where T : IDP\n{\n    public ROD(IFO fO, T dPB) : base(fO, dPB)\n    { }\n}\n\npublic interface IDB&lt;T&gt; : IDF where T : IDPB\n{ }\n\npublic abstract class DB&lt;T&gt; : IDB&lt;T&gt; where T : IDPB\n{\n    protected DB(IFO fO, T dPB)\n    {\n        _fO = fO ?? throw new ArgumentNullException(nameof(fO));\n        _dPB = dPB;\n    }\n}\n\npublic interface IDPB\n{ }\n\npublic class DPB : IDPB\n{ }\n</code></pre>\n\n<p>public IDF - provide only method to implement by IDB</p>\n\n<p>I have tried code below but with no success</p>\n\n<pre><code>builder.RegisterType&lt;FO&gt;().As&lt;IFO&gt;().InstancePerRequest();\nbuilder.RegisterGeneric(typeof(ROD&lt;&gt;))\n    .As(typeof(IROD&lt;&gt;)).InstancePerDependency;\nbuilder.RegisterGeneric(typeof(DB&lt;&gt;))\n    .As(typeof(ID&lt;&gt;)).InstancePerDependency();\nbuilder.RegisterType&lt;DPB&gt;().As&lt;IDPB&gt;().InstancePerDependency();\n\nbuilder.RegisterType&lt;ROD&lt;DPB&gt;&gt;()\n    .As&lt;IROD&lt;IDPB&gt;&gt;();\n\nbuilder.RegisterType&lt;DPB&gt;().As&lt;IDPB&gt;();\n</code></pre>\n\n<p>The following error is attached below.</p>\n\n<blockquote>\n  <p>None of the constructors found with\n  'Autofac.Core.Activators.Reflection.DefaultConstructorFinder' on type\n  'ROD`1[DPB]' can be invoked with the available services and\n  parameters:\n      Cannot resolve parameter 'DPB dPB' of constructor 'Void .ctor(IFO, DPB)'.</p>\n</blockquote>\n\n<p>I wonder because these mappings worked in Unity (ported project).</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>If I understand you correctly, my answer is yes.\nI would like to resolve any <code>ROD&lt;T&gt;</code> service of that that implement <code>IDPB</code>. Like in this scenario <code>ROD&lt;T&gt;</code> should be resolved by DPB coming from <code>builder.RegisterType&lt;ROD&lt;DPB&gt;&gt;().As&lt;IROD&lt;IDPB&gt;&gt;();</code></p>\n\n<p><code>IROD&lt;IDPB&gt;</code> is a simple way to resolve any dependent class from <code>IDB&lt;T&gt;</code> by different interface name (differentiate from resolving by name).</p>\n\n<p>I simples way in which I can explain my need is to resolve </p>\n\n<pre><code>builder.RegisterType&lt;ROD&lt;DPB&gt;&gt;().As&lt;IROD&lt;IDPB&gt;&gt;();\n</code></pre>\n\n<p>In <code>Unity &lt;package id=\"Unity\" version=\"4.0.1\" targetFramework=\"net461\" /&gt;</code> a few years late I wrote this that work with this abstract classes.</p>\n\n<pre><code>container.RegisterType&lt;IROD&lt;IDPB&gt;, ROD&lt;DPB&gt;&gt;()\n</code></pre>\n\n<p><strong>Edit 2</strong></p>\n\n<p>I created a project on github at <a href=\"https://github.com/fruex/StackOverflowAutofac\" rel=\"nofollow noreferrer\">https://github.com/fruex/StackOverflowAutofac</a>, it generates the same error as described above.</p>\n\n<p>I also prepared a test that directly generates an error (<a href=\"https://github.com/fruex/StackOverflowAutofac/blob/master/StackOverflowAutofacTest/RODControllerTests.cs\" rel=\"nofollow noreferrer\">https://github.com/fruex/StackOverflowAutofac/blob/master/StackOverflowAutofacTest/RODControllerTests.cs</a>).\nThe URL for this controller is host:port/api/ro/convert</p>\n\n<p><strong>Edit 3</strong></p>\n\n<p>I've added builder.RegisterType(); and it worked.</p>\n"}, {"tags": ["c#", "xamarin", "xamarin.forms"], "comments": [{"owner": {"reputation": 1064, "user_id": 2113715, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/845d9270b0406b8d9e341206ddd29c63?s=128&d=identicon&r=PG&f=1", "display_name": "Max Hampton", "link": "https://stackoverflow.com/users/2113715/max-hampton"}, "edited": false, "score": 0, "creation_date": 1547056136, "post_id": 54115536, "comment_id": 95064229, "body": "You could add a SwipeGestureRecognizer to the ListView&#39;s GestureRecognizers collection. Specify direction on the recognizer, and handle the recognizer&#39;s Swiped event. I am not sure if this will interfere with the ListView&#39;s scrolling behavior, though."}, {"owner": {"reputation": 434, "user_id": 2584335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1101354447/picture?type=large", "display_name": "Santiago Quiroga", "link": "https://stackoverflow.com/users/2584335/santiago-quiroga"}, "edited": false, "score": 0, "creation_date": 1573505016, "post_id": 54115536, "comment_id": 103896190, "body": "Have you tried Flutter?"}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "edited": false, "score": 0, "creation_date": 1547119016, "post_id": 54118020, "comment_id": 95086237, "body": "Thanks for the reply! I have tried something like this, but when I scroll up, the <code>StackLayout</code> is displayed and hidden repeatedly and very quickly, generating strange behavior for the user. I wrote console messages in <code>if</code> and <code>else</code>, and I realized that when I scroll up, the <code>ItemAppearing</code> event is triggered to elements that are already on the screen. I don&#39;t know how to avoid that behavior."}, {"owner": {"reputation": 5513, "user_id": 2913599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098f6fabc851434459585bb8170f950f?s=128&d=identicon&r=PG", "display_name": "jgoldberger - MSFT", "link": "https://stackoverflow.com/users/2913599/jgoldberger-msft"}, "reply_to_user": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "edited": false, "score": 0, "creation_date": 1547145211, "post_id": 54118020, "comment_id": 95101238, "body": "Might be best for you to post the code you are using to see if we can spot why. I did not experience that issue when I tested the above."}, {"owner": {"reputation": 5513, "user_id": 2913599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098f6fabc851434459585bb8170f950f?s=128&d=identicon&r=PG", "display_name": "jgoldberger - MSFT", "link": "https://stackoverflow.com/users/2913599/jgoldberger-msft"}, "reply_to_user": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "edited": false, "score": 0, "creation_date": 1547173042, "post_id": 54118020, "comment_id": 95110510, "body": "Ah, Actually I can reproduce the issue, but it only occurs when scrolling very slowly. Scrolling down very slowly, I may see the same item twice in a row, but scrolling up is where I see something more incorrect. The method is getting called both for the item appearing AND the item disappearing off the bottom of the screen (tested on iOS). Same happens on Android and is more pronounced where the method is called for every item in the list view. I will get a bug filed and report back."}, {"owner": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "edited": false, "score": 0, "creation_date": 1547173174, "post_id": 54118020, "comment_id": 95110534, "body": "That&#39;s exactly what I was talking about! Thanks."}, {"owner": {"reputation": 5513, "user_id": 2913599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098f6fabc851434459585bb8170f950f?s=128&d=identicon&r=PG", "display_name": "jgoldberger - MSFT", "link": "https://stackoverflow.com/users/2913599/jgoldberger-msft"}, "reply_to_user": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "edited": false, "score": 0, "creation_date": 1547173604, "post_id": 54118020, "comment_id": 95110619, "body": "Found a workaround that hopefully will work for you. Editing my answer."}, {"owner": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "edited": false, "score": 0, "creation_date": 1547174398, "post_id": 54118020, "comment_id": 95110800, "body": "Great job. I&#39;ll test it tomorrow at work, first thing in the morning."}, {"owner": {"reputation": 5513, "user_id": 2913599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098f6fabc851434459585bb8170f950f?s=128&d=identicon&r=PG", "display_name": "jgoldberger - MSFT", "link": "https://stackoverflow.com/users/2913599/jgoldberger-msft"}, "reply_to_user": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "edited": false, "score": 0, "creation_date": 1547174488, "post_id": 54118020, "comment_id": 95110817, "body": "I think I see the issue. It is because the ListView is resized when the stacklayout is hidden,i.e. the ListView gets one element longer, and on iOS this just causes one more item to appear, but on android the whole list view seems to be re-rendered so all of the cells are indeed appearing again. So not a bug, but you just need to set your layout so the ListView won&#39;t resize when you show and hide the stacklayout. Maybe use a grid to hold the ListView and the StackLayout so hiding the layout won&#39;t change ListView size."}, {"owner": {"reputation": 5513, "user_id": 2913599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098f6fabc851434459585bb8170f950f?s=128&d=identicon&r=PG", "display_name": "jgoldberger - MSFT", "link": "https://stackoverflow.com/users/2913599/jgoldberger-msft"}, "reply_to_user": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "edited": false, "score": 0, "creation_date": 1547174693, "post_id": 54118020, "comment_id": 95110851, "body": "Just tested, and I am correct. Not a bug, just make sure that the listView does not get resized. Updating answer."}, {"owner": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "edited": false, "score": 0, "creation_date": 1547174955, "post_id": 54118020, "comment_id": 95110900, "body": "I understand and yes, in my case the ListView is resized when the StackLayout appears."}], "tags": [], "owner": {"reputation": 5513, "user_id": 2913599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/098f6fabc851434459585bb8170f950f?s=128&d=identicon&r=PG", "display_name": "jgoldberger - MSFT", "link": "https://stackoverflow.com/users/2913599/jgoldberger-msft"}, "is_accepted": true, "score": 5, "last_activity_date": 1547175722, "last_edit_date": 1547175722, "creation_date": 1547066465, "answer_id": 54118020, "question_id": 54115536, "link": "https://stackoverflow.com/questions/54115536/how-to-show-and-hide-a-stacklayout-based-on-listview-scroll-direction-in-xamarin/54118020#54118020", "title": "How to show and hide a StackLayout based on ListView scroll direction in Xamarin.Forms?", "body": "<p>Xamarin.Forms <code>ListView</code> provides an <code>OnItemAppearing</code> event you can subscribe to. With this you can track your scroll direction by finding the index of the item that appeared and comparing it to the last item that appeared. Try something like this:</p>\n\n<pre><code>public partial class MainPage : ContentPage\n{\n    public ObservableCollection&lt;MyItemType&gt; Items { get; set; } = new ObservableCollection&lt;MyItemType&gt;();\n    int lastItemIndex;\n    int currentItemIndex;\n\n    public MainPage()\n    {\n        ...\n        listView.ItemAppearing += ListView_ItemAppearing;\n    }\n\n    void ListView_ItemAppearing(object sender, ItemVisibilityEventArgs e)\n    {\n        MyItemType item = e.Item as MyItemType;\n\n        currentItemIndex = Items.IndexOf(item);\n        if (currentItemIndex &gt; lastItemIndex)\n        {\n            stackLayout.IsVisible = false;\n        }\n        else\n        {\n            stackLayout.IsVisible = true;\n        }\n        lastItemIndex = currentItemIndex;\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Flickering is really due to <code>ListView</code> being resized when the <code>StackLayout</code> shows and hides, so make sure that the <code>ListView</code> is not getting resized. Perhaps put the ListView and the StackLayout in a grid so that when you show and hide the <code>StackLayout</code> the <code>ListView</code> does not get resized, e.g.:</p>\n\n<pre><code>&lt;Grid&gt;\n    &lt;Grid.RowDefinitions&gt;\n        &lt;RowDefinition Height=\"*\" /&gt;\n        &lt;RowDefinition Height=\"35\" /&gt;\n    &lt;/Grid.RowDefinitions&gt;\n    &lt;ListView x:Name=\"listView\"\n              ItemsSource=\"{Binding Items}\" \n              Grid.Row=\"0\"&gt;\n        &lt;ListView.ItemTemplate&gt;\n            ...\n        &lt;/ListView.ItemTemplate&gt;\n    &lt;/ListView&gt;\n    &lt;StackLayout x:Name=\"stackLayout\"\n                 Grid.Row=\"1\"&gt;\n        ...\n    &lt;/StackLayout&gt;\n&lt;/Grid&gt;\n</code></pre>\n\n<p>With the above, the flickering no longer occurs. </p>\n"}], "owner": {"reputation": 102, "user_id": 6938899, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441014135928234/picture?type=large", "display_name": "Juan Manuel Gentili", "link": "https://stackoverflow.com/users/6938899/juan-manuel-gentili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1329, "favorite_count": 0, "accepted_answer_id": 54118020, "answer_count": 1, "score": 2, "last_activity_date": 1547199421, "creation_date": 1547055222, "last_edit_date": 1547199421, "question_id": 54115536, "link": "https://stackoverflow.com/questions/54115536/how-to-show-and-hide-a-stacklayout-based-on-listview-scroll-direction-in-xamarin", "title": "How to show and hide a StackLayout based on ListView scroll direction in Xamarin.Forms?", "body": "<p>I have a screen with a <code>ListView</code> that shows a collection of comments. Also, I have a <code>StackLayout</code> overlapping the end of the <code>ListView</code>, which has an <code>Entry</code> and a <code>Button</code> to add a new comment.</p>\n\n<p>I want to hide/show this <code>StackLayout</code> depending on the <code>ListView</code> scrolling direction:</p>\n\n<ul>\n<li>If the user scrolls down -> hide the <code>StackLayout</code>.</li>\n<li>If the user scrolls up -> show the <code>StackLayout</code>.</li>\n</ul>\n\n<p>Anyone knows a way to accomplish that behavior?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c#", ".net", "console-application"], "comments": [{"owner": {"reputation": 388, "user_id": 6181153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adaccdd999ad2cf2b7bc72f66d1490a?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Mason", "link": "https://stackoverflow.com/users/6181153/jay-mason"}, "edited": false, "score": 0, "creation_date": 1547055253, "post_id": 54115524, "comment_id": 95063815, "body": "You can&#39;t have a dialog for a console application, thats a windows form application."}, {"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1547055270, "post_id": 54115524, "comment_id": 95063822, "body": "use <code>Console.ReadLine</code> to get text."}, {"owner": {"reputation": 388, "user_id": 6181153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adaccdd999ad2cf2b7bc72f66d1490a?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Mason", "link": "https://stackoverflow.com/users/6181153/jay-mason"}, "edited": false, "score": 0, "creation_date": 1547055288, "post_id": 54115524, "comment_id": 95063830, "body": "You can ask for user input through the console and accept a Yes/No text"}, {"owner": {"reputation": 17393, "user_id": 402022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36WSK.png?s=128&g=1", "display_name": "Theraot", "link": "https://stackoverflow.com/users/402022/theraot"}, "reply_to_user": {"reputation": 388, "user_id": 6181153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adaccdd999ad2cf2b7bc72f66d1490a?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Mason", "link": "https://stackoverflow.com/users/6181153/jay-mason"}, "edited": false, "score": 0, "creation_date": 1547055311, "post_id": 54115524, "comment_id": 95063845, "body": "@JayMason dialog, as in a text adventure where you talk with a character and have a dialog."}, {"owner": {"reputation": 1, "user_id": 10472437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G1JHz.jpg?s=128&g=1", "display_name": "F. Zimmermann", "link": "https://stackoverflow.com/users/10472437/f-zimmermann"}, "edited": false, "score": 0, "creation_date": 1547055352, "post_id": 54115524, "comment_id": 95063861, "body": "Thank you for your help."}, {"owner": {"reputation": 202711, "user_id": 1197518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cjKiP.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/1197518/steve"}, "edited": false, "score": 0, "creation_date": 1547055355, "post_id": 54115524, "comment_id": 95063863, "body": "Well, you can have a MessageBox shown in a console application, weird but possible <a href=\"https://stackoverflow.com/questions/29326042/show-message-box-in-net-console-application\" title=\"show message box in net console application\">stackoverflow.com/questions/29326042/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 813, "user_id": 5737571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AsuIvL39fi8/AAAAAAAAAAI/AAAAAAAAAGg/QAhDAPDTx9M/photo.jpg?sz=128", "display_name": "phucnh", "link": "https://stackoverflow.com/users/5737571/phucnh"}, "is_accepted": false, "score": 0, "last_activity_date": 1547055405, "creation_date": 1547055405, "answer_id": 54115584, "question_id": 54115524, "link": "https://stackoverflow.com/questions/54115524/how-can-i-create-yes-no-dialog-in-c-net-framework/54115584#54115584", "title": "How can I create Yes/No dialog in C# .NET Framework", "body": "<p>Here is my sample</p>\n\n<pre><code>do {\n        Console.Write(\"Do you accept? [y/n] \");\n        response = Console.ReadKey(false).Key;\n        if (response != ConsoleKey.Enter)\n            Console.WriteLine();\n    } while (response != ConsoleKey.Y &amp;&amp; response != ConsoleKey.N);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10472437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G1JHz.jpg?s=128&g=1", "display_name": "F. Zimmermann", "link": "https://stackoverflow.com/users/10472437/f-zimmermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "closed_date": 1547055708, "answer_count": 1, "score": -4, "last_activity_date": 1547055405, "creation_date": 1547055171, "last_edit_date": 1547055284, "question_id": 54115524, "link": "https://stackoverflow.com/questions/54115524/how-can-i-create-yes-no-dialog-in-c-net-framework", "closed_reason": "Duplicate", "title": "How can I create Yes/No dialog in C# .NET Framework", "body": "<p>So I tryed to make a simple text game.And I wanted to do Yes/No dialong I was trying to figure this out for 2 hours, but i didn't find any solution to my problem. I'm total beginner, so I don't know much about coding. </p>\n\n<h2>I was trying to achive it trough \"bool\" bot it wasnt the right option. Obviousli.</h2>\n\n<pre><code>using System;\n\nusing System.Collections.Generic;\n\nusing System.Linq;\n\nusing System.Text;\n\nusing System.Threading.Tasks;\n\nnamespace TEXTRPG\n\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n\n            Console.WriteLine(\"Greetings, stranger.\");\n\n            Console.ReadKey();\n\n            Console.WriteLine(\"I've came here to give you a quest.\");\n            Console.ReadKey();\n            Console.WriteLine(\"Do you accept?\");\n            //Yes/No\n            Console.ReadKey();\n</code></pre>\n"}, {"tags": ["c#", "wpf", "xaml", "localization", "resx"], "owner": {"reputation": 13, "user_id": 7029290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79e72246ef16f2eec75fac05d90ce148?s=128&d=identicon&r=PG&f=1", "display_name": "CS Student", "link": "https://stackoverflow.com/users/7029290/cs-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547054959, "creation_date": 1547054959, "question_id": 54115472, "link": "https://stackoverflow.com/questions/54115472/how-to-use-a-static-resource-resx-as-the-key-to-a-datatemplate-with-a-datatyp", "title": "How to use a static resource (.resx) as the Key to a DataTemplate with a DataType in a Resource Dictionary?", "body": "<p>I have a resource dictionary defined in my prism assembly that contains data templates. My goal is to have the <code>DataType=\"\"</code> attribute defined on them for type-safety while also storing my <code>x:Key=\"\"</code> strings in a separate <strong>.resx</strong> file for re-use. I found <a href=\"https://stackoverflow.com/questions/2919367/get-values-from-resx-files-in-xaml\">this stackOverflow answer</a> that discusses the use of using <code>{x:Static }</code> for accessing the text, with a much more verbose approach required to not have them be accessed in this manner. </p>\n\n<p>Unfortunately, it appears that using the method above methods together cause the <code>x:Key</code>to default to <code>nameof(DataType)</code>, which causes issues when multiple types are defined with different keys.</p>\n\n<p>Here is an example of the scenario:</p>\n\n<pre><code>&lt;ResourceDictionary \nxmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n                     xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n                     x:Class=\"Namespace.Class\"\n                     xmlns:resources=\"clr-namespace:Namespace\"&gt; \n\n    // Key is the value of the .resx string \"MyResxString\"\n    &lt;DataTemplate x:Key=\"{x:Static resources:Text.MyResxString}\"/&gt;\n\n    // Key is \"myClass\"\n    &lt;DataTemplate DataType=\"{x:Type myClass}\"/&gt;\n\n    // Key is \"example\"\n    &lt;DataTemplate x:Key=\"Example\" DataType=\"{x:Type myClass}\" /&gt;\n\n    // Key is unexpectedly \"myClass\" and my static string is ignored in the key attribute\n    &lt;DataTemplate x:Key=\"{x:Static resources:Text.MyResxString}\" \n       DataType=\"{x:Type myClass}\"/&gt;\n\n&lt;/ResourceDictionary&gt;\n</code></pre>\n\n<p>Is this an intended result from this binding or is something amiss here? Is there an alternative approach to doing this same thing? (I understand .resx isn't the best approach in the first place, but it's our standard)</p>\n"}, {"tags": ["c#", "razor", "asp.net-core"], "comments": [{"owner": {"reputation": 11009, "user_id": 1549450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SuCm4.jpg?s=128&g=1", "display_name": "Steve Greene", "link": "https://stackoverflow.com/users/1549450/steve-greene"}, "edited": false, "score": 0, "creation_date": 1547074491, "post_id": 54115460, "comment_id": 95071692, "body": "Lots of ways to handle. If you are trying to reuse the same view/partial, then make the fields readonly for the confirmation view. Otherwise, use hidden fields for the data you need back."}, {"owner": {"reputation": 595, "user_id": 1551691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/6188da477d1e7cbff633acc76150b7e0?s=128&d=identicon&r=PG", "display_name": "SxChoc", "link": "https://stackoverflow.com/users/1551691/sxchoc"}, "reply_to_user": {"reputation": 11009, "user_id": 1549450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SuCm4.jpg?s=128&g=1", "display_name": "Steve Greene", "link": "https://stackoverflow.com/users/1549450/steve-greene"}, "edited": false, "score": 0, "creation_date": 1547114804, "post_id": 54115460, "comment_id": 95083729, "body": "Ok thanks for that. Rather than have a load of hidden fields I think that I&#39;ll pop the model into a session variable on page load and repopulate it on the post. Thanks."}], "owner": {"reputation": 595, "user_id": 1551691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/6188da477d1e7cbff633acc76150b7e0?s=128&d=identicon&r=PG", "display_name": "SxChoc", "link": "https://stackoverflow.com/users/1551691/sxchoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547059148, "creation_date": 1547054926, "last_edit_date": 1547059148, "question_id": 54115460, "link": "https://stackoverflow.com/questions/54115460/display-and-preserve-model", "title": "Display and preserve model", "body": "<p>I have a two stage process:</p>\n\n<ol>\n<li><p>A user completes an application form which is stored in a db and an internal team validates the data at which stage the user is send an email link asking them to complete the application.</p></li>\n<li><p>A page is displayed to the user containing all of the information that they originally supplied with a confirmation button.</p></li>\n</ol>\n\n<p>My problem is on step 2, I'm populating a model on page load and displaying this information to the user but when the user submits the form the model being posted back is empty.</p>\n\n<p>If I use <code>@Html.TextBoxFor(m =&gt; m.name)</code> etc. then the model will still contain the value of the property but I all I need to do is display the values to them rather than give them the opportunity to amend them (they're actually not allowed to amend them at this stage).</p>\n\n<p>Is there any helper that I can use for this or is there no way around this?</p>\n\n<p>Thanks,\nC</p>\n"}, {"tags": ["c#", "xunit", "fluent-assertions"], "answers": [{"comments": [{"owner": {"reputation": 7742, "user_id": 3142139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kKrve.jpg?s=128&g=1", "display_name": "M.Hassan", "link": "https://stackoverflow.com/users/3142139/m-hassan"}, "edited": false, "score": 0, "creation_date": 1547057669, "post_id": 54115838, "comment_id": 95064870, "body": "Thanks @dennis Doomen for answer. Is there any change in the signature of the methods.?"}, {"owner": {"reputation": 4287, "user_id": 9073130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df7314c5520f5570313a2156d005f14?s=128&d=identicon&r=PG&f=1", "display_name": "Vidmantas Blazevicius", "link": "https://stackoverflow.com/users/9073130/vidmantas-blazevicius"}, "edited": false, "score": 0, "creation_date": 1547065386, "post_id": 54115838, "comment_id": 95068108, "body": "I also came yo conclusion that search replace was the simplest most efficient option."}, {"owner": {"reputation": 7742, "user_id": 3142139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kKrve.jpg?s=128&g=1", "display_name": "M.Hassan", "link": "https://stackoverflow.com/users/3142139/m-hassan"}, "reply_to_user": {"reputation": 4287, "user_id": 9073130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df7314c5520f5570313a2156d005f14?s=128&d=identicon&r=PG&f=1", "display_name": "Vidmantas Blazevicius", "link": "https://stackoverflow.com/users/9073130/vidmantas-blazevicius"}, "edited": false, "score": 0, "creation_date": 1547067156, "post_id": 54115838, "comment_id": 95068851, "body": "@VidmantasBlazevicius, i want to be sure that there is no change in the signature of the methods. Are you sure that the parameters of the methods are not changing?"}, {"owner": {"reputation": 6803, "user_id": 253961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c75b18c04d16ab75f92a876d186cbc44?s=128&d=identicon&r=PG", "display_name": "Dennis Doomen", "link": "https://stackoverflow.com/users/253961/dennis-doomen"}, "edited": false, "score": 0, "creation_date": 1547116694, "post_id": 54115838, "comment_id": 95084874, "body": "As you mentioned yourself, FA introduces quite a few breaking changes, most dominantly making sure that every API starts with <code>Should()</code>, But I&#39;ve converted about 20K tests using search replace. Since I&#39;m the author...."}], "tags": [], "owner": {"reputation": 6803, "user_id": 253961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c75b18c04d16ab75f92a876d186cbc44?s=128&d=identicon&r=PG", "display_name": "Dennis Doomen", "link": "https://stackoverflow.com/users/253961/dennis-doomen"}, "is_accepted": true, "score": 3, "last_activity_date": 1547056538, "creation_date": 1547056538, "answer_id": 54115838, "question_id": 54115410, "link": "https://stackoverflow.com/questions/54115410/migrating-xunit-project-with-fluentassertions-api-4-x-syntax-to-run-using-fluent/54115838#54115838", "title": "Migrating xunit project with FluentAssertions API 4.x syntax to run using FluentAssertions v5.x version", "body": "<p>I literally used the RegEx search-and-replace that Visual Studio offers to make this happen.</p>\n"}, {"tags": [], "owner": {"reputation": 7742, "user_id": 3142139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kKrve.jpg?s=128&g=1", "display_name": "M.Hassan", "link": "https://stackoverflow.com/users/3142139/m-hassan"}, "is_accepted": false, "score": 1, "last_activity_date": 1547074839, "creation_date": 1547074839, "answer_id": 54119669, "question_id": 54115410, "link": "https://stackoverflow.com/questions/54115410/migrating-xunit-project-with-fluentassertions-api-4-x-syntax-to-run-using-fluent/54119669#54119669", "title": "Migrating xunit project with FluentAssertions API 4.x syntax to run using FluentAssertions v5.x version", "body": "<p>This answer is based on the answer of <a href=\"https://stackoverflow.com/a/54115838/3142139\">@Dennis Doomen</a></p>\n\n<p>I used Find/Replace Regex in VS2017:</p>\n\n<pre><code>   Find:  Should(\\w+)\n   Replace: Should().$1\n</code></pre>\n\n<p>This regex replace expressions: </p>\n\n<p><code>ShouldBeEquivalentTo, ShouldAllBeEquivalentTo, \nShouldThrow and ShouldNotThrow</code></p>\n"}], "owner": {"reputation": 7742, "user_id": 3142139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kKrve.jpg?s=128&g=1", "display_name": "M.Hassan", "link": "https://stackoverflow.com/users/3142139/m-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 54115838, "answer_count": 2, "score": 2, "last_activity_date": 1547074839, "creation_date": 1547054721, "last_edit_date": 1547055171, "question_id": 54115410, "link": "https://stackoverflow.com/questions/54115410/migrating-xunit-project-with-fluentassertions-api-4-x-syntax-to-run-using-fluent", "title": "Migrating xunit project with FluentAssertions API 4.x syntax to run using FluentAssertions v5.x version", "body": "<p>I know that there is a breaking change from <a href=\"https://fluentassertions.com/\" rel=\"nofollow noreferrer\">FluentAssertions</a> v4.x to v5.x in <a href=\"https://www.continuousimprover.com/2018/02/fluent-assertions-50-best-unit-test.html\" rel=\"nofollow noreferrer\">Redefining equivalency</a>\nSo, I should modify:</p>\n\n<pre><code>        ShouldBeEquivalenTo ()\n</code></pre>\n\n<p>to </p>\n\n<pre><code>         Should().BeEquivalentTo()\n</code></pre>\n\n<p>and  a lot more has changed.</p>\n\n<p>I have xunit test project target net45 and start to migrate to multi-target netcoreapp2.1 and net45.(FluentAssertions v4.x isn't supporting netcoreapp2.x) </p>\n\n<p>The project has  many  test cases that use old syntax of 4.x and I want to minimize the changes in the test project and avoid(if i can) modifying to the new syntax.</p>\n\n<p>My options are:</p>\n\n<p>First: I should modify by hand the test cases to support the new syntax of v5.x</p>\n\n<p>Second: you may suggest be an alternative.</p>\n\n<p>Can you advice me to the best path to go.</p>\n"}, {"tags": ["c#", "entity-framework-6"], "comments": [{"owner": {"reputation": 2682, "user_id": 3924803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f28714791d302e011cf9bb6bfce1637?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Kilian", "link": "https://stackoverflow.com/users/3924803/hans-kilian"}, "edited": false, "score": 0, "creation_date": 1547054366, "post_id": 54115250, "comment_id": 95063363, "body": "Have you added a migration? <a href=\"http://www.entityframeworktutorial.net/code-first/code-based-migration-in-code-first.aspx\" rel=\"nofollow noreferrer\">entityframeworktutorial.net/code-first/&hellip;</a>"}, {"owner": {"reputation": 11009, "user_id": 1549450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SuCm4.jpg?s=128&g=1", "display_name": "Steve Greene", "link": "https://stackoverflow.com/users/1549450/steve-greene"}, "reply_to_user": {"reputation": 2682, "user_id": 3924803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f28714791d302e011cf9bb6bfce1637?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Kilian", "link": "https://stackoverflow.com/users/3924803/hans-kilian"}, "edited": false, "score": 0, "creation_date": 1547058182, "post_id": 54115250, "comment_id": 95065098, "body": "When you debug are you hitting the initializer code? BTW, I would move your initializer to a static constructor - see <a href=\"https://stackoverflow.com/questions/16727585/database-setinitializer-to-null-not-working-entity-framework-4-3-1-code-first#16727643\">here</a>. Double check your connect string then I would try removing the database and see if that works.  @HansKilian Migrations are not needed if he is using an initializer. In fact, in early development I prefer initializers and seeding over migrations."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1547157371, "post_id": 54115250, "comment_id": 95106461, "body": "Yes, the initializer gets hit. If I remove the database through management studio, the log in that EF is going to use disappears too, no? When I intialiity set it up, I created a blank database and created a user for EF to use. On the first run, it created the tables I had as classes at the time. But subsequent runs do nothing to the schema."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1547499803, "post_id": 54115250, "comment_id": 95206387, "body": "If I delete the database and run the program. The database is recreated, but I still see no Stations table or field called Location. The Name field is there though. Also, I can add a field of type string and call it Poop, and then that shows up. So, I assume it doesn&#39;t know how to create the a Field for the Vector3."}], "answers": [{"comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1547061326, "post_id": 54116306, "comment_id": 95066416, "body": "So is Table per Hierarchy the default and will the physical table always be named after the base? Because I haven&#39;t set up anything to dictate the inheritance strategy yet."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1547064473, "post_id": 54116306, "comment_id": 95067731, "body": "Also, I looked and the columns for station&#39;s fields are not present in the manufacturers table. I will update the screenshot to show this in the OP"}, {"owner": {"reputation": 188, "user_id": 2106283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e7b4d132ac06d215068627f3887025?s=128&d=identicon&r=PG", "display_name": "Amin Sahranavard", "link": "https://stackoverflow.com/users/2106283/amin-sahranavard"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1547067770, "post_id": 54116306, "comment_id": 95069109, "body": "You don\u2019t have to do anything special in Code First to enable TPH. It&#39;s the default inheritance mapping strategy"}], "tags": [], "owner": {"reputation": 188, "user_id": 2106283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e7b4d132ac06d215068627f3887025?s=128&d=identicon&r=PG", "display_name": "Amin Sahranavard", "link": "https://stackoverflow.com/users/2106283/amin-sahranavard"}, "is_accepted": false, "score": 0, "last_activity_date": 1547059190, "last_edit_date": 1547059190, "creation_date": 1547058846, "answer_id": 54116306, "question_id": 54115250, "link": "https://stackoverflow.com/questions/54115250/entity-framework-6-database-schema-is-not-updating/54116306#54116306", "title": "Entity Framework 6 - Database schema is not updating", "body": "<p>Your strategy for domain design to station and manufactor entity is Table per Hierarchy.so stations properties are now in manufactors table.\ngo to this <a href=\"https://weblogs.asp.net/manavi/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph\" rel=\"nofollow noreferrer\">link</a> for more information.</p>\n\n<p>if you you want Station entity have a seperate table must use of Table per Type \ngo to this <a href=\"https://weblogs.asp.net/manavi/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt\" rel=\"nofollow noreferrer\">link</a> for Table per Type</p>\n"}], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547064536, "creation_date": 1547054062, "last_edit_date": 1547064536, "question_id": 54115250, "link": "https://stackoverflow.com/questions/54115250/entity-framework-6-database-schema-is-not-updating", "title": "Entity Framework 6 - Database schema is not updating", "body": "<p>I am learning EF\nI wanted to play with the different types of inheritance using code first.</p>\n\n<p>I initially started off with a few classes and ran my application. I saw the database get created with all my classes represented as tables.</p>\n\n<p>However, when I add new classes or fields and run the application again, I do not see the changes in my database schema.</p>\n\n<p>I have used the \"DropCreateDatabaseAlways\", so I don't understand why my database is not being updated with the proper schema as I add fields and classes. Can someone explain what I am doing wrong?</p>\n\n<p>Initial Code:</p>\n\n<pre><code>namespace Domain\n{\n    public class Good\n    {\n        public int Id { get; set; }\n        public string Name { get; set; }\n        public double BaseValue { get; set; }\n    }\n\n    public class Manufacturer {\n        public int Id {get; set;}\n        public ICollection&lt;ManufacturingCapability&gt; ManufacturingCapabilities { get; set; }\n    }\n\n    public class ManufacturingCapability {\n        public int Id { get; set; }\n        public ICollection&lt;ManufacturingInput&gt; Inputs { get; set; }\n        public ICollection&lt;ManufacturingOutput&gt; Outputs { get; set; }\n        public TimeSpan CycleTime { get; set; }\n    }\n\n    public class ManufacturingInput {\n\n        public int Id { get; set; }\n        public Good Good { get; set; }\n        public uint Quantity { get; set; }\n    }\n\n    public class ManufacturingOutput {\n        public int Id { get; set; }\n        public Good Good { get; set; }\n        public uint Quantity { get; set; }\n    }\n\n    public class ManufacturingDbContext :DbContext {\n\n        public DbSet&lt;Good&gt; Goods { get; set; }\n        public DbSet&lt;Manufacturer&gt; Manufacturers { get; set; }\n\n        public ManufacturingDbContext() : base(\"name=EFLearnConnectionString\") {\n            Database.SetInitializer&lt;ManufacturingDbContext&gt;(new DropCreateDatabaseAlways&lt;ManufacturingDbContext&gt;());\n        }\n    }\n}\n\nnamespace EFLearning {\n    class Program {\n        static void Main(string[] args) {\n            using (var manufacturingDbContext = new ManufacturingDbContext()) {\n                var good = new Good() { Name = \"Water\" };\n\n                manufacturingDbContext.Goods.Add(good);\n                manufacturingDbContext.SaveChanges();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Database Tables in Management Studio after running:\n<a href=\"https://i.stack.imgur.com/H4YDP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H4YDP.png\" alt=\"enter image description here\"></a></p>\n\n<p>Added code:</p>\n\n<pre><code>public class Station : Manufacturer {\n    public string Name { get; set; }\n    public Vector3 Location { get; set; }\n}\n</code></pre>\n\n<p>and I added this to context:</p>\n\n<pre><code>public DbSet&lt;Station&gt; Stations { get; set; }\n</code></pre>\n\n<p>Database Tables in Management Studio after running:\n<a href=\"https://i.stack.imgur.com/kJKGJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kJKGJ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "aforge"], "comments": [{"owner": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 0, "creation_date": 1547054369, "post_id": 54115205, "comment_id": 95063368, "body": "<a href=\"https://stackoverflow.com/q/17313285/1070452\">stackoverflow.com/q/17313285/1070452</a>"}, {"owner": {"reputation": 71, "user_id": 4574404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4952e74379e591fc77026095e52add17?s=128&d=identicon&r=PG&f=1", "display_name": "brandon", "link": "https://stackoverflow.com/users/4574404/brandon"}, "reply_to_user": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 0, "creation_date": 1547057905, "post_id": 54115205, "comment_id": 95064968, "body": "@WelcomeOverFlow if you read my post you will see I tried that and it did not work for what I am trying to do. When I do that I lose all my zoom in."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1547059534, "post_id": 54115205, "comment_id": 95065675, "body": "You&#39;re always drawing the image with its original dimensions and location (<code>videoSourcePlayer.*</code>). Why would you expect this to be zoomed or panned?"}, {"owner": {"reputation": 4573, "user_id": 395685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/506a37c8660a6faa6382086e4a538811?s=128&d=identicon&r=PG", "display_name": "Nyerguds", "link": "https://stackoverflow.com/users/395685/nyerguds"}, "edited": false, "score": 0, "creation_date": 1547068589, "post_id": 54115205, "comment_id": 95069487, "body": "@brandon Your code is strange; you are painting an image onto itself. Why? Can&#39;t you just assign the <code>videoSourcePlayer.GetCurrentVideoFrame()</code> to the picture box directly? And why does the function <i>return</i> the bitmap when the job of assigning it to the picture box is already completed?"}, {"owner": {"reputation": 4573, "user_id": 395685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/506a37c8660a6faa6382086e4a538811?s=128&d=identicon&r=PG", "display_name": "Nyerguds", "link": "https://stackoverflow.com/users/395685/nyerguds"}, "edited": false, "score": 0, "creation_date": 1547069371, "post_id": 54115205, "comment_id": 95069786, "body": "By the way... the reason you can&#39;t make a <code>Graphics</code> object for it is that the <code>Graphics</code> class paints <i>colours</i>. The pixel data of an indexed image are <i>not colours</i>; they are references to indices on a limited (256 colours or less) colour palette. The two systems are simply incompatible."}, {"owner": {"reputation": 71, "user_id": 4574404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4952e74379e591fc77026095e52add17?s=128&d=identicon&r=PG&f=1", "display_name": "brandon", "link": "https://stackoverflow.com/users/4574404/brandon"}, "reply_to_user": {"reputation": 4573, "user_id": 395685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/506a37c8660a6faa6382086e4a538811?s=128&d=identicon&r=PG", "display_name": "Nyerguds", "link": "https://stackoverflow.com/users/395685/nyerguds"}, "edited": false, "score": 0, "creation_date": 1547074450, "post_id": 54115205, "comment_id": 95071679, "body": "@Nyerguds, I am taking CurrentVideoFrame and zoom in to it. That is what  I cannot just you CurrentVideoFrame. The user can zoom in to it or out or pan."}, {"owner": {"reputation": 71, "user_id": 4574404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4952e74379e591fc77026095e52add17?s=128&d=identicon&r=PG&f=1", "display_name": "brandon", "link": "https://stackoverflow.com/users/4574404/brandon"}, "edited": false, "score": 0, "creation_date": 1547074580, "post_id": 54115205, "comment_id": 95071709, "body": "@ Nyerguds, if they are incompatible what should it do?"}, {"owner": {"reputation": 71, "user_id": 4574404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4952e74379e591fc77026095e52add17?s=128&d=identicon&r=PG&f=1", "display_name": "brandon", "link": "https://stackoverflow.com/users/4574404/brandon"}, "edited": false, "score": 0, "creation_date": 1547074645, "post_id": 54115205, "comment_id": 95071734, "body": "@ 3Dave the zoom and pan are in the  g.DrawImage(currentFrame, videoSourcePlayer.imagex, videoSourcePlayer.imagey, videoSourcePlayer.imgWidth, videoSourcePlayer.imgHeight);"}, {"owner": {"reputation": 71, "user_id": 4574404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4952e74379e591fc77026095e52add17?s=128&d=identicon&r=PG&f=1", "display_name": "brandon", "link": "https://stackoverflow.com/users/4574404/brandon"}, "edited": false, "score": 0, "creation_date": 1547096247, "post_id": 54115205, "comment_id": 95076165, "body": "does anyone know what i should do ?"}, {"owner": {"reputation": 4573, "user_id": 395685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/506a37c8660a6faa6382086e4a538811?s=128&d=identicon&r=PG", "display_name": "Nyerguds", "link": "https://stackoverflow.com/users/395685/nyerguds"}, "edited": false, "score": 0, "creation_date": 1547134702, "post_id": 54115205, "comment_id": 95095456, "body": "Try simply changing the first line in your original code to <code>Bitmap currentFrame = new Bitmap(videoSourcePlayer.GetCurrentVideoFrame());</code>; that should convert it to high-colour. It&#39;s still advised to put the graphics handling in a <code>using</code> block though; these things <i>need</i> to be disposed afterwards. Likewise, you should dispose the old image that was in pictureBox1.Image after replacing it."}], "owner": {"reputation": 71, "user_id": 4574404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4952e74379e591fc77026095e52add17?s=128&d=identicon&r=PG&f=1", "display_name": "brandon", "link": "https://stackoverflow.com/users/4574404/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547053888, "creation_date": 1547053888, "question_id": 54115205, "link": "https://stackoverflow.com/questions/54115205/graphics-with-indexed-pixel-format-run-time-error", "title": "Graphics with indexed pixel format run time error", "body": "<p>ok so I have two video cameras that my software is using. The 1st is a computer webcam. when I connect to and run this code:</p>\n\n<pre><code>        Bitmap currentFrame = videoSourcePlayer.GetCurrentVideoFrame();\n        Graphics g = Graphics.FromImage(currentFrame);\n\n        g.DrawImage(currentFrame, videoSourcePlayer.imagex, videoSourcePlayer.imagey, videoSourcePlayer.imgWidth, videoSourcePlayer.imgHeight);\n        pictureBox1.Image = currentFrame;\n        return currentFrame;\n</code></pre>\n\n<p>the webcam works fine. I am able to copy my zoom and pan, just fine.</p>\n\n<p>but when I connect to the other cam and run the same code, I get this error :\nHResult=0x80131500\n  Message=A Graphics object cannot be created from an image that has an indexed pixel format.\n  Source=System.Drawing\n  StackTrace:\n   at System.Drawing.Graphics.FromImage(Image image)</p>\n\n<p>so I tried this code :</p>\n\n<pre><code>private Bitmap CaptureScreen()\n    {\n        Bitmap originalBmp = videoSourcePlayer.GetCurrentVideoFrame();\n\n        // Create a blank bitmap with the same dimensions\n        Bitmap tempBitmap = new Bitmap(originalBmp.Width, originalBmp.Height);\n\n        // From this bitmap, the graphics can be obtained, because it has the right PixelFormat\n        using (Graphics g = Graphics.FromImage(tempBitmap))\n        {\n\n            g.DrawImage(originalBmp, videoSourcePlayer.imagex, videoSourcePlayer.imagey, videoSourcePlayer.imgWidth, videoSourcePlayer.imgHeight);\n            pictureBox1.Image = originalBmp;\n            return originalBmp;\n        }\n    }\n</code></pre>\n\n<p>that code fix the runtime error, I get but is get rid of my zoom and pan.\nI do not know why?\nbut I do have a zoom and pan function that works with the 1st code block but not with the second.</p>\n\n<p>how can I fix the A Graphics object cannot be created from an image that has an indexed pixel format runtime error but keep my zoom and pan?</p>\n"}, {"tags": ["c#", "wpf"], "comments": [{"owner": {"reputation": 109436, "user_id": 1136211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd80cd7d5927902f3af471fa0353836?s=128&d=identicon&r=PG", "display_name": "Clemens", "link": "https://stackoverflow.com/users/1136211/clemens"}, "edited": false, "score": 0, "creation_date": 1547054649, "post_id": 54115069, "comment_id": 95063516, "body": "Try to <code>Freeze()</code> the BitmapImage before sending. Are you sure that PostAsJsonAsync is able to serialize it? Also note that the method should be awaited: <code>var result = await PostAsJsonAsync(...)</code>. Your method should then be declared as <code>public async Task&lt;bool&gt; SendImage(BitmapImage bmp)</code> and also be awaited."}, {"owner": {"reputation": 109436, "user_id": 1136211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd80cd7d5927902f3af471fa0353836?s=128&d=identicon&r=PG", "display_name": "Clemens", "link": "https://stackoverflow.com/users/1136211/clemens"}, "edited": false, "score": 0, "creation_date": 1547055036, "post_id": 54115069, "comment_id": 95063713, "body": "Just in case, see here for how to convert a BitmapImage to a byte array before posting: <a href=\"https://stackoverflow.com/a/29384523/1136211\">stackoverflow.com/a/29384523/1136211</a>"}, {"owner": {"reputation": 25, "user_id": 9439501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XBi9B.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/9439501/alex"}, "reply_to_user": {"reputation": 109436, "user_id": 1136211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd80cd7d5927902f3af471fa0353836?s=128&d=identicon&r=PG", "display_name": "Clemens", "link": "https://stackoverflow.com/users/1136211/clemens"}, "edited": false, "score": 0, "creation_date": 1547055643, "post_id": 54115069, "comment_id": 95064014, "body": "@Clemens Thanks for the reply. I gave up on doing it now as it&#39;s not mandatory for the app. I&#39;ll do on a later stage and write here how did it went with those tweaks of yours. Cheers!"}, {"owner": {"reputation": 8584, "user_id": 426185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed64e54f32c14d0f11e4e91009703322?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/426185/andy"}, "edited": false, "score": 0, "creation_date": 1547062435, "post_id": 54115069, "comment_id": 95066890, "body": "Does it really have to be json you send it as? <a href=\"https://stackoverflow.com/questions/19151793/uploading-a-file-from-a-wpf-application-to-a-web-api\" title=\"uploading a file from a wpf application to a web api\">stackoverflow.com/questions/19151793/&hellip;</a>   There&#39;s also uploadfileasync btw <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient.uploadfileasync?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/dotnet/api/&hellip;</a>"}], "owner": {"reputation": 25, "user_id": 9439501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XBi9B.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/9439501/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547053344, "creation_date": 1547053344, "question_id": 54115069, "link": "https://stackoverflow.com/questions/54115069/sending-image-from-wpf-to-web-api-thread-error", "title": "Sending Image from WPF to Web API, thread error", "body": "<p>So, I want to send the image from my WPF app to the Web API controller. When I get the image as BitmapImage and try to send it, I get the error \"the calling thread cannot access this object because a different thread owns it\". I don't see how am I modifying UI and why do I get the error. Here's the code:</p>\n\n<p>WPF code:</p>\n\n<pre><code>private void BtnSendImage_Click(object sender, RoutedEventArgs e)\n    {\n        OpenFileDialog ofd = new OpenFileDialog();\n        ofd.InitialDirectory = Environment.SpecialFolder.MyDocuments.ToString();\n        BitmapImage slika = null;\n\n        if (ofd.ShowDialog() == true)\n        {\n            odabranaSlika = ofd.FileName;\n            Uri adresa = new Uri(odabranaSlika, UriKind.Absolute);\n            slika = new BitmapImage(adresa);\n            ItemDAL idal = new ItemDAL();\n\n            if (idal.SendImage(slika))\n            {\n                MessageBox.Show(\"Yay!\");\n            }\n            else\n            {\n                MessageBox.Show(\"Awwww\");\n            }\n        }\n    }\n</code></pre>\n\n<p>Method SendImage from the ItemDAL class (the code stops at postResult.Wait() part):</p>\n\n<pre><code>public bool SendImage(BitmapImage bmp)\n    {\n        using (var client = new HttpClient())\n        {\n            client.BaseAddress = new Uri(\"http://localhost:52407/\");\n            var postResult = client.PostAsJsonAsync&lt;BitmapImage&gt;(\"api/values/postimage\", bmp);\n            postResult.Wait();\n\n            var result = postResult.Result;\n            if (result.IsSuccessStatusCode)\n            {\n                return true;\n            }\n            else\n            {\n                return false;\n            }\n        }\n    }\n</code></pre>\n\n<p>What am I doing wrong? I know I'm not suppose to modify UI, unless it's from the main thread, bot how is this doing anything to the UI?</p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 94444, "user_id": 1663001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NBllQ.jpg?s=128&g=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/1663001/davidg"}, "edited": false, "score": 6, "creation_date": 1547053471, "post_id": 54115047, "comment_id": 95062880, "body": "What makes you think it&#39;s not changing?"}, {"owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "edited": false, "score": 4, "creation_date": 1547053752, "post_id": 54115047, "comment_id": 95063030, "body": "this doesn&#39;t repro for me; it works fine. Are you sure that in the <i>real</i> code, you aren&#39;t setting a <i>field</i> of <code>A</code>? I would expect <i>that</i> to fail in the way you suggest. Can you post something that actually shows the behaviour you&#39;re seeing?"}], "answers": [{"tags": [], "owner": {"reputation": 921791, "user_id": 23354, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrVFH.png?s=128&g=1", "display_name": "Marc Gravell", "link": "https://stackoverflow.com/users/23354/marc-gravell"}, "is_accepted": true, "score": 4, "last_activity_date": 1547054071, "creation_date": 1547054071, "answer_id": 54115252, "question_id": 54115047, "link": "https://stackoverflow.com/questions/54115047/unexpected-behavior-of-a-value-type-field-marked-readonly/54115252#54115252", "title": "Unexpected behavior of a value-type field marked readonly", "body": "<p>What you are reporting sounds like in your <em>real</em> code you're actually setting a <em>field</em> of <code>A</code> (the code in the question doesn't behave in the way claimed). For example, <em>this code</em> would fail in this way:</p>\n\n<pre><code>class Program\n{\n    static void Main(string[] args)\n    {\n        var b = new B();\n        b.Set(\"abc\");\n        // writes \"init\" if readonly left in, \"abc\" otherwise\n        Console.WriteLine(b.ToString());\n    }\n}\nstruct A\n{\n    string _s;\n    public A(int cap) =&gt; _s = \"init\";\n    public void Set(string s) =&gt; _s = s;\n    public override string ToString() =&gt; _s;\n}\n\nclass B\n{\n    readonly A a = new A(5);\n    public void Set(string s) =&gt; a.Set(s);\n    public override string ToString() =&gt; a.ToString();\n}\n</code></pre>\n\n<p>The reason for this is that with the <code>readonly</code>, the call to <code>a.Set()</code> is really:</p>\n\n<pre><code>var tmp = a;\ntmp.Set(); // operates on a clone\n</code></pre>\n\n<p>which is precisely <em>because</em> it wants to guarantee the <code>readonly</code> part of the field declaration - as otherwise the call to <code>Set()</code> has had the side-effect of changing the value of the readonly field. To avoid this in the simplest way: avoid mutable structs! In recent C# versions (7.2+), you can declare structs as <code>readonly struct</code>, which will help you enforce this (it won't compile if you try to do anything dangerous <em>and</em> it allows the compiler to remove this extra clone step, and to use a more efficient implementation of the <code>in</code> (\"ref readonly\") modifier).</p>\n"}], "owner": {"reputation": 53, "user_id": 10045438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_gLihbCflN4/AAAAAAAAAAI/AAAAAAAAAjI/RAK2q8ccDek/photo.jpg?sz=128", "display_name": "Office Batman", "link": "https://stackoverflow.com/users/10045438/office-batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 54115252, "answer_count": 1, "score": 2, "last_activity_date": 1547054071, "creation_date": 1547053263, "last_edit_date": 1547053418, "question_id": 54115047, "link": "https://stackoverflow.com/questions/54115047/unexpected-behavior-of-a-value-type-field-marked-readonly", "title": "Unexpected behavior of a value-type field marked readonly", "body": "<p>I have a similar situation to this one:</p>\n\n<pre><code>struct A\n{\n    string[] strs;\n\n    public A(int cap) =&gt; strs = new string[cap];\n\n    public void Set(int i, string s) =&gt; strs[i] = s;\n}\n\nclass B\n{\n    readonly A a = new A(5);\n\n    public void Set(int i, string s) =&gt; a.Set(i, s);\n}\n</code></pre>\n\n<p>and I'm calling the <code>Set</code> method on class <code>B</code>, but the array in <code>a</code> is not changing, however, if I remove the <code>readonly</code> keyword the method works as intended and the array gets changed.</p>\n\n<p>I realize <code>A</code> should be a class and not a struct, but I mainly just want to understand why this happens.</p>\n"}, {"tags": ["c#", "gzip", "azure-service-fabric"], "comments": [{"owner": {"reputation": 1999, "user_id": 4694757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UOLpM.png?s=128&g=1", "display_name": "i_thamary", "link": "https://stackoverflow.com/users/4694757/i-thamary"}, "edited": false, "score": 0, "creation_date": 1547053852, "post_id": 54115014, "comment_id": 95063094, "body": "See this:<a href=\"https://stackoverflow.com/questions/2775261/how-to-enable-gzip-http-compression-on-windows-azure-dynamic-content\" title=\"how to enable gzip http compression on windows azure dynamic content\">stackoverflow.com/questions/2775261/&hellip;</a>"}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1547054098, "post_id": 54115014, "comment_id": 95063229, "body": "The c# code can read the configuration settings and determine which responses are using GZIP."}, {"owner": {"reputation": 10811, "user_id": 5946937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a686518049226b2b0f0bbb1f334978e?s=128&d=identicon&r=PG&f=1", "display_name": "LoekD", "link": "https://stackoverflow.com/users/5946937/loekd"}, "edited": false, "score": 0, "creation_date": 1547100025, "post_id": 54115014, "comment_id": 95077146, "body": "Does this doc about urlcompression help maybe? <a href=\"https://docs.microsoft.com/en-us/iis/configuration/system.webserver/urlcompression\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/iis/configuration/system.webserver/&zwnj;&#8203;&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1999, "user_id": 4694757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UOLpM.png?s=128&g=1", "display_name": "i_thamary", "link": "https://stackoverflow.com/users/4694757/i-thamary"}, "is_accepted": false, "score": 0, "last_activity_date": 1547055032, "last_edit_date": 1547055032, "creation_date": 1547054658, "answer_id": 54115395, "question_id": 54115014, "link": "https://stackoverflow.com/questions/54115014/enabling-gzip-compression-per-endpoint-in-service-fabric-service/54115395#54115395", "title": "Enabling gzip compression per-endpoint in Service Fabric Service", "body": "<p>Here is the process;</p>\n\n<ol>\n<li>Edit your ServiceDefinition.csdef file to contain this in the WebRole tag:</li>\n</ol>\n\n<blockquote>\n  <p><code>&lt;Startup&gt;\n    &lt;Task commandLine=\"EnableCompression.cmd\" executionContext=\"elevated\" \n     taskType=\"simple\"&gt;&lt;/Task&gt;\n  &lt;/Startup&gt;</code></p>\n</blockquote>\n\n<ol start=\"2\">\n<li><p>In your web-role, create a text file and save it as \u201cEnableCompression.cmd\u201d</p></li>\n<li><p>EnableCompression.cmd should contain this:</p>\n\n<p><code>%windir%\\system32\\inetsrv\\appcmd set config /section:urlCompression /doDynamicCompression:True /commit:apphost\n    %windir%\\system32\\inetsrv\\appcmd set config  -section:system.webServer/httpCompression /+\"dynamicTypes.[mimeType='application/json; charset=utf-8',enabled='True']\" /commit:apphost</code></p></li>\n</ol>\n\n<p>This simple process will enable dynamic compression for the json returned by the web-role in Azure. </p>\n\n<p>Source:<a href=\"https://cloudmonix.com/blog/how-to-enable-gzip-http-compression-on-windows-azure-endpoint/\" rel=\"nofollow noreferrer\">https://cloudmonix.com/blog/how-to-enable-gzip-http-compression-on-windows-azure-endpoint/</a></p>\n\n<p>You can see also these:</p>\n\n<p><a href=\"https://basecamp.kony.com/s/question/0D56A00000RbtbBSAR/how-to-enable-gzip-compression-in-mobile-fabric\" rel=\"nofollow noreferrer\">https://basecamp.kony.com/s/question/0D56A00000RbtbBSAR/how-to-enable-gzip-compression-in-mobile-fabric</a></p>\n\n<p><a href=\"https://code.i-harness.com/en/q/2a58dd\" rel=\"nofollow noreferrer\">https://code.i-harness.com/en/q/2a58dd</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2775261/how-to-enable-gzip-http-compression-on-windows-azure-dynamic-content\">How to enable gzip HTTP compression on Windows Azure dynamic content</a></p>\n"}], "owner": {"reputation": 2359, "user_id": 3716049, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8a4ddc2596b218b0bc7b3814ffa46836?s=128&d=identicon&r=PG&f=1", "display_name": "User 5842", "link": "https://stackoverflow.com/users/3716049/user-5842"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547055032, "creation_date": 1547053160, "question_id": 54115014, "link": "https://stackoverflow.com/questions/54115014/enabling-gzip-compression-per-endpoint-in-service-fabric-service", "title": "Enabling gzip compression per-endpoint in Service Fabric Service", "body": "<p>Our application uses Service Fabric as its backbone and our microservices are Service Fabric Services. After running some auditing using Lighthouse on the front-end, I saw that the recommendation to <code>enable text based compression</code> was listed and began investigating how I can add <code>gzip</code> to some of my responses.</p>\n\n<p>For our Node server, I simply added the <code>compression</code> middleware and used it.</p>\n\n<p>For other services, I went inside of the <code>Web.config</code> and added the following:</p>\n\n<pre><code>&lt;urlCompression doStaticCompression=\"true\" doDynamicCompression=\"true\"/&gt;\n\n&lt;httpCompression&gt;\n  &lt;dynamicTypes&gt;\n    &lt;clear /&gt;\n    &lt;add enabled=\"true\"  mimeType=\"application/json\"/&gt;\n  &lt;/dynamicTypes&gt;\n  &lt;staticTypes&gt;\n    &lt;clear /&gt;\n    &lt;add enabled=\"true\"  mimeType=\"application/json\"/&gt;\n  &lt;/staticTypes&gt;\n&lt;/httpCompression&gt;\n</code></pre>\n\n<p>Upon reloading my web app, I did notice that the responses were now coming in compressed, but I do not want to necessarily compress all responses.</p>\n\n<p>When I setup any of my endpoints, I follow the following format:</p>\n\n<pre><code>[HttpGet]\n[Route(\"{customer}/items\")]\n[Authorize]\npublic Task&lt;ItemsModel&gt; Get()\n{\n    return _itemsService.GetAsync();\n}\n</code></pre>\n\n<p>Is there a way to enable compression on a per-endpoint basis instead of per-service?</p>\n"}, {"tags": ["c#", "uwp-xaml"], "comments": [{"owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1547052957, "post_id": 54114911, "comment_id": 95062552, "body": "You are missing a whitespace, change &#180;= tbl_607_order_details.FK_ID_order&quot; +&#180; to &#180;= tbl_607_order_details.FK_ID_order &quot; + &#180;"}, {"owner": {"reputation": 4214, "user_id": 5394572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H9Ql7.png?s=128&g=1", "display_name": "madreflection", "link": "https://stackoverflow.com/users/5394572/madreflection"}, "edited": false, "score": 0, "creation_date": 1547057794, "post_id": 54114911, "comment_id": 95064918, "body": "I suggest using a single verbatim string (@&quot;&quot;) instead of this mess of contatenation. Typographical errors like this will be far less likely to occur. Also, this is vulnerable to SQL injection. Look into parameterizing the query."}], "answers": [{"comments": [{"owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "reply_to_user": {"reputation": 37, "user_id": 10890888, "user_type": "registered", "profile_image": "https://graph.facebook.com/713384335714582/picture?type=large", "display_name": "Lyzzie", "link": "https://stackoverflow.com/users/10890888/lyzzie"}, "edited": false, "score": 0, "creation_date": 1547054376, "post_id": 54115059, "comment_id": 95063373, "body": "Maybe it is just the SO formatting, but it looks like you are missing a space before &quot;FROM&quot; as well"}, {"owner": {"reputation": 37, "user_id": 10890888, "user_type": "registered", "profile_image": "https://graph.facebook.com/713384335714582/picture?type=large", "display_name": "Lyzzie", "link": "https://stackoverflow.com/users/10890888/lyzzie"}, "edited": false, "score": 0, "creation_date": 1547054671, "post_id": 54115059, "comment_id": 95063529, "body": "well seen! All stupid but I spent a good half day ... The worst is that the query on SQL server administration worked without problems!"}], "tags": [], "owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "is_accepted": true, "score": 0, "last_activity_date": 1547053309, "creation_date": 1547053309, "answer_id": 54115059, "question_id": 54114911, "link": "https://stackoverflow.com/questions/54114911/error-with-sql-server-request-using-data-sqlclient-in-uwp/54115059#54115059", "title": "Error with SQL Server request using data.sqlclient in UWP", "body": "<p>Add the missing space by changing </p>\n\n<pre><code>\"SELECT \" +\n\n                    \"tbl_607_gaz_type.gaz_type,\" +\n                    \"tbl_607_theorical_content.theorical_content,\" +\n                    \"tbl_607_made_tolerance.made_tolerance,\" +\n                    \"tbl_607_order_details.gaz_lifetime,\" +\n                    \"tbl_607_gaz.gaz_comments,\" +\n                    \"tbl_607_order_details.FK_ID_order,\" +\n                    \"tbl_607_order_details.poste_number, \" +\n                    \"tbl_607_order.order_number\" +\n\n                \"FROM \" +\n                    \"tbl_607_provider join tbl_607_order on tbl_607_provider.ID = tbl_607_order.FK_ID_provider \" +\n                    \"join tbl_607_order_details on tbl_607_order.ID = tbl_607_order_details.FK_ID_order\" +\n                    \"join tbl_607_gaz on tbl_607_order_details.FK_ID_gaz = tbl_607_gaz.ID \" +\n                    \"join tbl_607_gaz_type on tbl_607_gaz.FK_ID_gaz_type = tbl_607_gaz_type.ID \" +\n                    \"join tbl_607_made_tolerance on tbl_607_gaz.FK_ID_made_tolerence = tbl_607_made_tolerance.ID \" +\n                    \"join tbl_607_theorical_content on tbl_607_gaz.FK_ID_theorical_content = tbl_607_theorical_content.ID \" +\n\n            \"WHERE \" +\n                \"tbl_607_order.order_number\" + \" LIKE \" + \"'%\" + selectedOrder + \"%'\";\n</code></pre>\n\n<p>to </p>\n\n<pre><code>\"SELECT \" +\n\n                    \"tbl_607_gaz_type.gaz_type,\" +\n                    \"tbl_607_theorical_content.theorical_content,\" +\n                    \"tbl_607_made_tolerance.made_tolerance,\" +\n                    \"tbl_607_order_details.gaz_lifetime,\" +\n                    \"tbl_607_gaz.gaz_comments,\" +\n                    \"tbl_607_order_details.FK_ID_order,\" +\n                    \"tbl_607_order_details.poste_number, \" +\n                    \"tbl_607_order.order_number\" +\n\n                \"FROM \" +\n                    \"tbl_607_provider join tbl_607_order on tbl_607_provider.ID = tbl_607_order.FK_ID_provider \" +\n                    \"join tbl_607_order_details on tbl_607_order.ID = tbl_607_order_details.FK_ID_order \" + // note the missing space added here\n                    \"join tbl_607_gaz on tbl_607_order_details.FK_ID_gaz = tbl_607_gaz.ID \" +\n                    \"join tbl_607_gaz_type on tbl_607_gaz.FK_ID_gaz_type = tbl_607_gaz_type.ID \" +\n                    \"join tbl_607_made_tolerance on tbl_607_gaz.FK_ID_made_tolerence = tbl_607_made_tolerance.ID \" +\n                    \"join tbl_607_theorical_content on tbl_607_gaz.FK_ID_theorical_content = tbl_607_theorical_content.ID \" +\n\n            \"WHERE \" +\n                \"tbl_607_order.order_number\" + \" LIKE \" + \"'%\" + selectedOrder + \"%'\";\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10890888, "user_type": "registered", "profile_image": "https://graph.facebook.com/713384335714582/picture?type=large", "display_name": "Lyzzie", "link": "https://stackoverflow.com/users/10890888/lyzzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 54115059, "answer_count": 1, "score": 0, "last_activity_date": 1547053309, "creation_date": 1547052744, "question_id": 54114911, "link": "https://stackoverflow.com/questions/54114911/error-with-sql-server-request-using-data-sqlclient-in-uwp", "title": "Error with SQL Server request using data.sqlclient in UWP", "body": "<p>I am trying to run a SQL query on my UWP code. I don't use Linq or EF. The connection to the base work and the simple requests work. This causes me problems: in a first time i populate a listview with the result of a simple request, i choose an element and i click on a searchin button. This request is call with an error:</p>\n\n<pre><code>\n    static public ObservableCollection GetGaz(string connectionString, \n         string selectedOrder)\n        {\n\n            string GetGazQuery =\n\n            \"SELECT \" +\n\n                    \"tbl_607_gaz_type.gaz_type,\" +\n                    \"tbl_607_theorical_content.theorical_content,\" +\n                    \"tbl_607_made_tolerance.made_tolerance,\" +\n                    \"tbl_607_order_details.gaz_lifetime,\" +\n                    \"tbl_607_gaz.gaz_comments,\" +\n                    \"tbl_607_order_details.FK_ID_order,\" +\n                    \"tbl_607_order_details.poste_number, \" +\n                    \"tbl_607_order.order_number\" +\n\n                \"FROM \" +\n                    \"tbl_607_provider join tbl_607_order on tbl_607_provider.ID = tbl_607_order.FK_ID_provider \" +\n                    \"join tbl_607_order_details on tbl_607_order.ID = tbl_607_order_details.FK_ID_order\" +\n                    \"join tbl_607_gaz on tbl_607_order_details.FK_ID_gaz = tbl_607_gaz.ID \" +\n                    \"join tbl_607_gaz_type on tbl_607_gaz.FK_ID_gaz_type = tbl_607_gaz_type.ID \" +\n                    \"join tbl_607_made_tolerance on tbl_607_gaz.FK_ID_made_tolerence = tbl_607_made_tolerance.ID \" +\n                    \"join tbl_607_theorical_content on tbl_607_gaz.FK_ID_theorical_content = tbl_607_theorical_content.ID \" +\n\n            \"WHERE \" +\n                \"tbl_607_order.order_number\" + \" LIKE \" + \"'%\" + selectedOrder + \"%'\";\n\n\n            ObservableCollection GazList = new ObservableCollection();\n            try\n            {\n                using (SqlConnection conn = new SqlConnection(connectionString))\n                {\n                    conn.Open();\n                    if (conn.State == System.Data.ConnectionState.Open)\n                    {\n                        using (SqlCommand cmd = conn.CreateCommand())\n                        {\n                            cmd.CommandText = GetGazQuery;\n                            using (SqlDataReader reader = cmd.ExecuteReader())\n                            {\n                                while (reader.Read())\n                                {\n                                    Gaz gaz = new Gaz\n                                    {\n                                        Gaz_type = reader.GetString(0),\n                                        Theorical_content = reader.GetString(1),\n                                        Made_tolerance = reader.GetDouble(2),\n                                        Gaz_lifetime = reader.GetInt32(3),\n                                        Gaz_comments = reader.GetString(4),\n                                        Poste_number = reader.GetInt32(6)\n                                    };\n\n                                    GazList.Add(gaz);\n                                }\n                            }\n                        }\n                    }\n                }\n                return GazList;\n            }\n            catch (Exception eSql)\n            {\n                Debug.WriteLine(\"Exception: \" + eSql.Message);\n            }\n            return null;\n        }\n    }\n</code></pre>\n\n<pre><code>\n\n    private string selectedOrder;\n        public Gestion_Stock()\n        {\n            this.InitializeComponent();\n            SelectOrders.ItemsSource = OrdersDataHelper.GetOrders(connectionString: (Windows.UI.Xaml.Application.Current as App).ConnectionString);\n\n        }\n\n        private void Search_Click(object sender, RoutedEventArgs e)\n        {\n            Affichage_Stock_Gaz.ItemsSource = GazDataHelper.GetGaz((Windows.UI.Xaml.Application.Current as App).ConnectionString, selectedOrder);\n        }\n\n        private void SelectOrders_SelectionChanged (object sender, SelectionChangedEventArgs e)\n        {\n            ListView selectOrders = sender as ListView;\n            Orders orders = SelectOrders.SelectedItem as Orders;\n            selectedOrder = orders.Order_Number;\n\n        }\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>\nException thrown: 'System.Data.SqlClient.SqlException' in System.Data.SqlClient.dll\nException: Incorrect syntax near the keyword 'join'\n</code></pre>\n\n<p>This simple request is working, i don't use a variable and \"where\" command.</p>\n\n<p>This work:</p>\n\n<pre><code>\n\n    static public ObservableCollection GetOrders(string connectionString)\n        {\n            const string GetOrdersQuery = \"\" +\n                \"select \" +\n\n                    \"tbl_607_order.start_date,\" +\n                    \"tbl_607_order.end_date,\" +\n                    \"tbl_607_provider.provider_name,\" +\n                    \"tbl_607_order.order_number,\" +\n                    \"tbl_607_order.shipping_request_active,\" +\n                    \"tbl_607_order.item_reception_active \" +\n\n                \"from \" +\n                    \"tbl_607_provider join tbl_607_order on tbl_607_provider.ID = tbl_607_order.FK_ID_provider \" \n                 ;\n</code></pre>\n\n<p>Someone would have any idea?\nThanks a lot!</p>\n"}, {"tags": ["c#", "wpf"], "comments": [{"owner": {"reputation": 1082, "user_id": 9091276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/05cFn.png?s=128&g=1", "display_name": "Frontear", "link": "https://stackoverflow.com/users/9091276/frontear"}, "edited": false, "score": 1, "creation_date": 1547052552, "post_id": 54114827, "comment_id": 95062318, "body": "You might also make a function <code>backup()</code> inside the CustomObject which can then <code>restore()</code>."}, {"owner": {"reputation": 4114, "user_id": 2957232, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/XicNR.jpg?s=128&g=1", "display_name": "Broots Waymb", "link": "https://stackoverflow.com/users/2957232/broots-waymb"}, "edited": false, "score": 1, "creation_date": 1547052592, "post_id": 54114827, "comment_id": 95062347, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/78536/deep-cloning-objects\">Deep cloning objects</a>"}, {"owner": {"reputation": 1061, "user_id": 7293119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eznd2.png?s=128&g=1", "display_name": "Pretasoc", "link": "https://stackoverflow.com/users/7293119/pretasoc"}, "edited": false, "score": 1, "creation_date": 1547052609, "post_id": 54114827, "comment_id": 95062361, "body": "An other idea is you implement a <code>Clone</code> function, that will return a deep copy of your <code>CustomObject</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4641, "user_id": 3446051, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/eb1zv.jpg?s=128&g=1", "display_name": "Code Pope", "link": "https://stackoverflow.com/users/3446051/code-pope"}, "is_accepted": false, "score": 1, "last_activity_date": 1547052899, "creation_date": 1547052899, "answer_id": 54114949, "question_id": 54114827, "link": "https://stackoverflow.com/questions/54114827/creating-a-backup-of-an-object/54114949#54114949", "title": "Creating a backup of an object", "body": "<p>The standard way is to implement the <code>ICloneable</code>:</p>\n\n<pre><code>class CustomObject : ICloneable\n{\n    ... your implementation\n    public object Clone()\n    {\n        return this.MemberwiseClone();\n    }\n}\n\nCustomObject obj = new CustomObject();\nCustomObject backupObj = (CustomerObject) obj.Clone(); //backup\n...\n// later restore\nobj = backupObj\n</code></pre>\n\n<p><code>MemberwiseClone()</code> makes a shallow copy.</p>\n"}], "owner": {"reputation": 31, "user_id": 10706858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bf34132988372947a1448e70b13096?s=128&d=identicon&r=PG&f=1", "display_name": "n0kx", "link": "https://stackoverflow.com/users/10706858/n0kx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547052899, "creation_date": 1547052488, "question_id": 54114827, "link": "https://stackoverflow.com/questions/54114827/creating-a-backup-of-an-object", "title": "Creating a backup of an object", "body": "<p>I have a custom object that I want the user to edit, but before editing, I want to make a backup of the object that can be used to restore if necessary.</p>\n\n<p>Basically, the user will have ObjectA that has all the information they need, they click Edit, a backup of ObjectA is created as ObjectB, the user can make changes to ObjectA, and then the user can hit cancel to discard any changes made to ObjectA which essentially just replaces ObjectA with the backup object, ObjectB.</p>\n\n<p>What's the best way to make a new object instead of simply creating another reference to the object?</p>\n\n<pre><code>// User has their main object\n\nCustomObject obj = new CustomObject();\n\n// User clicks Edit and a copy of the object is stored in case obj needs to be restored\n\nCustomObject backupObj = obj; // This only creates a reference but I'm not sure how else to show this\n\n// User makes changes to obj but decides to discard those changes and clicks Cancel\n\nobj = backupObj; // obj is restored\n\n// User goes on with the program\n</code></pre>\n"}, {"tags": ["c#", "c#-4.0", "dataset"], "comments": [{"owner": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 0, "creation_date": 1547053174, "post_id": 54114821, "comment_id": 95062702, "body": "Since there is  only 2 rows, cant you just look at each and store the value accordingly?"}, {"owner": {"reputation": 2932, "user_id": 620720, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/24334e8c249848cc8e6bb4e4c8622c24?s=128&d=identicon&r=PG&f=1", "display_name": "goofyui", "link": "https://stackoverflow.com/users/620720/goofyui"}, "reply_to_user": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 0, "creation_date": 1547053253, "post_id": 54114821, "comment_id": 95062753, "body": "I gave 2 as an example. Basically, I am populating the dataset from a config table in the SQL. Config table will be having over 15 row of records.  Depending on each server, we will be filtering and populating the records to each of these variable"}, {"owner": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 0, "creation_date": 1547053555, "post_id": 54114821, "comment_id": 95062921, "body": "Use a WHERE clause and you will get a max of two back."}, {"owner": {"reputation": 671797, "user_id": 13302, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/b4779212f57ff2e9549ea90a4499c2d7?s=128&d=identicon&r=PG", "display_name": "marc_s", "link": "https://stackoverflow.com/users/13302/marc-s"}, "edited": false, "score": 0, "creation_date": 1547053598, "post_id": 54114821, "comment_id": 95062948, "body": "Why don&#39;t you use something like <b>Dapper</b> to handle this automagically? This code to do this stuff has been written soooooooo many times already - just use something ready-made, and save yourself a lot of time! <a href=\"https://dapper-tutorial.net/\" rel=\"nofollow noreferrer\">dapper-tutorial.net</a>"}], "owner": {"reputation": 2932, "user_id": 620720, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/24334e8c249848cc8e6bb4e4c8622c24?s=128&d=identicon&r=PG&f=1", "display_name": "goofyui", "link": "https://stackoverflow.com/users/620720/goofyui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547054102, "creation_date": 1547052452, "last_edit_date": 1547054102, "question_id": 54114821, "link": "https://stackoverflow.com/questions/54114821/how-to-map-the-variable-from-a-dataset-datatable-in-c", "title": "How to map the variable from a Dataset / DataTable in c#?", "body": "<p>I have a Dataset which is populated from a stored procedure. The dataset is filled with the table of records.</p>\n\n<pre><code>    DataSet ds = new DataSet();\n\n    using (SqlConnection conn = new SqlConnection(connectionString))\n    {\n        SqlCommand sqlComm = new SqlCommand(\"usp_GetData\", conn);\n        sqlComm.Parameters.AddWithValue(\"@servername\", servername);              \n\n        sqlComm.CommandType = CommandType.StoredProcedure;\n\n        SqlDataAdapter da = new SqlDataAdapter();\n        da.SelectCommand = sqlComm;\n\n        da.Fill(ds);\n    }\n// I did a little change by populating to a DataTable. Hope LINQ query can help.\n DataTable dt = ds.Tables[\"Table\"];\n</code></pre>\n\n<p>Dataset returns two rows with 3 columns each. Each row has to be mapped with each variable.</p>\n\n<p>Expected output:</p>\n\n<pre><code>string variable1 = value 1 from dataset where conditionparameter = 1\nstring variable2 = value 2 from dataset where conditionparameter = 2\n</code></pre>\n\n<p>How to map the variable from a Dataset in c#?</p>\n"}, {"tags": ["c#", "animation", "uwp", "uwp-xaml"], "comments": [{"owner": {"reputation": 7891, "user_id": 6782612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KuUfK.jpg?s=128&g=1", "display_name": "Xie Steven", "link": "https://stackoverflow.com/users/6782612/xie-steven"}, "edited": false, "score": 1, "creation_date": 1547173658, "post_id": 54114736, "comment_id": 95110628, "body": "I&#39;ve reported this question to the relevant team. They&#39;re investigating it."}, {"owner": {"reputation": 5874, "user_id": 3930378, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zBZC4.jpg?s=128&g=1", "display_name": "Michael Puckett II", "link": "https://stackoverflow.com/users/3930378/michael-puckett-ii"}, "edited": false, "score": 1, "creation_date": 1547393702, "post_id": 54114736, "comment_id": 95169686, "body": "I&#39;m getting the same problem when building on 1803 and 1809. I have tried other released yet but I&#39;m guessing this is an existing bug that&#39;s slipped through the cracks; but I do believe it&#39;s a bug."}], "answers": [{"comments": [{"owner": {"reputation": 10479, "user_id": 817767, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/l3z3y.jpg?s=128&g=1", "display_name": "Mike Keskinov", "link": "https://stackoverflow.com/users/817767/mike-keskinov"}, "edited": false, "score": 1, "creation_date": 1547488762, "post_id": 54170902, "comment_id": 95201876, "body": "Great research and great help. You got the bounty! Your workaround works! I need to play a while to figure out what is important. To who may have similar problems, I need to point out 3 key components to make workaround works: 1. Set storyboard duration to the same as in <code>DoubleAnimation</code>. 2. Set <code>FillBehaviour=&quot;Stop&quot;</code> for problematic DoubleAnimation only (I had more than one in the <code>Storyboard</code>). 3. Make sure that <code>RotationY</code> value of <code>PlanProjection</code> is set to the same as <code>To</code> value in <code>DoubleAnimation</code> (this is important, it will still buggy if it set to <code>From</code>)."}], "tags": [], "owner": {"reputation": 5874, "user_id": 3930378, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zBZC4.jpg?s=128&g=1", "display_name": "Michael Puckett II", "link": "https://stackoverflow.com/users/3930378/michael-puckett-ii"}, "is_accepted": true, "score": 4, "last_activity_date": 1547397793, "last_edit_date": 1547397793, "creation_date": 1547397306, "answer_id": 54170902, "question_id": 54114736, "link": "https://stackoverflow.com/questions/54114736/uwp-animation-resets-to-from-state/54170902#54170902", "title": "UWP Animation resets to From state", "body": "<p><strong>I believe it's a bug</strong> and associated to the <code>FillBehavior</code> of the <code>Storyboard</code>.  </p>\n\n<p>This is happening for me all the way back to the first Windows 10 Build 10240.  For some reason if the result is != 0 then with <code>FillBehavior.HoldEnd</code> the state is reset to the <code>From</code> value instead of the <code>To</code> value (the value the <code>Storyboard</code> ends with).  </p>\n\n<p>Without looking at the open source code (which would be best IMO) I have done the following which leads me to this assumption. </p>\n\n<p>Verified your existing code on builds of Windows all the way back to the first release of Windows 10.  Tested both <code>To = 10</code> and <code>To = 0</code>.  <code>To = 10</code> resets to the starting <code>From</code> value.  <code>To = 0</code> resets to original value.  This you've documented already.</p>\n\n<p>Modified <code>From</code> value to be 360 degrees past the <code>To</code> value (using random values) so that it performs a full rotation.  It does stop at the <code>From</code> value at this point also which looks like the <code>To</code> value, which only speaks to say that <code>Storyboard.FillBehavior = FillBehavior.HoldEnd</code> holds to the <code>From</code> value.  I know it's not <code>Storyboard.FillBehavior = FillBehavior.Stop</code> because this does reset to the initial value before the <code>Storyboard</code> everytime (which is what <code>FillBehavior.Stop</code> is supposed to do).</p>\n\n<p>I'm assuming this based on the various tests I've done including manually writing the <code>Storyboard</code>.</p>\n\n<p><strong>Assumption:</strong></p>\n\n<p>If the <code>Storyboard.FillBehavior = FillBehavior.HoldEnd</code>, and the <code>Storyboard.To</code> value is not 0, then it will hold to whatever the <code>Storyboard.From</code> value was once it has completed.</p>\n\n<p>If the <code>Storyboard.FillBehavior = FillBehavior.Stop</code> then it works as expected and returns to whatever state the value was in before the animation.</p>\n\n<p><strong>Suggested work around:</strong></p>\n\n<p>Although I see you have a work around by using the <code>Storyboard.Completed</code> event, I have also another alternative (although it's still not pleasant) which may be cleaner and remove the flickering; it worked for me.</p>\n\n<p>I have set the <code>Timelines</code> with <code>FillBehavior.Stop</code> that are affected and then I've set the initial value of the properties they are animating to the <code>To</code> value. </p>\n\n<p>Note: In your example your <code>DoubleAnimation.Duration</code> is greater than your <code>Storyboard.Duration</code>.  This will always cause it to reset to this start value (which in this case is the <code>From</code> value) as the <code>DoubleAnimation</code> never gets to complete.  Make sure your <code>Storyboard.Duration</code> is at least as long as your highest child <code>Timeline</code> to prevent flickering and undesired effects. </p>\n\n<p><em>I initially assumed this was your problem but after setting the <code>Storyboard</code> to match, or better, your issue still exists.  Just know that the difference in durations could result in unwanted results, especially when your <code>Storyboard</code> is shorter than your child <code>Timeline</code>(s).</em></p>\n\n<pre><code>&lt;Storyboard x:Key=\"FlipTest\"\n            Duration=\"0:0:1.40\"&gt;\n    &lt;DoubleAnimation Storyboard.TargetName=\"TestRotation\"\n                     Storyboard.TargetProperty=\"RotationY\"\n                     From=\"180\"\n                     To=\"10\"\n                     Duration=\"0:0:1.40\" \n                     FillBehavior=\"Stop\"/&gt;\n&lt;/Storyboard&gt;\n\n\nTestRotation.RotationY = 10;\nStoryboard sb = (Storyboard)Resources[\"FlipTest\"];\nsb.Begin();\n</code></pre>\n"}], "owner": {"reputation": 10479, "user_id": 817767, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/l3z3y.jpg?s=128&g=1", "display_name": "Mike Keskinov", "link": "https://stackoverflow.com/users/817767/mike-keskinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 2, "accepted_answer_id": 54170902, "answer_count": 1, "score": 4, "last_activity_date": 1547397793, "creation_date": 1547052153, "last_edit_date": 1547062624, "question_id": 54114736, "link": "https://stackoverflow.com/questions/54114736/uwp-animation-resets-to-from-state", "title": "UWP Animation resets to From state", "body": "<p>I have an animation in UWP app which was working (Production Windows Store app) as intended until Windows Update 1809. Something was changed and now the animation resets to <code>From</code> value right after it finished. </p>\n\n<p>Example code:</p>\n\n<p>Animation (rotation):\n\n    </p>\n\n<pre><code>&lt;Storyboard x:Key=\"FlipTest\"&gt;\n    &lt;DoubleAnimation\n                        Storyboard.TargetName=\"TestRotation\"\n                        Storyboard.TargetProperty=\"RotationY\"\n                        From=\"180\"\n                        To=\"10\"\n                        Duration=\"0:0:1.40\"\n                        /&gt;\n&lt;/Storyboard&gt;\n</code></pre>\n\n<p></p>\n\n<p>Animated item:</p>\n\n<pre><code>    &lt;TextBlock Text=\"Test\" FontSize=\"18\"&gt;\n        &lt;TextBlock.Projection&gt;\n            &lt;PlaneProjection x:Name=\"TestRotation\" RotationY=\"0\" /&gt;\n        &lt;/TextBlock.Projection&gt;\n    &lt;/TextBlock&gt;\n</code></pre>\n\n<p>Call to start from button click:</p>\n\n<pre><code>private void Button_Click(object sender, RoutedEventArgs e)\n{\n    Storyboard sb = (Storyboard)Resources[\"FlipTest\"];\n    sb.Begin();\n}\n</code></pre>\n\n<p><strong>Intended behavior (works on Windows 1803):</strong> \nWhen you click on the button, the TextBlock rotated <strong>and stays</strong> in this state. </p>\n\n<p><strong>Behavior on Windows 1809:</strong>\nThe TextBox reset to <code>From</code> (180 deg) value right after the animation finished, but before <code>Storyboard.Completed</code> event called.</p>\n\n<p>Interestingly, if I put <code>To=\"0\"</code>, it stays in this state. If I put 10, 190 or 360 degrees, it resets. Note, it resets not to the original state (which is 0deg), but to <code>From</code> value (180deg). </p>\n\n<p>I also updated <code>Microsoft.NETCore.UniversalWindowsPlatform</code> to the latest version (6.1.9), but it changes nothing.</p>\n\n<p>Could anyone explain this behavior or tell how to fix it? Am I missing something obvious?</p>\n\n<p><strong>UPDATE (ugly workaround)</strong></p>\n\n<p>I find out that I can use the following ugly hack:</p>\n\n<pre><code>    sb.Completed += (s, ee) =&gt;\n    {\n        TestRotation.RotationY = 0.01; // ugly hack for Windows Build 1809\n    };\n</code></pre>\n\n<p>But it looks terrible not only in code. On the screen you can see the terrible <strong>blink</strong>, because after the animation the item resets and then set again to normal value. </p>\n\n<p>I also noticed that <code>RotationY</code> hold the correct value after animation completed, although visually the item rotated. You can see the value is 0 in code (on complete animation) or in <code>Live Property Explorer</code>, while visually the item rotated to 180 deg. </p>\n"}, {"tags": ["c#", "unity3d", "artificial-intelligence", "path-finding", "procedural-generation"], "answers": [{"tags": [], "owner": {"reputation": 463, "user_id": 10892554, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KduMVEJMVBI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcatx7149IKUHNDbnv0OdAjShlhAHg/mo/photo.jpg?sz=128", "display_name": "Empty", "link": "https://stackoverflow.com/users/10892554/empty"}, "is_accepted": false, "score": 0, "last_activity_date": 1547079367, "creation_date": 1547079367, "answer_id": 54120330, "question_id": 54114729, "link": "https://stackoverflow.com/questions/54114729/how-to-fix-pathfinding-for-ai-in-a-procedural-generated-dungeon/54120330#54120330", "title": "How to fix pathfinding for AI in a procedural generated dungeon?", "body": "<p>I'm fairly sure it's possible to bake at runtime from 2017.1 onwards</p>\n\n<p><a href=\"https://unity3d.com/learn/tutorials/topics/navigation/baking-navmesh-runtime\" rel=\"nofollow noreferrer\">https://unity3d.com/learn/tutorials/topics/navigation/baking-navmesh-runtime</a></p>\n\n<p>The documentation is a little spotty but it should work. It's a relatively new feature.</p>\n"}], "owner": {"reputation": 1, "user_id": 9891897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d513c80ffed1d8792ce6552a44ec4ea8?s=128&d=identicon&r=PG&f=1", "display_name": "iitaliancheese", "link": "https://stackoverflow.com/users/9891897/iitaliancheese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1547079367, "creation_date": 1547052126, "last_edit_date": 1547054579, "question_id": 54114729, "link": "https://stackoverflow.com/questions/54114729/how-to-fix-pathfinding-for-ai-in-a-procedural-generated-dungeon", "title": "How to fix pathfinding for AI in a procedural generated dungeon?", "body": "<p>I'm currently working on a 3D procedural dungeon generator with enemy AI's.\nHow do I fix path-finding for the enemy AI's in this situation?</p>\n\n<p>It's not possible to bake navmesh on run-time, and the dungeon is generated differently every time it is runned. The dungeon is generated by prefabs of junctions, rooms and corridors. \nThe enemies cannot move without a navmesh. I created the AI with Panda Behaviour Tree. One AI is supposed to follow a path that is set with waypoints and it runs around when it sees the player. The other AI wanders around the map to search for the player. </p>\n\n<p>The dungeon is generated in the class shown below. \nI have another class that draws the Gizmos on the doorway of every prefab, and another class that returns the 'ModuleConnector'. </p>\n\n<pre><code>public class ModularWorldGenerator : MonoBehaviour {\n\npublic Module[] Modules;\npublic Module StartModule;\npublic int Iterations = 5;\n\npublic void Start() {\n    var startModule = (Module) Instantiate(StartModule, transform.position, transform.rotation);\n    var pendingExits = new List&lt;ModuleConnector&gt;(startModule.GetExits());\n\n    for (int iteration = 0; iteration &lt; Iterations; iteration++) {\n        var newExits = new List&lt;ModuleConnector&gt;();\n\n        foreach (var pendingExit in pendingExits) {\n            var newTag = GetRandom(pendingExit.Tags);\n            var newModulePrefab = GetRandomWithTag(Modules, newTag);\n            var newModule = (Module) Instantiate(newModulePrefab);\n            var newModuleExits = newModule.GetExits();\n            var exitToMatch = newModuleExits.FirstOrDefault(x =&gt; x.IsDefault) ?? GetRandom(newModuleExits);\n            MatchExits(pendingExit, exitToMatch);\n            newExits.AddRange(newModuleExits.Where(e =&gt; e != exitToMatch));\n        }\n\n        pendingExits = newExits;\n    }\n}\n\n\nprivate void MatchExits(ModuleConnector oldExit, ModuleConnector newExit) {\n    var newModule = newExit.transform.parent;\n    var forwardVectorToMatch = -oldExit.transform.forward;\n    var correctiveRotation = Azimuth(forwardVectorToMatch) - Azimuth(newExit.transform.forward);\n    newModule.RotateAround(newExit.transform.position, Vector3.up, correctiveRotation);\n    var correctiveTranslation = oldExit.transform.position - newExit.transform.position;\n    newModule.transform.position += correctiveTranslation;\n}\n\n\nprivate static TItem GetRandom&lt;TItem&gt;(TItem[] array) {\n    return array[Random.Range(0, array.Length)];\n}\n\n\nprivate static Module GetRandomWithTag(IEnumerable&lt;Module&gt; modules, string tagToMatch) {\n    var matchingModules = modules.Where(m =&gt; m.Tags.Contains(tagToMatch)).ToArray();\n    return GetRandom(matchingModules);\n}\n\n\nprivate static float Azimuth(Vector3 vector) {\n    return Vector3.Angle(Vector3.forward, vector) * Mathf.Sign(vector.x);\n}\n}\n</code></pre>\n\n<p>The AI's work both fine in a map that is not random generated and has navmesh baked. \nHow can I fix path-finding for the AI's in this procedural generated dungeon? </p>\n"}, {"tags": ["c#", "3d"], "comments": [{"owner": {"reputation": 2106, "user_id": 5443550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4b11f6ccd1ebbd7cd84503758cc5d4?s=128&d=identicon&r=PG", "display_name": "Diado", "link": "https://stackoverflow.com/users/5443550/diado"}, "edited": false, "score": 0, "creation_date": 1547052198, "post_id": 54114720, "comment_id": 95062126, "body": "How about using a <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.numerics.vector3?view=netframework-4.7.2\" rel=\"nofollow noreferrer\"><code>Vector3</code></a> instead?"}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 2106, "user_id": 5443550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af4b11f6ccd1ebbd7cd84503758cc5d4?s=128&d=identicon&r=PG", "display_name": "Diado", "link": "https://stackoverflow.com/users/5443550/diado"}, "edited": false, "score": 0, "creation_date": 1547053162, "post_id": 54114720, "comment_id": 95062693, "body": "@Diado Sounds fine with me, if that&#39;s the thing to do! I do wonder why the other assembly doesn&#39;t exist on my machine though."}, {"owner": {"reputation": 10220, "user_id": 70104, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/859c44ae8a94cf8def8a9728369fcd2e?s=128&d=identicon&r=PG", "display_name": "Chris Dunaway", "link": "https://stackoverflow.com/users/70104/chris-dunaway"}, "edited": false, "score": 1, "creation_date": 1547053212, "post_id": 54114720, "comment_id": 95062724, "body": "According to the docs you linked to, those namespaces/classes are in the PresentationCore.dll so that is what you should reference.  If you created a WPF application, it should already be referenced."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 10220, "user_id": 70104, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/859c44ae8a94cf8def8a9728369fcd2e?s=128&d=identicon&r=PG", "display_name": "Chris Dunaway", "link": "https://stackoverflow.com/users/70104/chris-dunaway"}, "edited": false, "score": 0, "creation_date": 1547053297, "post_id": 54114720, "comment_id": 95062776, "body": "@ChrisDunaway I&#39;m just running a console app. Ok that makes sense then. Thanks! If either of you fellas would like to make an answer I can mark this answered."}], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547052081, "creation_date": 1547052081, "question_id": 54114720, "link": "https://stackoverflow.com/questions/54114720/3d-point-and-vectors-why-dont-i-have-system-windows-media-media3d-and-should", "title": "3D Point and Vectors - Why don&#39;t I have System.Windows.Media.Media3D and should I use it?", "body": "<p>I want to represent a 3d location and a 3d direction of travel in a little learning project I am doing. I google up \"C# 3D Point\" to see if something exists before I go making my own and I came up with Point3D and Vector3D from System.Windows.Media.Media3D, however when I go to add a reference, it isn't there. It also talks about how it is for WPF applications.</p>\n\n<p>So, Why don't I have that assemble available?...and should I even be using it?</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.media3d.vector3d?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.media3d.vector3d?view=netframework-4.7.2</a></p>\n"}, {"tags": ["c#", ".net", "winforms", "gdi+"], "comments": [{"owner": {"reputation": 214, "user_id": 6520522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0e0fd5be3ea4fa3834294345c775a7?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/6520522/adam"}, "edited": false, "score": 0, "creation_date": 1547051971, "post_id": 54114554, "comment_id": 95061978, "body": "<a href=\"https://stackoverflow.com/questions/5805774/how-to-generate-random-color-names-in-c-sharp\" title=\"how to generate random color names in c sharp\">stackoverflow.com/questions/5805774/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4431, "user_id": 4739488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8m1k.png?s=128&g=1", "display_name": "Flydog57", "link": "https://stackoverflow.com/users/4739488/flydog57"}, "edited": false, "score": 0, "creation_date": 1547052445, "post_id": 54114732, "comment_id": 95062265, "body": "You probably just want to invalidate a rectangle that circumscribes the ellipse (rather then the entire form). You&#39;ll get less flicker that way"}, {"owner": {"reputation": 77042, "user_id": 719186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f03c0b63844ced274fae4110267fe640?s=128&d=identicon&r=PG", "display_name": "LarsTech", "link": "https://stackoverflow.com/users/719186/larstech"}, "reply_to_user": {"reputation": 4431, "user_id": 4739488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8m1k.png?s=128&g=1", "display_name": "Flydog57", "link": "https://stackoverflow.com/users/4739488/flydog57"}, "edited": false, "score": 0, "creation_date": 1547052694, "post_id": 54114732, "comment_id": 95062408, "body": "@Flydog57 Just DoubleBuffer the form.  It&#39;s not clear from the question if the Ellipse is a shape or a drawing, but they included the tag GDI+, so I assumed a drawing."}, {"owner": {"reputation": 1, "user_id": 7105074, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nmGDT-TDM6o/AAAAAAAAAAI/AAAAAAAAAAA/anunxgR3ciw/photo.jpg?sz=128", "display_name": "Adithi Chakravarthy", "link": "https://stackoverflow.com/users/7105074/adithi-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1547053010, "post_id": 54114732, "comment_id": 95062589, "body": "I get an error saying &quot;Cannot convert System.Drawing.SolidBrush to System.Drawing.Color. &quot;"}, {"owner": {"reputation": 77042, "user_id": 719186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f03c0b63844ced274fae4110267fe640?s=128&d=identicon&r=PG", "display_name": "LarsTech", "link": "https://stackoverflow.com/users/719186/larstech"}, "reply_to_user": {"reputation": 1, "user_id": 7105074, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nmGDT-TDM6o/AAAAAAAAAAI/AAAAAAAAAAA/anunxgR3ciw/photo.jpg?sz=128", "display_name": "Adithi Chakravarthy", "link": "https://stackoverflow.com/users/7105074/adithi-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1547053060, "post_id": 54114732, "comment_id": 95062620, "body": "@AdithiChakravarthy My posted code does not generate that error.  Edit your question with the code you are using."}, {"owner": {"reputation": 1, "user_id": 7105074, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nmGDT-TDM6o/AAAAAAAAAAI/AAAAAAAAAAA/anunxgR3ciw/photo.jpg?sz=128", "display_name": "Adithi Chakravarthy", "link": "https://stackoverflow.com/users/7105074/adithi-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1547053211, "post_id": 54114732, "comment_id": 95062723, "body": "@LarsTech I have edited my code. Thank you for helping."}, {"owner": {"reputation": 77042, "user_id": 719186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f03c0b63844ced274fae4110267fe640?s=128&d=identicon&r=PG", "display_name": "LarsTech", "link": "https://stackoverflow.com/users/719186/larstech"}, "reply_to_user": {"reputation": 1, "user_id": 7105074, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nmGDT-TDM6o/AAAAAAAAAAI/AAAAAAAAAAA/anunxgR3ciw/photo.jpg?sz=128", "display_name": "Adithi Chakravarthy", "link": "https://stackoverflow.com/users/7105074/adithi-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1547053625, "post_id": 54114732, "comment_id": 95062961, "body": "@AdithiChakravarthy A lot of things wrong in your code, but to start, I have colour declared as a Color, not a Brush.  Try it my way and just use your Rectangle coordinates in its place.  Dispose your pen, too.  Don&#39;t store the graphic object, always get it from the Paint event."}, {"owner": {"reputation": 1, "user_id": 7105074, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nmGDT-TDM6o/AAAAAAAAAAI/AAAAAAAAAAA/anunxgR3ciw/photo.jpg?sz=128", "display_name": "Adithi Chakravarthy", "link": "https://stackoverflow.com/users/7105074/adithi-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1547061111, "post_id": 54114732, "comment_id": 95066339, "body": "Thank you so much! Yes, my code is a little more complicated than it needs to be. I am working on fixing it."}], "tags": [], "owner": {"reputation": 77042, "user_id": 719186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f03c0b63844ced274fae4110267fe640?s=128&d=identicon&r=PG", "display_name": "LarsTech", "link": "https://stackoverflow.com/users/719186/larstech"}, "is_accepted": false, "score": 3, "last_activity_date": 1547053639, "last_edit_date": 1547053639, "creation_date": 1547052132, "answer_id": 54114732, "question_id": 54114554, "link": "https://stackoverflow.com/questions/54114554/how-do-i-change-brush-color-randomly-using-a-timer/54114732#54114732", "title": "How do I change Brush color randomly using a timer?", "body": "<p>Declare the Random class at the form level and use the Color.FromArgb function to create your color:</p>\n\n<pre><code>private Color colour = Color.Black;\nprivate Random rnd = new Random();\n\nprivate void timer1_Tick(object sender, EventArgs e) {\n  colour = Color.FromArgb(rnd.Next(256), rnd.Next(256), rnd.Next(256));\n  this.Invalidate();\n}\n\nprotected override void OnPaint(PaintEventArgs e) {      \n  base.OnPaint(e);\n\n  e.Graphics.Clear(Color.White);\n  e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;\n  using (SolidBrush br = new SolidBrush(colour)) {\n    e.Graphics.FillEllipse(br, new Rectangle(16, 16, 64, 64));\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7105074, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nmGDT-TDM6o/AAAAAAAAAAI/AAAAAAAAAAA/anunxgR3ciw/photo.jpg?sz=128", "display_name": "Adithi Chakravarthy", "link": "https://stackoverflow.com/users/7105074/adithi-chakravarthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1547053639, "creation_date": 1547051534, "last_edit_date": 1547053187, "question_id": 54114554, "link": "https://stackoverflow.com/questions/54114554/how-do-i-change-brush-color-randomly-using-a-timer", "title": "How do I change Brush color randomly using a timer?", "body": "<p>I have an ellipse within my winform whose fill property I am trying to randomly change, i.e. I want the color of my ellipse to keep on changing constantly. </p>\n\n<pre><code>SolidBrush colour;\n\n private void drawBorder()\n    {\n        Pen bPen = new Pen(Color.Black, 8);\n        colour = new SolidBrush(Color.Yellow);\n\n        g.DrawEllipse(bPen, 412, 269, 19, 19);\n        g.FillEllipse(colour, 412, 269, 19, 19);\n\n        timer1.Enabled = true;\n        timer1.Start();\n    }\n\n\nprivate void timer1_Tick(object sender, EventArgs e)\n    {\n        //g.FillEllipse(colour, 412, 269, 19, 19);\n\n        if (this.colour.Color == Color.Yellow)\n        {\n            //MessageBox.Show(\"!\", Color.Yellow.ToString());\n            this.colour.Color = Color.Pink;\n        }\n        if (this.colour.Color == Color.Pink)\n        {\n            //MessageBox.Show(\"#\", this.colour.Color.ToString());\n            this.colour.Color = Color.Yellow;\n        }\n    }\n</code></pre>\n"}, {"tags": ["c#", "pdf", "itext", "bouncycastle", "x509certificate"], "comments": [{"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1547056457, "post_id": 54114505, "comment_id": 95064370, "body": "By certificates you mean signatures? Or do you mean X.509 certificates?"}, {"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1547057288, "post_id": 54114505, "comment_id": 95064707, "body": "Ok. To operate with PDFs you should use a PDF library. General purpose PDF libraries usually support PDF signatures and have an API to allow you to access information on the signatures in an obvious manner."}, {"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1547101813, "post_id": 54114505, "comment_id": 95077665, "body": "Itext&#39;s signature api indeed allows counting the existing signature. If you are talking about itext 7, please be aware that the signing api is in its own module."}], "answers": [{"comments": [{"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1547141194, "post_id": 54123523, "comment_id": 95099297, "body": "Uladzimir used itext 7.x which is a complete rewrite of itext 5 and before. That being said, if you just start with itext, you might want to use the current version 7.x instead of an old 5.x version."}, {"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 1, "creation_date": 1547141519, "post_id": 54123523, "comment_id": 95099464, "body": "If you for some reason need to use an old 5.x version, the 5.x example corresponding to the example referenced above is <a href=\"https://git.itextsupport.com/projects/I5NS/repos/tutorial/browse/signatures/chapter5/C5_01_SignatureIntegrity/C5_01_SignatureIntegrity.cs\" rel=\"nofollow noreferrer\">C5_01_SignatureIntegrity.cs from here</a>."}], "tags": [], "owner": {"reputation": 1548, "user_id": 6663375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nNG1b.jpg?s=128&g=1", "display_name": "Uladzimir Asipchuk", "link": "https://stackoverflow.com/users/6663375/uladzimir-asipchuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1547110778, "last_edit_date": 1547110778, "creation_date": 1547104252, "answer_id": 54123523, "question_id": 54114505, "link": "https://stackoverflow.com/questions/54114505/how-can-i-check-how-many-times-a-pdf-file-had-been-signed/54123523#54123523", "title": "How can I check how many times a PDF file had been signed?", "body": "<p>Since iText exists both in Java and C# and the <a href=\"https://itextpdf.com/ru/resources/books/digital-signatures-pdf\" rel=\"nofollow noreferrer\">Digital Signatures tutorial for iText</a> was written in the former, I will give the answer in Java and there should be no problem to port it to c#:</p>\n\n<p>One can use <code>SignatureUtil#getTotalRevisions()</code> to get the number. It has been designed to give you the number of signatures in the document, or that number plus one if changes were applied after the last time the document was signed.</p>\n\n<p>Please check <a href=\"https://github.com/itext/i7js-signatures/blob/develop/src/test/java/com/itextpdf/samples/signatures/chapter05/C5_01_SignatureIntegrity.java\" rel=\"nofollow noreferrer\">C5_01_SignatureIntegrity</a>. Here three documents are processed: the first had been signed, but then modified, the second was signed by four persons and the third had been signed by 4 persons and then modified. SignatureUtil#getTotalRevisions() returns 2, 4 and 5 for them respectively.</p>\n\n<p>The results in the first and the third cases are a bit misleading, but one can use <code>SignatureUtil#signatureCoversWholeDocument(String)</code> to check whether the last revision corresponds to the last signing or not.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10878445"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570526603, "creation_date": 1547051400, "last_edit_date": 1570526603, "question_id": 54114505, "link": "https://stackoverflow.com/questions/54114505/how-can-i-check-how-many-times-a-pdf-file-had-been-signed", "title": "How can I check how many times a PDF file had been signed?", "body": "<p>How can I check how many times a PDF file had been signed, using C# and preferably iTextSharp 5.5.11? I'm open to any other .NET PDF library as long as it does the job.</p>\n\n<p>I would like to choose a PDF file from my hard drive and show on a form how many times the PDF file had been signed.</p>\n\n<p>Showing the certificate source would be a bonus.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c#", "winforms", "cefsharp", "chromium-embedded"], "comments": [{"owner": {"reputation": 7613, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 0, "creation_date": 1547051660, "post_id": 54114477, "comment_id": 95061774, "body": "Does the file exist in the startup directory of the process you&#39;re running (and/or the build output)? I&#39;ve had some NuGet problems where the CefSharp files get deleted post-compilation."}, {"owner": {"reputation": 7126, "user_id": 679099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b28d1b32b4ef7385b42ac2c8e38502e?s=128&d=identicon&r=PG", "display_name": "YosiFZ", "link": "https://stackoverflow.com/users/679099/yosifz"}, "reply_to_user": {"reputation": 7613, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 0, "creation_date": 1547057895, "post_id": 54114477, "comment_id": 95064964, "body": "@WaiHaLee Where is the startup directory? Because i just try to run it from the VS2013"}, {"owner": {"reputation": 7613, "user_id": 1364007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG", "display_name": "Wai Ha Lee", "link": "https://stackoverflow.com/users/1364007/wai-ha-lee"}, "edited": false, "score": 0, "creation_date": 1547058749, "post_id": 54114477, "comment_id": 95065360, "body": "It&#39;ll be the folder that contains the executables for your project, e.g. (myproject.)\\bin\\debug - where (myproject) is where the .csproj file is."}, {"owner": {"reputation": 2690, "user_id": 4583726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b1e6a85e93097f34b96ee94173d332?s=128&d=identicon&r=PG&f=1", "display_name": "amaitland", "link": "https://stackoverflow.com/users/4583726/amaitland"}, "edited": false, "score": 0, "creation_date": 1547065152, "post_id": 54114477, "comment_id": 95068011, "body": "The official instructions for <code>AnyCPU</code> support are <a href=\"https://github.com/cefsharp/CefSharp/issues/1714\" rel=\"nofollow noreferrer\">github.com/cefsharp/CefSharp/issues/1714</a> A working example is available at <a href=\"https://github.com/cefsharp/CefSharp.MinimalExample/tree/demo/anycpu\" rel=\"nofollow noreferrer\">github.com/cefsharp/CefSharp.MinimalExample/tree/demo/anycpu</a>"}, {"owner": {"reputation": 7126, "user_id": 679099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b28d1b32b4ef7385b42ac2c8e38502e?s=128&d=identicon&r=PG", "display_name": "YosiFZ", "link": "https://stackoverflow.com/users/679099/yosifz"}, "reply_to_user": {"reputation": 2690, "user_id": 4583726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b1e6a85e93097f34b96ee94173d332?s=128&d=identicon&r=PG&f=1", "display_name": "amaitland", "link": "https://stackoverflow.com/users/4583726/amaitland"}, "edited": false, "score": 0, "creation_date": 1547075910, "post_id": 54114477, "comment_id": 95072070, "body": "@amaitland I tried all the info from the post and  keep getting this error. the example project working but it work with 63.0 and not 69.0.,also i noticed that only <code>CefSharp.Core.dll</code> is not loaded but <code>CefSharp.WinForms.dll</code> loaded perfectly"}, {"owner": {"reputation": 2690, "user_id": 4583726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b1e6a85e93097f34b96ee94173d332?s=128&d=identicon&r=PG&f=1", "display_name": "amaitland", "link": "https://stackoverflow.com/users/4583726/amaitland"}, "edited": false, "score": 0, "creation_date": 1547082115, "post_id": 54114477, "comment_id": 95073432, "body": "Upgrade the branch to the latest version and see what you get, there are three any cpu demo branches,  pick the one that closest suites your requirements."}, {"owner": {"reputation": 2690, "user_id": 4583726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b1e6a85e93097f34b96ee94173d332?s=128&d=identicon&r=PG&f=1", "display_name": "amaitland", "link": "https://stackoverflow.com/users/4583726/amaitland"}, "edited": false, "score": 0, "creation_date": 1547105524, "post_id": 54114477, "comment_id": 95078990, "body": "I have updated <a href=\"https://github.com/cefsharp/CefSharp.MinimalExample/tree/demo/anycpu\" rel=\"nofollow noreferrer\">github.com/cefsharp/CefSharp.MinimalExample/tree/demo/anycpu</a> to 71.0.0-pre01 and it works as expected. Double then triple check your code."}, {"owner": {"reputation": 7126, "user_id": 679099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b28d1b32b4ef7385b42ac2c8e38502e?s=128&d=identicon&r=PG", "display_name": "YosiFZ", "link": "https://stackoverflow.com/users/679099/yosifz"}, "reply_to_user": {"reputation": 2690, "user_id": 4583726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b1e6a85e93097f34b96ee94173d332?s=128&d=identicon&r=PG&f=1", "display_name": "amaitland", "link": "https://stackoverflow.com/users/4583726/amaitland"}, "edited": false, "score": 0, "creation_date": 1547106506, "post_id": 54114477, "comment_id": 95079437, "body": "@amaitland same issue, The dll exist in this path `Telegram\\Telegram\\bin\\Debug\\x64` but still get this error."}, {"owner": {"reputation": 2690, "user_id": 4583726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b1e6a85e93097f34b96ee94173d332?s=128&d=identicon&r=PG&f=1", "display_name": "amaitland", "link": "https://stackoverflow.com/users/4583726/amaitland"}, "edited": false, "score": 0, "creation_date": 1547108025, "post_id": 54114477, "comment_id": 95080079, "body": "Does the <code>MinimalExample</code> work?"}, {"owner": {"reputation": 2690, "user_id": 4583726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b1e6a85e93097f34b96ee94173d332?s=128&d=identicon&r=PG&f=1", "display_name": "amaitland", "link": "https://stackoverflow.com/users/4583726/amaitland"}, "edited": false, "score": 0, "creation_date": 1547108040, "post_id": 54114477, "comment_id": 95080085, "body": "You saying <code>Same Issue</code> is not particularly helpful, it doesn&#39;t provide me with any information."}, {"owner": {"reputation": 2690, "user_id": 4583726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7b1e6a85e93097f34b96ee94173d332?s=128&d=identicon&r=PG&f=1", "display_name": "amaitland", "link": "https://stackoverflow.com/users/4583726/amaitland"}, "edited": false, "score": 0, "creation_date": 1547110131, "post_id": 54114477, "comment_id": 95081101, "body": "Also the <code>privatePath=&quot;x86&quot;</code> is set to <code>x86</code> and you claim to be using <code>x64</code> according to the folder. Please edit your post and include all the code relevant to what you are using."}], "answers": [{"comments": [{"owner": {"reputation": 7126, "user_id": 679099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b28d1b32b4ef7385b42ac2c8e38502e?s=128&d=identicon&r=PG", "display_name": "YosiFZ", "link": "https://stackoverflow.com/users/679099/yosifz"}, "edited": false, "score": 0, "creation_date": 1547057810, "post_id": 54114684, "comment_id": 95064933, "body": "I just update my Question with the app.config file content, i can&#39;t see there anything about the CefSharp"}], "tags": [], "owner": {"reputation": 166, "user_id": 9886097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WPIM5.jpg?s=128&g=1", "display_name": "Alireza Memarian", "link": "https://stackoverflow.com/users/9886097/alireza-memarian"}, "is_accepted": false, "score": 0, "last_activity_date": 1547051975, "creation_date": 1547051975, "answer_id": 54114684, "question_id": 54114477, "link": "https://stackoverflow.com/questions/54114477/winform-cefsharp/54114684#54114684", "title": "WinForm CefSharp", "body": "<p>In app.config file , please check dependentAssembly segment for CelfSharp.\nIf it has any entry, make sure that the version of added reference be in valid range. </p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 6430787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab18446edf3b880e375f5b10b24dea4?s=128&d=identicon&r=PG&f=1", "display_name": "Shane Burke", "link": "https://stackoverflow.com/users/6430787/shane-burke"}, "is_accepted": true, "score": 1, "last_activity_date": 1547069134, "creation_date": 1547069134, "answer_id": 54118617, "question_id": 54114477, "link": "https://stackoverflow.com/questions/54114477/winform-cefsharp/54118617#54118617", "title": "WinForm CefSharp", "body": "<p>In our case this happened when we failed to install the Visual C++ runtime.</p>\n"}], "owner": {"reputation": 7126, "user_id": 679099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4b28d1b32b4ef7385b42ac2c8e38502e?s=128&d=identicon&r=PG", "display_name": "YosiFZ", "link": "https://stackoverflow.com/users/679099/yosifz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 54118617, "answer_count": 2, "score": 0, "last_activity_date": 1547069134, "creation_date": 1547051301, "last_edit_date": 1547057721, "question_id": 54114477, "link": "https://stackoverflow.com/questions/54114477/winform-cefsharp", "title": "WinForm CefSharp", "body": "<p>I just tried to install <code>CefSharp</code> on a new <code>winForm</code> application, i install the latest version with Nuget and done all the steps by this article:\n<a href=\"https://ourcodeworld.com/articles/read/173/how-to-use-cefsharp-chromium-embedded-framework-csharp-in-a-winforms-application\" rel=\"nofollow noreferrer\">https://ourcodeworld.com/articles/read/173/how-to-use-cefsharp-chromium-embedded-framework-csharp-in-a-winforms-application</a></p>\n\n<pre><code>Running on : \"Any CPU\"\nVisual Studio 2013\nCefSharp 69.0.0\n</code></pre>\n\n<p>When i run the application i get this error:</p>\n\n<pre><code>An unhandled exception of type 'System.IO.FileNotFoundException' occurred in mscorlib.dll\nAdditional information: Could not load file or assembly 'CefSharp.Core.dll' or one of its dependencies. The specified module could not be found.\n</code></pre>\n\n<p>This is the code:</p>\n\n<pre><code>var settings = new CefSettings();\nCef.Initialize(settings, performDependencyCheck: false, browserProcessHandler: null);\n</code></pre>\n\n<p>Any idea what is the problem?</p>\n\n<p><strong>EDIT</strong>\nThis is the app.config file of my project:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;configuration&gt;\n    &lt;startup&gt; \n        &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.5.2\" /&gt;\n    &lt;/startup&gt;\n    &lt;runtime&gt;\n        &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n            &lt;probing privatePath=\"x86\"/&gt;\n        &lt;/assemblyBinding&gt;\n    &lt;/runtime&gt;\n&lt;/configuration&gt;\n</code></pre>\n"}, {"tags": ["c#", "interface"], "comments": [{"owner": {"reputation": 1271, "user_id": 1296597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/A1Puh.jpg?s=128&g=1", "display_name": "Adam Hess", "link": "https://stackoverflow.com/users/1296597/adam-hess"}, "edited": false, "score": 0, "creation_date": 1547051470, "post_id": 54114450, "comment_id": 95061649, "body": "Default Implementations are a proposed feature of C# 8.  It&#39;s not in the language yet, so while it is logical, consistent interface behavior is best practice."}, {"owner": {"reputation": 138646, "user_id": 1081897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46b160c4e606ce0be84dae336ab25f0?s=128&d=identicon&r=PG&f=1", "display_name": "D Stanley", "link": "https://stackoverflow.com/users/1081897/d-stanley"}, "reply_to_user": {"reputation": 1271, "user_id": 1296597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/A1Puh.jpg?s=128&g=1", "display_name": "Adam Hess", "link": "https://stackoverflow.com/users/1296597/adam-hess"}, "edited": false, "score": 1, "creation_date": 1547051725, "post_id": 54114450, "comment_id": 95061812, "body": "@AdamHess It <i>seems</i> logical, but can blow up. See my example below."}, {"owner": {"reputation": 1271, "user_id": 1296597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/A1Puh.jpg?s=128&g=1", "display_name": "Adam Hess", "link": "https://stackoverflow.com/users/1296597/adam-hess"}, "reply_to_user": {"reputation": 138646, "user_id": 1081897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46b160c4e606ce0be84dae336ab25f0?s=128&d=identicon&r=PG&f=1", "display_name": "D Stanley", "link": "https://stackoverflow.com/users/1081897/d-stanley"}, "edited": false, "score": 0, "creation_date": 1547051989, "post_id": 54114450, "comment_id": 95061996, "body": "@DStanley good point, I forgot about generics."}, {"owner": {"reputation": 33, "user_id": 10890840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157105614363534/picture?type=large", "display_name": "Tim Kelly", "link": "https://stackoverflow.com/users/10890840/tim-kelly"}, "edited": false, "score": 0, "creation_date": 1547054925, "post_id": 54114450, "comment_id": 95063658, "body": "I see. Your example is only a problem if a setter is declared in the interface, I would actually only need get access in my interface to implement my design pattern so this wouldn&#39;t be a problem . I can&#39;t use generics since my SQL class mapper doesn&#39;t support them. I&#39;ll look into c# 8!"}, {"owner": {"reputation": 33, "user_id": 10890840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157105614363534/picture?type=large", "display_name": "Tim Kelly", "link": "https://stackoverflow.com/users/10890840/tim-kelly"}, "edited": false, "score": 0, "creation_date": 1547055277, "post_id": 54114450, "comment_id": 95063824, "body": "So this wouldn&#39;t break at run-time (if it compiled):        interface ITest         {                       }          public class Test : ITest         {          }          interface ITest2         {             ITest A { get; }         }           class Test2 : ITest2         {             public Test A { get; set; }         }"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10890840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157105614363534/picture?type=large", "display_name": "Tim Kelly", "link": "https://stackoverflow.com/users/10890840/tim-kelly"}, "edited": false, "score": 0, "creation_date": 1547056378, "post_id": 54114496, "comment_id": 95064337, "body": "Unfortunately this workaround doesn&#39;t work in practice as reality A and B actually reference each other. (I didn&#39;t show this in my example)"}, {"owner": {"reputation": 33, "user_id": 10890840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157105614363534/picture?type=large", "display_name": "Tim Kelly", "link": "https://stackoverflow.com/users/10890840/tim-kelly"}, "edited": false, "score": 0, "creation_date": 1547056965, "post_id": 54114496, "comment_id": 95064562, "body": "Really would like to do is this (which doesn&#39;t break at run-time) :     interface IA     {         IB PropertyB { get; }     }      public class A : IA     {         public B PropertyA { get; set; }     }      interface IB     {          IA PropertyA { get;  }     }       class B : IB     {         public A PropertyA { get; set; }     }"}, {"owner": {"reputation": 33, "user_id": 10890840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157105614363534/picture?type=large", "display_name": "Tim Kelly", "link": "https://stackoverflow.com/users/10890840/tim-kelly"}, "edited": false, "score": 0, "creation_date": 1547069453, "post_id": 54114496, "comment_id": 95069819, "body": "<a href=\"https://github.com/dotnet/csharplang/issues/49\" rel=\"nofollow noreferrer\">github.com/dotnet/csharplang/issues/49</a>"}], "tags": [], "owner": {"reputation": 138646, "user_id": 1081897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46b160c4e606ce0be84dae336ab25f0?s=128&d=identicon&r=PG&f=1", "display_name": "D Stanley", "link": "https://stackoverflow.com/users/1081897/d-stanley"}, "is_accepted": false, "score": 3, "last_activity_date": 1547052661, "last_edit_date": 1547052661, "creation_date": 1547051364, "answer_id": 54114496, "question_id": 54114450, "link": "https://stackoverflow.com/questions/54114450/why-doesnt-c-support-implicit-interface-conversion-for-interface-implementatio/54114496#54114496", "title": "Why doesn&#39;t C# support implicit interface conversion for interface implementation members?", "body": "<p>It doesn't work because then this would compile, but would blow up at runtime:</p>\n\n<pre><code>public class A2 : IA\n{\n}\n\nB b = new B();  // fine\nIB ib = b;      // fine\nib.PropertyA = new A2();  // blows up at runtime since B can only hold A objects in PropertyA\n</code></pre>\n\n<blockquote>\n  <p>Does anyone know any workaround?</p>\n</blockquote>\n\n<p>Generics:</p>\n\n<pre><code>interface IB&lt;T&gt; where T:IA\n{\n     T PropertyA { get; set; }\n}\n\nclass B : IB&lt;A&gt;\n{\n    public A PropertyA { get; set; }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10890840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157105614363534/picture?type=large", "display_name": "Tim Kelly", "link": "https://stackoverflow.com/users/10890840/tim-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1547051355, "answer_count": 1, "score": 0, "last_activity_date": 1547052661, "creation_date": 1547051213, "question_id": 54114450, "link": "https://stackoverflow.com/questions/54114450/why-doesnt-c-support-implicit-interface-conversion-for-interface-implementatio", "closed_reason": "Duplicate", "title": "Why doesn&#39;t C# support implicit interface conversion for interface implementation members?", "body": "<p>Consider this:</p>\n\n<pre><code>   interface IA\n    {\n\n    }\n\n    public class A : IA\n    {\n\n    }\n\n    interface IB\n    {\n         IA PropertyA { get; set; }\n    }\n\n\n    class B : IB\n    {\n        public A PropertyA { get; set; }\n    }\n</code></pre>\n\n<p>This isn't allowed, since class B doesn't implement propertyA of type IA. IE PropertyA in the class is of type A in the class not IA.</p>\n\n<p>But this seems a great shame since A supports IA it should be trivial for compiler/language to support this and implicitly handle the conversion.</p>\n\n<p>This design pattern could be really useful if it were allowed as one could automatically generate an interface model of a class abstracting it's implementation. Does anyone know any workaround?</p>\n"}, {"tags": ["c#", "asp.net", "json", "asp.net-core"], "comments": [{"owner": {"reputation": 29332, "user_id": 177416, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/F6rDx.png?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/177416/alex"}, "edited": false, "score": 0, "creation_date": 1547052293, "post_id": 54114438, "comment_id": 95062188, "body": "Have you tried this? <a href=\"https://stackoverflow.com/a/31453663/177416\">stackoverflow.com/a/31453663/177416</a>"}, {"owner": {"reputation": 36163, "user_id": 1823494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90507a6f34195753c4bdebb6623a34b1?s=128&d=identicon&r=PG", "display_name": "Henk Mollema", "link": "https://stackoverflow.com/users/1823494/henk-mollema"}, "edited": false, "score": 0, "creation_date": 1547069475, "post_id": 54114438, "comment_id": 95069828, "body": "I suggest you remove the <code>Config</code> top-level property from the <code>appsettings.json</code> file. It provides no value since appsetings are already &quot;config&quot; and it should make <code>services.Configure&lt;Config&gt;(Configuration)</code> work."}], "answers": [{"tags": [], "owner": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "is_accepted": true, "score": 7, "last_activity_date": 1583266774, "last_edit_date": 1583266774, "creation_date": 1547052548, "answer_id": 54114847, "question_id": 54114438, "link": "https://stackoverflow.com/questions/54114438/read-appsettings-json-fields-remain-null/54114847#54114847", "title": "Read appsettings.json - Fields remain null", "body": "<blockquote>\n<pre><code>services.Configure&lt;Config&gt;(Configuration);\n</code></pre>\n</blockquote>\n\n<p>This line doesn't achieve the desired result because the JSON properties you're looking for are nested under a <code>Config</code> property in your <code>appsettings.json</code> file. To load these values as intended, use <a href=\"https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.configuration.iconfiguration.getsection?view=aspnetcore-2.2\" rel=\"nofollow noreferrer\"><code>GetSection</code></a> to grab the <code>Config</code> section and pass <em>that</em> into the <code>Configure&lt;TOptions&gt;</code> method:</p>\n\n<pre><code>services.Configure&lt;Config&gt;(Configuration.GetSection(\"Config\"));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5282078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d6d1c4586817e5b75fd6b6649d13f86?s=128&d=identicon&r=PG&f=1", "display_name": "V. Tar", "link": "https://stackoverflow.com/users/5282078/v-tar"}, "is_accepted": false, "score": 0, "last_activity_date": 1612284993, "creation_date": 1612284993, "answer_id": 66014153, "question_id": 54114438, "link": "https://stackoverflow.com/questions/54114438/read-appsettings-json-fields-remain-null/66014153#66014153", "title": "Read appsettings.json - Fields remain null", "body": "<pre><code>     services.Configure&lt;Config&gt;(options =&gt;\n                {\n                    options.ConnectionString = Configuration.GetValue&lt;string&gt;(&quot;Config:ConnectionString&quot;);\n                    options.ApplicationName = &quot;test&quot;;\n                });\n</code></pre>\n<p>If you want to configure your options more granuarly.</p>\n"}], "owner": {"reputation": 715, "user_id": 7639883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bUocL.jpg?s=128&g=1", "display_name": "Falcon", "link": "https://stackoverflow.com/users/7639883/falcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5422, "favorite_count": 1, "accepted_answer_id": 54114847, "answer_count": 2, "score": 6, "last_activity_date": 1612284993, "creation_date": 1547051189, "last_edit_date": 1547070291, "question_id": 54114438, "link": "https://stackoverflow.com/questions/54114438/read-appsettings-json-fields-remain-null", "title": "Read appsettings.json - Fields remain null", "body": "<p>Think I have a problem with the startup.cs as I do not get any values from my <code>&lt;IOption&gt; config</code></p>\n\n<p>So.. We have our <strong>appsettings.json</strong></p>\n\n<pre><code>\"Config\": {\n    \"ApplicationName\": \"some name\",\n    \"ConnectionString\": \"someconstring\",\n    \"Version\": \"1.0.0\"\n  },\n</code></pre>\n\n<p>Here we have our <strong>model</strong></p>\n\n<pre><code>public class Config\n    {   \n        public string ApplicationName { get; set; }\n        public string ConnectionString { get; set; }\n        public string Version { get; set; }\n    }\n</code></pre>\n\n<p><strong>The startup.cs</strong></p>\n\n<pre><code> public Startup(IConfiguration configuration)\n\n    {\n        Configuration = configuration;\n    }\n\n\n\npublic static IConfiguration Configuration { get; set; }\n\n    // This method gets called by the runtime. Use this method to add services to the container.\n    public void ConfigureServices(IServiceCollection services)\n    {\n        services.AddMvc();\n        // Add functionality to inject IOptions&lt;T&gt;\n        services.AddOptions();\n\n        // Add our Config object so it can be injected\n        services.Configure&lt;Config&gt;(Configuration);\n    }\n</code></pre>\n\n<p>And then in our <strong>controller</strong> I try to load those data but unfortunately they remain empty. </p>\n\n<pre><code>   private IOptions&lt;Config&gt; config;\n            public CompaniesController(IOptions&lt;Config&gt; config)\n            {\n                this.config = config;\n            }\n</code></pre>\n\n<p>I've tried to change the startup.cs with something like</p>\n\n<pre><code> services.Configure&lt;Config&gt;(options =&gt;\n            {\n                options.ConnectionString = Configuration.GetSection(\"Config:ConnectionString\").Value;\n            });\n</code></pre>\n\n<p>but that doesn't seems to work.</p>\n\n<p><strong>Resources</strong> I've been using:</p>\n\n<pre><code>https://dzone.com/articles/dynamic-connection-string-in-net-core\n\nhttps://stackoverflow.com/questions/31453495/how-to-read-appsettings-values-from-json-file-in-asp-net-core\n\nhttps://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/options?view=aspnetcore-2.2\n</code></pre>\n\n<p>but Obviously I am missing a crucial point here.</p>\n\n<p>edit: I am using ASP.Net Core 2.0</p>\n\n<p><a href=\"https://i.stack.imgur.com/bwXax.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bwXax.png\" alt=\"enter image description here\"></a></p>\n\n<p>edit2:</p>\n\n<p>the <strong>Program.cs</strong></p>\n\n<pre><code>public class Program\n    {\n        public static void Main(string[] args)\n        {\n            BuildWebHost(args).Run();\n        }\n\n        public static IWebHost BuildWebHost(string[] args) =&gt;\n            WebHost.CreateDefaultBuilder(args)\n                .UseStartup&lt;Startup&gt;()\n                .Build();\n    }\n</code></pre>\n\n<p>The entire <strong>Appsettings.json</strong> file</p>\n\n<pre><code>{\n  \"Config\": {\n    \"ApplicationName\": \"somename\",\n    \"ConnectionString\": \"someconstring\",\n    \"Version\": \"1.0.0\"\n  },\n  \"Logging\": {\n    \"IncludeScopes\": false,\n    \"Debug\": {\n      \"LogLevel\": {\n        \"Default\": \"Warning\"\n      }\n    },\n    \"Console\": {\n      \"LogLevel\": {\n        \"Default\": \"Warning\"\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>edit 3:\nIn my front-end application I import the API like this.\n<a href=\"https://i.stack.imgur.com/nhZyn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nhZyn.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "wpf", "xaml", "ellipse"], "comments": [{"owner": {"reputation": 6072, "user_id": 2142950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZGrD.png?s=128&g=1", "display_name": "Klaus G&#252;tter", "link": "https://stackoverflow.com/users/2142950/klaus-g%c3%bctter"}, "edited": false, "score": 0, "creation_date": 1547051119, "post_id": 54114368, "comment_id": 95061424, "body": "Either add it after the Ellipse in XAML so it will be drawn on top of it or fill the Ellipse with a DrawingBrush."}, {"owner": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "reply_to_user": {"reputation": 6072, "user_id": 2142950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZGrD.png?s=128&g=1", "display_name": "Klaus G&#252;tter", "link": "https://stackoverflow.com/users/2142950/klaus-g%c3%bctter"}, "edited": false, "score": 0, "creation_date": 1547051845, "post_id": 54114368, "comment_id": 95061891, "body": "Hello Klaus, I remember your bike.)) Thanks for quick replying, I&#39;ll try that."}, {"owner": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "reply_to_user": {"reputation": 6072, "user_id": 2142950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZGrD.png?s=128&g=1", "display_name": "Klaus G&#252;tter", "link": "https://stackoverflow.com/users/2142950/klaus-g%c3%bctter"}, "edited": false, "score": 0, "creation_date": 1547126881, "post_id": 54114368, "comment_id": 95090555, "body": "If I use a DrawingBrush I won&#39;t able to control to primitive which is inside of the Ellipse. Will it? E.g. a control to Visibility property."}, {"owner": {"reputation": 6072, "user_id": 2142950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZGrD.png?s=128&g=1", "display_name": "Klaus G&#252;tter", "link": "https://stackoverflow.com/users/2142950/klaus-g%c3%bctter"}, "edited": false, "score": 0, "creation_date": 1547129576, "post_id": 54114368, "comment_id": 95092161, "body": "Can you please add this additional requirement to your question with some examples what you want to achieve."}, {"owner": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "reply_to_user": {"reputation": 6072, "user_id": 2142950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZGrD.png?s=128&g=1", "display_name": "Klaus G&#252;tter", "link": "https://stackoverflow.com/users/2142950/klaus-g%c3%bctter"}, "edited": false, "score": 0, "creation_date": 1547134432, "post_id": 54114368, "comment_id": 95095267, "body": "Hello Klaus, I made some additional comments. Please find them above."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "edited": false, "score": 0, "creation_date": 1547138501, "post_id": 54132881, "comment_id": 95097828, "body": "Wow! It works! ) Is there a way to groupe e.g.  Bridge and Nose, SquareEye and CircleEye without losing of achived properties? In order to e.g., to hide both eyes simultaneously."}, {"owner": {"reputation": 18836, "user_id": 328848, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hHtsL.jpg?s=128&g=1", "display_name": "Dean Chalk", "link": "https://stackoverflow.com/users/328848/dean-chalk"}, "reply_to_user": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "edited": false, "score": 0, "creation_date": 1547138605, "post_id": 54132881, "comment_id": 95097885, "body": "sure, stick them in their own child canvas and  turn visibility on and off for the child canvas"}, {"owner": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "edited": false, "score": 0, "creation_date": 1547139319, "post_id": 54132881, "comment_id": 95098326, "body": "Dean I&#39;m not so familiar with this resource in terms how to control it properly (pretty odd engine). Just added an issue, please  find it as second answer or whatever."}, {"owner": {"reputation": 18836, "user_id": 328848, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hHtsL.jpg?s=128&g=1", "display_name": "Dean Chalk", "link": "https://stackoverflow.com/users/328848/dean-chalk"}, "reply_to_user": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "edited": false, "score": 0, "creation_date": 1547140114, "post_id": 54132881, "comment_id": 95098743, "body": "If you want it to automatically resize, stick it in a ViewBox (I have edited the code for this)"}, {"owner": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "edited": false, "score": 0, "creation_date": 1547140573, "post_id": 54132881, "comment_id": 95098991, "body": "Dean, you want to say that standard Ellipse (from Toolbox) sits also in a ViewBox container. And why is it not allowed to add second  UC after our alterations."}, {"owner": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "edited": false, "score": 0, "creation_date": 1547142221, "post_id": 54132881, "comment_id": 95099818, "body": "To be exact, while adding the second one, disappears the first one."}, {"owner": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "edited": false, "score": 0, "creation_date": 1547142697, "post_id": 54132881, "comment_id": 95100074, "body": "Solved it by myself. it needed to put UC instance in a Grid container, first."}], "tags": [], "owner": {"reputation": 18836, "user_id": 328848, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hHtsL.jpg?s=128&g=1", "display_name": "Dean Chalk", "link": "https://stackoverflow.com/users/328848/dean-chalk"}, "is_accepted": false, "score": 1, "last_activity_date": 1547140158, "last_edit_date": 1547140158, "creation_date": 1547137275, "answer_id": 54132881, "question_id": 54114368, "link": "https://stackoverflow.com/questions/54114368/how-do-i-paint-a-primitive-inside-of-e-g-ellipse/54132881#54132881", "title": "How do I paint a primitive inside of e.g. Ellipse?", "body": "<p>You need to use <code>Canvas</code> instead of <code>Grid</code> as a container, and you need to use Canvas Left/Top instead of <code>Margin</code>, like this:</p>\n\n<pre><code>&lt;Viewbox \n        Stretch=\"Uniform\" \n        HorizontalAlignment=\"Stretch\" \n        VerticalAlignment=\"Stretch\"&gt;\n    &lt;Canvas Width=\"200\" Height=\"200\"&gt;\n        &lt;Ellipse\n            Canvas.Left=\"0\"\n            Canvas.Top=\"0\"\n            Width=\"200\"\n            Height=\"200\"\n            Fill=\"Yellow\"\n            Stroke=\"Black\" /&gt;\n        &lt;Path x:Name=\"Bridge\"\n              Width=\"34.5\"\n              Height=\"69.5\"\n              Canvas.Left=\"65.5\"\n              Canvas.Top=\"63\"\n              HorizontalAlignment=\"Left\"\n              VerticalAlignment=\"Top\"\n              Data=\"M149,127 L115.5,195.5\"\n              Fill=\" Yellow\"\n              Stretch=\"Fill\"\n              Stroke=\"Black\" /&gt;\n        &lt;Path x:Name=\"Nose\"\n              Width=\"38.5\"\n              Height=\"1.008\"\n              Canvas.Left=\"65.5\"\n              Canvas.Top=\"145.5\"\n              HorizontalAlignment=\"Left\"\n              VerticalAlignment=\"Top\"\n              Data=\"M115.5,196.492 L153,196.5\"\n              Fill=\" Yellow\"\n              Stretch=\"Fill\"\n              Stroke=\"Black\" /&gt;\n        &lt;Rectangle x:Name=\"SquareEye\"\n                   Width=\"24\"\n                   Height=\"24\"\n                   Canvas.Left=\"53.984\"\n                   Canvas.Top=\"68\"\n                   HorizontalAlignment=\"Left\"\n                   VerticalAlignment=\"Top\"\n                   Fill=\"Yellow\"\n                   Stroke=\"Black\" /&gt;\n        &lt;Ellipse x:Name=\"CircleEye\"\n                 Width=\"24\"\n                 Height=\"24\"\n                 Canvas.Left=\"119\"\n                 Canvas.Top=\"68\"\n                 HorizontalAlignment=\"Left\"\n                 VerticalAlignment=\"Top\"\n                 Fill=\"Yellow\"\n                 Stroke=\"Black\" /&gt;\n    &lt;/Canvas&gt;\n&lt;/Viewbox&gt;\n</code></pre>\n\n<p>Before:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tR2y7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tR2y7.png\" alt=\"enter image description here\"></a></p>\n\n<p>After:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hTaey.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hTaey.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 10878906, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MP_zAdqIALY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYzaVZHm5uErjm12lOY-HwHoh7CcA/mo/photo.jpg?sz=128", "display_name": "Redneck", "link": "https://stackoverflow.com/users/10878906/redneck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547140158, "creation_date": 1547050939, "last_edit_date": 1547134696, "question_id": 54114368, "link": "https://stackoverflow.com/questions/54114368/how-do-i-paint-a-primitive-inside-of-e-g-ellipse", "title": "How do I paint a primitive inside of e.g. Ellipse?", "body": "<p>I have an Ellipse\n  is looking like as shown at the pic. I need to paint a primitive inside of given Ellipse, something like it is shown.</p>\n\n<p>XAML: </p>\n\n<pre><code>&lt;Ellipse\n            Width=\"300\"\n            Height=\"200\"\n            Fill=\"Yellow\"/&gt;\n</code></pre>\n\n<p>Picture: <img src=\"https://i.stack.imgur.com/6pCbc.png\" alt=\"Ellipse\"></p>\n\n<p><strong>Update:</strong>\nAs it's seen I have User Control. Essentially it's an Ellipse in base. Also there are some primitives which have to be located within given Ellipse. Also I need to hide/expose those primitives separately via Bindings.</p>\n\n<p><strong>The major issue is:</strong> just try to put UC into MainWindow to see what will happen. The primitives just will go away from their coordinates. Also if I encrease/decrease the size of UC itself, it won't scale by proper way.</p>\n\n<pre><code>&lt;UserControl\n    x:Class=\"Painting_test.UC_Ellipse\"\n    xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n    xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n    xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\"\n    xmlns:local=\"clr-namespace:Painting_test\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    d:DesignHeight=\"300\"\n    d:DesignWidth=\"300\"\n    mc:Ignorable=\"d\"&gt;\n    &lt;Grid&gt;\n\n\n        &lt;Ellipse\n            Width=\"200\"\n            Height=\"200\"\n            Fill=\"Yellow\"\n            Stroke=\"Black\" /&gt;\n        &lt;Path x:Name=\"Bridge\"\n            Width=\"34.5\"\n            Height=\"69.5\"\n            Margin=\"115.5,127,0,0\"\n            HorizontalAlignment=\"Left\"\n            VerticalAlignment=\"Top\"\n            Data=\"M149,127 L115.5,195.5\"\n            Fill=\" Yellow\"\n            Stretch=\"Fill\"\n            Stroke=\"Black\" /&gt;\n        &lt;Path x:Name=\"Nose\"\n            Width=\"38.5\"\n            Height=\"1.008\"\n            Margin=\"115.5,195.5,0,0\"\n            HorizontalAlignment=\"Left\"\n            VerticalAlignment=\"Top\"\n            Data=\"M115.5,196.492 L153,196.5\"\n            Fill=\" Yellow\"\n            Stretch=\"Fill\"\n            Stroke=\"Black\" /&gt;\n        &lt;Rectangle x:Name=\"SquareEye\"\n            Width=\"24\"\n            Height=\"24\"\n            Margin=\"103.984,118,0,0\"\n            HorizontalAlignment=\"Left\"\n            VerticalAlignment=\"Top\"\n            Fill=\"Yellow\"\n            Stroke=\"Black\" /&gt;\n        &lt;Ellipse x:Name=\"CircleEye\"\n            Width=\"24\"\n            Height=\"24\"\n            Margin=\"169,118,0,0\"\n            HorizontalAlignment=\"Left\"\n            VerticalAlignment=\"Top\"\n            Fill=\"Yellow\"\n            Stroke=\"Black\" /&gt;\n\n    &lt;/Grid&gt;\n&lt;/UserControl&gt;\n</code></pre>\n"}, {"tags": ["c#", "asp.net-core", "lambda", "razor-pages"], "comments": [{"owner": {"reputation": 5789, "user_id": 2679750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/W8CvF.jpg?s=128&g=1", "display_name": "Mark C.", "link": "https://stackoverflow.com/users/2679750/mark-c"}, "edited": false, "score": 0, "creation_date": 1547052279, "post_id": 54114367, "comment_id": 95062174, "body": "1. Yes, 2. You can think of this as an anonymous function that&#39;s returning your modified settings of the <code>CookiePolicyOptions</code> class"}], "answers": [{"tags": [], "owner": {"reputation": 4214, "user_id": 5394572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H9Ql7.png?s=128&g=1", "display_name": "madreflection", "link": "https://stackoverflow.com/users/5394572/madreflection"}, "is_accepted": false, "score": 2, "last_activity_date": 1547062329, "creation_date": 1547062329, "answer_id": 54117092, "question_id": 54114367, "link": "https://stackoverflow.com/questions/54114367/how-does-this-lambda-function-work-in-razor-pages-tutorial-for-asp-net/54117092#54117092", "title": "How does this lambda function work in Razor pages tutorial for ASP .NET", "body": "<p>I'll speak directly to the two assertions first.</p>\n\n<blockquote>\n  <ol>\n  <li>The <code>options</code> <s>variable</s> parameter that is <s>sent</s> passed in <s>while</s> will have its <code>CheckConsentNeeded</code> set to true IN THIS SCOPE ONLY.</li>\n  </ol>\n</blockquote>\n\n<p>It <em>happens</em> \"in this scope only\" but that wording is misleading because the property value doesn't revert at some later point.  What <em>happens</em> in Vegas only (this scope) doesn't <em>stay</em> in Vegas only, because...</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>It does the changes in the <code>options =&gt;</code> lambda then sends in the modified version of options into the Configure function.</li>\n  </ol>\n</blockquote>\n\n<p>Yes, it <em>makes the changes</em> there, but it doesn't \"send\" the object anywhere.  It's like if I (the middleware) asked you (your application) for your autograph (desired cookie settings) and held the autograph book (<code>options</code>) for you while you signed it (modified its properties).</p>\n\n<p>The middleware pipeline doesn't relinquish control of the object it created and passed in, nor does it receive a new object upon return.  Resuming the metaphor, I don't get a new autograph book with your autograph in it and lose the original one with all the other autographs (other property changes) I had.</p>\n\n<p>In theory, the same instance could be passed to multiple delegates, provided by both you and any middlewares you're using that need specific settings, each changing properties as needed.  In theory, anyway.  I can't say if that ever happens in the real world but given the way it's structured, it seems possible.</p>\n\n<hr>\n\n<p><strong>Additional Details</strong></p>\n\n<p>What you're doing there is providing a configuration function <em>to be called later</em> by the middleware pipeline.  In order to see things from a different perspective, let's refactor it to a point of being almost absurdly verbose:</p>\n\n<pre><code>// In your 'ConfigureServices' method:\nAction&lt;CookiePolicyOptions&gt; myCookieConfigurator = MyCookiePolicyOptionsConfigurationMethod;\n\nservices.Configure&lt;CookiePolicyOptions&gt;(myCookieConfigurator);\n</code></pre>\n\n<p>Elsewhere in that class:</p>\n\n<pre><code>private void MyCookiePolicyOptionsConfigurationMethod(CookiePolicyOptions options)\n{\n    Func&lt;HttpContext, bool&gt; myCheckConsentNeeded = MyCheckConsentNeededMethod;\n\n    options.CheckConsentNeeded = myCheckConsentNeeded;\n    options.MinimumSameSitePolicy = SameSiteMode.None;\n}\n\nprivate bool MyCheckConsentNeededMethod(HttpContext context)\n{\n    return true;\n}\n</code></pre>\n\n<p>This is essentially what the C# compiler does to lambdas when there's no context capture involved, except it generates methods with names you can't possibly call directly in C# code.  (When there's context capture involved, there's more to it.)</p>\n\n<p>At some point, possibly long after <code>Configure</code> and your <code>ConfigureServices</code> have both returned, the middleware pipeline creates a <code>CookiePolicyOptions</code> instance and passes it to your lambda function, which then sets the options you specify.</p>\n\n<pre><code>// Somewhere in the middleware (although a bit more involved than this).\n\nCookiePolicyOptions cookiePolicyOptions = new CookiePolicyOptions();\nthat_guys_myCookieConfigurator_delegate(cookiePolicyOptions);\n// now store 'cookiePolicyOptions' for middleware to use\n</code></pre>\n\n<p>So how does the cookie middleware use the object that was just created and configured?</p>\n\n<p>If a middleware takes a <code>CookiePolicyOptions</code> parameter, that object gets injected into the call to its <code>Configure</code> method (not to be confused with yours by the same name in Startup.cs).  The middleware then uses that object's properties to configure its behavior.  Those properties' values have persisted long past the context in which they were assigned.</p>\n"}], "owner": {"reputation": 27, "user_id": 9065447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98d5b78de2e759367a8a486e7c12eccc?s=128&d=identicon&r=PG&f=1", "display_name": "Ian ", "link": "https://stackoverflow.com/users/9065447/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547069938, "creation_date": 1547050932, "last_edit_date": 1547069938, "question_id": 54114367, "link": "https://stackoverflow.com/questions/54114367/how-does-this-lambda-function-work-in-razor-pages-tutorial-for-asp-net", "title": "How does this lambda function work in Razor pages tutorial for ASP .NET", "body": "<p>I am following <a href=\"https://docs.microsoft.com/en-us/aspnet/core/tutorials/razor-pages/model?view=aspnetcore-2.2&amp;tabs=visual-studio-code\" rel=\"nofollow noreferrer\">this tutorial</a> for ASP.NET Core 2.2 and in their <code>ConfigureServices</code> they have the following lambda function.</p>\n\n<pre><code>services.Configure&lt;CookiePolicyOptions&gt;(options =&gt;\n{\n    // This lambda determines whether user consent for non-essential cookies is needed for a given request.\n    options.CheckConsentNeeded = context =&gt; true;\n    options.MinimumSameSitePolicy = SameSiteMode.None;\n});\n</code></pre>\n\n<p>I have read up on lambda functions in C# but want to make sure I have the following right:</p>\n\n<ol>\n<li>The options variable that is sent in while have its CheckConsentNeeded set to true IN THIS SCOPE ONLY.</li>\n<li>It does the changes in the options => lambda then sends in the modified version of options into the Configure function.</li>\n</ol>\n"}, {"tags": ["c#", "asp.net", "oauth", "adfs"], "comments": [{"owner": {"reputation": 1211, "user_id": 561380, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/f59b113e2b95cc3dfe2cffcc3acc6b81?s=128&d=identicon&r=PG", "display_name": "Paul Sinnema", "link": "https://stackoverflow.com/users/561380/paul-sinnema"}, "edited": false, "score": 0, "creation_date": 1547104272, "post_id": 54114302, "comment_id": 95078498, "body": "Nobody has a clue"}, {"owner": {"reputation": 746, "user_id": 3820806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e47232e2a6a3490d065cc7e0417c61af?s=128&d=identicon&r=PG&f=1", "display_name": "SamuelD MSFT", "link": "https://stackoverflow.com/users/3820806/samueld-msft"}, "edited": false, "score": 0, "creation_date": 1547515684, "post_id": 54114302, "comment_id": 95210849, "body": "ADFS supports OAuth. So, I&#39;m confused as to why you would consider this differently."}], "owner": {"reputation": 1211, "user_id": 561380, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/f59b113e2b95cc3dfe2cffcc3acc6b81?s=128&d=identicon&r=PG", "display_name": "Paul Sinnema", "link": "https://stackoverflow.com/users/561380/paul-sinnema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547050761, "creation_date": 1547050761, "question_id": 54114302, "link": "https://stackoverflow.com/questions/54114302/asp-net-authentication-with-oauth-and-adfs-depending-on-path", "title": "ASP.Net Authentication with OAuth and ADFS depending on path", "body": "<p>We have an existing ASP.Net site that needs authentication. I've implemented the  code below.</p>\n\n<p>The application needs authentication on the following paths:</p>\n\n<pre><code>/admin     - ADFS\n/edx/links - ADFS\n/api       - OAuth\n</code></pre>\n\n<p>The Api is used by an App and should be authenticated with OAuth and not ADFS but the app gets redirected to the ADFS server nontheless.</p>\n\n<p>Can we do what's described in 1 site or do we have to split the site in two (1 for web access and the api)? I would prefer the 1 site option.</p>\n\n<pre><code>public void Configuration(IAppBuilder app)\n    {\n        app.UseOwinExceptionLogger();\n        app.SetLoggerFactory(new OwinLoggerFactory());\n\n        var config = new HttpConfiguration { DependencyResolver = new StructureMapResolver(Container) };\n        var settings = Container.GetInstance&lt;ISettings&gt;();\n\n        ConfigureOAuth(app, settings);\n        app.Map(\"/admin\", inner =&gt; ConfigureAuth(inner, settings));\n        app.Map(\"/edx/links\", inner =&gt; ConfigureAuth(inner, settings));\n\n        WebApiConfig.Register(config);\n        app.UseCors(CorsOptions.AllowAll);\n        app.UseWebApi(config);\n    }\n\n    private static void ConfigureOAuth(IAppBuilder app, ISettings settings)\n    {\n        var oAuthServerOptions = new OAuthAuthorizationServerOptions()\n        {\n            AllowInsecureHttp = true,\n            TokenEndpointPath = new PathString(\"/token\"),\n            AccessTokenExpireTimeSpan = TimeSpan.FromMinutes(20),\n            Provider = new SimpleAuthorizationServerProvider(),\n            RefreshTokenProvider = new SimpleRefreshTokenProvider(),\n        };\n\n        // Token Generation\n        app.UseOAuthAuthorizationServer(oAuthServerOptions);\n\n        app.Use(async (context, next) =&gt; { await next.Invoke(); });\n    }\n\n    private void ConfigureAuth(IAppBuilder app, ISettings settings)\n    {\n        // Work-around to fix Katana issue 197: https://katanaproject.codeplex.com/workitem/197\n        // https://github.com/KentorIT/owin-cookie-saver\n        // app.UseKentorOwinCookieSaver();\n        app.SetDefaultSignInAsAuthenticationType(WsFederationAuthenticationDefaults.AuthenticationType);\n\n        app.UseCookieAuthentication(new CookieAuthenticationOptions\n        {\n            AuthenticationType = WsFederationAuthenticationDefaults.AuthenticationType,\n            CookieManager = new SystemWebCookieManager()\n        });\n\n        app.UseWsFederationAuthentication(\n            new WsFederationAuthenticationOptions\n            {\n                Wtrealm = settings.WsFedRealm,\n                MetadataAddress = settings.WsFedMetadataUrl,\n                TokenValidationParameters = new TokenValidationParameters\n                {\n                    NameClaimType = ClaimsExtensions.WurNameIdentifier,\n                    SaveSigninToken = true\n                },\n                Notifications = new WsFederationAuthenticationNotifications\n                {\n                    MessageReceived = context =&gt;\n                    {\n                        Log.Info($\"Message received {context.ProtocolMessage}\");\n                        return Task.FromResult(0);\n                    },\n                    RedirectToIdentityProvider = context =&gt;\n                    {\n                        Log.Info($\"Redirect to identity provider {context?.Request?.Uri?.AbsolutePath}\");\n                        return Task.FromResult(0);\n                    },\n                    SecurityTokenValidated = context =&gt;\n                    {\n                        Log.Info(\"Security token validated\");\n                        return Task.FromResult(0);\n                    },\n                    SecurityTokenReceived = context =&gt;\n                    {\n                        Log.Info($\"SecurityTokenReceived {context?.Response?.ReasonPhrase}\");\n                        return Task.FromResult(0);\n                    },\n                    AuthenticationFailed = context =&gt;\n                    {\n                        context.HandleResponse();\n                        context.Response.Redirect(\"~/Error?message=\" + context.Exception.Message);\n                        return Task.FromResult(0);\n                    }\n                }\n            });\n\n        AntiForgeryConfig.UniqueClaimTypeIdentifier = ClaimTypes.Name;\n    }\n</code></pre>\n"}, {"tags": ["c#", "duplicates", "enumerable"], "answers": [{"comments": [{"owner": {"reputation": 1101, "user_id": 7713568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6add2f841b8d15f7af0e6eeed42f11fa?s=128&d=identicon&r=PG&f=1", "display_name": "Malior", "link": "https://stackoverflow.com/users/7713568/malior"}, "edited": false, "score": 0, "creation_date": 1547051420, "post_id": 54114397, "comment_id": 95061611, "body": "Why was this downrated?. I deleted now my answer, as is is using the same approach but maybe was too much in detail."}, {"owner": {"reputation": 5392, "user_id": 1396994, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7742f086edc869b1ddb3fa6179651689?s=128&d=identicon&r=PG", "display_name": "Cam Bruce", "link": "https://stackoverflow.com/users/1396994/cam-bruce"}, "edited": false, "score": 0, "creation_date": 1547057441, "post_id": 54114397, "comment_id": 95064764, "body": "you only partially answered the question"}], "tags": [], "owner": {"reputation": 1271, "user_id": 1296597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/A1Puh.jpg?s=128&g=1", "display_name": "Adam Hess", "link": "https://stackoverflow.com/users/1296597/adam-hess"}, "is_accepted": false, "score": 0, "last_activity_date": 1547051532, "last_edit_date": 1547051532, "creation_date": 1547051066, "answer_id": 54114397, "question_id": 54114257, "link": "https://stackoverflow.com/questions/54114257/how-to-search-for-duplicates-in-an-enumerable-list-checking-specific-properties/54114397#54114397", "title": "How to search for duplicates in an Enumerable list checking specific properties", "body": "<p>Use  Linq <code>.GroupBy()</code> It will create a list of lists where each list is organized by a key.   </p>\n\n<p><code>list.GroupBy(e =&gt; new { e.Name, e.Type })</code></p>\n"}, {"tags": [], "owner": {"reputation": 15446, "user_id": 7299782, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/nNfiq.png?s=128&g=1", "display_name": "Anu Viswan", "link": "https://stackoverflow.com/users/7299782/anu-viswan"}, "is_accepted": false, "score": 1, "last_activity_date": 1547055617, "last_edit_date": 1547055617, "creation_date": 1547051112, "answer_id": 54114413, "question_id": 54114257, "link": "https://stackoverflow.com/questions/54114257/how-to-search-for-duplicates-in-an-enumerable-list-checking-specific-properties/54114413#54114413", "title": "How to search for duplicates in an Enumerable list checking specific properties", "body": "<p>To search for duplicates (based on two fields-<code>Name and Type</code>) in a collection and retrieve a thid field (<code>ID</code>), you need to begin by breaking the problems into parts.</p>\n\n<p>1) Find Duplicates</p>\n\n<ul>\n<li>GroupBy key fields, (Name and Type) </li>\n</ul>\n\n<p><code>list.GroupBy(x=&gt;new{x.Name,x.Type})</code></p>\n\n<ul>\n<li>Filter Groups which has more than 1 elements </li>\n</ul>\n\n<p><code>list.GroupBy(x=&gt;new{x.Name,x.Type}).Where(x=&gt;x.Count()&gt;1)</code></p>\n\n<p>2) Select IDs</p>\n\n<ul>\n<li>Flatten the groups</li>\n</ul>\n\n<p><code>list.GroupBy(x=&gt;new{x.Name,x.Type})\n    .Where(x=&gt;x.Count()&gt;1)\n    .SelectMany(x=&gt;x.ToList())</code></p>\n\n<ul>\n<li><p>Select IDs</p>\n\n<p><code>list.GroupBy(x=&gt;new{x.Name,x.Type})\n                     .Where(x=&gt;x.Count()&gt;1)\n                     .SelectMany(x=&gt;x.ToList()).Select(x=&gt;x.ID)</code></p></li>\n</ul>\n\n<p>Putting it all together, for example,</p>\n\n<pre><code>   var list = new List&lt;CustomObject&gt;\n    {\n        new CustomObject{ID=1, Name=\"Abc\",Type=\"Type1\"},\n        new CustomObject{ID=2, Name=\"Def\",Type=\"Type2\"},\n        new CustomObject{ID=3, Name=\"Abc\",Type=\"Type1\"},\n        new CustomObject{ID=4, Name=\"Abc\",Type=\"Type2\"},\n        new CustomObject{ID=5, Name=\"Def\",Type=\"Type2\"},\n        new CustomObject{ID=6, Name=\"Def\",Type=\"Type1\"},\n    };\n\n    var result = list.GroupBy(x=&gt;new{x.Name,x.Type})\n                     .Where(x=&gt;x.Count()&gt;1)\n                     .SelectMany(x=&gt;x.ToList()).Select(x=&gt;x.ID);\n</code></pre>\n\n<p>Output for above example</p>\n\n<pre><code>1 \n3 \n2 \n5 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5392, "user_id": 1396994, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7742f086edc869b1ddb3fa6179651689?s=128&d=identicon&r=PG", "display_name": "Cam Bruce", "link": "https://stackoverflow.com/users/1396994/cam-bruce"}, "is_accepted": false, "score": 1, "last_activity_date": 1547051131, "creation_date": 1547051131, "answer_id": 54114418, "question_id": 54114257, "link": "https://stackoverflow.com/questions/54114257/how-to-search-for-duplicates-in-an-enumerable-list-checking-specific-properties/54114418#54114418", "title": "How to search for duplicates in an Enumerable list checking specific properties", "body": "<p>Use Linq and <code>group</code> to group all objects by name and type, then only taking ones with a Count > 1.</p>\n\n<pre><code>var group = from myObject o in myObjects\n           group new { p.Name, p.Type } into grp\n           select new { Name = grp.Key.Name, Type = grp.Key.Type, Count = grp.Count() };\n\nvar dups = group.Where(g=&gt;g.Count &gt;1);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2025303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1547055617, "creation_date": 1547050640, "question_id": 54114257, "link": "https://stackoverflow.com/questions/54114257/how-to-search-for-duplicates-in-an-enumerable-list-checking-specific-properties", "title": "How to search for duplicates in an Enumerable list checking specific properties", "body": "<p>I have an Enumerable list of objects in it.</p>\n\n<p>The object have the following properties:\n-ID\n-Name\n-Type</p>\n\n<p>I would like to collect the ID-s of those objects which have the same name and type in the list.</p>\n"}, {"tags": ["c#", "arrays", "linq", "lambda", "count"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10058046"}, "edited": false, "score": 2, "creation_date": 1547049826, "post_id": 54113978, "comment_id": 95060641, "body": "Up-vote for showing effort and example input/output. In relation to your question - you&#39;d have to be a bit clearer in how you want this improved, since I think it&#39;s &#39;fine&#39; (in terms of general approach) the way it is. If it&#39;s a working version and you&#39;re open to any suggestion, it might be that <a href=\"http://codereview.stackexchange.com\">codereview.stackexchange.com</a> is the best place for it."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1547049891, "post_id": 54113978, "comment_id": 95060679, "body": "Group and count <i>are</i> the better answer if you want the frequency. What you ask though is to get a <i>second</i> array that repeats each value&#39;s frequency, like SQL&#39;s` <code>COUNT(*) OVER (PARTITION by SomeColumn)</code>"}, {"owner": {"reputation": 90691, "user_id": 51685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVhK5.jpg?s=128&g=1", "display_name": "AKX", "link": "https://stackoverflow.com/users/51685/akx"}, "edited": false, "score": 0, "creation_date": 1547049892, "post_id": 54113978, "comment_id": 95060680, "body": "&quot;generate a result that&#39;s the same dimensions as the original array&quot;... what about {99, 3, 6, 9, 99}? Would that return an array with the 100 elements, since a[99] would be 2?"}, {"owner": {"reputation": 197, "user_id": 4289635, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Aeeoj.gif?s=128&g=1", "display_name": "Steve Silberberg", "link": "https://stackoverflow.com/users/4289635/steve-silberberg"}, "reply_to_user": {"reputation": 90691, "user_id": 51685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVhK5.jpg?s=128&g=1", "display_name": "AKX", "link": "https://stackoverflow.com/users/51685/akx"}, "edited": false, "score": 0, "creation_date": 1547049997, "post_id": 54113978, "comment_id": 95060758, "body": "@AKX sorry for the ambiguity.  For your example, I&#39;d like the code to return {2, 1, 1, 1, 2}"}, {"owner": {"reputation": 133611, "user_id": 152602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f370b4bd787fc68f9f62d9c6781cb79?s=128&d=identicon&r=PG", "display_name": "Lee", "link": "https://stackoverflow.com/users/152602/lee"}, "edited": false, "score": 4, "creation_date": 1547050007, "post_id": 54113978, "comment_id": 95060762, "body": "Make <code>groups</code> a dictionary of <code>item -&gt; count</code> with <code>testarray.GruopBy(p =&gt; p).ToDictionary(g =&gt; g.Key, g =&gt; g.Count())</code> then <code>final = testarray.Select(i =&gt; groups[i]).ToArray()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "is_accepted": true, "score": 2, "last_activity_date": 1547051839, "creation_date": 1547051839, "answer_id": 54114644, "question_id": 54113978, "link": "https://stackoverflow.com/questions/54113978/frequency-that-elements-appear-in-an-array-code-works-but-looking-for-a-better/54114644#54114644", "title": "Frequency that elements appear in an array. Code works but looking for a better answer", "body": "<p>I would use <code>GroupBy</code> to group the items store the counts in a <code>Dictionary</code>, then construct the final array by looking up each element in the dictionary to retrieve its count.</p>\n\n<pre><code>var testarray = new int[10] { 3, 3, 4, 1, 2, 5, 3, 1, 2, 5 };\nvar dict = testarray.GroupBy(item =&gt; item).ToDictionary(item =&gt; item.Key, item =&gt; item.Count());\nvar final = testarray.Select(item =&gt; dict[item]).ToArray();\n</code></pre>\n\n<p>testarray<br/> <code>3, 3, 4, 1, 2, 5, 3, 1, 2, 5</code></p>\n\n<p>final<br/> <code>3, 3, 1, 2, 2, 2, 3, 2, 2, 2</code></p>\n"}, {"tags": [], "owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "is_accepted": false, "score": 0, "last_activity_date": 1547147009, "last_edit_date": 1547147009, "creation_date": 1547075604, "answer_id": 54119793, "question_id": 54113978, "link": "https://stackoverflow.com/questions/54113978/frequency-that-elements-appear-in-an-array-code-works-but-looking-for-a-better/54119793#54119793", "title": "Frequency that elements appear in an array. Code works but looking for a better answer", "body": "<p>Executing <code>GroupBy</code> effectively creates an internal <code>Dictionary</code> (actually, a <code>Lookup</code>) and then you are breaking it back down in order to create the final <code>Dictionary</code>.</p>\n\n<p>That seems wasteful to me. It may be more efficient to use <code>ToLookup</code>, which returns the <code>Lookup</code>, and then get the counts:</p>\n\n<pre><code>var counts = testarray.ToLookup(n =&gt; n);\nvar final = testarray.Select(t =&gt; ((ICollection&lt;int&gt;)counts[t]).Count).ToArray();\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 4289635, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Aeeoj.gif?s=128&g=1", "display_name": "Steve Silberberg", "link": "https://stackoverflow.com/users/4289635/steve-silberberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 54114644, "answer_count": 2, "score": -1, "last_activity_date": 1547147009, "creation_date": 1547049655, "last_edit_date": 1547050207, "question_id": 54113978, "link": "https://stackoverflow.com/questions/54113978/frequency-that-elements-appear-in-an-array-code-works-but-looking-for-a-better", "title": "Frequency that elements appear in an array. Code works but looking for a better answer", "body": "<p>I'm looking for a more efficient and easier way to count the number of elements in an array and how frequently they appear.  GroupBy is the obvious answer but then I'd like to generate a result that's the same dimensions as the original array.</p>\n\n<p>I'm writing this in C# and want to leverage lambda expressions.  My code works but there has to be a better way to do something this simple.  </p>\n\n<pre><code>        var testarray = new int[10]\n        { 3, 3, 4, 1, 2, 5, 3, 1, 2, 5 };\n\n\n        var groups = testarray.GroupBy(p =&gt; p)\n            .Select(group =&gt; new\n            {\n                TestKey = group.Key,\n                Count = group.Count()\n            });\n\n        var final = testarray.Join(groups,\n            src =&gt; src,\n            dest =&gt; dest.TestKey,\n            (src, dest) =&gt; dest.Count\n            ).ToArray();\n</code></pre>\n\n<p>Input:\n<code>{ 3, 3, 4, 1, 2, 5, 3, 1, 2, 5 }</code></p>\n\n<p>Expected and actual results:\n<code>{3, 3, 1, 2, 2, 2, 3, 2, 2, 2}</code></p>\n"}, {"tags": ["c#", "arrays"], "comments": [{"owner": {"reputation": 1061, "user_id": 7293119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eznd2.png?s=128&g=1", "display_name": "Pretasoc", "link": "https://stackoverflow.com/users/7293119/pretasoc"}, "edited": false, "score": 1, "creation_date": 1547049933, "post_id": 54113951, "comment_id": 95060712, "body": "It sounds a lot like <a href=\"https://en.wikipedia.org/wiki/Bubble_sort\" rel=\"nofollow noreferrer\">Bubblesort</a>"}, {"owner": {"reputation": 1744, "user_id": 968671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nqf2x.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/968671/mat"}, "edited": false, "score": 0, "creation_date": 1547050633, "post_id": 54113951, "comment_id": 95061139, "body": "Your question seems to be <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">homework</a>."}], "answers": [{"tags": [], "owner": {"reputation": 823, "user_id": 9157032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5efaf026881ab3eecab1df1e023f3d?s=128&d=identicon&r=PG&f=1", "display_name": "TimB", "link": "https://stackoverflow.com/users/9157032/timb"}, "is_accepted": false, "score": 0, "last_activity_date": 1547051579, "last_edit_date": 1547051579, "creation_date": 1547050776, "answer_id": 54114308, "question_id": 54113951, "link": "https://stackoverflow.com/questions/54113951/trying-to-move-elements-in-an-array-instead-replaces-elements/54114308#54114308", "title": "Trying to move elements in an array instead replaces elements", "body": "<p>Let's have a look at what the method does, exactly.</p>\n\n<p>Assuming the string is <code>abcdef</code>, the derived array has the length 6. 6-2 is 4, so temp should be e - which is correct.</p>\n\n<p>Now the iteration starts at 1, so b. 2, so array element 3 (c), gets replaced by b.</p>\n\n<p>Next iteration: The next character after array element 2 (b) is now also b... As c got replaced by b. So d gets replaced by b, also!</p>\n\n<p>And same goes for e. Output: <code>aebbbf</code>.</p>\n\n<p>A solution could be this:</p>\n\n<pre><code>public char[] Xmethod(char[] input)\n{\n    char[] outputArray = input;\n    char temp = input[6-2];\n    for(int i = 1; i &lt; input.Length -2; i++) \n    {\n        outputArray[i+1] = input[i]; \n    }\n    outputArray[1] = temp;\n    return outputArray\n}\n</code></pre>\n\n<p>Hope this helped.</p>\n\n<p>EDIT: in an earlier version I made a mistake when creating the outputArray. It is fixed now.</p>\n"}], "owner": {"reputation": 13, "user_id": 7808225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bee161676823532180aecfa37e22c3cd?s=128&d=identicon&r=PG&f=1", "display_name": "Unheil", "link": "https://stackoverflow.com/users/7808225/unheil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547051579, "creation_date": 1547049573, "question_id": 54113951, "link": "https://stackoverflow.com/questions/54113951/trying-to-move-elements-in-an-array-instead-replaces-elements", "title": "Trying to move elements in an array instead replaces elements", "body": "<p>So, my assignment is that I have to make a program that changes a string and places it in the right order. Now, it is only allowed to do 3 things, one of which I have a question about. It is  allowed to take the second character and move it to the third, etc., until you arrive at the second to last character. This one gets replaced by the third to last character. So, abcdef would become aebcdf. My code gives me as output aebbbf. I have this:</p>\n\n<pre><code>class Program{\nstatic void Main(string[] args)\n    {\n        var p = new Program();\n        string input = Console.ReadLine();\n        char[] characters = new char[input.Length];\n        characters = input.ToCharArray();\n\n        string answer = Console.ReadLine();\n\n        if (answer == \"x\")\n        {\n            p.MethodX(characters);\n            string s = new string(characters);\n            Console.WriteLine(s);\n        }\n\n        Console.ReadKey();\n    }\n}\n</code></pre>\n\n<p>And the method MethodX:</p>\n\n<pre><code>public void MethodeX(char[] input)\n    {\n        int lengthText = input.Length;\n        char temp = input[lengthText - 2];\n\n        for (int i = 1; i &lt; input.Length - 2; i++)\n        {\n            input[i + 1] = input[i];\n            input[1] = temp;\n        }\n    }\n</code></pre>\n\n<p>Thanks in advance for the help!</p>\n"}, {"tags": ["c#", "asp.net-core", ".net-core", "swagger", "nswag"], "comments": [{"owner": {"reputation": 5602, "user_id": 991609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fb7450035066717cb7c28919342d7f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Neville Nazerane", "link": "https://stackoverflow.com/users/991609/neville-nazerane"}, "edited": false, "score": 0, "creation_date": 1547071827, "post_id": 54113641, "comment_id": 95070825, "body": "check this <a href=\"https://docs.microsoft.com/en-us/aspnet/core/mvc/advanced/custom-model-binding?view=aspnetcore-2.2\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/aspnet/core/mvc/advanced/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1567604127, "last_edit_date": 1567604127, "creation_date": 1567603585, "answer_id": 57789422, "question_id": 54113641, "link": "https://stackoverflow.com/questions/54113641/attribute-based-routing-arguments-with-different-name-to-variable-aspnetcore/57789422#57789422", "title": "Attribute-based routing, arguments with different name to variable - aspnetcore", "body": "<p>The <a href=\"https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-2.2#sources\" rel=\"nofollow noreferrer\">binding source attributes</a> allow for configuration of the name used for model-binding. In your example, you're getting the value from the route, which means you can use the <code>FromRoute</code> attribute on the parameter:</p>\n\n<pre><code>[FromRoute(Name=\"person_name\")] string personName\n</code></pre>\n"}], "owner": {"reputation": 11351, "user_id": 77884, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dUwhF.jpg?s=128&g=1", "display_name": "Kjensen", "link": "https://stackoverflow.com/users/77884/kjensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 57789422, "answer_count": 1, "score": 1, "last_activity_date": 1567604127, "creation_date": 1547048597, "last_edit_date": 1567603617, "question_id": 54113641, "link": "https://stackoverflow.com/questions/54113641/attribute-based-routing-arguments-with-different-name-to-variable-aspnetcore", "title": "Attribute-based routing, arguments with different name to variable - aspnetcore", "body": "<p>I need to do this</p>\n\n<pre><code>[Route(\"/api/highfive/{person_name}\")]\npublic IActionResult HighFive(string personName){\n   //do stuff\n}\n</code></pre>\n\n<p>Is there a way to map variable personName to what is supplied as person_name from the route?</p>\n\n<p>The two below options work -as long as there is a match between route argument and variable name (which makes sense).</p>\n\n<pre><code>[Route(\"/api/highfive/{person_name}\")]\npublic IActionResult HighFive(string person_name){\n   //do stuff\n}\n\n[Route(\"/api/highfive/{personName}\")]\npublic IActionResult HighFive(string personName){\n   //do stuff\n}\n</code></pre>\n\n<blockquote>\n  <p>But why do you want this??</p>\n</blockquote>\n\n<ul>\n<li><p>Swagger generates documentation that has to match that of a previous API, this is replacing - and it uses the variable names from route to generate documentation.</p></li>\n<li><p>using person_name as a variable name is against our naming conventions</p></li>\n<li><p>Yes it is kind of silly - but if there is an easy fix I am not aware of, that would be awesome.</p></li>\n</ul>\n"}, {"tags": ["c#", "vb.net"], "comments": [{"owner": {"reputation": 23468, "user_id": 4137916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bab91fda70af7e9beb8934d323540e8?s=128&d=identicon&r=PG", "display_name": "Jeroen Mostert", "link": "https://stackoverflow.com/users/4137916/jeroen-mostert"}, "edited": false, "score": 1, "creation_date": 1547048562, "post_id": 54113567, "comment_id": 95059776, "body": "<code>As &lt;MarshalAs(UnmanageType.Interface)&gt; IStream</code> should do it (not tested, it&#39;s been ages since I&#39;ve done any VB.NET). C# needs a clumsy <code>return: </code> override for such attributes, in VB.NET the attribute stays more naturally with the declaration."}, {"owner": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1547048672, "post_id": 54113567, "comment_id": 95059862, "body": "Maybe this will help (<a href=\"https://social.msdn.microsoft.com/Forums/en-US/14364cee-e099-46d3-9697-3b05f2f29719/does-istorage-openstream-work-in-vb?forum=vbgeneral\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/en-US/&hellip;</a>)"}, {"owner": {"reputation": 12772, "user_id": 490374, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8c174feb69caed3f5ba5fd68d9ab3c63?s=128&d=identicon&r=PG", "display_name": "Ann L.", "link": "https://stackoverflow.com/users/490374/ann-l"}, "edited": false, "score": 1, "creation_date": 1547048858, "post_id": 54113567, "comment_id": 95059986, "body": "Nice pun, by the way. :)"}], "answers": [{"tags": [], "owner": {"reputation": 4340, "user_id": 9139384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgV5s.png?s=128&g=1", "display_name": "Yennefer", "link": "https://stackoverflow.com/users/9139384/yennefer"}, "is_accepted": true, "score": 2, "last_activity_date": 1547048679, "creation_date": 1547048679, "answer_id": 54113663, "question_id": 54113567, "link": "https://stackoverflow.com/questions/54113567/issue-converting-c-marshal-interface-code-to-vb-net/54113663#54113663", "title": "Issue converting C# marshal interface code to VB.NET", "body": "<p>You can apply the attribute to the return value in this way:</p>\n\n<pre><code>Function CreateStream(&lt;[In], MarshalAs(UnmanagedType.BStr)&gt; ByVal pwcsName As String,\n            &lt;[In], MarshalAs(UnmanagedType.U4)&gt; ByVal grfMode As Integer,\n            &lt;[In], MarshalAs(UnmanagedType.U4)&gt; ByVal reserved1 As Integer,\n            &lt;[In], MarshalAs(UnmanagedType.U4)&gt; ByVal reserved2 As Integer) As &lt;MarshalAs(UnmanagedType.Interface)&gt; IStream\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9257215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4eb253ecaa2e186cd205ab7c4ea6eac?s=128&d=identicon&r=PG&f=1", "display_name": "1more", "link": "https://stackoverflow.com/users/9257215/1more"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 54113663, "answer_count": 1, "score": 1, "last_activity_date": 1547048709, "creation_date": 1547048360, "last_edit_date": 1547048709, "question_id": 54113567, "link": "https://stackoverflow.com/questions/54113567/issue-converting-c-marshal-interface-code-to-vb-net", "title": "Issue converting C# marshal interface code to VB.NET", "body": "<p>I'm attempting to convert a project from C# to VB.NET to enable drag and dropping of Outlook messages into our program. </p>\n\n<p>The original source can be found <a href=\"https://www.codeproject.com/Articles/28209/Outlook-Drag-and-Drop-in-C?fid=1524694\" rel=\"nofollow noreferrer\">here</a> on CodeProject. </p>\n\n<p>I'm 95% of the way there but having trouble implementing the IStorage interface , a portion of which is outlined below.</p>\n\n<pre class=\"lang-c# prettyprint-override\"><code>public interface IStorage\n{\n    [return: MarshalAs(UnmanagedType.Interface)]\n    IStream CreateStream([In, MarshalAs(UnmanagedType.BStr)] string pwcsName,\n                         [In, MarshalAs(UnmanagedType.U4)] int grfMode,\n                         [In, MarshalAs(UnmanagedType.U4)] int reserved1,\n                         [In, MarshalAs(UnmanagedType.U4)] int reserved2);                \n}\n</code></pre>\n\n<p>I've converted it to the following in VB.NET:</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>&lt;MarshalAs(UnmanagedType.Interface)&gt;\nFunction CreateStream(&lt;[In], MarshalAs(UnmanagedType.BStr)&gt; ByVal pwcsName As String,\n                      &lt;[In], MarshalAs(UnmanagedType.U4)&gt; ByVal grfMode As Integer,\n                      &lt;[In], MarshalAs(UnmanagedType.U4)&gt; ByVal reserved1 As Integer,\n                      &lt;[In], MarshalAs(UnmanagedType.U4)&gt; ByVal reserved2 As Integer) As IStream\n</code></pre>\n\n<p>However, it results in the following error:</p>\n\n<blockquote>\n  <p>Attribue 'MarshalAsAttribute' cannot be applied to 'CreateStream' because the attribute is not valid on this declaration type.</p>\n</blockquote>\n\n<p>I'm a little out of my depth here and would really appreciate any <em>pointers</em> you may have in helping me solve this issue. </p>\n\n<p>Many thanks.</p>\n"}, {"tags": ["c#", "winforms"], "comments": [{"owner": {"reputation": 5031, "user_id": 7177029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/F4BB8.jpg?s=128&g=1", "display_name": "Kunal Mukherjee", "link": "https://stackoverflow.com/users/7177029/kunal-mukherjee"}, "edited": false, "score": 1, "creation_date": 1547048334, "post_id": 54113554, "comment_id": 95059619, "body": "Can you show us the expected output for the input"}, {"owner": {"reputation": 20705, "user_id": 5174469, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/cXyx5.jpg?s=128&g=1", "display_name": "Mong Zhu", "link": "https://stackoverflow.com/users/5174469/mong-zhu"}, "edited": false, "score": 0, "creation_date": 1547048498, "post_id": 54113554, "comment_id": 95059730, "body": "did you made any efforts to solve this problem? would you care to share them with us ?"}, {"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "reply_to_user": {"reputation": 5031, "user_id": 7177029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/F4BB8.jpg?s=128&g=1", "display_name": "Kunal Mukherjee", "link": "https://stackoverflow.com/users/7177029/kunal-mukherjee"}, "edited": false, "score": 0, "creation_date": 1547048510, "post_id": 54113554, "comment_id": 95059738, "body": "@KunalMukherjee if the user click the word &quot;description&quot; as example the output will be 2"}, {"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "reply_to_user": {"reputation": 20705, "user_id": 5174469, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/cXyx5.jpg?s=128&g=1", "display_name": "Mong Zhu", "link": "https://stackoverflow.com/users/5174469/mong-zhu"}, "edited": false, "score": 0, "creation_date": 1547048707, "post_id": 54113554, "comment_id": 95059884, "body": "@MongZhu .. I searched if there is a good logarithm or an easy property that can be used...  currently I&#39;m thinking in getting the sentence from the start to the  CaretPosition then count the words.."}, {"owner": {"reputation": 5031, "user_id": 7177029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/F4BB8.jpg?s=128&g=1", "display_name": "Kunal Mukherjee", "link": "https://stackoverflow.com/users/7177029/kunal-mukherjee"}, "edited": false, "score": 0, "creation_date": 1547048847, "post_id": 54113554, "comment_id": 95059979, "body": "So you are saying that once he clicks on the word, you should return him the word number which is clicked?"}, {"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "reply_to_user": {"reputation": 5031, "user_id": 7177029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/F4BB8.jpg?s=128&g=1", "display_name": "Kunal Mukherjee", "link": "https://stackoverflow.com/users/7177029/kunal-mukherjee"}, "edited": false, "score": 0, "creation_date": 1547049002, "post_id": 54113554, "comment_id": 95060076, "body": "@KunalMukherjee yes thanks for clarification..."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "edited": false, "score": 0, "creation_date": 1547061411, "post_id": 54113798, "comment_id": 95066450, "body": "Waw thanks Malior, this is elegant and working exactly as required"}, {"owner": {"reputation": 1101, "user_id": 7713568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6add2f841b8d15f7af0e6eeed42f11fa?s=128&d=identicon&r=PG&f=1", "display_name": "Malior", "link": "https://stackoverflow.com/users/7713568/malior"}, "reply_to_user": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "edited": false, "score": 0, "creation_date": 1547061749, "post_id": 54113798, "comment_id": 95066595, "body": "Glad, that it helps. But to have the &quot;user-approved&quot; you should have a look to the solution from @Kunal Mukherjee and check the link. Using Regex with good rules would be the ideal solution."}, {"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "edited": false, "score": 0, "creation_date": 1547062220, "post_id": 54113798, "comment_id": 95066797, "body": "yes, I will try to correct the null reference issue and use It .. thanks for help"}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "edited": false, "score": 1, "creation_date": 1547082886, "post_id": 54113798, "comment_id": 95073567, "body": "The idea is good. You could use a different array of chars to split the Text, adding some punctuations (peple often forget to insert a space between punctuations) and removing <code>\\r</code>, because the RTB transforms any CR/LF sequence in just LF (<code>\\n</code>). Something llike: <code>var words = substring.Split(&quot; ,.:;\\n&quot;.ToCharArray(), StringSplitOptions.RemoveEmptyEntries);</code>. <code>var count = words.Length;</code> is useless: you just need <code>words.Length</code>."}], "tags": [], "owner": {"reputation": 1101, "user_id": 7713568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6add2f841b8d15f7af0e6eeed42f11fa?s=128&d=identicon&r=PG&f=1", "display_name": "Malior", "link": "https://stackoverflow.com/users/7713568/malior"}, "is_accepted": true, "score": 3, "last_activity_date": 1547049965, "last_edit_date": 1547049965, "creation_date": 1547049126, "answer_id": 54113798, "question_id": 54113554, "link": "https://stackoverflow.com/questions/54113554/how-can-i-get-the-clicked-word-number-index-in-a-richtextbox/54113798#54113798", "title": "How can I get the clicked word number ( Index ) in a RichTextBox", "body": "<p>I suggest this:</p>\n\n<pre><code>public Form1()\n    {\n        InitializeComponent();\n\n        richTextBox1.Click += RichTextBox1_Click;\n    }\n\n    private void RichTextBox1_Click(object sender, EventArgs e)\n    {\n        var start = richTextBox1.SelectionStart;\n        var substring = richTextBox1.Text.Substring(0, start);\n        var words = substring.Split(new string[] { \" \", \"\\r\\n\" }, StringSplitOptions.None);\n        var count = words.Length;\n\n        labelCurrentWordNumber.Text = count.ToString();\n    }\n</code></pre>\n\n<p>It will not include the word, when the cursor is in front of a word. if it should, make StringSplitOptions.None</p>\n\n<p>EDIT: I added the \"\\r\\n\" for line break also to increase the number for each word. But I thing you will also have to filter out maybe things line , .  ; and so on, to only count words. But this depends on the purpuse you're using this.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "edited": false, "score": 0, "creation_date": 1547061317, "post_id": 54113923, "comment_id": 95066414, "body": "thanks Oliver Dalton ...  this the code is create may be I has to add new line and other checks to tweak the counting."}], "tags": [], "owner": {"reputation": 329, "user_id": 8786171, "user_type": "registered", "profile_image": "https://graph.facebook.com/937286796419111/picture?type=large", "display_name": "Oliver Dalton", "link": "https://stackoverflow.com/users/8786171/oliver-dalton"}, "is_accepted": false, "score": 1, "last_activity_date": 1547049505, "creation_date": 1547049505, "answer_id": 54113923, "question_id": 54113554, "link": "https://stackoverflow.com/questions/54113554/how-can-i-get-the-clicked-word-number-index-in-a-richtextbox/54113923#54113923", "title": "How can I get the clicked word number ( Index ) in a RichTextBox", "body": "<p>Not as elegant as Malior's solution but this also works.</p>\n\n<pre><code>private int currentWordIndex()\n{\n    int currentWordIndex = 1;\n    int charactersCounted = 1;\n\n    if (richTextBox1.SelectionStart != 0)\n    {\n        foreach (Char character in richTextBox1.Text)\n        {\n            charactersCounted++;\n\n            if (char.IsWhiteSpace(character))\n                currentWordIndex++;\n\n            if (charactersCounted == richTextBox1.SelectionStart)\n                break;\n        }\n    }\n\n    else\n        currentWordIndex = 1;\n\n    return currentWordIndex;\n}\n</code></pre>\n\n<p>Just copy this method and add currentWordIndex() to the richTextBox1_Click event.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "edited": false, "score": 0, "creation_date": 1547061814, "post_id": 54114271, "comment_id": 95066624, "body": "Dear Kunal Mukherjee thanks for help  I tried your code ... I think it is powerful and fast for a big texts... but it need some corrections ...  <code>string text = richTextBox1.SelectionStart; </code> this should change to  ` string text = richTextBox1.Text.Substring(0, start); `  and I get null reference error because of this :-  <code>tokenizedWordLookup.Where(x =&gt; x.Item3 == richTextBox1.SelectionStart).FirstOrDefault().Item2.ToString&zwnj;&#8203;();</code>"}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "edited": false, "score": 0, "creation_date": 1547081941, "post_id": 54114271, "comment_id": 95073409, "body": "<b><code>string text = richTextBox1.SelectionStart;</code></b>? <code>SelectionStart</code> returns an <code>int</code>."}, {"owner": {"reputation": 5031, "user_id": 7177029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/F4BB8.jpg?s=128&g=1", "display_name": "Kunal Mukherjee", "link": "https://stackoverflow.com/users/7177029/kunal-mukherjee"}, "reply_to_user": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "edited": false, "score": 0, "creation_date": 1547129586, "post_id": 54114271, "comment_id": 95092168, "body": "@Jimi fixed the typo."}, {"owner": {"reputation": 22110, "user_id": 7444103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcyKP.jpg?s=128&g=1", "display_name": "Jimi", "link": "https://stackoverflow.com/users/7444103/jimi"}, "edited": false, "score": 0, "creation_date": 1547153296, "post_id": 54114271, "comment_id": 95104858, "body": "Yes, you fixed the typo, but you didn&#39;t fix the logic of the process. The Regex will match the starting index of each word, not the index of the current caret position. Thus, <code>tokenizedWordLookup.Where(x =&gt; x.Item3 == richTextBox1.SelectionStart)</code> will not ever find any matches: the current index is inside the word, not on its boudaries. Also, your <code>new List&lt;Tuple&lt;string, int, int, int&gt;&gt;();</code> has more items than the declared one."}, {"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "edited": false, "score": 0, "creation_date": 1547187477, "post_id": 54114271, "comment_id": 95113721, "body": "the logic will work only in case I click in the first letter of the word (will be equal to match.Index)  I need to check the richTextBox1.SelectionStart to be &gt;= the current index and &lt; the next index."}, {"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "edited": false, "score": 0, "creation_date": 1547188475, "post_id": 54114271, "comment_id": 95114026, "body": "radLabelElement1.Text = tokenizedWordLookup.FirstOrDefault(x =&gt; x.Item3 &gt;= richTextBox1.SelectionStart)?.Item2.ToString();  this will work for all the text but will not match the last word only"}, {"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "edited": false, "score": 0, "creation_date": 1547188759, "post_id": 54114271, "comment_id": 95114126, "body": "@KunalMukherjee I ckecked the match.Index value will be more than the richTextBox1.SelectionStart (for the last word)"}, {"owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "edited": false, "score": 1, "creation_date": 1547197659, "post_id": 54114271, "comment_id": 95117745, "body": "@KunalMukherjee thanks for your help... It tried your last correction I will not match the words also (the (match.Index + match.Length) =  match.Index +1 not match.Index + word length...  the logic will work when I add &lt;&quot;&quot; , 1,1&gt; to the list before the loop then check for the last match less than than the current position... I will share this as edit to my question  regards"}], "tags": [], "owner": {"reputation": 5031, "user_id": 7177029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/F4BB8.jpg?s=128&g=1", "display_name": "Kunal Mukherjee", "link": "https://stackoverflow.com/users/7177029/kunal-mukherjee"}, "is_accepted": false, "score": 1, "last_activity_date": 1547188196, "last_edit_date": 1547188196, "creation_date": 1547050686, "answer_id": 54114271, "question_id": 54113554, "link": "https://stackoverflow.com/questions/54113554/how-can-i-get-the-clicked-word-number-index-in-a-richtextbox/54114271#54114271", "title": "How can I get the clicked word number ( Index ) in a RichTextBox", "body": "<p>You can follow this approach:</p>\n\n<ol>\n<li>First construct a lookup of the words</li>\n<li>Find the selection start and end</li>\n<li>Get the word index</li>\n</ol>\n\n<hr>\n\n<p>You can get the word tokenizing pattern from <a href=\"https://stackoverflow.com/a/48767065/7177029\">here</a> courtesy of @Wiktor Stribi\u017cew.</p>\n\n<p>Here is the complete code:</p>\n\n<pre><code>public Form1()\n{\n    InitializeComponent();\n\n    richTextBox1.Click += RichTextBox1_Click;\n}\n\nprivate void RichTextBox1_Click(object sender, EventArgs e)\n{\n    var start = richTextBox1.SelectionStart;\n\n\n    string text = richTextBox1.Text;\n    string tokenizingPattern = @\"(\\[[^][]*]|#[^#]*#)|\\s+\";\n\n    // Create lookup\n    List&lt;Tuple&lt;string, int, int, int&gt;&gt; tokenizedWordLookup = new List&lt;Tuple&lt;string, int, int, int&gt;&gt;();\n\n    int i = 1;\n    foreach (Match match in Regex.Matches(text, tokenizingPattern, RegexOptions.Singleline))\n        tokenizedWordLookup.Add(Tuple.Create&lt;string, int, int, int&gt;(match.Value, i++, match.Index, match.Index + match.Length));\n\n    // Find the word index where the selection start is equal to the tokenizing word start\n    Tuple&lt;string, int, int, int&gt; foundTuple = (tokenizedWordLookup.Where(x =&gt; x.Item3 &gt;= start &amp;&amp; x.Item4 &lt;= start).FirstOrDefault()) ?? Tuple&lt;string, int, int, int&gt; foundTuple\n\n    labelCurrentWordNumber.Text = foundTuple.Item2.ToString();\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5156096, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207390699102602/picture?type=large", "display_name": "Mustafa Salman", "link": "https://stackoverflow.com/users/5156096/mustafa-salman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 54113798, "answer_count": 3, "score": 1, "last_activity_date": 1547200222, "creation_date": 1547048288, "last_edit_date": 1547200222, "question_id": 54113554, "link": "https://stackoverflow.com/questions/54113554/how-can-i-get-the-clicked-word-number-index-in-a-richtextbox", "title": "How can I get the clicked word number ( Index ) in a RichTextBox", "body": "<p>suppose</p>\n\n<pre><code>richTextBox1.Text = \"Your description gives people the information they need to help you answer your question.\"\n</code></pre>\n\n<p>if the Caret position is positioned in the word:  </p>\n\n<ul>\n<li><code>information</code>, I want to get <code>6</code></li>\n<li><code>gives</code>, I want to get <code>3</code></li>\n<li>...and so on...</li>\n</ul>\n\n<p>Edit:-\nthanks to all contributers...</p>\n\n<p>as in the answers there is two logic..</p>\n\n<p>1- select the text from start to the click position then using  (string.Split) to split the words and count them.</p>\n\n<pre><code>var start = richTextBox1.SelectionStart;\nvar substring = richTextBox1.Text.Substring(0, start);\nvar wordscount = substring.Split(\" ,.:;\\n\".ToCharArray(), StringSplitOptions.RemoveEmptyEntries).Length;\n Label1.Text = wordscount.ToString();\n</code></pre>\n\n<p>2- get the word tokenizing pattern using Regex.Matches...then compare match.Index with the click position</p>\n\n<pre><code>        int i = 1;\n        string text = richTextBox1.Text;\n        string tokenizingPattern = @\"(\\[[^][]*]|#[^#]*#)|\\s+\";\n\n        //Create lookup\n        List&lt;Tuple&lt;string, int, int&gt;&gt; tokenizedWordLookup = new List&lt;Tuple&lt;string, int, int&gt;&gt;();\n\n        tokenizedWordLookup.Add(Tuple.Create&lt;string, int, int&gt;(\"\", i++, 1));\n        foreach (Match match in Regex.Matches(text, tokenizingPattern, RegexOptions.Singleline))\n            tokenizedWordLookup.Add(Tuple.Create&lt;string, int, int&gt;(match.Value, i++, match.Index));\n\n        //Return the word index where the selection start is equal to the tokenizing word start\n        Label1.Text = tokenizedWordLookup.LastOrDefault(x =&gt; x.Item3 &lt;= richTextBox1.SelectionStart)?.Item2.ToString();\n</code></pre>\n"}, {"tags": ["c#", "asp.net-mvc", "asp.net-core", "concurrency", "exception-handling"], "comments": [{"owner": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "edited": false, "score": 0, "creation_date": 1547048417, "post_id": 54113491, "comment_id": 95059683, "body": "Why would it be bad? What are your  concerns with that approach? It just updates the original values, the changes you performed are still being tracked and will be applied when you repeat the option. Since the concurrency token is changed its will correctly update (unless another process changed it in the meantime)"}, {"owner": {"reputation": 50, "user_id": 10817650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eccb5332fcd7825cffcfde370385e61?s=128&d=identicon&r=PG&f=1", "display_name": "HTTP 418", "link": "https://stackoverflow.com/users/10817650/http-418"}, "reply_to_user": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "edited": false, "score": 0, "creation_date": 1547048679, "post_id": 54113491, "comment_id": 95059870, "body": "@Tseng I didn&#39;t mention anywhere, that &quot;it would be bad&quot;. In the end of my post, I elaborated a bit: &quot;... but [I am] interested in WHY this is a good way to resolve concurrency issues, and why it makes sense to overwrite the original values.&quot; You say it works fine - thats great. I am interested in understanding why it is a good way to resolve the exception, specifically why overwriting original values is a good approach to handle concurrency issues."}, {"owner": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "edited": false, "score": 2, "creation_date": 1547049373, "post_id": 54113491, "comment_id": 95060345, "body": "<i>and why overwriting original values is a good approach to handle concurrency issues.</i> happens because of the changed concurrency token. Overriding it, puts the new token from the database into the entity tracker. Alternative would be do another round trip, load the data from the DB again, apply the changes and attempt to save it again"}, {"owner": {"reputation": 50, "user_id": 10817650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eccb5332fcd7825cffcfde370385e61?s=128&d=identicon&r=PG&f=1", "display_name": "HTTP 418", "link": "https://stackoverflow.com/users/10817650/http-418"}, "reply_to_user": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "edited": false, "score": 0, "creation_date": 1547059244, "post_id": 54113491, "comment_id": 95065559, "body": "@Tseng Thank you"}], "owner": {"reputation": 50, "user_id": 10817650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eccb5332fcd7825cffcfde370385e61?s=128&d=identicon&r=PG&f=1", "display_name": "HTTP 418", "link": "https://stackoverflow.com/users/10817650/http-418"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547048068, "creation_date": 1547048068, "question_id": 54113491, "link": "https://stackoverflow.com/questions/54113491/implementing-optimistic-concurrency-on-dbupdateconcurrencyexpcetion", "title": "Implementing optimistic concurrency on DbUpdateConcurrencyExpcetion", "body": "<p>I'm working on an application that needs to handle <code>DbUpdateConcurrencyException</code>, and was browsing the web for suggestions on implementation. I found a specific implementation in multiple resources, e.g. <a href=\"https://www.infoworld.com/article/3085390/application-development/how-to-handle-concurrency-conflicts-in-entity-framework.html\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://www.codeproject.com/Articles/1183935/%2FArticles%2F1183935%2FConcurrency-Handling-In-Entity-Framework-Databas\" rel=\"nofollow noreferrer\">this</a> (look near bottom in both resources)</p>\n\n<p>Their implementation is the following:</p>\n\n<pre><code>try\n{\n    //...\n}\ncatch (DbUpdateConcurrencyException ex)\n{\n    var entry = ex.Entries.Single();\n    entry.OriginalValues.SetValues(entry.GetDatabaseValues()); //&lt;----\n}\n</code></pre>\n\n<p><strong>My question/what I would like to understand:</strong></p>\n\n<p>Pay attention to the second line of the <code>catch</code> clause. How does it solve the exception, that I set the database values (current values) to overwrite the original values?</p>\n\n<p>Notice that I am familiar with concurrency in general, and I am familiar with the terms current-, database-, and original values. I am not interested in an explanation of what it means, but interested in <strong>WHY</strong> this is a good way to resolve concurrency issues, and <strong>why it makes sense</strong> to overwrite the original values.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c#", "winforms"], "comments": [{"owner": {"reputation": 6072, "user_id": 2142950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZGrD.png?s=128&g=1", "display_name": "Klaus G&#252;tter", "link": "https://stackoverflow.com/users/2142950/klaus-g%c3%bctter"}, "edited": false, "score": 0, "creation_date": 1547048279, "post_id": 54113485, "comment_id": 95059581, "body": "<code>Environment.CurrentDirectory</code> can be anything. If you want the directory where your executable is lcoated, use <code>Assembly.GetExecutingAssembly().Location</code>"}, {"owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "edited": false, "score": 0, "creation_date": 1547048346, "post_id": 54113485, "comment_id": 95059629, "body": "Are you publishing?  Is Taskman.Exe in the deploy folder?  Check in the project folder on build machine the dates of the release and debug executable and compare to the dates on the deploy machine."}], "answers": [{"tags": [], "owner": {"reputation": 133235, "user_id": 7252182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUgxG.png?s=128&g=1", "display_name": "mm8", "link": "https://stackoverflow.com/users/7252182/mm8"}, "is_accepted": true, "score": 2, "last_activity_date": 1547048507, "creation_date": 1547048507, "answer_id": 54113614, "question_id": 54113485, "link": "https://stackoverflow.com/questions/54113485/winform-app-restart-not-working-when-deployed/54113614#54113614", "title": "Winform app restart not working when deployed", "body": "<p>You should start the new process before you exit the current one, and make sure that you pass the correct path to the <code>Process.Start</code> method:</p>\n\n<pre><code>static void Application_ThreadException(object sender, ThreadExceptionEventArgs e)\n{\n    Console.WriteLine(e.Exception.Message);\n    System.Diagnostics.Process.Start(System.Reflection.Assembly.GetExecutingAssembly().Location);\n    Application.Exit();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1408, "user_id": 10116473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qTVBu.png?s=128&g=1", "display_name": "Handbag Crab", "link": "https://stackoverflow.com/users/10116473/handbag-crab"}, "is_accepted": false, "score": 0, "last_activity_date": 1547048828, "creation_date": 1547048828, "answer_id": 54113703, "question_id": 54113485, "link": "https://stackoverflow.com/questions/54113485/winform-app-restart-not-working-when-deployed/54113703#54113703", "title": "Winform app restart not working when deployed", "body": "<p>Call this:</p>\n\n<pre><code>Application.Restart();\n</code></pre>\n\n<p>instead of <code>Application.Exit();</code></p>\n"}], "owner": {"reputation": 393, "user_id": 2243646, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/0b8e748f4a1469b836dbc0faf4781b99?s=128&d=identicon&r=PG", "display_name": "Basilf", "link": "https://stackoverflow.com/users/2243646/basilf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 54113614, "answer_count": 2, "score": 0, "last_activity_date": 1547048828, "creation_date": 1547048045, "question_id": 54113485, "link": "https://stackoverflow.com/questions/54113485/winform-app-restart-not-working-when-deployed", "title": "Winform app restart not working when deployed", "body": "<p>I need to restart my application once an unhandled exception happens.\nIt's a .NET WinForm app.</p>\n\n<pre><code>  [STAThread]\n    static void Main()\n    {\n        try\n        {\n            Application.ThreadException += new ThreadExceptionEventHandler(Application_ThreadException);\n            Application.EnableVisualStyles();\n            Application.SetCompatibleTextRenderingDefault(false);\n            Application.Run(new MainForm());\n\n        }\n        catch (SystemException ex)\n        {\n            Log.AddEntry(ex.Message);\n        }\n\n\n    }\n    static void Application_ThreadException(object sender, ThreadExceptionEventArgs e)\n    {\n        Console.WriteLine(e.Exception.Message);\n        Application.Exit();\n        System.Diagnostics.Process.Start(Environment.CurrentDirectory+\"\\\\Taskman.exe\");\n    }\n</code></pre>\n\n<p>I'm throwing an exception intentionally using a button click. When I test the release version on my machine it closes, then restarts normally. But when I deploy it on the production machine, it doesn't. </p>\n\n<p>Any idea?</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["c#", "sql-server-2012", "entity-framework-core"], "comments": [{"owner": {"reputation": 4625, "user_id": 1478654, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BiUl3.png?s=128&g=1", "display_name": "Clay", "link": "https://stackoverflow.com/users/1478654/clay"}, "edited": false, "score": 1, "creation_date": 1547048956, "post_id": 54113442, "comment_id": 95060040, "body": "You said you added <code>TenantId(int not null)</code>. Did you add that directly to the DB? You know you&#39;re gonna need to add that column and a check constraint through EF migrations...or you&#39;re gonna hork up your upgradability in the field."}, {"owner": {"reputation": 1410, "user_id": 6105961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HARTH.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6105961/ben"}, "reply_to_user": {"reputation": 4625, "user_id": 1478654, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BiUl3.png?s=128&g=1", "display_name": "Clay", "link": "https://stackoverflow.com/users/1478654/clay"}, "edited": false, "score": 0, "creation_date": 1547049270, "post_id": 54113442, "comment_id": 95060275, "body": "@Clay - I did not add that directly to the DB. I added through code."}, {"owner": {"reputation": 1271, "user_id": 1296597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/A1Puh.jpg?s=128&g=1", "display_name": "Adam Hess", "link": "https://stackoverflow.com/users/1296597/adam-hess"}, "edited": false, "score": 1, "creation_date": 1547051304, "post_id": 54113442, "comment_id": 95061535, "body": "While you&#39;re solution would work, not every table needs to have the tenant ID. You could stick to having a few tables having it and the relationships that those tables map to as a foreign key are implicitly mapped to a specific tenant. For example, if you have a School (as tenant) with Students (mapped to a school) if each student took a class, by default those classes could be inferred to belong to a specific tenant without the ID."}, {"owner": {"reputation": 1410, "user_id": 6105961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HARTH.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6105961/ben"}, "reply_to_user": {"reputation": 1271, "user_id": 1296597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/A1Puh.jpg?s=128&g=1", "display_name": "Adam Hess", "link": "https://stackoverflow.com/users/1296597/adam-hess"}, "edited": false, "score": 0, "creation_date": 1547052816, "post_id": 54113442, "comment_id": 95062476, "body": "@Adam -  See comment about FK on accepted answer. Since I already have a tenantId on every table and everything coded is working, do you see any benefit to removing the tenantId from the &quot;Students&quot; table?"}], "answers": [{"comments": [{"owner": {"reputation": 4625, "user_id": 1478654, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BiUl3.png?s=128&g=1", "display_name": "Clay", "link": "https://stackoverflow.com/users/1478654/clay"}, "edited": false, "score": 0, "creation_date": 1547049004, "post_id": 54113562, "comment_id": 95060079, "body": "In a code-first EF world?"}, {"owner": {"reputation": 19212, "user_id": 4275342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KnE9R.png?s=128&g=1", "display_name": "Roman Marusyk", "link": "https://stackoverflow.com/users/4275342/roman-marusyk"}, "reply_to_user": {"reputation": 4625, "user_id": 1478654, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/BiUl3.png?s=128&g=1", "display_name": "Clay", "link": "https://stackoverflow.com/users/1478654/clay"}, "edited": false, "score": 1, "creation_date": 1547049177, "post_id": 54113562, "comment_id": 95060211, "body": "And what is the problem with code-first? You can use data annotations or add check on property or use constructors with private setter, it depends on your implementation"}, {"owner": {"reputation": 1410, "user_id": 6105961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HARTH.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6105961/ben"}, "edited": false, "score": 1, "creation_date": 1547049354, "post_id": 54113562, "comment_id": 95060333, "body": "This does answer my question as I stated it. Thanks! Although, the next thing I lookup or ask will be how to add a constraint in entity framework."}, {"owner": {"reputation": 1410, "user_id": 6105961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HARTH.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6105961/ben"}, "edited": false, "score": 0, "creation_date": 1547050085, "post_id": 54113562, "comment_id": 95060813, "body": "The data annotation [Range(1, int.MaxValue)] is working for me. Thanks again!"}, {"owner": {"reputation": 19212, "user_id": 4275342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KnE9R.png?s=128&g=1", "display_name": "Roman Marusyk", "link": "https://stackoverflow.com/users/4275342/roman-marusyk"}, "reply_to_user": {"reputation": 1410, "user_id": 6105961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HARTH.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6105961/ben"}, "edited": false, "score": 1, "creation_date": 1547050258, "post_id": 54113562, "comment_id": 95060914, "body": "@Ben should not be the TenantId added as ForeignKey to the table Tenant? If yes then it definitely cannot be zero or less"}, {"owner": {"reputation": 1410, "user_id": 6105961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HARTH.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6105961/ben"}, "edited": false, "score": 1, "creation_date": 1547052689, "post_id": 54113562, "comment_id": 95062406, "body": "There is a separate Tenant database that houses all the tenant info. So, making it a FK can&#39;t happen. In the startup of my application, I get the tenant Id from a tenant api based upon the api key used to make the request."}], "tags": [], "owner": {"reputation": 19212, "user_id": 4275342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KnE9R.png?s=128&g=1", "display_name": "Roman Marusyk", "link": "https://stackoverflow.com/users/4275342/roman-marusyk"}, "is_accepted": true, "score": 1, "last_activity_date": 1547050452, "last_edit_date": 1547050452, "creation_date": 1547048316, "answer_id": 54113562, "question_id": 54113442, "link": "https://stackoverflow.com/questions/54113442/sql-server-validate-column-in-every-insert/54113562#54113562", "title": "SQL Server - Validate Column In Every Insert", "body": "<p>First, it seems  that <code>TenantId</code> should be a ForeignKey to the table Tenant. If yes then it definitely cannot be zero or less, else :</p>\n\n<p>Add <a href=\"https://docs.microsoft.com/en-us/previous-versions/sql/sql-server-2008-r2/ms179491(v=sql.105)\" rel=\"nofollow noreferrer\">CHECK Constraint</a> on the column</p>\n\n<pre><code>CREATE TABLE your_table (\n    TenantId INT NOT NULL CHECK(TenantId &gt; 0)\n    ...\n)\n</code></pre>\n\n<p>And if column is <code>NOT NULL</code> then it should be in every insert else exception will throw</p>\n\n<blockquote>\n  <p>Cannot insert the value NULL into column 'TenantId', table\n  'dbo.your_table'; column does not allow nulls.\n  INSERT fails.</p>\n</blockquote>\n\n<p>Then, in your C# code use Data Annotations attribute</p>\n\n<pre><code>[Range(1, Int32.MaxValue)]\n</code></pre>\n\n<p>or create own like: <code>[MinValue(1)]</code></p>\n\n<p>To \"ensure that every insert on every table has a TenantId value that is greater than zero\" you can also use constructor with private setter</p>\n\n<pre><code>public class Model\n{\n   public Model(int name, int tenantId)\n   {\n      Name = name;\n      if(tenantId &lt;= 0)\n      {\n          throw new Exception();\n      }\n      TenantId = tenantId;\n   }\n\n   public string Name { get; private set; }\n   public int TenantId { get; private set; }\n}\n</code></pre>\n\n<p>or something like this property in your model</p>\n\n<pre><code>public int TenantId {\n    get {\n        return _tenantId;\n    }\n    set {\n        if (value &lt;= 0) throw new Exception();\n        _tenantId = value;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1410, "user_id": 6105961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HARTH.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6105961/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1547049386, "accepted_answer_id": 54113562, "answer_count": 1, "score": 0, "last_activity_date": 1547050452, "creation_date": 1547047905, "question_id": 54113442, "link": "https://stackoverflow.com/questions/54113442/sql-server-validate-column-in-every-insert", "closed_reason": "Duplicate", "title": "SQL Server - Validate Column In Every Insert", "body": "<p>I am writing a .net core 2.2 C#, code-first, api with a SQL Server backend. It was just requested to make the api a multi-tenant api. So, I added TenantId (INT NOT NULL) to all DB tables, QueryFilters, etc... Everything is working as expected.</p>\n\n<p>I want to ensure I did not and no one in the future will forget to add the TenantId on all inserts. TenantId will always be a value greater than zero. Is there a way in SQL Server to ensure that every insert on every table has a TenantId value that is greater than zero?</p>\n"}, {"tags": ["c#", "unity3d", "vuforia", "photon"], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 7685436, "user_type": "registered", "profile_image": "https://graph.facebook.com/1352194544801504/picture?type=large", "display_name": "Donovan So", "link": "https://stackoverflow.com/users/7685436/donovan-so"}, "is_accepted": false, "score": 0, "last_activity_date": 1547048962, "creation_date": 1547048962, "answer_id": 54113754, "question_id": 54113436, "link": "https://stackoverflow.com/questions/54113436/how-to-create-multiplayer-shared-ar-game-with-vuforia/54113754#54113754", "title": "How to create multiplayer / shared AR game with Vuforia?", "body": "<p>I've solved the issue by going to the <code>ARCamera</code> gameobject, then in the <code>Vuforia Behavior</code> component, I changed the <code>World Center Mode</code> from DEVICE to FIRST_TARGET. This allows multiple instances of ARCameras to be in different positions.</p>\n\n<p>More info on World Center Mode can be found <a href=\"https://developer.vuforia.com/forum/unity-extension-technical-discussion/what-world-center-mode\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 55, "user_id": 7685436, "user_type": "registered", "profile_image": "https://graph.facebook.com/1352194544801504/picture?type=large", "display_name": "Donovan So", "link": "https://stackoverflow.com/users/7685436/donovan-so"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 732, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547048962, "creation_date": 1547047873, "question_id": 54113436, "link": "https://stackoverflow.com/questions/54113436/how-to-create-multiplayer-shared-ar-game-with-vuforia", "title": "How to create multiplayer / shared AR game with Vuforia?", "body": "<p>I would like to create a shared AR game on Android phones, where I would like to:</p>\n\n<ol>\n<li>spawn a cube for each player on an ImageTarget</li>\n<li>allow them to control the position of their cube</li>\n<li>allow them to see the movements of all players' cubes</li>\n</ol>\n\n<p>I'm using Vuforia as my AR library and PUN 2 as my networking library. I have no issue synchronizing the positions and rotations of all cubes. However, the cubes do not stay on the ImageTarget properly and \"jump\" around. On the other hand, if I place my two phones very close together and point them at the ImageTarget at roughly the same angle, the cubes do not jump as much.</p>\n\n<p>This leads me to think that the 2 instances of ARCamera fail to realize that they are pointing at the same ImageTarget from 2 different angles, and instead think that the ImageTarget exists in 2 different orientations at the same time.</p>\n\n<p>Is there any way for me to tell Vuforia that I'm using multiple instances of ARCamera pointing at the same ImageTarget? (Or if my hypothesis is completely wrong, how do I actually make a multiplayer AR game?)</p>\n\n<p>Thanks so much in advance!</p>\n\n<p>p.s. I know the Vuforia forums are a better place to ask this question but unfortunately that forum is not particularly active, so I'm trying my luck here.</p>\n"}, {"tags": ["c#", "linq"], "comments": [{"owner": {"reputation": 49855, "user_id": 5862071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/II4q8.jpg?s=128&g=1", "display_name": "Ousmane D.", "link": "https://stackoverflow.com/users/5862071/ousmane-d"}, "edited": false, "score": 0, "creation_date": 1547047410, "post_id": 54113308, "comment_id": 95059052, "body": "please show your attempt to better illustrate your description ;)"}, {"owner": {"reputation": 2682, "user_id": 3924803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f28714791d302e011cf9bb6bfce1637?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Kilian", "link": "https://stackoverflow.com/users/3924803/hans-kilian"}, "edited": false, "score": 0, "creation_date": 1547047460, "post_id": 54113308, "comment_id": 95059079, "body": "Yes, please show some code. Like how you get the data from the table into C#."}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 1, "creation_date": 1547047588, "post_id": 54113308, "comment_id": 95059161, "body": "Hint: Combine <code>OrderBy</code> with <code>Take</code>. Give it a shot and try it your self. Don&#39;t forget to post the result <b>and</b> expression attempt in your question."}], "answers": [{"tags": [], "owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "is_accepted": true, "score": 2, "last_activity_date": 1547047804, "creation_date": 1547047804, "answer_id": 54113422, "question_id": 54113308, "link": "https://stackoverflow.com/questions/54113308/linq-query-to-group-by-with-a-limit/54113422#54113422", "title": "Linq query to group by with a limit", "body": "<p>You want to assign a sort value to each string so that they are ordered. You can do this by assigning the integer 0 to Gold, 1 to Bronze, and 2 for Silver (other).</p>\n\n<p>You then use <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.take?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">Take</a> to just get the first 5 records.</p>\n\n<pre><code>// ordered by gold, bronze, silver\n\nvar result = dbContext.Options\n    .OrderBy(o =&gt; o.Priority == \"Gold\" ? 0 : o.Priority == \"Bronze\" ? 1 : 2)\n    .Take(5)\n    .ToList();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133235, "user_id": 7252182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUgxG.png?s=128&g=1", "display_name": "mm8", "link": "https://stackoverflow.com/users/7252182/mm8"}, "is_accepted": false, "score": 1, "last_activity_date": 1547047953, "creation_date": 1547047953, "answer_id": 54113463, "question_id": 54113308, "link": "https://stackoverflow.com/questions/54113308/linq-query-to-group-by-with-a-limit/54113463#54113463", "title": "Linq query to group by with a limit", "body": "<blockquote>\n  <p>It should be good in terms of performance.</p>\n</blockquote>\n\n<p>Then you could consider using raw SQL to filter the records in the original query that is executed against the database, e.g.:</p>\n\n<pre><code>dbContext.Options.SqlQuery(\"SELECT TOP 5 * FROM [Option] ORDER BY CASE WHEN [Priority] = 'Gold' THEN 1 WHEN [Priority] = 'Bronze' THEN 2 WHEN [Priority] = 'Silver' THEN 3 ELSE 4 END\").ToArray();\n</code></pre>\n\n<p>Maximal performance and LINQ seldom go hand in hand when it comes to querying databases.</p>\n"}, {"tags": [], "owner": {"reputation": 348, "user_id": 4350189, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc9d8338d7b84c922fd3b6cd8ab54335?s=128&d=identicon&r=PG&f=1", "display_name": "Max Mustermann", "link": "https://stackoverflow.com/users/4350189/max-mustermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1547048118, "creation_date": 1547048118, "answer_id": 54113507, "question_id": 54113308, "link": "https://stackoverflow.com/questions/54113308/linq-query-to-group-by-with-a-limit/54113507#54113507", "title": "Linq query to group by with a limit", "body": "<p>Let Priority be an enum, orderby it and take 5.</p>\n\n<pre><code>        class Option\n        {\n            public int Id { get; set; }\n\n            public string Name { get; set; }\n\n            public Priority Priority { get; set; }\n        }\n\n        enum Priority\n        {\n            Gold = 0,\n            Silver,\n            Bronze\n        }\n\n        static void Main(string[] args)\n        {\n            var list = new List&lt;Option&gt;()\n            {\n                new Option { Id = 1, Name = \"Bob\", Priority = Priority.Gold },\n                new Option { Id = 2, Name = \"Rob\", Priority = Priority.Gold },\n                new Option { Id = 2, Name = \"David\", Priority = Priority.Bronze },\n                new Option { Id = 2, Name = \"Adam\", Priority = Priority.Bronze },\n                new Option { Id = 2, Name = \"Jack\", Priority = Priority.Silver },\n                new Option { Id = 2, Name = \"Josh\", Priority = Priority.Silver },\n                new Option { Id = 2, Name = \"Peter\", Priority = Priority.Silver },\n                new Option { Id = 2, Name = \"Max\", Priority = Priority.Silver },\n                new Option { Id = 2, Name = \"Steve\", Priority = Priority.Silver },\n            };\n\n            var newList = list.OrderBy(l =&gt; l.Priority).Take(5);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335, "user_id": 8483308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783080a40477b9771938836c4c859f80?s=128&d=identicon&r=PG", "display_name": "Piflik", "link": "https://stackoverflow.com/users/8483308/piflik"}, "is_accepted": false, "score": 1, "last_activity_date": 1547048122, "creation_date": 1547048122, "answer_id": 54113512, "question_id": 54113308, "link": "https://stackoverflow.com/questions/54113308/linq-query-to-group-by-with-a-limit/54113512#54113512", "title": "Linq query to group by with a limit", "body": "<pre><code>List&lt;Option&gt; top5 = participants.OrderBy(part =&gt; {\n    switch(part.Priority) {\n        case \"Gold\": return 1;\n        case \"Bronze\": return 2;\n        case \"Silver\": return 3;\n        default: return 4;\n    }\n}).Take(5).ToList();\n</code></pre>\n\n<p>If the list is shorter than 5, just order them, if that is needed.</p>\n"}, {"tags": [], "owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "is_accepted": false, "score": 1, "last_activity_date": 1547048128, "creation_date": 1547048128, "answer_id": 54113516, "question_id": 54113308, "link": "https://stackoverflow.com/questions/54113308/linq-query-to-group-by-with-a-limit/54113516#54113516", "title": "Linq query to group by with a limit", "body": "<p>See code below :</p>\n\n<pre><code>            List&lt;string&gt; rank = new List&lt;string&gt;() { \"Gold\", \"Bronze\",\"Silver\" };\n\n            DataTable dt = new DataTable();\n\n            dt.Columns.Add(\"ID\", typeof(int));\n            dt.Columns.Add(\"Name\", typeof(string));\n            dt.Columns.Add(\"Priority\", typeof(string));\n\n            dt.Rows.Add(new object[] { 9, \"Steve\", \"Silver\" });\n            dt.Rows.Add(new object[] { 8, \"Max\", \"Silver\" });\n            dt.Rows.Add(new object[] { 7, \"Peter\", \"Silver\" });\n            dt.Rows.Add(new object[] { 6, \"Josh\", \"Silver\" });\n            dt.Rows.Add(new object[] { 5, \"Jack\", \"Bronze\" });\n            dt.Rows.Add(new object[] { 4, \"Adam\", \"Bronze\" });\n            dt.Rows.Add(new object[] { 3, \"David\", \"Gold\" });\n            dt.Rows.Add(new object[] { 1, \"Bob\", \"Gold\" });\n            dt.Rows.Add(new object[] { 2, \"Rob\", \"Gold\" });\n\n           DataRow[] results = dt.AsEnumerable().OrderBy(x =&gt; rank.IndexOf(x.Field&lt;string&gt;(\"Priority\"))).Take(5).ToArray();\n</code></pre>\n"}], "owner": {"reputation": 3848, "user_id": 2921817, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/634a24fc007e3f4d5b6a4c39328eb83a?s=128&d=identicon&r=PG&f=1", "display_name": "Venky", "link": "https://stackoverflow.com/users/2921817/venky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "accepted_answer_id": 54113422, "answer_count": 5, "score": -2, "last_activity_date": 1547048128, "creation_date": 1547047338, "last_edit_date": 1547047924, "question_id": 54113308, "link": "https://stackoverflow.com/questions/54113308/linq-query-to-group-by-with-a-limit", "title": "Linq query to group by with a limit", "body": "<p>I have a simple table in the following structure. </p>\n\n<p><a href=\"https://i.stack.imgur.com/UGORS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UGORS.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to write a LINQ expression to fetch only 5 records always. This 5 should be \"Gold\" if available. Otherwise add \"Bronze\" to make it 5. If it still not 5 then add \"Silver\" to the list. But total results returned should be 5. It should be good in terms of performance.</p>\n\n<p>I tried basic linq but no luck. Any help is highly appreciated.</p>\n\n<p>Class :</p>\n\n<pre><code>public class Option {\n  public int Id {get;set;\n\n  public string Name {get;set;}\n\n  public string Priority {get;set;}\n} \n</code></pre>\n\n<p><code>dbContext.Options</code> would create a connection to database table through ORM and we can apply linq expressions there.</p>\n\n<p>Attempt :  <code>dbContext.Options.OrderByDescending(o =&gt; o.Priority).GroupBy(a =&gt; a.Priority)</code> </p>\n\n<p>this returns grouped result by priority. But i want to include the logic i needed inside this expression.</p>\n"}]