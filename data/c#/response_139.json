[{"tags": ["c#", ".net", "authentication", "asp.net-core-1.1", ".net-core-2.0"], "answers": [{"tags": [], "owner": {"reputation": 1184, "user_id": 710971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c873d6d3560e7146a728ce1079713f?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Gunn", "link": "https://stackoverflow.com/users/710971/ryan-gunn"}, "is_accepted": false, "score": 0, "last_activity_date": 1504745298, "creation_date": 1504745298, "answer_id": 46086239, "question_id": 46085911, "link": "https://stackoverflow.com/questions/46085911/migration-from-core-1-1-to-2-0-authentication/46086239#46086239", "title": "Migration from Core 1.1 to 2.0 - Authentication", "body": "<p>I don't know if you are using IdentityServer4 but they have provided some samples on github for ASP.NET Core 2.0.</p>\n\n<p>Hope this helps you.</p>\n\n<p><a href=\"https://github.com/leastprivilege/AspNetCoreSecuritySamples/blob/aspnetcore2/OIDC/src/AspNetCoreSecurity/Startup.cs\" rel=\"nofollow noreferrer\">Sample Project</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5843637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9b9c80bc9ac2e279cb97ec753f21338?s=128&d=identicon&r=PG&f=1", "display_name": "jhpuro", "link": "https://stackoverflow.com/users/5843637/jhpuro"}, "is_accepted": false, "score": 0, "last_activity_date": 1520793174, "creation_date": 1520793174, "answer_id": 49223602, "question_id": 46085911, "link": "https://stackoverflow.com/questions/46085911/migration-from-core-1-1-to-2-0-authentication/49223602#49223602", "title": "Migration from Core 1.1 to 2.0 - Authentication", "body": "<p>Did you take the authentication middleware into use?</p>\n\n<pre><code>public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n{\n    app.UseAuthentication();\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1109, "user_id": 2430556, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hOCDY.png?s=128&g=1", "display_name": "Nouman Bhatti", "link": "https://stackoverflow.com/users/2430556/nouman-bhatti"}, "is_accepted": true, "score": 2, "last_activity_date": 1525744075, "creation_date": 1525744075, "answer_id": 50224629, "question_id": 46085911, "link": "https://stackoverflow.com/questions/46085911/migration-from-core-1-1-to-2-0-authentication/50224629#50224629", "title": "Migration from Core 1.1 to 2.0 - Authentication", "body": "<p>I followed <a href=\"https://docs.microsoft.com/en-us/aspnet/core/migration/1x-to-2x/?view=aspnetcore-2.1\" rel=\"nofollow noreferrer\">this link from microsoft</a> to start my migration. Most of the migration is covered by the this link, but I faced issue where most of my claims are missing.</p>\n\n<p>With the ASP.NET Core 1.x, client would have received the claims: nbf, exp, iss, aud, nonce, iat, c_hash, sid, sub, auth_time, idp, amr.</p>\n\n<p>In Core 2.0 we only get sid, sub and idp. What happened?</p>\n\n<p>Microsoft added a new concept to their OpenID Connect handler called ClaimActions. Claim actions allow modifying how claims from an external provider are mapped (or not) to a claim in your ClaimsPrincipal. Looking at the ctor of the OpenIdConnectOptions, you can see that the handler will now skip the following claims by default:</p>\n\n<pre><code>ClaimActions.DeleteClaim(\"nonce\");\nClaimActions.DeleteClaim(\"aud\");\nClaimActions.DeleteClaim(\"azp\");\nClaimActions.DeleteClaim(\"acr\");\nClaimActions.DeleteClaim(\"amr\");\nClaimActions.DeleteClaim(\"iss\");\nClaimActions.DeleteClaim(\"iat\");\nClaimActions.DeleteClaim(\"nbf\");\nClaimActions.DeleteClaim(\"exp\");\nClaimActions.DeleteClaim(\"at_hash\");\nClaimActions.DeleteClaim(\"c_hash\");\nClaimActions.DeleteClaim(\"auth_time\");\nClaimActions.DeleteClaim(\"ipaddr\");\nClaimActions.DeleteClaim(\"platf\");\nClaimActions.DeleteClaim(\"ver\");\n</code></pre>\n\n<p>If you want to \u201cun-skip\u201d a claim, you need to delete a specific claim action when setting up the handler. The following is the very intuitive syntax to get the amr claim back:</p>\n\n<pre><code>options.ClaimActions.Remove(\"amr\");\n</code></pre>\n\n<p><strong>Requesting more claims from the OIDC provider</strong></p>\n\n<p>When you are requesting more scopes, e.g. profile or custom scopes that result in more claims, there is another confusing detail to be aware of.</p>\n\n<p>Depending on the response_type in the OIDC protocol, some claims are transferred via the id_token and some via the userinfo endpoint.</p>\n\n<p>So first of all, you need to enable support for the userinfo endpoint in the handler:</p>\n\n<pre><code>options.GetClaimsFromUserInfoEndpoint = true;\n</code></pre>\n\n<p>In the end you need to add the following class to import all other custom claims</p>\n\n<pre><code>public class MapAllClaimsAction : ClaimAction\n    {\n        public MapAllClaimsAction() : base(string.Empty, string.Empty)\n        {\n        }\n\n        public override void Run(JObject userData, ClaimsIdentity identity, string issuer)\n        {\n            foreach (var claim in identity.Claims)\n            {\n                // If this claimType is mapped by the JwtSeurityTokenHandler, then this property will be set\n                var shortClaimTypeName = claim.Properties.ContainsKey(JwtSecurityTokenHandler.ShortClaimTypeProperty) ?\n                    claim.Properties[JwtSecurityTokenHandler.ShortClaimTypeProperty] : string.Empty;\n\n                // checking if claim in the identity (generated from id_token) has the same type as a claim retrieved from userinfo endpoint\n                JToken value;\n                var isClaimIncluded = userData.TryGetValue(claim.Type, out value) || userData.TryGetValue(shortClaimTypeName, out value);\n\n                // if a same claim exists (matching both type and value) both in id_token identity and userinfo response, remove the json entry from the userinfo response\n                if (isClaimIncluded &amp;&amp; claim.Value.Equals(value.ToString(), StringComparison.Ordinal))\n                {\n                    if (!userData.Remove(claim.Type))\n                    {\n                        userData.Remove(shortClaimTypeName);\n                    }\n                }\n            }\n\n            // adding remaining unique claims from userinfo endpoint to the identity\n            foreach (var pair in userData)\n            {\n                JToken value;\n                var claimValue = userData.TryGetValue(pair.Key, out value) ? value.ToString() : null;\n                identity.AddClaim(new Claim(pair.Key, claimValue, ClaimValueTypes.String, issuer));\n            }\n        }\n    }\n</code></pre>\n\n<p>and then use the above class code to add it to <code>ClaimActions</code></p>\n\n<pre><code>options.ClaimActions.Add(new MapAllClaimsAction());\n</code></pre>\n"}], "owner": {"reputation": 1109, "user_id": 2430556, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hOCDY.png?s=128&g=1", "display_name": "Nouman Bhatti", "link": "https://stackoverflow.com/users/2430556/nouman-bhatti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 1, "accepted_answer_id": 50224629, "answer_count": 3, "score": 1, "last_activity_date": 1525744075, "creation_date": 1504742315, "last_edit_date": 1509601100, "question_id": 46085911, "link": "https://stackoverflow.com/questions/46085911/migration-from-core-1-1-to-2-0-authentication", "title": "Migration from Core 1.1 to 2.0 - Authentication", "body": "<p>In my .net core 1.1 code I'm doing the authentication as follows(which is sending the bearer token to external URL and look for claims in the return token). This code is in <code>Configure</code> method</p>\n\n<pre><code>app.UseCookieAuthentication(new CookieAuthenticationOptions\n        {\n            AuthenticationScheme = \"Cookies\"\n        });\n\n        app.UseOpenIdConnectAuthentication(new OpenIdConnectOptions\n        {\n            AuthenticationScheme = \"oidc\",\n            SignInScheme = \"Cookies\",\n\n            Authority = signinAuthority,\n            RequireHttpsMetadata = signinHTTPS,\n\n            ClientId = \"skybus\",\n            ClientSecret = \"secret\",\n\n            ResponseType = \"code id_token\",\n            Scope = { \"api1\", \"offline_access\" },\n\n            GetClaimsFromUserInfoEndpoint = true,\n            SaveTokens = true\n        });\n</code></pre>\n\n<p>Now I upgraded my code to .net Core 2.0 the both <code>UseCookieAuthentication</code> &amp; <code>UseOpenIdConnectAuthentication</code> are changed. I'm finding it difficult to find what needs to be done in this case</p>\n\n<p>What I changed it to is as follows in <code>ConfigureServices</code> method</p>\n\n<pre><code>services.AddAuthentication(options =&gt; {\n            options.DefaultScheme = CookieAuthenticationDefaults.AuthenticationScheme;\n            options.DefaultChallengeScheme = OpenIdConnectDefaults.AuthenticationScheme;\n        })\n            .AddCookie()\n            .AddOpenIdConnect(o =&gt;\n            {\n                o.Authority = signinAuthority;\n                o.SignInScheme = \"Cookies\";\n                o.RequireHttpsMetadata = signinHTTPS;\n                o.ClientId = \"skybus\";\n                o.ClientSecret = \"secret\";\n                o.ResponseType = \"code id_token\";\n                o.GetClaimsFromUserInfoEndpoint = true;\n                o.SaveTokens = true;\n                o.Scope.Add(\"api1\");\n                o.Scope.Add(\"offline_access\");\n            });\n</code></pre>\n\n<p>In Browser I see this URL after the above changes. It should either show me the external login page if user is not logged in or return to home page of my website</p>\n\n<blockquote>\n  <p><a href=\"http://localhost:5000/Account/Login?ReturnUrl=%2F\" rel=\"nofollow noreferrer\">http://localhost:5000/Account/Login?ReturnUrl=%2F</a></p>\n</blockquote>\n"}, {"tags": ["c#", "confuserex"], "owner": {"reputation": 1762, "user_id": 3661120, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2945ed0aa05dd03ab9ebbc5f33668360?s=128&d=identicon&r=PG&f=1", "display_name": "dashnick", "link": "https://stackoverflow.com/users/3661120/dashnick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 904, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1504741680, "creation_date": 1504741680, "question_id": 46085827, "link": "https://stackoverflow.com/questions/46085827/confuserex-fail-to-resolve-dependency-only-on-publish", "title": "ConfuserEx - fail to resolve dependency only on publish", "body": "<p>Using ConfuserEx - when I build the file normally I have no problems, but when I am in publish mode I get the following error:</p>\n\n<blockquote>\n  <p>[ERROR] Failed to resolve dependency of 'TheProgram.exe'. 1>\n  Exception: dnlib.DotNet.AssemblyResolveException: Could not resolve\n  assembly: mwqJVcPLiNUjsUEcAQtUUhNeTADJ, Version=0.0.0.0,\n  Culture=neutral, PublicKeyToken=null 1>     at\n  dnlib.DotNet.Extensions.ResolveThrow(IAssemblyResolver self, IAssembly\n  assembly, ModuleDef sourceModule) in\n  E:\\Source\\Public\\Confuser2\\dnlib\\src\\DotNet\\IAssemblyResolver.cs:line\n  113 1>     at Confuser.Core.ConfuserEngine.Inspection(ConfuserContext\n  context) in\n  e:\\Source\\Public\\Confuser2\\Confuser.Core\\ConfuserEngine.cs:line 264</p>\n</blockquote>\n\n<p>Usually with these sorts of errors, you have to include the assembly in the <code>&lt;probePath&gt;</code> in the project build file, but this seems like it is an internal dependency to something already obfuscated, as the assembly name is already obfuscated.</p>\n\n<p>Any light anyone could shine on this would be much appreciated.</p>\n"}, {"tags": ["c#", "winforms", "visual-studio-2013"], "comments": [{"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 2, "creation_date": 1504742447, "post_id": 46085742, "comment_id": 79133851, "body": "timer event.  draw color, repaint, draw background, wax on wax off."}, {"owner": {"reputation": 470, "user_id": 6713390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5476b312d6588ca5d86dbbd5c40ddee7?s=128&d=identicon&r=PG&f=1", "display_name": "4D1C70", "link": "https://stackoverflow.com/users/6713390/4d1c70"}, "reply_to_user": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1504814322, "post_id": 46085742, "comment_id": 79171194, "body": "@DaveS, Thanks for helping, did exactly what you suggest and works like a charm!."}], "owner": {"reputation": 470, "user_id": 6713390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5476b312d6588ca5d86dbbd5c40ddee7?s=128&d=identicon&r=PG&f=1", "display_name": "4D1C70", "link": "https://stackoverflow.com/users/6713390/4d1c70"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504741955, "creation_date": 1504740905, "last_edit_date": 1504741955, "question_id": 46085742, "link": "https://stackoverflow.com/questions/46085742/draw-blinking-circle-inside-a-winforms-panel", "title": "Draw blinking circle inside a winforms panel", "body": "<p>In the project i'm working, i need to draw a circle inside a panel and make it blinks. I've already made the circle drawing on the Paint event of a PictureBox, but i can't make it blinks. If possible, provide a solution without using timer.</p>\n\n<p>The painting is trigger by the TextChanged event of opclblEventoCalidad, using this.pboxMaquina.Invalidate().</p>\n\n<pre><code>private async void opclblEventoCalidad_TextChanged(object sender, EventArgs e)\n{\n    await Task.Run(() =&gt;\n     {\n         if (!String.IsNullOrEmpty(this.CodigoMaquina))\n         {\n             _continueBlink = true;\n             Alarmas = _maquinaContract.ObtenerAlarmas();\n             string text = (sender as OPCControls.OPCControlsLabel).Text;\n             if (Alarmas != null &amp;&amp; Alarmas.Any(m =&gt; m.CodigoMaquina == this.CodigoMaquina))\n             {\n                 ColorInspeccion = Alarmas.First(s =&gt; s.CodigoMaquina == CodigoMaquina).CodigoColor;\n                 CantidadInspecciones = Alarmas.First(s =&gt; s.CodigoMaquina == CodigoMaquina).CantidadInspecciones;\n                 this.pboxMaquina.Invalidate();                  \n             }\n         }\n     });\n}\n\nprivate void pboxMaquina_Paint(object sender, PaintEventArgs e)\n{\n    GraficarAlarmasInspeccion(e);\n}\n\n\nprivate void GraficarAlarmasInspeccion(PaintEventArgs e)\n{\n    Pen blackPen = new Pen(Color.Black, 3);\n    int rectangleWidth = Math.Min(pnlMaquina.Width, pnlMaquina.Height);\n    int width = Convert.ToInt32(rectangleWidth / 2.75);\n    int positionX = (pnlMaquina.Width - width) / 2;\n    int positionY = (pnlMaquina.Height - width) / 2;\n\n    Rectangle rect = new Rectangle(positionX, positionY, width, width);\n\n    e.Graphics.DrawEllipse(blackPen, rect);\n    e.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;\n    e.Graphics.FillEllipse(Brushes.Red, rect);\n\n    SizeF textSize = e.Graphics.MeasureString(this.CantidadInspecciones.ToString(), Font);\n    PointF locationToDraw = new PointF();\n    locationToDraw.X = (pnlMaquina.Width / 2);\n    locationToDraw.Y = (pnlMaquina.Height / 2);\n    StringFormat fmt = new StringFormat() { Alignment = StringAlignment.Center, LineAlignment = StringAlignment.Center };\n    using (Font myFont = new Font(\"Arial\", (float)(width / 2), FontStyle.Bold))\n    {\n        e.Graphics.DrawString(this.CantidadInspecciones.ToString(), myFont, Brushes.Black, locationToDraw, fmt);\n    }\n}\n</code></pre>\n\n<p>This produce the following image. Now i need to make this circle blink. Thanks in advance.</p>\n\n<p><img src=\"https://i.stack.imgur.com/iYFlf.png\" alt=\"image\"></p>\n"}, {"tags": ["c#", "entity-framework", "entity-framework-6"], "comments": [{"owner": {"reputation": 96653, "user_id": 259769, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/0iE2z.jpg?s=128&g=1", "display_name": "Enigmativity", "link": "https://stackoverflow.com/users/259769/enigmativity"}, "edited": false, "score": 0, "creation_date": 1504743289, "post_id": 46085710, "comment_id": 79134040, "body": "Do you think you could show us your code for overriding <code>GetHashCode</code> and the related properties/methods that are used in computing the hash? I think I know what&#39;s going on but it&#39;s only a guess until I see the code."}, {"owner": {"reputation": 6313, "user_id": 525558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bzaq1.png?s=128&g=1", "display_name": "Craig", "link": "https://stackoverflow.com/users/525558/craig"}, "reply_to_user": {"reputation": 96653, "user_id": 259769, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/0iE2z.jpg?s=128&g=1", "display_name": "Enigmativity", "link": "https://stackoverflow.com/users/259769/enigmativity"}, "edited": false, "score": 0, "creation_date": 1504743518, "post_id": 46085710, "comment_id": 79134096, "body": "@Enigmativity The <code>GetHashCode()</code> override just returns <code>Id.GetHashCode()</code>. Was thinking about making it more complete but TBH I&#39;ve not had to do more than that in the past."}, {"owner": {"reputation": 96653, "user_id": 259769, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/0iE2z.jpg?s=128&g=1", "display_name": "Enigmativity", "link": "https://stackoverflow.com/users/259769/enigmativity"}, "edited": false, "score": 0, "creation_date": 1504743850, "post_id": 46085710, "comment_id": 79134162, "body": "And what is <code>Id</code>?"}, {"owner": {"reputation": 6313, "user_id": 525558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bzaq1.png?s=128&g=1", "display_name": "Craig", "link": "https://stackoverflow.com/users/525558/craig"}, "reply_to_user": {"reputation": 96653, "user_id": 259769, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/0iE2z.jpg?s=128&g=1", "display_name": "Enigmativity", "link": "https://stackoverflow.com/users/259769/enigmativity"}, "edited": false, "score": 0, "creation_date": 1504743997, "post_id": 46085710, "comment_id": 79134187, "body": "@Enigmativity <code>Id</code> is an <code>int</code>"}, {"owner": {"reputation": 96653, "user_id": 259769, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/0iE2z.jpg?s=128&g=1", "display_name": "Enigmativity", "link": "https://stackoverflow.com/users/259769/enigmativity"}, "edited": false, "score": 0, "creation_date": 1504744089, "post_id": 46085710, "comment_id": 79134205, "body": "Unless <code>Id</code> is mutable then it&#39;s not what I was thinking."}, {"owner": {"reputation": 6313, "user_id": 525558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bzaq1.png?s=128&g=1", "display_name": "Craig", "link": "https://stackoverflow.com/users/525558/craig"}, "reply_to_user": {"reputation": 96653, "user_id": 259769, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/0iE2z.jpg?s=128&g=1", "display_name": "Enigmativity", "link": "https://stackoverflow.com/users/259769/enigmativity"}, "edited": false, "score": 0, "creation_date": 1504744263, "post_id": 46085710, "comment_id": 79134236, "body": "<code>Id</code> is technically mutable as it has a getter and setter but I would not expect the value to change between the the calls to <code>Remove()</code> and <code>SaveChanges()</code>. Open to any guesses :)"}], "answers": [{"comments": [{"owner": {"reputation": 6313, "user_id": 525558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bzaq1.png?s=128&g=1", "display_name": "Craig", "link": "https://stackoverflow.com/users/525558/craig"}, "edited": false, "score": 0, "creation_date": 1504786579, "post_id": 46086354, "comment_id": 79153857, "body": "Thank you! I had assumed that I had been following the <code>Rule: the integer returned by GetHashCode must never change while the object is contained in a data structure that depends on the hash code remaining stable</code>. But maybe when EF first creates the instances from the DB it uses the default ctor and no properties including the Id are set initially?  In hindsight this solution seems obvious."}], "tags": [], "owner": {"reputation": 1122, "user_id": 5885500, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205953414690868/picture?type=large", "display_name": "Aaron Roberts", "link": "https://stackoverflow.com/users/5885500/aaron-roberts"}, "is_accepted": true, "score": 1, "last_activity_date": 1504746307, "creation_date": 1504746307, "answer_id": 46086354, "question_id": 46085710, "link": "https://stackoverflow.com/questions/46085710/when-overriding-gethashcode-entity-framework-6-throws-exception-on-savechange/46086354#46086354", "title": "When Overriding GetHashCode(), Entity Framework 6 Throws Exception on SaveChanges()", "body": "<p>From the entity framework <a href=\"https://entityframework.codeplex.com/wikipage?title=Support%20of%20POCO%20entities%20with%20custom%20Equals%20and%20GetHashCode%20implementations\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <ul>\n  <li>You should still follow the guidelines (Eric Lippert has a <a href=\"http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx\" rel=\"nofollow noreferrer\">great post on this</a>) for implementing Equals and GetHashCode </li>\n  <li>If your\n  hashcode/equality algorithm cannot guarantee immutability and\n  uniqueness at all times then you need to make sure that your\n  collection navigation properties use reference equality for\n  comparisons. For HashSet pass\n  System.Data.Entity.Infrastructure.ObjectReferenceEqualityComparer to\n  the constructor (or create your own reference-based equality comparer,\n  something like the snippet below should work). Do not use List as\n  it will always use the overridden Equals method for methods like\n  Remove.</li>\n  </ul>\n</blockquote>\n\n<pre><code>public class Category\n{\n    public Category()\n    {\n        Products = new HashSet&lt;Product&gt;(new ObjectReferenceEqualityComparer());\n    }\n\n    public string CategoryId { get; set; }\n    public string Name { get; set; }\n\n    public virtual ICollection&lt;Product&gt; Products { get; set; }\n}\n[Serializable]\npublic sealed class ObjectReferenceEqualityComparer : IEqualityComparer&lt;object&gt;\n{\n    bool IEqualityComparer&lt;object&gt;.Equals(object x, object y)\n    {\n        return ReferenceEquals(x, y);\n    }\n\n    int IEqualityComparer&lt;object&gt;.GetHashCode(object obj)\n    {\n        return RuntimeHelpers.GetHashCode(obj);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 6313, "user_id": 525558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bzaq1.png?s=128&g=1", "display_name": "Craig", "link": "https://stackoverflow.com/users/525558/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 0, "accepted_answer_id": 46086354, "answer_count": 1, "score": 1, "last_activity_date": 1504746307, "creation_date": 1504740500, "last_edit_date": 1504744046, "question_id": 46085710, "link": "https://stackoverflow.com/questions/46085710/when-overriding-gethashcode-entity-framework-6-throws-exception-on-savechange", "title": "When Overriding GetHashCode(), Entity Framework 6 Throws Exception on SaveChanges()", "body": "<p>Executing the following two lines</p>\n\n<pre><code>DBContext.DbSet.Remove(DBContext.DbSet.First(x =&gt; x.Id == someExistingId));\nDBContext.SaveChanges();\n</code></pre>\n\n<p>results in the following exception being thrown on <code>SaveChanges()</code> when I override <code>GetHashCode()</code> on the <code>DbSet</code> entity type.</p>\n\n<blockquote>\n  <p>Adding a relationship with an entity which is in the Deleted state is not allowed.</p>\n</blockquote>\n\n<p>I'm using a T4 Template to generate POCO objects and overriding <code>GetHashCode()</code> in a <code>partial</code>. If I comment out only the <code>GetHashCode()</code> override, the code executes as expected.</p>\n\n<p>The <code>GetHashCode()</code> override just returns <code>Id.GetHashCode()</code>. <code>Id</code> is an <code>int</code>.</p>\n\n<p>Is there some restriction related to overriding <code>GetHashCode()</code> with Entity Framework POCOs?</p>\n"}, {"tags": ["c#", ".net", "vb.net", "state-machine", "undo-redo"], "comments": [{"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 3, "creation_date": 1504741313, "post_id": 46085701, "comment_id": 79133634, "body": "I may be wrong, but I suspect these classes were written for internal use by windows workflow foundation, and that&#39;s probably why there are no examples. Hope someone can help, though!"}, {"owner": {"reputation": 16352, "user_id": 932728, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/4PyNZ.jpg?s=128&g=1", "display_name": "Peter Bons", "link": "https://stackoverflow.com/users/932728/peter-bons"}, "reply_to_user": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1504977829, "post_id": 46085701, "comment_id": 79228796, "body": "@RufusL you&#39;re not wrong, though it is not limited to internal use. There are examples of state machine workflows (see my answer) but they are mostly build using the WF designer, so no c# code there."}], "answers": [{"comments": [{"owner": {"reputation": 17068, "user_id": 1248295, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/g9kGm.png?s=128&g=1", "display_name": "ElektroStudios", "link": "https://stackoverflow.com/users/1248295/elektrostudios"}, "edited": false, "score": 0, "creation_date": 1504979011, "post_id": 46133184, "comment_id": 79229181, "body": "I think don&#39;t understand at all the concept and meaning of &quot;workflow&quot;, but you said those classes were not designed for this purpose (and then I should understand those classes ARE NOT capable to accomplish this kind of task in any tricky manner). Please correct me If i&#39;m wrong. Thankyou for your asnwer. Just to advertise: The linked Undo/Redo functionality seems only available for WPF technology and WinRT, not WindowsForms (or at least it is not mentioned in the article)."}, {"owner": {"reputation": 16352, "user_id": 932728, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/4PyNZ.jpg?s=128&g=1", "display_name": "Peter Bons", "link": "https://stackoverflow.com/users/932728/peter-bons"}, "reply_to_user": {"reputation": 17068, "user_id": 1248295, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/g9kGm.png?s=128&g=1", "display_name": "ElektroStudios", "link": "https://stackoverflow.com/users/1248295/elektrostudios"}, "edited": false, "score": 1, "creation_date": 1504979583, "post_id": 46133184, "comment_id": 79229339, "body": "The PostSharp undo/redo is done at model level (so you can apply undo/redo on the data that is bound to the control). See <a href=\"http://doc.postsharp.net/undoredo\" rel=\"nofollow noreferrer\">doc.postsharp.net/undoredo</a>. And about the workflow itself, think of it as a framework that allows you to represent an ordered business process, such as the steps needed to approve a document, hire a candidate for a position, or make a purchase. These processes can execute in a short amount of time, but are typically long-running, in which the application will need to shut down to conserve memory between steps"}], "tags": [], "owner": {"reputation": 16352, "user_id": 932728, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/4PyNZ.jpg?s=128&g=1", "display_name": "Peter Bons", "link": "https://stackoverflow.com/users/932728/peter-bons"}, "is_accepted": true, "score": 6, "last_activity_date": 1504978476, "last_edit_date": 1504978476, "creation_date": 1504977455, "answer_id": 46133184, "question_id": 46085701, "link": "https://stackoverflow.com/questions/46085701/example-to-use-system-activities-statements-statemachine-class-in-c-or-vb-net/46133184#46133184", "title": "Example to use &#39;System.Activities.Statements.StateMachine&#39; class in C# or VB.NET", "body": "<p>The <code>System.Activities</code> namespace belongs to the <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/windows-workflow-foundation/overview\" rel=\"noreferrer\">Windows Workflow Foundation</a>. Activity classes in this namespace are used to build workflows, like <a href=\"https://support.office.com/en-us/article/Overview-of-workflows-included-with-SharePoint-d74fcceb-3a64-40fb-9904-cc33ca49da56\" rel=\"noreferrer\">SharePoint workflows</a> for example.</p>\n\n<p>The <code>StateMachine</code> class is a container for several child activities that together form a <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/windows-workflow-foundation/state-machine-workflows\" rel=\"noreferrer\">State Machine Workflow</a>.</p>\n\n<p>Once you have defined a workflow you can run it using the Workflow Engine using a <code>WorkflowInvoker</code> or a <code>WorkflowApplication</code>. From the <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/windows-workflow-foundation/how-to-run-a-workflow\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>WorkflowInvoker provides a simple way for invoking a workflow as if it were a method call and can be used only for workflows that do not use persistence. WorkflowApplication provides a richer model for executing workflows that includes notification of life-cycle events, execution control, bookmark resumption, and persistence.</p>\n</blockquote>\n\n<p>The <code>ActivityContext</code> you refer to holds information about the workflow runtime, e.g. the host that executes the activity. The runtime fills in the information so you cannot inject something yourself.</p>\n\n<p>The reason that you won't find much examples of using the <code>StateMachine</code> class is that most workflows are build using a graphical designer that creates .XAML files and I don't think many are build using code only.</p>\n\n<p>Now, given all of this you can see that for your scenario this is not a good fit and certainly not designed for undo/redo use cases. </p>\n\n<p>There are framework/libraries that might be a better fit, like <a href=\"http://doc.postsharp.net/undoredo-ui\" rel=\"noreferrer\">this</a> from PostSharp.</p>\n"}], "owner": {"reputation": 17068, "user_id": 1248295, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/g9kGm.png?s=128&g=1", "display_name": "ElektroStudios", "link": "https://stackoverflow.com/users/1248295/elektrostudios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2029, "favorite_count": 0, "accepted_answer_id": 46133184, "answer_count": 1, "score": 3, "last_activity_date": 1504978476, "creation_date": 1504740397, "last_edit_date": 1504741588, "question_id": 46085701, "link": "https://stackoverflow.com/questions/46085701/example-to-use-system-activities-statements-statemachine-class-in-c-or-vb-net", "title": "Example to use &#39;System.Activities.Statements.StateMachine&#39; class in C# or VB.NET", "body": "<p>I feel in the need to ask for a full qualified example usage of the <a href=\"https://msdn.microsoft.com/en-us/library/system.activities.statements.statemachine%28v=vs.110%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">System.Activities.Statements.StateMachine</a> class to store and restore the state of a <code>Control</code> instance (this means, I would like to store the state of a Control to replace the typical undo/redo methodology based on control properties and \"commands\").</p>\n\n<p>I've been searching for home-made state-machine implementations on Google, I found a lot, but then I discovered this implementation of Microsoft in the .NET Framework Class Library (then now I have no reason to depend on any home-made implementation to reinvent the wheel), however, the MSDN has not a code sample to introduce on the usage of that class, and I didn't found any result on Google that demonstrates its usage (and the little pieces of code samples that I seen in the MSDN on some other related members I didn't understood it at all how do I should use them).</p>\n\n<p>Then now I'm literally blind, trying to learn how to use that class and its related members by trial-and-error.</p>\n\n<p>This below is what I tried by the moment, I'm stuck at the intent to \"register\" the state of the <code>obj</code> variable, concretelly at the <a href=\"https://msdn.microsoft.com/en-us/library/dd486595(v=vs.110).aspx\" rel=\"nofollow noreferrer\">System.Activities.OutArgument.Set</a> and <a href=\"https://msdn.microsoft.com/en-us/library/dd465669(v=vs.110).aspx\" rel=\"nofollow noreferrer\">System.Activities.OutArgument.Get</a> methods that takes a <a href=\"https://msdn.microsoft.com/en-us/library/system.activities.activitycontext(v=vs.110).aspx\" rel=\"nofollow noreferrer\">ActivityContext</a> as first parameter and I don't know what value I should pass to them (in my code below a call to those methods throws an exception because the value cannot be <em>null</em>).</p>\n\n<p>C# (translated by an online code translator, can have syntax errors):</p>\n\n<pre><code>using System.Activities;\nusing System.Activities.Statements;\n\n// Create a container for statemachines\nStateMachine sm = new StateMachine();\n\n// Declare an object to test its state...\nstring obj = null;\n\n// Modify the state of 'obj'.\nobj = \"hello\";\n\n// Save 1st state of 'obj'.\nActivity&lt;string&gt; act1 = obj;\nact1.Result = new OutArgument&lt;string&gt;();\nact1.Result.Set(null, obj);\nState state1 = new State();\nstate1.Entry = act1;\n\n// Modify the state of 'obj'.\nobj = \"hello world\";\n\n// Save 2nd state of 'obj'.\nActivity&lt;string&gt; act2 = obj;\nact2.Result = new OutArgument&lt;string&gt;();\nact2.Result.Set(null, obj);\nState state2 = new State();\nstate2.Entry = act2;\n\n// Add saved states into the statemachine collection.\nsm.States.Add(state1);\nsm.States.Add(state2);\n\n// Modify the state of 'obj'.\nobj = string.Empty;\n\n// Restore last saved state of 'obj'.\nobj = ((Activity&lt;string&gt;)sm.States.Last().Entry).Result.Get(null);\n</code></pre>\n\n<p>VB.NET:</p>\n\n<pre><code>Imports System.Activities\nImports System.Activities.Statements\n\n' Create a container for statemachines\nDim sm As New StateMachine()\n\n' Declare an object to test its state...\nDim obj As String\n\n' Modify the state of 'obj'.\nobj = \"hello\"\n\n' Save 1st state of 'obj'.\nDim act1 As Activity(Of String) = obj\nact1.Result = New OutArgument(Of String)\nact1.Result.Set(Nothing, obj)\nDim state1 As New State()\nstate1.Entry = act1\n\n' Modify the state of 'obj'.\nobj = \"hello world\"\n\n' Save 2nd state of 'obj'.\nDim act2 As Activity(Of String) = obj\nact2.Result = New OutArgument(Of String)\nact2.Result.Set(Nothing, obj)\nDim state2 As New State()\nstate2.Entry = act2\n\n' Add saved states into the statemachine collection.\nsm.States.Add(state1)\nsm.States.Add(state2)\n\n' Modify the state of 'obj'.\nobj = String.Empty\n\n' Restore last saved state of 'obj'.\nobj = DirectCast(sm.States.Last().Entry, Activity(Of String)).Result.Get(Nothing)\n</code></pre>\n\n<p>...Also some instructions like <code>Activity&lt;string&gt; act1 = obj;</code> / <code>Dim act1 As Activity(Of String) = obj</code> I'm not sure if that is the right manner to do it.</p>\n\n<p>PS: Note that in the code above I've used a String variable just to simplify things, but I require to save and restore the state of a <code>Control</code> as I explained before.</p>\n"}, {"tags": ["c#", "botframework"], "answers": [{"comments": [{"owner": {"reputation": 4478, "user_id": 3486353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsJWp.jpg?s=128&g=1", "display_name": "Sam Hanley", "link": "https://stackoverflow.com/users/3486353/sam-hanley"}, "edited": false, "score": 0, "creation_date": 1504755479, "post_id": 46085785, "comment_id": 79136722, "body": "Thanks, this was perfect! Just changed it to load ConversationData rather than UserData and it did exactly what I needed!"}], "tags": [], "owner": {"reputation": 3399, "user_id": 3011564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/USArP.png?s=128&g=1", "display_name": "D4RKCIDE", "link": "https://stackoverflow.com/users/3011564/d4rkcide"}, "is_accepted": true, "score": 6, "last_activity_date": 1523488681, "last_edit_date": 1523488681, "creation_date": 1504741303, "answer_id": 46085785, "question_id": 46085614, "link": "https://stackoverflow.com/questions/46085614/how-can-i-access-bot-framework-conversationdata-outside-of-a-dialog-like-in-mess/46085785#46085785", "title": "How can I access Bot Framework ConversationData outside of a dialog like in messages controller?", "body": "<p>The following should work for what you need:</p>\n\n<pre><code>if (activity.Type == ActivityTypes.Message)\n{\n\n    var message = activity as IMessageActivity;\n    using (var scope = DialogModule.BeginLifetimeScope(Conversation.Container, message))\n    {\n        var botDataStore = scope.Resolve&lt;IBotDataStore&lt;BotData&gt;&gt;();\n        var key = Address.FromActivity(message);\n\n        ConversationReference r = new ConversationReference();\n        var userData = await botDataStore.LoadAsync(key, BotStoreType.BotUserData, CancellationToken.None);\n\n        //you can get/set UserData, ConversationData, or PrivateConversationData like below\n        //set state data\n        userData.SetProperty(\"key 1\", \"value1\");\n        userData.SetProperty(\"key 2\", \"value2\");\n        //get state data\n        userData.GetProperty&lt;string&gt;(\"key 1\");\n        userData.GetProperty&lt;string&gt;(\"key 2\");\n\n        await botDataStore.SaveAsync(key, BotStoreType.BotUserData, userData, CancellationToken.None);\n        await botDataStore.FlushAsync(key, CancellationToken.None);\n    }\n    await Conversation.SendAsync(activity, () =&gt; new Dialogs.RootDialog());\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4478, "user_id": 3486353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsJWp.jpg?s=128&g=1", "display_name": "Sam Hanley", "link": "https://stackoverflow.com/users/3486353/sam-hanley"}, "edited": false, "score": 0, "creation_date": 1504825094, "post_id": 46102492, "comment_id": 79175519, "body": "This did not work - it results in the same outcome as the snippet posted in my question."}, {"owner": {"reputation": 843, "user_id": 891331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/54257f46cba51f84cb5e6e46e8363b9e?s=128&d=identicon&r=PG", "display_name": "Satheesh", "link": "https://stackoverflow.com/users/891331/satheesh"}, "reply_to_user": {"reputation": 4478, "user_id": 3486353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsJWp.jpg?s=128&g=1", "display_name": "Sam Hanley", "link": "https://stackoverflow.com/users/3486353/sam-hanley"}, "edited": false, "score": 0, "creation_date": 1504847784, "post_id": 46102492, "comment_id": 79180700, "body": "to test it try harcoding &quot;activity.ChannelId&quot; to &quot;webchat&quot; and give any fixed value for conversation while saving and retrieving. Any specific reason to save in ConversationData? You can also try UserData, PrivateConversationData etc"}, {"owner": {"reputation": 4478, "user_id": 3486353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsJWp.jpg?s=128&g=1", "display_name": "Sam Hanley", "link": "https://stackoverflow.com/users/3486353/sam-hanley"}, "edited": false, "score": 0, "creation_date": 1504885167, "post_id": 46102492, "comment_id": 79202729, "body": "I&#39;m not using webchat, I&#39;m using the Bot Framework Emulator - and I don&#39;t think that loading UserData or PrivateConversationData would be any different, since they&#39;re loaded the same way. I appreciate the attempt, but the accepted solution from JasonSowers above works perfectly."}, {"owner": {"reputation": 7957, "user_id": 86646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/z9iB2.jpg?s=128&g=1", "display_name": "Eric Dahlvang", "link": "https://stackoverflow.com/users/86646/eric-dahlvang"}, "edited": false, "score": 2, "creation_date": 1511918974, "post_id": 46102492, "comment_id": 82044367, "body": "activity.GetStateClient() is deprecated.  It will retrieve the default state client, intended only for prototyping: <a href=\"https://blog.botframework.com/2017/07/18/saving-state-azure-extensions/\" rel=\"nofollow noreferrer\">blog.botframework.com/2017/07/18/saving-state-azure-extensio&zwnj;&#8203;ns</a>"}], "tags": [], "owner": {"reputation": 843, "user_id": 891331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/54257f46cba51f84cb5e6e46e8363b9e?s=128&d=identicon&r=PG", "display_name": "Satheesh", "link": "https://stackoverflow.com/users/891331/satheesh"}, "is_accepted": false, "score": -1, "last_activity_date": 1504807011, "creation_date": 1504807011, "answer_id": 46102492, "question_id": 46085614, "link": "https://stackoverflow.com/questions/46085614/how-can-i-access-bot-framework-conversationdata-outside-of-a-dialog-like-in-mess/46102492#46102492", "title": "How can I access Bot Framework ConversationData outside of a dialog like in messages controller?", "body": "<p>Initialize BotState object with StateClient as below. Try the below code</p>\n\n<pre><code>   public static T GetStateData&lt;T&gt;(Activity activity, string key)\n    {\n        BotState botState = new BotState(activity.GetStateClient());\n        BotData botData = botState.GetConversationData(activity.ChannelId, activity.Conversation.Id);\n        return botData.GetProperty&lt;T&gt;(key);\n    }\n</code></pre>\n"}], "owner": {"reputation": 4478, "user_id": 3486353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsJWp.jpg?s=128&g=1", "display_name": "Sam Hanley", "link": "https://stackoverflow.com/users/3486353/sam-hanley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1654, "favorite_count": 3, "accepted_answer_id": 46085785, "answer_count": 2, "score": 5, "last_activity_date": 1536935410, "creation_date": 1504739784, "last_edit_date": 1523482327, "question_id": 46085614, "link": "https://stackoverflow.com/questions/46085614/how-can-i-access-bot-framework-conversationdata-outside-of-a-dialog-like-in-mess", "title": "How can I access Bot Framework ConversationData outside of a dialog like in messages controller?", "body": "<p>In a dialog within my bot, I store a flag value in the ConversationData like so:</p>\n\n<pre><code>context.ConversationData.SetValue(\"SomeFlag\", true);\n</code></pre>\n\n<p>Later, I need to check that flag in my MessagesController, <em>before</em> the message is dispatched to a dialog. As per <a href=\"https://stackoverflow.com/questions/40328134/accessing-conversation-data-from-message-controller-c-sharp\">this previous question</a> I tried retrieving the ConversationData in via the StateClient like this:</p>\n\n<pre><code>public async Task&lt;HttpResponseMessage&gt; Post([FromBody] Activity incomingMessage)\n{\n    StateClient stateClient = incomingMessage.GetStateClient();\n    BotData userData = await stateClient.BotState.GetConversationDataAsync(message.ChannelId, message.Conversation.Id);\n    bool finishedQuote = userData.GetProperty&lt;bool&gt;(\"SomeFlag\");\n    //...\n    // do conditional logic, then dispatch to a dialog as normal\n}\n</code></pre>\n\n<p>However, at runtime, the <code>userData</code> variable holds a BotData object where <code>userData.Data</code> is null, and I'm unable to retrieve any stored flags via <code>GetProperty</code>. I don't see anything in the <a href=\"https://docs.microsoft.com/en-us/bot-framework/dotnet/bot-builder-dotnet-state\" rel=\"nofollow noreferrer\">relevant documentation</a> that helps shed light on this issue - what might I be doing wrong here? Is there something I'm misunderstanding?</p>\n"}, {"tags": ["c#", "asp.net", ".net", "azure"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 8350646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/784b11184c487c816e30868867397f45?s=128&d=identicon&r=PG&f=1", "display_name": "Jung", "link": "https://stackoverflow.com/users/8350646/jung"}, "edited": false, "score": 0, "creation_date": 1504743904, "post_id": 46085632, "comment_id": 79134172, "body": "Thank you for the answer. Do you mean use &quot;dragon&quot; instead of &quot;/dragon&quot;? I tried it, and it still doesn&#39;t work. Can you think of any other suggestion?"}, {"owner": {"reputation": 3274, "user_id": 1639515, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Js0Iq.jpg?s=128&g=1", "display_name": "Jaya", "link": "https://stackoverflow.com/users/1639515/jaya"}, "reply_to_user": {"reputation": 177, "user_id": 8350646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/784b11184c487c816e30868867397f45?s=128&d=identicon&r=PG&f=1", "display_name": "Jung", "link": "https://stackoverflow.com/users/8350646/jung"}, "edited": false, "score": 0, "creation_date": 1504745022, "post_id": 46085632, "comment_id": 79134401, "body": "yes. I meant that. un comment code within your <code>Dragon</code> route method and check if it works. If it does nt hit any breakpoint within that method. you got show us how you ahve configured your routes on routes.cs page to know more"}, {"owner": {"reputation": 177, "user_id": 8350646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/784b11184c487c816e30868867397f45?s=128&d=identicon&r=PG&f=1", "display_name": "Jung", "link": "https://stackoverflow.com/users/8350646/jung"}, "edited": false, "score": 0, "creation_date": 1504758192, "post_id": 46085632, "comment_id": 79137323, "body": "I don&#39;t have routes.cs file. My routes are specified in the controller."}, {"owner": {"reputation": 3274, "user_id": 1639515, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Js0Iq.jpg?s=128&g=1", "display_name": "Jaya", "link": "https://stackoverflow.com/users/1639515/jaya"}, "reply_to_user": {"reputation": 177, "user_id": 8350646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/784b11184c487c816e30868867397f45?s=128&d=identicon&r=PG&f=1", "display_name": "Jung", "link": "https://stackoverflow.com/users/8350646/jung"}, "edited": false, "score": 0, "creation_date": 1504759385, "post_id": 46085632, "comment_id": 79137659, "body": "Have you defined any default route anywhere that might override this?"}, {"owner": {"reputation": 177, "user_id": 8350646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/784b11184c487c816e30868867397f45?s=128&d=identicon&r=PG&f=1", "display_name": "Jung", "link": "https://stackoverflow.com/users/8350646/jung"}, "edited": false, "score": 1, "creation_date": 1504763202, "post_id": 46085632, "comment_id": 79138957, "body": "Thanks for the answer, it turns out that I had a typo in my namespace... lol"}], "tags": [], "owner": {"reputation": 3274, "user_id": 1639515, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Js0Iq.jpg?s=128&g=1", "display_name": "Jaya", "link": "https://stackoverflow.com/users/1639515/jaya"}, "is_accepted": true, "score": 2, "last_activity_date": 1504740345, "last_edit_date": 1504740345, "creation_date": 1504739882, "answer_id": 46085632, "question_id": 46085559, "link": "https://stackoverflow.com/questions/46085559/net-azure-routes-other-than-index-are-not-working-how-do-i-fix-this/46085632#46085632", "title": ".Net, Azure routes other than index are not working, how do I fix this?", "body": "<p>Do not use '\\' on your route. Remove the same and it should work. To learn about routes - <a href=\"https://msdn.microsoft.com/en-us/library/cc668201.aspx#routes\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/cc668201.aspx#routes</a></p>\n"}], "owner": {"reputation": 177, "user_id": 8350646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/784b11184c487c816e30868867397f45?s=128&d=identicon&r=PG&f=1", "display_name": "Jung", "link": "https://stackoverflow.com/users/8350646/jung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 46085632, "answer_count": 1, "score": 0, "last_activity_date": 1504740345, "creation_date": 1504739314, "question_id": 46085559, "link": "https://stackoverflow.com/questions/46085559/net-azure-routes-other-than-index-are-not-working-how-do-i-fix-this", "title": ".Net, Azure routes other than index are not working, how do I fix this?", "body": "<p>Part of my controller:</p>\n\n<pre><code>    [HttpGet]\n    [Route(\"\")]\n    public IActionResult Index()\n    {\n        return View();\n    }\n\n    [HttpGet]\n    [Route(\"/dragon\")]\n    public IActionResult Dragon()\n    {\n        HttpContext.Session.Clear();\n        if(HttpContext.Session.GetObjectFromJson&lt;Dachi&gt;(\"Dachi\") == null)\n        {\n            HttpContext.Session.SetObjectAsJson(\"Dachi\", new Dachi());\n        }\n        Dachi dachi = HttpContext.Session.GetObjectFromJson&lt;Dachi&gt;(\"Dachi\");\n        ViewBag.Fullness = dachi.fullness;\n        ViewBag.Happiness = dachi.happiness;\n        ViewBag.Meal = dachi.meal;\n        ViewBag.Energy = dachi.energy;\n        return View();\n    }\n</code></pre>\n\n<p>When I go to \"myurl.azurewebsites.net/dragon\"\nIt should start this simple dragon game.</p>\n\n<p>However, I get a message that it is unable to handle its request.\nMy \"\" route (the Index) works fine.</p>\n\n<p>Here is my web.config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n   &lt;system.webServer&gt;\n       &lt;handlers&gt;\n        &lt;add name=\"aspNetCore\" path=\"*\" verb=\"*\" modules=\"AspNetCoreModule\" resourceType=\"Unspecified\"/&gt;\n        &lt;/handlers&gt;\n    &lt;aspNetCore processPath=\"%LAUNCHER_PATH%\" arguments=\"%LAUNCHER_ARGS%\" stdoutLogEnabled=\"false\" stdoutLogFile=\".\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\logs\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\stdout\" forwardWindowsAuthToken=\"false\"/&gt;\n    &lt;modules runAllManagedModulesForAllRequests=\"true\" /&gt;\n&lt;/system.webServer&gt;\n</code></pre>\n\n<p></p>\n\n<p>Why is my route other than Index not showing up???\nPlease help me. Thank you.</p>\n"}, {"tags": ["c#", ".net", "entity-framework", ".net-core", "entity-framework-core"], "comments": [{"owner": {"reputation": 238, "user_id": 425707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10dd350df8d82561d54851dd8fe9a41e?s=128&d=identicon&r=PG", "display_name": "Igor Pchelko", "link": "https://stackoverflow.com/users/425707/igor-pchelko"}, "edited": false, "score": 0, "creation_date": 1505117628, "post_id": 46085500, "comment_id": 79263549, "body": "Looks like a design decision: <a href=\"https://github.com/aspnet/Announcements/issues/258\" rel=\"nofollow noreferrer\">github.com/aspnet/Announcements/issues/258</a>"}, {"owner": {"reputation": 20294, "user_id": 1804678, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ZK0ii.jpg?s=128&g=1", "display_name": "Jess", "link": "https://stackoverflow.com/users/1804678/jess"}, "edited": false, "score": 0, "creation_date": 1523279169, "post_id": 46085500, "comment_id": 86481212, "body": "Are you still having this issue?  I tried with .NET Core 2.0.  I used my DbContext project as the default project in PM Console and as the startup project. In my DbContextFactory I was able to pass in a string to this method <code>optionsBuilder.UseSqlServer(&quot;DefaultConnection&quot;);</code> and the design time was able to find this connection name in my appsettings.json in my web project."}, {"owner": {"reputation": 566, "user_id": 2674033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6i1UT.jpg?s=128&g=1", "display_name": "Barabas", "link": "https://stackoverflow.com/users/2674033/barabas"}, "edited": false, "score": 0, "creation_date": 1561125886, "post_id": 46085500, "comment_id": 99973311, "body": "Please, <a href=\"https://stackoverflow.com/questions/50555412/how-to-read-appsettings-json-in-context-in-another-project-asp-net-core/56704633#56704633\">look at this solution</a>. I hope, it helps you."}], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 83250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b427fccce3eec71f3db8a7b3b92768b?s=128&d=identicon&r=PG", "display_name": "Mitchell Skurnik", "link": "https://stackoverflow.com/users/83250/mitchell-skurnik"}, "is_accepted": false, "score": 0, "last_activity_date": 1527900875, "creation_date": 1527900875, "answer_id": 50652592, "question_id": 46085500, "link": "https://stackoverflow.com/questions/46085500/injecting-env-conn-string-into-net-core-2-0-w-ef-core-dbcontext-in-different-cl/50652592#50652592", "title": "Injecting Env Conn String into .NET Core 2.0 w/EF Core DbContext in different class lib than Startup prj &amp; implementing IDesignTimeDbContextFactory", "body": "<p>I am a bit confused with your question.  Are you using dependency injection for the <code>DbContext</code> or are you trying to initialize and construct the context ad hoc?</p>\n\n<p>I am doing what you have described in one of my solutions.  Here is my solution structure:</p>\n\n<ul>\n<li>Corp.ApplicationName.Data</li>\n<li>Corp.ApplicationName.Web</li>\n</ul>\n\n<p>Startup.cs</p>\n\n<pre><code>public Startup(IHostingEnvironment env)\n{\n    IConfigurationBuilder builder = new ConfigurationBuilder()\n        .SetBasePath(env.ContentRootPath)\n        .AddJsonFile(\"appsettings.json\", false, true)\n        .AddJsonFile($\"appsettings.{env.EnvironmentName}.json\")\n        .AddEnvironmentVariables();\n    // ...\n}\n\npublic void ConfigureServices(IServiceCollection services)\n{\n    // Add framework services.\n    services.AddDbContext&lt;MyDbContext&gt;(\n        options =&gt; options.UseSqlServer(Configuration.GetConnectionString(\"DefaultConnection\"),\n        sqlOptions =&gt; sqlOptions.EnableRetryOnFailure()));\n\n    // SQL configuration for non-injected dbcontext\n    DbContextOptionsBuilder&lt;MyDbContext&gt; builder = new DbContextOptionsBuilder&lt;MyDbContext&gt;();\n    builder.UseSqlServer(Configuration.GetConnectionString(\"DefaultConnection\"));\n    services.AddSingleton(builder.Options);\n\n    // ...\n}\n</code></pre>\n\n<p>MyDbContext.cs</p>\n\n<pre><code>public class MyDbContext : IdentityDbContext&lt;ApplicationUser&gt;\n{\n    public MyDbContext(DbContextOptions options) : base(options) { }\n}\n</code></pre>\n\n<p>If you are not using dependency injection to pass the DbContext, you can access the SQL properties by injecting <code>DbContextOptions&lt;MyDbContext&gt;</code> instead.</p>\n\n<p>In this example, the appsettings file is only every read once and everything just works.</p>\n"}, {"comments": [{"owner": {"reputation": 2723, "user_id": 2099266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/480ef2286916008581f6b74a6f880e61?s=128&d=identicon&r=PG", "display_name": "Neil Watson", "link": "https://stackoverflow.com/users/2099266/neil-watson"}, "edited": false, "score": 1, "creation_date": 1560434046, "post_id": 53924899, "comment_id": 99742062, "body": "Thanks Dmitry, this is perfect. No need to &#39;inject&#39; anything else or mess around with trying to pass custom args into the CreateDbContext methods. Especially as they don&#39;t seem to have nailed down the usage yet. <a href=\"https://github.com/aspnet/EntityFrameworkCore/issues/8332\" rel=\"nofollow noreferrer\">github.com/aspnet/EntityFrameworkCore/issues/8332</a>"}], "tags": [], "owner": {"reputation": 25337, "user_id": 804385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f600efe82b7f3a1614af15cf3f833215?s=128&d=identicon&r=PG", "display_name": "Dmitry Pavlov", "link": "https://stackoverflow.com/users/804385/dmitry-pavlov"}, "is_accepted": true, "score": 10, "last_activity_date": 1545764335, "creation_date": 1545764335, "answer_id": 53924899, "question_id": 46085500, "link": "https://stackoverflow.com/questions/46085500/injecting-env-conn-string-into-net-core-2-0-w-ef-core-dbcontext-in-different-cl/53924899#53924899", "title": "Injecting Env Conn String into .NET Core 2.0 w/EF Core DbContext in different class lib than Startup prj &amp; implementing IDesignTimeDbContextFactory", "body": "<p>If you are looking for solution to get database connection string from your custom settings class initialized from <code>appsettings.json</code> file - that is how you can do this. Unfortunatelly you can't inject <code>IOptions</code> via <code>DI</code> to your <code>IDesignTimeDbContextFactory</code> implementation constructor.</p>\n\n<pre><code>public class DesignTimeDbContextFactory : IDesignTimeDbContextFactory&lt;AppContext&gt;\n{\n   public AppContext CreateDbContext(string[] args)\n   {\n       // IDesignTimeDbContextFactory is used usually when you execute EF Core commands like Add-Migration, Update-Database, and so on\n       // So it is usually your local development machine environment\n       var envName = Environment.GetEnvironmentVariable(\"ASPNETCORE_ENVIRONMENT\");\n\n       // Prepare configuration builder\n       var configuration = new ConfigurationBuilder()\n           .SetBasePath(Path.Combine(Directory.GetCurrentDirectory()))\n           .AddJsonFile(\"appsettings.json\", optional: false)\n           .AddJsonFile($\"appsettings.{envName}.json\", optional: false)\n           .Build();\n\n       // Bind your custom settings class instance to values from appsettings.json\n       var settingsSection = configuration.GetSection(\"Settings\");\n       var appSettings = new AppSettings();\n       settingsSection.Bind(appSettings);\n\n       // Create DB context with connection from your AppSettings \n       var optionsBuilder = new DbContextOptionsBuilder&lt;AppContext&gt;()\n           .UseMySql(appSettings.DefaultConnection);\n\n       return new AppContext(optionsBuilder.Options);\n   }\n}\n</code></pre>\n\n<p>Of course in your <code>AppSettings</code> class and <code>appsettings.json</code> you could have even more sophisticated logic of building the connection string. For instance, like this: </p>\n\n<pre><code>public class AppSettings\n{\n   public bool UseInMemory { get; set; }\n\n   public string Server { get; set; }\n   public string Port { get; set; }\n   public string Database { get; set; }\n   public string User { get; set; }\n   public string Password { get; set; }\n\n   public string BuildConnectionString()\n   {\n       if(UseInMemory) return null;\n\n       // You can set environment variable name which stores your real value, or use as value if not configured as environment variable\n       var server = Environment.GetEnvironmentVariable(Host) ?? Host;\n       var port = Environment.GetEnvironmentVariable(Port) ?? Port;\n       var database = Environment.GetEnvironmentVariable(Database) ?? Database;\n       var user = Environment.GetEnvironmentVariable(User) ?? User;\n       var password = Environment.GetEnvironmentVariable(Password) ?? Password;\n\n       var connectionString = $\"Server={server};Port={port};Database={database};Uid={user};Pwd={password}\";\n\n       return connectionString;\n   }\n}\n</code></pre>\n\n<p>With just values stored in <code>appsettings.json</code>:</p>\n\n<pre><code>{\n  \"Settings\": {\n    \"UseInMemory\": false,\n    \"Server\": \"myserver\",\n    \"Port\": \"1234\",\n    \"Database\": \"mydatabase\",\n    \"User\": \"dbuser\",\n    \"Password\": \"dbpassw0rd\"\n  }\n}\n</code></pre>\n\n<p>With password and user stored in environment variables:</p>\n\n<pre><code>{\n  \"Settings\": {\n    \"UseInMemory\": false,\n    \"Server\": \"myserver\",\n    \"Port\": \"1234\",\n    \"Database\": \"mydatabase\",\n    \"User\": \"MY-DB-UID-ENV-VAR\",\n    \"Password\": \"MY-DB-PWD-ENV-VAR\"\n  }\n}\n</code></pre>\n\n<p>In this case you should use it this way: </p>\n\n<pre><code>// Create DB context with connection from your AppSettings \nvar optionsBuilder = new DbContextOptionsBuilder&lt;AppContext&gt;();\nif(appSettings.UseInMemory) {\noptionsBuilder = appSettings.UseInMemory\n   ? optionsBuilder.UseInMemoryDatabase(\"MyInMemoryDB\")\n   : optionsBuilder.UseMySql(appSettings.BuildConnectionString());\n\nreturn new AppContext(optionsBuilder.Options);\n</code></pre>\n"}], "owner": {"reputation": 16142, "user_id": 1258525, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/7l2U0.jpg?s=128&g=1", "display_name": "Brian Ogden", "link": "https://stackoverflow.com/users/1258525/brian-ogden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7234, "favorite_count": 5, "accepted_answer_id": 53924899, "answer_count": 2, "score": 22, "last_activity_date": 1545764335, "creation_date": 1504738881, "last_edit_date": 1525350567, "question_id": 46085500, "link": "https://stackoverflow.com/questions/46085500/injecting-env-conn-string-into-net-core-2-0-w-ef-core-dbcontext-in-different-cl", "title": "Injecting Env Conn String into .NET Core 2.0 w/EF Core DbContext in different class lib than Startup prj &amp; implementing IDesignTimeDbContextFactory", "body": "<p>I honestly cannot believe how hard this is...first off the requirements that I am going for:</p>\n\n<ul>\n<li>Implementing Entity Framework Core 2.0' <code>IDesignTimeDbContextFactory</code> which is <a href=\"https://www.benday.com/2017/02/17/ef-core-migrations-without-hard-coding-a-connection-string-using-idbcontextfactory/\" rel=\"noreferrer\">IDbContextFactory</a> renamed to be less confusing to developers as to what it does</li>\n<li>I do not want to have to do loading of <code>appsettings.json</code> more than once. One reason is because my migrations are running in the domain of <code>MyClassLibrary.Data</code> and there is no <code>appsettings.js</code> file in that class library, I would have to to <code>Copy to Output Directory</code> <code>appsettings.js</code>. Another reason is that it just not very elegant.</li>\n</ul>\n\n<p>So here is what I have that currently works:</p>\n\n<pre><code>using System;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.EntityFrameworkCore.Design;\nusing Microsoft.Extensions.Configuration;\nusing AppContext = Tsl.Example.Data.AppContext;\n\nnamespace Tsl.Example\n{\n    public class DesignTimeDbContextFactory : IDesignTimeDbContextFactory&lt;AppContext&gt;\n    {\n        public AppContext CreateDbContext(string[] args)\n        {\n            string basePath = AppDomain.CurrentDomain.BaseDirectory;\n\n            string envName = Environment.GetEnvironmentVariable(\"ASPNETCORE_ENVIRONMENT\");\n\n            IConfigurationRoot configuration = new ConfigurationBuilder()\n                .SetBasePath(basePath)\n                .AddJsonFile(\"appsettings.json\")\n                .AddJsonFile($\"appsettings.{envName}.json\", true)\n                .Build();\n\n            var builder = new DbContextOptionsBuilder&lt;AppContext&gt;();\n\n            var connectionString = configuration.GetConnectionString(\"DefaultConnection\");\n\n            builder.UseMySql(connectionString);\n\n            return new AppContext(builder.Options);\n        }\n    }\n}\n</code></pre>\n\n<p>And here is my Program.cs:</p>\n\n<pre><code>using System.IO;\nusing System.Reflection;\nusing Microsoft.AspNetCore.Hosting;\nusing Microsoft.Extensions.Configuration;\nusing Microsoft.Extensions.Logging;\n\nnamespace Tsl.Example\n{\n    public class Program\n    {\n        public static void Main(string[] args)\n        {\n            BuildWebHost(args).Run();\n        }\n\n        //public static IWebHost BuildWebHost(string[] args) =&gt;\n        //    WebHost.CreateDefaultBuilder(args)\n        //        .UseStartup&lt;Startup&gt;()\n        //        .Build();\n\n        /// &lt;summary&gt;\n        /// This the magical WebHost.CreateDefaultBuilder method \"unboxed\", mostly, ConfigureServices uses an internal class so there is one piece of CreateDefaultBuilder that cannot be used here\n        /// https://andrewlock.net/exploring-program-and-startup-in-asp-net-core-2-preview1-2/\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"args\"&gt;&lt;/param&gt;\n        /// &lt;returns&gt;&lt;/returns&gt;\n        public static IWebHost BuildWebHost(string[] args)\n        {\n            return new WebHostBuilder()\n                .UseKestrel()\n                .UseContentRoot(Directory.GetCurrentDirectory())\n                .ConfigureAppConfiguration((hostingContext, config) =&gt;\n                {\n                    IHostingEnvironment env = hostingContext.HostingEnvironment;\n\n                    config.AddJsonFile(\"appsettings.json\", optional: true, reloadOnChange: true)\n                        .AddJsonFile($\"appsettings.{env.EnvironmentName}.json\", optional: true, reloadOnChange: true);\n\n                    if (env.IsDevelopment())\n                    {\n                        var appAssembly = Assembly.Load(new AssemblyName(env.ApplicationName));\n                        if (appAssembly != null)\n                        {\n                            config.AddUserSecrets(appAssembly, optional: true);\n                        }\n                    }\n\n                    config.AddEnvironmentVariables();\n\n                    if (args != null)\n                    {\n                        config.AddCommandLine(args);\n                    }\n                })\n                .ConfigureLogging((hostingContext, logging) =&gt;\n                {\n                    logging.AddConfiguration(hostingContext.Configuration.GetSection(\"Logging\"));\n                    logging.AddConsole();\n                    logging.AddDebug();\n                })\n                //.UseIISIntegration()\n                .UseDefaultServiceProvider((context, options) =&gt;\n                {\n                    options.ValidateScopes = context.HostingEnvironment.IsDevelopment();\n                })\n                .UseStartup&lt;Startup&gt;()\n                .Build();\n        }\n    }\n}\n</code></pre>\n\n<p>And here is my Startup.cs:</p>\n\n<pre><code>using Microsoft.AspNetCore.Builder;\nusing Microsoft.AspNetCore.Hosting;\nusing Microsoft.Extensions.DependencyInjection;\nusing ServiceStack;\nusing Tsl.Example.Interfaces;\nusing Tsl.Example.Provider;\nusing AppContext = Tsl.Example.Data.AppContext;\n\nnamespace Tsl.Example\n{\n    public class Startup\n    {\n        // This method gets called by the runtime. Use this method to add services to the container.\n        public void ConfigureServices(IServiceCollection services)\n        {\n            services.AddTransient&lt;IAppContext, AppContext&gt;();\n            services.AddTransient&lt;IExampleDataProvider, ExampleDataProvider&gt;();\n        }\n\n        public void Configure(IApplicationBuilder app, IHostingEnvironment env)\n        { \n            if (env.IsDevelopment())\n            {\n                app.UseDeveloperExceptionPage();\n            }\n\n            app.UseServiceStack(new AppHost());\n        }\n    }\n}\n</code></pre>\n\n<p>What I would like to do is use the <a href=\"https://andrewlock.net/how-to-use-the-ioptions-pattern-for-configuration-in-asp-net-core-rc2/\" rel=\"noreferrer\">IOptions pattern</a>, so I created this class:</p>\n\n<pre><code>namespace Tsl.Example\n{\n    /// &lt;summary&gt;\n    /// Strongly typed settings to share in app using the .NET Core IOptions pattern\n    /// https://andrewlock.net/how-to-use-the-ioptions-pattern-for-configuration-in-asp-net-core-rc2/\n    /// &lt;/summary&gt;\n    public class AppSettings\n    {\n        public string DefaultConnection { get; set; }\n    }\n}\n</code></pre>\n\n<p>Added this line to <code>Startup.ConfigureServices</code>:</p>\n\n<pre><code>  services.Configure&lt;AppSettings&gt;(options =&gt; Configuration.GetSection(\"AppSettings\").Bind(options));\n</code></pre>\n\n<p>And then tried and change my implementation of <code>IDesignTimeDbContextFactory&lt;AppContext&gt;</code> to:</p>\n\n<pre><code>public class DesignTimeDbContextFactory : IDesignTimeDbContextFactory&lt;AppContext&gt;\n{\n    private readonly AppSettings _appSettings;\n\n    public DesignTimeDbContextFactory(IOptions&lt;AppSettings&gt; appSettings)\n    {\n        this._appSettings = appSettings.Value;\n    }\n\n    public AppContext CreateDbContext(string[] args)\n    {\n        var builder = new DbContextOptionsBuilder&lt;AppContext&gt;();\n        builder.UseMySql(_appSettings.DefaultConnection);\n        return new AppContext(builder.Options);\n    }\n}\n</code></pre>\n\n<p>Unfortunately this did not work because the <code>Ioptions&lt;AppSettings&gt;</code> argument of <code>public DesignTimeDbContextFactory(IOptions&lt;AppSettings&gt; appSettings)</code> constructor is not injected. I assume this is because implementations of <code>IDesignTimeDbContextFactory&lt;AppContext&gt;</code> are called at Design time and dependency injection is just not \"ready\" in .NET Core apps at design time?</p>\n\n<p>I think it is kind of strange that it is so hard to inject an environment specific connection string using the Entity Framework Core 2.0 pattern of implementing <code>IDesignTimeDbContextFactory</code>, and also not having to copy and load settings files like <code>appsettings.json</code> more than once.</p>\n"}, {"tags": ["c#", "active-directory", "directoryservices", ".net-4.6.2"], "comments": [{"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1504738628, "post_id": 46085444, "comment_id": 79132972, "body": "I&#39;m guessing the problem goes away if you use <code>identity.GetGroups(context)</code>?"}, {"owner": {"reputation": 325, "user_id": 891018, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/11d73a1ad8ec02e8b1aa0469f434783e?s=128&d=identicon&r=PG", "display_name": "Nicole S.", "link": "https://stackoverflow.com/users/891018/nicole-s"}, "reply_to_user": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1504738694, "post_id": 46085444, "comment_id": 79132992, "body": "As noted in my post, yes. I&#39;m trying to understand the behavior."}, {"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1504738980, "post_id": 46085444, "comment_id": 79133077, "body": "Weird. I&#39;d think it would use the <code>Context</code> property value from the <code>identity</code> object."}, {"owner": {"reputation": 325, "user_id": 891018, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/11d73a1ad8ec02e8b1aa0469f434783e?s=128&d=identicon&r=PG", "display_name": "Nicole S.", "link": "https://stackoverflow.com/users/891018/nicole-s"}, "reply_to_user": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1504739779, "post_id": 46085444, "comment_id": 79133284, "body": "Weird, indeed. As a double check, I just output the <code>identity.Context.ConnectedServer</code> right before the <code>identity.GetGroups()</code> call, and it outputs the correct active server. But then the <code>GetGroups()</code> call fails trying to bind to an inactive server. This is happening in multiple environments - all trying to connect to the same inactive server."}, {"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1504743035, "post_id": 46085444, "comment_id": 79133987, "body": "It&#39;s kind of freaking me out that the <a href=\"https://referencesource.microsoft.com/\" rel=\"nofollow noreferrer\">.NET Reference Source</a> doesn&#39;t seem to include the System.DirectoryServices.AccountManagement namespace."}], "owner": {"reputation": 325, "user_id": 891018, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/11d73a1ad8ec02e8b1aa0469f434783e?s=128&d=identicon&r=PG", "display_name": "Nicole S.", "link": "https://stackoverflow.com/users/891018/nicole-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1171, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1504738454, "creation_date": 1504738454, "question_id": 46085444, "link": "https://stackoverflow.com/questions/46085444/what-principalcontext-does-userprincipal-getgroups-use-if-not-specified", "title": "What PrincipalContext does UserPrincipal.GetGroups() use if not specified?", "body": "<p>In the case that I'm getting groups for a UserPrincipal identity (in an Active Directory role provider), and I use the UserPrincipal.GetGroups() function that does not require a PrincipalContext as parameter, what does it default to using for the PrincipalContext? I ask as in troubleshooting an issue, I'm seeing seeing it connect to a different AD server that is not the connected server for my PrincipalContext. Some code as an example:</p>\n\n<pre><code>using ( PrincipalContext context = new PrincipalContext( ContextType.Domain, \"domain\", null, ContextOptions.Negotiate ) )\n{\n    UserPrincipal identity = UserPrincipal.FindByIdentity( context, IdentityType.SamAccountName, username );\n\n    if (identity != null)\n    {\n        var groupList = identity.GetGroups();\n    } \n}\n</code></pre>\n\n<p>If I output <code>context.ConnectedServer</code> I get a valid active server. However, <code>identity.GetGroups()</code> appears to connect to a different server (in my case, it's throwing a <code>System.DirectoryServices.ActiveDirectory.ActiveDirectoryServerDownException</code> because it's connecting to an old server). If I instead use <code>identity.GetGroups(context)</code>, the groups are correctly returned. Why does calling GetGroups without a PrincipalContext cause it to default to connecting to a different server?</p>\n"}, {"tags": ["c#", "mongodb", "mongodb-query"], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 2773595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060597885e4e40b58851b2386ea41be2?s=128&d=identicon&r=PG&f=1", "display_name": "sagannotcarl", "link": "https://stackoverflow.com/users/2773595/sagannotcarl"}, "is_accepted": false, "score": 0, "last_activity_date": 1504742825, "creation_date": 1504742825, "answer_id": 46085980, "question_id": 46085431, "link": "https://stackoverflow.com/questions/46085431/update-or-replace-a-document-field-array-item-with-a-filter/46085980#46085980", "title": "Update or replace a document field (array) item with a filter", "body": "<p>I can't think of a more concise way to do it in one request with this data structure.</p>\n\n<p>You could do it in one request if you changed the data structure to add a <code>votes</code> collection with the user, value, and an ObjectId of the parent content.</p>\n\n<p>You could then do a simple <code>upsert</code> which would take care of doing everything in a single request. Getting all the votes would be a find query for all votes with the related parent content.</p>\n"}], "owner": {"reputation": 1799, "user_id": 5881622, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/67094ae545c8821a23c4b092cfcdf447?s=128&d=identicon&r=PG&f=1", "display_name": "Zack", "link": "https://stackoverflow.com/users/5881622/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504757943, "creation_date": 1504738365, "last_edit_date": 1504757943, "question_id": 46085431, "link": "https://stackoverflow.com/questions/46085431/update-or-replace-a-document-field-array-item-with-a-filter", "title": "Update or replace a document field (array) item with a filter", "body": "<p>I have a document likes the following:</p>\n\n<pre><code>{\n    '_id': ObjectId('AAABBBCCC'),\n    'content': 'This is content.'\n    'votes': [\n        { 'user': ObjectId('UserIdOfA'), 'value': 1 },\n        { 'user': ObjectId('UserIdOfB'), 'value': 2 },\n        { 'user': ObjectId('UserIdOfC'), 'value': 3 }\n    ]\n}\n</code></pre>\n\n<p>Every user can only have one vote. The user can change the vote or even remove the vote at anytime.\nHow do I build a query and update: 1. if votes array already has the user vote, set the value or replace the whole vote, 2. if there's no vote in the votes, insert it.</p>\n\n<p>It was the code I tried but failed with 'Cannot update 'votes' and 'votes' at the same time' exception</p>\n\n<pre><code>public Task&lt;UpdateResult&gt; AddVoteAsync(ObjectId id, UserVote vote)\n{\n    var filter = Builders&lt;Topic&gt;.Filter.Eq(x =&gt; x.Id, id);\n    var update = Builders&lt;Topic&gt;.Update\n        .PullFilter(x =&gt; x.Votes, Builders&lt;UserVote&gt;.Filter.Eq(x =&gt; x.UserId, vote.UserId))\n        .AddToSet(x =&gt; x.Votes, vote);\n    return this.collection.UpdateOneAsync(filter, update);\n}\n</code></pre>\n\n<p>Can this operation be done in only one request? Or the only way is to find the document first and later decide the way to update it.</p>\n"}, {"tags": ["c#", "arrays", "json"], "comments": [{"owner": {"reputation": 214, "user_id": 3492988, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37c3cd946e0db76137d1b2ffaa36a8f9?s=128&d=identicon&r=PG&f=1", "display_name": "mdon88", "link": "https://stackoverflow.com/users/3492988/mdon88"}, "edited": false, "score": 0, "creation_date": 1504739672, "post_id": 46085399, "comment_id": 79133252, "body": "I think you might need to write your own converter because there&#39;s no way without properties that you can map the data to the properties in your class. If you know the order will always be the same then you can just assign each value yourself. See the answer below for more information: <a href=\"https://stackoverflow.com/a/8031283/3492988\">stackoverflow.com/a/8031283/3492988</a>"}, {"owner": {"reputation": 3274, "user_id": 1639515, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Js0Iq.jpg?s=128&g=1", "display_name": "Jaya", "link": "https://stackoverflow.com/users/1639515/jaya"}, "edited": false, "score": 0, "creation_date": 1504742097, "post_id": 46085399, "comment_id": 79133793, "body": "Not sure what you mean by  <i>just directly map to an object instance instead</i> - That is exactly what .net json does for you. <code>var orders =  JsonConvert.Deserialize&lt;IEnumerable&lt;Order&gt;&gt;(jsonString)</code> would return a collection of Order &quot;instances&quot; created for you."}, {"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 0, "creation_date": 1504762160, "post_id": 46085399, "comment_id": 79138569, "body": "You could use <code>ObjectToArrayConverter&lt;Order&gt;</code> from <a href=\"https://stackoverflow.com/q/39461518/3744182\">C# JSON.NET - Deserialize response that uses an unusual data structure</a> to deserialize that JSON.  In fact, this question may be a duplicate of that.  Agree?"}], "answers": [{"tags": [], "owner": {"reputation": 414, "user_id": 3200493, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/5GBXx.jpg?s=128&g=1", "display_name": "Phi", "link": "https://stackoverflow.com/users/3200493/phi"}, "is_accepted": false, "score": 1, "last_activity_date": 1504742660, "last_edit_date": 1504742660, "creation_date": 1504742336, "answer_id": 46085912, "question_id": 46085399, "link": "https://stackoverflow.com/questions/46085399/c-parsing-json-arrays-without-property-names-as-objects/46085912#46085912", "title": "C# Parsing JSON arrays without property names as objects", "body": "<p>It seems that your string is not a valid json, when I try to parse <a href=\"https://jsonformatter.curiousconcept.com/\" rel=\"nofollow noreferrer\">here</a> I have the following error:</p>\n\n<blockquote>\n  <p>Expecting object or array, not string.[Code 1, Structure 1]</p>\n</blockquote>\n\n<p>But, I have found a way to deserialize it. I see that your json is an array, so, we can parse as <code>JArray</code> and removing <code>\"orders\":</code> text:</p>\n\n<pre><code>JsonConvert.DeserializeObject&lt;JArray&gt;(json.Replace(\"\\\"orders\\\":\", string.Empty));\n</code></pre>\n\n<p>Now, we have an array but I think is not possible to do an explicit cast to <code>Order</code> or <code>List&lt;Order&gt;</code> type, and the answer is that we need to iterate the <code>JArray</code>:</p>\n\n<pre><code>List&lt;Order&gt; orders = new List&lt;Order&gt;();\n\nforeach (var item in arrayListed)\n{\n    Order order = new Order();\n    order.price = (decimal)item[0];\n    order.size = (decimal)item[1];\n    order.order_id = (Guid)item[2];\n    orders.Add(order);\n}\n</code></pre>\n\n<p>Here is the <kbd><a href=\"http://rextester.com/VPSNP65673\" rel=\"nofollow noreferrer\">demostration</a></kbd> and its results.</p>\n"}], "owner": {"reputation": 864, "user_id": 3808312, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7ee45486866d7dcc28c9acc10b0ef8f0?s=128&d=identicon&r=PG&f=1", "display_name": "w0f", "link": "https://stackoverflow.com/users/3808312/w0f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2927, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1504742660, "creation_date": 1504738078, "question_id": 46085399, "link": "https://stackoverflow.com/questions/46085399/c-parsing-json-arrays-without-property-names-as-objects", "title": "C# Parsing JSON arrays without property names as objects", "body": "<p>I am using an API that returns a bunch of order data as an array of strings.</p>\n\n<pre><code>\"orders\": [\n    //[ price, size, order_id ]\n    [ \"295.96\",\"0.05088265\",\"3b0f1225-7f84-490b-a29f-0faef9de823a\" ],\n    ...\n]\n</code></pre>\n\n<p>I need to use Json.Net to parse it to an object of the following format:</p>\n\n<pre><code>public class Order\n{\n    public decimal price { get; set; }\n    public decimal size { get; set; }\n    public Guid order_id { get; set; }\n}\n</code></pre>\n\n<p>How can I achieve this? I know how to use Json.NET to deserialize an object so I end up with a single property <code>orders</code> of type string array, but is there any way to skip that and have it just directly map to an object instance instead?</p>\n"}, {"tags": ["c#", "winforms", "visual-studio-2017"], "comments": [{"owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "edited": false, "score": 0, "creation_date": 1504737456, "post_id": 46085237, "comment_id": 79132658, "body": "Are you on 32 or 64 bit machine ?"}, {"owner": {"reputation": 95, "user_id": 7565801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-tOo-Xw1VK2Q/AAAAAAAAAAI/AAAAAAAAASM/uHMbb6rYfL0/photo.jpg?sz=128", "display_name": "Connor Nee", "link": "https://stackoverflow.com/users/7565801/connor-nee"}, "reply_to_user": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "edited": false, "score": 0, "creation_date": 1504737524, "post_id": 46085237, "comment_id": 79132680, "body": "I am using a 64 bit OS"}, {"owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "edited": false, "score": 0, "creation_date": 1504737598, "post_id": 46085237, "comment_id": 79132700, "body": "You can probably find your solution here: <a href=\"https://stackoverflow.com/questions/13728491/opensubkey-returns-null-for-a-registry-key-that-i-can-see-in-regedit-exe\" title=\"opensubkey returns null for a registry key that i can see in regedit exe\">stackoverflow.com/questions/13728491/&hellip;</a>"}, {"owner": {"reputation": 95, "user_id": 7565801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-tOo-Xw1VK2Q/AAAAAAAAAAI/AAAAAAAAASM/uHMbb6rYfL0/photo.jpg?sz=128", "display_name": "Connor Nee", "link": "https://stackoverflow.com/users/7565801/connor-nee"}, "edited": false, "score": 0, "creation_date": 1504737646, "post_id": 46085237, "comment_id": 79132713, "body": "ill read  and check now"}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 0, "creation_date": 1504737871, "post_id": 46085237, "comment_id": 79132790, "body": "<code>var readKey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry64).OpenSubKey(&quot;Software\\\\TruckersMP&quot;);</code>"}, {"owner": {"reputation": 95, "user_id": 7565801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-tOo-Xw1VK2Q/AAAAAAAAAAI/AAAAAAAAASM/uHMbb6rYfL0/photo.jpg?sz=128", "display_name": "Connor Nee", "link": "https://stackoverflow.com/users/7565801/connor-nee"}, "edited": false, "score": 0, "creation_date": 1508252509, "post_id": 46085237, "comment_id": 80533211, "body": "Can this be unmarked as a duplicate since I edited my answer."}], "owner": {"reputation": 95, "user_id": 7565801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-tOo-Xw1VK2Q/AAAAAAAAAAI/AAAAAAAAASM/uHMbb6rYfL0/photo.jpg?sz=128", "display_name": "Connor Nee", "link": "https://stackoverflow.com/users/7565801/connor-nee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1504750615, "answer_count": 0, "score": 0, "last_activity_date": 1534377350, "creation_date": 1504737140, "last_edit_date": 1534377350, "question_id": 46085237, "link": "https://stackoverflow.com/questions/46085237/registry-path-returning-null-on-windows-10-64bit-enterprise", "closed_reason": "Duplicate", "title": "Registry Path returning null on windows 10 64bit Enterprise", "body": "<p>I am confuse on why 'readkey' is returning null in this situation, currently running windows 10 Enterprise.</p>\n\n<pre><code>Microsoft.Win32.RegistryKey readKey = Microsoft.Win32.Registry.LocalMachine.OpenSubKey(\"SOFTWARE\\\\TruckersMP\");\n        if (readKey != null)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/wVMwH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wVMwH.png\" alt=\"enter image description here\"></a></p>\n\n<p>If someone could point me in the right direction since this is new to me and help me learn in this area.</p>\n"}, {"tags": ["c#", "task-parallel-library", "tpl-dataflow"], "comments": [{"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "edited": false, "score": 0, "creation_date": 1504737184, "post_id": 46085192, "comment_id": 79132570, "body": "You only <code>await</code> the <code>Task</code> from <code>SendAsync</code> which only indicates whether the item was accepted by the target. If any one of the targets throws an exception that exception will be attached to the <code>Completion</code> task of that target. In order to observe that exception you need to <code>await</code> that task, i.e. <code>await t3.Completion</code>."}, {"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "edited": false, "score": 0, "creation_date": 1504737857, "post_id": 46085192, "comment_id": 79132783, "body": "An easy fix could be to replace <code>await t.SendAsync(item);</code> with <code>if (!await t.SendAsync(item)) await t.Completion;</code> That would propagate the exception out to your inner most <code>try&#47;catch</code>. You could then throw again or add information to a new exception, e.g. which block faulted. You&#39;d then need to handle the faulted <code>broadcaster</code> but you get the idea."}, {"owner": {"reputation": 14853, "user_id": 261950, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/TWPrJ.jpg?s=128&g=1", "display_name": "Tomasz Jasku\u03bba", "link": "https://stackoverflow.com/users/261950/tomasz-jasku%ce%bba"}, "reply_to_user": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "edited": false, "score": 0, "creation_date": 1504738612, "post_id": 46085192, "comment_id": 79132969, "body": "@JSteward Thanks! I&#39;ve replaced with <code>if (!await t.SendAsync(item)) await t.Completion;</code> and now everything works. Post it as answer so I can accept it."}], "answers": [{"comments": [{"owner": {"reputation": 14853, "user_id": 261950, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/TWPrJ.jpg?s=128&g=1", "display_name": "Tomasz Jasku\u03bba", "link": "https://stackoverflow.com/users/261950/tomasz-jasku%ce%bba"}, "edited": false, "score": 0, "creation_date": 1504787819, "post_id": 46086063, "comment_id": 79154743, "body": "One question though. It seems to me that even if <code>t.SendAsync(item)</code> sends messages in order the next block after t is receving them out of order. I though DataFlow waranted the ordering of message processing?"}, {"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "reply_to_user": {"reputation": 14853, "user_id": 261950, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/TWPrJ.jpg?s=128&g=1", "display_name": "Tomasz Jasku\u03bba", "link": "https://stackoverflow.com/users/261950/tomasz-jasku%ce%bba"}, "edited": false, "score": 0, "creation_date": 1504795705, "post_id": 46086063, "comment_id": 79160916, "body": "Each of your targets will receive messages in the order they are sent  to your <code>broadcaster</code>. If at most one target fails the <code>broadcaster</code> will be faulted and refuse new messages. Your <code>await Task.WhenAll</code> with default block options ensures that all targets have accepted an individual message before processing the next one. Can you provide an example or use case that shows messages out of order?"}, {"owner": {"reputation": 14853, "user_id": 261950, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/TWPrJ.jpg?s=128&g=1", "display_name": "Tomasz Jasku\u03bba", "link": "https://stackoverflow.com/users/261950/tomasz-jasku%ce%bba"}, "edited": false, "score": 0, "creation_date": 1504797075, "post_id": 46086063, "comment_id": 79161904, "body": "It was my fault. I was passing as paramater the body for <code>ActionBlock&lt;int&gt;</code> as <code>Action&lt;int&gt;</code> instead of <code>Func&lt;int, Task&gt;</code>"}, {"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "reply_to_user": {"reputation": 14853, "user_id": 261950, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/TWPrJ.jpg?s=128&g=1", "display_name": "Tomasz Jasku\u03bba", "link": "https://stackoverflow.com/users/261950/tomasz-jasku%ce%bba"}, "edited": false, "score": 0, "creation_date": 1504797169, "post_id": 46086063, "comment_id": 79161979, "body": "Ah, glad you got it figured out."}, {"owner": {"reputation": 14853, "user_id": 261950, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/TWPrJ.jpg?s=128&g=1", "display_name": "Tomasz Jasku\u03bba", "link": "https://stackoverflow.com/users/261950/tomasz-jasku%ce%bba"}, "edited": false, "score": 0, "creation_date": 1504797311, "post_id": 46086063, "comment_id": 79162109, "body": "However I noticed that <code>if(!await t.SendAsync(item))</code> doesn&#39;t work anymore if I introduce another block in between. Let&#39;s say <code>t.SendAsync(item)</code> where <code>t</code> is a new block <code>BufferBlock&lt;int&gt;</code> linked to the actual <code>ActionBlock&lt;int&gt;</code> that throws an exception. The exception doesn&#39;t go back like before to the source so it is never catched. What is the best strategy to handle it?"}, {"owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "reply_to_user": {"reputation": 14853, "user_id": 261950, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/TWPrJ.jpg?s=128&g=1", "display_name": "Tomasz Jasku\u03bba", "link": "https://stackoverflow.com/users/261950/tomasz-jasku%ce%bba"}, "edited": false, "score": 0, "creation_date": 1504798003, "post_id": 46086063, "comment_id": 79162604, "body": "The root of the issue is that when a block throws an exception; that exception is attached to the blocks completion task or the completion task representing the completion of the pipeline. If <code>if(!await t.SendAsync(item))</code> where <code>t</code> represents a block that is not faulted, i.e. the  new <code>BufferBlock&lt;int&gt;</code>, then <code>SendAsync</code> will complete with success while the downstream <code>ActionBlock</code> is still faulted. Right now the example is not well behaved, can you post a new question with a more complete sample on <a href=\"https://codereview.stackexchange.com/\">Code Review</a> we could get things cleaned up better."}, {"owner": {"reputation": 14853, "user_id": 261950, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/TWPrJ.jpg?s=128&g=1", "display_name": "Tomasz Jasku\u03bba", "link": "https://stackoverflow.com/users/261950/tomasz-jasku%ce%bba"}, "edited": false, "score": 0, "creation_date": 1504815260, "post_id": 46086063, "comment_id": 79171642, "body": "Posted another question on SO: <a href=\"https://stackoverflow.com/questions/46104379/tpl-dataflow-and-exception-handling-in-downstream-blocks\" title=\"tpl dataflow and exception handling in downstream blocks\">stackoverflow.com/questions/46104379/&hellip;</a>"}], "tags": [], "owner": {"reputation": 6095, "user_id": 7339946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23485b61c5f33b4e4e67999df7988858?s=128&d=identicon&r=PG", "display_name": "JSteward", "link": "https://stackoverflow.com/users/7339946/jsteward"}, "is_accepted": true, "score": 2, "last_activity_date": 1504743543, "creation_date": 1504743543, "answer_id": 46086063, "question_id": 46085192, "link": "https://stackoverflow.com/questions/46085192/tpl-dataflow-unable-to-handle-an-exception-in-actionblock/46086063#46086063", "title": "TPL DataFlow unable to handle an exception in ActionBlock", "body": "<p>If a block enters a faulted state it will no longer accept new items and the <code>Exception</code> it threw will be attached to its <code>Completion</code> task and/or propagated with its completion if linked in a pipeline. To observe the <code>Exception</code> you can <code>await</code> the completion if the block refuses more items.</p>\n\n<pre><code>var processingTasks = targets.Select(async t =&gt;\n{\n    try\n    {\n        if(!await t.SendAsync(item))\n            await t.Completion;\n    }\n    catch\n    {\n        Trace.TraceInformation(\"handled in select\"); // never goes here\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 14853, "user_id": 261950, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/TWPrJ.jpg?s=128&g=1", "display_name": "Tomasz Jasku\u03bba", "link": "https://stackoverflow.com/users/261950/tomasz-jasku%ce%bba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 0, "accepted_answer_id": 46086063, "answer_count": 1, "score": 1, "last_activity_date": 1504743543, "creation_date": 1504736896, "question_id": 46085192, "link": "https://stackoverflow.com/questions/46085192/tpl-dataflow-unable-to-handle-an-exception-in-actionblock", "title": "TPL DataFlow unable to handle an exception in ActionBlock", "body": "<p>I'm trying to send a copy of one message from an <code>ActionBlock&lt;int&gt;</code> to multiple consumers which are also <code>ActionBlock&lt;int&gt;</code>. This works well, however if one of the target blocks throws an exception, it seems that this is not propagated to the source block. Here how I try to handle the exception but it never goes to the <code>catch</code> part:</p>\n\n<pre><code>static void Main(string[] args)\n{\n    var t1 = new ActionBlock&lt;int&gt;(async i =&gt;\n    {\n        await Task.Delay(2000);\n        Trace.TraceInformation($\"target 1 | Thread {System.Threading.Thread.CurrentThread.ManagedThreadId} | message {i}\");\n    }, new ExecutionDataflowBlockOptions { BoundedCapacity = 5 });\n\n    var t2 = new ActionBlock&lt;int&gt;(async i =&gt;\n    {\n        await Task.Delay(1000);\n        Trace.TraceInformation($\"target 2 | Thread {System.Threading.Thread.CurrentThread.ManagedThreadId} | message {i}\");\n    }, new ExecutionDataflowBlockOptions { BoundedCapacity = 5 });\n\n    var t3 = new ActionBlock&lt;int&gt;(async i =&gt;\n    {\n        await Task.Delay(100);\n        Trace.TraceInformation($\"target 3 | Thread {System.Threading.Thread.CurrentThread.ManagedThreadId} | message {i}\");\n        if (i &gt; 5)\n            throw new Exception(\"Too big number\");\n    }, new ExecutionDataflowBlockOptions { BoundedCapacity = 5 });\n\n    var targets = new [] { t1, t2, t3};\n\n    var broadcaster = new ActionBlock&lt;int&gt;(\n        async item =&gt;\n        {\n            var processingTasks = targets.Select(async t =&gt;\n            {\n                try\n                {\n                    await t.SendAsync(item);\n                }\n                catch\n                {\n                    Trace.TraceInformation(\"handled in select\"); // never goes here\n                }\n            });\n\n            try\n            {\n                await Task.WhenAll(processingTasks);\n            }\n            catch\n            {\n                Trace.TraceInformation(\"handled\"); // never goes here\n            }\n        });\n\n    for (var i = 1; i &lt;= 10; i++)\n        broadcaster.Post(i);\n}\n</code></pre>\n\n<p>I'm not sure what I'm missing here but I would like to be able to retrive the exception and which target block has faulted.</p>\n"}, {"tags": ["c#", "visual-studio", "dll"], "answers": [{"tags": [], "owner": {"reputation": 10050, "user_id": 501196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kuQ41.png?s=128&g=1", "display_name": "yms", "link": "https://stackoverflow.com/users/501196/yms"}, "is_accepted": true, "score": 1, "last_activity_date": 1504738077, "creation_date": 1504738077, "answer_id": 46085398, "question_id": 46085183, "link": "https://stackoverflow.com/questions/46085183/visual-studio-who-is-requiring-a-particular-dll/46085398#46085398", "title": "Visual Studio: Who is requiring a particular DLL?", "body": "<p>Try opening the .exe file of your program with <a href=\"http://ilspy.net/\" rel=\"nofollow noreferrer\">ILSpy</a> (open source) then navigate through the dependencies.</p>\n\n<p><a href=\"https://i.stack.imgur.com/EX1sv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EX1sv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Image obtained from a question at askubuntu:<br>\n<a href=\"https://askubuntu.com/questions/772652/decompile-dll-files-without-net-reflector\">Decompile .dll files without .net reflector</a></p>\n"}], "owner": {"reputation": 4810, "user_id": 831938, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da74f94a1f60fceb744b45be1f4cc45a?s=128&d=identicon&r=PG&f=1", "display_name": "sir_thursday", "link": "https://stackoverflow.com/users/831938/sir-thursday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 46085398, "answer_count": 1, "score": 1, "last_activity_date": 1504738077, "creation_date": 1504736830, "question_id": 46085183, "link": "https://stackoverflow.com/questions/46085183/visual-studio-who-is-requiring-a-particular-dll", "title": "Visual Studio: Who is requiring a particular DLL?", "body": "<p>I am using the Modules panel in Visual Studio to see which DLLs are being loaded.  How can I find out which executable/project/etc is requiring one of the specific DLLs?  I'm confused why the DLL is appearing in the Modules panel, and I'd like to figure out who is requiring it.</p>\n"}, {"tags": ["c#", "xml", "xslt"], "comments": [{"owner": {"reputation": 4022, "user_id": 1603383, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53153300238f829c1142b446b12bfa26?s=128&d=identicon&r=PG", "display_name": "erdomke", "link": "https://stackoverflow.com/users/1603383/erdomke"}, "edited": false, "score": 0, "creation_date": 1504749402, "post_id": 46085124, "comment_id": 79135427, "body": "Is there a reason why you need to use an <code>XmlDocument</code>?  Wouldn&#39;t it be easier to just generate a string with the XML you want and write it to the response directly?"}, {"owner": {"reputation": 905, "user_id": 5330050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4New3.jpg?s=128&g=1", "display_name": "Iskandar Reza", "link": "https://stackoverflow.com/users/5330050/iskandar-reza"}, "reply_to_user": {"reputation": 4022, "user_id": 1603383, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/53153300238f829c1142b446b12bfa26?s=128&d=identicon&r=PG", "display_name": "erdomke", "link": "https://stackoverflow.com/users/1603383/erdomke"}, "edited": false, "score": 0, "creation_date": 1504801395, "post_id": 46085124, "comment_id": 79164748, "body": "Mostly for consistency and validation. I&#39;m still learning C#, this is only my 10th week with the language. If I miss out things that would cause the xml to be invalid, the thing would throw an exception and not output, so that helps my learning process."}], "answers": [{"comments": [{"owner": {"reputation": 905, "user_id": 5330050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4New3.jpg?s=128&g=1", "display_name": "Iskandar Reza", "link": "https://stackoverflow.com/users/5330050/iskandar-reza"}, "edited": false, "score": 0, "creation_date": 1504802710, "post_id": 46093569, "comment_id": 79165433, "body": "That makes sense. I swapped the order and used <code>PrependChild</code> and it works as expected. As in it loaded the XSL file. Now I gotta work on that file because it&#39;s just loading my title template and not parsing any links."}], "tags": [], "owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "is_accepted": true, "score": 1, "last_activity_date": 1504778676, "creation_date": 1504778676, "answer_id": 46093569, "question_id": 46085124, "link": "https://stackoverflow.com/questions/46085124/adding-xml-stylesheet-to-a-dynamically-generated-xml-in-c/46093569#46093569", "title": "Adding xml-stylesheet to a dynamically generated XML in C#", "body": "<p>With the order of statements</p>\n\n<pre><code>   doc.AppendChild(useXSL);\n    doc.LoadXml(makeXML());\n</code></pre>\n\n<p>the <code>LoadXml</code> would erase any nodes in the document (like the processing instruction inserted earlier) so that approach can't work. If you want to construct the XML using string concatenation then you would ned to use that first and then <code>PrependChild</code> the processing instruction, I would rather suggest to use a single XML specific API like the <code>XMLDocument</code> <code>Create...</code> factory methods consistently or to switch to <code>XmlWriter</code> or these days to LINQ to XML to construct the XML. </p>\n"}], "owner": {"reputation": 905, "user_id": 5330050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4New3.jpg?s=128&g=1", "display_name": "Iskandar Reza", "link": "https://stackoverflow.com/users/5330050/iskandar-reza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 46093569, "answer_count": 1, "score": 0, "last_activity_date": 1504778676, "creation_date": 1504736336, "question_id": 46085124, "link": "https://stackoverflow.com/questions/46085124/adding-xml-stylesheet-to-a-dynamically-generated-xml-in-c", "title": "Adding xml-stylesheet to a dynamically generated XML in C#", "body": "<p>I'm trying to add an XSL file reference to an existing code that generates an XML sitemap on the fly. There is no actual physical XML file as the code creates an XML response through a generic handler that responds to a url rewrite path (the handler is called SitemapProvider.ashx and handles requests to sitemap.xml). My end goal is to eventually style and decorate the boring sitemap.xml.</p>\n\n<p>Here's a snippet of my code:</p>\n\n<pre><code>        public void ProcessRequest(HttpContext context)\n    {\n\n        XmlDocument doc = ShowXML(context);\n        context.Response.ContentType = \"text/xml\";\n        context.Response.ContentEncoding = System.Text.Encoding.UTF8;\n\n        context.Response.Expires = -1;\n        context.Response.Cache.SetAllowResponseInBrowserHistory(true);\n\n        doc.Save(context.Response.Output);\n    }\n\n    private XmlDocument ShowXML(HttpContext context)\n    {\n        XmlDocument doc = new XmlDocument();\n        var useXSL = doc.CreateProcessingInstruction(\n            \"xml-stylesheet\", \"type=\\\"text/xsl\\\" href=\\\"~/sitemap.xsl\\\"\"\n            );\n        doc.AppendChild(useXSL);\n        doc.LoadXml(makeXML());\n\n        return doc;\n    }\n\n    private string makeXML()\n    {\n        string xmlString = \"\";\n\n        xmlString +=\n            //\"&lt;?xml-stylesheet type=\\\"text/xsl\\\" href=\\\"/sitemap.xsl\\\"?&gt;\" +\n            \"&lt;urlset xmlns = \\\"http://www.sitemaps.org/schemas/sitemap/0.9\\\"&gt;\" +\n            // and so it goes\n</code></pre>\n\n<p>I can't seem to get either the code in ShowXML() to work or the one I commented out in makeXML(). </p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c#", "entity-framework", "dry"], "comments": [{"owner": {"reputation": 49085, "user_id": 7297700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7650f380e0e3b8415ba9afaadf70906?s=128&d=identicon&r=PG&f=1", "display_name": "David Browne - Microsoft", "link": "https://stackoverflow.com/users/7297700/david-browne-microsoft"}, "edited": false, "score": 0, "creation_date": 1504737444, "post_id": 46085119, "comment_id": 79132656, "body": "It belongs on a Repository that depends on IPermissionChecker, IMembershipService and MyDbContext.  Your DI framework should supply all tree of them.  Whether this repository handles just Books or additional entities is up to you."}, {"owner": {"reputation": 8459, "user_id": 161735, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/689e8343b0d4a4c7bc117ccb9675a572?s=128&d=identicon&r=PG", "display_name": "ajbeaven", "link": "https://stackoverflow.com/users/161735/ajbeaven"}, "reply_to_user": {"reputation": 49085, "user_id": 7297700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7650f380e0e3b8415ba9afaadf70906?s=128&d=identicon&r=PG&f=1", "display_name": "David Browne - Microsoft", "link": "https://stackoverflow.com/users/7297700/david-browne-microsoft"}, "edited": false, "score": 0, "creation_date": 1504738145, "post_id": 46085119, "comment_id": 79132847, "body": "I would have thought that a Repository should only be for retrieving data and not be interested in business logic like this? Even knowing how to retrieve the logged in user seems like a violation of SRP. Would you suggest using the Repository exclusively for data access (the majority of which would be a useless abstraction of DbContext) or in addition to accessing MyDbContext directly (potentially confusing and not immediately obvious which one should be used)."}, {"owner": {"reputation": 49085, "user_id": 7297700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7650f380e0e3b8415ba9afaadf70906?s=128&d=identicon&r=PG&f=1", "display_name": "David Browne - Microsoft", "link": "https://stackoverflow.com/users/7297700/david-browne-microsoft"}, "edited": false, "score": 2, "creation_date": 1504738346, "post_id": 46085119, "comment_id": 79132908, "body": "Data access permissions are a closely related concern to data retrieval, and often are implemented in the back-end."}, {"owner": {"reputation": 14993, "user_id": 423497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c411e966f549fa07b3d7fb142ba733?s=128&d=identicon&r=PG", "display_name": "Steve Py", "link": "https://stackoverflow.com/users/423497/steve-py"}, "edited": false, "score": 1, "creation_date": 1504754599, "post_id": 46085119, "comment_id": 79136543, "body": "+1. With repository patterns things like authorization, soft-delete, (i.e. IsActive) and temporal type factors in data filtering are best contained in the repository for more consistency. Filtering for specific business logic is better left to business logic services/controllers."}, {"owner": {"reputation": 8459, "user_id": 161735, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/689e8343b0d4a4c7bc117ccb9675a572?s=128&d=identicon&r=PG", "display_name": "ajbeaven", "link": "https://stackoverflow.com/users/161735/ajbeaven"}, "reply_to_user": {"reputation": 14993, "user_id": 423497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c411e966f549fa07b3d7fb142ba733?s=128&d=identicon&r=PG", "display_name": "Steve Py", "link": "https://stackoverflow.com/users/423497/steve-py"}, "edited": false, "score": 0, "creation_date": 1504757730, "post_id": 46085119, "comment_id": 79137214, "body": "@StevePy Thanks guys. I have been put off repositories due to the recent discussion about them being useless abstraction when you&#39;re working with EF&#39;s DbContext. Everything you&#39;re saying makes sense though, so I shall proceed!"}], "answers": [{"tags": [], "owner": {"reputation": 1417, "user_id": 6835380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/D0iXZ.jpg?s=128&g=1", "display_name": "aaronR", "link": "https://stackoverflow.com/users/6835380/aaronr"}, "is_accepted": false, "score": 0, "last_activity_date": 1504763581, "creation_date": 1504763581, "answer_id": 46088769, "question_id": 46085119, "link": "https://stackoverflow.com/questions/46085119/finding-a-home-for-ef-data-access-code-that-uses-di/46088769#46088769", "title": "Finding a home for EF data access code that uses DI", "body": "<p>An alternative solution is to use the Query Object Pattern.</p>\n\n<p>See the <a href=\"https://codeopinion.com/query-objects-instead-of-repositories/\" rel=\"nofollow noreferrer\">article</a> for a good explanation.</p>\n"}], "owner": {"reputation": 8459, "user_id": 161735, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/689e8343b0d4a4c7bc117ccb9675a572?s=128&d=identicon&r=PG", "display_name": "ajbeaven", "link": "https://stackoverflow.com/users/161735/ajbeaven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504763581, "creation_date": 1504736315, "question_id": 46085119, "link": "https://stackoverflow.com/questions/46085119/finding-a-home-for-ef-data-access-code-that-uses-di", "title": "Finding a home for EF data access code that uses DI", "body": "<p>Here's some code boiled down to a method that is called from a bunch of different locations:</p>\n\n<pre><code>private async Task&lt;IQueryable&lt;Book&gt;&gt; GetAllBooksWithPermissionToView(MyDbContext context)\n{\n    var currentUser = await _membershipService.GetCurrentUser&lt;Publisher&gt;(context);\n    var books = context.Books.AsQueryable();\n\n    var canViewAllBooks = _permissionChecker.DoesUserHavePermission(context, PermissionId.CanViewOtherPublishersBooks);\n    if (!canViewAllBooks)\n        books = books.WhereUserIsPublishingBook(currentUser.UserId);\n\n    return books;\n}\n</code></pre>\n\n<p>Here I'm retrieving <code>Book</code> entities that the current user has permissions to access. </p>\n\n<p><strong>Where should this code live?</strong></p>\n\n<p>I understand that often extension methods are frequently employed to help situations like this - in fact you'll see I'm already doing just that. In this case however, because it makes use of a couple of services (<code>IPermissionChecker</code> and <code>IMembershipService</code>), I would need to pass them through as arguments which seems a bit ugly.</p>\n\n<p>The other obvious solution is to have a separate service just for retrieving these books. That service would hold the method above and would be injected in to places that need it. This also feels a bit wrong - perhaps because I find it hard to describe what the single responsibility of this service would be other than just \"a place to put this method\". I certainly don't want the service to turn in to a <code>PlaceToPutReusedQueriesService</code> and I also don't want to end up having heaps of individual services just for retrieving certain datasets. Is it valid to try and avoid these things?</p>\n\n<p>Any ideas on how to proceed would be much appreciated.</p>\n"}, {"tags": ["c#", "dictionary"], "comments": [{"owner": {"reputation": 6063, "user_id": 3225495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/57OBG.jpg?s=128&g=1", "display_name": "BJ Myers", "link": "https://stackoverflow.com/users/3225495/bj-myers"}, "edited": false, "score": 0, "creation_date": 1504735826, "post_id": 46085014, "comment_id": 79132176, "body": "Hint: Create a dictionary that maps a <i>student</i> to a <i>list of scores</i> ."}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1504735996, "post_id": 46085014, "comment_id": 79132228, "body": "And this code doesn&#39;t compile. Please post only the necessary complete code that compiles."}, {"owner": {"reputation": 1375, "user_id": 2351039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wCmqF.jpg?s=128&g=1", "display_name": "Felix Castor", "link": "https://stackoverflow.com/users/2351039/felix-castor"}, "edited": false, "score": 0, "creation_date": 1504736142, "post_id": 46085014, "comment_id": 79132271, "body": "<code>Dictionary&lt;string,List&lt;double&gt;&gt;</code> where string is the student ID and <code>List&lt;double&gt;</code> is the test scores.  The string value is the key and the value is the list."}, {"owner": {"reputation": 1375, "user_id": 2351039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wCmqF.jpg?s=128&g=1", "display_name": "Felix Castor", "link": "https://stackoverflow.com/users/2351039/felix-castor"}, "edited": false, "score": 0, "creation_date": 1504736286, "post_id": 46085014, "comment_id": 79132315, "body": "Or create a Student class that contains an ID and a list of test scores and average.  Then you can do <code>Dictionary&lt;string,Student&gt;</code>.  This gives you more flexibility in the way you handle properties."}, {"owner": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "edited": false, "score": 1, "creation_date": 1504736556, "post_id": 46085014, "comment_id": 79132401, "body": "On a side note, there&#39;s a really weird line of code that seems wrong: <code>TotalGrades = Convert.Topublic</code>."}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "reply_to_user": {"reputation": 386, "user_id": 8242696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d156727d19a63b70ba89bf028f23e8?s=128&d=identicon&r=PG&f=1", "display_name": "Devin L.", "link": "https://stackoverflow.com/users/8242696/devin-l"}, "edited": false, "score": 0, "creation_date": 1504736817, "post_id": 46085014, "comment_id": 79132477, "body": "@DevinLiu I think it&#39;s <code>Convert.ToInt32()</code> and <code>public static</code> merged to create a monster the like of which the world has never seen before."}, {"owner": {"reputation": 26064, "user_id": 338068, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4cb6a6a3ccc0d568a0944a6655e22803?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/338068/chris"}, "edited": false, "score": 0, "creation_date": 1504736903, "post_id": 46085014, "comment_id": 79132495, "body": "And at the beginning of the class there is a bunch of code that should be contained in a method that isn&#39;t..."}, {"owner": {"reputation": 3, "user_id": 8571474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491a24ca81e7bf72aaba7d158c4ccc9e?s=128&d=identicon&r=PG&f=1", "display_name": "anglr4", "link": "https://stackoverflow.com/users/8571474/anglr4"}, "edited": false, "score": 0, "creation_date": 1504737496, "post_id": 46085014, "comment_id": 79132671, "body": "Sorry about the copy/paste error in my original code- was trying to skip some notes I had made while fooling around with dictionaries and ended up butchering my post."}], "answers": [{"comments": [{"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 2, "creation_date": 1504737398, "post_id": 46085254, "comment_id": 79132647, "body": "You can use LINQ and simply do <code>return TestScores.Average();</code>."}, {"owner": {"reputation": 1375, "user_id": 2351039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wCmqF.jpg?s=128&g=1", "display_name": "Felix Castor", "link": "https://stackoverflow.com/users/2351039/felix-castor"}, "reply_to_user": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1504737489, "post_id": 46085254, "comment_id": 79132667, "body": "Yes, I didn&#39;t want to add too much complexity.  Although it would make a good note."}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 1, "creation_date": 1504738884, "post_id": 46085254, "comment_id": 79133046, "body": "Isn&#39;t that <i>less</i> complexity?"}, {"owner": {"reputation": 1375, "user_id": 2351039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wCmqF.jpg?s=128&g=1", "display_name": "Felix Castor", "link": "https://stackoverflow.com/users/2351039/felix-castor"}, "edited": false, "score": 0, "creation_date": 1504742625, "post_id": 46085254, "comment_id": 79133892, "body": "If you know Linq."}], "tags": [], "owner": {"reputation": 1375, "user_id": 2351039, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wCmqF.jpg?s=128&g=1", "display_name": "Felix Castor", "link": "https://stackoverflow.com/users/2351039/felix-castor"}, "is_accepted": false, "score": 0, "last_activity_date": 1504737553, "last_edit_date": 1504737553, "creation_date": 1504737198, "answer_id": 46085254, "question_id": 46085014, "link": "https://stackoverflow.com/questions/46085014/c-how-do-i-use-dictionaries-and-lists-with-user-input/46085254#46085254", "title": "C# How do I use dictionaries and lists with user input?", "body": "<p>Build a student class to hold the information.    </p>\n\n<pre><code>public class Student\n{\n  public string ID\n  public List&lt;double&gt; TestScores {get;set;}\n  // in this case average only has a getter which calculates the average when needed.\n  public double Average \n  {\n      get\n      { \n       if(TestScores != null &amp;&amp; TestScores.Count &gt;0)\n         {\n           double ave = 0;\n           foreach(var x in TestScores)//basic average formula.\n              ave += x;\n           // using linq this could be reduced to \"return TestScores.Average()\"\n           return ave/TestScores.Count;\n         }\n         return 0; // can't divide by zero.\n      }\n\n  }\n  public Student(string id)\n  {\n   ID = id;\n   TestScores = new List&lt;double&gt;();\n  }\n\n}\n</code></pre>\n\n<p>Now your dictionary collection can keep the information.  To get you started here are a couple ways to access the data.  Definitely not all inclusive.</p>\n\n<p>Adding elements to the dictionary:</p>\n\n<pre><code>Dictionary&lt;string,Student&gt; dict = new Dictionary&lt;string,Student&gt;();\nStudent stud = new Student(\"Jerry\");\ndict.Add(stud.ID,stud);\n</code></pre>\n\n<p>Pulling information:</p>\n\n<pre><code>string aveScore = dict[\"Jerry\"].Average.ToString(\"#.00\");\nConsole.Write(aveScore);\n</code></pre>\n\n<p>looping through the dictionary:</p>\n\n<pre><code>foreach(var s in dict.Keys)\n{\n   dict[s].TestScores.Add(50);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "is_accepted": false, "score": 0, "last_activity_date": 1504739974, "last_edit_date": 1504739974, "creation_date": 1504739356, "answer_id": 46085563, "question_id": 46085014, "link": "https://stackoverflow.com/questions/46085014/c-how-do-i-use-dictionaries-and-lists-with-user-input/46085563#46085563", "title": "C# How do I use dictionaries and lists with user input?", "body": "<p>Since this is either homework, or you're trying to learn how to use dictionaries, instead of posting code I'll just point you in the right direction.</p>\n\n<p>A <code>Dictionary</code> in C# is a collection of Key-Value pairs. The <code>Key</code> must be unique while the <code>Value</code> doesn't have to be. So if you define a dictionary as follows:</p>\n\n<pre><code>Dictionary&lt;int, int&gt; dict = new Dictionary&lt;int, int&gt;();\n</code></pre>\n\n<p>It means you've created a collection of pairs, where the <code>Key</code> is of type <code>int</code>, and <code>Value</code> is also of type <code>int</code>. So, if you add a couple of items to the dictionary, it's content would look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ATxHO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ATxHO.png\" alt=\"enter image description here\"></a></p>\n\n<p>At <code>index = 0</code>, you have an item with <code>Key=1</code>, and <code>Value=100</code>.\nAt <code>index = 1</code>, you have an item with <code>Key=2</code>, and <code>Value=200</code>.</p>\n\n<p><strong><em>But, the <code>Value</code> of a dictionary doesn't necessarily have to be a single value. It could also be a <code>Collection</code> (or a class object, or even another dictionary).</em></strong></p>\n\n<p>Since your requirement is to have a list of scores per student, and a dictionary <code>Value</code> permits a <code>Collection</code>, it looks like using a dictionary is indeed a good idea. But what kind of a dictionary should we use?</p>\n\n<p>Well, there's many to choose from.</p>\n\n<p>One approach is to use a <code>Dictionary&lt;string, List&lt;int&gt;&gt;</code>. The <code>string</code> representing the student name (or an ID), and the <code>List&lt;int&gt;</code> representing test scores. So;</p>\n\n<pre><code>Dictionary&lt;string, List&lt;int&gt;&gt; dict = new Dictionary&lt;string, List&lt;int&gt;&gt;();\n</code></pre>\n\n<p>Now you can populate this dictionary with each student's scores. For example:</p>\n\n<pre><code>dict.Add(\"Arthur Dent\", new List&lt;int&gt;() { 75, 54, 26 });\ndict.Add(\"Zaphod Beeblebrox\", new List&lt;int&gt;() { 12, 13, 7 });\ndict.Add(\"Ford Prefect\", new List&lt;int&gt;() { 99, 89, 69 });\n</code></pre>\n\n<p>In your case, you can get the input from user with each student name and scores.</p>\n\n<p>However, like I said, you can also use a class object as a dictionary <code>Value</code>, and, in fact, that is a better approach for your problem. The answer by Felix shows how to do this, so I won't go into details. But you essentially want to create a dictionary as follows, assuming your class is <code>Student</code>.</p>\n\n<pre><code>Dictionary&lt;string, Student&gt; dict = new Dictionary&lt;string, Student&gt;();\n</code></pre>\n\n<p>Then create instances of <code>Student</code> based on user input, and add them to the dictionary. An added advantage of using a <code>Student</code> class is that you can have all information related to one student in one place, and also have additional helper methods, such as the <code>Average()</code> method in Felix's example so your code will be much cleaner and simpler.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8571474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491a24ca81e7bf72aaba7d158c4ccc9e?s=128&d=identicon&r=PG&f=1", "display_name": "anglr4", "link": "https://stackoverflow.com/users/8571474/anglr4"}, "edited": false, "score": 0, "creation_date": 1504744456, "post_id": 46085751, "comment_id": 79134279, "body": "Wow, lots of helpful responses... Thanks y&#39;all!"}], "tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": true, "score": 1, "last_activity_date": 1504750599, "last_edit_date": 1504750599, "creation_date": 1504740998, "answer_id": 46085751, "question_id": 46085014, "link": "https://stackoverflow.com/questions/46085014/c-how-do-i-use-dictionaries-and-lists-with-user-input/46085751#46085751", "title": "C# How do I use dictionaries and lists with user input?", "body": "<p>Dictionaries are a wonderful tool!  I tried to use your original logic, but at times, I had to go another way.  Also, I kept getting lost with the \"c\" and \"r\" index variables.  I prefer longer names for indices.  Hope this helps.</p>\n\n<pre><code>//Let's create a gradeTranslator dictionary.\n// As the grades follow the simple divisions along averages divisible by 10,\n// we can just use the first digit of the average to determine the grade.\n\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\n\nnamespace ConsoleApplication\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            bool useSampleData = true;\n            Dictionary&lt;string, List&lt;double&gt;&gt; gradeBook = new Dictionary&lt;string, List&lt;double&gt;&gt;();\n            Dictionary&lt;int, string&gt; gradeTranslator = new Dictionary&lt;int, string&gt;();\n\n            for (int i = 0; i &lt; 6; i++) {\n                gradeTranslator.Add(i, \"F\");\n            }\n            gradeTranslator.Add(6, \"D\");\n            gradeTranslator.Add(7, \"C\");\n            gradeTranslator.Add(8, \"B\");\n            gradeTranslator.Add(9, \"A\");\n            gradeTranslator.Add(10, \"A\");\n\n            int TotalStudents, TotalGrades;\n\n            // For testing purposes, it is a lot easier to start with some\n            // sample data. So, I created a query to see if the user wants \n            // to use sample data or to provide her own input.\n            Console.WriteLine(\"Do you want to input the data (I) or allow me to use sample data (S)?\");\n            var inputMethod = Console.ReadLine();\n\n            if(inputMethod.ToUpper().IndexOf(\"I\") &gt;=0) {\n                useSampleData = false; \n            }\n\n            // User Sample Data   \n            if (useSampleData) {  // test without using the console input\n                gradeBook.Add(\"Bob\", new List&lt;double&gt;() { 67.8, 26.3, 33.2, 33.1, 67.2 });\n                gradeBook.Add(\"Dick\", new List&lt;double&gt;() { 88.2, 45.2, 100.0, 89.2, 91.5 });\n                gradeBook.Add(\"Jane\", new List&lt;double&gt;() { 99.2, 99.5, 93.9, 98.2, 15.0 });\n                gradeBook.Add(\"Samantha\", new List&lt;double&gt;() { 62, 89.5, 93.9, 98.2, 95.0 });\n                gradeBook.Add(\"Estefania\", new List&lt;double&gt;() { 95.2, 92.5, 92.9, 98.2, 89 });\n\n                TotalStudents = gradeBook.Count();\n                TotalGrades = gradeBook[\"Bob\"].Count();\n\n                TotalStudents = 5;\n\n            // user will provide their own data.\n            } else { \n\n                Console.WriteLine(\"Enter the number of students: \");\n                TotalStudents = Convert.ToInt32(Console.ReadLine());\n\n                Console.WriteLine(\"Enter the number of exams: \");\n                TotalGrades = Convert.ToInt32(Console.ReadLine());\n\n\n\n                for (int studentId = 0; studentId &lt; TotalStudents; studentId++) {\n                    Console.Write(\"Please enter name of student {0}: \", studentId);\n                    var name = Console.ReadLine();\n                    gradeBook.Add(name, new List&lt;double&gt;());\n                    for (int testId = 0; testId &lt; TotalGrades; testId++) {\n                        Console.Write(\"Please enter exam score {0} for \" + \n                        \"student {1}: \", testId + 1, name);\n                         gradeBook[name].\n                         Add(Convert.ToDouble(Console.ReadLine()));\n                    }\n                }\n\n            }\n\n            // Here we will divide the grade by 10 as an integer division to\n            // get just the first digit of the average and then translate\n            // to a letter grade.\n            foreach (var student in gradeBook) {\n                Console.WriteLine(\"Student \" + student.Key + \n             \" scored an average of \" + student.Value.Average() + \". \" + \n              student.Key + \" will recieve a(n) \" + \n              gradeTranslator[(int)(student.Value.Average() / 10)] + \n                              \" in the class.\\n\");\n            }\n\n            Console.Write(\"\\nPress the [ENTER] key to exit.\");\n            Console.ReadLine();\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8571474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491a24ca81e7bf72aaba7d158c4ccc9e?s=128&d=identicon&r=PG&f=1", "display_name": "anglr4", "link": "https://stackoverflow.com/users/8571474/anglr4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5326, "favorite_count": 2, "accepted_answer_id": 46085751, "answer_count": 3, "score": 0, "last_activity_date": 1504750599, "creation_date": 1504735645, "last_edit_date": 1504737281, "question_id": 46085014, "link": "https://stackoverflow.com/questions/46085014/c-how-do-i-use-dictionaries-and-lists-with-user-input", "title": "C# How do I use dictionaries and lists with user input?", "body": "<p>I am building on a project that I already created. This is my first attempt at using dictionaries/lists. This a very broad question, as the book I have does not cover using dictionaries at all, and I am having trouble finding examples of dictionaries with user input online. I have made a program using a multidimensional array that asks the user for a number of students and a number of exams, then has the user enter scores for each exam, and outputs each students average grade based on their exam scores. I now want to achieve the same thing, only using dictionaries and lists instead of arrays. I don't even know where to begin. Can anyone explain how this would work? Here is the code I already have created, though it probably will not be helpful at all:</p>\n\n<pre><code>class MainClass\n{\n    public static void Main(string[] args)\n    {\n        int TotalStudents = 0;\n        int TotalGrades = 0;\n\n        Console.WriteLine(\"Enter the number of students: \");\n        TotalStudents = Convert.ToInt32(Console.ReadLine());\n\n        Console.WriteLine(\"Enter the number of exams: \");\n        TotalGrades = Convert.ToInt32(Console.ReadLine());\n\n        int[,] scoresArray = new int[TotalStudents, TotalGrades];\n\n        for (int r = 0; r &lt; TotalStudents; r++)\n            for (int c = 0; c &lt; TotalGrades; c++)\n            {\n            Console.Write(\"Please enter exam score {0} for student {1}: \", c + 1, r + 1);\n                scoresArray[r, c] = Convert.ToInt32(Console.ReadLine());\n            }\n        for (int r = 0; r &lt; scoresArray.GetLength(0); r++)\n        {\n            int studentSum = 0;\n            int testCount = 0;\n            for (int c = 0; c &lt; scoresArray.GetLength(1); c++)\n            {\n                studentSum += scoresArray[r, c];\n                testCount++;\n            }\n            string gradeLetter = \"\";\n            double average = studentSum / testCount;\n            Console.WriteLine(\"\\nStudent \" + (r + 1).ToString() + \" Average Score: \" + average.ToString());\n\n            if (average &gt;= 90)\n            {\n                gradeLetter = \"A\";\n            }\n            else if (average &gt;= 80 &amp;&amp; average &lt; 90)\n            {\n                gradeLetter = \"B\";\n            }\n            else if (average &gt;= 70 &amp;&amp; average &lt; 80)\n            {\n                gradeLetter = \"C\";\n            }\n            else if (average &gt;= 60 &amp;&amp; average &lt; 70)\n            {\n                gradeLetter = \"D\";\n            }\n            else\n            {\n                gradeLetter = \"F\";\n            }\n\n            Console.WriteLine(\"Student \" + (r + 1).ToString() + \" will recieve a(n) \" + gradeLetter + \" in the class.\\n\");\n        }\n        Console.Write(\"\\nPress the [ENTER] key to exit.\");\n        Console.ReadLine();\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "wcf", ".net-4.5", "serilog", ".net-standard"], "owner": {"reputation": 1097, "user_id": 7077442, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/da270d2fa1eb5ff6684de7a1283207eb?s=128&d=identicon&r=PG&f=1", "display_name": "EiEiGuy", "link": "https://stackoverflow.com/users/7077442/eieiguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 771, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1561689312, "creation_date": 1504734798, "question_id": 46084892, "link": "https://stackoverflow.com/questions/46084892/how-to-use-serilog-for-error-logging-in-a-net-standard-1-4-class-library", "title": "How to use Serilog for error logging in a .NET Standard 1.4 class library", "body": "<p>I am working with .NET Framework 4.5.2 project. I am creating a class library and I want to use Serilog for error logging in this class library. However, since this is a class library, how do I initialize the logger to begin with?</p>\n\n<p>I am familiar with initializing the actual logger with something similar to this</p>\n\n<pre><code>Log.Logger = new LoggerConfiguration()\n    .WriteTo.RollingFile(new CompactJsonFormatter(), \n                             @\"C:\\AppLog\\log.json\")\n    .CreateLogger();\n</code></pre>\n\n<p>But how/where do I call that initialization code? Does Serilog work like Log4Net where it needs to be initially called from a console, desktop or similar program that uses the class library?  Or is Serilog capable of being set up entirely from within the class library?</p>\n\n<p>I have used Serilog with .NET Core solutions before where I can initialize the logger in Startup.cs and then easily use Dependency Injection to inject the logger into the constructors of the class library. But the project I am working on now is .NET 4.x, without the .NET Core DI framework.</p>\n\n<p>These class libraries I am creating will be used by a WCF Service Library (which itself looks just like a class library) and the WCF Service Library will then be hosted by IIS 8 for production. So, do I need to configure Serilog in the IIS web.Config and then instance the logger in something like the Application Start in the global.aspx?</p>\n\n<p>Thanks in advance for any help.</p>\n"}, {"tags": ["c#", "asp.net", ".net", "authentication", "asp.net-core"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 5177690, "user_type": "registered", "profile_image": "https://graph.facebook.com/965666576824229/picture?type=large", "display_name": "Ted Chirvasiu", "link": "https://stackoverflow.com/users/5177690/ted-chirvasiu"}, "edited": false, "score": 1, "creation_date": 1504758233, "post_id": 46087419, "comment_id": 79137333, "body": "Thank you very much! <code>context.ChallengeAsync(&quot;Windows&quot;)</code> did the trick! I swear I tried await <code>context.ChallengeAsync()</code>, but I used &quot;NTLM&quot; as parameter for schema and it told me the authentication schema does not exist... Didn&#39;t know what value to pass..."}], "tags": [], "owner": {"reputation": 5363, "user_id": 2588374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16c7f89aef99ff0fb791c6d5cd7671d?s=128&d=identicon&r=PG", "display_name": "Tratcher", "link": "https://stackoverflow.com/users/2588374/tratcher"}, "is_accepted": true, "score": 12, "last_activity_date": 1523963046, "last_edit_date": 1523963046, "creation_date": 1504755548, "answer_id": 46087419, "question_id": 46084851, "link": "https://stackoverflow.com/questions/46084851/windows-and-anonymous-authentication-in-net-core-2-0/46087419#46087419", "title": "Windows and Anonymous Authentication in .Net Core 2.0", "body": "<p>Anonymous takes precedence. You need to call httpContext.ChallengeAsync() when you get an anonymous request to a restricted part of your app. That will cause the client to send credentials on the next request. <a href=\"https://github.com/aspnet/ServerTests/blob/e155b814349f8ff9dd563480d784c38837b0b59f/test/ServerComparison.TestSites/StartupNtlmAuthentication.cs#L34-L59\" rel=\"noreferrer\">Here's a test that does this</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 17564, "user_id": 2780791, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1feea731a99cb95e342d196802bb868a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexei - check Codidact", "link": "https://stackoverflow.com/users/2780791/alexei-check-codidact"}, "is_accepted": false, "score": 8, "last_activity_date": 1523965063, "creation_date": 1523965063, "answer_id": 49877066, "question_id": 46084851, "link": "https://stackoverflow.com/questions/46084851/windows-and-anonymous-authentication-in-net-core-2-0/49877066#49877066", "title": "Windows and Anonymous Authentication in .Net Core 2.0", "body": "<p>Tratcher's answer saved me after some wasted time on this topic. For a very simple scenario (anonymous controller + windows authentication restricted in the rest), here is a quick start (middleware):</p>\n\n<pre><code>public class NtlmAndAnonymousSetupMiddleware\n{\n    private readonly RequestDelegate next;\n\n    public NtlmAndAnonymousSetupMiddleware(RequestDelegate next)\n    {\n        this.next = next;\n    }\n\n    public async Task Invoke(HttpContext context)\n    {\n        if (context.User.Identity.IsAuthenticated || context.Request.Path.ToString().StartsWith(\"/Anonymous\"))\n        {\n            await next(context);\n            return;\n        }\n\n        await context.ChallengeAsync(\"Windows\");\n    }\n\n}\n</code></pre>\n\n<p>I have just plugged this in at the beginning of <code>Startup.Configure</code> method:</p>\n\n<pre><code>app.UseMiddleware&lt;NtlmAndAnonymousSetupMiddleware&gt;();\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 5177690, "user_type": "registered", "profile_image": "https://graph.facebook.com/965666576824229/picture?type=large", "display_name": "Ted Chirvasiu", "link": "https://stackoverflow.com/users/5177690/ted-chirvasiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9422, "favorite_count": 10, "accepted_answer_id": 46087419, "answer_count": 2, "score": 15, "last_activity_date": 1523965063, "creation_date": 1504734585, "last_edit_date": 1504735028, "question_id": 46084851, "link": "https://stackoverflow.com/questions/46084851/windows-and-anonymous-authentication-in-net-core-2-0", "title": "Windows and Anonymous Authentication in .Net Core 2.0", "body": "<p>I'm trying to mix <strong>Windows</strong> and <strong>Anonymous</strong> authentication in a <strong>.Net Core 2.0</strong> empty web app. I would like to <strong>avoid the [Authorize]</strong> attribute as I do not want to use Mvc or controllers.</p>\n\n<p>My setup is as follows:</p>\n\n<ol>\n<li><p>I created an empty .Net Core 2.0 web application</p></li>\n<li><p>I went to project properties -> Debug -> Checked \"Enable Windows Authentication\" and disabled \"Enable Anonymous Authentication\".\nNow \"windowsAuthentication\": true and \"anonymousAuthentication\": false appeared in my launchSettings.json under \"IIS\".</p></li>\n<li><p>Inside Startup.cs, in ConfigureServices I added\n<code>services.AddAuthentication(Microsoft.AspNetCore.Server.IISIntegration.IISDefaults.AuthenticationScheme);</code> as mentioned in <a href=\"https://docs.microsoft.com/en-us/aspnet/core/migration/1x-to-2x/identity-2x#windows-authentication-httpsys--iisintegration\" rel=\"noreferrer\">https://docs.microsoft.com/en-us/aspnet/core/migration/1x-to-2x/identity-2x#windows-authentication-httpsys--iisintegration</a></p></li>\n<li><p>I added a simple <code>Console.WriteLine(context.User.Identity.Name);</code> to see that it works inside app.Run and...\nIt all works!</p></li>\n</ol>\n\n<p>However... as soon as I set \"anonymousAuthentication\" to true in launchSettings.json it stops working and I cannot figure out what can I do to make the Windows authentication work alongside with it. <code>Context.User.Identity.IsAuthenticated</code> is always false.\nAs you can see my configuration is very simple and I need it to stay this way. I want to enable/disable windows authentication on certain dynamic routes, so using controllers with the [Authorize] attribute is not an option.</p>\n\n<p>What I'm trying to achieve is a simple app where the url \"/authenticated\" would reply with the value of <code>context.User.Identity.Name</code> and the url \"/public\" would reply with something like say \"This is a public page!\".\nSomething similar to <a href=\"https://stackoverflow.com/questions/42581132/ntlm-authentication-on-specific-route-in-asp-net-core\">NTLM authentication on specific route in ASP.NET Core</a> but without the [Authorize] attribute and controllers.\nThe resources are very scarce... Anyone have any idea what I could be missing?\nThanks!</p>\n"}, {"tags": ["c#", "uwp", "windows-store-apps"], "answers": [{"tags": [], "owner": {"reputation": 1831, "user_id": 435828, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3de722970f656f5e2638f601962737c3?s=128&d=identicon&r=PG&f=1", "display_name": "Grigory", "link": "https://stackoverflow.com/users/435828/grigory"}, "is_accepted": true, "score": 2, "last_activity_date": 1504735308, "creation_date": 1504735308, "answer_id": 46084961, "question_id": 46084691, "link": "https://stackoverflow.com/questions/46084691/some-magic-stowed-exception-in-store-dashboard/46084961#46084961", "title": "Some magic STOWED EXCEPTION in Store dashboard", "body": "<p>I'm so embarrassed. 10 minutes of writing question help more than 2 hours of thinking before that. </p>\n\n<p>It is a normal exception that means that i tried to create a delegate that points to a method of a null object.</p>\n\n<p>In my last line of code when arguments are computed and delegate is created from method group, before method invocation, this exception occurs.</p>\n\n<p>Hope this will save someone few minutes of time</p>\n"}], "owner": {"reputation": 1831, "user_id": 435828, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3de722970f656f5e2638f601962737c3?s=128&d=identicon&r=PG&f=1", "display_name": "Grigory", "link": "https://stackoverflow.com/users/435828/grigory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 46084961, "answer_count": 1, "score": 0, "last_activity_date": 1504735373, "creation_date": 1504733745, "last_edit_date": 1504735373, "question_id": 46084691, "link": "https://stackoverflow.com/questions/46084691/some-magic-stowed-exception-in-store-dashboard", "title": "Some magic STOWED EXCEPTION in Store dashboard", "body": "<p>I have a UWP app in Windows Store. </p>\n\n<p>Normally i see ~50 crashes in HockeyApp, and ~500 crashes in Windows Store health dashboard.</p>\n\n<pre><code>STOWED_EXCEPTION_System.ArgumentException_80070057\nFrame   Image   Function    Offset\n0   SharedLibrary   System::Delegate.InitializeClosedInstance   0x26\n1   SharedLibrary   System::Action.ConstructClosedInstanceDelegate  0x20\n2   XXX.dll XXX::Platform::Uwp::Xaml::XamlApp.OnInitialize 0x301\n</code></pre>\n\n<p>My code is very simple</p>\n\n<pre><code>public class XamlApp : Application \n{\n    private Page _page;\n    protected virtual void OnInitialize(ActivationKind activationKind, ApplicationExecutionState previouState)\n    {\n        if (_page == null) \n        {\n            _page = _pageCreator();\n            _page.Loaded += PageOnLoaded;\n            Current.Suspending += Current_Suspending;\n            Window.Current.CoreWindow.VisibilityChanged += CurrentOnVisibilityChanged;\n            Window.Current.Content = _page;\n        }\n        else\n        {\n            Game.Marshal(Game.Resume);\n        }\n    }\n    // ....\n}\n</code></pre>\n\n<p>According to the implementation <a href=\"https://github.com/dotnet/corert/blob/master/src/System.Private.CoreLib/src/System/Delegate.cs\" rel=\"nofollow noreferrer\">here</a> i understand that reference to object is null. The question is - how can it be ? Looks like a bug in GC or somewhere in runtime.</p>\n\n<p>Any ideas ?</p>\n"}, {"tags": ["c#", "asp.net-core", "visual-studio-2017"], "comments": [{"owner": {"reputation": 131158, "user_id": 266143, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/487f6927f37c3005e5b918d131892715?s=128&d=identicon&r=PG", "display_name": "CodeCaster", "link": "https://stackoverflow.com/users/266143/codecaster"}, "edited": false, "score": 0, "creation_date": 1504733799, "post_id": 46084680, "comment_id": 79131454, "body": "If you can repro this with a new 1.1 project, is&#39;s a VS bug you should report with MS."}, {"owner": {"reputation": 26461, "user_id": 2141621, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/525cb8cf58e22b35b9bfc99d52cde986?s=128&d=identicon&r=PG&f=1", "display_name": "Camilo Terevinto", "link": "https://stackoverflow.com/users/2141621/camilo-terevinto"}, "edited": false, "score": 0, "creation_date": 1504733831, "post_id": 46084680, "comment_id": 79131466, "body": "Try to delete the <code>C:\\MyProjFolder\\src\\MyProject\\bin</code> and <code>C:\\MyProjFolder\\src\\MyProject\\obj</code> folders. Will probably solve the issue"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 4654241, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6eAXCh2lGJ4/AAAAAAAAAAI/AAAAAAAAEzo/2XlcgTzGdTU/photo.jpg?sz=128", "display_name": "Russ Frizzell-Carlton", "link": "https://stackoverflow.com/users/4654241/russ-frizzell-carlton"}, "is_accepted": false, "score": 1, "last_activity_date": 1522337232, "creation_date": 1522337232, "answer_id": 49559848, "question_id": 46084680, "link": "https://stackoverflow.com/questions/46084680/clean-solution-menu-error-after-upgrading-visual-studion-2017-to-version-15-3/49559848#49559848", "title": "&quot;Clean Solution&quot; menu error after upgrading Visual Studion 2017 to version 15.3.3", "body": "<p>I know this sounds like it has nothing to do with doing a clean on your solution, but it seems Visual Studio is having issues with auto-generated files and Intellisense. </p>\n\n<p>It is a bit subtle, but Visual Studio (I use VS Professional 2017 v15.6.4) is actually switching you to the Intellisense output after you clean the solution. </p>\n\n<p>Notice that the \"Show output from:\" dropdown menu switches to \"IntelliSense\" after the clean: </p>\n\n<p><a href=\"https://i.stack.imgur.com/rzStC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rzStC.png\" alt=\"Screenshot of Output Window from Visual Studio\"></a></p>\n\n<p>It has been reported to Microsoft and you can keep track of this bug here:</p>\n\n<p><a href=\"https://github.com/dotnet/roslyn/issues/12202\" rel=\"nofollow noreferrer\">https://github.com/dotnet/roslyn/issues/12202</a></p>\n"}], "owner": {"reputation": 15178, "user_id": 1232087, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5dd18aac5106e03afdffc1da755b1695?s=128&d=identicon&r=PG", "display_name": "nam", "link": "https://stackoverflow.com/users/1232087/nam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522337232, "creation_date": 1504733694, "last_edit_date": 1504734237, "question_id": 46084680, "link": "https://stackoverflow.com/questions/46084680/clean-solution-menu-error-after-upgrading-visual-studion-2017-to-version-15-3", "title": "&quot;Clean Solution&quot; menu error after upgrading Visual Studion 2017 to version 15.3.3", "body": "<p>We're working on ASP.NET MVC Core 1.1.1 project (that we don't yet want to upgrade to ASP.NET Core 2.0). However we have upgraded VS2017 from ver 15.2 to ver 15.3.3. But after VS2017 upgrade, we have started getting following error whenever we click on menu Build-->Clean Solution of VS2017. However when we run Build-->Clean Solution again, command works fine without error. It's not a show stopper it's just an annoyance to click the menu twice to make it work:</p>\n\n<blockquote>\n  <p>[Failure] Could not find file 'C:\\MyProjFolder\\src\\MyProject\\obj\\Debug\\netcoreapp1.1\\MyProject.AssemblyInfo.cs'.</p>\n</blockquote>\n\n<p><strong>MyProj.csproj file</strong></p>\n\n<pre><code>&lt;Project Sdk=\"Microsoft.NET.Sdk.Web\"&gt;\n\n  &lt;PropertyGroup&gt;\n    &lt;TargetFramework&gt;netcoreapp1.1&lt;/TargetFramework&gt;\n    &lt;PreserveCompilationContext&gt;true&lt;/PreserveCompilationContext&gt;\n    &lt;AssemblyName&gt;MyProj&lt;/AssemblyName&gt;\n    &lt;OutputType&gt;Exe&lt;/OutputType&gt;\n    &lt;PackageId&gt;MyProj&lt;/PackageId&gt;\n    &lt;UserSecretsId&gt;aspnet-MyProj-6af8ade3-87ff-4468-a9ce-8bb69c696ab8&lt;/UserSecretsId&gt;\n    &lt;RuntimeFrameworkVersion&gt;1.1.1&lt;/RuntimeFrameworkVersion&gt;\n    &lt;PackageTargetFallback&gt;$(PackageTargetFallback);dotnet5.6;portable-net45+win8&lt;/PackageTargetFallback&gt;\n  &lt;/PropertyGroup&gt;\n\n  &lt;ItemGroup&gt;\n    &lt;None Remove=\"Properties\\PublishProfiles\\MyProjP.pubxml\" /&gt;\n    &lt;None Remove=\"Properties\\PublishProfiles\\FolderProfile.pubxml\" /&gt;\n    &lt;None Remove=\"Properties\\PublishProfiles\\FolderProfile1.pubxml\" /&gt;\n  &lt;/ItemGroup&gt;\n\n  &lt;ItemGroup&gt;\n    &lt;None Update=\"wwwroot\\**\\*;Views\\**\\*;Areas\\**\\Views\"&gt;\n      &lt;CopyToPublishDirectory&gt;PreserveNewest&lt;/CopyToPublishDirectory&gt;\n    &lt;/None&gt;\n  &lt;/ItemGroup&gt;\n\n  &lt;ItemGroup&gt;\n    &lt;PackageReference Include=\"bootstrap\" Version=\"2.3.2\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.EntityFrameworkCore.SqlServer\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.EntityFrameworkCore.Tools\" Version=\"1.0.0\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Server.Kestrel\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.EntityFrameworkCore.SqlServer.Design\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Authentication.Cookies\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Diagnostics\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Identity\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Identity.EntityFrameworkCore\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Server.IISIntegration\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Server.IISIntegration.Tools\" Version=\"1.1.0-preview4-final\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.StaticFiles\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.Extensions.Configuration.EnvironmentVariables\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.Extensions.Configuration.Json\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.Extensions.Configuration.UserSecrets\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.Extensions.Logging\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.Extensions.Logging.Console\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.Extensions.Logging.Debug\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.Extensions.Options.ConfigurationExtensions\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.VisualStudio.Web.CodeGeneration.Design\" Version=\"1.1.0\"&gt;\n      &lt;PrivateAssets&gt;All&lt;/PrivateAssets&gt;\n    &lt;/PackageReference&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Session\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.Extensions.Caching.Memory\" Version=\"1.1.1\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.VisualStudio.Web.BrowserLink\" Version=\"1.1.0\" /&gt;\n    &lt;PackageReference Include=\"BundlerMinifier.Core\" Version=\"2.3.327\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Mvc\" Version=\"1.1.2\" /&gt;\n    &lt;PackageReference Include=\"Microsoft.AspNetCore.Mvc.Core\" Version=\"1.1.2\" /&gt;\n    &lt;PackageReference Include=\"EPPlus.Core\" Version=\"1.4.0\" /&gt;\n  &lt;/ItemGroup&gt;\n\n &lt;ItemGroup&gt;\n    &lt;DotNetCliToolReference Include=\"Microsoft.VisualStudio.Web.CodeGeneration.Tools\" Version=\"1.0.0\" /&gt;\n  &lt;/ItemGroup&gt;\n\n&lt;/Project&gt;\n</code></pre>\n"}, {"tags": ["c#", ".net-core"], "comments": [{"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 5, "creation_date": 1504733711, "post_id": 46084661, "comment_id": 79131433, "body": "Why should it go to 9.8?  9.7 is <i>closer</i>. I think you are misremembering your primary school.  9.7 is 0.04999 away, and 9.8 is 0.05001 away, and the latter is <i>bigger</i>. Can you explain why you would like to <i>round off</i> to the number that has <i>a bigger rounding error</i>?"}, {"owner": {"reputation": 59217, "user_id": 156695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3390f053c9414f150c48f700afaa3e7a?s=128&d=identicon&r=PG", "display_name": "Tigran", "link": "https://stackoverflow.com/users/156695/tigran"}, "edited": false, "score": 0, "creation_date": 1504733744, "post_id": 46084661, "comment_id": 79131438, "body": "<code>9.75</code> goes to <code>9.7</code>"}, {"owner": {"reputation": 61863, "user_id": 133910, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f1b913d48f914347dcafabff8d01ded?s=128&d=identicon&r=PG", "display_name": "Yuriy Faktorovich", "link": "https://stackoverflow.com/users/133910/yuriy-faktorovich"}, "edited": false, "score": 6, "creation_date": 1504733754, "post_id": 46084661, "comment_id": 79131440, "body": "Is there a way one could retake primary school?"}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "reply_to_user": {"reputation": 59217, "user_id": 156695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3390f053c9414f150c48f700afaa3e7a?s=128&d=identicon&r=PG", "display_name": "Tigran", "link": "https://stackoverflow.com/users/156695/tigran"}, "edited": false, "score": 2, "creation_date": 1504735139, "post_id": 46084661, "comment_id": 79131966, "body": "@Tigran <code>Math.Round(9.75, 1)</code> will result in <code>9.8</code>"}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 1, "creation_date": 1504735390, "post_id": 46084661, "comment_id": 79132041, "body": "You may want to remove <i>&quot;proper mathematical rounding&quot;</i> from the title of this question..."}, {"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1504738103, "post_id": 46084661, "comment_id": 79132840, "body": "I&#39;m voting to close this question as off-topic because problem is a simple misunderstanding by OP of how rounding works."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 2, "creation_date": 1505465930, "post_id": 46084661, "comment_id": 79434552, "body": "Note that floats are not decimal values; they are fractions with a power of two, not ten, in the denominator. Expect that sometimes when you are doing the math, you&#39;re going to get 7.399999 when you expect 7.4; this could affect your algorithm. If you need exact representation of decimals, <b>use the decimal type</b>."}], "answers": [{"comments": [{"owner": {"reputation": 24396, "user_id": 18192, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c939f58c5869fead24efafcec0056914?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/18192/brian"}, "edited": false, "score": 0, "creation_date": 1505480864, "post_id": 46084706, "comment_id": 79444226, "body": "Assining &quot;In Math&quot; is referring to the static C# <code>Math</code> class, this is slightly inaccurate.  <code>Math.Round(9.65,1)</code> will round to 9.6.  This is because C# defaults to <a href=\"https://msdn.microsoft.com/en-us/library/system.midpointrounding.aspx\" rel=\"nofollow noreferrer\"><code>MidpointRounding.ToEven</code></a>, not <code>MidpointRounding.AwayFromZero</code>."}], "tags": [], "owner": {"reputation": 467, "user_id": 1158961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qVAuw.png?s=128&g=1", "display_name": "allen.mn", "link": "https://stackoverflow.com/users/1158961/allen-mn"}, "is_accepted": false, "score": 4, "last_activity_date": 1504734286, "last_edit_date": 1504734286, "creation_date": 1504733778, "answer_id": 46084706, "question_id": 46084661, "link": "https://stackoverflow.com/questions/46084661/how-to-round-a-float-to-one-digit-after-the-dot/46084706#46084706", "title": "How to round a float to one digit after the dot", "body": "<p>In Math, 9.74999 rounds to 9.7. The code is using math.</p>\n\n<p>Edit with less snark: 9.75 and greater will around to 9.8. Anything less than 9.75 (and greater than or equal to 9.65) will round to 9.7. I think you're confusing yourself and thinking that the 999 will round the .74 to a .75, but that's not the case.</p>\n"}], "owner": {"reputation": 1081, "user_id": 1688203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AWeAc.png?s=128&g=1", "display_name": "retif", "link": "https://stackoverflow.com/users/1688203/retif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1504740959, "creation_date": 1504733588, "last_edit_date": 1504740959, "question_id": 46084661, "link": "https://stackoverflow.com/questions/46084661/how-to-round-a-float-to-one-digit-after-the-dot", "title": "How to round a float to one digit after the dot", "body": "<p>Most probably, it's a duplicate, and I don't understand some basics, and thus deserve a downvote, but it just drives me crazy.</p>\n\n<p>I'm using <strong>C#</strong> and <strong>.NET Core</strong> on Mac OS.</p>\n\n<p>I have a float <code>9.74999</code> and I want to round it to one digit after the dot and get <code>9.8</code> (<em>like it should work according to what I remember from primary school: 9.749 -> 9.75 -> 9.8 -> 10</em>).</p>\n\n<p>I tried this:</p>\n\n<pre><code>float rounded = (float)Math.Round(9.74999f, 1, MidpointRounding.AwayFromZero);\n// rounded = 9.7\n</code></pre>\n\n<p>Why it's not <code>9.8</code>? So, it just takes the digit of interest (<code>7</code>) and the following one (<code>4</code>) and doesn't care about the rest (<code>999</code>)? </p>\n\n<p>And this construction actually gives me what I want:</p>\n\n<pre><code>float rounded = (float)Math.Round(\n    (float)Math.Round(9.74999f, 2, MidpointRounding.AwayFromZero),\n    1,\n    MidpointRounding.AwayFromZero\n);\n// rounded = 9.8\n</code></pre>\n\n<p>So, the only way I can get <code>9.8</code> out of <code>9.74999</code> is by performing two <code>Round</code> operations:</p>\n\n<ol>\n<li>First <code>Round</code> with <code>2</code> decimals;</li>\n<li>Second <code>Round</code> with the result of the first one and <code>1</code> decimal.</li>\n</ol>\n\n<p>Is this a proper way to do it?</p>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>I see now that at school we were given a concept of double (triple, etc) rounding (<a href=\"https://en.wikipedia.org/wiki/Rounding#Double_rounding\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Rounding#Double_rounding</a>), which accumulates error on each step, and that's not the rounding that is used by <code>Math.Round</code>, so that's why I am not getting what I expect to get (<code>9.749</code> -> <code>9.75</code> -> <code>9.8</code>).</p>\n\n<p>But I do need to perform exactly such a \"consequential\" rounding, going from right to left, digit by digit. So, I guess, there is no standard function for that, and I need to implement it myself.</p>\n"}, {"tags": ["c#", "winforms", "messagebox"], "comments": [{"owner": {"reputation": 496, "user_id": 7397710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad688ac042f651d16b538b36a62bc407?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sharp", "link": "https://stackoverflow.com/users/7397710/michael-sharp"}, "edited": false, "score": 2, "creation_date": 1504733378, "post_id": 46084553, "comment_id": 79131291, "body": "Essentially you will want to reset all your variables back to their initial state. How are you storing you data model?"}, {"owner": {"reputation": 2230, "user_id": 1497128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QaOX5.jpg?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1497128/tom"}, "edited": false, "score": 2, "creation_date": 1504733413, "post_id": 46084553, "comment_id": 79131311, "body": "Impossible for us to tell you how to implement this without known how your entire game is implemented. Do you have a game loop? Do you have game state objects? If your entire game &quot;data&quot; is stored within a game state object, then all you have to do is reset the state to default."}, {"owner": {"reputation": 639, "user_id": 8547656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vMrWS.jpg?s=128&g=1", "display_name": "Moher", "link": "https://stackoverflow.com/users/8547656/moher"}, "edited": false, "score": 2, "creation_date": 1504733414, "post_id": 46084553, "comment_id": 79131312, "body": "this really smells like homework to me!!"}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 2, "creation_date": 1504733955, "post_id": 46084553, "comment_id": 79131521, "body": "Create a &quot;ResetGame&quot; method that sets up the game (resets the score, ball position, etc). Create a &quot;Start Game&quot; button that the user can push to start the game (which will call the &quot;ResetGame&quot; method and start the timer, and presumably start the ball movement). Also add code to the click event that disables the button. In the &quot;Game Over&quot; method, re-enable the &quot;Start Game&quot; button so the user can play again."}, {"owner": {"reputation": 21, "user_id": 8534852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5e52d9d50aa8fffe603925370f24e2?s=128&d=identicon&r=PG&f=1", "display_name": "Razgr1z", "link": "https://stackoverflow.com/users/8534852/razgr1z"}, "edited": false, "score": 0, "creation_date": 1504734465, "post_id": 46084553, "comment_id": 79131726, "body": "Thanks to those who made suggestions.I have made the edit to my post that includes the entirety of my code. As for Moher I don&#39;t understand what the point of unnecessary comments/assumptions are for as it does not add anything useful. No it&#39;s not homework."}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1504735277, "post_id": 46084553, "comment_id": 79132009, "body": "@Razgr1z often, providing the entire code is not helpful. In addition you haven&#39;t provided the more important code, the <code>SoundPlayer</code> class. But from what I can see, you call the <code>SoundPlayer.Play()</code> which presumably start the timer. And at the end of the game you stop the timer. So of course it wouldn&#39;t restart. So you need to give the user an option to ask if they want to restart, and if so, call <code>SoundPlayer.Paly()</code> again? And you&#39;ll probably need to reset variables in it to their initial states."}, {"owner": {"reputation": 21, "user_id": 8534852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5e52d9d50aa8fffe603925370f24e2?s=128&d=identicon&r=PG&f=1", "display_name": "Razgr1z", "link": "https://stackoverflow.com/users/8534852/razgr1z"}, "reply_to_user": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1504735520, "post_id": 46084553, "comment_id": 79132090, "body": "@Sach The sound media was when I wanted to learn how to implement audio when the main form (the game) loaded. I found a few suggestions from others who asked this and the main consensus was to add the using system media and then to put the audio line of code when the form loaded. This is under   private void FrmGame_Load(object sender, EventArgs e). On the other hand, the code that includes the messagebox is under the timer of     private void TmrMainTimer_Tick(object sender, EventArgs e)"}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1504735793, "post_id": 46084553, "comment_id": 79132166, "body": "Sorry I didn&#39;t understand what you meant. But anyway, assuming your Timer code works, we don&#39;t really need to see it. Please remove that, and add the parts where you start the timer (is it when a control event is triggered, or is it from within your <code>SoundPlayer.Paly()</code>? And still the basic idea of what I said stands; after game is finished, you need to command it to restart if the user so wishes. How to do it depends on how you start your game in the first place."}, {"owner": {"reputation": 496, "user_id": 7397710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad688ac042f651d16b538b36a62bc407?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Sharp", "link": "https://stackoverflow.com/users/7397710/michael-sharp"}, "edited": false, "score": 0, "creation_date": 1504737706, "post_id": 46084553, "comment_id": 79132726, "body": "What is in your <code>SplashScreen</code> class? Nothing in the code you have posted sets up the blocks or the ball(at least not from what I saw)."}], "answers": [{"tags": [], "owner": {"reputation": 593, "user_id": 6028633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caeb2d5ad7d8f81029a18ade6b8fffef?s=128&d=identicon&r=PG&f=1", "display_name": "KBO", "link": "https://stackoverflow.com/users/6028633/kbo"}, "is_accepted": false, "score": -1, "last_activity_date": 1504764581, "last_edit_date": 1504764581, "creation_date": 1504762255, "answer_id": 46088495, "question_id": 46084553, "link": "https://stackoverflow.com/questions/46084553/how-do-i-implement-a-restart-function-after-game-over-in-my-game/46088495#46088495", "title": "How do I implement a restart function after game over in my game?", "body": "<p>If you want to restart that WinForms application, use <code>Application.Restart()</code>. You may close your game form and call restart in your static <code>Main()</code> method afterwards.</p>\n\n<pre><code>private void TmrMainTimer_Tick(object sender, EventArgs e)\n{\n  ...\n\n  if (pBall.Top + pBall.Height &gt; ClientSize.Height)\n  {\n    gameOver();\n    MessageBox.Show(\"SORRY YOU LOSE!\");\n\n    // close the game form\n    this.Close();\n  } \n}\n</code></pre>\n\n<p>And in your startup code:</p>\n\n<pre><code>  static class Program\n  {\n    /// &lt;summary&gt;\n    /// The main entry point for the application.\n    /// &lt;/summary&gt;\n    [STAThread]\n    static void Main()\n    {\n      Application.EnableVisualStyles();\n      Application.SetCompatibleTextRenderingDefault(false);\n      Application.Run(new FrmGame());\n\n      // restart application\n      Application.Restart();\n    }\n  }\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>The example above ist the easiest way to play that game from start. Of course, there are many other options:</p>\n\n<ol>\n<li><p>As an extension, you can start your game form from a (maybe hidden) program startup form. If you register an event handler on the <code>FrmGame.FormClosed</code> event, you can restart that form again after the previous game was lost.</p></li>\n<li><p>As many other guys suggested, a <code>StartAgain()</code> method, that resets your logic, is also an option.</p></li>\n<li><p>Separate drawing logic (View) from game logic (Controller). For a such a simple game it is not necessary and overkill. But it is always a good idea to keep the things simple and clear. See the MVC pattern for your next project...</p></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 8534852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5e52d9d50aa8fffe603925370f24e2?s=128&d=identicon&r=PG&f=1", "display_name": "Razgr1z", "link": "https://stackoverflow.com/users/8534852/razgr1z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2829, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504764581, "creation_date": 1504733102, "last_edit_date": 1504734799, "question_id": 46084553, "link": "https://stackoverflow.com/questions/46084553/how-do-i-implement-a-restart-function-after-game-over-in-my-game", "title": "How do I implement a restart function after game over in my game?", "body": "<p>I'm a beginner using Visual Studio to make a C# Windows Form. So I have a brick game (like the classic block game with ball and bricks) where if the player doesn't bounce the ball back, it's basically game over. However when this happens, the timer is just stopped and there's no way to restart. The code I have now just says to create a message box with \"You lose\" and you have to exit the program to play again. If you reach score 30 then that's a win and to play again you have to exit also.</p>\n\n<p>I've tried googling this and the suggestions I see is if it's all set up already in their cases so implementing it to mine without having to re-do it all in someway is hard. I would like to make a simple implementation (or edit) where there is a play again function. How can I modify existing code to do this? Thank you dearly for any help.</p>\n\n<p>This is the section of code that accounts for game-over if statement.\nEDIT= Entire code provided.</p>\n\n<pre><code>        using System;\n        using System.Collections.Generic;\n        using System.ComponentModel;\n        using System.Data;\n        using System.Drawing;\n        using System.Linq;\n        using System.Text;\n        using System.Threading.Tasks;\n        using System.Windows.Forms;\n        using System.Media;\n        using System.Reflection;\n        using System.IO;\n\n       namespace FinalProjectGame\n{\n\npublic partial class FrmGame : Form\n{\n\n    bool goLeft;\n    bool goRight;\n    int speed = 10;\n\n    int pBallx = 5;\n    int pBally = 5;\n\n    int score = 0;\n\n    public FrmGame()\n    {\n        InitializeComponent();\n\n    }\n\n    private void keyisdown(object sender, KeyEventArgs e)\n    {\n        if (e.KeyCode == Keys.Left &amp;&amp; btnGamer.Left &gt; 0)\n        {\n            goLeft = true;\n        }\n\n        if (e.KeyCode == Keys.Right &amp;&amp; btnGamer.Left + btnGamer.Width &lt; 920)\n        {\n            goRight = true;\n        }\n    }\n\n    private void keyisup(object sender, KeyEventArgs e)\n    {\n        if (e.KeyCode == Keys.Left)\n        {\n            goLeft = false;\n        }\n\n        if (e.KeyCode == Keys.Right)\n        {\n            goRight = false;\n        }\n    }\n\n    private void TmrMainTimer_Tick(object sender, EventArgs e)\n    {\n        pBall.Left += pBallx;\n        pBall.Top += pBally;\n\n        lblScore.Text = \"Score: \" + score; //keeping score \n\n        if (goLeft) { btnGamer.Left -= speed; } //izquierda \n        if (goRight) { btnGamer.Left += speed; } //derecha\n\n        if (btnGamer.Left &lt; 1)\n        {\n            goLeft = false; //disables \"no-clip\"\n        }\n        else if (btnGamer.Left + btnGamer.Width &gt; 920)\n        {\n            goRight = false;\n        }\n        if (pBall.Left + pBall.Width &gt; ClientSize.Width || pBall.Left &lt; 0)\n        {\n            pBallx = -pBallx; //left, right wall bounce\n\n        }\n\n        if (pBall.Top &lt; 0 || pBall.Bounds.IntersectsWith(btnGamer.Bounds))\n        {\n            pBally = -pBally; //top, bottom wall bounce\n\n        }\n\n        foreach (Control x in this.Controls)\n            //main code brickies subtraction\n        {\n            if (x is PictureBox &amp;&amp; x.Tag == \"blockies\")\n            {\n                if (pBall.Bounds.IntersectsWith(x.Bounds))\n                {\n                    this.Controls.Remove(x);\n                    pBally = -pBally;\n                    score++;\n\n                } //end of main\n\n                    //ALT method foreach (Control x in this.Controls)\n                    //{\n                        if (!(x is PictureBox))\n                            continue;\n\n                        //this is needed if some specific property of the PictureBox is needed.\n                        PictureBox ctl = (PictureBox)x;\n\n                        if (ctl.Tag.ToString() != \"blockies\")\n                            continue;\n\n                        if (!pBall.Bounds.IntersectsWith(ctl.Bounds))\n                            continue;\n\n\n\n                        //this.Controls.Remove(x);\n\n                        x.Visible = false;\n\n                        pBally = -pBally;\n                        score++;\n                    //}\n\n            }\n\n        }//----\n        //This accounts for user score. Upon completing the game, the user wins. If the user does not capture the ball, it is automatically a game over.\n        if (score == 30)\n        {\n            gameOver();\n            MessageBox.Show(\"YES! WINNER!\");\n        }\n        if (pBall.Top + pBall.Height &gt; ClientSize.Height)\n        {\n            gameOver();\n            MessageBox.Show(\"SORRY YOU LOSE!\");\n\n\n        }\n\n        //======\n    }\n    private void gameOver()\n    {\n        TmrMainTimer.Stop();\n    }\n\n    private void FrmGame_Load(object sender, EventArgs e) //main form load\n    {\n        //load the splash screen form that was made with design view\n        SplashScreen splash = new SplashScreen();\n        splash.Show();\n\n        //using system media to play the audio which is played upon start of the main form\n        SoundPlayer Sndplayr = new SoundPlayer(Properties.Resources.RoleMusic);\n        Sndplayr.Play();\n    }\n\n}  \n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c#", "asp.net", "session-variables", "system.reflection"], "comments": [{"owner": {"reputation": 1091, "user_id": 1086134, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd9e9d29fb9c6eb4c051bb92d9e2bf96?s=128&d=identicon&r=PG", "display_name": "Martin_W", "link": "https://stackoverflow.com/users/1086134/martin-w"}, "edited": false, "score": 0, "creation_date": 1581993645, "post_id": 46084468, "comment_id": 106614002, "body": "I think the following will provide an up-to-date solution: <a href=\"https://stackoverflow.com/a/60273007/1086134\">stackoverflow.com/a/60273007/1086134</a>"}], "owner": {"reputation": 513, "user_id": 705947, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/qGlqF.png?s=128&g=1", "display_name": "c-sharp", "link": "https://stackoverflow.com/users/705947/c-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1504732657, "creation_date": 1504732657, "question_id": 46084468, "link": "https://stackoverflow.com/questions/46084468/reading-all-inproc-sessions-in-asp-net", "title": "Reading all InProc sessions in asp.net?", "body": "<p>This blog post <a href=\"https://weblogs.asp.net/imranbaloch/reading-all-users-session\" rel=\"nofollow noreferrer\">https://weblogs.asp.net/imranbaloch/reading-all-users-session</a> shows how to read all the sessions in an application in asp.net by using Reflection. I'm trying to implement this in my application but getting an error when trying to get _caches field from CacheInternal object. This CacheInternal is giving a CacheMultiple object as you can see in the screen shot;<br>\n<img src=\"https://i.stack.imgur.com/1i1jF.png\" alt=\"enter image description here\">\nSomeone pointed this problem in the comments of the blog post as;<br>\n<img src=\"https://i.stack.imgur.com/Bhkw2.png\" alt=\"Blog Post Comment\">\nBut I am not getting collection of CacheSingle objects from the CacheInternal. I'm using Visual Studio 2010 as Administrator and the application is running in FullTrust under securityPolicy. Here is the code taken from the referenced blog;</p>\n\n<pre><code> private string GetAllInProcSessions(){\n    StringBuilder liveSessions = new StringBuilder();\n    object obj = typeof(HttpRuntime).GetProperty(\"CacheInternal\", \n    BindingFlags.NonPublic | BindingFlags.Static).GetValue(null, null);\n    object[] obj2 = (object[])obj.GetType().GetField(\"_caches\", \n    BindingFlags.NonPublic | BindingFlags.Instance).GetValue(obj);\n    for(int i = 0; i &lt; obj2.Length; i++)\n    {\n       Hashtable c2 = (Hashtable)obj2[i].GetType().GetField(\"_entries\", \n       BindingFlags.NonPublic | BindingFlags.Instance).GetValue(obj2[i]);                \n       foreach (DictionaryEntry entry in c2)\n       {\n           object o1 = entry.Value.GetType().GetProperty(\"Value\", \n          BindingFlags.NonPublic | indingFlags.Instance).GetValue(entry.Value, \n          null);\n          if (o1.GetType().ToString() ==      \n              \"System.Web.SessionState.InProcSessionState\")\n              {\n                  SessionStateItemCollection session = \n                  (SessionStateItemCollection) o1.GetType() \n                   .GetField(\"_sessionItems\",\n                    BindingFlags.NonPublic | BindingFlags.Instance)\n                    .GetValue(o1);\n                    if (session != null)\n                    {\n                        var lastActivity = session[\"LastActivity\"] != null ? \n                        (DateTime) session[\"LastActivity\"] : DateTime.Now;\n                         //liveSessions.Append(...)\n                     }\n              }\n       }\n    }\n    return liveSessions.ToString();\n}\n</code></pre>\n"}, {"tags": ["c#", "wpf"], "answers": [{"comments": [{"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1504732988, "post_id": 46084512, "comment_id": 79131098, "body": "Ah, thank you. There was a file in the directory with a space in the name, which could not be used as a Header for the menuItem."}], "tags": [], "owner": {"reputation": 126, "user_id": 5499015, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153555923201005/picture?type=large", "display_name": "RJ Thompson", "link": "https://stackoverflow.com/users/5499015/rj-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1504732848, "creation_date": 1504732848, "answer_id": 46084512, "question_id": 46084459, "link": "https://stackoverflow.com/questions/46084459/wpf-dynamic-menuitem-creation-error/46084512#46084512", "title": "WPF dynamic menuItem creation error", "body": "<p>It probably just means that it threw an exception and then you didn't call Initialize() in the ctor.  Maybe because it returned null on GetFiles()?</p>\n\n<p>Try turning on Exceptions for CLI under Windows->Exceptions and tick that box.  Then it should break on the exceptions.</p>\n"}, {"tags": [], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "is_accepted": false, "score": 0, "last_activity_date": 1504733021, "creation_date": 1504733021, "answer_id": 46084539, "question_id": 46084459, "link": "https://stackoverflow.com/questions/46084459/wpf-dynamic-menuitem-creation-error/46084539#46084539", "title": "WPF dynamic menuItem creation error", "body": "<p>Solved. the exception was caused by a file in the directory with a space in the name, which could not be used as a Header for the menuItem.</p>\n"}], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1504733021, "creation_date": 1504732616, "question_id": 46084459, "link": "https://stackoverflow.com/questions/46084459/wpf-dynamic-menuitem-creation-error", "title": "WPF dynamic menuItem creation error", "body": "<p>I have a file menu, where on load, some <code>menuItems</code> are populated from filenames in a directory.</p>\n\n<pre><code>&lt;MenuItem \n    x:Name=\"LayoutLoad\" \n    Header=\"Load saved layout\" \n    HorizontalAlignment=\"Left\" \n    Width=\"200\"\n    /&gt;\n</code></pre>\n\n<p>//on load (code behind)</p>\n\n<pre><code>string[] filePaths = Directory.GetFiles(\"Settings/layouts\");\nfor (int i = 0; i &lt; filePaths.Count(); i++)\n{\n    MenuItem item = new MenuItem {\n        Header = System.IO.Path.GetFileName(filePaths[i]),\n        Name = System.IO.Path.GetFileName(filePaths[i])\n    };\n    item.Click += new RoutedEventHandler(Chooselayout);\n    LayoutLoad.Items.Add(item);\n}\n</code></pre>\n\n<p>This was working great, until a moment ago, and now it will not compile, crashing on:</p>\n\n<pre><code>MenuItem item = new MenuItem {\n            Header = System.IO.Path.GetFileName(filePaths[i]),\n            Name = System.IO.Path.GetFileName(filePaths[i])\n        };\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>Exception thrown: 'System.Windows.Markup.XamlParseException' in PresentationFramework.dll\n\nAdditional information: The invocation of the constructor on type 'Form_beta.MainWindow' that matches the specified binding constraints threw an exception.\n</code></pre>\n\n<p>If I comment out that code and replace it with:</p>\n\n<p><code>string test = System.IO.Path.GetFileName(filePaths[i]);</code></p>\n\n<p>It works fine, and returns the filepath I would expect.</p>\n\n<p>What has gone wrong here? Thank you.</p>\n"}, {"tags": ["c#", "entity-framework"], "comments": [{"owner": {"reputation": 13140, "user_id": 2030565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWvli.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/2030565/jasen"}, "edited": false, "score": 0, "creation_date": 1504732800, "post_id": 46084457, "comment_id": 79131018, "body": "The <a href=\"https://martinfowler.com/eaaCatalog/dataTransferObject.html\" rel=\"nofollow noreferrer\">DTO</a> classes are not saved to the database. The properties are mapped to the entities."}, {"owner": {"reputation": 12917, "user_id": 937440, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ba5f9ad02a9ab43d4664d17747a1230?s=128&d=identicon&r=PG", "display_name": "w0051977", "link": "https://stackoverflow.com/users/937440/w0051977"}, "reply_to_user": {"reputation": 13140, "user_id": 2030565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWvli.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/2030565/jasen"}, "edited": false, "score": 0, "creation_date": 1504733057, "post_id": 46084457, "comment_id": 79131141, "body": "@Jason, are you saying that the Search method uses a tool like automapper to map Customer to CustomerDto?"}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 1, "creation_date": 1504733182, "post_id": 46084457, "comment_id": 79131202, "body": "DTOs are usually classes that aren&#39;t mapped to the entity directly - they provide a way to transfer objects without requiring that the receiver have any reference to EF or the backend data store. So, EF doesn&#39;t need to cater to the code above..."}, {"owner": {"reputation": 13140, "user_id": 2030565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWvli.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/2030565/jasen"}, "edited": false, "score": 0, "creation_date": 1504733471, "post_id": 46084457, "comment_id": 79131338, "body": "Yes, AutoMapper can be a helpful tool in this case. But you can do manual projections as well."}, {"owner": {"reputation": 12917, "user_id": 937440, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ba5f9ad02a9ab43d4664d17747a1230?s=128&d=identicon&r=PG", "display_name": "w0051977", "link": "https://stackoverflow.com/users/937440/w0051977"}, "edited": false, "score": 0, "creation_date": 1504733652, "post_id": 46084457, "comment_id": 79131412, "body": "@Jason, so EF still returns a Customer but this is mapped to a CustomerDTO either through a projection or automapper.  Is that correct?"}, {"owner": {"reputation": 13140, "user_id": 2030565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWvli.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/2030565/jasen"}, "edited": false, "score": 0, "creation_date": 1504733855, "post_id": 46084457, "comment_id": 79131479, "body": "The repository exposes DTO classes to its clients. The implementation details uses entities. This isolates EF within the data layer. The DTO properties might not even be a 1:1 mapping to an entity -- there could be many entity classes involved yet a relatively flat DTO."}, {"owner": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "edited": false, "score": 1, "creation_date": 1504733893, "post_id": 46084457, "comment_id": 79131493, "body": "Vladimir Khorikov (the author of the article) has a few repositories on Github. One of them contains this file: <a href=\"https://github.com/vkhorikov/DddInAction/blob/master/DddInPractice.Logic/SnackMachines/SnackMachineRepository.cs\" rel=\"nofollow noreferrer\">github.com/vkhorikov/DddInAction/blob/master/&hellip;</a>. Although it&#39;s written against NHibernate, you can see how he does the mapping as an example."}], "answers": [{"tags": [], "owner": {"reputation": 13140, "user_id": 2030565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWvli.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/2030565/jasen"}, "is_accepted": true, "score": 1, "last_activity_date": 1504735236, "creation_date": 1504735236, "answer_id": 46084953, "question_id": 46084457, "link": "https://stackoverflow.com/questions/46084457/mapping-multiple-classes-to-a-single-entity/46084953#46084953", "title": "Mapping multiple classes to a single entity", "body": "<p>The <a href=\"https://martinfowler.com/eaaCatalog/dataTransferObject.html\" rel=\"nofollow noreferrer\">DTO</a> classes are not saved to the database. The properties are mapped to the entities.</p>\n\n<pre><code>var query = db.Customer.First(c =&gt; c.id == id);\nvar customerDto = Map&lt;CustomerDto&gt;(query);\n</code></pre>\n\n<p>The repository exposes DTO classes to its clients. The implementation details uses entities. This isolates EF within the data layer.</p>\n\n<p>The DTO properties might not even be a 1:1 mapping to an entity -- there could be many entity classes involved yet a relatively flat DTO.</p>\n\n<pre><code>public class CustomerInfoDto\n{\n    public int CustomerId { get; set; }\n    // ... some customer properties\n    public int CustomerExtendedId { get; set; }\n    // ... some additional properties\n}\n\nvar info =  from c in db.Customers\n            join e in db.CustomerExtended on c.Id equals e.CustomerId\n            select new CustomerInfoDto\n            {\n                CustomerId = c.Id,\n                Name = c.Name,\n                CustomerExtendedId = e.Id,\n                LastAccess = e.LastAccess\n            };\n</code></pre>\n"}], "owner": {"reputation": 12917, "user_id": 937440, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ba5f9ad02a9ab43d4664d17747a1230?s=128&d=identicon&r=PG", "display_name": "w0051977", "link": "https://stackoverflow.com/users/937440/w0051977"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 46084953, "answer_count": 1, "score": 2, "last_activity_date": 1504735236, "creation_date": 1504732607, "question_id": 46084457, "link": "https://stackoverflow.com/questions/46084457/mapping-multiple-classes-to-a-single-entity", "title": "Mapping multiple classes to a single entity", "body": "<p>I recently read this article again: <a href=\"http://enterprisecraftsmanship.com/2015/04/20/types-of-cqrs/\" rel=\"nofollow noreferrer\">http://enterprisecraftsmanship.com/2015/04/20/types-of-cqrs/</a>\nPlease see the code below from type 1:</p>\n\n<pre><code>public class CustomerRepository\n{\n\u00a0\u00a0\u00a0 public void Save(Customer customer) { /* \u2026 */ }\n\u00a0\u00a0\u00a0 public Customer GetById(int id) { /* \u2026 */ }\n\u00a0\u00a0\u00a0 public IReadOnlyList&lt;CustomerDto&gt; Search(string name) { /* \u2026 */ }\n}\n</code></pre>\n\n<p>Notice that there are two separate objects for Customers i.e. Customer and CustomerDto. I believe entity framework only allows you to map one entity to one class. How does it cater for the code above?</p>\n"}, {"tags": ["c#", "wpf", "tfs", "msbuild", "clickonce"], "comments": [{"owner": {"reputation": 2633, "user_id": 5359302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4edae8a9b44323b8b6908d4b0d410730?s=128&d=identicon&r=PG&f=1", "display_name": "George Alexandria", "link": "https://stackoverflow.com/users/5359302/george-alexandria"}, "edited": false, "score": 1, "creation_date": 1504736867, "post_id": 46084428, "comment_id": 79132488, "body": "Have you tried just build your source (for all of projects) by tfs and then sign this build with your own certificate, clickone manifest using the <code>mage.exe</code>? Of course, it&#39;s only alternative way to get that you want."}, {"owner": {"reputation": 100, "user_id": 4790304, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eec073ea8c6eaba9cb8c47061b1a1b2f?s=128&d=identicon&r=PG&f=1", "display_name": "Suhas Anjaria", "link": "https://stackoverflow.com/users/4790304/suhas-anjaria"}, "reply_to_user": {"reputation": 2633, "user_id": 5359302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4edae8a9b44323b8b6908d4b0d410730?s=128&d=identicon&r=PG&f=1", "display_name": "George Alexandria", "link": "https://stackoverflow.com/users/5359302/george-alexandria"}, "edited": false, "score": 0, "creation_date": 1504787668, "post_id": 46084428, "comment_id": 79154621, "body": "If I were to do that, I could just keep my current system, which builds the sources in tfs and I use the PS script to deploy. My objective is to completely automate delivery, so it can  be run without any developer intervention, either using a gated check-in or time based triggers. Unless I am missing something."}, {"owner": {"reputation": 2633, "user_id": 5359302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4edae8a9b44323b8b6908d4b0d410730?s=128&d=identicon&r=PG&f=1", "display_name": "George Alexandria", "link": "https://stackoverflow.com/users/5359302/george-alexandria"}, "edited": false, "score": 0, "creation_date": 1504807976, "post_id": 46084428, "comment_id": 79168158, "body": "You also can write PSScripts to sign manifest and certificate using <code>mage.exe</code> for my example above. So this solution is completely automate delivery."}, {"owner": {"reputation": 100, "user_id": 4790304, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eec073ea8c6eaba9cb8c47061b1a1b2f?s=128&d=identicon&r=PG&f=1", "display_name": "Suhas Anjaria", "link": "https://stackoverflow.com/users/4790304/suhas-anjaria"}, "reply_to_user": {"reputation": 2633, "user_id": 5359302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4edae8a9b44323b8b6908d4b0d410730?s=128&d=identicon&r=PG&f=1", "display_name": "George Alexandria", "link": "https://stackoverflow.com/users/5359302/george-alexandria"}, "edited": false, "score": 0, "creation_date": 1505136176, "post_id": 46084428, "comment_id": 79275385, "body": "I see. I have limited experience with mage, so forgive my perceived ignorance of your solution. Thanks for your input, I managed to solve the issue without a lot of code change!"}], "answers": [{"comments": [{"owner": {"reputation": 100, "user_id": 4790304, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eec073ea8c6eaba9cb8c47061b1a1b2f?s=128&d=identicon&r=PG&f=1", "display_name": "Suhas Anjaria", "link": "https://stackoverflow.com/users/4790304/suhas-anjaria"}, "reply_to_user": {"reputation": 44433, "user_id": 5391065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b615692abd82961458da80dd640f3300?s=128&d=identicon&r=PG&f=1", "display_name": "PatrickLu-MSFT", "link": "https://stackoverflow.com/users/5391065/patricklu-msft"}, "edited": false, "score": 0, "creation_date": 1505135877, "post_id": 46102247, "comment_id": 79275154, "body": "Thanks, I did it immediately, but SO didn&#39;t allow me to do so for 24 hrs."}], "tags": [], "owner": {"reputation": 100, "user_id": 4790304, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eec073ea8c6eaba9cb8c47061b1a1b2f?s=128&d=identicon&r=PG&f=1", "display_name": "Suhas Anjaria", "link": "https://stackoverflow.com/users/4790304/suhas-anjaria"}, "is_accepted": true, "score": 0, "last_activity_date": 1504805926, "creation_date": 1504805926, "answer_id": 46102247, "question_id": 46084428, "link": "https://stackoverflow.com/questions/46084428/signing-issues-with-clickonce-deployment-as-a-team-foundation-server-post-proces/46102247#46102247", "title": "Signing issues with ClickOnce deployment as a Team Foundation Server Post Process", "body": "<p>This is what i ended up doing to make it work.</p>\n\n<ol>\n<li><p>Added my pfx as Linked File to all my UI projects</p></li>\n<li><p>Made all projects use the certificate from file from this <a href=\"https://stackoverflow.com/questions/27508421/the-signfile-task-was-not-given-a-value-for-the-required-parameter-certificat\">menu</a> </p></li>\n<li><p>Checked it into source control</p></li>\n<li><p>Made a new build definition who's only job is to run my powershell\nsnippet</p></li>\n<li><p>Ran the build  under my account on TFS</p></li>\n</ol>\n"}], "owner": {"reputation": 100, "user_id": 4790304, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/eec073ea8c6eaba9cb8c47061b1a1b2f?s=128&d=identicon&r=PG&f=1", "display_name": "Suhas Anjaria", "link": "https://stackoverflow.com/users/4790304/suhas-anjaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 46102247, "answer_count": 1, "score": 1, "last_activity_date": 1504805926, "creation_date": 1504732443, "question_id": 46084428, "link": "https://stackoverflow.com/questions/46084428/signing-issues-with-clickonce-deployment-as-a-team-foundation-server-post-proces", "title": "Signing issues with ClickOnce deployment as a Team Foundation Server Post Process", "body": "<p>I am trying to deploy a bunch of WPF applications in CI using TFS. Until now, the deployment step was manually activated, i.e I called a Powershell script from my dev. box to run through each project and deploy. If it helps, here is the code snippet.</p>\n\n<pre><code>$projs = Get-ChildItem -Path $pwd -Recurse -Include '*.csproj\nforeach ($proj in $projs)\n{\n\n    $xml = [xml](Get-Content $proj)\n    $assemblyName=\"\"\n    $publishUrl = \"\"\n    $productName =\"\"\n\n    $nodes = $xml.GetElementsByTagName('AssemblyName')\n   #Write \"Trying to get AssemblyName\"\n   foreach ($node in $nodes) {\n       $oldName = $node.'#text'\n       if($oldName.Contains(\"Beta\")){continue}\n       $newName =$oldName+'_Beta'\n        #skip any PublishUrl that is still the default 'publish\\'\n    #   Write $newName\n       $node.'#text' = $newName\n       $assemblyName = $newName\n       }\n   #Write \"Trying to get ProductName\"\n   $nodesProduct = $xml.GetElementsByTagName('ProductName')\n   foreach ($node in $nodesProduct) {\n       if($node.'#text'.Contains(\".NET\"))\n           {\n           continue\n           }\n       $oldName = $node.'#text'\n      if($oldName.Contains(\"Beta\")){continue}\n       $newName =$oldName+'_Beta'\n    #   Write $newName\n       $node.'#text' = $newName\n       $productName = $newName\n       }\n   #Write \"Trying to get PublishURL\"\n   $nodesPublish = $xml.GetElementsByTagName('PublishUrl')\n   foreach ($node in $nodesPublish) {\n       $oldName = $node.'#text'\n       #skip any PublishUrl that is still the default 'publish\\'\n       if ($node.'#text' -eq 'publish\\')  { break }\n       if($oldName.Contains(\"Beta\")){continue}\n       $newName =$oldName+'Beta\\'\n    #   Write $newName\n       $node.'#text' = $newName\n       $publishUrl = $newName\n       }\n   #if all three params are not null save and deploy project\n   if($assemblyName -ne\"\" -And $publishUrl -ne \"\" -And $productName -ne \"\" )\n    {\n        $xml.Save($proj)\n        Write \"trying to deploy $productName to $publishUrl\"\n        msbuild /m /t:publish /p:Configuration='Debug' /p:Platform=AnyCPU /p:ApplicationVersion=$appVersion /p:ApplicationRevision=$Revision /p:MinimumRequiredVersion=$newVersion /p:PublishUrl=\"$publishUrl\" /verbosity:m $proj\n            $pubDir = Join-Path $proj.Directory -ChildPath \"bin\\Debug\\app.publish\" -Resolve -ErrorAction Stop\n            #copy the files to the publish URL\n            Write \"$pubDir\"\n            Copy-Item -Path \"${pubDir}\\*\" -Destination \"$publishUrl\" -Include '*.*' -Recurse -Force\n            Copy-Item -Path \"${pubDir}\\Application Files\" -Destination \"$publishUrl\" -Recurse -Force\n        tf vc undo /noprompt $proj \n        Write \"Tf undone\"\n    }` \n</code></pre>\n\n<p>Please ignore all the Beta stuff as I change my Assembly-info.cs to have a development and production environment deployment separate. I've generated my own certificate and linked it to my .csproj files. This works and has been tested and is our current strategy.\nI want to integrate this script as a Post Process Action in Team Foundation Server so we can get CD. </p>\n\n<p>On the server, I have:</p>\n\n<ol>\n<li>VSTS running as my admin account</li>\n<li>My pfx certs installed on the server</li>\n</ol>\n\n<p>This same script generates the following error:</p>\n\n<pre><code>\\(x86)\\MSBuild\\14.0\\bin\\Microsoft.Common.CurrentVersion.targets(2884,5): warning MSB3327: Unable to find code signing certificate in the current user's Windows certificate store. To correct this, either disable signing of the ClickOnce manifest or install the certificate into the certificate store.\n\n\\(x86)\\MSBuild\\14.0\\bin\\Microsoft.Common.CurrentVersion.targets(4961,5):  MSB4044: The \"SignFile\" task was not given a value for the required parameter \"CertificateThumbprint\". \n</code></pre>\n\n<p>I have noticed that the .csproj that the TFS service copied onto the agent does not have the linkage to the imported certificates (which are also in source control)</p>\n\n<p>So far, I have tried installing the certificates on the server itself and have also tried running as NTService. More information on this error can be found in these threads\n<a href=\"https://stackoverflow.com/questions/11957295/unable-to-find-manifest-signing-certificate-in-the-certificate-store-even-wh\">1</a> , <a href=\"https://serverfault.com/questions/261195/how-do-you-install-a-certificate-in-a-pfx-file-in-to-the-personal-container-of-t\">2</a> , <a href=\"https://technet.microsoft.com/en-us/library/cc962112.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">3</a>. However, neither of their solutions seem to work.\nI would appreciate any help.</p>\n"}, {"tags": ["c#", ".net", "ado.net"], "answers": [{"tags": [], "owner": {"reputation": 73201, "user_id": 3094533, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/9jbUI.jpg?s=128&g=1", "display_name": "Zohar Peled", "link": "https://stackoverflow.com/users/3094533/zohar-peled"}, "is_accepted": true, "score": 1, "last_activity_date": 1504733166, "creation_date": 1504733166, "answer_id": 46084573, "question_id": 46084394, "link": "https://stackoverflow.com/questions/46084394/controltovalidate-doesnt-work/46084573#46084573", "title": "ControlToValidate doesn&#39;t work", "body": "<p>It's been about 5 or 6 years since I last wrote an ASP.Net website, but I'm sure you can only use server side validators on server side input controls. Your form doesn't contain any server side input controls.<br>\nYour <code>&lt;input type=\"text\" id=\"MID\" /&gt;</code> should be an <code>asp:TextBox</code> tag.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 471638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a57ec98c6364e4a9e6144cdc521fa15?s=128&d=identicon&r=PG", "display_name": "josip.k", "link": "https://stackoverflow.com/users/471638/josip-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1504734440, "last_edit_date": 1504734440, "creation_date": 1504733330, "answer_id": 46084600, "question_id": 46084394, "link": "https://stackoverflow.com/questions/46084394/controltovalidate-doesnt-work/46084600#46084600", "title": "ControlToValidate doesn&#39;t work", "body": "<p>Add <code>runat=\"server\"</code> to input element or use ASP.NET TextBox control (<code>asp:TextBox</code>)</p>\n"}], "owner": {"reputation": 331, "user_id": 5648134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/127a4465a5912c853867c1ede93505c8?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/5648134/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 46084573, "answer_count": 2, "score": 0, "last_activity_date": 1504734440, "creation_date": 1504732248, "last_edit_date": 1504732598, "question_id": 46084394, "link": "https://stackoverflow.com/questions/46084394/controltovalidate-doesnt-work", "title": "ControlToValidate doesn&#39;t work", "body": "<p>I'm trying to add RequiredFieldValidator behind the <code>&lt;input&gt;</code>.  </p>\n\n<p>The following is my code:</p>\n\n<pre><code>&lt;form id=\"form1\" runat=\"server\"&gt;\n    &lt;div&gt;\n        &lt;input type=\"text\" id=\"MID\" /&gt;\n        &lt;asp:RequiredFieldValidator ID=\"RequiredFieldValidator1\" \n            runat=\"server\" ErrorMessage=\"RequiredFieldValidator\"&gt;&lt;/asp:RequiredFieldValidator&gt;\n        &lt;br /&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Then, I'm trying to assign the ControlToValidate to be MID, which is the id of the input text. However, there isn't anything available in the ControlToValidate:  </p>\n\n<p><a href=\"https://i.stack.imgur.com/Tj13t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tj13t.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then, I just type MID in it and run the program,</p>\n\n<pre><code>&lt;form id=\"form1\" runat=\"server\"&gt;\n    &lt;div&gt;\n        &lt;input type=\"text\" id=\"MID\" /&gt;\n        &lt;asp:RequiredFieldValidator ID=\"RequiredFieldValidator1\" \n            runat=\"server\" ErrorMessage=\"RequiredFieldValidator\" ControlToValidate=\"MID\"&gt;&lt;/asp:RequiredFieldValidator&gt;\n        &lt;br /&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>and I get this:<br>\n<a href=\"https://i.stack.imgur.com/qnT8y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qnT8y.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "exception"], "comments": [{"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 4, "creation_date": 1504731884, "post_id": 46084270, "comment_id": 79130632, "body": "You need to post <i>complete</i> code so the problem can be identified/replicated. This doesn&#39;t mean posting all of your code, only the relavant complete code."}, {"owner": {"reputation": 548, "user_id": 556980, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/24gBk.jpg?s=128&g=1", "display_name": "Feras Taleb", "link": "https://stackoverflow.com/users/556980/feras-taleb"}, "edited": false, "score": 0, "creation_date": 1504732276, "post_id": 46084270, "comment_id": 79130791, "body": "Yap ! you need to post complete code.and if you are using any specific library ,framework or design pattern .  having the following in the error : &#39;&#39; &#39;System.Reflection.RuntimeMethodInfo&#39; to type  &#39;System.Reflection.ConstructorInfo&#39;.  &quot; , gives me the feeling that it&#39;s a naming convention conflict kind of thing ."}, {"owner": {"reputation": 247, "user_id": 2149384, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZZfFQ.jpg?s=128&g=1", "display_name": "vkapadia", "link": "https://stackoverflow.com/users/2149384/vkapadia"}, "edited": false, "score": 0, "creation_date": 1504763948, "post_id": 46084270, "comment_id": 79139275, "body": "Sure, I&#39;ll add a few details tomorrow."}, {"owner": {"reputation": 247, "user_id": 2149384, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZZfFQ.jpg?s=128&g=1", "display_name": "vkapadia", "link": "https://stackoverflow.com/users/2149384/vkapadia"}, "edited": false, "score": 0, "creation_date": 1504806062, "post_id": 46084270, "comment_id": 79167162, "body": "I&#39;m not sure what code would be relevant or not, but the code is open source. I&#39;ll add info in the question text."}], "owner": {"reputation": 247, "user_id": 2149384, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZZfFQ.jpg?s=128&g=1", "display_name": "vkapadia", "link": "https://stackoverflow.com/users/2149384/vkapadia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1504806297, "creation_date": 1504731673, "last_edit_date": 1504806297, "question_id": 46084270, "link": "https://stackoverflow.com/questions/46084270/adding-removing-methods-causes-exception", "title": "Adding/Removing Methods Causes Exception", "body": "<p>Strange problem. I have a class, and if I add any methods from it (including private methods) it causes an exception in a different class.</p>\n\n<p>The exception is:</p>\n\n<pre><code>An exception of type 'System.MemberAccessException' occurred in mscorlib.dll\nbut was not handled in user code\n\nAdditional information: Type initializer was not callable.\n</code></pre>\n\n<p>The line that causes the exception is:</p>\n\n<pre><code>compositionService.DefaultCompositionService.SatisfyImportsOnce(this);\n</code></pre>\n\n<p>(<code>compositionService</code> is of type <code>Microsoft.VisualStudio.ComponentModelHost.ComponentModel</code> and <code>this</code> is a class that implements the <code>Microsoft.VisualStudio.Shell.TableManager.ITableDataSource</code> interface.)</p>\n\n<p>This occurs even if I add a method such as:</p>\n\n<pre><code>private void DoNothing()\n{\n}\n</code></pre>\n\n<p>If I remove a class, the exception happens in the same line, but is this exception instead:</p>\n\n<pre><code>An exception of type 'System.InvalidCastException' occurred in mscorlib.dll \nbut was not handled in user code\n\nAdditional information: Unable to cast object of type \n'System.Reflection.RuntimeMethodInfo' to type \n'System.Reflection.ConstructorInfo'.\n</code></pre>\n\n<p>Both the added and removed methods are private.</p>\n\n<p>The code is from <a href=\"https://github.com/vinaykapadia/sarif-sdk\" rel=\"nofollow noreferrer\">https://github.com/vinaykapadia/sarif-sdk</a> in the <code>Sarif.Viewer.VisualStudio</code> project, the file I'm adding the <code>DoNothing()</code> method to is <code>CodeAnalysisResultManager.cs</code>, and the exception is caused in <code>ErrorList\\SarifTableDataSouce.cs</code> on line 36.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 31953, "user_id": 2528063, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=128&d=identicon&r=PG", "display_name": "HimBromBeere", "link": "https://stackoverflow.com/users/2528063/himbrombeere"}, "edited": false, "score": 0, "creation_date": 1504731549, "post_id": 46084176, "comment_id": 79130482, "body": "What if your value contains all three permitted values? Anyway: you wrote about looping your items? Does this work for you? If not, what error/result do you get? Show what you&#180;ve tried allready."}, {"owner": {"reputation": 7366, "user_id": 1958365, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/9eas5.png?s=128&g=1", "display_name": "Equalsk", "link": "https://stackoverflow.com/users/1958365/equalsk"}, "edited": false, "score": 1, "creation_date": 1504731646, "post_id": 46084176, "comment_id": 79130526, "body": "What&#39;s wrong with <code>if (myString.Contains(&quot;Historical&quot;)) { .. do something } else if (myString.Contains(&quot;Correspondence&quot;)) { .. something else }</code>?"}, {"owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "reply_to_user": {"reputation": 31953, "user_id": 2528063, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=128&d=identicon&r=PG", "display_name": "HimBromBeere", "link": "https://stackoverflow.com/users/2528063/himbrombeere"}, "edited": false, "score": 0, "creation_date": 1504731659, "post_id": 46084176, "comment_id": 79130529, "body": "@HimBromBeere A good question, In this particular situation it won&#39;t as the strings are created programmatically from concatenated values."}, {"owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "reply_to_user": {"reputation": 7366, "user_id": 1958365, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/9eas5.png?s=128&g=1", "display_name": "Equalsk", "link": "https://stackoverflow.com/users/1958365/equalsk"}, "edited": false, "score": 0, "creation_date": 1504731726, "post_id": 46084176, "comment_id": 79130560, "body": "@Equalsk Nothing wrong at all, was just curious if there was already something in C# which would do what I&#39;m looking for all in one line."}, {"owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "edited": false, "score": 0, "creation_date": 1504733890, "post_id": 46084176, "comment_id": 79131492, "body": "I modified the question as I accidentally wrote one of the values as &quot;Historical&quot; when it is actually &quot;Historical Search&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "edited": false, "score": 0, "creation_date": 1504731919, "post_id": 46084276, "comment_id": 79130645, "body": "Yes it&#39;s always the suffixes that differ."}, {"owner": {"reputation": 31953, "user_id": 2528063, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=128&d=identicon&r=PG", "display_name": "HimBromBeere", "link": "https://stackoverflow.com/users/2528063/himbrombeere"}, "edited": false, "score": 1, "creation_date": 1504732220, "post_id": 46084276, "comment_id": 79130772, "body": "I assume <code>Contains</code> would be better than <code>StartsWith</code> as it will also work if the permitted value is in the middle of a string. It won&#180;t matter in the OPs scenario, though, just a hint. Anyway good (and right) answer."}, {"owner": {"reputation": 2346, "user_id": 2329708, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5Du22.jpg?s=128&g=1", "display_name": "Nate Jenson", "link": "https://stackoverflow.com/users/2329708/nate-jenson"}, "edited": false, "score": 0, "creation_date": 1504732262, "post_id": 46084276, "comment_id": 79130785, "body": "Agreed, but <code>StartsWith</code> will be more performant for the OP&#39;s situation."}, {"owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "edited": false, "score": 0, "creation_date": 1504732523, "post_id": 46084276, "comment_id": 79130906, "body": "So is the difference between this answer and the one posted by Eser is this one is specific to differing suffixes vs finding the value anywhere in the string? (I&#39;m just learning C#)"}, {"owner": {"reputation": 31953, "user_id": 2528063, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=128&d=identicon&r=PG", "display_name": "HimBromBeere", "link": "https://stackoverflow.com/users/2528063/himbrombeere"}, "reply_to_user": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "edited": false, "score": 0, "creation_date": 1504732680, "post_id": 46084276, "comment_id": 79130971, "body": "@ChrisYYC Have you tried both? Do they give you the same results?"}, {"owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "reply_to_user": {"reputation": 31953, "user_id": 2528063, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=128&d=identicon&r=PG", "display_name": "HimBromBeere", "link": "https://stackoverflow.com/users/2528063/himbrombeere"}, "edited": false, "score": 0, "creation_date": 1504733206, "post_id": 46084276, "comment_id": 79131207, "body": "@HimBromBeere I apologize, the order of the 2 solutions changed and when I said I had run it I had actually run njenson &#39;s solution.  I just now though changed it to Eser &#39;s and something is not quite right, it only writes to the log 294 of the ~1200 files, indicating for most a null is being returned.Hmm."}, {"owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "edited": false, "score": 0, "creation_date": 1504733483, "post_id": 46084276, "comment_id": 79131341, "body": "Ok I think I see the issue. When I mentioned &quot;Historical&quot; as one of the permitted values, it is actually &quot;Historical Search&quot;. It appears Eser &#39;s solution returns null in those cases as no Historical Search results are written to the log, perhaps the space in that permitted value messes things up."}], "tags": [], "owner": {"reputation": 2346, "user_id": 2329708, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5Du22.jpg?s=128&g=1", "display_name": "Nate Jenson", "link": "https://stackoverflow.com/users/2329708/nate-jenson"}, "is_accepted": false, "score": 3, "last_activity_date": 1504732141, "last_edit_date": 1504732141, "creation_date": 1504731702, "answer_id": 46084276, "question_id": 46084176, "link": "https://stackoverflow.com/questions/46084176/determine-if-any-of-a-list-of-values-occurs-in-a-string-and-return-which-one/46084276#46084276", "title": "Determine if any of a list of values occurs in a string, and return which one", "body": "<p>If it's always the suffixes that differ, something like this would work for you. Essentially, it says: Find the first <code>permittedValue</code> that has the same starting characters as my input, or return <code>null</code> if nothing is found.</p>\n\n<pre><code>    string[] permittedValues = {\"Historical\",\"Correspondence\",\"Archived\"};\n    string input = \"Historical Vol2\";\n    string val = permittedValues.FirstOrDefault(v =&gt; input.StartsWith(v)); // this will be null if there's no match.\n\n    if (val == null) {\n        Console.WriteLine(\"not permitted\");\n    }\n    else {\n        Console.WriteLine(val); // prints \"Historical\" \n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11630, "user_id": 5149474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atyzF.jpg?s=128&g=1", "display_name": "Eser", "link": "https://stackoverflow.com/users/5149474/eser"}, "reply_to_user": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "edited": false, "score": 0, "creation_date": 1504732943, "post_id": 46084292, "comment_id": 79131083, "body": "@HimBromBeere And it is what is asked in question :) <code>&quot;Correspondence Vol 2&quot; (should return &quot;Correspondence&quot;)</code> Next time read the question carefully before downvoting anything"}, {"owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "edited": false, "score": 0, "creation_date": 1504734182, "post_id": 46084292, "comment_id": 79131605, "body": "Eser&#39;s answer worked for my original question, even though I had introduced a mistake, so I am marking this as the solution."}], "tags": [], "owner": {"reputation": 11630, "user_id": 5149474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atyzF.jpg?s=128&g=1", "display_name": "Eser", "link": "https://stackoverflow.com/users/5149474/eser"}, "is_accepted": true, "score": 2, "last_activity_date": 1504731790, "creation_date": 1504731790, "answer_id": 46084292, "question_id": 46084176, "link": "https://stackoverflow.com/questions/46084176/determine-if-any-of-a-list-of-values-occurs-in-a-string-and-return-which-one/46084292#46084292", "title": "Determine if any of a list of values occurs in a string, and return which one", "body": "<pre><code>string[] permittedValues = { \"Historical\", \"Correspondence\", \"Archived\" };\nstring text = \"Correspondence Vol 2\";\n\nvar found =  text.Split().FirstOrDefault(x =&gt; permittedValues.Contains(x));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "edited": false, "score": 0, "creation_date": 1504733669, "post_id": 46084502, "comment_id": 79131417, "body": "This is very elegant. Re: my error I admit to in the comment of njenson&#39;s solution, what if the permitted value of Historical is actually Historical Search? your solution skips those due to the space in the value. Can that be handled with the Intersect ?"}, {"owner": {"reputation": 11630, "user_id": 5149474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atyzF.jpg?s=128&g=1", "display_name": "Eser", "link": "https://stackoverflow.com/users/5149474/eser"}, "reply_to_user": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "edited": false, "score": 0, "creation_date": 1504733757, "post_id": 46084502, "comment_id": 79131442, "body": "@ChrisYYC <code>Split</code> splits text into <i>words</i>. So This question and mine are based on this. But you change the rules of the game during match."}], "tags": [], "owner": {"reputation": 148466, "user_id": 2319407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98O16.jpg?s=128&g=1", "display_name": "Dmitry Bychenko", "link": "https://stackoverflow.com/users/2319407/dmitry-bychenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1504732780, "creation_date": 1504732780, "answer_id": 46084502, "question_id": 46084176, "link": "https://stackoverflow.com/questions/46084176/determine-if-any-of-a-list-of-values-occurs-in-a-string-and-return-which-one/46084502#46084502", "title": "Determine if any of a list of values occurs in a string, and return which one", "body": "<p><code>Intersect</code> is another way to implement the routine:</p>\n\n<pre><code>string[] permittedValues = { \"Historical\", \"Correspondence\", \"Archived\" };\nstring text = \"Correspondence Vol 2\";\n\nvar found = text\n  .Split(' ')\n  .Intersect(permittedValues)\n  .FirstOrDefault();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": false, "score": 0, "last_activity_date": 1504735532, "creation_date": 1504735532, "answer_id": 46084999, "question_id": 46084176, "link": "https://stackoverflow.com/questions/46084176/determine-if-any-of-a-list-of-values-occurs-in-a-string-and-return-which-one/46084999#46084999", "title": "Determine if any of a list of values occurs in a string, and return which one", "body": "<p>This will return Correspondence.</p>\n\n<pre><code>using System.linq;\n\n...\n    var haystack = \"Correspondence Vol. 2\";\n    var needles = new List&lt;string&gt;(){\"Historical\",\"Correspondence\",\"Archived\"};\n\n    var result = needles.Where(n =&gt; haystack.IndexOf(n) &gt;= 0).First();\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 2526402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c189b275de38eba3f9e31833e9c5d0?s=128&d=identicon&r=PG", "display_name": "ChrisYYC", "link": "https://stackoverflow.com/users/2526402/chrisyyc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 46084292, "answer_count": 4, "score": 1, "last_activity_date": 1504735532, "creation_date": 1504731261, "last_edit_date": 1504734127, "question_id": 46084176, "link": "https://stackoverflow.com/questions/46084176/determine-if-any-of-a-list-of-values-occurs-in-a-string-and-return-which-one", "title": "Determine if any of a list of values occurs in a string, and return which one", "body": "<p>In C#, I'd like to search a string for any of a list of words, and return which one is found. I know I could loop through, but I'm curious if there is a simpler way.</p>\n\n<p>Essentially there are 3 values which are 'permitted', but sometimes the values being read will have that value plus extraneous suffixes.</p>\n\n<p>eg</p>\n\n<pre><code>string[] permittedValues = {\"Historical Search\",\"Correspondence\",\"Archived\"};\n</code></pre>\n\n<p>but the data being checked may be:</p>\n\n<pre><code>\"Historical Search\"            (should return \"Historical Search\")\n\n\"Correspondence Vol 2\"  (should return \"Correspondence\")\n\n\"Archived - fileroom 3\" (should return \"Archived\")\n\n\"sldfjslkdfjsdklfj\"     (should return something allowing it to be handled)\n</code></pre>\n\n<p>I can do</p>\n\n<pre><code>bool isValidValue = permittedValues.Any(myString.Contains);  \n</code></pre>\n\n<p>to see if any of the list appear, but I also need to get which one.</p>\n\n<p>Hopefully that makes sense.</p>\n\n<p>(Originally I had mistakenly put \"Historical Search\" as \"Historical\", so I have marked Eser's answer correct as it was accurate for my original question.</p>\n"}, {"tags": ["c#", "list", "generics"], "comments": [{"owner": {"reputation": 31953, "user_id": 2528063, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=128&d=identicon&r=PG", "display_name": "HimBromBeere", "link": "https://stackoverflow.com/users/2528063/himbrombeere"}, "edited": false, "score": 1, "creation_date": 1504731344, "post_id": 46084163, "comment_id": 79130402, "body": "What is your problem on doing so? What have you tried? You may have a look at <a href=\"https://stackoverflow.com/questions/4738280/use-reflection-to-call-generic-method-on-object-instance-with-signature-someobj\" title=\"use reflection to call generic method on object instance with signature someobj\">stackoverflow.com/questions/4738280/&hellip;</a>. Are all those types in the same assembly? How do you get all the implementing types? Your question is far too broad."}], "answers": [{"comments": [{"owner": {"reputation": 6367, "user_id": 5552, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2054755ed27fed08265afe4eda000bd9?s=128&d=identicon&r=PG", "display_name": "Loofer", "link": "https://stackoverflow.com/users/5552/loofer"}, "edited": false, "score": 0, "creation_date": 1504733419, "post_id": 46084485, "comment_id": 79131316, "body": "Thanks. The list of types that need &#39;Done&#39; is long and will be longer. If  I don&#39;t have to remember to add them to the list when they are created then that is a good thing for me."}], "tags": [], "owner": {"reputation": 319, "user_id": 4904297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c9e99e1ea007ee462b12d864c719395?s=128&d=identicon&r=PG&f=1", "display_name": "David Kujawski", "link": "https://stackoverflow.com/users/4904297/david-kujawski"}, "is_accepted": true, "score": 1, "last_activity_date": 1504732721, "creation_date": 1504732721, "answer_id": 46084485, "question_id": 46084163, "link": "https://stackoverflow.com/questions/46084163/how-can-i-use-a-list-of-types-as-a-generic-argument/46084485#46084485", "title": "How can I use a list of types as a generic argument?", "body": "<p>I don't really see a practical reason why you are doing this (maybe a small part of a larger problem?), but it is possible (see below).  If you have a more specific problem, maybe try updating your question.</p>\n\n<pre><code>        DoThing doThing = new DoThing();\n\n        //loop through types which are IFoo\n        foreach (var type in AppDomain.CurrentDomain.GetAssemblies().SelectMany(s =&gt; s.GetTypes()).Where(p =&gt; typeof(IFoo).IsAssignableFrom(p) &amp;&amp; p.IsClass))\n        {\n            //call DoThing.Doit&lt;t&gt; method using reflection\n            MethodInfo method = typeof(DoThing).GetMethod(\"Doit\");\n            MethodInfo generic = method.MakeGenericMethod(type);\n            generic.Invoke(doThing, null);\n        }\n</code></pre>\n\n<p>Note, the above code assumes DoThing as defined:</p>\n\n<pre><code>public class DoThing\n{\n    public void Doit&lt;T&gt;() where T : IFoo\n    {\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 6367, "user_id": 5552, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2054755ed27fed08265afe4eda000bd9?s=128&d=identicon&r=PG", "display_name": "Loofer", "link": "https://stackoverflow.com/users/5552/loofer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "closed_date": 1504758038, "accepted_answer_id": 46084485, "answer_count": 1, "score": 0, "last_activity_date": 1504732721, "creation_date": 1504731227, "question_id": 46084163, "link": "https://stackoverflow.com/questions/46084163/how-can-i-use-a-list-of-types-as-a-generic-argument", "closed_reason": "Needs more focus", "title": "How can I use a list of types as a generic argument?", "body": "<p>I have a number of types that all implement a simple interface.</p>\n\n<p>I would like to be able to get a list of the types and then use them in a generic method</p>\n\n<pre><code>ForEach(var type in TypesThatImplement&lt;Ifoo&gt;){\n    DoThing.Doit&lt;type&gt;();    \n}\n</code></pre>\n\n<p>Rather than have to maintain a list of</p>\n\n<pre><code>DoThing.Doit&lt;TypeA&gt;();\nDoThing.Doit&lt;TypeB&gt;();\nDoThing.Doit&lt;TypeC&gt;();\n</code></pre>\n"}, {"tags": ["c#", "entity-framework", "linq", "linq-to-entities"], "comments": [{"owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "edited": false, "score": 0, "creation_date": 1504731196, "post_id": 46084121, "comment_id": 79130327, "body": "This code should work as written. Perhaps there is an underlying issue in the way the code values are managed."}, {"owner": {"reputation": 31953, "user_id": 2528063, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=128&d=identicon&r=PG", "display_name": "HimBromBeere", "link": "https://stackoverflow.com/users/2528063/himbrombeere"}, "edited": false, "score": 0, "creation_date": 1504731791, "post_id": 46084121, "comment_id": 79130595, "body": "What do you get instead? Furthermore: what is <code>EventTypeCode</code>? Is it a bitwise combined enum or does it contain only one single enum-value?"}, {"owner": {"reputation": 13, "user_id": 3369464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caeafe329952b4451742a0be6576c26f?s=128&d=identicon&r=PG&f=1", "display_name": "alkprksh", "link": "https://stackoverflow.com/users/3369464/alkprksh"}, "reply_to_user": {"reputation": 31953, "user_id": 2528063, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=128&d=identicon&r=PG", "display_name": "HimBromBeere", "link": "https://stackoverflow.com/users/2528063/himbrombeere"}, "edited": false, "score": 0, "creation_date": 1504734277, "post_id": 46084121, "comment_id": 79131647, "body": "@HimBromBeere  EventTypeCode is enum containing many event type code and description."}], "answers": [{"tags": [], "owner": {"reputation": 548, "user_id": 556980, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/24gBk.jpg?s=128&g=1", "display_name": "Feras Taleb", "link": "https://stackoverflow.com/users/556980/feras-taleb"}, "is_accepted": true, "score": 0, "last_activity_date": 1504733296, "creation_date": 1504733296, "answer_id": 46084594, "question_id": 46084121, "link": "https://stackoverflow.com/questions/46084121/how-to-use-exist-and-not-exist-clause-using-lambda-expression/46084594#46084594", "title": "How to use EXIST and NOT EXIST clause using lambda expression", "body": "<p>try this out : </p>\n\n<pre><code>List&lt;Order&gt; matchingOrders = xyzContext.Orders.Where(\n                o =&gt; o.FacilityId == facility.MasterFacilityId\n               &amp;&amp; rxNumberList.Contains(o.RxNumber)\n               &amp;&amp; o.OrderEvents.All(oe =&gt; oe.EventType.Code != EventTypeCode.Delivered)\n               &amp;&amp;  o.OrderEvents.Any(oe.EventType.Code == EventTypeCode.Ordered)).ToList();\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3369464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caeafe329952b4451742a0be6576c26f?s=128&d=identicon&r=PG&f=1", "display_name": "alkprksh", "link": "https://stackoverflow.com/users/3369464/alkprksh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 0, "accepted_answer_id": 46084594, "answer_count": 1, "score": 1, "last_activity_date": 1504733296, "creation_date": 1504730987, "question_id": 46084121, "link": "https://stackoverflow.com/questions/46084121/how-to-use-exist-and-not-exist-clause-using-lambda-expression", "title": "How to use EXIST and NOT EXIST clause using lambda expression", "body": "<p>I am trying to filter out orders that do not have an event type Delivered and that works fine.</p>\n\n<pre><code>List&lt;Order&gt; matchingOrders = xyzContext.Orders.Where(\n                    o =&gt; o.FacilityId == facility.MasterFacilityId\n                   &amp;&amp; rxNumberList.Contains(o.RxNumber)\n                   &amp;&amp; o.OrderEvents.All(oe =&gt; oe.EventType.Code != EventTypeCode.Delivered)).ToList();\n</code></pre>\n\n<p>After that I am trying to filter Orders which has Event type \"Ordered\" and does not have event type \"Delivered\" and I am not getting expected result.</p>\n\n<pre><code>List&lt;Order&gt; matchingOrders = xyzContext.Orders.Where(\n                    o =&gt; o.FacilityId == facility.MasterFacilityId\n                   &amp;&amp; rxNumberList.Contains(o.RxNumber)\n                   &amp;&amp; o.OrderEvents.All(oe =&gt; oe.EventType.Code != EventTypeCode.Delivered &amp;&amp; oe.EventType.Code == EventTypeCode.Ordered)).ToList();\n</code></pre>\n"}, {"tags": ["c#", "unity3d"], "comments": [{"owner": {"reputation": 3176, "user_id": 2001247, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba6273cefed6f49b623449dae634b193?s=128&d=identicon&r=PG", "display_name": "ElDuderino", "link": "https://stackoverflow.com/users/2001247/elduderino"}, "edited": false, "score": 0, "creation_date": 1504731617, "post_id": 46084105, "comment_id": 79130512, "body": "What does not working mean? Any error? What did you get, what did you expect? Imo you should fill the whole color array with a color and go from there."}], "answers": [{"tags": [], "owner": {"reputation": 219, "user_id": 7095312, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/04ed2d227318d5846739b5a9b3fbac7f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Upson", "link": "https://stackoverflow.com/users/7095312/thomas-upson"}, "is_accepted": false, "score": 0, "last_activity_date": 1504731471, "creation_date": 1504731471, "answer_id": 46084227, "question_id": 46084105, "link": "https://stackoverflow.com/questions/46084105/mesh-colors-not-working-mesh-is-white/46084227#46084227", "title": "mesh.colors not working. Mesh is white", "body": "<p>SOLVED: Had my shader on Unlit/Texture so it was expecting a texture. My bad!</p>\n"}], "owner": {"reputation": 219, "user_id": 7095312, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/04ed2d227318d5846739b5a9b3fbac7f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Upson", "link": "https://stackoverflow.com/users/7095312/thomas-upson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504731471, "creation_date": 1504730920, "last_edit_date": 1504731289, "question_id": 46084105, "link": "https://stackoverflow.com/questions/46084105/mesh-colors-not-working-mesh-is-white", "title": "mesh.colors not working. Mesh is white", "body": "<p>I'm working on a procedural terrain generation system and I wanted to make it have a low poly effect. I tried using a texture for colours, but it wasn't what I was looking for. Instead I've decided to assign the colours of the triangles individually, and I'm having an issue with that.</p>\n\n<p>Here is my code for creating the mesh.</p>\n\n<pre><code>public Mesh CreateMesh()\n{\n    Mesh mesh = new Mesh();\n    mesh.vertices = vertices;\n    mesh.triangles = triangles;\n    mesh.uv = uvs;\n\n    Color[] colours = new Color[vertices.Length];\n\n    for (int i = 0; i &lt; triangles.Length; i++)\n    {\n        int vertIndex = triangles[i];\n        if (i % 3 == 0)\n        {\n            colours[vertIndex] = Color.green;\n        }\n    }\n\n    mesh.colors = colours;\n\n    if (useFlatShading)\n    {\n        mesh.RecalculateNormals();\n    }\n    else\n    {\n        mesh.normals = bakedNormals;\n    }\n\n    return mesh;\n}\n</code></pre>\n\n<p>I am using Color.green temporarily. Here is the code I'm using for flat shading to give it the low poly effect:</p>\n\n<pre><code>void FlatShading()\n{\n    Vector3[] flatShadedVertices = new Vector3[triangles.Length];\n    Vector2[] flatShadedUvs = new Vector2[triangles.Length];\n\n    for (int i = 0; i &lt; triangles.Length; i++)\n    {\n        flatShadedVertices[i] = vertices[triangles[i]];\n        flatShadedUvs[i] = uvs[triangles[i]];\n        triangles[i] = i;\n    }\n\n    vertices = flatShadedVertices;\n    uvs = flatShadedUvs;\n}\n</code></pre>\n\n<p>Can anyone see an issue. If not, I will search through my code some more and try and figure it out.</p>\n\n<p>Thanks a lot!</p>\n\n<p>EDIT: Flatshading is called BEFORE CreateMesh, so the new vertices and uvs are calculated before being assigned to the mesh itself.</p>\n"}, {"tags": ["c#", "asp.net-mvc", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 409, "user_id": 5054581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9320a11754eb3978cea35eeae9a865be?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul Samad", "link": "https://stackoverflow.com/users/5054581/abdul-samad"}, "edited": false, "score": 0, "creation_date": 1504767878, "post_id": 46084082, "comment_id": 79141424, "body": "Shouldn&#39;t you be passing the path of the saved file to <code>amazonS3.UploadFile();</code>?  While you are saving all the files to your local folder save their paths as well in an array which should be passed one by one to <code>amazonS3.UploadFile();</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8571198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7879ca5355988d297bc92f2247e1790f?s=128&d=identicon&r=PG&f=1", "display_name": "wj1572", "link": "https://stackoverflow.com/users/8571198/wj1572"}, "edited": false, "score": 0, "creation_date": 1504885404, "post_id": 46090407, "comment_id": 79202850, "body": "Worked great, thanks!.. one more question.. how can I bypass the &#39;UploadedFiles&#39; folder and go straight to s3?  Now that I&#39;m up and running, I&#39;d like to be able to upload large files without the extra local backup.  My goal is to upload from various external hard drives to s3.  Much appreciated!"}, {"owner": {"reputation": 409, "user_id": 5054581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9320a11754eb3978cea35eeae9a865be?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul Samad", "link": "https://stackoverflow.com/users/5054581/abdul-samad"}, "reply_to_user": {"reputation": 23, "user_id": 8571198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7879ca5355988d297bc92f2247e1790f?s=128&d=identicon&r=PG&f=1", "display_name": "wj1572", "link": "https://stackoverflow.com/users/8571198/wj1572"}, "edited": false, "score": 0, "creation_date": 1504890608, "post_id": 46090407, "comment_id": 79205528, "body": "I believe It isn&#39;t possible to upload directly as the <code>PutRequestObject</code> requires the path to the file to be uploaded thus it is necessary to download/save the file before uploading. It would be nice to up vote and accept the answer if you found it helpfull :). Thanks."}, {"owner": {"reputation": 409, "user_id": 5054581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9320a11754eb3978cea35eeae9a865be?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul Samad", "link": "https://stackoverflow.com/users/5054581/abdul-samad"}, "reply_to_user": {"reputation": 23, "user_id": 8571198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7879ca5355988d297bc92f2247e1790f?s=128&d=identicon&r=PG&f=1", "display_name": "wj1572", "link": "https://stackoverflow.com/users/8571198/wj1572"}, "edited": false, "score": 1, "creation_date": 1504890713, "post_id": 46090407, "comment_id": 79205574, "body": "And one more thing once the file is uploaded you can delete the file from your local temp folder by using <code>File.Delete(path)</code> to remove traces as you move forward :p"}], "tags": [], "owner": {"reputation": 409, "user_id": 5054581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9320a11754eb3978cea35eeae9a865be?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul Samad", "link": "https://stackoverflow.com/users/5054581/abdul-samad"}, "is_accepted": true, "score": 0, "last_activity_date": 1504783088, "last_edit_date": 1504783088, "creation_date": 1504769390, "answer_id": 46090407, "question_id": 46084082, "link": "https://stackoverflow.com/questions/46084082/drag-and-drop-upload-to-aws-s3-using-asp-net-mvc/46090407#46090407", "title": "Drag and Drop Upload to aws s3 using asp.net MVC", "body": "<p>I will start in the same order as you have posted your question.</p>\n\n<p><strong>Index.cshtml</strong></p>\n\n<p>1) Please verify that the URL you are referring to in <code>url: '@Url.Action(\"UploadFiles\")'</code> is correct. I believe it should be <code>url: '@Url.Action(\"UploadFiles\", \"Home\")'</code></p>\n\n<p>2) Please verify that you have jquery added via a script tag.</p>\n\n<p><strong>HomeController.cs</strong></p>\n\n<p>1) Your Index function should only return a view.</p>\n\n<p>2) Instantiate a new AmazonS3Uploader in the constructor.</p>\n\n<p>3) Save all the file paths in a list, loop over them and pass each path to amazonS3.UploadFile(path)` for uploading to S3</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.IO;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\n\nnamespace MVCDragDrop.Controllers\n{\n    public class HomeController : Controller\n    {\n        private AmazonS3Uploader amazonS3;\n\n        public HomeController()\n        {\n            amazonS3 = new AmazonS3Uploader();\n        }\n        // GET: Home\n        public ActionResult Index()\n        {\n            return View();\n        }\n\n        [HttpPost]\n        public ActionResult UploadFiles(IEnumerable&lt;HttpPostedFileBase&gt; files)\n        {\n            List&lt;string&gt; paths = new List&lt;string&gt;();\n\n            foreach (var file in files) {\n                string filePath = Guid.NewGuid() + Path.GetExtension(file.FileName);\n                string destPath = Path.Combine(Server.MapPath(\"~/UploadedFiles\"), filePath);\n                paths.Add(destPath)\n                file.SaveAs(destPath);\n            }\n\n            foreach(var path in paths){\n                amazonS3.UploadFile(path);\n            }\n\n            return Json(\"file uploaded successfully\");\n        }\n    }\n}\n</code></pre>\n\n<p><strong>AmazonS3Uploader.cs</strong></p>\n\n<p>1) Instantiate the client object in your constructor.</p>\n\n<p>2) Make changes to your <code>UploadFile()</code> method to accept a file path and use that path in <code>PutObjectRequest</code></p>\n\n<pre><code>using System;\nusing Amazon.S3;\nusing Amazon.S3.Model;\n\nnamespace MVCDragDrop\n{\n    public class AmazonS3Uploader\n    {\n        private string bucketName = \"xxxxx\";\n        private string keyName = \"\";\n        private AmazonS3Client client;\n\n        public AmazonS3Uploader()\n        {\n            client = new AmazonS3Client(Amazon.RegionEndpoint.USEast1);\n        }\n\n        public void UploadFile(string filePath)\n        {\n\n            try {\n                PutObjectRequest putRequest = new PutObjectRequest {\n                    BucketName = bucketName,\n                    Key = keyName,\n                    FilePath = filePath,\n                    ContentType = \"plain/text\"\n                };\n\n                PutObjectResponse response = client.PutObject(putRequest);\n            }\n            catch (AmazonS3Exception amazonS3Exception) {\n                if (amazonS3Exception.ErrorCode != null &amp;&amp;\n                    (amazonS3Exception.ErrorCode.Equals(\"InvalidAccessKeyId\")\n                    ||\n                    amazonS3Exception.ErrorCode.Equals(\"InvalidSecurity\"))) {\n                    throw new Exception(\"Check the provided AWS Credentials.\");\n                } else {\n                    //throw new Exception(\"Error occurred: \" + amazonS3Exception.Message);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Hope I could help :)</p>\n"}], "owner": {"reputation": 23, "user_id": 8571198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7879ca5355988d297bc92f2247e1790f?s=128&d=identicon&r=PG&f=1", "display_name": "wj1572", "link": "https://stackoverflow.com/users/8571198/wj1572"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 1, "accepted_answer_id": 46090407, "answer_count": 1, "score": 2, "last_activity_date": 1504783088, "creation_date": 1504730806, "question_id": 46084082, "link": "https://stackoverflow.com/questions/46084082/drag-and-drop-upload-to-aws-s3-using-asp-net-mvc", "title": "Drag and Drop Upload to aws s3 using asp.net MVC", "body": "<p>I'm having some trouble getting files to upload on a basic mvc project I'm working on...  I have a drag/drop feature that I'd like to connect to aws s3.  I I can get files into a local folder with the current application.. and have followed the steps here -> <a href=\"https://stackoverflow.com/questions/25814972/how-to-upload-a-file-to-amazon-s3-super-easy-using-c-sharp\">upload a file to amazon s3 super easy using c sharp</a> -- to upload a single, specific file, with success.  But, I cannot combine the two so that the files I drag/drop will end up in my bucket. </p>\n\n<p>Below is all the code I have to date:</p>\n\n<p>Index</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@{\r\n    ViewBag.Title = \"Index\";\r\n}\r\n\r\n&lt;h2&gt;Drag &amp; Drop File Upload&lt;/h2&gt;\r\n&lt;div id=\"dropArea\"&gt;\r\n    Drop your files here\r\n&lt;/div&gt;\r\n&lt;h4&gt;Uploaded Files: &lt;/h4&gt;\r\n&lt;ul class=\"list-group\" id=\"uploadList\"&gt;\r\n\r\n&lt;/ul&gt;\r\n\r\n&lt;style&gt;\r\n    #dropArea {\r\n        background-image: url(\"http://xx.png\"); \r\n        background-repeat: no-repeat;\r\n        background-position: center;\r\n        background-color:#fff;\r\n        border: black dashed 1px;\r\n        height: 500px;\r\n        text-align: center;\r\n        color: black;\r\n    }\r\n    .active-drop{\r\n        background:#739cfb !important;\r\n        border:solid 2px blue !important;\r\n        opacity:.5;\r\n        color:black !important;\r\n    }\r\n&lt;/style&gt;\r\n\r\n@section Scripts {\r\n&lt;script src=\"~/Scripts/jquery.filedrop.js\"&gt;&lt;/script&gt;\r\n    &lt;script type=\"text/javascript\"&gt;\r\n        $(function () {\r\n            $('#dropArea').filedrop({\r\n                url: '@Url.Action(\"UploadFiles\")',\r\n                allowedfiletypes: ['image/jpeg', 'image/png', 'image/gif'], \r\n                allowedfileextensions: ['.jpg', '.jpeg', '.png', '.gif'],\r\n                paramname: 'files', \r\n                maxfiles: 5,\r\n                maxfilesize: 5, // in MB\r\n                dragOver: function () {\r\n                    $('#dropArea').addClass('active-drop');\r\n                    \r\n                },\r\n                dragLeave: function () {\r\n                    $('#dropArea').removeClass('active-drop');\r\n                },\r\n                drop: function () {\r\n                    $('#dropArea').removeClass('active-drop');\r\n                },\r\n                afterAll: function (e) {\r\n                    $('#dropArea').html('file(s) uploaded successfully');\r\n\r\n                },\r\n                uploadFinished: function (i, file, response, time) {\r\n                    $('#uploadList').append('&lt;li class=\"list-group-item\"&gt;'+file.name+'&lt;/li&gt;')\r\n                }\r\n            })\r\n        })\r\n        &lt;/script&gt;    \r\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Home Controller.cs</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>using System;\r\nusing System.Collections.Generic;\r\nusing System.IO;\r\nusing System.Linq;\r\nusing System.Web;\r\nusing System.Web.Mvc;\r\n\r\nnamespace MVCDragDrop.Controllers\r\n{\r\n    public class HomeController : Controller\r\n    {\r\n        // GET: Home\r\n        public ActionResult Index()\r\n        {\r\n            AmazonS3Uploader amazonS3 = new AmazonS3Uploader();\r\n\r\n            amazonS3.UploadFile();\r\n\r\n            return View();\r\n        }\r\n\r\n        [HttpPost]\r\n        public ActionResult UploadFiles(IEnumerable&lt;HttpPostedFileBase&gt; files)\r\n        {\r\n\r\n            foreach (var file in files) {\r\n                string filePath = Guid.NewGuid() + Path.GetExtension(file.FileName);\r\n                file.SaveAs(Path.Combine(Server.MapPath(\"~/UploadedFiles\"), filePath));\r\n            }\r\n\r\n            return Json(\"file uploaded successfully\");\r\n        }\r\n    }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>AmazonS3Uploader.cs</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>using System;\r\nusing Amazon.S3;\r\nusing Amazon.S3.Model;\r\n\r\nnamespace MVCDragDrop\r\n{\r\n    public class AmazonS3Uploader\r\n    {\r\n        private string bucketName = \"xxxxx\";\r\n        private string keyName = \"\";\r\n        private string filePath = \"\";\r\n\r\n        public void UploadFile()\r\n        {\r\n            var client = new AmazonS3Client(Amazon.RegionEndpoint.USEast1);\r\n\r\n            try {\r\n                PutObjectRequest putRequest = new PutObjectRequest {\r\n                    BucketName = bucketName,\r\n                    Key = keyName,\r\n                    FilePath = filePath,\r\n                    ContentType = \"plain/text\"\r\n                };\r\n\r\n                PutObjectResponse response = client.PutObject(putRequest);\r\n            }\r\n            catch (AmazonS3Exception amazonS3Exception) {\r\n                if (amazonS3Exception.ErrorCode != null &amp;&amp;\r\n                    (amazonS3Exception.ErrorCode.Equals(\"InvalidAccessKeyId\")\r\n                    ||\r\n                    amazonS3Exception.ErrorCode.Equals(\"InvalidSecurity\"))) {\r\n                    throw new Exception(\"Check the provided AWS Credentials.\");\r\n                } else {\r\n                    //throw new Exception(\"Error occurred: \" + amazonS3Exception.Message);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>My webconfig file is also set up with the correct s3 key/secret/profile name.</p>\n\n<p>Any help would be much appreciated!</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c#", ".net", "generics"], "comments": [{"owner": {"reputation": 7366, "user_id": 1958365, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/9eas5.png?s=128&g=1", "display_name": "Equalsk", "link": "https://stackoverflow.com/users/1958365/equalsk"}, "edited": false, "score": 3, "creation_date": 1504730998, "post_id": 46084030, "comment_id": 79130240, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/302096/how-can-i-return-null-from-a-generic-method-in-c\">How can I return NULL from a generic method in C#?</a>"}, {"owner": {"reputation": 59217, "user_id": 156695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3390f053c9414f150c48f700afaa3e7a?s=128&d=identicon&r=PG", "display_name": "Tigran", "link": "https://stackoverflow.com/users/156695/tigran"}, "edited": false, "score": 0, "creation_date": 1504731071, "post_id": 46084030, "comment_id": 79130271, "body": "what&#39;s wrong with using <code>default(T)</code> as in example linked provided by you ?"}, {"owner": {"reputation": 10230, "user_id": 1418704, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f23297149bdbeb4759cd00c5108f489b?s=128&d=identicon&r=PG", "display_name": "Casey Crookston", "link": "https://stackoverflow.com/users/1418704/casey-crookston"}, "reply_to_user": {"reputation": 59217, "user_id": 156695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3390f053c9414f150c48f700afaa3e7a?s=128&d=identicon&r=PG", "display_name": "Tigran", "link": "https://stackoverflow.com/users/156695/tigran"}, "edited": false, "score": 0, "creation_date": 1504731228, "post_id": 46084030, "comment_id": 79130347, "body": "@Tigran, I tried it and it didn&#39;t work"}, {"owner": {"reputation": 59217, "user_id": 156695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3390f053c9414f150c48f700afaa3e7a?s=128&d=identicon&r=PG", "display_name": "Tigran", "link": "https://stackoverflow.com/users/156695/tigran"}, "edited": false, "score": 0, "creation_date": 1504731296, "post_id": 46084030, "comment_id": 79130382, "body": "@CaseyCrookston: so you mean <code>return default(T)</code> did not work for you like a solution or you got some compilation errors ?"}, {"owner": {"reputation": 10230, "user_id": 1418704, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f23297149bdbeb4759cd00c5108f489b?s=128&d=identicon&r=PG", "display_name": "Casey Crookston", "link": "https://stackoverflow.com/users/1418704/casey-crookston"}, "edited": false, "score": 0, "creation_date": 1504731417, "post_id": 46084030, "comment_id": 79130436, "body": "Hmmm... good question.  It works now.  I must have had a typo?"}, {"owner": {"reputation": 23468, "user_id": 4137916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bab91fda70af7e9beb8934d323540e8?s=128&d=identicon&r=PG", "display_name": "Jeroen Mostert", "link": "https://stackoverflow.com/users/4137916/jeroen-mostert"}, "edited": false, "score": 1, "creation_date": 1504731680, "post_id": 46084030, "comment_id": 79130536, "body": "Do not write catch-all exception handlers that don&#39;t even log anything. They&#39;ll give you endless grief as you try to figure out <i>why</i> your method didn&#39;t return anything, which could be anything from a network error to a JSON formatting error to even a <code>NullReferenceException</code>. If this is simplified from actual code, then OK, otherwise, at least add some logging, or a way to pass any error that happened to a handler you give to the function (<code>, Action&lt;Exception&gt; errorHandler = null) { ... errorHandler?.Invoke(ex)</code>)."}, {"owner": {"reputation": 10230, "user_id": 1418704, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f23297149bdbeb4759cd00c5108f489b?s=128&d=identicon&r=PG", "display_name": "Casey Crookston", "link": "https://stackoverflow.com/users/1418704/casey-crookston"}, "reply_to_user": {"reputation": 23468, "user_id": 4137916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bab91fda70af7e9beb8934d323540e8?s=128&d=identicon&r=PG", "display_name": "Jeroen Mostert", "link": "https://stackoverflow.com/users/4137916/jeroen-mostert"}, "edited": false, "score": 0, "creation_date": 1504789259, "post_id": 46084030, "comment_id": 79155908, "body": "@JeroenMostert, yes, you are correct.  I just stripped the code in the OP of anything that didn&#39;t pertain to the question"}], "answers": [{"comments": [{"owner": {"reputation": 10230, "user_id": 1418704, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f23297149bdbeb4759cd00c5108f489b?s=128&d=identicon&r=PG", "display_name": "Casey Crookston", "link": "https://stackoverflow.com/users/1418704/casey-crookston"}, "edited": false, "score": 0, "creation_date": 1504730879, "post_id": 46084084, "comment_id": 79130187, "body": "wow, ok, that works. At least, it builds.  I&#39;ll test in a moment.  But, can you explain what this is doing?"}], "tags": [], "owner": {"reputation": 8195, "user_id": 525672, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de3cd2fefafade91d044d08a8399dd8b?s=128&d=identicon&r=PG", "display_name": "gh9", "link": "https://stackoverflow.com/users/525672/gh9"}, "is_accepted": true, "score": 1, "last_activity_date": 1504730966, "last_edit_date": 1592644375, "creation_date": 1504730813, "answer_id": 46084084, "question_id": 46084030, "link": "https://stackoverflow.com/questions/46084030/method-that-returns-a-nullable-generic-type/46084084#46084084", "title": "Method that returns a nullable, generic type", "body": "<p>You need to set the generic constraint  at the class level</p>\n<p><code>public class foo&lt;T&gt; where T : class</code></p>\n<p><code>public T bar(){returns null;}</code> will now compile</p>\n<h1>EDIT explaining why it works</h1>\n<p>When you use generics the compiler doesnt know what type it is. Since there are reference types and non reference types you cannot just return null. Because T needs to work for both reference types and non reference types.</p>\n<p>By stating a constraint that T is a class you are stating it is a reference type and thus can return null.</p>\n<h2>Edit</h2>\n<p>Per the comments the correct way would be</p>\n<p><code>default(T)</code></p>\n<p>I will copy past the reason why and link to the question</p>\n<blockquote>\n<p>Return default(T) which means you'll return null if T is a reference type (or a nullable value type), 0 for int, '\\0' for char etc</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/302096/how-can-i-return-null-from-a-generic-method-in-c\">original question</a></p>\n"}, {"tags": [], "owner": {"reputation": 2687, "user_id": 91714, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c147075cb809d0e3853cb0e77398fc7?s=128&d=identicon&r=PG", "display_name": "Boris Modylevsky", "link": "https://stackoverflow.com/users/91714/boris-modylevsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1504731228, "creation_date": 1504731228, "answer_id": 46084164, "question_id": 46084030, "link": "https://stackoverflow.com/questions/46084030/method-that-returns-a-nullable-generic-type/46084164#46084164", "title": "Method that returns a nullable, generic type", "body": "<p>To return null should mark the T as class and return its default value:</p>\n\n<pre><code>public T GetByID&lt;T&gt;(BaseAPI api) where T: class\n{\n    ....\n    try\n    {\n        var response = (HttpWebResponse)httpRequest.GetResponse();\n        var responseString = new StreamReader(response.GetResponseStream()).ReadToEnd();\n\n        T returnObject = JsonConvert.DeserializeObject&lt;T&gt;(responseString);\n        return returnObject;\n    }\n    catch (Exception ex)\n    {\n        return default(T);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 10230, "user_id": 1418704, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f23297149bdbeb4759cd00c5108f489b?s=128&d=identicon&r=PG", "display_name": "Casey Crookston", "link": "https://stackoverflow.com/users/1418704/casey-crookston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 46084084, "answer_count": 2, "score": 0, "last_activity_date": 1504731228, "creation_date": 1504730605, "question_id": 46084030, "link": "https://stackoverflow.com/questions/46084030/method-that-returns-a-nullable-generic-type", "title": "Method that returns a nullable, generic type", "body": "<p>This is what I'm trying to do:</p>\n\n<pre><code>public T GetByID&lt;T&gt;(BaseAPI api)\n{\n    ....\n    try\n    {\n        var response = (HttpWebResponse)httpRequest.GetResponse();\n        var responseString = new StreamReader(response.GetResponseStream()).ReadToEnd();\n\n        T returnObject = JsonConvert.DeserializeObject&lt;T&gt;(responseString);\n        return returnObject;\n    }\n    catch (Exception ex)\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p>The problem is that the <code>return null</code> line throws an error, which I understand, because <code>T</code> is not nullable.  So, I'm trying to make <code>T</code> be nullable, and I'm not figuring it out.  No matter what I try, I get this:</p>\n\n<blockquote>\n  <p>The type 'T' must be a non-nullable value type in order to use it as parameter 'T' in the generic type or method 'Nullable'</p>\n</blockquote>\n\n<p>I'm trying various forms of this:</p>\n\n<pre><code>public T? GetByID&lt;T&gt;(BaseAPI api)\n{\n    ....\n    try\n    {\n        var response = (HttpWebResponse)httpRequest.GetResponse();\n        var responseString = new StreamReader(response.GetResponseStream()).ReadToEnd();\n\n        T? returnObject = JsonConvert.DeserializeObject&lt;T?&gt;(responseString);\n        return returnObject;\n    }\n    catch (Exception ex)\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p>I've seen a few other threads asking roughly the same question, but none of them have been specific enough to help me get all the way there. <a href=\"https://stackoverflow.com/questions/302096/how-can-i-return-null-from-a-generic-method-in-c?rq=1\">This one</a> is REALLY close, but I'm not getting the answer to work for me.</p>\n"}, {"tags": ["c#", "html", "asp.net-mvc", "string"], "comments": [{"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1504730509, "post_id": 46083990, "comment_id": 79129986, "body": "How are you displaying the values in MVC?  What does your view look like?"}, {"owner": {"reputation": 1122, "user_id": 5885500, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205953414690868/picture?type=large", "display_name": "Aaron Roberts", "link": "https://stackoverflow.com/users/5885500/aaron-roberts"}, "edited": false, "score": 0, "creation_date": 1504730619, "post_id": 46083990, "comment_id": 79130058, "body": "I don&#39;t think the browser is automatically doing this, can you post the view that is producing the table?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8549227"}, "edited": false, "score": 0, "creation_date": 1504730692, "post_id": 46083990, "comment_id": 79130093, "body": "hi thanks i updated my asnwer, please see my edit, thank you both"}], "answers": [{"tags": [], "owner": {"reputation": 1122, "user_id": 5885500, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205953414690868/picture?type=large", "display_name": "Aaron Roberts", "link": "https://stackoverflow.com/users/5885500/aaron-roberts"}, "is_accepted": true, "score": 3, "last_activity_date": 1504730832, "creation_date": 1504730832, "answer_id": 46084086, "question_id": 46083990, "link": "https://stackoverflow.com/questions/46083990/string-with-email-format-turns-into-hyperlink/46084086#46084086", "title": "String with email format turns into Hyperlink", "body": "<p><code>@Html.DisplayFor(...)</code> is determining that the text is an email and is wrapping it in a link.  You can simply use </p>\n\n<pre><code>&lt;td&gt;@item.Email&lt;/td&gt;\n</code></pre>\n\n<p>to display it as text</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8549227"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 46084086, "answer_count": 1, "score": 2, "last_activity_date": 1504740184, "creation_date": 1504730395, "last_edit_date": 1504740184, "question_id": 46083990, "link": "https://stackoverflow.com/questions/46083990/string-with-email-format-turns-into-hyperlink", "title": "String with email format turns into Hyperlink", "body": "<p>Hi this probably is an easy question but i cant find information about how to solve it i have a table with a field named Email and the values are of type string but the problem is that mvc or the browser automatically changes that string email into Hyperlink as shown in the following picture </p>\n\n<p><a href=\"https://i.stack.imgur.com/rwBNL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rwBNL.png\" alt=\"enter image description here\"></a></p>\n\n<p>when i inspect the element it is an hyperlink:</p>\n\n<pre><code>&lt;a href=\"mailto:lacubana@la.com\"&gt;lacubana@la.com&lt;/a&gt;\n</code></pre>\n\n<p>what can i do to only display the emails as string? i don't want that information to be in hyperlink format. thanks very much</p>\n\n<p>Edited: here is my code of the view</p>\n\n<pre><code>&lt;table class=\"table table-bordered table-striped\"&gt;\n    &lt;tr&gt;\n        &lt;th&gt;Email&lt;/th&gt;\n        &lt;th&gt;Contrase\u00f1a&lt;/th&gt;\n        &lt;th&gt;NickName&lt;/th&gt;\n        &lt;th&gt;TipoUsuario&lt;/th&gt;\n        &lt;th&gt;Acciones&lt;/th&gt;\n    &lt;/tr&gt;\n    @foreach (var item in Model)\n    {\n        &lt;tr&gt;\n            &lt;td&gt;@Html.DisplayFor(modelItem =&gt; item.Email)&lt;/td&gt;\n            &lt;td&gt;@Html.DisplayFor(modelItem =&gt; item.Contrase\u00f1a)&lt;/td&gt;\n            &lt;td&gt;@Html.DisplayFor(modelItem =&gt; item.NickName)&lt;/td&gt;\n            @if (item.TipoUsuario == 1)\n            {\n                &lt;td&gt;Administrador&lt;/td&gt;\n            }\n            else\n            {\n                &lt;td&gt;Vendedor&lt;/td&gt;\n            }\n\n\n            &lt;td&gt;\n                @Html.ActionLink(\"Editar\", \"EditarUsuario\", new { id = item.IdUser }) |\n                @Html.ActionLink(\"Eliminar\", \"EliminarUsuario\", new { id = item.IdUser })\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    }\n&lt;/table&gt;\n</code></pre>\n\n<p>and here is the code of my controller:</p>\n\n<pre><code>IList&lt;Usuario&gt; UsuarioList = new List&lt;Usuario&gt;();\n                    var query = from usu in database.ReportingUsersT\n                                where usu.Activo == 1\n                                select usu;\n                    var listdata = query.ToList();\n\n                    foreach (var Usuariodata in listdata)\n                    {\n                        UsuarioList.Add(new Usuario()\n                        {\n                            IdUser = Usuariodata.IdUser,\n                            Email = Usuariodata.Email,\n                            Contrase\u00f1a = Usuariodata.Contrase\u00f1a,\n                            NickName = Usuariodata.NickName,\n                            TipoUsuario = Usuariodata.TipoUsuario\n\n                        });\n                    }\n\n                    return View(UsuarioList);\n</code></pre>\n"}, {"tags": ["c#", "asp.net-web-api2", "odata"], "comments": [{"owner": {"reputation": 95, "user_id": 1244893, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fa3203e8bc6e81f13becbbb8a9948939?s=128&d=identicon&r=PG", "display_name": "user1244893", "link": "https://stackoverflow.com/users/1244893/user1244893"}, "edited": false, "score": 0, "creation_date": 1504974739, "post_id": 46083832, "comment_id": 79227842, "body": "I should have been calling <a href=\"http://localhost/odata/Users(874C0BC3-6D9B-4DFA-B42C-8403FE1B281D)/Default.GetContacts\" rel=\"nofollow noreferrer\">localhost/odata/Users(874C0BC3-6D9B-4DFA-B42C-8403FE1B281D)/&zwnj;&#8203;&hellip;</a>  This also requires a setting in the web.config: &lt;modules runAllManagedModulesForAllRequests=&quot;true&quot; /&gt;"}], "owner": {"reputation": 95, "user_id": 1244893, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fa3203e8bc6e81f13becbbb8a9948939?s=128&d=identicon&r=PG", "display_name": "user1244893", "link": "https://stackoverflow.com/users/1244893/user1244893"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1882, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1606913322, "creation_date": 1504729742, "last_edit_date": 1606913322, "question_id": 46083832, "link": "https://stackoverflow.com/questions/46083832/no-routing-convention-was-found-to-select-an-action-for-the-odata-path-with-temp", "title": "No routing convention was found to select an action for the OData path with template &#39;~/entityset/key/unresolved&#39;", "body": "<p>I have defined a OData function as below:</p>\n\n<pre><code>var function = builder.EntityType&lt;User&gt;().Function(\"GetContacts\").ReturnsCollectionFromEntitySet&lt;Contact&gt;(\"Contacts\");\n</code></pre>\n\n<p>I have then defined a method on my UsersController as below:</p>\n\n<pre><code>[HttpGet]\n[ODataRoute(\"Users({key})/Default.GetContacts()\")]\npublic IHttpActionResult GetContacts([FromODataUri]Guid key)\n{\n    return Ok();\n}\n</code></pre>\n\n<p>On trying to access this from a client:</p>\n\n<p><a href=\"http://localhost/odata/Users(874C0BC3-6D9B-4DFA-B42C-8403FE1B281D)/GetContacts\" rel=\"nofollow noreferrer\">http://localhost/odata/Users(874C0BC3-6D9B-4DFA-B42C-8403FE1B281D)/GetContacts</a></p>\n\n<p>The controller is hit but the method isn't, instead in postman I get back an exception \"No routing convention was found to select an action for the OData path with template '~/entityset/key/unresolved'.\"</p>\n\n<p>I have tried:</p>\n\n<p><a href=\"http://localhost/odata/Users(874C0BC3-6D9B-4DFA-B42C-8403FE1B281D)/GetContacts()\" rel=\"nofollow noreferrer\">http://localhost/odata/Users(874C0BC3-6D9B-4DFA-B42C-8403FE1B281D)/GetContacts()</a></p>\n\n<p>I've removed the explicit setting of the ODataRouteAttribute and relying on the built-in routing convention but still no luck.</p>\n\n<p>I've also tried removing \"Default.\" from the ODataRouteAttribute but this throws a server error when trying to launch the application \"Found an unresolved path segment 'GetContacts()' in the OData path template 'Users({key})/GetContacts()'.\"</p>\n\n<p>Does anybody know what I am doing wrong?  Or is there a way you can show me to debug these types of routing issues so I can solve the problem myself?</p>\n\n<p>Appreciate any help you can give.</p>\n\n<p>p.s. I am using OData v4.</p>\n"}, {"tags": ["c#", "microsoft-graph-api", "msal", "refresh-token"], "answers": [{"comments": [{"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1504758841, "post_id": 46084699, "comment_id": 79137484, "body": "Thanks. I just looked at the topic. Please see my updates question."}, {"owner": {"reputation": 5463, "user_id": 4092015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jskhe.jpg?s=128&g=1", "display_name": "Dan Kershaw - MSFT", "link": "https://stackoverflow.com/users/4092015/dan-kershaw-msft"}, "reply_to_user": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 1, "creation_date": 1504762047, "post_id": 46084699, "comment_id": 79138524, "body": "Will ask someone else to take a look at this."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1504810054, "post_id": 46084699, "comment_id": 79169156, "body": "Have a look here: <a href=\"https://stackoverflow.com/questions/34202782/how-to-get-a-refresh-token-and-access-token-in-office-365-using-php\" title=\"how to get a refresh token and access token in office 365 using php\">stackoverflow.com/questions/34202782/&hellip;</a> The answer provides a link. The wording does not mention defaults there. So articles saying mixed things."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1504810643, "post_id": 46084699, "comment_id": 79169464, "body": "This was it: <a href=\"https://developer.microsoft.com/en-us/graph/docs/concepts/auth_v2_user\" rel=\"nofollow noreferrer\">developer.microsoft.com/en-us/graph/docs/concepts/auth_v2_us&zwnj;&#8203;er</a>"}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1504853971, "post_id": 46084699, "comment_id": 79183317, "body": "If you look at the extracted code for AuthResult it doesn&#39;t even have a property for a refresh token."}, {"owner": {"reputation": 2901, "user_id": 6636967, "user_type": "registered", "profile_image": "https://graph.facebook.com/653628578121261/picture?type=large", "display_name": "Daniel Dobalian", "link": "https://stackoverflow.com/users/6636967/daniel-dobalian"}, "reply_to_user": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1504915206, "post_id": 46084699, "comment_id": 79214379, "body": "@AndrewTruckle as your update suggests, MSAL automatically passes <code>offline_access</code> in all requests and manages all token refreshes for you.  The refresh token is stored in the cache and used internally in MSAL to refresh any expired tokens.  As an abstraction, It is not accessible via the library. Checkout <a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-dotnet/blob/dc3f0656b7f8b8d6f474a8ed19c671dd51626459/src/Microsoft.Identity.Client/AuthenticationResult.cs\" rel=\"nofollow noreferrer\">all the available fields in the source</a>, and can open an issue on the library if you believe it should be exposed!"}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "reply_to_user": {"reputation": 2901, "user_id": 6636967, "user_type": "registered", "profile_image": "https://graph.facebook.com/653628578121261/picture?type=large", "display_name": "Daniel Dobalian", "link": "https://stackoverflow.com/users/6636967/daniel-dobalian"}, "edited": false, "score": 0, "creation_date": 1504959434, "post_id": 46084699, "comment_id": 79223289, "body": "@DanielDobalian All I know is that after the access token has expired I will always be prompted for credentials. So what you say doesn&#39;t make sense to me in my situation."}, {"owner": {"reputation": 2901, "user_id": 6636967, "user_type": "registered", "profile_image": "https://graph.facebook.com/653628578121261/picture?type=large", "display_name": "Daniel Dobalian", "link": "https://stackoverflow.com/users/6636967/daniel-dobalian"}, "edited": false, "score": 0, "creation_date": 1505258076, "post_id": 46084699, "comment_id": 79335935, "body": "There could be an issue with your token cache or how you&#39;re making library calls. Can you update your question (or post a new one) with the MSAL and token cache code?"}], "tags": [], "owner": {"reputation": 5463, "user_id": 4092015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jskhe.jpg?s=128&g=1", "display_name": "Dan Kershaw - MSFT", "link": "https://stackoverflow.com/users/4092015/dan-kershaw-msft"}, "is_accepted": false, "score": 0, "last_activity_date": 1504733759, "creation_date": 1504733759, "answer_id": 46084699, "question_id": 46083816, "link": "https://stackoverflow.com/questions/46083816/unable-to-locate-the-refresh-token-with-microsoft-graph/46084699#46084699", "title": "Unable to locate the refresh token with Microsoft Graph", "body": "<p>I believe when using MSAL (and the v2 auth endpoint) that you don't get a refresh token by default.  To get the refresh token you need to request the <code>offline_access</code> scope as well as the other scopes. Please see <a href=\"https://developer.microsoft.com/en-us/graph/docs/concepts/permissions_reference#openid-permissions\" rel=\"nofollow noreferrer\">https://developer.microsoft.com/en-us/graph/docs/concepts/permissions_reference#openid-permissions</a> for more details.</p>\n\n<p>Hope this helps,</p>\n"}, {"tags": [], "owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "is_accepted": true, "score": 0, "last_activity_date": 1505822051, "last_edit_date": 1505822051, "creation_date": 1505821645, "answer_id": 46299637, "question_id": 46083816, "link": "https://stackoverflow.com/questions/46083816/unable-to-locate-the-refresh-token-with-microsoft-graph/46299637#46299637", "title": "Unable to locate the refresh token with Microsoft Graph", "body": "<p>Microsoft provide sample code for <a href=\"https://github.com/Azure-Samples/active-directory-dotnet-desktop-msgraph-v2/blob/master/active-directory-wpf-msgraph-v2/TokenCacheHelper.cs\" rel=\"nofollow noreferrer\">TokenCacheHelper</a>.</p>\n\n<p>Add that to your project and provide an instance of it. Then, set the path. Like this:</p>\n\n<pre><code>TokenCacheHelper.CacheFilePath = Program.Options.TokenCachePath;\nPublicClientApp = new PublicClientApplication(_AppID, \"https://login.microsoftonline.com/common\", TokenCacheHelper.GetUserCache());\n</code></pre>\n\n<p>That is all you need to do. The cache file contains all the token details, including the refresh token.</p>\n\n<p>More details are in the conversation <a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-dotnet/issues/467#issuecomment-328356602\" rel=\"nofollow noreferrer\">here</a>. In part:</p>\n\n<blockquote>\n  <p>As far as helping you to implement the token cache, to store the content of the token cache,\n  you need to:</p>\n  \n  <ol>\n  <li>Copy the <a href=\"https://github.com/Azure-Samples/active-directory-dotnet-desktop-msgraph-v2/blob/master/active-directory-wpf-msgraph-v2/TokenCacheHelper.cs\" rel=\"nofollow noreferrer\">TokenCacheHelper</a> from here to your project.</li>\n  <li>If you really want to save the content of the cache to the registry,\n  change the implementation of:\n  \n  <ul>\n  <li><code>AfterAccessNotification</code> to write to the\n  registry instead of a file <a href=\"https://github.com/Azure-Samples/active-directory-dotnet-desktop-msgraph-v2/blob/master/active-directory-wpf-msgraph-v2/TokenCacheHelper.cs#L79\" rel=\"nofollow noreferrer\">this line</a></li>\n  <li><code>BeforeAccessNotification</code> to read\n  fromthe registry instead of a file <a href=\"https://github.com/Azure-Samples/active-directory-dotnet-desktop-msgraph-v2/blob/master/active-directory-wpf-msgraph-v2/TokenCacheHelper.cs#L66\" rel=\"nofollow noreferrer\">this line</a></li>\n  </ul></li>\n  <li><p>Construct the\n  <code>PublicClientApplication</code> your as shown here (passing the cache that you\n  get by calling <code>TokenCacheHelper.GetUserCache()</code>:\n  <a href=\"https://github.com/Azure-Samples/active-directory-dotnet-desktop-msgraph-v2/blob/master/active-directory-wpf-msgraph-v2/App.xaml.cs#L19\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/active-directory-dotnet-desktop-msgraph-v2/blob/master/active-directory-wpf-msgraph-v2/App.xaml.cs#L19</a>:</p>\n  \n  <p><code>clientApp = new PublicClientApplication(ClientId, \"https://login.microsoftonline.com/common\", TokenCacheHelper.GetUserCache());</code></p></li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "accepted_answer_id": 46299637, "answer_count": 2, "score": 0, "last_activity_date": 1505822051, "creation_date": 1504729681, "last_edit_date": 1504758798, "question_id": 46083816, "link": "https://stackoverflow.com/questions/46083816/unable-to-locate-the-refresh-token-with-microsoft-graph", "title": "Unable to locate the refresh token with Microsoft Graph", "body": "<p>I was looking <a href=\"https://developer.microsoft.com/en-us/graph/docs/concepts/auth_v2_user\" rel=\"nofollow noreferrer\">here</a> about <strong>refresh tokens</strong>.</p>\n\n<p>I have this code to get a access token:</p>\n\n<pre><code>if(bPromptUser)\n{\n    _AuthResult = await PublicClientApp.AcquireTokenAsync(_scopes); //Opens Microsoft Login Screen\n\n    using (RegistryKey key = Registry.CurrentUser.CreateSubKey(keyName))\n    {\n        key.OpenSubKey(keyName, true);\n        key.SetValue(\"Status\", _AuthResult.AccessToken);\n        key.SetValue(\"Expire\", _AuthResult.ExpiresOn.ToLocalTime().ToString());\n        key.Close();\n\n        token = _AuthResult.AccessToken;\n    }\n\n    // Append the access token to the request.\n    requestMessage.Headers.Authorization = new AuthenticationHeaderValue(\"bearer\", token);\n}\n</code></pre>\n\n<p>But my <code>_AuthResult</code> doesn't actually have a <code>RefreskToken</code> in the list. Is this because I am using v1 of <strong>Microsoft Graph</strong>?</p>\n\n<h1>Update</h1>\n\n<p>According to the documentation the scope suggested in the answer is on by default?</p>\n\n<p><img src=\"https://i.stack.imgur.com/prf2x.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c#", "mongodb", "linq"], "comments": [{"owner": {"reputation": 1359, "user_id": 1073358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP15K.jpg?s=128&g=1", "display_name": "Skami", "link": "https://stackoverflow.com/users/1073358/skami"}, "edited": false, "score": 0, "creation_date": 1505738965, "post_id": 46083740, "comment_id": 79522279, "body": "Wouldn&#39;t <code>var query = collection.AsQueryable().Where(filter.Compile()).ToString();</code> be the solution?"}, {"owner": {"reputation": 129, "user_id": 1426862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb8cdd4c82d0ff6e2091f2c46076368a?s=128&d=identicon&r=PG", "display_name": "Adam P", "link": "https://stackoverflow.com/users/1426862/adam-p"}, "reply_to_user": {"reputation": 1359, "user_id": 1073358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP15K.jpg?s=128&g=1", "display_name": "Skami", "link": "https://stackoverflow.com/users/1073358/skami"}, "edited": false, "score": 0, "creation_date": 1506085030, "post_id": 46083740, "comment_id": 79690180, "body": "Hi Skami, In this case when I call ToString() on my collection, in the way you have above, I get  <code>System.Linq.Enumerable+WhereEnumerableIterator&#39;1[&lt;MyType&gt;]</code>  I am looking for the query that will be sent to Mongo."}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "reply_to_user": {"reputation": 1359, "user_id": 1073358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP15K.jpg?s=128&g=1", "display_name": "Skami", "link": "https://stackoverflow.com/users/1073358/skami"}, "edited": false, "score": 0, "creation_date": 1506085680, "post_id": 46083740, "comment_id": 79690605, "body": "@Skami that only works with Entity Framework LINQ providers."}, {"owner": {"reputation": 1359, "user_id": 1073358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP15K.jpg?s=128&g=1", "display_name": "Skami", "link": "https://stackoverflow.com/users/1073358/skami"}, "edited": false, "score": 0, "creation_date": 1506085692, "post_id": 46083740, "comment_id": 79690613, "body": "@Adam P, that&#39;s odd. Whenever I run <code>var query = this.collection.AsQueryable().Where(x =&gt; x.id == 1).ToString();</code>  I get this as a result <code>aggregate([{ &quot;$match&quot; : { &quot;_id&quot; : 1 } }])</code>."}, {"owner": {"reputation": 1359, "user_id": 1073358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP15K.jpg?s=128&g=1", "display_name": "Skami", "link": "https://stackoverflow.com/users/1073358/skami"}, "reply_to_user": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1506094100, "post_id": 46083740, "comment_id": 79696034, "body": "@Amy, <a href=\"https://github.com/mongodb/mongo-csharp-driver/blob/e7f872afc0b620d6540af70d8a0f6d7b25ee82bd/tests/MongoDB.Driver.Tests/Linq/MongoQueryableEnumComparedToEnumTests.cs#L45\" rel=\"nofollow noreferrer\">according to the source code itself that&#39;s not true</a>."}, {"owner": {"reputation": 129, "user_id": 1426862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb8cdd4c82d0ff6e2091f2c46076368a?s=128&d=identicon&r=PG", "display_name": "Adam P", "link": "https://stackoverflow.com/users/1426862/adam-p"}, "reply_to_user": {"reputation": 1359, "user_id": 1073358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP15K.jpg?s=128&g=1", "display_name": "Skami", "link": "https://stackoverflow.com/users/1073358/skami"}, "edited": false, "score": 0, "creation_date": 1506094566, "post_id": 46083740, "comment_id": 79696314, "body": "@Skami Thanks for that link, I can clearly see I <b>should</b> be able to use .ToString()  Right now I am unsure why I can&#39;t. I am using v2.4 - not sure if that is related. I will continue to investigate."}, {"owner": {"reputation": 1359, "user_id": 1073358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP15K.jpg?s=128&g=1", "display_name": "Skami", "link": "https://stackoverflow.com/users/1073358/skami"}, "edited": false, "score": 0, "creation_date": 1506094818, "post_id": 46083740, "comment_id": 79696455, "body": "@AdamP, maybe if you show a bit more code we could help you."}, {"owner": {"reputation": 129, "user_id": 1426862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb8cdd4c82d0ff6e2091f2c46076368a?s=128&d=identicon&r=PG", "display_name": "Adam P", "link": "https://stackoverflow.com/users/1426862/adam-p"}, "edited": false, "score": 0, "creation_date": 1506095399, "post_id": 46083740, "comment_id": 79696747, "body": "Was just getting that together, gonna update the original post."}], "answers": [{"tags": [], "owner": {"reputation": 1359, "user_id": 1073358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PP15K.jpg?s=128&g=1", "display_name": "Skami", "link": "https://stackoverflow.com/users/1073358/skami"}, "is_accepted": false, "score": 1, "last_activity_date": 1506257702, "creation_date": 1506257702, "answer_id": 46390256, "question_id": 46083740, "link": "https://stackoverflow.com/questions/46083740/visualizing-mongodb-c-linq-query-for-driver-version-2-4/46390256#46390256", "title": "Visualizing MongoDB C# Linq query for Driver version 2.4", "body": "<p>Okay so after reading your update I believe I may have found the solution to your problem.\nMongo has no overload for the compiled version of your predicate which returns a <code>Func&lt;MediaItem, bool&gt;</code>, however there is as expected an overload for <a href=\"https://github.com/mongodb/mongo-csharp-driver/blob/18d204a046373bdceb32f2e17030d3ca8fa12d59/src/MongoDB.Driver/Linq/MongoQueryable.cs#L2810\" rel=\"nofollow noreferrer\"><code>[Expression&lt;Func&lt;MediaItem, bool&gt;&gt;</code></a>.</p>\n\n<p>So the following code should work for you.</p>\n\n<pre><code>var sfilter = PredicateBuilder.True&lt;MediaItem&gt;();\nvar sTest = collection.AsQueryable().Where(sfilter).Where(f =&gt; f.MediaItemType == MediaItemTypes.Image);\nvar sString = sTest.ToString();\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 1426862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb8cdd4c82d0ff6e2091f2c46076368a?s=128&d=identicon&r=PG", "display_name": "Adam P", "link": "https://stackoverflow.com/users/1426862/adam-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506257702, "creation_date": 1504729297, "last_edit_date": 1506095498, "question_id": 46083740, "link": "https://stackoverflow.com/questions/46083740/visualizing-mongodb-c-linq-query-for-driver-version-2-4", "title": "Visualizing MongoDB C# Linq query for Driver version 2.4", "body": "<p>I\u2019m working with the 2.4 version of the C# Mongo Driver. I have found a lot of traffic on how to visualize (or explain) a query for previous versions or legacy C# Mongo Driver support. I\u2019m not having any luck understanding how to see the native Mongo query behind my version 2.4 Linq.\nIn my specific case I am using PredicateBuilder to build a complex expression, which I then pass into the collection like this:  </p>\n\n<pre><code>var s = collection.AsQueryable().Where(filter.Compile());\n</code></pre>\n\n<p>After that I can further refine the query as needed by adding skip, take, etc. Finally I can call .ToArray() and the query executes.</p>\n\n<p>I have tried to enable \u201c--profile 2 --slowms 15\u201d on my Mongod instance, and I have verified that the profile level is 2 with db.getProfilingLevel(). I can clearly see logged queries when running adhoc queries via RoboMongo, or even when using the collection.find method from the c# Mongo 2.4 driver. </p>\n\n<p>However, when I call .ToArray on my Linq query I cannot find the query sent to Mongo either though a logging method I know, or though some aspect of the c# driver itself.</p>\n\n<p>If I instead rework my code to use BsonDocuments and the builder object, I can see the query \u2013 but I\u2019d rather use Linq.</p>\n\n<p>Can anyone help me to see the underlying query being sent to Mongo while using Linq and the Mongo 2.4 C# driver?</p>\n\n<p>Relevant URL: \n<a href=\"http://mongodb.github.io/mongo-csharp-driver/2.4/reference/driver/crud/linq/\" rel=\"nofollow noreferrer\">http://mongodb.github.io/mongo-csharp-driver/2.4/reference/driver/crud/linq/</a>\n<a href=\"http://mongodb.github.io/mongo-csharp-driver/2.4/reference/driver/crud/reading/#aggregation\" rel=\"nofollow noreferrer\">http://mongodb.github.io/mongo-csharp-driver/2.4/reference/driver/crud/reading/#aggregation</a></p>\n\n<p>Notice for the 'reading section' there is a Note that explains you can call ToString on the pipeline to see what will be sent to the server. I can access the pipeline when using the BsonDocuments/Builder method of creating a query, but not when I use the Linq method.</p>\n\n<p><strong>Update</strong>: This seems to be related to filter.compile. If I don't use that, I can use .ToString() to view the query!</p>\n\n<pre><code>var sfilter = PredicateBuilder.True&lt;MediaItem&gt;();\nvar sTest = collection.AsQueryable().Where(sfilter.Compile()).Where(f =&gt; f.MediaItemType == MediaItemTypes.Image);\nvar sString = sTest.ToString();\n// System.Linq.Enumerable+WhereEnumerableIterator'1[Common.Domain.MediaItem]\n\nvar xTest = collection.AsQueryable().Where(f =&gt; f.MediaItemType == MediaItemTypes.Image);\nvar xString = xTest.ToString();\n// aggregate([{ \"$match\" : { \"MediaItemType\" : 1 } }])\n</code></pre>\n\n<p>The definition of PredicateBuilder.True:</p>\n\n<pre><code>public static Expression&lt;Func&lt;T, bool&gt;&gt; True&lt;T&gt;()\n{\n    return f =&gt; true;\n}\n</code></pre>\n"}, {"tags": ["java", "c#", "encryption", "hmac", "pbkdf2"], "comments": [{"owner": {"reputation": 5258, "user_id": 3162724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/833457f6ec5ea62785cd84e0c312a8a4?s=128&d=identicon&r=PG", "display_name": "Niladri", "link": "https://stackoverflow.com/users/3162724/niladri"}, "edited": false, "score": 0, "creation_date": 1504730466, "post_id": 46083712, "comment_id": 79129965, "body": "the java sample uses the base64 encoded SecretKey object <code>tmp</code> to create another secret key, have you tried to use the base64 encoded <code>secret</code> variable in your C# code as password to generate another secret key?"}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 2, "creation_date": 1504736458, "post_id": 46083712, "comment_id": 79132365, "body": "For <code>PBEKeySpec</code> in java the size is in units of bits, while for C# code it is in units of bytes. This, if you want AES-256, size should be 256 for Java but only 32 for C#."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 1, "creation_date": 1504740715, "post_id": 46083712, "comment_id": 79133496, "body": "1. It is easier to see differences in hex vs Base64. 2. If the outputs are different length the size specification is probably or derivation information to the output. or one implementation is adding . 3. Add the outputs, in hex, to the question. 4. API authors like to make things mysterious by not specifying little things like bits or bytes and defaults. They like to show their superiority over mere users."}, {"owner": {"reputation": 364, "user_id": 1027020, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7ba0748f46fe85ebf72133055d9ce7a?s=128&d=identicon&r=PG", "display_name": "Karis", "link": "https://stackoverflow.com/users/1027020/karis"}, "edited": false, "score": 0, "creation_date": 1504800241, "post_id": 46083712, "comment_id": 79164097, "body": "Changing the size worked! Thank you. I missed the bit/byte part."}], "owner": {"reputation": 364, "user_id": 1027020, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7ba0748f46fe85ebf72133055d9ce7a?s=128&d=identicon&r=PG", "display_name": "Karis", "link": "https://stackoverflow.com/users/1027020/karis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 3, "answer_count": 0, "score": 1, "last_activity_date": 1504729161, "creation_date": 1504729161, "question_id": 46083712, "link": "https://stackoverflow.com/questions/46083712/translating-java-256-bit-password-based-encryption-to-c", "title": "Translating Java 256 bit password based encryption to C#", "body": "<p>I need to implement an API in C# that'll encrypt secrets identically to the API written in java.</p>\n\n<p>The Java code looks like this</p>\n\n<pre><code>SecretKeyFactory factory = SecretKeyFactory.getInstance(\"PBKDF2WithHmacSHA256\");\nKeySpec spec = new PBEKeySpec(password, salt, iteration, size);\nSecretKey tmp = factory.generateSecret(spec);\nSecretKey secret = new SecretKeySpec(tmp.getEncoded(), \"HmacSHA256\");\n</code></pre>\n\n<p>My attempt on C# code looks like this</p>\n\n<pre><code>var secret = KeyDerivation.Pbkdf2(\n    password, salt, KeyDerivationPrf.HMACSHA256, iteration, size);\n</code></pre>\n\n<p>When I compare the generated secrets, converted the to base 64, they're not the same. Their length are couple hundreds characters off as well.</p>\n\n<p>What's missing from the C# code to generate the same secret as the Java API?</p>\n"}, {"tags": ["c#", "wpf", "mousecapture"], "comments": [{"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 0, "creation_date": 1504729168, "post_id": 46083702, "comment_id": 79129320, "body": "Why does the TextBox have to be responsible for this?"}, {"owner": {"reputation": 566, "user_id": 487909, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/lrhhE.gif?s=128&g=1", "display_name": "Hypersapien", "link": "https://stackoverflow.com/users/487909/hypersapien"}, "reply_to_user": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 0, "creation_date": 1504729368, "post_id": 46083702, "comment_id": 79129417, "body": "I have a label that you double-click on. When that happens, the label hides and a TextBox with the same text unhides, so the user can edit the text. If the user clicks anywhere other than the TextBox without hitting Enter, the text is restored, the TextBox is hidden again, and the Label is made visible again."}, {"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 0, "creation_date": 1504729478, "post_id": 46083702, "comment_id": 79129463, "body": "I think what you want is to put the TextBox in a <code>Popup</code>. <code>Popup</code> does what you want automatically, by default: Click outside it, it goes away. You can bind its IsOpen property or handle its Closed event if you want to unhide the Label when it closes.  The WPF team already did all the miserable work you&#39;re trying to do here; let their code handle the ugly details."}], "answers": [{"comments": [{"owner": {"reputation": 400, "user_id": 8557595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D0lqQ.png?s=128&g=1", "display_name": "Tom Schardt", "link": "https://stackoverflow.com/users/8557595/tom-schardt"}, "edited": false, "score": 0, "creation_date": 1504733903, "post_id": 46084599, "comment_id": 79131500, "body": "I like the LostFocus approach - even if there is no other control to get focus this sounds like the only right way"}], "tags": [], "owner": {"reputation": 126, "user_id": 5499015, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153555923201005/picture?type=large", "display_name": "RJ Thompson", "link": "https://stackoverflow.com/users/5499015/rj-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1504733322, "creation_date": 1504733322, "answer_id": 46084599, "question_id": 46083702, "link": "https://stackoverflow.com/questions/46083702/using-mouse-capture-to-detect-a-click-outside-of-a-given-control/46084599#46084599", "title": "Using Mouse.Capture to detect a click outside of a given control", "body": "<p>You could instead use LostFocus / LostKeyboardFocus but there has to be another element on the window that can get focus.  </p>\n\n<p>Second approach that does more what you what exactly ( yet doesn't make total sense) would be to attach to the global mouse down. <a href=\"https://stackoverflow.com/questions/13232714/intercept-every-mouse-click-to-wpf-application\">Intercept every mouse click to WPF application</a></p>\n\n<p>then on that one do a hittest and determine what is underneath.<a href=\"https://msdn.microsoft.com/en-us/library/ms608753(v=vs.110).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/ms608753(v=vs.110).aspx</a></p>\n"}], "owner": {"reputation": 566, "user_id": 487909, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/lrhhE.gif?s=128&g=1", "display_name": "Hypersapien", "link": "https://stackoverflow.com/users/487909/hypersapien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504733322, "creation_date": 1504729115, "question_id": 46083702, "link": "https://stackoverflow.com/questions/46083702/using-mouse-capture-to-detect-a-click-outside-of-a-given-control", "title": "Using Mouse.Capture to detect a click outside of a given control", "body": "<p>I have a TextBox in a WPF project where I am trying to detect a mouse click anywhere on the Application other than in the TextBox. </p>\n\n<p>Here is the code that I have so far.</p>\n\n<pre><code>System.Windows.Input.MouseButtonEventHandler clickOutsideHandler;\n\npublic MyClass() {\n    clickOutsideHandler = new System.Windows.Input.MouseButtonEventHandler(HandleClickOutsideOfControl);\n}\n\nprivate void StartCapture() {\n    System.Windows.Input.Mouse.Capture(TextBox1, System.Windows.Input.CaptureMode.SubTree);\n    AddHandler(System.Windows.Input.Mouse.PreviewMouseDownOutsideCapturedElementEvent, clickOutsideHandler, true);\n}\n\nprivate void HandleClickOutsideOfControl(object sender, System.Windows.Input.MouseButtonEventArgs e) {\n    ReleaseMouseCapture();\n    RemoveHandler(System.Windows.Input.Mouse.PreviewMouseDownOutsideCapturedElementEvent, clickOutsideHandler);\n}\n</code></pre>\n\n<p>The problem I'm having is that the event handler never gets called. I've tried capturing the return value of the Capture() function, but it shows as true. Can anyone show me what I'm doing wrong?</p>\n"}, {"tags": ["c#", "asp.net", "asp.net-mvc", "cookies", "asp.net-core"], "comments": [{"owner": {"reputation": 326, "user_id": 4050193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZtXkV.jpg?s=128&g=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4050193/jack"}, "edited": false, "score": 0, "creation_date": 1504733160, "post_id": 46083598, "comment_id": 79131193, "body": "Cookies are not stored between applications. In order to do this, you will have to use something like IdentityServer4: <a href=\"http://docs.identityserver.io/en/release/\" rel=\"nofollow noreferrer\">docs.identityserver.io/en/release</a>"}, {"owner": {"reputation": 5363, "user_id": 2588374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16c7f89aef99ff0fb791c6d5cd7671d?s=128&d=identicon&r=PG", "display_name": "Tratcher", "link": "https://stackoverflow.com/users/2588374/tratcher"}, "edited": false, "score": 0, "creation_date": 1504755768, "post_id": 46083598, "comment_id": 79136778, "body": "More specifically cookies are not shared across domains. Are both of your apps under the same domain? Are the apps using different versions of ASP.NET Core? There&#39;s a known issue with DataProtection that can break across versions."}, {"owner": {"reputation": 58, "user_id": 7543777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2835a47b9f39ba498dc4baa04649ad00?s=128&d=identicon&r=PG&f=1", "display_name": "Wajahat Ali Abid", "link": "https://stackoverflow.com/users/7543777/wajahat-ali-abid"}, "edited": false, "score": 1, "creation_date": 1504758188, "post_id": 46083598, "comment_id": 79137320, "body": "For now, both apps are on different local host ports. Both are using asp.net core 2.0. They both are in same solution."}], "owner": {"reputation": 58, "user_id": 7543777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2835a47b9f39ba498dc4baa04649ad00?s=128&d=identicon&r=PG&f=1", "display_name": "Wajahat Ali Abid", "link": "https://stackoverflow.com/users/7543777/wajahat-ali-abid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 601, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505923038, "creation_date": 1504728714, "question_id": 46083598, "link": "https://stackoverflow.com/questions/46083598/asp-net-core-2-0-identity-with-cookies", "title": "Asp.net Core 2.0 identity with cookies", "body": "<p>I referred to article <a href=\"https://docs.microsoft.com/en-us/aspnet/core/security/data-protection/compatibility/cookie-sharing\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/aspnet/core/security/data-protection/compatibility/cookie-sharing</a> and I want to make sure two of my asp.net core apps can login at the same time. I am using asp.net identity and same database for identity. \nBy following the instructions on article, I added this in Startup.cs of both web applications.\nIn ConfigureServices method:</p>\n\n<pre><code>services.AddAuthentication()\n            .AddCookie(\"ApplicationCookie\",options =&gt;\n            {\n                var protectionProvider = DataProtectionProvider.Create(new DirectoryInfo(@\"c:\\shared-auth-ticket-keys\\\"));\n                options.DataProtectionProvider = protectionProvider;\n                options.TicketDataFormat = new TicketDataFormat(protectionProvider.CreateProtector(\"Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationMiddleware\", \"Cookies\", \"v2\"));\n            });\n</code></pre>\n\n<p>and this line in Configure method:</p>\n\n<pre><code>app.UseAuthentication();\n</code></pre>\n\n<p>But when I log in one application, it doesn't login other application. If I login from other application, it logouts from first application. Can anyone guide me what I am doing wrong here and how I can fix it?\nOther than this change, I added this line in Login (get) action</p>\n\n<pre><code>if (_signInManager.IsSignedIn(User))\n        {\n            return RedirectToLocal(returnUrl);\n        }\n</code></pre>\n\n<p>Other than this, all other code is same as default template with individual user accounts for both applications. </p>\n"}, {"tags": ["c#", "asp.net"], "comments": [{"owner": {"reputation": 12758, "user_id": 881798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9t68n.jpg?s=128&g=1", "display_name": "vendettamit", "link": "https://stackoverflow.com/users/881798/vendettamit"}, "edited": false, "score": 4, "creation_date": 1504729090, "post_id": 46083596, "comment_id": 79129281, "body": "<code>ReplyTo</code> will only take one email. Use <code>cc</code> to copy other email."}, {"owner": {"reputation": 2865, "user_id": 514449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7923daad889828d47db749580f070b58?s=128&d=identicon&r=PG&f=1", "display_name": "ASpirin", "link": "https://stackoverflow.com/users/514449/aspirin"}, "edited": false, "score": 1, "creation_date": 1504730399, "post_id": 46083596, "comment_id": 79129940, "body": "Use <code>ReplyToList</code> to put more than one email address"}], "answers": [{"tags": [], "owner": {"reputation": 2865, "user_id": 514449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7923daad889828d47db749580f070b58?s=128&d=identicon&r=PG&f=1", "display_name": "ASpirin", "link": "https://stackoverflow.com/users/514449/aspirin"}, "is_accepted": false, "score": 4, "last_activity_date": 1504731341, "creation_date": 1504731341, "answer_id": 46084201, "question_id": 46083596, "link": "https://stackoverflow.com/questions/46083596/include-two-email-addresses-in-mailmessage-replyto/46084201#46084201", "title": "Include two email addresses in mailmessage.replyto", "body": "<p>Use ReplyToList to put more than one email address</p>\n\n<pre><code>mailMessage.ReplyToList.Add(new MailAddress(\"abc@qwe.com\"));\nmailMessage.ReplyToList.Add(new MailAddress(\"asd@asd.cvb\"));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>mailMessage.ReplyToList.Add(\"abc@qwe.com\");\nmailMessage.ReplyToList.Add(\"asd@asd.cvb\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8219681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f43deb7c2887f509db8ab9808363fe?s=128&d=identicon&r=PG&f=1", "display_name": "john smith", "link": "https://stackoverflow.com/users/8219681/john-smith"}, "edited": false, "score": 0, "creation_date": 1504812595, "post_id": 46088727, "comment_id": 79170347, "body": "&#39;System.Net.Mail.MailMessage&#39; does not contain a definition for &#39;ReplyToList&#39; and no extension method &#39;ReplyToList&#39; accepting a first argument of type &#39;System.Net.Mail.MailMessage&#39; could be found"}], "tags": [], "owner": {"reputation": 1, "user_id": 7778828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4378965d40fdf44de413af69dc83cd4a?s=128&d=identicon&r=PG&f=1", "display_name": "saravanan", "link": "https://stackoverflow.com/users/7778828/saravanan"}, "is_accepted": false, "score": 0, "last_activity_date": 1504763398, "creation_date": 1504763398, "answer_id": 46088727, "question_id": 46083596, "link": "https://stackoverflow.com/questions/46083596/include-two-email-addresses-in-mailmessage-replyto/46088727#46088727", "title": "Include two email addresses in mailmessage.replyto", "body": "<pre><code>To reply more than one email address use the below code\n\nstring  m_replyTo = \"abc@qwe.com, asd@asd.cvb\";\n\n                if (!String.IsNullOrEmpty(m_replyTo))\n                {\n                    foreach (var address in m_replyTo.Split(new[] { \";\" }, StringSplitOptions.RemoveEmptyEntries))\n                    {\n                        mailMessage.ReplyToList.Add(address);\n                    }\n                }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8219681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f43deb7c2887f509db8ab9808363fe?s=128&d=identicon&r=PG&f=1", "display_name": "john smith", "link": "https://stackoverflow.com/users/8219681/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1504763398, "creation_date": 1504728707, "question_id": 46083596, "link": "https://stackoverflow.com/questions/46083596/include-two-email-addresses-in-mailmessage-replyto", "title": "Include two email addresses in mailmessage.replyto", "body": "<p>I have the following code in my mailmanager.cs:</p>\n\n<pre><code>m_replyTo=\"abc@qwe.com, asd@asd.cvb\"\n\nif (!String.IsNullOrEmpty(m_replyTo))\n                {\n                    mailMessage.ReplyTo = new MailAddress(m_replyTo);\n                }\n</code></pre>\n\n<p>I see that mailmessage.replyto is only taking the first email address. How can i have it take both?</p>\n"}, {"tags": ["c#", "asp.net", "asp.net-core", "asp.net-core-1.0", "asp.net-core-1.1"], "comments": [{"owner": {"reputation": 1122, "user_id": 5885500, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205953414690868/picture?type=large", "display_name": "Aaron Roberts", "link": "https://stackoverflow.com/users/5885500/aaron-roberts"}, "edited": false, "score": 0, "creation_date": 1504729581, "post_id": 46083537, "comment_id": 79129511, "body": "A .net core web application does not use <code>.aspx</code> files but rather it uses <code>.cshtml</code> views.  Can you elaborate on what you are looking for?"}], "owner": {"reputation": 11, "user_id": 6392106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0289d31a2a203011fa43905a8e35fa00?s=128&d=identicon&r=PG&f=1", "display_name": "A.Sush", "link": "https://stackoverflow.com/users/6392106/a-sush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1504728477, "creation_date": 1504728477, "question_id": 46083537, "link": "https://stackoverflow.com/questions/46083537/net-core-and-aspx-404-is-it-possible-to-host-aspx-files-and-bring-them-in-with", "title": "NET.CORE and ASPX 404. Is it possible to host aspx files and bring them in with iframes in net core wwwroot folder", "body": "<p>Fairly new to net core as we are currently migrating from .NET environment. Is there a way to add a folder(or simply drop aspx files into wwwroot of web app) and have it run side by side so url structure doesn't break.</p>\n\n<p>I have even tried to add a folder with a sample file in wwwroot called <strong>test/test.html</strong> and it load fine <strong>BUT</strong> adding an aspx within the same folder and trying to run it returns 404 (<strong>test/file.aspx</strong>) yet the file is physically there?</p>\n\n<p>The compilation and configuration is very standard of a plain project net core 1.1 web app and is enabled to use static files as test.html works, any ideas suggestions?</p>\n"}, {"tags": ["c#", "wpf"], "comments": [{"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 0, "creation_date": 1504728660, "post_id": 46083516, "comment_id": 79129062, "body": "<i>&quot;the line string fileName = ((MenuItem)sender).Name; fails&quot;</i> -- can you describe exactly what fails about it? Why are you using <code>Name</code> instead of <code>Tag</code> or <code>DataContext</code>?"}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "reply_to_user": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 0, "creation_date": 1504728754, "post_id": 46083516, "comment_id": 79129118, "body": "Ah, after fixing a typo, the error is actually: <code>Could not find file bin&#47;release&#47;ONE</code>, It should be looking for <code>bin&#47;release&#47;Settings&#47;layouts&#47;ONE</code>. Do I adjust the <code>Name=</code> to the full path? Thank you"}, {"owner": {"reputation": 23502, "user_id": 175070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7266ccba60891b8e94000b6d0004e1?s=128&d=identicon&r=PG", "display_name": "Mike Strobel", "link": "https://stackoverflow.com/users/175070/mike-strobel"}, "edited": false, "score": 3, "creation_date": 1504728980, "post_id": 46083516, "comment_id": 79129218, "body": "The rules for element names in WPF are stricter than the rules for paths and file names.  For example, I don&#39;t believe element names can contain spaces.  Perhaps you should use <code>Tag</code> instead.  And yes, you need to be attaching the full path (or at least the relative path) and not just the file name."}, {"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 1, "creation_date": 1504729108, "post_id": 46083516, "comment_id": 79129295, "body": "@anti 1. Don&#39;t use <code>Name</code>. Use <code>Tag</code>. 2. Clearly, if you had to pass a relative path to <code>Directory.GetFiles()</code>, the files aren&#39;t in the current working directory. So yes, you need to pass a path to the actual file if you want to open it."}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1504729179, "post_id": 46083516, "comment_id": 79129323, "body": "Thank you! using <code>string fileName = ((MenuItem)sender).Tag;</code> gives me <code>cannot convert type&#39; object&#39; to &#39;string&#39;</code>"}, {"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 0, "creation_date": 1504729228, "post_id": 46083516, "comment_id": 79129350, "body": "So cast it, just like you had to cast <code>sender</code> from <code>object</code> to <code>MenuItem</code>: <code>string fileName = (string)((MenuItem)sender).Tag;</code>"}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1504729230, "post_id": 46083516, "comment_id": 79129352, "body": "Ah sorry, obviously <code>string fileName = ((MenuItem)sender).Tag.ToString();</code>"}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1504729251, "post_id": 46083516, "comment_id": 79129363, "body": ".. or your way. :)"}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1504729271, "post_id": 46083516, "comment_id": 79129371, "body": "Success! Thank you both for your time."}], "answers": [{"tags": [], "owner": {"reputation": 23502, "user_id": 175070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7266ccba60891b8e94000b6d0004e1?s=128&d=identicon&r=PG", "display_name": "Mike Strobel", "link": "https://stackoverflow.com/users/175070/mike-strobel"}, "is_accepted": true, "score": 2, "last_activity_date": 1504730008, "creation_date": 1504730008, "answer_id": 46083886, "question_id": 46083516, "link": "https://stackoverflow.com/questions/46083516/wpf-clicking-on-a-dynamic-menu-item-and-returning-the-name/46083886#46083886", "title": "WPF Clicking on a dynamic menu item and returning the name?", "body": "<p>The rules for element names in WPF are stricter than the rules for paths and file names.  For example, I don't believe <code>Name</code> can contain spaces or slashes. I suggest you use <code>Tag</code> instead (and cast back to <code>string</code> in your handler).</p>\n\n<p>Also, look at how you are listing your files:</p>\n\n<p><code>Directory.GetFiles(\"Settings/layouts\")</code></p>\n\n<p>You are looking for files that exist in <code>&lt;working directory&gt;/Settings/layouts/</code>.  Yet, when you create your <code>StreamReader</code>, you are only giving it the <em>name</em> of the file, so it's going to look for the file in <code>&lt;working directory&gt;/</code>.  You need to give it the absolute path or the full relative path.</p>\n"}], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 46083886, "answer_count": 1, "score": 0, "last_activity_date": 1504730008, "creation_date": 1504728396, "last_edit_date": 1504728781, "question_id": 46083516, "link": "https://stackoverflow.com/questions/46083516/wpf-clicking-on-a-dynamic-menu-item-and-returning-the-name", "title": "WPF Clicking on a dynamic menu item and returning the name?", "body": "<p>I have a file menu, where on load, some <code>menuItems</code> are populated from filenames in a directory. </p>\n\n<pre><code>&lt;MenuItem \n    x:Name=\"LayoutLoad\" \n    Header=\"Load saved layout\" \n    HorizontalAlignment=\"Left\" \n    Width=\"200\"\n    /&gt;\n</code></pre>\n\n<p>//on load (code behind)</p>\n\n<pre><code>string[] filePaths = Directory.GetFiles(\"Settings/layouts\");\nfor (int i = 0; i &lt; filePaths.Count(); i++)\n{\n    MenuItem item = new MenuItem {\n        Header = System.IO.Path.GetFileName(filePaths[i]),\n        Name = System.IO.Path.GetFileName(filePaths[i])\n    };\n    item.Click += new RoutedEventHandler(Chooselayout);\n    LayoutLoad.Items.Add(item);\n}\n</code></pre>\n\n<p>My click event linked to the items is:</p>\n\n<pre><code>public void Chooselayout(Object sender, RoutedEventArgs e)\n{\n\n     string fileName = ((MenuItem)sender).Name;\n     var serializer = new XmlLayoutSerializer(dockingManager);\n\n     using (var stream = new StreamReader(fileName))\n         serializer.Deserialize(stream);\n}\n</code></pre>\n\n<p>the line <code>string fileName = ((MenuItem)sender).Name;</code> fails. Can I return the name of the clicked item in this way? Am I simply casting wrongly? Or going about this in the incorrect way?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c#", "unity3d", "unity5"], "comments": [{"owner": {"reputation": 3923, "user_id": 6837889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148983ab46f8c60cf357c240c183c751?s=128&d=identicon&r=PG&f=1", "display_name": "ryeMoss", "link": "https://stackoverflow.com/users/6837889/ryemoss"}, "edited": false, "score": 1, "creation_date": 1504728666, "post_id": 46083495, "comment_id": 79129067, "body": "Can you be more specific? Do you mean something like... if you wanted to check the isTrigger box in a collider2D you would do <code>GetComponent.Collider2D.isTrigger = true;</code>"}, {"owner": {"reputation": 707, "user_id": 6530539, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e727bef4aec5723b9e3cbb56e99a8f3a?s=128&d=identicon&r=PG&f=1", "display_name": "Rumata", "link": "https://stackoverflow.com/users/6530539/rumata"}, "reply_to_user": {"reputation": 3923, "user_id": 6837889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148983ab46f8c60cf357c240c183c751?s=128&d=identicon&r=PG&f=1", "display_name": "ryeMoss", "link": "https://stackoverflow.com/users/6837889/ryemoss"}, "edited": false, "score": 0, "creation_date": 1504738372, "post_id": 46083495, "comment_id": 79132921, "body": "@ryemoss Thanks, but I mean a custom script. In the inspector tab, i can see input fields, checkboxes, and buttons. Can I &quot;click&quot; on the custom script button in the inspector from another script? Or the only way is to call the same function, which will be called if I will manually click the checkbox?"}, {"owner": {"reputation": 817, "user_id": 3296133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1188e75e08d7ef3f1e38b43795aa1048?s=128&d=identicon&r=PG&f=1", "display_name": "DeeKayy90", "link": "https://stackoverflow.com/users/3296133/deekayy90"}, "edited": false, "score": 0, "creation_date": 1504744691, "post_id": 46083495, "comment_id": 79134336, "body": "@Rumata Correct, you would need to call the method that the buttons click is calling. For example, lets say your button is &#39;Generate Terrain&#39; - that buttons method body in turn calls <code>GenerateTerrain(); CleanUp();</code> - your script would then need to call that sequence of events. For things like checkboxes, that&#39;s a matter of setting a value of a property, etc."}, {"owner": {"reputation": 707, "user_id": 6530539, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e727bef4aec5723b9e3cbb56e99a8f3a?s=128&d=identicon&r=PG&f=1", "display_name": "Rumata", "link": "https://stackoverflow.com/users/6530539/rumata"}, "reply_to_user": {"reputation": 817, "user_id": 3296133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1188e75e08d7ef3f1e38b43795aa1048?s=128&d=identicon&r=PG&f=1", "display_name": "DeeKayy90", "link": "https://stackoverflow.com/users/3296133/deekayy90"}, "edited": false, "score": 0, "creation_date": 1504778196, "post_id": 46083495, "comment_id": 79148266, "body": "@DeeKayy90 So is it the only way - to call the same functions which the button calls? Can&#39;t  I just trigger some &quot;click&quot; event for this button, nothing more, so that the button will call its own functions itself, with no need for me to call them?"}, {"owner": {"reputation": 817, "user_id": 3296133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1188e75e08d7ef3f1e38b43795aa1048?s=128&d=identicon&r=PG&f=1", "display_name": "DeeKayy90", "link": "https://stackoverflow.com/users/3296133/deekayy90"}, "edited": false, "score": 0, "creation_date": 1504830835, "post_id": 46083495, "comment_id": 79176812, "body": "@Rumata Whether it is the only way or not, I am not 100% sure. Could there be a way to programmatically click a button in the inspector? Possibly. I would recommend you call the functions that are associated with that button, rather than calling the <code>button.Click</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 707, "user_id": 6530539, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e727bef4aec5723b9e3cbb56e99a8f3a?s=128&d=identicon&r=PG&f=1", "display_name": "Rumata", "link": "https://stackoverflow.com/users/6530539/rumata"}, "edited": false, "score": 0, "creation_date": 1504738681, "post_id": 46084473, "comment_id": 79132989, "body": "Thank you, but not exactly. There is a custom script, and in the inspector tab, I see public input fields, buttons, and checkboxes. Can, for example,  click on a checkbox in the innspector tab using C#? Or the only way is to find out which functions are being called when I&#39;m clicking on the checkbox, and call the same functions?"}], "tags": [], "owner": {"reputation": 1, "user_id": 862316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dee1b7d7de73c12a7cb7388e18c66c5?s=128&d=identicon&r=PG", "display_name": "BlueJoeCo", "link": "https://stackoverflow.com/users/862316/bluejoeco"}, "is_accepted": false, "score": 0, "last_activity_date": 1504732676, "creation_date": 1504732676, "answer_id": 46084473, "question_id": 46083495, "link": "https://stackoverflow.com/questions/46083495/how-to-press-a-button-in-the-inspector-tab-from-script/46084473#46084473", "title": "How to &quot;press&quot; a button in the inspector tab from script?", "body": "<pre><code>public Button myButton;\n\nmyButton.onClick.Invoke();\n</code></pre>\n\n<p>Is this what you're looking for?</p>\n"}, {"comments": [{"owner": {"reputation": 707, "user_id": 6530539, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e727bef4aec5723b9e3cbb56e99a8f3a?s=128&d=identicon&r=PG&f=1", "display_name": "Rumata", "link": "https://stackoverflow.com/users/6530539/rumata"}, "edited": false, "score": 0, "creation_date": 1504778522, "post_id": 46091037, "comment_id": 79148531, "body": "Thank you very much, this is a really helpful explanation! However, my question is - is there an alternative to this method?  Imagine, there is a button, and it will call some functions if I click it. So if I will just manually click on it in the inspector -  it will call some functions itself, with no need for me to do anything more than just click on it. So my question is - can I just click on the button using C#?      Can I just trigger some &quot;click&quot; event for this button, nothing more, so that the button will call its own functions itself, with no need for me to call them?"}, {"owner": {"reputation": 3900, "user_id": 5354341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvBeI.png?s=128&g=1", "display_name": "a_m_dev", "link": "https://stackoverflow.com/users/5354341/a-m-dev"}, "reply_to_user": {"reputation": 707, "user_id": 6530539, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e727bef4aec5723b9e3cbb56e99a8f3a?s=128&d=identicon&r=PG&f=1", "display_name": "Rumata", "link": "https://stackoverflow.com/users/6530539/rumata"}, "edited": false, "score": 0, "creation_date": 1504779434, "post_id": 46091037, "comment_id": 79149123, "body": "You know what ? that button you say runs a function , right ? So it is simple . you can reference to that script and then find that function by reference and then run it!"}], "tags": [], "owner": {"reputation": 3900, "user_id": 5354341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvBeI.png?s=128&g=1", "display_name": "a_m_dev", "link": "https://stackoverflow.com/users/5354341/a-m-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1504771923, "last_edit_date": 1504771923, "creation_date": 1504771312, "answer_id": 46091037, "question_id": 46083495, "link": "https://stackoverflow.com/questions/46083495/how-to-press-a-button-in-the-inspector-tab-from-script/46091037#46091037", "title": "How to &quot;press&quot; a button in the inspector tab from script?", "body": "<p>Inspector shows you the Components of a game object , if you create an empty GameObject You will see the Transform Component Which you can add a reference To that in your Script on another GameObject like <code>public GameObject nameYouWanted</code> and then a slot will appears in in the inspector of the GameObject that script is attached to that which named <code>nameYouWanted</code> and then you can drop the game object that you created in there.<br>\nso far you just created a script on another Gameobject and then created a empty GameObject , in this step you can access the transform Component of Second GameObject by just writing <code>someVariable = nameYouWanted.transform.position</code> in start Or update Function in your Script! <strong>JUST LIKE THAT!</strong> <br>simple as it is , you can access camera component of mainCamera by writing <code>public Camera mainCamera</code> and then access camera components<br> <br>\n<strong>JUST KEEP IN MIND THAT:</strong><br>\nin case of: <br>\n<code>public GameObject varName</code></p>\n\n<p><strong>public</strong> is the variables accessibility level <br>\n<strong>GameObject</strong> is Component type <br>\n<strong>varName</strong> is obvious is the variable name <br></p>\n\n<p><br>\nso here is the tricky part for beginners: <br>\nfor example i have this components on my Camera</p>\n\n<p><a href=\"https://i.stack.imgur.com/MNpBI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MNpBI.png\" alt=\"Components\"></a></p>\n\n<p>How can I access for example the LensDistortionBlur variables?\nor another one i.e. Frost Component ?\n<br>\n<strong>ANSWER IS:</strong>\nYou Just have to add a reference to that in Your Script like </p>\n\n<pre><code>public LensDistortionBlur LensDistortionBlurEffect;\n</code></pre>\n\n<p>this image is related to glitch effect: <br>\n<a href=\"https://i.stack.imgur.com/qdcml.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qdcml.png\" alt=\"enter image description here\"></a></p>\n\n<p>you see how monodevelop suggests the components variables to use ???</p>\n\n<p>and then in inspector add the target GameObject in this slot (which contains LensDistortionBlur) , here is the good thing: Just because you specified the LensDistortionBlur  as Component type, script just asks from that gameobject the LensDistortionBlur component and dont uses other ones, then Use that inside of any function that you want,\nMore Important thing in that is <strong>Component TYPE</strong> which is LensDistortionBlur , Yes you should use the component name that you want to access it , More info is <a href=\"https://docs.unity3d.com/356/Documentation/ScriptReference/index.Accessing_Other_Components.html\" rel=\"nofollow noreferrer\">Here</a><br></p>\n\n<p><strong>IN YOUR CASE</strong><br>\nThose bools and variables you mentioned can be accessed by solution that explained above!</p>\n"}], "owner": {"reputation": 707, "user_id": 6530539, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e727bef4aec5723b9e3cbb56e99a8f3a?s=128&d=identicon&r=PG&f=1", "display_name": "Rumata", "link": "https://stackoverflow.com/users/6530539/rumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1504771923, "creation_date": 1504728329, "question_id": 46083495, "link": "https://stackoverflow.com/questions/46083495/how-to-press-a-button-in-the-inspector-tab-from-script", "title": "How to &quot;press&quot; a button in the inspector tab from script?", "body": "<p>In the inspector tab I see public variables, checkboxes and buttons as a part of some complex script. </p>\n\n<p>How can I use C# to \"press\" a button/checkbox or set a value to a variable in the inspector tab, without finding and calling the corresponding functions inside this script? </p>\n\n<p>So I want just to trigger the same effect which would happen if I would manually press a button in the inspector tab.</p>\n"}, {"tags": ["c#", "memory-mapped-files"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1504806006, "post_id": 46083451, "comment_id": 79167132, "body": "It is an AccessViolationException, the kind you should never see in a C# program.  My money is on lousy anti-malware screwing this up."}, {"owner": {"reputation": 179, "user_id": 999613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f8008b7edbe2805ecac18ca426f346aa?s=128&d=identicon&r=PG", "display_name": "millejos", "link": "https://stackoverflow.com/users/999613/millejos"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1504808508, "post_id": 46083451, "comment_id": 79168428, "body": "Thanks for putting a name to the exception, it always happens the second time I create a viewstream and try to write to it. (and it has to allocate more memory for my MMF behind the scenes)"}], "owner": {"reputation": 179, "user_id": 999613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f8008b7edbe2805ecac18ca426f346aa?s=128&d=identicon&r=PG", "display_name": "millejos", "link": "https://stackoverflow.com/users/999613/millejos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504802627, "creation_date": 1504728143, "last_edit_date": 1592644375, "question_id": 46083451, "link": "https://stackoverflow.com/questions/46083451/memorymappedviewstream-error-does-not-have-appropriate-access", "title": "MemoryMappedViewStream error &quot;does not have appropriate access&quot;", "body": "<p>I am trying to create a MMF-backed collection that dynamically expands up to 2GB.  I wanted to be able to read existing items at the same time new items are being added.  It works great on my development machine but I am getting an error on some machines:</p>\n<blockquote>\n<p>The thread tried to read from or write to a virtual address for which it does not have the appropriate access.</p>\n</blockquote>\n<p>Has anyone seen this error before?  I am likely doing something wrong with the way I am handling MemoryMappedFiles, I'm creating a 2GB MMF with the DelayAllocatePages flag so it doesn't use it all right away:</p>\n<pre><code>public const long ONE_GIGABYTE = 1073741824;\nlong maxCapacity = 2 * ONE_GIGABYTE;\nmmStorage = MemoryMappedFile.CreateNew(mmfName, maxCapacity, MemoryMappedFileAccess.ReadWrite, MemoryMappedFileOptions.DelayAllocatePages, null, HandleInheritability.Inheritable);\n</code></pre>\n<p>Then I write data to it a chunk at a time, using an internal collection to keep track of where each chunk is located.</p>\n<pre><code>lock ( writeLock ) {\n    // get the most recently added item\n    var lastItem = _itemLocations[_itemLocations.Count - 1];\n    // calculate next items offset\n    long newOffset = lastItem.Offset + lastItem.Length;\n\n    // add next items data\n    using ( var mmStream = mmStorage.CreateViewStream(newOffset, itemBytes.Length, MemoryMappedFileAccess.ReadWrite) ) {\n        Trace.WriteLine(string.Format(&quot;Writing {0} bytes at location {1}&quot;, itemBytes.Length, newOffset));\n        mmStream.Write(itemBytes, 0, itemBytes.Length);\n    }\n\n    // add location info to list\n    _itemLocations.Add(new ItemLocation()\n    {\n        Offset = newOffset,\n        Length = itemBytes.Length\n    });\n}\n</code></pre>\n<p>On the remote machine the first write goes ok, but the second write is causing the exception I mentioned which kills the program completely.</p>\n<blockquote>\n<p>Writing 5973 bytes at location 0</p>\n<p>Writing 5901 bytes at location 5973</p>\n<p>The thread tried to read from or write to a virtual address for which it does not have the appropriate access.</p>\n</blockquote>\n<h1>Update</h1>\n<p>I have tried changing</p>\n<p><code>MemoryMappedFileOptions.DelayAllocatePages</code></p>\n<p>to</p>\n<p><code>MemoryMappedFileOptions.None</code></p>\n<p>and it stops throwing the exception, but it also allocates the full 2GB right away.  I'd prefer if I could grow the MMF as needed but I guess it wont work on all machines.  I'm not sure why <code>DelayAllocatePages</code> works on some machines and not others.</p>\n"}, {"tags": ["c#", "datetime", "asp.net-web-api", "url-parameters"], "comments": [{"owner": {"reputation": 1146, "user_id": 5301606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a6871f92d83ce555edcf15a5eee0f9?s=128&d=identicon&r=PG&f=1", "display_name": "C. Helling", "link": "https://stackoverflow.com/users/5301606/c-helling"}, "edited": false, "score": 0, "creation_date": 1504728099, "post_id": 46083357, "comment_id": 79128790, "body": "I believe you need to convert it from string to date, and in the process of decoding the string to a date, you can customize that however you want."}, {"owner": {"reputation": 1374, "user_id": 2619157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Y3txw.jpg?s=128&g=1", "display_name": "Jakotheshadows", "link": "https://stackoverflow.com/users/2619157/jakotheshadows"}, "edited": false, "score": 1, "creation_date": 1504728335, "post_id": 46083357, "comment_id": 79128894, "body": "Model binding is your friend, here is what my googling on the subject related to your question revealed: <a href=\"http://www.vickram.me/custom-datetime-model-binding-in-asp-net-web-api/\" rel=\"nofollow noreferrer\">vickram.me/custom-datetime-model-binding-in-asp-net-web-api</a>"}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1504728486, "post_id": 46083357, "comment_id": 79128980, "body": "I agree, custom model binding is the way to go here."}, {"owner": {"reputation": 61, "user_id": 8570988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0e01f49b567815d925c65492617f08?s=128&d=identicon&r=PG&f=1", "display_name": "GTPON", "link": "https://stackoverflow.com/users/8570988/gtpon"}, "reply_to_user": {"reputation": 1374, "user_id": 2619157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Y3txw.jpg?s=128&g=1", "display_name": "Jakotheshadows", "link": "https://stackoverflow.com/users/2619157/jakotheshadows"}, "edited": false, "score": 0, "creation_date": 1504728866, "post_id": 46083357, "comment_id": 79129171, "body": "@Jakotheshadows Model binding works for url as well? I thought it was only for post methods."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4843530"}, "edited": false, "score": 0, "creation_date": 1504728908, "post_id": 46083357, "comment_id": 79129186, "body": "I am wondering if this might help you out...  <a href=\"https://stackoverflow.com/a/20144019/4843530\">stackoverflow.com/a/20144019/4843530</a> ... basically change the default date formatting for your controller.  That is for output, but wonder if you can figure it out for input."}, {"owner": {"reputation": 61, "user_id": 8570988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0e01f49b567815d925c65492617f08?s=128&d=identicon&r=PG&f=1", "display_name": "GTPON", "link": "https://stackoverflow.com/users/8570988/gtpon"}, "edited": false, "score": 0, "creation_date": 1504729088, "post_id": 46083357, "comment_id": 79129280, "body": "@AgapwIesu I think not. I tried this and I think it only works for output DateTime, not input."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4843530"}, "edited": false, "score": 0, "creation_date": 1504729498, "post_id": 46083357, "comment_id": 79129472, "body": "The question was about input, and the answer just below that one, talks about changing the serializer&#39;s culture info (<a href=\"https://stackoverflow.com/a/19940756/4843530\">stackoverflow.com/a/19940756/4843530</a>).  Seems like it should work both ways."}, {"owner": {"reputation": 1374, "user_id": 2619157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Y3txw.jpg?s=128&g=1", "display_name": "Jakotheshadows", "link": "https://stackoverflow.com/users/2619157/jakotheshadows"}, "edited": false, "score": 0, "creation_date": 1504730023, "post_id": 46083357, "comment_id": 79129755, "body": "@GTPON yes, if you follow the link you&#39;ll see the example is for an HttpGet action"}, {"owner": {"reputation": 61, "user_id": 8570988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0e01f49b567815d925c65492617f08?s=128&d=identicon&r=PG&f=1", "display_name": "GTPON", "link": "https://stackoverflow.com/users/8570988/gtpon"}, "edited": false, "score": 0, "creation_date": 1504730257, "post_id": 46083357, "comment_id": 79129879, "body": "@AgapwIesu I tried here, didn&#39;t work... I think it is because he uses POST via Json, and I&#39;m using GET via Url"}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1504732822, "post_id": 46083357, "comment_id": 79131029, "body": "Yes, model binding works for URL parameters, regardless of the HTTP verb used."}, {"owner": {"reputation": 1617, "user_id": 417579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/14a56815d8aa393bf546f8f866bad968?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/417579/robert"}, "edited": false, "score": 0, "creation_date": 1504807531, "post_id": 46083357, "comment_id": 79167933, "body": "out of curiousity, does it change the behavior if you use string instead of DateTime as the parameters of GetListOfCallers? If that helps, then could parse it into DateTime objects within it."}, {"owner": {"reputation": 61, "user_id": 8570988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0e01f49b567815d925c65492617f08?s=128&d=identicon&r=PG&f=1", "display_name": "GTPON", "link": "https://stackoverflow.com/users/8570988/gtpon"}, "reply_to_user": {"reputation": 1617, "user_id": 417579, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/14a56815d8aa393bf546f8f866bad968?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/417579/robert"}, "edited": false, "score": 1, "creation_date": 1504887255, "post_id": 46083357, "comment_id": 79203875, "body": "@Robert I don&#39;t think it changes, but it&#39;s a solution I don&#39;t want to use. I want a solution to implement in all projects so others programmers don&#39;t have to worry about conversions."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 8570988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0e01f49b567815d925c65492617f08?s=128&d=identicon&r=PG&f=1", "display_name": "GTPON", "link": "https://stackoverflow.com/users/8570988/gtpon"}, "is_accepted": true, "score": 3, "last_activity_date": 1504897573, "creation_date": 1504897573, "answer_id": 46123095, "question_id": 46083357, "link": "https://stackoverflow.com/questions/46083357/web-api-how-to-receive-in-controller-datetime-dd-mm-yyyy-as-url-parameter/46123095#46123095", "title": "Web API - How to receive in controller DateTime (&#39;dd/MM/yyyy&#39;) as Url parameter?", "body": "<p>I manage to solve my problem using Model binding as suggested by @Jakotheshadows and @Amy.</p>\n\n<p>I used the code from <a href=\"https://stackoverflow.com/a/15007363/8570988\">this answer</a> about ModelBinders in Web Api with a few tweaks from <a href=\"https://pt.stackoverflow.com/a/140318\">this answer</a> (it's in portuguese, but the code is clear).</p>\n\n<p>So my code right now:</p>\n\n<pre><code>using System;\nusing System.Web.Http.Controllers;\nusing System.Web.Http.ModelBinding;\n\nnamespace Site.Services\n{\n    public class DateTimeModelBinder : IModelBinder\n    {\n        public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)\n        {\n            ValidateBindingContext(bindingContext);\n\n            if (!bindingContext.ValueProvider.ContainsPrefix(bindingContext.ModelName) ||\n                !CanBindType(bindingContext.ModelType))\n            {\n                return false;\n            }\n\n            var modelName = bindingContext.ModelName;\n            var attemptedValue = bindingContext.ValueProvider\n                .GetValue(modelName).AttemptedValue;\n\n            try\n            {\n                bindingContext.Model = DateTime.Parse(attemptedValue);\n            }\n            catch (FormatException e)\n            {\n                bindingContext.ModelState.AddModelError(modelName, e);\n            }\n\n            return true;\n        }\n\n        private static void ValidateBindingContext(ModelBindingContext bindingContext)\n        {\n            if (bindingContext == null)\n            {\n                throw new ArgumentNullException(\"bindingContext\");\n            }\n\n            if (bindingContext.ModelMetadata == null)\n            {\n                throw new ArgumentException(\"ModelMetadata cannot be null\", \"bindingContext\");\n            }\n        }\n\n        public static bool CanBindType(Type modelType)\n        {\n            return modelType == typeof(DateTime) || modelType == typeof(DateTime?);\n        }\n    }\n}\n</code></pre>\n\n<p>I used <code>try</code> and <code>DateTime.Parse</code> as suggested in the second link, because the first always throwed an exception even with try and catch.</p>\n\n<p>The ModelBinderProvider I used as he suggested:</p>\n\n<pre><code>using System;\nusing System.Web.Http;\nusing System.Web.Http.ModelBinding;\n\nnamespace Site.Services\n{\n    public class DateTimeModelBinderProvider : ModelBinderProvider\n    {\n        readonly DateTimeModelBinder binder = new DateTimeModelBinder();\n\n        public override IModelBinder GetBinder(HttpConfiguration configuration, Type modelType)\n        {\n            if (DateTimeModelBinder.CanBindType(modelType))\n            {\n                return binder;\n            }\n\n            return null;\n        }\n    }\n}\n</code></pre>\n\n<p>And I configure as suggested <a href=\"https://stackoverflow.com/a/27258805/8570988\">here</a> (also an answer for the first link), but in my <code>WebApiConfig.cs</code> (didn't work in <code>Global.asax</code>), like this:</p>\n\n<pre><code>using Site.Services;\nusing System;\nusing System.Web.Http;\n\nnamespace Site\n{\n    public static class WebApiConfig\n    {\n        public static void Register(HttpConfiguration config)\n        {\n            config.BindParameter(typeof(DateTime), new DateTimeModelBinder());\n            config.BindParameter(typeof(DateTime?), new DateTimeModelBinder());\n\n            //Rest of my code\n            config.MapHttpAttributeRoutes();\n\n            config.Routes.MapHttpRoute(\n                name: \"DefaultApi\",\n                routeTemplate: \"api/{controller}/{action}/{id}\",\n                defaults: new { id = RouteParameter.Optional }\n            );\n        }\n    }\n}\n</code></pre>\n\n<p>I think the <code>globalization</code> of the <code>Web.config</code>, the <code>uiCulture</code> and <code>culture</code> must be set to the culture you want and <code>enableClientBasedCulture</code> be set as <code>true</code> as suggest <a href=\"https://pt.stackoverflow.com/a/140318\">here</a>, but I'm not sure because I didn't want to change the code to test it.</p>\n"}], "owner": {"reputation": 61, "user_id": 8570988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc0e01f49b567815d925c65492617f08?s=128&d=identicon&r=PG&f=1", "display_name": "GTPON", "link": "https://stackoverflow.com/users/8570988/gtpon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2206, "favorite_count": 1, "accepted_answer_id": 46123095, "answer_count": 1, "score": 3, "last_activity_date": 1504897573, "creation_date": 1504727696, "last_edit_date": 1504728261, "question_id": 46083357, "link": "https://stackoverflow.com/questions/46083357/web-api-how-to-receive-in-controller-datetime-dd-mm-yyyy-as-url-parameter", "title": "Web API - How to receive in controller DateTime (&#39;dd/MM/yyyy&#39;) as Url parameter?", "body": "<p>Everytime my controller receives a date as dd/MM/yyyy it decode as MM/dd/yyyy. Is it possible to tell the controller how to decode the parameter of the url?</p>\n\n<p>My method in controller:</p>\n\n<pre><code>[HttpGet]\npublic JsonResult&lt;IList&lt;Callers&gt;&gt; GetListOfCallers(DateTime startDate, DateTime endDate)\n        {\n            // myCode....\n        }\n</code></pre>\n\n<p>My javascript:</p>\n\n<pre><code>var $startDate = $('#startDate').val();\nvar $endDate = $('#endDate').val();\n\n$.get(rootUrl + \"api/report/GetListOfCallers?startDate=\" + $startDate + \"&amp;endDate=\" + $endDate, function (data) {\n                // myCode....\n            });\n</code></pre>\n\n<p>I know I can receive the date in controller as string and then parse it, or change it in my javascript to ISO8601 before putting in the url, but I want to know if I can tell my controller how to decode the parameter received.</p>\n\n<p><strong>EDIT</strong>: I was using MVC controller and this was not a problem, it started decoding incorrectly after I changed to ApiController, so the code was working and I hope to keep as it is.</p>\n"}, {"tags": ["c#", "asp.net-mvc", "http", "asp.net-web-api", "serialization"], "comments": [{"owner": {"reputation": 46655, "user_id": 1647604, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/de0a77110ab57284e2a8d57858f714a3?s=128&d=identicon&r=PG", "display_name": "DeborahK", "link": "https://stackoverflow.com/users/1647604/deborahk"}, "edited": false, "score": 0, "creation_date": 1504727661, "post_id": 46083305, "comment_id": 79128561, "body": "Is this Angularjs (v1) or Angular (v2+)?"}, {"owner": {"reputation": 690, "user_id": 3117325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IeWfn.jpg?s=128&g=1", "display_name": "Night Monger", "link": "https://stackoverflow.com/users/3117325/night-monger"}, "reply_to_user": {"reputation": 46655, "user_id": 1647604, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/de0a77110ab57284e2a8d57858f714a3?s=128&d=identicon&r=PG", "display_name": "DeborahK", "link": "https://stackoverflow.com/users/1647604/deborahk"}, "edited": false, "score": 0, "creation_date": 1504727916, "post_id": 46083305, "comment_id": 79128693, "body": "@DeborahK its angular 1.5"}, {"owner": {"reputation": 46655, "user_id": 1647604, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/de0a77110ab57284e2a8d57858f714a3?s=128&d=identicon&r=PG", "display_name": "DeborahK", "link": "https://stackoverflow.com/users/1647604/deborahk"}, "edited": false, "score": 0, "creation_date": 1504727979, "post_id": 46083305, "comment_id": 79128727, "body": "OK, I just edited your angular tag to angularjs for clarity."}, {"owner": {"reputation": 32226, "user_id": 83039, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NaEqI.png?s=128&g=1", "display_name": "Jehof", "link": "https://stackoverflow.com/users/83039/jehof"}, "edited": false, "score": 0, "creation_date": 1504729417, "post_id": 46083305, "comment_id": 79129440, "body": "how is productlist initialized? from an linq-query? Is it materialized with .ToList()"}, {"owner": {"reputation": 690, "user_id": 3117325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IeWfn.jpg?s=128&g=1", "display_name": "Night Monger", "link": "https://stackoverflow.com/users/3117325/night-monger"}, "edited": false, "score": 0, "creation_date": 1504730095, "post_id": 46083305, "comment_id": 79129787, "body": "i have a ecommerce api that returns the items from ecommerce .. something like  var productlist = context.getAll&lt;IProductList&gt;(Id);"}], "owner": {"reputation": 690, "user_id": 3117325, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/IeWfn.jpg?s=128&g=1", "display_name": "Night Monger", "link": "https://stackoverflow.com/users/3117325/night-monger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504730142, "creation_date": 1504727466, "last_edit_date": 1504730142, "question_id": 46083305, "link": "https://stackoverflow.com/questions/46083305/httpokresult-returning-encapsulated-object-response", "title": "HttpOkResult returning encapsulated object response", "body": "<p>Hi I have a simple web api that returns the IEnumerable of the following object </p>\n\n<pre><code>public interface IProductList \n{\nstring Id { get; set; }\n string Name { get; set; }\n}\n</code></pre>\n\n<p>my web api method </p>\n\n<pre><code> [HttpGet]\n public IHttpActionResult GetProducts()\n {\n  IEnumerable&lt;IProductList&gt; productList =  //Do some logic \n  return Ok(productList);\n }\n</code></pre>\n\n<p>My Angular code </p>\n\n<pre><code>       $http.get('/api/GetProducts').success(function (data, status, headers, config) {\n       var response = data;                        \n       // Do some post success logic\n       }).error(function (data, status, header, config) { //error handling });              \n</code></pre>\n\n<p><strong>The problem:</strong> </p>\n\n<p>the issue is ... everything works.. but instead of getting an array of products directly,  i get something like below pic. the array of products is encapuslated with some weird objects. when i got to <code>response[0].__interceptors[0]</code> - i see the actual value.(highlighted in green)  <strong>Any thoughts?</strong>\nUpdate - i see this happening only in my Dev environment. doesnt happen in my local. that is getting crazier. </p>\n\n<p><a href=\"https://i.stack.imgur.com/d2qKu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d2qKu.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "visual-studio-2017", "visual-studio-extensions", "vsix"], "comments": [{"owner": {"reputation": 23468, "user_id": 4137916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bab91fda70af7e9beb8934d323540e8?s=128&d=identicon&r=PG", "display_name": "Jeroen Mostert", "link": "https://stackoverflow.com/users/4137916/jeroen-mostert"}, "edited": false, "score": 0, "creation_date": 1504728007, "post_id": 46083286, "comment_id": 79128741, "body": "<a href=\"http://source.roslyn.codeplex.com/#Microsoft.CodeAnalysis.Features/Diagnostics/EngineV2/DiagnosticIncrementalAnalyzer.StateManager.cs,147\" rel=\"nofollow noreferrer\">Source of the exception</a>. Looks like the registration of the extension is borked. Try clearing the component model cache (<code>%localappdata%\\Microsoft\\VisualStudio\\15.0_*\\ComponentModel&zwnj;&#8203;Cache</code>) or a full repair of the installation. Alternatively, the VSIX may just be broken itself, either due to the upgrade not getting things quite right or wrong behavior that only happened to work by lucky coincidence in VS 2015."}, {"owner": {"reputation": 3390, "user_id": 6593307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a33fcc6f030a3e168eb5ef1b756a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Weiwei", "link": "https://stackoverflow.com/users/6593307/weiwei"}, "edited": false, "score": 0, "creation_date": 1504761572, "post_id": 46083286, "comment_id": 79138357, "body": "You could create a default project and loads source files from a DB, then build it. If the default project template could build successful, this problem is related to your extension it self. Since it is upgrade from VS2015 version, I suggest you upgrade this extension project to VS2017 and debug it in VS2017 to check what happened in your extension."}, {"owner": {"reputation": 661, "user_id": 2090211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9522dd5788480ad9da7979d1e3fa4a1a?s=128&d=identicon&r=PG", "display_name": "Igavshne", "link": "https://stackoverflow.com/users/2090211/igavshne"}, "reply_to_user": {"reputation": 23468, "user_id": 4137916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bab91fda70af7e9beb8934d323540e8?s=128&d=identicon&r=PG", "display_name": "Jeroen Mostert", "link": "https://stackoverflow.com/users/4137916/jeroen-mostert"}, "edited": false, "score": 0, "creation_date": 1504876726, "post_id": 46083286, "comment_id": 79197121, "body": "@JeroenMostert, thanks, I&#39;m in the process of repairing the VS 2017 installation. Clearing the model cache didn&#39;t work. Though, I suspect the upgrade might not have gone right. I&#39;ll test it and probably redo the upgrade. We intercept the Build command of VS and first do our own Build version, so theoretically I could work around this problem, but I would like the solution file after the normal VS build. And besides, something somewhere is wrong and I don&#39;t want to leave it that way."}, {"owner": {"reputation": 661, "user_id": 2090211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9522dd5788480ad9da7979d1e3fa4a1a?s=128&d=identicon&r=PG", "display_name": "Igavshne", "link": "https://stackoverflow.com/users/2090211/igavshne"}, "reply_to_user": {"reputation": 3390, "user_id": 6593307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a33fcc6f030a3e168eb5ef1b756a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Weiwei", "link": "https://stackoverflow.com/users/6593307/weiwei"}, "edited": false, "score": 0, "creation_date": 1504876863, "post_id": 46083286, "comment_id": 79197207, "body": "@Wendy-MSFT, I have upgraded it to VS2017 and am debugging it in VS2017."}, {"owner": {"reputation": 3390, "user_id": 6593307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a33fcc6f030a3e168eb5ef1b756a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Weiwei", "link": "https://stackoverflow.com/users/6593307/weiwei"}, "edited": false, "score": 0, "creation_date": 1505094322, "post_id": 46083286, "comment_id": 79256153, "body": "@Igavshne I suggest you create a new extension project in VS2017 and copy the original extension partial code to the new project. If the new project working fine, the problem is not related to VS2017 installation. And copy partial  code will help us confirm which part of code causes this problem. In addition, please check your project upgrade process based on this document: <a href=\"https://docs.microsoft.com/en-us/visualstudio/extensibility/how-to-migrate-extensibility-projects-to-visual-studio-2017\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/visualstudio/extensibility/&hellip;</a>"}, {"owner": {"reputation": 661, "user_id": 2090211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9522dd5788480ad9da7979d1e3fa4a1a?s=128&d=identicon&r=PG", "display_name": "Igavshne", "link": "https://stackoverflow.com/users/2090211/igavshne"}, "edited": false, "score": 0, "creation_date": 1507835707, "post_id": 46083286, "comment_id": 80380814, "body": "Please see my updates to the post above."}, {"owner": {"reputation": 51795, "user_id": 495455, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/b0VBC.jpg?s=128&g=1", "display_name": "Jeremy Thompson", "link": "https://stackoverflow.com/users/495455/jeremy-thompson"}, "edited": false, "score": 0, "creation_date": 1508197928, "post_id": 46083286, "comment_id": 80507217, "body": "Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}], "owner": {"reputation": 661, "user_id": 2090211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9522dd5788480ad9da7979d1e3fa4a1a?s=128&d=identicon&r=PG", "display_name": "Igavshne", "link": "https://stackoverflow.com/users/2090211/igavshne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 580, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1507836376, "creation_date": 1504727391, "last_edit_date": 1507835644, "question_id": 46083286, "link": "https://stackoverflow.com/questions/46083286/vs-2017-crashes-on-build-project-solution-with-vsix", "title": "VS 2017 crashes on Build Project/Solution with VSIX", "body": "<p>We have an extension that I have upgraded from VS 2015. \nThe extension creates a solution from a custom project template (which is actually just a blank library project) and loads source files from a DB.\nWhen I try to build the solution/project VS crashes. </p>\n\n<blockquote>\n  <p>\"Exception of type 'System.ExecutionEngineException' was thrown.\"</p>\n  \n  <p>InnerException: \"How can this happen?\"</p>\n</blockquote>\n\n<p>I'm also wondering how this can happen. It doesn't happen in VS 2015.</p>\n\n<p>What do I do now? Must I report this somewhere? </p>\n\n<p>Here is the CallStack for what it's worth:</p>\n\n<pre><code>Microsoft.CodeAnalysis.Features.dll!Microsoft.CodeAnalysis.Diagnostics.EngineV2.DiagnosticIncrementalAnalyzer.StateManager.CreateBuildOnlyProjectStateSet(Microsoft.CodeAnalysis.Project project)   Unknown\nMicrosoft.CodeAnalysis.Features.dll!Microsoft.CodeAnalysis.Diagnostics.EngineV2.DiagnosticIncrementalAnalyzer.SynchronizeWithBuildAsync(Microsoft.CodeAnalysis.Workspace workspace, System.Collections.Immutable.ImmutableDictionary&lt;Microsoft.CodeAnalysis.ProjectId, System.Collections.Immutable.ImmutableArray&lt;Microsoft.CodeAnalysis.Diagnostics.DiagnosticData&gt;&gt; map) Unknown\nmscorlib.dll!System.Runtime.CompilerServices.AsyncTaskMethodBuilder.Start&lt;Microsoft.CodeAnalysis.Diagnostics.EngineV2.DiagnosticIncrementalAnalyzer.&lt;SynchronizeWithBuildAsync&gt;d__13&gt;(ref Microsoft.CodeAnalysis.Diagnostics.EngineV2.DiagnosticIncrementalAnalyzer.&lt;SynchronizeWithBuildAsync&gt;d__13 stateMachine)  Unknown\nMicrosoft.CodeAnalysis.Features.dll!Microsoft.CodeAnalysis.Diagnostics.EngineV2.DiagnosticIncrementalAnalyzer.SynchronizeWithBuildAsync(Microsoft.CodeAnalysis.Workspace workspace, System.Collections.Immutable.ImmutableDictionary&lt;Microsoft.CodeAnalysis.ProjectId, System.Collections.Immutable.ImmutableArray&lt;Microsoft.CodeAnalysis.Diagnostics.DiagnosticData&gt;&gt; map) Unknown\nMicrosoft.CodeAnalysis.Features.dll!Microsoft.CodeAnalysis.Diagnostics.DiagnosticAnalyzerService.SynchronizeWithBuildAsync(Microsoft.CodeAnalysis.Workspace workspace, System.Collections.Immutable.ImmutableDictionary&lt;Microsoft.CodeAnalysis.ProjectId, System.Collections.Immutable.ImmutableArray&lt;Microsoft.CodeAnalysis.Diagnostics.DiagnosticData&gt;&gt; diagnostics)  Unknown\nMicrosoft.VisualStudio.LanguageServices.dll!Microsoft.VisualStudio.LanguageServices.Implementation.TaskList.ExternalErrorDiagnosticUpdateSource.SyncBuildErrorsAndReportAsync(Microsoft.CodeAnalysis.Diagnostics.DiagnosticAnalyzerService diagnosticService, Microsoft.CodeAnalysis.Solution solution, System.Collections.Immutable.ImmutableDictionary&lt;Microsoft.CodeAnalysis.ProjectId, System.Collections.Immutable.ImmutableArray&lt;Microsoft.CodeAnalysis.Diagnostics.DiagnosticData&gt;&gt; map) Unknown\nmscorlib.dll!System.Runtime.CompilerServices.AsyncTaskMethodBuilder.Start&lt;Microsoft.VisualStudio.LanguageServices.Implementation.TaskList.ExternalErrorDiagnosticUpdateSource.&lt;SyncBuildErrorsAndReportAsync&gt;d__24&gt;(ref Microsoft.VisualStudio.LanguageServices.Implementation.TaskList.ExternalErrorDiagnosticUpdateSource.&lt;SyncBuildErrorsAndReportAsync&gt;d__24 stateMachine)  Unknown\nMicrosoft.VisualStudio.LanguageServices.dll!Microsoft.VisualStudio.LanguageServices.Implementation.TaskList.ExternalErrorDiagnosticUpdateSource.SyncBuildErrorsAndReportAsync(Microsoft.CodeAnalysis.Diagnostics.DiagnosticAnalyzerService diagnosticService, Microsoft.CodeAnalysis.Solution solution, System.Collections.Immutable.ImmutableDictionary&lt;Microsoft.CodeAnalysis.ProjectId, System.Collections.Immutable.ImmutableArray&lt;Microsoft.CodeAnalysis.Diagnostics.DiagnosticData&gt;&gt; map) Unknown\nMicrosoft.VisualStudio.LanguageServices.dll!Microsoft.VisualStudio.LanguageServices.Implementation.TaskList.ExternalErrorDiagnosticUpdateSource.OnSolutionBuild.AnonymousMethod__0()    Unknown\nmscorlib.dll!System.Runtime.CompilerServices.AsyncTaskMethodBuilder.Start&lt;Microsoft.VisualStudio.LanguageServices.Implementation.TaskList.ExternalErrorDiagnosticUpdateSource.(ref Microsoft.VisualStudio.LanguageServices.Implementation.TaskList.ExternalErrorDiagnosticUpdateSource.&lt;&gt;c__DisplayClass22_0.&lt;&lt;OnSolutionBuild&gt;b__0&gt;d stateMachine) Unknown\nMicrosoft.VisualStudio.LanguageServices.dll!Microsoft.VisualStudio.LanguageServices.Implementation.TaskList.ExternalErrorDiagnosticUpdateSource.OnSolutionBuild.AnonymousMethod__0()    Unknown\nMicrosoft.CodeAnalysis.Workspaces.dll!Roslyn.Utilities.SimpleTaskQueue.ScheduleTask.AnonymousMethod__1(System.Threading.Tasks.Task t)   Unknown\nMicrosoft.CodeAnalysis.Workspaces.dll!Roslyn.Utilities.TaskExtensions.ContinueWithAfterDelayFromAsync.AnonymousMethod__1(System.Threading.Tasks.Task _) Unknown\nmscorlib.dll!System.Threading.Tasks.ContinuationResultTaskFromTask&lt;System.Threading.Tasks.Task&gt;.InnerInvoke()   Unknown\nmscorlib.dll!System.Threading.Tasks.Task.Execute()  Unknown\nmscorlib.dll!System.Threading.Tasks.Task.ExecutionContextCallback(object obj)   Unknown\nmscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)   Unknown\nmscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)   Unknown\nmscorlib.dll!System.Threading.Tasks.Task.ExecuteWithThreadLocal(ref System.Threading.Tasks.Task currentTaskSlot)    Unknown\nmscorlib.dll!System.Threading.Tasks.Task.ExecuteEntry(bool bPreventDoubleExecution) Unknown\nmscorlib.dll!System.Threading.Tasks.Task.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() Unknown\nmscorlib.dll!System.Threading.ThreadPoolWorkQueue.Dispatch()    Unknown\nmscorlib.dll!System.Threading._ThreadPoolWaitCallback.PerformWaitCallback() Unknown\n[Native to Managed Transition]  \nkernel32.dll!@BaseThreadInitThunk@12()  Unknown\nntdll.dll!__RtlUserThreadStart()    Unknown\nntdll.dll!__RtlUserThreadStart@8()  Unknown\n</code></pre>\n\n<p><strong><em>UPDATE</em></strong></p>\n\n<p>I have re-installed VS 2017, I have created a new vsix project in VS 2017 and copied the code across as suggested in the comments. I still get the same exception as above when I try to Build the project/solution.</p>\n\n<p>Then I thought that something was wrong with my custom project template. So I bypassed the code in our extension where that is created, and hoped to create a new project in the experimental instance, add the files from the database to the newly created project in the normal way, and then build it and check whether I get the same exception.</p>\n\n<p>BUT, I can't even create a new project in the experimental instance. \nI get this exception:</p>\n\n<blockquote>\n  <p>\"Could not load file or assembly 'Microsoft.VisualStudio.ExtensionsExplorer.UI.Aero2, Version=15.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. General Exception (Exception from HRESULT: 0x80131500)\":\"Microsoft.VisualStudio.ExtensionsExplorer.UI.Aero2, Version=15.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\"</p>\n</blockquote>\n\n<p>The CallStack:</p>\n\n<pre><code>&gt;   PresentationFramework.dll!System.Windows.Markup.WpfXamlLoader.Load(System.Xaml.XamlReader xamlReader, System.Xaml.IXamlObjectWriterFactory writerFactory, bool skipJournaledProperties, object rootObject, System.Xaml.XamlObjectWriterSettings settings, System.Uri baseUri)   Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Markup.WpfXamlLoader.LoadBaml(System.Xaml.XamlReader xamlReader, bool skipJournaledProperties, object rootObject, System.Xaml.Permissions.XamlAccessLevel accessLevel, System.Uri baseUri) Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Markup.XamlReader.LoadBaml(System.IO.Stream stream, System.Windows.Markup.ParserContext parserContext, object parent, bool closeStream)    Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Application.LoadComponent(object component, System.Uri resourceLocator)    Unknown Symbols loaded.\nMicrosoft.VisualStudio.ExtensionsExplorer.UI.dll!Microsoft.VisualStudio.ExtensionsExplorer.UI.VSExtensionsExplorerCtl.InitializeComponent() Unknown Symbols loaded.\nMicrosoft.VisualStudio.ExtensionsExplorer.UI.dll!Microsoft.VisualStudio.ExtensionsExplorer.UI.VSExtensionsExplorerCtl.VSExtensionsExplorerCtl() Unknown Symbols loaded.\n[Native to Managed Transition]      Annotated Frame\n[Managed to Native Transition]      Annotated Frame\nmscorlib.dll!System.RuntimeType.CreateInstanceSlow(bool publicOnly, bool skipCheckThis, bool fillCache, ref System.Threading.StackCrawlMark stackMark)  Unknown Symbols loaded.\nmscorlib.dll!System.Activator.CreateInstance(System.Type type, bool nonPublic)  Unknown Symbols loaded.\nmscorlib.dll!System.RuntimeType.CreateInstanceImpl(System.Reflection.BindingFlags bindingAttr, System.Reflection.Binder binder, object[] args, System.Globalization.CultureInfo culture, object[] activationAttributes, ref System.Threading.StackCrawlMark stackMark)  Unknown Symbols loaded.\nmscorlib.dll!System.Activator.CreateInstance(System.Type type, System.Reflection.BindingFlags bindingAttr, System.Reflection.Binder binder, object[] args, System.Globalization.CultureInfo culture, object[] activationAttributes) Unknown Symbols loaded.\nmscorlib.dll!System.Activator.CreateInstance(System.Type type, object[] args)   Unknown Symbols loaded.\nSystem.Xaml.dll!System.Xaml.Schema.SafeReflectionInvoker.CreateInstanceCritical(System.Type type, object[] arguments)   Unknown Symbols loaded.\nSystem.Xaml.dll!System.Xaml.Schema.SafeReflectionInvoker.CreateInstance(System.Type type, object[] arguments)   Unknown Symbols loaded.\nSystem.Xaml.dll!System.Xaml.Schema.XamlTypeInvoker.CreateInstance(object[] arguments)   Unknown Symbols loaded.\nSystem.Xaml.dll!MS.Internal.Xaml.Runtime.ClrObjectRuntime.CreateInstanceWithCtor(System.Xaml.XamlType xamlType, object[] args)  Unknown Symbols loaded.\nSystem.Xaml.dll!MS.Internal.Xaml.Runtime.ClrObjectRuntime.CreateInstance(System.Xaml.XamlType xamlType, object[] args)  Unknown Symbols loaded.\nSystem.Xaml.dll!MS.Internal.Xaml.Runtime.PartialTrustTolerantRuntime.CreateInstance(System.Xaml.XamlType xamlType, object[] args)   Unknown Symbols loaded.\nSystem.Xaml.dll!System.Xaml.XamlObjectWriter.Logic_CreateAndAssignToParentStart(MS.Internal.Xaml.Context.ObjectWriterContext ctx)   Unknown Symbols loaded.\nSystem.Xaml.dll!System.Xaml.XamlObjectWriter.WriteStartMember(System.Xaml.XamlMember property)  Unknown Symbols loaded.\nSystem.Xaml.dll!System.Xaml.XamlWriter.WriteNode(System.Xaml.XamlReader reader) Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Markup.WpfXamlLoader.TransformNodes(System.Xaml.XamlReader xamlReader, System.Xaml.XamlObjectWriter xamlWriter, bool onlyLoadOneNode, bool skipJournaledProperties, bool shouldPassLineNumberInfo, System.Xaml.IXamlLineInfo xamlLineInfo, System.Xaml.IXamlLineInfoConsumer xamlLineInfoConsumer, MS.Internal.Xaml.Context.XamlContextStack&lt;System.Windows.Markup.WpfXamlFrame&gt; stack, System.Windows.Markup.IStyleConnector styleConnector)  Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Markup.WpfXamlLoader.Load(System.Xaml.XamlReader xamlReader, System.Xaml.IXamlObjectWriterFactory writerFactory, bool skipJournaledProperties, object rootObject, System.Xaml.XamlObjectWriterSettings settings, System.Uri baseUri)   Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Markup.WpfXamlLoader.LoadBaml(System.Xaml.XamlReader xamlReader, bool skipJournaledProperties, object rootObject, System.Xaml.Permissions.XamlAccessLevel accessLevel, System.Uri baseUri) Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Markup.XamlReader.LoadBaml(System.IO.Stream stream, System.Windows.Markup.ParserContext parserContext, object parent, bool closeStream)    Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Application.LoadComponent(object component, System.Uri resourceLocator)    Unknown Symbols loaded.\nMicrosoft.VisualStudio.Dialogs.dll!Microsoft.VisualStudio.Dialogs.NewProjectDialog.InitializeComponent()    Unknown Symbols loaded.\nMicrosoft.VisualStudio.Dialogs.dll!Microsoft.VisualStudio.Dialogs.NewProjectDialog.NewProjectDialog(Microsoft.Internal.VisualStudio.Shell.Interop.VSNEWPROJECTDLGINFO dialogInformation, System.IServiceProvider serviceProvider, Microsoft.VisualStudio.Dialogs.NewProjectDialog.SessionState session, Microsoft.VisualStudio.Telemetry.TelemetryScope&lt;Microsoft.VisualStudio.Telemetry.UserTaskEvent&gt; userTask)   Unknown Symbols loaded.\nMicrosoft.VisualStudio.Dialogs.dll!Microsoft.VisualStudio.Dialogs.SVsDialogService.InvokeDialog(Microsoft.Internal.VisualStudio.Shell.Interop.VSNEWPROJECTDLGINFO dlgInfo, out string bstrLocation) Unknown Symbols loaded.\n[Native to Managed Transition]      Annotated Frame\nmsenv.dll!InvokeNewProjectDlg(int,unsigned short const *,unsigned short const *,unsigned short const *,unsigned short const *,unsigned short const *,unsigned long,struct IVsBrowseProjectLocation *)   Unknown Symbols loaded.\nmsenv.dll!HandleNewProjectCommand(unsigned long,unsigned long,struct tagVARIANT *,struct tagVARIANT *)  Unknown Symbols loaded.\nmsenv.dll!HrShellExec(struct _GUID const *,unsigned long,unsigned long,struct tagVARIANT *,struct tagVARIANT *) Unknown Symbols loaded.\nmsenv.dll!CVSCommandTarget::ExecCmd(class CIcmdGuidCmdId const *,struct _GUID const *,unsigned long,unsigned long,struct tagVARIANT *,struct tagVARIANT *,struct _GUID *)   Unknown Symbols loaded.\nmsenv.dll!`anonymous namespace'::ExecForController()    Unknown Symbols loaded.\nmsenv.dll!CSurfaceCommandingSupport::ExecuteForController(struct CommandUI::Models::IControllerRoot const *,unsigned long,struct tagVARIANT *,struct tagVARIANT *,struct _GUID *)   Unknown Symbols loaded.\nmsenv.dll!CExecuteVisitor::VisitButtonController(struct CommandUI::Models::IButtonController *,struct tagVARIANT const *,struct tagVARIANT *)   Unknown Symbols loaded.\nmsenv.dll!CControllerVisitorBase::DispatchVisit(struct CommandUI::Models::IControllerRoot *,struct tagVARIANT const *,struct tagVARIANT *)  Unknown Symbols loaded.\nmsenv.dll!CControllerVisitorBase::VisitController(struct CommandUI::Models::IControllerRoot *,struct tagVARIANT const *,struct tagVARIANT *)    Unknown Symbols loaded.\nmsenv.dll!CSurfaceCommandingSupport::Execute(struct CommandUI::Models::IControllerRoot *,struct tagVARIANT const *,struct tagVARIANT *) Unknown Symbols loaded.\nmsenv.dll!CommandUI::Models::Impl::CExecutableCommandElementDataSource::Execute(struct tagVARIANT const &amp;,struct tagVARIANT *)  Unknown Symbols loaded.\nmsenv.dll!CommandUI::Models::Impl::CExecutableCommandElementDataSource::ExecuteVerbHandler(struct IVsUIDispatch *,unsigned short const *,struct tagVARIANT const &amp;,struct tagVARIANT *) Unknown Symbols loaded.\nmsenv.dll!Gel::CDataSource::Invoke(unsigned short const *,struct tagVARIANT,struct tagVARIANT *)    Unknown Symbols loaded.\n[Managed to Native Transition]      Annotated Frame\nMicrosoft.VisualStudio.Shell.15.0.dll!Microsoft.Internal.VisualStudio.PlatformUI.DataSource.Invoke(string verb, object pvaIn, out object pvaOut)    Unknown Symbols loaded.\nMicrosoft.VisualStudio.Shell.UI.Internal.dll!Microsoft.VisualStudio.PlatformUI.VsCommand.Execute(object parameter)  Unknown Symbols loaded.\nPresentationFramework.dll!MS.Internal.Commands.CommandHelpers.CriticalExecuteCommandSource(System.Windows.Input.ICommandSource commandSource, bool userInitiated)   Unknown Symbols loaded.\nPresentationFramework.dll!System.Windows.Controls.MenuItem.InvokeClickAfterRender(object arg)   Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate callback, object args, int numArgs)  Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.TryCatchWhen(object source, System.Delegate callback, object args, int numArgs, System.Delegate catchHandler) Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.DispatcherOperation.InvokeImpl()   Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(object state)  Unknown Symbols loaded.\nWindowsBase.dll!MS.Internal.CulturePreservingExecutionContext.CallbackWrapper(object obj)   Unknown Symbols loaded.\nmscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)   Unknown Symbols loaded.\nmscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)   Unknown Symbols loaded.\nmscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) Unknown Symbols loaded.\nWindowsBase.dll!MS.Internal.CulturePreservingExecutionContext.Run(MS.Internal.CulturePreservingExecutionContext executionContext, System.Threading.ContextCallback callback, object state)  Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.DispatcherOperation.Invoke()   Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.Dispatcher.ProcessQueue()  Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.Dispatcher.WndProcHook(System.IntPtr hwnd, int msg, System.IntPtr wParam, System.IntPtr lParam, ref bool handled)  Unknown Symbols loaded.\nWindowsBase.dll!MS.Win32.HwndWrapper.WndProc(System.IntPtr hwnd, int msg, System.IntPtr wParam, System.IntPtr lParam, ref bool handled) Unknown Symbols loaded.\nWindowsBase.dll!MS.Win32.HwndSubclass.DispatcherCallbackOperation(object o) Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate callback, object args, int numArgs)  Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.ExceptionWrapper.TryCatchWhen(object source, System.Delegate callback, object args, int numArgs, System.Delegate catchHandler) Unknown Symbols loaded.\nWindowsBase.dll!System.Windows.Threading.Dispatcher.LegacyInvokeImpl(System.Windows.Threading.DispatcherPriority priority, System.TimeSpan timeout, System.Delegate method, object args, int numArgs)   Unknown Symbols loaded.\nWindowsBase.dll!MS.Win32.HwndSubclass.SubclassWndProc(System.IntPtr hwnd, int msg, System.IntPtr wParam, System.IntPtr lParam)  Unknown Symbols loaded.\n[Native to Managed Transition]      Annotated Frame\nuser32.dll!__InternalCallWinProc@20()   Unknown Symbols loaded.\nuser32.dll!UserCallWinProcCheckWow()    Unknown Symbols loaded.\nuser32.dll!DispatchMessageWorker()  Unknown Symbols loaded.\nuser32.dll!_DispatchMessageW@4()    Unknown Symbols loaded.\nmsenv.dll!MainMessageLoop::ProcessMessage(struct IMsoStdComponentMgr *,struct IVsWindowManager *,struct tagMSG &amp;)   Unknown Symbols loaded.\nmsenv.dll!CMsoCMHandler::EnvironmentMsgLoop(void)   Unknown Symbols loaded.\nmsenv.dll!CMsoCMHandler::FPushMessageLoop(unsigned long)    Unknown Symbols loaded.\nmsenv.dll!SCM::FPushMessageLoop(class SCMI *,unsigned long,void *)  Unknown Symbols loaded.\nmsenv.dll!SCM_MsoCompMgr::FPushMessageLoop(unsigned long,unsigned long,void *)  Unknown Symbols loaded.\nmsenv.dll!CMsoComponent::PushMsgLoop(unsigned long) Unknown Symbols loaded.\nmsenv.dll!VStudioMainLogged(void)   Unknown Symbols loaded.\nmsenv.dll!_VStudioMain()    Unknown Symbols loaded.\ndevenv.exe!util_CallVsMain(struct MAINPARAM *,int *)    Unknown Symbols loaded.\ndevenv.exe!CDevEnvAppId::Run(unsigned short *,int)  Unknown Symbols loaded.\ndevenv.exe!_WinMain@16()    Unknown Symbols loaded.\ndevenv.exe!util_FormRootKeyPath(unsigned short const *,unsigned short const *,unsigned short const *,unsigned short * *)    Unknown Symbols loaded.\nkernel32.dll!@BaseThreadInitThunk@12()  Unknown Symbols loaded.\nntdll.dll!__RtlUserThreadStart()    Unknown Symbols loaded.\nntdll.dll!__RtlUserThreadStart@8()  Unknown Symbols loaded.\n</code></pre>\n\n<p>So, why can't I create a new project in the experimental instance? </p>\n"}, {"tags": ["c#", "file", "uwp", "save", "load"], "comments": [{"owner": {"reputation": 3056, "user_id": 6843321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fy3J.png?s=128&g=1", "display_name": "Marian Dolinsk&#253;", "link": "https://stackoverflow.com/users/6843321/marian-dolinsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1504740168, "post_id": 46083283, "comment_id": 79133359, "body": "Have you tried using <code>CreationCollisionOption.OpenIfExists</code> instead of <code>ReplaceExisting</code> when calling <code>folder.CreateFileAsync</code>?"}, {"owner": {"reputation": 95, "user_id": 2971843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd605ae745109139578d6751c706b9c0?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/2971843/john"}, "reply_to_user": {"reputation": 3056, "user_id": 6843321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fy3J.png?s=128&g=1", "display_name": "Marian Dolinsk&#253;", "link": "https://stackoverflow.com/users/6843321/marian-dolinsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1504787500, "post_id": 46083283, "comment_id": 79154489, "body": "Your solution seems to work significantly better, however the same exception is still occasionally thrown."}, {"owner": {"reputation": 3056, "user_id": 6843321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fy3J.png?s=128&g=1", "display_name": "Marian Dolinsk&#253;", "link": "https://stackoverflow.com/users/6843321/marian-dolinsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1504793261, "post_id": 46083283, "comment_id": 79158992, "body": "Well, it depends on what&#39;re you doing with that file. If your <code>BackgroundWorker</code> is working with the file while you&#39;re trying to do something else with it, it may throw an exception."}, {"owner": {"reputation": 95, "user_id": 2971843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd605ae745109139578d6751c706b9c0?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/2971843/john"}, "reply_to_user": {"reputation": 3056, "user_id": 6843321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fy3J.png?s=128&g=1", "display_name": "Marian Dolinsk&#253;", "link": "https://stackoverflow.com/users/6843321/marian-dolinsk%c3%bd"}, "edited": false, "score": 0, "creation_date": 1505060570, "post_id": 46083283, "comment_id": 79247498, "body": "The file should not be in use when it is about to be saved. The problem might solve itself when building a release build, I have to check this."}], "owner": {"reputation": 95, "user_id": 2971843, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd605ae745109139578d6751c706b9c0?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/2971843/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 493, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1504728885, "creation_date": 1504727384, "last_edit_date": 1504728885, "question_id": 46083283, "link": "https://stackoverflow.com/questions/46083283/uwp-file-management", "title": "UWP File Management", "body": "<p>Why does saving a file fail so often on UWP? </p>\n\n<p>I open and read the contents of a specified file when the application is initially launched (with the help of a <code>BackgroundWorker</code>). Then when the application is suspending I try to save new content to the same file, however this results almost always in the following exception: </p>\n\n<blockquote>\n  <p>Unable to remove the file to be replaced. (Exception from HRESULT: 0x80070497)</p>\n</blockquote>\n\n<p>My loading method:</p>\n\n<pre><code>private async static void SymbolLoader_DoWork(object sender, DoWorkEventArgs e)\n{\n        IStorageItem file = null;\n\n        if (!UseDefault)\n        {\n            var folder = await StorageFolder.GetFolderFromPathAsync(SavePath);\n            file = await folder.TryGetItemAsync(FileName);\n        }\n\n        if (file == null)\n        {\n            file = await Package.Current.InstalledLocation.GetFileAsync(@\"Assets\\Default.txt\");\n        }\n\n        var text = await FileIO.ReadTextAsync((IStorageFile)file);\n\n        Data = DoSomething(text);\n}\n</code></pre>\n\n<p>My <code>OnSuspending</code> method:</p>\n\n<pre><code>private async void OnSuspending(object sender, SuspendingEventArgs e)\n{\n        var tries = 0;\n        var maxTries = 10;\n        var deferral = e.SuspendingOperation.GetDeferral();\n\n        while (tries &lt; maxTries)\n        {\n            var completed = await Saver.Save();\n\n            if (completed)\n                break;\n            else\n            {\n                tries++;\n                await Task.Delay(TimeSpan.FromSeconds(0.1));\n            }\n        }\n\n        deferral.Complete();\n}\n</code></pre>\n\n<p><code>Save</code> method:</p>\n\n<pre><code>public static async Task&lt;bool&gt; Save()\n{\n        //some formatting etc.\n\n        var folder = await StorageFolder.GetFolderFromPathAsync(SavePath);\n        var file = await folder.CreateFileAsync(FileName, CreationCollisionOption.ReplaceExisting);\n\n        try\n        {\n            await FileIO.WriteLinesAsync(file, lines);\n            return true;\n        }\n        catch(Exception e)\n        {\n            return false;\n        }\n}\n</code></pre>\n\n<p>It is critical that the data is saved, which is why I \"solved\" the problem by trying to save the file multiple times with some delay. However my solution, presented in the <code>OnSuspending</code> method, does not seem like the correct way to do this. </p>\n\n<p>What is the correct approach? Thanks in advance!</p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 702, "user_id": 4261713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da2aa22c6a639ac66ac9f6e7a1436ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/4261713/chris-watts"}, "edited": false, "score": 4, "creation_date": 1504727423, "post_id": 46083265, "comment_id": 79128440, "body": "<code>@params</code> would escape the keyword"}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 1, "creation_date": 1504727536, "post_id": 46083265, "comment_id": 79128481, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/421257/how-do-i-use-a-c-sharp-keyword-as-a-property-name\">How do I use a C# keyword as a property name?</a>"}, {"owner": {"reputation": 988, "user_id": 1935371, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a45be919990c03e28bdc103b060b3d2d?s=128&d=identicon&r=PG", "display_name": "Apalabrados", "link": "https://stackoverflow.com/users/1935371/apalabrados"}, "reply_to_user": {"reputation": 702, "user_id": 4261713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da2aa22c6a639ac66ac9f6e7a1436ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/4261713/chris-watts"}, "edited": false, "score": 0, "creation_date": 1504727599, "post_id": 46083265, "comment_id": 79128518, "body": "Thanks @ChrisWatts. Works fine!"}], "answers": [{"comments": [{"owner": {"reputation": 702, "user_id": 4261713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da2aa22c6a639ac66ac9f6e7a1436ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Watts", "link": "https://stackoverflow.com/users/4261713/chris-watts"}, "edited": false, "score": 0, "creation_date": 1504779541, "post_id": 46083341, "comment_id": 79149186, "body": "This is definitely the better way to do it, so you can use &quot;C# style&quot; property names, just didnt want to assume (in my comment) that OP was using newtonsoft!"}], "tags": [], "owner": {"reputation": 451, "user_id": 6266596, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/513a33b64aa79481c6099ea606c141fc?s=128&d=identicon&r=PG&f=1", "display_name": "Danil Eroshenko", "link": "https://stackoverflow.com/users/6266596/danil-eroshenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1504727639, "creation_date": 1504727639, "answer_id": 46083341, "question_id": 46083265, "link": "https://stackoverflow.com/questions/46083265/c-using-params-variable-name-in-class/46083341#46083341", "title": "c# Using params variable name in Class", "body": "<p>You can use serialization attributes to set it's name. Like this (NewtonSoft.Json):</p>\n\n<pre><code>[JsonProperty(PropertyName = \"params\")]\npublic MyObject parameters { get; set; }\n</code></pre>\n\n<p><a href=\"https://www.newtonsoft.com/json/help/html/SerializationAttributes.htm\" rel=\"noreferrer\">Serialization Attributes in NewtonSoft.Json</a></p>\n"}, {"tags": [], "owner": {"reputation": 6227, "user_id": 7666972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZK1M.jpg?s=128&g=1", "display_name": "Vijayanath Viswanathan", "link": "https://stackoverflow.com/users/7666972/vijayanath-viswanathan"}, "is_accepted": false, "score": 4, "last_activity_date": 1504727650, "creation_date": 1504727650, "answer_id": 46083343, "question_id": 46083265, "link": "https://stackoverflow.com/questions/46083265/c-using-params-variable-name-in-class/46083343#46083343", "title": "c# Using params variable name in Class", "body": "<p>Please see MSDN for the same. You can still use keywords as variable name but by appending '@'. Example :- int @int= 100;</p>\n\n<p>Source,</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/</a></p>\n"}, {"tags": [], "owner": {"reputation": 13234, "user_id": 561113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8b050fcc50ffb8de47e6704660aa98?s=128&d=identicon&r=PG", "display_name": "Xiaoy312", "link": "https://stackoverflow.com/users/561113/xiaoy312"}, "is_accepted": false, "score": 1, "last_activity_date": 1504727930, "creation_date": 1504727930, "answer_id": 46083407, "question_id": 46083265, "link": "https://stackoverflow.com/questions/46083265/c-using-params-variable-name-in-class/46083407#46083407", "title": "c# Using params variable name in Class", "body": "<p>Other than the <code>@</code> escape and <code>JsonPropertyAttribute</code>, it is also worth mentioning that you don't need to follow the exact capitalization with a library like <code>NewtonSoft.Json</code>:</p>\n\n<pre><code>public string Params { get; set; }\n</code></pre>\n"}], "owner": {"reputation": 988, "user_id": 1935371, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a45be919990c03e28bdc103b060b3d2d?s=128&d=identicon&r=PG", "display_name": "Apalabrados", "link": "https://stackoverflow.com/users/1935371/apalabrados"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 46083341, "answer_count": 3, "score": 1, "last_activity_date": 1504728023, "creation_date": 1504727306, "question_id": 46083265, "link": "https://stackoverflow.com/questions/46083265/c-using-params-variable-name-in-class", "title": "c# Using params variable name in Class", "body": "<p>I have the following Class definition:</p>\n\n<pre><code>class PostObject\n{\n    public string jsonrpc { get; set; }\n    public string method { get; set; }\n    public MyObject params { get; set; }\n    public string id { get; set; }\n}\n</code></pre>\n\n<p>I use this class for a post call (serialized in json) and the server has '<strong>params</strong>' as an input post var and there's no way to change it.</p>\n\n<p>The question is that as <strong>params</strong> is a reserved keyword in c#, what should I do?</p>\n"}, {"tags": ["c#", "asp.net-core", ".net-core", "ftp", "publish"], "answers": [{"tags": [], "owner": {"reputation": 697, "user_id": 7074612, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/90d61b1aa11a3691a0d54bb46e35f9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Meroz", "link": "https://stackoverflow.com/users/7074612/meroz"}, "is_accepted": false, "score": 0, "last_activity_date": 1505413406, "creation_date": 1505413406, "answer_id": 46225951, "question_id": 46083179, "link": "https://stackoverflow.com/questions/46083179/net-core-2-0-prepare-all-files-to-publish-in-one-folder-in-by-running-command/46225951#46225951", "title": ".net core 2.0 prepare all files to publish in one folder in by running command", "body": "<p>For now I only come up with one liner (tested on macOS). \n<code>dotnet publish -c Release -o ~/Desktop/toFtp/ ; cp -r Views/ ~/Desktop/toFtp/Views/</code>. It looks like a bug from .net core 2.0 for now. It is not proper way but works for now.</p>\n"}, {"tags": [], "owner": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1505417954, "creation_date": 1505417954, "answer_id": 46227034, "question_id": 46083179, "link": "https://stackoverflow.com/questions/46083179/net-core-2-0-prepare-all-files-to-publish-in-one-folder-in-by-running-command/46227034#46227034", "title": ".net core 2.0 prepare all files to publish in one folder in by running command", "body": "<p>According to the <a href=\"https://docs.microsoft.com/en-us/aspnet/core/mvc/views/view-compilation?tabs=aspnetcore2x\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>The ASP.NET Core 2.x project templates enable precompilation by default.</p>\n</blockquote>\n\n<p>This simply means there will be no .cshtml files, etc, as they're precompiled into the published output i.e. assembly for you.</p>\n\n<p>If you examine the published output, you should see something like:</p>\n\n<blockquote>\n  <p>YourMvcProject.PrecompiledViews.dll</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 697, "user_id": 7074612, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/90d61b1aa11a3691a0d54bb46e35f9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Meroz", "link": "https://stackoverflow.com/users/7074612/meroz"}, "reply_to_user": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "edited": false, "score": 0, "creation_date": 1505509901, "post_id": 46243022, "comment_id": 79459269, "body": "I use 2.1. <a href=\"https://docs.microsoft.com/en-us/aspnet/core/mvc/views/view-compilation?tabs=aspnetcore2x\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/aspnet/core/mvc/views/&hellip;</a> docs says I should add it?"}, {"owner": {"reputation": 59385, "user_id": 2630078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UHzHh.png?s=128&g=1", "display_name": "Kirk Larkin", "link": "https://stackoverflow.com/users/2630078/kirk-larkin"}, "edited": false, "score": 0, "creation_date": 1505509969, "post_id": 46243022, "comment_id": 79459290, "body": "<i>The ASP.NET Core 2.x project templates implicitly set MvcRazorCompileOnPublish to true by default, which means this node can be safely removed from the .csproj file. If you prefer to be explicit, there&#39;s no harm in setting the MvcRazorCompileOnPublish property to true.</i>"}], "tags": [], "owner": {"reputation": 697, "user_id": 7074612, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/90d61b1aa11a3691a0d54bb46e35f9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Meroz", "link": "https://stackoverflow.com/users/7074612/meroz"}, "is_accepted": false, "score": 0, "last_activity_date": 1505489385, "creation_date": 1505489385, "answer_id": 46243022, "question_id": 46083179, "link": "https://stackoverflow.com/questions/46083179/net-core-2-0-prepare-all-files-to-publish-in-one-folder-in-by-running-command/46243022#46243022", "title": ".net core 2.0 prepare all files to publish in one folder in by running command", "body": "<p>According to some answers, I want to combine them. So I can use <code>dotnet publish -c Release -o ~/Desktop/release/</code> but add also to myProject.csproj in <code>&lt;PropertyGroup&gt;</code> this: <code>&lt;MvcRazorCompileOnPublish&gt;true&lt;/MvcRazorCompileOnPublish&gt;</code> so it will precompile all view into dll file. The publish it and should work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 1229, "user_id": 4789208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb8688a32568ccc2a47dde684572dbd2?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Al Jabry", "link": "https://stackoverflow.com/users/4789208/ahmed-al-jabry"}, "is_accepted": false, "score": 0, "last_activity_date": 1511340800, "creation_date": 1511340800, "answer_id": 47430356, "question_id": 46083179, "link": "https://stackoverflow.com/questions/46083179/net-core-2-0-prepare-all-files-to-publish-in-one-folder-in-by-running-command/47430356#47430356", "title": ".net core 2.0 prepare all files to publish in one folder in by running command", "body": "<p>-if you want to deploy Views folder  :</p>\n\n<pre><code>   &lt;PropertyGroup&gt;\n    &lt;TargetFramework&gt;net461&lt;/TargetFramework&gt;   \n    &lt;MvcRazorCompileOnPublish&gt;false&lt;/MvcRazorCompileOnPublish&gt;\n  &lt;/PropertyGroup&gt;\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 7074612, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/90d61b1aa11a3691a0d54bb46e35f9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Meroz", "link": "https://stackoverflow.com/users/7074612/meroz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 1, "accepted_answer_id": 46227034, "answer_count": 4, "score": 0, "last_activity_date": 1555847740, "creation_date": 1504726998, "last_edit_date": 1555847740, "question_id": 46083179, "link": "https://stackoverflow.com/questions/46083179/net-core-2-0-prepare-all-files-to-publish-in-one-folder-in-by-running-command", "title": ".net core 2.0 prepare all files to publish in one folder in by running command", "body": "<p>I want to prepare all files to upload by FTP. I tried command <code>dotnet publish -c Release -o ~/Desktop/toFtp</code>. Unfortunately view folder was not copied. Is there a way to do it?</p>\n"}, {"tags": ["c#", "smtp"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1504726927, "post_id": 46083144, "comment_id": 79128200, "body": "That probably means your password is wrong."}, {"owner": {"reputation": 381, "user_id": 1264882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e826fc5bd717b7227da8be6df27f488c?s=128&d=identicon&r=PG", "display_name": "WithMetta", "link": "https://stackoverflow.com/users/1264882/withmetta"}, "edited": false, "score": 0, "creation_date": 1504726991, "post_id": 46083144, "comment_id": 79128235, "body": "Check this post to see if the solutions work for you. <a href=\"https://stackoverflow.com/questions/35751844/smtp-5-7-57-error-when-trying-to-send-email-via-office-365\" title=\"smtp 5 7 57 error when trying to send email via office 365\">stackoverflow.com/questions/35751844/&hellip;</a>"}, {"owner": {"reputation": 39, "user_id": 7116364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9b2208a8a43ca3d642d63b74d50ac8?s=128&d=identicon&r=PG&f=1", "display_name": "abelh2200", "link": "https://stackoverflow.com/users/7116364/abelh2200"}, "edited": false, "score": 0, "creation_date": 1504726998, "post_id": 46083144, "comment_id": 79128238, "body": "no, Is not wrong I checked it, is getting the correct password"}, {"owner": {"reputation": 451, "user_id": 6266596, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/513a33b64aa79481c6099ea606c141fc?s=128&d=identicon&r=PG&f=1", "display_name": "Danil Eroshenko", "link": "https://stackoverflow.com/users/6266596/danil-eroshenko"}, "edited": false, "score": 1, "creation_date": 1504727426, "post_id": 46083144, "comment_id": 79128442, "body": "Why you are using &quot;password&quot; instead of password in NetworkCredential?"}, {"owner": {"reputation": 39, "user_id": 7116364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9b2208a8a43ca3d642d63b74d50ac8?s=128&d=identicon&r=PG&f=1", "display_name": "abelh2200", "link": "https://stackoverflow.com/users/7116364/abelh2200"}, "edited": false, "score": 0, "creation_date": 1504727691, "post_id": 46083144, "comment_id": 79128581, "body": "I change the password and try some things of that post and nothing"}, {"owner": {"reputation": 6496, "user_id": 4190402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q82KR.jpg?s=128&g=1", "display_name": "JuanR", "link": "https://stackoverflow.com/users/4190402/juanr"}, "edited": false, "score": 0, "creation_date": 1504727709, "post_id": 46083144, "comment_id": 79128590, "body": "Take the quotes off <code>&quot;password&quot;</code> in the <code>NetworkCredential</code> constructor and you should be good to go."}, {"owner": {"reputation": 39, "user_id": 7116364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9b2208a8a43ca3d642d63b74d50ac8?s=128&d=identicon&r=PG&f=1", "display_name": "abelh2200", "link": "https://stackoverflow.com/users/7116364/abelh2200"}, "edited": false, "score": 0, "creation_date": 1504727764, "post_id": 46083144, "comment_id": 79128624, "body": "&quot;password&quot; means the password , is an example, I&#39;m not going to put the real password"}, {"owner": {"reputation": 39, "user_id": 7116364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9b2208a8a43ca3d642d63b74d50ac8?s=128&d=identicon&r=PG&f=1", "display_name": "abelh2200", "link": "https://stackoverflow.com/users/7116364/abelh2200"}, "edited": false, "score": 0, "creation_date": 1504728165, "post_id": 46083144, "comment_id": 79128816, "body": "yes , but forgot about the quotes , ok my mistake put password without quotes and still not working"}, {"owner": {"reputation": 6496, "user_id": 4190402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q82KR.jpg?s=128&g=1", "display_name": "JuanR", "link": "https://stackoverflow.com/users/4190402/juanr"}, "edited": false, "score": 0, "creation_date": 1504728317, "post_id": 46083144, "comment_id": 79128887, "body": "What component are you using? <code>System.Net.Mail.SmtpClient</code> does not have a constructor with two strings. Is this a third party class?"}, {"owner": {"reputation": 39, "user_id": 7116364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9b2208a8a43ca3d642d63b74d50ac8?s=128&d=identicon&r=PG&f=1", "display_name": "abelh2200", "link": "https://stackoverflow.com/users/7116364/abelh2200"}, "edited": false, "score": 0, "creation_date": 1504728539, "post_id": 46083144, "comment_id": 79129001, "body": "You right  Juan my mistake when I put the post is an int and Is correct in my code, and not is not a third party class, is System.Net.Mail.SmtpClient"}, {"owner": {"reputation": 39, "user_id": 7116364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9b2208a8a43ca3d642d63b74d50ac8?s=128&d=identicon&r=PG&f=1", "display_name": "abelh2200", "link": "https://stackoverflow.com/users/7116364/abelh2200"}, "edited": false, "score": 0, "creation_date": 1504729786, "post_id": 46083144, "comment_id": 79129618, "body": "Somebody has any idea what could be happening"}, {"owner": {"reputation": 6496, "user_id": 4190402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q82KR.jpg?s=128&g=1", "display_name": "JuanR", "link": "https://stackoverflow.com/users/4190402/juanr"}, "edited": false, "score": 0, "creation_date": 1504790330, "post_id": 46083144, "comment_id": 79156669, "body": "What are you setting the <code>message.From</code> property to?"}, {"owner": {"reputation": 39, "user_id": 7116364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9b2208a8a43ca3d642d63b74d50ac8?s=128&d=identicon&r=PG&f=1", "display_name": "abelh2200", "link": "https://stackoverflow.com/users/7116364/abelh2200"}, "edited": false, "score": 0, "creation_date": 1504790457, "post_id": 46083144, "comment_id": 79156757, "body": "I was using the wrong smtp server , it was smtp.live.com , thank you all"}], "owner": {"reputation": 39, "user_id": 7116364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d9b2208a8a43ca3d642d63b74d50ac8?s=128&d=identicon&r=PG&f=1", "display_name": "abelh2200", "link": "https://stackoverflow.com/users/7116364/abelh2200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1586689032, "creation_date": 1504726866, "last_edit_date": 1504728437, "question_id": 46083144, "link": "https://stackoverflow.com/questions/46083144/the-smtp-server-requires-a-secure-connection-or-the-client-was-not-authenticated", "title": "The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.57 SMTP", "body": "<p>I know that this an old question but I can find a solution for my problem, here is the thing , I am trying to send a email via smtp of outlook , but I get this error message: The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.57 SMTP, sorry for my english.</p>\n\n<pre><code>public void Send(MailMessage message)\n    {\n        msgToSend = message;\n\n        string password = string.Empty;\n\n        password = CryptoHelper.DecryptData(\"encoded_password\", \"key\");\n\n        var smtpClient = new SmtpClient(\"smtp.office365.com\", 587);\n        smtpClient.UseDefaultCredentials = false;\n        smtpClient.Credentials = new NetworkCredential(\"username\", \"password\");\n        smtpClient.EnableSsl = true;\n        smtpClient.SendCompleted += new SendCompletedEventHandler(SendCompletedCallback);\n        smtpClient.SendCompleted += (s, e) =&gt;\n        {\n            smtpClient.Dispose();\n            message.Dispose();\n        };\n\n        smtpClient.SendAsync(message, null);\n    }\n</code></pre>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 13234, "user_id": 561113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8b050fcc50ffb8de47e6704660aa98?s=128&d=identicon&r=PG", "display_name": "Xiaoy312", "link": "https://stackoverflow.com/users/561113/xiaoy312"}, "edited": false, "score": 3, "creation_date": 1504726923, "post_id": 46083123, "comment_id": 79128198, "body": "Please post the code instead of a screenshot"}, {"owner": {"reputation": 13234, "user_id": 561113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8b050fcc50ffb8de47e6704660aa98?s=128&d=identicon&r=PG", "display_name": "Xiaoy312", "link": "https://stackoverflow.com/users/561113/xiaoy312"}, "edited": false, "score": 0, "creation_date": 1504727062, "post_id": 46083123, "comment_id": 79128267, "body": "It seems like there is a class named <code>Stream</code> in your namespace that clashed with <code>System.IO.Stream</code>. Could it be the case?"}, {"owner": {"reputation": 11, "user_id": 8570790, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wLN_x3La7KU/AAAAAAAAAAI/AAAAAAAAB0E/NREe4gdigs4/photo.jpg?sz=128", "display_name": "JoePlays Tv", "link": "https://stackoverflow.com/users/8570790/joeplays-tv"}, "edited": false, "score": 0, "creation_date": 1504727091, "post_id": 46083123, "comment_id": 79128276, "body": "It&#39;s too long to add the code..."}, {"owner": {"reputation": 13234, "user_id": 561113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8b050fcc50ffb8de47e6704660aa98?s=128&d=identicon&r=PG", "display_name": "Xiaoy312", "link": "https://stackoverflow.com/users/561113/xiaoy312"}, "edited": false, "score": 0, "creation_date": 1504727128, "post_id": 46083123, "comment_id": 79128300, "body": "You can also write <code>var stream = openFileDialog.OpenFile();\\n if (stream == null)</code> instead"}, {"owner": {"reputation": 11, "user_id": 8570790, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wLN_x3La7KU/AAAAAAAAAAI/AAAAAAAAB0E/NREe4gdigs4/photo.jpg?sz=128", "display_name": "JoePlays Tv", "link": "https://stackoverflow.com/users/8570790/joeplays-tv"}, "edited": false, "score": 0, "creation_date": 1504727238, "post_id": 46083123, "comment_id": 79128359, "body": "var stream = openFileDialog.OpenFile();\\n if (stream == null) gave me even more errors!"}, {"owner": {"reputation": 12952, "user_id": 286934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16a184d26b72795ff243464d715cffe?s=128&d=identicon&r=PG", "display_name": "Progman", "link": "https://stackoverflow.com/users/286934/progman"}, "edited": false, "score": 0, "creation_date": 1504728581, "post_id": 46083123, "comment_id": 79129026, "body": "@JoePlaysTv You shouldn&#39;t add the code in a comment but in your question. Click on &quot;edit&quot; to edit your original question to include your source code."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8570790, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wLN_x3La7KU/AAAAAAAAAAI/AAAAAAAAB0E/NREe4gdigs4/photo.jpg?sz=128", "display_name": "JoePlays Tv", "link": "https://stackoverflow.com/users/8570790/joeplays-tv"}, "edited": false, "score": 0, "creation_date": 1504728091, "post_id": 46083250, "comment_id": 79128788, "body": "While this solved the problem i posted, i&#39;m getting 2 more errors!:Error\t1\tThe best overloaded method match for &#39;Project_Jynx.Form1.Using(Project_Jynx.Stream)&#39; has some invalid arguments\tC:\\Users\\User\\Desktop\\Project jynx W.I.P EXPLOIT\\Project_Jynx\\Project_Jynx\\Form1.cs\t13\tProject_Jynx and i&#39;m getting:Error\t2\tArgument 1: cannot convert from &#39;System.IO.Stream&#39; to &#39;Project_Jynx.Stream&#39;\tC:\\Users\\User\\Desktop\\Project jynx W.I.P EXPLOIT\\Project_Jynx\\Project_Jynx\\Form1.cs\t20\tProject_Jynx"}, {"owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "reply_to_user": {"reputation": 11, "user_id": 8570790, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wLN_x3La7KU/AAAAAAAAAAI/AAAAAAAAB0E/NREe4gdigs4/photo.jpg?sz=128", "display_name": "JoePlays Tv", "link": "https://stackoverflow.com/users/8570790/joeplays-tv"}, "edited": false, "score": 0, "creation_date": 1504729930, "post_id": 46083250, "comment_id": 79129710, "body": "@JoePlaysTv Make your <code>Using</code> method accept a <code>System.IO.Stream</code>, and every other occurrence of <code>Stream</code> that you actually mean <code>System.IO.Stream</code>. Also, why do you have a <code>Stream</code> class in your class anyway? Consider deleting that class if it is not used."}], "tags": [], "owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "is_accepted": false, "score": 3, "last_activity_date": 1504727231, "creation_date": 1504727231, "answer_id": 46083250, "question_id": 46083123, "link": "https://stackoverflow.com/questions/46083123/error-cannot-implicity-convert-type-system-io-stream-to-project-jynx-stream/46083250#46083250", "title": "Error Cannot Implicity convert type &#39;System.IO.Stream&#39; to &#39;Project_Jynx.Stream&#39;", "body": "<p>Apparently, you have a <code>Stream</code> class defined in your project. The compiler does not know that you actually meant <code>System.IO.Stream</code>. It thought you meant the <code>Stream</code> in your project when it saw this line:</p>\n\n<pre><code>Stream stream;\n</code></pre>\n\n<p>And then you assign <code>openFileDialog.OpenFile()</code>, which returns a <code>System.IO.Stream</code>, to it.</p>\n\n<p>To tell the compiler to use <code>System.IO.Stream</code>, just write <code>System.IO.</code> in front:</p>\n\n<pre><code>System.IO.Stream stream;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1504728585, "creation_date": 1504728585, "answer_id": 46083566, "question_id": 46083123, "link": "https://stackoverflow.com/questions/46083123/error-cannot-implicity-convert-type-system-io-stream-to-project-jynx-stream/46083566#46083566", "title": "Error Cannot Implicity convert type &#39;System.IO.Stream&#39; to &#39;Project_Jynx.Stream&#39;", "body": "<p>I started an answer, but Sweeper beat me to it. So here's a different one: don't use a <code>Stream</code> at all:</p>\n\n<pre><code>if (openFileDialog.ShowDialog() == DialogResult.OK)\n{\n    try\n    {\n        richTextBox1.Text = File.ReadAllText(openFileDialog.FileName);\n    }\n    catch(Exception e)\n    {\n        richTextBox1.Text = $\"Error reading file {openFileDialog.FileName}: {e}\";\n    }    \n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8570790, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wLN_x3La7KU/AAAAAAAAAAI/AAAAAAAAB0E/NREe4gdigs4/photo.jpg?sz=128", "display_name": "JoePlays Tv", "link": "https://stackoverflow.com/users/8570790/joeplays-tv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1504728585, "creation_date": 1504726776, "last_edit_date": 1504728152, "question_id": 46083123, "link": "https://stackoverflow.com/questions/46083123/error-cannot-implicity-convert-type-system-io-stream-to-project-jynx-stream", "title": "Error Cannot Implicity convert type &#39;System.IO.Stream&#39; to &#39;Project_Jynx.Stream&#39;", "body": "<p>I keep on getting this error: </p>\n\n<blockquote>\n  <p>Error 1   Cannot implicitly convert type 'System.IO.Stream' to 'Project_Jynx.Stream'  C:\\Users\\User\\Desktop\\Project jynx W.I.P EXPLOIT\\Project_Jynx\\Project_Jynx\\Form1.cs 27  Project_Jynx.</p>\n</blockquote>\n\n<p>I need help on fixing this because i want to finish this coding.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dO290.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dO290.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "database", "datagridview"], "comments": [{"owner": {"reputation": 381, "user_id": 1264882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e826fc5bd717b7227da8be6df27f488c?s=128&d=identicon&r=PG", "display_name": "WithMetta", "link": "https://stackoverflow.com/users/1264882/withmetta"}, "edited": false, "score": 1, "creation_date": 1504727213, "post_id": 46083066, "comment_id": 79128337, "body": "Maybe use nullable DateTime (DateTime?)"}, {"owner": {"reputation": 2105, "user_id": 5884037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyWD.jpg?s=128&g=1", "display_name": "blaze_125", "link": "https://stackoverflow.com/users/5884037/blaze-125"}, "edited": false, "score": 0, "creation_date": 1504727256, "post_id": 46083066, "comment_id": 79128370, "body": "What&#39;s the exception? Is the exception on assigning a value to your variable, or is your exception in trying to update the table?"}, {"owner": {"reputation": 47, "user_id": 5707749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-c3b-vF2rhoY/AAAAAAAAAAI/AAAAAAAAABU/oToIiRwHwU4/photo.jpg?sz=128", "display_name": "Petr&#244;nio Mesquita", "link": "https://stackoverflow.com/users/5707749/petr%c3%b4nio-mesquita"}, "edited": false, "score": 0, "creation_date": 1504727722, "post_id": 46083066, "comment_id": 79128600, "body": "WithMetta - DateTime is non nullable."}], "answers": [{"tags": [], "owner": {"reputation": 2105, "user_id": 5884037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyWD.jpg?s=128&g=1", "display_name": "blaze_125", "link": "https://stackoverflow.com/users/5884037/blaze-125"}, "is_accepted": false, "score": 0, "last_activity_date": 1504729474, "last_edit_date": 1504729474, "creation_date": 1504728218, "answer_id": 46083469, "question_id": 46083066, "link": "https://stackoverflow.com/questions/46083066/bound-datagridview-tableadapter-update/46083469#46083469", "title": "Bound DataGridView TableAdapter Update", "body": "<p>I don't think your empty Date cell value would actually <code>== DBNull.Value</code>\nWhat if you tried this instead?</p>\n\n<pre><code>DateTime data = row.Cells[\"dataDataGridViewTextBoxColumn1\"].Value == null ? DateTime.MinValue : Convert.ToDateTime(row.Cells[\"dataDataGridViewTextBoxColumn1\"].Value);\n</code></pre>\n\n<p>Or maybe even something like this using <code>string.IsNullOrEmpty()</code> on the <code>.FormattedValue</code></p>\n\n<pre><code>DateTime data = string.IsNullOrEmpty((string)row.Cells[\"dataDataGridViewTextBoxColumn1\"].FormattedValue) ? DateTime.MinValue : Convert.ToDateTime(row.Cells[\"dataDataGridViewTextBoxColumn1\"].Value);\n</code></pre>\n\n<p>.</p>\n\n<pre><code>//UPDATE DE LINHA\nDataGridViewRow row = SubProgDGV.Rows[e.RowIndex];\nGuid guid = (Guid)row.Cells[\"gUIDDataGridViewTextBoxColumn\"].Value;\nint cascoid = Convert.ToInt16(row.Cells[\"cascoIDDataGridViewTextBoxColumn3\"].Value);\nstring casco = row.Cells[\"cascoDataGridViewTextBoxColumn11\"].Value.ToString();\nint blocoid = Convert.ToInt16(row.Cells[\"blocoIDDataGridViewTextBoxColumn5\"].Value);\nstring bloco = row.Cells[\"blocoDataGridViewTextBoxColumn11\"].Value.ToString();\nstring sub = row.Cells[\"subDataGridViewTextBoxColumn1\"].Value.ToString();\nstring ssub = row.Cells[\"sSubDataGridViewTextBoxColumn1\"].Value.ToString();\nstring linha = row.Cells[\"linhaDataGridViewTextBoxColumn\"].Value.ToString();\nint qtd = Convert.ToInt16(row.Cells[\"quantidadeDataGridViewTextBoxColumn3\"].Value);\ndouble peso = Convert.ToDouble(row.Cells[\"pesoDataGridViewTextBoxColumn4\"].Value);\nDateTime datacmb = Convert.ToDateTime(row.Cells[\"inicioPlanMontagemDataGridViewTextBoxColumn\"].Value);\nstring oficina = row.Cells[\"oficinaDataGridViewTextBoxColumn\"].Value.ToString();\nDateTime datasub = Convert.ToDateTime(row.Cells[\"inicioPlanSubmontagemDataGridViewTextBoxColumn\"].Value);\nDateTime datasubfim = Convert.ToDateTime(row.Cells[\"terminoPlanSubmontagemDataGridViewTextBoxColumn\"].Value);\nDateTime datatermino = row.Cells[\"teminoRealDataGridViewTextBoxColumn\"].Value == null ? DateTime.MinValue : Convert.ToDateTime(row.Cells[\"teminoRealDataGridViewTextBoxColumn\"].Value);\nstring turno = row.Cells[\"turnoDataGridViewTextBoxColumn\"].Value.ToString();\nstring statusproc = row.Cells[\"statusProcessamentoDataGridViewTextBoxColumn\"].Value.ToString();\nstring statussub = row.Cells[\"statusSubDataGridViewTextBoxColumn\"].Value.ToString();\nDateTime data = row.Cells[\"dataDataGridViewTextBoxColumn1\"].Value == null ? DateTime.MinValue : Convert.ToDateTime(row.Cells[\"dataDataGridViewTextBoxColumn1\"].Value);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2105, "user_id": 5884037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyWD.jpg?s=128&g=1", "display_name": "blaze_125", "link": "https://stackoverflow.com/users/5884037/blaze-125"}, "edited": false, "score": 0, "creation_date": 1504731257, "post_id": 46084057, "comment_id": 79130359, "body": "Not that it is wrong but, you are checking for DBNull against the data stored in the <code>reader</code>, he/she is trying to evaluate the content of the <code>DataGridViewCell</code>."}], "tags": [], "owner": {"reputation": 672, "user_id": 6741585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a13956927d1ee106552b2f2d362f1?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6741585/ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1504730680, "creation_date": 1504730680, "answer_id": 46084057, "question_id": 46083066, "link": "https://stackoverflow.com/questions/46083066/bound-datagridview-tableadapter-update/46084057#46084057", "title": "Bound DataGridView TableAdapter Update", "body": "<p>the only way i found is to check is it null or not using IsDBNull as below code ,just remember to always use DateTime? to allow for null in all cases </p>\n\n<pre><code>DateTime?  PrintDate =  reader.IsDBNull(reader.GetOrdinal(\"PrintDate\")) ? (DateTime?)null :  DateTime.Parse(reader.GetString(reader.GetOrdinal(\"PrintDate\")))\n</code></pre>\n\n<p>this solution had some performance prices , but it do the job </p>\n"}, {"comments": [{"owner": {"reputation": 2105, "user_id": 5884037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyWD.jpg?s=128&g=1", "display_name": "blaze_125", "link": "https://stackoverflow.com/users/5884037/blaze-125"}, "edited": false, "score": 0, "creation_date": 1504789756, "post_id": 46096578, "comment_id": 79156264, "body": "This <i>solution</i> makes no sense. You are checking every cell on the row, regardless of <code>when</code> you check, an empty string will remain an empty string, a null will remain a null. Unless something else in your code is different, I don&#39;t see how doing the same thing on a different event fixes your problem."}, {"owner": {"reputation": 47, "user_id": 5707749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-c3b-vF2rhoY/AAAAAAAAAAI/AAAAAAAAABU/oToIiRwHwU4/photo.jpg?sz=128", "display_name": "Petr&#244;nio Mesquita", "link": "https://stackoverflow.com/users/5707749/petr%c3%b4nio-mesquita"}, "reply_to_user": {"reputation": 2105, "user_id": 5884037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyWD.jpg?s=128&g=1", "display_name": "blaze_125", "link": "https://stackoverflow.com/users/5884037/blaze-125"}, "edited": false, "score": 0, "creation_date": 1506108842, "post_id": 46096578, "comment_id": 79703538, "body": "I&#39;ve abandonned the previous strategy and used this instead:  XBindingSource_CurrentItemChanged(object sender, EventArgs e)         {                 foreach (DataRowView item in (BindingSource)sender)                 {                     if (item != null)                     {                         DataRow ThisDataRow = ((DataRowView)item).Row;                         if (ThisDataRow.RowState == DataRowState.Modified)                         {                             this.epsProgramacaoSubmontagemTableAdapter.Update(ThisDataRo&zwnj;&#8203;w);                         }"}], "tags": [], "owner": {"reputation": 47, "user_id": 5707749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-c3b-vF2rhoY/AAAAAAAAAAI/AAAAAAAAABU/oToIiRwHwU4/photo.jpg?sz=128", "display_name": "Petr&#244;nio Mesquita", "link": "https://stackoverflow.com/users/5707749/petr%c3%b4nio-mesquita"}, "is_accepted": true, "score": 0, "last_activity_date": 1504787828, "creation_date": 1504787828, "answer_id": 46096578, "question_id": 46083066, "link": "https://stackoverflow.com/questions/46083066/bound-datagridview-tableadapter-update/46096578#46096578", "title": "Bound DataGridView TableAdapter Update", "body": "<p>I could find no solution regarding check null or workarounds, instead I used DataGridViewDataBindSource_CurrentItemChanged event.\nEvery time a change occour it is triggered and automatically apply changes to DB, I think this should be autobuilded as one selects Enable Editting on a bound DataGridView.</p>\n"}], "owner": {"reputation": 47, "user_id": 5707749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-c3b-vF2rhoY/AAAAAAAAAAI/AAAAAAAAABU/oToIiRwHwU4/photo.jpg?sz=128", "display_name": "Petr&#244;nio Mesquita", "link": "https://stackoverflow.com/users/5707749/petr%c3%b4nio-mesquita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46096578, "answer_count": 3, "score": 0, "last_activity_date": 1504787828, "creation_date": 1504726555, "last_edit_date": 1504726958, "question_id": 46083066, "link": "https://stackoverflow.com/questions/46083066/bound-datagridview-tableadapter-update", "title": "Bound DataGridView TableAdapter Update", "body": "<p>An DataGridView that is bound to an DB table. I have set an tableadapter with Update command triggered by CellEndEdit event however I have some trouble calling update.</p>\n\n<p>Update command:</p>\n\n<pre><code>UPDATE       dbo.EpsProgramacaoSubmontagem\nSET                GUID = @GUID, CascoID = @CascoID, Casco = @Casco, BlocoID = @BlocoID, Bloco = @Bloco, Sub = @Sub, SSub = @SSub, Linha = @Linha, \n                         Quantidade = @Quantidade, Peso = @Peso, [Inicio Plan Montagem] = @Inicio_Plan_Montagem, Oficina = @Oficina, \n                         [Inicio Plan Submontagem] = @Inicio_Plan_Submontagem, [Termino Plan Submontagem] = @Termino_Plan_Submontagem, [Temino Real] = @Temino_Real, \n                         Turno = @Turno, [Status Processamento] = @Status_Processamento, [Status Sub] = @Status_Sub, [Data ] = @Data_\nWHERE        (GUID = @Original_GUID)\n</code></pre>\n\n<p>Every TableAdapter.Update parameter from above is related to DataGridView column. I have already tried this:</p>\n\n<pre><code>private void SubProgDGV_CellEndEdit(object sender, DataGridViewCellEventArgs e)\n    {\n        //UPDATE DE LINHA\n        DataGridViewRow row = SubProgDGV.Rows[e.RowIndex];\n        Guid guid = (Guid)row.Cells[\"gUIDDataGridViewTextBoxColumn\"].Value;\n        int cascoid = Convert.ToInt16(row.Cells[\"cascoIDDataGridViewTextBoxColumn3\"].Value);\n        string casco = row.Cells[\"cascoDataGridViewTextBoxColumn11\"].Value.ToString();\n        int blocoid = Convert.ToInt16(row.Cells[\"blocoIDDataGridViewTextBoxColumn5\"].Value);\n        string bloco = row.Cells[\"blocoDataGridViewTextBoxColumn11\"].Value.ToString();\n        string sub = row.Cells[\"subDataGridViewTextBoxColumn1\"].Value.ToString();\n        string ssub = row.Cells[\"sSubDataGridViewTextBoxColumn1\"].Value.ToString();\n        string linha = row.Cells[\"linhaDataGridViewTextBoxColumn\"].Value.ToString();\n        int qtd = Convert.ToInt16(row.Cells[\"quantidadeDataGridViewTextBoxColumn3\"].Value);\n        double peso = Convert.ToDouble(row.Cells[\"pesoDataGridViewTextBoxColumn4\"].Value);\n        DateTime datacmb = Convert.ToDateTime(row.Cells[\"inicioPlanMontagemDataGridViewTextBoxColumn\"].Value);\n        string oficina = row.Cells[\"oficinaDataGridViewTextBoxColumn\"].Value.ToString();\n        DateTime datasub = Convert.ToDateTime(row.Cells[\"inicioPlanSubmontagemDataGridViewTextBoxColumn\"].Value);\n        DateTime datasubfim = Convert.ToDateTime(row.Cells[\"terminoPlanSubmontagemDataGridViewTextBoxColumn\"].Value);\n        DateTime datatermino = row.Cells[\"teminoRealDataGridViewTextBoxColumn\"].Value == DBNull.Value ? DateTime.MinValue : Convert.ToDateTime(row.Cells[\"teminoRealDataGridViewTextBoxColumn\"].Value);\n        string turno = row.Cells[\"turnoDataGridViewTextBoxColumn\"].Value.ToString();\n        string statusproc = row.Cells[\"statusProcessamentoDataGridViewTextBoxColumn\"].Value.ToString();\n        string statussub = row.Cells[\"statusSubDataGridViewTextBoxColumn\"].Value.ToString();\n        DateTime data = row.Cells[\"dataDataGridViewTextBoxColumn1\"].Value == DBNull.Value ? DateTime.MinValue : Convert.ToDateTime(row.Cells[\"dataDataGridViewTextBoxColumn1\"].Value);\n\n        this.epsProgramacaoSubmontagemTableAdapter.Update(cascoid, casco, blocoid, bloco, sub, ssub, linha, qtd, peso, datacmb, oficina, datasub, datasubfim, datatermino, turno, statusproc, statussub, data , guid );\n    }\n</code></pre>\n\n<p>However everytime that one of the datetimes parameters are null it throws an exception. Is there a better way to deal with this? Since I have already set the relation between DGV columns and SQL parameters shouldnt be a straightforward way?</p>\n"}, {"tags": ["c#", "azure", "nhibernate", "fluent-nhibernate"], "comments": [{"owner": {"reputation": 355, "user_id": 1296937, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c78eab127f2d51c18013d9c5250881b5?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1296937/nick"}, "edited": false, "score": 0, "creation_date": 1504730558, "post_id": 46083060, "comment_id": 79130021, "body": "Are you using the default Log4Net logging that NHibernate has?"}, {"owner": {"reputation": 5322, "user_id": 7411852, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10210681797466386/picture?type=large", "display_name": "Matt Spinks", "link": "https://stackoverflow.com/users/7411852/matt-spinks"}, "reply_to_user": {"reputation": 355, "user_id": 1296937, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c78eab127f2d51c18013d9c5250881b5?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1296937/nick"}, "edited": false, "score": 0, "creation_date": 1504731912, "post_id": 46083060, "comment_id": 79130641, "body": "I am not. In fact, I do not even have a reference to Log4Net in my project anywhere."}, {"owner": {"reputation": 22308, "user_id": 7005159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550c3427cedf0d13b6d2b03bf25a793f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Sun - MSFT", "link": "https://stackoverflow.com/users/7005159/tom-sun-msft"}, "edited": false, "score": 0, "creation_date": 1504775434, "post_id": 46083060, "comment_id": 79146256, "body": "I can&#39;t repro the issue that you mentioned on my side with you supplied code. I assume it is not related to azure platform, it seems casued by NHibernate. Do you have a try to configurate Diagnostics disable? Fluently.Configure() .Database(MsSqlConfiguration.MsSql2008 .ConnectionString(connString) ) .Cache(c =&gt; c .UseQueryCache()) .Mappings(m =&gt; m.FluentMappings.AddFromAssemblyOf&lt;Functions&gt;()) .Diagnostics(x=&gt;x.Disable()) .BuildSessionFactory();"}, {"owner": {"reputation": 5322, "user_id": 7411852, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10210681797466386/picture?type=large", "display_name": "Matt Spinks", "link": "https://stackoverflow.com/users/7411852/matt-spinks"}, "reply_to_user": {"reputation": 22308, "user_id": 7005159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550c3427cedf0d13b6d2b03bf25a793f?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Sun - MSFT", "link": "https://stackoverflow.com/users/7005159/tom-sun-msft"}, "edited": false, "score": 0, "creation_date": 1504907817, "post_id": 46083060, "comment_id": 79212766, "body": "Nice thought, @Tom, but I tried it and it didn&#39;t seem to make a difference. Thanks though."}], "answers": [{"comments": [{"owner": {"reputation": 5322, "user_id": 7411852, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10210681797466386/picture?type=large", "display_name": "Matt Spinks", "link": "https://stackoverflow.com/users/7411852/matt-spinks"}, "edited": false, "score": 0, "creation_date": 1504907739, "post_id": 46095546, "comment_id": 79212742, "body": "Sorry, @David, that didn&#39;t seem to make a difference. Thanks though."}], "tags": [], "owner": {"reputation": 6032, "user_id": 1162077, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5tAG0.png?s=128&g=1", "display_name": "David Osborne", "link": "https://stackoverflow.com/users/1162077/david-osborne"}, "is_accepted": false, "score": 0, "last_activity_date": 1504784809, "creation_date": 1504784809, "answer_id": 46095546, "question_id": 46083060, "link": "https://stackoverflow.com/questions/46083060/how-to-stop-nhibernate-from-logging-in-azure/46095546#46095546", "title": "How to stop NHibernate from logging in Azure", "body": "<p>I'm guessing that somehow, Azure is enabling log4net and NHibernate is then able to broadcast its logging.</p>\n\n<p>Try adding these blocks to your config and see what effect it has:</p>\n\n<pre><code>&lt;configSections&gt;\n    &lt;section name=\"log4net\"\n             type=\"log4net.Config.Log4NetConfigurationSectionHandler,log4net\" /&gt;\n&lt;/configSections&gt;\n\n&lt;log4net debug=\"false\"&gt;\n    &lt;appender name=\"WindowsDebugOutput\" type=\"log4net.Appender.DebugAppender, log4net\"&gt;\n        &lt;layout type=\"log4net.Layout.PatternLayout,log4net\"&gt;\n            &lt;param name=\"ConversionPattern\" value=\"%d{ABSOLUTE} %-5p %c{1}:%L - %m%n\" /&gt;\n        &lt;/layout&gt;\n    &lt;/appender&gt;\n\n    &lt;logger name=\"NHibernate.SQL\" additivity=\"false\"&gt;\n        &lt;level value=\"OFF\" /&gt;\n        &lt;appender-ref ref=\"WindowsDebugOutput\" /&gt;\n    &lt;/logger&gt;\n&lt;/log4net&gt;\n</code></pre>\n\n<p>You might need to tweak the appender but the key is the <code>OFF</code> value in the <code>logger.level</code>. You might be able to set this at a higher, global level too. However, my knowledge of how to configure <code>log4net</code> is lacking.</p>\n"}], "owner": {"reputation": 5322, "user_id": 7411852, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10210681797466386/picture?type=large", "display_name": "Matt Spinks", "link": "https://stackoverflow.com/users/7411852/matt-spinks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504784809, "creation_date": 1504726523, "question_id": 46083060, "link": "https://stackoverflow.com/questions/46083060/how-to-stop-nhibernate-from-logging-in-azure", "title": "How to stop NHibernate from logging in Azure", "body": "<p>I created an Azure web job project that uses Fluent NHibernate for its ORM. The program itself works fine and does what it's supposed to. However, after publishing the web job and running it live, <strong>every single SQL statement that NHibernate generates</strong> is output to the log, and I don't want this. </p>\n\n<p>I thought that NHibernate by default does not output SQL statements, and I would have to enable it explicitly. However, it seems to be happening automatically, and I can't seem to turn it off. Is there some setting somewhere that I need to set to stop this logging? </p>\n\n<p>This is my configuration, my app.config, and an example database query:</p>\n\n<p><strong>NHibernate configuration</strong></p>\n\n<pre><code>    public static ISessionFactory CreateSessionFactory()\n    {\n        string connString = ConnectionStringHelper.ConnectionString;\n        return Fluently.Configure()\n            .Database(MsSqlConfiguration.MsSql2008\n                .ConnectionString(connString)\n            )\n            .Cache(c =&gt; c\n                .UseQueryCache())\n            .Mappings(m =&gt; m.FluentMappings.AddFromAssemblyOf&lt;Functions&gt;())\n            .BuildSessionFactory();\n    }\n</code></pre>\n\n<p><strong>App config</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;configuration&gt;\n  &lt;connectionStrings&gt;\n     &lt;add name=\"AzureWebJobsDashboard\" connectionString=\"DefaultEndpointsProtocol=https;AccountName=***;AccountKey=***\" /&gt;\n    &lt;add name=\"AzureWebJobsStorage\" connectionString=\"DefaultEndpointsProtocol=https;AccountName=***;AccountKey=***\" /&gt;\n  &lt;/connectionStrings&gt;\n    &lt;startup&gt;\n    &lt;supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.5.2\" /&gt;\n    &lt;/startup&gt;\n  &lt;runtime&gt;\n    &lt;assemblyBinding xmlns=\"urn:schemas-microsoft-com:asm.v1\"&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"Microsoft.WindowsAzure.Storage\" publicKeyToken=\"31bf3856ad364e35\" culture=\"neutral\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-7.0.0.0\" newVersion=\"7.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"Newtonsoft.Json\" publicKeyToken=\"30ad4fe6b2a6aeed\" culture=\"neutral\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-6.0.0.0\" newVersion=\"6.0.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"Microsoft.Data.Services.Client\" publicKeyToken=\"31bf3856ad364e35\" culture=\"neutral\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-5.7.0.0\" newVersion=\"5.7.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"Microsoft.Data.OData\" publicKeyToken=\"31bf3856ad364e35\" culture=\"neutral\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-5.7.0.0\" newVersion=\"5.7.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n      &lt;dependentAssembly&gt;\n        &lt;assemblyIdentity name=\"Microsoft.Data.Edm\" publicKeyToken=\"31bf3856ad364e35\" culture=\"neutral\" /&gt;\n        &lt;bindingRedirect oldVersion=\"0.0.0.0-5.7.0.0\" newVersion=\"5.7.0.0\" /&gt;\n      &lt;/dependentAssembly&gt;\n    &lt;/assemblyBinding&gt;\n  &lt;/runtime&gt;\n&lt;/configuration&gt;\n</code></pre>\n\n<p><strong>Sample DB Query</strong></p>\n\n<pre><code>            using (ISessionFactory sessionFactory = CreateSessionFactory())\n            {\n                using (var session = sessionFactory.OpenSession())\n                {\n                    var accountCrit = session.CreateCriteria&lt;AccountRec&gt;();\n                    accountCrit.Add(Expression.Eq(\"AccountId\", batch.AccountId));\n                    var accounts = accountCrit.List&lt;AccountRec&gt;();\n                }\n            }\n</code></pre>\n\n<p>The above statement generates this in the Azure logs:</p>\n\n<pre><code>[09/06/2017 03:57:30 &gt; 442002: INFO] NHibernate: SELECT this_.AccountId as AccountId9418_0_, this_.RingCentralId as RingCent2_9418_0_, this_.RingCentralExtension as RingCent3_9418_0_ FROM T_ACCOUNT this_ WHERE this_.AccountId = @p0;@p0 = '253' [Type: Int]\n</code></pre>\n\n<p>But I don't want it to generate that in the logs.</p>\n"}, {"tags": ["c#", "reflection", "dapper"], "comments": [{"owner": {"reputation": 381, "user_id": 1264882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e826fc5bd717b7227da8be6df27f488c?s=128&d=identicon&r=PG", "display_name": "WithMetta", "link": "https://stackoverflow.com/users/1264882/withmetta"}, "edited": false, "score": 0, "creation_date": 1504728383, "post_id": 46083018, "comment_id": 79128926, "body": "<a href=\"https://stackoverflow.com/a/21731667/1264882\">stackoverflow.com/a/21731667/1264882</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2934, "user_id": 746674, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bb83e111a90fa717af1dac727d1884b?s=128&d=identicon&r=PG", "display_name": "Phil Cooper", "link": "https://stackoverflow.com/users/746674/phil-cooper"}, "edited": false, "score": 0, "creation_date": 1504770811, "post_id": 46084304, "comment_id": 79143303, "body": "Hey, thanks for your reply.  That looks promising but I&#39;m still stuck with the fact that there could be any number of type arguments for <code>Func</code>.  I&#39;ve found <a href=\"https://www.nuget.org/packages/Dapper.Mapper/\" rel=\"nofollow noreferrer\">this library</a> that appears to solve the problem - I may just end up pulling that in to solve the map argument."}], "tags": [], "owner": {"reputation": 381, "user_id": 1264882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e826fc5bd717b7227da8be6df27f488c?s=128&d=identicon&r=PG", "display_name": "WithMetta", "link": "https://stackoverflow.com/users/1264882/withmetta"}, "is_accepted": false, "score": 1, "last_activity_date": 1504731832, "creation_date": 1504731832, "answer_id": 46084304, "question_id": 46083018, "link": "https://stackoverflow.com/questions/46083018/dynamic-func-for-dapper-query-map/46084304#46084304", "title": "Dynamic Func&lt;&gt; for Dapper query map", "body": "<p>This is as close as I've gotten. I tried to clone the Dapper repo to dig through how the Query() method works, but I'm using an older version of Visual Studio. </p>\n\n<pre><code>public static class DynamicFuncHelper\n{\n    public static Delegate CreateFunc(Type type1, Type type2)\n    {\n        Type funcType = typeof(Func&lt;,,&gt;).MakeGenericType(type1, type2, type1);\n        MethodInfo method =\n            typeof(DynamicFuncHelper&lt;,&gt;)\n            .MakeGenericType(type1, type2)\n            .GetMethod(\"SetAddressProperty\",\n                BindingFlags.Public | BindingFlags.Static\n            );\n        return Delegate.CreateDelegate(funcType, method);\n    }\n}\n\npublic static class DynamicFuncHelper&lt;T,U&gt; \n    where T : class \n    where U : class\n{\n    public static T SetAddressProperty(T obj1, U obj2)\n    {\n        obj1.GetType().InvokeMember(\"Address\",\n            BindingFlags.Instance | BindingFlags.Public | BindingFlags.SetProperty,\n            Type.DefaultBinder, obj1, new[] { obj2 });\n        return obj1;\n    }\n}\n</code></pre>\n\n<p>Passed this unit test</p>\n\n<pre><code>[TestClass]\npublic class DynamicFuncTest\n{\n    [TestMethod]\n    public void TestDynamicMapper()\n    {\n        var actualUser = new User { UserId = 1 };\n        var actualAddress = new Address { PostCode = \"12345\", UserId = 1 };\n        var testSetAddress = DynamicFuncHelper.CreateFunc(typeof(User), typeof(Address));\n        var delegateResult = testSetAddress.DynamicInvoke(actualUser, actualAddress);\n        Assert.AreEqual(actualUser, delegateResult, \"Delegate result was not actualUser\");\n        Assert.AreEqual(actualAddress, actualUser.Address, \"User address was not expected address\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2934, "user_id": 746674, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bb83e111a90fa717af1dac727d1884b?s=128&d=identicon&r=PG", "display_name": "Phil Cooper", "link": "https://stackoverflow.com/users/746674/phil-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1504731832, "creation_date": 1504726349, "question_id": 46083018, "link": "https://stackoverflow.com/questions/46083018/dynamic-func-for-dapper-query-map", "title": "Dynamic Func&lt;&gt; for Dapper query map", "body": "<p>I'm attempting to dynamically generate and execute the sql for <a href=\"https://github.com/StackExchange/Dapper\" rel=\"nofollow noreferrer\">Dapper</a> with the aim to simply pass in a type and the sql is generated and executed dynamically.</p>\n\n<p>Example classes:</p>\n\n<pre><code>public class User\n{\n    [Key]\n    public int UserId { get; set; }\n    public Address Address { get; set; }\n}\npublic class Address\n{\n    [Key]\n    public int UserId { get; set; }\n    public string PostCode { get; set; }\n}\n</code></pre>\n\n<p>Will effectively run the following:</p>\n\n<pre><code>// sql: \"SELECT User.UserId, Address.UserId, Address.PostCode FROM User LEFT JOIN Address ON Address.User = User.UserId\"... // auto generated from 'User' type including join to 'Address';\n\nconnection.Query&lt;User, Address, User&gt;(sql, /*** map argument needs to be dynamic Func&lt;&gt; ***/);\n</code></pre>\n\n<p>So given these types <code>User</code> &amp; <code>Address</code> which are only known at runtime, how can I generate the appropriate delegate <code>Func&lt;User, Address, User&gt;</code> to pass to the <code>map</code> argument?</p>\n\n<pre><code>Func&lt;User, Address, User&gt; map = (u, a) =&gt; {\n    u.Address = a;\n    return u;\n}\n</code></pre>\n\n<p>The <a href=\"https://stackoverflow.com/questions/17738499/create-dynamic-funct-tresult-from-object\">examples</a> I have seen for creating a <code>Func&lt;&gt;</code> using reflection assume the types are known, in my case they aren't so the type arguments vary (Func&lt;,> / Func&lt;,,> / Func&lt;,,,> etc).</p>\n\n<p>Any help appreciated.  I'll keep working through examples using expressions to see if anything sticks.</p>\n"}, {"tags": ["c#", "entity-framework"], "comments": [{"owner": {"reputation": 2742, "user_id": 4892515, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/JHSqd.png?s=128&g=1", "display_name": "Antoine Pelletier", "link": "https://stackoverflow.com/users/4892515/antoine-pelletier"}, "edited": false, "score": 0, "creation_date": 1504726636, "post_id": 46083006, "comment_id": 79128039, "body": "I&#39;m not sure but i think you are mistaking the concept of mapping, it&#39;s about the link between your entity object AND the database, so NameID should be mapped to NameID in your DB"}, {"owner": {"reputation": 740, "user_id": 8462409, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/36ee7392e21b8068966fe3f5dae5b80a?s=128&d=identicon&r=PG&f=1", "display_name": "DevEng", "link": "https://stackoverflow.com/users/8462409/deveng"}, "reply_to_user": {"reputation": 2742, "user_id": 4892515, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/JHSqd.png?s=128&g=1", "display_name": "Antoine Pelletier", "link": "https://stackoverflow.com/users/4892515/antoine-pelletier"}, "edited": false, "score": 0, "creation_date": 1504727736, "post_id": 46083006, "comment_id": 79128609, "body": "I&#39;m referring to the mapping between two tables.  It seems that PKs must be mapped when adding an association.  However, I do not want to map FacilityID &amp; AccountID because there is nothing to map it to."}, {"owner": {"reputation": 49085, "user_id": 7297700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7650f380e0e3b8415ba9afaadf70906?s=128&d=identicon&r=PG&f=1", "display_name": "David Browne - Microsoft", "link": "https://stackoverflow.com/users/7297700/david-browne-microsoft"}, "edited": false, "score": 0, "creation_date": 1504728369, "post_id": 46083006, "comment_id": 79128916, "body": "Can you share the DDL of the tables?  And what does &quot;the mapping between two tables&quot; mean?"}, {"owner": {"reputation": 740, "user_id": 8462409, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/36ee7392e21b8068966fe3f5dae5b80a?s=128&d=identicon&r=PG&f=1", "display_name": "DevEng", "link": "https://stackoverflow.com/users/8462409/deveng"}, "reply_to_user": {"reputation": 49085, "user_id": 7297700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7650f380e0e3b8415ba9afaadf70906?s=128&d=identicon&r=PG&f=1", "display_name": "David Browne - Microsoft", "link": "https://stackoverflow.com/users/7297700/david-browne-microsoft"}, "edited": false, "score": 0, "creation_date": 1504729612, "post_id": 46083006, "comment_id": 79129528, "body": "@DavidBrowne-Microsoft Added the image above, the mapping between the two tables means the association I want to create between <code>AccountId</code> from <code>Facility</code> and <code>AccountID</code> from <code>Account</code>"}], "answers": [{"comments": [{"owner": {"reputation": 740, "user_id": 8462409, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/36ee7392e21b8068966fe3f5dae5b80a?s=128&d=identicon&r=PG&f=1", "display_name": "DevEng", "link": "https://stackoverflow.com/users/8462409/deveng"}, "edited": false, "score": 0, "creation_date": 1504730569, "post_id": 46083855, "comment_id": 79130027, "body": "What about <code>FacilityId</code> from <code>Facility</code>? VS still complains that Association End &#39;Facility&#39; is not mapped."}, {"owner": {"reputation": 49085, "user_id": 7297700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7650f380e0e3b8415ba9afaadf70906?s=128&d=identicon&r=PG&f=1", "display_name": "David Browne - Microsoft", "link": "https://stackoverflow.com/users/7297700/david-browne-microsoft"}, "reply_to_user": {"reputation": 740, "user_id": 8462409, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/36ee7392e21b8068966fe3f5dae5b80a?s=128&d=identicon&r=PG&f=1", "display_name": "DevEng", "link": "https://stackoverflow.com/users/8462409/deveng"}, "edited": false, "score": 0, "creation_date": 1504730854, "post_id": 46083855, "comment_id": 79130175, "body": "Without DDL, no way to tell.  It&#39;s often easier to just use Code First and configure the mappings on the classes, skipping the EDMX entirely."}], "tags": [], "owner": {"reputation": 49085, "user_id": 7297700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7650f380e0e3b8415ba9afaadf70906?s=128&d=identicon&r=PG&f=1", "display_name": "David Browne - Microsoft", "link": "https://stackoverflow.com/users/7297700/david-browne-microsoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1504729863, "creation_date": 1504729863, "answer_id": 46083855, "question_id": 46083006, "link": "https://stackoverflow.com/questions/46083006/create-association-model-first-with-ignoring-certain-pks/46083855#46083855", "title": "Create Association Model First With Ignoring Certain PKs", "body": "<p>Assuming Account.AccountID is unique (ie no two rows in Account actually have the same AccountID), just declare that as the only Key Property on the Account entity.</p>\n\n<p>The Key of an entity does not have to be declared as the PK in the database.  But you can only have one Key per entity (the Key can, of course, have multiple columns, and EF Core does support alternate keys).  The entity Key should be unique, and should have a unique index in the database on the corresponding columns, but that's not enforced by EF.</p>\n"}], "owner": {"reputation": 740, "user_id": 8462409, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/36ee7392e21b8068966fe3f5dae5b80a?s=128&d=identicon&r=PG&f=1", "display_name": "DevEng", "link": "https://stackoverflow.com/users/8462409/deveng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504729863, "creation_date": 1504726302, "last_edit_date": 1504729548, "question_id": 46083006, "link": "https://stackoverflow.com/questions/46083006/create-association-model-first-with-ignoring-certain-pks", "title": "Create Association Model First With Ignoring Certain PKs", "body": "<p>I have the following Table Structure</p>\n\n<p><strong>Facility</strong></p>\n\n<ul>\n<li>PK Facility ID</li>\n<li>AccountID</li>\n</ul>\n\n<p><strong>Accounts</strong></p>\n\n<ul>\n<li>PK NameID</li>\n<li>PK AccountID</li>\n</ul>\n\n<p>I can't touch the DB so my changes need to be in Entity Framework.  Essentially the <code>AccountIDs</code> are linked so I want to create an association between them.  So when I create an association I map the <code>AccountIDs</code> together, however I can't map <code>FacilityID</code> to anything and <code>NameID</code> to anything so when I save Visual Studio complains that the mapping is not set correctly.</p>\n\n<p>My main question is how do I ignore the mappings for <code>FacilityID</code> and <code>NameID</code>?  I've tried added <code>[NotMapped]</code> to both <code>FacilityID</code> and <code>NameID</code> but that does not work.  I've also tried creating a scalar property for <code>Facility</code> and <code>Accounts</code> and used the <strong>Referntial Constraint</strong> to map them however when I try to map the columns under Table Mapping, the columns I added do not show up which causes VS to complain as well.</p>\n\n<p>Here is my table, I removed most of the fields because they are unnecessary \n<a href=\"https://i.stack.imgur.com/3M0gl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3M0gl.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "excel", "datagrid"], "comments": [{"owner": {"reputation": 252, "user_id": 1866809, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/536ac11714e671a831c02e8f3470d2f3?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/1866809/brad"}, "edited": false, "score": 0, "creation_date": 1504726408, "post_id": 46082942, "comment_id": 79127929, "body": "Are you asking about how to place the first 30 lines of data on Worksheet 1 and then put the remaining 10 lines of data on Worksheet 2?  If that is the case, you&#39;ll need to either toggle xlWorkSheet to point to WorkSheet 2 or create a new variable for WorkSheet 2 and then add logic to know once the first 30 lines have been placed on the first and place the rest on the second."}, {"owner": {"reputation": 48588, "user_id": 3152130, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RqxLT.jpg?s=128&g=1", "display_name": "TaW", "link": "https://stackoverflow.com/users/3152130/taw"}, "edited": false, "score": 0, "creation_date": 1504726855, "post_id": 46082942, "comment_id": 79128156, "body": "What are you targetting: Winforms, WPF, ASP..?  YOU should <b>always</b> TAG your questions correctly! - Also: <b>Do not</b> call a <code>DataGridView</code>a <code>GridView</code> or a <code>DataGrid</code> and vice versa!! This is wrong and confusing as those are different controls. Always call things by their <b>right</b> name!"}, {"owner": {"reputation": 1, "user_id": 5765230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f180da9d27f17c94ac74eb59a90400?s=128&d=identicon&r=PG&f=1", "display_name": "shabs", "link": "https://stackoverflow.com/users/5765230/shabs"}, "edited": false, "score": 0, "creation_date": 1504730971, "post_id": 46082942, "comment_id": 79130230, "body": "My apologies. Im working on visual studio. I have form1 that has over 200 items on a datagridview. On selection these items are then sent to form2.cs. on a button click they are placed on my excel template that starts from row 19 and ends at row 49. it is renamed as quote_todays date. I want the balance of the items to go to same template and renamed to quote_todays date page2"}], "owner": {"reputation": 1, "user_id": 5765230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29f180da9d27f17c94ac74eb59a90400?s=128&d=identicon&r=PG&f=1", "display_name": "shabs", "link": "https://stackoverflow.com/users/5765230/shabs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504726021, "creation_date": 1504726021, "question_id": 46082942, "link": "https://stackoverflow.com/questions/46082942/how-to-select-first-30-lines-of-datagrid-to-excel-template-and-balance-to-page-t", "title": "how to select first 30 lines of datagrid to excel template and balance to page two", "body": "<p>I have a datagrid on my visual studio with 40 items. On button click I want the first 30 items to display on my excel template and the balance to go to page two of template.</p>\n\n<pre><code>    private void button1_Click_1(object sender, EventArgs e)\n    {\n        Excel.Application xlApp ;\n        Excel.Workbook xlWorkBook ;\n        Excel.Worksheet xlWorkSheet ;\n        object misValue = System.Reflection.Missing.Value;\n\n        xlApp = new Excel.Application();\n        xlWorkBook = xlApp.Workbooks.Open(@\"C:\\CedarData\\masterquote.xlsx\", misValue, false, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue);\n        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);\n\n        //int i = 1;\n        //int j = 1;\n\n        string datestr = DateTime.Now.ToShortDateString();\n        //string colName = dataGridView1.Columns[j].HeaderText;\n        string filename = @\"C:\\CedarData\\CedarQuotes\\Quote_\" + txtName.Text.Replace(\" \", \"\") + \"_\" + datestr + \".xls\";\n        string quote = txtName.Text.Replace(\" \", \"\") + \"_\" + datestr;\n        string salesman = txtEmail.Text.ToUpper();\n        string customer = txtName.Text.ToUpper();\n\n        // Storing Each row and column value to excel sheet   \n        for (int i = 0; i &lt; dataGridView1.Rows.Count - 1; i++)\n           {\n\n            for (int j = 0; j &lt; dataGridView1.Columns.Count; j++)\n            {\n                //string value3 = dataGridView1.Rows[i].Cells[j].Value.ToString();\n                if (j == 2 || j == 5)\n                {\n                    xlWorkSheet.Cells[i + 19, j + 1] = \"'\" + dataGridView1.Rows[i].Cells[j].Value.ToString();\n                }\n                else\n                {\n                    xlWorkSheet.Cells[i + 19, j + 1] = dataGridView1.Rows[i].Cells[j].Value.ToString();\n                } \n                xlWorkSheet.get_Range(\"C10\", \"E10\").Value2 = salesman;\n                xlWorkSheet.get_Range(\"C12\", \"E12\").Value2 = customer;\n                xlWorkSheet.get_Range(\"C12\", \"E12\").Font.Bold = true;\n                xlWorkSheet.get_Range(\"C12\", \"E12\").Font.Bold = true;\n                xlWorkSheet.get_Range(\"H12\", \"I12\").Value2 = DateTime.Now;\n                xlWorkSheet.get_Range(\"H10\", \"I10\").Value2 = quote;\n\n            }\n\n        }   \n\n        xlWorkBook.SaveAs(filename, Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);\n        xlWorkBook.Close(true, misValue, misValue);\n        xlApp.Quit();\n\n        releaseObject(xlWorkSheet);\n        releaseObject(xlWorkBook);\n        releaseObject(xlApp);\n\n        MessageBox.Show(\"Excel file created , you can find the file c:\\\\quote.xls\");\n    }\n</code></pre>\n\n<p>Please help as this works but on line 31 it ovewrites the clauses on template. I want it must continue to page two.</p>\n"}, {"tags": ["c#", "embedded-resource"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 1, "creation_date": 1504726062, "post_id": 46082913, "comment_id": 79127761, "body": "If you want to avoid using existing software, you&#39;ll need to rewrite all of that code yourself.  Good luck with that."}, {"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 1, "creation_date": 1504726080, "post_id": 46082913, "comment_id": 79127771, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/&hellip;</a>"}, {"owner": {"reputation": 7866, "user_id": 505383, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/77318c1c13df449039181b7871660648?s=128&d=identicon&r=PG", "display_name": "Didaxis", "link": "https://stackoverflow.com/users/505383/didaxis"}, "edited": false, "score": 0, "creation_date": 1504727814, "post_id": 46082913, "comment_id": 79128650, "body": "System.IO.Compression"}], "owner": {"reputation": 1056, "user_id": 2970916, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1456170059/picture?type=large", "display_name": "user2970916", "link": "https://stackoverflow.com/users/2970916/user2970916"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504725904, "creation_date": 1504725904, "question_id": 46082913, "link": "https://stackoverflow.com/questions/46082913/access-xml-file-in-a-zipped-resource-c", "title": "Access XML file in a Zipped Resource C#", "body": "<p>I have an XML file that is contained in a zip folder that's been embedded into a project resource folder. I am trying to figure out to access the XML content without using 3rd party software. I have seen the use of SharpZip to do stream the contents, but I am trying to avoid 3rd party software.</p>\n"}, {"tags": ["c#", "https", "ssis"], "comments": [{"owner": {"reputation": 4241, "user_id": 6085803, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ARdCw.jpg?s=128&g=1", "display_name": "sandeep rawat", "link": "https://stackoverflow.com/users/6085803/sandeep-rawat"}, "edited": false, "score": 0, "creation_date": 1504773175, "post_id": 46082873, "comment_id": 79144763, "body": "just try url on the matching <a href=\"https://markets.midwestiso.org/MISO/getSettlementStatementFile/1.zip?entity=CORP_SUB3&amp;nodeId=key0\" rel=\"nofollow noreferrer\">markets.midwestiso.org/MISO/getSettlementStatementFile/&hellip;</a>  i think some issue with url"}, {"owner": {"reputation": 57, "user_id": 768462, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e127a34b1cd3e6deb2acf476673df303?s=128&d=identicon&r=PG", "display_name": "vik", "link": "https://stackoverflow.com/users/768462/vik"}, "reply_to_user": {"reputation": 4241, "user_id": 6085803, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ARdCw.jpg?s=128&g=1", "display_name": "sandeep rawat", "link": "https://stackoverflow.com/users/6085803/sandeep-rawat"}, "edited": false, "score": 0, "creation_date": 1504887152, "post_id": 46082873, "comment_id": 79203814, "body": "@sandeeprawat you need install certificate on machine than you can access url."}, {"owner": {"reputation": 57, "user_id": 768462, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e127a34b1cd3e6deb2acf476673df303?s=128&d=identicon&r=PG", "display_name": "vik", "link": "https://stackoverflow.com/users/768462/vik"}, "reply_to_user": {"reputation": 956, "user_id": 5758637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AjRiy.jpg?s=128&g=1", "display_name": "Michael Armes", "link": "https://stackoverflow.com/users/5758637/michael-armes"}, "edited": false, "score": 0, "creation_date": 1504887890, "post_id": 46082873, "comment_id": 79204214, "body": "@Meghan Armes Thank you for edits."}], "owner": {"reputation": 57, "user_id": 768462, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e127a34b1cd3e6deb2acf476673df303?s=128&d=identicon&r=PG", "display_name": "vik", "link": "https://stackoverflow.com/users/768462/vik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1504726573, "creation_date": 1504725742, "last_edit_date": 1504726573, "question_id": 46082873, "link": "https://stackoverflow.com/questions/46082873/how-to-download-zip-file-from-required-certificate-https-url-in-c-or-ssis", "title": "how to download zip file from required certificate https url in C# or SSIS?", "body": "<p>I have an HTTPS URL to download a zip file but I need to install certificate from site. I installed it already on my machine.   </p>\n\n<p>Here is my code:  </p>\n\n<pre><code>ServicePointManager.Expect100Continue = true;\n        ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3 | SecurityProtocolType.Tls | SecurityProtocolType.Tls11 | SecurityProtocolType.Tls12;\n        //RemoteCertificateValidationCallback ServerCertificateValidationCallback = delegate { return true; };\n        System.Net.ServicePointManager.ServerCertificateValidationCallback = delegate (object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; };\n        using (WebClient wc = new WebClient())\n        {\n            wc.DownloadFile(\"https://markets.midwestiso.org/MISO/getSettlementStatementFile?entity=CORP_SUB3&amp;nodeId=key0\", @\"C:\\files\\1.zip\");\n        }\n</code></pre>\n\n<p>But I'm getting the below error message:  </p>\n\n<blockquote>\n  <p><strong>The request was aborted: Could not create SSL/TLS secure channel.</strong></p>\n</blockquote>\n\n<p>Please help. I am not able to find a solution.</p>\n"}, {"tags": ["c#"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6241394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2a0baead19ed3ff877099768cc5336?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/6241394/rob"}, "edited": false, "score": 0, "creation_date": 1504786256, "post_id": 46086848, "comment_id": 79153652, "body": "I added the CryptoAPI debugging to both the client and the server. When it fails to establish the secure channel, I only get logs on the client side. There are no errors in the logs and they look exactly the same as the logs when it works."}, {"owner": {"reputation": 63, "user_id": 6241394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2a0baead19ed3ff877099768cc5336?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/6241394/rob"}, "edited": false, "score": 0, "creation_date": 1504794078, "post_id": 46086848, "comment_id": 79159653, "body": "I even went ahead and removed AIA and CDP from our certificates. I regenerated the client and server certificate and set ServerCertificateValidationCallback to always return true and it still always fails on the second attempt. I think that completely removes it being an issue with CDP."}], "tags": [], "owner": {"reputation": 1737, "user_id": 1070012, "user_type": "registered", "profile_image": "https://graph.facebook.com/561873850/picture?type=large", "display_name": "rmhrisk", "link": "https://stackoverflow.com/users/1070012/rmhrisk"}, "is_accepted": false, "score": 0, "last_activity_date": 1504750437, "creation_date": 1504750437, "answer_id": 46086848, "question_id": 46082821, "link": "https://stackoverflow.com/questions/46082821/windows-10-c-client-application-getting-securitynegotiationexception/46086848#46086848", "title": "Windows 10 C# client application getting SecurityNegotiationException", "body": "<p>CRL or CSP retrieval is likely timing out. The retrieval happens with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380269(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa380269(v=vs.85).aspx</a>. Use CryptoAPI debugging to confirm this - <a href=\"http://unmitigatedrisk.com/?p=297\" rel=\"nofollow noreferrer\">http://unmitigatedrisk.com/?p=297</a>.</p>\n"}], "owner": {"reputation": 63, "user_id": 6241394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2a0baead19ed3ff877099768cc5336?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/6241394/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504810955, "creation_date": 1504725563, "last_edit_date": 1504810955, "question_id": 46082821, "link": "https://stackoverflow.com/questions/46082821/windows-10-c-client-application-getting-securitynegotiationexception", "title": "Windows 10 C# client application getting SecurityNegotiationException", "body": "<p>I have a Windows 10 C# application that contacts a web service hosted on a Windows Server 2016. The client application is set on a timer which calls the server back every 2 minutes. It uses a client certificate from a smart card to establish mutual authentication. </p>\n\n<p>The initial connection to the web service works every time. Every following connection fails. If I restart the application I can connect the first time then all subsequent connections fail. It is a basic hello world web service and a simple windows form that calls it.</p>\n\n<p>The exception I'm getting is \"Could not establish secure channel for SSL/TLS with authority \"</p>\n\n<p>Here's where it gets strange. If I change the timer to 30 seconds it works every time.</p>\n\n<p>If I turn on System.Net tracing it works every time with the 2 minute timer.</p>\n\n<p>Please Help!</p>\n\n<p>EDIT:\nI set System.Net.ServicePointManager.MaxServicePointIdleTime well above my timer. This fixed the issue for our hello world test application but not for our production application.</p>\n\n<p>EDIT:\nI was able to get this timeout to work in our production application. In our production application it was still set up as a web service. After converting it to a service reference setting this timeout has been working properly. Why is this? Is this a bug in the ServicePointManager? This still does not seem like an acceptable solution.</p>\n"}, {"tags": ["c#", "datatable", "combobox", "datasource"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 5424900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa91719298b1dacfe7edf476aeddb5cc?s=128&d=identicon&r=PG&f=1", "display_name": "Mitrucho", "link": "https://stackoverflow.com/users/5424900/mitrucho"}, "is_accepted": true, "score": 3, "last_activity_date": 1504725764, "creation_date": 1504725764, "answer_id": 46082879, "question_id": 46082802, "link": "https://stackoverflow.com/questions/46082802/how-to-fill-combobox-with-datatable-column-c/46082879#46082879", "title": "How to fill combobox with Datatable column C#", "body": "<p>I think you need to use Display and Value members properties to work with display data.</p>\n\n<pre><code>cbReviewers.DataSource = Reviewers_table\ncbReviewers.DisplayMember = \"ColumnNameThatContainsText\"\ncbReviewers.ValueMember = \"ColumnNameThatContainsValue\"\n</code></pre>\n"}], "owner": {"reputation": 870, "user_id": 4522501, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/929253393772654/picture?type=large", "display_name": "Javier Salas", "link": "https://stackoverflow.com/users/4522501/javier-salas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4178, "favorite_count": 0, "accepted_answer_id": 46082879, "answer_count": 1, "score": 0, "last_activity_date": 1504725912, "creation_date": 1504725478, "question_id": 46082802, "link": "https://stackoverflow.com/questions/46082802/how-to-fill-combobox-with-datatable-column-c", "title": "How to fill combobox with Datatable column C#", "body": "<p>I'm trying to add items to a combo box using a data table that already has some columns but I just want one of them values into the combo box. What i'm doing is this:</p>\n\n<pre><code>cbReviewers.DataSource = Reviewers_table.Columns[1];\n</code></pre>\n\n<p>but is not working, do you know how could I do it?</p>\n"}, {"tags": ["javascript", "c#", "unity3d"], "comments": [{"owner": {"reputation": 1505, "user_id": 1151716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22d190d8739ffa8752db70a0a1f54a5c?s=128&d=identicon&r=PG", "display_name": "ZayedUpal", "link": "https://stackoverflow.com/users/1151716/zayedupal"}, "edited": false, "score": 1, "creation_date": 1504726539, "post_id": 46082778, "comment_id": 79127989, "body": "<a href=\"http://answers.unity3d.com/questions/205738/cross-referencing-between-unityscript-and-c.html\" rel=\"nofollow noreferrer\" title=\"cross referencing between unityscript and c.html\">answers.unity3d.com/questions/205738/&hellip;</a>"}, {"owner": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1504727938, "post_id": 46082778, "comment_id": 79128713, "body": "Rather than trying to cross reference to C# from Javascript, just convert to using C# all the time. You can switch over with (IIRC) about 3 simple regex replacements. Or <a href=\"http://www.m2h.nl/files/js_to_c.php\" rel=\"nofollow noreferrer\">use this tool</a>."}, {"owner": {"reputation": 5, "user_id": 6811960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugIBj.jpg?s=128&g=1", "display_name": "AzDepredador", "link": "https://stackoverflow.com/users/6811960/azdepredador"}, "edited": false, "score": 0, "creation_date": 1504805353, "post_id": 46082778, "comment_id": 79166790, "body": "I need the file of javascript"}], "owner": {"reputation": 5, "user_id": 6811960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugIBj.jpg?s=128&g=1", "display_name": "AzDepredador", "link": "https://stackoverflow.com/users/6811960/azdepredador"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504725704, "creation_date": 1504725376, "last_edit_date": 1504725704, "question_id": 46082778, "link": "https://stackoverflow.com/questions/46082778/declare-function-javascript-to-c-unity", "title": "Declare function Javascript to C# - Unity", "body": "<p>I have a code in Javascript</p>\n\n<p>VoxelizationTest.js</p>\n\n<pre><code>public var drawMeshShell = true;\npublic var drawMeshInside = true;\npublic var drawEmptyCube = true;\npublic var meshShellPositionFromObject = Vector3.zero;\nprivate var aABCGrids : Array;\n\nfunction Voxelize (gameObject : GameObject, cubeSide : float) {\nvar thisObjGrid : Voxelization.AABCGrid;\nvar objectVoxels = 0;\nvar emptySpaceVoxels = 0;\n\naABCGrids = new Array();    \nthisObjGrid = Voxelization.CreateGridWithGameObjectMesh(gameObject, \ncubeSide, true, drawMeshInside);\naABCGrids.Push(thisObjGrid);\nfor(var aABCGrid : Voxelization.AABCGrid in aABCGrids) {\n    if(drawMeshShell &amp;&amp; aABCGrid) {\n        var cubeSize = new Vector3(cubeSide, cubeSide, cubeSide);\n        var gridSize = aABCGrid.GetSize();\n        for(var x = 0; x &lt; gridSize.x; ++x) {\n            for(var y = 0; y &lt; gridSize.y; ++y) {\n                for(var z = 0; z &lt; gridSize.z; ++z) {\n                    var cubeCenter = \n                     aABCGrid.GetAABCCenterFromGridCenter(x,y, z) + \n                            aABCGrid.GetCenter() + \n                                meshShellPositionFromObject;\n                    if(aABCGrid.IsAABCSet(x, y, z)) {\n                        objectVoxels++;\n                    } else if (drawEmptyCube) {\n                        emptySpaceVoxels++;\n                    }\n                }\n            }\n        }\n    }   \n}\nDebug.Log(\"Objeto: \"+gameObject+\" voxeles: \"+objectVoxels);\nreturn [objectVoxels, emptySpaceVoxels];\n}\n</code></pre>\n\n<p>I need implement the function and use its value that return in C# but this not works, Is there something like that?\nThe code is for Unity , the IDE is visual studio\nthis is the code , i instance as a class but not works</p>\n\n<pre><code>VoxelizationTest script= new VoxelizationTest();\n</code></pre>\n\n<p>Test.cs</p>\n\n<pre><code>float volume_cm3 = 0, emptySpace_cm3 = 0;\nint[] voxels = new int[2];\n\nVoxelizationTest script= new VoxelizationTest();\nvoxels = script.Voxelize (GameObject.Find (pair.Value.name), 0.015f);\nvolume_cm3 = voxels[0] * Mathf.Pow(1.5f, 3);\nemptySpace_cm3 = voxels[1] * Mathf.Pow(1.5f, 3);\nDebug.Log (\"Voxels object: \" + voxels[0] + \" VolumeCm3: \n                    \" + volume_cm3 + \" emptySpaceCm3: \" + emptySpace_cm3);\nfloat shapeRelation =  emptySpace_cm3 / (emptySpace_cm3 \n                    + volume_cm3);\nif(shapeRelation &gt; mayor)\nmayor = shapeRelation;\nobjectsShapeRelation.Add (pair.Value, shapeRelation);\n</code></pre>\n"}, {"tags": ["c#", "asp.net", "entity-framework", "asp.net-core"], "answers": [{"comments": [{"owner": {"reputation": 1005, "user_id": 6947687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0d3a100995c266cd398b0f85d26a946?s=128&d=identicon&r=PG&f=1", "display_name": "bielu000", "link": "https://stackoverflow.com/users/6947687/bielu000"}, "edited": false, "score": 0, "creation_date": 1504725615, "post_id": 46082746, "comment_id": 79127518, "body": "Unfortunately in EF Core there is no HasOptional options."}, {"owner": {"reputation": 2211, "user_id": 37083, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5719c95535de9ca01f1a8b1ff44e6e80?s=128&d=identicon&r=PG", "display_name": "devzero", "link": "https://stackoverflow.com/users/37083/devzero"}, "reply_to_user": {"reputation": 1005, "user_id": 6947687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0d3a100995c266cd398b0f85d26a946?s=128&d=identicon&r=PG&f=1", "display_name": "bielu000", "link": "https://stackoverflow.com/users/6947687/bielu000"}, "edited": false, "score": 0, "creation_date": 1504726221, "post_id": 46082746, "comment_id": 79127828, "body": "I changed the syntax to EF 7. Nullable parentId should set it as optional"}, {"owner": {"reputation": 1005, "user_id": 6947687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0d3a100995c266cd398b0f85d26a946?s=128&d=identicon&r=PG&f=1", "display_name": "bielu000", "link": "https://stackoverflow.com/users/6947687/bielu000"}, "edited": false, "score": 0, "creation_date": 1504727623, "post_id": 46082746, "comment_id": 79128528, "body": "But it doesn&#39;t work. If I try update database, I have an exception:  Introducing FOREIGN KEY constraint &#39;FK_Categories_Categories_ParentId&#39; on table &#39;Categories&#39; may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints. Could not create constraint or index. See previous errors."}, {"owner": {"reputation": 2211, "user_id": 37083, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5719c95535de9ca01f1a8b1ff44e6e80?s=128&d=identicon&r=PG", "display_name": "devzero", "link": "https://stackoverflow.com/users/37083/devzero"}, "reply_to_user": {"reputation": 1005, "user_id": 6947687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0d3a100995c266cd398b0f85d26a946?s=128&d=identicon&r=PG&f=1", "display_name": "bielu000", "link": "https://stackoverflow.com/users/6947687/bielu000"}, "edited": false, "score": 0, "creation_date": 1504735430, "post_id": 46082746, "comment_id": 79132055, "body": "Have you tried .WillCascadeOnDelete(false); ?"}, {"owner": {"reputation": 1553, "user_id": 1580548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hTIny.jpg?s=128&g=1", "display_name": "ddagsan", "link": "https://stackoverflow.com/users/1580548/ddagsan"}, "edited": false, "score": 0, "creation_date": 1559909304, "post_id": 46082746, "comment_id": 99576741, "body": "Should Subcategories have virtual keyword?"}, {"owner": {"reputation": 2211, "user_id": 37083, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5719c95535de9ca01f1a8b1ff44e6e80?s=128&d=identicon&r=PG", "display_name": "devzero", "link": "https://stackoverflow.com/users/37083/devzero"}, "edited": false, "score": 0, "creation_date": 1559912377, "post_id": 46082746, "comment_id": 99578454, "body": "It does not matter in this context, you need virtual for EF to be able to create proxies for easier change tracking IE better performance."}], "tags": [], "owner": {"reputation": 2211, "user_id": 37083, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5719c95535de9ca01f1a8b1ff44e6e80?s=128&d=identicon&r=PG", "display_name": "devzero", "link": "https://stackoverflow.com/users/37083/devzero"}, "is_accepted": false, "score": 5, "last_activity_date": 1504726183, "last_edit_date": 1504726183, "creation_date": 1504725227, "answer_id": 46082746, "question_id": 46082682, "link": "https://stackoverflow.com/questions/46082682/entity-framework-itself-referention-parent-child/46082746#46082746", "title": "Entity Framework Itself referention -&gt; parent/child", "body": "<p>You can just reference your own class </p>\n\n<pre><code>public class Category \n{\n   public int Id { get; set; }\n   public int? ParentId { get; set; }\n   public Category Parent { get; set; }\n   public string Name { get; set; }\n   public ICollection&lt;Category&gt; SubCategories { get; set; }\n}\n</code></pre>\n\n<p>You can also set it up further with fluent api</p>\n\n<pre><code>protected override void OnModelCreating(ModelBuilder modelBuilder)\n{\n  modelBuilder.Entity&lt;Job&gt;()\n            .HasMany(j =&gt; j.SubCategories )\n            .WithOne(j =&gt; j.Parent )\n            .HasForeignKey(j =&gt; j.ParentId)\n}\n</code></pre>\n"}], "owner": {"reputation": 1005, "user_id": 6947687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0d3a100995c266cd398b0f85d26a946?s=128&d=identicon&r=PG&f=1", "display_name": "bielu000", "link": "https://stackoverflow.com/users/6947687/bielu000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5935, "favorite_count": 1, "closed_date": 1504725537, "answer_count": 1, "score": 3, "last_activity_date": 1504726183, "creation_date": 1504724979, "question_id": 46082682, "link": "https://stackoverflow.com/questions/46082682/entity-framework-itself-referention-parent-child", "closed_reason": "Duplicate", "title": "Entity Framework Itself referention -&gt; parent/child", "body": "<p>Is it possible to set parent/child relations using EF Core and fluent api?</p>\n\n<p>I have following class</p>\n\n<pre><code>public class Category \n{\n   public int Id { get; set; }\n   public int ParentId { get; set; }\n   public string Name { get; set; }\n   public ICollection&lt;Category&gt; SubCategories { get; set; }\n}\n</code></pre>\n\n<p>So if I create list of objects with have structure as below, it is possible that, EF set entitie's id, and parentId with appropriate numbers?</p>\n\n<ul>\n<li>Cat 1 \n\n<ul>\n<li>Cat 2\n\n<ul>\n<li>Cat 3</li>\n</ul></li>\n<li>Cat4 </li>\n<li>Cat5 </li>\n</ul></li>\n</ul>\n"}, {"tags": ["c#", "xaml", "uwp"], "comments": [{"owner": {"reputation": 37465, "user_id": 231837, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pAqDJ.jpg?s=128&g=1", "display_name": "Justin XL", "link": "https://stackoverflow.com/users/231837/justin-xl"}, "edited": false, "score": 0, "creation_date": 1504875819, "post_id": 46082607, "comment_id": 79196534, "body": "I strongly recommend you to try using the styling of the <code>ToggleButton</code> to control its appearance, rather than hard-coded images like this."}], "answers": [{"tags": [], "owner": {"reputation": 11517, "user_id": 1470327, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bbfda31206a98c9fc947cec762db13e5?s=128&d=identicon&r=PG", "display_name": "bas", "link": "https://stackoverflow.com/users/1470327/bas"}, "is_accepted": false, "score": 0, "last_activity_date": 1504728198, "creation_date": 1504728198, "answer_id": 46083463, "question_id": 46082607, "link": "https://stackoverflow.com/questions/46082607/uwp-remove-togglebutton-mouse-over-and-mouse-pressed-background/46083463#46083463", "title": "UWP Remove ToggleButton mouse over and mouse pressed background", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/apps/mt299157.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/apps/mt299157.aspx</a></p>\n\n<p>Example below works just fine:</p>\n\n<pre><code>        &lt;Style x:Key=\"NakedToggleButton\"  TargetType=\"ToggleButton\"&gt;\n            &lt;Setter Property=\"Background\" Value=\"{ThemeResource SystemControlBackgroundBaseLowBrush}\" /&gt;\n            &lt;Setter Property=\"Foreground\" Value=\"{ThemeResource SystemControlForegroundBaseHighBrush}\"/&gt;\n            &lt;Setter Property=\"BorderBrush\" Value=\"{ThemeResource SystemControlForegroundTransparentBrush}\" /&gt;\n            &lt;Setter Property=\"BorderThickness\" Value=\"{ThemeResource ToggleButtonBorderThemeThickness}\" /&gt;\n            &lt;Setter Property=\"Padding\" Value=\"8,4,8,4\" /&gt;\n            &lt;Setter Property=\"HorizontalAlignment\" Value=\"Left\" /&gt;\n            &lt;Setter Property=\"VerticalAlignment\" Value=\"Center\" /&gt;\n            &lt;Setter Property=\"FontFamily\" Value=\"{ThemeResource ContentControlThemeFontFamily}\" /&gt;\n            &lt;Setter Property=\"FontWeight\" Value=\"Normal\" /&gt;\n            &lt;Setter Property=\"FontSize\" Value=\"{ThemeResource ControlContentThemeFontSize}\" /&gt;\n            &lt;Setter Property=\"UseSystemFocusVisuals\" Value=\"True\" /&gt;\n            &lt;Setter Property=\"Template\"&gt;\n                &lt;Setter.Value&gt;\n                    &lt;ControlTemplate TargetType=\"ToggleButton\"&gt;\n                        &lt;Grid x:Name=\"RootGrid\" Background=\"Transparent\"&gt;\n                            &lt;VisualStateManager.VisualStateGroups&gt;\n                                &lt;VisualStateGroup x:Name=\"CommonStates\"&gt;\n                                    &lt;VisualState x:Name=\"PointerOver\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"Pressed\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"Disabled\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"Checked\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"CheckedPointerOver\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"CheckedPressed\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"CheckedDisabled\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"Indeterminate\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"IndeterminatePointerOver\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"IndeterminatePressed\"&gt;\n                                    &lt;/VisualState&gt;\n                                    &lt;VisualState x:Name=\"IndeterminateDisabled\"&gt;\n                                    &lt;/VisualState&gt;\n                                &lt;/VisualStateGroup&gt;\n                            &lt;/VisualStateManager.VisualStateGroups&gt;\n                            &lt;ContentPresenter x:Name=\"ContentPresenter\"\n                                              BorderBrush=\"{TemplateBinding BorderBrush}\"\n                                              BorderThickness=\"{TemplateBinding BorderThickness}\"\n                                              Content=\"{TemplateBinding Content}\"\n                                              ContentTransitions=\"{TemplateBinding ContentTransitions}\"\n                                              ContentTemplate=\"{TemplateBinding ContentTemplate}\"\n                                              Padding=\"{TemplateBinding Padding}\"\n                                              HorizontalContentAlignment=\"{TemplateBinding HorizontalContentAlignment}\"\n                                              VerticalContentAlignment=\"{TemplateBinding VerticalContentAlignment}\"\n                                              AutomationProperties.AccessibilityView=\"Raw\"/&gt;\n                        &lt;/Grid&gt;\n                    &lt;/ControlTemplate&gt;\n                &lt;/Setter.Value&gt;\n            &lt;/Setter&gt;\n        &lt;/Style&gt;\n</code></pre>\n"}], "owner": {"reputation": 11517, "user_id": 1470327, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bbfda31206a98c9fc947cec762db13e5?s=128&d=identicon&r=PG", "display_name": "bas", "link": "https://stackoverflow.com/users/1470327/bas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504728198, "creation_date": 1504724688, "question_id": 46082607, "link": "https://stackoverflow.com/questions/46082607/uwp-remove-togglebutton-mouse-over-and-mouse-pressed-background", "title": "UWP Remove ToggleButton mouse over and mouse pressed background", "body": "<p>UWP: How do I remove the Mouse Over and Mouse Pressed background of a <code>ToggleButton</code>?</p>\n\n<p>XAML:</p>\n\n<p>(PS: this works on a <code>Button</code>!)</p>\n\n<pre><code>    &lt;Style TargetType=\"ToggleButton\"&gt;\n        &lt;Setter Property=\"Foreground\" Value=\"White\"/&gt;\n        &lt;Setter Property=\"Template\"&gt;\n            &lt;Setter.Value&gt;\n                &lt;ControlTemplate TargetType=\"ToggleButton\"&gt;\n                    &lt;Grid x:Name=\"RootGrid\" Background=\"{TemplateBinding Background}\"&gt;\n                        &lt;VisualStateManager.VisualStateGroups&gt;\n                            &lt;VisualStateGroup x:Name=\"CommonStates\"&gt;\n                                &lt;VisualState x:Name=\"Normal\"&gt;\n                                &lt;/VisualState&gt;\n                                &lt;VisualState x:Name=\"PointerOver\"&gt;\n                                &lt;/VisualState&gt;\n                            &lt;/VisualStateGroup&gt;\n                        &lt;/VisualStateManager.VisualStateGroups&gt;\n                        &lt;ContentPresenter \n                            x:Name=\"ContentPresenter\"\n                            BorderBrush=\"Transparent\"\n                            BorderThickness=\"{TemplateBinding BorderThickness}\"\n                            Content=\"{TemplateBinding Content}\"\n                            ContentTransitions=\"{TemplateBinding ContentTransitions}\"\n                            ContentTemplate=\"{TemplateBinding ContentTemplate}\"\n                            Padding=\"{TemplateBinding Padding}\"\n                            HorizontalContentAlignment=\"{TemplateBinding HorizontalContentAlignment}\"\n                            VerticalContentAlignment=\"{TemplateBinding VerticalContentAlignment}\"\n                            AutomationProperties.AccessibilityView=\"Raw\"\n                            Foreground=\"White\"/&gt;\n                    &lt;/Grid&gt;\n                &lt;/ControlTemplate&gt;\n            &lt;/Setter.Value&gt;\n        &lt;/Setter&gt;\n    &lt;/Style&gt;\n</code></pre>\n\n<p>Result (NOTE the black square surrounding and the somewhat darker background in it):</p>\n\n<p><a href=\"https://i.stack.imgur.com/n2o1O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n2o1O.png\" alt=\"enter image description here\"></a></p>\n\n<p>Another image of the same button but then checked, maybe better to see how horrible it looks. </p>\n\n<p><a href=\"https://i.stack.imgur.com/oEC3N.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oEC3N.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "asp.net", "json"], "comments": [{"owner": {"reputation": 106158, "user_id": 932418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245e0f0dce8e71cb477b5aa8dff496a6?s=128&d=identicon&r=PG", "display_name": "L.B", "link": "https://stackoverflow.com/users/932418/l-b"}, "edited": false, "score": 1, "creation_date": 1504724504, "post_id": 46082544, "comment_id": 79126965, "body": "Show you real json"}, {"owner": {"reputation": 441, "user_id": 181976, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65d79b0fda9a9ebca0b83f9f4568890b?s=128&d=identicon&r=PG&f=1", "display_name": "user1934587390", "link": "https://stackoverflow.com/users/181976/user1934587390"}, "edited": false, "score": 1, "creation_date": 1504724709, "post_id": 46082544, "comment_id": 79127061, "body": "in your foreach KeyValuePair&lt;string, string&gt; should be KeyValuePair&lt;string, Newtonsoft.Json.Linq.JToken&gt; based on the error"}, {"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 0, "creation_date": 1504724752, "post_id": 46082544, "comment_id": 79127079, "body": "try deserializing as a <code>Dictionary&lt;string, string&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13234, "user_id": 561113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8b050fcc50ffb8de47e6704660aa98?s=128&d=identicon&r=PG", "display_name": "Xiaoy312", "link": "https://stackoverflow.com/users/561113/xiaoy312"}, "is_accepted": true, "score": 1, "last_activity_date": 1504724677, "creation_date": 1504724677, "answer_id": 46082603, "question_id": 46082544, "link": "https://stackoverflow.com/questions/46082544/net-how-do-i-iterate-through-json-object/46082603#46082603", "title": ".Net, How do I iterate through JSon object?", "body": "<p>You can use the <code>ToObject&lt;T&gt;</code> method:</p>\n\n<pre><code>var Sprites = PokeObject[\"sprites\"]\n    .ToObject&lt;Dictionary&lt;string, string&gt;&gt;()\n    .Select(x =&gt; x.Value)\n    .Where(x =&gt; x != null)\n    .ToList();\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 8350646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/784b11184c487c816e30868867397f45?s=128&d=identicon&r=PG&f=1", "display_name": "Jung", "link": "https://stackoverflow.com/users/8350646/jung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1350, "favorite_count": 0, "accepted_answer_id": 46082603, "answer_count": 1, "score": 1, "last_activity_date": 1504728854, "creation_date": 1504724435, "last_edit_date": 1504724559, "question_id": 46082544, "link": "https://stackoverflow.com/questions/46082544/net-how-do-i-iterate-through-json-object", "title": ".Net, How do I iterate through JSon object?", "body": "<p>I am trying to iterate through each key/value of the following:</p>\n\n<pre><code>\"sprites\": {\n    \"back_female\": null,\n    \"back_shiny_female\": null,\n    \"back_default\": \"some url\"\n    \"front_female\": null,\n    \"front_shiny_female\": null,\n    \"front_shiny\": \"some url\"\n},\n</code></pre>\n\n<p>In my ApiCaller.cs:</p>\n\n<pre><code>    JObject PokeObject = JsonConvert.DeserializeObject&lt;JObject&gt;(StringResponse);\n    JObject SpriteList = PokeObject[\"sprites\"].Value&lt;JObject&gt;();\n    List&lt;string&gt; Sprites = new List&lt;string&gt;();\n\n     foreach(KeyValuePair&lt;string, string&gt; entry in SpriteList) {\n                    if(entry.Value != null){\n                        Sprites.Add(entry.Value);\n                    }\n                }\n</code></pre>\n\n<p>I am getting:</p>\n\n<pre><code> Cannot convert type 'System.Collections.Generic.KeyValuePair&lt;string, Newtonsoft.Json.Linq.JToken&gt;' to 'System.Collections.Generic.KeyValuePair&lt;string, string&gt;\n</code></pre>\n\n<p>Could anybody help me solve this problem?\nThank you.</p>\n"}, {"tags": ["c#", "wpf", "devexpress", "wpfdatagrid", "devexpress-wpf"], "comments": [{"owner": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504726801, "post_id": 46082460, "comment_id": 79128131, "body": "So, genneraly you want to bind your ComobBox&#39;s IsDropDownOpen to your DataGridRow&#39;s IsSelected? or should they work independly?"}, {"owner": {"reputation": 727, "user_id": 570382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f88fca500a10d1f5b6af0f92d8bf16c?s=128&d=identicon&r=PG", "display_name": "snowcode", "link": "https://stackoverflow.com/users/570382/snowcode"}, "reply_to_user": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504727683, "post_id": 46082460, "comment_id": 79128578, "body": "It&#39;s not &#39;my&#39; combobox, it&#39;s the combo from the gridEditor. Perhaps if you could please share sample code for binding along the lines you suggest then I could test to see if that approach would work?"}, {"owner": {"reputation": 727, "user_id": 570382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f88fca500a10d1f5b6af0f92d8bf16c?s=128&d=identicon&r=PG", "display_name": "snowcode", "link": "https://stackoverflow.com/users/570382/snowcode"}, "reply_to_user": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504727780, "post_id": 46082460, "comment_id": 79128635, "body": "@sTrenat I took a quick look and I couldn&#39;t see a way how to do that?"}, {"owner": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504728467, "post_id": 46082460, "comment_id": 79128973, "body": "I don&#39;t know devexpress and don&#39;t have acces to it but i can make sample that works on build-in controls"}, {"owner": {"reputation": 727, "user_id": 570382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f88fca500a10d1f5b6af0f92d8bf16c?s=128&d=identicon&r=PG", "display_name": "snowcode", "link": "https://stackoverflow.com/users/570382/snowcode"}, "reply_to_user": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504728766, "post_id": 46082460, "comment_id": 79129125, "body": "I understand the general concept you&#39;re describing, unfortunately not sure that will help here? I&#39;ve included the actual xaml, you can see there&#39;s no &#39;combobox&#39; to bind to, maybe I&#39;m missing something."}, {"owner": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504729858, "post_id": 46082460, "comment_id": 79129664, "body": "I don&#39;t know this control but I&#39;m sure there is some property responsible for popup being visible, if not, you can always make attachedProperty assigned to some inner property which is set on when popup is Visible, like IsSelected/IsExpanded/IsOpened, and then, bind it to your row/cell IsSelected"}, {"owner": {"reputation": 727, "user_id": 570382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f88fca500a10d1f5b6af0f92d8bf16c?s=128&d=identicon&r=PG", "display_name": "snowcode", "link": "https://stackoverflow.com/users/570382/snowcode"}, "reply_to_user": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504775648, "post_id": 46082460, "comment_id": 79146387, "body": "Unfortunately that approach won&#39;t solve the main problem. I already can get the combo box to open with 1 click, that&#39;s not my main problem, the main problem (bolded at the top of my text) is once that combo box is open, clicking on another one merely acts like a &quot;click-away&quot; event (if such a thing exists) and the click into the new cell is never registered. If you really want to help, can you please run the sample I built for this question and suggest a fix that work with the sample? that will also help anyone else looking at this question in future. thanks in advance, Alan"}], "owner": {"reputation": 727, "user_id": 570382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f88fca500a10d1f5b6af0f92d8bf16c?s=128&d=identicon&r=PG", "display_name": "snowcode", "link": "https://stackoverflow.com/users/570382/snowcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 580, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504777245, "creation_date": 1504724105, "last_edit_date": 1504777245, "question_id": 46082460, "link": "https://stackoverflow.com/questions/46082460/auto-drop-down-of-combo-box-in-devexpress-xpf-grid-when-clicking-from-one-combo", "title": "Auto-Drop down of combo box in DevExpress Xpf.Grid when clicking from one combo box to another", "body": "<p>I am trying to enable 1-click editing of dropdown combo boxes inside a  <code>DevExpress.Xpf.Grid</code>, and am running into a rather unusual problem that I've not been able to find a solution to;</p>\n\n<p>I want to be able to:</p>\n\n<ol>\n<li>click on any cell that contains a combo box and have the 'Editor' immediately show the combo-box in the open state</li>\n<li>then while the combo box is still open, click onto another cell, the current combo box should close, and the new one I just clicked should open (with combo-box open). \n<a href=\"https://i.stack.imgur.com/lYxIy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lYxIy.png\" alt=\"enter image description here\"></a></li>\n</ol>\n\n<p>For example; If I clicked on cell A (To <code>Paris</code>), and then saw that it was the wrong cell, and immediately click Cell B(From <code>Vienna</code>) to it's left, what happens is that the second click appears to be captured as some type of 'close-combo' or <code>escape</code> event, and combo A (To <code>Paris</code>) closes, and the mouse <code>click</code> or <code>mouse-down</code> or <code>previewMouseXX</code> event is never captured anywhere else. i.e. while I've actually clicked on (From <code>Vienna</code>) that combo box never opens. <strong><em>If another combobox is already open then I actually have to double click to open cell B despite cell B being configured with   <code>immediatePopup=\"true\"</code>.</em></strong></p>\n\n<p>I've tried a bunch of approaches with no luck. (They all focus on getting the first cell I click to automatically open, and that works, but only for the first cell. ) </p>\n\n<p>Any assistance at all will be hugely appreciated.</p>\n\n<p>txs,</p>\n\n<p>Alan</p>\n\n<p>here's some sample code that demonstrates the problem;</p>\n\n<pre><code>&lt;Window \n        xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n        xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n        xmlns:local=\"clr-namespace:Grid1\"\n        x:Class=\"Grid1.MainWindow\"\n\n        xmlns:dxe=\"http://schemas.devexpress.com/winfx/2008/xaml/editors\" \n        xmlns:dxg=\"http://schemas.devexpress.com/winfx/2008/xaml/grid\"  \n\n        Title=\"Trip Details\" Height=\"350\" Width=\"625\"&gt;\n\n    &lt;Window.DataContext&gt;\n        &lt;local:MainWindowViewModel/&gt;\n    &lt;/Window.DataContext&gt;\n\n    &lt;Grid&gt;\n        &lt;dxg:TableView&gt;\n        &lt;/dxg:TableView&gt;\n        &lt;dxg:GridControl ItemsSource=\"{Binding Customers}\"&gt;\n            &lt;dxg:GridControl.Columns&gt;\n\n                &lt;dxg:GridColumn FieldName=\"Name\"/&gt;\n\n                &lt;dxg:GridColumn FieldName=\"From\"&gt;\n                    &lt;dxg:GridColumn.EditSettings&gt;\n                        &lt;dxe:ComboBoxEditSettings ImmediatePopup=\"True\" ItemsSource=\"{Binding Cities}\" AutoComplete=\"True\" IsTextEditable=\"False\" DisplayMember=\"Name\" ValueMember=\"Id\"/&gt;\n                    &lt;/dxg:GridColumn.EditSettings&gt;\n                &lt;/dxg:GridColumn&gt;\n\n                &lt;dxg:GridColumn FieldName=\"To\"&gt;\n                    &lt;dxg:GridColumn.EditSettings&gt;\n                        &lt;dxe:ComboBoxEditSettings  ImmediatePopup=\"True\" ItemsSource=\"{Binding Cities}\" AutoComplete=\"True\" IsTextEditable=\"False\" DisplayMember=\"Name\" ValueMember=\"Id\"/&gt;\n                    &lt;/dxg:GridColumn.EditSettings&gt;\n                &lt;/dxg:GridColumn&gt;\n\n                &lt;dxg:GridColumn FieldName=\"Depart\"/&gt;\n                &lt;dxg:GridColumn FieldName=\"Return\"/&gt;\n\n            &lt;/dxg:GridControl.Columns&gt;\n        &lt;/dxg:GridControl&gt;\n    &lt;/Grid&gt;\n&lt;/Window&gt;\n</code></pre>\n\n<p>City class;</p>\n\n<pre><code>namespace Grid1\n{\n    public class City\n    {\n        public int Id { get; set; }\n        public string Name { get; set; }\n\n        public static List&lt;City&gt; GetCities()\n        {\n            return new List&lt;City&gt;()\n            {\n                new City() { Id = 1, Name = \"London\"},\n                new City() { Id = 2, Name = \"Paris\"},\n                new City() { Id = 3, Name = \"Vienna\"},\n                new City() { Id = 4, Name = \"Cambridge\"}\n            };\n        }\n    }\n\n    public enum  CityId {  London = 1, Paris, Vienna, Cambridge }\n}\n</code></pre>\n\n<p>and the viewmodel;</p>\n\n<pre><code>namespace Grid1\n{\n    public class MainWindowViewModel\n    {\n        public MainWindowViewModel()\n        {\n            Customers = Trip.GetCustomers();\n            Cities = City.GetCities();\n        }\n\n        public List&lt;Trip&gt; Customers { get; set; }\n        public List&lt;City&gt; Cities { get; set; }\n    }\n}\n</code></pre>\n\n<p>Summary:</p>\n\n<p>When a combobox has just opened as a result of a single-click (this works), when clicking away (immediately onto a second cell in order to get that cell to show it's combobox, that doesnt work), it's almost as if <strong><em>that</em></strong> click is turned into some type of <code>click-away</code> event, if such a thing even exists, and where you actually clicked is ignored and hit-testing at that spot is never done, and no further mouse event is raised. That new cell you clicked never even receives any focus or events. (as if the combo box swallowed the click)</p>\n"}, {"tags": ["c#", "linq"], "comments": [{"owner": {"reputation": 35505, "user_id": 1394631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ajAkr.jpg?s=128&g=1", "display_name": "octavioccl", "link": "https://stackoverflow.com/users/1394631/octavioccl"}, "edited": false, "score": 1, "creation_date": 1504724148, "post_id": 46082448, "comment_id": 79126752, "body": "please, show your input, and the expected output"}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1504724227, "post_id": 46082448, "comment_id": 79126799, "body": "So <i>for each sentence</i> you need to take the <i>first word</i>.  Take a look at your logic again, can you see your flaws?"}, {"owner": {"reputation": 32638, "user_id": 2052655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mWqp.jpg?s=128&g=1", "display_name": "Rufus L", "link": "https://stackoverflow.com/users/2052655/rufus-l"}, "edited": false, "score": 1, "creation_date": 1504724228, "post_id": 46082448, "comment_id": 79126800, "body": "<code>return sentences.Select(sentence =&gt; sentence.Split(&quot; &quot;)[0]);</code>"}, {"owner": {"reputation": 13234, "user_id": 561113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8b050fcc50ffb8de47e6704660aa98?s=128&d=identicon&r=PG", "display_name": "Xiaoy312", "link": "https://stackoverflow.com/users/561113/xiaoy312"}, "edited": false, "score": 0, "creation_date": 1504724234, "post_id": 46082448, "comment_id": 79126809, "body": "How are you getting an empty output when the code clearly doesn&#39;t even compile?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1228"}, "edited": false, "score": 0, "creation_date": 1504724253, "post_id": 46082448, "comment_id": 79126820, "body": "foreach the input, do the split, and yield return First()"}, {"owner": {"reputation": 5, "user_id": 8551991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a24a0d72c25f58e0fc123fd00ece554?s=128&d=identicon&r=PG&f=1", "display_name": "R.code", "link": "https://stackoverflow.com/users/8551991/r-code"}, "edited": false, "score": 0, "creation_date": 1504724292, "post_id": 46082448, "comment_id": 79126842, "body": "My Input is  &quot;this is a sentence, this is another, this is another, again&quot; I am looking for an out put of &quot;this , this, this, again&quot;"}, {"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1504724321, "post_id": 46082448, "comment_id": 79126852, "body": "That looks like a single string. Is each sentence not its own string? It looks like it should be given the method parameter."}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1504724557, "post_id": 46082448, "comment_id": 79126996, "body": "@BlakeRogers since when are sentences delimited by commas?"}, {"owner": {"reputation": 16641, "user_id": 1744164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c224e326809636f5f5d3841899571e?s=128&d=identicon&r=PG", "display_name": "Sir Rufo", "link": "https://stackoverflow.com/users/1744164/sir-rufo"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1504726530, "post_id": 46082448, "comment_id": 79127986, "body": "@maccettura and since when words in a sentence are only delimited by a space ;o)"}], "answers": [{"tags": [], "owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "is_accepted": true, "score": 0, "last_activity_date": 1504724241, "creation_date": 1504724241, "answer_id": 46082493, "question_id": 46082448, "link": "https://stackoverflow.com/questions/46082448/return-the-first-word-from-each-sentence-using-linq/46082493#46082493", "title": "Return the first word from each sentence using LINQ", "body": "<p>You're close, but you only want the first word of each sentence:</p>\n\n<pre><code>return sentences.Select(s =&gt; s.Split(' ').First());\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8551991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a24a0d72c25f58e0fc123fd00ece554?s=128&d=identicon&r=PG&f=1", "display_name": "R.code", "link": "https://stackoverflow.com/users/8551991/r-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 46082493, "answer_count": 1, "score": -4, "last_activity_date": 1504724545, "creation_date": 1504724065, "last_edit_date": 1504724390, "question_id": 46082448, "link": "https://stackoverflow.com/questions/46082448/return-the-first-word-from-each-sentence-using-linq", "title": "Return the first word from each sentence using LINQ", "body": "<p>The Question is as follow: </p>\n\n<p>You're given a collection of sentences.\nReturn a collection containing the first word of each sentence, each word is separated by a single space character.</p>\n\n<pre><code>public static IEnumerable&lt;string&gt; GetFirstWords(IEnumerable&lt;string&gt; sentences)\n{\n    return sentences.Split(\" \").Select(i =&gt; i.ToString()).Take(4);\n}\n</code></pre>\n\n<p>This is what i have written so far, I am getting an empty output. </p>\n"}, {"tags": ["c#", "asp.net-core", "identityserver4"], "comments": [{"owner": {"reputation": 17148, "user_id": 672453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75681814fbbb90c9224ea5ed0f8324ee?s=128&d=identicon&r=PG", "display_name": "leastprivilege", "link": "https://stackoverflow.com/users/672453/leastprivilege"}, "edited": false, "score": 0, "creation_date": 1504758810, "post_id": 46082422, "comment_id": 79137473, "body": "Why do you care? It is just the discovery document. It is not that you actually <i>disable</i> the grant type with that."}, {"owner": {"reputation": 189, "user_id": 3344334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4331a3beb0b5dc65b522d4462d6b1b9d?s=128&d=identicon&r=PG", "display_name": "Bryan Loeper", "link": "https://stackoverflow.com/users/3344334/bryan-loeper"}, "reply_to_user": {"reputation": 17148, "user_id": 672453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75681814fbbb90c9224ea5ed0f8324ee?s=128&d=identicon&r=PG", "display_name": "leastprivilege", "link": "https://stackoverflow.com/users/672453/leastprivilege"}, "edited": false, "score": 0, "creation_date": 1504787055, "post_id": 46082422, "comment_id": 79154157, "body": "Ideally I&#39;d like to disable those grant types and have the discovery document reflect that, just haven&#39;t been able to figure out how."}, {"owner": {"reputation": 17148, "user_id": 672453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75681814fbbb90c9224ea5ed0f8324ee?s=128&d=identicon&r=PG", "display_name": "leastprivilege", "link": "https://stackoverflow.com/users/672453/leastprivilege"}, "edited": false, "score": 2, "creation_date": 1504801255, "post_id": 46082422, "comment_id": 79164670, "body": "You can&#39;t disable them. But you cannot use them (meaning no client is configured to use them)."}, {"owner": {"reputation": 189, "user_id": 3344334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4331a3beb0b5dc65b522d4462d6b1b9d?s=128&d=identicon&r=PG", "display_name": "Bryan Loeper", "link": "https://stackoverflow.com/users/3344334/bryan-loeper"}, "reply_to_user": {"reputation": 17148, "user_id": 672453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75681814fbbb90c9224ea5ed0f8324ee?s=128&d=identicon&r=PG", "display_name": "leastprivilege", "link": "https://stackoverflow.com/users/672453/leastprivilege"}, "edited": false, "score": 0, "creation_date": 1504804478, "post_id": 46082422, "comment_id": 79166322, "body": "Oh well, thanks for the feedback anyways!"}], "owner": {"reputation": 189, "user_id": 3344334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4331a3beb0b5dc65b522d4462d6b1b9d?s=128&d=identicon&r=PG", "display_name": "Bryan Loeper", "link": "https://stackoverflow.com/users/3344334/bryan-loeper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 452, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1504723975, "creation_date": 1504723975, "question_id": 46082422, "link": "https://stackoverflow.com/questions/46082422/is-there-a-native-way-to-disable-grant-types-supported-in-identityserver4", "title": "Is there a native way to disable grant_types_supported in IdentityServer4?", "body": "<p>Currently, I'm using the following:</p>\n\n<pre><code>services.AddIdentityServer(options =&gt;\n    {\n        options.Discovery.ShowGrantTypes = false;\n        options.Discovery.CustomEntries.Add(\"grant_types_supported\", new [] {\"client_credentials\"});\n    })\n</code></pre>\n\n<p>The resulting discovery data at <code>/.well-known/openid-configuration</code> looks correct, but I am hoping to find a less hack-ish way of configuring this. All of our authentication/authorization will be server-to-server using client_credentials.</p>\n"}, {"tags": ["c#", "asp.net-mvc"], "comments": [{"owner": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 1, "creation_date": 1504724175, "post_id": 46082313, "comment_id": 79126769, "body": "Why not have two Get methods, one that accepts no parms and one that does?"}, {"owner": {"reputation": 13318, "user_id": 1221684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f83137a1e0ee44a266b26d2ff01bc4?s=128&d=identicon&r=PG", "display_name": "JamieD77", "link": "https://stackoverflow.com/users/1221684/jamied77"}, "edited": false, "score": 1, "creation_date": 1504726394, "post_id": 46082313, "comment_id": 79127918, "body": "sounds like a good time to learn about ajax"}], "answers": [{"comments": [{"owner": {"reputation": 5975, "user_id": 187365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CIlaX.jpg?s=128&g=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/187365/fran"}, "edited": false, "score": 0, "creation_date": 1504728342, "post_id": 46082496, "comment_id": 79128903, "body": "This is the same answer he got to his <a href=\"https://stackoverflow.com/questions/46081518/why-is-my-model-failing-validation\">other question</a> and didn&#39;t like it."}, {"owner": {"reputation": 12917, "user_id": 937440, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ba5f9ad02a9ab43d4664d17747a1230?s=128&d=identicon&r=PG", "display_name": "w0051977", "link": "https://stackoverflow.com/users/937440/w0051977"}, "reply_to_user": {"reputation": 5975, "user_id": 187365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CIlaX.jpg?s=128&g=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/187365/fran"}, "edited": false, "score": 0, "creation_date": 1504728668, "post_id": 46082496, "comment_id": 79129071, "body": "@Fran, I don&#39;t understand what you mean.  Can you clarify? Thanks."}, {"owner": {"reputation": 5975, "user_id": 187365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CIlaX.jpg?s=128&g=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/187365/fran"}, "edited": false, "score": 0, "creation_date": 1504729674, "post_id": 46082496, "comment_id": 79129558, "body": "See the question I linked to. The OP is trying to do too many things with one action and it&#39;s causing them grief.  He&#39;s got an answer on the question that tell him exactly what you are suggesting."}, {"owner": {"reputation": 12917, "user_id": 937440, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ba5f9ad02a9ab43d4664d17747a1230?s=128&d=identicon&r=PG", "display_name": "w0051977", "link": "https://stackoverflow.com/users/937440/w0051977"}, "reply_to_user": {"reputation": 5975, "user_id": 187365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CIlaX.jpg?s=128&g=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/187365/fran"}, "edited": false, "score": 0, "creation_date": 1504729834, "post_id": 46082496, "comment_id": 79129641, "body": "Ok.  I did not see that.  I will vote to close this question."}], "tags": [], "owner": {"reputation": 12917, "user_id": 937440, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ba5f9ad02a9ab43d4664d17747a1230?s=128&d=identicon&r=PG", "display_name": "w0051977", "link": "https://stackoverflow.com/users/937440/w0051977"}, "is_accepted": false, "score": 0, "last_activity_date": 1504724261, "creation_date": 1504724261, "answer_id": 46082496, "question_id": 46082313, "link": "https://stackoverflow.com/questions/46082313/how-do-i-create-a-get-form-with-validation-in-mvc/46082496#46082496", "title": "How do I create a GET form with validation in MVC", "body": "<p>If I am understanding your question correctly then I think you need to consider the HttpGet attribute:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/system.web.mvc.httpgetattribute(v=vs.118).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/system.web.mvc.httpgetattribute(v=vs.118).aspx</a></p>\n\n<p>and the HttpPost attribute:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/system.web.mvc.httppostattribute(v=vs.118).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/system.web.mvc.httppostattribute(v=vs.118).aspx</a></p>\n\n<p>Lets say you have a create method.  The Http method would look like this:</p>\n\n<pre><code>[HttpGet]\npublic ActionResult Create()\n{\n\n}\n</code></pre>\n\n<p>and the post method would look like this:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Create(Person p)\n{\n//Logic to insert p into database.  Could call an application service/repository to do this\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12917, "user_id": 937440, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ba5f9ad02a9ab43d4664d17747a1230?s=128&d=identicon&r=PG", "display_name": "w0051977", "link": "https://stackoverflow.com/users/937440/w0051977"}, "edited": false, "score": 0, "creation_date": 1504732457, "post_id": 46083474, "comment_id": 79130876, "body": "This is the same as my answer.  Isn&#39;t it?"}, {"owner": {"reputation": 1651, "user_id": 3305679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4uj3K.jpg?s=128&g=1", "display_name": "H&#252;seyin Burak Karadag", "link": "https://stackoverflow.com/users/3305679/h%c3%bcseyin-burak-karadag"}, "reply_to_user": {"reputation": 12917, "user_id": 937440, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/5ba5f9ad02a9ab43d4664d17747a1230?s=128&d=identicon&r=PG", "display_name": "w0051977", "link": "https://stackoverflow.com/users/937440/w0051977"}, "edited": false, "score": 0, "creation_date": 1504733071, "post_id": 46083474, "comment_id": 79131146, "body": "@w0051977 only, I use same action name with you. Your answer attention to http attributes but  my answer attention RedirectToAction. I do not think it&#39;s the same answer"}], "tags": [], "owner": {"reputation": 1651, "user_id": 3305679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4uj3K.jpg?s=128&g=1", "display_name": "H&#252;seyin Burak Karadag", "link": "https://stackoverflow.com/users/3305679/h%c3%bcseyin-burak-karadag"}, "is_accepted": false, "score": 0, "last_activity_date": 1504728240, "creation_date": 1504728240, "answer_id": 46083474, "question_id": 46082313, "link": "https://stackoverflow.com/questions/46082313/how-do-i-create-a-get-form-with-validation-in-mvc/46083474#46083474", "title": "How do I create a GET form with validation in MVC", "body": "<p><code>RedirectToAction</code> solve the problem.</p>\n\n<p>you can go back to the get method after submited data and populate the view with default values</p>\n\n<pre><code>[HttpGet]\npublic ActionResult Create()\n{\n   // fill model to default data\n   return view(model);\n}\n\n[HttpPost]\npublic ActionResult Create(Person p)\n{     \n   //do your stuff save data \n   return RedirectToAction(\"Create\");      \n}\n\nor\n\n[HttpPost]\npublic ActionResult Create(Person p)\n{     \n   if(...)\n   { \n     //do your stuff  any logic\n     return RedirectToAction(\"Create\");\n   }\n\n   //do your stuff \n\n     return view(...);\n}\n</code></pre>\n"}], "owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1504728240, "creation_date": 1504723553, "question_id": 46082313, "link": "https://stackoverflow.com/questions/46082313/how-do-i-create-a-get-form-with-validation-in-mvc", "title": "How do I create a GET form with validation in MVC", "body": "<p>I'm having a real problem trying to articulate this seemly simple problem.</p>\n\n<p>I have a single view that contains a FORM with a few search fields at the top of the view and the results of that search get shown on the same view after submitting the form.</p>\n\n<p>I have a single HTTPGET controller method that takes the form fields as parameters and IF it was submitted by a user it will pass the model back to the view with the results to be shown and pre-populate the search form with what they filled out.</p>\n\n<p>How can I tell if the page was loaded with default parameters vs. someone actually submitted the form.</p>\n\n<p>What's the best way to accomplish this?</p>\n"}, {"tags": ["c#", "entity-framework", "entity-framework-6"], "comments": [{"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 1, "creation_date": 1504723570, "post_id": 46082233, "comment_id": 79126443, "body": "Remove the <code>UserId</code> property and related mapping. This way the property <code>Id</code> will be mapped to the <code>UserId</code> column."}, {"owner": {"reputation": 626, "user_id": 7019416, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3b35eeefe8240d8acedbe211b40b6913?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich", "link": "https://stackoverflow.com/users/7019416/heinrich"}, "reply_to_user": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1504723915, "post_id": 46082233, "comment_id": 79126631, "body": "@IvanStoev thanks, that solved the problem, but is no there a way to keep the UserID as part of the model as I intended and still having it working?"}, {"owner": {"reputation": 999, "user_id": 5185389, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8c63dbf6d7df7773c3757322d70486b7?s=128&d=identicon&r=PG&f=1", "display_name": "DevilSuichiro", "link": "https://stackoverflow.com/users/5185389/devilsuichiro"}, "edited": false, "score": 0, "creation_date": 1504724280, "post_id": 46082233, "comment_id": 79126837, "body": "use Property(t =&gt; t.UserID).HasColumnName(NewName); the resulting table must not have two columns with the same name, so it chose the name &quot;UserID1&quot;. If there is no other column, choose the .Ignore function instead."}, {"owner": {"reputation": 157412, "user_id": 5202563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mKKQ.png?s=128&g=1", "display_name": "Ivan Stoev", "link": "https://stackoverflow.com/users/5202563/ivan-stoev"}, "edited": false, "score": 0, "creation_date": 1504767806, "post_id": 46082233, "comment_id": 79141382, "body": "It&#39;s possible to make <code>UserID</code> property delegating it&#39;s get/set to <code>Id</code> and making it unmapped (by using <code>Ignore</code> method), but IMO it would just create problems - first, it&#39;s strange to have 2 properties representing one and the same thing, and second, you should remember not using <code>UserID</code> property in LINQ to Entities queries because you&#39;ll get runtime exceptions."}], "owner": {"reputation": 626, "user_id": 7019416, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3b35eeefe8240d8acedbe211b40b6913?s=128&d=identicon&r=PG&f=1", "display_name": "Heinrich", "link": "https://stackoverflow.com/users/7019416/heinrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 406, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504727226, "creation_date": 1504723228, "last_edit_date": 1504727226, "question_id": 46082233, "link": "https://stackoverflow.com/questions/46082233/invalid-column-name-columnname-with-a-suffix-number", "title": "Invalid column name: &quot;ColumnName#&quot; with a suffix number", "body": "<p>I have a table <code>Users</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/icEfu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/icEfu.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am using Entity Framework 6 to make the type configuration</p>\n\n<pre><code>public class UsersMapping : EntityTypeConfiguration&lt;Users&gt;\n{\n    public UsersMapping()\n    {\n        HasKey(t =&gt; t.UserID);\n        Property(t =&gt; t.UserID).IsRequired();\n\n        ToTable(\"Users\", \"dbo\");\n\n        Property(t =&gt; t.Id).HasColumnName(\"UserID\");\n    }\n}\n</code></pre>\n\n<p>and this is the <code>Users</code> class:</p>\n\n<pre><code>public class Users : EntityBase\n{\n    public int UserID { get; set; }\n    public string FirstName { get; set; }\n    public string LastName { get; set; }\n    public string UserName { get; set; }\n    public DateTime DateCreated { get; set; }\n    public byte[] Timestamp { get; set; }\n    public byte[] Password { get; set; }\n    public DateTime? DateActivated { get; set; }\n    public bool LockedOut { get; set; }\n    public string Address { get; set; }\n    public string City { get; set; }\n    public int? State { get; set; }\n    public string Zip { get; set; }\n    public string SecurityQuestion { get; set; }\n    public string SecurityAnswer { get; set; }\n    public string Email { get; set; }\n    public string PhoneNumber { get; set; }\n    public bool? ReportServiceAccount { get; set; }\n    public string CompanyName { get; set; }\n    public int? ILAC { get; set; }\n    public string BioFingerprint { get; set; }\n    public string Title { get; set; }\n    public string Squad { get; set; }\n    public byte[] SignatureFile { get; set; }\n    public byte? CETGroupID { get; set; }\n    public string TokenID { get; set; }\n    public int? Pin { get; set; }\n    public string RadioNr { get; set; }\n}\n\npublic class EntityBase\n{\n   public int Id { get; set; }\n}\n</code></pre>\n\n<p>I am trying to set the Id field as primary because my repository pattern works using the field Id that is not present on this case in the table. But when I am trying to get the set of users I get this error: </p>\n\n<blockquote>\n  <p>The column name is invalid UserID1</p>\n</blockquote>\n\n<p>The weird thing to me is the #1 that is at the end. What I am doing wrong?</p>\n"}, {"tags": ["c#", "integration-testing", "asp.net-core-2.0"], "comments": [{"owner": {"reputation": 1587, "user_id": 1636492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6d0ccf8f18fabe4e9963d504197cfc5?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1636492/hugo"}, "edited": false, "score": 0, "creation_date": 1504725578, "post_id": 46082196, "comment_id": 79127493, "body": "why don&#39;t you call the methods from your controller?"}, {"owner": {"reputation": 395, "user_id": 1919145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45feb31d91227ba44de92ae316129a12?s=128&d=identicon&r=PG", "display_name": "Cedric Royer-Bertrand", "link": "https://stackoverflow.com/users/1919145/cedric-royer-bertrand"}, "reply_to_user": {"reputation": 1587, "user_id": 1636492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6d0ccf8f18fabe4e9963d504197cfc5?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1636492/hugo"}, "edited": false, "score": 0, "creation_date": 1504726179, "post_id": 46082196, "comment_id": 79127808, "body": "because if I instanciate the controler and call the Get() directly it does not test the route and the fact that is call on a Http GET. That would be more a unit test."}, {"owner": {"reputation": 1587, "user_id": 1636492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6d0ccf8f18fabe4e9963d504197cfc5?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1636492/hugo"}, "edited": false, "score": 0, "creation_date": 1504757457, "post_id": 46082196, "comment_id": 79137143, "body": "This link could help you <a href=\"https://docs.microsoft.com/en-us/aspnet/web-api/overview/testing-and-debugging/unit-testing-controllers-in-web-api\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/aspnet/web-api/overview/&hellip;</a>"}, {"owner": {"reputation": 395, "user_id": 1919145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45feb31d91227ba44de92ae316129a12?s=128&d=identicon&r=PG", "display_name": "Cedric Royer-Bertrand", "link": "https://stackoverflow.com/users/1919145/cedric-royer-bertrand"}, "reply_to_user": {"reputation": 1587, "user_id": 1636492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6d0ccf8f18fabe4e9963d504197cfc5?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1636492/hugo"}, "edited": false, "score": 0, "creation_date": 1504764555, "post_id": 46082196, "comment_id": 79139540, "body": "Thanks but not really as it&#39;s for Web API 2 and it&#39;s UnitTesting. I&#39;m interested by Integration Tests for .net core 2.0."}], "answers": [{"tags": [], "owner": {"reputation": 650, "user_id": 7861502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0797f46cd237bda1eb66d55ceef1cb4?s=128&d=identicon&r=PG", "display_name": "arnaudauroux", "link": "https://stackoverflow.com/users/7861502/arnaudauroux"}, "is_accepted": true, "score": 4, "last_activity_date": 1505122376, "creation_date": 1505122376, "answer_id": 46152428, "question_id": 46082196, "link": "https://stackoverflow.com/questions/46082196/integrationtest-controllers-with-net-core-2-0-on-web-api/46152428#46152428", "title": "IntegrationTest controllers with .net core 2.0 on web api", "body": "<p>Take a look at the official documentation for integration testing with ASP.NET Core 2.0: <a href=\"https://docs.microsoft.com/en-us/aspnet/core/testing/integration-testing\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/aspnet/core/testing/integration-testing</a></p>\n\n<p>The main idea is to create a <code>TestServer</code> instance with a <code>WebHostBuilder</code> configured with your <code>Startup</code> class. You can then get a <code>HttpClient</code> instance from the <code>TestServer</code> to call your self-hosted api</p>\n"}], "owner": {"reputation": 395, "user_id": 1919145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/45feb31d91227ba44de92ae316129a12?s=128&d=identicon&r=PG", "display_name": "Cedric Royer-Bertrand", "link": "https://stackoverflow.com/users/1919145/cedric-royer-bertrand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 46152428, "answer_count": 1, "score": 0, "last_activity_date": 1505122376, "creation_date": 1504723080, "question_id": 46082196, "link": "https://stackoverflow.com/questions/46082196/integrationtest-controllers-with-net-core-2-0-on-web-api", "title": "IntegrationTest controllers with .net core 2.0 on web api", "body": "<p>I've just created an empty web api project with .net core 2.0.\nI have a default controller and I want now create an integration test.</p>\n\n<pre><code>[Route(\"api/[controller]\")]\npublic class ValuesController : Controller\n{\n    // GET api/values\n    [HttpGet]\n    public IEnumerable&lt;string&gt; Get()\n    {\n        return new string[] { \"value1\", \"value2\" };\n    }\n}\n</code></pre>\n\n<p>The goal is self host in the integration then enter url api/values and check the return.</p>\n\n<p>NB: I only use wep api 2 and owin, and it was quite easy to do this. But the following link: <a href=\"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/owin\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/aspnet/core/fundamentals/owin</a> says that .net core application should not use owin, so what should we use and how to it?</p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 6, "creation_date": 1504723125, "post_id": 46082193, "comment_id": 79126205, "body": "You&#39;re talking about converting it to a string. A <code>DateTime</code> doesn&#39;t &quot;have&quot; an am/pm marker, and it has no concept 12 hour vs 24 hours; those things are part of stringifying it (or not, depending on format). <i>Any</i> <code>DateTime</code> instance can be stringified with or without am/pm, depending on what format information you pass to <code>dt.ToString()</code>, or <code>String.Format()</code>, or whatever you use to stringify it."}, {"owner": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "edited": false, "score": 4, "creation_date": 1504723131, "post_id": 46082193, "comment_id": 79126209, "body": "<code>DateTime</code> does not have a format.  Formats only come into play when converting it to a string."}, {"owner": {"reputation": 8558, "user_id": 1375753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dfea40298dab8a6a7948115487ab1a5?s=128&d=identicon&r=PG", "display_name": "Ofir Winegarten", "link": "https://stackoverflow.com/users/1375753/ofir-winegarten"}, "edited": false, "score": 0, "creation_date": 1504723165, "post_id": 46082193, "comment_id": 79126229, "body": "A date is a date is a date. No formatting involved."}, {"owner": {"reputation": 381, "user_id": 1264882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e826fc5bd717b7227da8be6df27f488c?s=128&d=identicon&r=PG", "display_name": "WithMetta", "link": "https://stackoverflow.com/users/1264882/withmetta"}, "edited": false, "score": 0, "creation_date": 1504723172, "post_id": 46082193, "comment_id": 79126240, "body": "<a href=\"https://stackoverflow.com/questions/2417093/converting-time-to-military\" title=\"converting time to military\">stackoverflow.com/questions/2417093/converting-time-to-milit&zwnj;&#8203;ary</a>"}, {"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 2, "creation_date": 1504723286, "post_id": 46082193, "comment_id": 79126303, "body": "<code>&quot;they all convert to a string, which is not what I am trying to do&quot;</code> - Yes it is.  That is <i>exactly</i> what you&#39;re trying to do."}, {"owner": {"reputation": 15, "user_id": 8563784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f07c238b601f4d7db3b289f2304f6d?s=128&d=identicon&r=PG&f=1", "display_name": "CSchroeder", "link": "https://stackoverflow.com/users/8563784/cschroeder"}, "edited": false, "score": 0, "creation_date": 1504723539, "post_id": 46082193, "comment_id": 79126425, "body": "Maybe I asked it wrong, how do I convert a string like - &quot;09-06-2017 13:00:00&quot;  to a date that looks exactly the same?"}, {"owner": {"reputation": 116487, "user_id": 80274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cdf128a0ee0cf38f0a673dbc82a74449?s=128&d=identicon&r=PG", "display_name": "Scott Chamberlain", "link": "https://stackoverflow.com/users/80274/scott-chamberlain"}, "edited": false, "score": 0, "creation_date": 1504723758, "post_id": 46082193, "comment_id": 79126534, "body": "@CSchroeder look at the accepted answer of the linked duplicate, except your format will be <code>&quot;MM-dd-yyyy HH:mm:ss&quot;</code> See <a href=\"https://docs.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings\" rel=\"nofollow noreferrer\">here</a> to find out what all the letters mean."}, {"owner": {"reputation": 116487, "user_id": 80274, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cdf128a0ee0cf38f0a673dbc82a74449?s=128&d=identicon&r=PG", "display_name": "Scott Chamberlain", "link": "https://stackoverflow.com/users/80274/scott-chamberlain"}, "edited": false, "score": 1, "creation_date": 1504724047, "post_id": 46082193, "comment_id": 79126706, "body": "To make the round trip it would be <code>DateTime dt = DateTime.ParseExact(&quot;09-06-2017 13:00:00&quot;, &quot;MM-dd-yyyy HH:mm:ss&quot;, CultureInfo.InvariantCulture)</code> to get the date time object, and to get it back you do <code>string dtString = dt.ToString(&quot;MM-dd-yyyy HH:mm:ss&quot;, CultureInfo.InvariantCulture);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13234, "user_id": 561113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8b050fcc50ffb8de47e6704660aa98?s=128&d=identicon&r=PG", "display_name": "Xiaoy312", "link": "https://stackoverflow.com/users/561113/xiaoy312"}, "is_accepted": false, "score": 2, "last_activity_date": 1504723230, "creation_date": 1504723230, "answer_id": 46082234, "question_id": 46082193, "link": "https://stackoverflow.com/questions/46082193/how-to-convert-a-c-datetime-to-a-c-datetime-without-the-am-pm-and-in-24-hour-f/46082234#46082234", "title": "How to convert a C# DateTime to a C# DateTime without the AM/PM and in 24 hour format?", "body": "<pre><code>// InvariantCulture may not be needed depending on your machine default region/language settings\nDateTime.Now.ToString(\"M/d/yyyy HH:mm:ss\", CultureInfo.InvariantCulture)\n</code></pre>\n\n<blockquote>\n  <p>9/6/2017 14:39:50</p>\n</blockquote>\n\n<p>Also see: <a href=\"https://docs.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings\" rel=\"nofollow noreferrer\">Custom Date and Time Format Strings</a></p>\n"}], "owner": {"reputation": 15, "user_id": 8563784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f07c238b601f4d7db3b289f2304f6d?s=128&d=identicon&r=PG&f=1", "display_name": "CSchroeder", "link": "https://stackoverflow.com/users/8563784/cschroeder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "closed_date": 1504723446, "answer_count": 1, "score": 0, "last_activity_date": 1504723593, "creation_date": 1504723069, "last_edit_date": 1504723593, "question_id": 46082193, "link": "https://stackoverflow.com/questions/46082193/how-to-convert-a-c-datetime-to-a-c-datetime-without-the-am-pm-and-in-24-hour-f", "closed_reason": "Duplicate", "title": "How to convert a C# DateTime to a C# DateTime without the AM/PM and in 24 hour format?", "body": "<p>I see a ton of questions about this but they all convert to a string, which is not what I am trying to do. I need it to still be a date time object after changing it to a 24 hour format without the AM/PM. An example of a date that I want to convert is - 9/6/2017 1:00:00 PM and I want it to look like 09-06-2017 13:00:00. I have searched for this for far too long, I would think it would be easier than this.</p>\n\n<p>EDIT:\nI think I asked this incorrectly, how do i convert a string like - \"09-06-2017 13:00:00\" into a date that looks exactly the same.</p>\n\n<p>As far as I can tell this is not the same as what I have seen asked in the past, or I could not find it.</p>\n"}, {"tags": ["c#", "google-chrome", "cookies", "proxy"], "comments": [{"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1504723018, "post_id": 46082111, "comment_id": 79126146, "body": "<a href=\"https://developer.chrome.com/multidevice/data-compression#faq\" rel=\"nofollow noreferrer\">developer.chrome.com/multidevice/data-compression#faq</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4180, "user_id": 966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BgGV9.jpg?s=128&g=1", "display_name": "motevalizadeh", "link": "https://stackoverflow.com/users/966691/motevalizadeh"}, "is_accepted": true, "score": 0, "last_activity_date": 1504726190, "creation_date": 1504726190, "answer_id": 46082983, "question_id": 46082111, "link": "https://stackoverflow.com/questions/46082111/how-to-disable-google-proxy-used-for-chromes-mobile-data-compression-in-c/46082983#46082983", "title": "How to disable Google proxy used for Chrome&#39;s mobile data compression in C#?", "body": "<p>Thanks @JoshLee for this link:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6316796/read-x-forwarded-for-header\">Read X-Forwarded-For header</a></p>\n\n<p>and:</p>\n\n<pre><code>As a site owner, how do I perform IP geo-targeting?\nThe IP address of your device is forwarded to the destination server via the \nX-Forwarded-For header. Site owners should check for this header to \ncorrectly determine the location of the user based on client's IP \n</code></pre>\n\n<p>This function can help you to get the currect IP address:</p>\n\n<pre><code>public static string GetRequestIp()\n    {\n        if (HttpContext.Current.Request.Headers[\"X-Forwarded-For\"] != null)\n        {\n            return HttpContext.Current.Request.Headers[\"X-Forwarded-For\"].Split(new char[] { ',' })[0].ToString();\n        }\n\n        return HttpContext.Current.Request.UserHostAddress;\n    }\n</code></pre>\n"}], "owner": {"reputation": 4180, "user_id": 966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/BgGV9.jpg?s=128&g=1", "display_name": "motevalizadeh", "link": "https://stackoverflow.com/users/966691/motevalizadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 46082983, "answer_count": 1, "score": 0, "last_activity_date": 1504726190, "creation_date": 1504722735, "last_edit_date": 1504724465, "question_id": 46082111, "link": "https://stackoverflow.com/questions/46082111/how-to-disable-google-proxy-used-for-chromes-mobile-data-compression-in-c", "title": "How to disable Google proxy used for Chrome&#39;s mobile data compression in C#?", "body": "<p>When a user want to login to my website (C#, MVC), I save the IP address by code below in a cookie:</p>\n\n<pre><code>   HttpContext.Current.Request.UserHostAddress\n</code></pre>\n\n<p>After user redirected to account when I want to get the IP address again and compare it with saved IP on cookie , IP has been changed to : \" 66.249.93.88\"</p>\n\n<p>after some researches I found that this is because of Google proxy used for Chrome's mobile data compression and when I disable it on the setting everything work fine.</p>\n\n<p>Now I want to know is that a way to disable data compression by codes or... to preventing IP changing?</p>\n\n<p>Is there a way to find main IP address after changing to proxy IP?</p>\n\n<p>I don't want my users change their Chrome's mobile setting.</p>\n"}, {"tags": ["c#", ".net", "sockets", "tcp", "network-programming"], "comments": [{"owner": {"reputation": 381, "user_id": 1264882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e826fc5bd717b7227da8be6df27f488c?s=128&d=identicon&r=PG", "display_name": "WithMetta", "link": "https://stackoverflow.com/users/1264882/withmetta"}, "edited": false, "score": 1, "creation_date": 1504722705, "post_id": 46082011, "comment_id": 79125981, "body": "Maybe this post will help <a href=\"https://social.msdn.microsoft.com/Forums/en-US/9bce16ff-f5b2-4de7-81e4-4d4986887357/networkstream-reading-zero-bytes?forum=ncl\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/en-US/&hellip;</a>"}, {"owner": {"reputation": 85, "user_id": 4712055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jbDzu.jpg?s=128&g=1", "display_name": "Marcin Pawlica", "link": "https://stackoverflow.com/users/4712055/marcin-pawlica"}, "reply_to_user": {"reputation": 381, "user_id": 1264882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e826fc5bd717b7227da8be6df27f488c?s=128&d=identicon&r=PG", "display_name": "WithMetta", "link": "https://stackoverflow.com/users/1264882/withmetta"}, "edited": false, "score": 0, "creation_date": 1504723025, "post_id": 46082011, "comment_id": 79126150, "body": "The answer says &quot;A call to Read should only return zero bytes when the peer socket is closed&quot;, which is not true... I can make Read return 0 bytes without closing the connection, thus the question"}, {"owner": {"reputation": 381, "user_id": 1264882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e826fc5bd717b7227da8be6df27f488c?s=128&d=identicon&r=PG", "display_name": "WithMetta", "link": "https://stackoverflow.com/users/1264882/withmetta"}, "edited": false, "score": 0, "creation_date": 1504723101, "post_id": 46082011, "comment_id": 79126190, "body": "Maybe try using the do{ } while (stream.DataAvailable) in the first post instead of breaking on 0 bytes."}, {"owner": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "edited": false, "score": 0, "creation_date": 1504727775, "post_id": 46082011, "comment_id": 79128633, "body": "@MarcinPawlica - I was sure that there is some problem with the code, which you didn&#39;t show here. That&#39;s why everyone asks posters to produce an MCVE which shows the actual problem. Please take care from the next time..."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4712055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jbDzu.jpg?s=128&g=1", "display_name": "Marcin Pawlica", "link": "https://stackoverflow.com/users/4712055/marcin-pawlica"}, "edited": false, "score": 0, "creation_date": 1504725921, "post_id": 46082352, "comment_id": 79127691, "body": "Actually, the part of the MSDN docs you are quoting is... well maybe not wrong, but not clear enough. See here: <a href=\"https://social.msdn.microsoft.com/Forums/en-US/6dbd1467-6a90-43bb-abaa-df5ca5a1cd85/when-does-networkstreamread-return-zero?forum=netfxnetcom\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/en-US/&hellip;</a> Read blocks when no data is available. I will get back on this once I do some more testing..."}, {"owner": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "reply_to_user": {"reputation": 85, "user_id": 4712055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jbDzu.jpg?s=128&g=1", "display_name": "Marcin Pawlica", "link": "https://stackoverflow.com/users/4712055/marcin-pawlica"}, "edited": false, "score": 0, "creation_date": 1504802511, "post_id": 46082352, "comment_id": 79165305, "body": "@MarcinPawlica  - If this answer helped, you may like to upvote and / or accept the answer. If there is further query, please feel free to ask."}], "tags": [], "owner": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "is_accepted": false, "score": 3, "last_activity_date": 1504724451, "last_edit_date": 1504724451, "creation_date": 1504723709, "answer_id": 46082352, "question_id": 46082011, "link": "https://stackoverflow.com/questions/46082011/c-networkstream-distinguish-closed-socket-from-0-byte-array-on-read/46082352#46082352", "title": "C# NetworkStream - distinguish closed socket from 0-byte array on Read", "body": "<p>From MSDN's <a href=\"https://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.read(v=vs.110).aspx\" rel=\"nofollow noreferrer\">NetworkStream.Read Method (Byte[],\u2002Int32,\u2002Int32)</a>:</p>\n\n<blockquote>\n  <p>The Read operation reads as much data as is available, up to the\n  number of bytes specified by the size parameter. If no data is\n  available for reading, the Read method returns 0.</p>\n</blockquote>\n\n<hr>\n\n<p>While sending data, you're sending an empty byte array and writing zero bytes using:</p>\n\n<pre><code>networkStream.Write(new byte[0], 0, 0);\n</code></pre>\n\n<p>Whereas, while reading the data, you claim that </p>\n\n<blockquote>\n  <ol>\n  <li>\"My client code does expect data from the Server from time to time, so\n  it has a thread that blocks on networkStream.\"</li>\n  </ol>\n</blockquote>\n\n<pre><code>int bytesRead = networkStream.Read(buffer, 0, 4);\nif (bytesRead == 0)\n   break;\n</code></pre>\n\n<p>But, then again you're trying to read 4 bytes to a byte array, which would obviously keep on waiting. So, what else do you expect!</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>\"...just wanted to know if .NET's Socket can distinguish between an empty\n  byte array and connection closing.\"</li>\n  </ol>\n</blockquote>\n\n<p>Connection closing is totally a different story, which involves several steps before closing of a Socket connection. So, obviously, it is not the same as sending or receiving zero bytes! </p>\n\n<p>-> Lastly, as hinted by @WithMetta in the comments, please check whether the data is available to be read or not using <a href=\"https://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.dataavailable(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>NetworkStream.DataAvailable Property</code></a>.</p>\n\n<pre><code>while(networkStream.DataAvailable) { // your code logic}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4712055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jbDzu.jpg?s=128&g=1", "display_name": "Marcin Pawlica", "link": "https://stackoverflow.com/users/4712055/marcin-pawlica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2120, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1504784715, "creation_date": 1504722384, "last_edit_date": 1504784715, "question_id": 46082011, "link": "https://stackoverflow.com/questions/46082011/c-networkstream-distinguish-closed-socket-from-0-byte-array-on-read", "title": "C# NetworkStream - distinguish closed socket from 0-byte array on Read", "body": "<p>[SOLVED, the question is based on incorrect assumptions]</p>\n\n<p>While working with TCP I came across an issue with NetworkStream.Read returning value 0 in two separate cases, which I have trouble distinguishing.</p>\n\n<p>A bit of background - I have a working client-server solution communicating via TCP using length-prefixed messages. However, since most of the communication (apart from some initial messages exchange) happens from Client to Server, the Server doesn't have a good way to know whether a Client is still connected or not. One way to find this out is to send something to the Client from time to time, and that is what I decided to do.</p>\n\n<p>I know that I can add a dedicated \"ping\" message to my protocol, and simply ignore it in the Client, but I was also testing for other possibilities. One thing I tried was to send an empty byte array to the Client like so:</p>\n\n<pre><code>networkStream.Write(new byte[0], 0, 0);\n</code></pre>\n\n<p>All looks good, it seems to be sending a TCP packet with no data in it... however! My client code does expect data from the Server from time to time, so it has a thread that blocks on networkStream.Read, like so:</p>\n\n<pre><code>int bytesRead = networkStream.Read(buffer, 0, 4);\nif (bytesRead == 0)\n    break;\n</code></pre>\n\n<p>According to the docs, Socket.Read (or NetworkStream.Read) returns 0 if the other end closes the connection. This is true, but in my case, after sending the empty byte array, Read(...) also returns 0.</p>\n\n<p>So far I was unable to distinguish those two situations. Socket.Connected checked after Read is <strong>true</strong> in both cases (connection closed and the empty byte array). Is there any other way to handle this?</p>\n\n<p>Again, I do know that sending this empty array is almost the same as adding a new type of message for that purpose. I am not asking for a solution here... just wanted to know if .NET's Socket can distinguish between an empty byte array and connection closing.</p>\n\n<p>EDIT:\nI am sorry for bothering everyone with a question, that in the end was based on incorrect assumptions. My tests were not done on my production code, and were too sloppy. This caused me to draw incorrect conclusions.\nBasically, what I was testing is if I do a Write(new byte[0]...) on one end, the other end's Read(...) will return 0. It did, but not due to the send. The TcpClient I used to test was falling out of scope, which (I assume) caused it to be Disposed by GC, thus the connection got closed, which caused the Read to return 0. I did repeat the test with TcpClient not being disposed/lost, and the Read does not return anything, no matter how many empty byte arrays I send.</p>\n\n<p>At first, I expected the Nagle's algorithm to mess things up, but it doesn't in this case - 1-byte arrays arrive without delays, as I was testing on localhost. I may do a different test, using Sockets, and explicitly disabling Nagle's algorithm, but I don't think this will change anything. </p>\n\n<p>Now I just need to check whether sending such an array will actually allow me to detect a disconnection, but that is a different story, not in the scope of this question.</p>\n\n<p>EDIT 2:\nI did some more tests regarding this, and found out, that despite several suggestions, e.g. <a href=\"https://msdn.microsoft.com/en-us/library/system.net.sockets.socket.connected.aspx\" rel=\"nofollow noreferrer\">here</a> (which seems like a valid source of information), doing an empty Send does not recognize a broken connection. I physically disconnected a network cable, and my Server is doing those empty sends every 5 seconds. It's been going like that for several minutes, and no disconnection was detected. If I decide to send any data (even a single byte), the disconnection gets detected after 20 seconds at most.</p>\n"}, {"tags": ["c#", "wcf"], "comments": [{"owner": {"reputation": 3109, "user_id": 6086968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o38dO.png?s=128&g=1", "display_name": "Hameed Syed", "link": "https://stackoverflow.com/users/6086968/hameed-syed"}, "edited": false, "score": 0, "creation_date": 1504852538, "post_id": 46081978, "comment_id": 79182596, "body": "kindly post your ABC config file of wcf also."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8570647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a0e34faf47a23e970558b62f0ad932?s=128&d=identicon&r=PG&f=1", "display_name": "Ultimate_N00b", "link": "https://stackoverflow.com/users/8570647/ultimate-n00b"}, "edited": false, "score": 0, "creation_date": 1504887211, "post_id": 46110225, "comment_id": 79203849, "body": "Hi Hameed, Thanks for the suggestion, the Servicehost(typeof(ReceivingMtehods) was already part of the code."}], "tags": [], "owner": {"reputation": 3109, "user_id": 6086968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o38dO.png?s=128&g=1", "display_name": "Hameed Syed", "link": "https://stackoverflow.com/users/6086968/hameed-syed"}, "is_accepted": false, "score": 0, "last_activity_date": 1504853163, "creation_date": 1504853163, "answer_id": 46110225, "question_id": 46081978, "link": "https://stackoverflow.com/questions/46081978/c-method-in-hosting-application-turns-into-class-in-client-application/46110225#46110225", "title": "C# Method in hosting application, turns into class in client application", "body": "<pre><code>HostService client = new HostService();\n</code></pre>\n\n<p>You haven't mention what endpoint or which class object to use.Typically the servicehost class must create the object of particular end point,something like below one.</p>\n\n<pre><code>     using(System.ServiceModel.ServiceHost host = \nnew  System.ServiceModel.ServiceHost(typeof(ReceivingMethodsnamespace.ReceivingMethods )))\n           {\n              host.Open();\n              Console.WriteLine(\"Host started @ \" + DateTime.Now.ToString());\n              Console.ReadLine();\n           }\n</code></pre>\n\n<p>Generally the hostservice must create an object of the class which is implementing servicecontract  interface(servicename of AddressBindingContract file)</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 8570647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a0e34faf47a23e970558b62f0ad932?s=128&d=identicon&r=PG&f=1", "display_name": "Ultimate_N00b", "link": "https://stackoverflow.com/users/8570647/ultimate-n00b"}, "is_accepted": true, "score": 0, "last_activity_date": 1504887416, "creation_date": 1504887416, "answer_id": 46120737, "question_id": 46081978, "link": "https://stackoverflow.com/questions/46081978/c-method-in-hosting-application-turns-into-class-in-client-application/46120737#46120737", "title": "C# Method in hosting application, turns into class in client application", "body": "<p>Turns out I found the issue somewhere else.\nI configured the client service reference to \"always generate message contracts\"\nUnchecking this and updating the service reference solved the issue.</p>\n\n<p>I found the solution here.\n<a href=\"https://social.msdn.microsoft.com/Forums/en-US/b9655eeb-cdbb-4703-87d8-00deac340173/add-service-reference-creates-message-contracts-requestresponse-objects-with-always-generate?forum=wcf\" rel=\"nofollow noreferrer\">https://social.msdn.microsoft.com/Forums/en-US/b9655eeb-cdbb-4703-87d8-00deac340173/add-service-reference-creates-message-contracts-requestresponse-objects-with-always-generate?forum=wcf</a></p>\n"}], "owner": {"reputation": 23, "user_id": 8570647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a0e34faf47a23e970558b62f0ad932?s=128&d=identicon&r=PG&f=1", "display_name": "Ultimate_N00b", "link": "https://stackoverflow.com/users/8570647/ultimate-n00b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 46120737, "answer_count": 2, "score": 2, "last_activity_date": 1504887416, "creation_date": 1504722287, "question_id": 46081978, "link": "https://stackoverflow.com/questions/46081978/c-method-in-hosting-application-turns-into-class-in-client-application", "title": "C# Method in hosting application, turns into class in client application", "body": "<p>I've been trying to create an application that can receive information from other running applications through WCF.\nI've setup a void method in a separate class, created the interface, and hosted the service.</p>\n\n<p>In my Host application I have the following method.</p>\n\n<pre><code>public Class ReceivingMethods : IReceivingMethods\n{\n    Public void HelloWorld(string text)\n    {\n       MessageBox.Show(text);\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>[ServiceContract]\ninterface iReceivingMethods\n{\n   [OperationContract]\n   void HelloWorld(string text);\n}\n</code></pre>\n\n<p>In the client, I would like to do this:</p>\n\n<pre><code>HostService client = new HostService();\nclient.HelloWorld(\"Hello World\");\nclient.close();\n</code></pre>\n\n<p>But it doesn't work and instead I have to do this.</p>\n\n<pre><code>HostService client = new HostService();\nHelloWorld hi = new HelloWorld();\nhi.text = \"Hello World\";\nclient.HelloWorld(hi);\nclient.close();\n</code></pre>\n\n<p>I've gotten it to work as the former previously in an Application/ASP combination, but not on this application and I cannot find any difference in the setup between the two applications.</p>\n\n<p>Can anybody tell me what is required from the WCF setup to get it to work as the former?</p>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 17, "user_id": 8570652, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1eeb965b5a99b00817ee020eff1614d3?s=128&d=identicon&r=PG&f=1", "display_name": "Jonatan Malm", "link": "https://stackoverflow.com/users/8570652/jonatan-malm"}, "edited": false, "score": 0, "creation_date": 1504722011, "post_id": 46081898, "comment_id": 79125630, "body": "The problem seems to occur since i have to have the button click in the forms app and the textboxes are imported through the toolbox, any suggestions?  this is what my book says is the answer so i&#39;m a bit confused, thanks for helping out!"}, {"owner": {"reputation": 4114, "user_id": 2957232, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/XicNR.jpg?s=128&g=1", "display_name": "Broots Waymb", "link": "https://stackoverflow.com/users/2957232/broots-waymb"}, "edited": false, "score": 0, "creation_date": 1504722089, "post_id": 46081898, "comment_id": 79125681, "body": "Where is myLogin declared/initialized? I would assume it&#39;s done in a designer file outside of Form1&#39;s... but I can&#39;t say with 100% certainty."}, {"owner": {"reputation": 2981, "user_id": 1854345, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FeQ4p.jpg?s=128&g=1", "display_name": "TrevorBrooks", "link": "https://stackoverflow.com/users/1854345/trevorbrooks"}, "edited": false, "score": 0, "creation_date": 1504724239, "post_id": 46081898, "comment_id": 79126814, "body": "myLogin is referencing the UserControl which has been dragged onto the form in the designer surface, see my answer below."}, {"owner": {"reputation": 1196, "user_id": 183068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dbe193e72dd6ef2665ed1bde1098e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob G", "link": "https://stackoverflow.com/users/183068/bob-g"}, "edited": false, "score": 0, "creation_date": 1504725187, "post_id": 46081898, "comment_id": 79127312, "body": "Did you actually rename the user control that you added to be named myLogin on the designer where you dragged it?  It&#39;s in the properties for the user control specifically.  And are you sure you dragged the control onto Form1?  Does it show visually?"}], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 5424900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa91719298b1dacfe7edf476aeddb5cc?s=128&d=identicon&r=PG&f=1", "display_name": "Mitrucho", "link": "https://stackoverflow.com/users/5424900/mitrucho"}, "edited": false, "score": 2, "creation_date": 1504722202, "post_id": 46081947, "comment_id": 79125746, "body": "But this class is not static. There should be an instance created in designer I assume since this is Windows Forms application."}, {"owner": {"reputation": 2981, "user_id": 1854345, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FeQ4p.jpg?s=128&g=1", "display_name": "TrevorBrooks", "link": "https://stackoverflow.com/users/1854345/trevorbrooks"}, "reply_to_user": {"reputation": 106, "user_id": 5424900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa91719298b1dacfe7edf476aeddb5cc?s=128&d=identicon&r=PG&f=1", "display_name": "Mitrucho", "link": "https://stackoverflow.com/users/5424900/mitrucho"}, "edited": false, "score": 0, "creation_date": 1504722295, "post_id": 46081947, "comment_id": 79125789, "body": "I&#39;m assuming he has an instance of the user control on the form"}, {"owner": {"reputation": 2981, "user_id": 1854345, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FeQ4p.jpg?s=128&g=1", "display_name": "TrevorBrooks", "link": "https://stackoverflow.com/users/1854345/trevorbrooks"}, "reply_to_user": {"reputation": 106, "user_id": 5424900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa91719298b1dacfe7edf476aeddb5cc?s=128&d=identicon&r=PG&f=1", "display_name": "Mitrucho", "link": "https://stackoverflow.com/users/5424900/mitrucho"}, "edited": false, "score": 0, "creation_date": 1504723862, "post_id": 46081947, "comment_id": 79126600, "body": "if you have downvoted my answer, please reconsider with my updated answer."}, {"owner": {"reputation": 1196, "user_id": 183068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dbe193e72dd6ef2665ed1bde1098e2b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob G", "link": "https://stackoverflow.com/users/183068/bob-g"}, "edited": false, "score": 0, "creation_date": 1504725222, "post_id": 46081947, "comment_id": 79127325, "body": "I reconsidered.  And I still don&#39;t think it&#39;s an answer."}, {"owner": {"reputation": 2981, "user_id": 1854345, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FeQ4p.jpg?s=128&g=1", "display_name": "TrevorBrooks", "link": "https://stackoverflow.com/users/1854345/trevorbrooks"}, "edited": false, "score": 0, "creation_date": 1504740108, "post_id": 46081947, "comment_id": 79133351, "body": "I think it&#39;s a great answer, but I&#39;m waiting to see yours because I want to learn from you how you would answer the question differently."}, {"owner": {"reputation": 2981, "user_id": 1854345, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FeQ4p.jpg?s=128&g=1", "display_name": "TrevorBrooks", "link": "https://stackoverflow.com/users/1854345/trevorbrooks"}, "edited": false, "score": 0, "creation_date": 1504751972, "post_id": 46081947, "comment_id": 79136048, "body": "Thank you for accepting my answer.  Feel free to upvote it as I feel it was wrongly downvoted."}, {"owner": {"reputation": 4114, "user_id": 2957232, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/XicNR.jpg?s=128&g=1", "display_name": "Broots Waymb", "link": "https://stackoverflow.com/users/2957232/broots-waymb"}, "edited": false, "score": 1, "creation_date": 1504794425, "post_id": 46081947, "comment_id": 79159907, "body": "Undownvoted. But honestly, probably would have been better to delete and re-answer. I just happened to check back, but I&#39;d doubt most downvoters will as well. And it&#39;s basically an entirely different answer from the old one."}, {"owner": {"reputation": 2981, "user_id": 1854345, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FeQ4p.jpg?s=128&g=1", "display_name": "TrevorBrooks", "link": "https://stackoverflow.com/users/1854345/trevorbrooks"}, "edited": false, "score": 0, "creation_date": 1504796564, "post_id": 46081947, "comment_id": 79161548, "body": "It really only expands on my original answer, and thank you for undownvoting!"}], "tags": [], "owner": {"reputation": 2981, "user_id": 1854345, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/FeQ4p.jpg?s=128&g=1", "display_name": "TrevorBrooks", "link": "https://stackoverflow.com/users/1854345/trevorbrooks"}, "is_accepted": true, "score": -2, "last_activity_date": 1504727154, "last_edit_date": 1504727154, "creation_date": 1504722132, "answer_id": 46081947, "question_id": 46081898, "link": "https://stackoverflow.com/questions/46081898/how-can-i-fix-the-mylogin-does-not-exist-in-the-current-content/46081947#46081947", "title": "How can i fix the &#39;myLogin&#39; does not exist in the current content?", "body": "<p>First, comment out the myLogin.Login code (where your code has the red squigglies).</p>\n\n<p>Next, build (compile) the project successfully.  The LoginPasswordUserControl will then be added to your Toolbox.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PEUEK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PEUEK.png\" alt=\"enter image description here\"></a></p>\n\n<p>Next, drag the LoginPasswordUserControl to your Form's design surface from the Toolbox.  It will be created as loginPasswordUserControl1.</p>\n\n<p>You can change the name of your newly instantiated UserControl by right-clicking on it in the designer, select properties, and change the name.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0l7LI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0l7LI.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/2ByWd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2ByWd.png\" alt=\"enter image description here\"></a></p>\n\n<p>That worked for me.</p>\n"}], "owner": {"reputation": 17, "user_id": 8570652, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1eeb965b5a99b00817ee020eff1614d3?s=128&d=identicon&r=PG&f=1", "display_name": "Jonatan Malm", "link": "https://stackoverflow.com/users/8570652/jonatan-malm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 46081947, "answer_count": 1, "score": 1, "last_activity_date": 1504741123, "creation_date": 1504721909, "last_edit_date": 1504722030, "question_id": 46081898, "link": "https://stackoverflow.com/questions/46081898/how-can-i-fix-the-mylogin-does-not-exist-in-the-current-content", "title": "How can i fix the &#39;myLogin&#39; does not exist in the current content?", "body": "<p>I have been doing a exerscise from my c# course and i don't get it to work, here is the actual assignment:</p>\n\n<p>Create a user control named \"LoginPasswordUserControl\". The \"LoginPasswordUserControl\"\ncontains a label (loginLabel) that displays string \"Login: \", a textbox (loginTextBox) where \nthe user inputs a login name, a label (passwordLabel) that displays the string \"Password:\", \nand finally, a Textbox (passwordTextBox) where a user inputs a password (do not forget to set\nproperty Passwordchar to \"*\" in the TextBox's Properties window). </p>\n\n<p>LoginPasswordUserControl must provide Public read-only properties \nLogin and Password that allow an application to retrieve the user input \nfrom loginTextBox and passwordTextBox. </p>\n\n<p>Here is the LoginPasswordUserControl code:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.ComponentModel;\nusing System.Drawing;\nusing System.Data;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\nusing System.Windows.Forms;\n\nnamespace LoginApp\n{\n    public partial class LoginPasswordUserControl : UserControl\n    {\n        public LoginPasswordUserControl()\n        {\n            InitializeComponent();\n        }\n\n        public string Login\n        {\n            get\n            {\n                return loginTextBox.Text;\n            }\n        }\n        public string Password\n        {\n            get\n            {\n                return passwordTextBox.Text;\n            }\n        }\n    }\n }\n</code></pre>\n\n<p>And here is the code for the application wich is where im getting the error message:\nThe name 'myLogin' does not exist in the current content</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\nusing System.ComponentModel;\nusing System.Data;\nusing System.Drawing;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\nusing System.Windows.Forms;\n\nnamespace UserControlTest\n{\npublic partial class Form1 : Form\n{\n    public Form1()\n    {\n        InitializeComponent();\n    }\n\n    private void OK_btn_Click(object sender, EventArgs e)\n    {\n\n        if (myLogin.Login != \"\" &amp;&amp; myLogin.Password != \"\")\n\n        {\n\n            displayLabel.Text = \"The information entered is:\";\n\n            loginLabel.Text =\n            \"Login: \" + myLogin.Login;\n\n            passwordLabel.Text =\n            \"Password: \" + myLogin.Password;\n\n        } \n        else\n\n            displayLabel.Text = \"Enter information above\";\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c#", "wpf", "mvvm", "mvvm-light", "service-locator"], "comments": [{"owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "edited": false, "score": 1, "creation_date": 1504723845, "post_id": 46081883, "comment_id": 79126591, "body": "Loaded is raised when the control is loaded; changing the DataContext is different. I would imagine it&#39;s not resizing when you replace the DataContext. DataContextChanged is the event you care about. However, in WPF, the &quot;correct&quot; way to do the sort of stuff you&#39;re doing here is declaratively in XAML with styles and triggers and so on, rather than in code behind. WPF is extraordinarily recalcitrant when you don&#39;t do things the way it wants you to. It&#39;s like giving a pill to a feral cat sometimes."}, {"owner": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 1, "creation_date": 1504723916, "post_id": 46081883, "comment_id": 79126632, "body": "That&#39;s normal behaviour, since, in your ServiceLocator, you&#39;re holding one Instance of your UserControl, which is loaded just once, if you want to show that control second time, there is no need for load it again, so event with OnLoaded won&#39;t fire."}, {"owner": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504724101, "post_id": 46081883, "comment_id": 79126729, "body": "Just tell us what exactly you want to do, I&#39;m sure you can do this without code-behind hacks to fire your code-behind events"}, {"owner": {"reputation": 2080, "user_id": 242029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0af6ec0e2b09283faefe2ed892d44f?s=128&d=identicon&r=PG", "display_name": "nixkuroi", "link": "https://stackoverflow.com/users/242029/nixkuroi"}, "edited": false, "score": 0, "creation_date": 1504724665, "post_id": 46081883, "comment_id": 79127039, "body": "The issue is that when it&#39;s reloaded, it&#39;s dumped the Observer.  I rely on the observer to initialize values (like actual height, which is not available for binding directly to the viewmodel) in the viewmodel, which in turn turns on visibility for things like pager controls (which display as fully opaque, and transparent depending on the scroll position and height).  The observer triggers on a size changed or load event, but those don&#39;t fire when you&#39;re re-rendering the same control."}, {"owner": {"reputation": 2080, "user_id": 242029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0af6ec0e2b09283faefe2ed892d44f?s=128&d=identicon&r=PG", "display_name": "nixkuroi", "link": "https://stackoverflow.com/users/242029/nixkuroi"}, "edited": false, "score": 0, "creation_date": 1504724755, "post_id": 46081883, "comment_id": 79127085, "body": "Actually, I just figured it out.  I can just add DataContext to the observer and key off the DataContextChanged event in addition to sizechanged.  This centralizes the event code back in the observer where it&#39;s meant to be.  -- Thanks to everyone who responded."}, {"owner": {"reputation": 2080, "user_id": 242029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0af6ec0e2b09283faefe2ed892d44f?s=128&d=identicon&r=PG", "display_name": "nixkuroi", "link": "https://stackoverflow.com/users/242029/nixkuroi"}, "reply_to_user": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504725760, "post_id": 46081883, "comment_id": 79127593, "body": "@sTrenat - out of curiosity,  is there a way to override that behavior and force the re-render every time?"}, {"owner": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504725986, "post_id": 46081883, "comment_id": 79127722, "body": "@nixkuroi Try this: this.stageViewModel.ActiveStageViewModel = Util.GetInstanceFromDI&lt;MyViewModel&gt;(System.Guid.NewGuid().To&zwnj;&#8203;String())    I&#39;m not sure how is your ServiceLocator looks"}, {"owner": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504726566, "post_id": 46081883, "comment_id": 79128002, "body": "But remember to unregister your ViewModel on closing, I think that there is some way in your Framework, i don&#39;t know Mvvm light well."}, {"owner": {"reputation": 2080, "user_id": 242029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0af6ec0e2b09283faefe2ed892d44f?s=128&d=identicon&r=PG", "display_name": "nixkuroi", "link": "https://stackoverflow.com/users/242029/nixkuroi"}, "reply_to_user": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504726764, "post_id": 46081883, "comment_id": 79128110, "body": "@sTrenat Didn&#39;t work, but I suspect it&#39;s because I have to register that key ahead of time in order to get it back.  I appreciate the suggestion, and I&#39;ll keep it in my back pocket if I refactor my navigation scheme."}], "owner": {"reputation": 2080, "user_id": 242029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0af6ec0e2b09283faefe2ed892d44f?s=128&d=identicon&r=PG", "display_name": "nixkuroi", "link": "https://stackoverflow.com/users/242029/nixkuroi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504721865, "creation_date": 1504721865, "question_id": 46081883, "link": "https://stackoverflow.com/questions/46081883/wpf-mvvm-light-unity-events-dont-fire-when-reloading-current-usercontrol", "title": "WPF - MVVM Light - Unity - Events don&#39;t fire when reloading current usercontrol", "body": "<p>I have an interesting problem with events not firing when a view is replaced with itself.  </p>\n\n<p>First, the setup:  I'm creating the connection between the ViewModel and the View inside the App.xaml resource dictionary:</p>\n\n<pre><code> &lt;DataTemplate DataType=\"{x:Type vm:MyViewModel}\"&gt;\n     &lt;v:MyView /&gt;\n &lt;/DataTemplate&gt;\n</code></pre>\n\n<p>I have an application stage where I create my instance using ServiceLocator:</p>\n\n<pre><code>this.stageViewModel.ActiveStageViewModel = Util.GetInstanceFromDI&lt;MyViewModel&gt;();\n</code></pre>\n\n<p>And inside my stage, I use a content control bound to the ActiveStageViewModel to pull it all together:</p>\n\n<pre><code>&lt;ContentControl Content=\"{Binding ActiveStageViewModel}\" Margin=\"0\" /&gt;\n</code></pre>\n\n<p>All this works great, and when I navigate to MyViewModel, the correct view shows up and looks fine. All of the load and resize events fire normally.  </p>\n\n<p>HOWEVER, if I try to navigate to the MyViewModel a second time, none of the events fire, except DataContextChanged. </p>\n\n<p>I use an Observer to monitor size changed events so that I can decide on some styling and scrolling options, so I need for the load events to fire on the second load in order to refresh the values in my observer.  In any case, not firing the events on a duplicate view load seems like a performance feature that is interfering rather than helping.</p>\n\n<p>What it APPEARS to be doing is making a comparison between what is rendered and what will be rendered, and simply not firing the events if the rendering isn't changed. </p>\n\n<p>I have tried a few things to force the updates, with little success, or a success which kind of breaks the MVVM approach I'm going for.  </p>\n\n<p>The first thing I tried was nulling out the ActiveStageViewModel before resetting the instance.  That doesn't work at all.  My guess is that because it never renders anything, it never drops the cached View. </p>\n\n<p>The second thing I tried was forcing an FrameworkElement.InvalidateMeasure(), FrameworkElement.InvalidateArrange() and FrameworkElement.InvalidateVisual() when the DataContextChanged event fires.  This doesn't work by itself, presumably because the Cached View comparison still happens.</p>\n\n<p>Finally, what worked (but sucks), is attaching a DataContextChanged event to the View, and then setting the height on the element inside the event handler.</p>\n\n<pre><code>&lt;DataTemplate DataType=\"{x:Type vm:MyViewModel}\"&gt;\n    &lt;v:MyView DataContextChanged=\"FrameworkElement_DataContextChanged\" /&gt;\n&lt;/DataTemplate&gt;\n\n\n\n\nprivate void FrameworkElement_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)\n{\n    DispatcherTimer timer = new DispatcherTimer() { Interval = TimeSpan.FromMilliseconds(10) };\n    var el = (FrameworkElement)sender;\n    bool addOperation = false;\n    double height = el.ActualHeight;\n    timer.Tick += (s,ev) =&gt;\n    {\n        el.Height = addOperation ? height + .001 : height - .001;\n        addOperation = !addOperation;\n        if (!addOperation)\n        {\n            timer.Stop();\n        }\n    };\n\n    timer.Start();\n}\n</code></pre>\n\n<p>This works because I'm effectively forcing a layout change inside the DataContextChanged event (twice, in 20 milliseconds, so it's not observable to the user), which <em>apparently</em> invalidates whatever view cache comparison that's going on.  Obviously, adding an eventhandler inside the View/View Model declaration doesn't conform to MVVM's loose coupling scheme.  Sure, it's at the application setup, but still seems awful.  </p>\n\n<p>Does anyone have any experience with this phenomenon, and a way to force re-rendering without such a brute force hack?</p>\n"}, {"tags": ["c#", "jquery", "asp.net", "asp.net-mvc-5"], "comments": [{"owner": {"reputation": 39660, "user_id": 3880585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8pfp3.png?s=128&g=1", "display_name": "gaetanoM", "link": "https://stackoverflow.com/users/3880585/gaetanom"}, "edited": false, "score": 1, "creation_date": 1504721930, "post_id": 46081855, "comment_id": 79125586, "body": "Te data in ajax must be an object:  {productId:  Your val}"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5900485"}, "reply_to_user": {"reputation": 39660, "user_id": 3880585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8pfp3.png?s=128&g=1", "display_name": "gaetanoM", "link": "https://stackoverflow.com/users/3880585/gaetanom"}, "edited": false, "score": 1, "creation_date": 1504722450, "post_id": 46081855, "comment_id": 79125856, "body": "I had to create a DTO and then do what you said, but yes this is the solution ! If you want, post it in order for me to accept it."}, {"owner": {"reputation": 30146, "user_id": 413670, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2e1ff5dd2420dffaf6087a729790f4ec?s=128&d=identicon&r=PG&f=1", "display_name": "Rafay", "link": "https://stackoverflow.com/users/413670/rafay"}, "edited": false, "score": 0, "creation_date": 1504737840, "post_id": 46081855, "comment_id": 79132778, "body": "shouldn&#39;t it be <code>&#47;api&#47;addtocart</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5900485"}, "edited": false, "score": 0, "creation_date": 1504766633, "post_id": 46081855, "comment_id": 79140626, "body": "No. If you send a request to <code>&#47;api&#47;addtocart</code>, then, asp.net mvc will try to find a controller with the name <code>addtocart</code> on the api folder. But here, i needed to send a request to a controller called <code>Cart</code> inside the api  folder, so the request should be sent in <code>&#47;api&#47;cart</code>. Then, the appropriate action will handle it accordingly."}, {"owner": {"reputation": 421, "user_id": 7347548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2d3ca59ba3af015f001193bc70657cd?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Zeinali", "link": "https://stackoverflow.com/users/7347548/ali-zeinali"}, "edited": false, "score": 0, "creation_date": 1504894378, "post_id": 46081855, "comment_id": 79207216, "body": "have you tried this <code>api&#47;cart</code> not <code>&#47;api&#47;cart</code>?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5900485"}, "edited": false, "score": 0, "creation_date": 1505673753, "post_id": 46178599, "comment_id": 79497776, "body": "This wasn&#39;t the problem in my case, but since you are giving nice solutions for this type of problems... and @gaetanoM hasn&#39;t posted his solution, i am accepting yours :)"}], "tags": [], "owner": {"reputation": 69, "user_id": 3019909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085d1bf3b185daaa52f673298baeeddf?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousRK", "link": "https://stackoverflow.com/users/3019909/curiousrk"}, "is_accepted": true, "score": 0, "last_activity_date": 1505225199, "creation_date": 1505225199, "answer_id": 46178599, "question_id": 46081855, "link": "https://stackoverflow.com/questions/46081855/404-error-when-send-request-to-web-api-controller/46178599#46178599", "title": "404 error when send request to web api controller", "body": "<p>I know you talked about changing route config but as i dont know specifics\nhave you tried mapping to action  as well like</p>\n\n<p>config.Routes.MapHttpRoute(\n                name: \"DefaultApi\",\n                routeTemplate: \"api/{controller}/{action}/{id}\",\n                defaults: new { id = RouteParameter.Optional }\n            );</p>\n\n<p>and then in ur ajax call</p>\n\n<pre><code>     $.ajax({\n                url: \"api/Cart/AddToCart\",\n                type: \"POST\",\n                contentType: \"application/json\",\n                data: JSON.stringify($(this).next().val())\n            }).done(function() {\n                alert(\"Product succesfully added to cart!\");\n            });\n</code></pre>\n\n<p>also if you would like to send productid there is one another way where you can assign that value to data-rowId attribute of button like </p>\n\n<p>HTML Code</p>\n\n<p>button type=\"button\" value=\"Add to cart\" data-RowId=\"@item.productID\"</p>\n\n<p>and in ur jquery get that value as</p>\n\n<p>var productID = $(this).attr('data-RowId');</p>\n\n<p>and pass it as \n  data: {productId : productID }</p>\n\n<p>Assuming you have a item object and it has ProductID</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5900485"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "accepted_answer_id": 46178599, "answer_count": 1, "score": 0, "last_activity_date": 1505225199, "creation_date": 1504721746, "question_id": 46081855, "link": "https://stackoverflow.com/questions/46081855/404-error-when-send-request-to-web-api-controller", "title": "404 error when send request to web api controller", "body": "<p><strong>The Problem</strong></p>\n\n<p>I am creating a ASP.NET MVC web site and as the title say i am trying to send a POST request to a Web Api controller with jquery, but am always receiving a 404 error. The crazy thing is that in the .NET framework 4.5 the exact  same thing worked, but in the .NET framework 4.6.2 it really doesn't. I have found a lot of threads in google explaining what it might go wrong, but none of these worked. So, here is my code now:</p>\n\n<p>My Web Api controller:</p>\n\n<pre><code>[Authorize]\npublic class CartController : ApiController\n{\n    private ApplicationDbContext _context;\n\n    public CartController()\n    {\n        _context = new ApplicationDbContext();\n    }\n\n    [HttpPost]\n    public IHttpActionResult AddToCart(string productId)\n    {\n        if (!ModelState.IsValid || !ItemIsValid(productId))\n            return BadRequest();\n\n        var newCartItem = new ShoppingCartItem\n        {\n            ProductId = productId,\n            UserId = User.Identity.GetUserId()\n        };\n\n        _context.ShoppingCartItems.Add(newCartItem);\n        _context.SaveChanges();\n\n        return Ok();\n    }\n\n    private bool ItemIsValid(string productId)\n    {\n        return Enumerable.Any(_context.Products, contextproduct =&gt; contextproduct.Id.ToString() == productId &amp;&amp; contextproduct.NumberAvailable &gt; 0);\n    }\n}\n</code></pre>\n\n<p>My jQuery code:</p>\n\n<pre><code>$(\".buy-button\").click(function() {\n            if (@User.Identity.IsAuthenticated.ToString().ToLower() === true) {\n                $.ajax({\n                    url: \"/api/cart\",\n                    method: \"POST\",\n                    data: $(this).next().val()\n                }).done(function() {\n                    alert(\"Product succesfully added to cart!\");\n                });\n            } else {\n                window.location.href = \"@Url.Action(\"Login\", \"Account\")\";\n            }\n        });\n</code></pre>\n\n<p>My Global.asax code:</p>\n\n<pre><code>        AreaRegistration.RegisterAllAreas();\n        GlobalConfiguration.Configure(WebApiConfig.Register);\n        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);\n        RouteConfig.RegisterRoutes(RouteTable.Routes);\n        BundleConfig.RegisterBundles(BundleTable.Bundles);\n</code></pre>\n\n<p><strong>What i have tried</strong></p>\n\n<p>1) Some threads said that the order of the \"calls\" in the Global.asax matters, so i changed the position of <code>RouteConfig.RegisterRoutes(RouteTable.Routes)</code>\nin every possible way.</p>\n\n<p>2) Added Route Attributes in my Web Api action([Route(\"api/Cart/AddToCart\")]) which i know from experience that is redundant and changed my jQuery code accordingly. </p>\n\n<p>3) Instead of adding attributes, i added the Routes directly to the Web Api Config.</p>\n\n<p>4) I also tried to call the Api with <code>Postman</code> directly(i removed the Authorize attribute of course from the Web Api controller first).</p>\n\n<p>Any help on this problem is appreciated. Thanks.</p>\n"}, {"tags": ["c#", "asp.net-core", "domain-driven-design", "automapper", "repository-pattern"], "comments": [{"owner": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "edited": false, "score": 0, "creation_date": 1504722590, "post_id": 46081580, "comment_id": 79125935, "body": "As I understand aggregate1, aggregate2 and aggregate3 should be a different objects, otherwise it does not have a sence to query the same object from different repositories. Could you please provide more details?"}, {"owner": {"reputation": 996, "user_id": 2303347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aba6fa8a1813d5d7abe830aa9e87517f?s=128&d=identicon&r=PG", "display_name": "LayfieldK", "link": "https://stackoverflow.com/users/2303347/layfieldk"}, "reply_to_user": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "edited": false, "score": 0, "creation_date": 1504722762, "post_id": 46081580, "comment_id": 79126011, "body": "Yes aggregate1, aggregate2, and aggregate3 would be entirely different types of objects.  They are each separate aggregate roots.  FirstService and SecondService would essentially do some sort of work that involves multiple aggregate roots (for example, FirstService does work that involves an instance of both Aggregate1 and Aggregate2), which is why the work is done in a domain service rather than in the aggregate roots themselves."}, {"owner": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "edited": false, "score": 0, "creation_date": 1504722949, "post_id": 46081580, "comment_id": 79126104, "body": "In this case I do not see 3 copies of aggregate1"}, {"owner": {"reputation": 996, "user_id": 2303347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aba6fa8a1813d5d7abe830aa9e87517f?s=128&d=identicon&r=PG", "display_name": "LayfieldK", "link": "https://stackoverflow.com/users/2303347/layfieldk"}, "reply_to_user": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "edited": false, "score": 0, "creation_date": 1504724121, "post_id": 46081580, "comment_id": 79126741, "body": "@Valerii Ok, I updated the original post with more code to try to explain where all three copies of aggregate1 are created"}, {"owner": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "edited": false, "score": 0, "creation_date": 1504727468, "post_id": 46081580, "comment_id": 79128451, "body": "Now I see 3 copies. Why don&#39;t pass agregate1 and agregate2 into DoWork instead of Id&#39;s. In this case you will not have to look for this entities. What is the responsibility of FirstService and SecondService?"}, {"owner": {"reputation": 996, "user_id": 2303347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aba6fa8a1813d5d7abe830aa9e87517f?s=128&d=identicon&r=PG", "display_name": "LayfieldK", "link": "https://stackoverflow.com/users/2303347/layfieldk"}, "reply_to_user": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "edited": false, "score": 0, "creation_date": 1504728916, "post_id": 46081580, "comment_id": 79129191, "body": "These services would do something like update a value inside of aggregate1 based on some values in aggregate 2 or 3.  For example, FirstService might set aggregate1.CountOfSomething equal to itself + aggregate2.CountChange.  I know that this example is too far abstracted at this point, but the idea is that these would be two separate aggregate roots that need some calculations done between them, so the calculation is handled in a domain service."}, {"owner": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "edited": false, "score": 0, "creation_date": 1504730612, "post_id": 46081580, "comment_id": 79130051, "body": "In this case maybe it would have a sense to separate calculation and update. I think if your services would do only calculation it will allow to handle updates in code inside &quot;using&quot; block."}], "answers": [{"comments": [{"owner": {"reputation": 996, "user_id": 2303347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aba6fa8a1813d5d7abe830aa9e87517f?s=128&d=identicon&r=PG", "display_name": "LayfieldK", "link": "https://stackoverflow.com/users/2303347/layfieldk"}, "edited": false, "score": 0, "creation_date": 1504728317, "post_id": 46083294, "comment_id": 79128888, "body": "Thanks Tseng, this helps clear up some confusion for me.  I like the simplicity of using the domain model as a persistence model, but I found many articles online saying not to do that.  I still don&#39;t know much about using domain events, so I&#39;ll look into that some more.  However, maybe using the domain model as the persistence model wouldn&#39;t be that bad in my case since it&#39;s a one-man project."}, {"owner": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "reply_to_user": {"reputation": 996, "user_id": 2303347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aba6fa8a1813d5d7abe830aa9e87517f?s=128&d=identicon&r=PG", "display_name": "LayfieldK", "link": "https://stackoverflow.com/users/2303347/layfieldk"}, "edited": false, "score": 1, "creation_date": 1504728705, "post_id": 46083294, "comment_id": 79129092, "body": "Many discourage of directly using domain model as entity/persistence model, because ORM specifics leak into your domain (i.e. requiring a protected parameterless constructor, private setters or &quot;primary key&quot; fields on your entities (i.e. having an <code>id</code>field on an <code>OrderLine</code>. From DDD PoV, <code>Id</code> on it is useless, but for ORM you need it if you use RDBMS, but non-existent if you use document database). Domain events are not the same as event sourcing events. Domain events allow logic to be applied on the entity on an event. Event sourcing is a history of applied changes to the aggregate model"}, {"owner": {"reputation": 996, "user_id": 2303347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aba6fa8a1813d5d7abe830aa9e87517f?s=128&d=identicon&r=PG", "display_name": "LayfieldK", "link": "https://stackoverflow.com/users/2303347/layfieldk"}, "edited": false, "score": 0, "creation_date": 1504729005, "post_id": 46083294, "comment_id": 79129236, "body": "Thank you for the correction, saved me a headache later on when I go to research it!"}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1533895124, "post_id": 46083294, "comment_id": 90524855, "body": "I think having &quot;Id&quot; in a domain model is fine compared to adding an additional layer to maintain. You can always make it <code>private</code>, but still, you probably will need that Id in your UI. So how will you map your domain model to your view model without having an <code>Id</code> on it?"}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1533895195, "post_id": 46083294, "comment_id": 90524903, "body": "In the worst case, you would end up with at least 3 model layers to maintain: UI models(DTO/ViewModels/Request,response models), domain models and persistence models. And the mapping code that goes after it..."}, {"owner": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "reply_to_user": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1533902483, "post_id": 46083294, "comment_id": 90529097, "body": "@Konrad: Only if you don&#39;t understand the consequences or decide to ignore these. you may have an &quot;orderPositionId&quot; which is an unique (auto-increment) field. But if you ever decide to move to lets say a document database, there is no such and, since is not necessary within document databases. Or if you decide to use a plain xml file to store instead of a database.this field only exists because the persistent storage requires it. If you have that in your code and use it, then move, you are in trouble since you have to change a lot of your domain code because persistance changed"}, {"owner": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "edited": false, "score": 0, "creation_date": 1533902667, "post_id": 46083294, "comment_id": 90529204, "body": "And this misses the point of using DDD in the first place. You essentially trade faster development time vs maintenance nightmare later on and all you reach with it that your technical debt grows. Ideally one uses CQRS and event sourcing, then all the object-relational impedance mismatch is a non-issue in the first place, because your domain entities then get their state by replaying events"}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1533902908, "post_id": 46083294, "comment_id": 90529356, "body": "@Tseng but there always need to be something that uniquely identifies your domain model, so you can pass that down to the underlying database."}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1533902979, "post_id": 46083294, "comment_id": 90529404, "body": "because let&#39;s say you have <code>OrderItem</code> if you won&#39;t put some <code>Id</code> in your domain model how will you refer to that order item? how will it communicate with the persistence layer?"}, {"owner": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "reply_to_user": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1533912103, "post_id": 46083294, "comment_id": 90535075, "body": "@Konrad: That&#39;s a concern of the persistence layer. It has to decide how to handle it. When its a document db, you don&#39;t even have to worry, since only the document has references (which can be the order number rather than some auto increment id). For relational DBs, the ORM can do the work and handling the ID transparently (i.e. in EF Core you could define an entity whose relation database key is a shadow property, which is not defined on the model itself and its relationship is referenced though the parent entity)."}, {"owner": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "edited": false, "score": 0, "creation_date": 1533912260, "post_id": 46083294, "comment_id": 90535178, "body": "The moment you start to add database specific into your domain, you have lost the race and your persistence (=infrastructure) leaks into your domain and your domain has dependency on external system which is something you want to avoid in DDD. Only other layers can have dependency on the domain layer and domain layer shouldn&#39;t/must not have dependencies on infrastructure. Its not easy for DDD beginners to understand that and they just walk into that trap. Like I said, using CQRS+ES and you don&#39;t need any db specific properties. But CQRS+ES adds additional complexity"}, {"owner": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "reply_to_user": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1533912301, "post_id": 46083294, "comment_id": 90535202, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/177815/discussion-between-tseng-and-konrad\">continue this discussion in chat</a>."}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1534000434, "post_id": 46083294, "comment_id": 90558416, "body": "@Tseng <a href=\"https://softwareengineering.stackexchange.com/questions/235254/id-properties-on-domain-objects-in-ddd\" title=\"id properties on domain objects in ddd\">softwareengineering.stackexchange.com/questions/235254/&hellip;</a>"}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1534000479, "post_id": 46083294, "comment_id": 90558427, "body": "&quot;When a relational DB is used, not adding a technical Id will lead to the usage of domain keys as foreign keys. So in this case, every table referencing the Account table will store a duplicate of the &quot;sort number&quot; and the &quot;account number&quot;. Now imagine what will happen if some domain requirements change (like local country bank account numbers to be replaced by IBAN, as its currently happening in Europe).&quot;"}], "tags": [], "owner": {"reputation": 51674, "user_id": 455493, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ub5uS.jpg?s=128&g=1", "display_name": "Tseng", "link": "https://stackoverflow.com/users/455493/tseng"}, "is_accepted": true, "score": 9, "last_activity_date": 1504728107, "last_edit_date": 1504728107, "creation_date": 1504727417, "answer_id": 46083294, "question_id": 46081580, "link": "https://stackoverflow.com/questions/46081580/using-ddd-and-automapper-how-do-you-do-work-on-the-same-aggregate-root-in-multi/46083294#46083294", "title": "Using DDD and AutoMapper, how do you do work on the same aggregate root in multiple services within a single unit of work?", "body": "<p>First off, your problem isn't really related to DDD. It's just a typical ORM/AutoMapper issue. </p>\n\n<p>You should <strong>NEVER</strong> use AutoMapper to map <strong>TO</strong> an persistence model or a domain model, this will <strong>almost never</strong> work.</p>\n\n<p>The reasons for this lies, that most/many ORMs will track entities and their changes via references (i.e. EntityFramework). So if you use automapper and get new instances, you break the way ORM works and run into such problems. </p>\n\n<p>This may be an interesting read for you: <a href=\"https://rogerjohansson.blog/2013/12/01/why-mapping-dtos-to-entities-using-automapper-and-entityframework-is-horrible/\" rel=\"noreferrer\">Why mapping DTOs to Entities using AutoMapper and EntityFramework is horrible</a></p>\n\n<p>While it handles DTO -> Entity, it applies same to Domain Model -> Entity.</p>\n\n<p>Also Jimmy Bogard (author of AutoMapper) once commented on a blog post (which is unavailable now, but the disqus comments are <a href=\"https://disqus.com/home/discussion/codingforfunandprofit/friends_dont_let_friends_use_automapper_andrew_harcourt_uglybuggerorg_31/\" rel=\"noreferrer\">still there</a>)</p>\n\n<p>Jimmy Bogard commented: </p>\n\n<blockquote>\n  <p>There are definitely places to use AutoMapper, and places <em>not</em> to use\n  it. However, I think this post misses them:</p>\n  \n  <ol>\n  <li><p>Configuration\n  validation takes care of members that exist on the destination type\n  that aren't mapped. That's easy.</p></li>\n  <li><p>Dependency injection takes care of depending directly on other\n  assemblies. For example, you'd have IRepository in Core and the\n  implementation that references System.Data in another assembly </p></li>\n  <li><strong>AutoMapper was never, ever intended to map <em>back</em> into a behavioral\n  model. AutoMapper is intended to build DTOs, not map back in</strong></li>\n  <li>AutoMapper also uses Reflection.Emit and expression tree compilation,\n  cached once. If you use autoprojection, it's faster than any\n  server-side code you could write yourself.</li>\n  </ol>\n  \n  <p>The points you raised are common complaints, but mostly it's people\n  not understand how to use AutoMapper correctly. However, there are\n  places I absolutely wouldn't use AutoMapper:</p>\n  \n  <ol>\n  <li>When the destination type isn't a projection of the source type.\n  Seems obvious, if AutoMapper isn't Auto then there's no point. It's\n  supposed to get rid of the brain-dead code you would be forced to\n  write anyway.</li>\n  <li>Mapping to complex models. I only use AutoMapper to\n  flatten/project, never back to behavioral models. I'm very up front\n  about this and discourage this use whenever I see it.</li>\n  <li>Anywhere that you're not trying to delete code you would have written anyway.</li>\n  <li>You prefer explicit over convention. This is a whole other topic, with\n  pros and cons of both approaches.</li>\n  <li>You prefer not to understand the\n  magic. I build lots of convention-based helpers covering a wide array\n  of scenarios, but I make sure that my team understands what is\n  actually happening underneath the covers.</li>\n  </ol>\n</blockquote>\n\n<p>Your options basically boil down to</p>\n\n<ol>\n<li>Use event sourcing for your domain model (and build it as a series of events inside the repository, so for persistence you only save new models)</li>\n</ol>\n\n<p><strong>OR</strong></p>\n\n<ol start=\"2\">\n<li>use your domain model directly as persistence model.</li>\n</ol>\n\n<p>The later one will cause that some persistence detail leak into your domain model. This may or may not be acceptable for your use case. It usually works well in smaller projects where Event Sourcing is out of scope.</p>\n\n<p>As for the rest of your example, it's a bit to far from a practical use case and it's hard to say why your services are created that way.</p>\n\n<p>Could be a bad chosen aggregate root, wrong/bad separation of concerns. Hard to tell from <strong>abstracted</strong> terms as <code>SecondService</code> etc.</p>\n\n<p>An aggregate root can be seen as a transaction boundary. All entities within that root needs to be updated at the same time.</p>\n\n<p>The fact, that you pass only ids to the <code>DoWork</code> methods indicates that they are different operations (and hence, transactions on their own) or that only the id should be assigned.</p>\n\n<p>If they were supposed to be used in an outer scope you should pass in the aggregate root references to it, rather than only pass the ids.</p>\n\n<pre><code>firstService.DoWork(aggregate1,aggregate2); \nsecondService.DoWork(aggregate1,aggregate3);\n\n// instead of \nfirstService.DoWork(aggregate1.Id,aggregate2.Id); \nsecondService.DoWork(aggregate1.Id,aggregate3.Id);\n</code></pre>\n\n<p>You can't (and shouldn't) rely on the fact, that some ORMs may cache an entity, hence not rely that multiple calls to your repository will return the exact same instance of the entity. </p>\n"}], "owner": {"reputation": 996, "user_id": 2303347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aba6fa8a1813d5d7abe830aa9e87517f?s=128&d=identicon&r=PG", "display_name": "LayfieldK", "link": "https://stackoverflow.com/users/2303347/layfieldk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2964, "favorite_count": 6, "accepted_answer_id": 46083294, "answer_count": 1, "score": 3, "last_activity_date": 1504728107, "creation_date": 1504720671, "last_edit_date": 1504724542, "question_id": 46081580, "link": "https://stackoverflow.com/questions/46081580/using-ddd-and-automapper-how-do-you-do-work-on-the-same-aggregate-root-in-multi", "title": "Using DDD and AutoMapper, how do you do work on the same aggregate root in multiple services within a single unit of work?", "body": "<p>I am trying to learn and implement domain driven design in a non-web based project.  I have a main loop that will do multiple procedures on a lot of entities in a single unit of work.  I don't want any of the changes to be persisted unless the entire loop's work is successful.  I'm using AutoMapper to convert persistence models to domain models within a repository, and my services are using the repository to retrieve data before doing work.</p>\n\n<p>There are some elements of DDD that are not working well with my project and I am hoping someone can tell me what I have wrong about the whole process.  </p>\n\n<p>Here are the DDD ideas I'm struggling with:</p>\n\n<ul>\n<li>Domain services should be used when a process involves multiple aggregate roots interacting with each other</li>\n<li>You should pass aggregate root Ids into domain services which will then use repositories to load them</li>\n<li>Repositories should return domain models that it constructs from mapped persistence models (in this case I am using AutoMapper)</li>\n</ul>\n\n<p>Here is an example of what I'm trying to do.</p>\n\n<pre><code>using (var scope = serviceProvider.CreateScope())\n            {\n                var unitOfWork = scope.ServiceProvider.GetService&lt;IUnitOfWork&gt;();\n                var aggregate1Repo = scope.ServiceProvider.GetService&lt;IAggregate1Repository&gt;();\n                var aggregate2Repo = scope.ServiceProvider.GetService&lt;IAggregate2Repository&gt;();\n                var aggregate3Repo = scope.ServiceProvider.GetService&lt;IAggregate3Repository&gt;();\n                var firstService = scope.ServiceProvider.GetService&lt;IFirstService&gt;();\n                var secondService = scope.ServiceProvider.GetService&lt;ISecondService&gt;();\n\n                var aggregate1 = aggregate1Repo.Find(1); //First copy of aggregate1\n                var aggregate2 = aggregate2Repo.Find(1000); \n                var aggregate3 = aggregate3Repo.Find(123); \n\n                aggregate1.DoSomeInternalWork();\n\n                firstService.DoWork(aggregate1.Id,aggregate2.Id); \n                secondService.DoWork(aggregate1.Id,aggregate3.Id);\n\n                aggregate1Repo.Update(aggregate1);\n                unitOfWork.Commit();\n            }\n</code></pre>\n\n<p>Aggregate1Repo:</p>\n\n<pre><code>public class Aggregate1Repository\n{\n    private readonly AppDBContext _dbContext;\n    private IMapper _mapper;\n\n    public Aggregate1Repository(AppDBContext context, IMapper mapper)\n    {\n        _dbContext = context;\n        _mapper = mapper;\n    }   \n\n    public Aggregate1 Find(int id)\n    {\n        return _mapper.Map&lt;Aggregate1&gt;(_dbContext\n            .SomeDBSet.AsNoTracking()\n            .Find(id));\n    }\n}\n</code></pre>\n\n<p>FirstService:</p>\n\n<pre><code>public class FirstService : IFirstService\n{\n    private readonly IAggregate1Repository _agg1Repo;\n    private readonly IAggregate2Repository _agg2Repo;\n\n    public FirstService(IAggregate1Repository agg1Repo, IAggregate2Repository agg2Repo)\n    {\n        _agg1Repo = agg1Repo;\n        _agg2Repo = agg2Repo;\n    }\n\n    public void DoWork(int aggregate1Id, int aggregate2Id)\n    {\n        var aggregate1 = _agg1Repo.Find(aggregate1Id); //second copy of aggregate1\n        var aggregate2 = _agg2Repo.Find(aggregate2Id);\n        //do some calculations and modify aggregate1 in some fashion\n        //I could update aggregate1 in the repository here,\n        // but this copy of aggregate1 doesn't have the changes made prior to this point\n    }\n}\n</code></pre>\n\n<p>SecondService:</p>\n\n<pre><code>public class SecondService : ISecondService\n{\n    private readonly IAggregate1Repository _agg1Repo;\n    private readonly IAggregate3Repository _agg3Repo;\n\n    public FirstService(IAggregate1Repository agg1Repo, IAggregate3Repository agg3Repo)\n    {\n        _agg1Repo = agg1Repo;\n        _agg3Repo = agg3Repo;\n    }\n\n    public void DoWork(int aggregate1Id, int aggregate3Id)\n    {\n        var aggregate1 = _agg1Repo.Find(aggregate1Id); //third copy of aggregate1\n        var aggregate3 = _agg2Repo.Find(aggregate3Id);\n        //do some calculations and modify aggregate1 in some fashion\n        //I could update aggregate1 in the repository here,\n        // but this copy of aggregate1 doesn't have the changes made prior to this point\n    }\n}\n</code></pre>\n\n<p>The problem here is that I'd essentially be doing work to three different copies of aggregate1 since a new object is created by AutoMapper in the repository each time I try to load it.  I could put separate calls to aggregate1Repo.Update in the two services, but I'd still be working on three different objects that all represent the same thing.  I feel like I must have a fundamental flaw in my thinking, but I don't know what it is.</p>\n"}, {"tags": ["c#", "asp.net-mvc", "razor", "asp.net-mvc-5", "itext"], "owner": {"reputation": 353, "user_id": 5220880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/DS5F0.png?s=128&g=1", "display_name": "Rocket Risa", "link": "https://stackoverflow.com/users/5220880/rocket-risa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1476, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1505163736, "creation_date": 1504720578, "last_edit_date": 1505163736, "question_id": 46081557, "link": "https://stackoverflow.com/questions/46081557/how-to-embed-itextsharp-pdf-in-view-c-mvc-5", "title": "How to Embed iTextSharp PDF in View (C# - MVC 5)", "body": "<h2>Greetings fellow coders!</h2>\n\n<p>I've done tons of research on this topic and can't manage to find any resources that truly depict how this process can be done (or if it can be done). So, I'm turning to you all for some advice! </p>\n\n<hr>\n\n<h2><strong>The Issue</strong>:</h2>\n\n<p>So right now, I have a form that sends the filled out data back to the controller via HttpPost. At this point, I pass that form data to the model function to create the PDF. Now at this point, I have it returning the PDF file if the model function was successful.</p>\n\n<pre><code>        PDFMemStream memstream = new PDFMemStream();\n        CreatePDFinfo formdata = new CreatePDFinfo();\n\n        if (ModelState.IsValid)\n        {\n            memstream = CreatePDF.Populate_PDFcontent(formdata);\n            if (memstream.retval.success)\n            {\n                // if creating pdf is successful, return file\n                return File(memstream.mstream, \"application/pdf\");\n            }\n        }\n        ViewBag.PageTitle = \"Cool PDF Project\";\n        ViewBag.TabTitle = \"Really Cool PDF Project\";\n        return View(formdata);\n</code></pre>\n\n<ul>\n<li><p>I can display this created PDF in a separate tab if I use the code below in the view. This assumes that the current view is called \"createPDF\". So this part works all fine and dandy.</p>\n\n<pre><code>$('#form').submit(function () {\n        if ($('#form').valid())\n        {\n            window.open('', 'createPDF');\n            this.target = 'createPDF';\n        }\n    });\n</code></pre></li>\n<li><p>If I don't use the above code, after the button click, it will remain on the current page and reload the page with only the pdf content in the native browser PDF viewer.</p></li>\n</ul>\n\n<hr>\n\n<h2><strong>The Needed Solution</strong>:</h2>\n\n<p>As I stated, everything works perfectly if I wanted the PDF to be populated in at new tab or the existing one. <strong>HOWEVER</strong>, what I need, is a way to view the PDF on the same page either in a <strong>partial view</strong> or <strong>embedded on the existing page</strong>. I could even deal with the PDF being embedded in a new view as long as I could pass the model data to the new view for other sections of that page. </p>\n\n<hr>\n\n<h2><strong>Resources &amp; Articles</strong>:</h2>\n\n<p>Here's all of the articles and resources I've already looked into and read (so please do not post the same ones): </p>\n\n<p><a href=\"https://stackoverflow.com/questions/8140339/using-itextsharp-to-extract-and-update-links-in-an-existing-pdf/8141831#8141831\">using ITextSharp to extract and update links in an existing PDF</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5555274/displaying-a-pdf-to-webpage-using-itextsharp\">Displaying a pdf to webpage using iTextSharp?</a></p>\n\n<p><a href=\"http://developers.itextpdf.com/content/itext-7-jump-start-tutorial/sharp/chapter-1-introducing-basic-building-blocks\" rel=\"nofollow noreferrer\">http://developers.itextpdf.com/content/itext-7-jump-start-tutorial/sharp/chapter-1-introducing-basic-building-blocks</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/18157988/mvc-application-to-display-embedded-pdf-documents\">MVC Application to Display embedded PDF documents</a></p>\n\n<p><a href=\"https://www.codeproject.com/Questions/890372/How-Can-I-Display-A-Pdf-From-Byte-Array-In-Mvc\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Questions/890372/How-Can-I-Display-A-Pdf-From-Byte-Array-In-Mvc</a></p>\n\n<p><a href=\"https://www.codeproject.com/Articles/66948/Rendering-PDF-views-in-ASP-MVC-using-iTextSharp\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/66948/Rendering-PDF-views-in-ASP-MVC-using-iTextSharp</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/43596769/c-sharp-asp-net-mvc-create-pdf-from-view-rotativa-or-itextsharp\">C# ASP.NET MVC Create PDF from view Rotativa or iTextSharp?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/6953604/convert-partialview-html-to-string-for-itextsharp-htmlparser\">Convert PartialView Html to String for ITextSharp HtmlParser</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/12974115/how-to-open-a-pdf-file-in-an-iframe\">How to open a PDF file in an &lt;iframe&gt;?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1324597/how-to-render-an-asp-net-mvc-view-in-pdf-format\">How to render an ASP.NET MVC View in PDF format</a></p>\n\n<p>Now some of the articles aren't completely relevant but I included them just in case they may be helpful.</p>\n\n<hr>\n\n<h2><strong>UPDATE</strong>:</h2>\n\n<p>In case anyone else runs into a similar issue, what I ended up doing was processing the non-PDF related method first, returned a new view with the model data, and then made an AJAX call to a route that creates/generates the PDF. Hopefully that makes sense. Haha. :) </p>\n\n<p><strong>Any suggestions, tips or advice?...</strong></p>\n"}, {"tags": ["c#", "asp.net-mvc"], "comments": [{"owner": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 0, "creation_date": 1504720584, "post_id": 46081518, "comment_id": 79124862, "body": "Why are they marked as required?"}, {"owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "reply_to_user": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 0, "creation_date": 1504720640, "post_id": 46081518, "comment_id": 79124890, "body": "@stephen.vakil Because they are required fields for the form."}, {"owner": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 1, "creation_date": 1504721162, "post_id": 46081518, "comment_id": 79125190, "body": "Then why are you allowing null?"}, {"owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "reply_to_user": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 0, "creation_date": 1504721585, "post_id": 46081518, "comment_id": 79125401, "body": "@stephen.vakil I&#39;m using null to determine if the form has been filled out by a user or if its just the default."}, {"owner": {"reputation": 1638, "user_id": 8224694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cL5ki.jpg?s=128&g=1", "display_name": "Rob Anthony", "link": "https://stackoverflow.com/users/8224694/rob-anthony"}, "edited": false, "score": 2, "creation_date": 1504721969, "post_id": 46081518, "comment_id": 79125608, "body": "i don&#39;t think you can have [Required] AND allow them to be null as required means that they have to have a value and, allowing null, means they do not!"}, {"owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "reply_to_user": {"reputation": 1638, "user_id": 8224694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cL5ki.jpg?s=128&g=1", "display_name": "Rob Anthony", "link": "https://stackoverflow.com/users/8224694/rob-anthony"}, "edited": false, "score": 0, "creation_date": 1504722036, "post_id": 46081518, "comment_id": 79125644, "body": "@RobAnthony I believe that is correct, that&#39;s why I asked what the proper way/best practice is to solve this problem."}, {"owner": {"reputation": 55708, "user_id": 296861, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/957c8334a5950ba301f66662b36da7d1?s=128&d=identicon&r=PG&f=1", "display_name": "Win", "link": "https://stackoverflow.com/users/296861/win"}, "reply_to_user": {"reputation": 1638, "user_id": 8224694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cL5ki.jpg?s=128&g=1", "display_name": "Rob Anthony", "link": "https://stackoverflow.com/users/8224694/rob-anthony"}, "edited": false, "score": 1, "creation_date": 1504722749, "post_id": 46081518, "comment_id": 79126001, "body": "@RobAnthony You can make the model <b><i>Nullable</i></b> type and apply <b><i>Required</i></b> attribute; it doesn&#39;t not effect the validation. We sometime intentionally make Nullable type, so that we can catch and display friendly error message using <code>ModelState.AddModelError</code> if user leave it blank; otherwise model binder will throws server exception."}, {"owner": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 0, "creation_date": 1504723985, "post_id": 46081518, "comment_id": 79126668, "body": "What are you expecting to accomplish with the <code>Required</code> attribute?  I still don&#39;t get it.  If they have to fill in a value, then it is properly marking them as invalid when the field is blank.  If they don&#39;t have to fill in a value and can leave them blank, then <code>Required</code> is actually not appropriate."}, {"owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "reply_to_user": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 0, "creation_date": 1504724229, "post_id": 46081518, "comment_id": 79126802, "body": "@stephen.vakil It&#39;s a required field and I want to use the validation framework so I marked them as required. I need to make them null to see if the user submitted the form or if they just loaded the page. On loading the page I check and if the date is null, I know not to run the query to get the students. If there is a date then I know the user submitted the form. Right now I have no other way to tell"}, {"owner": {"reputation": 5975, "user_id": 187365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CIlaX.jpg?s=128&g=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/187365/fran"}, "edited": false, "score": 0, "creation_date": 1504724538, "post_id": 46081518, "comment_id": 79126985, "body": "Sounds like you should split your Search views to 2 models 1 for the get and one for the post.  The get viewmodel is is showing the initial page, you don&#39;t really need validation.  The post viewmodel would have the required fields.  you also want to separate the inital loading of the page from the form submissions on the page by creating 2 controller actions."}, {"owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "reply_to_user": {"reputation": 5975, "user_id": 187365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CIlaX.jpg?s=128&g=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/187365/fran"}, "edited": false, "score": 0, "creation_date": 1504724632, "post_id": 46081518, "comment_id": 79127021, "body": "@Fran Could you provide and example please?"}, {"owner": {"reputation": 5975, "user_id": 187365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CIlaX.jpg?s=128&g=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/187365/fran"}, "reply_to_user": {"reputation": 55708, "user_id": 296861, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/957c8334a5950ba301f66662b36da7d1?s=128&d=identicon&r=PG&f=1", "display_name": "Win", "link": "https://stackoverflow.com/users/296861/win"}, "edited": false, "score": 0, "creation_date": 1504725061, "post_id": 46081518, "comment_id": 79127243, "body": "@Win gave you an example below.  That paradigm is the default way to implement form submissions.  Also if you want to default in DateTime.Now, just set it in a constructor for the get view model.  That way you load the form with the values you want."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3559349"}, "edited": false, "score": 0, "creation_date": 1504736766, "post_id": 46081518, "comment_id": 79132460, "body": "The are a few issues with the code in your question that do no make sense. <code>ModelState</code> is invalid because the parameter in your method is your model which has 2 required properties (the <code>DefaultModelBinder</code> adds the <code>ModelStateError</code>&#39;s). But nowhere in your code are you checking <code>ModelState</code>, and you do not have <code>@ValidationMessageFor()</code> elements in your view so no errors are being displayed anyway. And you have not shown your POST method so its no clear if its really <code>FormMethod.Get</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3559349"}, "edited": false, "score": 0, "creation_date": 1504736933, "post_id": 46081518, "comment_id": 79132499, "body": "And finally you not even passing a model to the view, so what is the point of setting the dates to <code>DateTime</code> now in your GET method? (in any case they will be displayed as <code>null</code> because setting the value of a property after its been added to <code>ModelState</code> is ignored by the <code>TextBoxFor()</code> method"}], "answers": [{"comments": [{"owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "edited": false, "score": 0, "creation_date": 1504721557, "post_id": 46081802, "comment_id": 79125388, "body": "I&#39;m doing that and the page shows validation errors for both date fields"}, {"owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "edited": false, "score": 0, "creation_date": 1504723721, "post_id": 46081802, "comment_id": 79126513, "body": "I&#39;m using a datetime picker control. Since the model defaults to NULL since it&#39;s a DateTime? the very first page load shows my date time fields failing validation. They&#39;re not failing because what the user selects is invalid"}, {"owner": {"reputation": 55708, "user_id": 296861, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/957c8334a5950ba301f66662b36da7d1?s=128&d=identicon&r=PG&f=1", "display_name": "Win", "link": "https://stackoverflow.com/users/296861/win"}, "reply_to_user": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "edited": false, "score": 0, "creation_date": 1504746589, "post_id": 46081802, "comment_id": 79134736, "body": "I updated the answer on how to fix validation errors at page load."}], "tags": [], "owner": {"reputation": 55708, "user_id": 296861, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/957c8334a5950ba301f66662b36da7d1?s=128&d=identicon&r=PG&f=1", "display_name": "Win", "link": "https://stackoverflow.com/users/296861/win"}, "is_accepted": true, "score": 2, "last_activity_date": 1504726838, "last_edit_date": 1504726838, "creation_date": 1504721512, "answer_id": 46081802, "question_id": 46081518, "link": "https://stackoverflow.com/questions/46081518/why-is-my-model-failing-validation/46081802#46081802", "title": "Why is my model failing validation", "body": "<p>Date time input is very sensitive. User could make a typo and <strong><em>ModelBinder</em></strong> won't be able to bind it to parameter. So, I suggest you to use framework like <a href=\"https://jqueryui.com/datepicker/\" rel=\"nofollow noreferrer\">jQuery UI Datepicker</a> or <a href=\"http://demos.telerik.com/kendo-ui/datepicker/index\" rel=\"nofollow noreferrer\">Kendo Datepicker</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/v4z2a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v4z2a.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/c4qKe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c4qKe.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>public class StudentController : Controller\n{\n    [HttpGet]\n    public ActionResult StudentSearch(SearchModel model)\n    {\n        if (model.Date1 == null || model.Date2 == null)\n        {\n            model.Date1 = DateTime.Now;\n            model.Date2 = DateTime.Now;\n        }\n        return View(model); &lt;=====\n    }\n\n    [HttpPost]\n    public ActionResult StudentSearchPost(SearchModel model)\n    {            \n        if (ModelState.IsValid)\n        {\n            // Do something\n        }\n        return View();\n    }\n}\n</code></pre>\n\n<p>View</p>\n\n<pre><code>@model DemoWebMvc.Models.SearchModel\n\n&lt;div&gt;\n    @using (Html.BeginForm(\"StudentSearchPost\", \"Student\", FormMethod.Post))\n    {\n        &lt;span&gt;\n            Date 1 @Html.TextBoxFor(m =&gt; m.Date1)\n            Date 2 @Html.TextBoxFor(m =&gt; m.Date2)\n            &lt;input type=\"submit\" value=\"Search\"/&gt;\n        &lt;/span&gt;\n    }\n&lt;/div&gt;\n</code></pre>\n\n<blockquote>\n  <p><strong><em>From Comment:</em></strong> I'm using a datetime picker control. Since the model\n  defaults to NULL since it's a DateTime? <strong><em>the very first page load shows\n  my date time fields failing validation.</em></strong> They're not failing because\n  what the user selects is invalid</p>\n</blockquote>\n\n<p>The problem is you pass invalid model to View at Page Load, and default model binder tries to bind to model instance and it triggers validation error at Page Load. </p>\n\n<p><strong><em>If you do not have valid model, you should not send it to view  at Page Load to avoid displaying validation error.</em></strong></p>\n\n<pre><code>public class StudentController : Controller\n{\n    [HttpGet]\n    public ActionResult StudentSearch()\n    {\n        return View();\n    }\n\n    [HttpPost]\n    public ActionResult StudentSearch(SearchModel model)\n    {\n        if (ModelState.IsValid)\n        {\n        }\n        return View(model);\n    }\n}\n</code></pre>\n\n<h2>View</h2>\n\n<pre><code>@model DemoWebMvc.Models.SearchModel\n\n@{\n    Layout = null;\n}\n\n@using (Html.BeginForm(\"StudentSearch\", \"Student\", FormMethod.Post))\n{\n    @Html.ValidationSummary(true)\n    &lt;span&gt;\n        Date 1 @Html.TextBoxFor(m =&gt; m.Date1)\n        @Html.ValidationMessageFor(m =&gt; m.Date1)&lt;br /&gt;\n        Date 2 @Html.TextBoxFor(m =&gt; m.Date2)\n        @Html.ValidationMessageFor(m =&gt; m.Date2)&lt;br /&gt;\n        &lt;input type=\"submit\" value=\"Search\" /&gt;\n    &lt;/span&gt;\n}\n\n&lt;script src=\"~/Scripts/jquery-1.10.2.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"~/Scripts/jquery.validate.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"~/Scripts/jquery.validate.unobtrusive.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\"&gt;&lt;/script&gt;\n&lt;script&gt;\n    $(function () {\n        $(\"#Date1\").datepicker();\n        $(\"#Date2\").datepicker();\n    });\n&lt;/script&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "edited": false, "score": 0, "creation_date": 1504723629, "post_id": 46081820, "comment_id": 79126475, "body": "I need to check for null, if it&#39;s null then the user didn&#39;t submit the form, it was just loaded with the defaults (null)"}, {"owner": {"reputation": 467, "user_id": 1158961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qVAuw.png?s=128&g=1", "display_name": "allen.mn", "link": "https://stackoverflow.com/users/1158961/allen-mn"}, "reply_to_user": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "edited": false, "score": 0, "creation_date": 1504724741, "post_id": 46081820, "comment_id": 79127077, "body": "You can&#39;t have both [Required] and a nullable type, something has to give. You can set the default value to DateTime.MinValue if you want to leave the field as [Required] but check whether the user has selected a date. Otherwise, you&#39;ll need to remove the required attribute and manually check for nulls."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3559349"}, "edited": false, "score": 0, "creation_date": 1504763250, "post_id": 46081820, "comment_id": 79138977, "body": "Of course you can have both [Required] and a nullable type. Its best practice to protect against under-posting attacks. Refer <a href=\"https://stackoverflow.com/questions/43688968/what-does-it-mean-for-a-property-to-be-required-and-nullable/43689575#43689575\">this answer</a> And making it <code>DateTime </code> means its required anyway since it cannot be <code>null</code>"}], "tags": [], "owner": {"reputation": 467, "user_id": 1158961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qVAuw.png?s=128&g=1", "display_name": "allen.mn", "link": "https://stackoverflow.com/users/1158961/allen-mn"}, "is_accepted": false, "score": 0, "last_activity_date": 1504721961, "last_edit_date": 1504721961, "creation_date": 1504721577, "answer_id": 46081820, "question_id": 46081518, "link": "https://stackoverflow.com/questions/46081518/why-is-my-model-failing-validation/46081820#46081820", "title": "Why is my model failing validation", "body": "<p>Just changing the type from <code>DateTime?</code> to <code>DateTime</code> should accomplish what you want. You can set the value to <code>DateTime.Now</code> in the first action or leave it as the default unsigned. Either will work in the view.</p>\n\n<p>Edit: Here's what I mean in a dotnetfiddle: <a href=\"https://dotnetfiddle.net/Ei0LeQ\" rel=\"nofollow noreferrer\">https://dotnetfiddle.net/Ei0LeQ</a></p>\n"}], "owner": {"reputation": 1670, "user_id": 3953989, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d0b1034785f9803774157b0963662eb3?s=128&d=identicon&r=PG&f=1", "display_name": "user3953989", "link": "https://stackoverflow.com/users/3953989/user3953989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 46081802, "answer_count": 2, "score": 0, "last_activity_date": 1504726838, "creation_date": 1504720436, "last_edit_date": 1504720612, "question_id": 46081518, "link": "https://stackoverflow.com/questions/46081518/why-is-my-model-failing-validation", "title": "Why is my model failing validation", "body": "<p>When I first load the page both my date textboxes are failing validation. \nThis appears to be because the two Date properties are set as required but are null.</p>\n\n<p>My goals are to:<br>\n1) Have a model to pass into the controller that contains the criteria to search for.<br>\n2) That criteria will get reloaded when the page returns along with the results.<br>\n3) When the page 1st loads it will set the dates to a default to <code>DateTime.Now</code> and NOT show any results. When you submit the criteria it will then show results on next page load.</p>\n\n<pre><code>// Model\npublic class SearchModel\n{\n    public long? StudentId { get; set; }\n\n    [Required]\n    public DateTime? Date1 { get; set; }\n\n    [Required]\n    public DateTime? Date2 { get; set; }\n\n    public List&lt;string&gt; Students { get; set; }\n}\n\n// View\n@model SearchModel\n&lt;div&gt;\n    @using (Html.BeginForm(\"StudentSearch\", \"Student\", FormMethod.Post))\n    {\n        &lt;span&gt;\n            Date 1 @Html.TextBoxFor(m =&gt; m.Date1)\n            Date 2 @Html.TextBoxFor(m =&gt; m.Date2)\n            &lt;input type=\"submit\" value=\"Search\" /&gt;\n        &lt;/span&gt;\n    }\n&lt;/div&gt;\n&lt;div&gt;\n    @foreach(var s in model.Students)\n    { &lt;span&gt;@s&lt;/span&gt; }\n&lt;/div&gt;\n\n// Controller\n[HttpGet]\npublic ActionResult StudentSearch(SearchModel model)\n{\n    if (model.Date1 == null || model.Date2 == null)\n    {\n        model.Date1 = DateTime.Now;\n        model.Date2 = DateTime.Now;\n    }\n\n    return View();\n}\n</code></pre>\n"}, {"tags": ["c#"], "comments": [{"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1504720671, "post_id": 46081468, "comment_id": 79124913, "body": "add <code>where T : class</code> to the function: <code>public T FindComponent&lt;T&gt;() where T : class</code>"}, {"owner": {"reputation": 6144, "user_id": 441521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bc98cddd5d06b2fd0c07a854e7fe15b?s=128&d=identicon&r=PG", "display_name": "user441521", "link": "https://stackoverflow.com/users/441521/user441521"}, "reply_to_user": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1504720739, "post_id": 46081468, "comment_id": 79124953, "body": "Didn&#39;t change anything. Same error."}, {"owner": {"reputation": 6724, "user_id": 4685428, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de2eda4db020c2b1541f877424225d73?s=128&d=identicon&r=PG&f=1", "display_name": "Aleks Andreev", "link": "https://stackoverflow.com/users/4685428/aleks-andreev"}, "edited": false, "score": 0, "creation_date": 1504720854, "post_id": 46081468, "comment_id": 79125018, "body": "Side note: you can simplify your first linq query by doing this: <code>var comp = components.FirstOrDefault(c =&gt; typeof(T).IsAssignableFrom(c.GetType())</code>"}, {"owner": {"reputation": 6144, "user_id": 441521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bc98cddd5d06b2fd0c07a854e7fe15b?s=128&d=identicon&r=PG", "display_name": "user441521", "link": "https://stackoverflow.com/users/441521/user441521"}, "reply_to_user": {"reputation": 6724, "user_id": 4685428, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de2eda4db020c2b1541f877424225d73?s=128&d=identicon&r=PG&f=1", "display_name": "Aleks Andreev", "link": "https://stackoverflow.com/users/4685428/aleks-andreev"}, "edited": false, "score": 0, "creation_date": 1504720914, "post_id": 46081468, "comment_id": 79125056, "body": "@AleksAndreev I prefer the sql like syntax personally."}, {"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1504721014, "post_id": 46081468, "comment_id": 79125108, "body": "@user441521, <code>where T : class</code> will remove compiler error you mentioned. (as error message stays itself <i>because it does not have a class type constraint nor a &#39;class&#39; constraint</i>."}, {"owner": {"reputation": 6144, "user_id": 441521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bc98cddd5d06b2fd0c07a854e7fe15b?s=128&d=identicon&r=PG", "display_name": "user441521", "link": "https://stackoverflow.com/users/441521/user441521"}, "edited": false, "score": 0, "creation_date": 1504721169, "post_id": 46081468, "comment_id": 79125194, "body": "Yes, but now it&#39;s erroring out saying it cannot convert type &#39;Component&#39; to &#39;T&#39;. So Health is a class that derives from Component and implements IHealth. The idea is querying the components list, which I added a Health object to, to find a component that implements IHealth. It finds the Health object correctly, but I&#39;d want to only return the IHealth component so I can only interact with the interface methods."}, {"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 3, "creation_date": 1504721318, "post_id": 46081468, "comment_id": 79125267, "body": "Your method can simply look like: <code>return components.OfType&lt;T&gt;().FirstOrDefault();</code>"}, {"owner": {"reputation": 846, "user_id": 1011129, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sI1vm.jpg?s=128&g=1", "display_name": "Kevin Hirst", "link": "https://stackoverflow.com/users/1011129/kevin-hirst"}, "edited": false, "score": 0, "creation_date": 1504721387, "post_id": 46081468, "comment_id": 79125300, "body": "Yes, what Fabio mentioned is better - the casting occurs in &quot;OfType&quot; and you don&#39;t have to worry about it.  Then you just return the first object from that function."}, {"owner": {"reputation": 6144, "user_id": 441521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bc98cddd5d06b2fd0c07a854e7fe15b?s=128&d=identicon&r=PG", "display_name": "user441521", "link": "https://stackoverflow.com/users/441521/user441521"}, "edited": false, "score": 0, "creation_date": 1504721408, "post_id": 46081468, "comment_id": 79125311, "body": "That works Fabio thanks! Strange the description in the editor of that function doesn&#39;t mention that it casts to that type."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1504721853, "post_id": 46081468, "comment_id": 79125541, "body": "@Fabio <code>OfType</code> is for sequences that may not be of the proper type.  <code>Cast</code> is for casting objects you know are of another type."}, {"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "reply_to_user": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 0, "creation_date": 1504722012, "post_id": 46081468, "comment_id": 79125631, "body": "@Servy, as OP said in the comments <i>to find a component that implements IHealth</i> - I think it&#39;s fit to the <i>sequences that may not be of the proper type(IHealth in OP case)</i>"}], "answers": [{"comments": [{"owner": {"reputation": 6144, "user_id": 441521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bc98cddd5d06b2fd0c07a854e7fe15b?s=128&d=identicon&r=PG", "display_name": "user441521", "link": "https://stackoverflow.com/users/441521/user441521"}, "edited": false, "score": 0, "creation_date": 1504720603, "post_id": 46081534, "comment_id": 79124874, "body": "This gives me the error: Cannot convert type &#39;Component&#39; to &#39;T&#39;. Cast is redudant but if I remove the cast I get error: Cannot implicitly convert type &#39;Component&#39; to &#39;T&#39;."}, {"owner": {"reputation": 846, "user_id": 1011129, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sI1vm.jpg?s=128&g=1", "display_name": "Kevin Hirst", "link": "https://stackoverflow.com/users/1011129/kevin-hirst"}, "reply_to_user": {"reputation": 6144, "user_id": 441521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bc98cddd5d06b2fd0c07a854e7fe15b?s=128&d=identicon&r=PG", "display_name": "user441521", "link": "https://stackoverflow.com/users/441521/user441521"}, "edited": false, "score": 0, "creation_date": 1504721286, "post_id": 46081534, "comment_id": 79125251, "body": "Ok.  Does the &quot;components&quot; queryable/list/whatever implement an OfType&lt;&gt; method?"}], "tags": [], "owner": {"reputation": 846, "user_id": 1011129, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sI1vm.jpg?s=128&g=1", "display_name": "Kevin Hirst", "link": "https://stackoverflow.com/users/1011129/kevin-hirst"}, "is_accepted": false, "score": 0, "last_activity_date": 1504720485, "creation_date": 1504720485, "answer_id": 46081534, "question_id": 46081468, "link": "https://stackoverflow.com/questions/46081468/understanding-interface-casting/46081534#46081534", "title": "Understanding interface casting", "body": "<p>The 'as' keyword will give you a null value if the cast fails.  But in this case, what you need to do is an implicit cast, because you've already checked that this is possible.</p>\n\n<pre><code>return (T) comp;\n</code></pre>\n"}], "owner": {"reputation": 6144, "user_id": 441521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5bc98cddd5d06b2fd0c07a854e7fe15b?s=128&d=identicon&r=PG", "display_name": "user441521", "link": "https://stackoverflow.com/users/441521/user441521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "closed_date": 1504721143, "answer_count": 1, "score": -1, "last_activity_date": 1504721952, "creation_date": 1504720243, "last_edit_date": 1504721952, "question_id": 46081468, "link": "https://stackoverflow.com/questions/46081468/understanding-interface-casting", "closed_reason": "Duplicate", "title": "Understanding interface casting", "body": "<p>Why is it that I can cast a Component class instance to an interface like:</p>\n\n<pre><code>public Component FindComponent&lt;T&gt;()\n{\n    var comp = (from c in components\n                where typeof(T).IsAssignableFrom(c.GetType())\n                select c).FirstOrDefault();\n\n    return comp;\n}\n\nforeach(var a in actors)\n{\n    IHealth health = a.FindComponent&lt;IHealth&gt;() as IHealth;\n}\n</code></pre>\n\n<p>But I can't cast it inside the <code>FindComponent()</code> if I do:</p>\n\n<pre><code>public T FindComponent&lt;T&gt;()\n{\n    var comp = (from c in components\n                where typeof(T).IsAssignableFrom(c.GetType())\n                select c).FirstOrDefault();\n\n    return comp as T;\n}\n</code></pre>\n\n<p>As this gives the error: The type parameter 'T' cannot be used with the 'as' operator because it does not have a class type constraint nor a 'class' constraint.</p>\n\n<p>It's just easier for the user to not have to cast after the <code>FindComponent()</code>. Unity 3D has a similar function and you don't have to cast after it comes back and I'm not sure how it does the cast inside <code>FindComponent()</code> but I'm trying to replicate that.</p>\n"}, {"tags": ["c#", "wpf", "xaml"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8088799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a890bed4eb8bbd8f6058557e7bb7a195?s=128&d=identicon&r=PG&f=1", "display_name": "Herb Ramos", "link": "https://stackoverflow.com/users/8088799/herb-ramos"}, "edited": false, "score": 1, "creation_date": 1505228092, "post_id": 46081544, "comment_id": 79321837, "body": "Sorry for the response delay. I had to deal with Hurricane Irma.  Your suggestion works nicely. Exactly what I was looking for - thanks!"}], "tags": [], "owner": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "is_accepted": true, "score": 5, "last_activity_date": 1504720528, "creation_date": 1504720528, "answer_id": 46081544, "question_id": 46081435, "link": "https://stackoverflow.com/questions/46081435/setting-opactity-of-usercontrol-embedded-in-a-window-through-binding/46081544#46081544", "title": "Setting opactity of usercontrol embedded in a window through binding", "body": "<p>This should work:</p>\n\n<pre><code>&lt;Controls:SoundControl x:Name=\"soundControl\" Style=\"{StaticResource DeviceControlStyle}\" Opacity=\"{Binding DataContext.SoundControlOpacity, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}\"&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 829, "user_id": 7523101, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/HzDHK.jpg?s=128&g=1", "display_name": "Kacper Stachowski", "link": "https://stackoverflow.com/users/7523101/kacper-stachowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1504770363, "creation_date": 1504770363, "answer_id": 46090755, "question_id": 46081435, "link": "https://stackoverflow.com/questions/46081435/setting-opactity-of-usercontrol-embedded-in-a-window-through-binding/46090755#46090755", "title": "Setting opactity of usercontrol embedded in a window through binding", "body": "<p>You can bind to a property exposed from ancestor control, just like sTrenat explained, but I believe that there is a more maintanable way to achieve the same goal.</p>\n\n<p>If I understand it right, your UserControls nested in your Window have their own ViewModels and their instances are being held in your WindowViewModel. In this case, I'd suggest you to create a class containing ControlOpacity property and derive from it in your UserControlViewModel. You sholud then bind it to opacity property of your UserControl in your UserControlView (not in WindowView). You can then change its value from UserControlViewModel or from WindowViewModel by assigning value to UserControlViewModel.ControlOpacity. </p>\n\n<p>That way you don't break single responsibility rule and you have more flexible and maintanable solution to your problem (which you can easily reuse in another controls).</p>\n"}], "owner": {"reputation": 13, "user_id": 8088799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a890bed4eb8bbd8f6058557e7bb7a195?s=128&d=identicon&r=PG&f=1", "display_name": "Herb Ramos", "link": "https://stackoverflow.com/users/8088799/herb-ramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 46081544, "answer_count": 2, "score": 0, "last_activity_date": 1504770363, "creation_date": 1504720052, "question_id": 46081435, "link": "https://stackoverflow.com/questions/46081435/setting-opactity-of-usercontrol-embedded-in-a-window-through-binding", "title": "Setting opactity of usercontrol embedded in a window through binding", "body": "<p>I have a Window bound to a view model.  The Window contains several user controls. I would like to bind the opacity of one of the user controls to a property exposed in the windows view model.</p>\n\n<p>Any ideas? </p>\n\n<p>Here is a snippet of my XAML:</p>\n\n<pre><code>&lt;Window xmlns:Controls=\"clr-namespace:xxx.UI.Controls\"  x:Class=\"xxx.xxx.UI.MainWindow\" \n    xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n    xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n    xmlns:d=\"http://schemas.microsoft.com/expression/blend/2008\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    xmlns:local=\"clr-namespace:xxx.xxx.UI\"\n    xmlns:viewModels=\"clr-namespace:xxx.xxx.UI.ViewModels;assembly=xxx.xxx.UI.ViewModels\"\n    mc:Ignorable=\"d\"\n    d:DesignHeight=\"768\" \n    d:DesignWidth=\"1366\"\n    Title=\"MCH Anywhere\" \n    Icon=\"Images\\Icons\\app-icon.ico\"\n    Height=\"{Binding SystemParameters.PrimaryScreenHeight}\"\n    Width=\"{Binding SystemParameters.PrimaryScreenWidth}\"\n    WindowState=\"Maximized\"&gt;\n\n&lt;Window.DataContext&gt;\n    &lt;viewModels:MainWindowViewModel/&gt;\n&lt;/Window.DataContext&gt;\n\n&lt;Controls:SoundControl x:Name=\"soundControl\" Style=\"{StaticResource DeviceControlStyle}\" Opacity=\"{Binding Path=SoundControlOpacity}\" /&gt;\n</code></pre>\n\n<p></p>\n\n<p>Here is a snippet of my window view model:</p>\n\n<pre><code>public class MainWindowViewModel : IMainWindowViewModel, \n        INotifyPropertyChanged \n{\n    public MainWindowViewModel()\n    {\n        this.SoundControlOpacity = .2;  // binding does not work.\n    }\n\n    private double _soundControlOpacity;\n    /// &lt;summary&gt;\n    /// Gets or sets the opacity of the Ultrasound control.\n    /// &lt;/summary&gt;\n    public double SoundControlOpacity\n    {\n        get { return _soundControlOpacity; }\n        set\n        {\n            if (value != _soundControlOpacity)\n            {\n                _soundControlOpacity = value;\n                OnPropertyChanged(\"SoundControlOpacity\");\n            };\n        }\n    }\n}\n</code></pre>\n\n<p>Any ideas?\nThanks</p>\n"}, {"tags": ["c#", "wpf", "combobox", "datagrid"], "comments": [{"owner": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 0, "creation_date": 1504720825, "post_id": 46081409, "comment_id": 79124997, "body": "Am I the only one who don&#39;t understand what OP want to achive?"}, {"owner": {"reputation": 15541, "user_id": 526724, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5fafcd128fb9ba805b41d8770c0345cc?s=128&d=identicon&r=PG", "display_name": "Bradley Uffner", "link": "https://stackoverflow.com/users/526724/bradley-uffner"}, "edited": false, "score": 2, "creation_date": 1504721403, "post_id": 46081409, "comment_id": 79125307, "body": "Your view-model should have a <code>SelectedPerson</code> property that the <code>SelectedItem</code> property of the <code>ComboBox</code> is bound to.  Then your <code>TextBox</code> for name and position just get bound to <code>SelectedPerson.Name</code> and <code>SelectedPerson.Position</code>.  You never have to touch the code-behind."}, {"owner": {"reputation": 93252, "user_id": 861716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb1a28030a6da0e72693e36c77eb3cd6?s=128&d=identicon&r=PG", "display_name": "Gert Arnold", "link": "https://stackoverflow.com/users/861716/gert-arnold"}, "edited": false, "score": 0, "creation_date": 1504731022, "post_id": 46081409, "comment_id": 79130250, "body": "If your only question is <i>Is there a different approach to it</i> then this is far too broad. You&#39;re asking for a code review. There&#39;s <a href=\"https://codereview.stackexchange.com/help/on-topic\">another site</a> for that."}, {"owner": {"reputation": 115, "user_id": 6655860, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/28ff68db05a3edbd1c23f6efb539dc6d?s=128&d=identicon&r=PG&f=1", "display_name": "Shazter", "link": "https://stackoverflow.com/users/6655860/shazter"}, "edited": false, "score": 0, "creation_date": 1504731167, "post_id": 46081409, "comment_id": 79130311, "body": "I understood you would like to have a cascading combobox: <a href=\"https://stackoverflow.com/questions/42871459/binding-cascading-combobox-itemsource-in-wpf-datagrid-using-mvvm\" title=\"binding cascading combobox itemsource in wpf datagrid using mvvm\">stackoverflow.com/questions/42871459/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "reply_to_user": {"reputation": 919, "user_id": 8507673, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKiCCHoTkYQ/AAAAAAAAAAI/AAAAAAAAABQ/PlvyH-JTE9A/photo.jpg?sz=128", "display_name": "sTrenat", "link": "https://stackoverflow.com/users/8507673/strenat"}, "edited": false, "score": 1, "creation_date": 1504728033, "post_id": 46081920, "comment_id": 79128757, "body": "@sTrenat Updated"}, {"owner": {"reputation": 15541, "user_id": 526724, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5fafcd128fb9ba805b41d8770c0345cc?s=128&d=identicon&r=PG", "display_name": "Bradley Uffner", "link": "https://stackoverflow.com/users/526724/bradley-uffner"}, "edited": false, "score": 0, "creation_date": 1504731270, "post_id": 46081920, "comment_id": 79130369, "body": "Making <code>StaffMember</code> inherit from <code>Person</code> might be a better choice, depending on rest of the business functionality."}, {"owner": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "reply_to_user": {"reputation": 15541, "user_id": 526724, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5fafcd128fb9ba805b41d8770c0345cc?s=128&d=identicon&r=PG", "display_name": "Bradley Uffner", "link": "https://stackoverflow.com/users/526724/bradley-uffner"}, "edited": false, "score": 0, "creation_date": 1504735110, "post_id": 46081920, "comment_id": 79131958, "body": "It is another option. It depends on business logic."}], "tags": [], "owner": {"reputation": 1771, "user_id": 8365439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v76vl.jpg?s=128&g=1", "display_name": "Valerii", "link": "https://stackoverflow.com/users/8365439/valerii"}, "is_accepted": false, "score": 0, "last_activity_date": 1504727991, "last_edit_date": 1504727991, "creation_date": 1504722026, "answer_id": 46081920, "question_id": 46081409, "link": "https://stackoverflow.com/questions/46081409/wpf-make-combobox-selection-trigger-multiple-properties-change/46081920#46081920", "title": "WPF Make ComboBox selection trigger multiple properties change", "body": "<p>It is not a good idea to mix MVVM and code-behind. \nYou have a duplication of data in Person and StaffMember class.</p>\n\n<p>What about idea of having StaffMember property in Person class?</p>\n\n<pre><code>public class StaffMember : NotifyObject\n{\n    private string _name;\n    public string Name\n    {\n        get { return _name; }\n        set { _name = value; OnPropertyChanged(\"Name\"); }\n    }\n\n    private string _position;\n    public string Position\n    {\n        get { return _position; }\n        set { _position = value; OnPropertyChanged(\"Position\"); }\n    }\n\n}\n\npublic class Person : NotifyObject\n{\n    private string _staffMember;\n    public string StaffMember\n    {\n        get { return _staffMember; }\n        set { _staffMember = value; OnPropertyChanged(\"StaffMember\"); }\n    }\n\n    public double Age { get; set; }\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7288069, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/934e4ab4b0e6ec1811f693f5df903db6?s=128&d=identicon&r=PG&f=1", "display_name": "Disodium", "link": "https://stackoverflow.com/users/7288069/disodium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504731308, "creation_date": 1504719958, "last_edit_date": 1504731308, "question_id": 46081409, "link": "https://stackoverflow.com/questions/46081409/wpf-make-combobox-selection-trigger-multiple-properties-change", "title": "WPF Make ComboBox selection trigger multiple properties change", "body": "<p>I have two classes that have identical Name and Position properties. A ComboBox in a DataGrid has a list of StaffMember class taken from a database. It displays the name only but upon selection both Name and Position properties should change in the DataGrid bound to ObservableCollection of another class - Person.</p>\n\n<p>So far I'm using the SelectionChanged event of the combobox to browse the VisualTree, access parent DataContext and change two properties at a time.</p>\n\n<p>Is there a different approach to it?</p>\n\n<p>Update. Here's an illustrating picture:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FmGld.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FmGld.png\" alt=\"enter image description here\"></a></p>\n\n<p>I get the Name and Position from a third party service and display the name in the combobox. As user selects a name the UI should update both Name and Position properties in the table. The table also has Age and many other columns/properties in real world. That is why there are two classes: a name/position list from a database to select from and a class which is the ItemSource of the table. I also have to deal with cases when people have the same name but different positions. Hope this explains the question better.</p>\n\n<pre><code> public class StaffMember : NotifyObject\n    {\n        private string _name;\n        public string Name\n        {\n            get { return _name; }\n            set { _name = value; OnPropertyChanged(\"Name\"); }\n        }\n\n        private string _position;\n        public string Position\n        {\n            get { return _position; }\n            set { _position = value; OnPropertyChanged(\"Position\"); }\n        }\n\n    }\n\n    public class Person : NotifyObject\n    {\n        private string _name;\n        public string Name\n        {\n            get { return _name; }\n            set { _name = value; OnPropertyChanged(\"Name\"); }\n        }\n\n        private string _position;\n        public string Position\n        {\n            get { return _position; }\n            set { _position = value; OnPropertyChanged(\"Position\"); }\n        }\n\n        public double Age { get; set; }\n    }\n</code></pre>\n\n<p>ViewModel:</p>\n\n<pre><code>    public class ViewModel : NotifyObject\n    {\n        public ObservableCollection&lt;Person&gt; SelectedPeople { get; set; }\n        public List&lt;StaffMember&gt; Staff { get; set; }\n\n        public ViewModel()\n        {\n            Staff = new List&lt;StaffMember&gt;\n            {\n                new StaffMember { Name = \"Sigmund Freud\", Position = \"Psychologist\"},\n                new StaffMember { Name = \"Louis Armstrong\", Position = \"Musician\"},\n                new StaffMember { Name = \"John Doe\", Position = \"Superviser\"},\n                new StaffMember { Name = \"John Doe\", Position = \"Manager\"},\n            };\n\n            SelectedPeople = new ObservableCollection&lt;Person&gt; {\n                new Person { Name = \"Sigmund Freud\", Position = \"123\", Age= 161 },\n                new Person(),\n                new Person() };\n        }\n    }\n\n    public abstract class NotifyObject : INotifyPropertyChanged\n    {\n        public event PropertyChangedEventHandler PropertyChanged;\n\n        protected void OnPropertyChanged(string property)\n        {\n            if (PropertyChanged != null)\n                PropertyChanged(this, new PropertyChangedEventArgs(property));\n        }\n\n        public void RaiseProperychanged(string propertyName)\n        {\n            OnPropertyChanged(propertyName);\n        }\n    }\n</code></pre>\n\n<p>XAML:</p>\n\n<pre><code>&lt;Grid&gt;\n        &lt;DataGrid ItemsSource=\"{Binding SelectedPeople}\"\n                  AutoGenerateColumns=\"False\"\n                  CanUserAddRows=\"False\"&gt;\n            &lt;DataGrid.Columns&gt;\n                &lt;DataGridTemplateColumn Header=\"Name\"&gt;\n                    &lt;DataGridTemplateColumn.CellTemplate&gt;\n                        &lt;DataTemplate&gt;\n                            &lt;ComboBox x:Name=\"ComboBoxSelect\" ItemsSource=\"{Binding ElementName=TheMainWindow, Path=DataContext.Staff}\"\n                                      SelectedValue=\"{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGridRow}, Path=DataContext.Name, Mode=TwoWay}\"\n                                      DisplayMemberPath=\"Name\"\n                                      SelectedValuePath=\"Name\"\n                                      SelectionChanged=\"ComboBoxSelect_SelectionChanged\"/&gt;\n                        &lt;/DataTemplate&gt;\n                    &lt;/DataGridTemplateColumn.CellTemplate&gt;\n                &lt;/DataGridTemplateColumn&gt;\n                &lt;DataGridTextColumn Header=\"Position\" Binding=\"{Binding Position, Mode=TwoWay}\"/&gt;\n                &lt;DataGridTextColumn Header=\"Age\" Binding=\"{Binding Age}\"/&gt;\n            &lt;/DataGrid.Columns&gt;\n        &lt;/DataGrid&gt;\n    &lt;/Grid&gt;\n</code></pre>\n\n<p>Code-Behind:</p>\n\n<pre><code> private void ComboBoxSelect_SelectionChanged(object sender, SelectionChangedEventArgs e)\n        {\n            var comboBox = sender as ComboBox;\n            var parent = sender as DependencyObject;\n            while (!(parent is DataGridCell))\n            {\n                parent = VisualTreeHelper.GetParent(parent);\n                if (parent is null) return;\n            }\n            var cell = parent as DataGridCell;\n            if (cell == null) return;\n            var person = cell.DataContext as Person;\n            if (person == null) return;\n            person.Position = ((StaffMember)comboBox.SelectedItem).Position.ToString();\n        }\n</code></pre>\n"}, {"tags": ["c#"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7752322"}, "edited": false, "score": 0, "creation_date": 1504719596, "post_id": 46081291, "comment_id": 79124273, "body": "did you try this ?: <a href=\"https://stackoverflow.com/questions/642293/how-do-i-read-and-parse-an-xml-file-in-c\" title=\"how do i read and parse an xml file in c\">stackoverflow.com/questions/642293/&hellip;</a>"}, {"owner": {"reputation": 31334, "user_id": 74015, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4b7088749adc3ec3e51982d0a3bf1b34?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Axe", "link": "https://stackoverflow.com/users/74015/sam-axe"}, "edited": false, "score": 0, "creation_date": 1504719631, "post_id": 46081291, "comment_id": 79124292, "body": "Show us your entire XML structure.  What you posted isn&#39;t enough."}, {"owner": {"reputation": 5, "user_id": 6464273, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NAhjG6TYO1c/AAAAAAAAAAI/AAAAAAAAAA8/omNCT5DN0PQ/photo.jpg?sz=128", "display_name": "Kaustubh Patange", "link": "https://stackoverflow.com/users/6464273/kaustubh-patange"}, "edited": false, "score": 0, "creation_date": 1504719870, "post_id": 46081291, "comment_id": 79124437, "body": "Full xml contains same such things string name something and some value..."}, {"owner": {"reputation": 5, "user_id": 6464273, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NAhjG6TYO1c/AAAAAAAAAAI/AAAAAAAAAA8/omNCT5DN0PQ/photo.jpg?sz=128", "display_name": "Kaustubh Patange", "link": "https://stackoverflow.com/users/6464273/kaustubh-patange"}, "edited": false, "score": 0, "creation_date": 1504719928, "post_id": 46081291, "comment_id": 79124474, "body": "No not a duplicate of that ... That xml layout is very much different than this..."}, {"owner": {"reputation": 2258, "user_id": 6168519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e37eef36247051d9b713ebd68468b12?s=128&d=identicon&r=PG&f=1", "display_name": "Sparrow", "link": "https://stackoverflow.com/users/6168519/sparrow"}, "edited": false, "score": 0, "creation_date": 1504721246, "post_id": 46081291, "comment_id": 79125229, "body": "take a look at this: <a href=\"https://stackoverflow.com/questions/8898121/select-elements-with-the-name-attribute-name-in-special-xml-structure\" title=\"select elements with the name attribute name in special xml structure\">stackoverflow.com/questions/8898121/&hellip;</a>"}, {"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1504721682, "post_id": 46081291, "comment_id": 79125448, "body": "&quot;That xml layout is very much different than this&quot; - the expectation is that you do research and amend existing solutions as required. Stack Overflow isn&#39;t about handing you answers on a plate without you doing research."}, {"owner": {"reputation": 9311, "user_id": 302248, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b3bc412e2217f6ffc8c78a34ee34e1de?s=128&d=identicon&r=PG", "display_name": "Sach", "link": "https://stackoverflow.com/users/302248/sach"}, "edited": false, "score": 0, "creation_date": 1504721773, "post_id": 46081291, "comment_id": 79125499, "body": "@KaustubhPatange <i>it doesn&#39;t work</i> is not a good way to ask a question. You should show what you did, and <i>in what way</i> it doesn&#39;t work. Then we can help."}], "answers": [{"comments": [{"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1504721707, "post_id": 46081770, "comment_id": 79125461, "body": "I&#39;d <i>strongly</i> encourage using LINQ to XML instead of XmlDocument, and only using XPath when you really need to - I see no benefit in doing that here. The result is fiddly and error-prone code."}, {"owner": {"reputation": 319, "user_id": 4904297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c9e99e1ea007ee462b12d864c719395?s=128&d=identicon&r=PG&f=1", "display_name": "David Kujawski", "link": "https://stackoverflow.com/users/4904297/david-kujawski"}, "reply_to_user": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1504722509, "post_id": 46081770, "comment_id": 79125892, "body": "@JonSkeet LINQ would work fine as well, I&#39;ve updated the response to include a code sample of that approach."}], "tags": [], "owner": {"reputation": 319, "user_id": 4904297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c9e99e1ea007ee462b12d864c719395?s=128&d=identicon&r=PG&f=1", "display_name": "David Kujawski", "link": "https://stackoverflow.com/users/4904297/david-kujawski"}, "is_accepted": false, "score": 0, "last_activity_date": 1504726042, "last_edit_date": 1504726042, "creation_date": 1504721408, "answer_id": 46081770, "question_id": 46081291, "link": "https://stackoverflow.com/questions/46081291/retrieve-value-from-xml-file-c/46081770#46081770", "title": "Retrieve Value from Xml file C#", "body": "<p>You can use XmlDocument and an XPath statement in the SelectSingleNode method to retrieve this information.  Here is an example:</p>\n\n<pre><code>XmlDocument doc = new XmlDocument();\ndoc.LoadXml(xml);\nvar accept = doc.SelectSingleNode(\"//string[@name='accept']\").InnerText;\nvar actionSettings = doc.SelectSingleNode(\"//string[@name='action_settings']\").InnerText;\nvar appName = doc.SelectSingleNode(\"//string[@name='app_name']\").InnerText;\n</code></pre>\n\n<p>Here is a tutorial on XPath syntax:  <a href=\"https://www.w3schools.com/xml/xpath_syntax.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/xml/xpath_syntax.asp</a></p>\n\n<p>UPDATE: @jon-skeet suggested using LINQ.  Should you choose to do that, your code might look something like:</p>\n\n<pre><code>var element = XElement.Parse(xml);\nvar accept = element.Descendants(\"string\").Where(x =&gt; x.Attribute(\"name\").Value == \"accept\").Select(x =&gt; x.Value).FirstOrDefault();\nvar actionSettings = element.Descendants(\"string\").Where(x =&gt; x.Attribute(\"name\").Value == \"action_settings\").Select(x =&gt; x.Value).FirstOrDefault();\nvar appName = element.Descendants(\"string\").Where(x =&gt; x.Attribute(\"name\").Value == \"app_name\").Select(x =&gt; x.Value).FirstOrDefault();\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6464273, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NAhjG6TYO1c/AAAAAAAAAAI/AAAAAAAAAA8/omNCT5DN0PQ/photo.jpg?sz=128", "display_name": "Kaustubh Patange", "link": "https://stackoverflow.com/users/6464273/kaustubh-patange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 842, "favorite_count": 0, "closed_date": 1504721750, "answer_count": 1, "score": -2, "last_activity_date": 1504726042, "creation_date": 1504719491, "last_edit_date": 1504721716, "question_id": 46081291, "link": "https://stackoverflow.com/questions/46081291/retrieve-value-from-xml-file-c", "closed_reason": "Duplicate", "title": "Retrieve Value from Xml file C#", "body": "<p>I have an XML file which contains following lines </p>\n\n<pre><code>&lt;string name=\"accept\"&gt;Accept&lt;/string&gt;\n&lt;string name=\"action_settings\"&gt;Settings&lt;/string&gt;\n&lt;string name=\"app_name\"&gt;Val&lt;/string&gt;\n</code></pre>\n\n<p>How can I get value of <code>app_name</code> string which is <code>Val</code> in C#. I tried XML parser but it doesn't work.</p>\n"}, {"tags": ["c#", "asp.net", "asp.net-mvc"], "comments": [{"owner": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 0, "creation_date": 1504721025, "post_id": 46081285, "comment_id": 79125110, "body": "I&#39;m guessing the partial is not aware of the expected naming prefixes that are needed to model bind the values back to your model.  What does the rendered HTML look like?  Do the partial fields have a prefix like <code>Devices.DeviceName</code> or just <code>DeviceName</code>?  See: <a href=\"https://stackoverflow.com/questions/20693698/mvc4-partial-view-model-binding-during-submit\" title=\"mvc4 partial view model binding during submit\">stackoverflow.com/questions/20693698/&hellip;</a>"}, {"owner": {"reputation": 3155, "user_id": 1426450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c61b9f354bdea5e67f662c3d6803f2?s=128&d=identicon&r=PG", "display_name": "stephen.vakil", "link": "https://stackoverflow.com/users/1426450/stephen-vakil"}, "edited": false, "score": 0, "creation_date": 1504721451, "post_id": 46081285, "comment_id": 79125331, "body": "Also, there&#39;s a good chance you will have binding issues when using <code>foreach</code> instead of <code>for(var i = 0; i &lt; ...</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3559349"}, "edited": false, "score": 0, "creation_date": 1504737889, "post_id": 46081285, "comment_id": 79132794, "body": "Because you cannot use a partial to generate form controls for a collection property unless you pass the <code>HtmlFieldPrefix</code> - refer <a href=\"https://stackoverflow.com/questions/29808573/getting-the-values-from-a-nested-complex-object-that-is-passed-to-a-partial-view/29809907#29809907\">this answer</a>, but the correct approach is to use an <code>EditorTempate</code> for typeof <code>Devices</code> - refer <a href=\"http://stackoverflow.com/questions/30094047/html-table-to-ado-net-datatable/30094943#30094943\">this answer</a>"}, {"owner": {"reputation": 3, "user_id": 8563949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc7138540c7c63bc2696274a72b6d3f?s=128&d=identicon&r=PG&f=1", "display_name": "ahkmenraha", "link": "https://stackoverflow.com/users/8563949/ahkmenraha"}, "edited": false, "score": 0, "creation_date": 1504775826, "post_id": 46081285, "comment_id": 79146528, "body": "It works :) The good advice was to check what the table looks like after rendering. For example, the column for the selection was &#39;item.Selected&#39;. The first thing I did was to change \u2018IEnumerable\u2019 to \u2018List\u2019 and \u2018foreach\u2019 to \u2018for\u2019 loop. After this change, my table already has a value of &#39;[0] .Selected. Close but not yet working :) When I applied HtmlFieldPrefix all seemed to work (table column looks like Devices[0].Selected, which is correct, but only until I called the \u2018CustomerChanged\u2019 function and then the table again looked like \u2018[0] .Selected\u2019.  To be continued..."}, {"owner": {"reputation": 3, "user_id": 8563949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc7138540c7c63bc2696274a72b6d3f?s=128&d=identicon&r=PG&f=1", "display_name": "ahkmenraha", "link": "https://stackoverflow.com/users/8563949/ahkmenraha"}, "edited": false, "score": 0, "creation_date": 1504775836, "post_id": 46081285, "comment_id": 79146536, "body": "So, I changed the models of partial view on the same as in the main view &#39;TestMVC.ViewModels.FiscalizationViewModel&#39;, while turning off HtmlFieldPrefix because then table looks like Devices.Devices[0].Selected . After that change everything works as I expected. Thank you all very much for good help :)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8563949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc7138540c7c63bc2696274a72b6d3f?s=128&d=identicon&r=PG&f=1", "display_name": "ahkmenraha", "link": "https://stackoverflow.com/users/8563949/ahkmenraha"}, "edited": false, "score": 0, "creation_date": 1504775974, "post_id": 46083818, "comment_id": 79146626, "body": "Thx for help, I implemented your advice and all works as I expected"}, {"owner": {"reputation": 1368, "user_id": 3743442, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FNcij.jpg?s=128&g=1", "display_name": "Hadee", "link": "https://stackoverflow.com/users/3743442/hadee"}, "reply_to_user": {"reputation": 3, "user_id": 8563949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc7138540c7c63bc2696274a72b6d3f?s=128&d=identicon&r=PG&f=1", "display_name": "ahkmenraha", "link": "https://stackoverflow.com/users/8563949/ahkmenraha"}, "edited": false, "score": 0, "creation_date": 1504815194, "post_id": 46083818, "comment_id": 79171616, "body": "So please score!"}, {"owner": {"reputation": 3, "user_id": 8563949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc7138540c7c63bc2696274a72b6d3f?s=128&d=identicon&r=PG&f=1", "display_name": "ahkmenraha", "link": "https://stackoverflow.com/users/8563949/ahkmenraha"}, "edited": false, "score": 0, "creation_date": 1504829385, "post_id": 46083818, "comment_id": 79176526, "body": "&quot;Votes cast by those with less than 15 reputation are recordered, but do not change the publicly displayed score&quot;"}], "tags": [], "owner": {"reputation": 1368, "user_id": 3743442, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FNcij.jpg?s=128&g=1", "display_name": "Hadee", "link": "https://stackoverflow.com/users/3743442/hadee"}, "is_accepted": false, "score": 0, "last_activity_date": 1504729693, "creation_date": 1504729693, "answer_id": 46083818, "question_id": 46081285, "link": "https://stackoverflow.com/questions/46081285/updates-by-partialview-not-affected-to-model/46083818#46083818", "title": "Updates by partialview not affected to model", "body": "<p>Based on my understating from your views, your issues is using different models for main view and partial view. You should use exactly the same model in both the model binding could update the model on server side. keep both models <code>TestMVC.ViewModels.FiscalizationViewModel</code> or <code>IEnumerable&lt;TestMVC.ViewModels.DevicesToFiscalizationViewModel&gt;</code></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3559349"}, "edited": false, "score": 0, "creation_date": 1504779806, "post_id": 46092953, "comment_id": 79149372, "body": "As I noted in previous comments. The correct solution id to use an <code>EditorTemplate</code> which is what its designed for, not hacks like this."}], "tags": [], "owner": {"reputation": 3, "user_id": 8563949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc7138540c7c63bc2696274a72b6d3f?s=128&d=identicon&r=PG&f=1", "display_name": "ahkmenraha", "link": "https://stackoverflow.com/users/8563949/ahkmenraha"}, "is_accepted": false, "score": 0, "last_activity_date": 1504786789, "last_edit_date": 1504786789, "creation_date": 1504777086, "answer_id": 46092953, "question_id": 46081285, "link": "https://stackoverflow.com/questions/46081285/updates-by-partialview-not-affected-to-model/46092953#46092953", "title": "Updates by partialview not affected to model", "body": "<p>It works :) Below I show how it looks after changes</p>\n\n<p>main view:</p>\n\n<pre><code>@model TestMVC.ViewModels.FiscalizationViewModel\n    &lt;div id=\"devicesToFiscalization\"&gt;\n        @Html.Partial(\"~/Views/Fiscalizations/EditorTemplates/DevicesToFiscalizationViewModel.cshtml\", Model)\n    &lt;/div&gt;\n</code></pre>\n\n<p>Partial view:</p>\n\n<pre><code>@model TestMVC.ViewModels.FiscalizationViewModel\n&lt;table class=\"table\"&gt;\n&lt;thead&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\n            Select\n        &lt;/th&gt;\n        &lt;th&gt;\n            Name\n        &lt;/th&gt;\n        &lt;th&gt;\n            Serial number\n        &lt;/th&gt;\n        &lt;th&gt;\n            Localization\n        &lt;/th&gt;\n    &lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n    @for (int i = 0; i &lt; Model.Devices.Count; i++)\n    {\n        &lt;tr&gt;\n            &lt;td style=\"text-align:center\"&gt;\n                &lt;div class=\"checkbox\"&gt;\n                    @Html.EditorFor(m =&gt; m.Devices[i].Selected)\n                &lt;/div&gt;\n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.DisplayFor(m =&gt; m.Devices[i].DeviceName)\n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.DisplayFor(m =&gt; m.Devices[i].SerialNumber)\n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.DropDownListFor(m =&gt; m.Devices[i].LocalizationId, new SelectList(Model.Devices[i].Localizations, \"LocalizationId\", \"Name\"), \"Select\", htmlAttributes: new { @class = \"form-control\", style = \"width: 200px;\" })\n            &lt;/td&gt;\n            &lt;td&gt;\n                @Html.HiddenFor(m =&gt; m.Devices[i].DeviceId)\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    }\n&lt;/tbody&gt;\n</code></pre>\n\n<p></p>\n\n<p>and CustomerChanged method:</p>\n\n<pre><code>    public PartialViewResult CustomerChanged(int CustomerId)\n    {\n        var localizations = db.Localizations.Where(i =&gt; i.CustomerId == CustomerId).ToList();\n        var Devices = (from d in db.Devices\n                       select new DevicesToFiscalizationViewModel()\n                       {\n                           DeviceId = d.DeviceId,\n                           DeviceName = d.Name,\n                           SerialNumber = d.SerialNumber,\n                       }).ToList();\n\n        foreach (var item in Devices)\n        {\n            item.Localizations = localizations;\n        }\n\n        var fsc = new FiscalizationViewModel();\n        fsc.Devices = Devices;\n\n        return PartialView(\"~/Views/Fiscalizations/EditorTemplates/DevicesToFiscalizationViewModel.cshtml\", fsc);\n    }\n</code></pre>\n\n<p>========================================================================</p>\n\n<p>I'm trying to write this using EditorFor but I have a problem with correctly writing the <strong>CustomerChanged</strong> method that returns a list of Devices and not expecting this EditorTemplate that looks as follows:</p>\n\n<pre><code>@model TestMVC.ViewModels.DevicesToFiscalizationViewModel\n\n&lt;tr&gt;\n    &lt;td style=\"text-align:center\"&gt;\n        &lt;div class=\"checkbox\"&gt;\n            @Html.EditorFor(m =&gt; m.Selected)\n        &lt;/div&gt;\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(m =&gt; m.DeviceName)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(m =&gt; m.SerialNumber)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DropDownListFor(m =&gt; m.LocalizationId, new SelectList(Model.Localizations, \"LocalizationId\", \"Name\"), \"Select\", htmlAttributes: new { @class = \"form-control\", style = \"width: 200px;\" })\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.HiddenFor(m =&gt; m.DeviceId)\n    &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>Main View:</p>\n\n<pre><code>    &lt;table class=\"table\" id=\"devicesToFiscalization\"&gt;\n         ...\n        &lt;tbody&gt;\n            @Html.EditorFor(m =&gt; m.Devices)\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8563949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc7138540c7c63bc2696274a72b6d3f?s=128&d=identicon&r=PG&f=1", "display_name": "ahkmenraha", "link": "https://stackoverflow.com/users/8563949/ahkmenraha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1504786789, "creation_date": 1504719471, "question_id": 46081285, "link": "https://stackoverflow.com/questions/46081285/updates-by-partialview-not-affected-to-model", "title": "Updates by partialview not affected to model", "body": "<p>I have a problem with updating ViewModel by PartialView. PartialView includes <strong>Devices</strong> along with the <strong>location</strong> that varies depending on the DropDownList selected by the <strong>Customer</strong>. (At the bottom I present sample screenshot). The problem is that after accepting the submit button the property <strong>Devices</strong> in the ViewModel(FiscalizationViewModel) is not updating. Here are examples of models.  I'm not sure I'm trying to solve this problem properly.</p>\n\n<pre><code>namespace TestMVC.ViewModels\n{\n    public class FiscalizationViewModel\n    {\n        public int CustomerId { get; set; }\n        public string FiscalizationDate { get; set; }\n\n        public List&lt;DevicesToFiscalizationViewModel&gt; Devices { get; set; }\n\n        public FiscalizationViewModel()\n        {\n            Devices = new List&lt;DevicesToFiscalizationViewModel&gt;();\n        }\n\n        public IEnumerable&lt;DevicesToLocalization&gt; GetSelectedIds()\n        {\n            return (from d in Devices where d.Selected select new DevicesToLocalization() { DeviceId = d.DeviceId, LocalizationId = d.LocalizationId }).ToList();\n        }\n    }\n\n    public class DevicesToFiscalizationViewModel\n    {\n        public int DeviceId { get; set; }\n\n        public string DeviceName { get; set; }\n        public bool Selected { get; set; }\n        public string SerialNumber { get; set; }\n\n        public int LocalizationId { get; set; }\n        public IEnumerable&lt;Localization&gt; Localizations { get; set; }\n\n        public DevicesToFiscalizationViewModel()\n        {\n            Localizations = new List&lt;Localization&gt;();\n        }\n    }\n\n}\n</code></pre>\n\n<p>Here is the method that is called by the Customer DropDownList event</p>\n\n<pre><code>public PartialViewResult CustomerChanged(int CustomerId)\n{\n    var localizations = db.Localizations.Where(i =&gt; i.CustomerId == CustomerId).ToList();\n\n    var devicesToFsc = (from d in db.Devices\n                        select new DevicesToFiscalizationViewModel()\n                            {\n                                DeviceId = d.DeviceId,\n                                DeviceName = d.Name,\n                                SerialNumber = d.SerialNumber,\n                            }).ToList();\n    foreach (var item in devicesToFsc)\n    {\n        item.Localizations = localizations;\n    }\n\n    return PartialView(\"~/Views/Fiscalizations/EditorTemplates/DevicesToFiscalizationViewModel.cshtml\", devicesToFsc);\n\n//--------------------------------\n    $(\"#customerChanged\").on(\"change\", function () {\n        $.ajax(\n        {\n            url: '/Fiscalizations/CustomerChanged?CustomerId=' + $(this).val(),\n            type: 'GET',\n            data: \"\",\n            contentType: 'application/json; charset=utf-8',\n            success: function (data) {\n                $(\"#devicesToFiscalization\").html(data);\n            }\n        });\n    });\n</code></pre>\n\n<p>This is little partial of Views (Fiscalization create view)</p>\n\n<pre><code>    @model TestMVC.ViewModels.FiscalizationViewModel\n    &lt;table class=\"table\" id=\"devicesToFiscalization\"&gt;\n        &lt;thead&gt;\n            ...\n        &lt;/thead&gt;\n              @Html.Partial(\"~/Views/Fiscalizations/EditorTemplates/DevicesToFiscalizationViewModel.cshtml\", Model.Devices)\n    &lt;/table&gt;\n</code></pre>\n\n<p>PartialView:</p>\n\n<pre><code>@model IEnumerable&lt;TestMVC.ViewModels.DevicesToFiscalizationViewModel&gt;\n@foreach(var item in Model)\n{ \n&lt;tbody&gt;\n   &lt;tr&gt;\n       &lt;td style=\"text-align:center\"&gt;\n        &lt;div class=\"checkbox\"&gt;\n            @Html.EditorFor(m =&gt; item.Selected)\n        &lt;/div&gt;\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(m =&gt; item.DeviceName)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DisplayFor(m =&gt; item.SerialNumber)\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.DropDownList(\"LocalizationId\", new SelectList(item.Localizations, \"LocalizationId\", \"Name\"), \"Select\", htmlAttributes: new { @class = \"form-control\", style = \"width: 200px;\" })\n    &lt;/td&gt;\n    &lt;td&gt;\n        @Html.HiddenFor(m =&gt; item.DeviceId)\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>Here is a screenshot of how it looks\n<a href=\"https://i.stack.imgur.com/Y4ZX1.jpg\" rel=\"nofollow noreferrer\">click</a>\nand here is screenshot from debugger with bad result\n<a href=\"https://i.stack.imgur.com/KzTfE.jpg\" rel=\"nofollow noreferrer\">bad</a></p>\n"}, {"tags": ["c#", "asp.net-core", "azure-active-directory"], "comments": [{"owner": {"reputation": 678, "user_id": 4117844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0102a09cb742ca0aef2e7f74f8cc61c7?s=128&d=identicon&r=PG", "display_name": "Ben Temple-Heald", "link": "https://stackoverflow.com/users/4117844/ben-temple-heald"}, "edited": false, "score": 0, "creation_date": 1504778697, "post_id": 46081209, "comment_id": 79148638, "body": "Have exactly the same issue."}, {"owner": {"reputation": 4797, "user_id": 250094, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/49d80e4d995467c5c00f1300db855698?s=128&d=identicon&r=PG", "display_name": "Alex Dresko", "link": "https://stackoverflow.com/users/250094/alex-dresko"}, "edited": false, "score": 0, "creation_date": 1504839376, "post_id": 46081209, "comment_id": 79178673, "body": "Looking at the same error, myself."}], "answers": [{"comments": [{"owner": {"reputation": 2895, "user_id": 902920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7284ea76f92c85618b8d597d277493a?s=128&d=identicon&r=PG", "display_name": "GlennSills", "link": "https://stackoverflow.com/users/902920/glennsills"}, "edited": false, "score": 1, "creation_date": 1504871202, "post_id": 46108023, "comment_id": 79193513, "body": "It seems to me that you simply disabled token validation. I don&#39;t want to use tokens that haven&#39;t been validated for fear that people will provide counterfeit tokens."}, {"owner": {"reputation": 4797, "user_id": 250094, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/49d80e4d995467c5c00f1300db855698?s=128&d=identicon&r=PG", "display_name": "Alex Dresko", "link": "https://stackoverflow.com/users/250094/alex-dresko"}, "reply_to_user": {"reputation": 2895, "user_id": 902920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7284ea76f92c85618b8d597d277493a?s=128&d=identicon&r=PG", "display_name": "GlennSills", "link": "https://stackoverflow.com/users/902920/glennsills"}, "edited": false, "score": 0, "creation_date": 1504875803, "post_id": 46108023, "comment_id": 79196528, "body": "That&#39;s not necessarily the point. Ultimately, I started validating tokens. It&#39;s the fact that IssuerSigningKey wasn&#39;t set that was causing me problems."}], "tags": [], "owner": {"reputation": 4797, "user_id": 250094, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/49d80e4d995467c5c00f1300db855698?s=128&d=identicon&r=PG", "display_name": "Alex Dresko", "link": "https://stackoverflow.com/users/250094/alex-dresko"}, "is_accepted": false, "score": 0, "last_activity_date": 1504839990, "creation_date": 1504839990, "answer_id": 46108023, "question_id": 46081209, "link": "https://stackoverflow.com/questions/46081209/azure-ad-jwt-bearer-token/46108023#46108023", "title": "Azure AD Jwt Bearer token", "body": "<p>Well, I just fixed this in my code, although I'm still learning how all of this new stuff works. For me, I had to set <code>IssuerSigningKey</code> even though <code>ValidateIssuerSigningKey</code> was set to <code>false</code>. I don't know if any specific value is required, but I set mine to the same value I used when I signed the JWT token. </p>\n\n<pre><code>options.TokenValidationParameters = new TokenValidationParameters\n{\n    ValidateAudience = false,\n    ValidateLifetime = false,\n    ValidateIssuer = false,\n    ValidateIssuerSigningKey = false,\n    IssuerSigningKey = new SymmetricSecurityKey(Encoding.ASCII.GetBytes(\"this is super secret\")),\n    ValidateActor = false\n};\n</code></pre>\n"}], "owner": {"reputation": 2895, "user_id": 902920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f7284ea76f92c85618b8d597d277493a?s=128&d=identicon&r=PG", "display_name": "GlennSills", "link": "https://stackoverflow.com/users/902920/glennsills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5053, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1525965205, "creation_date": 1504719150, "last_edit_date": 1525965205, "question_id": 46081209, "link": "https://stackoverflow.com/questions/46081209/azure-ad-jwt-bearer-token", "title": "Azure AD Jwt Bearer token", "body": "<p>I am attempting to build an application with a SPA UI and a web API that uses Jwt Bearer tokens for access control. I can authenticate the user and send the bearer token to the web request,but when I do so I get the following error</p>\n\n<blockquote>\n  <p>Bearer was not authenticated. Failure message: IDX10500: Signature\n  validation failed. No security keys were provided to validate the\n  signature.</p>\n</blockquote>\n\n<p>I want to the middleware to use the key set found in at </p>\n\n<p><a href=\"https://login.microsoftonline.com/common/discovery/keys\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/common/discovery/keys</a></p>\n\n<p>but I am clearly missing something. Below is the snippet of code in my startup to configure the bearer token. Can someone point out where I am going wrong?</p>\n\n<pre><code>    var clientId = Configuration[\"AzureAd:ClientId\"];\n    var tenantId = Configuration[\"AzureAd:TenantId\"];\n    var issuer = $\"https://sts.windows.net/{tenantId}/\";\n\n    services.AddAuthentication(options =&gt;\n    {\n       options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n       options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n     })\n      .AddJwtBearer(options =&gt;\n      {\n        options.RequireHttpsMetadata = false;\n        options.SaveToken = true;\n        options.Authority = \"https://login.microsoftonline.com/common/\";\n\n        options.TokenValidationParameters = new TokenValidationParameters()\n        {\n            ValidateIssuer = true,\n            ValidIssuer = issuer,\n            ValidateAudience = true,\n            ValidAudiences = new string[] { clientId },\n            ValidateLifetime = true\n        };\n      });\n</code></pre>\n"}, {"tags": ["c#", ".net", "registry", "windows-7-x64"], "comments": [{"owner": {"reputation": 19184, "user_id": 3261150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0821e1dca957dda1214f1d273a08e161?s=128&d=identicon&r=PG&f=1", "display_name": "PhilDW", "link": "https://stackoverflow.com/users/3261150/phildw"}, "edited": false, "score": 0, "creation_date": 1504721296, "post_id": 46081132, "comment_id": 79125257, "body": "This seems to be tagged incorrectly; The WiX tag is for the tool that builds Windows Installer MSI files."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1504737137, "post_id": 46081132, "comment_id": 79132556, "body": "<code>HKEY_CURRENT_USER</code> is just an alias for <code>HKEY_USERS\\&lt;sid&gt;</code>"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1504737819, "post_id": 46081132, "comment_id": 79132765, "body": "Also note that the key you&#39;re opening doesn&#39;t have separate 32-bit and 64-bit views, so there&#39;s no need to go to all that trouble, you can just access it directly.  We need a clearer problem statement.  What <i>exactly</i> goes wrong?"}, {"owner": {"reputation": 11, "user_id": 5417669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tw_8t6cF5Zk/AAAAAAAAAAI/AAAAAAAAGrg/F5pADX2BsrM/photo.jpg?sz=128", "display_name": "Suja Eeshan", "link": "https://stackoverflow.com/users/5417669/suja-eeshan"}, "edited": false, "score": 0, "creation_date": 1504739456, "post_id": 46081132, "comment_id": 79133206, "body": "The key for the following path is always NULL Registry.CurrentUser.OpenSubKey(@&quot;SOFTWARE\\Microsoft\\Office\\&zwnj;&#8203;11.0\\Excel\\Security\\&zwnj;&#8203;Trusted Locations&quot;, true) since it always returns the key HKEY_USERS.                                                                                    When i open the registry the following path exists Registry.CurrentUser.OpenSubKey(@&quot;SOFTWARE\\Microsoft\\Office\\&zwnj;&#8203;11.0\\Excel\\Security\\&zwnj;&#8203;Trusted Locations&quot;, true) but always returns as NULL while accessing from x86 application."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1504741022, "post_id": 46081132, "comment_id": 79133570, "body": "What <i>exactly</i> do you mean &quot;always returns the key HKEY_USERS&quot; ?  <i>What</i> always returns HKEY_USERS?  How can the key be NULL and HKEY_USERS at the same time?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1504741232, "post_id": 46081132, "comment_id": 79133611, "body": "Does the problem only occur when your code is run from WiX?  Are you sure it is running in the correct user context, and not, e.g., as local system or trusted user?"}, {"owner": {"reputation": 11, "user_id": 5417669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tw_8t6cF5Zk/AAAAAAAAAAI/AAAAAAAAGrg/F5pADX2BsrM/photo.jpg?sz=128", "display_name": "Suja Eeshan", "link": "https://stackoverflow.com/users/5417669/suja-eeshan"}, "edited": false, "score": 0, "creation_date": 1504795927, "post_id": 46081132, "comment_id": 79161082, "body": "I created a sample x86 application which has the target framework as x86 and it works fine. I can get the path(RegistryKey reg2016Key = var.OpenSubKey(@&quot;SOFTWARE\\Microsoft\\Office\\16.0\\Excel&quot;,Regis&zwnj;&#8203;tryKeyPermissionChec&zwnj;&#8203;k.ReadSubTree)) from the current user. But when i call the same method through x86 Wix Custom action, it return NULL value when i access same the key. I noticed that it is looking into HKEY_USERS node in the registry not HKEY_CURRENT_USER. This problem is occurring only through the Wix installer Custom Action."}, {"owner": {"reputation": 11, "user_id": 5417669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tw_8t6cF5Zk/AAAAAAAAAAI/AAAAAAAAGrg/F5pADX2BsrM/photo.jpg?sz=128", "display_name": "Suja Eeshan", "link": "https://stackoverflow.com/users/5417669/suja-eeshan"}, "edited": false, "score": 0, "creation_date": 1504800814, "post_id": 46081132, "comment_id": 79164436, "body": "I am running Wix source code as Administrator."}], "owner": {"reputation": 11, "user_id": 5417669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tw_8t6cF5Zk/AAAAAAAAAAI/AAAAAAAAGrg/F5pADX2BsrM/photo.jpg?sz=128", "display_name": "Suja Eeshan", "link": "https://stackoverflow.com/users/5417669/suja-eeshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1504729851, "creation_date": 1504718857, "last_edit_date": 1504729851, "question_id": 46081132, "link": "https://stackoverflow.com/questions/46081132/when-i-call-64-bit-registry-hkey-current-user-from-x86-application-returns-hkey", "title": "When I call 64-bit registry HKEY_CURRENT_USER from x86 application returns HKEY_USERS", "body": "<p>I am trying to access <code>HKEY_CURRENT_USER</code> from 64 bit registry for the following location <code>@\"SOFTWARE\\Microsoft\\Office\\16.0\\Excel\"</code> using x86 built wix application through C# .net code. But it always rerun the key <code>HKEY_USERS</code> where i don't find the Excel key under Office\\16.0. \n<code>HKEY_USERS</code> has only one subkey under office/16.0 is Outlook. First of all i am not looking into HKEY_USERS all i want to access <code>HKEY_CURRENT_USER</code></p>\n\n<p>My requirement is to add the application path under Trusted Locations of Excel in <code>HKEY_CURRENT_USER</code>.\nMy system specification is Windows 7 64 bit. The Wix application is built under the target framework x86.</p>\n\n<p>I see the key <code>HKEY_LOCAL_MACHINE</code> but not <code>HKEY_CURRENT_USER</code>. I have tried the below options but it always returns <code>HKEY USERS</code> key.</p>\n\n<p>1.</p>\n\n<pre><code>RegistryKey var = RegistryKey.OpenBaseKey(RegistryHive.CurrentUser, RegistryView.Registry64);\n\nRegistryKey reg2016Key = var.OpenSubKey(@\"SOFTWARE\\Microsoft\\Office\\16.0\\Excel\",RegistryKeyPermissionCheck.ReadSubTree)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>RegistryKey var = RegistryKey.OpenBaseKey(RegistryHive.CurrentUser, RegistryView.Registry32);\n\nRegistryKey reg2016Key = var.OpenSubKey(@\"SOFTWARE\\Microsoft\\Office\\16.0\\Excel\",RegistryKeyPermissionCheck.ReadSubTree)\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>public static class RegistryExtensions\n{\n\n    public enum RegistryHiveType\n    {\n        X86,\n        X64\n    }\n\n    static Dictionary&lt;RegistryHive, UIntPtr&gt; _hiveKeys = new Dictionary&lt;RegistryHive, UIntPtr&gt; {\n    { RegistryHive.ClassesRoot, new UIntPtr(0x80000000u) },\n    { RegistryHive.CurrentConfig, new UIntPtr(0x80000005u) },\n    { RegistryHive.CurrentUser, new UIntPtr(0x80000001u) },\n    { RegistryHive.DynData, new UIntPtr(0x80000006u) },\n    { RegistryHive.LocalMachine, new UIntPtr(0x80000002u) },\n    { RegistryHive.PerformanceData, new UIntPtr(0x80000004u) },\n    { RegistryHive.Users, new UIntPtr(0x80000003u) }\n};\n\n    static Dictionary&lt;RegistryHiveType, RegistryAccessMask&gt; _accessMasks = new Dictionary&lt;RegistryHiveType, RegistryAccessMask&gt; {\n    { RegistryHiveType.X64, RegistryAccessMask.Wow6464 },\n    { RegistryHiveType.X86, RegistryAccessMask.WoW6432 }\n};\n\n    [Flags]\n    public enum RegistryAccessMask\n    {\n        QueryValue = 0x0001,\n        SetValue = 0x0002,\n        CreateSubKey = 0x0004,\n        EnumerateSubKeys = 0x0008,\n        Notify = 0x0010,\n        CreateLink = 0x0020,\n        WoW6432 = 0x0200,\n        Wow6464 = 0x0100,\n        Write = 0x20006,\n        Read = 0x20019,\n        Execute = 0x20019,\n        AllAccess = 0xF003F\n    }\n\n    [DllImport(\"advapi32.dll\", CharSet = CharSet.Auto)]\n    public static extern int RegOpenKeyEx(\n      UIntPtr hKey,\n      string subKey,\n      uint ulOptions,\n      uint samDesired,\n      out IntPtr hkResult);\n\n    public static RegistryKey OpenBaseKey(RegistryHive registryHive, RegistryHiveType registryType)\n    {\n        UIntPtr hiveKey = _hiveKeys[registryHive];\n        if (Environment.OSVersion.Platform == PlatformID.Win32NT &amp;&amp; Environment.OSVersion.Version.Major &gt; 5)\n        {\n            RegistryAccessMask flags = RegistryAccessMask.QueryValue | RegistryAccessMask.EnumerateSubKeys | RegistryAccessMask.SetValue | RegistryAccessMask.CreateSubKey | _accessMasks[registryType];\n            IntPtr keyHandlePointer = IntPtr.Zero;\n            int result = RegOpenKeyEx(hiveKey, String.Empty, 0, (uint)flags, out keyHandlePointer);\n            if (result == 0)\n            {\n                var safeRegistryHandleType = typeof(SafeHandleZeroOrMinusOneIsInvalid).Assembly.GetType(\"Microsoft.Win32.SafeHandles.SafeRegistryHandle\");\n                var safeRegistryHandleConstructor = safeRegistryHandleType.GetConstructor(BindingFlags.Instance | BindingFlags.NonPublic, null, new[] { typeof(IntPtr), typeof(bool) }, null); // .NET &lt; 4\n                if (safeRegistryHandleConstructor == null)\n                    safeRegistryHandleConstructor = safeRegistryHandleType.GetConstructor(BindingFlags.Instance | BindingFlags.Public, null, new[] { typeof(IntPtr), typeof(bool) }, null); // .NET &gt;= 4\n                var keyHandle = safeRegistryHandleConstructor.Invoke(new object[] { keyHandlePointer, true });\n                var net3Constructor = typeof(RegistryKey).GetConstructor(BindingFlags.Instance | BindingFlags.NonPublic, null, new[] { safeRegistryHandleType, typeof(bool) }, null);\n                var net4Constructor = typeof(RegistryKey).GetConstructor(BindingFlags.Instance | BindingFlags.NonPublic, null, new[] { typeof(IntPtr), typeof(bool), typeof(bool), typeof(bool), typeof(bool) }, null);\n                object key;\n                if (net4Constructor != null)\n                    key = net4Constructor.Invoke(new object[] { keyHandlePointer, true, false, false, hiveKey == _hiveKeys[RegistryHive.PerformanceData] });\n                else if (net3Constructor != null)\n                    key = net3Constructor.Invoke(new object[] { keyHandle, true });\n                else\n                {\n                    var keyFromHandleMethod = typeof(RegistryKey).GetMethod(\"FromHandle\", BindingFlags.Static | BindingFlags.Public, null, new[] { safeRegistryHandleType }, null);\n                    key = keyFromHandleMethod.Invoke(null, new object[] { keyHandle });\n                }\n                var field = typeof(RegistryKey).GetField(\"keyName\", BindingFlags.Instance | BindingFlags.NonPublic);\n                if (field != null)\n                    field.SetValue(key, String.Empty);\n                return (RegistryKey)key;\n            }\n            else if (result == 2) // The key does not exist.\n                return null;\n            throw new Win32Exception(result);\n        }\n        throw new PlatformNotSupportedException(\"The platform or operating system must be Windows 2000 or later.\");\n    }\n}\n</code></pre>\n\n<p>Example Usage:</p>\n\n<pre><code>var key64 = RegistryExtensions.OpenBaseKey(RegistryHive.CurrentUser, RegistryExtensions.RegistryHiveType.X64);\n\nRegistryKey reg2016Key  = key64.OpenSubKey(@\"SOFTWARE\\Microsoft\\Office\\16.0\\Excel\",RegistryKeyPermissionCheck.ReadSubTree)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var keyX86 = RegistryExtensions.OpenBaseKey(RegistryHive.CurrentUser, RegistryExtensions.RegistryHiveType.X86);\n\nRegistryKey reg2016Key  = keyX86 .OpenSubKey(@\"SOFTWARE\\Microsoft\\Office\\16.0\\Excel\",RegistryKeyPermissionCheck.ReadSubTree)\n</code></pre>\n"}, {"tags": ["c#", ".net", "garbage-collection", "clr"], "comments": [{"owner": {"reputation": 2574, "user_id": 274204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3LYJr.png?s=128&g=1", "display_name": "Brian Reichle", "link": "https://stackoverflow.com/users/274204/brian-reichle"}, "edited": false, "score": 1, "creation_date": 1504736379, "post_id": 46081079, "comment_id": 79132349, "body": "The only way to get a list of gen 0 objects is through either the debugger or profiler apis, you can&#39;t get it through reflection. If you want help solving the actual issue, you will need to provide a lot more information about the error and the code that triggers it."}, {"owner": {"reputation": 1, "user_id": 6762407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/28f8ed129a4f4fff4a868f0796063852?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Pendleton", "link": "https://stackoverflow.com/users/6762407/nick-pendleton"}, "reply_to_user": {"reputation": 2574, "user_id": 274204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3LYJr.png?s=128&g=1", "display_name": "Brian Reichle", "link": "https://stackoverflow.com/users/274204/brian-reichle"}, "edited": false, "score": 0, "creation_date": 1504737236, "post_id": 46081079, "comment_id": 79132593, "body": "I&#39;m not particularly looking for help fixing the actual problem. I have ideas of what it is, it&#39;s just finding it. I&#39;ll look into other profilers to see if I can figure out how to do this. If I find a solution that doesn&#39;t prevent this bug from happening, I&#39;ll comment on it."}, {"owner": {"reputation": 1, "user_id": 6762407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/28f8ed129a4f4fff4a868f0796063852?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Pendleton", "link": "https://stackoverflow.com/users/6762407/nick-pendleton"}, "reply_to_user": {"reputation": 2574, "user_id": 274204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3LYJr.png?s=128&g=1", "display_name": "Brian Reichle", "link": "https://stackoverflow.com/users/274204/brian-reichle"}, "edited": false, "score": 0, "creation_date": 1504737253, "post_id": 46081079, "comment_id": 79132596, "body": "Also, downvote...for what reason? It&#39;s totally a valid question."}, {"owner": {"reputation": 2574, "user_id": 274204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3LYJr.png?s=128&g=1", "display_name": "Brian Reichle", "link": "https://stackoverflow.com/users/274204/brian-reichle"}, "edited": false, "score": 1, "creation_date": 1504758992, "post_id": 46081079, "comment_id": 79137532, "body": "I didn&#39;t cast that down vote, but my guess is they thought you wanted help solving the bug and down-voted for the lack of detail."}], "answers": [{"tags": [], "owner": {"reputation": 2057, "user_id": 779822, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/61669e7babeb3462925c5977b9f99a8d?s=128&d=identicon&r=PG", "display_name": "Ed.ward", "link": "https://stackoverflow.com/users/779822/ed-ward"}, "is_accepted": false, "score": 0, "last_activity_date": 1506456850, "creation_date": 1506456850, "answer_id": 46435038, "question_id": 46081079, "link": "https://stackoverflow.com/questions/46081079/getting-a-list-of-objects-in-gen-0-marked-for-gc/46435038#46435038", "title": "Getting a list of objects in gen 0 marked for GC", "body": "<p>There is no such thing as objects \"marked for GC\". Once GC occurred garbage collector traverses a graph of objects and deletes all objects which can't be reached from GC roots and compacts heaps. There are some details about finalizers and large objects heap in .NET before v.4, but overall GC works in that way.</p>\n"}], "owner": {"reputation": 1, "user_id": 6762407, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/28f8ed129a4f4fff4a868f0796063852?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Pendleton", "link": "https://stackoverflow.com/users/6762407/nick-pendleton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1506456850, "creation_date": 1504718632, "question_id": 46081079, "link": "https://stackoverflow.com/questions/46081079/getting-a-list-of-objects-in-gen-0-marked-for-gc", "title": "Getting a list of objects in gen 0 marked for GC", "body": "<p>I'm trying to debug memory issues in my ASP .NET application. For reasons (10+ year old reasons), this <code>WebMethod</code> goes from managed, to unsafe, to external c++ code through <code>DllImport</code>. Pinging this endpoint with the same query multiple times yields successful results 90% of the time, but every now and then it fails. It always seems to fail after GC occurs SOMETIMES. Meaning sometimes it succeeds after GC happens, sometimes it fails. Calling <code>GC.Collect(0)</code> at any point in the managed or unmanaged code seems to stop this bug from occurring. Can't do that, though.</p>\n\n<p>I have tried attaching memory profilers to get an idea of how this thing is acting. Unfortunately when I start a profiling session, the error stops happening. Schrodinger's bug.</p>\n\n<p>The only idea I'm left with is to log to disk each query every object (type and mem location) marked for GC in gen 0 and compare the differences between successful GCs and unsuccessful GCs. Unfortunately, I can't find a way to do this anywhere in Microsoft's docs or online. I'm sure this is possible, but probably requires some weird reflection stuff? I don't know.</p>\n\n<p>Anyone know how this is accomplished? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c#", "sqlite", "dbnull"], "comments": [{"owner": {"reputation": 1065, "user_id": 1572683, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/905aaf23b902a09d801f304735703105?s=128&d=identicon&r=PG", "display_name": "rraszewski", "link": "https://stackoverflow.com/users/1572683/rraszewski"}, "edited": false, "score": 0, "creation_date": 1504718988, "post_id": 46081077, "comment_id": 79123940, "body": "<code>int? stateFIPS = (Convert.IsDBNull(reader.GetValue(1)) ? 0 : Convert.ToInt32(reader.GetValue(1)));</code> will never return null value, because you return 0 as a default value. Please check if your additional rows have all int values set to 0;"}, {"owner": {"reputation": 1065, "user_id": 1572683, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/905aaf23b902a09d801f304735703105?s=128&d=identicon&r=PG", "display_name": "rraszewski", "link": "https://stackoverflow.com/users/1572683/rraszewski"}, "edited": false, "score": 0, "creation_date": 1504719039, "post_id": 46081077, "comment_id": 79123966, "body": "2nd thing: <code>StateFIPS = Convert.ToInt32(stateFIPS)</code> there is no need to convert int (which is Int32) to Int32"}, {"owner": {"reputation": 579, "user_id": 2177032, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ixJ9g.jpg?s=128&g=1", "display_name": "Nell Martinez", "link": "https://stackoverflow.com/users/2177032/nell-martinez"}, "reply_to_user": {"reputation": 1065, "user_id": 1572683, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/905aaf23b902a09d801f304735703105?s=128&d=identicon&r=PG", "display_name": "rraszewski", "link": "https://stackoverflow.com/users/1572683/rraszewski"}, "edited": false, "score": 0, "creation_date": 1504719985, "post_id": 46081077, "comment_id": 79124518, "body": "If you read correctly; it says that I had to do that in order to make it work...My main question is why I&#39;m retrieving &quot;\\n&quot; if there is no value like that in the database."}, {"owner": {"reputation": 1065, "user_id": 1572683, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/905aaf23b902a09d801f304735703105?s=128&d=identicon&r=PG", "display_name": "rraszewski", "link": "https://stackoverflow.com/users/1572683/rraszewski"}, "edited": false, "score": 0, "creation_date": 1504722289, "post_id": 46081077, "comment_id": 79125786, "body": "Have you checked with SQLiteStudio that your DB contains 7,332 rows? And I am not asking how many rows you have in your csv file, but rather how many entries your DB contains. I am assuming that there might be error with importing / structure of your csv file."}, {"owner": {"reputation": 579, "user_id": 2177032, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ixJ9g.jpg?s=128&g=1", "display_name": "Nell Martinez", "link": "https://stackoverflow.com/users/2177032/nell-martinez"}, "reply_to_user": {"reputation": 1065, "user_id": 1572683, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/905aaf23b902a09d801f304735703105?s=128&d=identicon&r=PG", "display_name": "rraszewski", "link": "https://stackoverflow.com/users/1572683/rraszewski"}, "edited": false, "score": 0, "creation_date": 1504722334, "post_id": 46081077, "comment_id": 79125806, "body": "Yes. It matches...what I&#39;m thinking is that special characters might be at fault here? And if so; how do I fix having commas in my name value and other special characters?"}, {"owner": {"reputation": 10220, "user_id": 70104, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/859c44ae8a94cf8def8a9728369fcd2e?s=128&d=identicon&r=PG", "display_name": "Chris Dunaway", "link": "https://stackoverflow.com/users/70104/chris-dunaway"}, "edited": false, "score": 0, "creation_date": 1504732594, "post_id": 46081077, "comment_id": 79130936, "body": "Is Name the first field in each line in the CSV?  Does each line in your csv end with both a carriage return (\\r) and a linefeed (\\n)?  Perhaps the import is only considering the carriage return as the line delimiter and including the linefeed as part of the first field in the next line?"}], "owner": {"reputation": 579, "user_id": 2177032, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ixJ9g.jpg?s=128&g=1", "display_name": "Nell Martinez", "link": "https://stackoverflow.com/users/2177032/nell-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504718622, "creation_date": 1504718622, "question_id": 46081077, "link": "https://stackoverflow.com/questions/46081077/why-im-retrieving-null-values-and-new-line-characters-from-sqlite-database", "title": "Why I&#39;m retrieving null values and new line characters from SQLite database?", "body": "<p>I imported a dataset from a CSV file into a SQLite database 3.1.1. I'm managing that database through SQLiteStudio. I'm suppose to retrieve 7,332 values at runtime in my C# code; not the 7,340 values I'm retrieving. </p>\n\n<p><strong>Problem:</strong></p>\n\n<p>I'm checking every row to see if the value being return is null. <strong>However, there are no null values in the dataset or any empty rows.</strong> I'm retrieving more rows than expected 7,340 rows versus 7,332 from the dataset. I'm also retrieving a row that in the column 'NAME' contains this value: <strong>\"\\n\".</strong>.  </p>\n\n<p>The code works fine; however where does this \"\\n\" value comes from? Why it is messing up my data with null values and with \"\\n\" values?</p>\n\n<p><strong>Solution Expected</strong> </p>\n\n<p>The original code didn't have to check for nulls with the old dataset, as again; the data does not contain null values. Now that I imported a new dataset I'm having this problem. How can I get rid of the null values when retrieving and reading the data through the ExecuteReader()?</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>   using (SQLiteConnection conn = new SQLiteConnection(ConnectionString))\n        {\n            conn.Open();\n            using (SQLiteCommand cmd = conn.CreateCommand())\n            {\n                cmd.CommandText = \"SELECT NAME, STATE_FIPS, COUNTY_FIPS, BEDS, ICU_BEDS FROM Hospitals\";\n                using (SQLiteDataReader reader = cmd.ExecuteReader())\n                {\n\n                    while (reader.Read())\n                    {\n                        string name = Convert.ToString(reader.GetString(0));\n                        int? stateFIPS = (Convert.IsDBNull(reader.GetValue(1)) ? 0 : Convert.ToInt32(reader.GetValue(1)));\n                        int? countyFIPS = (Convert.IsDBNull(reader.GetValue(2)) ? 0 : Convert.ToInt32(reader.GetValue(2)));\n                        int? numBeds = (Convert.IsDBNull(reader.GetValue(3)) ? 0 : Convert.ToInt32(reader.GetValue(3)));\n                        int? numICUBeds = (Convert.IsDBNull(reader.GetValue(4)) ? 0 : Convert.ToInt32(reader.GetValue(4)));\n\n                        hospitals.Add(new Hospital()\n                        {\n                            Name = reader.GetString(0),\n                            StateFIPS = Convert.ToInt32(stateFIPS),\n                            CountyFIPS = Convert.ToInt32(countyFIPS),\n                            NumBeds = Convert.ToInt32(numBeds),\n                            NumICUBeds = Convert.ToInt32(numICUBeds),\n\n                        });\n\n                    }\n                    reader.Close();\n                }\n            }\n            conn.Close();\n</code></pre>\n\n<p><strong>How I'm managing the import from SQLite</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/GPqwA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GPqwA.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c#", "linq"], "comments": [{"owner": {"reputation": 15033, "user_id": 215741, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/523632d546a902405b674284d0a2cee9?s=128&d=identicon&r=PG", "display_name": "code4life", "link": "https://stackoverflow.com/users/215741/code4life"}, "edited": false, "score": 0, "creation_date": 1504719138, "post_id": 46081032, "comment_id": 79124019, "body": "You need to use <code>SelectMany</code> on the outermost <code>.Select</code> statement."}, {"owner": {"reputation": 1553, "user_id": 6443307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pguLy.gif?s=128&g=1", "display_name": "wablab", "link": "https://stackoverflow.com/users/6443307/wablab"}, "edited": false, "score": 2, "creation_date": 1504719743, "post_id": 46081032, "comment_id": 79124366, "body": "Not quite an answer to your original question, but one &#39;cooler&#39; way to do it is to use <code>ReadLines</code> instead of <code>ReadAllLines</code> so as to avoid the allocation of a potentially large (and unnecessary) array of strings."}], "answers": [{"tags": [], "owner": {"reputation": 35506, "user_id": 424129, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/067763e25885a77061483ece2443c527?s=128&d=identicon&r=PG&f=1", "display_name": "15ee8f99-57ff-4f92-890c-b56153", "link": "https://stackoverflow.com/users/424129/15ee8f99-57ff-4f92-890c-b56153"}, "is_accepted": true, "score": 1, "last_activity_date": 1504791422, "last_edit_date": 1504791422, "creation_date": 1504718657, "answer_id": 46081086, "question_id": 46081032, "link": "https://stackoverflow.com/questions/46081032/is-there-single-line-linq-way-to-do-this/46081086#46081086", "title": "Is there single-line LINQ way to do this?", "body": "<p>\"Cooler\" is about as opinion-based as it gets, but you can't argue that this isn't LINQ, or that it has more than one semicolon. </p>\n\n<pre><code>var items =\n    from line in File.ReadAllLines(myfile)\n    let arr = line.Split(new char[] { '|' })\n    select new Item(arr[0], arr[1]);\n</code></pre>\n\n<p><a href=\"https://dotnetfiddle.net/uBq3L1\" rel=\"nofollow noreferrer\">Here's a filddle demonstrating the above code</a>. <a href=\"https://msdn.microsoft.com/en-us/library/s2tte0y1(v=vs.110).aspx\" rel=\"nofollow noreferrer\"><code>System.IO.File.ReadAllLines(string path)</code></a> returns <code>string[]</code> -- an array of lines from the file. </p>\n"}, {"comments": [{"owner": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "edited": false, "score": 2, "creation_date": 1504718919, "post_id": 46081093, "comment_id": 79123908, "body": "<code>char</code> is superfluous - <code>new[] { &#39;|&#39; }</code> is enough."}, {"owner": {"reputation": 29989, "user_id": 302918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bcc0c35cdf5199daf005566c2a921a0d?s=128&d=identicon&r=PG", "display_name": "juharr", "link": "https://stackoverflow.com/users/302918/juharr"}, "reply_to_user": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "edited": false, "score": 1, "creation_date": 1504720125, "post_id": 46081093, "comment_id": 79124596, "body": "@BartoszKP So is the <code>new[]</code> since <code>Split</code> takes <code>params</code> it can just be <code>Split(&#39;|&#39;)</code>"}], "tags": [], "owner": {"reputation": 1122, "user_id": 5885500, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205953414690868/picture?type=large", "display_name": "Aaron Roberts", "link": "https://stackoverflow.com/users/5885500/aaron-roberts"}, "is_accepted": false, "score": 6, "last_activity_date": 1504719070, "last_edit_date": 1504719070, "creation_date": 1504718701, "answer_id": 46081093, "question_id": 46081032, "link": "https://stackoverflow.com/questions/46081032/is-there-single-line-linq-way-to-do-this/46081093#46081093", "title": "Is there single-line LINQ way to do this?", "body": "<p>You can chain multiple selects together.</p>\n\n<pre><code>File.ReadAllLines(...)\n    .Select(line =&gt; line.Split(new [] { '|' }))\n    .Select(arr =&gt; new Item(arr[0], arr[1]))\n</code></pre>\n\n<p>One thing i do for this type of work as well is to create helper methods that you can use as Method Groups if this type of functionality is going to be reused.</p>\n\n<pre><code>public class Item {\n    ...\n    public static Item FromPipeDelimitedText(string text) {\n        var arr = text.Split(new [] { '|' };\n        return new Item(arr[0], arr[1]);\n    }\n}\n</code></pre>\n\n<p>then</p>\n\n<pre><code>File.ReadAllLines(...).Select(Item.FromPipeDelimitedText);\n</code></pre>\n\n<p>with this method the functionality that extracts the data from the file can be tested independently</p>\n"}, {"tags": [], "owner": {"reputation": 6496, "user_id": 4190402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q82KR.jpg?s=128&g=1", "display_name": "JuanR", "link": "https://stackoverflow.com/users/4190402/juanr"}, "is_accepted": false, "score": 1, "last_activity_date": 1504719336, "last_edit_date": 1504719336, "creation_date": 1504718751, "answer_id": 46081107, "question_id": 46081032, "link": "https://stackoverflow.com/questions/46081032/is-there-single-line-linq-way-to-do-this/46081107#46081107", "title": "Is there single-line LINQ way to do this?", "body": "<p>You can always do this:</p>\n\n<pre><code>File.ReadAllLines(someFileName)\n    .Select(x =&gt; x.Split('|'))\n    .Select(a =&gt; new Item(a[0], a[1]));\n</code></pre>\n\n<p>This however assumes that the line <strong>always</strong> splits in [at least] two, which from personal experience is not easily error-handled.</p>\n\n<p>I would suggest avoiding a single-line approach unless you are absolutely sure there will be no problem lines or use a function delegate to manage the instantiation and error handling.</p>\n"}, {"tags": [], "owner": {"reputation": 15033, "user_id": 215741, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/523632d546a902405b674284d0a2cee9?s=128&d=identicon&r=PG", "display_name": "code4life", "link": "https://stackoverflow.com/users/215741/code4life"}, "is_accepted": false, "score": 0, "last_activity_date": 1504719185, "creation_date": 1504719185, "answer_id": 46081216, "question_id": 46081032, "link": "https://stackoverflow.com/questions/46081032/is-there-single-line-linq-way-to-do-this/46081216#46081216", "title": "Is there single-line LINQ way to do this?", "body": "<p>Use <code>SelectMany</code>.</p>\n\n<pre><code>// returns IEnumerable&lt;Item&gt;\nFile.ReadAllLines(...).SelectMany(x =&gt;\n{\n   string[] arr = x.Split(new char[] { '|' });\n   return new Item(arr[0], arr[1]);\n}\n</code></pre>\n"}], "owner": {"reputation": 6408, "user_id": 5004822, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/55fd7e8e0dc744fc5feada06408b8a07?s=128&d=identicon&r=PG&f=1", "display_name": "SledgeHammer", "link": "https://stackoverflow.com/users/5004822/sledgehammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 46081086, "answer_count": 4, "score": -1, "last_activity_date": 1504791422, "creation_date": 1504718431, "last_edit_date": 1504721091, "question_id": 46081032, "link": "https://stackoverflow.com/questions/46081032/is-there-single-line-linq-way-to-do-this", "title": "Is there single-line LINQ way to do this?", "body": "<p>Imagine an input text file with the format:</p>\n\n<pre><code>blaha|blahb\nblahc|blahd\n</code></pre>\n\n<p>i.e. a pipe separated file with 2 columns. Right now, I'm loading it like this:</p>\n\n<pre><code>File.ReadAllLines(...).Select(x =&gt;\n{\n   string[] arr = x.Split(new char[] { '|' });\n   return new Item(arr[0], arr[1]);\n};\n</code></pre>\n\n<p>If I change the first line to <code>.Select(x =&gt; x.Split(new char[] { '|' })</code> it's going to return every row and column as an array element which is not what I want. Is there a linq \"inline\" way to split the columns and new up the object?</p>\n"}, {"tags": ["c#", "interface", "hierarchy"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1504718232, "post_id": 46080966, "comment_id": 79123537, "body": "Learn about covariance."}, {"owner": {"reputation": 219328, "user_id": 15498, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wi4EN.png?s=128&g=1", "display_name": "Damien_The_Unbeliever", "link": "https://stackoverflow.com/users/15498/damien-the-unbeliever"}, "edited": false, "score": 0, "creation_date": 1504718358, "post_id": 46080966, "comment_id": 79123616, "body": "Look at <code>List&lt;T&gt;</code>. Consider casting a <code>List&lt;string&gt;</code> to a <code>List&lt;object&gt;</code>. Then imagine what happens when a <code>DefinitelyNotAString</code> is <code>Add</code>ed to that list."}], "answers": [{"tags": [], "owner": {"reputation": 117905, "user_id": 1163867, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2fe5ef74a2c17f19c75d2f49b95fb71d?s=128&d=identicon&r=PG", "display_name": "MarcinJuraszek", "link": "https://stackoverflow.com/users/1163867/marcinjuraszek"}, "is_accepted": false, "score": 3, "last_activity_date": 1504718291, "creation_date": 1504718291, "answer_id": 46081001, "question_id": 46080966, "link": "https://stackoverflow.com/questions/46080966/why-do-i-need-to-implement-a-more-general-interface-if-i-already-implemented-a-s/46081001#46081001", "title": "Why do i need to implement a more general interface if I already implemented a specialized one?", "body": "<p>What you're trying to do is called <strong>variance</strong>. In C# interfaces are not variant by default, and that's why you're getting compile errors. You can mark your interface as <em>covariant</em> or <em>contravariant</em> explicitly to make it work:</p>\n\n<pre><code>interface IDomain&lt;in T&gt; where T: IElement {}\n\ninterface IDomain&lt;out T&gt; where T: IElement {}\n</code></pre>\n\n<p>See <a href=\"https://msdn.microsoft.com/en-us/library/ms228359(v=vs.90).aspx\" rel=\"nofollow noreferrer\">Variance in Generic Types</a> for more details.</p>\n"}], "owner": {"reputation": 1750, "user_id": 5333340, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Hivf3.jpg?s=128&g=1", "display_name": "Kjara", "link": "https://stackoverflow.com/users/5333340/kjara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1504718329, "answer_count": 1, "score": 0, "last_activity_date": 1504718333, "creation_date": 1504718142, "last_edit_date": 1504718333, "question_id": 46080966, "link": "https://stackoverflow.com/questions/46080966/why-do-i-need-to-implement-a-more-general-interface-if-i-already-implemented-a-s", "closed_reason": "Duplicate", "title": "Why do i need to implement a more general interface if I already implemented a specialized one?", "body": "<p>I have some interfaces and classes for domains and elements:</p>\n\n<pre><code>interface IElement {}\nclass FloatElement : IElement {}\n\ninterface IDomain&lt;T&gt; where T: IElement {}\nclass FloatDomain : IDomain&lt;FloatElement&gt;\n{\n    public static readonly FloatDomain Instance = new FloatDomain();\n}\n</code></pre>\n\n<p>I wrote this</p>\n\n<pre><code>IDomain&lt;IElement&gt; foo = FloatDomain.Instance;\n</code></pre>\n\n<p>but got an error:</p>\n\n<blockquote>\n  <p>(CS0266) \"Cannot implicitly convert type [...]. An explicit conversion\n  exists (are you missing a cast?)\"</p>\n</blockquote>\n\n<p>(Note that, despite the hint \"An explicit conversion exists\", <code>FloatDomain.Instance as IDomain&lt;IElement&gt;</code> will return <code>null</code>.)</p>\n\n<p>I already found out that I can work around this problem by making <code>FloatDomain</code> also implement <code>IDomain&lt;IElement&gt;</code>. <strong>But I would like to know why this workaround is necessary!</strong></p>\n\n<p>In my understanding, <code>FloatElement</code> is a more specialized version of <code>IElement</code>, i.e. I can implicitly convert <code>FloatElement</code> to <code>IElement</code>. Because of that, <code>IDomain&lt;FloatElement&gt;</code> is a more specialized version of <code>IDomain&lt;IElement&gt;</code>, i.e. I should also be able to implicitly convert <code>IDomain&lt;FloatElement&gt;</code> to <code>IDomain&lt;IElement&gt;</code>.</p>\n\n<p>Or in other words: in my understanding, <code>IDomain&lt;IElement&gt;</code> is like a base class for all other <code>IDomain&lt;T&gt;</code> where <code>T</code> implements <code>IElement</code>, because <code>T=IElement</code> is the most general possible case.</p>\n\n<p>Can you point me to my error of reasoning?</p>\n"}, {"tags": ["c#", ".net", "asp.net-core", ".net-core"], "comments": [{"owner": {"reputation": 1178, "user_id": 1020882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc73fb7544cbec21d74cb514075af12d?s=128&d=identicon&r=PG", "display_name": "CShark", "link": "https://stackoverflow.com/users/1020882/cshark"}, "edited": false, "score": 1, "creation_date": 1504718279, "post_id": 46080941, "comment_id": 79123561, "body": "My random guess would be that the parameters are different between .NetStandard and the Framework?"}, {"owner": {"reputation": 7712, "user_id": 439130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0af28aca8e2d5579b23ac1232d3b7308?s=128&d=identicon&r=PG", "display_name": "cilerler", "link": "https://stackoverflow.com/users/439130/cilerler"}, "reply_to_user": {"reputation": 1178, "user_id": 1020882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc73fb7544cbec21d74cb514075af12d?s=128&d=identicon&r=PG", "display_name": "CShark", "link": "https://stackoverflow.com/users/1020882/cshark"}, "edited": false, "score": 0, "creation_date": 1504718677, "post_id": 46080941, "comment_id": 79123788, "body": "Please explain why you are down voting!"}, {"owner": {"reputation": 7712, "user_id": 439130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0af28aca8e2d5579b23ac1232d3b7308?s=128&d=identicon&r=PG", "display_name": "cilerler", "link": "https://stackoverflow.com/users/439130/cilerler"}, "reply_to_user": {"reputation": 1178, "user_id": 1020882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc73fb7544cbec21d74cb514075af12d?s=128&d=identicon&r=PG", "display_name": "CShark", "link": "https://stackoverflow.com/users/1020882/cshark"}, "edited": false, "score": 0, "creation_date": 1504725793, "post_id": 46080941, "comment_id": 79127611, "body": "@CShark unfortunately couldn&#39;t located <code>System.Net.WebUtility</code> in <a href=\"https://github.com/dotnet/corefx/tree/master/src\" rel=\"nofollow noreferrer\">CoreFx</a> but reference has the signature."}], "answers": [{"comments": [{"owner": {"reputation": 7712, "user_id": 439130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0af28aca8e2d5579b23ac1232d3b7308?s=128&d=identicon&r=PG", "display_name": "cilerler", "link": "https://stackoverflow.com/users/439130/cilerler"}, "edited": false, "score": 0, "creation_date": 1504738132, "post_id": 46085188, "comment_id": 79132844, "body": "Thank you!  According to <a href=\"https://apisof.net/catalog/System.Web.HttpUtility.UrlEncodeToBytes(Byte(),Int32,Int32)\" rel=\"nofollow noreferrer\">apisof.net/catalog/&hellip;</a> it shouldn&#39;t be under <code>System.Runtime.Extensions</code>.  I appreciate your help."}], "tags": [], "owner": {"reputation": 9353, "user_id": 3561275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jk8uY.png?s=128&g=1", "display_name": "omajid", "link": "https://stackoverflow.com/users/3561275/omajid"}, "is_accepted": true, "score": 2, "last_activity_date": 1504736850, "creation_date": 1504736850, "answer_id": 46085188, "question_id": 46080941, "link": "https://stackoverflow.com/questions/46080941/typeofsystem-net-webutility-getmethod-returns-null-for-netstandard2-works/46085188#46085188", "title": "typeof(System.Net.WebUtility).GetMethod returns `null` for .NetStandard2 (works fine with .NetFramework4.6.1)", "body": "<p>The code is really asking for a method named in <code>System.Net.WebUtility</code> named <code>UrlEncode</code> that</p>\n\n<ol>\n<li><code>static</code></li>\n<li>Can be non-<code>public</code> (As your link shows, actually <code>private</code>)</li>\n<li>Accepts 3 parameters: <code>byte[]</code>, <code>int</code>, <code>int</code>.</li>\n</ol>\n\n<p><a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.net.webutility?view=netstandard-2.0\" rel=\"nofollow noreferrer\">But <code>.NET Standard 2.0</code> doesn't define any such method</a>. So conforming implementations of .NET Standard 2.0 - including .NET Core 2.0 - are free to not implement it. And that is exactly what corefx does. There is no such method in the corefx implementation of System.Net.WebUtilities: <a href=\"https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Extensions/src/System/Net/WebUtility.cs\" rel=\"nofollow noreferrer\">https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Extensions/src/System/Net/WebUtility.cs</a></p>\n\n<p>Have you considered using <a href=\"https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Extensions/src/System/Net/WebUtility.cs#L390\" rel=\"nofollow noreferrer\"><code>UrlEncodeToBytes(byte[], int, int)</code></a> instead? It is present in .NET Standard 2.0 and should be supported in .NET Framework 4.6.1 as well as .NET Core 2.0.</p>\n"}], "owner": {"reputation": 7712, "user_id": 439130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0af28aca8e2d5579b23ac1232d3b7308?s=128&d=identicon&r=PG", "display_name": "cilerler", "link": "https://stackoverflow.com/users/439130/cilerler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 46085188, "answer_count": 1, "score": -2, "last_activity_date": 1504736850, "creation_date": 1504718027, "last_edit_date": 1504723391, "question_id": 46080941, "link": "https://stackoverflow.com/questions/46080941/typeofsystem-net-webutility-getmethod-returns-null-for-netstandard2-works", "title": "typeof(System.Net.WebUtility).GetMethod returns `null` for .NetStandard2 (works fine with .NetFramework4.6.1)", "body": "<p>How to write code below in <strong>.NetStandard2</strong> so it won't return <code>null</code>?</p>\n\n<blockquote>\n  <p><em>It works fine with .NetFramework4.6.1</em></p>\n</blockquote>\n\n<pre><code>MethodInfo method = typeof(System.Net.WebUtility).GetMethod(nameof(System.Net.WebUtility.UrlEncode),\n        BindingFlags.Static | BindingFlags.NonPublic,\n        null,\n        new[]\n        {\n            typeof(byte[]),\n            typeof(int),\n            typeof(int)\n        },\n        null);\n</code></pre>\n\n<p>Looking for <a href=\"https://github.com/Microsoft/referencesource/blob/master/System/net/System/Net/WebUtility.cs#L399\" rel=\"nofollow noreferrer\">this line</a> to be exact but that one is for <strong>.NetFramework4.7</strong> and couldn't find <code>System.Net.WebUtility</code> source in <a href=\"https://github.com/dotnet/corefx/tree/master/src\" rel=\"nofollow noreferrer\">CoreFx</a> neither.</p>\n"}, {"tags": ["c#", "unity3d"], "answers": [{"comments": [{"owner": {"reputation": 8195, "user_id": 525672, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de3cd2fefafade91d044d08a8399dd8b?s=128&d=identicon&r=PG", "display_name": "gh9", "link": "https://stackoverflow.com/users/525672/gh9"}, "reply_to_user": {"reputation": 419, "user_id": 7481412, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/af4ck.png?s=128&g=1", "display_name": "Seongwon-Choi", "link": "https://stackoverflow.com/users/7481412/seongwon-choi"}, "edited": false, "score": 1, "creation_date": 1504719171, "post_id": 46081026, "comment_id": 79124037, "body": "Depends on what client you are using"}, {"owner": {"reputation": 419, "user_id": 7481412, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/af4ck.png?s=128&g=1", "display_name": "Seongwon-Choi", "link": "https://stackoverflow.com/users/7481412/seongwon-choi"}, "edited": false, "score": 0, "creation_date": 1504719424, "post_id": 46081026, "comment_id": 79124168, "body": "I don&#39;t know what you mean."}, {"owner": {"reputation": 8195, "user_id": 525672, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de3cd2fefafade91d044d08a8399dd8b?s=128&d=identicon&r=PG", "display_name": "gh9", "link": "https://stackoverflow.com/users/525672/gh9"}, "reply_to_user": {"reputation": 419, "user_id": 7481412, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/af4ck.png?s=128&g=1", "display_name": "Seongwon-Choi", "link": "https://stackoverflow.com/users/7481412/seongwon-choi"}, "edited": false, "score": 1, "creation_date": 1504719645, "post_id": 46081026, "comment_id": 79124299, "body": "What chat client do you want to chat with? google hangout, lync, gchat, old school aol chat. how would you like to chat? We can also do a conversation through stack"}, {"owner": {"reputation": 419, "user_id": 7481412, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/af4ck.png?s=128&g=1", "display_name": "Seongwon-Choi", "link": "https://stackoverflow.com/users/7481412/seongwon-choi"}, "edited": false, "score": 0, "creation_date": 1504719695, "post_id": 46081026, "comment_id": 79124330, "body": "Oh!! I want stackoverflow chat."}, {"owner": {"reputation": 8195, "user_id": 525672, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de3cd2fefafade91d044d08a8399dd8b?s=128&d=identicon&r=PG", "display_name": "gh9", "link": "https://stackoverflow.com/users/525672/gh9"}, "reply_to_user": {"reputation": 419, "user_id": 7481412, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/af4ck.png?s=128&g=1", "display_name": "Seongwon-Choi", "link": "https://stackoverflow.com/users/7481412/seongwon-choi"}, "edited": false, "score": 1, "creation_date": 1504719870, "post_id": 46081026, "comment_id": 79124438, "body": "ROOM NAME IS : Unity c#"}], "tags": [], "owner": {"reputation": 8195, "user_id": 525672, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de3cd2fefafade91d044d08a8399dd8b?s=128&d=identicon&r=PG", "display_name": "gh9", "link": "https://stackoverflow.com/users/525672/gh9"}, "is_accepted": true, "score": 1, "last_activity_date": 1504719410, "last_edit_date": 1504719410, "creation_date": 1504718392, "answer_id": 46081026, "question_id": 46080931, "link": "https://stackoverflow.com/questions/46080931/how-to-make-unity-singleton-generic/46081026#46081026", "title": "How to make Unity Singleton generic?", "body": "<p>1.<code>where T : MonoBehaviour</code>, means that any generic used by this class must inherit <code>MonoBehaviour</code> if it doesnt you will get a compile time error</p>\n\n<p><br />\n2. Managers (in my experience) are usually singleton because of the high resource spin up time. For example, if you have a manager that is managing connections to your <code>redis</code> server, and are using stackexchanges redis nuget package. They state explicitly that you should have only One of their connections open, because it is thread safe and has a relatively expansive creation method.</p>\n\n<p><br />\n3. <code>public class Gamemanager : GameSingleton&lt;GameManager&gt;.{}</code> this means you have a <code>GameManager</code> class that inherits <code>GameSingleton</code> with a <code>GameManager</code> as your generic.</p>\n\n<p><br />\n4. To understand inheritence and Generics I would study <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/\" rel=\"nofollow noreferrer\">mcirosofts c# tutorial</a></p>\n\n<p><br />\n5.To understand unity I would study <a href=\"https://unity3d.com/learn/tutorials\" rel=\"nofollow noreferrer\">unity</a></p>\n"}, {"comments": [{"owner": {"reputation": 419, "user_id": 7481412, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/af4ck.png?s=128&g=1", "display_name": "Seongwon-Choi", "link": "https://stackoverflow.com/users/7481412/seongwon-choi"}, "edited": false, "score": 0, "creation_date": 1504719250, "post_id": 46081147, "comment_id": 79124084, "body": "Case 1, If the format parameter&#39;s constraint is not MonoBehaviour, does it unconditionally fail during compilation? Is it just setting MonoBehaviour as a constraint to avoid errors? and Case 2, Case 3 Can you explain more easily?"}], "tags": [], "owner": {"reputation": 3673, "user_id": 7256853, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7H077BfRVB0/AAAAAAAAAAI/AAAAAAAAAEA/3S1Dq2-H8GE/photo.jpg?sz=128", "display_name": "Galandil", "link": "https://stackoverflow.com/users/7256853/galandil"}, "is_accepted": false, "score": 0, "last_activity_date": 1504718914, "creation_date": 1504718914, "answer_id": 46081147, "question_id": 46080931, "link": "https://stackoverflow.com/questions/46080931/how-to-make-unity-singleton-generic/46081147#46081147", "title": "How to make Unity Singleton generic?", "body": "<p>1) This means that the type <code>T</code> of the singleton you're going to create must inherit from <code>MonoBehaviour</code>, otherwise you'll get a compile error.</p>\n\n<p>2) Because usually you don't want a specific manager to be present (i.e. number of instances) more than once in your scene. For example, think of a <code>ScriptManager</code> that handles all the <code>FixedUpdate</code>, <code>Update</code> and <code>LateUpdate</code> callbacks instead of letting Unity handle them: you don't want more than one such manager present in the scene. The Singleton pattern satisfies this condition (not more than one instance of <code>ScriptManager</code> in a scene).</p>\n\n<p>3) It means that you're telling the compiler that type <code>T</code> is <code>GameManager</code>. If you look at the code of the class <code>GameSingleton&lt;T&gt;</code> you'll see that there's a <code>private static T _instance</code>, then a <code>public static T Instance</code> property, etc., and with this the <code>GameSingleton</code> class knows that <code>_instance</code> and <code>Instance</code> must be of type <code>GameManager</code>. Moreover, you can create different managers, by changing the type <code>T</code> (i.e.: GameManager, ScriptManager, CubesManager, whatever).</p>\n\n<p>4) You need to study C# generics.</p>\n"}], "owner": {"reputation": 419, "user_id": 7481412, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/af4ck.png?s=128&g=1", "display_name": "Seongwon-Choi", "link": "https://stackoverflow.com/users/7481412/seongwon-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 46081026, "answer_count": 2, "score": 1, "last_activity_date": 1526344607, "creation_date": 1504717943, "last_edit_date": 1526344607, "question_id": 46080931, "link": "https://stackoverflow.com/questions/46080931/how-to-make-unity-singleton-generic", "title": "How to make Unity Singleton generic?", "body": "<p>I'm currently reviewing the Unity code.</p>\n\n<p>and I'm studying about making Singleton generic.</p>\n\n<p>Slowly I'm studying from Singleton.</p>\n\n<p>I have a lot of question while reviewing the code.</p>\n\n<p>That's it : <code>public class GameSingleton&lt;T&gt; : MonoBehaviour where T : MonoBehaviour</code></p>\n\n<ol>\n<li>What does it mean to specify MonoBehaviour as the constraint on the type parameter T?</li>\n</ol>\n\n<p>And,</p>\n\n<ol start=\"2\">\n<li>Why do usually use Singleton when creating a manager?</li>\n</ol>\n\n<p>And,</p>\n\n<ol start=\"3\">\n<li>When creating a Manager, <code>public class GameManager : GameSingleton&lt;GameManager&gt;{}</code> </li>\n</ol>\n\n<p>I use these codes, what does that mean?</p>\n\n<p>And,</p>\n\n<ol start=\"4\">\n<li>How does the logic flow when these are implemented?</li>\n</ol>\n\n<p>That is all.. </p>\n\n<p>What do I have to study to understand these things?</p>\n\n<p>As a beginner, I do not know much. I need your help. </p>\n"}, {"tags": ["c#", "asp.net", "asp.net-mvc", "asp.net-mvc-4"], "comments": [{"owner": {"reputation": 6155, "user_id": 3793448, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9ilKH.jpg?s=128&g=1", "display_name": "Izzy", "link": "https://stackoverflow.com/users/3793448/izzy"}, "edited": false, "score": 1, "creation_date": 1504718196, "post_id": 46080930, "comment_id": 79123512, "body": "Can you add your markup"}, {"owner": {"reputation": 55708, "user_id": 296861, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/957c8334a5950ba301f66662b36da7d1?s=128&d=identicon&r=PG&f=1", "display_name": "Win", "link": "https://stackoverflow.com/users/296861/win"}, "edited": false, "score": 0, "creation_date": 1504718750, "post_id": 46080930, "comment_id": 79123821, "body": "Could you show Student class?"}, {"owner": {"reputation": 1867, "user_id": 6535663, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PdSpK.png?s=128&g=1", "display_name": "David Lee", "link": "https://stackoverflow.com/users/6535663/david-lee"}, "edited": false, "score": 0, "creation_date": 1504719506, "post_id": 46080930, "comment_id": 79124210, "body": "You should use <code>DataAttributes</code> on your <code>Student</code> model and let asp.net handle the validation for you."}, {"owner": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1504720907, "post_id": 46080930, "comment_id": 79125052, "body": "I handled the data attributes already. I want to add the validation based on if the user enter a student record. so if the user enters a student record it directs to another page but if there&#39;s no student record entered then they&#39;ll get an error"}, {"owner": {"reputation": 21842, "user_id": 6378815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810b57a09174a18f7b91655115ce11a5?s=128&d=identicon&r=PG&f=1", "display_name": "Tetsuya Yamamoto", "link": "https://stackoverflow.com/users/6378815/tetsuya-yamamoto"}, "edited": false, "score": 0, "creation_date": 1504751421, "post_id": 46080930, "comment_id": 79135930, "body": "<code>ViewBag.error(&quot;No item was entered&quot;);</code> =&gt; it should be <code>ViewBag.Error = &quot;No item was entered&quot;;</code> and use <code>@ViewBag.Error</code> inside CSHTML file you want to add the message. Or you can take <code>RequiredAttribute</code> with error message &amp; use <code>Html.ValidationMessageFor</code> to display it."}, {"owner": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1504792431, "post_id": 46080930, "comment_id": 79158307, "body": "could you give me an example within the cshtml file. this is button I have     &lt;div class=&quot;col-md-offset-4 col-md-12&quot;&gt;                                       &lt;input type=&quot;button&quot; value=&quot;Finish&quot; name=&quot;Issue&quot; margin=&quot;50px&quot; onclick=&quot;location.href=&#39;@Url.Action(&quot;ViewIssue&quot;,&quot;Issue&quot;)&#39; &quot; class=&quot;btn btn-default&quot; /&gt;                                        &lt;/div&gt;"}, {"owner": {"reputation": 515, "user_id": 1856547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f21646d67eff4a677d6d3c99cd3dc7?s=128&d=identicon&r=PG", "display_name": "Vidiya Prasanth Pappannan", "link": "https://stackoverflow.com/users/1856547/vidiya-prasanth-pappannan"}, "edited": false, "score": 0, "creation_date": 1504815587, "post_id": 46080930, "comment_id": 79171797, "body": "Can u please put the above HTML in the question by clicking edit"}, {"owner": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1504816651, "post_id": 46080930, "comment_id": 79172314, "body": "I have edited the question with the html. Can you assist me please"}, {"owner": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1504879055, "post_id": 46080930, "comment_id": 79198753, "body": "Hey Tetsuya is it possible to show me an example"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1507131307, "post_id": 46496186, "comment_id": 80091271, "body": "I tried this solution but I don&#39;t seem to be getting an output it just redirects to the other page"}, {"owner": {"reputation": 406, "user_id": 1361831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEWUH.jpg?s=128&g=1", "display_name": "Tiramonium", "link": "https://stackoverflow.com/users/1361831/tiramonium"}, "reply_to_user": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1507132024, "post_id": 46496186, "comment_id": 80091774, "body": "@bujulloyd Notice that the Action is supposed to do any logic at all only when the ModelState is valid. I reversed your original logic order and set the else, aka when ModelState is ~not~ valid to store a error message, which will show in your View later."}, {"owner": {"reputation": 406, "user_id": 1361831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEWUH.jpg?s=128&g=1", "display_name": "Tiramonium", "link": "https://stackoverflow.com/users/1361831/tiramonium"}, "reply_to_user": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1507132162, "post_id": 46496186, "comment_id": 80091851, "body": "@bujulloyd If you did write your action the way I proposed and you&#39;re just getting redirected, then it means the object was filled correctly, so there would be no need for a error message indeed."}, {"owner": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1507132433, "post_id": 46496186, "comment_id": 80092061, "body": "it wasn&#39;t completed"}, {"owner": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1507132542, "post_id": 46496186, "comment_id": 80092131, "body": "Oh wait perhaps I should remove this onclick=&quot;location.href=&#39;@Url.Action(&quot;ViewIssue&quot;,"}, {"owner": {"reputation": 406, "user_id": 1361831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEWUH.jpg?s=128&g=1", "display_name": "Tiramonium", "link": "https://stackoverflow.com/users/1361831/tiramonium"}, "reply_to_user": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1507132594, "post_id": 46496186, "comment_id": 80092170, "body": "Maybe the property you didn&#39;t fill is a nullable type. Did you check if it was? If you really need a property to be required for the object, change the &quot;Student model&quot; according to my update, binding the properties you have in your View to the Student object the Action is expecting."}, {"owner": {"reputation": 406, "user_id": 1361831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEWUH.jpg?s=128&g=1", "display_name": "Tiramonium", "link": "https://stackoverflow.com/users/1361831/tiramonium"}, "reply_to_user": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1507132807, "post_id": 46496186, "comment_id": 80092302, "body": "@bujulloyd You don&#39;t need that button at all anymore. Just put a submit button in your View. The error message will be displayed elsewhere, in the <code>&lt;span&gt;</code> tag I suggested."}, {"owner": {"reputation": 406, "user_id": 1361831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEWUH.jpg?s=128&g=1", "display_name": "Tiramonium", "link": "https://stackoverflow.com/users/1361831/tiramonium"}, "reply_to_user": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "edited": false, "score": 0, "creation_date": 1507133943, "post_id": 46496186, "comment_id": 80092992, "body": "Look at my answer."}], "tags": [], "owner": {"reputation": 406, "user_id": 1361831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEWUH.jpg?s=128&g=1", "display_name": "Tiramonium", "link": "https://stackoverflow.com/users/1361831/tiramonium"}, "is_accepted": false, "score": 0, "last_activity_date": 1507134033, "last_edit_date": 1507134033, "creation_date": 1506715431, "answer_id": 46496186, "question_id": 46080930, "link": "https://stackoverflow.com/questions/46080930/adding-error-message-on-button-click-in-asp-net-mvc/46496186#46496186", "title": "Adding error message on button click in Asp.net Mvc", "body": "<p>Set your View to display a TempData, which works the same as a ViewBag, but persists its data through redirects, in case your Model.IsValid condition fail. Also, put a try/catch statement inside the if condition just in case too.\nAlso also, I recommend you return to your original View in case the user fills in the form wrong somehow, so he can fix whatever it was.</p>\n\n<p>Action:</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Finish([Bind(Include = \"propertyName1,propertyName2,propertyName3\")] Student model, string finish)\n{\n    if (ModelState.IsValid)\n    {\n        try {\n            //do your logic here\n            return RedirectToAction(\"StudentRecord\");\n        } catch (Exception ex) {\n            TempData[\"errorMessage\"] = \"Error: \" + ex.Message + \" - \" + ex.InnerException;\n            //ViewBag.errorMessage = \"Error: \" + ex.Message + \" - \" + ex.InnerException;\n            return View(model);\n        }\n    }\n    else\n    {\n        TempData[\"errorMessage\"] = \"Error: Please fill the form correctly\";\n        return View(model);\n    }\n}\n</code></pre>\n\n<p>Then in your View:</p>\n\n<pre><code>@model your_domain.Student\n\n&lt;span&gt;\n    @TempData[\"errorMessage\"]\n    //@ViewBag.errorMessage\n&lt;/span&gt;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8359441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e0e6d63f17d97fc7f78cf271317ed31d?s=128&d=identicon&r=PG&f=1", "display_name": "buju lloyd", "link": "https://stackoverflow.com/users/8359441/buju-lloyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 911, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1507134033, "creation_date": 1504717940, "last_edit_date": 1504815909, "question_id": 46080930, "link": "https://stackoverflow.com/questions/46080930/adding-error-message-on-button-click-in-asp-net-mvc", "title": "Adding error message on button click in Asp.net Mvc", "body": "<p>I'm having an issue with using error message in ASP.net mvc. When the user clicks save even nothing wasn't entered it still redirects them to another page but I would like to give them an error if no information was entered. I want it to be done on the client side. This what I have thus far</p>\n\n<pre><code> [HttpPost]\n    public ActionResult Finish(Student model, string finish)\n    {\n        if (!ModelState.IsValid)\n        {\n            ViewBag.error(\"No item was entered\");\n           return View(getStudent);\n        }\n\n        else (string.IsNullOrEmpty(finish))\n        {\n            //redirects to student record page when finish is clicked\n            return RedirectToAction(\"StudentRecord\");\n        }\n\n    }\n</code></pre>\n\n<p>where in here would put the error message</p>\n\n<pre><code> &lt;div class=\"col-md-offset-4 col-md-12\"&gt; &lt;input type=\"button\" value=\"Finish\" name=\"Issue\" margin=\"50px\" onclick=\"location.href='@Url.Action(\"ViewIssue\",\"Issue\")' \" class=\"btn btn-default\" /&gt; &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["c#", "asp.net-mvc", "missingmethodexception"], "comments": [{"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1504718001, "post_id": 46080906, "comment_id": 79123397, "body": "Well where are you calling this method?  It&#39;s hard to help when we can&#39;t see your code."}, {"owner": {"reputation": 4810, "user_id": 831938, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da74f94a1f60fceb744b45be1f4cc45a?s=128&d=identicon&r=PG&f=1", "display_name": "sir_thursday", "link": "https://stackoverflow.com/users/831938/sir-thursday"}, "reply_to_user": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1504718030, "post_id": 46080906, "comment_id": 79123413, "body": "It does not seem like I am calling this method anywhere, I have searched VS for the method signature.  I would have added the code in question if it existed."}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 1, "creation_date": 1504718415, "post_id": 46080906, "comment_id": 79123648, "body": "I suggest using ILSpy to open each assembly and check their dependencies.  You likely have a version mismatch somewhere, e.g. you&#39;re using A 1.0 and B 1.2, but B depends on A 1.1."}, {"owner": {"reputation": 4810, "user_id": 831938, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da74f94a1f60fceb744b45be1f4cc45a?s=128&d=identicon&r=PG&f=1", "display_name": "sir_thursday", "link": "https://stackoverflow.com/users/831938/sir-thursday"}, "reply_to_user": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1504718872, "post_id": 46080906, "comment_id": 79123883, "body": "When you say open each assembly, do you mean open each DLL?"}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1504718990, "post_id": 46080906, "comment_id": 79123941, "body": "Yes, that is correct."}, {"owner": {"reputation": 4810, "user_id": 831938, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da74f94a1f60fceb744b45be1f4cc45a?s=128&d=identicon&r=PG&f=1", "display_name": "sir_thursday", "link": "https://stackoverflow.com/users/831938/sir-thursday"}, "reply_to_user": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1504719075, "post_id": 46080906, "comment_id": 79123981, "body": "I see that I am requiring different versions of System.Collections.Immutable in my <code>obj&#47;</code> and <code>objd&#47;</code> folders.  Could this be problematic?"}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1504719901, "post_id": 46080906, "comment_id": 79124461, "body": "It can be an issue, but isn&#39;t necessarily.  You might try using an assembly binding redirect."}], "owner": {"reputation": 4810, "user_id": 831938, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da74f94a1f60fceb744b45be1f4cc45a?s=128&d=identicon&r=PG&f=1", "display_name": "sir_thursday", "link": "https://stackoverflow.com/users/831938/sir-thursday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1504717866, "creation_date": 1504717866, "question_id": 46080906, "link": "https://stackoverflow.com/questions/46080906/missing-method-exceptions-with-system-collections-immutable-and-system-reflectio", "title": "Missing method exceptions with System.Collections.Immutable and System.Reflection.Metadata", "body": "<p>I'm trying to debug the following error being thrown in my solution.</p>\n\n<blockquote>\n  <p>System.MissingMethodException: Method not found:\n  'System.Collections.Immutable.ImmutableArray`1\n  System.Reflection.Metadata.MetadataReader.GetBlobContent(System.Reflection.Metadata.BlobHandle)'.</p>\n</blockquote>\n\n<p>It seems as though the versions of <code>System.Collections.Immutable</code> and <code>System.Reflection.Metadata</code> are incorrect in some way, but I have no idea how to debug this.  I've been checking versions, clearing NuGet caches, and restarting VS, to no avail.  What else can I try to fix this?</p>\n"}, {"tags": ["c#", "asp.net", "entity-framework", "dbcontext", "asp.net-identity-2"], "comments": [{"owner": {"reputation": 1867, "user_id": 6535663, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PdSpK.png?s=128&g=1", "display_name": "David Lee", "link": "https://stackoverflow.com/users/6535663/david-lee"}, "edited": false, "score": 0, "creation_date": 1504718370, "post_id": 46080881, "comment_id": 79123624, "body": "What use case would call for separating your tables into two contexts?  This would make writing queries between both contexts difficult. It would require joins from both contexts to be done in application memory instead of the sql server.  My recommendation is to put all your tables into the <code>ApplicationDbContext</code>.  I can show you how to do this if you want, just let me know."}, {"owner": {"reputation": 1275, "user_id": 1260200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yiOJO.jpg?s=128&g=1", "display_name": "CptRobby", "link": "https://stackoverflow.com/users/1260200/cptrobby"}, "reply_to_user": {"reputation": 1867, "user_id": 6535663, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PdSpK.png?s=128&g=1", "display_name": "David Lee", "link": "https://stackoverflow.com/users/6535663/david-lee"}, "edited": false, "score": 0, "creation_date": 1504720709, "post_id": 46080881, "comment_id": 79124938, "body": "Totally agree with @DavidLee You shouldn&#39;t have two contexts sharing the same connection string. If they were different connection strings (connecting to two different databases, for example), then it would make more sense. But you can&#39;t have any relationships between the two, not even inheritance."}, {"owner": {"reputation": 14993, "user_id": 423497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c411e966f549fa07b3d7fb142ba733?s=128&d=identicon&r=PG", "display_name": "Steve Py", "link": "https://stackoverflow.com/users/423497/steve-py"}, "edited": false, "score": 0, "creation_date": 1504754985, "post_id": 46080881, "comment_id": 79136625, "body": "You would use something like that when working with bounded contexts, but from the OP example I don&#39;t see how that&#39;s applicable. It&#39;s almost like they saw 2 different examples of context setup and have set 2 up, one each way?? To the original question: To have a table appear in both contexts then only one context can serve as the owner of the table structure with CodeFirst. Every other context must be configured to <i>not</i> create/migrate schema. For bounded contexts I do not use CodeFirst, but even then only 1 context can be the owner of any given entity."}, {"owner": {"reputation": 469, "user_id": 2089354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aaba7794bf663766acdcedfec5f7c7f8?s=128&d=identicon&r=PG&f=1", "display_name": "ma1169", "link": "https://stackoverflow.com/users/2089354/ma1169"}, "edited": false, "score": 0, "creation_date": 1505961995, "post_id": 46080881, "comment_id": 79629627, "body": "Agree with the above; One thing I fail to understand based on what you have shown is   Why would you need 2 Context, what are you trying to achieve? You either use 2 context for 2 separate databases or an identity database and extend it"}], "owner": {"reputation": 23, "user_id": 1752108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c1414fe75027ca1e6cfad1587e3c73?s=128&d=identicon&r=PG", "display_name": "Rafael Brunello", "link": "https://stackoverflow.com/users/1752108/rafael-brunello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1505, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1504717775, "creation_date": 1504717775, "question_id": 46080881, "link": "https://stackoverflow.com/questions/46080881/proper-way-to-use-two-contexts-in-asp-net-core-with-entity-framework-core", "title": "Proper way to use two contexts in asp.net core with Entity Framework Core", "body": "<p>I am trying to apply what I have been studying and I have been involved in a part of contexts.</p>\n\n<p>What I'm trying to apply is a Microsoft.Identity structure along with the application entities.</p>\n\n<p>Structure of the solution:</p>\n\n<pre><code>BaseFull.Web\nBaseFull.Entities\nBaseFull.Infra.Data\n</code></pre>\n\n<p>I have created an interface to keep the same new properties and so do not have problem of migration of two classes to the same 'table'</p>\n\n<pre><code>public interface IUsuario\n{\n    string Fullname { get; set; }\n}\n</code></pre>\n\n<p>I applied to my User entity and ApplicationUser:</p>\n\n<pre><code>namespace BaseFull.Web.Models\n{\n    // Add profile data for application users by adding properties to the ApplicationUser class\n    public class ApplicationUser : IdentityUser,  IUsuario\n    {\n        public string Fullname { get; set; }\n    }\n}\n\n\nnamespace BaseFull.Entities.Models\n{\n    public class Usuario : IUsuario\n    {\n        public string Fullname { get; set; }\n        public Usuario()\n        {\n            Id = Guid.NewGuid().ToString();\n        }\n        #region Propriedades da AspnetUsers(Identity)\n        public string Id { get; set; }\n        public virtual string Email { get; set; }\n        public virtual string UserName { get; set; }\n\n\n  ...\n        #endregion\n    }\n</code></pre>\n\n<p>I've separated the entities in a project. I am also trying to separate the context in a project and it is at this moment that I am in difficulties.</p>\n\n<pre><code> namespace BaseFull.Infra.Data.Context\n{\n    public class BaseFullContext: DbContext\n    {\n        public DbSet&lt;Usuario&gt; Usuarios { get; set; }\n....\n\nnamespace BaseFull.Web.Data\n{\npublic class ApplicationDbContext : IdentityDbContext&lt;ApplicationUser&gt;\n{\n    public ApplicationDbContext(DbContextOptions&lt;ApplicationDbContext&gt; options)\n        : base(options)\n    {\n    }\n\n    protected override void OnModelCreating(ModelBuilder builder)\n    {\n        base.OnModelCreating(builder);\n\n        builder.Entity&lt;ApplicationUser&gt;().ToTable(\"Usuarios\");\n</code></pre>\n\n<p>In the Startup class of the Web project I made the call of the contexts:</p>\n\n<pre><code>public void ConfigureServices(IServiceCollection services)\n    {\n        services.AddDbContext&lt;ApplicationDbContext&gt;(options =&gt;\n            options.UseSqlServer(Configuration.GetConnectionString(\"DefaultConnection\")));\n        services.AddDbContext&lt;BaseFullContext&gt;(options =&gt;\n            options.UseSqlServer(Configuration.GetConnectionString(\"DefaultConnection\")));....\n</code></pre>\n\n<p>I had an assembly error, which I resolved by changing the service to the same assembly as the main project</p>\n\n<pre><code>services.AddDbContext&lt;BaseFullAppContext&gt;(options =&gt;\n            options.UseSqlServer(Configuration.GetConnectionString(\"DefaultConnection\")\n                                , b =&gt; b.MigrationsAssembly(\"BaseFull.Web\"))\n</code></pre>\n\n<p>However, running the second context update generated the error 'table already exists'.</p>\n\n<pre><code>There is already an object named 'Usuarios' in the database.\n</code></pre>\n\n<p>My biggest question is how to solve this problem, which is the most correct and efficient way to use both contexts for this.</p>\n\n<p>The User configuration class to remain the same as ApplicationUser did not show here because I do not think it's necessary, but if I need to, I'll show it as well.</p>\n"}]