[{"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 2770, "user_id": 1341825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83689df8baed7dbaebb1587fbbffb95a?s=128&d=identicon&r=PG", "display_name": "theUtherSide", "link": "https://stackoverflow.com/users/1341825/theutherside"}, "edited": false, "score": 0, "creation_date": 1505957158, "post_id": 46333387, "comment_id": 79628622, "body": "What error are you seeing?"}, {"owner": {"reputation": 8101, "user_id": 5832540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sy8es.jpg?s=128&g=1", "display_name": "Tom&#225;\u0161 Linhart", "link": "https://stackoverflow.com/users/5832540/tom%c3%a1%c5%a1-linhart"}, "edited": false, "score": 0, "creation_date": 1505972253, "post_id": 46333387, "comment_id": 79632150, "body": "The only error I get now relates to wrong indentation of source code. If corrected, it works for me."}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1505972472, "post_id": 46333387, "comment_id": 79632237, "body": "The code is working perfectly, please post complete exception details"}, {"owner": {"reputation": 13, "user_id": 8622451, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5ab1546eb4ea6ac928fa6a0d8681e2c9?s=128&d=identicon&r=PG&f=1", "display_name": "eric5037", "link": "https://stackoverflow.com/users/8622451/eric5037"}, "edited": false, "score": 0, "creation_date": 1505973582, "post_id": 46333387, "comment_id": 79632648, "body": "So it doesn&#39;t work for me. I&#39;ve just put in the initial message the error."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8622451, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5ab1546eb4ea6ac928fa6a0d8681e2c9?s=128&d=identicon&r=PG&f=1", "display_name": "eric5037", "link": "https://stackoverflow.com/users/8622451/eric5037"}, "edited": false, "score": 0, "creation_date": 1505994932, "post_id": 46337015, "comment_id": 79646330, "body": "just one thing: just before the class, I wrote: #scrapy crawl jobs7 -o job7.csv -t csv but that is not what I used to crawl the spider, I use #scrapy crawl jobs8 -o job8.csv -t csv. What I usually are tons of tests and I&#39;m used to create new file copying an existing file which normally the last file created. It was just to let it clear that the error was not from this."}], "tags": [], "owner": {"reputation": 13, "user_id": 8622451, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5ab1546eb4ea6ac928fa6a0d8681e2c9?s=128&d=identicon&r=PG&f=1", "display_name": "eric5037", "link": "https://stackoverflow.com/users/8622451/eric5037"}, "is_accepted": false, "score": 0, "last_activity_date": 1505975757, "creation_date": 1505975757, "answer_id": 46337015, "question_id": 46333387, "link": "https://stackoverflow.com/questions/46333387/scrapy-impossible-to-get-that-field/46337015#46337015", "title": "Scrapy Impossible to get that field", "body": "<p>it was a charset issue, I've put this: price = product.xpath('div[@class=\"right_block\"]/div[@class=\"content_price\"]/span[@class=\"price\"]').extract_first()<strong>.encode(\"utf-8\")</strong>. </p>\n\n<p>It's a correct solution to me but may be it could be set up at a file level.</p>\n"}], "owner": {"reputation": 13, "user_id": 8622451, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5ab1546eb4ea6ac928fa6a0d8681e2c9?s=128&d=identicon&r=PG&f=1", "display_name": "eric5037", "link": "https://stackoverflow.com/users/8622451/eric5037"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505975757, "creation_date": 1505951838, "last_edit_date": 1505973544, "question_id": 46333387, "link": "https://stackoverflow.com/questions/46333387/scrapy-impossible-to-get-that-field", "title": "Scrapy Impossible to get that field", "body": "<p>I'm trying to scrape 4 fields: image, link, name, price. </p>\n\n<p>This code:</p>\n\n<pre><code>import scrapy\nfrom scrapy import Request\n\n#scrapy crawl jobs7 -o job7.csv -t csv\n    class JobsSpider(scrapy.Spider):\n        name = \"jobs8\"\n        allowed_domains = [\"vapedonia.com\"]\n        start_urls = [\"https://www.vapedonia.com/11-mods-potencia-\"]\n\n        def parse(self, response):\n            products = response.xpath('//div[@class=\"product-container clearfix\"]')\n\n            for product in products:\n                image = product.xpath('div[@class=\"center_block\"]/a/img/@src').extract_first()\n                link = product.xpath('div[@class=\"center_block\"]/a/@href').extract_first()\n                name = product.xpath('div[@class=\"right_block\"]/p/a/text()').extract_first()\n                price = product.xpath('div[@class=\"right_block\"]/div[@class=\"content_price\"]/span[@class=\"price\"]').extract_first()\n                print image, link, name, price\n</code></pre>\n\n<p>gets an error.</p>\n\n<p>I've been trying creating my xpath expression, using the inspecting tool and a plugin. I've tried by myself too. It works in the webpage but not in the script. </p>\n\n<p>I've been fighting for a while now and I can't figure out what's happening. </p>\n\n<p>Does somebody have any idea of what can be happening?</p>\n\n<p>Thanks!</p>\n\n<p>PS: here's the error I get: \n2017-09-21 07:55:31 [scrapy.core.engine] INFO: Spider opened\n2017-09-21 07:55:31 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-09-21 07:55:31 [scrapy.extensions.telnet] DEBUG: Telnet console listening on 127.0.0.1:6023\n2017-09-21 07:55:32 [scrapy.core.engine] DEBUG: Crawled (200) https://www.vapedonia.com/robots.txt> (referer: None)\n2017-09-21 07:55:32 [scrapy.core.engine] DEBUG: Crawled (200) https://www.vapedonia.com/11-mods-potencia-> (referer: None)\n<a href=\"https://www.vapedonia.com/4688-home_default/-ipv-6x-azul-pionner4you.jpg\" rel=\"nofollow noreferrer\">https://www.vapedonia.com/4688-home_default/-ipv-6x-azul-pionner4you.jpg</a> <a href=\"https://www.vapedonia.com/pionner4you/2075--ipv-6x-azul-pionner4you.html\" rel=\"nofollow noreferrer\">https://www.vapedonia.com/pionner4you/2075--ipv-6x-azul-pionner4you.html</a>  IPV 6X AZUL - PIONNER4YOU 2017-09-21 07:55:32 [scrapy.core.scraper] ERROR: Spider error processing https://www.vapedonia.com/11-mods-potencia-> (referer: None)\nTraceback (most recent call last):\n  File \"C:\\Users\\eric\\Miniconda2\\lib\\site-packages\\twisted\\internet\\defer.py\", line 653, in _runCallbacks\n    current.result = callback(current.result, *args, **kw)\n  File \"C:\\Users\\eric\\Documents\\Web Scraping\\0 - Projets\\Scrapy-\\projects\\craigslist\\craigslist\\spiders\\jobs8.py\", line 18, in parse\n    print image, link, name, price\n  File \"C:\\Users\\eric\\Miniconda2\\lib\\encodings\\cp850.py\", line 12, in encode\n    return codecs.charmap_encode(input,errors,encoding_map)\nUnicodeEncodeError: 'charmap' codec can't encode character u'\\u20ac' in position 26: character maps to \n2017-09-21 07:55:32 [scrapy.core.engine] INFO: Closing spider (finished)\n2017-09-21 07:55:32 [scrapy.statscollectors] INFO: Dumping Scrapy stats:</p>\n"}, {"tags": ["python", "python-2.7", "numpy", "where"], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 8621025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a38189853a123f2a23a189d5a95997f?s=128&d=identicon&r=PG&f=1", "display_name": "rjsberry", "link": "https://stackoverflow.com/users/8621025/rjsberry"}, "is_accepted": false, "score": 2, "last_activity_date": 1505952491, "creation_date": 1505952491, "answer_id": 46333458, "question_id": 46333375, "link": "https://stackoverflow.com/questions/46333375/replacing-values-of-a-python-ndarray-satisfying-certain-threshold/46333458#46333458", "title": "Replacing values of a python ndarray satisfying certain threshold", "body": "<p>Personally I would use a combination of <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\"><code>np.where</code></a> and <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_and.html\" rel=\"nofollow noreferrer\"><code>np.logical_and</code></a>.</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; threshold = 0.5\n&gt;&gt;&gt; my_arr = np.random.randn(20)\n&gt;&gt;&gt; my_arr\narray([-0.28094279,  1.28432282,  0.2585762 ,  0.41902366,  1.21350506,\n       -0.40586786, -1.04135578, -1.06168061,  0.25554365, -0.75404457,\n        1.4755498 , -0.14902854,  0.15225808,  0.03667505,  0.6158351 ,\n        0.05171262,  1.09116325, -0.5897306 , -0.69801693, -0.31560829,\n       -0.36665813, -0.98115761,  1.21050881,  0.66356061, -0.03960144])\n&gt;&gt;&gt; my_arr[np.where(np.logical_and(np.greater(my_arr, -threshold), np.less(my_arr, threshold)))[0]] = np.nan\n&gt;&gt;&gt; my_arr\narray([        nan,  1.28432282,         nan,         nan,  1.21350506,\n               nan, -1.04135578, -1.06168061,         nan, -0.75404457,\n        1.4755498 ,         nan,         nan,         nan,  0.6158351 ,\n               nan,  1.09116325, -0.5897306 , -0.69801693,         nan,\n               nan, -0.98115761,  1.21050881,  0.66356061,         nan])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "edited": false, "score": 0, "creation_date": 1506057171, "post_id": 46333788, "comment_id": 79674243, "body": "Thanks, @MSeifert. So basically your approach is just a one-liner? No need for <code>np.isin</code>, right?"}, {"owner": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "edited": false, "score": 0, "creation_date": 1506058655, "post_id": 46333788, "comment_id": 79674734, "body": "This is unfortunately very slow"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "edited": false, "score": 0, "creation_date": 1506087493, "post_id": 46333788, "comment_id": 79691762, "body": "Slow? Compared to what?"}, {"owner": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "edited": false, "score": 0, "creation_date": 1506097487, "post_id": 46333788, "comment_id": 79697954, "body": "to my method which I first find the indices and then replace them with new values. I would say 10x slower"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "edited": false, "score": 0, "creation_date": 1506097720, "post_id": 46333788, "comment_id": 79698065, "body": "@Amir Interesting, you might want to include your arrays. On my computer your approach is ~20 times slower. (array with 100k elements, my approach: 1.6ms, your approach 36ms)"}, {"owner": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "edited": false, "score": 0, "creation_date": 1506097894, "post_id": 46333788, "comment_id": 79698167, "body": "This is a huge array of more than a million elements. Has the following <code>shape=(1, 1, 512, 512) dtype=float32</code> shape."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "edited": false, "score": 1, "creation_date": 1506098012, "post_id": 46333788, "comment_id": 79698222, "body": "@Amir <code>np_w</code> or <code>my_np</code>? It would make sense to update (edit) the question."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "edited": false, "score": 0, "creation_date": 1506098654, "post_id": 46333788, "comment_id": 79698528, "body": "@Amir I think your timing may be flawed. Even with that shape and dtype my approach is, on my computer at least, several times (25 times) faster."}, {"owner": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "edited": false, "score": 0, "creation_date": 1506099366, "post_id": 46333788, "comment_id": 79698897, "body": "Yes, my bad @MSeifert. This is fast and acceptable :)"}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 2, "last_activity_date": 1505955326, "creation_date": 1505955326, "answer_id": 46333788, "question_id": 46333375, "link": "https://stackoverflow.com/questions/46333375/replacing-values-of-a-python-ndarray-satisfying-certain-threshold/46333788#46333788", "title": "Replacing values of a python ndarray satisfying certain threshold", "body": "<p>If it's a symmetric interval around <code>0</code> you could use <code>abs</code> and <code>&lt;</code> and <a href=\"https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#boolean-array-indexing\" rel=\"nofollow noreferrer\">boolean array indexing</a> (similar to <a href=\"https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#integer-array-indexing\" rel=\"nofollow noreferrer\">integer array indexing</a> but in this case you don't need the <code>np.where</code> around the condition):</p>\n\n<pre><code>my_np[abs(my_np) &lt;= treshhold] = 0\n</code></pre>\n\n<p>This will replace all values whose absolute is smaller than or equal to threshold with <code>0</code>.</p>\n\n<p>In case you need a more general solution, say the absolute of the lower threshold is not equal to the upper threshold, then you can combine the expressions using <code>&amp;</code>:</p>\n\n<pre><code>my_np[(my_np &gt;= lower_treshhold) &amp; (my_np &lt;= upper_threshhold)] = 0\n</code></pre>\n"}], "owner": {"reputation": 1201, "user_id": 2815551, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d9e37e3f71d7ae9808e95b829b6133b4?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/2815551/amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 46333788, "answer_count": 2, "score": 1, "last_activity_date": 1506099264, "creation_date": 1505951726, "last_edit_date": 1506099264, "question_id": 46333375, "link": "https://stackoverflow.com/questions/46333375/replacing-values-of-a-python-ndarray-satisfying-certain-threshold", "title": "Replacing values of a python ndarray satisfying certain threshold", "body": "<p>I would like to replace the values of a huge python ndarray that are within a certain threshold to 0. Say within the threshold of <code>[-0.1 and 0.1]</code>. What is the most efficient way? This is a fairly large array:</p>\n\n<pre><code>&gt;&gt;&gt;np.shape(np_w)\nshape=(1, 1, 1024, 1024) dtype=float32\n</code></pre>\n\n<p>I know we don't have Matlab's <code>ismember</code> here, however, searching numpy docs, I found <code>np.in1d</code> and <code>np.isin</code>. My solution so far doesn't look good and slow:</p>\n\n<pre><code>import numpy as np\nThreshhold=X\n\nres=np.isin(np_w,np_w[(np_w&gt;=-Threshhold) &amp; (np_w&lt;=Threshhold)])\nindicesToReplace=np.where(res)\nnp_w[indicesToReplace]=0\n</code></pre>\n"}, {"tags": ["python", "c", "caching"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1505952172, "post_id": 46333332, "comment_id": 79627585, "body": "The C compiler may have noticed that the two arrays have mutually exclusive lifetimes, so it reuses the same memory for both of them."}, {"owner": {"reputation": 79, "user_id": 5400814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/542283609252362/picture?type=large", "display_name": "Jason  Long", "link": "https://stackoverflow.com/users/5400814/jason-long"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505952380, "post_id": 46333332, "comment_id": 79627636, "body": "@Barmar what confused me most is why the python code in contrast.. the column cache Line ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505952441, "post_id": 46333332, "comment_id": 79627648, "body": "Python is interpreted, C is compiled, so there&#39;s lots of room for differences in behavior."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1505954249, "post_id": 46333332, "comment_id": 79628032, "body": "Furthermore, a Python list is <i>*not a primitive array</i> and the performance characteristics are different. A CPython list is essentially an array of Py_object pointers. And <i>everything in Python is an object</i> including <code>int</code> objects."}], "owner": {"reputation": 79, "user_id": 5400814, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/542283609252362/picture?type=large", "display_name": "Jason  Long", "link": "https://stackoverflow.com/users/5400814/jason-long"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505952416, "creation_date": 1505951432, "last_edit_date": 1505952416, "question_id": 46333332, "link": "https://stackoverflow.com/questions/46333332/python-different-for-loop-implement-get-different-speed-and-even-in-contrast-wit", "title": "python different for-loop implement get different speed and even in contrast with cache mechanism in C", "body": "<p>I learn about caching recently and knowing that it can optimize the program by improve the probability to hit the cache. And there is a piece of code that can get different time in C.</p>\n\n<pre><code>a[100][5000]=...//initialize\nfor(i=0; i&lt;100; i=i+1) {\n  for(j=0; j&lt;5000; j=j+1) {\n    a[i][j] = 2 * a[i][j];\n  }\n}\n\n\na[100][5000]=...//initialize\nfor(i=0; i&lt;100; i=i+1) {\n  for(j=0; j&lt;5000; j=j+1) {\n    a[i][j] = 2 * a[i][j];\n  }\n}\n</code></pre>\n\n<p>The below one is faster than above one. But in python get different result in below code.The principle is below one can hit the cache in cache Line but above one should visit the mem more frequently.</p>\n\n<pre><code>arr1 = [[i for i in range(5000)] for j in range(100)]\narr2 = [[i for i in range(5000)] for j in range(100)]\ndef test1():\n    start = time.time()\n    for i in range(5000):\n        for j in range(100):\n            arr1[i][j] = 2 * arr1[i][j]\n\ndef test2():\n    start = time.time()\n    sum = 0\n    for j in range(100):\n        for i in range(5000):\n            arr2[i][j] = 2 * arr2[i][j]\n%timeit -n100 test1() \n%timeit -n100 test2()\n# 1.16 s \u00b1 67.2 ms per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n# 1.5 s \u00b1 101 ms per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<p>I wonder if the cache mechanism is diff in this two program language and the basic python is implemented by C?</p>\n"}, {"tags": ["python", "python-2.7", "concurrency", "atomic", "atomicity"], "comments": [{"owner": {"reputation": 228, "user_id": 7271239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/255efc380d0f6a70e1d70a54cdcf10a7?s=128&d=identicon&r=PG&f=1", "display_name": "DataEngineer", "link": "https://stackoverflow.com/users/7271239/dataengineer"}, "edited": false, "score": 0, "creation_date": 1505951423, "post_id": 46333301, "comment_id": 79627428, "body": "I was wondering are we working with python3 or python2.7 here?"}, {"owner": {"reputation": 43, "user_id": 6157555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3596b78f77e2e3f4330973632ee7ad2e?s=128&d=identicon&r=PG&f=1", "display_name": "Li Chen Koh", "link": "https://stackoverflow.com/users/6157555/li-chen-koh"}, "reply_to_user": {"reputation": 228, "user_id": 7271239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/255efc380d0f6a70e1d70a54cdcf10a7?s=128&d=identicon&r=PG&f=1", "display_name": "DataEngineer", "link": "https://stackoverflow.com/users/7271239/dataengineer"}, "edited": false, "score": 1, "creation_date": 1505951552, "post_id": 46333301, "comment_id": 79627454, "body": "Right now I&#39;m using Python 2.7. Will it be different in Python 3?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1505953468, "post_id": 46333301, "comment_id": 79627885, "body": "Why do you care? Invoking the <code>copy</code> method is going to be marginally faster than invoking the built-in <code>set</code> constructor, but that has nothing to do with atomicity. What&#39;s the goal?"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1505953631, "post_id": 46333301, "comment_id": 79627922, "body": "I suspect it may depend on what you mean by &quot;atomic&quot;. Most operations on builtin objects are &quot;atomic&quot; in the sense that they won&#39;t let another operation run in another thread break their internal state. That doesn&#39;t mean the operations are guaranteed to run in a specific order, just that the object will be in a sane state at the end."}, {"owner": {"reputation": 43, "user_id": 6157555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3596b78f77e2e3f4330973632ee7ad2e?s=128&d=identicon&r=PG&f=1", "display_name": "Li Chen Koh", "link": "https://stackoverflow.com/users/6157555/li-chen-koh"}, "edited": false, "score": 0, "creation_date": 1505954538, "post_id": 46333301, "comment_id": 79628086, "body": "I see, I think having the object be a sane state at the end would be sufficient. I don&#39;t need to guarantee the operations are run in a specific order."}], "answers": [{"comments": [{"owner": {"reputation": 16558, "user_id": 1804173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/53f721a451a1c68caf8316cefcde3083?s=128&d=identicon&r=PG", "display_name": "bluenote10", "link": "https://stackoverflow.com/users/1804173/bluenote10"}, "edited": false, "score": 0, "creation_date": 1579098650, "post_id": 46335759, "comment_id": 105653224, "body": "Are you sure about that, or is there an authoritative reference for that? I just had a script die in a line <code>my_set_copy = my_set.copy()</code> with <code>RuntimeError: Set changed size during iteration</code> (the set was indeed modified from a different thread)."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 16558, "user_id": 1804173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/53f721a451a1c68caf8316cefcde3083?s=128&d=identicon&r=PG", "display_name": "bluenote10", "link": "https://stackoverflow.com/users/1804173/bluenote10"}, "edited": false, "score": 0, "creation_date": 1579105328, "post_id": 46335759, "comment_id": 105657175, "body": "@bluenote10: With what Python version?  The current implementation doesn\u2019t even need to call a user-defined <code>__eq__</code> because it knows the source\u2019s keys are unique."}, {"owner": {"reputation": 16558, "user_id": 1804173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/53f721a451a1c68caf8316cefcde3083?s=128&d=identicon&r=PG", "display_name": "bluenote10", "link": "https://stackoverflow.com/users/1804173/bluenote10"}, "edited": false, "score": 0, "creation_date": 1579107616, "post_id": 46335759, "comment_id": 105658532, "body": "That was on a legacy system running Python 2.7.12."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 16558, "user_id": 1804173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/53f721a451a1c68caf8316cefcde3083?s=128&d=identicon&r=PG", "display_name": "bluenote10", "link": "https://stackoverflow.com/users/1804173/bluenote10"}, "edited": false, "score": 1, "creation_date": 1579147083, "post_id": 46335759, "comment_id": 105670604, "body": "@bluenote10: Well, that\u2019s the version for which the question was asked, so that\u2019s only fair.  I\u2019ve added information for that version, where the answer is <b>sometimes</b>.  Sorry to have stated it too simply before."}, {"owner": {"reputation": 16558, "user_id": 1804173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/53f721a451a1c68caf8316cefcde3083?s=128&d=identicon&r=PG", "display_name": "bluenote10", "link": "https://stackoverflow.com/users/1804173/bluenote10"}, "edited": false, "score": 0, "creation_date": 1579168108, "post_id": 46335759, "comment_id": 105677859, "body": "That&#39;s very helpful, thanks for digging out the differences."}], "tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 3, "last_activity_date": 1579146974, "last_edit_date": 1579146974, "creation_date": 1505969888, "answer_id": 46335759, "question_id": 46333301, "link": "https://stackoverflow.com/questions/46333301/is-set-copy-atomic-in-python/46335759#46335759", "title": "Is set.copy() atomic in Python?", "body": "<p>In CPython since version 3.5, the copy is atomic as far as is visible from Python (because, as usual, of the <strong>global interpreter lock</strong>).  No other thread can alter <code>set1</code> while it is being copied, so you will obtain a copy of <em>some</em> state that the set was in during the manipulations made by (other) threads.</p>\n\n<p>In <strong>older</strong> versions (like the one tagged here!), the routine that added the elements of the original set to the new (initially empty) copy did not take advantage of the fact that, coming from a <code>set</code>, all the values were unique; as such, it uses <code>==</code> to rediscover that fact.  If that comparison is implemented in <strong>Python</strong> (or by certain C extensions that release the GIL), then the process can be interrupted by other threads (and fail arbitrarily).</p>\n"}], "owner": {"reputation": 43, "user_id": 6157555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3596b78f77e2e3f4330973632ee7ad2e?s=128&d=identicon&r=PG&f=1", "display_name": "Li Chen Koh", "link": "https://stackoverflow.com/users/6157555/li-chen-koh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 46335759, "answer_count": 1, "score": 4, "last_activity_date": 1579146974, "creation_date": 1505951190, "last_edit_date": 1505952489, "question_id": 46333301, "link": "https://stackoverflow.com/questions/46333301/is-set-copy-atomic-in-python", "title": "Is set.copy() atomic in Python?", "body": "<p>Suppose we have an instance variable in a class.  </p>\n\n<pre><code>class MyClass(object):  \n    def __init__():  \n        self.set1 = set()  \n</code></pre>\n\n<p>Is the following operation atomic?</p>\n\n<pre><code>set_shallow_copy = self.set1.copy()\n</code></pre>\n\n<p>I've tried to search around, but the only information I've found is that reading instance variables are atomic.</p>\n\n<p>(Edit)\nI tried to decompile the bytecode (Python 2.7 on Windows), but it's not too useful. It just shows Python bytecode that calls the <code>copy</code> function on <code>set</code>.  </p>\n\n<pre><code> 9 LOAD_FAST                0 (s)  \n 12 LOAD_ATTR                1 (copy)  \n 15 CALL_FUNCTION            0 \n 18 STORE_FAST               1 (s2) \n 21 LOAD_CONST               0 (None) \n 24 RETURN_VALUE \n</code></pre>\n\n<p>(Edit 2): I wonder if using set2 = set(set1) might be better.</p>\n\n<pre><code>         9 LOAD_GLOBAL              0 (set)  \n         12 LOAD_FAST                0 (set1)  \n         15 CALL_FUNCTION            1  \n         18 STORE_FAST               1 (set2)  \n         21 LOAD_CONST               0 (None)  \n         24 RETURN_VALUE\n</code></pre>\n"}, {"tags": ["python", "pip", "setuptools", "setup.py", "python-c-api"], "answers": [{"tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": true, "score": 1, "last_activity_date": 1506094549, "creation_date": 1506094549, "answer_id": 46368345, "question_id": 46333210, "link": "https://stackoverflow.com/questions/46333210/how-to-include-script-built-libraries-with-package-installation/46368345#46368345", "title": "How to include (script-built) libraries with package installation?", "body": "<pre><code>package_data={\n    'mypack': [\n        'clib/include/*.h',\n        'clib/lib/*.so',\n        'docs/*md',\n    ]\n},\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 5915738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18aaa24f1fbb5c1cdb46301d32cb161a?s=128&d=identicon&r=PG&f=1", "display_name": "user5915738", "link": "https://stackoverflow.com/users/5915738/user5915738"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1052, "favorite_count": 0, "accepted_answer_id": 46368345, "answer_count": 1, "score": 2, "last_activity_date": 1506094549, "creation_date": 1505950370, "last_edit_date": 1505950822, "question_id": 46333210, "link": "https://stackoverflow.com/questions/46333210/how-to-include-script-built-libraries-with-package-installation", "title": "How to include (script-built) libraries with package installation?", "body": "<p>I am making a Python package that has a C++-extension module and someone else's shared library that it requires. I want everything installable via <code>pip</code>. My current <code>setup.py</code> file works when I use <code>pip install -e .</code> but when I don't use develop mode (e.i. omit the <code>-e</code>) I get <em>\"cannot open shared object file\"</em> when importing the module in Python. I believe the reason is that setuptools doesn't consider the shared library to be part of my package, so the relative link to the library is broken during installation when files are copied to the install directory.</p>\n\n<p>Here is what my <code>setup.py</code> file looks like:</p>\n\n<pre><code>from setuptools import setup, Extension, Command\nimport setuptools.command.develop\nimport setuptools.command.build_ext\nimport setuptools.command.install\nimport distutils.command.build\nimport subprocess\nimport sys\nimport os\n\n# This function downloads and builds the shared-library\ndef run_clib_install_script():\n    build_clib_cmd = ['bash', 'clib_install.sh']\n    if subprocess.call(build_clib_cmd) != 0:\n        sys.exit(\"Failed to build C++ dependencies\")\n\n# I make a new command that will build the shared-library\nclass build_clib(Command):\n    user_options = []\n    def initialize_options(self):\n        pass\n    def finalize_options(self):\n        pass\n    def run(self):\n        run_clib_install_script()\n\n# I subclass install so that it will call my new command\nclass install(setuptools.command.install.install):\n    def run(self):\n        self.run_command('build_clib')\n        setuptools.command.install.install.run(self)\n\n# I do the same for build...\nclass build(distutils.command.build.build):\n    sub_commands = [\n        ('build_clib', lambda self: True),\n        ] + distutils.command.build.build.sub_commands\n\n# ...and the same for develop\nclass develop(setuptools.command.develop.develop):\n    def run(self):\n        self.run_command('build_clib')\n        setuptools.command.develop.develop.run(self)\n\n# These are my includes...\n# note that /clib/include only exists after calling clib_install.sh\ncwd = os.path.dirname(os.path.abspath(__file__))\ninclude_dirs = [\n    cwd,\n    cwd + '/clib/include',\n    cwd + '/common',\n]\n\n# These are my arguments for the compiler to my shared-library\nlib_path = os.path.join(cwd, \"clib\", \"lib\")\nlibrary_dirs = [lib_path]\nlink_args = [os.path.join(lib_path, \"libclib.so\")]\n\n# My extension module gets these arguments so it can link to clib\nmygen_module = Extension('mygen',\n                    language=\"c++14\",\n                    sources=[\"common/mygen.cpp\"],\n                    libraries=['clib'],\n                    extra_compile_args=['-std=c++14'],\n                    include_dirs=include_dirs,\n                    library_dirs=library_dirs,\n                    extra_link_args=link_args\n                        + ['-Wl,-rpath,$ORIGIN/../clib/lib'])\n\n# I use cmdclass to override the default setuptool commands\nsetup(name='mypack',\n      cmdclass = {'install': install,\n                  'build_clib': build_clib, 'build': build,\n                  'develop': develop},\n      packages=['mypack'],\n      ext_package='mypack',\n      ext_modules=[mygen_module],\n      # package_dir={'mypack': '.'},\n      # package_data={'mypack': ['docs/*md']},\n      include_package_data=True)\n</code></pre>\n\n<p>I subclass some of the setuptools commands in order to build the shared-library before it compiles the extension. <code>clib_install.sh</code> is a bash script that locally downloads and builds the shared library in <code>/clib</code>, creating the headers (in <code>/clib/include</code>) and .so file (in <code>/clib/lib</code>). To solve problems with linking to shared-library dependencies I used <code>$ORIGIN/../clib/lib</code> as a link argument so that the absolute path to <code>clib</code> isn't needed.</p>\n\n<p>Unfortunately, the <code>/clib</code> directory doesn't get copied to the install location. I tried tinkering with <code>package_data</code> but it didn't copy my directory over. In fact, I don't even know what pip/setuptools does with <code>/clib</code> after the script is called, I guess it is made in some temporary build directory and gets deleted after. I am not sure how to get <code>/clib</code> to where it needs to be after it is made.</p>\n"}, {"tags": ["python", "sockets"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505950376, "post_id": 46333193, "comment_id": 79627218, "body": "Read a line from the socket, use <code>split()</code> to separate the values, then substitute that list into the cursor."}, {"owner": {"reputation": 501, "user_id": 3830748, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8de41d16c9a16f4ab68ddaf60b395fb2?s=128&d=identicon&r=PG&f=1", "display_name": "teamg", "link": "https://stackoverflow.com/users/3830748/teamg"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505961570, "post_id": 46333193, "comment_id": 79629544, "body": "@Barmar I got it to split the line:  [&#39;0000&#39;, &#39;192.168.1.1&#39;, &#39;2017-09-20-21:55:31&#39;].  How do I go about setting ID=0000, IP=192.168.1.1. Date=2017...?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505980389, "post_id": 46333193, "comment_id": 79636379, "body": "Read any tutorial on prepared statements in Python SQL."}], "owner": {"reputation": 501, "user_id": 3830748, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8de41d16c9a16f4ab68ddaf60b395fb2?s=128&d=identicon&r=PG&f=1", "display_name": "teamg", "link": "https://stackoverflow.com/users/3830748/teamg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505950249, "creation_date": 1505950249, "question_id": 46333193, "link": "https://stackoverflow.com/questions/46333193/python-socket-listen-for-incoming-netcat-send-to-mysql", "title": "python socket listen for incoming netcat send to mysql", "body": "<p>I have a remote server which sends it's hostname, ip and time every 5 minutes via netcat:</p>\n\n<pre><code>/bin/echo 'host433 192.168.1.1 2017-09-20-21:55:31'|/usr/bin/nc 192.50.38.188 10000\n</code></pre>\n\n<p>My listening server receives it just fine with a:</p>\n\n<pre><code>nc -lk 10000 \nhost433 192.168.1.1 2017-09-20-21:55:31\n</code></pre>\n\n<p>I'm working on a python script which will do what the nc -l does but takes the incoming data and write it to a database.  This is what I have thus far:</p>\n\n<pre><code>#!/usr/bin/python\nimport sys,socket\nimport MySQLdb as dbi\n\ncon = dbi.connect(\"localhost\",\"root\",\"password\",\"hostips\")\ncur = con.cursor()\ns = socket.socket()\nport = 10000\ns.bind(('', port))\ns.listen(5)\n\nwhile True:\n   # Establish connection with client.\n   c, addr = s.accept()\n   clean =  addr[0]\n\n   SQL = (\"INSERT INTO hostips(ID, IP, Time)\"\n         \" VALUES('hostname', 'ip', 'timestamp')\")\n\n   try:\n      cur.execute(SQL)\n      con.commit()\n   except dbi.Error,e:\n      sys.stderr.write(\"SQL failed: \"+SQL+\"\\n\")\n\n   sys.stdout.flush()\n   c.close()\n</code></pre>\n\n<p>My question is how do I parse the incoming data and set them as variable for hostname, ip and timestamp to write to my database?</p>\n\n<p>I'd appreciate any help.</p>\n"}, {"tags": ["python", "django", "algorithm", "binary-tree", "django-mptt"], "comments": [{"owner": {"reputation": 165, "user_id": 3889368, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8a23414a6e7834f8ab04a53c58cfae8c?s=128&d=identicon&r=PG&f=1", "display_name": "Softsofter", "link": "https://stackoverflow.com/users/3889368/softsofter"}, "reply_to_user": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1505951406, "post_id": 46333143, "comment_id": 79627421, "body": "Hello Paul, im see that &quot;Deleting a node with two children&quot; return un result that is not the wanted predecessor."}, {"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1505951859, "post_id": 46333143, "comment_id": 79627527, "body": "Sry, I misread the question. My bad. I&#39;ve retracted the vote."}, {"owner": {"reputation": 165, "user_id": 3889368, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8a23414a6e7834f8ab04a53c58cfae8c?s=128&d=identicon&r=PG&f=1", "display_name": "Softsofter", "link": "https://stackoverflow.com/users/3889368/softsofter"}, "reply_to_user": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1505957666, "post_id": 46333143, "comment_id": 79628717, "body": "Thanks, this example have other priority, like is most important ascendente then left side and then right side."}, {"owner": {"reputation": 955, "user_id": 2012422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa63e9919136deb873c55bd717ac4c96?s=128&d=identicon&r=PG", "display_name": "matias elgart", "link": "https://stackoverflow.com/users/2012422/matias-elgart"}, "edited": false, "score": 0, "creation_date": 1505957818, "post_id": 46333143, "comment_id": 79628745, "body": "try showing us all the code you&#39;re working with, not just a section of it. describe what you expected to see and what you&#39;re seeing instead."}], "owner": {"reputation": 165, "user_id": 3889368, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8a23414a6e7834f8ab04a53c58cfae8c?s=128&d=identicon&r=PG&f=1", "display_name": "Softsofter", "link": "https://stackoverflow.com/users/3889368/softsofter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505951825, "creation_date": 1505949919, "last_edit_date": 1505951825, "question_id": 46333143, "link": "https://stackoverflow.com/questions/46333143/how-to-delete-from-binarytree-data-and-upgrade-descendents-django-mptt", "title": "How to delete from binarytree data and upgrade descendents ? django-mptt", "body": "<p>im trying a same days to solve, but i cant image the algorithm for this.</p>\n\n<p>for example have a binary tree.</p>\n\n<pre><code>#               [1]          \n#       [2]              [3]\n#   [4]    [5]       [6]    [7]\n# [8][9][10][11]  [12][13][14][15]\n</code></pre>\n\n<p>im need to delete [3], and the logical upgrade of descendents is, [6] in espace of [3], and [7] on space of [6]...\n[14] on space of [7]...\nalways on logical up and left movement.</p>\n\n<p>im try to apply this conditions if can convert this tree to a list python data based on element deleted.</p>\n\n<pre><code># if list[0].children == 0 :\n#   element.delete\n# if list[0].children == 1 :\n#   list[0] go to element.position\n# if list[0].children == 2 :\n#   list[0] go to element.position\n#   list[1] go to list[0].position\n</code></pre>\n\n<p>im try to using django-mptt but i cant solve o im hang on this.</p>\n"}, {"tags": ["python", "jinja2"], "comments": [{"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 1, "creation_date": 1505949588, "post_id": 46332996, "comment_id": 79627003, "body": "This is not possible, unless you attach a <code>.name</code> property to the object yourself. You might find Ned Batchelder&#39;s essay <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">Facts and Myths About Python Names and Values</a> enlightening."}, {"owner": {"reputation": 103, "user_id": 1721495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c96eb504725ce73d894675a9df4f6e5?s=128&d=identicon&r=PG", "display_name": "Dave N", "link": "https://stackoverflow.com/users/1721495/dave-n"}, "reply_to_user": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 0, "creation_date": 1505950895, "post_id": 46332996, "comment_id": 79627313, "body": "So one (of the many) gaps in my understanding is what is actually passed to the jinja template for name. I understand the point you are making about the name attribute, but what is the &quot;type&quot; of param inside of macro_1arg and what services are available? An object that implements a <b>repr</b> or a single item dictionary of {&quot;name1&quot;:&quot;value1&quot;} of just a string with value &quot;value1&quot; bound to name1?"}], "owner": {"reputation": 103, "user_id": 1721495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c96eb504725ce73d894675a9df4f6e5?s=128&d=identicon&r=PG", "display_name": "Dave N", "link": "https://stackoverflow.com/users/1721495/dave-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505950227, "creation_date": 1505948761, "last_edit_date": 1505949814, "question_id": 46332996, "link": "https://stackoverflow.com/questions/46332996/how-do-i-render-the-name-of-an-object-or-dictionary-in-jinja2", "title": "How do I render the name of an object (or dictionary?) in jinja2", "body": "<p>Using python and jinja2, I want to print the key and value for an object if it exists. It seems it should be simple, but I can't get the output that I want: \nfor an object that is\n{\"name1\": \"value1\", \"name2\":\"value2\"} I would like to print</p>\n\n<pre><code>name1 = value1\nname2 = value2\n</code></pre>\n\n<p>I can accomplish what I want with a jinja 2 parameter macro. </p>\n\n<pre><code>macro_2arg(\"name1\", name1)\n</code></pre>\n\n<p>I would like to accomplish this by just providing the name object.</p>\n\n<pre><code>macro_1arg(name1)\n</code></pre>\n\n<p>I've tried a few things that don't work:</p>\n\n<pre><code>from __future__ import print_function\nfrom jinja2 import Template\n\ntmpl_str = \"\"\"\n{%- macro macro_2arg(param_name, param) %}\n    {%-if param is defined -%}\n    {{param_name}} = {{param}}\n    {%- endif %}\n{%- endmacro %}\n{%- macro macro_1arg(param) %}\n    {%-if param is defined -%}\n    {{param.name}} = {{param}}\n    {%- endif %}\n{%- endmacro %}\n\n{{parameter_2arg(\"name1\", name1)}}\n{{parameter_2arg(\"name2\", name2)}}\n{{parameter_1arg(name1)}}\n{{parameter_1arg(name2)}}\n\"\"\"\n\ntemplate = Template(tmpl_str)\n\nrendered = template.render({\"name1\" : \"value1\", \"name2\" : \"value2\", \"name3\":\"value3\"})\nprint (rendered)\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>name1 = value1\nname2 = value2\n = value1\n = value2\n</code></pre>\n\n<p>What is the correct way to get the \"name\" attribute of the value passed?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 12341, "user_id": 3678068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QWjMd.png?s=128&g=1", "display_name": "Fabricator", "link": "https://stackoverflow.com/users/3678068/fabricator"}, "edited": false, "score": 1, "creation_date": 1505948938, "post_id": 46332983, "comment_id": 79626827, "body": "open the browser&#39;s developer console&#39;s network tab, and you&#39;ll see it&#39;s sending ajax requests in the background"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 8644835, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PZoscGthD-k/AAAAAAAAAAI/AAAAAAAAABE/jF60_1r9SYA/photo.jpg?sz=128", "display_name": "Christian", "link": "https://stackoverflow.com/users/8644835/christian"}, "edited": false, "score": 0, "creation_date": 1506014786, "post_id": 46333074, "comment_id": 79660002, "body": "Thanks... I do not believe my coding knowledge is advanced enough to accomplish this, but hey! At least I scraped what I need from the first page (haha)"}], "tags": [], "owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1505949352, "creation_date": 1505949352, "answer_id": 46333074, "question_id": 46332983, "link": "https://stackoverflow.com/questions/46332983/how-to-loop-through-each-page-of-website-for-web-scraping-with-beautifulsoup/46333074#46333074", "title": "How to loop through each page of website for web scraping with BeautifulSoup", "body": "<p>First, BeautifulSoup doesn't have anything to do with GETing web pages - you get the webpage yourself, then feed it to bs4 for processing. </p>\n\n<p>The problem with the page you linked is that it's javascript - it only renders correctly in a browser (or any other javascript VM). </p>\n\n<p>@Fabricator is on the right track - you'll need to watch the developer console and see what the ajax requests the js is sending to the server. In this case, also take a look at the query string params, which include a param called <code>CurrentPage</code> - that's probably the one you want to focus on.</p>\n"}], "owner": {"reputation": 7, "user_id": 8644835, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PZoscGthD-k/AAAAAAAAAAI/AAAAAAAAABE/jF60_1r9SYA/photo.jpg?sz=128", "display_name": "Christian", "link": "https://stackoverflow.com/users/8644835/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 1, "accepted_answer_id": 46333074, "answer_count": 1, "score": 0, "last_activity_date": 1505949352, "creation_date": 1505948665, "question_id": 46332983, "link": "https://stackoverflow.com/questions/46332983/how-to-loop-through-each-page-of-website-for-web-scraping-with-beautifulsoup", "title": "How to loop through each page of website for web scraping with BeautifulSoup", "body": "<p>I am scraping job posting data from a website using BeautifulSoup. I have working code that does what I need, but it only scrapes the first page of job postings. I am having trouble figuring out how to iteratively update the url to scrape each page. I am new to Python and have looked at a few different solutions to similar questions, but have not figured out how to apply them to my particular url. I think I need to iteratively update the url or somehow click the next button and then loop my existing code through each page. I appreciate any solutions.</p>\n\n<p>url: <a href=\"https://jobs.utcaerospacesystems.com/search-jobs\" rel=\"nofollow noreferrer\">https://jobs.utcaerospacesystems.com/search-jobs</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1505948333, "post_id": 46332886, "comment_id": 79626663, "body": "What about just <code>&quot;Tue\\n&quot;</code>? Also <code>for i in table</code> actually makes <code>i</code> a row of the table, so you don&#39;t want to reindex with <code>i</code>. Anyways, the better idea is to ask if <code>&quot;Tue&quot;</code> is <code>in</code> the line: <code>for row in table: ... if &quot;Tue&quot; in row</code>. For e.g. <code>&quot;Tue&quot; in &quot;Tuesday&quot;</code> returns <code>True</code>."}, {"owner": {"reputation": 441, "user_id": 8237102, "user_type": "registered", "profile_image": "https://graph.facebook.com/1636855676325922/picture?type=large", "display_name": "David Jenkins", "link": "https://stackoverflow.com/users/8237102/david-jenkins"}, "edited": false, "score": 0, "creation_date": 1505948334, "post_id": 46332886, "comment_id": 79626664, "body": "each item in the list tables is a complete line. So, when you have if table[i] == &quot;Tue&quot;, what you are checking is if the entire line contains a single word and that word is Tue. You are NOT simply checking if the word Tue exists somewhere in the line. Best to use a regex in this case or something like: if &#39;Tue&#39; in table[i]."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1505948339, "post_id": 46332886, "comment_id": 79626666, "body": "I don&#39;t understand, what do you expect? <code>&#39;Tue&#39; != &quot;Tue\\r\\n&quot;</code>..., furthermore, as an answer has pointed out, you are incorrectly using a <code>for-loop</code>. Finally, <i>don&#39;t delete from a list while iterating over it</i> (unless you are being very careful...)"}, {"owner": {"reputation": 3, "user_id": 8644844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb3ceb2a2b459d1c287194384e3aec2?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Stevenson", "link": "https://stackoverflow.com/users/8644844/joe-stevenson"}, "edited": false, "score": 0, "creation_date": 1505948615, "post_id": 46332886, "comment_id": 79626733, "body": "Alexander, yeah, my actual code doesn&#39;t use <code>for i in table</code>, I was just throwing something together for the purpose of the question - my real issue with the matching. I can&#39;t use <code>if &quot;Tue&quot; in i</code> because while it will remove the lines that say &quot;Tue&quot;, it will also remove and other lines with the word &quot;Tuesday&quot; in them which must not happen"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1505948663, "post_id": 46332886, "comment_id": 79626745, "body": "Printing data, variables, calculation results, conditions is a good way to easily see what is happening in your loop ... <code>for i in table: print(i, table[i]) ...</code>.  sometimes things aren&#39;t what you expect them to be."}, {"owner": {"reputation": 3, "user_id": 8644844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb3ceb2a2b459d1c287194384e3aec2?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Stevenson", "link": "https://stackoverflow.com/users/8644844/joe-stevenson"}, "edited": false, "score": 0, "creation_date": 1505948773, "post_id": 46332886, "comment_id": 79626780, "body": "juanpa.arrivillaga I already found out about iterating over a list whilst editing it - I have implemented a workaround but its nasty - so I just threw in the for loop as an example, the crux of my problem is making the conditional evaluate properly. I am not trying to evaluate &quot;Tue&quot; and &quot;Tue\\r\\n&quot; together, they are the strings I have tried in the conditional in my code to match what should be their equal in the file"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1505948847, "post_id": 46332886, "comment_id": 79626796, "body": "It helps us if you include a minimal example of the <i>input</i> data,. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 3, "user_id": 8644844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb3ceb2a2b459d1c287194384e3aec2?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Stevenson", "link": "https://stackoverflow.com/users/8644844/joe-stevenson"}, "edited": false, "score": 0, "creation_date": 1505949117, "post_id": 46332886, "comment_id": 79626870, "body": "input data goes like this:  Mon\\r\\n Activity    Module    Session    Day\\r\\n A15QWR    General    1    Monday\\r\\n  etc etc  As you can see, the line containing the word monday is important, but the line with just &quot;Mon&quot; is junk"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1505948439, "post_id": 46332938, "comment_id": 79626686, "body": "Good catch! But also, <code>&#39;Tue&#39; != &quot;Tue\\r\\n&quot;</code>"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1505948558, "post_id": 46332938, "comment_id": 79626717, "body": "To solve the problem @juanpa.arrivillaga states is as simple as checking if &quot;Tue&quot; is in the line instead of if it&#39;s equivalent to the line. And maybe it&#39;d be better to give <code>i</code> a more descriptive name."}], "tags": [], "owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1505948479, "last_edit_date": 1505948479, "creation_date": 1505948332, "answer_id": 46332938, "question_id": 46332886, "link": "https://stackoverflow.com/questions/46332886/matching-strings-to-data-from-a-file-in-python/46332938#46332938", "title": "Matching strings to data from a file in python", "body": "<p><code>for i in table</code> will iterate through the table list, and set i to each member of the list, in your case, a line in the file - a string.</p>\n\n<p>So when your are testing the contents of <code>table[i]</code>, you'll probably get an indexing error (btw, you should post your errors :) ). </p>\n\n<p>Test <code>i</code> instead of <code>table[i]</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 2580, "user_id": 988525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/487zi.jpg?s=128&g=1", "display_name": "Ian McGowan", "link": "https://stackoverflow.com/users/988525/ian-mcgowan"}, "is_accepted": true, "score": 0, "last_activity_date": 1505949398, "creation_date": 1505949398, "answer_id": 46333081, "question_id": 46332886, "link": "https://stackoverflow.com/questions/46332886/matching-strings-to-data-from-a-file-in-python/46333081#46333081", "title": "Matching strings to data from a file in python", "body": "<p>When you do \"for i in table\" the i variable is not a counter into the rows it's the actual row of data. If you want the counter, then this works:</p>\n\n<pre><code>for i, line in enumerate(table):\n</code></pre>\n\n<p>To deal with any possible newline or trailing whitespace rstrip is helpful:</p>\n\n<pre><code>#!/bin/python\nfile = open('a')\ntable = file.readlines()\nfor line in table:\n  if line.rstrip() != 'Tue':\n    print line\n</code></pre>\n\n<p>But you have to be careful about deleting from table - every time you do everything shifts down, so the current del(table[i]) will fail in mysterious ways.  If you really want to create a new array, this works:</p>\n\n<pre><code>#!/bin/python\nfile = open('a')\ntable = file.readlines()\ntable2 = []\nfor line in table:\n  if line.rstrip() != 'Tue':\n    table2.append(line.rstrip())\n\nfor line in table2:\n  print line\n</code></pre>\n\n<p>Which will do something like what you want.</p>\n"}, {"tags": [], "owner": {"reputation": 17342, "user_id": 763269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0c27474bcff67974d6a9fcb43cb7ba4e?s=128&d=identicon&r=PG", "display_name": "Chris Johnson", "link": "https://stackoverflow.com/users/763269/chris-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1505949459, "creation_date": 1505949459, "answer_id": 46333088, "question_id": 46332886, "link": "https://stackoverflow.com/questions/46332886/matching-strings-to-data-from-a-file-in-python/46333088#46333088", "title": "Matching strings to data from a file in python", "body": "<p>Don't read the file as a string. Use a CSV library of some kind and operate on lines as records and columns as fields. There are too many special cases to think about, that someone has already solved for you in a library. </p>\n\n<p><code>tablib</code> is one such library, but there are many to consider based on your taste. </p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 8644844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb3ceb2a2b459d1c287194384e3aec2?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Stevenson", "link": "https://stackoverflow.com/users/8644844/joe-stevenson"}, "is_accepted": false, "score": 0, "last_activity_date": 1505949528, "creation_date": 1505949528, "answer_id": 46333101, "question_id": 46332886, "link": "https://stackoverflow.com/questions/46332886/matching-strings-to-data-from-a-file-in-python/46333101#46333101", "title": "Matching strings to data from a file in python", "body": "<p>Alex actually caught it in the first comment \"Tue\\n\" matches with the document after all. Somewhere along the line the /r must be stripped out.</p>\n"}], "owner": {"reputation": 3, "user_id": 8644844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bb3ceb2a2b459d1c287194384e3aec2?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Stevenson", "link": "https://stackoverflow.com/users/8644844/joe-stevenson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 46333081, "answer_count": 4, "score": 0, "last_activity_date": 1505955461, "creation_date": 1505947998, "last_edit_date": 1505955461, "question_id": 46332886, "link": "https://stackoverflow.com/questions/46332886/matching-strings-to-data-from-a-file-in-python", "title": "Matching strings to data from a file in python", "body": "<p>I have a file, it takes the vague form of a table. newlines (<code>\\r\\n</code>) separate rows and tabs (<code>\\t</code>) separate columns on the rows where there are more than one</p>\n\n<p>I have opened the file and then read it line by line into a list like so:</p>\n\n<pre><code>file = open('data.txt')\ntable = file.readlines()\n</code></pre>\n\n<p>I am now trying to delete certain rows from the file (thus items from the list) that are irrelevant (column headings and such). My attempt looks like this:</p>\n\n<pre><code>for i in table:\n    if table[i] == \"Tue\":\n        del(table[i])\n</code></pre>\n\n<p>but neither <code>\"Tue\"</code> not <code>\"Tue\\r\\n\"</code> are matching with the conditional.\nI have checked the file in <em>notepad++</em> and <code>Tue\\r\\n</code> is all the text on the line.</p>\n\n<p>Where have I gone wrong?</p>\n"}, {"tags": ["python", "django", "python-2.7"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 1, "creation_date": 1505948338, "post_id": 46332877, "comment_id": 79626665, "body": "The documentation for <code>urllib3</code> makes no mention of a <code>urlopen</code> function. It does mention a <code>urlopen</code> method on some internal objects (namely HTTPConnectionPool and PoolManager). Are you sure that&#39;s what you should be using?"}], "answers": [{"tags": [], "owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "is_accepted": false, "score": -1, "last_activity_date": 1505948842, "creation_date": 1505948842, "answer_id": 46333013, "question_id": 46332877, "link": "https://stackoverflow.com/questions/46332877/response-request-urlopenimage-url-attributeerror-module-object-has-no-att/46333013#46333013", "title": "response = request.urlopen(image_url) AttributeError: &#39;module&#39; object has no attribute &#39;urlopen&#39;", "body": "<p><code>request</code> object doesn't have a <code>urlopen</code> attribute. How to fix? Add one, of course!</p>\n\n<pre><code>from urllib3 import request\nimport requests\n\nrequest.urlopen = requests.get\n...\nresponse = request.urlopen(image_url)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "is_accepted": false, "score": 0, "last_activity_date": 1505948939, "creation_date": 1505948939, "answer_id": 46333027, "question_id": 46332877, "link": "https://stackoverflow.com/questions/46332877/response-request-urlopenimage-url-attributeerror-module-object-has-no-att/46333027#46333027", "title": "response = request.urlopen(image_url) AttributeError: &#39;module&#39; object has no attribute &#39;urlopen&#39;", "body": "<p>The <a href=\"http://urllib3.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">documentation of urllib3</a> does not contain a function called urlopen.</p>\n\n<p>You might prefer working with <a href=\"https://docs.python.org/2/library/urllib2.html\" rel=\"nofollow noreferrer\">urllib2</a> which has the function urlopen.</p>\n"}], "owner": {"reputation": 9, "user_id": 8644805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/221a737954b72cbefe38a22620815220?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/8644805/mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1506029673, "creation_date": 1505947937, "last_edit_date": 1506029673, "question_id": 46332877, "link": "https://stackoverflow.com/questions/46332877/response-request-urlopenimage-url-attributeerror-module-object-has-no-att", "title": "response = request.urlopen(image_url) AttributeError: &#39;module&#39; object has no attribute &#39;urlopen&#39;", "body": "<p>Python 2.7.10 and urllib3 are on my computer.\nFollowing is my forms.py file:</p>\n\n<pre><code>from urllib3 import request\n......\nclass ImageCreateForm(forms.ModelForm):\n      def save(self, force_insert=False, force_update=False,\n                commit=True):\n......\nresponse = request.urlopen(image_url)\n</code></pre>\n\n<p>After running server in terminal I got error like this:</p>\n\n<blockquote>\n  <p>AttributeError: 'module' object has no attribute 'urlopen'</p>\n</blockquote>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["python", "parsing", "pyparsing"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1505948581, "post_id": 46332864, "comment_id": 79626721, "body": "pyparsing skips whitespace between tokens by default. Whitespace includes newlines."}, {"owner": {"reputation": 33, "user_id": 3528730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2d85856a926038bbd2a82a81b318e8?s=128&d=identicon&r=PG&f=1", "display_name": "u38cg", "link": "https://stackoverflow.com/users/3528730/u38cg"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505977875, "post_id": 46332864, "comment_id": 79634803, "body": "Yes, but I&#39;ve got an expression specifically to match the newline.  That&#39;s what&#39;s puzzling me."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505979107, "post_id": 46332864, "comment_id": 79635587, "body": "Doesn&#39;t matter. That&#39;s not going to stop it from skipping whitespace to match more <code>element</code>s."}], "answers": [{"tags": [], "owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "is_accepted": false, "score": 2, "last_activity_date": 1506007873, "creation_date": 1506007873, "answer_id": 46347882, "question_id": 46332864, "link": "https://stackoverflow.com/questions/46332864/why-is-this-pyparsing-grammar-not-respecting-line-endings/46347882#46347882", "title": "Why is this pyparsing grammar not respecting line endings?", "body": "<p>You really need just one more line, involving <code>ParserElement.setDefaultWhitespaceChars</code> to remove newlines as one of the default white space characters. I also 'swallow' the newlines with a <code>suppress</code>, like this.</p>\n\n<pre><code>&gt;&gt;&gt; import pyparsing as pp\n&gt;&gt;&gt; pp.ParserElement.setDefaultWhitespaceChars(' \\t')\n&gt;&gt;&gt; element = pp.OneOrMore(pp.Word(pp.alphas)) | pp.Literal(\"|\")\n&gt;&gt;&gt; line = pp.Group(pp.OneOrMore(element)) + pp.White(\"\\n\").suppress()\n&gt;&gt;&gt; top_level = pp.OneOrMore(line)\n&gt;&gt;&gt; f = '''\\\n... sdf dfg sdfgsdfsd | dsfgsdfsd sd sddffds safd | dfgdfg sadf | \n... dsfg gdfg asdsad | gdfgdf dfgdfgdf sdf | dfgdfgdf |\n... '''\n\n&gt;&gt;&gt; r = top_level.parseString(f)\n&gt;&gt;&gt; for item in r.asList():\n...     item\n... \n['sdf', 'dfg', 'sdfgsdfsd', '|', 'dsfgsdfsd', 'sd', 'sddffds', 'safd', '|', 'dfgdfg', 'sadf', '|']\n['dsfg', 'gdfg', 'asdsad', '|', 'gdfgdf', 'dfgdfgdf', 'sdf', '|', 'dfgdfgdf', '|']\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3528730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e2d85856a926038bbd2a82a81b318e8?s=128&d=identicon&r=PG&f=1", "display_name": "u38cg", "link": "https://stackoverflow.com/users/3528730/u38cg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506007873, "creation_date": 1505947817, "question_id": 46332864, "link": "https://stackoverflow.com/questions/46332864/why-is-this-pyparsing-grammar-not-respecting-line-endings", "title": "Why is this pyparsing grammar not respecting line endings?", "body": "<p>I'm writing a parser for a file format, and have an example I've reduced to the following:</p>\n\n<pre><code>import pyparsing as pp\n\nelement = pp.OneOrMore(pp.Word(pp.alphas)) | pp.Literal(\"|\")\nline = pp.Group(pp.OneOrMore(element)) + pp.White(\"\\n\")\ntop_level = pp.OneOrMore(line)\n\nf = \"\"\"\nsdf dfg sdfgsdfsd | dsfgsdfsd sd sddffds safd | dfgdfg sadf | \ndsfg gdfg asdsad | gdfgdf dfgdfgdf sdf | dfgdfgdf |\n\"\"\"\n\nparse_result = top_level.parseString(f)\nprint(parse_result.dump())\n</code></pre>\n\n<p>This gives:</p>\n\n<pre><code>[['sdf', 'dfg', 'sdfgsdfsd', '|', 'dsfgsdfsd', 'sd', 'sddffds', 'safd', '|', 'dfgdfg', 'sadf', '|', 'dsfg', 'gdfg', 'asdsad', '|', 'gdfgdf', 'dfgdfgdf', 'sdf', '|', 'dfgdfgdf', '|'], '\\n']\n[0]:\n  ['sdf', 'dfg', 'sdfgsdfsd', '|', 'dsfgsdfsd', 'sd', 'sddffds', 'safd', '|', 'dfgdfg', 'sadf', '|', 'dsfg', 'gdfg', 'asdsad', '|', 'gdfgdf', 'dfgdfgdf', 'sdf', '|', 'dfgdfgdf', '|']\n[1]:\n</code></pre>\n\n<p>What I want is for each line of text to appear as a separate Group(), and it's not clear to me why the <code>pp.White(\"\\n\")</code> statement isn't matching the first one (I have also tried <code>LineEnd()</code>, with the same result).</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 2, "creation_date": 1505947925, "post_id": 46332860, "comment_id": 79626559, "body": "Wlecome to SO.  Please take the time to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  When asking about code that produces and error/exception, please post the complete traceback."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1505947947, "post_id": 46332860, "comment_id": 79626567, "body": "This code runs without a <code>SyntaxError</code>."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 2, "creation_date": 1505948201, "post_id": 46332860, "comment_id": 79626633, "body": "I get ValueErrors. --&gt; <code>int(&#39;What is the sales amount? &#39;)</code>"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1505948240, "post_id": 46332860, "comment_id": 79626646, "body": "and <code>NameError</code>, but not <code>SyntaxError</code>."}, {"owner": {"reputation": 802, "user_id": 7867348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9N5J0.jpg?s=128&g=1", "display_name": "Kyle Higginson", "link": "https://stackoverflow.com/users/7867348/kyle-higginson"}, "edited": false, "score": 0, "creation_date": 1505950391, "post_id": 46332860, "comment_id": 79627220, "body": "what version of python are you using?"}, {"owner": {"reputation": 1, "user_id": 8644866, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sM1gj6RF88E/AAAAAAAAAAI/AAAAAAAAAEU/btWFe974Ml0/photo.jpg?sz=128", "display_name": "Shadow Fantasy", "link": "https://stackoverflow.com/users/8644866/shadow-fantasy"}, "reply_to_user": {"reputation": 802, "user_id": 7867348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9N5J0.jpg?s=128&g=1", "display_name": "Kyle Higginson", "link": "https://stackoverflow.com/users/7867348/kyle-higginson"}, "edited": false, "score": 0, "creation_date": 1505960815, "post_id": 46332860, "comment_id": 79629388, "body": "@KyleHigginson I am using Python version 3.6."}], "answers": [{"tags": [], "owner": {"reputation": 441, "user_id": 8237102, "user_type": "registered", "profile_image": "https://graph.facebook.com/1636855676325922/picture?type=large", "display_name": "David Jenkins", "link": "https://stackoverflow.com/users/8237102/david-jenkins"}, "is_accepted": false, "score": 1, "last_activity_date": 1505950448, "creation_date": 1505950448, "answer_id": 46333224, "question_id": 46332860, "link": "https://stackoverflow.com/questions/46332860/i-keep-getting-an-invalid-syntax-error-when-trying-to-run-this-program-in-python/46333224#46333224", "title": "I keep getting an invalid syntax error when trying to run this program in python", "body": "<p>You have 2 types of errors in your code:</p>\n\n<p>First:</p>\n\n<pre><code>sales_amount=input(int('What is the sales amount? '))\nhours_worked=input(int('How many hours did they work? '))\n</code></pre>\n\n<p>the function calls to input and int are in the wrong order. What your code says is, \"convert 'What is the sales amount? '\" to an integer and make that the input prompt. Cleary, that string cannot be converted to an int type. What you want is:</p>\n\n<pre><code>sales_amount=int(input('What is the sales amount? '))\nhours_worked=int(input('How many hours did they work? '))\n</code></pre>\n\n<p>Second, you have a scoping error. In display_results() you are making use of the variables name, hourly_pay, commission, gross_pay, withholding, and net_pay. However, those variables only exist within the scope of main. To resolve this you can do one of two things: 1) make them global, or 2) pass them to display_results():</p>\n\n<pre><code>display_results(name, hourly_pay, commission, gross_pay, withholding, net_pay)\n</code></pre>\n\n<p>and then refine your def:</p>\n\n<pre><code>def display_name(name, hourly_pay, commission, gross_pay, withholding, net_pay):\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 802, "user_id": 7867348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9N5J0.jpg?s=128&g=1", "display_name": "Kyle Higginson", "link": "https://stackoverflow.com/users/7867348/kyle-higginson"}, "is_accepted": false, "score": 0, "last_activity_date": 1505950849, "creation_date": 1505950849, "answer_id": 46333263, "question_id": 46332860, "link": "https://stackoverflow.com/questions/46332860/i-keep-getting-an-invalid-syntax-error-when-trying-to-run-this-program-in-python/46333263#46333263", "title": "I keep getting an invalid syntax error when trying to run this program in python", "body": "<p>This is a work around for your errors:</p>\n\n<pre><code>#Define the main function\ndef question_one():\n    # for python 2 use raw_input\n    #numbers = raw_input('What is the person\\'s name?\\n')\n    #for python3 use input\n    numbers = input('Persons name, Sales Amount and Hours Worked\\n')\n    name, sales_amount, hours_worked = numbers.split(',')\n    return name, int(sales_amount), int(hours_worked)\n\n#Define the display_message function\ndef display_message():\n    print('This program calculates a salesperson\\'s pay')\n    print('Five values are required to calculate this')\n    print('Hourly pay', 'Commission', 'Gross pay', 'Withholding')\n    print('and Net pay.')\n\n#Call the main function\ndef main():\n    display_message()\n    HOURLY_PAY_RATE = 7.50\n    COMMISSION_RATE = 0.05\n    WITHHOLDING_RATE = 0.25\n    name, sales_amount, hours_worked = question_one()\n    hourly_pay=hours_worked * HOURLY_PAY_RATE\n    commission=sales_amount * COMMISSION_RATE\n    gross_pay=hourly_pay + commission\n    withholding=gross_pay * WITHHOLDING_RATE\n    net_pay=gross_pay - withholding\n    print('The hourly pay amount for', name, 'is$', format(hourly_pay, ',.2f'))\n    print('The commission amount for', name, 'is$', format(commission, ',.2f'))\n    print('The gross pay for', name, 'is$', format(gross_pay, ',.2f'))\n    print('The withholding amount for$', name, 'is', format(withholding, ',.2f'))\n    print('The net pay for', name, 'is$', format(net_pay, ',.2f'))\n\nmain()\n</code></pre>\n\n<p>Notice in <code>question_one()</code> you have to use different input() functions depending on the version of python you are using. The input for this function would be:</p>\n\n<pre><code>`kyle,30,40`\n</code></pre>\n\n<p>It will take all values from the one line and return your calculated data from this. Each value must be separated by a comma. Hope this helps you.</p>\n"}], "owner": {"reputation": 1, "user_id": 8644866, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sM1gj6RF88E/AAAAAAAAAAI/AAAAAAAAAEU/btWFe974Ml0/photo.jpg?sz=128", "display_name": "Shadow Fantasy", "link": "https://stackoverflow.com/users/8644866/shadow-fantasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1505950849, "creation_date": 1505947784, "question_id": 46332860, "link": "https://stackoverflow.com/questions/46332860/i-keep-getting-an-invalid-syntax-error-when-trying-to-run-this-program-in-python", "title": "I keep getting an invalid syntax error when trying to run this program in python", "body": "<p>It keeps getting stuck on the second def() statement. Beyond that, I need to label the Hourly pay rate, commission pay rate and withholding pay rate as global constants but I keep getting a multiple line statement error. Help?</p>\n\n<pre><code>#Define the main function\ndef main():\n    display_message()\n    HOURLY_PAY_RATE = 7.50\n    COMMISSION_RATE = 0.05\n    WITHHOLDING_RATE = 0.25     \n    name=input('What is the person\\'s name? ')\n    sales_amount=input(int('What is the sales amount? '))\n    hours_worked=input(int('How many hours did they work? '))\n    hourly_pay=hours_worked * HOURLY_PAY_RATE\n    commission=sales_amount * COMMISSION_RATE\n    gross_pay=hourly_pay + commission\n    withholding=gross_pay * WITHHOLDING_RATE\n    net_pay=gross_pay - withholding\n    display_results()\n\n#Define the display_message function\ndef display_message():\n    print('This program calculates a salesperson\\'s pay')\n    print('Five values are required to calculate this')\n    print('Hourly pay', 'Commission', 'Gross pay', 'Withholding')\n    print('and Net pay.')\n\n#Define the display_results function\ndef display_results():\n    print('The hourly pay amount for', name, 'is$', format(hourly_pay, ',.2f'))\n    print('The commission amount for', name, 'is$', format(commission, ',.2f'))\n    print('The gross pay for', name, 'is$', format(gross_pay, ',.2f'))\n    print('The withholding amount for$', name, 'is', format(withholding, ',.2f'))\n    print('The net pay for', name, 'is$', format(net_pay, ',.2f'))\n\n#Call the main function\nmain()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pygame"], "comments": [{"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 0, "creation_date": 1505947847, "post_id": 46332825, "comment_id": 79626547, "body": "The variable &quot;command&quot; might be overridden. Where does it come from? (At the file /Library/Frameworks/Python.framework/Versions/3.6/lib/python&zwnj;&#8203;3.6/ctypes/__init__.&zwnj;&#8203;py)"}, {"owner": {"reputation": 357, "user_id": 7326305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63bf4db79bb2a4e39c925682d012790?s=128&d=identicon&r=PG&f=1", "display_name": "Bradley Robinson", "link": "https://stackoverflow.com/users/7326305/bradley-robinson"}, "edited": false, "score": 1, "creation_date": 1505947854, "post_id": 46332825, "comment_id": 79626549, "body": "Pygame was finally added to the PyPA, did you try running <code>pip3 install pygame</code> instead? While I don&#39;t have MacOS, that might give you the correct installation of pygame. The reason I say this is because in the past I got this same error while trying to install it on Windows with a 64-bit version of Python (which wasn&#39;t supported by PyGame at the time, but now is)"}, {"owner": {"reputation": 1, "user_id": 8644848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TvRgIaY_l1I/AAAAAAAAAAI/AAAAAAAAABk/ERweRdwJYHE/photo.jpg?sz=128", "display_name": "Andrius Malinauskas", "link": "https://stackoverflow.com/users/8644848/andrius-malinauskas"}, "reply_to_user": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 0, "creation_date": 1505949169, "post_id": 46332825, "comment_id": 79626889, "body": "@IdanMeyer if I remember correctly I may have downloaded it sometime ago just too see how it works. Do you think the problem is because of that?"}, {"owner": {"reputation": 1, "user_id": 8644848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TvRgIaY_l1I/AAAAAAAAAAI/AAAAAAAAABk/ERweRdwJYHE/photo.jpg?sz=128", "display_name": "Andrius Malinauskas", "link": "https://stackoverflow.com/users/8644848/andrius-malinauskas"}, "reply_to_user": {"reputation": 357, "user_id": 7326305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63bf4db79bb2a4e39c925682d012790?s=128&d=identicon&r=PG&f=1", "display_name": "Bradley Robinson", "link": "https://stackoverflow.com/users/7326305/bradley-robinson"}, "edited": false, "score": 0, "creation_date": 1505949183, "post_id": 46332825, "comment_id": 79626896, "body": "@BradleyRobinson I tried, but I get same error.."}, {"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 0, "creation_date": 1505949328, "post_id": 46332825, "comment_id": 79626935, "body": "@AndriusMalinauskas I really do not know, but it might be."}, {"owner": {"reputation": 1, "user_id": 8644848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TvRgIaY_l1I/AAAAAAAAAAI/AAAAAAAAABk/ERweRdwJYHE/photo.jpg?sz=128", "display_name": "Andrius Malinauskas", "link": "https://stackoverflow.com/users/8644848/andrius-malinauskas"}, "edited": false, "score": 0, "creation_date": 1505949356, "post_id": 46332825, "comment_id": 79626945, "body": "And by the way, I managed to install pygame on my Python 2.7 version (accidentally lol because I didn&#39;t added &#39;3&#39; to python when installing. But I can&#39;t manage to install it to 3.6 version."}, {"owner": {"reputation": 1, "user_id": 8644848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TvRgIaY_l1I/AAAAAAAAAAI/AAAAAAAAABk/ERweRdwJYHE/photo.jpg?sz=128", "display_name": "Andrius Malinauskas", "link": "https://stackoverflow.com/users/8644848/andrius-malinauskas"}, "reply_to_user": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 2, "creation_date": 1505950225, "post_id": 46332825, "comment_id": 79627182, "body": "@IdanMeyer I deleted that file and Pygame installed succesfully! Thank you very much!!"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 8634573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d13d8bb11984cb48d4657b76c4f370?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj Yarlagadda", "link": "https://stackoverflow.com/users/8634573/bharadwaj-yarlagadda"}, "is_accepted": false, "score": 0, "last_activity_date": 1505950311, "creation_date": 1505950311, "answer_id": 46333203, "question_id": 46332825, "link": "https://stackoverflow.com/questions/46332825/cant-install-pygame-on-mac-os/46333203#46333203", "title": "Can&#39;t install Pygame on Mac OS", "body": "<p>You might want to try this (Specify a tag at the end):</p>\n\n<pre><code>$ pip install hg+https://bitbucket.org/pygame/pygame@1.9.3\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8644848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TvRgIaY_l1I/AAAAAAAAAAI/AAAAAAAAABk/ERweRdwJYHE/photo.jpg?sz=128", "display_name": "Andrius Malinauskas", "link": "https://stackoverflow.com/users/8644848/andrius-malinauskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1586778349, "creation_date": 1505947615, "question_id": 46332825, "link": "https://stackoverflow.com/questions/46332825/cant-install-pygame-on-mac-os", "title": "Can&#39;t install Pygame on Mac OS", "body": "<p>I am trying to install Pygame on Python 3.6, but when I write:</p>\n\n<pre><code>pip3 install hg+http://bitbucket.org/pygame/pygame\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/bin/pip3\", line 7, in &lt;module&gt;\n    from pip import main\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/pip/__init__.py\", line 28, in &lt;module&gt;\n    from pip.vcs import git, mercurial, subversion, bazaar  # noqa\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/pip/vcs/mercurial.py\", line 9, in &lt;module&gt;\n    from pip.download import path_to_url\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/pip/download.py\", line 36, in &lt;module&gt;\n    from pip.utils.glibc import libc_ver\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/pip/utils/glibc.py\", line 4, in &lt;module&gt;\n    import ctypes\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/ctypes/__init__.py\", line 89, in &lt;module&gt;\n    get_input()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/ctypes/__init__.py\", line 64, in get_input\n    verb_word = command[0]\nIndexError: list index out of range\n</code></pre>\n\n<p>And I already did all the installs needed for pygame but I still get this... Anyone knows what is the problem and how to fix it? Thank you.</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "logistic-regression"], "comments": [{"owner": {"reputation": 7246, "user_id": 8160718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fFhDh.jpg?s=128&g=1", "display_name": "Gambit1614", "link": "https://stackoverflow.com/users/8160718/gambit1614"}, "edited": false, "score": 0, "creation_date": 1505974241, "post_id": 46332821, "comment_id": 79632928, "body": "Your statement : <code>I need to be very confident about label 0, I am ok if some &#39;0&#39; will be missclassified to 1.</code> is contradicting. First you are saying that you need to be pretty sure about label 0 and then you are saying it&#39;s okay to miscalssify it."}, {"owner": {"reputation": 137, "user_id": 920580, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0f5c495a2a29bddbca1180c160b2b049?s=128&d=identicon&r=PG", "display_name": "Vitaliy", "link": "https://stackoverflow.com/users/920580/vitaliy"}, "reply_to_user": {"reputation": 7246, "user_id": 8160718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fFhDh.jpg?s=128&g=1", "display_name": "Gambit1614", "link": "https://stackoverflow.com/users/8160718/gambit1614"}, "edited": false, "score": 0, "creation_date": 1506014047, "post_id": 46332821, "comment_id": 79659594, "body": "sorry for confision. In other words, i want to sure: if I got 0 for test data, then the probability is very high, near to 99%, but if I got 1, I am ok with lower probabiliity. does it makes sense?"}], "answers": [{"comments": [{"owner": {"reputation": 5130, "user_id": 3888000, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zivqC.jpg?s=128&g=1", "display_name": "Dan Chaltiel", "link": "https://stackoverflow.com/users/3888000/dan-chaltiel"}, "edited": false, "score": 1, "creation_date": 1555850756, "post_id": 46351697, "comment_id": 98236497, "body": "How would you use this scorer in a <code>LogisticRegression</code> model? I cannot find any argument to put it in."}], "tags": [], "owner": {"reputation": 7246, "user_id": 8160718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/fFhDh.jpg?s=128&g=1", "display_name": "Gambit1614", "link": "https://stackoverflow.com/users/8160718/gambit1614"}, "is_accepted": true, "score": 2, "last_activity_date": 1506021696, "creation_date": 1506021696, "answer_id": 46351697, "question_id": 46332821, "link": "https://stackoverflow.com/questions/46332821/predict-certain-label-with-highest-possible-probability-in-logistic-regression/46351697#46351697", "title": "Predict certain label with highest possible probability in logistic regression", "body": "<p>You are basically looking for specificity, which is defined as the <code>TN/(TN+FP)</code>, where TN is True Negative and FP is False Positive. You can read more about this in this <a href=\"http://corysimon.github.io/articles/classification-metrics/\" rel=\"nofollow noreferrer\">blog post</a> and more in <a href=\"https://en.wikipedia.org/wiki/Sensitivity_and_specificity\" rel=\"nofollow noreferrer\">detail here</a>. To implement this you need to use <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.make_scorer.html\" rel=\"nofollow noreferrer\">make_scorer</a> along with <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.confusion_matrix.html\" rel=\"nofollow noreferrer\">confusion_matrix metric</a> in sklearn as follows :</p>\n\n<pre><code>from sklearn.metrics import confusion_matrix\nfrom sklearn.metrics import make_scorer\n\ndef get_TN_rate(y_true,y_pred):\n    tn, fp, fn, tp = confusion_matrix(y_true, y_pred).ravel()\n    specificity = float(tn)/(float(tn)+float(fp))\n    return specificity\n\ntn_rate = make_scorer(get_TN_rate,greater_is_better=True)\n</code></pre>\n\n<p>Now you can use <code>tn_rate</code> as a scoring function to train your classifier.</p>\n"}], "owner": {"reputation": 137, "user_id": 920580, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/0f5c495a2a29bddbca1180c160b2b049?s=128&d=identicon&r=PG", "display_name": "Vitaliy", "link": "https://stackoverflow.com/users/920580/vitaliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 46351697, "answer_count": 1, "score": 1, "last_activity_date": 1506031417, "creation_date": 1505947572, "last_edit_date": 1506031417, "question_id": 46332821, "link": "https://stackoverflow.com/questions/46332821/predict-certain-label-with-highest-possible-probability-in-logistic-regression", "title": "Predict certain label with highest possible probability in logistic regression", "body": "<p>I am building the model, having 12 parameters and {0,1} labels using logistic regression in sklearn. I need to be very confident about label 0, I am ok if some '0' will be missclassified to 1. The purpose of this, that I would like to exclude the data from the processing if the data is classifies to 0.</p>\n\n<p>How can I tune the parameters?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1505947478, "post_id": 46332795, "comment_id": 79626432, "body": "<code>gridList.append(file)</code> is not properly indented. You also aren&#39;t clearing <code>file</code> for each file."}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 8622384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c2be1a8c95107b847ebe1a8b7117049?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Araujo", "link": "https://stackoverflow.com/users/8622384/rafael-araujo"}, "is_accepted": true, "score": 1, "last_activity_date": 1505947699, "creation_date": 1505947699, "answer_id": 46332843, "question_id": 46332795, "link": "https://stackoverflow.com/questions/46332795/create-nested-list-from-os-walk-in-python/46332843#46332843", "title": "Create nested list from os walk in Python", "body": "<p>You are almost there, just change the line of <code>append</code> in your code:</p>\n\n<pre><code>for name in files:\n    file.append([name,path])\n</code></pre>\n"}], "owner": {"reputation": 7886, "user_id": 2455424, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9df3e17871a8353aa8069c299c2add85?s=128&d=identicon&r=PG", "display_name": "Prithviraj Mitra", "link": "https://stackoverflow.com/users/2455424/prithviraj-mitra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 46332843, "answer_count": 1, "score": 0, "last_activity_date": 1505947699, "creation_date": 1505947403, "question_id": 46332795, "link": "https://stackoverflow.com/questions/46332795/create-nested-list-from-os-walk-in-python", "title": "Create nested list from os walk in Python", "body": "<p>I am trying to create a nested list which will look like</p>\n\n<p><code>[['a','b'],['c','d']]</code></p>\n\n<p>Code-</p>\n\n<pre><code>gridList = []\nfile = []\n\n    for path, subdirs, files in os.walk(root):\n        for name in files:\n            file.append(name)\n            file.append(path)\ngridList.append(file)\nprint(gridList)\n</code></pre>\n\n<p>It produces the following list which is not correct.</p>\n\n<p><code>[['a','b','c','d']]</code></p>\n\n<p>Any help is highly appreciated. Thanks in advance.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1505947841, "post_id": 46332842, "comment_id": 79626546, "body": "Time to start a new ipython sesh... ;)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1505948008, "post_id": 46332842, "comment_id": 79626586, "body": "<code>[560]</code> is light weight (-:"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1505948012, "post_id": 46332842, "comment_id": 79626587, "body": "@juanpa.arrivillaga going to close it :)"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 4, "last_activity_date": 1505947920, "last_edit_date": 1505947920, "creation_date": 1505947698, "answer_id": 46332842, "question_id": 46332764, "link": "https://stackoverflow.com/questions/46332764/pandas-conditionaly-swap-values-in-two-columns/46332842#46332842", "title": "Pandas conditionaly swap values in two columns", "body": "<p>Try this ? By using <code>np.where</code> </p>\n\n<pre><code>ary=np.where(df.a&lt;0,[df.b,df.a],[df.a,df.b])\npd.DataFrame({'a':ary[0],'b':ary[1]})\n\nOut[560]: \n   a  b\n0  3 -1\n1  3 -1\n2  8 -1\n3  2  9\n4  0  7\n5  0  4\n</code></pre>\n\n<p>Data input :</p>\n\n<pre><code>df\nOut[561]: \n   a  b\n0 -1  3\n1 -1  3\n2 -1  8\n3  2  9\n4  0  7\n5  0  4\n</code></pre>\n\n<p><strong><em>And using <code>apply</code></em></strong> </p>\n\n<pre><code>def swap(x):\n    if x[0] &lt; 0:\n        return [x[1],x[0]]\n    else:\n        return [x[0],x[1]]\n\n\ndf.apply(swap,1)\nOut[568]: \n   a  b\n0  3 -1\n1  3 -1\n2  8 -1\n3  2  9\n4  0  7\n5  0  4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1505948450, "creation_date": 1505948450, "answer_id": 46332948, "question_id": 46332764, "link": "https://stackoverflow.com/questions/46332764/pandas-conditionaly-swap-values-in-two-columns/46332948#46332948", "title": "Pandas conditionaly swap values in two columns", "body": "<p>Out of boredom:</p>\n\n<pre><code>df.values[:] = df.values[\n    np.arange(len(df))[:, None],\n    np.eye(2, dtype=int)[(df.a.values &gt;= 0).astype(int)]\n]\n\ndf\n\n   a  b\n0  3 -1\n1  3 -1\n2  8 -1\n3  2  9\n4  0  7\n5  0  4\n</code></pre>\n"}], "owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2730, "favorite_count": 0, "accepted_answer_id": 46332842, "answer_count": 2, "score": 1, "last_activity_date": 1505948450, "creation_date": 1505947145, "question_id": 46332764, "link": "https://stackoverflow.com/questions/46332764/pandas-conditionaly-swap-values-in-two-columns", "title": "Pandas conditionaly swap values in two columns", "body": "<p>I have a Pandas DataFrame with two columns. In some of the rows the columns are swapped. If they're swapped then column \"a\" will be negative. What would be the best way to check that and then swap the values of the two columns.</p>\n\n<pre><code>def swap(a,b):\n    if a &lt; 0:\n        return b,a\n    else:\n        return a,b\n</code></pre>\n\n<p>Is there some way to use apply with this function to swap the two values?</p>\n"}, {"tags": ["python", "mysql", "list", "select", "mysql-python"], "comments": [{"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "edited": false, "score": 0, "creation_date": 1505947490, "post_id": 46332755, "comment_id": 79626439, "body": "<code>print [desig for desig in cursor]</code>"}, {"owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "reply_to_user": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "edited": false, "score": 0, "creation_date": 1505947532, "post_id": 46332755, "comment_id": 79626457, "body": "@OluwafemiSule you can&#39;t iterate on an integer ;)"}, {"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "edited": false, "score": 0, "creation_date": 1505947641, "post_id": 46332755, "comment_id": 79626489, "body": "That should be <code>cursor</code> and not <code>desigs</code> right after <code>execute</code> is called."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505948987, "post_id": 46332797, "comment_id": 79626837, "body": "Don&#39;t you mean list of lists?"}, {"owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505949441, "post_id": 46332797, "comment_id": 79626966, "body": "@Barmar dang it, I had just used <code>array</code> to describe a list somewhere else, and it leaked into stackexchange, how embarrassing. I&#39;ll leave it up to teach myself a lesson."}], "tags": [], "owner": {"reputation": 2933, "user_id": 3434388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uZ9Hf.jpg?s=128&g=1", "display_name": "Danielle M.", "link": "https://stackoverflow.com/users/3434388/danielle-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1505949455, "last_edit_date": 1505949455, "creation_date": 1505947433, "answer_id": 46332797, "question_id": 46332755, "link": "https://stackoverflow.com/questions/46332755/store-output-of-mysql-select-statement-as-python-list/46332797#46332797", "title": "Store output of mysql select statement as python list", "body": "<p><code>cursor.execute()</code> will return the number of rows modified or retrieved.</p>\n\n<p>Once you've executed the query, run <code>cursor.fetchall()</code>, which will return you an array containing each row in your query results. That is, you get an array of arrays. </p>\n\n<p>Edit: list! list of lists!! argh</p>\n"}], "owner": {"reputation": 1052, "user_id": 8474432, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/71c628c0ad8557384540efe8c7cdab1e?s=128&d=identicon&r=PG&f=1", "display_name": "curious_cosmo", "link": "https://stackoverflow.com/users/8474432/curious-cosmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1853, "favorite_count": 0, "accepted_answer_id": 46332797, "answer_count": 1, "score": 0, "last_activity_date": 1505949455, "creation_date": 1505947089, "question_id": 46332755, "link": "https://stackoverflow.com/questions/46332755/store-output-of-mysql-select-statement-as-python-list", "title": "Store output of mysql select statement as python list", "body": "<p>I have a very large table in mysql that I'm accessing through a python script, and I'd like the output of my select query to be stored as a list. Here's what I have:</p>\n\n<pre><code>import MySQLdb\ndb = MySQLdb.connect(host='', user='', passwd='', db='')\ncursor = db.cursor()\n\nsqlselect = \"SELECT desig FROM table WHERE num=0;\"\ndesigs = cursor.execute(sqlselect)\nprint desigs\n</code></pre>\n\n<p>But this just gives me the number of rows in set which is nearly 250,000. Instead, I'd like it to print a list of each 'desig'. How can I do this?</p>\n"}, {"tags": ["python", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1505947245, "creation_date": 1505947245, "answer_id": 46332773, "question_id": 46332721, "link": "https://stackoverflow.com/questions/46332721/how-should-i-serialize-a-dateutil-tz-tzlocal-object/46332773#46332773", "title": "How should I serialize a dateutil.tz.tzlocal object?", "body": "<p>Oh, never mind, <code>tzlocal.utcoffset(now)</code> returns a <a href=\"https://docs.python.org/2/library/datetime.html#datetime.timedelta\" rel=\"nofollow noreferrer\"><code>datetime.timedelta</code></a> and I can just call <code>total_seconds()</code>:</p>\n\n<pre><code>import time\nimport datetime\nimport dateutil\nimport json\n\nnow = datetime.datetime.utcfromtimestamp(time.time())\ntzlocal = dateutil.tz.tzlocal()\ninfo_str = json.dumps(dict(name=tzlocal.tzname(now),\n                       offset=tzlocal.utcoffset(now).total_seconds()))\nprint info_str\n</code></pre>\n\n<p>which prints (on my PC)</p>\n\n<pre><code>{\"name\": \"US Mountain Standard Time\", \"offset\": -25200.0}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2685, "user_id": 496779, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2183c8572a2c93939673dce5ad8fbf04?s=128&d=identicon&r=PG", "display_name": "ben author", "link": "https://stackoverflow.com/users/496779/ben-author"}, "is_accepted": false, "score": 1, "last_activity_date": 1505947296, "creation_date": 1505947296, "answer_id": 46332781, "question_id": 46332721, "link": "https://stackoverflow.com/questions/46332721/how-should-i-serialize-a-dateutil-tz-tzlocal-object/46332781#46332781", "title": "How should I serialize a dateutil.tz.tzlocal object?", "body": "<p>I'm not sure what your application is but as a default I recommend serializing to ISO 8601 timestamps with a time zone offset. Even better, convert to UTC first... this makes things easier for humans who happen to browse the serialized data, because they don't have to do the date math in their head.</p>\n\n<p>There may be performance reasons for sticking with numeric timestamps, but I'd want proof this was a bottleneck in my application before giving up the human-readable bonus of ISO timestamps.</p>\n"}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505947296, "creation_date": 1505946822, "question_id": 46332721, "link": "https://stackoverflow.com/questions/46332721/how-should-i-serialize-a-dateutil-tz-tzlocal-object", "title": "How should I serialize a dateutil.tz.tzlocal object?", "body": "<p>I want to capture a timestamp and the current timezone and serialize it into a file (in JSON or YAML, but that's not really my question) for later retrieval on a different computer.</p>\n\n<p>The timestamp is easy, I'll just use <a href=\"https://docs.python.org/2/library/time.html#time.time\" rel=\"nofollow noreferrer\"><code>time.time()</code></a>.</p>\n\n<p>For getting the current timezone, I read <a href=\"https://stackoverflow.com/questions/30712064/python-datetime-now-with-timezone/30712187#30712187\">another SO question</a> and it seems appropriate to use <a href=\"https://dateutil.readthedocs.io/en/stable/tz.html#dateutil.tz.tzlocal\" rel=\"nofollow noreferrer\"><code>dateutil.tz.tzlocal</code></a>\nto get the current timezone.</p>\n\n<p>Now I just need to figure out how to serialize it. The name is easy, that's just a string, but the offset seems to be weird; I was expecting just a number:</p>\n\n<pre><code>import time\nimport datetime\nimport dateutil\n\nnow = datetime.datetime.utcfromtimestamp(time.time())\ntzlocal = dateutil.tz.tzlocal()\nprint tzlocal.tzname(now)\nprint tzlocal.utcoffset(now)\n</code></pre>\n\n<p>but this prints</p>\n\n<pre><code>US Mountain Standard Time\n-1 day, 17:00:00\n</code></pre>\n\n<p>and the result of utcoffset appears to be an object. How do I just get the number?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 0, "creation_date": 1505946700, "post_id": 46332673, "comment_id": 79626224, "body": "Look at the following answer: <a href=\"https://stackoverflow.com/questions/1388818/how-can-i-compare-two-lists-in-python-and-return-matches\" title=\"how can i compare two lists in python and return matches\">stackoverflow.com/questions/1388818/&hellip;</a>"}, {"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 1, "creation_date": 1505946735, "post_id": 46332673, "comment_id": 79626229, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1388818/how-can-i-compare-two-lists-in-python-and-return-matches\">How can I compare two lists in python and return matches</a>"}, {"owner": {"reputation": 59, "user_id": 8555198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f7f7cc1f9e9633c18abca42a6d5bc1?s=128&d=identicon&r=PG&f=1", "display_name": "rookie_senior", "link": "https://stackoverflow.com/users/8555198/rookie-senior"}, "reply_to_user": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 1, "creation_date": 1505985725, "post_id": 46332673, "comment_id": 79639858, "body": "@Idan Meyer Thanks, but that only adresss how to get the shared elements, not how to count their occurrences in the lists. Actually I had learned from that answer how to use set intersection :)"}], "answers": [{"tags": [], "owner": {"reputation": 966, "user_id": 5669167, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/2cc0p.jpg?s=128&g=1", "display_name": "zython", "link": "https://stackoverflow.com/users/5669167/zython"}, "is_accepted": false, "score": -1, "last_activity_date": 1505946855, "creation_date": 1505946855, "answer_id": 46332726, "question_id": 46332673, "link": "https://stackoverflow.com/questions/46332673/compare-occurrences-of-shared-items-between-lists/46332726#46332726", "title": "Compare occurrences of shared items between lists", "body": "<p>Take a look at the answers linked in the question comments, another way to do this would be like this:</p>\n\n<pre><code>for a in alist:\n    c+= blist.count(a)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8886, "user_id": 866930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4d18c82ab14aa57718bb3343876d53?s=128&d=identicon&r=PG", "display_name": "jrd1", "link": "https://stackoverflow.com/users/866930/jrd1"}, "is_accepted": true, "score": 2, "last_activity_date": 1506012482, "last_edit_date": 1506012482, "creation_date": 1505947115, "answer_id": 46332760, "question_id": 46332673, "link": "https://stackoverflow.com/questions/46332673/compare-occurrences-of-shared-items-between-lists/46332760#46332760", "title": "Compare occurrences of shared items between lists", "body": "<p>You almost had it using the set <code>intersection</code>. Since that gives you the common elements amongst both lists, all you have to do now is loop over that and count the elements. One way could be:</p>\n\n<pre><code>list1 = [0, 1, 2, 3, 1, 2, 3, 4, 3, 2]\nlist2 = [1, 4, 3, 5, 2, 1, 0, 2, 7, 8]\nshared = set(list1).intersection(list2)\n\n# Now, loop over the elements and create a dictionary using a generator.\n# The key will be the shared element, and the value would be a tuple\n# which corresponds to the counts of the first list and the second list, respectively\ncounts = {num:(list1.count(num), list2.count(num)) for num in shared}\n</code></pre>\n\n<p><code>counts</code> now contains:</p>\n\n<pre><code>{\n    0: (1, 1), \n    1: (2, 2), \n    2: (3, 2), \n    3: (3, 1), \n    4: (1, 1)\n}\n</code></pre>\n\n<p>This can further be abstracted into a function similar to:</p>\n\n<pre><code>def count_shared_elements(list1, list2):\n    shared = set(list1).intersection(list2)\n    return {num:(list1.count(num), list2.count(num)) for num in shared}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8886, "user_id": 866930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4d18c82ab14aa57718bb3343876d53?s=128&d=identicon&r=PG", "display_name": "jrd1", "link": "https://stackoverflow.com/users/866930/jrd1"}, "edited": false, "score": 0, "creation_date": 1506013316, "post_id": 46332812, "comment_id": 79659184, "body": "Your code has some minor errors - the first <code>print</code> statement is missing a close parentheses, and the second <code>print</code> and <code>count</code> statements are missing those closing parentheses as well."}, {"owner": {"reputation": 8886, "user_id": 866930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4d18c82ab14aa57718bb3343876d53?s=128&d=identicon&r=PG", "display_name": "jrd1", "link": "https://stackoverflow.com/users/866930/jrd1"}, "edited": false, "score": 0, "creation_date": 1506023153, "post_id": 46332812, "comment_id": 79664305, "body": "You should be aware that this only counts all the unique elements of the <i>union</i> of the two lists, not the common elements!"}], "tags": [], "owner": {"reputation": 51, "user_id": 8634573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d13d8bb11984cb48d4657b76c4f370?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj Yarlagadda", "link": "https://stackoverflow.com/users/8634573/bharadwaj-yarlagadda"}, "is_accepted": false, "score": -1, "last_activity_date": 1506013914, "last_edit_date": 1506013914, "creation_date": 1505947523, "answer_id": 46332812, "question_id": 46332673, "link": "https://stackoverflow.com/questions/46332673/compare-occurrences-of-shared-items-between-lists/46332812#46332812", "title": "Compare occurrences of shared items between lists", "body": "<p>Best way is to get the unique items from two lists and check the count of those distinct numbers in each list.</p>\n\n<pre><code>for distinct_num in set(alist + blist):\n    print(alist.count(distinct_num))\n    print(blist.count(distinct_num))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8886, "user_id": 866930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4d18c82ab14aa57718bb3343876d53?s=128&d=identicon&r=PG", "display_name": "jrd1", "link": "https://stackoverflow.com/users/866930/jrd1"}, "edited": false, "score": 1, "creation_date": 1506013167, "post_id": 46332961, "comment_id": 79659094, "body": "This is not a list comprehension - it&#39;s actually a dictionary comprehension. Also, using the bitwise <code>&amp;</code> operator is actually slower (only marginally, though) in this case as each list has to be converted to a set before any comparison can be done. Compare that functionality to using a set intersection which only requires at least one <code>set</code> variable."}, {"owner": {"reputation": 76, "user_id": 7207037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GfHGdaEvTKs/AAAAAAAAAAI/AAAAAAAAAOM/HX_vqbgt9Z0/photo.jpg?sz=128", "display_name": "Fabio Teixeira", "link": "https://stackoverflow.com/users/7207037/fabio-teixeira"}, "reply_to_user": {"reputation": 8886, "user_id": 866930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4d18c82ab14aa57718bb3343876d53?s=128&d=identicon&r=PG", "display_name": "jrd1", "link": "https://stackoverflow.com/users/866930/jrd1"}, "edited": false, "score": 1, "creation_date": 1507076306, "post_id": 46332961, "comment_id": 80064564, "body": "Thanks for the comment, I already correct to dict as you point, on my Moto Z the bench was very marginally indeed,  running 10.000 times: my code --&gt; 2.2313189506530762 your code-&gt; 2.1449000835418701"}], "tags": [], "owner": {"reputation": 76, "user_id": 7207037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GfHGdaEvTKs/AAAAAAAAAAI/AAAAAAAAAOM/HX_vqbgt9Z0/photo.jpg?sz=128", "display_name": "Fabio Teixeira", "link": "https://stackoverflow.com/users/7207037/fabio-teixeira"}, "is_accepted": false, "score": 1, "last_activity_date": 1507075987, "last_edit_date": 1507075987, "creation_date": 1505948515, "answer_id": 46332961, "question_id": 46332673, "link": "https://stackoverflow.com/questions/46332673/compare-occurrences-of-shared-items-between-lists/46332961#46332961", "title": "Compare occurrences of shared items between lists", "body": "<p>Using list (dict) as jrd1 pointed  comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; list1 = [0, 1, 2, 3, 1, 2, 3, 4, 3, 2]\n&gt;&gt;&gt; list2 = [1, 4, 3, 5, 2, 1, 0, 2, 7, 8]\n&gt;&gt;&gt; {i:(list1.count(i), list2.count(i)) for i in set(list1) &amp; set(list2)}\n{0: (1, 1), 1: (2, 2), 2: (3, 2), 3: (3, 1), 4: (1, 1)}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 8555198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f7f7cc1f9e9633c18abca42a6d5bc1?s=128&d=identicon&r=PG&f=1", "display_name": "rookie_senior", "link": "https://stackoverflow.com/users/8555198/rookie-senior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 46332760, "answer_count": 4, "score": 1, "last_activity_date": 1507075987, "creation_date": 1505946544, "last_edit_date": 1505946794, "question_id": 46332673, "link": "https://stackoverflow.com/questions/46332673/compare-occurrences-of-shared-items-between-lists", "title": "Compare occurrences of shared items between lists", "body": "<p>Ok, for a fun project I'm working on in order to learn some python I'm hitting a wall with what should be a basic task: I need to compare lists for the times items shared among the lists occur in each list. Using\n    <code>shared_items = set(alist).intersection(blist)\ngives me the items shared</code>betwen the lists, but it does not tell me, how often those items occur in each list.\nI tried loops like this for example:</p>\n\n<pre><code>def the_count(alist,blist):\n    c = 0\n    for x in alist:\n        for y in blist:\n            if x == y:\n                c += 1\n    return c\n</code></pre>\n\n<p>but that doesn't do the trick.</p>\n\n<p>Another attempt was to use Counter:</p>\n\n<pre><code>c = Counter(alist)\nb = Counter(blist)\n</code></pre>\n\n<p>But trying to loop over the Counter results failed too, last try was</p>\n\n<pre><code>a = Counter(alist)\nb = Counter(blist)\nfor key, val in a:\n   if key in b:\n    val1 = b[key]\n    if val &lt; val1:\n        print b[key]\n    else:\n        print a[key]\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "conditional"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 8595419, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/27d8ee6da6aa19208f44a1099ca797ce?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/8595419/xavier"}, "edited": false, "score": 0, "creation_date": 1505950691, "post_id": 46332741, "comment_id": 79627271, "body": "Wow! Perfect! This is what I was looking for. Thanks."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 177, "user_id": 8595419, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/27d8ee6da6aa19208f44a1099ca797ce?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/8595419/xavier"}, "edited": false, "score": 0, "creation_date": 1505967291, "post_id": 46332741, "comment_id": 79630815, "body": "@Xavier I edited to use categories, a very handy feature of pandas."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 0, "last_activity_date": 1505967194, "last_edit_date": 1505967194, "creation_date": 1505946985, "answer_id": 46332741, "question_id": 46332632, "link": "https://stackoverflow.com/questions/46332632/selecting-rows-from-a-dataframe-based-on-conditions/46332741#46332741", "title": "Selecting rows from a dataframe based on conditions", "body": "<h3> Edited to add</h3>\n\n<p>The really <em>pandonic</em> way to do this is with <em>categories</em>:</p>\n\n<pre><code>&gt;&gt;&gt; df['Val'] = df.Val.astype('category').cat.set_categories(['High','Mod','Low'], ordered=True)\n&gt;&gt;&gt; df['Val2'] = df.Val2.astype('category').cat.set_categories(['High','Mod','Low'], ordered=True)\n&gt;&gt;&gt; df\n    ID  Num   Val  Val2\n0  ABC   22  High   Low\n1  ABC    2   Low  High\n2  ABC   16  High   Low\n3  DFG   10  High  High\n4  DFG   50  High  High\n5  DFG    3   Low  High\n6  EGF    2   Low  High\n7  2BD   34   Low  High\n8  2BD    2  High  High\n&gt;&gt;&gt; df.dtypes\nID        object\nNum        int64\nVal     category\nVal2    category\ndtype: object\n</code></pre>\n\n<p>So now sorting works how we want!</p>\n\n<pre><code>&gt;&gt;&gt; (df.sort_values(['Val','Num'], ascending=[True, False])\n...    .groupby('ID')\n...    .nth(0))\n     Num   Val  Val2\nID\n2BD    2  High  High\nABC   22  High   Low\nDFG   50  High  High\nEGF    2   Low  High\n</code></pre>\n\n<h3> Original Answer </h3>\n\n<p>Yeah, I think you wan't to use the built-in sorting and <code>groupby</code>, so first, create columns that map your \"High\", \"Mod\", and \"Low\" values to <em>numbers</em> so we can work with them sanely and easily:</p>\n\n<pre><code>&gt;&gt;&gt; df['valmap'] = df.Val.map({'High':0, 'Mod':1, 'Low':2})\n&gt;&gt;&gt; df['val2map'] = df.Val2.map({'High':0, 'Mod':1, 'Low':2})\n&gt;&gt;&gt; df\n    ID  Num   Val  Val2  valmap  val2map\n0  ABC   22  High   Low       0        2\n1  ABC    2   Low  High       2        0\n2  ABC   16  High   Low       0        2\n3  DFG   10  High  High       0        0\n4  DFG   50  High  High       0        0\n5  DFG    3   Low  High       2        0\n6  EGF    2   Low  High       2        0\n7  2BD   34   Low  High       2        0\n8  2BD    2  High  High       0        0\n</code></pre>\n\n<p>And then I think you just want:</p>\n\n<pre><code>&gt;&gt;&gt; df.sort_values(['valmap','Num'], ascending=[True, False]).groupby('ID').nth(0)\n     Num   Val  Val2  val2map  valmap\nID\n2BD    2  High  High        0       0\nABC   22  High   Low        2       0\nDFG   50  High  High        0       0\nEGF    2   Low  High        0       2\n</code></pre>\n\n<p>You can, of course, always select the columns you want specifically:</p>\n\n<pre><code>&gt;&gt;&gt; (df.sort_values(['valmap','Num'], ascending=[True, False])\n...    .groupby('ID')['Num','Val', 'Val2']\n...    .nth(0))\n\n     Num   Val  Val2\nID\n2BD    2  High  High\nABC   22  High   Low\nDFG   50  High  High\nEGF    2   Low  High\n</code></pre>\n\n<p>So, if you think about your requirements:</p>\n\n<p>\"where for the same IDs in the first column, \" => use <code>groupby('ID')</code></p>\n\n<p>\"gives high precedence to 'High' value than 'Low' or 'Mod' and then from among the rows for that ID with 'High' in the Val column select the row with higher value in the 'Num' column.\" => Sort by Val, then by Num (descending), then take the highest.</p>\n"}], "owner": {"reputation": 177, "user_id": 8595419, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/27d8ee6da6aa19208f44a1099ca797ce?s=128&d=identicon&r=PG&f=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/8595419/xavier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 46332741, "answer_count": 1, "score": 1, "last_activity_date": 1505967194, "creation_date": 1505946236, "question_id": 46332632, "link": "https://stackoverflow.com/questions/46332632/selecting-rows-from-a-dataframe-based-on-conditions", "title": "Selecting rows from a dataframe based on conditions", "body": "<p>I have a dataframe:</p>\n\n<pre><code>&gt;&gt;&gt; d = {'ID' : ['ABC', 'ABC', 'ABC', 'DFG', 'DFG', 'DFG', 'EGF', '2BD', '2BD'], 'Val': ['High', 'Low', 'High', 'High', 'High', 'Low', 'Low', 'Low', 'High'], \n... 'Num': [22,2,16,10,50,3,2,34,2], 'Val2':['Low', 'High', 'Low', 'High', 'High', 'High', 'High', 'High', 'High']}\n&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; df = pd.DataFrame(d)\n&gt;&gt;&gt; df\n    ID  Num   Val  Val2\n0  ABC   22  High   Low\n1  ABC    2   Low  High\n2  ABC   16  High   Low\n3  DFG   10  High  High\n4  DFG   50  High  High\n5  DFG    3   Low  High\n6  EGF    2   Low  High\n7  2BD   34   Low  High\n8  2BD    2  High  High\n</code></pre>\n\n<p>Is there a way to apply conditions to rows that have same value in a column, and then apply some conditions to check values in other columns?</p>\n\n<p>I want an output like this:</p>\n\n<pre><code>ID | Val | Num | Val2\n\nABC | High | 22 | Low\nDFG | High | 50 | High\nEGF | Low  | 2  | High\n2BD | High  | 2  | High\n</code></pre>\n\n<p>i.e., where for the same IDs in the first column, it checks the Val column, gives high precedence to 'High' value than 'Low' or 'Mod' and then from among the rows for that ID with 'High' in the Val column select the row with higher value in the 'Num' column. </p>\n\n<p>I'm doing it as follows:</p>\n\n<pre><code>import pandas as pd\nd = {'ID' : ['ABC', 'ABC', 'ABC', 'DFG', 'DFG', 'DFG', 'EGF', '2BD', '2BD'], 'Val': ['High', 'Low', 'High', 'High', 'High', 'Low', 'Low', 'Low', 'High'], 'Num': [22,2,16,10,50,3,2,34,2], 'Val2':['Low', 'High', 'Low', 'High', 'High', 'High', 'High', 'High', 'High']}\ndf = pd.DataFrame(d)\nprint df\n\nx = df.ID.unique().tolist()\nf_df=pd.DataFrame()\nidlist=[]\nvallist=[]\nnumlist=[]\n\nfor i in x:\n    idlist.append(i)\n    new_df = df.loc[df['ID'] == i]\n    h_df = new_df.loc[df['Val'] == 'High']\n    if h_df.empty:\n        m_df = new_df.loc[df['Val'] == 'Mod']\n        if m_df.empty:\n            l_df = new_df.loc[df['Val'] == 'Low']\n            vallist.append('Low')\n            if len(l_df) &gt; 1:\n                m = l_df['Num'].max()\n                numlist.append(m)\n            else:\n                m = l_df['Num'].max()\n                numlist.append(m)\n        else:\n            vallist.append('Mod')\n            if len(m_df) &gt; 1:\n                m = m_df['Num'].max()\n                numlist.append(m)\n            else:\n                m = m_df['Num'].max()\n                numlist.append(m)\n\n    else:\n        vallist.append('High')\n        if len(h_df) &gt; 1:\n            m = h_df['Num'].max()\n            numlist.append(m)\n        else:\n            m = h_df['Num'].max()\n            numlist.append(m)\n\nf_df['ID'] = idlist\nf_df['Val'] = vallist\nf_df['Num'] = numlist\n\nprint f_df\n</code></pre>\n\n<p>Is there a better way to do this? Also, how do I also get corresponding value of <code>Val2</code>in the output? Coz I actually have a dataframe with 12 columns.</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1505946222, "post_id": 46332608, "comment_id": 79626045, "body": "But what in all this would lead you to think that <code>calculator.add</code> would work? Where do you think you are defining it?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505946242, "post_id": 46332608, "comment_id": 79626054, "body": "<code>calculator</code> is not a package and has no <code>add</code>. <code>operations</code> is a package, and you could do <code>from operations import add</code>, but <code>calculator</code> isn&#39;t a package."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8644524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SRo_anQFAxk/AAAAAAAAAAI/AAAAAAAAABA/hpmbW3YoCLc/photo.jpg?sz=128", "display_name": "Kai P.", "link": "https://stackoverflow.com/users/8644524/kai-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1505947001, "creation_date": 1505947001, "answer_id": 46332745, "question_id": 46332608, "link": "https://stackoverflow.com/questions/46332608/init-py-not-working-correctly-in-python/46332745#46332745", "title": "__init__.py not working correctly in python", "body": "<p>You are missing an 'add' function in your calculator module. If you create an 'add' function, I would assume that the code would work.</p>\n\n<p>maybe try doing this in the module calculator:</p>\n\n<pre><code>def add(num1,num2):\n    print(num1+num2)\n    return num1+num2;\n</code></pre>\n\n<p>If you don't want it to print while calculating, remove the print statement.</p>\n\n<p><em>Hope this helps!</em></p>\n"}, {"tags": [], "owner": {"reputation": 231, "user_id": 8301655, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1f9c432ab78ff205f83f3cb1b4cc7f67?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam.", "link": "https://stackoverflow.com/users/8301655/anupam"}, "is_accepted": true, "score": 1, "last_activity_date": 1505947892, "creation_date": 1505947892, "answer_id": 46332874, "question_id": 46332608, "link": "https://stackoverflow.com/questions/46332608/init-py-not-working-correctly-in-python/46332874#46332874", "title": "__init__.py not working correctly in python", "body": "<p>Use the following line in your \"main.py\" file:</p>\n\n<pre><code>from operations.new_operations import power\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 8475720, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3e701295b5433bc6c719685621e1ffc5?s=128&d=identicon&r=PG&f=1", "display_name": "Python Learner", "link": "https://stackoverflow.com/users/8475720/python-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1254, "favorite_count": 0, "accepted_answer_id": 46332874, "answer_count": 2, "score": -1, "last_activity_date": 1555421185, "creation_date": 1505946049, "last_edit_date": 1555421185, "question_id": 46332608, "link": "https://stackoverflow.com/questions/46332608/init-py-not-working-correctly-in-python", "title": "__init__.py not working correctly in python", "body": "<p>i want to make a sample package in python 2.7 just to clear my concepts whose structure looks like this:</p>\n\n<pre>    calculator/\n    main.py\n    operations/\n        file1.py\n        file2.py\n        __init__.py\n        new_operations/\n            __init__.py\n            file3.py</pre>\n\n<p><code>main.py</code> content: (this file is present inside calculator folder)</p>\n\n<pre><code>from operations import power\nprint power(2,2)\n</code></pre>\n\n<p><code>__init__.py</code> content: (this file is present inside operations folder)</p>\n\n<pre><code>from .file1 import add\nfrom .file1 import sub\nfrom .file2 import mul\nfrom .file2 import div\n</code></pre>\n\n<p><code>file1.py</code> content: (this file is present inside operations folder)</p>\n\n<pre><code>def add(a,b):\n    return(a+b)\n\ndef sub(a,b):\n    return(a-b)\n</code></pre>\n\n<p><code>file2.py</code> content: (this file is present inside operations folder)</p>\n\n<pre><code>def mul(a,b):\n    return(a*b)\n\ndef div(a,b):\n    return(a/b)\n</code></pre>\n\n<p><code>__init__.py</code> content: (this file is present inside new_operations folder)</p>\n\n<pre><code>from .file3 import power\n</code></pre>\n\n<p><code>file3.py</code> content: (this file is present inside new_operations folder)</p>\n\n<pre><code>def power(a,b):\n    return(a**b)\n</code></pre>\n\n<p>Now, when i run <code>main.py</code>, i got following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Python27\\mycodes\\calculator\\main.py\", line 3, in &lt;module&gt;\n    from operations import power\nImportError: cannot import name power\n</code></pre>\n\n<p>Can anyone tell me, what mistake i am doing ? Help me.</p>\n"}, {"tags": ["python", "list", "command", "arguments", "system"], "comments": [{"owner": {"reputation": 2227, "user_id": 4175515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dVuYh.jpg?s=128&g=1", "display_name": "Joao  Vitorino", "link": "https://stackoverflow.com/users/4175515/joao-vitorino"}, "edited": false, "score": 0, "creation_date": 1505946291, "post_id": 46332605, "comment_id": 79626079, "body": "try evenOddCalculator.py 1 2 3 4, with space not comma."}, {"owner": {"reputation": 205, "user_id": 4298924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zpZKC.jpg?s=128&g=1", "display_name": "Sarah Collins", "link": "https://stackoverflow.com/users/4298924/sarah-collins"}, "reply_to_user": {"reputation": 2227, "user_id": 4175515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dVuYh.jpg?s=128&g=1", "display_name": "Joao  Vitorino", "link": "https://stackoverflow.com/users/4175515/joao-vitorino"}, "edited": false, "score": 0, "creation_date": 1505947514, "post_id": 46332605, "comment_id": 79626449, "body": "nope, it gives the same results."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1505949290, "post_id": 46332605, "comment_id": 79626921, "body": "So, in general, wrapping a huge block of code in a <code>try-except</code> is not great because you can never be sure <i>where</i> the exception is coming from. Even <i>moreso</i> if you have a &quot;bare except&quot; clause. Try to wrap the minimal amount of code with the <code>try-except</code>, and <i>explicitely catch</i> the exception you are expecting, e.g. <code>except ValueError:</code>, <code>except KeyError</code> etc..."}], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 4298924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zpZKC.jpg?s=128&g=1", "display_name": "Sarah Collins", "link": "https://stackoverflow.com/users/4298924/sarah-collins"}, "edited": false, "score": 0, "creation_date": 1505946406, "post_id": 46332629, "comment_id": 79626130, "body": "It still gives the result: &quot;Your input is invalid!&quot;"}, {"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "reply_to_user": {"reputation": 205, "user_id": 4298924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zpZKC.jpg?s=128&g=1", "display_name": "Sarah Collins", "link": "https://stackoverflow.com/users/4298924/sarah-collins"}, "edited": false, "score": 0, "creation_date": 1505946520, "post_id": 46332629, "comment_id": 79626172, "body": "@SarahCollins it is a bit hard to debug because you have such a large &quot;try&quot; condition. What does listOfNumbers contain after putting list(sys.argv[1]) inside it?"}, {"owner": {"reputation": 205, "user_id": 4298924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zpZKC.jpg?s=128&g=1", "display_name": "Sarah Collins", "link": "https://stackoverflow.com/users/4298924/sarah-collins"}, "edited": false, "score": 0, "creation_date": 1505947467, "post_id": 46332629, "comment_id": 79626423, "body": "This is what I did.  Program code: strOfNumbers = (sys.argv[1])     listOfNumbers = list(strOfNumbers)     print listOfNumbers  Command prompt-line \\evenOddCalculator.py&quot; 12345 [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;] Your input is invalid!"}, {"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "reply_to_user": {"reputation": 205, "user_id": 4298924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zpZKC.jpg?s=128&g=1", "display_name": "Sarah Collins", "link": "https://stackoverflow.com/users/4298924/sarah-collins"}, "edited": false, "score": 0, "creation_date": 1505947679, "post_id": 46332629, "comment_id": 79626504, "body": "@SarahCollins I am sorry but it is not very clear. Does listOfNumbers contain the string &quot;\\evenOddCalculator.py&quot; 12345 [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;] &quot; inside it?"}, {"owner": {"reputation": 205, "user_id": 4298924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zpZKC.jpg?s=128&g=1", "display_name": "Sarah Collins", "link": "https://stackoverflow.com/users/4298924/sarah-collins"}, "edited": false, "score": 0, "creation_date": 1505948063, "post_id": 46332629, "comment_id": 79626599, "body": "It does not.   What I&#39;m saying is I ran the following code in the command prompt. &quot;\\evenOddCalculator.py&quot; 12345 [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;] &quot;"}], "tags": [], "owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "is_accepted": false, "score": 0, "last_activity_date": 1505946224, "creation_date": 1505946224, "answer_id": 46332629, "question_id": 46332605, "link": "https://stackoverflow.com/questions/46332605/using-sys-argv-for-lists-in-command-prompt/46332629#46332629", "title": "Using sys.argv for lists in command prompt", "body": "<p>Your input is invalid because your list contains the commas (',') as well.\nIn order to remove them, you can use the following line:</p>\n\n<pre><code>listOfNumbers = list(sys.argv[1].split(','))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205, "user_id": 4298924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zpZKC.jpg?s=128&g=1", "display_name": "Sarah Collins", "link": "https://stackoverflow.com/users/4298924/sarah-collins"}, "is_accepted": false, "score": 0, "last_activity_date": 1505949243, "creation_date": 1505949243, "answer_id": 46333061, "question_id": 46332605, "link": "https://stackoverflow.com/questions/46332605/using-sys-argv-for-lists-in-command-prompt/46333061#46333061", "title": "Using sys.argv for lists in command prompt", "body": "<p>I got it to work by doing this:</p>\n\n<pre><code>strOfNumbers = sys.argv[1]\nlistOfNumbers= [int(x) for x in strOfNumbers.split(',')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4543, "user_id": 650572, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/bA7hy.jpg?s=128&g=1", "display_name": "Rishi", "link": "https://stackoverflow.com/users/650572/rishi"}, "is_accepted": false, "score": 0, "last_activity_date": 1505954619, "last_edit_date": 1505954619, "creation_date": 1505954288, "answer_id": 46333672, "question_id": 46332605, "link": "https://stackoverflow.com/questions/46332605/using-sys-argv-for-lists-in-command-prompt/46333672#46333672", "title": "Using sys.argv for lists in command prompt", "body": "<p>Here is the working code -</p>\n\n<pre><code>import sys\ntry:\n\n    listOfNumbers_str = list(sys.argv[1:])\n    #print listOfNumbers_str\n    listOfEvenNumbers = []\n    listOfOddNumbers = []\n    listOfNumbers = [int(i) for i in listOfNumbers_str]\n    #print listOfNumbers\n\n    for x in listOfNumbers:\n        if x % 2 == 0:\n            listOfEvenNumbers.append(x)\n        elif x % 2 != 0:\n            listOfOddNumbers.append(x)\n\n    countOfEvenNumbers = len(listOfEvenNumbers)\n    countOfOddNumbers = len(listOfOddNumbers)\n    sumOfEvenNumbers=sum(listOfEvenNumbers)\n    sumOfOddNumbers=sum(listOfOddNumbers)\n    highestNumber=max(listOfNumbers)\n    lowestNumber=min(listOfNumbers)\n    differenceBetweenNumbers = highestNumber - lowestNumber\n    sumOfCenteredNumbers = sum(listOfNumbers) - highestNumber - lowestNumber\n    countOfCenteredNumbers = len(listOfNumbers) - 2\n    centeredAverage = sumOfCenteredNumbers/countOfCenteredNumbers\n    print(\"The sum of all even numbers is %i, the sum of all odd numbers is %i,the difference between the biggest and smallest number is %i, the total number of even numbers is %i, the total number   of odd numbers is %i,the centered average is %i.\")% (sumOfEvenNumbers,sumOfOddNumbers,differenceBetweenNumbers,countOfEvenNumbers,countOfOddNumbers,centeredAverage)\n\nexcept:\n    print(\"Your input is invalid!\")\n</code></pre>\n\n<p>Few things that I changed - </p>\n\n<ol>\n<li><strong>sys.argv[1:]</strong></li>\n</ol>\n\n<p>Gives all the element from index 1 to end </p>\n\n<ol start=\"2\">\n<li><strong>listOfNumbers = [int(i) for i in listOfNumbers_str]</strong></li>\n</ol>\n\n<p>sys.argv returns an array of String elements and not integers, I m using list comprehension here to build a list of integers from the list of String.</p>\n\n<p>Running the program - ></p>\n\n<pre><code>$ python calc.py 1 2 3 4\n['1', '2', '3', '4']\n[1, 2, 3, 4]\nThe sum of all even numbers is 6, the sum of all odd numbers is 4,the difference between the biggest and smallest number is 3, the total number of even numbers is 2, the total number of odd numbers is 2,the centered average is 2.\n</code></pre>\n"}], "owner": {"reputation": 205, "user_id": 4298924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zpZKC.jpg?s=128&g=1", "display_name": "Sarah Collins", "link": "https://stackoverflow.com/users/4298924/sarah-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5974, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1506032861, "creation_date": 1505946032, "last_edit_date": 1506032861, "question_id": 46332605, "link": "https://stackoverflow.com/questions/46332605/using-sys-argv-for-lists-in-command-prompt", "title": "Using sys.argv for lists in command prompt", "body": "<p>My code with an <code>input(\"Enter data\")</code> works, however once I change it to <code>sys.argv</code>, it doesn't. Any advice?</p>\n\n<p>This is the program code:</p>\n\n<pre><code>import sys\ntry:\n\n    listOfNumbers = list(sys.argv[1])\n    listOfEvenNumbers = []\n    listOfOddNumbers = []\n    for x in listOfNumbers:\n        if x % 2 == 0:\n            listOfEvenNumbers.append(x)\n        elif x % 2 != 0:\n            listOfOddNumbers.append(x)\n\n    countOfEvenNumbers = len(listOfEvenNumbers)\n    countOfOddNumbers = len(listOfOddNumbers)\n    sumOfEvenNumbers = sum(listOfEvenNumbers)\n    sumOfOddNumbers = sum(listOfOddNumbers)\n    highestNumber = max(listOfNumbers)\n    lowestNumber = min(listOfNumbers)\n    differenceBetweenNumbers = highestNumber - lowestNumber\n    sumOfCenteredNumbers = sum(listOfNumbers) - highestNumber - lowestNumber\n    countOfCenteredNumbers = len(listOfNumbers) - 2\n    centeredAverage = sumOfCenteredNumbers/countOfCenteredNumbers\n    print(\"The sum of all even numbers is %i, the sum of all odd numbers is %i,the difference between the biggest and smallest number is %i, the total number of even numbers is %i, the total number of odd numbers is %i,the centered average is %i.\")% (sumOfEvenNumbers, sumOfOddNumbers, differenceBetweenNumbers, countOfEvenNumbers, countOfOddNumbers, centeredAverage)\n\nexcept:\n    print(\"Your input is invalid!\")\n</code></pre>\n\n<p>This is the line being used in command prompt: </p>\n\n<pre><code>evenOddCalculator.py 1,2,3,4\n</code></pre>\n\n<p>It gives the result:</p>\n\n<pre><code>Your input is invalid!\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1505948224, "post_id": 46332543, "comment_id": 79626641, "body": "I can never figure out this  kind of awesome answer ... So I noted it in my python note .."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1505948980, "post_id": 46332543, "comment_id": 79626834, "body": "Nice, I&#39;d never heard of <code>toolz</code>, but it sounds super useful... even moreso a Cythonized version. Just a thought, maybe you can use <code>mapcat </code>? I&#39;ve dreamed of an efficient flat-map function in Python!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1505949049, "post_id": 46332543, "comment_id": 79626851, "body": "@juanpa.arrivillaga ok, I&#39;ll look at it."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1505949155, "post_id": 46332543, "comment_id": 79626883, "body": "@piRSquared I <i>believe</i> it can replace <code>concat(map(partial(c, x), ...))</code> with just <code>mapcat(partial(c, x), ...)</code>"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1505949185, "post_id": 46332543, "comment_id": 79626897, "body": "that&#39;s brilliant!"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1505949523, "post_id": 46332543, "comment_id": 79626990, "body": "@piRSquared yep, <i>much better</i> than <code>chain.from_iterable(map(...))</code>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1505949580, "last_edit_date": 1505949580, "creation_date": 1505945685, "answer_id": 46332543, "question_id": 46332530, "link": "https://stackoverflow.com/questions/46332530/python-pandas-get-all-the-combination-and-their-frequency-of-different-column/46332543#46332543", "title": "Python: Pandas: get all the combination and their frequency of different column", "body": "<pre><code>from cytoolz import concat, mapcat\nfrom functools import partial\nfrom itertools import combinations\n\nc = lambda x, k: combinations(x, k)\n\npd.value_counts(list(concat(concat(map(\n    partial(c, x),\n    range(2, df.shape[1] + 1)\n)) for x in df.values.tolist())))\n\n(1, 3)       4\n(1, 2)       3\n(1, 2, 3)    2\n(2, 3)       2\n(5, 9)       1\n(1, 2, 8)    1\n(1, 3, 4)    1\n(2, 8)       1\n(1, 4)       1\n(1, 3, 7)    1\n(1, 5, 9)    1\n(1, 8)       1\n(1, 9)       1\n(1, 7)       1\n(3, 7)       1\n(3, 4)       1\n(1, 5)       1\ndtype: int64\n</code></pre>\n\n<hr>\n\n<p>With @juanpa.arrivillaga's suggestion of <code>mapcat</code></p>\n\n<pre><code>pd.value_counts(list(concat(\n    (mapcat(partial(c, x), range(2, df.shape[1] + 1)) for x in df.values.tolist())\n)))\n\n(1, 3)       4\n(1, 2)       3\n(1, 2, 3)    2\n(2, 3)       2\n(5, 9)       1\n(1, 2, 8)    1\n(1, 3, 4)    1\n(2, 8)       1\n(1, 4)       1\n(1, 3, 7)    1\n(1, 5, 9)    1\n(1, 8)       1\n(1, 9)       1\n(1, 7)       1\n(3, 7)       1\n(3, 4)       1\n(1, 5)       1\ndtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "is_accepted": false, "score": 1, "last_activity_date": 1505947360, "creation_date": 1505947360, "answer_id": 46332790, "question_id": 46332530, "link": "https://stackoverflow.com/questions/46332530/python-pandas-get-all-the-combination-and-their-frequency-of-different-column/46332790#46332790", "title": "Python: Pandas: get all the combination and their frequency of different column", "body": "<p>There may be efficient way, one way may be following:</p>\n\n<pre><code>import pandas as pd\nfrom  itertools import combinations\n\nfrom collections import Counter\n\ndf = pd.DataFrame(data=[[1,2,3],[1,2,3],[1,2,8],[1,5,9],[1,3,7],[1,3,4]],columns=['a','b','c'])\n\n\n# Get columns combination\n# https://stackoverflow.com/a/43348187/5916727\ncc = list(combinations(df.columns, 2))\n\n# Append to new list for combinations\ntmp_list = []\n\nfor columns in cc:\n    tmp_list.append(list(zip(df[columns[0]], df[columns[1]])))\n\n# https://stackoverflow.com/a/32786226/5916727\ntmp_list.append(list(zip(df.a, df.b, df.c)))\n\n# Flatten the list\n# https://stackoverflow.com/a/952952/5916727\nflat_list = [item for sublist in tmp_list for item in sublist]\n\nprint(['{0}:{1}'.format(list(item), count) for item, count in Counter(flat_list).items()])\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>['[1, 2]:3',\n '[5, 9]:1',\n '[1, 2, 8]:1',\n '[1, 3]:4',\n '[2, 8]:1',\n '[1, 3, 4]:1',\n '[1, 3, 7]:1',\n '[1, 4]:1',\n '[1, 2, 3]:2',\n '[1, 5]:1',\n '[1, 8]:1',\n '[2, 3]:2',\n '[1, 9]:1',\n '[1, 7]:1',\n '[3, 7]:1',\n '[3, 4]:1',\n '[1, 5, 9]:1']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2323, "user_id": 4642859, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cbbd31a436ff596d2ea6eebbb5ca477c?s=128&d=identicon&r=PG&f=1", "display_name": "3kt", "link": "https://stackoverflow.com/users/4642859/3kt"}, "is_accepted": true, "score": 3, "last_activity_date": 1505981828, "last_edit_date": 1505981828, "creation_date": 1505948254, "answer_id": 46332924, "question_id": 46332530, "link": "https://stackoverflow.com/questions/46332530/python-pandas-get-all-the-combination-and-their-frequency-of-different-column/46332924#46332924", "title": "Python: Pandas: get all the combination and their frequency of different column", "body": "<p>A disgusting one-liner:</p>\n\n<pre><code>In [114]: collections.Counter(map(str, itertools.chain.from_iterable(list(df.apply(lambda x: list(itertools.chain.from_iterable([list(itertools.combinations(x, k)) for k in range(1, 4)])), axis=1).values))))\nOut[114]: \nCounter({'(1, 2)': 3,\n         '(1, 2, 3)': 2,\n         '(1, 2, 8)': 1,\n         '(1, 3)': 4,\n         '(1, 3, 4)': 1,\n         '(1, 3, 7)': 1,\n         '(1, 4)': 1,\n         '(1, 5)': 1,\n         '(1, 5, 9)': 1,\n         '(1, 7)': 1,\n         '(1, 8)': 1,\n         '(1, 9)': 1,\n         '(1,)': 6,\n         '(2, 3)': 2,\n         '(2, 8)': 1,\n         '(2,)': 3,\n         '(3, 4)': 1,\n         '(3, 7)': 1,\n         '(3,)': 4,\n         '(4,)': 1,\n         '(5, 9)': 1,\n         '(5,)': 1,\n         '(7,)': 1,\n         '(8,)': 1,\n         '(9,)': 1})\n</code></pre>\n\n<p>Some explanations:</p>\n\n<ol>\n<li><p>It starts with applying a <code>lambda</code> function on each of the rows, thanks to the <code>df.apply(..., axis=1</code>.</p></li>\n<li><p>The <code>lambda</code> function creates all the possible combinations of the row's values, regardless of the number of entries.</p></li>\n<li><p>We merge all found values in a single list, per row. That's where the first <a href=\"https://docs.python.org/3.5/library/itertools.html#itertools.chain.from_iterable\" rel=\"nofollow noreferrer\"><code>itertools.chain.from_iterable</code></a> kicks in.</p></li>\n<li><p>We merge all row values into a single list, the second <code>itertools.chain.from_iterable</code> is used.</p></li>\n<li><p>We describe the result, thanks to <a href=\"https://docs.python.org/3.5/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>collections.Counter</code></a>, and get the frequencies.</p></li>\n</ol>\n\n<p><strong>Edit</strong></p>\n\n<p>The same solution, but without using <code>itertools.chain.from_iterable</code></p>\n\n<pre><code>In [25]: collections.Counter([str(k) for l in df.apply(lambda x: [c for i in range(1, 4) for c in itertools.combinations(x, i)], axis=1).values for k in l])\n</code></pre>\n\n<p>This time, I leveraged list comprehension to achieve the same result, which may lead to a more readable solution.\nThe steps are roughly the same, without the \"lists merging\" fuss.</p>\n"}], "owner": {"reputation": 473, "user_id": 7274830, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/36de22b80bbbe913bb9c68b0d68b98b2?s=128&d=identicon&r=PG&f=1", "display_name": "kkjoe", "link": "https://stackoverflow.com/users/7274830/kkjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 1, "accepted_answer_id": 46332924, "answer_count": 3, "score": 1, "last_activity_date": 1505981828, "creation_date": 1505945577, "question_id": 46332530, "link": "https://stackoverflow.com/questions/46332530/python-pandas-get-all-the-combination-and-their-frequency-of-different-column", "title": "Python: Pandas: get all the combination and their frequency of different column", "body": "<p>I have a python dataframe has three columns.</p>\n\n<pre><code>    a   b   c\n0   1   2   3\n1   1   2   3\n2   1   2   8\n3   1   5   9\n4   1   3   7\n5   1   3   4\n</code></pre>\n\n<p>I want to find all the combination of a,b,c, my expected result is like:</p>\n\n<pre><code>[1,2,3]: 2  # from row 0 and row 1\n[1,2]  : 3  # from row 0 and row 1 and row 2\n[1,3]  : 4  # from row 0, 1, 4, 5\n[1,4]  : 1\n[1,5]  : 1\n[1,7]  : 1\n[1,8]  : 1\n[1,9]  : 1\n[2,3]  : 2\n............\n</code></pre>\n\n<p>Feel free to use any package.</p>\n\n<pre><code>import pandas as pd\npd.DataFrame(data=[[1,2,3],[1,2,3],[1,2,8],[1,5,9],[1,3,7],[1,3,4]],columns=['a','b','c'])\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "selenium", "selenium-webdriver", "pythonanywhere"], "comments": [{"owner": {"reputation": 364, "user_id": 8256942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ca2ed53167ed224311e930fc1a9f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Kapil", "link": "https://stackoverflow.com/users/8256942/kapil"}, "edited": false, "score": 0, "creation_date": 1505994737, "post_id": 46332511, "comment_id": 79646208, "body": "did you try debugging your code?"}, {"owner": {"reputation": 6310, "user_id": 167813, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b7e42d7954660b54a29bff48043693a5?s=128&d=identicon&r=PG", "display_name": "Glenn", "link": "https://stackoverflow.com/users/167813/glenn"}, "edited": false, "score": 0, "creation_date": 1506002202, "post_id": 46332511, "comment_id": 79651853, "body": "You&#39;re not cleaning up your display or your browser when you&#39;re done. Look at the PythonAnywhere docs for why you should and how to do it."}], "owner": {"reputation": 316, "user_id": 7457965, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/127abde82ca0cb31bc717c9c1c6b7a4d?s=128&d=identicon&r=PG&f=1", "display_name": "egorkh", "link": "https://stackoverflow.com/users/7457965/egorkh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505945438, "creation_date": 1505945438, "question_id": 46332511, "link": "https://stackoverflow.com/questions/46332511/pythonanywhere-making-scrrenshot-in-browser", "title": "pythonanywhere making scrrenshot in browser", "body": "<p>i am trying to make screenshot from browser by using selenium in pythonanywhere \nthis is my code :</p>\n\n<pre><code>    display = Display(visible=0, size=(800, 600))\n    display.start()\n\n    browser = webdriver.Firefox()\n    print(4)\n    browser.implicitly_wait(15)\n    url='http://whattomine.com/coins?utf8=%E2%9C%93&amp;adapt_q_280x=290&amp;adapt_q_380=0&amp;adapt_q_fury=0&amp;adapt_q_470=0&amp;adapt_q_480=3&amp;adapt_q_570=0&amp;adapt_q_580=0&amp;adapt_q_750Ti=0&amp;adapt_q_10606=0&amp;adapt_q_1070=0&amp;adapt_q_1080=0&amp;adapt_q_1080Ti=0&amp;eth=true&amp;factor%5Beth_hr%5D=0.0&amp;factor%5Beth_p%5D=0.0&amp;factor%5Bgro_hr%5D=0.0&amp;factor%5Bgro_p%5D=0.0&amp;factor%5Bx11g_hr%5D=0.0&amp;factor%5Bx11g_p%5D=0.0&amp;factor%5Bcn_hr%5D=0.0&amp;factor%5Bcn_p%5D=0.0&amp;factor%5Beq_hr%5D=0.0&amp;factor%5Beq_p%5D=0.0&amp;factor%5Blrev2_hr%5D=0.0&amp;factor%5Blrev2_p%5D=0.0&amp;factor%5Bns_hr%5D=0.0&amp;factor%5Bns_p%5D=0.0&amp;factor%5Blbry_hr%5D=0.0&amp;factor%5Blbry_p%5D=0.0&amp;factor%5Bbk2b_hr%5D=0.0&amp;factor%5Bbk2b_p%5D=0.0&amp;factor%5Bbk14_hr%5D=0.0&amp;factor%5Bbk14_p%5D=0.0&amp;factor%5Bpas_hr%5D=0.0&amp;factor%5Bpas_p%5D=0.0&amp;factor%5Bskh_hr%5D=0.0&amp;factor%5Bskh_p%5D=0.0&amp;factor%5Bl2z_hr%5D=420.0&amp;factor%5Bl2z_p%5D=300.0&amp;factor%5Bcost%5D=0.1&amp;sort=Profitability24&amp;volume=0&amp;revenue=24h&amp;factor%5Bexchanges%5D%5B%5D=&amp;factor%5Bexchanges%5D%5B%5D=bittrex&amp;factor%5Bexchanges%5D%5B%5D=bleutrade&amp;factor%5Bexchanges%5D%5B%5D=bter&amp;factor%5Bexchanges%5D%5B%5D=c_cex&amp;factor%5Bexchanges%5D%5B%5D=cryptopia&amp;factor%5Bexchanges%5D%5B%5D=hitbtc&amp;factor%5Bexchanges%5D%5B%5D=poloniex&amp;factor%5Bexchanges%5D%5B%5D=yobit&amp;dataset=Main&amp;commit=Calculate'\n    print(url)\n    browser.get(url)\n    browser.implicitly_wait(15)\n    print(3)\n    browser.save_screenshot('/home/arator/1test.png')\n    browser.quit()\n    img = Image.open('/home/arator/1test.png')\n    width, height = img.size\n\n    crop_rectangle = ( 10 ,1060, 1150, 1645 )\n    cropped_img = img.crop(crop_rectangle)\n\n    cropped_img.save('/home/arator/12test.png')\n    w2=open('/home/arator/12test.png','rb')\n</code></pre>\n\n<p>it works fine first time , but after i got the following error:</p>\n\n<pre><code>http.client.RemoteDisconnected: Remote end closed connection without response\n</code></pre>\n\n<p>how to fix this problem?\nIf its imposible to fix this problem on pythonanywhere maybe there is some other way to make screenshot from browser</p>\n"}, {"tags": ["python", "pyqt", "pyqt4", "qscrollarea", "qlayout"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1505948045, "post_id": 46332491, "comment_id": 79626596, "body": "I have tested what you show and I have not been able to reproduce your error, what I get is the following: <a href=\"https://imgur.com/a/UpnWr\" rel=\"nofollow noreferrer\">imgur.com/a/UpnWr</a> . You could share your project through github, drive, dropbox or similar, maybe I have not reproduced correctly what you have described."}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1505992935, "post_id": 46332491, "comment_id": 79645064, "body": "@eyllanesc Rather than sharing your whole project, it is more useful to others (with the same problem) to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 781, "user_id": 3013108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811dd61039ad617bae9e3469815cc7fc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Semenov", "link": "https://stackoverflow.com/users/3013108/andrey-semenov"}, "edited": false, "score": 0, "creation_date": 1505994155, "post_id": 46332491, "comment_id": 79645856, "body": "Set your labels&#39; horizontal size policy to fixed?"}, {"owner": {"reputation": 864, "user_id": 2039431, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f752361a0ef448dc2fd54c200cfce947?s=128&d=identicon&r=PG", "display_name": "Michael Westwort", "link": "https://stackoverflow.com/users/2039431/michael-westwort"}, "edited": false, "score": 0, "creation_date": 1506030941, "post_id": 46332491, "comment_id": 79667592, "body": "I have added a minimal code to my post. - Setting the size policy to fixed does not help. There is a difference: The alignment of the labels is different; only the last character is shown."}], "answers": [{"comments": [{"owner": {"reputation": 864, "user_id": 2039431, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f752361a0ef448dc2fd54c200cfce947?s=128&d=identicon&r=PG", "display_name": "Michael Westwort", "link": "https://stackoverflow.com/users/2039431/michael-westwort"}, "edited": false, "score": 0, "creation_date": 1506033636, "post_id": 46353953, "comment_id": 79668386, "body": "Very good. I use <code>if not isinstance(widget, QtGui.QLayout)</code> now."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 864, "user_id": 2039431, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f752361a0ef448dc2fd54c200cfce947?s=128&d=identicon&r=PG", "display_name": "Michael Westwort", "link": "https://stackoverflow.com/users/2039431/michael-westwort"}, "edited": false, "score": 0, "creation_date": 1506033948, "post_id": 46353953, "comment_id": 79668471, "body": "With that statement you may have problems, <code>childrens()</code> returns all the child <code>QObject</code>, and not all <code>QObject</code> have the <code>setDisabled()</code> method so your program could crash. In this case both had by chance a <code>setDisabled()</code> method that are different for each type"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1506032567, "last_edit_date": 1506032567, "creation_date": 1506032095, "answer_id": 46353953, "question_id": 46332491, "link": "https://stackoverflow.com/questions/46332491/grid-layout-column-width-to-fit-also-disabled-widgets/46353953#46353953", "title": "Grid layout: Column width to fit also disabled widgets", "body": "<p>If you check who the children of TabScrollAreaContentsA using the following code you get the following:</p>\n\n<pre><code>for widget in self.TabScrollAreaContentsA.children():\n    print(widget)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;PyQt4.QtGui.QGridLayout object at 0x7f9a19fc3f78&gt;\n&lt;PyQt4.QtGui.QPushButton object at 0x7f9a1a0c7048&gt;\n&lt;PyQt4.QtGui.QLineEdit object at 0x7f9a1a0c70d8&gt;\n&lt;PyQt4.QtGui.QLabel object at 0x7f9a1a0c71f8&gt;\n&lt;PyQt4.QtGui.QLineEdit object at 0x7f9a1a0c73a8&gt;\n&lt;PyQt4.QtGui.QLabel object at 0x7f9a1a0c7438&gt;\n&lt;PyQt4.QtGui.QLineEdit object at 0x7f9a1a0c74c8&gt;\n&lt;PyQt4.QtGui.QLabel object at 0x7f9a1a0c7558&gt;\n&lt;PyQt4.QtGui.QPushButton object at 0x7f9a1a0c75e8&gt;\n&lt;PyQt4.QtGui.QLineEdit object at 0x7f9a1a0c7678&gt;\n</code></pre>\n\n<p>it is observed that it appears as a child a layout and according to the <a href=\"http://pyqt.sourceforge.net/Docs/PyQt4/qlayout.html#setEnabled\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p><strong>QLayout.setEnabled (self, bool)</strong></p>\n  \n  <p>Enables this layout if enable is true, otherwise disables it.</p>\n  \n  <p>An enabled layout adjusts dynamically to changes; a disabled layout\n  acts as if it did not exist.</p>\n  \n  <p>By default all layouts are enabled.</p>\n  \n  <p>See also isEnabled().</p>\n</blockquote>\n\n<p>That is to say that if you disable some layout will be the same as if it did not exist.</p>\n\n<p>And the cause of this behavior, the correct thing is only to disable the widgets for it is used the following code:</p>\n\n<pre><code>for obj in self.TabScrollAreaContentsA.children():\n    if isinstance(obj, QtGui.QWidget):\n        obj.setEnabled(False)\n</code></pre>\n"}], "owner": {"reputation": 864, "user_id": 2039431, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f752361a0ef448dc2fd54c200cfce947?s=128&d=identicon&r=PG", "display_name": "Michael Westwort", "link": "https://stackoverflow.com/users/2039431/michael-westwort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 46353953, "answer_count": 1, "score": 1, "last_activity_date": 1614786983, "creation_date": 1505945335, "last_edit_date": 1614786983, "question_id": 46332491, "link": "https://stackoverflow.com/questions/46332491/grid-layout-column-width-to-fit-also-disabled-widgets", "title": "Grid layout: Column width to fit also disabled widgets", "body": "<p>I have added a grid layout to a widget in Qt Creator. The hierarchy is:</p>\n\n<ul>\n<li>QScrollArea</li>\n<li>ScrollAreaContents with grid layout</li>\n<li>several widgets in three columns and several rows</li>\n</ul>\n\n<p>As long as the widgets in the layout are enabled, the columns are as wide as determined by the widgets. However, I disable all widgets upon startup. Then, the columns shrink and crop the widgets. How can I force the layout to respect also disabled widgets? (Or is there a way of preventing the use of the widgets without disabling them?)</p>\n\n<p>The problem is clearly caused by disabling the widgets. The crucial lines are simply:</p>\n\n<pre><code>for widget in self.tabScrollAreaContents.children():\n    widget.setEnabled(False)\n</code></pre>\n\n<p>No further code here but two images:</p>\n\n<p>Correct layout with enabled widgets:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XA8a3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XA8a3.png\" alt=\"correct layout with enabled widgets\"></a></p>\n\n<p>Shrinked columns with disabled widgets:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1ZSQP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ZSQP.png\" alt=\"shrinked columns with disabled widgets\"></a></p>\n\n<p><strong>Supplement:</strong></p>\n\n<p>Minimal code to download: <a href=\"https://www.dropbox.com/sh/i19geisqw6nxuky/AADIPHL1xVKzLCJdoLEsTFDna?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/sh/i19geisqw6nxuky/AADIPHL1xVKzLCJdoLEsTFDna?dl=0</a></p>\n\n<p>Looks like this (left is wrong, right is fine):</p>\n\n<p><a href=\"https://i.stack.imgur.com/clNaf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/clNaf.png\" alt=\"screenshot\"></a></p>\n\n<p>The only difference between left and right is these lines:</p>\n\n<pre><code>for widget in self.TabScrollAreaContentsA.children():\n    widget.setEnabled(False)\n</code></pre>\n"}, {"tags": ["python", "html", "post", "flask"], "comments": [{"owner": {"reputation": 980, "user_id": 6483228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55i3R.jpg?s=128&g=1", "display_name": "T4rk1n", "link": "https://stackoverflow.com/users/6483228/t4rk1n"}, "edited": false, "score": 1, "creation_date": 1505946184, "post_id": 46332480, "comment_id": 79626031, "body": "Don&#39;t you mean to use <code>action</code> instead of <code>target</code> ? target will open a new page at /make which is a get."}], "answers": [{"tags": [], "owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "is_accepted": true, "score": 1, "last_activity_date": 1505946505, "creation_date": 1505946505, "answer_id": 46332667, "question_id": 46332480, "link": "https://stackoverflow.com/questions/46332480/405-method-not-allowed-with-post-flask/46332667#46332667", "title": "405 Method not allowed with POST + Flask", "body": "<p>In your form you need to use <code>action</code> instead of <code>target</code></p>\n\n<pre><code>&lt;form method=\"POST\" action=\"/make\"&gt;\n        &lt;div id=\"Question\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>more details: <a href=\"https://www.w3schools.com/TAGs/att_form_action.asp\" rel=\"nofollow noreferrer\">form_action</a></p>\n"}], "owner": {"reputation": 39, "user_id": 3721069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xhiia.png?s=128&g=1", "display_name": "v0idpwn", "link": "https://stackoverflow.com/users/3721069/v0idpwn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 46332667, "answer_count": 1, "score": 0, "last_activity_date": 1505946505, "creation_date": 1505945281, "question_id": 46332480, "link": "https://stackoverflow.com/questions/46332480/405-method-not-allowed-with-post-flask", "title": "405 Method not allowed with POST + Flask", "body": "<p>I've been finding a 405 error when I try to pass a form by POST to a python script using flask.</p>\n\n<p>My Python is like this:</p>\n\n<pre><code>@app.route('/make', methods=['POST', 'GET'])\ndef make():\n    if request.method == 'POST':\n        return \"its working\"\n</code></pre>\n\n<p>My form is like this:</p>\n\n<pre><code>&lt;form method=\"POST\" target=\"/make\"&gt;\n        &lt;div id=\"Question\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>My code is kinda big so I'm not reproducing it entirely. I cant seem to find my mistake. What am I doing wrong?</p>\n"}, {"tags": ["python", "python-xarray", "geopandas", "shapely", "netcdf4"], "comments": [{"owner": {"reputation": 4123, "user_id": 1757464, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FTcq2.jpg?s=128&g=1", "display_name": "jhamman", "link": "https://stackoverflow.com/users/1757464/jhamman"}, "edited": false, "score": 0, "creation_date": 1505948390, "post_id": 46332479, "comment_id": 79626676, "body": "The index in your <code>df</code> is a <code>Pandas.MultiIndex</code>. There are a bunch of ways to do this, try <code>df.reset_index()</code> to start."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8644559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4641626fdf8ea912ccad0da0696013be?s=128&d=identicon&r=PG&f=1", "display_name": "TSchonn", "link": "https://stackoverflow.com/users/8644559/tschonn"}, "edited": false, "score": 0, "creation_date": 1506066026, "post_id": 46333443, "comment_id": 79678306, "body": "Thanks @bob-haffner, @jhamman, <code>df.reset_index()</code> worked well. The huge amount of data made the computer swapping while resetting the index. I will work on the geom-operation next week and give feedback."}, {"owner": {"reputation": 6048, "user_id": 3437504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/G7yH4.jpg?s=128&g=1", "display_name": "Bob Haffner", "link": "https://stackoverflow.com/users/3437504/bob-haffner"}, "reply_to_user": {"reputation": 21, "user_id": 8644559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4641626fdf8ea912ccad0da0696013be?s=128&d=identicon&r=PG&f=1", "display_name": "TSchonn", "link": "https://stackoverflow.com/users/8644559/tschonn"}, "edited": false, "score": 0, "creation_date": 1506088516, "post_id": 46333443, "comment_id": 79692456, "body": "Ok, perhaps there&#39;s a way to avoid the reset by changing the way the dataframe is created (xarray.Dataset -&gt; DataFrame) so that it doesn&#39;t set lat, lon as the index in the first place?"}], "tags": [], "owner": {"reputation": 6048, "user_id": 3437504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/G7yH4.jpg?s=128&g=1", "display_name": "Bob Haffner", "link": "https://stackoverflow.com/users/3437504/bob-haffner"}, "is_accepted": false, "score": 2, "last_activity_date": 1505952353, "creation_date": 1505952353, "answer_id": 46333443, "question_id": 46332479, "link": "https://stackoverflow.com/questions/46332479/store-netcdf-data-in-geodataframe/46333443#46333443", "title": "Store netCDF data in GeoDataFrame", "body": "<p>Like @jhamman mentioned in the comments, your lats and lons are indexes in your pandas frame.  So starting with that</p>\n\n<pre><code>import pandas as pd\nimport geopandas as gpd\nfrom shapely.geometry import Point\nfrom io import StringIO\n\ns = StringIO('''             \n    lat,lon,hgt                  \n    -32.0,-73.000000,0  \n    -32.0,-72.999168,0  \n    -32.0,-72.998337,0  \n    -32.0,-72.997498,4  \n    -32.0,-72.996666,0\n    ''')\n\n    df = pd.read_csv(s)\n    df = df.set_index(['lat', 'lon'])\n</code></pre>\n\n<p>We'll first reset the frame's index</p>\n\n<p><code>df = df.reset_index()</code></p>\n\n<p>then we'll create our geometry. i.e. shapely points with a list comp</p>\n\n<p><code>geom = [Point(x,y) for x, y in zip(df['lon'], df['lat'])]</code></p>\n\n<p>and now we convert our Pandas DataFrame to a GeoPandas GeoDataFrame</p>\n\n<pre><code>gdf = gpd.GeoDataFrame(df, geometry=geom)\nprint(gdf.head())\n    lat        lon  hgt                                          geometry\n0 -32.0 -73.000000                      0                 POINT (-73 -32)\n1 -32.0 -72.999168                      0  POINT (-72.99916800000001 -32)\n2 -32.0 -72.998337                      0  POINT (-72.99833700000001 -32)\n3 -32.0 -72.997498                      4  POINT (-72.99749799999999 -32)\n4 -32.0 -72.996666                      0          POINT (-72.996666 -32)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8644559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4641626fdf8ea912ccad0da0696013be?s=128&d=identicon&r=PG&f=1", "display_name": "TSchonn", "link": "https://stackoverflow.com/users/8644559/tschonn"}, "is_accepted": false, "score": 0, "last_activity_date": 1509398656, "creation_date": 1509398656, "answer_id": 47024397, "question_id": 46332479, "link": "https://stackoverflow.com/questions/46332479/store-netcdf-data-in-geodataframe/47024397#47024397", "title": "Store netCDF data in GeoDataFrame", "body": "<p>It took me even longer to try some solutions for my swapping memory (8 GB). At last I tried <code>dask</code>, but my approach is still not the right one:</p>\n\n<pre><code>for f in nc_files:\nff = os.path.join(nc_path, f)\ntry:\n    dnc = xr.open_dataset(ff, chunks={'lat': 400, 'lon': 400})\n    df = dnc.to_dataframe()\n    df = df.reset_index()\n    geom = [Point(x,y) for x, y in zip(df['lon'], df['lat'])]\n    gdf = gpd.GeoDataFrame(df, geometry=geom)\n    print(gdf.head())\nexcept Exception as e:\n    print(e)\n</code></pre>\n\n<p>As mentioned above, the files are big:</p>\n\n<pre><code>&gt;&gt;&gt; dnc.hgt.size\n322596001\n&gt;&gt;&gt; dnc.lat.size\n16801\n&gt;&gt;&gt; dnc.lon.size\n19201\n</code></pre>\n\n<p>Is there another approach to create a <code>geometry.Point</code> directly from the <code>netCDF-File</code>?</p>\n"}], "owner": {"reputation": 21, "user_id": 8644559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4641626fdf8ea912ccad0da0696013be?s=128&d=identicon&r=PG&f=1", "display_name": "TSchonn", "link": "https://stackoverflow.com/users/8644559/tschonn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2612, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1559564258, "creation_date": 1505945274, "last_edit_date": 1559564258, "question_id": 46332479, "link": "https://stackoverflow.com/questions/46332479/store-netcdf-data-in-geodataframe", "title": "Store netCDF data in GeoDataFrame", "body": "<p>I need to perform some geometric operations with geometries from another source on a netCDF-file. Therefore I store the geometries (<code>shapely.geometry.Polygon</code>) from the other source in a <code>geopandas.GeoDataFrame</code>.</p>\n\n<p>Next is to read a <code>netCDF</code> file into a <code>GeoDataFrame</code>. The recipe seems clear: read the <code>netCDF</code> with <code>xarray</code>, store it into a <code>pandas.DataFrame</code>, perform a <code>shapely.geometry.Point</code> operation on the extracted lat/lon data and convert it into a <code>GeoDataFrame</code>.</p>\n\n<p>Afterwards, I will do some statistics with geometry-operators.</p>\n\n<hr>\n\n<p>When I read the <code>netCDF</code> file with <code>xarray</code> (<a href=\"https://stackoverflow.com/questions/14035148/import-netcdf-file-to-pandas-dataframe\">see here</a>)</p>\n\n<pre><code>import xarray as xr\ndnc = xr.open_dataset(ff)  \ndf = dnc.to_dataframe()\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>&gt;&gt;&gt;&gt; dnc   \n&lt;xarray.Dataset&gt;\nDimensions:  (lat: 16801, lon: 19201)\nCoordinates:\n   * lat      (lat) float32 -32.0 -31.9992 -31.9983 -31.9975 -31.9967 ...\n   * lon      (lon) float32 -73.0 -72.9992 -72.9983 -72.9975 -72.9967 ...\nData variables:  \n     hgt      (lat, lon) int16 0 0 0 4 0 5 0 9 9 8 0 0 0 0 0 0 0 0 0 0 0 0 0 ...\n\n&gt;&gt;&gt; dnc.hgt.size\n322596001\n&gt;&gt;&gt; dnc.lat.size\n16801\n&gt;&gt;&gt; dnc.lon.size\n19201\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&gt;&gt;&gt; df.head()\n                  hgt   \nlat   lon                  \n-32.0 -73.000000    0  \n      -72.999168    0  \n      -72.998337    0  \n      -72.997498    4  \n      -72.996666    0\n</code></pre>\n\n<p>In <code>df</code> there is no access on <code>lat</code>and <code>lon</code>. I also have problems to understand the <em>partially</em> empty column <code>lat</code>. So I think that the <code>shapely.geometry.Point((lon, lat))</code> must be performed on <code>dnc</code> for every combination of <code>lon</code> and <code>lat</code>. Is that right? Any ideas how to code it?</p>\n"}, {"tags": ["python", "matplotlib", "matrix"], "comments": [{"owner": {"reputation": 11, "user_id": 8644726, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TcOJgb0aYQs/AAAAAAAAAAI/AAAAAAAAAIc/EF4evb2bsWM/photo.jpg?sz=128", "display_name": "Armando Pezo", "link": "https://stackoverflow.com/users/8644726/armando-pezo"}, "reply_to_user": {"reputation": 4815, "user_id": 4194079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cOfnc.jpg?s=128&g=1", "display_name": "keepAlive", "link": "https://stackoverflow.com/users/4194079/keepalive"}, "edited": false, "score": 0, "creation_date": 1505946502, "post_id": 46332447, "comment_id": 79626163, "body": "Hi, I&#39;ve got a set of values for &#39;a&#39; (real values in general), and each entry in this matrix is a function of this parameter, I&#39;d like to generate a set of this matrices for each value of a."}, {"owner": {"reputation": 4815, "user_id": 4194079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cOfnc.jpg?s=128&g=1", "display_name": "keepAlive", "link": "https://stackoverflow.com/users/4194079/keepalive"}, "edited": false, "score": 0, "creation_date": 1509309033, "post_id": 46332447, "comment_id": 80956244, "body": "You have been happy of obtaining answers on SO? Consider reading <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 4815, "user_id": 4194079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cOfnc.jpg?s=128&g=1", "display_name": "keepAlive", "link": "https://stackoverflow.com/users/4194079/keepalive"}, "reply_to_user": {"reputation": 11, "user_id": 8644726, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TcOJgb0aYQs/AAAAAAAAAAI/AAAAAAAAAIc/EF4evb2bsWM/photo.jpg?sz=128", "display_name": "Armando Pezo", "link": "https://stackoverflow.com/users/8644726/armando-pezo"}, "edited": false, "score": 0, "creation_date": 1507432508, "post_id": 46333331, "comment_id": 80204755, "body": "If I answered your question, the way this site works, you&#39;d &quot;accept&quot; the answer, more here: <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 4815, "user_id": 4194079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cOfnc.jpg?s=128&g=1", "display_name": "keepAlive", "link": "https://stackoverflow.com/users/4194079/keepalive"}, "is_accepted": false, "score": 0, "last_activity_date": 1505951425, "creation_date": 1505951425, "answer_id": 46333331, "question_id": 46332447, "link": "https://stackoverflow.com/questions/46332447/matrices-depending-on-a-parameter-in-python/46333331#46333331", "title": "Matrices depending on a parameter in python", "body": "<p>Something you can do is using the method <a href=\"https://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.fromfunction.html\" rel=\"nofollow noreferrer\"><code>fromfunction</code></a> of the <a href=\"http://www.numpy.org/\" rel=\"nofollow noreferrer\"><code>numpy</code></a> library. Then with a (nxn) square matrix it would be as simple as</p>\n\n<pre><code>import numpy as np\n\ndef your_function(row_index, col_index, a):\n    # ... do stuff and compute your result\n    return result\n\nn = 2\na = np.pi\nyour_matrix = np.fromfunction(lambda i, j: your_function(i, j, a), (n, n), dtype=np.float)\n</code></pre>\n\n<p>and if you want it to be in a <a href=\"https://stackoverflow.com/questions/111234/what-is-a-callable-in-python\">callable</a> form, actually as you asked, you can do</p>\n\n<pre><code>A = lambda a : np.fromfunction(lambda i, j: your_function(i, j, a), (n, n), dtype=np.float)\n</code></pre>\n\n<p>Or if you do not want to use an <a href=\"http://www.secnetix.de/olli/Python/lambda_functions.hawk\" rel=\"nofollow noreferrer\">anonymous function</a></p>\n\n<pre><code>def A(a):\n    return  np.fromfunction(lambda i, j: your_function(i, j, a), (n, n), dtype=np.float)\n</code></pre>\n\n<p><hr>\nLet do a simple example</p>\n\n<pre><code>def your_function(row_index, col_index, a):\n    return row_index + col_index + a\nn = 2\nA = lambda a : np.fromfunction(lambda i, j: your_function(i, j, a), (n, n), dtype=np.float)\n</code></pre>\n\n<p>Use case</p>\n\n<pre><code>&gt;&gt;&gt; A(1)\narray([[ 1.,  2.],\n       [ 2.,  3.]])\n\n&gt;&gt;&gt; A(np.pi)\narray([[ 3.1415926535897931,  4.1415926535897931],\n       [ 4.1415926535897931,  5.1415926535897931]])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8644726, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TcOJgb0aYQs/AAAAAAAAAAI/AAAAAAAAAIc/EF4evb2bsWM/photo.jpg?sz=128", "display_name": "Armando Pezo", "link": "https://stackoverflow.com/users/8644726/armando-pezo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505951425, "creation_date": 1505945108, "question_id": 46332447, "link": "https://stackoverflow.com/questions/46332447/matrices-depending-on-a-parameter-in-python", "title": "Matrices depending on a parameter in python", "body": "<p>I've got a matrix which can be defined using a parameter, so this is like for a parameter 'a' I can label my Matrix as A(a) where the entries depend on this 'a', the thing is that I'd like to create a set of this matrices using a domain for this 'a's. So my question is, How do I define the set of 'a' in order to obtain the set of matrices?</p>\n"}, {"tags": ["python", "r", "keras", "rstudio"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1505951033, "post_id": 46332436, "comment_id": 79627348, "body": "Seems TF is not available for your specific setup. More information about your platform will be required."}], "owner": {"reputation": 21, "user_id": 3813778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/793adebe8cd9b47cc53ebd6233187c0c?s=128&d=identicon&r=PG&f=1", "display_name": "user3813778", "link": "https://stackoverflow.com/users/3813778/user3813778"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1085, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1562345150, "creation_date": 1505945018, "last_edit_date": 1562345150, "question_id": 46332436, "link": "https://stackoverflow.com/questions/46332436/tensorflow-installation-error-in-keras-package-could-not-find-a-version-that-sa", "title": "Tensorflow installation error in keras package: Could not find a version that satisfies the requirement tensorflow", "body": "<p>I'm trying to install keras and tensorflow using the <code>install_keras()</code> command in R_Studio. Keras installs, however Tensorflow installation seems to be aborting with:</p>\n\n<blockquote>\n  <p>Could not find a version that satisfies the requirement tensorflow (from versions: ) No matching distribution found for tensorflow</p>\n</blockquote>\n\n<p>Error message displayed:</p>\n\n<p><a href=\"https://i.stack.imgur.com/h0AsN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h0AsN.png\" alt=\"Figure 1\"></a></p>\n"}, {"tags": ["python", "scala", "apache-spark", "pyspark", "dbscan"], "answers": [{"tags": [], "owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "is_accepted": false, "score": 1, "last_activity_date": 1506159060, "creation_date": 1506159060, "answer_id": 46378095, "question_id": 46332406, "link": "https://stackoverflow.com/questions/46332406/implementing-dbscan-in-distributed-system/46378095#46378095", "title": "Implementing DBSCAN in distributed system", "body": "<p>The overhead of pySpark is not negligible because of serialization. If you want to be really fast, use as few layers as possible to reduce overhead.</p>\n\n<p>I'd simply split the data into the desired partitions, then process them independently on separate nodes using the fastest DBSCAN you can find (benchmark! Make sure to enable data indexing, and check the result for correctness. One of the Spark versions was reported to have incorrect results). There recently was a benchmarking paper that observed 1000x runtime differences for DBSCAN implementations. So another DBSCAN can make a difference.</p>\n"}, {"tags": [], "owner": {"reputation": 1452, "user_id": 7804595, "user_type": "registered", "profile_image": "https://graph.facebook.com/1667139386646497/picture?type=large", "display_name": "Valeriy K.", "link": "https://stackoverflow.com/users/7804595/valeriy-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1519638086, "creation_date": 1519638086, "answer_id": 48985377, "question_id": 46332406, "link": "https://stackoverflow.com/questions/46332406/implementing-dbscan-in-distributed-system/48985377#48985377", "title": "Implementing DBSCAN in distributed system", "body": "<p>You can try this example <a href=\"https://github.com/bwoneill/pypardis\" rel=\"nofollow noreferrer\">https://github.com/bwoneill/pypardis</a> on pyspark and scikit-learn. I tried it locally. The calculation of 75,000 points took almost 1.5 hours. But maybe in claster it will be faster.</p>\n"}], "owner": {"reputation": 2187, "user_id": 2404193, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1bac2ce676c49545aa67eaef88fd5932?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2404193/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4000, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1519638086, "creation_date": 1505944794, "question_id": 46332406, "link": "https://stackoverflow.com/questions/46332406/implementing-dbscan-in-distributed-system", "title": "Implementing DBSCAN in distributed system", "body": "<p>I have a Big Data problem and I have very limited experience with parallel processing and Big data. I have 100s of millions of rows consisting of Latitude and Longitude data and several ID. For each ID I can have data ranging form 10000 -10 million.</p>\n\n<p>I am implementing the density based clustering algorithm (DBSCAN) to solve some business requirement. The clustering algorithm runns independently for each ID.</p>\n\n<p><strong>Current Implementation;</strong></p>\n\n<p>The current implementation is based out of Python code using sklearn Machine learning library, But it takes a day or more to perform (the clustering + other business logic) for appx 50 million datapoint.</p>\n\n<p>I can optimize the python code and reduce the time but I am looking for a sollution thats more feasible.</p>\n\n<p><strong>Availability</strong></p>\n\n<p>I have a spark cluster distributed accross appx 20 machines but pyspark has no implementation of DBSCAN. Upon some searching i could find some scala imlementation but they seem to be less reliable. The URL's from my search are. \n<a href=\"https://github.com/irvingc/dbscan-on-spark\" rel=\"noreferrer\">https://github.com/irvingc/dbscan-on-spark</a> </p>\n\n<p><a href=\"https://stackoverflow.com/questions/36090906/dbscan-on-spark-which-implementation\">DBSCAN on spark : which implementation</a> </p>\n\n<p>Since all my code is written in python I would like to stick with a solution thats more pythonic.</p>\n\n<p>Like I mentioned that the clustering algorithm runs independently for each devices, One way to reduce the time is to distribute the computation of each ID parallely to all 20 machines. So that I could atleast get 20x better performance. But I have no idea on how to achieve this. All I can think of is MapReduce.</p>\n\n<p>I am open to any sollution thats more robust. Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "matplotlib", "plot", "3d"], "owner": {"reputation": 358, "user_id": 4888158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ww0Q5.jpg?s=128&g=1", "display_name": "hayk", "link": "https://stackoverflow.com/users/4888158/hayk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1582, "favorite_count": 0, "closed_date": 1516617292, "answer_count": 0, "score": 2, "last_activity_date": 1505947209, "creation_date": 1505944710, "last_edit_date": 1505947209, "question_id": 46332389, "link": "https://stackoverflow.com/questions/46332389/streamplot-of-a-3d-vector-field", "closed_reason": "Duplicate", "title": "Streamplot of a 3D vector field", "body": "<p>I have a 3-dimensional vector field, i.e., <code>x</code>, <code>y</code>, <code>z</code> arrays of length <code>N</code> and <code>u</code>, <code>v</code>, <code>w</code> arrays of shape <code>N x N x N</code>.</p>\n\n<p>I want to get streamline coordinates in the fashion it's done in <code>matplotlib.pyplot.streamplot</code>. I tried rewriting the original module functions to generalize for 3d case, but it's not working properly. </p>\n\n<p>Is there a cleaner and faster way of doing this? </p>\n\n<p><strong>PS.</strong> I really don't need to plot the data, so I don't need a bunch of vectors, just the coordinates of streamlines.</p>\n"}, {"tags": ["python", "sorting", "math", "average", "standard-deviation"], "comments": [{"owner": {"reputation": 541, "user_id": 5013193, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EDO4U2ULZfI/AAAAAAAAAAI/AAAAAAAABcw/hGQIlpm5LOQ/photo.jpg?sz=128", "display_name": "Patrick Michaelsen", "link": "https://stackoverflow.com/users/5013193/patrick-michaelsen"}, "edited": false, "score": 0, "creation_date": 1505944697, "post_id": 46332343, "comment_id": 79625486, "body": "To be clear, you&#39;re trying to find the subset of the list which has the smallest standard deviation?"}, {"owner": {"reputation": 5696, "user_id": 4421870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/38f9356608b91648b260644fc7a1b6a3?s=128&d=identicon&r=PG&f=1", "display_name": "Mako212", "link": "https://stackoverflow.com/users/4421870/mako212"}, "edited": false, "score": 0, "creation_date": 1505945293, "post_id": 46332343, "comment_id": 79625723, "body": "Basically you want to minimize stdev(x0,x1,x2) subject to the constraint that x0,x1,x2 are elements of <code>item_list</code>, and no item in the list is repeated."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1505945394, "post_id": 46332343, "comment_id": 79625762, "body": "Perhaps there&#39;s some way to narrow down the number of choices to approximately N. What property is likely to be true of numbers in a sorted list, if the numbers are as close to each other as possible? Does that hold true for the example you gave here?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1505945883, "post_id": 46332343, "comment_id": 79625939, "body": "Iterate over the list, in threes, find sigma for each triad and store in a container, find the minimum of all the sigma&#39;s."}, {"owner": {"reputation": 541, "user_id": 5013193, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EDO4U2ULZfI/AAAAAAAAAAI/AAAAAAAABcw/hGQIlpm5LOQ/photo.jpg?sz=128", "display_name": "Patrick Michaelsen", "link": "https://stackoverflow.com/users/5013193/patrick-michaelsen"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1505945937, "post_id": 46332343, "comment_id": 79625961, "body": "from what I can tell, in a sorted list, @wwii &#39;s solution is a simple and effective solution"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1505945980, "post_id": 46332343, "comment_id": 79625971, "body": "Welcome to SO.  Unfortunately this isn&#39;t a code writing service or a study group.  Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1505946712, "post_id": 46332343, "comment_id": 79626225, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/38151445/2823755.\">Iterate over n successive elements of list (with overlapping)</a>"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1505947068, "post_id": 46332343, "comment_id": 79626326, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/8371887/2823755\">Making all possible combinations of a list in python</a> depending on what you actually want."}, {"owner": {"reputation": 179, "user_id": 2729874, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c816349e276a940f94ae9e0b1505539b?s=128&d=identicon&r=PG&f=1", "display_name": "Eloque", "link": "https://stackoverflow.com/users/2729874/eloque"}, "edited": false, "score": 0, "creation_date": 1505984856, "post_id": 46332343, "comment_id": 79639245, "body": "- updated original post"}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "edited": false, "score": 0, "creation_date": 1507139151, "post_id": 46332343, "comment_id": 80095726, "body": "@Eloque do either of these answers <a href=\"https://stackoverflow.com/help/someone-answers\">answer your question</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 5013193, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EDO4U2ULZfI/AAAAAAAAAAI/AAAAAAAABcw/hGQIlpm5LOQ/photo.jpg?sz=128", "display_name": "Patrick Michaelsen", "link": "https://stackoverflow.com/users/5013193/patrick-michaelsen"}, "edited": false, "score": 1, "creation_date": 1505946842, "post_id": 46332707, "comment_id": 79626254, "body": "for the record, I don&#39;t condone this question, but I couldn&#39;t resist writing the code"}, {"owner": {"reputation": 8310, "user_id": 1851986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/17l5p.jpg?s=128&g=1", "display_name": "Vasili Syrakis", "link": "https://stackoverflow.com/users/1851986/vasili-syrakis"}, "edited": false, "score": 1, "creation_date": 1505951481, "post_id": 46332707, "comment_id": 79627442, "body": "The bad part is that they did not display any attempt or example code. SO isn&#39;t a code writing service."}], "tags": [], "owner": {"reputation": 541, "user_id": 5013193, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EDO4U2ULZfI/AAAAAAAAAAI/AAAAAAAABcw/hGQIlpm5LOQ/photo.jpg?sz=128", "display_name": "Patrick Michaelsen", "link": "https://stackoverflow.com/users/5013193/patrick-michaelsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1505946755, "creation_date": 1505946755, "answer_id": 46332707, "question_id": 46332343, "link": "https://stackoverflow.com/questions/46332343/find-the-3-most-alike-values-in-a-list-in-python/46332707#46332707", "title": "Find the 3 most alike values in a list in Python", "body": "<p>Assuming a sorted list and a function <code>pstdev</code> which finds the population std for a list:</p>\n\n<pre><code>list = [41, 53, 54, 57, 315, 324, 340]\nsize = 3\nsubset = list[:size]\nminstd = pstdev(list[:size])\nfor i in range(size, len(list)):\n    std = pstdev(list[i-size:i])\n    if(std &lt; minstd):\n        minstd = std\n        subset = list[i-size:i]\n\nprint(subset)\nprint(minstd)\n</code></pre>\n\n<p>This is O(n), which I believe, is the best you can do for this no matter what tricks you try.</p>\n\n<p>Std without numpy sourced from: <a href=\"https://stackoverflow.com/a/27758326/5013193\">https://stackoverflow.com/a/27758326/5013193</a></p>\n"}, {"tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": false, "score": 1, "last_activity_date": 1505947343, "creation_date": 1505947343, "answer_id": 46332787, "question_id": 46332343, "link": "https://stackoverflow.com/questions/46332343/find-the-3-most-alike-values-in-a-list-in-python/46332787#46332787", "title": "Find the 3 most alike values in a list in Python", "body": "<p>Here's an implementation with NumPy and itertools.</p>\n\n<pre><code>import itertools\nimport numpy as np\n\nitem_list = [41, 53, 54, 57, 315, 324, 340]\ncombos = np.array(list(itertools.combinations(item_list, 3)))\ns = combos.std(axis=1).argmin()\nprint(combos[s].tolist())\n# [53, 54, 57]\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 2729874, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c816349e276a940f94ae9e0b1505539b?s=128&d=identicon&r=PG&f=1", "display_name": "Eloque", "link": "https://stackoverflow.com/users/2729874/eloque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1505985032, "creation_date": 1505944529, "last_edit_date": 1505985032, "question_id": 46332343, "link": "https://stackoverflow.com/questions/46332343/find-the-3-most-alike-values-in-a-list-in-python", "title": "Find the 3 most alike values in a list in Python", "body": "<p>Given the sorted list</p>\n\n<pre><code>item_list = [41, 53, 54, 57, 315, 324, 340]\n</code></pre>\n\n<p>How would I find the three values that have the lowest standard deviation from their own average? The correct answer for the example is these three values </p>\n\n<pre><code>answer = [53, 54, 57]\n</code></pre>\n\n<p>They have an average of 54,66 and a standard deviation of 1,55. Any other combination would yield a higher standard deviation. </p>\n\n<p>All I can think of at this moment is simply iterate through available options and calculate each. Given this 7 item list that would be 7 * 6 * 5 = 210 options I believe. But since in my actual application the list is much longer, this would perhaps lead to issues.</p>\n\n<p>Also, as the list size increases, I need to be able do the same for 4, 5, 6 etc. number of elements.</p>\n\n<p>Edit:</p>\n\n<p>It's not a duplicate I believe. There is no code example as I didn't think my nested implementation of this bit of pseudocode;</p>\n\n<pre><code>for item in item_list:\n  # calculate average with all variations of 2 other elements\n  for each average:\n    # calculate standard deviation\n</code></pre>\n\n<p>Would be very useful, nor readable. I tried to present the minimal viable case, starting from scratch, and really had no idea where to go from there.</p>\n"}, {"tags": ["python", "powershell", "powershell-3.0"], "comments": [{"owner": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "edited": false, "score": 1, "creation_date": 1505945774, "post_id": 46332337, "comment_id": 79625902, "body": "<code>&quot;$PwdVar = ConvertTo-SecureString &quot;{0}&quot; -AsPlain...&quot;</code> -&gt; <code>&quot;$PwdVar = ConvertTo-SecureString &#39;{0}&#39; -AsPlain...&quot;</code>"}, {"owner": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "edited": false, "score": 0, "creation_date": 1505946821, "post_id": 46332337, "comment_id": 79626250, "body": "If you use unescaped double quotes inside a double-quoted string you&#39;re getting 2 separate strings with a (most likely invalid) expression between them."}, {"owner": {"reputation": 781, "user_id": 8644283, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f848eda3b3994c341f237c9e53f2923b?s=128&d=identicon&r=PG&f=1", "display_name": "Kade Williams", "link": "https://stackoverflow.com/users/8644283/kade-williams"}, "reply_to_user": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "edited": false, "score": 0, "creation_date": 1505946995, "post_id": 46332337, "comment_id": 79626304, "body": "That ran but it looks like it locked me out of my account and new password doesn&#39;t work."}, {"owner": {"reputation": 174117, "user_id": 1630171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIS66.png?s=128&g=1", "display_name": "Ansgar Wiechers", "link": "https://stackoverflow.com/users/1630171/ansgar-wiechers"}, "edited": false, "score": 1, "creation_date": 1505947476, "post_id": 46332337, "comment_id": 79626429, "body": "Did you check (i.e. display) the command you were running before actually running it?"}], "answers": [{"tags": [], "owner": {"reputation": 1565, "user_id": 5487553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VPiCC.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5487553/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1505956115, "creation_date": 1505956115, "answer_id": 46333857, "question_id": 46332337, "link": "https://stackoverflow.com/questions/46332337/powershell-cannot-bind-parameter-newpassword/46333857#46333857", "title": "powershell cannot bind parameter &#39;NewPassword&#39;", "body": "<p>The issue you are having is that your quotes are not being escaped properly. You need quotes in the correct place for the command line arguments and then for the variables. It gets quite messy.</p>\n\n<p>PowerShell has a feature to help with this, You can pass it a script as a Base64 encoded string. It will contain no special characters to escape.</p>\n\n<p>I have next to no Python skills and I haven't tested this example, Its just to help you get on the right track:</p>\n\n<pre><code>import base64\na1, a2 = \"C:\\\\WINDOWS\\\\system32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\", \"$PwdVar = ConvertTo-SecureString \"{0}\" -AsPlainText -Force; Set-ADAccountPassword jm09580 -NewPassword $PwdVar \u2013Reset\"\ndata = base64.b64encode(a2.format(password))\nc = subprocess.call([a1, '-EncodedCommand ' + data])\n</code></pre>\n\n<p>What your command should look like is this basically:</p>\n\n<pre><code>PowerShell -EncodedCommand MQAuAC4AMQAwACAAfAAgACUAIAB7ACAAIgBQAG8AdwBlAHIAUwBoAGUAbABsACAAUgBvAGMAawBzACIAIAB9AA==\n</code></pre>\n\n<p>Powershell will decode the string and run the commands inside.</p>\n"}], "owner": {"reputation": 781, "user_id": 8644283, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f848eda3b3994c341f237c9e53f2923b?s=128&d=identicon&r=PG&f=1", "display_name": "Kade Williams", "link": "https://stackoverflow.com/users/8644283/kade-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 660, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505956115, "creation_date": 1505944502, "question_id": 46332337, "link": "https://stackoverflow.com/questions/46332337/powershell-cannot-bind-parameter-newpassword", "title": "powershell cannot bind parameter &#39;NewPassword&#39;", "body": "<p>I am trying to write a program that changes the user's Windows password using a PowerShell command in Python.</p>\n\n<p>I tried this.</p>\n\n<pre><code>import subprocess\n\npassword = input('Enter New Password: ')\n\nc1 = \"C:\\\\WINDOWS\\\\system32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\"\nc2 = \"Set-ADAccountPassword john -NewPassword \" + password + \" \u2013Reset\".format(password)\n\nc = subprocess.call([c1, c2])\n\nprint (c)\n</code></pre>\n\n<p>But it gives an error</p>\n\n<pre><code>Set-ADAccountPassword : Cannot bind parameter 'NewPassword'.  Cannot convert the \"mynewpass1\" value of type \"System.String\" to type \"System.Security.SecureString\".\n</code></pre>\n\n<p>I read on <a href=\"https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.security/convertto-securestring?view=powershell-5.1\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.security/convertto-securestring?view=powershell-5.1</a> that you you have convert plain strings to secure strings with a command such as this.</p>\n\n<pre><code>PS C:\\&gt; $Secure_String_Pwd = ConvertTo-SecureString \"P@ssW0rD!\" -AsPlainText -Force\n</code></pre>\n\n<p>I tried rewriting my program but I get an invalid syntax error.  Is it even possible to do this?\nHere is what I am working with now.</p>\n\n<pre><code>import subprocess\n\npassword = input('Enter New Password: ')\n\n\na1, a2 = \"C:\\\\WINDOWS\\\\system32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\", \"$PwdVar = ConvertTo-SecureString \"{0}\" -AsPlainText -Force; Set-ADAccountPassword jm09580 -NewPassword $PwdVar \u2013Reset\"\nc = subprocess.call([a1, a2.format(password)])\n\nprint (c)\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "edited": false, "score": 0, "creation_date": 1505945256, "post_id": 46332318, "comment_id": 79625701, "body": "do you want parse sql or just generate filter dynamic?"}, {"owner": {"reputation": 61, "user_id": 8404710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69a4594c4cc490d59cbe2d9ea737df2?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Bosov", "link": "https://stackoverflow.com/users/8404710/yuriy-bosov"}, "reply_to_user": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "edited": false, "score": 0, "creation_date": 1505950218, "post_id": 46332318, "comment_id": 79627180, "body": "I want generate filter, maybe. Now I&#39;m look at whoosh (<a href=\"http://whoosh.readthedocs.io/en/latest/querylang.html\" rel=\"nofollow noreferrer\">whoosh.readthedocs.io/en/latest/querylang.html</a>)"}, {"owner": {"reputation": 3079, "user_id": 7395911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddf10ef16bae6a76e43840f89995c12f?s=128&d=identicon&r=PG&f=1", "display_name": "Bernardo Duarte", "link": "https://stackoverflow.com/users/7395911/bernardo-duarte"}, "edited": false, "score": 0, "creation_date": 1505950944, "post_id": 46332318, "comment_id": 79627324, "body": "Do you also want a parser or do you only want the ORM to execute the equivalent query?"}, {"owner": {"reputation": 61, "user_id": 8404710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69a4594c4cc490d59cbe2d9ea737df2?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Bosov", "link": "https://stackoverflow.com/users/8404710/yuriy-bosov"}, "edited": false, "score": 1, "creation_date": 1505951412, "post_id": 46332318, "comment_id": 79627424, "body": "I think that I need parser, because query string (&quot;(value &lt; 200 AND ....)&quot;) should be stored in database"}], "answers": [{"tags": [], "owner": {"reputation": 3079, "user_id": 7395911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddf10ef16bae6a76e43840f89995c12f?s=128&d=identicon&r=PG&f=1", "display_name": "Bernardo Duarte", "link": "https://stackoverflow.com/users/7395911/bernardo-duarte"}, "is_accepted": false, "score": 3, "last_activity_date": 1505951357, "creation_date": 1505951357, "answer_id": 46333323, "question_id": 46332318, "link": "https://stackoverflow.com/questions/46332318/dynamic-logic-query-builder-in-django/46333323#46333323", "title": "Dynamic logic query builder in Django", "body": "<p>Django ORM has the <strong>Q</strong> objects which allows you to write the logic operation <strong>OR</strong> with the Queryset parameters.</p>\n\n<p>The bellow example does exactly what your text (<code>\"(value &lt; 200 AND value__s_name == 'pressure') OR (value &gt; 10 AND value__s_name == 'depth')\"</code>) asks for:</p>\n\n<pre><code>from django.db.models import Q\nParamValue.objects.filter(\n    Q(value__lt=200, param__s_name='pressure') | Q(value__gt=10, param__s_name='depth')\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 8404710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69a4594c4cc490d59cbe2d9ea737df2?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Bosov", "link": "https://stackoverflow.com/users/8404710/yuriy-bosov"}, "edited": false, "score": 0, "creation_date": 1506032577, "post_id": 46334218, "comment_id": 79668064, "body": "It&#39;s PERFECT! Thanks a lot!"}], "tags": [], "owner": {"reputation": 1311, "user_id": 633621, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8fc080f856247bf207521247b697982b?s=128&d=identicon&r=PG", "display_name": "alfredo138923", "link": "https://stackoverflow.com/users/633621/alfredo138923"}, "is_accepted": true, "score": 2, "last_activity_date": 1505959704, "last_edit_date": 1505959704, "creation_date": 1505958985, "answer_id": 46334218, "question_id": 46332318, "link": "https://stackoverflow.com/questions/46332318/dynamic-logic-query-builder-in-django/46334218#46334218", "title": "Dynamic logic query builder in Django", "body": "<p>Check the library <a href=\"https://github.com/ivelum/djangoql\" rel=\"nofollow noreferrer\">DjangoQL</a>. It supports logical operators, comparison operators, parenthesis, table joins, etc.</p>\n\n<pre><code>from django.db import models\n\nfrom djangoql.queryset import DjangoQLQuerySet\n\n\nclass Book(models.Model):\n    name = models.CharField(max_length=255)\n    author = models.ForeignKey('auth.User')\n\n    objects = DjangoQLQuerySet.as_manager()\n</code></pre>\n\n<p>With the example above you can perform search like this:</p>\n\n<pre><code>qs = Book.objects.djangoql(\n    'name ~ \"war\" and author.last_name = \"Tolstoy\"'\n)\n</code></pre>\n\n<p>And DjangoQL will execute the equivalent Django queryset.</p>\n"}], "owner": {"reputation": 61, "user_id": 8404710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69a4594c4cc490d59cbe2d9ea737df2?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Bosov", "link": "https://stackoverflow.com/users/8404710/yuriy-bosov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2615, "favorite_count": 0, "accepted_answer_id": 46334218, "answer_count": 2, "score": 2, "last_activity_date": 1505959704, "creation_date": 1505944419, "question_id": 46332318, "link": "https://stackoverflow.com/questions/46332318/dynamic-logic-query-builder-in-django", "title": "Dynamic logic query builder in Django", "body": "<p>I'm have 2 table in DB:</p>\n\n<pre><code>class Param(models.Model):\n    s_name = models.CharField(max_length=200)\n    n_name = models.CharField(max_length=200)\n\nclass ParamValue(models.Model):\n    param = models.ForeignKey(Param)\n    value = models.IntegerField()\n    created = models.DateTimeField(default=datetime.now, blank=True)\n</code></pre>\n\n<p>I wanted to create dynamic constructor. Is there any library or method for create dynamic logic filter like as Apache Lucene or Solr?\nI mean something like this:</p>\n\n<pre><code>dyn_filter = parse(\"(value &lt; 200 AND value__s_name == 'pressure') \n    OR (value &gt; 10 AND value__s_name == 'depth')\")\nresult = ParamValue.objects.filter(dyn_filer)\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "where"], "comments": [{"owner": {"reputation": 13633, "user_id": 5916727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1508d2b83d8f3b1c7450023486045d?s=128&d=identicon&r=PG&f=1", "display_name": "student", "link": "https://stackoverflow.com/users/5916727/student"}, "edited": false, "score": 0, "creation_date": 1505944973, "post_id": 46332281, "comment_id": 79625589, "body": "Something is error in if_false. Try replacing <code>if_false = [pd.to_datetime(r_label[:,1:][_], errors=&#39;coerce&#39;) for _ in range(r_values_count)]</code>"}, {"owner": {"reputation": 131, "user_id": 3882326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d0fdf161c3d17c01fc9077d09b079b6?s=128&d=identicon&r=PG&f=1", "display_name": "andrewlamb", "link": "https://stackoverflow.com/users/3882326/andrewlamb"}, "edited": false, "score": 1, "creation_date": 1505945475, "post_id": 46332281, "comment_id": 79625796, "body": "What is the program attempting to do here? Isn&#39;t <code>check</code> just a <code>bool</code> (i.e. not a list), so it will take all of either <code>if_true</code> or <code>if_false</code>?"}], "owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1044, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505944241, "creation_date": 1505944241, "question_id": 46332281, "link": "https://stackoverflow.com/questions/46332281/numpy-valueerror-cannot-convert-float-nan-to-integer", "title": "numpy ValueError: cannot convert float NaN to integer", "body": "<p>I am trying to design a <code>np.where</code>argument which has the below inputs</p>\n\n<pre><code>r_label = np.array([['Fiscal data as of Dec 31 2016', '2016', '2015', '2014'],\n       ['Fiscal data as of Dec 31 2016', '2016', '2015', '2014']],\n        dtype='&lt;U29')\n\nx = pd.Int64Index([12, 12], dtype='int64')\n\nr_values_count = 2\n\ncheck = np.isnat(pd.to_datetime(r_label[:,1:][0], errors='coerce', format='%b %d %Y')).all()\n\nif_true =  [pd.to_datetime(r_label[:,1:][_], errors='coerce').map(lambda t: t.replace(month=x[_])) for _ in range(r_values_count)]\n\nif_false = [pd.to_datetime(r_label[:,1:][_], errors='coerce', format='%b %d %Y') for _ in range(r_values_count)]\n\nnp.where(check, if_true, if_false)\n</code></pre>\n\n<p>but i am getting error  <code>ValueError: cannot convert float NaN to integer</code>. All the three parameters of <code>np.where</code> argument work perfectly well independently, I am not able to understand why it does now work inside <code>np.where</code> and how do i find where exactly is the code producing error</p>\n"}, {"tags": ["python", "excel"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5552507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6385723616bc066895a652c7f4b8470f?s=128&d=identicon&r=PG&f=1", "display_name": "PiWi", "link": "https://stackoverflow.com/users/5552507/piwi"}, "is_accepted": false, "score": 0, "last_activity_date": 1505945552, "creation_date": 1505945552, "answer_id": 46332526, "question_id": 46332258, "link": "https://stackoverflow.com/questions/46332258/how-do-i-read-and-loop-through-an-excel-file-in-python-in-the-format-row1-col1/46332526#46332526", "title": "How do I read and loop through an excel file in python in the format [Row1, Col1] [Row2, Col2] [Row3, Col3]", "body": "<p>The question is not completely clear to me: I understand you want to separate the values you get from your comma separated value file (not an Excel file by the way). You can use <a href=\"http://python-reference.readthedocs.io/en/latest/docs/str/split.html\" rel=\"nofollow noreferrer\">split</a> to split comma separated values into a list:</p>\n\n<pre><code>with open('slatecode test.csv') as f:\n   read_data = f.readlines()\n   for row in read_data:\n      list_of_row_values = row.split(\",\")\n      print (list_of_row_values)\n</code></pre>\n\n<p>Note: f.close() is not needed: this is the purpose of the with block to handle file closing when necessary (end of block or error)</p>\n"}, {"comments": [{"owner": {"reputation": 688, "user_id": 5916081, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-G6aPsdU-Pw4/AAAAAAAAAAI/AAAAAAAAABM/VDunaNTcGjg/photo.jpg?sz=128", "display_name": "omokehinde igbekoyi", "link": "https://stackoverflow.com/users/5916081/omokehinde-igbekoyi"}, "edited": false, "score": 0, "creation_date": 1505997347, "post_id": 46332719, "comment_id": 79648008, "body": "i want the output to be in this format [Row1, Col1] [Row2, Col2] [Row3, Col3] up to the end of the file after the loop. Then I want to select the value of each cell after the iteration."}, {"owner": {"reputation": 2983, "user_id": 8629753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RYMtk.jpg?s=128&g=1", "display_name": "adder", "link": "https://stackoverflow.com/users/8629753/adder"}, "reply_to_user": {"reputation": 688, "user_id": 5916081, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-G6aPsdU-Pw4/AAAAAAAAAAI/AAAAAAAAABM/VDunaNTcGjg/photo.jpg?sz=128", "display_name": "omokehinde igbekoyi", "link": "https://stackoverflow.com/users/5916081/omokehinde-igbekoyi"}, "edited": false, "score": 0, "creation_date": 1505998487, "post_id": 46332719, "comment_id": 79648900, "body": "You&#39;re still being too vague, sorry. Try rephrasing the question, as well as including example input and desired output."}], "tags": [], "owner": {"reputation": 2983, "user_id": 8629753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RYMtk.jpg?s=128&g=1", "display_name": "adder", "link": "https://stackoverflow.com/users/8629753/adder"}, "is_accepted": false, "score": 0, "last_activity_date": 1505957232, "last_edit_date": 1505957232, "creation_date": 1505946818, "answer_id": 46332719, "question_id": 46332258, "link": "https://stackoverflow.com/questions/46332258/how-do-i-read-and-loop-through-an-excel-file-in-python-in-the-format-row1-col1/46332719#46332719", "title": "How do I read and loop through an excel file in python in the format [Row1, Col1] [Row2, Col2] [Row3, Col3]", "body": "<p>Although the question is rather unclear, I will try to give you an answer anyway. It sounds like you only want to extract values going diagonally; first value being from ROW1, COL1, then value from ROW2, COL2, and so on.</p>\n\n<p>In that case, the Pythonic way would be to use standard library's <code>csv</code> module, since it seems that you are trying to read a .csv file. So, if I understood you correctly, you want something along the following lines:</p>\n\n<pre><code>import csv\n\nwith open(file_name, 'r', newline='') as f:\n\n    reader = csv.reader(f, delimiter=',')\n\n    for column, row in enumerate(reader):\n        try:\n            print(row[column])\n        except IndexError: # in case there are more columns than rows\n            break\n</code></pre>\n\n<p>For instance, given the input file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nvoxz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nvoxz.png\" alt=\"Input File\"></a></p>\n\n<p>...the output would be:</p>\n\n<pre><code>1\n7\n13\n19\n25\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 688, "user_id": 5916081, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-G6aPsdU-Pw4/AAAAAAAAAAI/AAAAAAAAABM/VDunaNTcGjg/photo.jpg?sz=128", "display_name": "omokehinde igbekoyi", "link": "https://stackoverflow.com/users/5916081/omokehinde-igbekoyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1506003873, "creation_date": 1506003873, "answer_id": 46346507, "question_id": 46332258, "link": "https://stackoverflow.com/questions/46332258/how-do-i-read-and-loop-through-an-excel-file-in-python-in-the-format-row1-col1/46346507#46346507", "title": "How do I read and loop through an excel file in python in the format [Row1, Col1] [Row2, Col2] [Row3, Col3]", "body": "<p>I was able to answer it myself and here is my code:</p>\n\n<pre><code>import csv\n\nwith open('slatecode test.csv') as f:\n    readCSV = csv.reader(f)\n    col1 = []\n    col2 = []\n    col3 = []\n    col4 = []\n    col5 = []\n    col6 = []\n    col7 = []\n    col8 = []\n    col9 = []\n    col10 = []\n    for row in readCSV:\n        #print (row)\n        col1.append(row[0])\n        col2.append(row[1])\n        col3.append(row[2])\n        col4.append(row[3])\n        col5.append(row[4])\n        col6.append(row[5])\n        col7.append(row[6])\n        col8.append(row[7])\n        col9.append(row[8])\n        col10.append(row[9])\n\n    row1 = [col1[0], col2[0], col3[0], col4[0], col5[0], col6[0], col7[0], col8[0], col9[0], col10[0]]\n    row2 = [col1[1], col2[1], col3[1], col4[1], col5[1], col6[1], col7[1], col8[1], col9[1], col10[1]]\n    row3 = [col1[2], col2[2], col3[2], col4[2], col5[2], col6[2], col7[2], col8[2], col9[2], col10[2]]\n    row4 = [col1[3], col2[3], col3[3], col4[3], col5[3], col6[3], col7[3], col8[3], col9[3], col10[3]]\n    row5 = [col1[4], col2[4], col3[4], col4[4], col5[4], col6[4], col7[4], col8[4], col9[4], col10[4]]\n    row6 = [col1[5], col2[5], col3[5], col4[5], col5[5], col6[5], col7[5], col8[5], col9[5], col10[5]]\n    row7 = [col1[6], col2[6], col3[6], col4[6], col5[6], col6[6], col7[6], col8[6], col9[6], col10[6]]\n    row8 = [col1[7], col2[7], col3[7], col4[7], col5[7], col6[7], col7[7], col8[7], col9[7], col10[7]]\n    row9 = [col1[8], col2[8], col3[8], col4[8], col5[8], col6[8], col7[8], col8[8], col9[8], col10[8]]\n    row10 = [col1[9], col2[9], col3[9], col4[9], col5[9], col6[9], col7[9], col8[9], col9[9], col10[9]]\n\n    print([row1, col1])\n    print([row2, col2])\n    print([row3, col3])\n    print([row4, col4])\n    print([row5, col5])\n    print([row6, col6])\n    print([row7, col7])\n    print([row8, col8])\n    print([row9, col9])\n    print([row10, col10])\n\n    print(col1[0], col2[0], col3[0], col4[0], col5[0], col6[0], col7[0], col8[0], col9[0], col10[0],\ncol1[1], col2[1], col3[1], col4[1], col5[1], col6[1], col7[1], col8[1], col9[1], col10[1],\ncol1[2], col2[2], col3[2], col4[2], col5[2], col6[2], col7[2], col8[2], col9[2], col10[2],\ncol1[3], col2[3], col3[3], col4[3], col5[3], col6[3], col7[3], col8[3], col9[3], col10[3],\ncol1[4], col2[4], col3[4], col4[4], col5[4], col6[4], col7[4], col8[4], col9[4], col10[4],\ncol1[5], col2[5], col3[5], col4[5], col5[5], col6[5], col7[5], col8[5], col9[5], col10[5],\ncol1[6], col2[6], col3[6], col4[6], col5[6], col6[6], col7[6], col8[6], col9[6], col10[6],\ncol1[7], col2[7], col3[7], col4[7], col5[7], col6[7], col7[7], col8[7], col9[7], col10[7],\ncol1[8], col2[8], col3[8], col4[8], col5[8], col6[8], col7[8], col8[8], col9[8], col10[8],\ncol1[9], col2[9], col3[9], col4[9], col5[9], col6[9], col7[9], col8[9], col9[9], col10[9]\n)\n</code></pre>\n\n<p>The code looks too long. I want to know if there is a better, shorter and more efficient way of writing this code.</p>\n"}], "owner": {"reputation": 688, "user_id": 5916081, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-G6aPsdU-Pw4/AAAAAAAAAAI/AAAAAAAAABM/VDunaNTcGjg/photo.jpg?sz=128", "display_name": "omokehinde igbekoyi", "link": "https://stackoverflow.com/users/5916081/omokehinde-igbekoyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1506003873, "creation_date": 1505944143, "last_edit_date": 1505963706, "question_id": 46332258, "link": "https://stackoverflow.com/questions/46332258/how-do-i-read-and-loop-through-an-excel-file-in-python-in-the-format-row1-col1", "title": "How do I read and loop through an excel file in python in the format [Row1, Col1] [Row2, Col2] [Row3, Col3]", "body": "<p>Up to the end of the file.  I want to select the value of the resultant cell from each iteration.  This what I have done so far:</p>\n\n<pre><code>with open('slatecode test.csv') as f:\n    read_data = f.readlines()\n    for row in read_data:\n       print (row)\n\nf.close()\n</code></pre>\n"}, {"tags": ["python", "string", "python-unicode", "pypy"], "answers": [{"tags": [], "owner": {"reputation": 10650, "user_id": 1556290, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b37e6b4ac97453e4ba9dba37954cf79?s=128&d=identicon&r=PG", "display_name": "Armin Rigo", "link": "https://stackoverflow.com/users/1556290/armin-rigo"}, "is_accepted": true, "score": 2, "last_activity_date": 1505979668, "creation_date": 1505979668, "answer_id": 46338153, "question_id": 46332251, "link": "https://stackoverflow.com/questions/46332251/string-maketrans-unicode-handling-pypy-vs-cpython/46338153#46338153", "title": "string.maketrans unicode handling: pypy vs CPython", "body": "<p>That's a \"bug\", i.e. an unexpected difference.  Fixed in 7fe0041fccaa (see line 78 of <a href=\"https://bitbucket.org/pypy/pypy/raw/default/lib-python/2.7/string.py\" rel=\"nofollow noreferrer\">https://bitbucket.org/pypy/pypy/raw/default/lib-python/2.7/string.py</a>).</p>\n"}], "owner": {"reputation": 703, "user_id": 1924207, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/txFIz.gif?s=128&g=1", "display_name": "glexey", "link": "https://stackoverflow.com/users/1924207/glexey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 46338153, "answer_count": 1, "score": 1, "last_activity_date": 1505979668, "creation_date": 1505944085, "question_id": 46332251, "link": "https://stackoverflow.com/questions/46332251/string-maketrans-unicode-handling-pypy-vs-cpython", "title": "string.maketrans unicode handling: pypy vs CPython", "body": "<p>Pypy doesn't seem to handle string.maketrans() when arguments are unicode, however CPython does:</p>\n\n<pre><code>$ python\nPython 2.7.5 (default, Oct 11 2013, 14:51:32)\n[GCC 4.7.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import string\n&gt;&gt;&gt; string.maketrans(ur\"-/[] \", ur\"_____\")\n'\\x00\\x01\\x02\\x03\\x04\\x05\\x06...'\n</code></pre>\n\n\n\n<pre><code>$ pypy\nPython 2.7.13 (c925e73810367cd960a32592dd7f728f436c125c, Jun 08 2017, 19:14:08)\n[PyPy 5.8.0 with GCC 6.3.0] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt;&gt; import string\n&gt;&gt;&gt;&gt; string.maketrans(ur\"-/[] \", ur\"_____\")\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \".../pypy-5.8-linux_x86_64-portable/lib-python/2.7/string.py\", line 78, in maketrans\n    buf[ord(fromstr[i])] = tostr[i]\nTypeError: 'unicode' object cannot be interpreted as an index\n</code></pre>\n\n<p>Didn't find anything relevant on <a href=\"http://pypy.readthedocs.io/en/latest/cpython_differences.html\" rel=\"nofollow noreferrer\">http://pypy.readthedocs.io/en/latest/cpython_differences.html</a>.</p>\n\n<p>Is this a bug of CPython or PyPy?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 4, "last_activity_date": 1505944682, "last_edit_date": 1505944682, "creation_date": 1505944373, "answer_id": 46332306, "question_id": 46332235, "link": "https://stackoverflow.com/questions/46332235/find-max-values-for-each-5-rows-in-pd-dateframe/46332306#46332306", "title": "Find max values for each 5 rows in pd.DateFrame", "body": "<pre><code>g = df.groupby(np.arange(len(df)) // 5)\ng.max().assign(time=g.time.first())\n\n    time   ch1  ch2  ch3   ch4   ch5\n0  20:03  2457  651  183  1549  4840\n1  20:08  2792  717  199  1699  5376\n2  20:13  3067  725  196  1685  5670\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 4, "last_activity_date": 1505945977, "last_edit_date": 1505945977, "creation_date": 1505944641, "answer_id": 46332371, "question_id": 46332235, "link": "https://stackoverflow.com/questions/46332235/find-max-values-for-each-5-rows-in-pd-dateframe/46332371#46332371", "title": "Find max values for each 5 rows in pd.DateFrame", "body": "<p>By using your input : </p>\n\n<pre><code>df['group']=df.index//5\ntarget=df.groupby('group').agg(max)\ntarget['time']=df.groupby('group').time.agg(min)\n\nOut[511]: \n        time   ch1  ch2  ch3   ch4   ch5\ngroup                                   \n0      20:03  2457  651  183  1549  4840\n1      20:08  2792  717  199  1699  5376\n2      20:13  3067  725  196  1685  5670\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8518294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rNFdZ.jpg?s=128&g=1", "display_name": "Gregof", "link": "https://stackoverflow.com/users/8518294/gregof"}, "edited": false, "score": 0, "creation_date": 1505971471, "post_id": 46333121, "comment_id": 79631906, "body": "Thanks! But in the dataset there are several days (15.09, 16.09, 17.09). Do you now, how to set different days in dateframe? (cause it would be .xls format, not only .csv)."}, {"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "reply_to_user": {"reputation": 33, "user_id": 8518294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rNFdZ.jpg?s=128&g=1", "display_name": "Gregof", "link": "https://stackoverflow.com/users/8518294/gregof"}, "edited": false, "score": 0, "creation_date": 1505973721, "post_id": 46333121, "comment_id": 79632711, "body": "Can you update your sample to include dates? If it is just a column of dates, you can combine the column and make it a datetime object"}], "tags": [], "owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "is_accepted": false, "score": 3, "last_activity_date": 1505973883, "last_edit_date": 1505973883, "creation_date": 1505949704, "answer_id": 46333121, "question_id": 46332235, "link": "https://stackoverflow.com/questions/46332235/find-max-values-for-each-5-rows-in-pd-dateframe/46333121#46333121", "title": "Find max values for each 5 rows in pd.DateFrame", "body": "<p>Im going to assume that you did not convert your values to <code>datetime</code> since you specified this is a csv table of data, so I will convert the index to <code>datetime</code>.</p>\n\n<pre><code>df.index = pd.to_datetime(df.time,format='%H:%M')\n</code></pre>\n\n<p>Now that the index is of <code>datetime</code> format we can use <code>resample</code> to group by 5 minute intervals. Note: I will set the base to 3 here since that is how you wanted it formatted, however I think in the long run you may be better suited leaving it at 0. So to group the data just run</p>\n\n<pre><code>df.resample('5T',base=3).max().drop('time',1)\n</code></pre>\n\n<p>To dynamically set the base to the first minute value use</p>\n\n<pre><code>df.resample('5T',base=int(df.time.values[0][-1:])).max().drop('time',1)\n</code></pre>\n\n<p>Yields </p>\n\n<pre><code>                      ch1  ch2  ch3   ch4\ntime\n2017-09-20 20:03:00  2457  651  183  1549\n2017-09-20 20:08:00  2792  717  199  1699\n2017-09-20 20:13:00  3067  725  196  1685\n</code></pre>\n\n<p>If you dont want the date in the index just run</p>\n\n<pre><code>df.index = df.index.time\n</code></pre>\n\n<p>However, you need the date included to resample</p>\n\n<pre><code>           ch1  ch2  ch3   ch4\n20:03:00  2457  651  183  1549\n20:08:00  2792  717  199  1699\n20:13:00  3067  725  196  1685\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8518294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rNFdZ.jpg?s=128&g=1", "display_name": "Gregof", "link": "https://stackoverflow.com/users/8518294/gregof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 46332306, "answer_count": 3, "score": 3, "last_activity_date": 1505973883, "creation_date": 1505944010, "last_edit_date": 1505944658, "question_id": 46332235, "link": "https://stackoverflow.com/questions/46332235/find-max-values-for-each-5-rows-in-pd-dateframe", "title": "Find max values for each 5 rows in pd.DateFrame", "body": "<p>I have some marketing data with 1-minute interval. \nAs a sample of csv-table,  each row represents max values for each minute: </p>\n\n<pre><code>time    ch1     ch2 ch3 ch4      \n20:03   1754    539 149 1337     \n20:04   2073    576 160 1448     \n20:05   2246    599 176 1515     \n20:06   2246    637 176 1531     \n20:07   2457    651 183 1549     \n20:08   2564    677 184 1655     \n20:09   2624    712 191 1699     \n20:10   2742    717 194 1672     \n20:11   2788    714 199 1675     \n20:12   2792    693 186 1680     \n20:13   2914    708 188 1672     \n20:14   3067    715 194 1685     \n20:15   3067    725 196 1682     \n</code></pre>\n\n<p>additionally, I need to find max values for each 5 minute. So I need to find max for every 5 rows (or less - if there are no more rows remained) of each columns and insert it to new 5-minute row.</p>\n\n<p>What I looking to recieve (as example):</p>\n\n<p>each new row has to represent max value for  5 </p>\n\n<pre><code>time    ch1     ch2 ch3 ch4     \n20:03   2564    677 184 1655     \n20:08   2914    717 199 1699     \n20:13   3067    725 196 1685     \n</code></pre>\n\n<p>I honestly have searched but no result.</p>\n\n<p>Is there in Python some elegant solution for my task?\nThank for your help!</p>\n"}, {"tags": ["python", "mongodb", "pymongo", "mongoengine", "nosql"], "comments": [{"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 2, "creation_date": 1505944123, "post_id": 46332227, "comment_id": 79625261, "body": "<code>config__inner_group__individuals__entity_id=&quot;54321&quot;</code>"}, {"owner": {"reputation": 6882, "user_id": 3654061, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/yDdn3.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/3654061/felipe"}, "reply_to_user": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1505944581, "post_id": 46332227, "comment_id": 79625439, "body": "Is it really that simple? So it doesn&#39;t matter that it&#39;s in an array then? I didn&#39;t even try it, because of section 2.5.2.3 on lists"}, {"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 2, "creation_date": 1505944694, "post_id": 46332227, "comment_id": 79625484, "body": "It&#39;s really that simple. You just read the wrong part of documentation. This is basically <a href=\"https://docs.mongodb.com/manual/core/document/#dot-notation\" rel=\"nofollow noreferrer\">&quot;Dot Notation&quot;</a> as covered in the core manual. The MongoEngine ( or django like ) way is to use <code>__</code> in place of <code>.</code>."}], "owner": {"reputation": 6882, "user_id": 3654061, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/yDdn3.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/3654061/felipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505944135, "creation_date": 1505943963, "last_edit_date": 1506103282, "question_id": 46332227, "link": "https://stackoverflow.com/questions/46332227/mongoengine-embeddeddocument-query-with-array-value", "title": "MongoEngine EmbeddedDocument query with array value", "body": "<p>I have an object that looks something like this in the database, with corresponding MongoEngine models:</p>\n\n<pre><code>{\n    ...\n    \"config\" : {\n        \"inner_group\" : {\n            \"individuals\" : [\n                {\n                    \"entity_id\" : \"54321\",\n                }\n            ],\n        },\n        ...    \n    }\n    ...\n}\n</code></pre>\n\n<p>I am trying to query this data using the <code>entity_id</code> field in the object which is part of the <code>individuals</code> collection.</p>\n\n<p>I have tried querying according to the <a href=\"http://docs.mongoengine.org/guide/querying.html\" rel=\"nofollow noreferrer\">MongoEngine docs</a> but I have not been able to pull the data using the following:</p>\n\n<pre><code>data = Model.objects(config__inner_group__individuals__S__entity_id=\"54321\")\n</code></pre>\n\n<p>How can I query the entire parent based on the <code>entity_id</code>?</p>\n"}, {"tags": ["python", "matplotlib", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 82, "user_id": 7688429, "user_type": "registered", "profile_image": "https://graph.facebook.com/2018001888423907/picture?type=large", "display_name": "Ar\u0131n &#214;zk\u0131nay", "link": "https://stackoverflow.com/users/7688429/ar%c4%b1n-%c3%96zk%c4%b1nay"}, "edited": false, "score": 0, "creation_date": 1505968189, "post_id": 46334877, "comment_id": 79631001, "body": "I know that I can draw lines and create charts. But I want it to be able to read the changes in an Excel file. So if i change the Excel file -or import one from another place if i can do- the gui side will also change. The next thing i want to add is a filter menu that i can select which name to display. (for example: two person and their statistics about how many KM they run each year.)"}, {"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "reply_to_user": {"reputation": 82, "user_id": 7688429, "user_type": "registered", "profile_image": "https://graph.facebook.com/2018001888423907/picture?type=large", "display_name": "Ar\u0131n &#214;zk\u0131nay", "link": "https://stackoverflow.com/users/7688429/ar%c4%b1n-%c3%96zk%c4%b1nay"}, "edited": false, "score": 0, "creation_date": 1505969454, "post_id": 46334877, "comment_id": 79631310, "body": "Surely, this is not the question you asked above, which is:  &quot;Is there any way to call all of the script inside the MATPLOT to run in GUI? Like embedding a video to another website&quot;"}, {"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "reply_to_user": {"reputation": 82, "user_id": 7688429, "user_type": "registered", "profile_image": "https://graph.facebook.com/2018001888423907/picture?type=large", "display_name": "Ar\u0131n &#214;zk\u0131nay", "link": "https://stackoverflow.com/users/7688429/ar%c4%b1n-%c3%96zk%c4%b1nay"}, "edited": false, "score": 1, "creation_date": 1505970740, "post_id": 46334877, "comment_id": 79631687, "body": "I think that maybe, you want to ask a <i>new, more specific question</i>, that explains precisely what behavior you would like to have, and describe the output you want. You&#39;ll probably get a better response if you post the code for your <code>MATPLOT </code> script."}], "tags": [], "owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "is_accepted": false, "score": 4, "last_activity_date": 1561761768, "last_edit_date": 1561761768, "creation_date": 1505963684, "answer_id": 46334877, "question_id": 46332192, "link": "https://stackoverflow.com/questions/46332192/displaying-matplotlib-inside-tkinter/46334877#46334877", "title": "Displaying matplotlib inside Tkinter", "body": "<h2>How to embed a matplotlib Figure in a tkinter Frame</h2>\n\n<p>The approach presented subclasses <code>tk.Frame</code> and <code>matplotlib.figure.Figure</code> to make it easy to re-use the code for other purposes.</p>\n\n<p>It creates a <code>tkFrame</code>, with all the boilerplate ready to accept and display a matplotlib <code>Figure</code>.<br>\nIt then creates a <code>Figure</code> (again, ready to be modified and expanded), and embeds it in the <code>tk.Frame</code> created above.<br>\nLast, it launches the <code>tk.mainloop</code></p>\n\n<pre><code>import matplotlib\nimport tkinter as tk\n\nmatplotlib.use('TkAgg')\n# from matplotlib import style\nfrom matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg\nfrom matplotlib.figure import Figure\n\n\nclass GraphPage(tk.Frame):\n\n    def __init__(self, parent):\n        tk.Frame.__init__(self, parent)\n        self.title_label = tk.Label(self, text=\"Graph Page Example\")\n        self.title_label.pack()\n        self.pack()\n\n    def add_mpl_figure(self, fig):\n        self.mpl_canvas = FigureCanvasTkAgg(fig, self)\n        self.mpl_canvas.show()\n        self.mpl_canvas.get_tk_widget().pack(side=tk.TOP, fill=tk.BOTH, expand=True)\n\n        self.toolbar = NavigationToolbar2TkAgg(self.mpl_canvas, self)\n        self.toolbar.update()\n        self.mpl_canvas._tkcanvas.pack(side=tk.TOP, fill=tk.BOTH, expand=True)\n\n\nclass MPLGraph(Figure):\n\n    def __init__(self):\n        Figure.__init__(self, figsize=(5, 5), dpi=100)\n        self.plot = self.add_subplot(111)\n        self.plot.plot([1, 2, 3, 4, 5, 6, 7], [4, 3, 5, 0, 2, 0, 6])\n\n\nfig = MPLGraph()\n\nroot = tk.Tk()\ngraph_page = GraphPage(root)\ngraph_page.add_mpl_figure(fig)\n\nroot.mainloop()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rCta3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rCta3.png\" alt=\"matplotlib Figure embedded in tkinter Frame\"></a></p>\n"}], "owner": {"reputation": 82, "user_id": 7688429, "user_type": "registered", "profile_image": "https://graph.facebook.com/2018001888423907/picture?type=large", "display_name": "Ar\u0131n &#214;zk\u0131nay", "link": "https://stackoverflow.com/users/7688429/ar%c4%b1n-%c3%96zk%c4%b1nay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2276, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1561761768, "creation_date": 1505943772, "question_id": 46332192, "link": "https://stackoverflow.com/questions/46332192/displaying-matplotlib-inside-tkinter", "title": "Displaying matplotlib inside Tkinter", "body": "<p>I have matplotlib script that reads an Excel file and draws it. (as MATPLOT)</p>\n\n<p>And i made another python script looks like a normal program (topmenu, statusbar..) (as GUI)</p>\n\n<p>I want to display MATPLOT in my GUI. Is there any way to call all of the script inside the MATPLOT to run in GUI? Like embedding a video to another website.</p>\n\n<pre><code>root = Tk()\nroot.geometry(\"800x600\")\n\n#MENU\ntopMenu = Menu(root)\nroot.config(menu=topMenu)\n\nloadMenu = Menu(topMenu, tearoff=0)\ntopMenu.add_cascade(label=\"File\", menu=loadMenu)\nloadMenu.add_command(label=\"Import New\", command=doNothing)\nloadMenu.add_command(label=\"Show 'Filter' Menu\" , command=showOptions)\nloadMenu.add_separator()\nloadMenu.add_command(label=\"Exit\", command=root.quit)\n\n#GRAPH\n#\n\n#StatusBar\nstatus = Label(root, text=\"File Name:\", bd=1, relief=SUNKEN, anchor=W)\nstatus.pack(side=BOTTOM, fill=X)\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "ubuntu", "python-telegram-bot"], "comments": [{"owner": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505944022, "post_id": 46332190, "comment_id": 79625229, "body": "Did you install <code>urllib3</code>?"}, {"owner": {"reputation": 53, "user_id": 7653296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3597707aece4322a73fc31989116c8?s=128&d=identicon&r=PG&f=1", "display_name": "Sami Soheili", "link": "https://stackoverflow.com/users/7653296/sami-soheili"}, "reply_to_user": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505944161, "post_id": 46332190, "comment_id": 79625278, "body": "yes i installed urllib3"}, {"owner": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505944369, "post_id": 46332190, "comment_id": 79625359, "body": "Do you use virtualenv? If yes, probably you didn&#39;t activate it"}, {"owner": {"reputation": 53, "user_id": 7653296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3597707aece4322a73fc31989116c8?s=128&d=identicon&r=PG&f=1", "display_name": "Sami Soheili", "link": "https://stackoverflow.com/users/7653296/sami-soheili"}, "reply_to_user": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505944504, "post_id": 46332190, "comment_id": 79625409, "body": "oh no can you explain what i must do please ?"}, {"owner": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505944857, "post_id": 46332190, "comment_id": 79625553, "body": "If you run <code>pip freeze</code> you should see <code>urllib3</code> in a list. If there will not be this lib - you haven&#39;t installed it, or os block your installation because you aren&#39;t <code>root</code> user. You should use <code>sudo pip install urlib3</code>. If you don&#39;t know what is virtualenv - you don&#39;t use it)"}, {"owner": {"reputation": 53, "user_id": 7653296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3597707aece4322a73fc31989116c8?s=128&d=identicon&r=PG&f=1", "display_name": "Sami Soheili", "link": "https://stackoverflow.com/users/7653296/sami-soheili"}, "reply_to_user": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505945000, "post_id": 46332190, "comment_id": 79625599, "body": "i have urllib3==1.22"}, {"owner": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505945204, "post_id": 46332190, "comment_id": 79625679, "body": "Try this solution: <a href=\"https://stackoverflow.com/a/27440556/4900574\">stackoverflow.com/a/27440556/4900574</a>. Or upgrade your packages and pip"}, {"owner": {"reputation": 53, "user_id": 7653296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3597707aece4322a73fc31989116c8?s=128&d=identicon&r=PG&f=1", "display_name": "Sami Soheili", "link": "https://stackoverflow.com/users/7653296/sami-soheili"}, "reply_to_user": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505945577, "post_id": 46332190, "comment_id": 79625826, "body": "i test that not work."}], "answers": [{"tags": [], "owner": {"reputation": 2427, "user_id": 1079103, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/1xFuw.jpg?s=128&g=1", "display_name": "Ali Hashemi", "link": "https://stackoverflow.com/users/1079103/ali-hashemi"}, "is_accepted": false, "score": 0, "last_activity_date": 1505967359, "creation_date": 1505967359, "answer_id": 46335381, "question_id": 46332190, "link": "https://stackoverflow.com/questions/46332190/python-telegram-bot-bot-run-error/46335381#46335381", "title": "python telegram bot - bot run error", "body": "<p>First of all make sure you have <code>urllib3</code> installed. Sometimes <code>urllib3</code> installation breaks. If for some reason your install of urllib3 is failing to include the <code>util</code> submodule, you could simply download the archive from the pypi page and copy the util folder from there to your <code>urllib3</code> install location.</p>\n\n<p>You may also issue the command below to get an up-to-date version:</p>\n\n<p><code>sudo pip install urllib3 --upgrade</code></p>\n\n<p>Then, see where your module is by starting a python interpreter and check where the <code>urllib3</code> module is being loaded from:</p>\n\n<p><code>python -c \"import urllib3; print urllib3.__file__\"</code></p>\n\n<p>If all the above didn't work for you, make sure you're importing it right! and make sure there is no conflict.</p>\n"}, {"tags": [], "owner": {"reputation": 2979, "user_id": 117283, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d39cab08e99ba795d60123e9c16e4c5?s=128&d=identicon&r=PG", "display_name": "Jonas Lejon", "link": "https://stackoverflow.com/users/117283/jonas-lejon"}, "is_accepted": false, "score": 0, "last_activity_date": 1507395949, "creation_date": 1507395949, "answer_id": 46622887, "question_id": 46332190, "link": "https://stackoverflow.com/questions/46332190/python-telegram-bot-bot-run-error/46622887#46622887", "title": "python telegram bot - bot run error", "body": "<p>If you clone the python-telegram-bot repo you need to run the following command before installing the code:</p>\n\n<p><code>git submodule update --init --recursive</code></p>\n\n<p>Then install the code with <code>python setup.py install</code></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10346578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8a147de453b462608a4762769cfc4b?s=128&d=identicon&r=PG&f=1", "display_name": "Arkhatinho", "link": "https://stackoverflow.com/users/10346578/arkhatinho"}, "is_accepted": false, "score": 0, "last_activity_date": 1574242953, "creation_date": 1574242953, "answer_id": 58951148, "question_id": 46332190, "link": "https://stackoverflow.com/questions/46332190/python-telegram-bot-bot-run-error/58951148#58951148", "title": "python telegram bot - bot run error", "body": "<p>Maybe you have 2 version of python and default version is 3.x\nTry to check version of python \n<code>python -V</code>\nif default version is 3 then run your code with python version 2. </p>\n\n<pre><code>python2 echobot.py\n</code></pre>\n\n<p>it can be python2 or python2.7</p>\n\n<p>Also it can be cause of versions of libs</p>\n"}], "owner": {"reputation": 53, "user_id": 7653296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3597707aece4322a73fc31989116c8?s=128&d=identicon&r=PG&f=1", "display_name": "Sami Soheili", "link": "https://stackoverflow.com/users/7653296/sami-soheili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1222, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1574242953, "creation_date": 1505943770, "last_edit_date": 1506081534, "question_id": 46332190, "link": "https://stackoverflow.com/questions/46332190/python-telegram-bot-bot-run-error", "title": "python telegram bot - bot run error", "body": "<p>When I try to run a bot, I get this error message in the terminal:</p>\n\n<pre><code>zass@zass-system-product-name:~/python-telegram-bot/examples$python \nechobot.py\n/usr/local/lib/python2.7/dist-packages/python_telegram_bot-8.0-\npy2.7.egg/telegram/utils/request.py:38: UserWarning: python-telegram-\nbot wasn't properly installed. Please refer to README.rst on how to \nproperly install.\nTraceback (most recent call last):\nFile \"echobot.py\", line 8, in &lt;module&gt;\nimport telegram \nFile \"build/bdist.linux-x86_64/egg/telegram/__init__.py\", line 94, in \n&lt;module&gt;\nFile \"build/bdist.linux-x86_64/egg/telegram/bot.py\", line 34, in \n&lt;module&gt;\nFile \"build/bdist.linux-x86_64/egg/telegram/utils/request.py\", line \n33, in &lt;module&gt;\nImportError: No module named ptb_urllib3.urllib3\n</code></pre>\n\n<p>I'm running Python 2.7 on ubuntu, git and telegram bot are installed. - How can I fix it?</p>\n"}, {"tags": ["python", "cgi"], "comments": [{"owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 1, "creation_date": 1505946459, "post_id": 46332093, "comment_id": 79626151, "body": "Try <code>print form.keys()</code> to see the actual keys for that FieldStorage object,and proceed from there."}, {"owner": {"reputation": 1197, "user_id": 719812, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/u8qN0.png?s=128&g=1", "display_name": "Davide Andrea", "link": "https://stackoverflow.com/users/719812/davide-andrea"}, "reply_to_user": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 0, "creation_date": 1505947683, "post_id": 46332093, "comment_id": 79626506, "body": "@Bill Bell Error: &quot;not indexable&quot;. It&#39;s not an array."}, {"owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 1, "creation_date": 1505964021, "post_id": 46332093, "comment_id": 79630085, "body": "Can you show us more of your code. FieldStorage should expose a method called <code>keys</code>."}, {"owner": {"reputation": 1197, "user_id": 719812, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/u8qN0.png?s=128&g=1", "display_name": "Davide Andrea", "link": "https://stackoverflow.com/users/719812/davide-andrea"}, "reply_to_user": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 0, "creation_date": 1506008168, "post_id": 46332093, "comment_id": 79656172, "body": "form= cgi.FieldStorage()  / print form.keys() -&gt; Error: &quot;not indexable&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1197, "user_id": 719812, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/u8qN0.png?s=128&g=1", "display_name": "Davide Andrea", "link": "https://stackoverflow.com/users/719812/davide-andrea"}, "edited": false, "score": 0, "creation_date": 1506038588, "post_id": 46348954, "comment_id": 79669687, "body": "Indeed, if I call the script from a web browser, form.keys() does work. You&#39;re right: there must be something peculiar about the way the script behaves when called by another script, remotely. I do know that when I &quot;print form&quot;, the data look different. Thanks for working with me."}], "tags": [], "owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "is_accepted": false, "score": 1, "last_activity_date": 1506011520, "creation_date": 1506011520, "answer_id": 46348954, "question_id": 46332093, "link": "https://stackoverflow.com/questions/46332093/how-to-get-data-from-fieldstorage/46348954#46348954", "title": "How to get data from FieldStorage?", "body": "<p>This is <strong>not</strong> an answer. I don't know what's wrong. However, I don't have Python 2 on this computer. I've just run some code on <a href=\"https://repl.it/languages/python\" rel=\"nofollow noreferrer\">repl.it</a>.</p>\n\n<p>Here's what happens.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4iPVB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4iPVB.png\" alt=\"FieldStorage on repl.it\"></a></p>\n\n<p>It works as it's meant to. Apparently there's something peculiar about your setup. If I think of anything I'll come back.</p>\n"}, {"comments": [{"owner": {"reputation": 1197, "user_id": 719812, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/u8qN0.png?s=128&g=1", "display_name": "Davide Andrea", "link": "https://stackoverflow.com/users/719812/davide-andrea"}, "edited": false, "score": 0, "creation_date": 1544723697, "post_id": 53688108, "comment_id": 94386881, "body": "Thank you for answering a question I asked more than 1 year ago, and which I never solved. Next time I work on that project I will try your solution, and get back to you. Thanks!"}, {"owner": {"reputation": 1197, "user_id": 719812, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/u8qN0.png?s=128&g=1", "display_name": "Davide Andrea", "link": "https://stackoverflow.com/users/719812/davide-andrea"}, "edited": false, "score": 1, "creation_date": 1546966923, "post_id": 53688108, "comment_id": 95025432, "body": "fheshwfq Update: I am back into that project. The Ajax code <i>does</i> use  http.setRequestHeader(&#39;content-type&#39;, &#39;application/x-www-form-urlencoded&#39;) So, I really don&#39;t know what&#39;s going on. I just wanted to update you and thank you once more."}], "tags": [], "owner": {"reputation": 183, "user_id": 988549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d291d942d83e317bd94a92920800bc5?s=128&d=identicon&r=PG", "display_name": "fheshwfq", "link": "https://stackoverflow.com/users/988549/fheshwfq"}, "is_accepted": false, "score": 2, "last_activity_date": 1544312692, "creation_date": 1544312692, "answer_id": 53688108, "question_id": 46332093, "link": "https://stackoverflow.com/questions/46332093/how-to-get-data-from-fieldstorage/53688108#53688108", "title": "How to get data from FieldStorage?", "body": "<p>This happens when FieldStorage parses \"plain\" POST data, as opposed to a form for example. If the content-type of the HTTP request is <code>application/x-www-form-urlencoded</code> however, it will know what to do.</p>\n\n<p>This is the HTML file that has a single send button, once it is clicked, the name and age data are sent to the proc.py script, after the header is set to what the Python CGI library likes.</p>\n\n<pre><code>&lt;html&gt;&lt;body&gt;\n&lt;button type=\"button\" onclick=\"sendData()\"&gt;Send&lt;/button&gt;\n&lt;div id=\"content\"&gt;No reponse from script yet.&lt;/div&gt;\n&lt;script&gt;\nfunction sendData() {\n    var http = new XMLHttpRequest();\n    http.onreadystatechange = function() {\n        if (this.readyState == 4 &amp;&amp; this.status == 200) {\n        document.getElementById('content').innerHTML = this.responseText;\n        }\n    };\n    http.open('POST', '/cgi-bin/proc.py', true);\n    http.setRequestHeader('content-type', 'application/x-www-form-urlencoded');\n    http.send('age=10&amp;name=joe');\n}\n&lt;/script&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>And proc.py spits these value back:</p>\n\n<pre><code>#!/usr/bin/env python\nimport cgi\ndata = cgi.FieldStorage()\nprint 'Content-type: text/html\\n'\nprint data['name'].value\nprint '&lt;br /&gt;'\nprint data['age'].value\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3872, "user_id": 5006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wng3q.jpg?s=128&g=1", "display_name": "Jaymon", "link": "https://stackoverflow.com/users/5006/jaymon"}, "is_accepted": false, "score": 2, "last_activity_date": 1608770469, "creation_date": 1608770469, "answer_id": 65432638, "question_id": 46332093, "link": "https://stackoverflow.com/questions/46332093/how-to-get-data-from-fieldstorage/65432638#65432638", "title": "How to get data from FieldStorage?", "body": "<p>Other answers have explained why there was a problem with the request and how to fix it, but I think it might be helpful to better understand the <code>FieldStorage</code> object so you can recover from a bad request.</p>\n<p>I was mostly able to duplicate your state using this:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from cgi import FieldStorage\nfrom StringIO import StringIO\n\nf = FieldStorage(\n    fp=StringIO(&quot;age=10&amp;name=joe&quot;), \n    headers={&quot;content-length&quot;: 15, &quot;content-type&quot;: &quot;plain/text&quot;}, \n    environ={&quot;REQUEST_METHOD&quot;: &quot;POST&quot;}\n)\n\nprint(f) # FieldStorage(None, None, 'age=10&amp;name=joe')\n</code></pre>\n<p>This will fail as expected:</p>\n<pre class=\"lang-py prettyprint-override\"><code>f[&quot;age&quot;] # TypeError: not indexable\nf.keys() # TypeError: not indexable\n</code></pre>\n<p>So <code>FieldStorage</code> didn't parse the query string because it didn't know it should, but you can make <code>FieldStorage</code> manually parse it:</p>\n<pre class=\"lang-py prettyprint-override\"><code>f.fp.seek(0) # we reset fp because FieldStorage exhausted it\n# if f.fp.seek(0) fails we can also do this:\n# f.fp = f.file\nf.read_urlencoded()\n\nf[&quot;age&quot;] # 10\nf.keys() # [&quot;age&quot;, &quot;name&quot;]\n</code></pre>\n<p>If you ever need to get the original body from <code>FieldStorage</code>, you can get it from the <code>FieldStorage.file</code> property, the <code>file</code> property gets set when <code>FieldStorage</code> parses what it thinks is a plain body:</p>\n<pre class=\"lang-py prettyprint-override\"><code>f.file.read() # &quot;age=10&amp;name=joe&quot;\n</code></pre>\n<p>Hope this helps other fellow searchers who stumble on this question in the future.</p>\n"}], "owner": {"reputation": 1197, "user_id": 719812, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/u8qN0.png?s=128&g=1", "display_name": "Davide Andrea", "link": "https://stackoverflow.com/users/719812/davide-andrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3617, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1608770469, "creation_date": 1505943252, "question_id": 46332093, "link": "https://stackoverflow.com/questions/46332093/how-to-get-data-from-fieldstorage", "title": "How to get data from FieldStorage?", "body": "<pre><code>form= cgi.FieldStorage()\nprint form\n</code></pre>\n\n<p>Prints: FieldStorage(None, None, 'age=10&amp;name=joe')</p>\n\n<p>How do I get the data from that form?</p>\n\n<p>I can't use form[FieldKey], because there is no field key.</p>\n\n<p>form['age'] returns a blank string</p>\n\n<p>I'm using Python 2.7</p>\n"}, {"tags": ["python", "for-loop", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7162799, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-cS3PaT_oMA8/AAAAAAAAAAI/AAAAAAAAACc/KOq0sdFGFGo/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/7162799/jack"}, "edited": false, "score": 0, "creation_date": 1505948203, "post_id": 46332186, "comment_id": 79626634, "body": "Thanks, I&#39;m seeing the error below when a try and print a specific value.  print(results[1])  IndexError: list index out of range  print(result[0]) will return the entire list, rather than first object."}, {"owner": {"reputation": 55, "user_id": 7162799, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-cS3PaT_oMA8/AAAAAAAAAAI/AAAAAAAAACc/KOq0sdFGFGo/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/7162799/jack"}, "edited": false, "score": 0, "creation_date": 1505949251, "post_id": 46332186, "comment_id": 79626914, "body": "Resolved: Some results only returned 1 object, so an Index Error for out of range was being generated in these instances. Added a try with index error expectation to resolve."}], "tags": [], "owner": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "is_accepted": true, "score": 1, "last_activity_date": 1505943759, "creation_date": 1505943759, "answer_id": 46332186, "question_id": 46332079, "link": "https://stackoverflow.com/questions/46332079/dynamically-assign-variables-to-items-in-for-loop-from-beautiful-soup/46332186#46332186", "title": "Dynamically assign variables to items in for loop from beautiful soup", "body": "<p>If I understood right, you should use <code>list</code> for store all categories:</p>\n\n<pre><code>result = []    \nfor categories in item_soup.find_all('div', {'class': 'breadcrumbs'}).categories.find_all('a', {'title': ''}):\n    categories = categories.get_text()\n    result.append(categories)\n</code></pre>\n\n<p>Also, you can use <code>list comprehension</code> for it</p>\n"}], "owner": {"reputation": 55, "user_id": 7162799, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-cS3PaT_oMA8/AAAAAAAAAAI/AAAAAAAAACc/KOq0sdFGFGo/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/7162799/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 46332186, "answer_count": 1, "score": 0, "last_activity_date": 1505943759, "creation_date": 1505943172, "question_id": 46332079, "link": "https://stackoverflow.com/questions/46332079/dynamically-assign-variables-to-items-in-for-loop-from-beautiful-soup", "title": "Dynamically assign variables to items in for loop from beautiful soup", "body": "<p>I'm webscraping some content with Beautiful Soup, I'm returning three items in my script and want to assign the values to variables.</p>\n\n<pre><code>for categories in item_soup.find_all('div', {'class': 'breadcrumbs'}):\n    for categories in categories.find_all('a', {'title': ''}):\n        categories = categories.get_text()\n        print(categories)\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>category1\ncategory2\ncategory3\n</code></pre>\n\n<p>How can I assign individual variables to each category for later use? I've thought about using a [0:1] slicing technique but that returns sliced letters per value. I've tried to convert the items into a list or set, but no luck.</p>\n\n<p>Cheers,</p>\n"}, {"tags": ["python", "plotly", "heatmap"], "comments": [{"owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "edited": false, "score": 0, "creation_date": 1505943997, "post_id": 46332055, "comment_id": 79625219, "body": "What do you mean with &#39;nothing present in the customdata field&#39;? You cannot access the data in your JS plot?"}, {"owner": {"reputation": 1, "user_id": 8642170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd46c0c5a1a7095c9bdc9727d28b228b?s=128&d=identicon&r=PG&f=1", "display_name": "raaid", "link": "https://stackoverflow.com/users/8642170/raaid"}, "reply_to_user": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "edited": false, "score": 0, "creation_date": 1505944136, "post_id": 46332055, "comment_id": 79625266, "body": "I&#39;m using it in Python, and if I try to access the customdata for any given point, I get a key error, saying that for the data associated with that point, there is no customdata. Since it isn&#39;t there, I would assume that I am not putting it in correctly."}, {"owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "edited": false, "score": 0, "creation_date": 1505946756, "post_id": 46332055, "comment_id": 79626235, "body": "Please add the code you are using and the error you are getting in order to have a minimal working example."}, {"owner": {"reputation": 1, "user_id": 8642170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd46c0c5a1a7095c9bdc9727d28b228b?s=128&d=identicon&r=PG&f=1", "display_name": "raaid", "link": "https://stackoverflow.com/users/8642170/raaid"}, "reply_to_user": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "edited": false, "score": 0, "creation_date": 1506013989, "post_id": 46332055, "comment_id": 79659554, "body": "I just updated the post, I hope that helps explain my issue. It might be of use to know that I am using Dash by Plotly. I am not getting an error message per se, but it is not functioning as I would expect."}], "owner": {"reputation": 1, "user_id": 8642170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd46c0c5a1a7095c9bdc9727d28b228b?s=128&d=identicon&r=PG&f=1", "display_name": "raaid", "link": "https://stackoverflow.com/users/8642170/raaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 659, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506013921, "creation_date": 1505943035, "last_edit_date": 1506013921, "question_id": 46332055, "link": "https://stackoverflow.com/questions/46332055/what-types-and-dimensions-are-necessary-for-the-customdata-field-in-a-plotly-h", "title": "What type(s) and dimensions are necessary for the customdata field in a Plotly heatmap?", "body": "<p>I have successfully created a Plotly heatmap (in Python). I am now trying to add to the <code>customdata</code> field. According to <a href=\"https://plot.ly/python/reference/#heatmap-customdata\" rel=\"nofollow noreferrer\">their documentation</a>, this field exists for heatmaps and can be a List, Numpy array, or Pandas series. If my <code>x</code> component is length <em>m</em> and my <code>y</code> component is length <em>n</em>, shouldn't my custom data be a list of <em>n</em> lists that are length <em>m</em>? (aka it should mirror the shape of my data) I'm even passing my <code>z</code> component into <code>customdata</code> (which should be the exact rigth dimensions) and there is still nothing present in the customdata field. Any insights or suggestions would be appreciated!</p>\n\n<p>Example code:</p>\n\n<pre><code>from plotly.graph_objs import Heatmap\n\n# assume xlabels, ylabels, zdata, etc. all exist and are correct\n\ntrace_heatmap = go.Heatmap(\n    x=xlabels,\n    y=ylabels,\n    z=zdata,\n    customdata=my_list_that_works_correctly_for_text,\n    colorscale=colorscale,\n    text=my_list_that_works_correctly_for_text,\n    hoverinfo=\u2018text+x+y\u2019)\n</code></pre>\n\n<p>Everything apart from the <code>customdata</code> does what it should. The heatmap shows up, the labels are correct, when I hover it shows what I want, the color scale is correct. But on a click event that is supposed to return x, y, z, text, and <code>customdata</code>, it does not even have a field for customdata. If it matters, again, I am using Python, and using Plotly and Dash (which is made by Plotly). This <a href=\"https://plot.ly/dash/getting-started-part-2\" rel=\"nofollow noreferrer\">example</a> in the Graph Crossfiltering section shows a functional version with scatter plots instead of a heatmap. Below is what I get when I trigger a click on a cell of the heatmap, with <code>customdata</code> notably absent.</p>\n\n<p><code>{'points': [{'curveNumber': 0, 'x': '1', 'y': '2', 'z': 3, 'text': 'Households: 4'}]}</code></p>\n"}, {"tags": ["python", "python-3.x", "validation"], "comments": [{"owner": {"reputation": 540, "user_id": 7482988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7aa212f468c5b64530f3ea8bb99d8b5?s=128&d=identicon&r=PG&f=1", "display_name": "J.N.", "link": "https://stackoverflow.com/users/7482988/j-n"}, "edited": false, "score": 0, "creation_date": 1505944775, "post_id": 46332047, "comment_id": 79625518, "body": "What do you need to do? What&#39;s wrong with the existing code?"}, {"owner": {"reputation": 1, "user_id": 8576218, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gfRgoKYqhfE/AAAAAAAAAAI/AAAAAAAAAco/XTwY9UPckQ8/photo.jpg?sz=128", "display_name": "Zombie Gamer", "link": "https://stackoverflow.com/users/8576218/zombie-gamer"}, "reply_to_user": {"reputation": 540, "user_id": 7482988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7aa212f468c5b64530f3ea8bb99d8b5?s=128&d=identicon&r=PG&f=1", "display_name": "J.N.", "link": "https://stackoverflow.com/users/7482988/j-n"}, "edited": false, "score": 0, "creation_date": 1505946063, "post_id": 46332047, "comment_id": 79625994, "body": "I get the error message:"}, {"owner": {"reputation": 1, "user_id": 8576218, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gfRgoKYqhfE/AAAAAAAAAAI/AAAAAAAAAco/XTwY9UPckQ8/photo.jpg?sz=128", "display_name": "Zombie Gamer", "link": "https://stackoverflow.com/users/8576218/zombie-gamer"}, "reply_to_user": {"reputation": 540, "user_id": 7482988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7aa212f468c5b64530f3ea8bb99d8b5?s=128&d=identicon&r=PG&f=1", "display_name": "J.N.", "link": "https://stackoverflow.com/users/7482988/j-n"}, "edited": false, "score": 0, "creation_date": 1505946084, "post_id": 46332047, "comment_id": 79625999, "body": "NameCorrect = input(&quot;Your name is&quot; ,Name, &quot;is that correct? &quot;) TypeError: input expected at most 1 arguments, got 3"}, {"owner": {"reputation": 165, "user_id": 5706553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/I7rIB.jpg?s=128&g=1", "display_name": "JSextonn", "link": "https://stackoverflow.com/users/5706553/jsextonn"}, "edited": false, "score": 1, "creation_date": 1505946593, "post_id": 46332047, "comment_id": 79626195, "body": "@ZombieGamer I&#39;m assuming you want to concatenate those strings together. <code>input(&quot;Your name is&quot; + Name + &quot;is that correct? &quot;)</code> or  <code>input(f&quot;Your name is {Name} is that correct?&quot;)</code> with python 3.6"}, {"owner": {"reputation": 540, "user_id": 7482988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7aa212f468c5b64530f3ea8bb99d8b5?s=128&d=identicon&r=PG&f=1", "display_name": "J.N.", "link": "https://stackoverflow.com/users/7482988/j-n"}, "edited": false, "score": 1, "creation_date": 1505946633, "post_id": 46332047, "comment_id": 79626206, "body": "Alright... <code>input()</code> takes one argument. You\u2019re giving it three separate arguments. You\u2019ll have to concatenate the three strings into a single string. <i>EDIT</i> JSextonn beat me to it."}, {"owner": {"reputation": 1, "user_id": 8576218, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gfRgoKYqhfE/AAAAAAAAAAI/AAAAAAAAAco/XTwY9UPckQ8/photo.jpg?sz=128", "display_name": "Zombie Gamer", "link": "https://stackoverflow.com/users/8576218/zombie-gamer"}, "edited": false, "score": 0, "creation_date": 1505947121, "post_id": 46332047, "comment_id": 79626338, "body": "it also just repeats the question &quot;your name is (name) is that correct&quot; no matter what answer you give it                                                           (Please enter your name: bob Your name is bob is that correct? no Your name is bob is that correct? yes Your name is bob is that correct?) etc"}, {"owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "edited": false, "score": 0, "creation_date": 1505995509, "post_id": 46332047, "comment_id": 79646694, "body": "Side note: change your variables names to <a href=\"https://en.wikipedia.org/wiki/Snake_case\" rel=\"nofollow noreferrer\">snake_case</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "is_accepted": false, "score": 0, "last_activity_date": 1505993408, "creation_date": 1505993408, "answer_id": 46342799, "question_id": 46332047, "link": "https://stackoverflow.com/questions/46332047/name-and-age-code-with-validation/46342799#46342799", "title": "Name and age code with validation", "body": "<blockquote>\n  <p><strong>Question</strong>: it also just repeats the question \"your name is </p>\n</blockquote>\n\n<p>You have Indention Error and <strong>ask</strong> without a Condition.\nConsider the following:  </p>\n\n<pre><code>Namecorrect = None\nAgecorrect = None\n\nwhile True:\n    if Namecorrect != 'yes':\n        Name = input(\"Please enter your name: \")\n        NameCorrect = input(\"Your name is {}, is that correct? \".format(Name))\n\n    if Namecorrect == 'yes':\n        Age = input(\"Please enter your age: \")\n        Agecorrect = input(\"Your age is {}, is that correct? \".format(Age))\n\n        if Agecorrect == \"yes\":\n            print(\"Please come in\")\n            break\n\n    print(\"Please retry\")\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8576218, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gfRgoKYqhfE/AAAAAAAAAAI/AAAAAAAAAco/XTwY9UPckQ8/photo.jpg?sz=128", "display_name": "Zombie Gamer", "link": "https://stackoverflow.com/users/8576218/zombie-gamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 640, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505993408, "creation_date": 1505942998, "last_edit_date": 1505944705, "question_id": 46332047, "link": "https://stackoverflow.com/questions/46332047/name-and-age-code-with-validation", "title": "Name and age code with validation", "body": "<p>I am stuck on a piece of code using while loops.</p>\n\n<pre><code>Namecorrect = \"\"\nName = input(\"Please enter your name: \")\nwhile Namecorrect == \"\":\n    NameCorrect = input(\"Your name is\" ,Name, \"is that correct? \")\nif Namecorrect == \"yes\":\n    Agecorrect = \"\"\n    Age = input(\"Please enter your age: \")\n    while Agecorrect == \"\":\n        Agecorrect = input(\"Your age is\" ,Age, \"is that correct? \")\n    if Agecorrect == \"yes\":\n        print(\"Please come in\")\n    else:\n        print (\"Please retry\")\nelse:\n    print(\"Please retry\")\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 3, "creation_date": 1505943018, "post_id": 46332027, "comment_id": 79624882, "body": "Can you build a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with only the smallest runnable code that reproduces the problem?"}, {"owner": {"reputation": 2182, "user_id": 7586785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3432b56dd1b917b4be9f102397fa460?s=128&d=identicon&r=PG&f=1", "display_name": "John Lexus", "link": "https://stackoverflow.com/users/7586785/john-lexus"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1505943363, "post_id": 46332027, "comment_id": 79625000, "body": "@CharlesDuffy Absolutely. One moment"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505943402, "post_id": 46332027, "comment_id": 79625014, "body": "Your <code>overlaps</code> is wrong. That or <code>Box.__init__</code>, depending on whether larger <code>y</code> values are supposed to go downwards or upwards."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505943488, "post_id": 46332027, "comment_id": 79625051, "body": "<a href=\"https://ideone.com/d6gZ6O\" rel=\"nofollow noreferrer\">Example.</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505943620, "post_id": 46332027, "comment_id": 79625090, "body": "Also, those are clearly not the same parameters."}, {"owner": {"reputation": 2182, "user_id": 7586785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3432b56dd1b917b4be9f102397fa460?s=128&d=identicon&r=PG&f=1", "display_name": "John Lexus", "link": "https://stackoverflow.com/users/7586785/john-lexus"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505944686, "post_id": 46332027, "comment_id": 79625481, "body": "@user2357112 How are those different parameters? Also, keep in mind that a &quot;Box&quot; is isa bounding rectangle, meanign you must provide to it the left-top point and the bottom-right point, not any arbitrary points."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505944831, "post_id": 46332027, "comment_id": 79625541, "body": "<code>130.05253601074+119.79272460938</code> isn&#39;t <code>119.79272460938</code>. <code>0, 5000</code> isn&#39;t <code>130, 375</code>. Also, yes, I know what a Box is."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1505944954, "post_id": 46332027, "comment_id": 79625580, "body": "You set the top of the box to the <i>smaller</i> input y coordinate, but then when you check for overlaps, if one box&#39;s top coordinate is <i>smaller</i> than the other&#39;s bottom coordinate, you report no overlap. Think about that for a bit."}, {"owner": {"reputation": 2182, "user_id": 7586785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3432b56dd1b917b4be9f102397fa460?s=128&d=identicon&r=PG&f=1", "display_name": "John Lexus", "link": "https://stackoverflow.com/users/7586785/john-lexus"}, "edited": false, "score": 0, "creation_date": 1505945086, "post_id": 46332027, "comment_id": 79625634, "body": "Alright, sorry, not sure I entirely understand your point. The four parameters I am getting from the json &quot;box&quot; are x, y, width, and height. the &quot;last&quot; dc_box is supposed to be exactly the same as box rx. rw box overlaps with rx, but rw does not overlap with dc_box, even though dc_box and rx are supposed  bto be exactly the same. if they are not ,can you explain how they are not ,because I do not see it"}, {"owner": {"reputation": 2182, "user_id": 7586785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3432b56dd1b917b4be9f102397fa460?s=128&d=identicon&r=PG&f=1", "display_name": "John Lexus", "link": "https://stackoverflow.com/users/7586785/john-lexus"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505946367, "post_id": 46332027, "comment_id": 79626113, "body": "@user2357112 Okay... I fixed my overlaps function, I&#39;m still very intereste in why you think rx and dc_box are not the same.."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505946577, "post_id": 46332027, "comment_id": 79626189, "body": "I&#39;m interested in why you think they <i>are</i> they same. Your <code>print</code> shows that <code>dc_box</code> is <code>Rect(Point(130, 375), Point(249, 402))</code>. Does that look anything like what you set <code>rx</code> to?"}, {"owner": {"reputation": 2182, "user_id": 7586785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3432b56dd1b917b4be9f102397fa460?s=128&d=identicon&r=PG&f=1", "display_name": "John Lexus", "link": "https://stackoverflow.com/users/7586785/john-lexus"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505946948, "post_id": 46332027, "comment_id": 79626287, "body": "@user2357112 Okay, I give up, what&#39;s wrong with my logic here? I see how different rx is - I don&#39;t even know how or why it worked to be honest - but why is it not overlapping? Because a box from 130, 275 to 249, 402 should be overlapping with a box that is from 0,5000 to 5000, 0, right?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1505947603, "post_id": 46332027, "comment_id": 79626478, "body": "Looking at this again... oh. You were passing a list to <code>Point</code> in the test that seemed to work, but <code>Point</code> isn&#39;t designed to take a list."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1505947798, "post_id": 46332027, "comment_id": 79626536, "body": "<code>rx</code> actually does look kind of like <code>dc_box</code> - there&#39;s the list problem, and there seems to be a cast to int going on somewhere in the dc_box example, but other than that, they seem to match. I misread the <code>b</code> handling earlier, which made them look more mismatched."}], "answers": [{"tags": [], "owner": {"reputation": 2182, "user_id": 7586785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3432b56dd1b917b4be9f102397fa460?s=128&d=identicon&r=PG&f=1", "display_name": "John Lexus", "link": "https://stackoverflow.com/users/7586785/john-lexus"}, "is_accepted": true, "score": 1, "last_activity_date": 1505947990, "last_edit_date": 1505947990, "creation_date": 1505947739, "answer_id": 46332851, "question_id": 46332027, "link": "https://stackoverflow.com/questions/46332027/reading-in-json-values-not-being-evaluation-right/46332851#46332851", "title": "Reading in JSON values not being evaluation right", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/users/2357112/user2357112\">user2357112</a>. I was passing a list to <code>Point</code> when it is supposed to take two points, and I just never realized it. Also there was an error in my <code>overlaps</code> function. </p>\n"}], "owner": {"reputation": 2182, "user_id": 7586785, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3432b56dd1b917b4be9f102397fa460?s=128&d=identicon&r=PG&f=1", "display_name": "John Lexus", "link": "https://stackoverflow.com/users/7586785/john-lexus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 46332851, "answer_count": 1, "score": 2, "last_activity_date": 1505992222, "creation_date": 1505942841, "last_edit_date": 1505992222, "question_id": 46332027, "link": "https://stackoverflow.com/questions/46332027/reading-in-json-values-not-being-evaluation-right", "title": "Reading in JSON values not being evaluation right", "body": "<p>I have a program running that reads in a JSON file. This JSON file has a couple of things: <em>captions</em> and \"<em>boxes</em>\". The captions are captions of images, and the boxes are little frames that cover parts of an image that you fed to the parent program (the produced this json file). It's not exactly important what these boxes do, really - all that needs to be known is that for every caption in the \"captions\" field, there is a box in the \"boxes\" field. A box is a list of four numbers: x, y, width, height. It forms a rectangle. </p>\n\n<p>Anyway, I am doing something very simple - I made a simple program that would read in this JSON file and, through some different options, it would ask a user to provide for it a \"box\". If any of the JSON file boxes collide, intersect, overlay - whatever - with this box, it would produce the caption for said box. Helps with organization.</p>\n\n<p>All good so far, I hope. I have two classes: Point and Box. \"Point\" is justa point in space, and \"Box\" is a box, or a rectangle. Take a look below: </p>\n\n<pre><code>import json\n\nclass Point:\n\n\"\"\"A point identified by (x,y) coordinates.\"\"\"\n\ndef __init__(self, x=0.0, y=0.0):\n    self.x = x\n    self.y = y\n\ndef as_tuple(self):\n    \"\"\"(x, y)\"\"\"\n    return (self.x, self.y)\n</code></pre>\n\n<p>And BoxClass:</p>\n\n<pre><code>class Box:\n\n\"\"\"A box identified by two points.\n\nThe box stores left, top, right, and bottom values.\n\nCoordinates are based on screen coordinates.\n\norigin                               top\n+-----&gt; x increases                |\n|                           left  -+-  right\nv                                  |\ny increases                         bottom\n\nset_points  -- reset box coordinates\ncontains  -- is a point inside?\noverlaps  -- does a box overlap?\ntop_left  -- get top-left corner\nbottom_right  -- get bottom-right corner\nexpanded_by  -- grow (or shrink)\n\"\"\"\n\ndef __init__(self, pt1, pt2):\n    \"\"\"Initialize a box from two points.\"\"\"\n    self.set_points(pt1, pt2)\n\ndef set_points(self, pt1, pt2):\n    \"\"\"Reset the box coordinates.\"\"\"\n    (x1, y1) = pt1.as_tuple()\n    (x2, y2) = pt2.as_tuple()\n    self.left = min(x1, x2)\n    self.top = min(y1, y2)\n    self.right = max(x1, x2)\n    self.bottom = max(y1, y2)               \n    self.lt = Point(self.left, self.top)        #left-top point\n    self.rb = Point(self.right, self.bottom)    #right-bottom point\n    self.rt = Point(self.right, self.top)       #right-top point\n    self.lb = Point(self.left, self.bottom)     #left-bottom point\n\ndef overlaps(self, other):\n    \"\"\"Return true if a box overlaps with this box.\"\"\"\n    if(self.lt.x &gt; other.rb.x or other.lt.x &gt; self.rb.x):\n        return False\n\n    if(self.rb.y &lt; other.lt.y or other.rb.y &lt; self.lt.y):\n        return False\n\n    return True\n\ndef __str__( self ):\n    return \"&lt;Box (%s,%s)-(%s,%s)&gt;\" % (self.left,self.top,\n        self.right,self.bottom)\n</code></pre>\n\n<p>Now, here is the confusing part. I am just testing this, and here is some code:</p>\n\n<pre><code>\"\"\" Opens and loads the JSON file.\"\"\"\nwith open(\"results.json\") as f:\n    data = json.load(f)\n\ncaptions = data[\"captions\"]\nboxes = data[\"boxes\"]\n\nlt = Point([0, 5000])\nrt = Point([5000, 0])\n\nrw = Box(lt, rt)\n\nrx = Box(Point([130.05253601074, 375.44775390625]), Point([130.05253601074+119.79272460938, 375.44775390625+26.875732421875]))\n\nprint rw.overlaps(rx)\n</code></pre>\n\n<p>This prints \"True\" to the console. <em>As expected</em>.</p>\n\n<p>Now, when I print this:</p>\n\n<pre><code>caption_counter = 0\nfor c, b in zip(captions, boxes):\n    # This wraps around each individual caption, and each of the boxes for each caption (four elements inside the tuple)\n    x, y, x2, y2 = b[0], b[1], b[0] + b[2], b[1] + b[3]\n    lt = Point(x, y)\n    rb = Point(x2, y2)\n    dc_box = Box(lt, rb)\n    caption_counter +=1\n    if rw.overlaps(dc_box) or dc_box.overlaps(rw):\n        print c\n        counter += 1\n        print caption_counter\n</code></pre>\n\n<p>Nothing prints! Nothing at all! I defined x,y,x2,y2 in that really weird way because I wanted to just ascertain everything being inputted into dc_box was 100% what I wanted to go through. And, I want you to take a look at this <code>else</code> statement I included (after nothing printed):</p>\n\n<pre><code>else:\n    print b\n    print dc_box.__str__\n    print \"\\n\"\n</code></pre>\n\n<p>That outputs MANY things, but the last item (basically, the last box) is this:</p>\n\n<pre><code>[130.05253601074, 375.44775390625, 119.79272460938, 26.875732421875]\n&lt;bound method Rect.__str__ of Rect(Point(130, 375), Point(249, 402))&gt;\n</code></pre>\n\n<p>Does that seem familiar? Look at the first test I had! It's the same exact parameters for box \"rx\". And it overlaps with box \"rw\". Why is box \"rw\" NOT overlapping with dc_boc? Here is the <a href=\"https://ufile.io/yh6wm\" rel=\"nofollow noreferrer\">json file</a>.</p>\n"}, {"tags": ["python", "list", "sorting", "path"], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 8359429, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f49debda549f5aa65a46991d960d42f3?s=128&d=identicon&r=PG&f=1", "display_name": "daniel_e", "link": "https://stackoverflow.com/users/8359429/daniel-e"}, "edited": false, "score": 1, "creation_date": 1505988770, "post_id": 46332036, "comment_id": 79642155, "body": "Works perfectly. Now all the images are in the right order. Thank you for your help!"}], "tags": [], "owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "is_accepted": true, "score": 1, "last_activity_date": 1505944034, "last_edit_date": 1505944034, "creation_date": 1505942928, "answer_id": 46332036, "question_id": 46332012, "link": "https://stackoverflow.com/questions/46332012/python-sorted-file-list/46332036#46332036", "title": "Python: Sorted file list", "body": "<h2>Soritng by name</h2>\n\n<p>You can use the built-in function sorted.</p>\n\n<p>Example:</p>\n\n<pre><code>image_list = [os.path.join(\"/home/pi/fotos/previews\",fn) for fn in next(os.walk(\"/home/pi/fotos/previews\"))[2]]\nsorted_list = sorted(image_list, key=str.swapcase)\n</code></pre>\n\n<h2>Sorting by last modified date</h2>\n\n<p>You can use os.stat(filename).st_mtime in order to see when the file was last modified.</p>\n\n<p>Example:</p>\n\n<pre><code>folder_path = \"/home/pi/fotos/previews\"\nunsorted_list = [file_name for file_name in next(os.walk(folder_path))[2]]\nsorted_list = unsorted_list.sort(key=lambda file_name: os.stat(os.path.join(folder_path,file_name)).st_mtime)\n</code></pre>\n"}], "owner": {"reputation": 257, "user_id": 8359429, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f49debda549f5aa65a46991d960d42f3?s=128&d=identicon&r=PG&f=1", "display_name": "daniel_e", "link": "https://stackoverflow.com/users/8359429/daniel-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 46332036, "answer_count": 1, "score": 2, "last_activity_date": 1505944034, "creation_date": 1505942765, "question_id": 46332012, "link": "https://stackoverflow.com/questions/46332012/python-sorted-file-list", "title": "Python: Sorted file list", "body": "<p>I use os.path to generate a file list from a directory. I am generating a photo gallery from it via Tkinter. However the sorting is completely random. I do not see a greater logic behind the order of the photos, that are displayed from the directory. And when I print the list, it's random as well. </p>\n\n<p>How can I change the order of the list, coming out of this snippet by file name or date modified?</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>image_list = [os.path.join(\"/home/pi/fotos/previews\",fn) for fn in next(os.walk(\"/home/pi/fotos/previews\"))[2]]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1505942771, "post_id": 46331875, "comment_id": 79624800, "body": "What is the first <code>for</code> loop supposed to print if they don&#39;t enter the correct username and password?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1505942823, "post_id": 46331875, "comment_id": 79624821, "body": "Your use of the <code>x</code> variable is very confusing. Why not just write <code>if login = &#39;Mongoose&#39; and password = &#39;secret&#39;:</code> instead of <code>if x &gt; 1:</code>?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1505943269, "post_id": 46331875, "comment_id": 79624969, "body": "<a href=\"https://pythonclock.org\" rel=\"nofollow noreferrer\">You should switch to Python 3.6 while you are still learning</a>"}], "answers": [{"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 1, "last_activity_date": 1505942197, "creation_date": 1505942197, "answer_id": 46331908, "question_id": 46331875, "link": "https://stackoverflow.com/questions/46331875/terminal-saying-string-is-not-defined/46331908#46331908", "title": "Terminal saying &#39;string&#39; is not defined", "body": "<p>String is not yet defined if x &lt;= 1.</p>\n\n<pre><code>if x &gt; 1:\n    string = '...\\n'\nfor char in string:  # &lt;&lt;&lt; string is not yet defined if x &lt;= 1.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 802, "user_id": 7867348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9N5J0.jpg?s=128&g=1", "display_name": "Kyle Higginson", "link": "https://stackoverflow.com/users/7867348/kyle-higginson"}, "is_accepted": false, "score": 1, "last_activity_date": 1505942422, "creation_date": 1505942422, "answer_id": 46331952, "question_id": 46331875, "link": "https://stackoverflow.com/questions/46331875/terminal-saying-string-is-not-defined/46331952#46331952", "title": "Terminal saying &#39;string&#39; is not defined", "body": "<pre><code>if x &gt; 1:\n    string = '...\\n'\n</code></pre>\n\n<p>This line is causing your error, you should either indent the remainder of your code where you are using <code>string</code>. Or you should add an <code>else</code> to the if statement to set <code>string</code> to a default value.</p>\n"}], "owner": {"reputation": 11, "user_id": 8644458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7e67ff35e599231e979f8e92597743?s=128&d=identicon&r=PG&f=1", "display_name": "Mongoose", "link": "https://stackoverflow.com/users/8644458/mongoose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1505942422, "creation_date": 1505942065, "last_edit_date": 1505942289, "question_id": 46331875, "link": "https://stackoverflow.com/questions/46331875/terminal-saying-string-is-not-defined", "title": "Terminal saying &#39;string&#39; is not defined", "body": "<p>When I run this program:</p>\n\n<pre><code>import time\nimport sys\nlogin = \"Mongoose\"\npassword = \"secret\"\nx = 1\n\nprint \"Welcome User\"\nprint \"\"\n\nlogin = raw_input(\"Username: \")\n\npassword = raw_input(\"Password: \")\n\nif login == 'Mongoose':\n    x = x + 1\nelse : \n    x = x - 1\n\nif password == 'secret':\n    x = x + 1 \nelse : \n    x = x - 1\n\n\nif x &gt; 1:\n    string = '...\\n'\nfor char in string:\n    sys.stdout.write(char)\n    sys.stdout.flush()\n    time.sleep(.10)\ntime.sleep(0.5)\nstring = '...\\n'\nfor char in string:\n    sys.stdout.write(char)\n    sys.stdout.flush()\n    time.sleep(.10)\ntime.sleep(0.5)\nstring = '...\\n'\nfor char in string:\n    sys.stdout.write(char)\n    sys.stdout.flush()\n    time.sleep(.10)\ntime.sleep(0.5)\nstring = '...\\n'\nfor char in string:\n    sys.stdout.write(char)\n    sys.stdout.flush()\n    time.sleep(.10)\ntime.sleep(0.5)\nstring = '...\\n'\nfor char in string:\n    sys.stdout.write(char)\n    sys.stdout.flush()\n    time.sleep(.10)\ntime.sleep(0.5)\nstring = '...\\n'\nfor char in string:\n    sys.stdout.write(char)\n    sys.stdout.flush()\n    time.sleep(.10)\ntime.sleep(0.5)\nstring = '...\\n'\nfor char in string:\n    sys.stdout.write(char)\n    sys.stdout.flush()\n    time.sleep(.10)\ntime.sleep(0.5)\nstring = 'Access Granted\\n'\nfor char in string:\n    sys.stdout.write(char)\n    sys.stdout.flush()\n    time.sleep(.10)\n\nif x &lt; 1:\n    string = 'Access Denied\\n'\nfor char in string:\n    sys.stdout.write(char)\n    sys.stdout.flush()\n    time.sleep(.10)\n</code></pre>\n\n<p>It spits out this error message:</p>\n\n<pre><code>Traceback (most recent call last):\n     File \"./login3.py\", line 27, in &lt;module&gt;\n        for char in string:\n    NameError: name 'string' is not defined\n</code></pre>\n\n<p>Does anyone know how I can fix this? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 0, "creation_date": 1505942190, "post_id": 46331853, "comment_id": 79624554, "body": "Look at the solution at: <a href=\"https://stackoverflow.com/questions/7590682/access-self-from-decorator\" title=\"access self from decorator\">stackoverflow.com/questions/7590682/access-self-from-decorat&zwnj;&#8203;or</a>. I know it is not the exact same problem but it might be helpful."}, {"owner": {"reputation": 3008, "user_id": 3204951, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8aca84582c72a22e9cb5245571103d92?s=128&d=identicon&r=PG", "display_name": "Nate Mara", "link": "https://stackoverflow.com/users/3204951/nate-mara"}, "reply_to_user": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 0, "creation_date": 1505945178, "post_id": 46331853, "comment_id": 79625663, "body": "@IdanMeyer I tried adding <code>self</code> as a parameter to <code>_impl</code>, but that just shifted the error to <code>_impl() missing 1 required positional argument: &#39;self&#39;</code>, and I tried using <code>fn.__self__</code>, which raises an <code>AttributeError</code>."}], "answers": [{"tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": true, "score": 2, "last_activity_date": 1505949554, "last_edit_date": 1505949554, "creation_date": 1505946257, "answer_id": 46332635, "question_id": 46331853, "link": "https://stackoverflow.com/questions/46331853/decorator-that-gets-self/46332635#46332635", "title": "Decorator that gets self", "body": "<p>You have to implement your decorator as a class and implement the <a href=\"https://docs.python.org/3/howto/descriptor.html\" rel=\"nofollow noreferrer\">descriptor protocol</a>. Basically, the descriptor <code>__get__</code> function is what's responsible for creating bound methods. By overriding this function, you get access to <code>self</code> and can create a bound copy of the <code>call</code> function.</p>\n\n<p>The following implementation does exactly that. The <code>Foo</code> instance is saved in the <code>__self__</code> attribute. The decorator has a <code>__call__</code> method which calls the decorated function, and a <code>call</code> method which does the same thing.</p>\n\n<pre><code>import inspect\nimport functools\nfrom copy import copy\n\nclass call:\n    def __init__(self, func):\n        self.func = func\n        self.__self__ = None # \"__self__\" is also used by bound methods\n\n    def __call__(self, *args, **kwargs):\n        # if bound to on object, pass it as the first argument\n        if self.__self__ is not None:\n            args = (self.__self__,) + args\n\n        return self.func(*args, **kwargs)\n\n    def call(self, *args, **kwargs):\n        self(*args, **kwargs)\n\n    def __get__(self, obj, cls):\n        if obj is None:\n            return self\n\n        # create a bound copy of the decorator\n        bound = copy(self)\n        bound.__self__ = obj\n\n        # update __doc__ and similar attributes\n        functools.wraps(bound.func)(bound)\n        bound.__signature__ = inspect.signature(bound.func)\n\n        # add the bound instance to the object's dict so that\n        # __get__ won't be called a 2nd time\n        setattr(obj, self.func.__name__, bound)\n\n        return bound\n</code></pre>\n\n<hr>\n\n<p>Test:</p>\n\n<pre><code>class Foo(object):\n    @call\n    def bar(self):\n        print('bar')\n\n@call\ndef foo():\n    print('foo')\n\nFoo().bar.call() # output: bar\nfoo() # output: foo\n</code></pre>\n"}], "owner": {"reputation": 3008, "user_id": 3204951, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8aca84582c72a22e9cb5245571103d92?s=128&d=identicon&r=PG", "display_name": "Nate Mara", "link": "https://stackoverflow.com/users/3204951/nate-mara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 46332635, "answer_count": 1, "score": 0, "last_activity_date": 1505949554, "creation_date": 1505941951, "question_id": 46331853, "link": "https://stackoverflow.com/questions/46331853/decorator-that-gets-self", "title": "Decorator that gets self", "body": "<p>I'm trying to write a decorator that can be added to instance methods and non-instance methods alike. I have reduced my code to a minimum example that demonstrates my point</p>\n\n<pre><code>def call(fn):\n    def _impl(*args, **kwargs):\n        return fn(*args, **kwargs)\n\n    fn.call = _impl\n\n    return fn\n\nclass Foo(object):\n    @call\n    def bar(self):\n        pass\n\nFoo().bar.call()\n</code></pre>\n\n<p>This gives the beautiful error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/tmp/511749370/main.py\", line 14, in &lt;module&gt;\n    Foo().bar.call()\n  File \"/tmp/511749370/main.py\", line 3, in _impl\n    return fn(*args, **kwargs)\nTypeError: bar() missing 1 required positional argument: 'self'\n</code></pre>\n\n<p>Is it possible to do something like this without resorting to</p>\n\n<pre><code>Foo.bar.call(Foo())\n</code></pre>\n\n<p>Or is that my only option?</p>\n"}, {"tags": ["python", "opencv", "nameerror"], "comments": [{"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 1, "creation_date": 1505941987, "post_id": 46331818, "comment_id": 79624468, "body": "What does &quot;images&quot; actually contain? It might be empty and then the &quot;gray&quot; is not defined or initialized. Try to add a print (or even better, use pdb) in order to see what &quot;images&quot; contains."}, {"owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "edited": false, "score": 1, "creation_date": 1505942144, "post_id": 46331818, "comment_id": 79624541, "body": "Since your code does not have 50 lines, it is not possible for you to have gotten such a message about line 50.  Please review <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a> and then update the question."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 2126740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aBxp5.jpg?s=128&g=1", "display_name": "Marko \u0160arkanj", "link": "https://stackoverflow.com/users/2126740/marko-%c5%a0arkanj"}, "is_accepted": true, "score": 1, "last_activity_date": 1505942647, "creation_date": 1505942647, "answer_id": 46331983, "question_id": 46331818, "link": "https://stackoverflow.com/questions/46331818/python-opencv-name-not-defined/46331983#46331983", "title": "Python + OpenCV name not defined", "body": "<p>There are no images in folder where your script is located and that is why glob.glob('.jpg') does not return any files and grey object is not created.</p>\n"}], "owner": {"reputation": 13, "user_id": 8644488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/805b49963cc88b552bfb65338405a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/8644488/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3622, "favorite_count": 0, "accepted_answer_id": 46331983, "answer_count": 1, "score": 0, "last_activity_date": 1506067338, "creation_date": 1505941788, "last_edit_date": 1505942728, "question_id": 46331818, "link": "https://stackoverflow.com/questions/46331818/python-opencv-name-not-defined", "title": "Python + OpenCV name not defined", "body": "<p>I'm using a source code example from Open CV for Python documentation as follows:</p>\n\n<pre><code>import numpy as np\nimport cv2\nimport glob\n\n# termination criteria in this, 30 max number of iterations, 0.001 minimum accuracy\n# CV_TERMCRIT_ITER or CV_TERMCRIT_EPS, tells the algorithm that we want to terminate either after some number of iterations or when the convergence metric reaches some small value (respectively).\n# The next two arguments set the values at which one, the other, or both of these criteria should terminate the algorithm.\ncriteria = (cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 30, 0.001)\n\n# prepare object points, like (0,0,0), (1,0,0), (2,0,0), ..., (6,5,0)\nobjp = np.zeros((6*9,3), np.float32)\nobjp[:,:2] = np.mgrid[0:9,0:6].T.reshape(-1,2)\n\n# Arrays to store object points and image points from all the images.\nobjpoints = [] # 3d point in real world space\nimgpoints = [] # 2d points in image plane.\n\nimages = glob.glob('*.jpg')\n\n# fname= 'C:\\\\Users\\\\Bender\\\\Desktop\\\\fotospayloads\\\\'\n\nfor fname in images:\n    img = cv2.imread(fname)\n    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n\n    # Find the chess board corners\n    ret, corners = cv2.findChessboardCorners(gray, (9,6), None)\n\n    # If found, add object points, image points (after refining them)\n    if ret == True:\n        objpoints.append(objp)\n\n        corners2 = cv2.cornerSubPix(gray, corners, (11,11), (-1,-1), criteria)\n        imgpoints.append(corners2)\n\n        # Draw and display the corners\n        img = cv2.drawChessboardCorners(img, (9,6), corners2, ret)\n        cv2.imshow('img', img)\n        cv2.waitKey(500)\n\ncv2.destroyAllWindows()\n\nrms, mtx, dist, rvecs, tvecs = cv2.calibrateCamera(objpoints, imgpoints, gray.shape[::-1], None, None)\n</code></pre>\n\n<p>Unfortunately when I run the source code I get the following error:\n    \"NameError: name 'gray' is not defined\" (line 50).</p>\n\n<p>Any help would be very much appreciated.</p>\n\n<p>Thanks</p>\n\n<p>Isaac</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "edited": false, "score": 0, "creation_date": 1505942409, "post_id": 46331744, "comment_id": 79624643, "body": "Do you have any fields in your <code>Statistics</code> model?"}, {"owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "reply_to_user": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "edited": false, "score": 0, "creation_date": 1505942513, "post_id": 46331744, "comment_id": 79624692, "body": "No, I don&#39;t have any fields for the moment in my <code>Statistics</code> model. Yes, I have a views to display and handel the post of that form. The view is in the question ."}, {"owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "edited": false, "score": 0, "creation_date": 1505942912, "post_id": 46331744, "comment_id": 79624855, "body": "I don&#39;t get the property if you don&#39;t have any fields or attribute in an <code>__init__</code> function. You want to save the choice in a Statistic row that&#39;s it?"}, {"owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "reply_to_user": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "edited": false, "score": 0, "creation_date": 1505943228, "post_id": 46331744, "comment_id": 79624955, "body": "This is probably something I misunderstanding so far.  If you can show me the good procedure, it&#39;d be appreciated.  Yes, I want to save the choice in a Statistic row. In fact, if I select the <code>Per week</code> option, I would like to show  the number of customer create each week. So I don&#39;t think it is necessary to reserve place in the database for that"}, {"owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "reply_to_user": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "edited": false, "score": 0, "creation_date": 1505944375, "post_id": 46331744, "comment_id": 79625364, "body": "@Bestasttung Will you answer that question?"}, {"owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "edited": false, "score": 0, "creation_date": 1505944515, "post_id": 46331744, "comment_id": 79625417, "body": "Hum i must it&#39;s quite complicated, and from what i see you have some choices of period for products, but you&#39;re talking about the number of customers created in a period. I must say i&#39;m a bit confused."}, {"owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "reply_to_user": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "edited": false, "score": 0, "creation_date": 1505944729, "post_id": 46331744, "comment_id": 79625497, "body": "Ok, maybe  it could be relevant to update that question. Let me 5 minutes please. I think you have the knowledge  to explain well to me, but my question is unclear."}, {"owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "edited": false, "score": 0, "creation_date": 1505945295, "post_id": 46331744, "comment_id": 79625724, "body": "tried to answer, tell me if it&#39;s still not what you want"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505945407, "post_id": 46332412, "comment_id": 79625767, "body": "Why do you think Statistics model is useless? Is not in a model class I need to implement the logic?"}, {"owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "reply_to_user": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505945560, "post_id": 46332412, "comment_id": 79625823, "body": "you just want to display the number of user? you don&#39;t want to store the result anywhere? It&#39;s just when someone submit your form, you want to display the number of user created in the period chosen?"}, {"owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505945738, "post_id": 46332412, "comment_id": 79625889, "body": "No, in fact it is a little more complicated than that. I need to implement statistical indicator with the number of user. No, I don&#39;t need to store the result anywhere. Yes, I want to display the number of user created in the period chosen"}, {"owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "reply_to_user": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505945874, "post_id": 46332412, "comment_id": 79625935, "body": "So what fields do you need in you Statistical model ? period, a date, and a result for when the result is about?"}, {"owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505945925, "post_id": 46332412, "comment_id": 79625957, "body": "Sorry, I mislead! I need to store the informations about the number of user per period. Or maybe I could compute them each time the <code>Apply</code> button is selected"}, {"owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "reply_to_user": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505946385, "post_id": 46332412, "comment_id": 79626116, "body": "That was just an example. I told you here you can call your calculation method. But  you have to implement it"}, {"owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505946514, "post_id": 46332412, "comment_id": 79626169, "body": "But that the way I have to &#39;fetch&#39; the informations from the form about the <code>Apply</code> button right? I mean if I want to use it directly in the django class, right?"}, {"owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "reply_to_user": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505947041, "post_id": 46332412, "comment_id": 79626313, "body": "when you click on apply, the form post the value you&#39;ve typed, the view receive it, save the form (and here i show you how to override the save method and access to the submitted data) and you can do your calculation."}, {"owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505947937, "post_id": 46332412, "comment_id": 79626564, "body": "Ok, It is clear to me. According to you, where do I need to implement <code>get_user_create_by_period()</code>?"}, {"owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "reply_to_user": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "edited": false, "score": 0, "creation_date": 1505950060, "post_id": 46332412, "comment_id": 79627137, "body": "you can do that in you Customer model. That would make sense, or actually in the form. It&#39;s not really a method of Customer, or make it static."}], "tags": [], "owner": {"reputation": 1858, "user_id": 3863639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/caeb21939262ca5659f856b80137d5eb?s=128&d=identicon&r=PG", "display_name": "Bestasttung", "link": "https://stackoverflow.com/users/3863639/bestasttung"}, "is_accepted": true, "score": 1, "last_activity_date": 1505945264, "last_edit_date": 1505945264, "creation_date": 1505944818, "answer_id": 46332412, "question_id": 46331744, "link": "https://stackoverflow.com/questions/46331744/access-the-choice-via-my-django-model/46332412#46332412", "title": "Access the choice via my django model", "body": "<p>Well I think you can add a save() method in your form :</p>\n\n<pre><code>class StatisticsBaseForm(forms.Form):\n    ... # the rest of the code\n    def save(self):\n        period = self.cleaned_data['period']\n        # do something with the period\n        get_user_create_by_period(period)\n</code></pre>\n\n<p>And add this form in your views like this:</p>\n\n<pre><code>class StatisticsIndexView(StaffRestrictedMixin, TemplateView):\n    model = Statistics\n    template_name = 'loanwolf/statistics/index.html'\n    form_class = StatisticsBaseForm\n</code></pre>\n\n<p>The save method of the form will be called when the view will have checked if all data submited are ok. There, in the save() method of your form, you have access to the submitted data, like <code>self.cleaned_data['period']</code></p>\n\n<p>I actually even think the Statistics model is useless here.</p>\n"}], "owner": {"reputation": 129, "user_id": 8199872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ba9ea67c16f49b15c3eceaa7839da8e9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/8199872/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 46332412, "answer_count": 1, "score": 2, "last_activity_date": 1505945264, "creation_date": 1505941477, "last_edit_date": 1505944984, "question_id": 46331744, "link": "https://stackoverflow.com/questions/46331744/access-the-choice-via-my-django-model", "title": "Access the choice via my django model", "body": "<h2>settings.py</h2>\n\n<pre><code>PERIODS = (\n    ('day', _('Per day')),\n    ('week', _('Per week')),\n    ('month', _('Per month')),\n    ('year', _('Per year')), \n) \n</code></pre>\n\n<h2>models.py</h2>\n\n<pre><code>class Statistics(TimeStampedModel):\n\n    @property\n    def per_period(self):\n        return settings.PERIODS[self.] \n\n    def nb_of_customers_per_period(self):\n        pass\n</code></pre>\n\n<h2>views.py</h2>\n\n<pre><code>class StatisticsIndexView(StaffRestrictedMixin, TemplateView):\n    model = Statistics()\n    template_name = 'loanwolf/statistics/index.html'\n\n    def get_context_data(self, **kwargs):\n        context = super(StatisticsIndexView, self).get_context_data(**kwargs)\n        context.update({\n            'applications_by_state': ApplicationsByState(),\n            'applications_calendar': ApplicationsCalendar(),\n            'new_customers_calendar': NewCustomersCalendar(),\n            'statistics': Statistics(),\n            'form': StatisticsBaseForm(),\n        })\n        return context\n</code></pre>\n\n<h2>forms.py</h2>\n\n<pre><code>class StatisticsBaseForm(forms.Form):\n    type_choice = forms.ChoiceField(label=_(\"Type\"), choices=settings.STATISTICS_TYPE_CHOICES, initial=0, required=False)\n    period = forms.ChoiceField(label=\"Period\", choices=settings.PERIODS, initial='week', required=False)\n    from_regular_product = forms.ModelChoiceField(\n        queryset=ProductConfig.objects.filter(pk=-1), required=False,\n        label=_('Product'))\n    from_special_product = forms.ModelChoiceField(\n        queryset=ProductConfig.objects.filter(pk=-1), required=False,\n        label=_('Product'))\n    product_type = forms.ChoiceField(\n        choices=settings.LOANWOLF_PRODUCT_TYPE_CHOICES, required=False,\n        initial='regular', label=_('Product type'))\n    debit_frequency = forms.ChoiceField(\n        choices=settings.LOANWOLF_PRODUCT_DEBIT_FREQUENCIES_CHOICES,\n        required=False)\n\n    def __init__(self, *args, **kwargs):\n        super(StatisticsBaseForm, self).__init__(*args, **kwargs)\n        self.helper = FormHelper(self)\n        self.helper.form_class = 'row'\n        self.helper.layout = StatisticalToolsLayout\n\n        company = get_current_company()\n        regular_products = company.available_products.filter(\n            is_active=True, product_type='regular')\n        special_products = company.available_products.filter(\n            is_active=True, product_type='special')\n\n        self.fields['from_regular_product'].queryset = regular_products\n        self.fields['from_special_product'].queryset = special_products\n\n        if regular_products:\n            self.fields['from_regular_product'].initial = \\\n                settings.LOANWOLF_EXTERNAL_REQUEST_DEFAULT_PRODUCT_INDEX\n\n        if special_products:\n            self.fields['from_special_product'].initial = \\\n                settings.LOANWOLF_EXTERNAL_REQUEST_DEFAULT_PRODUCT_INDEX\n\n    class Meta:\n        model = Statistics\n        fields = '__all__'\n</code></pre>\n\n<p>Ok, here is my problem. I have a <a href=\"https://i.stack.imgur.com/xKwG7.png\" rel=\"nofollow noreferrer\">form</a> with a <code>period</code> drop-down menu which allows me to select different types of period (<code>Per day</code>, <code>Per week</code>, <code>Per month</code> or <code>Per year</code>). For instance, if I select <code>Per week</code>, I would like to have access to this choice through <code>Statistics</code> model with self.something. Sorry in advance, but I am a very new programmer in Django/Python. How could I do such thing? Do I need to send something with the <code>Apply</code> button from the <a href=\"https://i.stack.imgur.com/xKwG7.png\" rel=\"nofollow noreferrer\">form</a>?</p>\n\n<h2>Update</h2>\n\n<p>In my django project, it is possible to show every customer in the application with <code>CustomerProfile.objects.all()</code> and find the creation date of a specific customer with</p>\n\n<pre><code>In [12]: cust = CustomerProfile.objects.get(pk=100)\n\nIn [13]: cust.user.date_joined\nOut[13]: datetime.datetime(2017, 7, 28, 14, 43, 51, 925548)\n\nIn [14]: cust\nOut[14]: &lt;CustomerProfile: FistName LastName's customer profile&gt;\n</code></pre>\n\n<p>According to the creation date, I would like to make a listing of how many customers has been created per day, week, month or year. An example of the result could be</p>\n\n<pre><code>...\nweek 28 : [ 09/07/2017 - 15/07/2017 ] - Count : 201 customers\n...\n</code></pre>\n\n<p>I probably need a range start_date and end_date where we will list that kind of information. start_date will be the date of the first customer created and the first week create would be the week of this first date. Obviously, the end_date is today and the last week est the week of this end_date.</p>\n\n<p>For instance, if I select <code>Per week</code> in the drop-down menu and press <code>Apply</code> in the form, I want to send information to my model in such I could code what I explained.</p>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 107, "user_id": 7639382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71af1bdbdce363bd32523a5c59969964?s=128&d=identicon&r=PG&f=1", "display_name": "udothemath", "link": "https://stackoverflow.com/users/7639382/udothemath"}, "reply_to_user": {"reputation": 181, "user_id": 6776246, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/48418a901c45e806f2834a7ba3109cc7?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/6776246/raj"}, "edited": false, "score": 1, "creation_date": 1505942519, "post_id": 46331714, "comment_id": 79624698, "body": "Hi @Raj Thanks for the prompt response. I have tried list(itertools.product(* list_of_lists)), but it gives me ALL the possible cases without considering the indices. I am thinking to try multiple for loops, but I don&#39;t think it is a good idea (or is it?). There must be a better way in python. I have scratched my head for all day. Any keyword/post I should look up? Thanks."}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1505942600, "post_id": 46331714, "comment_id": 79624731, "body": "@udothemath1984, is it case for only 3 input sublists?"}, {"owner": {"reputation": 107, "user_id": 7639382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71af1bdbdce363bd32523a5c59969964?s=128&d=identicon&r=PG&f=1", "display_name": "udothemath", "link": "https://stackoverflow.com/users/7639382/udothemath"}, "reply_to_user": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1505943017, "post_id": 46331714, "comment_id": 79624880, "body": "Hi @RomanPerekhrest Not necessary. It might be list_of_lists = [[1, 2], [3, 4], [5, 6], [7, 8]]. In this case, all_possibility would be [[1, 4], [1, 6], [1, 8], [3, 2], [3, 6], [3, 8], [5, 2], [5, 4], [5, 8], [7, 2], [7, 4], [7, 6]]. If I know how to solve the case with 3 subllists, I should be able to figure this out (I assume). Thanks."}, {"owner": {"reputation": 181, "user_id": 6776246, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/48418a901c45e806f2834a7ba3109cc7?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/6776246/raj"}, "edited": false, "score": 0, "creation_date": 1505943229, "post_id": 46331714, "comment_id": 79624956, "body": "@udothemath1984, so aren&#39;t you looking for something like Mr Geek answered?"}, {"owner": {"reputation": 107, "user_id": 7639382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71af1bdbdce363bd32523a5c59969964?s=128&d=identicon&r=PG&f=1", "display_name": "udothemath", "link": "https://stackoverflow.com/users/7639382/udothemath"}, "edited": false, "score": 0, "creation_date": 1505943613, "post_id": 46331714, "comment_id": 79625087, "body": "Nope. I need the ones with different indices from other list in the nested list."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 7639382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71af1bdbdce363bd32523a5c59969964?s=128&d=identicon&r=PG&f=1", "display_name": "udothemath", "link": "https://stackoverflow.com/users/7639382/udothemath"}, "edited": false, "score": 0, "creation_date": 1505943313, "post_id": 46331989, "comment_id": 79624985, "body": "Not entirely. I have to consider the indices as well. For example, (1, 4, 7) is excluded because 1, and 4 both are the 1st element from the list of the lists (from [1, 2, 3] and [4, 5, 6]). And actually (1, 4, 7) all of them are from the first component of the nested list. I need the cases with all the different indices. Thanks."}, {"owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "reply_to_user": {"reputation": 107, "user_id": 7639382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71af1bdbdce363bd32523a5c59969964?s=128&d=identicon&r=PG&f=1", "display_name": "udothemath", "link": "https://stackoverflow.com/users/7639382/udothemath"}, "edited": false, "score": 0, "creation_date": 1505945430, "post_id": 46331989, "comment_id": 79625778, "body": "@udothemath1984 I updated my answer with a solution to your specific problem."}, {"owner": {"reputation": 107, "user_id": 7639382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71af1bdbdce363bd32523a5c59969964?s=128&d=identicon&r=PG&f=1", "display_name": "udothemath", "link": "https://stackoverflow.com/users/7639382/udothemath"}, "edited": false, "score": 0, "creation_date": 1505947421, "post_id": 46331989, "comment_id": 79626409, "body": "Thanks @Mr Geek I learn a lot from the thread. I need the results to be in the same order of where it comes from. For instance, [1, 8, 6] but not [1, 6, 8] since 8 is the second element from the list [7, 8, 9]."}], "tags": [], "owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "is_accepted": false, "score": 2, "last_activity_date": 1505945406, "last_edit_date": 1505945406, "creation_date": 1505942692, "answer_id": 46331989, "question_id": 46331714, "link": "https://stackoverflow.com/questions/46331714/possible-combination-of-a-nested-list-in-python/46331989#46331989", "title": "Possible combination of a nested list in python", "body": "<p>What you're looking for is the Cartesian product, in Python <code>itertools.product</code>:</p>\n\n<pre><code>&gt;&gt;&gt; import itertools\n&gt;&gt;&gt; list_of_lists = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n&gt;&gt;&gt; all_possibility = list(itertools.product(*list_of_lists))\n&gt;&gt;&gt; print(all_possibility)\n[(1, 4, 7), (1, 4, 8), (1, 4, 9), (1, 5, 7), (1, 5, 8), (1, 5, 9), (1, 6, 7), (1, 6, 8),\n (1, 6, 9), (2, 4, 7), (2, 4, 8), (2, 4, 9), (2, 5, 7), (2, 5, 8), (2, 5, 9), (2, 6, 7),\n (2, 6, 8), (2, 6, 9), (3, 4, 7), (3, 4, 8), (3, 4, 9), (3, 5, 7), (3, 5, 8), (3, 5, 9),\n (3, 6, 7), (3, 6, 8), (3, 6, 9)]\n</code></pre>\n\n<p>If you want permutations based on the indices rather than the values, you can use <code>itertools.combinations</code> to get the possible indices, then use those indices to get the respective values from the sub-lists, like this:</p>\n\n<pre><code>&gt;&gt;&gt; list_of_lists = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n&gt;&gt;&gt; length = 3\n&gt;&gt;&gt; all_indices = list(itertools.permutations(range(length), length))\n&gt;&gt;&gt; all_possibility = [[l[i] for l,i in zip(list_of_lists, indices)] for indices in all_indices]\n&gt;&gt;&gt; print(all_possibility)\n[[1, 5, 9], [1, 6, 8], [2, 4, 9], [2, 6, 7], [3, 4, 8], [3, 5, 7]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 7639382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71af1bdbdce363bd32523a5c59969964?s=128&d=identicon&r=PG&f=1", "display_name": "udothemath", "link": "https://stackoverflow.com/users/7639382/udothemath"}, "edited": false, "score": 0, "creation_date": 1505947126, "post_id": 46332296, "comment_id": 79626340, "body": "Wow! Thanks @poke. It is very readable and the results remain the order of all the possible cases. It is exactly what I am looking for."}], "tags": [], "owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "is_accepted": true, "score": 2, "last_activity_date": 1505944702, "last_edit_date": 1505944702, "creation_date": 1505944337, "answer_id": 46332296, "question_id": 46331714, "link": "https://stackoverflow.com/questions/46331714/possible-combination-of-a-nested-list-in-python/46332296#46332296", "title": "Possible combination of a nested list in python", "body": "<blockquote>\n  <p>I have to consider the indices as well. For example, <code>(1, 4, 7)</code> is excluded because <code>1</code>, and <code>4</code> both are the 1st element from the list of the lists (from <code>[1, 2, 3]</code> and <code>[4, 5, 6]</code>). And actually <code>(1, 4, 7)</code> all of them are from the first component of the nested list. I need the cases with all the different indices.</p>\n</blockquote>\n\n<p>So you actually just want to get the possible permutations of a \u201clist selector\u201d for each index in the output, i.e. these are what you are trying to get:</p>\n\n<pre><code>&gt;&gt;&gt; list(itertools.permutations(range(3), 3))\n[(0, 1, 2), (0, 2, 1), (1, 0, 2), (1, 2, 0), (2, 0, 1), (2, 1, 0)]\n</code></pre>\n\n<p>And once you have that, you just need to translate into your <code>list_of_lists</code> where you access each index from the specified sublist:</p>\n\n<pre><code>&gt;&gt;&gt; [[list_of_lists[k][i] for i, k in enumerate(comb)] for comb in itertools.permutations(range(3), 3)]\n[[1, 5, 9], [1, 8, 6], [4, 2, 9], [4, 8, 3], [7, 2, 6], [7, 5, 3]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 7639382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71af1bdbdce363bd32523a5c59969964?s=128&d=identicon&r=PG&f=1", "display_name": "udothemath", "link": "https://stackoverflow.com/users/7639382/udothemath"}, "is_accepted": false, "score": 0, "last_activity_date": 1506011575, "creation_date": 1506011575, "answer_id": 46348975, "question_id": 46331714, "link": "https://stackoverflow.com/questions/46331714/possible-combination-of-a-nested-list-in-python/46348975#46348975", "title": "Possible combination of a nested list in python", "body": "<p>In a spirit of @poke's approach, here is the cases for number of elements differ than the number of the list in the lists. (Previously, there are 3 elements in individual list where 3 sub-lists in the list).</p>\n\n<pre><code>list_of_lists = [[1, 2], [3, 4], [5, 6], [7, 8]]\n</code></pre>\n\n<p>We expect every (0, 1) pairs from the list of lists, or</p>\n\n<pre><code>all_possibility = [[1, 4], [1, 6], [1, 8], [3, 2], [3, 6], [3, 8], \\\n                   [5, 2], [5, 4], [5, 8], [7, 2], [7, 4], [7, 6]]\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>permutation_cases = list(itertools.permutations(range(2), 2))\nselect_from = list(itertools.combinations(range(len(list_of_lists)), 2))\n\nall_possibility = []\nfor selecting_index in select_from:\n        selected = [list_of_lists[i] for i in selecting_index ]\n        cases = list([selected[k][i] for i, k in enumerate(comb)] for comb in permutation_cases)\n        for item in cases:\n            all_possibility.append(item)\nprint(all_possibility)\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 7639382, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/71af1bdbdce363bd32523a5c59969964?s=128&d=identicon&r=PG&f=1", "display_name": "udothemath", "link": "https://stackoverflow.com/users/7639382/udothemath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 0, "accepted_answer_id": 46332296, "answer_count": 3, "score": 2, "last_activity_date": 1506011575, "creation_date": 1505941390, "last_edit_date": 1505947676, "question_id": 46331714, "link": "https://stackoverflow.com/questions/46331714/possible-combination-of-a-nested-list-in-python", "title": "Possible combination of a nested list in python", "body": "<p>If I have a list of lists and want to find all the possible combination from each different indices, how could I do that?</p>\n\n<p>For example:</p>\n\n<pre><code>list_of_lists = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n</code></pre>\n\n<p>I want to find</p>\n\n<pre><code>all_possibility = [[1, 5, 9], [1, 8, 6], [4, 2, 9], [4, 8, 3], [7, 2, 6], [7, 5, 3]]\n</code></pre>\n\n<p>where </p>\n\n<ul>\n<li><p>[1,5,9]: 1 is 1st element of [1, 2, 3], 5 is 2nd element of [4, 5, 6], 9 is 3rd element of [7, 8, 9]. </p></li>\n<li><p>[1,8,6]: 1 is 1st element of [1, 2, 3], 8 is 2nd element of [7, 8, 9], 6 is 3rd element of [4, 5, 6]. </p></li>\n</ul>\n\n<p>and so on.</p>\n\n<p>(Edited) Note: I would like the result to be in the same order as the original element of the list. [1, 8, 6] but not [1, 6, 8] because 8 is the 2nd element of [7, 8, 9]. </p>\n"}, {"tags": ["python", "python-3.x", "list", "dictionary"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 5, "creation_date": 1505941618, "post_id": 46331694, "comment_id": 79624287, "body": "early optimization is the root of all evil ... first measure, then cut, etc ... i would recommend going with the most readable version which is probably <code>collections.Counter(my_text_corpus)</code>"}, {"owner": {"reputation": 228, "user_id": 7271239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/255efc380d0f6a70e1d70a54cdcf10a7?s=128&d=identicon&r=PG&f=1", "display_name": "DataEngineer", "link": "https://stackoverflow.com/users/7271239/dataengineer"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1505948032, "post_id": 46331694, "comment_id": 79626592, "body": "thank you for the suggestion. I appreciate the suggestion."}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 5431554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80572587c975be705c18567c2c5d1862?s=128&d=identicon&r=PG&f=1", "display_name": "J. Clark", "link": "https://stackoverflow.com/users/5431554/j-clark"}, "is_accepted": false, "score": 2, "last_activity_date": 1505942958, "last_edit_date": 1505942958, "creation_date": 1505942184, "answer_id": 46331903, "question_id": 46331694, "link": "https://stackoverflow.com/questions/46331694/python-optimization-choosing-between-dictionary-or-list-of-list/46331903#46331903", "title": "Python optimization: Choosing between dictionary or list of list", "body": "<p>I would generally agree with Joran Beasley's comment above, it is often better to solve your problem, and then go back and refactor for efficiency later.</p>\n\n<p>When working with histograms I would recommend checking out <a href=\"https://docs.python.org/3/library/collections.html?highlight=collections#collections.Counter%22the%20counter\" rel=\"nofollow noreferrer\">Counter</a> inside the collections module. The collections module as a whole is really great, and has a lot of useful containers.</p>\n\n<p>Another cool module is the <a href=\"https://docs.python.org/3/library/timeit.html%22timeit\" rel=\"nofollow noreferrer\">Timeit</a> module, which allows you to run small timing experiments on code snippets. Keep in mind execution speed is dependent on a lot of factors that are not necessarily in your program's control.</p>\n"}, {"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1505949569, "post_id": 46331937, "comment_id": 79626998, "body": "so much more clear ..... (although i would just run the cleaner on the whole text rather than each word individually) <code>Counter(cleaner(text))</code>"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1505966265, "post_id": 46331937, "comment_id": 79630594, "body": "@joran IIRC, <code>Counter</code> on the entire string will count up all the letters, not the words"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1506008918, "post_id": 46331937, "comment_id": 79656661, "body": "<code>Counter(cleaner(text).split())</code> sorry you are right :P  ... but still rather than clean each word clean the whole corpus once"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1506009109, "post_id": 46331937, "comment_id": 79656776, "body": "@JoranBeasley that&#39;s a good point, updated accordingly"}], "tags": [], "owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "is_accepted": true, "score": 5, "last_activity_date": 1506009053, "last_edit_date": 1506009053, "creation_date": 1505942355, "answer_id": 46331937, "question_id": 46331694, "link": "https://stackoverflow.com/questions/46331694/python-optimization-choosing-between-dictionary-or-list-of-list/46331937#46331937", "title": "Python optimization: Choosing between dictionary or list of list", "body": "<p>Which is more readable? I would think that the dictionary version is easier to understand. Also, note that you could pass the list of 2-tuples from your second method to the <code>dict</code> constructor to reproduce the output from the first method. This should give you an idea of how these two implementations are roughly equivalent at least in some respect. Unless this is causing a performance issue, I wouldn't worry too much about it.</p>\n\n<p>The strength of Python is that you can write the same code, in a readable fashion, in five lines. </p>\n\n<pre><code>import re, random\nfrom collections import Counter\n\ndef histogram(text):\n    clean_text = re.sub('[.,:;!-[]?', '', text)\n    words = clean_text.split()\n    return Counter(words)\n\ndef random_word(histogram):\n    words, frequencies = zip(*histogram.items())\n    return random.choices(words, frequencies, k=1)\n</code></pre>\n"}], "owner": {"reputation": 228, "user_id": 7271239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/255efc380d0f6a70e1d70a54cdcf10a7?s=128&d=identicon&r=PG&f=1", "display_name": "DataEngineer", "link": "https://stackoverflow.com/users/7271239/dataengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 2, "closed_date": 1505975147, "accepted_answer_id": 46331937, "answer_count": 2, "score": 3, "last_activity_date": 1506009053, "creation_date": 1505941320, "question_id": 46331694, "link": "https://stackoverflow.com/questions/46331694/python-optimization-choosing-between-dictionary-or-list-of-list", "closed_reason": "Needs more focus", "title": "Python optimization: Choosing between dictionary or list of list", "body": "<p>I'm new to python3, and I got a question about different approaches to solve this problem.  question about using different data structure.\nMy question is how to compare tradeoff with different sampling techniques</p>\n\n<p>I used a dictionary data structure in my program to first solve this problem. Then I tried to rewrite it using only the list data structures.  I tried to consider the benefits of sorting, and I cannot tell what's the difference between the two approaches. It does not seem to make that much difference between the two approaches.</p>\n\n<p>Method 1. I use dictionary to create my histogram key and value pairs inside my histogram</p>\n\n<p>Method 2 takes in a source text in string format and returns a list of lists\nin which the first element in each sublist is the word and the second\nelement is its frequency in the source texts</p>\n\n<pre><code># This program Analyze word frequency in a histogram\n# sample words according to their observed frequencies\n# takes in a source text in string format and returns a dictionary\n# in which each key is a unique word and its value is that word's\n# frequency in the source text\nimport sys\nimport re\nimport random\nimport time\n\ndef histogram(source_text):\n    histogram = {}\n    # removing any sort of string, removing any other special character\n    for word in source_text.split():\n        word = re.sub('[.,:;!-[]?', '', word)\n\n        if word in histogram:\n            histogram[word] += 1\n        else:\n            histogram[word] = 1\n    return histogram\n\ndef random_word(histogram):\n    probability = 0\n    rand_index = random.randint(1, sum(histogram.values()))\n    # Algorithm 1\n    for (key, value) in histogram.items():\n        for num in range(1, value + 1):\n            if probability == rand_index:\n                if key in outcome_gram:\n                    outcome_gram[key] += 1\n                else:\n                    outcome_gram[key] = 1\n                # return outcome_gram\n                return key\n            else:\n                probability += 1\n\n#    Method 2 takes in a source text in string format and returns a list #of lists\n#    in which the first element in each sublist is the word and the #second element is its frequency in the source texts\n\n  # Algorithm 2\n    # for word in histogram:\n    #     probability += histogram[word]\n    #     if probability &gt;= rand_index:\n    #         if word in outcome_gram:\n    #             outcome_gram[word] += 1\n    #         else:\n    #             outcome_gram[word] = 1\n            # return word\n\n\nif __name__ == \"__main__\":\n    outcome_gram = {}\n    dict = open('./fish.txt', 'r')\n    text = dict.read()\n    dict.close()\n\n    hist_dict = histogram(text)\n    for number in range(1, 100000):\n        random_word(hist_dict)\n</code></pre>\n"}, {"tags": ["python", "linux", "django", "database", "model"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1505941684, "post_id": 46331620, "comment_id": 79624335, "body": "Please include the code that is causing the error, and the full traceback in your question."}, {"owner": {"reputation": 23, "user_id": 5514627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-hu8N-1hf2Dk/AAAAAAAAAAI/AAAAAAAAACw/w8R1hmca-tg/photo.jpg?sz=128", "display_name": "user502301", "link": "https://stackoverflow.com/users/5514627/user502301"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1505945484, "post_id": 46331620, "comment_id": 79625799, "body": "Added. Thanks sir!"}, {"owner": {"reputation": 2114, "user_id": 1210112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022629d19b0ecc6660f27cfbd52c38f9?s=128&d=identicon&r=PG", "display_name": "Jmills", "link": "https://stackoverflow.com/users/1210112/jmills"}, "edited": false, "score": 0, "creation_date": 1506221672, "post_id": 46331620, "comment_id": 79730238, "body": "@user502301 What about the code for your Page model?"}, {"owner": {"reputation": 23, "user_id": 5514627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-hu8N-1hf2Dk/AAAAAAAAAAI/AAAAAAAAACw/w8R1hmca-tg/photo.jpg?sz=128", "display_name": "user502301", "link": "https://stackoverflow.com/users/5514627/user502301"}, "reply_to_user": {"reputation": 2114, "user_id": 1210112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022629d19b0ecc6660f27cfbd52c38f9?s=128&d=identicon&r=PG", "display_name": "Jmills", "link": "https://stackoverflow.com/users/1210112/jmills"}, "edited": false, "score": 0, "creation_date": 1506274142, "post_id": 46331620, "comment_id": 79742811, "body": "@Jmills added. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 2114, "user_id": 1210112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/022629d19b0ecc6660f27cfbd52c38f9?s=128&d=identicon&r=PG", "display_name": "Jmills", "link": "https://stackoverflow.com/users/1210112/jmills"}, "is_accepted": true, "score": 0, "last_activity_date": 1506276059, "last_edit_date": 1506276059, "creation_date": 1506275755, "answer_id": 46393134, "question_id": 46331620, "link": "https://stackoverflow.com/questions/46331620/tango-with-django-v1-9-1-10-chapter-5-populate-rango-issues/46393134#46393134", "title": "Tango with Django (v1.9/1.10) - Chapter 5, populate_rango issues", "body": "<pre><code>class Page(models.Model):\n    Category = models.ForeignKey(Category)\n</code></pre>\n\n<p>Variable names are case sensitive - this includes field names and other class attributes. Change <code>Category = models.ForeignKey(Category)</code> to <code>category = models.ForeignKey(Category)</code> to fit <a href=\"https://docs.djangoproject.com/en/1.11/internals/contributing/writing-code/coding-style/#model-style\" rel=\"nofollow noreferrer\">model coding style</a> then rebuild your db tables and you should be ok to do <code>Page.objects.get_or_create(category=cat...</code></p>\n"}], "owner": {"reputation": 23, "user_id": 5514627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-hu8N-1hf2Dk/AAAAAAAAAAI/AAAAAAAAACw/w8R1hmca-tg/photo.jpg?sz=128", "display_name": "user502301", "link": "https://stackoverflow.com/users/5514627/user502301"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 46393134, "answer_count": 1, "score": 0, "last_activity_date": 1506276059, "creation_date": 1505940954, "last_edit_date": 1506274115, "question_id": 46331620, "link": "https://stackoverflow.com/questions/46331620/tango-with-django-v1-9-1-10-chapter-5-populate-rango-issues", "title": "Tango with Django (v1.9/1.10) - Chapter 5, populate_rango issues", "body": "<p>I will try to be concise. The background for this issue is that I'm familiar with Python, however I am BRAND NEW to django. This book is my first exposure to it and I've come to find the more I work through the book that online Q/A's for django are not very general, thus making it harder to \"just google it\" and find an answer.</p>\n\n<ul>MY ENVIRONMENT<br></ul>\n\n<p><strong>Resource</strong>: Tango with Django (for version 1.9/1.10)<br>\n<strong>Distro</strong>: Elementary OS, Patched to the latest<br>\n<strong>Python Version</strong>: 3.5<br>\n<strong>Django Version</strong>: 1.11.x<br></p>\n\n<ul>MY PROBLEM<br></ul>\n\n<p><strong>What Is my Error</strong>: django.core.exceptions.FieldError<br>\n<strong>What are the Details</strong>: Invalid field name(s) for model Page: 'category'.<br>\n<strong>What does the Error mean?</strong>: Per <a href=\"https://docs.djangoproject.com/en/1.11/ref/exceptions/#\" rel=\"nofollow noreferrer\">The Docs</a>, This error is raised when there is a problem with a field inside a model..Of the\n                           reasons listed The following look relevant to my issue:<br>\n   <li>An infinite loop is caused by ordering.</li>\nI have verified the the order in which the fields are declared in the model is consistent with how the add_page. as well, I have debugged my code and see that all the fields appear to be correct as they pass through the various functions. however I'm thinking perhaps [this] is might be the issue. I think the work 'category' is somehow referencing the category class? total troubleshooting conjecture.\n   <li>A Feild name is invalid</li>\nIt's always something simple, I've checked this out and the naming and usage of variables is consistent throughout the code. I've also double checked my code against the book. Everything seems in order, the code just isn't working.</p>\n\n<p><strong>The Traceback</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/dj/opt/pycharm-2017.2.3/helpers/pydev/pydevd.py\", line 1599, in &lt;module&gt;\n    globals = debugger.run(setup['file'], None, None, is_module)\n  File \"/home/dj/opt/pycharm-2017.2.3/helpers/pydev/pydevd.py\", line 1026, in run\n    pydev_imports.execfile(file, globals, locals)  # execute the script\n  File \"/home/dj/opt/pycharm-2017.2.3/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\n  File \"/home/dj/Code/tango-with-django-book/workspace/tango_with_django_project/populate_rango.py\", line 83, in &lt;module&gt;\n    populate()\n  File \"/home/dj/Code/tango-with-django-book/workspace/tango_with_django_project/populate_rango.py\", line 59, in populate\n    add_page(c, p[\"title\"], p[\"url\"])\n  File \"/home/dj/Code/tango-with-django-book/workspace/tango_with_django_project/populate_rango.py\", line 68, in add_page\n    p = Page.objects.get_or_create(category=cat, title=title)[0]\n  File \"/usr/local/lib/python3.5/dist-packages/django/db/models/manager.py\", line 85, in manager_method\n    return getattr(self.get_queryset(), name)(*args, **kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/django/db/models/query.py\", line 459, in get_or_create\n    lookup, params = self._extract_model_params(defaults, **kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/django/db/models/query.py\", line 534, in _extract_model_params\n    \"', '\".join(sorted(invalid_params)),\ndjango.core.exceptions.FieldError: Invalid field name(s) for model Page: 'category'.\n</code></pre>\n\n<p><strong>populate_rango.py</strong></p>\n\n<pre><code>import os\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'tango_with_django_project.settings')\n\nimport django\ndjango.setup() #imports Django projects settings into the context of this script\n\nfrom rango.models import Category, Page\n\ndef populate():\n    # First, we will create lists of dictionaries containing the pages we want to add\n    # into each category.\n    # Then, we will create a dictionary of dictionaries for our categories. \n    # This might seem a little bit confusing, but it allows us to iterate through each data structure, \n    # and add the data to our models. \n\n\n    # List of Dictionaries of \"Python\" Category pages... Tile:value, URL:value\n    python_pages = [\n        {\"title\": \"Official Python Tutorial\", \"url\": \"https://docs.python.org/2/tutorial/\"},\n        {\"title\": \"How to think like a Computer Scientist\" ,\"url\": \"http://www.greenteapress.com/thinkpython/\"},\n        {\"title\": \"Learn python in Ten Minutes\" ,\"url\": \"https://www.korokithakis.net/tutorials\"}\n    ]\n\n    # List of Dictionaries of \"django\" Category pages... Title:value, URL:value\n    django_pages = [\n        {\"title\":\"Official Django Tutorial\" ,\"url\":\"https://docs.djangoprojects.com/en/1.11/intro/tutorial01/\"},\n        {\"title\":\"Django Rocks\" ,\"url\":\"https://www.djangorocks.com\"},\n        {\"title\":\"How to Tango with Django\" ,\"url\":\"https://tangowithdjango.com/\"}\n    ]\n\n    # List of Dictionaries of \"Other\" Category pages... Title:value, URL:value\n    other_pages = [\n        {\"title\":\"Bottle\" ,\"url\":\"http://bottlepy.org/docs/dev/\"},\n        {\"title\":\"Flask\" ,\"url\":\"http://flask.pocoo.org/\"}\n\n    ]\n\n    # A Dictionary of Categories. Passing the pages defined above to the \"pages\" attribute (making a page) and then applything the tag to which their definied\n    # category. \n    cats = {\n        \"Python\": {\"pages\": python_pages},\n        \"Django\": {\"pages\": django_pages},\n        \"Other Frameworks\": {\"pages\": other_pages}\n    }\n\n    # If you want to add more categories or pages, add them to the \n    # dictionaies above. \n\n    # The code below goes through the cats directory, then adds each category. \n        # and then adds all the associated pages for that category.\n        # if you are using python 2.x then use cat.iteritems() see\n        # https://docs.quantifiedcode.com/python-anti-patterns/readability\n        # for more information about how to iterate over a dictionary properly\n\n    for cat, cat_data in cats.items():\n        c = add_cat(cat)\n        for p in cat_data[\"pages\"]:\n            add_page(c, p[\"title\"], p[\"url\"])\n\n    # Print out the categories we have added.    \n    for c in Category.objects.all():\n        for p in Page.objects.filter(category=c):\n            print(\"- {0} - {1}\".format(str(c), str(p)))\n\n\ndef add_page(cat, title, url, views=0):\n    p = Page.objects.get_or_create(category=cat, title=title)[0]\n    p.url = url\n    p.views = views\n    p.save()\n    return p\n\n\ndef add_cat(name):\n    c = Category.objects.get_or_create(name=name)[0]\n    c.save()\n    return c\n\n\nif __name__ == '__main__':\n    print(\"Starting Rango Population script...\")\n    populate()\n</code></pre>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>from django.db import models\n\n\n# Create your models here.\nclass Category(models.Model):\n    name = models.CharField(max_length=128, unique=True)\n\n    class Meta:\n        verbose_name_plural = 'Categories'\n\n    def __str__(self):\n        return self.name\n\n\nclass Page(models.Model):\n    Category = models.ForeignKey(Category)\n    title = models.CharField(max_length=128)\n    url = models.URLField()\n    views = models.IntegerField(default=0)\n\n\n    def __str__(self):\n        return self.title\n</code></pre>\n\n<p>for what it's worth, this issue persists even if I rebuild the database. (rm app.db, makemigrations, migrate)</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 530, "user_id": 1298833, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/77bcef13f4903d7a438b57d5fd23474a?s=128&d=identicon&r=PG", "display_name": "TJE", "link": "https://stackoverflow.com/users/1298833/tje"}, "edited": false, "score": 0, "creation_date": 1505941723, "post_id": 46331597, "comment_id": 79624351, "body": "Your question doesn&#39;t say if you have tried to do this in Python, but you&#39;ve used a Python tag. So can we assume that you know how to use Python? There is an easy way to do this in Python with Pandas, but you&#39;d have to know how to basically use Pandas with Python."}, {"owner": {"reputation": 13, "user_id": 7237931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ba913150de6f827337aebe8190c180?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/7237931/katie"}, "reply_to_user": {"reputation": 530, "user_id": 1298833, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/77bcef13f4903d7a438b57d5fd23474a?s=128&d=identicon&r=PG", "display_name": "TJE", "link": "https://stackoverflow.com/users/1298833/tje"}, "edited": false, "score": 0, "creation_date": 1505942300, "post_id": 46331597, "comment_id": 79624602, "body": "Yes, I&#39;ve tried to do in python but couldn&#39;t get anything close to what I wanted."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1505943703, "post_id": 46331597, "comment_id": 79625118, "body": "Welcome to SO. Unfortunately this isn&#39;t a code writing service.  please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 219, "user_id": 1636111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0ffc5c9cc0c046755775cb99928321?s=128&d=identicon&r=PG", "display_name": "&#214;zcan Esen", "link": "https://stackoverflow.com/users/1636111/%c3%96zcan-esen"}, "is_accepted": false, "score": 0, "last_activity_date": 1505941664, "creation_date": 1505941664, "answer_id": 46331792, "question_id": 46331597, "link": "https://stackoverflow.com/questions/46331597/add-a-column-to-csv-file-in-python-based-on-other-columns/46331792#46331792", "title": "add a column to csv file in python based on other columns", "body": "<pre><code>file = open('test.csv', 'r')\nlines = file.readlines()\n\n# print new header\nprint(lines[0].strip() + ',NEWCOLUMN')\n\n# loop through other lines starting from 1\nfor line in lines[1:]:\n    line_items = line.strip().split(',')\n\n    # your operation\n    new_column = float(line_items[1]) * float(line_items[2])\n    line_items.append(new_column)\n\n    print(\",\".join(map(str, line_items)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "is_accepted": false, "score": 2, "last_activity_date": 1505941760, "creation_date": 1505941760, "answer_id": 46331813, "question_id": 46331597, "link": "https://stackoverflow.com/questions/46331597/add-a-column-to-csv-file-in-python-based-on-other-columns/46331813#46331813", "title": "add a column to csv file in python based on other columns", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/index.html\" rel=\"nofollow noreferrer\">pandas</a>:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('path/to/yourfile.csv')\ndf['NEW'] = df.RATE * df.DEATHS\ndf.to_csv('path/to/yournewfile.csv')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 7326305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63bf4db79bb2a4e39c925682d012790?s=128&d=identicon&r=PG&f=1", "display_name": "Bradley Robinson", "link": "https://stackoverflow.com/users/7326305/bradley-robinson"}, "reply_to_user": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "edited": false, "score": 1, "creation_date": 1505942587, "post_id": 46331868, "comment_id": 79624724, "body": "I was working on my answer at the same time, and apparently you submitted it a little before I noticed you already had, so sorry I guess?"}, {"owner": {"reputation": 13, "user_id": 7237931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ba913150de6f827337aebe8190c180?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/7237931/katie"}, "edited": false, "score": 0, "creation_date": 1505942936, "post_id": 46331868, "comment_id": 79624861, "body": "Thanks, this is helpful. However, I don&#39;t have the pandas module. Can you point me to a good source on how to install this module?"}, {"owner": {"reputation": 357, "user_id": 7326305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63bf4db79bb2a4e39c925682d012790?s=128&d=identicon&r=PG&f=1", "display_name": "Bradley Robinson", "link": "https://stackoverflow.com/users/7326305/bradley-robinson"}, "edited": false, "score": 0, "creation_date": 1505943222, "post_id": 46331868, "comment_id": 79624953, "body": "Do you have pip installed on your machine? If so, simply typing <code>pip install pandas</code> will work. If not, the installation documentation (<a href=\"https://pandas.pydata.org/pandas-docs/stable/install.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/install.html</a>) should help."}, {"owner": {"reputation": 13, "user_id": 7237931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ba913150de6f827337aebe8190c180?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/7237931/katie"}, "edited": false, "score": 0, "creation_date": 1505944846, "post_id": 46331868, "comment_id": 79625547, "body": "Thanks! I got it installed and the code to work. Appreciate your help."}], "tags": [], "owner": {"reputation": 357, "user_id": 7326305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63bf4db79bb2a4e39c925682d012790?s=128&d=identicon&r=PG&f=1", "display_name": "Bradley Robinson", "link": "https://stackoverflow.com/users/7326305/bradley-robinson"}, "is_accepted": true, "score": 1, "last_activity_date": 1505942730, "last_edit_date": 1505942730, "creation_date": 1505942026, "answer_id": 46331868, "question_id": 46331597, "link": "https://stackoverflow.com/questions/46331597/add-a-column-to-csv-file-in-python-based-on-other-columns/46331868#46331868", "title": "add a column to csv file in python based on other columns", "body": "<p>Using the pandas library, this is fairly simple:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('filename.csv')\ndf['NEW'] = df['RATE'] * df['DEATHS']\n# You can save over the old file, though I would suggest saving a new one \n# in case you make a mistake\ndf.to_csv('new_filename.csv') \n</code></pre>\n\n<p>There are several cool things that the pandas library takes care of for us. First, we easily parse the csv using the <code>pd.read_csv()</code> statement. Next, pandas DataFrame objects (which is what the variable <code>df</code> is) allow us to use keys to access and create columns, much like a Python dictionary. When we perform mathematical operations using columns from the DataFrame, the pandas library actually performs the operation for each value in each column, so in our example, the index 0 in the 'RATE' column is multiplied by index 0 of the 'DEATHS' column. </p>\n\n<p>In short, if you are going to access and manipulate spreadsheet-like files in python, pandas is a powerful and easy-to-use library. </p>\n"}, {"tags": [], "owner": {"reputation": 3877, "user_id": 7732200, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/xOslk.jpg?s=128&g=1", "display_name": "Oleh Rybalchenko", "link": "https://stackoverflow.com/users/7732200/oleh-rybalchenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1505942295, "creation_date": 1505942295, "answer_id": 46331926, "question_id": 46331597, "link": "https://stackoverflow.com/questions/46331597/add-a-column-to-csv-file-in-python-based-on-other-columns/46331926#46331926", "title": "add a column to csv file in python based on other columns", "body": "<p>You can read the csv with <code>csv</code> built-in package and then manipulate with columns as you need. Of course, you can use <code>pandas</code> library, but like to use a sledge-hammer to crack a nut. Replace <code>StringIO</code> (just to make testing simple) in the example below with the file reading and the job is done.</p>\n\n<pre><code>from io import StringIO \nimport csv\n\nf_in = StringIO(\"\"\"STATE,RATE,DEATHS\nIA,4.2,166\nNH,4.2,52\nMA,4.3,309\nCA,4.4,2169\nCO,4.6,309\nID,4.6,106\nNY,4.6,1087\nVT,4.6,27\nNJ,4.7,487\"\"\")\n\nreader = csv.reader(f_in)\n\nwith open('new.csv', 'w') as f:\n  writer = csv.writer(f)\n  headings = next(reader)\n  headings.append('NEW')\n  writer.writerow(headings)\n\n  for row in reader:\n    row.append(str(round(float(row[1]) * float(row[2]), 1)))\n    writer.writerow(row)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7237931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ba913150de6f827337aebe8190c180?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/7237931/katie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1623, "favorite_count": 0, "closed_date": 1505949992, "accepted_answer_id": 46331868, "answer_count": 4, "score": 0, "last_activity_date": 1505942730, "creation_date": 1505940865, "question_id": 46331597, "link": "https://stackoverflow.com/questions/46331597/add-a-column-to-csv-file-in-python-based-on-other-columns", "closed_reason": "Needs more focus", "title": "add a column to csv file in python based on other columns", "body": "<p>I am using Python 3.6.2 and have the following csv file: </p>\n\n<pre><code>STATE,RATE,DEATHS\nIA,4.2,166\nNH,4.2,52\nMA,4.3,309\nCA,4.4,2169\nCO,4.6,309\nID,4.6,106\nNY,4.6,1087\nVT,4.6,27\nNJ,4.7,487\n</code></pre>\n\n<p>I am trying to add a new column to the file, where I multiply the rate column times the deaths column. The following table is what I'd like my results to look like.</p>\n\n<pre><code>STATE,RATE,DEATHS,NEW\nIA,4.2,166,697.2\nNH,4.2,52,218.2\nMA,4.3,309,1328.7\nCA,4.4,2169,9543.6\nCO,4.6,309,1421.4\nID,4.6,106,487.6\nNY,4.6,1087,5000.2\nVT,4.6,27,124.2\nNJ,4.7,487,2288.9\n</code></pre>\n\n<p>I've tried looking for an answer to this question but couldn't find anything similar to this. Thanks in advance. </p>\n"}, {"tags": ["python", "ldap"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1505941225, "post_id": 46331583, "comment_id": 79624114, "body": "Did you name any of your files <code>ldap.py</code>?"}, {"owner": {"reputation": 951, "user_id": 6176069, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10154102924093064/picture?type=large", "display_name": "Hassan Abbas", "link": "https://stackoverflow.com/users/6176069/hassan-abbas"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1505941384, "post_id": 46331583, "comment_id": 79624198, "body": "@KlausD. i mentioned that i did not name any of my files with ldap.py so no overlap issue."}, {"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 0, "creation_date": 1505942724, "post_id": 46331583, "comment_id": 79624785, "body": "Try looking at the directories you have at your PYTHONPATH and your path. Maybe some of them contain files called &quot;ldap.py&quot;."}, {"owner": {"reputation": 951, "user_id": 6176069, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10154102924093064/picture?type=large", "display_name": "Hassan Abbas", "link": "https://stackoverflow.com/users/6176069/hassan-abbas"}, "reply_to_user": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 0, "creation_date": 1505944131, "post_id": 46331583, "comment_id": 79625265, "body": "@IdanMeyer, already checked that before posting it. No file by the name of &quot;ldap.py&quot; in pythonpath or path as well."}, {"owner": {"reputation": 313, "user_id": 2105501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c64e49a69a60a94328fe105e936a3d?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2105501/idan"}, "edited": false, "score": 0, "creation_date": 1505944561, "post_id": 46331583, "comment_id": 79625435, "body": "@HassanAbbas Run the python command: &quot;print ldap.__file__&quot;. it will show you the path where the pyc comes from."}], "answers": [{"tags": [], "owner": {"reputation": 433, "user_id": 914941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bef10b48d97d44a38d15a1b51e26c93a?s=128&d=identicon&r=PG", "display_name": "Dean Liu", "link": "https://stackoverflow.com/users/914941/dean-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1522170524, "creation_date": 1522170524, "answer_id": 49518712, "question_id": 46331583, "link": "https://stackoverflow.com/questions/46331583/attributeerror-module-object-has-no-attribute-scope-subtree-macos/49518712#49518712", "title": "AttributeError: &#39;module&#39; object has no attribute &#39;SCOPE_SUBTREE&#39; macOS", "body": "<p>You may have pip installed \"ldap\" instead of \"python-ldap\"</p>\n"}], "owner": {"reputation": 951, "user_id": 6176069, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10154102924093064/picture?type=large", "display_name": "Hassan Abbas", "link": "https://stackoverflow.com/users/6176069/hassan-abbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3427, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1522170524, "creation_date": 1505940819, "last_edit_date": 1505941268, "question_id": 46331583, "link": "https://stackoverflow.com/questions/46331583/attributeerror-module-object-has-no-attribute-scope-subtree-macos", "title": "AttributeError: &#39;module&#39; object has no attribute &#39;SCOPE_SUBTREE&#39; macOS", "body": "<p>I am trying to connect to my ldap server running on my local machine but it throws the error <code>AttributeError: 'module' object has no attribute 'SCOPE_SUBTREE'</code></p>\n\n<p><strong>What I have done so far:</strong></p>\n\n<p>Installed ldap library using <code>pip install python-ldap</code></p>\n\n<p>No file by the name of ldap.py in my current working directory thus no overlapping issue</p>\n\n<p>When use the command <code>print dir(ldap)</code> following gets printed </p>\n\n<pre><code>['HelpFormatter', 'PY3', '__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', '__version__', 'argparse', 'logging', 'main', 'parser', 'subparser', 'subparsers', 'sys']\n</code></pre>\n\n<p>I am working on macOS Sierra. Any help is appreciated and python version is 2.7.10</p>\n"}, {"tags": ["python", "jwt"], "comments": [{"owner": {"reputation": 980, "user_id": 6483228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55i3R.jpg?s=128&g=1", "display_name": "T4rk1n", "link": "https://stackoverflow.com/users/6483228/t4rk1n"}, "edited": false, "score": 0, "creation_date": 1505941259, "post_id": 46331570, "comment_id": 79624135, "body": "What web server do you use ? do you have to use the token in ajax requests ?"}, {"owner": {"reputation": 2433, "user_id": 5240483, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6633e058001e90af210fdf970cbdb7fc?s=128&d=identicon&r=PG&f=1", "display_name": "William Ross", "link": "https://stackoverflow.com/users/5240483/william-ross"}, "reply_to_user": {"reputation": 980, "user_id": 6483228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55i3R.jpg?s=128&g=1", "display_name": "T4rk1n", "link": "https://stackoverflow.com/users/6483228/t4rk1n"}, "edited": false, "score": 0, "creation_date": 1505998155, "post_id": 46331570, "comment_id": 79648649, "body": "Using a custom web2py server as a framework. The token will be used in ajax."}], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 1246239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/51qQE.jpg?s=128&g=1", "display_name": "Christopher Hunter", "link": "https://stackoverflow.com/users/1246239/christopher-hunter"}, "is_accepted": true, "score": 2, "last_activity_date": 1505953048, "creation_date": 1505953048, "answer_id": 46333523, "question_id": 46331570, "link": "https://stackoverflow.com/questions/46331570/how-to-give-clients-json-web-token-jwt-in-secure-fashion/46333523#46333523", "title": "How to give clients JSON web token (JWT) in secure fashion?", "body": "<p>You could encrypt the token before handing it off to the client, either using their own public key, or delivering them the key out of band. That secures the delivery, but still does not cover everything.</p>\n\n<p>In short, there's no easy solution. You can perform due diligence and require use of security features, but once the client has decrypted the token, there is still no way to ensure they won't accidentally or otherwise expose it anyway. Good security requires both participants practice good habits.</p>\n\n<p>The nice thing about tokens is you can just give them a preset lifespan, or easily revoke them and generate new ones if you suspect they have been compromised.</p>\n"}, {"tags": [], "owner": {"reputation": 8933, "user_id": 546822, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/N4O1Z.jpg?s=128&g=1", "display_name": "Serjik", "link": "https://stackoverflow.com/users/546822/serjik"}, "is_accepted": false, "score": 1, "last_activity_date": 1505978038, "creation_date": 1505978038, "answer_id": 46337636, "question_id": 46331570, "link": "https://stackoverflow.com/questions/46331570/how-to-give-clients-json-web-token-jwt-in-secure-fashion/46337636#46337636", "title": "How to give clients JSON web token (JWT) in secure fashion?", "body": "<p>Token will be build based on user provided information and what you back-end decided to be part of the token. For higher security you can just widen your token information to some specific data of the user like current ip address or device mac address, this will give you a more secure way of authentication but will restrict user to every time use the same device, as a matter you can send a confirmation email when a new login happens.</p>\n"}], "owner": {"reputation": 2433, "user_id": 5240483, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6633e058001e90af210fdf970cbdb7fc?s=128&d=identicon&r=PG&f=1", "display_name": "William Ross", "link": "https://stackoverflow.com/users/5240483/william-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 46333523, "answer_count": 2, "score": 2, "last_activity_date": 1505978038, "creation_date": 1505940762, "question_id": 46331570, "link": "https://stackoverflow.com/questions/46331570/how-to-give-clients-json-web-token-jwt-in-secure-fashion", "title": "How to give clients JSON web token (JWT) in secure fashion?", "body": "<p>I have a python application that needs to give users a JSON web token for authentication. The token is built using the PyJWT library (import jwt).</p>\n\n<p>From what I have been reading it seems like an acceptable practice to give the token to a client after they have provided some credentials, such as logging in.</p>\n\n<p>The client then uses that token in the HTTP request header in the Authorization Bearer field which must happen over TLS to ensure the token is not exposed.</p>\n\n<p>The part I do not understand is what if the client exposes that token accidentally? Won't that enable anybody with that token to impersonate them?</p>\n\n<p>What is the most secure way to hand off the token to a client?</p>\n"}, {"tags": ["python", "split", "text-extraction"], "comments": [{"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 0, "creation_date": 1505940727, "post_id": 46331530, "comment_id": 79623901, "body": "Please post your desired output."}, {"owner": {"reputation": 662, "user_id": 6811609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d6583225c294b5891e010a237c20f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Whud", "link": "https://stackoverflow.com/users/6811609/whud"}, "edited": false, "score": 0, "creation_date": 1505940899, "post_id": 46331530, "comment_id": 79623977, "body": "Im a little confused but is: <code>[x for x in pLst if &quot;2016_Q4&quot; in x or &quot;2016_q4&quot; in x or &quot;2017&quot; in x]</code> what you are looking for ?"}, {"owner": {"reputation": 513, "user_id": 6273533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/ztqm3.jpg?s=128&g=1", "display_name": "geoJshaun", "link": "https://stackoverflow.com/users/6273533/geojshaun"}, "reply_to_user": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "edited": false, "score": 0, "creation_date": 1505942203, "post_id": 46331530, "comment_id": 79624559, "body": "@coder. That did it. I&#39;ll read up on list comprehension as I see myself using this a lot in the upcoming months. Thx!"}, {"owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "edited": false, "score": 0, "creation_date": 1505942282, "post_id": 46331530, "comment_id": 79624596, "body": "@ShaunO you&#39;re welcome! yes list comprehension is a must for a python programmer to know!"}, {"owner": {"reputation": 513, "user_id": 6273533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/ztqm3.jpg?s=128&g=1", "display_name": "geoJshaun", "link": "https://stackoverflow.com/users/6273533/geojshaun"}, "reply_to_user": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "edited": false, "score": 0, "creation_date": 1506016048, "post_id": 46331530, "comment_id": 79660684, "body": "@coder Are you going to post an answer?"}, {"owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "edited": false, "score": 0, "creation_date": 1506016839, "post_id": 46331530, "comment_id": 79661056, "body": "@ShaunO I posted an answer! Actually is the one I posted in my upper comment!"}], "answers": [{"tags": [], "owner": {"reputation": 271, "user_id": 5294216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47a7a2059cd7e02ec425017f79dd071?s=128&d=identicon&r=PG&f=1", "display_name": "grand_chat", "link": "https://stackoverflow.com/users/5294216/grand-chat"}, "is_accepted": false, "score": 2, "last_activity_date": 1505941203, "creation_date": 1505941203, "answer_id": 46331669, "question_id": 46331530, "link": "https://stackoverflow.com/questions/46331530/python-extracting-files-based-on-partial-title-with-split-criteria-in-title/46331669#46331669", "title": "python: extracting files based on partial title with split criteria in title", "body": "<p>Your approach using <code>any</code> will work, if you adjust as follows:</p>\n\n<pre><code>exCrt = [\"2016_Q4\", \"2016_q4\", \"2017\"]\nexLst = []\nfor p in pLst:\n    if any(x in p for x in exCrt):\n        exLst.append(p)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1505941574, "creation_date": 1505941574, "answer_id": 46331774, "question_id": 46331530, "link": "https://stackoverflow.com/questions/46331530/python-extracting-files-based-on-partial-title-with-split-criteria-in-title/46331774#46331774", "title": "python: extracting files based on partial title with split criteria in title", "body": "<p>You can use list comprehension:</p>\n\n<pre><code>pLst = ['CO_002_2016_Q4_Merge.loc', 'CO_002_2016_Merge.zip', 'CO_002_2016_q4_alias.loc', 'CO_002_2017_here_2017_q1_streets_alias.loc.xml', 'CO_002_2017_here_2017_q1_streets_parity.loc', 'AuburnAliasGCS_1984_1106.lox', 'CA_ORG_BCP.loc.xml', 'CA_ORG_BCP.loc', 'Co52 Alias Address Locator.lox', 'CO_002_2017_here_2017_q1_streets_parity.loc.xml', 'CentralCostaCountyStreets.lox', 'CO_002_2016_q4_alias.lox']\n\nexCrt = [\"2016_Q4\", \"2016_q4\", \"2017\"]\nfinal_pLst = [i for i in pLst if any(b in i for b in exCrt)]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['CO_002_2016_Q4_Merge.loc', 'CO_002_2016_q4_alias.loc', 'CO_002_2017_here_2017_q1_streets_alias.loc.xml', 'CO_002_2017_here_2017_q1_streets_parity.loc', 'CO_002_2017_here_2017_q1_streets_parity.loc.xml', 'CO_002_2016_q4_alias.lox']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "is_accepted": true, "score": 1, "last_activity_date": 1506016761, "creation_date": 1506016761, "answer_id": 46350409, "question_id": 46331530, "link": "https://stackoverflow.com/questions/46331530/python-extracting-files-based-on-partial-title-with-split-criteria-in-title/46350409#46350409", "title": "python: extracting files based on partial title with split criteria in title", "body": "<p>A simple list comprehension could be used like so:</p>\n\n<pre><code>exLst = [i for i in pLst for j in exCrt if j in i]\n</code></pre>\n\n<p>this should work!</p>\n"}], "owner": {"reputation": 513, "user_id": 6273533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/ztqm3.jpg?s=128&g=1", "display_name": "geoJshaun", "link": "https://stackoverflow.com/users/6273533/geojshaun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 46350409, "answer_count": 3, "score": 2, "last_activity_date": 1506016761, "creation_date": 1505940546, "last_edit_date": 1505942026, "question_id": 46331530, "link": "https://stackoverflow.com/questions/46331530/python-extracting-files-based-on-partial-title-with-split-criteria-in-title", "title": "python: extracting files based on partial title with split criteria in title", "body": "<p>I have a list of files with inconsistent nomenclature:</p>\n\n<pre><code>pLst = ['CO_002_2016_Q4_Merge.loc', 'CO_002_2016_Merge.zip', 'CO_002_2016_q4_alias.loc', 'CO_002_2017_here_2017_q1_streets_alias.loc.xml', 'CO_002_2017_here_2017_q1_streets_parity.loc', 'AuburnAliasGCS_1984_1106.lox', 'CA_ORG_BCP.loc.xml', 'CA_ORG_BCP.loc', 'Co52 Alias Address Locator.lox', 'CO_002_2017_here_2017_q1_streets_parity.loc.xml', 'CentralCostaCountyStreets.lox', 'CO_002_2016_q4_alias.lox']\n</code></pre>\n\n<p>I want to extract files that contain the strings in this list: </p>\n\n<pre><code>exCrt = [\"2016_Q4\", \"2016_q4\",\"2017\"]\n</code></pre>\n\n<p>I would like to add all of the files with any of the elements in exCrt to an extraction list but I don't see a way to isolate the split criteria from part of the selection criteria (i.e. \"_\"). </p>\n\n<p>I tried using any:</p>\n\n<pre><code>if any(x in pLst for x in exCrt):\n    exLst.add(x)\n</code></pre>\n\n<p>which resulted in an empty set.</p>\n\n<p>I also tried changing exCrt to <code>[\"2016\",\"q4\",\"Q4\",\"2017\"]</code> and then using an 'and' 'or' approach:</p>\n\n<pre><code>for i in pLst:\n    if exCrt[0] and exCrt[1] or exLst[0] and exCrt[2] or exCrt[3] in i.split(\"_\"):\n        exLst.add(i)\n</code></pre>\n\n<p>But this did not exclude any of the files the unwanted files.</p>\n\n<p>I would like the output to be </p>\n\n<pre><code>( 'CO_002_2016_Q4_Composite.loc',\n 'CO_002_2016_q4_alias.loc.xml',\n 'CO_002_2016_Q4_Composite.loc.xml',\n 'CO_002_2016_Q4_Merge.lox',\n 'CO_002_2016_Q4_Merge.loc.xml',\n 'CO_002_2016_Q4_Merge.loc',\n 'CO_002_2016_q4_alias.loc',\n 'CO_002_2016_q4_alias.lox',\n 'CO_002_2017_here_2017_q1_streets_alias.lox',\n 'CO_002_2017_here_2017_q1_streets_alias.loc',\n 'CO_002_2017_here_2017_q1_streets_alias.loc.xml',\n 'CO_002_2017_here_2017_q1_streets_parity.loc',\n 'CO_002_2017_here_2017_q1_streets_parity.loc.xml')\n</code></pre>\n"}, {"tags": ["python", "sql", "django", "postgresql"], "comments": [{"owner": {"reputation": 1106505, "user_id": 1144035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e514b017977ebf742a418cac697d8996?s=128&d=identicon&r=PG", "display_name": "Gordon Linoff", "link": "https://stackoverflow.com/users/1144035/gordon-linoff"}, "edited": false, "score": 1, "creation_date": 1505940556, "post_id": 46331502, "comment_id": 79623826, "body": "Leave off the initial <code>%</code> if you want the first four bytes."}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1505940703, "post_id": 46331502, "comment_id": 79623886, "body": "First thing to check if a DB query &quot;takes too long&quot; is if there is a matching index. Try an <code>EXPLAIN</code> on your query."}, {"owner": {"reputation": 938, "user_id": 1640095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036cdad161fcfa1389d1c0051549dab7?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/1640095/kyle"}, "edited": false, "score": 0, "creation_date": 1505941011, "post_id": 46331502, "comment_id": 79624022, "body": "Leading wildcards are not deterministic which will greatly impact index efficiency."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 938, "user_id": 1640095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036cdad161fcfa1389d1c0051549dab7?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/1640095/kyle"}, "edited": false, "score": 0, "creation_date": 1505942271, "post_id": 46331502, "comment_id": 79624594, "body": "@Kyle There are <a href=\"https://stackoverflow.com/a/13452528/479863\">ways around that</a> though."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8644417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gdVOdDmz5Zw/AAAAAAAAAAI/AAAAAAAAABQ/whIM9sPWHCo/photo.jpg?sz=128", "display_name": "Roger", "link": "https://stackoverflow.com/users/8644417/roger"}, "edited": false, "score": 0, "creation_date": 1506066672, "post_id": 46332320, "comment_id": 79678727, "body": "explain SELECT * FROM table WHERE substring(addr from 0 for 5) = &#39;\\x8ac5c320&#39;::bytea;                                            QUERY PLAN ------------------------------------------------------------&zwnj;&#8203;--------------------&zwnj;&#8203;-----------------  Bitmap Heap Scan on table  (cost=160844.32..17035395.99 rows=8592999 width=71)    Recheck Cond: (&quot;substring&quot;(addr, 0, 5) = &#39;\\x8ac5c320&#39;::bytea)    -&gt;  Bitmap Index Scan on table_substring_idx  (cost=0.00..158696.07 rows=8592999 width=0)          Index Cond: (&quot;substring&quot;(addr, 0, 5) = &#39;\\x8ac5c320&#39;::bytea)"}, {"owner": {"reputation": 11, "user_id": 8644417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gdVOdDmz5Zw/AAAAAAAAAAI/AAAAAAAAABQ/whIM9sPWHCo/photo.jpg?sz=128", "display_name": "Roger", "link": "https://stackoverflow.com/users/8644417/roger"}, "edited": false, "score": 0, "creation_date": 1506066705, "post_id": 46332320, "comment_id": 79678744, "body": "This is taking too long to execute is there a reason for that?"}, {"owner": {"reputation": 11, "user_id": 8644417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gdVOdDmz5Zw/AAAAAAAAAAI/AAAAAAAAABQ/whIM9sPWHCo/photo.jpg?sz=128", "display_name": "Roger", "link": "https://stackoverflow.com/users/8644417/roger"}, "edited": false, "score": 0, "creation_date": 1506075828, "post_id": 46332320, "comment_id": 79684277, "body": "Taking about 30 secs to 1 min to find, is there a faster way?"}, {"owner": {"reputation": 2934, "user_id": 6217490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603a0fe24d8bc279817df2e4dcd2a433?s=128&d=identicon&r=PG&f=1", "display_name": "jmelesky", "link": "https://stackoverflow.com/users/6217490/jmelesky"}, "reply_to_user": {"reputation": 11, "user_id": 8644417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gdVOdDmz5Zw/AAAAAAAAAAI/AAAAAAAAABQ/whIM9sPWHCo/photo.jpg?sz=128", "display_name": "Roger", "link": "https://stackoverflow.com/users/8644417/roger"}, "edited": false, "score": 0, "creation_date": 1506077710, "post_id": 46332320, "comment_id": 79685352, "body": "It&#39;s impossible to say for certain with the small amount of information provided. It may be that it&#39;s just taking significantly longer to pull 8.5million rows than to pull a single row (which makes sense). You may want to read <a href=\"https://wiki.postgresql.org/wiki/SlowQueryQuestions\" rel=\"nofollow noreferrer\">wiki.postgresql.org/wiki/SlowQueryQuestions</a> and post a new question."}], "tags": [], "owner": {"reputation": 2934, "user_id": 6217490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603a0fe24d8bc279817df2e4dcd2a433?s=128&d=identicon&r=PG&f=1", "display_name": "jmelesky", "link": "https://stackoverflow.com/users/6217490/jmelesky"}, "is_accepted": false, "score": 1, "last_activity_date": 1505944429, "creation_date": 1505944429, "answer_id": 46332320, "question_id": 46331502, "link": "https://stackoverflow.com/questions/46331502/i-need-to-filter-a-large-database-2-billion-entries-using-python-and-sql/46332320#46332320", "title": "I need to filter a large database 2 billion entries using python and sql", "body": "<p>To get matches based on the first four bytes, I'd recommend the following query:</p>\n\n<pre><code>SELECT * FROM table WHERE substring(addr from 0 for 5) = '\\x8ac5c320'::bytea;\n</code></pre>\n\n<p>The documentation for substring can be found on <a href=\"https://www.postgresql.org/docs/current/static/functions-binarystring.html\" rel=\"nofollow noreferrer\">the bytea functions page</a>, though that's admittedly minimal.</p>\n\n<p>The query as written will likely perform a sequential scan across the entire table. To remedy that, create the following index:</p>\n\n<pre><code>CREATE INDEX ON table (substring(addr from 0 for 5));\n</code></pre>\n\n<p>That creates an index specifically designed for the query you need to run frequently. It's a functional index -- it's indexing a function result, rather than a column.</p>\n\n<p>That should get you the performance that you want.</p>\n\n<p>All that said, though, your example query does not actually query for the first four bytes. If the query is more correct than your description of the query, then this approach won't work.</p>\n"}], "owner": {"reputation": 11, "user_id": 8644417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gdVOdDmz5Zw/AAAAAAAAAAI/AAAAAAAAABQ/whIM9sPWHCo/photo.jpg?sz=128", "display_name": "Roger", "link": "https://stackoverflow.com/users/8644417/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505944429, "creation_date": 1505940437, "last_edit_date": 1505940705, "question_id": 46331502, "link": "https://stackoverflow.com/questions/46331502/i-need-to-filter-a-large-database-2-billion-entries-using-python-and-sql", "title": "I need to filter a large database 2 billion entries using python and sql", "body": "<p>The data is in bytea format, how do I query the postgresql database, its is indexed in the bytea column i need to query by the first 4 bytes. I have tried </p>\n\n<pre><code>SELECT * FROM table WHERE addr LIKE '%8ac5c320____' \n</code></pre>\n\n<p>but it takes too long to find. Any suggestions? if I query the whole string then it works fast, but there are about 2 billion entries and i cant use wild cards...</p>\n"}, {"tags": ["python", "beautifulsoup", "scrapy"], "comments": [{"owner": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505940525, "post_id": 46331475, "comment_id": 79623814, "body": "Did you try <code>extract()</code> or <code>extract_first()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "is_accepted": true, "score": 3, "last_activity_date": 1505940810, "creation_date": 1505940810, "answer_id": 46331581, "question_id": 46331475, "link": "https://stackoverflow.com/questions/46331475/extract-links-within-a-navigation-div-with-python-scrapy-selectors/46331581#46331581", "title": "Extract links within a navigation div with python scrapy selectors", "body": "<p>you can get directly all the urls with:</p>\n\n<pre><code>  response.xpath('//nav[@class=\"filterCategoryLevelOne\"]//a/@href').extract()\n</code></pre>\n"}], "owner": {"reputation": 5836, "user_id": 1813039, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d3c8f57043ddb2a46f4ffd3ac4121a9b?s=128&d=identicon&r=PG", "display_name": "Amistad", "link": "https://stackoverflow.com/users/1813039/amistad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "accepted_answer_id": 46331581, "answer_count": 1, "score": 1, "last_activity_date": 1505940810, "creation_date": 1505940312, "question_id": 46331475, "link": "https://stackoverflow.com/questions/46331475/extract-links-within-a-navigation-div-with-python-scrapy-selectors", "title": "Extract links within a navigation div with python scrapy selectors", "body": "<p>I am trying to extract all the links within the navigation div            <strong>filterCategoryLevelOne</strong> in <a href=\"http://uk.farnell.com/c/electrical\" rel=\"nofollow noreferrer\">this webpage</a>.</p>\n\n<p>I did this successfully with Beautifulsoup and requests as follows:</p>\n\n<pre><code>&gt;&gt; import requests\n&gt;&gt; from bs4 import BeautifulSoup\n&gt;&gt; url='http://uk.farnell.com/c/electrical'\n&gt;&gt; response = requests.get(url)\n&gt;&gt; soup = BeautifulSoup(source.content, \"html.parser\")\n&gt;&gt; mydiv = soup.findAll(\"nav\", { \"class\" : \"filterCategoryLevelOne\" })\n</code></pre>\n\n<p><strong>my_div</strong> gives me list with everything from which I can then extract the href values.</p>\n\n<p>However, if I do the same with a scrapy shell as follows, I get something else:</p>\n\n<pre><code>&gt;&gt; scrapy shell -s USER_AGENT='Mozilla/5.0 (Linux; U; Android 2.3; en-us) AppleWebKit/999+ (KHTML, like Gecko) Safari/999.9' http://uk.farnell.com/c/electrical\n&gt;&gt; response.xpath('//nav[@class=\"filterCategoryLevelOne\"]')\n[&lt;Selector xpath='//nav[@class=\"filterCategoryLevelOne\"]' data='&lt;nav class=\"filterCategoryLevelOne\" aria'&gt;]\n</code></pre>\n\n<p>How do I further find the href values within that div in scrapy ?</p>\n"}, {"tags": ["python", "multithreading", "asynchronous"], "comments": [{"owner": {"reputation": 3933, "user_id": 1821750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEYw6.png?s=128&g=1", "display_name": "Charles Addis", "link": "https://stackoverflow.com/users/1821750/charles-addis"}, "edited": false, "score": 0, "creation_date": 1505942015, "post_id": 46331424, "comment_id": 79624479, "body": "I think you need a better understanding of <code>concurrent</code> vs <code>parallel</code>. Parallel means that everything is happening in different OS level threads or processes at the exact same time. Concurrent means that anytime something blocks, another task is run asynchronously. In python, you&#39;re not going to be accessing OS level threads because the GIL is going to prevent you from doing that. Because your code is going to be CPU bound (encryption/decryption requires computation) you should take a parallel approach. If your code was IO bound (network IO, disk IO, etc) it would be better to use asyncio."}, {"owner": {"reputation": 3933, "user_id": 1821750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEYw6.png?s=128&g=1", "display_name": "Charles Addis", "link": "https://stackoverflow.com/users/1821750/charles-addis"}, "edited": false, "score": 0, "creation_date": 1505942069, "post_id": 46331424, "comment_id": 79624505, "body": "As the one answer youve been given states, you should do this task in different processes."}, {"owner": {"reputation": 341, "user_id": 5335646, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9107f654b6648b173ea36a4792b63b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Spicer", "link": "https://stackoverflow.com/users/5335646/ryan-spicer"}, "reply_to_user": {"reputation": 3933, "user_id": 1821750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEYw6.png?s=128&g=1", "display_name": "Charles Addis", "link": "https://stackoverflow.com/users/1821750/charles-addis"}, "edited": false, "score": 0, "creation_date": 1505942292, "post_id": 46331424, "comment_id": 79624600, "body": "I think you&#39;re mostly on track, but you&#39;re slightly mistaken - the process is actually network IO bound, I believe - my process is not actually performing the encryption, it&#39;s a module that sends the encryption/decryption process off to AWS KMS. This means that the actual encryption and decryption is happening off my machine, and I&#39;m simply waiting for a response."}, {"owner": {"reputation": 3933, "user_id": 1821750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEYw6.png?s=128&g=1", "display_name": "Charles Addis", "link": "https://stackoverflow.com/users/1821750/charles-addis"}, "edited": false, "score": 0, "creation_date": 1505954881, "post_id": 46331424, "comment_id": 79628166, "body": "Ah I see, well then in that case asyncio is a good choice."}], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 5335646, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9107f654b6648b173ea36a4792b63b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Spicer", "link": "https://stackoverflow.com/users/5335646/ryan-spicer"}, "edited": false, "score": 0, "creation_date": 1505942332, "post_id": 46331726, "comment_id": 79624614, "body": "Please, if you&#39;re able, check my recent comment in the main question and see if your answer is still relevant."}, {"owner": {"reputation": 341, "user_id": 5335646, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9107f654b6648b173ea36a4792b63b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Spicer", "link": "https://stackoverflow.com/users/5335646/ryan-spicer"}, "edited": false, "score": 0, "creation_date": 1505942469, "post_id": 46331726, "comment_id": 79624672, "body": "Also, please bare in mind (I should&#39;ve mentioned this) that this function is happening within an API call - I&#39;m worried that build-up of the new processes would slow things down significantly with this method, given that consideration. But I could absolutely be wrong."}, {"owner": {"reputation": 1428, "user_id": 8489834, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lDNZXjwpIwQ/AAAAAAAAAAI/AAAAAAAAACU/5Jx0up57I9Y/photo.jpg?sz=128", "display_name": "Yaroslav Surzhikov", "link": "https://stackoverflow.com/users/8489834/yaroslav-surzhikov"}, "reply_to_user": {"reputation": 341, "user_id": 5335646, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9107f654b6648b173ea36a4792b63b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Spicer", "link": "https://stackoverflow.com/users/5335646/ryan-spicer"}, "edited": false, "score": 0, "creation_date": 1505949670, "post_id": 46331726, "comment_id": 79627025, "body": "@RyanSpicer i updated my answer, sorry for taking so long. As for spawning new processes - well, i think that you should try"}, {"owner": {"reputation": 341, "user_id": 5335646, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9107f654b6648b173ea36a4792b63b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Spicer", "link": "https://stackoverflow.com/users/5335646/ryan-spicer"}, "edited": false, "score": 0, "creation_date": 1505957517, "post_id": 46331726, "comment_id": 79628683, "body": "Understood. Great writeup, thanks... one problem, however... when I use a ProcessPool (instead of a ThreadPool), it errors a LOT, specifically (off the top of my head) about pickling. Does this mean the function I&#39;m trying to run simply isn&#39;t compatible with mutliprocessing?"}, {"owner": {"reputation": 1428, "user_id": 8489834, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lDNZXjwpIwQ/AAAAAAAAAAI/AAAAAAAAACU/5Jx0up57I9Y/photo.jpg?sz=128", "display_name": "Yaroslav Surzhikov", "link": "https://stackoverflow.com/users/8489834/yaroslav-surzhikov"}, "reply_to_user": {"reputation": 341, "user_id": 5335646, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9107f654b6648b173ea36a4792b63b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Spicer", "link": "https://stackoverflow.com/users/5335646/ryan-spicer"}, "edited": false, "score": 0, "creation_date": 1505960788, "post_id": 46331726, "comment_id": 79629380, "body": "@RyanSpicer i think errors are raised because multiproccessing tries to serialize socket object. If you use class instance, for example, which has some connection attribute and you try to spawn worker from one of the instance methods - you will get error."}], "tags": [], "owner": {"reputation": 1428, "user_id": 8489834, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lDNZXjwpIwQ/AAAAAAAAAAI/AAAAAAAAACU/5Jx0up57I9Y/photo.jpg?sz=128", "display_name": "Yaroslav Surzhikov", "link": "https://stackoverflow.com/users/8489834/yaroslav-surzhikov"}, "is_accepted": false, "score": 0, "last_activity_date": 1505974976, "last_edit_date": 1505974976, "creation_date": 1505941421, "answer_id": 46331726, "question_id": 46331424, "link": "https://stackoverflow.com/questions/46331424/asynchronicity-and-thread-pooling-in-python/46331726#46331726", "title": "Asynchronicity and thread-pooling in Python", "body": "<p>If you are using python3.5 or newer, you could use async/await statements.</p>\n\n<pre><code>import asyncio\nimport multiprocessing\nimport random\nimport time\nfrom concurrent.futures import ProcessPoolExecutor\n\ncount_received = 0\ntests_count = 16\n\n\nasync def AWS_KMS_call(i, text, action='encrypt'):\n    print(i, multiprocessing.current_process().name, action)\n    await asyncio.sleep(random.random())  # emulate some work\n    return text[::-1]\n\n\nasync def encrypt(i, text):\n    encrypted = await AWS_KMS_call(i, text, action='encrypt')\n    print(i, multiprocessing.current_process().name, encrypted, 'encrypted')\n    return encrypted\n\n\nasync def decrypt(i, text):\n    encrypted = await encrypt(i, text)\n    decrypted = await AWS_KMS_call(i, encrypted, action='decrypt')\n    print(i, multiprocessing.current_process().name, encrypted, 'decrypted')\n    return decrypted\n\n\ndef pool_func(i, text):\n    loop = asyncio.new_event_loop()\n    asyncio.set_event_loop(loop)\n    decrypted = loop.run_until_complete(decrypt(i, text))\n    print(i, multiprocessing.current_process().name, decrypted, 'pool_func exit')\n    return i, decrypted\n\n\ndef got_result(future):\n    global count_received\n    global tests_count\n    count_received += 1\n    i, text = future.result()\n    print(i, multiprocessing.current_process().name, text, 'done')\n\n    if count_received == tests_count:\n        loop.stop()\n\n\nif __name__ == '__main__':\n    text = 'some_data_to_encrypt'\n    executor = ProcessPoolExecutor(16)\n\n    loop = asyncio.get_event_loop()\n\n    for i in range(tests_count):\n        task = asyncio.ensure_future(loop.run_in_executor(executor, pool_func, i, text))\n        task.add_done_callback(got_result)\n\n    try:\n        loop.run_forever()\n    finally:\n        loop.close()\n</code></pre>\n\n<p>I added several prints for clarity and output looks like:</p>\n\n<pre><code>0 Process-1 encrypt\n1 Process-3 encrypt\n2 Process-5 encrypt\n4 Process-2 encrypt\n5 Process-4 encrypt\n6 Process-6 encrypt\n7 Process-9 encrypt\n8 Process-7 encrypt\n9 Process-10 encrypt\n10 Process-8 encrypt\n3 Process-15 encrypt\n11 Process-11 encrypt\n12 Process-12 encrypt\n13 Process-14 encrypt\n15 Process-13 encrypt\n14 Process-16 encrypt\n1 Process-3 tpyrcne_ot_atad_emos encrypted\n1 Process-3 decrypt\n6 Process-6 tpyrcne_ot_atad_emos encrypted\n6 Process-6 decrypt\n15 Process-13 tpyrcne_ot_atad_emos encrypted\n15 Process-13 decrypt\n5 Process-4 tpyrcne_ot_atad_emos encrypted\n5 Process-4 decrypt\n3 Process-15 tpyrcne_ot_atad_emos encrypted\n3 Process-15 decrypt\n9 Process-10 tpyrcne_ot_atad_emos encrypted\n9 Process-10 decrypt\n1 Process-3 tpyrcne_ot_atad_emos decrypted\n1 Process-3 some_data_to_encrypt pool_func exit\n1 MainProcess some_data_to_encrypt done\n4 Process-2 tpyrcne_ot_atad_emos encrypted\n4 Process-2 decrypt\n11 Process-11 tpyrcne_ot_atad_emos encrypted\n11 Process-11 decrypt\n10 Process-8 tpyrcne_ot_atad_emos encrypted\n10 Process-8 decrypt\n10 Process-8 tpyrcne_ot_atad_emos decrypted\n10 Process-8 some_data_to_encrypt pool_func exit\n10 MainProcess some_data_to_encrypt done\n6 Process-6 tpyrcne_ot_atad_emos decrypted\n6 Process-6 some_data_to_encrypt pool_func exit\n6 MainProcess some_data_to_encrypt done\n8 Process-7 tpyrcne_ot_atad_emos encrypted\n8 Process-7 decrypt\n12 Process-12 tpyrcne_ot_atad_emos encrypted\n12 Process-12 decrypt\n2 Process-5 tpyrcne_ot_atad_emos encrypted\n2 Process-5 decrypt\n15 Process-13 tpyrcne_ot_atad_emos decrypted\n15 Process-13 some_data_to_encrypt pool_func exit\n15 MainProcess some_data_to_encrypt done\n11 Process-11 tpyrcne_ot_atad_emos decrypted\n11 Process-11 some_data_to_encrypt pool_func exit\n11 MainProcess some_data_to_encrypt done\n13 Process-14 tpyrcne_ot_atad_emos encrypted\n13 Process-14 decrypt\n4 Process-2 tpyrcne_ot_atad_emos decrypted\n4 Process-2 some_data_to_encrypt pool_func exit\n4 MainProcess some_data_to_encrypt done\n7 Process-9 tpyrcne_ot_atad_emos encrypted\n7 Process-9 decrypt\n0 Process-1 tpyrcne_ot_atad_emos encrypted\n0 Process-1 decrypt\n14 Process-16 tpyrcne_ot_atad_emos encrypted\n14 Process-16 decrypt\n8 Process-7 tpyrcne_ot_atad_emos decrypted\n8 Process-7 some_data_to_encrypt pool_func exit\n8 MainProcess some_data_to_encrypt done\n5 Process-4 tpyrcne_ot_atad_emos decrypted\n5 Process-4 some_data_to_encrypt pool_func exit\n5 MainProcess some_data_to_encrypt done\n3 Process-15 tpyrcne_ot_atad_emos decrypted\n3 Process-15 some_data_to_encrypt pool_func exit\n3 MainProcess some_data_to_encrypt done\n9 Process-10 tpyrcne_ot_atad_emos decrypted\n9 Process-10 some_data_to_encrypt pool_func exit\n9 MainProcess some_data_to_encrypt done\n13 Process-14 tpyrcne_ot_atad_emos decrypted\n13 Process-14 some_data_to_encrypt pool_func exit\n13 MainProcess some_data_to_encrypt done\n2 Process-5 tpyrcne_ot_atad_emos decrypted\n2 Process-5 some_data_to_encrypt pool_func exit\n2 MainProcess some_data_to_encrypt done\n0 Process-1 tpyrcne_ot_atad_emos decrypted\n0 Process-1 some_data_to_encrypt pool_func exit\n0 MainProcess some_data_to_encrypt done\n12 Process-12 tpyrcne_ot_atad_emos decrypted\n12 Process-12 some_data_to_encrypt pool_func exit\n12 MainProcess some_data_to_encrypt done\n14 Process-16 tpyrcne_ot_atad_emos decrypted\n14 Process-16 some_data_to_encrypt pool_func exit\n14 MainProcess some_data_to_encrypt done\n7 Process-9 tpyrcne_ot_atad_emos decrypted\n7 Process-9 some_data_to_encrypt pool_func exit\n7 MainProcess some_data_to_encrypt done\n</code></pre>\n\n<p>Also, i suggest you to look into <a href=\"http://www.celeryproject.org/\" rel=\"nofollow noreferrer\">celery</a> library. Maybe it will fits your requirements better</p>\n"}], "owner": {"reputation": 341, "user_id": 5335646, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9107f654b6648b173ea36a4792b63b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Spicer", "link": "https://stackoverflow.com/users/5335646/ryan-spicer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1505974976, "creation_date": 1505940100, "question_id": 46331424, "link": "https://stackoverflow.com/questions/46331424/asynchronicity-and-thread-pooling-in-python", "title": "Asynchronicity and thread-pooling in Python", "body": "<p>My use case is rather simple, or at least I feel like it is, coming from Node... but I just can't quite get my head around this problem. I need less help with the coding aspect of this issue, and more with just an explanation: I want to run an asynchronous process (a decrypt and encrypt function from the <a href=\"https://github.com/awslabs/aws-encryption-sdk-python\" rel=\"nofollow noreferrer\">aws-encryption-sdk</a>) multiple times (as many times as possible) in parallel. I guess my main question is, what's the best way to do this? </p>\n\n<p>Follow up question... it seems to me that the best way to do this would be an asynchronous function (asyncio format) that handles the decryption and encryption, handled by a pool of threads rather than a single one. At times, I'll need to run this function 2000 times as fast as possible (not necessarily in complete parallel, obviously). However, even if this is correct, I'm not certain how to do this.</p>\n\n<p>Thanks much to anybody who can help me. To give you an idea of what track I'm on, I was very much considering using the answer from this thread: <a href=\"https://stackoverflow.com/a/29280606/5335646\">https://stackoverflow.com/a/29280606/5335646</a>. However, some sources are saying that this is more for blocking functions, and not really for truly asynchronous ones, like in my case (a call to AWS KMS that's returned later).</p>\n"}, {"tags": ["python", "email", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 1282, "user_id": 1696418, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/625b32d887d3dfb6a10bbf940c553378?s=128&d=identicon&r=PG", "display_name": "Munesh", "link": "https://stackoverflow.com/users/1696418/munesh"}, "edited": false, "score": 0, "creation_date": 1505942603, "post_id": 46331649, "comment_id": 79624734, "body": "Thanks for the solution. But it is partially working. When I search for the tag &#39;p&#39;, the initial text outside the html like Part_2 and Content-Type are also getting printed. Can you guide me how to get just the mail body"}, {"owner": {"reputation": 357, "user_id": 7326305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63bf4db79bb2a4e39c925682d012790?s=128&d=identicon&r=PG&f=1", "display_name": "Bradley Robinson", "link": "https://stackoverflow.com/users/7326305/bradley-robinson"}, "reply_to_user": {"reputation": 1282, "user_id": 1696418, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/625b32d887d3dfb6a10bbf940c553378?s=128&d=identicon&r=PG", "display_name": "Munesh", "link": "https://stackoverflow.com/users/1696418/munesh"}, "edited": false, "score": 0, "creation_date": 1505943394, "post_id": 46331649, "comment_id": 79625011, "body": "Hmm, I&#39;m not sure why that&#39;s happening. What if you skip the first paragraph? I.e.: <code>for paragraph in paragraphs[1:]</code>"}, {"owner": {"reputation": 1282, "user_id": 1696418, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/625b32d887d3dfb6a10bbf940c553378?s=128&d=identicon&r=PG", "display_name": "Munesh", "link": "https://stackoverflow.com/users/1696418/munesh"}, "edited": false, "score": 0, "creation_date": 1505943592, "post_id": 46331649, "comment_id": 79625080, "body": "paragraphs[1:] works. But this looks more like a hack than a proper fix. Thanks anyway. Let me know if you find a better way."}, {"owner": {"reputation": 357, "user_id": 7326305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63bf4db79bb2a4e39c925682d012790?s=128&d=identicon&r=PG&f=1", "display_name": "Bradley Robinson", "link": "https://stackoverflow.com/users/7326305/bradley-robinson"}, "reply_to_user": {"reputation": 1282, "user_id": 1696418, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/625b32d887d3dfb6a10bbf940c553378?s=128&d=identicon&r=PG", "display_name": "Munesh", "link": "https://stackoverflow.com/users/1696418/munesh"}, "edited": false, "score": 0, "creation_date": 1505944003, "post_id": 46331649, "comment_id": 79625223, "body": "I admit it is, but HTML is notoriously difficult to parse. You could probably also use regular expressions to check for xml code and exclude anything that looks like xml, but that too would look a little messy."}, {"owner": {"reputation": 1282, "user_id": 1696418, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/625b32d887d3dfb6a10bbf940c553378?s=128&d=identicon&r=PG", "display_name": "Munesh", "link": "https://stackoverflow.com/users/1696418/munesh"}, "edited": false, "score": 0, "creation_date": 1505944548, "post_id": 46331649, "comment_id": 79625428, "body": "I&#39;m using text=True, to filter the unwanted data using  paragraphs_all = soup.find_all(&#39;p&#39;,text=False),  paragraphs_extra = soup.find_all(&#39;p&#39;,text=True),  paragraphs=set(paragraphs_all)-set(paragraphs_extra)"}], "tags": [], "owner": {"reputation": 357, "user_id": 7326305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63bf4db79bb2a4e39c925682d012790?s=128&d=identicon&r=PG&f=1", "display_name": "Bradley Robinson", "link": "https://stackoverflow.com/users/7326305/bradley-robinson"}, "is_accepted": true, "score": 1, "last_activity_date": 1505941097, "creation_date": 1505941097, "answer_id": 46331649, "question_id": 46331402, "link": "https://stackoverflow.com/questions/46331402/python-parse-a-raw-email-and-get-the-text-content-of-the-body/46331649#46331649", "title": "Python parse a raw email and get the text content of the body", "body": "<p>Using the BeautifulSoup library, it is actually not too hard to parse the text. If you do not have the library, make sure you <code>pip install bs4</code> first. After that, it shouldn't be too hard:</p>\n\n<pre><code>from bs4 import BeautifulSoup\ndef print_payload(message):\n    print('******')\n    if message.is_multipart():\n        for payload in message.get_payload():\n            print_payload(payload)\n    else:\n         print message.get_payload()\n         for part in message.walk():\n             if part.get_content_type():\n                 body = str(part.get_payload())\n                 soup = BeautifulSoup(body)\n                 paragraphs = soup.find_all('p')\n                 for paragraph in paragraphs:\n                     print(paragraph.text)\n    print('******')\n</code></pre>\n\n<p>What BeautifulSoup does eloquently is creating a parse-tree, from which html elements can be selected. So if your e-mail has other html elements in it, you may have to also search for them to get all the data. But with this simple e-mail, finding all the html elements with the tag 'p' is sufficient.</p>\n"}], "owner": {"reputation": 1282, "user_id": 1696418, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/625b32d887d3dfb6a10bbf940c553378?s=128&d=identicon&r=PG", "display_name": "Munesh", "link": "https://stackoverflow.com/users/1696418/munesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2861, "favorite_count": 0, "accepted_answer_id": 46331649, "answer_count": 1, "score": 1, "last_activity_date": 1505941097, "creation_date": 1505939996, "question_id": 46331402, "link": "https://stackoverflow.com/questions/46331402/python-parse-a-raw-email-and-get-the-text-content-of-the-body", "title": "Python parse a raw email and get the text content of the body", "body": "<p>How to get the text body of an email without the html tags.</p>\n\n<p>I have tried below code to parse the mail, but I get the entire section for \n '------=_Part_2' section as the body.</p>\n\n<p><strong>My code</strong></p>\n\n<pre><code>import email\nmessage = email.message_from_string(text)\nprint_payload(message)\n\ndef print_payload(message):\n    print('******')\n    if message.is_multipart():\n        for payload in message.get_payload():\n            print_payload(payload)\n    else:\n        print message.get_payload()\n        for part in message.walk():\n            if part.get_content_type():\n                body = str(part.get_payload())\n                print(body)\n    print('******')\n</code></pre>\n\n<p><strong>Actual email body:</strong></p>\n\n<p>Another test mail.<br/>\nThanks,<br/>\nMunesh</p>\n\n<p><strong>Raw email:</strong></p>\n\n<pre><code>Return-Path: abc@mydomain.com Date: Mon, 18 Sep 2017 23:07:16 +0000 From: abc@mydomain.com To: xyz@mydomain.com Cc: abc@mydomain.com Message-ID: &lt;1233.5.68566565@host.corp.mydomain.com&gt; Subject: My email subject MIME-Version: 1.0 Content-Type: application/ms-tnef Content-Transfer-Encoding: binary X-MS-Exchange-Organization-SCL: -1 X-MS-Exchange-Organization-MessageDirectionality: Originating Thread-Topic: My email subject X-Forefront-Antispam-Report: SFV:SKI;SCL:-1; X-MS-PublicTrafficType: Email X-MS-Exchange-Organization-Antispam-Report: SFV:SKI;SCL:-1; Accept-Language: en-US Content-Language: en-US\n\n------=_Part_2_123.456 Content-Type: text/html; charset=us-ascii Content-Transfer-Encoding: 7bit\n\n&lt;html xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" xmlns:m=\"http://schemas.microsoft.com/office/2004/12/omml\" xmlns=\"http://www.w3.org/TR/REC-html40\"&gt;&lt;head&gt;&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"&gt;&lt;meta name=\"Generator\" content=\"Microsoft Word 14 (filtered medium)\"&gt;&lt;style&gt;&lt;!-- /* Font Definitions */ @font-face\n        {font-family:Calibri;\n        panose-1:2 15 5 2 2 2 4 3 2 4;} /* Style Definitions */ p.MsoNormal, li.MsoNormal, div.MsoNormal\n        {margin:0in;\n        margin-bottom:.0001pt;\n        font-size:11.0pt;\n        font-family:\"Calibri\",\"sans-serif\";} a:link, span.MsoHyperlink\n        {mso-style-priority:99;\n        color:blue;\n        text-decoration:underline;} a:visited, span.MsoHyperlinkFollowed\n        {mso-style-priority:99;\n        color:purple;\n        text-decoration:underline;} span.EmailStyle17\n        {mso-style-type:personal-compose;\n        font-family:\"Calibri\",\"sans-serif\";\n        color:windowtext;} .MsoChpDefault\n        {mso-style-type:export-only;\n        font-family:\"Calibri\",\"sans-serif\";} @page WordSection1\n        {size:8.5in 11.0in;\n        margin:1.0in 1.0in 1.0in 1.0in;} div.WordSection1\n        {page:WordSection1;}\n--&gt;&lt;/style&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;&lt;o:shapedefaults v:ext=\"edit\" spidmax=\"1026\" /&gt;&lt;/xml&gt;&lt;![endif]--&gt;&lt;!--[if gte mso 9]&gt;&lt;xml&gt;&lt;o:shapelayout v:ext=\"edit\"&gt;&lt;o:idmap v:ext=\"edit\" data=\"1\" /&gt;&lt;/o:shapelayout&gt;&lt;/xml&gt;&lt;![endif]--&gt;&lt;/head&gt;&lt;body lang=\"EN-US\" link=\"blue\" vlink=\"purple\"&gt;&lt;div class=\"WordSection1\"&gt;&lt;p class=\"MsoNormal\"&gt;Another test mail.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=\"MsoNormal\"&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=\"MsoNormal\"&gt;Thanks,&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=\"MsoNormal\"&gt;Munesh&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;&lt;p class=\"MsoNormal\"&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\n\n------=_Part_2_123.456--\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "spark-streaming"], "answers": [{"comments": [{"owner": {"reputation": 16594, "user_id": 1050619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784ade8d4151295e24765ffc4fcd60b4?s=128&d=identicon&r=PG", "display_name": "user1050619", "link": "https://stackoverflow.com/users/1050619/user1050619"}, "edited": false, "score": 0, "creation_date": 1505947819, "post_id": 46332758, "comment_id": 79626539, "body": "this one works -- bin/spark-submit --packages org.apache.spark:spark-streaming-kafka-0-8_2.11:2.2.0  examples/src/main/python/streaming/kafka_wordcount.py localhost:2181 test                                   but when I download the jar and run like this(using --jar)  I get a error -                     bin/spark-submit --jars ../external/spark-streaming-kafka-0-8_2.11-2.2.0.jar examples/src/main/python/streaming/kafka_wordcount.py localhost:2181 test"}, {"owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "reply_to_user": {"reputation": 16594, "user_id": 1050619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784ade8d4151295e24765ffc4fcd60b4?s=128&d=identicon&r=PG", "display_name": "user1050619", "link": "https://stackoverflow.com/users/1050619/user1050619"}, "edited": false, "score": 0, "creation_date": 1505978291, "post_id": 46332758, "comment_id": 79635077, "body": "This is beacase <code>--packages</code> downloads all transitive dependencies. If you include packages with <code>--jars</code> you need to provide all required classes - use <i>assembly</i> jar."}], "tags": [], "owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "is_accepted": true, "score": 0, "last_activity_date": 1505947107, "creation_date": 1505947107, "answer_id": 46332758, "question_id": 46331401, "link": "https://stackoverflow.com/questions/46331401/apache-spark-streaming-running-python-example/46332758#46332758", "title": "apache spark streaming running python example", "body": "<p>You need to use <code>spark-streaming-kafka-assembly</code> jar, not <code>spark-streaming-kafka</code>. The assembly jar has all dependencies in place (including kafka client).</p>\n"}], "owner": {"reputation": 16594, "user_id": 1050619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784ade8d4151295e24765ffc4fcd60b4?s=128&d=identicon&r=PG", "display_name": "user1050619", "link": "https://stackoverflow.com/users/1050619/user1050619"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 1, "accepted_answer_id": 46332758, "answer_count": 1, "score": 1, "last_activity_date": 1505947107, "creation_date": 1505939987, "question_id": 46331401, "link": "https://stackoverflow.com/questions/46331401/apache-spark-streaming-running-python-example", "title": "apache spark streaming running python example", "body": "<p>Im trying to run a python spark streaming job that is given in the example directory - </p>\n\n<p><a href=\"https://spark.apache.org/docs/2.1.1/streaming-programming-guide.html\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/2.1.1/streaming-programming-guide.html</a></p>\n\n<pre><code>\"\"\"\n Counts words in UTF8 encoded, '\\n' delimited text received from the network every second.\n Usage: kafka_wordcount.py &lt;zk&gt; &lt;topic&gt;\n To run this on your local machine, you need to setup Kafka and create a producer first, see\n http://kafka.apache.org/documentation.html#quickstart\n\n and then run the example\n    `$ bin/spark-submit --jars \\\n      external/kafka-assembly/target/scala-*/spark-streaming-kafka-assembly-*.jar \\\n      examples/src/main/python/streaming/kafka_wordcount.py \\\n      localhost:2181 test`\n\"\"\"\nfrom __future__ import print_function\n\nimport sys\n\nfrom pyspark import SparkContext\nfrom pyspark.streaming import StreamingContext\nfrom pyspark.streaming.kafka import KafkaUtils\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 3:\n        print(\"Usage: kafka_wordcount.py &lt;zk&gt; &lt;topic&gt;\", file=sys.stderr)\n        exit(-1)\n\n    sc = SparkContext(appName=\"PythonStreamingKafkaWordCount\")\n    ssc = StreamingContext(sc, 1)\n\n    zkQuorum, topic = sys.argv[1:]\n    kvs = KafkaUtils.createStream(ssc, zkQuorum, \"spark-streaming-consumer\", {topic: 1})\n    lines = kvs.map(lambda x: x[1])\n    counts = lines.flatMap(lambda line: line.split(\" \")) \\\n        .map(lambda word: (word, 1)) \\\n        .reduceByKey(lambda a, b: a+b)\n    # counts.pprint()\n\n    ssc.start()\n    ssc.awaitTermination()\n</code></pre>\n\n<p>I downloaded spark-streaming-kafka-0-8_2.11-2.1.0.jar into my local directory and ran my spark-submit command</p>\n\n<pre><code>bin/spark-submit --jars ../external/spark-streaming-kafka*.jar examples/src/main/python/streaming/kafka_wordcount.py localhost:2181 test\n</code></pre>\n\n<p>I get this following error - </p>\n\n<pre><code>Exception in thread \"Thread-3\" java.lang.NoClassDefFoundError: kafka/common/TopicAndPartition\n</code></pre>\n"}, {"tags": ["python", "django", "nginx", "server", "gunicorn"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1505940200, "post_id": 46331358, "comment_id": 79623665, "body": "Do you have many long running calls? Not the best scenario for a web app. But unicorn has many setting to tune. You can configure it to kill hanging workers or use an other worker class. From my experience the work class &quot;gevent&quot; performs much better when you have long running tasks."}, {"owner": {"reputation": 1, "user_id": 4084786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fa1c7bb55adf2ca7d32cb065341fee?s=128&d=identicon&r=PG&f=1", "display_name": "brightByte", "link": "https://stackoverflow.com/users/4084786/brightbyte"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1506020812, "post_id": 46331358, "comment_id": 79663142, "body": "Yes, I do. Usually one API call takes for example (200 items / hour); assuming that if I have only 200 items (which rarely is the case); the results will take 1 hour to be received. At the same time I have other workers who run a different API call of magnitude of (500,000 items / hour). And the number of workers that perform these API calls sometimes changes and varies; and can be bigger then 4/day. On top of those workers, I have daily uses of my-application (which does not involve api calls), but accesses internal-db with data, very frequently."}, {"owner": {"reputation": 1, "user_id": 4084786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fa1c7bb55adf2ca7d32cb065341fee?s=128&d=identicon&r=PG&f=1", "display_name": "brightByte", "link": "https://stackoverflow.com/users/4084786/brightbyte"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1506020848, "post_id": 46331358, "comment_id": 79663156, "body": "However, thank you for the reply, I will look into the &#39;gevent&#39;."}], "owner": {"reputation": 1, "user_id": 4084786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67fa1c7bb55adf2ca7d32cb065341fee?s=128&d=identicon&r=PG&f=1", "display_name": "brightByte", "link": "https://stackoverflow.com/users/4084786/brightbyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505944500, "creation_date": 1505939792, "last_edit_date": 1505944500, "question_id": 46331358, "link": "https://stackoverflow.com/questions/46331358/is-there-possible-to-restart-gunicorn-by-writing-a-script-inside-a-python-django", "title": "Is there possible to restart gunicorn by writing a script inside a python-django application? If yes, how should this script look like?", "body": "<p>Sometimes the server of my website crashes and/or gets really slow, usually from multiple API processes, thread calls that last really long, and multiple workers/users performing different activities. </p>\n\n<p>After getting a 502 bad gateway, I usually restart the gunicorn. </p>\n\n<p>In my understanding, the reason for the 502 Error means that the Nginx is having trouble connecting to the Gunicorn process. </p>\n\n<p>The solution I have so far is by manually login into the server, and performing <code>sudo systemctl restart gunicorn</code>, and I manually kill those processes based on their pids. </p>\n\n<p>However I would like to know if there is any way of restarting gunicorn automatically by using some sort of script, and repeat the process once or twice a week?</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "graph", "data-visualization"], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 5544627, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/UyeC7.jpg?s=128&g=1", "display_name": "Cassie H.", "link": "https://stackoverflow.com/users/5544627/cassie-h"}, "edited": false, "score": 0, "creation_date": 1505946350, "post_id": 46331521, "comment_id": 79626103, "body": "I tried implementing this, but the graph still does not use dates"}], "tags": [], "owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "is_accepted": true, "score": 3, "last_activity_date": 1505977761, "last_edit_date": 1505977761, "creation_date": 1505940509, "answer_id": 46331521, "question_id": 46331328, "link": "https://stackoverflow.com/questions/46331328/making-values-of-the-axis-dates-on-a-matplotlib-graph/46331521#46331521", "title": "Making values of the axis dates on a matplotlib graph", "body": "<p>If you're going to use pandas's plotting methods and want datetimes, I recommend ensuring that you're parsing the dates and setting them as the index. I also, recommend the object-oriented matplotlib interface.</p>\n\n<pre><code>from io import StringIO\nfrom matplotlib import pyplot\nimport pandas\n\ndatafile = StringIO(\"\"\"\\\ndate    close   volume  open    high    low\n2017/09/13  173.05  9112378 173.01  173.17  172.06\n2017/09/12  172.96  11179730    173.76  174 171.75\n2017/09/11  173.51  12353760    172.4   173.89  172.2\n2017/09/08  170.95  10985350    173.09  173.49  170.8\n2017/09/07  173.21  18039640    171.94  173.3067    170.27\n2017/09/06  172.09  13886740    170.91  172.48  169.57\n2017/09/05  170.72  13214940    171.27  172.3875    169.55\n2017/09/01  172.02  11663360    172.4   172.915 171.31\n2017/08/31  171.97  17216280    170.4   172.145 170.06\n\"\"\")\n\nfig, ax = pyplot.subplots(figsize=(7, 5))\n_ = (\n    pandas.read_csv(datafile, sep='\\s+',\n                    usecols=['date', 'open', 'close'],\n                    parse_dates=['date'])\n        .set_index('date')\n        .plot(ax=ax)\n)\nax.set_xlabel('Date')\nax.set_ylabel('BUY! SELL!')\nax.set_title('Money money money money')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Dgvm7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dgvm7.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 293, "user_id": 5544627, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/UyeC7.jpg?s=128&g=1", "display_name": "Cassie H.", "link": "https://stackoverflow.com/users/5544627/cassie-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 46331521, "answer_count": 1, "score": 0, "last_activity_date": 1505977761, "creation_date": 1505939672, "last_edit_date": 1505952600, "question_id": 46331328, "link": "https://stackoverflow.com/questions/46331328/making-values-of-the-axis-dates-on-a-matplotlib-graph", "title": "Making values of the axis dates on a matplotlib graph", "body": "<p>I have a time series graph made using pandas and matplotlib. My function looks like this:</p>\n\n<pre><code>def graph(file):\n    pdf = PdfPages('...pdf')\n    # Temporal Change (Time Series)\n    pd.read_csv(file, usecols=['close','open']).plot()\n    plt.xlabel('Date')\n    plt.ylabel('Value')\n    plt.title('Open/Close Over Time')\n    plt.show()\n</code></pre>\n\n<p>My data file has headers corresponding to values, and the date header is at index 0. (If thats relevant?)</p>\n\n<p>Right now the graph works but the index of the value is displayed for time instead of the date. How would I make the x-axis(Date) display the dates that correspond to the data instead of the index?</p>\n\n<p>EDIT: Data file looks like this</p>\n\n<pre><code>date    close   volume  open    high    low\n2017/09/13  173.05  9112378 173.01  173.17  172.06\n2017/09/12  172.96  11179730    173.76  174 171.75\n2017/09/11  173.51  12353760    172.4   173.89  172.2\n2017/09/08  170.95  10985350    173.09  173.49  170.8\n2017/09/07  173.21  18039640    171.94  173.3067    170.27\n2017/09/06  172.09  13886740    170.91  172.48  169.57\n2017/09/05  170.72  13214940    171.27  172.3875    169.55\n2017/09/01  172.02  11663360    172.4   172.915 171.31\n2017/08/31  171.97  17216280    170.4   172.145 170.06\n</code></pre>\n\n<p>Is a .csv file, ^that was copied from it being open in excel</p>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505942448, "post_id": 46331605, "comment_id": 79624660, "body": "that seem to work but you are missing the <code>data</code> field. and how am I turning that into a numpy matrix ?"}, {"owner": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505942661, "post_id": 46331605, "comment_id": 79624761, "body": "also, i need to pivot, to have each value of <code>field_id</code> as a column"}, {"owner": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505942686, "post_id": 46331605, "comment_id": 79624769, "body": "and the <code>value</code> column as the value of the cell"}, {"owner": {"reputation": 2323, "user_id": 4642859, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cbbd31a436ff596d2ea6eebbb5ca477c?s=128&d=identicon&r=PG&f=1", "display_name": "3kt", "link": "https://stackoverflow.com/users/4642859/3kt"}, "reply_to_user": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505944318, "post_id": 46331605, "comment_id": 79625337, "body": "@Wonay so if I understand correctly, a value of 1 in the field_id column whoud become field_id1, and the value column should be the value in this column ?"}, {"owner": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505945169, "post_id": 46331605, "comment_id": 79625662, "body": "yes ! it doesnt have to become <code>field_id1</code> it can stay as <code>1</code>. I am very closed to a solution right now using <code>pivot_table</code>"}, {"owner": {"reputation": 2323, "user_id": 4642859, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cbbd31a436ff596d2ea6eebbb5ca477c?s=128&d=identicon&r=PG&f=1", "display_name": "3kt", "link": "https://stackoverflow.com/users/4642859/3kt"}, "reply_to_user": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505945231, "post_id": 46331605, "comment_id": 79625690, "body": "@Wonay got it as well, updating my answer right now"}, {"owner": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505946816, "post_id": 46331605, "comment_id": 79626249, "body": "it works pretty well ! What if I had two <code>data</code> column ? I tried to add a third name to the <code>index</code> parameter but the result dataframe is empty"}, {"owner": {"reputation": 2323, "user_id": 4642859, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cbbd31a436ff596d2ea6eebbb5ca477c?s=128&d=identicon&r=PG&f=1", "display_name": "3kt", "link": "https://stackoverflow.com/users/4642859/3kt"}, "reply_to_user": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505947042, "post_id": 46331605, "comment_id": 79626316, "body": "@Wonay did you remember to also add this <code>data2</code> column in the <code>grouped</code> computation ? Can you give me an example ?"}, {"owner": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505947465, "post_id": 46331605, "comment_id": 79626421, "body": "exactly the same thing as before, except that you have one <code>data</code> and one <code>data2</code> in the original data"}, {"owner": {"reputation": 2323, "user_id": 4642859, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cbbd31a436ff596d2ea6eebbb5ca477c?s=128&d=identicon&r=PG&f=1", "display_name": "3kt", "link": "https://stackoverflow.com/users/4642859/3kt"}, "reply_to_user": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "edited": false, "score": 0, "creation_date": 1505947607, "post_id": 46331605, "comment_id": 79626481, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/154945/discussion-between-3kt-and-wonay\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2323, "user_id": 4642859, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cbbd31a436ff596d2ea6eebbb5ca477c?s=128&d=identicon&r=PG&f=1", "display_name": "3kt", "link": "https://stackoverflow.com/users/4642859/3kt"}, "is_accepted": true, "score": 0, "last_activity_date": 1505945624, "last_edit_date": 1505945624, "creation_date": 1505940900, "answer_id": 46331605, "question_id": 46331280, "link": "https://stackoverflow.com/questions/46331280/how-to-convert-db-rows-into-a-training-matrix/46331605#46331605", "title": "How to convert DB rows into a training matrix", "body": "<p>Let's start with a <code>groupby</code> to merge values for a same field:</p>\n\n<pre><code>In [22]: df\nOut[22]: \n   index  group1  group2  field_id  value  data\n0      0       1       1         1      1    12\n1      1       1       1         1      2    12\n2      2       1       1         2      1    12\n3      3       1       1         3      2    12\n4      4       1       2         1      1    12\n5      5       1       2         3      1    12\n\nIn [54]: grouped = df.groupby(['group1', 'group2', 'field_id']).agg({'value': lambda x: ', '.join(map(str, x)), 'data': np.min}).reset_index()\n\nIn [55]: grouped\nOut[55]: \n   group1  group2  field_id  data value\n0       1       1         1    12  1, 2\n1       1       1         2    12     1\n2       1       1         3    12     2\n3       1       2         1    12     1\n4       1       2         3    12     1\n</code></pre>\n\n<p>We can now use a <code>pivot_table</code> to transform the ids into columns:</p>\n\n<pre><code>In [56]: grouped.pivot_table(values='value', index=['group2', 'data'], columns='field_id', aggfunc='first').reset_index()\nOut[56]: \nfield_id  group2  data     1     2  3\n0              1    12  1, 2     1  2\n1              2    12     1  None  1\n</code></pre>\n\n<p>The numbers refer to the <code>field_id</code> values (which you can prepend at your convenience, if that's unclear)</p>\n"}], "owner": {"reputation": 850, "user_id": 3357831, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/5f5a11a6805b09c09bf30abf29e19200?s=128&d=identicon&r=PG", "display_name": "Wonay", "link": "https://stackoverflow.com/users/3357831/wonay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 46331605, "answer_count": 1, "score": 1, "last_activity_date": 1505945624, "creation_date": 1505939493, "question_id": 46331280, "link": "https://stackoverflow.com/questions/46331280/how-to-convert-db-rows-into-a-training-matrix", "title": "How to convert DB rows into a training matrix", "body": "<p>I have a dataframe like that:</p>\n\n<pre><code>index  group1 group2 field_id  value  data\n  0      1     1        1        1     12\n  1      1     1        1        2     12\n  2      1     1        2        1     12\n  3      1     1        3        2     12\n  4      1     2        1        1     12\n  5      1     2        3        1     12\n  6      1     2        4        1    ...\n  7      1     2        2        2\n  8      1     2        1        1\n  9      1     3        1        1\n  10     2\n  11     ...\n</code></pre>\n\n<p>And I want to transform it into a <code>numpy</code> matrix:</p>\n\n<pre><code>index group2 field_id_1 field_id2 field_3 field_id_4 data\n  0      1        1,2        1        2       0       12\n</code></pre>\n\n<p>So I want to gather the <code>value</code> of each <code>field_ids</code> into column. \nEach row is a <code>group2</code> , the <code>field_ids</code> are the same across <code>(group1, group2)</code> and <code>data</code> is per <code>group2</code>. </p>\n\n<p>Is there a way of doing this conversion efficiently ? \nI tried with some <code>groupby</code> and <code>forloop</code> but it is pretty slow.</p>\n\n<p>The end goal is to have those as training and result the first columns with <code>field_ids</code> are the input and the <code>data</code> column is the output. And each row is a sample.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1505939927, "post_id": 46331255, "comment_id": 79623551, "body": "Welcome to SO.  It doesn&#39;t look like you have asked a question.  As it is it isn&#39;t clear what you are asking. You will get better results if you can narrow down your question to a single problem.  Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>.  Please try to ensure that the indentation is correct for the code you post.  If you ask questions about code the throws and error/exception post the complete Traceback."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1505994218, "post_id": 46331255, "comment_id": 79645904, "body": "Read about <a href=\"http://www.pythonforbeginners.com/dictionary/python-dictionary-quick-guide\" rel=\"nofollow noreferrer\">python-dictionary-quick-guide</a>"}], "owner": {"reputation": 9, "user_id": 8644338, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1lUl4rDJtrk/AAAAAAAAAAI/AAAAAAAAAbA/Op3sY5FJkcA/photo.jpg?sz=128", "display_name": "Gqz", "link": "https://stackoverflow.com/users/8644338/gqz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505939327, "creation_date": 1505939327, "question_id": 46331255, "link": "https://stackoverflow.com/questions/46331255/storing-items-within-a-dictionary-to-be-then-used-to-calculate-area", "title": "Storing items within a dictionary to be then used to calculate area", "body": "<p>I'm pretty new to Python (2 days) and I'm struggling to find a solution to add a variable to a dictionary with a defined value as well as </p>\n\n<pre class=\"lang-html prettyprint-override\"><code> choice = input(\"\")\n    if choice == \"1\":\n        print (\"1.Basic - \u00a38\")\n        print (\"2.Standard- \u00a313\")\n        print (\"3.Premium- \u00a325\")\n\n\n\n\n        Premium = dict(name =\"Premium\",\n                       Cost = 25.0)\n\n        Standard = dict(name =\"Standard\",\n                       Cost = 13.0)\n\n        Basic = dict(name =\"Basic\",\n                       Cost = 8.0)\n\n\n\n        Grass_Dict = {}\n\n\n        Premium = input(\"Type Premium\")\n\n\n        Basic = print(input(\"Type '3' for Basic\")\n\n        Grass_Dict['1'] = Premium\n\n\n        Grass_Dict['2'] = Standard\n\n\n\n        Grass_Dict['3'] = Basic\n</code></pre>\n\n\n\n<p>I have then tried to add the variables to the second part of the code so that when I reference the cost calculation I will be able to use the stored variable and it's value (25.0) to be used.</p>\n\n<p>elif (choice ==\"2\"):</p>\n\n<pre><code>  time.sleep(0.2)\nprint(\"-\")\n\ntime.sleep(0.2)\nprint(\"-\")\n\nprint(\"2.Select Area of Grass\")\nprint(\"1.Select Shape Required\")\n\nif (choice ==\"1\"):\n        print(\"Grass Calculation Program\")\n        print(\"Select Shape Required\")\n        print(\"1.Square\")\n        print(\"2.Triangle\")\n        print(\"3.Circle\")\n\n\nshape = input (\"Please Select (1/2/3)\")\n\nif choice ==\"1\":\n    length = input (\"Please Enter Length\")\n    width = input (\"Please Enter Width\")\n    area = (length*width)\n\n\n    print (\"Calculating Cost\")\n\n\nelif choice ==\"2\":\n    length = input (\"Please Enter Length\")\n    width = input (\"Please Enter Width\")\n</code></pre>\n\n<p>Thanks for everyone's help!</p>\n"}, {"tags": ["python", "join", "orm", "sqlite", "sqlalchemy"], "comments": [{"owner": {"reputation": 2600, "user_id": 6914989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2Ar.png?s=128&g=1", "display_name": "FabienP", "link": "https://stackoverflow.com/users/6914989/fabienp"}, "edited": false, "score": 0, "creation_date": 1505940203, "post_id": 46331245, "comment_id": 79623666, "body": "Could you improve your code formatting? It would greatly enhance readability of your question."}, {"owner": {"reputation": 11, "user_id": 7675859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9567c0499585e68c1a9b33b98e37d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "user7675859", "link": "https://stackoverflow.com/users/7675859/user7675859"}, "reply_to_user": {"reputation": 2600, "user_id": 6914989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2Ar.png?s=128&g=1", "display_name": "FabienP", "link": "https://stackoverflow.com/users/6914989/fabienp"}, "edited": false, "score": 0, "creation_date": 1505944528, "post_id": 46331245, "comment_id": 79625423, "body": "Sure how so.  The only code is in the block code section.  I will highlight the result I get and result I want."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7675859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9567c0499585e68c1a9b33b98e37d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "user7675859", "link": "https://stackoverflow.com/users/7675859/user7675859"}, "is_accepted": false, "score": 0, "last_activity_date": 1505944410, "last_edit_date": 1505944410, "creation_date": 1505944105, "answer_id": 46332253, "question_id": 46331245, "link": "https://stackoverflow.com/questions/46331245/sqlalchemy-orm-dynamic-join-not-returning-all-columns-from-all-joined-tables/46332253#46332253", "title": "SQLAlchemy ORM dynamic join not returning all columns from all joined tables", "body": "<p>Well, writing something done definitely helps you figure out the answer.  </p>\n\n<p>For anyone that might benefit this is what I did.  I am sure there is a more eloquent way to do this so please let me know if so.</p>\n\n<p>I finally read my output correctly and realized that it was giving me 2 table model objects (1 per table joined).  I then iterated over each, converted each iteration to a list of dictionaries and then merged those dictionaries appropriately so that i had one list of dictionaries like a inner join table would give me. </p>\n\n<p>Here is some of my code:</p>\n\n<pre><code>for obj in queryset:\n    result.append(queryset_to_dict(obj))\n\nfor r in result:\n    new_dict = {}\n    for inner in r:\n        new_dict = {**new_dict, **inner}\n    new_result.append(new_dict)\n</code></pre>\n\n<ul>\n<li>Note the queryset_to_dict is a function I created for converting sqlalchemy table model objects to list of dictionaries.</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 7675859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9567c0499585e68c1a9b33b98e37d5a5?s=128&d=identicon&r=PG&f=1", "display_name": "user7675859", "link": "https://stackoverflow.com/users/7675859/user7675859"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 626, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505944667, "creation_date": 1505939306, "last_edit_date": 1505944667, "question_id": 46331245, "link": "https://stackoverflow.com/questions/46331245/sqlalchemy-orm-dynamic-join-not-returning-all-columns-from-all-joined-tables", "title": "SQLAlchemy ORM dynamic join not returning all columns from all joined tables", "body": "<p>I am new to sqlalchemy.  So any help is appreciated.\nI have a function that constructs my queries for my application.  I pass it a list of tables to join.</p>\n\n<p>Here are the relevant code snippets.</p>\n\n<pre><code>class Scope(Base):\n    entry = Column(String(512))\n    location_id = Column(Integer, ForeignKey('location_id'))\n    type = Column(String(128))\n\nclass Location(Base):\n    id = Column(Integer, primary_key=True)\n    name = Column(String(512)\n    modified_by = Column(String(128))\n\ninstances = [Scope, Location]\njoin_classes = [Location]\n\nqueryset = session.query(*instances).join(*join_classes).all()\n</code></pre>\n\n<p>Here is the SQL query that runs (when I print queryset to screen before the .all()):</p>\n\n<p>queryset: SELECT scope.id AS scope_id, scope.location_id AS scope_location_id, scope.entry AS scope_entry, scope.type AS scope_type, location.name AS location_name, location.modified_by AS location_modified_by,<br>\nFROM scope JOIN location ON location.id = scope.location_id</p>\n\n<p>My end result I want is: a list of dictionaries for all columns (from both tables - like regular inner join gives a single table).</p>\n\n<p>However, I am getting the a list when I type(queryset) and when I just try to do <strong>[u._asdict() for u in queryset]</strong> which is how I return a list of dictionaries in queries that don't have a join, it only returns a list of dictionaries for 1 column from each table (the column in the __repr__.  </p>\n\n<p>I need all columns from both tables to be returned. </p>\n\n<p>Right now this is how what is what I get:\n<strong><em>[{'Scope': 192.168.0.0/24, 'Location': main}, ...]</em></strong></p>\n\n<p>I need something like, where all columns from the join are returned in a list of dictionaries:\n<strong><em>[{'Scope.entry': 192.168.0.0/24, 'Scope.type': 'virtual', 'Location.name': main, 'Location.modified_by': 'jim'}, ...]</em></strong></p>\n\n<p>In my code the instances &amp; join_classes are dynamically passed and not hard coded as different functions pass the table models to join on (with the 1st model table being the table that all proceeding join on).  I need this to work with a join on multiple tables (but all tables will be joined to the 1st model table, Scope in this example.)</p>\n\n<p><strong>Edit</strong>: I finally realized I was getting a list of sqlalchemy table objects back.  That is why I was getting the __repr__ values when displaying.</p>\n"}, {"tags": ["python", "django", "tensorflow", "web-frameworks"], "answers": [{"tags": [], "owner": {"reputation": 806, "user_id": 5116726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896265d01f444fe655496d6e23716e32?s=128&d=identicon&r=PG&f=1", "display_name": "mbrig", "link": "https://stackoverflow.com/users/5116726/mbrig"}, "is_accepted": false, "score": 1, "last_activity_date": 1505939717, "creation_date": 1505939717, "answer_id": 46331341, "question_id": 46331235, "link": "https://stackoverflow.com/questions/46331235/run-python-tensorflow-code-on-a-django-made-website/46331341#46331341", "title": "Run python TensorFlow code on a Django made website?", "body": "<p>Yes it is possible. A web-framework is just that, a framework. You can still write any kind of python code you want in addition to it.</p>\n\n<p>You may need to consider something like a work-queue structure so that pages do not go unresponsive/timeout while long calculations take place though.</p>\n"}], "owner": {"reputation": 79, "user_id": 8594021, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f7e79d1bfc3b221c0c706fd7a9870a54?s=128&d=identicon&r=PG&f=1", "display_name": "JayE", "link": "https://stackoverflow.com/users/8594021/jaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1418, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1505939717, "creation_date": 1505939242, "question_id": 46331235, "link": "https://stackoverflow.com/questions/46331235/run-python-tensorflow-code-on-a-django-made-website", "title": "Run python TensorFlow code on a Django made website?", "body": "<p>I want to make a website using entirely python and I want to add code made using the TensorFlow module. The idea is to create a website me and my friends can upload training data too no matter where we are.</p>\n\n<p>I am trying to make a website using python (it must remain entirely in python) so i'm looking at Django for the website. Using Django (or any other framework) can I add code onto the site even if its from TensorFlow such as this.</p>\n\n<pre><code>import tensorflow as tf\n\nnode1 = tf.constant(3.0, dtype=tf.float32)\nnode2 = tf.constant(4.0) # also tf.float32 implicitly\nprint(node1, node2)\n\nTensor(\"Const:0\", shape=(), dtype=float32) Tensor(\"Const_1:0\", shape=(), dtype=float32)\n\nsess = tf.Session()\nprint(sess.run([node1, node2]))\n</code></pre>\n\n<p>Is what I want possible to do in python?</p>\n"}, {"tags": ["python", "insert"], "answers": [{"comments": [{"owner": {"reputation": 3003, "user_id": 922723, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/JvMbE.png?s=128&g=1", "display_name": "Russell", "link": "https://stackoverflow.com/users/922723/russell"}, "edited": false, "score": 0, "creation_date": 1505939691, "post_id": 46331312, "comment_id": 79623449, "body": "Yes... but I actually need to insert occasionally at a non-zero index where concatenation might not work."}], "tags": [], "owner": {"reputation": 6703, "user_id": 249810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41073fa4fa33840f81aceaefff9ec31c?s=128&d=identicon&r=PG", "display_name": "ezod", "link": "https://stackoverflow.com/users/249810/ezod"}, "is_accepted": false, "score": 1, "last_activity_date": 1505939629, "creation_date": 1505939629, "answer_id": 46331312, "question_id": 46331220, "link": "https://stackoverflow.com/questions/46331220/insert-bytearray-into-bytearray-python/46331312#46331312", "title": "Insert bytearray into bytearray Python", "body": "<pre><code>&gt;&gt;&gt; a = bytearray(struct.pack(\"&gt;i\", 1))\n&gt;&gt;&gt; b = bytearray(struct.pack(\"&gt;i\", 2))\n&gt;&gt;&gt; a = b + a\n&gt;&gt;&gt; a\nbytearray(b'\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x01')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 3003, "user_id": 922723, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/JvMbE.png?s=128&g=1", "display_name": "Russell", "link": "https://stackoverflow.com/users/922723/russell"}, "edited": false, "score": 1, "creation_date": 1505940349, "post_id": 46331330, "comment_id": 79623734, "body": "@Russell because <code>.insert</code> tries to <i>insert the object, i.e. the entire bytearray</i> as the ith element. But that isn&#39;t what you want, bytearrays can only contain <i>bytes</i>, not bytearray-objects. Think of this: <code>x = [1,2,3]; y = [&#39;a&#39;,&#39;b&#39;]; x.insert(0,y)</code> will give you <code>x == [[&#39;a&#39;, &#39;b&#39;], 1, 2, 3]</code>"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 8, "last_activity_date": 1505940459, "last_edit_date": 1505940459, "creation_date": 1505939685, "answer_id": 46331330, "question_id": 46331220, "link": "https://stackoverflow.com/questions/46331220/insert-bytearray-into-bytearray-python/46331330#46331330", "title": "Insert bytearray into bytearray Python", "body": "<p><code>bytearray</code> is a sequence-type, and it supports slice-based operations. The \"insert at position <code>i</code>\" idiom with slices goes like this <code>x[i:i] = &lt;a compatible sequence&gt;</code>. So, for the <em>fist</em> position:</p>\n\n<pre><code>&gt;&gt;&gt; a\nbytearray(b'\\x00\\x00\\x00\\x01')\n&gt;&gt;&gt; b\nbytearray(b'\\x00\\x00\\x00\\x02')\n&gt;&gt;&gt; a[0:0] = b\n&gt;&gt;&gt; a\nbytearray(b'\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x01')\n</code></pre>\n\n<p>For the <em>third</em> position:</p>\n\n<pre><code>&gt;&gt;&gt; a\nbytearray(b'\\x00\\x00\\x00\\x01')\n&gt;&gt;&gt; b\nbytearray(b'\\x00\\x00\\x00\\x02')\n&gt;&gt;&gt; a[2:2] = b\n&gt;&gt;&gt; a\nbytearray(b'\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x01')\n</code></pre>\n\n<p>Note, this isn't equivalent to <code>.insert</code>, because for sequences, <code>.insert</code> <em>inserts the entire object as the ith element</em>. So, consider the following simple example with lists:</p>\n\n<pre><code>&gt;&gt;&gt; y = ['a','b']\n&gt;&gt;&gt; x.insert(0, y)\n&gt;&gt;&gt;\n&gt;&gt;&gt; x\n[['a', 'b'], 1, 2, 3]\n</code></pre>\n\n<p>What you <em>really wanted</em> was:</p>\n\n<pre><code>&gt;&gt;&gt; x\n[1, 2, 3]\n&gt;&gt;&gt; y\n['a', 'b']\n&gt;&gt;&gt; x[0:0] = y\n&gt;&gt;&gt; x\n['a', 'b', 1, 2, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 10472446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6141d13eece56f2c311221b6c7cceaa?s=128&d=identicon&r=PG&f=1", "display_name": "Toady", "link": "https://stackoverflow.com/users/10472446/toady"}, "edited": false, "score": 0, "creation_date": 1602237899, "post_id": 46332465, "comment_id": 113663450, "body": "I couldn&#39;t understand why <code>a[:2]=b</code> was giving the result <code>bytearray(b&#39;\\x00\\x00\\x00\\x02\\x00\\x01&#39;)</code> for <code>a</code>. Indeed if executed after <code>a=b+a</code> the result will be <code>bytearray(b&#39;\\x00\\x00\\x00\\x02\\x00\\x02\\x00\\x00\\x00\\x01&#39;)</code>. This example is not a sequence!"}], "tags": [], "owner": {"reputation": 76, "user_id": 7207037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GfHGdaEvTKs/AAAAAAAAAAI/AAAAAAAAAOM/HX_vqbgt9Z0/photo.jpg?sz=128", "display_name": "Fabio Teixeira", "link": "https://stackoverflow.com/users/7207037/fabio-teixeira"}, "is_accepted": false, "score": 1, "last_activity_date": 1505945194, "creation_date": 1505945194, "answer_id": 46332465, "question_id": 46331220, "link": "https://stackoverflow.com/questions/46331220/insert-bytearray-into-bytearray-python/46332465#46332465", "title": "Insert bytearray into bytearray Python", "body": "<p><a href=\"https://docs.python.org/3.6/library/stdtypes.html#bytearray-objects\" rel=\"nofollow noreferrer\">Bytearray</a> are mutable sequence of single bytes (integers), so bytearray only accepts integers that meet the value restriction 0 &lt;= x &lt;= 255):</p>\n\n<pre><code>&gt;&gt;&gt; a = bytearray(struct.pack(\"&gt;i\", 1))\n&gt;&gt;&gt; b = bytearray(struct.pack(\"&gt;i\", 2))\n&gt;&gt;&gt; a.insert(0,b)\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: an integer is required\n\n&gt;&gt;&gt; a=b+a\n&gt;&gt;&gt; a\nbytearray(b'\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x01')\n\n&gt;&gt;&gt;a[:2]=b\n&gt;&gt;&gt; a\nbytearray(b'\\x00\\x00\\x00\\x02\\x00\\x01')\n</code></pre>\n"}], "owner": {"reputation": 3003, "user_id": 922723, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/JvMbE.png?s=128&g=1", "display_name": "Russell", "link": "https://stackoverflow.com/users/922723/russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7709, "favorite_count": 2, "accepted_answer_id": 46331330, "answer_count": 3, "score": 5, "last_activity_date": 1505945194, "creation_date": 1505939174, "question_id": 46331220, "link": "https://stackoverflow.com/questions/46331220/insert-bytearray-into-bytearray-python", "title": "Insert bytearray into bytearray Python", "body": "<p>I'm trying to insert one byte array into another at the beginning.  Here's a simple example of what I'm trying to accomplish.</p>\n\n<pre><code>import struct\na = bytearray(struct.pack(\"&gt;i\", 1))\nb = bytearray(struct.pack(\"&gt;i\", 2))\na = a.insert(0, b)\nprint(a)\n</code></pre>\n\n<p>However this fails with the following error: </p>\n\n<p><code>a = a.insert(0, b)</code>\n<code>TypeError: an integer is required</code></p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 7, "last_activity_date": 1505939290, "creation_date": 1505939290, "answer_id": 46331240, "question_id": 46331210, "link": "https://stackoverflow.com/questions/46331210/how-to-assign-count-of-unique-values-to-the-records-in-a-data-frame-in-python/46331240#46331240", "title": "How to assign count of unique values to the records in a data frame in python", "body": "<pre><code>In [75]: df['IP_address_Count'] = df.groupby('IP_address')['IP_address'].transform('size')\n\nIn [76]: df\nOut[76]:\n   IP_address  IP_address_Count\n0         IP1                 3\n1         IP1                 3\n2         IP1                 3\n3         IP4                 5\n4         IP4                 5\n5         IP4                 5\n6         IP4                 5\n7         IP4                 5\n8         IP7                 3\n9         IP7                 3\n10        IP7                 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 8, "last_activity_date": 1505939291, "creation_date": 1505939291, "answer_id": 46331241, "question_id": 46331210, "link": "https://stackoverflow.com/questions/46331210/how-to-assign-count-of-unique-values-to-the-records-in-a-data-frame-in-python/46331241#46331241", "title": "How to assign count of unique values to the records in a data frame in python", "body": "<p>NumPy way -</p>\n\n<pre><code>tags, C = np.unique(df.IP_address, return_counts=1, return_inverse=1)[1:]\ndf['IP_address_Count'] = C[tags]\n</code></pre>\n\n<p>Sample output -</p>\n\n<pre><code>In [275]: df\nOut[275]: \n   IP_address  IP_address_Count\n0         IP1                 3\n1         IP1                 3\n2         IP1                 3\n3         IP4                 5\n4         IP4                 5\n5         IP4                 5\n6         IP4                 5\n7         IP4                 5\n8         IP7                 3\n9         IP7                 3\n10        IP7                 3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1505939573, "post_id": 46331266, "comment_id": 79623381, "body": "I like your solution more, compared to mine... :)"}, {"owner": {"reputation": 407, "user_id": 8241998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d2f3c791ad6313a27724d726ceb832?s=128&d=identicon&r=PG&f=1", "display_name": "Doubt Dhanabalu", "link": "https://stackoverflow.com/users/8241998/doubt-dhanabalu"}, "edited": false, "score": 0, "creation_date": 1505939959, "post_id": 46331266, "comment_id": 79623562, "body": "@Vaishali - I have one question. The resultant value is a float. Should i make something here to convert to integer or should i take that as a separate code?"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1505940048, "post_id": 46331266, "comment_id": 79623596, "body": "Shouldn&#39;t be. When I try df.dtypes, I get IP_address    object, count          int64"}, {"owner": {"reputation": 407, "user_id": 8241998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d2f3c791ad6313a27724d726ceb832?s=128&d=identicon&r=PG&f=1", "display_name": "Doubt Dhanabalu", "link": "https://stackoverflow.com/users/8241998/doubt-dhanabalu"}, "edited": false, "score": 0, "creation_date": 1505940161, "post_id": 46331266, "comment_id": 79623648, "body": "oh, ok, I got to be float64."}, {"owner": {"reputation": 407, "user_id": 8241998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d2f3c791ad6313a27724d726ceb832?s=128&d=identicon&r=PG&f=1", "display_name": "Doubt Dhanabalu", "link": "https://stackoverflow.com/users/8241998/doubt-dhanabalu"}, "edited": false, "score": 0, "creation_date": 1505941989, "post_id": 46331266, "comment_id": 79624470, "body": "@Vaishali - The float64 is because of the internal data issue. Thank you very much for your help."}, {"owner": {"reputation": 407, "user_id": 8241998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d2f3c791ad6313a27724d726ceb832?s=128&d=identicon&r=PG&f=1", "display_name": "Doubt Dhanabalu", "link": "https://stackoverflow.com/users/8241998/doubt-dhanabalu"}, "edited": false, "score": 0, "creation_date": 1505976941, "post_id": 46331266, "comment_id": 79634295, "body": "@Vaishali - Thank you so much :)"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": true, "score": 11, "last_activity_date": 1542822959, "last_edit_date": 1542822959, "creation_date": 1505939367, "answer_id": 46331266, "question_id": 46331210, "link": "https://stackoverflow.com/questions/46331210/how-to-assign-count-of-unique-values-to-the-records-in-a-data-frame-in-python/46331266#46331266", "title": "How to assign count of unique values to the records in a data frame in python", "body": "<p>You can use value_counts() with map</p>\n\n<pre><code>df['count'] = df['IP_address'].map(df['IP_address'].value_counts())\n\n\n    IP_address  count\n0   IP1         3\n1   IP1         3\n2   IP1         3\n3   IP4         5\n4   IP4         5\n5   IP4         5\n6   IP4         5\n7   IP4         5\n8   IP7         3\n9   IP7         3\n10  IP7         3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 6994995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bc9fec370b802e76938ae8aa37d093?s=128&d=identicon&r=PG&f=1", "display_name": "NRK", "link": "https://stackoverflow.com/users/6994995/nrk"}, "is_accepted": false, "score": 1, "last_activity_date": 1505940073, "creation_date": 1505940073, "answer_id": 46331419, "question_id": 46331210, "link": "https://stackoverflow.com/questions/46331210/how-to-assign-count-of-unique-values-to-the-records-in-a-data-frame-in-python/46331419#46331419", "title": "How to assign count of unique values to the records in a data frame in python", "body": "<pre><code>ip_set = df.IP_address.unique()\ndict_temp = {}\nfor ip in ip_set:\n    dict_temp[ip] = df[df.IP_address == ip].IP_address.value_counts()[0]\ndf['counts'] = [dict_temp[ip] for ip in df.IP_address]\n</code></pre>\n\n<p>This seems to give me the sort of output that you desire</p>\n\n<p>EDIT: Vaishali's use of map is perfect</p>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1505940626, "post_id": 46331520, "comment_id": 79623851, "body": "Yes, it is quick . .. currently , I am using this method for count unique ;-)"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 9, "last_activity_date": 1505940506, "creation_date": 1505940506, "answer_id": 46331520, "question_id": 46331210, "link": "https://stackoverflow.com/questions/46331210/how-to-assign-count-of-unique-values-to-the-records-in-a-data-frame-in-python/46331520#46331520", "title": "How to assign count of unique values to the records in a data frame in python", "body": "<p>Using <code>pd.factorize</code><br>\nThis should be a very fast solution that scales well for large data</p>\n\n<pre><code>f, u = pd.factorize(df.IP_address.values)\ndf.assign(IP_address_Count=np.bincount(f)[f])\n\n   IP_address  IP_address_Count\n0         IP1                 3\n1         IP1                 3\n2         IP1                 3\n3         IP4                 5\n4         IP4                 5\n5         IP4                 5\n6         IP4                 5\n7         IP4                 5\n8         IP7                 3\n9         IP7                 3\n10        IP7                 3\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 8241998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d2f3c791ad6313a27724d726ceb832?s=128&d=identicon&r=PG&f=1", "display_name": "Doubt Dhanabalu", "link": "https://stackoverflow.com/users/8241998/doubt-dhanabalu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1178, "favorite_count": 5, "accepted_answer_id": 46331266, "answer_count": 5, "score": 8, "last_activity_date": 1564545746, "creation_date": 1505939134, "question_id": 46331210, "link": "https://stackoverflow.com/questions/46331210/how-to-assign-count-of-unique-values-to-the-records-in-a-data-frame-in-python", "title": "How to assign count of unique values to the records in a data frame in python", "body": "<p>I have a data frame like this:</p>\n\n<pre><code>IP_address\n   IP1\n   IP1\n   IP1\n   IP4\n   IP4\n   IP4\n   IP4\n   IP4\n   IP7\n   IP7\n   IP7\n</code></pre>\n\n<p>I would like to take count of unique values in this column and add the count as a variable by itself. At the end, it should look like this:</p>\n\n<pre><code>IP_address  IP_address_Count\n   IP1               3\n   IP1               3\n   IP1               3\n   IP4               5\n   IP4               5\n   IP4               5\n   IP4               5\n   IP4               5\n   IP7               3\n   IP7               3\n   IP7               3\n</code></pre>\n\n<p>I am able to take the unique values of the column using the below code:</p>\n\n<pre><code>unique_ip_address_count = (df_c_train.drop_duplicates().IP_address.value_counts()).to_dict()\n</code></pre>\n\n<p>However, I am not sure how to match these in a loop in python so that i can get the desired results in python. Any sort of help is much appreciated. </p>\n\n<p>I am not able to find a equivalent answer in stackoverflow. If there is anything please direct me there. Thank you. </p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1505997025, "post_id": 46331178, "comment_id": 79647748, "body": "This is a <a href=\"http://www.sqlite.org/faq.html#q6\" rel=\"nofollow noreferrer\">FAQ</a>."}], "answers": [{"tags": [], "owner": {"reputation": 15461, "user_id": 9642, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5c5f08d92e1ce6b99fc90e365c9b0261?s=128&d=identicon&r=PG", "display_name": "Neil C. Obremski", "link": "https://stackoverflow.com/users/9642/neil-c-obremski"}, "is_accepted": false, "score": 1, "last_activity_date": 1506007072, "creation_date": 1506007072, "answer_id": 46347618, "question_id": 46331178, "link": "https://stackoverflow.com/questions/46331178/causes-of-sqlite3-operationalerror-locking-protocol-exception/46347618#46347618", "title": "Causes of sqlite3.OperationalError &quot;locking protocol&quot; exception?", "body": "<p>SQLite3 is obviously not thread-safe as <a href=\"https://www.sqlite.org/faq.html#q6\" rel=\"nofollow noreferrer\">per the FAQ</a> but, as <a href=\"https://stackoverflow.com/users/11654/cl\">CL</a> pointed out in the comments to my question, there <em>is</em> a line relating to forking there:</p>\n\n<blockquote>\n  <p>Under Unix, you should not carry an open SQLite database across a fork() system call into the child process.</p>\n</blockquote>\n\n<p>This doesn't exactly provide an answer as to the <em>cause</em>, however it does point out a solution: close <em>ALL</em> SQLite connections in (or before) a <code>fork()</code> process! Holding onto forked connections prevents new connections from taking place across any process!</p>\n"}], "owner": {"reputation": 15461, "user_id": 9642, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5c5f08d92e1ce6b99fc90e365c9b0261?s=128&d=identicon&r=PG", "display_name": "Neil C. Obremski", "link": "https://stackoverflow.com/users/9642/neil-c-obremski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1288, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506007072, "creation_date": 1505939014, "question_id": 46331178, "link": "https://stackoverflow.com/questions/46331178/causes-of-sqlite3-operationalerror-locking-protocol-exception", "title": "Causes of sqlite3.OperationalError &quot;locking protocol&quot; exception?", "body": "<p>After enabling <a href=\"https://sqlite.org/wal.html\" rel=\"nofollow noreferrer\">Write-Ahead Log</a> mode for a volatile SQLite3 database (<code>PRAGMA journal_mode = WAL</code>), my concurrency tests began raising this error. I discovered that this happens when the Python process is forked and a connection is left open to a database in WAL mode. Any subsequent <code>execute()</code> on that database, even with a new connection, throws this <code>'locking protocol'</code> exception.</p>\n\n<p>Disabling WAL mode (<code>PRAGMA journal_mode = DELETE</code>) makes the problem disappear, and neither does any <code>'database is locked'</code> error occur either. The <code>'locking protocol'</code> exception seems reflect the <a href=\"https://sqlite.org/rescode.html#protocol\" rel=\"nofollow noreferrer\">SQLITE_PROTOCOL</a> code underneath which is documented as:</p>\n\n<blockquote>\n  <p>The SQLITE_PROTOCOL result code indicates a problem with the file locking protocol used by SQLite.</p>\n</blockquote>\n\n<p>I'm using Python 2.7.10 on Mac OS X 10.12.6 Sierra. I think the problem is in Python's <code>sqlite3</code> module and how it deals with being forked, rather than an issue in SQLite3 itself. I know now how to work around the issue but as per the main question, <strong>what is the root cause of this issue?</strong></p>\n\n<p>P.S. - I'm not using any threads and am forking by <a href=\"http://stackoverflow.com/questions/972362/spawning-process-from-python\">spawning a daemon child</a>.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2600, "user_id": 6914989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2Ar.png?s=128&g=1", "display_name": "FabienP", "link": "https://stackoverflow.com/users/6914989/fabienp"}, "edited": false, "score": 1, "creation_date": 1505939638, "post_id": 46331173, "comment_id": 79623421, "body": "Please read the <a href=\"https://docs.python.org/3/library/subprocess.html#older-high-level-api\" rel=\"nofollow noreferrer\">description of <code>subprocess.call</code></a> again, which type do you expect <code>c</code> to be?"}], "answers": [{"tags": [], "owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "is_accepted": false, "score": 0, "last_activity_date": 1505939358, "creation_date": 1505939358, "answer_id": 46331262, "question_id": 46331173, "link": "https://stackoverflow.com/questions/46331173/combine-number-and-string-gives-int-object-has-no-attribute/46331262#46331262", "title": "Combine number and string gives &#39;int&#39; object has no attribute", "body": "<p>You have the order all messed up,</p>\n\n<pre><code>password = raw_input('Enter New Password: ')\n\ncmd1, cmd2 = \"C:\\\\WINDOWS\\\\system32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\", \"Set-ADAccountPassword john -NewPassword {0} \u2013Reset\"\n\nc = subprocess.call([cmd1, cmd2.format(password)])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6200, "user_id": 1040092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/se31H.jpg?s=128&g=1", "display_name": "Wondercricket", "link": "https://stackoverflow.com/users/1040092/wondercricket"}, "is_accepted": true, "score": 0, "last_activity_date": 1505939711, "creation_date": 1505939711, "answer_id": 46331339, "question_id": 46331173, "link": "https://stackoverflow.com/questions/46331173/combine-number-and-string-gives-int-object-has-no-attribute/46331339#46331339", "title": "Combine number and string gives &#39;int&#39; object has no attribute", "body": "<p>You are applying <code>format</code> to the wrong piece of code. You are applying <code>format</code> to the returned value of <a href=\"https://docs.python.org/2/library/subprocess.html#subprocess.call\" rel=\"nofollow noreferrer\"><code>subprocess.call</code></a></p>\n\n<blockquote>\n  <p>Run the command described by args. Wait for command to complete, <strong>then return the returncode attribute.</strong></p>\n</blockquote>\n\n<p><code>returncode</code> is an <code>int</code>, which is why you are getting that error</p>\n\n<p>Based on your commands, you need to apply <code>format</code> to the 2nd argument that is being passed into <code>call</code></p>\n\n<pre><code>import subprocess\n\npassword = input('Enter New Password: ')\nc1 = \"C:\\\\WINDOWS\\\\system32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\"\nc2 = \"Set-ADAccountPassword john -NewPassword {0} \u2013Reset\".format(password)\n\nsubprocess.call([c1, c2])\n</code></pre>\n"}], "owner": {"reputation": 781, "user_id": 8644283, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f848eda3b3994c341f237c9e53f2923b?s=128&d=identicon&r=PG&f=1", "display_name": "Kade Williams", "link": "https://stackoverflow.com/users/8644283/kade-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "accepted_answer_id": 46331339, "answer_count": 2, "score": 0, "last_activity_date": 1505939711, "creation_date": 1505938991, "question_id": 46331173, "link": "https://stackoverflow.com/questions/46331173/combine-number-and-string-gives-int-object-has-no-attribute", "title": "Combine number and string gives &#39;int&#39; object has no attribute", "body": "<p>I get an 'int' object has no attribute 'format' error when I run this code\nThe reason being is the password has numbers and letters.</p>\n\n<pre><code>import subprocess\n\npassword = input('Enter New Password: ')\nc = subprocess.call([\"C:\\\\WINDOWS\\\\system32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\", \"Set-ADAccountPassword john -NewPassword {0} \u2013Reset\"])\nf = c.format(password)\n\nprint(f)\n</code></pre>\n\n<p>I've tried </p>\n\n<pre><code>f = c.format(int(password))\n</code></pre>\n\n<p>and </p>\n\n<pre><code>f = c.format(str(password))\n</code></pre>\n\n<p>Is there a way I can specify that password contains both letters and numbers?</p>\n"}, {"tags": ["python", "arrays", "apache-spark", "pyspark", "databricks"], "comments": [{"owner": {"reputation": 13552, "user_id": 5811800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e13dae9a3a73f2a7142935295239cc?s=128&d=identicon&r=PG&f=1", "display_name": "T. Gaw\u0119da", "link": "https://stackoverflow.com/users/5811800/t-gaw%c4%99da"}, "edited": false, "score": 1, "creation_date": 1505939063, "post_id": 46331102, "comment_id": 79623176, "body": "What&#39;s the type? <code>array&lt;array&lt;&gt;&gt;</code>? Please post result of <code>printSchema</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13552, "user_id": 5811800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e13dae9a3a73f2a7142935295239cc?s=128&d=identicon&r=PG&f=1", "display_name": "T. Gaw\u0119da", "link": "https://stackoverflow.com/users/5811800/t-gaw%c4%99da"}, "edited": false, "score": 1, "creation_date": 1505939795, "post_id": 46331316, "comment_id": 79623489, "body": "I couldn&#39;t recall the syntax - you were faster :D +1 and I suggest @AshleyO to also give +1 and accept :)"}, {"owner": {"reputation": 940, "user_id": 8127354, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/TZ31n.jpg?s=128&g=1", "display_name": "Ashley O", "link": "https://stackoverflow.com/users/8127354/ashley-o"}, "edited": false, "score": 0, "creation_date": 1506007309, "post_id": 46331316, "comment_id": 79655598, "body": "I should have been more clear, the data is all in one struct. I&#39;ve edited to display the information more clearly. I&#39;m testing to see if this concept can help though"}, {"owner": {"reputation": 21339, "user_id": 4964651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1vkz.jpg?s=128&g=1", "display_name": "mtoto", "link": "https://stackoverflow.com/users/4964651/mtoto"}, "edited": false, "score": 0, "creation_date": 1506009694, "post_id": 46331316, "comment_id": 79657170, "body": "so you have <code>[&quot;[[-77.1082606, 38.935738]]&quot; ,&quot;Point&quot;] </code> ?"}, {"owner": {"reputation": 940, "user_id": 8127354, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/TZ31n.jpg?s=128&g=1", "display_name": "Ashley O", "link": "https://stackoverflow.com/users/8127354/ashley-o"}, "edited": false, "score": 0, "creation_date": 1506010966, "post_id": 46331316, "comment_id": 79657894, "body": "Correct. All in one column"}], "tags": [], "owner": {"reputation": 21339, "user_id": 4964651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O1vkz.jpg?s=128&g=1", "display_name": "mtoto", "link": "https://stackoverflow.com/users/4964651/mtoto"}, "is_accepted": true, "score": 4, "last_activity_date": 1506012587, "last_edit_date": 1506012587, "creation_date": 1505939643, "answer_id": 46331316, "question_id": 46331102, "link": "https://stackoverflow.com/questions/46331102/explode-column-with-array-of-arrays-pyspark/46331316#46331316", "title": "Explode column with array of arrays - PySpark", "body": "<p>You can use <code>regexp_replace()</code> to get rid of the square brackets, and then <code>split()</code> the resulting string by the comma into separate columns.</p>\n\n<pre><code>from pyspark.sql.functions import regexp_replace, split, col\n\ndf.select(regexp_replace(df.geometry.coordinates, \"[\\[\\]]\", \"\").alias(\"coordinates\"),\n          df.geometry.type.alias(\"col3\")) \\\n  .withColumn(\"arr\", split(col(\"coordinates\"), \"\\\\,\")) \\\n  .select(col(\"arr\")[0].alias(\"col1\"),\n          col(\"arr\")[1].alias(\"col2\"),\n         \"col3\") \\\n  .drop(\"arr\") \\\n  .show(truncate = False)\n+-----------+----------+-----+\n|col1       |col2      |col3 |\n+-----------+----------+-----+\n|-77.1082606| 38.935738|Point|\n+-----------+----------+-----+\n</code></pre>\n"}], "owner": {"reputation": 940, "user_id": 8127354, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/TZ31n.jpg?s=128&g=1", "display_name": "Ashley O", "link": "https://stackoverflow.com/users/8127354/ashley-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1254, "favorite_count": 4, "accepted_answer_id": 46331316, "answer_count": 1, "score": 3, "last_activity_date": 1506013847, "creation_date": 1505938681, "last_edit_date": 1506013847, "question_id": 46331102, "link": "https://stackoverflow.com/questions/46331102/explode-column-with-array-of-arrays-pyspark", "title": "Explode column with array of arrays - PySpark", "body": "<p><strong>I have a column with data like this:</strong></p>\n\n<pre><code>[[[-77.1082606, 38.935738]] ,Point] \n</code></pre>\n\n<p><strong>I want it split out like:</strong></p>\n\n<pre><code>  column 1          column 2        column 3\n -77.1082606      38.935738           Point\n</code></pre>\n\n<p>How is that possible using PySpark, or alternatively Scala (Databricks 3.0)? I know how to explode columns but not split up these structs. Thanks!!!</p>\n\n<p><strong>EDIT: Here is the schema of the column:</strong></p>\n\n<pre><code>|-- geometry: struct (nullable = true)\n |    |-- coordinates: string (nullable = false)\n |    |-- type: string (nullable = false\n</code></pre>\n"}, {"tags": ["python", "file"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1505938899, "post_id": 46331088, "comment_id": 79623097, "body": "Your date is probably being interpreted as a directory path, i.e. &quot;&#39;LOG 20/09/2017 21:08.txt&#39;` is being interpreted as <code>LOG &#47;20&#47;09</code> etc <i>as a file path</i>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1505939348, "post_id": 46331088, "comment_id": 79623300, "body": "So,  simple solution, use <code>nows = time.strftime(&quot;%d-%m-%Y %H:%M&quot;)</code>. Also, you are going to want to <code>.close()</code> your  before you terminate the program, or else you might not write everything in the buffer."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1505940119, "post_id": 46331088, "comment_id": 79623630, "body": "Yes, I closed this as a duplicate of a shell question, but it&#39;s one with the exact same underlying problem."}, {"owner": {"reputation": 15, "user_id": 6909772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c142b233706d868ade347103ff98367?s=128&d=identicon&r=PG&f=1", "display_name": "Tombomb12", "link": "https://stackoverflow.com/users/6909772/tombomb12"}, "edited": false, "score": 0, "creation_date": 1505941458, "post_id": 46331088, "comment_id": 79624229, "body": "Ok thank you for marking it as a duplicate. I could not find the other questions with the same issue I do apologise."}], "answers": [{"tags": [], "owner": {"reputation": 5056, "user_id": 8472976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808aa1971d8e50ab541e1f54a705afad?s=128&d=identicon&r=PG&f=1", "display_name": "MegaIng", "link": "https://stackoverflow.com/users/8472976/megaing"}, "is_accepted": true, "score": 0, "last_activity_date": 1505939740, "creation_date": 1505939740, "answer_id": 46331346, "question_id": 46331088, "link": "https://stackoverflow.com/questions/46331088/struggling-with-files/46331346#46331346", "title": "Struggling with Files", "body": "<p>As @juanpa pointed out, your date is interpretate as a path so it tries to open a file inside the directory \"LOG 20/09/\" with the name \"2017 21:08.txt\". To fix this just replace \"/\" with \"_\" inside your strftime call in line 8. Also, I dont thing the open mode \"w+\" can create files. Just use \"w\".</p>\n"}], "owner": {"reputation": 15, "user_id": 6909772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c142b233706d868ade347103ff98367?s=128&d=identicon&r=PG&f=1", "display_name": "Tombomb12", "link": "https://stackoverflow.com/users/6909772/tombomb12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "closed_date": 1505940100, "accepted_answer_id": 46331346, "answer_count": 1, "score": 0, "last_activity_date": 1505939740, "creation_date": 1505938620, "question_id": 46331088, "link": "https://stackoverflow.com/questions/46331088/struggling-with-files", "closed_reason": "Duplicate", "title": "Struggling with Files", "body": "<p>I am currently doing a project were I need to make a text file. but the python program does not make a file I have trawled many forums and tried everything I do not know what is happening. I have included the code and error message below.</p>\n\n<pre><code>import time\nimport sys \nimport os\nimport datetime\nfrom pathlib import Path\n\ncont = True\nnows = time.strftime(\"%d/%m/%Y %H:%M\")\ntst = datetime.datetime.now().isoformat(\"-\").split(\".\")[0].replace(\":\",\"-\")\nf = open(\"LOG %s.txt\" % nows, \"w+\")\nf.write('Start time, End time, Callsign, Report, Report sent, Serial, locator, comments')\n\nwhile cont == True:\n    now = datetime.datetime.now()\n    callsign = input(\"Callsign : \")\n    start = now\n    print(now)\n    rst_rc = input(\"Signal report recived: \")\n    rst_st = input(\"Signal report semt: \")\n    ser = input(\"Serial number: \")\n    loc = input(\"Locator: \")\n    comment = input(\"Comments: \")\n    end = now\n    print(now)\n    f.write(start, end, callsign, rst_rc, rst_st, ser, loc, comment)\n\ncontin = input(\"Do you want another call? \")\nif contin == \"y\":\n    cont = False\n    sys.exit()\n</code></pre>\n\n<p>Below is the error I get:</p>\n\n<pre><code>traceback (most recent call last):\n  File \"/Users/thomasscott/Desktop/Py-qso/py-qso.py\", line 10, in &lt;module&gt;\n    f = open(\"LOG %s.txt\" % nows, \"w+\")\nFileNotFoundError: [Errno 2] No such file or directory: 'LOG 20/09/2017 21:08.txt'\n</code></pre>\n"}, {"tags": ["python", "linux"], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 3830784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e99c42399c833b0ace266cd1b49806e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3830784", "link": "https://stackoverflow.com/users/3830784/user3830784"}, "edited": false, "score": 0, "creation_date": 1505941678, "post_id": 46331282, "comment_id": 79624331, "body": "When I run this, the first print message prints &quot;/bin/config/Profile.ini&quot;, when the file (on this machine) under &quot;/home/vagrant/bin/config/Profile.ini&quot;.  Then it is unable to find the ini file, and of course, fails."}, {"owner": {"reputation": 1428, "user_id": 8489834, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lDNZXjwpIwQ/AAAAAAAAAAI/AAAAAAAAACU/5Jx0up57I9Y/photo.jpg?sz=128", "display_name": "Yaroslav Surzhikov", "link": "https://stackoverflow.com/users/8489834/yaroslav-surzhikov"}, "reply_to_user": {"reputation": 335, "user_id": 3830784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e99c42399c833b0ace266cd1b49806e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3830784", "link": "https://stackoverflow.com/users/3830784/user3830784"}, "edited": false, "score": 0, "creation_date": 1505941934, "post_id": 46331282, "comment_id": 79624443, "body": "So, looks like there is no <code>$HOME</code> variable in your shell. You can setup it from python code ( <code>os.environ[HOME] = &#39;&#47;home&#47;vagrant&#39;</code> ) or provide as default ( replace <code>os.environ[&#39;HOME&#39;]</code> with <code>os.environ.get(&#39;HOME&#39;,  &#39;&#47;home&#47;vagrant&#39;</code> )"}], "tags": [], "owner": {"reputation": 1428, "user_id": 8489834, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lDNZXjwpIwQ/AAAAAAAAAAI/AAAAAAAAACU/5Jx0up57I9Y/photo.jpg?sz=128", "display_name": "Yaroslav Surzhikov", "link": "https://stackoverflow.com/users/8489834/yaroslav-surzhikov"}, "is_accepted": true, "score": 2, "last_activity_date": 1505939497, "creation_date": 1505939497, "answer_id": 46331282, "question_id": 46331079, "link": "https://stackoverflow.com/questions/46331079/unable-to-locate-a-config-with-configparser/46331282#46331282", "title": "Unable to locate a config with ConfigParser", "body": "<p>That's because you are trying to use the shell variables in the python.</p>\n\n<p>I took the liberty of slightly adjusting your code according to the standard of PEP8 ( including bug fix ): </p>\n\n<pre><code>import ConfigParser\nimport os\n\n\nclass ConfigManager(object):\n    \"\"\"docstring for ConfigManager.\"\"\"\n    def __init__(self):\n        super(ConfigManager, self).__init__()\n        self.path = os.path.join(\n            os.environ['HOME'],\n            'bin/config'\n        )\n\n    def get_config(self):\n        parser = ConfigParser.ConfigParser()\n        print(os.path.join(self.path, 'Profile.ini'))\n        parser.read(\n            os.path.join(self.path, 'Profile.ini')\n        )\n        for section_name in parser.sections():\n            print('Section:', section_name)\n            print('  Options:', parser.options(section_name))\n            for name, value in parser.items(section_name):\n                print('  %s = %s' % (name, value))\n            print()\n\n        config_path = os.path.join(\n            self.path,\n            parser.get('Profiles', 'ActiveProfile'),\n            'Configuration.ini'\n        )\n        config_profile = parser.read(config_path)\n        print(config_profile)\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 3830784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e99c42399c833b0ace266cd1b49806e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3830784", "link": "https://stackoverflow.com/users/3830784/user3830784"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 46331282, "answer_count": 1, "score": 0, "last_activity_date": 1505939497, "creation_date": 1505938589, "question_id": 46331079, "link": "https://stackoverflow.com/questions/46331079/unable-to-locate-a-config-with-configparser", "title": "Unable to locate a config with ConfigParser", "body": "<p>I am attempting to open a configuration file, read a value, and then use that value to open another configuration file.  Specifically, my config files are located under $HOME/bin/config, in a file named Profile.ini.  Then, this gives me the info of whether I should be opening another config named Configuration.ini that is located in either $HOME/bin/config/config1, $HOME/bin/config/config2.  The python code itself is being run from $HOME/TestSystems.  However, when I attempt to run this code, it ends up not finding the configuration file and being unable to open it.  Below is my code:</p>\n\n<pre><code>import ConfigParser\n\nclass ConfigManager(object):\n    \"\"\"docstring for ConfigManager.\"\"\"\n    def __init__(self):\n        super(ConfigManager, self).__init__()\n        self.path = '$HOME/bin/config/'\n\n    def getConfig(self):\n        path = ConfigParser.ConfigParser()\n        print self.path+'Profile.ini'\n        path.read(self.path+'Profile.ini')\n        for sectionName in path.sections():\n            print 'Section:', sectionName\n            print '  Options:', path.options(sectionName)\n            for name, value in path.items(sectionName):\n                print '  %s = %s' % (name, value)\n            print\n        activeProfile = path.get('Profiles', 'ActiveProfile')\n        configPath = self.path + activeProfile + '/Configuration.ini'\n        config = ConfigParser.ConfigParser()\n        configProfile = config.read(configPath)\n</code></pre>\n\n<p>When I run this code, I get the following output:</p>\n\n<pre><code>$HOME/bin/config/Profile.ini\nTraceback (most recent call last):\n\nactiveProfile = path.get('Profiles', 'ActiveProfile')\nConfigParser.NoSectionError: No section: 'Profiles'\n</code></pre>\n\n<p>Which means that this code isn't finding the configuration and opening it properly.  I'm trying to figure out what is wrong with this code and what I need to do to make it work properly</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql", "spark-dataframe"], "answers": [{"comments": [{"owner": {"reputation": 13552, "user_id": 5811800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e13dae9a3a73f2a7142935295239cc?s=128&d=identicon&r=PG&f=1", "display_name": "T. Gaw\u0119da", "link": "https://stackoverflow.com/users/5811800/t-gaw%c4%99da"}, "edited": false, "score": 0, "creation_date": 1505938992, "post_id": 46331169, "comment_id": 79623146, "body": "As far as I remember, it will only add additional step of final aggregation on executor instead of driver in Spark SQL groupBy + aggregation."}, {"owner": {"reputation": 129, "user_id": 3150024, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0836131bb9ab7ce0ff011a56d9e7016d?s=128&d=identicon&r=PG&f=1", "display_name": "user3150024", "link": "https://stackoverflow.com/users/3150024/user3150024"}, "edited": false, "score": 0, "creation_date": 1505941204, "post_id": 46331169, "comment_id": 79624107, "body": "Thank you for your reply. Can&#39;t we apply reduceByKey over dataframe? Many articles telling same thing as reduceByKey is faster than group by for large dataset since group by reducing the number of rows at the final stage."}, {"owner": {"reputation": 13552, "user_id": 5811800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e13dae9a3a73f2a7142935295239cc?s=128&d=identicon&r=PG&f=1", "display_name": "T. Gaw\u0119da", "link": "https://stackoverflow.com/users/5811800/t-gaw%c4%99da"}, "reply_to_user": {"reputation": 129, "user_id": 3150024, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0836131bb9ab7ce0ff011a56d9e7016d?s=128&d=identicon&r=PG&f=1", "display_name": "user3150024", "link": "https://stackoverflow.com/users/3150024/user3150024"}, "edited": false, "score": 0, "creation_date": 1505941831, "post_id": 46331169, "comment_id": 79624393, "body": "@user3150024 Those articles are about RDDs - Datasets has an abstraction layer and Catalyst optimizer optimizes queries :)"}, {"owner": {"reputation": 129, "user_id": 3150024, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0836131bb9ab7ce0ff011a56d9e7016d?s=128&d=identicon&r=PG&f=1", "display_name": "user3150024", "link": "https://stackoverflow.com/users/3150024/user3150024"}, "edited": false, "score": 0, "creation_date": 1505963874, "post_id": 46331169, "comment_id": 79630049, "body": "Is there any other way to improve performance ? Tried to increase the number of executors but it is not reflecting and only two core running out of 8 vcores. Shall I convert that dataframe into RDD and apply reduceByKey. Will that work ?"}, {"owner": {"reputation": 22506, "user_id": 7579547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e064cb6036830f4883abb0450f6afd7e?s=128&d=identicon&r=PG", "display_name": "Shaido", "link": "https://stackoverflow.com/users/7579547/shaido"}, "reply_to_user": {"reputation": 129, "user_id": 3150024, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0836131bb9ab7ce0ff011a56d9e7016d?s=128&d=identicon&r=PG&f=1", "display_name": "user3150024", "link": "https://stackoverflow.com/users/3150024/user3150024"}, "edited": false, "score": 0, "creation_date": 1505967636, "post_id": 46331169, "comment_id": 79630891, "body": "@user3150024 dataframe&#39;s <code>groupBy</code> and <code>agg</code> should be at least as fast as <code>reduceByKey</code>. It sounds as you have some other problem related to the cluster settings."}, {"owner": {"reputation": 129, "user_id": 3150024, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0836131bb9ab7ce0ff011a56d9e7016d?s=128&d=identicon&r=PG&f=1", "display_name": "user3150024", "link": "https://stackoverflow.com/users/3150024/user3150024"}, "edited": false, "score": 0, "creation_date": 1505974085, "post_id": 46331169, "comment_id": 79632865, "body": "My script is running for 5 mins in PySpark- shell but same script running 15 mins in Spark-submit in CLI. Tried in both YARN client and cluster mode. Still wondering why this much difference and doesn&#39;t have any clue on that. Same posted in <a href=\"https://stackoverflow.com/questions/46307302/how-pyspark-shell-is-faster-than-cli\" title=\"how pyspark shell is faster than cli\">stackoverflow.com/questions/46307302/&hellip;</a>"}, {"owner": {"reputation": 13552, "user_id": 5811800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e13dae9a3a73f2a7142935295239cc?s=128&d=identicon&r=PG&f=1", "display_name": "T. Gaw\u0119da", "link": "https://stackoverflow.com/users/5811800/t-gaw%c4%99da"}, "reply_to_user": {"reputation": 22506, "user_id": 7579547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e064cb6036830f4883abb0450f6afd7e?s=128&d=identicon&r=PG", "display_name": "Shaido", "link": "https://stackoverflow.com/users/7579547/shaido"}, "edited": false, "score": 0, "creation_date": 1505990394, "post_id": 46331169, "comment_id": 79643262, "body": "@Shaido Thanks. @user3150024 Try setting <code>spark.sql.shuffle.partitions</code> to lower number, by default it&#39;s 200"}], "tags": [], "owner": {"reputation": 13552, "user_id": 5811800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e13dae9a3a73f2a7142935295239cc?s=128&d=identicon&r=PG&f=1", "display_name": "T. Gaw\u0119da", "link": "https://stackoverflow.com/users/5811800/t-gaw%c4%99da"}, "is_accepted": false, "score": 2, "last_activity_date": 1505990362, "last_edit_date": 1505990362, "creation_date": 1505938976, "answer_id": 46331169, "question_id": 46331077, "link": "https://stackoverflow.com/questions/46331077/how-to-convert-groupby-into-reducebykey-in-pyspark-dataframe/46331169#46331169", "title": "How to convert groupby into reducebykey in pyspark dataframe?", "body": "<p>There's no <code>reduceByKey</code> in Spark SQL.</p>\n\n<p><code>groupBy</code> + aggregation function will work almost identical as RDD.reduceByKey. Spark will automatically choose if it should be similar to <code>RDD.groupByKey</code> (i.e. for collect_list) or to <code>RDD.reduceByKey</code></p>\n\n<p>The performance of Dataset.groupBy + aggregation function should be better or equal to RDD.reduceByKey. Catalyst optimizer takes care how to do aggregation in the background</p>\n"}], "owner": {"reputation": 129, "user_id": 3150024, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0836131bb9ab7ce0ff011a56d9e7016d?s=128&d=identicon&r=PG&f=1", "display_name": "user3150024", "link": "https://stackoverflow.com/users/3150024/user3150024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3623, "favorite_count": 2, "closed_date": 1524572990, "answer_count": 1, "score": 1, "last_activity_date": 1505990362, "creation_date": 1505938589, "question_id": 46331077, "link": "https://stackoverflow.com/questions/46331077/how-to-convert-groupby-into-reducebykey-in-pyspark-dataframe", "closed_reason": "Duplicate", "title": "How to convert groupby into reducebykey in pyspark dataframe?", "body": "<p>I have written pyspark code with group by and sum function. I feel performance affected due to group by. Instead I want to use reducebykey. But I am new to this area. Please find my scenario below,</p>\n\n<p>Step 1: read hive table join query data thru sqlcontext and store in dataframe</p>\n\n<p>Step2: total number of input columns are 15. In that 5 are key fields and remaining are numeric values. </p>\n\n<p>Step3: Along with above input columns few more columns need to be derived from numeric columns. Few columns with default values.</p>\n\n<p>Step 4: I have used group by and sum function. How to do similar logics with spark way with map and reducebykey option.</p>\n\n<pre><code>from pyspark.sql.functions import col, when, lit, concat, round, sum\n\n#sample data\ndf = sc.parallelize([(1, 2, 3, 4), (5, 6, 7, 8)]).toDF([\"col1\", \"col2\", \"col3\", \"col4\"])\n\n#populate col5, col6, col7\ncol5 = when((col('col1') == 0) &amp; (col('col3') != 0), round(col('col4')/ col('col3'), 2)).otherwise(0)\ncol6 = when((col('col1') == 0) &amp; (col('col4') != 0), round((col('col3') * col('col4'))/ col('col1'), 2)).otherwise(0)\ncol7 = col('col2')\ndf1 = df.withColumn(\"col5\", col5).\\\n    withColumn(\"col6\", col6).\\\n    withColumn(\"col7\", col7)\n\n#populate col8, col9, col10\ncol8 = when((col('col1') != 0) &amp; (col('col3') != 0), round(col('col4')/ col('col3'), 2)).otherwise(0)\ncol9 = when((col('col1') != 0) &amp; (col('col4') != 0), round((col('col3') * col('col4'))/ col('col1'), 2)).otherwise(0)\ncol10= concat(col('col2'), lit(\"_NEW\"))\ndf2 = df.withColumn(\"col5\", col8).\\\n    withColumn(\"col6\", col9).\\\n    withColumn(\"col7\", col10)\n\n#final dataframe\nfinal_df = df1.union(df2)\nfinal_df.show()\n\n#groupBy calculation\n#final_df.groupBy(\"col1\", \"col2\", \"col3\", \"col4\").agg(sum(\"col5\")).show()from pyspark.sql.functions import col, when, lit, concat, round, sum\n\n#sample data\ndf = sc.parallelize([(1, 2, 3, 4), (5, 6, 7, 8)]).toDF([\"col1\", \"col2\", \"col3\", \"col4\"])\n\n#populate col5, col6, col7\ncol5 = when((col('col1') == 0) &amp; (col('col3') != 0), round(col('col4')/ col('col3'), 2)).otherwise(0)\ncol6 = when((col('col1') == 0) &amp; (col('col4') != 0), round((col('col3') * col('col4'))/ col('col1'), 2)).otherwise(0)\ncol7 = col('col2')\ndf1 = df.withColumn(\"col5\", col5).\\\n    withColumn(\"col6\", col6).\\\n    withColumn(\"col7\", col7)\n\n#populate col8, col9, col10\ncol8 = when((col('col1') != 0) &amp; (col('col3') != 0), round(col('col4')/ col('col3'), 2)).otherwise(0)\ncol9 = when((col('col1') != 0) &amp; (col('col4') != 0), round((col('col3') * col('col4'))/ col('col1'), 2)).otherwise(0)\ncol10= concat(col('col2'), lit(\"_NEW\"))\ndf2 = df.withColumn(\"col5\", col8).\\\n    withColumn(\"col6\", col9).\\\n    withColumn(\"col7\", col10)\n\n#final dataframe\nfinal_df = df1.union(df2)\nfinal_df.show()\n\n#groupBy calculation\nfinal_df.groupBy(\"col1\", \"col2\", \"col3\", \"col4\").agg(sum(\"col5\")........sum(\"coln\")).show()\n</code></pre>\n"}, {"tags": ["python", "pandas", "csv", "chunks"], "answers": [{"comments": [{"owner": {"reputation": 2661, "user_id": 3768495, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/085b9585d2608c6356c01e6342ad43be?s=128&d=identicon&r=PG&f=1", "display_name": "user3768495", "link": "https://stackoverflow.com/users/3768495/user3768495"}, "edited": false, "score": 0, "creation_date": 1505939648, "post_id": 46331030, "comment_id": 79623425, "body": "I got the idea! But it throws out an error: <code>Generator expression must be parenthesized if not sole argument</code>. And then I tried: <code>df=pd.concat((chunk.set_index(&#39;ID&#39;).astype(bool)) for chunk in chunks, ignore_index=True)</code>, still same error... Maybe I added the parenthesis in the wrong place?"}, {"owner": {"reputation": 2661, "user_id": 3768495, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/085b9585d2608c6356c01e6342ad43be?s=128&d=identicon&r=PG&f=1", "display_name": "user3768495", "link": "https://stackoverflow.com/users/3768495/user3768495"}, "edited": false, "score": 0, "creation_date": 1505943280, "post_id": 46331030, "comment_id": 79624975, "body": "Hi @MaxU, I tried that myself too. Still same error. Could it be due to different versions of Python/Pandas? My Python is 2.7.13, and my pandas is 0.20.2. Thank you!"}, {"owner": {"reputation": 2661, "user_id": 3768495, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/085b9585d2608c6356c01e6342ad43be?s=128&d=identicon&r=PG&f=1", "display_name": "user3768495", "link": "https://stackoverflow.com/users/3768495/user3768495"}, "edited": false, "score": 0, "creation_date": 1505947681, "post_id": 46331030, "comment_id": 79626505, "body": "After some trial and error, I found that after the <code>ignore_index=True</code> part is deleted, the code works. So here&#39;s what is working for me now `df=pd.concat((chunk.set_index(&#39;ID&#39;).astype(bool)) for chunk in chunks)&#39;."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1505943993, "last_edit_date": 1505943993, "creation_date": 1505938399, "answer_id": 46331030, "question_id": 46331009, "link": "https://stackoverflow.com/questions/46331009/how-to-process-all-but-one-column-before-concatenating-chunks-when-use-chunks-to/46331030#46331030", "title": "how to process all but one column before concatenating chunks when use chunks to read large csv file", "body": "<p>Try this:</p>\n\n<pre><code>chunks = pd.read_csv('input_filename', chunksize=500000, index_col='ID')\ndf = pd.concat([chunk.astype(bool) for chunk in chunks]).reset_index()\n</code></pre>\n"}], "owner": {"reputation": 2661, "user_id": 3768495, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/085b9585d2608c6356c01e6342ad43be?s=128&d=identicon&r=PG&f=1", "display_name": "user3768495", "link": "https://stackoverflow.com/users/3768495/user3768495"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 46331030, "answer_count": 1, "score": 1, "last_activity_date": 1505943993, "creation_date": 1505938307, "question_id": 46331009, "link": "https://stackoverflow.com/questions/46331009/how-to-process-all-but-one-column-before-concatenating-chunks-when-use-chunks-to", "title": "how to process all but one column before concatenating chunks when use chunks to read large csv file", "body": "<p>I have a large csv file (7GB) and I used these codes to read it in Pandas:</p>\n\n<pre><code>chunks=pd.read_table('input_filename', chunksize=500000)\ndf=pd.DataFrame()\ndf=pd.concat((chunk==1) for chunk in chunks)\n</code></pre>\n\n<p>This works for me because the file is one-hot encoded, so the <code>chunk==1</code> part convert 0s and 1s into boolean values, which saved me some memory usage.</p>\n\n<p>Now I want to use this same method to read in another file, the only problem is that the new file has an <code>ID</code> column, which is not one-hot encoded. My question is: how can I keep the <code>ID</code> column intact and convert the rest columns in the same way? </p>\n\n<p>I tried some subsetting techniques, including:</p>\n\n<p><code>df=pd.concat((chunk.loc[:, -1]==1) for chunk in chunks)</code></p>\n\n<p>but none of them worked so far. </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["python", "python-2.7", "python-unittest"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505938543, "post_id": 46331007, "comment_id": 79622914, "body": "You say you&#39;re writing unit tests. Have you mocked anything?"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1505938575, "post_id": 46331007, "comment_id": 79622933, "body": "Without knowing what <code>create_instance</code> does it could return anything. You probably need to include <code>type(api)</code> and <code>type(api) is SomeApi</code>. It could also be that you import the module twice by using <code>importlib</code> in which case it could be the same class but due to the reloading it&#39;s not considered identical."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1505938643, "post_id": 46331007, "comment_id": 79622965, "body": "-1  This is too dumbed down code example to actually reproduce anything.  Since you have <code>from path.to.imported_api import SomeApi</code> just above, the dynamic importlib line will not do anything, it will just use the already existing module sitting in <code>sys.modules</code>."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1505938746, "post_id": 46331007, "comment_id": 79623021, "body": "@wim Not necessarily, I had some weird cases where <code>import_module</code> did load the module again. I don&#39;t remember what caused this anymore though."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1505938816, "post_id": 46331007, "comment_id": 79623054, "body": "@MSeifert  yes, necessarily.  it&#39;s the exact same path twice:  &quot;path.to.imported_api&quot;."}, {"owner": {"reputation": 131, "user_id": 5692700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b2969408288806ee76cbb4a400fbea?s=128&d=identicon&r=PG&f=1", "display_name": "jhall1990", "link": "https://stackoverflow.com/users/5692700/jhall1990"}, "edited": false, "score": 0, "creation_date": 1505941066, "post_id": 46331007, "comment_id": 79624050, "body": "create_instance() simply returns an instance of SomeApi(), that is all.  My questions is why is the object I create using import_module not an instance of SomeApi() even though they both have the same exact output when doing a type()?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1505950972, "post_id": 46331007, "comment_id": 79627337, "body": "You have to edit your question to show the real differences between the import like <code>from path.to.imported_api import SomeApi</code> and the import like <code>importlib.import_module(&quot;path.to.imported_api&quot;)</code>.  And you should probably include the code for the <code>create_instance()</code> function too.  At the moment, this is not a satisfactory <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> and your question will be downvoted and [likely] closed accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 5056, "user_id": 8472976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808aa1971d8e50ab541e1f54a705afad?s=128&d=identicon&r=PG&f=1", "display_name": "MegaIng", "link": "https://stackoverflow.com/users/8472976/megaing"}, "is_accepted": false, "score": -2, "last_activity_date": 1505938728, "creation_date": 1505938728, "answer_id": 46331117, "question_id": 46331007, "link": "https://stackoverflow.com/questions/46331007/two-objects-created-from-the-same-class-isinstance-false/46331117#46331117", "title": "Two Objects Created from the Same Class, isinstance = False", "body": "<p>There are a few things that could cause that:\nSo first, it could be that the api is just returning something that looks like SomeApi(). Also it coud is be that SomeApi is overwriting isinstance behaviour.</p>\n"}], "owner": {"reputation": 131, "user_id": 5692700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b2969408288806ee76cbb4a400fbea?s=128&d=identicon&r=PG&f=1", "display_name": "jhall1990", "link": "https://stackoverflow.com/users/5692700/jhall1990"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1505938728, "creation_date": 1505938300, "question_id": 46331007, "link": "https://stackoverflow.com/questions/46331007/two-objects-created-from-the-same-class-isinstance-false", "title": "Two Objects Created from the Same Class, isinstance = False", "body": "<p>I'm trying to create some unit tests for some code here at work.</p>\n\n<p>The code takes in an object and based on information within that object imports a specific module then creates an instance of it.</p>\n\n<p>The test I am trying to write creates the object and then I check that it is an instance of the class I expect it to import. The issue is the isinstance check is failing.</p>\n\n<p>Here is what my test looks like.</p>\n\n<pre><code>import importlib\nfrom path.to.imported_api import SomeApi\n\napi = importlib.import_module(\"path.to.imported_api\").create_instance()  # create_instance() is a function that returns SomeApi().\n\nassert isinstance(api, SomeApi)  # This returns false, but I am not sure why.\n</code></pre>\n"}, {"tags": ["python", "opencv", "gdal"], "comments": [{"owner": {"reputation": 20746, "user_id": 1233251, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/cI9GF.png?s=128&g=1", "display_name": "E_net4 says don&#39;t copy that", "link": "https://stackoverflow.com/users/1233251/e-net4-says-dont-copy-that"}, "edited": false, "score": 0, "creation_date": 1505938324, "post_id": 46330967, "comment_id": 79622803, "body": "Yes, you have to avoid loading the whole data into memory. You should find an API which allows for a selective or chunk-based loading of the image from the file. Recommending one isn&#39;t a good fit for Stack Overflow, so I would suggest googling for one."}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 3, "creation_date": 1505938341, "post_id": 46330967, "comment_id": 79622814, "body": "Make the tiles ovarlap, discard the overlapping parts when putting them together."}, {"owner": {"reputation": 6703, "user_id": 249810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41073fa4fa33840f81aceaefff9ec31c?s=128&d=identicon&r=PG", "display_name": "ezod", "link": "https://stackoverflow.com/users/249810/ezod"}, "reply_to_user": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1505938544, "post_id": 46330967, "comment_id": 79622915, "body": "To my knowledge, all of the available <a href=\"http://tanbakuchi.com/posts/comparison-of-openv-interpolation-algorithms/\" rel=\"nofollow noreferrer\">interpolation algorithms</a> use information from some neighbourhood around the pixel, which is why you&#39;ll see differences at the mosaic edges. @Goyo&#39;s suggestion is one possible solution; overlap the tiles enough to cover the interpolation neighbourhood."}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1505938685, "post_id": 46330967, "comment_id": 79622984, "body": "Besides, you do not really want to resize a geotiff but resample it."}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1505939104, "post_id": 46330967, "comment_id": 79623193, "body": "@Knulph You might want to check if gdalwarp can do it for you."}], "answers": [{"tags": [], "owner": {"reputation": 774, "user_id": 6747353, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uHyL7.jpg?s=128&g=1", "display_name": "Osian", "link": "https://stackoverflow.com/users/6747353/osian"}, "is_accepted": false, "score": 3, "last_activity_date": 1529503424, "last_edit_date": 1592644375, "creation_date": 1529503424, "answer_id": 50950127, "question_id": 46330967, "link": "https://stackoverflow.com/questions/46330967/resize-a-large-image-that-does-not-fit-into-memory/50950127#50950127", "title": "resize a large image that does not fit into memory", "body": "<p>As Goyo has already commented, you can use <a href=\"http://www.gdal.org/gdalwarp.html\" rel=\"nofollow noreferrer\">gdalwarp</a> to resample the image. If you are a Mac or Linux user, you can run gdalwarp directly from the command line:</p>\n<pre><code>gdalwarp -of GTiff -co COMPRESS=DEFLATE -ts 20000 20000 -r cubic InputImage.tif OutputImage.tif\n</code></pre>\n<p>The -ts option allows you to specify the target size of the output raster (width, height).</p>\n<p>gdalwarp has several resampling methods, but the cubic or bilinear algorithms are the most widely used within the remote sensing and GIS community.</p>\n"}], "owner": {"reputation": 83, "user_id": 4937343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3a85ae9e8c53ee7fdf220851bdb950f?s=128&d=identicon&r=PG&f=1", "display_name": "Knulph", "link": "https://stackoverflow.com/users/4937343/knulph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1529503424, "creation_date": 1505938138, "question_id": 46330967, "link": "https://stackoverflow.com/questions/46330967/resize-a-large-image-that-does-not-fit-into-memory", "title": "resize a large image that does not fit into memory", "body": "<p>I have a large GeoTiff (let`s say 200,000 by 200,000 pixels) that I need to resize using, for example, opencv or gdal.\nThe problem I am facing is that I cannot load the entire image into memory, so something like:</p>\n\n<pre><code>data_out = cv2.resize(data_in, dsize=dsize, interpolation=cv2.INTER_AREA)\n</code></pre>\n\n<p>is not doable. I thought to tile (or read) the large image into several smaller images (with their own geo-information) so that I can resized each of them individually and then mosaic them back together.\nHowever, this approach seems to suffer at the edges, creating discontinuities across the mosaiced output.</p>\n\n<p>Is there any way I can resize the large image without loading the whole data into memory?</p>\n"}, {"tags": ["python", "azure", "smtp", "sendgrid", "smtplib"], "answers": [{"comments": [{"owner": {"reputation": 7241, "user_id": 1451512, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cEjMm.gif?s=128&g=1", "display_name": "dopplesoldner", "link": "https://stackoverflow.com/users/1451512/dopplesoldner"}, "edited": false, "score": 0, "creation_date": 1505939040, "post_id": 46331099, "comment_id": 79623165, "body": "Thanks for the answer. The fundamental problem is that SMTP sending is blocked on Microsoft Azure (and I suspect AWS too) and they recommend using a relay service such as sendgrid. However if I have to modify sendgrid to use smtp, i suspect i&#39;ll run into the Azure blocking issue either way."}, {"owner": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "reply_to_user": {"reputation": 7241, "user_id": 1451512, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cEjMm.gif?s=128&g=1", "display_name": "dopplesoldner", "link": "https://stackoverflow.com/users/1451512/dopplesoldner"}, "edited": false, "score": 0, "creation_date": 1505939895, "post_id": 46331099, "comment_id": 79623538, "body": "you have to create an API endpoint close to your SMTP server that acts as a relay. You go out from azure in HTTPS and point toward the API endpoint. You can close this question, there is no way we can answer your question ;)"}], "tags": [], "owner": {"reputation": 3004, "user_id": 6451244, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-YX-fKMoU-ps/AAAAAAAAAAI/AAAAAAAAACE/qDO4Xj_LSFk/photo.jpg?sz=128", "display_name": "Jonathan DEKHTIAR", "link": "https://stackoverflow.com/users/6451244/jonathan-dekhtiar"}, "is_accepted": false, "score": 2, "last_activity_date": 1505938673, "creation_date": 1505938673, "answer_id": 46331099, "question_id": 46330958, "link": "https://stackoverflow.com/questions/46330958/sendgrid-how-to-specify-recipient-smtp-server/46331099#46331099", "title": "sendgrid - how to specify recipient SMTP server?", "body": "<p>That's quite normal, the python package for sendgrid does not use the smtp protocol, but actually request an API which use classical HTTPS requests... </p>\n\n<p>So, except if your smtp server can be accessed over an API (custom-made?), there's no chance you can use the sendgrid package.</p>\n\n<p>If you want to customise the python package for sendgrid in order to point toward your own API endpoint which will act as relay for your smtp requests, you are free to modify its source code: <a href=\"https://github.com/sendgrid/sendgrid-python\" rel=\"nofollow noreferrer\">https://github.com/sendgrid/sendgrid-python</a></p>\n"}, {"tags": [], "owner": {"reputation": 2792, "user_id": 7792662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/685ebb2478e4ff7ad0dd18a0cb9da5ea?s=128&d=identicon&r=PG&f=1", "display_name": "Kalana Demel", "link": "https://stackoverflow.com/users/7792662/kalana-demel"}, "is_accepted": false, "score": 0, "last_activity_date": 1505976499, "creation_date": 1505976499, "answer_id": 46337208, "question_id": 46330958, "link": "https://stackoverflow.com/questions/46330958/sendgrid-how-to-specify-recipient-smtp-server/46337208#46337208", "title": "sendgrid - how to specify recipient SMTP server?", "body": "<p>Alternatively you can use port 2525 since all major smtp vendors support it and its not blocked by Azure as far as I know. But if your smtp server is something not from a major vendor and you do not have access to it to change/add ports you have no option but to go to a service other than Azure for hosting which might be hard since all major vendors now block 25, 465, 587. </p>\n"}], "owner": {"reputation": 7241, "user_id": 1451512, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cEjMm.gif?s=128&g=1", "display_name": "dopplesoldner", "link": "https://stackoverflow.com/users/1451512/dopplesoldner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505976499, "creation_date": 1505938090, "question_id": 46330958, "link": "https://stackoverflow.com/questions/46330958/sendgrid-how-to-specify-recipient-smtp-server", "title": "sendgrid - how to specify recipient SMTP server?", "body": "<p>I am trying to send emails to a private SMTP server and can do so using python <code>smtplib</code> as follows</p>\n\n<pre><code>s = smtplib.SMTP(server, port)\ns.sendmail(me, you, msg.as_string())\n</code></pre>\n\n<p>Trying to convert the same to <strong>Sendgrid</strong> (as Azure blocks SMTP) but it has no option to specify a private SMTP server. </p>\n\n<pre><code>import sendgrid\nimport os\nfrom sendgrid.helpers.mail import *\n\nsg = sendgrid.SendGridAPIClient(apikey=os.environ.get('SENDGRID_API_KEY'))\nfrom_email = Email(\"test@example.com\")\nto_email = Email(\"test@example.com\")\nsubject = \"Sending with SendGrid is Fun\"\ncontent = Content(\"text/plain\", \"and easy to do anywhere, even with Python\")\nmail = Mail(from_email, subject, to_email, content)\nresponse = sg.client.mail.send.post(request_body=mail.get())\nprint(response.status_code)\nprint(response.body)\nprint(response.headers)\n</code></pre>\n\n<p>Any help would be much appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "xpath", "beautifulsoup"], "comments": [{"owner": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505938071, "post_id": 46330916, "comment_id": 79622676, "body": "Can you paste the link?"}, {"owner": {"reputation": 88945, "user_id": 290085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/306077a2fb7af6587f470214a1b337ff?s=128&d=identicon&r=PG", "display_name": "kjhughes", "link": "https://stackoverflow.com/users/290085/kjhughes"}, "edited": false, "score": 2, "creation_date": 1505938814, "post_id": 46330916, "comment_id": 79623053, "body": "No, not the link -- the actual (relevant, subset) HTML.  The question should be able to stand on its own, without the link, the contents for which could change or become unavailable in the future."}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "reply_to_user": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1505940126, "post_id": 46330916, "comment_id": 79623635, "body": "@AndMar, I guess OP means <a href=\"https://mobile.bet365.com/?apptype=&amp;appversion=&amp;cb=1505939716#type=Coupon;key=1-1-13-33601911-2-1-0-0-1-0-0-4100-0-0-1-0-0-0-0-0-0;ip=0;lng=1;anim=1\" rel=\"nofollow noreferrer\">this page</a>"}, {"owner": {"reputation": 149, "user_id": 5458058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15f2ceb5875f72a591f5257a9f7ad437?s=128&d=identicon&r=PG&f=1", "display_name": "Baili", "link": "https://stackoverflow.com/users/5458058/baili"}, "edited": false, "score": 0, "creation_date": 1505940339, "post_id": 46330916, "comment_id": 79623730, "body": "Thank you, Andersson. This page as an alternative <a href=\"https://mobile.bet365.com/#type=Coupon;key=1-1-13-33577327-2-1-0-0-1-0-0-4100-0-0-1-0-0-0-0-0-0;ip=0;lng=1;anim=1\" rel=\"nofollow noreferrer\">mobile.bet365.com/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 5458058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15f2ceb5875f72a591f5257a9f7ad437?s=128&d=identicon&r=PG&f=1", "display_name": "Baili", "link": "https://stackoverflow.com/users/5458058/baili"}, "edited": false, "score": 0, "creation_date": 1505991358, "post_id": 46337785, "comment_id": 79643909, "body": "Thank you, your solution is close to perfect! In your code only the first team name is extracted for each match, but with your suggestion I&#39;m sure I can find a way to also extract the second team name."}, {"owner": {"reputation": 149, "user_id": 5458058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15f2ceb5875f72a591f5257a9f7ad437?s=128&d=identicon&r=PG&f=1", "display_name": "Baili", "link": "https://stackoverflow.com/users/5458058/baili"}, "edited": false, "score": 0, "creation_date": 1505991866, "post_id": 46337785, "comment_id": 79644285, "body": "I should mention your code also extracts the team names/market odds for leagues that are collapsed/hidden by default. E.g. &#39;Copa Libertadores&#39; here <a href=\"https://mobile.bet365.com/#type=Coupon;key=1-1-13-40-140-0-0-0-1-0-0-4100-0-0-1-0-0-0-0-0-0;ip=0;lng=1;anim=1\" rel=\"nofollow noreferrer\">mobile.bet365.com/&hellip;</a> which is fantastic!"}], "tags": [], "owner": {"reputation": 813, "user_id": 7789884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nYTxD.jpg?s=128&g=1", "display_name": "chad", "link": "https://stackoverflow.com/users/7789884/chad"}, "is_accepted": true, "score": 1, "last_activity_date": 1539231761, "last_edit_date": 1539231761, "creation_date": 1505978506, "answer_id": 46337785, "question_id": 46330916, "link": "https://stackoverflow.com/questions/46330916/extracting-element-after-another-element-with-xpath-beautiful-soup/46337785#46337785", "title": "Extracting element after another element with xpath/beautiful soup", "body": "<p>This answer is different from xpath since I used <code>find_all()</code> and <code>find()</code> functions to achieve your desired result.</p>\n\n<p>First, I look for all the rows you need with a class name <code>podEventRow</code></p>\n\n<p>Second, I loop through that list and looked for the team name with class <code>ippg-Market_CompetitorName</code> then strip/replace unnecessary whitespaces.</p>\n\n<p>Third, inside the same loop I looked for the market odds using the class name <code>ippg-Market_Topic</code> and then loop through each odds to get the text inside each.</p>\n\n<pre><code>podEventRow = soup.find_all('div', class_=\"podEventRow\")\nfor row in podEventRow:\n    team_name = row.find('div', class_=\"ippg-Market_CompetitorName\").get_text(strip=True).replace('\\t\\r\\n', '')\n    market_odds_raw = row.find_all('div', class_=\"ippg-Market_Topic\")\n    market_odds = ''\n    for odd in market_odds_raw:\n        market_odds += ' - ' + odd.get_text(strip=True).replace('\\t\\r\\n', '')\n    print(team_name + market_odds)\n</code></pre>\n\n<p>PS: I used selenium to get the complete page source since the site uses JavaScript to load the table.</p>\n"}], "owner": {"reputation": 149, "user_id": 5458058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15f2ceb5875f72a591f5257a9f7ad437?s=128&d=identicon&r=PG&f=1", "display_name": "Baili", "link": "https://stackoverflow.com/users/5458058/baili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "accepted_answer_id": 46337785, "answer_count": 1, "score": 1, "last_activity_date": 1539231761, "creation_date": 1505937909, "question_id": 46330916, "link": "https://stackoverflow.com/questions/46330916/extracting-element-after-another-element-with-xpath-beautiful-soup", "title": "Extracting element after another element with xpath/beautiful soup", "body": "<p><a href=\"https://i.stack.imgur.com/oYN09.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oYN09.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'm looking for a robust way to extract both team names and market odds. Given the above code segment this would be</p>\n\n<p>West Brom\nMan City\n28/1\n6/1\n1/8</p>\n\n<p>I should also mention that I would only need team names and market odds AFTER a given fixture id (which is located in the 'data-fixtureid' attribute).</p>\n\n<p>I have tried the following xpath expression:</p>\n\n<pre><code>    tree.xpath('//span[@class=\"ippg-Market_Truncator\"]/following::div[@data-fixtureid=\"66705048\"]//text()')\n</code></pre>\n\n<p>to extract the team names, which didn't result in the desired output.</p>\n\n<p>I'd appreciate if someone could point me in the right direction. I don't necessarily need to use xpath for this, but could also use beautiful soup for example.</p>\n"}, {"tags": ["python", "multiple-inheritance", "method-resolution-order"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1505937938, "post_id": 46330882, "comment_id": 79622609, "body": "Contrary to the name, <code>super</code> does not refer to the superclass. It doesn&#39;t matter whether First or Second have anything to do with each other."}, {"owner": {"reputation": 6899, "user_id": 389955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ab3efc774a976006304e3e42091d7ea5?s=128&d=identicon&r=PG", "display_name": "user389955", "link": "https://stackoverflow.com/users/389955/user389955"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505939117, "post_id": 46330882, "comment_id": 79623196, "body": "ok. I see. super means following the MRO order."}], "answers": [{"comments": [{"owner": {"reputation": 6899, "user_id": 389955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ab3efc774a976006304e3e42091d7ea5?s=128&d=identicon&r=PG", "display_name": "user389955", "link": "https://stackoverflow.com/users/389955/user389955"}, "edited": false, "score": 0, "creation_date": 1505939183, "post_id": 46330965, "comment_id": 79623226, "body": "Now I understand. It is so confusing."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 3, "last_activity_date": 1505938116, "creation_date": 1505938116, "answer_id": 46330965, "question_id": 46330882, "link": "https://stackoverflow.com/questions/46330882/multiple-inheritance-of-python/46330965#46330965", "title": "multiple inheritance of python", "body": "<p>It doesn't matter what the MRO (method resolution order) of the individual classes is. The only thing that matters (if you use <code>super</code>) is the MRO of the class you call the method on.</p>\n\n<p>So when you call <code>Third.__init__</code> it will follow <code>Third.mro</code> which is <code>Third, First, Second, object</code>:</p>\n\n<pre><code>&gt;&gt;&gt; Third.mro()\n[__main__.Third, __main__.First, __main__.Second, object]\n</code></pre>\n\n<p>So any <code>super</code> will look up the next superclass in the MRO, not the superclass of the actual class you're \"in\".</p>\n"}], "owner": {"reputation": 6899, "user_id": 389955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ab3efc774a976006304e3e42091d7ea5?s=128&d=identicon&r=PG", "display_name": "user389955", "link": "https://stackoverflow.com/users/389955/user389955"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 46330965, "answer_count": 1, "score": 1, "last_activity_date": 1505938116, "creation_date": 1505937792, "last_edit_date": 1505937988, "question_id": 46330882, "link": "https://stackoverflow.com/questions/46330882/multiple-inheritance-of-python", "title": "multiple inheritance of python", "body": "<p>in <a href=\"https://stackoverflow.com/questions/3277367/how-does-pythons-super-work-with-multiple-inheritance\">How does Python&#39;s super() work with multiple inheritance?</a>\none answer explains the reason why, for this example:</p>\n\n<pre><code>class First(object):\n  def __init__(self):\n    super(First, self).__init__()\n    print \"first\"\n\nclass Second(object):\n  def __init__(self):\n    super(Second, self).__init__()\n    print \"second\"\n\nclass Third(First, Second):\n  def __init__(self):\n    super(Third, self).__init__()\n    print \"that's it\"\n</code></pre>\n\n<p>the answer is:</p>\n\n<pre><code>&gt;&gt;&gt; x = Third()\nsecond\nfirst\nthat's it\n</code></pre>\n\n<p>According to the explanation, it is because: </p>\n\n<blockquote>\n  <p>Inside <code>__init__</code> of <code>First</code> <code>super(First, self).__init__()</code> calls the <code>__init__</code> of <code>Second</code>, because that is what the MRO dictates!</p>\n</blockquote>\n\n<p>What does he mean? Why does calling First super <code>__init__</code> will call <code>__init__</code> of Second? I think First has nothing to do with Second? </p>\n\n<p>It is said that: \"because that is what the MRO dictates\", I read <a href=\"https://www.python.org/download/releases/2.3/mro/\" rel=\"nofollow noreferrer\">https://www.python.org/download/releases/2.3/mro/</a>\nbut still have no clue.</p>\n\n<p>Can anybody explain?</p>\n"}, {"tags": ["python", "rename"], "comments": [{"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "edited": false, "score": 0, "creation_date": 1505938144, "post_id": 46330877, "comment_id": 79622710, "body": "So you have a series of files with names like &#39;milk-01-03&#39; and you want to switch them into a single number with out the alphanumeric part i.e. in this case &#39;N&#39; where N is X+1+3?"}, {"owner": {"reputation": 23, "user_id": 8389910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39c4610541ea6fa5d758fc93803f9b?s=128&d=identicon&r=PG&f=1", "display_name": "awake", "link": "https://stackoverflow.com/users/8389910/awake"}, "reply_to_user": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "edited": false, "score": 0, "creation_date": 1505938181, "post_id": 46330877, "comment_id": 79622731, "body": "Hey there, thanks for answering!  The files are named (sorry, didn&#39;t manage to get a list out...) -milk-00-01 -milk-00-02 -milk-00-03 -milk-01-01 -milk-01-02"}, {"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "edited": false, "score": 0, "creation_date": 1505938353, "post_id": 46330877, "comment_id": 79622820, "body": "Gladly, I just need to confirm the output :) - so you want them to be &#39;01&#39;, &#39;02&#39;,&#39;03&#39;,&#39;04&#39;,&#39;05&#39;?"}, {"owner": {"reputation": 23, "user_id": 8389910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39c4610541ea6fa5d758fc93803f9b?s=128&d=identicon&r=PG&f=1", "display_name": "awake", "link": "https://stackoverflow.com/users/8389910/awake"}, "reply_to_user": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "edited": false, "score": 0, "creation_date": 1505938443, "post_id": 46330877, "comment_id": 79622863, "body": "I actually want them to be for example &#39;1000-01&#39;, &#39;1000-02&#39;, ... &#39;1002-01&#39;, &#39;1002-02&#39;... (it&#39;s not a problem to e.g. take the &#39;1000&#39;-files and put them into a folder to rename them!)"}, {"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "edited": false, "score": 0, "creation_date": 1505938565, "post_id": 46330877, "comment_id": 79622925, "body": "So &#39;00-01&#39; becomes &#39;1000-01&#39; and &#39;01-01&#39; becomes &#39;1002-01&#39;? Or &#39;1001-01&#39;?"}, {"owner": {"reputation": 23, "user_id": 8389910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39c4610541ea6fa5d758fc93803f9b?s=128&d=identicon&r=PG&f=1", "display_name": "awake", "link": "https://stackoverflow.com/users/8389910/awake"}, "reply_to_user": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "edited": false, "score": 0, "creation_date": 1505940439, "post_id": 46330877, "comment_id": 79623779, "body": "01-01 becomes 1001-01!"}], "answers": [{"tags": [], "owner": {"reputation": 9377, "user_id": 8431111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GteAE.jpg?s=128&g=1", "display_name": "J_H", "link": "https://stackoverflow.com/users/8431111/j-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1505945721, "last_edit_date": 1505945721, "creation_date": 1505938715, "answer_id": 46331108, "question_id": 46330877, "link": "https://stackoverflow.com/questions/46330877/renaming-files-while-counting-the-number/46331108#46331108", "title": "Renaming files (while counting the number)", "body": "<pre><code>    os.rename(filename, '1000-%02d.tiff' % i)\n    i += 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8389910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39c4610541ea6fa5d758fc93803f9b?s=128&d=identicon&r=PG&f=1", "display_name": "awake", "link": "https://stackoverflow.com/users/8389910/awake"}, "edited": false, "score": 0, "creation_date": 1505940345, "post_id": 46331251, "comment_id": 79623733, "body": "Hey there! Thanks so far :)  I in fact want to keep tiff extension. I&#39;ll try to clarify my naming convention again:  So I have milk-00-01.tiff  and I need 1000-01.tiff. For milk-00-02.tiff I&#39;d need 1000-02.tiff and for milk-01-00.tiff I&#39;d need 1001-00.tiff. I hope this helps.  I&#39;ll try the code you suggested out nevertheless. Thanks :)"}, {"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "reply_to_user": {"reputation": 23, "user_id": 8389910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39c4610541ea6fa5d758fc93803f9b?s=128&d=identicon&r=PG&f=1", "display_name": "awake", "link": "https://stackoverflow.com/users/8389910/awake"}, "edited": false, "score": 0, "creation_date": 1505941624, "post_id": 46331251, "comment_id": 79624291, "body": "@awake - this should work! :) i.e. this one should produce your actual desired result (I assume that <code>i</code> was just for counting and dropped it in my answer)."}, {"owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "reply_to_user": {"reputation": 23, "user_id": 8389910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39c4610541ea6fa5d758fc93803f9b?s=128&d=identicon&r=PG&f=1", "display_name": "awake", "link": "https://stackoverflow.com/users/8389910/awake"}, "edited": false, "score": 0, "creation_date": 1505941910, "post_id": 46331251, "comment_id": 79624431, "body": "Actually, since your <code>filename</code> has a <code>tiff</code> extension it turns out a little bit longer, check it out."}], "tags": [], "owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "is_accepted": true, "score": 2, "last_activity_date": 1505942028, "last_edit_date": 1505942028, "creation_date": 1505939319, "answer_id": 46331251, "question_id": 46330877, "link": "https://stackoverflow.com/questions/46330877/renaming-files-while-counting-the-number/46331251#46331251", "title": "Renaming files (while counting the number)", "body": "<p>You can use the <code>format</code> function</p>\n\n<pre><code>temp = (' ').join(filename.split('.')[:-1])\nos.rename(filename, '10{}-{}.tiff'.format(temp.split('-')[-2],temp.split('-')[-1]))\n</code></pre>\n\n<p>Since <code>filename</code> has the <code>.tiff</code> extension this program first creates a version of <code>filename</code> without the extension - <code>temp</code> - and then creates new names from that. </p>\n"}], "owner": {"reputation": 23, "user_id": 8389910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39c4610541ea6fa5d758fc93803f9b?s=128&d=identicon&r=PG&f=1", "display_name": "awake", "link": "https://stackoverflow.com/users/8389910/awake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 46331251, "answer_count": 2, "score": 1, "last_activity_date": 1505945721, "creation_date": 1505937777, "last_edit_date": 1505937905, "question_id": 46330877, "link": "https://stackoverflow.com/questions/46330877/renaming-files-while-counting-the-number", "title": "Renaming files (while counting the number)", "body": "<p>I'm currently trying to write a python script to rename a bunch of files. The file is named like this: [Name][Number]-[Number]. To give a specific example: milk-00-00. The next file is milk-00-01, then 02, 03 until X. After that milk-01-00 starts with the same pattern.</p>\n\n<p>What I need to do is to switch 'milk' into a number and replace the '-XX-XX' by '-01', '02', ...</p>\n\n<p>I hope you guys get the idea. The current state of my code is pretty poor, it was hard enough to get it this far though. It looks like this and with this I'm at least able to replace something. I'll also manage to get rid of the 'milk' with the help of google. However, if there is an easier way, I'd really appreciate a push in the right direction!</p>\n\n<pre><code>import os\nimport sys\npath = 'C:/Users/milk/Desktop/asd'\ni=00\n\nfor filename in os.listdir(path):\nif filename.endswith('.tiff'):\n    newname = filename.replace('00', 'i')\n    os.rename(filename,newname)\n    i=i+1\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "pytorch", "backpropagation", "parlai"], "owner": {"reputation": 3192, "user_id": 3548063, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/3FCyR.png?s=128&g=1", "display_name": "jef", "link": "https://stackoverflow.com/users/3548063/jef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1595880492, "creation_date": 1505937431, "last_edit_date": 1595880492, "question_id": 46330797, "link": "https://stackoverflow.com/questions/46330797/torchs-loss-backward-hanged-on-parlai", "title": "Torch&#39;s loss.backward() hanged on ParlAI", "body": "<p>I am interested in <a href=\"https://arxiv.org/abs/1503.08895\" rel=\"nofollow noreferrer\">Memory Networks</a> and <a href=\"http://www.thespermwhale.com/jaseweston/babi/movie_dialog_dataset.tgz\" rel=\"nofollow noreferrer\">Movie Dialog QA</a>. Recently facebook announced AI training framework called ParlAI, which supports many models and datasets. Although I tried below command on ParlAI, the training stopped at first <code>loss.backward()</code> at <code>memnn.py</code>. I waited almost one day, but <code>loss.backward()</code> didn't finish. I have checked this by printing debug and <code>[Using Cuda]</code> printing. Actually my GPU was working because it used some memory. I checked this by <code>nvidia-smi -l 1</code>.</p>\n\n<pre><code>python examples/train_model.py -m memnn -t \"#moviedd-qa\" -bs 32 --gpu 0 -e 10\n</code></pre>\n\n<p>Then, I switched to simple task, and it finished a few minutes.</p>\n\n<pre><code>python examples/train_model.py -m memnn -t \"babi:task1k:1\" -bs 32 --gpu 0 -e 10\n</code></pre>\n\n<p>I realize <code>#moviedd-qa</code> is more complicated compared to <a href=\"https://research.fb.com/downloads/babi/\" rel=\"nofollow noreferrer\">babi</a> task. But how long does it usually take to train this model in my setting? Does anyone try to train this model via ParlAI? I am afraid this is not bug of ParlAI. Could you advise me to proceed my work?</p>\n\n<p><strong>My Environment</strong></p>\n\n<ul>\n<li>Ubunt 16.04.03 LTS, 64 bit </li>\n<li>python 3.6.1 (Anaconda 4.4.0 (64-bit))</li>\n<li>GPU: GTX 1080 ti </li>\n<li>CPU: Intel(R) Core(TM) i7-7700K CPU @ 4.20GHz</li>\n<li>torch.<strong>version</strong>: '0.2.0_3'</li>\n</ul>\n\n<p>I am also <a href=\"https://github.com/facebookresearch/ParlAI/issues/307\" rel=\"nofollow noreferrer\">asking developers at ParlAI at their github</a>, but no responses.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 9336, "user_id": 1199464, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c46065552123344aa8fb40f4366790f3?s=128&d=identicon&r=PG", "display_name": "markwalker_", "link": "https://stackoverflow.com/users/1199464/markwalker"}, "edited": false, "score": 0, "creation_date": 1505937632, "post_id": 46330785, "comment_id": 79622461, "body": "Have you tried <code>from . import utils</code>?"}, {"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1505937768, "post_id": 46330785, "comment_id": 79622528, "body": "what does <code>dir(utils)</code> return?"}, {"owner": {"reputation": 3855, "user_id": 6522112, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/JqjxG.png?s=128&g=1", "display_name": "tupui", "link": "https://stackoverflow.com/users/6522112/tupui"}, "edited": false, "score": 0, "creation_date": 1505937829, "post_id": 46330785, "comment_id": 79622555, "body": "Add some insight about this <code>utils</code> module."}, {"owner": {"reputation": 21, "user_id": 8644042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1683321bd842f953279c6e2778801c44?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/8644042/terry"}, "edited": false, "score": 0, "creation_date": 1505942620, "post_id": 46330785, "comment_id": 79624741, "body": "from . import utils seems didn&#39;t work. dir(utils) returns [&#39;<b>builtins</b>&#39;, &#39;<b>cached</b>&#39;, &#39;<b>doc</b>&#39;, &#39;<b>file</b>&#39;, &#39;<b>loader</b>&#39;, &#39;<b>name</b>&#39;, &#39;<b>package</b>&#39;, &#39;<b>path</b>&#39;, &#39;<b>spec</b>&#39;]"}], "owner": {"reputation": 21, "user_id": 8644042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1683321bd842f953279c6e2778801c44?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/8644042/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2104, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1583260279, "creation_date": 1505937388, "last_edit_date": 1505938664, "question_id": 46330785, "link": "https://stackoverflow.com/questions/46330785/attributeerror-module-utils-has-no-attribute-get-audio-path", "title": "AttributeError: module &#39;utils&#39; has no attribute &#39;get_audio_path&#39;", "body": "<p>I am engaging a project now, and the library <em>utils</em> might be frequently used. However, I just cannot normally invoke functions from utils. See code below.</p>\n\n<pre><code>import IPython.display as ipd\nimport librosa\nimport librosa.display\nimport utils\n\nfilename = utils.get_audio_path(AUDIO_DIR, 2)#AUDIO_DIR is an audio path\nprint('File: {}'.format(filename))\n\nx, sr = librosa.load(filename, sr=None, mono=True)\nprint('Duration: {:.2f}s, {} samples'.format(x.shape[-1] / sr, x.size))\n\nstart, end = 7, 17\nipd.Audio(data=x[start*sr:end*sr], rate=sr)\n</code></pre>\n\n<p>Plus, I had installed library <em>python_utils</em> either, but didn't work.</p>\n"}, {"tags": ["python", "django"], "owner": {"reputation": 99, "user_id": 7388434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c91f4b4407c7aa5c29250fcccdd058c7?s=128&d=identicon&r=PG&f=1", "display_name": "Zeitvertreib", "link": "https://stackoverflow.com/users/7388434/zeitvertreib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1506082381, "creation_date": 1505937284, "last_edit_date": 1506082381, "question_id": 46330758, "link": "https://stackoverflow.com/questions/46330758/swapping-inlines-and-dynamic-model-creation", "title": "Swapping Inlines (and dynamic Model creation)", "body": "<p>A game, and lets say there are different (restrictive) settings for recreation and I want to adjust via django admin.</p>\n\n<p>models.py:</p>\n\n<pre><code>class Board(models.Model):\n     name = CharField()\n\nclass Player(models.Model):\n     bord = Foreignkey('Board')\n     max_cards = IntegerField()\n\nclass Card_Slot(models.Model):\n     owner = Foreignkey('Player')\n     card = CharField()\n</code></pre>\n\n<p>A Board should have a random number of Players associated with it. An inline <code>TabularInline</code> should be used to add or delete Players, with an <code>IntegerField</code> for the max number of Cards (<code>max_cards</code>).\nI use signals on save to create dynamically Card_Slots appropriate to the number of max_cards.\n --- thats what I have, now what I want ---\n'Swapping' the Inline after setting the <code>max_cards</code>, for an Inline that represents the Players and their Cards (thus Playername and card in Card_Slot should be editable).</p>\n\n<p><hr>\nSeveral headaches come up for me on that. If possible I don't want to overwrite admin templates. If I should, I would appreciate a hint that goes further then pointing to the docs, meaning pointing in a direction on good practice.</p>\n\n<p>I'm also not sure, if I should use one Model for Player and Card_Slot. (This would make the edit name thing easier, but the dynamic size of Card_Slots worse).. I think.</p>\n\n<p>I have no clue on how I should do that. Pls help.</p>\n\n<p>(One approach appears to be with custom Fieldsets, which I didn't get to work so far. The thought is to replace the content and type of the Integer Field with a ModelMultipleChoiceField related to a queryset of the Card_Slots. But I dont understand how I can do custom Fields on an Inline without a model etc.)</p>\n"}, {"tags": ["python", "image", "opencv", "image-processing", "opencv3.0"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1505940388, "post_id": 46330728, "comment_id": 79623755, "body": "Is there any particular reason you don&#39;t want to use <code>warpAffine()</code>?"}, {"owner": {"reputation": 88, "user_id": 4789445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5360c7f441262f2a4756f6faeaa35b?s=128&d=identicon&r=PG", "display_name": "Yash Bansal", "link": "https://stackoverflow.com/users/4789445/yash-bansal"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1505940835, "post_id": 46330728, "comment_id": 79623944, "body": "Yes, I am a teaching assistant in my university. I am writing my own library for giving an assignment to students to make them understand the implementation inside the warpAffine function."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1505941178, "post_id": 46330728, "comment_id": 79624095, "body": "Where did the points come from?"}, {"owner": {"reputation": 88, "user_id": 4789445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5360c7f441262f2a4756f6faeaa35b?s=128&d=identicon&r=PG", "display_name": "Yash Bansal", "link": "https://stackoverflow.com/users/4789445/yash-bansal"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1505941772, "post_id": 46330728, "comment_id": 79624375, "body": "I think that the matrix is correct. I want &quot;transformed.png&quot; to transform into &quot;original.png&quot; (transformed -&gt; original). The matrix I calculated is from the 1st and 3rd image that i have shared. pts2 represent 1st image and pts1 represent 3rd image.  I can vectorize the image but I think logic will still remain the same."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 1, "creation_date": 1505941894, "post_id": 46330728, "comment_id": 79624419, "body": "Yes, I&#39;m working on an answer, but I think it&#39;ll take me a little while. I&#39;m pretty sure your points are wrong though."}, {"owner": {"reputation": 88, "user_id": 4789445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5360c7f441262f2a4756f6faeaa35b?s=128&d=identicon&r=PG", "display_name": "Yash Bansal", "link": "https://stackoverflow.com/users/4789445/yash-bansal"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1505944896, "post_id": 46330728, "comment_id": 79625566, "body": "For your information, I have also applied the warpAffine() function. I am able to obtain the correct result, But still, I don&#39;t know what is the problem in hardcoded version."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1505945340, "post_id": 46330728, "comment_id": 79625738, "body": "Yeah I was wrong, your points are fine. I thought they were wrong because the image was getting warped in basically the opposite way. Check your <code>x,y</code> and <code>row,col</code> ordering to make sure they&#39;re correct; the warped image almost looks like it&#39;s correct except it&#39;s being placed vertically instead of horizontally, that could be the culprit."}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 4789445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5360c7f441262f2a4756f6faeaa35b?s=128&d=identicon&r=PG", "display_name": "Yash Bansal", "link": "https://stackoverflow.com/users/4789445/yash-bansal"}, "edited": false, "score": 0, "creation_date": 1505976559, "post_id": 46332838, "comment_id": 79634092, "body": "Thanks very much. I also thought that, when points transform to negative coordinates, they will not map properly. wanted to use loops instead of inbuilt functions. Nevermind."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 88, "user_id": 4789445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5360c7f441262f2a4756f6faeaa35b?s=128&d=identicon&r=PG", "display_name": "Yash Bansal", "link": "https://stackoverflow.com/users/4789445/yash-bansal"}, "edited": false, "score": 0, "creation_date": 1505976722, "post_id": 46332838, "comment_id": 79634186, "body": "Yeah; in the OpenCV implementation, it just leaves those indices out. Also it requires you to put an output shape, which means that it doesn&#39;t automatically calculate the extent, either. Due to this, I created a little python module that performs the OpenCV <code>warp</code> functions but automatically calculates the destination size and shifts the image to positive values like I did here. You can check that out <a href=\"https://github.com/alkasm/padded-transformations\" rel=\"nofollow noreferrer\">here</a> if it fits in with anything you&#39;re doing."}, {"owner": {"reputation": 88, "user_id": 4789445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5360c7f441262f2a4756f6faeaa35b?s=128&d=identicon&r=PG", "display_name": "Yash Bansal", "link": "https://stackoverflow.com/users/4789445/yash-bansal"}, "edited": false, "score": 0, "creation_date": 1505976989, "post_id": 46332838, "comment_id": 79634324, "body": "What if i want to apply interpolation to this technique.?"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "reply_to_user": {"reputation": 88, "user_id": 4789445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5360c7f441262f2a4756f6faeaa35b?s=128&d=identicon&r=PG", "display_name": "Yash Bansal", "link": "https://stackoverflow.com/users/4789445/yash-bansal"}, "edited": false, "score": 0, "creation_date": 1505977195, "post_id": 46332838, "comment_id": 79634439, "body": "As I mentioned in the post, you have the original pixel values, and you have the new locations, so you have everything you need to interpolate. You can create a linear interpolation method (basically, all of the pixels between the new mapped points get assigned some combination of their neighbors values), or a nearest neighbor method yourself, which aren&#39;t too bad. But if you want better interpolation, you should use another library like <code>scipy</code> or something with methods for 2D interpolation."}], "tags": [], "owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "is_accepted": true, "score": 2, "last_activity_date": 1505948675, "last_edit_date": 1505948675, "creation_date": 1505947685, "answer_id": 46332838, "question_id": 46330728, "link": "https://stackoverflow.com/questions/46330728/manually-wirting-code-for-warpaffine-in-python/46332838#46332838", "title": "Manually wirting code for warpAffine in python", "body": "<p>So I vectorized the code and this method works---I can't find the exact issue with your implementation, but maybe this will shed some light (plus the speed is way faster).</p>\n\n<p>The setup to vectorize is to create a linear (homogeneous) array containing every point in the image. We want an array that looks like</p>\n\n<pre><code>x0 x1 ... xN   x0 x1 ... xN   .....   x0 x1 ... xN\ny0 y0 ... y0   y1 y1 ... y1   .....   yM yM ... yM\n 1  1 ...  1    1  1 ...  1   .....    1  1 ...  1\n</code></pre>\n\n<p>So that every point <code>(xi, yi, 1)</code> is included. Then transforming is just a single matrix multiplication with your transformation matrix and this array.</p>\n\n<p>To simplify matters (partially because your image naming conventions confused me), I'll say the original starting image is the \"destination\" or <code>dst</code> because we want to transform back to the \"source\" or <code>src</code> image. Bearing that in mind, creating this linear homogenous array could look something like this:</p>\n\n<pre><code>dst = cv2.imread('img.jpg', 0)\nh, w = dst.shape[:2]\ndst_y, dst_x = np.indices((h, w))  # similar to meshgrid/mgrid\ndst_lin_homg_pts = np.stack((dst_x.ravel(), dst_y.ravel(), np.ones(dst_y.size)))\n</code></pre>\n\n<p>Then, to transform the points, just create the transformation matrix and multiply. I'll round the transformed pixel locations because I'm using them as an index and not bothering with interpolation:</p>\n\n<pre><code>src_pts = np.float32([[693, 349], [605, 331], [445, 59]])\ndst_pts = np.float32([[1379, 895], [1213, 970], [684, 428]])\ntransf = cv2.getAffineTransform(dst_pts, src_pts)\nsrc_lin_pts = np.round(transf.dot(dst_lin_homg_pts)).astype(int)\n</code></pre>\n\n<p>Now this transformation will send some pixels to negative indices, and if we index with those, it'll wrap around the image---probably not what we want to do. Of course in the OpenCV implementation, it just cuts those pixels off completely. But we can just shift all the transformed pixels so that all of the locations are positive and we don't cut off any (you can of course do whatever you want in this regard):</p>\n\n<pre><code>min_x, min_y = np.amin(src_lin_pts, axis=1)\nsrc_lin_pts -= np.array([[min_x], [min_y]])\n</code></pre>\n\n<p>Then we'll need to create the source image <code>src</code> which the transform maps into. I'll create it with a gray background so we can see the extent of the black from the <code>dst</code> image.</p>\n\n<pre><code>trans_max_x, trans_max_y = np.amax(src_lin_pts, axis=1)\nsrc = np.ones((trans_max_y+1, trans_max_x+1), dtype=np.uint8)*127\n</code></pre>\n\n<p>Now all we have to do is place some corresponding pixels from the destination image into the source image. Since I didn't cut off any of the pixels and there's the same number of pixels in both linear points array, I can just assign the transformed pixels the color they had in the original image.</p>\n\n<pre><code>src[src_lin_pts[1], src_lin_pts[0]] = dst.ravel()\n</code></pre>\n\n<p>Now, of course, this isn't interpolating on the image. But there's no built-ins in OpenCV for interpolation (there is backend C functions for other methods to use but not that you can access in Python AFAIK). But, you have the important parts---where the destination image gets mapped to, and the original image, so you can use any number of libraries to interpolate onto that grid. Or just implement a linear interpolation yourself as it's not too difficult. You'll probably want to un-round the warped pixel locations of course before then.</p>\n\n<pre><code>cv2.imshow('src', src)\ncv2.waitKey()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2I4Hu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2I4Hu.png\" alt=\"Source image\"></a></p>\n\n<p>Edit: Also this same method will work for <code>warpPerspective</code> too, although your resulting matrix multiplication will give a three-rowed (homogeneous) vector, and you'll need to divide the first two rows by the third row to set them back into Cartesian world. Other than that, everything else stays the same.</p>\n"}], "owner": {"reputation": 88, "user_id": 4789445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a5360c7f441262f2a4756f6faeaa35b?s=128&d=identicon&r=PG", "display_name": "Yash Bansal", "link": "https://stackoverflow.com/users/4789445/yash-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2870, "favorite_count": 3, "accepted_answer_id": 46332838, "answer_count": 1, "score": 1, "last_activity_date": 1505948675, "creation_date": 1505937190, "last_edit_date": 1505938500, "question_id": 46330728, "link": "https://stackoverflow.com/questions/46330728/manually-wirting-code-for-warpaffine-in-python", "title": "Manually wirting code for warpAffine in python", "body": "<p>I want to implement affine transformation by not using library functions.\nI have an image named \"transformed\" and I want to apply inverse transformation to obtain \"img_org\" image. Right now, I am using my own basic GetBilinearPixel function to set the intensity value. But, the image is not transforming properly.This is what I came up with. :</p>\n\n<p>This is image(\"transformed.png\"):</p>\n\n<p><a href=\"https://i.stack.imgur.com/0X3b1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0X3b1.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>This is image(\"img_org.png\"):</p>\n\n<p><a href=\"https://i.stack.imgur.com/VfQAT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VfQAT.png\" alt=\"enter image description here\"></a></p>\n\n<p>But My goal is to produce this image:\n<a href=\"https://i.stack.imgur.com/auwUf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/auwUf.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can see the transformation matrix here:</p>\n\n<pre><code>pts1 = np.float32( [[693,349] , [605,331] , [445,59]] )\npts2 = np.float32 ( [[1379,895] , [1213,970] ,[684,428]] )\nMat = cv2.getAffineTransform(pts2,pts1)\nB=Mat\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>img_org=np.zeros(shape=(780,1050))\nimg_size=np.zeros(shape=(780,1050))\n\ndef GetBilinearPixel(imArr, posX, posY):\nreturn imArr[posX][posY]\n\nfor i in range(1,img.shape[0]-1):\n    for j in range(1,img.shape[1]-1):\n        pos=np.array([[i],[j],[1]],np.float32)\n        #print pos\n        pos=np.matmul(B,pos)\n        r=int(pos[0][0])\n        c=int(pos[1][0])\n        #print r,c\n        if(c&lt;=1024 and r&lt;=768 and c&gt;=0 and r&gt;=0):\n            img_size[r][c]=img_size[r][c]+1\n            img_org[r][c] += GetBilinearPixel(img, i, j)\n\nfor i in range(0,img_org.shape[0]):\n    for j in range(0,img_org.shape[1]):\n        if(img_size[i][j]&gt;0):\n            img_org[i][j] = img_org[i][j]/img_size[i][j]\n</code></pre>\n\n<p>Is my logic wrong? I know that i have applied very inefficient algorithm.\nIs there any insight that i am missing?\nOr can you give me any other algorithm which will work fine.</p>\n\n<p>(Request) . I don't want to use warpAffine function.</p>\n"}, {"tags": ["python", "utf-8", "beautifulsoup"], "comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1505937438, "post_id": 46330724, "comment_id": 79622352, "body": "Are you sure the website is using UTF-8?  That looks like latin-1 mojibake to me.  Or vice versa: are you sure your output streams are utf-8?"}, {"owner": {"reputation": 21, "user_id": 8029786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pju0X.png?s=128&g=1", "display_name": "Awco", "link": "https://stackoverflow.com/users/8029786/awco"}, "reply_to_user": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1505938228, "post_id": 46330724, "comment_id": 79622746, "body": "In the Header a meta is &lt;meta charset=&quot;utf-8&quot;/&gt;, but there is maybe a character conflict somewhere. I don&#39;t know :("}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1505938877, "post_id": 46330724, "comment_id": 79623086, "body": "Possibly related: <a href=\"https://github.com/requests/requests/issues/1604\" rel=\"nofollow noreferrer\">github.com/requests/requests/issues/1604</a>"}, {"owner": {"reputation": 21, "user_id": 8029786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pju0X.png?s=128&g=1", "display_name": "Awco", "link": "https://stackoverflow.com/users/8029786/awco"}, "edited": false, "score": 0, "creation_date": 1505939029, "post_id": 46330724, "comment_id": 79623160, "body": "I tried on both computer I usually use to run my scripts (on utf-8), same result. I only have the problem with this webpage in particular."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1505940637, "post_id": 46330724, "comment_id": 79623859, "body": "Some workarounds are discussed in <a href=\"https://github.com/requests/requests/issues/1604\" rel=\"nofollow noreferrer\">this github issue</a>, and also <a href=\"https://stackoverflow.com/q/36453359/190597\">in this SO question</a>. Note also that the behavior of <code>requests</code> will <a href=\"https://github.com/requests/requests/issues/2086\" rel=\"nofollow noreferrer\">change in version 3.0.0</a>."}, {"owner": {"reputation": 21, "user_id": 8029786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pju0X.png?s=128&g=1", "display_name": "Awco", "link": "https://stackoverflow.com/users/8029786/awco"}, "reply_to_user": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1505941268, "post_id": 46330724, "comment_id": 79624144, "body": "thx you @unutbu"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8029786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pju0X.png?s=128&g=1", "display_name": "Awco", "link": "https://stackoverflow.com/users/8029786/awco"}, "is_accepted": false, "score": 1, "last_activity_date": 1505941083, "creation_date": 1505941083, "answer_id": 46331648, "question_id": 46330724, "link": "https://stackoverflow.com/questions/46330724/bts-is-scraping-a-text-with-utf8-errors-but-its-looking-good-on-the-original-we/46331648#46331648", "title": "BTS is scraping a text with utf8 errors but it&#39;s looking good on the original webpage", "body": "<p>Solved!</p>\n\n<p>I checked the @unutbu link and I forced to encode the request to utf-8 even having it defined in the header.</p>\n\n<pre><code>response.encoding = 'utf-8'\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8029786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pju0X.png?s=128&g=1", "display_name": "Awco", "link": "https://stackoverflow.com/users/8029786/awco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 1, "closed_date": 1505941403, "answer_count": 1, "score": 1, "last_activity_date": 1505941083, "creation_date": 1505937177, "last_edit_date": 1505938477, "question_id": 46330724, "link": "https://stackoverflow.com/questions/46330724/bts-is-scraping-a-text-with-utf8-errors-but-its-looking-good-on-the-original-we", "closed_reason": "Duplicate", "title": "BTS is scraping a text with utf8 errors but it&#39;s looking good on the original webpage", "body": "<p>When I check the code by Chrome DevTools the text is ok but once scraped I have character errors.</p>\n\n<p>e.g. In the code below the h1 should return \"Valerian e la citt<strong>\u00e0</strong> dei mille pianet\" and not \"Valerian e la citt<strong>\u00c3</strong>\u00a0dei mille pianeti\".</p>\n\n<p>These character errors are repeating when scraping any text on this domain.</p>\n\n<p>I don't understand why, as in other webs this code works perfectly.</p>\n\n<pre><code>#  -*- coding: utf-8 -*-\n\nfrom bs4 import BeautifulSoup\nimport requests\n\nheaders = {'User-Agent': 'Mozilla/5.0'}\nresponse = requests.get('http://www.mymovies.it/film/2017/valerian/', headers=headers)\nsoup = BeautifulSoup(response.text, 'html.parser')\n\ntitle = soup.find('h1').get_text()\n\nprint(title)\n</code></pre>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1505937127, "post_id": 46330614, "comment_id": 79622157, "body": "strings are not mutable. Basically you have to create a new string and assign it to the list item."}], "answers": [{"tags": [], "owner": {"reputation": 6078, "user_id": 3950422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/czF1r.gif?s=128&g=1", "display_name": "bhansa", "link": "https://stackoverflow.com/users/3950422/bhansa"}, "is_accepted": false, "score": 0, "last_activity_date": 1505937729, "last_edit_date": 1505937729, "creation_date": 1505936900, "answer_id": 46330655, "question_id": 46330614, "link": "https://stackoverflow.com/questions/46330614/modify-a-string-in-an-array-from-a-starting-point/46330655#46330655", "title": "Modify a string in an array from a starting point", "body": "<p>Strings are immutable, but here you can update the list.</p>\n\n<p>You can update your list items by creating a new string.</p>\n\n<pre><code>&gt;&gt;&gt; lista = [' address 0 201.175.131.20 0', ' address 2 4.2.2.2 0', ' address 0 107.22.0.0 0.0.255.255']\n&gt;&gt;&gt; lista[0] = lista[0][:11] + \"192.168.10.1\"\n&gt;&gt;&gt; lista\n[' address 0 192.168.10.1', ' address 2 4.2.2.2 0', ' address 0 107.22.0.0 0.0.255.255']\n</code></pre>\n\n<p>Alteringn your list:</p>\n\n<pre><code>[ip[:11] + \"192.168.10.1\" for ip in lista]\n</code></pre>\n\n<p>Pulling out all the ip's:</p>\n\n<pre><code>&gt;&gt;&gt; [ip.split(\" \")[3] for ip in lista]\n['201.175.131.20', '4.2.2.2', '107.22.0.0']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 1, "last_activity_date": 1505937334, "last_edit_date": 1505937334, "creation_date": 1505937028, "answer_id": 46330680, "question_id": 46330614, "link": "https://stackoverflow.com/questions/46330614/modify-a-string-in-an-array-from-a-starting-point/46330680#46330680", "title": "Modify a string in an array from a starting point", "body": "<p>Strings are immutable - once created they cannot be changed - and so are strings slices, which are also strings. </p>\n\n<p>You have to build a <strong>new</strong> string using the part of the slice that should be retained, and then replace the previous string object at index 0:</p>\n\n<pre><code>address[0] = address[0][:11] + \"192.168.10.1\" \nprint address\n# [' address 0 192.168.10.1', ' address 2 4.2.2.2 0', ' address 0 107.22.0.0 0.0.255.255']\n</code></pre>\n\n<p>And to replicate this across the list, use a <em>list comprehension</em>:</p>\n\n<pre><code>address = [s[:11] + \"192.168.10.1\" for s in address]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8585828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1787fbddf17a6223a9e80c3b783c756?s=128&d=identicon&r=PG&f=1", "display_name": "VENTIZ", "link": "https://stackoverflow.com/users/8585828/ventiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 46330680, "answer_count": 2, "score": -2, "last_activity_date": 1505937729, "creation_date": 1505936744, "last_edit_date": 1505937267, "question_id": 46330614, "link": "https://stackoverflow.com/questions/46330614/modify-a-string-in-an-array-from-a-starting-point", "title": "Modify a string in an array from a starting point", "body": "<p>I have been searching into the forum but no luck for this one, which I hope it is an easy one, basically I want to modify strings in an list starting from the 12 character for each argument. This is the list:</p>\n\n<pre><code>[' address 0 201.175.131.20 0', ' address 2 4.2.2.2 0', ' address 0 107.22.0.0 0.0.255.255']\n</code></pre>\n\n<p>I was expecting something like this: </p>\n\n<pre><code>address[0][11:] = \"192.168.10.1\"\n</code></pre>\n\n<p>But it says:</p>\n\n<pre><code>TypeError: 'str' object does not support item assignment\n</code></pre>\n\n<p>Any ideas how can I achieve it.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "django", "websocket", "tornado"], "answers": [{"comments": [{"owner": {"reputation": 606, "user_id": 6645337, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f32e3a9114475c2881df726faba82fb2?s=128&d=identicon&r=PG&f=1", "display_name": "Przemek", "link": "https://stackoverflow.com/users/6645337/przemek"}, "edited": false, "score": 0, "creation_date": 1505970251, "post_id": 46332321, "comment_id": 79631543, "body": "How about defining <code>conference_id</code> in <code>send_to_queue</code>. How is the function going to know to which <code>WebSocket</code> send the message?"}], "tags": [], "owner": {"reputation": 238, "user_id": 1511481, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5f9758caba1eccbf84e0aa9bc5ad4f0?s=128&d=identicon&r=PG", "display_name": "okuznetsov", "link": "https://stackoverflow.com/users/1511481/okuznetsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1505944435, "creation_date": 1505944435, "answer_id": 46332321, "question_id": 46330601, "link": "https://stackoverflow.com/questions/46330601/how-do-i-send-message-to-web-socket-with-tornado/46332321#46332321", "title": "How do I send message to web socket with Tornado", "body": "<p>What about the wrap django code by tornado? </p>\n\n<pre><code>def main():\n    os.environ['DJANGO_SETTINGS_MODULE'] = 'docs.settings'\n    application = get_wsgi_application()\n    container = tornado.wsgi.WSGIContainer(application)\n\n    tornado_app = tornado.web.Application(\n       [('.*', tornado.web.FallbackHandler, dict(fallback=container))],        \n    )\n\n    server = tornado.httpserver.HTTPServer(tornado_app)\n    server.bind(8888)\n    server.start(0)\n    tornado.ioloop.IOLoop.instance().start()\n</code></pre>\n\n<p>Communicate between django and tornado i propose to make communication through the queue, like Redis.</p>\n\n<pre><code>def some_view_function(request, **kwargs):\n    conference_id = request.GET.data['conferenceId']\n    ...\n    if something:\n       send_to_queue()\n</code></pre>\n\n<p>On tornado side queue listener.</p>\n"}], "owner": {"reputation": 606, "user_id": 6645337, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f32e3a9114475c2881df726faba82fb2?s=128&d=identicon&r=PG&f=1", "display_name": "Przemek", "link": "https://stackoverflow.com/users/6645337/przemek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505944435, "creation_date": 1505936709, "question_id": 46330601, "link": "https://stackoverflow.com/questions/46330601/how-do-i-send-message-to-web-socket-with-tornado", "title": "How do I send message to web socket with Tornado", "body": "<p>Hello I am using <code>Tornado</code>, <code>Django</code> frammwork on backend to handle sockets messages on frontend. I am not too much familar with my project but there is a file in my project where are classes that implement <code>websocket.WebSocketHandler</code> and <code>web.Application</code>. This is part of this file</p>\n\n<pre><code>class Application(web.Application):\n    \"\"\"\n    Main Class for this application holding everything together.\n    \"\"\"\n    def __init__(self):\n        PROJECT_NAME = os.path.basename(os.getcwd())\n        os.environ['DJANGO_SETTINGS_MODULE'] = PROJECT_NAME + 'tutorial/settings'\n\n        # Handlers defining the url routing.\n        handlers = [\n            ('/room', SocketHandler),\n            ('/room/([a-zA-Z0-9|=%]*)$', SocketHandler),\n            ('/video_call', VideoCallSocketHandler),\n            ('/video_call/([a-zA-Z0-9|=%]*)$', VideoCallSocketHandler),\n        ]\n</code></pre>\n\n<p>In the frontend part is a function:</p>\n\n<pre><code>var ws = new WebSocket('wss://domain.com:9003/video_call/' + conferenceId);\n\nws.onmessage = function (ev) {\n    window.location.replace(redirectUrl);\n};\n</code></pre>\n\n<p>I belive that this function get's message from our mobile aplication.</p>\n\n<p>So the problem is that I would like to send message to this url or whatever it is <code>'wss://domain.com:9003/video_call/' + conferenceId</code> from my python view.</p>\n\n<p>for example:</p>\n\n<pre><code>def some_view_function(request, **kwargs):\n    conference_id = request.GET.data['conferenceId']\n    ...\n    if something:\n       send message to wss://domain.com:9003/video_call/' + conference_id\n</code></pre>\n\n<p>How do I do that?</p>\n"}, {"tags": ["python", "pandas", "dictionary", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1505936995, "post_id": 46330628, "comment_id": 79622093, "body": "Mmh, my deleted answer is too identical to yours to undelete."}, {"owner": {"reputation": 51, "user_id": 8143172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d82eed4bb051e342ce3c40d73639d6?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Lopez", "link": "https://stackoverflow.com/users/8143172/jay-lopez"}, "edited": false, "score": 0, "creation_date": 1505937329, "post_id": 46330628, "comment_id": 79622276, "body": "Major thanks to you guys, such quick answer! Farewell"}], "tags": [], "owner": {"reputation": 58812, "user_id": 2137255, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/zzmt4.png?s=128&g=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/2137255/zero"}, "is_accepted": false, "score": 2, "last_activity_date": 1505937230, "last_edit_date": 1505937230, "creation_date": 1505936821, "answer_id": 46330628, "question_id": 46330595, "link": "https://stackoverflow.com/questions/46330595/build-a-dictionary-from-two-dataframe-columns/46330628#46330628", "title": "Build a dictionary from two DataFrame columns", "body": "<p>Use</p>\n\n<pre><code>In [1893]: df.groupby('Vendor')['Project'].apply(list).to_dict()\nOut[1893]:\n{'John': ['Cordoba', 'Federal District'],\n 'Lukas': ['Salta'],\n 'Peter': ['La Plata', 'Rio Salado', 'Bahia Blanca'],\n 'Saul': ['Pampa'],\n 'Thomas': ['Rio Grande']}\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>In [1900]: {k: g['Project'].values.tolist() for k, g in df.groupby('Vendor')}\nOut[1900]:\n{'John': ['Cordoba', 'Federal District'],\n 'Lukas': ['Salta'],\n 'Peter': ['La Plata', 'Rio Salado', 'Bahia Blanca'],\n 'Saul': ['Pampa'],\n 'Thomas': ['Rio Grande']}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8143172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d82eed4bb051e342ce3c40d73639d6?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Lopez", "link": "https://stackoverflow.com/users/8143172/jay-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4286, "favorite_count": 0, "closed_date": 1505941496, "answer_count": 1, "score": 1, "last_activity_date": 1505937230, "creation_date": 1505936669, "last_edit_date": 1505937037, "question_id": 46330595, "link": "https://stackoverflow.com/questions/46330595/build-a-dictionary-from-two-dataframe-columns", "closed_reason": "Duplicate", "title": "Build a dictionary from two DataFrame columns", "body": "<p>How to build up a dictionary with a Dataframe.</p>\n\n<p><code>df</code></p>\n\n<pre><code>   Vendor           Project\n0    John           Cordoba\n1    Saul             Pampa\n2   Peter          La Plata\n3    John  Federal District\n4   Lukas             Salta\n5  Thomas        Rio Grande\n6   Peter        Rio Salado\n7   Peter      Bahia Blanca\n</code></pre>\n\n<p>The result I need is a dictionary with Vendors as Keys and Projects as items.</p>\n"}, {"tags": ["python", "python-3.x", "list", "list-comprehension"], "answers": [{"tags": [], "owner": {"reputation": 406, "user_id": 4571055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NV49QeXoHLs/AAAAAAAAAAI/AAAAAAAAABE/JxgTVmq7aao/photo.jpg?sz=128", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4571055/siddharth"}, "is_accepted": false, "score": 2, "last_activity_date": 1505937291, "last_edit_date": 1505937291, "creation_date": 1505936642, "answer_id": 46330583, "question_id": 46330534, "link": "https://stackoverflow.com/questions/46330534/python-return-top-n-lists-from-sublist-having-maximum-length/46330583#46330583", "title": "Python: Return top n lists from sublist having maximum length", "body": "<pre><code>&gt;&gt;&gt; a = [[{},{},{},{}],[{},{},{}],[{},{}],[{}],[]]\n&gt;&gt;&gt; sorted(a, key=len, reverse=True)\n[[{}, {}, {}, {}], [{}, {}, {}], [{}, {}], [{}], []]\n</code></pre>\n\n<p>You can always choose select top <code>k</code> after splicing the result of <a href=\"https://docs.python.org/3/library/functions.html#sorted\" rel=\"nofollow noreferrer\"><code>sorted</code></a> by <code>sorted(a, key=len, reverse=True)[0:k]</code>.</p>\n\n<p>Main observation to note is argument <code>key</code>, which can also accept any crazy <a href=\"https://docs.python.org/3/reference/expressions.html#lambda\" rel=\"nofollow noreferrer\"><code>lambda</code></a> function too.</p>\n"}, {"comments": [{"owner": {"reputation": 406, "user_id": 4571055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NV49QeXoHLs/AAAAAAAAAAI/AAAAAAAAABE/JxgTVmq7aao/photo.jpg?sz=128", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4571055/siddharth"}, "edited": false, "score": 0, "creation_date": 1505937198, "post_id": 46330591, "comment_id": 79622202, "body": "here the task is to return a list (not modify from question). So <code>sorted</code> would suite more."}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "reply_to_user": {"reputation": 406, "user_id": 4571055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NV49QeXoHLs/AAAAAAAAAAI/AAAAAAAAABE/JxgTVmq7aao/photo.jpg?sz=128", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4571055/siddharth"}, "edited": false, "score": 0, "creation_date": 1505937352, "post_id": 46330591, "comment_id": 79622292, "body": "@Siddharth, I agree, but it seems that in terms of performance modifying the list seems is faster than making a copy of the new list."}, {"owner": {"reputation": 406, "user_id": 4571055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NV49QeXoHLs/AAAAAAAAAAI/AAAAAAAAABE/JxgTVmq7aao/photo.jpg?sz=128", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4571055/siddharth"}, "edited": false, "score": 0, "creation_date": 1505937415, "post_id": 46330591, "comment_id": 79622335, "body": "@ lmiguelvargasf just upvoted your answer for the same"}], "tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": 4, "last_activity_date": 1505937265, "last_edit_date": 1505937265, "creation_date": 1505936661, "answer_id": 46330591, "question_id": 46330534, "link": "https://stackoverflow.com/questions/46330534/python-return-top-n-lists-from-sublist-having-maximum-length/46330591#46330591", "title": "Python: Return top n lists from sublist having maximum length", "body": "<p>You have two possible options, let's say:</p>\n\n<pre><code>l = [[{},{},{},{}],[{},{},{}],[{},{}],[{}],[]]\n</code></pre>\n\n<p>You can produce a completely new list and take the desired 3 elements:</p>\n\n<pre><code>sorted(l, key=len, reverse=True)[:3]\n</code></pre>\n\n<p>Or, you can sort your original list and them take the first 3 elements:</p>\n\n<pre><code>l.sort(key=len, reverse=True)\nl[:3]\n</code></pre>\n\n<p>In terms of performance, the second option seems faster:</p>\n\n<pre><code>In [1]: %timeit sorted(l, key=len, reverse=True)[:3]\n1.9 \u00b5s \u00b1 28.1 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n\nIn [2]: %%timeit\n    ...: l.sort(key=len, reverse=True)\n    ...: l[:3]\n    ...: \n1.22 \u00b5s \u00b1 33.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 2654306, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ad8490d05c0467bcf7201b23f0f7fe6b?s=128&d=identicon&r=PG", "display_name": "kartik", "link": "https://stackoverflow.com/users/2654306/kartik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 46330591, "answer_count": 2, "score": 2, "last_activity_date": 1505937291, "creation_date": 1505936447, "question_id": 46330534, "link": "https://stackoverflow.com/questions/46330534/python-return-top-n-lists-from-sublist-having-maximum-length", "title": "Python: Return top n lists from sublist having maximum length", "body": "<p>I have a list of lists, where each sublist is a list of objects.\nThe task is to return a list of top n sublists in the descending order of their length.</p>\n\n<p>Illustration:</p>\n\n<p><code>[[{},{},{},{}],[{},{},{}],[{},{}],[{}],[]]</code></p>\n\n<p>For above, I want to return a list of top 3 sublists as per length, which is </p>\n\n<p><code>[[{},{},{},{}],[{},{},{}],[{},{}]]</code></p>\n\n<p>as the sublists have largest length 3,2,1 respectively from the list.</p>\n"}, {"tags": ["python", "scala", "apache-spark", "jupyter-notebook", "jupyter"], "comments": [{"owner": {"reputation": 14729, "user_id": 2494262, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4a9b1f56d8fca99b42c3cf56affb943b?s=128&d=identicon&r=PG", "display_name": "MrE", "link": "https://stackoverflow.com/users/2494262/mre"}, "edited": false, "score": 1, "creation_date": 1505936470, "post_id": 46330467, "comment_id": 79621839, "body": "you might want to use Selenium to do this as if you were a user."}, {"owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "edited": false, "score": 1, "creation_date": 1505937996, "post_id": 46330467, "comment_id": 79622637, "body": "Have you considered exporting notebook code (with nbconvert via ssh), compiling to a jar and running by spark-submit?"}, {"owner": {"reputation": 366, "user_id": 1806925, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d05afc0c88b58186eb33296bd84e47eb?s=128&d=identicon&r=PG", "display_name": "Dimon", "link": "https://stackoverflow.com/users/1806925/dimon"}, "edited": false, "score": 0, "creation_date": 1505954901, "post_id": 46330467, "comment_id": 79628171, "body": "Please see some edits"}], "owner": {"reputation": 366, "user_id": 1806925, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d05afc0c88b58186eb33296bd84e47eb?s=128&d=identicon&r=PG", "display_name": "Dimon", "link": "https://stackoverflow.com/users/1806925/dimon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 808, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1505956741, "creation_date": 1505936210, "last_edit_date": 1505956741, "question_id": 46330467, "link": "https://stackoverflow.com/questions/46330467/interacting-with-jupyter-notebook-or-kernel-programmatically", "title": "Interacting with Jupyter notebook or kernel programmatically", "body": "<p>I have a Jupyter notebook server running inside a Docker container on some cluster and I run some scala code (with Spark) in a bunch of these notebooks. They show up externally at some URL (<code>http://blah.com:11111/tree</code>). I need to automate this by writing a python script that can run notebooks from anywhere: open URL, run it, shutdown and restart kernels if needed, etc. There is some mentioning on this <a href=\"https://stackoverflow.com/questions/37847440/starting-jupyter-notebook-programmatically-from-another-notebook\">here</a> and <a href=\"https://stackoverflow.com/questions/29949881/how-to-manage-and-communicate-with-multiple-ipython-jupyter-kernels-from-a-pytho\">there</a>, but it would be good to have a complete example: open HTTP request to notebook server in Python, interact with it, close it. The <a href=\"http://nbconvert.readthedocs.io/en/latest/execute_api.html\" rel=\"nofollow noreferrer\">nbconvert</a> approach wouldn't work in this case (assume no access to Jupyter server). The <a href=\"https://github.com/jupyter/kernel_gateway\" rel=\"nofollow noreferrer\">jupyter kernel_gateway</a> sounds interesting but I couldn't find a good example which shows how to open HTTP request to notebook server in Python, interact with it, close it. There are some interesting information <a href=\"https://jupyter-client.readthedocs.io/en/latest/messaging.html\" rel=\"nofollow noreferrer\">jupyter-client messaging</a> and <a href=\"https://github.com/jupyter/jupyter/wiki/Jupyter-Notebook-Server-API\" rel=\"nofollow noreferrer\">RESTful API</a>, but again I couldn't find an example that I'm looking for. Thank you.</p>\n\n<p>One way to do this is to create a notebook and put the following code in it:</p>\n\n<pre><code>import nbformat, os\nfrom nbconvert.preprocessors import ExecutePreprocessor\n\nprint os.getcwd()\n\nwith open('./my_notebook.ipynb') as f:\n  nb = nbformat.read(f, as_version=4)\n\nep = ExecutePreprocessor(timeout=30, kernel_name='python2')\nep.preprocess(nb, {'metadata': {'path': './'}})\n\nwith open('./my_notebook.ipynb', 'wt') as f:\n  nbformat.write(nb, f)\n</code></pre>\n\n<p>This code can be a base for further automation: reading <code>my_notebook.ipynb</code> as a json file, changing the code and cells in it, storing it back and re-running it again. All kinds of loops and branches and multi-processing can be developed based on this. However, this doesn't work for spylon-kernel and scala/Spark notebooks. When I do <code>kernel_name='spylon-kernel'</code> it gives me exception <code>NoSuchKernel: No such kernel named spylon-kernel</code></p>\n\n<p>I think the solution should come from <a href=\"https://jupyter-client.readthedocs.io/en/latest/index.html\" rel=\"nofollow noreferrer\">jupyter-client</a>, but I couldn't find a good example.</p>\n"}, {"tags": ["python", "django", "profiling", "cprofile"], "comments": [{"owner": {"reputation": 9336, "user_id": 1199464, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c46065552123344aa8fb40f4366790f3?s=128&d=identicon&r=PG", "display_name": "markwalker_", "link": "https://stackoverflow.com/users/1199464/markwalker"}, "edited": false, "score": 0, "creation_date": 1505937234, "post_id": 46330461, "comment_id": 79622216, "body": "<a href=\"https://stackoverflow.com/questions/1780599/i-never-really-understood-what-is-posix\" title=\"i never really understood what is posix\">stackoverflow.com/questions/1780599/&hellip;</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1505937805, "post_id": 46330461, "comment_id": 79622543, "body": "It&#39;s the <code>write</code> function from the <code>posix</code> module."}, {"owner": {"reputation": 14729, "user_id": 2494262, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4a9b1f56d8fca99b42c3cf56affb943b?s=128&d=identicon&r=PG", "display_name": "MrE", "link": "https://stackoverflow.com/users/2494262/mre"}, "edited": false, "score": 0, "creation_date": 1505940501, "post_id": 46330461, "comment_id": 79623804, "body": "What I am trying to figure is what is it doing here in Django? If it&#39;s writing to the filesystem, where is it called and for what purpose? How can I reduce it&#39;s usage?"}], "owner": {"reputation": 14729, "user_id": 2494262, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4a9b1f56d8fca99b42c3cf56affb943b?s=128&d=identicon&r=PG", "display_name": "MrE", "link": "https://stackoverflow.com/users/2494262/mre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1505940419, "creation_date": 1505936200, "last_edit_date": 1505940419, "question_id": 46330461, "link": "https://stackoverflow.com/questions/46330461/profiling-django-what-is-posix-write-function-doing", "title": "Profiling Django: what is {posix.write} function doing?", "body": "<p>Profiling Django app to figure out slow functions.</p>\n\n<p>I just added some middleware to track function calls, following this blog: <a href=\"http://agiliq.com/blog/2015/07/profiling-django-middlewares/\" rel=\"nofollow noreferrer\">http://agiliq.com/blog/2015/07/profiling-django-middlewares/</a>  and I see that the entry of cProfile stats for <code>{posix.write}</code> is one of the longest.</p>\n\n<p>Any idea what that is, and where that comes from? </p>\n\n<p>Other functions are referenced by their name and package path, so I'm not sure what <code>{posix.write}</code> means.</p>\n\n<p>the log looks like this:</p>\n\n<pre><code>204051 function calls (197141 primitive calls) in 0.997 seconds\n\n   Ordered by: internal time\n   List reduced from 1204 to 50 due to restriction &lt;50&gt;\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n       35    0.305    0.009    0.305    0.009 {posix.write}\n       95    0.206    0.002    0.207    0.002 {method 'execute' of 'psycopg2.extensions.cursor' objects}\n       73    0.088    0.001    0.088    0.001 {select.select}\n      898    0.023    0.000    0.047    0.000 /.venv/lib/python2.7/site-packages/django/db/models/base.py:388(__init__)\n     1642    0.012    0.000    0.371    0.000 /.venv/lib/python2.7/site-packages/django/template/base.py:806(_resolve_lookup)\n        1    0.010    0.010    0.011    0.011 {_sass.compile_filename}\n        1    0.009    0.009    0.009    0.009 {psycopg2._psycopg._connect}\n       34    0.009    0.000    0.009    0.000 {method 'recv' of '_socket.socket' objects}\n       39    0.007    0.000    0.007    0.000 {posix.read}\n9641/6353    0.006    0.000    0.321    0.000 {getattr}\n      173    0.006    0.000    0.026    0.000 /.venv/lib/python2.7/site-packages/django/core/urlresolvers.py:425(_reverse_with_prefix)\n    25769    0.006    0.000    0.007    0.000 {isinstance}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I understand that posix.write is the write function of posix. That I need to understand I guess is what part of Django uses that a lot and why it is showing up as taking 300+ms. </p>\n\n<p>How would I go about tracking this down?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1505936262, "post_id": 46330448, "comment_id": 79621713, "body": "<code>list.extend(a for _ in range(n))</code>?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 2, "creation_date": 1505936291, "post_id": 46330448, "comment_id": 79621728, "body": "Or just <code>lst.extend([a] * n)</code>. And don&#39;t call your variable <code>list</code>."}, {"owner": {"reputation": 989, "user_id": 5016244, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bdZPE.jpg?s=128&g=1", "display_name": "Theophile Dano", "link": "https://stackoverflow.com/users/5016244/theophile-dano"}, "edited": false, "score": 1, "creation_date": 1505937049, "post_id": 46330448, "comment_id": 79622121, "body": "maybe <code>lst += [a]*n</code> is the shortest"}], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 2, "creation_date": 1505936561, "post_id": 46330528, "comment_id": 79621903, "body": "Which is fine assuming <code>a</code> is immutable. Otherwise, <code>extend(a for _ in range(n))</code> is preferred (or you run into a host of side effects)."}, {"owner": {"reputation": 3515, "user_id": 3574628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5BJ2.jpg?s=128&g=1", "display_name": "luther", "link": "https://stackoverflow.com/users/3574628/luther"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1505938643, "post_id": 46330528, "comment_id": 79622961, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05: That doesn&#39;t change anything unless you assume <code>a</code> can substitute for a more complex expression. Since the question is not about mutability, I would assume the OP knows what they&#39;re doing by appending the same object many times."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 3, "last_activity_date": 1505936419, "creation_date": 1505936419, "answer_id": 46330528, "question_id": 46330448, "link": "https://stackoverflow.com/questions/46330448/how-to-append-an-item-to-a-list-for-a-certain-number-of-times/46330528#46330528", "title": "How to append an item to a list for a certain number of times?", "body": "<p>canonically, \"do something <code>n</code> times\" is accomplished with:</p>\n\n<pre><code>for _ in range(n):\n    do_something()\n</code></pre>\n\n<p>However for this specific application, it's shorter to use <code>list.extend</code> and a list of <code>a</code>s.</p>\n\n<pre><code>original_list.extend([a] * n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1505936593, "post_id": 46330566, "comment_id": 79621918, "body": "Would you really do it this way when there are better ways to do it?"}, {"owner": {"reputation": 21, "user_id": 5925749, "user_type": "registered", "profile_image": "https://graph.facebook.com/1012879612101845/picture?type=large", "display_name": "Landon Tholen", "link": "https://stackoverflow.com/users/5925749/landon-tholen"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1505937159, "post_id": 46330566, "comment_id": 79622176, "body": "If the requirement dictated that the string be shorter than what OP originally posted I would have tried it at first. However; that said, I&#39;m a Python novice working to learn more and seeing the list.extend that you posted in the comments above I would definitely take that route instead if I had known about it."}], "tags": [], "owner": {"reputation": 21, "user_id": 5925749, "user_type": "registered", "profile_image": "https://graph.facebook.com/1012879612101845/picture?type=large", "display_name": "Landon Tholen", "link": "https://stackoverflow.com/users/5925749/landon-tholen"}, "is_accepted": false, "score": 1, "last_activity_date": 1505936548, "creation_date": 1505936548, "answer_id": 46330566, "question_id": 46330448, "link": "https://stackoverflow.com/questions/46330448/how-to-append-an-item-to-a-list-for-a-certain-number-of-times/46330566#46330566", "title": "How to append an item to a list for a certain number of times?", "body": "<p>Perhaps with the range function if you knew n</p>\n\n<pre><code>for x in range(n):\n    list.append(a)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8638062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee4e96cd9eded8f07bfcee021e41c42?s=128&d=identicon&r=PG&f=1", "display_name": "Kayden S", "link": "https://stackoverflow.com/users/8638062/kayden-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505936548, "creation_date": 1505936141, "last_edit_date": 1505936289, "question_id": 46330448, "link": "https://stackoverflow.com/questions/46330448/how-to-append-an-item-to-a-list-for-a-certain-number-of-times", "title": "How to append an item to a list for a certain number of times?", "body": "<p>I want to append <code>a</code> <code>n</code> times to a list, any shorter ways than this:</p>\n\n<pre><code>while n:\n    list.append(a)\n    n -= 1\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4638, "user_id": 1034105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f41407c07a9be2ea02eea2e8406e0fd?s=128&d=identicon&r=PG", "display_name": "Kalamarico", "link": "https://stackoverflow.com/users/1034105/kalamarico"}, "edited": false, "score": 1, "creation_date": 1505936239, "post_id": 46330429, "comment_id": 79621702, "body": "What Operating System are you using?"}], "answers": [{"comments": [{"owner": {"reputation": 2201, "user_id": 1488801, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6uYLp.jpg?s=128&g=1", "display_name": "James Elderfield", "link": "https://stackoverflow.com/users/1488801/james-elderfield"}, "edited": false, "score": 1, "creation_date": 1505936871, "post_id": 46330487, "comment_id": 79622035, "body": "Note that this is Windows-specific"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 2201, "user_id": 1488801, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6uYLp.jpg?s=128&g=1", "display_name": "James Elderfield", "link": "https://stackoverflow.com/users/1488801/james-elderfield"}, "edited": false, "score": 1, "creation_date": 1505936988, "post_id": 46330487, "comment_id": 79622091, "body": "@JamesElderfield I think any solution will be OS-specific, but it&#39;s good to call out which OS. Too bad the question doesn&#39;t specify one."}, {"owner": {"reputation": 6078, "user_id": 3950422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/czF1r.gif?s=128&g=1", "display_name": "bhansa", "link": "https://stackoverflow.com/users/3950422/bhansa"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1505937112, "post_id": 46330487, "comment_id": 79622150, "body": "@MarkRansom I think I should just add in my solution."}, {"owner": {"reputation": 119, "user_id": 4876985, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f95d41057600fc4c097e005e13afc77c?s=128&d=identicon&r=PG&f=1", "display_name": "MKatana", "link": "https://stackoverflow.com/users/4876985/mkatana"}, "edited": false, "score": 0, "creation_date": 1505937955, "post_id": 46330487, "comment_id": 79622617, "body": "Yeah, I&#39;m using a Windows PC. For the sleep option, would it be the same as well? os.system(&quot;sleep /t {}&quot;.format(time))"}, {"owner": {"reputation": 1648, "user_id": 8360167, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-b2nsDFjjgeY/AAAAAAAAAAI/AAAAAAAAFYk/A_O1NkoyPpE/photo.jpg?sz=128", "display_name": "elf", "link": "https://stackoverflow.com/users/8360167/elf"}, "edited": false, "score": 1, "creation_date": 1505938843, "post_id": 46330487, "comment_id": 79623069, "body": "You can make this the address for a shortcut for ease of access"}], "tags": [], "owner": {"reputation": 6078, "user_id": 3950422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/czF1r.gif?s=128&g=1", "display_name": "bhansa", "link": "https://stackoverflow.com/users/3950422/bhansa"}, "is_accepted": true, "score": 1, "last_activity_date": 1505937135, "last_edit_date": 1505937135, "creation_date": 1505936284, "answer_id": 46330487, "question_id": 46330429, "link": "https://stackoverflow.com/questions/46330429/shutdown-computer-in-x-amount-of-hours/46330487#46330487", "title": "Shutdown computer in X amount of hours", "body": "<p>You can put the timeout for shutdown on <strong>Windows</strong> using:</p>\n\n<pre><code>shutdown /t xxx\n</code></pre>\n\n<p>Set the time-out period before shutdown to xxx seconds.</p>\n\n<blockquote>\n  <p>The valid range is 0-315360000 (10 years), with a default of 30.\n  If the timeout period is greater than 0, the /f parameter is implied.  </p>\n</blockquote>\n\n<p>Also you can always look for other options for command using:</p>\n\n<pre><code>shutdown /help\n</code></pre>\n\n<p>In your code:</p>\n\n<pre><code>os.system(\"shutdown /t {}\".format(time))\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 4876985, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f95d41057600fc4c097e005e13afc77c?s=128&d=identicon&r=PG&f=1", "display_name": "MKatana", "link": "https://stackoverflow.com/users/4876985/mkatana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 46330487, "answer_count": 1, "score": 1, "last_activity_date": 1505937135, "creation_date": 1505936075, "question_id": 46330429, "link": "https://stackoverflow.com/questions/46330429/shutdown-computer-in-x-amount-of-hours", "title": "Shutdown computer in X amount of hours", "body": "<p>I'm new to Python and am trying to write a program. I would like this program to ask me if I would like to shut down, or put my computer to sleep. Then ask me in how many minutes I would like this action to take place.</p>\n\n<p>I want to create this so that I don't leave my computer on all night when I'm listening to a music or podcast in bed. So far, I have gotten it to ask me if I would like to sleep/shutdown and for how long. I'm not sure what the syntax is to put the computer to shutdown in x amount of time. If somebody could tell me how, that would be much appreciated!</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>option = input('Enter \"SD\" to Shutdown or \"S\" to sleep: ')\r\n\r\nif option == \"SD\" or option == \"sd\":\r\n    print('You chose to Shutdown')\r\n    time = input('In how many hours would you like to shutdown the PC? ')\r\n\r\n    #   os.system(\"shutdown /p\")\r\n\r\n\r\nelif option == \"S\" or option == \"s\":\r\n    print('You chose to sleep')\r\n    time = input('In how many hours would you like to put the PC to sleep? ')</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "serial-port", "pyserial", "pexpect"], "owner": {"reputation": 103, "user_id": 5120246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2cab0300910c32c6c9248a50270ce4a?s=128&d=identicon&r=PG&f=1", "display_name": "Bootstrap", "link": "https://stackoverflow.com/users/5120246/bootstrap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505935990, "creation_date": 1505935990, "question_id": 46330407, "link": "https://stackoverflow.com/questions/46330407/sometimes-losing-byte-when-using-pexpect-and-pyserial", "title": "Sometimes Losing Byte When Using Pexpect and Pyserial", "body": "<p>I've been using Pexpect and Pyserial together and usually it works fine, but occasionally I lose a byte. What I'm trying to do is receive a string of hex bytes where the first few bytes are always the same, but the bytes after that are different, and then I want to print the different bytes. A simplified example of what I'm doing is:</p>\n\n<p>('\\x00\\x01\\x02\\xab\\xcd\\xef\\xff') is sent where ff is a flag signalling the \nend of the signal)</p>\n\n<pre><code>ser = serial.Serial('/dev/ttyUSB0')\nds = fdpexpect.fdspawn(ser)\n\nds.expect('\\x00\\x01\\x02')\ndata = ser.read(1)\nprint(data)\n</code></pre>\n\n<p>The issue I'm running into is data is sometimes \\xab while other times the \\xab byte is somehow lost and instead it is \\xcd. I'm running on a raspberry pi using Ubunut MATE 16.04.02 if that makes any difference.</p>\n"}, {"tags": ["python", "if-statement", "words"], "comments": [{"owner": {"reputation": 3575, "user_id": 5334188, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5174dfb78299414039e19e27ce37efde?s=128&d=identicon&r=PG&f=1", "display_name": "be_good_do_good", "link": "https://stackoverflow.com/users/5334188/be-good-do-good"}, "edited": false, "score": 0, "creation_date": 1505936291, "post_id": 46330391, "comment_id": 79621727, "body": "can you explain your game with examples of 2 words"}, {"owner": {"reputation": 339, "user_id": 4359551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2dRwl.gif?s=128&g=1", "display_name": "user4359551", "link": "https://stackoverflow.com/users/4359551/user4359551"}, "edited": false, "score": 2, "creation_date": 1505936299, "post_id": 46330391, "comment_id": 79621732, "body": "So, you have the same two <code>elif</code> statements. How can the code ever go to the second <code>elif</code>, when your condition is getting picked at the first <code>elif</code> itself? <code>1 != 2</code> is the same as <code>2 != 1</code> in programming. and gives the same result <code>True</code>."}, {"owner": {"reputation": 11, "user_id": 8067371, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vwmoez7Dn4E/AAAAAAAAAAI/AAAAAAAAAYo/8nZee6V6Y54/photo.jpg?sz=128", "display_name": "kryleas", "link": "https://stackoverflow.com/users/8067371/kryleas"}, "reply_to_user": {"reputation": 3575, "user_id": 5334188, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5174dfb78299414039e19e27ce37efde?s=128&d=identicon&r=PG&f=1", "display_name": "be_good_do_good", "link": "https://stackoverflow.com/users/5334188/be-good-do-good"}, "edited": false, "score": 0, "creation_date": 1505936372, "post_id": 46330391, "comment_id": 79621775, "body": "@be_good_do_good Ex. P1:banana P2:narnia P1:ian P2:animal etc. The goal of the game is for one of the players to not be able to come up with a word that beings with the last two letters of the previous words"}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1505936512, "post_id": 46330391, "comment_id": 79621871, "body": "@kyleas, can you provide an example of the input you have and the expected output?"}, {"owner": {"reputation": 154, "user_id": 4415080, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I-LTTG-kW3Q/AAAAAAAAAAI/AAAAAAAAAoQ/GX8PuDqHwsU/photo.jpg?sz=128", "display_name": "aLoneStrider", "link": "https://stackoverflow.com/users/4415080/alonestrider"}, "edited": false, "score": 0, "creation_date": 1505936527, "post_id": 46330391, "comment_id": 79621883, "body": "You should get an input in each iteration and compare it to your history"}, {"owner": {"reputation": 2839, "user_id": 5322574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fWrLH.jpg?s=128&g=1", "display_name": "Jeremy McGibbon", "link": "https://stackoverflow.com/users/5322574/jeremy-mcgibbon"}, "edited": false, "score": 0, "creation_date": 1505936844, "post_id": 46330391, "comment_id": 79622024, "body": "One of your bugs is probably that the second <code>elif</code> should say <code>second[-2:] != first[:2]</code>, but there are other issues."}, {"owner": {"reputation": 11, "user_id": 8067371, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vwmoez7Dn4E/AAAAAAAAAAI/AAAAAAAAAYo/8nZee6V6Y54/photo.jpg?sz=128", "display_name": "kryleas", "link": "https://stackoverflow.com/users/8067371/kryleas"}, "reply_to_user": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1505937562, "post_id": 46330391, "comment_id": 79622418, "body": "@lmiguelvargasf   P1: banana P2: narnia P1:ian P2:animal So basically when one of the players fails to accomplish the task of matching the last 2 letters they lose the game"}, {"owner": {"reputation": 11, "user_id": 8067371, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vwmoez7Dn4E/AAAAAAAAAAI/AAAAAAAAAYo/8nZee6V6Y54/photo.jpg?sz=128", "display_name": "kryleas", "link": "https://stackoverflow.com/users/8067371/kryleas"}, "reply_to_user": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1505942240, "post_id": 46330391, "comment_id": 79624576, "body": "@lmiguelvargasf yours is in the format I originally wanted, so yes, yours is the perfect one, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8067371, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vwmoez7Dn4E/AAAAAAAAAAI/AAAAAAAAAYo/8nZee6V6Y54/photo.jpg?sz=128", "display_name": "kryleas", "link": "https://stackoverflow.com/users/8067371/kryleas"}, "edited": false, "score": 0, "creation_date": 1505938916, "post_id": 46330868, "comment_id": 79623110, "body": "YES! This is what i wanted. Ty!"}], "tags": [], "owner": {"reputation": 154, "user_id": 4415080, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I-LTTG-kW3Q/AAAAAAAAAAI/AAAAAAAAAoQ/GX8PuDqHwsU/photo.jpg?sz=128", "display_name": "aLoneStrider", "link": "https://stackoverflow.com/users/4415080/alonestrider"}, "is_accepted": false, "score": -1, "last_activity_date": 1505937720, "creation_date": 1505937720, "answer_id": 46330868, "question_id": 46330391, "link": "https://stackoverflow.com/questions/46330391/same-input-2-different-results/46330868#46330868", "title": "Same input 2 different results", "body": "<p>You should change your comparison scenario actually</p>\n\n<pre><code> used_words=[]\n\n while True:\n     word=raw_input(\"Enter sth \\n\")\n\n     if(len(used_words) == 0):\n         used_words.append(word)\n         continue\n\n     if(used_words[-1][-2:] == word[:2] and word not in used_words):\n         used_words.append(word)\n\n     elif(word in used_words):\n         print \"You lose! \\n\"\n         print word, \" is previously used\"\n         break\n\n     elif(used_words[-1][-2:] != word[:2]):\n         print \"You lose! \\n\"\n         print \"The first two characters you had to start with was: \", used_words[-1][-2:]\n         break\n     else:\n         break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": -2, "last_activity_date": 1505939319, "last_edit_date": 1505939319, "creation_date": 1505937909, "answer_id": 46330915, "question_id": 46330391, "link": "https://stackoverflow.com/questions/46330391/same-input-2-different-results/46330915#46330915", "title": "Same input 2 different results", "body": "<p>I think the problem is in your conditional <code>if first[-2:] == second[:2] and first and second not in used_words:</code> because <code>and first</code> basically is testing that <code>first</code> is not an empty string, so change it to <code>if first[-2:] == second[:2] and first not in used_words and second not in used_words:</code>. However, there are other change that should make in order to achiever what you want:</p>\n\n<pre><code>player_one = raw_input(\"Player one \\n\")\nused_words = [player_one]\n\nwhile True:\n    player_two = raw_input(\"Player two \\n\")        \n\n    if used_words[-1][-2:] != player_two[:2] and player_two not in used_words:\n         print \"Player one wins! \\n\"\n         print \"The word you had to match was: \", player_one\n         break\n\n    used_words.append(player_two)\n    player_one = raw_input(\"Player one \\n\")\n\n    if used_words[-1][-2:] != player_one[:2] and player_one not in used_words:\n         print \"Player two wins! \\n\"\n         print \"The word you had to match was: \", player_two\n         break\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8067371, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vwmoez7Dn4E/AAAAAAAAAAI/AAAAAAAAAYo/8nZee6V6Y54/photo.jpg?sz=128", "display_name": "kryleas", "link": "https://stackoverflow.com/users/8067371/kryleas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 46330915, "answer_count": 2, "score": 0, "last_activity_date": 1532963332, "creation_date": 1505935922, "last_edit_date": 1532963332, "question_id": 46330391, "link": "https://stackoverflow.com/questions/46330391/same-input-2-different-results", "title": "Same input 2 different results", "body": "<p>I'm extremely new to programming, and I hope someone could help me. \nI'm trying to make a game where 2 players need to input words based on the last 2 letters of the word the other player placed into.\nI got that part to work, but I cannot get the part which decides the winner. It's the same 2 <code>elif</code> statements but they should print out different results.</p>\n\n<p>Ex.\nP1: banana P2: narnia P1:ian P2:animal\nSo basically when one of the players fails to accomplish the task of matching the last 2 letters they lose the game</p>\n\n<pre><code> used_words=[]\n\n while True:\n     player_one=raw_input(\"Player one \\n\")\n     first= list(player_one)\n     player_two=raw_input(\"Player two \\n\")\n     second=list(player_two)\n\n     if first[-2:] == second[:2] and first and second not in used_words:\n         used_words.append(player_one)\n         used_words.append(player_two)\n         continue\n\n     elif first[-2:] != second[:2]:\n         print \"Player one wins! \\n\"\n         print \"The word you had to match was: \", second\n         break\n\n     elif second[:2] != first[-2:]:\n         print \"Player two wins!\"\n         print \"The word you had to match was: \", first\n         break\n\n    else:\n         break\n</code></pre>\n"}]