[{"tags": ["python", "matplotlib", "pandas", "plot", "subplot"], "comments": [{"owner": {"reputation": 784, "user_id": 3645626, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/37a342881c318722190205f1d2f57214?s=128&d=identicon&r=PG&f=1", "display_name": "derchambers", "link": "https://stackoverflow.com/users/3645626/derchambers"}, "edited": false, "score": 0, "creation_date": 1423108650, "post_id": 28333760, "comment_id": 45017977, "body": "Can you show what Data1 (the data frame) looks like?"}, {"owner": {"reputation": 373, "user_id": 3191569, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/792c6e286135299ccc833fd3180c3e6a?s=128&d=identicon&r=PG&f=1", "display_name": "user3191569", "link": "https://stackoverflow.com/users/3191569/user3191569"}, "reply_to_user": {"reputation": 784, "user_id": 3645626, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/37a342881c318722190205f1d2f57214?s=128&d=identicon&r=PG&f=1", "display_name": "derchambers", "link": "https://stackoverflow.com/users/3645626/derchambers"}, "edited": false, "score": 0, "creation_date": 1423135160, "post_id": 28333760, "comment_id": 45029597, "body": "@user3645626 I&#39;ve added a link to an example of how one of the Data frames would look like would that be enough or do you think all 6 would be more helpful?"}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 3191569, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/792c6e286135299ccc833fd3180c3e6a?s=128&d=identicon&r=PG&f=1", "display_name": "user3191569", "link": "https://stackoverflow.com/users/3191569/user3191569"}, "edited": false, "score": 0, "creation_date": 1423130211, "post_id": 28336902, "comment_id": 45026726, "body": "I tried your suggestion but I keep getting <code>IndexError: index 3 is out of bounds for axis 1 with size 3</code> however when i change the line <code>fig, ax</code> to <code>fig, ax = plt.subplots(2, 6)</code> a plot is produced where the top row is exactly the same as the bottom row, when <code>print row, col</code> is added I get <code>0,0 0,1 0,2 0,3 </code>instead the loop should be giving <code>0,0  0,1 0,2 1,0 1,1 1,2</code>"}, {"owner": {"reputation": 1681, "user_id": 2930651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/19dc28d33a5b5eaa61514a7e92eb50df?s=128&d=identicon&r=PG&f=1", "display_name": "knightofni", "link": "https://stackoverflow.com/users/2930651/knightofni"}, "reply_to_user": {"reputation": 373, "user_id": 3191569, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/792c6e286135299ccc833fd3180c3e6a?s=128&d=identicon&r=PG&f=1", "display_name": "user3191569", "link": "https://stackoverflow.com/users/3191569/user3191569"}, "edited": false, "score": 0, "creation_date": 1423193746, "post_id": 28336902, "comment_id": 45059505, "body": "haha, sorry, i read too fast, for some reason i thought there was only 3 files. Have a look at the updated code."}], "tags": [], "owner": {"reputation": 1681, "user_id": 2930651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/19dc28d33a5b5eaa61514a7e92eb50df?s=128&d=identicon&r=PG&f=1", "display_name": "knightofni", "link": "https://stackoverflow.com/users/2930651/knightofni"}, "is_accepted": true, "score": 2, "last_activity_date": 1423193781, "last_edit_date": 1423193781, "creation_date": 1423114708, "answer_id": 28336902, "question_id": 28333760, "link": "https://stackoverflow.com/questions/28333760/plot-panda-series-in-separate-subplots-using-matplotlib/28336902#28336902", "title": "Plot panda series in separate subplots using matplotlib", "body": "<p>The problem is in your loop</p>\n\n<pre><code>for i in range(2):  # Iterating rows of the plot\n    for j in range(50, 101, 10): # Iterating your file names\n        for e in range(3): # iterating the columns of the plot\n</code></pre>\n\n<p>The end result is that you iterate all the columns for <strong>each file name</strong></p>\n\n<p>For it two work, you should have only two nesting levels in your loop. Potential code (<strong>updated</strong>) :</p>\n\n<pre><code>import matplotlib.pylab as plt\nimport pandas as pd\nfig, ax = plt.subplots(2, 3)\nfor row in range(2):\n    for col in range(3):\n        f_index = range(50, 101, 10)[row+1 * col]\n        print row, col, f_index\n        Var=(700* f_index)/ 100\n        Names1 = ['ig','M_GZ']\n        Data1 = pd.read_csv('~/File/JTL_'+str(Var)+'/GZ.csv', names=Names1)\n        ig = Data1['ig']\n        M_GZ=Data1['M_GZ']\n        MGZ = Data1[Data1.M_GZ != 0]\n        ax[row, col].plot(MGZ['ig'][:4], MGZ['M_GZ'][:4], '--v',linewidth=1.75)\nplt.tight_layout()\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 3191569, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/792c6e286135299ccc833fd3180c3e6a?s=128&d=identicon&r=PG&f=1", "display_name": "user3191569", "link": "https://stackoverflow.com/users/3191569/user3191569"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1130, "favorite_count": 0, "accepted_answer_id": 28336902, "answer_count": 1, "score": 2, "last_activity_date": 1423193781, "creation_date": 1423093655, "last_edit_date": 1423135094, "question_id": 28333760, "link": "https://stackoverflow.com/questions/28333760/plot-panda-series-in-separate-subplots-using-matplotlib", "title": "Plot panda series in separate subplots using matplotlib", "body": "<p>Hoping to get some help please, I'm trying plot simulation data in separate subplots using pandas and matplotlib my code so far is: </p>\n\n<pre><code>import matplotlib.pylab as plt\nimport pandas as pd\nfig, ax = plt.subplots(2, 3)\nfor i in range(2):\n    for j in range(50, 101, 10):\n        for e in range(3):\n            Var=(700* j)/ 100\n            Names1 = ['ig','M_GZ']\n            Data1 = pd.read_csv('~/File/JTL_'+str(Var)+'/GZ.csv', names=Names1)\n            ig = Data1['ig']\n            M_GZ=Data1['M_GZ']\n            MGZ = Data1[Data1.M_GZ != 0]\n            ax[i, e].plot(MGZ['ig'][:4], MGZ['M_GZ'][:4], '--v', linewidth=1.75)\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p>But the code gives me 6 duplicate copies of the same plot:\n<img src=\"https://i.stack.imgur.com/JRj3l.png\" alt=\"enter image description here\">\ninstead of each iteration of <code>Var</code> having its own plot, I've tried changing the loop and using different variations like:</p>\n\n<pre><code>fig = plt.figure()\nfor i in range(1, 7):\n      ax = fig.add_subplot(2, 3, i)\n            for j in range(50, 101, 10):                \n                     Var=(700* j)/ 100\n                     Names1 = ['ig','M_GZ']\n                     Data1 = pd.read_csv('~/File/JTL_'+str(Var)+'/GZ.csv', names=Names1)\n                     ig = Data1['ig']\n                     M_GZ=Data1['M_GZ']\n                     MGZ = Data1[Data1.M_GZ != 0]\n                     ax.plot(MGZ['ig'][:4], MGZ['M_GZ'][:4], '--v', linewidth=1.75)\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p>but that changes nothing I still get the same plot as above. Any help would be appreciated, I'm hoping that each subplot contains one set of data instead of all six </p>\n\n<p>This is a <a href=\"https://www.dropbox.com/s/w0q77wk8rd3gyon/GZ_manual_method.csv?dl=0\" rel=\"nofollow noreferrer\">Link</a> to one of the Dataframes each subdirectory <code>~/File/JTL_'+str(Var)+'/</code> contains a copy of this file there are 6 in total </p>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 7032, "user_id": 2286990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987a406e2c99b19d0beaeb67c32ecf78?s=128&d=identicon&r=PG", "display_name": "lifus", "link": "https://stackoverflow.com/users/2286990/lifus"}, "edited": false, "score": 0, "creation_date": 1423093921, "post_id": 28333759, "comment_id": 45014385, "body": "Replace <code>&#39;charles&#39;,94</code> with <code>&#39;charles&#39;:94</code>"}, {"owner": {"reputation": 448, "user_id": 4040096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2183110b97c8cf6bca6140493a4a79a?s=128&d=identicon&r=PG&f=1", "display_name": "Registered User", "link": "https://stackoverflow.com/users/4040096/registered-user"}, "edited": false, "score": 1, "creation_date": 1424052017, "post_id": 28333759, "comment_id": 45381749, "body": "Next time you should review your code carefully, because as you can see here, a small error was the fix on your program :)"}], "answers": [{"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1423094180, "post_id": 28333801, "comment_id": 45014465, "body": "ofc ... you didnt really expect python to actually require imports just for something simple like updating a dictionary did you"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 4, "last_activity_date": 1423093933, "creation_date": 1423093933, "answer_id": 28333801, "question_id": 28333759, "link": "https://stackoverflow.com/questions/28333759/python-unable-to-add-a-new-keyvalue-to-a-dictionary/28333801#28333801", "title": "Python: Unable to add a new key:value to a dictionary", "body": "<pre><code>test1.update({'charles',100})\n</code></pre>\n\n<p>is updating the dict with a set not a dict, which it clearly cannot use to update ... instead of sets pass it dicts</p>\n\n<pre><code>test1.update({'charles':100})\n</code></pre>\n\n<p>just to demonstrate</p>\n\n<pre><code>{1,2,3,4,4,5,6}   # a set that will contain 1,2,3,4,5,6\n{1:2,3:4,4:5}   # a dict with 3 elements dict(1=2,3=4,4=5)\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4480584"}, "edited": false, "score": 0, "creation_date": 1423094137, "post_id": 28333826, "comment_id": 45014452, "body": "line 4 of your&#39;s is where I screwed up. line 8 i didn&#39;t know you could do it that way!"}], "tags": [], "owner": {"reputation": 929, "user_id": 3599340, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/684f1fc46c99c18bc16d0d0b9d0ad541?s=128&d=identicon&r=PG&f=1", "display_name": "datasci", "link": "https://stackoverflow.com/users/3599340/datasci"}, "is_accepted": false, "score": 0, "last_activity_date": 1423094072, "last_edit_date": 1495535320, "creation_date": 1423094072, "answer_id": 28333826, "question_id": 28333759, "link": "https://stackoverflow.com/questions/28333759/python-unable-to-add-a-new-keyvalue-to-a-dictionary/28333826#28333826", "title": "Python: Unable to add a new key:value to a dictionary", "body": "<p>See answer here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1024847/add-to-a-dictionary-in-python\">Add new keys to a dictionary?</a></p>\n\n<p>To update:</p>\n\n<pre><code>#### Inserting/Updating value ####\ndata['a']=1  # updates if 'a' exists, else adds 'a'\n# OR #\ndata.update({'a':1})\n# OR #\ndata.update(dict(a=1))\n# OR #\ndata.update(a=1)\n# OR #\ndata.update([(a,1)])\n</code></pre>\n\n<p>Instead of this:</p>\n\n<pre><code>test3.update({'charles',94})\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4516987"}, "is_accepted": false, "score": 1, "last_activity_date": 1423096619, "creation_date": 1423096619, "answer_id": 28334245, "question_id": 28333759, "link": "https://stackoverflow.com/questions/28333759/python-unable-to-add-a-new-keyvalue-to-a-dictionary/28334245#28334245", "title": "Python: Unable to add a new key:value to a dictionary", "body": "<p>If I understand your need you need add new values not update and for that operation you need change update for setdefault method. I have tested on Aptana Studio that code:</p>\n\n<pre><code>def tests():\n    test1 = {'craig':88, 'jeanie':100}\n    test2 = {'craig':85, 'jeanie':95}\n    test3 = {'craig':80, 'jeanie':98}\n    return test1,test2,test3\ndef actions(test1,test2,test3):\n    test1.setdefault('john',95)\n    test1.setdefault('chris',92)\n    test1.setdefault('charles',100)\n    test2.setdefault('john',100)\n    test2.setdefault('chris',96)\n    test2.setdefault('charles',98)\n    test3.setdefault('john',97)\n    test3.setdefault('chris',100)\n    test3.setdefault('charles',94)\n    return test1,test2,test3\ndef main():\n    one,two,three = tests()\n    one,two,three = actions(one,two,three)\n    print(one,two,three)\nmain()\n</code></pre>\n\n<p>and get response:</p>\n\n<pre><code>one - {'john': 95, 'charles': 100, 'jeanie': 100, 'chris': 92, 'craig': 88} \ntwo - {'john': 100, 'charles': 98, 'jeanie': 95, 'chris': 96, 'craig': 85} \nthree - {'john': 97, 'charles': 94, 'jeanie': 98, 'chris': 100, 'craig': 80}\n</code></pre>\n\n<p>Your problem is that update search one dictionary with key for update your value and not insert but setdefault insert new pair key:value with that syntax case not exists and return the value for one key case her exists.</p>\n\n<p>Good work for you,</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4480584"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2856, "favorite_count": 0, "accepted_answer_id": 28333801, "answer_count": 3, "score": 0, "last_activity_date": 1423098636, "creation_date": 1423093640, "last_edit_date": 1423098636, "question_id": 28333759, "link": "https://stackoverflow.com/questions/28333759/python-unable-to-add-a-new-keyvalue-to-a-dictionary", "title": "Python: Unable to add a new key:value to a dictionary", "body": "<p>I am making a dictionary for storing tests and their grades for different students. </p>\n\n<pre><code>def tests():\n    test1 = {'craig':88, 'jeanie':100}\n    test2 = {'craig':85, 'jeanie':95}\n    test3 = {'craig':80, 'jeanie':98}\n    return test1,test2,test3\ndef actions(test1,test2,test3):\n    test1.update({'john':95})\n    test1.update({'chris':92})\n    test1.update({'charles',100})\n    test2.update({'john':100})\n    test2.update({'chris':96})\n    test2.update({'charles',98})\n    test3.update({'john':97})\n    test3.update({'chris':100})\n    test3.update({'charles',94})\n    return test1,test2,test3\ndef main():\n    one,two,three = tests()\n    one,two,three = actions(one,two,three)\n    print (test1,test2,test3)\nmain()\n</code></pre>\n\n<p>However, when I try to append a new <code>key:value</code> to my dicts two errors come up:</p>\n\n<p>First:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\file.py\", line 26, in &lt;module&gt;\n    main()\n  File \"C:\\file.py\", line 24, in main\n    one,two,three = actions(one,two,three)\n  File \"C:\\file.py\", line 14, in actions\n    test1.update({'charles',100})\nTypeError: cannot convert dictionary update sequence element #0 to a sequence\n</code></pre>\n\n<p>Second:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\file.py\", line 26, in &lt;module&gt;\n    main()\n  File \"C:\\file.py\", line 24, in main\n    one,two,three = actions(one,two,three)\n  File \"C:\\file.py\", line 14, in actions\n    test1.update({'charles',100})\nValueError: dictionary update sequence element #0 has length 7; 2 is required\n</code></pre>\n\n<p>If I run it over and over again, sometimes the first error comes up, sometimes the other.</p>\n\n<p>I do not want any imports such as <code>collections</code>.</p>\n"}, {"tags": ["python", "for-loop"], "comments": [{"owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1423093613, "post_id": 28333738, "comment_id": 45014271, "body": "I assume here that <code>k[i::-1]</code> is really <code>x[i::-1]</code>, isn&#39;t it?"}, {"owner": {"reputation": 10394, "user_id": 1151929, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/922d81e934a0f2e3eb8b2c2d18022830?s=128&d=identicon&r=PG", "display_name": "sarveshseri", "link": "https://stackoverflow.com/users/1151929/sarveshseri"}, "edited": false, "score": 0, "creation_date": 1423093913, "post_id": 28333738, "comment_id": 45014384, "body": "Or you can do <code>range( i, -1, -1 )</code> to get  <code>[ i, i-1, i-2, ...., 2, 1, 0]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1423093852, "post_id": 28333774, "comment_id": 45014362, "body": "And <code>x[i]</code> &gt; <code>i</code>, as you&#39;re there"}, {"owner": {"reputation": 102532, "user_id": 248823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6605deca5924e84df1a4847f607b87c6?s=128&d=identicon&r=PG", "display_name": "Marcin", "link": "https://stackoverflow.com/users/248823/marcin"}, "reply_to_user": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1423093926, "post_id": 28333774, "comment_id": 45014386, "body": "@RicardoC&#225;rdenes What do you mean?"}, {"owner": {"reputation": 760, "user_id": 2258883, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4406bbb4e787ad5b9751214c8dbe6125?s=128&d=identicon&r=PG", "display_name": "SugaKookie", "link": "https://stackoverflow.com/users/2258883/sugakookie"}, "edited": false, "score": 0, "creation_date": 1423093945, "post_id": 28333774, "comment_id": 45014395, "body": "Sorry, I don&#39;t understand your comment."}, {"owner": {"reputation": 8215, "user_id": 263162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08dc7b6c240ed52a7aadf8603cca0766?s=128&d=identicon&r=PG", "display_name": "Ricardo C&#225;rdenes", "link": "https://stackoverflow.com/users/263162/ricardo-c%c3%a1rdenes"}, "edited": false, "score": 0, "creation_date": 1423097517, "post_id": 28333774, "comment_id": 45015335, "body": "<code>x</code> is a range of integers. In this case there&#39;s no sense in using <code>x[i]</code>, because <code>i</code>... is <code>x[i]</code>! Same as you&#39;re printing <code>k</code> straight, instead of <code>x[k]</code>"}], "tags": [], "owner": {"reputation": 102532, "user_id": 248823, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6605deca5924e84df1a4847f607b87c6?s=128&d=identicon&r=PG", "display_name": "Marcin", "link": "https://stackoverflow.com/users/248823/marcin"}, "is_accepted": true, "score": 2, "last_activity_date": 1423093745, "creation_date": 1423093745, "answer_id": 28333774, "question_id": 28333738, "link": "https://stackoverflow.com/questions/28333738/python-nested-for-loop-counting-backwards/28333774#28333774", "title": "Python Nested For Loop Counting Backwards", "body": "<p>I think this should be like this:</p>\n\n<pre><code>x = range(0,10)\nfor i in x:\n    print 'i = ',x[i]      \n    for k in x[i::-1]:\n        print 'k = ', k\n    print(\"\\n\")\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>i =  0\nk =  0\n\n\ni =  1\nk =  1\nk =  0\n\n\ni =  2\nk =  2\nk =  1\nk =  0\n\n\ni =  3\nk =  3\nk =  2\nk =  1\nk =  0\n\n\ni =  4\nk =  4\nk =  3\nk =  2\nk =  1\nk =  0\n\n\ni =  5\nk =  5\nk =  4\nk =  3\nk =  2\nk =  1\nk =  0\n\n\ni =  6\nk =  6\nk =  5\nk =  4\nk =  3\nk =  2\nk =  1\nk =  0\n\n\ni =  7\nk =  7\nk =  6\nk =  5\nk =  4\nk =  3\nk =  2\nk =  1\nk =  0\n\n\ni =  8\nk =  8\nk =  7\nk =  6\nk =  5\nk =  4\nk =  3\nk =  2\nk =  1\nk =  0\n\n\ni =  9\nk =  9\nk =  8\nk =  7\nk =  6\nk =  5\nk =  4\nk =  3\nk =  2\nk =  1\nk =  0\n</code></pre>\n\n<p>Basicly, <code>x[i::-1]</code> should be in the for not in the print.</p>\n"}, {"comments": [{"owner": {"reputation": 2924, "user_id": 4052384, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2WuTl.jpg?s=128&g=1", "display_name": "Anthony Pham", "link": "https://stackoverflow.com/users/4052384/anthony-pham"}, "edited": false, "score": 0, "creation_date": 1423094820, "post_id": 28333880, "comment_id": 45014643, "body": "The asker wants to print the results, not put in a list. But nice answer!"}], "tags": [], "owner": {"reputation": 1206, "user_id": 4039619, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-TD1WY5pcbCc/AAAAAAAAAAI/AAAAAAAAAFE/mxlKAxe_A2Q/photo.jpg?sz=128", "display_name": "Sigve Karolius", "link": "https://stackoverflow.com/users/4039619/sigve-karolius"}, "is_accepted": false, "score": 0, "last_activity_date": 1423094436, "creation_date": 1423094436, "answer_id": 28333880, "question_id": 28333738, "link": "https://stackoverflow.com/questions/28333738/python-nested-for-loop-counting-backwards/28333880#28333880", "title": "Python Nested For Loop Counting Backwards", "body": "<p>You are very close. If you are new to the world of python you can take some inspiration from this example where I use list comprehension. </p>\n\n<p><code>list = lambda k: [ [ i for i in reversed(xrange(j+1)) ] for j in xrange(k+1) ]</code></p>\n\n<p><strong>Note</strong>: If you are using python 3 \"<em>xrange</em>\" is changed to \"<em>range</em>\"</p>\n\n<p>Now call:</p>\n\n<p><code>list(3)</code></p>\n\n<p>And you'll see that the result is similar to what you are looking for.</p>\n\n<p><code>[[0], [1, 0], [2, 1, 0], [3, 2, 1, 0]]</code></p>\n"}, {"tags": [], "owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "is_accepted": false, "score": 2, "last_activity_date": 1423094684, "creation_date": 1423094684, "answer_id": 28333927, "question_id": 28333738, "link": "https://stackoverflow.com/questions/28333738/python-nested-for-loop-counting-backwards/28333927#28333927", "title": "Python Nested For Loop Counting Backwards", "body": "<p>What about just manipulate it with <code>print</code> function?</p>\n\n<pre><code>i = 0\nk = 0\n\nwhile True:\n    print (i)\n    print (k)\n    if 1&lt;k: #tricky part\n        print (\"\\n\".join([str(h) for h in range(0,k+1)][::-1]))\n    print (\"\")\n    i += 1\n    k += 1\n    if i == 10:\n        break\n</code></pre>\n"}], "owner": {"reputation": 760, "user_id": 2258883, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4406bbb4e787ad5b9751214c8dbe6125?s=128&d=identicon&r=PG", "display_name": "SugaKookie", "link": "https://stackoverflow.com/users/2258883/sugakookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "accepted_answer_id": 28333774, "answer_count": 3, "score": 2, "last_activity_date": 1423094684, "creation_date": 1423093478, "question_id": 28333738, "link": "https://stackoverflow.com/questions/28333738/python-nested-for-loop-counting-backwards", "title": "Python Nested For Loop Counting Backwards", "body": "<p>This is probably a simple problem, but I am trying to created a nested loop that would count up from 0 to 9 in the outer loop, and in the inner loop, start from the value (or index. They are the same in this case) of the outer loop and count backwards.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>i= 0\nk= 0\n\ni= 1\nk= 1\nk= 0 \n\ni= 2\nk= 2\nk= 1\nk= 0\n\ni= 3\nk= 3\nk= 2\nk= 1\nk= 0\n</code></pre>\n\n<p>I got this far:</p>\n\n<pre><code>x = range(0,10)\nfor i in x:\n    print 'i = ',x[i]\n    for k in x:\n        print 'k = ', x[i::-1]\n</code></pre>\n\n<p>Obviously, the code above doesn't do what I want it to do. For one, the second for loop doesn't start from the value of i in the outer loop and counts backwards. For another, it doesn't print a new <code>k =</code> for every new value.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423093908, "post_id": 28333732, "comment_id": 45014382, "body": "what constitutes a sentence? does it end in <code>.</code> or <code>?</code> or <code>!</code>....?"}, {"owner": {"reputation": 19, "user_id": 4530725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16d487903a591ebbb11a9f0060e635e?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4530725/john"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423094020, "post_id": 28333732, "comment_id": 45014411, "body": "@PadraicCunningham Yes i have all three of does for the Sentences function."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423094194, "post_id": 28333732, "comment_id": 45014468, "body": "for words you could split each line and sum the lengths of the returned lists, if you have the lines extracted just do the same. You will be including punctuation though so you will need to catch those cases if you really want an accurate count"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1423095758, "post_id": 28333732, "comment_id": 45014910, "body": "We don&#39;t know what <code>Consonants</code>, <code>Vowels</code>, <code>Sentences</code>, and etc are, so it&#39;s hard to help you. Note however that <code>fileToString</code> is equivalent to <code>with open(filename) as myFile: return myFile.read()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3296, "user_id": 4302226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/rvIT6.png?s=128&g=1", "display_name": "GLHF", "link": "https://stackoverflow.com/users/4302226/glhf"}, "is_accepted": false, "score": 1, "last_activity_date": 1423096747, "last_edit_date": 1423096747, "creation_date": 1423096433, "answer_id": 28334214, "question_id": 28333732, "link": "https://stackoverflow.com/questions/28333732/how-to-calculate-average-word-sentence-length-in-python-2-7-from-a-text-file/28334214#28334214", "title": "How to calculate average word &amp; Sentence length in python 2.7 from a text file", "body": "<p>I'm trying to give you an algorithm for that,</p>\n\n<ul>\n<li>Read the file, make a <code>for</code> loop using <code>enumerate()</code>, <code>split()</code> it and check how they ends with <code>endswith()</code>. Like;</li>\n</ul>\n\n<p><code>for ind,word in enumerate(readlines.split()):\n    if word.endswith(\"?\")\n    .....\n    if word.endswith(\"!\")</code></p>\n\n<p>Then put them in a dict, use the <code>ind</code>(index) value with a <code>while</code> loop;</p>\n\n<pre><code>obj = \"Hey there! how are you? I hope you are ok.\"\ndict1 = {}\nfor ind,word in enumerate(obj.split()):\n    dict1[ind]=word\n\nx = 0\nwhile x&lt;len(dict1):\n    if \"?\" in dict1[x]:\n        print (list(dict1.values())[:x+1])\n    x += 1\n</code></pre>\n\n<p>Output;</p>\n\n<pre><code>&gt;&gt;&gt; \n['Hey', 'there!', 'how', 'are', 'you?']\n&gt;&gt;&gt; \n</code></pre>\n\n<p>You see, I actually cut the words until reach <code>?</code>. So I have a sentence in a list now(you can change it to <code>!</code>). I can reach every element's length, the rest of it is simple mathematic. You will find the sum of every element's length then divide it to lenght of that list. Theorically, It will give the average. </p>\n\n<p>Remember that, it's the algorithm. You <em>really</em> have to change this codes to fit with your data, the key points are <code>enumerate()</code>, <code>endswith()</code> and <code>dict</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1423096980, "creation_date": 1423096980, "answer_id": 28334297, "question_id": 28333732, "link": "https://stackoverflow.com/questions/28333732/how-to-calculate-average-word-sentence-length-in-python-2-7-from-a-text-file/28334297#28334297", "title": "How to calculate average word &amp; Sentence length in python 2.7 from a text file", "body": "<p>Honestly when you're matching things like words and sentences, you're better off learning and using regular expressions than just relying on <code>str.split</code> to catch every corner case.</p>\n\n<pre><code>#text.txt\nHere is some text. It is written on more than one line, and will have several sentences.\n\nSome sentences will have their OWN line!\n\nIt will also have a question. Is this the question? I think it is.\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>#!/usr/bin/python\n\nimport re\n\nwith open('test.txt') as infile:\n    data = infile.read()\n\nsentence_pat = re.compile(r\"\"\"\n    \\b                # sentences will start with a word boundary\n    ([^.!?]+[.!?]+)   # continue with one or more non-sentence-ending\n                      #    characters, followed by one or more sentence-\n                      #    ending characters.\"\"\", re.X)\n\nword_pat = re.compile(r\"\"\"\n    (\\S+)             # Words are just groups of non-whitespace together\n    \"\"\", re.X)\n\nsentences = sentence_pat.findall(data)\nwords = word_pat.findall(data)\n\naverage_sentence_length = sum([len(sentence) for sentence in sentences])/len(sentences)\naverage_word_length = sum([len(word) for word in words])/len(words)\n</code></pre>\n\n<p>DEMO:</p>\n\n<pre><code>&gt;&gt;&gt; sentences\n['Here is some text.',\n 'It is written on more than one line, and will have several sentences.',\n 'Some sentences will have their OWN line!',\n 'It will also have a question.',\n 'Is this the question?',\n 'I think it is.']\n\n&gt;&gt;&gt; words\n['Here',\n 'is',\n 'some',\n 'text.',\n 'It',\n 'is',\n ... ,\n 'I',\n 'think',\n 'it',\n 'is.']\n\n&gt;&gt;&gt; average_sentence_length\n31.833333333333332\n\n&gt;&gt;&gt; average_word_length\n4.184210526315789\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1989, "user_id": 2368836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/622bb3fd160ea49f1ed0db7d898a6c09?s=128&d=identicon&r=PG", "display_name": "rocktheartsm4l", "link": "https://stackoverflow.com/users/2368836/rocktheartsm4l"}, "is_accepted": false, "score": 0, "last_activity_date": 1423097340, "creation_date": 1423097340, "answer_id": 28334360, "question_id": 28333732, "link": "https://stackoverflow.com/questions/28333732/how-to-calculate-average-word-sentence-length-in-python-2-7-from-a-text-file/28334360#28334360", "title": "How to calculate average word &amp; Sentence length in python 2.7 from a text file", "body": "<p>To answer this: </p>\n\n<blockquote>\n  <p>I was wondering how I would go about calculating the word length as a\n  function that I import?</p>\n</blockquote>\n\n<pre><code>def avg_word_len(filename):\n    word_lengths = []\n    for line in open(filename).readlines():\n        word_lengths.extend([len(word) for word in line.split()])\n    return sum(word_lengths)/len(word_lengths)\n</code></pre>\n\n<p>Note: This doesn't consider things like . and ! at end of word.. etc..</p>\n"}, {"tags": [], "owner": {"reputation": 1218, "user_id": 3799589, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/923410dc14addf105b3d6cecf91226bc?s=128&d=identicon&r=PG&f=1", "display_name": "IronManMark20", "link": "https://stackoverflow.com/users/3799589/ironmanmark20"}, "is_accepted": false, "score": 0, "last_activity_date": 1423097397, "creation_date": 1423097397, "answer_id": 28334371, "question_id": 28333732, "link": "https://stackoverflow.com/questions/28333732/how-to-calculate-average-word-sentence-length-in-python-2-7-from-a-text-file/28334371#28334371", "title": "How to calculate average word &amp; Sentence length in python 2.7 from a text file", "body": "<p>This doesn't apply if you want to make the script yourself, but I would use NLTK. It has some really great tools for dealing with really long texts. </p>\n\n<p><a href=\"https://blogs.princeton.edu/etc/files/2014/03/Text-Analysis-with-NLTK-Cheatsheet.pdf\" rel=\"nofollow\">This page</a> provides a cheat-sheet for nltk. You should be able to import your text, get the sentances as a large list of lists and get the list of n-grams (words of length n). Then you can calculate the average.</p>\n"}], "owner": {"reputation": 19, "user_id": 4530725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16d487903a591ebbb11a9f0060e635e?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4530725/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2189, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1423097397, "creation_date": 1423093458, "last_edit_date": 1423093862, "question_id": 28333732, "link": "https://stackoverflow.com/questions/28333732/how-to-calculate-average-word-sentence-length-in-python-2-7-from-a-text-file", "title": "How to calculate average word &amp; Sentence length in python 2.7 from a text file", "body": "<p>I have been stuck on this for the past 2 weeks was wondering could you help.</p>\n\n<p>I am trying to calculate the average word length &amp; sentence length from a text file. I just cant seem to wrap my head around it. I have just started using functions which are then called in the main file.</p>\n\n<p>My Main file looks like so</p>\n\n<pre><code>import Consonants\nimport Vowels\nimport Sentences\nimport Questions\nimport Words\n\n\"\"\" Vowels \"\"\"\n\n\ntext = Vowels.fileToString(\"test.txt\")    \nx = Vowels.countVowels(text)\n\nprint str(x) + \" Vowels\"\n\n\"\"\" Consonats \"\"\"\n\ntext = Consonants.fileToString(\"test.txt\")    \nx = Consonants.countConsonants(text)\n\n\nprint str(x) + \" Consonants\"\n\n\"\"\" Sentences \"\"\"\n\n\ntext = Sentences.fileToString(\"test.txt\")    \nx = Sentences.countSentences(text)\nprint str(x) + \" Sentences\"\n\n\n\"\"\" Questions \"\"\"\n\ntext = Questions.fileToString(\"test.txt\")    \nx = Questions.countQuestions(text)\n\nprint str(x) + \" Questions\"\n\n\"\"\" Words \"\"\"\ntext = Words.fileToString(\"test.txt\")    \nx = Words.countWords(text)\n\nprint str(x) + \" Words\"\n</code></pre>\n\n<p>And one of my function files are like so:</p>\n\n<pre><code>def fileToString(filename):\n    myFile = open(filename, \"r\")\n    myText = \"\"\n    for ch in myFile:\n        myText = myText + ch\n    return myText\n\ndef countWords(text):\n    vcount = 0\n    spaces = [' ']\n    for letter in text:\n        if (letter in spaces):\n            vcount = vcount + 1\n    return vcount\n</code></pre>\n\n<p>I was wondering how I would go about calculating the word length as a function that I import? I tried using some of the other threads here but they did not work for me correctly.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1423095018, "post_id": 28333650, "comment_id": 45014710, "body": "By doing what you&#39;ve just done. The only way that possibly wouldn&#39;t work is if some other code you&#39;re running also tries to monkey-patch the <code>decimal</code> module."}], "answers": [{"tags": [], "owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "is_accepted": true, "score": 1, "last_activity_date": 1423093305, "creation_date": 1423093305, "answer_id": 28333706, "question_id": 28333650, "link": "https://stackoverflow.com/questions/28333650/how-can-i-tell-if-cdecimal-is-actually-replacing-decimal/28333706#28333706", "title": "How can I tell if cdecimal is actually replacing decimal?", "body": "<p>You can inspect the content of <code>sys.modules</code> directly:</p>\n\n<pre><code>print(sys.modules)\n</code></pre>\n\n<p>You can also check the name:</p>\n\n<pre><code>sys.modules['decimal'].__name__ == 'cdecimal'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4595, "user_id": 629599, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/41eb9a71af50d86b3b6f4daf83c37caf?s=128&d=identicon&r=PG&f=1", "display_name": "mergesort", "link": "https://stackoverflow.com/users/629599/mergesort"}, "edited": false, "score": 0, "creation_date": 1423093647, "post_id": 28333745, "comment_id": 45014284, "body": "I get *** No help on (decimal)"}], "tags": [], "owner": {"reputation": 1155, "user_id": 3479753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271b3b053003525a1add378d49cb804a?s=128&d=identicon&r=PG&f=1", "display_name": "etheranger", "link": "https://stackoverflow.com/users/3479753/etheranger"}, "is_accepted": false, "score": 0, "last_activity_date": 1423093522, "creation_date": 1423093522, "answer_id": 28333745, "question_id": 28333650, "link": "https://stackoverflow.com/questions/28333650/how-can-i-tell-if-cdecimal-is-actually-replacing-decimal/28333745#28333745", "title": "How can I tell if cdecimal is actually replacing decimal?", "body": "<p>In the place where you expect <code>decimal</code> to be replaced,</p>\n\n<pre><code>import decimal\nhelp(decimal)\n</code></pre>\n\n<p>should spit out a comprehensive set of information.</p>\n\n<p>The default system <code>decimal</code> begins with:</p>\n\n<pre><code>&gt;&gt;&gt; import decimal\n&gt;&gt;&gt; help(decimal)\nHelp on module decimal:\n\nNAME\n    decimal\n\nFILE\n    c:\\python27\\lib\\decimal.py\n</code></pre>\n\n<p>I expect your version should instead end up pointing to <code>cdecimal</code>.</p>\n"}], "owner": {"reputation": 4595, "user_id": 629599, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/41eb9a71af50d86b3b6f4daf83c37caf?s=128&d=identicon&r=PG&f=1", "display_name": "mergesort", "link": "https://stackoverflow.com/users/629599/mergesort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 28333706, "answer_count": 2, "score": 1, "last_activity_date": 1423093522, "creation_date": 1423093003, "question_id": 28333650, "link": "https://stackoverflow.com/questions/28333650/how-can-i-tell-if-cdecimal-is-actually-replacing-decimal", "title": "How can I tell if cdecimal is actually replacing decimal?", "body": "<p>I have:</p>\n\n<pre><code>import cdecimal\nsys.modules[\"decimal\"] = cdecimal\n</code></pre>\n\n<p>Right before I create an instance of my application and before I use manage.py to run tasks, but how can I be sure that it is actually replacing decimal?</p>\n"}, {"tags": ["python", "shell", "ipython"], "comments": [{"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 0, "creation_date": 1423096363, "post_id": 28333629, "comment_id": 45015058, "body": "The &quot;tedious reasons&quot; are related to the fact that, because of third-party-package dependency hell, I have multiple Python distributions: some have <code>IPython&lt;=0.13</code>, some are more modern.  Two are Python 2.7.x, but one is 3.2 and one is even 2.5.4 (ugh). One even lacks <code>setuptools</code> and (for even more tedious reasons) I want to keep it that way.  On my PsychoPy distro (Python 2.7.3, with setuptools) <code>ipython.exe</code> just fails silently."}], "answers": [{"comments": [{"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 0, "creation_date": 1423096516, "post_id": 28333789, "comment_id": 45015091, "body": "Looks like this is indeed the best and most &quot;IPythonic&quot; answer provided one&#39;s version of the package is modern enough. That&#39;s not always the case for me, but I didn&#39;t tell you that in the question, and your answer put me on the right track to cover my other bases---thanks!"}], "tags": [], "owner": {"reputation": 1411, "user_id": 1280316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/da539d158d4c32771a7d550eb23613cc?s=128&d=identicon&r=PG", "display_name": "Chemik", "link": "https://stackoverflow.com/users/1280316/chemik"}, "is_accepted": true, "score": 1, "last_activity_date": 1423093859, "creation_date": 1423093859, "answer_id": 28333789, "question_id": 28333629, "link": "https://stackoverflow.com/questions/28333629/starting-ipython-using-python-code/28333789#28333789", "title": "starting IPython using Python code", "body": "<p>This is from ipython starter script in linux.</p>\n\n<pre><code>from IPython import start_ipython\nstart_ipython()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "is_accepted": false, "score": 0, "last_activity_date": 1423096067, "creation_date": 1423096067, "answer_id": 28334138, "question_id": 28333629, "link": "https://stackoverflow.com/questions/28333629/starting-ipython-using-python-code/28334138#28334138", "title": "starting IPython using Python code", "body": "<p>By following the lead of <code>Scripts\\ipython-script.py</code> and looking at what <code>pkg_resources.load_entry_point</code> returns in various cases, I ended up with the following script, which seems to cover all my bases:</p>\n\n<pre><code>import sys\nimport IPython\ntry:\n    from IPython import start_ipython as entry_point\nexcept ImportError:\n    try:\n        from IPython.terminal.ipapp import launch_new_instance as entry_point\n    except ImportError:\n        try:\n            from IPython.frontend.terminal.ipapp import launch_new_instance as entry_point\n        except ImportError:\n            try:\n                from pkg_resources import load_entry_point\n                entry_point = load_entry_point( 'ipython', 'console_scripts', 'ipython' )\n            except ImportError:\n                try:\n                    from pkg_resources import run_script\n                    def entry_point(): run_script( 'ipython', 'ipython' ); return 0\n                except ImportError:\n                    raise ImportError( 'run out of options for launching IPython version %s under Python version %s' % ( IPython.__version__, sys.version ) )\nsys.exit( entry_point() )\n</code></pre>\n"}], "owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 28333789, "answer_count": 2, "score": 0, "last_activity_date": 1423096067, "creation_date": 1423092862, "question_id": 28333629, "link": "https://stackoverflow.com/questions/28333629/starting-ipython-using-python-code", "title": "starting IPython using Python code", "body": "<p>I'm in a Python 2.7 shell on Windows and, because I'm going crazy without tab completion and <code>?</code> documentation, I want to start an IPython shell from there. </p>\n\n<p>For various (really tedious) reasons I can't launch IPython directly via <code>Scripts\\ipython.exe</code>. I just want pure-Python code that will take me to IPython.  I've searched-for and found the following:</p>\n\n<pre><code>from IPython.terminal.ipapp import TerminalIPythonApp as t;\nt.instance().initialize()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>from IPython.terminal.ipapp import TerminalInteractiveShell as t;\nt.instance()\n</code></pre>\n\n<p>...and in both of these cases I end up in some kind of IPython shell, but in both it's not what I recognize as a \"normal\" IPython session: for example it lacks colour, lacks the <code>[1]</code> next to <code>In</code> and <code>Out</code>,  and lacks the ability to use <code>?</code> and <code>??</code> to view docstrings.</p>\n\n<p>Is there a way to get to the \"normal\"-looking and -behaving IPython shell from Python, without having to come out of Python and launch directly from the <code>.exe</code>?  In principle I imagine there must be a pure-Python (and hence cross-platform, not even Windows-specific) way of doing it, but I'm googling in circles trying to find it.</p>\n"}, {"tags": ["python", "inheritance", "unit-testing"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 2, "creation_date": 1423093632, "post_id": 28333478, "comment_id": 45014280, "body": "Note that it&#39;s unusual (in my experience) to use <code>TestCase.__init__</code> for anything.  Generally, initialization code goes in <code>TestCase.setUp</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9399, "user_id": 64672, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/91f5c1655f37caf7fc40966c79567375?s=128&d=identicon&r=PG", "display_name": "compie", "link": "https://stackoverflow.com/users/64672/compie"}, "edited": false, "score": 0, "creation_date": 1423093091, "post_id": 28333641, "comment_id": 45014136, "body": "Could you give an example of a better design with the mixin?"}, {"owner": {"reputation": 3923, "user_id": 1560991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eCONL.jpg?s=128&g=1", "display_name": "killthrush", "link": "https://stackoverflow.com/users/1560991/killthrush"}, "edited": false, "score": 0, "creation_date": 1463591560, "post_id": 28333641, "comment_id": 62133781, "body": "This answer helped me solve a similar inheritance problem encountered with TestLoader().loadTestsFromModule().  Adding the modified __init__() did the trick for me."}], "tags": [], "owner": {"reputation": 2058, "user_id": 234227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f59a2fbc9d73990be69b47c2e1d73c4?s=128&d=identicon&r=PG", "display_name": "BenTrofatter", "link": "https://stackoverflow.com/users/234227/bentrofatter"}, "is_accepted": false, "score": 6, "last_activity_date": 1423092927, "creation_date": 1423092927, "answer_id": 28333641, "question_id": 28333478, "link": "https://stackoverflow.com/questions/28333478/python-unittest-testcase-with-inheritance/28333641#28333641", "title": "Python unittest TestCase with inheritance", "body": "<p>To make this work as expected, you minimally need to:</p>\n\n<ul>\n<li>Make sure the <strong>init</strong> method of your subclasses test cases match that of TestCase, i.e. <code>__init__(self, methodName=\"runTest\")</code></li>\n<li>Add a super call in the <strong>init</strong> method of your subclasses e.g. <code>super(TestMyClass, self).__init__(methodName)</code></li>\n<li>Add a self argument to test_get_result, i.e. <code>def test_get_result(self):</code></li>\n</ul>\n\n<p>As for whether it's good design, remember, your tests act in part as documentation for how your code is meant to work.  If you've got all the work hidden away in TestCase instance state, what it does will not be as obvious.  You might be better off, say, writing a mixin class that has custom assertions that take inputs and expected outputs.</p>\n"}, {"tags": [], "owner": {"reputation": 1753, "user_id": 1555925, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bd24a2af3551b9e30b267ce944a18639?s=128&d=identicon&r=PG", "display_name": "davidrmcharles", "link": "https://stackoverflow.com/users/1555925/davidrmcharles"}, "is_accepted": false, "score": 3, "last_activity_date": 1423093268, "creation_date": 1423093268, "answer_id": 28333699, "question_id": 28333478, "link": "https://stackoverflow.com/questions/28333478/python-unittest-testcase-with-inheritance/28333699#28333699", "title": "Python unittest TestCase with inheritance", "body": "<p>You are hitting <code>test_get_result()</code> twice.  I do not think any <code>test*()</code> methods should be in <code>TestBase</code> at all.  Rather, use <code>TestBase</code> to provide custom assertions, error formatters, test-data generators, etc. and keep the actual tests in <code>TestMyClass</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": true, "score": 5, "last_activity_date": 1423164237, "last_edit_date": 1423164237, "creation_date": 1423093288, "answer_id": 28333703, "question_id": 28333478, "link": "https://stackoverflow.com/questions/28333478/python-unittest-testcase-with-inheritance/28333703#28333703", "title": "Python unittest TestCase with inheritance", "body": "<p>The design is (more or less) fine -- the one \"hiccup\" is that when unittest looks at <em>all</em> TestCase classes and runs the methods that start with \"test\" on them.  You have a few options at this point.</p>\n\n<p>One approach would be to specify the class under test and values as attributes on the <em>class</em>.  Here, if possible, you'll want the values to be immutable...</p>\n\n<pre><code>class TestBase(unittest.TestCase):\n\n    def check(self, input, expected_output):\n        obj = self.class_under_test(input)\n        actual_output = obj.get_result()\n        self.assertEqual(actual_output, expected_output)\n\n    def check_all(self):\n        for value in self.values:\n            self.check(value[0], value[1])\n\nclass TestMyClass1(TestBase):\n    values = ((1, 2), (3, 4))\n    class_under_test = MyClass1\n\n    def test_it(self):\n        self.check_all()\n\nclass TestMyClass2(TestBase):\n    values = (('a', 'b'), ('d', 'e'))\n    class_under_test = MyClass2\n\n    def test_it(self):\n        self.check_all()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 812, "user_id": 2629994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2RygA.jpg?s=128&g=1", "display_name": "Tali", "link": "https://stackoverflow.com/users/2629994/tali"}, "is_accepted": false, "score": 0, "last_activity_date": 1510581540, "creation_date": 1510581540, "answer_id": 47266069, "question_id": 28333478, "link": "https://stackoverflow.com/questions/28333478/python-unittest-testcase-with-inheritance/47266069#47266069", "title": "Python unittest TestCase with inheritance", "body": "<p>Python's <code>unittest.main()</code> executes all tests from all test classes in the current namespace.</p>\n\n<p>One way to not run tests directly in your base class is to move it to a different module (e.g. move <code>TestBase</code> to <code>testbase.py</code>):</p>\n\n<p>In the file which calls <code>unittest.main()</code>, be sure to not import that class into your namespace (don't use <code>from testbase import *</code> or similar):</p>\n\n<pre><code>import testbase\n\nclass TestMyClass1(testbase.TestBase):\n    values = ((1, 2), (3, 4))\n    class_under_test = MyClass1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 924, "user_id": 7100022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hHpbp.jpg?s=128&g=1", "display_name": "Giannis Katsini", "link": "https://stackoverflow.com/users/7100022/giannis-katsini"}, "is_accepted": false, "score": 8, "last_activity_date": 1575888119, "last_edit_date": 1575888119, "creation_date": 1536594291, "answer_id": 52261358, "question_id": 28333478, "link": "https://stackoverflow.com/questions/28333478/python-unittest-testcase-with-inheritance/52261358#52261358", "title": "Python unittest TestCase with inheritance", "body": "<p>A little late here but recently came into the need to have unit test inheritence</p>\n\n<p>The most elegant solution that I could find is this:</p>\n\n<p>First - you need a base test class</p>\n\n<pre><code>class MyBaseUnitTest(unittest.TestCase):\n    __test__ = False\n    def test_someting(self):\n        ...\n\n    def test_something_else(self):\n        ...\n</code></pre>\n\n<p>then to inherit that class and run tests:</p>\n\n<pre><code>class TestA(MyBaseUnitTest):\n    __test__ = True\n\n    def test_feature(self):\n        pass\n    def test_feature2(self):\n        pass\n</code></pre>\n\n<p>This is the best, and easiset way to have a single viewset inheritence.</p>\n\n<p>The issue I found with multiple inheritance is that when you try invoke methods like <code>setUp()</code> it will not be called on the base test class, so you have to call it in each class you write that extends the base class.</p>\n\n<p>I hope that this will help somebody with this somewhere in the future.</p>\n\n<p>BTW: This was done in python3 - I do not know how it will react in python2</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p><em>This is probably better and more pythonic</em></p>\n\n<pre><code>class MyBaseUnitTest(object):\n    def test_someting(self):\n        ...\n\n    def test_something_else(self):\n        ...\n\nclass TestA(MyBaseUnitTest, unittest.TestCase):\n\n    def test_feature(self):\n        pass\n    def test_feature2(self):\n        pass\n</code></pre>\n\n<p>So long as the base test class does not extend \"unittest.TestCase\", the test runner will not resolve these tests and they will not run in the suite. They will only run where the base class extends them.</p>\n"}], "owner": {"reputation": 9399, "user_id": 64672, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/91f5c1655f37caf7fc40966c79567375?s=128&d=identicon&r=PG", "display_name": "compie", "link": "https://stackoverflow.com/users/64672/compie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11088, "favorite_count": 3, "accepted_answer_id": 28333703, "answer_count": 5, "score": 12, "last_activity_date": 1575888119, "creation_date": 1423092105, "question_id": 28333478, "link": "https://stackoverflow.com/questions/28333478/python-unittest-testcase-with-inheritance", "title": "Python unittest TestCase with inheritance", "body": "<p>Currently I have many similar unittest TestCases. Each TestCase contains both data (input values + expected output values) and logic (call the SUT and compare the actual output with the expected output).</p>\n\n<p>I would like to separate the data from the logic. Thus I want a base class that only contains the logic and a derived class that contains only the data. I came up with this so far:</p>\n\n<pre><code>import unittest\n\nclass MyClass():\n    def __init__(self, input):\n        self.input = input\n    def get_result(self):\n        return self.input * 2\n\nclass TestBase(unittest.TestCase):\n    def check(self, input, expected_output):\n        obj = self.class_under_test(input)\n        actual_output = obj.get_result()\n        self.assertEqual(actual_output, expected_output)\n\n    def test_get_result(self):\n        for value in self.values:\n            self.check(value[0], value[1])\n\nclass TestMyClass(TestBase):\n    def __init__(self, methodName='runTest'):\n        unittest.TestCase.__init__(self, methodName)        \n        self.class_under_test = MyClass\n        self.values = [(1, 2), (3, 6)]\n\nunittest.main(exit = False)\n</code></pre>\n\n<p>But this fails with the following error:</p>\n\n<pre><code>AttributeError: 'TestBase' object has no attribute 'values'\n</code></pre>\n\n<p>Two questions:</p>\n\n<ul>\n<li>Is my 'design' any good?</li>\n<li>What's still needed to get it working?</li>\n</ul>\n"}, {"tags": ["python", "hdf5", "pytables", "h5py"], "comments": [{"owner": {"reputation": 455, "user_id": 1856079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58da37cf1ec01de38b2afc6cc9c78c0d?s=128&d=identicon&r=PG", "display_name": "Tim Tr&#246;ndle", "link": "https://stackoverflow.com/users/1856079/tim-tr%c3%b6ndle"}, "edited": false, "score": 0, "creation_date": 1428600910, "post_id": 28333470, "comment_id": 47241945, "body": "I assume the later only works because <code>tables</code> seems to load dlls lazily. Try opening a file, on my Win64 system that leads to a crash as well."}], "answers": [{"tags": [], "owner": {"reputation": 1218, "user_id": 3799589, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/923410dc14addf105b3d6cecf91226bc?s=128&d=identicon&r=PG&f=1", "display_name": "IronManMark20", "link": "https://stackoverflow.com/users/3799589/ironmanmark20"}, "is_accepted": false, "score": 3, "last_activity_date": 1423093083, "creation_date": 1423093083, "answer_id": 28333661, "question_id": 28333470, "link": "https://stackoverflow.com/questions/28333470/use-both-h5py-and-pytables-in-the-same-python-process/28333661#28333661", "title": "Use both h5py and pytables in the same Python process", "body": "<p>According to <a href=\"https://github.com/h5py/h5py/issues/390\" rel=\"nofollow\">this thread on github</a> no, I don't think you can. It seems that h5py cannot do anything about it, so I would start an issue with the <a href=\"https://github.com/PyTables/PyTables/issues\" rel=\"nofollow\">pytables github</a>. </p>\n\n<p>Also, could you possibly use two different scripts? That way the import wouldn't bork.</p>\n"}, {"tags": [], "owner": {"reputation": 455, "user_id": 1856079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58da37cf1ec01de38b2afc6cc9c78c0d?s=128&d=identicon&r=PG", "display_name": "Tim Tr&#246;ndle", "link": "https://stackoverflow.com/users/1856079/tim-tr%c3%b6ndle"}, "is_accepted": false, "score": 0, "last_activity_date": 1428601082, "creation_date": 1428601082, "answer_id": 29545313, "question_id": 28333470, "link": "https://stackoverflow.com/questions/28333470/use-both-h5py-and-pytables-in-the-same-python-process/29545313#29545313", "title": "Use both h5py and pytables in the same Python process", "body": "<p>Are you using <code>conda</code> to install packages? If yes, it looks like <a href=\"https://github.com/ContinuumIO/anaconda-issues/issues/300\" rel=\"nofollow\">an issue reported on GitHub</a>. That issue to me seems like an issue with build <code>0</code> of version <code>2.4.0</code> of <code>h5py</code>. Try downgrading to version <code>2.3.x</code>. That works just fine for me.</p>\n"}], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1428601082, "creation_date": 1423092048, "question_id": 28333470, "link": "https://stackoverflow.com/questions/28333470/use-both-h5py-and-pytables-in-the-same-python-process", "title": "Use both h5py and pytables in the same Python process", "body": "<p>The two main Python libraries for HDF5 interaction are <code>h5py</code> and <code>pytables</code>.  They don't play nicely together, particularly on windows</p>\n\n<pre><code>&gt;&gt;&gt; import tables\n&gt;&gt;&gt; import h5py\nImportError: DLL load failed\n\n&gt;&gt;&gt; import h5py\n&gt;&gt;&gt; import tables   # works fine\n</code></pre>\n\n<p>I need to use both in the same application but I'm unable to get full functionality from both libraries when each is imported.  Is there a solution to this?</p>\n"}, {"tags": ["python", "excel", "csv", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 4245281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0d133ef5e1e96233def1dba451f953?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Ivan", "link": "https://stackoverflow.com/users/4245281/pedro-ivan"}, "is_accepted": false, "score": 0, "last_activity_date": 1423142714, "last_edit_date": 1423142714, "creation_date": 1423142146, "answer_id": 28344959, "question_id": 28333387, "link": "https://stackoverflow.com/questions/28333387/run-csv-column-through-webform-via-python/28344959#28344959", "title": "Run CSV Column Through Webform via Python", "body": "<p>You'll have to see a Excel file in txt (open it with notepad or anything you like).  That is the \"real\" archive, the divisions, pretty much like html.</p>\n\n<p>For each row you want to write on excel, instead of print \"Form name:\", form.name you'll have to write on a file something like \"form.name\".</p>\n\n<p>Do not forget to create the archive before the printing.  Note that you'll create a xls file, and write him as you saw in the txt.</p>\n"}], "owner": {"reputation": 173, "user_id": 2442450, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1e7209eeee5695792b1f5b06811e954f?s=128&d=identicon&r=PG", "display_name": "Benjamin Loya", "link": "https://stackoverflow.com/users/2442450/benjamin-loya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423142714, "creation_date": 1423091571, "question_id": 28333387, "link": "https://stackoverflow.com/questions/28333387/run-csv-column-through-webform-via-python", "title": "Run CSV Column Through Webform via Python", "body": "<p>I've made and deleted a couple of threads on here in reference to a single issue I'm having, only because I haven't been able to accurately describe what I'm trying to do.</p>\n\n<p>Essentially: I want to automate a search process. This would involve automatically selecting a radio button on <a href=\"http://www.adviserinfo.sec.gov/IAPD/Content/Search/iapd_Search.aspx\" rel=\"nofollow\">this webpage</a>, then feeding each cell of column B:B in <a href=\"https://www.dropbox.com/s/vv7pq48vgnhtuex/Legal%20Names.xlsx?dl=0\" rel=\"nofollow\">this excel spreadsheet</a> into one of the forms enabled by the radio button. Ideally, the process would also populate the spreadsheet (or a new .csv or .txt file) with the output from each search. </p>\n\n<p>I am utterly at a loss as to how to integrate excel with Python. I have the following script so far:</p>\n\n<pre><code>import mechanize\nURL = 'http://www.adviserinfo.sec.gov/IAPD/Content/Search/iapd_Search.aspx'\nbr = mechanize.Browser()\nbr.open(URL)\nfor form in br.forms():\n   print \"Form name:\", form.name\n   print form\n\nform.set_all_readonly(False)\n</code></pre>\n\n<p>But from there I don't know what to do. I'm not a programmer; teaching myself Python for this project. Any and all help will keep me from manually copying and pasting 1,175 names into a search bar, which is neither a good use of my time nor an opportunity to learn anything new. Thank you!</p>\n"}, {"tags": ["python", "json", "bash", "twitter", "dictionary"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1423091914, "post_id": 28333369, "comment_id": 45013742, "body": "<code>json_data = json.loads(data)</code> - json_data is a dict and only becomes a string again when you do <code>file.write(str(json_data))</code>. If you are only doing that so you can explore the data you got, try the <code>pprint</code> module that will give you more readable text."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4062751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/763a7609e2234b94bde74e670352d404?s=128&d=identicon&r=PG&f=1", "display_name": "Peggy", "link": "https://stackoverflow.com/users/4062751/peggy"}, "edited": false, "score": 0, "creation_date": 1423092402, "post_id": 28333424, "comment_id": 45013921, "body": "Clarification- if my data is &quot;output.txt&quot;, how do I use your function?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 73, "user_id": 4062751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/763a7609e2234b94bde74e670352d404?s=128&d=identicon&r=PG&f=1", "display_name": "Peggy", "link": "https://stackoverflow.com/users/4062751/peggy"}, "edited": false, "score": 0, "creation_date": 1423093660, "post_id": 28333424, "comment_id": 45014288, "body": "replace &quot;file.txt&quot; with &quot;output.txt&quot;"}, {"owner": {"reputation": 73, "user_id": 4062751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/763a7609e2234b94bde74e670352d404?s=128&d=identicon&r=PG&f=1", "display_name": "Peggy", "link": "https://stackoverflow.com/users/4062751/peggy"}, "edited": false, "score": 0, "creation_date": 1423103562, "post_id": 28333424, "comment_id": 45016724, "body": "I get a similar error as I tried json.load() before: ValueError: Expecting property name: line 1 column 2 (char 1)"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 73, "user_id": 4062751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/763a7609e2234b94bde74e670352d404?s=128&d=identicon&r=PG&f=1", "display_name": "Peggy", "link": "https://stackoverflow.com/users/4062751/peggy"}, "edited": false, "score": 0, "creation_date": 1423103914, "post_id": 28333424, "comment_id": 45016798, "body": "yes you must save it correctly using the method I showed you first"}, {"owner": {"reputation": 73, "user_id": 4062751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/763a7609e2234b94bde74e670352d404?s=128&d=identicon&r=PG&f=1", "display_name": "Peggy", "link": "https://stackoverflow.com/users/4062751/peggy"}, "edited": false, "score": 0, "creation_date": 1423206444, "post_id": 28333424, "comment_id": 45063234, "body": "I got another error using the on_data function: TypeError: expected string or buffer. I think again that it is not parsing it correctly because it sees it as a massive string. Unless I insert something kind of line breaks?"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1423091755, "creation_date": 1423091755, "answer_id": 28333424, "question_id": 28333369, "link": "https://stackoverflow.com/questions/28333369/parse-massive-json-string-from-tweepy-or-convert-to-dict-json-format/28333424#28333424", "title": "Parse massive JSON string from Tweepy or convert to dict/JSON format", "body": "<pre><code>def on_data(self, data):\n    json_data = json.loads(data)\n    json.dump(json_data,my_file)\n</code></pre>\n\n<p>then when you want it back</p>\n\n<pre><code>json_data = json.load(open(\"file.txt\"))\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4062751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/763a7609e2234b94bde74e670352d404?s=128&d=identicon&r=PG&f=1", "display_name": "Peggy", "link": "https://stackoverflow.com/users/4062751/peggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1308, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423091755, "creation_date": 1423091516, "question_id": 28333369, "link": "https://stackoverflow.com/questions/28333369/parse-massive-json-string-from-tweepy-or-convert-to-dict-json-format", "title": "Parse massive JSON string from Tweepy or convert to dict/JSON format", "body": "<p>My first time using Tweepy and I am a Python novice.\nI used the following code following the OAuth  to collect tweets using Tweepy:</p>\n\n<pre><code>auth = tweepy.OAuthHandler(consumer_key, consumer_secret)\nauth.set_access_token(access_key, access_secret)\napi = tweepy.API(auth)\nfile = open('SOTU1.txt', 'a')\n\nclass CustomStreamListener(tweepy.StreamListener):\ndef on_status(self, status):\n    print status.text\n\ndef on_data(self, data):\n    json_data = json.loads(data)\n    file.write(str(json_data))\n\ndef on_error(self, status_code):\n    print &gt;&gt; sys.stderr, 'Encountered error with status code:', status_code\n    return True # Don't kill the stream\n\ndef on_timeout(self):\n    print &gt;&gt; sys.stderr, 'Timeout...'\n    return True # Don't kill the stream\n</code></pre>\n\n<p>And the resultant text file looks like this and continues on as one string object:</p>\n\n<pre><code>{u'contributors': None, u'truncated': False, u'text': u'Lost my cool today           \n\\U0001f602\\U0001f63e like completely', u'in_reply_to_status_id': None, u'id': \n557709279751581696, u'favorite_count': 0, u'source': u'&lt;a \nhref=\"http://twitter.com/download/android\" rel=\"nofollow\"&gt;Twitter for \nAndroid&lt;/a&gt;', u'retweeted': False, u'coordinates': {u'type': u'Point', \nu'coordinates': [-97.925459, 29.877993]}, u'timestamp_ms': u'1421803228687', \nu'entities': {u'user_mentions': [], u'symbols': [], u'trends': [], \nu'hashtags': [], u'urls': []}, u'in_reply_to_screen_name': None, u'id_str': \nu'557709279751581696', u'retweet_count': 0, u'in_reply_to_user_id': None, \nu'favorited': False, u'user': {u'follow_request_sent': None, \nu'profile_use_background_image': True, u'default_profile_image': False, u'id': \n1239731318, u'verified': False, u'profile_image_url_https': \n</code></pre>\n\n<p>I have tried various solutions offered on the site, although none worked because it is not a list, but a string. I have tried to make it into dictionary form by removing the \"u'\", but the right side of the pair has words not enclosed by \"\". </p>\n\n<p>My goal is to extract the text and geocode from each tweet and I am hoping to process the JSON file in bash using jq. But as of now I cannot feed this data to jq, and it is hard to identify which batch of lines come from a single tweet.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "raw-input"], "comments": [{"owner": {"reputation": 3642, "user_id": 3371101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eeb77c0b3ce0a8041fa92a4fcd5af850?s=128&d=identicon&r=PG&f=1", "display_name": "codingEnthusiast", "link": "https://stackoverflow.com/users/3371101/codingenthusiast"}, "edited": false, "score": 3, "creation_date": 1423091500, "post_id": 28333329, "comment_id": 45013603, "body": "Also include your goals with the game, a simple &quot;my code is not working&quot; is not enough to get good pieces of advice."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1423091646, "post_id": 28333329, "comment_id": 45013649, "body": "Please read <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 28349, "user_id": 553404, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/XkLRP.png?s=128&g=1", "display_name": "YXD", "link": "https://stackoverflow.com/users/553404/yxd"}, "edited": false, "score": 0, "creation_date": 1423091693, "post_id": 28333329, "comment_id": 45013665, "body": "@MrE <i>&quot;I&#39;m unable to make it work&quot;</i> suggests otherwise..."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1423091813, "post_id": 28333329, "comment_id": 45013705, "body": "What is &quot;fencing&quot; a variable?!"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1423092229, "post_id": 28333329, "comment_id": 45013867, "body": "@Top8 that&#39;s correct, or you can click the <code>{}</code> button at the top of the editor window."}, {"owner": {"reputation": 27, "user_id": 4522201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206074693895747/picture?type=large", "display_name": "Top8", "link": "https://stackoverflow.com/users/4522201/top8"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1423093552, "post_id": 28333329, "comment_id": 45014249, "body": "Ok thanks everyone, error fixed and some &quot;stackoverflownetiquette&quot; learned ;-) Its ok if i delete this post completely and make a new one with the cleaned code, a short problem and i try not to make @jonrsharpe work again? (He deleted seventy something words form my first post lol)  OR I edit this post myself as well so i avoid more noise?"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1423094206, "post_id": 28333329, "comment_id": 45014471, "body": "No worries, and no need to start over. Your attitude is great! Welcome to the site. Editing is a normal part of the asking process. Your question looks good now, and you got an answer. Hopefully the question will be reopened shortly now that it&#39;s been fixed up. If you want you could delete your older comments that have been addressed. Cheers!"}], "answers": [{"comments": [{"owner": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "edited": false, "score": 1, "creation_date": 1423092024, "post_id": 28333456, "comment_id": 45013788, "body": "Once you fix that, though, we&#39;d be glad to have you ask a question on <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}, {"owner": {"reputation": 27, "user_id": 4522201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206074693895747/picture?type=large", "display_name": "Top8", "link": "https://stackoverflow.com/users/4522201/top8"}, "edited": false, "score": 0, "creation_date": 1423092728, "post_id": 28333456, "comment_id": 45014026, "body": "Will do. Thanks a lot!"}], "tags": [], "owner": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "is_accepted": true, "score": 1, "last_activity_date": 1423091961, "creation_date": 1423091961, "answer_id": 28333456, "question_id": 28333329, "link": "https://stackoverflow.com/questions/28333329/indent-placement/28333456#28333456", "title": "Indent placement?", "body": "<p>Your code is broken because there is no colon after <code>def Square()</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 4522201, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206074693895747/picture?type=large", "display_name": "Top8", "link": "https://stackoverflow.com/users/4522201/top8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1423091993, "accepted_answer_id": 28333456, "answer_count": 1, "score": -2, "last_activity_date": 1423095015, "creation_date": 1423091302, "last_edit_date": 1423095015, "question_id": 28333329, "link": "https://stackoverflow.com/questions/28333329/indent-placement", "closed_reason": "Not suitable for this site", "title": "Indent placement?", "body": "<p>I've tried to design a small (3 rooms) \"adventure-like\" mini-game, and when i run it i get: </p>\n\n<p>if answer == \"restaurant\":</p>\n\n<p>IndentationError: unindent does not match any outer indentation level</p>\n\n<pre><code># TRUMANIA v. 0.0.2\n\ndef Square():\n    print \"You exit from there, and you appear in Central Square. Do you want to walk to the Library or to the Restaurant?\" \n    answer = raw_input(\"Type 'Restaurant' or 'Library' and hit 'Enter'.\").lower()\n    if answer == \"restaurant\":\n        Restaurant()\n    elif answer == \"library\":\n        Library()\n    else:\n        print \"You didn't pick Restaurant or Library! You can't just stand there like a rock; you need to make a decision!\"\n        Square()\n\ndef Trumania():\n    print \"You've just entered Trumania!\"\n    print \"Do you want to go to the Restaurant or visit the Library?\"\n    answer = raw_input(\"Type 'Restaurant' or 'Library' and hit 'Enter'.\").lower()\n    if answer == \"restaurant\":\n        Restaurant()\n    elif answer == \"library\":\n        Library()\n    else:\n        print \"You didn't pick Restaurant or Library! You can't just stand in the entrance like a scarecrow; you need to make a decision!\"\n        Trumania()\n\ndef Restaurant():\n    print \"You've just entered the Restaurant!\"\n    print \"Do you want to eat Inside or Outside?\"\n    answer = raw_input(\"Type 'Inside' or 'Outside' and hit 'Enter'.\").lower()\n    if answer == \"inside\":\n        print \"You need to bribe the waiter, but you get a cozy table and have a wonderful meal!\"\n    elif answer == \"outside\":\n        print \"You get a cheap (and cold) table in the outside and manage to eat some apetizers\"\n    else:\n        print \"You didn't selected Inside or Outside. The Waiter euh... Waits... \"\n        Restaurant()\n\ndef Library():\n    print \"You arrive at the Library!\"\n    print \"Do you want to get some books or you prefer to study?\"\n    answer = raw_input(\"Type 'Books' or 'Study' and hit 'Enter'.\").lower()\n    if answer == \"books\":\n        print \"You get some books that you can sell later. However, thats bad karma!\"\n    elif answer == \"study\":\n        print \"You learn a lot!However, you feel tired after so much effort\"\n    else:\n        print \"You didn't pick Books or Study! Try again.\"\n        Library()\n\nTrumania()\nSquare()\n</code></pre>\n\n<p>The idea is to start in Trumannia, then be able to choose Restaurant or Library, and then exit to Square and be able to choose again Restaurant or Library. So I'm not sure a) how to fix the error and b) how to format the different variables so the program can \"load\" all the info first and then \"go\" to each place when needed. I hope i explained myself. Thanks again!</p>\n"}, {"tags": ["python", "thread-safety", "queue"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1423097017, "post_id": 28333266, "comment_id": 45015226, "body": "<code>source()</code> is a function that returns a list of items, or an iterator over them."}], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 3243520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/1YtJc.jpg?s=128&g=1", "display_name": "user97662", "link": "https://stackoverflow.com/users/3243520/user97662"}, "is_accepted": false, "score": 0, "last_activity_date": 1423093679, "creation_date": 1423093679, "answer_id": 28333763, "question_id": 28333266, "link": "https://stackoverflow.com/questions/28333266/queue-put-what-item-to-put-in-put/28333763#28333763", "title": "queue.put(), what item to put in put()?", "body": "<p>I was able to do that with a simple:</p>\n\n<pre><code>queue.put(do_some_thing_1)\nqueue.put(do_some_thing_2)\nqueue.put(do_some_thing_3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4057983, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0cejJy34XGU/AAAAAAAAAAI/AAAAAAAAAbw/F2EBLEiue1k/photo.jpg?sz=128", "display_name": "Small Jheng", "link": "https://stackoverflow.com/users/4057983/small-jheng"}, "is_accepted": false, "score": 0, "last_activity_date": 1529033512, "last_edit_date": 1529033512, "creation_date": 1529032802, "answer_id": 50868667, "question_id": 28333266, "link": "https://stackoverflow.com/questions/28333266/queue-put-what-item-to-put-in-put/50868667#50868667", "title": "queue.put(), what item to put in put()?", "body": "<pre><code>queue.put(do_stuff.do_some_thing_1)\nqueue.put(do_stuff.do_some_thing_2)\nqueue.put(do_stuff.do_some_thing_3)\n</code></pre>\n\n<p>I think you can try it:</p>\n\n<pre><code>def worker():\n    while True:\n        item = q.get()\n        do_work(item)\n        q.task_done()\n\nq.put(do_stuff.do_some_thing_1)\nq.put(do_stuff.do_some_thing_2)\nq.put(do_stuff.do_some_thing_3)\n\nfor i in range(num_worker_threads):\n     t = Thread(target=worker)\n     t.daemon = True\n     t.start()\n\n\nq.join()\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 3243520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/1YtJc.jpg?s=128&g=1", "display_name": "user97662", "link": "https://stackoverflow.com/users/3243520/user97662"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1175, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1529033512, "creation_date": 1423091022, "question_id": 28333266, "link": "https://stackoverflow.com/questions/28333266/queue-put-what-item-to-put-in-put", "title": "queue.put(), what item to put in put()?", "body": "<p>The queue module has an example code:\n(<a href=\"https://docs.python.org/2/library/queue.html#module-Queue\" rel=\"nofollow\">https://docs.python.org/2/library/queue.html#module-Queue</a>): </p>\n\n<pre><code>def worker():\n    while True:\n        item = q.get()\n        do_work(item)\n        q.task_done()\n\nq = Queue()\nfor i in range(num_worker_threads):\n     t = Thread(target=worker)\n     t.daemon = True\n     t.start()\n\nfor item in source():\n    q.put(item)\n\nq.join()\n</code></pre>\n\n<p>What I don't understand is, what is the source() function, and what are the 'items'?</p>\n\n<p>I have a class that does something like this:</p>\n\n<pre><code>class do_stuff():\n    def do_some_thing_1():\n          #do something 1\n\n    def do_some_thing_2():\n          #do something 2\n\n    def do_some_thing_3():\n          #do something 3\n\n    def do_them_all():\n          self.do_some_thing_1()\n          self.do_some_thing_2()\n          self.do_some_thing_3()\n</code></pre>\n\n<p>and in my GUI script, I call the class's do_them_all():</p>\n\n<pre><code>  some_button(command = get_it_done)\n\n  def get_it_done():\n      get_done = do_stuff()\n      get_done.do_them_all()\n</code></pre>\n\n<p>and each do_thing function depend on the previous function to be complete first. but in the final class implantation, do_some_thing_3 may be triggered before do_some_thing_2 completes, or do_some_thing_2 is triggered before do_some_thing_1 completes.</p>\n\n<p>How do I implement this queue? \ndo I modify do_them_all():</p>\n\n<pre><code>def do_them_all():\n    queue.put(do_some_thing_1)\n    queue.put(do_some_thing_2)\n    queue.put(do_some_thing_3)\n\n    queue.join()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "tweepy"], "comments": [{"owner": {"reputation": 6811, "user_id": 163809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/8LugB.jpg?s=128&g=1", "display_name": "Stedy", "link": "https://stackoverflow.com/users/163809/stedy"}, "edited": false, "score": 0, "creation_date": 1423092172, "post_id": 28333161, "comment_id": 45013851, "body": "What happens when you run this script? What is <code>SentenceGenerator</code>?"}, {"owner": {"reputation": 24, "user_id": 4461934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d75ae70e189357220a197a3452ca85c?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4461934/daniel"}, "reply_to_user": {"reputation": 6811, "user_id": 163809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/8LugB.jpg?s=128&g=1", "display_name": "Stedy", "link": "https://stackoverflow.com/users/163809/stedy"}, "edited": false, "score": 0, "creation_date": 1423121266, "post_id": 28333161, "comment_id": 45022114, "body": "&#187;SentenceGenerator&#171; is another Pythonscript. It\u2019s a Markov Chain which generates text. With this script you activate it and it prints out a generated sentence. Everything works fine, all i want to do is to tweet the generated sentence, an it does not work with the same command as print \u2026"}, {"owner": {"reputation": 6811, "user_id": 163809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/8LugB.jpg?s=128&g=1", "display_name": "Stedy", "link": "https://stackoverflow.com/users/163809/stedy"}, "edited": false, "score": 0, "creation_date": 1423161157, "post_id": 28333161, "comment_id": 45046569, "body": "Hard to say without looking at <code>SentenceGenerator</code>, your tweepy code looks right. Maybe check into the output with <code>type</code> and printing to stdout?"}], "owner": {"reputation": 24, "user_id": 4461934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d75ae70e189357220a197a3452ca85c?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4461934/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423129031, "creation_date": 1423090565, "last_edit_date": 1423129031, "question_id": 28333161, "link": "https://stackoverflow.com/questions/28333161/how-to-post-anything-else-than-strings-with-tweepy", "title": "how to post anything else than strings with tweepy", "body": "<p>I'm trying to update my Twitter status with generated text. So far generating the text works well, but I cannot post to Twitter. </p>\n\n<pre><code>import tweepy\n\nimport SentenceGenerator\n\nwith open('Ratschlaege.txt','r') as textfile: #load the text to analyze\nsample_text = textfile.read()\n\n#Generating one sentence:\n#print SentenceGenerator.generate_sentence(sample_text)\n\n#Generating a paragraph:\nsentences = 1\nprint ' '.join([SentenceGenerator.generate_sentence(sample_text) for i        in xrange(sentences)])\n\n\n# Consumer keys and access tokens, used for OAuth\nconsumer_key = 'xxx'\nconsumer_secret = 'xxx'\naccess_token = 'xxx'\naccess_token_secret = 'xxx'\n\n# OAuth process, using the keys and tokens\nauth = tweepy.OAuthHandler(consumer_key, consumer_secret)\nauth.set_access_token(access_token, access_token_secret)     \n# Creation of the actual interface, using authentication\napi = tweepy.API(auth)         \n# Sample method, used to update a status\napi.update_status(' '.join([SentenceGenerator.generate_sentence(sample_text) for i in xrange(sentences)]))\n</code></pre>\n\n<p>As far as I have found you can either post strings or from a file, but not the new generated text.\nIs there any way?</p>\n\n<p>\u2014\u2014EDIT\u2014\u2014\nokay i tried to build a function inside my script like this</p>\n\n<pre><code>def tweet (tweet):\n    tweet = ' '.join([SentenceGenerator.generate_sentence(sample_text) for i in xrange(sentences)])\n    # Consumer keys and access tokens, used for OAuth\n    consumer_key = 'xxx'\n    consumer_secret = 'xxx'\n    access_token = 'xxx'\n    access_token_secret = 'xxx'\n\n    # OAuth process, using the keys and tokens\n    auth = tweepy.OAuthHandler(consumer_key, consumer_secret)\n    auth.set_access_token(access_token, access_token_secret)     \n    # Creation of the actual interface, using authentication\n    api = tweepy.API(auth)         \n    # Sample method, used to update a status\n    api.update_status(tweet)        \ntime.sleep(10)\n</code></pre>\n\n<p>now it runs, every ten seconds in a loop (to test it out), and there is no error displayed but the status won't update. it runs like its supposed to do, only it doesn't tweet.\nwhat am i missing??</p>\n\n<p>\u2014\u2014EDIT\u2014\u2014</p>\n\n<p>i also added a part that should insert the generated text into a MySQL db</p>\n\n<pre><code>db = MySQLdb.connect ( host ='127.0.0.1',\n                       user = 'Daniel',\n                       passwd = 'localhost')\n        cur = db.cursor()\n        cur.execute(\"insert into multigram (Ratschlag) value ('%s')\" % (tweet))\n</code></pre>\n\n<p>Same here: No error message but also no entry in the db.\ni am sure it's so simple to resolve, but i don't see what i am doing wrong.</p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 10311, "user_id": 1730172, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/bFvaZ.jpg?s=128&g=1", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1730172/alvaro"}, "edited": false, "score": 0, "creation_date": 1423089679, "post_id": 28332735, "comment_id": 45012775, "body": "when is &quot;others&quot; assigned? seems like you can&#39;t generate the hash until you have this info, which, in time is wrong bc your field does not accept nulls"}, {"owner": {"reputation": 2570, "user_id": 1869090, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/da60fadba181a74e5380271ba125d2e9?s=128&d=identicon&r=PG", "display_name": "t777", "link": "https://stackoverflow.com/users/1869090/t777"}, "reply_to_user": {"reputation": 10311, "user_id": 1730172, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/bFvaZ.jpg?s=128&g=1", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1730172/alvaro"}, "edited": false, "score": 0, "creation_date": 1423091364, "post_id": 28332735, "comment_id": 45013552, "body": "@Alvaro &quot;others&quot; is assigned during the save process at the admin interface."}], "answers": [{"tags": [], "owner": {"reputation": 39782, "user_id": 548165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMkYl.jpg?s=128&g=1", "display_name": "catavaran", "link": "https://stackoverflow.com/users/548165/catavaran"}, "is_accepted": true, "score": 1, "last_activity_date": 1423097491, "creation_date": 1423097491, "answer_id": 28334381, "question_id": 28332735, "link": "https://stackoverflow.com/questions/28332735/set-field-with-content-of-associated-objects-on-creation/28334381#28334381", "title": "Set field with content of associated objects on creation", "body": "<p>As far as I understand you use inlines to edit <code>MyClass.others</code> field in the admin.  If so then you can override <a href=\"https://docs.djangoproject.com/en/1.7/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_related\" rel=\"nofollow\">ModelAdmin.save_related()</a> method to update <code>MyClass</code> instance after the saving of M2M inlines.</p>\n\n<pre><code>class MyClass(models.Model):\n    ....\n    def save(self, force_insert=False, force_update=False, using=None):\n        self.hash = self.generate_hash() if self.pk else 'NO-HASH-YET' \n        super(MyClass, self).save(force_insert, force_update, using)\n\nclass MyClassAdmin(admin.ModelAdmin):\n\n    def save_related(self, request, form, formsets, change):\n        # save M2M with `through` attribute\n        super(MyClassAdmin, self).save_related(request, form, formsets, change)\n        # update `MyModel` instance to regenerate hash\n        form.instance.save()\n</code></pre>\n"}], "owner": {"reputation": 2570, "user_id": 1869090, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/da60fadba181a74e5380271ba125d2e9?s=128&d=identicon&r=PG", "display_name": "t777", "link": "https://stackoverflow.com/users/1869090/t777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 28334381, "answer_count": 1, "score": 0, "last_activity_date": 1423097491, "creation_date": 1423088782, "question_id": 28332735, "link": "https://stackoverflow.com/questions/28332735/set-field-with-content-of-associated-objects-on-creation", "title": "Set field with content of associated objects on creation", "body": "<p>I have the model:</p>\n\n<pre><code>class MyClass(models.Model):\n    name = models.CharField(max_length=30)\n    hash = models.CharField(max_length=64)\n    others = models.ManyToManyField(OtherClass, related_name='other_class', through='OtherClassRelation')\n</code></pre>\n\n<p>Now I need to create a <code>hash</code> based on <code>others</code>.</p>\n\n<pre><code>def save(self, force_insert=False, force_update=False, using=None):\n    self.hash = self.generate_hash()\n    super(models.Model, self).save(force_insert, force_update, using)\n</code></pre>\n\n<p>But at the point of <code>save()</code> <code>others</code> is <code>None</code>.\nI am creating the object using the admin-pages ...</p>\n\n<p>On updating the object, it works.</p>\n\n<p>Any ideas? TIA!</p>\n"}, {"tags": ["python", "command-line", "centos", "fabric", "scp"], "answers": [{"tags": [], "owner": {"reputation": 17566, "user_id": 901641, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PR8Bl.png?s=128&g=1", "display_name": "ArtOfWarfare", "link": "https://stackoverflow.com/users/901641/artofwarfare"}, "is_accepted": true, "score": 0, "last_activity_date": 1423088609, "creation_date": 1423088609, "answer_id": 28332676, "question_id": 28332675, "link": "https://stackoverflow.com/questions/28332675/run-scp-from-command-line-with-password/28332676#28332676", "title": "Run SCP From Command Line With Password", "body": "<p>First, elaborating on the security hazards of doing this, it's very easy to view command line arguments just by running <code>ps -ww -fp &lt;pid&gt;</code>. This vulnerability is why scp doesn't allow the password to be passed in on the command line.</p>\n\n<p>So make sure that you're okay with the fact that anyone who can run that command could see the password in plain text.</p>\n\n<p>The authors of SCP assume that you're so dumb that you would misuse the ability to pass in passwords on the command line. I, on the other hand, believe you've been warned adequately at this point, and if you want to do it, you shouldn't be stopped.</p>\n\n<p>Onto the actual solution:</p>\n\n<p>You need to install <code>expect</code> on the machine that should run SCP.</p>\n\n<p>In my specific case of using the Python library Fabric to control a machine running CentOS, I ran the following to install it:</p>\n\n<pre><code>from fabric.operations import sudo\n\nsudo('yum -y install expect')\n</code></pre>\n\n<p>To run it straight from the command line on CentOS, just do:</p>\n\n<pre><code>$ yum -y install expect\n</code></pre>\n\n<p>(I assume you know whatever your equivalent to yum is on your own OS.)</p>\n\n<p>Once you have expect installed, you can run SCP like this:</p>\n\n<pre><code>expect -c\n'spawn scp &lt;copy-from-username&gt;@&lt;copy-from-address&gt;:&lt;copy-from-path&gt; &lt;copy-to-path&gt;;\n expect \"*?es??o*\"   {send \"yes\\r\"; exp_continue}\n        \"*?assword:\" {send \"&lt;copy-from-password&gt;\\r\"};\n interact'\n</code></pre>\n\n<p>I've formatted it to make it easier to read, but you can replace the linebreaks/tabs with spaces and it'll work just the same.</p>\n\n<p>The first line says that the following is an expect command (not the single quotes around the rest).</p>\n\n<p>The second line spawns the SCP process.</p>\n\n<p>The third line starts the definition of things to look for on the output and says that <code>\"*?es??o*\"</code> should get a response of <code>yes</code>. The <code>\\r</code> is important for it to send the enter keystroke. The funky pattern is intended to catch something like <code>(Yes/No)</code>, as in, if it asks whether to proceed making a connection. <code>exp_continue</code> tells expect that it's not done after it replies to this message.</p>\n\n<p>The fourth line has another thing to look for, the pattern in that line is intended to catch <code>Password:</code> regardless of if the p is capital or not. Make sure to include <code>\\r</code> after the password or else it won't be sent. There's no <code>exp_continue</code> on this line because once expect has sent the password, we don't need it anymore.</p>\n\n<p>The fifth line, <code>interact</code>, is important as this doesn't work without it. I'm a bit fuzzy on what exactly it does, but my understanding is that the <code>spawn</code> until that line is hit. I guess that's important because you need to define the expectations before spawn is run, or else the spawned process could pass whatever expect is supposed to look for, which could defeat the entire purpose. That's my understanding - I could be wrong. Either way, the script works.</p>\n\n<p>Here's the Python function I wrote utilizing Fabric to do this in its entirety:</p>\n\n<pre><code>def putFromFileRepository(repoIP, repoUsername, repoPassword, repoPath, putPath):\n    from fabric.operations import sudo\n\n    # There are security implications from passing a password as an argument\n    # on the command line, namely that command line arguments can be easily seen\n    # from anywhere via 'ps -ww -fp &lt;pid&gt;'.\n    # Thus scp doesn't allow passwords to be passed on the command line.\n    # We'll install expect to make it possible.\n    sudo('yum -y install expect')\n\n    repoStr = repoUsername + '@' + repoIP + ':' + repoPath\n\n    # expect has alien syntax - explained inline below.\n    # see man expect for more details.\n    sudo(\"expect -c 'spawn scp \" + repoStr + ' ' + putPath + '; ' # Run SCP when started.\n         + 'expect \"*?es??o*\" {send \"yes\\r\"; exp_continue} '      # Reply yes to yes/no questions.\n         + '\"*?assword:\" {send \"' + repoPassword + '\\r\"}; '       # Give password when prompted.\n         + \"interact'\")  # Start.\n</code></pre>\n"}], "owner": {"reputation": 17566, "user_id": 901641, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/PR8Bl.png?s=128&g=1", "display_name": "ArtOfWarfare", "link": "https://stackoverflow.com/users/901641/artofwarfare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 28332676, "answer_count": 1, "score": 0, "last_activity_date": 1423088609, "creation_date": 1423088609, "question_id": 28332675, "link": "https://stackoverflow.com/questions/28332675/run-scp-from-command-line-with-password", "title": "Run SCP From Command Line With Password", "body": "<p>I need way to run SCP from the command line with a password.</p>\n\n<p>Specifically, it's because I need to use the Python library Fabric to have one remote machine SCP to another remote machine, without the file passing through the local machine (it's a large file, and the two remote machines have a much quicker connection between each other than my local machine has with either of them.) The two remote machines are running CentOS.</p>\n\n<p>But none of those details are particularly important with respect to the main question.</p>\n"}, {"tags": ["python", "django", "generic-foreign-key"], "comments": [{"owner": {"reputation": 10311, "user_id": 1730172, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/bFvaZ.jpg?s=128&g=1", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1730172/alvaro"}, "edited": false, "score": 0, "creation_date": 1423090129, "post_id": 28332663, "comment_id": 45012990, "body": "Quickfix: use a list comprehesion [cit for cit in sw.full_citations.all() if cit.is_primary]"}, {"owner": {"reputation": 639, "user_id": 4047481, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/248aaa3c6eb097dbbc8db6d51be5658a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4047481/steph"}, "reply_to_user": {"reputation": 10311, "user_id": 1730172, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/bFvaZ.jpg?s=128&g=1", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/1730172/alvaro"}, "edited": false, "score": 0, "creation_date": 1423090431, "post_id": 28332663, "comment_id": 45013136, "body": "Thank you, @Alvaro! That definitely helps. Just wondering if there is a way to filter on the FullCitation object itself that would be more Django-ish...if not, I&#39;ll definitely use the list comprehension!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user764357"}, "edited": false, "score": 0, "creation_date": 1423094362, "post_id": 28332663, "comment_id": 45014514, "body": "You can also use a generator comprehension, <code>(x for x in y)</code> to delay the database query and only perform it when neccessary."}], "answers": [{"comments": [{"owner": {"reputation": 639, "user_id": 4047481, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/248aaa3c6eb097dbbc8db6d51be5658a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4047481/steph"}, "edited": false, "score": 0, "creation_date": 1423149864, "post_id": 28334265, "comment_id": 45039528, "body": "that&#39;s almost there but not quite (definitely in the vein of what I&#39;m looking for!)- I need one more &#39;level&#39; of filtering. I want to filter not just on the SupportedProgram models but on a specific instance of Supported Program. So, I want all FullCitations where the SupportedProgram is, specifically, &#39;Program1&#39; and then, of those FullCitations, I want only those where is_primary=True...."}, {"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "reply_to_user": {"reputation": 639, "user_id": 4047481, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/248aaa3c6eb097dbbc8db6d51be5658a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4047481/steph"}, "edited": false, "score": 0, "creation_date": 1423151965, "post_id": 28334265, "comment_id": 45040959, "body": "@steph Updated to filter for a specific SupportedProgram instance."}, {"owner": {"reputation": 639, "user_id": 4047481, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/248aaa3c6eb097dbbc8db6d51be5658a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4047481/steph"}, "edited": false, "score": 0, "creation_date": 1423153620, "post_id": 28334265, "comment_id": 45042006, "body": "Thank you so much! @dylrei"}], "tags": [], "owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "is_accepted": true, "score": 4, "last_activity_date": 1423151945, "last_edit_date": 1423151945, "creation_date": 1423096730, "answer_id": 28334265, "question_id": 28332663, "link": "https://stackoverflow.com/questions/28332663/filter-generic-foreign-key/28334265#28334265", "title": "Filter Generic Foreign Key", "body": "<p>Comprehensions should be a last resort for filtering QuerySets. Far better to let them remain as QuerySets as long as you can. I think this is what you're looking for:</p>\n\n<pre><code>ct_supported = ContentType.objects.get_for_model(SupportedProgram))\nprimary_citations = FullCitation.objects.filter(content_type=ct_supported, is_primary=True)\n</code></pre>\n\n<p><strong>Updated:</strong>\nIf you want to filter for a specific SupportedProgram instance, do this:</p>\n\n<pre><code>my_supported = SupportedProgram.objects.get(id=instance_id_goes_here)\nct_supported = ContentType.objects.get_for_model(SupportedProgram))\nprimary_citations = FullCitation.objects.filter(content_object=my_supported, content_type=ct_supported, is_primary=True)\n</code></pre>\n"}], "owner": {"reputation": 639, "user_id": 4047481, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/248aaa3c6eb097dbbc8db6d51be5658a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4047481/steph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1567, "favorite_count": 0, "accepted_answer_id": 28334265, "answer_count": 1, "score": 1, "last_activity_date": 1423151945, "creation_date": 1423088554, "question_id": 28332663, "link": "https://stackoverflow.com/questions/28332663/filter-generic-foreign-key", "title": "Filter Generic Foreign Key", "body": "<p>Is there a more \"Python/Django\" way to query/filter objects by generic foreign key? I'm trying to get all FullCitation objects for a particular software, where is_primary is True.</p>\n\n<p>I know I can't do this but I want to do something like this: </p>\n\n<pre><code>ct_supported = ContentType.objects.get(app_label=\"supportedprogram\", model=\"software\")\nprimary_citations = FullCitation.objects.filter(content_type__name=ct_supported, object_id__in='', is_primary=True)\n</code></pre>\n\n<p>models.py</p>\n\n<pre><code>class FullCitation(models.Model)\n    # the software to which this citation belongs\n    # either a supported software program or a non-supported software program\n\n    limit = models.Q(app_label = 'myprograms', model = 'supportedprogram') | models.Q(app_label = 'myprograms', model = 'nonsupportedprogram') \n    content_type = models.ForeignKey(ContentType), limit_choices_to = limit, )\n    object_id = models.PositiveIntegerField()\n    content_object = generic.GenericForeignKey('content_type', 'object_id')\n\n    is_primary = models.BooleanField(help_text=\"Is this the Primary Citation for the software program?\")\n\nclass NonSupportedProgram(models.Model):\n    title = models.CharField(max_length=256, blank = True)\n    full_citation = generic.GenericRelation('FullCitation')\n\nclass SupportedProgram(models.Model):\n    title = models.CharField(max_length=256, blank = True)\n    full_citation = generic.GenericRelation('FullCitation')\n    # and a bunch of other fields.....\n</code></pre>\n\n<p>views.py    # My current attempt</p>\n\n<pre><code>primary_citations = []\nsw_citations = sw.full_citations.all()\n    for x in sw_citations:\n        if x.is_primary:\n            primary_citations.append(x)\n</code></pre>\n"}, {"tags": ["python", "pandas", "resampling"], "comments": [{"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1423088610, "post_id": 28332644, "comment_id": 45012335, "body": "What does <code>print(pd.__version__)</code> show?  When I run your code, I get all Trues.  (I tend to run bleeding-edge pandas, though, so I might be benefiting from a recent bug fix.)"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1423094072, "post_id": 28332644, "comment_id": 45014433, "body": "They&#39;re all True on 15.2, so updating is probably to solution here..."}], "answers": [{"tags": [], "owner": {"reputation": 203, "user_id": 4110865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a246fa0bea6fa954c08fc8c5b1581ef?s=128&d=identicon&r=PG&f=1", "display_name": "Adi E", "link": "https://stackoverflow.com/users/4110865/adi-e"}, "is_accepted": false, "score": 1, "last_activity_date": 1423122543, "last_edit_date": 1423122543, "creation_date": 1423121847, "answer_id": 28338555, "question_id": 28332644, "link": "https://stackoverflow.com/questions/28332644/pandas-resample-bug/28338555#28338555", "title": "Pandas resample bug?", "body": "<p>Thanks @DSM and @Andy, indeed I had pandas 0.15.1, upgrading to latest 0.15.2 solved it</p>\n"}], "owner": {"reputation": 203, "user_id": 4110865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a246fa0bea6fa954c08fc8c5b1581ef?s=128&d=identicon&r=PG&f=1", "display_name": "Adi E", "link": "https://stackoverflow.com/users/4110865/adi-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423122543, "creation_date": 1423088500, "question_id": 28332644, "link": "https://stackoverflow.com/questions/28332644/pandas-resample-bug", "title": "Pandas resample bug?", "body": "<p>Trying to down sample of 8 weekly time points to 2 points, each represents the average over 4 weeks, I use resample(). I started by defining the rule using (60*60*24*7*4) seconds, and saw I ended up in 3 time points, latest one is dummy. Started to check it, I noticed that if I define the rule as 4W or 28D it's fine, but going down to 672H or smaller units (minutes, seconds,..) the extra faked column appears. This testing code:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nd = np.arange(16).reshape(2, 8)\nres = []\n\nfor month in range(1,13):\n    start_date = str(month) + '/1/2014'\n    df = pd.DataFrame(data=d, index=['A', 'B'], columns=pd.date_range(start_date, periods=8, freq='7D'))\n    print(df, '\\n')\n\n    dfw = df.resample(rule='4W', how='mean', axis=1, closed='left', label='left')\n    print('4 Weeks:\\n', dfw, '\\n')\n    dfd = df.resample(rule='28D', how='mean', axis=1, closed='left', label='left')\n    print('28 Days:\\n', dfd, '\\n')\n    dfh = df.resample(rule='672H', how='mean', axis=1, closed='left', label='left')\n    print('672 Hours:\\n', dfh, '\\n')\n    dfm = df.resample(rule='40320T', how='mean', axis=1, closed='left', label='left')\n    print('40320 Minutes:\\n', dfm, '\\n')\n    dfs = df.resample(rule='2419200S', how='mean', axis=1, closed='left', label='left')\n    print('2419200 Seconds:\\n', dfs, '\\n')\n    res.append(([start_date], dfh.shape[1] == dfd.shape[1]))\n\nprint('\\n\\n--------------------------\\n\\n')\n[print(res[i]) for i in range(12)]\npass\n</code></pre>\n\n<p>is printed as (I pasted here only the printout of the last iteration):</p>\n\n<pre><code>    2014-11-01  2014-11-29  2014-12-27\nA         1.5         5.5         NaN\nB         9.5        13.5         NaN\n\n   2014-12-01  2014-12-08  2014-12-15  2014-12-22  2014-12-29  2015-01-05  \\\nA           0           1           2           3           4           5\nB           8           9          10          11          12          13\n\n   2015-01-12  2015-01-19\nA           6           7\nB          14          15\n\n4 Weeks:\n    2014-11-30  2014-12-28\nA         1.5         5.5\nB         9.5        13.5\n\n28 Days:\n    2014-12-01  2014-12-29\nA         1.5         5.5\nB         9.5        13.5\n\n672 Hours:\n    2014-12-01  2014-12-29  2015-01-26\nA         1.5         5.5         NaN\nB         9.5        13.5         NaN\n\n40320 Minutes:\n    2014-12-01  2014-12-29  2015-01-26\nA         1.5         5.5         NaN\nB         9.5        13.5         NaN\n\n2419200 Seconds:\n    2014-12-01  2014-12-29  2015-01-26\nA         1.5         5.5         NaN\nB         9.5        13.5         NaN\n\n\n\n--------------------------\n\n\n(['1/1/2014'], False)\n(['2/1/2014'], True)\n(['3/1/2014'], True)\n(['4/1/2014'], True)\n(['5/1/2014'], False)\n(['6/1/2014'], False)\n(['7/1/2014'], False)\n(['8/1/2014'], False)\n(['9/1/2014'], False)\n(['10/1/2014'], False)\n(['11/1/2014'], False)\n(['12/1/2014'], False)\n</code></pre>\n\n<p>So there is an error for date_range starting on beginning of 9 months, and no error for 3 months (February-April). Either I miss something or it's a bug, is it?</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1423088815, "post_id": 28332600, "comment_id": 45012402, "body": "What? Could you clarify exactly what you are expecting and what happens instead? Could you cut the code down to a <a href=\"http://stackoverflow.com/help/mcve\">minimal example</a>? Is this related to e.g. <a href=\"http://stackoverflow.com/q/20094215/3001761\">stackoverflow.com/q/20094215/3001761</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 4530597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dba7417f5037666b38250f34866365c8?s=128&d=identicon&r=PG&f=1", "display_name": "callingconvention", "link": "https://stackoverflow.com/users/4530597/callingconvention"}, "is_accepted": false, "score": 3, "last_activity_date": 1423091514, "last_edit_date": 1423091514, "creation_date": 1423089701, "answer_id": 28332956, "question_id": 28332600, "link": "https://stackoverflow.com/questions/28332600/argparse-subparser-help-display/28332956#28332956", "title": "argparse subparser help display", "body": "<p>The answer, for anyone else who uses multiple positional arguments, is that you have to supply the positional arguments along with the subcommand.</p>\n\n<p>in my case:</p>\n\n<pre><code>command.py &lt;username&gt; &lt;apikey&gt; search -h\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>command.py &lt;username&gt; &lt;apikey&gt; import -h\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 4530597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dba7417f5037666b38250f34866365c8?s=128&d=identicon&r=PG&f=1", "display_name": "callingconvention", "link": "https://stackoverflow.com/users/4530597/callingconvention"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2129, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1423091542, "creation_date": 1423088337, "last_edit_date": 1423091542, "question_id": 28332600, "link": "https://stackoverflow.com/questions/28332600/argparse-subparser-help-display", "title": "argparse subparser help display", "body": "<p>I can't seem to get the subparser help commands to properly display their help.\nif I do <code>command.py -h</code>, I get the full help menu, but the subcommand/subparser help isn't showing.  </p>\n\n<ul>\n<li><code>command.py search -h</code> prints the parent help</li>\n<li><code>command.py import -h</code> prints the parent help as well</li>\n</ul>\n\n<p>When I typed <code>command.py import -h</code>, I wanted the help screen for the <code>import</code> subcommand and not the parent help.  </p>\n\n<p>I can't seem to figure out what is missing/broken.</p>\n\n<pre><code>parser = argparse.ArgumentParser(description = 'description', epilog='some epilog', add_help=True)\nparser.add_argument('username', help='username')\nparser.add_argument('apikey', help='API key')\nparser.add_argument('--host', default=host, help='set the API host.  Defaults to %s' % host)\nparser.add_argument('--port', default=port, type=int, help='set the API port.  Defaults to %s' % port)\nparser.add_argument('--tls', dest='tls', action='store_true', help='set TLS (default value)')\nparser.add_argument('--notls', dest='tls', action='store_false', help='turn off TLS')\nparser.add_argument('--proxy', help='proxy url example: https://username:password@some.proxyserver.com:8080')\nparser.add_argument('--type', default='https', choices=['http', 'https'], help='set proxy type')\nparser.set_defaults(tls=True)\nsubparsers = parser.add_subparsers(title='subcommands', description='valid subcommands', help='sub-command help')\nsearch_subparser = subparsers.add_parser('search', help='search help')\nsearch_subparser.add_argument('--itype', choices=valid_intel_type, help='restrict by intelligence type')\nsearch_subparser.add_argument('--severity', choices=valid_severity, help='restrict by severity')\nsearch_subparser.add_argument('--classification', choices=valid_classification, help='restrict by classification')\nsearch_subparser.add_argument('--status', choices=valid_status, help='parse by status')\nsearch_subparser.add_argument('--output', choices=['json', 'csv'], default=output, help='output format.  Defaults to %s' % output)\nimport_subparser = subparsers.add_parser('import', help='import help')\nimport_subparser.add_argument('file', help='file of indicators to import')\nimport_subparser.add_argument('itype', choices=valid_intel_type, help='intelligence type to import')\nimport_subparser.add_argument('--classification', default='private', choices=valid_classification, help='set classification level for import')\nimport_subparser.add_argument('--confidence', default=30, type=int, help='set cconfidence level for import')\nimport_subparser.add_argument('--severity', default='medium', choices=valid_severity, help='set severity level for import')\nimport_subparser.add_argument('--notes', default=None, nargs='*', help='set analyst notes for import file')\nargs = parser.parse_args()\n</code></pre>\n"}, {"tags": ["python", "regex", "vim"], "answers": [{"tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": true, "score": 2, "last_activity_date": 1423088759, "creation_date": 1423088759, "answer_id": 28332728, "question_id": 28332580, "link": "https://stackoverflow.com/questions/28332580/convert-vim-regex-to-python-for-re-sub/28332728#28332728", "title": "convert vim regex to python for re.sub", "body": "<p><code>\\a</code> means the bell character (0x07) in Python, and <code>$\\n</code> is a redundant bad idea, so:</p>\n\n<pre><code>x = re.sub(r\"^ *[A-Za-z].*\\n\",\"\",y)\n</code></pre>\n\n<p>Also, there's no reason to write <code>' *?'</code> instead of <code>' *'</code> here, as it's always going to be followed by a non-space if it's matching.</p>\n"}, {"tags": [], "owner": {"reputation": 7880, "user_id": 3006544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e73a1c6d75a879f829ec8aacd1859e61?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan J", "link": "https://stackoverflow.com/users/3006544/ryan-j"}, "is_accepted": false, "score": 2, "last_activity_date": 1423089088, "creation_date": 1423089088, "answer_id": 28332807, "question_id": 28332580, "link": "https://stackoverflow.com/questions/28332580/convert-vim-regex-to-python-for-re-sub/28332807#28332807", "title": "convert vim regex to python for re.sub", "body": "<p>If you want to match any number of whitespace, you can also use the <code>\\s</code> sequence.</p>\n\n<p>Any letter will be matched by the <code>[a-zA-Z]</code> character class. You also don't need to use the <code>$</code> and the <code>\\n</code>, either will do.</p>\n\n<p>Suggest the following:</p>\n\n<pre><code>x = re.sub(r\"^\\s*[a-zA-Z].*(\\r|\\n)\",\"\",y)\n</code></pre>\n\n<p>If you want at least one whitespace, use <code>\\s+</code> instead of <code>\\s*</code></p>\n"}], "owner": {"reputation": 140, "user_id": 1357713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1aab1d6c9446a819e76e042d9dce406a?s=128&d=identicon&r=PG", "display_name": "MarkWayne", "link": "https://stackoverflow.com/users/1357713/markwayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 28332728, "answer_count": 2, "score": 0, "last_activity_date": 1423089088, "creation_date": 1423088292, "last_edit_date": 1423088554, "question_id": 28332580, "link": "https://stackoverflow.com/questions/28332580/convert-vim-regex-to-python-for-re-sub", "title": "convert vim regex to python for re.sub", "body": "<p>I have a working regex under vim: <code>/^ \\{-}\\a.*$\\n</code></p>\n\n<p>I implement a global search and replace as    <code>:%s/^ \\{-}\\a.*$\\n//</code>\nThis works great -- removes all lines that start with any number of spaces (matched non-greedily), followed by a letter and anything else to the end of the line including the newline.</p>\n\n<p>I cannot (to save my soul) figure out the analogous regex in Python. Here's what make sense to me:</p>\n\n<pre><code>x = re.sub(\"^ *?\\a.$\\n\",\"\",y)\n</code></pre>\n\n<p>But this doesn't do anything.</p>\n\n<p>Many thanks for your sagacious replies.</p>\n"}, {"tags": ["python", "http", "python-requests", "http-error"], "comments": [{"owner": {"reputation": 503, "user_id": 2045599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764050cc52ccedc70ea49fcd67182bc4?s=128&d=identicon&r=PG", "display_name": "AdriVelaz", "link": "https://stackoverflow.com/users/2045599/adrivelaz"}, "edited": false, "score": 0, "creation_date": 1423088566, "post_id": 28332565, "comment_id": 45012307, "body": "Without revealing personal information, what&#39;s the contents of r.__dict__, it may give you helpful hints in what&#39;s going on."}, {"owner": {"reputation": 9937, "user_id": 3710490, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FFDsr.png?s=128&g=1", "display_name": "Valijon", "link": "https://stackoverflow.com/users/3710490/valijon"}, "edited": false, "score": 0, "creation_date": 1423088580, "post_id": 28332565, "comment_id": 45012317, "body": "Are you sure that proxy port is correct? Try: <a href=\"http://stackoverflow.com/a/8287752/3710490\">http://stackoverflow.com/a/8287752/3710490</a> and the next comment suggestion with urllib"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1423089596, "post_id": 28332565, "comment_id": 45012733, "body": "Is any web server running on localhost? Trying running a simple <code>node.js</code> webserver on localhost and try it again - you aren&#39;t going to get a response if there isn&#39;t a server listening at the other end."}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1423089753, "post_id": 28332565, "comment_id": 45012805, "body": "Also, most corporate proxies use port <code>8080</code>, not port <code>80&#47;443</code>, just throwing that out there."}, {"owner": {"reputation": 547, "user_id": 4275396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-0fXuUNccrt8/AAAAAAAAAAI/AAAAAAAAAEI/KQwOuJ0OMyg/photo.jpg?sz=128", "display_name": "Harvey", "link": "https://stackoverflow.com/users/4275396/harvey"}, "edited": false, "score": 0, "creation_date": 1423090149, "post_id": 28332565, "comment_id": 45013005, "body": "Thanks - all this is useful. I missed Valijon&#39;s reference, its helpful. And RPGillespie, I&#39;ll try 8080 tomorrow and see what happens. The 80 and 443 were all I saw on the network trace... but I wasn&#39;t sure if that was what I needed to enter. Thanks all and stay tuned for live debuggering..."}, {"owner": {"reputation": 1440, "user_id": 1489607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d920b6f523d6bcda52a52ca286c3434?s=128&d=identicon&r=PG", "display_name": "Juan Fco. Roco", "link": "https://stackoverflow.com/users/1489607/juan-fco-roco"}, "edited": false, "score": 0, "creation_date": 1423102971, "post_id": 28332565, "comment_id": 45016580, "body": "Check your browser configuration to get the proxy ports"}, {"owner": {"reputation": 547, "user_id": 4275396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-0fXuUNccrt8/AAAAAAAAAAI/AAAAAAAAAEI/KQwOuJ0OMyg/photo.jpg?sz=128", "display_name": "Harvey", "link": "https://stackoverflow.com/users/4275396/harvey"}, "edited": false, "score": 0, "creation_date": 1423141528, "post_id": 28332565, "comment_id": 45033655, "body": "Ran the code from home and it works as expected, so its something on my corporate network. Oddly, nothing is shown in my procy config on my workstation."}], "answers": [{"comments": [{"owner": {"reputation": 1440, "user_id": 1489607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d920b6f523d6bcda52a52ca286c3434?s=128&d=identicon&r=PG", "display_name": "Juan Fco. Roco", "link": "https://stackoverflow.com/users/1489607/juan-fco-roco"}, "edited": false, "score": 0, "creation_date": 1423102914, "post_id": 28333008, "comment_id": 45016561, "body": "Node.js?   Just use python -m SimpleHTTPServer"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "reply_to_user": {"reputation": 1440, "user_id": 1489607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d920b6f523d6bcda52a52ca286c3434?s=128&d=identicon&r=PG", "display_name": "Juan Fco. Roco", "link": "https://stackoverflow.com/users/1489607/juan-fco-roco"}, "edited": false, "score": 0, "creation_date": 1423153892, "post_id": 28333008, "comment_id": 45042165, "body": "Nice, I didn&#39;t even know that existed."}], "tags": [], "owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "is_accepted": false, "score": -1, "last_activity_date": 1423089874, "creation_date": 1423089874, "answer_id": 28333008, "question_id": 28332565, "link": "https://stackoverflow.com/questions/28332565/python-v2-7-requests-v2-5-1-all-get-requests-return-http-error-503/28333008#28333008", "title": "Python v2.7 Requests v2.5.1 - all get requests return HTTP Error 503", "body": "<ol>\n<li><p>Doing a <code>GET</code> request on <code>localhost</code> won't do anything unless there is a webserver running on <code>localhost:80</code>. Setup a <code>node.js</code> webserver running on localhost and then try again.</p></li>\n<li><p>Most corporate proxies use port <code>8080</code> for all traffic.</p></li>\n</ol>\n"}], "owner": {"reputation": 547, "user_id": 4275396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-0fXuUNccrt8/AAAAAAAAAAI/AAAAAAAAAEI/KQwOuJ0OMyg/photo.jpg?sz=128", "display_name": "Harvey", "link": "https://stackoverflow.com/users/4275396/harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 731, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423089874, "creation_date": 1423088234, "question_id": 28332565, "link": "https://stackoverflow.com/questions/28332565/python-v2-7-requests-v2-5-1-all-get-requests-return-http-error-503", "title": "Python v2.7 Requests v2.5.1 - all get requests return HTTP Error 503", "body": "<p>I'm running anaconda python 2.7 and the latest Requests library on a Windows 7 desktop connected to a corporate network with an outbound proxy server at 10.0.0.255.</p>\n\n<p>My python script reads as follows:</p>\n\n<pre><code>import requests\nr = requests.get(\"http://google.com\")\n</code></pre>\n\n<p>I've also tried many different intranet and internet urls, HTTP and HTTPs all with the same result: 503 error. \nI've thought somehow the proxy is at fault. I've added the 'proxies = prox' statement with the following definition\"</p>\n\n<pre><code>prox={\n    \"http\" : \"10.0.0.255:80\" \n    \"https\" : \"10.0.0.225:443\"\n} \n</code></pre>\n\n<p>Which made no difference, but its entirely possible that my ports are wrong as the documentation is a bit sparse on the statement (only one example). </p>\n\n<p>I did try localhost and it gave me a different error:</p>\n\n<p>ConnectionError: ('Connection aborted.', error(10061, 'No connection could be made because the target machine actively refused it'))</p>\n\n<p>My machine hates me. Great.</p>\n\n<p>At this point I'm stumped. Its probably something related to all the security c_rp on this machine, but I'm not sure what my next move is.</p>\n\n<p>I am a N00b to python, and haven't coded in 20 years. That said, I wrote hard core C and ran memory debugs deep in architecture to find leaks, so I'm not completely dumb, just very, very rusty.</p>\n"}, {"tags": ["python", "dictionary", "floating-point"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user764357"}, "is_accepted": false, "score": 3, "last_activity_date": 1423088301, "creation_date": 1423088301, "answer_id": 28332582, "question_id": 28332555, "link": "https://stackoverflow.com/questions/28332555/limit-a-float-list-into-10-digits/28332582#28332582", "title": "limit a float list into 10 digits", "body": "<p>You can do it in a single line like so:</p>\n\n<pre><code>    newline=[\"{:.10f}\".format(float(i)) for i in lines]\n    jitterfile.write(join(newline)+'\\n')\n</code></pre>\n\n<p>Of note, your third instruction <code>newline=map(str,newline)</code> is redundant as the entries in the list are already strings, so casting them is unnecessary.</p>\n"}, {"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 3, "last_activity_date": 1423096736, "last_edit_date": 1423096736, "creation_date": 1423089043, "answer_id": 28332795, "question_id": 28332555, "link": "https://stackoverflow.com/questions/28332555/limit-a-float-list-into-10-digits/28332795#28332795", "title": "limit a float list into 10 digits", "body": "<p>The map function also accept lambda , also as the result of <code>format</code> is string you don't need to apply the <code>str</code> on your list ,and you need to use join with a delimiter like ',':</p>\n\n<pre><code>&gt;&gt;&gt; newline=map(lambda x:\"{:.10f}\".format(float(x)),newline)\n&gt;&gt;&gt; newline\n['1628.2460000000', '100.0000000000', '0.0456323200', '0.0489821700', '0.0030176560', '0.2271272000', '0.2437533000', '0.0150023200', '0.4102987000', '0.4117742000', '0.0054615040', '2.0808380000', '0.0005527303', '-0.0004542367', '-0.0223878100', '-0.0008196812', '-0.0379630600', '-0.0007906407', '-0.0006738000', '0.0000000000']\njitterfile.write(','.join(newline)+'\\n') \n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 4497470, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-BVmRE9JHcsw/AAAAAAAAAAI/AAAAAAAAAGA/waKDmZu9Ptg/photo.jpg?sz=128", "display_name": "rfeynman", "link": "https://stackoverflow.com/users/4497470/rfeynman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423096736, "creation_date": 1423088190, "last_edit_date": 1423088289, "question_id": 28332555, "link": "https://stackoverflow.com/questions/28332555/limit-a-float-list-into-10-digits", "title": "limit a float list into 10 digits", "body": "<p>I have a list import from a data file.</p>\n\n<pre><code>lines=['1628.246', '100.0000', '0.4563232E-01', '0.4898217E-01', '0.3017656E-02', '0.2271272', '0.2437533', '0.1500232E-01', '0.4102987', '0.4117742', '0.5461504E-02', '2.080838', '0.5527303E-03', '-0.4542367E-03', '-0.2238781E-01', '-0.8196812E-03', '-0.3796306E-01', '-0.7906407E-03', '-0.6738000E-03', '0.000000']\n</code></pre>\n\n<p>I want to generate a new list include all element in same 10 digits and put back to file\nHere is I did:</p>\n\n<pre><code>newline=map(float,lines)\nnewline=map(\"{:.10f}\".format,newline)\nnewline=map(str,newline)\njitterfile.write(join(newline)+'\\n')\n</code></pre>\n\n<p>It works, but looks not beautiful.  Any idea to make it good looking?</p>\n"}, {"tags": ["python", "performance"], "comments": [{"owner": {"reputation": 39428, "user_id": 315828, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/033829f8a1562bafb256157e24548fac?s=128&d=identicon&r=PG", "display_name": "xbonez", "link": "https://stackoverflow.com/users/315828/xbonez"}, "edited": false, "score": 3, "creation_date": 1423088414, "post_id": 28332552, "comment_id": 45012230, "body": "In your while loop, you&#39;re subtracting 11, so your while loop goes through lesser iterations than your for loop."}, {"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 1, "creation_date": 1423088430, "post_id": 28332552, "comment_id": 45012239, "body": "You&#39;re subtracting 11 from the <code>ll</code> variable in the while loop."}, {"owner": {"reputation": 2608, "user_id": 3333511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6007b9bf81366b10b303599a563ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Mascaro", "link": "https://stackoverflow.com/users/3333511/mr-mascaro"}, "edited": false, "score": 2, "creation_date": 1423088436, "post_id": 28332552, "comment_id": 45012240, "body": "One reason could be that your while loop is only running 1/10th the iterations of the for loop unless that&#39;s a typo."}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 4, "creation_date": 1423088438, "post_id": 28332552, "comment_id": 45012241, "body": "<code>range(10000000)</code> is a function call that (depending on your version of python) generates a huge list, so there&#39;s a time penalty right away that your while loop doesn&#39;t deal with."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1423088512, "post_id": 28332552, "comment_id": 45012279, "body": "Running 10M iterations and reporting 100k iterations isn&#39;t helping either..."}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 4104542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-UFrYqnYr-Bo/AAAAAAAAAAI/AAAAAAAAABg/v0zykBGnBzA/photo.jpg?sz=128", "display_name": "ultrasmart", "link": "https://stackoverflow.com/users/4104542/ultrasmart"}, "is_accepted": false, "score": -1, "last_activity_date": 1542001329, "last_edit_date": 1542001329, "creation_date": 1423088452, "answer_id": 28332628, "question_id": 28332552, "link": "https://stackoverflow.com/questions/28332552/while-loops-vs-for-loop-speed/28332628#28332628", "title": "While loops vs for loop -- speed", "body": "<p>The reason for the difference in speed is the way numbers generate. Expressions evaluation is faster than function calls.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user764357"}, "is_accepted": false, "score": 5, "last_activity_date": 1423088556, "creation_date": 1423088556, "answer_id": 28332664, "question_id": 28332552, "link": "https://stackoverflow.com/questions/28332552/while-loops-vs-for-loop-speed/28332664#28332664", "title": "While loops vs for loop -- speed", "body": "<p>This runs <code>10000000</code> or <code>10^7</code> times:</p>\n\n<pre><code>for kk in range(10000000):\n   pass\n</code></pre>\n\n<p>This runs <code>10000000/11</code> or <code>909090</code> times, or <code>~9*10^5</code>:</p>\n\n<pre><code>ll = 10000000\nwhile ll &gt; 0:\n    ll = ll -11\n</code></pre>\n\n<p>Given that they are not equivalent loops its not unexpected they run at different speeds.</p>\n"}, {"tags": [], "owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "is_accepted": false, "score": 1, "last_activity_date": 1423088676, "creation_date": 1423088676, "answer_id": 28332705, "question_id": 28332552, "link": "https://stackoverflow.com/questions/28332552/while-loops-vs-for-loop-speed/28332705#28332705", "title": "While loops vs for loop -- speed", "body": "<p>I'm not a python expert so I can't attest to what datetime.now is doing (it's probably system specific) but it looks like your for loop is actually iterating more times than your while loop, which could explain the discrepancy. Change the line:</p>\n\n<pre><code>ll = ll -11\n</code></pre>\n\n<p>to</p>\n\n<pre><code>ll = ll -1\n</code></pre>\n\n<p>and you should have an equivalent number of iterations through each loop. </p>\n"}, {"tags": [], "owner": {"reputation": 590, "user_id": 3708051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Tc5X.jpg?s=128&g=1", "display_name": "Vukieboo", "link": "https://stackoverflow.com/users/3708051/vukieboo"}, "is_accepted": false, "score": 1, "last_activity_date": 1423088698, "creation_date": 1423088698, "answer_id": 28332709, "question_id": 28332552, "link": "https://stackoverflow.com/questions/28332552/while-loops-vs-for-loop-speed/28332709#28332709", "title": "While loops vs for loop -- speed", "body": "<p>The following code decrements your counter by 11 rather than 1. It must be a typo? </p>\n\n<pre><code>while ll &gt; 0:\nll = ll -11\n</code></pre>\n\n<p>Since your counter is decremented by a greater value in the while loop it will cause that loop to finish sooner than the for loop. </p>\n"}, {"tags": [], "owner": {"reputation": 547, "user_id": 4275396, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-0fXuUNccrt8/AAAAAAAAAAI/AAAAAAAAAEI/KQwOuJ0OMyg/photo.jpg?sz=128", "display_name": "Harvey", "link": "https://stackoverflow.com/users/4275396/harvey"}, "is_accepted": false, "score": 1, "last_activity_date": 1423089813, "creation_date": 1423089813, "answer_id": 28332994, "question_id": 28332552, "link": "https://stackoverflow.com/questions/28332552/while-loops-vs-for-loop-speed/28332994#28332994", "title": "While loops vs for loop -- speed", "body": "<p>The first loop runs 10000000 times\nThe second loop runs 909091 times</p>\n\n<p>Instead try:</p>\n\n<pre><code>from datetime import datetime\n\ntest1 = datetime.now()\na = 0\nb = 0\nfor kk in range(10000000):\n   a = a + 1\nprint('Time for 100000 runs is ({}s)'.format(datetime.now() - test1))\n\ntest2 = datetime.now()\n\nwhile b &lt; a:\n    b = b + 1\nprint('Time for 100000 runs is ({}s)'.format(datetime.now() - test2))\n</code></pre>\n\n<p>Which gives me 1.190000s and 1.061000s respectively. </p>\n\n<p>The for/in idiom does generally result in faster operations. If you are concerned with speed, you should look into numpy and pypy.</p>\n"}], "owner": {"reputation": 275, "user_id": 4379139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/eb17fd890ae02846598d287adf120a51?s=128&d=identicon&r=PG&f=1", "display_name": "mlg4080", "link": "https://stackoverflow.com/users/4379139/mlg4080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1814, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1542001329, "creation_date": 1423088179, "last_edit_date": 1423088600, "question_id": 28332552, "link": "https://stackoverflow.com/questions/28332552/while-loops-vs-for-loop-speed", "title": "While loops vs for loop -- speed", "body": "<p>I have always thought that for loops run faster than while loops. However, I recently just tested the speed and cannot figure out why the while loop runs about 5 to 6 times faster. Here is the test code I wrote.</p>\n\n<pre><code>test1 = datetime.now()\n\nll = 100000\nfor kk in range(10000000):\n   pass\n\n\nprint('Time for 100000 runs is ({}s)'.format(datetime.now() - test1))\n\ntest2 = datetime.now()\n\nll = 10000000\nwhile ll &gt; 0:\n    ll = ll -11\n\nprint('Time for 100000 runs is ({}s)'.format(datetime.now() - test2))\n</code></pre>\n\n<p>After running this test, I get that the for loop runs in about 1.26 seconds and the while loop runs in about .22 seconds. Why do I not just always artificially turn for loops into while loops in this way if they're quicker?</p>\n\n<p>Thanks!</p>\n\n<p>EDIT: After people pointed out my typo, and using the suggestion @RPGillespie moving the range(10000000) out infront of the timing, I got a result matching what I expected. Namely, the for loop is about three times faster than the while loop.</p>\n"}, {"tags": ["nginx", "python", "gunicorn"], "answers": [{"tags": [], "owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "is_accepted": false, "score": 0, "last_activity_date": 1423088647, "creation_date": 1423088647, "answer_id": 28332693, "question_id": 28332653, "link": "https://stackoverflow.com/questions/28332653/nginx-gunicorn-pyramid-get-actual-domain-name-from-headers/28332693#28332693", "title": "nginx + gunicorn + pyramid: Get actual domain name from headers", "body": "<p>Since you're using WSGI, you can find the hostname in <code>environ['HTTP_HOST']</code> See <a href=\"https://www.python.org/dev/peps/pep-0333/\" rel=\"nofollow\">PEP 333</a> for more details and other information you can retrieve.</p>\n"}, {"comments": [{"owner": {"reputation": 1479, "user_id": 198959, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7b81da0c9700b0cda076efa15185e33d?s=128&d=identicon&r=PG", "display_name": "Corey Coogan", "link": "https://stackoverflow.com/users/198959/corey-coogan"}, "edited": false, "score": 0, "creation_date": 1423137705, "post_id": 28332725, "comment_id": 45031229, "body": "Thanks fuero.  I tried your suggestion, but still no luck.  The only thing I had to do was change my HOST as all other values were there.  I&#39;ve included my config file on the original post."}], "tags": [], "owner": {"reputation": 101, "user_id": 240301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d959dc652e3a60f6b285d1d2ba9c6931?s=128&d=identicon&r=PG", "display_name": "fuero", "link": "https://stackoverflow.com/users/240301/fuero"}, "is_accepted": false, "score": 0, "last_activity_date": 1423088753, "creation_date": 1423088753, "answer_id": 28332725, "question_id": 28332653, "link": "https://stackoverflow.com/questions/28332653/nginx-gunicorn-pyramid-get-actual-domain-name-from-headers/28332725#28332725", "title": "nginx + gunicorn + pyramid: Get actual domain name from headers", "body": "<p>Add this to your config:</p>\n\n<pre><code>proxy_set_header        X-Real-IP       $remote_addr;\nproxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_set_header        Host            $host;\n</code></pre>\n\n<p>This preserves the server name that was entered in the browser in the <code>Host:</code> header and adds the client's IP address in <code>X-Forwarded-For:</code>.</p>\n\n<p>Access them via <code>environ['HTTP_HOST']</code> and <code>environ['HTTP_X_FORWARDED_FOR']</code>. WSGI might be smart enough to respect <code>X-Forwarded-For:</code> though when setting <code>REMOTE_IP</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1479, "user_id": 198959, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7b81da0c9700b0cda076efa15185e33d?s=128&d=identicon&r=PG", "display_name": "Corey Coogan", "link": "https://stackoverflow.com/users/198959/corey-coogan"}, "is_accepted": true, "score": 0, "last_activity_date": 1424170187, "creation_date": 1424170187, "answer_id": 28560227, "question_id": 28332653, "link": "https://stackoverflow.com/questions/28332653/nginx-gunicorn-pyramid-get-actual-domain-name-from-headers/28560227#28560227", "title": "nginx + gunicorn + pyramid: Get actual domain name from headers", "body": "<p>I finally got this working and the fix was something stupid, as typical. While digging for answers I noticed my config didn't have the root or static directory location for which I'm using nginx in the first place. I asked the person who set this up and they pointed out that it was in another config file, which is consumed via the include.</p>\n\n<pre><code>include /etc/nginx/sites-enabled/*;\n</code></pre>\n\n<p>I went to that file and added the suggested headers and it works.</p>\n\n<pre><code>proxy_set_header        X-Real-IP       $remote_addr;\nproxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_set_header        Host            $host;\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1243296000, "open_beta_date": 1241049600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/apple-touch-icon@2.png", "twitter_account": "ServerFault", "favicon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/apple-touch-icon.png", "audience": "system and network administrators", "site_url": "https://serverfault.com", "api_site_parameter": "serverfault", "logo_url": "https://cdn.sstatic.net/Sites/serverfault/Img/logo.png", "name": "Server Fault", "site_type": "main_site"}, "on_date": 1423088525, "question_id": 665084}, "owner": {"reputation": 1479, "user_id": 198959, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7b81da0c9700b0cda076efa15185e33d?s=128&d=identicon&r=PG", "display_name": "Corey Coogan", "link": "https://stackoverflow.com/users/198959/corey-coogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 28560227, "answer_count": 3, "score": 1, "last_activity_date": 1424170187, "creation_date": 1423088160, "last_edit_date": 1423137626, "question_id": 28332653, "link": "https://stackoverflow.com/questions/28332653/nginx-gunicorn-pyramid-get-actual-domain-name-from-headers", "title": "nginx + gunicorn + pyramid: Get actual domain name from headers", "body": "<p>I just setup nginx + gunicorn to serve up a Pyramid web application.  My application relies on getting the subdomain, which is different for every client.  I didn't know this before, but when going through gunicorn, it seems that the only thing I can get from domain is what i have in my INI file used to configure Gunicorn - localhost.</p>\n\n<p>I'm wondering if there is a way to get the actual, full domain name where the request originated?  It can't be anything hard coded since the subdomains could be different for each request.  Does anyone have any ideas how to make this happen?</p>\n\n<p>UPDATE\nI made the change requested by Fuero, changing the value I had for</p>\n\n<pre><code>proxy_set_header        Host $http_host;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>proxy_set_header        Host $host;\n</code></pre>\n\n<p>Unfortunately, that didn't do it.  I'm still seeing 127.0.0.1:6500 in the environment as the remote address, host, etc.  The only thing that shows me the actual client request domain is the referrer.  I'm including my config file below hoping something stills stand out.</p>\n\n<pre><code>user www-data;\nworker_processes 4;\npid /var/run/nginx.pid;\n\nevents {\n    worker_connections 1024;\n    # multi_accept on;\n}\n\nhttp {\n\n    ##\n    # Basic Settings\n    ##\n\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    # server_tokens off;\n\n    # server_names_hash_bucket_size 64;\n    # server_name_in_redirect off;\n\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    ##\n    # Logging Settings\n    ##\n\n    access_log /var/log/nginx/access.log;\n    error_log /var/log/nginx/error.log;\n\n    ##\n    # Gzip Settings\n    ##\n\n#    sendfile on;\n    gzip  on;\n    gzip_http_version 1.1;\n    gzip_vary on;\n    gzip_comp_level 6;\n    gzip_proxied any;\n    gzip_types text/plain text/html text/css \n       application/json application/x-javascript \n       text/xml application/xml application/xml+rss \n       text/javascript application/javascript text/x-js;\n    gzip_buffers 16 8k;\n    gzip_disable \"MSIE [1-6]\\.(?!.*SV1)\";    \n    ##\n    # Virtual Host Configs\n    ##\n\n\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n    upstream myapp-site {\n        server 127.0.0.1:6500;\n    }\n\n    server {\n\n        access_log  /var/www/tmsenv/logs/access.log;\n\n        location / {\n            proxy_set_header        Host $host;\n            proxy_set_header        X-Real-IP $remote_addr;\n            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header        X-Forwarded-Proto $scheme;\n\n            client_max_body_size    10m;\n            client_body_buffer_size 128k;\n            proxy_connect_timeout   60s;\n            proxy_send_timeout      90s;\n            proxy_read_timeout      90s;\n            proxy_buffering         off;\n            proxy_temp_file_write_size 64k;\n            proxy_pass http://myapp-site;\n            proxy_redirect          off;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "windows", "security", "python-2.7", "openssl"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1423099027, "post_id": 28332448, "comment_id": 45015733, "body": "Something else that affects this... Server honor client choices by picking the first client cipher they (the server) intersects with. You can force the server to make the selection with <code>SSL_OP_CIPHER_SERVER_PREFERENCE</code>. In this case, the server will prefer its list of ciphers, and will pick the highest one that intersects with something in a client list."}], "answers": [{"comments": [{"owner": {"reputation": 8605, "user_id": 445073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e4e6dd6aa340644dfdc1be7bdfb42807?s=128&d=identicon&r=PG", "display_name": "Day", "link": "https://stackoverflow.com/users/445073/day"}, "edited": false, "score": 0, "creation_date": 1423618339, "post_id": 28442812, "comment_id": 45219622, "body": "Ah thank you. That was useful, and I may be able to build on this to get an answer. But <code>SSLContext</code> is new in python 2.7.9, so I&#39;m not going to be able to use this approach to figure out what ciphers were available in the python 2.7.8 build, so I&#39;m still not going to know what changed between those two builds :("}, {"owner": {"reputation": 8605, "user_id": 445073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e4e6dd6aa340644dfdc1be7bdfb42807?s=128&d=identicon&r=PG", "display_name": "Day", "link": "https://stackoverflow.com/users/445073/day"}, "edited": false, "score": 0, "creation_date": 1423652411, "post_id": 28442812, "comment_id": 45232416, "body": "Ah... and <code>SSLSocket.shared_ciphers</code> itself wasn&#39;t added until python 3.5 - a version so recent that it has not been released yet. In fact, <a href=\"https://mail.python.org/pipermail/python-checkins/2015-January/133865.html\" rel=\"nofollow noreferrer\">the patch to add this</a> only landed last month :("}, {"owner": {"reputation": 26078, "user_id": 145400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e40548053ab6deeef715a1f7fd0aafef?s=128&d=identicon&r=PG", "display_name": "Dr. Jan-Philip Gehrcke", "link": "https://stackoverflow.com/users/145400/dr-jan-philip-gehrcke"}, "reply_to_user": {"reputation": 8605, "user_id": 445073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e4e6dd6aa340644dfdc1be7bdfb42807?s=128&d=identicon&r=PG", "display_name": "Day", "link": "https://stackoverflow.com/users/445073/day"}, "edited": false, "score": 0, "creation_date": 1423657125, "post_id": 28442812, "comment_id": 45235277, "body": "I was afraid so, the whole SSL architecture in Python experienced a severe re-work in Python 2.7.9 and 3.4, leading to many further change requests from the community. Maybe you can use <code>ctypes</code> and access the static OpenSSL build shipped with Python for Windows?"}], "tags": [], "owner": {"reputation": 26078, "user_id": 145400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e40548053ab6deeef715a1f7fd0aafef?s=128&d=identicon&r=PG", "display_name": "Dr. Jan-Philip Gehrcke", "link": "https://stackoverflow.com/users/145400/dr-jan-philip-gehrcke"}, "is_accepted": false, "score": 7, "last_activity_date": 1423605984, "creation_date": 1423605984, "answer_id": 28442812, "question_id": 28332448, "link": "https://stackoverflow.com/questions/28332448/how-to-list-all-openssl-ciphers-available-in-statically-linked-python-releases/28442812#28442812", "title": "How to list all openssl ciphers available in statically linked python releases?", "body": "<p>You might want to have a look into <code>openssl cipher</code>'s source code at <a href=\"https://github.com/openssl/openssl/blob/master/apps/ciphers.c\" rel=\"noreferrer\">https://github.com/openssl/openssl/blob/master/apps/ciphers.c</a></p>\n\n<p>The crucial steps seem to be:</p>\n\n<ol>\n<li><code>meth = SSLv23_server_method();</code></li>\n<li><code>ctx = SSL_CTX_new(meth);</code></li>\n<li><code>SSL_CTX_set_cipher_list(ctx, ciphers)</code>, whereas <code>ciphers</code> is your string</li>\n<li><code>ssl = SSL_new(ctx);</code></li>\n<li><code>sk = SSL_get1_supported_ciphers(ssl);</code></li>\n<li><code>for (i = 0; i &lt; sk_SSL_CIPHER_num(sk); i++) {\n     print SSL_CIPHER_get_name(sk_SSL_CIPHER_value(sk, i));\n }</code></li>\n</ol>\n\n<p>The <code>SSL_CTX_set_cipher_list</code> function is called in Python 3.4 in _ssl's <code>set_ciphers</code> method for contexts. You can achieve the same using:</p>\n\n<pre><code>import socket\nfrom ssl import SSLSocket\nsslsock = SSLSocket(socket.socket(socket.AF_INET, socket.SOCK_STREAM))\nsslsock.context.set_ciphers('DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2')\n</code></pre>\n\n<p>The next step would be calling <code>SSL_get1_supported_ciphers()</code> which, unfortunately, is not used in Python's <a href=\"https://github.com/python/cpython/blob/master/Modules/_ssl.c\" rel=\"noreferrer\"><code>_ssl.c</code></a>. The closest you can get is the <code>shared_ciphers()</code> method of <code>SSLSocket</code> instances. The (current) implementation is </p>\n\n<pre><code>static PyObject *PySSL_shared_ciphers(PySSLSocket *self)\n{\n    [...]\n    ciphers = sess-&gt;ciphers;\n    res = PyList_New(sk_SSL_CIPHER_num(ciphers));\n    for (i = 0; i &lt; sk_SSL_CIPHER_num(ciphers); i++) {\n        PyObject *tup = cipher_to_tuple(sk_SSL_CIPHER_value(ciphers, i));\n        [...]\n        PyList_SET_ITEM(res, i, tup);\n    }\n    return res;\n}\n</code></pre>\n\n<p>That is, this loop is very similar as in the <code>ciphers.c</code> implementation above, and returns a Python list of ciphers, in the same order as the loop in <code>ciphers.c</code> would.</p>\n\n<p>Continuing with the <code>sslsock = SSLSocket(...)</code> example from above, you cannot call <code>sslsock.shared_ciphers()</code> before the socket is connected. Otherwise, Python's _ssl module does not create a low-level OpenSSL SSL object, which is needed to read the ciphers. That is different from the implementation in <code>ciphers.c</code>, which creates a low level SSL object without requiring a connection.</p>\n\n<p>That is how far I got, I hope that helps, and maybe you can figure out what you need based on these findings.</p>\n"}, {"comments": [{"owner": {"reputation": 26078, "user_id": 145400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e40548053ab6deeef715a1f7fd0aafef?s=128&d=identicon&r=PG", "display_name": "Dr. Jan-Philip Gehrcke", "link": "https://stackoverflow.com/users/145400/dr-jan-philip-gehrcke"}, "edited": false, "score": 0, "creation_date": 1423776371, "post_id": 28476509, "comment_id": 45297873, "body": "Interesting approach! As of the level of complexity involved, you should make further tests to support the statement <i>&quot;<b>Equivalent</b> of &quot;openssl ciphers -v&quot; for python&#39;s built-in ssl&quot;</i>. That would be great."}, {"owner": {"reputation": 8605, "user_id": 445073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e4e6dd6aa340644dfdc1be7bdfb42807?s=128&d=identicon&r=PG", "display_name": "Day", "link": "https://stackoverflow.com/users/445073/day"}, "reply_to_user": {"reputation": 26078, "user_id": 145400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e40548053ab6deeef715a1f7fd0aafef?s=128&d=identicon&r=PG", "display_name": "Dr. Jan-Philip Gehrcke", "link": "https://stackoverflow.com/users/145400/dr-jan-philip-gehrcke"}, "edited": false, "score": 0, "creation_date": 1424043657, "post_id": 28476509, "comment_id": 45380024, "body": "Good point. Unfortunately I&#39;ve tested this on linux where python <b>is</b> using the same lib as <code>openssl ciphers -v</code> and I get far fewer ciphers returned by my python than by the openssl command line. So looks like what I say is misleading at best. I&#39;ll perhaps have to change to <i>&quot;An <b>attempt</b> to produce similar output as &quot;openssl ciphers -v&quot; for python&#39;s built-in ssl&quot;</i>"}], "tags": [], "owner": {"reputation": 8605, "user_id": 445073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e4e6dd6aa340644dfdc1be7bdfb42807?s=128&d=identicon&r=PG", "display_name": "Day", "link": "https://stackoverflow.com/users/445073/day"}, "is_accepted": false, "score": 4, "last_activity_date": 1467736593, "last_edit_date": 1495540400, "creation_date": 1423741137, "answer_id": 28476509, "question_id": 28332448, "link": "https://stackoverflow.com/questions/28332448/how-to-list-all-openssl-ciphers-available-in-statically-linked-python-releases/28476509#28476509", "title": "How to list all openssl ciphers available in statically linked python releases?", "body": "<p><a href=\"https://stackoverflow.com/a/28442812/445073\">Jan-Philip Gehrcke's answer</a> requires an as-yet-unreleased version of python to be useful (see the comments), that make it not practical for answering the question about older versions of python. But this paragraph inspired me:</p>\n\n<blockquote>\n  <p>...you cannot call sslsock.shared_ciphers() before the socket is connected. Otherwise, Python's _ssl module does not create a low-level OpenSSL SSL object, which is needed to read the ciphers. </p>\n</blockquote>\n\n<p>This got me thinking about a possible solution. All in the same python program:</p>\n\n<ul>\n<li>Create a server socket that accepts any cipher (<code>ciphers='ALL:aNULL:eNULL'</code>).</li>\n<li>Connect to the server socket with a client socket configured with the cipher list we want to check (say <code>'DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2'</code> if we want to test the default from python 2.7.8)</li>\n<li>Once the connection is established, examine the cipher that actually got chosen by the client and print it e.g. <code>'AES256-GCM-SHA384'</code>. The client will choose the highest priority cipher from its configured cipher list that matches one supplied by the server. The server accepts any cipher and is running in the same python program with the same OpenSSL lib so the server's list is guaranteed to be a superset of the client's list. So the cipher used must be the highest priority one from the expanded list supplied to the client socket. Hooray.</li>\n<li>Now repeat, connecting to the server socket again <em>but</em> this time exclude the cipher that was chosen in the previous round, by appending the negation of it to the client socket's cipher list e.g. <code>'DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2:!AES256-GCM-SHA384'</code>)</li>\n<li>Repeat until the SSL handshake fails, because we've run out of ciphers.</li>\n</ul>\n\n<p>Here is the code (also available as <a href=\"https://gist.github.com/daybarr/987dddde385ec5e04af3\" rel=\"nofollow noreferrer\">a github gist</a>):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\"\"\"An attempt to produce similar output to \"openssl ciphers -v\", but for\npython's built-in ssl.\n\nTo answer https://stackoverflow.com/q/28332448/445073\n\"\"\"\nfrom __future__ import print_function\n\nimport argparse\nimport logging\nimport multiprocessing\nimport os\nimport socket\nimport ssl\nimport sys\n\ndef server(log_level, queue):\n    logging.basicConfig(level=log_level)\n    logger = logging.getLogger(\"server\")\n\n    logger.debug(\"Creating bind socket\")\n    bind_sock = socket.socket()\n    bind_sock.bind(('127.0.0.1', 0))\n    bind_sock.listen(5)\n\n    bind_addr = bind_sock.getsockname()\n    logger.debug(\"Listening on %r\", bind_addr)\n    queue.put(bind_addr)\n\n    while True:\n        logger.debug(\"Waiting for connection\")\n        conn_sock, fromaddr = bind_sock.accept()\n        conn_sock = ssl.wrap_socket(conn_sock,\n                                    ssl_version=ssl.PROTOCOL_SSLv23,\n                                    server_side=True,\n                                    certfile=\"server.crt\",\n                                    keyfile=\"server.key\",\n                                    ciphers=\"ALL:aNULL:eNULL\")\n\n        data = conn_sock.read()\n        logger.debug(\"Read %r\", data)\n        conn_sock.close()\n    logger.debug(\"Done\")\n\ndef parse_args(argv):\n    parser = argparse.ArgumentParser(\n        formatter_class=argparse.ArgumentDefaultsHelpFormatter)\n    parser.add_argument(\"--verbose\", \"-v\", action=\"store_true\",\n                        help=\"Turn on debug logging\")\n    parser.add_argument(\"--ciphers\", \"-c\",\n                        default=ssl._DEFAULT_CIPHERS,\n                        help=\"Cipher list to test. Defaults to this python's \"\n                        \"default client list\")\n    args = parser.parse_args(argv[1:])\n    return args\n\nif __name__ == \"__main__\":\n    args = parse_args(sys.argv)\n\n    log_level = logging.DEBUG if args.verbose else logging.INFO\n\n    logging.basicConfig(level=log_level)\n    logger = logging.getLogger(\"client\")\n\n    if not os.path.isfile('server.crt') or not os.path.isfile('server.key'):\n        print(\"Must generate server.crt and server.key before running\")\n        print(\"Try:\")\n        print(\"openssl req -x509 -newkey rsa:2048 -keyout server.key -out server.crt -nodes -days 365  -subj '/CN=127.0.0.1'\")\n        sys.exit(1)\n\n    queue = multiprocessing.Queue()\n    server_proc = multiprocessing.Process(target=server, args=(log_level, queue))\n    server_proc.start()\n    logger.debug(\"Waiting for server address\")\n    server_addr = queue.get()\n\n    chosen_ciphers = []\n    try:\n        cipher_list = args.ciphers\n        while True:\n            client_sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n            client_sock = ssl.wrap_socket(client_sock,\n                                          ssl_version=ssl.PROTOCOL_SSLv23,\n                                          ciphers=cipher_list)\n            logger.debug(\"Connecting to %r\", server_addr)\n            client_sock.connect(server_addr)\n            logger.debug(\"Connected\")\n\n            chosen_cipher = client_sock.cipher()\n            chosen_ciphers.append(chosen_cipher)\n\n            client_sock.write(\"ping\")\n            client_sock.close()\n\n            # Exclude the first choice cipher from the list, to see what we get\n            # next time.\n            cipher_list += ':!' + chosen_cipher[0]\n    except ssl.SSLError as err:\n        if 'handshake failure' in str(err):\n            logger.debug(\"Handshake failed - no more ciphers to try\")\n        else:\n            logger.exception(\"Something bad happened\")\n    except Exception:\n        logger.exception(\"Something bad happened\")\n    else:\n        server_proc.join()\n    finally:\n        server_proc.terminate()\n\n    print(\"Python: {}\".format(sys.version))\n    print(\"OpenSSL: {}\".format(ssl.OPENSSL_VERSION))\n    print(\"Expanding cipher list: {}\".format(args.ciphers))\n    print(\"{} ciphers found:\".format(len(chosen_ciphers)))\n    print(\"\\n\".join(repr(cipher) for cipher in chosen_ciphers))\n</code></pre>\n\n<p>Note how it defaults to testing the default cipher list built-in to python:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>day@laptop ~/test\n$ python --version\nPython 2.7.8\n\nday@laptop ~/test\n$ python ssltest.py -h\nusage: ssltest.py [-h] [--verbose] [--ciphers CIPHERS]\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --verbose, -v         Turn on debug logging (default: False)\n  --ciphers CIPHERS, -c CIPHERS\n                        Cipher list to test. Defaults to this python's default\n                        client list (default:\n                        DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2)\n</code></pre>\n\n<p>so we can easily see what the default client cipher list expands to, and how this changed from python 2.7.8 to 2.7.9:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>day@laptop ~/test\n$ ~/dists/python-2.7.8-with-pywin32-218-x86/python ssltest.py\nPython: 2.7.8 (default, Jun 30 2014, 16:03:49) [MSC v.1500 32 bit (Intel)]\nOpenSSL: OpenSSL 1.0.1h 5 Jun 2014\nExpanding cipher list: DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2\n12 ciphers found:\n('AES256-GCM-SHA384', 'TLSv1/SSLv3', 256)\n('AES256-SHA256', 'TLSv1/SSLv3', 256)\n('AES256-SHA', 'TLSv1/SSLv3', 256)\n('CAMELLIA256-SHA', 'TLSv1/SSLv3', 256)\n('DES-CBC3-SHA', 'TLSv1/SSLv3', 168)\n('AES128-GCM-SHA256', 'TLSv1/SSLv3', 128)\n('AES128-SHA256', 'TLSv1/SSLv3', 128)\n('AES128-SHA', 'TLSv1/SSLv3', 128)\n('SEED-SHA', 'TLSv1/SSLv3', 128)\n('CAMELLIA128-SHA', 'TLSv1/SSLv3', 128)\n('RC4-SHA', 'TLSv1/SSLv3', 128)\n('RC4-MD5', 'TLSv1/SSLv3', 128)\n\nday@laptop ~/test\n$ ~/dists/python-2.7.9-with-pywin32-219-x86/python ssltest.py\nPython: 2.7.9 (default, Dec 10 2014, 12:24:55) [MSC v.1500 32 bit (Intel)]\nOpenSSL: OpenSSL 1.0.1j 15 Oct 2014\nExpanding cipher list: ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+HIGH:DH+HIGH:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+HIGH:RSA+3DES:ECDH+RC4:DH+RC4:RSA+RC4:!aNULL:!eNULL:!MD5\n18 ciphers found:\n('ECDHE-RSA-AES256-GCM-SHA384', 'TLSv1/SSLv3', 256)\n('ECDHE-RSA-AES128-GCM-SHA256', 'TLSv1/SSLv3', 128)\n('ECDHE-RSA-AES256-SHA384', 'TLSv1/SSLv3', 256)\n('ECDHE-RSA-AES256-SHA', 'TLSv1/SSLv3', 256)\n('ECDHE-RSA-AES128-SHA256', 'TLSv1/SSLv3', 128)\n('ECDHE-RSA-AES128-SHA', 'TLSv1/SSLv3', 128)\n('ECDHE-RSA-DES-CBC3-SHA', 'TLSv1/SSLv3', 112)\n('AES256-GCM-SHA384', 'TLSv1/SSLv3', 256)\n('AES128-GCM-SHA256', 'TLSv1/SSLv3', 128)\n('AES256-SHA256', 'TLSv1/SSLv3', 256)\n('AES256-SHA', 'TLSv1/SSLv3', 256)\n('AES128-SHA256', 'TLSv1/SSLv3', 128)\n('AES128-SHA', 'TLSv1/SSLv3', 128)\n('CAMELLIA256-SHA', 'TLSv1/SSLv3', 256)\n('CAMELLIA128-SHA', 'TLSv1/SSLv3', 128)\n('DES-CBC3-SHA', 'TLSv1/SSLv3', 112)\n('ECDHE-RSA-RC4-SHA', 'TLSv1/SSLv3', 128)\n('RC4-SHA', 'TLSv1/SSLv3', 128)\n</code></pre>\n\n<p>And I think this answers my question. Unless anyone can see a problem with this approach?</p>\n"}], "owner": {"reputation": 8605, "user_id": 445073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e4e6dd6aa340644dfdc1be7bdfb42807?s=128&d=identicon&r=PG", "display_name": "Day", "link": "https://stackoverflow.com/users/445073/day"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9792, "favorite_count": 2, "answer_count": 2, "score": 13, "last_activity_date": 1467736593, "creation_date": 1423087787, "last_edit_date": 1423595569, "question_id": 28332448, "link": "https://stackoverflow.com/questions/28332448/how-to-list-all-openssl-ciphers-available-in-statically-linked-python-releases", "title": "How to list all openssl ciphers available in statically linked python releases?", "body": "<p>In the python 2.7.8 to 2.7.9 upgrade, the ssl module changed from using</p>\n\n<pre><code>_DEFAULT_CIPHERS = 'DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2'\n</code></pre>\n\n<p>to</p>\n\n<pre><code>_DEFAULT_CIPHERS = (\n    'ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+HIGH:'\n    'DH+HIGH:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+HIGH:RSA+3DES:ECDH+RC4:'\n    'DH+RC4:RSA+RC4:!aNULL:!eNULL:!MD5'\n)\n</code></pre>\n\n<p><strong>I'd like to know how this affects the actual \"ordered SSL cipher preference list\" that gets used when establishing SSL/TLS connections with my python installs on Windows.</strong></p>\n\n<p>For example, to figure out what \"ordered SSL cipher preference list\" a cipher list expands to, I'd normally use the <code>openssl ciphers</code> command line (see <a href=\"https://www.openssl.org/docs/apps/ciphers.html\">man page</a>) e.g with openssl v1.0.1k I can see what that default python 2.7.8 cipher list expands to:</p>\n\n<pre><code>$ openssl ciphers -v 'DEFAULT:!aNULL:!eNULL:!LOW:!EXPORT:!SSLv2'\nECDHE-RSA-AES256-GCM-SHA384 TLSv1.2 Kx=ECDH     Au=RSA  Enc=AESGCM(256) Mac=AEAD\nECDHE-ECDSA-AES256-GCM-SHA384 TLSv1.2 Kx=ECDH     Au=ECDSA Enc=AESGCM(256) Mac=AEAD\nECDHE-RSA-AES256-SHA384 TLSv1.2 Kx=ECDH     Au=RSA  Enc=AES(256)  Mac=SHA384\nECDHE-ECDSA-AES256-SHA384 TLSv1.2 Kx=ECDH     Au=ECDSA Enc=AES(256)  Mac=SHA384\nECDHE-RSA-AES256-SHA    SSLv3 Kx=ECDH     Au=RSA  Enc=AES(256)  Mac=SHA1\nECDHE-ECDSA-AES256-SHA  SSLv3 Kx=ECDH     Au=ECDSA Enc=AES(256)  Mac=SHA1\nSRP-DSS-AES-256-CBC-SHA SSLv3 Kx=SRP      Au=DSS  Enc=AES(256)  Mac=SHA1\nSRP-RSA-AES-256-CBC-SHA SSLv3 Kx=SRP      Au=RSA  Enc=AES(256)  Mac=SHA1\n...\nsnip!\n</code></pre>\n\n<p>That works great when on Linux where python is dynamically loading the same OpenSSL library that <code>openssl ciphers</code> uses:</p>\n\n<pre><code>$ ldd /usr/lib/python2.7/lib-dynload/_ssl.x86_64-linux-gnu.so | grep libssl\n        libssl.so.1.0.0 =&gt; /lib/x86_64-linux-gnu/libssl.so.1.0.0 (0x00007ff75d6bf000)\n$ ldd /usr/bin/openssl | grep libssl\n        libssl.so.1.0.0 =&gt; /lib/x86_64-linux-gnu/libssl.so.1.0.0 (0x00007fa48f0fe000)\n</code></pre>\n\n<p><strong>However</strong>, on Windows the Python build appears to statically link the OpenSSL library. This means that the <code>openssl ciphers</code> command cannot help me, because it uses a different version of the library, which may have support for different ciphers than the library built into python.</p>\n\n<p>I can find out what version of OpenSSL was used to build each of the two python releases easily enough:</p>\n\n<pre><code>$ python-2.7.8/python -c 'import ssl; print ssl.OPENSSL_VERSION'\nOpenSSL 1.0.1h 5 Jun 2014\n\n$ python-2.7.9/python -c 'import ssl; print ssl.OPENSSL_VERSION'\nOpenSSL 1.0.1j 15 Oct 2014\n</code></pre>\n\n<p>But even if I could find and download a build of the <code>openssl</code> command line for both the 1.0.1h and 1.0.1j releases, I cannot be sure that they were compiled with the same options as the lib built into python, and from the <a href=\"https://www.openssl.org/docs/apps/ciphers.html\">man page</a> we know that</p>\n\n<blockquote>\n  <p>Some compiled versions of OpenSSL may not include all the ciphers listed here because some ciphers were excluded at compile time.</p>\n</blockquote>\n\n<p><strong>So, is there a way to get python's ssl module to give me output similar to that from the <code>openssl ciphers -v</code> command?</strong></p>\n"}, {"tags": ["python", "libphonenumber"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 3, "creation_date": 1423087750, "post_id": 28332410, "comment_id": 45011920, "body": "How is it supposed to know it is a USA phone number if you don&#39;t specify a region and don&#39;t use an international dialling code?"}, {"owner": {"reputation": 19923, "user_id": 66519, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/83ea6683f15edb2087f6a3ad4f42605b?s=128&d=identicon&r=PG", "display_name": "ojblass", "link": "https://stackoverflow.com/users/66519/ojblass"}, "edited": false, "score": 0, "creation_date": 1423088078, "post_id": 28332410, "comment_id": 45012074, "body": "I think it is supposed to be able to guess that 10 digits by themselves constitute a phone number."}, {"owner": {"reputation": 19923, "user_id": 66519, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/83ea6683f15edb2087f6a3ad4f42605b?s=128&d=identicon&r=PG", "display_name": "ojblass", "link": "https://stackoverflow.com/users/66519/ojblass"}, "edited": false, "score": 0, "creation_date": 1423088124, "post_id": 28332410, "comment_id": 45012090, "body": "What does &quot;parsed = phonenumbers.parse(&quot;518-762-1769&quot;)&quot; produce?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1423088255, "post_id": 28332410, "comment_id": 45012158, "body": "<code>+51</code> is a perfectly legitimate international dialling code (it&#39;s Peru&#39;s); how is it supposed to know that isn&#39;t what you mean?"}, {"owner": {"reputation": 8742, "user_id": 3393459, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7a319b01208db420f5f8c6a7c3a24a3c?s=128&d=identicon&r=PG&f=1", "display_name": "exp1orer", "link": "https://stackoverflow.com/users/3393459/exp1orer"}, "reply_to_user": {"reputation": 19923, "user_id": 66519, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/83ea6683f15edb2087f6a3ad4f42605b?s=128&d=identicon&r=PG", "display_name": "ojblass", "link": "https://stackoverflow.com/users/66519/ojblass"}, "edited": false, "score": 0, "creation_date": 1423088945, "post_id": 28332410, "comment_id": 45012457, "body": "@ojblass <code>NumberParseException: (0) Missing or invalid default region.</code>"}], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 4526164, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hqSVytMbT_w/AAAAAAAAAAI/AAAAAAAAAEk/OJD74ibxwS4/photo.jpg?sz=128", "display_name": "Ricardo Gemignani", "link": "https://stackoverflow.com/users/4526164/ricardo-gemignani"}, "is_accepted": false, "score": 5, "last_activity_date": 1423088777, "creation_date": 1423088777, "answer_id": 28332734, "question_id": 28332410, "link": "https://stackoverflow.com/questions/28332410/why-doesnt-python-phonenumbers-library-work-in-this-case/28332734#28332734", "title": "Why doesn&#39;t python phonenumbers library work in this case?", "body": "<p>It would a very easy number if phonenumbers was an US only library. You are missing the \"+1\" a.k.a. country code. If you would like to assume that numbers that phonenumbers can't parse are US numbers you could do something like:</p>\n\n<pre><code>try:\n    parsed = phonenumbers.parse(number)\nexcept phonenumbers.NumberParseException as npe:\n    parsed = phonenumbers.parse('+1{}'.format(number))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 1211023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3041a99ff2b84bc3dc10805020d35516?s=128&d=identicon&r=PG", "display_name": "Ludovic Gasc - GMLudo", "link": "https://stackoverflow.com/users/1211023/ludovic-gasc-gmludo"}, "is_accepted": false, "score": 6, "last_activity_date": 1447701917, "creation_date": 1447701917, "answer_id": 33743027, "question_id": 28332410, "link": "https://stackoverflow.com/questions/28332410/why-doesnt-python-phonenumbers-library-work-in-this-case/33743027#33743027", "title": "Why doesn&#39;t python phonenumbers library work in this case?", "body": "<p>You should simply use:</p>\n\n<pre><code>parsed = phonenumbers.parse(number, 'US')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 934, "user_id": 3581507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9ef2a83db1bb0d0d7c0122edcab3a50a?s=128&d=identicon&r=PG&f=1", "display_name": "shashankS", "link": "https://stackoverflow.com/users/3581507/shashanks"}, "edited": false, "score": 0, "creation_date": 1485230834, "post_id": 35012898, "comment_id": 70827620, "body": "I believe, if we put +1, +91, +22 codes before numbers that API may not responsed, there are cases where we have numbers like : +1 - 2345 - 2333, API will not work for these cases I believe."}, {"owner": {"reputation": 69, "user_id": 3520064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OM7BJ.jpg?s=128&g=1", "display_name": "Azhar Nawaz", "link": "https://stackoverflow.com/users/3520064/azhar-nawaz"}, "reply_to_user": {"reputation": 934, "user_id": 3581507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9ef2a83db1bb0d0d7c0122edcab3a50a?s=128&d=identicon&r=PG&f=1", "display_name": "shashankS", "link": "https://stackoverflow.com/users/3581507/shashanks"}, "edited": false, "score": 1, "creation_date": 1485433763, "post_id": 35012898, "comment_id": 70928463, "body": "It works in that case as well because the Wrapper API ignores all characters."}, {"owner": {"reputation": 934, "user_id": 3581507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9ef2a83db1bb0d0d7c0122edcab3a50a?s=128&d=identicon&r=PG&f=1", "display_name": "shashankS", "link": "https://stackoverflow.com/users/3581507/shashanks"}, "edited": false, "score": 0, "creation_date": 1485510823, "post_id": 35012898, "comment_id": 70964270, "body": "helpful , I will try and let the results publish."}, {"owner": {"reputation": 69, "user_id": 3520064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OM7BJ.jpg?s=128&g=1", "display_name": "Azhar Nawaz", "link": "https://stackoverflow.com/users/3520064/azhar-nawaz"}, "reply_to_user": {"reputation": 934, "user_id": 3581507, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9ef2a83db1bb0d0d7c0122edcab3a50a?s=128&d=identicon&r=PG&f=1", "display_name": "shashankS", "link": "https://stackoverflow.com/users/3581507/shashanks"}, "edited": false, "score": 0, "creation_date": 1485524465, "post_id": 35012898, "comment_id": 70972570, "body": "Please note that I am taking about this wrapper <a href=\"http://blog.ones-app.com/ones-phone-number-api/\" rel=\"nofollow noreferrer\">blog.ones-app.com/ones-phone-number-api</a>"}, {"owner": {"reputation": 69, "user_id": 3520064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OM7BJ.jpg?s=128&g=1", "display_name": "Azhar Nawaz", "link": "https://stackoverflow.com/users/3520064/azhar-nawaz"}, "edited": false, "score": 0, "creation_date": 1518043369, "post_id": 35012898, "comment_id": 84347544, "body": "You can download this wrapper from Github (<a href=\"https://github.com/azharkhn/libphonenumber-api\" rel=\"nofollow noreferrer\">github.com/azharkhn/libphonenumber-api</a>) and run on own server or host"}], "tags": [], "owner": {"reputation": 69, "user_id": 3520064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OM7BJ.jpg?s=128&g=1", "display_name": "Azhar Nawaz", "link": "https://stackoverflow.com/users/3520064/azhar-nawaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1453808042, "creation_date": 1453808042, "answer_id": 35012898, "question_id": 28332410, "link": "https://stackoverflow.com/questions/28332410/why-doesnt-python-phonenumbers-library-work-in-this-case/35012898#35012898", "title": "Why doesn&#39;t python phonenumbers library work in this case?", "body": "<p>You have to write Country Code with Phone Number while searching for Phone Number details.</p>\n\n<p>Moreover, Here is an API (a wrapper of libphonenumber) for Phone Numbers:</p>\n\n<p><a href=\"http://blog.ones-app.com/ones-phone-number-api/\" rel=\"nofollow\">http://blog.ones-app.com/ones-phone-number-api/</a> </p>\n"}], "owner": {"reputation": 8742, "user_id": 3393459, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7a319b01208db420f5f8c6a7c3a24a3c?s=128&d=identicon&r=PG&f=1", "display_name": "exp1orer", "link": "https://stackoverflow.com/users/3393459/exp1orer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6614, "favorite_count": 2, "answer_count": 3, "score": 5, "last_activity_date": 1453808042, "creation_date": 1423087618, "question_id": 28332410, "link": "https://stackoverflow.com/questions/28332410/why-doesnt-python-phonenumbers-library-work-in-this-case", "title": "Why doesn&#39;t python phonenumbers library work in this case?", "body": "<p>It seems like '5187621769' should be a very easy number for the phonenumbers library to parse. It's 10 digits with a US area code. But...no luck.</p>\n\n<p><strong>Setup:</strong></p>\n\n<pre><code>import phonenumbers\nnumber = '5187621769'\n</code></pre>\n\n<p><strong>Method 1:</strong></p>\n\n<pre><code>parsed = phonenumbers.parse(number)\n</code></pre>\n\n<p>This throws an error.</p>\n\n<p><strong>Method 2:</strong></p>\n\n<pre><code>parsed = phonenumbers.parse(\"+\" + number)\n</code></pre>\n\n<p>Gives country code = 51, which is not US.</p>\n\n<p>I know I can do:</p>\n\n<pre><code>parsed = phonenumbers.parse(number,region=\"US\")\n</code></pre>\n\n<p>But I don't always know the number will be US (this is just one case where I discovered I wasn't getting desired behavior). Is there an option or formatting trick I'm missing? Thanks!</p>\n"}, {"tags": ["python", "matlab", "postgresql", "bytea"], "comments": [{"owner": {"reputation": 2062, "user_id": 1772673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89b6a300aac526ffe07c53c049dde773?s=128&d=identicon&r=PG", "display_name": "Josh Kupershmidt", "link": "https://stackoverflow.com/users/1772673/josh-kupershmidt"}, "edited": false, "score": 1, "creation_date": 1423088764, "post_id": 28332406, "comment_id": 45012391, "body": "I think this sample would work fine without the encode( file_data, &#39;hex&#39; ) business -- just select file_data directly, and write it out as you are doing now."}], "answers": [{"tags": [], "owner": {"reputation": 87, "user_id": 392030, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b57d416f3ad536123e27532b2cc657b6?s=128&d=identicon&r=PG&f=1", "display_name": "Carthage", "link": "https://stackoverflow.com/users/392030/carthage"}, "is_accepted": true, "score": 0, "last_activity_date": 1423156408, "creation_date": 1423156408, "answer_id": 28350050, "question_id": 28332406, "link": "https://stackoverflow.com/questions/28332406/how-do-i-insert-retrieve-mat-matlab-files-from-postgres-database-in-python/28350050#28350050", "title": "How do I insert/retrieve .mat( matlab ) files from postgres database in python?", "body": "<p>Using Josh Kupershmidt's tip, I figured out what was wrong.</p>\n\n<p>By removing the encode and converting the retrieved buffer to a string, it seems to work now.</p>\n\n<pre><code>cur = conn.cursor()\n\ncur.execute( \"SELECT file_data, file_name FROM file_data_table\")\nresult = cur.fetchall()\n\nprint result[0][0]\n\nfor row in result:\n    print row[1]\n    full_file_path = os.path.join(folder_path, row[1])\n    f = open(full_file_path,'w')\n    f.write(str(row[0]))\n    f.close()\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 392030, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b57d416f3ad536123e27532b2cc657b6?s=128&d=identicon&r=PG&f=1", "display_name": "Carthage", "link": "https://stackoverflow.com/users/392030/carthage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 28350050, "answer_count": 1, "score": 0, "last_activity_date": 1423156448, "creation_date": 1423087614, "last_edit_date": 1423156448, "question_id": 28332406, "link": "https://stackoverflow.com/questions/28332406/how-do-i-insert-retrieve-mat-matlab-files-from-postgres-database-in-python", "title": "How do I insert/retrieve .mat( matlab ) files from postgres database in python?", "body": "<p>After looking around, I wrote this insertion/retrieval code to read in a .mat file, send it off to a bytea postgres database column, and then try and retrieve it and recreate the file.</p>\n\n<p>I use psycopg2 for database interaction.</p>\n\n<p>Insertion:</p>\n\n<pre><code>    full_file_path = os.path.join( folder_path, single_file )\n    f = open(full_file_path,'rb')\n    file_data = psycopg2.Binary( f.read() )\n\n    cur.execute( \"INSERT INTO file_data_table \"\n        \"( id, file_name, file_data, insertion_date) \"\n        \"VALUES ( DEFAULT, %s, %s, %s)\",\n        (single_file, file_data, timestamp))\n\n    f.close()\n    conn.commit()\n    print single_file + \" inserted\"\n</code></pre>\n\n<p>Trying to retrieve and save it to file( the file_name is \"something.mat\" )</p>\n\n<pre><code>cur = conn.cursor()\n\ncur.execute( \"SELECT encode( file_data, 'hex' ), file_name FROM file_data_table\")\nresult = cur.fetchall()\n\nprint result[0][0]\n\nfor row in result:\n    print row[1]\n    full_file_path = os.path.join(folder_path, row[1])\n    f = open(full_file_path,'w')\n    f.write(row[0])\n    f.close()\n</code></pre>\n\n<p>It retrieves data from the database and successfully saves it in a file, but the file doesn't open as a mat file, and the file size is much larger( roughly twice as big ) as the original file I tried to store in the database.</p>\n\n<p>I assume some data transformation is happening that I am not handling properly.</p>\n\n<p>Any assistance is greatly appreciated.</p>\n"}, {"tags": ["python", "inheritance", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 3731, "user_id": 2830986, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7205852a91e57eb794dba7f50272ac95?s=128&d=identicon&r=PG", "display_name": "NDevox", "link": "https://stackoverflow.com/users/2830986/ndevox"}, "edited": false, "score": 0, "creation_date": 1423088531, "post_id": 28332457, "comment_id": 45012289, "body": "Thanks, I&#39;ve never been 100% on the difference between <code>__init__ and </code>__new__<code>. I&#39;m assuming I can not bother with an </code>__init__` function and do everything I would have done in init in <code>__new__ </code>?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 3731, "user_id": 2830986, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7205852a91e57eb794dba7f50272ac95?s=128&d=identicon&r=PG", "display_name": "NDevox", "link": "https://stackoverflow.com/users/2830986/ndevox"}, "edited": false, "score": 1, "creation_date": 1423088700, "post_id": 28332457, "comment_id": 45012370, "body": "That&#39;s correct, there&#39;s no need for an <code>__init__</code> in this case - just assign attributes to <code>inst</code> (not sure if there&#39;s a conventional name for that...) instead of <code>self</code>. For more information, see e.g. <a href=\"http://stackoverflow.com/q/674304/3001761\">stackoverflow.com/q/674304/3001761</a>"}], "tags": [], "owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "is_accepted": true, "score": 1, "last_activity_date": 1423087824, "creation_date": 1423087824, "answer_id": 28332457, "question_id": 28332396, "link": "https://stackoverflow.com/questions/28332396/init-argument-mismatch-between-super-and-subclass/28332457#28332457", "title": "__init__ argument mismatch between super and subclass", "body": "<p>Yes, you need to implement <code>__new__</code>, and call it on the super-class; for example:</p>\n\n<pre><code>class sub_class(datetime.date):\n\n    def __new__(cls, year, month, day, lst):\n        inst = super(sub_class, cls).__new__(cls, year, month, day)\n        inst.lst = lst\n        return inst\n</code></pre>\n\n<p>In use:</p>\n\n<pre><code>&gt;&gt;&gt; s = sub_class(2013, 2, 3, [1, 2, 3])\n&gt;&gt;&gt; s\nsub_class(2013, 2, 3)  # note that the repr isn't correct \n&gt;&gt;&gt; s.lst\n[1, 2, 3]\n</code></pre>\n"}], "owner": {"reputation": 3731, "user_id": 2830986, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7205852a91e57eb794dba7f50272ac95?s=128&d=identicon&r=PG", "display_name": "NDevox", "link": "https://stackoverflow.com/users/2830986/ndevox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 28332457, "answer_count": 1, "score": 0, "last_activity_date": 1423087824, "creation_date": 1423087585, "question_id": 28332396, "link": "https://stackoverflow.com/questions/28332396/init-argument-mismatch-between-super-and-subclass", "title": "__init__ argument mismatch between super and subclass", "body": "<p>I'm trying to make a class inherit from <code>datetime.date</code>, call the superclasses <code>__init__</code> function, and then add a few variables on top which involves using a fourth <code>__init__</code> argument on top of year, month and day.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>class sub_class(datetime.date):    \n    def __init__(self, year, month, day, lst):  \n        super().__init__(year, month, day)\n            for x in lst:\n                # do stuff\n\ninst = sub_class(2014, 2, 4, [1,2,3,4])\n</code></pre>\n\n<p>This raises the below error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;pyshell#7&gt;\", line 1, in &lt;module&gt;\n    inst = sub_class(2014, 2, 4, [1,2,3,4])\nTypeError: function takes at most 3 arguments (4 given)\n</code></pre>\n\n<p>If I remove the last argument I get the below:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;pyshell#8&gt;\", line 1, in &lt;module&gt;\n    inst = sub_class(2014, 2, 4)\nTypeError: __init__() missing 1 required positional argument: 'lst'\n</code></pre>\n\n<p>I take it that this is due to a mismatch between <code>__new__</code> and <code>__init__</code>. But how do I solve it? Do I need to redefine <code>__new__</code>? In which case do I need to call the superclasses <code>__new__</code> constructor as well?</p>\n"}, {"tags": ["python", "pandas", "datetime", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 1432, "user_id": 4088415, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d699654ac42582b4569e2d24b183ac91?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelA", "link": "https://stackoverflow.com/users/4088415/michaela"}, "edited": false, "score": 0, "creation_date": 1423087558, "post_id": 28332288, "comment_id": 45011833, "body": "Thanks, that answer is so obvious, it hurts... . I lost sight of the forrest for the trees... ."}, {"owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "reply_to_user": {"reputation": 1432, "user_id": 4088415, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d699654ac42582b4569e2d24b183ac91?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelA", "link": "https://stackoverflow.com/users/4088415/michaela"}, "edited": false, "score": 0, "creation_date": 1423087731, "post_id": 28332288, "comment_id": 45011908, "body": "No problem - it&#39;s easy to overlook these things."}], "tags": [], "owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "is_accepted": true, "score": 1, "last_activity_date": 1423087465, "last_edit_date": 1423087465, "creation_date": 1423087158, "answer_id": 28332288, "question_id": 28332250, "link": "https://stackoverflow.com/questions/28332250/index-a-dataframe-using-two-conditions/28332288#28332288", "title": "Index a DataFrame using two conditions", "body": "<p>You need need to put brackets around the two arrays before you use the element-wise <code>&amp;</code>:</p>\n\n<pre><code>(test.index.hour &gt; 8) &amp; (test.index.hour &lt; 22)\n</code></pre>\n\n<p>The <code>&amp;</code> operator has <a href=\"https://docs.python.org/2/reference/expressions.html#operator-precedence\" rel=\"nofollow\">higher precedence</a> than the comparison operators in that expression, which leads to the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 1432, "user_id": 4088415, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d699654ac42582b4569e2d24b183ac91?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelA", "link": "https://stackoverflow.com/users/4088415/michaela"}, "edited": false, "score": 0, "creation_date": 1423088035, "post_id": 28332386, "comment_id": 45012055, "body": "well, that they changed the precedence in the query function tells me, I&#39;m not the only one struggling with this (rather simple) problem... . Gives my soul at leat a bit of peace :)"}], "tags": [], "owner": {"reputation": 388, "user_id": 2244155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e58e24d7eb319a8f1c6ce8411bb8b9c?s=128&d=identicon&r=PG", "display_name": "eff_it", "link": "https://stackoverflow.com/users/2244155/eff-it"}, "is_accepted": false, "score": 2, "last_activity_date": 1423087535, "creation_date": 1423087535, "answer_id": 28332386, "question_id": 28332250, "link": "https://stackoverflow.com/questions/28332250/index-a-dataframe-using-two-conditions/28332386#28332386", "title": "Index a DataFrame using two conditions", "body": "<p>There are 2 simple solutions :</p>\n\n<ul>\n<li>First: enclose your conditions into braces like \n<code>(test.index.hour &gt; 8) &amp; (test.index.hour&lt;22)</code>\ndue to operator &amp; precedence</li>\n<li>Second : use  <a href=\"http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.query.html\" rel=\"nofollow\">the query function</a></li>\n</ul>\n"}], "owner": {"reputation": 1432, "user_id": 4088415, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d699654ac42582b4569e2d24b183ac91?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelA", "link": "https://stackoverflow.com/users/4088415/michaela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 28332288, "answer_count": 2, "score": 0, "last_activity_date": 1505593626, "creation_date": 1423086980, "last_edit_date": 1505593626, "question_id": 28332250, "link": "https://stackoverflow.com/questions/28332250/index-a-dataframe-using-two-conditions", "title": "Index a DataFrame using two conditions", "body": "<p>I'm trying to get a subset of a DataFrame based on two conditions. </p>\n\n<p>Here my simplified example: </p>\n\n<pre><code>import pandas as pd\ntest = pd.DataFrame(np.ones(48),\n                    index=pd.date_range('2015-01-01',\n                    periods=48, \n                    freq='1800S'))\n</code></pre>\n\n<p>I'd now like to get all values that are in the timerange t > 08:00 and t &lt; 22:00, thus I tried:</p>\n\n<pre><code>result = test[test.index.hour&gt;8 &amp; test.index.hour&lt;22]\n</code></pre>\n\n<p>I then get the <code>ValueError that the truth value of an array with more than one element is ambiguous, use a.any() or a.all()</code> - and here I'm out of luck...</p>\n"}, {"tags": ["python", "numpy", "ode", "differential-equations"], "comments": [{"owner": {"reputation": 25612, "user_id": 423105, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ced7f76fd1b5573ce3bdce2f3392df04?s=128&d=identicon&r=PG", "display_name": "LarsH", "link": "https://stackoverflow.com/users/423105/larsh"}, "edited": false, "score": 0, "creation_date": 1423086915, "post_id": 28332217, "comment_id": 45011503, "body": "Can you describe how the plot is incorrect - what you expected, vs. what you actually saw?"}, {"owner": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "reply_to_user": {"reputation": 25612, "user_id": 423105, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ced7f76fd1b5573ce3bdce2f3392df04?s=128&d=identicon&r=PG", "display_name": "LarsH", "link": "https://stackoverflow.com/users/423105/larsh"}, "edited": false, "score": 0, "creation_date": 1423087131, "post_id": 28332217, "comment_id": 45011614, "body": "I want a plot where N2 is on the y-axis and N1 are on the x-axis. The lines N1=0.3 and N2=1/0.7 are supposed to intersect. In the plot my code creates, the lines don&#39;t intersect and it&#39;s not clear which axis is which."}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1423092048, "post_id": 28332217, "comment_id": 45013800, "body": "The way you&#39;re describing it sounds rather strange: these equations are coupled, meaning that at each point in time, you have a tuple <code>(N1(t), N2(t))</code>. You could plot that tuple with time as an <i>implicit</i> parameter, but then you only have <i>one curve</i>, not two. If you want to have two curves, one that plots N1 (the dependant variable) vs time (the independant variable), then you can plot a similar thing for N2 vs time. But then your y-axis will represent the value of N2 or N1. I don&#39;t understand your second formulation with two graphs. Can you add an image or source?"}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1423092085, "post_id": 28332217, "comment_id": 45013819, "body": "Also, are you sure you&#39;re not plotting <i>two</i> implicit graphs but just with different starting conditions?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1423092900, "post_id": 28332217, "comment_id": 45014074, "body": "Check out the Lotka-Volterra example in the scipy cookbook: <a href=\"http://wiki.scipy.org/Cookbook/LoktaVolterraTutorial?action=show&amp;redirect=LoktaVolterraTutorial\" rel=\"nofollow noreferrer\">wiki.scipy.org/Cookbook/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "is_accepted": true, "score": 7, "last_activity_date": 1423094471, "creation_date": 1423094471, "answer_id": 28333886, "question_id": 28332217, "link": "https://stackoverflow.com/questions/28332217/solve-lotka-volterra-model-using-scipy/28333886#28333886", "title": "Solve Lotka-Volterra model using SciPy", "body": "<p>The comment made by @WarrenWeckesser is a very good one, you should start there. I'll merely try to highlight the differences between the implicit plot and the explicit plot.</p>\n\n<p>First, the setup:</p>\n\n<pre><code>import numpy as np\nfrom scipy import integrate\nimport matplotlib.pyplot as plt\n\ntime=np.linspace(0,15,5*1024)\n\ndef derivN(N, t):\n    \"\"\"Return the derivative of the vector N, which represents\n    the tuple (N1, N2). \"\"\"\n\n    N1, N2  = N\n    return np.array([N1*(1 - N1 - .7*N2), N2*(1 - N2 - .3*N1)])\n\ndef coupled(time, init, ax):\n    \"\"\"Visualize the system of coupled equations, by passing a timerange and\n    initial conditions for the coupled equations.\n\n    The initical condition is the value that (N1, N2) will assume at the first\n    timestep. \"\"\"\n\n    N = integrate.odeint(derivN, init, time)\n    ax[0].plot(N[:,0], N[:,1], label='[{:.1f}, {:.1f}]'.format(*init))  # plots N2 vs N1, with time as an implicit parameter\n    l1, = ax[1].plot(time, N[:,0], label='[{:.1f}, {:.1f}]'.format(*init))\n    ax[1].plot(time, N[:,1], color=l1.get_color())\n</code></pre>\n\n<p>It is important to realize that your equations are coupled and you should present to <code>odeint</code> a function that returns the derivative of your coupled equations. Since you have 2 equations, you need to return an array of length 2, each item representing the derivative in terms of the passed in variable (which in this case is the array <code>N(t) = [N1(t), N2(t)]</code>).</p>\n\n<p>Then you can plot it at all, using different initial conditions for N1 and N2:</p>\n\n<pre><code>fh, ax = plt.subplots(1,2)\ncoupled(time, [.3, 1/.7], ax)\ncoupled(time, [.4, 1/.7], ax)\ncoupled(time, [1/.7, .3], ax)\ncoupled(time, [.5, .5], ax)\ncoupled(time, [.1, .1], ax)\nax[0].legend()\nax[1].legend()\nax[0].set_xlabel('N1')\nax[0].set_ylabel('N2')\nax[1].set_xlabel('time')\nax[1].set_ylabel(r'$N_i$')\nax[0].set_title('implicit')\nax[1].set_title('explicit (i.e. vs independant variable time)')\nplt.show()\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/Y5oX1.png\" alt=\"time evolution of coupled equations\"></p>\n\n<p>You'll notice that both <code>N1</code> and <code>N2</code> evolve to some final value, but that both values are different. The curves in the implicit plot do not intersect for the given equations.</p>\n"}], "owner": {"reputation": 2167, "user_id": 2237387, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f10bc46df3b1fa41b60201ac9af5da39?s=128&d=identicon&r=PG", "display_name": "cooldood3490", "link": "https://stackoverflow.com/users/2237387/cooldood3490"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3622, "favorite_count": 0, "accepted_answer_id": 28333886, "answer_count": 1, "score": 2, "last_activity_date": 1423094471, "creation_date": 1423086862, "last_edit_date": 1423088031, "question_id": 28332217, "link": "https://stackoverflow.com/questions/28332217/solve-lotka-volterra-model-using-scipy", "title": "Solve Lotka-Volterra model using SciPy", "body": "<p>I have the following Lotka-Volterra model</p>\n\n<p>dN1/dt = N1(1-N1-0.7N2)</p>\n\n<p>dN2/dt = N2(1-N2-0.3N1)</p>\n\n<p>where the 1 and 2 next to N are subscripts.</p>\n\n<p>I want to solve this using SciPy and visualize the results. I want to make a plot with N2 on the y axis and N1 on the N1. If you set N1 to zero in the first equation, you get N2 = 1/0.7 and if you set N2 to zero in the second equation, you get N1 = 0.3/1. The two lines are suppose to intersect. How do I do this in Python?</p>\n\n<p>I read this <a href=\"http://sam-marsh.staff.shef.ac.uk/mas115/docs/PYTHON-Lecture10.pdf\" rel=\"nofollow\">tutorial</a> (slides 6 to 16) online. This is what I have so far.</p>\n\n<pre><code>import numpy as np\nfrom scipy import integrate\nimport matplotlib.pyplot as plt\n\ndef derivN1(y,t):\n    yprime=np.array([1-0.7y[0]])\n    return yprime\n\ndef derivN2(y,t):\n    yprime=np.array([1-0.3y[0]])\n    return yprime\n\nstart=0\nend=1\nnumsteps=1000\ntime=np.linspace(start,end,numsteps)\ny0=np.array([10])\n\nyN1=integrate.odeint(derivN1,y0,time)\nyN2=integrate.odeint(derivN2,y0,time)\n\nplt.plot(time,yN1[:])\nplt.plot(time,yN2[:])\n</code></pre>\n\n<p>But the plot isn't correct. UPDATE: I think I used the wrong approach. I'm reading another online <a href=\"http://wiki.scipy.org/Cookbook/LoktaVolterraTutorial\" rel=\"nofollow\">tutorial</a>. I'll work through the problem some more. In the meantime, if anyone knows how to solve it let me know.</p>\n"}, {"tags": ["python", "compare", "nested-lists"], "comments": [{"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1423086982, "post_id": 28332148, "comment_id": 45011546, "body": "your 3 ifs can be replaced by <code>all(a == b for a,b in zip(RemoteLA[i][, Master[j]))</code> although that 9999 thing is strange"}, {"owner": {"reputation": 2513, "user_id": 1695486, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/NxIza.jpg?s=128&g=1", "display_name": "tschm", "link": "https://stackoverflow.com/users/1695486/tschm"}, "edited": false, "score": 0, "creation_date": 1423087179, "post_id": 28332148, "comment_id": 45011643, "body": "in Python you don&#39;t do such nasty index variables. Better use <b>for ll in RemoteLA</b>, etc. No need to have such C style index variables"}, {"owner": {"reputation": 1, "user_id": 4513075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a63a95df6be0f38082c75fca9d8a8b7?s=128&d=identicon&r=PG&f=1", "display_name": "ceitel", "link": "https://stackoverflow.com/users/4513075/ceitel"}, "edited": false, "score": 0, "creation_date": 1423087412, "post_id": 28332148, "comment_id": 45011751, "body": "I actually have 4 &#39;Remote&#39; files to compare and in one of them the account number is listed with all 9&#39;s--so until this gets fixed, any account numbers listed as 9999 I want to pass without anything being done."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4513075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a63a95df6be0f38082c75fca9d8a8b7?s=128&d=identicon&r=PG&f=1", "display_name": "ceitel", "link": "https://stackoverflow.com/users/4513075/ceitel"}, "edited": false, "score": 0, "creation_date": 1423176761, "post_id": 28332307, "comment_id": 45054667, "body": "That was my bad. My lists are all sorted by order #, but my test lists above were manually entered out of order."}], "tags": [], "owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "is_accepted": false, "score": 0, "last_activity_date": 1423087240, "creation_date": 1423087240, "answer_id": 28332307, "question_id": 28332148, "link": "https://stackoverflow.com/questions/28332148/python-comparing-nested-lists/28332307#28332307", "title": "Python Comparing Nested Lists", "body": "<p>A much shorter (although just as inefficient) would be:</p>\n\n<pre><code>import itertools\nfor master,remote in itertools.product(Master, RemoteLA):\n    if all(r == m for r,m in zip(master, remote)):\n        print \"Match\", master\n</code></pre>\n\n<p>A more efficient version would be to sort the lists first (O(nlogn)), in order to have a O(n) comparison.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4513075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a63a95df6be0f38082c75fca9d8a8b7?s=128&d=identicon&r=PG&f=1", "display_name": "ceitel", "link": "https://stackoverflow.com/users/4513075/ceitel"}, "edited": false, "score": 0, "creation_date": 1423176714, "post_id": 28332976, "comment_id": 45054651, "body": "Thank you for the suggestion. This sounds like it is my best option. I will work on this a bit,"}], "tags": [], "owner": {"reputation": 8873, "user_id": 2913864, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8fd76251e7baccce47654c94e399b915?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/2913864/alan"}, "is_accepted": false, "score": 1, "last_activity_date": 1423089763, "creation_date": 1423089763, "answer_id": 28332976, "question_id": 28332148, "link": "https://stackoverflow.com/questions/28332148/python-comparing-nested-lists/28332976#28332976", "title": "Python Comparing Nested Lists", "body": "<p>If I understand, account numbers are unique.  Therefore use them as dictionary keys.  Here, let's reorganize your data:</p>\n\n<pre><code>def orderSummary(lst):\n  info = collections.defaultdict(dict)\n  for item in lst:\n    acct = item[4]\n    orderinfo = info[acct]\n    ordernum = item[0]\n    if ordernum in orderinfo:\n      print \"duplicate order number\"\n    else:\n      orderinfo[ordernum] = tuple(item[1:4]) #the name\n  return info\n\nremote = orderSummary(RemoteLA)\nmaster = orderSummary(Master)\n</code></pre>\n\n<p>Now we are ready to check the remote against the master:</p>\n\n<pre><code>def checkRemoteAgainstMater(remote,master):\n  for acct,info in remote.items():\n    masterinfo = master.get(acct,None)\n    if masterinfo is None:\n      print \"bad account number {}\".format(acct)\n    else:\n      for order in info:\n        if order not in masterinfo:\n          print \"Master missing order\"\n        elif info[order] != masterinfo[order]:\n          print \"name mismatch\"\n\ncheckRemoteAgainstMater(remote,master)\n</code></pre>\n\n<p>hth.</p>\n"}], "owner": {"reputation": 1, "user_id": 4513075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a63a95df6be0f38082c75fca9d8a8b7?s=128&d=identicon&r=PG&f=1", "display_name": "ceitel", "link": "https://stackoverflow.com/users/4513075/ceitel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1435031511, "creation_date": 1423086595, "question_id": 28332148, "link": "https://stackoverflow.com/questions/28332148/python-comparing-nested-lists", "title": "Python Comparing Nested Lists", "body": "<p>I am very new to Python and programming in general. I have found many useful items on this site, but I have also confused myself in regards to what the best way to accomplish what I need.</p>\n\n<p>Simply put, I have 2 csv files, RemoteLA and Master. Each line item contains Order#, LastName, FirstName, MI, Account#. I have to find the items from RemoteLA that are not in Master file. My main concern is matching/verifying Order# first, then Account#, then name(s). There are instances where I can have two of the same order#'s but different names and Account#'s, which is ok as long as it is listed the same in the Master file. Lastly, if the RemoteLA order number is in the Master file, but the account number is listed incorrectly, I would like to print it in a different output than if the Order# wasn't in the Master file at all. Below are my simplified lists.</p>\n\n<pre><code>RemoteLA = [['100', 'JACKSON', 'CHRIS', 'D', '12344'], ['110', 'SMITH', 'JANET', 'L' '1223'], ['120', 'STONE', 'MAX', 'W', '1233']]\nMaster = [['100', 'JACKSON', 'CHRIS', 'D', '1234'], ['90', 'BARST', 'JOEY', 'D', '1344'], ['80', 'NORDON', 'BEV', 'A', '1122'], ['120', 'STONE', 'MAX', 'W', '1233']]\n</code></pre>\n\n<p>Like I said, I have tried many things using sets, list of tuples, etc. My last 'try' was using a while loop as follows-I was just trying to see if I could get the results I wanted, but it appears I am still doing something wrong.</p>\n\n<pre><code>i=0\nwhile i &lt; len(RemoteLA):\n    j = 0\n    while j &lt; len(Master):\n        if RemoteLA[i][0] == Master[j][0]:\n            if RemoteLA[i][1] == Master[j][1]:\n                if RemoteLA[i][2] == Master[j][2]:\n                    print('All match')\n                elif RemoteLA[i][2] == '9999':\n                    pass\n                else:\n                    print('Account number does not match')\n            else:\n                print('Name does not match')\n        else:\n            print('Order number does not match')\n        j = j + 1\n    i = i + 1\n</code></pre>\n\n<p>Any help or push in the right direction would be very much appreciated. Sorry for the wordiness. Thank you.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1, "user_id": 4517619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d078b7f195577aca8684fd105dc7a42?s=128&d=identicon&r=PG&f=1", "display_name": "codervb", "link": "https://stackoverflow.com/users/4517619/codervb"}, "edited": false, "score": 0, "creation_date": 1423086278, "post_id": 28332042, "comment_id": 45011170, "body": "the second function is not showing correctly."}, {"owner": {"reputation": 4701, "user_id": 1770601, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/pp9hI.jpg?s=128&g=1", "display_name": "ha9u63ar", "link": "https://stackoverflow.com/users/1770601/ha9u63ar"}, "edited": false, "score": 0, "creation_date": 1423086296, "post_id": 28332042, "comment_id": 45011184, "body": "please update the formatting"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1423086423, "post_id": 28332042, "comment_id": 45011245, "body": "With rare exceptions, the while loop is not idiomatic in Python unless it is <code>while True:</code>."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1423086736, "post_id": 28332042, "comment_id": 45011409, "body": "Are you aware of the fact that no contemporary filesystem makes a distinction between a file&#39;s name and its extension?"}, {"owner": {"reputation": 1, "user_id": 4517619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d078b7f195577aca8684fd105dc7a42?s=128&d=identicon&r=PG&f=1", "display_name": "codervb", "link": "https://stackoverflow.com/users/4517619/codervb"}, "edited": false, "score": 0, "creation_date": 1423087282, "post_id": 28332042, "comment_id": 45011690, "body": "I am new to coding, and was trying to figure out why the code is not working."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4517619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d078b7f195577aca8684fd105dc7a42?s=128&d=identicon&r=PG&f=1", "display_name": "codervb", "link": "https://stackoverflow.com/users/4517619/codervb"}, "edited": false, "score": 0, "creation_date": 1423087556, "post_id": 28332279, "comment_id": 45011830, "body": "Wont the request_file_name = False change the when the checkFileEXT(filename) is called again."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1423087694, "post_id": 28332279, "comment_id": 45011892, "body": "Two (recursive) calls have independent local variables."}], "tags": [], "owner": {"reputation": 3272, "user_id": 1090657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pWoj4.jpg?s=128&g=1", "display_name": "quantum", "link": "https://stackoverflow.com/users/1090657/quantum"}, "is_accepted": false, "score": 0, "last_activity_date": 1423087117, "creation_date": 1423087117, "answer_id": 28332279, "question_id": 28332042, "link": "https://stackoverflow.com/questions/28332042/why-is-this-python-code-running-in-a-loop/28332279#28332279", "title": "Why is this Python code running in a loop", "body": "<p>Here is your problem:</p>\n\n<pre><code>while request_file_name is True or len(provided_ext) != 3:\n</code></pre>\n\n<p>There is nothing to set <code>request_file_name</code> to <code>False</code> or change the length of <code>provided_ext</code>. Therefore, the loop either runs ones or forever.</p>\n"}, {"comments": [{"owner": {"reputation": 60, "user_id": 1407410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f1b1274f89fddf1f4f27af8ff103af?s=128&d=identicon&r=PG", "display_name": "JamesWat", "link": "https://stackoverflow.com/users/1407410/jameswat"}, "edited": false, "score": 0, "creation_date": 1423088472, "post_id": 28332436, "comment_id": 45012256, "body": "also, i would recommend using pythons built-in <code>isalpha()</code> method instead of <code>if char not in (\u201ca\u201d, \u201cb\u201d, \u201cc\u201d, ...</code>"}], "tags": [], "owner": {"reputation": 60, "user_id": 1407410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f1b1274f89fddf1f4f27af8ff103af?s=128&d=identicon&r=PG", "display_name": "JamesWat", "link": "https://stackoverflow.com/users/1407410/jameswat"}, "is_accepted": false, "score": 0, "last_activity_date": 1423087750, "creation_date": 1423087750, "answer_id": 28332436, "question_id": 28332042, "link": "https://stackoverflow.com/questions/28332042/why-is-this-python-code-running-in-a-loop/28332436#28332436", "title": "Why is this Python code running in a loop", "body": "<p>A better way to do the check of the file would be as follows:</p>\n\n<pre><code>new_file = open_file()\nwhile check_file(new_file) is False:\n    new_file = open_file()\n\nprint(new_file)\n</code></pre>\n\n<p>This reduces the complicated logic of your two functions calling each other multiple times, and decouples them from each other. You will need to re-factor your code a bit, as this only shows the basic logic.</p>\n"}], "owner": {"reputation": 1, "user_id": 4517619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d078b7f195577aca8684fd105dc7a42?s=128&d=identicon&r=PG&f=1", "display_name": "codervb", "link": "https://stackoverflow.com/users/4517619/codervb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423088036, "creation_date": 1423086208, "last_edit_date": 1423088036, "question_id": 28332042, "link": "https://stackoverflow.com/questions/28332042/why-is-this-python-code-running-in-a-loop", "title": "Why is this Python code running in a loop", "body": "<p>I am trying to open a file using python. Have two functions, one to get the file name and open the file, second to check if the extension is valid. Check for a period, 3 chars with no upper case, numeric or special chars. </p>\n\n<p>e.g. first pass testfile.txt will run fine. but if I run the code again and test with variables like test.123 and then enter testfile.txt, goes to the while loop,but if I go with test.abc, the response is correct. then if enter testfile.txt or any other correct file after a wrong entry the code takes me back to the while loop. Where did i make the mistake.</p>\n\n<pre><code>def openfiles():\n    \"\"\"\n        this function to accept the file name and open it.\n\n    :rtype : object\n    \"\"\"\n    found_file = False\n    while not found_file:\n        try:\n            filename = input(\"Please provide the name of the file\")\n            ext_check = checkFileEXT(filename)\n            if ext_check is True:\n                input_file = open(filename)\n            found_file = True\n        except IOError:\n            print(\"The requested file was not opened. Either the file name or extension was not correct. \\\n            Please try again\")\n    return input_file\n\n\ndef checkFileEXT(filename):\n    period = \".\"\n    index = filename.find(period)\n    request_file_name = False\n    if index == -1:\n        request_file_name = True\n    else:\n        provided_ext = filename[index + 1:len(filename)]\n        for char in provided_ext:\n            if char not in (\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"0\", \"p\", \"q\", \"r\", \"t\", \"u\", \"v\", \"x\", \"y\", \"z\"):\n                request_file_name = True\n    while request_file_name is True or len(provided_ext) != 3:\n        print(\"The file name provided was not correct\")\n        openfiles()\n    return True\nprint(openfiles())\n</code></pre>\n\n<p>Another issue I have is that breakpoints are getting over ridden. It seems to Run the code even in Debug. This will happen on the second pass.</p>\n"}, {"tags": ["python", "mysql", "dictionary"], "comments": [{"owner": {"reputation": 1932, "user_id": 1450754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d260a34500731e79502ef0fa47fa5f?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t Latinier", "link": "https://stackoverflow.com/users/1450754/beno%c3%aet-latinier"}, "edited": false, "score": 1, "creation_date": 1423086367, "post_id": 28332014, "comment_id": 45011217, "body": "Do you have a DB schema? If not (just storing all values in a single column) just store the dump json of your dict. If you have a schema I&#39;m pretty sure mysqldb allows you to do things like call it with <code>**parsed_tweets</code>."}, {"owner": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "reply_to_user": {"reputation": 1932, "user_id": 1450754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d260a34500731e79502ef0fa47fa5f?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t Latinier", "link": "https://stackoverflow.com/users/1450754/beno%c3%aet-latinier"}, "edited": false, "score": 0, "creation_date": 1423086534, "post_id": 28332014, "comment_id": 45011308, "body": "I do have a db schema and I plan on expanding the structure when I can. Here&#39;s what it looks like right now <a href=\"http://gyazo.com/163db9070f309eb6f3a32f8f0d8618ce\" rel=\"nofollow noreferrer\">gyazo.com/163db9070f309eb6f3a32f8f0d8618ce</a>"}, {"owner": {"reputation": 1932, "user_id": 1450754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d260a34500731e79502ef0fa47fa5f?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t Latinier", "link": "https://stackoverflow.com/users/1450754/beno%c3%aet-latinier"}, "edited": false, "score": 0, "creation_date": 1423087141, "post_id": 28332014, "comment_id": 45011622, "body": "Well mysqldb queries are like that: <code>c.execute(&quot;INSERT INTO blabla (col1, ...) VALUES(?, ...)&quot;, arg1, arg2...)</code> you could do something like <code>c.execute(&quot;INSERT INTO blabla (&quot; + &quot;, &quot;.join(d.keys()) + &quot;) VALUES(&quot; + &quot;, &quot;.join([&quot;?&quot;] * len(d)) + &quot;)&quot;, *d.keys())</code> with <code>d</code> containing your data in an <i>OrderedDict</i>. But this is very error prone, and I&#39;m not even speaking of security. You might what to use an ORM like SqlAlchemy."}, {"owner": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "reply_to_user": {"reputation": 1932, "user_id": 1450754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d260a34500731e79502ef0fa47fa5f?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t Latinier", "link": "https://stackoverflow.com/users/1450754/beno%c3%aet-latinier"}, "edited": false, "score": 0, "creation_date": 1423087581, "post_id": 28332014, "comment_id": 45011846, "body": "Sorry ignore that last comment if you rea it before the edit, I figured it out"}], "answers": [{"comments": [{"owner": {"reputation": 4107, "user_id": 4379026, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce3b0fac80a2bcf2dd321bedcdbc240?s=128&d=identicon&r=PG&f=1", "display_name": "mattsap", "link": "https://stackoverflow.com/users/4379026/mattsap"}, "reply_to_user": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "edited": false, "score": 0, "creation_date": 1446563596, "post_id": 28333107, "comment_id": 54788482, "body": "Another way would be to dump the dictionary to a file and save the reference to the file in your DB."}], "tags": [], "owner": {"reputation": 4107, "user_id": 4379026, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce3b0fac80a2bcf2dd321bedcdbc240?s=128&d=identicon&r=PG&f=1", "display_name": "mattsap", "link": "https://stackoverflow.com/users/4379026/mattsap"}, "is_accepted": false, "score": 2, "last_activity_date": 1423090326, "creation_date": 1423090326, "answer_id": 28333107, "question_id": 28332014, "link": "https://stackoverflow.com/questions/28332014/storing-a-python-dictionary-in-a-mysql-database/28333107#28333107", "title": "Storing a python dictionary in a Mysql database", "body": "<p>Unfortunately, the best you can do is store the JSON as a text in mySQL because mySQL doesn't support JSON format. You can do this by importing json and calling the dump method to convert the JSON to text. Similarly, you can call the load method to parse the json back into your program.</p>\n\n<p>If you need to store a json into a DB, try using couchDB</p>\n"}], "owner": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1672, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570867769, "creation_date": 1423086133, "last_edit_date": 1570867769, "question_id": 28332014, "link": "https://stackoverflow.com/questions/28332014/storing-a-python-dictionary-in-a-mysql-database", "title": "Storing a python dictionary in a Mysql database", "body": "<p>How should you frame an SQL queries for inserting and retrieving python dictionaries from MySQL databases?</p>\n\n<p>The parsed_tweets is an example of a dictionary I'd like to be able to store.</p>\n\n<pre><code>for tweet in twtsearch.search_tweets_iterable(twtsearchorder):\n    if tweet_limit &gt; 0 :\n        parsed_tweets['userid'] = tweet['user']['id']\n        parsed_tweets['uname'] = tweet['user']['screen_name']\n        parsed_tweets['content'] = tweet['text']\n        parsed_tweets['location'] = tweet['user']['location']\n        parsed_tweets['retweets'] = tweet['retweet_count']\n        parsed_tweets['favs'] = tweet['favorite_count']\n</code></pre>\n"}, {"tags": ["python", "time", "web2py"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1423086187, "post_id": 28332004, "comment_id": 45011121, "body": "A <code>cron</code> job maybe? What is your server OS?"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 2289064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZHo9v.jpg?s=128&g=1", "display_name": "muraaby", "link": "https://stackoverflow.com/users/2289064/muraaby"}, "edited": false, "score": 0, "creation_date": 1423086490, "post_id": 28332085, "comment_id": 45011283, "body": "Thank you I will look into Django. I did see some stuff on crontab, I figured there might be an easier way"}, {"owner": {"reputation": 1587, "user_id": 2169557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca6801eb04e08b0af742a7e43950d6?s=128&d=identicon&r=PG&f=1", "display_name": "Logic1", "link": "https://stackoverflow.com/users/2169557/logic1"}, "reply_to_user": {"reputation": 65, "user_id": 2289064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZHo9v.jpg?s=128&g=1", "display_name": "muraaby", "link": "https://stackoverflow.com/users/2289064/muraaby"}, "edited": false, "score": 0, "creation_date": 1423086649, "post_id": 28332085, "comment_id": 45011365, "body": "Alternatively check out Celery. It has periodic tasks like cron."}, {"owner": {"reputation": 1587, "user_id": 2169557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca6801eb04e08b0af742a7e43950d6?s=128&d=identicon&r=PG&f=1", "display_name": "Logic1", "link": "https://stackoverflow.com/users/2169557/logic1"}, "reply_to_user": {"reputation": 65, "user_id": 2289064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZHo9v.jpg?s=128&g=1", "display_name": "muraaby", "link": "https://stackoverflow.com/users/2289064/muraaby"}, "edited": false, "score": 0, "creation_date": 1423087298, "post_id": 28332085, "comment_id": 45011699, "body": "I just went and looked on our server to see what python module we use for cron-like scheduling. turns out i was mistaken when i said python-crontab as we actually use apscheduler. I am updating my previous comment."}], "tags": [], "owner": {"reputation": 1587, "user_id": 2169557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca6801eb04e08b0af742a7e43950d6?s=128&d=identicon&r=PG&f=1", "display_name": "Logic1", "link": "https://stackoverflow.com/users/2169557/logic1"}, "is_accepted": false, "score": 0, "last_activity_date": 1423087342, "last_edit_date": 1423087342, "creation_date": 1423086381, "answer_id": 28332085, "question_id": 28332004, "link": "https://stackoverflow.com/questions/28332004/having-a-function-run-at-random-time-intervals-web2py/28332085#28332085", "title": "Having a function run at random time intervals, web2py", "body": "<p>Check out the <a href=\"http://apscheduler.readthedocs.org/en/latest/userguide.html\" rel=\"nofollow\">Apscheduler</a> module for cron-like scheduling of events in python - In their <a href=\"https://apscheduler.readthedocs.org/en/v2.1.2/cronschedule.html\" rel=\"nofollow\">example</a> it shows how to schedule some python code to run in a cron'ish way. </p>\n\n<p>Still not sure about the random part though..</p>\n\n<p>As for a web framework that may appeal to you (seeing you are familiar with Python already) you should really look into Django (or to keep things simple just use WSGI).</p>\n\n<p>Best.</p>\n"}, {"tags": [], "owner": {"reputation": 281, "user_id": 4224552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0daffca6d02d380eab0cb01795a72fdd?s=128&d=identicon&r=PG&f=1", "display_name": "BartoszGo", "link": "https://stackoverflow.com/users/4224552/bartoszgo"}, "is_accepted": false, "score": 0, "last_activity_date": 1423339965, "creation_date": 1423339965, "answer_id": 28386829, "question_id": 28332004, "link": "https://stackoverflow.com/questions/28332004/having-a-function-run-at-random-time-intervals-web2py/28386829#28386829", "title": "Having a function run at random time intervals, web2py", "body": "<p>I think that actually you can use Scheduler and Tasks of web2py. I've never used it ;) but the documentation describes creation of a task to which you can pass parameters from your code - so something you need - and it should work fine for your needs: </p>\n\n<p><code>scheduler.queue_task('mytask', start_time=myrandomtime)</code></p>\n\n<p>So you need web2py's cron job, running every day and firing code similar to the above for each message to be sent (passing parameters you need, possibly message content and phone number, see examples in web2py book). This would be a daily creation of tasks which would be processed later by the scheduler.</p>\n\n<p>You can also have a simpler solution, one daily cron job which prepares the queue of messages with random times for the next day and the second one which runs every, like, ten minutes, checks what awaits to be processed and sends messages. So, no Tasks. This way is a bit ugly though (consider a single processing which takes more then 10 minutes). You may also want to have and check some statuses of the messages to be processed (like pending, ongoing, done) to prevent a situation in which two jobs are working on the same message and to allow tracking progress of the processing. Anyway, you could use the cron method it in an early version of your software and later replace it by a better method :)</p>\n\n<p>In any case, you should check expected number of messages to process and average processing time on your target platform - to make sure that the chosen method is quick enough for your needs.</p>\n"}], "owner": {"reputation": 65, "user_id": 2289064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZHo9v.jpg?s=128&g=1", "display_name": "muraaby", "link": "https://stackoverflow.com/users/2289064/muraaby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 673, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1504131001, "creation_date": 1423086094, "last_edit_date": 1504131001, "question_id": 28332004, "link": "https://stackoverflow.com/questions/28332004/having-a-function-run-at-random-time-intervals-web2py", "title": "Having a function run at random time intervals, web2py", "body": "<p>Im currently making a program that would send random text messages at randomly generated times during the day. I first made my program in python and then realized that if I would like other people to sign up to receive messages, I would have to use some sort of online framework. (If anyone knowns a way to use my code in python without having to change it that would be amazing, but for now I have been trying to use web2py) I looked into scheduler but it does not seem to do what I have in mind. If anyone knows if there is a way to pass a time value into a function and have it run at that time, that would be great. Thanks! </p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "is_accepted": false, "score": 12, "last_activity_date": 1423089191, "last_edit_date": 1423089191, "creation_date": 1423088802, "answer_id": 28332740, "question_id": 28331948, "link": "https://stackoverflow.com/questions/28331948/numpy-getting-in-the-way-of-int-float-type-casting/28332740#28332740", "title": "Numpy getting in the way of int -&gt; float type casting", "body": "<p>All your problems are indeed related.</p>\n\n<p>A numpy array is an array that holds objects efficiently. It does this by having these objects be of the same <em>type</em>, like strings (of equal length) or integers or floats. It can then easily calculate just how much space each element needs and how many bytes it must \"jump\" to access the next element (we call these the \"strides\").</p>\n\n<p>When you create an array from a list, numpy will try to determine a suitable data type (\"dtype\") from that list, to ensure all elements can be represented well. Only when you specify the dtype explicitly, will it not make an educated guess.</p>\n\n<p>Consider the following example:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; integer_array = np.array([1,2,3])  # pass in a list of integers\n&gt;&gt;&gt; integer_array\narray([1, 2, 3])\n&gt;&gt;&gt; integer_array.dtype\ndtype('int64')\n</code></pre>\n\n<p>As you can see, on my system it returns a data type of <code>int64</code>, which is a representation of integers using 8 bytes. It chooses this, because:</p>\n\n<ol>\n<li>numpy recognizes all elements of the list are integers</li>\n<li>my system is a 64-bit system</li>\n</ol>\n\n<p>Now consider an attempt at changing that array:</p>\n\n<pre><code>&gt;&gt;&gt; integer_array[0] = 2.4  # attempt to put a float in an array with dtype int\n&gt;&gt;&gt; integer_array # it is automatically converted to an int!\narray([2, 2, 3])\n</code></pre>\n\n<p>As you can see, once a datatype for an array was set, automatic casting to that datatype is done. \nLet's now consider what happens when you pass in a list that has at least one float:</p>\n\n<pre><code>&gt;&gt;&gt; float_array = np.array([1., 2,3])\n&gt;&gt;&gt; float_array\narray([ 1.,  2.,  3.])\n&gt;&gt;&gt; float_array.dtype\ndtype('float64')\n</code></pre>\n\n<p>Once again, numpy determines a suitable datatype for this array.</p>\n\n<p>Blindly attempting to change the datatype of an array is not wise:</p>\n\n<pre><code>&gt;&gt;&gt; integer_array.dtype = np.float32\n&gt;&gt;&gt; integer_array\narray([  2.80259693e-45,   0.00000000e+00,   2.80259693e-45,\n         0.00000000e+00,   4.20389539e-45,   0.00000000e+00], dtype=float32)\n</code></pre>\n\n<p>Those numbers are gibberish you might say. That's because numpy tries to reinterpret the memory locations of that array as 4-byte floats (the skilled people will be able to convert the numbers to binary representation and from there reinterpret the original integer values). </p>\n\n<p>If you want to cast, you'll have to do it explicitly and numpy will return a <em>new</em> array:</p>\n\n<pre><code>&gt;&gt;&gt; integer_array.dtype = np.int64 # go back to the previous interpretation\n&gt;&gt;&gt; integer_array\narray([2, 2, 3])\n&gt;&gt;&gt; integer_array.astype(np.float32)\narray([ 2.,  2.,  3.], dtype=float32)\n</code></pre>\n\n<p>Now, to address your specific questions:</p>\n\n<blockquote>\n  <p>1a) If instantiate a with a = FourVector(ct=5,r=[55,2.,3]), then type(a._r[0]) returns numpy.float64 as opposed to numpy.int32. What is going on here? I expected just a._r[1] to be a float, and instead it changes the type of the whole list?</p>\n</blockquote>\n\n<p>That's because numpy has to determine a datatype for the entire array (unless you use a <a href=\"http://docs.scipy.org/doc/numpy/user/basics.rec.html\" rel=\"noreferrer\">structured array</a>), ensuring all elements fit in that datatype. Only then can numpy iterate over the elements of that array efficiently.</p>\n\n<blockquote>\n  <p>1b) How do I get the above behaviour (The whole list being floats), without having to instantiate the variables as floats? I read up on the documentation and have tried various methods, like using astype(float), but everything I do seems to keep it as an int. Again, thinking this is the mutable/immutable problem I'm having.</p>\n</blockquote>\n\n<p>Specify the <code>dtype</code> when you are creating the array. In your code, that would be:</p>\n\n<pre><code>self._r = np.array(r, dtype=np.float)\n</code></pre>\n\n<blockquote>\n  <p>2) I had thought, in the tempx=... line, multiplying by 1.0 would convert it to a float, as it appears this is the reason ct converts to a float, but for some reason it doesn't. Perhaps the same reason as the others?</p>\n</blockquote>\n\n<p>That is true. Try printing the datatype of <code>tempx</code>, it should be a float. However, later on, you are reinserting that value into the array <code>self._r</code>, which has the dtype of int. And as you saw previously, that will cast the float back to an integer type.</p>\n"}], "owner": {"reputation": 41, "user_id": 4496239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c30c7aa61c7e06e46affa71a41666c?s=128&d=identicon&r=PG&f=1", "display_name": "chicks427", "link": "https://stackoverflow.com/users/4496239/chicks427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5564, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1423089191, "creation_date": 1423085873, "question_id": 28331948, "link": "https://stackoverflow.com/questions/28331948/numpy-getting-in-the-way-of-int-float-type-casting", "title": "Numpy getting in the way of int -&gt; float type casting", "body": "<p>Apologies in advance - I seem to be having a very fundamental misunderstanding that I can't clear up. I have a fourvector class with variables for ct and the position vector. I'm writing code to perform an x-direction lorentz boost. The problem I'm running in to is that I, as it's written below, ct returns with a proper float value, but x does not. Messing around, I find that tempx is a float, but assigning tempx to r[0] does not make that into a float, instead it rounds down to an int. I have previously posted a question on mutability vs immutability, and I suspect this is the issue. If so I clearly have a deeper misunderstanding than expected. Regardless, there are a couple of questions I have;</p>\n\n<p>1a) If instantiate a with a = FourVector(ct=5,r=[55,2.,3]), then type(a._r[0]) returns numpy.float64 as opposed to numpy.int32. What is going on here? I expected just a._r[1] to be a float, and instead it changes the type of the whole list?</p>\n\n<p>1b) How do I get the above behaviour (The whole list being floats), without having to instantiate the variables as floats? I read up on the documentation and have tried various methods, like using astype(float), but everything I do seems to keep it as an int. Again, thinking this is the mutable/immutable problem I'm having.</p>\n\n<p>2) I had thought, in the tempx=... line, multiplying by 1.0 would convert it to a float, as it appears this is the reason ct converts to a float, but for some reason it doesn't. Perhaps the same reason as the others?</p>\n\n<pre><code>import numpy as np\n\nclass FourVector():\n    def __init__(self, ct=0, x=0, y=0, z=0, r=[]):\n        self._ct = ct\n        self._r = np.array(r)\n        if r == []:\n            self._r = np.array([x,y,z])\n\n    def boost(self, beta):\n        gamma=1/np.sqrt(1-(beta ** 2))\n        tempct=(self._ct*gamma-beta*gamma*self._r[0])\n        tempx=(-1.0*self._ct*beta*gamma+self._r[0]*gamma)\n        self._ct=tempct\n        print(type(self._r[0]))\n        self._r[0]=tempx.astype(float)\n        print(type(self._r[0]))\n\na = FourVector(ct=5,r=[55,2,3])\nb = FourVector(ct=1,r=[4,5,6])\nprint(a._r)\na.boost(.5)\nprint(a._r)\n</code></pre>\n"}, {"tags": ["python", "xml", "parsing", "elementtree"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4224258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db2f29f72b856f65c45811d2fb2b8fad?s=128&d=identicon&r=PG&f=1", "display_name": "erics12512354", "link": "https://stackoverflow.com/users/4224258/erics12512354"}, "edited": false, "score": 0, "creation_date": 1423091496, "post_id": 28332589, "comment_id": 45013599, "body": "Thank you I don&#39;t have time to try it now but it looks promising. Will try when I get home."}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 63, "user_id": 4224258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db2f29f72b856f65c45811d2fb2b8fad?s=128&d=identicon&r=PG&f=1", "display_name": "erics12512354", "link": "https://stackoverflow.com/users/4224258/erics12512354"}, "edited": false, "score": 0, "creation_date": 1423091653, "post_id": 28332589, "comment_id": 45013652, "body": "@erics12512354, no worries take your time and I&#39;m sure once you get the idea of how the <b>path</b> works you&#39;ll have problem solving the issue :)"}, {"owner": {"reputation": 63, "user_id": 4224258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db2f29f72b856f65c45811d2fb2b8fad?s=128&d=identicon&r=PG&f=1", "display_name": "erics12512354", "link": "https://stackoverflow.com/users/4224258/erics12512354"}, "edited": false, "score": 1, "creation_date": 1423092337, "post_id": 28332589, "comment_id": 45013897, "body": "It works. I didn&#39;t realize you could add positional arguments to the file paths and I was missing the ./ and when I tried that. Thanks again."}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 63, "user_id": 4224258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db2f29f72b856f65c45811d2fb2b8fad?s=128&d=identicon&r=PG&f=1", "display_name": "erics12512354", "link": "https://stackoverflow.com/users/4224258/erics12512354"}, "edited": false, "score": 0, "creation_date": 1423092490, "post_id": 28332589, "comment_id": 45013945, "body": "@erics12512354, glad it helps. Yes it&#39;s a little similar to xpath :)"}], "tags": [], "owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "is_accepted": true, "score": 1, "last_activity_date": 1423088728, "last_edit_date": 1423088728, "creation_date": 1423088317, "answer_id": 28332589, "question_id": 28331844, "link": "https://stackoverflow.com/questions/28331844/parsing-an-xml-file-using-elementtree/28332589#28332589", "title": "Parsing an XML file using ElementTree", "body": "<p>The most simplest way to achieve what you want is to use <code>find</code> or <code>findall</code> with the <strong>path</strong>, <strong>iter</strong> works well with <strong>tag</strong> name but in your case using <strong>path</strong> will be more suitable.</p>\n\n<p>Here is one way of doing it, by the way, your sample is missing a <strong>root</strong> element thus I've added in my code:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nfrom StringIO import StringIO\n\ns = '''&lt;!-- The description of the process --&gt;\n&lt;Description&gt;\"This is a description\"&lt;/Description&gt;\n\n&lt;!-- info on process to be run --&gt;\n&lt;Process expectFailure=\"false\"&gt;\n    &lt;Code&gt;Import&lt;/Code&gt;\n    &lt;Sources&gt;\n        &lt;Source&gt;\"Test Data\"&lt;/Source&gt;\n    &lt;/Sources&gt;\n    &lt;Destination&gt;Buffered&lt;/Destination&gt;\n    &lt;Properties&gt;\n        &lt;Property code=\"format\" value=\"CC\"/&gt;\n        &lt;Property code=\"Input\" value=\"10N\"/&gt;\n        &lt;Property code=\"Method\" value=\"BASIC\"/&gt;\n        &lt;Ppoperty code=\"Resolution\" value=\"5\"/&gt;\n        &lt;Property code=\"Convention\" value=\"LEFT\"/&gt;\n        &lt;Property code=\"Bounding\" value=\"BUFFERED\"/&gt;\n    &lt;/Properties&gt;\n&lt;/Process&gt;\n\n&lt;!-- info on second process to be run (compare) --&gt;\n&lt;Process&gt;\n    &lt;Code&gt;SurfaceCompare&lt;/Code&gt;\n    &lt;Sources&gt;\n        &lt;Source&gt;expectedOutput&lt;/Source&gt;\n        &lt;Source&gt;Buffered&lt;/Source&gt;\n    &lt;/Sources&gt;\n    &lt;Properties&gt;\n        &lt;Property code=\"compare_designated\" value=\"true\"/&gt;\n        &lt;Property code=\"compare_metadata\" value=\"true\"/&gt;\n        &lt;Property code=\"metadata_type\" value=\"OTHER\"/&gt;\n    &lt;/Properties&gt;\n&lt;/Process&gt;'''\n</code></pre>\n\n<hr>\n\n<pre><code># once you've parsed the file, you need to **getroot()**\ntree = ET.parse(StringIO('&lt;root&gt;' + s + '&lt;/root&gt;')).getroot()\n</code></pre>\n\n<p>For example, you can use path to get from first <strong>Process[1] -> Properties -> Property</strong>, using <code>findall</code> you can get to all <strong>Property</strong> nodes, and iterate them:</p>\n\n<pre><code># and iterate all Property nodes, and get their attributes like this\nfor p in tree.findall('./Process[1]/Properties/Property'):\n    print p.attrib # to get code/value, use p.attrib.get('code') etc.\n</code></pre>\n\n<p>Thus you get the first <strong>Process/Properties</strong> and all <strong>Property</strong>'s attributes:</p>\n\n<pre><code>{'code': 'format', 'value': 'CC'}\n{'code': 'Input', 'value': '10N'}\n{'code': 'Method', 'value': 'BASIC'}\n{'code': 'Convention', 'value': 'LEFT'}\n{'code': 'Bounding', 'value': 'BUFFERED'}\n</code></pre>\n\n<p>Another example, to get just the second <strong>Process</strong>, second <strong>Source</strong> text, using <strong>path</strong> is quite straight forward with just <code>find</code>, too:</p>\n\n<pre><code>print tree.find('./Process[2]/Sources/Source[2]').text\nBuffered\n</code></pre>\n\n<p>I hope you get the idea of how to use them, remember to get a single node you use <code>find</code>, to return a list of nodes, you use <code>findall</code>, hope this helps.</p>\n"}], "owner": {"reputation": 63, "user_id": 4224258, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db2f29f72b856f65c45811d2fb2b8fad?s=128&d=identicon&r=PG&f=1", "display_name": "erics12512354", "link": "https://stackoverflow.com/users/4224258/erics12512354"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 28332589, "answer_count": 1, "score": 0, "last_activity_date": 1423089246, "creation_date": 1423085468, "last_edit_date": 1423089246, "question_id": 28331844, "link": "https://stackoverflow.com/questions/28331844/parsing-an-xml-file-using-elementtree", "title": "Parsing an XML file using ElementTree", "body": "<p>I am having two issues with parsing an XML file. I want to only return one set of properties I.E only the property values under the first Process and I want to return the second Source under the second Process. When I use my code it returns the Source under the first Sources and the first Source under the second Sources but I cannot get the second Source to return. </p>\n\n<p>The XML file looks like: </p>\n\n<p>\n</p>\n\n<pre><code>&lt;!-- The description of the process --&gt;\n&lt;Description&gt;\"This is a description\"&lt;/Description&gt;\n\n&lt;!-- info on process to be run --&gt;\n&lt;Process expectFailure=\"false\"&gt;\n    &lt;Code&gt;Import&lt;/Code&gt;\n    &lt;Sources&gt;\n        &lt;Source&gt;\"Test Data\"&lt;/Source&gt;\n    &lt;/Sources&gt;\n    &lt;Destination&gt;Buffered&lt;/Destination&gt;\n    &lt;Properties&gt;\n        &lt;Property code=\"format\" value=\"CC\"/&gt;\n        &lt;Property code=\"Input\" value=\"10N\"/&gt;\n        &lt;Property code=\"Method\" value=\"BASIC\"/&gt;\n        &lt;Ppoperty code=\"Resolution\" value=\"5\"/&gt;\n        &lt;Property code=\"Convention\" value=\"LEFT\"/&gt;\n        &lt;Property code=\"Bounding\" value=\"BUFFERED\"/&gt;\n    &lt;/Properties&gt;\n&lt;/Process&gt;\n\n&lt;!-- info on second process to be run (compare) --&gt;\n&lt;Process&gt;\n    &lt;Code&gt;SurfaceCompare&lt;/Code&gt;\n    &lt;Sources&gt;\n        &lt;Source&gt;expectedOutput&lt;/Source&gt;\n        &lt;Source&gt;Buffered&lt;/Source&gt;\n    &lt;/Sources&gt;\n    &lt;Properties&gt;\n        &lt;Property code=\"compare_designated\" value=\"true\"/&gt;\n        &lt;Property code=\"compare_metadata\" value=\"true\"/&gt;\n        &lt;Property code=\"metadata_type\" value=\"OTHER\"/&gt;\n    &lt;/Properties&gt;\n&lt;/Process&gt;\n</code></pre>\n\n<p></p>\n\n<p>and the code looks like</p>\n\n<pre><code>from xml.etree import ElementTree\n\ntree = ElementTree.parse(\"XML_example.xml\")\n\ndescription = tree.findtext(\"Description\")\nprint(description)\n\nfor process in tree.findall('Process'):\n    for source in process.findall('Sources'):\n        source_text = source.findtext('Source')\n        print(source_text)\n\n#returns everything\nfor property in process.iter('Property'):\n    print(property.attrib.get('code'))\n    print(property.attrib.get('value'))\n\nfor process in tree.findall('Process'):\n    for source in process.findall('Sources'):\n        source = source.findtext('Source')\n        print(source)\n</code></pre>\n\n<p>I've tried a lot of different ways of using the findall, find, iter, get, getiter methods. I am sure I am missing something but it has been a long day and for the life of me I can't see what I am missing.</p>\n\n<p>There is also the ability to change how the XML is set up but I know there must be a way to solve this question and it is gnawing at me.</p>\n\n<p>Sample proper output for sources:</p>\n\n<pre><code>\"Test Data\"\nexpectedOutput\nbuffered\n</code></pre>\n\n<p>Sample proper output 1 for properties:</p>\n\n<pre><code>format\nCC\nInput\n10N\nMethod\nBASIC\nConvention\nLEFT\nBounding\nBUFFERED\n</code></pre>\n\n<p>Sample proper output 2: </p>\n\n<pre><code>compare_designated \ntrue\ncompare_metadata \ntrue\nmetadata_type \nOTHER\n</code></pre>\n"}, {"tags": ["python", "json", "dictionary", "schema", "jsonschema"], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 0, "last_activity_date": 1423086739, "creation_date": 1423086739, "answer_id": 28332187, "question_id": 28331663, "link": "https://stackoverflow.com/questions/28331663/how-can-i-allow-only-the-dictionary-keys-source-dest-and-keep-see-confi/28332187#28332187", "title": "How can I allow only the dictionary keys &quot;source&quot;, &quot;dest&quot; and &quot;keep&quot; (see: config.json below) as dictionary keys in json schema?", "body": "<p>You have some extra layers of nesting inside the definition of your snapshot object. <code>string</code>, for example, is not a property name you are using. To validate properties of the children of unknown keys in an object, you need to put your types <em>inside</em> the <code>additionalProperties</code> object. <code>items</code> and <code>uniqueItems</code> apply to arrays, not objects.</p>\n\n<p>This works:</p>\n\n<pre><code>schema = {\n  \"$schema\": \"http://json-schema.org/schema\",\n  \"required\": [\"snapshots\"],\n  \"additionalProperties\": False,\n  \"properties\":\n  {\n    \"snapshots\":\n    {\n      \"type\": \"object\",\n      \"additionalProperties\":\n      {\n        \"type\": \"object\",\n        \"properties\":\n        {\n          \"source\": {\"type\": \"string\"},\n          \"dest\": {\"type\": \"string\"},\n          \"keep\": {\"type\": \"string\"}\n        },\n        \"required\": [\"source\",\"dest\", \"keep\"],\n        \"additionalProperties\": False\n      }\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4496068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cfd1971ae91f2a53dfa1b991e9eefb2b?s=128&d=identicon&r=PG&f=1", "display_name": "fremon", "link": "https://stackoverflow.com/users/4496068/fremon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 28332187, "answer_count": 1, "score": 0, "last_activity_date": 1423086739, "creation_date": 1423084730, "question_id": 28331663, "link": "https://stackoverflow.com/questions/28331663/how-can-i-allow-only-the-dictionary-keys-source-dest-and-keep-see-confi", "title": "How can I allow only the dictionary keys &quot;source&quot;, &quot;dest&quot; and &quot;keep&quot; (see: config.json below) as dictionary keys in json schema?", "body": "<p>How can I allow only the dictionary keys \"source\", \"dest\" and \"keep\" (see: config.json below) as dictionary keys in json schema?</p>\n\n<p>Using <code>\"required\": [\"snapshots\"]</code> together with <code>\"additionalProperties\": False</code> I managed to allow only the key \"snapshots\", but doing that analogous for the dictionary value of the key \"string\" (<code>\"required\": [\"source\",\"dest\", \"keep\"]</code>)  didn't add the desired constraints to my json config. </p>\n\n<p>I tested latter, by changing e.g. the key \"source\" to \"somethingElse\" in my <code>config.json</code> file, but <code>jsonschema.validate()</code> didn't raise any errors, though I expected it to. </p>\n\n<p>schemaTest.py:</p>\n\n<pre><code>import json\nfrom jsonschema import validate\n\nschema = {\n             \"$schema\": \"http://json-schema.org/schema\",\n             \"required\": [\"snapshots\"],\n             \"additionalProperties\": False,\n             \"properties\":\n             {\n                 \"snapshots\":\n                 {\n                     \"type\": \"object\",\n                     \"properties\":\n                     {\n                         \"string\":\n                         {\n                             \"type\": \"object\",\n                             \"items\": { \"type\": \"string\" },\n                             \"uniqueItems\": True,\n                             \"properties\":\n                             {\n                                 \"source\": {\"type\": \"string\"},\n                                 \"dest\": {\"type\": \"string\"},\n                                 \"keep\": {\"type\": \"string\"}\n                             },\n                             \"required\": [\"source\",\"dest\", \"keep\"],\n                             \"additionalProperties\": False\n                         }\n                     }\n                 }\n             }\n         }\n\npath = \"/home/user/test/config.json\"\njsonConfig = json.load(open(path))\nprint(validate(jsonConfig, schema))\n</code></pre>\n\n<p>config.JSON: </p>\n\n<pre><code>{\n    \"snapshots\":\n    {\n        \"@snapshot1\":\n        {\n            \"source\": \"/mnt/subvolContainer/@snapshot1\",\n            \"dest\": \"/mnt/subvolContainer/\",\n            \"keep\": \"w=10,m=10\"\n        },\n        \"@snapshot2\":\n        {\n            \"source\": \"/mnt/subvolContainer/@snapshot2\",\n            \"dest\": \"/mnt/subvolContainer/\",\n            \"keep\": \"w=10,m=10\"\n        }\n    }\n} \n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1423084751, "post_id": 28331638, "comment_id": 45010370, "body": "Are you running on python3.x?  If not, make sure that you inherit from <code>object</code>."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 3, "creation_date": 1423084809, "post_id": 28331638, "comment_id": 45010397, "body": "Also note that you&#39;ll get yourself into an infinite loop in <code>get_x</code> since <code>get_x</code> has the line <code>return self.x</code> which will call <code>get_x</code>, which has the line <code>return self.x</code> ... You probably want to return <code>self._x</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1423085243, "post_id": 28331743, "comment_id": 45010621, "body": "Yes. <code>namedtuple</code>. Good idea."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1423085246, "post_id": 28331743, "comment_id": 45010623, "body": "@DSM -- I&#39;d rather forget that implementation entirely and used a <code>namedtuple</code> :-)"}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1423085365, "post_id": 28331743, "comment_id": 45010683, "body": "@mgilson: even better!"}], "tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": true, "score": 4, "last_activity_date": 1423085366, "last_edit_date": 1423085366, "creation_date": 1423085055, "answer_id": 28331743, "question_id": 28331638, "link": "https://stackoverflow.com/questions/28331638/how-to-use-property/28331743#28331743", "title": "How to use property()", "body": "<p>The following code works on both python2.x and python3.x:</p>\n\n<pre><code>class Point(object):\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\n    def set_x(self, x):\n        if '_x' in dir(self):\n            raise NotImplementedError(\"Cannot change x coordinate\")\n        else:\n            self._x = x\n\n    def get_x(self):\n        return self._x\n\n    x = property(get_x, set_x, None, None)\n\np = Point(2, 3)\nprint(p.x)  # 2\np.x = 6  # NotImplementedError\n</code></pre>\n\n<p>Pretty much all I did was inherit from <code>object</code> (to get it to work on python2.x) and use the name <code>Point</code> rather than <code>point</code> (which would have been a <code>NameError</code> before).</p>\n\n<p>There are other things you can do to clean it up a bit (e.g. khelwood's suggestion of just writing the getter -- or DSM's suggestion of using <code>hasattr</code> instead of <code>'_x' in dir(self)</code>).</p>\n\n<hr>\n\n<p>Note, if you really just want a type that takes an <code>x</code> and <code>y</code> arguments that you want to be immutable -- Maybe you should consider using a <code>colledctions.namedtuple</code></p>\n\n<pre><code>from collections import namedtuple\n\nPoint = namedtuple('Point', 'x,y')\np = Point(2, 3)\np.x  # 2\np.y  # 3\np.x = 6  # AttributeError: can't set attribute\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": false, "score": 5, "last_activity_date": 1423086082, "last_edit_date": 1423086082, "creation_date": 1423085179, "answer_id": 28331770, "question_id": 28331638, "link": "https://stackoverflow.com/questions/28331638/how-to-use-property/28331770#28331770", "title": "How to use property()", "body": "<p>You only need this much:</p>\n\n<pre><code>class Point:\n    def __init__(self, x, y):\n        self._x = x\n        self.y = y\n    def get_x(self):\n        return self._x\n    x = property(get_x)\n</code></pre>\n\n<p>You can set the hidden field <code>self._x</code> in your <code>init</code>, then you don't need a setter for <code>x</code> at all. And have <code>get_x</code> return <code>self._x</code> rather than <code>self.x</code> so it doesn't try and call itself.</p>\n\n<p>You can use the <code>@property</code> decorator to do this even more succinctly.</p>\n\n<pre><code>class Point:\n    def __init__(self, x, y):\n        self._x = x\n        self.y = y\n    @property\n    def x(self):\n        return self._x\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 3969279, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c59d152e01c918c10f639cf96955a55b?s=128&d=identicon&r=PG&f=1", "display_name": "Naeem Ahmed", "link": "https://stackoverflow.com/users/3969279/naeem-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 28331743, "answer_count": 2, "score": 1, "last_activity_date": 1423086082, "creation_date": 1423084631, "last_edit_date": 1423085651, "question_id": 28331638, "link": "https://stackoverflow.com/questions/28331638/how-to-use-property", "title": "How to use property()", "body": "<p>I'm having trouble on how to implement property to protect attributes.</p>\n\n<pre><code>class Point:\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\n    def set_x(self, x):\n        if '_x' in dir(self):\n            raise NotImplementedError(\"Cannot change x coordinate\")\n        else:\n            self._x = x\n\n    def get_x(self):\n        return self._x\n\n    #I beleive my mistake is here. I'm not sure if I'm implementing this correctly\n    x = property(get_x, set_x, None, None)\n</code></pre>\n\n<p>So  I want to prevent any user from changing the x-coordinate. My question is, how do I get python to redirect the user to the set_x() and get_x() methods? I've tried running this code in terminal and whenever I apply the following, the point changes.</p>\n\n<pre><code>p = point(3, 4)\np.x = 5 #x is now 5\n</code></pre>\n"}, {"tags": ["python", "email", "imaplib"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 1, "creation_date": 1423084769, "post_id": 28331596, "comment_id": 45010382, "body": "See <a href=\"https://developers.google.com/gmail/imap_extensions#special-use_extension_of_the_list_command\" rel=\"nofollow noreferrer\">Gmail IMAP extensions</a>"}], "answers": [{"tags": [], "owner": {"reputation": 888, "user_id": 1710342, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c505faf97348291154bc03f290c89326?s=128&d=identicon&r=PG", "display_name": "firecast", "link": "https://stackoverflow.com/users/1710342/firecast"}, "is_accepted": false, "score": 0, "last_activity_date": 1423638161, "last_edit_date": 1423638161, "creation_date": 1423637423, "answer_id": 28448199, "question_id": 28331596, "link": "https://stackoverflow.com/questions/28331596/how-can-i-use-imaplib-to-extract-email-headers-and-print-them-into-a-text-file/28448199#28448199", "title": "How can I use imaplib to extract email headers and print them into a text file?", "body": "<p>If you do <code>mail.list()</code> it gives you list of all IMAP/Gmail folders. Something like this</p>\n\n<pre><code>('OK', ['(\\\\HasNoChildren) \"/\" \"INBOX\"', '(\\\\HasChildren \\\\Noselect) \"/\" \"[Gmail]\"', '(\\\\All \\\\HasNoChildren) \"/\" \"[Gmail]/All Mail\"', '(\\\\Drafts \\\\HasNoChildren) \"/\" \"[Gmail]/Drafts\"', '(\\\\HasNoChildren \\\\Important) \"/\" \"[Gmail]/Important\"', '(\\\\HasNoChildren \\\\Sent) \"/\" \"[Gmail]/Sent Mail\"', '(\\\\HasNoChildren \\\\Junk) \"/\" \"[Gmail]/Spam\"', '(\\\\Flagged \\\\HasNoChildren) \"/\" \"[Gmail]/Starred\"', '(\\\\HasNoChildren \\\\Trash) \"/\" \"[Gmail]/Trash\"'])\n</code></pre>\n\n<p>So to select all the mails you can do <code>mail.select('[Gmail]/All Mail')</code>. </p>\n\n<pre><code>import imaplib\nmail = imaplib.IMAP4_SSL('imap.gmail.com')\nmail.login('myusername@gmail.com', 'mypassword')\nmail.select('[Gmail]/All Mail')\n\n#Search for all UIDs first\nresult, data = mail.uid('search', None, 'ALL')\nuids = data[0].split()\n\n#Loop through each uid to fetch headers\nfor uid in uids:\n    result, data = mail.uid('fetch',uid, '(RFC822.HEADER)')\n    print data[0][1] #Headers will be stored here which can then be saved in a text file\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4324207"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1285, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1427156983, "creation_date": 1423084516, "last_edit_date": 1427156983, "question_id": 28331596, "link": "https://stackoverflow.com/questions/28331596/how-can-i-use-imaplib-to-extract-email-headers-and-print-them-into-a-text-file", "title": "How can I use imaplib to extract email headers and print them into a text file?", "body": "<p>I am able to connect to Gmail using the following code:</p>\n\n<pre><code>import imaplib\nmail = imaplib.IMAP4_SSL('imap.gmail.com')\nmail.login('myusername@gmail.com', 'mypassword')\nmail.list()\n</code></pre>\n\n<p>I now need to select \"All Mail\" from the account.</p>\n\n<pre><code>mail.select(\"All Mail\") \n</code></pre>\n\n<p>But I do not believe this is working.</p>\n\n<p>Then I reach the very tricky part for me: I want to be able to download all headers for all emails to either a .txt file or .mbox file. I have looked around and no questions/answers provide a way to save a local copy of the headers. Any ideas?</p>\n"}, {"tags": ["python", "function", "python-2.7", "variables"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1423084485, "post_id": 28331549, "comment_id": 45010245, "body": "Change the variable name. Why name your variable the exact same thing as the function name, all it can do is lead to confusion, as you&#39;ve seen"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1423084505, "post_id": 28331549, "comment_id": 45010255, "body": "In python, functions are objects, and a function name is just a variable that happens to hold a function. If you reassign that name, it isn&#39;t holding your function any more."}, {"owner": {"reputation": 83, "user_id": 4402471, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f94f343af5f442ed3367a3d97c931bc1?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4402471/raz"}, "edited": false, "score": 0, "creation_date": 1423084534, "post_id": 28331549, "comment_id": 45010266, "body": "Indeed - I really want to know why this is, given that the function is called with parenthesis. Shouldn&#39;t Python be able to tell the difference?"}, {"owner": {"reputation": 83, "user_id": 4402471, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f94f343af5f442ed3367a3d97c931bc1?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4402471/raz"}, "edited": false, "score": 0, "creation_date": 1423084606, "post_id": 28331549, "comment_id": 45010306, "body": "Also that&#39;s the answer to this question - so post it as an answer and I can assign this as answered?"}], "answers": [{"tags": [], "owner": {"reputation": 27359, "user_id": 1516286, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/36f74e0d3318a630af9ce0e356182040?s=128&d=identicon&r=PG", "display_name": "Vor", "link": "https://stackoverflow.com/users/1516286/vor"}, "is_accepted": false, "score": 1, "last_activity_date": 1423084499, "creation_date": 1423084499, "answer_id": 28331592, "question_id": 28331549, "link": "https://stackoverflow.com/questions/28331549/why-is-python-reading-my-function-call-as-a-variable-call/28331592#28331592", "title": "Why is Python reading my function call as a variable call?", "body": "<p>Because you redeclaring the name <code>secondaction = raw_input(prompt)</code> in local scope.</p>\n\n<p>Take a look at <a href=\"https://docs.python.org/2/tutorial/classes.html#python-scopes-and-namespaces\" rel=\"nofollow\">python-scopes-and-namespaces</a></p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 4402471, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f94f343af5f442ed3367a3d97c931bc1?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4402471/raz"}, "edited": false, "score": 0, "creation_date": 1423084799, "post_id": 28331607, "comment_id": 45010393, "body": "But don&#39;t the parenthesis differentiate between the variable and the function even after &#39;secondaction&#39; has been assigned again?"}, {"owner": {"reputation": 2042, "user_id": 1591302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e263226d58575fe11998293a36a1061e?s=128&d=identicon&r=PG", "display_name": "paidhima", "link": "https://stackoverflow.com/users/1591302/paidhima"}, "edited": false, "score": 0, "creation_date": 1423085245, "post_id": 28331607, "comment_id": 45010622, "body": "No, <code>secondaction</code> is just a name that refers to an object.  Whether that object is a string, or a procedure is irrelevant.  If you define a procedure <code>secondaction</code> and then assign <code>secondaction = &#39;this and that&#39;</code>, then <code>secondaction</code> no longer refers to the procedure (assuming no namespace business)."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1423088490, "post_id": 28331607, "comment_id": 45012265, "body": "A statement like <code>simpleaction()</code> is actually two operations. First, get the object named <code>simpleaction</code>, and second, call it. Python doesn&#39;t know that the name <code>secondaction</code> refers to a function until you perform the call operation on it, at which point it fails if it&#39;s not a function. (There are actually other kinds of callable objects, but that&#39;ll do for now.) There are not two separate lists, one for functions and one for other kinds of values; a <code>def</code> statement is just a fancy <code>=</code>."}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 1, "last_activity_date": 1423084551, "creation_date": 1423084551, "answer_id": 28331607, "question_id": 28331549, "link": "https://stackoverflow.com/questions/28331549/why-is-python-reading-my-function-call-as-a-variable-call/28331607#28331607", "title": "Why is Python reading my function call as a variable call?", "body": "<p>Because you wrote:</p>\n\n<pre><code>secondaction = raw_input(prompt)\n</code></pre>\n\n<p><code>sectionaction</code> is now a string, and you can't call a string as if it were a function. A name can't have two meanings at the same time, and the most recent assignment takes precedence, so you have lost the reference to your function. Use a different name for one of them, as you have done in the code that works.</p>\n"}, {"tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": false, "score": 3, "last_activity_date": 1423084662, "creation_date": 1423084662, "answer_id": 28331645, "question_id": 28331549, "link": "https://stackoverflow.com/questions/28331549/why-is-python-reading-my-function-call-as-a-variable-call/28331645#28331645", "title": "Why is Python reading my function call as a variable call?", "body": "<p>In Python, functions are objects, and a function name is just a variable that happens to hold a function. If you reassign that name, it isn't holding your function any more.</p>\n"}, {"tags": [], "owner": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "is_accepted": true, "score": 0, "last_activity_date": 1423085175, "creation_date": 1423085175, "answer_id": 28331769, "question_id": 28331549, "link": "https://stackoverflow.com/questions/28331549/why-is-python-reading-my-function-call-as-a-variable-call/28331769#28331769", "title": "Why is Python reading my function call as a variable call?", "body": "<blockquote>\n  <p>Why can't Python read the 'secondaction()' as a function call instead of code that invokes/calls (are those the correct words?) the 'secondfunction' variable</p>\n</blockquote>\n\n<p>In Python, functions <em>are</em> variables. That is to say, functions are first-class objects, which are assigned to variables by the <code>def</code> statement; there is no separate namespace for callable functions vs assignable variables like some languages have.</p>\n\n<p>This means that when you write <code>secondaction = raw_input(prompt)</code> you are making a local variable called <code>secondaction</code> inside the function. Now when you write <code>secondaction</code> anywhere in that function body you are referring to the local variable; writing <code>secondaction()</code> with parentheses doesn't get you access to a separate function namespace, it just tries to call the value of the local variable that <code>secondaction</code> represents, and strings aren't callable so you get an error.</p>\n\n<p>It also means you can do things like:</p>\n\n<pre><code>def foo(x):\n    return x+1\n\n&gt;&gt;&gt; bar= foo\n&gt;&gt;&gt; lookup= {'thing': bar}\n&gt;&gt;&gt; lookup['thing']\n&lt;function foo&gt;\n&gt;&gt;&gt; lookup['thing'](1)\n2\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4402471, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f94f343af5f442ed3367a3d97c931bc1?s=128&d=identicon&r=PG&f=1", "display_name": "Raz", "link": "https://stackoverflow.com/users/4402471/raz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 28331769, "answer_count": 4, "score": 0, "last_activity_date": 1423086920, "creation_date": 1423084336, "last_edit_date": 1423086920, "question_id": 28331549, "link": "https://stackoverflow.com/questions/28331549/why-is-python-reading-my-function-call-as-a-variable-call", "title": "Why is Python reading my function call as a variable call?", "body": "<p>Using Python 2.7.9, this is my code:</p>\n\n<pre><code>    def secondaction():\n        secondaction = raw_input(prompt)\n\n        if secondaction == \"walk through door\" or secondaction == \"go through door\":\n        print \"Well done! You enter the Treasure Room...\"\n        treasure_room()\n\n        else:\n        print \"If you don't go through that door you will never leave this cave.\"        \n        secondaction()\n\nfirstact = raw_input(prompt)\nglobal handclenched\ndef firstaction():\nelif firstact == \"use sword\" and handclenched:\n    print \"You killed the hand giant! A door appears behind it. What will you do?\"\n    secondaction()\n</code></pre>\n\n<p>When Powershell takes me to the <code>secondaction()</code> function after I enter 'use sword' with 'handclenched' set to <code>True</code>, I enter <code>yh</code> as the <code>raw_input()</code> value and Powershell puts forward this error message:</p>\n\n<pre><code>You killed the hand giant! A door appears behind it. What will you do?\n&gt; yh\nIf you don't go through that door you will never leave this cave.\nTraceback (most recent call last):\n  File \"ex36game.py\", line 168, in &lt;module&gt;\n    right_room()\n  File \"ex36game.py\", line 166, in right_room\n    firstaction()\n  File \"ex36game.py\", line 147, in firstaction\n    firstaction()\n  File \"ex36game.py\", line 153, in firstaction\n    secondaction()\n  File \"ex36game.py\", line 136, in secondaction\n    secondaction()\nTypeError: 'str' object is not callable\n</code></pre>\n\n<p><strong>However</strong> when I change the code to:</p>\n\n<pre><code> def secondaction():\n    second_action = raw_input(prompt)\n\n    if second_action == \"walk through door\" or second_action == \"go through door\":\n    print \"Well done! You enter the Treasure Room...\"\n    treasure_room()\n\n    else:\n    print \"If you don't go through that door you will never leave this cave.\"        \n    secondaction()\n</code></pre>\n\n<p>It all works fine and I get no error message. </p>\n\n<p>Why can't Python read the <code>secondaction()</code> as a function call instead of code that invokes/calls (are those the correct words?) the <code>secondfunction</code> variable that <code>raw_input()</code> was assigned to? </p>\n"}, {"tags": ["python", "datetime", "iso8601", "rfc3339"], "comments": [{"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 2, "creation_date": 1423087450, "post_id": 28331512, "comment_id": 45011778, "body": "Have you considered stripping the last colon from the isoformatted string and then parsing back to a datetime object? It&#39;s a workaround, that can still be done somewhat elegantly."}, {"owner": {"reputation": 1998, "user_id": 4304621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L-Pn6zrI1Ug/AAAAAAAAAAI/AAAAAAAALHY/5EtbGFGVVoU/photo.jpg?sz=128", "display_name": "Alex Urcioli", "link": "https://stackoverflow.com/users/4304621/alex-urcioli"}, "reply_to_user": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 0, "creation_date": 1423095378, "post_id": 28331512, "comment_id": 45014798, "body": "@OliverW. I did consider this, in the end I ended up giving in and installing python-dateutil. I don&#39;t actually consider this a good solution either. I think those who are responsible for python need to take a closer look at what they&#39;ve done with datetime. As of now i&#39;ve given up and will just jump through the hoops like everyone else does."}, {"owner": {"reputation": 247, "user_id": 4016119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c9fb13d2546e67baf64d642b03ca27?s=128&d=identicon&r=PG&f=1", "display_name": "Darren Ringer", "link": "https://stackoverflow.com/users/4016119/darren-ringer"}, "edited": false, "score": 0, "creation_date": 1423095860, "post_id": 28331512, "comment_id": 45014935, "body": "I have always actually been particularly impressed with python for even HAVING functions like strptime and strftime, I never even took the time to notice this particular deficiency because as already stated, it can be rather elegantly avoided."}, {"owner": {"reputation": 368, "user_id": 1171706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8e893c1d664ec913b5e752dd7c60393?s=128&d=identicon&r=PG", "display_name": "notzippy", "link": "https://stackoverflow.com/users/1171706/notzippy"}, "edited": false, "score": 2, "creation_date": 1486664471, "post_id": 28331512, "comment_id": 71454417, "body": "I agree, this is ridiculous - the native platform can convert to an ISO date but it cannot convert it back, except if you use another third party module."}, {"owner": {"reputation": 528, "user_id": 3083333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aea2d9f71f42d8984a03edcd0b7b918?s=128&d=identicon&r=PG", "display_name": "garlix", "link": "https://stackoverflow.com/users/3083333/garlix"}, "edited": false, "score": 1, "creation_date": 1580909429, "post_id": 28331512, "comment_id": 106252331, "body": "Starting from Python 3.7 a new functionality has been introduced to the <code>%z</code>: <code>Changed in version 3.7: When the %z directive is provided to the strptime() method, the UTC offsets can have a colon as a separator between hours, minutes and seconds. For example, &#39;+01:00:00&#39; will be parsed as an offset of one hour. In addition, providing &#39;Z&#39; is identical to &#39;+00:00&#39;.</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "edited": false, "score": 6, "creation_date": 1423087248, "post_id": 28332149, "comment_id": 45011676, "body": "Your solution doesn&#39;t address the problem that was laid out (and is pretty much a repetition of the possible duplicate that was already linked to). In the original problem, the OP has asked for an efficient way to parse the UTC offset, which has a colon in it."}, {"owner": {"reputation": 786, "user_id": 410354, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3507b8ffe43f9e3ed46d3f295b79470a?s=128&d=identicon&r=PG", "display_name": "Luca", "link": "https://stackoverflow.com/users/410354/luca"}, "edited": false, "score": 0, "creation_date": 1511301387, "post_id": 28332149, "comment_id": 81801525, "body": "This solution is good whenever installing one extra library is somewhat inconvenient (e.g. on Google Appengine)"}], "tags": [], "owner": {"reputation": 2406, "user_id": 4089859, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fad1d93d6c12fcf85e212af3eab0de99?s=128&d=identicon&r=PG&f=1", "display_name": "user 12321", "link": "https://stackoverflow.com/users/4089859/user-12321"}, "is_accepted": false, "score": 22, "last_activity_date": 1579625627, "last_edit_date": 1579625627, "creation_date": 1423086595, "answer_id": 28332149, "question_id": 28331512, "link": "https://stackoverflow.com/questions/28331512/how-to-convert-pythons-isoformat-string-back-into-datetime-object/28332149#28332149", "title": "How to convert Python&#39;s .isoformat() string back into datetime object", "body": "<p>Try this:</p>\n\n<pre><code>&gt;&gt;&gt; def gt(dt_str):\n...     dt, _, us = dt_str.partition(\".\")\n...     dt = datetime.datetime.strptime(dt, \"%Y-%m-%dT%H:%M:%S\")\n...     us = int(us.rstrip(\"Z\"), 10)\n...     return dt + datetime.timedelta(microseconds=us)\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>&gt;&gt;&gt; gt(\"2008-08-12T12:20:30.656234Z\")\ndatetime.datetime(2008, 8, 12, 12, 20, 30, 656234)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 427, "user_id": 25285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc5ac4cd6a37881873fbcd817c5b2ed5?s=128&d=identicon&r=PG", "display_name": "Daniele Venzano", "link": "https://stackoverflow.com/users/25285/daniele-venzano"}, "edited": false, "score": 126, "creation_date": 1441962790, "post_id": 28334064, "comment_id": 52897247, "body": "Sad state of Python&#39;s datetime..."}, {"owner": {"reputation": 2243, "user_id": 1149933, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed2f32d0346075a7167e398d57778182?s=128&d=identicon&r=PG", "display_name": "Adam Barnes", "link": "https://stackoverflow.com/users/1149933/adam-barnes"}, "edited": false, "score": 2, "creation_date": 1472575202, "post_id": 28334064, "comment_id": 65802863, "body": "Worth noting that if your system&#39;s time is set to UTC, the timezone of the parsed date will be <code>tzlocal()</code>, which <code>!= tzutc</code> in comparisons, according to this link:  <a href=\"https://coderwall.com/p/dpauza/dateutil-parse-timezone\" rel=\"nofollow noreferrer\">coderwall.com/p/dpauza/dateutil-parse-timezone</a>"}, {"owner": {"reputation": 6185, "user_id": 2996101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2f6dc29829d698cb1f763a6da99bb48?s=128&d=identicon&r=PG", "display_name": "raratiru", "link": "https://stackoverflow.com/users/2996101/raratiru"}, "reply_to_user": {"reputation": 427, "user_id": 25285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc5ac4cd6a37881873fbcd817c5b2ed5?s=128&d=identicon&r=PG", "display_name": "Daniele Venzano", "link": "https://stackoverflow.com/users/25285/daniele-venzano"}, "edited": false, "score": 0, "creation_date": 1508016505, "post_id": 28334064, "comment_id": 80445065, "body": "@DanieleVenzano I don&#39;t get it. How can this string return back in a more happy way?"}, {"owner": {"reputation": 427, "user_id": 25285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc5ac4cd6a37881873fbcd817c5b2ed5?s=128&d=identicon&r=PG", "display_name": "Daniele Venzano", "link": "https://stackoverflow.com/users/25285/daniele-venzano"}, "reply_to_user": {"reputation": 6185, "user_id": 2996101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2f6dc29829d698cb1f763a6da99bb48?s=128&d=identicon&r=PG", "display_name": "raratiru", "link": "https://stackoverflow.com/users/2996101/raratiru"}, "edited": false, "score": 7, "creation_date": 1508134496, "post_id": 28334064, "comment_id": 80473057, "body": "@raratiru I was referring to the fact that you need an external module to parse a timestamp in ISO format, but you can generate one with the standard library. Inconsistencies make me sad."}, {"owner": {"reputation": 6185, "user_id": 2996101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2f6dc29829d698cb1f763a6da99bb48?s=128&d=identicon&r=PG", "display_name": "raratiru", "link": "https://stackoverflow.com/users/2996101/raratiru"}, "reply_to_user": {"reputation": 427, "user_id": 25285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc5ac4cd6a37881873fbcd817c5b2ed5?s=128&d=identicon&r=PG", "display_name": "Daniele Venzano", "link": "https://stackoverflow.com/users/25285/daniele-venzano"}, "edited": false, "score": 0, "creation_date": 1508160382, "post_id": 28334064, "comment_id": 80488357, "body": "@DanieleVenzano Oh, indeed I understand. This is a point, thank you!"}, {"owner": {"reputation": 532, "user_id": 2585410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5f26b66a7dd1203f2f28ea696b6e00dc?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2585410/konrad"}, "edited": false, "score": 13, "creation_date": 1578909968, "post_id": 28334064, "comment_id": 105579508, "body": "In python 3.7 there is a method <a href=\"https://docs.python.org/3.8/library/datetime.html#datetime.date.fromisoformat\" rel=\"nofollow noreferrer\"><code>datetime.fromisoformat()</code></a> which is exactly the reverse for <code>isoformat()</code>"}], "tags": [], "owner": {"reputation": 1998, "user_id": 4304621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L-Pn6zrI1Ug/AAAAAAAAAAI/AAAAAAAALHY/5EtbGFGVVoU/photo.jpg?sz=128", "display_name": "Alex Urcioli", "link": "https://stackoverflow.com/users/4304621/alex-urcioli"}, "is_accepted": true, "score": 79, "last_activity_date": 1611346297, "last_edit_date": 1611346297, "creation_date": 1423095553, "answer_id": 28334064, "question_id": 28331512, "link": "https://stackoverflow.com/questions/28331512/how-to-convert-pythons-isoformat-string-back-into-datetime-object/28334064#28334064", "title": "How to convert Python&#39;s .isoformat() string back into datetime object", "body": "<h2>Python 3.7+</h2>\n<p>As of Python 3.7 there is a method <code>datetime.fromisoformat()</code> which is exactly the reverse for <code>isoformat()</code>.</p>\n<h2>Older Python</h2>\n<p>If you have older Python, then this is the current best &quot;solution&quot; to this question:</p>\n<pre><code>pip install python-dateutil\n</code></pre>\n<p>Then...</p>\n<pre><code>import datetime\nimport dateutil\n\ndef getDateTimeFromISO8601String(s):\n    d = dateutil.parser.parse(s)\n    return d\n</code></pre>\n"}], "owner": {"reputation": 1998, "user_id": 4304621, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L-Pn6zrI1Ug/AAAAAAAAAAI/AAAAAAAALHY/5EtbGFGVVoU/photo.jpg?sz=128", "display_name": "Alex Urcioli", "link": "https://stackoverflow.com/users/4304621/alex-urcioli"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86386, "favorite_count": 13, "closed_date": 1423113173, "accepted_answer_id": 28334064, "answer_count": 2, "score": 98, "last_activity_date": 1611346297, "creation_date": 1423084211, "last_edit_date": 1540436882, "question_id": 28331512, "link": "https://stackoverflow.com/questions/28331512/how-to-convert-pythons-isoformat-string-back-into-datetime-object", "closed_reason": "Duplicate", "title": "How to convert Python&#39;s .isoformat() string back into datetime object", "body": "<p>So in Python 3, you can generate an ISO 8601 date with .isoformat(), but you can't convert a string created by isoformat() back into a datetime object because Python's own datetime directives don't match properly. That is, %z = 0500 instead of 05:00 (which is produced by .isoformat()).</p>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; strDate = d.isoformat()\n&gt;&gt;&gt; strDate\n'2015-02-04T20:55:08.914461+00:00'\n\n&gt;&gt;&gt; objDate = datetime.strptime(strDate,\"%Y-%m-%dT%H:%M:%S.%f%z\")\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Python34\\Lib\\_strptime.py\", line 500, in _strptime_datetime\n    tt, fraction = _strptime(data_string, format)\n  File \"C:\\Python34\\Lib\\_strptime.py\", line 337, in _strptime\n    (data_string, format))\nValueError: time data '2015-02-04T20:55:08.914461+00:00' does not match format '%Y-%m-%dT%H:%M:%S.%f%z'\n</code></pre>\n\n<p>From Python's strptime documentation: (<a href=\"https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior\" rel=\"noreferrer\">https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior</a>)</p>\n\n<blockquote>\n  <p>%z    UTC offset in the form +HHMM or -HHMM (empty string if the the\n  object is naive).    (empty), +0000, -0400, +1030</p>\n</blockquote>\n\n<p>So, in short, Python does not even adhere to its own string formatting directives.</p>\n\n<p>I know datetime is already terrible in Python, but this really goes beyond unreasonable into the land of plain stupidity.</p>\n\n<p>Tell me this isn't true.</p>\n"}, {"tags": ["python", "algorithm", "numbers", "exponential"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 7, "creation_date": 1423084020, "post_id": 28331421, "comment_id": 45010004, "body": "Efficiency is relative. Why have O(n) when you can have O(log(n))?"}, {"owner": {"reputation": 10668, "user_id": 1062250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7bed607125818c218b48621d4a37a2?s=128&d=identicon&r=PG", "display_name": "nullptr", "link": "https://stackoverflow.com/users/1062250/nullptr"}, "edited": false, "score": 0, "creation_date": 1423084152, "post_id": 28331421, "comment_id": 45010066, "body": "The complexity is O(b), not O(n) (or we must assume n=b) :)"}, {"owner": {"reputation": 6879, "user_id": 780719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZwWs8.png?s=128&g=1", "display_name": "Codie CodeMonkey", "link": "https://stackoverflow.com/users/780719/codie-codemonkey"}, "edited": false, "score": 1, "creation_date": 1423084346, "post_id": 28331421, "comment_id": 45010173, "body": "Just to point out that sequential multiplication isn&#39;t efficient:  For the special case of computing a^4, your code takes 3 multiplies.  But you could do it as <code>a2=a*a; a4 = a2*a2;</code> which takes only 2.  There&#39;s a lot written about this, see <a href=\"http://en.wikipedia.org/wiki/Exponentiation_by_squaring\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Exponentiation_by_squaring</a>."}, {"owner": {"reputation": 3140, "user_id": 1090802, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aCvOQ.jpg?s=128&g=1", "display_name": "Victor Stoddard", "link": "https://stackoverflow.com/users/1090802/victor-stoddard"}, "edited": false, "score": 0, "creation_date": 1423084484, "post_id": 28331421, "comment_id": 45010243, "body": "O(log(n)) provides an upper bound, but no theoretical lower bound exists, so the best way to answer your question is to do statistical tests using the language, operating system, etc. that your product uses."}, {"owner": {"reputation": 9484, "user_id": 1327235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92c96d4ad697e78400e312fe40b23dc?s=128&d=identicon&r=PG", "display_name": "Juan Lopes", "link": "https://stackoverflow.com/users/1327235/juan-lopes"}, "edited": false, "score": 0, "creation_date": 1423096927, "post_id": 28331421, "comment_id": 45015201, "body": "It&#39;s worth noting (but not on an answer) that in this case O(n) is considered an exponential algorithm, since the input itself is \u03a9(log n) in size. So, if you are talking about a b-bits number, the O(n) algorithm is really O(2^b)."}], "answers": [{"tags": [], "owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "is_accepted": true, "score": 2, "last_activity_date": 1423085397, "last_edit_date": 1423085397, "creation_date": 1423084828, "answer_id": 28331694, "question_id": 28331421, "link": "https://stackoverflow.com/questions/28331421/why-normal-repeated-multiplication-of-power-algorithm-is-not-efficient/28331694#28331694", "title": "Why normal repeated multiplication of power algorithm is not efficient?", "body": "<p>Some algorithms require raising numbers to very large powers. Algorithms from cryptography in particular come to mind, such as the <a href=\"http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange\" rel=\"nofollow\">Diffie-Hellman key exchange</a>.</p>\n\n<p>While your algorithm might be fine for most everyday tasks, when you're dealing with exponents that are very large, it becomes unfeasible to use, so exponentiation by squaring is used instead.</p>\n\n<blockquote>\n  <blockquote>\n    <p>why we need some algorithm like exponential by squaring or modular exponentiation for calculating the power of a number.</p>\n  </blockquote>\n</blockquote>\n\n<p>Note that exponentiation by squaring does not achieve the same thing as modular exponentiation. The first is an efficient algorithm to raise an entity to a certain integer power, while the latter is a method to compute an expression of the form <code>(a^b) modulo c</code>, where the algorithm used for exponentiation is not particularly relevant.</p>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 6, "last_activity_date": 1423085128, "creation_date": 1423085128, "answer_id": 28331761, "question_id": 28331421, "link": "https://stackoverflow.com/questions/28331421/why-normal-repeated-multiplication-of-power-algorithm-is-not-efficient/28331761#28331761", "title": "Why normal repeated multiplication of power algorithm is not efficient?", "body": "<p>In encryption, for an example, it's common to do exponentiations where the exponent can be on the order of 2<sup>100</sup> or more.  Assuming you can do 10<sup>10</sup> multiplications per second, you're talking about needing something on the order of 10<sup>20</sup> seconds.  Expressed that way, you might shrug and say \"so what?\", so let's convert that to years:  10<sup>20</sup> seconds / 3600 sec/hour / 24 hr/day / 365.25 days/year / 14E9 years/current age of universe => over 226 times the current age of the universe!  Contrast that with a logarithmic time algorithm, which will do 2<sup>100</sup> exponentiation in a few hundred operations--almost instantaneously from your perspective.</p>\n"}], "owner": {"reputation": 1308, "user_id": 2760331, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/22707690fcdc423049b32bc6ab8def40?s=128&d=identicon&r=PG&f=1", "display_name": "xtiger", "link": "https://stackoverflow.com/users/2760331/xtiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 28331694, "answer_count": 2, "score": 0, "last_activity_date": 1423085397, "creation_date": 1423083919, "last_edit_date": 1423084223, "question_id": 28331421, "link": "https://stackoverflow.com/questions/28331421/why-normal-repeated-multiplication-of-power-algorithm-is-not-efficient", "title": "Why normal repeated multiplication of power algorithm is not efficient?", "body": "<p>As the question , i dont understand why we need some algorithm like exponential by squaring or modular exponentiation for calculating the power of a number.</p>\n\n<p>For example, i have a repeated multiplication algorithm like this :</p>\n\n<pre><code>def expt_mul(a, n):\n    r = 1\n    for i in xrange(n):\n        r *= a\n    return r\n</code></pre>\n\n<p>a multiplied by itself n times , so the complexitiy is O(n), why it's not efficient?</p>\n"}, {"tags": ["python", "mongodb", "pymongo"], "comments": [{"owner": {"reputation": 10724, "user_id": 3749550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQMvF.jpg?s=128&g=1", "display_name": "wdberkeley", "link": "https://stackoverflow.com/users/3749550/wdberkeley"}, "edited": false, "score": 0, "creation_date": 1423149231, "post_id": 28331408, "comment_id": 45039084, "body": "Do you mean you want to use a field name stored in a variable in your code, e.g. &quot;find all documents where the field whose name is stored in the value of the variable <code>fieldname</code> is <code>22</code>&quot;? Or you want to search across multiple field names in MongoDB at once, e.g. &quot;find all documents where a field whose name starts with <code>&#39;duck_&#39;</code> has the value <code>44</code>&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 0, "last_activity_date": 1423085124, "creation_date": 1423085124, "answer_id": 28331760, "question_id": 28331408, "link": "https://stackoverflow.com/questions/28331408/search-for-a-dynamic-field-in-a-mongodb-collection/28331760#28331760", "title": "Search for a dynamic field in a mongodb collection", "body": "<p>Just use the variable in place of the dictionary key:</p>\n\n<pre><code>name = 'field_name'\ndb.collection.find({name : \"John\"})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3546, "user_id": 949346, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/785d56763638491713ffc05c2cdebea0?s=128&d=identicon&r=PG", "display_name": "p1100i", "link": "https://stackoverflow.com/users/949346/p1100i"}, "edited": false, "score": 0, "creation_date": 1487336502, "post_id": 42298206, "comment_id": 71751750, "body": "I don&#39;t think this is an answer on the question of OP. Try to focus on his need, which would be IMHO creating a dict dynamically and then execute <code>db.collection.find(dinamically_built_dict)</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 7580822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c38a84e39630c6980535d3ad675af78?s=128&d=identicon&r=PG", "display_name": "Bishnu", "link": "https://stackoverflow.com/users/7580822/bishnu"}, "is_accepted": false, "score": 0, "last_activity_date": 1487335143, "creation_date": 1487335143, "answer_id": 42298206, "question_id": 28331408, "link": "https://stackoverflow.com/questions/28331408/search-for-a-dynamic-field-in-a-mongodb-collection/42298206#42298206", "title": "Search for a dynamic field in a mongodb collection", "body": "<p>Problem happens when you try without knowing data type. So in order to handle this , i used the following:</p>\n\n<pre><code>def multi_row_single_field_update(self, crieteriafldnm, crieteriafldtyp, updtfldnm, updtfldval, updtfldtyp):\n    try:\n        criteria = raw_input('\\nEnter ' + crieteriafldnm + ' to update\\n')\n        if crieteriafldtyp == 'int':\n            count = self.my_connect.find({str(crieteriafldnm): int(criteria)}).count()\n        else:\n            count = self.my_connect.find({str(crieteriafldnm): str(criteria)}).count()\n        updt_criteria = int(criteria) if updtfldtyp == 'int' else str(criteria)\n        self.my_connect.update(\n            {\"$atomic\": 1},\n            {str(crieteriafldnm): updt_criteria},\n            {\"$set\": {str(updtfldnm): str(updtfldval)}},\n            upsert=False, multi=True\n               )\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 3799658, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f874ba1014edd2478671f2b47d431943?s=128&d=identicon&r=PG&f=1", "display_name": "user3799658", "link": "https://stackoverflow.com/users/3799658/user3799658"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 859, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1487335143, "creation_date": 1423083865, "last_edit_date": 1423085139, "question_id": 28331408, "link": "https://stackoverflow.com/questions/28331408/search-for-a-dynamic-field-in-a-mongodb-collection", "title": "Search for a dynamic field in a mongodb collection", "body": "<p>If I were to search for a particular field in a mongodb collection my command would look something like this :  </p>\n\n<pre><code>db.collection.find({ name : \"John\"})\n</code></pre>\n\n<p>If I want to make the field name dynamic, what would the command be?  </p>\n\n<p>Example:  </p>\n\n<pre><code>db.collection.find({ &lt;Dyanmic field variable&gt; : &lt;Value&gt;})  \n</code></pre>\n\n<p>Or is there an alternative to achieve this function?</p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 0, "creation_date": 1423083789, "post_id": 28331224, "comment_id": 45009882, "body": "You are right. BeautifulSoup is used specifically to handle html and xml files. If you just want plain text, that should be located in the variable you called <code>page</code>. Try <code>print page</code> to confirm the text you want is there."}, {"owner": {"reputation": 53, "user_id": 3713411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6be2d14b862489d9cec04608c728da15?s=128&d=identicon&r=PG&f=1", "display_name": "MarcusAerlius", "link": "https://stackoverflow.com/users/3713411/marcusaerlius"}, "reply_to_user": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 0, "creation_date": 1423085046, "post_id": 28331224, "comment_id": 45010521, "body": "Thanks a lot @eigenchris! Yes the page is there, but since I want to extract some tables from that kind of code, I need to get it somehow into bs. do you have any recommendations on that?"}, {"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 0, "creation_date": 1423085784, "post_id": 28331224, "comment_id": 45010907, "body": "You could delete everything that isn&#39;t between the <code>&lt;html&gt;</code> and <code>&lt;&#47;html&gt;</code> tags. From there you would have a valid html file you could parse with BeautifulSoup."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 3713411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6be2d14b862489d9cec04608c728da15?s=128&d=identicon&r=PG&f=1", "display_name": "MarcusAerlius", "link": "https://stackoverflow.com/users/3713411/marcusaerlius"}, "edited": false, "score": 0, "creation_date": 1423085153, "post_id": 28331478, "comment_id": 45010575, "body": "Thanks a lot! But can you please be a little more specific what do you mean by feeding the html section? how can I do that? sorry for my ignorance!"}, {"owner": {"reputation": 513, "user_id": 3260044, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001349446661/picture?type=large", "display_name": "fallaciousreasoning", "link": "https://stackoverflow.com/users/3260044/fallaciousreasoning"}, "reply_to_user": {"reputation": 53, "user_id": 3713411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6be2d14b862489d9cec04608c728da15?s=128&d=identicon&r=PG&f=1", "display_name": "MarcusAerlius", "link": "https://stackoverflow.com/users/3713411/marcusaerlius"}, "edited": false, "score": 0, "creation_date": 1423086504, "post_id": 28331478, "comment_id": 45011291, "body": "Do some parsing on the string before you pass it into BeatifulSoup. For example, instead of just passing the whole text document, just give it section from <code>&lt;DOCUMENT&gt;</code> to <code>&lt;&#47;DOCUMENT&gt;</code>"}, {"owner": {"reputation": 513, "user_id": 3260044, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001349446661/picture?type=large", "display_name": "fallaciousreasoning", "link": "https://stackoverflow.com/users/3260044/fallaciousreasoning"}, "reply_to_user": {"reputation": 53, "user_id": 3713411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6be2d14b862489d9cec04608c728da15?s=128&d=identicon&r=PG&f=1", "display_name": "MarcusAerlius", "link": "https://stackoverflow.com/users/3713411/marcusaerlius"}, "edited": false, "score": 0, "creation_date": 1423086532, "post_id": 28331478, "comment_id": 45011303, "body": "Try skipping the first few lines of text"}, {"owner": {"reputation": 513, "user_id": 3260044, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001349446661/picture?type=large", "display_name": "fallaciousreasoning", "link": "https://stackoverflow.com/users/3260044/fallaciousreasoning"}, "reply_to_user": {"reputation": 53, "user_id": 3713411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6be2d14b862489d9cec04608c728da15?s=128&d=identicon&r=PG&f=1", "display_name": "MarcusAerlius", "link": "https://stackoverflow.com/users/3713411/marcusaerlius"}, "edited": false, "score": 0, "creation_date": 1423086820, "post_id": 28331478, "comment_id": 45011450, "body": "What you&#39;re really trying to do is get the html section out of the text document (as at the moment, BeautifulSoup has no idea what to do with it)"}, {"owner": {"reputation": 6248, "user_id": 8253662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FuMpZ.jpg?s=128&g=1", "display_name": "Mahesh Jamdade", "link": "https://stackoverflow.com/users/8253662/mahesh-jamdade"}, "edited": false, "score": 0, "creation_date": 1552536157, "post_id": 28331478, "comment_id": 97049511, "body": "an example would have been useful"}], "tags": [], "owner": {"reputation": 513, "user_id": 3260044, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100001349446661/picture?type=large", "display_name": "fallaciousreasoning", "link": "https://stackoverflow.com/users/3260044/fallaciousreasoning"}, "is_accepted": true, "score": 1, "last_activity_date": 1423084103, "creation_date": 1423084103, "answer_id": 28331478, "question_id": 28331224, "link": "https://stackoverflow.com/questions/28331224/reading-a-txt-file-in-url-into-beautifulsoup/28331478#28331478", "title": "Reading a txt file in url into BeautifulSOUP", "body": "<p>You could try just feeding the HTML section of the text file (from the  tag) into Beautiful soup, I imagine its breaking because the start of the text file doesn't contain any HTML. </p>\n"}], "owner": {"reputation": 53, "user_id": 3713411, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6be2d14b862489d9cec04608c728da15?s=128&d=identicon&r=PG&f=1", "display_name": "MarcusAerlius", "link": "https://stackoverflow.com/users/3713411/marcusaerlius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1392, "favorite_count": 0, "accepted_answer_id": 28331478, "answer_count": 1, "score": 1, "last_activity_date": 1423084103, "creation_date": 1423083225, "last_edit_date": 1423083532, "question_id": 28331224, "link": "https://stackoverflow.com/questions/28331224/reading-a-txt-file-in-url-into-beautifulsoup", "title": "Reading a txt file in url into BeautifulSOUP", "body": "<p>I have some url address that is to a txt file, which contians html code. This is a sample link: </p>\n\n<p><a href=\"http://www.sec.gov/Archives/edgar/data/70858/000119312507058027/0001193125-07-058027.txt\" rel=\"nofollow\">http://www.sec.gov/Archives/edgar/data/70858/000119312507058027/0001193125-07-058027.txt</a></p>\n\n<p>I want to read this html code with BeautifulSoup with such a code:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport urllib2 \n\nurl =    \"http://www.sec.gov/Archives/edgar/data/70858/000119312507058027/0001193125-07-058027.txt\"\npage = urllib2.urlopen(url)\nsoup = BeautifulSoup(page.read())\nprint (soup.prettify())\n</code></pre>\n\n<p>However, I got a lot of errors like:</p>\n\n<p><code>File \"C:/Users/.../aa.py\", line 7, in &lt;module&gt; print (soup.prettify())\n       File \"build\\bdist.win32\\egg\\bs4\\element.py\", line 1097, in prettify\n       return self.decode(True, formatter=formatter)</code></p>\n\n<p>I am suspicous that it happens because the url is to a txt file not a html. Am i right? If so, can someone let me know what is the solution here?</p>\n"}, {"tags": ["python", "html", "google-app-engine"], "comments": [{"owner": {"reputation": 38473, "user_id": 821657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDRGg.png?s=128&g=1", "display_name": "Andrei Volgin", "link": "https://stackoverflow.com/users/821657/andrei-volgin"}, "edited": false, "score": 0, "creation_date": 1423083880, "post_id": 28331169, "comment_id": 45009933, "body": "Yes, this is possible. Where do you see a problem?"}, {"owner": {"reputation": 55, "user_id": 4396191, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f36f274eb86d2a3a9fa4ee9223960fc2?s=128&d=identicon&r=PG&f=1", "display_name": "St3114", "link": "https://stackoverflow.com/users/4396191/st3114"}, "reply_to_user": {"reputation": 38473, "user_id": 821657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDRGg.png?s=128&g=1", "display_name": "Andrei Volgin", "link": "https://stackoverflow.com/users/821657/andrei-volgin"}, "edited": false, "score": 0, "creation_date": 1423092433, "post_id": 28331169, "comment_id": 45013929, "body": "@AndreiVolgin I guess  app.yaml should be dynamicaly updated but I dont know how to do it"}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 4224195, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uesLi2PmA8w/AAAAAAAAAAI/AAAAAAAAAAg/ytpMMks7uMo/photo.jpg?sz=128", "display_name": "DT Rush", "link": "https://stackoverflow.com/users/4224195/dt-rush"}, "is_accepted": false, "score": 1, "last_activity_date": 1423083881, "creation_date": 1423083881, "answer_id": 28331410, "question_id": 28331169, "link": "https://stackoverflow.com/questions/28331169/how-can-i-create-random-urls-in-gae/28331410#28331410", "title": "How can I create random urls in gae?", "body": "<p>You should define a handler that is active on a wildcard or a regular expression that matches the format you chose for the random strings. </p>\n\n<p>When you get a request there, have the handler check the specific route that was used, and validate it against (as you correctly noted) the Datastore, Cloud SQL, your own Redis server, etc., which stores resources or references to resources that should be accessible from that special route. </p>\n\n<p>You would then have the handler serve the resource, or at that point, if you want/need, validate authentication somehow (hopefully OAuth of their google account)</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 4396191, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f36f274eb86d2a3a9fa4ee9223960fc2?s=128&d=identicon&r=PG&f=1", "display_name": "St3114", "link": "https://stackoverflow.com/users/4396191/st3114"}, "edited": false, "score": 0, "creation_date": 1423093541, "post_id": 28333652, "comment_id": 45014244, "body": "is it possible to read this - url : from datastore?  if it is not I guess I cant achieve my goal because I want only one url can be  accessible, I mean when you can visit  myApp.appspot.com/movie/1234, the second myApp.appspot.com/movie/1234.mp4 cant be visited.One at a time."}, {"owner": {"reputation": 38473, "user_id": 821657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDRGg.png?s=128&g=1", "display_name": "Andrei Volgin", "link": "https://stackoverflow.com/users/821657/andrei-volgin"}, "reply_to_user": {"reputation": 55, "user_id": 4396191, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f36f274eb86d2a3a9fa4ee9223960fc2?s=128&d=identicon&r=PG&f=1", "display_name": "St3114", "link": "https://stackoverflow.com/users/4396191/st3114"}, "edited": false, "score": 0, "creation_date": 1423099435, "post_id": 28333652, "comment_id": 45015835, "body": "You don&#39;t need to touch app.yaml to achieve that. Take a call to your handler, check if the code/url is a valid one, show the content if it is or redirect/respond with an error code if it&#39;s not. This is how all websites work."}, {"owner": {"reputation": 55, "user_id": 4396191, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f36f274eb86d2a3a9fa4ee9223960fc2?s=128&d=identicon&r=PG&f=1", "display_name": "St3114", "link": "https://stackoverflow.com/users/4396191/st3114"}, "edited": false, "score": 0, "creation_date": 1423102951, "post_id": 28333652, "comment_id": 45016572, "body": "Thanks a lot. I will get the accessed url with self.request.path but cant get webapp2.RequestHandler work with the test.py on my question. is there any chance you to check this test.py?"}, {"owner": {"reputation": 38473, "user_id": 821657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDRGg.png?s=128&g=1", "display_name": "Andrei Volgin", "link": "https://stackoverflow.com/users/821657/andrei-volgin"}, "reply_to_user": {"reputation": 55, "user_id": 4396191, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f36f274eb86d2a3a9fa4ee9223960fc2?s=128&d=identicon&r=PG&f=1", "display_name": "St3114", "link": "https://stackoverflow.com/users/4396191/st3114"}, "edited": false, "score": 0, "creation_date": 1423104978, "post_id": 28333652, "comment_id": 45017077, "body": "You can post your code in a new question if you have a problem there."}, {"owner": {"reputation": 55, "user_id": 4396191, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f36f274eb86d2a3a9fa4ee9223960fc2?s=128&d=identicon&r=PG&f=1", "display_name": "St3114", "link": "https://stackoverflow.com/users/4396191/st3114"}, "edited": false, "score": 0, "creation_date": 1423106486, "post_id": 28333652, "comment_id": 45017439, "body": "every question is a risk for me to get banned :) my guess is it is not working because we cant define webapp2.WSGIApplication more than once. (helloword.py and test.py) so I need to add routes to helloword.py. thanks again"}], "tags": [], "owner": {"reputation": 38473, "user_id": 821657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDRGg.png?s=128&g=1", "display_name": "Andrei Volgin", "link": "https://stackoverflow.com/users/821657/andrei-volgin"}, "is_accepted": true, "score": 1, "last_activity_date": 1423093021, "creation_date": 1423093021, "answer_id": 28333652, "question_id": 28331169, "link": "https://stackoverflow.com/questions/28331169/how-can-i-create-random-urls-in-gae/28333652#28333652", "title": "How can I create random urls in gae?", "body": "<p>app.yaml lists \"rules\" that a server uses to match handlers. These rules may use wildcards and regular expressions. For example, you can add the following rule:</p>\n\n<pre><code>- url: /movie/.*\n</code></pre>\n\n<p>A server would interpret this rule to send all matching URLs to a file or a script that you specify. For example, the following URLs would match this rule:</p>\n\n<pre><code>myApp.appspot.com/movie/1234\nmyApp.appspot.com/movie/1234.mp4\n</code></pre>\n\n<p>You can use regular expressions to be as specific as you need in your matching rules.</p>\n"}], "owner": {"reputation": 55, "user_id": 4396191, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f36f274eb86d2a3a9fa4ee9223960fc2?s=128&d=identicon&r=PG&f=1", "display_name": "St3114", "link": "https://stackoverflow.com/users/4396191/st3114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 28333652, "answer_count": 2, "score": 0, "last_activity_date": 1423102734, "creation_date": 1423083036, "last_edit_date": 1423102734, "question_id": 28331169, "link": "https://stackoverflow.com/questions/28331169/how-can-i-create-random-urls-in-gae", "title": "How can I create random urls in gae?", "body": "<p>I want to create random urls. i mean , let first url be myapp.appspot.com/868DF7.html \nit ll be connected to test.py in app.yaml. when user opens this url, test.py ll generate new url. I ll save the next url at datastore. and the previous url will not be accessible. I guess the word is \"disposable\".</p>\n\n<p>Is that possible to create dynamic url like this?</p>\n\n<p>my current test.py : it gets previous string from datastore and creates next url and saves it.</p>\n\n<pre><code>    import webapp2\n    from google.appengine.ext import db\n    from google.appengine.api import users\n\n    import jinja2\n    import os\n    import uuid\n\n    class Saved(db.Model):\n        urls=db.StringProperty()\n        date = db.DateTimeProperty(auto_now_add=True)\n\n    def _rKey(r_name=None):\n        return db.Key.from_path(\"r\", r_name or 'default_r')\n    class MainPage(webapp2.RequestHandler):\n        def get(self):\n            r_name=\"none\"\n            saveds_query = Saved.all().ancestor(\n                _rKey(r_name)).order('-date')\n            urls = saveds_query.fetch(10)\n            q=db.Query(Saved).order('-date')\n            print \"previous url:\", q[0].urls\n            print \"&lt;br&gt;\"\n\n\n            save = Saved(parent=_rKey(r_name))\n\n\n            save.urls=str(uuid.uuid4().get_hex().upper()[0:6])+\".html\"\n            print \"next url:\",save.urls\n            save.put()    \n\n     APP = webapp2.WSGIApplication([\n        ('/give/', MainPage),    \n     ], debug=True)\n</code></pre>\n\n<p>and app.yaml</p>\n\n<pre><code>handlers:\n- url: /favicon\\.ico\n  static_files: favicon.ico\n  upload: favicon\\.ico\n\n- url: /.*\n  script: helloworld.APP\n\nlibraries:\n- name: webapp2\n  version: \"2.5.2\"\n- name: jinja2\n  version: \"2.6\"\n</code></pre>\n\n<p>rest of the files are pretty much the same guestbook example of google.\n<a href=\"https://github.com/GoogleCloudPlatform/appengine-guestbook-python/blob/master/guestbook.py\" rel=\"nofollow\">https://github.com/GoogleCloudPlatform/appengine-guestbook-python/blob/master/guestbook.py</a></p>\n"}, {"tags": ["python", "django", "python-2.7", "path", "python-module"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1423083091, "post_id": 28331114, "comment_id": 45009522, "body": "Sorry, I guess this is impossible to diagnose without access to your particular environment. I run the same OS without issues. I would look for a module name clash (perhaps your code is overriding some important built-in) but if the code runs OK at another host, may be you should just <a href=\"https://www.youtube.com/watch?v=aCbfMkh940Q\" rel=\"nofollow noreferrer\">nuke it from orbit</a> (reinstall)."}, {"owner": {"reputation": 23, "user_id": 4530308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3dc01b5176c07b847b33e4dfa5d30a?s=128&d=identicon&r=PG&f=1", "display_name": "MRobW2", "link": "https://stackoverflow.com/users/4530308/mrobw2"}, "reply_to_user": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1423083653, "post_id": 28331114, "comment_id": 45009816, "body": "Yeah I was trying to avoid a full reinstall but the more I attack it the more it seems like that&#39;s the only option.  Either way I&#39;ve tried running code from my terminal and from sublime (basic script editor) neither work."}], "answers": [{"tags": [], "owner": {"reputation": 1433, "user_id": 1649165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aefc6b305254c6e804484ac6ab8e5924?s=128&d=identicon&r=PG", "display_name": "Jessamyn Smith", "link": "https://stackoverflow.com/users/1649165/jessamyn-smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1423083649, "creation_date": 1423083649, "answer_id": 28331348, "question_id": 28331114, "link": "https://stackoverflow.com/questions/28331114/module-importing-in-python-2-7/28331348#28331348", "title": "Module importing in python 2.7", "body": "<p>The standard Python solution to installing packages is to <a href=\"https://pip.pypa.io/en/latest/installing.html\" rel=\"nofollow\">install pip</a> (package manager) and <a href=\"https://virtualenv.pypa.io/en/latest/\" rel=\"nofollow\">virtualenv</a>, then make a virtualenv for each project and install your packages in the virtualenv. The documentation for those projects is quite good and should be able to get you started.</p>\n"}], "owner": {"reputation": 23, "user_id": 4530308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3dc01b5176c07b847b33e4dfa5d30a?s=128&d=identicon&r=PG&f=1", "display_name": "MRobW2", "link": "https://stackoverflow.com/users/4530308/mrobw2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 28331348, "answer_count": 1, "score": 0, "last_activity_date": 1423083649, "creation_date": 1423082856, "question_id": 28331114, "link": "https://stackoverflow.com/questions/28331114/module-importing-in-python-2-7", "title": "Module importing in python 2.7", "body": "<p>this is my first post and I've been working with python for about a month now.  </p>\n\n<p>Anyway I've been trying to import downloaded modules into python 2.7, such as django and mechanize, and I keep getting the same error telling me there is no such module. I downloaded both with pip and from I understand should be in the correct directories.  A while ago I decided to simply copy and paste the django folder into the same folder I was saving my programs into, and that took care of the issue.  That seems a bit messy though, having to save all of my modules into various folders.  So I looked around stackoverflow (and elseware) and pasted that same folder into a PYTHONPATH directory and that didn't solve the problem either.  I apologize for the long question but I've been at it for a while now and tried a few different fixes.  Any feedback would be greatly appreciated, thank you very much.</p>\n\n<p>On a side note, default modules work fine, such as: math and os. Side note, I'm running kubuntu 14.04.</p>\n\n<p>Thanks again.</p>\n"}, {"tags": ["python", "postgresql", "flask", "sqlalchemy", "hstore"], "answers": [{"tags": [], "owner": {"reputation": 5174, "user_id": 1819983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/754e81f082c3d913202fc747cbde860a?s=128&d=identicon&r=PG", "display_name": "Rachel Sanders", "link": "https://stackoverflow.com/users/1819983/rachel-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1423098235, "creation_date": 1423098235, "answer_id": 28334508, "question_id": 28331046, "link": "https://stackoverflow.com/questions/28331046/why-does-sqlalchemy-initialize-hstore-field-as-null/28334508#28334508", "title": "Why does SQLAlchemy initialize hstore field as null?", "body": "<p>There's probably an easier way to do this, but one way to is to create a custom column type that translates values from the database and back. </p>\n\n<p>Here's an example from the docs that serializes/deserializes JSON in a VARCHAR field:</p>\n\n<p><a href=\"http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html#establishing-mutability-on-scalar-column-values\" rel=\"nofollow\">http://docs.sqlalchemy.org/en/latest/orm/extensions/mutable.html#establishing-mutability-on-scalar-column-values</a></p>\n\n<pre><code>from sqlalchemy.types import TypeDecorator, VARCHAR\nimport json\n\nclass JSONEncodedDict(TypeDecorator):\n    \"Represents an immutable structure as a json-encoded string.\"\n\n    impl = VARCHAR\n\n    def process_bind_param(self, value, dialect):\n        if value is not None:\n            value = json.dumps(value)\n        return value\n\n    def process_result_value(self, value, dialect):\n        if value is not None:\n            value = json.loads(value)\n        return value\n</code></pre>\n\n<p>In your case, you could check if <code>value</code> is None and return an empty <code>dict()</code> instead, and when writing to the db you'd check if <code>value</code> is an empty dict and write <code>None</code> instead. </p>\n\n<p>If you go this route, look at the mutability stuff a little further down so changes to the JSONEncodedDict get noticed and flushed. It looks like you already know about it, but just for anybody else reading this. </p>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 5, "last_activity_date": 1423111088, "creation_date": 1423111088, "answer_id": 28336324, "question_id": 28331046, "link": "https://stackoverflow.com/questions/28331046/why-does-sqlalchemy-initialize-hstore-field-as-null/28336324#28336324", "title": "Why does SQLAlchemy initialize hstore field as null?", "body": "<p>There are two problems here.  First, <code>default</code> should be a Python dict, not a repeat of the column type.  Second, <code>default</code> is not used when initializing new instances, only when committing instances with no value set for that column.  So you need to specifically add a default during initialization also.</p>\n\n<pre><code>from sqlalchemy.dialects.postgresql import HSTORE\nfrom sqlalchemy.ext.mutable import MutableDict\n\nclass Item(db.Model):\n    misc = db.Column(MutableDict.as_mutable(HSTORE), nullable=False, default={}, server_default='')\n\n    def __init__(self, **kwargs):\n        kwargs.setdefault('misc', {})\n        super(Item, self).__init__(**kwargs)\n</code></pre>\n\n\n\n<pre><code>item = Item()\nitem.misc['foo'] = 'bar'\n</code></pre>\n\n<hr>\n\n<p><sub>On that note, there's no point in setting both <code>default</code> and <code>server_default</code> if you're only ever going to use this from Python.  There's no harm either, though.</sub></p>\n\n<hr>\n\n<p><sub>I assume that you know you want an HSTORE in this specific case, but I'll also point out that PostgreSQL has the more general JSON and JSONB types now.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 5101271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fy5Mt.png?s=128&g=1", "display_name": "Mike Lazko", "link": "https://stackoverflow.com/users/5101271/mike-lazko"}, "is_accepted": false, "score": 1, "last_activity_date": 1587629859, "creation_date": 1587629859, "answer_id": 61382465, "question_id": 28331046, "link": "https://stackoverflow.com/questions/28331046/why-does-sqlalchemy-initialize-hstore-field-as-null/61382465#61382465", "title": "Why does SQLAlchemy initialize hstore field as null?", "body": "<p>I want to note that correct way to define default value for mutable struct </p>\n\n<pre><code>misc = db.Column(MutableDict.as_mutable(HSTORE), nullable=False, default=dict)\n</code></pre>\n\n<p>it should be callable and works like factory or <code>lambda: dict()</code></p>\n\n<p>Otherwise, it can cause unexpected effects.</p>\n"}], "owner": {"reputation": 40765, "user_id": 140827, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48b95af4d9e286f3baf107f8188dd186?s=128&d=identicon&r=PG", "display_name": "erjiang", "link": "https://stackoverflow.com/users/140827/erjiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1156, "favorite_count": 0, "accepted_answer_id": 28336324, "answer_count": 3, "score": 4, "last_activity_date": 1587629859, "creation_date": 1423082548, "last_edit_date": 1423111506, "question_id": 28331046, "link": "https://stackoverflow.com/questions/28331046/why-does-sqlalchemy-initialize-hstore-field-as-null", "title": "Why does SQLAlchemy initialize hstore field as null?", "body": "<p>I am using Flask-SQLAlchemy and have a model with the following column:</p>\n\n<pre><code>class Item(Model):\n    misc = Column(MutableDict.as_mutable(postgresql.HSTORE), nullable=False,\n                  server_default='',\n                  default=MutableDict.as_mutable(postgresql.HSTORE))\n</code></pre>\n\n<p>When I try to assign fields to the model object, it seems that the <code>misc</code> column is None, rather than an empty dict:</p>\n\n<pre><code>my_item = Item()\nmy_item.misc[\"foo\"] = \"bar\"\n# TypeError: 'NoneType' object does not support item assignment\n</code></pre>\n\n<p>How can I configure the model so that new objects get initialized with an empty dictionary?</p>\n"}, {"tags": ["python", "string", "append"], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 1625464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab342aa3e05f15f3d5ec0fa770dbc13?s=128&d=identicon&r=PG", "display_name": "wrigby", "link": "https://stackoverflow.com/users/1625464/wrigby"}, "is_accepted": false, "score": 0, "last_activity_date": 1423082795, "creation_date": 1423082795, "answer_id": 28331103, "question_id": 28331040, "link": "https://stackoverflow.com/questions/28331040/how-to-append-a-string-at-the-end-of-each-line-of-a-string-in-python/28331103#28331103", "title": "How to append a string at the end of each line of a string in python?", "body": "<p>How about this:</p>\n\n<pre><code>line_ending = '\\n'\nto_append = '&lt;br&gt;&lt;/br&gt;'\n\n# Strip the trailing new line first\ncontents = contents.rstrip([line_ending])\n\n# Now do a replacement on newlines, replacing them with the sequence '&lt;br&gt;&lt;/br&gt;\\n'\ncontents = contents.replace(line_ending, to_append + line_ending)\n\n# Finally, add a trailing newline back onto the string\ncontents += line_ending\n</code></pre>\n\n<p>You can do this all in one line:</p>\n\n<pre><code>contents = contents.rstrip([line_ending]).replace(line_ending, to_append + line_ending) + line_ending\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16325, "user_id": 1071311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a12e5cc9a7d9b52960f14c7560de773e?s=128&d=identicon&r=PG", "display_name": "Carsten", "link": "https://stackoverflow.com/users/1071311/carsten"}, "is_accepted": false, "score": 1, "last_activity_date": 1423082894, "creation_date": 1423082894, "answer_id": 28331128, "question_id": 28331040, "link": "https://stackoverflow.com/questions/28331040/how-to-append-a-string-at-the-end-of-each-line-of-a-string-in-python/28331128#28331128", "title": "How to append a string at the end of each line of a string in python?", "body": "<p><em>\"append[ing] a string at the end of each line\"</em> is equivalent to replacing each newline with string + newline. Sooo:</p>\n\n<pre><code>s = \"Usage...\\nConcatenate...\\n...\\nFor complete...\"\nt = s.replace(\"\\n\", \"&lt;br&gt;&lt;br&gt;\\n\")\nprint t\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4694, "user_id": 4367228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bdee64eedba21c13b7017601c566d05?s=128&d=identicon&r=PG&f=1", "display_name": "MrAlexBailey", "link": "https://stackoverflow.com/users/4367228/mralexbailey"}, "is_accepted": false, "score": 0, "last_activity_date": 1423082919, "creation_date": 1423082919, "answer_id": 28331139, "question_id": 28331040, "link": "https://stackoverflow.com/questions/28331040/how-to-append-a-string-at-the-end-of-each-line-of-a-string-in-python/28331139#28331139", "title": "How to append a string at the end of each line of a string in python?", "body": "<p>If you want to also keep the <code>'\\n'</code>:    </p>\n\n<pre><code>&gt;&gt;&gt; '&lt;br&gt;&lt;/br&gt;\\n'.join(output.split('\\n'))\n\nUsage: cat [OPTION]... [FILE]...&lt;br&gt;&lt;/br&gt;\nConcatenate FILE(s), or standard input, to standard output.&lt;br&gt;&lt;/br&gt;\n...&lt;br&gt;&lt;/br&gt;\nFor complete documentation, run: info coreutils 'cat invocation'\n</code></pre>\n\n<p>Otherwise just do <code>'&lt;br&gt;&lt;/br&gt;'.join()</code></p>\n"}], "owner": {"reputation": 1099, "user_id": 2605155, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/83f6805262f0dcc117814487c5b2d1c4?s=128&d=identicon&r=PG", "display_name": "adrelanos", "link": "https://stackoverflow.com/users/2605155/adrelanos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1393, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1423082919, "creation_date": 1423082527, "question_id": 28331040, "link": "https://stackoverflow.com/questions/28331040/how-to-append-a-string-at-the-end-of-each-line-of-a-string-in-python", "title": "How to append a string at the end of each line of a string in python?", "body": "<p>Let's say, one has stored the stdout of a shell command in a variable. Example for demonstration:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport subprocess\n\nproc = subprocess.Popen(['cat', '--help'], stdout=subprocess.PIPE)\noutput = proc.stdout.read()\n</code></pre>\n\n<p>Variable <code>output</code> now holds content similar to this:</p>\n\n<pre><code>Usage: cat [OPTION]... [FILE]...\nConcatenate FILE(s), or standard input, to standard output.\n...\nFor complete documentation, run: info coreutils 'cat invocation'\n</code></pre>\n\n<p>How could one append something to each line besides the last line? So it looks like the following?</p>\n\n<pre><code>Usage: cat [OPTION]... [FILE]...&lt;br&gt;&lt;/br&gt;\nConcatenate FILE(s), or standard input, to standard output.&lt;br&gt;&lt;/br&gt;\n...&lt;br&gt;&lt;/br&gt;\nFor complete documentation, run: info coreutils 'cat invocation'\n</code></pre>\n\n<p>It would be possible to count the line numbers, to iterate through it, construct a new string and omit appending for the last line... But... Is there a simpler and more efficient way?</p>\n"}, {"tags": ["python", "scipy", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 1, "creation_date": 1460482600, "post_id": 28487390, "comment_id": 60759656, "body": "(I must&#39;ve missed this answer a year ago, sorry) I commented on your other answer presenting this code, I&#39;ll do it here too for completeness. Shouldn&#39;t the <code>sigma_array</code> <i>divide</i> the exponential rather than multiplying it, i.e.: <code>(1.&#47;sigma_array) * np.exp(- (val - data_array) *...</code>?"}, {"owner": {"reputation": 488, "user_id": 4496358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63cad54a2d35bf0f7aef50a647b7426?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4496358/tom"}, "reply_to_user": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 1, "creation_date": 1460580503, "post_id": 28487390, "comment_id": 60815196, "body": "As in the other answer, yes; both have been fixed. Thanks for catching that."}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1460663395, "post_id": 28487390, "comment_id": 60860568, "body": "How do you store data in <code>data_array</code> and <code>sigma_array</code>? I&#39;m getting some errors trying to feed data to <code>solve_kde</code>. Also, is your code supposed to work for multiple dimensions?"}], "tags": [], "owner": {"reputation": 488, "user_id": 4496358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63cad54a2d35bf0f7aef50a647b7426?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4496358/tom"}, "is_accepted": false, "score": 3, "last_activity_date": 1460580473, "last_edit_date": 1495540243, "creation_date": 1423773794, "answer_id": 28487390, "question_id": 28330959, "link": "https://stackoverflow.com/questions/28330959/kernel-estimation-using-one-bandwidth-value-per-point/28487390#28487390", "title": "Kernel estimation using one bandwidth value per point", "body": "<p>I recently asked a <a href=\"https://stackoverflow.com/questions/28160012/kde-in-python-with-different-mu-sigma-mapping-a-function-to-an-array\">similar question</a>. There are (as far I was able to find) no implementations of that. Here is what I used (which works for my needs):</p>\n\n<pre><code>import numpy as np\n\ndef solve_gaussian(val,data_array,sigma_array):\n    return (1. / sigma_array) * np.exp(- (val - data_array) * (val - data_array) / (2 * sigma_array * sigma_array))\n\ndef solve_kde(xlist,data_array,sigma_array):\n    kde_array = np.array([])\n    for xx in xlist:\n        single_kde = solve_gaussian(xx,data_array,sigma_array)\n        if np.ndim(kde_array) == 3:\n            kde_array = np.concatenate((kde_array,single_kde[np.newaxis,:,:]),axis=0)\n        else:\n            kde_array = np.dstack(single_kde)\n    return kde_array\n\nxlist = np.linspace(0,1,101) #Adjust as needed\nkde_array = solve_kde(xlist,data_array,sigma_array)\nkde_vector = np.sum(np.sum(kde_array,axis=2),axis=1)\nmode_guess = xlist[np.argmax(kde_vector)]\n</code></pre>\n\n<p>It's a reimplementation of the scipy gaussian kde. </p>\n"}], "owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1460580473, "creation_date": 1423082268, "last_edit_date": 1423107933, "question_id": 28330959, "link": "https://stackoverflow.com/questions/28330959/kernel-estimation-using-one-bandwidth-value-per-point", "title": "Kernel estimation using one bandwidth value per point", "body": "<p>I'm familiar with the usual Kernel density estimation (KDE) where a single bandwidth value is used to generate a multivariate (usually Gaussian) function for each sample point. The final KDE is then obtained by summing the Gaussian functions for all the sample points.</p>\n\n<p>Say I have N sample points (assume in 1 dimension) each one with an error estimate, e.g.:</p>\n\n<pre><code>sample_points = [0.5, 0.7, 0.3, 1.2, 0.01, 3.6, 0.4]\nerrors = [0.02, 0.03, 0.05, 0.01, 0.03, 0.01, 0.07]\n</code></pre>\n\n<p>What I'm after, is a way to obtain the KDE for this sample using the error associated to each point as the bandwidth for its function.</p>\n\n<p>I could eventually do this by manually obtaining the Gaussian kernel for each point separately, and then combining all the functions (no easy task).</p>\n\n<p>Is there an already implemented function that does this? I've looked around but the kernel density estimator functions I found (<a href=\"https://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.stats.gaussian_kde.html\" rel=\"nofollow\">scipy.stats.gaussian_kde</a>, <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.KernelDensity.html#sklearn.neighbors.KernelDensity\" rel=\"nofollow\">sklearn.neighbors.KernelDensity</a>) use a fixed bandwidth value for all the points.</p>\n"}, {"tags": ["python", "math", "python-3.x", "multiplication"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1423082311, "post_id": 28330945, "comment_id": 45009086, "body": "Floats are inherently inaccurate. If you want exact results, consider the <code>fractions</code> module."}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1423082545, "post_id": 28330945, "comment_id": 45009208, "body": "This isn&#39;t specific to 3.x, btw. I get <code>1.2000000000000002</code> when I try your code in 2.7."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 1, "creation_date": 1423083414, "post_id": 28330945, "comment_id": 45009695, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423091045, "post_id": 28331205, "comment_id": 45013427, "body": "You should make it clear that the problem does not lie in <i>python</i> but that that is how floating points work, as used by all modern processors."}], "tags": [], "owner": {"reputation": 9648, "user_id": 3178237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d809533c5ce964b709e2b38e6573973b?s=128&d=identicon&r=PG", "display_name": "Yerko Palma", "link": "https://stackoverflow.com/users/3178237/yerko-palma"}, "is_accepted": false, "score": 0, "last_activity_date": 1423083162, "creation_date": 1423083162, "answer_id": 28331205, "question_id": 28330945, "link": "https://stackoverflow.com/questions/28330945/python-multiplication-error-version-3-4/28331205#28331205", "title": "Python Multiplication Error (version 3.4)", "body": "<p>The problem is the <a href=\"https://docs.python.org/3/tutorial/floatingpoint.html\" rel=\"nofollow\">floating point</a> in python. As you can read on that link, python uses to round numbers, because they actually have a lot of digits. But when you multipli by .1 python asumes that you spect to see a point floating number, thats why the issue doesn't happen when you divide by 10.</p>\n\n<p>However, you can format your numbers if you want</p>\n\n<pre><code>&gt;&gt;&gt; format(math.pi, '.12g')  # give 12 significant digits\n'3.14159265359'\n\n&gt;&gt;&gt; format(math.pi, '.2f')   # give 2 digits after the point\n'3.14'\n</code></pre>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "is_accepted": true, "score": 2, "last_activity_date": 1423090569, "last_edit_date": 1423090569, "creation_date": 1423084405, "answer_id": 28331574, "question_id": 28330945, "link": "https://stackoverflow.com/questions/28330945/python-multiplication-error-version-3-4/28331574#28331574", "title": "Python Multiplication Error (version 3.4)", "body": "<p>The reason for the difference is that integers can be represented accurately in binary, whereas many decimal numbers cannot (given finite memory).</p>\n\n<p>The float <code>0.1</code> is an example of this:</p>\n\n<pre><code>&gt;&gt;&gt; \"%.32f\" % 0.1\n'0.10000000000000000555111512312578'\n</code></pre>\n\n<p>It's not <em>exactly</em> <code>0.1</code>. So multiplying by the float <code>0.1</code> is not quite the same as dividing by <code>10</code>. It gives a different result, as you observe:</p>\n\n<pre><code>&gt;&gt;&gt; 14 / 10\n1.4\n&gt;&gt;&gt; 14 * 0.1\n1.4000000000000001\n</code></pre>\n\n<p>Of course, neither result here is exactly <code>1.4</code>, it's just that the multiplication by the float <code>0.1</code> has a slightly greater margin of error than dividing by the integer <code>10</code>. The difference between the two is just enough that the division gets rounded to one decimal place, but the multiplication does not.</p>\n"}], "owner": {"reputation": 23, "user_id": 4530246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfc70ce0e9099c76c0ad9e7608b368ba?s=128&d=identicon&r=PG&f=1", "display_name": "Adrien Guerin", "link": "https://stackoverflow.com/users/4530246/adrien-guerin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2039, "favorite_count": 0, "accepted_answer_id": 28331574, "answer_count": 2, "score": 1, "last_activity_date": 1423090569, "creation_date": 1423082201, "last_edit_date": 1423084730, "question_id": 28330945, "link": "https://stackoverflow.com/questions/28330945/python-multiplication-error-version-3-4", "title": "Python Multiplication Error (version 3.4)", "body": "<p>I have been using Python 2.7 since very soon after it was released. I just recently had problems with 2.7 not doing everything I needed, so I updated (finally). However, after a few days, I am noticing some problems with multiplication. But is it something I'm doing or a problem with Python itself?</p>\n\n<pre><code>&gt;&gt;&gt; 12*0.1\n1.2000000000000002\n</code></pre>\n\n<p>If I run a loop like this:</p>\n\n<pre><code>&gt;&gt;&gt; for i in range ( -20, 20 ):\n...     print ( i, i*.1 )\n...\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>-20 -2.0\n-19 -1.9000000000000001\n-18 -1.8\n-17 -1.7000000000000002\n-16 -1.6\n-15 -1.5\n-14 -1.4000000000000001\n-13 -1.3\n-12 -1.2000000000000002\n-11 -1.1\n-10 -1.0\n-9 -0.9\n-8 -0.8\n-7 -0.7000000000000001\n-6 -0.6000000000000001\n-5 -0.5\n-4 -0.4\n-3 -0.30000000000000004\n-2 -0.2\n-1 -0.1\n0 0.0\n1 0.1\n2 0.2\n3 0.30000000000000004\n4 0.4\n5 0.5\n6 0.60000000000000001\n7 0.70000000000000001\n8 0.8\n9 0.9\n10 0.10\n11 0.11\n12 0.120000000000000002\n13 0.13\n14 0.140000000000000001\n15 0.15\n16 0.16\n17 0.170000000000000002\n18 0.18\n19 0.190000000000000002\n</code></pre>\n\n<p>When I do a loop like this, however:</p>\n\n<pre><code>&gt;&gt;&gt; for i in range ( -20, 20 ):\n...     print ( i, i/10 )\n...\n</code></pre>\n\n<p>It prints out the correct numbers. I have even run the first loop with a range of +/- 1,000,000, and about 40% of the numbers end up this way. Why is this happening?</p>\n"}, {"tags": ["python", "json", "unicode", "dumpdata"], "comments": [{"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 0, "creation_date": 1423082248, "post_id": 28330897, "comment_id": 45009046, "body": "Could try <code>manage.py dumpdata --format=xml &gt; output.xml</code>, which handles unicode correctly. That and other things to try found here: <a href=\"http://stackoverflow.com/questions/2137501/django-dumpdata-utf-8-unicode\" title=\"django dumpdata utf 8 unicode\">stackoverflow.com/questions/2137501/&hellip;</a>"}, {"owner": {"reputation": 197, "user_id": 2902394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/82fe670324cf29c6c8e1249eda38e8de?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Solovyov", "link": "https://stackoverflow.com/users/2902394/vladimir-solovyov"}, "reply_to_user": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 0, "creation_date": 1423082483, "post_id": 28330897, "comment_id": 45009174, "body": "Oh, ofcourse, with xml everything is ok. But is any way do solve this problem with JSON?"}, {"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 1, "creation_date": 1423082906, "post_id": 28330897, "comment_id": 45009421, "body": "Can&#39;t say I&#39;ve tried. I suppose you could update the dumpdata code. You&#39;ll probably need to do something along these lines: <a href=\"http://stackoverflow.com/questions/10865180/unicode-values-in-strings-are-escaped-when-dumping-to-json-in-python\" title=\"unicode values in strings are escaped when dumping to json in python\">stackoverflow.com/questions/10865180/&hellip;</a>"}, {"owner": {"reputation": 197, "user_id": 2902394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/82fe670324cf29c6c8e1249eda38e8de?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Solovyov", "link": "https://stackoverflow.com/users/2902394/vladimir-solovyov"}, "reply_to_user": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 0, "creation_date": 1423084176, "post_id": 28330897, "comment_id": 45010084, "body": "Thanks!  <code>json.dumps(data, ensure_ascii=False)</code> works for me."}], "owner": {"reputation": 197, "user_id": 2902394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/82fe670324cf29c6c8e1249eda38e8de?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Solovyov", "link": "https://stackoverflow.com/users/2902394/vladimir-solovyov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423081984, "creation_date": 1423081984, "question_id": 28330897, "link": "https://stackoverflow.com/questions/28330897/decoding-unicode-escape-avoiding-quotes-and-some-other-symbols-needed-to-escape", "title": "Decoding unicode escape avoiding quotes and some other symbols needed to escape", "body": "<p>I've got a problem with encoding unicode escapes. After <code>python manage.py dumpdata</code>, I have <code>json</code> with escaped strings.</p>\n\n<p>I need to get readable strings, so I tried to use</p>\n\n<pre><code>json_data.decode(\"unicode_escape\").encode(\"utf8\")\n</code></pre>\n\n<p>but <code>decode(\"unicode_escape\")</code> also decodes symbols like <code>\\n</code>, <code>\\\"</code> etc. And ofcourse I get not valid json.</p>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["python", "popen", "io-redirection"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1550360663, "post_id": 28330815, "comment_id": 96241107, "body": "Also see <a href=\"https://stackoverflow.com/q/4965159/608639\">How to redirect output with subprocess in Python?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1423082536, "post_id": 28330918, "comment_id": 45009203, "body": "You mean <code>check_output</code>. Agree (there was a since deleted comment about this with a small typo: <code>checked_output</code>)."}, {"owner": {"reputation": 99, "user_id": 2778048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/684642643/picture?type=large", "display_name": "Asa Hunt", "link": "https://stackoverflow.com/users/2778048/asa-hunt"}, "edited": false, "score": 0, "creation_date": 1423089797, "post_id": 28330918, "comment_id": 45012828, "body": "Thanks so much!  I read the description in the documentation but I didn&#39;t understand that the name of an open file and a file object weren&#39;t the same thing, hence the error.  So  fout is an actual file object then, just so I&#39;m clear?"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "reply_to_user": {"reputation": 99, "user_id": 2778048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/684642643/picture?type=large", "display_name": "Asa Hunt", "link": "https://stackoverflow.com/users/2778048/asa-hunt"}, "edited": false, "score": 0, "creation_date": 1423090344, "post_id": 28330918, "comment_id": 45013098, "body": "Yes, it is. An interesting thing about open files in Python is that they adhere to the &quot;context management protocol&quot;, so when you use them at the <code>with</code> statement they are guaranteed to be automatically closed at the end of the block (so your program does not leak resources - most operational systems limit the number of open files).."}, {"owner": {"reputation": 99, "user_id": 2778048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/684642643/picture?type=large", "display_name": "Asa Hunt", "link": "https://stackoverflow.com/users/2778048/asa-hunt"}, "edited": false, "score": 0, "creation_date": 1423104527, "post_id": 28330918, "comment_id": 45016959, "body": "I hate to be a bother, but the subprocess with the actual Nmap command isn&#39;t executing inside the with block when I run the program.  Any ideas?"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "reply_to_user": {"reputation": 99, "user_id": 2778048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/684642643/picture?type=large", "display_name": "Asa Hunt", "link": "https://stackoverflow.com/users/2778048/asa-hunt"}, "edited": false, "score": 0, "creation_date": 1423137509, "post_id": 28330918, "comment_id": 45031110, "body": "We are here to help. Inspect the value of <code>proc</code>, may be <code>proc.returncode</code>  would give you a clue."}], "tags": [], "owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "is_accepted": false, "score": 1, "last_activity_date": 1423082079, "creation_date": 1423082079, "answer_id": 28330918, "question_id": 28330815, "link": "https://stackoverflow.com/questions/28330815/redirect-output-of-subprocess-to-file/28330918#28330918", "title": "Redirect output of subprocess to file", "body": "<p>From the docs:</p>\n\n<blockquote>\n  <p>stdin, stdout and stderr specify the executed program\u2019s standard input, standard output and standard error file handles, respectively. Valid values are PIPE, an existing file descriptor (a positive integer), an existing file object, and None.</p>\n</blockquote>\n\n<p>So a filename is not a valid value for the stdout argument.</p>\n\n<p>I guess you want this instead:</p>\n\n<pre><code>proc = subprocess.Popen(args,stdout=open(fname, 'w'))\n</code></pre>\n\n<p>Or better yet, just keep everything within the <code>with</code> block:</p>\n\n<pre><code>with open(fname, 'w') as fout:\n    fout.write('')\n\n    command = raw_input(\"Please enter an Nmap command with an IP address.\")\n    args = shlex.split(command)\n    proc = subprocess.Popen(args,stdout=fout)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 2778048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/684642643/picture?type=large", "display_name": "Asa Hunt", "link": "https://stackoverflow.com/users/2778048/asa-hunt"}, "edited": false, "score": 0, "creation_date": 1423089993, "post_id": 28330949, "comment_id": 45012936, "body": "Thanks, this was helpful as well."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1423139451, "post_id": 28330949, "comment_id": 45032346, "body": "note: the file may be closed in the parent <i>before</i> nmap finishes because <code>Popen</code> does <i>not</i> wait for the child process to exit. <code>nmap</code> inherits its own copy of the file descriptor."}, {"owner": {"reputation": 126, "user_id": 1625464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab342aa3e05f15f3d5ec0fa770dbc13?s=128&d=identicon&r=PG", "display_name": "wrigby", "link": "https://stackoverflow.com/users/1625464/wrigby"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1423182159, "post_id": 28330949, "comment_id": 45056466, "body": "@J.F.Sebastian is right - you should explicitly wait for the process to finish first. I&#39;ve added a call to <code>subprocess.wait</code> to do that in the with block."}], "tags": [], "owner": {"reputation": 126, "user_id": 1625464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab342aa3e05f15f3d5ec0fa770dbc13?s=128&d=identicon&r=PG", "display_name": "wrigby", "link": "https://stackoverflow.com/users/1625464/wrigby"}, "is_accepted": true, "score": 3, "last_activity_date": 1423182490, "last_edit_date": 1423182490, "creation_date": 1423082223, "answer_id": 28330949, "question_id": 28330815, "link": "https://stackoverflow.com/questions/28330815/redirect-output-of-subprocess-to-file/28330949#28330949", "title": "Redirect output of subprocess to file", "body": "<p>As Paulo mentioned above, you have to pass an open file; the name of the file won't work. You should probably do this with the same context you created (the <code>with</code> block); try rearranging it to this:</p>\n\n<pre><code>outputName = raw_input(\"What is the output file name?\")\nfname = outputName\n\ncommand = raw_input(\"Please enter an Nmap command with an IP address.\")\nargs = shlex.split(command)\n\nwith open(fname, 'w') as fout:\n    proc = subprocess.Popen(args,stdout=fout)\n    return_code = proc.wait()\n</code></pre>\n\n<p>Not that <code>subprocess.Popen</code> is called with <code>stdout=fout</code> now instead of <code>stdout=fname</code>. The context manager created by the <code>with</code> statement ensures the file will be closed when the nmap process is done, even if an exception occurs.</p>\n"}], "owner": {"reputation": 99, "user_id": 2778048, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/684642643/picture?type=large", "display_name": "Asa Hunt", "link": "https://stackoverflow.com/users/2778048/asa-hunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2666, "favorite_count": 0, "closed_date": 1423139736, "accepted_answer_id": 28330949, "answer_count": 2, "score": -1, "last_activity_date": 1423182490, "creation_date": 1423081698, "last_edit_date": 1423082825, "question_id": 28330815, "link": "https://stackoverflow.com/questions/28330815/redirect-output-of-subprocess-to-file", "closed_reason": "Duplicate", "title": "Redirect output of subprocess to file", "body": "<p>I'm trying to redirect the output of an Nmap scan to a text file using Python.  </p>\n\n<p>Here's my code:</p>\n\n<pre><code>outputName = raw_input(\"What is the output file name?\")\nfname = outputName\nwith open(fname, 'w') as fout:\n     fout.write('')\n\ncommand = raw_input(\"Please enter an Nmap command with an IP address.\")\nargs = shlex.split(command)\nproc = subprocess.Popen(args,stdout=fname)\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"mod2hw4.py\", line 17, in &lt;module&gt;\n    proc = subprocess.Popen(args,stdout=fname)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py\", line 701, in __init__\n    errread, errwrite), to_close = self._get_handles(stdin, stdout, stderr)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py\", line 1127, in _get_handles\n    c2pwrite = stdout.fileno()\nAttributeError: 'str' object has no attribute 'fileno'\n</code></pre>\n"}, {"tags": ["python", "numpy", "file-format", "nifti"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4530278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7144313eac2e66b4463ac7c52d4190e9?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle", "link": "https://stackoverflow.com/users/4530278/michelle"}, "edited": false, "score": 0, "creation_date": 1423152361, "post_id": 28331076, "comment_id": 45041213, "body": "Thank you so much! I totally missed that in the documentation.  This was a huge help! (I can&#39;t Vote up since this was my first time on Stack Overflow.)"}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "reply_to_user": {"reputation": 83, "user_id": 4530278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7144313eac2e66b4463ac7c52d4190e9?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle", "link": "https://stackoverflow.com/users/4530278/michelle"}, "edited": false, "score": 0, "creation_date": 1423153609, "post_id": 28331076, "comment_id": 45042000, "body": "@Michelle Glad to help and welcome to StackOverflow. Don&#39;t worry about not being able to upvote, it takes some time to get reputation. You can accept the answer though, which will also give you some reputation. And it will signify to the larger community that you have found an answer that works."}, {"owner": {"reputation": 83, "user_id": 4530278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7144313eac2e66b4463ac7c52d4190e9?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle", "link": "https://stackoverflow.com/users/4530278/michelle"}, "edited": false, "score": 0, "creation_date": 1423155394, "post_id": 28331076, "comment_id": 45043125, "body": "Sorry - I&#39;m still having problems.  I&#39;m looking to create the nifti file with vector data.  I initialize the array via: vectorArray = np.zeros((3,3,3), dtype = (&#39;float,float,float&#39;)) The nib.Nifti1Image gives the error:  data dtype &quot;[(&#39;f0&#39;, &#39;&lt;f8&#39;), (&#39;f1&#39;, &#39;&lt;f8&#39;), (&#39;f2&#39;, &#39;&lt;f8&#39;)]&quot; not supported"}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "reply_to_user": {"reputation": 83, "user_id": 4530278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7144313eac2e66b4463ac7c52d4190e9?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle", "link": "https://stackoverflow.com/users/4530278/michelle"}, "edited": false, "score": 0, "creation_date": 1423156017, "post_id": 28331076, "comment_id": 45043603, "body": "@Michelle, that&#39;s because you have created (needlessly) a <a href=\"http://docs.scipy.org/doc/numpy/user/basics.rec.html\" rel=\"nofollow noreferrer\">structured array</a>. Simply put: you have created an array of records, where each element of those records is a float. To solve, simply define your array like this: <code>vectorArray = np.zeros((3,3,3), dtype=np.float)</code>."}, {"owner": {"reputation": 83, "user_id": 4530278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7144313eac2e66b4463ac7c52d4190e9?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle", "link": "https://stackoverflow.com/users/4530278/michelle"}, "edited": false, "score": 0, "creation_date": 1423156566, "post_id": 28331076, "comment_id": 45043958, "body": "Thanks again :-)  But how can I get my vector data ( (i,j,k)/voxel), i.e. (0.23, 0.48,  0.84) for array location [1,1,1] into that type?"}, {"owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "reply_to_user": {"reputation": 83, "user_id": 4530278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7144313eac2e66b4463ac7c52d4190e9?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle", "link": "https://stackoverflow.com/users/4530278/michelle"}, "edited": false, "score": 0, "creation_date": 1423156891, "post_id": 28331076, "comment_id": 45044163, "body": "@Michelle, I&#39;m not entirely sure what you&#39;re asking. I <i>think</i> you want to define the numpy array upfront, e.g. like this: <code>arr = np.zeros((2,4,3,3)); arr[1,1,1] = [.23, .48, .84]</code> and then convert to a NIfTI image. If not, I suggest asking a new question on SO and best to add a good example of what you&#39;re after ;-)"}, {"owner": {"reputation": 83, "user_id": 4530278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7144313eac2e66b4463ac7c52d4190e9?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle", "link": "https://stackoverflow.com/users/4530278/michelle"}, "edited": false, "score": 0, "creation_date": 1423157415, "post_id": 28331076, "comment_id": 45044457, "body": "that was exactly it! Thank again for the time :D"}, {"owner": {"reputation": 773, "user_id": 3931936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac4f524863f588f399da6431667b69a?s=128&d=identicon&r=PG", "display_name": "Losses Don", "link": "https://stackoverflow.com/users/3931936/losses-don"}, "reply_to_user": {"reputation": 83, "user_id": 4530278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7144313eac2e66b4463ac7c52d4190e9?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle", "link": "https://stackoverflow.com/users/4530278/michelle"}, "edited": false, "score": 1, "creation_date": 1519634593, "post_id": 28331076, "comment_id": 84973404, "body": "@Michelle Hmmmm, I should use <code>np.eye(4)</code> all the time right? I feel confused even with the document :("}, {"owner": {"reputation": 1354, "user_id": 7522338, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-otf6o8D-vyc/AAAAAAAAAAI/AAAAAAAAAe0/Z1unAKF4xUM/photo.jpg?sz=128", "display_name": "shantanu pathak", "link": "https://stackoverflow.com/users/7522338/shantanu-pathak"}, "reply_to_user": {"reputation": 773, "user_id": 3931936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac4f524863f588f399da6431667b69a?s=128&d=identicon&r=PG", "display_name": "Losses Don", "link": "https://stackoverflow.com/users/3931936/losses-don"}, "edited": false, "score": 0, "creation_date": 1542881798, "post_id": 28331076, "comment_id": 93731284, "body": "@LossesDon please check my answer"}], "tags": [], "owner": {"reputation": 11909, "user_id": 2476444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/czrJP.png?s=128&g=1", "display_name": "Oliver W.", "link": "https://stackoverflow.com/users/2476444/oliver-w"}, "is_accepted": true, "score": 19, "last_activity_date": 1423083646, "last_edit_date": 1423083646, "creation_date": 1423082686, "answer_id": 28331076, "question_id": 28330785, "link": "https://stackoverflow.com/questions/28330785/creating-a-nifti-file-from-a-numpy-array/28331076#28331076", "title": "Creating a nifti file from a numpy array", "body": "<p>The replacement function in the newer <a href=\"http://nipy.sourceforge.net/nibabel/index.html\" rel=\"noreferrer\">NiBabel</a> package would be called <a href=\"http://nipy.sourceforge.net/nibabel/reference/nibabel.nifti1.html?highlight=nifti1image#nibabel.nifti1.Nifti1Image\" rel=\"noreferrer\"><code>Nifty1Image</code></a>. However, you are required to pass in the <a href=\"http://nipy.sourceforge.net/nibabel/coordinate_systems.html\" rel=\"noreferrer\">affine transformation</a> defining the position of that image with respect to some frame of reference.</p>\n\n<p>In its simplest form, it would look like this:</p>\n\n<pre><code>import nibabel as nib\nimport numpy as np\n\ndata = np.arange(4*4*3).reshape(4,4,3)\n\nnew_image = nib.Nifti1Image(data, affine=np.eye(4))\n</code></pre>\n\n<p>You could also write to a NIfTI-2 file format by using <a href=\"http://nipy.sourceforge.net/nibabel/reference/nibabel.nifti2.html#nibabel.nifti2.Nifti2Image\" rel=\"noreferrer\"><code>Nifti2Image</code></a>, which also requires the affine transformation.</p>\n"}, {"tags": [], "owner": {"reputation": 1354, "user_id": 7522338, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-otf6o8D-vyc/AAAAAAAAAAI/AAAAAAAAAe0/Z1unAKF4xUM/photo.jpg?sz=128", "display_name": "shantanu pathak", "link": "https://stackoverflow.com/users/7522338/shantanu-pathak"}, "is_accepted": false, "score": 2, "last_activity_date": 1589469060, "last_edit_date": 1589469060, "creation_date": 1542879723, "answer_id": 53427933, "question_id": 28330785, "link": "https://stackoverflow.com/questions/28330785/creating-a-nifti-file-from-a-numpy-array/53427933#53427933", "title": "Creating a nifti file from a numpy array", "body": "<p>Accepted answer is sufficient. I am adding few lines of detailed explanation for the same.</p>\n\n<pre><code>import nibabel as nib\nimport numpy as np\n\ndata = np.arange(4*4*3).reshape(4,4,3)\n\nnew_image = nib.Nifti1Image(data, affine=np.eye(4))\n</code></pre>\n\n<p>The function <code>np.eye(n)</code> returns a n by n identity matrix.<br>\nHere this <code>np.eye(4)</code> is used to generate 4 by 4 matrix as Nifti processes 4 by 4 file format. So you 3 by 3 matrix is converted to 4 by 4 by multiplication with 4 by 4 identity matrix.</p>\n\n<p>So, always <code>affine = np.eye(4)</code> will work.</p>\n\n<p>Same is applicable to both <code>Nifti1Image</code> and <code>Nifti2Image</code></p>\n"}], "owner": {"reputation": 83, "user_id": 4530278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7144313eac2e66b4463ac7c52d4190e9?s=128&d=identicon&r=PG&f=1", "display_name": "Michelle", "link": "https://stackoverflow.com/users/4530278/michelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12489, "favorite_count": 5, "accepted_answer_id": 28331076, "answer_count": 2, "score": 8, "last_activity_date": 1589469060, "creation_date": 1423081562, "last_edit_date": 1423082937, "question_id": 28330785, "link": "https://stackoverflow.com/questions/28330785/creating-a-nifti-file-from-a-numpy-array", "title": "Creating a nifti file from a numpy array", "body": "<p>I have a numpy array that I would like to covert into a nifti file.  Through the documentation it seems PyNIfTI used to do this with:</p>\n\n<pre><code>image=NiftiImage(Array)               \n</code></pre>\n\n<p>However, PyNIfTI isn't supported anymore. NiBabel, the successor to PyNIfTI, doesn't seem to support this function. I must be missing something. Does anyone know how to do this?</p>\n"}, {"tags": ["python", "google-app-engine", "google-search-api"], "comments": [{"owner": {"reputation": 430, "user_id": 1401363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6qTE.jpg?s=128&g=1", "display_name": "AmirS", "link": "https://stackoverflow.com/users/1401363/amirs"}, "edited": false, "score": 0, "creation_date": 1430419535, "post_id": 28330735, "comment_id": 48070561, "body": "I suspect this can&#39;t be done in the current AppEngine search API. See <a href=\"https://cloud.google.com/appengine/docs/python/search/query_strings\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/docs/python/search/query_strings</a> for documentation, though it doesn&#39;t explicitly address this.  I think you should use a large fixed maxradius (e.g. 100km / 100000m), then return the distance as a Field Expression specified in the QueryOptions, and then you have to manually filter the list using each individual maxradius.  <a href=\"https://cloud.google.com/appengine/docs/python/search/options#Python_Writing_expressions\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/docs/python/search/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "edited": false, "score": 0, "creation_date": 1423132709, "post_id": 28332876, "comment_id": 45028205, "body": "no, i want to have a different maxradius for each document. this is not good for me."}, {"owner": {"reputation": 60, "user_id": 1407410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f1b1274f89fddf1f4f27af8ff103af?s=128&d=identicon&r=PG", "display_name": "JamesWat", "link": "https://stackoverflow.com/users/1407410/jameswat"}, "reply_to_user": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "edited": false, "score": 0, "creation_date": 1423434752, "post_id": 28332876, "comment_id": 45135950, "body": "Well then you can adjust the <code>maxradius</code> variable in a simple for loop. The important bit here is having the original query as <code>\u201cdistance(loc, geopoint(20.0, 30.0)) &lt; \u201d</code> and then adding the variable (which will be cast to a string)"}, {"owner": {"reputation": 60, "user_id": 1407410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f1b1274f89fddf1f4f27af8ff103af?s=128&d=identicon&r=PG", "display_name": "JamesWat", "link": "https://stackoverflow.com/users/1407410/jameswat"}, "reply_to_user": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "edited": false, "score": 0, "creation_date": 1423517737, "post_id": 28332876, "comment_id": 45172775, "body": "I don&#39;t know what you want. You asked a question , and you now have two answers that work. Don&#39;t go complaining that we didn&#39;t answer your question. We both fixed the python runtime error. I suggest you look at some of <a href=\"https://wiki.python.org/moin/IntroductoryBooks\" rel=\"nofollow noreferrer\">these</a>, so you can understand some basic programming ideas, then maybe re-ask a different question."}, {"owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "edited": false, "score": 0, "creation_date": 1423519261, "post_id": 28332876, "comment_id": 45173600, "body": "I am not complaining , i appreciate your time for answering. your suggestions do solve the error , but they fail to achieve the goal. if I wanted to have a constant injection to my query , i would not have bothered asking the question.  the idea of my project is to give businesses customers based on both&#39;s locations and <i>not</i> to give businesses customers that are too far away, so each business sets a maxradius of it&#39;s own.   your suggestions give a solution of one maxradius for everyone."}], "tags": [], "owner": {"reputation": 60, "user_id": 1407410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f1b1274f89fddf1f4f27af8ff103af?s=128&d=identicon&r=PG", "display_name": "JamesWat", "link": "https://stackoverflow.com/users/1407410/jameswat"}, "is_accepted": false, "score": -1, "last_activity_date": 1423605494, "last_edit_date": 1423605494, "creation_date": 1423089378, "answer_id": 28332876, "question_id": 28330735, "link": "https://stackoverflow.com/questions/28330735/google-app-engine-search-api-works-hardcoded-but-not-with-variable/28332876#28332876", "title": "google app engine search API: works hardcoded but not with variable", "body": "<p>what you want is this:</p>\n\n<pre><code>maxradius = 10\nquery = \"distance(loc, geopoint(20.0, 30.0)) &lt; \" + maxradius\n</code></pre>\n\n<p>edit:</p>\n\n<p>try something like this (NOT EXACTLY LIKE THIS):</p>\n\n<pre><code>query = \"distance(loc, geopoint(20.0, 30.0)) &lt; \"\nfor i in range(10):\n    do_something(query + i)\n</code></pre>\n\n<p>this will give you 10 different query strings. You can switch this up and make it loop through a list of predefined values such as:</p>\n\n<pre><code>maxradius = [1, 5, 23, 6, 2, 1, 77]\nquery = \"distance(loc, geopoint(20.0, 30.0)) &lt; \"\nfor i in maxradius:\n    do_something(query + i)\n</code></pre>\n\n<p>This is how you can have a different max radius for each document</p>\n"}, {"comments": [{"owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "edited": false, "score": 0, "creation_date": 1423498951, "post_id": 28411554, "comment_id": 45161984, "body": "i mean , just like the location is different in every document , i need the maxradius to be different."}, {"owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "edited": false, "score": 0, "creation_date": 1423499044, "post_id": 28411554, "comment_id": 45162045, "body": "maxradius represents the max distance to fetch customers for a given buisness , each buisness can set it&#39;s own maxradius."}], "tags": [], "owner": {"reputation": 36, "user_id": 4538563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80d9ad729377c96b354cb8d499f4e6b2?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Jay", "link": "https://stackoverflow.com/users/4538563/eric-jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1423492904, "last_edit_date": 1423492904, "creation_date": 1423490582, "answer_id": 28411554, "question_id": 28330735, "link": "https://stackoverflow.com/questions/28330735/google-app-engine-search-api-works-hardcoded-but-not-with-variable/28411554#28411554", "title": "google app engine search API: works hardcoded but not with variable", "body": "<p>The error raised indicates that maxradius is treated as a string and cannot be converted to a float as specified by the error message, Then as already mentioned, you need to set dynamically this variable. You can try this way, Note the single quotes instead of double quotes to inject dynamically :</p>\n\n<pre><code>query = 'distance(location, geopoint(20.0, 30.0)) &lt; %d' % maxradius\n</code></pre>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 2173, "user_id": 3794544, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/94226e756a1e68dd797037f11dc2102a?s=128&d=identicon&r=PG&f=1", "display_name": "user47376", "link": "https://stackoverflow.com/users/3794544/user47376"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423605494, "creation_date": 1423081387, "question_id": 28330735, "link": "https://stackoverflow.com/questions/28330735/google-app-engine-search-api-works-hardcoded-but-not-with-variable", "title": "google app engine search API: works hardcoded but not with variable", "body": "<p>I have a document with a GeoField and a NumberField like this:</p>\n\n<pre><code>document = search.Document(doc_id=str(self.id),\n                               fields=[search.GeoField(name='loc',value=search.GeoPoint(20.0, 30.0)),\n                                       search.NumberField(name='maxradius', value=10)])\nsearch.Index(name='Professional').put(document)\n</code></pre>\n\n<p>when i query:</p>\n\n<pre><code>query = \"distance(loc, geopoint(20.0, 30.0)) &lt; 10\"\n</code></pre>\n\n<p>I get the result correctly\nbut when I query:</p>\n\n<pre><code>query = \"distance(loc, geopoint(20.0, 30.0)) &lt; maxradius\"\n</code></pre>\n\n<p>I get <code>RuntimeError: ValueError('could not convert string to float: maxradius',)</code></p>\n\n<p>what's happenning ,any ideas ? </p>\n"}, {"tags": ["python", "google-api", "google-api-python-client"], "owner": {"reputation": 11, "user_id": 4530179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/438e8621de16e9c16e000ad3fde97904?s=128&d=identicon&r=PG", "display_name": "Lois Bennett", "link": "https://stackoverflow.com/users/4530179/lois-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1423082667, "creation_date": 1423081157, "last_edit_date": 1423082667, "question_id": 28330675, "link": "https://stackoverflow.com/questions/28330675/change-my-old-google-api-python-user-account-provisioning-script-to-use-the-new", "title": "change my old Google API python user account provisioning script to use the new API", "body": "<p>The script below is used to add new users to our google mail.  It is called from the bash add-user script and creates user accounts for everything a new user will need including UNIX and Samba accounts.  I need help understanding what has to change to  work with the new API. This is run from a Solaris10 system and will soon migrate to a RHEL/Centos6 server.  There are similar scripts that are used to change a users password on all accounts and to disable accounts. I gather that I will need to  put something into JSON format  but it is not clear to me how that works.</p>\n\n<p>Thanks for your help.</p>\n\n<pre><code>#!/usr/bin/python\nimport sys\nimport getpass\nimport gdata.apps.service\n\nif len(sys.argv) &lt; 7:\n    print 'usage:\\n ', sys.argv[0], ' username lastname firstname \\\n    nickname password user \\n '\n    exit\nelse:\n    domain = 'channing.harvard.edu'\n    user = sys.argv[6]\n    pw = ''\n\n    print '\\nEnter your Google Apps login password.'\n    while True:\n        try:\n            while not pw:\n                pw = getpass.getpass()\n            if not pw:\n                    print 'Password cannot be blank.'\n\n            email = user + '@' + domain                   \n            service = gdata.apps.service.AppsService(email=email, \\\n    domain=domain, password=pw)\n            service.ProgrammaticLogin()\n        except gdata.service.BadAuthentication, e:\n            print e\n            print 'Please enter the correct password for ' + user\n            pw = ''\n        except:\n            pw=''\n        else: break\n\n    username = sys.argv[1]\n    lastname = sys.argv[2]\n    firstname = sys.argv[3]\n    nickname = sys.argv[4]\n    newpassword = sys.argv[5]\n    print '\\nCreating new Google Apps account for', firstname, \\\n    lastname, 'with username', username, 'and password', \\\n    newpassword, '\\n' ;\n    try:\n        service.CreateUser(username, lastname, firstname, \\\n   newpassword)\n    except gdata.apps.service.AppsForYourDomainException , e:\n        print e.reason# or process the exception in some other way\n        print 'unable to create account for ' + username\n        print username + ' already exists'\n        exit()\n    service.CreateNickname(username, nickname)\n</code></pre>\n\n<p>I hope this code is clear.  I had to mangle it a bit with '\\' to get it to fit.  </p>\n"}, {"tags": ["python", "string", "printing", "format"], "comments": [{"owner": {"reputation": 4694, "user_id": 4367228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bdee64eedba21c13b7017601c566d05?s=128&d=identicon&r=PG&f=1", "display_name": "MrAlexBailey", "link": "https://stackoverflow.com/users/4367228/mralexbailey"}, "edited": false, "score": 0, "creation_date": 1423081364, "post_id": 28330657, "comment_id": 45008585, "body": "Can you share what the desired output would be?"}], "answers": [{"comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1423081652, "post_id": 28330733, "comment_id": 45008734, "body": "It seems rather odd to mix two different string formatting styles!"}, {"owner": {"reputation": 404, "user_id": 2780518, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ada328d2fd9f81bdb8f029454541695?s=128&d=identicon&r=PG&f=1", "display_name": "Spencer Wood", "link": "https://stackoverflow.com/users/2780518/spencer-wood"}, "edited": false, "score": 0, "creation_date": 1423081729, "post_id": 28330733, "comment_id": 45008767, "body": "Perfect, thank you. Didn&#39;t know you could do this. I also like this because I have to use this formatting more than once, so building it a single time is preferable."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1423081380, "creation_date": 1423081380, "answer_id": 28330733, "question_id": 28330657, "link": "https://stackoverflow.com/questions/28330657/python3-use-a-variables-inside-string-formatter-arguments/28330733#28330733", "title": "Python3 - Use a variables inside string formatter arguments", "body": "<p>You can build your format string first</p>\n\n<pre><code>f = '{0:&lt;%d}{1:&lt;%d}{2:&lt;%d}' % (number_length, name_length, viewers_length)\n#produces\n'{0:&lt;5}{1:&lt;24}{2:&lt;9}'\n</code></pre>\n\n<p>Then use that in your other format call</p>\n\n<pre><code>print(f.format(' #','channel','viewers'), end = ''))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1423081619, "post_id": 28330739, "comment_id": 45008719, "body": "The extra step with doubled braces is potentially superfluous; you can have nested single braces and pass the widths and values to be formatted at the same time."}], "tags": [], "owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "is_accepted": false, "score": 2, "last_activity_date": 1423302055, "last_edit_date": 1423302055, "creation_date": 1423081395, "answer_id": 28330739, "question_id": 28330657, "link": "https://stackoverflow.com/questions/28330657/python3-use-a-variables-inside-string-formatter-arguments/28330739#28330739", "title": "Python3 - Use a variables inside string formatter arguments", "body": "<p>I'd do it like this</p>\n\n<pre><code>In [11]: widths = dict(number=5, name=24, viewers=9)\n\nIn [12]: data = ('#', 'channel', 'viewers')\n\nIn [13]: '{:&lt;{number}}{:&lt;{name}}{:&lt;{viewers}}'.format(*data, **widths)\nOut[13]: '#    channel                 viewers  '\n</code></pre>\n\n<p>Of course, it's also possible to generate the format string, without actually getting it formatted:</p>\n\n<pre><code>In [14]: '{{:&lt;{number}}}{{:&lt;{name}}}{{:&lt;{viewers}}}'.format(**widths)\nOut[14]: '{:&lt;5}{:&lt;24}{:&lt;9}'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "is_accepted": true, "score": 7, "last_activity_date": 1423081885, "last_edit_date": 1423081885, "creation_date": 1423081532, "answer_id": 28330776, "question_id": 28330657, "link": "https://stackoverflow.com/questions/28330657/python3-use-a-variables-inside-string-formatter-arguments/28330776#28330776", "title": "Python3 - Use a variables inside string formatter arguments", "body": "<p>You need to:</p>\n\n<ol>\n<li>Wrap the names in braces, too; and</li>\n<li>Pass the widths as keyword arguments to <code>str.format</code>.</li>\n</ol>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; print(\"{0:&gt;{number_length}}\".format(1, number_length=8))\n       1\n</code></pre>\n\n<p>You can also use dictionary unpacking:</p>\n\n<pre><code>&gt;&gt;&gt; widths = {'number_length': 8}\n&gt;&gt;&gt; print(\"{0:&gt;{number_length}}\".format(1, **widths))\n       1\n</code></pre>\n\n<p><code>str.format</code> won't look in the local scope for appropriate names; they <strong>must</strong> be passed explicitly.</p>\n\n<p>For your example, this could work like:</p>\n\n<pre><code>&gt;&gt;&gt; widths = {'number_length': 5,\n              'name_length': 24,\n              'viewers_length': 9}\n&gt;&gt;&gt; template= '{0:&lt;{number_length}}{1:&lt;{name_length}}{2:&lt;{viewers_length}}'\n&gt;&gt;&gt; print(template.format('#', 'channel', 'visitors', end='', **widths))\n#    channel                 visitors\n</code></pre>\n\n<p><em>(Note that <code>end</code>, and any other explicit keyword arguments, must come before <code>**widths</code>.)</em></p>\n"}], "owner": {"reputation": 404, "user_id": 2780518, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ada328d2fd9f81bdb8f029454541695?s=128&d=identicon&r=PG&f=1", "display_name": "Spencer Wood", "link": "https://stackoverflow.com/users/2780518/spencer-wood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 28330776, "answer_count": 3, "score": 2, "last_activity_date": 1423302055, "creation_date": 1423081111, "question_id": 28330657, "link": "https://stackoverflow.com/questions/28330657/python3-use-a-variables-inside-string-formatter-arguments", "title": "Python3 - Use a variables inside string formatter arguments", "body": "<p>I have some formatted columns that I'm printing. I would like to use the following variables to set the lengths in my .format arguments</p>\n\n<pre><code>number_length = 5\nname_length = 24\nviewers_length = 9\n</code></pre>\n\n<p>I have </p>\n\n<pre><code>print('{0:&lt;5}{1:&lt;24}{2:&lt;9}'.format(' #','channel','viewers'), end = '')\n</code></pre>\n\n<p>Ideally I would like something like </p>\n\n<pre><code>print('{0:&lt;number_length}{1:&lt;name_length}{2:&lt;viewers_length}'.format(\n     ' #','channel','viewers'), end = '')\n</code></pre>\n\n<p>But this gives me an invalid string formatter error.</p>\n\n<p>I have tried with % before the variables and parenthesis, but have had no luck.</p>\n"}, {"tags": ["python", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1423080936, "post_id": 28330554, "comment_id": 45008372, "body": "he didnt actually say he needed the actual indices ... just <code>.count</code> might have sufficed"}, {"owner": {"reputation": 3057, "user_id": 2415524, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wQrhZ.jpg?s=128&g=1", "display_name": "mbomb007", "link": "https://stackoverflow.com/users/2415524/mbomb007"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 2, "creation_date": 1423080994, "post_id": 28330554, "comment_id": 45008404, "body": "@JoranBeasley I don&#39;t think so. He wants all the indices. &quot;I am trying to find the index of the smallest one. But I want to know all the objects that are the same.&quot;"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1423081446, "post_id": 28330554, "comment_id": 45008633, "body": "I think you are probably right however &quot;I want to know that multiple indices match what I am searching for. &quot; and the title &quot;How to tell when more than one index matches?&quot; doesnt sound like he cares where those indexes are just that there is more than one min"}, {"owner": {"reputation": 3057, "user_id": 2415524, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wQrhZ.jpg?s=128&g=1", "display_name": "mbomb007", "link": "https://stackoverflow.com/users/2415524/mbomb007"}, "edited": false, "score": 0, "creation_date": 1423081775, "post_id": 28330554, "comment_id": 45008790, "body": "Go by the question text, not the title (which has to be reasonably short). He wants to know <i>all the objects</i>, and you know an object generally by its reference, so he should know what the index of each one is in the list."}, {"owner": {"reputation": 51, "user_id": 4106940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/645910a11198bcd4cbe93af5899b33d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tazza2092", "link": "https://stackoverflow.com/users/4106940/tazza2092"}, "edited": false, "score": 1, "creation_date": 1423083140, "post_id": 28330554, "comment_id": 45009544, "body": "Thanks guys, this is exactly what I was looking for. I edited the question to make that a bit clearer."}, {"owner": {"reputation": 3057, "user_id": 2415524, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wQrhZ.jpg?s=128&g=1", "display_name": "mbomb007", "link": "https://stackoverflow.com/users/2415524/mbomb007"}, "edited": false, "score": 0, "creation_date": 1423083459, "post_id": 28330554, "comment_id": 45009721, "body": "@vaultah, you should add <code>try: ma = min(a) except ValueError: ma = -1</code>, then it would work for empty lists."}, {"owner": {"reputation": 3057, "user_id": 2415524, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wQrhZ.jpg?s=128&g=1", "display_name": "mbomb007", "link": "https://stackoverflow.com/users/2415524/mbomb007"}, "edited": false, "score": 0, "creation_date": 1423084026, "post_id": 28330554, "comment_id": 45010005, "body": "Ah, I didn&#39;t know there was a <code>default</code>."}], "tags": [], "owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "is_accepted": true, "score": 5, "last_activity_date": 1445875989, "last_edit_date": 1445875989, "creation_date": 1423080715, "answer_id": 28330554, "question_id": 28330522, "link": "https://stackoverflow.com/questions/28330522/how-to-tell-when-more-than-one-index-matches/28330554#28330554", "title": "How to tell when more than one index matches?", "body": "<p><code>list.index(value)</code> returns the index of the <em>first</em> occurrence of <code>value</code> in <code>list</code>.</p>\n\n<p>A better idea is to use a simple list comprehension and <a href=\"https://docs.python.org/3/library/functions.html#enumerate\" rel=\"nofollow\"><code>enumerate</code></a>:</p>\n\n<pre><code>indices = [i for i, x in enumerate(iterable) if x == v]\n</code></pre>\n\n<p>where <code>v</code> is the value you want to search for and <code>iterable</code> is an object that supports iterator protocol e.g. it can be a generator or a sequence (like <code>list</code>).</p>\n\n<p>For your specific use case, that'll look like</p>\n\n<pre><code>def smallest(seq):\n    m = min(seq)\n    return [i for i, x in enumerate(seq) if x == m]\n</code></pre>\n\n<p>Some examples:</p>\n\n<pre><code>In [23]: smallest([1, 2, 3, 4])\nOut[23]: [0]\n\nIn [24]: smallest([1, 1, 1, 1])\nOut[24]: [0, 1, 2, 3]\n</code></pre>\n\n<p>If you're not sure whether the <code>seq</code> is empty or not, you can pass the <code>default=-1</code> (or some other value) argument to <code>min</code> function (in Python 3.4+):</p>\n\n<pre><code>m = min(seq, default=-1)\n</code></pre>\n\n<p>Consider using <code>m = min(seq or (-1,))</code> (again, any value) instead, when using older Python.</p>\n"}, {"comments": [{"owner": {"reputation": 3057, "user_id": 2415524, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wQrhZ.jpg?s=128&g=1", "display_name": "mbomb007", "link": "https://stackoverflow.com/users/2415524/mbomb007"}, "edited": false, "score": 0, "creation_date": 1423081850, "post_id": 28330794, "comment_id": 45008828, "body": "You just did the exact same thing as @vaultah&#39;s answer, but without a list comprehension, making it not as efficient."}, {"owner": {"reputation": 95, "user_id": 3997692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C9nnp.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/3997692/artem"}, "reply_to_user": {"reputation": 3057, "user_id": 2415524, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/wQrhZ.jpg?s=128&g=1", "display_name": "mbomb007", "link": "https://stackoverflow.com/users/2415524/mbomb007"}, "edited": false, "score": 0, "creation_date": 1423082629, "post_id": 28330794, "comment_id": 45009258, "body": "If there is only one element in sequence it more efficient than list comprehension, it goes through all elements only once, list comprehension goes anyway does more useless work, but you can replace for loop with list comprehension in my solution. It saves you two lines of code."}], "tags": [], "owner": {"reputation": 95, "user_id": 3997692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C9nnp.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/3997692/artem"}, "is_accepted": false, "score": 0, "last_activity_date": 1423082975, "last_edit_date": 1423082975, "creation_date": 1423081605, "answer_id": 28330794, "question_id": 28330522, "link": "https://stackoverflow.com/questions/28330522/how-to-tell-when-more-than-one-index-matches/28330794#28330794", "title": "How to tell when more than one index matches?", "body": "<p>Here is my solution:</p>\n\n<pre><code>def all_smallest(seq):\n    \"\"\"Takes sequence, returns list of all smallest elements\"\"\"\n    min_i = min(seq)\n    amount = seq.count(min_i)\n    ans = []\n    if amount &gt; 1:\n        for n, i in enumerate(seq):\n            if i == min_i:\n                ans.append(n)\n            if len(ans) == amount:\n                return ans            \n    return [seq.index(min_i)]\n</code></pre>\n\n<p>Code very straightforward I think here all clear without any explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 16299, "user_id": 2870069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2fc1f306eeb7375a6180695ee533f4b?s=128&d=identicon&r=PG", "display_name": "Jakob", "link": "https://stackoverflow.com/users/2870069/jakob"}, "is_accepted": false, "score": 1, "last_activity_date": 1423086105, "creation_date": 1423086105, "answer_id": 28332007, "question_id": 28330522, "link": "https://stackoverflow.com/questions/28330522/how-to-tell-when-more-than-one-index-matches/28332007#28332007", "title": "How to tell when more than one index matches?", "body": "<p>A different approach using <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow\">numpy.where</a> could look like</p>\n\n<pre><code>In [1]: import numpy as np\nIn [2]: def np_smallest(seq):\n   ...:     return np.where(seq==seq.min())[0]\n\nIn [3]: np_smallest(np.array([1,1,1,1]))\nOut[3]: array([0, 1, 2, 3])\n\nIn [4]: np_smallest(np.array([1,2,3,4]))\nOut[4]: array([0])\n</code></pre>\n\n<p>This approach is slighly less efficient than the list comprehension for small list but if you face large arrays, numpy may save you some time.</p>\n\n<pre><code>In [5]: seq = np.random.randint(100, size=1000)\nIn [6]: %timeit np_smallest(seq)\n100000 loops, best of 3: 10.1 \u00b5s per loop\nIn [7]: %timeit smallest(seq)\n1000 loops, best of 3: 194 \u00b5s per loop\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4106940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/645910a11198bcd4cbe93af5899b33d4?s=128&d=identicon&r=PG&f=1", "display_name": "Tazza2092", "link": "https://stackoverflow.com/users/4106940/tazza2092"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 28330554, "answer_count": 3, "score": 2, "last_activity_date": 1445875989, "creation_date": 1423080566, "last_edit_date": 1445094009, "question_id": 28330522, "link": "https://stackoverflow.com/questions/28330522/how-to-tell-when-more-than-one-index-matches", "title": "How to tell when more than one index matches?", "body": "<p>I have any array of values, that are often the same and I am trying to find the index of the smallest one. But I want to know all the objects that are the same.</p>\n\n<p>So for example I have the array <code>a = [1, 2, 3, 4]</code> and to find the index of the smallest one I use <code>a.index(min(a))</code> and this returns 0. But if I had an array of <code>a = [1, 1, 1, 1]</code>, using the same thing would still return 0.</p>\n\n<p>I want to know that multiple indices match what I am searching for and what those indices are. How would I go about doing this?</p>\n"}, {"tags": ["python", "api", "win32com", "solidworks"], "comments": [{"owner": {"reputation": 3967, "user_id": 1168513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9433832e9ef6c54c2b4203fda124a327?s=128&d=identicon&r=PG&f=1", "display_name": "Moritz", "link": "https://stackoverflow.com/users/1168513/moritz"}, "edited": false, "score": 0, "creation_date": 1423081166, "post_id": 28330460, "comment_id": 45008491, "body": "Try using <code>pythoncom.Empty</code> instead, which will provide a <code>VT_EMPTY</code> param (rather than <code>pythoncom.Missing</code>, which provides nothing at all)"}, {"owner": {"reputation": 95, "user_id": 3997692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C9nnp.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/3997692/artem"}, "reply_to_user": {"reputation": 3967, "user_id": 1168513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9433832e9ef6c54c2b4203fda124a327?s=128&d=identicon&r=PG&f=1", "display_name": "Moritz", "link": "https://stackoverflow.com/users/1168513/moritz"}, "edited": false, "score": 0, "creation_date": 1423081917, "post_id": 28330460, "comment_id": 45008855, "body": "I did what you suggested but it raises another error. And just to be clear, I&#39;ve tried all COM Variants, nothing worked."}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 4579959, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c7fad646b1aa65332ceb4d063c32a573?s=128&d=identicon&r=PG&f=1", "display_name": "Ksdmg", "link": "https://stackoverflow.com/users/4579959/ksdmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1424358746, "last_edit_date": 1424358746, "creation_date": 1424358155, "answer_id": 28609602, "question_id": 28330460, "link": "https://stackoverflow.com/questions/28330460/replace-vbas-object-empty-with-pythoncom-missing-doesnt-work/28609602#28609602", "title": "Replace VBA&#39;s object &quot;Empty&quot; with pythoncom.Missing doesn&#39;t work", "body": "<p>just insert empty variables. Had the same error in VBA where you had to pass variables declared as LONG or it would not work.</p>\n"}], "owner": {"reputation": 95, "user_id": 3997692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C9nnp.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/3997692/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424358746, "creation_date": 1423080359, "last_edit_date": 1495539809, "question_id": 28330460, "link": "https://stackoverflow.com/questions/28330460/replace-vbas-object-empty-with-pythoncom-missing-doesnt-work", "title": "Replace VBA&#39;s object &quot;Empty&quot; with pythoncom.Missing doesn&#39;t work", "body": "<p>Few years ago I wrote script in Python to automate few tedious processes that I was doing in SolidWorks_2012. I was running that script on Win7 32 bit with python 27 32 bit and SolidWorks_2012 32 bit.</p>\n\n<p>Now, I faced exactly the same problem and I tried to use old script but on <strong>OpenDoc6</strong> (and on others functions, where <strong>values pass by ref</strong>) it raises exception:</p>\n\n<pre><code>\"Objects of type 'PyOleMissing' can not be converted to a COM VARIANT\"\n</code></pre>\n\n<p>Here is some sample that I can't make to work:</p>\n\n<pre><code>import win32com.client as win32\nimport pythoncom\n\nsw = win32.Dispatch('SldWorks.Application')\npath_to_file = \"some_path\"\nsw_asm = sw.OpenDoc6(path_to_file, 2, 1, \"\", pythoncom.Missing, pythoncom.Missing)\n</code></pre>\n\n<p>Here is some specification of this function from docs for VBA:</p>\n\n<pre><code>Function OpenDoc6( _\n   ByVal FileName As System.String, _\n   ByVal Type As System.Integer, _\n   ByVal Options As System.Integer, _\n   ByVal Configuration As System.String, _\n   ByRef Errors As System.Integer, _\n   ByRef Warnings As System.Integer _\n) As ModelDoc2\n</code></pre>\n\n<p>As you can see two latest are passing by references.</p>\n\n<p>Also <a href=\"https://stackoverflow.com/questions/19454804/pointer-callout-for-selectbyid2\">here</a> is the same issue without any solution.\nAnd just in case this may be important, now I'm running win 8 64,  python 27 32/64 and SolidWorks 2014 64.</p>\n\n<p><strong>Thank you in advance!</strong></p>\n"}, {"tags": ["python", "python-3.x", "with-statement", "class-method"], "comments": [{"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1423084350, "post_id": 28330453, "comment_id": 45010175, "body": "Why would you even try to do this?  My advice is to use the with statement as intended."}, {"owner": {"reputation": 1826, "user_id": 3515670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d4b91007fe3bbe2ae5781790dcc63c15?s=128&d=identicon&r=PG", "display_name": "Richard Neumann", "link": "https://stackoverflow.com/users/3515670/richard-neumann"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 3, "creation_date": 1423086575, "post_id": 28330453, "comment_id": 45011330, "body": "I am intending to extend the peewee.Model class with a class-level cleanup capability."}], "answers": [{"tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1423083415, "creation_date": 1423083415, "answer_id": 28331276, "question_id": 28330453, "link": "https://stackoverflow.com/questions/28330453/enter-and-exit-on-class-level-in-python-3/28331276#28331276", "title": "__enter__ and __exit__ on class level in python 3", "body": "<p>It seems that CPython doesn't call a bound method like <code>instance.__exit__</code>, it seeks over instance type, doing something like <code>type(instance).__dict__['__exit__']</code> than calls it. And since <code>type(Spam)</code> is a special <code>type</code> object (not a <code>Spam</code> itself), it doesn't contain <code>__exit__</code> method. </p>\n\n<p>I tried to workaround that using metaclasses, but wasn't successful. <code>__getattr__</code> doesn't work either.</p>\n\n<p>See here: <a href=\"https://github.com/python/cpython/blob/2545fdbd4b4a6a77b132fccf816578f59b609be5/Objects/typeobject.c#L1362\" rel=\"nofollow\">https://github.com/python/cpython/blob/2545fdbd4b4a6a77b132fccf816578f59b609be5/Objects/typeobject.c#L1362</a></p>\n\n<ul>\n<li>Py_TYPE is similiar to <code>type(self)</code></li>\n<li>_PyType_LookupId walks over <code>type(self).__dict__</code> (no <code>__getattr__</code> call here)</li>\n</ul>\n\n<p>Python 2 implementation is different, but main idea about getting <code>type(self)</code> applies to it too</p>\n"}, {"comments": [{"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 1, "creation_date": 1423083884, "post_id": 28331316, "comment_id": 45009937, "body": "I think then that the @classmethod should not be needed anymore."}, {"owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 1, "creation_date": 1423084171, "post_id": 28331316, "comment_id": 45010079, "body": "There is a difference in which class will be passed as <code>cls</code> with and without classmethod, with it will be <code>Spam</code>, without it will be <code>Eggs</code>, so while it&#39;s technically not needed, it&#39;s not the same."}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1423085927, "post_id": 28331316, "comment_id": 45010980, "body": "+1 but please remove the <code>@classmethod</code> decorators.  The first argument to a metaclass method is <i>already a class</i>.  Decorating with <code>@classmethod</code> means you get the metaclass instead of the class, which is rarely what you want."}, {"owner": {"reputation": 1826, "user_id": 3515670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d4b91007fe3bbe2ae5781790dcc63c15?s=128&d=identicon&r=PG", "display_name": "Richard Neumann", "link": "https://stackoverflow.com/users/3515670/richard-neumann"}, "edited": false, "score": 0, "creation_date": 1423086452, "post_id": 28331316, "comment_id": 45011264, "body": "Thanks. That&#39;s exactly what I was looking for."}, {"owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1423086897, "post_id": 28331316, "comment_id": 45011493, "body": "@Kevin Ok, removed it, you and @nneonneo are correct, it makes little sense to have it on the metaclass. This way the <code>cleanup_stuff</code> method could also be declared on <code>Eggs</code> and not only on <code>Spam</code>..."}, {"owner": {"reputation": 1826, "user_id": 3515670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d4b91007fe3bbe2ae5781790dcc63c15?s=128&d=identicon&r=PG", "display_name": "Richard Neumann", "link": "https://stackoverflow.com/users/3515670/richard-neumann"}, "edited": false, "score": 0, "creation_date": 1423086904, "post_id": 28331316, "comment_id": 45011498, "body": "Nonetheless I need to use the class in any case, since stuff from class-methods needs to be cleaned up on the class&#39;s level. I don&#39;t use instances in my case."}], "tags": [], "owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "is_accepted": true, "score": 14, "last_activity_date": 1423086157, "last_edit_date": 1423086157, "creation_date": 1423083551, "answer_id": 28331316, "question_id": 28330453, "link": "https://stackoverflow.com/questions/28330453/enter-and-exit-on-class-level-in-python-3/28331316#28331316", "title": "__enter__ and __exit__ on class level in python 3", "body": "<p><code>__enter__</code> and <code>__exit__</code> are special methods, and as such only work correctly when <a href=\"https://docs.python.org/3/reference/datamodel.html#special-method-lookup\" rel=\"noreferrer\">defined on a object's type</a>, not in it's instance dictionary.</p>\n\n<p>Now <code>Spam</code> is a instance of <code>type</code>, and <code>type(Spam).__enter__</code> and <code>type(Spam).__exit__</code> do not exist. Therefore you get an attribute error.</p>\n\n<p>To make this work, the methods would need to be declared on the metaclass of the class you want to use. Example:</p>\n\n<pre><code>class Spam(type):\n\n    def __enter__(cls):\n        print('enter')\n        return cls\n\n    def __exit__(cls, typ, value, tb):\n        print('exit')\n\nclass Eggs(metaclass=Spam):\n    pass\n\nwith Eggs:\n    pass\n</code></pre>\n\n<p>Now <code>Eggs</code> is an instance of <code>Spam</code> (<code>type(Eggs)</code> == <code>Spam</code>, and therefore <code>type(Eggs).__enter__</code> and <code>type(Eggs).__exit__</code> do exist).</p>\n\n<p>However defining a metaclass just to use an instance of it as a context manager seems a little over the top. The more straight forward solution starting from your example would be to just use</p>\n\n<pre><code>with Spam():\n    pass\n</code></pre>\n\n<p>Or if you want to reuse the same instance later:</p>\n\n<pre><code>spam = Spam()\nwith spam:\n    pass\n</code></pre>\n"}], "owner": {"reputation": 1826, "user_id": 3515670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d4b91007fe3bbe2ae5781790dcc63c15?s=128&d=identicon&r=PG", "display_name": "Richard Neumann", "link": "https://stackoverflow.com/users/3515670/richard-neumann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7558, "favorite_count": 2, "accepted_answer_id": 28331316, "answer_count": 2, "score": 5, "last_activity_date": 1423086157, "creation_date": 1423080339, "question_id": 28330453, "link": "https://stackoverflow.com/questions/28330453/enter-and-exit-on-class-level-in-python-3", "title": "__enter__ and __exit__ on class level in python 3", "body": "<p>I am unsuccessfully trying to get the magic <code>with</code>-statement methods <code>__enter__</code> and <code>__exit__</code> running on class-level:</p>\n\n<pre><code>class Spam():\n\n    @classmethod\n    def __enter__(cls):\n        return cls\n\n    @classmethod\n    def __exit__(cls, typ, value, tb):\n        cls.cleanup_stuff()\n\n\nwith Spam:\n    pass\n</code></pre>\n\n<p>However, this will result in an <code>AttributeError</code>:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"./test.py\", line 15, in &lt;module&gt;\n    with Spam:\nAttributeError: __exit__\n</code></pre>\n\n<p>Is it possible to use the <code>__enter__</code> and <code>__exit__</code> methods on class-level anyway?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 1, "creation_date": 1423080471, "post_id": 28330448, "comment_id": 45008084, "body": "Because a single remove removes only 1 item. I think you need to rephrase your question because its not very clear"}, {"owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "edited": false, "score": 3, "creation_date": 1423080552, "post_id": 28330448, "comment_id": 45008136, "body": "You&#39;re altering a list as you&#39;re iterating over it. That is not a very good idea."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 4263486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bce6097901721c6621ad26233a1ac8e?s=128&d=identicon&r=PG&f=1", "display_name": "enmyj", "link": "https://stackoverflow.com/users/4263486/enmyj"}, "is_accepted": false, "score": 0, "last_activity_date": 1423080781, "creation_date": 1423080781, "answer_id": 28330579, "question_id": 28330448, "link": "https://stackoverflow.com/questions/28330448/remove-items-from-list-in-python/28330579#28330579", "title": "remove items from list in python", "body": "<p>Instead of trying to remove the blanks, try instead to make a new array which contains only the non-blank items</p>\n\n<pre><code>a = ['UUU', 'F', 'CUU', 'L', 'AUU', 'I', 'GUU', 'V', 'UUC', 'F', 'CUC', 'L', 'AUC', 'I', 'GUC', 'V', 'UUA', 'L', 'CUA', 'L', 'AUA', 'I', 'GUA', 'V', 'UUG', 'L', 'CUG', 'L', 'AUG', 'M', 'GUG', 'V', 'UCU', 'S', 'CCU', 'P', 'ACU', 'T', 'GCU', 'A', 'UCC', 'S', 'CCC', 'P', 'ACC', 'T', 'GCC', 'A', 'UCA', 'S', 'CCA', 'P', 'ACA', 'T', 'GCA', 'A', 'UCG', 'S', 'CCG', 'P', 'ACG', 'T', 'GCG', 'A', 'UAU', 'Y', 'CAU', 'H', 'AAU', 'N', 'GAU', 'D', 'UAC', 'Y', 'CAC', 'H', 'AAC', 'N', 'GAC', 'D', 'UAA', 'Stop', 'CAA', 'Q', 'AAA', 'K', 'GAA', 'E', 'UAG', 'Stop', 'CAG', 'Q', 'AAG', 'K', 'GAG', 'E', 'UGU', 'C', 'CGU', 'R', 'AGU', 'S', 'GGU', 'G', 'UGC', 'C', 'CGC', 'R', '', '', '', '', '', 'AGC', 'S', '', '', '', '', '', 'GGC', 'G', 'UGA', 'Stop', '', '', 'CGA', 'R', '', '', '', '', '', 'AGA', 'R', '', '', '', '', '', 'GGA', 'G', 'UGG', 'W', '', '', '', '', '', 'CGG', 'R', '', '', '', '', '', 'AGG', 'R', '', '', '', '', '', 'GGG', 'G', '']\n\nb = []\nfor x in a:\n    if len(x)&gt;0:\n        b.append(x)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4694, "user_id": 4367228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bdee64eedba21c13b7017601c566d05?s=128&d=identicon&r=PG&f=1", "display_name": "MrAlexBailey", "link": "https://stackoverflow.com/users/4367228/mralexbailey"}, "is_accepted": false, "score": 1, "last_activity_date": 1423080782, "creation_date": 1423080782, "answer_id": 28330580, "question_id": 28330448, "link": "https://stackoverflow.com/questions/28330448/remove-items-from-list-in-python/28330580#28330580", "title": "remove items from list in python", "body": "<p>You can also use a list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; n = ['UUU', 'F', 'CUU', 'L', 'AUU', 'I', 'GUU', 'V', 'UUC', 'F', 'CUC', 'L', 'AUC', 'I', 'GUC', 'V', 'UUA', 'L', 'CUA', 'L', 'AUA', 'I', 'GUA', 'V', 'UUG', 'L', 'CUG', 'L', 'AUG', 'M', 'GUG', 'V', 'UCU', 'S', 'CCU', 'P', 'ACU', 'T', 'GCU', 'A', 'UCC', 'S', 'CCC', 'P', 'ACC', 'T', 'GCC', 'A', 'UCA', 'S', 'CCA', 'P', 'ACA', 'T', 'GCA', 'A', 'UCG', 'S', 'CCG', 'P', 'ACG', 'T', 'GCG', 'A', 'UAU', 'Y', 'CAU', 'H', 'AAU', 'N', 'GAU', 'D', 'UAC', 'Y', 'CAC', 'H', 'AAC', 'N', 'GAC', 'D', 'UAA', 'Stop', 'CAA', 'Q', 'AAA', 'K', 'GAA', 'E', 'UAG', 'Stop', 'CAG', 'Q', 'AAG', 'K', 'GAG', 'E', 'UGU', 'C', 'CGU', 'R', 'AGU', 'S', 'GGU', 'G', 'UGC', 'C', 'CGC', 'R', '', '', '', '', '', 'AGC', 'S', '', '', '', '', '', 'GGC', 'G', 'UGA', 'Stop', '', '', 'CGA', 'R', '', '', '', '', '', 'AGA', 'R', '', '', '', '', '', 'GGA', 'G', 'UGG', 'W', '', '', '', '', '', 'CGG', 'R', '', '', '', '', '', 'AGG', 'R', '', '', '', '', '', 'GGG', 'G', '']    \n\n&gt;&gt;&gt; n = [x for x in n if x != '']   # or more simply [x for x in n if x]\n&gt;&gt;&gt; print n\n\n['UUU', 'F', 'CUU', 'L', 'AUU', 'I', 'GUU', 'V', 'UUC', 'F', 'CUC', 'L', 'AUC', 'I', 'GUC', 'V', 'UUA', 'L', 'CUA', 'L', 'AUA', 'I', 'GUA', 'V', 'UUG', 'L', 'CUG', 'L', 'AUG', 'M', 'GUG', 'V', 'UCU', 'S', 'CCU', 'P', 'ACU', 'T', 'GCU', 'A', 'UCC', 'S', 'CCC', 'P', 'ACC', 'T', 'GCC', 'A', 'UCA', 'S', 'CCA', 'P', 'ACA', 'T', 'GCA', 'A', 'UCG', 'S', 'CCG', 'P', 'ACG', 'T', 'GCG', 'A', 'UAU', 'Y', 'CAU', 'H', 'AAU', 'N', 'GAU', 'D', 'UAC', 'Y', 'CAC', 'H', 'AAC', 'N', 'GAC', 'D', 'UAA', 'Stop', 'CAA', 'Q', 'AAA', 'K', 'GAA', 'E', 'UAG', 'Stop', 'CAG', 'Q', 'AAG', 'K', 'GAG', 'E', 'UGU', 'C', 'CGU', 'R', 'AGU', 'S', 'GGU', 'G', 'UGC', 'C', 'CGC', 'R', 'AGC', 'S', 'GGC', 'G', 'UGA', 'Stop', 'CGA', 'R', 'AGA', 'R', 'GGA', 'G', 'UGG', 'W', 'CGG', 'R', 'AGG', 'R', 'GGG', 'G']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 812, "user_id": 2097159, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/25bbccaf149c63cdb3a6c5b27cb9c492?s=128&d=identicon&r=PG", "display_name": "user2097159", "link": "https://stackoverflow.com/users/2097159/user2097159"}, "is_accepted": true, "score": 0, "last_activity_date": 1423080881, "creation_date": 1423080881, "answer_id": 28330605, "question_id": 28330448, "link": "https://stackoverflow.com/questions/28330448/remove-items-from-list-in-python/28330605#28330605", "title": "remove items from list in python", "body": "<p>Another option is</p>\n\n<pre><code>while '' in n:\n    n.remove('')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 4240869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34bb8f7d2483e6b730c3b2345175f40?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/4240869/richard"}, "edited": false, "score": 0, "creation_date": 1423084711, "post_id": 28330622, "comment_id": 45010346, "body": "I see the point. If I delete elements during iteration, every time one item will be skipped.Thanks\uff01"}], "tags": [], "owner": {"reputation": 1534, "user_id": 3591336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JJbmv.jpg?s=128&g=1", "display_name": "dylrei", "link": "https://stackoverflow.com/users/3591336/dylrei"}, "is_accepted": false, "score": 1, "last_activity_date": 1423080943, "creation_date": 1423080943, "answer_id": 28330622, "question_id": 28330448, "link": "https://stackoverflow.com/questions/28330448/remove-items-from-list-in-python/28330622#28330622", "title": "remove items from list in python", "body": "<p>To expand a bit on why you shouldn't change a list this way as you're iterating over it, consider the following simplification of what you're doing:</p>\n\n<pre><code>&gt;&gt;&gt; a = range(10)\n&gt;&gt;&gt; a\n[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n&gt;&gt;&gt; for item in a:\n...     print item\n...     a.remove(item)\n... \n0\n2\n4\n6\n8\n&gt;&gt;&gt; a\n[1, 3, 5, 7, 9]\n</code></pre>\n\n<p>As this illustrates, by changing the list, you're also changing which elements you act on in successive iterations. That's almost never a good idea and appears not to be what you're trying to accomplish.</p>\n\n<p>Instead, how about a list comprehension:</p>\n\n<pre><code>[item for item in mylist if item != '']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 457, "user_id": 300130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5e3hh.jpg?s=128&g=1", "display_name": "return42", "link": "https://stackoverflow.com/users/300130/return42"}, "is_accepted": false, "score": 0, "last_activity_date": 1423578234, "creation_date": 1423578234, "answer_id": 28434036, "question_id": 28330448, "link": "https://stackoverflow.com/questions/28330448/remove-items-from-list-in-python/28434036#28434036", "title": "remove items from list in python", "body": "<p>As dylrei mentioned, list comprehension is a pythonic solution, but is has a drawback with (very) huge list since it copies the list. If you have a huge list and the item you want to remove is only a few times in the list, then I suggest the following (less pythonic) solution:</p>\n\n<pre><code>&gt;&gt;&gt; l=[1,2,3,4,5,6,1,2,3,1,2,1,1]\n&gt;&gt;&gt; while True:\n...     try:\n...         l.remove(1)\n...     except ValueError:\n...         break\n... \n&gt;&gt;&gt; l\n[2, 3, 4, 5, 6, 2, 3, 2]\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4240869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34bb8f7d2483e6b730c3b2345175f40?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/4240869/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 28330605, "answer_count": 5, "score": 0, "last_activity_date": 1423578234, "creation_date": 1423080330, "last_edit_date": 1423081123, "question_id": 28330448, "link": "https://stackoverflow.com/questions/28330448/remove-items-from-list-in-python", "title": "remove items from list in python", "body": "<pre><code>&gt;&gt;&gt; n\n['UUU', 'F', 'CUU', 'L', 'AUU', 'I', 'GUU', 'V', 'UUC', 'F', 'CUC', 'L', 'AUC', 'I', 'GUC', 'V', 'UUA', 'L', 'CUA', 'L', 'AUA', 'I', 'GUA', 'V', 'UUG', 'L', 'CUG', 'L', 'AUG', 'M', 'GUG', 'V', 'UCU', 'S', 'CCU', 'P', 'ACU', 'T', 'GCU', 'A', 'UCC', 'S', 'CCC', 'P', 'ACC', 'T', 'GCC', 'A', 'UCA', 'S', 'CCA', 'P', 'ACA', 'T', 'GCA', 'A', 'UCG', 'S', 'CCG', 'P', 'ACG', 'T', 'GCG', 'A', 'UAU', 'Y', 'CAU', 'H', 'AAU', 'N', 'GAU', 'D', 'UAC', 'Y', 'CAC', 'H', 'AAC', 'N', 'GAC', 'D', 'UAA', 'Stop', 'CAA', 'Q', 'AAA', 'K', 'GAA', 'E', 'UAG', 'Stop', 'CAG', 'Q', 'AAG', 'K', 'GAG', 'E', 'UGU', 'C', 'CGU', 'R', 'AGU', 'S', 'GGU', 'G', 'UGC', 'C', 'CGC', 'R', '', '', '', '', '', 'AGC', 'S', '', '', '', '', '', 'GGC', 'G', 'UGA', 'Stop', '', '', 'CGA', 'R', '', '', '', '', '', 'AGA', 'R', '', '', '', '', '', 'GGA', 'G', 'UGG', 'W', '', '', '', '', '', 'CGG', 'R', '', '', '', '', '', 'AGG', 'R', '', '', '', '', '', 'GGG', 'G', '']\n&gt;&gt;&gt; for item in n:\n...    if item=='':\n...      n.remove(item)\n... \n&gt;&gt;&gt; n\n['UUU', 'F', 'CUU', 'L', 'AUU', 'I', 'GUU', 'V', 'UUC', 'F', 'CUC', 'L', 'AUC', 'I', 'GUC', 'V', 'UUA', 'L', 'CUA', 'L', 'AUA', 'I', 'GUA', 'V', 'UUG', 'L', 'CUG', 'L', 'AUG', 'M', 'GUG', 'V', 'UCU', 'S', 'CCU', 'P', 'ACU', 'T', 'GCU', 'A', 'UCC', 'S', 'CCC', 'P', 'ACC', 'T', 'GCC', 'A', 'UCA', 'S', 'CCA', 'P', 'ACA', 'T', 'GCA', 'A', 'UCG', 'S', 'CCG', 'P', 'ACG', 'T', 'GCG', 'A', 'UAU', 'Y', 'CAU', 'H', 'AAU', 'N', 'GAU', 'D', 'UAC', 'Y', 'CAC', 'H', 'AAC', 'N', 'GAC', 'D', 'UAA', 'Stop', 'CAA', 'Q', 'AAA', 'K', 'GAA', 'E', 'UAG', 'Stop', 'CAG', 'Q', 'AAG', 'K', 'GAG', 'E', 'UGU', 'C', 'CGU', 'R', 'AGU', 'S', 'GGU', 'G', 'UGC', 'C', 'CGC', 'R', 'AGC', 'S', 'GGC', 'G', 'UGA', 'Stop', 'CGA', 'R', 'AGA', 'R', 'GGA', 'G', 'UGG', 'W', '', '', '', '', 'CGG', 'R', '', '', '', '', '', 'AGG', 'R', '', '', '', '', '', 'GGG', 'G', '']\n</code></pre>\n\n<p>How to explain that iterative \"remove\" operation can't remove all the '' elements in the list?</p>\n"}, {"tags": ["python", "exception"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1423080567, "post_id": 28330446, "comment_id": 45008147, "body": "See <a href=\"http://stackoverflow.com/questions/3361853/how-do-i-get-the-stack-trace-from-an-exception-object-in-python\" title=\"how do i get the stack trace from an exception object in python\">stackoverflow.com/questions/3361853/&hellip;</a>"}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 0, "creation_date": 1423081739, "post_id": 28330446, "comment_id": 45008771, "body": "All exceptions have a reference to the stacktrace in Python."}], "owner": {"reputation": 330, "user_id": 2631858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1a9f7c2c09527821ae9e6ba2d659ad0e?s=128&d=identicon&r=PG", "display_name": "Raphi", "link": "https://stackoverflow.com/users/2631858/raphi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 11, "favorite_count": 0, "closed_date": 1423081633, "answer_count": 0, "score": 0, "last_activity_date": 1423080324, "creation_date": 1423080324, "question_id": 28330446, "link": "https://stackoverflow.com/questions/28330446/traced-exceptions", "closed_reason": "Duplicate", "title": "Traced Exceptions?", "body": "<p>I was wondering if there already existed an exception type that maintains some sort of reference to the point where it was raised. Not even necessarily a full stack trace but maybe just a reference to the method that it was called in. This seems pretty generic so I feel like someone must've created it at some point.</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 334, "user_id": 3869542, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/814f26ada78696136409f36ffd412477?s=128&d=identicon&r=PG&f=1", "display_name": "VT_Drew", "link": "https://stackoverflow.com/users/3869542/vt-drew"}, "edited": false, "score": 0, "creation_date": 1423168158, "post_id": 28333021, "comment_id": 45050550, "body": "Thanks! This worked, but I had to add add <code>empty_label=&quot;Show All&quot;</code> under the init, otherwise it was complaining that the global variable empty_label was not defined. Also you explanation was informative, thanks again."}], "tags": [], "owner": {"reputation": 459, "user_id": 1017534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61b7c60048499c4be596844c6acd4c0?s=128&d=identicon&r=PG", "display_name": "vishen", "link": "https://stackoverflow.com/users/1017534/vishen"}, "is_accepted": true, "score": 1, "last_activity_date": 1423089924, "creation_date": 1423089924, "answer_id": 28333021, "question_id": 28330412, "link": "https://stackoverflow.com/questions/28330412/django-adding-an-empty-label-to-choice-field-using-a-valuelistquery-set-for-dist/28333021#28333021", "title": "Django adding an empty label to Choice Field using a ValueListQuery Set for distinct values", "body": "<p>This is because the <code>super(FilterForm, self).__init__(*args, **kwargs)</code> will call the <code>EmptyChoiceField.__init__</code> method, and you are then overriding the choices right after the super call so you are overridding the choices the <code>EmptyChoiceField</code> set.</p>\n\n<p>There are a few ways to solve this, I am not sure which one is the best, but the easiest way is to do the following in the <code>FilterForm.__init__</code>:</p>\n\n<pre><code>def __init__(self, *args, **kwargs):\n    super(FilterForm, self).__init__(*args, **kwargs)\n    choices = Stuff.objects.all().values_list(\"y\", \"y\").distinct()\n    self.fields['y'].choices = tuple([(u'', empty_label)] + list(choices))\n</code></pre>\n"}], "owner": {"reputation": 334, "user_id": 3869542, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/814f26ada78696136409f36ffd412477?s=128&d=identicon&r=PG&f=1", "display_name": "VT_Drew", "link": "https://stackoverflow.com/users/3869542/vt-drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 28333021, "answer_count": 1, "score": 0, "last_activity_date": 1423089924, "creation_date": 1423080219, "last_edit_date": 1495541191, "question_id": 28330412, "link": "https://stackoverflow.com/questions/28330412/django-adding-an-empty-label-to-choice-field-using-a-valuelistquery-set-for-dist", "title": "Django adding an empty label to Choice Field using a ValueListQuery Set for distinct values", "body": "<p>So I am trying to use a ValueListQuerySet with a empty label in a form that filters the results shown on a page. I had success using <a href=\"https://gist.github.com/davidbgk/651080\" rel=\"nofollow noreferrer\">EmptyChoiceField code</a> (this code is also cut in paste in my code below), however when I try to move the choices into the the init, as shown in <a href=\"https://stackoverflow.com/questions/6707991/django-modelchoicefield-using-distinct-values-from-one-model-attribute\">this SO question</a>, so that the choices refresh every time the form loads I end up losing the empty value (see my comments in the code below). </p>\n\n<pre><code>class EmptyChoiceField(forms.ChoiceField):\n    def __init__(self, choices=(), empty_label=None, required=True, widget=None, label=None, initial=None, help_text=None, *args, **kwargs):\n\n        # prepend an empty label if it exists (and field is not required!)\n        if not required and empty_label is not None:\n            choices = tuple([(u'', empty_label)] + list(choices))\n        super(EmptyChoiceField, self).__init__(choices=choices, required=required, widget=widget, label=label, initial=initial, help_text=help_text, *args, **kwargs) \n\n\nclass FilterForm(forms.Form):\n    # The next line has the empty label but the list won't get updated when the form loads\n    x = EmptyChoiceField(choices=Stuff.objects.all().values_list(\"x\", \"x\").distinct(), required=False, empty_label=\"Show All\")\n    # The values get updated in the next line, but the empty_label stops working\n    y = EmptyChoiceField(choices=[], required=False, empty_label=\"Show All\")\n\n    def __init__(self, *args, **kwargs):\n        super(FilterForm, self).__init__(*args, **kwargs)\n        self.fields['y'].choices= Stuff.objects.all().values_list(\"y\", \"y\").distinct()\n</code></pre>\n"}, {"tags": ["python", "usb", "device", "ioctl", "hdd"], "answers": [{"tags": [], "owner": {"reputation": 337, "user_id": 1847365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8776e180be03572872038622c72d757a?s=128&d=identicon&r=PG", "display_name": "binarym", "link": "https://stackoverflow.com/users/1847365/binarym"}, "is_accepted": false, "score": 1, "last_activity_date": 1449245844, "last_edit_date": 1495541243, "creation_date": 1449245844, "answer_id": 34092715, "question_id": 28330329, "link": "https://stackoverflow.com/questions/28330329/ioctl-hdio-get-identity-fails-on-usb-storage-devices/34092715#34092715", "title": "ioctl HDIO_GET_IDENTITY fails on USB storage devices", "body": "<p>HDIO_GET_IDENTITY seems to be IDE/ATA specific.</p>\n\n<p>Mass storage abstracts the ATA device into a SCSI device, so you should have a look to:</p>\n\n<ul>\n<li>udev</li>\n<li>sg3-utils / libsg3</li>\n<li>sysfs (under linux)</li>\n<li>more complicated scsi command</li>\n</ul>\n\n<p>See <a href=\"https://stackoverflow.com/questions/4441175/get-vendor-name-of-scsi\">Get vendor name of SCSI</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4530195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c9b645b5beafb9214e4d04d9a276a38?s=128&d=identicon&r=PG&f=1", "display_name": "dragosmc", "link": "https://stackoverflow.com/users/4530195/dragosmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449245844, "creation_date": 1423079957, "last_edit_date": 1592644375, "question_id": 28330329, "link": "https://stackoverflow.com/questions/28330329/ioctl-hdio-get-identity-fails-on-usb-storage-devices", "title": "ioctl HDIO_GET_IDENTITY fails on USB storage devices", "body": "<p>I am trying to get the identity of a USB Hard Drive connected through a SATA-to-USB adapter. The little program I wrote is in Python and uses this:</p>\n<pre><code>def getID(dev):\n    HDIO_GET_IDENTITY = 0x030d\n    with open(dev, 'r') as fd:\n        buf = fcntl.ioctl(fd, HDIO_GET_IDENTITY, ' ' * 512)\n        fields = struct.unpack_from(struct_hd_driveid, buf)\n        serial_no = fields[10].strip()\n        fw_rev = fields[14].strip()\n        model = fields[15].strip()\n    return (serial_no, fw_rev, model)\n</code></pre>\n<p>Method I found <a href=\"http://codingrelic.geekhold.com/2012/02/ata-commands-in-python.html\" rel=\"nofollow noreferrer\">here</a></p>\n<p>The method runs successfully on my internal HDD but I get a</p>\n<pre><code>IOError: [Errno 22] Invalid argument\n</code></pre>\n<p>when running it on my USB connected HDD.</p>\n<p>I couldn't find anything related to this - I assume that the operation code may be different for USB connected HDDs....</p>\n<p>I almost forgot to say that I am running this from Ubuntu</p>\n<pre><code>Linux dragosmc-Lenovo-V570 3.13.0-45-generic #74-Ubuntu SMP Tue Jan 13 19:36:28 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n<p>Thanks,\ndragosmc.</p>\n"}, {"tags": ["python", "passwords", "ldap"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 1987125, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2AYc5.jpg?s=128&g=1", "display_name": "Eduardo Luz", "link": "https://stackoverflow.com/users/1987125/eduardo-luz"}, "is_accepted": false, "score": 0, "last_activity_date": 1423125154, "creation_date": 1423125154, "answer_id": 28339386, "question_id": 28330328, "link": "https://stackoverflow.com/questions/28330328/unicodepwd-issue-on-new-entry-to-ldap-with-python/28339386#28339386", "title": "unicodePwd issue on new entry to ldap with python", "body": "<p>I found this <a href=\"https://msdn.microsoft.com/en-us/library/cc223248.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/cc223248.aspx</a>.</p>\n\n<p>It says that is necessary to use TLS to edit unicodePwd attribute. So I need to use ldaps over 636 port.</p>\n"}], "owner": {"reputation": 71, "user_id": 1987125, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2AYc5.jpg?s=128&g=1", "display_name": "Eduardo Luz", "link": "https://stackoverflow.com/users/1987125/eduardo-luz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 779, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423125154, "creation_date": 1423079953, "question_id": 28330328, "link": "https://stackoverflow.com/questions/28330328/unicodepwd-issue-on-new-entry-to-ldap-with-python", "title": "unicodePwd issue on new entry to ldap with python", "body": "<p>I'm trying to insert a new entry in ldap but every time I set unicodePwd it returns: </p>\n\n<blockquote>\n  <p>{'info': '0000001F: SvcErr: DSID-031A120C, problem 5003\n  (WILL_NOT_PERFORM), data 0\\n', 'desc': 'Server is unwilling to\n  perform'}</p>\n</blockquote>\n\n<p>I tried this cases:</p>\n\n<pre><code>password = unicode('\"' + 'inicio@1' + '\"', \"iso-8859-1\")\npassword = password.encode(\"utf-16-le\")\n</code></pre>\n\n<p>This one:</p>\n\n<pre><code>password = str(unicode(\"inicio@1\"))\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>password = 'inicio@1'\npassword = ''.join(('\"', password, '\"')).encode('utf-16').lstrip('\\377\\376')\n</code></pre>\n\n<p>I'm using ldap on port 389.\nDoes anyone have any idea how to solve this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 16143, "user_id": 3357935, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jaomO.png?s=128&g=1", "display_name": "Stevoisiak", "link": "https://stackoverflow.com/users/3357935/stevoisiak"}, "edited": false, "score": 1, "creation_date": 1561395060, "post_id": 28330317, "comment_id": 100040689, "body": "Would you consider changing the accepted answer? <a href=\"https://stackoverflow.com/a/44175370/3357935\">Gae123&#39;s answer</a> seems to be a much simpler solution."}], "answers": [{"comments": [{"owner": {"reputation": 652, "user_id": 2176576, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a31ecf9e4a034256ac30bb6f75f70213?s=128&d=identicon&r=PG", "display_name": "user2176576", "link": "https://stackoverflow.com/users/2176576/user2176576"}, "edited": false, "score": 1, "creation_date": 1550742626, "post_id": 28330410, "comment_id": 96384546, "body": "without the &quot;datefmt&#39;, how would the formatter display the timestamp? I have a project where no date format is mentioned, I need to read logs and I see the timestamp as a 10 digit value like &quot;0063730209&quot; How should I read it as a real human understandable date? I have to right to edit the Logger. EPOCH convertor shows the time as a date in 1972 which is definitely an invalid and incorrect value. Any suggestions how I can read the timestamp present in my log file?"}, {"owner": {"reputation": 5707, "user_id": 2556118, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/GBgbz.jpg?s=128&g=1", "display_name": "Hans Ginzel", "link": "https://stackoverflow.com/users/2556118/hans-ginzel"}, "edited": false, "score": 0, "creation_date": 1615803981, "post_id": 28330410, "comment_id": 117795198, "body": "It is possible to use the <i>modern</i> <a href=\"https://docs.python.org/3/tutorial/inputoutput.html#tut-f-strings\" rel=\"nofollow noreferrer\">f-strings</a>-like <b>style</b> specification: <code>logging.basicConfig(level=logging.DEBUG, style=&#39;{&#39;, datefmt=&#39;%Y-%m-%d %H:%M:%S&#39;, format=&#39;{asctime} {levelname} {filename}:{lineno}: {message}&#39;)</code>"}], "tags": [], "owner": {"reputation": 2042, "user_id": 1591302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e263226d58575fe11998293a36a1061e?s=128&d=identicon&r=PG", "display_name": "paidhima", "link": "https://stackoverflow.com/users/1591302/paidhima"}, "is_accepted": false, "score": 54, "last_activity_date": 1594759675, "last_edit_date": 1594759675, "creation_date": 1423080214, "answer_id": 28330410, "question_id": 28330317, "link": "https://stackoverflow.com/questions/28330317/print-timestamp-for-logging-in-python/28330410#28330410", "title": "Print timestamp for logging in Python", "body": "<p>Something like below would do:</p>\n<pre><code>formatter = logging.Formatter(fmt='%(asctime)s %(levelname)-8s %(message)s',\n                              datefmt='%Y-%m-%d %H:%M:%S')\n</code></pre>\n<p>Have a look at the <code>logging</code> module for Python.  You don't need to mess about with creating your own date, just let the logging module do it for you.  That formatter object can be applied to a logging handler so you can just log with <code>logger.info('This is an info message.')</code>. No print statements required.</p>\n<p>Here's a boilerplate procedure I use:</p>\n<pre><code>import logging\nimport sys\n\ndef setup_custom_logger(name):\n    formatter = logging.Formatter(fmt='%(asctime)s %(levelname)-8s %(message)s',\n                                  datefmt='%Y-%m-%d %H:%M:%S')\n    handler = logging.FileHandler('log.txt', mode='w')\n    handler.setFormatter(formatter)\n    screen_handler = logging.StreamHandler(stream=sys.stdout)\n    screen_handler.setFormatter(formatter)\n    logger = logging.getLogger(name)\n    logger.setLevel(logging.DEBUG)\n    logger.addHandler(handler)\n    logger.addHandler(screen_handler)\n    return logger\n\n&gt;&gt;&gt; logger = setup_custom_logger('myapp')\n&gt;&gt;&gt; logger.info('This is a message!')\n2015-02-04 15:07:12 INFO     This is a message!\n&gt;&gt;&gt; logger.error('Here is another')\n2015-02-04 15:07:30 ERROR    Here is another\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 886, "user_id": 4175566, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/19f065b3c092a02e9fc8add086b5ddd1?s=128&d=identicon&r=PG", "display_name": "romanzipp", "link": "https://stackoverflow.com/users/4175566/romanzipp"}, "edited": false, "score": 0, "creation_date": 1423085470, "post_id": 28331475, "comment_id": 45010735, "body": "Can i print this function besides a text output like <code>print ok() + Started!</code> or do i have to edit the function so that <code>ok(&quot;Started!&quot;)</code> prints <code>[ OK ] 2015-03-02 ... Started!</code>?"}, {"owner": {"reputation": 4698, "user_id": 768335, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e6b5c6b336a98e7e2b2e7fd14165c45c?s=128&d=identicon&r=PG", "display_name": "Gab", "link": "https://stackoverflow.com/users/768335/gab"}, "reply_to_user": {"reputation": 886, "user_id": 4175566, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/19f065b3c092a02e9fc8add086b5ddd1?s=128&d=identicon&r=PG", "display_name": "romanzipp", "link": "https://stackoverflow.com/users/4175566/romanzipp"}, "edited": false, "score": 0, "creation_date": 1423148856, "post_id": 28331475, "comment_id": 45038835, "body": "@HerrAusragend I updated my answer to match your needs. Putting everything in the function that prints into the log is a good idea if you want to keep all the logging logic into one function. If not, the function could return a string instead of printing and then you can do whatever you want with the string."}], "tags": [], "owner": {"reputation": 4698, "user_id": 768335, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e6b5c6b336a98e7e2b2e7fd14165c45c?s=128&d=identicon&r=PG", "display_name": "Gab", "link": "https://stackoverflow.com/users/768335/gab"}, "is_accepted": false, "score": 0, "last_activity_date": 1423148768, "last_edit_date": 1423148768, "creation_date": 1423084099, "answer_id": 28331475, "question_id": 28330317, "link": "https://stackoverflow.com/questions/28330317/print-timestamp-for-logging-in-python/28331475#28331475", "title": "Print timestamp for logging in Python", "body": "<p>The datetime is calculated when the string is formed. So in your case, only once at the initialisation. Instead, you should do something like this:</p>\n\n<pre><code>def ok(hostname=None, status=None):\n    output = (\n        \"[\" + bc.OKGREEN + \" OK \"  + bc.ENDC + \"] \" +\n        datetime.datetime.now().strftime(\"%d.%b %Y %H:%M:%S\")\n    )\n    if hostname is not None:\n        output += ' ' + hostname\n    if status is not None:\n        output += ' ' + status\n    print output\n</code></pre>\n\n<p>To log, just do use <code>ok()</code> which will reevaluate the datetime each time.</p>\n\n<p>Note that @paidhima suggestion is also good.</p>\n"}, {"comments": [{"owner": {"reputation": 368, "user_id": 2226028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ee189d87f9cf6fda5118be0fe3ab5fd2?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2226028/michael"}, "edited": false, "score": 0, "creation_date": 1613998728, "post_id": 44175370, "comment_id": 117241263, "body": "Documentation on how to use logging: <a href=\"https://docs.python.org/3/howto/logging.html\" rel=\"nofollow noreferrer\">docs.python.org/3/howto/logging.html</a>"}], "tags": [], "owner": {"reputation": 5426, "user_id": 718488, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/e7ZPl.jpg?s=128&g=1", "display_name": "gae123", "link": "https://stackoverflow.com/users/718488/gae123"}, "is_accepted": true, "score": 168, "last_activity_date": 1505358275, "last_edit_date": 1505358275, "creation_date": 1495699288, "answer_id": 44175370, "question_id": 28330317, "link": "https://stackoverflow.com/questions/28330317/print-timestamp-for-logging-in-python/44175370#44175370", "title": "Print timestamp for logging in Python", "body": "<p>Before the first time you log anything do this:</p>\n\n<pre><code>logging.basicConfig(\n    format='%(asctime)s %(levelname)-8s %(message)s',\n    level=logging.INFO,\n    datefmt='%Y-%m-%d %H:%M:%S')\n</code></pre>\n\n<p>Example on the REPL:</p>\n\n<pre><code>&gt;&gt;&gt; import logging\n&gt;&gt;&gt; logging.basicConfig(\n...         format='%(asctime)s %(levelname)-8s %(message)s',\n...         level=logging.INFO,\n...         datefmt='%Y-%m-%d %H:%M:%S')\n&gt;&gt;&gt; \n&gt;&gt;&gt; logging.info('an info messge')\n2017-05-25 00:58:28 INFO     an info messge\n&gt;&gt;&gt; logging.debug('a debug messag is not shown')\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 886, "user_id": 4175566, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/19f065b3c092a02e9fc8add086b5ddd1?s=128&d=identicon&r=PG", "display_name": "romanzipp", "link": "https://stackoverflow.com/users/4175566/romanzipp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82010, "favorite_count": 12, "accepted_answer_id": 44175370, "answer_count": 3, "score": 70, "last_activity_date": 1594759675, "creation_date": 1423079908, "last_edit_date": 1423083352, "question_id": 28330317, "link": "https://stackoverflow.com/questions/28330317/print-timestamp-for-logging-in-python", "title": "Print timestamp for logging in Python", "body": "<p>I want to print the current timestamp, when an event succeeded or not in my python script.\nBy only adding...</p>\n\n<pre><code>datetime.datetime.now().strftime(\"%d.%b %Y %H:%M:%S\")\n</code></pre>\n\n<p>.... at the beginning of each line, te same date appears in every line</p>\n\n<pre><code>[INFO] 04.Feb 2015 20:49:41: cl1\n[ OK ] 04.Feb 2015 20:49:41: 8.8.8.8 ONLINE!\n[INFO] 04.Feb 2015 20:49:41: cl2\n[ OK ] 04.Feb 2015 20:49:41: 8.8.8.8 ONLINE!\n[INFO] 04.Feb 2015 20:49:41: cl3\n[ OK ] 04.Feb 2015 20:49:41: 8.8.8.8 ONLINE!\n</code></pre>\n\n<p>(I added <code>time.sleep(5)</code>in between)</p>\n\n<p>My next idea was to create a function, calling the current time, but i'm failing at embedding this function to the <code>print</code>command.</p>\n\n<blockquote>\n  <p>File rs.py</p>\n</blockquote>\n\n<pre><code>OK =   \"[\" + bc.OKGREEN + \" OK \"  + bc.ENDC + \"] \" + datetime.datetime.now().strftime(\"%d.%b %Y %H:%M:%S\")\nINFO = \"[\" + bc.OKBLUE  + \"INFO\"  + bc.ENDC + \"] \" + datetime.datetime.now().strftime(\"%d.%b %Y %H:%M:%S\")\nWARN = \"[\" + bc.WARN    + \"WARN\"  + bc.ENDC + \"] \" + datetime.datetime.now().strftime(\"%d.%b %Y %H:%M:%S\")\nERR =  \"[\" + bc.ERR     + \"FAIL\"  + bc.ENDC + \"] \" + datetime.datetime.now().strftime(\"%d.%b %Y %H:%M:%S\")\nDEB =  \"[\" + bc.HEADER  + \"DEBUG\" + bc.ENDC + \"] \" + datetime.datetime.now().strftime(\"%d.%b %Y %H:%M:%S\")\n</code></pre>\n\n<blockquote>\n  <p>File myapp.py</p>\n</blockquote>\n\n<pre><code>import rs # importing rs.py\n\nprint rs.OK + hostname + \"is up!\"\ntime.sleep(3)\nprint rs.ERR+ hostname + \"is down!\"\n</code></pre>\n\n<p>Is printing:</p>\n\n<pre><code>&gt;&gt;&gt; [INFO] 04.Feb 2015 20:49:41: xxx is up!\n&gt;&gt;&gt; [ERR ] 04.Feb 2015 20:49:41: xxx is down!\n</code></pre>\n"}, {"tags": ["python", "django", "forms", "django-templates"], "comments": [{"owner": {"reputation": 3139, "user_id": 1976791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eUhsR.png?s=128&g=1", "display_name": "ZZY", "link": "https://stackoverflow.com/users/1976791/zzy"}, "edited": false, "score": 0, "creation_date": 1423124020, "post_id": 28330274, "comment_id": 45023403, "body": "Do you want to print an initial value with specific format (SHORT_DATE_FORMAT), or want to re-format user&#39;s input if POST is invalid? And any reason that you must manually render the form instead of <code>{{form}}</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 259, "user_id": 3084737, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f03c4802fd1432daa89f6685df976f23?s=128&d=identicon&r=PG&f=1", "display_name": "Jay42", "link": "https://stackoverflow.com/users/3084737/jay42"}, "is_accepted": false, "score": 0, "last_activity_date": 1455151206, "creation_date": 1455151206, "answer_id": 35328804, "question_id": 28330274, "link": "https://stackoverflow.com/questions/28330274/django-date-form-field-cant-accept-dateshort-date-format-filter/35328804#35328804", "title": "Django date form field can&#39;t accept |date:&quot;SHORT_DATE_FORMAT&quot; filter", "body": "<p>I just ran into this same problem. the Json data i am getting back has the data as a string not a data object. so the date formatting template tag does not reconize it.</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#date\" rel=\"nofollow\">the documentation says:</a> </p>\n\n<p>If value is a datetime object (e.g., the result of datetime.datetime.now()), the output will be the string 'Wed 09 Jan 2008'.</p>\n\n<p>so it looks like it we ether need to convert the string into a good looking date or convert the string into a datetime object so that the tag will convert it. </p>\n\n<p>i will update with what seams the least painful. </p>\n"}], "owner": {"reputation": 7478, "user_id": 2658173, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a53cc204289b776e5e12dc9d43d2cbe6?s=128&d=identicon&r=PG&f=1", "display_name": "C.B.", "link": "https://stackoverflow.com/users/2658173/c-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 565, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1455151206, "creation_date": 1423079796, "question_id": 28330274, "link": "https://stackoverflow.com/questions/28330274/django-date-form-field-cant-accept-dateshort-date-format-filter", "title": "Django date form field can&#39;t accept |date:&quot;SHORT_DATE_FORMAT&quot; filter", "body": "<p>When looping over form fields for a ModelForm, I can apply the <code>date</code> filter to a <code>models.DateField()</code> just fine, i.e.</p>\n\n<pre><code>{{field.value|date:\"SHORT_DATE_FORMAT\"}}\n</code></pre>\n\n<p>but when looping over a non-model form with a <code>forms.DateField</code>, the data seems to be in string format already, and returns an empty string when I apply the filter. When I <code>print type(form.cleaned_data['date'])</code> it comes out as datetime however. Is <code>is_valid()</code> modifying the form in anyway, or any ideas on how to apply the filter?</p>\n"}, {"tags": ["python", "datetime", "pandas", "merge"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 4263486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bce6097901721c6621ad26233a1ac8e?s=128&d=identicon&r=PG&f=1", "display_name": "enmyj", "link": "https://stackoverflow.com/users/4263486/enmyj"}, "edited": false, "score": 0, "creation_date": 1423152784, "post_id": 28332405, "comment_id": 45041492, "body": "This works great! Would there be any way to make the new data frame have the same index as df1?"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 151, "user_id": 4263486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bce6097901721c6621ad26233a1ac8e?s=128&d=identicon&r=PG&f=1", "display_name": "enmyj", "link": "https://stackoverflow.com/users/4263486/enmyj"}, "edited": false, "score": 0, "creation_date": 1423157411, "post_id": 28332405, "comment_id": 45044456, "body": "@enmyj you can set the index afterwards: <code>res.index = df1.index</code>."}], "tags": [], "owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "is_accepted": true, "score": 1, "last_activity_date": 1423087611, "creation_date": 1423087611, "answer_id": 28332405, "question_id": 28330207, "link": "https://stackoverflow.com/questions/28330207/pandas-merge-on-specific-attributes-of-datetimeindex/28332405#28332405", "title": "Pandas Merge on Specific Attributes of DateTimeIndex", "body": "<p>You have to lose the quotesL</p>\n\n<pre><code>In [11]: pd.merge(df1, df2, left_on=[df1.index.month, df1.index.day, df1.index.hour],\n                            right_on=[df2.index.month, df2.index.day, df2.index.hour])\nOut[11]:\n   key_0  key_1  key_2       value  temperature\n0      1      1      0  204.501667         48.2\n1      1      1      1  125.345000         30.2\n2      1      1      2  119.660000         42.8\n</code></pre>\n\n<p><em>Here <code>\"df2.index.month\"</code> is a string whereas <code>df2.index.month</code> is the array of months.</em></p>\n"}, {"tags": [], "owner": {"reputation": 5496, "user_id": 2317751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lltcO.jpg?s=128&g=1", "display_name": "Liam Foley", "link": "https://stackoverflow.com/users/2317751/liam-foley"}, "is_accepted": false, "score": 0, "last_activity_date": 1423087936, "creation_date": 1423087936, "answer_id": 28332489, "question_id": 28330207, "link": "https://stackoverflow.com/questions/28330207/pandas-merge-on-specific-attributes-of-datetimeindex/28332489#28332489", "title": "Pandas Merge on Specific Attributes of DateTimeIndex", "body": "<p>Probably not as efficient because pd.to_datetime can be slow:</p>\n\n<pre><code>df2['NewIndex'] = pd.to_datetime(df2.index)\ndf2['NewIndex'] = df2['NewIndex'].apply(lambda x: x.replace(year=2014))\ndf2.set_index('NewIndex',inplace=True)\n</code></pre>\n\n<p>Then just do a merge on the whole index.</p>\n"}], "owner": {"reputation": 151, "user_id": 4263486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bce6097901721c6621ad26233a1ac8e?s=128&d=identicon&r=PG&f=1", "display_name": "enmyj", "link": "https://stackoverflow.com/users/4263486/enmyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1063, "favorite_count": 0, "accepted_answer_id": 28332405, "answer_count": 2, "score": 0, "last_activity_date": 1423152405, "creation_date": 1423079576, "last_edit_date": 1423152405, "question_id": 28330207, "link": "https://stackoverflow.com/questions/28330207/pandas-merge-on-specific-attributes-of-datetimeindex", "title": "Pandas Merge on Specific Attributes of DateTimeIndex", "body": "<p>I currently have two pandas data frames which are both indexed using the pandas DateTimeIndex format.</p>\n\n<pre><code>df1 \ndatetimeindex         value\n2014-01-01 00:00:00   204.501667\n2014-01-01 01:00:00   125.345000\n2014-01-01 02:00:00   119.660000\n\ndf2 (where the year 1900 is a filler year I added during import. Actual year does not matter)\ndatetimeindex         temperature\n1900-01-01 00:00:00   48.2\n1900-01-01 01:00:00   30.2\n1900-01-01 02:00:00   42.8\n</code></pre>\n\n<p>I would like to use <code>pd.merge</code> to combine the data frames based on the left index, however, I would like to ignore the year altogether to yield this:</p>\n\n<pre><code>merged_df \ndatetimeindex        value        temperature\n2014-01-01 00:00:00  204.501667   48.2\n2014-01-01 01:00:00  125.345000   30.2\n2014-01-01 02:00:00  119.660000   42.8\n</code></pre>\n\n<p>so far I have tried:</p>\n\n<pre><code>merged_df = pd.merge(df1,df2,left_on =\n['df1.index.month','df1.index.day','df1,index.hour'],right_on = \n['df2.index.month','df2.index.day','df2.index.hour'],how = 'left')\n</code></pre>\n\n<p>which gave me the error <code>KeyError: 'df2.index.month'</code></p>\n\n<p>Is there a way to perform this merge as I have outlined it?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "scikit-learn"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6340722, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gbgw_9i87tM/AAAAAAAAAAI/AAAAAAAA77E/rbKSdSbSK9c/photo.jpg?sz=128", "display_name": "Antonio Augusto Viana", "link": "https://stackoverflow.com/users/6340722/antonio-augusto-viana"}, "is_accepted": false, "score": 1, "last_activity_date": 1463420749, "creation_date": 1463420749, "answer_id": 37260045, "question_id": 28330154, "link": "https://stackoverflow.com/questions/28330154/bagging-classifier/37260045#37260045", "title": "Bagging Classifier", "body": "<p>Looking at the source code (<a href=\"https://github.com/scikit-learn/scikit-learn/blob/51a765a/sklearn/ensemble/bagging.py#L361\" rel=\"nofollow\">https://github.com/scikit-learn/scikit-learn/blob/51a765a/sklearn/ensemble/bagging.py#L361</a>) there is no way to do it.</p>\n\n<p>But I've noticed that you are using 1 (an integer value) as max_samples and max_features. Using this value you are saying that the Bagging should use just one FEATURE per estimator. If you want it to use ALL features you have to use 1.0.</p>\n\n<p>Maybe this is what is causing you trouble.</p>\n"}], "owner": {"reputation": 222, "user_id": 4503904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082cf1cc49f4f0a3743ac66a1aab3790?s=128&d=identicon&r=PG&f=1", "display_name": "rajatsen91", "link": "https://stackoverflow.com/users/4503904/rajatsen91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2118, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1463420749, "creation_date": 1423079391, "question_id": 28330154, "link": "https://stackoverflow.com/questions/28330154/bagging-classifier", "title": "Bagging Classifier", "body": "<p>In a two class classification problem, is there any method to select the number of positive and negative training instances to be chosen while using the standard bagging classifier in Python ?</p>\n\n<p><code>logreg = BaggingClassifier(linear_model.LogisticRegression(C=1e3),max_samples=1, max_features=1);</code></p>\n\n<p>Sometimes the Bagging algorithm chooses only positive samples and the code gives a run-time error.</p>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 2042, "user_id": 1591302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e263226d58575fe11998293a36a1061e?s=128&d=identicon&r=PG", "display_name": "paidhima", "link": "https://stackoverflow.com/users/1591302/paidhima"}, "edited": false, "score": 1, "creation_date": 1423079907, "post_id": 28330148, "comment_id": 45007743, "body": "To make your <code>isValidNumber</code> procedure a bit more consistent, you could change the output to True/False depending on whether the number is valid or not.  Since the procedure doesn&#39;t modify the number itself, there&#39;s little reason to actually return it."}], "answers": [{"tags": [], "owner": {"reputation": 2042, "user_id": 1591302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e263226d58575fe11998293a36a1061e?s=128&d=identicon&r=PG", "display_name": "paidhima", "link": "https://stackoverflow.com/users/1591302/paidhima"}, "is_accepted": false, "score": 2, "last_activity_date": 1423079609, "creation_date": 1423079609, "answer_id": 28330224, "question_id": 28330148, "link": "https://stackoverflow.com/questions/28330148/list-comprehension-doing-duplicate-work/28330224#28330224", "title": "List comprehension doing duplicate work", "body": "<p>Try this:</p>\n\n<pre><code>validPhoneNumbers = [x for x in phoneNumbers if isValidNumber(x, phonepattern)]\n</code></pre>\n\n<p>Since <code>isValidNumber</code> returns the same number that's passed in, without modification, you don't actually need that number.  You just need to know that a number is returned at all (meaning the number is valid).</p>\n\n<p>You may be able to combine the whole thing as well, with:</p>\n\n<pre><code>validPhoneNumbers = [x.strip() for x in open('..\\\\phonenumbers.txt', 'r') if isValidNumber(x.strip(), phonePattern)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2042, "user_id": 1591302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e263226d58575fe11998293a36a1061e?s=128&d=identicon&r=PG", "display_name": "paidhima", "link": "https://stackoverflow.com/users/1591302/paidhima"}, "edited": false, "score": 0, "creation_date": 1423106169, "post_id": 28330250, "comment_id": 45017358, "body": "I think in this instance I might avoid a generator expression, just the way it&#39;s used.  The generator will keep the file open (and locked) until it&#39;s been exhausted.  I prefer to keep file accesses as quick as possible to avoid potential corruption."}], "tags": [], "owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "is_accepted": true, "score": 4, "last_activity_date": 1423125748, "last_edit_date": 1423125748, "creation_date": 1423079693, "answer_id": 28330250, "question_id": 28330148, "link": "https://stackoverflow.com/questions/28330148/list-comprehension-doing-duplicate-work/28330250#28330250", "title": "List comprehension doing duplicate work", "body": "<p>Your <code>isValidFunction</code> should return True/False (as its name suggests). That way your list comprehension becomes:</p>\n\n<pre><code>valid = [num for num in phoneNumbers if isValidNumber(num, pattern)]\n</code></pre>\n\n<p>While you're at it, modify <code>numbers</code> to be a generator expression instead of a list comprehension (since you're interested in efficiency):</p>\n\n<pre><code>numbers = (line.strip() for line in open(\"..\\\\phoneNumbers.txt\"))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2042, "user_id": 1591302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e263226d58575fe11998293a36a1061e?s=128&d=identicon&r=PG", "display_name": "paidhima", "link": "https://stackoverflow.com/users/1591302/paidhima"}, "edited": false, "score": 0, "creation_date": 1423079804, "post_id": 28330251, "comment_id": 45007693, "body": "I like a more generic phone number validator where you pass in a pattern.  That way, you can use whatever pattern you want depending on the format of the number you&#39;re getting."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 2, "last_activity_date": 1423079695, "creation_date": 1423079695, "answer_id": 28330251, "question_id": 28330148, "link": "https://stackoverflow.com/questions/28330148/list-comprehension-doing-duplicate-work/28330251#28330251", "title": "List comprehension doing duplicate work", "body": "<p>I would change your validity check method to simply return whether the number matches or not, but not return the number itself. </p>\n\n<pre><code>def is_valid_number(number):\n    return re.search(r'^\\d{10}$', number)\n</code></pre>\n\n<p>Then you can filter out the invalid numbers in the first list comprehension:</p>\n\n<pre><code>numbers = [line.strip() for line in open('..\\\\phoneNumbers.txt', 'r')\n    if is_valid_number(line.strip())]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13772, "user_id": 379311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c993f4f111e6ff3211ccda1b98828253?s=128&d=identicon&r=PG", "display_name": "Yann Vernier", "link": "https://stackoverflow.com/users/379311/yann-vernier"}, "is_accepted": false, "score": 0, "last_activity_date": 1423126949, "creation_date": 1423126949, "answer_id": 28339854, "question_id": 28330148, "link": "https://stackoverflow.com/questions/28330148/list-comprehension-doing-duplicate-work/28339854#28339854", "title": "List comprehension doing duplicate work", "body": "<p>There are many options to work with here, including <code>filter(None, map(isValidNumber, lines))</code>. Most efficient is probably to let the regular expression do all the work:</p>\n\n<pre><code>import re\nnumpat = re.compile(r'^\\s*(\\d{10})\\s*$', re.MULTILINE)\nfilecontents = open('phonenumbers.txt', 'r').read()\nvalidPhoneNumbers = numpat.findall(filecontents)\n</code></pre>\n\n<p>This way there is no need for a Python loop, and you get precisely the validated numbers. </p>\n"}], "owner": {"reputation": 7211, "user_id": 72974, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6f16ac3274d1d12d7a42cae46946a4e2?s=128&d=identicon&r=PG", "display_name": "coson", "link": "https://stackoverflow.com/users/72974/coson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 28330250, "answer_count": 4, "score": 4, "last_activity_date": 1423126949, "creation_date": 1423079368, "last_edit_date": 1423079749, "question_id": 28330148, "link": "https://stackoverflow.com/questions/28330148/list-comprehension-doing-duplicate-work", "title": "List comprehension doing duplicate work", "body": "<p>I have a running python script that reads in a file of phone numbers.  Some of these phone numbers are invalid.</p>\n\n<pre><code>import re\n\ndef IsValidNumber(number, pattern):\n    isMatch = re.search(pattern, number)\n    if isMatch is not None:\n        return number\n\nnumbers = [line.strip() for line in open('..\\\\phoneNumbers.txt', 'r')]\n</code></pre>\n\n<p>Then I use another list comprehension to filter out the bad numbers:</p>\n\n<pre><code>phonePattern = '^\\d{10}$'\nvalidPhoneNumbers = [IsValidNumber(x, phonePattern) for x in phoneNumbers \n    if IsValidNumber(x, phonePattern) is not None]\nfor x in validPhoneNumbers:\n    print x\n</code></pre>\n\n<p>Due to formatting, the second list comprehension spans two lines.</p>\n\n<p>The problem is that although the IsValidNumber should only return the number if the match is valid, it also returns 'None' on invalid matches.  So I had to modify the second list comprehension to include:</p>\n\n<pre><code>if IsValidNumber(x, phonePattern) is not None\n</code></pre>\n\n<p>While this works, the problem is that for each iteration in the list, the function is executed twice.  Is there a cleaner approach to doing this?</p>\n"}, {"tags": ["python", "handle", "caption", "enumerate"], "comments": [{"owner": {"reputation": 93, "user_id": 4525817, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/edbbbe8ef6cc64fa86b237449c9222d3?s=128&d=identicon&r=PG&f=1", "display_name": "bengerman", "link": "https://stackoverflow.com/users/4525817/bengerman"}, "edited": false, "score": 0, "creation_date": 1423158085, "post_id": 28330068, "comment_id": 45044812, "body": "Ok updated this post to clean out some of the useless information, hopefully someone can help!"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1423162229, "post_id": 28330068, "comment_id": 45047198, "body": "Never used it in a Python environment, and I do not know exactly how to process the callback, but in C or C++ the right API function to call is <code>BOOL EnumWindows(WNDENUMPROC lpEnumFunc, LPARAM lParam);</code>"}], "owner": {"reputation": 93, "user_id": 4525817, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/edbbbe8ef6cc64fa86b237449c9222d3?s=128&d=identicon&r=PG&f=1", "display_name": "bengerman", "link": "https://stackoverflow.com/users/4525817/bengerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 863, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1595328906, "creation_date": 1423079082, "last_edit_date": 1595328906, "question_id": 28330068, "link": "https://stackoverflow.com/questions/28330068/using-window-handles-win32gui-instead-of-captions-in-python", "title": "Using window handles (win32gui) instead of captions in python", "body": "<pre><code>import win32ui\nimport win32gui\n\ndef WindowExists(windowname):\n    try:\n        win32ui.FindWindow(None, windowname)\n        \n    except win32ui.error:\n        return False\n    else:\n        return True\n\nhwndName = &quot;Main Window Program&quot;\n         \nif WindowExists(hwndName):\n    print (&quot;Program is running&quot;)\n    hwnd = win32gui.FindWindow(None, hwndName)   \nelse:\n    print (&quot;Program is not running&quot;)  \n\nchild_handles = []\n\ndef all_ok(hwnd, param):\n    child_handles.append(hwnd)    \n            \nwin32gui.EnumChildWindows(hwnd, all_ok, None)\n\nprint (child_handles)\n</code></pre>\n<p>The code above is working perfectly fine for me to be able to detect if &quot;Main Window Program&quot; is running, I am also able to enumerate all the child windows off of that. My problem however is I dont know how to use handles instead of captions, so instead of <code>hwnd = &quot;Main Window Program&quot;</code> I could use <code>hwnd = 0xC0D57</code> (or whatever the handle is).</p>\n<p>Also whats the best input method do a control? postmessage, sendmessage etc?</p>\n"}, {"tags": ["python", "string", "strip"], "answers": [{"tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": false, "score": 1, "last_activity_date": 1423079166, "last_edit_date": 1592644375, "creation_date": 1423079166, "answer_id": 28330094, "question_id": 28330023, "link": "https://stackoverflow.com/questions/28330023/reading-and-striping-a-text-file/28330094#28330094", "title": "Reading and Striping a text file", "body": "<blockquote>\n<p>to read a file I'm using:</p>\n<p>f = open('words.txt','r')</p>\n</blockquote>\n<p>But that code doesn't read the file, it only opens it. Try:</p>\n<pre><code>my_file = open('words.txt','r')\nf = file.read()\nmy_file.close()\n</code></pre>\n<p>Or</p>\n<pre><code>with open('words.txt','r') as my_file:\n    f = my_file.read()\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3525256, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/zm70I.jpg?s=128&g=1", "display_name": "P_Lee", "link": "https://stackoverflow.com/users/3525256/p-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1423079166, "creation_date": 1423078966, "question_id": 28330023, "link": "https://stackoverflow.com/questions/28330023/reading-and-striping-a-text-file", "title": "Reading and Striping a text file", "body": "<pre><code>import re\n\nf= ('HelloHowAreYou')\nf = re.sub(r\"([a-z\\d])([A-Z])\", r'\\1 \\2', f)\n# Makes the string space separated. You can use split to convert it to list\nf = f.split()\nprint (f)\n</code></pre>\n\n<p>this works fine to separate all the string of text by capital letters, however when i then change the code to read a text file i have issues. can anyone shed some light why?</p>\n\n<p>to read a file I'm using: </p>\n\n<pre><code>f = open('words.txt','r')\n</code></pre>\n"}, {"tags": ["python", "html", "xml", "parsing", "raspberry-pi"], "comments": [{"owner": {"reputation": 8267, "user_id": 1810429, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/68c4911127e973b1fc529ee79cc73cfb?s=128&d=identicon&r=PG", "display_name": "J0e3gan", "link": "https://stackoverflow.com/users/1810429/j0e3gan"}, "edited": false, "score": 1, "creation_date": 1423079329, "post_id": 28329977, "comment_id": 45007451, "body": "Consider asking your question on the <a href=\"http://raspberrypi.stackexchange.com/\">Rasberry Pi SE site</a>."}, {"owner": {"reputation": 509, "user_id": 480269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2c845be73b509ea2978d86885b42c9?s=128&d=identicon&r=PG", "display_name": "Alan", "link": "https://stackoverflow.com/users/480269/alan"}, "edited": false, "score": 0, "creation_date": 1423103628, "post_id": 28329977, "comment_id": 45016744, "body": "Why can&#39;t you just inserted the parsed XML data into the HTML webpage?  Browser is already reloading the page frequently."}, {"owner": {"reputation": 51, "user_id": 2648715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cab86adaa081cd23f58a867a401767?s=128&d=identicon&r=PG", "display_name": "rpratesh", "link": "https://stackoverflow.com/users/2648715/rpratesh"}, "reply_to_user": {"reputation": 8267, "user_id": 1810429, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/68c4911127e973b1fc529ee79cc73cfb?s=128&d=identicon&r=PG", "display_name": "J0e3gan", "link": "https://stackoverflow.com/users/1810429/j0e3gan"}, "edited": false, "score": 0, "creation_date": 1423137014, "post_id": 28329977, "comment_id": 45030792, "body": "@J0e3gan I have posted it here because the problem is more general one even though I am trying to do it in RaspberryPi."}, {"owner": {"reputation": 51, "user_id": 2648715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cab86adaa081cd23f58a867a401767?s=128&d=identicon&r=PG", "display_name": "rpratesh", "link": "https://stackoverflow.com/users/2648715/rpratesh"}, "reply_to_user": {"reputation": 509, "user_id": 480269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2c845be73b509ea2978d86885b42c9?s=128&d=identicon&r=PG", "display_name": "Alan", "link": "https://stackoverflow.com/users/480269/alan"}, "edited": false, "score": 0, "creation_date": 1423137036, "post_id": 28329977, "comment_id": 45030812, "body": "@Alan .. can u please elaborate it ? .. The xml file that I said, has lot of other information too that I don&#39;t want to display. I am specifically parsing the ones that have to be displayed by using lxml."}], "answers": [{"tags": [], "owner": {"reputation": 509, "user_id": 480269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a2c845be73b509ea2978d86885b42c9?s=128&d=identicon&r=PG", "display_name": "Alan", "link": "https://stackoverflow.com/users/480269/alan"}, "is_accepted": false, "score": 1, "last_activity_date": 1423213136, "creation_date": 1423213136, "answer_id": 28361971, "question_id": 28329977, "link": "https://stackoverflow.com/questions/28329977/parse-xml-file-in-python-and-display-it-in-html-page/28361971#28361971", "title": "Parse XML file in python and display it in HTML page", "body": "<p>I think there are 3 steps you need to make it work.</p>\n\n<ol>\n<li>Extracting only the data you want from the given XML file.</li>\n<li>Using simple template engine to insert the extracted data into a HTML file.</li>\n<li>Use a web server to service the file create above.</li>\n</ol>\n\n<p>Step 1) You are already using lxml which is a good library for doing this so I don't think you need help there.</p>\n\n<p>Step 2) Now there are many python templating engines out there but for a simple purpose you just need an HTML file that was created in advance with some special markup such as {{0}}, {{1}} or whatever that works for you. This would be your template. Take the data from step 1 and just do find and replace in the template and save the output to a new HTML file.</p>\n\n<p>Step 3) To make that file accessible using a browser on a different device or a PC you need to service it using a simple HTTP web server. Python provides http.server library or you can use an 3rd party web server and just make sure it can access the file created on step 2.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 2648715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cab86adaa081cd23f58a867a401767?s=128&d=identicon&r=PG", "display_name": "rpratesh", "link": "https://stackoverflow.com/users/2648715/rpratesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1491546326, "creation_date": 1491546326, "answer_id": 43271081, "question_id": 28329977, "link": "https://stackoverflow.com/questions/28329977/parse-xml-file-in-python-and-display-it-in-html-page/43271081#43271081", "title": "Parse XML file in python and display it in HTML page", "body": "<p>Instead of passing the parsed data (parsed from a XML file) to specific components in the HTML page, I've written python code such that it rewrites the entire HTML webpage's code periodically.</p>\n\n<p>Suppose we have a XML file, a python script, a HTML webpage.</p>\n\n<ul>\n<li>XML file : Contains certain values that are updated periodically and are to be parsed. </li>\n<li>Python Script : Parses the XML file (when ever there are changes in XML file) and updates the HTML page with the newly parsed values</li>\n<li>HTML webpage : To be shown on R-Pi screen and reloaded periodically (to reflect any changes at the browser)</li>\n</ul>\n\n<p>The python code will have a string (say, <em>str</em>) declared, that contains the code of the HTML page, say the below code.</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n\n&lt;h1&gt;My First Heading&lt;/h1&gt;\n&lt;p&gt;My first paragraph.&lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Then suppose we would like to update the <em>My first paragraph</em> with a value we parsed from XML, we can use Python string replacement function, </p>\n\n<pre><code>str.replace(\"My first paragraph\",root[0][1].text)\n</code></pre>\n\n<p>After the replacement is done, write that entire string (<em>str</em>) into the HTML file. Now, the HTML file will have new code and once it's reloaded, the updated webpage will show up in the browser (of R-Pi)</p>\n"}], "owner": {"reputation": 51, "user_id": 2648715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cab86adaa081cd23f58a867a401767?s=128&d=identicon&r=PG", "display_name": "rpratesh", "link": "https://stackoverflow.com/users/2648715/rpratesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4180, "favorite_count": 1, "accepted_answer_id": 43271081, "answer_count": 2, "score": 2, "last_activity_date": 1491546326, "creation_date": 1423078841, "question_id": 28329977, "link": "https://stackoverflow.com/questions/28329977/parse-xml-file-in-python-and-display-it-in-html-page", "title": "Parse XML file in python and display it in HTML page", "body": "<p>I am doing a digital signage project using Raspberry-Pi. The R-Pi will be connected to HDMI display and to internet. There will be one XML file and one self-designed HTML webpage in R-Pi.The XML file will be frequently updated from remote terminal.</p>\n\n<p>My idea is to parse the XML file using Python (lxml) and pass this parsed data to my local HTML webpage so that it can display this data in R-Pi's web-browser.The webpage will be frequently reloading to reflect the changed data. </p>\n\n<p>I was able to parse the XML file using Python (lxml). But what tools should I use to display this parsed contents (mostly strings) in a local HTML webpage ?</p>\n\n<p>This question might sound trivial but I am very new to this field and could not find any clear answer anywhere. Also there are methods that use PHP for parsing XML and then pass it to HTML page but as per my other needs I am bound to use Python.</p>\n"}, {"tags": ["python", "django", "views", "middleware"], "answers": [{"comments": [{"owner": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "edited": false, "score": 0, "creation_date": 1423087606, "post_id": 28330487, "comment_id": 45011859, "body": "This way, developer could end up having to wrap up all views in the app with a new decorator, which is not flexible and generic."}, {"owner": {"reputation": 1360, "user_id": 407494, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e3I40.jpg?s=128&g=1", "display_name": "Bruce", "link": "https://stackoverflow.com/users/407494/bruce"}, "reply_to_user": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "edited": false, "score": 0, "creation_date": 1423122268, "post_id": 28330487, "comment_id": 45022574, "body": "Depends on your use case. If all views need the api access and it will never change, then go with the middleware. If there are/will be views where you don&#39;t need the api access, then it would be better to use one of these possibilities. It is flexible in the way, that you can very easily control which view has the api access and which not. Or you can check for permissions (ot other things) per view before the api initializes (usefull when the api init is an expensive call and you want to minimize these calls)."}, {"owner": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "edited": false, "score": 0, "creation_date": 1423122849, "post_id": 28330487, "comment_id": 45022847, "body": "The question says: &quot;Pretty much all of the views perform some interaction with an external API.&quot;, so middleware should be the preferred approach."}], "tags": [], "owner": {"reputation": 1360, "user_id": 407494, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e3I40.jpg?s=128&g=1", "display_name": "Bruce", "link": "https://stackoverflow.com/users/407494/bruce"}, "is_accepted": false, "score": 1, "last_activity_date": 1423080451, "creation_date": 1423080451, "answer_id": 28330487, "question_id": 28329965, "link": "https://stackoverflow.com/questions/28329965/using-middleware-to-add-arguments-to-view-functions-in-django/28330487#28330487", "title": "Using middleware to add arguments to view functions in django", "body": "<p>You can use a middleware but there are two other possibilities too, both more flexible. The first one is to use a decorator and wrap the view:</p>\n\n<pre><code>@my_api_init_decorator\ndef my_view(request, my_api):\n    ...\n</code></pre>\n\n<p>This allows you to explicitly select views, check user authorization or permissions before you init your api...</p>\n\n<p>The second solution is to use class based views and create your own view you inherit from.</p>\n"}, {"tags": [], "owner": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "is_accepted": true, "score": 2, "last_activity_date": 1423089587, "creation_date": 1423089587, "answer_id": 28332922, "question_id": 28329965, "link": "https://stackoverflow.com/questions/28329965/using-middleware-to-add-arguments-to-view-functions-in-django/28332922#28332922", "title": "Using middleware to add arguments to view functions in django", "body": "<p>If you look at the Django middleware <a href=\"https://docs.djangoproject.com/en/1.7/topics/http/middleware/#process-view\" rel=\"nofollow\">documentation</a>, you'll see;</p>\n\n<blockquote>\n  <p>If <strong>process_view</strong> returns an <strong>HttpResponse</strong> object, Django won\u2019t bother calling any other view or exception middleware, or the appropriate view; it\u2019ll apply response middleware to that HttpResponse, and return the result.</p>\n</blockquote>\n\n<p>So returning an HttpResponse will skip the execution of other middleware classes below this one which <em>in general should be avoided</em> unless your middleware is the last one in <strong>settings.MIDDLEWARE_CLASSES</strong> list.</p>\n\n<p>However, you still can bind your API object to HttpRequest instance passed on to middleware. It is the same approach to what AuhenticationMiddleware does in order to populate request.user.</p>\n\n<pre><code>def APIMiddleware(object):\n    def process_request(self, request):\n        request.api = API(host, port, user, password, extra={\"url\": request.get_full_path()})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 346, "user_id": 1265727, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oA4Ou.jpg?s=128&g=1", "display_name": "xavierskip", "link": "https://stackoverflow.com/users/1265727/xavierskip"}, "is_accepted": false, "score": 1, "last_activity_date": 1475392312, "creation_date": 1475392312, "answer_id": 39814707, "question_id": 28329965, "link": "https://stackoverflow.com/questions/28329965/using-middleware-to-add-arguments-to-view-functions-in-django/39814707#39814707", "title": "Using middleware to add arguments to view functions in django", "body": "<p>you can just change view_kwargs in middleware</p>\n\n<pre><code>class SomeMiddleware(object):\n    def process_view(self, request, view_func, view_args, view_kwargs):\n        view_kwargs['my_api'] = api(some, args, here)\n        return None\n\ndef my_view(request, my_api):\n    # you can use you api there\ndef my_view(request, args, my_api)\n    # you can use you api there\n</code></pre>\n\n<p><a href=\"https://docs.djangoproject.com/en/dev/topics/http/middleware/#process-view\" rel=\"nofollow\">document it's there</a>\nmiddleware returns None, Django will continue processing this request, executing any other process_view() middleware.</p>\n\n<p>but, this only applies to every view function can got the keyword argument 'myapi', otherwise will raise the TypeError.</p>\n\n<p>so the best way isn't pass your api by func arguments, like @ozgur pass your api by request.</p>\n"}], "owner": {"reputation": 1118, "user_id": 293956, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ce4b1fbe2dcb679d8732d92f8cca14ea?s=128&d=identicon&r=PG", "display_name": "BoomShaka", "link": "https://stackoverflow.com/users/293956/boomshaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2549, "favorite_count": 0, "accepted_answer_id": 28332922, "answer_count": 3, "score": 2, "last_activity_date": 1475392312, "creation_date": 1423078792, "last_edit_date": 1423171579, "question_id": 28329965, "link": "https://stackoverflow.com/questions/28329965/using-middleware-to-add-arguments-to-view-functions-in-django", "title": "Using middleware to add arguments to view functions in django", "body": "<p>I have a pretty small, basic site with a handful of views. Pretty much all of the views perform some interaction with an external API.</p>\n\n<p>In each view I instantiate an object of my API class, which obviously is not very DRY. I also have a piece of middleware that adds one or two useful variables to the request object (my middleware runs last in the chain).</p>\n\n<p>I was thinking of instantiating my api class in the middleware, and then passing it to each view as an argument, i.e.</p>\n\n<pre><code>def my_view(request, my_api_class_instance):\n</code></pre>\n\n<p>and then calling the view from the middleware, something like:</p>\n\n<pre><code>def process_view(self, request, view_func, view_args, view_kwargs):\n    my_api = api(some, args, here)\n    response = view_func(request, my_api, *view_args, **view_kwargs)\n    return response\n</code></pre>\n\n<p>It seems like a quick and easy way to tidy some code and reduce repetition. Is there anything inherently BAD about this?</p>\n"}, {"tags": ["python", "ftplib"], "answers": [{"tags": [], "owner": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "is_accepted": true, "score": 0, "last_activity_date": 1423080077, "creation_date": 1423080077, "answer_id": 28330361, "question_id": 28329959, "link": "https://stackoverflow.com/questions/28329959/ftp-server-breaks-connection-before-download-is-complete/28330361#28330361", "title": "FTP server breaks connection before download is complete", "body": "<p>You can specify a <code>timeout</code> parameter in the <code>FTP</code> constructor and set it to 0 or something very large value like <em>sys.maxint</em>.</p>\n\n<blockquote>\n  <p><code>class ftplib.FTP([host[, user[, passwd[, acct[, timeout]]]]])</code></p>\n</blockquote>\n\n<p><img src=\"https://i.stack.imgur.com/2wqGi.png\" alt=\"enter image description here\"></p>\n\n<p>Additionally, you can turn on debugging to see what's going on behind the scenes.</p>\n\n<pre><code>ftp = ftplib.FTP(site, user, pw, timeout=0)\nftp.set_debuglevel(2)\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1929, "user_id": 4450260, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e72369cc0e80bf3a35393f8a0539731b?s=128&d=identicon&r=PG&f=1", "display_name": "gaurav gurnani", "link": "https://stackoverflow.com/users/4450260/gaurav-gurnani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 28330361, "answer_count": 1, "score": 0, "last_activity_date": 1423080472, "creation_date": 1423078766, "last_edit_date": 1423080472, "question_id": 28329959, "link": "https://stackoverflow.com/questions/28329959/ftp-server-breaks-connection-before-download-is-complete", "title": "FTP server breaks connection before download is complete", "body": "<p>Sometimes, FTP server closes connection before file is completely downloaded..   </p>\n\n<p>Here is my code:</p>\n\n<pre><code>ftp = ftplib.FTP(site)\nftp.login(user, pw)\nftp.cwd(dir)\nremotefiles = ftp.nlst()\nfor file in remotefiles:\n    if fnmatch.fnmatch(file, match_text):\n        if os.path.exists(file):\n            if True: print file, 'already fetched'\n        else:\n            if True: print 'Downloading', file\n            local = open(file, 'wb')                \n            try:            \n                ftp.retrbinary('RETR ' + file, local.write)\n            finally:\n                local.close()                       \n            if True: print 'Download done.' \n</code></pre>\n"}, {"tags": ["python", "windows", "path"], "comments": [{"owner": {"reputation": 3142, "user_id": 1583598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9322bff86c672e97212b0f349d2c8e59?s=128&d=identicon&r=PG", "display_name": "Kevin Thibedeau", "link": "https://stackoverflow.com/users/1583598/kevin-thibedeau"}, "edited": false, "score": 0, "creation_date": 1423079105, "post_id": 28329944, "comment_id": 45007336, "body": "Did you change the PATH in a shell or in the main environment variable dialog? You need to set it in the latter for it to persist."}, {"owner": {"reputation": 4920, "user_id": 598591, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8bad8eaa500f68d0ded3432927115ccd?s=128&d=identicon&r=PG", "display_name": "Marcelo Assis", "link": "https://stackoverflow.com/users/598591/marcelo-assis"}, "reply_to_user": {"reputation": 3142, "user_id": 1583598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9322bff86c672e97212b0f349d2c8e59?s=128&d=identicon&r=PG", "display_name": "Kevin Thibedeau", "link": "https://stackoverflow.com/users/1583598/kevin-thibedeau"}, "edited": false, "score": 0, "creation_date": 1423079418, "post_id": 28329944, "comment_id": 45007510, "body": "@KevinThibedeau, only in the Windows GUI (System &gt; Advanced Configs &gt; Env. Vars &gt; ...)"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 2, "creation_date": 1423081444, "post_id": 28329944, "comment_id": 45008631, "body": "You should have the new <a href=\"https://docs.python.org/3/using/windows.html#python-launcher-for-windows\" rel=\"nofollow noreferrer\">py.exe launcher</a>. Check the file association in the command prompt (cmd.exe): <code>for &#47;f &quot;tokens=2 delims==&quot; %i in (&#39;assoc .py&#39;) do @(ftype %i)</code>. The default all-user installation for 3.3 should have set it to <code>Python.File=&quot;C:\\Windows\\py.exe&quot; &quot;%1&quot; %*</code>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1423084285, "post_id": 28329944, "comment_id": 45010137, "body": "Add first lines, like <code>#!&#47;usr&#47;bin&#47;env python27</code>, <code>#!&#47;usr&#47;bin&#47;env python3</code>, etc to a test script and see if the the specified interpreter gets invoked."}, {"owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1423172800, "post_id": 28329944, "comment_id": 45052930, "body": "@martineau - that won&#39;t work on Windows. Although if you use the py.exe launcher that eryksun mentioned, you can do something similar."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 0, "creation_date": 1423173341, "post_id": 28329944, "comment_id": 45053209, "body": "@Mike: I&#39;m assuming they have py launcher installed since they have Python 3 installed."}, {"owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 0, "creation_date": 1423175262, "post_id": 28329944, "comment_id": 45054056, "body": "Yeah, but the command would be something like <code>#! python3</code>, not <code>#!&#47;usr&#47;bin&#47;env python27</code> which is *nix only"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 0, "creation_date": 1423324575, "post_id": 28329944, "comment_id": 45106235, "body": "@MikeDriscoll, the launcher supports the following <a href=\"https://hg.python.org/cpython/file/ab2c023a9432/PC/launcher.c#l667\" rel=\"nofollow noreferrer\">virtual paths</a>: <code>&#47;usr&#47;bin&#47;env</code>, <code>&#47;usr&#47;bin</code>, and <code>&#47;usr&#47;local&#47;bin</code>. It also supports an empty virtual path for shebangs such as <code>!#python3</code>. It also supports commands defined in <code>%localappdata%\\py.ini</code> (e.g. you can create virtual commands to run PyPy or IronPython)."}, {"owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 0, "creation_date": 1423491795, "post_id": 28329944, "comment_id": 45157294, "body": "Good to know. I stand corrected"}], "owner": {"reputation": 4920, "user_id": 598591, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8bad8eaa500f68d0ded3432927115ccd?s=128&d=identicon&r=PG", "display_name": "Marcelo Assis", "link": "https://stackoverflow.com/users/598591/marcelo-assis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423078702, "creation_date": 1423078702, "question_id": 28329944, "link": "https://stackoverflow.com/questions/28329944/how-to-switch-installed-python-versions-in-windows", "title": "How to switch installed Python versions in Windows?", "body": "<p>I have 3 versions  of Python installed on C:</p>\n\n<pre><code>C:\\Python27\nC:\\Python30\nC:\\Python33\n</code></pre>\n\n<p>I was using 2.7 version, tried to switch to 3.3 changing the path in Environment Vars and nothing had changed, not even restarting.\nThe old version is being used with no mention to it in Path string.</p>\n\n<p>Where is my mistake?</p>\n"}, {"tags": ["python", "cookies"], "comments": [{"owner": {"reputation": 5209, "user_id": 4317945, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/30jtQ.jpg?s=128&g=1", "display_name": "Gabe", "link": "https://stackoverflow.com/users/4317945/gabe"}, "edited": false, "score": 0, "creation_date": 1541367241, "post_id": 28329930, "comment_id": 93182677, "body": "Hi, could you be able to help here regarding William Hill APIs? Many thanks =] <a href=\"https://stackoverflow.com/questions/53036249/how-to-get-wsdl-file-william-hill-soap-apis\" title=\"how to get wsdl file william hill soap apis\">stackoverflow.com/questions/53036249/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 3836064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afbfb7636bfbd4ca96425fadb7b06e01?s=128&d=identicon&r=PG&f=1", "display_name": "amox", "link": "https://stackoverflow.com/users/3836064/amox"}, "is_accepted": false, "score": 0, "last_activity_date": 1436818873, "creation_date": 1436818873, "answer_id": 31392689, "question_id": 28329930, "link": "https://stackoverflow.com/questions/28329930/issues-with-logging-on-to-a-website-with-python-2-7-requests/31392689#31392689", "title": "Issues with logging on to a website with Python 2.7 requests", "body": "<p>Did you try to see the source of WH in browser? There are two hidden fields - login_uid and action.  May be it will be usefull to you?</p>\n\n<p>But I don't know if you will be able to download html at all because it is built by big js script which is loaded when you send request to WH.</p>\n\n<p>PS I'm trying to do the same and only WebDriver works for me.</p>\n"}], "owner": {"reputation": 1, "user_id": 4530094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d30129ac988dfed28e61f8576026fd6d?s=128&d=identicon&r=PG&f=1", "display_name": "Joe B", "link": "https://stackoverflow.com/users/4530094/joe-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436818873, "creation_date": 1423078657, "last_edit_date": 1423078903, "question_id": 28329930, "link": "https://stackoverflow.com/questions/28329930/issues-with-logging-on-to-a-website-with-python-2-7-requests", "title": "Issues with logging on to a website with Python 2.7 requests", "body": "<p>I am attempting to automatically log on to the William Hill Website (<a href=\"http://sports.williamhill.com/bet/en-gb\" rel=\"nofollow\">http://sports.williamhill.com/bet/en-gb</a>) using the requests module for Python 2.7</p>\n\n<pre><code>import requests\n\nwith requests.Session() as c:\n    url = \"https://sports.williamhill.com/bet/\"\n    Username = \"blarxxx\"\n    PASSWORD = \"blarxxx\"\n    r = c.get(url)\n    Rcookies = r.cookies\n    login_data = dict(username=Username, password=PASSWORD, action=\"DoLogin\", target_page=\"http://sports.williamhill.com/bet/en-gb\", tmp_username=\"Username\")\n    page1 = c.post(url,data=login_data, headers={\"Referer\" : \"http://sports.williamhill.com/bet/en-gb/betting/t/295/English-Premier-League.html\"})\n\nprint page1.content\n</code></pre>\n\n<p>However, this does not log me on.</p>\n\n<p>I have reviewed the post data from Chrome's inspect element and there are two other variable posted, loginuid and ioBlackBoxCopy. I assumed that these would be provided by the site in a cookie however I have not been able to locate them.</p>\n\n<p>So you are aware the cookie information from <a href=\"https://sports.williamhill.com/bet/\" rel=\"nofollow\">https://sports.williamhill.com/bet/</a> is as follows:</p>\n\n<pre><code>&lt;&lt;class 'requests.cookies.RequestsCookieJar'&gt;[&lt;Cookie CSRF_COOKIE=c2962a27a04d24250b13 for .williamhill.com/&gt;, &lt;Cookie TS01b0a0b6=0148840b445dac7f6388fc9588136faf4ebdb641d2b4ba2c7e1c3eda9a7079782232d97eaad7893999b63092cda29c0e07ad6757dfa994c354e332e3abda1d2bbfd684a7edc8beb96d001cad8478ffc5e53ab684ffaa39ed82c91fb9b77f5c70f63f174ad9421f9daa69f1d8a3170251041bca95512cbfcf8eaa3b483e3659120e2fc4690c for .williamhill.com/&gt;, &lt;Cookie cust_lang=en-gb for .williamhill.com/&gt;, &lt;Cookie cust_login= for .williamhill.com/&gt;, &lt;Cookie cust_prefs=en|ODDS|form|TYPE|PRICE|||0|SB|0|0||0|en|0|TIME|TYPE|0|1||0||0|1|0||TYPE| for .williamhill.com/&gt;, &lt;Cookie TS017d04d1=0148840b4403f8c68f0800245a6bf453cfe0f084759d52c21d738abcb353a043964350398d for sports.williamhill.com/&gt;]&gt;\n</code></pre>\n\n<p>I'm relatively new to the Requests module and to logging on to a website through python. I would be grateful if you could let me know if I am approaching this correctly and how I can obtain the additional inputs in my post request, if indeed they are needed.</p>\n\n<p>Many thanks</p>\n\n<p>J </p>\n"}, {"tags": ["python", "runtime", "timeit", "hamming-distance"], "comments": [{"owner": {"reputation": 28349, "user_id": 553404, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/XkLRP.png?s=128&g=1", "display_name": "YXD", "link": "https://stackoverflow.com/users/553404/yxd"}, "edited": false, "score": 1, "creation_date": 1423078495, "post_id": 28329831, "comment_id": 45007037, "body": "I would say only your first implementation is &quot;Pythonic&quot;"}, {"owner": {"reputation": 133, "user_id": 3053433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06d0d039bcd1406bc9da2c8164eb816e?s=128&d=identicon&r=PG&f=1", "display_name": "Scrocco", "link": "https://stackoverflow.com/users/3053433/scrocco"}, "reply_to_user": {"reputation": 28349, "user_id": 553404, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/XkLRP.png?s=128&g=1", "display_name": "YXD", "link": "https://stackoverflow.com/users/553404/yxd"}, "edited": false, "score": 0, "creation_date": 1423161059, "post_id": 28329831, "comment_id": 45046518, "body": "Ultimately this is the solution with fastest time, sum(i.imap(operator.ne, s_1, s_2)) runs in 1.03."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 3053433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06d0d039bcd1406bc9da2c8164eb816e?s=128&d=identicon&r=PG&f=1", "display_name": "Scrocco", "link": "https://stackoverflow.com/users/3053433/scrocco"}, "edited": false, "score": 0, "creation_date": 1423086506, "post_id": 28329983, "comment_id": 45011292, "body": "Yup, that&#39;s it.  Thanks.  ham_4 runs in roughly 1.67991399765 for comparison."}, {"owner": {"reputation": 133, "user_id": 3053433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06d0d039bcd1406bc9da2c8164eb816e?s=128&d=identicon&r=PG&f=1", "display_name": "Scrocco", "link": "https://stackoverflow.com/users/3053433/scrocco"}, "edited": false, "score": 1, "creation_date": 1423161320, "post_id": 28329983, "comment_id": 45046671, "body": "I was confused by the slowness of ham_2, after more digging I realized that operator.countOf runs a for loop over the strings (each of length 1) and the compiler doesn&#39;t optimize that out.   Using operator.ne has no for loop and runs in 1/2 the time as your above example."}], "tags": [], "owner": {"reputation": 23895, "user_id": 472416, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa78d79fb4238d200e26fb87e3de947b?s=128&d=identicon&r=PG", "display_name": "utdemir", "link": "https://stackoverflow.com/users/472416/utdemir"}, "is_accepted": true, "score": 1, "last_activity_date": 1423078868, "creation_date": 1423078868, "answer_id": 28329983, "question_id": 28329831, "link": "https://stackoverflow.com/questions/28329831/interpreting-hamming-distance-speed-in-python/28329983#28329983", "title": "Interpreting Hamming Distance speed in python", "body": "<p>The key is making less method lookups and function calls:</p>\n\n<pre><code>def hamming_distance_4(s_1, s_2):\n    return sum(i != j for i, j in i.izip(s_1, s_2))\n</code></pre>\n\n<p>runs at <code>ham_4   1.10134792328</code> in my system.</p>\n\n<p><code>ham_2</code> and <code>ham_3</code> makes lookups <em>inside</em> the loops, so they are slower.</p>\n"}, {"comments": [{"owner": {"reputation": 1554, "user_id": 2869616, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pTcF1.jpg?s=128&g=1", "display_name": "SummerEla", "link": "https://stackoverflow.com/users/2869616/summerela"}, "edited": false, "score": 0, "creation_date": 1545945255, "post_id": 28330085, "comment_id": 94740430, "body": "The OP is asking for hamming distance calculation on arrays of strings, not int. Scipy spatial distance calculations only work for integers."}], "tags": [], "owner": {"reputation": 15668, "user_id": 149076, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZHnYp.jpg?s=128&g=1", "display_name": "Jim Dennis", "link": "https://stackoverflow.com/users/149076/jim-dennis"}, "is_accepted": false, "score": -1, "last_activity_date": 1423079138, "creation_date": 1423079138, "answer_id": 28330085, "question_id": 28329831, "link": "https://stackoverflow.com/questions/28329831/interpreting-hamming-distance-speed-in-python/28330085#28330085", "title": "Interpreting Hamming Distance speed in python", "body": "<p>I wonder if this might be a bit more Pythonic, in some broader sense.  What if you use <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.hamming.html\" rel=\"nofollow\">http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.hamming.html</a> ... a module that already implements what you're looking for?</p>\n"}], "owner": {"reputation": 133, "user_id": 3053433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06d0d039bcd1406bc9da2c8164eb816e?s=128&d=identicon&r=PG&f=1", "display_name": "Scrocco", "link": "https://stackoverflow.com/users/3053433/scrocco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 28329983, "answer_count": 2, "score": 4, "last_activity_date": 1423079138, "creation_date": 1423078374, "question_id": 28329831, "link": "https://stackoverflow.com/questions/28329831/interpreting-hamming-distance-speed-in-python", "title": "Interpreting Hamming Distance speed in python", "body": "<p>I've been working on making my python more pythonic and toying with runtimes of short snippets of code.  My goal to improve the readability, but additionally, to speed execution.  </p>\n\n<p>This example conflicts with the best practices I've been reading about and I'm interested to find the where the flaw in my thought process is. </p>\n\n<p>The problem is to compute the <a href=\"http://en.wikipedia.org/wiki/Hamming_distance\" rel=\"nofollow\">hamming distance</a> on two equal length strings.  For example the hamming distance of strings 'aaab' and 'aaaa' is 1.</p>\n\n<p>The most straightforward implementation I could think of is as follows:</p>\n\n<pre><code>def hamming_distance_1(s_1, s_2):\n    dist = 0\n    for x in range(len(s_1)):\n        if s_1[x] != s_2[x]:  dist += 1\n    return dist\n</code></pre>\n\n<p>Next I wrote two \"pythonic\" implementations:</p>\n\n<pre><code>def hamming_distance_2(s_1, s_2): \n    return sum(i.imap(operator.countOf, s_1, s_2))\n</code></pre>\n\n<p>and</p>\n\n<pre><code>def hamming_distance_3(s_1, s_2): \n    return sum(i.imap(lambda s: int(s[0]!=s[1]), i.izip(s_1, s_2)))  \n</code></pre>\n\n<p>In execution:</p>\n\n<pre><code>s_1 = (''.join(random.choice('ABCDEFG') for i in range(10000)))\ns_2 = (''.join(random.choice('ABCDEFG') for i in range(10000)))\nprint 'ham_1  ',  timeit.timeit('hamming_distance_1(s_1, s_2)',  \"from __main__ import s_1,s_2, hamming_distance_1\",number=1000)\nprint 'ham_2  ',  timeit.timeit('hamming_distance_2(s_1, s_2)',  \"from __main__ import s_1,s_2, hamming_distance_2\",number=1000)\nprint 'ham_3  ',  timeit.timeit('hamming_distance_3(s_1, s_2)',  \"from __main__ import s_1,s_2, hamming_distance_3\",number=1000)\n</code></pre>\n\n<p>returning:</p>\n\n<pre><code>ham_1   1.84980392456\nham_2   3.26420593262\nham_3   3.98718094826\n</code></pre>\n\n<p>I expected that ham_3 would run slower then ham_2, due to the fact that calling a lambda is treated as a function call, which is slower then calling the built in operator.countOf.  </p>\n\n<p>I was surprised I couldn't find a way to get a more pythonic version to run faster then ham_1 however.  I have trouble believing that ham_1 is the lower bound for pure python.  </p>\n\n<p>Thoughts anyone?</p>\n"}, {"tags": ["python", "django", "listview"], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 2921575, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/suRzV.jpg?s=128&g=1", "display_name": "dfrojas", "link": "https://stackoverflow.com/users/2921575/dfrojas"}, "edited": false, "score": 0, "creation_date": 1423235048, "post_id": 28349652, "comment_id": 45078099, "body": "Hi @cdvv7788 thanks for your reply, i have tried your code and nothing happens, dont show me any error and the template its totally empty"}], "tags": [], "owner": {"reputation": 1913, "user_id": 3509554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2ed608a1c5a6b018efc70e255ed888d0?s=128&d=identicon&r=PG&f=1", "display_name": "cdvv7788", "link": "https://stackoverflow.com/users/3509554/cdvv7788"}, "is_accepted": false, "score": 0, "last_activity_date": 1423155258, "creation_date": 1423155258, "answer_id": 28349652, "question_id": 28329757, "link": "https://stackoverflow.com/questions/28329757/override-get-queryset-method-in-listview-for-nested-cycles/28349652#28349652", "title": "Override get_queryset method in listview for nested cycles", "body": "<p>Something like:</p>\n\n<pre><code>Photo.objects.filter(school__city__id=some_id_here)\n</code></pre>\n\n<p>Will give you as result the photos for a given city.</p>\n\n<pre><code>class RankingPhotosView(TemplateView):\n    template_name = 'ranking.html'\n\n    def get_context_data(self, **kwargs):\n        context = super(RankingPhotosView, self).get_context_data(**kwargs)\n        temp = {}\n        for city in City.objects.all():\n            temp[city.name] = Photo.objects.filter(school__city__id=city.id)\n        context['results'] = temp\n</code></pre>\n\n<p>Now in your template:</p>\n\n<pre><code>{% for key, value in results %}\n    {{ key }}\n    {% for photo in value %}\n        - {{ photo }}\n    {% endfor %}\n{% endfor %}\n</code></pre>\n\n<p>I have not tested this code so it could not work in one go (specially the template part), but it should help you getting started. If you find issues with it, leave a comment so i can edit the answer.</p>\n"}], "owner": {"reputation": 542, "user_id": 2921575, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/suRzV.jpg?s=128&g=1", "display_name": "dfrojas", "link": "https://stackoverflow.com/users/2921575/dfrojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423155258, "creation_date": 1423078129, "question_id": 28329757, "link": "https://stackoverflow.com/questions/28329757/override-get-queryset-method-in-listview-for-nested-cycles", "title": "Override get_queryset method in listview for nested cycles", "body": "<p>im trying to render 3 rankings in the same templates. I mean, i have three cities and each city has too many photos (the three first photo that has most votes, but this is other issue). </p>\n\n<p>My models:</p>\n\n<pre><code>class City(models.Model):\n    city = models.CharField(max_length=100)\n\n    def __unicode__(self):\n        return self.city\n\n    class Meta():\n        verbose_name_plural = \"Cities\"\n\nclass School(models.Model):\n    name = models.CharField(max_length=100)\n    city = models.ForeignKey(City)\n\n\n    def __unicode__(self):\n        return self.name\n\n    class Meta():\n        verbose_name_plural = \"Schools\"\n\nclass Album(models.Model):\n    name = models.CharField(max_length=100)\n    school = models.ForeignKey(School)\n\n    def __unicode__(self):\n        return str(self.name)\n\n    class Meta():\n        verbose_name_plural = \"Albums\"\n\nclass Photo(models.Model):\n    school = models.ForeignKey(School)\n    photo = models.ImageField(upload_to='fotos')\n    votes = models.IntegerField(default=0)\n\n    def __unicode__(self):\n        return str(self.photo)\n\n    class Meta():\n        verbose_name_plural = \"Photos\"\n</code></pre>\n\n<p>Here is my view. I know that i need override get_queryset, im trying but i cant get put it works:</p>\n\n<pre><code>class RankingPhotosView(ListView):\n    model = Photo\n    template_name = 'ranking.html'\n</code></pre>\n\n<p>In other words, i need render in my template, something like:</p>\n\n<pre><code>Bogot\u00e1:\nFoto1\nFoto2\nFoto3\n\nNew York:\nFoto4\nFoto5\nFoto6\n\nLondon:\nFoto7\nFoto8\nFoto9\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1423078087, "post_id": 28329712, "comment_id": 45006819, "body": "Those are virtual folders, the real ones are hidden from you by the OS, I&#39;m afraid. That said, you didn&#39;t get &quot;No such file or directory: &#39;Documents/FILE_NAME&#39;&quot;, unless you somewhere had such a string."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1423078120, "post_id": 28329712, "comment_id": 45006839, "body": "would be useful to actually show the full path of the file..."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1423078223, "post_id": 28329712, "comment_id": 45006890, "body": "What operating system are you using?"}, {"owner": {"reputation": 1362, "user_id": 2338997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vPZ5X.jpg?s=128&g=1", "display_name": "Barun Sharma", "link": "https://stackoverflow.com/users/2338997/barun-sharma"}, "edited": false, "score": 0, "creation_date": 1423078274, "post_id": 28329712, "comment_id": 45006922, "body": "use <code>&#47;home&#47;derek&#47;&lt;file_name&gt;</code>. This should work. Or you can also add path relative to <code>os.getcwd()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2422, "user_id": 473132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd40c42361fd4a64b4afb83cbecba4dc?s=128&d=identicon&r=PG", "display_name": "Pavel Reznikov", "link": "https://stackoverflow.com/users/473132/pavel-reznikov"}, "is_accepted": true, "score": 1, "last_activity_date": 1423078254, "creation_date": 1423078254, "answer_id": 28329804, "question_id": 28329712, "link": "https://stackoverflow.com/questions/28329712/why-cant-i-open-this-file-for-reading-in-python/28329804#28329804", "title": "Why can&#39;t I open this file for reading in python?", "body": "<p>Python doesn't expand ~ by default. To make it work try <a href=\"https://docs.python.org/2/library/os.path.html#os.path.expanduser\" rel=\"nofollow\"><code>os.path.expanduser</code></a>:</p>\n\n<blockquote>\n  <p>On Unix and Windows, return the argument with an initial component of ~ or ~user replaced by that user\u2018s home directory.</p>\n</blockquote>\n\n<pre><code>source_path = os.path.join(\"~/Documents\", FILE_NAME)\nsource_path = os.path.expanduser(source_path)\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 3969385, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jz2Vz.jpg?s=128&g=1", "display_name": "squidwardtenticles", "link": "https://stackoverflow.com/users/3969385/squidwardtenticles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 28329804, "answer_count": 1, "score": 0, "last_activity_date": 1423078483, "creation_date": 1423077987, "last_edit_date": 1423078483, "question_id": 28329712, "link": "https://stackoverflow.com/questions/28329712/why-cant-i-open-this-file-for-reading-in-python", "title": "Why can&#39;t I open this file for reading in python?", "body": "<p>I'm working in Python and I'm confused why I can't open the file I'm trying to. The code is pretty simple. Here it is.</p>\n\n<pre><code>import os\ndef main():\n  FILE_NAME = \"default_template.csv\"\n  source_path = os.path.join(\"Documents\", FILE_NAME)\n  file = open(source_path, \"r\")\n</code></pre>\n\n<p>At this point I get </p>\n\n<pre><code>IOError: [Errno 2] No such file or directory: 'Documents/FILE_NAME'.\n</code></pre>\n\n<p>I also decided to try to change directories for whatever reason using <code>os.chdir()</code> and passing just about every high level directory on my computer in seperately and nothing worked. In an attempt to find the fix for opening a file I tried editing the path in a bunch of different ways.</p>\n\n<p>I've tried something like:</p>\n\n<pre><code>os.path.join(\"/derek/Documents\", FILE_NAME)\n\nos.path.join(\"/Documents\", FILE_NAME)\n\nos.path.join(\"~/derek/Documents\", FILE_NAME)\n\nos.path.join(\"~\", FILE_NAME)\n</code></pre>\n\n<p>If anyone could help me out I would be extremely thankful. I'm still new to using python to navigate and manage files.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1423077851, "post_id": 28329636, "comment_id": 45006688, "body": "Use <code>sorted</code> instead of <code>sort</code>."}], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 0, "last_activity_date": 1423077837, "creation_date": 1423077837, "answer_id": 28329667, "question_id": 28329636, "link": "https://stackoverflow.com/questions/28329636/how-to-print-the-list-of-strings-sorted-by-the-length-of-each-string-shortest-s/28329667#28329667", "title": "how to print the list of strings Sorted by the length of each string, shortest strings first..as in following python script?", "body": "<p>You cannot input arrays like this. If you want to deal with arrays, create one and then fill it by calling <code>raw_input()</code>. Then do sorting. </p>\n"}, {"tags": [], "owner": {"reputation": 2643, "user_id": 2444293, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12e2df5d1a7f43ca9123592dbf8f9f99?s=128&d=identicon&r=PG", "display_name": "VHarisop", "link": "https://stackoverflow.com/users/2444293/vharisop"}, "is_accepted": true, "score": 1, "last_activity_date": 1423078161, "creation_date": 1423078161, "answer_id": 28329768, "question_id": 28329636, "link": "https://stackoverflow.com/questions/28329636/how-to-print-the-list-of-strings-sorted-by-the-length-of-each-string-shortest-s/28329768#28329768", "title": "how to print the list of strings Sorted by the length of each string, shortest strings first..as in following python script?", "body": "<p>This is really not the preferred way to input an array. However, since you are on python 2.x and <code>input()</code> evaluates what you put into it, you can simply do:</p>\n\n<pre><code> &gt;&gt;&gt; print sorted(input(), key=len)\n ['aa', 'c', 'bbbb']\n ['c', 'aa', 'bbbb']  # output \n &gt;&gt;&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2643, "user_id": 2444293, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12e2df5d1a7f43ca9123592dbf8f9f99?s=128&d=identicon&r=PG", "display_name": "VHarisop", "link": "https://stackoverflow.com/users/2444293/vharisop"}, "edited": false, "score": 0, "creation_date": 1423079525, "post_id": 28329863, "comment_id": 45007572, "body": "In python 2.7, it&#39;s actually <code>raw_input()</code> that treats user input as a string (just as the name dictates). As the python <a href=\"https://docs.python.org/2/library/functions.html?highlight=input#input\" rel=\"nofollow noreferrer\">doc</a> says, <code>input()</code> is equivalent to <code>eval(raw_input())</code>, so <code>input()</code> actually <b>allows</b> you to input pieces of code."}], "tags": [], "owner": {"reputation": 7, "user_id": 4530137, "user_type": "registered", "profile_image": "https://graph.facebook.com/757301084354944/picture?type=large", "display_name": "Godrak", "link": "https://stackoverflow.com/users/4530137/godrak"}, "is_accepted": false, "score": -1, "last_activity_date": 1423078474, "creation_date": 1423078474, "answer_id": 28329863, "question_id": 28329636, "link": "https://stackoverflow.com/questions/28329636/how-to-print-the-list-of-strings-sorted-by-the-length-of-each-string-shortest-s/28329863#28329863", "title": "how to print the list of strings Sorted by the length of each string, shortest strings first..as in following python script?", "body": "<p>Just like ForceBru said, you have to use raw_input() to be able to input list. The usual input does not allow you to input pieces of code, instead it's being processed like ordinary string so the result of your input is</p>\n\n<pre><code>'[\"aaa\",\"bb\",\"cccc\",\"q\"]'     \n</code></pre>\n"}], "owner": {"reputation": 1131, "user_id": 4302328, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xtjiv.jpg?s=128&g=1", "display_name": "the_mahasagar", "link": "https://stackoverflow.com/users/4302328/the-mahasagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 28329768, "answer_count": 3, "score": -1, "last_activity_date": 1423078474, "creation_date": 1423077711, "last_edit_date": 1423078232, "question_id": 28329636, "link": "https://stackoverflow.com/questions/28329636/how-to-print-the-list-of-strings-sorted-by-the-length-of-each-string-shortest-s", "title": "how to print the list of strings Sorted by the length of each string, shortest strings first..as in following python script?", "body": "<pre><code>&gt;&gt;&gt;t= [\"dddd\",\"a\",\"bb\",\"cccc\"]\n&gt;&gt;&gt;t.sort(key=lambda s:len(s))\n&gt;&gt;&gt;print t\n</code></pre>\n\n<p>output: </p>\n\n<pre><code>['a', 'bb', 'dddd', 'cccc']\n</code></pre>\n\n<p>List t is given as input.t gets sorted according to length with 2nd line code.  At last I  print it.\nso..now i want to take input,sort the list and print it.. \n      All in one line code(if possible).\nI have tried other ways such as..</p>\n\n<pre><code>&gt;&gt;&gt; print input().sort(key=lambda s:len(s))\n  [\"aaa\",\"bb\",\"cccc\",\"q\"]  # input\n  None                     #output\n - i think it take return value of input(),i.e is None.\n</code></pre>\n"}, {"tags": ["python", "mysql", "database"], "comments": [{"owner": {"reputation": 731, "user_id": 365296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9660075c6f5de1711e97d6383f4ea1e?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/365296/emanuel"}, "edited": false, "score": 0, "creation_date": 1423077734, "post_id": 28329628, "comment_id": 45006624, "body": "Link seems to show a broken file at gyazo."}, {"owner": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "reply_to_user": {"reputation": 731, "user_id": 365296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9660075c6f5de1711e97d6383f4ea1e?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/365296/emanuel"}, "edited": false, "score": 0, "creation_date": 1423077859, "post_id": 28329628, "comment_id": 45006695, "body": "seems to work fine for me  <a href=\"http://gyazo.com/d995c4da99043da43bfbd057a0a839c7\" rel=\"nofollow noreferrer\">gyazo.com/d995c4da99043da43bfbd057a0a839c7</a>"}, {"owner": {"reputation": 1401, "user_id": 939183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7069d42b4b6458dab926b580c69dcfac?s=128&d=identicon&r=PG", "display_name": "Jesuisme", "link": "https://stackoverflow.com/users/939183/jesuisme"}, "edited": false, "score": 0, "creation_date": 1423078415, "post_id": 28329628, "comment_id": 45006999, "body": "To debug something like this, start with just the database connection.  Make sure that you can properly connect to the database and close the connection.  From a quick glance, it looks like your connection string may not be properly specified.  Once you know you can connect, try something simple, like a SELECT on a single column."}, {"owner": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "edited": false, "score": 0, "creation_date": 1423078993, "post_id": 28329628, "comment_id": 45007282, "body": "establishing the connection is the problem here, I just tried a simple select statement like you&#39;ve mentioned and it doesn&#39;t execute because it doesn&#39;t recognise that the database even exists. Is there anything incorrect in my syntax?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "edited": false, "score": 0, "creation_date": 1423081231, "post_id": 28330465, "comment_id": 45008528, "body": "It says mysql isn&#39;t a recognized command on the terminal.Do I have to type it from a particular directory?"}, {"owner": {"reputation": 731, "user_id": 365296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9660075c6f5de1711e97d6383f4ea1e?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/365296/emanuel"}, "reply_to_user": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "edited": false, "score": 0, "creation_date": 1423081445, "post_id": 28330465, "comment_id": 45008632, "body": "It seems mysql.exe is not in a folder listed in your PATH environment variable. Restarting your GUI and making sure everything is still there would be another way, or looking for some kind of commit or save button that looks special."}, {"owner": {"reputation": 731, "user_id": 365296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9660075c6f5de1711e97d6383f4ea1e?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/365296/emanuel"}, "reply_to_user": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "edited": false, "score": 0, "creation_date": 1423081498, "post_id": 28330465, "comment_id": 45008657, "body": "Your GUI application probably has a window where you can write commands by hand and execute them. That would be a good place to type <code>use tweetinfo;</code> and <code>show create table twtinfo;</code>. It will probably be named <code>MySQL query window</code> or something similar."}, {"owner": {"reputation": 731, "user_id": 365296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9660075c6f5de1711e97d6383f4ea1e?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/365296/emanuel"}, "reply_to_user": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "edited": false, "score": 0, "creation_date": 1423081794, "post_id": 28330465, "comment_id": 45008801, "body": "In your MySQL Workbench open, visible on your screenshot, there are two tabs named &quot;Local instance MySQL56&quot;. Are you sure you don&#39;t have two MySQL processes running, and that you python code connects to the wrong one?"}, {"owner": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "edited": false, "score": 0, "creation_date": 1423082016, "post_id": 28330465, "comment_id": 45008916, "body": "The problem was that I hadn&#39;t created the schema on the instance of the mysql server that was running. I had it setup as a model where it presumably existed without a connection. Now I have other troubles but atleast I know the connection holds now. Thanks! <a href=\"http://gyazo.com/816e7c8f253593f763561798c2d65075\" rel=\"nofollow noreferrer\">gyazo.com/816e7c8f253593f763561798c2d65075</a>"}], "tags": [], "owner": {"reputation": 731, "user_id": 365296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9660075c6f5de1711e97d6383f4ea1e?s=128&d=identicon&r=PG", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/365296/emanuel"}, "is_accepted": true, "score": 0, "last_activity_date": 1423080366, "creation_date": 1423080366, "answer_id": 28330465, "question_id": 28329628, "link": "https://stackoverflow.com/questions/28329628/unknown-database-error-python-mysql/28330465#28330465", "title": "Unknown Database Error python mysql", "body": "<p>The MySQL process is complaining about the database you are trying to access, namely <code>tweetinfo</code> isn't existing. MySQL error 1049 is usually an indication of having to forgot to select a database, but you did as forth argument to <code>mdb.connect()</code></p>\n\n<p>Possible errors could be:</p>\n\n<ul>\n<li>That you have several MySQL processes running, with the one with the proper database not being on the default MySQL port.</li>\n<li>That somehow your database GUI application hasn't actually submitted your database and table to the MySQL process.</li>\n<li>That MySQL isn't running? You would probably get a different error message for that, but it could be an idea to make sure it is just in case.</li>\n</ul>\n\n<p>Just to check if your tables exists and that your database is in place, open a terminal and write the following commands:</p>\n\n<pre><code>mysql -u root -proot\nuse tweetinfo;\nshow create table twtinfo;\n</code></pre>\n\n<p>Another thing to try could be to ask the MySQL process about which database it thinks you are using. Try adding something like the following to your code:</p>\n\n<pre><code>cur.execute(\"SELECT DATABASE() FROM DUAL;\")\nprint(\"Database is: %s.\", cur.fetchone()[0])\n</code></pre>\n\n<p>I'm not a python programmer, so I'm not entirely confident that will work without some adjustments.</p>\n\n<p>If none of this gave you a good lead, I'm not quite sure what's wrong.</p>\n"}], "owner": {"reputation": 41, "user_id": 3204064, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3005ddbda8777506c9470e70789726b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3204064", "link": "https://stackoverflow.com/users/3204064/user3204064"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2145, "favorite_count": 1, "accepted_answer_id": 28330465, "answer_count": 1, "score": 1, "last_activity_date": 1423080366, "creation_date": 1423077683, "question_id": 28329628, "link": "https://stackoverflow.com/questions/28329628/unknown-database-error-python-mysql", "title": "Unknown Database Error python mysql", "body": "<p>This link contains shows the database I've created in the mysql workbench and the connection I have established in the code but the database is unknown for some reason. Is there a step I've missed?\n<a href=\"http://gyazo.com/d995c4da99043da43bfbd057a0a839c7\" rel=\"nofollow\">http://gyazo.com/d995c4da99043da43bfbd057a0a839c7</a></p>\n\n<pre><code>__author__ = 'avi'\n\nfrom TwitterSearch import *\nimport json\n\ntwtsearch = TwitterSearch(\n    consumer_key='PXTUrlRfgC1zSTsAPU9z6EHtD',\n    consumer_secret='qM9F4FVj1qLFc6f795r96DQPNAJO8hkbWy4PXWYLfQcYyNGY7D',\n    access_token='2943116292-wVHEjbfjX7OFqaOURBqim5o7Vs6lZyjxsoto8nD',\n    access_token_secret='CJAppSRY9TZ5cwYTABZhH2YTd0rm5IzBDqPder6v4qLBA'\n    )\n\ntwtsearchorder = TwitterSearchOrder()\ntwtsearchorder.set_keywords(['iphone6'])\ntwtsearchorder.set_language('en')\ntwtsearchorder.set_include_entities(True)\n\n\ntweet_limit=50\nparsed_tweets= {}\ntable=\"twtinfo\"\nimport MySQLdb as mdb\n\ncon = mdb.connect('localhost', 'root','root','tweetinfo')\ncur=con.cursor()\n\nfor tweet in twtsearch.search_tweets_iterable(twtsearchorder):\n    if tweet_limit &gt; 0 :\n        parsed_tweets['name'] = tweet['user']['screen_name']\n        parsed_tweets['content'] = tweet['text']\n        parsed_tweets['user_id'] = tweet['user']['id']\n        parsed_tweets['fav_count'] = tweet['favorite_count']\n        parsed_tweets['location'] = tweet['user']['location']\n        parsed_tweets['retweet_count'] = tweet['retweet_count']\n        placeholders= ', '.join(['%s'] *len(parsed_tweets))\n        columns = ', '.join(parsed_tweets.keys())\n        sql=\"INSERT into %s ( %s ) VALUES ( %s )\" % (table, columns, placeholders)\n        cur.execute(sql,parsed_tweets.values())\n        tweet_limit -= 1\n</code></pre>\n"}, {"tags": ["python", "json", "bash", "shell"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1423077698, "post_id": 28329596, "comment_id": 45006598, "body": "<code>result</code> is a list. You need to index into it before you can get <code>hostid</code> out. (The error for that second example should have tipped you off about that.) Try <code>...[&quot;result&quot;][0][&quot;hostid&quot;]&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2422, "user_id": 473132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd40c42361fd4a64b4afb83cbecba4dc?s=128&d=identicon&r=PG", "display_name": "Pavel Reznikov", "link": "https://stackoverflow.com/users/473132/pavel-reznikov"}, "is_accepted": false, "score": 2, "last_activity_date": 1423077707, "creation_date": 1423077707, "answer_id": 28329634, "question_id": 28329596, "link": "https://stackoverflow.com/questions/28329596/parsing-string-or-json-in-bash-shell/28329634#28329634", "title": "parsing string or json in bash (shell)", "body": "<p>In your sample <code>result</code> is an array. To get <code>hostid</code> you need to specify item index:</p>\n\n<pre><code>json.load(sys.stdin)[\"result\"][0][\"hostid\"]\n</code></pre>\n\n<p>So your code shoud be like:</p>\n\n<pre><code>reference_id2=`echo \"$reference_id\" | python -c 'import json, sys; print json.load(sys.stdin)[\"result\"][0][\"hostid\"]'`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 2, "last_activity_date": 1423077949, "creation_date": 1423077949, "answer_id": 28329696, "question_id": 28329596, "link": "https://stackoverflow.com/questions/28329596/parsing-string-or-json-in-bash-shell/28329696#28329696", "title": "parsing string or json in bash (shell)", "body": "<p>Give <code>jq</code> a try. It's the easiest way to parse JSON in the shell.</p>\n\n<pre><code>$ jq -r '.result[0].hostid' &lt;&lt;&lt; \"$json\"\n10158\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 3731374, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/71878c2f62357f307872b8ca345f6ead?s=128&d=identicon&r=PG&f=1", "display_name": "user3731374", "link": "https://stackoverflow.com/users/3731374/user3731374"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423077949, "creation_date": 1423077571, "question_id": 28329596, "link": "https://stackoverflow.com/questions/28329596/parsing-string-or-json-in-bash-shell", "title": "parsing string or json in bash (shell)", "body": "<p>please help me.</p>\n\n<p>I have the string (json request) : </p>\n\n<pre><code>{\"jsonrpc\":\"2.0\",\"result\":[{\"hostid\":\"10158\"}],\"id\":1}\n</code></pre>\n\n<p>i try to parsing it with command :</p>\n\n<pre><code>reference_id2=`echo \"$reference_id\" | python -c 'import json, sys; print json.load(sys.stdin)[\"result\"]'`\n</code></pre>\n\n<p>and still have <code>[{u'hostid': u'10158'}]</code></p>\n\n<p>How i can get only 10158 (like in example)</p>\n\n<p>THanks.</p>\n\n<p>P.S. this is doesn't work too :</p>\n\n<pre><code>reference_id2=`echo \"$reference_id\" | python -c 'import json, sys; print json.load(sys.stdin)[\"result\"][\"hostid\"]'`\n</code></pre>\n"}, {"tags": ["python", "flask", "flask-restless"], "answers": [{"comments": [{"owner": {"reputation": 528, "user_id": 2986873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f8f097306d3eb502769d4b4d2557d47a?s=128&d=identicon&r=PG", "display_name": "jwanglof", "link": "https://stackoverflow.com/users/2986873/jwanglof"}, "edited": false, "score": 0, "creation_date": 1423089107, "post_id": 28331794, "comment_id": 45012527, "body": "Thanks for the explanation! Helped a lot =)"}, {"owner": {"reputation": 5174, "user_id": 1819983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/754e81f082c3d913202fc747cbde860a?s=128&d=identicon&r=PG", "display_name": "Rachel Sanders", "link": "https://stackoverflow.com/users/1819983/rachel-sanders"}, "reply_to_user": {"reputation": 528, "user_id": 2986873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f8f097306d3eb502769d4b4d2557d47a?s=128&d=identicon&r=PG", "display_name": "jwanglof", "link": "https://stackoverflow.com/users/2986873/jwanglof"}, "edited": false, "score": 0, "creation_date": 1423094872, "post_id": 28331794, "comment_id": 45014662, "body": "awesome! I&#39;m so glad. :)"}], "tags": [], "owner": {"reputation": 5174, "user_id": 1819983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/754e81f082c3d913202fc747cbde860a?s=128&d=identicon&r=PG", "display_name": "Rachel Sanders", "link": "https://stackoverflow.com/users/1819983/rachel-sanders"}, "is_accepted": true, "score": 2, "last_activity_date": 1423085304, "last_edit_date": 1495542131, "creation_date": 1423085304, "answer_id": 28331794, "question_id": 28329594, "link": "https://stackoverflow.com/questions/28329594/how-to-use-the-keyword-arguments-in-flask-restless/28331794#28331794", "title": "How to use the keyword arguments in Flask-RESTless", "body": "<p>From reading the docs, you don't pass data to the pre-processor, you <strong>are</strong> the pre-processor and data is passed to <strong>you</strong>. </p>\n\n<p>The exact format of the data depends on the specific method:</p>\n\n<p><a href=\"https://flask-restless.readthedocs.org/en/latest/customizing.html#request-preprocessors-and-postprocessors\" rel=\"nofollow noreferrer\">https://flask-restless.readthedocs.org/en/latest/customizing.html#request-preprocessors-and-postprocessors</a></p>\n\n<blockquote>\n  <p>The preprocessors and postprocessors for each type of request accept different arguments. Most of them should have no return value (more specifically, any returned value is ignored)....Those preprocessors and postprocessors that accept dictionaries as parameters can (and should) modify their arguments in-place.</p>\n</blockquote>\n\n<p>You don't use the *kw directly, it's just there to make your code forwards compatible with Flask-RESTLess so if they decided to update the API and send a different set of parameters to your function, it won't break.</p>\n\n<p>In your particular example, you would just edit the <code>data</code> dictionary and since Python variables are <a href=\"https://stackoverflow.com/questions/986006/how-do-i-pass-a-variable-by-reference\">pass by assignment</a>, once you edit it, it's edited for the rest of the chain.</p>\n\n<pre><code>def validation_preprocessor(data=None, **kw):\n    if data:\n        data[\"foobar\"] = \"rarr I'm a dinosaur\"\n</code></pre>\n\n<p>I personally think that's confusing and not how I would expect things to work, but I assume they had a reason for it.</p>\n"}], "owner": {"reputation": 528, "user_id": 2986873, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f8f097306d3eb502769d4b4d2557d47a?s=128&d=identicon&r=PG", "display_name": "jwanglof", "link": "https://stackoverflow.com/users/2986873/jwanglof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 28331794, "answer_count": 1, "score": 1, "last_activity_date": 1423085304, "creation_date": 1423077559, "question_id": 28329594, "link": "https://stackoverflow.com/questions/28329594/how-to-use-the-keyword-arguments-in-flask-restless", "title": "How to use the keyword arguments in Flask-RESTless", "body": "<p>Me and a buddy have been reading through the docs for Flask-RESTless and it says:</p>\n\n<blockquote>\n  <p>The arguments to the preprocessor and postprocessor functions will be provided as keyword arguments, so you should always add **kw as the final argument when defining a preprocessor or postprocessor function. </p>\n</blockquote>\n\n<p>but it doesn't specify how we can use these keyword argument to pass info to the pre- or postprocessor. Can anyone tell us how to do this?</p>\n\n<p>Our create_api looks like this right now:</p>\n\n<pre><code>create_api(Foo,\n           methods=['GET', 'POST', 'PUT', 'DELETE'],\n           collection_name='p',\n           url_prefix='/api/v1',\n           primary_key='uid',\n           exclude_columns=['id'],\n           preprocessors={\n              'POST': [authenticate, validation_preprocessor],\n              'GET_SINGLE': [authenticate],\n              'GET_MANY': [authenticate],\n              'PUT_SINGLE': [authenticate, validation_preprocessor],\n              'PUT_MANY': [authenticate, validation_preprocessor],\n              'DELETE': [authenticate]\n           })\n\ndef validation_preprocessor(data=None, **kw):\n    # Do stuff\n    pass\n</code></pre>\n\n<p>What we want to do is use **kw in validation_preprocessor for our own values.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 1, "creation_date": 1423077355, "post_id": 28329498, "comment_id": 45006415, "body": "This question is worded differently, but the answers to the other question work here, as the key is recognizing what <code>is</code> does and how it differs from <code>==</code>."}, {"owner": {"reputation": 1095, "user_id": 3646273, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bc8576f5fc52a993defa41c91ed9cbc1?s=128&d=identicon&r=PG&f=1", "display_name": "hft", "link": "https://stackoverflow.com/users/3646273/hft"}, "edited": false, "score": 1, "creation_date": 1423077531, "post_id": 28329498, "comment_id": 45006498, "body": "There was a comment that got deleted referring you to the difference between &quot;is&quot; and &quot;==&quot;. Is that your issue, or are you curious as to why the strings have the same identity if there is no space, but have different identities when there is a space character... Other non-printable characters also make the identities different."}, {"owner": {"reputation": 1163, "user_id": 3746808, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Q5swC.jpg?s=128&g=1", "display_name": "midkin", "link": "https://stackoverflow.com/users/3746808/midkin"}, "edited": false, "score": 2, "creation_date": 1423077672, "post_id": 28329498, "comment_id": 45006587, "body": "I did ask NOTHING like == or the differance betweeen == and is, sry"}, {"owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "edited": false, "score": 1, "creation_date": 1423085666, "post_id": 28329498, "comment_id": 45010845, "body": "A good article on the topic: <a href=\"http://guilload.com/python-string-interning/\" rel=\"nofollow noreferrer\">guilload.com/python-string-interning</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1163, "user_id": 3746808, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Q5swC.jpg?s=128&g=1", "display_name": "midkin", "link": "https://stackoverflow.com/users/3746808/midkin"}, "edited": false, "score": 1, "creation_date": 1423077845, "post_id": 28329522, "comment_id": 45006686, "body": "Your right about the numbers as a=260, b=260 ---&gt; a is b is False... However what&#39;s the answer about my strings?"}, {"owner": {"reputation": 1163, "user_id": 3746808, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Q5swC.jpg?s=128&g=1", "display_name": "midkin", "link": "https://stackoverflow.com/users/3746808/midkin"}, "edited": false, "score": 1, "creation_date": 1423077975, "post_id": 28329522, "comment_id": 45006756, "body": "No since a=&#39;rgaerdavaerdgvrdversdvseDvaerdvreds&#39;, b=rgaerdavaerdgvrdversdvseDvaerdvreds is True.. its about the char SPACE and not about long or small"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 2, "creation_date": 1423078488, "post_id": 28329522, "comment_id": 45007034, "body": "Note: the dup question <b>does</b> contain the information you are giving here, in the <a href=\"http://stackoverflow.com/a/1504848/510937\">second answer</a>."}, {"owner": {"reputation": 1163, "user_id": 3746808, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Q5swC.jpg?s=128&g=1", "display_name": "midkin", "link": "https://stackoverflow.com/users/3746808/midkin"}, "edited": false, "score": 1, "creation_date": 1423078542, "post_id": 28329522, "comment_id": 45007057, "body": "So a string with SPACE doesn&#39;t get cached! Am I right?"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "reply_to_user": {"reputation": 1163, "user_id": 3746808, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Q5swC.jpg?s=128&g=1", "display_name": "midkin", "link": "https://stackoverflow.com/users/3746808/midkin"}, "edited": false, "score": 2, "creation_date": 1423078574, "post_id": 28329522, "comment_id": 45007073, "body": "@midkin It&#39;s <i>useless</i> to think about when that happens because there are <i>no guarantees</i>. We <b>cannot</b> say that if there&#39;s a space it doesn&#39;t get cached because it <i>may</i> happen now, and not in the next bugfix release. Different python implementations will use different ways of determining when to intern, and different versions of the same implementation are free to disagree in this regard."}, {"owner": {"reputation": 1163, "user_id": 3746808, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Q5swC.jpg?s=128&g=1", "display_name": "midkin", "link": "https://stackoverflow.com/users/3746808/midkin"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 1, "creation_date": 1423078907, "post_id": 28329522, "comment_id": 45007246, "body": "@Bakuriu I keep your answer as right! It just seems that in python&#39;s 3.4.2 idle string with SPACE are not getting cached!"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 2, "creation_date": 1423078927, "post_id": 28329522, "comment_id": 45007252, "body": "I decided to downvote your answer because you are providing <i>false information</i>. If you want to add a paragraph as your last one you should either 1) provide a reference to some documentation that mentions that or 2) Providing a link to the source code where that is done <i>and</i> clearly mention that this is bound to change with implementations and versions. As it stands your answer is suggesting that such a rule exist and can be relied upon, <b>which is false</b> (at least, as far as I know. If I&#39;m wrong prove it with a reference)."}, {"owner": {"reputation": 1163, "user_id": 3746808, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Q5swC.jpg?s=128&g=1", "display_name": "midkin", "link": "https://stackoverflow.com/users/3746808/midkin"}, "edited": false, "score": 1, "creation_date": 1423078967, "post_id": 28329522, "comment_id": 45007273, "body": "@PadraicCunningham since I think your answer is &quot;answering&quot; most of what i needed to hear i ll choose it as my answer!  Btw thanks all for your comments!"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 3, "creation_date": 1423079277, "post_id": 28329522, "comment_id": 45007417, "body": "@PadraicCunningham That&#39;s not a reference from the documentation or any official document about the python language. Also: note that right after mentioning interning it mentions peephole optimizations which is exactly one point where what you say fails: put <code>a = &#39;abc abc&#39;</code> and <code>b = &#39;abc abc&#39;</code> inside a function and suddenly <code>a is b</code> returns <code>True</code>."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 4, "creation_date": 1423079608, "post_id": 28329522, "comment_id": 45007606, "body": "@Bakuriu,  multiple assignments are not single assignments so there is a distinct difference, a function is not mentioned  anywhere, what is asked in the question and demonstrated in the answer is simple assignments, there is no mention of functions anywhere just an explanation for the question asked."}, {"owner": {"reputation": 192865, "user_id": 989121, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1Cvf7.png?s=128&g=1", "display_name": "georg", "link": "https://stackoverflow.com/users/989121/georg"}, "edited": false, "score": 1, "creation_date": 1423085892, "post_id": 28329522, "comment_id": 45010966, "body": "Multiple assignments are not the issue per se, the thing is that the REPL sees both strings <i>on the same line</i>, thus making a peephole optimization possible. For example <code>a=&#39;x y&#39;; b=&#39;x y&#39;</code> in REPL will cause <code>x y</code> to be folded and interned as well."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1423086727, "post_id": 28329522, "comment_id": 45011404, "body": "@georgm yes, what I was trying to say was in the purest form when you create a simple single assignment  one per line the string will be interned based on the criteria. The  peephole optimisation is another part where the are certain limits on length etc.. but that is another topic. If you know of anything related that is not covered feel free to edit"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 2, "creation_date": 1423088602, "post_id": 28329522, "comment_id": 45012328, "body": "@martijnpieters , I referenced your article in codementor in a comment before i edited after looking at the source, in your article it states  that the string must start with an underscore or a letter but it seems that it can also start with a number, the only criteria is that it must be one of the three no?"}, {"owner": {"reputation": 18644, "user_id": 50065, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f8b1ed37a47da3547e6f0b6f60a916a3?s=128&d=identicon&r=PG", "display_name": "BioGeek", "link": "https://stackoverflow.com/users/50065/biogeek"}, "edited": false, "score": 1, "creation_date": 1440164272, "post_id": 28329522, "comment_id": 52172835, "body": "Shouldn&#39;t the second comment in the first code block be &#39;it reuses the object when assigning to <b>b</b>&#39;?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 18644, "user_id": 50065, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f8b1ed37a47da3547e6f0b6f60a916a3?s=128&d=identicon&r=PG", "display_name": "BioGeek", "link": "https://stackoverflow.com/users/50065/biogeek"}, "edited": false, "score": 0, "creation_date": 1440165687, "post_id": 28329522, "comment_id": 52173901, "body": "@BioGeek, yep, fixed."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 32, "last_activity_date": 1440165677, "last_edit_date": 1440165677, "creation_date": 1423077303, "answer_id": 28329522, "question_id": 28329498, "link": "https://stackoverflow.com/questions/28329498/why-does-a-space-affect-the-identity-comparison-of-equal-strings/28329522#28329522", "title": "Why does a space affect the identity comparison of equal strings?", "body": "<p>The python interpreter caches some strings based on certain criteria, the first <code>abc</code> string is cached and used for both but the second is not. It is the same for small ints from <code>-5</code> to <code>256</code>. </p>\n\n<p>Because the strings are interned/cached  assigning <code>a</code> and <code>b</code> to <code>\"abc\"</code> makes <code>a</code> and <code>b</code> point to the same objects in memory so using <code>is</code>, which checks if two objects are actually  the same object, returns <code>True</code>.</p>\n\n<p>The second string <code>abc abc</code> is not cached so they are two entirely different object in memory so out identity check using <code>is</code> returns <code>False</code>. This time <code>a</code> is <strong>not</strong> <code>b</code>. They are both pointing to different objects in memory.</p>\n\n<pre><code>In [43]: a = \"abc\" # python caches abc\nIn [44]: b = \"abc\" # it reuses the object when assigning to b\nIn [45]: id(a)\nOut[45]: 139806825858808    # same id's, same object in memory\nIn [46]: id(b)\nOut[46]: 139806825858808    \nIn [47]: a = 'abc abc'   # not cached  \nIn [48]: id(a)\nOut[48]: 139806688800984    \nIn [49]: b = 'abc abc'    \nIn [50]: id(b)         # different id's different objects\nOut[50]: 139806688801208\n</code></pre>\n\n<p>The criteria for caching strings is if the string only has <em>letters</em>, <em>underscores</em> and <em>numbers</em> in the string so in your case the space does not meet the criteria. </p>\n\n<p>Using the interpreter there is one case where you can end up pointing to the same object even when the string does not meet the above criteria, multiple assignments.</p>\n\n<pre><code>In [51]: a,b  = 'abc abc','abc abc'\n\nIn [52]: id(a)\nOut[52]: 139806688801768\n\nIn [53]: id(b)\nOut[53]: 139806688801768\n\nIn [54]: a is b\nOut[54]: True\n</code></pre>\n\n<p>Looking  <a href=\"https://github.com/python/cpython/blob/master/Objects/codeobject.c\">codeobject.c source</a> for deciding the criteria we see <code>NAME_CHARS</code> decides what can be interned:</p>\n\n<pre><code>#define NAME_CHARS \\\n    \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz\"\n\n/* all_name_chars(s): true iff all chars in s are valid NAME_CHARS */\n\nstatic int\nall_name_chars(unsigned char *s)\n{\n    static char ok_name_char[256];\n    static unsigned char *name_chars = (unsigned char *)NAME_CHARS;\n\n    if (ok_name_char[*name_chars] == 0) {\n        unsigned char *p;\n        for (p = name_chars; *p; p++)\n            ok_name_char[*p] = 1;\n    }\n    while (*s) {\n        if (ok_name_char[*s++] == 0)\n            return 0;\n    }\n    return 1;\n}\n</code></pre>\n\n<p>A string of length  0 or 1  will always be shared as we can see in the <code>PyString_FromStringAndSize</code> function  in the <a href=\"https://github.com/python-git/python/blob/master/Objects/stringobject.c\">stringobject.c</a> source.</p>\n\n<pre><code>/* share short strings */\n    if (size == 0) {\n        PyObject *t = (PyObject *)op;\n        PyString_InternInPlace(&amp;t);\n        op = (PyStringObject *)t;\n        nullstring = op;\n        Py_INCREF(op);\n    } else if (size == 1 &amp;&amp; str != NULL) {\n        PyObject *t = (PyObject *)op;\n        PyString_InternInPlace(&amp;t);\n        op = (PyStringObject *)t;\n        characters[*str &amp; UCHAR_MAX] = op;\n        Py_INCREF(op);\n    }\n    return (PyObject *) op;\n}\n</code></pre>\n\n<p>Not directly related to the question but for those interested <code>PyCode_New</code> also from the <code>codeobject.c</code> source shows how more strings are interned when building a codeobject once the strings meet the criteria in <code>all_name_chars</code>.</p>\n\n<pre><code>PyCodeObject *\nPyCode_New(int argcount, int nlocals, int stacksize, int flags,\n       PyObject *code, PyObject *consts, PyObject *names,\n       PyObject *varnames, PyObject *freevars, PyObject *cellvars,\n       PyObject *filename, PyObject *name, int firstlineno,\n       PyObject *lnotab)\n{\n    PyCodeObject *co;\n    Py_ssize_t i;\n    /* Check argument types */\n    if (argcount &lt; 0 || nlocals &lt; 0 ||\n        code == NULL ||\n        consts == NULL || !PyTuple_Check(consts) ||\n        names == NULL || !PyTuple_Check(names) ||\n        varnames == NULL || !PyTuple_Check(varnames) ||\n        freevars == NULL || !PyTuple_Check(freevars) ||\n        cellvars == NULL || !PyTuple_Check(cellvars) ||\n        name == NULL || !PyString_Check(name) ||\n        filename == NULL || !PyString_Check(filename) ||\n        lnotab == NULL || !PyString_Check(lnotab) ||\n        !PyObject_CheckReadBuffer(code)) {\n        PyErr_BadInternalCall();\n        return NULL;\n    }\n    intern_strings(names);\n    intern_strings(varnames);\n    intern_strings(freevars);\n    intern_strings(cellvars);\n    /* Intern selected string constants */\n    for (i = PyTuple_Size(consts); --i &gt;= 0; ) {\n        PyObject *v = PyTuple_GetItem(consts, i);\n        if (!PyString_Check(v))\n            continue;\n        if (!all_name_chars((unsigned char *)PyString_AS_STRING(v)))\n            continue;\n        PyString_InternInPlace(&amp;PyTuple_GET_ITEM(consts, i));\n    }\n</code></pre>\n\n<p><em>This answer is based on simple assignments using the cpython interpreter, as far as interning in relation to functions or any other functionality outside of simple assignments, that was not asked nor answered.</em></p>\n\n<p>If anyone with a greater  understanding of c code has anything to add feel free to edit.</p>\n\n<p>There is a much more thorough explanation <a href=\"http://guilload.com/python-string-interning/\">here</a> of the whole string interning.</p>\n"}], "owner": {"reputation": 1163, "user_id": 3746808, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Q5swC.jpg?s=128&g=1", "display_name": "midkin", "link": "https://stackoverflow.com/users/3746808/midkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2295, "favorite_count": 3, "closed_date": 1423085620, "accepted_answer_id": 28329522, "answer_count": 1, "score": 16, "last_activity_date": 1474112562, "creation_date": 1423077189, "last_edit_date": 1495542392, "question_id": 28329498, "link": "https://stackoverflow.com/questions/28329498/why-does-a-space-affect-the-identity-comparison-of-equal-strings", "closed_reason": "Duplicate", "title": "Why does a space affect the identity comparison of equal strings?", "body": "<p>I've noticed that adding a space to identical strings makes them compare unequal using <code>is</code>, while the non-space versions compare equal.</p>\n\n<pre><code>a = 'abc'\nb = 'abc'\na is b\n#outputs: True\n\na = 'abc abc'\nb = 'abc abc'\na is b\n#outputs: False\n</code></pre>\n\n<p>I have read <a href=\"https://stackoverflow.com/q/1504717/2359271\">this question about comparing strings with <code>==</code> and <code>is</code></a>. I think this is a different question because the space character is changing the behavior, not the length of the string. See:</p>\n\n<pre><code>a = 'abc'\nb = 'abc'\na is b # True\n\na = 'gfhfghssrtjyhgjdagtaerjkdhhgffdhfdah'\nb = 'gfhfghssrtjyhgjdagtaerjkdhhgffdhfdah'\na is b # True\n</code></pre>\n\n<p>Why does adding a space to the string change the result of this comparison?</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 2894, "user_id": 887828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606c0775e421bdd903857b5b47a32566?s=128&d=identicon&r=PG", "display_name": "Sevanteri", "link": "https://stackoverflow.com/users/887828/sevanteri"}, "edited": false, "score": 1, "creation_date": 1423077647, "post_id": 28329463, "comment_id": 45006569, "body": "<a href=\"http://docs.sqlalchemy.org/en/latest/orm/events.html#sqlalchemy.orm.events.MapperEvents.before_insert\" rel=\"nofollow noreferrer\">See the Warning in the before_insert event</a>. As it states, the validation should be done in the <code>__init__</code> function or you should implement a validation handler with the <code>@validates</code> decorator."}, {"owner": {"reputation": 113, "user_id": 1020013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7c16dcf0dfb826cf7ca667abc6c4196f?s=128&d=identicon&r=PG", "display_name": "sebnil", "link": "https://stackoverflow.com/users/1020013/sebnil"}, "reply_to_user": {"reputation": 2894, "user_id": 887828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606c0775e421bdd903857b5b47a32566?s=128&d=identicon&r=PG", "display_name": "Sevanteri", "link": "https://stackoverflow.com/users/887828/sevanteri"}, "edited": false, "score": 0, "creation_date": 1423102982, "post_id": 28329463, "comment_id": 45016586, "body": "You are right. But, what I am trying to do is find the correct way to do this.  <b>init</b> is just called once the object is created and not right before a commit. (I might want to populate my object in segments and then commit). The @validates decorator does not seem to give me the option to query the database. An example of what I would like to do is to create children and/or parents to a database entry, and then commit. Basically make sure that every entry is valid before being committed."}], "owner": {"reputation": 113, "user_id": 1020013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7c16dcf0dfb826cf7ca667abc6c4196f?s=128&d=identicon&r=PG", "display_name": "sebnil", "link": "https://stackoverflow.com/users/1020013/sebnil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1423077071, "creation_date": 1423077071, "question_id": 28329463, "link": "https://stackoverflow.com/questions/28329463/query-database-in-callback-in-sqlalchemy", "title": "Query database in callback in SQLAlchemy", "body": "<p>I want to validate and modify my data before I insert it. To validate I need to query the database and in some cases also modify the database. It just seems like I can not access the session to perform db queries from inside a Base class.</p>\n\n<p>Can this be done in Sqlalchemy ORM or should I be looking for another ORM?</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>class Message(Base):\n    __tablename__ = 'messages'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(250), nullable=False)\n\n@event.listens_for(Message, 'before_insert')\ndef receive_before_insert(mapper, connection, target):\n    # here is where I would like to query and insert stuff into db\n</code></pre>\n"}, {"tags": ["python", "django", "tinymce"], "answers": [{"tags": [], "owner": {"reputation": 9722, "user_id": 991572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32c3a43c2f79abe038e8ec5d9f306b29?s=128&d=identicon&r=PG", "display_name": "allcaps", "link": "https://stackoverflow.com/users/991572/allcaps"}, "is_accepted": false, "score": 0, "last_activity_date": 1423085916, "creation_date": 1423085916, "answer_id": 28331963, "question_id": 28329459, "link": "https://stackoverflow.com/questions/28329459/django-tinymce-different-font-size/28331963#28331963", "title": "django tinymce different font size", "body": "<p>You have to set <code>content_css</code>. The CSS file in this setting could be the very CSS file that controls the looks of all your pages. Because then the contents in the editor will also have the looks of your site. Thus the appropriate font-size.</p>\n\n<pre><code>tinyMCE.init({\n        ...\n        content_css : \"/mycontent.css\"\n});\n</code></pre>\n\n<p>That's what a WYSIWYG-editor is all about. ;)</p>\n"}], "owner": {"reputation": 5269, "user_id": 4192691, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/dzokh.jpg?s=128&g=1", "display_name": "varad", "link": "https://stackoverflow.com/users/4192691/varad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423085916, "creation_date": 1423077065, "question_id": 28329459, "link": "https://stackoverflow.com/questions/28329459/django-tinymce-different-font-size", "title": "django tinymce different font size", "body": "<p>In my base template I am using for textarea. It looks like:</p>\n\n<pre><code>&lt;script src=\"//tinymce.cachefly.net/4.1/tinymce.min.js\"&gt;&lt;/script&gt;\n&lt;script&gt;\ntinymce.init({selector:'textarea',\nplugins: [\n    \"advlist autolink lists link image charmap print preview hr anchor pagebreak\",\n    \"searchreplace wordcount visualblocks visualchars code fullscreen\",\n    \"insertdatetime media nonbreaking save table contextmenu directionality\",\n    \"emoticons template paste textcolor colorpicker textpattern\"\n],\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>Here is all good except the font size is small. I dont see any section where I can increase the font size.\nHow can I fix the font size to be of say 16px. If not then how to change the font size from dropdown..</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 4230, "user_id": 1912128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YyM8r.png?s=128&g=1", "display_name": "taesu", "link": "https://stackoverflow.com/users/1912128/taesu"}, "edited": false, "score": 0, "creation_date": 1423077008, "post_id": 28329409, "comment_id": 45006221, "body": "is the data in a file?"}, {"owner": {"reputation": 1, "user_id": 4237769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7e0890367bec2300471bf94df6e5c9?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4237769/abi"}, "reply_to_user": {"reputation": 4230, "user_id": 1912128, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YyM8r.png?s=128&g=1", "display_name": "taesu", "link": "https://stackoverflow.com/users/1912128/taesu"}, "edited": false, "score": 0, "creation_date": 1423077096, "post_id": 28329409, "comment_id": 45006267, "body": "no, I am generating this data computationally and am not reading it from a file"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423077137, "post_id": 28329409, "comment_id": 45006292, "body": "that data looks unlike any format I have seen before, what exactly is it stored in?"}, {"owner": {"reputation": 1, "user_id": 4237769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7e0890367bec2300471bf94df6e5c9?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4237769/abi"}, "edited": false, "score": 0, "creation_date": 1423077366, "post_id": 28329409, "comment_id": 45006420, "body": "it&#39;s not stored, this is a result of doing computation within a def function that I have written in a loop which is generating sequence like 0,1,2,0,1,2,01,2...."}], "answers": [{"tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1423077244, "creation_date": 1423077244, "answer_id": 28329511, "question_id": 28329409, "link": "https://stackoverflow.com/questions/28329409/splitting-data-into-dictionaries/28329511#28329511", "title": "Splitting data into dictionaries", "body": "<p>Ok, two things:</p>\n\n<ol>\n<li>if your keys are actually 1...N, then don't use a dictionary but a simple list.</li>\n<li><p>solution with a dict, that I, for clarity, called <code>dictionary</code>. The 1...N are the <code>key</code>s, and your floating point numbers are the <code>value</code>s:</p>\n\n<p>if key is in dictionary:\n     dictionary[key] += value else:\n     dictionary[key] = value</p></li>\n</ol>\n\n<p>You need to apply that to each <code>key, value</code> pair.</p>\n"}, {"comments": [{"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423078635, "post_id": 28329649, "comment_id": 45007098, "body": "How does this help? <code>tmp</code> would have to be a dict (of what?) and the function <code>f</code> would need to have global state to keep track of the sums, which effectively removes the need for the dictionary comprehension. It seem like 1 problem has been replaced by 3."}, {"owner": {"reputation": 363, "user_id": 2237246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9dbc105b1e1a1df5a74730cb2facf6?s=128&d=identicon&r=PG", "display_name": "dasm80x86", "link": "https://stackoverflow.com/users/2237246/dasm80x86"}, "reply_to_user": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423856166, "post_id": 28329649, "comment_id": 45333804, "body": "@jepio the function <code>f</code> was intended to be a placeholder for the <code>sum</code> operation."}, {"owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423857114, "post_id": 28329649, "comment_id": 45334259, "body": "I agree that if you have the data in the same format as your <code>tmp</code> dictionary, than a dict comprehension with sum is the easiest solution. But first you need to translate the data to this format. For the data in the question I came up with the following: <code>data.sort(key=operator.itemgetter(0)); b = {k: sum(v for _, v in vals) for k, vals in itertools.groupby(data, itemgetter(0))}</code> I would not say this is a particularly easy solution..."}, {"owner": {"reputation": 363, "user_id": 2237246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9dbc105b1e1a1df5a74730cb2facf6?s=128&d=identicon&r=PG", "display_name": "dasm80x86", "link": "https://stackoverflow.com/users/2237246/dasm80x86"}, "reply_to_user": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "edited": false, "score": 0, "creation_date": 1423862437, "post_id": 28329649, "comment_id": 45336923, "body": "That&#39;s a fair assessment; stored as a dictionary that the dict comprehension is the way to go. I don&#39;t see how else you store the aforementioned data. (e.g.) <code>{1:1,1:2,1:3}</code> yields <code>{1:3}</code> -- I&#39;ll ask the OP."}], "tags": [], "owner": {"reputation": 363, "user_id": 2237246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9dbc105b1e1a1df5a74730cb2facf6?s=128&d=identicon&r=PG", "display_name": "dasm80x86", "link": "https://stackoverflow.com/users/2237246/dasm80x86"}, "is_accepted": false, "score": 1, "last_activity_date": 1423856472, "last_edit_date": 1495535052, "creation_date": 1423077730, "answer_id": 28329649, "question_id": 28329409, "link": "https://stackoverflow.com/questions/28329409/splitting-data-into-dictionaries/28329649#28329649", "title": "Splitting data into dictionaries", "body": "<p>You can use a dictionary comprehension as outlined in: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/12229064/mapping-over-values-in-a-python-dictionary\">Mapping Over Values</a></p>\n\n<pre><code>tmpDict = {k: f(k,v) for k, v in tmp.items()}\n</code></pre>\n\n<p>Replacing <code>f(k,v)</code> with a function that performs the sums.</p>\n\n<p><em>Example:</em></p>\n\n<p>Generate data</p>\n\n<pre><code>tmp = {}\n\nfor i in range(0, 10):\n    tmp [i] = [i for x in range(0, 10)]\n</code></pre>\n\n<blockquote>\n  <p>{0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 1: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 2: [2, 2, 2, 2, 2, 2, 2, 2, 2, 2], 3: [3, 3, 3, 3, 3, 3, 3, 3, 3, 3], 4: [4, 4, 4, 4, 4, 4, 4, 4, 4, 4], 5: [5, 5, 5, 5, 5, 5, 5, 5, 5, 5], 6: [6, 6, 6, 6, 6, 6, 6, 6, 6, 6], 7: [7, 7, 7, 7, 7, 7, 7, 7, 7, 7], 8: [8, 8, 8, 8, 8, 8, 8, 8, 8, 8], 9: [9, 9, 9, 9, 9, 9, 9, 9, 9, 9]}</p>\n</blockquote>\n\n<p>Perform bucketed sum(s)</p>\n\n<pre><code>tmpDict = {k: sum(v) for k, v in tmp.items()}\n</code></pre>\n\n<p><strong>Result Set:</strong></p>\n\n<blockquote>\n  <p>{0: 0, 1: 10, 2: 20, 3: 30, 4: 40, 5: 50, 6: 60, 7: 70, 8: 80, 9: 90}</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2126, "user_id": 4383774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a7034d7c42c4249a71567d422eb726?s=128&d=identicon&r=PG&f=1", "display_name": "jepio", "link": "https://stackoverflow.com/users/4383774/jepio"}, "is_accepted": false, "score": 2, "last_activity_date": 1423078075, "creation_date": 1423078075, "answer_id": 28329736, "question_id": 28329409, "link": "https://stackoverflow.com/questions/28329409/splitting-data-into-dictionaries/28329736#28329736", "title": "Splitting data into dictionaries", "body": "<p>So assuming you have the data read into a list already (or are using a generator) you can indeed do this in a very simple way:</p>\n\n<pre><code>from collections import defaultdict\n\nsums = defaultdict(float)\nfor key, val in data:\n    sums[key] += val\n</code></pre>\n\n<p>I advise you to familiarize yourself with the <code>collections</code> module, because it has a lot of <em>right tools</em> for many jobs. In this case <code>defaultdict</code> is just like a normal python dictionary but it has a default value for keys that are not yet in it (in this case the default value is the value of <code>float()</code> which is <code>0.0</code>). Thanks to this, you do not need to bother with checking if the key already exists in the dict.</p>\n"}], "owner": {"reputation": 1, "user_id": 4237769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d7e0890367bec2300471bf94df6e5c9?s=128&d=identicon&r=PG&f=1", "display_name": "Abi", "link": "https://stackoverflow.com/users/4237769/abi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1423856472, "creation_date": 1423076873, "last_edit_date": 1423076930, "question_id": 28329409, "link": "https://stackoverflow.com/questions/28329409/splitting-data-into-dictionaries", "title": "Splitting data into dictionaries", "body": "<p>I have a long list values like below and am thinking of converting this to a dictionary. I would like to create dictionaries in python where for each key 0, 1, 2,...(say n), the value is sum of all values that belong to that key. For example,</p>\n\n<pre><code>0 -29.8568331501\n1 -27.4866699437\n2 -27.1228643508\n0 -10.8685684486\n1 -9.41353774283\n2 -10.3218886291\n...\n</code></pre>\n\n<p>Then, </p>\n\n<pre><code>dict = {0: SUM(-29.8568331501+-10.8685684486+..), 1:SUM(-27.4866699437+-9.41353774283+..), 2:1:SUM(-27.1228643508+-10.3218886291+..)}\n</code></pre>\n\n<p>I am a python newbie and would appreciate any guidance on how to go about doing this. </p>\n"}, {"tags": ["python", "tornado"], "comments": [{"owner": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "edited": false, "score": 0, "creation_date": 1423076864, "post_id": 28329375, "comment_id": 45006151, "body": "Is the file located in your working directory?"}, {"owner": {"reputation": 3197, "user_id": 1742006, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/84479437b48fb089a91c834caef5591b?s=128&d=identicon&r=PG", "display_name": "user94628", "link": "https://stackoverflow.com/users/1742006/user94628"}, "reply_to_user": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "edited": false, "score": 0, "creation_date": 1423076981, "post_id": 28329375, "comment_id": 45006209, "body": "It&#39;s a file uploaded from the web client"}, {"owner": {"reputation": 425, "user_id": 2166252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgqrP.jpg?s=128&g=1", "display_name": "Kyle Booth", "link": "https://stackoverflow.com/users/2166252/kyle-booth"}, "edited": false, "score": 1, "creation_date": 1423077045, "post_id": 28329375, "comment_id": 45006241, "body": "Well, you need to ensure that the directory matches where Python is trying to grab it from. Else you can use an absolute path."}, {"owner": {"reputation": 3424, "user_id": 1744914, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/b4a2e46d94ad4ac4434896e9c3cc1e87?s=128&d=identicon&r=PG", "display_name": "Most Wanted", "link": "https://stackoverflow.com/users/1744914/most-wanted"}, "edited": false, "score": 0, "creation_date": 1423077614, "post_id": 28329375, "comment_id": 45006552, "body": "Ensure that you write your file on upload before read it. With write(file[&#39;body&#39;])"}], "answers": [{"comments": [{"owner": {"reputation": 3197, "user_id": 1742006, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/84479437b48fb089a91c834caef5591b?s=128&d=identicon&r=PG", "display_name": "user94628", "link": "https://stackoverflow.com/users/1742006/user94628"}, "edited": false, "score": 0, "creation_date": 1423078803, "post_id": 28329758, "comment_id": 45007194, "body": "Thanks, but if this an uploaded image that is going to be stored directly into a database then how would you create a path on a remote server to then save the file into the database?"}, {"owner": {"reputation": 2116, "user_id": 156425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9407db393a8392f091c8634cdc03ef?s=128&d=identicon&r=PG", "display_name": "Dmitry Nedbaylo", "link": "https://stackoverflow.com/users/156425/dmitry-nedbaylo"}, "reply_to_user": {"reputation": 3197, "user_id": 1742006, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/84479437b48fb089a91c834caef5591b?s=128&d=identicon&r=PG", "display_name": "user94628", "link": "https://stackoverflow.com/users/1742006/user94628"}, "edited": false, "score": 0, "creation_date": 1423083164, "post_id": 28329758, "comment_id": 45009561, "body": "are you going to store path to image file in db or all the binary content of image file?"}, {"owner": {"reputation": 3197, "user_id": 1742006, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/84479437b48fb089a91c834caef5591b?s=128&d=identicon&r=PG", "display_name": "user94628", "link": "https://stackoverflow.com/users/1742006/user94628"}, "edited": false, "score": 0, "creation_date": 1423135556, "post_id": 28329758, "comment_id": 45029841, "body": "I want to store straight into the DB and was able to do so with <code>GridFS</code> for mongoDB. Thanks"}], "tags": [], "owner": {"reputation": 2116, "user_id": 156425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9407db393a8392f091c8634cdc03ef?s=128&d=identicon&r=PG", "display_name": "Dmitry Nedbaylo", "link": "https://stackoverflow.com/users/156425/dmitry-nedbaylo"}, "is_accepted": false, "score": 1, "last_activity_date": 1423151051, "last_edit_date": 1495542511, "creation_date": 1423078132, "answer_id": 28329758, "question_id": 28329375, "link": "https://stackoverflow.com/questions/28329375/python-open-uploaded-file/28329758#28329758", "title": "Python - open uploaded file", "body": "<p>Value of <code>file['filename']</code> is just name of uploaded file, it is not path in your filesystem. Content of file is in <code>file['body']</code>. You can use StringIO module to emulate file interface if you want, or just directly iterate over <code>file['body']</code>.</p>\n\n<p>Very good example you could use is <a href=\"https://stackoverflow.com/questions/11909397/how-to-upload-an-image-with-python-tornado-from-an-html-form\">here</a></p>\n\n<p>So, your post request handler could look like:</p>\n\n<pre><code>def post(self):\n\n    file = self.request.files['images'][0]\n    dataRead = file['body']\n    store_file_somewhere(file['filename'], dataRead)\n</code></pre>\n"}], "owner": {"reputation": 3197, "user_id": 1742006, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/84479437b48fb089a91c834caef5591b?s=128&d=identicon&r=PG", "display_name": "user94628", "link": "https://stackoverflow.com/users/1742006/user94628"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1406, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423151051, "creation_date": 1423076749, "last_edit_date": 1423077397, "question_id": 28329375, "link": "https://stackoverflow.com/questions/28329375/python-open-uploaded-file", "title": "Python - open uploaded file", "body": "<p>I have a Tornado web application where I want to read the an uploaded file. This is received from the client and I try to do so like this:</p>\n\n<pre><code>def post(self):\n\n    file = self.request.files['images'][0]\n\n    dataOpen = open(file['filename'],'r');\n    dataRead = dataOpen.read()\n</code></pre>\n\n<p>But it gives an <code>IOError</code>:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Python27\\lib\\site-packages\\tornado\\web.py\", line 1332, in _execute\n    result = method(*self.path_args, **self.path_kwargs)\n  File \"C:\\Users\\rsaxdsxc\\workspace\\pi\\src\\Server.py\", line 4100, in post\n    dataOpen = open(file['filename'],'r');\n  IOError: [Errno 2] No such file or directory: u'000c02c55024aeaa96e6c79bfa2de3926dbd3767.jpg'\n</code></pre>\n\n<p>Why isn't it able to see the file? </p>\n"}, {"tags": ["python", "json", "pandas", "google-analytics", "google-analytics-api"], "comments": [{"owner": {"reputation": 303, "user_id": 2285514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ebd43988dbff25dc3384d0ee0dbbc36?s=128&d=identicon&r=PG", "display_name": "kushan_s", "link": "https://stackoverflow.com/users/2285514/kushan-s"}, "edited": false, "score": 0, "creation_date": 1423144062, "post_id": 28329357, "comment_id": 45035361, "body": "Did you check the same query using the <a href=\"https://ga-dev-tools.appspot.com/explorer/\" rel=\"nofollow noreferrer\">Query Feed Explorer</a>? Does it return a valid response?"}], "owner": {"reputation": 11, "user_id": 4530014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c2953e4339fa95d18e45c25d1c5541?s=128&d=identicon&r=PG&f=1", "display_name": "derrick thomas", "link": "https://stackoverflow.com/users/4530014/derrick-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1423076674, "creation_date": 1423076674, "question_id": 28329357, "link": "https://stackoverflow.com/questions/28329357/pandas-io-ga-not-returning-object", "title": "pandas.io.ga not returning object", "body": "<p>I am running a pandas.io.ga query and absolutely no object is being returned? I have copied the secret_clients.json file to two folders just to be safe because I don't know which pandas/io folder to do it to, i suspect the problem is that it can't find the client_secrets.json file - but with NO ERROR at all I have no clue?!</p>\n\n<p>sudo cp ~/Desktop/client_secrets.json /Users/atrombley/anaconda/pkgs/pandas-0.14.1-np19py27_0/lib/python2.7/site-packages/pandas/io/</p>\n\n<p>sudo cp ~/Desktop/client_secrets.json /Users/atrombley/anaconda/lib/python2.7/site-packages/pandas/io/</p>\n\n<pre><code>import numpy as np; import pandas as pd; import pandas.io.ga as ga; import os\nprint ga.read_ga(\naccount_id  = \"private\",\nproperty_id = \"private\",\nmetrics     = ['users', 'pageviews'],\ndimensions  = ['dayOfWeek'],\nstart_date  = \"2015-01-01\",\nend_date    = \"2015-01-02\",\nindex_col   = 0,\n)\n&gt;&gt;&gt; ## THIS IS JUST BLANK?  NOTHING PRINTED?\n</code></pre>\n"}, {"tags": ["python", "ubuntu-14.04", "rethinkdb", "rethinkdb-python"], "comments": [{"owner": {"reputation": 5636, "user_id": 243581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d196ce09c988b9e2782f5a04a987aa?s=128&d=identicon&r=PG", "display_name": "AtnNn", "link": "https://stackoverflow.com/users/243581/atnnn"}, "edited": false, "score": 1, "creation_date": 1423079325, "post_id": 28329352, "comment_id": 45007450, "body": "How are you starting rethinkdb? The <code>--directory</code> option lets you specify what folder your data is stored in."}, {"owner": {"reputation": 1514, "user_id": 4056736, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fb80113bb3b5cd54c8358680fd56bafc?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek Narendra", "link": "https://stackoverflow.com/users/4056736/prateek-narendra"}, "reply_to_user": {"reputation": 5636, "user_id": 243581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d196ce09c988b9e2782f5a04a987aa?s=128&d=identicon&r=PG", "display_name": "AtnNn", "link": "https://stackoverflow.com/users/243581/atnnn"}, "edited": false, "score": 0, "creation_date": 1423081581, "post_id": 28329352, "comment_id": 45008701, "body": "@AtnNn yea - i didnt know that ! thanks a million"}], "answers": [{"tags": [], "owner": {"reputation": 1316, "user_id": 1837771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fedc0598a0eae3f7eac98ea84e597f20?s=128&d=identicon&r=PG", "display_name": "coffeemug", "link": "https://stackoverflow.com/users/1837771/coffeemug"}, "is_accepted": true, "score": 10, "last_activity_date": 1423079391, "creation_date": 1423079391, "answer_id": 28330153, "question_id": 28329352, "link": "https://stackoverflow.com/questions/28329352/rethinkdb-losing-data-after-restarting-server/28330153#28330153", "title": "RethinkDB losing data after restarting server", "body": "<p>You're almost certainly not losing data, you're just starting RethinkDB without pointing it to the data. Try the following:</p>\n\n<ul>\n<li>Start RethinkDB from the directory that contains the <code>rethinkdb_data</code> directory.</li>\n<li>Alternatively, pass the <code>-d</code> flag to RethinkDB to point it to the directory that contains <code>rethinkdb_data</code>. For example, <code>rethinkdb -d /path/to/data/directory/rethinkdb_data</code></li>\n</ul>\n"}], "owner": {"reputation": 1514, "user_id": 4056736, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fb80113bb3b5cd54c8358680fd56bafc?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek Narendra", "link": "https://stackoverflow.com/users/4056736/prateek-narendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 2, "accepted_answer_id": 28330153, "answer_count": 1, "score": 7, "last_activity_date": 1423079391, "creation_date": 1423076655, "question_id": 28329352, "link": "https://stackoverflow.com/questions/28329352/rethinkdb-losing-data-after-restarting-server", "title": "RethinkDB losing data after restarting server", "body": "<p>I save my data on RethinkDB Database. As long as I dont restart the server, all is well. But when I restart, it gives me an error saying database doesnt exist, although the folder and data does exist in folder <strong><em>rethinkdb_data</em></strong>. What is the problem ? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1423076501, "post_id": 28329260, "comment_id": 45005978, "body": "You won&#39;t be able to use <code>reduce</code> to solve this. How about a loop?"}, {"owner": {"reputation": 28349, "user_id": 553404, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/XkLRP.png?s=128&g=1", "display_name": "YXD", "link": "https://stackoverflow.com/users/553404/yxd"}, "edited": false, "score": 0, "creation_date": 1423076515, "post_id": 28329260, "comment_id": 45005981, "body": "Do you want to understand how to use <code>lambda</code>s in Python or just how to write a function to compute <code>x1-x2+x3-x4+x5-x6</code>?"}, {"owner": {"reputation": 11, "user_id": 4529986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ad16fbed443488e5a00f66f3138b6b?s=128&d=identicon&r=PG&f=1", "display_name": "Berp12", "link": "https://stackoverflow.com/users/4529986/berp12"}, "edited": false, "score": 0, "creation_date": 1423077770, "post_id": 28329260, "comment_id": 45006643, "body": "Computing a function"}], "answers": [{"tags": [], "owner": {"reputation": 4374, "user_id": 4230591, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb9061bc5222a66bf8a757ffac9e5e67?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4230591/user"}, "is_accepted": false, "score": 1, "last_activity_date": 1423076555, "creation_date": 1423076555, "answer_id": 28329320, "question_id": 28329260, "link": "https://stackoverflow.com/questions/28329260/python-adding-subtracting-sequence/28329320#28329320", "title": "Python adding/subtracting sequence", "body": "<p>Use a multiplier that you revert to +- after each addition.</p>\n\n<pre><code>result = 0\nmult = 1\nfor i in [2,5,8,10]:\n    result += i*mult\n    mult *= -1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 462, "user_id": 4521184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bzTAk.jpg?s=128&g=1", "display_name": "Juraj Bezru\u010dka", "link": "https://stackoverflow.com/users/4521184/juraj-bezru%c4%8dka"}, "is_accepted": false, "score": 3, "last_activity_date": 1423076972, "last_edit_date": 1423076972, "creation_date": 1423076852, "answer_id": 28329406, "question_id": 28329260, "link": "https://stackoverflow.com/questions/28329260/python-adding-subtracting-sequence/28329406#28329406", "title": "Python adding/subtracting sequence", "body": "<p>In this very case it would be easier to use sums:<br/></p>\n\n<pre><code>a = [2,5,8,10]\nsum(a[::2])-sum(a[1::2])\n-5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1423076899, "creation_date": 1423076899, "answer_id": 28329415, "question_id": 28329260, "link": "https://stackoverflow.com/questions/28329260/python-adding-subtracting-sequence/28329415#28329415", "title": "Python adding/subtracting sequence", "body": "<p>You can keep track of the position (and thus whether to do <code>+</code> or <code>-</code>) with <code>enumerate</code>, and you could use the fact that <em>-1<sup>2n</sup></em> is <em>+1</em> and <em>-1<sup>2n+1</sup></em> is <em>-1</em>. Use this as a factor and <code>sum</code> all the terms.</p>\n\n<pre><code>&gt;&gt;&gt; sum(e * (-1)**i for i, e in enumerate([2,5,8,10]))\n-5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13910, "user_id": 98057, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ba85799ed78f87eaf29dea4667f6d4?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Laszlo", "link": "https://stackoverflow.com/users/98057/andr%c3%a9-laszlo"}, "is_accepted": false, "score": 0, "last_activity_date": 1423078354, "last_edit_date": 1423078354, "creation_date": 1423077010, "answer_id": 28329440, "question_id": 28329260, "link": "https://stackoverflow.com/questions/28329260/python-adding-subtracting-sequence/28329440#28329440", "title": "Python adding/subtracting sequence", "body": "<p>Or just using sum and a generator:</p>\n\n<pre><code>In [18]: xs\nOut[18]: [1, 2, 3, 4, 5]\n\nIn [19]: def plusminus(iterable):\n   ....:     for i, x in enumerate(iterable):\n   ....:         if i%2 == 0:\n   ....:             yield x\n   ....:         else:\n   ....:             yield -x\n   ....:             \n\nIn [20]: sum(plusminus(xs))\nOut[20]: 3\n</code></pre>\n\n<p>Which could also be expressed as:</p>\n\n<pre><code>sum(map(lambda x: operator.mul(*x), zip(xs, itertools.cycle([1, -1]))))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13910, "user_id": 98057, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ba85799ed78f87eaf29dea4667f6d4?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Laszlo", "link": "https://stackoverflow.com/users/98057/andr%c3%a9-laszlo"}, "is_accepted": false, "score": 0, "last_activity_date": 1423078013, "creation_date": 1423078013, "answer_id": 28329721, "question_id": 28329260, "link": "https://stackoverflow.com/questions/28329260/python-adding-subtracting-sequence/28329721#28329721", "title": "Python adding/subtracting sequence", "body": "<p>If you <em>really</em> want to use reduce, for some reason, you could do something  like this:</p>\n\n<pre><code>class plusminus(object):\n    def __init__(self):\n        self._plus = True\n    def __call__(self, a, b):\n        self._plus ^= True\n        if self._plus:\n            return a+b\n        return a-b\n\nreduce(plusminus(), [2,5,8,10])  # output: -5\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4529986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36ad16fbed443488e5a00f66f3138b6b?s=128&d=identicon&r=PG&f=1", "display_name": "Berp12", "link": "https://stackoverflow.com/users/4529986/berp12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1423078354, "creation_date": 1423076352, "last_edit_date": 1423077115, "question_id": 28329260, "link": "https://stackoverflow.com/questions/28329260/python-adding-subtracting-sequence", "title": "Python adding/subtracting sequence", "body": "<p>Hi so i'm trying to make a function where I subtract the first number with the second and then add the third then subtract the fourth ie. <code>x1-x2+x3-x4+x5-x6...</code></p>\n\n<p>So far I have this, I can only add two variables, x and y. Was thinking of doing </p>\n\n<pre><code>&gt;&gt;&gt; reduce(lambda x,y: (x-y) +x, [2,5,8,10]\n</code></pre>\n\n<p>Still not getting it</p>\n\n<p>pretty simple stuff just confused..</p>\n"}, {"tags": ["python", "numpy", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 599, "user_id": 2339721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z3nHt.jpg?s=128&g=1", "display_name": "Arnaud Renaud", "link": "https://stackoverflow.com/users/2339721/arnaud-renaud"}, "is_accepted": true, "score": 1, "last_activity_date": 1423076323, "creation_date": 1423076323, "answer_id": 28329253, "question_id": 28329252, "link": "https://stackoverflow.com/questions/28329252/pandas-groupby-and-get-index-of-first-row-matching-condition/28329253#28329253", "title": "Pandas: groupby and get index of first row matching condition", "body": "<p><code>df.groupby('user').display.apply(nvisits_before_display)</code></p>\n\n<pre><code>import numpy as np\ndef nvisits_before_display(x):\n    try:\n        return np.where(x &gt; 0)[0].item(0) + 1\n    except IndexError:\n        return 0\n</code></pre>\n\n<p>What does this mean?</p>\n\n<ul>\n<li><code>x &gt; 0</code>, when applied to the column <code>display</code>, means that the page has been displayed on a given visit</li>\n<li><code>np.where(&lt;condition&gt;)[0]</code> returns a <code>numpy.ndarray</code> containing the positions of the index (ordered integers) where the condition is met</li>\n<li><code>item(0)</code> is about taking the first of these positions, meaning the first visit where the page has been displayed</li>\n<li><code>+ 1</code> stands for setting value 1 to users who saw the page on their first visit</li>\n<li><code>groupby('user')</code> applys the <code>nvisits_before_display</code> function to the rows belonging to each user</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 599, "user_id": 2339721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z3nHt.jpg?s=128&g=1", "display_name": "Arnaud Renaud", "link": "https://stackoverflow.com/users/2339721/arnaud-renaud"}, "edited": false, "score": 0, "creation_date": 1423081564, "post_id": 28329953, "comment_id": 45008688, "body": "It seems to me that this does not answer the question. The expected result should be 3 for user 1 and 2 for user 2."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 599, "user_id": 2339721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z3nHt.jpg?s=128&g=1", "display_name": "Arnaud Renaud", "link": "https://stackoverflow.com/users/2339721/arnaud-renaud"}, "edited": false, "score": 0, "creation_date": 1423086871, "post_id": 28329953, "comment_id": 45011476, "body": "It definitely feels like there should be a better way. Amusingly I&#39;m sure this used to work (back when Series was an ndarray), I expect this means I have some broken code out there somewhere..."}, {"owner": {"reputation": 599, "user_id": 2339721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z3nHt.jpg?s=128&g=1", "display_name": "Arnaud Renaud", "link": "https://stackoverflow.com/users/2339721/arnaud-renaud"}, "edited": false, "score": 0, "creation_date": 1423120943, "post_id": 28329953, "comment_id": 45021988, "body": "There still is a problem if &#39;display&#39; is not only 0/1: <code>argmax</code> gives the index of the first maximum value, not the first non-zero value. We would need to convert the <code>display</code> column to Boolean first."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 599, "user_id": 2339721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z3nHt.jpg?s=128&g=1", "display_name": "Arnaud Renaud", "link": "https://stackoverflow.com/users/2339721/arnaud-renaud"}, "edited": false, "score": 0, "creation_date": 1423121854, "post_id": 28329953, "comment_id": 45022373, "body": "@ArnaudRenaud you mean there are examples where it&#39;s never seen?"}, {"owner": {"reputation": 599, "user_id": 2339721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z3nHt.jpg?s=128&g=1", "display_name": "Arnaud Renaud", "link": "https://stackoverflow.com/users/2339721/arnaud-renaud"}, "edited": false, "score": 0, "creation_date": 1423122541, "post_id": 28329953, "comment_id": 45022700, "body": "No, I mean there are examples where it can be greater than 1 (the user saw the page multiples times during a single visit)."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 599, "user_id": 2339721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z3nHt.jpg?s=128&g=1", "display_name": "Arnaud Renaud", "link": "https://stackoverflow.com/users/2339721/arnaud-renaud"}, "edited": false, "score": 0, "creation_date": 1423122887, "post_id": 28329953, "comment_id": 45022878, "body": "@ArnaudRenaud yup, that&#39;s what the seen column is."}, {"owner": {"reputation": 599, "user_id": 2339721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z3nHt.jpg?s=128&g=1", "display_name": "Arnaud Renaud", "link": "https://stackoverflow.com/users/2339721/arnaud-renaud"}, "edited": false, "score": 0, "creation_date": 1423129331, "post_id": 28329953, "comment_id": 45026199, "body": "As you wrote, there is another issue: if <code>seen</code> is always zero for a given user, <code>argmax</code> will return 0, just like it would for a user with a non-zero <code>seen</code> on the first row."}], "tags": [], "owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "is_accepted": false, "score": 1, "last_activity_date": 1423086781, "last_edit_date": 1423086781, "creation_date": 1423078748, "answer_id": 28329953, "question_id": 28329252, "link": "https://stackoverflow.com/questions/28329252/pandas-groupby-and-get-index-of-first-row-matching-condition/28329953#28329953", "title": "Pandas: groupby and get index of first row matching condition", "body": "<p>I think it's easier to use plain ol' argmax:</p>\n\n<pre><code>In [11]: df = pd.DataFrame([[1, 0], [1, 0], [1, 1], [2, 0], [2, 1]], columns=['user', 'display'])\n\nIn [12]: df\nOut[12]:\n   user  display\n0     1        0\n1     1        0\n2     1        1\n3     2        0\n4     2        1\n\nIn [13]: df.groupby('user')['display'].apply(lambda x: np.argmax(x.values))\nOut[13]:\nuser\n1       2\n2       1\nName: display, dtype: int64\n</code></pre>\n\n<p>Although, for the sake of clarity (or if display wasn't boolean) I would define a new column:</p>\n\n<pre><code>In [21]: df['seen'] = df['display'] &gt; 0\n\nIn [22]: df.groupby('user')['seen'].apply(lambda x: np.argmax(x.values))\nOut[22]:\nuser\n1       2\n2       1\nName: seen, dtype: int64\n</code></pre>\n\n<p><em>Note: my old answer said <code>df.groupby('user')['display'].apply(np.argmax)</code> which wasn't quite correct as this gave the first True <strong>index</strong>.</em></p>\n"}], "owner": {"reputation": 599, "user_id": 2339721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z3nHt.jpg?s=128&g=1", "display_name": "Arnaud Renaud", "link": "https://stackoverflow.com/users/2339721/arnaud-renaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3047, "favorite_count": 0, "accepted_answer_id": 28329253, "answer_count": 2, "score": 0, "last_activity_date": 1423086781, "creation_date": 1423076323, "question_id": 28329252, "link": "https://stackoverflow.com/questions/28329252/pandas-groupby-and-get-index-of-first-row-matching-condition", "title": "Pandas: groupby and get index of first row matching condition", "body": "<p>I have a pandas <code>DataFrame</code> called <code>df</code>, sorted in chronological order. Each row is a visit on a website.</p>\n\n<p><code>df</code> has a column named <code>display</code> that indicates the number of times a specific page has been displayed during the visit. This column is populated by integers, 0 or greater.\n<code>df</code> also has a <code>user</code> column.</p>\n\n<p>I want to know how many times each user visited the site before ever seeing the business-critical page I'm interested in.</p>\n\n<p>To know that, I need a user-indexed <code>Series</code> populated as follows:</p>\n\n<ul>\n<li>0 if the user never displayed the page</li>\n<li>else, the number of rows (which is the number of visits) up to the first row where <code>display</code> is non-zero (meaning, the first visit where the user saw the page)</li>\n</ul>\n"}, {"tags": ["python", "amazon-s3", "zip", "urllib2", "python-unicode"], "comments": [{"owner": {"reputation": 2116, "user_id": 156425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9407db393a8392f091c8634cdc03ef?s=128&d=identicon&r=PG", "display_name": "Dmitry Nedbaylo", "link": "https://stackoverflow.com/users/156425/dmitry-nedbaylo"}, "edited": false, "score": 0, "creation_date": 1423078755, "post_id": 28329178, "comment_id": 45007167, "body": "why dont&#39; you just use <a href=\"http://docs.pythonboto.org/en/latest/\" rel=\"nofollow noreferrer\">boto</a>?"}, {"owner": {"reputation": 155, "user_id": 1559187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b97a4099fe14192e33b57ed4c109282?s=128&d=identicon&r=PG", "display_name": "SudoKill", "link": "https://stackoverflow.com/users/1559187/sudokill"}, "reply_to_user": {"reputation": 2116, "user_id": 156425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9407db393a8392f091c8634cdc03ef?s=128&d=identicon&r=PG", "display_name": "Dmitry Nedbaylo", "link": "https://stackoverflow.com/users/156425/dmitry-nedbaylo"}, "edited": false, "score": 0, "creation_date": 1423084340, "post_id": 28329178, "comment_id": 45010168, "body": "@DmitryNedbaylo  From what I understand, you have to give AWS credentials to boto.   This is a script that will be distributed, so I can&#39;t put my AWS credentials in there.   Hence,  I am using pre-signed URLs which are fetched from my website.   I am open to using any other ideas which avoid distributing my AWS Secret Key."}, {"owner": {"reputation": 2116, "user_id": 156425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9407db393a8392f091c8634cdc03ef?s=128&d=identicon&r=PG", "display_name": "Dmitry Nedbaylo", "link": "https://stackoverflow.com/users/156425/dmitry-nedbaylo"}, "edited": false, "score": 0, "creation_date": 1423152011, "post_id": 28329178, "comment_id": 45040990, "body": "could you give me traceback of exception?"}, {"owner": {"reputation": 155, "user_id": 1559187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b97a4099fe14192e33b57ed4c109282?s=128&d=identicon&r=PG", "display_name": "SudoKill", "link": "https://stackoverflow.com/users/1559187/sudokill"}, "reply_to_user": {"reputation": 2116, "user_id": 156425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9407db393a8392f091c8634cdc03ef?s=128&d=identicon&r=PG", "display_name": "Dmitry Nedbaylo", "link": "https://stackoverflow.com/users/156425/dmitry-nedbaylo"}, "edited": false, "score": 0, "creation_date": 1423337393, "post_id": 28329178, "comment_id": 45110475, "body": "@DmitryNedbaylo  Hi Dmitry, I&#39;ve updated the question with the full traceback."}], "answers": [{"tags": [], "owner": {"reputation": 2116, "user_id": 156425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9407db393a8392f091c8634cdc03ef?s=128&d=identicon&r=PG", "display_name": "Dmitry Nedbaylo", "link": "https://stackoverflow.com/users/156425/dmitry-nedbaylo"}, "is_accepted": true, "score": 1, "last_activity_date": 1423393147, "last_edit_date": 1495542118, "creation_date": 1423391759, "answer_id": 28392966, "question_id": 28329178, "link": "https://stackoverflow.com/questions/28329178/uploading-a-zip-file-directly-to-aws-s3-using-python-urllib2/28392966#28392966", "title": "Uploading a zip file directly to AWS S3 using Python urllib2", "body": "<p>According to your traceback, some string added to your request is unicode. However, according to your script example all strings are ascii encoded (since you are using Python2.7).</p>\n\n<p>Weird things happen on your end, unless you set Python default encoding to UTF-8 (or OS sets it for you).</p>\n\n<p>I hope, this should work for you (convert all strings into ascii):</p>\n\n<pre><code>infile2 = open('/Path/To/Local/File.zip', 'rb')\nfiledata2 = infile2.read()\nrequest2 = urllib2.Request(\"https://MySignedAWSS3Link\".encode('utf-8'),data=filedata2)\nrequest2.add_header(str('Content-Type'), str('application/zip'))\nrequest2.get_method = lambda: str('PUT')\nurl2 = opener.open(request2)\n</code></pre>\n\n<p><strong>Update</strong>: <a href=\"https://stackoverflow.com/questions/17326177/post-binary-data-using-httplib-cause-unicode-exceptions\">This q/a</a> might help you too</p>\n"}], "owner": {"reputation": 155, "user_id": 1559187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b97a4099fe14192e33b57ed4c109282?s=128&d=identicon&r=PG", "display_name": "SudoKill", "link": "https://stackoverflow.com/users/1559187/sudokill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2409, "favorite_count": 1, "accepted_answer_id": 28392966, "answer_count": 1, "score": 1, "last_activity_date": 1423393147, "creation_date": 1423076081, "last_edit_date": 1423390770, "question_id": 28329178, "link": "https://stackoverflow.com/questions/28329178/uploading-a-zip-file-directly-to-aws-s3-using-python-urllib2", "title": "Uploading a zip file directly to AWS S3 using Python urllib2", "body": "<p>I am trying to upload a zip file directly to S3 using a Python script, but running into some Unicode Decode Errors.  </p>\n\n<p>What I do is generate a Pre-Signed S3 Link and then upload data to it. I know the link works fine because the upload works when I use curl to do it like this:</p>\n\n<pre><code>curl -v -H \"Content-Type: application/zip\" -T /Path/To/Local/File.zip https://MySignedAWSS3Link\n</code></pre>\n\n<p>However, when I attempt this in Python using the code below, I get an error.</p>\n\n<pre><code>infile2 = open('/Path/To/Local/File.zip', 'rb')\nfiledata2 = infile2.read()\nrequest2 = urllib2.Request(\"https://MySignedAWSS3Link\",data=filedata2)\nrequest2.add_header('Content-Type', 'application/zip')\nrequest2.get_method = lambda: 'PUT'\nurl2 = opener.open(request2)  \n</code></pre>\n\n<p>I get the following error/traceback in Python:</p>\n\n<pre><code>&gt; Traceback (most recent call last):\n  File \"putFiles.py\", line 44, in &lt;module&gt;\n    url2 = opener.open(request2)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py\", line 404, in open\n    response = self._open(req, data)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py\", line 422, in _open\n    '_open', req)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py\", line 382, in _call_chain\n    result = func(*args)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py\", line 1222, in https_open\n    return self.do_open(httplib.HTTPSConnection, req)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py\", line 1181, in do_open\n    h.request(req.get_method(), req.get_selector(), req.data, headers)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 973, in request\n    self._send_request(method, url, body, headers)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 1007, in _send_request\n    self.endheaders(body)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 969, in endheaders\n    self._send_output(message_body)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 827, in _send_output\n    msg += message_body\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xca in position 10: ordinal not in range(128)\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["python", "python-2.7", "kivy"], "comments": [{"owner": {"reputation": 25731, "user_id": 2469283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3271ba34d6b680ed1103b4d4aeda9d6d?s=128&d=identicon&r=PG", "display_name": "inclement", "link": "https://stackoverflow.com/users/2469283/inclement"}, "edited": false, "score": 0, "creation_date": 1423088189, "post_id": 28329139, "comment_id": 45012125, "body": "Post a working example of some code that demonstrates the problem."}, {"owner": {"reputation": 283, "user_id": 3961653, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71cc33c9a62fc84c3cedb7e6b39def45?s=128&d=identicon&r=PG&f=1", "display_name": "Gilgamesch", "link": "https://stackoverflow.com/users/3961653/gilgamesch"}, "reply_to_user": {"reputation": 25731, "user_id": 2469283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3271ba34d6b680ed1103b4d4aeda9d6d?s=128&d=identicon&r=PG", "display_name": "inclement", "link": "https://stackoverflow.com/users/2469283/inclement"}, "edited": false, "score": 0, "creation_date": 1423121891, "post_id": 28329139, "comment_id": 45022389, "body": "@inclement ok, thank you"}], "answers": [{"tags": [], "owner": {"reputation": 236, "user_id": 4690841, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/cf443af7954151f6112ced46b6f2cc17?s=128&d=identicon&r=PG&f=1", "display_name": "mri3", "link": "https://stackoverflow.com/users/4690841/mri3"}, "is_accepted": true, "score": 2, "last_activity_date": 1441386468, "creation_date": 1441386468, "answer_id": 32403271, "question_id": 28329139, "link": "https://stackoverflow.com/questions/28329139/kivy-class-factory-error/32403271#32403271", "title": "Kivy class factory error", "body": "<p>Move your Builder.load_file('turf.kv') like so:</p>\n\n<pre><code>class Auswahl(Screen):\n    pass\nclass Frage(Screen):\n    farbe = ListProperty([1, 1, 1, 1])\n    def druck(self):\n        self.farbe = ([1, 0, 0, 1])\n        self.ids.box1.clear_widgets()\n        wimg = Image(source='Bild1.png')\n        self.ids.box1.add_widget(wimg)\n\nclass Troll(Screen):\n    pass\n\nclass Manager(ScreenManager):\n    pass\n\n\n\nclass BILD1(Widget):\n    velocity = ListProperty([1, 0])\n    def __init__(self, **kwargs):\n        super(Knopf, self).__init__(**kwargs)\n        Clock.schedule_interval(self.Update, 1/60.)\n    def Update(self, *args):\n        pass\n    def on_touch_down(self, touch):\n        if self.collide_point(*touch.pos):\n            print 'es geht'\nclass BILD2(Knopf):\n    def on_touch_down(self, touch):\n        if self.collide_point(*touch.pos):\n            print 'es geht'\nclass BILD3(Knopf):\n    def on_touch_down(self, touch):\n        if self.collide_point(*touch.pos):\n            print 'es geht'\nclass BILD4(Knopf):\n    def on_touch_down(self, touch):\n        if self.collide_point(*touch.pos):\n            print 'es geht'\n\n\n\nBuilder.load_file('turf.kv')\n\nclass TurF(App):\n    def build(self):\n        return Manager()\n\nTurF().run()\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 3961653, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71cc33c9a62fc84c3cedb7e6b39def45?s=128&d=identicon&r=PG&f=1", "display_name": "Gilgamesch", "link": "https://stackoverflow.com/users/3961653/gilgamesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1626, "favorite_count": 0, "accepted_answer_id": 32403271, "answer_count": 1, "score": 2, "last_activity_date": 1441386468, "creation_date": 1423075953, "last_edit_date": 1437829125, "question_id": 28329139, "link": "https://stackoverflow.com/questions/28329139/kivy-class-factory-error", "title": "Kivy class factory error", "body": "<p>I tried to make a program with a screen manager an images you can click on.\nI first I tried to store the kivy file within a string variable and return the string variable, but I got this error message:</p>\n\n<pre><code> kivy.factory.FactoryException: Unknown class &lt;BILD1&gt;\n</code></pre>\n\n<p>So I tried to return the Screenmanager, but it did not seem to work.\nI still got the same error message, could you please help me.\nHere is the rest of my source code:</p>\n\n<pre><code>class Auswahl(Screen):\n    pass\nclass Frage(Screen):\n    farbe = ListProperty([1, 1, 1, 1])\n    def druck(self):\n        self.farbe = ([1, 0, 0, 1])\n        self.ids.box1.clear_widgets()\n        wimg = Image(source='Bild1.png')\n        self.ids.box1.add_widget(wimg)\n\nclass Troll(Screen):\n    pass\n\nclass Manager(ScreenManager):\n    pass\n\nBuilder.load_file('turf.kv')\n\nclass BILD1(Widget):\n    velocity = ListProperty([1, 0])\n    def __init__(self, **kwargs):\n        super(Knopf, self).__init__(**kwargs)\n        Clock.schedule_interval(self.Update, 1/60.)\n    def Update(self, *args):\n        pass\n    def on_touch_down(self, touch):\n        if self.collide_point(*touch.pos):\n            print 'es geht'\nclass BILD2(Knopf):\n    def on_touch_down(self, touch):\n        if self.collide_point(*touch.pos):\n            print 'es geht'\nclass BILD3(Knopf):\n    def on_touch_down(self, touch):\n        if self.collide_point(*touch.pos):\n            print 'es geht'\nclass BILD4(Knopf):\n    def on_touch_down(self, touch):\n        if self.collide_point(*touch.pos):\n            print 'es geht'\n\n\n\nclass TurF(App):\n    def build(self):\n        return Manager()\n\nTurF().run()\n</code></pre>\n"}, {"tags": ["python", "list", "class", "loops", "2d"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4330943"}, "edited": false, "score": 0, "creation_date": 1423076682, "post_id": 28329145, "comment_id": 45006064, "body": "awesome, did not know about yield. How can I iterate the 2D list to print a string containing each item? I want it to be formatted like a matrix (new line after each row)"}, {"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1423076831, "post_id": 28329145, "comment_id": 45006143, "body": "implemented <code>__str__</code> in my answer you can checkout @ncerice"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1423077718, "post_id": 28329145, "comment_id": 45006612, "body": "@ncerice Note: using <a href=\"https://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable\" rel=\"nofollow noreferrer\"><code>itertools.chain.from_iterable</code></a> method you can define <code>__iter__</code> simply as: <code>def __iter__(self): return chain.from_iterable(self.matrix)</code>. You should definitely look at that module, it has a lot of very useful functions to deal with iterables."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1423075983, "creation_date": 1423075983, "answer_id": 28329145, "question_id": 28329074, "link": "https://stackoverflow.com/questions/28329074/python-iterate-2d-array-iter/28329145#28329145", "title": "Python Iterate 2D array __iter__", "body": "<pre><code>def __iter__(self):\n    for x in xrange(self.width):\n         for y in xrange(self.height):\n            yield self.matrix[x][y]\n</code></pre>\n\n<p>Read up on generators and the yield keyword, they're fun to use!</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4330943"}, "edited": false, "score": 0, "creation_date": 1423077238, "post_id": 28329183, "comment_id": 45006342, "body": "Im getting &#39;IndexError: list index out of range&#39; whenever the <b>str</b> method is called. any ideas?"}, {"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1423077345, "post_id": 28329183, "comment_id": 45006410, "body": "Sorry for the inconvenience, I fixed it"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4330943"}, "edited": false, "score": 0, "creation_date": 1423077671, "post_id": 28329183, "comment_id": 45006585, "body": "This is working on your system? I am getting that <b>str</b> is returning a non-string type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4330943"}, "edited": false, "score": 0, "creation_date": 1423078003, "post_id": 28329183, "comment_id": 45006769, "body": "I always thought <b>str_</b> was supposed to return a string, not actually print something. I changed it to return str(self.matrix[i][j]) + &quot;    &quot; and now it just prints out the first &quot;none&quot;. For some reason it is not looping through"}], "tags": [], "owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "is_accepted": true, "score": 1, "last_activity_date": 1423078633, "last_edit_date": 1423078633, "creation_date": 1423076119, "answer_id": 28329183, "question_id": 28329074, "link": "https://stackoverflow.com/questions/28329074/python-iterate-2d-array-iter/28329183#28329183", "title": "Python Iterate 2D array __iter__", "body": "<p>Actually there is a <code>yield</code> keyword which is handy in this case, It can be thought of as a return statement which saves the previous state while returning anything ,so when you call the method it first yields <code>self.matrix[0][0]</code> on the second call to this method it would yield <code>self.matrix[0][1]</code> and so on..</p>\n\n<pre><code>class Array2D():\n    def __init__(self, height, width):\n        self._width = width\n        self._height = height\n        self.matrix = [[None]*height for _ in range(width)]\n\n    def width(self):\n        return self._width\n\n    def height(self):\n        return self._height\n\n    def set(self, row, col, element):\n        self.matrix[row][col] = element\n\n    def get(self, row, col):\n        return self.matrix[row][col]\n\n    def row(self, row_no):\n        rowList = []\n        for item in self.matrix[row_no][item]:\n            rowList.append(item)\n\n    def column(self, col_no):\n        colList = []\n        for item in self.matrix[item][col_no]:\n            colList.append(item)\n\n    def __str__(self):\n    return_str = \"\"\n    for i in xrange(self._height):\n        for j in xrange(self._width):\n            return_str+=str(self.matrix[i][j])+\"    \" #4 space between each element\n        return_str+=\"\\n\"\n    return return_str\n\n    def __iter__(self):\n        for i in xrange(self._height):\n            for j in xrange(self._width):\n                yield self.matrix[i][j]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4330943"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "accepted_answer_id": 28329183, "answer_count": 2, "score": 1, "last_activity_date": 1423078633, "creation_date": 1423075728, "question_id": 28329074, "link": "https://stackoverflow.com/questions/28329074/python-iterate-2d-array-iter", "title": "Python Iterate 2D array __iter__", "body": "<p>I am trying to create a 2D Array class and want to make the matrix iterable. Does anyone know how to go about doing this? I am a new to classes in python and still getting the hang of things. Also, how would <strong>str</strong> be implemented in my main? If i just use print(customMatrix) will that go and use the <strong>str</strong> method?</p>\n\n<p>Heres what I'm working on. I know some of it isn't correct :)</p>\n\n<pre><code>class Array2D():\n    def __init__(self, height, width):\n        self._width = width\n        self._height = height\n        self.matrix = [[None]*height for _ in range(width)]\n\n    def width(self):\n        return self._width\n\n    def height(self):\n        return self._height\n\n    def set(self, row, col, element):\n        self.matrix[row][col] = element\n\n    def get(self, row, col):\n        return self.matrix[row][col]\n\n    def row(self, row_no):\n        rowList = []\n        for item in self.matrix[row_no][item]:\n            rowList.append(item)\n\n    def column(self, col_no):\n        colList = []\n        for item in self.matrix[item][col_no]:\n            colList.append(item)\n\n    def __str__(self):\n        #for row in self.matrix:\n            #print (row)\n        return (str(self.matrix))\n\n    def __iter__(self):\n</code></pre>\n"}, {"tags": ["python", "function", "loops", "while-loop", "python-3.3"], "comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1423075711, "post_id": 28329067, "comment_id": 45005556, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/23294658/asking-the-user-for-input-until-they-give-a-valid-response\">Asking the user for input until they give a valid response</a>"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1423076164, "post_id": 28329067, "comment_id": 45005782, "body": "<code>return</code> causes the function to immediately end, you expect it to go back around?"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1423076270, "post_id": 28329067, "comment_id": 45005853, "body": "<code>True</code> is capitalized.  Your while loop body needs to be indented.  If it&#39;s python3 then use <code>input()</code>, if it&#39;s python2 use <code>raw_input</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3228015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b10c5635de4c026511a4c8fa6cd160?s=128&d=identicon&r=PG&f=1", "display_name": "jboromir", "link": "https://stackoverflow.com/users/3228015/jboromir"}, "is_accepted": false, "score": 0, "last_activity_date": 1423076176, "last_edit_date": 1423076176, "creation_date": 1423076015, "answer_id": 28329164, "question_id": 28329067, "link": "https://stackoverflow.com/questions/28329067/python-how-do-i-get-my-function-to-repeat-until-asked-to-cancel/28329164#28329164", "title": "Python: How do I get my function to repeat until asked to cancel?", "body": "<p>Instead of <code>while true:</code> use a variable instead.</p>\n\n<p>Such as </p>\n\n<pre><code>while inputagain != 'no':\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": false, "score": 0, "last_activity_date": 1423076811, "last_edit_date": 1423076811, "creation_date": 1423076403, "answer_id": 28329278, "question_id": 28329067, "link": "https://stackoverflow.com/questions/28329067/python-how-do-i-get-my-function-to-repeat-until-asked-to-cancel/28329278#28329278", "title": "Python: How do I get my function to repeat until asked to cancel?", "body": "<p>Instead of looping forever and terminating explicitly, you could have an actual condition in the loop.  First assume that the user wants to go again by starting <code>again</code> as 'yes'</p>\n\n<pre><code>again = 'yes'\nwhile again != 'no':\n    # ... request info ...\n    again = input(\"Wanna go again?: \")\n</code></pre>\n\n<p>though this while condition is a bit weak, if the user enters <code>N</code>, <code>n</code>, <code>no</code> or ever <code>no</code> with space around it, it will fail.  Instead you could check if the first letter is an <code>n</code> after lowercasing the string</p>\n\n<pre><code>while not again.lower().startswith('n'):\n</code></pre>\n\n<p>You could stick to your original style and make sure the user always enters a yes-like or no-like answer with some extra logic at the end of your loop</p>\n\n<pre><code>while True:\n    # ... request info ...\n    while True:\n        again = input(\"Wanna go again?: \").lower()\n        if again.startswith('n'):\n            return # exit the whole function\n        elif again.startswith('y'):\n            break # exit just this inner loop\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4278890, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/72638a44e4c7e9e6b8e7ae52597b0302?s=128&d=identicon&r=PG&f=1", "display_name": "imapython", "link": "https://stackoverflow.com/users/4278890/imapython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2351, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1423076811, "creation_date": 1423075685, "last_edit_date": 1423076541, "question_id": 28329067, "link": "https://stackoverflow.com/questions/28329067/python-how-do-i-get-my-function-to-repeat-until-asked-to-cancel", "title": "Python: How do I get my function to repeat until asked to cancel?", "body": "<p>I just started learning Python. Basically I just want to repeat the loop once if answer is yes, or break out of the loop if answer is no. The return True/False doesn't go back to the while loop?</p>\n\n<pre><code>def userinfo():\n    while true:\n    first_name=input(\"Enter your name here:\")\n    last_name=input(\"Enter your last name:\")\n    phonenum=input(\"Enter your phone number here\")\n    inputagain=rawinput(\"Wanna go again\")\n    if inputagain == 'no':\n        return False\n\nuserinfo()\n</code></pre>\n"}, {"tags": ["python", "pyodbc"], "comments": [{"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 2, "creation_date": 1423075807, "post_id": 28329028, "comment_id": 45005597, "body": "You can use <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">the <code>csv</code> module</a> to write out the row."}], "answers": [{"tags": [], "owner": {"reputation": 42750, "user_id": 189134, "user_type": "moderator", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jFsyb.png?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/189134/andy"}, "is_accepted": false, "score": 1, "last_activity_date": 1423161572, "last_edit_date": 1495539812, "creation_date": 1423161572, "answer_id": 28351564, "question_id": 28329028, "link": "https://stackoverflow.com/questions/28329028/write-row-from-sql-server-table/28351564#28351564", "title": "Write row from sql server table", "body": "<p>You can output to a comma separated file by utilizing the <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\"><code>csv</code> module</a>.</p>\n\n<pre><code>import pyodbc\nimport csv\n\ncnxn = pyodbc.connect('DRIVER={SQL  Server};SERVER=localhost;DATABASE=vzw;trusted_connection=True')\ncursor = cnxn.cursor()\ncursor.execute(\"select * from vzw.dbo.threcord\")\nrow = cursor.fetchall()\n\nwith open(r\"c:\\python27\\out.txt\", \"w\") as f:\n    csv.writer(f).writerows(row)\n</code></pre>\n\n<hr>\n\n<p>A few notes about what I've changed from your code:</p>\n\n<ul>\n<li>I open the file to write to only after the query has been run, instead of at the beginning of the program. Additionally I use the <a href=\"https://stackoverflow.com/questions/3012488/what-is-the-python-with-statement-designed-for\"><code>with</code></a> statement to open the file.</li>\n<li>Notice that the file name is a raw string (with the <code>r</code>, because the <code>\\</code>s are escape characters.</li>\n<li>The file mode needed to be quoted.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 4529964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82f66cb0cb9cecae0fcacf4a8ebd24a0?s=128&d=identicon&r=PG&f=1", "display_name": "trktel", "link": "https://stackoverflow.com/users/4529964/trktel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423161572, "creation_date": 1423075575, "last_edit_date": 1423075731, "question_id": 28329028, "link": "https://stackoverflow.com/questions/28329028/write-row-from-sql-server-table", "title": "Write row from sql server table", "body": "<p>I am new to python. I can not figre out how to write a sql server table row to an output file. I can pt it on the screen but can't write it to a file.</p>\n\n<pre><code>import pyodbc\nf.open(\u2018c:\\python27\\out.txt\u2019,w)\ncnxn = pyodbc.connect('DRIVER={SQL  Server};SERVER=localhost;DATABASE=vzw;trusted_connection=True')\ncursor = cnxn.cursor()\ncursor.execute (\"select * from vzw.dbo.threcord\")\nrow = cursor.fetchall()\nprint row  # displays row on screen\nf.write     #what goes here to indicate the displayed row?\n</code></pre>\n"}, {"tags": ["python", "decimal"], "comments": [{"owner": {"reputation": 9243, "user_id": 1318181, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1ZfAE.png?s=128&g=1", "display_name": "kylieCatt", "link": "https://stackoverflow.com/users/1318181/kyliecatt"}, "edited": false, "score": 0, "creation_date": 1423076132, "post_id": 28329021, "comment_id": 45005766, "body": "Since you don&#39;t have a <code>break</code> in your <code>for</code> loop, I&#39;m not really sure the <code>else</code> is needed here."}], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 0, "last_activity_date": 1423076636, "last_edit_date": 1423076636, "creation_date": 1423075639, "answer_id": 28329054, "question_id": 28329021, "link": "https://stackoverflow.com/questions/28329021/limiting-decimals-according-to-variable-in-python/28329054#28329054", "title": "Limiting decimals according to variable in python", "body": "<p>Pass the precision/decimals  variable to str.format:</p>\n\n<pre><code>decimals = int(input(\"What amount of decimals do you want to see of the golden ratio?\"))\nratio = gr(41)/gr(40)\nprint(\"{:.{}f}\".format(ratio,decimals))\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>In [3]: decimals = int(input(\"What amount of decimals do you want to see of the golden ratio?\"))\nWhat amount of decimals do you want to see of the golden ratio?5\n\nIn [4]: ratio = gr(41)/gr(40)\n\nIn [5]: print(\"{:.{}f}\".format(ratio,decimals))\n1.61803\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 2905621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57859d6d21c55115982b39991bc3d527?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor T", "link": "https://stackoverflow.com/users/2905621/taylor-t"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423080665, "post_id": 28329096, "comment_id": 45008206, "body": "How is that any different from what I posted?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423080720, "post_id": 28329096, "comment_id": 45008235, "body": "try using both and then you tell me"}, {"owner": {"reputation": 27, "user_id": 2905621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57859d6d21c55115982b39991bc3d527?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor T", "link": "https://stackoverflow.com/users/2905621/taylor-t"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423082664, "post_id": 28329096, "comment_id": 45009279, "body": "He did not request a precision of 20.  He requested precision out to <code>decimals</code> which I clearly demonstrated in my answer."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423082688, "post_id": 28329096, "comment_id": 45009299, "body": "what happens when the user enters 20? You cannot tell what the user will enter."}, {"owner": {"reputation": 27, "user_id": 2905621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57859d6d21c55115982b39991bc3d527?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor T", "link": "https://stackoverflow.com/users/2905621/taylor-t"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423083240, "post_id": 28329096, "comment_id": 45009599, "body": "You&#39;re right, which is why I suggested to use the second code snippet in my answer."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423084660, "post_id": 28329096, "comment_id": 45010326, "body": "You need to try both using str.format and round, you won&#39;t get the required precision using round"}, {"owner": {"reputation": 27, "user_id": 2905621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57859d6d21c55115982b39991bc3d527?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor T", "link": "https://stackoverflow.com/users/2905621/taylor-t"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1423087071, "post_id": 28329096, "comment_id": 45011591, "body": "Thanks for the clarification. That does work past the limits."}, {"owner": {"reputation": 5664, "user_id": 680727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e84ed97f423d7dd974efd8a871c5861?s=128&d=identicon&r=PG", "display_name": "Aleksi Torhamo", "link": "https://stackoverflow.com/users/680727/aleksi-torhamo"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1424091894, "post_id": 28329096, "comment_id": 45397499, "body": "@PadraicCunningham: You are technically correct, and I agree that formatting possibly fits better than rounding here, but your argument doesn&#39;t matter in practice; Any additional digits that your method displays beyond this method are completely meaningless because of the precision of the underlying representation. (You can eg. compare <code>&#39;{:.{}f}&#39;.format(ratio, 100)</code> and <code>&#39;{:.{}f}&#39;.format(ratio + 2e-16, 100)</code> to see what I mean; the decimals beyond the 16th one are essentially random, so displaying them doesn&#39;t make a lot of sense, unless you eg. want fixed-width output or something)"}], "tags": [], "owner": {"reputation": 27, "user_id": 2905621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57859d6d21c55115982b39991bc3d527?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor T", "link": "https://stackoverflow.com/users/2905621/taylor-t"}, "is_accepted": false, "score": -1, "last_activity_date": 1423075824, "creation_date": 1423075824, "answer_id": 28329096, "question_id": 28329021, "link": "https://stackoverflow.com/questions/28329021/limiting-decimals-according-to-variable-in-python/28329096#28329096", "title": "Limiting decimals according to variable in python", "body": "<p>Here is an alternative to what you are trying to do:</p>\n\n<pre><code>print(round(ratio, 2))\n</code></pre>\n\n<p>The snippet above will round the value <code>ratio</code> to 2 decimal places.  So to do it for the integer in decimals, you could do:</p>\n\n<pre><code>print(round(ratio, decimals))\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4470874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/na3v9.png?s=128&g=1", "display_name": "Requaero", "link": "https://stackoverflow.com/users/4470874/requaero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 28329054, "answer_count": 2, "score": 2, "last_activity_date": 1424082118, "creation_date": 1423075538, "last_edit_date": 1424082118, "question_id": 28329021, "link": "https://stackoverflow.com/questions/28329021/limiting-decimals-according-to-variable-in-python", "title": "Limiting decimals according to variable in python", "body": "<p>I'm trying to code a program that returns the <a href=\"https://en.wikipedia.org/wiki/Golden_ratio\" rel=\"nofollow\">golden ratio</a> up to a limit of decimal places.\nWhat I have so far is this:</p>\n\n<pre><code>def gr(n):\n    a, b = 0, 1\n    for x in range(0, n):\n        a, b = b, a+b\n    else:\n        return(a)\n\n    decimals = int(input(\"What amount of decimals do you want to see of the golden ratio?\"))\n    ratio = gr(41)/gr(40)\n    print(format(ratio, '2f'))\n</code></pre>\n\n<p>The problem is that I can't find a way to format <code>ratio</code> to the number in <code>decimals</code>.</p>\n"}, {"tags": ["python", "return"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4437817, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c3ef4600782b1fe62f9963ad8698ab6?s=128&d=identicon&r=PG&f=1", "display_name": "hoodoo", "link": "https://stackoverflow.com/users/4437817/hoodoo"}, "edited": false, "score": 0, "creation_date": 1423075938, "post_id": 28329077, "comment_id": 45005667, "body": "I know that, but I don&#39;t know why it was preferred solution in course. For me more natural was first function design."}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1423076160, "post_id": 28329077, "comment_id": 45005779, "body": "The first design <i>is</i> better. Something weird is going on with the grader if it prefers the second."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1423076250, "post_id": 28329077, "comment_id": 45005841, "body": "@Kevin, yes the first design is the only way I would right it but obviously however the code is graded the output had to be printed. It would not be the only online grader I have seen that uses strange techniques"}, {"owner": {"reputation": 1095, "user_id": 3646273, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bc8576f5fc52a993defa41c91ed9cbc1?s=128&d=identicon&r=PG&f=1", "display_name": "hft", "link": "https://stackoverflow.com/users/3646273/hft"}, "edited": false, "score": 1, "creation_date": 1423076301, "post_id": 28329077, "comment_id": 45005872, "body": "It possible that the output from the function was used elsewhere and that it was desirable in that (unknown) context to not return a string. In that case function2 is preferred."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1423076784, "last_edit_date": 1423076784, "creation_date": 1423075734, "answer_id": 28329077, "question_id": 28328996, "link": "https://stackoverflow.com/questions/28328996/python-two-ways-to-return-from-function-differences/28329077#28329077", "title": "python two ways to return from function differences", "body": "<p>Your second function  if the else is executed will return <code>None</code> where in the first it will return the value of <code>\"Number \" +str(n)+ \" is odd.\"</code></p>\n\n<p>So if to need to use the value in the <code>\"Number \" +str(n)+ \" is odd.\"</code> should the else be reached you would not be able to, you would only see it printed.</p>\n\n<pre><code>In [9]: x = function1(11)\n\nIn [10]: print x\nNumber 11 is odd.\n\nIn [11]: x = function2(11)\nNumber 11 is odd.\n\nIn [12]: print x\nNone\n</code></pre>\n\n<p>In your course the grader was more than likely not calling the functions using <code>print</code> so to see the output you would have to <code>print function1(11)</code>,it is the same using any <code>ide</code> like pycharm etc.., just calling the function when you just have a return will not show the return value.</p>\n\n<p>Without seeing the <em>more complex</em> code there are too many possibilities but one certain part of just printing is your function will return <code>None</code> which may well be required as a value elsewhere for code to terminate. </p>\n"}], "owner": {"reputation": 33, "user_id": 4437817, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3c3ef4600782b1fe62f9963ad8698ab6?s=128&d=identicon&r=PG&f=1", "display_name": "hoodoo", "link": "https://stackoverflow.com/users/4437817/hoodoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1423078089, "creation_date": 1423075465, "last_edit_date": 1423078089, "question_id": 28328996, "link": "https://stackoverflow.com/questions/28328996/python-two-ways-to-return-from-function-differences", "title": "python two ways to return from function differences", "body": "<p>I would like to know if there are any relevant difference in functions below:</p>\n\n<pre><code>def function1(n):\n    if n%2 == 0:\n        return n\n    else:\n        return \"Number \" +str(n)+ \" is odd.\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code>def function2(n):\n    if n%2 == 0:\n        return n\n    else:\n        print \"Number \" +str(n)+ \" is odd.\"\n        return\n</code></pre>\n\n<p>In some online course I noticed that in one task (deffinitely more complex code than that printed above, but I made it simple to show just only a concept) automated grading was returning me an error that function did not exit normally when I used design from function1 and when I changed to design from function2 I got full score. I am really intrested why I could not use function1 as correct design, maybe somebody with more than I expierence will explain a bit and show correct with short explanation.</p>\n"}, {"tags": ["python", "class"], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 3243520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/1YtJc.jpg?s=128&g=1", "display_name": "user97662", "link": "https://stackoverflow.com/users/3243520/user97662"}, "edited": false, "score": 0, "creation_date": 1423078698, "post_id": 28329616, "comment_id": 45007136, "body": "I did use subprocess.call(), looking at the source code, the subprocess.call did block the function, but it&#39;s some other methods that takes longer to execute. I think I will have to use queue and thread,"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1423077635, "creation_date": 1423077635, "answer_id": 28329616, "question_id": 28328991, "link": "https://stackoverflow.com/questions/28328991/how-to-execute-functions-after-class-object-is-complete/28329616#28329616", "title": "how to execute functions after class object is complete", "body": "<p>It seems you're starting a subprocess, over which you yield all control; basically, the call to starting the subprocess returns immediately, and the other process runs without caring what happens in your main python process.</p>\n\n<p>Have you tried <code>subprocess.call()</code>? It should block as long as the called program is running.</p>\n"}], "owner": {"reputation": 693, "user_id": 3243520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/1YtJc.jpg?s=128&g=1", "display_name": "user97662", "link": "https://stackoverflow.com/users/3243520/user97662"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423077635, "creation_date": 1423075451, "last_edit_date": 1423076610, "question_id": 28328991, "link": "https://stackoverflow.com/questions/28328991/how-to-execute-functions-after-class-object-is-complete", "title": "how to execute functions after class object is complete", "body": "<p>sudo code:</p>\n\n<pre><code>class copy_class:\n    copy():\n        print \"copying....\"\n        subprocess(copy some large files to some location)\n        print \"copy completed\"\n\ncopy_object = class\n\ncopy_object.copy() # This function will take say, 10 minutes to complete\n\nprint \"End of program\"\n</code></pre>\n\n<p>When I run the code above, I get results similar to the following:</p>\n\n<pre><code>copying....\nEnd of program\ncopy completed\n</code></pre>\n\n<p>How do I change the class so that \"End of program\" appears after <code>copy_object.copy()</code> is finished?</p>\n"}, {"tags": ["python", "multithreading", "ncurses"], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 2271391, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e88dc241baa8f16d0bc9fcd79fde6935?s=128&d=identicon&r=PG", "display_name": "SadSeven", "link": "https://stackoverflow.com/users/2271391/sadseven"}, "edited": false, "score": 0, "creation_date": 1423089967, "post_id": 28332641, "comment_id": 45012923, "body": "Perfect! Thank you very much!"}], "tags": [], "owner": {"reputation": 56, "user_id": 4530497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2fa5538016d0baebfb84a730d4845d?s=128&d=identicon&r=PG", "display_name": "Juhani Imberg", "link": "https://stackoverflow.com/users/4530497/juhani-imberg"}, "is_accepted": true, "score": 4, "last_activity_date": 1423088491, "creation_date": 1423088491, "answer_id": 28332641, "question_id": 28328982, "link": "https://stackoverflow.com/questions/28328982/using-curses-how-do-i-update-the-screen-or-wait-for-a-key/28332641#28332641", "title": "Using curses, how do I update the screen or wait for a key?", "body": "<p>This can be done without any complicated multithreading. There is a function <code>curses.halfdelay</code> that can be also found in the unicurses library that you use. It takes the number of tenths of a second to wait until continuing. <a href=\"https://docs.python.org/3/library/curses.html#curses.halfdelay\" rel=\"nofollow\">https://docs.python.org/3/library/curses.html#curses.halfdelay</a></p>\n\n<p>Here is an example code that refreshes every half a second unless there is a button that has been pressed, in which case it updates immediately.</p>\n\n<pre><code>import curses\nscr = curses.initscr()\ncurses.halfdelay(5)           # How many tenths of a second are waited, from 1 to 255\ncurses.noecho()               # Wont print the input\nwhile True:\n    char = scr.getch()        # This blocks (waits) until the time has elapsed,\n                              # or there is input to be handled\n    scr.clear()               # Clears the screen\n    if char != curses.ERR:    # This is true if the user pressed something\n        scr.addstr(0, 0, chr(char))\n    else:\n        scr.addstr(0, 0, \"Waiting\")\n</code></pre>\n"}], "owner": {"reputation": 793, "user_id": 2271391, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e88dc241baa8f16d0bc9fcd79fde6935?s=128&d=identicon&r=PG", "display_name": "SadSeven", "link": "https://stackoverflow.com/users/2271391/sadseven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2907, "favorite_count": 0, "accepted_answer_id": 28332641, "answer_count": 1, "score": 1, "last_activity_date": 1423088491, "creation_date": 1423075424, "question_id": 28328982, "link": "https://stackoverflow.com/questions/28328982/using-curses-how-do-i-update-the-screen-or-wait-for-a-key", "title": "Using curses, how do I update the screen or wait for a key?", "body": "<p>How do I update the screen or wait for a key at the same time? I'm using unicurses on Python but I think I would have the same problem in C.\nHere's what I want to do in pseudo code:</p>\n\n<pre><code>function startScreen(){\n   stdscr = initscr()\n   while True{\n      - Update screen using a variable that is constantly changing (probably by a thread, right?)\n      - Get a key with getch() - to close or interact with the screen\n   }\n}\n</code></pre>\n\n<p>My problem is that the screen doesn't update unless something happens, like resizing the screen or pressing a key. I was thinking about using the while loop (and a time.sleep(1)?) to update the screen and a thread to wait for keys. Is that possible? I don't know much about threads, that's why I'm asking. Is there a simpler way?</p>\n\n<p>Thank you.</p>\n"}]