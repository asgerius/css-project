[{"tags": ["python", "machine-learning", "keras", "data-science", "pytorch"], "comments": [{"owner": {"reputation": 9326, "user_id": 3236925, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a169a0312236d95fb7f1c0288ecc7d86?s=128&d=identicon&r=PG&f=1", "display_name": "Umang Gupta", "link": "https://stackoverflow.com/users/3236925/umang-gupta"}, "edited": false, "score": 2, "creation_date": 1531961300, "post_id": 51412473, "comment_id": 89797253, "body": "If your input and output size is fixed as it looks from the examples, you don&#39;t need a seq2seq model. You can use a simple feed-forward model with the appropriate loss. seq2seq/lstm etc are really for the purpose when sequence sizes (input/output) are variable"}, {"owner": {"reputation": 682, "user_id": 1202527, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eace1736cd5e31e6c5288e363ed669ea?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1202527/brian"}, "reply_to_user": {"reputation": 9326, "user_id": 3236925, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a169a0312236d95fb7f1c0288ecc7d86?s=128&d=identicon&r=PG&f=1", "display_name": "Umang Gupta", "link": "https://stackoverflow.com/users/3236925/umang-gupta"}, "edited": false, "score": 0, "creation_date": 1532015938, "post_id": 51412473, "comment_id": 89825439, "body": "Umang, thank you for your response. I will try a simpler model. While i have you, any suggestions on activation/opt/loss?"}], "answers": [{"tags": [], "owner": {"reputation": 9326, "user_id": 3236925, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a169a0312236d95fb7f1c0288ecc7d86?s=128&d=identicon&r=PG&f=1", "display_name": "Umang Gupta", "link": "https://stackoverflow.com/users/3236925/umang-gupta"}, "is_accepted": true, "score": 3, "last_activity_date": 1532021720, "last_edit_date": 1532021720, "creation_date": 1532020753, "answer_id": 51428549, "question_id": 51412473, "link": "https://stackoverflow.com/questions/51412473/is-seq2seq-the-right-model-for-my-data/51428549#51428549", "title": "Is Seq2Seq the right model for my data?", "body": "<p>Seq2Seq/LSTM are used when input/output are variable lengths.  </p>\n\n<p>Your input is of size 3 and output is of size 2 (at least for the given examples).  So you can use a simple one/two-hidden layer feed-forward model with the L2/L1 loss (for regression). Any opt (SGD/Adam) should be fine, however, Adam works well in practice. </p>\n\n<p>Also, I think you should not use coordinates as it is, you can scale it so that the highest coordinate is 1 and hence the input/output range would be between 0 and 1. An added advantage, this would help you to generalize to different screen sizes intuitively.</p>\n"}], "owner": {"reputation": 682, "user_id": 1202527, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eace1736cd5e31e6c5288e363ed669ea?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1202527/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 51428549, "answer_count": 1, "score": 1, "last_activity_date": 1532021720, "creation_date": 1531958130, "question_id": 51412473, "link": "https://stackoverflow.com/questions/51412473/is-seq2seq-the-right-model-for-my-data", "title": "Is Seq2Seq the right model for my data?", "body": "<p>I'm trying to train a model to predict design patterns from web pages. I'm using coordinates of bounding rects given a bunch of element groupings. Patterns look like this:</p>\n\n<pre><code> [[elementId, width, height, x, y]]\n</code></pre>\n\n<p>so my target would be the <code>[[x,y]]</code> given <code>[[elementId, width, height]]</code>.</p>\n\n<p>Concretely:</p>\n\n<pre><code> [[5, 1.0, 1.0], [4, 1.0, 1.0], [2, 175.0, 65.0], [2, 1.0, 1.0], [4, 1.0, 1.0]]\n -&gt;\n [[0.0, 0.0], [0.0, 10.0], [3.0, 0.0], [0.0, 68.0], [0.0, 10.0]]\n\n\n [[2, 14.0, 14.0], [2, 14.0, 14.0], [2, 14.0, 14.0]]  \n -&gt;\n [[0.0, 3.0], [0.0, 3.0], [0.0, 3.0]]\n</code></pre>\n\n<p>Patterns vary in size so I've padded them with <code>[[0,0,0]]</code>. I currently have about 15k of them, but can get more.</p>\n\n<p>I was told that seq2seq with attention is the right model for this job. I've started with <a href=\"https://machinelearningmastery.com/develop-encoder-decoder-model-sequence-sequence-prediction-keras/\" rel=\"nofollow noreferrer\">https://machinelearningmastery.com/develop-encoder-decoder-model-sequence-sequence-prediction-keras/</a> and achieved horrendous results.</p>\n\n<p>Every seq2seq example i can find (searching for keras or pytorch) is used for translation which is categorical and I'm struggling to find a good regression based example.</p>\n\n<p>So my question is:</p>\n\n<p>1) Is this the right model (encoder/decoder LSTM) for what i'm trying to do?</p>\n\n<p>2) Is there any examples if so?</p>\n\n<p>Thanks so much in advance. I don't expect anyone to solve my problem, but any help would be much appreciated!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1531958268, "post_id": 51412465, "comment_id": 89796616, "body": "So... why are you setting <code>logger</code> inside <code>main</code>?"}, {"owner": {"reputation": 8004, "user_id": 3450064, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fd82a72ed3da42b434e182f953399a43?s=128&d=identicon&r=PG&f=1", "display_name": "CentAu", "link": "https://stackoverflow.com/users/3450064/centau"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1531959197, "post_id": 51412465, "comment_id": 89796805, "body": "Because of pylint. I did that first, and it complained that the name <code>logger</code> does not conform to constant name. After searching it seemed that variables should not be defined at the module level."}], "answers": [{"comments": [{"owner": {"reputation": 8004, "user_id": 3450064, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fd82a72ed3da42b434e182f953399a43?s=128&d=identicon&r=PG&f=1", "display_name": "CentAu", "link": "https://stackoverflow.com/users/3450064/centau"}, "edited": false, "score": 0, "creation_date": 1531958523, "post_id": 51412510, "comment_id": 89796668, "body": "When I remove it, I get another pylint error:  Global variable &#39;logger&#39; undefined at the module level"}, {"owner": {"reputation": 95, "user_id": 10100423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc30445d5250b10a8b044d5e6fa02bc2?s=128&d=identicon&r=PG&f=1", "display_name": "I Dav", "link": "https://stackoverflow.com/users/10100423/i-dav"}, "reply_to_user": {"reputation": 8004, "user_id": 3450064, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fd82a72ed3da42b434e182f953399a43?s=128&d=identicon&r=PG&f=1", "display_name": "CentAu", "link": "https://stackoverflow.com/users/3450064/centau"}, "edited": false, "score": 0, "creation_date": 1531958691, "post_id": 51412510, "comment_id": 89796696, "body": "As stated on the comment above, you should consider setting the logger in the module&#39;s level, not inside main."}], "tags": [], "owner": {"reputation": 95, "user_id": 10100423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc30445d5250b10a8b044d5e6fa02bc2?s=128&d=identicon&r=PG&f=1", "display_name": "I Dav", "link": "https://stackoverflow.com/users/10100423/i-dav"}, "is_accepted": false, "score": 0, "last_activity_date": 1531958397, "creation_date": 1531958397, "answer_id": 51412510, "question_id": 51412465, "link": "https://stackoverflow.com/questions/51412465/python-best-way-to-setup-global-logger-and-set-the-logging-level-from-command-li/51412510#51412510", "title": "Python best way to setup global logger and set the logging level from command line", "body": "<p>Once you are declaring global, Initializing a variable to None in the outer scope unnecessary. Try removing that line. </p>\n"}, {"comments": [{"owner": {"reputation": 622, "user_id": 423959, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/de90655bbc760ce9f44fb0ca44206a8c?s=128&d=identicon&r=PG", "display_name": "Anton Petrov", "link": "https://stackoverflow.com/users/423959/anton-petrov"}, "edited": false, "score": 0, "creation_date": 1545316167, "post_id": 51412620, "comment_id": 94588273, "body": "Do other libraries will log at DEBUG level?"}, {"owner": {"reputation": 736, "user_id": 3776268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd4b847f9cd1558b243ecb35bf3221?s=128&d=identicon&r=PG&f=1", "display_name": "sehafoc", "link": "https://stackoverflow.com/users/3776268/sehafoc"}, "reply_to_user": {"reputation": 622, "user_id": 423959, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/de90655bbc760ce9f44fb0ca44206a8c?s=128&d=identicon&r=PG", "display_name": "Anton Petrov", "link": "https://stackoverflow.com/users/423959/anton-petrov"}, "edited": false, "score": 0, "creation_date": 1546754172, "post_id": 51412620, "comment_id": 94951702, "body": "@AntonPetrov Sorry for the late reply.  Yes many python libraries do.  In many libs you can just call it&#39;s logger and set the level to what ever you like.  Here is an example of modifying a libraries logger: <a href=\"https://stackoverflow.com/questions/8144545/turning-off-logging-in-paramiko\" title=\"turning off logging in paramiko\">stackoverflow.com/questions/8144545/&hellip;</a>"}], "tags": [], "owner": {"reputation": 736, "user_id": 3776268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adfd4b847f9cd1558b243ecb35bf3221?s=128&d=identicon&r=PG&f=1", "display_name": "sehafoc", "link": "https://stackoverflow.com/users/3776268/sehafoc"}, "is_accepted": false, "score": 4, "last_activity_date": 1532338587, "last_edit_date": 1532338587, "creation_date": 1531959354, "answer_id": 51412620, "question_id": 51412465, "link": "https://stackoverflow.com/questions/51412465/python-best-way-to-setup-global-logger-and-set-the-logging-level-from-command-li/51412620#51412620", "title": "Python best way to setup global logger and set the logging level from command line", "body": "<p>So there are a few ways to go about fixing your problem... Here is what I recommend, (Comments inline with #)</p>\n\n<pre><code>import logging\nfrom argparse import ArgumentParser\n\n# You only need to set the logger config once really\nlogging.basicConfig(\n    level=logging.DEBUG,\n    format=\"%(asctime)s %(name)s %(levelname)-8s %(thread)d %(message)s\",\n    datefmt=\"%Y-%m-%d %H:%M:%S\")\n\n# Typically make globals in CAPS to avoid name space problems.. per PEP-8 \nLOG = logging.getLogger(\"My Module\")\n# Note you may not need a global logger?\n\nclass MyClass:\n    def __init__(self, log_level=logging.INFO):\n       # you can just setup a class logger like this, and pass in the log level?\n       self.log = logging.getlogger(\"My Class\")\n       self.log.setLevel(log_level)\n\n       # Will print a message with \"My Module\"\n       LOG.info('Message from global logger!')\n\n       # Will print a message with \"My Class\"\n       self.log.info('Message from class logger!')\n\n       # Will print a message if -v or --verbose was used on CLI\n       self.log.debug('Debug class message!')\n\n\ndef main():\n    parser = ArgumentParser()\n\n    # You can use arg parse to just store a couple constants of the log level\n    parser.add_argument(\"-v\", \"--verbose\", help=\"Increase output verbosity\",\n                        action=\"store_const\", const=logging.DEBUG, default=logging.INFO)\n    args = parser.parse_args()\n\n    # Now you can just set the const from the arg\n    LOG.setLevel(args.verbose)\n\n    # If you want to set it to the class logger you can do this\n    myclass = MyClass(args.verbose)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 8004, "user_id": 3450064, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fd82a72ed3da42b434e182f953399a43?s=128&d=identicon&r=PG&f=1", "display_name": "CentAu", "link": "https://stackoverflow.com/users/3450064/centau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4328, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1532338587, "creation_date": 1531958034, "question_id": 51412465, "link": "https://stackoverflow.com/questions/51412465/python-best-way-to-setup-global-logger-and-set-the-logging-level-from-command-li", "title": "Python best way to setup global logger and set the logging level from command line", "body": "<p>So, I want to control the verbosity of the logger. I know that I can do this via <code>logging.basicConfig</code>. Currently, I have the following code which works fine:</p>\n\n<pre><code>import logging\nfrom argparse import ArgumentParser\nlogger = None\n\nclass MyClass:\n    def __init__(self):\n        logger.info('initialized')\n\ndef main():\n    parser = ArgumentParser()\n    parser.add_argument('--verbose', default=False, action='store_true')\n    args = parser.parse_args()\n\n    global logger\n    if args.verbose:\n        logging.basicConfig(format=\"%(levelname)s: %(message)s\", level=logging.DEBUG)\n    else:\n        logging.basicConfig(format=\"%(levelname)s: %(message)s\", level=logging.INFO)\n    logger = logging.getLogger('mylogger')\n    myclass = MyClass()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>However, I get the <code>pylint</code> error:</p>\n\n<p><code>Redefining name 'logger' from outer scope (line 3) (redefined-outer-name)</code></p>\n\n<p>What is the best way to achieve this without any pylint errors?</p>\n"}, {"tags": ["python", "heroku", "flask", "websocket", "gunicorn"], "comments": [{"owner": {"reputation": 18880, "user_id": 4283581, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a6JjK.jpg?s=128&g=1", "display_name": "Grant Miller", "link": "https://stackoverflow.com/users/4283581/grant-miller"}, "edited": false, "score": 2, "creation_date": 1531958803, "post_id": 51412396, "comment_id": 89796718, "body": "You probably need to install <b>gevent-websocket</b>: <code>pip install gevent-websocket</code>"}, {"owner": {"reputation": 181, "user_id": 10102400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed0f90fa55aadf1d90bb3fff3b2e414?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Pacheco", "link": "https://stackoverflow.com/users/10102400/gabriel-pacheco"}, "reply_to_user": {"reputation": 18880, "user_id": 4283581, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a6JjK.jpg?s=128&g=1", "display_name": "Grant Miller", "link": "https://stackoverflow.com/users/4283581/grant-miller"}, "edited": false, "score": 0, "creation_date": 1531960618, "post_id": 51412396, "comment_id": 89797124, "body": "I already instaled it. Actually, &quot;heroku local&quot; command and localhost works."}, {"owner": {"reputation": 181, "user_id": 10102400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed0f90fa55aadf1d90bb3fff3b2e414?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Pacheco", "link": "https://stackoverflow.com/users/10102400/gabriel-pacheco"}, "reply_to_user": {"reputation": 18880, "user_id": 4283581, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a6JjK.jpg?s=128&g=1", "display_name": "Grant Miller", "link": "https://stackoverflow.com/users/4283581/grant-miller"}, "edited": false, "score": 0, "creation_date": 1532045013, "post_id": 51412396, "comment_id": 89837283, "body": "It seems like geventwebsocket module directory isn&#39;t in heroku app folder, how can i fix that?"}], "answers": [{"tags": [], "owner": {"reputation": 8813, "user_id": 508907, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/gRGJK.jpg?s=128&g=1", "display_name": "ntg", "link": "https://stackoverflow.com/users/508907/ntg"}, "is_accepted": false, "score": 2, "last_activity_date": 1592389921, "creation_date": 1592389921, "answer_id": 62426926, "question_id": 51412396, "link": "https://stackoverflow.com/questions/51412396/modulenotfounderror-no-module-named-geventwebsocket/62426926#62426926", "title": "ModuleNotFoundError: No module named &#39;geventwebsocket&#39;", "body": "<p>The package name is as mentioned <code>gevent-websocket</code>, so it's</p>\n\n<pre><code>conda activate &lt;env-name&gt;\nconda install gevent-websocket\n</code></pre>\n\n<p>or</p>\n\n<pre><code>pip install gevent-websocket\n</code></pre>\n\n<p>depending if you use anaconda or not.</p>\n"}], "owner": {"reputation": 181, "user_id": 10102400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed0f90fa55aadf1d90bb3fff3b2e414?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Pacheco", "link": "https://stackoverflow.com/users/10102400/gabriel-pacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1955, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1592389921, "creation_date": 1531957417, "last_edit_date": 1592644375, "question_id": 51412396, "link": "https://stackoverflow.com/questions/51412396/modulenotfounderror-no-module-named-geventwebsocket", "title": "ModuleNotFoundError: No module named &#39;geventwebsocket&#39;", "body": "<p>Can't run my web-socket site on Heroku cloud with gunicorn. Locally ('heroku local') its working fine, but when i try to acess my site URL it gets crashed.</p>\n<p>Logs:</p>\n<blockquote>\n<p>2018-07-18T20:45:32.563241+00:00 app[web.1]: <strong>Error: class uri 'geventwebsocket.gunicorn.workers.GeventWebSocketWorker' invalid or not found:</strong></p>\n<p>2018-07-18T20:45:32.563242+00:00 app[web.1]:</p>\n<p>2018-07-18T20:45:32.563244+00:00 app[web.1]: [Traceback (most recent call last):</p>\n<p>2018-07-18T20:45:32.563246+00:00 app[web.1]: File &quot;/app/.heroku/python/lib/python3.6/site-packages/gunicorn/util.py&quot;, line 132, in load_class</p>\n<p>2018-07-18T20:45:32.563247+00:00 app[web.1]: mod = import('.'.join(components))</p>\n<p>2018-07-18T20:45:32.563249+00:00 app[web.1]: <strong>ModuleNotFoundError: No module named 'geventwebsocket'</strong></p>\n<p>2018-07-18T20:45:32.563250+00:00 app[web.1]: ]</p>\n</blockquote>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 1, "last_activity_date": 1531958114, "last_edit_date": 1531958114, "creation_date": 1531957501, "answer_id": 51412408, "question_id": 51412369, "link": "https://stackoverflow.com/questions/51412369/extracting-data-from-specific-columns-of-numpy-array-for-each-row/51412408#51412408", "title": "Extracting data from specific columns of numpy array for each row", "body": "<p>Since you want to sequentially index the rows of <code>A</code>, you can index with <strong><code>np.arange(len(A))</code></strong> in addition to <code>b</code> to get your desired output:</p>\n\n<pre><code>A[np.arange(len(A)), b]\n\n# array([35, 21, 21, 17, 18, 35])\n</code></pre>\n\n<p>Showing how this works:</p>\n\n<pre>\n#               A              np.arange(len(A))    b\narray([[<b>35</b>,  2, 23, 22],                     [0,    0]\n       [44, <b>21</b>, 15,  4],                     [1,    1]\n       [44, <b>21</b>, 15,  4],                     [2,    1]\n       [37,  4, <b>17</b>, 41],                     [3,    2]\n       [33,  4,  4, <b>18</b>],                     [4,    3]\n       [<b>35</b>,  2, 23, 22]])                    [5,    0]\n</pre>\n"}, {"tags": [], "owner": {"reputation": 678, "user_id": 8400707, "user_type": "registered", "profile_image": "https://graph.facebook.com/1603106016403126/picture?type=large", "display_name": "Junhee Shin", "link": "https://stackoverflow.com/users/8400707/junhee-shin"}, "is_accepted": false, "score": 1, "last_activity_date": 1531960883, "creation_date": 1531960883, "answer_id": 51412773, "question_id": 51412369, "link": "https://stackoverflow.com/questions/51412369/extracting-data-from-specific-columns-of-numpy-array-for-each-row/51412773#51412773", "title": "Extracting data from specific columns of numpy array for each row", "body": "<p>How about this?</p>\n\n<pre><code>A[:,b].diagonal()\nOut[133]: array([35, 21, 21, 17, 18, 35])\n</code></pre>\n"}], "owner": {"reputation": 433, "user_id": 5129061, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c32af3957cf239ae09f46173b5aec14e?s=128&d=identicon&r=PG&f=1", "display_name": "Mechanician", "link": "https://stackoverflow.com/users/5129061/mechanician"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "closed_date": 1531982731, "accepted_answer_id": 51412408, "answer_count": 2, "score": 1, "last_activity_date": 1531960883, "creation_date": 1531957177, "question_id": 51412369, "link": "https://stackoverflow.com/questions/51412369/extracting-data-from-specific-columns-of-numpy-array-for-each-row", "closed_reason": "Duplicate", "title": "Extracting data from specific columns of numpy array for each row", "body": "<p>I am trying to obtain the value corresponding to column b[i] for each row i in A</p>\n\n<p>Can I do this without using the for loop?</p>\n\n<pre><code>A = np.array([[35, 2, 23, 22], [44, 21, 15, 4], [44, 21, 15, 4], [37, 4, 17, 41], [33, 4, 4, 18], [35, 2, 23, 22]])\nb = np.array([0,1,1,2,3,0])\nC = zeros(len(b),1)\nfor i in range(6):\n    C[i] = A[i][b[i]]   \n</code></pre>\n"}, {"tags": ["python", "functional-programming", "arguments"], "comments": [{"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1531957329, "post_id": 51412366, "comment_id": 89796417, "body": "<code>def foo(fcn, const): return const * fcn(2)</code> ?"}, {"owner": {"reputation": 732, "user_id": 6452137, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b2ffb53d387e64d1258f4eb1dbfc85e3?s=128&d=identicon&r=PG&f=1", "display_name": "ZHU", "link": "https://stackoverflow.com/users/6452137/zhu"}, "edited": false, "score": 0, "creation_date": 1531957365, "post_id": 51412366, "comment_id": 89796429, "body": "I don&#39;t want this constant to be in foo, since it&#39;s not really a part of foo&#39;s functionality. Lmabda expression is a way but doesn&#39;t look nice."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1531957774, "post_id": 51412366, "comment_id": 89796522, "body": "Python functions don&#39;t represent mathematical functions. They represent instructions for doing things. For Python functions, supporting the <code>*</code> operator would be more confusing than useful."}, {"owner": {"reputation": 106023, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1531971573, "post_id": 51412366, "comment_id": 89799326, "body": "You should share your real code"}], "answers": [{"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 2, "last_activity_date": 1531957564, "last_edit_date": 1531957564, "creation_date": 1531957372, "answer_id": 51412389, "question_id": 51412366, "link": "https://stackoverflow.com/questions/51412366/how-can-i-pass-a-function-multiplied-by-a-constant-as-argument-in-python/51412389#51412389", "title": "How can I pass a function multiplied by a constant as argument in Python", "body": "<p>Use a lambda to define an anonymous function inline:</p>\n\n<pre><code>foo(lambda x: 4 * fcn1(x))\n</code></pre>\n\n<p>You could hide this behind a helper function:</p>\n\n<pre><code>def times_n(n, f):\n    return lambda x: n * f(x)\n\nfoo(times_n(4, fcn1))\n</code></pre>\n\n<p>If you don't like lambdas you can use all named functions:</p>\n\n<pre><code>def times_n(n, f):\n    def fn(x):\n        return n * f(x)\n    return fn\n</code></pre>\n\n<p>A new <code>fn(x)</code> will be created each time <code>times_n()</code> is called, bound to varying values of <code>n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 732, "user_id": 6452137, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b2ffb53d387e64d1258f4eb1dbfc85e3?s=128&d=identicon&r=PG&f=1", "display_name": "ZHU", "link": "https://stackoverflow.com/users/6452137/zhu"}, "edited": false, "score": 0, "creation_date": 1531957424, "post_id": 51412394, "comment_id": 89796438, "body": "I don&#39;t want this constant to be in foo, since it&#39;s not really a part of foo&#39;s functionality."}], "tags": [], "owner": {"reputation": 1062, "user_id": 6723642, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/O4s3s.jpg?s=128&g=1", "display_name": "heather", "link": "https://stackoverflow.com/users/6723642/heather"}, "is_accepted": false, "score": 0, "last_activity_date": 1531957408, "creation_date": 1531957408, "answer_id": 51412394, "question_id": 51412366, "link": "https://stackoverflow.com/questions/51412366/how-can-i-pass-a-function-multiplied-by-a-constant-as-argument-in-python/51412394#51412394", "title": "How can I pass a function multiplied by a constant as argument in Python", "body": "<p>You could always do something like </p>\n\n<pre><code>def foo(fcn, const=1):\n    return const*fcn(2)\nfoo(fcn1, 4)\n</code></pre>\n\n<p>In other words, just use an optional parameter.</p>\n"}], "owner": {"reputation": 732, "user_id": 6452137, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/b2ffb53d387e64d1258f4eb1dbfc85e3?s=128&d=identicon&r=PG&f=1", "display_name": "ZHU", "link": "https://stackoverflow.com/users/6452137/zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1531959619, "creation_date": 1531957147, "last_edit_date": 1531959619, "question_id": 51412366, "link": "https://stackoverflow.com/questions/51412366/how-can-i-pass-a-function-multiplied-by-a-constant-as-argument-in-python", "title": "How can I pass a function multiplied by a constant as argument in Python", "body": "<p>How can I pass a function multiplied by a constant as argument? This is for sake of modularity of my code. If I do</p>\n\n<pre><code>def foo(fcn, **kwargs):\n    return fcn(2, **kwargs[\"param1\"])\n\ndef fcn1(x, **kwargs):\n    return x ** kwargs[\"power\"]\n\nfoo(4 * fcn1)\n</code></pre>\n\n<p>this will give error <code>TypeError: unsupported operand type(s) for *: 'float' and 'function'\n</code>. </p>\n\n<p>I don't want this constant to be in foo, since it's not really a part of foo's functionality. Lmabda expression is a way but doesn't look nice such as <code>foo(lambda x: 4 * fcn1)</code></p>\n"}, {"tags": ["python", "python-3.x", "list", "multidimensional-array"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 3, "creation_date": 1531956871, "post_id": 51412320, "comment_id": 89796308, "body": "Those aren&#39;t valid python literals.  What exactly is <code>a_lis</code>?  A list containing lists that each contain a single string?"}, {"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1531956912, "post_id": 51412320, "comment_id": 89796323, "body": "is a nested list with one string @PatrickHaugh"}, {"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1531957059, "post_id": 51412320, "comment_id": 89796356, "body": "sorry @PatrickHaugh I fixed it"}], "answers": [{"comments": [{"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1531957125, "post_id": 51412348, "comment_id": 89796372, "body": "I got the folowing: <code>----&gt; 3     new_list.append(i.split(&#39; &#39;))       4 print(new_list)  AttributeError: &#39;list&#39; object has no attribute &#39;split&#39;</code>"}, {"owner": {"reputation": 1062, "user_id": 6723642, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/O4s3s.jpg?s=128&g=1", "display_name": "heather", "link": "https://stackoverflow.com/users/6723642/heather"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1531957180, "post_id": 51412348, "comment_id": 89796385, "body": "@anon that&#39;s because you ran the first example, for a flat list - try the next example."}], "tags": [], "owner": {"reputation": 1062, "user_id": 6723642, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/O4s3s.jpg?s=128&g=1", "display_name": "heather", "link": "https://stackoverflow.com/users/6723642/heather"}, "is_accepted": false, "score": 1, "last_activity_date": 1531956959, "creation_date": 1531956959, "answer_id": 51412348, "question_id": 51412320, "link": "https://stackoverflow.com/questions/51412320/how-to-separate-by-comma-all-the-elements-of-a-nested-list/51412348#51412348", "title": "How to separate by comma all the elements of a nested list?", "body": "<pre><code>a_list = ['hmm this is a thing', 'and another']\nnew_list = []\nfor i in a_list:\n    new_list.append(i.split(' '))\nprint(new_list)\n</code></pre>\n\n<p>Basically, use the <code>.split()</code> method for a string with a space as an argument. Also, make sure you put quotation marks around those strings!</p>\n\n<p>If you have a list of lists, just add another for loop:</p>\n\n<pre><code>a_list = [['hmm, this is a thing', 'and another'], ['more things!']]\nnew_list = []\nfor i in a_list:\n    sub_list = []\n    for k in i:\n        sub_list.append(k.split(' '))\n    new_list.append(sub_list)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 0, "creation_date": 1531957301, "post_id": 51412361, "comment_id": 89796408, "body": "Thanks for the help but I end up with some <code>&#39;&#39;</code> spaces, is there any way of removing them?"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "edited": false, "score": 1, "creation_date": 1531957383, "post_id": 51412361, "comment_id": 89796432, "body": "Are you using <code>s.split()</code> or <code>s.split(&#39; &#39;)</code>?  <code>s.split()</code> shouldn&#39;t produce <code>&#39;&#39;</code>.  What strings are leading to those outputs?"}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": true, "score": 4, "last_activity_date": 1531957098, "creation_date": 1531957098, "answer_id": 51412361, "question_id": 51412320, "link": "https://stackoverflow.com/questions/51412320/how-to-separate-by-comma-all-the-elements-of-a-nested-list/51412361#51412361", "title": "How to separate by comma all the elements of a nested list?", "body": "<p>If <code>a_lis</code> is </p>\n\n<pre><code>a_lis = [[\"hi how are you\"],\n[\"im fine thanks\"],\n[\"cool lets go to the restaurant\"],\n[\"I can't now\"]]\n</code></pre>\n\n<p>then we can flatten that to a list of strings, and <code>split</code> each of those strings</p>\n\n<pre><code>[s.split() for l in a_lis for s in l]\n</code></pre>\n\n<p>gives us</p>\n\n<pre><code>[['hi', 'how', 'are', 'you'], ['im', 'fine', 'thanks'], ['cool', 'lets', 'go', 'to', 'the', 'restaurant'], ['I', \"can't\", 'now']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5954, "user_id": 230392, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/uwtL7.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/230392/jeff"}, "is_accepted": false, "score": 3, "last_activity_date": 1531957106, "creation_date": 1531957106, "answer_id": 51412362, "question_id": 51412320, "link": "https://stackoverflow.com/questions/51412320/how-to-separate-by-comma-all-the-elements-of-a-nested-list/51412362#51412362", "title": "How to separate by comma all the elements of a nested list?", "body": "<p>Another way of doing it with map</p>\n\n<pre><code>a_lis = [[\"hi how are you\"],[\"good and you\"]]\nnew_list = list(map(lambda x: x[0].split(' '), a_lis))\n# new_list is [['hi', 'how', 'are', 'you'], ['good', 'and', 'you']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1532483807, "creation_date": 1532483807, "answer_id": 51509786, "question_id": 51412320, "link": "https://stackoverflow.com/questions/51412320/how-to-separate-by-comma-all-the-elements-of-a-nested-list/51509786#51509786", "title": "How to separate by comma all the elements of a nested list?", "body": "<p>Here's a functional approach:</p>\n\n<pre><code>&gt;&gt;&gt; from operator import itemgetter\n&gt;&gt;&gt; a_lis = [[\"hi how are you\"],[\"good and you\"]]\n&gt;&gt;&gt; list(map(str.split, map(itemgetter(0), a_lis)))\n[['hi', 'how', 'are', 'you'], ['good', 'and', 'you']]\n</code></pre>\n"}], "owner": {"reputation": 742, "user_id": 9978457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r70xA.jpg?s=128&g=1", "display_name": "anon", "link": "https://stackoverflow.com/users/9978457/anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 51412361, "answer_count": 4, "score": 0, "last_activity_date": 1532483807, "creation_date": 1531956725, "last_edit_date": 1531957028, "question_id": 51412320, "link": "https://stackoverflow.com/questions/51412320/how-to-separate-by-comma-all-the-elements-of-a-nested-list", "title": "How to separate by comma all the elements of a nested list?", "body": "<p>I have a long list with tokens like this:</p>\n\n<pre><code> a_lis = [['hi how are you'],\n['im fine thanks'],\n['cool lets go to the restaurant']\n,...,\n['I can't now']]\n</code></pre>\n\n<p>I would like to separate each token or term with a comma like this (*):</p>\n\n<pre><code> a_lis = [['hi', 'how', 'are', 'you'],\n['im', 'fine', 'thanks'],\n['cool', 'lets', 'go', 'to', 'the', 'restaurant']\n,...,\n['I', 'can't', 'now']]\n</code></pre>\n\n<p>I tried to:</p>\n\n<pre><code>[x.replace(' ', ', ') for x in a_lis]\n</code></pre>\n\n<p>However, is not working. Amy idea of how to get (*)?</p>\n"}, {"tags": ["python", "matplotlib", "python-3.6", "seaborn"], "answers": [{"tags": [], "owner": {"reputation": 533, "user_id": 2018755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66ee210bf34f6bb8be106e2a839c63a9?s=128&d=identicon&r=PG", "display_name": "Jonathan Fry", "link": "https://stackoverflow.com/users/2018755/jonathan-fry"}, "is_accepted": true, "score": 1, "last_activity_date": 1532571319, "creation_date": 1532571319, "answer_id": 51530057, "question_id": 51412287, "link": "https://stackoverflow.com/questions/51412287/use-an-irregularly-spaced-non-categorical-axis-on-a-categorical-plot-in-seaborn/51530057#51530057", "title": "Use an irregularly spaced, non-categorical axis on a categorical plot in seaborn", "body": "<p>Well, I eventually solved this, sort of... I caved and used pure matplotlib, gave up on Seaborn. The matplotlib violinplot takes an array-like <code>positions</code> argument which when passed numeric values, auto-scales the x-axis and behaves exactly as <code>plt.plot</code> or any plot where marker position and axis range are derived from the input data. I still used <code>seaborn.set()</code> to get the nice Seaborn aesthetic. There is matplotlib violin plot customization <a href=\"https://matplotlib.org/gallery/statistics/customized_violin.html\" rel=\"nofollow noreferrer\">documentation</a> which has nice examples of how to edit the details of the violins which allowed me to customize the violins and mimic all parts of the Seaborn violin plot.</p>\n"}], "owner": {"reputation": 533, "user_id": 2018755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66ee210bf34f6bb8be106e2a839c63a9?s=128&d=identicon&r=PG", "display_name": "Jonathan Fry", "link": "https://stackoverflow.com/users/2018755/jonathan-fry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 51530057, "answer_count": 1, "score": 3, "last_activity_date": 1532571319, "creation_date": 1531956415, "question_id": 51412287, "link": "https://stackoverflow.com/questions/51412287/use-an-irregularly-spaced-non-categorical-axis-on-a-categorical-plot-in-seaborn", "title": "Use an irregularly spaced, non-categorical axis on a categorical plot in seaborn", "body": "<p>I'm creating a violin plot in Seaborn, which by default, assumes that the x-axis is categorical, and therefore evenly spaces the data, rather than scaling it by a value. I would like the spacing between the individual violins to be defined by values associated with each violin, rather than just spacing them evenly. I have read a number of things suggesting that I can overwrite the defaults with matplotlib commands, but can't get anything to work. </p>\n\n<pre><code>sns.set(palette='muted', color_codes=True)\nf, axes = plt.subplots(2, 2, figsize=(8,5))\nsns.violinplot(x = lsdf['6MO_CUM_MBO/1000FT'], y = lsdf.RELATIVE_DEPTH,\ndata=lsdf, palette=\"Blues\", ax=axes[0,0])\n</code></pre>\n\n<p>I think the key issue here, is I'm not exactly sure what Seaborn's defaults are controling. Do I need to modify the axes object created by subplots? or the ax=[0,0] object?</p>\n\n<p>The only answer I found to a similar question had a solution which was just, \"do it in matplotlib,\" but I need the plots available in seaborn. Thanks for your help.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mzUFc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mzUFc.png\" alt=\"seaborn categorical violin plot\"></a></p>\n"}, {"tags": ["python", "json", "python-requests"], "comments": [{"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 0, "creation_date": 1531956181, "post_id": 51412225, "comment_id": 89796144, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10844064/items-in-json-object-are-out-of-order-using-json-dumps\">Items in JSON object are out of order using &quot;json.dumps&quot;?</a>"}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 0, "creation_date": 1531956238, "post_id": 51412225, "comment_id": 89796159, "body": "In particular, on &lt;3.7, make <code>data</code> an <code>OrderedDict</code>"}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "reply_to_user": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 0, "creation_date": 1531956464, "post_id": 51412225, "comment_id": 89796213, "body": "@BaileyParker The OP is asking for the return json to be ordered (accessed by <code>r.json()</code>), they&#39;re not asking about <code>data</code>."}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 2, "creation_date": 1531956616, "post_id": 51412225, "comment_id": 89796247, "body": "Indeed, I misread. I&#39;d contest that relying on the order of json keys from a server (especially one you don&#39;t control, but even one you do) is pretty fragile. I&#39;d recommend against it. If you want to iterate over the <code>dict</code> in a particular order, why not make a list of the keys <code>keys = [&#39;first&#39;, &#39;second&#39;, ...]</code> and then <code>for k in key: r.json()[k]</code>?"}, {"owner": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "reply_to_user": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 0, "creation_date": 1531957351, "post_id": 51412225, "comment_id": 89796424, "body": "Hi @BaileyParker thanks for your response. I have an internal process which takes a json object and maps it to a database table. The order of rows in the . table must match the exact sequence in the json. Unfortunately I cannot change the intermediate logic (it&#39;s a vendor product). The sequence of elements returned from the API is same as in the table. The response.json() method is changing it."}], "answers": [{"comments": [{"owner": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "edited": false, "score": 0, "creation_date": 1531959107, "post_id": 51412438, "comment_id": 89796787, "body": "Hi @abccd , thanks for your detailed description. Very helpful. I have added a little more details to the question. Does that help in anyway to solve my problem?"}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "reply_to_user": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "edited": false, "score": 0, "creation_date": 1531959250, "post_id": 51412438, "comment_id": 89796819, "body": "Still... does <code>r.json(object_pairs_hook=OrderedDict)</code> not work? The object it returns is basically the ordered version of your desired <code>dict</code>. For Python&lt;=3.5, <code>dict</code> are not ordered."}, {"owner": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "edited": false, "score": 0, "creation_date": 1531959542, "post_id": 51412438, "comment_id": 89796881, "body": "Nope :(. It is transforming my json to look like this: b&quot;OrderedDict([(&#39;key01&#39;,&#39;value01&#39;),(&#39;key02&#39;,&#39;value02&#39;),(&#39;key&zwnj;&#8203;N&#39;,&#39;valueN&#39;)]) WHEREAS I need it to look like this: {&quot;key01&quot;:&quot;value01&quot;,&quot;key02&quot;:&quot;value02&quot;,&quot;keyN&quot;:&quot;valueN&quot;}. Thats my original format in which it is in the response object BTW."}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "reply_to_user": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "edited": false, "score": 1, "creation_date": 1531959729, "post_id": 51412438, "comment_id": 89796931, "body": "@Anubis05 from reading your other comment, I think you want <code>text = r.content.decode(requests.utils.guess_json_utf(r.content)).e&zwnj;&#8203;ncode(&#39;utf-8&#39;)</code>"}, {"owner": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "edited": false, "score": 0, "creation_date": 1531959774, "post_id": 51412438, "comment_id": 89796939, "body": "BTW I am using python 3.5.2"}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "reply_to_user": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "edited": false, "score": 0, "creation_date": 1531959790, "post_id": 51412438, "comment_id": 89796944, "body": "@Anubis05 The code in my last comment basically does the folowing three steps: <i>&quot;I would ideally like responseObj -&gt;json -&gt;utf-8 encoding&quot;</i>, and now you just have the post <code>text</code>."}], "tags": [], "owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "is_accepted": true, "score": 1, "last_activity_date": 1531960087, "last_edit_date": 1531960087, "creation_date": 1531957783, "answer_id": 51412438, "question_id": 51412225, "link": "https://stackoverflow.com/questions/51412225/python-response-json-preserve-order/51412438#51412438", "title": "python response.json preserve order", "body": "<p>The requests doesn't have the best documentation, but from reading its source code <a href=\"https://github.com/requests/requests/blob/master/requests/models.py#L876-L900\" rel=\"nofollow noreferrer\">on the <code>.json()</code> method</a>, we can see that it's defined as followed:</p>\n\n<pre><code>def json(self, **kwargs):\n    r\"\"\"Returns the json-encoded content of a response, if any.\n    :param \\*\\*kwargs: Optional arguments that ``json.loads`` takes.\n    :raises ValueError: If the response body does not contain valid json.\n    \"\"\"\n\n    if not self.encoding and self.content and len(self.content) &gt; 3:\n        # No encoding set. JSON RFC 4627 section 3 states we should expect\n        # UTF-8, -16 or -32. Detect which one to use; If the detection or\n        # decoding fails, fall back to `self.text` (using chardet to make\n        # a best guess).\n        encoding = guess_json_utf(self.content)\n        if encoding is not None:\n            try:\n                return complexjson.loads(\n                    self.content.decode(encoding), **kwargs\n                )\n            except UnicodeDecodeError:\n                # Wrong UTF codec detected; usually because it's not UTF-8\n                # but some other 8-bit codec.  This is an RFC violation,\n                # and the server didn't bother to tell us what codec *was*\n                # used.\n                pass\n    return complexjson.loads(self.text, **kwargs)\n</code></pre>\n\n<p>where <code>complexjson</code> is the std <code>json</code> library or <code>simplejson</code> if you have that installed.</p>\n\n<p>Knowing that, you can actually pass in keyword arguments to <code>.json()</code> which will directly go to <code>json.loads()</code>. Which means that you can do what the <a href=\"https://stackoverflow.com/a/23820416/6622817\">answer you linked</a> proposed:</p>\n\n<hr>\n\n<pre><code>from collections import OrderedDict\nr.json(object_pairs_hook=OrderedDict)\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><a href=\"https://docs.python.org/3/library/json.html#json.load\" rel=\"nofollow noreferrer\"><strong><code>json.loads()</code></strong></a></p>\n  \n  <p><em><code>object_pairs_hook</code></em> is an optional function that\n  will be called with the result of any object literal decoded with an\n  ordered list of pairs. The return value of <code>object_pairs_hook</code> will be\n  used instead of the <code>dict</code>. This feature can be used to implement custom\n  decoders. If <code>object_hook</code> is also defined, the <code>object_pairs_hook</code> takes\n  priority.</p>\n</blockquote>\n\n<p><br/></p>\n\n<blockquote>\n  <p><a href=\"https://simplejson.readthedocs.io/en/latest/#simplejson.load\" rel=\"nofollow noreferrer\"><strong><code>simplejson.loads()</code></strong></a></p>\n  \n  <p><em><code>object_pairs_hook</code></em> is an optional function that will be called with the\n  result of any object literal decode with an ordered list of pairs. The\n  return value of <code>object_pairs_hook</code> will be used instead of the <code>dict</code>.\n  This feature can be used to implement custom decoders that rely on the\n  order that the <code>key</code> and <code>value</code> pairs are decoded (for example,\n  <code>collections.OrderedDict</code> will remember the order of insertion). If\n  <code>object_hook</code> is also defined, the <code>object_pairs_hook</code> takes priority.</p>\n</blockquote>\n\n<p>Therefore, either way you will be able to provide the <code>object_pairs_hook</code> keyword argument to <code>r.json()</code>.</p>\n\n<hr>\n\n<p>From the information I received from the comments, you don't even need to parse the json, just do:</p>\n\n<pre><code>text = r.content.decode(requests.utils.guess_json_utf(r.content)).encode('utf-8')\n</code></pre>\n\n<p>and you can \"post\" text to wherever you desire.</p>\n"}, {"comments": [{"owner": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "edited": false, "score": 0, "creation_date": 1531958963, "post_id": 51412439, "comment_id": 89796759, "body": "I just tried this approach. This does what you described. But now my json object looks like this: b&quot;OrderedDict([(&#39;key01&#39;,&#39;value01&#39;),(&#39;key02&#39;,&#39;value02&#39;),(&#39;key&zwnj;&#8203;N&#39;,&#39;valueN&#39;)]) .  Which however MUST look like this:  {&quot;key01&quot;:&quot;value01&quot;,&quot;key02&quot;:&quot;value02&quot;,&quot;keyN&quot;:&quot;valueN&quot;}. Thats the only format which the next process accepts. I am getting my initial json in the same format as is expected at next steps."}, {"owner": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "edited": false, "score": 0, "creation_date": 1531959351, "post_id": 51412439, "comment_id": 89796845, "body": "Or in another way to describe. I would ideally like responseObj -&gt;json -&gt;utf-8 encoding -&gt;post the json . The json at last step need to look like this {&quot;key01&quot;:&quot;value01&quot;,&quot;key02&quot;:&quot;value02&quot;,&quot;keyN&quot;:&quot;valueN&quot;} which is what I am getting in 2nd step. But since I am doing a response.json() to arrive at step 2, it is messing up the order. Can&#39;t I just take a json object as is from a response object, apply utf-8 and pass along to next steps?"}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "reply_to_user": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "edited": false, "score": 1, "creation_date": 1531959934, "post_id": 51412439, "comment_id": 89796987, "body": "See my edit for how to get this back in a serialized form."}], "tags": [], "owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "is_accepted": false, "score": 1, "last_activity_date": 1531959918, "last_edit_date": 1531959918, "creation_date": 1531957789, "answer_id": 51412439, "question_id": 51412225, "link": "https://stackoverflow.com/questions/51412225/python-response-json-preserve-order/51412439#51412439", "title": "python response.json preserve order", "body": "<p>Relying on the order of json keys from a server (especially one that you don't control) is very fragile. The <a href=\"https://tools.ietf.org/html/rfc7159\" rel=\"nofollow noreferrer\">RFC says</a>:</p>\n\n<blockquote>\n  <p>An object is an unordered collection of zero or more name/value pairs, where a name is a string and a value is a string, number, boolean, null, object, or array.</p>\n</blockquote>\n\n<p>It also specifically comments:</p>\n\n<blockquote>\n  <p>JSON parsing libraries have been observed to differ as to whether or not they make the ordering of object members visible to calling software.  Implementations whose behavior does not depend on member ordering will be interoperable in the sense that they will not be affected by these differences.</p>\n</blockquote>\n\n<p>Thus, it is RFC compliant for an implementation (on the server) to change how it orders the produced JSON.</p>\n\n<p>If you don't know if the server is using a serialization library that guarantees order, then this could break in the future (if the library changes). Even if you do, if that library takes the server language's equivalent of a <code>dict</code>, upgrading the language or standard library could change the semantics of that <code>dict</code> such that the ordering changes (and your code breaks). As an example, from Python 3.6 to 3.7 <code>dicts</code> changed from arbitrary order to ordered by insertion. In other languages such as <a href=\"https://doc.rust-lang.org/std/collections/hash_map/struct.HashMap.html\" rel=\"nofollow noreferrer\">rust</a>, which seed the hash function used by their hashmaps to <a href=\"https://arstechnica.com/information-technology/2011/12/huge-portions-of-web-vulnerable-to-hashing-denial-of-service-attack/\" rel=\"nofollow noreferrer\">prevent DoS attacks</a>, the ordering could be dependent on the randomness used to seed these hash functions (decided at runtime, and may be different if you, say, restart the server).</p>\n\n<p>It's much more safe if you know that you need the data in a certain order to construct it that way yourself:</p>\n\n<pre><code>from collections import OrderedDict\n\nORDERED_KEYS = ['first', 'second', 'third']\nordered_json = OrderedDict((k, r.json()[k]) for k in ORDERED_KEYS)\n</code></pre>\n\n<p>From your comment, it seems like you need that dictionary serialized again. If you use <code>json.dumps</code> on an <code>OrderedDict</code>, the serialization will be in insertion order:</p>\n\n<pre><code>import json\n\nserialized_ordered_json = json.dumps(ordered_json)\n</code></pre>\n"}], "owner": {"reputation": 1054, "user_id": 344788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/932487f0f01495e3b482eb8653e95ef5?s=128&d=identicon&r=PG", "display_name": "Anubis05", "link": "https://stackoverflow.com/users/344788/anubis05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1462, "favorite_count": 0, "accepted_answer_id": 51412438, "answer_count": 2, "score": 0, "last_activity_date": 1531960087, "creation_date": 1531955810, "last_edit_date": 1531957957, "question_id": 51412225, "link": "https://stackoverflow.com/questions/51412225/python-response-json-preserve-order", "title": "python response.json preserve order", "body": "<p>I have a json object which is returned against a post call</p>\n\n<pre><code>r = requests.post(\"url\", json=data)\n</code></pre>\n\n<p>I was doing <code>r.json()</code> to get the json object. But as I understand it creates a dict object which is unordered. I need to preserve the order.</p>\n\n<p>I saw the solution described here: <a href=\"https://stackoverflow.com/questions/10844064/items-in-json-object-are-out-of-order-using-json-dumps\">Items in JSON object are out of order using &quot;json.dumps&quot;?</a></p>\n\n<p>But my challenge is my starting point is a response object. How do I take it and convert to a json with the order preserved?</p>\n\n<p>Adding some more details:</p>\n\n<p>My API call returns an object of form:</p>\n\n<pre><code>[{\n    \"key01\": \"value01\",\n    \"key02\": \"value02\",\n    \"keyN\": \"valueN\"\n},\n{\n    \"key01\": \"value01\",\n    \"key02\": \"value02\",\n    \"keyN\": \"valueN\"\n},\n{\n    \"key01\": \"value01\",\n    \"key02\": \"value02\",\n    \"keyN\": \"valueN\"\n}\n]\n</code></pre>\n\n<p>I have a table with three columns as key01,key02 and keyN.</p>\n\n<p>I need to post this json object after some minor manipulations to a software maintaining that specific order of key01,key02 and keyN.</p>\n\n<p>But as soon as I do response.json() it is changing the order. I have tried to use the orderedlist approach as mentioned in the two other threads but so far my object is looking like this: </p>\n\n<pre><code>b\"OrderedDict([('key01','value01'),('key02','value02'),('keyN','valueN')])\n</code></pre>\n\n<p>How do I get a json which looks like this instead: <code>{\"key01\":\"value01\",\"key02\":\"value02\",\"keyN\":\"valueN\"}</code></p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 2659, "user_id": 9036322, "user_type": "registered", "profile_image": "https://graph.facebook.com/2029964853699364/picture?type=large", "display_name": "reisdev", "link": "https://stackoverflow.com/users/9036322/reisdev"}, "edited": false, "score": 0, "creation_date": 1531956019, "post_id": 51412219, "comment_id": 89796101, "body": "how the id is coming from the front-end?"}, {"owner": {"reputation": 13, "user_id": 9859621, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1YbYz4730Nk/AAAAAAAAAAI/AAAAAAAAAg4/03rZQ-U_9gk/photo.jpg?sz=128", "display_name": "muhamad fahmy", "link": "https://stackoverflow.com/users/9859621/muhamad-fahmy"}, "reply_to_user": {"reputation": 2659, "user_id": 9036322, "user_type": "registered", "profile_image": "https://graph.facebook.com/2029964853699364/picture?type=large", "display_name": "reisdev", "link": "https://stackoverflow.com/users/9036322/reisdev"}, "edited": false, "score": 0, "creation_date": 1531956100, "post_id": 51412219, "comment_id": 89796123, "body": "sent by a get request"}, {"owner": {"reputation": 2659, "user_id": 9036322, "user_type": "registered", "profile_image": "https://graph.facebook.com/2029964853699364/picture?type=large", "display_name": "reisdev", "link": "https://stackoverflow.com/users/9036322/reisdev"}, "edited": false, "score": 0, "creation_date": 1531956188, "post_id": 51412219, "comment_id": 89796145, "body": "on the link? on the request body? The code above isn&#39;t not enough to help you. Please, include your route definition"}, {"owner": {"reputation": 13, "user_id": 9859621, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1YbYz4730Nk/AAAAAAAAAAI/AAAAAAAAAg4/03rZQ-U_9gk/photo.jpg?sz=128", "display_name": "muhamad fahmy", "link": "https://stackoverflow.com/users/9859621/muhamad-fahmy"}, "reply_to_user": {"reputation": 2659, "user_id": 9036322, "user_type": "registered", "profile_image": "https://graph.facebook.com/2029964853699364/picture?type=large", "display_name": "reisdev", "link": "https://stackoverflow.com/users/9036322/reisdev"}, "edited": false, "score": 0, "creation_date": 1531956314, "post_id": 51412219, "comment_id": 89796180, "body": "&quot;select * from course inner join coursecategory on (course.id = coursecategory.course_id) where category_id = $sent_id &quot;"}, {"owner": {"reputation": 13, "user_id": 9859621, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1YbYz4730Nk/AAAAAAAAAAI/AAAAAAAAAg4/03rZQ-U_9gk/photo.jpg?sz=128", "display_name": "muhamad fahmy", "link": "https://stackoverflow.com/users/9859621/muhamad-fahmy"}, "reply_to_user": {"reputation": 2659, "user_id": 9036322, "user_type": "registered", "profile_image": "https://graph.facebook.com/2029964853699364/picture?type=large", "display_name": "reisdev", "link": "https://stackoverflow.com/users/9036322/reisdev"}, "edited": false, "score": 0, "creation_date": 1531956362, "post_id": 51412219, "comment_id": 89796191, "body": "this is the sql statement .. I want to change $sent_id  by the id that is coming from the fornt end( angular)"}, {"owner": {"reputation": 2659, "user_id": 9036322, "user_type": "registered", "profile_image": "https://graph.facebook.com/2029964853699364/picture?type=large", "display_name": "reisdev", "link": "https://stackoverflow.com/users/9036322/reisdev"}, "edited": false, "score": 0, "creation_date": 1531956899, "post_id": 51412219, "comment_id": 89796317, "body": "I know what you want to do. I need to see your <code>Router.get()</code> for this <code>GET</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1531957416, "post_id": 51412219, "comment_id": 89796437, "body": "You access the parameter the same way here that you would do it in any other part of the application."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1531957490, "post_id": 51412219, "comment_id": 89796447, "body": "Just put the variable that contains the id into the parentheses. But for better safety you should use a prepared statement with <code>cursor.execute()</code>."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1531984217, "post_id": 51412219, "comment_id": 89803916, "body": "Why do you want to use raw SQL at all? There is nothing complicated about this query, you should use normal orm methods."}], "answers": [{"tags": [], "owner": {"reputation": 467, "user_id": 2802667, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mZ1pO.jpg?s=128&g=1", "display_name": "doubleo46", "link": "https://stackoverflow.com/users/2802667/doubleo46"}, "is_accepted": false, "score": 0, "last_activity_date": 1531976757, "creation_date": 1531976757, "answer_id": 51414714, "question_id": 51412219, "link": "https://stackoverflow.com/questions/51412219/refrence-sent-id-through-a-sql-statment/51414714#51414714", "title": "refrence sent id through a sql statment", "body": "<p>if you are sending the id you can access it by <strong>request.GET['sent_id']</strong> since its a get query.</p>\n"}], "owner": {"reputation": 13, "user_id": 9859621, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1YbYz4730Nk/AAAAAAAAAAI/AAAAAAAAAg4/03rZQ-U_9gk/photo.jpg?sz=128", "display_name": "muhamad fahmy", "link": "https://stackoverflow.com/users/9859621/muhamad-fahmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1531976757, "creation_date": 1531955767, "question_id": 51412219, "link": "https://stackoverflow.com/questions/51412219/refrence-sent-id-through-a-sql-statment", "title": "refrence sent id through a sql statment", "body": "<p>i want to reference sent Id that is coming from the frontend</p>\n\n<pre><code>def list(self, request):\n        queryset = Course.objects.raw('select * from course inner join course_categories on (course.id = course_categories.course_id) where category_id = {}').format(???????)\n\n        serializer = CourseSerial(queryset, many=True)\n        return Response(serializer.data)\n</code></pre>\n\n<p>I want to handle a sent id and put it in my sql statement </p>\n"}, {"tags": ["python", "excel"], "comments": [{"owner": {"reputation": 685, "user_id": 1169797, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8cdf1c4380419fc73340fbb8739dfae?s=128&d=identicon&r=PG", "display_name": "mooglinux", "link": "https://stackoverflow.com/users/1169797/mooglinux"}, "edited": false, "score": 0, "creation_date": 1531956049, "post_id": 51412210, "comment_id": 89796108, "body": "Are you using <code>pandas</code>?"}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 1, "creation_date": 1531956114, "post_id": 51412210, "comment_id": 89796126, "body": "<code>var1 = a.xlsx</code> is not valid python unless <code>a.xlsx</code> exists. That&#39;s probably not what you want. You want <code>var1 = &#39;a.xlsx&#39;</code>."}, {"owner": {"reputation": 9523, "user_id": 2378649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hRA41.png?s=128&g=1", "display_name": "coffeinjunky", "link": "https://stackoverflow.com/users/2378649/coffeinjunky"}, "edited": false, "score": 0, "creation_date": 1531956317, "post_id": 51412210, "comment_id": 89796181, "body": "What do you mean by <code>does not work</code>? What error do you get?"}, {"owner": {"reputation": 1, "user_id": 10085693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cfb7a29e3de3991e571c99038265ba?s=128&d=identicon&r=PG&f=1", "display_name": "user10085693", "link": "https://stackoverflow.com/users/10085693/user10085693"}, "edited": false, "score": 0, "creation_date": 1531956479, "post_id": 51412210, "comment_id": 89796217, "body": "Yes, I am using pandas."}, {"owner": {"reputation": 1, "user_id": 10085693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cfb7a29e3de3991e571c99038265ba?s=128&d=identicon&r=PG&f=1", "display_name": "user10085693", "link": "https://stackoverflow.com/users/10085693/user10085693"}, "edited": false, "score": 0, "creation_date": 1531956503, "post_id": 51412210, "comment_id": 89796226, "body": "The error is: No such file or directory: &#39;&quot;a.xlsx&quot;\\r\\n&#39;"}, {"owner": {"reputation": 1, "user_id": 10085693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cfb7a29e3de3991e571c99038265ba?s=128&d=identicon&r=PG&f=1", "display_name": "user10085693", "link": "https://stackoverflow.com/users/10085693/user10085693"}, "edited": false, "score": 0, "creation_date": 1531956576, "post_id": 51412210, "comment_id": 89796240, "body": "I tried changing the entries in data.txt as &quot;a.xlsx&quot; to include the quotations (instead of a.xlsx w/o quotations)"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 10102408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ef42ab2c171437bbdf1e141934dcdaa?s=128&d=identicon&r=PG&f=1", "display_name": "Brad ", "link": "https://stackoverflow.com/users/10102408/brad"}, "is_accepted": false, "score": 2, "last_activity_date": 1531957199, "creation_date": 1531957199, "answer_id": 51412371, "question_id": 51412210, "link": "https://stackoverflow.com/questions/51412210/reading-several-input-files-in-python/51412371#51412371", "title": "Reading several input files in Python", "body": "<p>You need to do <code>var1.rstrip()</code> to remove <code>\\n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10085693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cfb7a29e3de3991e571c99038265ba?s=128&d=identicon&r=PG&f=1", "display_name": "user10085693", "link": "https://stackoverflow.com/users/10085693/user10085693"}, "edited": false, "score": 0, "creation_date": 1531958117, "post_id": 51412381, "comment_id": 89796594, "body": "and it still says IOError: [Errno 2] No such file or directory:"}, {"owner": {"reputation": 1, "user_id": 10085693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cfb7a29e3de3991e571c99038265ba?s=128&d=identicon&r=PG&f=1", "display_name": "user10085693", "link": "https://stackoverflow.com/users/10085693/user10085693"}, "edited": false, "score": 0, "creation_date": 1531958200, "post_id": 51412381, "comment_id": 89796607, "body": "However wen I write a.xlsx directly in read_excel command (and I am not using var1) it works and does not complain with no such file or directory."}], "tags": [], "owner": {"reputation": 132, "user_id": 3852161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd08b3cafa4459b94c308aa6fcb9738e?s=128&d=identicon&r=PG&f=1", "display_name": "Vardan", "link": "https://stackoverflow.com/users/3852161/vardan"}, "is_accepted": false, "score": 0, "last_activity_date": 1531957291, "creation_date": 1531957291, "answer_id": 51412381, "question_id": 51412210, "link": "https://stackoverflow.com/questions/51412210/reading-several-input-files-in-python/51412381#51412381", "title": "Reading several input files in Python", "body": "<p>Assume that you text file is like this <strong>new.txt</strong>  remove the quotes (\"\") from the text file. you completely misunderstood the comments.</p>\n\n<pre><code>a.xlsx\nb.xlsx\nc.xlsx\n</code></pre>\n\n<p>your code should be something like this:</p>\n\n<pre><code>file = open(\"new.txt\")\nfor var in file:\n    df = read_excel(var.strip(),sheet_name=0) // reading the files one by one\n    // Do some processing\n</code></pre>\n\n<p>This just a skelton.\nYou are getting that error is because there are some extra characters when reading\nthe file (\\r\\n). The strip function would remove those characters and any white spaces.</p>\n"}], "owner": {"reputation": 1, "user_id": 10085693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cfb7a29e3de3991e571c99038265ba?s=128&d=identicon&r=PG&f=1", "display_name": "user10085693", "link": "https://stackoverflow.com/users/10085693/user10085693"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1531957291, "creation_date": 1531955720, "question_id": 51412210, "link": "https://stackoverflow.com/questions/51412210/reading-several-input-files-in-python", "title": "Reading several input files in Python", "body": "<p>I have several Excel files that I would like to read in with my code. Instead of using the following command with the explicit file name:    </p>\n\n<pre><code>df = read_excel(\"a.xlsx\",sheet_name=0)\n</code></pre>\n\n<p>I would like to list all of my Excel file names in a .txt file (like data.txt) and then read data.txt line by line to store each Excel file name in a variable: i.e. after reading the first line of data.txt which is a.xlsx, I will assign  </p>\n\n<pre><code>var1 = a.xlsx\n</code></pre>\n\n<p>My question is how do I open a.xlsx afterwards.</p>\n\n<pre><code>df = read_excel(var1,sheet_name=0) \n</code></pre>\n\n<p>does not work. \nIs there a way to open Excel files without having their names explicitly written out in Python?\nThanks in advance.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 0, "creation_date": 1531956330, "post_id": 51412186, "comment_id": 89796184, "body": "For perspective, what do you consider &quot;a long time&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9912305, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qgIm7Jl29EA/AAAAAAAAAAI/AAAAAAAAAFo/rbJUc4OiJPA/photo.jpg?sz=128", "display_name": "Jerry Lin", "link": "https://stackoverflow.com/users/9912305/jerry-lin"}, "edited": false, "score": 0, "creation_date": 1532009974, "post_id": 51412519, "comment_id": 89821076, "body": "Thanks, putting it into a set really sped things up a ton! My problem is now solved, but I&#39;m just curious, what do you mean by a mapper function in the second part?"}, {"owner": {"reputation": 1340, "user_id": 2494646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee09446a45c2c0b5978afbb958aa80e?s=128&d=identicon&r=PG", "display_name": "Aayush", "link": "https://stackoverflow.com/users/2494646/aayush"}, "reply_to_user": {"reputation": 23, "user_id": 9912305, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qgIm7Jl29EA/AAAAAAAAAAI/AAAAAAAAAFo/rbJUc4OiJPA/photo.jpg?sz=128", "display_name": "Jerry Lin", "link": "https://stackoverflow.com/users/9912305/jerry-lin"}, "edited": false, "score": 0, "creation_date": 1532043325, "post_id": 51412519, "comment_id": 89836919, "body": "Edited answer to be more specific about mapping operation."}], "tags": [], "owner": {"reputation": 1340, "user_id": 2494646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee09446a45c2c0b5978afbb958aa80e?s=128&d=identicon&r=PG", "display_name": "Aayush", "link": "https://stackoverflow.com/users/2494646/aayush"}, "is_accepted": true, "score": 0, "last_activity_date": 1532043239, "last_edit_date": 1532043239, "creation_date": 1531958449, "answer_id": 51412519, "question_id": 51412186, "link": "https://stackoverflow.com/questions/51412186/speed-up-selection-by-a-combination-of-two-columns-pandas/51412519#51412519", "title": "Speed up selection by a combination of two columns \u2014 Pandas", "body": "<ol>\n<li>You can put each row entry [passive.userid, passive.city] in a set. That way your \"in B\" check becomes an O(1) lookup instead of an O(n) and this gives you a 30,000x speedup.  </li>\n<li>Then use the apply() function in pandas to vectorize the lookup. Here's an example of apply(). \n<a href=\"https://i.stack.imgur.com/GKKA4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GKKA4.png\" alt=\"enter image description here\"></a></li>\n</ol>\n\n<p>You can find more details <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 9912305, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qgIm7Jl29EA/AAAAAAAAAAI/AAAAAAAAAFo/rbJUc4OiJPA/photo.jpg?sz=128", "display_name": "Jerry Lin", "link": "https://stackoverflow.com/users/9912305/jerry-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 51412519, "answer_count": 1, "score": 0, "last_activity_date": 1532043239, "creation_date": 1531955543, "question_id": 51412186, "link": "https://stackoverflow.com/questions/51412186/speed-up-selection-by-a-combination-of-two-columns-pandas", "title": "Speed up selection by a combination of two columns \u2014 Pandas", "body": "<p>Currently, I am trying to select rows from a large dataframe (1.5 million rows), called active, by a combination of two columns from another dataframe, called passive, which has about 30,000 rows. If a combination of two columns in the active table matches the combination of two columns in the passive table, I select the row from the active table.</p>\n\n<pre><code>Here is the code:\nactive.loc[(active['userid']+active['orgcity']).isin(passive.userid+passive.city)]\n</code></pre>\n\n<p>However, this process is taking a long time. I think it should already be an improvement over iteration or pd.apply. Are there any other ways to speed this up?</p>\n"}, {"tags": ["python", "performance", "pyparsing", "packrat"], "answers": [{"tags": [], "owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "is_accepted": true, "score": 1, "last_activity_date": 1532060125, "last_edit_date": 1532060125, "creation_date": 1531964517, "answer_id": 51413172, "question_id": 51412184, "link": "https://stackoverflow.com/questions/51412184/pyparsing-packrat-slows-down-performance/51413172#51413172", "title": "Pyparsing packrat slows down performance", "body": "<p>A 20MB file is going to take some time with pyparsing no matter what, but there are some constructs that might be slowing you down.</p>\n\n<p>When we redid the implementation of packrat parsing to use an OrderedDict for the cache, I did some testing of different values for the cache size. The default value of 128 turned out to be only about 1-2% less efficient than an unbounded cache, with huge wins in both memory and performance. So I'd be surprised if values more than 200 or 300 would be of much cacheing help, while paying penalties in cache searching and memory management. </p>\n\n<p>Packrat parsing works best when you get cache hits by revisiting the same expression at the same location of the input string. It's important that it is the exact <em>same</em> expression, not just an equivalent one. For instance, if you had something like:</p>\n\n<pre><code>Literal(\"A\") + Optional(\",\" + Literal(\"B\")) + Optional(\",\" + Literal(\"C\"))\n</code></pre>\n\n<p>the separate Literals for the delimiting commas are different expressions, and so would not be cache hits. If instead you define and reuse a single expression for common punctuation, you have a better chance at packrat parsing being able to lookup its parsed results from the cache instead of reparsing:</p>\n\n<pre><code>COMMA = Literal(\",\")\nLiteral(\"A\") + Optional(COMMA + Literal(\"B\")) + Optional(COMMA + Literal(\"C\"))\n</code></pre>\n\n<p>Lately I've been using <code>expr()</code> syntax to create copies of <code>expr</code> so that modifiers like parse actions, whitespace settings, etc. don't get accidentally changed globally. This will work against expression reuse, so if you have many instances of <code>expr()</code> that are not required, then just reuse the base <code>expr</code>. Note also that expressions with results names make implicit copies, so be sure to not overuse results names.</p>\n\n<p>Packrat parsing is best when using <code>infixNotation</code>, especially when there are 6 or more level of operator precedence. The expressions that <code>infixNotation</code> generates reuse subexpressions rather than defining new ones, so it is able to get better cache performance.</p>\n\n<p>You may be overusing '^' operator for <code>Or</code> when you could use '|' operator for <code>MatchFirst</code>. This can be especially expensive when used in a recursive expression (using <code>Forward</code>). Compare these two expressions:</p>\n\n<pre><code>arith_operand = integer_expr ^ float_expr ^ variable_name ^ Keyword(\"pi\") ^ Keyword(\"e\")\n</code></pre>\n\n<p>By using '^', all the expressions will get evaluated, and the longest match is then chosen. In particular, if parsing \"3.1416\", it is necessary since the leading \"3\" would match <code>integer</code>, but the longer \"3.1416\" would match <code>float_expr</code>. But we also try to match a variable name, and the keywords \"pi\" and \"e\", which are guaranteed no matches. (We have the same expression masking problem with <code>variable_name</code> and \"pi\" and \"e\", since they would presumably match as a possible variable name.) But if we change to using '|', then our parser will short-circuit on the first match. We just have to take some care in the order things get parsed:</p>\n\n<pre><code>arith_operand = float_expr | integer_expr | Keyword(\"pi\") | Keyword(\"e\") | variable_name\n</code></pre>\n\n<p>That is, we have to be sure we check for a match on a float before matching an integer, since the leading part of a float could be mistaken for an integer.</p>\n\n<p>If you have easily mutually-exclusive alternatives (such as a series of possible keywords, which by virtue of their keyword-ness, can never mask each other), then you could also order them based on some likely frequency. For instance:</p>\n\n<pre><code>bad_expr = Keyword(\"xylophone\") | Keyword(\"the\") | Keyword(\"a\")\n</code></pre>\n\n<p>is probably going to be a performance loser in most non-musical applications.</p>\n\n<p>In the early days of pyparsing, I did not have the <code>Regex</code> class, so I would have to define an expression for a real number using something like <code>Combine(Word(nums) + \".\" + Optional(Word(nums)))</code>. That is a lot of work for pyparsing, when you can just use <code>Regex(r\"\\d+\\.\\d*\")</code>. Typically, real number expressions are really low-level expressions used and tested thousands of times in a given parsing run, so convering to a <code>Regex</code> really pays off. Or use one of the numeric expressions in <code>pyparsing_common</code> like <code>pyparsing_common.real</code> or <code>pyparsing_common.number</code>. You don't need to go overboard though - pyparsing internally uses regexes for matching expressions using <code>Word</code> and <code>oneOf</code>.</p>\n\n<p>You also can examine the cache and the cache stats directly, <code>ParserElement.packrat_cache</code> and <code>ParserElement.packrat_cache_stats</code>. The cache stats are a two-element list, element 0 is the number of cache hits, element 1 is the number of misses. You could define a debug action for a recurring expression that would print out the cache stats. <strike>You could also look for duplicated expressions by using Counter: <code>Counter(str(key[0]) for key in ParserElement.packrat_cache)</code>. By <code>str</code>-ing the expressions, it will help identify duplicates.</strike> So you can look at the cache efficiency for different values of cache size.</p>\n\n<p>EDIT: my mistake, the iteration over the cache keys in <code>ParserElement.packrat_cache</code> does not work, the cache <code>OrderedDict</code> itself is hidden away from external access.</p>\n"}], "owner": {"reputation": 91, "user_id": 9905602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3c1b6fd567d27f62e6db04bc5693dfc?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppi", "link": "https://stackoverflow.com/users/9905602/jeppi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 1, "accepted_answer_id": 51413172, "answer_count": 1, "score": 1, "last_activity_date": 1532060125, "creation_date": 1531955532, "question_id": 51412184, "link": "https://stackoverflow.com/questions/51412184/pyparsing-packrat-slows-down-performance", "title": "Pyparsing packrat slows down performance", "body": "<p>I'm looking for a way to improve the performance of my parser I built with <code>pyparsing</code>. I read up on packrat parsing and it seems like this could really help with my parser's performance. However, when I enabled packrat parsing, the performance got worse! Without packrat, it takes about 2 minutes for parsing a 20 MB file. With packrat enabled, it takes 2-3 times more. I read that packrat can have problems with parseActions, so I removed all parseActions from my grammar to see if packrat would improve its performance then, but that didn't help either. I tried different cache size limits (unlimited and in the range of 100-1000), but all these approaches instead worsened my parser's performance when I enabled packrat.</p>\n\n<p>Is there a rule of thumb for setting packrat's cache_size_limit? And are there any grammatical constructs which limit the use of packrat parsing or explain why my parser's performance got worse?</p>\n"}, {"tags": ["python", "django", "fullcalendar"], "answers": [{"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1531958841, "creation_date": 1531958841, "answer_id": 51412552, "question_id": 51412175, "link": "https://stackoverflow.com/questions/51412175/locales-are-not-changing-fullcalendar-language/51412552#51412552", "title": "Locales are not changing fullcalendar language", "body": "<p>That setting is renamed to <code>locale</code> in recent versions:</p>\n\n<p><a href=\"https://fullcalendar.io/docs/locale\" rel=\"nofollow noreferrer\">https://fullcalendar.io/docs/locale</a></p>\n\n<p>For example:</p>\n\n<pre><code>$('#calendar').fullCalendar({\n  locale: 'fr'\n});\n</code></pre>\n"}], "owner": {"reputation": 359, "user_id": 2867030, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4a3ea829e781278520f190c9b840526a?s=128&d=identicon&r=PG", "display_name": "Dimmy Magalh&#227;es", "link": "https://stackoverflow.com/users/2867030/dimmy-magalh%c3%a3es"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3228, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1600243658, "creation_date": 1531955393, "last_edit_date": 1600243658, "question_id": 51412175, "link": "https://stackoverflow.com/questions/51412175/locales-are-not-changing-fullcalendar-language", "title": "Locales are not changing fullcalendar language", "body": "<p>I have a system with Django. In my template, the lasts scripts are:</p>\n<pre><code>&lt;script src=&quot;{% static 'plugins/moment/min/moment.min.js' %}&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;{% static 'plugins/fullcalendar/js/fullcalendar.min.js' %}&quot; &gt;&lt;/script&gt;\n&lt;script src=&quot;{% static 'plugins/fullcalendar/js/locale-all.js' %}&quot; &gt;&lt;/script&gt;\n{% block extra_footer %}{% endblock %}\n</code></pre>\n<p>In my page, I start the calendar as <a href=\"https://fullcalendar.io/docs/locale\" rel=\"nofollow noreferrer\">here</a>, like this:</p>\n<pre><code>{% block extra_footer %}\n    &lt;script&gt;\n            $(function() {\n                $('#calendar').fullCalendar({\n                    lang: '{{ LANGUAGE_CODE }}',\n                    });\n\n             });\n    &lt;/script&gt;\n{% endblock %}\n</code></pre>\n<p>When I inspect html code, the LANGUAGE_CODE is ok (for exemple: fr). But the calendar just appears in English, How can I fix it?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1531955083, "post_id": 51412137, "comment_id": 89795863, "body": "<code>input()</code> returns a string, not a number."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1531955129, "post_id": 51412137, "comment_id": 89795874, "body": "<code>if str(var)==1:</code> How do you expect that to work? <code>str(var)</code> returns a string, <code>1</code> is an integer, they can never be equal."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1531955156, "post_id": 51412137, "comment_id": 89795884, "body": "That should be <code>if int(var) == 1</code> or <code>if var == &quot;1&quot;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1531955192, "post_id": 51412137, "comment_id": 89795892, "body": "You can also do <code>var = int(input())</code> and then you won&#39;t need to do any type conversions."}, {"owner": {"reputation": 11, "user_id": 10102313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uVHI5lY9ric/AAAAAAAAAAI/AAAAAAAAAW0/vDYh9OR4zLs/photo.jpg?sz=128", "display_name": "Nehith Gopireddy", "link": "https://stackoverflow.com/users/10102313/nehith-gopireddy"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1532038476, "post_id": 51412137, "comment_id": 89835724, "body": "ok thanks ill try that"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10102313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uVHI5lY9ric/AAAAAAAAAAI/AAAAAAAAAW0/vDYh9OR4zLs/photo.jpg?sz=128", "display_name": "Nehith Gopireddy", "link": "https://stackoverflow.com/users/10102313/nehith-gopireddy"}, "edited": false, "score": 0, "creation_date": 1532038588, "post_id": 51412201, "comment_id": 89835754, "body": "Ok thanks that works"}], "tags": [], "owner": {"reputation": 31, "user_id": 6258422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJhAA.jpg?s=128&g=1", "display_name": "itssme", "link": "https://stackoverflow.com/users/6258422/itssme"}, "is_accepted": false, "score": 0, "last_activity_date": 1531955639, "creation_date": 1531955639, "answer_id": 51412201, "question_id": 51412137, "link": "https://stackoverflow.com/questions/51412137/input-is-not-working/51412201#51412201", "title": "Input() is not working", "body": "<p>Your <code>input()</code> works fine. But you are comparing strings with integers.\nIn each of your ifs you are comparing two different datatypes. Because <code>\"1\"</code> and <code>1</code> are not the same you program does not work.</p>\n\n<p>You will have to convert the string that you get from input to a number (integer).\nYour ifs will have to look like:</p>\n\n<pre><code>var = input()\nif int(var) == 1:\n    print(\"You type in 1\")\n</code></pre>\n\n<p>Or even better if you don't want to convert the variable var for each if:</p>\n\n<pre><code>var = int(input())\nif var == 1:\n    print(\"You typed 1\")\n</code></pre>\n\n<p>For more information see: <a href=\"https://www.programiz.com/python-programming/variables-datatypes\" rel=\"nofollow noreferrer\">https://www.programiz.com/python-programming/variables-datatypes</a></p>\n"}], "owner": {"reputation": 11, "user_id": 10102313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uVHI5lY9ric/AAAAAAAAAAI/AAAAAAAAAW0/vDYh9OR4zLs/photo.jpg?sz=128", "display_name": "Nehith Gopireddy", "link": "https://stackoverflow.com/users/10102313/nehith-gopireddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1531973782, "answer_count": 1, "score": -1, "last_activity_date": 1531955639, "creation_date": 1531955010, "last_edit_date": 1531955063, "question_id": 51412137, "link": "https://stackoverflow.com/questions/51412137/input-is-not-working", "closed_reason": "Duplicate", "title": "Input() is not working", "body": "<p>I tried to create this rock paper scissors game. But the input isn't working. Anyone know what I'm doing wrong? Every time i tried to enter input it would show think that i didnt enter anything or didn't enter a number 1-3 and go straight to else.\nimport random</p>\n\n<pre><code>import time\n\ny=3\n\nwhile y&gt;0:\n\n    print(\"Lets play Rock Paper Scissors\")\n    print(\"1 for Rock\")\n    print(\"2 for Paper\")\n    print(\"3 for Scissors\")\n    time.sleep(1)\n    print(\"Rock, Paper, Scissors...\")\n    var=input()\n    z=random.randint(1,3)\n    if z==1:\n        print(\"I play Rock\")\n        time.sleep(1)\n        if str(var)==1:\n            print(\"You played Rock too! TIE\")\n        if str(var)==2:\n            print(\"You played Paper! YOU WIN!!!\")\n        if str(var)==3:\n            print(\"You played Scissors! I WIN!\")\n            y=y-1\n        else:\n            print(\"ERROR! Pick a number 1-3.\")\n    if z==2:\n        print(\"I play Paper\")\n        time.sleep(1)\n        if str(var)==1:\n            print(\"You played Rock! I WIN!\")\n            y=y-1\n        if str(var)==2:\n            print(\"You played Paper too! TIE\")\n        if str(var)==3:\n            print(\"You played Scissors! YOU WIN!!!\")\n        else:\n            print(\"ERROR! Pick a number 1-3.\")\n    if z==3:\n        print(\"I play Scissors\")\n        time.sleep(1)\n        if str(var)==1:\n            print(\"You played Rock! YOU WIN!!!\")\n        if str(var)==2:\n            print(\"You played Paper too! I WIN!\")\n            y=y-1\n        if str(var)==3:\n            print(\"You played Scissors too! TIE\")\n        else:\n            print(\"ERROR! Pick a number 1-3.\")\n    else:\n        print(\"THIS SHOULDN'T BE POSSIBLE BUT OH WELL.... EASTER EGG\")\n</code></pre>\n"}, {"tags": ["python", "yaml"], "comments": [{"owner": {"reputation": 336, "user_id": 9905470, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "swiftg", "link": "https://stackoverflow.com/users/9905470/swiftg"}, "edited": false, "score": 0, "creation_date": 1531955780, "post_id": 51412131, "comment_id": 89796048, "body": "<a href=\"https://stackoverflow.com/questions/38369833/pyyaml-and-using-quotes-for-strings-only\">See this</a>"}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 1, "creation_date": 1531956819, "post_id": 51412131, "comment_id": 89796297, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/38369833/pyyaml-and-using-quotes-for-strings-only\">pyyaml and using quotes for strings only</a>"}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1531956874, "post_id": 51412131, "comment_id": 89796310, "body": "...the second answer there in fact answers this question.  Note that your first two YAML files are semantically identical: both represent lists with the three strings &quot;a&quot;, &quot;b&quot;, and &quot;c&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": false, "score": 1, "last_activity_date": 1531979579, "last_edit_date": 1531979579, "creation_date": 1531977570, "answer_id": 51414843, "question_id": 51412131, "link": "https://stackoverflow.com/questions/51412131/yaml-enclose-each-entry-in-quotation-marks/51414843#51414843", "title": "YAML: Enclose each entry in quotation marks", "body": "<p>Quotes at the beginning of a scalar have a special meaning in YAML, they make the difference between plain scalars with resp. double and single quoted scalars. \nIn order to dump strings that have the quotes \"naturally\", YAML has to go through extra hoops: inserting a backslash (<code>\\</code>) in case of double quotes, or an extra single quotes <code>'</code> in case of single quoted strings. The latter is what causes your output.</p>\n\n<p>If you don't need any more fine grained control, you can do:</p>\n\n<pre><code>import yaml\n\nmy_list = [\"a\", \"b\", \"c\"]\nwith open(\"my_yaml.yaml\", \"w\") as f:\n    yaml.safe_dump(my_list, f, default_style='\"', enable_unicode=True,\n                   explicit_start=True, default_flow_style=False)\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>---\n- \"a\"\n- \"b\"\n- \"c\"\n</code></pre>\n\n<p>Please note that:</p>\n\n<ul>\n<li>you should always use <code>safe_dump()</code> (unless you can't), that way you know up-front that loading with <code>safe_load()</code> (you are loading not using the unsafe <code>load()</code> are you?) is going to work. </li>\n<li>PyYAML has a streaming interface: dump normally takes a second parameter, which if not specified makes it stream into a in-memory buffer and returning the content of that buffer, which you then stream to file. Don't do that it is memory-inefficient and slow.</li>\n</ul>\n\n<p>The <code>default_style='\"'</code> will make any scalar into a string. Any scalar? Yes, <strong>any</strong> scalar, including keys for mappings (which actually might be what you want) and integers and all the other special types YAML supports:</p>\n\n<p>Changing <code>my_list</code> to:</p>\n\n<pre><code>my_list = [\"a\", \"b\", \"c\", dict(d=42), 3.14, True]\n</code></pre>\n\n<p>will give you:</p>\n\n<pre><code>---\n- \"a\"\n- \"b\"\n- \"c\"\n- \"d\": !!int \"42\"\n- !!float \"3.14\"\n- !!bool \"true\"\n</code></pre>\n\n<p>If you don't want that and only want (specific) sequence elements to be quoted, you can use <code>ruamel.yaml</code> (disclaimer: I am the author of that package), and do something like:</p>\n\n<pre><code>import ruamel.yaml \nfrom ruamel.yaml.scalarstring import (DoubleQuotedScalarString as dq, \n                                      SingleQuotedScalarString as sq)\n\nyaml = ruamel.yaml.YAML()\nmy_list = [dq(\"a\"), sq(\"b\"), dq(\"c\"), dict(d=42), 3.14, True]\n\nwith open(\"my_yaml.yaml\", \"w\") as f:\n    yaml.dump(my_list, f)\n</code></pre>\n\n<p>to get:</p>\n\n<pre><code>- \"a\"\n- 'b'\n- \"c\"\n- d: 42\n- 3.14\n- true\n</code></pre>\n"}], "owner": {"reputation": 6871, "user_id": 1316501, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3f0ddaf1d7d2aaeeb19b6ec8a99a70ee?s=128&d=identicon&r=PG", "display_name": "anon_swe", "link": "https://stackoverflow.com/users/1316501/anon-swe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531979579, "creation_date": 1531954994, "last_edit_date": 1531975624, "question_id": 51412131, "link": "https://stackoverflow.com/questions/51412131/yaml-enclose-each-entry-in-quotation-marks", "title": "YAML: Enclose each entry in quotation marks", "body": "<p>I'm writing a Python list to a YAML file.  My list looks like:</p>\n\n<pre><code>my_list = [\"a\", \"b\", \"c\"]\n</code></pre>\n\n<p>If I do:</p>\n\n<pre><code>with open(\"my_yaml.yaml\", \"w\") as f:\n    f.write(yaml.dump(my_list, explicit_start=True, default_flow_style=False))\n</code></pre>\n\n<p>Then my YAML file looks like this:</p>\n\n<pre><code>---\n- a\n- b\n- c\n</code></pre>\n\n<p>But I'd like each of <code>a</code>, <code>b</code>, and <code>c</code> to show up as strings.  So I'd like:</p>\n\n<pre><code>---\n- \"a\"\n- \"b\"\n- \"c\"\n</code></pre>\n\n<p>If I do this:</p>\n\n<pre><code>new_list = ['\\'' + entry + '\\'' for entry in my_list]\nwith open(\"my_yaml.yaml\", \"w\") as f:\n        f.write(yaml.dump(new_list, explicit_start=True, default_flow_style=False))\n</code></pre>\n\n<p>Then it shows up as:</p>\n\n<pre><code>---\n- '''a'''\n- '''b'''\n- '''c'''\n</code></pre>\n\n<p>How can I get the desired format?</p>\n"}, {"tags": ["python", "nlp", "spacy"], "answers": [{"tags": [], "owner": {"reputation": 5535, "user_id": 6400719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hWeOh.jpg?s=128&g=1", "display_name": "Ines Montani", "link": "https://stackoverflow.com/users/6400719/ines-montani"}, "is_accepted": true, "score": 17, "last_activity_date": 1531990292, "creation_date": 1531990292, "answer_id": 51418267, "question_id": 51412095, "link": "https://stackoverflow.com/questions/51412095/spacy-save-custom-pipeline/51418267#51418267", "title": "Spacy - Save custom pipeline", "body": "<p>When you save out your model, spaCy will serialize all data and store a reference to your pipeline in the model's <code>meta.json</code>. For example: <code>[\"ner\", \"countries\"]</code>. When you load your model back in, spaCy will check out the meta and initialise each pipeline component by looking it up in the so-called \"factories\": functions that tell spaCy how to construct a pipeline component. (The reason for that is that you usually don't want your model to store and eval arbitrary code when you load it back in \u2013 at least not by default.)</p>\n\n<p>In your case, spaCy is trying to look up the component name <code>'countries'</code> in the factories and fails, because it's not built-in. The <code>Language.factories</code> are a simple dictionary, though, so you can customise it and add your own entries:</p>\n\n<pre><code>from spacy.language import Language\nLanguage.factories['countries'] = lambda nlp, **cfg: RESTCountriesComponent(nlp, **cfg)\n</code></pre>\n\n<p>A factory is a function that receives the shared <code>nlp</code> object and optional keyword arguments (config parameters). It then initialises the component and returns it. If you add the above code <em>before</em> you load your model, it should load as expected.</p>\n\n<h2>More advanced approaches</h2>\n\n<p>If you want this taken care of automatically, you could also ship your component <em>with</em> your model. This requires wrapping it as a Python package using the <a href=\"https://spacy.io/api/cli#package\" rel=\"noreferrer\"><code>spacy package</code></a> command, which creates all required Python files. By default, the <code>__init__.py</code> only includes a function to load your model \u2013 but you can also add custom functions to it or use it to add entries to spaCy's factories.</p>\n\n<p>As of <code>v2.1.0</code> (currently available as a <a href=\"https://github.com/explosion/spaCy/releases/tag/v2.1.0a0\" rel=\"noreferrer\">nightly version</a> for testing), spaCy will also support providing pipeline component factories <a href=\"https://github.com/explosion/spaCy/pull/2348\" rel=\"noreferrer\">via Python entry points</a>. This is especially useful for production setups and/or if you want to modularise your individual components and split them into their own packages. For example, you could create a Python package for your countries component and its factory, upload it to PyPi, version it and test it separately. In its <code>setup.py</code>, your package can define the spaCy factories it exposes and where to find them. spaCy will be able to detect them automatically \u2013 all you need to do is install the package in the same environment. Your model package could even require your component package as a dependency so it's installed automatically when you install your model.</p>\n"}, {"tags": [], "owner": {"reputation": 452, "user_id": 4254538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70470700853b931499a64e40dfc2c6b?s=128&d=identicon&r=PG&f=1", "display_name": "Aus_10", "link": "https://stackoverflow.com/users/4254538/aus-10"}, "is_accepted": false, "score": 3, "last_activity_date": 1552488581, "last_edit_date": 1552488581, "creation_date": 1550783140, "answer_id": 54816207, "question_id": 51412095, "link": "https://stackoverflow.com/questions/51412095/spacy-save-custom-pipeline/54816207#54816207", "title": "Spacy - Save custom pipeline", "body": "<p>This same issue came up for me and these are the steps I used:</p>\n\n<ul>\n<li>1) Save pipeline after running notebook containing all the different nlp pipeline components e.g. nlp.to_disc('pipeline_model_name') </li>\n<li>2) Build Package saved pipeline with Spacy: run <code>python setup.py sdist</code> in this directory.</li>\n<li>3) Pip install the created package</li>\n<li>4) Put custom components in <code>__init__.py</code> file of package as instructed above</li>\n<li>4) Load pipeline with:\n\n<ul>\n<li><strong>Import  spacy</strong></li>\n<li><strong>nlp = spacy_package.load()</strong></li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 489, "user_id": 9898446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f927318f2d5d64291f3540775295af5?s=128&d=identicon&r=PG&f=1", "display_name": "Chris C", "link": "https://stackoverflow.com/users/9898446/chris-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3933, "favorite_count": 5, "accepted_answer_id": 51418267, "answer_count": 2, "score": 10, "last_activity_date": 1552488581, "creation_date": 1531954746, "last_edit_date": 1531957074, "question_id": 51412095, "link": "https://stackoverflow.com/questions/51412095/spacy-save-custom-pipeline", "title": "Spacy - Save custom pipeline", "body": "<p>I'm trying to integrate a custom <code>PhraseMatcher()</code> component into my nlp pipeline in a way that will allow me to load the custom Spacy model without having to re-add my custom components to a generic model on each load.</p>\n\n<p>How can I load a Spacy model containing custom pipeline components?</p>\n\n<p>I create the component, add it to my pipeline and save it with the following:</p>\n\n<pre><code>import requests\nfrom spacy.lang.en import English\nfrom spacy.matcher import PhraseMatcher\nfrom spacy.tokens import Doc, Span, Token\n\nclass RESTCountriesComponent(object):\n    name = 'countries'\n    def __init__(self, nlp, label='GPE'):\n        self.countries = [u'MyCountry', u'MyOtherCountry']\n        self.label = nlp.vocab.strings[label]\n        patterns = [nlp(c) for c in self.countries]\n        self.matcher = PhraseMatcher(nlp.vocab)\n        self.matcher.add('COUNTRIES', None, *patterns)        \n    def __call__(self, doc):\n        matches = self.matcher(doc)\n        spans = []\n        for _, start, end in matches:\n            entity = Span(doc, start, end, label=self.label)\n            spans.append(entity)\n        doc.ents = list(doc.ents) + spans\n        for span in spans:\n            span.merge()\n        return doc\n\nnlp = English()\nrest_countries = RESTCountriesComponent(nlp)\nnlp.add_pipe(rest_countries)\nnlp.to_disk('myNlp')\n</code></pre>\n\n<p>I then attempt to load my model with,</p>\n\n<pre><code>nlp = spacy.load('myNlp')\n</code></pre>\n\n<p>But get this error message:</p>\n\n<blockquote>\n  <p>KeyError: u\"[E002] Can't find factory for 'countries'. This usually\n  happens when spaCy calls <code>nlp.create_pipe</code> with a component name\n  that's not built in - for example, when constructing the pipeline from\n  a model's meta.json. If you're using a custom component, you can write\n  to <code>Language.factories['countries']</code> or remove it from the model meta\n  and add it via <code>nlp.add_pipe</code> instead.\"</p>\n</blockquote>\n\n<p>I can't just add my custom components to a generic pipeline in my programming environment. How can I do what I'm trying to do?</p>\n"}, {"tags": ["python", "eof"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 9816921, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Naya Keto", "link": "https://stackoverflow.com/users/9816921/naya-keto"}, "edited": false, "score": 0, "creation_date": 1531955968, "post_id": 51412206, "comment_id": 89796087, "body": "so after writing a few input commands in cmd and pressing Ctrl-D, the output should be displayed?"}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "reply_to_user": {"reputation": 123, "user_id": 9816921, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Naya Keto", "link": "https://stackoverflow.com/users/9816921/naya-keto"}, "edited": false, "score": 0, "creation_date": 1531956008, "post_id": 51412206, "comment_id": 89796099, "body": "Yes if you use <code>readlines()</code> (or <code>list(sys.stdin)</code>). But don&#39;t do that!"}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "reply_to_user": {"reputation": 123, "user_id": 9816921, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Naya Keto", "link": "https://stackoverflow.com/users/9816921/naya-keto"}, "edited": false, "score": 0, "creation_date": 1531956075, "post_id": 51412206, "comment_id": 89796119, "body": "<a href=\"https://stackoverflow.com/questions/16136400/how-to-send-eof-via-windows-terminal\" title=\"how to send eof via windows terminal\">stackoverflow.com/questions/16136400/&hellip;</a> (if you&#39;re on windows)"}], "tags": [], "owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "is_accepted": true, "score": 3, "last_activity_date": 1531956094, "last_edit_date": 1531956094, "creation_date": 1531955674, "answer_id": 51412206, "question_id": 51412086, "link": "https://stackoverflow.com/questions/51412086/end-of-file-input-python/51412206#51412206", "title": "End of File Input Python", "body": "<p>The problem here is that <code>readlines()</code> is eager not lazy. That means it will read the entire file into memory (until EOF) and then split it into lines and return a list of those lines. So when working with interactive stdin, <code>sys.stdin.readline()</code> will wait until the end of stdin (Ctrl-D on linux/macOS, Ctrl+Z on windows).</p>\n\n<p>But there is no need for <code>readlines()</code> (and in fact, <a href=\"https://stupidpythonideas.blogspot.com/2013/06/readlines-considered-silly.html\" rel=\"nofollow noreferrer\">you almost should never use it</a>). Iterating over a file object by default does so by lines:</p>\n\n<pre><code>for line in sys.stdin:\n    print('got line!')\n</code></pre>\n\n<p>The docs even <a href=\"https://docs.python.org/3/library/io.html#io.IOBase.readlines\" rel=\"nofollow noreferrer\">admit that you should do this</a>. If you do need all lines in a list, then just do <code>list(sys.stdin)</code>.</p>\n"}], "owner": {"reputation": 123, "user_id": 9816921, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Naya Keto", "link": "https://stackoverflow.com/users/9816921/naya-keto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 0, "accepted_answer_id": 51412206, "answer_count": 1, "score": 1, "last_activity_date": 1531956094, "creation_date": 1531954711, "question_id": 51412086, "link": "https://stackoverflow.com/questions/51412086/end-of-file-input-python", "title": "End of File Input Python", "body": "<p>I am trying to solve Kattis problem. The full problem is found in the link: <a href=\"https://open.kattis.com/problems/addingwords\" rel=\"nofollow noreferrer\">https://open.kattis.com/problems/addingwords</a></p>\n\n<p>The part of the problem that I'm confused with is : \"Input is a sequence of up to 2000 commands, one per line, ending at end of file.\"</p>\n\n<p>What would be the code for this input? I tried doing this: </p>\n\n<pre><code>import sys\n\nfor line in sys.stdin.readlines():\n    #print('something')\n</code></pre>\n\n<p>After this, I continued the program as normal within the indentation from above. My question is, how would I test whether the program is working in cmd? I want to test a few cases, but when I input something, the command prompt keeps waiting for other results instead of printing anything out. And when I press control C the program ends abruptly. How are we supposed to check whether the program is working while taking in user input till end of file? </p>\n"}, {"tags": ["python", "pymongo"], "comments": [{"owner": {"reputation": 333, "user_id": 4171685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HPPmc.jpg?s=128&g=1", "display_name": "Alex Feinstein", "link": "https://stackoverflow.com/users/4171685/alex-feinstein"}, "edited": false, "score": 0, "creation_date": 1531955035, "post_id": 51412043, "comment_id": 89795850, "body": "Wait, so do you want to count all the arrays being used by a python program? The question is not phrased clearly."}, {"owner": {"reputation": 51, "user_id": 4814644, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dhRQz.jpg?s=128&g=1", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/4814644/lorenz"}, "reply_to_user": {"reputation": 333, "user_id": 4171685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HPPmc.jpg?s=128&g=1", "display_name": "Alex Feinstein", "link": "https://stackoverflow.com/users/4171685/alex-feinstein"}, "edited": false, "score": 0, "creation_date": 1531955177, "post_id": 51412043, "comment_id": 89795889, "body": "yes.. i use pymongo, basically i want count ori in that doc.. so if i use .count() in pymongo, value should 6 instead 4"}, {"owner": {"reputation": 333, "user_id": 4171685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HPPmc.jpg?s=128&g=1", "display_name": "Alex Feinstein", "link": "https://stackoverflow.com/users/4171685/alex-feinstein"}, "edited": false, "score": 0, "creation_date": 1531955347, "post_id": 51412043, "comment_id": 89795938, "body": "So you want to count the number of times &quot;ori&quot; appears in the data in the doc?"}, {"owner": {"reputation": 51, "user_id": 4814644, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dhRQz.jpg?s=128&g=1", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/4814644/lorenz"}, "reply_to_user": {"reputation": 333, "user_id": 4171685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HPPmc.jpg?s=128&g=1", "display_name": "Alex Feinstein", "link": "https://stackoverflow.com/users/4171685/alex-feinstein"}, "edited": false, "score": 0, "creation_date": 1531955465, "post_id": 51412043, "comment_id": 89795966, "body": "yes correct.. already try above methods but result always 4."}, {"owner": {"reputation": 333, "user_id": 4171685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HPPmc.jpg?s=128&g=1", "display_name": "Alex Feinstein", "link": "https://stackoverflow.com/users/4171685/alex-feinstein"}, "edited": false, "score": 0, "creation_date": 1531956035, "post_id": 51412043, "comment_id": 89796104, "body": "Ok, is it all the arrays in the program, or are the arrays grouped together in a dictionary?"}, {"owner": {"reputation": 51, "user_id": 4814644, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dhRQz.jpg?s=128&g=1", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/4814644/lorenz"}, "reply_to_user": {"reputation": 333, "user_id": 4171685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HPPmc.jpg?s=128&g=1", "display_name": "Alex Feinstein", "link": "https://stackoverflow.com/users/4171685/alex-feinstein"}, "edited": false, "score": 0, "creation_date": 1531956381, "post_id": 51412043, "comment_id": 89796196, "body": "Sorry.. i&#39;m new in mongodb and pymongo. that list is each document by uid on my mongoDB. so i confuse about what you mean array by program or dic."}, {"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "edited": false, "score": 0, "creation_date": 1531957746, "post_id": 51412043, "comment_id": 89796518, "body": "What he means is that the data you posted above isn&#39;t a valid python data structure."}, {"owner": {"reputation": 51, "user_id": 4814644, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dhRQz.jpg?s=128&g=1", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/4814644/lorenz"}, "edited": false, "score": 0, "creation_date": 1531958137, "post_id": 51412043, "comment_id": 89796597, "body": "i edit the sample structure, is that correct ? because on mlab they give list table each document"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4814644, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dhRQz.jpg?s=128&g=1", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/4814644/lorenz"}, "edited": false, "score": 0, "creation_date": 1531958301, "post_id": 51412475, "comment_id": 89796623, "body": "thanks for your answer, but how to query from mongodb server with pymongo ? i mean something like using .find, .aggregate or $group ?"}, {"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "reply_to_user": {"reputation": 51, "user_id": 4814644, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dhRQz.jpg?s=128&g=1", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/4814644/lorenz"}, "edited": false, "score": 0, "creation_date": 1531958433, "post_id": 51412475, "comment_id": 89796648, "body": "That wasn&#39;t the question you asked."}], "tags": [], "owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "is_accepted": false, "score": 0, "last_activity_date": 1531958160, "creation_date": 1531958160, "answer_id": 51412475, "question_id": 51412043, "link": "https://stackoverflow.com/questions/51412043/count-all-array-in-pymongo/51412475#51412475", "title": "count all array in pymongo", "body": "<p>I've cleaned up your input by assuming each dictionary is held in a list as follows:</p>\n\n<pre><code>doc = [\n{\n    \"uid\": \"111\",\n    \"data\": [{\n        \"eid\": \"111a\",\n        \"ori\": \"\"\n    },\n    {\n        \"eid\": \"111b\",\n        \"ori\": \"\"       \n    }]\n},\n{\n    \"uid\": \"222\",\n    \"data\": [{\n        \"eid\": \"222a\",\n        \"ori\": \"\"\n    }]\n},\n{\n    \"uid\": \"333\",\n    \"data\": [{\n        \"eid\": \"333a\",\n        \"ori\": \"\"\n    }]\n},\n{\n    \"uid\": \"444\",\n    \"data\": [{\n        \"eid\": \"444a\",\n        \"ori\": \"\"\n    },\n    {\n        \"eid\": \"444b\",\n        \"ori\": \"\"       \n    }]\n}]\n\n\nfound = 0\nfor d in doc:\n    data = d['data']\n    for x in data:\n        if 'ori' in x:\n            found += 1\nprint(found)    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 542, "user_id": 9978223, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T5EdlIgWZ7E/AAAAAAAAAAI/AAAAAAAAABQ/0f4bK5VHxzM/photo.jpg?sz=128", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0421\u0438\u0434\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/9978223/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a1%d0%b8%d0%b4%d0%b5%d0%bd%d0%ba%d0%be"}, "is_accepted": false, "score": 0, "last_activity_date": 1559721491, "creation_date": 1559721491, "answer_id": 56456351, "question_id": 51412043, "link": "https://stackoverflow.com/questions/51412043/count-all-array-in-pymongo/56456351#56456351", "title": "count all array in pymongo", "body": "<p>Pymongo <code>$count(aggregation)</code> may <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/count/\" rel=\"nofollow noreferrer\">help</a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>docs = db.doc.aggregate( [\n   { $group: { _id: null, myCount: { $sum: 1 } } },\n   { $project: { _id: 0 } }\n] )\n</code></pre>\n\n<p>The operation returns the following results:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>{\n    \"myCount\": 4\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4814644, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dhRQz.jpg?s=128&g=1", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/4814644/lorenz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1559721491, "creation_date": 1531954343, "last_edit_date": 1531958011, "question_id": 51412043, "link": "https://stackoverflow.com/questions/51412043/count-all-array-in-pymongo", "title": "count all array in pymongo", "body": "<p>I need your help to count all array from all my \"doc\" documents.</p>\n\n<p>sample this i have 4 document with different array list:</p>\n\n<pre><code>[{\n    \"uid\": \"111\",\n    \"data\": [{\n        \"eid\": \"111a\",\n        \"ori\": \"\"\n    },\n    {\n        \"eid\": \"111b\",\n        \"ori\": \"\"       \n    }]\n},\n{\n    \"uid\": \"222\",\n    \"data\": [{\n        \"eid\": \"222a\",\n        \"ori\": \"\"\n    }]\n},\n{\n    \"uid\": \"333\",\n    \"data\": [{\n        \"eid\": \"333a\",\n        \"ori\": \"\"\n    }]\n},\n{\n    \"uid\": \"444\",\n    \"data\": [{\n        \"eid\": \"444a\",\n        \"ori\": \"\"\n    },\n    {\n        \"eid\": \"444b\",\n        \"ori\": \"\"       \n    }]\n}]\n</code></pre>\n\n<p>how i can count total data on all my documents ? in this sample is 6 by ori. Already this:</p>\n\n<pre><code>db.doc.find({\"data.ori\": \"\"}).count()\n</code></pre>\n\n<p>try many methods from stackoverflow, but not luck.. if you have any idea to do this or have tutorial for this, let me know and thanks.</p>\n"}, {"tags": ["python", "html", "web-scraping"], "comments": [{"owner": {"reputation": 4139, "user_id": 8898218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/82CEl.jpg?s=128&g=1", "display_name": "InAFlash", "link": "https://stackoverflow.com/users/8898218/inaflash"}, "edited": false, "score": 0, "creation_date": 1531954518, "post_id": 51412042, "comment_id": 89795697, "body": "are you sure that you are allowed to visit that website?, try checking it from a browser"}, {"owner": {"reputation": 325, "user_id": 9526448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/foiRV.jpg?s=128&g=1", "display_name": "bzier", "link": "https://stackoverflow.com/users/9526448/bzier"}, "edited": false, "score": 0, "creation_date": 1531959156, "post_id": 51412042, "comment_id": 89796800, "body": "For future reference, you should include information about what you&#39;ve searched for and/or what you&#39;ve tried already."}], "answers": [{"tags": [], "owner": {"reputation": 241, "user_id": 10102370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a59161662d91d0eae038bbe76aa7249?s=128&d=identicon&r=PG&f=1", "display_name": "Arnav", "link": "https://stackoverflow.com/users/10102370/arnav"}, "is_accepted": true, "score": 0, "last_activity_date": 1531958508, "creation_date": 1531958508, "answer_id": 51412523, "question_id": 51412042, "link": "https://stackoverflow.com/questions/51412042/scraping-a-html-text-document/51412523#51412523", "title": "Scraping a html text document", "body": "<p>If you have linux/unix, you can use wget/curl to download the webpage. This copies the html source code into a file in your root directory. For example, you can use </p>\n\n<pre><code>wget https://stackoverflow.com/questions/51412042/scraping-a-html-text-document \n</code></pre>\n\n<p>to get the source code for this webpage.</p>\n\n<p>To process this and get rid of some of the tags, you can copy the following into a new file by using vim/nano and run it (after performing chmod +x filename) by using <code>./script.sh filename</code>. You can also add other sed commands to get rid of other tags.</p>\n\n<pre><code>cat $1 |\nsed \"s/&lt;html&gt;//g\" |\nsed \"s/&lt;/html&gt;//g\" |\nsed \"s/&lt;head&gt;//g\" |\nsed \"s/&lt;/head&gt;//g\" |\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10102303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f99b5223b5e66404d0c83ea31f660d33?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Smaluk", "link": "https://stackoverflow.com/users/10102303/tim-smaluk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 51412523, "answer_count": 1, "score": -3, "last_activity_date": 1609364411, "creation_date": 1531954323, "last_edit_date": 1609364411, "question_id": 51412042, "link": "https://stackoverflow.com/questions/51412042/scraping-a-html-text-document", "title": "Scraping a html text document", "body": "<p>I need to web scrape a particular website but it does not allow web scraping(403 error). I'm thinking about copying the website's html data that I need and putting it into a txt document where I can scrape it as if it was a webpage. Is this possible to do or is there a better way of going about this?</p>\n"}, {"tags": ["python", "macos", "accessibility"], "answers": [{"comments": [{"owner": {"reputation": 27181, "user_id": 292477, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ca3cdf733e5ad7ca41c58ba43d06dcd?s=128&d=identicon&r=PG", "display_name": "Krumelur", "link": "https://stackoverflow.com/users/292477/krumelur"}, "reply_to_user": {"reputation": 311, "user_id": 8725843, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/00d06af37cd925e017101e0f042e3efb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8725843/j-doe"}, "edited": false, "score": 0, "creation_date": 1531955471, "post_id": 51412109, "comment_id": 89795967, "body": "What did stdout/stderr contain?"}, {"owner": {"reputation": 311, "user_id": 8725843, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/00d06af37cd925e017101e0f042e3efb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8725843/j-doe"}, "edited": false, "score": 0, "creation_date": 1531955613, "post_id": 51412109, "comment_id": 89796010, "body": "How can I check it? I run my script in terminal and do not get anything there"}, {"owner": {"reputation": 27181, "user_id": 292477, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ca3cdf733e5ad7ca41c58ba43d06dcd?s=128&d=identicon&r=PG", "display_name": "Krumelur", "link": "https://stackoverflow.com/users/292477/krumelur"}, "reply_to_user": {"reputation": 311, "user_id": 8725843, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/00d06af37cd925e017101e0f042e3efb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8725843/j-doe"}, "edited": false, "score": 0, "creation_date": 1531955677, "post_id": 51412109, "comment_id": 89796024, "body": "By printing the variables?"}, {"owner": {"reputation": 311, "user_id": 8725843, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/00d06af37cd925e017101e0f042e3efb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8725843/j-doe"}, "edited": false, "score": 0, "creation_date": 1531955795, "post_id": 51412109, "comment_id": 89796054, "body": "<code>Not authorised to send Apple events to System Events. (-1743)</code>"}, {"owner": {"reputation": 27181, "user_id": 292477, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ca3cdf733e5ad7ca41c58ba43d06dcd?s=128&d=identicon&r=PG", "display_name": "Krumelur", "link": "https://stackoverflow.com/users/292477/krumelur"}, "reply_to_user": {"reputation": 311, "user_id": 8725843, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/00d06af37cd925e017101e0f042e3efb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8725843/j-doe"}, "edited": false, "score": 0, "creation_date": 1531956225, "post_id": 51412109, "comment_id": 89796156, "body": "Are you by any chance using the Mojave beta? <a href=\"https://www.felix-schwarz.org/blog/2018/06/apple-event-sandboxing-in-macos-mojave\" rel=\"nofollow noreferrer\">felix-schwarz.org/blog/2018/06/&hellip;</a>"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1531958728, "post_id": 51412109, "comment_id": 89796703, "body": "<code>Terminal</code> is not the application trying to send the events."}, {"owner": {"reputation": 27181, "user_id": 292477, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ca3cdf733e5ad7ca41c58ba43d06dcd?s=128&d=identicon&r=PG", "display_name": "Krumelur", "link": "https://stackoverflow.com/users/292477/krumelur"}, "edited": false, "score": 0, "creation_date": 1532873942, "post_id": 51412109, "comment_id": 90127677, "body": "See the link in my previous comment. Mojave tightened security and there is no way to do what you want without user interaction (and seemingly hardly even then)."}], "tags": [], "owner": {"reputation": 27181, "user_id": 292477, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ca3cdf733e5ad7ca41c58ba43d06dcd?s=128&d=identicon&r=PG", "display_name": "Krumelur", "link": "https://stackoverflow.com/users/292477/krumelur"}, "is_accepted": false, "score": 1, "last_activity_date": 1531956932, "last_edit_date": 1531956932, "creation_date": 1531954839, "answer_id": 51412109, "question_id": 51412000, "link": "https://stackoverflow.com/questions/51412000/running-applescript-inside-of-python-script/51412109#51412109", "title": "Running AppleScript inside of Python script", "body": "<p>Most  likely the Python process is not allowed to touch the window. Manipulating Windows of other processes is a privileged operation that require your app to be whitelisted. See <a href=\"https://apple.stackexchange.com/questions/291574/osascript-is-not-allowed-assistive-access-1728\">https://apple.stackexchange.com/questions/291574/osascript-is-not-allowed-assistive-access-1728</a> </p>\n\n<p>To see if this is the case, inspect the stderr value returned from Popen and see if it contains something like \u201c osascript is not allowed assistive access\u201d.</p>\n\n<p>Edit: In Mojave, Apple Events are now sandboxes and will have to be approved by the user. <a href=\"https://mjtsai.com/blog/2018/06/28/apple-event-sandboxing-in-macos-mojave-lacks-essential-apis/\" rel=\"nofollow noreferrer\">https://mjtsai.com/blog/2018/06/28/apple-event-sandboxing-in-macos-mojave-lacks-essential-apis/</a></p>\n"}], "owner": {"reputation": 311, "user_id": 8725843, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/00d06af37cd925e017101e0f042e3efb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8725843/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531956932, "creation_date": 1531954032, "question_id": 51412000, "link": "https://stackoverflow.com/questions/51412000/running-applescript-inside-of-python-script", "title": "Running AppleScript inside of Python script", "body": "<p>I'm trying to run the AppleScript inside of my Python script but it does not work. When I run the same AppleScript in the AppleScriptEditor it works perfectly!</p>\n\n<p>This is my code:</p>\n\n<pre><code>script = '''\n            tell application \"System Events\"\n                set position of first window of application process \"%(app)s\" to {100, 100}\n            end tell\n            ''' % {'app': app}\n\n        print(script)\n\n        p = Popen(['osascript', '-'], stdin=PIPE, stdout=PIPE, stderr=PIPE, universal_newlines=True)\n        stdout, stderr = p.communicate(script)\n</code></pre>\n\n<p>I'm printing the script and eveything is correct</p>\n\n<pre><code>tell application \"System Events\"\n                set position of first window of application process \"Terminal\" to {100, 100}\n            end tell\n</code></pre>\n\n<p>but I do not know why it does not move the Terminal window. Any idea?</p>\n"}, {"tags": ["python", "google-drive-api"], "comments": [{"owner": {"reputation": 15264, "user_id": 6143482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MD37S.jpg?s=128&g=1", "display_name": "noogui", "link": "https://stackoverflow.com/users/6143482/noogui"}, "edited": false, "score": 0, "creation_date": 1531973928, "post_id": 51411985, "comment_id": 89799843, "body": "possible duplicate of <a href=\"https://stackoverflow.com/questions/15202163/\">stackoverflow.com/questions/15202163</a>. &#39;alternateLink&#39; is now <a href=\"https://stackoverflow.com/questions/15202163/get-shared-link-through-google-drive-api\">&#39;webViewLink&#39;</a>"}, {"owner": {"reputation": 8677, "user_id": 9337071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e52afdb783a619060eb2b0c0cb5766d3?s=128&d=identicon&r=PG&f=1", "display_name": "tehhowch", "link": "https://stackoverflow.com/users/9337071/tehhowch"}, "edited": false, "score": 0, "creation_date": 1532000978, "post_id": 51411985, "comment_id": 89814709, "body": "Google offers plenty of example code for popular languages. There is also documentation for the API as implemented in the client library - search for it with the additional term &quot;pydoc&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 3106, "user_id": 1844376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XPxhs.jpg?s=128&g=1", "display_name": "ScottMcC", "link": "https://stackoverflow.com/users/1844376/scottmcc"}, "is_accepted": true, "score": 0, "last_activity_date": 1531994502, "last_edit_date": 1531994502, "creation_date": 1531993889, "answer_id": 51419508, "question_id": 51411985, "link": "https://stackoverflow.com/questions/51411985/sharing-files-in-google-drive-using-python/51419508#51419508", "title": "Sharing files in Google Drive using Python", "body": "<p>Looks like you've got the correct format as per <a href=\"https://developers.google.com/drive/api/v3/reference/permissions/create\" rel=\"nofollow noreferrer\">Permissions:Create</a></p>\n\n<p>Perhaps you just need to add <code>.execute()</code> on the end?</p>\n\n<pre><code>service.permissions().create(body={\"role\":\"reader\", \"type\":\"anyone\"}, fileId=selected_id).execute()\n</code></pre>\n\n<p>Also is you're looking for examples using the Python API check out the following repository:\n<a href=\"https://github.com/gsuitedevs/python-samples\" rel=\"nofollow noreferrer\">https://github.com/gsuitedevs/python-samples</a></p>\n\n<p>I would image that you're code might look like something similar to this:\n<a href=\"https://github.com/gsuitedevs/python-samples/blob/master/drive/driveapp/main.py#L57\" rel=\"nofollow noreferrer\">https://github.com/gsuitedevs/python-samples/blob/master/drive/driveapp/main.py#L57</a></p>\n"}], "owner": {"reputation": 3, "user_id": 8082684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a0e30d79b41ac8fde1cbccf1981a0d7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Aquila", "link": "https://stackoverflow.com/users/8082684/alex-aquila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2535, "favorite_count": 0, "accepted_answer_id": 51419508, "answer_count": 1, "score": 0, "last_activity_date": 1531994502, "creation_date": 1531953934, "question_id": 51411985, "link": "https://stackoverflow.com/questions/51411985/sharing-files-in-google-drive-using-python", "title": "Sharing files in Google Drive using Python", "body": "<p>There are plenty of resources involving sharing files in Google Drive but I can't find anything useful to Python and the references by Google aren't Python-specific.</p>\n\n<p>I've saved an item ID into the variable selected_id. In this case, I want to make that file shareable by URL to anyone for reading.</p>\n\n<pre><code>service.permissions().create(body={\"role\":\"reader\", \"type\":\"anyone\"}, fileId=selected_id)\n</code></pre>\n\n<p>This is what I have so far but I don't think I formatted it correctly at all.</p>\n\n<p>Like the title states, how would I share a file by ID on GDrive using Python? Thanks in advance.</p>\n"}, {"tags": ["python", "python-3.x", "python-3.5"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1531954140, "post_id": 51411981, "comment_id": 89795607, "body": "It is, but not in a way that&#39;s documented or guaranteed to exist a year from now."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1531954172, "post_id": 51411981, "comment_id": 89795614, "body": "Runtime use of <code>typing</code> is in a pretty bad place right now."}], "answers": [{"comments": [{"owner": {"reputation": 919, "user_id": 2856379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746d93df047f23136bc2d864dc52ff1e?s=128&d=identicon&r=PG", "display_name": "nelfin", "link": "https://stackoverflow.com/users/2856379/nelfin"}, "edited": false, "score": 2, "creation_date": 1531955395, "post_id": 51412128, "comment_id": 89795949, "body": "<code>Union[int, bool]</code> is <code>int</code> since <code>bool</code> is a subclass of <code>int</code> (see <code>issubclass(bool, int)</code> and <code>help(bool)</code>"}], "tags": [], "owner": {"reputation": 3031, "user_id": 576488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6394f70dd009d4d16bb2c969c82c2ff1?s=128&d=identicon&r=PG", "display_name": "SBSTP", "link": "https://stackoverflow.com/users/576488/sbstp"}, "is_accepted": true, "score": 1, "last_activity_date": 1531954970, "creation_date": 1531954970, "answer_id": 51412128, "question_id": 51411981, "link": "https://stackoverflow.com/questions/51411981/is-it-possible-to-get-the-type-paramater-of-a-typing-list-at-runtime/51412128#51412128", "title": "Is it possible to get the type paramater of a typing.List at runtime?", "body": "<p>I did some digging, and while not documented or official, using <code>__args__</code> works.</p>\n\n<pre><code>&gt;&gt;&gt; Union[str, bool].__args__\n(&lt;class 'str'&gt;, &lt;class 'bool'&gt;)\n&gt;&gt;&gt; List[str].__args__\n(&lt;class 'str'&gt;,)\n</code></pre>\n\n<p>For some reason the union of an int and a bool is just an int, I don't dare dig any further in the mess that this module is.</p>\n\n<pre><code>&gt;&gt;&gt; Union[int, bool]\n&lt;class 'int'&gt;\n&gt;&gt;&gt; Union[bool, int]\n&lt;class 'int'&gt;\n</code></pre>\n"}], "owner": {"reputation": 3031, "user_id": 576488, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6394f70dd009d4d16bb2c969c82c2ff1?s=128&d=identicon&r=PG", "display_name": "SBSTP", "link": "https://stackoverflow.com/users/576488/sbstp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 51412128, "answer_count": 1, "score": -1, "last_activity_date": 1531954970, "creation_date": 1531953913, "question_id": 51411981, "link": "https://stackoverflow.com/questions/51411981/is-it-possible-to-get-the-type-paramater-of-a-typing-list-at-runtime", "title": "Is it possible to get the type paramater of a typing.List at runtime?", "body": "<p>Say I have a <code>typing.List[str]</code> object, is it possible to get the type parameter from the type hint object at runtime? I want a field or method that would return the <code>str</code> class essentially.</p>\n"}, {"tags": ["java", "python", "netbeans"], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 10012077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HwoS8PZzuH0/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0WxF2IEcSk-qgGNjtfDhBkYEugxw/mo/photo.jpg?sz=128", "display_name": "Jiasheng Qin", "link": "https://stackoverflow.com/users/10012077/jiasheng-qin"}, "is_accepted": true, "score": 0, "last_activity_date": 1531961715, "creation_date": 1531961715, "answer_id": 51412851, "question_id": 51411980, "link": "https://stackoverflow.com/questions/51411980/executing-python-script-from-netbeans-and-reading-output-fails-in-one-case-but/51412851#51412851", "title": "Executing python script from Netbeans and reading output, FAILS in one case but not another", "body": "<p>So...</p>\n\n<p><a href=\"https://stackoverflow.com/questions/161859/using-quotes-within-getruntime-exec\">Using Quotes within getRuntime().exec</a></p>\n\n<p>Apparently this is a thing. I just made every word in the command an array element instead, and inside the array, \"show bgp scale\" was entered without the quotes. After that, it worked.</p>\n"}], "owner": {"reputation": 55, "user_id": 10012077, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HwoS8PZzuH0/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq0WxF2IEcSk-qgGNjtfDhBkYEugxw/mo/photo.jpg?sz=128", "display_name": "Jiasheng Qin", "link": "https://stackoverflow.com/users/10012077/jiasheng-qin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 51412851, "answer_count": 1, "score": 0, "last_activity_date": 1531961715, "creation_date": 1531953912, "last_edit_date": 1531958066, "question_id": 51411980, "link": "https://stackoverflow.com/questions/51411980/executing-python-script-from-netbeans-and-reading-output-fails-in-one-case-but", "title": "Executing python script from Netbeans and reading output, FAILS in one case but not another", "body": "<p>I am currently heeding advice from this Stack Overflow post:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/10097491/call-and-receive-output-from-python-script-in-java\">Call and receive output from Python script in Java?</a>  (which links to <a href=\"http://www.devdaily.com/java/edu/pj/pj010016\" rel=\"nofollow noreferrer\">http://www.devdaily.com/java/edu/pj/pj010016</a> for getting the output)</p>\n\n<p>So, that's great and all, and I used it for the following code successfully:</p>\n\n<pre><code>        String directPath;\n        if (Files.exists(Paths.get(\"C:/Users/jiaqin/Documents/NetBeansProjects/NCHandler/nchandlerv2/NCPythonFiles/\"))) {\n            directPath = \"C:/Users/jiaqin/Documents/NetBeansProjects/NCHandler/nchandlerv2/NCPythonFiles/\";\n        }\n        else {\n            directPath = \"/home/lab/testNetconf/NCPythonFiles/net_back_end/\";\n        }\n\n        Process p = Runtime.getRuntime().exec(\"python \" + directPath + \"get_platform_and_OS.py -ssh_ip \" + ui.ssh_ip\n        + \" -username \" + ui.username + \" -password \" + ui.password);\n        Scanner threeInfo = new Scanner(p.getInputStream());\n\n\n        String hostName = \"\";\n        String IP_Address = ui.ssh_ip;\n        String OS = \"\";\n        String platform = \"\";\n\n        int iter = 0;\n        while (threeInfo.hasNextLine()) {\n            switch(iter) {\n                case 0:\n                    hostName = threeInfo.nextLine();\n                    break;\n                case 1:\n                    OS = threeInfo.nextLine();\n                    break;\n                case 2:\n                    platform = threeInfo.nextLine();\n                    break;\n                default:\n                    break;\n            }\n            iter ++;\n        }\n\n        threeInfo.close();\n\n        Label hostNameLabel = new Label(hostName);\n        Label sshLabel = new Label(\"SSH IP Address: \" + IP_Address);\n        Label OSLabel = new Label(OS);\n        Label platformLabel = new Label(platform);\n</code></pre>\n\n<p>Essentially, I run a python script by determining its path first, then I read the output using a Scanner (instead of a BufferedReader like in the post). Based on that case, I have a later method that uses the exact same concept:</p>\n\n<pre><code>public static String verifyShowCommands(String[] showCommands, MainUI ui) {\n    try {\n        String errorText = \"\";\n\n        String retErrors = \"\";\n\n        System.out.println(\"Python exec command is:\\n\" + \"python /home/lab/testNetconf/NCPythonFiles/net_back_end/verify_show_commands.py -ssh_ip \" + ui.ssh_ip + \" -username \" \n                + ui.username + \" -password \" + ui.password + \" -show_commands \\\"\" + String.join(\", \", showCommands) + \"\\\"\");\n\n        Process p = Runtime.getRuntime().exec(\"python /home/lab/testNetconf/NCPythonFiles/net_back_end/verify_show_commands.py -ssh_ip \" + ui.ssh_ip + \" -username \" \n                + ui.username + \" -password \" + ui.password + \" -show_commands \\\"\" + String.join(\", \", showCommands) + \"\\\"\");\n        BufferedReader obtainedInfo = new BufferedReader(new InputStreamReader(p.getInputStream()));\n        String read = null;\n        while ((read = obtainedInfo.readLine()) != null) {\n            System.out.println(\"New line found\");\n            retErrors += read;\n        }\n        System.out.println(\"Obtained Info is:\" + retErrors + \" and that's it\");\n        obtainedInfo.close();\n        for (int i = 0; i &lt; showCommands.length; i ++) {\n            if (i &lt; showCommands.length - 1) {\n                int thisSCStart = retErrors.indexOf(showCommands[i]);\n                int nextSCStart = retErrors.indexOf(showCommands[i+1]);\n                String outputSC = retErrors.substring(thisSCStart, nextSCStart);\n                if (outputSC.contains(\"'Valid': 'No'\")) {\n                    errorText += outputSC + \"\\n\";\n                }\n            }\n            else {\n                String outputSC = retErrors.substring(retErrors.indexOf(showCommands[i]));\n                if (outputSC.contains(\"'Valid': 'No'\")) {\n                    errorText += outputSC + \"\\n\";\n                }\n            }\n        }\n        return errorText;\n    }\n    catch (IOException e) {\n        return null;\n    }\n}\n</code></pre>\n\n<p>As you can see, I'm once again running a python script and reading the output. The error occurs when I attempt to get the substring of retErrors - because retErrors is an empty string; that's right, for some reason, this time the output is NOT getting read. Note that the above uses BufferedReader; I was originally using Scanner, and when that failed I changed over because I thought maybe for god-knows-what reason, synchronization might affect the situation. Unfortunately, it seemed there was STILL no output to read.</p>\n\n<p>As for how I know, I simply observed in the Netbeans output and searched for the line</p>\n\n<pre><code>System.out.println(\"Obtained Info is:\" + retErrors + \" and that's it\");\n</code></pre>\n\n<p>Then, you might ask the obvious question: what if the command is invalid? Well, I printed out the entire exec command at the top as well:</p>\n\n<pre><code>        System.out.println(\"Python exec command is:\\n\" + \"python /home/lab/testNetconf/NCPythonFiles/net_back_end/verify_show_commands.py -ssh_ip \" + ui.ssh_ip + \" -username \" \n                + ui.username + \" -password \" + ui.password + \" -show_commands \\\"\" + String.join(\", \", showCommands) + \"\\\"\");\n</code></pre>\n\n<p>So, I looked for that line in the Netbeans output, and there it was:</p>\n\n<pre><code>Info:   Python exec command is:\npython /home/lab/testNetconf/NCPythonFiles/net_back_end/verify_show_commands.py -ssh_ip 9.0.0.12 -username root -password lab -show_commands \"show bgp scale\"\n</code></pre>\n\n<p>And then I copy-pasted that exact command into a terminal and ran it, and I got an output (the actual type of the printed result in the output is a dictionary, hence the brackets):</p>\n\n<p><a href=\"https://i.stack.imgur.com/lmhCw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lmhCw.png\" alt=\"enter image description here\"></a></p>\n\n<p>Anyone have some advice? This is extraordinarily frustrating to me because I'm following the exact format of the first case with get_platform_and_os.py but then with verify_show_commands.py, it just doesn't read anything.</p>\n\n<p>As a side note, if this information helps, when I run the command manually in the terminal, it takes roughly 2-3 seconds to complete. However, running it in my project takes much less than a second before it errors out.</p>\n"}, {"tags": ["python", "pandas", "datetime", "dataframe"], "comments": [{"owner": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 0, "creation_date": 1531955221, "post_id": 51411971, "comment_id": 89795902, "body": "Could you iterate through something like: <code>range(0, df[&#39;Time (sec)&#39;].max(), 200)</code>?"}, {"owner": {"reputation": 838, "user_id": 3901029, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pyayF.jpg?s=128&g=1", "display_name": "Forever", "link": "https://stackoverflow.com/users/3901029/forever"}, "reply_to_user": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 0, "creation_date": 1531962742, "post_id": 51411971, "comment_id": 89797534, "body": "@pshep123 yes i could... I&#39;ve actually implemented the said features by manipulations in the original numpy array. Yet after realizing what panda can do, i thought my data is a perfect candidate to use panda because it&#39;s nicely structured and has a time index, so I decided to give it a try. I thought it&#39;d be a piece of cake..."}], "answers": [{"comments": [{"owner": {"reputation": 838, "user_id": 3901029, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pyayF.jpg?s=128&g=1", "display_name": "Forever", "link": "https://stackoverflow.com/users/3901029/forever"}, "edited": false, "score": 0, "creation_date": 1532012119, "post_id": 51413311, "comment_id": 89822644, "body": "Ah ha! I didn&#39;t know this trick <code>df[df.Time.between(100,200)]</code>. This is my first time using pandas. Thanks! Your answer is very nicely presented."}], "tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 2, "last_activity_date": 1531965999, "last_edit_date": 1531965999, "creation_date": 1531965682, "answer_id": 51413311, "question_id": 51411971, "link": "https://stackoverflow.com/questions/51411971/select-a-time-range-in-dataframe-without-date/51413311#51413311", "title": "Select a time range in DataFrame without date", "body": "<p>I don't see why you need to use <code>datetime64</code> objects for this. Your time column is an number, so you can very easily select time intervals with inequalities. You can also plot the columns without issue. </p>\n\n<h2>Sample Data</h2>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nnp.random.seed(123)\ndf = pd.DataFrame({'Time': np.arange(0,1200,0.01),\n                   'Col_A': np.random.randint(1,100,120000),\n                   'Col_B': np.random.randint(1,10,120000)})\n</code></pre>\n\n<hr>\n\n<h3>Select Data between 100 and 200 seconds.</h3>\n\n<pre><code>df[df.Time.between(100,200)]\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>         Time  Col_A  Col_B\n10000  100.00     75      9\n10001  100.01     23      7\n...\n19999  199.99     39      7\n20000  200.00     25      2\n</code></pre>\n\n<hr>\n\n<h3>Plotting against time</h3>\n\n<pre><code>#First 100 rows just for illustration\ndf[0:100].plot(x='Time')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qQkZi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qQkZi.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<h3>Convert to <code>timedelta64</code></h3>\n\n<p>If you really wanted to, you could convert the column to a <code>timedelta64[ns]</code></p>\n\n<pre><code>df['Time'] = pd.to_datetime(df.Time, unit='s') - pd.to_datetime('1970-01-01')\n\nprint(df.head())\n#             Time  Col_A  Col_B\n#0        00:00:00     67      6\n#1 00:00:00.010000     93      1\n#2 00:00:00.020000     99      3\n#3 00:00:00.030000     18      2\n#4 00:00:00.040000     84      3\n\ndf.dtypes\n#Time     timedelta64[ns]\n#Col_A              int32\n#Col_B              int32\n#dtype: object\n</code></pre>\n"}], "owner": {"reputation": 838, "user_id": 3901029, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pyayF.jpg?s=128&g=1", "display_name": "Forever", "link": "https://stackoverflow.com/users/3901029/forever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 1, "accepted_answer_id": 51413311, "answer_count": 1, "score": 2, "last_activity_date": 1531965999, "creation_date": 1531953789, "question_id": 51411971, "link": "https://stackoverflow.com/questions/51411971/select-a-time-range-in-dataframe-without-date", "title": "Select a time range in DataFrame without date", "body": "<p>I'm using/learning <code>Pandas</code> to load a csv style dataset where I have a time column that can be used as index. The data is sampled roughly at 100Hz. Here is a simplified snippet of the data:</p>\n\n<p><code>Time (sec)  Col_A   Col_B   Col_C\n0.0100      14.175  -29.97  -22.68 \n0.0200      13.905  -29.835 -22.68\n0.0300      12.257  -29.32  -22.67\n... ...\n1259.98     -0.405   2.205   3.825\n1259.99     -0.495   2.115   3.735</code></p>\n\n<p>There are 20 min of data, resulting in about 120,000 rows at 100 Hz. My goal is to select those rows within a certain time range, say 100-200 sec.</p>\n\n<p>Here is what I've figured out</p>\n\n<pre><code>import panda as pd\ndf = pd.DataFrame(my_data)                    # my_data is a numpy array\ndf.set_index(0, inplace=True)\ndf.columns = ['Col_A', 'Col_B', 'Col_C']\ndf.index = pd.to_datetime(df.index, unit='s', origin='1900-1-1')  # the date in origin is just a space-holder\n</code></pre>\n\n<p>My dataset doesn't include the date. How to avoid setting a fake date like I did above? It feels wrong, and also is quite annoying when I plot the data against time.</p>\n\n<p>I know there are ways to remove date from the datatime object like <a href=\"https://stackoverflow.com/questions/24567078/how-to-remove-the-date-information-in-a-column-just-keep-time\">here</a>.\nBut my goal is to select some rows that are in a certain time range, which means I need to use <code>pd.date_range()</code>. This function does not seem to work without date.</p>\n\n<p>It's not the end of the world if I just use a fake date throughout my project. But I'd like to know if there are more elegant ways around it. </p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1531953791, "post_id": 51411950, "comment_id": 89795517, "body": "That doesn&#39;t sound like a problem with your <code>enum34</code> install. That sounds like you&#39;re looking at some object that isn&#39;t the <code>enum</code> module. Your code is probably broken."}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 0, "creation_date": 1531953862, "post_id": 51411950, "comment_id": 89795533, "body": "Similar: <a href=\"https://stackoverflow.com/questions/43124775/why-python-3-6-1-throws-attributeerror-module-enum-has-no-attribute-intflag\" title=\"why python 3 6 1 throws attributeerror module enum has no attribute intflag\">stackoverflow.com/questions/43124775/&hellip;</a>"}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 0, "creation_date": 1531953880, "post_id": 51411950, "comment_id": 89795536, "body": "<code>IntFlag</code> is indeed missing from <code>enum43</code>. Check the source yourself: <a href=\"https://bitbucket.org/stoneleaf/enum34/src/default/enum/__init__.py\" rel=\"nofollow noreferrer\">bitbucket.org/stoneleaf/enum34/src/default/enum/__init__.py</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1531954030, "post_id": 51411950, "comment_id": 89795583, "body": "Oh, and yeah, <code>enum34</code> doesn&#39;t have <code>IntFlag</code>, so there&#39;s that too. Even with <code>enum34</code> installed, though, you would have gotten a different error message if you really were accessing an attribute on the <code>enum</code> module."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 3732380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XNzpA.jpg?s=128&g=1", "display_name": "Michael Szer", "link": "https://stackoverflow.com/users/3732380/michael-szer"}, "edited": false, "score": 0, "creation_date": 1532017356, "post_id": 51412025, "comment_id": 89826404, "body": "Do you know how I can upgrade enum? I know this sounds stupid but I have been searching and can&#39;t find anything useful."}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "reply_to_user": {"reputation": 67, "user_id": 3732380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XNzpA.jpg?s=128&g=1", "display_name": "Michael Szer", "link": "https://stackoverflow.com/users/3732380/michael-szer"}, "edited": false, "score": 1, "creation_date": 1532017638, "post_id": 51412025, "comment_id": 89826554, "body": "As I recommend at the bottom of my answer just make your own enum module in your package using its source and use that instead."}], "tags": [], "owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "is_accepted": true, "score": 1, "last_activity_date": 1531954686, "last_edit_date": 1531954686, "creation_date": 1531954216, "answer_id": 51412025, "question_id": 51411950, "link": "https://stackoverflow.com/questions/51411950/enum34-is-not-installed-correctly-python-2-7/51412025#51412025", "title": "enum34 is not installed correctly - Python 2.7", "body": "<p>If you look at the docs for <a href=\"https://docs.python.org/3.4/library/enum.html#enum.IntEnum\" rel=\"nofollow noreferrer\">3.4 <code>enum</code></a>, you'll see that <code>IntFlag</code> is not there. That is because it was <a href=\"https://docs.python.org/3.6/library/enum.html#enum.IntFlag\" rel=\"nofollow noreferrer\">added in 3.6</a>.</p>\n\n<p>So the error you are seeing is indeed correct and not a problem with your <code>enum34</code> installation.</p>\n\n<p>It also looks like the <code>enum</code> package in pypi also doesn't have <code>IntFlag</code>.</p>\n\n<p>You can monkey patch this pretty easily though by copying the source for <a href=\"https://github.com/python/cpython/blob/296e5720921f1837dfd09a16457ac5bba7cb1676/Lib/enum.py#L781\" rel=\"nofollow noreferrer\"><code>IntFlag</code> into a module in your project</a>:</p>\n\n<pre><code>from enum import Enum\n\nclass Flag(Enum):\n    \"\"\"Support for flags\"\"\"\n\n    def _generate_next_value_(name, start, count, last_values):\n        \"\"\"\n        Generate the next value when not given.\n        name: the name of the member\n        start: the initital start value or None\n        count: the number of existing members\n        last_value: the last value assigned or None\n        \"\"\"\n        if not count:\n            return start if start is not None else 1\n        for last_value in reversed(last_values):\n            try:\n                high_bit = _high_bit(last_value)\n                break\n            except Exception:\n                raise TypeError('Invalid Flag value: %r' % last_value) from None\n        return 2 ** (high_bit+1)\n\n    @classmethod\n    def _missing_(cls, value):\n        original_value = value\n        if value &lt; 0:\n            value = ~value\n        possible_member = cls._create_pseudo_member_(value)\n        if original_value &lt; 0:\n            possible_member = ~possible_member\n        return possible_member\n\n    @classmethod\n    def _create_pseudo_member_(cls, value):\n        \"\"\"\n        Create a composite member iff value contains only members.\n        \"\"\"\n        pseudo_member = cls._value2member_map_.get(value, None)\n        if pseudo_member is None:\n            # verify all bits are accounted for\n            _, extra_flags = _decompose(cls, value)\n            if extra_flags:\n                raise ValueError(\"%r is not a valid %s\" % (value, cls.__name__))\n            # construct a singleton enum pseudo-member\n            pseudo_member = object.__new__(cls)\n            pseudo_member._name_ = None\n            pseudo_member._value_ = value\n            # use setdefault in case another thread already created a composite\n            # with this value\n            pseudo_member = cls._value2member_map_.setdefault(value, pseudo_member)\n        return pseudo_member\n\n    def __contains__(self, other):\n        if not isinstance(other, self.__class__):\n            import warnings\n            warnings.warn(\n                    \"using non-Flags in containment checks will raise \"\n                    \"TypeError in Python 3.8\",\n                    DeprecationWarning, 2)\n            return False\n        return other._value_ &amp; self._value_ == other._value_\n\n    def __repr__(self):\n        cls = self.__class__\n        if self._name_ is not None:\n            return '&lt;%s.%s: %r&gt;' % (cls.__name__, self._name_, self._value_)\n        members, uncovered = _decompose(cls, self._value_)\n        return '&lt;%s.%s: %r&gt;' % (\n                cls.__name__,\n                '|'.join([str(m._name_ or m._value_) for m in members]),\n                self._value_,\n                )\n\n    def __str__(self):\n        cls = self.__class__\n        if self._name_ is not None:\n            return '%s.%s' % (cls.__name__, self._name_)\n        members, uncovered = _decompose(cls, self._value_)\n        if len(members) == 1 and members[0]._name_ is None:\n            return '%s.%r' % (cls.__name__, members[0]._value_)\n        else:\n            return '%s.%s' % (\n                    cls.__name__,\n                    '|'.join([str(m._name_ or m._value_) for m in members]),\n                    )\n\n    def __bool__(self):\n        return bool(self._value_)\n\n    def __or__(self, other):\n        if not isinstance(other, self.__class__):\n            return NotImplemented\n        return self.__class__(self._value_ | other._value_)\n\n    def __and__(self, other):\n        if not isinstance(other, self.__class__):\n            return NotImplemented\n        return self.__class__(self._value_ &amp; other._value_)\n\n    def __xor__(self, other):\n        if not isinstance(other, self.__class__):\n            return NotImplemented\n        return self.__class__(self._value_ ^ other._value_)\n\n    def __invert__(self):\n        members, uncovered = _decompose(self.__class__, self._value_)\n        inverted = self.__class__(0)\n        for m in self.__class__:\n            if m not in members and not (m._value_ &amp; self._value_):\n                inverted = inverted | m\n        return self.__class__(inverted)\n\n\nclass IntFlag(int, Flag):\n    \"\"\"Support for integer-based Flags\"\"\"\n\n    @classmethod\n    def _missing_(cls, value):\n        if not isinstance(value, int):\n            raise ValueError(\"%r is not a valid %s\" % (value, cls.__name__))\n        new_member = cls._create_pseudo_member_(value)\n        return new_member\n\n    @classmethod\n    def _create_pseudo_member_(cls, value):\n        pseudo_member = cls._value2member_map_.get(value, None)\n        if pseudo_member is None:\n            need_to_create = [value]\n            # get unaccounted for bits\n            _, extra_flags = _decompose(cls, value)\n            # timer = 10\n            while extra_flags:\n                # timer -= 1\n                bit = _high_bit(extra_flags)\n                flag_value = 2 ** bit\n                if (flag_value not in cls._value2member_map_ and\n                        flag_value not in need_to_create\n                        ):\n                    need_to_create.append(flag_value)\n                if extra_flags == -flag_value:\n                    extra_flags = 0\n                else:\n                    extra_flags ^= flag_value\n            for value in reversed(need_to_create):\n                # construct singleton pseudo-members\n                pseudo_member = int.__new__(cls, value)\n                pseudo_member._name_ = None\n                pseudo_member._value_ = value\n                # use setdefault in case another thread already created a composite\n                # with this value\n                pseudo_member = cls._value2member_map_.setdefault(value, pseudo_member)\n        return pseudo_member\n\n    def __or__(self, other):\n        if not isinstance(other, (self.__class__, int)):\n            return NotImplemented\n        result = self.__class__(self._value_ | self.__class__(other)._value_)\n        return result\n\n    def __and__(self, other):\n        if not isinstance(other, (self.__class__, int)):\n            return NotImplemented\n        return self.__class__(self._value_ &amp; self.__class__(other)._value_)\n\n    def __xor__(self, other):\n        if not isinstance(other, (self.__class__, int)):\n            return NotImplemented\n        return self.__class__(self._value_ ^ self.__class__(other)._value_)\n\n    __ror__ = __or__\n    __rand__ = __and__\n    __rxor__ = __xor__\n\n    def __invert__(self):\n        result = self.__class__(~self._value_)\n        return result\n\n\ndef _high_bit(value):\n    \"\"\"returns index of highest bit, or -1 if value is zero or negative\"\"\"\n    return value.bit_length() - 1\n\ndef unique(enumeration):\n    \"\"\"Class decorator for enumerations ensuring unique member values.\"\"\"\n    duplicates = []\n    for name, member in enumeration.__members__.items():\n        if name != member.name:\n            duplicates.append((name, member.name))\n    if duplicates:\n        alias_details = ', '.join(\n                [\"%s -&gt; %s\" % (alias, name) for (alias, name) in duplicates])\n        raise ValueError('duplicate values found in %r: %s' %\n                (enumeration, alias_details))\n    return enumeration\n\ndef _decompose(flag, value):\n    \"\"\"Extract all members from the value.\"\"\"\n    # _decompose is only called if the value is not named\n    not_covered = value\n    negative = value &lt; 0\n    # issue29167: wrap accesses to _value2member_map_ in a list to avoid race\n    #             conditions between iterating over it and having more pseudo-\n    #             members added to it\n    if negative:\n        # only check for named flags\n        flags_to_check = [\n                (m, v)\n                for v, m in list(flag._value2member_map_.items())\n                if m.name is not None\n                ]\n    else:\n        # check for named flags and powers-of-two flags\n        flags_to_check = [\n                (m, v)\n                for v, m in list(flag._value2member_map_.items())\n                if m.name is not None or _power_of_two(v)\n                ]\n    members = []\n    for member, member_value in flags_to_check:\n        if member_value and member_value &amp; value == member_value:\n            members.append(member)\n            not_covered &amp;= ~member_value\n    if not members and value in flag._value2member_map_:\n        members.append(flag._value2member_map_[value])\n    members.sort(key=lambda m: m._value_, reverse=True)\n    if len(members) &gt; 1 and members[0].value == value:\n        # we have the breakdown, don't need the value member itself\n        members.pop(0)\n    return members, not_covered\n\ndef _power_of_two(value):\n    if value &lt; 1:\n        return False\nreturn value == 2 ** _high_bit(value)\n</code></pre>\n\n<p>Although, you're probably just better off copying the whole module into your own module (so that you aren't depending on undocumented under methods).</p>\n\n<p>Further as @user2357112 mentioned, the error you're seeing indicates that you've probably overwritten the enum module in your code accidentally. Just to be clear, something like this will break, because you've assigned the name <code>sys</code> some other value than the module you imported:</p>\n\n<pre><code>import sys\n\nsys = 1 # doesn't have to be 1, can be anything that's not sys\n\n# sys is no longer the module you imported, this will fail\nsys.stdout.write('hello world!\\n')\n</code></pre>\n\n<p>I suspect in your code you're probably doing something like this:</p>\n\n<pre><code>import enum\n\nclass Foo(enum.Enum):\n    BAR = 1\n\nenum = Foo.Bar # or something like this\n\nclass Baz(enum.Enum):  # failure happens here, enum is now Foo.Bar\n    pass\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 3732380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XNzpA.jpg?s=128&g=1", "display_name": "Michael Szer", "link": "https://stackoverflow.com/users/3732380/michael-szer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1776, "favorite_count": 0, "accepted_answer_id": 51412025, "answer_count": 1, "score": 0, "last_activity_date": 1531954686, "creation_date": 1531953649, "question_id": 51411950, "link": "https://stackoverflow.com/questions/51411950/enum34-is-not-installed-correctly-python-2-7", "title": "enum34 is not installed correctly - Python 2.7", "body": "<p>Running the command <code>pip2.7 show enum34</code> outputs the version and where is installed correctly: </p>\n\n<pre><code>Name: enum34\nVersion: 1.1.2\nSummary: Python 3.4 Enum backported to 3.3, 3.2, 3.1, 2.7, 2.6, 2.5, and 2.4\nHome-page: https://pypi.python.org/pypi/enum34\nAuthor: Ethan Furman\nAuthor-email: ethan@stoneleaf.us\nLicense: BSD License\nLocation: /usr/lib/python2.7/dist-packages\nRequires: \nRequired-by: \n</code></pre>\n\n<p>Nevertheless I am having the following error with <code>enum</code>:</p>\n\n<pre><code>AttributeError: 'enum' object has no attribute 'IntFlag'\n</code></pre>\n\n<p>This error happens when you dont have <code>enum34</code> installed in <code>python 2.7</code>, but it is already installed.</p>\n\n<p>I can import <code>enum</code> and running <code>enum.__file__</code> outputs the path: </p>\n\n<pre><code>/usr/lib/python2.7/dist-packages/enum/__init__.pyc\n</code></pre>\n\n<ul>\n<li>Why is <code>IntFlag</code> missing in <code>enum</code> if <code>enum34</code> is installed?</li>\n</ul>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1531959862, "post_id": 51411892, "comment_id": 89796967, "body": "Include the code as text, not images."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 1, "creation_date": 1531960080, "post_id": 51411892, "comment_id": 89797017, "body": "there&#39;s a squiggly line making it hard to read what&#39;s on the line <code>exclude = ...</code> Is it <code>exclude = (&#39;_created__&#39;)</code> ? What are the parentheses and the underscores for? Is it supposed to be <code>exclude = (&#39;created&#39;,)</code> ? The comma is required in a single item tuple. If there&#39;s no comma the parenthesis will be parsed as a grouping operator."}], "owner": {"reputation": 549, "user_id": 371649, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/f743b00f75a5ad6ed6f7726175192225?s=128&d=identicon&r=PG", "display_name": "Axwack", "link": "https://stackoverflow.com/users/371649/axwack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531973417, "creation_date": 1531953257, "last_edit_date": 1531960333, "question_id": 51411892, "link": "https://stackoverflow.com/questions/51411892/modelserializer-in-django-rest-is-not-recognizing-model", "title": "ModelSerializer In Django Rest is not recognizing model", "body": "<p>I have created a Rest Model Serializer but the Django is not recognizing my model serializer. I can't determine what the issue is. Here is my code:\nHelp would be appreciated since my other models seem to be working.</p>\n\n<p>Serializer:</p>\n\n<pre><code>class BackgroundScheduleSerializer(serializers.ModelSerializer):\nclass Meta:\n    model = SavedSchedules\n    exclude = (\"_created__\")\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class SavedSchedules(models.Model):\nfromDate = models.DateTimeField(default=django.utils.timezone.now)\ntoDate = models.DateTimeField(default=django.utils.timezone.now)\nsummary = models.CharField(max_length=1000)\ncreated = models.DateTimeField(auto_now_add=True)\n</code></pre>\n\n<p>Output from Python. As you can see, the meta-data is not printed. [Note I did not crop the data at the bottom. There was nothing printed]\n[<img src=\"https://i.stack.imgur.com/nB0Us.png\" alt=\"This is output from the Django-REST Interpreter\">]<a href=\"https://i.stack.imgur.com/nB0Us.png\" rel=\"nofollow noreferrer\">3</a></p>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1531953221, "post_id": 51411878, "comment_id": 89795347, "body": "One of the &quot;a[5]&quot; is a typo?"}, {"owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1531953416, "post_id": 51411878, "comment_id": 89795399, "body": "Fixed, thanks. To whoever voted to close, would you mind giving feedback on how I can ask a better question instead?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1531953712, "post_id": 51411878, "comment_id": 89795489, "body": "Can you define explicitly <code>over the shortest period of time</code>? I&#39;m not sure how you get your result."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1531953968, "post_id": 51411878, "comment_id": 89795558, "body": "It is a close vote for being unclear. Consider explaining more about the rules which  allow to derive the shown desired output from the two input arrays. Also what is a &quot;kinda ordered list&quot;? How is the desired output &quot;finding elements&quot; in one? What relevance has the possibility to reorder on the same second time stamp? What relevance has the time value in b? In short, even if you cannot code it, you need to explain it in more detail."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1531954330, "post_id": 51411878, "comment_id": 89795650, "body": "Well, I believe the problem is clear.. The one thing I missed is: do <code>logs</code> in <code>A</code> have to be consecutive? (e.g. could you have a log <code>xyz</code> between <code>ghi</code> and <code>def</code> in <code>A</code>?)"}, {"owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1531954450, "post_id": 51411878, "comment_id": 89795678, "body": "@RafaelC They do not need to be consecutive."}], "answers": [{"tags": [], "owner": {"reputation": 477, "user_id": 5884789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vuKOc.png?s=128&g=1", "display_name": "jcp", "link": "https://stackoverflow.com/users/5884789/jcp"}, "is_accepted": false, "score": 1, "last_activity_date": 1531963552, "creation_date": 1531963552, "answer_id": 51413058, "question_id": 51411878, "link": "https://stackoverflow.com/questions/51411878/how-to-find-a-sequence-of-elements-in-an-only-kinda-ordered-list/51413058#51413058", "title": "How to find a sequence of elements in an (only kinda) ordered list", "body": "<p>If i understand the question correctly, this solution works for the example data provided. </p>\n\n<p>the overall approach is:</p>\n\n<ol>\n<li><p>find matches</p></li>\n<li><p>look for duplicates</p></li>\n<li><p>check if putting each duplicate back into the original matches reduces the time elapsed. </p></li>\n<li><p>repeat this until there are no duplicates and the time elapsed has reduced from the original list of matches. or until there are no more duplicates.</p></li>\n</ol>\n\n<p>Its a bit convoluted &amp; likely inefficient for larger problems but hopefully the comments help you in the right direction.</p>\n\n<p></p>\n\n<pre><code># -*- coding: UTF-8 -*-\n\n\nfrom collections import Counter\nimport copy\n\n\ndef drop_repeated_logs(list_of_dicts):\n    \"\"\"\n    drop the repeated text in logs and compute a new time range\n    if the new elapsed time range is lower, then return that list of dictionaries\n    \"\"\"\n    only_logs = [d['log'] for d in list_of_dicts]\n    original_range = list_of_dicts[-1]['time'] - list_of_dicts[0]['time']\n    counts = Counter(only_logs)\n    original_max_count = counts[max(counts,key=lambda i:counts[i])]\n    original_len = len(list_of_dicts)\n\n    print(counts)\n    for log_txt in only_logs:\n        num_occ = counts[log_txt]\n        if num_occ &gt; 1:\n            # list of matching log subsets without repeats\n            new_d = [entry for entry in list_of_dicts if entry['log']!=log_txt]\n            print new_d\n            # repeating log subset entries\n            entries_to_try = [entry for entry in list_of_dicts if entry['log']==log_txt]\n            print entries_to_try\n            for repeat in entries_to_try:\n                temp_d_list = copy.copy(new_d)\n                # add one of the repeated entries to the matches\n                temp_d_list.append(repeat)\n                newly_sorted = sorted(temp_d_list, key=lambda k:k[\"time\"])\n                # check what the new \"time elapsed\"\n                new_range = newly_sorted[-1]['time'] - newly_sorted[0]['time']\n                print \"Newly computed range of {}: {}\\n\".format(newly_sorted,new_range)\n                new_len = len(newly_sorted)\n\n                # we should return an updated list if the range is lower or we were able to get one repeated entry out\n                # see if the new time elapsed is an improvement from the original\n                if new_range &lt; original_range :\n                    print(\"Found a smaller range, returning: {}\".format(new_range))\n                    return (new_range,newly_sorted)\n            if new_range == original_range and new_len &lt; original_len:\n                print(\"The range is unchanged, but got rid of a duplicate log text\")\n                return (new_range,newly_sorted)\n\n    return original_range,list_of_dicts\n</code></pre>\n\n<h1>data example provided</h1>\n\n<pre><code>b = [{\"log\": \"abc\", 'time': 0},\n{'log': 'def', 'time': 1},\n{'log': 'ghi', 'time': 2}\n]\n\na = [\n    {'log': 'abc', 'time': 0},\n    {'log': '123', 'time': 1},\n    {'log': 'def', 'time': 2},\n    {'log': 'abc', 'time': 2},\n    {'log': 'ghi', 'time': 3},\n    {'log': 'def', 'time': 3}\n]\n</code></pre>\n\n<h1>only get the log text from the data provided</h1>\n\n<pre><code>a_logs = [d['log'] for d in a]\nb_logs = [d['log'] for d in b]\n</code></pre>\n\n<h1>find the intersection of two lists</h1>\n\n<pre><code>def intersection(a,b):\n    return list(set(a)&amp;set(b))\n</code></pre>\n\n<h1>the repeating logs between the a and b sets of data</h1>\n\n<pre><code>logs_of_interest = intersection(a_logs,b_logs)\n</code></pre>\n\n<h1>find all the entry in a that match with an entry in b</h1>\n\n<pre><code>matches_in_a = [entry for entry in a if entry['log'] in logs_of_interest]\n</code></pre>\n\n<h1>sort matched entries in order of time key</h1>\n\n<pre><code>sorted_matches = sorted(matches_in_a, key=lambda k: k['time']) \nprint(sorted_matches)\n</code></pre>\n\n<h1>find range of times (this is the parameter to minimize)</h1>\n\n<pre><code>rnge = sorted_matches[-1]['time']-sorted_matches[0]['time']\n\nsorted_logs = [d['log'] for d in sorted_matches]\n\nlog_counts = Counter(sorted_logs)\nmax_count = log_counts[max(log_counts,key=lambda i:log_counts[i])]\nprint \"max count: {}\".format(max_count)\n\n# intitialize a lower range to get the while loop going\nlower_range = rnge+1\n\nwhile lower_range &gt; rnge or max_count &gt; 1:\n    lower_range, sorted_matches = drop_repeated_logs(sorted_matches)\n    sorted_logs = [d['log'] for d in sorted_matches]\n    log_counts = Counter(sorted_logs)\n    print(\"log counts: {}\".format(log_counts))\n    max_count = log_counts[max(log_counts,key=lambda i:log_counts[i])]\n    print \"MAX COUNT: {}\".format(max_count)\n    print \"NEW LOWER RANGE: {}\".format(lower_range)\n\n\nprint(\"FINAL ANSWER: range: {}; {}\".format(lower_range,sorted_matches))\n</code></pre>\n\n<p></p>\n\n<h1>output</h1>\n\n<pre><code>&gt; [{'log': 'abc', 'time': 2}, {'log': 'ghi', 'time': 3}, {'log': 'def', 'time': 3}]\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "closed_date": 1531981965, "answer_count": 1, "score": -1, "last_activity_date": 1531963552, "creation_date": 1531953120, "last_edit_date": 1531954367, "question_id": 51411878, "link": "https://stackoverflow.com/questions/51411878/how-to-find-a-sequence-of-elements-in-an-only-kinda-ordered-list", "closed_reason": "Needs details or clarity", "title": "How to find a sequence of elements in an (only kinda) ordered list", "body": "<p>So I have a list of log entries, which looks somewhat like this:</p>\n\n<pre><code>a = [\n    {\u2018log\u2019: \u2018abc\u2019, \u2018time\u2019: 0},\n    {\u2018log\u2019: \u2018123\u2019, \u2018time\u2019: 1},\n    {\u2018log\u2019: \u2018def\u2019, \u2018time\u2019: 2},\n    {\u2018log\u2019: \u2018abc\u2019, \u2018time\u2019: 2},\n    {\u2018log\u2019: \u2018ghi\u2019, \u2018time\u2019: 3},\n    {\u2018log\u2019: \u2018def\u2019, \u2018time\u2019: 3}\n]\n</code></pre>\n\n<p>Where time is accurate to the second, but events marked as happening at the same time, may have occurred at any order relative to each other. For example, in the above list, <code>a[5]</code> may have happened chronologically before <code>a[4]</code>.</p>\n\n<p>Now say have a sequence of logs I want to match against <code>a</code>:</p>\n\n<pre><code>b = [\n    {\u2018log\u2019: \u2018abc\u2019, \u2018time\u2019: 0},\n    {\u2018log\u2019: \u2018def\u2019, \u2018time\u2019: 1},\n    {\u2018log\u2019: \u2018ghi\u2019, \u2018time\u2019: 2}\n]\n</code></pre>\n\n<p>I would hope to find the ordered sebset of <code>a</code> with the log entries from <code>b</code>, where <code>subset[0]['time']</code> is as close as possible to <code>subset[-1]['time']</code> (in other words, where the duration of time spanned by the subset is as small as possible):</p>\n\n<pre><code>&gt;&gt;&gt; f(a, b)\n[{\u2018log\u2019: \u2018abc\u2019, \u2018time\u2019: 2}, {\u2018log\u2019: \u2018ghi\u2019, \u2018time\u2019: 3}, {\u2018log\u2019: \u2018def\u2019, \u2018time\u2019: 3}]\n</code></pre>\n\n<p>EDIT for further clarification:</p>\n\n<p>If the subsets of <code>a</code>, which match <code>b</code> are:</p>\n\n<pre><code># a[0], a[4], a[5]\na1 = [\n    {\u2018log\u2019: \u2018abc\u2019, \u2018time\u2019: 0},\n    {\u2018log\u2019: \u2018ghi\u2019, \u2018time\u2019: 3},\n    {\u2018log\u2019: \u2018def\u2019, \u2018time\u2019: 3}\n]\n\n# a[3], a[4], a[5]\na2 = [\n    {\u2018log\u2019: \u2018abc\u2019, \u2018time\u2019: 2},\n    {\u2018log\u2019: \u2018ghi\u2019, \u2018time\u2019: 3},\n    {\u2018log\u2019: \u2018def\u2019, \u2018time\u2019: 3}\n]\n</code></pre>\n\n<p>Then the entries in <code>a1</code> occurred over a period of 3 seconds, and the entries in <code>a2</code> occurred over a period of 1 second. As the duration of the entries in <code>a2</code> is shorter than that of <code>a1</code>, I would hope to be returned <code>a2</code>.</p>\n"}, {"tags": ["python", "amazon-ec2", "ssh", "terminal"], "comments": [{"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 0, "creation_date": 1531964339, "post_id": 51411837, "comment_id": 89797861, "body": "<a href=\"https://stackoverflow.com/q/51398353/13317\">stackoverflow.com/q/51398353/13317</a>"}], "answers": [{"tags": [], "owner": {"reputation": 301, "user_id": 9110764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d1fd62ac9868d6a97fc870b347dc7d?s=128&d=identicon&r=PG", "display_name": "Tuxpilgrim", "link": "https://stackoverflow.com/users/9110764/tuxpilgrim"}, "is_accepted": false, "score": 2, "last_activity_date": 1531953229, "creation_date": 1531953229, "answer_id": 51411889, "question_id": 51411837, "link": "https://stackoverflow.com/questions/51411837/how-do-i-keep-a-python-application-running-in-an-ec2-instance/51411889#51411889", "title": "How do I keep a Python application running in an EC2 instance?", "body": "<p>You can use the <a href=\"https://linux.die.net/man/1/nohup\" rel=\"nofollow noreferrer\">nohup</a> command to <em>disconnect from the current session</em> and <code>&amp;</code> to run in background:</p>\n\n<pre><code>nohup python3 example.py &amp;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 179, "user_id": 8939057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FD4A8.png?s=128&g=1", "display_name": "Gabriel Panza", "link": "https://stackoverflow.com/users/8939057/gabriel-panza"}, "reply_to_user": {"reputation": 1481, "user_id": 3835653, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/00763a70467aa3e5fa0920f34fa42a90?s=128&d=identicon&r=PG&f=1", "display_name": "ThePumpkinMaster", "link": "https://stackoverflow.com/users/3835653/thepumpkinmaster"}, "edited": false, "score": 0, "creation_date": 1531975573, "post_id": 51411918, "comment_id": 89800210, "body": "No problem! Glad to help."}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1532056263, "post_id": 51411918, "comment_id": 89839251, "body": "Many thanks, I did not know this one. Here is a document link for others: <a href=\"https://uisapp2.iu.edu/confluence-prd/pages/viewpage.action?pageId=115540034\" rel=\"nofollow noreferrer\">uisapp2.iu.edu/confluence-prd/pages/&hellip;</a>"}], "tags": [], "owner": {"reputation": 179, "user_id": 8939057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FD4A8.png?s=128&g=1", "display_name": "Gabriel Panza", "link": "https://stackoverflow.com/users/8939057/gabriel-panza"}, "is_accepted": true, "score": 4, "last_activity_date": 1531953375, "creation_date": 1531953375, "answer_id": 51411918, "question_id": 51411837, "link": "https://stackoverflow.com/questions/51411837/how-do-i-keep-a-python-application-running-in-an-ec2-instance/51411918#51411918", "title": "How do I keep a Python application running in an EC2 instance?", "body": "<p><strong>Quick Solution</strong> - You run in SSH terminal:</p>\n\n<pre><code>nohup python3 example.py &amp; \n</code></pre>\n\n<p>(best if you don't wanna see what is going on later)</p>\n\n<p>or</p>\n\n<p><strong>Best Solution</strong> - You create a Screen in SSH terminal:</p>\n\n<pre><code>screen\n</code></pre>\n\n<p>Then you press ctrl+a+d to detach from it. Then you can close SSH safely. If you want to see what is going on later, you can just:</p>\n\n<pre><code>screen -r\n</code></pre>\n"}], "owner": {"reputation": 1481, "user_id": 3835653, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/00763a70467aa3e5fa0920f34fa42a90?s=128&d=identicon&r=PG&f=1", "display_name": "ThePumpkinMaster", "link": "https://stackoverflow.com/users/3835653/thepumpkinmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 51411918, "answer_count": 2, "score": 1, "last_activity_date": 1531953375, "creation_date": 1531952827, "question_id": 51411837, "link": "https://stackoverflow.com/questions/51411837/how-do-i-keep-a-python-application-running-in-an-ec2-instance", "title": "How do I keep a Python application running in an EC2 instance?", "body": "<p>I have a python application which I uploaded to an EC2 instance as a file named \"example.py\". I want this code to be running continuously, as it has a while loop that calls a 3rd party Twitter API every minute. If I run \"python3 example.py\", and close the terminal, the SSH session terminates. Will the python application continue running in that EC2 instance? How can I make that sure? Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "csv"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9269971"}, "edited": false, "score": 0, "creation_date": 1531957083, "post_id": 51412330, "comment_id": 89796361, "body": "sounds about the right direction to the solution. By any chance, would you be able to provide code example on your answer?"}, {"owner": {"reputation": 685, "user_id": 1169797, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8cdf1c4380419fc73340fbb8739dfae?s=128&d=identicon&r=PG", "display_name": "mooglinux", "link": "https://stackoverflow.com/users/1169797/mooglinux"}, "edited": false, "score": 0, "creation_date": 1531960283, "post_id": 51412330, "comment_id": 89797053, "body": "Updated with an example for you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9269971"}, "edited": false, "score": 0, "creation_date": 1531975734, "post_id": 51412330, "comment_id": 89800255, "body": "Yes, you can set the formating for data you created on the python code. However, the problem I have is extracting the formating from .xlsx file and applying the same formating to the newly created .xlsx"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9269971"}, "edited": false, "score": 0, "creation_date": 1531975748, "post_id": 51412330, "comment_id": 89800261, "body": "Do you know how to do that?"}], "tags": [], "owner": {"reputation": 685, "user_id": 1169797, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8cdf1c4380419fc73340fbb8739dfae?s=128&d=identicon&r=PG", "display_name": "mooglinux", "link": "https://stackoverflow.com/users/1169797/mooglinux"}, "is_accepted": false, "score": 1, "last_activity_date": 1531960266, "last_edit_date": 1531960266, "creation_date": 1531956775, "answer_id": 51412330, "question_id": 51411809, "link": "https://stackoverflow.com/questions/51411809/keeping-the-same-file-format-when-saving-xlsx-file-using-python/51412330#51412330", "title": "keeping the same file format when saving .xlsx file using python", "body": "<p>You can't preserve the formatting because pandas throws away all that information upon import. You would need to specify the formatting options you want in the output with the <code>ExcelWriter</code> object. If you use the option <code>engine='xlsxwriter'</code> you can then use all the xlsxwriter formatting options before writing the final file. You can find more details in the <a href=\"https://xlsxwriter.readthedocs.io/working_with_pandas.html\" rel=\"nofollow noreferrer\">XlsxWriter documentation.</a></p>\n\n<p>Example:</p>\n\n<pre><code>import pandas as pd\n\n# This removes the default header style so we can override it later\nimport pandas.io.formats.excel\npandas.io.formats.excel.header_style = None\n\n\n# Create a Pandas dataframe from some data.\ndf = pd.DataFrame({'Data1': [10, 20, 30, 20, 15, 30, 45],\n                   'Data2': [90, 80, 30, 15, 88, 34, 41]})\n\n\n# Create a Pandas Excel writer using XlsxWriter as the engine.\nwriter = pd.ExcelWriter('pandas_conditional.xlsx', engine='xlsxwriter')\n\n# Convert the dataframe to an XlsxWriter Excel object.\ndf.to_excel(writer, sheet_name='Sheet1')\n\n# Get the xlsxwriter workbook and worksheet objects.\nworkbook  = writer.book\nworksheet = writer.sheets['Sheet1']\n\n# Create Format objects to apply to sheet\n# https://xlsxwriter.readthedocs.io/format.html#format-methods-and-format-properties\nred_bold = workbook.add_format({'bold': True, 'font_color': 'red'})\nborder = workbook.add_format({'border':5, 'border_color':'blue'})\n\n#Apply formatting to sheet\nworksheet.set_column('C:C', None, red_bold)\nworksheet.set_column('A1:A8', None, border)\n\n# Apply a conditional format to a cell range.\nworksheet.conditional_format('B2:B8', {'type': '3_color_scale'})\n\n# Close the Pandas Excel writer and output the Excel file.\nwriter.save()\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9269971"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2637, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1531960266, "creation_date": 1531952637, "question_id": 51411809, "link": "https://stackoverflow.com/questions/51411809/keeping-the-same-file-format-when-saving-xlsx-file-using-python", "title": "keeping the same file format when saving .xlsx file using python", "body": "<p>Im working on a project where I have to take excel file make changes to the data and save it</p>\n\n<pre><code>from pandas import ExcelWriter\nimport pandas as pd\n\ndfs = pd.read_excel(\"infile.xlsx\")\n\n#manuplate data \n\nwriter = ExcelWriter('outfile.xlsx')\ndfs.to_excel(writer,'Sheet5')\nwriter.save()\n</code></pre>\n\n<p>The problem I have is the newly saved excel file does not have the same format(cell widht, bold borders) as the input file. What can I do to solve this issue?</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "dnspython"], "comments": [{"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 2, "creation_date": 1531953509, "post_id": 51411806, "comment_id": 89795428, "body": "Use C or C++ ? XD"}, {"owner": {"reputation": 59, "user_id": 3904211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3d8ad4952fef69389ed30cd127a307?s=128&d=identicon&r=PG&f=1", "display_name": "MortyAndFam", "link": "https://stackoverflow.com/users/3904211/mortyandfam"}, "reply_to_user": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1531988656, "post_id": 51411806, "comment_id": 89806467, "body": "@Rob I have been thinking of using rust, but I am not sure I can justify using a lower level language because there is a leak. I don&#39;t know."}, {"owner": {"reputation": 59, "user_id": 3904211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3d8ad4952fef69389ed30cd127a307?s=128&d=identicon&r=PG&f=1", "display_name": "MortyAndFam", "link": "https://stackoverflow.com/users/3904211/mortyandfam"}, "reply_to_user": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1531997807, "post_id": 51411806, "comment_id": 89812587, "body": "No answers?? I am surprised that nobody seems to know what might be causing this problem on stackoverflow..."}, {"owner": {"reputation": 422, "user_id": 6199433, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uA5NSS4MwCA/AAAAAAAAAAI/AAAAAAAAAbY/VtuhsxH3pk4/photo.jpg?sz=128", "display_name": "Mattia Procopio", "link": "https://stackoverflow.com/users/6199433/mattia-procopio"}, "edited": false, "score": 0, "creation_date": 1532115575, "post_id": 51411806, "comment_id": 89869120, "body": "You should profile your code to see exactly what is causing the memory to not be released, try memory_profile. Then you will see what is causing the massive memory utilization"}], "answers": [{"tags": [], "owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "is_accepted": false, "score": 0, "last_activity_date": 1532115114, "last_edit_date": 1532115114, "creation_date": 1532114769, "answer_id": 51449183, "question_id": 51411806, "link": "https://stackoverflow.com/questions/51411806/too-much-ram-40gb-consumption-on-concurrent-dns-queries-python3-concurrent-f/51449183#51449183", "title": "Too much RAM (40GB+) consumption on concurrent DNS queries (Python3 concurrent.futures)", "body": "<p>try this:</p>\n\n<pre><code>def sure_ok(future):\n    try:\n        with open('out.txt', 'a') as f:\n            f.write(str(future.result()[0]) + '\\n')\n    except:\n        pass\n\nwith concurrent.futures.ThreadPoolExecutor(max_workers=2500):\n    for element in json.load(open('30_million_strings.json','r')):\n        resolv = dns.resolver.Resolver()\n        resolv.timeout = 1\n        future = executor.submit(resolv.query, target + '.com', 'MX')\n        future.add_done_callback(sure_ok)\n</code></pre>\n\n<p>remove <code>global bucket</code> as it is redundant, and not needed.</p>\n\n<p>remove reference of the 30+ million futures in a dictionary, also redundant.</p>\n\n<p>also you're probably not using a new enough \nversion of <code>concurrent.futures</code>:</p>\n\n<ul>\n<li><a href=\"https://github.com/python/cpython/commit/5cbca0235b8da07c9454bcaa94f12d59c2df0ad2\" rel=\"nofollow noreferrer\">https://github.com/python/cpython/commit/5cbca0235b8da07c9454bcaa94f12d59c2df0ad2</a></li>\n</ul>\n"}], "owner": {"reputation": 59, "user_id": 3904211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3d8ad4952fef69389ed30cd127a307?s=128&d=identicon&r=PG&f=1", "display_name": "MortyAndFam", "link": "https://stackoverflow.com/users/3904211/mortyandfam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532115114, "creation_date": 1531952614, "last_edit_date": 1531997869, "question_id": 51411806, "link": "https://stackoverflow.com/questions/51411806/too-much-ram-40gb-consumption-on-concurrent-dns-queries-python3-concurrent-f", "title": "Too much RAM (40GB+) consumption on concurrent DNS queries (Python3 concurrent.futures)", "body": "<p>I have a list of 30 million strings, and I want to run a dns query to all of them using python. I do not understand how this operation can get memory intensive. I would assume that the threads would exit after the job is done, and there is also a timeout of 1 minute as well ({'dns_request_timeout': 1}).</p>\n\n<p>Here is a sneak peek of the machine's resources while running the script:</p>\n\n<p><a href=\"https://i.stack.imgur.com/686SW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/686SW.png\" alt=\"enter image description here\"></a></p>\n\n<p>My code is as follows:</p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport dns.resolver\nimport concurrent.futures\nfrom pprint import pprint\nfrom json import json\n\n\nbucket = json.load(open('30_million_strings.json','r'))\n\n\ndef _dns_query(target, **kwargs):\n    global bucket\n    resolv = dns.resolver.Resolver()\n    resolv.timeout = kwargs['function']['dns_request_timeout']\n    try:\n        resolv.query(target + '.com', kwargs['function']['query_type'])\n        with open('out.txt', 'a') as f:\n            f.write(target + '\\n')\n    except Exception:\n        pass\n\n\ndef run(**kwargs):\n    global bucket\n    temp_locals = locals()\n    pprint({k: v for k, v in temp_locals.items()})\n\n    with concurrent.futures.ThreadPoolExecutor(max_workers=kwargs['concurrency']['threads']) as executor:\n        future_to_element = dict()\n\n        for element in bucket:\n            future = executor.submit(kwargs['function']['name'], element, **kwargs)\n            future_to_element[future] = element\n\n        for future in concurrent.futures.as_completed(future_to_element):\n            result = future_to_element[future]\n\n\nrun(function={'name': _dns_query, 'dns_request_timeout': 1, 'query_type': 'MX'},\n    concurrency={'threads': 15})\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 1072, "user_id": 3423825, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/007V9.jpg?s=128&g=1", "display_name": "Florent", "link": "https://stackoverflow.com/users/3423825/florent"}, "edited": false, "score": 0, "creation_date": 1531953182, "post_id": 51411863, "comment_id": 89795337, "body": "Thanks, unfortunnatly it also delete nested list that haven&#39;t <code>None</code>."}], "tags": [], "owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "is_accepted": false, "score": -1, "last_activity_date": 1531953029, "creation_date": 1531953029, "answer_id": 51411863, "question_id": 51411789, "link": "https://stackoverflow.com/questions/51411789/how-to-delete-nested-lists-with-none-in-python/51411863#51411863", "title": "How to delete nested lists with None in Python?", "body": "<pre><code>data = [[1531785600000, None, None, None, None, 0.0], [1531872000000, None, None, None, None, 0.0]]\n\ndel data[:]\n\nOutput: []\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1465, "user_id": 9256761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97434f7d007051d9a2c0677a7e98eae3?s=128&d=identicon&r=PG&f=1", "display_name": "zamir", "link": "https://stackoverflow.com/users/9256761/zamir"}, "is_accepted": false, "score": 1, "last_activity_date": 1531953641, "last_edit_date": 1531953641, "creation_date": 1531953105, "answer_id": 51411874, "question_id": 51411789, "link": "https://stackoverflow.com/questions/51411789/how-to-delete-nested-lists-with-none-in-python/51411874#51411874", "title": "How to delete nested lists with None in Python?", "body": "<pre><code>x = [[1531785600000, None, None, None, None, 0.0], [1531872000000, None, None, None, None, 0.0]]\n</code></pre>\n\n<h2>Imperative approach</h2>\n\n<pre><code>y = []\n\nfor i in x:\n    if None not in i:\n        y.append(i)\n\nprint(y)\n</code></pre>\n\n<h2>List comprehension</h2>\n\n<pre><code>y = [i for i in x if None not in i]\nprint(y)\n</code></pre>\n\n<h2>Output:</h2>\n\n<blockquote>\n  <p>[]</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 1, "last_activity_date": 1531953113, "creation_date": 1531953113, "answer_id": 51411876, "question_id": 51411789, "link": "https://stackoverflow.com/questions/51411789/how-to-delete-nested-lists-with-none-in-python/51411876#51411876", "title": "How to delete nested lists with None in Python?", "body": "<p>You are deleting member of data array while you are iterating the same array. That's never good solution.</p>\n\n<p>For removing members of data that contains None you can try this:</p>\n\n<pre><code>data = [[1531785600000, None, None, None, None, 0.0], [1531872000000, None, None, None, None, 0.0]]\n\ndata = [d for d in data if None not in d]\nprint(data)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29236, "user_id": 373151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b8ac2a874b3037fc8afea92cf222ff12?s=128&d=identicon&r=PG", "display_name": "Hari Menon", "link": "https://stackoverflow.com/users/373151/hari-menon"}, "is_accepted": true, "score": 0, "last_activity_date": 1531953137, "creation_date": 1531953137, "answer_id": 51411880, "question_id": 51411789, "link": "https://stackoverflow.com/questions/51411789/how-to-delete-nested-lists-with-none-in-python/51411880#51411880", "title": "How to delete nested lists with None in Python?", "body": "<p>You should never delete elements from a list in an enumerate loop. Because once you delete <code>data[0]</code> in the first iteration, the list itself id now modified and has only one element, so the next <code>enumerate</code> does not return anything (it thinks it has already looped through all elements).</p>\n\n<p>Better way to do this:</p>\n\n<pre><code>data = [x for x in data if None not in x]\n</code></pre>\n"}], "owner": {"reputation": 1072, "user_id": 3423825, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/007V9.jpg?s=128&g=1", "display_name": "Florent", "link": "https://stackoverflow.com/users/3423825/florent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 51411880, "answer_count": 4, "score": 0, "last_activity_date": 1531953641, "creation_date": 1531952544, "question_id": 51411789, "link": "https://stackoverflow.com/questions/51411789/how-to-delete-nested-lists-with-none-in-python", "title": "How to delete nested lists with None in Python?", "body": "<p>I have a list of lists with <code>None</code>'s and I would like to delete the two lists so that data becomes empty. But for some reason it seems the <code>for</code> loop is aborted after the first list is deleted, what am'I missing ?</p>\n\n<pre><code>data = [[1531785600000, None, None, None, None, 0.0], [1531872000000, None, None, None, None, 0.0]]\n\nfor i,d in enumerate(data) :\n    if None in d :\n        del data[i]\ndata\nOut[128]: [[1531872000000, None, None, None, None, 0.0]]\n\n# Expected result :\ndata\nOut[130]: []\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 399, "user_id": 7460500, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/058e5b7edb0f5289e44762b5ac176143?s=128&d=identicon&r=PG&f=1", "display_name": "person", "link": "https://stackoverflow.com/users/7460500/person"}, "is_accepted": false, "score": 1, "last_activity_date": 1531952723, "creation_date": 1531952723, "answer_id": 51411819, "question_id": 51411747, "link": "https://stackoverflow.com/questions/51411747/code-not-working-python-print-errors/51411819#51411819", "title": "code not working: python print errors", "body": "<p>You're combining two different ways of formatting: % and <code>.format()</code>. Change the last line to</p>\n\n<p><code>print (\"%.2f\" % (len(query_scores)/len(query_name)))</code></p>\n\n<p>Alternatively:</p>\n\n<p><code>print (\"{:.2f}\".format(len(query_scores)/len(query_name)))</code></p>\n\n<p>See <a href=\"https://pyformat.info/\" rel=\"nofollow noreferrer\">https://pyformat.info/</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 552, "user_id": 7447124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f45ad25cdb7a436e05ebc226bab38?s=128&d=identicon&r=PG&f=1", "display_name": "aman5319", "link": "https://stackoverflow.com/users/7447124/aman5319"}, "is_accepted": false, "score": -1, "last_activity_date": 1531952887, "creation_date": 1531952887, "answer_id": 51411845, "question_id": 51411747, "link": "https://stackoverflow.com/questions/51411747/code-not-working-python-print-errors/51411845#51411845", "title": "code not working: python print errors", "body": "<p>let suppose we take </p>\n\n<blockquote>\n  <p>93/47</p>\n  \n  <p>outputs 1.9787234042553192</p>\n</blockquote>\n\n<p>to get formatted output till two decimal you can use</p>\n\n<pre><code>eval('{:.2f}'.format(93/47))\n</code></pre>\n\n<blockquote>\n  <p>the output is 1.98</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 388, "user_id": 9588417, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UXf372P1-FU/AAAAAAAAAAI/AAAAAAAAKUU/S_f-4JTRTEk/photo.jpg?sz=128", "display_name": "David Gaertner", "link": "https://stackoverflow.com/users/9588417/david-gaertner"}, "is_accepted": false, "score": 0, "last_activity_date": 1531952937, "creation_date": 1531952937, "answer_id": 51411851, "question_id": 51411747, "link": "https://stackoverflow.com/questions/51411747/code-not-working-python-print-errors/51411851#51411851", "title": "code not working: python print errors", "body": "<p>The formatting method for Python changed (see <a href=\"https://pyformat.info\" rel=\"nofollow noreferrer\">link</a>). Try the new style:</p>\n\n<p><code>print (\"({:0.2f})\".format(len(query_scores)/len(query_name)))</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10102227"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1531952937, "creation_date": 1531952199, "question_id": 51411747, "link": "https://stackoverflow.com/questions/51411747/code-not-working-python-print-errors", "title": "code not working: python print errors", "body": "<p>Question:\nYou have a record of N students. Each record contains the student's name, and their percent marks in Maths, Physics and Chemistry. The marks can be floating values. The user enters some integer N followed by the names and N marks for students. You are required to save the record in a dictionary data type. The user then enters a student's name. Output the average percentage marks obtained by that student, correct to two decimal places.</p>\n\n<p>My code:</p>\n\n<pre><code>if __name__ == '__main__':\nn = int(raw_input())\nstudent_marks = {}\nfor _ in range(n):\n    line = raw_input().split()\n    name, scores = line[0], line[1:]\n    scores = map(float, scores)\n    student_marks[name] = scores\nquery_name = raw_input()\nquery_name= str(query_name)\nquery_scores = student_marks[query_name]\nprint (\"(0%.2f)\".format(len(query_scores)/len(query_name)))\n</code></pre>\n\n<p>the wrong output im getting:\n(0%.2f)</p>\n"}, {"tags": ["python", "excel", "pandas", "xlsxwriter"], "answers": [{"tags": [], "owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "is_accepted": false, "score": 0, "last_activity_date": 1531953106, "creation_date": 1531953106, "answer_id": 51411875, "question_id": 51411717, "link": "https://stackoverflow.com/questions/51411717/unable-to-add-formatting-to-excel-sheet-using-pandas-and-xlsxwriter/51411875#51411875", "title": "unable to add formatting to excel sheet using pandas and xlsxwriter", "body": "<p>If what you want is to change the color of the cell and not the color of the font then change</p>\n\n<pre><code>cell_format.set_font_color('red')\n</code></pre>\n\n<p>for </p>\n\n<pre><code>cell_format.set_bg_color('red')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10101792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/257ca4d8d3209f2ac468235da8803437?s=128&d=identicon&r=PG&f=1", "display_name": "Frank in NY", "link": "https://stackoverflow.com/users/10101792/frank-in-ny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531953106, "creation_date": 1531952013, "question_id": 51411717, "link": "https://stackoverflow.com/questions/51411717/unable-to-add-formatting-to-excel-sheet-using-pandas-and-xlsxwriter", "title": "unable to add formatting to excel sheet using pandas and xlsxwriter", "body": "<p>I'm able to transfer data from datafile.xlsx to test.xlsx, but I don't know how to add the color red to specific cells in test.xlsx</p>\n\n<p>#The major components of the code are shown below</p>\n\n<pre><code>import pandas as pd \nimport xlsxwriter\n\nfile = \"datafile.xlsx\"\nxlsx = pd.ExcelFile(file)\nsheet1 = xlsx.parse(0)\nwriter = pd.ExcelWriter(\"test.xlsx\")\ncolumns=[\"FirstName\", \"MiddleName\", \"LastName\", ......]\n\n#--My code doesn't work when a sheet_name is added in the to_excel piece--\n\ndfc = pd.DataFrame([columns])\ndfc.to_excel(writer,sheet_name=sheet1, startrow=0, startcol=0, \nindex=False, header=None) \n\n#The body of the code retrieves data from datafile.xlsx\n#example--&gt; row = sheet1.iloc[i].real\n\n#---This section has my new code for adding cell color-----\n#---cell color code(I define a workbook and worksheet)\nworkbook  = writer.book\nworksheet = writer.sheets['sheet1']\ncell_format = workbook.add_format()  \ncell_format.set_font_color('red')\nworksheet.write(0, 0, 'Foo', cell_format)\n#----cell color code\n\ndt = [row[0], row[1], row[2], .....]\ndf1 = pd.DataFrame([dt])\ndf1.to_excel(writer, startrow=rownum, startcol=0, index=False, header=None)  \nwriter.save()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": true, "score": 3, "last_activity_date": 1531963060, "creation_date": 1531963060, "answer_id": 51412997, "question_id": 51411713, "link": "https://stackoverflow.com/questions/51411713/pygame-time-wait-crashes-the-program/51412997#51412997", "title": "pygame.time.wait() crashes the program", "body": "<p>Don't use <code>pygame.time.wait</code> or <code>delay</code> because these functions make your program sleep for the given time and the window becomes unresponsive. You also need to handle the events (with one of the <a href=\"https://www.pygame.org/docs/ref/event.html#pygame.event.pump\" rel=\"nofollow noreferrer\">pygame.event</a> functions) each frame to avoid this.</p>\n\n<p>Here are some timer examples which don't block: <a href=\"https://stackoverflow.com/questions/30720665/countdown-timer-in-pygame\">Countdown timer in Pygame</a></p>\n\n<p>To switch the colors, you can just assign the next color to a variable and use it to render the text.</p>\n\n<pre><code>import pygame\n\n\npygame.init()\nscreen = pygame.display.set_mode((640, 480))\nclock = pygame.time.Clock()\ntitle_font = pygame.font.SysFont('monospace', 50)\nBACKGROUND_COLOR = pygame.Color('gray12')\nBLUE = pygame.Color('blue')\nRED = pygame.Color('red')\n# Assign the current color to the color variable.\ncolor = RED\ntimer = 2\ndt = 0\n\ndone = False\nwhile not done:\n    # Handle the events.\n    for event in pygame.event.get():\n        # This allows the user to quit by pressing the X button.\n        if event.type == pygame.QUIT:\n            done = True\n\n    timer -= dt  # Decrement the timer by the delta time.\n    if timer &lt;= 0:  # When the time is up ...\n        # Swap the colors.\n        if color == RED:\n            color = BLUE\n            timer = 3\n        else:\n            color = RED\n            timer = 2\n\n    screen.fill(BACKGROUND_COLOR)\n    title = title_font.render('game', 5, color)\n    screen.blit(title, (200, 50))\n\n    pygame.display.flip()\n    # dt is the passed time since the last clock.tick call.\n    dt = clock.tick(60) / 1000  # / 1000 to convert milliseconds to seconds.\n\npygame.quit()\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 9476681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445219e398b34373329757c21ccd914d?s=128&d=identicon&r=PG&f=1", "display_name": "Python", "link": "https://stackoverflow.com/users/9476681/python"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 51412997, "answer_count": 1, "score": 3, "last_activity_date": 1531963060, "creation_date": 1531951983, "last_edit_date": 1531953066, "question_id": 51411713, "link": "https://stackoverflow.com/questions/51411713/pygame-time-wait-crashes-the-program", "title": "pygame.time.wait() crashes the program", "body": "<p>In a pygame code I wannted to do a title that changes colors. \nI tried to do a simple title that changes colors, but it not even turned the color to blue (or do it for a second), and the program crash. The code:</p>\n\n<pre><code>title_font = pygame.font.SysFont(\"monospace\", TITLE_SIZE)\n\nwhile True:\n    title = title_font.render(\"game\", 5, RED)\n    game_display.blit(title, TITLE_POS)\n    pygame.display.update()\n    pygame.time.wait(2000)\n\n    title = title_font.render(\"game\", 5, BLUE)\n    game_display.blit(title, TITLE_POS)\n    pygame.display.update()\n    pygame.time.wait(3000)\n\n    title = title_font.render(\"game\", 5, RED)\n    game_display.blit(title, TITLE_POS)\n    pygame.display.update()\n    pygame.time.wait(2000)\n</code></pre>\n\n<p>It also happens with pygame.time.delay(), and I don't know where is the problem...</p>\n"}, {"tags": ["python", "pipenv", "snapcraft"], "comments": [{"owner": {"reputation": 518, "user_id": 1171446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3537b17fc33775ad9ec4e969cbd320bd?s=128&d=identicon&r=PG", "display_name": "Francois", "link": "https://stackoverflow.com/users/1171446/francois"}, "edited": false, "score": 0, "creation_date": 1536175936, "post_id": 51411699, "comment_id": 91334204, "body": "This is the official report for this issue: <a href=\"https://github.com/pypa/pipenv/issues/2611\" rel=\"nofollow noreferrer\">github.com/pypa/pipenv/issues/2611</a>"}], "owner": {"reputation": 518, "user_id": 1171446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3537b17fc33775ad9ec4e969cbd320bd?s=128&d=identicon&r=PG", "display_name": "Francois", "link": "https://stackoverflow.com/users/1171446/francois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1609, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1532007170, "creation_date": 1531951905, "last_edit_date": 1532007170, "question_id": 51411699, "link": "https://stackoverflow.com/questions/51411699/dist-info-directory-not-found-with-pipenv-install-r-requirements-txt", "title": "&quot;.dist-info directory not found&quot; with pipenv install -r requirements.txt", "body": "<p>I'm trying to install snapcraft's requirements using:</p>\n\n<pre><code>pipenv install -r snapcraft/requirements.txt\n</code></pre>\n\n<p>and it fails to install those two dependencies:</p>\n\n<blockquote>\n  <p><a href=\"https://launchpad.net/ubuntu/+archive/primary/+files/python-apt_1.1.0~beta1build1.tar.xz\" rel=\"nofollow noreferrer\">https://launchpad.net/ubuntu/+archive/primary/+files/python-apt_1.1.0~beta1build1.tar.xz</a>\n  <a href=\"https://launchpad.net/python-distutils-extra/trunk/2.39/+download/python-distutils-extra-2.39.tar.gz\" rel=\"nofollow noreferrer\">https://launchpad.net/python-distutils-extra/trunk/2.39/+download/python-distutils-extra-2.39.tar.gz</a></p>\n</blockquote>\n\n<pre><code>Collecting f3a5fdd from https://launchpad.net/ubuntu/+archive/primary/+files/python-apt_1.1.0~beta1build1.tar.xz#egg=f3a5fdd \nInstalling collected packages: f3a5fdd\n\nException:\nTraceback (most recent call last):\n  File \"/media/fgervais/core/.venv/lib/python3.5/site-packages/pip/_internal/basecommand.py\", line 228, in main\n    status = self.run(options, args)\n  File \"/media/fgervais/core/.venv/lib/python3.5/site-packages/pip/_internal/commands/install.py\", line 335, in run\n    use_user_site=options.use_user_site,\n  File \"/media/fgervais/core/.venv/lib/python3.5/site-packages/pip/_internal/req/__init__.py\", line 49, in     install_given_reqs\n    **kwargs\n  File \"/media/fgervais/core/.venv/lib/python3.5/site-packages/pip/_internal/req/req_install.py\", line 748, in install\n    use_user_site=use_user_site, pycompile=pycompile,\n  File \"/media/fgervais/core/.venv/lib/python3.5/site-packages/pip/_internal/req/req_install.py\", line 961, in     move_wheel_files\n    warn_script_location=warn_script_location,\n  File \"/media/fgervais/core/.venv/lib/python3.5/site-packages/pip/_internal/wheel.py\", line 316, in move_wheel_files\n    assert info_dir, \"%s .dist-info directory not found\" % req\nAssertionError: f3a5fdd .dist-info directory not found\n</code></pre>\n\n<p>Any body know where #egg=f3a5fdd is coming from?</p>\n\n<p>I think this is what cause the issue because this works:</p>\n\n<pre><code>pipenv shell\npip3 install https://launchpad.net/ubuntu/+archive/primary/+files/python-apt_1.1.0~beta1build1.tar.xz\n</code></pre>\n\n<p>but if I add #egg=f3a5fdd it fails with the same error as pipenv.</p>\n"}, {"tags": ["python", "subclass", "qt-designer", "qtwidgets"], "comments": [{"owner": {"reputation": 685, "user_id": 1169797, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8cdf1c4380419fc73340fbb8739dfae?s=128&d=identicon&r=PG", "display_name": "mooglinux", "link": "https://stackoverflow.com/users/1169797/mooglinux"}, "edited": false, "score": 0, "creation_date": 1531953367, "post_id": 51411654, "comment_id": 89795389, "body": "Why do you have Qt modules in <code>mainMenu</code>?"}, {"owner": {"reputation": 9, "user_id": 10022720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2bb912d37c700e7f96f71e15852a68f?s=128&d=identicon&r=PG&f=1", "display_name": "oldHornPlayer", "link": "https://stackoverflow.com/users/10022720/oldhornplayer"}, "reply_to_user": {"reputation": 685, "user_id": 1169797, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8cdf1c4380419fc73340fbb8739dfae?s=128&d=identicon&r=PG", "display_name": "mooglinux", "link": "https://stackoverflow.com/users/1169797/mooglinux"}, "edited": false, "score": 0, "creation_date": 1532000965, "post_id": 51411654, "comment_id": 89814697, "body": "Hi.  I am writing a program with class Example(QMainWindow, menu), where menu contains all the subclasses.  Each subclass contains a Qt module with a different GUI.  The program will swap one GUI for another based on command and a hierarchy for selection."}], "owner": {"reputation": 9, "user_id": 10022720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2bb912d37c700e7f96f71e15852a68f?s=128&d=identicon&r=PG&f=1", "display_name": "oldHornPlayer", "link": "https://stackoverflow.com/users/10022720/oldhornplayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531951610, "creation_date": 1531951610, "question_id": 51411654, "link": "https://stackoverflow.com/questions/51411654/python-dynamically-adding-classes-to-qtwidgets-qmainwindow-instance", "title": "Python: dynamically adding classes to QtWidgets.QMainWindow() instance?", "body": "<p>I have many QtDesigner py files (version 5.11).  I want to include the classes of the QtDesigner py files in a main class.  Manually, I would do this for the first subclass, mainMenu.py</p>\n\n<pre><code>menu = QtWidgets.QMainWindow() \n\nmenu.Ui_mainMenu = mainMenu.Ui_mainMenu\nmenu.QtCore = mainMenu.QtCore\nmenu.QtGui = mainMenu.QtGui\nmenu.QtWidgets = mainMenu.QtWidgets\n</code></pre>\n\n<p>Then, I'd have to take the next QtDesigner-generated py file and add its Ui_nextMenu, etc.  I suppose that there must be an automated way to populate the menu class with all the Ui_* classes from the files.  Any help, please.</p>\n"}, {"tags": ["python", "oracle", "sqlalchemy", "declarative"], "comments": [{"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1531991341, "post_id": 51411651, "comment_id": 89808067, "body": "The relationship that is referred to in your error message is <code>SubBatch.coatoption</code>, would that be <code>SubBatch.batch_input</code> in your example? Or is there code missing?"}, {"owner": {"reputation": 1301, "user_id": 183315, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/4x8Vh.jpg?s=128&g=1", "display_name": "writes_on", "link": "https://stackoverflow.com/users/183315/writes-on"}, "reply_to_user": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1532007624, "post_id": 51411651, "comment_id": 89819317, "body": "Yes, sorry about that, the error I copied directly from my code, which included fields from the actual table. I&#39;ve edited the message here to reflect the sample classes I&#39;ve included in the question."}], "owner": {"reputation": 1301, "user_id": 183315, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/4x8Vh.jpg?s=128&g=1", "display_name": "writes_on", "link": "https://stackoverflow.com/users/183315/writes-on"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532007897, "creation_date": 1531951582, "last_edit_date": 1532007897, "question_id": 51411651, "link": "https://stackoverflow.com/questions/51411651/python-sqlalchemy-relationships", "title": "Python SqlAlchemy relationships", "body": "<p>I'm using Python 2.7.5 and SqlAlchemy 0.9.9 (against an Oracle 11 database) and am trying to figure out how I can create a relationship between two tables where the join value is a string in one table and an integer in another. Here's mockup of my two tables:</p>\n\n<pre><code>class BatchInput(db.Model):\n    __tablename__ = 'batchinput'\n    batchinput_id = Column(Integer, primary_key=True)\n    item_id       = Column(Integer)\n\nclass SubBatch(db.Model):\n    __tablename__ = 'subbatch'\n    subbatch_id   = Column(Integer, primary_key=True)\n    subbatch_no   = Column(String)\n    batch_input   = relationship('BatchInput', \n                                 primaryjoin='SubBatch.subbatch_no == cast(BatchInput.item_id, VARCHAR)')\n</code></pre>\n\n<p>When I run a query to get subbatches I get this message:</p>\n\n<pre><code>Internal Server Error, Could not locate any relevant foreign key\ncolumns for primary join condition \n'subbatch.subbatchno = CAST(forgebatchinput.item_id AS VARCHAR)' \non relationship SubBatch.forge_batch_input.  Ensure that \nreferencing columns are associated with a ForeignKey or\nForeignKeyConstraint, or are annotated in the join condition \nwith the foreign() annotation\n</code></pre>\n\n<p>I've tried a couple variations of this adding <code>foreignkeys</code> and <code>remote</code>, etc., but always get this message. I'm not sure what it's trying to tell me as I do have a primaryjoin specified.</p>\n\n<p>Any suggestions, pointers or help would be greatly appreciated!</p>\n\n<p>Doug</p>\n"}, {"tags": ["python", "django", "pythonanywhere"], "answers": [{"comments": [{"owner": {"reputation": 436, "user_id": 9755590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90191b4a895a85a1d747d27c8de5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "Dimabytes", "link": "https://stackoverflow.com/users/9755590/dimabytes"}, "edited": false, "score": 0, "creation_date": 1531955943, "post_id": 51412202, "comment_id": 89796079, "body": "I am already tried this <a href=\"http://dpaste.com/3QVDF94\" rel=\"nofollow noreferrer\">dpaste.com/3QVDF94</a> I dont understend what wrong :("}], "tags": [], "owner": {"reputation": 300, "user_id": 9457623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TqQdH.jpg?s=128&g=1", "display_name": "ZontarZon", "link": "https://stackoverflow.com/users/9457623/zontarzon"}, "is_accepted": false, "score": 0, "last_activity_date": 1531955642, "creation_date": 1531955642, "answer_id": 51412202, "question_id": 51411649, "link": "https://stackoverflow.com/questions/51411649/trouble-with-media-folder-pythonanywhere/51412202#51412202", "title": "trouble with media folder pythonanywhere", "body": "<p>It's because you have your path configured incorrectly, either when you call for the media or your <code>MEDIA_ROOT</code> and <code>MEDIA_URL</code>, most likely the former. If you look at your pythonanywhere file storage and your error output, it's looking for the file in <code>media/static/&lt;file_here&gt;</code>. Your targeted file is in <code>/media/file/&lt;file_here&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 315, "user_id": 6099910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152816677463741/picture?type=large", "display_name": "VolkanOzcan", "link": "https://stackoverflow.com/users/6099910/volkanozcan"}, "edited": false, "score": 0, "creation_date": 1583412760, "post_id": 51418490, "comment_id": 107112797, "body": "Hello, I cannot understand the difference between first and this pythonanywhere screen. What did you change? &quot;It was necessary to finish the path of the project&quot; do you mean you added &quot;/&quot; to the end of the static and media dir&#39;s on the pic?"}, {"owner": {"reputation": 436, "user_id": 9755590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90191b4a895a85a1d747d27c8de5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "Dimabytes", "link": "https://stackoverflow.com/users/9755590/dimabytes"}, "reply_to_user": {"reputation": 315, "user_id": 6099910, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152816677463741/picture?type=large", "display_name": "VolkanOzcan", "link": "https://stackoverflow.com/users/6099910/volkanozcan"}, "edited": false, "score": 0, "creation_date": 1583704105, "post_id": 51418490, "comment_id": 107197235, "body": "Oh, I think yes. Share your email, and I will try to help you with it"}], "tags": [], "owner": {"reputation": 436, "user_id": 9755590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90191b4a895a85a1d747d27c8de5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "Dimabytes", "link": "https://stackoverflow.com/users/9755590/dimabytes"}, "is_accepted": true, "score": 3, "last_activity_date": 1531990967, "creation_date": 1531990967, "answer_id": 51418490, "question_id": 51411649, "link": "https://stackoverflow.com/questions/51411649/trouble-with-media-folder-pythonanywhere/51418490#51418490", "title": "trouble with media folder pythonanywhere", "body": "<p>The problem was that I automatically displayed the working directory in the folder with my name. It was necessary to finish the path of the project <a href=\"https://i.stack.imgur.com/FfnvT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FfnvT.png\" alt=\"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\"></a></p>\n"}], "owner": {"reputation": 436, "user_id": 9755590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90191b4a895a85a1d747d27c8de5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "Dimabytes", "link": "https://stackoverflow.com/users/9755590/dimabytes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 51418490, "answer_count": 2, "score": 2, "last_activity_date": 1531990967, "creation_date": 1531951568, "last_edit_date": 1531953901, "question_id": 51411649, "link": "https://stackoverflow.com/questions/51411649/trouble-with-media-folder-pythonanywhere", "title": "trouble with media folder pythonanywhere", "body": "<p>pythonanywhere cant find files in me media folder\n<a href=\"https://i.stack.imgur.com/hg5zi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hg5zi.png\" alt=\"enter image description here\"></a></p>\n\n<p>But I have this file!\n<a href=\"https://i.stack.imgur.com/dttaO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dttaO.png\" alt=\"enter image description here\"></a></p>\n\n<p>roots in my settings.py</p>\n\n<pre><code>STATIC_URL = '/static/'\n\nSTATIC_ROOT = '/home/dimabytes/my-first-blog/static'\n\nMEDIA_ROOT = '/home/dimabytes/my-first-blog/media'\nMEDIA_URL = '/media/'\n</code></pre>\n\n<p>me web page at pythonanywhere</p>\n\n<p><a href=\"https://i.stack.imgur.com/ysdm8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ysdm8.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 988, "user_id": 7806805, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/992610967537979/picture?type=large", "display_name": "Ishan Srivastava", "link": "https://stackoverflow.com/users/7806805/ishan-srivastava"}, "edited": false, "score": 0, "creation_date": 1531952095, "post_id": 51411623, "comment_id": 89795072, "body": "tried looking for in these libraries suggested <a href=\"https://stackoverflow.com/questions/165495/detecting-mouse-clicks-in-windows-using-python\" title=\"detecting mouse clicks in windows using python\">stackoverflow.com/questions/165495/&hellip;</a> ?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1531952833, "post_id": 51411623, "comment_id": 89795264, "body": "I would recommend instead listening for some hotkey combo like <code>ctrl+T</code> (using something like <code>pynput</code>) when you detect the hotkey get the current top level window ... save current clipboard to tmp var, copy whatever might be highlighted into the clipboard (maybe by sending <code>ctrl+c</code>), read in whatever is now in the clip board and &quot;speak&quot; it, restore clipboard back to its original value"}, {"owner": {"reputation": 31, "user_id": 10102152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb25beec218f84cb41f291c9fcc1a73?s=128&d=identicon&r=PG&f=1", "display_name": "Nicodemus", "link": "https://stackoverflow.com/users/10102152/nicodemus"}, "edited": false, "score": 0, "creation_date": 1532009702, "post_id": 51411623, "comment_id": 89820873, "body": "I like the idea of the &#39;ctrl+t&#39; short cut, but... I still have no idea how to get the mouse-selected text into the clipboard. This is the key step I can&#39;t seem to figure out."}, {"owner": {"reputation": 31, "user_id": 10102152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb25beec218f84cb41f291c9fcc1a73?s=128&d=identicon&r=PG&f=1", "display_name": "Nicodemus", "link": "https://stackoverflow.com/users/10102152/nicodemus"}, "edited": false, "score": 0, "creation_date": 1532024319, "post_id": 51411623, "comment_id": 89829916, "body": "Let me correct my statement: I have no idea how to get the text into the clipboard pythonically. Ctr+C works, but then you have to hit the button or the Ctr+T shortcut too. It would be better as a one-click experience. I&#39;m not sure why this is so hard to accomplish in Python."}, {"owner": {"reputation": 31, "user_id": 10102152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb25beec218f84cb41f291c9fcc1a73?s=128&d=identicon&r=PG&f=1", "display_name": "Nicodemus", "link": "https://stackoverflow.com/users/10102152/nicodemus"}, "edited": false, "score": 0, "creation_date": 1532032102, "post_id": 51411623, "comment_id": 89833330, "body": "I think I figured it out"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10102152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb25beec218f84cb41f291c9fcc1a73?s=128&d=identicon&r=PG&f=1", "display_name": "Nicodemus", "link": "https://stackoverflow.com/users/10102152/nicodemus"}, "is_accepted": false, "score": 0, "last_activity_date": 1532032638, "creation_date": 1532032638, "answer_id": 51431321, "question_id": 51411623, "link": "https://stackoverflow.com/questions/51411623/copy-text-from-previously-selected-external-application-using-button-in-python-g/51431321#51431321", "title": "Copy Text from Previously selected External application using button in python gui", "body": "<p>I think I figured it out. It's pretty ugly, but it works; I'm a beginner at coding, and this is just a hobby for me. Honestly, I'm just happy to have it working. </p>\n\n<p>I've bound the command to Alt_L+Q; I'll probably add the Alt_R+Q later, but I'll never use them. For some reason using Alt alone without the L or R doesn't work.</p>\n\n<p>Also, Without the first sleep statement, it doesn't work at all. The second sleep statement is precautionary.</p>\n\n<pre><code># set clipboard data\nwin32clipboard.OpenClipboard()\nwin32clipboard.EmptyClipboard()\nwin32clipboard.SetClipboardText('No text is currently selected.')\nwin32clipboard.CloseClipboard()\n\ntext = None #this is what will be read\nchg_rate = 0 #reading speed +/- 0.0 to 1.0\nchg_vol = 0 #volume +/- 0.0 to 1.0\n\ndef get_text():\n    #current_window = win32gui.GetForegroundWindow()\n    import pythoncom\n    pythoncom.CoInitialize()\n    cw = win32com.client.Dispatch('WScript.Shell')\n    time.sleep(.7)\n    cw.SendKeys('^c') #copies text\n    time.sleep(.2)\n\n    #get text\n    win32clipboard.OpenClipboard()\n    text = win32clipboard.GetClipboardData()\n    win32clipboard.CloseClipboard()\n\n    return text\n\n\n#define the hot key\ndef create_hotkey():\n    # The key combination to check\n    COMBINATIONS = [\n        {keyboard.Key.alt_l, keyboard.KeyCode(char='Q')},\n        {keyboard.Key.alt_l, keyboard.KeyCode(char='q')}\n    ]\n\n    # The currently active modifiers\n    current = set()\n\n    def execute():\n            text = get_text()\n            if not isinstance(text, str):\n                text = \"Selected input is not UTF-8 text.\"\n            say_text(text)\n\n    def on_press(key):\n        if any([key in COMBO for COMBO in COMBINATIONS]):\n            current.add(key)\n            if any(all(k in current for k in COMBO) for COMBO in COMBINATIONS):\n                execute()\n\n    def on_release(key):\n        if any([key in COMBO for COMBO in COMBINATIONS]):\n            current.remove(key)\n\n    with keyboard.Listener(on_press=on_press, on_release=on_release) as listener:\n        listener.join()\n\n#run hotkey\ncreate_hotkey()\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10102152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb25beec218f84cb41f291c9fcc1a73?s=128&d=identicon&r=PG&f=1", "display_name": "Nicodemus", "link": "https://stackoverflow.com/users/10102152/nicodemus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1532032638, "creation_date": 1531951456, "question_id": 51411623, "link": "https://stackoverflow.com/questions/51411623/copy-text-from-previously-selected-external-application-using-button-in-python-g", "title": "Copy Text from Previously selected External application using button in python gui", "body": "<p>I'm trying to build a lightweight Text-to-Speech GUI where I can select text in, say, Word or Chrome, and then press a button in my GUI and have it read it. </p>\n\n<p>I've already figured out all the pieces to create the GUI and get the TTS to work, but I can't get the form factor right. I'm trying to mimic the form factor of Dragon Naturally Speaking's text-to-speech because, well it's simple and what I'm used to.</p>\n\n<p>Here are the missing steps in the user story I can't get to work, in order:</p>\n\n<p>1) user highlights text in an application (word, chrome, notepad, whatever) with the mouse and presses the gui button</p>\n\n<p>2) data from the external application is pulled in as UTF-8 and stored in a variable called \"text\"</p>\n\n<p>I know there's a problem in that several windows can have selected text. My solution is to pull the selected text from the most recently previously selected window. </p>\n\n<p>Right now the kludgy work around is to Ctrl-C whatever text I want read and then press the button, because I can pull the data from the clipboard, but this is a really terrible user experience and confusing, as well. I tried using pyperclip to get the button to put the text in the clipboard, but it doesn't seem to work, so I'm not sure if the clipboard idea is a dead end. </p>\n\n<pre><code>def select_text(self):\n    #copy\n    pyperclip.copy() # doesn't work        \n\n    #get text\n    win32clipboard.OpenClipboard()\n    text = win32clipboard.GetClipboardData()\n    win32clipboard.CloseClipboard()\n\n    #say it!\n    self.say_text(text)\n</code></pre>\n\n<p>I can't seem to find anything like this anywhere, and I have no idea where to start. Any help would be appreciated. </p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1531951605, "post_id": 51411622, "comment_id": 89794884, "body": "Is it possible you&#39;re looking for <a href=\"https://docs.python.org/3/library/functions.html#filter\" rel=\"nofollow noreferrer\"><code>filter</code></a>? Otherwise, I&#39;m not sure I understand your question."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1531951939, "post_id": 51411622, "comment_id": 89795026, "body": "Your question doesn&#39;t make sense. Most iterables <i>don&#39;t have indices</i>, those that do, frequently provide such a functionality as methods on those objects or, in the case of <code>numpy</code>, you can use <code>numpy.where</code>"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1531952208, "post_id": 51411622, "comment_id": 89795105, "body": "The answer to the other question only returns the first index. For all the indices, you can do <code>[index for index,value in enumerate(c) if value == target]</code>. Note that this will return a list, even if there is only one such value."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1531963314, "post_id": 51411622, "comment_id": 89797662, "body": "Most of the answers in the duplicate are for a list, which has an <code>index</code> method.  But <code>c</code> is a numpy.  <code>np.where(c==2)[0]</code> a widely used equivalent for arrays.  <code>c==2</code> is the boolean mask, and where returns a tuple of indices where that is true."}], "answers": [{"tags": [], "owner": {"reputation": 988, "user_id": 7806805, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/992610967537979/picture?type=large", "display_name": "Ishan Srivastava", "link": "https://stackoverflow.com/users/7806805/ishan-srivastava"}, "is_accepted": true, "score": 2, "last_activity_date": 1531951660, "creation_date": 1531951660, "answer_id": 51411667, "question_id": 51411622, "link": "https://stackoverflow.com/questions/51411622/determining-the-argument-of-a-value-in-an-iterable-in-python/51411667#51411667", "title": "Determining the argument of a value in an iterable in python", "body": "<p>You are looking for</p>\n\n<pre><code>list.index(value)\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 9886516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e0589ed00a830d2cc79ed479e58056?s=128&d=identicon&r=PG&f=1", "display_name": "jbplasma", "link": "https://stackoverflow.com/users/9886516/jbplasma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1531951887, "accepted_answer_id": 51411667, "answer_count": 1, "score": -1, "last_activity_date": 1531951660, "creation_date": 1531951454, "question_id": 51411622, "link": "https://stackoverflow.com/questions/51411622/determining-the-argument-of-a-value-in-an-iterable-in-python", "closed_reason": "Duplicate", "title": "Determining the argument of a value in an iterable in python", "body": "<p>Is there a python or numpy function that returns the argument or index of some value (or set of values) that exists in an iterable? I want something that is similar to the functionality of:</p>\n\n<pre><code>&gt;&gt;c= np.array([1,2,3])\n&gt;&gt;np.argmin(c)\n0\n</code></pre>\n\n<p>but is able to do:</p>\n\n<pre><code>&gt;&gt;c.*somefunction*(2)\n1\n</code></pre>\n\n<p>In the pandas library, you can create a boolean mask that returns only the values that match the condition, and from there you can return the indices of these values. But how might this be done without pandas?</p>\n"}, {"tags": ["python", "visual-studio", "dll", "tkinter", "ribbon"], "comments": [{"owner": {"reputation": 3878, "user_id": 4528269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e57eeb7fc4c275fd8d64640acbc8fb0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ethan Field", "link": "https://stackoverflow.com/users/4528269/ethan-field"}, "edited": false, "score": 0, "creation_date": 1532099397, "post_id": 51411606, "comment_id": 89861281, "body": "You haven&#39;t asked an actual question in your question. As it stands it is unclear as to what you need assistance with here beyond &quot;Fix my code for free please&quot;. Please, can you explicitly state your question?"}, {"owner": {"reputation": 348, "user_id": 10079909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce35f3ce075b77881e5aa546c526507?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10079909/richard"}, "reply_to_user": {"reputation": 3878, "user_id": 4528269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e57eeb7fc4c275fd8d64640acbc8fb0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ethan Field", "link": "https://stackoverflow.com/users/4528269/ethan-field"}, "edited": false, "score": 0, "creation_date": 1532103225, "post_id": 51411606, "comment_id": 89863361, "body": "I&#39;ve added question marks to make the questions clearer"}, {"owner": {"reputation": 348, "user_id": 10079909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce35f3ce075b77881e5aa546c526507?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10079909/richard"}, "reply_to_user": {"reputation": 3878, "user_id": 4528269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e57eeb7fc4c275fd8d64640acbc8fb0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ethan Field", "link": "https://stackoverflow.com/users/4528269/ethan-field"}, "edited": false, "score": 0, "creation_date": 1532110745, "post_id": 51411606, "comment_id": 89867115, "body": "Additional clear question added. I&#39;m not expecting anyone to fix my code, just help me understand why it doesn&#39;t work so I can fix it."}], "owner": {"reputation": 348, "user_id": 10079909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce35f3ce075b77881e5aa546c526507?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10079909/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532110682, "creation_date": 1531951355, "last_edit_date": 1532110682, "question_id": 51411606, "link": "https://stackoverflow.com/questions/51411606/python-ribbon-application-using-tkinter", "title": "Python Ribbon Application using Tkinter", "body": "<p>I want to make a ribbon style application using Python Tkinter.</p>\n\n<p>The wrapper in the following thread answered by patthoyts seems to work very well: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/30615579/is-there-a-way-to-use-ribbon-toolbars-in-tkinter\">Is there a way to use ribbon toolbars in Tkinter?</a></li>\n</ul>\n\n<p>I am struggling however to create the .dll for my own ribbon design. I have used <a href=\"https://github.com/RibbonWinForms/RibbonWinForms\" rel=\"nofollow noreferrer\">RibbonWinForms</a>  addon to Visual Studio 2017 to export a dll of a draft ribbon project. RibbonWinForms seems works very well.</p>\n\n<p>Replacing the dll downloaded from patthoyts (first link) with my exported dll (and renaming the file accordingly) doesn't work and yields the error (_tkinter.TclError: cannot find symbol \"Tkribbon_Init\").\nI have saved the various files (including the exported .dll with origional names) from Visual Studio <a href=\"https://www.amazon.co.uk/clouddrive/share/N81IUbeFRNqdlBUe5VCC2Km8yPAN1lfUJnYgJmE48zx\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Why does the code below work with patthoyts dll and not mine? (See link above for .dll's.</p>\n\n<p>I would be very grateful if someone can advise what code changes or dll export changes are required to get this working? </p>\n\n<p>Or, if I am over complicating this and there is a much simpler way to achieve a ribbon application coded in python that would be great?</p>\n\n<p>For reference patthoyts code is below, and his dll is also saved at the amazon link above also:</p>\n\n<pre><code>from tkinter import Widget\nfrom os import path\n\nclass Ribbon(Widget):\n    def __init__(self, master, kw=None):\n        self.version = master.tk.call('package','require','tkribbon')\n        self.library = master.tk.eval('set ::tkribbon::library')\n        Widget.__init__(self, master, 'tkribbon::ribbon', kw=kw)\n\n    def load_resource(self, resource_file, resource_name='APPLICATION_RIBBON'):\n        \"\"\"Load the ribbon definition from resources.\n\n        Ribbon markup is compiled using the uicc compiler and the resource included\n        in a dll. Load from the provided file.\"\"\"\n        self.tk.call(self._w, 'load_resources', resource_file)\n        self.tk.call(self._w, 'load_ui', resource_file, resource_name)\n\nif __name__ == '__main__':\n    import sys\n    from tkinter import *\n    def main():\n        root = Tk()\n        r = Ribbon(root)\n        name = 'APPLICATION_RIBBON'\n        if len(sys.argv) &gt; 1:\n            resource = sys.argv[1]\n            if len(sys.argv) &gt; 2:\n                name = sys.argv[2]\n        else:\n            resource = path.join(r.library, 'libtkribbon1.0.dll')\n        r.load_resource(resource, name)\n        t = Text(root)\n        r.grid(sticky=(N,E,S,W))\n        t.grid(sticky=(N,E,S,W))\n        root.grid_columnconfigure(0, weight=1)\n        root.grid_rowconfigure(1, weight=1)\n        root.mainloop()\n    main()\n</code></pre>\n"}, {"tags": ["python", "file-handling"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 9047363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cYNQG.png?s=128&g=1", "display_name": "OutlawBandit", "link": "https://stackoverflow.com/users/9047363/outlawbandit"}, "edited": false, "score": 0, "creation_date": 1531951860, "post_id": 51411609, "comment_id": 89794995, "body": "See, I knew I was way over complicating my search. Thank you for this quick and easy fix."}, {"owner": {"reputation": 1128, "user_id": 1952282, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/857b0ee320c8b9a9f6043e58fdef55d5?s=128&d=identicon&r=PG", "display_name": "Bayko", "link": "https://stackoverflow.com/users/1952282/bayko"}, "reply_to_user": {"reputation": 65, "user_id": 9047363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cYNQG.png?s=128&g=1", "display_name": "OutlawBandit", "link": "https://stackoverflow.com/users/9047363/outlawbandit"}, "edited": false, "score": 0, "creation_date": 1532121276, "post_id": 51411609, "comment_id": 89871307, "body": "If this answered your question, please mark it as so!"}], "tags": [], "owner": {"reputation": 1128, "user_id": 1952282, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/857b0ee320c8b9a9f6043e58fdef55d5?s=128&d=identicon&r=PG", "display_name": "Bayko", "link": "https://stackoverflow.com/users/1952282/bayko"}, "is_accepted": true, "score": 0, "last_activity_date": 1531951381, "creation_date": 1531951381, "answer_id": 51411609, "question_id": 51411590, "link": "https://stackoverflow.com/questions/51411590/appending-onto-raw-input/51411609#51411609", "title": "Appending onto Raw_input", "body": "<pre><code>filename = raw_input(\"Copy/Paste the Filename here: \") + filetype\n</code></pre>\n\n<p>add a '+' sign</p>\n"}, {"tags": [], "owner": {"reputation": 988, "user_id": 7806805, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/992610967537979/picture?type=large", "display_name": "Ishan Srivastava", "link": "https://stackoverflow.com/users/7806805/ishan-srivastava"}, "is_accepted": false, "score": -1, "last_activity_date": 1531952023, "last_edit_date": 1531952023, "creation_date": 1531951503, "answer_id": 51411634, "question_id": 51411590, "link": "https://stackoverflow.com/questions/51411590/appending-onto-raw-input/51411634#51411634", "title": "Appending onto Raw_input", "body": "<pre><code>from twitter_keys import *\n\nimport requests\n\n# Load the UID list\n\nfiletype = \".txt\"\n\nfilename = raw_input(\"Copy/Paste the Filename here: \")\n\nwith open (filename+filetype, \"r\") as myfile:\n    data = myfile.read()\n\nprint data\n</code></pre>\n\n<p>As from your debugger input you can clearly see that the filename is getting converted into a tuple because of your wrong use of <code>,</code>.<br>\nYou use <code>+</code> to concatenate strings.</p>\n"}, {"tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": false, "score": 1, "last_activity_date": 1531951866, "creation_date": 1531951866, "answer_id": 51411698, "question_id": 51411590, "link": "https://stackoverflow.com/questions/51411590/appending-onto-raw-input/51411698#51411698", "title": "Appending onto Raw_input", "body": "<p>There are several ways. I generally use <code>\"{}{}\".format(filename,filetype)</code>, but you can also use <code>filename+filetype</code> or <code>\"%s%s\" % (filename, filetype)</code>. You might want to do some validation to make sure that they don't already have a file extension, such as </p>\n\n<pre><code>if not \".\" in filename[-5:]:\n           filename = \"{}{}\".format(filename,filetype)\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 9047363, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cYNQG.png?s=128&g=1", "display_name": "OutlawBandit", "link": "https://stackoverflow.com/users/9047363/outlawbandit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 51411609, "answer_count": 3, "score": 0, "last_activity_date": 1531964460, "creation_date": 1531951266, "last_edit_date": 1531964460, "question_id": 51411590, "link": "https://stackoverflow.com/questions/51411590/appending-onto-raw-input", "title": "Appending onto Raw_input", "body": "<p>In my code, I have the user input a file name. I would like to append .txt to the end of their input, so they don't have to. (<em>filename vs filename.txt</em>) I've tried a couple different methods, but here is my current (not working) version.</p>\n\n<pre><code>from twitter_keys import *\n\nimport requests\n\n# Load the UID list\n\nfiletype = \".txt\"\n\nfilename = raw_input(\"Copy/Paste the Filename here: \"), filetype\n\nwith open (filename, \"r\") as myfile:\n    data = myfile.read()\n\nprint data\n</code></pre>\n\n<p>Looking at my debugger, I see <em>how</em> it's not working, but I can't find a good solution on how I should better go about it.</p>\n\n<p>Debugger output:</p>\n\n<pre><code>print filename\n('StrangeBeacons-20180718-144446-followers', '.txt')\n</code></pre>\n\n<p>I'm sure there's an easy way to do this, but I'm probably not asking the right question when I search for posts or documentation. </p>\n"}, {"tags": ["python", "elasticsearch", "elasticsearch-dsl", "elasticsearch-query", "elasticsearch-dsl-py"], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1532022203, "post_id": 51428704, "comment_id": 89828912, "body": "Can you tell, how do i write the same thing if I am importing Q module this way:   from elasticsearch_dsl import Q  . Is this correct - Q(&#39;regexp&#39;, **{&#39;name_gr&#39;: &#39;gr[12]&#39;})  ?"}, {"owner": {"reputation": 2662, "user_id": 7300152, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m4ZVihpCNkw/AAAAAAAAAAI/AAAAAAAAB-M/jCAup2UZtnI/photo.jpg?sz=128", "display_name": "Honza Kr&#225;l", "link": "https://stackoverflow.com/users/7300152/honza-kr%c3%a1l"}, "reply_to_user": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1532023008, "post_id": 51428704, "comment_id": 89829291, "body": "Q is not a module, it is a function that will just construct the query, but it cannot actually be excuted, only <code>Search</code> can be executed. Using <code>Q</code> the syntax would be <code>Q(&#39;regexp&#39;, name_gr=&#39;gr[12]&#39;)</code> (the arguments to the <code>query</code> method are always passed to <code>Q</code> internally)"}, {"owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "edited": false, "score": 0, "creation_date": 1532027280, "post_id": 51428704, "comment_id": 89831300, "body": "yes,that&#39;s correct. I have used exactly this Q(&#39;regexp&#39;, name_gr=&#39;gr[12]&#39;) . The problem is in the final result name3 is also coming. It should not come as name_gr list of name3 contains only gr2 not gr1."}], "tags": [], "owner": {"reputation": 2662, "user_id": 7300152, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m4ZVihpCNkw/AAAAAAAAAAI/AAAAAAAAB-M/jCAup2UZtnI/photo.jpg?sz=128", "display_name": "Honza Kr&#225;l", "link": "https://stackoverflow.com/users/7300152/honza-kr%c3%a1l"}, "is_accepted": false, "score": 1, "last_activity_date": 1532021362, "creation_date": 1532021362, "answer_id": 51428704, "question_id": 51411541, "link": "https://stackoverflow.com/questions/51411541/elastic-search-query-find-exact-match-of-values-in-the-list-from-regexp-input-pa/51428704#51428704", "title": "Elastic search query find exact match of values in the list from regexp input parameter", "body": "<p>You are using a <code>match</code> query in your example where you want to be using <code>regexp</code> instead. To do this just use:</p>\n\n<pre><code>s = Search().query('regexp', name_gr='gr[12]')\ns.execute()\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532021362, "creation_date": 1531950951, "last_edit_date": 1531951815, "question_id": 51411541, "link": "https://stackoverflow.com/questions/51411541/elastic-search-query-find-exact-match-of-values-in-the-list-from-regexp-input-pa", "title": "Elastic search query find exact match of values in the list from regexp input parameter", "body": "<p>My data looks like below:</p>\n\n<pre><code>  {\n    \"name\": \"name1\",\n    \"name_gr\": [\"gr1\",\"gr2\"]\n  },\n  {\n    \"name\": \"name2\",\n    \"name_gr\": [\"gr1\",\"gr2\"]\n  },\n  {\n    \"name\": \"name3\",\n    \"name_gr\": [\"gr2\",\"gr3\"]\n  },\n  {\n    \"name\": \"name4\",\n    \"name_gr\": [\"gr1\",\"gr2\",\"gr3\",\"gr4\"]\n  },\n  {\n    \"name\": \"name4\",\n    \"name_gr\": [\"gr4\",\"gr5\"]\n  }\n</code></pre>\n\n<p>Now, i am trying to write elastic search query using <code>elasticsearch_dsl</code> python module by importing <code>Q</code> from it.</p>\n\n<p>My input query will be some <code>regex</code> on <code>\"name_gr\"</code>. For eg: <code>\"name_gr\": \"gr[12]\"</code>.\nSo, in this case I want all the names which has both \"gr1\" and \"gr2\" in their list of \"name_gr\".</p>\n\n<p>So, the result for -></p>\n\n<p>Example 1 : <code>\"name_gr\": \"gr[12]\"</code> will be :</p>\n\n<pre><code>  {\n    \"name\": \"name1\",\n    \"name_gr\": [\"gr1\",\"gr2\"]\n  },\n  {\n    \"name\": \"name2\",\n    \"name_gr\": [\"gr1\",\"gr2\"]\n  },\n  {\n    \"name\": \"name4\",\n    \"name_gr\": [\"gr1\",\"gr2\",\"gr3\",\"gr4\"]\n  }\n</code></pre>\n\n<p>because, gr1 and gr2 both are present in name1, name2 and name4.</p>\n\n<p>Example 2: <code>\"name_gr\": \"gr.*\"</code> will be :</p>\n\n<pre><code>  {\n    \"name\": \"name4\",\n    \"name_gr\": [\"gr1\",\"gr2\",\"gr3\",\"gr4\"]\n  }\n</code></pre>\n\n<p>because, all the gr's (gr1,gr2,gr3,gr4) are present in name4 only.</p>\n\n<p>I tried writing my query like below:</p>\n\n<pre><code>must = [{'match':{'regexp': {'name_gr': 'gr[12]'}}}]\nresult = Q('bool', must = must)\n</code></pre>\n\n<p>But it gives name3 also in result, which is invalid as both gr1 and gr2 are not present in it. Please help. I am stuck in this from few days now.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["javascript", "python", "ajax", "flask"], "answers": [{"tags": [], "owner": {"reputation": 686, "user_id": 8874154, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mq_Wb-BErkY/AAAAAAAAAAI/AAAAAAAAAQo/j-rCDFI9XuU/photo.jpg?sz=128", "display_name": "Swift", "link": "https://stackoverflow.com/users/8874154/swift"}, "is_accepted": false, "score": 0, "last_activity_date": 1531952102, "creation_date": 1531952102, "answer_id": 51411735, "question_id": 51411522, "link": "https://stackoverflow.com/questions/51411522/flask-not-finding-app-route-when-using-apache/51411735#51411735", "title": "Flask not finding app route when using Apache", "body": "<p>as an alternative answer, if this isn't production and you're using an Ubuntu system, I managed to get a Flask app running in a matter of days.</p>\n\n<p>Here is a link to the tutorial I followed;</p>\n\n<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-gunicorn-and-nginx-on-ubuntu-16-04\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-gunicorn-and-nginx-on-ubuntu-16-04</a></p>\n\n<p>I understand it doesn't answer your question but I found it useful the first time round and it worked without any problems, using forms, requesting API data and printing using Jinja template engine for example.</p>\n\n<p>You can also use a whole host of other developed plugins for user management and logins, authentication, but the best part is, anything you can do with Python, can be ordered via a web based application, so when you get a grasp of how it all works, there is very little you CAN'T do.</p>\n\n<p>In response to the question, I personally used Gunicorn as a go between and use Nginx as a reverse proxy. But there is no reason why Apache cannot substitute Nginx in that line-up that I'm aware of.</p>\n"}], "owner": {"reputation": 1, "user_id": 10102130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89b8044ffeead2e883842206ae2c993f?s=128&d=identicon&r=PG&f=1", "display_name": "C Westy", "link": "https://stackoverflow.com/users/10102130/c-westy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531952102, "creation_date": 1531950848, "question_id": 51411522, "link": "https://stackoverflow.com/questions/51411522/flask-not-finding-app-route-when-using-apache", "title": "Flask not finding app route when using Apache", "body": "<p>I am trying to run a python script that takes data collected in javascript, processes it in python, then inserts it into a database. I'm running the webpage on Apache, and I know the insertEngagement() function works to connect to my database. </p>\n\n<p>However, when I use the following AJAX request to send the data to the python file, the app.run() starts but never goes into the insertNewData() function. I'm guessing this has something to do with the path I'm using? Any help would be appreciated!</p>\n\n<p>This is my AJAX request in /home/webpage/script.js:</p>\n\n<pre><code>$.ajax({\n        url: \"/home/pythonScripts/processdata.cgi/process\",\n        data: { employeeText: input1, customerText: input2, chatData: otherData},\n        type: \"POST\",\n        success: callbackFunc\n    });\n</code></pre>\n\n<p>Then my python is in /home/pythonScripts/processdata.cgi:</p>\n\n<pre><code>#!C:\\path\\to\\python\\Python37\\python.exe\n\nimport sys\nimport getopt\nimport cgi\nimport cgitb; cgitb.enable()\nimport mysql.connector as conn\n#insertdata is another file with functions in it\nimport insertdata\n\nfrom flask import Flask, render_template, redirect, url_for,request\nfrom flask import make_response\napp = Flask(__name__)\n\ndef htmlTop():\n    print(\"\"\"Content-type:text/html\\n\\n\n            &lt;!DOCTYPE html&gt;\n            &lt;html lang=\"en\"&gt;\n                &lt;head&gt;\n                    &lt;meta charset=\"utf-8\"/&gt;\n                    &lt;title&gt;My server-side template&lt;/title&gt;\n                &lt;/head&gt;\n                &lt;body&gt;\"\"\")\n\ndef htmlTail():\n    print(\"\"\"&lt;/body&gt;\n        &lt;/html&gt;\"\"\")\n\n\n@app.route(\"/home/pythonScripts/processdata.cgi/process\", methods=['GET','POST'])\ndef insertNewData():\n    print (\"Started insert new data\")\n    if request.method == 'POST':\n        print (\"Inside conditional\")\n        employeeText = request.form['employeeText']\n        customerText = request.form['customerText']\n        chatData = request.form['chatData']\n\n        # ... use data from request \n\n        return \"Success\"\n    else:\n      return \"Error\"\n\nif __name__ == \"__main__\":\n  try:\n      htmlTop()\n      app.run(debug=True)\n      htmlTail()\n  except:\n      cgi.print_exception()\n</code></pre>\n\n<p>Also I am using .cgi because I was unable to configure Apache to run a python script rather than just returning the text file.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1531950920, "post_id": 51411509, "comment_id": 89794650, "body": "Hard to say. The problem (as I see it) is how to scan every line of text the moment its typed out but before its allowed into the discord chat. The actual scanning of strings is the easy part."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1531950922, "post_id": 51411509, "comment_id": 89794651, "body": "That two lines of code don&#39;t do what you are asking?"}, {"owner": {"reputation": 7, "user_id": 10101851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XFPhPdCj_gE/AAAAAAAAAAI/AAAAAAAADFc/LEQSpldJnkY/photo.jpg?sz=128", "display_name": "Siegmund Eurades", "link": "https://stackoverflow.com/users/10101851/siegmund-eurades"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1531951020, "post_id": 51411509, "comment_id": 89794684, "body": "@usr2564301 Those two lines sometimes cause several messages to be sent instead of just one, I didn&#39;t think it through entirely."}, {"owner": {"reputation": 7, "user_id": 10101851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XFPhPdCj_gE/AAAAAAAAAAI/AAAAAAAADFc/LEQSpldJnkY/photo.jpg?sz=128", "display_name": "Siegmund Eurades", "link": "https://stackoverflow.com/users/10101851/siegmund-eurades"}, "reply_to_user": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1531951082, "post_id": 51411509, "comment_id": 89794699, "body": "@Rob The bot only looks into the messages once they have been sent, I used the following code to obtain the messages as strings:                                                                                                         &quot;@client.event async def on_message(message):     content = message.content&quot;   I cannot get this to be displayed as code"}, {"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1531951364, "post_id": 51411509, "comment_id": 89794806, "body": "@SiegmundEurades See Jesse&#39;s reply, that is what you are looking for."}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1531952837, "post_id": 51411509, "comment_id": 89795265, "body": "That code doesn&#39;t make sense."}], "answers": [{"tags": [], "owner": {"reputation": 7054, "user_id": 88696, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/53e20180f0c292fcb589f77f738ed402?s=128&d=identicon&r=PG", "display_name": "Jesse Aldridge", "link": "https://stackoverflow.com/users/88696/jesse-aldridge"}, "is_accepted": false, "score": 2, "last_activity_date": 1531951310, "creation_date": 1531951310, "answer_id": 51411598, "question_id": 51411509, "link": "https://stackoverflow.com/questions/51411509/get-python-to-look-for-words-and-output-them/51411598#51411598", "title": "Get python to look for words and output them", "body": "<p>Here's some code that does something like what you're describing. But really it sounds like you need to spend a significant amount of time working through some basic Python tutorials before you will be able to implement this.</p>\n\n<pre><code>import re\n\nkey_words = set(['foo', 'bar', 'baz'])\n\ntyped_str = 'You are such a Foo BAR!'\n\nprint key_words &amp; set(re.findall('[a-z]+', typed_str.lower()))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7054, "user_id": 88696, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/53e20180f0c292fcb589f77f738ed402?s=128&d=identicon&r=PG", "display_name": "Jesse Aldridge", "link": "https://stackoverflow.com/users/88696/jesse-aldridge"}, "edited": false, "score": 0, "creation_date": 1531954635, "post_id": 51411995, "comment_id": 89795736, "body": "Holy cow what a thorough answer."}, {"owner": {"reputation": 7054, "user_id": 88696, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/53e20180f0c292fcb589f77f738ed402?s=128&d=identicon&r=PG", "display_name": "Jesse Aldridge", "link": "https://stackoverflow.com/users/88696/jesse-aldridge"}, "edited": false, "score": 0, "creation_date": 1531954653, "post_id": 51411995, "comment_id": 89795743, "body": "Something tells me OP might find it a bit overwhelming though haha."}], "tags": [], "owner": {"reputation": 477, "user_id": 5884789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vuKOc.png?s=128&g=1", "display_name": "jcp", "link": "https://stackoverflow.com/users/5884789/jcp"}, "is_accepted": false, "score": 1, "last_activity_date": 1531953990, "creation_date": 1531953990, "answer_id": 51411995, "question_id": 51411509, "link": "https://stackoverflow.com/questions/51411509/get-python-to-look-for-words-and-output-them/51411995#51411995", "title": "Get python to look for words and output them", "body": "<p>I'm not sure exactly what is being asked but somethings to consider (in no particular order) if you are building a bot that is taking in raw user input.</p>\n\n<ol>\n<li>capitalization sensitivity</li>\n<li>spell check</li>\n<li>understanding intent simplistically</li>\n</ol>\n\n<p>If your environment allows access to libraries you might consider checking out <a href=\"https://textblob.readthedocs.io/en/dev/\" rel=\"nofollow noreferrer\">TextBlob</a>. The following commands will give you the functionality needed for the example below.</p>\n\n<p><code>pip install textblob</code></p>\n\n<p><code>python -m textblob.download_corpora</code></p>\n\n<h1>core function</h1>\n\n<p></p>\n\n<pre><code>from textblob import TextBlob, Word\nimport copy\n\ndef score_intent(rawstring,keywords,weights=None,threshold=0.01,debug=False):\n    \"\"\"\n    rawstring: string of text with words that you want to detect\n    keywords: list of words that you are looking for\n    weights: (optional) dictionary with relative weights of words you want\n    threshold: spellcheck confidence threshold\n    debug: boolean for extra print statements to help debug\n    \"\"\"\n    allwords = TextBlob(rawstring).words\n    allwords = [w.upper() for w in allwords]\n    keywords = [k.upper() for k in keywords]\n    processed_input_as_list = spellcheck_subject_matter_specific(rawstring,keywords,threshold=threshold,debug=debug)\n    common_words = intersection(processed_input_as_list,keywords)\n    intent_score = len(common_words)\n    if weights:\n        for special_word in weights.keys():\n            if special_word.upper() in common_words:\n                # the minus one is so we dont double count a word.\n                intent_score = intent_score + weights[special_word] -1 \n\n    if debug:\n        print \"intent score: %s\" %intent_score\n        print \"words of interest found in text: {}\".format(common_words)\n    # you could return common_words and score intent based on the list.\n    # return common_words, intent_score\n    return common_words\n</code></pre>\n\n<h1>utilities for intersection &amp; spellchecking</h1>\n\n<p></p>\n\n<pre><code>def intersection(a,b):\n    \"\"\"\n    a and b are lists\n    function returns a list that is the intersection of the two\n    \"\"\"\n    return list(set(a)&amp;set(b))\n\n\n\ndef spellcheck_subject_matter_specific(rawinput,subject_matter_vector,threshold=0.01,capitalize=True,debug=False):\n    \"\"\"\n    rawinput: all the text that you want to check for spelling\n    subject_matter_vector: only the words that are worth spellchecking for (since the function can be sort of sensitive it might correct words that you don't want to correct)\n    threshold: the spell check confidence needed to update the word to the correct spelling\n    capitalize: boolean determining if you want the return string to be capitalized.\n    \"\"\"\n\n    new_input = copy.copy(rawinput)\n\n    for w in TextBlob(rawinput).words:\n        spellchecked_vec = w.spellcheck()\n        if debug:\n            print \"Word: %s\" %w\n            print \"Spellchecked Guesses &amp; Confidences: %s\" %spellchecked_vec\n            print \"Only spellchecked confidences greater than {} and in this list {} will be included\".format(threshold,subject_matter_vector)\n\n        corrected_words = [z[0].upper() for z in spellchecked_vec if z[1] &gt; threshold] \n        important_words = intersection(corrected_words,subject_matter_vector)\n        for new_word in important_words:\n\n            new_input = new_input + ' ' + new_word\n\n\n    inputBlob = TextBlob(new_input)\n    processed_input = inputBlob.words\n    if capitalize:\n        processed_input = [word.upper() for word in processed_input]\n\n    return processed_input\n</code></pre>\n\n<h1>Usage Example</h1>\n\n<p></p>\n\n<pre><code>discord_str = \"Hi, i want to talk about codee and pYtHon\"\n\nwords2detect = [\"python\",\"code\"]\n\nscore_intent(rawstring=discord_str,keywords=words2detect,threshold=0.01,debug=True)\n</code></pre>\n\n<h1>output</h1>\n\n<blockquote>\n<pre><code>intent score: 2\nwords of interest found in text: ['PYTHON', 'CODE']\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 7, "user_id": 10101851, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XFPhPdCj_gE/AAAAAAAAAAI/AAAAAAAADFc/LEQSpldJnkY/photo.jpg?sz=128", "display_name": "Siegmund Eurades", "link": "https://stackoverflow.com/users/10101851/siegmund-eurades"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1531978386, "answer_count": 2, "score": 0, "last_activity_date": 1531953990, "creation_date": 1531950747, "question_id": 51411509, "link": "https://stackoverflow.com/questions/51411509/get-python-to-look-for-words-and-output-them", "closed_reason": "Needs details or clarity", "title": "Get python to look for words and output them", "body": "<p>I've been looking into developing a discord bot that can reply to messages by reading their contents and checking if they appear in a list.</p>\n\n<p>My problem is, I need to find a reliable way of getting python to look for certain words from a text, see if they appear in the given list and output the words that are detected.</p>\n\n<p>I've managed to get it working somewhat myself with the following code:</p>\n\n<pre><code>if any(word in text in list):\n     print(\"Word Spotted\")\n</code></pre>\n\n<p>I would really apreciate some help.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1531953292, "post_id": 51411506, "comment_id": 89795365, "body": "Do you want to retain the order? Say you have 4 rows of A, then 9 rows of B, then 5 rows of C. Would you want the As be grouped with the Cs? Are all the instances of a grouping variable consecutive in the original dataframe?"}, {"owner": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "reply_to_user": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1531953648, "post_id": 51411506, "comment_id": 89795474, "body": "Order doesn\u2019t matter providing each split includes all elements of the group. Of course the groups will have varying lengths. The grouping variables are random number IDs in the data frame I intend to apply this to."}], "answers": [{"comments": [{"owner": {"reputation": 12739, "user_id": 304209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac832b45e72b203d51e2d501c0e52e4f?s=128&d=identicon&r=PG", "display_name": "Dennis Golomazov", "link": "https://stackoverflow.com/users/304209/dennis-golomazov"}, "edited": false, "score": 0, "creation_date": 1531951189, "post_id": 51411561, "comment_id": 89794738, "body": "Did I get your question right? Is that what you&#39;re asking for?"}, {"owner": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "edited": false, "score": 0, "creation_date": 1531951595, "post_id": 51411561, "comment_id": 89794881, "body": "I think so! Just testing that it retains the groups - each dataframe chunk must include every instance of the group (which is the important thing). I hope that was clear in the question. Thanks for help!"}, {"owner": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "edited": false, "score": 0, "creation_date": 1531951774, "post_id": 51411561, "comment_id": 89794960, "body": "So after testing it, I don&#39;t think it is... I&#39;ve run the following code:      my_df = pd.DataFrame(data=[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;v&#39;, &#39;v&#39;, &#39;f&#39;], columns=[&#39;A&#39;])      def iter_dataframe(dataframe, chunk_size):     for chunk_index, df_chunk in dataframe.groupby(np.arange(len(dataframe)) // chunk_size):         yield chunk_index, df_chunk       for group in iter_dataframe(my_df, 2):         print(my_df)  It appears to split it into equal dataframes, but I need to split it into smaller chunks by group (I hope I&#39;m being clear)."}, {"owner": {"reputation": 12739, "user_id": 304209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac832b45e72b203d51e2d501c0e52e4f?s=128&d=identicon&r=PG", "display_name": "Dennis Golomazov", "link": "https://stackoverflow.com/users/304209/dennis-golomazov"}, "reply_to_user": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "edited": false, "score": 0, "creation_date": 1531952302, "post_id": 51411561, "comment_id": 89795134, "body": "What exactly do you mean by &quot;split into smaller chunks by group&quot;? Can you provide the expected output in this example?"}, {"owner": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "edited": false, "score": 1, "creation_date": 1531952896, "post_id": 51411561, "comment_id": 89795275, "body": "Sure, so assume we want two groups per dataframe, I\u2019d expect to have a dataframe with a, a, a, a, b, b - a dataframe with c, v, v and a dataframe with \u2018f\u2019 given the above example"}, {"owner": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "edited": false, "score": 0, "creation_date": 1531954453, "post_id": 51411561, "comment_id": 89795679, "body": "Thanks Dennis. This looks right but i think the code you&#39;ve pasted has a syntax error near the lambda function? EDIT: I&#39;m using Python 3! Apologies! Is there a fix for the tuple unpacking near the lambda function? THANK YOU"}, {"owner": {"reputation": 12739, "user_id": 304209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac832b45e72b203d51e2d501c0e52e4f?s=128&d=identicon&r=PG", "display_name": "Dennis Golomazov", "link": "https://stackoverflow.com/users/304209/dennis-golomazov"}, "reply_to_user": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "edited": false, "score": 1, "creation_date": 1531954608, "post_id": 51411561, "comment_id": 89795725, "body": "I&#39;ve found a simpler solution and updated the answer. Please try this one."}, {"owner": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "edited": false, "score": 0, "creation_date": 1531954800, "post_id": 51411561, "comment_id": 89795782, "body": "Genius! This works exactly as needed - thank you very much for your help and efforts!"}], "tags": [], "owner": {"reputation": 12739, "user_id": 304209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac832b45e72b203d51e2d501c0e52e4f?s=128&d=identicon&r=PG", "display_name": "Dennis Golomazov", "link": "https://stackoverflow.com/users/304209/dennis-golomazov"}, "is_accepted": true, "score": 4, "last_activity_date": 1531954594, "last_edit_date": 1531954594, "creation_date": 1531951069, "answer_id": 51411561, "question_id": 51411506, "link": "https://stackoverflow.com/questions/51411506/split-dataframe-into-grouped-chunks/51411561#51411561", "title": "Split dataframe into grouped chunks", "body": "<p>Works in Python 2 and 3:</p>\n\n<pre><code>df = pd.DataFrame(data=['a', 'a', 'b', 'c', 'a', 'a', 'b', 'v', 'v', 'f'], columns=['A']) \n\ndef iter_by_group(df, column, num_groups):\n    groups = []\n    for i, group in df.groupby(column):\n        groups.append(group)\n        if len(groups) == num_groups:\n            yield pd.concat(groups)\n            groups = []\n    if groups:\n        yield pd.concat(groups)\n\nfor group in iter_by_group(df, 'A', 2):\n    print(group)\n\nA\n0  a\n1  a\n4  a\n5  a\n2  b\n6  b\n\nA\n3  c\n9  f\n\nA\n7  v\n8  v\n</code></pre>\n"}], "owner": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 1, "accepted_answer_id": 51411561, "answer_count": 1, "score": 1, "last_activity_date": 1531954594, "creation_date": 1531950731, "question_id": 51411506, "link": "https://stackoverflow.com/questions/51411506/split-dataframe-into-grouped-chunks", "title": "Split dataframe into grouped chunks", "body": "<p>I would like to split a dataframe into chunks. I have created a function which is able to split a dataframe into equal size chunks however am unable to figure out how to split by groups.</p>\n\n<p>Each split of dataframe <strong>must include all instances of a grouping variable</strong>, I'd like flexibility on how many groups could be included (as they are relatively small).</p>\n\n<p>Example dataframe:</p>\n\n<pre><code>A  1\nA  2\nB  3\nC  1\nD  9\nD  10\n</code></pre>\n\n<p>Target splits (include at least two groups):</p>\n\n<p>Split 1:</p>\n\n<pre><code>A  1\nA  2\nB  3\n</code></pre>\n\n<p>Split 2:</p>\n\n<pre><code>C  1\nD  9\nD  10\n</code></pre>\n\n<p>If helpful, my current function looks like the following:</p>\n\n<pre><code>def split_frame(sequence, size=10000):\n    return (sequence[position:position + size] for position in range(0, len(sequence), size))\n</code></pre>\n\n<p>Help appreciated!</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 145, "user_id": 3755558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U258o.jpg?s=128&g=1", "display_name": "Chandler Watson", "link": "https://stackoverflow.com/users/3755558/chandler-watson"}, "edited": false, "score": 2, "creation_date": 1531950627, "post_id": 51411442, "comment_id": 89794522, "body": "<a href=\"https://github.com/tensorflow/tensorflow/issues/12388\" rel=\"nofollow noreferrer\">This GitHub issue</a> found by googling your problem has a number of suggestions you could try. Check that you&#39;ve installed your drivers correctly as described there. Also, if you installed via <code>pip</code>, make sure you installed <code>tensorflow-gpu</code>, not <code>tensorflow</code>."}, {"owner": {"reputation": 119, "user_id": 7184397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baddae72d48a821fb95754c3c0f6ccfd?s=128&d=identicon&r=PG&f=1", "display_name": "kevintrankt", "link": "https://stackoverflow.com/users/7184397/kevintrankt"}, "reply_to_user": {"reputation": 145, "user_id": 3755558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U258o.jpg?s=128&g=1", "display_name": "Chandler Watson", "link": "https://stackoverflow.com/users/3755558/chandler-watson"}, "edited": false, "score": 0, "creation_date": 1531955327, "post_id": 51411442, "comment_id": 89795932, "body": "@ChandlerWatson I followed the steps for version 1.8 with cuda 9.0 and it still shows 0% utilization on GPU-Z"}, {"owner": {"reputation": 145, "user_id": 3755558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U258o.jpg?s=128&g=1", "display_name": "Chandler Watson", "link": "https://stackoverflow.com/users/3755558/chandler-watson"}, "edited": false, "score": 1, "creation_date": 1531961361, "post_id": 51411442, "comment_id": 89797261, "body": "Are you able to run any TF examples (maybe something for vision that might make strong use of GPU) and replicate the issue?"}, {"owner": {"reputation": 119, "user_id": 7184397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baddae72d48a821fb95754c3c0f6ccfd?s=128&d=identicon&r=PG&f=1", "display_name": "kevintrankt", "link": "https://stackoverflow.com/users/7184397/kevintrankt"}, "reply_to_user": {"reputation": 145, "user_id": 3755558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U258o.jpg?s=128&g=1", "display_name": "Chandler Watson", "link": "https://stackoverflow.com/users/3755558/chandler-watson"}, "edited": false, "score": 0, "creation_date": 1532038137, "post_id": 51411442, "comment_id": 89835635, "body": "@ChandlerWatson When I run various TF models, it seems to utilize the GPU. It&#39;s only when I use KMeansClustering that I don&#39;t use the GPU"}, {"owner": {"reputation": 145, "user_id": 3755558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U258o.jpg?s=128&g=1", "display_name": "Chandler Watson", "link": "https://stackoverflow.com/users/3755558/chandler-watson"}, "edited": false, "score": 1, "creation_date": 1532042739, "post_id": 51411442, "comment_id": 89836788, "body": "Ah. In that case, it\u2019s likely there still isn\u2019t a GPU kernel for it. It\u2019s worth checking the source, but it\u2019s probably still the case that TF supports KMeansClustering only on CPU."}], "owner": {"reputation": 119, "user_id": 7184397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baddae72d48a821fb95754c3c0f6ccfd?s=128&d=identicon&r=PG&f=1", "display_name": "kevintrankt", "link": "https://stackoverflow.com/users/7184397/kevintrankt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 317, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531955901, "creation_date": 1531950414, "last_edit_date": 1531955901, "question_id": 51411442, "link": "https://stackoverflow.com/questions/51411442/tensorflow-kmeansclustering-training-on-cpu-and-not-gpu", "title": "Tensorflow KMeansClustering training on CPU and not GPU", "body": "<p>I am currently running tensorflow-gpu 1.8 with cuda 9.0. When I train the model below, I notice that my CPU usage is 99% but my Tesla M60 usage is at 0%. </p>\n\n<p>import tensorflow as tf</p>\n\n<pre><code>tf.test.gpu_device_name()\n\ndef train(tfidf_matrix, num_clusters):\n    # Convert sparse matrix to dense matrix\n    points = tfidf_matrix.todense()\n\n    tf.device('/gpu:0')\n\n    def input_fn():\n        return tf.train.limit_epochs(tf.convert_to_tensor(points, dtype=tf.float32), num_epochs=1)\n\n    kmeans = tf.contrib.factorization.KMeansClustering(num_clusters=num_clusters, use_mini_batch=False)\n    num_iterations = 100\n\n    kmeans.train(input_fn=input_fn, steps=num_iterations)\n    print('score:', kmeans.score(input_fn))\n\n    # map the input points to their clusters\n    cluster_indices = list(kmeans.predict_cluster_index(input_fn))\n\n    return kmeans, cluster_indices\n</code></pre>\n\n<p>I can't seem to get the model to run on gpu. I tried doing this:</p>\n\n<pre><code>with tf.device('/gpu:0'):\n    kmeans.train(input_fn)\n</code></pre>\n\n<p>but it still runs on cpu.\nWhen I run tf.test.gpu_device_name() I get this</p>\n\n<p>`2018-07-18 15:28:47.105452: I c:\\users\\user\\source\\repos\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1392] Found device 0 with properties: \nname: Tesla M60 major: 5 minor: 2 memoryClockRate(GHz): 1.1775\npciBusID: 0000:00:1e.0\ntotalMemory: 7.44GiB freeMemory: 7.12GiB\n2018-07-18 15:28:47.105846: I c:\\users\\user\\source\\repos\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1471] Adding visible gpu devices: 0\n2018-07-18 15:28:47.852029: I c:\\users\\user\\source\\repos\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:952] Device interconnect StreamExecutor with strength 1 edge matrix:\n2018-07-18 15:28:47.852268: I c:\\users\\user\\source\\repos\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:958]      0 \n2018-07-18 15:28:47.852440: I c:\\users\\user\\source\\repos\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:971] 0:   N \n2018-07-18 15:28:47.852859: I c:\\users\\user\\source\\repos\\tensorflow\\tensorflow\\core\\common_runtime\\gpu\\gpu_device.cc:1084] Created TensorFlow device (/device:GPU:0 with 6874 MB memory) -> physical GPU (device: 0, name: Tesla M60, pci bus id: 0000:00:1e.0, compute capability: 5.2</p>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 1, "creation_date": 1531953699, "post_id": 51411438, "comment_id": 89795486, "body": "If y = 1 2 3 3, should it return 2 or 3?"}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "reply_to_user": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1531959597, "post_id": 51411438, "comment_id": 89796903, "body": "Voting to close as Unclear due to @Acccumulation&#39;s comment. Cover your edge cases in these questions, please. Empty list would be another one."}], "answers": [{"comments": [{"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1531953594, "post_id": 51411465, "comment_id": 89795449, "body": "You can also do <code>sorted(map(int, input().split()),reverse =True)[1]</code>"}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 2, "last_activity_date": 1531950907, "last_edit_date": 1531950907, "creation_date": 1531950518, "answer_id": 51411465, "question_id": 51411438, "link": "https://stackoverflow.com/questions/51411438/trying-to-print-the-second-largest-number-in-list/51411465#51411465", "title": "Trying to print the second largest number in list", "body": "<p>Method <code>remove()</code> from <code>list</code> doesn't return anything. It changes list inplace. So your <code>score2</code> value will be always <code>None</code>.</p>\n\n<p>The corrected program should look like (with few cosmetic corrections, will work for input of 2 values and higher):</p>\n\n<pre><code>score = sorted(map(int, input().split()))[-2]\nprint(score)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1128, "user_id": 1952282, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/857b0ee320c8b9a9f6043e58fdef55d5?s=128&d=identicon&r=PG", "display_name": "Bayko", "link": "https://stackoverflow.com/users/1952282/bayko"}, "edited": false, "score": 0, "creation_date": 1531952733, "post_id": 51411778, "comment_id": 89795247, "body": "This is highly inefficient. You are doing one pass over array for finding max_num. For num for num in y if num!=max_num you are creating another array(so that consumes memory) and then you are finding max from this array which is another pass"}, {"owner": {"reputation": 405, "user_id": 7498669, "user_type": "registered", "profile_image": "https://graph.facebook.com/1268078026616732/picture?type=large", "display_name": "Jen", "link": "https://stackoverflow.com/users/7498669/jen"}, "reply_to_user": {"reputation": 1128, "user_id": 1952282, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/857b0ee320c8b9a9f6043e58fdef55d5?s=128&d=identicon&r=PG", "display_name": "Bayko", "link": "https://stackoverflow.com/users/1952282/bayko"}, "edited": false, "score": 0, "creation_date": 1531953556, "post_id": 51411778, "comment_id": 89795438, "body": "When you sort the list and return the second value as stated above if you pass a list that has two of the highest number (i.e. y=[1, 2, 4, 4]) you are still going to return the highest value."}], "tags": [], "owner": {"reputation": 405, "user_id": 7498669, "user_type": "registered", "profile_image": "https://graph.facebook.com/1268078026616732/picture?type=large", "display_name": "Jen", "link": "https://stackoverflow.com/users/7498669/jen"}, "is_accepted": false, "score": 0, "last_activity_date": 1531952462, "creation_date": 1531952462, "answer_id": 51411778, "question_id": 51411438, "link": "https://stackoverflow.com/questions/51411438/trying-to-print-the-second-largest-number-in-list/51411778#51411778", "title": "Trying to print the second largest number in list", "body": "<p>Why don't you just do - </p>\n\n<pre><code>y=[1, 2, 3, 4]\nmax_num = max(y)\nprint(max(num for num in y if num!=max_num))\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10102126, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GGsQw3FH-cw/AAAAAAAAAAI/AAAAAAAAAEI/_oerl8YALek/photo.jpg?sz=128", "display_name": "Nimal Anand", "link": "https://stackoverflow.com/users/10102126/nimal-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1531952462, "creation_date": 1531950406, "question_id": 51411438, "link": "https://stackoverflow.com/questions/51411438/trying-to-print-the-second-largest-number-in-list", "title": "Trying to print the second largest number in list", "body": "<pre><code>x = input()\ny = map(int, input().split())\nscore = list(y)\nscore2 = score.remove(max(score))\nprint(max(score2))\n</code></pre>\n\n<p>When I execute the above code with inputs x = 4 and y = 1 2 3 4, it shows an error message 'NoneType value is not iterable'. The last but previous line 'score2 = score.remove(max(score))' returns a None value. Why does this happen? I intend to create code which fetches the second largest number in the list</p>\n"}, {"tags": ["python", ".doc"], "comments": [{"owner": {"reputation": 145, "user_id": 3755558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U258o.jpg?s=128&g=1", "display_name": "Chandler Watson", "link": "https://stackoverflow.com/users/3755558/chandler-watson"}, "edited": false, "score": 0, "creation_date": 1531951242, "post_id": 51411434, "comment_id": 89794761, "body": "<a href=\"https://support.office.com/en-us/article/Choose-text-encoding-when-you-open-and-save-files-60d59c21-88b5-4006-831c-d536d42fd861\" rel=\"nofollow noreferrer\">Here&#39;s a quick guide</a> to encoding in Microsoft Word -- per the table near the bottom, it looks like if the Greek isn&#39;t encoded in Unicode, then it&#39;ll be in Windows 1253."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1531952453, "post_id": 51411434, "comment_id": 89795181, "body": "Positively weird. If you look at your file, it is just your basic 2-byte encoding for a Unicode block (the default is a 1-byte encoding, with the character set encoding defined in the basic table), so <i>any</i> text extractor should not have to do <i>anything</i> special. However, both <code>textract</code> as well as plain <code>antiword</code> (called from the command line) seem to silently replace non-ASCII characters in such blocks with <code>?</code>..."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1531952969, "post_id": 51411434, "comment_id": 89795290, "body": "A possible solution: convert your <code>.doc</code> to the more substantially supported (and newer) <code>.docx</code>, then use <code>python-docx</code>."}, {"owner": {"reputation": 21, "user_id": 6409883, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153804371271748/picture?type=large", "display_name": "Yanis Kartalis", "link": "https://stackoverflow.com/users/6409883/yanis-kartalis"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1531981163, "post_id": 51411434, "comment_id": 89802314, "body": "@usr2564301 Yes that is an obvious solution (as well as plain text) and it works like a charm but the problem is i have more than 2500 files like that. Is there a programmatic way to do that through python?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1532041899, "post_id": 51411434, "comment_id": 89836592, "body": "Of course there is, even if you have to read <a href=\"https://msdn.microsoft.com/en-us/library/cc313153(v=office.12).aspx\" rel=\"nofollow noreferrer\">Microsoft&#39;s tough documentation</a> on the Word format. But such an answer would be <i>far</i> too long for Stack Overflow... FYI, I wrote my own OLE-wrapper a while ago and adjusting it for Word&#39;s <code>WordDocument</code> stream gave me <code>This text is a test @  &#225;nti &#231;S&#227; GO.\u03a3\u0397\u039c\u0395\u0399\u03a9\u03a3\u0397 ...</code> (etc.) so yeah, it is <i>definitely</i> possible."}, {"owner": {"reputation": 869, "user_id": 4648809, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d2806509752d99c8d412f3c8d151a63e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4648809/alex"}, "edited": false, "score": 0, "creation_date": 1595925635, "post_id": 51411434, "comment_id": 111634996, "body": "I created library to extract text from doc files <a href=\"https://github.com/uvoteam/libdoc\" rel=\"nofollow noreferrer\">github.com/uvoteam/libdoc</a>"}], "owner": {"reputation": 21, "user_id": 6409883, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153804371271748/picture?type=large", "display_name": "Yanis Kartalis", "link": "https://stackoverflow.com/users/6409883/yanis-kartalis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 652, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531950392, "creation_date": 1531950392, "question_id": 51411434, "link": "https://stackoverflow.com/questions/51411434/textract-wont-read-doc-files-in-greek", "title": "Textract won&#39;t read .doc files in Greek", "body": "<p>I am trying to read a bunch of .doc files in Python to run some text analysis. The docs <a href=\"https://1drv.ms/w/s!Ai7TF-zwGitqhBX_RJePvy8hf3qB\" rel=\"nofollow noreferrer\">(an example of which is attached here) </a>contain certain non-ascii characters in Greek (for which i do not know the encoding MS Word uses). </p>\n\n<p>Code i am using:</p>\n\n<pre><code>import textract\ntext = textract.process(\"path_to_sample.doc\", extension = 'doc', encoding = \"utf_8\")\n</code></pre>\n\n<p>I tried many encoding arguments but non have worked. </p>\n\n<p>Any ideas? </p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10102101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b213a45fff218f1ff908bd49729111d?s=128&d=identicon&r=PG&f=1", "display_name": "jnord", "link": "https://stackoverflow.com/users/10102101/jnord"}, "edited": false, "score": 0, "creation_date": 1531951740, "post_id": 51411505, "comment_id": 89794945, "body": "Thanks for that, I&#39;ve tried copying the xpath and it still doesn&#39;t seem to be working."}, {"owner": {"reputation": 113, "user_id": 6763104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54aa635555c9f2006f5d36807432ffd?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Ganesan", "link": "https://stackoverflow.com/users/6763104/jay-ganesan"}, "reply_to_user": {"reputation": 23, "user_id": 10102101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b213a45fff218f1ff908bd49729111d?s=128&d=identicon&r=PG&f=1", "display_name": "jnord", "link": "https://stackoverflow.com/users/10102101/jnord"}, "edited": false, "score": 0, "creation_date": 1531952166, "post_id": 51411505, "comment_id": 89795092, "body": "Try wait.until or sleep, before click."}], "tags": [], "owner": {"reputation": 113, "user_id": 6763104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54aa635555c9f2006f5d36807432ffd?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Ganesan", "link": "https://stackoverflow.com/users/6763104/jay-ganesan"}, "is_accepted": false, "score": 0, "last_activity_date": 1531950726, "creation_date": 1531950726, "answer_id": 51411505, "question_id": 51411414, "link": "https://stackoverflow.com/questions/51411414/using-selenium-with-python-to-click-on-a-href-button/51411505#51411505", "title": "Using Selenium with Python to click on a href button", "body": "<p>Using \"find_elements_by_xpath\". Right click and copy the XPATH from the browser.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 10054993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fee46c5d46975ca150bd0e99f117406d?s=128&d=identicon&r=PG&f=1", "display_name": "S.Srikanth", "link": "https://stackoverflow.com/users/10054993/s-srikanth"}, "is_accepted": false, "score": 0, "last_activity_date": 1532020758, "creation_date": 1532020758, "answer_id": 51428552, "question_id": 51411414, "link": "https://stackoverflow.com/questions/51411414/using-selenium-with-python-to-click-on-a-href-button/51428552#51428552", "title": "Using Selenium with Python to click on a href button", "body": "<p>Using explicit waits could potentially solve the problem. For explicit waits, you can either use the ID or XPATH. I prefer using XPATH. For getting the XPATH, right click on the element, click <em>Inspect</em>, right click on <code>&lt;a href=\"/crm/tab/Reports\"&gt;Reports&lt;/a&gt;</code> and choose <em>Copy</em>, and then <em>Copy XPATH</em>. Now that we have the XPATH, do the following:</p>\n\n<pre><code>button_xpath = \"the xpath of your element\"\nbutton = WebDriverWait(driver, 10).until(EC.element_to_be_clickable((By.XPATH, button_xpath))).click()\n</code></pre>\n\n<p>The above code will wait up to 10 seconds until the button element is found. If the element is not found, a TimeoutException will be given. </p>\n\n<p>The following imports are necessary:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10102101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b213a45fff218f1ff908bd49729111d?s=128&d=identicon&r=PG&f=1", "display_name": "jnord", "link": "https://stackoverflow.com/users/10102101/jnord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1532020758, "creation_date": 1531950282, "question_id": 51411414, "link": "https://stackoverflow.com/questions/51411414/using-selenium-with-python-to-click-on-a-href-button", "title": "Using Selenium with Python to click on a href button", "body": "<p>I am using selenium and python to automate web tasks. I have tried using multiple different functions to try to click on the button I need: </p>\n\n<pre><code>&lt;a href=\"/crm/tab/Reports\"&gt;Reports&lt;/a&gt;\n\n.find_element_by_link_text(\"Reports\").click()\n.find_element_by_id\n.find_element_by_name\n.find_element_by_class_name\n.find_element_by_css_selector\n</code></pre>\n\n<p>Can't seem to make this work, any suggestions would be appreciated. </p>\n"}, {"tags": ["python", "arrays", "numpy", "random", "normal-distribution"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1531951082, "post_id": 51411388, "comment_id": 89794700, "body": "<code>np.random.normal</code> accepts arrays as arguments.  Just past the first column of your data as the first argument, and the second column as the second argument."}, {"owner": {"reputation": 141, "user_id": 3310237, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/74ca963917b8f71ef2841e423cd855b6?s=128&d=identicon&r=PG&f=1", "display_name": "Mauro Assis", "link": "https://stackoverflow.com/users/3310237/mauro-assis"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1531953083, "post_id": 51411388, "comment_id": 89795315, "body": "It worked and it&#180;s astonishing fast, tks."}], "owner": {"reputation": 141, "user_id": 3310237, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/74ca963917b8f71ef2841e423cd855b6?s=128&d=identicon&r=PG&f=1", "display_name": "Mauro Assis", "link": "https://stackoverflow.com/users/3310237/mauro-assis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531950151, "creation_date": 1531950151, "question_id": 51411388, "link": "https://stackoverflow.com/questions/51411388/aplying-numpy-random-normal-in-an-array", "title": "Aplying numpy.random.normal in an array", "body": "<p>I\u00b4ve a huge numpy array (68M records) containing mean and std deviation pairs.</p>\n\n<p>I'd like to create a third column estimated using numpy.random.normal using the other columns values.</p>\n\n<p>It is possible? If it isn\u00b4t, what\u00b4s the best (fast) way to do that?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1531950268, "post_id": 51411379, "comment_id": 89794378, "body": "Really? <a href=\"https://ideone.com/WfGgpr\" rel=\"nofollow noreferrer\">I get <code>4</code></a>."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1531950326, "post_id": 51411379, "comment_id": 89794393, "body": "If this is Python3 than <code>a</code> and <code>b</code> will always be <code>float</code>s.  You may be looking for the <code>float.is_integer</code> method."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1531950334, "post_id": 51411379, "comment_id": 89794400, "body": "What version of python are you using? <code>math.ceil</code> is different between 2 and 3. 3 can return an <code>int</code>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1531950410, "post_id": 51411379, "comment_id": 89794428, "body": "I still get <code>4</code> <a href=\"https://ideone.com/vleur9\" rel=\"nofollow noreferrer\">in Python 2</a>."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1531950691, "post_id": 51411379, "comment_id": 89794545, "body": "See <a href=\"https://docs.python.org/2/library/math.html#math.ceil\" rel=\"nofollow noreferrer\"><b><code>math.ceil</code></b></a> and <a href=\"https://docs.python.org/3/library/math.html#math.ceil\" rel=\"nofollow noreferrer\"><b><code>math.ceil</code></b></a> for Python 2 and 3 respectively."}, {"owner": {"reputation": 1, "user_id": 10102116, "user_type": "registered", "profile_image": "https://graph.facebook.com/686848334989264/picture?type=large", "display_name": "Tingshen Yang", "link": "https://stackoverflow.com/users/10102116/tingshen-yang"}, "edited": false, "score": 0, "creation_date": 1532255766, "post_id": 51411379, "comment_id": 89897186, "body": "this is version 3.6.5"}], "owner": {"reputation": 1, "user_id": 10102116, "user_type": "registered", "profile_image": "https://graph.facebook.com/686848334989264/picture?type=large", "display_name": "Tingshen Yang", "link": "https://stackoverflow.com/users/10102116/tingshen-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531951871, "creation_date": 1531950084, "last_edit_date": 1531951871, "question_id": 51411379, "link": "https://stackoverflow.com/questions/51411379/the-result-of-the-code-is-always-0", "title": "The result of the code is always 0", "body": "<p>Could anyone help please? The result of the code keeps showing 0. Where I went wrong? Thanks.</p>\n\n<p><img src=\"https://i.stack.imgur.com/pLGQi.png\" alt=\"What I tried to do\"></p>\n\n<pre><code>import math\ndef m_t(r_w,r_l,t_w,t_l):\n a = r_w/t_w\n b = r_l/t_l\n c = math.ceil(a)\n d = math.ceil(b)\n if isinstance(a,int) &amp; isinstance(b,int):\n    return a*b\n elif isinstance(a,int) &amp; isinstance(b,float):\n    return a*d\n elif isinstance(a,float) &amp; isinstance(b,int):\n    return c*b\n else:\n    return c*d\n\nm_t(4,4,2,2)\n</code></pre>\n"}, {"tags": ["python", "pandas", "datetime"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531950864, "post_id": 51411362, "comment_id": 89794622, "body": "value contains 263, 264, etc?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531950976, "post_id": 51411362, "comment_id": 89794668, "body": "No first column is local year followed by local month, local day, local hour, and value (which are all zero). 263,264, etc are under Meas_type_element_alias"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531951228, "post_id": 51411362, "comment_id": 89794755, "body": "also what what do you mean by datetime object as XXX &#39; and VALUES&#39;?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531951474, "post_id": 51411362, "comment_id": 89794838, "body": "I mean having these separate columns ([ &#39;LOCAL_YEAR&#39;],[&#39;LOCAL_HOUR&#39;], [&#39;LOCAL_DAY&#39;], and [the column with 263 as coded values for 15 min, etc] --&gt; I would like to have a single column with this format YYYY-MM-DD  HH:MM:SS"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531951635, "post_id": 51411362, "comment_id": 89794899, "body": "I get that, it is the &#39;AND VALUES&#39; that I don&#39;t get"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531951758, "post_id": 51411362, "comment_id": 89794953, "body": "Ignore values. I meant I need to have only two cols from the original file. That is my mistake, will delete it from the question now. Sorry for the confusion."}], "answers": [{"comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531953307, "post_id": 51411730, "comment_id": 89795372, "body": "is this what you needed?"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531954689, "post_id": 51411730, "comment_id": 89795757, "body": "I don&#39;t know what you&#39;re doing but the suggestion is to do precisely what my answer says!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "edited": false, "score": 0, "creation_date": 1531954717, "post_id": 51411730, "comment_id": 89795764, "body": "Edited ==&gt;  I have added the code and the errors I am getting."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "edited": false, "score": 0, "creation_date": 1531954764, "post_id": 51411730, "comment_id": 89795773, "body": "I have done exactly what you said, If you look into the edited question."}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531954800, "post_id": 51411730, "comment_id": 89795783, "body": "almost exactly, can you include the results of print df.index?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "edited": false, "score": 0, "creation_date": 1531954959, "post_id": 51411730, "comment_id": 89795830, "body": "here it is ==&gt;    RangeIndex(start=0, stop=393977, step=1)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531955010, "post_id": 51411730, "comment_id": 89795839, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/176291/discussion-between-sina-shabani-and-yuca\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "is_accepted": true, "score": 0, "last_activity_date": 1531957494, "last_edit_date": 1531957494, "creation_date": 1531952058, "answer_id": 51411730, "question_id": 51411362, "link": "https://stackoverflow.com/questions/51411362/changing-a-coded-min-to-a-datetime-in-python-pandas/51411730#51411730", "title": "Changing a coded min to a datetime in python pandas", "body": "<p>Use a map to translate the alias into a minute and the iterate to build your dates</p>\n\n<pre><code>dmap = {263:0,264:16,265:31,266:46}\ndf['ALIAS_map'] = df['MEAS_TYPE_ELEMENT_ALIAS'].map(dmap)\ndf.reset_index(inplace=True)\nfor row in df.head(50).itertuples():    \n   df.loc[row[0],'date'] = datetime.datetime(int(row[1]),row[2],row[3],row[4],row[-1])\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10044922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 51411730, "answer_count": 1, "score": 0, "last_activity_date": 1531957494, "creation_date": 1531949966, "last_edit_date": 1531954610, "question_id": 51411362, "link": "https://stackoverflow.com/questions/51411362/changing-a-coded-min-to-a-datetime-in-python-pandas", "title": "Changing a coded min to a datetime in python pandas", "body": "<p>I have a data set which looks like this. I must mention that 263 means (0-15 min), 264 means (16-30 min), 265 means (31-45 min), and 266 is (46-60 min). I need to convert these columns to a single column as : YYYY-MM-DD HH:MM:SS </p>\n\n<pre><code>LOCAL_YEAR  LOCAL_MONTH LOCAL_DAY   LOCAL_HOUR  VALUE   FLAG    STATUS  MEAS_TYPE_ELEMENT_ALIAS\n2006    4   11  0   0       R   263\n2006    4   11  0   0       R   264\n2006    4   11  0   0       R   265\n2006    4   11  0   0       R   266\n2006    4   11  1   0       R   263\n2006    4   11  1   0       R   264\n2006    4   11  1   0       R   265\n2006    4   11  1   0       R   266\n</code></pre>\n\n<p>I was wondering if anyone could help me with this? </p>\n\n<p>This is the code: </p>\n\n<pre><code>import pandas as pd\nimport numpy as np \nraw_data=pd.read_csv('Squamish_263_264_265_266.csv')\n\n\n############################################## Reading rainfall and years ###################################\n\ndf=raw_data.iloc[:,[2,3,4,5,6,9]]\n#print(df)\n\nimport datetime \n\ndmap = {263:0,264:16,265:31,266:46}\ndf['MEAS_TYPE_ELEMENT_ALIAS_map'] = df['MEAS_TYPE_ELEMENT_ALIAS'].map(dmap)\nfor row, v in df.iterrows():\n    df.loc[row,'date'] = datetime.datetime(v['LOCAL_YEAR'],v['LOCAL_MONTH'],v['LOCAL_DAY'],v['LOCAL_HOUR'],v['MEAS_TYPE_ELEMENT_ALIAS_map'])\n</code></pre>\n\n<p>but it gives this error: </p>\n\n<p>TypeError: integer argument expected, got float</p>\n\n<p>and </p>\n\n<p>A value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead</p>\n"}, {"tags": ["python", "hdfs", "snakebite"], "owner": {"reputation": 565, "user_id": 9488397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32039a3e05d66108cb0d0ba488463b3?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Beck", "link": "https://stackoverflow.com/users/9488397/christopher-beck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542044681, "creation_date": 1531949790, "last_edit_date": 1531987008, "question_id": 51411323, "link": "https://stackoverflow.com/questions/51411323/snakebite-fails-with-client-mechanism-is-malformed", "title": "Snakebite fails with Client mechanism is malformed", "body": "<p>I am using the HDFSSensor in airflow, which somehow does not work, so I thought that there might be something wrong with snakebite. Therefore I tried running</p>\n\n<pre><code>snakebite -D ls /\n</code></pre>\n\n<p>in the terminal and it fails with the error</p>\n\n<blockquote>\n  <p>Request error: javax.security.sasl.SaslException<br>\n  Client mechanism is malformed</p>\n</blockquote>\n\n<p>From some github posts, I saw that the error has something to do with the following lines from debugging, so I tried following the solutions that include installing some libraries but the error stays the same:</p>\n\n<blockquote>\n  <p>DEBUG:snakebite.rpc_sasl:Available mechs: DIGEST-MD5,GSSAPI\n  DEBUG:snakebite.rpc_sasl:Chosen mech:</p>\n</blockquote>\n\n<p>I am working in a conda environment and hadoop fs -ls works perfectly fine. </p>\n"}, {"tags": ["python", "excel", "openpyxl"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 1, "creation_date": 1531986718, "post_id": 51411315, "comment_id": 89805394, "body": "openpyxl does not remove sorts. Please include the code you&#39;re using."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10128544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-abA6Fa4w4G4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7p_vWCHIHQzDGPp23R5oF4rmxXEoA/mo/photo.jpg?sz=128", "display_name": "Mike Groot", "link": "https://stackoverflow.com/users/10128544/mike-groot"}, "is_accepted": false, "score": 0, "last_activity_date": 1532445809, "last_edit_date": 1532445809, "creation_date": 1532443121, "answer_id": 51501401, "question_id": 51411315, "link": "https://stackoverflow.com/questions/51411315/openpyxl-removes-sorts-that-are-already-part-of-the-excel-file/51501401#51501401", "title": "Openpyxl removes sorts that are already part of the excel file", "body": "<p>This happens to me on mac. Here is the code for writing from a dataframe to a sheet. Afterwards, the sheet will delete the pre-formatted sort in the .xlsx</p>\n\n<pre><code>def add_sheet(self, df, sheet, min_col, max_col, sheet_dim):\n    index_positions = list(df.index.values)\n    r = 1\n    for x in index_positions:\n        _row = df.loc[x].values\n        c = min_col\n        r += 1\n        for val in _row:\n            if c &lt;= max_col:\n                sheet.cell(row=r, column=c).value = val\n                c += 1\n</code></pre>\n\n<p>Maybe it's how I save the excel file? Some parameter I'm missing? </p>\n\n<pre><code>test.save(\"test.xlsx\")\n</code></pre>\n\n<p>Nevermind, here is code that will strip all sorts from my excel file on Mac.</p>\n\n<pre><code>test = test.load_workbook(\"test.xlsx\")\ntest.save(\"test_save.xlsx\")\n</code></pre>\n\n<p>The file goes from 376KBs to 259KBs. This doesn't make any sense. </p>\n"}], "owner": {"reputation": 29, "user_id": 8588953, "user_type": "registered", "profile_image": "https://graph.facebook.com/2349956375289157/picture?type=large", "display_name": "Mike McHenry", "link": "https://stackoverflow.com/users/8588953/mike-mchenry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1532445809, "creation_date": 1531949760, "question_id": 51411315, "link": "https://stackoverflow.com/questions/51411315/openpyxl-removes-sorts-that-are-already-part-of-the-excel-file", "title": "Openpyxl removes sorts that are already part of the excel file", "body": "<p>Right now, I am sorting data with pandas and then adding those values into the excel file and it works great. The problem is that the excel file already has the sort coded in and when I write data to the xlsx it will remove the sort. My colleagues want to be able to use the built-in excel sort and I can't figure out why openpyxl will remove that sort when I write data to the file.</p>\n\n<p>Is there a parameter I'm missing or is this just how openpyxl operates? I can include code if it is needed.</p>\n\n<p>Using the latest version of python and openpyxl.</p>\n"}, {"tags": ["python", "loops", "matrix", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "is_accepted": true, "score": 0, "last_activity_date": 1531962418, "creation_date": 1531962418, "answer_id": 51412914, "question_id": 51411314, "link": "https://stackoverflow.com/questions/51411314/tkinter-dynamic-dictionary-for-matrix-cant-use-get-method-on-entry-windows/51412914#51412914", "title": "Tkinter Dynamic Dictionary for Matrix- Cant use .get method on entry windows", "body": "<p>You probably haven't looked at the content of entries, that you print just before mainloop()</p>\n\n<pre><code>entries ={}\nfor x in range(0,nocols*norows):\n           entries[\"Entrybox{0}\".format(x)]=Entry(master2).grid(row=gridrows[x], column=gridcols[x])\n\nprint(entries)\n</code></pre>\n\n<p><code>grid()</code>, <code>pack()</code> and <code>place()</code> all return <code>None</code>.</p>\n\n<p>If you want to keep the widget you need to assign it to a variable and then call <code>grid()</code>.</p>\n\n<pre><code>entries ={}\nfor x in range(0,nocols*norows):\n    widget = Entry(master2)\n    widget.grid(row=gridrows[x], column=gridcols[x])\n    entries[\"Entrybox{0}\".format(x)] = widget\n\nprint(entries)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10102079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f931cacae036bf3c3c5f89cf5bac03c8?s=128&d=identicon&r=PG&f=1", "display_name": "byrneg7", "link": "https://stackoverflow.com/users/10102079/byrneg7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 51412914, "answer_count": 1, "score": 0, "last_activity_date": 1531962418, "creation_date": 1531949751, "last_edit_date": 1531954641, "question_id": 51411314, "link": "https://stackoverflow.com/questions/51411314/tkinter-dynamic-dictionary-for-matrix-cant-use-get-method-on-entry-windows", "title": "Tkinter Dynamic Dictionary for Matrix- Cant use .get method on entry windows", "body": "<p>I have been working on a program which can generate a matrix of a user-defined size, and can then perform operations on the matrix. The program is divided into a few parts. </p>\n\n<p>First, the user enters the rows and columns, which, when submitted, will open a tkinter window with a matrix of entry boxes. </p>\n\n<p>Each of these entry boxes is a value in a dynamic <code>entries</code> dictionary. The lists <code>gridrows</code> and <code>gridcols</code> are used to give coordinates for the <code>.grid</code> method for arranging the entry boxes. </p>\n\n<p>The issue I am having is assigning a command to get the user input after typing their values into the matrix. I have tried creating a function <code>storevals</code> which will append all matrix entries to the <code>matrixinput</code> list. </p>\n\n<p>When I run this program, I get the the matrix entry window, and after typing in the values into each box of the matrix, I get the same error message from line 50: <code>AttributeError:\"NoneType\" object has no attribute \"get\"</code>. It appears that the entry boxes have no type, which seems to be lost after the <code>.grid</code> arranging of the windows. </p>\n\n<p>Is there any way to assign the user entries in these windows to a list? Any help would be hugely appreciated. </p>\n\n<p>Thanks!</p>\n\n<pre><code>from matplotlib import pyplot as plt\nfrom tkinter import *\n\n#Take user input for matrix size and store in matrixrows and matrixcols variables as integers.\nmaster = Tk()\nmaster.title(\"Matrix Size\")\nLabel(master, text = \"Rows\").grid(row=0)\nLabel(master, text = \"Columns\").grid(row=1)\n\n\ndef storevals():\n    matrixrows.append(int(rows.get()))\n    matrixcols.append(int(cols.get()))\n    master.quit()\n\nmatrixrows = []\nmatrixcols = []\n\n\nrows = Entry(master)\ncols = Entry(master)\n\nrows.grid(row = 0, column = 1)\ncols.grid(row =1, column = 1)\n\nButton(master, text= \"Enter\", command = storevals).grid(row=3, column =0, sticky=W, pady=4)\nmainloop()\n\nnorows = matrixrows[0]\nnocols = matrixcols[0]\nmatrixlist =[]\n\nfor i in range(0,norows):\n    matrixlist.append([])\n\nfor i in range(0,norows):\n    for j in range(0,nocols):\n        matrixlist[i].append(nocols*0)\n\n\n\n#Generate a matrix entry window with entries correpsonding to the matrix\n\nmaster2 = Tk()\nmaster2.title(\"Enter Matrix Values\")\nmatrixinput=[]\n\ndef storevals():\n    for key in entries:\n        matrixinput.append(entries[key].get())\n        print(matrixinput)\n\n\nButton(master2, text= \"Submit Matrix\", command = storevals).grid(row=norows+1, column =round(nocols/2), sticky=W, pady=4)\n\ngridrows=[]\ngridcols=[]\n\n\n#creates two lists, gridcols and gridrows which are used to align the entry boxes in the tkinter window\n\nfor i in range(0,norows):\n    for j in range(0,nocols):\n        gridrows.append(i)\n\nfor i in range(0,norows):\n    for j in range(0,nocols):\n        gridcols.append(j)\n\n\nentries ={}\nfor x in range(0,nocols*norows):\n           entries[\"Entrybox{0}\".format(x)]=Entry(master2).grid(row=gridrows[x], column=gridcols[x])\n\nprint(entries)\n\nmainloop()\n</code></pre>\n"}, {"tags": ["python", "django", "django-models", "django-forms"], "answers": [{"comments": [{"owner": {"reputation": 1967, "user_id": 7552761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1259153020839832/picture?type=large", "display_name": "Eric Kim", "link": "https://stackoverflow.com/users/7552761/eric-kim"}, "edited": false, "score": 0, "creation_date": 1531952299, "post_id": 51411680, "comment_id": 89795132, "body": "ok, I think I was mistaken about Create view&#39;s success_url attribute. But still, how does Django know when to direct to success_url? Why does it not direct to sucess_url upon clicking other buttons?"}, {"owner": {"reputation": 794, "user_id": 3717658, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vtnZE.jpg?s=128&g=1", "display_name": "Naqib Hakimi", "link": "https://stackoverflow.com/users/3717658/naqib-hakimi"}, "reply_to_user": {"reputation": 1967, "user_id": 7552761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1259153020839832/picture?type=large", "display_name": "Eric Kim", "link": "https://stackoverflow.com/users/7552761/eric-kim"}, "edited": false, "score": 0, "creation_date": 1531952611, "post_id": 51411680, "comment_id": 89795215, "body": "it has noting to do with buttons , a form submit button will sent POST request to the Django that&#39;s how it&#39;s knows what to do you can submit a form with any button but that is another topic"}, {"owner": {"reputation": 1967, "user_id": 7552761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1259153020839832/picture?type=large", "display_name": "Eric Kim", "link": "https://stackoverflow.com/users/7552761/eric-kim"}, "edited": false, "score": 0, "creation_date": 1531953017, "post_id": 51411680, "comment_id": 89795301, "body": "so, as long as the type=&quot;submit&quot; button is inside &lt;form&gt;, it will send POST request?"}, {"owner": {"reputation": 794, "user_id": 3717658, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vtnZE.jpg?s=128&g=1", "display_name": "Naqib Hakimi", "link": "https://stackoverflow.com/users/3717658/naqib-hakimi"}, "reply_to_user": {"reputation": 1967, "user_id": 7552761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1259153020839832/picture?type=large", "display_name": "Eric Kim", "link": "https://stackoverflow.com/users/7552761/eric-kim"}, "edited": false, "score": 1, "creation_date": 1531953279, "post_id": 51411680, "comment_id": 89795360, "body": "yes, but there is also other ways to submit the form with other button  Ex :  <a href=\"https://stackoverflow.com/questions/1200266/submit-a-form-using-jquery\" title=\"submit a form using jquery\">stackoverflow.com/questions/1200266/submit-a-form-using-jque&zwnj;&#8203;ry</a>"}], "tags": [], "owner": {"reputation": 794, "user_id": 3717658, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vtnZE.jpg?s=128&g=1", "display_name": "Naqib Hakimi", "link": "https://stackoverflow.com/users/3717658/naqib-hakimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1531951720, "creation_date": 1531951720, "answer_id": 51411680, "question_id": 51411302, "link": "https://stackoverflow.com/questions/51411302/django-how-does-get-absolute-url-work/51411680#51411680", "title": "Django - how does get_absolute_url work?", "body": "<p>the <code>CreateView</code> class inherit <code>success_url</code> property from <code>FormMixin</code>  by default it will get url from model </p>\n\n<pre><code>class WellInfoCreateView(CreateView):\n    template_name = 'practice_add_well.html'\n    context_object_name = 'bha_inputs'\n    model = models.WellInfo\n    fields = '__all__'\n    success_url = 'url'\n</code></pre>\n\n<p>see <a href=\"https://docs.djangoproject.com/en/2.0/ref/class-based-views/generic-editing/\" rel=\"nofollow noreferrer\">class-based-views</a> for more details </p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 14915995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39386774978bca5705b87a028660edd?s=128&d=identicon&r=PG&f=1", "display_name": "peterpeter5", "link": "https://stackoverflow.com/users/14915995/peterpeter5"}, "is_accepted": false, "score": 0, "last_activity_date": 1610727026, "creation_date": 1610727026, "answer_id": 65739535, "question_id": 51411302, "link": "https://stackoverflow.com/questions/51411302/django-how-does-get-absolute-url-work/65739535#65739535", "title": "Django - how does get_absolute_url work?", "body": "<p>I am also learning Django currently and found this question as I was asking it myself. I did a bit of further reading and think this is the answer to your question:</p>\n<p>Note that within your views, you are inheriting from <code>CreateView</code>. Now, when this view is run, i.e. when you submit your form, there are two possibilities: a successful submission or an error. If the former, then you need to know where to point following the submission. In this case, it is the variable <code>get_absolute_url</code>, which you can set to any url you like. Thus, when you successfully submit the form, you will be taken to this url.\nOtherwise, if there is an error when you try to submit the form, you will remain on the form page until submitted successfully.</p>\n<p>I think this explains what <code>get_absolute_url</code> does and why other links on the page don't also take you to this url.</p>\n"}], "owner": {"reputation": 1967, "user_id": 7552761, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1259153020839832/picture?type=large", "display_name": "Eric Kim", "link": "https://stackoverflow.com/users/7552761/eric-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 51411680, "answer_count": 2, "score": 0, "last_activity_date": 1610727026, "creation_date": 1531949721, "question_id": 51411302, "link": "https://stackoverflow.com/questions/51411302/django-how-does-get-absolute-url-work", "title": "Django - how does get_absolute_url work?", "body": "<p>My webpage looks like the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TvwAb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TvwAb.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I press \"Submit\" button, the page is \"redirected\" to some different page. If I don't specify <code>get_absolute_url</code> method in my <code>models.py</code>, I will get <code>ImproperlyConfigured</code> error. If I set where to redirect to in my models.py, upon clicking the Submit button, it will be directed to that page. What I don't understand is, how does only the Submit button redirected to whatever the link I set up on my models.py? Why clicking on the links on the sidebar doesn't redirect to it?</p>\n\n<p>Why does get_absolute_url method acts only upon clicking Submit button, but not the others?</p>\n\n<p><strong>practice_add_well.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n{% extends \"base.html\" %}\n  {% block content %}\n\n    &lt;h1&gt;Test Page for BHA&lt;/h1&gt;\n\n    &lt;form method=\"POST\"&gt;\n      {% csrf_token %}\n      {{ form.as_p }}\n      &lt;input type=\"submit\" class='btn btn-primary' value=\"Submit\"&gt;\n    &lt;/form&gt;\n\n  {% endblock %}\n</code></pre>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>from django.db import models\nfrom django.urls import reverse\n\nclass WellInfo(models.Model):\n    name = models.CharField(max_length=100)\n    region_location = models.CharField(max_length=100)\n    spud_date = models.CharField(max_length=100)\n    well_bore = models.CharField(max_length=100)\n    rig_name = models.CharField(max_length=100)\n    status = models.CharField(max_length=100)\n\n    def get_absolute_url(self):\n        return reverse(# some link....)\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from django.shortcuts import render\nfrom django.views.generic import View, TemplateView, ListView, DetailView, CreateView, UpdateView, DeleteView\n\nfrom . import models\n\nclass WellInfoCreateView(CreateView):\n    template_name = 'practice_add_well.html'\n    context_object_name = 'bha_inputs'\n    model = models.WellInfo\n    fields = '__all__'\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1531949890, "post_id": 51411244, "comment_id": 89794225, "body": "TBH, I find it confusing that dictionaries and sets use basically identical syntax. With two elements, the only thing that makes it possible to distinguish between a dictionary and a set is the symbol in the middle: <code>:</code> or <code>,</code>... Even worse, <code>{}</code> constructs an empty dictionary, while it seems more logical for it to construct a set."}, {"owner": {"reputation": 988, "user_id": 7806805, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/992610967537979/picture?type=large", "display_name": "Ishan Srivastava", "link": "https://stackoverflow.com/users/7806805/ishan-srivastava"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1531951236, "post_id": 51411244, "comment_id": 89794758, "body": "@ForceBru the python docs recommend using <code>set()</code> to create empty sets. I guess they ran out of (types of) braces.      <b><i>while it seems more logical for it to construct a set.</i></b>  actually with just a few weeks of experience in python you get used to the fact that <code>dicts</code> are far widely used than <code>sets</code> and to the default behaviour of <code>{}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3024, "user_id": 5833429, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1654342258166336/picture?type=large", "display_name": "Tom Wojcik", "link": "https://stackoverflow.com/users/5833429/tom-wojcik"}, "is_accepted": false, "score": 3, "last_activity_date": 1531949431, "creation_date": 1531949431, "answer_id": 51411252, "question_id": 51411244, "link": "https://stackoverflow.com/questions/51411244/python-typeerror-unhashable-type-list/51411252#51411252", "title": "python TypeError unhashable type list", "body": "<p>It's not a dictionary, it's a set.</p>\n"}, {"comments": [{"owner": {"reputation": 25411, "user_id": 84885, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wcYCF.jpg?s=128&g=1", "display_name": "Atma", "link": "https://stackoverflow.com/users/84885/atma"}, "edited": false, "score": 1, "creation_date": 1531949543, "post_id": 51411260, "comment_id": 89794078, "body": "haha! Whoops, a colon the difference between victory and defeat"}], "tags": [], "owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "is_accepted": false, "score": 2, "last_activity_date": 1531949481, "creation_date": 1531949481, "answer_id": 51411260, "question_id": 51411244, "link": "https://stackoverflow.com/questions/51411244/python-typeerror-unhashable-type-list/51411260#51411260", "title": "python TypeError unhashable type list", "body": "<p>You are trying to create set, not a dictionary</p>\n\n<p>Modify it as follows. Replace the <code>,</code> in between to <code>:</code></p>\n\n<pre><code>equipment_element = {'equipment_name': [0,0,0,0,0,0,0]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 988, "user_id": 7806805, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/992610967537979/picture?type=large", "display_name": "Ishan Srivastava", "link": "https://stackoverflow.com/users/7806805/ishan-srivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1531950475, "creation_date": 1531950475, "answer_id": 51411456, "question_id": 51411244, "link": "https://stackoverflow.com/questions/51411244/python-typeerror-unhashable-type-list/51411456#51411456", "title": "python TypeError unhashable type list", "body": "<p>maybe you were looking for this syntax</p>\n\n<pre><code>equipment_element = {'equipment_name': [0,0,0,0,0,0,0]}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>equipment_element = dict('equipment_name' = [0,0,0,0,0,0,0])\n</code></pre>\n\n<p>or</p>\n\n<pre><code>equipment_element = dict([('equipment_name', [0,0,0,0,0,0,0])])\n</code></pre>\n\n<p>This syntax is for creating a set:</p>\n\n<pre><code>equipment_element = {'equipment_name', [0,0,0,0,0,0,0]}\n</code></pre>\n"}], "owner": {"reputation": 25411, "user_id": 84885, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wcYCF.jpg?s=128&g=1", "display_name": "Atma", "link": "https://stackoverflow.com/users/84885/atma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1531950475, "creation_date": 1531949389, "question_id": 51411244, "link": "https://stackoverflow.com/questions/51411244/python-typeerror-unhashable-type-list", "title": "python TypeError unhashable type list", "body": "<p>I have the following dictionary:</p>\n\n<pre><code>equipment_element = {'equipment_name', [0,0,0,0,0,0,0]}\n</code></pre>\n\n<p>I can't figure out what is wrong with this list?</p>\n\n<p>I'm trying to work backwards from this post <a href=\"https://stackoverflow.com/questions/13675296/python-typeerror-unhashable-type-list\">Python: TypeError: unhashable type: &#39;list&#39;</a></p>\n\n<p>but my key is not a list, my value is.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "anaconda", "ipython", "virtualenv", "spyder"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 8402450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aea3b38b2da3eae52580c429b317a403?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Lanza", "link": "https://stackoverflow.com/users/8402450/mike-lanza"}, "reply_to_user": {"reputation": 2934, "user_id": 3902974, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LpTxC.jpg?s=128&g=1", "display_name": "Natsfan", "link": "https://stackoverflow.com/users/3902974/natsfan"}, "edited": false, "score": 0, "creation_date": 1532361538, "post_id": 51428276, "comment_id": 89934694, "body": "See the detailed instructions here <a href=\"https://stackoverflow.com/questions/43592879/how-to-change-python-version-in-anaconda-spyder\" title=\"how to change python version in anaconda spyder\">stackoverflow.com/questions/43592879/&hellip;</a>"}], "tags": [], "owner": {"reputation": 47, "user_id": 8402450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aea3b38b2da3eae52580c429b317a403?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Lanza", "link": "https://stackoverflow.com/users/8402450/mike-lanza"}, "is_accepted": false, "score": 2, "last_activity_date": 1532372194, "last_edit_date": 1532372194, "creation_date": 1532019756, "answer_id": 51428276, "question_id": 51411231, "link": "https://stackoverflow.com/questions/51411231/working-with-spyder-ide-and-virtualenv-changing-interpreter-but-does-not-seem-t/51428276#51428276", "title": "Working with Spyder IDE and virtualenv. Changing interpreter but does not seem to update", "body": "<p>I solved this by running Spyder from the virtual environment after activating it.  To do this run</p>\n\n<pre><code>activate myenv\npip install spyder\nspyder3\n</code></pre>\n\n<p>For whatever reason, Spyder was not pulling in the right environment even after changing the interpreter in the program.  By opening spyder through the virtual environment, it ran correctly.</p>\n\n<p>One final thing to note, when switching between virtual environments and running them this way, you still need to update the interpreter to point to the virtual environment to avoid confusion.</p>\n\n<p><strong>UPDATE</strong> So after doing more digging I found that the reason I was having so many issues with the Spyder installed with Anaconda is because it utilizes the site-packages folder that is installed with Anaconda.  I could not find out how to get Spyder to not look at these site packages even AFTER point to different interpreters.  It would be great if someone has a better solution to this but for right now, f you want to work with Spyder with a truly fresh install, I suggest creating a virtualenv spcific for this and installing spyder via the code above.  For simplicity, I then created a shortcut to the spyder3 app that was installed and will be opening spyder from there.  </p>\n\n<p>NOTE: You still need to update your interpreter if you have specific packages installed across them.  You will also need to install packages to environment where Spyder is installed to view data objects correctly in the variable explorer  (ie: pandas to view dataframes).  Be sure to reset spyder after doing this for changes to take place.</p>\n"}], "owner": {"reputation": 47, "user_id": 8402450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aea3b38b2da3eae52580c429b317a403?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Lanza", "link": "https://stackoverflow.com/users/8402450/mike-lanza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2109, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1532372194, "creation_date": 1531949289, "question_id": 51411231, "link": "https://stackoverflow.com/questions/51411231/working-with-spyder-ide-and-virtualenv-changing-interpreter-but-does-not-seem-t", "title": "Working with Spyder IDE and virtualenv. Changing interpreter but does not seem to update", "body": "<p>I'm currently working with Spyder version 3.2.8 and Python 3.6.  I have created a virtual base python environment using virtualenv.  Within that virtual environment, I have installed a few packages including ipykernel and cloudpickle to work in Spyder.</p>\n\n<p>When I open up Spyder and change the interpreter to the location of the virtualenv, I do not see this update in the console.  I tried restarted spyder and it appears to be launch a default generic ipython console.  If I try to import a package that I installed in the virtual environment, I get the typical \"no module\" error.  If I perform this same function within the virtualenv in the cmd window, I get no error.</p>\n\n<p>What am I doing wrong?  Any help understanding the difference between the virtual environments and these ipykernels would be helpful, it's all still new and confusing.</p>\n"}, {"tags": ["python", "tkinter", "pyhook"], "comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1532101654, "post_id": 51411228, "comment_id": 89862563, "body": "have you tried <code>pip install pyhook</code>? Python is very good at installing packages and doing it manually may not be a great idea."}, {"owner": {"reputation": 1, "user_id": 10102034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87683d30af9d90afbbc1b5198c3a45f?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket P", "link": "https://stackoverflow.com/users/10102034/aniket-p"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1532436303, "post_id": 51411228, "comment_id": 89965840, "body": "@Mike-SMT, I tried it and let the programs run for a few days. The issue is still present. What else should I try?"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1532437953, "post_id": 51411228, "comment_id": 89967176, "body": "Its hard to say without seeing some example code that can reproduce the problem. Maybe try some <code>print</code> statements at key points in your code to see where its getting stuck."}, {"owner": {"reputation": 1, "user_id": 10102034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87683d30af9d90afbbc1b5198c3a45f?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket P", "link": "https://stackoverflow.com/users/10102034/aniket-p"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1532521456, "post_id": 51411228, "comment_id": 90006263, "body": "@Mike-SMT Will do. It&#39;s pretty difficult to reproduce the problem since its not a consistent problem. I&#39;ll see what the print statements return though, thanks."}, {"owner": {"reputation": 1, "user_id": 10102034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87683d30af9d90afbbc1b5198c3a45f?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket P", "link": "https://stackoverflow.com/users/10102034/aniket-p"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1532546087, "post_id": 51411228, "comment_id": 90020971, "body": "@Mike-SMT Update: I figured it out using print statements. Certain items scanned by the scanner caused a bug if they were scanned first. It&#39;s working perfectly now. Thanks for your help!"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1532546270, "post_id": 51411228, "comment_id": 90021041, "body": "Nice. <code>print()</code> is a powerful debugging tool :D. I always start my debugging with <code>print()</code> if I don&#39;t see the problem right away. glad you got it."}], "owner": {"reputation": 1, "user_id": 10102034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87683d30af9d90afbbc1b5198c3a45f?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket P", "link": "https://stackoverflow.com/users/10102034/aniket-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531949820, "creation_date": 1531949257, "last_edit_date": 1531949820, "question_id": 51411228, "link": "https://stackoverflow.com/questions/51411228/pyhook-works-only-sometimes-not-consistently", "title": "PyHook Works Only Sometimes, not Consistently", "body": "<p>I developed a Python program for use on multiple computers. The program is a counter that calculates time splits for every time a barcode scanner reads a QR code, and writes these time splits to CSV files an updates a dashboard with the count. Python does not have focus for this use, which is why pyHook is necessary to receive the barcode scans. Python 2.7 is installed on every computers' hard drive, and the Python program itself is on our network drive so it can write CSV files to the network.</p>\n\n<p>I could not find an installer for pyHook for Windows (64 bit), so I just copied the necessary module file into the site-packages folder in Python on the hard drive.</p>\n\n<p>The issue I'm running into is that the program has worked on every computer multiple times but it's a coin flip whether it will work or not on any given try, which makes no sense to me and is why it's incredibly difficult to troubleshoot.</p>\n\n<p>The program first opens an input window, and then based on the inputs creates a dashboard with tkinter. The user then goes to a different web program for scanning, so the dashboard doesn't have focus at this point, and then starts to scan. Even when the program fails, it gets this far and then nothing from the barcode scanner is read in.</p>\n\n<p>Does anyone have any ideas on why this inconsistent error happens? Do I need to do something else to install pyHook properly? Is there an issue with access to the modules that I can fix?</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 4202, "user_id": 1637126, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/51fcf955014c0e6094e7dbf9ed120ca0?s=128&d=identicon&r=PG", "display_name": "Kevin Johnsrude", "link": "https://stackoverflow.com/users/1637126/kevin-johnsrude"}, "is_accepted": true, "score": 0, "last_activity_date": 1532021876, "creation_date": 1532021876, "answer_id": 51428836, "question_id": 51411212, "link": "https://stackoverflow.com/questions/51411212/tensorflow-tf-map-fn-removes-a-dimension/51428836#51428836", "title": "TensorFlow tf.map_fn removes a dimension", "body": "<p>The workaround to the problem is to operate on the flattened tensor.  So change:</p>\n\n<pre><code>    def parser(self, serialized_example):\n        features = tf.parse_single_example(\n            serialized_example,\n            features={\n                'image': tf.FixedLenFeature([], tf.string),\n                'label': tf.FixedLenFeature([], tf.string),\n            })\n        label = tf.decode_raw(features['label'], tf.uint8)\n        label.set_shape([256 * 512])\n        label = tf.cast(tf.reshape(label, [256, 512]), tf.int32)\n\n        output_label = tf.map_fn(lambda x: self.class_map(x), label)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>    def parser(self, serialized_example):\n        features = tf.parse_single_example(\n            serialized_example,\n            features={\n                'image': tf.FixedLenFeature([], tf.string),\n                'label': tf.FixedLenFeature([], tf.string),\n            })\n        label = tf.decode_raw(features['label'], tf.uint8)\n        label.set_shape([256 * 512])\n\n        output_label = tf.map_fn(lambda x: self.class_map(x), label)\n        label = tf.cast(tf.reshape(label, [256, 512]), tf.int32)\n        output_label = tf.cast(tf.reshape(output_label, [256, 512]), tf.int32)\n</code></pre>\n"}], "owner": {"reputation": 4202, "user_id": 1637126, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/51fcf955014c0e6094e7dbf9ed120ca0?s=128&d=identicon&r=PG", "display_name": "Kevin Johnsrude", "link": "https://stackoverflow.com/users/1637126/kevin-johnsrude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 51428836, "answer_count": 1, "score": 1, "last_activity_date": 1532021876, "creation_date": 1531949163, "last_edit_date": 1531957299, "question_id": 51411212, "link": "https://stackoverflow.com/questions/51411212/tensorflow-tf-map-fn-removes-a-dimension", "title": "TensorFlow tf.map_fn removes a dimension", "body": "<p>I am trying to remap values in an input Tensor using a defaultdict.</p>\n\n<pre><code>class MyDataSet(object):\n    def __init__(self):\n        self.class_map = MyDataSet.remap_class()\n\n    @staticmethod\n    def remap_class():\n        class_remap = defaultdict(lambda: 11)\n        class_remap[128] = 0  \n        class_remap[130] = 1  \n        class_remap[132] = 2\n        # ...\n\n    def parser(self, serialized_example):\n        features = tf.parse_single_example(\n            serialized_example,\n            features={\n                'image': tf.FixedLenFeature([], tf.string),\n                'label': tf.FixedLenFeature([], tf.string),\n            })\n        label = tf.decode_raw(features['label'], tf.uint8)\n        label.set_shape([256 * 512])\n        label = tf.cast(tf.reshape(label, [256, 512]), tf.int32)\n\n        output_label = tf.map_fn(lambda x: self.class_map(x), label)\n\n    #...\n    dataset = tf.data.TFRecordDataset(filenames).repeat()\n    dataset = dataset.map(self.parser, num_parallel_calls=batch_size)\n</code></pre>\n\n<p>The label shape is (256,512) but the output_label shape is (256,). If I try to change the output_label with </p>\n\n<pre><code>output_label = tf.reshape(output_label, [256, 512])\n</code></pre>\n\n<p>I get the exception</p>\n\n<pre><code>ValueError: Cannot reshape a tensor with 256 elements to shape [256,512] (131072 elements) for 'Reshape_2' (op: 'Reshape') with input shapes: [256], [2] and with input tensors computed as partial shapes: input[1] = [256,512].\n</code></pre>\n\n<p>If I try to change the output_label with </p>\n\n<pre><code>output_label.set_shape([256, 512])\n</code></pre>\n\n<p>I get the exception</p>\n\n<pre><code>ValueError: Shapes (256,) and (256, 512) must have the same rank\n</code></pre>\n\n<p>How do I map values and maintain the same shape in output_label as in label?</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib", "cv2"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1531949742, "post_id": 51411210, "comment_id": 89794160, "body": "I do not understand the question. All colors from the wikipedia table <i>are</i> RGB colors. You can convert from <code>(255,0,0)</code> to <code>(1.0, 0.0, 0.0)</code> by dividing by 255."}, {"owner": {"reputation": 1491, "user_id": 6480793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe10b5df5ec1164b5bade347d8599f8?s=128&d=identicon&r=PG&f=1", "display_name": "Delioth", "link": "https://stackoverflow.com/users/6480793/delioth"}, "edited": false, "score": 0, "creation_date": 1531950071, "post_id": 51411210, "comment_id": 89794305, "body": "Question is unclear; all of the given values are RGB, they&#39;re just differing notations of it. The conversion between them is mostly trivial mathematics (divide by or multiply by a number to convert)."}, {"owner": {"reputation": 45345, "user_id": 470184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DzXRW.jpg?s=128&g=1", "display_name": "blue-sky", "link": "https://stackoverflow.com/users/470184/blue-sky"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1531951159, "post_id": 51411210, "comment_id": 89794728, "body": "@ImportanceOfBeingErnest please see question update."}, {"owner": {"reputation": 45345, "user_id": 470184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DzXRW.jpg?s=128&g=1", "display_name": "blue-sky", "link": "https://stackoverflow.com/users/470184/blue-sky"}, "reply_to_user": {"reputation": 1491, "user_id": 6480793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe10b5df5ec1164b5bade347d8599f8?s=128&d=identicon&r=PG&f=1", "display_name": "Delioth", "link": "https://stackoverflow.com/users/6480793/delioth"}, "edited": false, "score": 0, "creation_date": 1531951171, "post_id": 51411210, "comment_id": 89794731, "body": "@Delioth please see question update."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 2, "creation_date": 1531952555, "post_id": 51411210, "comment_id": 89795206, "body": "See e.g. <a href=\"https://www.learnopencv.com/why-does-opencv-use-bgr-color-format/\" rel=\"nofollow noreferrer\">Why does OpenCV use BGR color format ?</a>."}], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1531951358, "creation_date": 1531951358, "answer_id": 51411608, "question_id": 51411210, "link": "https://stackoverflow.com/questions/51411210/how-to-convert-the-arithmetic-color-to-its-rgb-counterpart/51411608#51411608", "title": "How to convert the arithmetic color to its RGB counterpart?", "body": "<p>OpenCV uses BGR, not RGB.  Swap the 0 and 2 channels.</p>\n\n<pre><code>m_img = (cv2.line(img,(0,0),(100,100),(255.0,0.0,0),5))  # blue line\nm_img = (cv2.line(img,(0,0),(100,100),(0,0.0,255.0),5))  # red line\n</code></pre>\n"}], "owner": {"reputation": 45345, "user_id": 470184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DzXRW.jpg?s=128&g=1", "display_name": "blue-sky", "link": "https://stackoverflow.com/users/470184/blue-sky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 51411608, "answer_count": 1, "score": 0, "last_activity_date": 1531952504, "creation_date": 1531949155, "last_edit_date": 1531952504, "question_id": 51411210, "link": "https://stackoverflow.com/questions/51411210/how-to-convert-the-arithmetic-color-to-its-rgb-counterpart", "title": "How to convert the arithmetic color to its RGB counterpart?", "body": "<p>When using an RGB color <code>(255.0,0.0,0.0)</code> (red) in openCV the output is blue instead.</p>\n\n<pre><code>import cv2\nimport matplotlib.pyplot as plt\n\nplt.plot([1,2,3,4] ,  color=[1.0, 0.0, 0.0])\nplt.savefig('tester.png')\nimg = cv2.imread('tester.png')\nm_img = (cv2.line(img,(0,0),(100,100),(255.0,0.0,0.0),5))\ncv2.imwrite('./update.png', m_img)\n</code></pre>\n\n<p>tester.png :</p>\n\n<p><a href=\"https://i.stack.imgur.com/ogORF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ogORF.png\" alt=\"enter image description here\"></a></p>\n\n<p>update.png : </p>\n\n<p><a href=\"https://i.stack.imgur.com/lNfuN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lNfuN.png\" alt=\"enter image description here\"></a></p>\n\n<p>How to modify line <code>m_img = (cv2.line(img,(0,0),(100,100),(255.0,0.0,0.0),5))</code> so that same RGB line colour from <code>plt.plot([1,2,3,4] ,  color=[1.0, 0.0, 0.0])</code> is drawn ?</p>\n"}, {"tags": ["python", "group-by", "conditional-statements"], "answers": [{"comments": [{"owner": {"reputation": 1111, "user_id": 8618380, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/10211660306718142/picture?type=large", "display_name": "Alessandro Ceccarelli", "link": "https://stackoverflow.com/users/8618380/alessandro-ceccarelli"}, "edited": false, "score": 0, "creation_date": 1531951380, "post_id": 51411321, "comment_id": 89794813, "body": "it should be &quot;- X[&#39;Delta&#39;]&quot; instead of &quot;+&quot;; the rest works perfectly"}], "tags": [], "owner": {"reputation": 1, "user_id": 10066639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hk92rLU6N5w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qkIYkZSKavmDq6BTYULJOoMNz2Bw/mo/photo.jpg?sz=128", "display_name": "Brian Bowyer", "link": "https://stackoverflow.com/users/10066639/brian-bowyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1531949784, "creation_date": 1531949784, "answer_id": 51411321, "question_id": 51411193, "link": "https://stackoverflow.com/questions/51411193/sum-values-from-different-dataframes/51411321#51411321", "title": "Sum values from different dataframes", "body": "<p>If I'm understanding you correctly, first you want to merge:</p>\n\n<pre><code> X = X.merge(dframe, how='left', left_on='Class', right_on='Pred_class')\n</code></pre>\n\n<p>and then you want to just add as normal:</p>\n\n<pre><code> X['Final_Q'] = X['Quantity'] + X['Delta']\n</code></pre>\n\n<p>which will get you this:</p>\n\n<pre><code>   Class  Quantity      Delta  Pred_class    Final_Q\n0      0         1  -0.046348           0   0.953652\n1      0         5  -0.046348           0   4.953652\n2      1         6   1.856508           1   7.856508\n3      2         8  20.347518           2  28.347518\n4      3         9  -7.138728           3   1.861272\n5      4         0   6.642686           4   6.642686\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 168, "user_id": 6585300, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_eBfcgTYNAQ/AAAAAAAAAAI/AAAAAAAAAIc/MsuKZZm_xLY/photo.jpg?sz=128", "display_name": "Josh Herzberg", "link": "https://stackoverflow.com/users/6585300/josh-herzberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1531950188, "creation_date": 1531950188, "answer_id": 51411395, "question_id": 51411193, "link": "https://stackoverflow.com/questions/51411193/sum-values-from-different-dataframes/51411395#51411395", "title": "Sum values from different dataframes", "body": "<p>You can use a pandas merge_asof once you rename <code>Pred_class</code> as below. </p>\n\n<p><code>\ndframe = dframe.rename(columns={'Pred_class':'Class'})\ns = pd.merge_asof(X, dframe, on='Class')\ns['FinalQ'] = s['Quantity'] - s['Class']</code></p>\n\n<p><code>Index Quantity  Class  Delta  FinalQ\n0         1      0  -0.04       1\n1         5      0  -0.04       5\n2         6      1   1.90       5\n3         8      2  20.30       6\n4         9      3  -7.00       6\n5         0      4   6.60      -4\n</code></p>\n"}], "owner": {"reputation": 1111, "user_id": 8618380, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/10211660306718142/picture?type=large", "display_name": "Alessandro Ceccarelli", "link": "https://stackoverflow.com/users/8618380/alessandro-ceccarelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1531950188, "creation_date": 1531949057, "question_id": 51411193, "link": "https://stackoverflow.com/questions/51411193/sum-values-from-different-dataframes", "title": "Sum values from different dataframes", "body": "<p>I have the following dataframes:</p>\n\n<pre><code>print(X)\n\nQuantity   Class    \n   1         0\n   5         0\n   6         1\n   8         2\n   9         3\n   0         4\n...\n\nprint(dframe)\n\n   Pred_class    Delta\n           0  -0.046348\n           1   1.856508\n           2  20.347518\n           3  -7.138728\n           4   6.642686\n</code></pre>\n\n<p>I would like to create an additional columns to X - \"Final_Q\" - sum of X[\"Quantity\"] and the corresponding \"Delta\", <strong>for each class</strong>:</p>\n\n<p>print(X)</p>\n\n<pre><code>Quantity   Class    Final_Q  \n   1         0        1 - (-0.046348) \n   5         0        5 - (-0.046348)\n   6         1        6 - (+1.856508)\n...\n</code></pre>\n\n<p>I tried with:</p>\n\n<pre><code>for i in np.unique(X[\"Class\"]):\n\n        #Isolate     \n        X[\"Class\"] == i\n        dframe[\"Pred_class\"] == i\n\n        X_test_virtuale[\"BOOST\"] = X_test_virtuale[\"ALG_N_forecast\"] - dframe.iloc[0,0]\n</code></pre>\n\n<p>But it does not seem to work properly;</p>\n"}, {"tags": ["python", "opencv", "image-processing", "computer-vision", "laplacianofgaussian"], "answers": [{"comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1532020770, "post_id": 51413702, "comment_id": 89828212, "body": "I didn&#39;t mean for you to scratch out half your answer... It&#39;s all <i>technically</i> correct, except the nomenclature of what you can call &quot;an edge detector&quot;. With that part removed, I am no longer conflicted about upvoting. :)"}, {"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1532038018, "post_id": 51413702, "comment_id": 89835604, "body": "Thank you very much. I have a question on the code: why does the last line of the code return 255- output?"}, {"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1532109642, "post_id": 51413702, "comment_id": 89866619, "body": "@hkchengrex thank you very much. Could you please explain how I would use the copyTo function? I&#39;ve asked another question [here] (<a href=\"https://stackoverflow.com/questions/51448049/how-to-use-opencv-copyto-function\" title=\"how to use opencv copyto function\">stackoverflow.com/questions/51448049/&hellip;</a>) on this topic."}], "tags": [], "owner": {"reputation": 2594, "user_id": 3237438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/832f4d1b3dcad6c4049fb9ae49b17f07?s=128&d=identicon&r=PG&f=1", "display_name": "hkchengrex", "link": "https://stackoverflow.com/users/3237438/hkchengrex"}, "is_accepted": true, "score": 5, "last_activity_date": 1532051339, "last_edit_date": 1532051339, "creation_date": 1531969247, "answer_id": 51413702, "question_id": 51411156, "link": "https://stackoverflow.com/questions/51411156/is-laplacian-of-gaussian-for-blob-detection-or-for-edge-detection/51413702#51413702", "title": "Is Laplacian of Gaussian for blob detection or for edge detection?", "body": "<p>EDIT: <a href=\"https://stackoverflow.com/a/51414532/3237438\">Cris Luengo</a> is right. Ignore the part about edge detector.</p>\n\n<hr>\n\n<p>Laplacian of Gaussian(LoG) can be used as <del><strong>both</strong> edge detector and </del>blob detector. I will skip the detailed mathematics and rationale, I think you can read them on a book or some websites <a href=\"http://www.cse.psu.edu/~rtc12/CSE486/lecture11_6pp.pdf\" rel=\"nofollow noreferrer\">here</a>, <a href=\"https://homepages.inf.ed.ac.uk/rbf/HIPR2/log.htm\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://fourier.eng.hmc.edu/e161/lectures/gradient/node8.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>To see why it can be used as both, let's look at its plot and kernel.</p>\n\n<p><a href=\"https://i.stack.imgur.com/xA2lK.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xA2lK.gif\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/CbLu3.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CbLu3.gif\" alt=\"enter image description here\"></a></p>\n\n<p>If you have a blob with radius of 3 and value 1 centered at the kernel, and the background has value 0, you will have a very strong (negative) response. It is clear why it can do blob detection if the radius is set properly.</p>\n\n<p><del>How about edge detection? Well it is not like Sobel operator which gives you gradient and strong response for edges. Sobel operator does not give you accurate edges as the gradient usually rise and fall across a few pixels. Your edge would then be several pixels wide. To make it localize more accurate, we can find the pixel with maximum (or minimum) gradient locally. This implies its second derivative (Laplacian) should equal zero, or has a zero-crossing at that point.</del></p>\n\n<p><a href=\"https://i.stack.imgur.com/ZAO0t.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZAO0t.gif\" alt=\"Before\"></a><a href=\"https://i.stack.imgur.com/2NtQg.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2NtQg.gif\" alt=\"After\"></a></p>\n\n<p>You can see the processed image has both a light and dark band. The zero-crossing is the edge. To see this with a kernel, try sliding a perfect step edge across the kernel manually to see how the respond changes.</p>\n\n<p>For you second question, I guess the absolute is trying to find both light and dark blob (light blob, dark background; dark blob, light background) as they gives strong negative and strong positive response respectively. It then find the max across all images at each pixel location. For each output pixel, it uses the pixel at the image with the maximum response as output. I think his rationale is that pixels with strong impulse (small blob) are in-focus.</p>\n\n<p>He is using bitwise_not as a copy mechanism. It sets some pixels, specified by the mask, to the bitwise not of the source image. At the end, you would have <code>output</code> consisting of pixels from different sources, except that all of them have undergone bitwise not. To recover the true image, simply 'NOT' them again, as <code>NOT(NOT(x)) = x</code>. <code>255-x</code> <a href=\"https://en.wikipedia.org/wiki/Bitwise_operation#NOT\" rel=\"nofollow noreferrer\">does exactly that</a>. I think a <a href=\"https://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#ab931fe25e359c1fe727e526aa5693ea9\" rel=\"nofollow noreferrer\">copyTo</a> would work too, not sure why he chose otherwise.</p>\n\n<p>Images taken from <a href=\"http://fourier.eng.hmc.edu/e161/lectures/gradient/node8.html\" rel=\"nofollow noreferrer\">http://fourier.eng.hmc.edu/e161/lectures/gradient/node8.html</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1532033778, "post_id": 51414532, "comment_id": 89834059, "body": "Thank you very much. I have a quick question... are you stating that the code above constructs a Marr-Hildreth edge detector?"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "reply_to_user": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1532034142, "post_id": 51414532, "comment_id": 89834189, "body": "@john: No, it doesn&#39;t construct a Marr-Hildreth edge detector. <a href=\"https://stackoverflow.com/a/51413702/7328782\">hkcgengrex</a> already answered the part of the question about what the code does, I didn&#39;t feel the need to repeat that. You should probably accept that answer instead. My answer was just to clarify what &quot;edge detector&quot; means and to give some more information about the LoG. Basically I&#39;m answering only the question in the title. :)"}, {"owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "edited": false, "score": 0, "creation_date": 1532034256, "post_id": 51414532, "comment_id": 89834232, "body": "I appreciate all of your help Cris."}], "tags": [], "owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "is_accepted": false, "score": 12, "last_activity_date": 1531975728, "creation_date": 1531975728, "answer_id": 51414532, "question_id": 51411156, "link": "https://stackoverflow.com/questions/51411156/is-laplacian-of-gaussian-for-blob-detection-or-for-edge-detection/51414532#51414532", "title": "Is Laplacian of Gaussian for blob detection or for edge detection?", "body": "<p><a href=\"https://stackoverflow.com/a/51413702/7328782\">hkchengrex's answer</a> is fairly complete, but I don't completely agree. Maybe I'm a bit of a stickler for correct nomenclature. A detector is something that yields a strong response at the location of the thing to be detected.</p>\n\n<p><strong>The Laplacian of Gaussian (LoG) is not an edge detector</strong>, since it has zero crossings at (near<sup>*</sup>) edges. But it can be used to construct an edge detector. The edge detector so constructed is the <a href=\"https://en.wikipedia.org/wiki/Marr%E2%80%93Hildreth_algorithm\" rel=\"noreferrer\">Marr-Hildreth edge detector</a>. Because of this, it often gets classified under edge detectors. To me, <strong>it's a line detector</strong>.</p>\n\n<p>The Laplace is the sum of second derivatives (the trace of the Hessian matrix). An image convolved with the LoG is the same as the Laplacian of an image convolved with a Gaussian:</p>\n\n<pre><code>img * [ d^2/dx^2 G(x,y) + d^2/dy^2 G(x,y) ] = d^2/dx^2 [ img * G(x,y) ] + d^2/dy^2 [ img * G(x,y) ]\n</code></pre>\n\n<p>Thus, the LoG yields a strong response at extrema in the image (where the second derivative is maximal). This happens at the peaks of \"blobs\", and along the ridges of lines.</p>\n\n<p>Let's take this simple test image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BOOqn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BOOqn.png\" alt=\"image with blocks, lines and dots\"></a></p>\n\n<p>and apply the LoG to it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/j1bSs.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/j1bSs.png\" alt=\"LoG of image above\"></a></p>\n\n<p>Here, mid-gray are pixels with a value of 0. As can be seen, it has strong (negative) response along the thin line and on the small dots. It also has medium responses around the edges of the wider objects (negative inside the edge, positive outside); the zero crossings are close to where the edges are.</p>\n\n<p>We can threshold this image to detect the thin line and the dots:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PZ81R.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PZ81R.png\" alt=\"LoG &lt; 65\"></a></p>\n\n<p>(thresholding the magnitude yields the same result). We can lower the threshold to see that medium responses happen around edges of interest:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pkzT5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pkzT5.png\" alt=\"abs(LoG) &lt; 20\"></a></p>\n\n<p>It takes more than a simple threshold to obtain edges. In contrast, the gradient magnitude (first derivatives are strong at the location of edges) can be thresholded to obtain edges:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YJg2A.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YJg2A.png\" alt=\"gradmag &lt; 50\"></a> </p>\n\n<p>The gradient magnitude is not useful to detect lines, as it detects the two edges along the lines, rather than the line itself. The gradient magnitude above is computed using Gaussian derivatives (Sobel is another option, but not as precise).</p>\n\n<p>Note that the <a href=\"https://en.wikipedia.org/wiki/Canny_edge_detector\" rel=\"noreferrer\">Canny edge detector</a> is based on the gradient magnitude, it adds non-maximum suppression and hysteresis thresholding to make the detections thin and meaningful.</p>\n\n<hr>\n\n<p><sup>*</sup> The second derivative has a zero crossing at the inflection points (which can be taken as the true location of edges). However, the Laplacian is the sum of second derivatives. If you think of the second derivative in the direction of the gradient, its zero crossing will be well localized. But now add the second derivative in the perpendicular direction (along  the edge). This second derivative will be zero along a straight edge, negative along a convex curved edge (e.g. the edge of a circle), and positive along a concave curved edge. Adding these two values will therefore cause the zero crossings to shift on curved edges, the stronger the curvature, the more the zero crossing will deviate from its true location.</p>\n"}], "owner": {"reputation": 579, "user_id": 9944029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Wi8Jqc0S_Cg/AAAAAAAAAAI/AAAAAAAAAAA/Vb61cAUqlbI/photo.jpg?sz=128", "display_name": "john", "link": "https://stackoverflow.com/users/9944029/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3941, "favorite_count": 3, "accepted_answer_id": 51413702, "answer_count": 2, "score": 8, "last_activity_date": 1568405092, "creation_date": 1531948848, "last_edit_date": 1568405092, "question_id": 51411156, "link": "https://stackoverflow.com/questions/51411156/is-laplacian-of-gaussian-for-blob-detection-or-for-edge-detection", "title": "Is Laplacian of Gaussian for blob detection or for edge detection?", "body": "<p>The following code is provided from (was asked to remove the link). But I was wondering how it exactly works. I was confused if this was considered edge detection or blob detection, as <a href=\"https://en.wikipedia.org/wiki/Blob_detection\" rel=\"nofollow noreferrer\">Wikipedia list the Laplacian of Gaussian (LoG) as blob detection</a>. </p>\n\n<p>Also, could somebody explain and provide a deeper explanation for why the absolute value is calculated and what is going on in the <code>focus_stack()</code> function? </p>\n\n<pre><code>#   Compute the gradient map of the image\ndef doLap(image):\n\n    # YOU SHOULD TUNE THESE VALUES TO SUIT YOUR NEEDS\n    kernel_size = 5         # Size of the laplacian window\n    blur_size = 5           # How big of a kernal to use for the gaussian blur\n                            # Generally, keeping these two values the same or very close works well\n                            # Also, odd numbers, please...\n\n    blurred = cv2.GaussianBlur(image, (blur_size,blur_size), 0)\n    return cv2.Laplacian(blurred, cv2.CV_64F, ksize=kernel_size)\n\n#\n#   This routine finds the points of best focus in all images and produces a merged result...\n#\ndef focus_stack(unimages):\n    images = align_images(unimages)\n\n    print \"Computing the laplacian of the blurred images\"\n    laps = []\n    for i in range(len(images)):\n        print \"Lap {}\".format(i)\n        laps.append(doLap(cv2.cvtColor(images[i],cv2.COLOR_BGR2GRAY)))\n\n    laps = np.asarray(laps)\n    print \"Shape of array of laplacians = {}\".format(laps.shape)\n\n    output = np.zeros(shape=images[0].shape, dtype=images[0].dtype)\n\n    abs_laps = np.absolute(laps)\n    maxima = abs_laps.max(axis=0)\n    bool_mask = abs_laps == maxima\n    mask = bool_mask.astype(np.uint8)\n    for i in range(0,len(images)):\n        output = cv2.bitwise_not(images[i],output, mask=mask[i])\n\n    return 255-output\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1531949990, "post_id": 51411117, "comment_id": 89794273, "body": "Sorry, not possible. Tkinter just passes your request along to the OS, and the OS decides where the window goes. I tested in Linux, and the popup is always centered in the GUI; while on Windows the popup is always centered on the monitor."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 1, "creation_date": 1531950055, "post_id": 51411117, "comment_id": 89794297, "body": "If it&#39;s really important you can easily make your own popup. <a href=\"https://gist.github.com/novel-yet-trivial/ac4816791a0a7f15497bb8f17cb32612\" rel=\"nofollow noreferrer\">Here&#39;s a template</a>."}], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 9951487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UobGQ.png?s=128&g=1", "display_name": "Steve S", "link": "https://stackoverflow.com/users/9951487/steve-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1531975059, "last_edit_date": 1531975059, "creation_date": 1531952511, "answer_id": 51411784, "question_id": 51411117, "link": "https://stackoverflow.com/questions/51411117/tkmessagebox-showwarning-how-to-choose-location-of-pop-up/51411784#51411784", "title": "tkMessageBox.showwarning how to choose location of pop up?", "body": "<p>I was looking into this last week and found this solution, \nit works perfectly and easy to include in your code.</p>\n\n<p>Centering Root Window on Screen </p>\n\n<pre><code>from tkinter import * \nroot = Tk()\n\n\n# Gets the requested values of the height and width.\nwindowWidth = root.winfo_reqwidth()\nwindowHeight = root.winfo_reqheight()\n\n# Gets both half the screen width/height and window width/height\npositionRight = int(root.winfo_screenwidth()/2 - windowWidth/2)\npositionDown = int(root.winfo_screenheight()/2 - windowHeight/2)\n\n# Positions the window in the center of the page.\nroot.geometry(\"+{}+{}\".format(positionRight, positionDown))\n</code></pre>\n\n<p>I didn't write this code and can't remember where it came from, but thanks to the author anyway.</p>\n"}], "owner": {"reputation": 146, "user_id": 9997211, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0V-Yqig-2Xg/AAAAAAAAAAI/AAAAAAAAADA/taM4SboqhDM/photo.jpg?sz=128", "display_name": "wowwee", "link": "https://stackoverflow.com/users/9997211/wowwee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 51411784, "answer_count": 1, "score": 0, "last_activity_date": 1531975059, "creation_date": 1531948672, "question_id": 51411117, "link": "https://stackoverflow.com/questions/51411117/tkmessagebox-showwarning-how-to-choose-location-of-pop-up", "title": "tkMessageBox.showwarning how to choose location of pop up?", "body": "<p>I know you can use geometry to determine the location of a window or top level in tkinter, but how about for a tkMessageBox? I have a program with a tiny GUI and it appears usually in the top left of the screen, but the pop up always shoots to the middle of the screen. I just need a way to use geometry (or something like it), on the pop up. </p>\n\n<p>Thank you so much to all who read!</p>\n"}, {"tags": ["python", "multithreading", "parallel-processing"], "comments": [{"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1531950285, "post_id": 51411098, "comment_id": 89794382, "body": "<code>multiprocessing</code> (what <code>concurrent.futures.process</code> is based on) doesn&#39;t share memory natively so you cannot (normally, there are exceptions) have an object instance (or its methods) called from multiple processes. Read <a href=\"https://stackoverflow.com/a/44186168\"><code>this answer</code></a> for more info and a potential workaround."}, {"owner": {"reputation": 257, "user_id": 9559925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b240d793c8093e67a27d6bed2f3047?s=128&d=identicon&r=PG&f=1", "display_name": "user491626", "link": "https://stackoverflow.com/users/9559925/user491626"}, "reply_to_user": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1531951374, "post_id": 51411098, "comment_id": 89794810, "body": "@zwer I am not calling one object instance from multiple processes. I am calling different object instances. &quot;instances&quot; is a list of object instances, I am calling them one by one and assign each one to one process."}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 1, "creation_date": 1531952371, "post_id": 51411098, "comment_id": 89795154, "body": "Those instances were created in your main process, you cannot just <i>pass</i> them to another process - when you start a new process it has no idea there are some instances in another process which is why Python tries to <i>pickle</i> the instance to send it to the new process... and fails as you cannot pickle an instance method."}, {"owner": {"reputation": 257, "user_id": 9559925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b240d793c8093e67a27d6bed2f3047?s=128&d=identicon&r=PG&f=1", "display_name": "user491626", "link": "https://stackoverflow.com/users/9559925/user491626"}, "reply_to_user": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1531953382, "post_id": 51411098, "comment_id": 89795393, "body": "@zwer wow, you are right. So, when I create instances, I have to assign them to different processes right there? How can I do that?"}, {"owner": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1531954278, "post_id": 51411098, "comment_id": 89795637, "body": "Create the instances in the processes themselves and just pass enough information to instantiate them there. The other alternative, which I do not recommend, is to have it done semi-automatically as in the linked answer."}, {"owner": {"reputation": 257, "user_id": 9559925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b240d793c8093e67a27d6bed2f3047?s=128&d=identicon&r=PG&f=1", "display_name": "user491626", "link": "https://stackoverflow.com/users/9559925/user491626"}, "reply_to_user": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1531955956, "post_id": 51411098, "comment_id": 89796084, "body": "@zwer you mean I can just write pool.sumbit(A,i) to create an instance inside a process?"}, {"owner": {"reputation": 257, "user_id": 9559925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b240d793c8093e67a27d6bed2f3047?s=128&d=identicon&r=PG&f=1", "display_name": "user491626", "link": "https://stackoverflow.com/users/9559925/user491626"}, "reply_to_user": {"reputation": 21366, "user_id": 7553525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ua0kY.png?s=128&g=1", "display_name": "zwer", "link": "https://stackoverflow.com/users/7553525/zwer"}, "edited": false, "score": 0, "creation_date": 1531957618, "post_id": 51411098, "comment_id": 89796487, "body": "@zwer I am confused. If what you are saying is correct, why does my code works here? <a href=\"https://stackoverflow.com/questions/51407464/why-doesnt-parallelizing-decrease-the-runtime\" title=\"why doesnt parallelizing decrease the runtime\">stackoverflow.com/questions/51407464/&hellip;</a> There I assign object instances to different processes later (after creating the instances)"}], "owner": {"reputation": 257, "user_id": 9559925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b240d793c8093e67a27d6bed2f3047?s=128&d=identicon&r=PG&f=1", "display_name": "user491626", "link": "https://stackoverflow.com/users/9559925/user491626"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531948582, "creation_date": 1531948582, "question_id": 51411098, "link": "https://stackoverflow.com/questions/51411098/error-in-multiprocessing-using-concurrent-futures", "title": "Error in multiprocessing using concurrent.futures", "body": "<p>This is a follow-up question for the question I asked <a href=\"https://stackoverflow.com/questions/51389664/parallelizing-a-python-code-for-different-instances-of-a-class\">here</a>. I tried to parallelize my code as follows:</p>\n\n<pre><code>import concurrent.futures as futures\n\nclass A(object):\n\n    def __init__(self, q):\n        self.p = q\n\n    def add(self, num):\n        r = 0\n        for _ in xrange(10000):\n            r += num\n        return r\n\n\nnum_instances = 5\n\ninstances = []\nfor i in xrange(num_instances):\n    instances.append(A(i))\n\nn = 20\n# Create a pool of processes. By default, one is created for each CPU in your machine.\nresults = []\npool = futures.ProcessPoolExecutor(max_workers=num_instances)\n\nfor inst in instances:\n    future = pool.submit(inst.add, n)\n    results.append(future.result())\n\npool.join()\n\nprint(results)\n</code></pre>\n\n<p>But, I got this error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File\n  \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/queues.py\",\n  line 268, in _feed\n      send(obj) PicklingError: Can't pickle : attribute lookup <strong>builtin</strong>.instancemethod failed</p>\n</blockquote>\n\n<p>Any idea why I get this error? I know we can use map function to assign jobs, but I intentionally don't want to do that.</p>\n"}, {"tags": ["javascript", "python", "matplotlib", "plotly", "plotly-dash"], "answers": [{"tags": [], "owner": {"reputation": 2386, "user_id": 5033146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Jvoz.png?s=128&g=1", "display_name": "Nils", "link": "https://stackoverflow.com/users/5033146/nils"}, "is_accepted": false, "score": 0, "last_activity_date": 1532032779, "creation_date": 1532032779, "answer_id": 51431361, "question_id": 51411090, "link": "https://stackoverflow.com/questions/51411090/how-to-plot-a-line-in-plotly-from-origin-to-the-mouse-coordinates-of-the-user-u/51431361#51431361", "title": "How to plot a line in plotly from origin to the mouse coordinates of the user, using plotly/Python/Dash", "body": "<p>An useful package to get the actual mouse position within dash is the package <a href=\"https://github.com/jimmybow/mydcc\" rel=\"nofollow noreferrer\">mydcc</a></p>\n\n<p>At first you need to import it within your script:</p>\n\n<pre><code>import mydcc\n</code></pre>\n\n<p>With that you can define listeners:</p>\n\n<pre><code>app.layout = html.Div([\n        mydcc.Listener( id = \"listener\", aim = 'graph' ),\n        dcc.Graph(id='graph')\n    ])\n</code></pre>\n\n<p>The callback can be handled e.g. by this:</p>\n\n<pre><code>@app.callback(Output('graph', 'figure'),\n              [Input('uuu', 'data')])\ndef update_graph(mouseData):\n    if mouseData:\n        x_data = [0, mouseData['x']]\n        y_data = [0, mouseData['y']]\n    else:\n        x_data = [0, 10]\n        y_data = [0,20]\n\n    #... some code for your figure\n\n    return {'data': data, 'layout': layout}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10101981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce9f685fe4bedd7ee828ef67d32f197?s=128&d=identicon&r=PG&f=1", "display_name": "Faiz Siddiqui", "link": "https://stackoverflow.com/users/10101981/faiz-siddiqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1072, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1532032779, "creation_date": 1531948542, "last_edit_date": 1531988134, "question_id": 51411090, "link": "https://stackoverflow.com/questions/51411090/how-to-plot-a-line-in-plotly-from-origin-to-the-mouse-coordinates-of-the-user-u", "title": "How to plot a line in plotly from origin to the mouse coordinates of the user, using plotly/Python/Dash", "body": "<p>I want to plot a line from origin (0,0) to the mouse coordinates (x,y) of the user. My plan is to use the mouse coordinates of the user and to use the @app.callback method to update the graph. My main problem is in getting the mouse coordinates of the user. I'm using plotly, dash and python.</p>\n\n<p>I found a method to get the mouse coords on the plotly community (<a href=\"https://community.plot.ly/t/how-to-make-shape-track-mouse-motion/1604\" rel=\"nofollow noreferrer\">https://community.plot.ly/t/how-to-make-shape-track-mouse-motion/1604</a>), code posted by etienne at <a href=\"https://codepen.io/etpinard/pen/EyydEj\" rel=\"nofollow noreferrer\">https://codepen.io/etpinard/pen/EyydEj</a> . \nThe main function seems to be to the <strong>p2c</strong> part</p>\n\n<pre><code>gd.addEventListener('mousemove', function(evt) {\nvar xInDataCoord = xaxis.p2c(evt.x - l);\nvar yInDataCoord = yaxis.p2c(evt.y - t);\n</code></pre>\n\n<p>However, this is in JavaScript and I want to implement this using python and I can not find a similar method in Python. </p>\n\n<p>Any solution?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "slice"], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 1, "last_activity_date": 1531948804, "creation_date": 1531948804, "answer_id": 51411140, "question_id": 51411087, "link": "https://stackoverflow.com/questions/51411087/a-different-result-between-concat-and-np-r-when-combining-dataframe-slices/51411140#51411140", "title": "A different result between concat and np_r when combining dataframe slices", "body": "<p>Use <code>axis=1</code></p>\n\n<pre><code>a=df.iloc[:,0:2]\nb=df.iloc[:,6:8]\ndf1=pd.concat([a,b],sort=False, axis=1)\n\n    group1  group2  group7  time\n0   A       A       A       -6\n1   A       A       A       -5\n2   A       A       A       -4\n3   A       A       A       -3\n4   A       A       A       -2\n5   A       A       A       -6\n6   A       A       A       -3\n7   A       A       A       -4\n</code></pre>\n"}], "owner": {"reputation": 389, "user_id": 9248018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hloRx.png?s=128&g=1", "display_name": "Nicola", "link": "https://stackoverflow.com/users/9248018/nicola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1531949454, "accepted_answer_id": 51411140, "answer_count": 1, "score": 0, "last_activity_date": 1531948804, "creation_date": 1531948538, "question_id": 51411087, "link": "https://stackoverflow.com/questions/51411087/a-different-result-between-concat-and-np-r-when-combining-dataframe-slices", "closed_reason": "Duplicate", "title": "A different result between concat and np_r when combining dataframe slices", "body": "<p>Let's assume the following is a dataframe</p>\n\n<pre><code>import pandas as pd\nimport numpy as np  \ndf = pd.DataFrame({'group1' : ['A', 'A', 'A', 'A',\n                         'A', 'A', 'A', 'A'],\n                   'group2' : ['A', 'A', 'A', 'A',\n                         'A', 'A', 'A', 'A'],\n                   'group3' : ['A', 'A', 'A', 'A',\n                         'A', 'A', 'A', 'A'],\n                   'group4' : ['A', 'A', 'A', 'A',\n                         'A', 'A', 'A', 'A'],\n                   'group5' : ['C', 'C', 'C', 'C',\n                         'C', 'E', 'E', 'E'],\n                   'group6' : ['C', 'C', 'C', 'C',\n                         'C', 'E', 'E', 'E'],\n                   'group7' : ['A', 'A', 'A', 'A',\n                         'A', 'A', 'A', 'A'],\n                   'time' : [-6,-5,-4,-3,-2,-6,-3,-4] , \n                   'col': [1,2,3,4,5,6,7,8]})\n</code></pre>\n\n<p>Now, I only wish to select certain slices from the dataframe and the first method I apply is concat:</p>\n\n<pre><code>a=df.iloc[:,0:2]\nb=df.iloc[:,6:8]\ndf1=pd.concat([a,b],sort=False)\ndf1\n</code></pre>\n\n<p>The output I get from this code is the following</p>\n\n<pre><code>  group1 group2 group7  time\n0      A      A    NaN   NaN\n1      A      A    NaN   NaN\n2      A      A    NaN   NaN\n3      A      A    NaN   NaN\n4      A      A    NaN   NaN\n5      A      A    NaN   NaN\n6      A      A    NaN   NaN\n7      A      A    NaN   NaN\n0    NaN    NaN      A  -6.0\n1    NaN    NaN      A  -5.0\n2    NaN    NaN      A  -4.0\n3    NaN    NaN      A  -3.0\n4    NaN    NaN      A  -2.0\n5    NaN    NaN      A  -6.0\n6    NaN    NaN      A  -3.0\n7    NaN    NaN      A  -4.0\n</code></pre>\n\n<p>It seems to be an odd result. But if I tried with np_r</p>\n\n<pre><code>df.iloc[:5, np.r_[0:2,6:8]]\n</code></pre>\n\n<p>The output is the correct one...</p>\n\n<pre><code>  group1 group2 group7  time\n0      A      A      A    -6\n1      A      A      A    -5\n2      A      A      A    -4\n3      A      A      A    -3\n4      A      A      A    -2\n5      A      A      A    -6\n6      A      A      A    -3\n7      A      A      A    -4\n</code></pre>\n\n<p>Is there a more efficient way with concat to fix the output and is np_r the best way to combine slices of dataframes and if so, why?</p>\n"}, {"tags": ["python", "pandas", "for-loop"], "comments": [{"owner": {"reputation": 3024, "user_id": 5833429, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1654342258166336/picture?type=large", "display_name": "Tom Wojcik", "link": "https://stackoverflow.com/users/5833429/tom-wojcik"}, "edited": false, "score": 0, "creation_date": 1531949202, "post_id": 51411040, "comment_id": 89793938, "body": "DO NOT use list as an argument. Read <a href=\"https://docs.python-guide.org/writing/gotchas/\" rel=\"nofollow noreferrer\">docs.python-guide.org/writing/gotchas</a>"}, {"owner": {"reputation": 3024, "user_id": 5833429, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1654342258166336/picture?type=large", "display_name": "Tom Wojcik", "link": "https://stackoverflow.com/users/5833429/tom-wojcik"}, "edited": false, "score": 0, "creation_date": 1531949372, "post_id": 51411040, "comment_id": 89794014, "body": "It would be easier if you gave us a code to create a sample df."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "edited": false, "score": 0, "creation_date": 1531949170, "post_id": 51411197, "comment_id": 89793918, "body": "That doesn&#39;t really work for me here, because I need to group invoices by the unique company ID and only apply the function within that grouping, hence the for loop."}, {"owner": {"reputation": 1, "user_id": 10066639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hk92rLU6N5w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qkIYkZSKavmDq6BTYULJOoMNz2Bw/mo/photo.jpg?sz=128", "display_name": "Brian Bowyer", "link": "https://stackoverflow.com/users/10066639/brian-bowyer"}, "reply_to_user": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "edited": false, "score": 0, "creation_date": 1531950222, "post_id": 51411197, "comment_id": 89794364, "body": "Ah, in that case, any time you want to group X by Y in pandas you want groupby().  <code>df.groupby(&quot;CompanyID&quot;).apply(func)</code> does work as well. It&#39;s a little less intuitive, unfortunately, because you get the whole group as a dataframe as the argument to the function with that apply(), but you should be able to do something with it."}], "tags": [], "owner": {"reputation": 1, "user_id": 10066639, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hk92rLU6N5w/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qkIYkZSKavmDq6BTYULJOoMNz2Bw/mo/photo.jpg?sz=128", "display_name": "Brian Bowyer", "link": "https://stackoverflow.com/users/10066639/brian-bowyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1531949069, "creation_date": 1531949069, "answer_id": 51411197, "question_id": 51411040, "link": "https://stackoverflow.com/questions/51411040/trouble-with-for-loop-in-a-function-and-combing-multiple-series-output/51411197#51411197", "title": "Trouble with for loop in a function and combing multiple series output", "body": "<p>apply() is a very useful method in pandas that applies a function to every row or column of a DataFrame.</p>\n\n<p>So, if your DataFrame is <code>df</code>:</p>\n\n<pre><code>def creditspend(row):\n    # some calculation code here\n    return spend\n\ndf['spend_rate'] = df.apply(creditspend)\n</code></pre>\n\n<p>(You can also use apply() on columns with the axis=1 keyword.)</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "edited": false, "score": 0, "creation_date": 1531952195, "post_id": 51411562, "comment_id": 89795101, "body": "This seems like a great solution. When I tried to implement it, though, I get       <code>AttributeError: &#39;float&#39; object has no attribute &#39;days&#39;</code>"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "edited": false, "score": 0, "creation_date": 1531999779, "post_id": 51411562, "comment_id": 89813904, "body": "Please post a sample of your data and <code>dtypes</code>. It seems your <i>date</i> may not be a date time."}, {"owner": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "edited": false, "score": 0, "creation_date": 1532021178, "post_id": 51411562, "comment_id": 89828421, "body": "The data you used is effectively identical to mine. The date is a datetime, I converted it with dt.date method. I get timedeltas in days with no problem when passing through a company ID in my original function."}, {"owner": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "edited": false, "score": 0, "creation_date": 1532022384, "post_id": 51411562, "comment_id": 89828998, "body": "I think the issue is in the lambda function, but changing it to   <code>lambda x: abs(int(x.days))</code>  returned the same error."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "edited": false, "score": 0, "creation_date": 1532026945, "post_id": 51411562, "comment_id": 89831151, "body": "Are you getting an error with this solution which you should be able to copy/paste directly and run in empty Python environment? I use Python 3.4/pandas 0.23."}, {"owner": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "edited": false, "score": 0, "creation_date": 1532027277, "post_id": 51411562, "comment_id": 89831297, "body": "I ran this  <code>df1[&#39;Days&#39;] = df1.Date.diff().map(lambda x: abs(x.days))</code>  after sorting by id and date and it worked great. My only problem now is I have to make the value of Days NaN for the first occurrence of each id. Any ideas on how to do that?"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "edited": false, "score": 0, "creation_date": 1532029693, "post_id": 51411562, "comment_id": 89832319, "body": "I do not understand. Other than your new item, what was the original problem described above?"}], "tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": false, "score": 0, "last_activity_date": 1531951086, "creation_date": 1531951086, "answer_id": 51411562, "question_id": 51411040, "link": "https://stackoverflow.com/questions/51411040/trouble-with-for-loop-in-a-function-and-combing-multiple-series-output/51411562#51411562", "title": "Trouble with for loop in a function and combing multiple series output", "body": "<p>Consider a <code>groupby</code> for a <em>CompanyID</em> aggregation. Below demonstrates with random data:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nnp.random.seed(7182018)\ndf = pd.DataFrame({'CompanyID': np.random.choice(['julia', 'pandas', 'r', 'sas', 'stata', 'spss'],50),\n                   'Date': np.random.choice(pd.Series(pd.date_range('2018-01-01', freq='D', periods=180)), 50),\n                   'Credits': np.random.uniform(0,1000,50)\n                  }, columns=['Date', 'CompanyID', 'Credits'])\n\n# SORT ONCE OUTSIDE OF PROCESSING\ndf = df.sort_values(by=['CompanyID', 'Date'], ascending=[True, False]).reset_index(drop=True)\n\ndef creditspend(g):          \n    g['days'] = g.Date.diff().map(lambda x: abs(x.days))\n    g['spend'] = g['Credits']/g['days']\n\n    return g\n\ngrp_df = df.groupby('CompanyID').apply(creditspend)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>print(grp_df.head(20))\n\n#          Date CompanyID     Credits  days       spend\n# 0  2018-06-20     julia  280.522287   NaN         NaN\n# 1  2018-06-12     julia  985.009523   8.0  123.126190\n# 2  2018-05-17     julia  892.308179  26.0   34.319545\n# 3  2018-05-03     julia   97.410360  14.0    6.957883\n# 4  2018-03-26     julia  480.206077  38.0   12.637002\n# 5  2018-03-07     julia   78.892365  19.0    4.152230\n# 6  2018-03-03     julia  878.671506   4.0  219.667877\n# 7  2018-02-25     julia  905.172807   6.0  150.862135\n# 8  2018-02-19     julia  970.016418   6.0  161.669403\n# 9  2018-02-03     julia  669.073067  16.0   41.817067\n# 10 2018-01-23     julia  636.926865  11.0   57.902442\n# 11 2018-01-11     julia  790.107486  12.0   65.842291\n# 12 2018-06-16    pandas  639.180696   NaN         NaN\n# 13 2018-05-21    pandas  565.432415  26.0   21.747401\n# 14 2018-04-22    pandas  145.232115  29.0    5.008004\n# 15 2018-04-13    pandas  379.964557   9.0   42.218284\n# 16 2018-04-12    pandas  538.168690   1.0  538.168690\n# 17 2018-03-20    pandas  783.572993  23.0   34.068391\n# 18 2018-03-14    pandas  618.354489   6.0  103.059081\n# 19 2018-02-10    pandas  859.278127  32.0   26.852441\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9830721, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Chad", "link": "https://stackoverflow.com/users/9830721/chad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1531951086, "creation_date": 1531948283, "last_edit_date": 1531949070, "question_id": 51411040, "link": "https://stackoverflow.com/questions/51411040/trouble-with-for-loop-in-a-function-and-combing-multiple-series-output", "title": "Trouble with for loop in a function and combing multiple series output", "body": "<p>I'm new to python and am struggling to figure something out. I'm doing some data analysis on an invoice database in pandas with columns of $ amounts, credits, date, and a unique company ID for each package bought. </p>\n\n<p>I want to run every unique company id through a function that will calculate the average spend rate of these credits based on the difference of package purchase dates.  I have the basics figured out in my function, and it returns a series indexed to the original dataframe with the values of the average amount of credits spent each day between packages. However, I only have it working with one company ID at a time, and I don'tknow what kind of process I can do to combine all of these different series for each company id to be able to correctly add a new column onto my dataframe with this average credit spend value for each package. Here's my code so far:</p>\n\n<pre><code>def creditspend(mylist = []):\n    for i in mylist:        \n        a = df.loc[df['CompanyId'] == i]\n        a = a.sort_values(by=['Date'], ascending=False)\n        days = a.Date.diff().map(lambda x: abs(x.days))\n        spend = a['Credits']/days        \n    print(spend)\n</code></pre>\n\n<p>If I call</p>\n\n<pre><code>creditspend(mylist=[8, 15]) \n</code></pre>\n\n<p>(with multiple inputs) it obviously does not work. What do I need to do to complete this function?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "restructuredtext"], "comments": [{"owner": {"reputation": 9881, "user_id": 2214933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrPyi.jpg?s=128&g=1", "display_name": "Steve Piercy", "link": "https://stackoverflow.com/users/2214933/steve-piercy"}, "edited": false, "score": 1, "creation_date": 1531953631, "post_id": 51411025, "comment_id": 89795463, "body": "Have a look at the section on that page <a href=\"http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#field-lists\" rel=\"nofollow noreferrer\">Field Lists</a>, the referenced <a href=\"http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#field-lists\" rel=\"nofollow noreferrer\">docutils field lists</a>, the Sphinx extension for <a href=\"http://www.sphinx-doc.org/en/master/usage/restructuredtext/field-lists.html\" rel=\"nofollow noreferrer\">field lists</a>, and <a href=\"https://www.python.org/dev/peps/pep-0287/\" rel=\"nofollow noreferrer\">docstrings</a>."}], "answers": [{"tags": [], "owner": {"reputation": 685, "user_id": 1169797, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c8cdf1c4380419fc73340fbb8739dfae?s=128&d=identicon&r=PG", "display_name": "mooglinux", "link": "https://stackoverflow.com/users/1169797/mooglinux"}, "is_accepted": true, "score": 1, "last_activity_date": 1531955805, "creation_date": 1531955805, "answer_id": 51412224, "question_id": 51411025, "link": "https://stackoverflow.com/questions/51411025/how-to-find-all-supported-python-restructuredtext-fieldnames/51412224#51412224", "title": "How to find all supported python, reStructuredText fieldnames?", "body": "<p>The complete list of field names can be found <a href=\"http://www.sphinx-doc.org/en/stable/domains.html?highlight=domains#info-field-lists\" rel=\"nofollow noreferrer\">here:</a></p>\n\n<ul>\n<li><strong>param, parameter, arg, argument, key, keyword:</strong> Description of a parameter.</li>\n<li><strong>type:</strong> Type of a parameter. Creates a link if possible.</li>\n<li><strong>raises, raise, except, exception:</strong> That (and when) a specific exception is raised.</li>\n<li><strong>var, ivar, cvar:</strong> Description of a variable.</li>\n<li><strong>vartype:</strong> Type of a variable. Creates a link if possible.</li>\n<li><strong>returns, return:</strong> Description of the return value.</li>\n<li><strong>rtype:</strong> Return type. Creates a link if possible.</li>\n</ul>\n"}], "owner": {"reputation": 14214, "user_id": 476410, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2eca89d3f5a16ae846f501d0596116c?s=128&d=identicon&r=PG", "display_name": "tarabyte", "link": "https://stackoverflow.com/users/476410/tarabyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 51412224, "answer_count": 1, "score": 1, "last_activity_date": 1531955805, "creation_date": 1531948242, "question_id": 51411025, "link": "https://stackoverflow.com/questions/51411025/how-to-find-all-supported-python-restructuredtext-fieldnames", "title": "How to find all supported python, reStructuredText fieldnames?", "body": "<p>I'm trying to learn more than the common <code>:param myparam: Some description</code> documentation style common in many python modules, but haven't been able to identify a full list of supported fieldnames.  From examples, I've gathered <code>param</code>, <code>raises</code>, <code>returns</code>.</p>\n\n<pre><code>def my_method(self, someval):\n    \"\"\"Returns one plus the given value\n    :param someval: an integer on which to operate\n    :whatelseisthere:\n    \"\"\"\n    return someval + 1\n</code></pre>\n\n<p><a href=\"http://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html\" rel=\"nofollow noreferrer\">http://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html</a></p>\n"}, {"tags": ["python", "raspberry-pi", "z-wave"], "owner": {"reputation": 11, "user_id": 10100328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd16cab085b1789c4429bc1d8818fd5?s=128&d=identicon&r=PG&f=1", "display_name": "NSharker", "link": "https://stackoverflow.com/users/10100328/nsharker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531948159, "creation_date": 1531948159, "question_id": 51411015, "link": "https://stackoverflow.com/questions/51411015/python-openzwave-raspberry-pi-device-not-ready", "title": "Python Openzwave Raspberry Pi Device not ready", "body": "<p>I'm currently trying to lock/unlock/set codes on a kwikset Zwave lock through python-openzwave on a raspberry pi running rasbian.</p>\n\n<p>I installed python-openzwave on an Ubuntu VM where I can lock/unlock/set codes through a zwave controller connected to the computer. I run test command <code>pyozw_check -l -d /dev/ttyACM0 -t 60</code> to view the list of nodes on the network and I can see the controller and lock both ready to receive commands. I am able to lock/unlock/set codes on the lock through this Ubuntu VM.</p>\n\n<p>However after installing python-openzwave on my raspberry pi and connecting the zwave controller to it, the test command to view lists of nodes on the network shows the controller as ready to receive commands while the lock's Ready state is set to false. When I try to issue commands to the lock through the raspberry pi, nothing happens.</p>\n\n<p>This is the output from the test command on the Raspberry Pi:</p>\n\n<pre><code>    pi@raspberrypi:~/Desktop/zwaveproject $ pyozw_check -l -d /dev/ttyACM0 -t 60\n-------------------------------------------------------------------------------\nDefine options for device /dev/ttyACM0\nStart network\n-------------------------------------------------------------------------------\nNetwork is awaked. Talk to controller.\nGet python_openzwave version : 0.4.5\nGet python_openzwave config version : Original Z-Wave 3.95\nGet python_openzwave flavor : git\nGet openzwave version : 1.4.0\nGet config path : /usr/local/lib/python3.5/dist-packages/python_openzwave/ozw_config\nController capabilities : {'primaryController'}\nController node capabilities : {'beaming', 'listening', 'primaryController'}\nNodes in network : 2\n-------------------------------------------------------------------------------\nWait for network ready (60s)\n-------------------------------------------------------------------------------\nNetwork is awake. Some sleeping devices may miss. You can increase timeout to get them. But will continue.\n------------------------------------------------------------\n1 - Name :  ( Location :  )\n 1 - Ready : True / Awake : True / Failed : False\n 1 - Manufacturer : Aeotec  ( id : 0x0086 )\n 1 - Product : ZW090 Z-Stick Gen5 US ( id  : 0x005a / type : 0x0101 / Version : 4)\n 1 - Command classes : {'COMMAND_CLASS_BASIC', 'COMMAND_CLASS_NO_OPERATION'}\n 1 - Capabilities : {'beaming', 'listening', 'primaryController'}\n 1 - Neighbors : {2} / Power level : None\n 1 - Is sleeping : False / Can wake-up : False / Battery level : None\n------------------------------------------------------------\n2 - Name :  ( Location :  )\n 2 - Ready : False / Awake : True / Failed : False\n 2 - Manufacturer : Kwikset  ( id : 0x0090 )\n 2 - Product : Touchpad Electronic Deadbolt ( id  : 0x0001 / type : 0x0001 / Version : 4)\n 2 - Command classes : {'COMMAND_CLASS_USER_CODE', 'COMMAND_CLASS_DOOR_LOCK_LOGGING', 'COMMAND_CLASS_NO_OPERATION', 'COMMAND_CLASS_DOOR_LOCK', 'COMMAND_CLASS_ALARM', 'COMMAND_CLASS_PROTECTION', 'COMMAND_CLASS_TIME_PARAMETERS', 'COMMAND_CLASS_ASSOCIATION', 'COMMAND_CLASS_VERSION', 'COMMAND_CLASS_MANUFACTURER_SPECIFIC', 'COMMAND_CLASS_CONFIGURATION', 'COMMAND_CLASS_BASIC', 'COMMAND_CLASS_BATTERY'}\n 2 - Capabilities : {'frequent', 'beaming', 'routing'}\n 2 - Neighbors : {1} / Power level : None\n 2 - Is sleeping : False / Can wake-up : False / Battery level : 80\n------------------------------------------------------------\nDriver statistics : {'callbacks': 1, 'OOFCnt': 0, 'broadcastWriteCnt': 9, 'CANCnt': 0, 'badChecksum': 0, 'noack': 0, 'writeCnt': 19, 'netbusy': 0, 'broadcastReadCnt': 0, 'nondelivery': 0, 'badroutes': 0, 'retries': 0, 'routedbusy': 0, 'dropped': 6, 'ACKCnt': 19, 'SOFCnt': 25, 'NAKCnt': 0, 'ACKWaiting': 0, 'readCnt': 25, 'readAborts': 0}\n------------------------------------------------------------\nStop network\nExit\n</code></pre>\n\n<p>I'm trying to figure out why the lock's ready state is set to false only on the raspberry pi. If I pull out the zstick from the raspberry pi and plug it into my Ubuntu VM, the lock's ready state is set to true.  I have excluded and included the lock through the raspberry pi and reset the controller stick. Maybe there is an extra step when working on the raspberry pi to set the device's ready state?</p>\n"}, {"tags": ["python", "opencv", "if-statement", "image-processing", "opencv-drawcontour"], "comments": [{"owner": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 0, "creation_date": 1531948303, "post_id": 51410961, "comment_id": 89793573, "body": "do you always get only two values printed in the <code>if</code> condition?"}, {"owner": {"reputation": 198, "user_id": 9999528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784da2545c5a947a95202ef28064787?s=128&d=identicon&r=PG&f=1", "display_name": "Ender Ayhan", "link": "https://stackoverflow.com/users/9999528/ender-ayhan"}, "reply_to_user": {"reputation": 13255, "user_id": 6885902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9eWg.jpg?s=128&g=1", "display_name": "Jeru Luke", "link": "https://stackoverflow.com/users/6885902/jeru-luke"}, "edited": false, "score": 2, "creation_date": 1531948484, "post_id": 51410961, "comment_id": 89793641, "body": "Edited: It may change due to the image. But for now, yes I am getting only two values. Also, I am getting more values when I use <code>print</code> function out of the <code>if</code> condition. All in all, I need two values ,as above, that must be assigned as variable name."}], "answers": [{"tags": [], "owner": {"reputation": 2790, "user_id": 1830793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E88mv.jpg?s=128&g=1", "display_name": "Zev", "link": "https://stackoverflow.com/users/1830793/zev"}, "is_accepted": true, "score": 0, "last_activity_date": 1531966701, "creation_date": 1531966701, "answer_id": 51413415, "question_id": 51410961, "link": "https://stackoverflow.com/questions/51410961/how-to-collect-tuple-values-in-if-statement/51413415#51413415", "title": "How to collect tuple values in if statement?", "body": "<p>If you need to access them later, you can just add them to a list.</p>\n\n<pre><code>states = []\nfor i in range(len(contours)):\n\n    x, y, w, h = cv2.boundingRect(contours[i])\n    mask[y:y+w, x:x+w] = 0\n    cv2.drawContours(mask, contours, i, (255, 255, 255), -1)\n    r = float(cv2.countNonZero(mask[y:y+h, x:x+w])) / (w * h)\n\n    if r &gt; 0.5 and w &gt; 8 and h &gt; 8:\n        cv2.rectangle(rgb, (x, y), (x+w, y+h), (255, 255, 255), -1)\n        cv2.circle(rgb, (x+w/2,y+h/2), 3, (180, 25, 20), -1)\n        start_target_states = x+w/2 , y+h/2\n        states.append(start_target_states)\n        print \"start_target_states: %s\" % (start_target_states,)\n</code></pre>\n\n<p>Since you have them in a list you can still access them because you aren't overriding them each time.</p>\n\n<pre><code>target_state = states[0]\nstart_state = states[1]\n</code></pre>\n\n<p>or more generally, if you want to capture the first and last:</p>\n\n<pre><code>target_state = states[0]\nstart_state = states[-1]\n</code></pre>\n\n<p>Also, it's not what you were asking about, but it is better practice to use <code>enumerate</code> for this kind of loop.</p>\n\n<pre><code>for i, contour in enumerate(contours):\n</code></pre>\n\n<p>and then instead of using <code>counters[i]</code> you can just use <code>contour</code>.</p>\n"}], "owner": {"reputation": 198, "user_id": 9999528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0784da2545c5a947a95202ef28064787?s=128&d=identicon&r=PG&f=1", "display_name": "Ender Ayhan", "link": "https://stackoverflow.com/users/9999528/ender-ayhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 51413415, "answer_count": 1, "score": 1, "last_activity_date": 1531966701, "creation_date": 1531947873, "question_id": 51410961, "link": "https://stackoverflow.com/questions/51410961/how-to-collect-tuple-values-in-if-statement", "title": "How to collect tuple values in if statement?", "body": "<p>I have a code which consists of <code>if</code> statement in <code>for</code> loop as below,</p>\n\n<pre><code>for i in range(len(contours)):\n\n    x, y, w, h = cv2.boundingRect(contours[i])\n    mask[y:y+w, x:x+w] = 0\n    cv2.drawContours(mask, contours, i, (255, 255, 255), -1)\n    r = float(cv2.countNonZero(mask[y:y+h, x:x+w])) / (w * h)\n\n    if r &gt; 0.5 and w &gt; 8 and h &gt; 8:\n        cv2.rectangle(rgb, (x, y), (x+w, y+h), (255, 255, 255), -1)\n        cv2.circle(rgb, (x+w/2,y+h/2), 3, (180, 25, 20), -1)\n        start_target_states = x+w/2 , y+h/2\n        print \"start_target_states: %s\" % (start_target_states,)\n</code></pre>\n\n<p>when running this code, it results as below;</p>\n\n<pre><code>start_target_states: (704, 463)\nstart_target_states: (83, 15)\n</code></pre>\n\n<p>However, <code>start_target_states</code> variable must be named as <code>start_state</code> for the first result, afterwards, it must be named as <code>target_state</code> for the second result. For example;</p>\n\n<pre><code>target_state: (704, 463)\nstart_state: (83, 15)\n</code></pre>\n\n<p>Moreover, I want to assign these two tuples to variable name. So that I can use them later.I mean,</p>\n\n<pre><code>TargetState = target_state\nStartState = start_state\n</code></pre>\n\n<p>I have tried to modify if statement to reach my purpose, unfortunately I could not get succeed. How can I do what I want?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1531947953, "post_id": 51410949, "comment_id": 89793434, "body": "both have same file handler f"}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1531948117, "post_id": 51410994, "comment_id": 89793509, "body": "more idiomatic is to open both in the same context manager. <code>with open(&#39;infile.csv&#39;, &#39;r&#39;) as fin, open(&#39;outfile.csv&#39;, &#39;w&#39;) as fout: # do stuff</code>"}, {"owner": {"reputation": 552, "user_id": 7447124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f45ad25cdb7a436e05ebc226bab38?s=128&d=identicon&r=PG&f=1", "display_name": "aman5319", "link": "https://stackoverflow.com/users/7447124/aman5319"}, "edited": false, "score": 0, "creation_date": 1531948162, "post_id": 51410994, "comment_id": 89793523, "body": "ya that is more concise and efficient"}, {"owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "edited": false, "score": 0, "creation_date": 1531948561, "post_id": 51410994, "comment_id": 89793678, "body": "for multiple context managers it is better to use <a href=\"https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack\" rel=\"nofollow noreferrer\"><code>contextlib.ExitStack</code></a>"}], "tags": [], "owner": {"reputation": 552, "user_id": 7447124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f45ad25cdb7a436e05ebc226bab38?s=128&d=identicon&r=PG&f=1", "display_name": "aman5319", "link": "https://stackoverflow.com/users/7447124/aman5319"}, "is_accepted": true, "score": 3, "last_activity_date": 1531948422, "last_edit_date": 1531948422, "creation_date": 1531948041, "answer_id": 51410994, "question_id": 51410949, "link": "https://stackoverflow.com/questions/51410949/i-o-operation-on-closed-file-on-csv-python/51410994#51410994", "title": "I/O operation on closed file on csv python", "body": "<p>Because you are using a context manager the infile gets closed when you come out of it scopes.</p>\n\n<p>The solution is </p>\n\n<pre><code>with open('infile.csv', 'r') as f:\n    reader = csv.reader(f)\n\n\n    # manipulate the data\n\n    with open('outfile.csv', 'w') as f:\n        writer = csv.writer(f)\n        for row in reader:\n             writer.writerow(row)\n</code></pre>\n\n<p>Edit Here is a more concise and efficient way </p>\n\n<pre><code>with open('infile.csv', 'r') as fin, open(\"outfile.csv\" , \"w\") as fout:\n    reader = csv.reader(fin)\n    writer = csv.writer(fout) \n    for row in reader:        \n        writer.writerow(row) \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9269971"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 51410994, "answer_count": 1, "score": 1, "last_activity_date": 1531948422, "creation_date": 1531947835, "last_edit_date": 1531948013, "question_id": 51410949, "link": "https://stackoverflow.com/questions/51410949/i-o-operation-on-closed-file-on-csv-python", "title": "I/O operation on closed file on csv python", "body": "<p>Im working on python3 project and I am getting error when trying to write on CSV file.</p>\n\n<pre><code>with open('infile.csv', 'r') as f:\n    reader = csv.reader(f)\n\n\n# manipulate the data\n\nwith open('outfile.csv', 'w') as fl:\n    writer = csv.writer(fl)\n    for row in reader:\n        writer.writerow(row)\n</code></pre>\n\n<p>Im  getting <code>I/O operation on closed file on csv python</code> issues. Do I need to create <code>outfile.csv</code> first? Im not sure?</p>\n"}, {"tags": ["python", "pip", "sasl"], "answers": [{"comments": [{"owner": {"reputation": 1045, "user_id": 10088178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6dc359c8559182976bca35e8db73cd6?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Str&#246;der", "link": "https://stackoverflow.com/users/10088178/michael-str%c3%b6der"}, "edited": false, "score": 1, "creation_date": 1532013750, "post_id": 51425710, "comment_id": 89823857, "body": "While this might work I&#39;d recommend to be very careful not to run in seg faults due to a shared library mix."}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": true, "score": 1, "last_activity_date": 1532011800, "creation_date": 1532011800, "answer_id": 51425710, "question_id": 51410944, "link": "https://stackoverflow.com/questions/51410944/after-cyrus-sasl-build-on-linux-python-pip-cannot-see-sasl-h-file/51425710#51425710", "title": "After cyrus-sasl build on Linux Python/pip cannot see sasl.h file", "body": "<p>Try passing compiler/linker flags:</p>\n\n<pre><code>CFLAGS=-I\"$HOME\"/sasl/include LDFLAGS=-L\"$HOME\"/sasl/lib ./python -m pip install /tmp/sasl-0.2.1.tar.gz\n</code></pre>\n\n<p>Pass the real directories.</p>\n"}], "owner": {"reputation": 1605, "user_id": 1680932, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9ab3508fab35e87df473a246274794df?s=128&d=identicon&r=PG", "display_name": "Alex B", "link": "https://stackoverflow.com/users/1680932/alex-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 51425710, "answer_count": 1, "score": 1, "last_activity_date": 1532011800, "creation_date": 1531947826, "question_id": 51410944, "link": "https://stackoverflow.com/questions/51410944/after-cyrus-sasl-build-on-linux-python-pip-cannot-see-sasl-h-file", "title": "After cyrus-sasl build on Linux Python/pip cannot see sasl.h file", "body": "<p><strong>Note:</strong> I cannot install libsasl2-dev because I do not have admin rights.</p>\n\n<p>I built cyrus-sasl-2.1.26.tar.gz:</p>\n\n<pre><code>./configure --prefix=/home/username/sasl\nmake install \n</code></pre>\n\n<p>Now header files are there:</p>\n\n<pre><code>[username@hostnamebin]$ ls ~/bin/include/sasl\nhmac-md5.h  md5global.h  md5.h  prop.h  sasl.h  saslplug.h  saslutil.h\n</code></pre>\n\n<p>But pip still errors out:</p>\n\n<pre><code>./python -m pip install /tmp/sasl-0.2.1.tar.gz\n</code></pre>\n\n<blockquote>\n  <p>sasl/saslwrapper.h:22:23: error: sasl/sasl.h: No such file or directory</p>\n</blockquote>\n\n<p>Is there any way to make Python/pip see my build instead of looking for default header files?</p>\n"}, {"tags": ["python", "syntax"], "comments": [{"owner": {"reputation": 537, "user_id": 7869621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd1e52c50a93fb4403a9dd0d2192276?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/7869621/rob"}, "edited": false, "score": 0, "creation_date": 1531947676, "post_id": 51410881, "comment_id": 89793318, "body": "Are you looking for the &#39;in&#39; command?: if x in list: do something."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1531947741, "post_id": 51410881, "comment_id": 89793349, "body": "Did you read this answer? <a href=\"https://stackoverflow.com/a/9542768/10077\">stackoverflow.com/a/9542768/10077</a> Look at &quot;Finding the first occurrence&quot;."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1531947951, "post_id": 51410881, "comment_id": 89793433, "body": "Seems like you want <a href=\"https://www.python.org/dev/peps/pep-0572/\" rel=\"nofollow noreferrer\">assignment expressions</a>... <i>&quot;it allows us to conveniently capture a &quot;witness&quot; for an <code>any()</code> expression&quot;</i>."}], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1531948528, "post_id": 51410974, "comment_id": 89793663, "body": "Using the answer I linked in comments above, I was also able to accomplish this with just <code>next(n for n in lst if n%5==0)</code>."}, {"owner": {"reputation": 5116, "user_id": 3023116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3371c6423c6f4b5fee8777b8c98c6?s=128&d=identicon&r=PG", "display_name": "taras", "link": "https://stackoverflow.com/users/3023116/taras"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1531948662, "post_id": 51410974, "comment_id": 89793714, "body": "Yes, definitely, but OP wishes not to use a list comprehension."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1531948734, "post_id": 51410974, "comment_id": 89793742, "body": "There&#39;s no list comprehension there. Only a generator expression."}, {"owner": {"reputation": 5116, "user_id": 3023116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3371c6423c6f4b5fee8777b8c98c6?s=128&d=identicon&r=PG", "display_name": "taras", "link": "https://stackoverflow.com/users/3023116/taras"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1531948873, "post_id": 51410974, "comment_id": 89793803, "body": "Well, I am completely fine with your approach, yet they do share the same syntax construct."}, {"owner": {"reputation": 253, "user_id": 9004381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aadcfea0a09bddca6187706736d4adb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Hawk", "link": "https://stackoverflow.com/users/9004381/mike-hawk"}, "edited": false, "score": 0, "creation_date": 1532005987, "post_id": 51410974, "comment_id": 89818065, "body": "Thank you for this good answer; I accepted the other one because it is &quot;pure&quot; python and doesn&#39;t require any imports."}, {"owner": {"reputation": 5116, "user_id": 3023116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3371c6423c6f4b5fee8777b8c98c6?s=128&d=identicon&r=PG", "display_name": "taras", "link": "https://stackoverflow.com/users/3023116/taras"}, "reply_to_user": {"reputation": 253, "user_id": 9004381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aadcfea0a09bddca6187706736d4adb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Hawk", "link": "https://stackoverflow.com/users/9004381/mike-hawk"}, "edited": false, "score": 0, "creation_date": 1532006112, "post_id": 51410974, "comment_id": 89818169, "body": "@MikeHawk, I find the accepted answer more plausible myself. In fact my approach does the same &quot;under the hood&quot; (if one updated it to return the index instead of the value)"}], "tags": [], "owner": {"reputation": 5116, "user_id": 3023116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce3371c6423c6f4b5fee8777b8c98c6?s=128&d=identicon&r=PG", "display_name": "taras", "link": "https://stackoverflow.com/users/3023116/taras"}, "is_accepted": false, "score": 1, "last_activity_date": 1531948269, "last_edit_date": 1531948269, "creation_date": 1531947929, "answer_id": 51410974, "question_id": 51410881, "link": "https://stackoverflow.com/questions/51410881/python-equivalent-of-c-find-if/51410974#51410974", "title": "Python equivalent of c++ find_if", "body": "<p>Say, you have some predicate function <code>pred</code> and a list <code>lst</code>.\nYou can use <code>itertools.dropwhile</code> to get the first element in <code>lst</code>,\nfor which <code>pred</code> returns <code>True</code> with</p>\n\n<pre><code>itertools.dropwhile(lambda x: not pred(x), lst).next()\n</code></pre>\n\n<p>It skips all elements for which <code>pred(x)</code> is <code>False</code> and <code>.next()</code>\nyields you the value for which pred(x) is <code>True</code>.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>A sample use to find the first element in <code>lst</code> divisible by <code>5</code></p>\n\n<pre><code>&gt;&gt;&gt; import itertools\n&gt;&gt;&gt; lst = [1,2,10,3,5,3,4]\n&gt;&gt;&gt; pred = lambda x: x % 5 == 0 \n&gt;&gt;&gt; itertools.dropwhile(lambda x: not pred(x), lst).next()\n10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": true, "score": 6, "last_activity_date": 1531949809, "last_edit_date": 1531949809, "creation_date": 1531949050, "answer_id": 51411190, "question_id": 51410881, "link": "https://stackoverflow.com/questions/51410881/python-equivalent-of-c-find-if/51411190#51411190", "title": "Python equivalent of c++ find_if", "body": "<p>Using a tip from <a href=\"https://stackoverflow.com/q/9542738/10077\">an answer to a related question</a>, and borrowing from the answer taras posted, I came up with this:</p>\n\n<pre><code>&gt;&gt;&gt; lst=[1,2,10,3,5,3,4]\n&gt;&gt;&gt; next(n for n in lst if n%5==0)\n10\n</code></pre>\n\n<p>A slight modification will give you the index rather than the value:</p>\n\n<pre><code>&gt;&gt;&gt; next(idx for idx,n in enumerate(lst) if n%5==0)\n2\n</code></pre>\n\n<p>Now, if there was no match this will raise an exception StopIteration. You might want use a function that handles the exception and returns <code>None</code> if there was no match:</p>\n\n<pre><code>def first_match(iterable, predicate):\n    try:\n        return next(idx for idx,n in enumerate(iterable) if predicate(n))\n    except StopIteration:\n        return None\n\nlst=[1,2,10,3,5,3,4]\nprint(first_match(lst, lambda x: x%5 == 0))\n</code></pre>\n\n<p>Note that this uses a generator expression, not a list comprehension. A list comprehension would apply the condition to every member of the list and produce a list of all matches. This applies it to each member until it finds a match and then stops, which is the minimum work to solve the problem.</p>\n"}], "owner": {"reputation": 253, "user_id": 9004381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aadcfea0a09bddca6187706736d4adb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Hawk", "link": "https://stackoverflow.com/users/9004381/mike-hawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1578, "favorite_count": 0, "accepted_answer_id": 51411190, "answer_count": 2, "score": 3, "last_activity_date": 1531949809, "creation_date": 1531947511, "last_edit_date": 1531947645, "question_id": 51410881, "link": "https://stackoverflow.com/questions/51410881/python-equivalent-of-c-find-if", "title": "Python equivalent of c++ find_if", "body": "<p>Is there a built-in python equivalent of <code>std::find_if</code> to find the first element of a list for which a given condition is <code>true</code>? In other words, something like the <code>index()</code> function of a list, but with an arbitrary unary predicate rather than just a test for equality. </p>\n\n<p>I don't want to use list comprehension, because the specific predicate I have in mind is somewhat expensive to compute. </p>\n"}, {"tags": ["python", "python-3.x", "multiprocessing"], "comments": [{"owner": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "edited": false, "score": 0, "creation_date": 1531947492, "post_id": 51410836, "comment_id": 89793229, "body": "<a href=\"https://en.wikipedia.org/wiki/Preemptive_multitasking\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Preemptive_multitasking</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1283, "user_id": 5599955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LyryY.jpg?s=128&g=1", "display_name": "sP_", "link": "https://stackoverflow.com/users/5599955/sp"}, "edited": false, "score": 0, "creation_date": 1531949864, "post_id": 51410899, "comment_id": 89794212, "body": "My function is CPU intensive. I&#39;m worried if I initiate more than 8 processes  in parallel it will deteriorate the performance and maybe even break something if there are, say 40 such processes. Is that how it works? Does the OS manage process queuing for me, or do I have to explicitly do something about it?"}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "reply_to_user": {"reputation": 1283, "user_id": 5599955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LyryY.jpg?s=128&g=1", "display_name": "sP_", "link": "https://stackoverflow.com/users/5599955/sp"}, "edited": false, "score": 1, "creation_date": 1531949978, "post_id": 51410899, "comment_id": 89794264, "body": "@sP_ Yes, that&#39;s exactly what will happen. Processes themselves will perform accordingly. However the more processes you have the more context switch OS has to do (you don&#39;t see that and you can&#39;t affect that, the OS does whole work for you). And the context switch becomes a bottleneck at some point (with modern computers probably something around thousands of threads). So yes, your performance will deteriorate."}, {"owner": {"reputation": 1283, "user_id": 5599955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LyryY.jpg?s=128&g=1", "display_name": "sP_", "link": "https://stackoverflow.com/users/5599955/sp"}, "edited": false, "score": 0, "creation_date": 1531950157, "post_id": 51410899, "comment_id": 89794339, "body": "I see, one follow up question, if I use locks in my function, and say there are 10 processes waiting for the lock to release. Which process takes place when the lock is released? The one that was first called? Or is it something out of our control and is maintaining a queue the answer here as well?"}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "reply_to_user": {"reputation": 1283, "user_id": 5599955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LyryY.jpg?s=128&g=1", "display_name": "sP_", "link": "https://stackoverflow.com/users/5599955/sp"}, "edited": false, "score": 0, "creation_date": 1531950332, "post_id": 51410899, "comment_id": 89794398, "body": "@sP_ Locking is usually done in the kernel (OS) space (there are alternatives though). So first of all note that a locked process is similar to a process waiting for io. It is put on hold by the OS. Secondly when a process releases a lock then the OS picks a process that was waiting for the lock and schedules it for execution. So yes, there&#39;s a queue in the OS. The way that OS picks a waiting process is an implementation detail and you can assume it is at random."}, {"owner": {"reputation": 1283, "user_id": 5599955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LyryY.jpg?s=128&g=1", "display_name": "sP_", "link": "https://stackoverflow.com/users/5599955/sp"}, "edited": false, "score": 0, "creation_date": 1532012199, "post_id": 51410899, "comment_id": 89822711, "body": "Thanks, I tried few simulations with locks and it seems to be working as expected."}], "tags": [], "owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "is_accepted": true, "score": 1, "last_activity_date": 1531949396, "last_edit_date": 1531949396, "creation_date": 1531947599, "answer_id": 51410899, "question_id": 51410836, "link": "https://stackoverflow.com/questions/51410836/python-does-multiprocessing-process-start-start-all-processes-on-the-s/51410899#51410899", "title": "Python: Does `multiprocessing.Process(...).start()` start all processes on the same cpu?", "body": "<p>What happens depends on the underlying operating system.</p>\n\n<p>But generally there are two things: physical cpu cores and threads/processes (all major systems have them). The OS keeps track of this abstract thing called thread/process (which among the other things contains code to execute) and it maps it to some cpu core for a given time or until some syscall (for example network access) is called. If you have more threads then cores (which is usually the case, there are lots of things running in the background of the modern OS) then some of them wait for the context switch to happen (i.e. for their turn).</p>\n\n<p>Now if you have cpu intensive tasks (hard calculations) then you won't see any benefits when running more then 8 threads/processes.  But even if you do they won't run one after another. The OS will interrupt a cpu core at some point to allow other threads to run. So the OS will mix the execution: a little bit of this, a little bit of that. That way every thread/process slowly progresses and doesn't wait possibly forever.</p>\n\n<p>On the other hand if your tasks are io bound (for example you make HTTP call so you wait for network) then having 20 tasks will increase performance because when those threads wait for io then the OS will put those threads on hold and will allow other threads to run. And those other threads can do io as well, that way you achieve a higher level of concurrency.</p>\n"}], "owner": {"reputation": 1283, "user_id": 5599955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LyryY.jpg?s=128&g=1", "display_name": "sP_", "link": "https://stackoverflow.com/users/5599955/sp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 51410899, "answer_count": 1, "score": 0, "last_activity_date": 1531949396, "creation_date": 1531947315, "question_id": 51410836, "link": "https://stackoverflow.com/questions/51410836/python-does-multiprocessing-process-start-start-all-processes-on-the-s", "title": "Python: Does `multiprocessing.Process(...).start()` start all processes on the same cpu?", "body": "<p>Suppose I have a function that takes several seconds to compute and I have 8 CPUs (according to <code>multiprocessing.cpu_count()</code>). </p>\n\n<p>What happens when I start this process less than 8 times and more than 8 times? </p>\n\n<p>When I tried to do this I observed that even when I started 20 processes they were all running parallel-y. I expected them to run 8 at a time, others will wait for them to finish.</p>\n"}, {"tags": ["python", "list", "big-o", "rounding", "interval-tree"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 2, "creation_date": 1531947371, "post_id": 51410808, "comment_id": 89793178, "body": "How long are <code>x</code> and <code>y</code>?  The loops and check will be polynomial complexity, which is not very good.  If performance is important, you could probably get it better with an interval tree."}, {"owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "edited": false, "score": 2, "creation_date": 1531947846, "post_id": 51410808, "comment_id": 89793398, "body": "A straight forward approach would be to sort both arrays, then step through <code>x</code> until you find an element <code>e</code> larger than the current element in <code>y</code>, then take the closer of the two (<code>e</code> or the element that proceeds it). Continue from that position in <code>x</code> until all of <code>y</code> is processed, sort of like mergesort."}, {"owner": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1531948105, "post_id": 51410808, "comment_id": 89793500, "body": "@user3483203 I&#39;ve added my attempt to the question."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1531948607, "post_id": 51410808, "comment_id": 89793696, "body": "How huge is huge? I&#39;d expect wim&#39;s interval tree to scale best, but it&#39;s a lot of set-up"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 1, "creation_date": 1531950593, "post_id": 51410808, "comment_id": 89794511, "body": "When you say <i>&quot;the lists could be huge&quot;</i>, do you mean the lengths X, Y or both? Anyway, two lists are the wrong data structure to insert into. Use two trees instead (or heap). Then both structures will be sorted by default, and can trivially easily find their (predecessor and successor) neighbors. The rest is trivial."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1531950660, "post_id": 51410808, "comment_id": 89794533, "body": "If you really want a scalable solution with a big-O estimate, please say that in the question. I tagged this <a href=\"https://stackoverflow.com/questions/tagged/big-o\">big-o</a>. Let us call X, Y the lengths(/sizes) of the structures. Which in general do you expect to dominate: X or Y? (Presumably Y, since there is measurement noise)"}, {"owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "edited": false, "score": 0, "creation_date": 1531951824, "post_id": 51410808, "comment_id": 89794981, "body": "do orders of <code>x</code>, <code>y</code> matter?"}, {"owner": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1531954785, "post_id": 51410808, "comment_id": 89795776, "body": "@Useless I&#39;ve added the desired information to the question. Sorry for not stating it before, I didn&#39;t know it would be relevant (my bad!)."}, {"owner": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "reply_to_user": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1531954800, "post_id": 51410808, "comment_id": 89795784, "body": "@smci Only X. I&#39;ve edited the question!"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1531955412, "post_id": 51410808, "comment_id": 89795952, "body": "Do you know the contents of x before you start measuring the y?"}, {"owner": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "reply_to_user": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1531955569, "post_id": 51410808, "comment_id": 89795997, "body": "@smci Yes, when one value of <code>y</code> arrives, the whole list <code>x</code> is determined beforehand."}], "answers": [{"comments": [{"owner": {"reputation": 940, "user_id": 3818521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20506957466fa47bc9bfd42d07690f47?s=128&d=identicon&r=PG&f=1", "display_name": "dpwilson", "link": "https://stackoverflow.com/users/3818521/dpwilson"}, "reply_to_user": {"reputation": 1603, "user_id": 1707015, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1bca029eff38af0b1a5c55d89e04e638?s=128&d=identicon&r=PG", "display_name": "qr&#228;bn&#246;", "link": "https://stackoverflow.com/users/1707015/qr%c3%a4bn%c3%b6"}, "edited": false, "score": 1, "creation_date": 1531948623, "post_id": 51410930, "comment_id": 89793705, "body": "I have no clue. Any constructive criticism, please?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1531949046, "post_id": 51410930, "comment_id": 89793867, "body": "It&#39;s the same as what the OP already had, therefore &quot;not useful&quot;."}, {"owner": {"reputation": 940, "user_id": 3818521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20506957466fa47bc9bfd42d07690f47?s=128&d=identicon&r=PG&f=1", "display_name": "dpwilson", "link": "https://stackoverflow.com/users/3818521/dpwilson"}, "edited": false, "score": 0, "creation_date": 1531949308, "post_id": 51410930, "comment_id": 89793981, "body": "A clean, readable answer with actual code is not &quot;the same&quot; as his description of &quot;some loops&quot;."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1531949426, "post_id": 51410930, "comment_id": 89794037, "body": "The question is explicitly asking for greater efficiency, and this answer provides the same complexity. Shorter code is nice, but somewhat missing the point IMO."}, {"owner": {"reputation": 940, "user_id": 3818521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20506957466fa47bc9bfd42d07690f47?s=128&d=identicon&r=PG&f=1", "display_name": "dpwilson", "link": "https://stackoverflow.com/users/3818521/dpwilson"}, "edited": false, "score": 0, "creation_date": 1531949505, "post_id": 51410930, "comment_id": 89794064, "body": "Two things here: 1) Efficiency was never mentioned in OP&#39;s original text. Check the edit history. 2) &quot;Easier&quot; and &quot;cleaner&quot; were the two explicit requests."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1531949619, "post_id": 51410930, "comment_id": 89794117, "body": "OK, that&#39;s fair. But now the question was edited to clarify, perhaps you could edit (or delete) the answer."}], "tags": [], "owner": {"reputation": 940, "user_id": 3818521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20506957466fa47bc9bfd42d07690f47?s=128&d=identicon&r=PG&f=1", "display_name": "dpwilson", "link": "https://stackoverflow.com/users/3818521/dpwilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1531947756, "creation_date": 1531947756, "answer_id": 51410930, "question_id": 51410808, "link": "https://stackoverflow.com/questions/51410808/round-each-number-of-list-to-most-near-number-in-another-list/51410930#51410930", "title": "Round each number of list to most near number in another list", "body": "<p>You can do this quickly with a lambda function and list comprehension:</p>\n\n<pre><code>[min(x, key=lambda x:abs(x-a)) for a in y]\n</code></pre>\n\n<p>This will work with floats, integers, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 9997211, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0V-Yqig-2Xg/AAAAAAAAAAI/AAAAAAAAADA/taM4SboqhDM/photo.jpg?sz=128", "display_name": "wowwee", "link": "https://stackoverflow.com/users/9997211/wowwee"}, "is_accepted": false, "score": 0, "last_activity_date": 1531948301, "creation_date": 1531948301, "answer_id": 51411044, "question_id": 51410808, "link": "https://stackoverflow.com/questions/51410808/round-each-number-of-list-to-most-near-number-in-another-list/51411044#51411044", "title": "Round each number of list to most near number in another list", "body": "<p>So this is something quick I made up that just gets all the differences and than sorts them from least to greatest. Takes the lowest difference, and goes from there.</p>\n\n<pre><code>x = [1, 2, 3, 4, 5]\ny = [1.1, 1.2, 3.6, 6.2, 2.1]\n\nfor y_index in range(len(y)):\n    value_and_index= {}\n    for x_index in range(len(x)):\n        difference= y[y_index]-x[x_index]\n        difference= difference*-1 if difference&lt;0 else difference\n        value_and_index[difference]= x_index\n    y[y_index]= x[value_and_index[sorted(value_and_index.keys())[0]]]\n\nprint y # [1, 1, 4, 5, 2]\n</code></pre>\n\n<p>Hope this helps, happy coding!</p>\n"}, {"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1531949226, "post_id": 51411172, "comment_id": 89793951, "body": "It is better to sort <i>both</i> arrays and step through them with <i>two</i>  moving iterators."}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 0, "last_activity_date": 1531948975, "creation_date": 1531948975, "answer_id": 51411172, "question_id": 51410808, "link": "https://stackoverflow.com/questions/51410808/round-each-number-of-list-to-most-near-number-in-another-list/51411172#51411172", "title": "Round each number of list to most near number in another list", "body": "<p>My attempt: </p>\n\n<p>First I sort the X array (if it isn't already sorted). The loop goes through each y and compute absolute value for each x, until this absolute value is higher than previous, then stop the for loop (because array X is sorted):</p>\n\n<pre><code>x = sorted([1, 2, 3, 4, 5])\ny = [1.1, 1.2, 3.6, 6.2, 2.1]\n\nout = []\nwhile y:\n    current_value = y.pop()\n    current_min = float('inf')\n    current_x_value = None\n    for v in x:\n        temp_min = abs(current_value - v)\n        if temp_min &lt; current_min:\n            current_min = temp_min\n            current_x_value = v\n        if temp_min &gt; current_min:  # no need to iterate further, X is sorted\n            break\n    out.insert(0, current_x_value)\nprint(out)\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>[1, 1, 4, 5, 2]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "edited": false, "score": 0, "creation_date": 1531955196, "post_id": 51411305, "comment_id": 89795895, "body": "This is really witty, but I&#39;ve just tried it and I&#39;m not getting the desired result for the example in the question (the second one). The last element should be 3, and your script is returning 4."}, {"owner": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "edited": false, "score": 0, "creation_date": 1531956533, "post_id": 51411305, "comment_id": 89796233, "body": "I&#39;ve found the mistake. Due to <code>x</code> having two integers, when you do <code>(3+4)&#47;2</code> you get <code>3</code>, not <code>3.5</code>. If you perform the conversion you get the desired result, and your code clearly outperforms mine and the rest in the other answers. Thanks."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "edited": false, "score": 1, "creation_date": 1531963581, "post_id": 51411305, "comment_id": 89797719, "body": "@Tendero  Guess you&#39;re on Python 2.  You could use <code>from __future__ import division</code> to avoid that."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1531969826, "post_id": 51411305, "comment_id": 89798903, "body": "This will be slower than 1x through the list which is possible"}], "tags": [], "owner": {"reputation": 1045, "user_id": 9334376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e35da69f3a2e25662bcefd83c925302?s=128&d=identicon&r=PG&f=1", "display_name": "kuppern87", "link": "https://stackoverflow.com/users/9334376/kuppern87"}, "is_accepted": true, "score": 2, "last_activity_date": 1531987916, "last_edit_date": 1531987916, "creation_date": 1531949732, "answer_id": 51411305, "question_id": 51410808, "link": "https://stackoverflow.com/questions/51410808/round-each-number-of-list-to-most-near-number-in-another-list/51411305#51411305", "title": "Round each number of list to most near number in another list", "body": "<p>Given that <code>x</code> is sorted, the most efficient way to do this is using <code>bisect</code> to search for the closest value. Just create a list of mid points between the x values and run bisect on those:</p>\n\n<pre><code>In [69]: mid_points = [(x1+x2)/2 for x1, x2 in zip(x[1:], x[:-1])]\n\nIn [70]: mid_points\nOut[70]: [1.5, 2.5, 3.5, 4.5]\n\nIn [72]: [x[bisect.bisect(mid_points, v)] for v in y]\nOut[72]: [1, 1, 4, 5, 2]\n</code></pre>\n\n<p>This will run in <code>O(Mlog(N)+N)</code> time where `M=len(y), N=len(x)</p>\n\n<p>(For python2 do <code>from __future__ import  division</code> or use <code>float(x1+x2)/2</code> in the <code>mid_points</code> calculation)</p>\n"}, {"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1531952793, "post_id": 51411689, "comment_id": 89795259, "body": "It&#39;s possible for <code>idx=bisect.bisect_left(x,f)</code> to return 0, and then the indexing on the next line unintentionally wraps around."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1531953173, "post_id": 51411689, "comment_id": 89795335, "body": "That case is handled with <code>f&lt;min_x</code> above and dups being to the left I think, no?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1531953497, "post_id": 51411689, "comment_id": 89795422, "body": "Nope.  It would have to be <code>f&lt;=min_x</code>."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1531954892, "post_id": 51411689, "comment_id": 89795809, "body": "Hmm. As I read <a href=\"https://docs.python.org/2/library/bisect.html#bisect.bisect_left\" rel=\"nofollow noreferrer\">bisect.left</a> it states <code>all(val &lt; x for val in a[lo:i])</code> for <code>bisect.left</code> and <code>all(val &lt;= x for val in a[lo:i])</code> for <a href=\"https://docs.python.org/2/library/bisect.html#bisect.bisect_right\" rel=\"nofollow noreferrer\">bisect.right</a> (or <code>bisect.bisect</code> - same). I suppose that <code>elif f&lt;=min_x:</code> fixes, no? Thanks for paying attention!"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1531963323, "post_id": 51411689, "comment_id": 89797667, "body": "To put it in plain english, bisection returns the index of where to insert the new element.  In case of a tie, <code>bisect_left</code> would insert it to the left of the equal element, and <code>bisect_right</code> to the right.  <code>f&lt;=min_x</code> prevents the possibility of a tie occurring at index 0, so yes, it fixes."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1531954976, "last_edit_date": 1531954976, "creation_date": 1531951774, "answer_id": 51411689, "question_id": 51410808, "link": "https://stackoverflow.com/questions/51410808/round-each-number-of-list-to-most-near-number-in-another-list/51411689#51411689", "title": "Round each number of list to most near number in another list", "body": "<p>If <code>x</code> is sorted, use <a href=\"https://docs.python.org/2/library/bisect.html\" rel=\"nofollow noreferrer\">bisect</a>:</p>\n\n<pre><code>import bisect \ntest_out=[]\nmax_x=max(x)\nmin_x=min(x)\nfor f in y:\n    if f&gt;=max_x:\n        idx=-1\n    elif f&lt;=min_x:\n        idx=0\n    else:\n        idx=bisect.bisect_left(x,f)\n        if abs(x[idx-1]-f)&lt;abs(x[idx]-f):\n            idx-=1\n    test_out.append(x[idx])\n\n&gt;&gt;&gt; test_out==desired_output\nTrue\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "is_accepted": false, "score": 0, "last_activity_date": 1531952697, "last_edit_date": 1531952697, "creation_date": 1531952319, "answer_id": 51411766, "question_id": 51410808, "link": "https://stackoverflow.com/questions/51410808/round-each-number-of-list-to-most-near-number-in-another-list/51411766#51411766", "title": "Round each number of list to most near number in another list", "body": "<p>With next assumptions: </p>\n\n<ul>\n<li><p>order of results doesn't matter,</p></li>\n<li><p>we are using <strong>Python 3.3</strong>+.</p></li>\n</ul>\n\n<p>pretty straightforward solution may look like</p>\n\n<pre><code>from itertools import repeat\n\n\ndef evaluate(expected_values, measurements):\n    if not expected_values:\n        raise ValueError('Expected values should be a non-empty sequence.')\n    expected_values = sorted(expected_values)\n    measurements = sorted(measurements)\n    expected_iter = iter(expected_values)\n    left_value = next(expected_iter)\n    try:\n        right_value = next(expected_iter)\n    except StopIteration:\n        # there is only one expected value\n        yield from repeat(left_value,\n                          len(measurements))\n        return\n    for evaluated_count, measurement in enumerate(measurements):\n        while measurement &gt; right_value:\n            try:\n                left_value, right_value = right_value, next(expected_iter)\n            except StopIteration:\n                # rest of the measurements are closer to max expected value\n                yield from repeat(right_value,\n                                  len(measurements) - evaluated_count)\n                return\n\n        def key(expected_value):\n            return abs(expected_value - measurement)\n\n        yield min([left_value, right_value],\n                  key=key)\n</code></pre>\n\n<p>For <strong>Python3.3-</strong> we can replace</p>\n\n<pre><code>yield from repeat(object_, times)\n</code></pre>\n\n<p>with <code>for</code>-loop like</p>\n\n<pre><code>for _ in range(times):\n    yield object_\n</code></pre>\n\n<h1>Test</h1>\n\n<pre><code>&gt;&gt;&gt; x_in = [1.1, 2.2, 3, 4, 6.2]\n&gt;&gt;&gt; y_in = [0.9, 2, 1.9, 6, 5, 6, 6.2, 0.5, 0, 3.1, 7.6, 10.4]\n&gt;&gt;&gt; y_out = list(evaluate(x_in, y_in))\n&gt;&gt;&gt; y_out\n[1.1, 1.1, 1.1, 2.2, 2.2, 3, 4, 6.2, 6.2, 6.2, 6.2, 6.2]\n</code></pre>\n"}], "owner": {"reputation": 943, "user_id": 6242883, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oa54S.jpg?s=128&g=1", "display_name": "Tendero", "link": "https://stackoverflow.com/users/6242883/tendero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 51411305, "answer_count": 6, "score": 6, "last_activity_date": 1531987916, "creation_date": 1531947147, "last_edit_date": 1531960604, "question_id": 51410808, "link": "https://stackoverflow.com/questions/51410808/round-each-number-of-list-to-most-near-number-in-another-list", "title": "Round each number of list to most near number in another list", "body": "<p>Suppose I have a certain list <code>x</code> with numbers, and another list <code>y</code> with other numbers. Elements of <code>y</code> should be elements of <code>x</code>, but due to noise in measurements, they are kind of different. I want to find, for each value of <code>y</code>, the value of <code>x</code> that is the nearest to it.</p>\n\n<p>I can do this with some loops and check, for each element <code>y[i]</code>, which element <code>x[j]</code> minimizes <code>abs(x[j]-y[i])</code>, but I'm pretty sure there is a much easier, cleaner way to do this. The lists could be huge so I'm looking for efficient code here.</p>\n\n<p>The code I've written so far is:</p>\n\n<pre><code>x_in = [1.1, 2.2, 3, 4, 6.2]\ny_in = [0.9, 2, 1.9, 6, 5, 6, 6.2, 0.5, 0, 3.1]\ndesired_output = [1.1, 2.2, 2.2, 6.2, 4, 6.2, 6.2, 1.1, 1.1, 3]\n\ny_out = []\n\nfor y in y_in:\n    aux = [abs(l - y) for l in x_in]\n    mn,idx = min( (aux[i],i) for i in range(len(aux)) )\n    y_out.append(x_in[idx])\n\n&gt;&gt;&gt; y_out == desired_output\nTrue\n</code></pre>\n\n<p>But I don't know if there is a more efficient way to do this...</p>\n\n<p>EDIT:</p>\n\n<p>Due to my ignorance, I forgot to clarify something that may be of relevance according to the comments I've recieved.</p>\n\n<ul>\n<li>The <code>x</code> list is sorted.</li>\n<li><code>x</code> is the only list that can have a pretty big size: between 500,000 and 1,000,000 elements, in general. <code>y</code> will in general be really small, less than 10 elements.</li>\n</ul>\n"}, {"tags": ["python", "excel", "split"], "comments": [{"owner": {"reputation": 369, "user_id": 4444629, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/wZfiH.png?s=128&g=1", "display_name": "musale", "link": "https://stackoverflow.com/users/4444629/musale"}, "edited": false, "score": 1, "creation_date": 1531947834, "post_id": 51410798, "comment_id": 89793392, "body": "<a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">CSV</a> module should work. Could you please share the excel file?"}], "answers": [{"tags": [], "owner": {"reputation": 2872, "user_id": 6805091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6abbb6c8d37d0e91ad6265d68a55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Bubble Bubble Bubble Gut", "link": "https://stackoverflow.com/users/6805091/bubble-bubble-bubble-gut"}, "is_accepted": false, "score": 1, "last_activity_date": 1531948095, "creation_date": 1531948095, "answer_id": 51411003, "question_id": 51410798, "link": "https://stackoverflow.com/questions/51410798/how-to-split-compact-data/51411003#51411003", "title": "How to split compact data", "body": "<p>It can be done with <code>Pandas</code>: </p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_excel(file_path)\n\ndf['part_1'] = df.X1.str.slice(0, 10)\ndf['part_2'] = df.X1.str.slice(10, 20)\ndf['part_3'] = df.X1.str.slice(20, 40)\ndf['part_4'] = df.X1.str.slice(40, None)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10101957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86a4a8a0ea4bb8baf7e536b150dd32e5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuting Feng", "link": "https://stackoverflow.com/users/10101957/yuting-feng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531948095, "creation_date": 1531947048, "last_edit_date": 1531947154, "question_id": 51410798, "link": "https://stackoverflow.com/questions/51410798/how-to-split-compact-data", "title": "How to split compact data", "body": "<p>I have an Excel, looks like below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mTl64.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mTl64.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now, all the numbers and alpha are in the same column and they are compact without space. </p>\n\n<p>I want to split the column into four: first 10 characters in column 1, 11-20 characters in column 2, 21-40 characters in column 3, other characters in column 4. </p>\n\n<p>DO you know how can I do that with Python?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 1, "creation_date": 1531947088, "post_id": 51410794, "comment_id": 89793034, "body": "change int() to float() around your input() func and try again."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1531947142, "post_id": 51410794, "comment_id": 89793065, "body": "<code>20.5</code> is not an integer value"}, {"owner": {"reputation": 1, "user_id": 10101949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbe9a0ceb2c863765d26ab5ca27eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "k L", "link": "https://stackoverflow.com/users/10101949/k-l"}, "edited": false, "score": 0, "creation_date": 1531947433, "post_id": 51410794, "comment_id": 89793201, "body": "Oh I forgot about float thanks now I just cant get the string to work when I enter string it gives this could not convert string to float: &#39;kitten&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 10071874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984648428ecadc5303d4100fbf62369b?s=128&d=identicon&r=PG&f=1", "display_name": "Zach", "link": "https://stackoverflow.com/users/10071874/zach"}, "is_accepted": false, "score": 0, "last_activity_date": 1531947441, "creation_date": 1531947441, "answer_id": 51410865, "question_id": 51410794, "link": "https://stackoverflow.com/questions/51410794/python-bank-atm/51410865#51410865", "title": "Python bank ATM", "body": "<p>You are converting everything to an int, so putting in strings and doubles will give you errors.  You need to check the content of your input before blindly converting it to an int.</p>\n\n<p>You need to think about what your code is actually doing instead of just blindly changing things until they work without understanding why.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 10089599, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l8XC5WwmBLE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pIu4HZipEEYjSrfVR0HINVf7y-kA/mo/photo.jpg?sz=128", "display_name": "A Wild Potato", "link": "https://stackoverflow.com/users/10089599/a-wild-potato"}, "is_accepted": true, "score": 1, "last_activity_date": 1531947534, "creation_date": 1531947534, "answer_id": 51410888, "question_id": 51410794, "link": "https://stackoverflow.com/questions/51410794/python-bank-atm/51410888#51410888", "title": "Python bank ATM", "body": "<p>The reason why entering 20.5 gives you an error is because in the amt variable, it is looking for an integer to be inputted. In python, any number with a decimal is considered a float.</p>\n\n<p>The code for the amt variable is currently</p>\n\n<pre><code>amt = int(input(\"Withdraw amount: \"))\n</code></pre>\n\n<p>For the amt variable to have a number with a decimal as acceptable input, the amt variable should be this:</p>\n\n<pre><code>amt = float(input(\"Withdraw amount: \"))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10101949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbe9a0ceb2c863765d26ab5ca27eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "k L", "link": "https://stackoverflow.com/users/10101949/k-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 51410888, "answer_count": 2, "score": -3, "last_activity_date": 1531962426, "creation_date": 1531947019, "last_edit_date": 1531962426, "question_id": 51410794, "link": "https://stackoverflow.com/questions/51410794/python-bank-atm", "title": "Python bank ATM", "body": "<p>So I have a homework on coding a bank ATM machine and I have done most of the code but I do not seem to make work like the professor stated \"If the user enters an invalid numeric value, inform the user as such. If the user enters a valid number between 0 and 100, display the amount of funds left in the account\" </p>\n\n<blockquote>\n  <p>example:</p>\n  \n  <p><code>kitten : \"Invalid Entry\".</code><br>\n  <code>20.5 : \"Your account has $79.50 remaining\"</code></p>\n</blockquote>\n\n<p>My code so far:</p>\n\n<pre><code>amt = int(input(\"Withdraw amount: \"))\n\nif amt &lt;= 0:\n    print(\"Invalid Amount\")\nelse:\n    print{\"Invalid Entry\")\n\nif amt &gt; 100:\n    print(\"Not enough funds in account\")\n\nif (amt &gt;=0 and amt &lt;=100):\n    print(\"Your account has ${0:1.2f} remaining.\" .format(100-amt))\n</code></pre>\n\n<p>My issue is that when I enter <code>20.5</code> it give me an error </p>\n\n<pre><code>\"ValueError: invalid literal for int() with base 10: '20.5'\"\n</code></pre>\n\n<p>The second issue is when I enter a string <code>\"ValueError: invalid literal for int() with base 10: 'kitten'\"</code></p>\n"}, {"tags": ["python", "time"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1531947053, "post_id": 51410772, "comment_id": 89793019, "body": "You either need to: <code>from datetime import datetime</code> then use <code>datetime(*...)</code>; <b>or</b> <code>import datetime</code> then use <code>datetime.datetime(*...)</code>. The module named <code>datetime</code> contains (amongst other things) a class named <code>datetime</code>, so you have to be aware of which of those names is currently in scope. You&#39;re currently trying to access <code>datetime.datetime.datetime</code> which doesn&#39;t exist, hence the error."}, {"owner": {"reputation": 881, "user_id": 6645845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3a2fb114750ce2d34e3e07b594feed5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ritz", "link": "https://stackoverflow.com/users/6645845/ritz"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1531947151, "post_id": 51410772, "comment_id": 89793070, "body": "@jonrsharpe - I already have <code>from datetime import datetime</code> in my code,why is it still complaining?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1531947196, "post_id": 51410772, "comment_id": 89793091, "body": "Read the error. It&#39;s complaining because, despite explicitly importing the class into the current scope as <code>datetime</code>, you&#39;re trying to instantiate it as if you&#39;d imported the whole module as <code>datetime</code>."}], "answers": [{"comments": [{"owner": {"reputation": 881, "user_id": 6645845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3a2fb114750ce2d34e3e07b594feed5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ritz", "link": "https://stackoverflow.com/users/6645845/ritz"}, "edited": false, "score": 0, "creation_date": 1531947288, "post_id": 51410813, "comment_id": 89793137, "body": "Then it throws an error <code>AttributeError: type object &#39;datetime.datetime&#39; has no attribute &#39;timedelta&#39;</code> at line <code>delta = datetime.timedelta(hours=8)</code>"}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "reply_to_user": {"reputation": 881, "user_id": 6645845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3a2fb114750ce2d34e3e07b594feed5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ritz", "link": "https://stackoverflow.com/users/6645845/ritz"}, "edited": false, "score": 0, "creation_date": 1531947334, "post_id": 51410813, "comment_id": 89793160, "body": "@kemosabee Just write <code>import datetime</code>, not <code>from datetime import datetime</code> and leave the code as it was. I updated my answer"}, {"owner": {"reputation": 881, "user_id": 6645845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3a2fb114750ce2d34e3e07b594feed5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ritz", "link": "https://stackoverflow.com/users/6645845/ritz"}, "edited": false, "score": 0, "creation_date": 1531947479, "post_id": 51410813, "comment_id": 89793220, "body": "the time delta is increasing the time by 8 hours ,I want to reduce by 8 hours,how can this be done/"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 881, "user_id": 6645845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3a2fb114750ce2d34e3e07b594feed5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ritz", "link": "https://stackoverflow.com/users/6645845/ritz"}, "edited": false, "score": 0, "creation_date": 1531947499, "post_id": 51410813, "comment_id": 89793235, "body": "@kemosabee ...subtract it instead of adding it?!"}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": true, "score": 1, "last_activity_date": 1531947409, "last_edit_date": 1531947409, "creation_date": 1531947166, "answer_id": 51410813, "question_id": 51410772, "link": "https://stackoverflow.com/questions/51410772/attributeerror-while-using-timedelta-type-object-datetime-datetime-has-no-att/51410813#51410813", "title": "AttributeError while using timedelta: type object &#39;datetime.datetime&#39; has no attribute &#39;datetime&#39;", "body": "<p>You are importing <code>datetime</code> from <code>datetime</code>. Later in the code you using <code>datetime.datetime</code>, so that's giving you error.</p>\n\n<p>You shoud just call <code>t = datetime(*struct_time[:6])</code> </p>\n\n<p>or </p>\n\n<p>just do <code>import datetime</code> and call it <code>t = datetime.datetime(*struct_time[:6])</code></p>\n\n<p>The correct program should look like:</p>\n\n<pre><code>import time\nimport datetime\ntime_string = '2018-07-16T23:50:55+0000'\n\n#Reduct 8 hours and print in human readable format\nstruct_time = time.strptime(time_string, \"%Y-%m-%dT%H:%M:%S+0000\")\nt = datetime.datetime(*struct_time[:6])\ndelta = datetime.timedelta(hours=8)\nprint(t+delta)\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 6645845, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3a2fb114750ce2d34e3e07b594feed5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ritz", "link": "https://stackoverflow.com/users/6645845/ritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3145, "favorite_count": 0, "accepted_answer_id": 51410813, "answer_count": 1, "score": 0, "last_activity_date": 1531947531, "creation_date": 1531946936, "last_edit_date": 1531947531, "question_id": 51410772, "link": "https://stackoverflow.com/questions/51410772/attributeerror-while-using-timedelta-type-object-datetime-datetime-has-no-att", "title": "AttributeError while using timedelta: type object &#39;datetime.datetime&#39; has no attribute &#39;datetime&#39;", "body": "<p>I have the following code in which am trying to read the time string and reduce the time by 8 hours and print in a human readable format but am running into below error. Can anyone provide guidance on how to fix this?</p>\n\n<pre><code>import time\nfrom datetime import datetime\ntime_string = '2018-07-16T23:50:55+0000'\n\n#Reduct 8 hours and print in human readable format\nstruct_time = time.strptime(time_string, \"%Y-%m-%dT%H:%M:%S+0000\")\nt = datetime.datetime(*struct_time[:6])\ndelta = datetime.timedelta(hours=8)\nprint(t+delta)\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>    t = datetime.datetime(*struct_time[:6])\nAttributeError: type object 'datetime.datetime' has no attribute 'datetime'\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "multidimensional-array", "mask"], "answers": [{"comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 2, "creation_date": 1531946951, "post_id": 51410743, "comment_id": 89792976, "body": "And so what if he did?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1531947075, "post_id": 51410743, "comment_id": 89793028, "body": "It&#39;s fine to answer your own question, but the code you&#39;ve provided in your answer doesn&#39;t even work."}, {"owner": {"reputation": 4551, "user_id": 4212158, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-MeijoBfHUlw/AAAAAAAAAAI/AAAAAAAAIUo/hFq1fS9ga6U/photo.jpg?sz=128", "display_name": "crypdick", "link": "https://stackoverflow.com/users/4212158/crypdick"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1531948569, "post_id": 51410743, "comment_id": 89793680, "body": "@user3483203 I made a typo (wrote 3 instead of 0). It works now."}], "tags": [], "owner": {"reputation": 4551, "user_id": 4212158, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-MeijoBfHUlw/AAAAAAAAAAI/AAAAAAAAIUo/hFq1fS9ga6U/photo.jpg?sz=128", "display_name": "crypdick", "link": "https://stackoverflow.com/users/4212158/crypdick"}, "is_accepted": true, "score": -1, "last_activity_date": 1531948497, "last_edit_date": 1531948497, "creation_date": 1531946814, "answer_id": 51410743, "question_id": 51410742, "link": "https://stackoverflow.com/questions/51410742/numpy-copyto-returns-none/51410743#51410743", "title": "Numpy: copyto returns None", "body": "<p>In Python, by default, if a function does not have a return statement it returns <code>None</code>. The <code>np.copyto</code> definition does not return anything. Instead, it rewrites <code>a</code> in place.</p>\n\n<p>So, you have to copy <code>a</code> beforehand:</p>\n\n<pre><code>import numpy as np\na = np.random.random((3,3))\nb = np.zeros_like(a)\nb[:,0] = 100\nb_nonzero_mask = b.astype(bool)\nc = np.copy(a)\nnp.copyto(c, b, where=b_nonzero_mask)\n</code></pre>\n"}], "owner": {"reputation": 4551, "user_id": 4212158, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-MeijoBfHUlw/AAAAAAAAAAI/AAAAAAAAIUo/hFq1fS9ga6U/photo.jpg?sz=128", "display_name": "crypdick", "link": "https://stackoverflow.com/users/4212158/crypdick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 51410743, "answer_count": 1, "score": -2, "last_activity_date": 1531948604, "creation_date": 1531946814, "last_edit_date": 1531948604, "question_id": 51410742, "link": "https://stackoverflow.com/questions/51410742/numpy-copyto-returns-none", "title": "Numpy: copyto returns None", "body": "<p>When I use <code>np.copyto</code>, it always returns <code>None</code>:</p>\n\n<pre><code>import numpy as np\na = np.random.random((3,3))\nb = np.zeros_like(a)\nb[:,0] = 100\nb_nonzero_mask = b.astype(bool)\nc = np.copyto(a, b, where=b_nonzero_mask)\nprint(c)  # None\n</code></pre>\n\n<p>How is the function supposed to be used?</p>\n"}, {"tags": ["python", "paste"], "comments": [{"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1531947103, "post_id": 51410733, "comment_id": 89793047, "body": "Perhaps the problem is the source indentation, are all tabs or spaces, are they mixed?"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10101912, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N08SUQomEDQ/AAAAAAAAAAI/AAAAAAAAAsI/xERVIaTqkk8/photo.jpg?sz=128", "display_name": "Adrien Guillemin", "link": "https://stackoverflow.com/users/10101912/adrien-guillemin"}, "is_accepted": false, "score": 0, "last_activity_date": 1532108436, "last_edit_date": 1532108436, "creation_date": 1531981914, "answer_id": 51415795, "question_id": 51410733, "link": "https://stackoverflow.com/questions/51410733/how-to-desactivate-double-indent-when-i-paste-the-code-in-a-python-terminal/51415795#51415795", "title": "how to desactivate double indent when I paste the code in a python terminal", "body": "<p>They are mixed, if we see my first code, it's only one indentation, and then the second line is one tab and one indentation, and from the fourth line it's two tabs, as simply as we see on my question.\nAnd if I paste it in any other text editor it work perfectly, I tried to see every setting in my terminal or in my linux but I've found nothing so far... It's really strange !</p>\n\n<p>Edit :</p>\n\n<p>Apparently for a reason that I don't know, it come from Atom the editor that I use for writing my python code.</p>\n\n<p>I explain it's very strange !</p>\n\n<p>if I copy the code from Atom, and I paste it in any other text editor (there, in kate or other) and I copy from this other editor and paste in my terminal, it's happend again, double indendation.</p>\n\n<p>But to correct that I just create a new fil in Atom, and then is fine, It work properly the pasting in the terminal.</p>\n\n<p>Question solved, but why ?? That's a mystery ^^</p>\n"}], "owner": {"reputation": 21, "user_id": 10101912, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N08SUQomEDQ/AAAAAAAAAAI/AAAAAAAAAsI/xERVIaTqkk8/photo.jpg?sz=128", "display_name": "Adrien Guillemin", "link": "https://stackoverflow.com/users/10101912/adrien-guillemin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1532108436, "creation_date": 1531946779, "last_edit_date": 1531947268, "question_id": 51410733, "link": "https://stackoverflow.com/questions/51410733/how-to-desactivate-double-indent-when-i-paste-the-code-in-a-python-terminal", "title": "how to desactivate double indent when I paste the code in a python terminal", "body": "<p>I try to understand why my pasting in my terminal (linux) in my python interpreter put double indent every line for example :\nif I paste these lines :</p>\n\n<pre><code>def function(string):\n    final = ''\n    for i in string:\n        try:\n            final += str(int(i))\n        except ValueError:\n            return int(final)\n</code></pre>\n\n<p>I'll get this in my terminal :</p>\n\n<pre><code>    ent&gt;&gt;&gt; def function(string):\n... \n  File \"&lt;stdin&gt;\", line 2\n\n    ^\nIndentationError: expected an indented block\n&gt;&gt;&gt;     final = ''\n  File \"&lt;stdin&gt;\", line 1\n    final = ''\n    ^\nIndentationError: unexpected indent\n&gt;&gt;&gt; \n&gt;&gt;&gt;     for i in string:\n  File \"&lt;stdin&gt;\", line 1\n    for i in string:\n    ^\nIndentationError: unexpected indent\n&gt;&gt;&gt; \n</code></pre>\n\n<p>And more and more... because when there is a for or any instruction that needs a tab, it return it directly instead to wait for the next instruction,so it rise an IndentationError:</p>\n\n<p>And I realize that if I paste this for exemple :</p>\n\n<pre><code>import mathimport threading\n</code></pre>\n\n<p>it will paste like this in my terminal :</p>\n\n<pre><code>&gt;&gt;&gt; import math\n&gt;&gt;&gt; import threading\n&gt;&gt;&gt; \n</code></pre>\n\n<p>I didn't have from the beginin, so any idea ? because it was impossible to find my answer in internet..</p>\n"}, {"tags": ["python", "keras", "deep-learning", "slice"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 8811242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edc45454f1d1d838060c3b05e70a39a?s=128&d=identicon&r=PG&f=1", "display_name": "Victor. L", "link": "https://stackoverflow.com/users/8811242/victor-l"}, "edited": false, "score": 0, "creation_date": 1531984231, "post_id": 51415227, "comment_id": 89803930, "body": "I tried to use <i>tf.slice</i>, but apparently yours is better. But I have one more question, I want to convert each value in z into one hot, and then find their sum as an input passing to another dense layer. e.g. <b>z.output=array([2,1,2]) --&gt; r=[0,0,1]+[0,1,0]+[0,0,1]=[0,1,2] --&gt; d=Dense()(r)</b>  I tried to use <b>tf.one_hot</b> and <b>tf.reduce_sum</b> but always got an <b>error:AttributeError: &#39;NoneType&#39; object has no attribute &#39;_inbound_nodes&#39;</b> Do you know why that happened and how to fix it?"}, {"owner": {"reputation": 125, "user_id": 8811242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edc45454f1d1d838060c3b05e70a39a?s=128&d=identicon&r=PG&f=1", "display_name": "Victor. L", "link": "https://stackoverflow.com/users/8811242/victor-l"}, "edited": false, "score": 0, "creation_date": 1531986377, "post_id": 51415227, "comment_id": 89805186, "body": "I found that when I put the tf.one_hot and tf.reduce_sum into a Lambda, it works! It seems that Lambda is a very good layer, thanks!"}], "tags": [], "owner": {"reputation": 1444, "user_id": 2060205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7956be17c8a5f0be1dca0dbe1c0624de?s=128&d=identicon&r=PG", "display_name": "spadarian", "link": "https://stackoverflow.com/users/2060205/spadarian"}, "is_accepted": true, "score": 0, "last_activity_date": 1531979461, "creation_date": 1531979461, "answer_id": 51415227, "question_id": 51410692, "link": "https://stackoverflow.com/questions/51410692/how-to-use-the-slice-of-a-resultsarray-from-a-middle-layer/51415227#51415227", "title": "How to use the slice of a results(array) from a middle layer", "body": "<p>Just slice the tensor within the <code>Lambda</code> layer:</p>\n\n<pre><code>a = np.array([[1, 2, 3, 4, 5, 6],\n             [1, 2, 3, 4, 5, 6],\n             [1, 2, 3, 4, 5, 6]])\nx = keras.layers.Input(shape=(6,))\ny = keras.layers.Lambda(lambda x: x * 1)(x)\nz = keras.layers.Lambda(lambda x: x[:, 4] * 1)(y)\nmodel = keras.Model(x, [y, z])\nmodel.compile(optimizer='sgd', loss='mean_squared_error')\nmodel.predict(a)\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 8811242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5edc45454f1d1d838060c3b05e70a39a?s=128&d=identicon&r=PG&f=1", "display_name": "Victor. L", "link": "https://stackoverflow.com/users/8811242/victor-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 51415227, "answer_count": 1, "score": 0, "last_activity_date": 1531979461, "creation_date": 1531946622, "question_id": 51410692, "link": "https://stackoverflow.com/questions/51410692/how-to-use-the-slice-of-a-resultsarray-from-a-middle-layer", "title": "How to use the slice of a results(array) from a middle layer", "body": "<p>I know that we can use the get_layer() to build a new model, but my problem is a little different:</p>\n\n<p>I simplified my model:</p>\n\n<pre><code>import keras\nimport numpy as np\na = np.array([[1,2,3,4,5,6],[1,2,3,4,5,6],[1,2,3,4,5,6]])\nx = keras.layers.Input(shape=(6,))\ny = keras.layers.Lambda(lambda x: x * 1)(x)\nz = keras.layers.Lambda(lambda x: x * 1)(y[:,4])\nmodel = keras.Model(x,[y,z])\nmodel.compile(optimizer='sgd',loss='mean_squared_error')\nmodel.predict(a)\n</code></pre>\n\n<p>if I remove the line of 'z', the model works just fine. Otherwise with encounter the following error:</p>\n\n<pre><code>AttributeError                            Traceback (most recent call last)\n&lt;ipython-input-74-7fc86ac55867&gt; in &lt;module&gt;()\n----&gt; 1 model = keras.Model(x,[y,z])\n    2 model.compile(optimizer='sgd',loss='mean_squared_error')\n\n~/.conda/envs/21/lib/python3.6/site-packages/keras/legacy/interfaces.py in wrapper(*args, **kwargs)\n    89                 warnings.warn('Update your `' + object_name +\n    90                               '` call to the Keras 2 API: ' + signature, stacklevel=2)\n---&gt; 91             return func(*args, **kwargs)\n    92         wrapper._original_function = func\n    93         return wrapper\n\n~/.conda/envs/21/lib/python3.6/site-packages/keras/engine/network.py in __init__(self, *args, **kwargs)\n    89                 'inputs' in kwargs and 'outputs' in kwargs):\n    90             # Graph network\n---&gt; 91             self._init_graph_network(*args, **kwargs)\n    92         else:\n    93             # Subclassed network\n\n~/.conda/envs/21/lib/python3.6/site-packages/keras/engine/network.py in _init_graph_network(self, inputs, outputs, name)\n    233         # Keep track of the network's nodes and layers.\n    234         nodes, nodes_by_depth, layers, layers_by_depth = _map_graph_network(\n--&gt; 235             self.inputs, self.outputs)\n    236         self._network_nodes = nodes\n    237         self._nodes_by_depth = nodes_by_depth\n\n~/.conda/envs/21/lib/python3.6/site-packages/keras/engine/network.py in _map_graph_network(inputs, outputs)\n1410                   layer=layer,\n1411                   node_index=node_index,\n-&gt; 1412                   tensor_index=tensor_index)\n1413 \n1414     for node in reversed(nodes_in_decreasing_depth):\n\n~/.conda/envs/21/lib/python3.6/site-packages/keras/engine/network.py in build_map(tensor, finished_nodes, nodes_in_progress, layer, node_index, tensor_index)\n1397             tensor_index = node.tensor_indices[i]\n1398             build_map(x, finished_nodes, nodes_in_progress, layer,\n-&gt; 1399                       node_index, tensor_index)\n1400 \n1401         finished_nodes.add(node)\n\n~/.conda/envs/21/lib/python3.6/site-packages/keras/engine/network.py in build_map(tensor, finished_nodes, nodes_in_progress, layer, node_index, tensor_index)\n1369             ValueError: if a cycle is detected.\n1370         \"\"\"\n-&gt; 1371         node = layer._inbound_nodes[node_index]\n1372 \n1373         # Prevent cycles.\n\nAttributeError: 'NoneType' object has no attribute '_inbound_nodes'\n</code></pre>\n\n<p>Can anybody tell me why does that happen and how to fix it?\nThanks!</p>\n"}, {"tags": ["python", "numpy", "divide-by-zero"], "comments": [{"owner": {"reputation": 19758, "user_id": 1534017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aa667d0e455aa30f3410756d719de795?s=128&d=identicon&r=PG", "display_name": "Cleb", "link": "https://stackoverflow.com/users/1534017/cleb"}, "edited": false, "score": 0, "creation_date": 1531948314, "post_id": 51410665, "comment_id": 89793581, "body": "Could you post an example? Then it is easier to help. And you might want to take a look at <a href=\"https://stackoverflow.com/a/37977222/1534017\">this answer</a>."}, {"owner": {"reputation": 9, "user_id": 4000395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e3e6e3b7be8fc4d66926500b321748d?s=128&d=identicon&r=PG&f=1", "display_name": "Ritik Dutta", "link": "https://stackoverflow.com/users/4000395/ritik-dutta"}, "reply_to_user": {"reputation": 19758, "user_id": 1534017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aa667d0e455aa30f3410756d719de795?s=128&d=identicon&r=PG", "display_name": "Cleb", "link": "https://stackoverflow.com/users/1534017/cleb"}, "edited": false, "score": 1, "creation_date": 1532016192, "post_id": 51410665, "comment_id": 89825604, "body": "The answer you shared worked for me. Thanks!"}], "owner": {"reputation": 9, "user_id": 4000395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e3e6e3b7be8fc4d66926500b321748d?s=128&d=identicon&r=PG&f=1", "display_name": "Ritik Dutta", "link": "https://stackoverflow.com/users/4000395/ritik-dutta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1531956428, "answer_count": 0, "score": 0, "last_activity_date": 1531948347, "creation_date": 1531946474, "last_edit_date": 1531948347, "question_id": 51410665, "link": "https://stackoverflow.com/questions/51410665/how-to-handle-exceptions-in-numpy-matrix-divisions-in-python", "closed_reason": "Duplicate", "title": "How to handle exceptions in Numpy matrix divisions in Python?", "body": "<p>I have two matrices (of the same dimension) and I am dividing one by the other. This gives me a matrix of the same dimension in which each element is the quotient of the division of the corresponding elements in the original matrices. However, some elements of the divisor matrix are zeros. This gives me an error. I don't want to use for loops and go through each division separately. Is there any way in which I can handle the divide by zero instances by replacing the result with zeros?</p>\n\n<p>I think I can use <code>numpy.seterr()</code> and <code>numpy.seterrcall()</code> to solve this but I can't figure out how to replace the divide by zero instances with zeros.</p>\n"}, {"tags": ["python", "google-cloud-platform", "google-cloud-storage", "service-accounts"], "comments": [{"owner": {"reputation": 534, "user_id": 1842892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jw81v.jpg?s=128&g=1", "display_name": "Frank Natividad", "link": "https://stackoverflow.com/users/1842892/frank-natividad"}, "edited": false, "score": 0, "creation_date": 1532139709, "post_id": 51410633, "comment_id": 89874532, "body": "Could you share the code you&#39;re using? Also could you tell me more about how this service account is set to be used by the client library?"}, {"owner": {"reputation": 10254, "user_id": 1789384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tfC31.png?s=128&g=1", "display_name": "Drux", "link": "https://stackoverflow.com/users/1789384/drux"}, "reply_to_user": {"reputation": 534, "user_id": 1842892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jw81v.jpg?s=128&g=1", "display_name": "Frank Natividad", "link": "https://stackoverflow.com/users/1842892/frank-natividad"}, "edited": false, "score": 0, "creation_date": 1532152368, "post_id": 51410633, "comment_id": 89876080, "body": "@FrankNatividad This is what questions (and upvotes) are for. Why not post such a question (and link to it from here, so that I can notice it as well)?"}, {"owner": {"reputation": 2447, "user_id": 320761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abRk9.png?s=128&g=1", "display_name": "Lukasz Frankowski", "link": "https://stackoverflow.com/users/320761/lukasz-frankowski"}, "edited": false, "score": 1, "creation_date": 1540758822, "post_id": 51410633, "comment_id": 92971824, "body": "It looks there&#39;s a bug in gcloud. I&#39;ve come across the same problem. Roles assigned but always permission denied from the command line, which dissapeared after removing service account and creating another one."}, {"owner": {"reputation": 1882, "user_id": 7961860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Co2yu.png?s=128&g=1", "display_name": "Sofie VL", "link": "https://stackoverflow.com/users/7961860/sofie-vl"}, "edited": false, "score": 0, "creation_date": 1585937696, "post_id": 51410633, "comment_id": 107950597, "body": "In case this helps anyone in the future: I had a similar problem but had to reboot my IDE (PyCharm) after granting the correct permissions."}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 9908267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGIbU.jpg?s=128&g=1", "display_name": "Yurci", "link": "https://stackoverflow.com/users/9908267/yurci"}, "edited": false, "score": 3, "creation_date": 1532007370, "post_id": 51413985, "comment_id": 89819136, "body": "Happy to hear you solved the issue. Principally, if a service account has Storage Admin role it should be able to create a bucket no matter what additional roles it has. I try to reproduce this issue, having a service account with three roles storage.admin, storage.objectAdmin, and storage.objectCreator; I confirm I can create a bucket using that service account. Can you double check by adding these additional roles if the issue still continues on your side?"}], "tags": [], "owner": {"reputation": 10254, "user_id": 1789384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tfC31.png?s=128&g=1", "display_name": "Drux", "link": "https://stackoverflow.com/users/1789384/drux"}, "is_accepted": true, "score": 16, "last_activity_date": 1531971701, "creation_date": 1531971701, "answer_id": 51413985, "question_id": 51410633, "link": "https://stackoverflow.com/questions/51410633/service-account-does-not-have-storage-objects-get-access-for-google-cloud-storag/51413985#51413985", "title": "service account does not have storage.objects.get access for Google Cloud Storage", "body": "<p>The problem was apparently that the service account was associated with too many roles, perhaps as a results of previous configuration attempts.</p>\n\n<p>These steps resolved the issue:</p>\n\n<ul>\n<li>removed all (three) roles for the offending service account (member) <code>my_sa</code> under <code>IAM &amp; Admin</code> / <code>IAM</code></li>\n<li>deleted <code>my_sa</code> under <code>IAM &amp; Admin</code> / <code>Service accounts</code></li>\n<li>recreated <code>my_sa</code> (again with role <code>Storage</code> / <code>Storage Admin</code>)</li>\n</ul>\n\n<p>Effects are like this:</p>\n\n<ul>\n<li><code>my_sa</code> shows up with one role (<code>Storage Admin</code>) under <code>IAM &amp; Admin</code> / <code>IAM</code></li>\n<li><code>my_sa</code> shows up as member under <code>Storage</code> / <code>Browser</code> / <code>my_bucket</code> / <code>Edit bucket permissions</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 372, "user_id": 2201572, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4e8f6bfaeb13f9e4c12ff2d347ed75b?s=128&d=identicon&r=PG", "display_name": "Ville", "link": "https://stackoverflow.com/users/2201572/ville"}, "edited": false, "score": 0, "creation_date": 1615237278, "post_id": 65036751, "comment_id": 117624606, "body": "This is exactly what happened to me with fresh app engine deployment via <code>gcloud app deploy</code>."}], "tags": [], "owner": {"reputation": 91, "user_id": 1838905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42217c8ccbc6cebeeb9ce34ac168c316?s=128&d=identicon&r=PG", "display_name": "0Pat", "link": "https://stackoverflow.com/users/1838905/0pat"}, "is_accepted": false, "score": 6, "last_activity_date": 1606477190, "creation_date": 1606477190, "answer_id": 65036751, "question_id": 51410633, "link": "https://stackoverflow.com/questions/51410633/service-account-does-not-have-storage-objects-get-access-for-google-cloud-storag/65036751#65036751", "title": "service account does not have storage.objects.get access for Google Cloud Storage", "body": "<p>It's worth to note, that you need to wait a minute or something for permissions to be working in case you just assigned them. At least that's what happened to me after:</p>\n<pre><code>gcloud projects add-iam-policy-binding xxx --member\n&quot;serviceAccount:xxx@xxx.iam.gserviceaccount.com&quot; --role &quot;roles/storage.objectViewer&quot;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 13952385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcf15ae75d08a8a9ca5ceebd8d247a29?s=128&d=identicon&r=PG&f=1", "display_name": "nour", "link": "https://stackoverflow.com/users/13952385/nour"}, "is_accepted": false, "score": 1, "last_activity_date": 1616095501, "creation_date": 1616095501, "answer_id": 66697815, "question_id": 51410633, "link": "https://stackoverflow.com/questions/51410633/service-account-does-not-have-storage-objects-get-access-for-google-cloud-storag/66697815#66697815", "title": "service account does not have storage.objects.get access for Google Cloud Storage", "body": "<p>Go to your bucket's permissions section and open add permissions section for your bucket. For example, insufficient service, which gcloud tells you, is;</p>\n<pre><code>1234567890-compute@developer.gserviceaccount.com \n</code></pre>\n<p>Add this service as user then give these roles;</p>\n<ul>\n<li>Cloud Storage - Storage Admin</li>\n<li>Cloud Storage - Storage Object Admin</li>\n<li>Cloud Storage - Storage Object Creator</li>\n</ul>\n<p>Then you should have sufficient permissions to make changes on your bucket.</p>\n"}], "owner": {"reputation": 10254, "user_id": 1789384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tfC31.png?s=128&g=1", "display_name": "Drux", "link": "https://stackoverflow.com/users/1789384/drux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34915, "favorite_count": 2, "accepted_answer_id": 51413985, "answer_count": 3, "score": 28, "last_activity_date": 1616095501, "creation_date": 1531946326, "last_edit_date": 1531949152, "question_id": 51410633, "link": "https://stackoverflow.com/questions/51410633/service-account-does-not-have-storage-objects-get-access-for-google-cloud-storag", "title": "service account does not have storage.objects.get access for Google Cloud Storage", "body": "<p>I have created a service account in Google Cloud Console and selected role <code>Storage</code> / <code>Storage Admin</code> (i.e. full control of GCS resources).</p>\n\n<p><code>gcloud projects get-iam-policy my_project</code> seems to <a href=\"https://stackoverflow.com/questions/47006062\">indicate</a> that the role was actually selected:</p>\n\n<pre><code>- members:\n  - serviceAccount:my_sa@my_project.iam.gserviceaccount.com\n  role: roles/storage.admin\n- members:\n  - serviceAccount:my_sa@my_project.iam.gserviceaccount.com\n  role: roles/storage.objectAdmin\n- members:\n  - serviceAccount:my_sa@my_project.iam.gserviceaccount.com\n  role: roles/storage.objectCreator\n</code></pre>\n\n<p>And <a href=\"https://cloud.google.com/storage/docs/access-control/iam-roles\" rel=\"noreferrer\">documentation</a> clearly indicates that role <code>roles/storage.admin</code> comprises permissions <code>storage.objects.*</code> (as well as <code>storage.buckets.*</code>).</p>\n\n<p>But when I try using that service account in conjunction with the Google Cloud Storage Client Library for Python, I receive this error message:</p>\n\n<blockquote>\n  <p>my_sa@my_project.iam.gserviceaccount.com does not have\n  storage.objects.get access to my_project/my_bucket.</p>\n</blockquote>\n\n<p>So why would the selected role not be sufficient in this context?</p>\n"}, {"tags": ["python", "pygame", "perlin-noise"], "answers": [{"tags": [], "owner": {"reputation": 91141, "user_id": 142637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9SiZh.png?s=128&g=1", "display_name": "sloth", "link": "https://stackoverflow.com/users/142637/sloth"}, "is_accepted": true, "score": 0, "last_activity_date": 1531982147, "creation_date": 1531982147, "answer_id": 51415870, "question_id": 51410608, "link": "https://stackoverflow.com/questions/51410608/i-cant-turn-my-perlin-noise-map-generator-into-a-pygame-tilemap-for-my-game/51415870#51415870", "title": "I can&#39;t turn my perlin noise map generator into a pygame tilemap for my game", "body": "<p>Tricky to answer since your answer lacks a runnable example, but two thing:</p>\n\n<pre><code>if color_world == blue:\n</code></pre>\n\n<p>It's not strange that you get an error here. The error message tells you what's wrong:</p>\n\n<pre><code>ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n\n<p>You try to check if <code>color_world</code> equals <code>blue</code>, but <code>color_world</code> is a multidimensional list, while <code>blue</code> is a list of integers, so basically Python does now know what to. I suppose the line should be</p>\n\n<pre><code>if color_world[i][j] == blue\n</code></pre>\n\n<hr>\n\n<p>Also, remove this part:</p>\n\n<pre><code> for row in range (tilesettings.mapheight):\n            for column in range(tilesettings.mapwidth):\n                pygame.draw.rect(screen, \ncolours[tilesettings.tilemap[row][column]],(column* \ntilesettings.tilesize, row* tilesettings.tilesize, \ntilesettings.tilesize, tilesettings.tilesize))\n</code></pre>\n\n<p>out of your main loop. </p>\n\n<p>Run it once before and draw the background to a new <code>Surface</code>, then use that new <code>Surface</code> in your main loop, like this:</p>\n\n<pre><code>...\nbackground = pygame.Surface((tilesettings.mapwidth*tilesettings.tilesize, tilesettings.mapheight*tilesettings.tilesize))\n for row in range (tilesettings.mapheight):\n            for column in range(tilesettings.mapwidth):\n                pygame.draw.rect(background , \n                    colours[tilesettings.tilemap[row][column]],(column* \n                    tilesettings.tilesize, row* tilesettings.tilesize, \n                    tilesettings.tilesize, tilesettings.tilesize))\n...\nwhile True:\n    gf.check_events(ai_settings, screen, player, cursor, axe)\n    player.update()\n    cursor.update()\n    gf.update_screen(ai_settings, screen, player)\n    screen.blit(background, (0, 0))\n    biome.update(screen)\n    player.blitme()\n    axe.changeimage()\n    axe.blitme()\n    pygame.display.update()\n</code></pre>\n\n<p>so you don't have to loop over every row and column in <code>tilesettings.tilemap</code> multiple times per second. You'll get the idea.</p>\n\n<p>That should help you improve the performance.</p>\n"}], "owner": {"reputation": 5, "user_id": 9771051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VDQPduH2KMc/AAAAAAAAAAI/AAAAAAAAACA/ewhtZDvxvSI/photo.jpg?sz=128", "display_name": "Cameron Walker", "link": "https://stackoverflow.com/users/9771051/cameron-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 51415870, "answer_count": 1, "score": 0, "last_activity_date": 1616978023, "creation_date": 1531946221, "last_edit_date": 1531947829, "question_id": 51410608, "link": "https://stackoverflow.com/questions/51410608/i-cant-turn-my-perlin-noise-map-generator-into-a-pygame-tilemap-for-my-game", "title": "I can&#39;t turn my perlin noise map generator into a pygame tilemap for my game", "body": "<p>I started off by generating a tilemap using this method:</p>\n\n<pre><code>for rw in range(tilesettings.mapheight):\n    for cl in range(tilesettings.mapwidth):\n        randomNumber = random.randint(0,15)\n        if randomNumber == 0:\n            tile = tilesettings.COAL\n        elif randomNumber == 1 or randomNumber == 2:\n            tile = tilesettings.WATER\n        elif randomNumber &gt;= 3 and randomNumber &lt;= 14:\n            tile = tilesettings.GRASS\n        else:\n            tile = tilesettings.DIRT\n        tilesettings.tilemap[rw][cl] = tile\n</code></pre>\n\n<p>The problem with this is that it merely generated a map that was just randomly chosen tiles, and didn't generate a map that resembled a realistic island shape. </p>\n\n<p>So I then decided to use Perlin noise to generate random island shapes like this:\n<a href=\"https://i.stack.imgur.com/UEo7l.png\" rel=\"nofollow noreferrer\">A randomly generated island with Perlin noise</a>           </p>\n\n<p>This is the section of code which generates the noise:</p>\n\n<pre><code>import pygame, sys\nimport noise\nimport numpy as np\nfrom scipy.misc import toimage\nfrom settings import Settings\nfrom tilemap import Tilemap\nfrom player import Player\nfrom cursor import Cursor\nfrom biome import Biome\nfrom axe import Axe\nimport game_functions as gf\nimport random\n\ndef run_game():\n    tilesettings = Tilemap()\n\n    colours = {\n        tilesettings.DIRT: tilesettings.BROWN,\n        tilesettings.GRASS: tilesettings.GREEN,\n        tilesettings.WATER: tilesettings.BLUE,\n        tilesettings.COAL: tilesettings.BLACK,\n        tilesettings.SAND : tilesettings.SAND,\n        tilesettings.STONE: tilesettings.GREY,\n        tilesettings.SNOW: tilesettings.WHITE,\n    }\n\n    resources = [tilesettings.DIRT, tilesettings.GRASS, \ntilesettings.WATER, tilesettings.COAL]\n    shape = (500, 500)\n    scale = 300\n    octaves = 6\n    persistence = 0.5\n    lacunarity = 2.0\n    seed = np.random.randint(0, 100)\n    world = np.zeros(shape)\n    for i in range(shape[0]):\n        for j in range(shape[1]):\n            world[i][j] = noise.pnoise2(i / scale,\n                                        j / scale,\n                                        octaves=octaves,\n                                        persistence=persistence,\n                                        lacunarity=lacunarity,\n                                        repeatx=1024,\n                                        repeaty=1024,\n                                        base=seed)\n\n    blue = [65, 105, 225]\n    green = [34, 139, 34]\n    beach = [238, 214, 175]\n    snow = [255, 250, 250]\n    mountain = [139, 137, 137]\n    def add_color(world):\n        color_world = np.zeros(world.shape + (3,))\n        for i in range(shape[0]):\n            for j in range(shape[1]):\n                if world[i][j] &lt; -0.05:\n                    color_world[i][j] = blue\n                elif world[i][j] &lt; 0:\n                    color_world[i][j] = beach\n                elif world[i][j] &lt; .20:\n                    color_world[i][j] = green\n                elif world[i][j] &lt; 0.35:\n                    color_world[i][j] = mountain\n                elif world[i][j] &lt; 1.0:\n                    color_world[i][j] = snow\n\n        return color_world\n\n    color_world = add_color(world)\n    a, b = shape[0] / 2, shape[1] / 2\n    n = 1024\n    r = 125\n    y, x = np.ogrid[-a:n - a, -b:n - b]\n    # creates a mask with True False values\n    # at indices\n    mask = x ** 2 + y ** 2 &lt;= r ** 2\n\n    black = [0, 0, 0]\n    island_world = np.zeros_like(color_world)\n\n    for i in range(shape[0]):\n        for j in range(shape[1]):\n            if mask[i][j]:\n                island_world[i][j] = color_world[i][j]\n            else:\n                island_world[i][j] = black\n    import math\n    center_x, center_y = shape[1] // 2, shape[0] // 2\n    circle_grad = np.zeros_like(world)\n    for y in range(world.shape[0]):\n        for x in range(world.shape[1]):\n            distx = abs(x - center_x)\n            disty = abs(y - center_y)\n            dist = math.sqrt(distx * distx + disty * disty)\n            circle_grad[y][x] = dist\n    # get it between -1 and 1\n    max_grad = np.max(circle_grad)\n    circle_grad = circle_grad / max_grad\n    circle_grad -= 0.5\n    circle_grad *= 2.0\n    circle_grad = -circle_grad\n\n    # shrink gradient\n    for y in range(world.shape[0]):\n        for x in range(world.shape[1]):\n            if circle_grad[y][x] &gt; 0:\n                circle_grad[y][x] *= 20\n\n    # get it between 0 and 1\n    max_grad = np.max(circle_grad)\n    circle_grad = circle_grad / max_grad\n\n    world_noise = np.zeros_like(world)\n\n    for i in range(shape[0]):\n        for j in range(shape[1]):\n            world_noise[i][j] = (world[i][j] * circle_grad[i][j])\n            if world_noise[i][j] &gt; 0:\n                world_noise[i][j] *= 20\n\n    # get it between 0 and 1\n    max_grad = np.max(world_noise)\n    world_noise = world_noise / max_grad\n\n    lightblue = [0, 191, 255]\n    blue = [65, 105, 225]\n    green = [34, 139, 34]\n    darkgreen = [0, 100, 0]\n    sandy = [210, 180, 140]\n    beach = [238, 214, 175]\n    snow = [255, 250, 250]\n    mountain = [139, 137, 137]\n</code></pre>\n\n<p>This is the part of the code which I tried to make it so that it set the tiles in the tilemap to the right tiles.  </p>\n\n<pre><code>    threshold = 0.005\n    def add_color2(world):\n        color_world = np.zeros(world.shape + (3,))\n        for i in range(shape[0]):\n            for j in range(shape[1]):\n                if world[i][j] &lt; threshold + 0.05:\n                    color_world[i][j] = blue\n                    tile = tilesettings.WATER\n                elif world[i][j] &lt; threshold + 0.055:\n                    color_world[i][j] = sandy\n                    tile = tilesettings.SAND\n                elif world[i][j] &lt; threshold + 0.1:\n                    color_world[i][j] = beach\n                    tile = tilesettings.SAND\n                elif world[i][j] &lt; threshold + 0.25:\n                    color_world[i][j] = green\n                    tile = tilesettings.GRASS\n                elif world[i][j] &lt; threshold + 0.6:\n                    color_world[i][j] = darkgreen\n                    tile = tilesettings.GRASS\n                elif world[i][j] &lt; threshold + 0.7:\n                    color_world[i][j] = mountain\n                    tile = tilesettings.GRASS\n                elif world[i][j] &lt; threshold + 1.0:\n                    color_world[i][j] = snow\n                    tile = tilesettings.SNOW\n                tilesettings.tilemap[i][j] = tile\n\n        return color_world\n    island_world_grad = add_color2(world_noise)\n    toimage(island_world_grad).show()\n\n    pygame.init()\n    ai_settings = Settings()\n    screen = pygame.display.set_mode((ai_settings.screen_width, \n    ai_settings.screen_height))\n    pygame.mouse.set_visible(True)\n\n    player = Player(ai_settings, screen, tilesettings)\n    cursor = Cursor(ai_settings, screen, tilesettings, player)\n\n    axe = Axe(ai_settings, screen, tilesettings, cursor)\n    while True:\n        gf.check_events(ai_settings, screen, player, cursor, axe)\n        player.update()\n        cursor.update()\n        gf.update_screen(ai_settings, screen, player)\n        for row in range (tilesettings.mapheight):\n            for column in range(tilesettings.mapwidth):\n                pygame.draw.rect(screen, \ncolours[tilesettings.tilemap[row][column]],(column* \ntilesettings.tilesize, row* tilesettings.tilesize, \ntilesettings.tilesize, tilesettings.tilesize))\n\n        biome.update(screen)\n        player.blitme()\n        axe.changeimage()\n        axe.blitme()\n        pygame.display.update()\n\nrun_game()\n</code></pre>\n\n<p>The problem I have is that when I run the code, it is extremely laggy, and just displays my character over a screen of water tiles. I did try doing a separate code to set the tiles:</p>\n\n<pre><code>color_world = np.zeros(world.shape + (3,))\nfor rw in range (shape[0]):\n    for cl in range(shape[1]):\n        if color_world == blue:\n            tile = tilesettings.WATER\n        elif color_world == sandy:\n            tile = tilesettings.SAND\n        elif color_world == beach:\n            tile = tilesettings.SAND\n        elif color_world == green:\n            tile = tilesettings.GREEN\n        elif color_world == darkgreen:\n            tile = tilesettings.GRASS\n        elif color_world == mountain:\n            tile = tilesettings.STONE\n        elif color_world == snow:\n            tile = tilesettings.SNOW\n        tilesettings.tilemap[rw][cl] = tile\n</code></pre>\n\n<p>When I did this though, I got a strange error:</p>\n\n<pre><code>if color_world == blue:\n</code></pre>\n\n<p>ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()</p>\n\n<p>I've been messing around with my code for ages and I can't see what I've done wrong - someone please help it would be greatly appreciated :) </p>\n\n<p>Just a quick update, turns out it isn't rendering just a blue screen because I saw a sand tile rendered so it must be to do with the placement of the player, but it is extremely laggy and unplayable.  </p>\n"}, {"tags": ["python", "django", "apache2", "file-permissions"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4571595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ax750.jpg?s=128&g=1", "display_name": "Herco", "link": "https://stackoverflow.com/users/4571595/herco"}, "edited": false, "score": 0, "creation_date": 1531946845, "post_id": 51410717, "comment_id": 89792924, "body": "BR no I haven&#39;t. I read it once but didn&#39;t think it was necessary since raspbian auto mounts. What would I edit in fstab to help me?"}, {"owner": {"reputation": 1369, "user_id": 10100264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0gPu.jpg?s=128&g=1", "display_name": "avermaet", "link": "https://stackoverflow.com/users/10100264/avermaet"}, "reply_to_user": {"reputation": 21, "user_id": 4571595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ax750.jpg?s=128&g=1", "display_name": "Herco", "link": "https://stackoverflow.com/users/4571595/herco"}, "edited": false, "score": 0, "creation_date": 1531947693, "post_id": 51410717, "comment_id": 89793325, "body": "For infos <code>man fstab</code>. A sample edit could be <code>&#39;UUID=3C34-8766 &#47;media&#47;pi exfat defaults,auto,umask=000,users,rw 0 0&#39;</code>. The value of UUID can be found by <code>blkid</code> and then look for your drive. At least I had to edit the fstab."}, {"owner": {"reputation": 21, "user_id": 4571595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ax750.jpg?s=128&g=1", "display_name": "Herco", "link": "https://stackoverflow.com/users/4571595/herco"}, "edited": false, "score": 0, "creation_date": 1531947856, "post_id": 51410717, "comment_id": 89793403, "body": "Okay thanks. I will try that then come back with the results. I believe you may be right becuase I also get the &quot;Operation not permitted&quot; error and when researched about it, I came across fstab. So I wi definitely try your solution."}, {"owner": {"reputation": 1369, "user_id": 10100264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0gPu.jpg?s=128&g=1", "display_name": "avermaet", "link": "https://stackoverflow.com/users/10100264/avermaet"}, "reply_to_user": {"reputation": 21, "user_id": 4571595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ax750.jpg?s=128&g=1", "display_name": "Herco", "link": "https://stackoverflow.com/users/4571595/herco"}, "edited": false, "score": 0, "creation_date": 1531948036, "post_id": 51410717, "comment_id": 89793471, "body": "This is used to mount the drive permanently in the filesystem. The auto mount is probably just udev. In general you can also check the permissions of files/dirs using  <code>ls -l</code>. but you probably know that anyway.  And to change <code>sudo chmod ...</code>.Which in this case will change permissions until the next time the pi is rebooted or the drive is detached and attached again."}], "tags": [], "owner": {"reputation": 1369, "user_id": 10100264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0gPu.jpg?s=128&g=1", "display_name": "avermaet", "link": "https://stackoverflow.com/users/10100264/avermaet"}, "is_accepted": false, "score": 0, "last_activity_date": 1531946727, "creation_date": 1531946727, "answer_id": 51410717, "question_id": 51410594, "link": "https://stackoverflow.com/questions/51410594/permission-denied-when-django-writes-to-external-device/51410717#51410717", "title": "Permission denied when django writes to external device", "body": "<p>On raspbian you have to be careful when using external drives. Have you edited the file <strong>/etc/fstab</strong>? This is necessary to mount the drive also correctly after restarts and when the file is temporarily disconnected and then connected again.\nIf you did this correctly, then the drive will have the permissions you gave it when mounting and Django should be able to access it/write to it.</p>\n\n<p>BR</p>\n"}], "owner": {"reputation": 21, "user_id": 4571595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ax750.jpg?s=128&g=1", "display_name": "Herco", "link": "https://stackoverflow.com/users/4571595/herco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531946727, "creation_date": 1531946188, "question_id": 51410594, "link": "https://stackoverflow.com/questions/51410594/permission-denied-when-django-writes-to-external-device", "title": "Permission denied when django writes to external device", "body": "<p>I have a django file server. The server works perfectly on my laptop &amp; localhost (with external hard drive) but when I transferred it to my Raspberry Pi running Raspbian, it starts acting up.</p>\n\n<p>I did a lot of googling and tried every possible solution but it does not work. \nHere is my problem:</p>\n\n<p>I have connected an external hard drive to my raspberry pi. I believe it has write permissions because I can easily write to it with mkdir. I have also set this directory which is /media/pi/SAMSUNG/media as my MEDIA_ROOT. </p>\n\n<p>Now I have set up Apache2, WSGI and Django, everything works, I have set up all the permissions and everything, but still when django tries to access the hard drive, whether it be to read or write, I get an error [Errno 13] Permission denied: '/media/pi/SAMSUNG'. </p>\n\n<p>I have fixed this in the past with chown -R 777 but it does not work this time. </p>\n\n<p>Unfortunetly, I have no idea what I am doing when it comes to servers and file permissions, so I have no idea what code to attach. Can some please help me?</p>\n\n<p>I will attach all the necessary code on request.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "arrays", "multidimensional-array", "quotes"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1531945894, "post_id": 51410509, "comment_id": 89792508, "body": "Do the commas stand for decimals or just separating thousands, etc."}, {"owner": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1531946069, "post_id": 51410509, "comment_id": 89792573, "body": "Well commas in the original file are separating two integers. Good point. I am going to edit my question."}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1531946125, "post_id": 51410509, "comment_id": 89792595, "body": "So what will be the expected output. single list containing numbers?"}, {"owner": {"reputation": 2717, "user_id": 4762738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d39d85bf475e37d7754e775193b047?s=128&d=identicon&r=PG&f=1", "display_name": "Eskapp", "link": "https://stackoverflow.com/users/4762738/eskapp"}, "edited": false, "score": 0, "creation_date": 1531946282, "post_id": 51410509, "comment_id": 89792660, "body": "For removing quotes from array, consider <code>[list(line.split(&#39; &#39;)) for line in StringIO(fArr)]</code>"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1531946309, "post_id": 51410509, "comment_id": 89792681, "body": "Is your desired output a 2d array?"}, {"owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "edited": false, "score": 0, "creation_date": 1531946311, "post_id": 51410509, "comment_id": 89792682, "body": "First, you need to iterate <code>readlines</code>, then you need to split each line by &#39;,&#39; and int() both values <code>fArr = [int(n) for n in line.split(&#39;,&#39;)]</code>"}, {"owner": {"reputation": 1370, "user_id": 2183370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c87158938b508d76a52883632c56328?s=128&d=identicon&r=PG", "display_name": "Frank M", "link": "https://stackoverflow.com/users/2183370/frank-m"}, "edited": false, "score": 0, "creation_date": 1531946495, "post_id": 51410509, "comment_id": 89792766, "body": "Since the data are in an ASCII file to begin with, why not use <code>genfromtxt</code> or <code>loadtxt</code> from the Numpy library?"}, {"owner": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "reply_to_user": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1531946495, "post_id": 51410509, "comment_id": 89792767, "body": "@mad_ edited :) thanks"}, {"owner": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1531946572, "post_id": 51410509, "comment_id": 89792802, "body": "@user3483203 as mntioned before yes, but i can reajust the rest of my code to work with normal array"}], "answers": [{"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 1, "last_activity_date": 1531946614, "last_edit_date": 1531946614, "creation_date": 1531946304, "answer_id": 51410627, "question_id": 51410509, "link": "https://stackoverflow.com/questions/51410509/removing-quotes-from-2d-array-python/51410627#51410627", "title": "Removing quotes from 2D array python", "body": "<p>This snippet will transform your array to 1D array of integers:</p>\n\n<pre><code>from itertools import chain\n\narr = [['519432,525806\\n'], ['632382,518061\\n']]\n\nnew_arr = [int(i.strip()) for i in chain.from_iterable(i[0].split(',') for i in arr)]\nprint(new_arr)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>[519432, 525806, 632382, 518061]\n</code></pre>\n\n<p>For 2D output you can use this:</p>\n\n<pre><code>arr = [['519432,525806\\n'], ['632382,518061\\n']]\n\nnew_arr = [[int(i) for i in v] for v in (i[0].split(',') for i in arr)]\nprint(new_arr)\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>[[519432, 525806], [632382, 518061]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "is_accepted": false, "score": 0, "last_activity_date": 1531947107, "last_edit_date": 1531947107, "creation_date": 1531946430, "answer_id": 51410654, "question_id": 51410509, "link": "https://stackoverflow.com/questions/51410509/removing-quotes-from-2d-array-python/51410654#51410654", "title": "Removing quotes from 2D array python", "body": "<pre><code>new_list=[]\na=['519432,525806\\n', '632382,518061\\n', '78864,613712\\n',]\nfor i in a:\n    new_list.append(list(map(int,i.split(\",\"))))\n\nprint(new_list)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[519432, 525806], [632382, 518061], [78864, 613712]]\n</code></pre>\n\n<p>In order to flatten the new_list</p>\n\n<pre><code>from functools  import reduce\nreduce(lambda x,y: x+y,new_list)\nprint(new_list)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[519432, 525806, 632382, 518061, 78864, 613712]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "edited": false, "score": 0, "creation_date": 1531947388, "post_id": 51410680, "comment_id": 89793187, "body": "omg. Didnt even know this existed. What kind of black magic is this. It says no module named numpy. Would you mind sharing the source with me?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "edited": false, "score": 0, "creation_date": 1531947408, "post_id": 51410680, "comment_id": 89793192, "body": "You&#39;re going to have to run <code>pip install numpy</code>, it&#39;s not a builtin"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": false, "score": 2, "last_activity_date": 1531946581, "creation_date": 1531946581, "answer_id": 51410680, "question_id": 51410509, "link": "https://stackoverflow.com/questions/51410509/removing-quotes-from-2d-array-python/51410680#51410680", "title": "Removing quotes from 2D array python", "body": "<p>You can avoid <em>all</em> of your problems by simply using <a href=\"http://www.numpy.org/\" rel=\"nofollow noreferrer\"><strong><code>numpy</code></strong>'s</a> convenient <strong><code>loadtxt</code></strong> function:</p>\n\n<pre><code>import numpy as np\narr = np.loadtxt('p099_base_exp.txt', delimiter=',')\narr\n\narray([[519432., 525806.],\n       [632382., 518061.],\n       [ 78864., 613712.],\n       ...,\n       [325361., 545187.],\n       [172115., 573985.],\n       [ 13846., 725685.]])\n</code></pre>\n\n<p>If you need a one-dimensional array:</p>\n\n<pre><code>arr.flatten()\n# array([519432., 525806., 632382., ..., 573985.,  13846., 725685.])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 658, "user_id": 4749660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c3e08d12e86ed9a710281326c4da04a?s=128&d=identicon&r=PG&f=1", "display_name": "Kumar", "link": "https://stackoverflow.com/users/4749660/kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1531985767, "last_edit_date": 1531985767, "creation_date": 1531947660, "answer_id": 51410910, "question_id": 51410509, "link": "https://stackoverflow.com/questions/51410509/removing-quotes-from-2d-array-python/51410910#51410910", "title": "Removing quotes from 2D array python", "body": "<p>This is your missing piece:</p>\n\n<pre><code>fArr = [[int(num) for num in line.rstrip(\"\\n\").split(\",\")] for line in fArr] \n</code></pre>\n\n<p>Here, <code>rstrip(\"\\n\")</code> will remove trailing <code>\\n</code> character from the line and then the string will be split on <code>,</code> so that each string will be become a list and all integers in that line will become elements of that list but as a string. Then, we can call <code>int()</code> function on each list element to convert them into <code>int</code> data type.</p>\n\n<p>Below code should do the job if you don't want to import an additional library.</p>\n\n<pre><code>i = 0\nrecord = 0\ncmpr = 0\nwith open(\"base_exp.txt\", \"r\") as f:\n    fArr = f.readlines()\n    fArr = [[int(num) for num in line.rstrip(\"\\n\").split(\",\")] for line in fArr] \n    print(fArr)\n    while i &lt; len(fArr): \n        cmpr = fArr[i][1] * math.log(fArr[i][0])\n        if cmpr &gt; record:\n            record = cmpr\n            print(i) \n        i = i + 1\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 0, "accepted_answer_id": 51410910, "answer_count": 4, "score": 3, "last_activity_date": 1531985767, "creation_date": 1531945803, "last_edit_date": 1531946407, "question_id": 51410509, "link": "https://stackoverflow.com/questions/51410509/removing-quotes-from-2d-array-python", "title": "Removing quotes from 2D array python", "body": "<p>I am currently trying to execute code that evaluetes powers with big exponents without calculating them, but instead logs of them. I have a <a href=\"https://projecteuler.net/project/resources/p099_base_exp.txt\" rel=\"nofollow noreferrer\">file</a> containing 1000 lines. Each line contains two itegers separated by a comma. I got stuck at point where i tried to remove quotes from array. I tried many way of which none worked. Here is my code:</p>\n\n<p>function from myLib called split() takes two argumanets of which one is a list and second is to how many elemts to split the original list. Then does so and appends smaller lists to the new one.</p>\n\n<pre><code>import math\nimport myLib\n\ni = 0\nrecord = 0\ncmpr = 0\nwith open(\"base_exp.txt\", \"r\") as f:\n    fArr  = f.readlines()\n    fArr  = myLib.split(fArr, 1)\n    #place get rid of quotes\n    print(fArr)\n    while i &lt; len(fArr):\n        cmpr = int(fArr[i][1]) * math.log(int(fArr[i][0]))\n        if cmpr  &gt; record:\n            record = cmpr\n            print(record)\n        i = i + 1\n</code></pre>\n\n<p>This is how my Array looks like:</p>\n\n<pre><code>[['519432,525806\\n'], ['632382,518061\\n'], ... ['172115,573985\\n'], ['13846,725685\\n']]\n</code></pre>\n\n<p>I tried to find a way around the 2d array and tried:</p>\n\n<pre><code>i = 0\nrecord = 0\ncmpr = 0\nwith open(\"base_exp.txt\", \"r\") as f:\n    fArr  = f.readlines()\n    #fArr  = myLib.split(fArr, 1)\n    fArr = [x.replace(\"'\", '') for x in fArr]\n    print(fArr)\n    while i &lt; len(fArr):\n        cmpr = int(fArr[i][1]) * math.log(int(fArr[i][0]))\n        if cmpr  &gt; record:\n            record = cmpr\n            print(i)\n        i = i + 1\n</code></pre>\n\n<p>But output looked like this:</p>\n\n<pre><code>['519432,525806\\n', '632382,518061\\n', '78864,613712\\n', ...\n</code></pre>\n\n<p>And the numbers in their current state cannot  be considered as integers or floats so this isnt working as well...:</p>\n\n<pre><code>[int(i) for i in lst]\n</code></pre>\n\n<p>Expected output for the array itself would look like this, so i can pick one of the numbers and work with it:</p>\n\n<pre><code>[[519432,525806], [632382,518061], [78864,613712]...\n</code></pre>\n\n<p>I would really apreciate your help since im still very new to python and programming in general.</p>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531946958, "post_id": 51410508, "comment_id": 89792978, "body": "why is rolling not the solution?"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1531947230, "post_id": 51410508, "comment_id": 89793114, "body": "check this out: <a href=\"https://stackoverflow.com/a/20276713/9754169\">stackoverflow.com/a/20276713/9754169</a>"}], "answers": [{"comments": [{"owner": {"reputation": 515, "user_id": 8167239, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f26025122c41cec69ddcdd8ef6a5ca00?s=128&d=identicon&r=PG&f=1", "display_name": "MAK", "link": "https://stackoverflow.com/users/8167239/mak"}, "edited": false, "score": 0, "creation_date": 1532064587, "post_id": 51410872, "comment_id": 89841205, "body": "Hii, I update my question , according to your request. Your solution give only partial solution to my question. Thanks"}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "reply_to_user": {"reputation": 515, "user_id": 8167239, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f26025122c41cec69ddcdd8ef6a5ca00?s=128&d=identicon&r=PG&f=1", "display_name": "MAK", "link": "https://stackoverflow.com/users/8167239/mak"}, "edited": false, "score": 0, "creation_date": 1532101440, "post_id": 51410872, "comment_id": 89862440, "body": "added edits, lemme know if I understood you correctly. Your edits to your question were good, you got the complete and minimal part of the MCVE but the V which stands for verifiable is missing. If you add what your expected output is, I can help you further."}], "tags": [], "owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "is_accepted": true, "score": 2, "last_activity_date": 1532101333, "last_edit_date": 1532101333, "creation_date": 1531947469, "answer_id": 51410872, "question_id": 51410508, "link": "https://stackoverflow.com/questions/51410508/dataframe-aggregation-according-to-selected-window/51410872#51410872", "title": "Dataframe aggregation according to selected window", "body": "<p>Given that your data is in a <code>pd.DataFrame</code> called <code>df</code>, the following should do the trick:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nstep = 5\ndf.groupby(pd.cut(df.index,\n                 np.arange(start=df.index.min(), stop=df.index.max(), step=step, \n                 dtype=float)))\\\n           .agg({'volume':['mean', 'std'], 'temperature':['mean']})\n</code></pre>\n\n<p>We are using pd.cut to create an <code>IntervalIndex</code> which we can <code>groupby</code>. Finally we use <code>pd.DataFrame.agg</code> to calculate summary statistics for each group; <code>mean</code> and <code>std</code> for the <code>volume</code> column and just <code>mean</code> for the <code>temperature</code> column.</p>\n\n<p>I haven't tested this but if you provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete and verifiable example</a>, I can do that.</p>\n\n<h3>EDIT</h3>\n\n<p>Given the updated data, I have written the code below:</p>\n\n<pre><code>In [1]: import pandas as pd\n\nIn [2]: import numpy as np\n\nIn [3]: from io import StringIO\n\nIn [4]: s = \"\"\"T,H,L,C,label\n   ...: 1000.1,23.18,27.272,426,1\n   ...: 1000.2,23.15,27.2675,429.5,1\n   ...: 1000.3,23.15,27.245,426,1\n   ...: 1000.4,23.15,27.2,426,1\n   ...: 1000.5,23.1,27.2,426,1\n   ...: 1000.6,23.1,27.2,419,1\n   ...: 1000.7,23.1,27.2,419,1\n   ...: 1000.8,23.1,27.2,419,1\n   ...: 1000.9,23.1,27.2,419,1\n   ...: 1001,23.075,27.175,419,1\n   ...: 1001.1,23.075,27.15,419,1\n   ...: 1001.2,23.1,27.1,419,1\n   ...: 1001.3,23.1,27.16666667,419,1\n   ...: 1001.4,23.05,27.15,419,1\n   ...: 1001.5,23,27.125,419,1\n   ...: 1001.6,23,27.125,418.5,1\n   ...: 1001.7,23,27.2,0,0\n   ...: 1001.8,22.945,27.29,0,0\n   ...: 1001.9,22.945,27.39,0,0\n   ...: 1002,22.89,27.39,0,0\n   ...: 1002.1,22.89,27.39,0,0\n   ...: 1002.2,22.89,27.39,0,0\n   ...: 1002.3,22.89,27.445,0,0\"\"\"\n\nIn [5]: df = pd.read_csv(StringIO(s), index_col='T')\n</code></pre>\n\n<p>Again we use an <code>IntervalIndex</code> and <code>groupby</code>, as well as agg to calculate summary statistics.</p>\n\n<pre><code>In [6]: step = 0.5\n    ...: \n    ...: grouped = df.groupby(pd.cut(df.index,\n    ...:                  np.arange(start=df.index.min(), stop=df.index.max(), step=step, dtype=float\n    ...: )))\n    ...: \n\nIn [7]: grouped.agg({'H':['mean', 'std'], 'L':['mean', 'std'], 'C':['mean', 'std']})\nOut[7]: \n                       H                    L                C          \n                    mean       std       mean       std   mean       std\n(1000.1, 1000.6]  23.130  0.027386  27.222500  0.031820  425.3  3.834058\n(1000.6, 1001.1]  23.090  0.013693  27.185000  0.022361  419.0  0.000000\n(1001.1, 1001.6]  23.050  0.050000  27.133333  0.025685  418.9  0.223607\n(1001.6, 1002.1]  22.934  0.046016  27.332000  0.085557    0.0  0.000000\n</code></pre>\n\n<p>This does not give you the column names you wanted, so let's flatten the column <code>MultiIndex</code> to adjust those.</p>\n\n<pre><code>In [8]: aggregated = grouped.agg({'H':['mean', 'std'], 'L':['mean', 'std'], 'C':['mean', 'std']})\n\nIn [9]: ['_'.join(col).strip() for col in aggregated.columns.values]\nOut[9]: ['H_mean', 'H_std', 'L_mean', 'L_std', 'C_mean', 'C_std']\n\nIn [10]: aggregated.columns = ['_'.join(col).strip() for col in aggregated.columns.values]\n\nIn [11]: aggregated\nOut[11]: \n                  H_mean     H_std     L_mean     L_std  C_mean     C_std\n(1000.1, 1000.6]  23.130  0.027386  27.222500  0.031820   425.3  3.834058\n(1000.6, 1001.1]  23.090  0.013693  27.185000  0.022361   419.0  0.000000\n(1001.1, 1001.6]  23.050  0.050000  27.133333  0.025685   418.9  0.223607\n(1001.6, 1002.1]  22.934  0.046016  27.332000  0.085557     0.0  0.000000\n</code></pre>\n\n<p>It's not quite clear to me what you mean by applying Z-scores, because that's not a summary statistic, unlike <code>std</code> and <code>mean</code>, so it doesn't play well with agg. If you just want to apply Z-scores to your entire DataFrame by column, I would suggest, you might want to take a look at this question: <a href=\"https://stackoverflow.com/questions/24761998/pandas-compute-z-score-for-all-columns\">Pandas - Compute z-score for all columns</a></p>\n"}], "owner": {"reputation": 515, "user_id": 8167239, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f26025122c41cec69ddcdd8ef6a5ca00?s=128&d=identicon&r=PG&f=1", "display_name": "MAK", "link": "https://stackoverflow.com/users/8167239/mak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 51410872, "answer_count": 1, "score": 1, "last_activity_date": 1532101333, "creation_date": 1531945800, "last_edit_date": 1532005595, "question_id": 51410508, "link": "https://stackoverflow.com/questions/51410508/dataframe-aggregation-according-to-selected-window", "title": "Dataframe aggregation according to selected window", "body": "<p>I am using python with panda data frame.\nI have a data frame which is imported from a CSV file.</p>\n\n<pre><code>         volume  temperature(c)\ntime(sec)\n1000.1  10.4   26.5\n1000.2  12.5   30.2\n1000.3  13.2   40.5\n.\n.\n.\n8000.1  78   50.8\n8000.2  79   51.5\n</code></pre>\n\n<p>I want to create a new data frame that we define a time window W (for example 5 sec) and for every W sec will aggregate the value of each column to one row with the different calculation on the specific window, for example, mean, std z-score etc.\nexample for output data frame  :</p>\n\n<pre><code>time(sec) mean_volume mean_temperature std_volume\n1000.1  12.0.  32.4 1.4\n1005.1  12.5   30.2 1.7\n1010.1  11.7   30.1 1.5\n.\n.\n.\n</code></pre>\n\n<p>I familiar with <code>df['new col'] = data['source'].rolling(W).mean()</code>, this is not the solution in my case\nI attached example </p>\n\n<pre><code>    T,H,L,C,label\n1000.1,23.18,27.272,426,1\n1000.2,23.15,27.2675,429.5,1\n1000.3,23.15,27.245,426,1\n1000.4,23.15,27.2,426,1\n1000.5,23.1,27.2,426,1\n1000.6,23.1,27.2,419,1\n1000.7,23.1,27.2,419,1\n1000.8,23.1,27.2,419,1\n1000.9,23.1,27.2,419,1\n1001,23.075,27.175,419,1\n1001.1,23.075,27.15,419,1\n1001.2,23.1,27.1,419,1\n1001.3,23.1,27.16666667,419,1\n1001.4,23.05,27.15,419,1\n1001.5,23,27.125,419,1\n1001.6,23,27.125,418.5,1\n1001.7,23,27.2,0,0\n1001.8,22.945,27.29,0,0\n1001.9,22.945,27.39,0,0\n1002,22.89,27.39,0,0\n1002.1,22.89,27.39,0,0\n1002.2,22.89,27.39,0,0\n1002.3,22.89,27.445,0,0\n</code></pre>\n\n<p>For the above example I want the new data-frame will contains the following columns: H_mean,H_std ,L_mean,C_mean,L_std,C_std</p>\n\n<p>In addition, how I can apply custom function on each segment (for example z-score).</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "elasticsearch-dsl"], "answers": [{"tags": [], "owner": {"reputation": 2662, "user_id": 7300152, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m4ZVihpCNkw/AAAAAAAAAAI/AAAAAAAAB-M/jCAup2UZtnI/photo.jpg?sz=128", "display_name": "Honza Kr&#225;l", "link": "https://stackoverflow.com/users/7300152/honza-kr%c3%a1l"}, "is_accepted": false, "score": 1, "last_activity_date": 1532021449, "creation_date": 1532021449, "answer_id": 51428721, "question_id": 51410499, "link": "https://stackoverflow.com/questions/51410499/convert-json-to-python-class-using-elasticsearch-dsl/51428721#51428721", "title": "convert json to python class using elasticsearch_dsl", "body": "<p>You need to use <code>Item(**data)</code> to construct an object from a dict.</p>\n"}], "owner": {"reputation": 776, "user_id": 1827601, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/rPUqc.jpg?s=128&g=1", "display_name": "caro", "link": "https://stackoverflow.com/users/1827601/caro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1532021449, "creation_date": 1531945782, "question_id": 51410499, "link": "https://stackoverflow.com/questions/51410499/convert-json-to-python-class-using-elasticsearch-dsl", "title": "convert json to python class using elasticsearch_dsl", "body": "<p>I feel like this should be a simple question -- I want to take a json response and map it to a class using <a href=\"https://elasticsearch-dsl.readthedocs.io/en/latest/persistence.html\" rel=\"nofollow noreferrer\">elasticsearch_dsl</a> + python:</p>\n\n<pre><code>response = requests.get(get_url() + id)\ndata = response.json()\n\nItem.init()\nitem = Item(data)\nitem.save()\n</code></pre>\n\n<p>I can't seem to find a way to mass assign all fields without having to do something like </p>\n\n<pre><code>item.condition_id = data['condition_id']\n</code></pre>\n\n<p>There has to be a way to convert the json object to the class... right?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "iteration"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1531945798, "post_id": 51410486, "comment_id": 89792465, "body": "Can you post your desired output? I&#39;m sure there is a better way to do this"}], "answers": [{"tags": [], "owner": {"reputation": 7907, "user_id": 9609447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9FDax.jpg?s=128&g=1", "display_name": "harvpan", "link": "https://stackoverflow.com/users/9609447/harvpan"}, "is_accepted": true, "score": 1, "last_activity_date": 1531947221, "last_edit_date": 1531947221, "creation_date": 1531946491, "answer_id": 51410668, "question_id": 51410486, "link": "https://stackoverflow.com/questions/51410486/how-to-condense-these-nested-for-loops-into-list-comprehension-in-python-with-da/51410668#51410668", "title": "How to condense these nested for loops into list comprehension in python with dataframes?", "body": "<p>You need to check if every entry in <code>df1['c1']</code> with <code>max(df2['d1'])</code> to check <code>\"\"if every entry i of column c1 in df1 is less than every entry in column d1 of df2,\"</code> that would ensure comparison condition. Accordingly set <code>c3</code> to <code>1</code>. Consider below code. </p>\n\n<pre><code>df1.loc[df1['c1'] &gt; max(df2['d1']), 'c3'] = 1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   c1   c3\n0   1   0\n1   3   0\n2   10  1\n</code></pre>\n\n<p>Note: the output matches with OP's <code>df1</code> after the for loop logic.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 7014895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f282d4dba9e3edbf6b46a9a3a55e0343?s=128&d=identicon&r=PG&f=1", "display_name": "shingdingz", "link": "https://stackoverflow.com/users/7014895/shingdingz"}, "edited": false, "score": 1, "creation_date": 1532005771, "post_id": 51410776, "comment_id": 89817918, "body": "In this example, yes that is correct that the check would depend on the last (or largest) value in df1, however I am working with unknown data sets until run-time so can&#39;t assume that the largest value will always be in index -1. Thanks for the solution though."}], "tags": [], "owner": {"reputation": 350, "user_id": 9512698, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-thQb4oyaj3k/AAAAAAAAAAI/AAAAAAAAAq0/n6q05XVBFYM/photo.jpg?sz=128", "display_name": "Vikas NS", "link": "https://stackoverflow.com/users/9512698/vikas-ns"}, "is_accepted": false, "score": 1, "last_activity_date": 1531946952, "creation_date": 1531946952, "answer_id": 51410776, "question_id": 51410486, "link": "https://stackoverflow.com/questions/51410486/how-to-condense-these-nested-for-loops-into-list-comprehension-in-python-with-da/51410776#51410776", "title": "How to condense these nested for loops into list comprehension in python with dataframes?", "body": "<p>I found the inner loop to be redundant as the modification finally depends on the last value of d1 of df2.\nCorrect me if I'm wrong.</p>\n\n<p>With his assumption, I have written this.</p>\n\n<pre><code>df1.c3=[0  if df1.loc[i, \"c1\"] &lt; df2.loc[df2.index[-1], \"d1\"] else 1 for i in df1.index]   \nprint(df1)\nprint(df2)\n\n\n\n   c1  c3\n0   1   0\n1   3   0\n2  10   1\n   d1\n0   3\n1   7\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 7014895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f282d4dba9e3edbf6b46a9a3a55e0343?s=128&d=identicon&r=PG&f=1", "display_name": "shingdingz", "link": "https://stackoverflow.com/users/7014895/shingdingz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 51410668, "answer_count": 2, "score": 1, "last_activity_date": 1531947221, "creation_date": 1531945727, "question_id": 51410486, "link": "https://stackoverflow.com/questions/51410486/how-to-condense-these-nested-for-loops-into-list-comprehension-in-python-with-da", "title": "How to condense these nested for loops into list comprehension in python with dataframes?", "body": "<p>I'm trying to take one row at a time from dataframe 1, and check it against all rows of dataframe 2, and according to conditions update another column in dataframe 1.</p>\n\n<p>I've got this working with nested for loops but how can this  be condensed with list comprehension?</p>\n\n<p>Here's a simplified example of what works using nested for loops. It's doing \"if every entry i of column c1 in df1 is less than <strong>every</strong> entry in column d1 of df2, then update column c3 of df1:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf1 = pd.DataFrame([{'c1': 1, 'c3': \"0\"}, {'c1': 3, 'c3': \"0\"}, {'c1': 10, 'c3': \"0\"}])\n\ndf2 = pd.DataFrame([{'d1': 3}, {'d1': 7}])\n\nprint(df1)\nprint(df2)\n\nfor i in df1.index:\n    for j in df2.index:\n        if df1.loc[i, \"c1\"] &lt; df2.loc[j, \"d1\"]:\n            df1.loc[i, \"c3\"] = 0\n        else:\n            df1.loc[i, \"c3\"] = 1\n\nprint(df1)\nprint(df2)\n</code></pre>\n\n<p>I've done similar updates using a solution of type </p>\n\n<pre><code>df1.loc[*some condition which specifies the applicable rows of df1* eg df1[\"c1\"] &gt; df2[\"d1\"], c3] = 1\n</code></pre>\n\n<p>but that will only work when the rows of df1 and df2 are 1:1, and wouldn't compare each row of df1 to all the rows of df2 anyway. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 986, "user_id": 2271478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6d2741f690d245b2786ac0f6e8dde8?s=128&d=identicon&r=PG", "display_name": "xyzjayne", "link": "https://stackoverflow.com/users/2271478/xyzjayne"}, "edited": false, "score": 2, "creation_date": 1531946758, "post_id": 51410478, "comment_id": 89792873, "body": "Nope, it&#39;s not triggered by the NaNs. It&#39;s the comparison <code>x[&#39;price&#39;] &gt; prevrow[&#39;price&#39;]</code> that returns a series of True/False values rather than a single value."}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 1, "creation_date": 1531949088, "post_id": 51410478, "comment_id": 89793882, "body": "<code>(x[&#39;price&#39;] &gt; prevrow[&#39;price&#39;]).all()</code> should work fine instead"}], "answers": [{"tags": [], "owner": {"reputation": 418, "user_id": 5739004, "user_type": "registered", "profile_image": "https://graph.facebook.com/838592919583287/picture?type=large", "display_name": "Lorran Sutter", "link": "https://stackoverflow.com/users/5739004/lorran-sutter"}, "is_accepted": true, "score": 1, "last_activity_date": 1531959508, "creation_date": 1531959508, "answer_id": 51412632, "question_id": 51410478, "link": "https://stackoverflow.com/questions/51410478/pandas-shifting-in-function-ambiguous-truth-value/51412632#51412632", "title": "Pandas: Shifting in function: &#39;ambiguous truth value&#39;", "body": "<p>Let's consider a bigger dataframe for better visualization:</p>\n\n<pre><code>DATE        |  price\n01-01-2018     100\n02-01-2018     101\n03-01-2018     97\n04-01-2018     102\n05-01-2018     100\n06-01-2018     107\n07-01-2018     38\n</code></pre>\n\n<p>You have some problems in your code. You are trying to make a bool operations with arrays instead of a single value. A solution:</p>\n\n<pre><code>def case1(x):\n    # New df with a new column for shift prices\n    df = x.assign(price_prevrow= x.shift(3)['price'])\n\n    if np.isnan(df['price_prevrow']).all(): # Check ALL values\n        pass\n    else:\n        # Slice df to get only rows with price greater than price_prevrow\n        df = df.loc[df['price'] &gt; df['price_prevrow']]\n\n        # Calculate difference\n        diff = df['price_prevrow'] - df['price']\n\n        # Print all differences\n        for d in diff:\n            print('The diff is {}'.format(d))\n</code></pre>\n\n<p>The code above create a new dataframe with the shifted prices, than slice this dataframe with rows what have price value greater than the prevrow value. After this get the difference is easy.</p>\n\n<p>Output:</p>\n\n<pre><code>\"The diff is -2.0\"\n\"The diff is -10.0\"\n</code></pre>\n"}], "owner": {"reputation": 1557, "user_id": 7339599, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a0e2a16febf3fd5f95126fa9deaa8c0d?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/7339599/jasper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 51412632, "answer_count": 1, "score": 0, "last_activity_date": 1531959508, "creation_date": 1531945698, "last_edit_date": 1531946909, "question_id": 51410478, "link": "https://stackoverflow.com/questions/51410478/pandas-shifting-in-function-ambiguous-truth-value", "title": "Pandas: Shifting in function: &#39;ambiguous truth value&#39;", "body": "<p>I have a data frame that consist of a dateIndex and a price column, like so:</p>\n\n<pre><code>DATE   |     PRICE\n01-01-2018    100\n02-01-2018    101\n03-01-2018    97\n</code></pre>\n\n<p>I've written a function to calculate the difference between the price in a row, and the price 3 rows ('days') before. (I know there are other pandas methods to achieve this, but this function is a stub that I want to expand on later)</p>\n\n<pre><code>def case1(x):\n\n  prevrow = x.shift(3)\n  if np.isnan(prevrow['price']):\n      pass\n  else:\n      if x['price'] &gt; prevrow['price']:\n          diff = prevrow['price'] - x['price']             \n          print('The diff is {}').format(diff)\n</code></pre>\n\n<p>However, when I try to run (<code>case1(df)</code>) this function I encounter the </p>\n\n<pre><code>ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n\n<p>Error. It seems to be triggered on the 3 <code>NaN</code> values that are generated by the shift in the beginning of the function. But adding a the check against <code>NaN</code> values still results in the same error message. </p>\n\n<p>Does anyone know what I am doing wrong?</p>\n"}, {"tags": ["python", "python-3.x", "list-comprehension"], "comments": [{"owner": {"reputation": 2549, "user_id": 5173575, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9c174d7b25087038547d430cf13412f?s=128&d=identicon&r=PG&f=1", "display_name": "PdevG", "link": "https://stackoverflow.com/users/5173575/pdevg"}, "edited": false, "score": 4, "creation_date": 1531945689, "post_id": 51410446, "comment_id": 89792416, "body": "downvoted since there was no attempt at an answer. Being a rookie is ok, but before asking for help at least read the guidelines and try yourself."}, {"owner": {"reputation": 1, "user_id": 10050945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jwmP-xkjvAA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oTbQWyIIB0UcYUz1qaZdK-dcEKSg/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/10050945/alex"}, "reply_to_user": {"reputation": 2549, "user_id": 5173575, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9c174d7b25087038547d430cf13412f?s=128&d=identicon&r=PG&f=1", "display_name": "PdevG", "link": "https://stackoverflow.com/users/5173575/pdevg"}, "edited": false, "score": 0, "creation_date": 1531945809, "post_id": 51410446, "comment_id": 89792470, "body": "@Skirrebattie sorry, I attempted it but didn&#39;t attach. Ill make sure to include it next time! Thanks!"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1531945811, "post_id": 51410446, "comment_id": 89792471, "body": "Loop through <code>for k, v in dictionary.items():</code>.  Build a new dictionary mapping <code>v[:3]</code> to a list of all the keys that have values that begin with those characters."}], "answers": [{"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 0, "last_activity_date": 1531945757, "creation_date": 1531945757, "answer_id": 51410494, "question_id": 51410446, "link": "https://stackoverflow.com/questions/51410446/store-key-that-has-duplicate-value-into-a-dictionary/51410494#51410494", "title": "Store key that has duplicate value into a dictionary", "body": "<p>My attempt:</p>\n\n<pre><code>dictionary = {'apple': 'ams2.dfgsdfgsdfg', 'orange': 'bru1.asdfartq', 'grape': 'cph.dfsdfgsdgsdf', 'banana': 'ams4.ewrtwerth'}\n\nduplicate_keys = set()\nfor k1, v1 in dictionary.items():\n    for k2, v2 in dictionary.items():\n        if k1 == k2:\n            continue\n        if v1[:3] == v2[:3]:\n            duplicate_keys.add(k1)\n            duplicate_keys.add(k2)\nprint(list(duplicate_keys))\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>['apple', 'banana']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 192011, "user_id": 17160, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/81cb50f5fe868629a680c16a56781f01?s=128&d=identicon&r=PG", "display_name": "nosklo", "link": "https://stackoverflow.com/users/17160/nosklo"}, "is_accepted": true, "score": 0, "last_activity_date": 1531945942, "creation_date": 1531945942, "answer_id": 51410543, "question_id": 51410446, "link": "https://stackoverflow.com/questions/51410446/store-key-that-has-duplicate-value-into-a-dictionary/51410543#51410543", "title": "Store key that has duplicate value into a dictionary", "body": "<p>This solution avoids looping through every element of the dictionary for each element, because that doesn't perform well:</p>\n\n<p>The first step is to sort the data using the <strong>key</strong> you want - in your example the key is the first 3 chars of the value.</p>\n\n<pre><code>def key_first3(element):\n    return element[1][:3]\ndata = sorted(dictionary.items(), key=key_first3)\n</code></pre>\n\n<p>Now, you can group the data using this key, and count the number of elements in the group. If a group has more than one element, add its keys to the result:</p>\n\n<pre><code>result = []\n\nfor key, group in itertools.groupby(data, key=key_first3):\n    group = list(group)\n    if len(group) &gt; 1:\n         result.append(tuple(k for k, v in group))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11001, "user_id": 3316882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbfd45c99a28cab8fe0c8ddcb19aea3?s=128&d=identicon&r=PG&f=1", "display_name": "Sunitha", "link": "https://stackoverflow.com/users/3316882/sunitha"}, "is_accepted": false, "score": 0, "last_activity_date": 1531946855, "creation_date": 1531946855, "answer_id": 51410756, "question_id": 51410446, "link": "https://stackoverflow.com/questions/51410446/store-key-that-has-duplicate-value-into-a-dictionary/51410756#51410756", "title": "Store key that has duplicate value into a dictionary", "body": "<pre><code>&gt;&gt;&gt; from itertools import groupby\n&gt;&gt;&gt; d = {'apple': 'ams2.dfgsdfgsdfg', 'orange': 'bru1.asdfartq', 'grape': 'cph.dfsdfgsdgsdf', 'banana': 'ams4.ewrtwerth'}\n&gt;&gt;&gt; f = key=lambda x: x[1][:3]\n&gt;&gt;&gt; grouped_d = {k:list(dict(v).keys()) for k,v in groupby(sorted(d.items(), key=f), f)}\n&gt;&gt;&gt; grouped_d\n{'ams': ['apple', 'banana'], 'bru': ['orange'], 'cph': ['grape']}\n&gt;&gt;&gt; [v for k,v in grouped_d.items() if len(v)&gt;1]\n[['apple', 'banana']]\n&gt;&gt;&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3826, "user_id": 374601, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uL80U.jpg?s=128&g=1", "display_name": "Erty Seidohl", "link": "https://stackoverflow.com/users/374601/erty-seidohl"}, "edited": false, "score": 0, "creation_date": 1531950367, "post_id": 51410870, "comment_id": 89794413, "body": "While this answer is probably correct and useful, it is preferred if you include some explanation along with it to explain how it helps to solve the problem. This becomes especially useful in the future, if there is a change (possibly unrelated) that causes it to stop working and users need to understand how it once worked."}], "tags": [], "owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "is_accepted": false, "score": 0, "last_activity_date": 1531951483, "last_edit_date": 1531951483, "creation_date": 1531947461, "answer_id": 51410870, "question_id": 51410446, "link": "https://stackoverflow.com/questions/51410446/store-key-that-has-duplicate-value-into-a-dictionary/51410870#51410870", "title": "Store key that has duplicate value into a dictionary", "body": "<p>You can use regular expressions to capture the 3 letters in the beginning of the items that are similar. Then use list comprehension to find the keys for the items with the similar 3 words. Decided to use <code>zip</code>. Just realized dictionary no longer has the attribute <code>iteritems()</code>. Cant tell why</p>\n\n<pre><code>import re\n\n a = \"\".join(re.findall(r\"(\\b\\w{3}).*?\\1\",\" \".join(dictionary.values())))    \n     [m for m,x in zip(dictionary,dictionary.values()) if a in x]\n\n ['apple', 'banana']\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10050945, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jwmP-xkjvAA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oTbQWyIIB0UcYUz1qaZdK-dcEKSg/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/10050945/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 51410543, "answer_count": 4, "score": -3, "last_activity_date": 1531951483, "creation_date": 1531945528, "question_id": 51410446, "link": "https://stackoverflow.com/questions/51410446/store-key-that-has-duplicate-value-into-a-dictionary", "title": "Store key that has duplicate value into a dictionary", "body": "<p>I have a dictionary and want to store the name of the keys that have the same first three letters for its value. For example: </p>\n\n<pre><code>dictionary = {'apple': 'ams2.dfgsdfgsdfg', 'orange': 'bru1.asdfartq', 'grape': 'cph.dfsdfgsdgsdf', 'banana': 'ams4.ewrtwerth' \n</code></pre>\n\n<p>Since I want the output to print the list of keys with duplicate values(look at first 3 letters), the final output would print a list like this:</p>\n\n<pre><code>list = ['apple', 'banana']\n</code></pre>\n\n<p>If anyone could help this <strong>rookie</strong> by creating the code, much would be appreciated!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5842662, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101599262082889/picture?type=large", "display_name": "johng", "link": "https://stackoverflow.com/users/5842662/johng"}, "edited": false, "score": 0, "creation_date": 1531946937, "post_id": 51410641, "comment_id": 89792969, "body": "Ugh, you are right, thanks! I assume I should just delete this post since my problem was basically a typo"}], "tags": [], "owner": {"reputation": 81, "user_id": 5351271, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bIrlzTNYBDU/AAAAAAAAAAI/AAAAAAAAAwU/WsEBXLHja2g/photo.jpg?sz=128", "display_name": "Victor Lira", "link": "https://stackoverflow.com/users/5351271/victor-lira"}, "is_accepted": true, "score": 1, "last_activity_date": 1531946364, "creation_date": 1531946364, "answer_id": 51410641, "question_id": 51410439, "link": "https://stackoverflow.com/questions/51410439/pandas-dataframe-division-returning-inf-when-dividing-by-non-zero/51410641#51410641", "title": "Pandas dataframe division returning &#39;inf&#39; when dividing by non-zero", "body": "<p>In your first line</p>\n\n<pre><code>claims_report['% COST DIFFERENCE'] = 100*claims_report['COST DIFFERENCE']/claims_data['ORIGINAL UNIT COST']\n</code></pre>\n\n<p>Didn't you mean \"claims_report\" instead of \"claims_data\"? Maybe you're just selecting the wrong dataframe?</p>\n"}, {"tags": [], "owner": {"reputation": 241, "user_id": 10102370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a59161662d91d0eae038bbe76aa7249?s=128&d=identicon&r=PG&f=1", "display_name": "Arnav", "link": "https://stackoverflow.com/users/10102370/arnav"}, "is_accepted": false, "score": 0, "last_activity_date": 1531958963, "creation_date": 1531958963, "answer_id": 51412566, "question_id": 51410439, "link": "https://stackoverflow.com/questions/51410439/pandas-dataframe-division-returning-inf-when-dividing-by-non-zero/51412566#51412566", "title": "Pandas dataframe division returning &#39;inf&#39; when dividing by non-zero", "body": "<p>Another solution in the future may be to do:</p>\n\n<pre><code>import pandas as pd\npd.set_option('use_inf_as_na', True)\n</code></pre>\n\n<p>which sets any values in your pandas dataframe from 'inf' to 'nan'. Then you can use the <code>fillna</code> method like this:</p>\n\n<pre><code>df = df.fillna(value=0, inplace=True)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5842662, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101599262082889/picture?type=large", "display_name": "johng", "link": "https://stackoverflow.com/users/5842662/johng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1334, "favorite_count": 0, "accepted_answer_id": 51410641, "answer_count": 2, "score": 0, "last_activity_date": 1552443362, "creation_date": 1531945506, "last_edit_date": 1552443362, "question_id": 51410439, "link": "https://stackoverflow.com/questions/51410439/pandas-dataframe-division-returning-inf-when-dividing-by-non-zero", "title": "Pandas dataframe division returning &#39;inf&#39; when dividing by non-zero", "body": "<p>When I tried to create a new column in my pandas dataframe by dividing an existing column by another existing column, I am getting 'inf' in rows where there is no division by zero.</p>\n\n<pre><code>claims_report['% COST DIFFERENCE'] = 100*claims_report['COST DIFFERENCE']/claims_data['ORIGINAL UNIT COST']\nprint(claims_report[['ORIGINAL UNIT COST','COST DIFFERENCE','% COST DIFFERENCE']].head(9))\n</code></pre>\n\n<p>The result of the above code is:</p>\n\n<pre><code>   ORIGINAL UNIT COST  COST DIFFERENCE  % COST DIFFERENCE\n0              4.3732          11.2500         257.248697\n1              3.7935          22.0000         579.939370\n2              6.9167          22.0000         318.070756\n3              1.1429           4.5000         393.735235\n4              0.0000           7.3269                inf\n5              7.3269          -0.8622         -11.767596\n6              6.4647           0.7853          12.147509\n7              0.2590           0.0170           6.563707\n8             14.4471         -12.7145               -inf\n</code></pre>\n\n<p>By my calculations, there should not be a -inf in row 8. As a check I ran the following code:</p>\n\n<pre><code>for i in range(9):\nprint(i, claims_report['COST DIFFERENCE'][i], claims_report['ORIGINAL UNIT COST'][i], claims_report['COST DIFFERENCE'][i]/claims_report['ORIGINAL UNIT COST'][i])\n</code></pre>\n\n<p>Which gives me the expected result in row 8:</p>\n\n<pre><code>0 11.25 4.3732 2.5724869660660388 \n1 22.0 3.7935 5.799393699749571 \n2 22.0 6.9167 3.180707562855119 \n3 4.5 1.1429 3.937352349286902 \n4 7.3269 0.0 inf \n5 -0.8622 7.3269 -0.11767596118412971 \n6 0.7853 6.4647 0.1214750877844293 \n7 0.017 0.259 0.06563706563706564 \n8 -12.7145 14.4471 -0.880072817382035\n</code></pre>\n\n<p>Anyone familiar with this type of issue?</p>\n"}, {"tags": ["python", "django", "wagtail"], "comments": [{"owner": {"reputation": 1558, "user_id": 5589714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kurCN.png?s=128&g=1", "display_name": "w411 3", "link": "https://stackoverflow.com/users/5589714/w411-3"}, "edited": false, "score": 0, "creation_date": 1554191183, "post_id": 51410398, "comment_id": 97649947, "body": "did you try orderable with blocks ?"}, {"owner": {"reputation": 219, "user_id": 8589106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6c6087fb35dda7ac99b3e56e6af197?s=128&d=identicon&r=PG&f=1", "display_name": "LazerFriends", "link": "https://stackoverflow.com/users/8589106/lazerfriends"}, "reply_to_user": {"reputation": 1558, "user_id": 5589714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kurCN.png?s=128&g=1", "display_name": "w411 3", "link": "https://stackoverflow.com/users/5589714/w411-3"}, "edited": false, "score": 0, "creation_date": 1554224987, "post_id": 51410398, "comment_id": 97670334, "body": "@waLLe Can you add a Streamfield to a Snippet?"}, {"owner": {"reputation": 1558, "user_id": 5589714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kurCN.png?s=128&g=1", "display_name": "w411 3", "link": "https://stackoverflow.com/users/5589714/w411-3"}, "edited": false, "score": 0, "creation_date": 1554275155, "post_id": 51410398, "comment_id": 97685850, "body": "I have to check, didn&#39;t try"}], "owner": {"reputation": 219, "user_id": 8589106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6c6087fb35dda7ac99b3e56e6af197?s=128&d=identicon&r=PG&f=1", "display_name": "LazerFriends", "link": "https://stackoverflow.com/users/8589106/lazerfriends"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1531945281, "creation_date": 1531945281, "question_id": 51410398, "link": "https://stackoverflow.com/questions/51410398/wagtail-adding-an-orderable-class-to-an-orderable-class", "title": "Wagtail: Adding an Orderable class to an Orderable class", "body": "<p>I have a snippet that uses an Orderable class. I would like to add another Orderable class to the first Orderable. For example:</p>\n\n<pre><code>models.py:\n\n@register_snippet\nclass LocationHours(ClusterableModel):\n    location = models.CharField(\n        max_length=255,\n        blank=True,\n        help_text='Location for this set of Hours.'\n    )\n\n    panels = [\n        MultiFieldPanel([\n            FieldPanel('location'),\n            InlinePanel('location_hours'),\n        ], \"Hours\"),\n    ]\n\nclass Hours(Orderable):\n    snippet = ParentalKey('LocationHours', related_name='location_hours', on_delete=models.CASCADE)\n\n    ...\n\n    panels = [\n        ...\n        InlinePanel('hours_override', label=\"Hours Overrides\"),\n    ]\n\nclass HoursOverride(Orderable):\n        orderable = ParentalKey('Hours', related_name='hours_override', on_delete=models.CASCADE)\n</code></pre>\n\n<p>How would I go about doing this?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pivot-table"], "answers": [{"tags": [], "owner": {"reputation": 4290, "user_id": 1167333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d891a93985bae7576f011cbf434197d0?s=128&d=identicon&r=PG", "display_name": "Auberon Vacher", "link": "https://stackoverflow.com/users/1167333/auberon-vacher"}, "is_accepted": false, "score": 0, "last_activity_date": 1531980170, "creation_date": 1531980170, "answer_id": 51415388, "question_id": 51410391, "link": "https://stackoverflow.com/questions/51410391/how-to-sort-a-multiindex-pandas-dataframe-pivot-table-by-the-totals-of-an-agg-s/51415388#51415388", "title": "How to sort a multiindex pandas dataframe pivot table by the totals of an agg=&#39;sum&#39; at each level of the index", "body": "<p>What you could do is create additional columns and then do a multicolumn sort.\nFor the additional column, <code>transform</code> will return a Series with the index aligned to the df so you can then add it as a new column:</p>\n\n<pre><code>from pandas import DataFrame\nmydf = DataFrame({\"name1\":\\\n[\"bob\",\"bob\",\"dave\",\"dave\",\"dave\",\"dave\",\"dave\"],\"name2\":\\\n[\"mario\",\"john\",\"tom\",\"tom\",\"tom\",\"jill\",\"jill\"],\"name3\":\\\n[\"luigi\",\"dan\",\"jim\",\"joe\",\"jack\",\"frank\",\"kevin\"],\"total\":[5,16,2,6,3,6,7]})\nmydf[\"tot1\"]=mydf[\"total\"].groupby(mydf[\"name1\"]).transform(sum)\nmydf[\"tot2\"]=mydf[\"total\"].groupby(mydf[\"name2\"]).transform(sum)\nmydf[\"tot3\"]=mydf[\"total\"].groupby(mydf[\"name3\"]).transform(sum)\nmydf.sort_values(by=[\"tot1\",\"tot2\",\"tot3\"],ascending=[False,False,False])\n</code></pre>\n\n<p>Which yields:</p>\n\n<pre><code>   name1  name2  name3  total  tot1  tot2  tot3\n6  dave   jill  kevin      7    24    13     7\n5  dave   jill  frank      6    24    13     6\n3  dave    tom    joe      6    24    11     6\n4  dave    tom   jack      3    24    11     3\n2  dave    tom    jim      2    24    11     2\n1   bob   john    dan     16    21    16    16\n0   bob  mario  luigi      5    21     5     5\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 1676600, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/7adb55bab731846e05294d041227c753?s=128&d=identicon&r=PG", "display_name": "Michael Groleau", "link": "https://stackoverflow.com/users/1676600/michael-groleau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1531980170, "creation_date": 1531945259, "question_id": 51410391, "link": "https://stackoverflow.com/questions/51410391/how-to-sort-a-multiindex-pandas-dataframe-pivot-table-by-the-totals-of-an-agg-s", "title": "How to sort a multiindex pandas dataframe pivot table by the totals of an agg=&#39;sum&#39; at each level of the index", "body": "<p>Example generated with something like</p>\n\n<p><code>df = pd.pivot_table(df, index=['name1','name2','name3'], values='total', aggfunc='sum')</code></p>\n\n<p>No logical sort initially</p>\n\n<pre><code>name1  name2  name3  total\nBob    Mario  Luigi  5\n       John   Dan    16\nDave   Tom    Jim    2\n              Joe    6\n              Jack   3\n       Jill   Frank  6  \n              Kevin  7\n</code></pre>\n\n<p>Should become</p>\n\n<pre><code>name1  name2  name3  total\nDave   Jill   Kevin  7\n              Frank  6  \n       Tom    Joe    6\n              Jack   3\n              Jim    2\nBob    John   Dan    16 \n       Mario  Luigi  5\n</code></pre>\n\n<p>Where Dave is on top because his \"total of totals\" : 24 is higher than Bob's 21. It propogates to each subsequent index as well so Jill's 13 > Tom's 11, etc. Been messing around with groupby(), sort_values(), sort_index() and determined I don't really know what I'm doing.   </p>\n"}, {"tags": ["python", "enums"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 4, "creation_date": 1531945372, "post_id": 51410366, "comment_id": 89792256, "body": "It looks like you&#39;re asking for <a href=\"https://docs.python.org/3/library/enum.html\" rel=\"nofollow noreferrer\"><code>enum</code></a>. But that requires Python 3.4+. There is no equivalent in the 2.7 stdlib. You can install the backport off PyPI, or any of a zillion or so third-party enum libraries with variations on the features, but you say you want to do it with the stdlib only. Which basically means you need to grab the code for one of those libraries, stick it in your project, and (if necessary) edit it until it works embedded like that instead of installed."}, {"owner": {"reputation": 5658, "user_id": 6378557, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GVoNt.png?s=128&g=1", "display_name": "xenoid", "link": "https://stackoverflow.com/users/6378557/xenoid"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531946304, "post_id": 51410366, "comment_id": 89792680, "body": "Looked at at enums (there is a backport standard in 2.7), but they only associate the integers and the constant names, and the labels are left out."}, {"owner": {"reputation": 3231, "user_id": 8069403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WFeKp.png?s=128&g=1", "display_name": "xdze2", "link": "https://stackoverflow.com/users/8069403/xdze2"}, "edited": false, "score": 0, "creation_date": 1531947914, "post_id": 51410366, "comment_id": 89793421, "body": "I am wondering, very naively, why not using two different data structures, as there are two different kind of data? I am thinking about a dictionary which link the &quot;constant name&quot; to a readable label and a list of &quot;constant name&quot; which provides the option order"}, {"owner": {"reputation": 5658, "user_id": 6378557, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GVoNt.png?s=128&g=1", "display_name": "xenoid", "link": "https://stackoverflow.com/users/6378557/xenoid"}, "edited": false, "score": 0, "creation_date": 1531951327, "post_id": 51410366, "comment_id": 89794785, "body": "Parallel data structures are a capital sin in my book :) Currently looking at a list of <code>(value,label)</code> tuples in a class with a few methods for access but it looks a bit clumsy."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531964327, "post_id": 51410366, "comment_id": 89797856, "body": "You can add anything you want to the enumeration constants. For example, <code>Color.RED.label = &#39;color whose paradigm is around 700nm&#39;</code>. You can even store the labels in <code>__doc__</code> so they show up in <code>help</code>, although you have to do that manually. (I&#39;m pretty sure some of the third-party enum libraries let you use docstring syntax, but not the stdlib one.)"}], "answers": [{"tags": [], "owner": {"reputation": 5658, "user_id": 6378557, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GVoNt.png?s=128&g=1", "display_name": "xenoid", "link": "https://stackoverflow.com/users/6378557/xenoid"}, "is_accepted": true, "score": 1, "last_activity_date": 1532774403, "last_edit_date": 1532774403, "creation_date": 1532032237, "answer_id": 51431234, "question_id": 51410366, "link": "https://stackoverflow.com/questions/51410366/python-associating-labels-constant-names-and-integers-without-hardcoding-valu/51431234#51431234", "title": "Python: associating labels, constant names, and integers without hardcoding values", "body": "<p>Solution using a namedtuple:</p>\n\n<ul>\n<li><p>First define a small function</p>\n\n<pre><code>from collections import namedtuple\n\ndef createOpts(name,pairs):\n    # namedtuple('FooType',['OPTION1',...,'OPTIONn','labels']\n    optsclass=namedtuple(name+'Type',[symbol for symbol,label in pairs]+['labels'])\n    # FooType(0,..,n-1,['Option 1',...,'Option N']) \n    opts=optsclass(*(range(len(pairs))+[[label for symbol,label in pairs]]))\n    return opts\n</code></pre></li>\n<li><p>The list if options is defined like this</p>\n\n<pre><code>Options=createOpts('Opt',[('OPTION1','Option one'),('OPTION2','Options two'),('OPTION3','Option three'),])\n</code></pre></li>\n<li><p>Then in the code it is used like this. </p>\n\n<pre><code>print type(Options)\nprint 'Option labels:',Options.labels\nprint 'Option one:',Options.OPTION1\nprint 'Option two compares to 1:',1==Options.OPTION2\nprint 'Option 2 in set:', 1 in [Options.OPTION2,Options.OPTION3]\nprint 'Option 1 not in set:', 0 not in [Options.OPTION2,Options.OPTION3]\n\n&lt;class '__main__.OptType'&gt;\nOption labels: ['Option one', 'Options two', 'Option three']\nOption one: 0\nOption two compares to 1: True\nOption 2 in set: True\nOption 1 not in set: True\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 5658, "user_id": 6378557, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GVoNt.png?s=128&g=1", "display_name": "xenoid", "link": "https://stackoverflow.com/users/6378557/xenoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 51431234, "answer_count": 1, "score": 1, "last_activity_date": 1532774403, "creation_date": 1531945162, "question_id": 51410366, "link": "https://stackoverflow.com/questions/51410366/python-associating-labels-constant-names-and-integers-without-hardcoding-valu", "title": "Python: associating labels, constant names, and integers without hardcoding values", "body": "<p>I'm looking for a way to associate:</p>\n\n<ul>\n<li>A human-readable label: <code>\"Option one\"</code> or even <code>u'Premi\u00e8re option'</code></li>\n<li>A \"constant name\": <code>OPTION_ONE</code></li>\n<li>A integer value (from 0 up)</li>\n</ul>\n\n<p>Given that:</p>\n\n<ul>\n<li>The code passes the list of labels to some API, that displays it to the user</li>\n<li>The API returns an integer value, which is the index of the user's choice in the sequence above</li>\n<li>I want to later compare this integer value to one of the constant names (or something quickly derived from them)</li>\n<li>I want to be able to easily insert/remove/reorder labels in the sequence</li>\n<li>I don't want to hardcode any integer value (except <code>0</code> as a the base index, if necessary).</li>\n</ul>\n\n<p>Of course this is to make the code look clean, so a reasonable terseness is required. This should run in Python 2.7 using the standard libraries.</p>\n"}, {"tags": ["python", "file", "attributes"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531945658, "post_id": 51410284, "comment_id": 89792399, "body": "The Windows API cal for this is <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/fileapi/nf-fileapi-getfileattributesa\" rel=\"nofollow noreferrer\"><code>GetFileAttributes</code></a>, which you can call via pywin32 or (only slightly more complicated) the stdlib&#39;s <code>ctypes</code>. Either way, you get back a 32-bit integer, which you have to <code>^</code> with <a href=\"https://docs.microsoft.com/en-us/windows/desktop/FileIO/file-attribute-constants\" rel=\"nofollow noreferrer\">a bunch of constants</a> to get the individual flags. And if you want to convert those flags to a string, you need to do that manually."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531945735, "post_id": 51410284, "comment_id": 89792428, "body": "Meanwhile, <i>some</i> of those attributes will be available (under different names) in the result if you call <a href=\"https://docs.python.org/3/library/os.html#os.stat_result\" rel=\"nofollow noreferrer\"><code>os.stat</code></a>. If you can explain which flags you need, or what you&#39;re trying to do, this may be a much easier way than calling <code>GetFileAttributes</code>."}, {"owner": {"reputation": 13, "user_id": 9938778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/731d34572d34c05a93f6e15323e741ac?s=128&d=identicon&r=PG&f=1", "display_name": "r3ngE", "link": "https://stackoverflow.com/users/9938778/r3nge"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531950884, "post_id": 51410284, "comment_id": 89794634, "body": "Hey guys, thank you for your answers. Sadly <code>os.stats</code> doesnt give me the information about the <code>Attribute</code> attribute as seen in the picture above. @abarnert Ok so for a zip file I will get a <code>32</code> returned by <code>GetFileAttributes</code>. But I dont understand how I should get the attribute &quot;Attribute&quot; out of it. How should this integer give me that information? Thanks"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1531963848, "post_id": 51410284, "comment_id": 89797771, "body": "You take that 32 and check <code>32 &amp; FILE_ATTRIBUTE_ARCHIVE</code>, which gives you 32, so the Archive bit is set. Then you check <code>32 &amp; FILE_ATTRIBUTE_DIRECTORY </code>, which gives you 0, so the Directory bit is not set. And <code>32 &amp; FILE_ATTRIBUTE_HIDDEN</code> gives you 0, so the Hidden bit is not set. And so on through all of the bits\u2014the only one that&#39;s set here is <code>FILE_ATTRIBUTE_ARCHIVE</code>."}], "owner": {"reputation": 13, "user_id": 9938778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/731d34572d34c05a93f6e15323e741ac?s=128&d=identicon&r=PG&f=1", "display_name": "r3ngE", "link": "https://stackoverflow.com/users/9938778/r3nge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1531945189, "creation_date": 1531944797, "last_edit_date": 1531945189, "question_id": 51410284, "link": "https://stackoverflow.com/questions/51410284/reading-a-specific-custom-file-attribute", "title": "Reading a specific custom file attribute", "body": "<p>I am using OneDrive which is adding an attribute called \"Attribute\" to files being added to my OneDrive folder. I want to read this attribute called \"Attribute\" but I dont know how. The <code>os</code> module is not providing this kind of functionality.</p>\n\n<p>Does anyone know a way to read this attributes status? Here is a picture showing the details tab of the file I want to read the attribute from:</p>\n\n<p><img src=\"https://i.stack.imgur.com/yIZEv.jpg\" alt=\"Picture showing attribute\"></p>\n"}, {"tags": ["python", "plotly", "networkx", "directed-graph"], "comments": [{"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1531946260, "post_id": 51410283, "comment_id": 89792652, "body": "Can you provide a sample code that works and one that doesn&#39;t?"}, {"owner": {"reputation": 135, "user_id": 10078480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8dc3afac48baeb84a2005dee9e562cd?s=128&d=identicon&r=PG&f=1", "display_name": "aspire", "link": "https://stackoverflow.com/users/10078480/aspire"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1531947813, "post_id": 51410283, "comment_id": 89793380, "body": "@darthbith I&#39;ve just added the sample code. What I hope to achieve is basically scale the <code>dict()</code> definition so that I can iterate through all edges in the network and create an arrow for each."}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1531949424, "post_id": 51410283, "comment_id": 89794035, "body": "I&#39;m not all that familiar with plotly, so can you clarify what you need to do? How would you connect a large(r) number of nodes together?"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1531949559, "post_id": 51410283, "comment_id": 89794085, "body": "Can you define a list of tuples of x, y pairs? Then it would be trivial to iterate through that and generate a list of dicts that could be assigned to the annotations argument"}, {"owner": {"reputation": 135, "user_id": 10078480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8dc3afac48baeb84a2005dee9e562cd?s=128&d=identicon&r=PG&f=1", "display_name": "aspire", "link": "https://stackoverflow.com/users/10078480/aspire"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1531961505, "post_id": 51410283, "comment_id": 89797286, "body": "@darthbith I added two more points to help illustrate the problem: in the actual program, I build the network node by node through NetworkX, but at time of visualization, I basically have the x and y lists as shown in the example (with a start point and an end point for the edge). Could you elaborate on the iteration using this example, so that I don&#39;t need to create two separate annotations but directly with an iteration through the node coordinates? (an example that connects any two pairs of dots would greatly help, no need to replicate the same two arrows that I drew)"}, {"owner": {"reputation": 135, "user_id": 10078480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8dc3afac48baeb84a2005dee9e562cd?s=128&d=identicon&r=PG&f=1", "display_name": "aspire", "link": "https://stackoverflow.com/users/10078480/aspire"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1532029494, "post_id": 51410283, "comment_id": 89832238, "body": "Answering my own question: as @darthbith suggested, <code>dict(ax=x0[i], ay=x0[i], x=x1[i], y=y1[i]) for i in range(len(x0))</code> works."}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1532030105, "post_id": 51410283, "comment_id": 89832505, "body": "Great! You should write up an answer in the box below :-)"}, {"owner": {"reputation": 135, "user_id": 10078480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8dc3afac48baeb84a2005dee9e562cd?s=128&d=identicon&r=PG&f=1", "display_name": "aspire", "link": "https://stackoverflow.com/users/10078480/aspire"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1532030756, "post_id": 51410283, "comment_id": 89832758, "body": "I&#39;ve added a more complete sample as the answer, thank you @darthbith!"}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 10078480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8dc3afac48baeb84a2005dee9e562cd?s=128&d=identicon&r=PG&f=1", "display_name": "aspire", "link": "https://stackoverflow.com/users/10078480/aspire"}, "is_accepted": false, "score": 5, "last_activity_date": 1574265498, "last_edit_date": 1574265498, "creation_date": 1532030696, "answer_id": 51430912, "question_id": 51410283, "link": "https://stackoverflow.com/questions/51410283/how-to-efficiently-create-interactive-directed-network-graphs-with-arrows-on-p/51430912#51430912", "title": "How to efficiently create interactive directed network graphs (with arrows) on Python?", "body": "<p>Below is a sample of using loop to create arrows in a Plotly graph, which is easily applicable for NetworkX visualization of directed graphs.</p>\n\n<pre><code>import plotly.offline as py \nimport plotly.graph_objs as go \n\ntrace = go.Scatter( \n    x=[1, 2, 2, 1], \n    y=[3, 4, 3, 4], \n    mode='markers',\n    marker=dict(size=[100, 100, 100, 100])\n)\n\n# Edges\nx0 = [1, 2]\ny0 = [3, 3]\nx1 = [2, 1]\ny1 = [4, 4]\n\nfig = go.Figure(\n    data=[trace],\n    layout=go.Layout(\n        annotations = [\n            dict(ax=x0[i], ay=y0[i], axref='x', ayref='y',\n                x=x1[i], y=y1[i], xref='x', yref='y',\n                showarrow=True, arrowhead=1,) for i in range(0, len(x0))\n        ]\n    )\n) \npy.plot(fig)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 13550275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f84774c0b8d109fab2ffd79d47a8435?s=128&d=identicon&r=PG&f=1", "display_name": "Red Ransil", "link": "https://stackoverflow.com/users/13550275/red-ransil"}, "is_accepted": true, "score": 2, "last_activity_date": 1589560543, "creation_date": 1589560543, "answer_id": 61824187, "question_id": 51410283, "link": "https://stackoverflow.com/questions/51410283/how-to-efficiently-create-interactive-directed-network-graphs-with-arrows-on-p/61824187#61824187", "title": "How to efficiently create interactive directed network graphs (with arrows) on Python?", "body": "<p>Yeah I agree the annotations solution isn't that efficient. Does this work for what you are trying to do: <a href=\"https://github.com/redransil/plotly-dirgraph\" rel=\"nofollow noreferrer\">https://github.com/redransil/plotly-dirgraph</a></p>\n\n<pre><code>import plotly.graph_objects as go\nimport networkx as nx\nimport dash\nimport dash_core_components as dcc\nimport dash_html_components as html\nfrom addEdge import addEdge\n\n# Controls for how the graph is drawn\nnodeColor = 'Blue'\nnodeSize = 20\nlineWidth = 2\nlineColor = '#000000'\n\n# Make a random graph using networkx\nG = nx.random_geometric_graph(5, .5)\npos = nx.layout.spring_layout(G)\nfor node in G.nodes:\n    G.nodes[node]['pos'] = list(pos[node])\n\n# Make list of nodes for plotly\nnode_x = []\nnode_y = []\nfor node in G.nodes():\n    x, y = G.nodes[node]['pos']\n    node_x.append(x)\n    node_y.append(y)\n\n# Make a list of edges for plotly, including line segments that result in arrowheads\nedge_x = []\nedge_y = []\nfor edge in G.edges():\n    # addEdge(start, end, edge_x, edge_y, lengthFrac=1, arrowPos = None, arrowLength=0.025, arrowAngle = 30, dotSize=20)\n    start = G.nodes[edge[0]]['pos']\n    end = G.nodes[edge[1]]['pos']\n    edge_x, edge_y = addEdge(start, end, edge_x, edge_y, .8, 'end', .04, 30, nodeSize)\n\n\nedge_trace = go.Scatter(x=edge_x, y=edge_y, line=dict(width=lineWidth, color=lineColor), hoverinfo='none', mode='lines')\n\n\nnode_trace = go.Scatter(x=node_x, y=node_y, mode='markers', hoverinfo='text', marker=dict(showscale=False, color = nodeColor, size=nodeSize))\n\nfig = go.Figure(data=[edge_trace, node_trace],\n             layout=go.Layout(\n                showlegend=False,\n                hovermode='closest',\n                margin=dict(b=20,l=5,r=5,t=40),\n                xaxis=dict(showgrid=False, zeroline=False, showticklabels=False),\n                yaxis=dict(showgrid=False, zeroline=False, showticklabels=False))\n                )\n\n# Note: if you don't use fixed ratio axes, the arrows won't be symmetrical\nfig.update_layout(yaxis = dict(scaleanchor = \"x\", scaleratio = 1), plot_bgcolor='rgb(255,255,255)')\n\napp = dash.Dash()\napp.layout = html.Div([dcc.Graph(figure=fig)])\n\napp.run_server(debug=True, use_reloader=False)\n</code></pre>\n\n<p>Example:\n<a href=\"https://i.stack.imgur.com/52oWi.png\" rel=\"nofollow noreferrer\">directed graph output</a></p>\n"}, {"tags": [], "owner": {"reputation": 698, "user_id": 13730780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI8Gj.png?s=128&g=1", "display_name": "erdogant", "link": "https://stackoverflow.com/users/13730780/erdogant"}, "is_accepted": false, "score": 0, "last_activity_date": 1592850204, "creation_date": 1592850204, "answer_id": 62521045, "question_id": 51410283, "link": "https://stackoverflow.com/questions/51410283/how-to-efficiently-create-interactive-directed-network-graphs-with-arrows-on-p/62521045#62521045", "title": "How to efficiently create interactive directed network graphs (with arrows) on Python?", "body": "<p>The library <code>d3graph</code> may be use. You can specify directed edges. It is a force-directed d3-graph. More information is posted here: <a href=\"https://stackoverflow.com/questions/8840255/django-and-interactive-graph-network-visualization/62520707#62520707\">Django and interactive graph/network visualization</a></p>\n"}], "owner": {"reputation": 135, "user_id": 10078480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8dc3afac48baeb84a2005dee9e562cd?s=128&d=identicon&r=PG&f=1", "display_name": "aspire", "link": "https://stackoverflow.com/users/10078480/aspire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5105, "favorite_count": 4, "accepted_answer_id": 61824187, "answer_count": 3, "score": 3, "last_activity_date": 1592850204, "creation_date": 1531944796, "last_edit_date": 1531960907, "question_id": 51410283, "link": "https://stackoverflow.com/questions/51410283/how-to-efficiently-create-interactive-directed-network-graphs-with-arrows-on-p", "title": "How to efficiently create interactive directed network graphs (with arrows) on Python?", "body": "<p>In order to construct a directed network graph, Plotly's current approach seems to be using annotations. This works when there are few edges and one can manually populate each one through the figure layout, e.g., <a href=\"https://community.plot.ly/t/arrows-between-markers-joined-at-the-edges/4432\" rel=\"nofollow noreferrer\">this example</a>.</p>\n\n<p>But if I'm creating a much more complicated graph, is there a good way to iteratively define the arrow coordinates for all the edges (I can only think of constructing a string and then use <code>eval()</code>, although I know it's bad practice)? (edit: it seems this approach of concatenating iteratively generated <code>dict()</code> definition strings doesn't work -- worked only for one <code>dict()</code> definition)</p>\n\n<p>Edit: adding a code snippet to better illustrate the scenario (with the <code>eval()</code> line commented out for comparison):</p>\n\n<pre><code>import plotly.offline as py \nimport plotly.graph_objs as go \n\ntrace = go.Scatter( \n    x=[1, 2, 2, 1], \n    y=[3, 4, 3, 4], \n    mode='markers',\n    marker=dict(size=[100, 100, 100, 100])\n)\n\nfig = go.Figure(\n    data=[trace],\n    layout=go.Layout(\n        annotations = [\n            dict(\n                ax=1, ay=3, axref='x', ayref='y',\n                x=2, y=4, xref='x', yref='y'\n            ),\n            # eval(\"dict(ax=2, ay=3, axref='x', ayref='y', x=1, y=4, xref='x', yref='y')\")\n        ]\n    )\n) \npy.plot(fig)\n</code></pre>\n\n<p>I'm open to try other visualization packages as well, if there is a good way in doing this under Bokeh or others.</p>\n"}, {"tags": ["python", "python-2.7", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9159565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dqptv.png?s=128&g=1", "display_name": "Anirban Majumder", "link": "https://stackoverflow.com/users/9159565/anirban-majumder"}, "edited": false, "score": 0, "creation_date": 1532005615, "post_id": 51410433, "comment_id": 89817798, "body": "It&#39;s not working - &#39;DataFrame&#39; object has no attribute &#39;Count&#39; - also we need to store the results in seperate columns"}, {"owner": {"reputation": 9, "user_id": 9159565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dqptv.png?s=128&g=1", "display_name": "Anirban Majumder", "link": "https://stackoverflow.com/users/9159565/anirban-majumder"}, "edited": false, "score": 0, "creation_date": 1533230034, "post_id": 51410433, "comment_id": 90281552, "body": "any idea about the solution?"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": false, "score": 0, "last_activity_date": 1531945467, "creation_date": 1531945467, "answer_id": 51410433, "question_id": 51410279, "link": "https://stackoverflow.com/questions/51410279/how-to-calculate-count-and-percentage-of-total-for-each-category-using-pandas/51410433#51410433", "title": "How to calculate count and percentage of total for each category using pandas", "body": "<p>Using math and <strong><code>apply</code></strong> with string formatting:</p>\n\n<pre><code>df.Count.div(df.Count.sum()).apply('{0:.2%}'.format)\n\n0     6.67%\n1    13.33%\n2    20.00%\n3    26.67%\n4    33.33%\nName: Count, dtype: object\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9159565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dqptv.png?s=128&g=1", "display_name": "Anirban Majumder", "link": "https://stackoverflow.com/users/9159565/anirban-majumder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1531945759, "creation_date": 1531944761, "last_edit_date": 1531945759, "question_id": 51410279, "link": "https://stackoverflow.com/questions/51410279/how-to-calculate-count-and-percentage-of-total-for-each-category-using-pandas", "title": "How to calculate count and percentage of total for each category using pandas", "body": "<p>I have a data set with a column called ratings from 1 to 5. The result should be as follows:</p>\n\n<pre><code>Rating  Count  Count %\n1         10    6.66%\n2         20    13.33%\n3         30    20.00%\n4         40    26.66%\n5         50    33.33%\n</code></pre>\n\n<p>Total Ratings: 150</p>\n\n<p>(1) All percentages should be approximated in 2 decimal places\n(2) The result should be in a data frame with column names - Rating, Count &amp; Count%</p>\n\n<p>How to get this result using pandas?</p>\n"}]