[{"tags": ["python", "image", "raspberry-pi", "display"], "answers": [{"tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 1, "last_activity_date": 1503558630, "last_edit_date": 1503558630, "creation_date": 1503556949, "answer_id": 45854622, "question_id": 45850925, "link": "https://stackoverflow.com/questions/45850925/seeking-a-simple-way-to-display-an-image-on-an-rpi-and-continue-python-execution/45854622#45854622", "title": "Seeking a simple way to display an image on an RPi and continue python execution", "body": "<p>You don't show <em>how</em> you tried with <strong>feh</strong> and a subprocess, but maybe try starting it in the background so it doesn't block your main thread:</p>\n\n<pre><code>subprocess.call(\"feh -F yourImage.jpg &amp;\", shell=True)\n</code></pre>\n\n<p>Note that background processes, i.e. those started with <code>&amp;</code>, are using a feature of the shell, so I have set <code>shell=True</code>.</p>\n\n<p>Then, before you display the next image, kill the previous instance:</p>\n\n<pre><code>subprocess.call(\"pkill feh\")\n</code></pre>\n\n<hr>\n\n<p>Alternatively, if you know the names of all the images you plan to display in advance, you could start <strong>feh</strong> in <em>\"Slideshow mode\"</em> (by passing in all the image names on startup), and then deliver signal <code>SIGUSR1</code> each time you want to advance the image:</p>\n\n<pre><code>os.kill(os.getpid(...), signal.SIGUSR1)\n</code></pre>\n\n<hr>\n\n<p>If the above doesn't work, please click <code>edit</code> under your original question and add in the output from the following commands so we can go down the framebuffer route:</p>\n\n<pre><code>fbset -fb /dev/fb0\n\ntvservice -d edid\nedidparser edid\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5835307, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cpTe0bktyEo/AAAAAAAAAAI/AAAAAAAAABk/51XPVfrXWzU/photo.jpg?sz=128", "display_name": "Eli Bridge", "link": "https://stackoverflow.com/users/5835307/eli-bridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503558630, "creation_date": 1503532625, "question_id": 45850925, "link": "https://stackoverflow.com/questions/45850925/seeking-a-simple-way-to-display-an-image-on-an-rpi-and-continue-python-execution", "title": "Seeking a simple way to display an image on an RPi and continue python execution", "body": "<p>I'm transferring an application to an RPi, and I need a way to display full screen images using python (3) while code continues to execute. I would like to avoid delving into complicated GUI modules like Tkinter and Pygame. I just want images to fill the screen and stay there until the code replaces them or tells them to go away. If Tkinter or Pygame can do this, that would be fine, but it looks to me like they both enter loops that eventually require keyboard input. My application involves montiring sensors and external inputs, but there will be no keyboard attached.  I've tried the following:</p>\n\n<p>feh activated with subprocess.call (This displays the image, but the code stops executing until the image is cleared by a keystroke. </p>\n\n<p>wand.display (this works but only shows a smallish window, not full screen)</p>\n\n<p>fbi (couldn't get it to display an image)</p>\n\n<p>xcd-open (works but opens in \"Image Viewer\" app  in small window - no option for full screen without a mouse click)</p>\n\n<p>I have not tried OpenCV. Seems like that might work, but that's a lot of infrastructure to bring in for this simple application. </p>\n\n<p>For the record I've been to google and have put many hours into this. This request is a last resort. </p>\n\n<p>If you want some pseudocode:</p>\n\n<pre><code>displayImage(\"/image_folder/image1.jpg\" fullscreen = True)\ntime.sleep(1)\nclearImage()\ndisplayImage(\"/image_folder/image2.jpg\" fullscreen = True)\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "list-comprehension", "dictionary-comprehension"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1503532789, "post_id": 45850910, "comment_id": 78660083, "body": "<code>my_list</code> is a <code>tuple</code>, not a list..."}, {"owner": {"reputation": 980, "user_id": 6483228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55i3R.jpg?s=128&g=1", "display_name": "T4rk1n", "link": "https://stackoverflow.com/users/6483228/t4rk1n"}, "edited": false, "score": 0, "creation_date": 1503533092, "post_id": 45850910, "comment_id": 78660148, "body": "You trying to get floats but get int in python 2 ? if that is the case you need a float in your division. try something like <code>[&#39;A&#39;, (6+4)&#47;2.0 ,(7+8)&#47;2.0]</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8508347"}, "edited": false, "score": 0, "creation_date": 1503533154, "post_id": 45850975, "comment_id": 78660160, "body": "Yes I edited it now so I&#39;ve changed the bracket discrepancies; I&#39;ll try yours out and let you know."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8508347"}, "edited": false, "score": 0, "creation_date": 1503533342, "post_id": 45850975, "comment_id": 78660208, "body": "<code>File &quot;&lt;ipython-input-16-9a30058da39f&gt;&quot;, line 5     for k, *tail in my_list:            ^ SyntaxError: invalid syntax</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1503533429, "post_id": 45850975, "comment_id": 78660236, "body": "@Abhishek added a Python 2 compatible version."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8508347"}, "edited": false, "score": 0, "creation_date": 1503533759, "post_id": 45850975, "comment_id": 78660294, "body": "Now it says <code>No module named statistics</code>. I better update Python.. I think that module has been what people say &#39;depricated&#39;"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1503533949, "post_id": 45850975, "comment_id": 78660351, "body": "@Abhishek No, <code>statistics</code> is brand, spanking new. It is Python 2 that is <i>deprecated</i>. If you have to be on Python 2 for some good reason (i.e. your boss is making you, you have Python 2 code base to maintain, etc) then fine, otherwise, you should use Python 3."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8508347"}, "edited": false, "score": 0, "creation_date": 1503534858, "post_id": 45850975, "comment_id": 78660561, "body": "I hope you see great success in life. Don&#39;t know what I would do without you. I&#39;m a student trying to implement K-means clustering for the first time"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 3, "last_activity_date": 1503534032, "last_edit_date": 1503534032, "creation_date": 1503533030, "answer_id": 45850975, "question_id": 45850910, "link": "https://stackoverflow.com/questions/45850910/average-of-elements-in-a-list-of-list-grouped-by-first-item-in-the-list/45850975#45850975", "title": "Average of elements in a list of list grouped by first item in the list", "body": "<p>Assuming you meant to use the following list:</p>\n\n<pre><code>In [4]: my_list = [['A', 6, 7], ['A', 4, 8], ['B', 9, 3], ['C', 1, 1], ['B', 10, 7]]\n</code></pre>\n\n<p>The simply use a <code>defaultdict</code> to group by the first element, then find the <code>mean</code>:</p>\n\n<pre><code>In [6]: from collections import defaultdict\n\nIn [7]: grouper = defaultdict(list)\n\nIn [8]: for k, *tail in my_list:\n    ...:     grouper[k].append(tail)\n    ...:\n\nIn [9]: grouper\nOut[9]:\ndefaultdict(list,\n            {'A': [[6, 7], [4, 8]], 'B': [[9, 3], [10, 7]], 'C': [[1, 1]]})\n\nIn [10]: import statistics\n\nIn [11]: {k: list(map(statistics.mean, zip(*v))) for k,v in grouper.items()}\nOut[11]: {'A': [5, 7.5], 'B': [9.5, 5], 'C': [1, 1]}\n</code></pre>\n\n<p>Note, if you are on Python 2, no need to call <code>list</code> after <code>map</code>. Also, you should use <code>iteritems</code> instead of <code>items</code>.</p>\n\n<p>Also, you will have to do something like:</p>\n\n<pre><code>for sub in my_list:\n    grouper[sub[0]].append(sub[1:])\n</code></pre>\n\n<p>Instead of the cleaner version on Python 3.</p>\n\n<p>Finally, there is no <code>statistics</code> module in Python 2. So just do:</p>\n\n<pre><code>def mean(seq):\n    return float(sum(seq))/len(seq)\n</code></pre>\n\n<p>and use that <code>mean</code> instead of <code>statistics.mean</code></p>\n"}, {"tags": [], "owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "is_accepted": false, "score": 0, "last_activity_date": 1503553189, "last_edit_date": 1503553189, "creation_date": 1503551447, "answer_id": 45853370, "question_id": 45850910, "link": "https://stackoverflow.com/questions/45850910/average-of-elements-in-a-list-of-list-grouped-by-first-item-in-the-list/45853370#45853370", "title": "Average of elements in a list of list grouped by first item in the list", "body": "<p>Similarly using <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\"><code>itertools.groupby</code></a></p>\n\n<pre><code>import operator as op \nimport itertools as it\nimport statistics as stats\n\n\niterables = [['A', 6, 7], ['A', 4, 8], ['B', 9, 3], ['C', 1, 1], ['B', 10, 7]]\ngroups = it.groupby(sorted(iterables), op.itemgetter(0))\n{k: list(map(stats.mean, zip(*[i[1:] for i in g]))) for k, g in groups}\n# {'A': [5, 7.5], 'B': [9.5, 5], 'C': [1, 1]}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8508347"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 45850975, "answer_count": 2, "score": 3, "last_activity_date": 1503553189, "creation_date": 1503532532, "last_edit_date": 1503533051, "question_id": 45850910, "link": "https://stackoverflow.com/questions/45850910/average-of-elements-in-a-list-of-list-grouped-by-first-item-in-the-list", "title": "Average of elements in a list of list grouped by first item in the list", "body": "<p>My list looks like <code>my_list = [['A', 6, 7], ['A', 4, 8], ['B', 9, 3], ['C', 1, 1]], ['B', 10, 7]]</code></p>\n\n<p>I want to find the averages of the other two columns in each of the inner lists grouped by the first column in each of the inner list.</p>\n\n<p><code>[['A', 5, 7.5], ['B', 9.5, 5], ['C', 1, 1]]</code></p>\n\n<p><code>['A', 5, 7.5]</code> comes from <code>['A', (6+4)/2 ,(7+8)/2]</code></p>\n\n<p>I don't mind if I end up getting a dictionary or something, but I would prefer it remain a list.</p>\n\n<p>I've tried the following:</p>\n\n<hr>\n\n<ol>\n<li><code>my_list1 = [i[0] for i in my_list]\nmy_list2 = [i[1:] for i in my_list]\nnew_dict = {k: v for k, v in zip(my_list1, my_list2)}</code> </li>\n</ol>\n\n<p>SPLITTING THE ORIGINAL LIST SO the first column becomes KEY, and the second and third columns becomes VALUE, and converting it to a dictionary will give you the aggregate but the problem is </p>\n\n<p><strong>I WANT TO TO PRESERVE THE DECIMAL PLACES, IT ROUNDS UP AND GIVES ME WHOLE NUMBERS INSTEAD OF FLOAT VALUES</strong></p>\n\n<p><code>my_list1 = ['A', 'A', 'B', 'C', 'B']</code></p>\n\n<p><code>my_list2 = [[6, 7], [4, 8], [9, 3], [1, 1], [10, 7]]</code></p>\n\n<p><code>new_dict= {'A': [5, 8], 'B': [10, 5], 'C': [1, 1]}</code></p>\n\n<p>when what I would ideally want is,  <code>[['A', 5, 7.5], ['B', 9.5, 5], ['C', 1, 1]]</code> (Don't mind if its a dictionary)</p>\n\n<hr>\n\n<ol start=\"2\">\n<li><p>Converted the second and third columns to float maybe using a for loop thinking, then it will give me a float when I convert it to a dictionary.. But no difference, IT ROUNDS UP and gives a A WHOLE NUMBER.</p>\n\n<pre><code>for i in range(0, len(my_list)):\n  for j in range(1, len(my_list[i])):\n    my_list[i][j].astype(float)\n\ndict = {}\n\nfor l2 in my_list:\n  dict[l2[0]] = l2[1:]\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>The reason I need to preserve the decimal places is because the second and third columns refer to x and y coordinates..</p>\n\n<p>So all in all the objective is to <strong>find the averages of the other two columns in each of the inner lists grouped by the first column in each of the inner list with as many decimal places as possible</strong></p>\n"}, {"tags": ["python", "numpy", "matrix", "matrix-multiplication", "tensor"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1503540375, "post_id": 45850897, "comment_id": 78661796, "body": "It was recently pointed out in another SO, that <code>np.outer</code> flattens its inputs, while <code>np.multiply.outer</code> does not."}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1503541005, "creation_date": 1503541005, "answer_id": 45851916, "question_id": 45850897, "link": "https://stackoverflow.com/questions/45850897/generalisation-of-vector-outer-product-apply-it-to-every-column-of-a-matrix/45851916#45851916", "title": "Generalisation of vector outer product: apply it to every column of a matrix", "body": "<p>So your <code>outer</code> loop produces:</p>\n\n<pre><code>In [1147]: A = np.arange(12).reshape(3,4)\nIn [1148]: [np.outer(A[:,i],A[:,i]) for i in range(4)]\nOut[1148]: \n[array([[ 0,  0,  0],\n        [ 0, 16, 32],\n        [ 0, 32, 64]]), array([[ 1,  5,  9],\n        [ 5, 25, 45],\n        [ 9, 45, 81]]), array([[  4,  12,  20],\n        [ 12,  36,  60],\n        [ 20,  60, 100]]), array([[  9,  21,  33],\n        [ 21,  49,  77],\n        [ 33,  77, 121]])]\n</code></pre>\n\n<p><code>stacking</code> that on the a new 1st dimension produces:</p>\n\n<pre><code>In [1149]: np.stack(_)\nOut[1149]: \narray([[[  0,   0,   0],\n        [  0,  16,  32],\n        [  0,  32,  64]],\n    ....\n        [ 21,  49,  77],\n        [ 33,  77, 121]]])\nIn [1150]: _.shape\nOut[1150]: (4, 3, 3)    # wrong order - can be transposed.\n</code></pre>\n\n<p><code>stack</code> lets us specify a different axis:</p>\n\n<pre><code>In [1153]: np.stack([np.outer(A[:,i],A[:,i]) for i in range(4)],2)\nOut[1153]: \narray([[[  0,   1,   4,   9],\n        [  0,   5,  12,  21],\n        [  0,   9,  20,  33]],\n\n       [[  0,   5,  12,  21],\n        [ 16,  25,  36,  49],\n        [ 32,  45,  60,  77]],\n\n       [[  0,   9,  20,  33],\n        [ 32,  45,  60,  77],\n        [ 64,  81, 100, 121]]])\n</code></pre>\n\n<p><code>np.einsum</code> does this nicely as well:</p>\n\n<pre><code>In [1151]: np.einsum('mi,ni-&gt;mni',A,A)\nOut[1151]: \narray([[[  0,   1,   4,   9],\n        [  0,   5,  12,  21],\n        [  0,   9,  20,  33]],\n\n       [[  0,   5,  12,  21],\n        [ 16,  25,  36,  49],\n        [ 32,  45,  60,  77]],\n\n       [[  0,   9,  20,  33],\n        [ 32,  45,  60,  77],\n        [ 64,  81, 100, 121]]])\nIn [1152]: _.shape\nOut[1152]: (3, 3, 4)\n</code></pre>\n\n<p>broadcasted multiply is also nice</p>\n\n<pre><code>In [1156]: A[:,None,:]*A[None,:,:]\nOut[1156]: \narray([[[  0,   1,   4,   9],\n        [  0,   5,  12,  21],\n      ...\n        [ 32,  45,  60,  77],\n        [ 64,  81, 100, 121]]])\n</code></pre>\n"}], "owner": {"reputation": 677, "user_id": 4300271, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/nZNJG.jpg?s=128&g=1", "display_name": "Louis Kuang", "link": "https://stackoverflow.com/users/4300271/louis-kuang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503541005, "creation_date": 1503532398, "last_edit_date": 1503539057, "question_id": 45850897, "link": "https://stackoverflow.com/questions/45850897/generalisation-of-vector-outer-product-apply-it-to-every-column-of-a-matrix", "title": "Generalisation of vector outer product: apply it to every column of a matrix", "body": "<p>I have a matrix <code>A = [x1, x2, ..., xm]</code> where each <code>xi</code> is a column vector of size <code>[n, 1]</code>. So A has shape <code>[n, m]</code>. I am trying to find the covariance matrix of each column vector so that if the result is another matrix <code>C</code>, <code>C</code> has shape <code>[n, n, m]</code> and <code>C[:,:,i] = np.outer(xi, xi)</code>.</p>\n\n<p>Can someone tell my how to do the above in numpy or point me to a tensor operation that I should check out?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 922, "user_id": 2152623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7852ad15ff5af01778c90e800a0e0c7e?s=128&d=identicon&r=PG", "display_name": "cashman04", "link": "https://stackoverflow.com/users/2152623/cashman04"}, "edited": false, "score": 0, "creation_date": 1503532810, "post_id": 45850848, "comment_id": 78660088, "body": "I was trying to figure this out off of that question, but the filtered answer was giving me some weird object type that I couldn&#39;t figure out how to get my data out of.  Specifically: <code>TypeError: &#39;filter&#39; object is not subscriptable</code>"}], "answers": [{"comments": [{"owner": {"reputation": 922, "user_id": 2152623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7852ad15ff5af01778c90e800a0e0c7e?s=128&d=identicon&r=PG", "display_name": "cashman04", "link": "https://stackoverflow.com/users/2152623/cashman04"}, "edited": false, "score": 0, "creation_date": 1503532902, "post_id": 45850864, "comment_id": 78660107, "body": "Exactly what I needed.  Simple and to the point! Thanks much."}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 8, "last_activity_date": 1503532097, "creation_date": 1503532097, "answer_id": 45850864, "question_id": 45850848, "link": "https://stackoverflow.com/questions/45850848/python-get-json-array-item-by-matching-value/45850864#45850864", "title": "Python get json array item by matching value", "body": "<p>You can use a generator expression, calling <code>next</code> on it to supply the first matching item if any:</p>\n\n<pre><code>match = next(d for d in data if d['last_name'] == 'Doe')\n</code></pre>\n"}], "owner": {"reputation": 922, "user_id": 2152623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7852ad15ff5af01778c90e800a0e0c7e?s=128&d=identicon&r=PG", "display_name": "cashman04", "link": "https://stackoverflow.com/users/2152623/cashman04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5462, "favorite_count": 0, "closed_date": 1503532537, "accepted_answer_id": 45850864, "answer_count": 1, "score": 2, "last_activity_date": 1503532097, "creation_date": 1503531943, "question_id": 45850848, "link": "https://stackoverflow.com/questions/45850848/python-get-json-array-item-by-matching-value", "closed_reason": "Duplicate", "title": "Python get json array item by matching value", "body": "<p>So I have an array of json data that looks like this:</p>\n\n<pre><code>[{\n  \"first_name\": \"Joe\",\n  \"last_name\": \"Smith\",\n  \"numbers\": [1,2,3,4,5]\n}, {\n  \"first_name\": \"Jane\",\n  \"last_name\": \"Doe\",\n  \"numbers\": [6,4,1,35,2]\n}, {\n  \"first_name\": \"Mike\",\n  \"last_name\": \"Everyman\",\n  \"numbers\": [8,5,3,2,4,5]\n}]\n</code></pre>\n\n<p>How can I select just the array item where last_name = Doe? I am trying to convert some code I wrote in ruby to python since lambda doesn't support ruby :(\nMy ruby code looks like:</p>\n\n<pre><code>match = data.select {|x| x[:last_name] == 'Doe'}\n</code></pre>\n\n<p>Which returns:</p>\n\n<pre><code>{\n \"first_name\": \"Jane\",\n \"last_name\": \"Doe\",\n \"numbers\": [6,4,1,35,2]\n}\n</code></pre>\n\n<p>Also, I know that wouldn't technically work in ruby since the data is in json form, but I converted it from a hash to json and don't feel like changing it back cause the base idea is still the same.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503532015, "post_id": 45850843, "comment_id": 78659901, "body": "It&#39;s not clear what you&#39;re asking. What do you mean by &quot;with a list constructor&quot;? What do you mean by &quot;default items&quot;? If you want to write a function, can you show what calling the function would look like?"}, {"owner": {"reputation": 1165, "user_id": 2855071, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AMDxi.jpg?s=128&g=1", "display_name": "innisfree", "link": "https://stackoverflow.com/users/2855071/innisfree"}, "edited": false, "score": 1, "creation_date": 1503532086, "post_id": 45850843, "comment_id": 78659914, "body": "Your code snippet doesn&#39;t work at all."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503532143, "post_id": 45850843, "comment_id": 78659927, "body": "It sounds like your problem might just be the bugs in your example code - you forget to save the list to the <code>x</code> variable, and your loop should be <code>for a in ...</code> instead of <code>for x in ...</code>, since your loop body refers to the loop variable as <code>a</code>, not <code>x</code>."}, {"owner": {"reputation": 1165, "user_id": 2855071, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AMDxi.jpg?s=128&g=1", "display_name": "innisfree", "link": "https://stackoverflow.com/users/2855071/innisfree"}, "edited": false, "score": 0, "creation_date": 1503532147, "post_id": 45850843, "comment_id": 78659931, "body": "I don&#39;t know what you mean default items. Do you mean a list-like object that returns a default value rather than an <code>IndexError</code> if the index is our of range?"}, {"owner": {"reputation": 174, "user_id": 6784817, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uCrcbvrttis/AAAAAAAAAAI/AAAAAAAAAZ8/l0VVo_p7T9A/photo.jpg?sz=128", "display_name": "Walid Mujahid \u0648\u0644\u064a\u062f \u0645\u062c\u0627\u0647\u062f", "link": "https://stackoverflow.com/users/6784817/walid-mujahid-%d9%88%d9%84%d9%8a%d8%af-%d9%85%d8%ac%d8%a7%d9%87%d8%af"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503533584, "post_id": 45850843, "comment_id": 78660259, "body": "@user2357112 I apologies for the unclear question. I have edited it along with the faulty example code."}], "answers": [{"comments": [{"owner": {"reputation": 1165, "user_id": 2855071, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AMDxi.jpg?s=128&g=1", "display_name": "innisfree", "link": "https://stackoverflow.com/users/2855071/innisfree"}, "edited": false, "score": 0, "creation_date": 1503532578, "post_id": 45850886, "comment_id": 78660033, "body": "How about <code>result = [default[0]] + [x for x in range(10)] + [default[1]]</code>"}, {"owner": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "reply_to_user": {"reputation": 1165, "user_id": 2855071, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AMDxi.jpg?s=128&g=1", "display_name": "innisfree", "link": "https://stackoverflow.com/users/2855071/innisfree"}, "edited": false, "score": 0, "creation_date": 1503532872, "post_id": 45850886, "comment_id": 78660097, "body": "Ok, made the edit"}], "tags": [], "owner": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "is_accepted": false, "score": 2, "last_activity_date": 1503537193, "last_edit_date": 1503537193, "creation_date": 1503532315, "answer_id": 45850886, "question_id": 45850843, "link": "https://stackoverflow.com/questions/45850843/constructing-a-list-that-has-default-items/45850886#45850886", "title": "Constructing a list that has default items", "body": "<pre><code>default = ['begin', 'end']\nresult = [default[0]] + [x for x in range(10)] + [default[1]]\n</code></pre>\n\n<p>This should work</p>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1503532855, "post_id": 45850944, "comment_id": 78660096, "body": "You should probably mention that this works for 3.3+ only."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1503534755, "post_id": 45850944, "comment_id": 78660547, "body": "No problem. I think it is not exactly what you want, as it does not use a list comprehension (?). However it has the advantage that it does not require the creation of temporary lists to append to the start and end of the generated list."}, {"owner": {"reputation": 174, "user_id": 6784817, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uCrcbvrttis/AAAAAAAAAAI/AAAAAAAAAZ8/l0VVo_p7T9A/photo.jpg?sz=128", "display_name": "Walid Mujahid \u0648\u0644\u064a\u062f \u0645\u062c\u0627\u0647\u062f", "link": "https://stackoverflow.com/users/6784817/walid-mujahid-%d9%88%d9%84%d9%8a%d8%af-%d9%85%d8%ac%d8%a7%d9%87%d8%af"}, "edited": false, "score": 0, "creation_date": 1503539663, "post_id": 45850944, "comment_id": 78661631, "body": "@PaulRooney Originally I was tring to see if I could do it all in a list comprehension, but your answer does provide another angle which is most appreciated."}], "tags": [], "owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "is_accepted": false, "score": 2, "last_activity_date": 1503532983, "last_edit_date": 1503532983, "creation_date": 1503532795, "answer_id": 45850944, "question_id": 45850843, "link": "https://stackoverflow.com/questions/45850843/constructing-a-list-that-has-default-items/45850944#45850944", "title": "Constructing a list that has default items", "body": "<p>Why not create a function that yields \"start\" and \"end\" on either side of the provided iterable.</p>\n\n<pre><code>def markedrange(iterable, markers=('start', 'end')):\n    yield markers[0]\n    yield from iterable\n    yield markers[1]\n\nprint(list(markedrange(range(10))))\nprint(list(markedrange(['a', 'b', 'c', 'd'], markers=('hi', 'bye'))))\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>['start', 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'end']\n['hi', 'a', 'b', 'c', 'd', 'bye']\n</code></pre>\n\n<p>If you are on an older python version and you don't have <code>yield from</code>, you should instead yield in a loop.</p>\n\n<p>e.g.</p>\n\n<pre><code>for i in iterable:\n    yield i\n</code></pre>\n"}], "owner": {"reputation": 174, "user_id": 6784817, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uCrcbvrttis/AAAAAAAAAAI/AAAAAAAAAZ8/l0VVo_p7T9A/photo.jpg?sz=128", "display_name": "Walid Mujahid \u0648\u0644\u064a\u062f \u0645\u062c\u0627\u0647\u062f", "link": "https://stackoverflow.com/users/6784817/walid-mujahid-%d9%88%d9%84%d9%8a%d8%af-%d9%85%d8%ac%d8%a7%d9%87%d8%af"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1503553446, "answer_count": 2, "score": 0, "last_activity_date": 1503537193, "creation_date": 1503531881, "last_edit_date": 1503533890, "question_id": 45850843, "link": "https://stackoverflow.com/questions/45850843/constructing-a-list-that-has-default-items", "closed_reason": "Needs details or clarity", "title": "Constructing a list that has default items", "body": "<p>I am not really sure how to word it, which is probably why Google has not been helpful. But say I have the following:</p>\n\n<pre><code>a = ['begin', 'end']\nfor x in range(10):\n  a.insert(-1, x)\nprint(a)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['begin', 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'end']\n</code></pre>\n\n<p>How would I make a list that equals the output above with a list comprehension with the default items <code>['begin', 'end']</code>?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>What I meant by default items was that regardless of the numbers between \"begin\" and \"end\", which you could use a list comprehension to generate, the \"begin\" and \"end\" would always be where they are. </p>\n\n<p>The closest answer to my question was @whackamadoodle3000 who essentially did the following although not exactly:</p>\n\n<pre><code>result = ['start'] + [x for x in range(10)] + ['end']\n</code></pre>\n\n<p>The source of my confusion was that I thought I could do all that in a list comprehension something like:</p>\n\n<pre><code>result = [['start'] + [x for x in range(10)] + ['end']]\n</code></pre>\n\n<p>Plus I forgot you could merge lists with the addition operator. </p>\n"}, {"tags": ["python", "string", "pandas", "dataframe", "substring"], "answers": [{"comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 2, "creation_date": 1503532551, "post_id": 45850885, "comment_id": 78660026, "body": "I think you can simplify to just <code>df[&#39;C&#39;] = df[df.A == &#39;VALID&#39;].B.str.extract(&quot;(?&lt;=X&#39;X)(.*?)(?=Y&#39;Y)&quot;)</code>, no need to initialise <code>df[&#39;C&#39;]</code>, <code>NaN</code> is the default."}, {"owner": {"reputation": 653, "user_id": 7876832, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8026603fd9d461598f867990a8eefbd2?s=128&d=identicon&r=PG&f=1", "display_name": "ParalysisByAnalysis", "link": "https://stackoverflow.com/users/7876832/paralysisbyanalysis"}, "edited": false, "score": 0, "creation_date": 1503587802, "post_id": 45850885, "comment_id": 78689082, "body": "Perfect.  That did the trick! Thank you for your help with this."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 3, "last_activity_date": 1503532692, "last_edit_date": 1503532692, "creation_date": 1503532303, "answer_id": 45850885, "question_id": 45850837, "link": "https://stackoverflow.com/questions/45850837/how-to-conditionally-copy-a-substring-into-a-new-column-of-a-pandas-dataframe/45850885#45850885", "title": "How to conditionally copy a substring into a new column of a pandas dataframe?", "body": "<p>You can use <code>pd.Series.str.extract</code>:</p>\n\n<pre><code>In [737]: df\nOut[737]: \n         A                                   B\n0    VALID       asdfafX'XextractthisY'Yeaaadf\n1  INVALID         secondrowX'XsubtextY'Yelakj\n2    VALID  secondrowX'XextractthistooY'Yelakj\n\nIn [745]: df['C'] = df[df.A == 'VALID'].B.str.extract(\"(?&lt;=X'X)(.*?)(?=Y'Y)\", expand=False)\n\nIn [746]: df\nOut[746]: \n         A                                   B               C\n0    VALID       asdfafX'XextractthisY'Yeaaadf     extractthis\n1  INVALID         secondrowX'XsubtextY'Yelakj             NaN\n2    VALID  secondrowX'XextractthistooY'Yelakj  extractthistoo\n</code></pre>\n\n<p>The regex pattern is:</p>\n\n<pre><code>(?&lt;=X'X)(.*?)(?=Y'Y)\n</code></pre>\n\n<ul>\n<li><p><code>(?&lt;=X'X)</code> is a lookbehind for <code>X'X</code></p></li>\n<li><p><code>(.*?)</code> matches everything between the lookbehind and lookahead</p></li>\n<li><p><code>(?=Y'Y)</code> is a lookahead for <code>Y'Y</code></p></li>\n</ul>\n"}], "owner": {"reputation": 653, "user_id": 7876832, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8026603fd9d461598f867990a8eefbd2?s=128&d=identicon&r=PG&f=1", "display_name": "ParalysisByAnalysis", "link": "https://stackoverflow.com/users/7876832/paralysisbyanalysis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 2, "accepted_answer_id": 45850885, "answer_count": 1, "score": 5, "last_activity_date": 1503532692, "creation_date": 1503531841, "last_edit_date": 1503532519, "question_id": 45850837, "link": "https://stackoverflow.com/questions/45850837/how-to-conditionally-copy-a-substring-into-a-new-column-of-a-pandas-dataframe", "title": "How to conditionally copy a substring into a new column of a pandas dataframe?", "body": "<p>This is my first post so hopefully I don't botch the question and I'm clear.\nBasically, this is a two part question.  I need to set up code that first checks whether or not Column A = \"VALID\".  If this is true, I need to extract the substring from column B and place it in a new column, here labeled \"C\". If the conditional is false, I will like to put in \"NA\".  See the second table for my desired outcome. </p>\n\n<pre><code>|     A       |             B                     |\n|-------------|-----------------------------------|\n|    VALID    |asdfafX'XextractthisY'Yeaaadf      |\n|    INVALID  |secondrowX'XsubtextY'Yelakj        |\n|    VALID    |secondrowX'XextractthistooY'Yelakj |\n</code></pre>\n\n<hr>\n\n<pre><code>|     A       |             B                       |      C          |\n|-------------|-------------------------------------|-----------------|\n|    VALID    |\"asdfafX'XextractthisY'Yeaaadf\"      | extractthis     |\n|    INVALID  |\"secondrowX'XsubtextY'Yelakj\"        | NA              |\n|    VALID    |\"secondrowX'XextractthistooY'Yelakj\" | extractthistoo  |\n</code></pre>\n\n<p>A few things to note: </p>\n\n<p>-The substring will always start after the phrase \"X'X\" and finish right before \"Y'Y\". </p>\n\n<p>-The substring will be of differing lengths from cell to cell.</p>\n\n<p>I know the following code is wrong, but I wanted to show you at how I have been attempting to solve this problem:</p>\n\n<pre><code>import pandas as pd\n\nif df[A] == \"VALID\":\n   df[C] = df[B]df.str[start:finish]\nelse:\n   df[C].isna()\n</code></pre>\n\n<p>I apologize for the errors in this basic code, as I am new to python altogether and still rely on an IDE and trial&amp;error to guide me.  Any help you can provide is appreciated.</p>\n"}, {"tags": ["python", "pdf", "tabular", "pdfminer"], "answers": [{"tags": [], "owner": {"reputation": 814, "user_id": 4387110, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/al4WE.gif?s=128&g=1", "display_name": "Big_Al_Tx", "link": "https://stackoverflow.com/users/4387110/big-al-tx"}, "is_accepted": true, "score": 2, "last_activity_date": 1503639052, "last_edit_date": 1503639052, "creation_date": 1503531492, "answer_id": 45850791, "question_id": 45850790, "link": "https://stackoverflow.com/questions/45850790/a-solution-for-extracting-tabular-data-from-a-pdf-file-sort-of/45850791#45850791", "title": "A Solution for Extracting Tabular Data from a PDF file (sort-of)", "body": "<p>I first tried to look at the distribution of text (in terms of their x &amp; y locations on the page) to try and identify where the row and column breaks are located.  By using the Python Module \u2018pdfminer\u2019, I extracted the text and BoundingBox parameters, sifted through each piece of text and mapped how many pieces of text were on a page for a given x or y value.  The idea was to look through the distribution of text (horizontally for row breaks, and vertically for column breaks), and when the density was zero (meaning there was a clear gap across, or up/down, the table), that would identify a row or column break.</p>\n\n<p>The idea does work, but only sometimes.  It assumes the table has the same number and alignment of cells vertically and horizontally (a simple grid), and that there is a distinct gap between the text of adjacent cells.  Also, if there\u2019s text that spans across multiple columns (like a title above the table, a footer below the table, merged cells, etc.), identification of column breaks is more difficult \u2013 you might be able to identify which text elements above or below the table should be ignored, but I couldn\u2019t find a good approach for dealing with merged cells.</p>\n\n<p>When it came time to look horizontally to identify row breaks, there were several other challenges.  First, pdfminer automatically tries to group pieces of text that are located near each other, even when they span more that one cell in the table.  In those instances, the BoundingBox for that text object includes multiple lines, obscuring any row breaks that might have been crossed.  Even if every line of text were extracted separately, the challenge would be to distinguish what was a normal space separating consecutive lines of text, and what was a row break.</p>\n\n<p>After exploring various work-arounds and conducting a number of tests, I decided to step back and try another approach.</p>\n\n<p>The tables that had the data I needed to extract all have borders around them, so I reasoned I should be able to find the elements in the PDF file that draws those lines.  However, when I looked at the elements that I could extract from the source file, I got some surprising results.</p>\n\n<p>You would think that lines would be represented as a \u201cline object\u201d, but you\u2019d be wrong (at least for the files I was looking at).  If they aren\u2019t \u201clines\u201d, then maybe they simply draw rectangles for each cell, adjusting the linewidth attribute to get the line thickness they wanted, right?  No.  It turned out the lines were actually drawn as \u201crectangle objects\u201d with a very small dimension (narrow width to create vertical lines, or short height to create horizontal lines).  And where it looks like the lines meet at the corners, the rectangles don\u2019t \u2013 they have a very small rectangle to fill-in the gaps.</p>\n\n<p>Once I was able to recognize what to look for, I then had to contend with multiple rectangles placed adjacent to one another to create thick lines.  Ultimately, I wrote a routine to group similar values and calculate an average value to use for the row and column breaks that I would use later.</p>\n\n<p>Now, it was a matter of processing the text from the table.  I chose to use an SQLite database to store, analyze, and regroup the text from the PDF file.  I know there are other \u201cpythonic\u201d options out there, and some may find those approaches more familiar and easy to use, but I felt that the amount of data I would be dealing with would be best handled using an actual database file.</p>\n\n<p>As I mentioned earlier, pdfminer groups text that is located near one another, and it may cross cell boundaries.  An initial attempt to split pieces of text shown on separate lines within one of these text groups was only partially successful; it\u2019s one of the areas that I intend to develop further (namely, how to bypass the pdfminer LTTextbox routine so I can get the pieces individually).</p>\n\n<p>There is another shortcoming of the pdfminer module when it comes to vertical text.  I have been unable to identify any attribute that will either identify when the text is vertical, or what angle (e.g., +90 or -90 degrees) the text is displayed.  And the text grouping routine doesn\u2019t seem to know that either, since text rotated +90 degrees (i.e., rotated CCW where the letters are read from the bottom up), it concatenates the letter in reverse order separated by newline characters.</p>\n\n<p>The routine below works fairly well, under the circumstances.  I know it\u2019s still rough, there are several enhancements to be made, and it\u2019s not packaged in a way that\u2019s ready for widespread distribution, but it seems to have \u201cbroken the code\u201d on how to extract tabular data from a PDF file (for the most part).  Hopefully, others may be able to use this for their own purposes, and maybe even improve it.</p>\n\n<p>I welcome any ideas, suggestions, or recommendations that you may have.</p>\n\n<p>EDIT:  I posted a revised version that includes additional parameters (cell_htol_up, etc.) to help \"tune\" the algorithm as to which pieces of text belong to a particular cell in the table.</p>\n\n<pre><code># This was written for use w/Python 2.  Use w/Python 3 hasn't been tested &amp; proper execution is not guaranteed.\n\nimport os                                                   # Library of Operating System routines\nimport sys                                                  # Library of System routines\nimport sqlite3                                              # Library of SQLite dB routines\nimport re                                                   # Library for Regular Expressions\nimport csv                                                  # Library to output as Comma Separated Values\nimport codecs                                               # Library of text Codec types\nimport cStringIO                                            # Library of String manipulation routines\n\nfrom pdfminer.pdfparser import PDFParser                    # Library of PDF text extraction routines\nfrom pdfminer.pdfdocument import PDFDocument, PDFNoOutlines\nfrom pdfminer.pdfpage import PDFPage, PDFTextExtractionNotAllowed\nfrom pdfminer.pdfinterp import PDFResourceManager, PDFPageInterpreter\nfrom pdfminer.pdfdevice import PDFDevice\nfrom pdfminer.layout import LAParams, LTTextBox, LTTextLine, LTFigure, LTImage, LTLine, LTRect, LTTextBoxVertical\nfrom pdfminer.converter import PDFPageAggregator\n\n#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n\ndef add_new_value (new_value, list_values=[]):\n    # Used to exclude duplicate values in a list\n    not_in_list = True\n    for list_value in list_values:\n        # if list_value == new_value:\n        if abs(list_value - new_value) &lt; 1:\n            not_in_list = False\n\n    if not_in_list:\n        list_values.append(new_value)\n\n    return list_values\n\n#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n\ndef condense_list (list_values, grp_tolerance = 1):\n    # Group values &amp; eliminate duplicate/close values\n    tmp_list = []\n    for n, list_value in enumerate(list_values):\n        if sum(1 for val in tmp_list if abs(val - list_values[n]) &lt; grp_tolerance) == 0:\n            tmp_val = sum(list_values[n] for val in list_values if abs(val - list_values[n]) &lt; grp_tolerance) / \\\n                sum(1 for val in list_values if abs(val - list_values[n]) &lt; grp_tolerance)\n            tmp_list.append(int(round(tmp_val)))\n\n    return tmp_list\n\n#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n\nclass UnicodeWriter:\n    \"\"\"\n    A CSV writer which will write rows to CSV file \"f\", \n    which is encoded in the given encoding.\n    \"\"\"\n\n    def __init__(self, f, dialect=csv.excel, encoding=\"utf-8\", **kwds):\n        # Redirect output to a queue\n        self.queue = cStringIO.StringIO()\n        self.writer = csv.writer(self.queue, dialect=dialect, quotechar = '\"', quoting=csv.QUOTE_ALL, **kwds)\n        self.stream = f\n        self.encoder = codecs.getincrementalencoder(encoding)()\n\n    def writerow(self, row):\n        self.writer.writerow([unicode(s).encode(\"utf-8\") for s in row])\n        # Fetch UTF-8 output from the queue ...\n        data = self.queue.getvalue()\n        data = data.decode(\"utf-8\")\n        # ... and reencode it into the target encoding\n        data = self.encoder.encode(data)\n        # write to the target stream\n        self.stream.write(data)\n        # empty queue\n        self.queue.truncate(0)\n\n    def writerows(self, rows):\n        for row in rows:\n            self.writerow(row)\n\n#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n\n# In case a connection to the database can't be created, set 'conn' to 'None'\nconn = None\n\n#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n# Define variables for use later on\n#_______________________________________________________________________________________________________________________\n\nsqlite_file = \"pdf_table_text.sqlite\"                       # Name of the sqlite database file\nbrk_tol = 3                                                 # Tolerance for grouping LTRect values as line break points\n                                                            # ***   This may require tuning to get optimal results   ***\n\ncell_htol_lf = -2                                           # Horizontal &amp; Vertical tolerances (up/down/left/right)\ncell_htol_rt = 2                                            # for over-scanning table cell bounding boxes\ncell_vtol_up = 8                                            # i.e., how far outside cell bounds to look for text to include\ncell_vtol_dn = 0                                            # ***   This may require tuning to get optimal results   ***\n\nreplace_newlines = True                                     # Switch for replacing newline codes (\\n) with spaces\nreplace_multspaces = True                                   # Switch for replacing multiple spaces with a single space\n\n# txt_concat_str = \"' '\"                                    # Concatenate cell data with a single space\ntxt_concat_str = \"char(10)\"                                 # Concatenate cell data with a line feed\n\n#=======================================================================================================================\n# Default values for sample input &amp; output files (path, filename, pagelist, etc.)\n\nfilepath = \"\"                                               # Path of the source PDF file (default = current folder)\nsrcfile = \"\"                                                # Name of the source PDF file (quit if left blank)\npagelist = [1, ]                                            # Pages to extract table data (Make an interactive input?)\n                                                            # --&gt; THIS MUST BE IN THE FORM OF A LIST OR TUPLE!\n\n#=======================================================================================================================\n# Impose required conditions &amp; abort execution if they're not met\n\n# Should check if files are locked:  sqlite database, input &amp; output files, etc.\n\nif filepath + srcfile == \"\" or pagelist == None:\n    print \"Source file not specified and/or page list is blank!  Execution aborted!\"\n    sys.exit()\n\ndmp_pdf_data = \"pdf_data.csv\"\ndmp_tbl_data = \"tbl_data.csv\"\ndestfile = srcfile[:-3]+\"csv\"\n\n#=======================================================================================================================\n# First test to see if this file already exists &amp; delete it if it does\n\nif os.path.isfile(sqlite_file):\n    os.remove(sqlite_file)\n\n#=======================================================================================================================\ntry:\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Open or Create the SQLite database file\n    #___________________________________________________________________________________________________________________\n\n    print \"-\" * 120\n    print \"Creating SQLite Database &amp; working tables ...\"\n\n    # Connecting to the database file\n    conn = sqlite3.connect(sqlite_file)\n    curs = conn.cursor()\n\n    qry_create_table = \"CREATE TABLE {tn} ({nf} {ft} PRIMARY KEY)\"\n    qry_alter_add_column = \"ALTER TABLE {0} ADD COLUMN {1}\"\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Create 1st Table\n    #___________________________________________________________________________________________________________________\n\n    tbl_pdf_elements = \"tbl_pdf_elements\"                   # Name of the 1st table to be created\n    new_field = \"idx\"                                       # Name of the index column\n    field_type = \"INTEGER\"                                  # Column data type\n\n    # Delete the table if it exists so old data is cleared out\n    curs.execute(\"DROP TABLE IF EXISTS \" + tbl_pdf_elements)\n\n    # Create output table for PDF text w/1 column (index) &amp; set it as PRIMARY KEY\n    curs.execute(qry_create_table.format(tn=tbl_pdf_elements, nf=new_field, ft=field_type))\n\n    # Table fields: index, text_string, pg, x0, y0, x1, y1, orient\n    cols = (\"'pdf_text' TEXT\", \n            \"'pg' INTEGER\", \n            \"'x0' INTEGER\", \n            \"'y0' INTEGER\", \n            \"'x1' INTEGER\", \n            \"'y1' INTEGER\", \n            \"'orient' INTEGER\")\n\n    # Add other columns\n    for col in cols:\n        curs.execute(qry_alter_add_column.format(tbl_pdf_elements, col))\n\n    # Committing changes to the database file\n    conn.commit()\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Create 2nd Table\n    #___________________________________________________________________________________________________________________\n\n    tbl_table_data = \"tbl_table_data\"                       # Name of the 2nd table to be created\n    new_field = \"idx\"                                       # Name of the index column\n    field_type = \"INTEGER\"                                  # Column data type\n\n    # Delete the table if it exists so old data is cleared out\n    curs.execute(\"DROP TABLE IF EXISTS \" + tbl_table_data)\n\n    # Create output table for Table Data w/1 column (index) &amp; set it as PRIMARY KEY\n    curs.execute(qry_create_table.format(tn=tbl_table_data, nf=new_field, ft=field_type))\n\n    # Table fields: index, text_string, pg, row, column\n    cols = (\"'tbl_text' TEXT\",\n            \"'pg' INTEGER\",\n            \"'row' INTEGER\",\n            \"'col' INTEGER\")\n\n    # Add other columns\n    for col in cols:\n        curs.execute(qry_alter_add_column.format(tbl_table_data, col))\n\n    # Committing changes to the database file\n    conn.commit()\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Start PDF text extraction code here\n    #___________________________________________________________________________________________________________________\n\n    print \"Opening PDF file &amp; preparing for text extraction:\"\n    print \" -- \" + filepath + srcfile\n\n    # Open a PDF file.\n    fp = open(filepath + srcfile, \"rb\")\n\n    # Create a PDF parser object associated with the file object.\n    parser = PDFParser(fp)\n\n    # Create a PDF document object that stores the document structure.\n\n    # Supply the password for initialization (if needed)\n    # document = PDFDocument(parser, password)\n    document = PDFDocument(parser)\n\n    # Check if the document allows text extraction. If not, abort.\n    if not document.is_extractable:\n        raise PDFTextExtractionNotAllowed\n\n    # Create a PDF resource manager object that stores shared resources.\n    rsrcmgr = PDFResourceManager()\n\n    # Create a PDF device object.\n    device = PDFDevice(rsrcmgr)\n\n    # Create a PDF interpreter object.\n    interpreter = PDFPageInterpreter(rsrcmgr, device)\n\n    # Set parameters for analysis.\n    laparams = LAParams()\n\n    # Create a PDF page aggregator object.\n    device = PDFPageAggregator(rsrcmgr, laparams=laparams)\n    interpreter = PDFPageInterpreter(rsrcmgr, device)\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Extract text &amp; location data from PDF file (examine &amp; process only pages in the page list)\n    #___________________________________________________________________________________________________________________\n\n    # Initialize variables\n    idx1 = 0\n    idx2 = 0\n    lastpg = max(pagelist)\n\n    print \"Starting text extraction ...\"\n\n    qry_insert_pdf_txt = \"INSERT INTO \" + tbl_pdf_elements + \" VALUES(?, ?, ?, ?, ?, ?, ?, ?)\"\n    qry_get_pdf_txt = \"SELECT group_concat(pdf_text, \" + txt_concat_str + \\\n        \") FROM {0} WHERE pg=={1} AND x0&gt;={2} AND x1&lt;={3} AND y0&gt;={4} AND y1&lt;={5} ORDER BY y0 DESC, x0 ASC;\"\n    qry_insert_tbl_data = \"INSERT INTO \" + tbl_table_data + \" VALUES(?, ?, ?, ?, ?)\"\n\n    # Process each page contained in the document.\n    for i, page in enumerate(PDFPage.create_pages(document)):\n\n        interpreter.process_page(page)\n\n        # Get the LTPage object for the page.\n        lt_objs = device.get_result()\n        pg = device.pageno - 1                              # Must subtract 1 to correct 'pageno'\n\n        # Exit the loop if past last page to parse\n        if pg &gt; lastpg:\n            break\n\n        #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        # If it finds a page in the pagelist, process the contents\n\n        if pg in pagelist:\n            print \"- Processing page {0} ...\".format(pg)\n\n            xbreaks = []\n            ybreaks = []\n\n            #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            # Iterate thru list of pdf layout elements (LT* objects) then capture the text &amp; attributes of each\n\n            for lt_obj in lt_objs:\n\n                # Examine LT objects &amp; get parameters for text strings\n                if isinstance(lt_obj, LTTextBox) or isinstance(lt_obj, LTTextLine):\n                    # Increment index\n                    idx1 += 1\n\n                    # Assign PDF LTText object parameters to variables\n                    pdftext = lt_obj.get_text()             # Need to convert escape codes &amp; unicode characters!\n                    pdftext = pdftext.strip()               # Remove leading &amp; trailing whitespaces\n\n                    # Save integer bounding box coordinates: round down @ start, round up @ end\n                    # (x0, y0, x1, y1) = lt_obj.bbox\n                    x0 = int(lt_obj.bbox[0])\n                    y0 = int(lt_obj.bbox[1])\n                    x1 = int(lt_obj.bbox[2] + 1)\n                    y1 = int(lt_obj.bbox[3] + 1)\n\n                    orient = 0                              # What attribute gets this value?\n\n                    #---- These approaches don't work for identifying vertical text ... --------------------------------\n\n                    # orient = lt_obj.rotate\n                    # orient = lt_obj.char_disp\n\n                    # if lt_obj.get_writing_mode == \"tb-rl\":\n                        # orient = 90\n\n                    # if isinstance(lt_obj, LTTextBoxVertical): # vs LTTextBoxHorizontal\n                        # orient = 90\n\n                    # if LAParams(lt_obj).detect_vertical:\n                        # orient = 90\n\n                    #---------------------------------------------------------------------------------------------------\n                    # Split text strings at line feeds\n\n                    if \"\\n\" in pdftext:\n                        substrs = pdftext.split(\"\\n\")\n                        lineheight = (y1-y0) / (len(substrs) + 1)\n                        # y1 = y0 + lineheight\n                        y0 = y1 - lineheight\n                        for substr in substrs:\n                            substr = substr.strip()         # Remove leading &amp; trailing whitespaces\n                            if substr != \"\":\n                                # Insert values into tuple for uploading into dB\n                                pdf_txt_export = [(idx1, substr, pg, x0, y0, x1, y1, orient)]\n\n                                # Insert values into dB\n                                curs.executemany(qry_insert_pdf_txt, pdf_txt_export)\n                                conn.commit()\n\n                            idx1 += 1\n                            # y0 = y1\n                            # y1 = y0 + lineheight\n                            y1 = y0\n                            y0 = y1 - lineheight\n\n                    else:\n                        # Insert values into tuple for uploading into dB\n                        pdf_txt_export = [(idx1, pdftext, pg, x0, y0, x1, y1, orient)]\n\n                        # Insert values into dB\n                        curs.executemany(qry_insert_pdf_txt, pdf_txt_export)\n                        conn.commit()\n\n                elif isinstance(lt_obj, LTLine):\n                    # LTLine - Lines drawn to define tables\n                    pass\n\n                elif isinstance(lt_obj, LTRect):\n                    # LTRect - Borders drawn to define tables\n\n                    # Grab the lt_obj.bbox values\n                    x0 = round(lt_obj.bbox[0], 2)\n                    y0 = round(lt_obj.bbox[1], 2)\n                    x1 = round(lt_obj.bbox[2], 2)\n                    y1 = round(lt_obj.bbox[3], 2)\n                    xmid = round((x0 + x1) / 2, 2)\n                    ymid = round((y0 + y1) / 2, 2)\n\n                    # rectline = lt_obj.linewidth\n\n                    # If width less than tolerance, assume it's used as a vertical line\n                    if (x1 - x0) &lt; brk_tol:                 # Vertical Line or Corner\n                        xbreaks = add_new_value(xmid, xbreaks)\n\n                    # If height less than tolerance, assume it's used as a horizontal line\n                    if (y1 - y0) &lt; brk_tol:                 # Horizontal Line or Corner\n                        ybreaks = add_new_value(ymid, ybreaks)\n\n                elif isinstance(lt_obj, LTImage):\n                    # An image, so do nothing\n                    pass\n\n                elif isinstance(lt_obj, LTFigure):\n                    # LTFigure objects are containers for other LT* objects which shouldn't matter, so do nothing\n                    pass\n\n            col_breaks = condense_list(xbreaks, brk_tol)    # Group similar values &amp; eliminate duplicates\n            row_breaks = condense_list(ybreaks, brk_tol)\n\n            col_breaks.sort()\n            row_breaks.sort()\n\n            #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            # Regroup the text into table 'cells'\n            #___________________________________________________________________________________________________________\n\n            print \"  -- Text extraction complete. Grouping data for table ...\"\n\n            row_break_prev = 0\n            col_break_prev = 0\n\n            table_data = []\n            table_rows = len(row_breaks)\n            for i, row_break in enumerate(row_breaks):\n                if row_break_prev == 0:                             # Skip the rest the first time thru\n                    row_break_prev = row_break\n                else:\n                    for j, col_break in enumerate(col_breaks):\n                        if col_break_prev == 0:                     # Skip query the first time thru\n                            col_break_prev = col_break\n                        else:\n                            # Run query to get all text within cell lines (+/- htol &amp; vtol values)\n                            curs.execute(qry_get_pdf_txt.format(tbl_pdf_elements, pg, col_break_prev + cell_htol_lf, \\\n                                col_break + cell_htol_rt, row_break_prev + cell_vtol_dn, row_break + cell_vtol_up))\n\n                            rows = curs.fetchall()                  # Retrieve all rows\n\n                            for row in rows:\n                                if row[0] != None:                  # Skip null results\n                                    idx2 += 1\n                                    table_text = row[0]\n                                    if replace_newlines:            # Option - Replace newline codes (\\n) with spaces\n                                        table_text = table_text.replace(\"\\n\", \" \")\n\n                                    if replace_multspaces:          # Option - Replace multiple spaces w/single space\n                                        table_text = re.sub(\" +\", \" \", table_text)\n\n                                    table_data.append([idx2, table_text, pg, table_rows - i, j])\n\n                        col_break_prev = col_break\n\n                row_break_prev = row_break\n\n            curs.executemany(qry_insert_tbl_data, table_data)\n            conn.commit()\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Export the regrouped table data:\n\n    # Determine the number of columns needed for the output file\n    # -- Should the data be extracted all at once or one page at a time?\n\n    print \"Saving exported table data ...\"\n\n    qry_col_count = \"SELECT MIN([col]) AS colmin, MAX([col]) AS colmax, MIN([row]) AS rowmin, MAX([row]) AS rowmax, \" + \\\n        \"COUNT([row]) AS rowttl FROM [{0}] WHERE [pg] = {1} AND [tbl_text]!=' ';\"\n\n    qry_sql_export = \"SELECT * FROM [{0}] WHERE [pg] = {1} AND [row] = {2} AND [tbl_text]!=' ' ORDER BY [col];\"\n\n    f = open(filepath + destfile, \"wb\")\n    writer = UnicodeWriter(f)\n\n    for pg in pagelist:\n        curs.execute(qry_col_count.format(tbl_table_data, pg))\n        rows = curs.fetchall()\n\n        if len(rows) &gt; 1:\n            print \"Error retrieving row &amp; column counts!  More that one record returned!\"\n            print \" -- \", qry_col_count.format(tbl_table_data, pg)\n            print rows\n            sys.exit()\n\n        for row in rows:\n            (col_min, col_max, row_min, row_max, row_ttl) = row\n\n        # Insert a page separator\n        writer.writerow([\"Data for Page {0}:\".format(pg), ])\n\n        if row_ttl == 0:\n            writer.writerow([\"Unable to export text from PDF file.  No table structure found.\", ])\n\n        else:\n            k = 0\n            for j in range(row_min, row_max + 1):\n                curs.execute(qry_sql_export.format(tbl_table_data, pg, j))\n\n                rows = curs.fetchall()\n\n                if rows == None:                            # No records match the given criteria\n                    pass\n\n                else:\n                    i = 1\n                    k += 1\n                    column_data = [k, ]                     # 1st column as an Index\n\n                    for row in rows:\n                        (idx, tbl_text, pg_num, row_num, col_num) = row\n\n                        if pg_num != pg:                    # Exit the loop if Page # doesn't match\n                            break\n\n                        while i &lt; col_num:\n                            column_data.append(\"\")\n                            i += 1\n                            if i &gt;= col_num or i == col_max: break\n\n                        column_data.append(unicode(tbl_text))\n                        i += 1\n\n                    writer.writerow(column_data)\n\n    f.close()\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Dump the SQLite regrouped data (for error checking):\n\n    print \"Dumping SQLite table of regrouped (table) text ...\"\n\n    qry_sql_export = \"SELECT * FROM [{0}] WHERE [tbl_text]!=' ' ORDER BY [pg], [row], [col];\"\n    curs.execute(qry_sql_export.format(tbl_table_data))\n    rows = curs.fetchall()\n\n    # Output data with Unicode intact as CSV\n    with open(dmp_tbl_data, \"wb\") as f:\n        writer = UnicodeWriter(f)\n        writer.writerow([\"idx\", \"tbl_text\", \"pg\", \"row\", \"col\"])\n        writer.writerows(rows)\n\n    f.close()\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Dump the SQLite temporary PDF text data (for error checking):\n\n    print \"Dumping SQLite table of extracted PDF text ...\"\n\n    qry_sql_export = \"SELECT * FROM [{0}] WHERE [pdf_text]!='  ' ORDER BY pg, y0 DESC, x0 ASC;\"\n    curs.execute(qry_sql_export.format(tbl_pdf_elements))\n    rows = curs.fetchall()\n\n    # Output data with Unicode intact as CSV\n    with open(dmp_pdf_data, \"wb\") as f:\n        writer = UnicodeWriter(f)\n        writer.writerow([\"idx\", \"pdf_text\", \"pg\", \"x0\", \"y0\", \"x1\", \"y2\", \"orient\"])\n        writer.writerows(rows)\n\n    f.close()\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    print \"Conversion complete.\"\n    print \"-\" * 120\n\nexcept sqlite3.Error, e:\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Rollback the last database transaction if the connection fails\n    #___________________________________________________________________________________________________________________\n\n    if conn:\n        conn.rollback()\n\n    print \"Error '{0}':\".format(e.args[0])\n    sys.exit(1)\n\nfinally:\n\n    #^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    # Close the connection to the database file\n    #___________________________________________________________________________________________________________________\n\n    if conn:\n        conn.close()\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 4387110, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/al4WE.gif?s=128&g=1", "display_name": "Big_Al_Tx", "link": "https://stackoverflow.com/users/4387110/big-al-tx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3733, "favorite_count": 1, "accepted_answer_id": 45850791, "answer_count": 1, "score": 0, "last_activity_date": 1503639052, "creation_date": 1503531492, "last_edit_date": 1503581190, "question_id": 45850790, "link": "https://stackoverflow.com/questions/45850790/a-solution-for-extracting-tabular-data-from-a-pdf-file-sort-of", "title": "A Solution for Extracting Tabular Data from a PDF file (sort-of)", "body": "<p>I had a need to extract tabular data on a large number of pages from many PDF documents.  Using the built-in text export capability from within Adobe\u2019s Acrobat Reader was useless \u2013 text extracted that way loses the spacial relationships established by the tables.  There have been a number of questions raised by others, and many solutions offered for this problem that I had tried, but the results varied between poor and terrible.  So I set about to develop my own solution.  It\u2019s developed enough (I think) that it\u2019s ready to share here.</p>\n"}, {"tags": ["python", "user-interface", "tkinter", "window"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1503532264, "post_id": 45850770, "comment_id": 78659959, "body": "you already seem to know how to set the size with <code>geometry</code> -- have you tried using that same method in <code>change_size</code>?"}, {"owner": {"reputation": 934, "user_id": 3142882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003477858906/picture?type=large", "display_name": "Danilo", "link": "https://stackoverflow.com/users/3142882/danilo"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1503532339, "post_id": 45850770, "comment_id": 78659979, "body": "yap, i&#39;ve succeeded it in answer :D It worked after several tries"}], "answers": [{"tags": [], "owner": {"reputation": 934, "user_id": 3142882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003477858906/picture?type=large", "display_name": "Danilo", "link": "https://stackoverflow.com/users/3142882/danilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1503531313, "creation_date": 1503531313, "answer_id": 45850771, "question_id": 45850770, "link": "https://stackoverflow.com/questions/45850770/changing-window-size-of-tkinter-object-with-element-bind/45850771#45850771", "title": "changing window size of Tkinter object with element.bind", "body": "<p>The function behind a <strong>bind</strong>:</p>\n\n<pre><code>from __future__ import absolute_import, division, print_function, unicode_literals,with_statement\n\nvStr = lambda x: type(x).__name__ in 'unicode,str'\n\ntry:\n    from Tkinter import Tk\nexcept ImportError:\n    from tkinter import Tk\n\nclass wind(object):\n\n    def __init__(self):\n        self._ = Tk()\n        self._.title('programm')\n        self._.geometry('300x400+1+1')\n\n        self._.bind('&lt;space&gt;', self.change_size)\n        self.change = False\n\n    def change_size(self,event):\n        if self.change:\n            self._.geometry('200x500+3+3')\n        else:\n            self._.geometry('300x400+1+1')\n\n        self.change = not self.change\n\n    def init(self):\n        self._.mainloop()\n\napp = wind()\napp.init()  \n</code></pre>\n\n<p>Works on Windows on py2.7 and py3.5</p>\n"}], "owner": {"reputation": 934, "user_id": 3142882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003477858906/picture?type=large", "display_name": "Danilo", "link": "https://stackoverflow.com/users/3142882/danilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503531313, "creation_date": 1503531313, "question_id": 45850770, "link": "https://stackoverflow.com/questions/45850770/changing-window-size-of-tkinter-object-with-element-bind", "title": "changing window size of Tkinter object with element.bind", "body": "<p>When initialising tkinter gui element our gui is placed in specific window with its own title, icon and many other fun stuff.   </p>\n\n<p>I am creating some gui program that needs to implement console function with specific graphical interface. Program ordinary works with voice activated commands, so when user is mute/deaf by press of a button console will be implemented so user can communicate with program. </p>\n\n<p>So console should be visible only when user press a key on keyboard, and by implementing console window size must change to compensate for console space since window is fixed size and not resizable.   </p>\n\n<p>So lets say we have some tkinter object:</p>\n\n<pre><code>from __future__ import absolute_import, division, print_function, unicode_literals,with_statement\n\nvStr = lambda x: type(x).__name__ in 'unicode,str'\n\ntry:\n    from Tkinter import Tk\nexcept ImportError:\n    from tkinter import Tk\n\nclass wind(object):\n\n    def __init__(self):\n        self._ = Tk()\n        self._.title('programm')\n        self._.geometry('300x400+1+1')\n\n        self._.bind('&lt;space&gt;', self.change_size)\n        self.change = False\n\n    def change_size(self,event):\n        #some code here\n\n    def init(self):\n        self._.mainloop()\n\napp = wind()\napp.init() \n</code></pre>\n\n<p>How can i change size of an window <code>self._</code> root object on event.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1503531440, "post_id": 45850757, "comment_id": 78659775, "body": "what would reasonable headers be for your original text file?"}, {"owner": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1503531739, "post_id": 45850757, "comment_id": 78659838, "body": "im not sure what you mean. The file doesn&#39;t have any headers but if I were to give it some, the first column would be &quot;atom&quot; the second would be &quot;ppm&quot; and the third would be &quot;error&quot;"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1503531817, "post_id": 45850757, "comment_id": 78659856, "body": "Are you looking for <code>df.describe().T</code>? If you want exactly what you mentioned, you could do a groupby and then call describe."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503532956, "post_id": 45850850, "comment_id": 78660115, "body": "I tried implementing your code and I get this error:"}, {"owner": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503532971, "post_id": 45850850, "comment_id": 78660118, "body": "Traceback (most recent call last):   File &quot;ams.py&quot;, line 8, in &lt;module&gt;     gb = (df.groupby(&quot;Atom&quot;, as_index=False).agg({&quot;ppm&quot;:[&quot;count&quot;,&quot;mean&quot;]}).rename(columns&zwnj;&#8203;={&quot;count&quot;:&quot;nVa&quot;, &quot;mean&quot;:&quot;avgppm&quot;}))   File &quot;/Library/Python/2.7/site-packages/pandas-0.20.3-py2.7-macos&zwnj;&#8203;x-10.11-intel.egg/pa&zwnj;&#8203;ndas/core/generic.py&zwnj;&#8203;&quot;, line 4416, in groupby     **kwargs)   File &quot;/Library/Python/2.7/site-packages/pandas-0.20.3-py2.7-macos&zwnj;&#8203;x-10.11-intel.egg/pa&zwnj;&#8203;ndas/core/groupby.py&zwnj;&#8203;&quot;, line 1699, in groupby     return klass(obj, by, **kwds) KeyError: &#39;Atom&#39;"}, {"owner": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503532992, "post_id": 45850850, "comment_id": 78660126, "body": "if the formatting is too bad, I can edit my question to show my exact error"}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "reply_to_user": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503533097, "post_id": 45850850, "comment_id": 78660149, "body": "Are you using <code>df</code> as I defined it?  I added column names to your example data.  If not, just use <code>df.columns = [&quot;Atom&quot;, &quot;ppm&quot;, &quot;unclear&quot;]</code> to mimic my setup."}, {"owner": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503533452, "post_id": 45850850, "comment_id": 78660246, "body": "I used df  = pd.read_csv(&quot;text.txt&quot;, sep = &#39; &#39;, header = None). The problem is, I can&#39;t use column names to my &quot;text.txt&quot; file, i need to run that text file in another program and it needs to have that format."}, {"owner": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503533478, "post_id": 45850850, "comment_id": 78660249, "body": "got it, I will try that!"}, {"owner": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503533618, "post_id": 45850850, "comment_id": 78660263, "body": "Thank you, this code worked. However with the code you gave, my output gives the first column with indexes starting from zero, how can I get rid of this so that the first column is &quot;Atom&quot;"}, {"owner": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503533704, "post_id": 45850850, "comment_id": 78660277, "body": "also one final question: if I wanted to add more columns would I create them by adding to this piece of code  <code>gb = (df.groupby(&quot;Atom&quot;, as_index=False)         .agg({&quot;ppm&quot;:[&quot;count&quot;,&quot;mean&quot;]})         .rename(columns={&quot;count&quot;:&quot;nVa&quot;, &quot;mean&quot;:&quot;avgppm&quot;}))</code>"}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "reply_to_user": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503533730, "post_id": 45850850, "comment_id": 78660285, "body": "Good!  For the purposes of computation, the index column doesn&#39;t really matter.  But if you want to save to file without the index, use <code>index=False</code>.  Like this: <code>gb.to_csv(&quot;atom.csv&quot;, index=False)</code>"}, {"owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "reply_to_user": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "edited": false, "score": 0, "creation_date": 1503533831, "post_id": 45850850, "comment_id": 78660318, "body": "re: additional columns, you should really read up on the <code>groupby</code> docs i linked to at the end of my answer.  the short answer is yes, but you may want different kinds of aggregation and/or custom aggregation functions.  it&#39;s all definitely possible."}], "tags": [], "owner": {"reputation": 16757, "user_id": 2799941, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/260db848f0eb7e3cd55998969a7a43a4?s=128&d=identicon&r=PG&f=1", "display_name": "andrew_reece", "link": "https://stackoverflow.com/users/2799941/andrew-reece"}, "is_accepted": true, "score": 0, "last_activity_date": 1503532347, "last_edit_date": 1503532347, "creation_date": 1503531974, "answer_id": 45850850, "question_id": 45850757, "link": "https://stackoverflow.com/questions/45850757/how-can-i-read-in-values-from-a-text-file-and-calculate-how-many-times-a-value-r/45850850#45850850", "title": "How can I read in values from a text file and calculate how many times a value repeats and then find the average?", "body": "<p>With <code>df</code> as:</p>\n\n<pre><code>     Atom      ppm  unclear\n0    5.H6  7.89100      0.3\n1    6.H6  7.69300      0.3\n2    7.H8  8.16859      0.3\n3    8.H6  7.44600      0.3\n4    5.H6  7.72158      0.3\n5    9.H8  8.10530      0.3\n6    8.H6  7.65014      0.3\n7   10.H6  7.54000      0.3\n8   12.H6  8.06700      0.3\n9   13.H6  8.04700      0.3\n10  14.H6  7.69624      0.3\n11   6.H6  7.70272      0.3\n12  17.H8  7.16900      0.3\n13  16.H8  8.27957      0.3\n14  18.H6  7.38500      0.3\n15  19.H8  7.65700      0.3\n16  20.H8  7.78512      0.3\n17  21.H8  8.06057      0.3\n</code></pre>\n\n<p>Use <code>groupby()</code> to collect information per-<code>Atom</code>, then apply aggregation functions as desired:</p>\n\n<pre><code>gb = (df.groupby(\"Atom\", as_index=False)\n        .agg({\"ppm\":[\"count\",\"mean\"]})\n        .rename(columns={\"count\":\"nVa\", \"mean\":\"avgppm\"}))\ngb.head()\n     Atom ppm         \n          nVa   avgppm\n0   10.H6   1  7.54000\n1   12.H6   1  8.06700\n2   13.H6   1  8.04700\n3   14.H6   1  7.69624\n4   16.H8   1  8.27957\n</code></pre>\n\n<p>That gives the workflow for grouping and aggregating, but it's not quite in the format you requested.  We can drop the multi-level column structure, although it's not strictly necessary to compute the values you're interested in:</p>\n\n<pre><code>gb.columns = gb.columns.droplevel()\ngb = gb.rename(columns={\"\":\"Atom\"})\n\n     Atom  nVa   avgppm\n0   10.H6    1  7.54000\n1   12.H6    1  8.06700\n2   13.H6    1  8.04700\n3   14.H6    1  7.69624\n4   16.H8    1  8.27957\n5   17.H8    1  7.16900\n6   18.H6    1  7.38500\n7   19.H8    1  7.65700\n8   20.H8    1  7.78512\n9   21.H8    1  8.06057\n10   5.H6    2  7.80629\n11   6.H6    2  7.69786\n12   7.H8    1  8.16859\n13   8.H6    2  7.54807\n14   9.H8    1  8.10530\n</code></pre>\n\n<p>See <a href=\"https://pandas.pydata.org/pandas-docs/stable/groupby.html\" rel=\"nofollow noreferrer\"><code>groupby()</code></a> docs for a full treatment.</p>\n"}], "owner": {"reputation": 189, "user_id": 8290579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1824baf365b4f1dfb33a0de3aae5a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "user8290579", "link": "https://stackoverflow.com/users/8290579/user8290579"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 45850850, "answer_count": 1, "score": 1, "last_activity_date": 1503583676, "creation_date": 1503531242, "last_edit_date": 1503583676, "question_id": 45850757, "link": "https://stackoverflow.com/questions/45850757/how-can-i-read-in-values-from-a-text-file-and-calculate-how-many-times-a-value-r", "title": "How can I read in values from a text file and calculate how many times a value repeats and then find the average?", "body": "<p>I have a text file called text.txt which looks like this: </p>\n\n<pre><code>5.H6 7.891 0.3\n6.H6 7.693 0.3\n7.H8 8.16859 0.3\n8.H6 7.446 0.3\n5.H6 7.72158 0.3\n9.H8 8.1053 0.3\n8.H6 7.65014 0.3\n10.H6 7.54 0.3\n12.H6 8.067 0.3\n13.H6 8.047 0.3\n14.H6 7.69624 0.3\n6.H6 7.70272 0.3\n17.H8 7.169 0.3\n16.H8 8.27957 0.3\n18.H6 7.385 0.3\n19.H8 7.657 0.3\n20.H8 7.78512 0.3\n21.H8 8.06057 0.3\n</code></pre>\n\n<p>I want to create a new output text file which looks like this:</p>\n\n<pre><code> Atom nVa  predppm   avgppm    \n  7.H2   2   7.674   7.853    \n  9.H2   2   7.434   7.458    \n  20.H2  2   7.602   7.898   \n  21.H2  1   7.959   7.898   \n  8.H1'  1   5.363   5.238   \n</code></pre>\n\n<p>Essentially I want to read in values from text.txt and see if values in the first column repeat. For example, <code>5.H6</code> from <code>text.txt</code> repeats in row 1 and 5. The values in the second columns for <code>5.H6</code> are 7.891 and 7.72158, I want to calculate the average for them and put them in a column in my output file under <code>avgppm</code> in my sample output file. Also, in my second column of my sample output file, called <code>nVa</code> I want to count how many times my a value from the first column of <code>text.txt</code> is repeated. For example, <code>5.H6</code> is repeated twice so the second column should be 2 for <code>Atom 5.H6</code>.</p>\n\n<p>Right now, I'm just trying to code to get the first, second and fourth column from my sample output file. But later on I want to add separate columns to my file like <code>predppm</code>, <code>stdev</code>, <code>delta</code>, etc. </p>\n\n<p>This is my current code: </p>\n\n<pre><code>import pandas as pd\n\nfilename = 'text.txt'\ndf = pd.read_csv(filename,sep = r'/s+', header = None)\ndf[df.duplicated([' '], keep=False)]\ndf.sum(axis=1) / len(df.columns)\n\n\ndf.to_csv(\"output.txt\",sep = r'/s+',header=None)\n</code></pre>\n\n<p>I'm not sure how to proceed, I can't test my code out because I keep getting errors. </p>\n\n<p>Edit: Error</p>\n\n<pre><code>  gb = (df.groupby(\"Atom\", as_index=False).agg({\"ppm\":[\"count\",\"mean\"]}).rename(columns={\"count\":\"nVa\", \"mean\":\"avgppm\"}))\n  File \"/Library/Python/2.7/site-packages/pandas-0.20.3-py2.7-macosx-10.11-intel.egg/pandas/core/generic.py\", line 4416, in groupby\n**kwargs)\n  File \"/Library/Python/2.7/site-packages/pandas-0.20.3-py2.7-macosx-10.11-intel.egg/pandas/core/groupby.py\", line 1699, in groupby\nreturn klass(obj, by, **kwds)\n  File \"/Library/Python/2.7/site-packages/pandas-0.20.3-py2.7-macosx-10.11-intel.egg/pandas/core/groupby.py\", line 392, in __init__\nmutated=self.mutated)\n  File \"/Library/Python/2.7/site-packages/pandas-0.20.3-py2.7-macosx-10.11-intel.egg/pandas/core/groupby.py\", line 2690, in _get_grouper\nraise KeyError(gpr)\nKeyError: 'Atom'\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1503531074, "post_id": 45850713, "comment_id": 78659671, "body": "<code>itertools</code> is part of the standard library. You don&#39;t need to install it. Unless you are using some custom build of Python?"}, {"owner": {"reputation": 189, "user_id": 5719502, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bUXs5V4RLU0/AAAAAAAAAAI/AAAAAAAABqQ/xRNG_fkW78Q/photo.jpg?sz=128", "display_name": "K Zombro", "link": "https://stackoverflow.com/users/5719502/k-zombro"}, "edited": false, "score": 0, "creation_date": 1503531206, "post_id": 45850713, "comment_id": 78659701, "body": "Could you add some more description to the question ? I might suggest using <code>import re</code> and setting multiline mode (re.MULTILINE&#182; ), then just carefully constructing 1 pattern... a solution will be easier to present, with a bit more issue description"}, {"owner": {"reputation": 189, "user_id": 8460211, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9d67941e3618b444ccc5b380152041e4?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Apple", "link": "https://stackoverflow.com/users/8460211/johnny-apple"}, "edited": false, "score": 0, "creation_date": 1503531233, "post_id": 45850713, "comment_id": 78659711, "body": "Oh, nice! Thanks! However, this function still is not printing the next line after the line starting with &quot;Password.&quot;"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1503531234, "post_id": 45850713, "comment_id": 78659712, "body": "Regardless, all you need is <code>print(next(f))</code>"}, {"owner": {"reputation": 189, "user_id": 8460211, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9d67941e3618b444ccc5b380152041e4?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Apple", "link": "https://stackoverflow.com/users/8460211/johnny-apple"}, "edited": false, "score": 0, "creation_date": 1503531712, "post_id": 45850713, "comment_id": 78659836, "body": "That does not work either. See my edited post."}], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 8495273, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e0rWMksNGdo/AAAAAAAAAAI/AAAAAAAAAIc/fF2nCJTZYpE/photo.jpg?sz=128", "display_name": "Awaish Kumar", "link": "https://stackoverflow.com/users/8495273/awaish-kumar"}, "edited": false, "score": 0, "creation_date": 1503533997, "post_id": 45851076, "comment_id": 78660367, "body": "according to your description, you are asking for this thing, your code is doing something else."}, {"owner": {"reputation": 189, "user_id": 8460211, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9d67941e3618b444ccc5b380152041e4?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Apple", "link": "https://stackoverflow.com/users/8460211/johnny-apple"}, "edited": false, "score": 0, "creation_date": 1503540809, "post_id": 45851076, "comment_id": 78661876, "body": "Thank you for this! Even though I didn&#39;t use it, it&#39;s helpful to me!"}], "tags": [], "owner": {"reputation": 367, "user_id": 8495273, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-e0rWMksNGdo/AAAAAAAAAAI/AAAAAAAAAIc/fF2nCJTZYpE/photo.jpg?sz=128", "display_name": "Awaish Kumar", "link": "https://stackoverflow.com/users/8495273/awaish-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1503533909, "creation_date": 1503533909, "answer_id": 45851076, "question_id": 45850713, "link": "https://stackoverflow.com/questions/45850713/printing-the-next-line-in-pycharm-with-python-3-6-2/45851076#45851076", "title": "Printing the next line in Pycharm with Python 3.6.2", "body": "<p>you are looking for this one. Cheers:</p>\n\n<pre><code>file = open(\"file\",\"r+\")\nfor line in file:\n    if line.startswith(\"This\"):\n        print(file.readline())\nfile.close()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 8460211, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9d67941e3618b444ccc5b380152041e4?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Apple", "link": "https://stackoverflow.com/users/8460211/johnny-apple"}, "edited": false, "score": 0, "creation_date": 1503540836, "post_id": 45851142, "comment_id": 78661886, "body": "This did the trick! My &quot;next&quot; instance was referring to the wrong thing."}], "tags": [], "owner": {"reputation": 80, "user_id": 6297476, "user_type": "registered", "profile_image": "https://graph.facebook.com/1199052220105806/picture?type=large", "display_name": "Micha\u0142 Gigo\u0144", "link": "https://stackoverflow.com/users/6297476/micha%c5%82-gigo%c5%84"}, "is_accepted": true, "score": 0, "last_activity_date": 1503534348, "creation_date": 1503534348, "answer_id": 45851142, "question_id": 45850713, "link": "https://stackoverflow.com/questions/45850713/printing-the-next-line-in-pycharm-with-python-3-6-2/45851142#45851142", "title": "Printing the next line in Pycharm with Python 3.6.2", "body": "<pre><code>with open(\"C:\\\\Users\\\\MyName\\\\Desktop\\\\BLRP.txt\", \"r+\") as op:\n    instance_of_generator = nonblank_lines(op)\n    for line in instance_of_generator:\n        if line.startswith(\"Computer Name\") or line.startswith(\"ERROR\") or line.startswith(\"ID\"):\n            print(line)\n        elif line.startswith(\"Password\"):\n            print(next(instance_of_generator))\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 8460211, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9d67941e3618b444ccc5b380152041e4?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Apple", "link": "https://stackoverflow.com/users/8460211/johnny-apple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "accepted_answer_id": 45851142, "answer_count": 2, "score": 0, "last_activity_date": 1503713131, "creation_date": 1503530901, "last_edit_date": 1503713131, "question_id": 45850713, "link": "https://stackoverflow.com/questions/45850713/printing-the-next-line-in-pycharm-with-python-3-6-2", "title": "Printing the next line in Pycharm with Python 3.6.2", "body": "<p>I need to be able to print the next line in an opened text file provided the line prior starts with a certain string. The itertools method is not accomplishing what I'd like. Here is a sample of the text from which I'm printing:</p>\n\n<p>Here is the other topic: <a href=\"https://stackoverflow.com/questions/33088234/how-to-print-next-line-in-python\">How to print next line in python</a></p>\n\n<p>I want to print the line after any line that starts with \"Password.\"\nThe itertools islice method does not seem to do much of anything, unless I'm mis-implementing it, nor does <code>print(next(op))</code>. (<code>op</code> is the name of my <code>open(filename)</code>). </p>\n\n<p>Here is my full code:</p>\n\n<pre><code>def nonblank_lines(f):\n    nonempty_lines = []\n    for l in f:\n        line = l.rstrip()\n        if line:\n            yield line.lstrip()\n\nwith open(\"C:\\\\Users\\\\MyName\\\\Desktop\\\\BLRP.txt\", \"r+\") as op:\n    for line in nonblank_lines(op):\n        if line.startswith(\"Computer Name\") or line.startswith(\"ERROR\") or line.startswith(\"ID\"):\n            print(line)\n        elif line.startswith(\"Password\"):\n            ***print(next(op))***\n            #What do I do here?\n    op.close()\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 1165, "user_id": 2855071, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AMDxi.jpg?s=128&g=1", "display_name": "innisfree", "link": "https://stackoverflow.com/users/2855071/innisfree"}, "edited": false, "score": 0, "creation_date": 1503532284, "post_id": 45850694, "comment_id": 78659966, "body": "I don&#39;t understand what you want here. Can you write a minimal working example and make clear what behaviour you want?"}, {"owner": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "reply_to_user": {"reputation": 1165, "user_id": 2855071, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/AMDxi.jpg?s=128&g=1", "display_name": "innisfree", "link": "https://stackoverflow.com/users/2855071/innisfree"}, "edited": false, "score": 0, "creation_date": 1503532756, "post_id": 45850694, "comment_id": 78660074, "body": "i want to have legend box like 2nd image, purple present result as 0, yellow present result as 1"}, {"owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "edited": false, "score": 0, "creation_date": 1503533043, "post_id": 45850694, "comment_id": 78660138, "body": "What is the problem with the code you posted? Did you use this code to generate figure 1?"}, {"owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "edited": false, "score": 0, "creation_date": 1503533404, "post_id": 45850694, "comment_id": 78660229, "body": "You are not calling your method <code>plot_scatter</code>. Instead, you are calling <code>dfScatter</code>, which you may have defined before. This may explain why the changes to <code>plot_scatter</code> do not have an effect."}, {"owner": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "edited": false, "score": 0, "creation_date": 1503534575, "post_id": 45850694, "comment_id": 78660502, "body": "hi, it is my typo. i am calling the correct function but still no legend as what I want"}], "answers": [{"comments": [{"owner": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "edited": false, "score": 0, "creation_date": 1503583726, "post_id": 45853126, "comment_id": 78685970, "body": "i add label into scatter, but still cannt see legend     ax.set_title(&#39;{} vs {}&#39;.format(xcol, ycol))     ax.set_xlabel(xcol)     ax.set_ylabel(ycol)     ax.plot()     ax.legend(loc=&#39;best&#39;)     ax.scatter(df[xcol], df[ycol], c=df.Color, label=df.Color, edgecolors=&#39;none&#39;)"}, {"owner": {"reputation": 1981, "user_id": 7203433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UwHcLcsEtUg/AAAAAAAAAAI/AAAAAAAABYM/2PUMtvGAExk/photo.jpg?sz=128", "display_name": "Josh Karpel", "link": "https://stackoverflow.com/users/7203433/josh-karpel"}, "reply_to_user": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "edited": false, "score": 0, "creation_date": 1503593740, "post_id": 45853126, "comment_id": 78692842, "body": "@jacobcan118 I&#39;ve revised my answer and included a working example."}], "tags": [], "owner": {"reputation": 1981, "user_id": 7203433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UwHcLcsEtUg/AAAAAAAAAAI/AAAAAAAABYM/2PUMtvGAExk/photo.jpg?sz=128", "display_name": "Josh Karpel", "link": "https://stackoverflow.com/users/7203433/josh-karpel"}, "is_accepted": true, "score": 1, "last_activity_date": 1503593709, "last_edit_date": 1503593709, "creation_date": 1503549898, "answer_id": 45853126, "question_id": 45850694, "link": "https://stackoverflow.com/questions/45850694/plot-scatter-with-x-y-title-legend-based-on-different-color/45853126#45853126", "title": "plot scatter with x, y title, legend based on different color", "body": "<p>Revised answer:</p>\n\n<p>Here's sample code that does what I think you want to do, but without a dataframe because I don't have your dataframe:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\n\nfig, ax = plt.subplots()\n\n# this part should get replaced with your dataframe-based calculations\nx = np.linspace(0, 1, 100)\ny = np.random.randint(0, 2, 100)\ncolordict = {0: 'yellow', 1: 'purple'}\ncolor = list(colordict[val] for val in y)\n\nax.scatter(x, y, c = color, label = color)\n\nax.set_title('random walkers empirical $\\mu$ and $\\pm \\sigma$ interval')\nax.set_xlabel('freq')\nax.set_ylabel('type')\n\n# custom patches for the legend\nyellow_patch = mpatches.Patch(color='yellow', label='population 1, result = 0')\npurple_patch = mpatches.Patch(color='purple', label='population 2, result = 1')\nax.legend(handles=[yellow_patch, purple_patch])\n\nplt.show()\n</code></pre>\n\n<p>Unfortunately my previous answer (preserved below) doesn't actually fix the problem, because I didn't understand the example I linked. What you want to do is make custom labels, which is more like <a href=\"https://matplotlib.org/users/legend_guide.html#creating-artists-specifically-for-adding-to-the-legend-aka-proxy-artists\" rel=\"nofollow noreferrer\">this example</a>.</p>\n\n<p>As for the code in your comment, note that you need to call <code>legend</code> <strong>after</strong> all of the plotting commands whose labels you want included in it. I'm not sure why your axis labels and title aren't appearing - they do when I run my version. </p>\n\n<hr>\n\n<p>The below doesn't actually solve the problem, unfortunately.</p>\n\n<p><strike>The legend isn't appearing because none of the elements in your plot have labels. You didn't provide enough code to replicate your plot, but <a href=\"https://matplotlib.org/examples/lines_bars_and_markers/scatter_with_legend.html\" rel=\"nofollow noreferrer\">this example</a> indicates that you should be able to pass <code>label = df.Color</code> to <code>scatter</code> to get the right effect. So your call to <code>scatter</code> would look like:</p>\n\n<pre><code>ax.scatter(df[xcol], df[ycol], c=df.Color, label = df.Color)\n</code></pre>\n\n<p></strike></p>\n"}], "owner": {"reputation": 3408, "user_id": 6373357, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3b870102aa2df81c64374b893f601ba?s=128&d=identicon&r=PG&f=1", "display_name": "jacobcan118", "link": "https://stackoverflow.com/users/6373357/jacobcan118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 0, "accepted_answer_id": 45853126, "answer_count": 1, "score": -1, "last_activity_date": 1503593709, "creation_date": 1503530723, "last_edit_date": 1503534605, "question_id": 45850694, "link": "https://stackoverflow.com/questions/45850694/plot-scatter-with-x-y-title-legend-based-on-different-color", "title": "plot scatter with x, y title, legend based on different color", "body": "<p>I look for some code from internet and find the following function for me to plot based on third column value. like result=0 color yellow, result=1, color=purple.\nBut xlabel,, ylabel, title or legend do not display even I add ax.set_title, ax.set_xlabel, ax.set_ylabel, ax.legend.</p>\n\n<p>how can I plot legend like \"random walkers\" image\" \"blue line\" present mean population 1, \"yellow line\" presents men population 2\nresult=1, yellow\nresult=0, purple</p>\n\n<pre><code>def plot_scatter(df=tmp, xcol='freq', ycol='type', catcol='result'):\n    fig, ax = plt.subplots()\n    categories = np.unique(df[catcol])\n    colors = np.linspace(0, 1, len(categories))\n    colordict = dict(zip(categories, colors))\n\n    df[\"Color\"] = df[catcol].apply(lambda x: colordict[x])\n    ax.set_title('random walkers empirical $\\mu$ and $\\pm \\sigma$ interval')\n    ax.legend(loc='best')\n    ax.set_xlabel(xcol)\n    ax.set_ylabel(ycol)\n    ax.scatter(df[xcol], df[ycol], c=df.Color)\n    return fig\n\nfig = plot_scatter(tmp)\nfig.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MlLgL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MlLgL.png\" alt=\"plot result\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/aNDU4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aNDU4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c", "struct"], "comments": [{"owner": {"reputation": 1133, "user_id": 7790438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd56fe083be9265767941c6a049da6da?s=128&d=identicon&r=PG", "display_name": "Fady Saad", "link": "https://stackoverflow.com/users/7790438/fady-saad"}, "edited": false, "score": 0, "creation_date": 1503531156, "post_id": 45850687, "comment_id": 78659688, "body": "try this code: const char *string = &quot;\\x11\\x11\\x11\\x11&quot;; puts(string);"}, {"owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "reply_to_user": {"reputation": 1133, "user_id": 7790438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd56fe083be9265767941c6a049da6da?s=128&d=identicon&r=PG", "display_name": "Fady Saad", "link": "https://stackoverflow.com/users/7790438/fady-saad"}, "edited": false, "score": 0, "creation_date": 1503531303, "post_id": 45850687, "comment_id": 78659732, "body": "according to this: <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_puts.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/c_standard_library/c_function_puts.htm</a>, <code>puts</code> only print the string in the stdout? I need append it to this other string <code>header</code>."}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503533966, "post_id": 45850687, "comment_id": 78660356, "body": "Have you allocated the memory for <code>header</code> yet?"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1503570960, "post_id": 45850687, "comment_id": 78676425, "body": "You typically <code>memcpy</code> into consecutive locations of a memory block."}, {"owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503579276, "post_id": 45850687, "comment_id": 78682534, "body": "@IgnacioVazquez-Abrams yes (see the update)"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503581107, "post_id": 45850687, "comment_id": 78683896, "body": "Your allocation uses the length of unallocated arrays, so that&#39;s a bad thing. You already know how large most of the fields are."}, {"owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1503581468, "post_id": 45850687, "comment_id": 78684196, "body": "@IgnacioVazquez-Abrams but I not using unallocated arrays, I just trying figure out what the values for each one of elements (in the python code was used <code>struct.pack(...)</code> and <code>.decode(...)</code> functions)"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1503581478, "post_id": 45850687, "comment_id": 78684207, "body": "The reason C doesn&#39;t have a way to do this in strings is because it gives you direct access to the data, and it doesn&#39;t need a text based workaround. You can memcpy blocks of data based on known lengths. Instead of making a bits_pack, you memcpy bits directly, using sizeof(bits). Additionally strlen is obviously wrong because binary data will contain zeroes as data. If you try to use strlen you are using a variable length that won&#39;t work to find a length you already know from the data type itself."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1503581732, "post_id": 45850687, "comment_id": 78684424, "body": "same for strcpy and strcat. You cannot use them for binary data unless you can guarantee that the data never has zeroes, and also has additional zeroes to tell your string functions where to stop."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1503582289, "post_id": 45850687, "comment_id": 78684909, "body": "Just to clarify, you want C code for this struct, not a generic parser based on the format codes used by a python function? A hex dump of this header would help for testing purposes."}], "answers": [{"tags": [], "owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "is_accepted": true, "score": 0, "last_activity_date": 1503585669, "creation_date": 1503585669, "answer_id": 45864530, "question_id": 45850687, "link": "https://stackoverflow.com/questions/45850687/c-equivalent-to-the-pythons-struct-pack/45864530#45864530", "title": "C equivalent to the Python&#39;s struct.pack?", "body": "<p>The first problem is you need to understand is that char* is not a string type. Because you decode hex, you should expect to have any value, including several zeroes. Therefore you need to store the length separately for the binary data.</p>\n\n<p>Of course, it would be much easier in C++, with std::string, which would be much more like python strings (disclaimer, I am a c++ programmer).</p>\n\n<p>Second, do you want to store this buffer, or just stream it? It's much easier if you just stream this to a file (or whatever) by writing these pieces with known size. That's what I'd do in c++ if I wanted to put header in an std::string. And that's what I'd do if I were writing a file in C. Just call fwrite instead of memcpy.</p>\n\n<p>Storing the header in memory means you again must store the length, because it contains arbitrary binary data, and as before, it might have the null character as part of the data. Here's a sample:</p>\n\n<pre><code>int length = sizeof(ver) + prev_block_length + mrkl_root_length + sizeof(time_) + sizeof(bits) + sizeof(nonce);\nchar * header = (char*)malloc(length);\n\nchar * p = header; // placeholder which we advance as we write\nmemcpy(p, &amp;ver, sizeof(ver)); p += sizeof(ver);\nmemcpy(p, prev_block, prev_block_length); p += prev_block_length;\nmemcpy(p, mrkl_root, mrkl_root_length); p += mrkl_root_length;\nmemcpy(p, &amp;time_, sizeof(time_)); p += sizeof(time_);\nmemcpy(p, &amp;bits, sizeof(bits)); p += sizeof(bits);\nmemcpy(p, &amp;nonce, sizeof(nonce)); p += sizeof(nonce);\n\n// and eventually you must free (another good reason to just stream it)\nfree(header);\n</code></pre>\n"}], "owner": {"reputation": 7129, "user_id": 2692962, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/772269476/picture?type=large", "display_name": "Kleber Mota", "link": "https://stackoverflow.com/users/2692962/kleber-mota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 45864530, "answer_count": 1, "score": 0, "last_activity_date": 1503585669, "creation_date": 1503530689, "last_edit_date": 1503579237, "question_id": 45850687, "link": "https://stackoverflow.com/questions/45850687/c-equivalent-to-the-pythons-struct-pack", "title": "C equivalent to the Python&#39;s struct.pack?", "body": "<p>Is there any way to acomplish, using C, the same result acomplished with the function <code>struct.pack(...)</code> from Python? I am trying write with C a code originally written in Python, and this code has a line like that:</p>\n\n<pre><code>header = (struct.pack(\"&lt;L\", ver) + prev_block.decode('hex')[::-1]\n          + mrkl_root.decode('hex')[::-1]\n          + struct.pack(\"&lt;LLL\", time_, bits, nonce))\n</code></pre>\n\n<p>which I want rewrite in C.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I had put this preliminary C code in motion:</p>\n\n<pre><code>char* ver_pack;\nchar* prev_block_pack;\nchar* mkrl_root_pack;\nchar* time_pack;\nchar* bits_pack;\nchar* nonce_pack;\nchar* header = malloc(strlen(ver_pack)+strlen(prev_block_pack)+strlen(mkrl_root_pack)+strlen(time_pack)+strlen(bits_pack)+strlen(nonce_pack));\nstrcpy(header, ver_pack);\nstrcat(header, prev_block_pack);\nstrcat(header, mkrl_root_pack);\nstrcat(header, time_pack);\nstrcat(header, bits_pack);\nstrcat(header, nonce_pack);\n</code></pre>\n\n<p>now I need to figure out the values for each one of the elements in the header, which are:</p>\n\n<pre><code>int ver\nchar* prev_block\nchar* mrkl_root\nunsigned int time_\nunsigned int bits\nunsigned int nonce\n</code></pre>\n"}, {"tags": ["python", "mongodb", "pymongo"], "comments": [{"owner": {"reputation": 149, "user_id": 5285928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c0b16ef524025c2e0f0d606641f73?s=128&d=identicon&r=PG&f=1", "display_name": "Generic Guy", "link": "https://stackoverflow.com/users/5285928/generic-guy"}, "edited": false, "score": 0, "creation_date": 1503675840, "post_id": 45850648, "comment_id": 78728849, "body": "I just want to make sure I am understanding your inner loop correctly. Are you pulling out every entry in the matches collection and comparing it against the current match id to see if it is already in the database?"}, {"owner": {"reputation": 37, "user_id": 8100205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0d25f418d0bcc716c5c2d374180b29?s=128&d=identicon&r=PG&f=1", "display_name": "malsatori", "link": "https://stackoverflow.com/users/8100205/malsatori"}, "reply_to_user": {"reputation": 149, "user_id": 5285928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c0b16ef524025c2e0f0d606641f73?s=128&d=identicon&r=PG&f=1", "display_name": "Generic Guy", "link": "https://stackoverflow.com/users/5285928/generic-guy"}, "edited": false, "score": 0, "creation_date": 1503764781, "post_id": 45850648, "comment_id": 78753754, "body": "Yes. I can post an example of what the JSON looks like if that would help, but I&#39;m checking each match id by all of the match ids that I already have in the database before I add it to the collection of matches that need to be pulled."}, {"owner": {"reputation": 149, "user_id": 5285928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c0b16ef524025c2e0f0d606641f73?s=128&d=identicon&r=PG&f=1", "display_name": "Generic Guy", "link": "https://stackoverflow.com/users/5285928/generic-guy"}, "edited": false, "score": 0, "creation_date": 1503841867, "post_id": 45850648, "comment_id": 78769663, "body": "Instead of iterating through all of them, could you do a query like <code>if matches.find(&#39;game_id&#39;: &#39;match_id&#39;).count() == 0</code> <i>//Match does not exist in the database</i>. Also, I apologize in advance if the .count() for pymongo doesn&#39;t work this way. I have used it with Mongo in other languages but not this. I will go look it up and return to edit."}, {"owner": {"reputation": 37, "user_id": 8100205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0d25f418d0bcc716c5c2d374180b29?s=128&d=identicon&r=PG&f=1", "display_name": "malsatori", "link": "https://stackoverflow.com/users/8100205/malsatori"}, "reply_to_user": {"reputation": 149, "user_id": 5285928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c0b16ef524025c2e0f0d606641f73?s=128&d=identicon&r=PG&f=1", "display_name": "Generic Guy", "link": "https://stackoverflow.com/users/5285928/generic-guy"}, "edited": false, "score": 0, "creation_date": 1504016873, "post_id": 45850648, "comment_id": 78841630, "body": "That did speed it up significantly. Why is this faster than what I was doing when it is still using the &quot;find&quot; function?"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8100205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0d25f418d0bcc716c5c2d374180b29?s=128&d=identicon&r=PG&f=1", "display_name": "malsatori", "link": "https://stackoverflow.com/users/8100205/malsatori"}, "edited": false, "score": 1, "creation_date": 1504022552, "post_id": 45942161, "comment_id": 78845552, "body": "Thanks for the explanation! This does make sense. My only other question would be if I am using the matches.find({&#39;game_id&#39;: match_id}), and the &#39;game_id&#39; is an index, does that make it faster and it just isn&#39;t as fast as the .count() function?"}, {"owner": {"reputation": 149, "user_id": 5285928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c0b16ef524025c2e0f0d606641f73?s=128&d=identicon&r=PG&f=1", "display_name": "Generic Guy", "link": "https://stackoverflow.com/users/5285928/generic-guy"}, "reply_to_user": {"reputation": 37, "user_id": 8100205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0d25f418d0bcc716c5c2d374180b29?s=128&d=identicon&r=PG&f=1", "display_name": "malsatori", "link": "https://stackoverflow.com/users/8100205/malsatori"}, "edited": false, "score": 0, "creation_date": 1504023073, "post_id": 45942161, "comment_id": 78845888, "body": "So the .count() just piggybacks off of <code>matches.find({&#39;game_id&#39;: match_id})</code>, it tells you how many documents that <code>find()</code> found. If you wanted to, you could just check if <code>matches.find({&#39;game_id&#39;: match_id})</code> returns a nonempty array or is populated by some data. The real key is that we have a targeted search in the database instead of using <code>matches.find({})</code> and getting all of the results. Also, just because I am curious, how much was the speed up?"}, {"owner": {"reputation": 37, "user_id": 8100205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0d25f418d0bcc716c5c2d374180b29?s=128&d=identicon&r=PG&f=1", "display_name": "malsatori", "link": "https://stackoverflow.com/users/8100205/malsatori"}, "edited": false, "score": 0, "creation_date": 1504057622, "post_id": 45942161, "comment_id": 78860028, "body": "Before I started letting the code run I had ~130,000 entries and it was taking around 7 seconds every time it printed. After I updated it to use .count() it is taking around .1 second, or a tenth of a second, per iteration. A lot faster! Up to around 485,000 entries now."}], "tags": [], "owner": {"reputation": 149, "user_id": 5285928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c0b16ef524025c2e0f0d606641f73?s=128&d=identicon&r=PG&f=1", "display_name": "Generic Guy", "link": "https://stackoverflow.com/users/5285928/generic-guy"}, "is_accepted": true, "score": 1, "last_activity_date": 1504018428, "last_edit_date": 1504018428, "creation_date": 1504018037, "answer_id": 45942161, "question_id": 45850648, "link": "https://stackoverflow.com/questions/45850648/how-to-speed-up-this-pymongo-query-loop/45942161#45942161", "title": "How to speed up this PyMongo query/loop", "body": "<p>Instead of iterating through all of them one at a time, you can do a query like: <br><br>\n<code>if matches.find('game_id': 'match_id').count() == 0 //Match does not exist in the database.</code> <br><br> \nSo you were having the database return every single document in the matches collection, which I think is the database that has ~95,000 entries (correct me if I am wrong), and then iterating through each of them to check if the id already existed. So that means: <br></p>\n\n<ol>\n<li>~95,000 iterations by the database</li>\n<li>~95,000 iterations by your program checking for a matching id</li>\n</ol>\n\n<p>So you are iterating ~190,000 times, and that is not including all of the overhead of your program storing and fetching the database results for you to iterate through.</p>\n\n<p>However, by using <code>matches.find().count()</code>, you are putting the databases indexes to work for you. Instead of iterating through all 95,000 documents sequentially, the database can use its indexes to see if what you are trying to find exists much faster. Additionally, you don't have to iterate the additional 95,000 times once the database returns the value of <code>.count()</code>, since you only need an if statement to see if that value is 0 or 1. This saves iterations and reduces the overhead of your program significantly, thus speeding up the executing. <br><br> I am not sure I made that clear enough, so please ask questions in the comments to make sure you fully understand what is going on.</p>\n"}], "owner": {"reputation": 37, "user_id": 8100205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0d25f418d0bcc716c5c2d374180b29?s=128&d=identicon&r=PG&f=1", "display_name": "malsatori", "link": "https://stackoverflow.com/users/8100205/malsatori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 45942161, "answer_count": 1, "score": 1, "last_activity_date": 1504018428, "creation_date": 1503530234, "question_id": 45850648, "link": "https://stackoverflow.com/questions/45850648/how-to-speed-up-this-pymongo-query-loop", "title": "How to speed up this PyMongo query/loop", "body": "<p>I am using the Riot API for League of Legends to make pulls in Python. I have one collection that is only IDs for matchmade games that I have not pulled from the API and another that is the pulled matchmade games. Altogether I currently have 94,040 pulled matches and 224,346 match IDs that I have not pulled yet.</p>\n\n<p>In my code I am checking out profiles of people for new match IDs to add against the matches I already have before adding it to the collection of IDs I haven't pulled yet. It is taking around 7 seconds for each iteration through the second collection.find, and I am not sure why. I have both of the collections indexed, and when I was using collection.find({}).sort({}) it was actually taking longer for some reason.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import pymongo\nimport time\n\n\nclient = pymongo.MongoClient('mongodb://localhost')\nmatch_db = client.matched_games\nsummoner_db = client.summoner_match_history\nmatch_id_db = client.match_id\n\nmatches = match_db.matches\nsummoners = summoner_db.summoners\nmatch_id = match_id_db.match\n\n\ndef main():\n    for matchid in summoners.find({}, {'matches.gameId': 1, '_id': 0}, no_cursor_timeout=True):\n        timer = time.time()\n        try:\n            for match in matchid['matches']:\n                print(match)\n                match = match['gameId']\n                for k in matches.find({}):\n                    k = k['gameId']\n                    if k == match:\n                        print(time.time() - timer)\n                        timer = time.time()\n                        print('Already have match #' + str(k))\n                        break\n                else:\n                    print(time.time() - timer)\n                    timer = time.time()\n                    print('Inserting match #' + str(match) + '.')\n                    match_id.insert({'match_id': match})\n        except KeyError as e:\n            print(e)\n            pass\n        except pymongo.errors.DuplicateKeyError as e:\n            # print(e)\n            pass\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "image", "tkinter", "python-imaging-library"], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 5628391, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac8ff43549f62a663ecebd75b236afa2?s=128&d=identicon&r=PG&f=1", "display_name": "TheDude", "link": "https://stackoverflow.com/users/5628391/thedude"}, "is_accepted": true, "score": 1, "last_activity_date": 1505511174, "creation_date": 1505511174, "answer_id": 46247743, "question_id": 45850611, "link": "https://stackoverflow.com/questions/45850611/display-multiple-images-on-background-tkinter-and-pil/46247743#46247743", "title": "Display multiple images on background tkinter and PIL?", "body": "<p>Credits going to joaquin who answered on \n<a href=\"https://stackoverflow.com/questions/13637028/adding-a-background-image-in-python\" title=\"Here\">here</a>!\nWhat I changed is: I created a Canvas and created the background image on the canvas instead of generating a label.</p>\n\n<pre><code>#in sightstone(event) change following:\nsward = tk.Label(Canvas, image=img, compound=tk.CENTER)\n#then in main:\nCanvas.create_image(384, 405, image=mapimg)\nCanvas.bind(\"&lt;Control-Button-1&gt;\", sightstone)\nCanvas.pack(expand = 'yes', fill = 'both')\n</code></pre>\n\n<p>Now it's working all fine. =^)</p>\n"}], "owner": {"reputation": 55, "user_id": 5628391, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac8ff43549f62a663ecebd75b236afa2?s=128&d=identicon&r=PG&f=1", "display_name": "TheDude", "link": "https://stackoverflow.com/users/5628391/thedude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1866, "favorite_count": 0, "accepted_answer_id": 46247743, "answer_count": 1, "score": 0, "last_activity_date": 1505511174, "creation_date": 1503529942, "last_edit_date": 1503531651, "question_id": 45850611, "link": "https://stackoverflow.com/questions/45850611/display-multiple-images-on-background-tkinter-and-pil", "title": "Display multiple images on background tkinter and PIL?", "body": "<p>I try to build a gui with tkinter to put words on a map for games like League of Legends etc.\nIt's amazing how fast you can create such a gui with tkinter but I run into a problem that I can't solve alone as it seems:</p>\n\n<p>Function for the click event (Create word picture on Canvas/map):</p>\n\n<pre><code>def sightstone(event):\n i = Image.open('Sightstone_item.png')\n i = i.resize((10, 10), Image.ANTIALIAS)\n img = ImageTk.PhotoImage(i)\n sword = tk.Label(panel, image=img, compound=tk.CENTER)\n sword.place(x=event.x, y=event.y, width=10, height=10)\n sword.image = img\n n = len(words) + 1\n string = 'sword '\n words.update({string + '%d' % n: [(event.x, event.y)]})\n dump.update({string + '%d' % n: [sword, img, i]})\n print('clicked at', event.x, event.y)\n</code></pre>\n\n<p>Rest to set it up:</p>\n\n<pre><code>window = tk.Tk()\nCanvas = tk.Canvas(window, width=768, height=810)\nimg = Image.open('srift.jpg')\nimg = img.resize((768, 810), Image.ANTIALIAS)\nmapimg = ImageTk.PhotoImage(img)\npanel = tk.Label(window, image=mapimg)\npanel.bind(\"&lt;Control-Button-1&gt;\", sightstone)\npanel.place(x=0, y=0, relwidth=1, relheight=1)\ni = Image.open('Sightstone_item.png')\ni = i.resize((10, 10), Image.ANTIALIAS)\nimg = ImageTk.PhotoImage(i)\nsword1 = tk.Label(panel, image=img, compound=tk.CENTER)\nsword1.place(x=384, y=405, width=10, height=10)\nsword1.image = img\nsword2 = tk.Label(panel, image=img, compound=tk.CENTER)\nsword2.place(x=405, y=405, width=10, height=10)\nsword2.image = img\nCanvas.pack()\nwords = {}; dump = {}; string = ''\nCanvas.find_all()\nwindow.mainloop()\n</code></pre>\n\n<p>Note that I create sword1 and 2 only to show how I want it to be. But if I <kbd>ctrl</kbd>+left click to create another word sword1 and 2 disappear. It's very important that I get the event.x and event.y or coordinates of the words as I want to do some stuff with it.</p>\n"}, {"tags": ["python", "json", "parsing", "encoding"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1503530357, "post_id": 45850586, "comment_id": 78659529, "body": "Why are you doing individual appends to a file? It will be difficult to produce a valid json this way. Rather, build the data-structure up in memory, <i>then serialize the whole thing into json</i>."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1503530741, "post_id": 45850586, "comment_id": 78659606, "body": "The for-loop should create a single list of dicts. This list should then be added to the root dict: <code>data = {&#39;acList&#39;: lst}</code>. Finally, the root dict should be dumped to the file."}], "answers": [{"tags": [], "owner": {"reputation": 1851, "user_id": 4177078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95c881f10920eedf522afae7bc193d6c?s=128&d=identicon&r=PG&f=1", "display_name": "rojeeer", "link": "https://stackoverflow.com/users/4177078/rojeeer"}, "is_accepted": true, "score": 1, "last_activity_date": 1503531484, "creation_date": 1503531484, "answer_id": 45850788, "question_id": 45850586, "link": "https://stackoverflow.com/questions/45850586/encoding-and-iterating-json-with-python-but-multiple-root-elements/45850788#45850788", "title": "Encoding and iterating json with python but multiple root elements", "body": "<p>As the comments say, your loop logical is wrong. To output JSON string as you expected, your target <code>data</code> should be a structure like <code>data=dict(acList=[object ...])</code>. For your case, you even do not need the loop, the list comprehension is enough:</p>\n\n<pre><code>data = dict(acList=[\n    {\n    \"Icao\": icao[count],\n    \"Alt\": alt[count],\n    \"GAlt\": alt[count],\n    \"InHg\": 0,\n    \"AltT\": 0,\n    \"Call\": call[count],\n    \"Lat\": lat[count],\n    \"Long\": long[count],\n    \"Mlat\": False,\n    \"Tisb\": False,\n    \"Spd\": speed[count],\n    \"Trak\": track[count],\n    \"TrkH\": False,\n    ....\n    } for count in len(keys)]\n)\n</code></pre>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 229, "user_id": 6924670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aaf194fdedc62341b8ff998b85aebd10?s=128&d=identicon&r=PG&f=1", "display_name": "antonioag", "link": "https://stackoverflow.com/users/6924670/antonioag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 45850788, "answer_count": 1, "score": 0, "last_activity_date": 1503531484, "creation_date": 1503529712, "question_id": 45850586, "link": "https://stackoverflow.com/questions/45850586/encoding-and-iterating-json-with-python-but-multiple-root-elements", "title": "Encoding and iterating json with python but multiple root elements", "body": "<p>Good evening everyone, \nI have python script which writes some data of a list to a json file. The script iterates through the list and write the json file, it works but I have a problem: the root element gets iterated too and it gets written thousand of times in json file so it becomes invalid.\nThis is part how json should look like:</p>\n\n<pre><code>{\n   \"acList\": [{\n      \"Icao\": \"400025\",\n      \"Alt\": 24475,\n      \"GAlt\": 24475,\n      \"AltT\": 0,\n      \"Call\": \"TEST1234\",\n      \"Tisb\": false,\n      \"TrkH\": false,\n      \"Sqk\": \"0644\",\n      \"Help\": false,\n      \"VsiT\": 0,\n      \"Gnd\": false,\n      \"SpdTyp\": 0,\n      \"CallSus\": false,\n      \"Trt\": 1\n  },\n  {\n     \"Icao\": \"49528A\",\n     \"Alt\": 17375,\n     \"GAlt\": 17632,\n     \"InHg\": 30.177166,\n     \"AltT\": 0,\n     \"Call\": \"TAP362\",\n     \"Lat\": 50.813118,\n     \"Long\": -1.117325,\n     \"Mlat\": false,\n     \"Tisb\": false,\n     \"Spd\": 357.0,\n     \"Trak\": 39.9,\n     \"TrkH\": false,\n     \"Sqk\": \"7473\",\n     \"Help\": false,\n     \"Vsi\": -1472,\n     \"VsiT\": 0,\n     \"Gnd\": false,\n     \"SpdTyp\": 0,\n     \"CallSus\": false,\n     \"Trt\": 2\n  }]\n} \n</code></pre>\n\n<p>While this is what I get:</p>\n\n<pre><code>{\n    \"acList\": [\n      {\n     \"GAlt\": 33975,\n     \"Mlat\": false,\n     \"Tisb\": false,\n     \"Trt\": 1,\n     \"Help\": false,\n     \"InHg\": 0,\n     \"CallSus\": false,\n     \"Long\": 17.1752,\n     \"TrkH\": false,\n     \"Icao\": \"02A196\",\n     \"Sqk\": \"3710\",\n     \"Call\": \"TU217\",\n     \"Trak\": 261,\n     \"Gnd\": false,\n     \"Lat\": 37.8024,\n     \"Vsi\": 0,\n     \"Alt\": 33975,\n     \"AltT\": 0,\n     \"Spd\": 428,\n     \"SpdTyp\": 0,\n     \"VsiT\": 0\n   }\n ]\n  }{\n     \"acList\": [\n      {\n     \"GAlt\": 0,\n     \"Mlat\": false,\n     \"Tisb\": false,\n     \"Trt\": 1,\n     \"Help\": false,\n     \"InHg\": 0,\n     \"CallSus\": false,\n     \"Long\": 14.4933,\n     \"TrkH\": false,\n     \"Icao\": \"4D2027\",\n     \"Sqk\": \"2704\",\n     \"Call\": \"KM103\",\n     \"Trak\": 113,\n     \"Gnd\": false,\n     \"Lat\": 35.8478,\n     \"Vsi\": 0,\n     \"Alt\": 0,\n     \"AltT\": 0,\n     \"Spd\": 0,\n     \"SpdTyp\": 0,\n     \"VsiT\": 0\n   }\n ]\n }{\n</code></pre>\n\n<p>As you can see I got the root element repeated and repeated. What I should achieve is keeping only the first one root element and the right punctuation of course. This is my actual code in Python:</p>\n\n<pre><code>count = 0\nfor hex in keys:\n    data = {\n        \"acList\": [{\n        \"Icao\": icao[count],\n        \"Alt\": alt[count],\n        \"GAlt\": alt[count],\n        \"InHg\": 0,\n        \"AltT\": 0,\n        \"Call\": call[count],\n        \"Lat\": lat[count],\n        \"Long\": long[count],\n        \"Mlat\": False,\n        \"Tisb\": False,\n        \"Spd\": speed[count],\n        \"Trak\": track[count],\n        \"TrkH\": False,\n        \"Sqk\": sqk[count],\n        \"Help\": False,\n        \"Vsi\": vsi[count],\n        \"VsiT\": 0,\n        \"Gnd\": False,\n        \"SpdTyp\": 0,\n        \"CallSus\": False,\n        \"Trt\": count + 1\n        }]\n     }\n   count = count + 1\n   jsonData = json.dumps(data, indent=2, separators=(',', ': '))\n   print(jsonData)\n   with open('aircraft.json', 'a') as f:\n      f.write(jsonData)\n</code></pre>\n\n<p>Sorry for the extremely long post, I hope you can help me. Thank you!</p>\n"}, {"tags": ["python", "nlp"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1503529873, "post_id": 45850553, "comment_id": 78659428, "body": "What is <code>words</code>?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1503530503, "post_id": 45850553, "comment_id": 78659557, "body": "Please provide a more descriptive title. Regardless, you meant <i>natural language processing</i>, which isn&#39;t the same thing as <i>natural language programming</i>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1503530992, "post_id": 45850553, "comment_id": 78659652, "body": "Also, this is a common error. Did you try googling it? What did you find? Did it help? If not, how did it fail to help? This is not a debugging service. You need to provide some more effort to a question than just dumping your code and an error message."}, {"owner": {"reputation": 71, "user_id": 4569574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba56ee0df4bb577f3d88cb0a013085cd?s=128&d=identicon&r=PG&f=1", "display_name": "s7c", "link": "https://stackoverflow.com/users/4569574/s7c"}, "edited": false, "score": 0, "creation_date": 1503542829, "post_id": 45850553, "comment_id": 78662318, "body": "Why do you think I meant &quot;natural language processing&quot;? &quot;Did you try googling it? What did you find? Did it help? If not, how did it fail to help? &quot; Maybe this is not a debugging device but it&#39;s not a place for dogmatism and demagogy either"}, {"owner": {"reputation": 71, "user_id": 4569574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba56ee0df4bb577f3d88cb0a013085cd?s=128&d=identicon&r=PG&f=1", "display_name": "s7c", "link": "https://stackoverflow.com/users/4569574/s7c"}, "edited": false, "score": 0, "creation_date": 1503543472, "post_id": 45850553, "comment_id": 78662489, "body": "as I said the error appears when I compile the function and probably it would have helped mentioning that it related to boolean condition which needs to be approached in a more optimum manner. But not having a very deep understanding of the programming field I don&#39;t know how could I change my function it order to avoid the error...with this comment I complete every constructive idea which comes into my mind..."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 4569574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba56ee0df4bb577f3d88cb0a013085cd?s=128&d=identicon&r=PG&f=1", "display_name": "s7c", "link": "https://stackoverflow.com/users/4569574/s7c"}, "is_accepted": false, "score": 0, "last_activity_date": 1503603720, "creation_date": 1503603720, "answer_id": 45869699, "question_id": 45850553, "link": "https://stackoverflow.com/questions/45850553/natural-language-programming/45869699#45869699", "title": "Natural Language Programming", "body": "<p>silly mistake. I forgot the iteration factor over the train_comb series</p>\n\n<pre><code>new_train_comb = []\nfor i in range(0, len(train_comb.index)):\n     new_train_comb.append(news_to_words(train_comb[i]))\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4569574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ba56ee0df4bb577f3d88cb0a013085cd?s=128&d=identicon&r=PG&f=1", "display_name": "s7c", "link": "https://stackoverflow.com/users/4569574/s7c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1503603720, "creation_date": 1503529498, "last_edit_date": 1503546538, "question_id": 45850553, "link": "https://stackoverflow.com/questions/45850553/natural-language-programming", "title": "Natural Language Programming", "body": "<p>I'm trying different ways of approaching: <a href=\"https://www.kaggle.com/aaron7sun/stocknews\" rel=\"nofollow noreferrer\">https://www.kaggle.com/aaron7sun/stocknews</a> \nThe below code gives this error: \"ValueError: ('The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().', u'occurred at index 0')\"</p>\n\n<pre><code>    import panda as pd\nfrom bs4 import BeautifulSoup             \nimport re\nimport nltk\nnltk.download()\nfrom nltk.corpus import stopwords \ndata = pd.read_csv(\"/Users/s7c/Documents/Untitled Folder/Combined_News_DJIA.csv/Combined_News_DJIA.csv\") \ndata.info()\n\ndef news_to_words(reddit_news):\n    # 1. Remove HTML\n    newstxt = BeautifulSoup(reddit_news).get_text() \n    #remove non-letters\n    ltrs = re.sub(\"[^a-zA-Z]\", ' ', newstxt)\n    #convert to lower case/split into individual words\n    wrd = ltrs.lower().split()\n    #In Python, searching a set is much faster than searching\n    #   a list, so convert the stop words to a set\n    st = set(stopwords.words(\"english\"))                  \n    #Remove stop words\n    meaningful_words = [w for w in wrd if not w in st]   \n    #Join the words back into one string separated by space, \n    # and return the result.\n    return(\" \".join( meaningful_words)) \n\ntrain = data[data['Date'] &lt; '2015-01-01']\ntest = data[data['Date'] &gt; '2014-12-31']\n\n#method of combining all headlines\ntrain_comb=train.iloc[:,2:27].apply(lambda row: ''.join(str(row.values)), axis=1)\ntest_comb=test.iloc[:,2:27].apply(lambda row: ''.join(str(row.values)), axis=1)\n\nnew_train_comb = []\nfor i in range(0, len(train_comb)):\n     new_train_comb.append(news_to_words(train_comb))\n</code></pre>\n\n<p>The error comes when I try to iterate over the function...\nAny help much appreciated</p>\n"}, {"tags": ["python", "json", "urllib"], "comments": [{"owner": {"reputation": 1343, "user_id": 3185502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65699a0d998330d47145a96b2b54b2?s=128&d=identicon&r=PG&f=1", "display_name": "Vasif", "link": "https://stackoverflow.com/users/3185502/vasif"}, "edited": false, "score": 2, "creation_date": 1503529642, "post_id": 45850533, "comment_id": 78659369, "body": "i think requests library is very popular."}, {"owner": {"reputation": 1133, "user_id": 7790438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd56fe083be9265767941c6a049da6da?s=128&d=identicon&r=PG", "display_name": "Fady Saad", "link": "https://stackoverflow.com/users/7790438/fady-saad"}, "edited": false, "score": 0, "creation_date": 1503530134, "post_id": 45850533, "comment_id": 78659484, "body": "As stated in the urllib2 documentation:  The urllib2 module has been split across several modules in Python 3 named urllib.request and urllib.error. The 2to3 tool will automatically adapt imports when converting your sources to Python 3."}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1503533323, "post_id": 45850533, "comment_id": 78660202, "body": "What is this problem you are talking about? You can, of course, do this with the standard library <code>urllib</code> package. You just have to import the modules the right way."}, {"owner": {"reputation": 1041, "user_id": 784304, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4ba3ee04edff223cfa334051b97bdd50?s=128&d=identicon&r=PG", "display_name": "Bruce Whealton", "link": "https://stackoverflow.com/users/784304/bruce-whealton"}, "edited": false, "score": 0, "creation_date": 1503776293, "post_id": 45850533, "comment_id": 78757236, "body": "Where is duplicate?  I had problem with urllib.urlopen(url).  requests.get(url) works fine.  If I want to get the data from a form and pass it to a get request: (1) should I use request.args.get(query) or request.form.get(query)"}], "answers": [{"comments": [{"owner": {"reputation": 1041, "user_id": 784304, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4ba3ee04edff223cfa334051b97bdd50?s=128&d=identicon&r=PG", "display_name": "Bruce Whealton", "link": "https://stackoverflow.com/users/784304/bruce-whealton"}, "edited": false, "score": 0, "creation_date": 1503774921, "post_id": 45850579, "comment_id": 78756846, "body": "What does urllib.parse.quote() do?  Do I need to escape any characters when getting data from a form before making the get request?"}], "tags": [], "owner": {"reputation": 1343, "user_id": 3185502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c65699a0d998330d47145a96b2b54b2?s=128&d=identicon&r=PG&f=1", "display_name": "Vasif", "link": "https://stackoverflow.com/users/3185502/vasif"}, "is_accepted": true, "score": 5, "last_activity_date": 1503529671, "creation_date": 1503529671, "answer_id": 45850579, "question_id": 45850533, "link": "https://stackoverflow.com/questions/45850533/what-python-module-replaces-urllib2-for-use-with-python-3-and-flask/45850579#45850579", "title": "What python module replaces urllib2 for use with python 3 and flask?", "body": "<p>You can use <code>requests</code> library that has popularly cleaner interface to do http operations.</p>\n\n<p>URL for the library.\n<a href=\"http://www.python-requests.org/en/master/\" rel=\"noreferrer\">http://www.python-requests.org/en/master/</a></p>\n\n<p>You can do </p>\n\n<pre><code>pip install requests\n</code></pre>\n\n<p>on your shell/cmd to install.</p>\n\n<p>In code,</p>\n\n<pre><code>import requests\nresponse = requests.get(WEATHER_URL.format(query))\nweather = response.json() # or something as easy as this.\n</code></pre>\n"}], "owner": {"reputation": 1041, "user_id": 784304, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4ba3ee04edff223cfa334051b97bdd50?s=128&d=identicon&r=PG", "display_name": "Bruce Whealton", "link": "https://stackoverflow.com/users/784304/bruce-whealton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 1, "closed_date": 1503584607, "accepted_answer_id": 45850579, "answer_count": 1, "score": 4, "last_activity_date": 1504354167, "creation_date": 1503529188, "last_edit_date": 1504354167, "question_id": 45850533, "link": "https://stackoverflow.com/questions/45850533/what-python-module-replaces-urllib2-for-use-with-python-3-and-flask", "closed_reason": "Duplicate", "title": "What python module replaces urllib2 for use with python 3 and flask?", "body": "<p>Actually, the question might be better worded as a request for a best practice for accomplishing this.  It is frustrating because this should be easy.</p>\n\n<p>I am following a tutorial in the book Flask by Example.  I am using the latest version of python 3.  The urllib2 used in the text cannot be found for python 3.  From the text, we need urllib2 to download the data, and urllib to correctly encode the parameters.  Just one function, get_weather because I cannot find an updated approach that works.</p>\n\n<p>I will list the relevant lines of code to show what I am trying to accomplish.  I am using the latest version of flask with python 3.  I won't list the template file, as the problem did not show up until I tried to download a json api.  </p>\n\n<p>So, the first changes to the file, include imports for urllib and json.  The book is from 2015 when urllib2 was available.  We are trying to get the Weather from openwheathermap.org.  Since I could not find urllib2, I modified the book's code slightly.  </p>\n\n<p>I have</p>\n\n<pre><code>WEATHER_URL = \"http://api.openweathermap.org/data/2.5/weather?q={}&amp;APPID=myappid\"\n\ndef get_weather(query):\n  query = urllib.parse.quote(query)\n  url = WEATHER_URL.format(query)\n  data = urllib.request.urlopen(url).read()\n  parsed = json.loads(str(data))\n  weather = None\n  if parsed.get('weather'):\n    weather = {'description': parsed['weather'][0]['description'],\n               'temperature': parsed['main']['temp'],\n               'city': parsed['name'],\n               'country': parsed['sys']['country']\n               }\n  return weather\n</code></pre>\n\n<p>Any advice would be appreciated.<br>\nThanks,\nBruce</p>\n"}, {"tags": ["python", "text"], "comments": [{"owner": {"reputation": 1956, "user_id": 2027146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/mrrIp.jpg?s=128&g=1", "display_name": "Milk", "link": "https://stackoverflow.com/users/2027146/milk"}, "edited": false, "score": 0, "creation_date": 1503529122, "post_id": 45850516, "comment_id": 78659229, "body": "What is the grid in your text file? The above generates a grid. If you already have a grid, the above code is redundant for you."}, {"owner": {"reputation": 11, "user_id": 8508443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0320ff3b9f0a0c0bda8097e7cc359b?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/8508443/chris"}, "reply_to_user": {"reputation": 1956, "user_id": 2027146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/mrrIp.jpg?s=128&g=1", "display_name": "Milk", "link": "https://stackoverflow.com/users/2027146/milk"}, "edited": false, "score": 0, "creation_date": 1503530254, "post_id": 45850516, "comment_id": 78659509, "body": "Inside the grid.txt is a line of letters with words in them"}, {"owner": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "edited": false, "score": 0, "creation_date": 1503530607, "post_id": 45850516, "comment_id": 78659575, "body": "Is the grid.txt already a word search?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1503531516, "post_id": 45850516, "comment_id": 78659790, "body": "@chris. Replace this line of code <code>for word in [&quot;HELLO&quot;, &quot;THERE&quot;, &quot;AGAIN&quot;]:</code> with this line <code>for word in open(&#39;mywordfile.txt&#39;).read().split():</code>."}, {"owner": {"reputation": 11, "user_id": 8508443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0320ff3b9f0a0c0bda8097e7cc359b?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/8508443/chris"}, "reply_to_user": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "edited": false, "score": 0, "creation_date": 1503531624, "post_id": 45850516, "comment_id": 78659820, "body": "yes it is, there are a few words in there like active, string, lap. I will add then onces i find out how to input my own grid @whackamadoodle3000"}], "owner": {"reputation": 11, "user_id": 8508443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0320ff3b9f0a0c0bda8097e7cc359b?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/8508443/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503530314, "creation_date": 1503529034, "last_edit_date": 1503530314, "question_id": 45850516, "link": "https://stackoverflow.com/questions/45850516/using-text-files-for-word-search-python", "title": "Using text files for word search python", "body": "<p>I want to create a word search generator but I'm finding it a little hard. Ive looked online and found this word search generator which works well but i would like to use my own grid from a text file. Is there way I can code this and place my text file instead of random choice letters. </p>\n\n<pre><code>##while True:\n##    intext=input('Enter file name: ')\n##    \n##    if not intext=='grid.txt':\n##        print(\"No such file was found! Enter file name.\")\n##        continue\n##    else:\n##\n##        break\n##grid= open(intext,'r')\n\n\nimport string\nimport random\n\nwidth = 12\nheight = 12\n\ndef put_word(word,grid):\n    word = random.choice([word,word[::-1]])\n\n    d = random.choice([[1,0],[0,1],[1,1]])\n    xsize = width  if d[0] == 0 else width  - len(word)\n    ysize = height if d[1] == 0 else height - len(word)\n\n    x = random.randrange(0,xsize)\n    y = random.randrange(0,ysize)\n\n    print([x,y])\n\n    for i in range(0,len(word)):\n        grid[y + d[1]*i][x + d[0]*i] = word[i]\n    return grid\n\ngrid = [[random.choice(string.ascii_uppercase) for i in range(0,width)] for j in range(0,height)]\n\nfor word in [\"HELLO\", \"THERE\", \"AGAIN\"]:\n    grid = put_word(word, grid)\n\nprint(\"\\n\".join(map(lambda row: \" \".join(row), grid))\n</code></pre>\n\n<p>in the grid.txt files are:</p>\n\n<pre><code>xmfycxvtljlqbbybkoumjqwbt\ncaubmeknbeydqmcnzyjpvrank\naqactivexnyvwdvcoshoyaohg\npaghzkctudptjdphsztprhttl\nsbsnakjwqbouftmgnjqbtlinu\ntsewohvobdsduqjiffkyylodo\noukwwefroyamapmlrrpvdolop\ncqkfxtlksjvtmtrsbycmqrrri\nkfervlqidqaxaoanfqjlmcpjh\nyoyywrbpfcjlfbcbbcoecspwl\ntwbxetyuyufvvmauawjmbwlqh\ntxokdexmdbtgvhpsvsqtmljdx\ndcatenrehteoxqdgeueljtrrn\njarteqvtxejfsqddkbuhcysfq\nhpdrowssapxtrxhpdxcdhicon\n</code></pre>\n"}, {"tags": ["python", "iterator"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1503529133, "post_id": 45850493, "comment_id": 78659232, "body": "Did you try <code>itertools.chain</code>?"}, {"owner": {"reputation": 5954, "user_id": 230392, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/uwtL7.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/230392/jeff"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1503529371, "post_id": 45850493, "comment_id": 78659306, "body": "@PaulRooney I looked at that but looks like it will process the first iterator then the second.  I need first element of the first iterator then all of the second depending on the first.  Then second of the first then all of the second again.  I&#39;ll take a look at <code>chain</code> again though."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1503529866, "post_id": 45850493, "comment_id": 78659425, "body": "It is long (there are three parts) but this pycon video might be of interest...<a href=\"http://pyvideo.org/pycon-us-2009/pycon-2009--a-curious-course-on-coroutines-and-co.html\" rel=\"nofollow noreferrer\">A Curious Course on Coroutines and Concurrency</a> - there are som producer/consumer examples in there."}], "answers": [{"comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1503530047, "post_id": 45850593, "comment_id": 78659458, "body": "yielding rather than returning make all the difference."}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 2, "last_activity_date": 1503530051, "last_edit_date": 1503530051, "creation_date": 1503529781, "answer_id": 45850593, "question_id": 45850493, "link": "https://stackoverflow.com/questions/45850493/how-to-chain-iterators/45850593#45850593", "title": "How to &quot;chain&quot; iterators?", "body": "<p>Since the file object is itself an iterator, you don't necessarily need to implement a <code>__next__</code> in both cases, just <em>yield</em> lines from it in your <code>__iter__</code>. More so, reading the file with a <em>for</em> loop implicitly handles EOF:</p>\n\n<pre><code>class MasterReader(object):\n    def __init__(self, filename):\n        self.f = open(filename)\n\n    def __iter__(self):\n        for line in self.f:\n            yield line.strip()\n        self.f.close()\n\n\nclass SubReader(object):\n    def __init__(self, mr):\n        self.mr = mr\n\n    def __iter__(self):\n        for filename in mr:\n            with open(filename) as f:\n                for line in f:\n                     yield line.strip()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "is_accepted": false, "score": 3, "last_activity_date": 1503529924, "creation_date": 1503529924, "answer_id": 45850608, "question_id": 45850493, "link": "https://stackoverflow.com/questions/45850493/how-to-chain-iterators/45850608#45850608", "title": "How to &quot;chain&quot; iterators?", "body": "<p>You could use <code>itertools.chain.from_iterable</code> with the help of small function yielding the stripped lines from each file.</p>\n\n<pre><code>from itertools import chain\n\ndef fgen(fname):\n    with open(fname) as f:\n        for line in f:\n            yield line.strip()\n\nfor a in chain.from_iterable(fgen(line) for line in fgen('master.txt')):\n    print(a)\n</code></pre>\n"}], "owner": {"reputation": 5954, "user_id": 230392, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/uwtL7.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/230392/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1490, "favorite_count": 0, "accepted_answer_id": 45850593, "answer_count": 2, "score": 3, "last_activity_date": 1503531806, "creation_date": 1503528859, "last_edit_date": 1503531806, "question_id": 45850493, "link": "https://stackoverflow.com/questions/45850493/how-to-chain-iterators", "title": "How to &quot;chain&quot; iterators?", "body": "<p>I'm trying to chain iterators together with one iterator reading from a master file and another iterator taking each line of the master file and processing another file depending on the output of the first.</p>\n\n<p>The working code that I have is as follows</p>\n\n<pre><code>class MasterReader(object):\n\n    def __init__(self, filename):\n        self.f = open(filename, \"r\")\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        line = self.f.readline().strip()\n        if line == \"\":\n            raise StopIteration\n        return line\n\n\nclass SubReader(object):\n\n    def __init__(self, mr):\n        self.mr = mr\n\n    def __iter__(self):\n        self._next()\n        return self\n\n    def _next(self):\n        self.current = open(self.mr.__next__(), \"r\")\n\n    def __next__(self):\n        while True:\n            line = self.current.readline().strip()\n            if line == \"\":\n                self._next()\n                continue\n            return line\n\n\nmr = MasterReader(\"master\")\nsr = SubReader(mr)\n\nfor line in sr:\n    print(line)\n</code></pre>\n\n<p>Where <code>master</code> is a file containing lines of other files</p>\n\n<pre><code>file1\nfile2\n</code></pre>\n\n<p><code>file1</code> contains</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1.a\n1.b\n1.c\n</code></pre>\n\n<p><code>file2</code> contains</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2.a\n2.b\n2.c\n</code></pre>\n\n<p>The output is </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1.a\n1.b\n1.c\n2.a\n2.b\n2.c\n</code></pre>\n\n<p>Again what I have works, but feels wrong in that I have a <code>while</code> loop in <code>__next__</code> I'm having to manually check for the end of each sub file and explicitly calling the next line in the <code>master</code> file.</p>\n\n<p>Is there a better/more pythonic way of doing this? </p>\n\n<p>EDIT:\nThis is a simplified problem of what I'm trying to accomplish.  In the real version <code>SubReader</code> is going to be threaded and I only want one <code>MasterReader</code>.  Actually this won't work for my threading project but want to make sure I'm generalizing iterators before diving deeper into a mess.</p>\n"}, {"tags": ["python", "user-interface", "tkinter"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1503533225, "post_id": 45850325, "comment_id": 78660180, "body": "What do you mean by &quot;This was working perfectly when I ran the code in Ubuntu&quot;?  How could it since <code>asksaveasfilename()</code> has no <code>appendExt</code> keyword argument?"}, {"owner": {"reputation": 55, "user_id": 4500467, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-RQQZoDF1DN4/AAAAAAAAAAI/AAAAAAAABBM/JTUTxrydMZ0/photo.jpg?sz=128", "display_name": "Jason Tam", "link": "https://stackoverflow.com/users/4500467/jason-tam"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1503535279, "post_id": 45850325, "comment_id": 78660649, "body": "@martineau Yes that &#39;appendExt&#39; part was my added fantasy. The line I had in my code had everything before it, and when the code was executed in Ubuntu, the returned &#39;filename&#39; has the extension selected in the dialog automatically appended to it. Unfortunately this is not the case when I execute the code in Windows 10"}], "owner": {"reputation": 55, "user_id": 4500467, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-RQQZoDF1DN4/AAAAAAAAAAI/AAAAAAAABBM/JTUTxrydMZ0/photo.jpg?sz=128", "display_name": "Jason Tam", "link": "https://stackoverflow.com/users/4500467/jason-tam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503532162, "creation_date": 1503527925, "last_edit_date": 1503532162, "question_id": 45850325, "link": "https://stackoverflow.com/questions/45850325/getting-the-selected-extension-from-tkinter-asksaveasfilename-dialog", "title": "Getting the selected extension from Tkinter.asksaveasfilename dialog?", "body": "<p>I am trying to implement a dialog box in a GUI, and would like to have the selected extension appended to the end of the typed in file name:</p>\n\n<p><img src=\"https://i.stack.imgur.com/PIo7O.png\" alt=\"SaveAs Dialog\"></p>\n\n<p>and I have come across these following threads:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31228956/tkinter-how-can-i-get-the-users-choice-of-filetype-in-the-asksaveasfilename-dia\">tkinter: How can I get the users choice of filetype in the asksaveasfilename-dialog?</a>\n<a href=\"https://mail.python.org/pipermail/python-list/2002-June/173039.html\" rel=\"nofollow noreferrer\">https://mail.python.org/pipermail/python-list/2002-June/173039.html</a></p>\n\n<p>Which seems to imply that the <code>asksaveasfilename</code> tool from tkinter does not currently have this function.</p>\n\n<p>Does anyone have a good solution for this? For example something similar to:</p>\n\n<pre><code>filename = asksaveasfilename(\n            filetypes=[('XLS File', '*.xls'), ('CSV File', '*.csv')],\n            appendExt=True)\n</code></pre>\n\n<p>or do I have to write my own just for this little missing function?</p>\n\n<p>Note: This was working perfectly when I ran the code in Ubuntu, but unfortunately not in Windows 10.</p>\n"}, {"tags": ["python", "python-3.x", "list", "twitch"], "comments": [{"owner": {"reputation": 1786, "user_id": 4099287, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OMz777BPLQI/AAAAAAAAAAI/AAAAAAAAFcM/tV8IW2TybOw/photo.jpg?sz=128", "display_name": "Kevin M Granger", "link": "https://stackoverflow.com/users/4099287/kevin-m-granger"}, "edited": false, "score": 1, "creation_date": 1503528789, "post_id": 45850244, "comment_id": 78659126, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8802860/checking-whether-a-string-starts-with-xxxx\">Checking whether a string starts with XXXX</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2290, "user_id": 5468953, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FWcKeItq2a4/AAAAAAAAAAI/AAAAAAAAAEE/WQokFUs5ZIg/photo.jpg?sz=128", "display_name": "Izaak van Dongen", "link": "https://stackoverflow.com/users/5468953/izaak-van-dongen"}, "edited": false, "score": 2, "creation_date": 1503528645, "post_id": 45850279, "comment_id": 78659089, "body": "I would suggest using <code>message[5:]</code>, rather than <code>message.replace(&#39;!add &#39;, &#39;&#39;)</code>. It may lose some clarity, but will also not lead to any unexpected results if <code>!add</code> appears later in the string, and is probably a little faster as it&#39;s more specified, and is more concise."}, {"owner": {"reputation": 443, "user_id": 6317971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8aQrQ.jpg?s=128&g=1", "display_name": "codehearts", "link": "https://stackoverflow.com/users/6317971/codehearts"}, "edited": false, "score": 0, "creation_date": 1503528649, "post_id": 45850279, "comment_id": 78659093, "body": "Replacing the substring means <code>&#39;!add &#39;</code> can&#39;t be part of your list. You could use <code>message[len(&#39;!add &#39;):]</code> instead to capture everything after the first <code>&#39;!add &#39;</code>"}, {"owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 0, "creation_date": 1503528875, "post_id": 45850279, "comment_id": 78659152, "body": "The add command would have to be a hardcoded value anyways, because you couldnt add it to the clist by doing &#39;!add !add&#39;.."}], "tags": [], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "is_accepted": false, "score": 1, "last_activity_date": 1503528731, "last_edit_date": 1503528731, "creation_date": 1503527600, "answer_id": 45850279, "question_id": 45850244, "link": "https://stackoverflow.com/questions/45850244/how-to-append-to-a-list-while-code-is-iterating-and-save-the-list-for-twitch-ch/45850279#45850279", "title": "How to append to a list while code is iterating and save the list (For twitch chat bot)", "body": "<p>If you want to check if a string starts with a substring you can use the String <code>startswith</code> method:</p>\n\n<pre><code>if message.startswith('!add'):\n</code></pre>\n\n<p>and then you can grab the command by removing the '!add ' part using a String slice:</p>\n\n<pre><code>message[5:]\n</code></pre>\n\n<p>Your code will be as follows:</p>\n\n<pre><code>&gt;&gt;&gt; clist = []\n&gt;&gt;&gt; message = '!add testcommand'\n&gt;&gt;&gt; if message.startswith('!add'):\n&gt;&gt;&gt;     clist.append(message[5:])\n&gt;&gt;&gt; clist\n&gt;&gt;&gt; ['testcommand']\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8508568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Sk7g.png?s=128&g=1", "display_name": "Hunter Myers", "link": "https://stackoverflow.com/users/8508568/hunter-myers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503530104, "creation_date": 1503527427, "last_edit_date": 1503530104, "question_id": 45850244, "link": "https://stackoverflow.com/questions/45850244/how-to-append-to-a-list-while-code-is-iterating-and-save-the-list-for-twitch-ch", "title": "How to append to a list while code is iterating and save the list (For twitch chat bot)", "body": "<p>I'm creating a chat bot for twitch, more importantly, I'm attempting to have a list that can be added to during iteration and can also be accessed to from within the channel chat. This is the overall code:<br>\n<a href=\"https://pastebin.com/maCbceaB\" rel=\"nofollow noreferrer\">https://pastebin.com/maCbceaB</a><br>\nI'm focused on this portion of the code however:  </p>\n\n<pre><code>clist = [\"!add\", ]\n        if message.strip() == \"!add\":\n            chat(s, \"Syntax: !add !&lt;command&gt; &lt;what the command does&gt;\")\n        if message.strip().startswith(\"!add\"):\n            clist.append(message[5:])\n            chat(s, \"The command has been added!\")\n</code></pre>\n\n<p>EDIT: I'm moreso focused on how to add to the list while the code is iterating because I have to be able to add to the <code>clist</code> because it will be used in:</p>\n\n<pre><code>if message.strip() == \"!commands\":\n            chat(s, clist)\n</code></pre>\n\n<p>Currently this code will only output: <code>['!add']</code> when <code>!commands</code> is used<br>\nAll the options I've researched are typically for massive lists and mine will be consisted mostly of strings so I need something fairly simple.</p>\n"}, {"tags": ["python", "pandas", "csv", "numpy"], "comments": [{"owner": {"reputation": 10652, "user_id": 5666087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0eeb62bd4c02b40a8751ab3368368d02?s=128&d=identicon&r=PG&f=1", "display_name": "jakub", "link": "https://stackoverflow.com/users/5666087/jakub"}, "edited": false, "score": 3, "creation_date": 1503527503, "post_id": 45850202, "comment_id": 78658707, "body": "You can tell read_csv what the NaN values are with the <code>na_values</code> parameter. That should convert those values to np.nan, which you can then replace as usual."}, {"owner": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "reply_to_user": {"reputation": 10652, "user_id": 5666087, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0eeb62bd4c02b40a8751ab3368368d02?s=128&d=identicon&r=PG&f=1", "display_name": "jakub", "link": "https://stackoverflow.com/users/5666087/jakub"}, "edited": false, "score": 0, "creation_date": 1503527742, "post_id": 45850202, "comment_id": 78658784, "body": "Thank you very much, @Jakub! It works like a charm!"}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "edited": false, "score": 0, "creation_date": 1503531533, "post_id": 45850384, "comment_id": 78659794, "body": "Thank you very much! It works well for a series object or single data frame column. Any function to convert the whole data frame?"}, {"owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "reply_to_user": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "edited": false, "score": 1, "creation_date": 1503531638, "post_id": 45850384, "comment_id": 78659825, "body": "@Jundong Sure. See my edit. Just loop over the cols."}], "tags": [], "owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "is_accepted": false, "score": 2, "last_activity_date": 1503531621, "last_edit_date": 1503531621, "creation_date": 1503528278, "answer_id": 45850384, "question_id": 45850202, "link": "https://stackoverflow.com/questions/45850202/how-to-convert-the-element-in-a-pandas-dataframe-to-np-float-while-use-pandas-re/45850384#45850384", "title": "How to convert the element in a pandas.dataframe to np.float while use pandas.read_csv to read csv file?", "body": "<p>If you have a new enough pandas version you can also use <a href=\"http://pandas.pydata.org/pandas-docs/version/0.20/generated/pandas.to_numeric.html\" rel=\"nofollow noreferrer\">pd.to_numeric(...)</a> for this:</p>\n\n<pre><code>df['mycol'] = pd.to_numeric(df['mycol'], errors='coerce')\n</code></pre>\n\n<p>And, here is a trick to convert the whole dataframe:</p>\n\n<pre><code>for col in df.columns:\n    df[col] = pd.to_numeric(df[col], errors='coerce')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "edited": false, "score": 0, "creation_date": 1503585422, "post_id": 45850433, "comment_id": 78687238, "body": "Thank you very much! I forgot <code>numpy.loadtxt</code>. I just tried it and realized that <code>numpy.loadtxt</code> requires each row must have the same amount of elements. For my .csv file, there are first several rows that need to be skipped, which can be done by the argument <code>skiprows</code> as well. For the <code>nan</code>, it can be converted to 0 by <code>numpy.nan_to_num</code>. This could be an alternative method."}, {"owner": {"reputation": 729, "user_id": 6078157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42d3b295d499636cc926cbaad18227d4?s=128&d=identicon&r=PG&f=1", "display_name": "ThisGuyCantEven", "link": "https://stackoverflow.com/users/6078157/thisguycanteven"}, "reply_to_user": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "edited": false, "score": 0, "creation_date": 1515349404, "post_id": 45850433, "comment_id": 83258176, "body": "You can also skip columns with the <code>usecols</code> argument, however, if you want to skip certain columns specified by an array, you might have to use that array to mask the values in another array containing all of the column indexes."}], "tags": [], "owner": {"reputation": 729, "user_id": 6078157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42d3b295d499636cc926cbaad18227d4?s=128&d=identicon&r=PG&f=1", "display_name": "ThisGuyCantEven", "link": "https://stackoverflow.com/users/6078157/thisguycanteven"}, "is_accepted": false, "score": 1, "last_activity_date": 1503587205, "last_edit_date": 1503587205, "creation_date": 1503528500, "answer_id": 45850433, "question_id": 45850202, "link": "https://stackoverflow.com/questions/45850202/how-to-convert-the-element-in-a-pandas-dataframe-to-np-float-while-use-pandas-re/45850433#45850433", "title": "How to convert the element in a pandas.dataframe to np.float while use pandas.read_csv to read csv file?", "body": "<p>Why not just use <code>numpy.loadtxt</code>? If you want to use pandas because, say, you have mixed data and you want a numeric column as a numpy array, you can always use <code>df['column'].as_matrix()</code>, or you can convert the whole data frame if you want.</p>\n"}], "owner": {"reputation": 243, "user_id": 4756421, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102088fa64fb85072368c2fc749e5257?s=128&d=identicon&r=PG&f=1", "display_name": "Jundong", "link": "https://stackoverflow.com/users/4756421/jundong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1503587205, "creation_date": 1503527221, "last_edit_date": 1503586190, "question_id": 45850202, "link": "https://stackoverflow.com/questions/45850202/how-to-convert-the-element-in-a-pandas-dataframe-to-np-float-while-use-pandas-re", "title": "How to convert the element in a pandas.dataframe to np.float while use pandas.read_csv to read csv file?", "body": "<p>I have a .csv file, which is an exported output from a software. This .csv file contains a lot of NaNs. I need to analyze the data by reading it into a dataframe, and use <code>dataframe.fillna(0)</code> to replace all the NaNs with 0. However, when I use <code>pandas.read_csv()</code> to import this .csv file, the type of element in the dataframe is 'str', so <code>dataframe.fillna(0)</code> cannot be used. So my question is: how to convert the element as np.float while reading the .csv file? </p>\n\n<p>There is an argument <code>dtype</code> for <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\"><code>pandas.read_csv</code></a>, here is the explantion:</p>\n\n<pre><code>dtype : Type name or dict of column -&gt; type, default None\nData type for data or columns. E.g. {\u2018a\u2019: np.float64, \u2018b\u2019: np.int32} Use str \nor object to preserve and not interpret dtype. If converters are specified, \nthey will be applied INSTEAD of dtype conversion.\n</code></pre>\n\n<p>Any examples of how to use it? </p>\n\n<p>Thank you very much!</p>\n\n<p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p><strong>Here are several solutions proposed by the answerers:</strong></p>\n\n<p>(1) from @Jakub. Setting the <code>na_values=NaN</code> in <code>pandas.read_csv()</code>, so all of the elements in the .csv file can be converted to <code>np.float</code> as being read into dataframe.</p>\n\n<p>(2) from @Andr\u00e9 Christoffer Andersen. After read the .csv file as dataframe. use <code>pandas.to_numeric</code> to convert a column of the dataframe into <code>np.float</code>. Use a for loop to convert all columns into numeric.</p>\n\n<p>(3) from @ThisGuyCantEven. Use <code>numpy.loadtxt</code> to read .csv file into a <code>numpy.ndarray</code>. Use the <code>skiprows</code> argument to skip the rows with unequal elements. Then use <code>numpy.nan_to_num()</code> to convert <code>nan</code> to zeros.</p>\n\n<p>Hopefully, it will help following readers!</p>\n"}, {"tags": ["python", "python-2.7", "opencv", "cython"], "answers": [{"tags": [], "owner": {"reputation": 1534, "user_id": 7555390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-tRUwmTBgOVs/AAAAAAAAAAI/AAAAAAAAAJI/01Lb4Msk-QI/photo.jpg?sz=128", "display_name": "Xinyao Wang", "link": "https://stackoverflow.com/users/7555390/xinyao-wang"}, "is_accepted": true, "score": 3, "last_activity_date": 1503960065, "creation_date": 1503960065, "answer_id": 45928289, "question_id": 45850197, "link": "https://stackoverflow.com/questions/45850197/not-able-to-convert-numpy-array-to-opencv-mat-in-cython-when-trying-to-write-c/45928289#45928289", "title": "Not able to convert Numpy array to OpenCV Mat in Cython when trying to write c++ wrapper function", "body": "<p>Finally I found the answer.\nIn order to use numpy, we have to call <code>numpy.import_array()</code>. For detail, see <a href=\"https://docs.scipy.org/doc/numpy-1.10.0/user/c-info.how-to-extend.html#required-subroutine\" rel=\"nofollow noreferrer\">Here</a>.</p>\n\n<p>It can be tricky to find where to call it, for my case, I just call in my .pyx script:</p>\n\n<pre><code>import numpy as np  # Import Python functions, attributes, submodules of numpy\ncimport numpy as np  # Import numpy C/C++ API\n\nnp.import_array()\n\ndef cudaWarpPerspectiveWrapper(np.ndarray[np.uint8_t, ndim=2] _src,\n                               np.ndarray[np.float32_t, ndim=2] _M,\n                               _size_tuple,\n                               int _flags=INTER_NEAREST):\n    # Create GPU/device InputArray for src\n\n    cdef Mat src_mat\n    cdef GpuMat src_gpu\n    pyopencv_to(&lt;PyObject*&gt; _src, src_mat)\n    src_gpu.upload(src_mat)\n\n    # Create CPU/host InputArray for M\n    cdef Mat M_mat = Mat()\n    pyopencv_to(&lt;PyObject*&gt; _M, M_mat)\n\n    # Create Size object from size tuple\n    # Note that size/shape in Python is handled in row-major-order -- therefore, width is [1] and height is [0]\n    cdef Size size = Size(&lt;int&gt; _size_tuple[0], &lt;int&gt; _size_tuple[1])\n\n    # Create empty GPU/device OutputArray for dst\n    cdef GpuMat dst_gpu = GpuMat()\n    warpPerspective(src_gpu, dst_gpu, M_mat, size, 2)\n\n    # Get result of dst\n    cdef Mat dst_host\n    dst_gpu.download(dst_host)\n    cdef np.ndarray out = &lt;np.ndarray&gt; pyopencv_from(dst_host)\n    return out\n</code></pre>\n\n<p>Then everything is working like a magic.</p>\n"}], "owner": {"reputation": 1534, "user_id": 7555390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-tRUwmTBgOVs/AAAAAAAAAAI/AAAAAAAAAJI/01Lb4Msk-QI/photo.jpg?sz=128", "display_name": "Xinyao Wang", "link": "https://stackoverflow.com/users/7555390/xinyao-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1468, "favorite_count": 1, "accepted_answer_id": 45928289, "answer_count": 1, "score": 4, "last_activity_date": 1532106316, "creation_date": 1503527192, "last_edit_date": 1532106316, "question_id": 45850197, "link": "https://stackoverflow.com/questions/45850197/not-able-to-convert-numpy-array-to-opencv-mat-in-cython-when-trying-to-write-c", "title": "Not able to convert Numpy array to OpenCV Mat in Cython when trying to write c++ wrapper function", "body": "<p>I am trying to implement <code>cv::cuda::warpPerspective</code> in python2, there is a very sweet post about how to do that here: <a href=\"https://stackoverflow.com/a/42401559/7555390\">link</a>. I followed the instruction as described in that post, however, I got <code>Segmentation fault (core dumped)</code> error.</p>\n\n<p>I was able to allocate the error in <code>GpuWrapper.pyx</code> file line 11:</p>\n\n<pre><code>pyopencv_to(&lt;PyObject*&gt; _src, src_mat)\n</code></pre>\n\n<p>It seems that it fails to convert numpy array to opencv Mat.</p>\n\n<p>I am not sure where is wrong and how to fix it.</p>\n\n<p>The python script that got <code>Segmentation fault (core dumped)</code> error is in below:</p>\n\n<pre><code>import cv2\nimport numpy as np\nimport csv\nimport timeit\nimport GpuWrapper\n\nwhile (1):\n    start = timeit.default_timer()\n    eo_img = cv2.imread('./sample/eo.png', 1)\n    nir_img = cv2.imread('./sample/nir.png', 0)\n    with open('./sample/reg.csv', 'rb') as f:\n        line = csv.reader(f)\n        reg_line = list(line)\n    reg = np.array(reg_line[0], dtype=np.float32)\n    new_reg = reg.reshape((3,3))\n    print nir_img.shape\n    dist = GpuWrapper.cudaWarpPerspectiveWrapper(nir_img, new_reg, (2448,2048))\n    cv2.imwrite('./sample/result.png', dist)\n    end = timeit.default_timer()\n    print end-start\n</code></pre>\n\n<p>Another thing to mention, when compiling cython code, it has some warnings:</p>\n\n<pre><code>[1/1] Cythonizing GpuWrapper.pyx\nrunning build_ext\nbuilding 'GpuWrapper' extension\nx86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fno-strict-aliasing -Wdate-time -D_FORTIFY_SOURCE=2 -g -fstack-protector-strong -Wformat -Werror=format-security -fPIC -I/home/xinyao/Tensorflow/local/lib/python2.7/site-packages/numpy/core/include -I-I/usr/local/include/opencv -I-I/usr/local/include -I/usr/include/python2.7 -c GpuWrapper.cpp -o build/temp.linux-x86_64-2.7/GpuWrapper.o\ncc1plus: warning: command line option \u2018-Wstrict-prototypes\u2019 is valid for C/ObjC but not for C++\nIn file included from /home/xinyao/Tensorflow/local/lib/python2.7/site-packages/numpy/core/include/numpy/ndarraytypes.h:1809:0,\n                 from /home/xinyao/Tensorflow/local/lib/python2.7/site-packages/numpy/core/include/numpy/ndarrayobject.h:18,\n                 from pyopencv_converter.cpp:2,\n                 from GpuWrapper.cpp:544:\n/home/xinyao/Tensorflow/local/lib/python2.7/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2: warning: #warning \"Using deprecated NumPy API, disable it by \" \"#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\" [-Wcpp]\n #warning \"Using deprecated NumPy API, disable it by \" \\\n  ^\nc++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -Wdate-time -D_FORTIFY_SOURCE=2 -g -fstack-protector-strong -Wformat -Werror=format-security -Wl,-Bsymbolic-functions -Wl,-z,relro -Wdate-time -D_FORTIFY_SOURCE=2 -g -fstack-protector-strong -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/GpuWrapper.o -o /home/xinyao/projects/image_reg/GpuWrapper.so -L/usr/local/lib -lopencv_cudabgsegm -lopencv_cudaobjdetect -lopencv_cudastereo -lopencv_dnn -lopencv_ml -lopencv_shape -lopencv_stitching -lopencv_cudafeatures2d -lopencv_superres -lopencv_cudacodec -lopencv_videostab -lopencv_cudaoptflow -lopencv_cudalegacy -lopencv_calib3d -lopencv_features2d -lopencv_highgui -lopencv_videoio -lopencv_photo -lopencv_imgcodecs -lopencv_cudawarping -lopencv_cudaimgproc -lopencv_cudafilters -lopencv_video -lopencv_objdetect -lopencv_imgproc -lopencv_flann -lopencv_cudaarithm -lopencv_viz -lopencv_core -lopencv_cudev\n</code></pre>\n\n<p>Which seems to be fine according to <a href=\"https://stackoverflow.com/questions/25789055/cython-numpy-warning-about-npy-no-deprecated-api-when-using-memoryview\">here</a>.</p>\n\n<p>Environment:\nCUDA 8.0\nOpenCV 3.3 without extra modules\nUbuntu 16.04\nPython 2.7\nCython 0.26</p>\n\n<p>I have tried <code>cv::cuda::warpPerspective</code> in C++ and it works fine with GPU support. I have also tried <code>cv2.warpPerspective</code> in python and without any issue(so my opencv for python was compiled correctly).</p>\n\n<p>Another thing is I cannot compile opencv C++ code directly with g++, I need to add extra flags to do it, like in this way:\n<code>g++ -o main main.cc `pkg-config opencv --cflags --libs</code>\nOtherwise I will have issues on finding opencv:</p>\n\n<pre><code>main.cc:(.text+0x45): undefined reference to `cv::cuda::GpuMat::defaultAllocator()'\nmain.cc:(.text+0x9b): undefined reference to `cv::imread(cv::String const&amp;, int)'\nmain.cc:(.text+0x104): undefined reference to `cv::imread(cv::String const&amp;, int)'\nmain.cc:(.text+0x140): undefined reference to `cv::cuda::GpuMat::defaultAllocator()'\nmain.cc:(.text+0x1a5): undefined reference to `cv::Mat::eye(int, int, int)'\nmain.cc:(.text+0x31f): undefined reference to `cv::cuda::Stream::Null()'\nmain.cc:(.text+0x3d6): undefined reference to `cv::cuda::warpPerspective(cv::_InputArray const&amp;, cv::_OutputArray const&amp;, cv::_InputArray const&amp;, cv::Size_&lt;int&gt;, int, int, cv::Scalar_&lt;double&gt;, cv::cuda::Stream&amp;)'\nmain.cc:(.text+0x487): undefined reference to `cv::imwrite(cv::String const&amp;, cv::_InputArray const&amp;, std::vector&lt;int, std::allocator&lt;int&gt; &gt; const&amp;)'\n</code></pre>\n\n<p>Not sure if that is a factor, but I am not able to fix it as well.</p>\n\n<p><strong>UPDATE:</strong>\nI was able to allocate the bug by using pdb:</p>\n\n<pre><code>&gt;$gdb --args python opencv_reg_cuda.py\n&gt;$run\n\n    Starting program: /usr/bin/python opencv_reg_cuda.py\n    [Thread debugging using libthread_db enabled]\n    Using host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n    [New Thread 0x7fffc6b83700 (LWP 10933)]\n    [New Thread 0x7fffc4382700 (LWP 10934)]\n    [New Thread 0x7fffc1b81700 (LWP 10935)]\n    [New Thread 0x7fffc1380700 (LWP 10936)]\n    [New Thread 0x7fffbcb7f700 (LWP 10937)]\n    [New Thread 0x7fffba37e700 (LWP 10938)]\n    [New Thread 0x7fffb7b7d700 (LWP 10939)]\n    (2048, 2448)\n\n    Thread 1 \"python\" received signal SIGSEGV, Segmentation fault.\n    pyopencv_to (o=o@entry=0x7fffb37e3b70, m=..., info=...) at pyopencv_converter.cpp:210\n    210     if( !PyArray_Check(o) )\n\n&gt;$bt\n\n    #0  pyopencv_to (o=o@entry=0x7fffb37e3b70, m=..., info=...) at pyopencv_converter.cpp:210\n    #1  0x00007fffb33c56f5 in pyopencv_to&lt;cv::Mat&gt; (name=0x7fffb33c98d8 \"&lt;unknown&gt;\", m=..., o=0x7fffb37e3b70) at pyopencv_converter.cpp:349\n    #2  __pyx_pf_10GpuWrapper_cudaWarpPerspectiveWrapper (__pyx_v(short, long double, char)=__pyx_v(short, long double, char)@entry=0x7fffb37e3b70, __pyx_v__M=__pyx_v__M@entry=0x7fffb37e3c60, \n        __pyx_v__size_tuple=__pyx_v__size_tuple@entry=0x7ffff7e80b90, __pyx_v__flags=&lt;optimized out&gt;, __pyx_self=&lt;optimized out&gt;) at GpuWrapper.cpp:1796\n    #3  0x00007fffb33c76a2 in __pyx_pw_10GpuWrapper_1cudaWarpPerspectiveWrapper (__pyx_self=&lt;optimized out&gt;, __pyx_args=&lt;optimized out&gt;, __pyx_kwds=&lt;optimized out&gt;) at GpuWrapper.cpp:1737\n    #4  0x00000000004c468a in PyEval_EvalFrameEx ()\n    #5  0x00000000004c2765 in PyEval_EvalCodeEx ()\n    #6  0x00000000004c2509 in PyEval_EvalCode ()\n    #7  0x00000000004f1def in ?? ()\n    #8  0x00000000004ec652 in PyRun_FileExFlags ()\n    #9  0x00000000004eae31 in PyRun_SimpleFileExFlags ()\n    #10 0x000000000049e14a in Py_Main ()\n    #11 0x00007ffff7810830 in __libc_start_main (main=0x49dab0 &lt;main&gt;, argc=2, argv=0x7fffffffde38, init=&lt;optimized out&gt;, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, stack_end=0x7fffffffde28)\n        at ../csu/libc-start.c:291\n    #12 0x000000000049d9d9 in _start ()\n\n&gt;list\n\n    205             }\n    206         }\n    207         return true;\n    208     }\n    209 \n    210     if( !PyArray_Check(o) )\n    211     {\n    212         failmsg(\"%s is not a numpy array, neither a scalar\", info.name);\n    213         return false;\n    214     }\n</code></pre>\n\n<p>It seems like it cannot pass o to PyArray_Check, but I have no idea what was going on and how to fix it.</p>\n"}, {"tags": ["python", "matplotlib", "svg", "figure", "svgutils"], "answers": [{"tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": true, "score": 1, "last_activity_date": 1503583796, "creation_date": 1503583796, "answer_id": 45863869, "question_id": 45850144, "link": "https://stackoverflow.com/questions/45850144/is-there-a-bug-in-svgutils-compose-module-regarding-the-arrangement-of-figures/45863869#45863869", "title": "Is there a bug in svgutils.compose() module regarding the arrangement of figures using tile() method?", "body": "<p>Seems like a bug to me. You should report it at <a href=\"https://github.com/btel/svg_utils/issues\" rel=\"nofollow noreferrer\">https://github.com/btel/svg_utils/issues</a></p>\n\n<p>The offending lines are in the tile function:</p>\n\n<pre><code>dx = (self.width/ncols).to('px').value\ndy = (self.height/nrows).to('px').value\n</code></pre>\n\n<p><code>self.width</code> and <code>self.height</code> are type <code>Unit</code>, which Python doesn't know how to divide by an <code>int</code>. </p>\n\n<p>In the meantime, I quickly fixed it with a monkey-patch of the tile function:</p>\n\n<pre><code>def new_tile(self, ncols, nrows):\n    \"\"\"Automatically tile the panels of the figure.\n    This will re-arranged all elements of the figure (first in the\n    hierarchy) so that they will uniformly cover the figure area.\n    Parameters\n    ----------\n    ncols, nrows : type\n        The number of columns and rows to arange the elements into.\n    Notes\n    -----\n    ncols * nrows must be larger or equal to number of\n    elements, otherwise some elements will go outside the figure borders.\n    \"\"\"\n    dx = self.width.to('px').value/ncols\n    dy = self.height.to('px').value/nrows\n    ix, iy = 0, 0\n    for el in self:\n        el.move(dx*ix, dy*iy)\n        ix += 1\n        if ix &gt;= ncols:\n            ix = 0\n            iy += 1\n        if iy &gt; nrows:\n            break\n    return self\n</code></pre>\n\n<p>apply by executing:</p>\n\n<pre><code>svgutils.compose.Figure.tile = new_tile\n</code></pre>\n\n<p>EDIT: this is true as of svgutils-0.2.0 freshly installed from pip</p>\n"}], "owner": {"reputation": 395, "user_id": 6407935, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2b9980041c14b1e534e2e76006b8d53e?s=128&d=identicon&r=PG&f=1", "display_name": "Ash", "link": "https://stackoverflow.com/users/6407935/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 45863869, "answer_count": 1, "score": 1, "last_activity_date": 1503583796, "creation_date": 1503526848, "last_edit_date": 1503531087, "question_id": 45850144, "link": "https://stackoverflow.com/questions/45850144/is-there-a-bug-in-svgutils-compose-module-regarding-the-arrangement-of-figures", "title": "Is there a bug in svgutils.compose() module regarding the arrangement of figures using tile() method?", "body": "<p>I have 12 figures in svg format and I would like to arrange them into 3 columns and 4 rows in the form of 12 panels that would fit into an A4 printed version for publication. What is desired is to maximize the area covering fraction such that the empty space is minimized in order to see all the features in the 12 images. </p>\n\n<p>I am aware that I can use subplots under a big figure in matplotlib. However, in my case, each one of these figures are produced independently from a different function of the same simulation. I cannot embed a large simulation repeatedly into each call as I need to access some of the figures in different places for different purposes. In other words, the less I manipulate the original simulation the less headache I will have to extract different plots from it. I would like to minimize any changes in the original simulation and instead add my additional code to my sole purpose of gathering some of the plots into same place. </p>\n\n<p>Here is what I have come up with in my python code to accomplish this:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport svgutils.transform as sg\nfrom svgutils.compose import *\nimport os\n\nplt.figure(1, tight_layout=True)\n...\nplt.savefig('/some_path/first_xy.svg')\n\nplt.figure(2, tight_layout=True)\n...\nplt.savefig('/some_path/first_xz.svg')\n\nplt.figure(3, tight_layout=True)\n...\nplt.savefig('/some_path/first_yz.svg')\n\nplt.figure(4, tight_layout=True)\n...\nplt.savefig('/some_path/second_xy.svg')\n\nplt.figure(5, tight_layout=True)\n...\nplt.savefig('/some_path/second_xz.svg')\n\nplt.figure(6, tight_layout=True)\n...\nplt.savefig('/some_path/second_yz.svg')\n\nplt.figure(7, tight_layout=True)\n...\nplt.savefig('/some_path/third_xy.svg')\n\nplt.figure(8, tight_layout=True)\n...\nplt.savefig('/some_path/third_xz.svg')\n\nplt.figure(9, tight_layout=True)\n...\nplt.savefig('/some_path/third_yz.svg')\n\nplt.figure(10, tight_layout=True)\n...\nplt.savefig('/some_path/fourth_xy.svg')\n\nplt.figure(11, tight_layout=True)\n...\nplt.savefig('/some_path/fourth_xz.svg')\n\nplt.figure(12, tight_layout=True)\n...\nplt.savefig('/some_path/fourth_yz.svg')\n\n\n\n\nmyfigure = Figure(\"21cm\", \"29.7cm\", \n                  SVG(\"/some_path/first_xy.svg\"), \n                  SVG(\"/some_path/first_xz.svg\"), \n                  SVG(\"/some_path/first_yz.svg\"), \n                  SVG(\"/some_path/second_xy.svg\"), \n                  SVG(\"/some_path/second_xz.svg\"), \n                  SVG(\"/some_path/second_yz.svg\"), \n                  SVG(\"/some_path/third_xy.svg\"), \n                  SVG(\"/some_path/third_xz.svg\"), \n                  SVG(\"/some_path/third_yz.svg\"), \n                  SVG(\"/some_path/fourth_xy.svg\"), \n                  SVG(\"/some_path/fourth_xz.svg\"), \n                  SVG(\"/some_path/fourth_yz.svg\")\n                  ).tile(3, 4)\n\nmyfigure.save('/some_path/complete_figure.svg')\nos.system('inkscape --export-png=/some_path/complete_figure.png /some_path/complete_figure.svg --export-background=white --export-area-drawing')\n</code></pre>\n\n<p>However, running this code produces a weird error message related to the function being used, <code>tile()</code>, to group 12 figures into a single A4 page as below:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File \"script.py\", line 70, in\n  \n      ).tile(3, 4)<br>\n  File \"/usr/local/anaconda3/lib/python3.5/site-packages/svgutils/compose.py\",\n  line 287, in tile\n      dx = (self.width/ncols).to('px').value TypeError: unsupported operand type(s) for /: 'Unit' and 'int'</p>\n</blockquote>\n\n<p>I am running my code on a remote desktop but I can access the content of <code>compose.py</code>. However I don't know if there is a bug in that routine. What is the fix?</p>\n"}, {"tags": ["python", "oauth", "oauth-2.0", "google-oauth", "google-sheets-api"], "answers": [{"comments": [{"owner": {"reputation": 997, "user_id": 5781578, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7cc7ca4e1fb5108aca097ab2f6cd2ee2?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Beaudoin", "link": "https://stackoverflow.com/users/5781578/aaron-beaudoin"}, "edited": false, "score": 0, "creation_date": 1503609986, "post_id": 45858009, "comment_id": 78701172, "body": "So should I include the <code>client_secret</code> file when committing to git or is that insecure? And if the contents of the <code>client secret</code> were just copied into a variable inside the python script and used from there before compiling the script to an executable, would that be a bad idea?"}, {"owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "reply_to_user": {"reputation": 997, "user_id": 5781578, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7cc7ca4e1fb5108aca097ab2f6cd2ee2?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Beaudoin", "link": "https://stackoverflow.com/users/5781578/aaron-beaudoin"}, "edited": false, "score": 0, "creation_date": 1503612310, "post_id": 45858009, "comment_id": 78702055, "body": "I guess it depends how public your git repo is. As a rule of thumb, secrets should not be committed, but it might make sense depending on your use case. I&#39;ve updated my answer with another option to consider."}], "tags": [], "owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "is_accepted": true, "score": 2, "last_activity_date": 1503612466, "last_edit_date": 1503612466, "creation_date": 1503567260, "answer_id": 45858009, "question_id": 45850121, "link": "https://stackoverflow.com/questions/45850121/how-does-user-authentication-work-in-the-google-sheets-api-with-python/45858009#45858009", "title": "How does user authentication work in the Google Sheets API with Python?", "body": "<p>Perhaps some of the confusion stems from the word \"client\" in <code>client_secret</code>. The client is your application. Yes its details should be kept secret insofar as anybody with the client_secret can impersonate your app. Apart from being a nuisance, the impact of such impersonation is minimal in that it does not extend to Eve being able to access Alice's data.</p>\n\n<p>Each user of your app will need to go through the OAuth dance to give the app access to their data. This permission is manifested in a Refresh Token and Access Token, and it is these which each user needs to keep private.</p>\n\n<p>If you do distribute a client_secret, consider using a sacrificial (ie. fake) Google Account. That way, any abuse won't affect your primary Google Account.</p>\n\n<p>An alternative to consider would be to provide your users with instructions on how to register their own app on the dev console, and thus generate their own client_secret.</p>\n"}], "owner": {"reputation": 997, "user_id": 5781578, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7cc7ca4e1fb5108aca097ab2f6cd2ee2?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Beaudoin", "link": "https://stackoverflow.com/users/5781578/aaron-beaudoin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 45858009, "answer_count": 1, "score": 2, "last_activity_date": 1503612466, "creation_date": 1503526687, "question_id": 45850121, "link": "https://stackoverflow.com/questions/45850121/how-does-user-authentication-work-in-the-google-sheets-api-with-python", "title": "How does user authentication work in the Google Sheets API with Python?", "body": "<p>I am a fairly new developer. I have no OAuth2 experience and every time I try to read explanations of it I can't seem to figure out what it means in a practical sense.</p>\n\n<p>Here's what I'm trying to accomplish. I'm writing an app in Python which I want to be able to read an arbitrary Google sheet and manipulate the data. I've followed Google's official guide <a href=\"https://developers.google.com/sheets/api/quickstart/python?authuser=1\" rel=\"nofollow noreferrer\">here</a> and set up the <code>quickstart.py</code> example. It works fine, and I've been able to extend it to do other things without any problem \u2013 having maintained the specific file setup created in the quickstart guide.</p>\n\n<p>Now here's where I'm confused. Suppose I want someone else to be able to use my app with their own spreadsheets and Google account now. Isn't the <code>client_secret.json</code> file required for the app to work? But isn't it (as it's name would obviously suggest) supposed to be kept secret? They need to create their own credentials, right? But don't you need the <code>client_secret.json</code> file in order to create credentials in the first place? How does this all work?</p>\n\n<p>What needs to be in place for someone to be able to run the Python script and get connected through their account to a spreadsheet from square one? I personally just don't understand how OAuth2 is supposed to be applied in this particular situation beyond my own Google account and the setup described in the guide.</p>\n\n<p>Perhaps this question seems too wide ranging. If so, here's the bottom line: How do I take the Python quickstart example outlined at the link <a href=\"https://developers.google.com/sheets/api/quickstart/python?authuser=1\" rel=\"nofollow noreferrer\">here</a> and make it so anyone can just run the script on their computer and have it work? (guiding them through all needed setup like any normal application needing access to their Google account)</p>\n"}, {"tags": ["python", "windows", "batch-file", "cmd"], "comments": [{"owner": {"reputation": 28755, "user_id": 5047996, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/la3kD.png?s=128&g=1", "display_name": "aschipfl", "link": "https://stackoverflow.com/users/5047996/aschipfl"}, "edited": false, "score": 0, "creation_date": 1503558538, "post_id": 45850099, "comment_id": 78667885, "body": "To output <code>%ADDTHISVAR%</code> literally by a batch file, double the <code>%</code>-signs like <code>echo&#47;%%ADDTHISVAR%%</code>; for the overall task, use a <a href=\"http://ss64.com/nt/for_f.html\" rel=\"nofollow noreferrer\"><code>for &#47;F</code> loop</a> to walk through the lines of the other batch file; in the loop body, you could do an <a href=\"http://ss64.com/nt/if.html\" rel=\"nofollow noreferrer\"><code>if</code> comparison</a>, or you could use <a href=\"http://ss64.com/nt/find.html\" rel=\"nofollow noreferrer\"><code>find</code></a> or <a href=\"http://ss64.com/nt/findstr.html\" rel=\"nofollow noreferrer\"><code>findstr</code></a> to search for the specific line you want to modify..."}], "answers": [{"tags": [], "owner": {"reputation": 10639, "user_id": 1431750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5557aad9ff70c36cfac418f511bdea98?s=128&d=identicon&r=PG", "display_name": "aneroid", "link": "https://stackoverflow.com/users/1431750/aneroid"}, "is_accepted": false, "score": -1, "last_activity_date": 1503546029, "creation_date": 1503546029, "answer_id": 45852560, "question_id": 45850099, "link": "https://stackoverflow.com/questions/45850099/batch-script-to-edit-another-batch-script/45852560#45852560", "title": "Batch script to edit another batch script", "body": "<p>What you could do is read each line of the file and simultaneously write them out to a new temp file (or hold it in memory). Check that each line is not <code>set path=%TEST_ROOT%\\bin;%WINDIR%\\system32;</code> and if it is, then append your var to it before you write it out to your temp file. And then replace or overwrite your existing file with the temp one.</p>\n\n<p>However, the next time you try to run the script and search for that line, it will already have the <code>%ADDTHISVAR%</code> so you'd need to check if it's not already there.</p>\n\n<p>You may be better off just setting an environment variable before running your <code>.bat</code> file and having that use the env variable in place of <code>%ADDTHISVAR%</code></p>\n"}], "owner": {"reputation": 649, "user_id": 4798514, "user_type": "registered", "accept_rate": 41, "profile_image": "https://lh6.googleusercontent.com/-70dIleEtzQM/AAAAAAAAAAI/AAAAAAAAABA/5Cxq5ABNjY8/photo.jpg?sz=128", "display_name": "fpolig01", "link": "https://stackoverflow.com/users/4798514/fpolig01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503546029, "creation_date": 1503526512, "question_id": 45850099, "link": "https://stackoverflow.com/questions/45850099/batch-script-to-edit-another-batch-script", "title": "Batch script to edit another batch script", "body": "<p>I need to append to a specific line within another batch script. How can I do this? Is this trivial in .bat or would I be better of using Python. I know much more Python than I do .bat. </p>\n\n<p>I have a line in the .bat that sets path. </p>\n\n<p>it looks like <code>set path=%TEST_ROOT%\\bin;%WINDIR%\\system32;</code></p>\n\n<p>I need to find this line and tack on another environment variable to the end. I can do in Python but would rather do .bat. </p>\n\n<p>So what I'm looking for would be this </p>\n\n<pre><code>set path=%TEST_ROOT%\\bin;%WINDIR%\\system32;%ADDTHISVAR%\n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib", "cstringio"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1503527880, "post_id": 45850049, "comment_id": 78658824, "body": "What is the purpose of this code? Why do you need to create a pixel image at all? Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please (most of the code seems irrelevant for the actual problem)?"}, {"owner": {"reputation": 729, "user_id": 6078157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42d3b295d499636cc926cbaad18227d4?s=128&d=identicon&r=PG&f=1", "display_name": "ThisGuyCantEven", "link": "https://stackoverflow.com/users/6078157/thisguycanteven"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1503529001, "post_id": 45850049, "comment_id": 78659193, "body": "I have narrowed the problem down to this, the purpose of these two functions are to generate a <code>matplotlib</code> object , save it to a string buffer, then convert that buffer to a pixel array for <code>cv2.imshow</code>. The commented out loop saves those arrays to a list, which I can decode and show in the window based on a slider position. Additionally, the comments are very descriptive."}, {"owner": {"reputation": 729, "user_id": 6078157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42d3b295d499636cc926cbaad18227d4?s=128&d=identicon&r=PG&f=1", "display_name": "ThisGuyCantEven", "link": "https://stackoverflow.com/users/6078157/thisguycanteven"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1503529677, "post_id": 45850049, "comment_id": 78659379, "body": "I have minimized this as per your request Ernest."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1503529789, "post_id": 45850049, "comment_id": 78659410, "body": "Ok, I was asking because I&#39;m not sure why you need to save the image at all. Is <a href=\"https://stackoverflow.com/questions/7821518/matplotlib-save-plot-to-numpy-array\">this question</a> helping?"}, {"owner": {"reputation": 729, "user_id": 6078157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42d3b295d499636cc926cbaad18227d4?s=128&d=identicon&r=PG&f=1", "display_name": "ThisGuyCantEven", "link": "https://stackoverflow.com/users/6078157/thisguycanteven"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1503532226, "post_id": 45850049, "comment_id": 78659945, "body": "Indeed it was, however, now I&#39;m having problems converting said string with <code>imdecode(frame,IMREAD_COLOR)</code> not returning anything at all. I could start a new question to show you."}], "owner": {"reputation": 729, "user_id": 6078157, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/42d3b295d499636cc926cbaad18227d4?s=128&d=identicon&r=PG&f=1", "display_name": "ThisGuyCantEven", "link": "https://stackoverflow.com/users/6078157/thisguycanteven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503530006, "creation_date": 1503526256, "last_edit_date": 1503530006, "question_id": 45850049, "link": "https://stackoverflow.com/questions/45850049/valueerror-using-plt-savefig-and-cstringio-buffer", "title": "ValueError using plt.savefig() and cStringIO buffer", "body": "<p>I am trying to make an interactive plot of the tangent line using <code>matplotlib</code> and <code>cv2</code>. Before, I was just saving the files to my disk, then opening the images as <code>.png</code> into a list of images. I decided to omit using the disk and use a <code>cStringIO</code> buffer. I've ommitted the image display loop for now because I'm quite certain it will work when I get past this. I have two functions, <code>pic()</code> generates the plot, then calls <code>convt()</code> to convert the plot into a buffer, and extracts the raw string using <code>buff.getValue</code>, then returns the string. The problem seems to be with <code>np.frombuffer()</code>. If I just print <code>pic()</code> I can see the buffer as a string, but <code>np.frombuffer(pic())</code> causes the <code>ValueEerror</code>:</p>\n\n<pre><code>ValueError: buffer size must be a multiple of element size\n</code></pre>\n\n<p>Here are the two functions and the commented out loop to fill the list. The math function definitions have been left out because I already tested them and they work as intended. Note, this version is minimized to cause the same error:</p>\n\n<pre><code>from matplotlib import pyplot as plt\nimport numpy as np\nfrom cStringIO import StringIO \njs= lambda t: 3*t    #define function\nts=np.linspace(-3,3,100)   #define domain\n\ndef convt(fig):\n    buff=StringIO()  #instantiate StringIO object\n    fig.savefig(buff, format='png', dpi=fig.dpi)  #print png to buffer\n    rawstring=buff.getvalue()   #pull string from buffer\n    buff.close() #close buffer\n    return rawstring  #return string\n\ndef pic(ts,js):\n    plt.plot(ts,js(ts))  #generate mpl plot\n    fig=plt.gcf()   #grab current figure\n    out=convt(fig)  #convert to string\n    plt.close()     #close plot\n    return out      #return string\n\nnp.frombuffer(rawstring) #causes ValueError, remove np.frombuffer()\n                         #and you can see the string\n</code></pre>\n"}, {"tags": ["python", "pycharm", "macos-sierra", "jetbrains-ide"], "owner": {"reputation": 619, "user_id": 8321558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53a2a6e48754e3e496147af55a3fad8?s=128&d=identicon&r=PG&f=1", "display_name": "Battery_Al", "link": "https://stackoverflow.com/users/8321558/battery-al"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1561264178, "creation_date": 1503526246, "last_edit_date": 1503566382, "question_id": 45850045, "link": "https://stackoverflow.com/questions/45850045/pycharm-editor-stops-responding-to-keyboard-2017-2-1-professional-for-mac", "title": "PyCharm editor stops responding to keyboard (2017.2.1 Professional for Mac )", "body": "<p>My IDE periodically stops responding to keyboard inputs entirely (still responds to the mouse perfectly), and I have to quit and reopen PyCharm to fix it.</p>\n\n<p>Googling reveals that the same bug was common in Ubuntu systems about a year ago, and the solution was to kill iBus, but my version of PyCharm has no mention of iBus in its settings, and I'm not sure that macs use iBus at all. </p>\n\n<p>Any ideas? This is PyCharm Professional 2017.2.1 on macOS Sierra 10.12.16.</p>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1503528522, "post_id": 45850027, "comment_id": 78659047, "body": "Your code doesn&#39;t make much sense.  The last line of your for loop is a return statement, so the loop is not a loop at all.  It will only be executed once.  And the first time the loop executes, i == 0 (not 1).  Please fix this."}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 8027787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53c6a8a0ccb639f6f09ff288545be05e?s=128&d=identicon&r=PG&f=1", "display_name": "Ivalin", "link": "https://stackoverflow.com/users/8027787/ivalin"}, "is_accepted": false, "score": 1, "last_activity_date": 1503528050, "last_edit_date": 1503528050, "creation_date": 1503526673, "answer_id": 45850120, "question_id": 45850027, "link": "https://stackoverflow.com/questions/45850027/specify-initial-values-for-for-loop/45850120#45850120", "title": "Specify Initial Values for For Loop", "body": "<p>Just change the function</p>\n\n<pre><code>def create_m_(y, m, theta, mc, theta_mc)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>def create_m_(y, m, theta, mc=initial_value, theta_mc=initial_value)\n</code></pre>\n\n<p>When you call this function for the first time without specifying the value of <code>mc</code> or <code>theta-mc</code>, they will default to the initial value.</p>\n"}], "owner": {"reputation": 47, "user_id": 8446538, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc81c4cc5941f719437ba30d963faebc?s=128&d=identicon&r=PG&f=1", "display_name": "Dine", "link": "https://stackoverflow.com/users/8446538/dine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503528050, "creation_date": 1503526153, "last_edit_date": 1503527777, "question_id": 45850027, "link": "https://stackoverflow.com/questions/45850027/specify-initial-values-for-for-loop", "title": "Specify Initial Values for For Loop", "body": "<p>I am currently working on coding a recursive algorithm. I created functions similar to the one below with a lot of for loops. </p>\n\n<pre><code>def create_m_(y, m, theta, mc, theta_mc):\n    for i in range (len(data[0])-1):   \n        m = create_m(y)[i]\n        theta = theta_m[i]\n        mc = create_mc(y)[i-1]\n        create_theta_mc[i-1] \n        m_ =  (m * theta_mc + mc * theta + m * mc)\n        return m_\n</code></pre>\n\n<p>The only thing is: the initial values of mc and theta_mc that will start the loop are not calculated using the formulas in the function (these initial values are specific cases). How do I got about setting the loop to specify the first values of mc and theta_mc?</p>\n\n<p>EDIT:\nCan I do this?</p>\n\n<pre><code>def create_m_(y, m, theta, mc, theta_mc):\n    for i in range (len(data[0])-1): \n        if i == 1:\n            m = m_2\n            theta = theta_m_2\n        else:        \n            m = create_m(y)[i]\n            theta = theta_m[i]\n            mc = create_mc(y)[i-1]\n            create_theta_mc[i-1] \n            m_ =  (m * theta_mc + mc * theta + m * mc)\n        return m_\n</code></pre>\n"}, {"tags": ["jquery", "python", "ajax", "flask", "flask-wtforms"], "comments": [{"owner": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "edited": false, "score": 0, "creation_date": 1503530770, "post_id": 45849953, "comment_id": 78659611, "body": "Success has stuff, just omitted it - it&#39;s never getting executed, it literally renders to this <a href=\"http://imgur.com/a/1lonz\" rel=\"nofollow noreferrer\">imgur.com/a/1lonz</a>  Traceback?  That&#39;s possible in and javascript?  Firebug shows the request but then it &quot;redirects&quot; to the blank page shown and cannot grab any firebug info."}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503530803, "post_id": 45849953, "comment_id": 78659619, "body": "You are returning json so it is showing json.To check the working of success function put <code>console.log(&#39;something&#39;)</code> in it."}, {"owner": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "reply_to_user": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503530839, "post_id": 45849953, "comment_id": 78659626, "body": "Of course I am returning json - the success function never fires - it acts like it is redirecting.  <a href=\"http://imgur.com/a/1lonz\" rel=\"nofollow noreferrer\">imgur.com/a/1lonz</a> is what I get in the browser.  My template literally goes away and I am taken to a new page on the same page with just my json response."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "edited": false, "score": 0, "creation_date": 1503532720, "post_id": 45850898, "comment_id": 78660065, "body": "I&#39;ve seen this answer on here, tried both as false, same issue with the response"}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "reply_to_user": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "edited": false, "score": 0, "creation_date": 1503532806, "post_id": 45850898, "comment_id": 78660086, "body": "@weevisss Then try error and complete callback function to see what is your problem and post it here"}, {"owner": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "edited": false, "score": 0, "creation_date": 1503532980, "post_id": 45850898, "comment_id": 78660122, "body": "They don&#39;t fire.  It&#39;s like flask&#39;s response is acting as a redirect - but the logs don&#39;t show any new requests, and I do get a 200 response from my POST."}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "reply_to_user": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "edited": false, "score": 0, "creation_date": 1503533219, "post_id": 45850898, "comment_id": 78660178, "body": "You should upload the response code of flask . Where do you and how you implement it."}, {"owner": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "edited": false, "score": 0, "creation_date": 1503533708, "post_id": 45850898, "comment_id": 78660278, "body": "I&#39;ve added the full view to the original comment  note that &quot;form&quot; is also an ajax post that works - it just doesn&#39;t involve file uploads   form2 is the issue"}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "reply_to_user": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "edited": false, "score": 0, "creation_date": 1503534739, "post_id": 45850898, "comment_id": 78660539, "body": "In your form tag, action=&#39;/update/update_firmare&#39; while the route is defined as /update_firmware .why ?  This is 6 o clock in the morning I gotta go to sleep . Will come back and see the problem."}, {"owner": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "edited": false, "score": 0, "creation_date": 1503535143, "post_id": 45850898, "comment_id": 78660621, "body": "The decorator provides the prefix  I&#39;ve solved my issue - thanks a bunch for your help.   I was just not preventing the default action of the button soon enough apparently..."}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "reply_to_user": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "edited": false, "score": 0, "creation_date": 1503535330, "post_id": 45850898, "comment_id": 78660665, "body": "You should add it as an answer ."}], "tags": [], "owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "is_accepted": false, "score": 0, "last_activity_date": 1503532398, "creation_date": 1503532398, "answer_id": 45850898, "question_id": 45849953, "link": "https://stackoverflow.com/questions/45849953/ajax-file-upload-in-flask-json-response-in-browser-rather-than-success-call/45850898#45850898", "title": "Ajax File Upload in Flask - json response in browser rather than success call", "body": "<p>For most of these cases ,the main problem lies in setting the <code>contentType</code> to something . Both of the following two things are set to be false :</p>\n\n<blockquote>\n  <ol>\n  <li><strong>processData</strong>-Because jQuery will convert the files arrays into strings and the server can't pick it up.</li>\n  <li><strong>contentType</strong>-Set this to false because jQuery defaults to application/x-www-form-urlencoded and doesn't send the files.</li>\n  </ol>\n</blockquote>\n\n<p>See if this is the problem you are facing.</p>\n"}, {"comments": [{"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 1, "creation_date": 1503565391, "post_id": 45851332, "comment_id": 78672388, "body": "When you are writing an answer here you should add the solution code which worked for you plus explanation ."}], "tags": [], "owner": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "is_accepted": false, "score": 0, "last_activity_date": 1503536062, "creation_date": 1503536062, "answer_id": 45851332, "question_id": 45849953, "link": "https://stackoverflow.com/questions/45849953/ajax-file-upload-in-flask-json-response-in-browser-rather-than-success-call/45851332#45851332", "title": "Ajax File Upload in Flask - json response in browser rather than success call", "body": "<p>I was just not preventing the default action of the button early enough.</p>\n"}], "owner": {"reputation": 103, "user_id": 1623528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e980b7daa57f2788578539abf3ac463?s=128&d=identicon&r=PG", "display_name": "weevisss", "link": "https://stackoverflow.com/users/1623528/weevisss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1093, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1503536062, "creation_date": 1503525751, "last_edit_date": 1503533647, "question_id": 45849953, "link": "https://stackoverflow.com/questions/45849953/ajax-file-upload-in-flask-json-response-in-browser-rather-than-success-call", "title": "Ajax File Upload in Flask - json response in browser rather than success call", "body": "<p>So I'm trying to upload a file in flask using ajax, the file seems to upload fine but when returning a response from my view after the form is validated it doesn't go into my ajax function but it seems my browser just displays a white screen with the json shown</p>\n\n<p>Here is a bit of my code - ajax request - using jquery 2.0.3</p>\n\n<pre><code>            var form_data = new FormData($('#firmware_file')[0]);\n            var url = \"{{ url_for('update.update_firmware') }}\";\n            $.ajax({\n                type: 'POST',\n                url: url,\n                data: form_data,\n                processData: false,\n                contentType: 'application/json',\n                cache: false,\n                async: false,\n                success: function(data) {\n                    console.log(\"YES I DO STUFF HERE IT NEVER FIRES\");\n                }\n            });\n</code></pre>\n\n<p>flask form processing</p>\n\n<pre><code>if form2.validate_on_submit():\n    uploaded_file = request.files[form2.firmware_file.name]\n    file_data = uploaded_file.read()\n    return_data = {}\n    return_data['uploading'] =  'blerg' #uploaded_file.filename\n    file_path = os.path.join('/tmp', secure_filename(uploaded_file.filename))\n    open(file_path, 'w').write(file_data)\n\n    APP.decoder.firmware_file = file_path\n    APP.decoder.firmware_length = len(filter(lambda x: x[0] == ':', file_data) )\n\n    return jsonify(return_data)\n</code></pre>\n\n<p>Here is the form definition</p>\n\n<pre><code>&lt;form id=\"uploader_manual\" class=\"form-box \" method=\"POST\" action=\"/update/update_firmware\" enctype=\"multipart/form-data\"&gt;\n&lt;div class=\"control-group\"&gt;\n    &lt;label class=\"control-label\" for=\"firmware_file\"&gt;\n    &lt;label for=\"firmware_file\"&gt;Firmware File&lt;/label&gt;\n    &lt;/label&gt;\n&lt;div class=\"controls\"&gt;\n    &lt;input class=\"firmware_file\" id=\"firmware_file\" name=\"firmware_file\" type=\"file\"&gt;\n    &lt;span class=\"help-inline\"&gt;&lt;/span&gt;\n\n&lt;/div&gt;\n&lt;/div&gt;                  \n&lt;span id=\"submit-group\" class=\"control-group\"&gt;\n    &lt;span class=\"form-actions\"&gt;\n        &lt;input class=\"btn btn-primary\" id=\"submit\" name=\"submit\" value=\"Upload\" type=\"submit\"&gt;\n    &lt;/span&gt;\n&lt;/span&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>This seems to just return a white screen with my \"uploading\": \"filename\" json.</p>\n\n<p>Full flask view:</p>\n\n<pre><code>@updater.route('/update_firmware', methods=['GET', 'POST'] )\n@login_required\n@admin_required\ndef update_firmware():\n    current_firmware = APP.decoder.device.version_number\n    all_ok = \"true\"\n    form = UpdateFirmwareJSONForm()\n    form2 = UpdateFirmwareForm()\n    form2.multipart = True\n    form.firmware_file_json.choices = []\n    data = None\n    try:\n        response = urllib.urlopen(FIRMWARE_JSON_URL)\n    except IOError:\n        flash('Cannot connect to server', 'error')\n        all_ok = \"false\"\n\n    if all_ok is \"true\":\n        data = json.loads(response.read())\n\n        counter = 0\n        for firmware in data['firmware']:\n            form.firmware_file_json.choices.insert(counter,(firmware['file'], firmware['version']))\n            counter = counter + 1\n\n    if form.validate_on_submit():\n        file_name = form.firmware_file_json.data\n        zip, headers = urllib.urlretrieve(file_name)\n        return_data = {}\n\n        with zipfile.ZipFile(zip) as zf:\n            files = [name for name in zf.namelist() if name.endswith('.hex')]\n            for filename in files:\n                file_path = os.path.join('/tmp', secure_filename(filename))\n                file_data = zf.open(filename, 'r').read()\n                return_data['uploading'] = filename\n                if not os.path.isfile(file_path):\n                    open(file_path, 'w').write(file_data)\n\n                APP.decoder.firmware_file = file_path\n                APP.decoder.firmware_length = len(filter(lambda x: x[0] == ':', file_data) )\n\n            zf.close()\n        return jsonify(return_data);\n\n    if form2.validate_on_submit():\n        uploaded_file = request.files[form2.firmware_file.name]\n        file_data = uploaded_file.read()\n        return_data = {}\n        return_data['uploading'] =  uploaded_file.filename\n        file_path = os.path.join('/tmp', secure_filename(uploaded_file.filename))\n        open(file_path, 'w').write(file_data)\n\n        APP.decoder.firmware_file = file_path\n        APP.decoder.firmware_length = len(filter(lambda x: x[0] == ':', file_data) )\n\n\n        return jsonify(return_data)\n\n    return render_template('updater/firmware_json.html', current_firmware=current_firmware, form=form, form2=form2, firmwarejson=data, all_ok=all_ok);\n</code></pre>\n"}, {"tags": ["python", "decorator"], "comments": [{"owner": {"reputation": 2916, "user_id": 1219585, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/DQ7AJ.jpg?s=128&g=1", "display_name": "Filip Malczak", "link": "https://stackoverflow.com/users/1219585/filip-malczak"}, "edited": false, "score": 0, "creation_date": 1503525917, "post_id": 45849929, "comment_id": 78658166, "body": "Have you tired it for way bigger values? My guess would be that for 7 and 10 that little overhead introduced by memoization is bigger than cost of actual calculations. I suppose that for fibbonacci(100) it may yield expected results."}, {"owner": {"reputation": 1980, "user_id": 2593536, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OYOEA.png?s=128&g=1", "display_name": "Mai", "link": "https://stackoverflow.com/users/2593536/mai"}, "edited": false, "score": 1, "creation_date": 1503526097, "post_id": 45849929, "comment_id": 78658223, "body": "Would that be because of your assert statement? And as a side note, you do not need the pass statement at the end. You can check for negative n, and raise an error, then check for base case and return. If both checks fail, it must be the recursive case, therefore no need to use else."}, {"owner": {"reputation": 7592, "user_id": 840582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/R97cw.png?s=128&g=1", "display_name": "Chen A.", "link": "https://stackoverflow.com/users/840582/chen-a"}, "edited": false, "score": 0, "creation_date": 1503526480, "post_id": 45849929, "comment_id": 78658375, "body": "Mai this little change makes the code easier to read, thanks for the note"}], "answers": [{"comments": [{"owner": {"reputation": 7592, "user_id": 840582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/R97cw.png?s=128&g=1", "display_name": "Chen A.", "link": "https://stackoverflow.com/users/840582/chen-a"}, "edited": false, "score": 0, "creation_date": 1503526244, "post_id": 45849976, "comment_id": 78658270, "body": "I don&#39;t know how I missed that, thanks! when I moved the dictionary creation outside of the wrapper (inside mem_fib) the results were as I expected"}, {"owner": {"reputation": 7592, "user_id": 840582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/R97cw.png?s=128&g=1", "display_name": "Chen A.", "link": "https://stackoverflow.com/users/840582/chen-a"}, "edited": false, "score": 0, "creation_date": 1503526262, "post_id": 45849976, "comment_id": 78658277, "body": "<code>print(timeit.timeit(&#39;decorators.fibonacci(10)&#39;, setup=&#39;import decorators&#39;)) 0.248986574759</code>"}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 5, "last_activity_date": 1503525896, "creation_date": 1503525896, "answer_id": 45849976, "question_id": 45849929, "link": "https://stackoverflow.com/questions/45849929/memoization-decorator-runs-slower-than-original-function/45849976#45849976", "title": "Memoization decorator runs slower than original function", "body": "<p>You create a new dictionary every time the function is called, because your <code>wrapper</code> function always does <code>wrapper.d = {}</code>. Therefore the cache will never be populated, and your code has the additional overhead of creating the dictionary each time.</p>\n\n<p>That line should go outside that function, before you return it from <code>mem_fib</code>.</p>\n"}], "owner": {"reputation": 7592, "user_id": 840582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/R97cw.png?s=128&g=1", "display_name": "Chen A.", "link": "https://stackoverflow.com/users/840582/chen-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 45849976, "answer_count": 1, "score": 0, "last_activity_date": 1503526786, "creation_date": 1503525627, "last_edit_date": 1503526786, "question_id": 45849929, "link": "https://stackoverflow.com/questions/45849929/memoization-decorator-runs-slower-than-original-function", "title": "Memoization decorator runs slower than original function", "body": "<p>I'm doing memoized decorator exercise with fibonacci function. The memoized function should be much faster when the input gets large, because it returns the result from a dictionary instead of computing the result again.</p>\n\n<p>I'm using <code>timeit.timeit()</code> to measure the execution time of the function with memoized on vs off.\nThe result I get are exactly the opposite of what I expect. The execution without the decorator runs much faster.</p>\n\n<pre><code># memorized decorator for fibonacci series\ndef mem_fib(f):\n    def wrapper(n):\n        wrapper.d = {}  # create the attr member of THIS wrapper\n        if n in wrapper.d:\n            return wrapper.d[n]\n        wrapper.d[n] = f(n)  # save f() return in a dict\n        return wrapper.d[n]\n    return wrapper\n\n@mem_fib\ndef fibonacci(n):\n    assert n &gt;= 0\n    if n &lt; 2:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n</code></pre>\n\n<p>I'm running commands on PyCharm python's console.</p>\n\n<p><strong><em>@with decorator</em></strong></p>\n\n<pre><code>&gt;&gt;&gt; print(timeit.timeit('decorators.fibonacci(7)', setup='import decorators'))\n19.6940833939\n&gt;&gt;&gt; print(timeit.timeit('decorators.fibonacci(10)', setup='import decorators'))\n85.7157191166\n</code></pre>\n\n<p><strong><em>without the decorator</em></strong></p>\n\n<pre><code>&gt;&gt;&gt; print(timeit.timeit('decorators.fibonacci(7)', setup='import decorators'))\n5.10131571594\n&gt;&gt;&gt; print(timeit.timeit('decorators.fibonacci(10)', setup='import decorators'))\n21.9784012801\n</code></pre>\n\n<p>I ran the timeit multiple times, I just put one output to sum it up. What am I missing?</p>\n\n<p>Thanks</p>\n\n<p><strong>Update</strong>: Thanks to Daniel's answer, I found my mistake. I moved the dictionary creation outside of wrapper, and the results were much better.</p>\n\n<pre><code>&gt;&gt;&gt; print(timeit.timeit('decorators.fibonacci(10)', setup='import decorators'))\n0.248986574759\n</code></pre>\n"}, {"tags": ["python", "reportlab"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1503525722, "post_id": 45849888, "comment_id": 78658094, "body": "What makes you think this is caused by a specific character? The error tells you it is caused by an invalid attribute name. You need to show the actual code you are using that triggers this error."}, {"owner": {"reputation": 11, "user_id": 8508515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RTgAL2tQ3J4/AAAAAAAAAAI/AAAAAAAAAFY/xzRJHaOjst8/photo.jpg?sz=128", "display_name": "Christopher Jacob", "link": "https://stackoverflow.com/users/8508515/christopher-jacob"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1503537989, "post_id": 45849888, "comment_id": 78661293, "body": "My apologies, and thanks for looking. If not a character, perhaps something in the text is getting misconstrued as an attribute. I say this because things have been working fine until I used a new source to pull the data from. (This source is heavily formatted) Updates with actual code snip...."}], "owner": {"reputation": 11, "user_id": 8508515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RTgAL2tQ3J4/AAAAAAAAAAI/AAAAAAAAAFY/xzRJHaOjst8/photo.jpg?sz=128", "display_name": "Christopher Jacob", "link": "https://stackoverflow.com/users/8508515/christopher-jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 530, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503538042, "creation_date": 1503525396, "last_edit_date": 1503538042, "question_id": 45849888, "link": "https://stackoverflow.com/questions/45849888/report-lab-raise-valueerrorparaparser-syntax-error-s-message-valueerr", "title": "Report Lab - raise ValueError(&#39;paraparser: syntax error: %s&#39; % message) ValueError: (u&quot;paraparser: syntax error: invalid attribute name alt attrMap", "body": "<p>Using Reportlab to generate pdfs and all has been going well. Ran into an issue that throws the following error...</p>\n\n<pre><code>raise ValueError('paraparser: syntax error: %s' % message)\nValueError: (u\"paraparser: syntax error: invalid attribute name alt attrMap=['height', 'src', 'valign', 'width']\", '\\nparagraph text u\\'&lt;para&gt;&lt;p&gt;&lt;strong&gt;\n</code></pre>\n\n<p>It seems this is being caused by an a character that ReportLab doesn't like, as I can get around it using \"escape\" but that results in the paragraph ignoring formatting such as <code>&lt;P&gt;</code> and <code>&lt;strong&gt;</code></p>\n\n<p>Is there a quick way to identify the character in question? Or perhaps another way to work around this issue?</p>\n\n<pre><code>def getDescription(eventid):\n\n    res = tq.get(\"api/events/%s/\" % eventid)\n    ed = res['data']['description']\n\n    if not ed:\n        logger.debug(\"No description exists for event %s. Skipping this section.\" % eventid)\n        return()\n    else:   \n        formattedDesc = ed.replace('\\n', '&lt;br/&gt;')\n        logger.debug(\"Description of event is \\n %s\" % formattedDesc)\n        #Story.append(Paragraph(escape(formattedDesc), styles[\"TQ-Description\"]))\n        #Changed to the following to prevent an error thrown by XX reports. Need to figure out why.\n        Story.append(Paragraph(escape(formattedDesc), styles[\"TQ-Description\"]))\n</code></pre>\n"}, {"tags": ["python", "jenkins"], "comments": [{"owner": {"reputation": 1563, "user_id": 3404040, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JrNTUKgimeo/AAAAAAAAAAI/AAAAAAAAACw/-9QAfnVSUDs/photo.jpg?sz=128", "display_name": "Take_Care_", "link": "https://stackoverflow.com/users/3404040/take-care"}, "edited": false, "score": 2, "creation_date": 1503525601, "post_id": 45849880, "comment_id": 78658056, "body": "when using <code>sudo</code> You must pay attention to the option <code>--preserve-env</code>, without it env variables are lost when switching user context."}, {"owner": {"reputation": 19646, "user_id": 494074, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/741e480d426fabd85825861bd6481ccd?s=128&d=identicon&r=PG", "display_name": "Ankur Agarwal", "link": "https://stackoverflow.com/users/494074/ankur-agarwal"}, "reply_to_user": {"reputation": 1563, "user_id": 3404040, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JrNTUKgimeo/AAAAAAAAAAI/AAAAAAAAACw/-9QAfnVSUDs/photo.jpg?sz=128", "display_name": "Take_Care_", "link": "https://stackoverflow.com/users/3404040/take-care"}, "edited": false, "score": 0, "creation_date": 1503547173, "post_id": 45849880, "comment_id": 78663364, "body": "@Take_Care_ If you put this as an answer I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 1563, "user_id": 3404040, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JrNTUKgimeo/AAAAAAAAAAI/AAAAAAAAACw/-9QAfnVSUDs/photo.jpg?sz=128", "display_name": "Take_Care_", "link": "https://stackoverflow.com/users/3404040/take-care"}, "is_accepted": true, "score": 2, "last_activity_date": 1503560879, "creation_date": 1503560879, "answer_id": 45855846, "question_id": 45849880, "link": "https://stackoverflow.com/questions/45849880/getting-jenkins-build-environment-variables-from-within-a-python-script/45855846#45855846", "title": "Getting Jenkins BUILD environment variables from within a python script", "body": "<p>When using <code>sudo</code> You must pay attention to the option <code>--preserve-env</code>, without it env variables are lost when switching user context.</p>\n"}], "owner": {"reputation": 19646, "user_id": 494074, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/741e480d426fabd85825861bd6481ccd?s=128&d=identicon&r=PG", "display_name": "Ankur Agarwal", "link": "https://stackoverflow.com/users/494074/ankur-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1382, "favorite_count": 0, "accepted_answer_id": 45855846, "answer_count": 1, "score": 1, "last_activity_date": 1503560879, "creation_date": 1503525341, "last_edit_date": 1503526040, "question_id": 45849880, "link": "https://stackoverflow.com/questions/45849880/getting-jenkins-build-environment-variables-from-within-a-python-script", "title": "Getting Jenkins BUILD environment variables from within a python script", "body": "<p>Jenkins version: 2.74</p>\n\n<p>As part of my build step I am running a python script and was hoping to access Jenkins build variables like BUILD_ID, BUILD_NUMBER, BUILD_URL etc.</p>\n\n<p>I did the following in my script just to try it out but did not see any of the keys above listed:</p>\n\n<pre><code>import os\n\nprint os.environ\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n    'USERNAME': 'root',\n    'LANG': 'en_US.UTF-8',\n    'TERM': 'xterm-256color',\n    'SHELL': '/bin/bash',\n    'XDG_RUNTIME_DIR': '/run/user/1000',\n    'SUDO_COMMAND': '/bin/su myuser -c python jenkinstest.py',\n    'SHLVL': '1',\n    'HOME': '/usr/home1/myuser',\n    'SUDO_UID': '117',\n    'SUDO_GID': '125',\n    'PWD': '/var/lib/jenkins/workspace/script-test',\n    'LOGNAME': 'myuser',\n    'USER': 'myuser',\n    'PATH': '/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games',\n    'MAIL': '/var/mail/myuser',\n    'SUDO_USER': 'jenkins',\n    'XDG_SESSION_ID': '6',\n    '_': '/usr/bin/python'\n}\n</code></pre>\n\n<p>Why so?</p>\n\n<p>And how can I access the keys I mentioned above from within the python script (without using the Jenkins python/json API) ?</p>\n"}, {"tags": ["python", "r", "matplotlib", "ggplot2", "seaborn"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1503527509, "post_id": 45849876, "comment_id": 78658711, "body": "This question has already been asked at some point. Unfortunately, i cannot find it at the moment. Maybe someone is better at googling than I am."}, {"owner": {"reputation": 39, "user_id": 3163809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/028f86e6fc846ed00745bfff3e9ae714?s=128&d=identicon&r=PG&f=1", "display_name": "spearous", "link": "https://stackoverflow.com/users/3163809/spearous"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1503607486, "post_id": 45849876, "comment_id": 78700118, "body": "Thank you for not deleting this. I can imagine that people have already done this. But I couldn&#39;t find related information, except using mathematica with their embedded markers : <a href=\"http://reference.wolfram.com/language/ref/PlotMarkers.html\" rel=\"nofollow noreferrer\">reference.wolfram.com/language/ref/PlotMarkers.html</a>"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1503608446, "post_id": 45849876, "comment_id": 78700572, "body": "Questions will anyways not deleted, they might just be closed as duplicate. The condition being that someone actually finds that duplicate. ;-) (The answer to the question I&#39;m refering to used a similar approach as below, using an image plot, but in matplotlib instead of R)"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 3163809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/028f86e6fc846ed00745bfff3e9ae714?s=128&d=identicon&r=PG&f=1", "display_name": "spearous", "link": "https://stackoverflow.com/users/3163809/spearous"}, "edited": false, "score": 0, "creation_date": 1503607262, "post_id": 45850506, "comment_id": 78700006, "body": "Ok, i see. The idea is to use an image as the marker ,,, smart! I was thinking of drawing a set of concentric circles and filling them with the same color but different alpha values. Thanks!"}], "tags": [], "owner": {"reputation": 20011, "user_id": 1166684, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/IC4i3.jpg?s=128&g=1", "display_name": "Marco Sandri", "link": "https://stackoverflow.com/users/1166684/marco-sandri"}, "is_accepted": true, "score": 3, "last_activity_date": 1503528977, "creation_date": 1503528977, "answer_id": 45850506, "question_id": 45849876, "link": "https://stackoverflow.com/questions/45849876/can-python-draw-markers-with-a-3d-effect/45850506#45850506", "title": "can python draw markers with a 3d effect?", "body": "<p>Here is an example using <code>ggplot2</code> in R.<br>\nHope it can help you.</p>\n\n<pre><code>library(\"ggplot2\")\nlibrary(\"ggimage\")\n\nset.seed(1)\nd &lt;- data.frame(x = rnorm(10),  y = rnorm(10),\n     image = rep(\"https://cdn.pixabay.com/photo/2015/11/26/19/19/ball-1064402_960_720.png\",10))\n\nggplot(d, aes(x, y)) +\ngeom_line(lwd=3, color=\"#FF000044\") + \ngeom_image(aes(image=image), size=.05) + \ntheme_bw()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5FaBs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5FaBs.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 39, "user_id": 3163809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/028f86e6fc846ed00745bfff3e9ae714?s=128&d=identicon&r=PG&f=1", "display_name": "spearous", "link": "https://stackoverflow.com/users/3163809/spearous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 3, "accepted_answer_id": 45850506, "answer_count": 1, "score": 3, "last_activity_date": 1503865496, "creation_date": 1503525311, "last_edit_date": 1503865496, "question_id": 45849876, "link": "https://stackoverflow.com/questions/45849876/can-python-draw-markers-with-a-3d-effect", "title": "can python draw markers with a 3d effect?", "body": "<p>Can Python, either using matplotlib or seaborn, draw markers with 3D effect? </p>\n\n<p>Or any other software can do this? (like ggplot in R or origin etc.)</p>\n\n<p>To explain my points, the following graphs are examples:\n<img src=\"https://i.stack.imgur.com/ZqRwt.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/FPb5z.jpg\" alt=\"enter image description here\"></p>\n\n<p>The pink/red/black dots have a 3D effect.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "mysql", "list", "csv"], "comments": [{"owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "edited": false, "score": 2, "creation_date": 1503525554, "post_id": 45849828, "comment_id": 78658043, "body": "Running your code is giving me the expected outcome."}, {"owner": {"reputation": 201, "user_id": 8370836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d49aacdf62856cdf65b3cabf831f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Violet Red", "link": "https://stackoverflow.com/users/8370836/violet-red"}, "edited": false, "score": 0, "creation_date": 1503526893, "post_id": 45849828, "comment_id": 78658507, "body": "<code>&gt;&gt;&gt; x = [111111, 2222, 3333333, 4444444] &gt;&gt;&gt; y = [8888888, 2222, 6748987, 3688777, 55555] &gt;&gt;&gt; set(x) &amp; set(y) {2222}</code>  Works fine for me."}, {"owner": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "edited": false, "score": 0, "creation_date": 1503527237, "post_id": 45849828, "comment_id": 78658629, "body": "Any reason it does not work from my end? Would it be due to Varchar (MySql)  vs. Number (csv) data type inside Lists?"}, {"owner": {"reputation": 201, "user_id": 8370836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d49aacdf62856cdf65b3cabf831f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Violet Red", "link": "https://stackoverflow.com/users/8370836/violet-red"}, "edited": false, "score": 0, "creation_date": 1503527300, "post_id": 45849828, "comment_id": 78658648, "body": "btw, what crazy things are you doing here: <code>b = (&#39;[{}]&#39;.format(&#39;, &#39;.join(a)))</code>? Shouldn&#39;t you then compare a to c and not b to c?"}, {"owner": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "edited": false, "score": 0, "creation_date": 1503527712, "post_id": 45849828, "comment_id": 78658781, "body": "That part is just to delete single quote around a. The original output from MySql has all single quote around a (Varchar). So, I did one more process to delete a which is b."}, {"owner": {"reputation": 201, "user_id": 8370836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d49aacdf62856cdf65b3cabf831f1a?s=128&d=identicon&r=PG&f=1", "display_name": "Violet Red", "link": "https://stackoverflow.com/users/8370836/violet-red"}, "edited": false, "score": 0, "creation_date": 1503528357, "post_id": 45849828, "comment_id": 78658989, "body": "Basically, your join() func accepts a list and joins it into a single string -&gt; format() inserts it into another string, and finally set() tears it to single characters like this <code>&gt;&gt;&gt; set(b) {&#39;5&#39;, &#39; &#39;, &#39;,&#39;, &#39;3&#39;, &#39;1&#39;, &#39;]&#39;, &#39;4&#39;, &#39;2&#39;, &#39;[&#39;}</code>.  If you need a list of integers instead of a list of strings, why not to convert them just in the above comprehension: <code>a = [int(item[0]) for item in cursor.fetchall()]</code>"}, {"owner": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "edited": false, "score": 0, "creation_date": 1503528891, "post_id": 45849828, "comment_id": 78659160, "body": "I cannot convert string into integer because there are some value that are not numbers on MySQL. How can I convert number into string on the second case (csv)?"}], "answers": [{"tags": [], "owner": {"reputation": 559, "user_id": 8478550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blgG0.png?s=128&g=1", "display_name": "Vico", "link": "https://stackoverflow.com/users/8478550/vico"}, "is_accepted": false, "score": 0, "last_activity_date": 1503526058, "creation_date": 1503526058, "answer_id": 45850008, "question_id": 45849828, "link": "https://stackoverflow.com/questions/45849828/how-to-find-match-from-two-lists-from-mysql-and-csv/45850008#45850008", "title": "How to find match from two Lists (from MySQL and csv)", "body": "<p>Yeah, intersection should work. I tested your code and got:</p>\n\n<pre><code>ls1 = [111111, 2222, 3333333, 4444444]\nls2 = [8888888, 2222, 6748987, 3688777, 55555]\n\nset(ls1).intersection(ls2)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{2222}\n</code></pre>\n\n<p>Another way of doing this would be:</p>\n\n<pre><code>ls1 = [111111, 2222, 3333333, 4444444]\nls2 = [8888888, 2222, 6748987, 3688777, 55555]\n\n[x for x in ls1 if x in ls2]\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[2222]\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 3842845, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/51bIs.jpg?s=128&g=1", "display_name": "Java", "link": "https://stackoverflow.com/users/3842845/java"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503526058, "creation_date": 1503525053, "question_id": 45849828, "link": "https://stackoverflow.com/questions/45849828/how-to-find-match-from-two-lists-from-mysql-and-csv", "title": "How to find match from two Lists (from MySQL and csv)", "body": "<p>I am trying to match outcome of data from two Lists.</p>\n\n<p>First data source is from MySQL. </p>\n\n<p>Second data source is from csv.</p>\n\n<p>The code for the first output (MySQL) or b is like:</p>\n\n<pre><code>conn = MySQLdb.connect(\"localhost\", \"username\", \"pwd\", \"databasename\")\ncursor = conn.cursor()\nquery = \"select ID from Table1\"\ncursor.execute(query)\na = [item[0] for item in cursor.fetchall()]\nb = ('[{}]'.format(', '.join(a)))\n</code></pre>\n\n<p>The code for the second output (csv) or c is like:</p>\n\n<pre><code>db = pd.read_csv(File, usercols=['ID'], skiprows=skip)\nc = dg['ID'].values.tolist()\n</code></pre>\n\n<p>Second data source is csv file.\nI was trying bottom codes to get the match.</p>\n\n<pre><code>set(b).intersection(c)\nset(b) &amp; set(c)\n</code></pre>\n\n<p>But, I do not see the match as I expected.</p>\n\n<p>For instance, first List has data like:</p>\n\n<pre><code>[111111, 2222, 3333333, 4444444]\n</code></pre>\n\n<p>Second List has data like:</p>\n\n<pre><code>[8888888, 2222, 6748987, 3688777, 55555]\n</code></pre>\n\n<p>I was expecting to get the result of:</p>\n\n<pre><code>set([2222])\n</code></pre>\n\n<p>But I only got</p>\n\n<pre><code>set([])\n</code></pre>\n\n<p>Is there any reason such as data type (that might be causing no match) from two Lists?</p>\n"}, {"tags": ["python", "python-3.x", "raspberry-pi", "raspberry-pi3", "gpio"], "comments": [{"owner": {"reputation": 2718, "user_id": 3151902, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fc5583056ec05b944374d2c3650f1b8e?s=128&d=identicon&r=PG&f=1", "display_name": "user3151902", "link": "https://stackoverflow.com/users/3151902/user3151902"}, "edited": false, "score": 0, "creation_date": 1503525023, "post_id": 45849805, "comment_id": 78657823, "body": "Please also add the specific error/exception you are getting"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8467049"}, "reply_to_user": {"reputation": 2718, "user_id": 3151902, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fc5583056ec05b944374d2c3650f1b8e?s=128&d=identicon&r=PG&f=1", "display_name": "user3151902", "link": "https://stackoverflow.com/users/3151902/user3151902"}, "edited": false, "score": 0, "creation_date": 1503525122, "post_id": 45849805, "comment_id": 78657869, "body": "No error. Doesn&#39;t work. It even wait 2 secoonds, but doesn&#39;t work. Doesn&#39;t turn on the pin"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503525305, "post_id": 45849805, "comment_id": 78657959, "body": "It&#39;s a 5v AC motor? You&#39;re using <code>BOARD</code> pin layout, are you sure you&#39;ve got it connected to the correct pin? <code>BCM</code> 7 is <code>BOARD</code> 26. Also, you&#39;re not turning the pin on and off, you&#39;re turning it on and on."}, {"owner": {"reputation": 12943, "user_id": 2673029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NbcZN.jpg?s=128&g=1", "display_name": "Isma", "link": "https://stackoverflow.com/users/2673029/isma"}, "edited": false, "score": 0, "creation_date": 1503525385, "post_id": 45849805, "comment_id": 78657987, "body": "<a href=\"https://business.tutsplus.com/tutorials/controlling-dc-motors-using-python-with-a-raspberry-pi--cms-20051\" rel=\"nofollow noreferrer\">business.tutsplus.com/tutorials/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8467049"}, "edited": false, "score": 0, "creation_date": 1503525499, "post_id": 45849805, "comment_id": 78658021, "body": "I copied the code wrong, because I use vnc to program on raspbery pi. It&#39;s on and off. I made sure that every pin is connected in the right place. It&#39;s a 5v motor and it work&#39;s when I connect it to the 5v pin on the raspberry pi"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503525657, "post_id": 45849805, "comment_id": 78658076, "body": "The Pi GPIO is only 3.3v, not 5v. That could also be the issue if you&#39;re using the correct pin scheme."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8467049"}, "edited": false, "score": 0, "creation_date": 1503525903, "post_id": 45849805, "comment_id": 78658162, "body": "But why doesn&#39;t the code work? The motor is working, the board is working, I tried with both BCM and BOARD. What is wrong?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503526170, "post_id": 45849805, "comment_id": 78658242, "body": "I said, the GPIO on the Pi puts out only 3.3v. Perhaps the motor won&#39;t turn at 3.3v."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8467049"}, "edited": false, "score": 0, "creation_date": 1503526212, "post_id": 45849805, "comment_id": 78658260, "body": "It works even with 3.3V pin"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503526239, "post_id": 45849805, "comment_id": 78658268, "body": "Please show a picture of your setup."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8467049"}, "edited": false, "score": 0, "creation_date": 1503526352, "post_id": 45849805, "comment_id": 78658316, "body": "Wait a moment ."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8467049"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503527212, "post_id": 45849805, "comment_id": 78658620, "body": "@stevieb Here they are"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8467049"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1503527353, "post_id": 45849805, "comment_id": 78658662, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/152682/discussion-between-john-smith-and-stevieb\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1503527361, "creation_date": 1503527361, "answer_id": 45850228, "question_id": 45849805, "link": "https://stackoverflow.com/questions/45849805/raspberry-pi-3-gpio-doesnt-work-python3/45850228#45850228", "title": "Raspberry PI 3 GPIO doesn&#39;t work - Python3", "body": "<p>In your question, you say you're using <code>BOARD</code> layout, but in the picture, you're using <code>BCM</code>. These details matter!</p>\n\n<p>Either change the pin number from <code>7</code> to <code>4</code>, or change the pin scheme to <code>BOARD</code> in your real code.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6079239, "user_type": "registered", "profile_image": "https://graph.facebook.com/950455775007819/picture?type=large", "display_name": "David Sami", "link": "https://stackoverflow.com/users/6079239/david-sami"}, "is_accepted": false, "score": 0, "last_activity_date": 1528890830, "creation_date": 1528890830, "answer_id": 50836616, "question_id": 45849805, "link": "https://stackoverflow.com/questions/45849805/raspberry-pi-3-gpio-doesnt-work-python3/50836616#50836616", "title": "Raspberry PI 3 GPIO doesn&#39;t work - Python3", "body": "<p>You need to setup both pins and make one the opposite value of the other to make the motor spin. </p>\n\n<pre><code>import RPi.GPIO as GPIO\nimport time\n\nGPIO.setmode(GPIO.BOARD)\nGPIO.setup(7, GPIO.OUT)\nGPIO.setup(9, GPIO.OUT)\n\n# motor runs in one direction for 1 second\nGPIO.output(7, True)\nGPIO.output(9, False)\ntime.sleep(1)\n\n# motor runs in oposite direction for 1 second (note the values have flipped)\nGPIO.output(7, False)\nGPIO.output(9, True)\ntime.sleep(1)\n\n# stop the motor (setting them both to True will also have the same effect)\nGPIO.output(7, False)\nGPIO.output(9, False)\n\nGPIO.cleanup()\n</code></pre>\n\n<p>Also, you have the mode set to BCM in the screenshot while it's BOARD in the code you gave. Make sure you're consistent with what you're setting the mode to as it'll affect what the pin's numbers are. </p>\n"}, {"tags": [], "owner": {"reputation": 249, "user_id": 917045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3da89b4af445677bc09f293f77204345?s=128&d=identicon&r=PG", "display_name": "Brian Flynn", "link": "https://stackoverflow.com/users/917045/brian-flynn"}, "is_accepted": false, "score": 0, "last_activity_date": 1544939340, "creation_date": 1544939340, "answer_id": 53799774, "question_id": 45849805, "link": "https://stackoverflow.com/questions/45849805/raspberry-pi-3-gpio-doesnt-work-python3/53799774#53799774", "title": "Raspberry PI 3 GPIO doesn&#39;t work - Python3", "body": "<p>Output pins on the raspberry pi can drive a maximum of about 16mA per pin:\n<a href=\"http://www.thebox.myzen.co.uk/Raspberry/Understanding_Outputs.html\" rel=\"nofollow noreferrer\">http://www.thebox.myzen.co.uk/Raspberry/Understanding_Outputs.html</a>\n<a href=\"https://raspberrypi.stackexchange.com/questions/9298/what-is-the-maximum-current-the-gpio-pins-can-output\">https://raspberrypi.stackexchange.com/questions/9298/what-is-the-maximum-current-the-gpio-pins-can-output</a></p>\n\n<p>This is enough current to turn on an LED, or maybe a very small motor with no load. If you want to drive a motor you would use the output pin to turn on a transistor. You would then directly power the motor from the 5v pin on the pi through the transistor to ground on the pi.</p>\n\n<p>There are lots of tutorials online on how to do this, e.g.:</p>\n\n<p><a href=\"https://circuitdigest.com/microcontroller-projects/controlling-dc-motor-using-raspberry-pi\" rel=\"nofollow noreferrer\">https://circuitdigest.com/microcontroller-projects/controlling-dc-motor-using-raspberry-pi</a>\n<a href=\"https://electronics.stackexchange.com/questions/195105/controlling-dc-motor-with-raspberry-pi\">https://electronics.stackexchange.com/questions/195105/controlling-dc-motor-with-raspberry-pi</a></p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 14402174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c4f273875ca28f8d978cbbdc9670912?s=128&d=identicon&r=PG&f=1", "display_name": "mekano", "link": "https://stackoverflow.com/users/14402174/mekano"}, "is_accepted": false, "score": 0, "last_activity_date": 1609093653, "creation_date": 1609093653, "answer_id": 65469097, "question_id": 45849805, "link": "https://stackoverflow.com/questions/45849805/raspberry-pi-3-gpio-doesnt-work-python3/65469097#65469097", "title": "Raspberry PI 3 GPIO doesn&#39;t work - Python3", "body": "<p>Have you try to use the gpiozero library ?</p>\n<pre><code>from gpiozero import Motor\nfrom time import sleep\n\nmotor = Motor(forward=4, backward=14)\n\nwhile True:\n    motor.forward()\n    sleep(5)\n    motor.backward()\n    sleep(5)\n</code></pre>\n<p>With this code you can turn ON and OFF the motor but you will have to use a H bridge IC</p>\n<p>Just look for the gpiozero library</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8467049"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1386, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1609093653, "creation_date": 1503524911, "last_edit_date": 1503527071, "question_id": 45849805, "link": "https://stackoverflow.com/questions/45849805/raspberry-pi-3-gpio-doesnt-work-python3", "title": "Raspberry PI 3 GPIO doesn&#39;t work - Python3", "body": "<p>I am a beginner in Raspberry PI robotics and I tried to write a code that turns an AC motor on and off.\nThe code:</p>\n\n<pre><code>import RPi.GPIO as GPIO\nimport time\n\nGPIO.setmode(GPIO.BOARD)\nGPIO.setup(7, GPIO.OUT)\n\nGPIO.output(7, True)\ntime.sleep(1)\nGPIO.output(7, False)\ntime.sleep(1)\n\nGPIO.cleanup()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/PFbU7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PFbU7.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/27p7g.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/27p7g.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/2PZBz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2PZBz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/OJbeW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OJbeW.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I tried even in a for loop, and it gives me the Runtime Exception. I made sure every pin is connected correctly, and even tested the motor with the 5V pin and Arduino. Everything seems ok, but the code doesn't work. There is no error in the code posted up, it doesn't work. The sleep function work (program waits 2 seconds), but the GPIO pin doesn't turn on. Why?</p>\n"}, {"tags": ["python", "c", "cython"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503524810, "post_id": 45849744, "comment_id": 78657735, "body": "Strange. Something appears to be treated as unsigned. The C <code>abs</code> returns a signed int..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1503524852, "post_id": 45849744, "comment_id": 78657754, "body": "The code in C with all of the python related stuff removed is showing <code>-1009</code>. <a href=\"https://ideone.com/aOyfLu\" rel=\"nofollow noreferrer\">ideone.com/aOyfLu</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1503525108, "post_id": 45849744, "comment_id": 78657863, "body": "Not familiar with cython, but it looks like it is producing an intermediate C source? Can we look at it?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1503525166, "post_id": 45849744, "comment_id": 78657891, "body": "Yeah, looking at <code>test.c</code> would be quite helpful for debugging this."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503526471, "post_id": 45849951, "comment_id": 78658372, "body": "Looking through the Cython source, I can confirm the existence of a <a href=\"https://github.com/cython/cython/blob/a0bbb940c847dfe92cac446c8784c34c28c92836/Cython/Includes/libc/stdlib.pxd#L51\" rel=\"nofollow noreferrer\">declaration of <code>abs</code></a> from the C stdlib with the correct return type, but also <a href=\"https://github.com/cython/cython/blob/c4ba71f488535cab6ea78c3e56e0a977d9a0f853/Cython/Utility/Builtins.c#L230\" rel=\"nofollow noreferrer\">other <code>abs</code> routines</a> that return unsigned types."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503526577, "post_id": 45849951, "comment_id": 78658404, "body": "The ones with unsigned return types appear to be used in the Cython compiler for <a href=\"https://github.com/cython/cython/blob/c4ba71f488535cab6ea78c3e56e0a977d9a0f853/Cython/Compiler/Builtin.py#L99\" rel=\"nofollow noreferrer\">calling the builtin <code>abs</code> on C ints</a>; this may be overriding your explicit <code>cimport</code>, although I feel like it shouldn&#39;t."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503527055, "post_id": 45849951, "comment_id": 78658564, "body": "I don&#39;t think Cython should have ever used an unsigned return type for the built-in <code>abs</code>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1503527164, "post_id": 45849951, "comment_id": 78658606, "body": "So why is the result 2130706744? I would expect 4294966287 (2**32 - 1009)."}], "tags": [], "owner": {"reputation": 111, "user_id": 8473731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740501f7e9adad9741ee8d755ee0ab6e?s=128&d=identicon&r=PG&f=1", "display_name": "ARN", "link": "https://stackoverflow.com/users/8473731/arn"}, "is_accepted": false, "score": 2, "last_activity_date": 1503785238, "last_edit_date": 1503785238, "creation_date": 1503525749, "answer_id": 45849951, "question_id": 45849744, "link": "https://stackoverflow.com/questions/45849744/bizarre-integer-behavior-in-cython/45849951#45849951", "title": "Bizarre integer behavior in cython", "body": "<p>Looks like this might be a bug in Cython. The relevant line in <code>test.c</code> is </p>\n\n<pre><code>__pyx_t_2 = __Pyx_PyInt_From_unsigned_int((-(__pyx_t_1 &amp; __pyx_v_4test_c)));\n</code></pre>\n\n<p>Clearly interpreting our number as unsigned gives a wrong answer. However if I remove the <code>abs</code> call, then I get</p>\n\n<pre><code>__pyx_t_1 = __Pyx_PyInt_From_int((-(__pyx_v_4test_b &amp; __pyx_v_4test_c)));\n</code></pre>\n\n<p>and the result is correct. If I add a cast to int like <code>print('%d'%(-(&lt;int&gt;abs(b)&amp;c)))</code> then I also get the right answer.</p>\n\n<p>Cross posted to the <a href=\"https://github.com/cython/cython/issues/1837\" rel=\"nofollow noreferrer\">Cython github page</a></p>\n\n<p><strong>Update:</strong> Here is the response to my github issue: </p>\n\n<blockquote>\n  <p>Basically, a signed int is not large enough to hold abs(-MAX_INT-1),\n  so the result was changed to return an unsigned value. On the other\n  hand, I agree that using an unsigned value is quite confusing as well,\n  especially as promotion of equally ranked integers is to the unsigned\n  type so it's contagious. Unclear what the best course of action is\n  here...</p>\n</blockquote>\n"}], "owner": {"reputation": 111, "user_id": 8473731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/740501f7e9adad9741ee8d755ee0ab6e?s=128&d=identicon&r=PG&f=1", "display_name": "ARN", "link": "https://stackoverflow.com/users/8473731/arn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1503785238, "creation_date": 1503524562, "last_edit_date": 1503524968, "question_id": 45849744, "link": "https://stackoverflow.com/questions/45849744/bizarre-integer-behavior-in-cython", "title": "Bizarre integer behavior in cython", "body": "<p>I'm running into a strange issue with some integer manipulation in cython. When I compile this cython code ...</p>\n\n<p>test.pyx</p>\n\n<pre><code>from libc.math cimport abs\n\ncdef int c = 2047\ncdef int b = 1009\nprint('%d'%(-(abs(b)&amp;c)))\n</code></pre>\n\n<p>...like this</p>\n\n<pre><code>#!python\nfrom subprocess import check_output\n\nCFLAGS = check_output('python-config --cflags'.split()).decode('utf-8').strip()\nLDFLAGS = check_output('python-config --ldflags'.split()).decode('utf-8').strip()\n\ncheck_output('cython test.pyx'.split())\n\ncompile_call = ('clang -c test.c %s'%(CFLAGS)).split()\ncheck_output(compile_call)\n\nlink_call = ('clang test.o -o test.so -shared %s'%(LDFLAGS)).split()\ncheck_output(link_call)\n\nimport test\n</code></pre>\n\n<p>...I get <code>2130706744</code>, but the right answer is <code>-1009</code>.</p>\n"}, {"tags": ["python", "list", "filter", "django-rest-framework", "django-generic-views"], "owner": {"reputation": 81, "user_id": 7838926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2f75ae1dfb8bda70c28c3b4ab28b25?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandros", "link": "https://stackoverflow.com/users/7838926/alexandros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 473, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1524465833, "creation_date": 1503524073, "last_edit_date": 1524465833, "question_id": 45849633, "link": "https://stackoverflow.com/questions/45849633/the-filters-in-django-rest-framework-doesnt-work-with-personalized-generic-view", "title": "The filters in django rest framework doesn&#39;t work with personalized generic view class", "body": "<p>I am developing a hierarchical api for the models of my app,  example:</p>\n\n<p>https:  //www.example.com/model/pk/submodel/pk2/subsubmodel/pk3  ...etc</p>\n\n<p>so because of that I have to personalizate the generic view class adding the corresponding method for each action example:(<code>def list()</code>, <code>def retrieve()</code> ). The problem of that is things like pagination and filtering doesn't work, I have already solved the problem of pagination by adding a few lines of code in the list method but I have not found any way to solve the problem with the filters.</p>\n\n<p>here's an example of my code:</p>\n\n<p>the serializer:</p>\n\n<pre><code>class RegionSerializerList(serializers.ModelSerializer):\n\n    class Meta:\n         model = Region\n         fields = ('id', 'name')\n</code></pre>\n\n<p>The view:</p>\n\n<pre><code>class RegionList(generics.ListCreateAPIView):\n    queryset = Region.objects.all()\n    serializer_class = RegionSerializerList\n    pagination_class = PostPageNumberPagination\n    filter_backends = [SearchFilter, OrderingFilter]\n    search_fields = ['name', 'id']\n\n    def list(self, request, pk):\n        self.pagination_class = PostPageNumberPagination\n        queryset = Region.objects.filter(country=pk)\n        page = self.paginate_queryset(queryset)\n        #the following 3 lines fix the pagination problem\n        if page is not None:\n            serializer = self.get_serializer(page, many=True)\n            return self.get_paginated_response(serializer.data)\n\n        serializer = RegionSerializerList(queryset, many=True)\n        return Response(serializer.data)\n</code></pre>\n\n<p>the <strong>filters</strong> botom appears in the web but any function works, Neither the order nor the search works, It continues showing all the same data of the list, Using the URL filter (/?search=) doesn't, and neither using the <code>get_queryset</code> method.</p>\n\n<p>I'm using <code>filter_backends</code> with <code>SearchFilter</code>, <code>OrderingFilter</code> and the <code>search_fields</code> that work perfectly without the personalised method list, but if i used that method doesn't works  I don't know why and how to fix that. :( \nI need the filter to work without having to change the personalized methods on which my api depends</p>\n\n<p>Then I wonder if anyone here knows how to solve this problem and give me a hand, I would appreciate it a lot,  thanks </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1503524137, "post_id": 45849585, "comment_id": 78657430, "body": "can you explain a little bit more about<i>but no children that start with the same two digits.</i>"}, {"owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1503524411, "post_id": 45849585, "comment_id": 78657551, "body": "@Wen edit question with more details, Art 210 has children : 211, 212  Art 310 not has children no line start with 31"}], "answers": [{"tags": [], "owner": {"reputation": 21940, "user_id": 167149, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/475fc5f452534629c742e2b5b80a7cc0?s=128&d=identicon&r=PG", "display_name": "Elisha", "link": "https://stackoverflow.com/users/167149/elisha"}, "is_accepted": true, "score": 1, "last_activity_date": 1503525328, "last_edit_date": 1503525328, "creation_date": 1503524913, "answer_id": 45849806, "question_id": 45849585, "link": "https://stackoverflow.com/questions/45849585/pandas-exclude-total-if-has-details/45849806#45849806", "title": "pandas exclude total if has details", "body": "<p>You can index the <em>Art</em> column according to the first two digits and filter accordingly:</p>\n\n<pre><code>buckets = (df['Art'] // 10).value_counts()\ndf = df.loc[(df['Art'] // 10).isin(buckets.loc[buckets == 1].index) |\n            (df['Art'] % 10 != 0)]\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>   Art  Sum\n1  211  120\n2  212  180\n3  310  250\n5  421  650\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11863, "user_id": 1762211, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bc8759842af428f995e2ce7a03adb609?s=128&d=identicon&r=PG", "display_name": "Mohamed Ali JAMAOUI", "link": "https://stackoverflow.com/users/1762211/mohamed-ali-jamaoui"}, "is_accepted": false, "score": 1, "last_activity_date": 1503526000, "last_edit_date": 1503526000, "creation_date": 1503525735, "answer_id": 45849948, "question_id": 45849585, "link": "https://stackoverflow.com/questions/45849585/pandas-exclude-total-if-has-details/45849948#45849948", "title": "pandas exclude total if has details", "body": "<p>This also works: </p>\n\n<pre><code>&gt;&gt;&gt; df[~(df.Art.astype(str).str.endswith(\"0\") &amp; df.Art.astype(str).str[:2].duplicated(keep=False))]\n   Art  Sum\n1  211  120\n2  212  180\n3  310  250\n5  421  650\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Explanation: </p>\n\n<ul>\n<li><code>A=df.Art.astype(str).str.endswith(\"0\")</code> : check which values end with 0</li>\n<li><code>B=df.Art.astype(str).str[:2].duplicated(keep=False)</code> : check which values has two digits that were duplicated. </li>\n<li>C = negate A&amp;B</li>\n<li>filter the dataframe with C as a mask. </li>\n</ul>\n"}], "owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 45849806, "answer_count": 2, "score": 1, "last_activity_date": 1503526000, "creation_date": 1503523834, "last_edit_date": 1503524300, "question_id": 45849585, "link": "https://stackoverflow.com/questions/45849585/pandas-exclude-total-if-has-details", "title": "pandas exclude total if has details", "body": "<p>has DF like this:</p>\n\n<pre><code>df = pd.DataFrame({'Art': [210, 211, 212, 310, 420, 421], 'Sum': [300, 120, 180, 250, 650, 650]})\n</code></pre>\n\n<p>in table view</p>\n\n<pre><code>  Art  Sum\n0  210  300  # this is total\n1  211  120  # children for index 0\n2  212  180  # children for index 0\n3  310  250  # !!! this is Not total\n4  420  650  # this is total\n5  421  650  # children for index 4\n</code></pre>\n\n<p>the total line is line where <code>Art</code> ends <code>0</code> but no children that start with the same two digits.</p>\n\n<p>Art <code>210</code> has children : <strong>21</strong>1, <strong>21</strong>2</p>\n\n<p>Art <code>310</code> not has children no line start with <strong>31</strong></p>\n\n<p>Issue: need to remove total lines.</p>\n\n<p>result need:</p>\n\n<pre><code>  Art  Sum\n1  211  120\n2  212  180\n3  310  250  # !! this is Not total\n5  421  650\n</code></pre>\n\n<p>how to do it?</p>\n"}, {"tags": ["python", "hadoop", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 6696, "user_id": 8467558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqOGB.jpg?s=128&g=1", "display_name": "MaFF", "link": "https://stackoverflow.com/users/8467558/maff"}, "edited": false, "score": 0, "creation_date": 1503527308, "post_id": 45849581, "comment_id": 78658650, "body": "<code>s</code> is not defined in your function"}, {"owner": {"reputation": 333, "user_id": 3292373, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64049ed024329b7de49034c8ff868b3a?s=128&d=identicon&r=PG&f=1", "display_name": "user3292373", "link": "https://stackoverflow.com/users/3292373/user3292373"}, "reply_to_user": {"reputation": 6696, "user_id": 8467558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqOGB.jpg?s=128&g=1", "display_name": "MaFF", "link": "https://stackoverflow.com/users/8467558/maff"}, "edited": false, "score": 0, "creation_date": 1503549223, "post_id": 45849581, "comment_id": 78663886, "body": "s is an String value Marie I apologies it is &lt; return &#39;S&#39;&gt;"}, {"owner": {"reputation": 6696, "user_id": 8467558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqOGB.jpg?s=128&g=1", "display_name": "MaFF", "link": "https://stackoverflow.com/users/8467558/maff"}, "edited": false, "score": 0, "creation_date": 1503553303, "post_id": 45849581, "comment_id": 78665290, "body": "So if the string is not proper (contains numbers or is a single space) you return a constant string value <code>&quot;s&quot;</code>. I have edited my answer"}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 3292373, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64049ed024329b7de49034c8ff868b3a?s=128&d=identicon&r=PG&f=1", "display_name": "user3292373", "link": "https://stackoverflow.com/users/3292373/user3292373"}, "edited": false, "score": 0, "creation_date": 1503525706, "post_id": 45849739, "comment_id": 78658089, "body": "Thanks Marie I have achieved this result I need in the form f function"}, {"owner": {"reputation": 6696, "user_id": 8467558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqOGB.jpg?s=128&g=1", "display_name": "MaFF", "link": "https://stackoverflow.com/users/8467558/maff"}, "reply_to_user": {"reputation": 333, "user_id": 3292373, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64049ed024329b7de49034c8ff868b3a?s=128&d=identicon&r=PG&f=1", "display_name": "user3292373", "link": "https://stackoverflow.com/users/3292373/user3292373"}, "edited": false, "score": 0, "creation_date": 1503527154, "post_id": 45849739, "comment_id": 78658604, "body": "You&#39;re not using <code>rlike</code> properly"}], "tags": [], "owner": {"reputation": 6696, "user_id": 8467558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqOGB.jpg?s=128&g=1", "display_name": "MaFF", "link": "https://stackoverflow.com/users/8467558/maff"}, "is_accepted": true, "score": 1, "last_activity_date": 1503553478, "last_edit_date": 1503553478, "creation_date": 1503524541, "answer_id": 45849739, "question_id": 45849581, "link": "https://stackoverflow.com/questions/45849581/pyspark-udf-rlike-condition-in-if-error/45849739#45849739", "title": "pyspark udf rlike condition in if error", "body": "<p>You want a <code>filter</code> not a <code>withColumn</code> that adds an extra column.</p>\n\n<p>If you want strictly alphabetical :</p>\n\n \n\n<pre class=\"lang-py prettyprint-override\"><code>import pyspark.sql.functions as psf\ndf = df.withColumn(\"isCharString\", df.a.rlike(\"^[a-zA-Z]+$\"))\n</code></pre>\n\n<p>If you want to keep strings that don't have numbers</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = df.withColumn(\"isCharString\", ~df.a.rlike(\"[0-9]\"))\n</code></pre>\n\n<p>The error you're getting using your function is because you use <code>rlike</code>as a standalone function which is not, it is an attribute for class pyspark columns. To rewrite your function in spark:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = df.withColumn(\"isCharString\", psf.when(\n        df.a.rlike(\"[0-9]\")| (df.a == \" \"), \n        psf.lit(\"s\")).otherwise(df.a))\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 3292373, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64049ed024329b7de49034c8ff868b3a?s=128&d=identicon&r=PG&f=1", "display_name": "user3292373", "link": "https://stackoverflow.com/users/3292373/user3292373"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 1, "accepted_answer_id": 45849739, "answer_count": 1, "score": -1, "last_activity_date": 1503553478, "creation_date": 1503523810, "question_id": 45849581, "link": "https://stackoverflow.com/questions/45849581/pyspark-udf-rlike-condition-in-if-error", "title": "pyspark udf rlike condition in if error", "body": "<p>I am using spark 2.1 scripting is pyspark scripting</p>\n\n<p>My Dataframe is given below</p>\n\n<p>dataframe name:df</p>\n\n<p>a</p>\n\n<p>Naveen</p>\n\n<p>Naveen123</p>\n\n<p></p>\n\n<p>Now my output should be as </p>\n\n<p>a</p>\n\n<p>Naveen</p>\n\n<p>I am using below udf for this</p>\n\n<pre><code>def fn(a):\n    if((a==rlike(\"[0-9]\"))|(a==' ')):\n        return s\n\ndf.withColumn(\"FLG\",fn(\"a\")).show()\n</code></pre>\n\n<p>I am getting error like :global name 'rlike' is not defined</p>\n\n<p>Please help me in crossing this hurdle</p>\n"}, {"tags": ["python", "winapi"], "comments": [{"owner": {"reputation": 11, "user_id": 8506974, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210218164029838/picture?type=large", "display_name": "Rich Skorski", "link": "https://stackoverflow.com/users/8506974/rich-skorski"}, "edited": false, "score": 0, "creation_date": 1503524230, "post_id": 45849567, "comment_id": 78657479, "body": "I think you can use the scheduler class. <a href=\"https://stackoverflow.com/questions/11523918/python-start-a-function-at-given-time\" title=\"python start a function at given time\">stackoverflow.com/questions/11523918/&hellip;</a>"}, {"owner": {"reputation": 434, "user_id": 4682789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBdW9.png?s=128&g=1", "display_name": "AllenMoh", "link": "https://stackoverflow.com/users/4682789/allenmoh"}, "edited": false, "score": 0, "creation_date": 1503524563, "post_id": 45849567, "comment_id": 78657614, "body": "check out the subprocess built in library:  <a href=\"https://docs.python.org/2/library/subprocess.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/subprocess.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 980, "user_id": 6483228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55i3R.jpg?s=128&g=1", "display_name": "T4rk1n", "link": "https://stackoverflow.com/users/6483228/t4rk1n"}, "is_accepted": true, "score": 0, "last_activity_date": 1503525432, "creation_date": 1503525432, "answer_id": 45849897, "question_id": 45849567, "link": "https://stackoverflow.com/questions/45849567/delays-in-python-without-pausing-the-code/45849897#45849897", "title": "Delays in python without pausing the code?", "body": "<p>You can use threading and decorators to wait without blocking.</p>\n\n<p>Here's a basic example:</p>\n\n<pre><code>import threading\nimport functools\n\n\nclass Delayed(object):\n    def __init__(self, delay):\n        self.delay = delay\n\n    def __call__(self, func):\n        waiter = threading.Event()\n        @functools.wraps(func)\n        def wrapper(*args, **kwargs):\n            def _run():\n                waiter.wait(self.delay)\n                func(*args, **kwargs)\n            t = threading.Thread(target=_run)\n            t.start()\n        return wrapper\n\n\n@Delayed(5)\ndef tester():\n    # use locks if modifying data since it uses threads\n    print('delayed')\n\n\nif __name__ == '__main__':\n    tester()\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 8228936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58349d6886b194e0fc8d7b4e3ffb9cc6?s=128&d=identicon&r=PG&f=1", "display_name": "Beter", "link": "https://stackoverflow.com/users/8228936/beter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 45849897, "answer_count": 1, "score": 0, "last_activity_date": 1503525432, "creation_date": 1503523747, "question_id": 45849567, "link": "https://stackoverflow.com/questions/45849567/delays-in-python-without-pausing-the-code", "title": "Delays in python without pausing the code?", "body": "<p>Basically I have this code here:</p>\n\n<pre><code>import win32api\nimport win32con\nimport time\nfrom random import randint\nimport pythoncom\nimport pyHook\n\nimport sys\n\nsemaphore = False \n\ndef OnMouseLeftUp(event): \n    global semaphore\n    if semaphore:\n        return True\n    semaphore = True\n\n    if randint(0, 10) &lt; 4:\n        time.sleep(float(randint(6,9))/1000)    \n        win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0)\n\n\n    semaphore = False\n    return True\n\n\n\n# create a hook manager\nhm = pyHook.HookManager()\n# set the hook\nhm.HookMouse()\n# waits for MouseLeftUp event\nhm.MouseLeftUp = OnMouseLeftUp # Triggers OnMouseLeftUp function\n# wait forever\npythoncom.PumpMessages()\n</code></pre>\n\n<p>I need to delay <code>win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0)</code> for about 50 ms but if I use time.sleep the whole code gets stopped for that time. Therefore, the mouse Hook gets stopped as well so my computer stops recording mouse inputs for that time and that's really annoying. I would need a solution to delay that win32api function without stopping the whole code. Any suggestion is greatly appreciated.  </p>\n"}, {"tags": ["python", "json", "google-maps", "tuples", "coordinates"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 1165865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e81b56d2eb7b4b15ec76be17de6b962f?s=128&d=identicon&r=PG", "display_name": "Hikalea", "link": "https://stackoverflow.com/users/1165865/hikalea"}, "edited": false, "score": 0, "creation_date": 1503524479, "post_id": 45849589, "comment_id": 78657577, "body": "result = &quot;[\\n{}\\n]&quot;.format(&quot;,\\n&quot;.join(&quot;  {{lat: {},lng: {}}}&quot;.format(*x) for x in coordinates)) IndexError: tuple index out of range  Getting that error?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 111, "user_id": 1165865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e81b56d2eb7b4b15ec76be17de6b962f?s=128&d=identicon&r=PG", "display_name": "Hikalea", "link": "https://stackoverflow.com/users/1165865/hikalea"}, "edited": false, "score": 0, "creation_date": 1503524636, "post_id": 45849589, "comment_id": 78657653, "body": "not with the sample data you provided, and which I pasted. happens if one of the tuples has only 1 value in it."}, {"owner": {"reputation": 111, "user_id": 1165865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e81b56d2eb7b4b15ec76be17de6b962f?s=128&d=identicon&r=PG", "display_name": "Hikalea", "link": "https://stackoverflow.com/users/1165865/hikalea"}, "edited": false, "score": 0, "creation_date": 1503525046, "post_id": 45849589, "comment_id": 78657833, "body": "Ah the coordinates list is actually being stored as a string, like coordinates = &quot;[(45.62, -122.23),(45.63, -122.22)&quot;. How would I convert it back to literal for your solution to work?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 111, "user_id": 1165865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e81b56d2eb7b4b15ec76be17de6b962f?s=128&d=identicon&r=PG", "display_name": "Hikalea", "link": "https://stackoverflow.com/users/1165865/hikalea"}, "edited": false, "score": 0, "creation_date": 1503525090, "post_id": 45849589, "comment_id": 78657856, "body": "you mean <code>coordinates = &quot;[(45.62, -122.23),(45.63, -122.22),(45.64, -122.21)]&quot;</code> ?"}, {"owner": {"reputation": 111, "user_id": 1165865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e81b56d2eb7b4b15ec76be17de6b962f?s=128&d=identicon&r=PG", "display_name": "Hikalea", "link": "https://stackoverflow.com/users/1165865/hikalea"}, "edited": false, "score": 0, "creation_date": 1503525203, "post_id": 45849589, "comment_id": 78657909, "body": "Yes, that is how its being retrieved from the database, stored as a string. I assume this is why I am getting an error from your solution."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 111, "user_id": 1165865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e81b56d2eb7b4b15ec76be17de6b962f?s=128&d=identicon&r=PG", "display_name": "Hikalea", "link": "https://stackoverflow.com/users/1165865/hikalea"}, "edited": false, "score": 0, "creation_date": 1503525233, "post_id": 45849589, "comment_id": 78657925, "body": "check my edit but in that case how can you get a valid result? your question doesn&#39;t mention that input is as string..."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1503525213, "last_edit_date": 1503525213, "creation_date": 1503523845, "answer_id": 45849589, "question_id": 45849477, "link": "https://stackoverflow.com/questions/45849477/convert-python-tuples-to-google-maps-json-coordinates/45849589#45849589", "title": "Convert python tuples to Google Maps json coordinates", "body": "<p>json keys have to be string, so in double quotes.</p>\n\n<p>You could reorganize your data using a list comprehension to generate the list of dicts with proper keys, and if you want to remove the quotes, just use <code>str.replace</code></p>\n\n<pre><code>import json\n\ncoordinates = [(45.62, -122.23),(45.63, -122.22),(45.64, -122.21)]\n\nresult = json.dumps([{\"lat\":x[0],\"lng\":x[1]} for x in coordinates],indent=2).replace('\"',\"\")\n</code></pre>\n\n<p>which gives me (thanks to prettying <code>indent</code> parameter):</p>\n\n<pre><code>[\n  {\n    lat: 45.62,\n    lng: -122.23\n  },\n  {\n    lat: 45.63,\n    lng: -122.22\n  },\n  {\n    lat: 45.64,\n    lng: -122.21\n  }\n]\n</code></pre>\n\n<p>in that simple case, you have more control without <code>json</code> using just <code>str.format</code> and <code>str.join</code>:</p>\n\n<pre><code>result = \"[\\n{}\\n]\".format(\",\\n\".join(\"  {{lat: {},lng: {}}}\".format(*x) for x in coordinates))\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>[\n  {lat: 45.62,lng: -122.23},\n  {lat: 45.63,lng: -122.22},\n  {lat: 45.64,lng: -122.21}\n]\n</code></pre>\n\n<p>EDIT: if your input is actually a <em>string</em>:</p>\n\n<pre><code>coordinates = \"[(45.62, -122.23),(45.63, -122.22),(45.64, -122.21)]\"\n</code></pre>\n\n<p>you can use <code>ast.literal_eval</code> to safely evaluate it to a python list of tuples:</p>\n\n<pre><code>import ast\ncoordinates = ast.literal_eval(coordinates)\n</code></pre>\n\n<p>and the code above applies.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 1165865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e81b56d2eb7b4b15ec76be17de6b962f?s=128&d=identicon&r=PG", "display_name": "Hikalea", "link": "https://stackoverflow.com/users/1165865/hikalea"}, "edited": false, "score": 0, "creation_date": 1503524430, "post_id": 45849683, "comment_id": 78657561, "body": "json_coord_pair[&quot;lng&quot;] = str(coord_pair[1]) IndexError: string index out of range ?"}, {"owner": {"reputation": 434, "user_id": 4682789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBdW9.png?s=128&g=1", "display_name": "AllenMoh", "link": "https://stackoverflow.com/users/4682789/allenmoh"}, "reply_to_user": {"reputation": 111, "user_id": 1165865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e81b56d2eb7b4b15ec76be17de6b962f?s=128&d=identicon&r=PG", "display_name": "Hikalea", "link": "https://stackoverflow.com/users/1165865/hikalea"}, "edited": false, "score": 0, "creation_date": 1503524643, "post_id": 45849683, "comment_id": 78657659, "body": "try copying and pasting my example. I just did and it works."}], "tags": [], "owner": {"reputation": 434, "user_id": 4682789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBdW9.png?s=128&g=1", "display_name": "AllenMoh", "link": "https://stackoverflow.com/users/4682789/allenmoh"}, "is_accepted": false, "score": 0, "last_activity_date": 1503524311, "creation_date": 1503524311, "answer_id": 45849683, "question_id": 45849477, "link": "https://stackoverflow.com/questions/45849477/convert-python-tuples-to-google-maps-json-coordinates/45849683#45849683", "title": "Convert python tuples to Google Maps json coordinates", "body": "<p>Iterate through the list of coordinate pairs and convert them to JSON:</p>\n\n<pre><code>coordinates = [(45.62, -122.23),(45.63, -122.22),(45.64, -122.21)]\ncoord_list = []\nfor coord_pair in coordinates:\n    json_coord_pair = {}\n    json_coord_pair[\"lat\"] = str(coord_pair[0])\n    json_coord_pair[\"lng\"] = str(coord_pair[1])\n    json_coord_pair = json.dumps(json_coord_pair)\n    coord_list.append(json_coord_pair)\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 1165865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e81b56d2eb7b4b15ec76be17de6b962f?s=128&d=identicon&r=PG", "display_name": "Hikalea", "link": "https://stackoverflow.com/users/1165865/hikalea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 45849589, "answer_count": 2, "score": 0, "last_activity_date": 1503525213, "creation_date": 1503523366, "question_id": 45849477, "link": "https://stackoverflow.com/questions/45849477/convert-python-tuples-to-google-maps-json-coordinates", "title": "Convert python tuples to Google Maps json coordinates", "body": "<p>I'm having a little trouble understanding the order of operations to get my tuples converted to json. Here is my list:</p>\n\n<pre><code>coordinates = [(45.62, -122.23),(45.63, -122.22),(45.64, -122.21)]\n</code></pre>\n\n<p>When running it through my code:</p>\n\n<pre><code>coordinates = [(45.62, -122.23),(45.63, -122.22),(45.64, -122.21)]    \ncoordinatesList = json.dumps(dict(coordinates))\n</code></pre>\n\n<p>I manage to get a single json array. Here is my current output:</p>\n\n<pre><code>print(coordinatesList)\n\n{\"45.62\": -122.23, \"45.63\": -122.22, \"45.64\": -122.21}\n</code></pre>\n\n<p>As you can see, I'm having multiple issues here. Some coordinates are encapsulated with quotes while the second values aren't. I also need to append the values with \"lat\" and \"lng\" to fit Google Maps api, but am confused about where in the flow control to do so.</p>\n\n<p>Here is my desired output:</p>\n\n<pre><code>       [\n          {lat: 45.62, lng: -122.23},\n          {lat: 45.63, lng: -122.22},\n          {lat: 45.64, lng: -122.21},\n        ]\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark", "similarity", "normalize"], "comments": [{"owner": {"reputation": 41, "user_id": 6348454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c2bdc6ff0c3a29179a33acb16ccec8?s=128&d=identicon&r=PG&f=1", "display_name": "mrphysics", "link": "https://stackoverflow.com/users/6348454/mrphysics"}, "edited": false, "score": 0, "creation_date": 1503599878, "post_id": 45849443, "comment_id": 78696319, "body": "That&#39;s OK.  I&#39;m just could to use cosine = v1.dot(v2)/(v1.norm(2)*v2.norm(2)).  That works just fine."}], "owner": {"reputation": 41, "user_id": 6348454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c2bdc6ff0c3a29179a33acb16ccec8?s=128&d=identicon&r=PG&f=1", "display_name": "mrphysics", "link": "https://stackoverflow.com/users/6348454/mrphysics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503525221, "creation_date": 1503523222, "last_edit_date": 1503525221, "question_id": 45849443, "link": "https://stackoverflow.com/questions/45849443/spark-normalizer-gives-assertionerror-sparkcontext-should-be-initialized-first", "title": "Spark Normalizer Gives AssertionError: SparkContext should be initialized first?", "body": "<p>I'm running spark 1.4.1 and using pyspark.  Here is my code:</p>\n\n<pre><code>from pyspark.mllib.feature import Normalizer\n\ndef make_unit(x):\n    nor = Normalizer()\n    return (x[0], [x[1][0], x[1][1], x[1][2], nor.transform(x[1][3]),x[1][4]])\n\nrdd_normal = rdd.map(make_unit)\n</code></pre>\n\n<p>rdd is a spark rdd of the form (a, [b, c, d, SparseVector, e]).  </p>\n\n<p>After running the above, I get this error:\n\"AssertionError: SparkContext should be initialized first\".  I definitely have a sparkcontext running.  I'm able to do other things with my data and manipulate other rdds.  Yet, when I run the above code, it's telling me I don't have a running SC.  What am I doing wrong?</p>\n\n<p>I just want to normalize the SparseVector so that I can do some cosine similarities.  I could calculate the dot product and divide by the norms, but I don't know if there is a built-in function for calculating norms.  Anyway, if I were to do nor.transform(v), where v is a SparseVector, I get the expected output.  However, when using this within a .map(), I get the above error.</p>\n"}, {"tags": ["python", "select", "tkinter"], "comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1503524027, "post_id": 45849440, "comment_id": 78657390, "body": "it is very possible with bindings."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1503524838, "post_id": 45849440, "comment_id": 78657750, "body": "Do you <i>really</i> need the name, or do you only <i>think</i> you need the name? And by &quot;name&quot; do you mean the name of the variable? What purpose does knowing the name serve? What is the real problem you are trying  to solve?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7751497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0sp56.png?s=128&g=1", "display_name": "QuentiumYT", "link": "https://stackoverflow.com/users/7751497/quentiumyt"}, "edited": false, "score": 0, "creation_date": 1503605159, "post_id": 45849838, "comment_id": 78698955, "body": "Hello, thanks for your help and sorry I&#39;m late. This answer is just very good and it help me. I find by after the way to print widget name but your way is better! Thanks"}, {"owner": {"reputation": 57, "user_id": 7751497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0sp56.png?s=128&g=1", "display_name": "QuentiumYT", "link": "https://stackoverflow.com/users/7751497/quentiumyt"}, "edited": false, "score": 0, "creation_date": 1503607388, "post_id": 45849838, "comment_id": 78700067, "body": "After some searches I find the binding &lt;FocusIn&gt; which is better for me but thanks for your help with bindings"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 57, "user_id": 7751497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0sp56.png?s=128&g=1", "display_name": "QuentiumYT", "link": "https://stackoverflow.com/users/7751497/quentiumyt"}, "edited": false, "score": 0, "creation_date": 1503681533, "post_id": 45849838, "comment_id": 78732082, "body": "@Quentium If my answer has solved your problem then please consider selecting the check box next to my answer."}], "tags": [], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "is_accepted": true, "score": 1, "last_activity_date": 1503525653, "last_edit_date": 1503525653, "creation_date": 1503525087, "answer_id": 45849838, "question_id": 45849440, "link": "https://stackoverflow.com/questions/45849440/how-to-know-the-name-of-the-object-in-tkinter/45849838#45849838", "title": "How to know the name of the object in tkinter", "body": "<p>We can us bindings to get the kind of behavior you are looking for.</p>\n\n<p>we need to use frames to hold each text widget and then bind the <code>&lt;Enter&gt;</code> even to each frame that then sends a command to a method to set the focus on the frame the mouse is currently in.</p>\n\n<p>We also bind the letter <code>p</code> to each frame that will use a lambda print statement to print out the name of the text box that is inside of that frame.</p>\n\n<p>Here is a simple example, You can mouse over each text box and without clicking with the mouse if you press <code>p</code> you will see in the console the name of the text box.</p>\n\n<pre><code>import tkinter as tk\n\nroot = tk.Tk()\n\ndef set_focus(x):\n    x.focus_force()\n\ntext1_frame = tk.Frame(root)\ntext1_frame.pack()\ntext1_frame.bind(\"p\", lambda x: print(\"text1\"))\ntext1_frame.bind(\"&lt;Enter&gt;\", lambda x: set_focus(text1_frame))\n\ntext2_frame = tk.Frame(root)\ntext2_frame.pack()\ntext2_frame.bind(\"p\", lambda x: print(\"text2\"))\ntext2_frame.bind(\"&lt;Enter&gt;\", lambda x: set_focus(text2_frame))\n\ntext1 = tk.Text(text1_frame, height = 4, width = 10)\ntext1.pack()\n\ntext2 = tk.Text(text2_frame, height = 4, width = 10)\ntext2.pack()\n\nroot.mainloop()\n</code></pre>\n\n<p>A slightly different way that does not manipulate the focus would be to just update a variable with the current location of the mouse and to bind <code>p</code> to root and to call a print function.</p>\n\n<pre><code>import tkinter as tk\n\nroot = tk.Tk()\nm_location = \"root\"\n\ndef mouse_location(x):\n    global m_location\n    m_location = x\n\ntext1_frame = tk.Frame(root)\ntext1_frame.pack()\ntext1_frame.bind(\"&lt;Enter&gt;\", lambda x: mouse_location(\"text1\"))\ntext1_frame.bind(\"&lt;Leave&gt;\", lambda x: mouse_location(\"root\"))\n\ntext2_frame = tk.Frame(root)\ntext2_frame.pack()\ntext2_frame.bind(\"&lt;Enter&gt;\", lambda x: mouse_location(\"text2\"))\ntext2_frame.bind(\"&lt;Leave&gt;\", lambda x: mouse_location(\"root\"))\n\ntext1 = tk.Text(text1_frame, height = 4, width = 10)\ntext1.pack()\n\ntext2 = tk.Text(text2_frame, height = 4, width = 10)\ntext2.pack()\n\ndef print_if(event = None):\n    global m_location\n    print(m_location)\n\nroot.bind(\"p\", print_if)\n\n\nroot.mainloop() \n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7751497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0sp56.png?s=128&g=1", "display_name": "QuentiumYT", "link": "https://stackoverflow.com/users/7751497/quentiumyt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 0, "accepted_answer_id": 45849838, "answer_count": 1, "score": 1, "last_activity_date": 1503525653, "creation_date": 1503523194, "question_id": 45849440, "link": "https://stackoverflow.com/questions/45849440/how-to-know-the-name-of-the-object-in-tkinter", "title": "How to know the name of the object in tkinter", "body": "<p>I need just to know how to get the name of one of my two textbox when I press a key. </p>\n\n<p>I've two textbox, one named 'Text1' and the second,  'Text2'. I want when I put my cursor on the first one, I press a key (like p) and it print 'you have your cursor on the Text1!' And same when I place my cursor on the second textbox. \nIt is possible? </p>\n"}, {"tags": ["python", "break"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1503523195, "post_id": 45849422, "comment_id": 78657064, "body": "<code>break</code> needs a loop to operate. Where is yours ? what do you mean by &quot;doesn&#39;t work&quot; ?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1503523210, "post_id": 45849422, "comment_id": 78657070, "body": "What do you think <code>break</code> even means?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1503523303, "post_id": 45849422, "comment_id": 78657103, "body": "<a href=\"https://docs.python.org/3/reference/simple_stmts.html#the-break-statement\" rel=\"nofollow noreferrer\">The documentation</a> will tell you how <code>break</code> works.  <a href=\"https://docs.python.org/3/tutorial/index.html\" rel=\"nofollow noreferrer\">The Tutorial</a> is worth working your way through."}], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 5397497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153533963280250/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/5397497/brian"}, "is_accepted": false, "score": 1, "last_activity_date": 1503523429, "creation_date": 1503523429, "answer_id": 45849492, "question_id": 45849422, "link": "https://stackoverflow.com/questions/45849422/command-break-doesnt-work-for-some-reason/45849492#45849492", "title": "Command &quot;Break&quot; doesnt work for some reason", "body": "<p>You just need to wrap your code with a <code>while</code> loop.    </p>\n\n<pre><code>while True:\n  number=input(\"enter a whole number\")\n  if number.isdigit():\n    print(\"Good one\")\n  else:\n    print (\"haha, really clever\")\n  answer=str(input(\"Wanna try again? y/n\"))\n  if answer == 'n':\n    print(\"Ok loser\")\n    break\n  elif answer== 'y':\n    print(\"ok...good luck\")\n    continue\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 8500733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c44a7d9998b147e188c77a274320513?s=128&d=identicon&r=PG&f=1", "display_name": "AlexBenoit", "link": "https://stackoverflow.com/users/8500733/alexbenoit"}, "is_accepted": false, "score": 0, "last_activity_date": 1503523565, "creation_date": 1503523565, "answer_id": 45849525, "question_id": 45849422, "link": "https://stackoverflow.com/questions/45849422/command-break-doesnt-work-for-some-reason/45849525#45849525", "title": "Command &quot;Break&quot; doesnt work for some reason", "body": "<p>To use a break, you need it to be in a loop (while, for, ...). A break stop the execution of the loop if it's condition is met. In your casse you only have ifs, so you don't need a break as it will not check the other conditions if the first one is met.</p>\n"}, {"tags": [], "owner": {"reputation": 1194, "user_id": 8390068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sbzKf.jpg?s=128&g=1", "display_name": "Micheal O&#39;Dwyer", "link": "https://stackoverflow.com/users/8390068/micheal-odwyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1503523930, "creation_date": 1503523930, "answer_id": 45849605, "question_id": 45849422, "link": "https://stackoverflow.com/questions/45849422/command-break-doesnt-work-for-some-reason/45849605#45849605", "title": "Command &quot;Break&quot; doesnt work for some reason", "body": "<p>You need to use a while loop.</p>\n\n<pre><code>answer = 'y'\n\nwhile answer == 'y':\n    number = input(\"Please enter a whole number: \")\n\n    if number % 1 == 0:\n        print(\"Good one!\")\n    else:\n        print(\"Haha, really clever.\")\n\n     answer = input(\"Wanna try again? (y/n) \")\n</code></pre>\n\n<p>Set the answer to y so the loop runs at least once.</p>\n\n<p>If the user wants to try again they enter y and the <em>condition</em> will be true meaning the loop wil run again.</p>\n\n<p>Hope this helped!</p>\n"}], "owner": {"reputation": 11, "user_id": 8498541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/204b60f2c8f4053a65689f46b738df53?s=128&d=identicon&r=PG&f=1", "display_name": "Epic Spaik", "link": "https://stackoverflow.com/users/8498541/epic-spaik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1503523930, "creation_date": 1503523091, "question_id": 45849422, "link": "https://stackoverflow.com/questions/45849422/command-break-doesnt-work-for-some-reason", "title": "Command &quot;Break&quot; doesnt work for some reason", "body": "<pre><code>number=input(\"enter a whole number\")\nif number.isdigit():\n    print(\"Good one\")\nelse:\n    print (\"haha, really clever\")\nanswer=str(input(\"Wanna try again? y/n\"))\nif answer == 'n':\n    print(\"Ok loser\")\n    break\nelif answer== 'y':\n    print(\"ok...good luck\")\n    continue\n</code></pre>\n\n<p>I tried to make a code that would react if the input is integer or float, and if its float it would restart if the person wants it to; but the command 'break' doesnt want to work for some reason please help... (make it simple please)</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1503523861, "post_id": 45849529, "comment_id": 78657335, "body": "yes! the problem with implementing a max with nan method is that this is stupidly slow. One needs to loop through a list and discard nan values. I sometimes hates the way python treats nan..."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1503524205, "post_id": 45849529, "comment_id": 78657463, "body": "To ensure there are no errors in your data, you can also ensure that there is only one CUSIP on any given date.  Assuming the result above is called <code>result</code>, then <code>result.groupby([&#39;Date&#39;, &#39;CUSIP&#39;])[&#39;CUSIP&#39;].count().max()</code> should return 1."}, {"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1503524647, "post_id": 45849529, "comment_id": 78657667, "body": "thanks for the tip. I am running this. this is very slow. are forward fill and backward fill always this slow?"}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1503524702, "post_id": 45849529, "comment_id": 78657694, "body": "What is the output of <code>df.info()</code>?  Are the columns <code>Asset</code> and <code>Liability</code> floats? And what is the type of the <code>Date</code> column?  Also, <code>drop_duplicates</code> may be slowing it down.  Try without it and see if there is an improvement.  If so, and you&#39;ve checked your data to ensure there are no dups per my comment above, you can group again.  <code>df.groupby([&#39;Date&#39;, &#39;CUSIP&#39;]).apply(lambda group: group.ffill().bfill()).groupby([&#39;Date&#39;, &#39;CUSIP&#39;]).first()</code>"}, {"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1503524868, "post_id": 45849529, "comment_id": 78657759, "body": "RangeIndex: 501896 entries, 0 to 501895 Data columns (total 4 columns): Date     501896 non-null datetime64[ns] CUSIP    501372 non-null object Asset      386228 non-null float64 Liability      385416 non-null float64 dtypes: datetime64[ns](1), float64(2), object(1)"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 1, "last_activity_date": 1503523574, "creation_date": 1503523574, "answer_id": 45849529, "question_id": 45849415, "link": "https://stackoverflow.com/questions/45849415/combining-rows-in-pandas-dataframe/45849529#45849529", "title": "combining rows in pandas dataframe", "body": "<pre><code>&gt;&gt;&gt; df.groupby(['Date', 'CUSIP']).apply(lambda group: group.ffill().bfill()).drop_duplicates()\n         Date CUSIP Asset  Liability\n0  01-01-1990     A     1          2\n2  02-01-1990     A     3          2\n3  01-01-1990     B     1          2\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 45849529, "answer_count": 1, "score": 0, "last_activity_date": 1503523574, "creation_date": 1503523046, "question_id": 45849415, "link": "https://stackoverflow.com/questions/45849415/combining-rows-in-pandas-dataframe", "title": "combining rows in pandas dataframe", "body": "<p>I have the data frame</p>\n\n<pre><code>Date         CUSIP   Asset   Liability\n01-01-1990     A       1        NaN\n01-01-1990     A      Nan        2\n02-01-1990     A       3         2\n01-01-1990     B      Nan        2\n01-01-1990     B       1         2\n</code></pre>\n\n<p>Is there anyway of combining this such that it becomes:</p>\n\n<pre><code>Date         CUSIP   Asset   Liability\n01-01-1990     A       1         2\n02-01-1990     A       3         2\n01-01-1990     B       1         2\n</code></pre>\n\n<p>The way I came up with is to use groupby([\"CUSIP\", Date]).agg(function)</p>\n\n<p>where I apply a function where the max(nan, 3) = 3.</p>\n\n<p>Is there a simpler way?</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "xgboost", "grid-search"], "answers": [{"tags": [], "owner": {"reputation": 15962, "user_id": 7214344, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/09fedcad60ad0dba2834ffffdd52f686?s=128&d=identicon&r=PG&f=1", "display_name": "Miriam Farber", "link": "https://stackoverflow.com/users/7214344/miriam-farber"}, "is_accepted": true, "score": 3, "last_activity_date": 1503769750, "last_edit_date": 1503769750, "creation_date": 1503528344, "answer_id": 45850397, "question_id": 45849374, "link": "https://stackoverflow.com/questions/45849374/xgboost-cv-gives-typeerror-stratifiedkfold-object-is-not-iterable/45850397#45850397", "title": "xgboost.cv gives TypeError: &#39;StratifiedKFold&#39; object is not iterable", "body": "<p>Inside the <code>xgb.cv</code> function, try to replace</p>\n\n<pre><code>folds=kf\n</code></pre>\n\n<p>with</p>\n\n<pre><code>folds=list(kf.split(x_train,y_train))\n</code></pre>\n\n<p>The <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.StratifiedKFold.html#sklearn.model_selection.StratifiedKFold.split\" rel=\"nofollow noreferrer\">split method</a> is applied in order to get the split into training and validation. We then convert it into a <code>list</code> so that it would be an iterable object. </p>\n\n<p>If that doesn't work, try without the <code>list</code>. That is:</p>\n\n<pre><code>folds=kf.split(x_train,y_train)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 870, "user_id": 6077035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/962162a728a427c364484738150827b4?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Mutel", "link": "https://stackoverflow.com/users/6077035/florian-mutel"}, "is_accepted": false, "score": 0, "last_activity_date": 1503562168, "creation_date": 1503562168, "answer_id": 45856255, "question_id": 45849374, "link": "https://stackoverflow.com/questions/45849374/xgboost-cv-gives-typeerror-stratifiedkfold-object-is-not-iterable/45856255#45856255", "title": "xgboost.cv gives TypeError: &#39;StratifiedKFold&#39; object is not iterable", "body": "<p>As the error suggests, kf is a 'StratifiedKFold' object.</p>\n\n<p>This object has a .split() method that will give you a generator containing the differents train/valid elements indices.</p>\n\n<pre><code>folds_generator = kf.split(x_train, y_train)\n</code></pre>\n\n<p>However, reading the xgb.cv <a href=\"https://rdrr.io/cran/xgboost/man/xgb.cv.html\" rel=\"nofollow noreferrer\">doc</a>, </p>\n\n<blockquote>\n  <p>folds : list, provides a possibility to use a list of pre-defined CV folds (each element must be a vector of test fold's indices). When folds are supplied, the nfold and stratified parameters are ignored.</p>\n</blockquote>\n\n<p>folds needs an argument of type 'list'. You can convert your generator to a list with the following code</p>\n\n<pre><code>folds_list = list(folds_generator)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7085850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d38b0ad4bdbe2d17940036fdd993cefa?s=128&d=identicon&r=PG&f=1", "display_name": "ZDG", "link": "https://stackoverflow.com/users/7085850/zdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3192, "favorite_count": 0, "accepted_answer_id": 45850397, "answer_count": 2, "score": 3, "last_activity_date": 1503769750, "creation_date": 1503522850, "last_edit_date": 1503528449, "question_id": 45849374, "link": "https://stackoverflow.com/questions/45849374/xgboost-cv-gives-typeerror-stratifiedkfold-object-is-not-iterable", "title": "xgboost.cv gives TypeError: &#39;StratifiedKFold&#39; object is not iterable", "body": "<p>I have been trying to implement this code in python 2.7. It gives me this error. I would appreciate help.\nI have latest version of sklearn(0.18.1) and xgboost(0.6)</p>\n\n<pre><code>import xgboost as xgb\nfrom sklearn.model_selection import StratifiedKFold\nfrom sklearn.metrics import f1_score, roc_auc_score, confusion_matrix\n\nnfold = 3\nkf = StratifiedKFold(nfold, shuffle=True)\n\ndtrain = xgb.DMatrix(x_train, label=y_train)\ndtest = xgb.DMatrix(x_test)\n\nparams = {\n    'objective' : 'binary:logistic',\n    'eval_metric': 'auc',\n    'min_child_weight':10,\n    'scale_pos_weight':scale,\n}\nhist = xgb.cv(params, dtrain, num_boost_round=10000, folds=kf, early_stopping_rounds=50, as_pandas=True, verbose_eval=100, show_stdv=True, seed=0)\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>TypeErrorTraceback (most recent call last)\n&lt;ipython-input-52-41c415e116d7&gt; in &lt;module&gt;()\n      5     'scale_pos_weight':scale,\n      6 }\n----&gt; 7 hist = xgb.cv(params, dtrain, num_boost_round=10000, folds=kf, early_stopping_rounds=50, as_pandas=True, verbose_eval=100, show_stdv=True, seed=0)\n      8 \n      9 \n\n/opt/conda/lib/python2.7/site-packages/xgboost/training.pyc in cv(params, dtrain, num_boost_round, nfold, stratified, folds, metrics, obj, feval, maximize, early_stopping_rounds, fpreproc, as_pandas, verbose_eval, show_stdv, seed, callbacks)\n    369 \n    370     results = {}\n--&gt; 371     cvfolds = mknfold(dtrain, nfold, params, seed, metrics, fpreproc, stratified, folds)\n    372 \n    373     # setup callbacks\n\n/opt/conda/lib/python2.7/site-packages/xgboost/training.pyc in mknfold(dall, nfold, param, seed, evals, fpreproc, stratified, folds)\n    236         idset = [randidx[(i * kstep): min(len(randidx), (i + 1) * kstep)] for i in range(nfold)]\n    237     elif folds is not None:\n--&gt; 238         idset = [x[1] for x in folds]\n    239         nfold = len(idset)\n    240     else:\n\nTypeError: 'StratifiedKFold' object is not iterable\n</code></pre>\n"}, {"tags": ["python", "design-patterns", "dependency-injection", "software-design", "circular-dependency"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1503522851, "post_id": 45849340, "comment_id": 78656919, "body": "You can pass objects as parameters to functions."}, {"owner": {"reputation": 391, "user_id": 5397497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153533963280250/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/5397497/brian"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1503523014, "post_id": 45849340, "comment_id": 78656983, "body": "Can you provide an example with pseudo code on how that could fix this problem? Thanks Peter!"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1503524744, "post_id": 45849340, "comment_id": 78657713, "body": "I&#39;m not familiar with your &quot;flow&quot; diagram - can we assume the arrows imply some sort of <i>communication</i>?.  Can you add, in your question, what the, relevant, import statements look like in the files?"}, {"owner": {"reputation": 391, "user_id": 5397497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153533963280250/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/5397497/brian"}, "edited": false, "score": 0, "creation_date": 1503524908, "post_id": 45849340, "comment_id": 78657782, "body": "Yes that&#39;s a safe assumption. I will edit my original question with some of the code."}, {"owner": {"reputation": 391, "user_id": 5397497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153533963280250/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/5397497/brian"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1503525528, "post_id": 45849340, "comment_id": 78658031, "body": "@wwii I have updated my original post with code snippets. I need to be able to import the factory instance in main.py to schema.py so this information is available within the classes defined."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1503527166, "post_id": 45849340, "comment_id": 78658608, "body": "Why does the module <code>schema</code> need a reference to <code>main.factory</code>? How and when does <code>schema</code> make use of it? it still isn&#39;t clear what you are trying to do, at least to me. Since you are doing partial imports everywhere none of the modules are <i>in scope</i> of the importing modules."}, {"owner": {"reputation": 391, "user_id": 5397497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153533963280250/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/5397497/brian"}, "edited": false, "score": 0, "creation_date": 1503527409, "post_id": 45849340, "comment_id": 78658680, "body": "<code>main.factory</code> has subscribers on the websocket that I would like to be available in the <code>schema.py</code> file under the <code>Mutation</code> class. So far every time there is a mutation/update, send a publish to all subscribers. I&#39;m not sure if this is the correct way as far as a design is concerned. Let me know if it is still not clear. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 1194, "user_id": 8390068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sbzKf.jpg?s=128&g=1", "display_name": "Micheal O&#39;Dwyer", "link": "https://stackoverflow.com/users/8390068/micheal-odwyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1503524722, "last_edit_date": 1503524722, "creation_date": 1503524412, "answer_id": 45849710, "question_id": 45849340, "link": "https://stackoverflow.com/questions/45849340/how-to-make-class-instance-in-main-py-available-in-another-file/45849710#45849710", "title": "How to make Class instance in main.py available in another file?", "body": "<p>For Python functions you could do something like this.</p>\n\n<pre><code>def functionInSchema(objectParameter):\n    # Add in code\n</code></pre>\n\n<p>This will give you access to the object from the <code>main.py</code> file. \nTo access attributes/methods use the parameter name, a dot and the attribute/function name.</p>\n\n<pre><code>def functionInSchema(objectParameter):\n     attribute = objectParameter.attribute\n     objectParameter.method()\n</code></pre>\n\n<p>Then in <code>main.py</code> you pass the Class instance (Object) as a parameter.</p>\n\n<pre><code>objectInMain = Class(param1, param2)\n\nfunctionInSchema(objectInMain)\n</code></pre>\n\n<p>If you need access to the class in <code>schema.py</code> you can use the following import.</p>\n\n<pre><code>from main.py import ClassName\n</code></pre>\n\n<p>I hope this helped you! Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 391, "user_id": 5397497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153533963280250/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/5397497/brian"}, "edited": false, "score": 1, "creation_date": 1503605508, "post_id": 45865752, "comment_id": 78699144, "body": "Thank you @Pixdigit for your very great response. In summary I think you explained nicely the problem I am having is due to a design issue. An API to share the information I want when I want is needed to I will work on this and report back once I have resolved this issue! Thanks again"}], "tags": [], "owner": {"reputation": 80, "user_id": 4134858, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JhtR0.jpg?s=128&g=1", "display_name": "Pixdigit", "link": "https://stackoverflow.com/users/4134858/pixdigit"}, "is_accepted": true, "score": 1, "last_activity_date": 1503589007, "creation_date": 1503589007, "answer_id": 45865752, "question_id": 45849340, "link": "https://stackoverflow.com/questions/45849340/how-to-make-class-instance-in-main-py-available-in-another-file/45865752#45865752", "title": "How to make Class instance in main.py available in another file?", "body": "<p>I know this is not necessarily the answer you need. But I ran into the same problem and for me it meant that I have structured the project wrong. Meaning main.py or schema.py do things they are not meant to do. Of course you made the project so you get to decide what does what but what I mean is that maybe you should abstract even more. Since I do not quite understand what you want to do with the code since I do not know the libraries.</p>\n\n<p>A simple hacky sort of thing is to just create another file called maybe run.py that then imports both files and dependency-injects main into schema or the other way around.\nAnother not-so-nice solution is to create an init() function that then imports the other file after the rest has been initialized and therefore insures that the import is only executed once.</p>\n\n<p>But what <em>I</em> did was to check conceptually why main needed to import (in your case) schema and then ask myself is this really what main.py is supposed to do. If e.g. your main needs to provide templates to all other modules then why not create a templates.py or modules.py? Or what in my case was better is to create a bus system. This could allow modules to share only the data needed when needed and exposes a general api. But of course this would only make sense if you only share information.</p>\n\n<p>In conclusion: Usually when the application is well designed you never run into circular imports. When you do it is a sign that you should rethink about how you structure your program.</p>\n"}], "owner": {"reputation": 391, "user_id": 5397497, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10153533963280250/picture?type=large", "display_name": "Brian", "link": "https://stackoverflow.com/users/5397497/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 45865752, "answer_count": 2, "score": 0, "last_activity_date": 1503589007, "creation_date": 1503522679, "last_edit_date": 1503527963, "question_id": 45849340, "link": "https://stackoverflow.com/questions/45849340/how-to-make-class-instance-in-main-py-available-in-another-file", "title": "How to make Class instance in main.py available in another file?", "body": "<p>I am having difficulty where I need to make the information available in a class that is instantiated in <code>main.py</code> in another file. The best way to describe what I am trying to do can be seen in the flow diagram below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kkM9E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kkM9E.png\" alt=\"Program flow diagram\"></a></p>\n\n<p>The issue as you can imagine is with circular dependency. Is there a way to create an interface between <code>schema.py</code> and <code>main.py</code> so that I can pass class information?</p>\n\n<p>Thank you for your time and any help you can offer!</p>\n\n<p><strong>EDIT</strong>: Added code for reference</p>\n\n<p><code>ws_transport.py</code></p>\n\n<pre><code>from autobahn.twisted.websocket import (\n    WebSocketServerProtocol,\n    WebSocketServerFactory,\n)\n\nfrom schema import schema\n\n\nclass WsProtocol(WebSocketServerProtocol):\n  def __init__(self):\n      # Code here\n\n  def onConnect(self, request):\n      # Code here\n\n  def onMessage(self, payload, isBinary):\n    # Code here\n\n\nclass WsProtocolFactory(WebSocketServerFactory):\n  def __init__(self):\n    super(WsProtocolFactory, self).__init__()\n    self.connection_subscriptions = defaultdict(set)\n    # Code here\n\n  def check_events_db(self):\n    # Code here\n\n  def check_audit_log_db(self):\n    # Code here\n</code></pre>\n\n<p><code>web_transport.py</code></p>\n\n<pre><code>import sys, os\nimport json\n\nfrom twisted.web.resource import Resource\nfrom twisted.web.server import Site, http\n\nfrom schema import schema\n\n\nclass HttpResource(Resource):\n  isLeaf = True\n\n  def render_OPTIONS(self, request):\n    # Code here\n\n  def render_GET(self, request):\n    # Code here\n\n  def render_POST(self, request):\n    # Code here\n\n\n\nclass LoginResource(Resource):\n    isLeaf = True\n\n    def render_OPTIONS(self, request):\n      # Code here\n\n    def render_GET(self, request):\n      # Code here\n\n    def render_POST(self, request):\n      # Code here\n\n\n\nclass RefreshResource(Resource):\n  isLeaf = True\n\n  def render_OPTIONS(self, request):\n    # Code here\n\n  def render_GET(self, request):\n  # Code here\n\n  def render_POST(self, request):\n    # Code here\n\n\n\nclass HttpFactory(Site):\n\n  def __init__(self, resource):\n    # Code here\n</code></pre>\n\n<p><code>schema.py</code></p>\n\n<pre><code>#!/usr/bin/python\nimport graphene\nimport json\nimport sys, os\n\nfrom main import factory\n\n\nclass Query(graphene.ObjectType):\n  # Code here\n\n\nclass Mutation(graphene.ObjectType):\n  # Code here\n\n\nclass Subscription(graphene.ObjectType):\n  # Code here\n\n\nschema = graphene.Schema(query=Query, mutation=Mutation, subscription=Subscription)\n</code></pre>\n\n<p><code>main.py</code></p>\n\n<pre><code>import sys\n\nfrom twisted.internet import reactor\nfrom twisted.web.resource import Resource\nfrom autobahn.twisted.resource import WebSocketResource\n\nfrom ws_transport import WsProtocol, WsProtocolFactory\nfrom web_transport import HttpResource, LoginResource, RefreshResource, HttpFactory\n\n\nif __name__ == '__main__':\n    factory = WsProtocolFactory()\n    factory.protocol = WsProtocol\n    ws_resource = WebSocketResource(factory)\n\n    root = Resource()\n    root.putChild(\"\", HttpResource())\n    root.putChild(\"login\", LoginResource())\n    root.putChild(\"refresh\", RefreshResource())\n    root.putChild(b\"ws\", ws_resource)\n\n    site = HttpFactory(root)\n\n    reactor.listenTCP(8000, site)\n\n    reactor.run()\n</code></pre>\n\n<p>Cheers,</p>\n\n<p>Brian</p>\n"}, {"tags": ["python", "flask", "wtforms", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 2828700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6bb3a0e579dcaa5f65b9c20de26b1271?s=128&d=identicon&r=PG&f=1", "display_name": "Dreadlockyx", "link": "https://stackoverflow.com/users/2828700/dreadlockyx"}, "edited": false, "score": 0, "creation_date": 1504169059, "post_id": 45976393, "comment_id": 78912695, "body": "I&#39;ve actually done that beforehand and it did work, but I forgot to add a portion of code to show errors when <code>session[&#39;state&#39;]==2</code> (thus making me believe there was no validation). I should also mention that the dynamic field have to be removed using <code>delattr</code> otherwise they will stay forever."}], "tags": [], "owner": {"reputation": 14588, "user_id": 244393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55eb813499c0cf9fd47e95690782bf83?s=128&d=identicon&r=PG", "display_name": "Crast", "link": "https://stackoverflow.com/users/244393/crast"}, "is_accepted": true, "score": 1, "last_activity_date": 1504166875, "creation_date": 1504166875, "answer_id": 45976393, "question_id": 45849332, "link": "https://stackoverflow.com/questions/45849332/dynamic-wtform-field-is-not-validated/45976393#45976393", "title": "Dynamic WTForm field is not validated", "body": "<p>Since you call <code>validate()</code> before adding the field, naturally, you can't validate a field which doesn't exist yet.  That said, you don't want to add a field to an <strong>instance</strong> instead of a <strong>class</strong>. This is because since WTForms processes its input data at construction, adding fields to the instance is mostly a meaningless thing.</p>\n\n<p>If your field name is static, you can use the <code>del</code> trick detailed <a href=\"http://wtforms.readthedocs.io/en/2.1/specific_problems.html#removing-fields-per-instance\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>If it's dynamic, you could instead follow the <a href=\"http://wtforms.readthedocs.io/en/2.1/specific_problems.html?highlight=custom#dynamic-form-composition\" rel=\"nofollow noreferrer\">dynamic form composition pattern</a> from the docs.</p>\n\n<p>Since I've gone over this in detail, I'll link my previous example here:\n<a href=\"https://stackoverflow.com/questions/34373823/wtfforms-dynamic-generation/34580824#34580824\">Wtfforms dynamic generation</a></p>\n"}], "owner": {"reputation": 171, "user_id": 2828700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6bb3a0e579dcaa5f65b9c20de26b1271?s=128&d=identicon&r=PG&f=1", "display_name": "Dreadlockyx", "link": "https://stackoverflow.com/users/2828700/dreadlockyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 45976393, "answer_count": 1, "score": 0, "last_activity_date": 1504166875, "creation_date": 1503522639, "question_id": 45849332, "link": "https://stackoverflow.com/questions/45849332/dynamic-wtform-field-is-not-validated", "title": "Dynamic WTForm field is not validated", "body": "<p>If you <a href=\"https://stackoverflow.com/questions/43859978/add-fields-dynamically-to-wtforms-form\">dynamically add a field to a WTForms form</a>, the newly-added fields are not validated (even if you add validators).</p>\n\n<p>For instance, in Flask:</p>\n\n<pre><code>@app.route('/add', methods=['GET', 'POST'])\ndef add():\n    if 'state' not in session:\n        session['state'] = 1\n\n    form = MyForm()\n\n    if request.method == 'POST' and form.validate():\n        if session['state'] == 1:\n            setattr(\n                MyForm,\n                'asd',\n                StringField(\n                    'asdfield',\n                    validators = [\n                        DataRequired(),\n                        Length(min=1)\n                    ]\n                )\n            )\n            form = MyForm()\n            session['state'] = 2\n            return render_template(\n                'add.html',\n                form=form\n            )\n        print(len(form.asd.data)) # can equal 0\n        session['state'] = 1\n        return redirect('/add')\n    return render_template(\n        'add.html',\n        form=form\n    )\n</code></pre>\n\n<p>I believe this is due to the fact that <code>form = MyForm()</code> is run every time you go to <code>/add</code>, so even if <code>session['state'] == 2</code> you run <code>form.validate()</code> on a default form which does not have the dynamically-added field. Therefore, this field cannot be part of the form validation process.</p>\n\n<p>How can one properly address this behaviour ? If it's not possible, then how can one dynamically add fields to an existing form in such a way that all fields get properly validated upon submission ?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1956, "user_id": 2027146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/mrrIp.jpg?s=128&g=1", "display_name": "Milk", "link": "https://stackoverflow.com/users/2027146/milk"}, "edited": false, "score": 0, "creation_date": 1503522906, "post_id": 45849312, "comment_id": 78656941, "body": "Please post the code you have so far so we can get some context"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1503524350, "post_id": 45849312, "comment_id": 78657531, "body": "I don&#39;t understand what these views have to do with each other, or indeed what you&#39;re asking at all."}, {"owner": {"reputation": 11, "user_id": 8508420, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154714956935933/picture?type=large", "display_name": "Safa", "link": "https://stackoverflow.com/users/8508420/safa"}, "edited": false, "score": 0, "creation_date": 1503524458, "post_id": 45849312, "comment_id": 78657570, "body": "the first one get data and use it for runing algorithms and then I want to show the result using chart.js so I need json format this is why i need APIview"}], "owner": {"reputation": 11, "user_id": 8508420, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154714956935933/picture?type=large", "display_name": "Safa", "link": "https://stackoverflow.com/users/8508420/safa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503523451, "creation_date": 1503522571, "last_edit_date": 1503523451, "question_id": 45849312, "link": "https://stackoverflow.com/questions/45849312/django-apiview-get-data-from-another-class", "title": "Django APIView get data from another class", "body": "<p>I'm beginer in Django, I developed a class view wich get data from a form. using this data I run my algorithms and I want to show the result using a chart. So to send data from the view to the template I used APIview. but my problem is I can't get data from the first class which get data and run algorithm and send the result to the second class API view</p>\n\n<pre><code>class GeneticView(TemplateView):\ntemplate_name = 'Optimisation/genetics.html'\nmaxTest = [1,2,3,4]\ndef get(self, request):\n    form = GeneticsForm()\n    return render(request, self.template_name, {'form': form})\ndef post(self, request):\n    form = GeneticsForm(request.POST)\n    if form.is_valid():\n        NP = form.cleaned_data['NP']\n        NGEN = form.cleaned_data['NGEN']\n        CXPB = form.cleaned_data['CXPB']\n        MUTPB = form.cleaned_data['MUTPB']\n        genetic = Genetic(NP, CXPB, MUTPB, NGEN)\n        genetic.GeneticMethod()\n\n        #Get the information of the RUN\n        best_ind = genetic.get_best()\n        run_time = genetic.get_RunTime()\n\n    args = {\n        'form': form,\n        'best': best_ind,\n        'run': run_time,\n        'max': genetic.get_max(),\n        'min': genetic.get_min(),\n        'avg': genetic.get_avg(),\n        'std': genetic.get_std(),\n    }\n    return render(request, self.template_name, args)\n</code></pre>\n\n<p>API class:</p>\n\n<pre><code>class ChartData(APIView):\n\nauthentication_classes = []\npermission_classes = []\n\ndef get(self, request, format=None):\n    data = {\n        'max': [20, 12, 3, 2, 13],\n        'min': [10, 2, 3, 8, 5],\n    }\n    return Response(data)\n</code></pre>\n\n<p>I want from the first send the max and min\nI just tested the API class with some data</p>\n\n<p>Thanks   </p>\n"}, {"tags": ["python", "pyspark", "pyspark-sql"], "answers": [{"comments": [{"owner": {"reputation": 8366, "user_id": 2602816, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b155d0e2e4bfb8b419a7fa1c5c917743?s=128&d=identicon&r=PG", "display_name": "vaer-k", "link": "https://stackoverflow.com/users/2602816/vaer-k"}, "edited": false, "score": 0, "creation_date": 1503524038, "post_id": 45849611, "comment_id": 78657393, "body": "The columns are not different types, but instead both are type <code>pyspark.sql.TimestampType</code>"}, {"owner": {"reputation": 8366, "user_id": 2602816, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b155d0e2e4bfb8b419a7fa1c5c917743?s=128&d=identicon&r=PG", "display_name": "vaer-k", "link": "https://stackoverflow.com/users/2602816/vaer-k"}, "edited": false, "score": 0, "creation_date": 1503524492, "post_id": 45849611, "comment_id": 78657587, "body": "Additionally, these are datetime objects, so the <code>unix_timestamp</code> function will not work, since it operates on string input. I guess I could convert them from datetimes to strings then run them through <code>unix_timestamp</code>. I wonder if there is a more straightforward way though."}, {"owner": {"reputation": 6696, "user_id": 8467558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqOGB.jpg?s=128&g=1", "display_name": "MaFF", "link": "https://stackoverflow.com/users/8467558/maff"}, "reply_to_user": {"reputation": 8366, "user_id": 2602816, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b155d0e2e4bfb8b419a7fa1c5c917743?s=128&d=identicon&r=PG", "display_name": "vaer-k", "link": "https://stackoverflow.com/users/2602816/vaer-k"}, "edited": false, "score": 0, "creation_date": 1503526677, "post_id": 45849611, "comment_id": 78658433, "body": "In pyspark we don&#39;t have access to all the datetime functions from python, the only other function for time differences is datediff for days. So unless you write a UDF which will be less efficient than a straight pyspark solution you&#39;ll have to use a timestamp difference by converting them into <code>int</code>."}, {"owner": {"reputation": 8366, "user_id": 2602816, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b155d0e2e4bfb8b419a7fa1c5c917743?s=128&d=identicon&r=PG", "display_name": "vaer-k", "link": "https://stackoverflow.com/users/2602816/vaer-k"}, "edited": false, "score": 0, "creation_date": 1503531112, "post_id": 45849611, "comment_id": 78659678, "body": "Unfortunately that solution does not work. Although no error is thrown, the resultant rows contain records where the difference between the columns is much longer than an hour."}, {"owner": {"reputation": 8366, "user_id": 2602816, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b155d0e2e4bfb8b419a7fa1c5c917743?s=128&d=identicon&r=PG", "display_name": "vaer-k", "link": "https://stackoverflow.com/users/2602816/vaer-k"}, "edited": false, "score": 0, "creation_date": 1503531634, "post_id": 45849611, "comment_id": 78659823, "body": "Actually, it might work if I reverse the order of the columns in the subtraction operation. Let me double check..."}, {"owner": {"reputation": 8366, "user_id": 2602816, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b155d0e2e4bfb8b419a7fa1c5c917743?s=128&d=identicon&r=PG", "display_name": "vaer-k", "link": "https://stackoverflow.com/users/2602816/vaer-k"}, "edited": false, "score": 0, "creation_date": 1503531953, "post_id": 45849611, "comment_id": 78659893, "body": "Yes, it will work if I reverse the order or just use the <code>pyspark.sql.abs</code> function. Thank you."}, {"owner": {"reputation": 6696, "user_id": 8467558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqOGB.jpg?s=128&g=1", "display_name": "MaFF", "link": "https://stackoverflow.com/users/8467558/maff"}, "reply_to_user": {"reputation": 8366, "user_id": 2602816, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b155d0e2e4bfb8b419a7fa1c5c917743?s=128&d=identicon&r=PG", "display_name": "vaer-k", "link": "https://stackoverflow.com/users/2602816/vaer-k"}, "edited": false, "score": 0, "creation_date": 1503554556, "post_id": 45849611, "comment_id": 78665848, "body": "You are right, I didn&#39;t account for negative time differences. Please provide a full reproducible example next time."}], "tags": [], "owner": {"reputation": 6696, "user_id": 8467558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqOGB.jpg?s=128&g=1", "display_name": "MaFF", "link": "https://stackoverflow.com/users/8467558/maff"}, "is_accepted": true, "score": 1, "last_activity_date": 1503554590, "last_edit_date": 1503554590, "creation_date": 1503523958, "answer_id": 45849611, "question_id": 45849311, "link": "https://stackoverflow.com/questions/45849311/filter-pyspark-dataframe-based-on-time-difference-between-two-columns/45849611#45849611", "title": "Filter pyspark dataframe based on time difference between two columns", "body": "<p>Your columns have different types, it's difficult to interpret what the difference means, usually for timestamps it's seconds and for dates it's days. You can transform both columns to unix timestamps beforehand to get a difference in seconds:</p>\n\n\n\n<pre class=\"lang-py prettyprint-override\"><code>import pyspark.sql.functions as psf\ndata.filter(\n    psf.abs(psf.unix_timestamp(data.tstamp) - psf.unix_timestamp(data.date)) &lt; 3600\n)\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>This function will work on strings (given they have a correct format), on timestamps and on dates:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import datetime\ndata = hc.createDataFrame(sc.parallelize([[datetime.datetime(2017,1,2,1,1,1), datetime.date(2017,8,7)]]), ['tstamp', 'date'])\ndata.printSchema()\n    root\n     |-- tstamp: timestamp (nullable = true)\n     |-- date: date (nullable = true)\n\ndata.select(\n    psf.unix_timestamp(data.tstamp).alias('tstamp'), psf.unix_timestamp(data.date).alias(\"date\")\n).show()\n    +----------+----------+\n    |    tstamp|      date|\n    +----------+----------+\n    |1483315261|1502056800|\n    +----------+----------+\n</code></pre>\n"}], "owner": {"reputation": 8366, "user_id": 2602816, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b155d0e2e4bfb8b419a7fa1c5c917743?s=128&d=identicon&r=PG", "display_name": "vaer-k", "link": "https://stackoverflow.com/users/2602816/vaer-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1792, "favorite_count": 0, "accepted_answer_id": 45849611, "answer_count": 1, "score": 1, "last_activity_date": 1503554590, "creation_date": 1503522568, "last_edit_date": 1503531922, "question_id": 45849311, "link": "https://stackoverflow.com/questions/45849311/filter-pyspark-dataframe-based-on-time-difference-between-two-columns", "title": "Filter pyspark dataframe based on time difference between two columns", "body": "<p>I have a dataframe with multiple columns, two of which are of type <code>pyspark.sql.TimestampType</code>. I would like to filter this dataframe to rows where the time difference between these two columns is less than one hour. </p>\n\n<p>I'm currently trying to do this like so:\n<code>\nexamples = data.filter((data.tstamp - data.date) &lt; datetime.timedelta(hours=1))\n</code></p>\n\n<p>But this fails with the following error message:</p>\n\n<pre><code>org.apache.spark.sql.AnalysisException: cannot resolve '(`tstamp` - `date`)' due to data type mismatch: '(`tstamp` - `date`)' requires (numeric or calendarinterval) type, not timestamp\n</code></pre>\n\n<p>What is the correct method to achieve this filter?</p>\n"}, {"tags": ["python", "namedtuple", "python-collections"], "comments": [{"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 5, "creation_date": 1503522318, "post_id": 45849235, "comment_id": 78656680, "body": "How does that not apply? <code>[Vertex(*x) for x in templist]</code> is an application of the accepted answer in that question, and applies here"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8508347"}, "reply_to_user": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1503522437, "post_id": 45849235, "comment_id": 78656739, "body": "I&#39;m sorry, I&#39;m a beginner and I didn&#39;t know adding the <code>for x in templist part</code> will solve the problem. I&#39;ll try it out and let you know."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8508347"}, "edited": false, "score": 0, "creation_date": 1503522564, "post_id": 45849235, "comment_id": 78656797, "body": "IT WORKED.. I&#39;m sorry this became nothing but a duplicate.."}, {"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1503522583, "post_id": 45849235, "comment_id": 78656807, "body": "<code>[Vertex(a,b,c) for a,b,c in templist]</code>   but the purpose as above, <code>*x</code> will explode the tuple into its components."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1503522754, "post_id": 45849235, "comment_id": 78656875, "body": "Even more efficient is using <code>_make</code> so you use the <code>list</code>s directly. <code>[Vertex._make(x) for x in templist]</code>, or with <code>map</code>, <code>map(Vertex._make, templist)</code>."}], "owner": {"user_type": "does_not_exist", "display_name": "user8508347"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "closed_date": 1503522614, "answer_count": 0, "score": 0, "last_activity_date": 1503522752, "creation_date": 1503522175, "last_edit_date": 1503522752, "question_id": 45849235, "link": "https://stackoverflow.com/questions/45849235/how-to-dynamically-create-namedtuple-from-a-list-of-lists", "closed_reason": "Duplicate", "title": "How to dynamically create namedtuple from a list of lists?", "body": "<p>So I have a list of list called <code>templist</code> like this: </p>\n\n<p><code>[['C0', 1, 1], ['NA', 4, 5], ['NA', 3, 7], ['C3', 9, 3], ['NA', 8, 4], ['NA', 7, 5], ['C6', 6, 6], ['NA', 5, 10]]</code></p>\n\n<p>The way you create a namedtuple for the above list is:</p>\n\n<pre><code>from collections import namedtuple\n\nVertex = namedtuple('Vertex', ['NAME', 'x', 'y'])\n\nvertices = [\n    Vertex('C0', 1, 1), \n    Vertex('NA', 4, 5), \n    Vertex('NA', 3, 7), \n    Vertex('C3', 9, 3), \n    Vertex('NA', 8, 4), \n    Vertex('NA', 7, 5), \n    Vertex('C6', 6, 6), \n    Vertex('NA', 5, 10)\n           ]\n</code></pre>\n\n<p>The above namedtuple must look like this on printing</p>\n\n<pre><code>print vertices\n</code></pre>\n\n<p><code>[Vertex(NAME='C0', x=1, y=1), Vertex(NAME='NA', x=4, y=5), Vertex(NAME='NA', x=3, y=7), Vertex(NAME='C3', x=9, y=3), Vertex(NAME='NA', x=8, y=4), Vertex(NAME='NA', x=7, y=5), Vertex(NAME='C6', x=6, y=6), Vertex(NAME='NA', x=5, y=10)]</code></p>\n\n<p>I need it to be this way since I had added another distance field to this and converted it to a dictionary with nested key value pairs. <strong>So I absolutely MUST have it this way.</strong> (Trying to implement K-MEANS)</p>\n\n<p>Other answers related to this, like the one in this, <a href=\"https://stackoverflow.com/questions/30610827/creating-a-namedtuple-from-a-list\">Creating a namedtuple from a list</a> can't apply to this, since this is a list of lists. <strong>EDIT: IT DOES APPLY, YOU HAVE TO JUST MODIFY IT AS SUGGESTED IN THE COMMENTS</strong></p>\n\n<p>My question is, how do I DYNAMICALLY create a named tuple in the above format of <code>vertices</code> from any given list of lists in the format of <code>templist</code> </p>\n\n<p>In other words, all I want to do is supply a list of lists in format of <code>templist</code> (since that list is generated by another function so it will change every-time you run the program) and generate DYNAMICALLY a named tuple in the above format of <code>vertices</code></p>\n"}, {"tags": ["python", "json", "apache-spark", "pyspark", "spark-submit"], "comments": [{"owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "edited": false, "score": 0, "creation_date": 1504360009, "post_id": 45849223, "comment_id": 78988911, "body": "How do you pass the argument (json) to the spark-submit?"}, {"owner": {"reputation": 215, "user_id": 870228, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/87998daefcefe7621256ad24fa6407e4?s=128&d=identicon&r=PG", "display_name": "trailblazer", "link": "https://stackoverflow.com/users/870228/trailblazer"}, "reply_to_user": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "edited": false, "score": 0, "creation_date": 1504727374, "post_id": 45849223, "comment_id": 79128417, "body": "@Mariusz as json blob arg to python script, and read it via argparse"}, {"owner": {"reputation": 10736, "user_id": 7098262, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--lzQ7MKpXAA/AAAAAAAAAAI/AAAAAAAAAUE/rUXhWfRLdmI/photo.jpg?sz=128", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/7098262/mariusz"}, "edited": false, "score": 0, "creation_date": 1504768782, "post_id": 45849223, "comment_id": 79141975, "body": "Could you please update the question with commands you use to run the spark-submit with the argument passed? Did you try looking what is inside <code>sys.argv</code> before loading argparse?"}], "owner": {"reputation": 215, "user_id": 870228, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/87998daefcefe7621256ad24fa6407e4?s=128&d=identicon&r=PG", "display_name": "trailblazer", "link": "https://stackoverflow.com/users/870228/trailblazer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1503522146, "creation_date": 1503522146, "question_id": 45849223, "link": "https://stackoverflow.com/questions/45849223/json-decoding-error-in-spark2-cluster-mode-works-fine-in-client-mode", "title": "JSON Decoding error in spark2 cluster mode, works fine in client mode", "body": "<p>Using spark-submit cmd(Spark2 CDH 5.9) to run a python script, I am getting the following json decoding error only in cluster mode (client is fine):</p>\n\n<pre><code>e.g.\nTraceback (most recent call last):\n  File \"dummy.py\", line 115, in &lt;module&gt;\n    cfg = json.loads(args.params)\n  File \"/opt/cloudera/parcels/Anaconda/envs/py35/lib/python3.5/json/__init__.py\", line 319, in loads\n    return _default_decoder.decode(s)\n  File \"/opt/cloudera/parcels/Anaconda/envs/py35/lib/python3.5/json/decoder.py\", line 339, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/opt/cloudera/parcels/Anaconda/envs/py35/lib/python3.5/json/decoder.py\", line 355, in raw_decode\n    obj, end = self.scan_once(s, idx)\njson.decoder.JSONDecodeError: Expecting ',' delimiter: line 1 column 863 (char 862)\n</code></pre>\n\n<p>I understand the above error is due to invalid json. However, the json passed to the script is valid (Explained ahead). It seems spark-submit cluster mode is modifying the json argument for the python script. I compared logs in both \n\"client\" and \"cluster\" mode, and found that the json arg in client stays as is, whereas in cluster mode gets modified. </p>\n\n<p>The json that I am passing has a structure like this:</p>\n\n<pre><code>{\n    \"X\": {\n        \"A\": {\n            \"a\": \"b\",\n            \"c\": \"d\"\n        }\n    },\n    \"Y\": [\"e\", \"f\"],\n    \"Z\": \"g\"\n}\n</code></pre>\n\n<p>Client mode receives it as is, where Cluster mode gets the following:</p>\n\n<pre><code>{\n    \"X\": {\n        \"A\": {\n            \"a\": \"b\",\n            \"c\": \"d\",\n    \"Y\": [\"e\", \"f\"],\n    \"Z\": \"g\"\n}\n</code></pre>\n\n<p>this seems a very odd behavior. Any insights would be really helpful.</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 0, "creation_date": 1503522349, "post_id": 45849216, "comment_id": 78656699, "body": "What are <code>a</code> and <code>b</code>? Do the dictionaries have anything else in them? Might there be multiple entries with <code>&#39;a&#39;: &#39;xyz&#39;</code> in either list? Couldn&#39;t you just represent this as <code>A = {&#39;xyz&#39;: 3, &#39;zzz&#39;: 1}</code>?"}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1503522558, "post_id": 45849216, "comment_id": 78656794, "body": "Can you please show what you&#39;ve tried? Your question is currently to broad."}, {"owner": {"reputation": 9242, "user_id": 2827771, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96059824f2f3da358b88e0550749610d?s=128&d=identicon&r=PG&f=1", "display_name": "ahajib", "link": "https://stackoverflow.com/users/2827771/ahajib"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1503522948, "post_id": 45849216, "comment_id": 78656955, "body": "@ChristianDean alright modified it"}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1503523036, "post_id": 45849216, "comment_id": 78656992, "body": "I think you have the wrong data structure.  Why have a list of dictionaries containing key names <code>id</code> and <code>count</code>?  Why not just <code>A = {&#39;xyz&#39;: 3, &#39;zzz&#39;: 1}</code>?  If you really need names include it in the variable name: <code>A_counts_by_id = {&#39;xyz&#39;: 3, &#39;zzz&#39;: 1}</code>.  Then you&#39;re just a hop and a skip away from using <code>collections.Counter</code>, which is just a specialized dict that supports counts.  And you can add them together."}, {"owner": {"reputation": 9242, "user_id": 2827771, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96059824f2f3da358b88e0550749610d?s=128&d=identicon&r=PG&f=1", "display_name": "ahajib", "link": "https://stackoverflow.com/users/2827771/ahajib"}, "reply_to_user": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1503581656, "post_id": 45849216, "comment_id": 78684356, "body": "@StevenRumbalski I would love to do that I have no control over these data structures as they are outputs of another existing function"}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 1, "last_activity_date": 1503523427, "creation_date": 1503523427, "answer_id": 45849491, "question_id": 45849216, "link": "https://stackoverflow.com/questions/45849216/python-merge-two-list-of-dictionaries-adding-values-of-repeated-keys/45849491#45849491", "title": "Python - merge two list of dictionaries adding values of repeated keys", "body": "<p>Here's one way to do it using <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\"><code>itertools.groupby</code></a>:</p>\n\n<pre><code>from itertools import groupby\nfrom operator import itemgetter\n\nf = itemgetter('id')\n\nlst = [{'id': k, 'count': sum(d['count'] for d in g)} \n                         for k, g in groupby(sorted(A+B, key=f), f)]\nprint(lst)\n# [{'id': 'xyz', 'count': 7}, {'id': 'zzz', 'count': 1}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "is_accepted": true, "score": 1, "last_activity_date": 1503588410, "last_edit_date": 1503588410, "creation_date": 1503523809, "answer_id": 45849580, "question_id": 45849216, "link": "https://stackoverflow.com/questions/45849216/python-merge-two-list-of-dictionaries-adding-values-of-repeated-keys/45849580#45849580", "title": "Python - merge two list of dictionaries adding values of repeated keys", "body": "<pre><code>from collections import Counter\n\nC_counts = Counter()\nfor l in (A, B):\n    C_counts.update({x['id']: x['count'] for x in l})\n\nC = [{'id':k, 'count':c} for (k, c) in C_counts.items()]\n</code></pre>\n\n<p>If you really don't want to import <code>collections.Counter</code> you can do:</p>\n\n<pre><code>_C = {}\nfor l in A, B:\n    for d in l:\n        _C[d['id']] = d['count'] + _C.get(d['id'], 0)\n\nC = [{'id':k, 'count':c} for (k, c) in _C.items()]\n</code></pre>\n"}], "owner": {"reputation": 9242, "user_id": 2827771, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96059824f2f3da358b88e0550749610d?s=128&d=identicon&r=PG&f=1", "display_name": "ahajib", "link": "https://stackoverflow.com/users/2827771/ahajib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 45849580, "answer_count": 2, "score": 1, "last_activity_date": 1503588410, "creation_date": 1503522128, "last_edit_date": 1503522565, "question_id": 45849216, "link": "https://stackoverflow.com/questions/45849216/python-merge-two-list-of-dictionaries-adding-values-of-repeated-keys", "title": "Python - merge two list of dictionaries adding values of repeated keys", "body": "<p>So I have two list of dictionaries which look like the following:</p>\n\n<pre><code>A = [{'id':'xyz', 'count': 3},{'id':'zzz', 'count': 1}]\nB = [{'id':'xyz', 'count': 4}]\n</code></pre>\n\n<p>I want the final output to be like:</p>\n\n<pre><code>C = [{'id':'xyz', 'count': 7},{'id':'zzz', 'count': 1}]\n</code></pre>\n\n<p>So in case that if the value of the first key is the same in both lists, we add up the values for the second key. Any idea how I might achieve this? So far I have tried:</p>\n\n<pre><code>for elem in A:\n    if elem['id'] in B.elementsKey['id']:\n        # TO DO\n</code></pre>\n\n<p>I am stock where I am trying to update the value for the other element accordingly.</p>\n\n<p>NOTE: Each id is unique.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "debian"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503523306, "post_id": 45849176, "comment_id": 78657104, "body": "That <i>specific</i> import, or just any import at all? Does <code>import os</code> have the same effect?"}, {"owner": {"reputation": 173, "user_id": 7460681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/31dddd963fabed4b9d267e485cf443d4?s=128&d=identicon&r=PG&f=1", "display_name": "Techmanic", "link": "https://stackoverflow.com/users/7460681/techmanic"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503523725, "post_id": 45849176, "comment_id": 78657281, "body": "Hi there,  I&#39;ve amended my question with an error message relating to mouse on re-run.  But, yeah any import will break it, it&#39;s not specific."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1503523806, "post_id": 45849176, "comment_id": 78657313, "body": "How about a script that doesn&#39;t have <code>import</code>? Does that also hang your system?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1503523862, "post_id": 45849176, "comment_id": 78657337, "body": "This sounds like you did something horrible to something you shouldn&#39;t have touched because you didn&#39;t realize you shouldn&#39;t have touched it."}, {"owner": {"reputation": 173, "user_id": 7460681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/31dddd963fabed4b9d267e485cf443d4?s=128&d=identicon&r=PG&f=1", "display_name": "Techmanic", "link": "https://stackoverflow.com/users/7460681/techmanic"}, "edited": false, "score": 0, "creation_date": 1503524038, "post_id": 45849176, "comment_id": 78657394, "body": "Sound like that, but nope - this is a brand new install last night.   Strangely, if I put &#39;import os&#39; in there was well as another one the same issue happens with the mouse but after two clicks it changes back again and works and I can click.  So confused by all of this."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 7460681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/31dddd963fabed4b9d267e485cf443d4?s=128&d=identicon&r=PG&f=1", "display_name": "Techmanic", "link": "https://stackoverflow.com/users/7460681/techmanic"}, "edited": false, "score": 0, "creation_date": 1503524223, "post_id": 45849621, "comment_id": 78657475, "body": "PMSL.  Damn I&#39;m a numpty. Well done on spotting the obvious."}, {"owner": {"reputation": 173, "user_id": 7460681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/31dddd963fabed4b9d267e485cf443d4?s=128&d=identicon&r=PG&f=1", "display_name": "Techmanic", "link": "https://stackoverflow.com/users/7460681/techmanic"}, "edited": false, "score": 0, "creation_date": 1503524308, "post_id": 45849621, "comment_id": 78657519, "body": "I tried to downvote my own question, but it doesn&#39;t let me do that."}, {"owner": {"reputation": 332, "user_id": 283067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb243975f97e6a87a3cd79afed25c83d?s=128&d=identicon&r=PG", "display_name": "solsTiCe", "link": "https://stackoverflow.com/users/283067/solstice"}, "edited": false, "score": 2, "creation_date": 1524915851, "post_id": 45849621, "comment_id": 87168422, "body": "This could happend also if you mis-type the shebang like <code>#&#47;usr&#47;bin&#47;python</code> for example even and the file is executable"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 28, "last_activity_date": 1503524008, "creation_date": 1503524008, "answer_id": 45849621, "question_id": 45849176, "link": "https://stackoverflow.com/questions/45849176/just-writing-import-in-a-python-script-breaks-my-mouse-cursor-forcing-a-hard-r/45849621#45849621", "title": "Just writing &#39;import&#39; in a python script breaks my mouse cursor forcing a hard reset", "body": "<p>You're not running Python! You're accidentally running this as a shell script. Run it as</p>\n\n<pre><code>python bug.py\n</code></pre>\n\n<p>or include the shebang line:</p>\n\n<pre><code>#!/usr/bin/env python\n</code></pre>\n\n<p>Currently, you seem to be running a <a href=\"https://ss64.com/bash/import.html\" rel=\"noreferrer\">completely unrelated program named <code>import</code></a>, designed for screen capture.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 9512772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9d9a93e1dba5d2a37168f1cf289c74a?s=128&d=identicon&r=PG&f=1", "display_name": "Chaulio Ferreira", "link": "https://stackoverflow.com/users/9512772/chaulio-ferreira"}, "is_accepted": false, "score": 2, "last_activity_date": 1590625938, "creation_date": 1590625938, "answer_id": 62055037, "question_id": 45849176, "link": "https://stackoverflow.com/questions/45849176/just-writing-import-in-a-python-script-breaks-my-mouse-cursor-forcing-a-hard-r/62055037#62055037", "title": "Just writing &#39;import&#39; in a python script breaks my mouse cursor forcing a hard reset", "body": "<p>This has just happened to me, and without this thread I would never have found the cause. I just would like to add that you can stop the 'import' program by running:</p>\n\n<pre><code>pkill -9 import\n</code></pre>\n\n<p>And that should fix everything.</p>\n"}], "owner": {"reputation": 173, "user_id": 7460681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/31dddd963fabed4b9d267e485cf443d4?s=128&d=identicon&r=PG&f=1", "display_name": "Techmanic", "link": "https://stackoverflow.com/users/7460681/techmanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5596, "favorite_count": 2, "accepted_answer_id": 45849621, "answer_count": 2, "score": 14, "last_activity_date": 1590625938, "creation_date": 1503521963, "last_edit_date": 1503523660, "question_id": 45849176, "link": "https://stackoverflow.com/questions/45849176/just-writing-import-in-a-python-script-breaks-my-mouse-cursor-forcing-a-hard-r", "title": "Just writing &#39;import&#39; in a python script breaks my mouse cursor forcing a hard reset", "body": "<p>I'm totally baffled by this.. Trying to code a python script on my Debian Stretch system but after running a 4 lined script my mouse cursor would turn into a cross and blocking any click actions from working and forcing me to hard reset the system by holding the off button!</p>\n\n<p>I tested a few times and found out that my script just needs to contain an import for it to break, nothing else - literally a one-lined:</p>\n\n<pre><code>import pxssh\n</code></pre>\n\n<p>And run</p>\n\n<pre><code>./bug.py \n</code></pre>\n\n<p>System broken.  Mouse cursor looks like a cross and cannot click anywhere. Hard reset required.</p>\n\n<p>I found someone else with what appears to be the exact same issue, there's an uploaded image of it but I don't know if it was python causing it for him/her. <a href=\"https://askubuntu.com/questions/918261/why-does-my-cursor-keep-changing-to-a-black-cross-and-how-do-i-revert-it\">https://askubuntu.com/questions/918261/why-does-my-cursor-keep-changing-to-a-black-cross-and-how-do-i-revert-it</a></p>\n\n<p>If I use my keyboard and re-run it again, I get this error:</p>\n\n<pre><code>import-im6.q16: unable to grab mouse `': Resource temporarily unavailable @ error/xwindow.c/XSelectWindow/9182.\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6351, "user_id": 10415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99940add21e5fb2247237459a586597d?s=128&d=identicon&r=PG", "display_name": "runrig", "link": "https://stackoverflow.com/users/10415/runrig"}, "edited": false, "score": 0, "creation_date": 1612552738, "post_id": 45849169, "comment_id": 116812034, "body": "Note: In later versions, &#39;html.parser.HTMLParser().unescape() should just be &#39;html.unescape()&#39;...with just &#39;import html&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 5253793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376a8b78461d7394fd7a4104c7e20bd3?s=128&d=identicon&r=PG&f=1", "display_name": "snowman", "link": "https://stackoverflow.com/users/5253793/snowman"}, "is_accepted": false, "score": 0, "last_activity_date": 1503591877, "creation_date": 1503591877, "answer_id": 45866695, "question_id": 45849169, "link": "https://stackoverflow.com/questions/45849169/python-3-6-2-proofpoint-decoder-indexerror-list-index-out-of-range/45866695#45866695", "title": "Python 3.6.2 Proofpoint Decoder IndexError: list index out of range", "body": "<p>Nevermind. I think it's cause it's running without an argument. </p>\n"}], "owner": {"reputation": 15, "user_id": 5253793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376a8b78461d7394fd7a4104c7e20bd3?s=128&d=identicon&r=PG&f=1", "display_name": "snowman", "link": "https://stackoverflow.com/users/5253793/snowman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503591877, "creation_date": 1503521901, "question_id": 45849169, "link": "https://stackoverflow.com/questions/45849169/python-3-6-2-proofpoint-decoder-indexerror-list-index-out-of-range", "title": "Python 3.6.2 Proofpoint Decoder IndexError: list index out of range", "body": "<p>Proofpoint has a simple Python script that decodes URL's that have been rewritten. This was written and published by them so I was assuming it would work. Could this be a Python 2.7 vs. 3.x.x thing? I am trying to run it in Pycharms right now to run it.</p>\n\n<p>Error:</p>\n\n<pre><code>File \"C:/Users/PP-Decoder.py\", line 10, in main\n    rewrittenurl = sys.argv[1]\nIndexError: list index out of range\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#!python\n\nimport sys\nimport re\nimport urllib.parse\nimport html.parser\n\n\ndef main():\n    rewrittenurl = sys.argv[1]\n    match = re.search(r'https://urldefense.proofpoint.com/(v[0-9])/', rewrittenurl)\n    if match:\n        if match.group(1) == 'v1':\n            decodev1(rewrittenurl)\n        elif match.group(1) == 'v2':\n            decodev2(rewrittenurl)\n        else:\n            print('Unrecognized version in: ', rewrittenurl)\n\n    else:\n        print('No valid URL found in input: ', rewrittenurl)\n\n\ndef decodev1(rewrittenurl):\n    match = re.search(r'u=(.+?)&amp;k=', rewrittenurl)\n    if match:\n        urlencodedurl = match.group(1)\n        htmlencodedurl = urllib.parse.unquote(urlencodedurl)\n        url = html.parser.HTMLParser().unescape(htmlencodedurl)\n        print(url)\n    else:\n        print('Error parsing URL')\n\n\ndef decodev2(rewrittenurl):\n    match = re.search(r'u=(.+?)&amp;[dc]=', rewrittenurl)\n    if match:\n        specialencodedurl = match.group(1)\n        trans = str.maketrans('-_', '%/')\n        urlencodedurl = specialencodedurl.translate(trans)\n        htmlencodedurl = urllib.parse.unquote(urlencodedurl)\n        url = html.parser.HTMLParser().unescape(htmlencodedurl)\n        print(url)\n    else:\n        print('Error parsing URL')\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "lambda"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1503521937, "post_id": 45849154, "comment_id": 78656521, "body": "You were missing a parenthesis in your first method: <code>sorted(data, key=lambda x: datetime.strptime(x[field_name]))</code>"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1503521949, "post_id": 45849154, "comment_id": 78656531, "body": "Count the number of opening and closing parenthesis on that line."}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 1, "last_activity_date": 1503521964, "creation_date": 1503521964, "answer_id": 45849177, "question_id": 45849154, "link": "https://stackoverflow.com/questions/45849154/lambda-syntax-error-trying-to-convert-to-datetime/45849177#45849177", "title": "Lambda syntax error trying to convert to datetime", "body": "<p>You're missing a closing parens. However, asides that, you also  need to pass the format string to <code>strptime</code> to make it work:</p>\n\n<pre><code>def sort_data_by_datetime(data, field_name='Datetime', datetime_format='%Y-%m-%d %H:%M'):\n    return sorted(data, key=lambda x: datetime.strptime(x[field_name], datetime_format))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": false, "score": 1, "last_activity_date": 1503521993, "creation_date": 1503521993, "answer_id": 45849184, "question_id": 45849154, "link": "https://stackoverflow.com/questions/45849154/lambda-syntax-error-trying-to-convert-to-datetime/45849184#45849184", "title": "Lambda syntax error trying to convert to datetime", "body": "<p>If you're using ISO 8601 dates, you can simply sort them alphanumerically:</p>\n\n<pre><code>def sort_data_by_datetime(data, field_name='Datetime'):\n    return sorted(data, key=lambda x: x[field_name])\n</code></pre>\n\n<p>or sorting in-place, which is slightly more efficient:</p>\n\n<pre><code>def sort_data_by_datetime(data, field_name='Datetime'):\n    data.sort(key=lambda x: x[field_name])\n    return data\n</code></pre>\n"}], "owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1230, "favorite_count": 0, "accepted_answer_id": 45849177, "answer_count": 2, "score": -1, "last_activity_date": 1548752114, "creation_date": 1503521847, "last_edit_date": 1548752114, "question_id": 45849154, "link": "https://stackoverflow.com/questions/45849154/lambda-syntax-error-trying-to-convert-to-datetime", "title": "Lambda syntax error trying to convert to datetime", "body": "<p>I was trying to sort a list of dictionaries by the actual datetime, while preserving the value. Something like:</p>\n\n<pre><code>[\n    {\n        \"count\": \"33\",\n        \"Datetime\": \"2017-08-22 23:26\"\n    },\n    {\n        \"count\": \"35\",\n        \"Datetime\": \"2017-08-22 23:25\"\n    },\n    {\n        \"count\": \"22\",\n        \"Datetime\": \"2017-08-22 23:27\"\n    },\n]\n</code></pre>\n\n<p>should be sorted by datetime.\nI tried:</p>\n\n<pre><code>def sort_data_by_datetime(data, field_name='Datetime', datetime_format='%Y-%m-%d %H:%M'):\n\n    return sorted(data, key=lambda x: datetime.strptime(x[field_name])\n</code></pre>\n\n<p>but got syntax error, and ended up with:</p>\n\n<pre><code>def sort_data_by_datetime(data, field_name='Datetime', datetime_format='%Y-%m-%d %H:%M'):\n\n    def convert_datestring_to_datetime(x):\n        return datetime.strptime(x[field_name], datetime_format)\n\n    # return sorted(data, key=lambda x: datetime.strptime(x[field_name])\n    return sorted(data, key=convert_datestring_to_datetime)\n</code></pre>\n\n<p>I thought lambdas just had to be a single expression, and the lambda above seems to be a single line. Where is the syntax error with that lambda?</p>\n"}, {"tags": ["python", "list", "file"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 5, "creation_date": 1503521838, "post_id": 45849128, "comment_id": 78656484, "body": "You don&#39;t modify either of the global list variables."}, {"owner": {"reputation": 2718, "user_id": 3151902, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fc5583056ec05b944374d2c3650f1b8e?s=128&d=identicon&r=PG&f=1", "display_name": "user3151902", "link": "https://stackoverflow.com/users/3151902/user3151902"}, "edited": false, "score": 0, "creation_date": 1503521972, "post_id": 45849128, "comment_id": 78656537, "body": "You might also be interested in <a href=\"https://www.smallsurething.com/a-quick-guide-to-nonlocal-in-python-3/\" rel=\"nofollow noreferrer\">this article about the &quot;nonlocal&quot; keyword</a>"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 7595183, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/VBs1R.png?s=128&g=1", "display_name": "Nicholas A. Randall", "link": "https://stackoverflow.com/users/7595183/nicholas-a-randall"}, "edited": false, "score": 0, "creation_date": 1503530568, "post_id": 45849732, "comment_id": 78659571, "body": "This works. Although why do I have to put questionsList=retrieveQuestions() ? Shouldn&#39;t the retrieveQuestions method by itself assign input to questionsList? That&#39;s what it&#39;s doing inside the function correct?"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 181, "user_id": 7595183, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/VBs1R.png?s=128&g=1", "display_name": "Nicholas A. Randall", "link": "https://stackoverflow.com/users/7595183/nicholas-a-randall"}, "edited": false, "score": 0, "creation_date": 1503542357, "post_id": 45849732, "comment_id": 78662220, "body": "Read up on object-oriented programming. Not just Python, but in most languages, anything inside a function is local to that function and does not exist outside unless you return a value."}, {"owner": {"reputation": 181, "user_id": 7595183, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/VBs1R.png?s=128&g=1", "display_name": "Nicholas A. Randall", "link": "https://stackoverflow.com/users/7595183/nicholas-a-randall"}, "edited": false, "score": 0, "creation_date": 1503542843, "post_id": 45849732, "comment_id": 78662320, "body": "However, I used global lists inside the function. Why didn&#39;t that work?"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 181, "user_id": 7595183, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/VBs1R.png?s=128&g=1", "display_name": "Nicholas A. Randall", "link": "https://stackoverflow.com/users/7595183/nicholas-a-randall"}, "edited": false, "score": 0, "creation_date": 1503543361, "post_id": 45849732, "comment_id": 78662462, "body": "As mentioned, you re-assigned inside function so global variables were not not needed, plus you did not <code>return</code> anything, also mentioned. You might be needing to use <code>global</code>. See <a href=\"https://stackoverflow.com/q/10588317/1422451\">here</a>."}], "tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": true, "score": 1, "last_activity_date": 1503524522, "creation_date": 1503524522, "answer_id": 45849732, "question_id": 45849128, "link": "https://stackoverflow.com/questions/45849128/open-and-read-methods-in-python-not-adding-to-list/45849732#45849732", "title": "Open() and read() methods in Python not adding to list", "body": "<p>Currently, your methods only create and populate lists but nothing else -no screen output or return. Simply add a <code>return</code> to your functions and assign values to a variable and print or <code>print</code> inside each called function. And you do not need the global variable assignment at top as you define variables inside the methods.</p>\n\n<p>Return and Assign</p>\n\n<pre><code>def retrieveQuestions():\n    f=open('1222_2016_2016-2017.csv')\n    questionsList=f.read().splitlines()\n    for row in f:\n        questionsList.append(row)\n    f.close()\n\n    return questionsList\n\ndef retrieveAnswers():\n    with open('ODDFiles.csv') as j:\n        answersList=list(j.read().splitlines())\n\n    return answersList\n\nquestionsList = retrieveQuestions()\nanswersList = retrieveAnswers()\n\nprint(questionsList)\nprint(answersList)\n</code></pre>\n\n<p>Print Inside</p>\n\n<pre><code>def retrieveQuestions():\n    f=open('1222_2016_2016-2017.csv')\n    questionsList=f.read().splitlines()\n    for row in f:\n        questionsList.append(row)\n    print(questionsList)\n\ndef retrieveAnswers():\n    with open('ODDFiles.csv') as j:\n        answersList=list(j.read().splitlines())\n    print(answersList)\n\nretrieveQuestions()\nretrieveAnswers()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1064, "user_id": 7670316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A0N1Y.jpg?s=128&g=1", "display_name": "Abe", "link": "https://stackoverflow.com/users/7670316/abe"}, "is_accepted": false, "score": 0, "last_activity_date": 1503524992, "creation_date": 1503524992, "answer_id": 45849820, "question_id": 45849128, "link": "https://stackoverflow.com/questions/45849128/open-and-read-methods-in-python-not-adding-to-list/45849820#45849820", "title": "Open() and read() methods in Python not adding to list", "body": "<p>Try it:</p>\n\n<pre><code>questionsList=[]\nanswersList=[]\ndef retrieveQuestions():\n    f=open('Questions.txt', 'r')\n    questionsList = f.readlines().splitlines()\n\ndef retrieveAnswers():\n    with open('Answers.txt', 'r') as j:\n        answersList = j.readlines().splitlines()\n\nretrieveQuestions()\nretrieveAnswers()\nprint(questionsList)\nprint(answersList)\n</code></pre>\n\n<p><strong>Sugestion:</strong></p>\n\n<pre><code>def read_file(filename):\n    return open(filename, 'r').readlines().splitlines()\n\nquestionsList = read_file('Questions.txt')\nanswersList = read_file('Answers.txt')\n\nprint(questionsList)\nprint(answersList)\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 7595183, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/VBs1R.png?s=128&g=1", "display_name": "Nicholas A. Randall", "link": "https://stackoverflow.com/users/7595183/nicholas-a-randall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1503544667, "accepted_answer_id": 45849732, "answer_count": 2, "score": 1, "last_activity_date": 1503524992, "creation_date": 1503521748, "question_id": 45849128, "link": "https://stackoverflow.com/questions/45849128/open-and-read-methods-in-python-not-adding-to-list", "closed_reason": "Duplicate", "title": "Open() and read() methods in Python not adding to list", "body": "<p>First I will post my code. I feel that there's a simple answer that I'm somehow overlooking. </p>\n\n<pre><code>questionsList=[]\nanswersList=[]\ndef retrieveQuestions():\n    f=open('Questions.txt')\n    questionsList=f.read().splitlines()\n    for row in f:\n        questionsList.append(row)\n\ndef retrieveAnswers():\n    with open('Answers.txt') as j:\n        answersList=list(j.read().splitlines())\n\nretrieveQuestions()\nretrieveAnswers()\nprint(questionsList)\nprint(answersList)\n</code></pre>\n\n<p>When I run the program, I get output of \n[]\n[]\nI looked up multiple methods of file path, multiple ways to read and .splitlines(), and I still don't know what's wrong.</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "iterator", "tuples"], "answers": [{"comments": [{"owner": {"reputation": 8469, "user_id": 2504762, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af5ca9c20dafdb1e4e1005468fdf75f7?s=128&d=identicon&r=PG", "display_name": "Gaurang Shah", "link": "https://stackoverflow.com/users/2504762/gaurang-shah"}, "edited": false, "score": 0, "creation_date": 1503523025, "post_id": 45849222, "comment_id": 78656988, "body": "I under <code>(1+2)</code> is int and <code>(1, 2)</code> would be function call, what i don&#39;t understand is what you mean by in the generator assignment."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 8469, "user_id": 2504762, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af5ca9c20dafdb1e4e1005468fdf75f7?s=128&d=identicon&r=PG", "display_name": "Gaurang Shah", "link": "https://stackoverflow.com/users/2504762/gaurang-shah"}, "edited": false, "score": 0, "creation_date": 1503525229, "post_id": 45849222, "comment_id": 78657922, "body": "@GaurangShah: When you\u2019re assigning <code>generator = \u2026</code>. <code>\u2026 for \u2026 in \u2026</code> is a generator when it\u2019s inside parentheses."}], "tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": false, "score": 6, "last_activity_date": 1503522146, "creation_date": 1503522146, "answer_id": 45849222, "question_id": 45849120, "link": "https://stackoverflow.com/questions/45849120/python-tuple-vs-generator/45849222#45849222", "title": "Python tuple vs generator", "body": "<p>Parentheses are used for three different things: grouping, tuple literals, and function calls. Compare <code>(1 + 2)</code> (an integer) and <code>(1, 2)</code> (a tuple). In the <code>generator</code> assignment, the parentheses are for grouping; in the <code>tuple</code> assignment, the parentheses are a tuple literal. Parentheses represent a tuple literal when they contain a comma and are not used for a function call.</p>\n"}, {"comments": [{"owner": {"reputation": 602, "user_id": 5108509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c85f44511ac3341c776096f02573d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "visitor", "link": "https://stackoverflow.com/users/5108509/visitor"}, "edited": false, "score": 0, "creation_date": 1535403481, "post_id": 45849228, "comment_id": 91044693, "body": "Actually there is tuple comprehension: <code>xs = [1, 2, 3]; ys = tuple(x for x in xs); type(ys)</code>"}, {"owner": {"reputation": 4418, "user_id": 127670, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/43605715e1aa5b218e916eebabf6b1cf?s=128&d=identicon&r=PG", "display_name": "Ian Goldby", "link": "https://stackoverflow.com/users/127670/ian-goldby"}, "reply_to_user": {"reputation": 602, "user_id": 5108509, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c85f44511ac3341c776096f02573d1ec?s=128&d=identicon&r=PG&f=1", "display_name": "visitor", "link": "https://stackoverflow.com/users/5108509/visitor"}, "edited": false, "score": 5, "creation_date": 1540455991, "post_id": 45849228, "comment_id": 92874931, "body": "@visitor That&#39;s not a tuple comprehension. <code>x for x in xs</code> is a generator, and this is then <i>converted</i> to a <code>tuple</code>."}], "tags": [], "owner": {"reputation": 8084, "user_id": 2896626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd83959d7fe39c658d2e49cfecfe4b6?s=128&d=identicon&r=PG&f=1", "display_name": "Paul92", "link": "https://stackoverflow.com/users/2896626/paul92"}, "is_accepted": true, "score": 16, "last_activity_date": 1503522155, "creation_date": 1503522155, "answer_id": 45849228, "question_id": 45849120, "link": "https://stackoverflow.com/questions/45849120/python-tuple-vs-generator/45849228#45849228", "title": "Python tuple vs generator", "body": "<p>You can imagine tuples as being created when you hardcode the values, while generators are created where you provide a way to create the objects.</p>\n\n<p>This works since there is no way <code>(1,2,3,4)</code> could be a generator. There is nothing to generate there, you just specified all the elements, not a rule to obtain them. </p>\n\n<p>In order for your <code>generator</code> to be a tuple, the expression <code>(i for i in sample_list)</code> would have to be a tuple comprehension. There is no way to have tuple comprehensions, since comprehensions require a mutable data type.</p>\n\n<p>Thus, the syntax for what should have been a tuple comprehension has been reused for generators. </p>\n"}], "owner": {"reputation": 8469, "user_id": 2504762, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af5ca9c20dafdb1e4e1005468fdf75f7?s=128&d=identicon&r=PG", "display_name": "Gaurang Shah", "link": "https://stackoverflow.com/users/2504762/gaurang-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3599, "favorite_count": 4, "accepted_answer_id": 45849228, "answer_count": 2, "score": 16, "last_activity_date": 1547818338, "creation_date": 1503521701, "last_edit_date": 1547818338, "question_id": 45849120, "link": "https://stackoverflow.com/questions/45849120/python-tuple-vs-generator", "title": "Python tuple vs generator", "body": "<p>I am having a problem understanding why one of the following line returns generator and another tuple. </p>\n\n<p>How exactly and why a generator is created in the second line, while in the third one a tuple is produced?</p>\n\n<pre><code>sample_list = [1, 2, 3, 4]\ngenerator = (i for i in sample_list)\ntuple_ = (1, 2, 3, 4)\n\nprint type(generator)\n&lt;type 'generator'&gt;\n\nprint type(tuple_)\n&lt;type 'tuple'&gt;    \n</code></pre>\n\n<p>Is it because tuple is immutable object and when I try to unpack list inside <code>()</code>, it can't create the tuple as it has to change the tuple tuple. </p>\n"}, {"tags": ["python", "class", "parsing", "text", "formatting"], "comments": [{"owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 0, "creation_date": 1503523701, "post_id": 45849077, "comment_id": 78657266, "body": "It sounds like you want to use an object as a <i>container</i>, ie, as an organised place to store a collection of data. You seem to want a container which enables you to collect named items of data. If this is true then it might be easier to use a dictionary. You could say, <code>Office_PSZ = { &#39;TYPE&#39;: &#39;PSZ&#39;, &#39;HEAT-SOURCE&#39;: &#39;ELECTRIC&#39;, ...}</code> If you read the <code>dict</code> doc you&#39;ll find that you can add arbitrary items to a dictionary, access them individually as necessary, and so on."}], "answers": [{"tags": [], "owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "is_accepted": false, "score": 2, "last_activity_date": 1503708936, "creation_date": 1503708936, "answer_id": 45890995, "question_id": 45849077, "link": "https://stackoverflow.com/questions/45849077/parsing-a-text-file-to-store-into-class-objects-and-attributes/45890995#45890995", "title": "Parsing a text file to store into class objects and attributes", "body": "<p>Pyparsing makes it easy to write custom parsers for data like this, and gives back \nparsed data in a pyparsing data structure call ParseResults. ParseResults give you\naccess to your parsed values by position (like a list), by key (like a dict), or for\nnames that work as Python identifiers, by attribute (like an object).</p>\n\n<p>I've simplfied my parsing of your data to pretty much just take every <code>key = value</code> line \nand build up a structure using the key strings as keys. The '..' lines work great\nas terminators for each object.</p>\n\n<p>A simple BNF for this might look like:</p>\n\n<pre><code>object ::= attribute+ end\nattribute ::= key '=' value\nkey ::= word composed of letters 'A'..'Z' and '-', starting with 'A'..'Z', \n          or a quoted string\nvalue ::= value_string | value_number | value_word\nvalue_word ::= a string of non-whitespace characters\nvalue_string ::= a string of any characters in '\"' quotes\nvalue_number ::= an integer or float numeric value\nend ::= '..'\n</code></pre>\n\n<p>To implement a pyparsing parser, we work bottom up to define pyparsing sub-expressions.\nThen we use Python '+' and '|' operators to assemble lower-level expressions to higher-level\nones:</p>\n\n<pre><code>import pyparsing as pp\n\nEND = pp.Suppress(\"..\")\nEQ = pp.Suppress('=')\n</code></pre>\n\n<p>pyparsing includes some predefined expressions for quoted strings and numerics;\nthe numerics will be automatically converted to ints or floats.</p>\n\n<pre><code>value_number = pp.pyparsing_common.number\nvalue_string = pp.quotedString\nvalue_word = pp.Word(pp.printables)\nvalue = value_string | value_number | value_word\n</code></pre>\n\n<p>For our attribute key, we will use the two-argument form for Word. The first\nargument is a string of allowable leading characters, and the second argument is a \nstring of allowable body characters. If we just wrote `Word(alphas + '-'), then\nour parser would accept '---' as a legal key.</p>\n\n<pre><code>key = pp.Word(pp.alphas, pp.alphas + '-') | pp.quotedString\n</code></pre>\n\n<p>An attribute definition is just a key, an '=' sign, and a value</p>\n\n<pre><code>attribute = key + EQ + value\n</code></pre>\n\n<p>Lastly we will use some of the more complex features of pyparsing. The simplest form\nwould just be \"pp.OneOrMore(attribute) + END\", but this would just give us back a \npile of parsed tokens with no structure. The Group class structures the enclosed expressions\nso that their results will be returned as a sub-list. We will catch every attribute as\nits own sub-list using Group. Dict will apply some naming to the results, using \nthe text from each key expression as the key for that group. Finally, the whole collection\nof attributes will be Group'ed again, this time representing all the attributes for a\nsingle object:</p>\n\n<pre><code>object_defn = pp.Group(pp.Dict(pp.OneOrMore(pp.Group(attribute)))) + END\n</code></pre>\n\n<p>To use this expression, we'll define our parser as:</p>\n\n<pre><code>parser = pp.OneOrMore(object_defn)\n</code></pre>\n\n<p>and parse the sample string using:</p>\n\n<pre><code>objs = parser.parseString(sample)\n</code></pre>\n\n<p>The <code>objs</code> variable we get back will be a pyparsing ParseResults, which will work like \na list of the grouped object attributes. We can view just the parsed attributes as a list\nof lists using asList():</p>\n\n<pre><code>for obj in objs:\n    print(obj.asList())\n\n[['\"Office PSZ\"', 'SYSTEM'], ['TYPE', 'PSZ'], ['HEAT-SOURCE', 'FURNACE'], \n ['FAN-SCHEDULE', '\"HVAC Yr Schedule\"'], ['COOLING-EIR', 0.233207]]\n</code></pre>\n\n<p>If we had not used the Dict class, this would have all we would get, but since we\n<em>did</em> use Dict, we can also see the attributes as a Python dict:</p>\n\n<pre><code>for obj in objs:\n    print(obj.asDict())\n\n{'COOLING-EIR': 0.233207, '\"Office PSZ\"': 'SYSTEM', 'TYPE': 'PSZ', \n 'FAN-SCHEDULE': '\"HVAC Yr Schedule\"', 'HEAT-SOURCE': 'FURNACE'}\n</code></pre>\n\n<p>We can even access named fields by name, if they work as Python identifiers. In your\nsample, \"TYPE\" is the only legal identifier, so you can see how to print it here. There\nis also a <code>dump()</code> method that will give the results in list form, followed by an\nindented list of defined key pairs. (I've also shown how you can use list and dict\ntype access directly on the ParseResults object, without having to convert to list\nor dict types):</p>\n\n<pre><code>for obj in objs:\n    print(obj[0])\n    print(obj['FAN-SCHEDULE'])\n    print(obj.TYPE)\n    print(obj.dump())\n\n['\"Office PSZ\"', 'SYSTEM']\n\"HVAC Yr Schedule\"\nPSZ\n[['\"Office PSZ\"', 'SYSTEM'], ['TYPE', 'PSZ'], ['HEAT-SOURCE', 'FURNACE'], \n ['FAN-SCHEDULE', '\"HVAC Yr Schedule\"'], ['COOLING-EIR', 0.233207]]\n- \"Office PSZ\": 'SYSTEM'\n- COOLING-EIR: 0.233207\n- FAN-SCHEDULE: '\"HVAC Yr Schedule\"'\n- HEAT-SOURCE: 'FURNACE'\n- TYPE: 'PSZ'\n</code></pre>\n\n<p>Here is the full parser code for you to work from:</p>\n\n<pre><code>import pyparsing as pp\n\nEND = pp.Suppress(\"..\")\nEQ = pp.Suppress('=')\n\nvalue_number = pp.pyparsing_common.number\nvalue_string = pp.quotedString\nvalue_word = pp.Word(pp.printables)\nvalue = value_string | value_number | value_word\n\nkey = pp.Word(pp.alphas, pp.alphas+\"-\") | pp.quotedString\n\nattribute = key + EQ + value\nobject_defn = pp.Group(pp.Dict(pp.OneOrMore(pp.Group(attribute)))) + END\n\nparser = pp.OneOrMore(object_defn)\nobjs = parser.parseString(sample)\n\nfor obj in objs:\n    print(obj.asList())\n\nfor obj in objs:\n    print(obj.asDict())\n\nfor obj in objs:\n    print(obj[0])\n    print(obj['FAN-SCHEDULE'])\n    print(obj.TYPE)\n    print(obj.dump())\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8508154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b7a40d9c9de86e7683bcb3b45fdfb12?s=128&d=identicon&r=PG&f=1", "display_name": "DWid", "link": "https://stackoverflow.com/users/8508154/dwid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1788, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503708936, "creation_date": 1503521519, "last_edit_date": 1503525626, "question_id": 45849077, "link": "https://stackoverflow.com/questions/45849077/parsing-a-text-file-to-store-into-class-objects-and-attributes", "title": "Parsing a text file to store into class objects and attributes", "body": "<p>2 part question. How to parse text and save as class object/attributes and       best way to rewrite text from the classes in a specific format.</p>\n\n<p>I'm wanting to parse through a text file and extract sections of text  and     create a class object and attributes. There will be several classes (Polygons,     space, zone, system, schedule) involved. In the original file each \"Object\" and it's \"attributes\" are separated by '..'.  An example of one is below.</p>\n\n<pre><code>\"Office PSZ\" = SYSTEM\n    TYPE             = PSZ\n    HEAT-SOURCE      = FURNACE\n    FAN-SCHEDULE     = \"HVAC Yr Schedule\"\n    COOLING-EIR      = 0.233207\n    ..\n</code></pre>\n\n<p>I'd like to read this text and store into class objects.  So \"Office PSZ\"     would be of the HVACsystem or SYSTEM class, haven't decided.  'SYSTEM' would be a     class variable.  For this instance (\"Office PSZ\"), self.TYPE would be PSZ.      self.HEAT-SOURCE would equal FURNACE,etc.</p>\n\n<p>I want to manipulate these objects based on their attributes.  The end result     though would be to write all the data that was manipulated back into a text file     with the original format.  End result for this instance may be.</p>\n\n<pre><code>   \"Office PSZ\" = SYSTEM \n    TYPE             = PSZ\n    HEAT-SOURCE      = ELECTRIC\n    FAN-SCHEDULE     = \"Other Schedule\"\n    COOLING-EIR      = 0.200\n     ..\n</code></pre>\n\n<p>Is there a way to print the attribute name/title (idk what to call it)? Because the attribute name (i.e. TYPE,HEAT-SOURCE) comes from the original file and it would be easier to not have to manually anticipate all of the attributes associated with every class.</p>\n\n<p>I suppose I could create an array of all of the values on the left side of \"=\" and another array for the values on the right and loop through those as I'm writing/formatting a new text file.  But I'm not sure if that's a good way to go.</p>\n\n<p>I'm still quite the amateur so I might be overreaching but any suggestions on how I should proceed?</p>\n"}, {"tags": ["python", "seaborn", "facet-grid"], "answers": [{"comments": [{"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1503526631, "post_id": 45849814, "comment_id": 78658418, "body": "Many thanks. I&#39;m assuming using xy=(i, y.values[i]) in the annotation will allow me to replace the dots with the actual values, so long as I have a box around it."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1503527136, "post_id": 45849814, "comment_id": 78658595, "body": "I may have misunderstood you. The updated answer may then be more what you want."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 8, "last_activity_date": 1503527066, "last_edit_date": 1503527066, "creation_date": 1503524967, "answer_id": 45849814, "question_id": 45849028, "link": "https://stackoverflow.com/questions/45849028/seaborn-facetgrid-pointplot-label-data-points/45849814#45849814", "title": "Seaborn FacetGrid PointPlot Label Data Points", "body": "<p>I wouldn't know what <code>ind</code> is either. But if the aim is to annotate the points with their coordinates, you may use <code>ax.annotate</code> inside a function that is mapped to the <code>FacetGrid</code> as follows:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport seaborn as sns\n\nattend = sns.load_dataset(\"attention\")\nsns.set_style(\"whitegrid\", {'axes.grid' : False,'axes.edgecolor':'none'})\ng = sns.FacetGrid(attend, col=\"subject\", col_wrap=5,\n                  size=1.5, ylim=(0, 10))\n\ndef f(x,y, **kwargs):\n    ax = sns.pointplot(x,y,**kwargs)\n    ax.axhline(5, alpha=0.5, color='grey')\n    for i in range(len(x)):\n        ax.annotate(str(y.values[i]), xy=(x.values[i]-1, y.values[i]),fontsize=8,\n                    xytext = (0,10), textcoords=\"offset points\",\n                color=kwargs.get(\"color\",\"k\"), \n                bbox=dict(pad=.9,alpha=0.2, fc='limegreen',color='none'),\n                va='center', ha='center',weight='bold')\n\ng.map(f, \"solutions\", \"score\", scale=.7)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/4Tnyo.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4Tnyo.png\" alt=\"enter image description here\"></a></p>\n\n<p>Possibly, you need to use <code>xy=(i, y.values[i])</code> in the annotation, depending on what the data looks like.</p>\n\n<p>Note that this also answers <a href=\"https://stackoverflow.com/questions/45848281/seaborn-facetgrid-pointplot-add-1-grid-line\">your previous question</a> by putting the <code>axhline</code> in that function as well.</p>\n\n<p>If the aim is to replace the points by the annotations, use <code>xytext = (0,0)</code> or leave that argument out completely; then also keep <code>bbox=dict(pad=.9,alpha=1, fc='w',color='none')</code> and use <code>markers=\"\"</code> in the function call:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport seaborn as sns\n\nattend = sns.load_dataset(\"attention\")\nsns.set_style(\"whitegrid\", {'axes.grid' : False,'axes.edgecolor':'none'})\ng = sns.FacetGrid(attend, col=\"subject\", col_wrap=5,\n                  size=1.5, ylim=(0, 10))\n\ndef f(x,y, **kwargs):\n    ax = sns.pointplot(x,y,**kwargs)\n    ax.axhline(5, alpha=0.5, color='grey')\n    for i in range(len(x)):\n        ax.annotate(str(y.values[i]), xy=(i, y.values[i]),fontsize=8,\n                color=kwargs.get(\"color\",\"k\"), \n                bbox=dict(pad=.9,alpha=1, fc='w',color='none'),\n                va='center', ha='center',weight='bold')\n\ng.map(f, \"solutions\", \"score\", scale=.7, markers=\"\")\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/bT7e9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bT7e9.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3244, "favorite_count": 6, "accepted_answer_id": 45849814, "answer_count": 1, "score": 6, "last_activity_date": 1503527066, "creation_date": 1503521345, "question_id": 45849028, "link": "https://stackoverflow.com/questions/45849028/seaborn-facetgrid-pointplot-label-data-points", "title": "Seaborn FacetGrid PointPlot Label Data Points", "body": "<p>Given the following:</p>\n\n<pre><code>import seaborn as sns\nattend = sns.load_dataset(\"attention\")\nsns.set_style(\"whitegrid\", {'axes.grid' : False,'axes.edgecolor':'none'})\ng = sns.FacetGrid(attend, col=\"subject\", col_wrap=5,\nsize=1.5, ylim=(0, 10))\nax = g.map(sns.pointplot, \"solutions\", \"score\", scale=.7)\n</code></pre>\n\n<p>I would like to label individual data points (put value labels in place of dots) on each line. In another plot that I created via MatPlotLib only, this was accomplished like this:</p>\n\n<pre><code>for i, text in enumerate(ind):\n    a.annotate(str(y[i])[:-2], xy=(ind[i], y[i]),fontsize=6, color=c, \n                bbox=dict(pad=.9,alpha=1, fc='white',color='none'),va='center', ha='center',weight='bold')\n</code></pre>\n\n<p>However, since there is no ind defined, I'm not sure how this would work.</p>\n"}, {"tags": ["python", "python-2.7", "grammar", "cpython"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 3, "creation_date": 1503521242, "post_id": 45848981, "comment_id": 78656201, "body": "Just to be complety clear: You are editing CPython&#39;s grammar and attempting to rename <code>if</code>, <code>elif</code>, and <code>else</code> to <code>wenn</code>, <code>andernfalls</code>, and <code>sonst</code>?"}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 1, "creation_date": 1503521582, "post_id": 45848981, "comment_id": 78656376, "body": "that seems like something that would be hardcoded in multiple places... I find it unlikely you could change something like that in a single place and have it work seamlessly."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1503521643, "post_id": 45848981, "comment_id": 78656408, "body": "Show us the code you tried to run. Also, how did you modify the interpreter? What specific files did you change, and how?"}, {"owner": {"reputation": 53, "user_id": 8508280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7e75b81505d380dc0b56665864bd78?s=128&d=identicon&r=PG&f=1", "display_name": "loki locus", "link": "https://stackoverflow.com/users/8508280/loki-locus"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1503521847, "post_id": 45848981, "comment_id": 78656488, "body": "@ChristianDean to add the optional way of using if elif and else with wenn andernfalls and sonst"}, {"owner": {"reputation": 53, "user_id": 8508280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7e75b81505d380dc0b56665864bd78?s=128&d=identicon&r=PG&f=1", "display_name": "loki locus", "link": "https://stackoverflow.com/users/8508280/loki-locus"}, "reply_to_user": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1503522112, "post_id": 45848981, "comment_id": 78656594, "body": "@Aaron for every other statement i added options to it worked"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 8508280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7e75b81505d380dc0b56665864bd78?s=128&d=identicon&r=PG&f=1", "display_name": "loki locus", "link": "https://stackoverflow.com/users/8508280/loki-locus"}, "edited": false, "score": 0, "creation_date": 1503524731, "post_id": 45849334, "comment_id": 78657704, "body": "Didnt work perfect, i changed the if statement to if (s[2] == &#39;s&#39; || s[2] == &#39;n&#39;) and the else if  to else if (s[2] == &#39;i&#39; || s[2] == &#39;d&#39;) but when i have x = 2 and y = 2 in my example code it should go to sonst and print 3 but it doesnt any idea why @user2357112"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 53, "user_id": 8508280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7e75b81505d380dc0b56665864bd78?s=128&d=identicon&r=PG&f=1", "display_name": "loki locus", "link": "https://stackoverflow.com/users/8508280/loki-locus"}, "edited": false, "score": 0, "creation_date": 1503525014, "post_id": 45849334, "comment_id": 78657818, "body": "@lokilocus: What happens instead of printing 3?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 53, "user_id": 8508280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7e75b81505d380dc0b56665864bd78?s=128&d=identicon&r=PG&f=1", "display_name": "loki locus", "link": "https://stackoverflow.com/users/8508280/loki-locus"}, "edited": false, "score": 0, "creation_date": 1503525398, "post_id": 45849334, "comment_id": 78657990, "body": "There&#39;s another <code>else</code> special case in the <code>elif</code> handling you may have missed: <code>STR(CHILD(n, (n_elif + 1)))[2] == &#39;s&#39;</code>."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1503525539, "last_edit_date": 1503525539, "creation_date": 1503522648, "answer_id": 45849334, "question_id": 45848981, "link": "https://stackoverflow.com/questions/45848981/rename-elif-in-python/45849334#45849334", "title": "rename elif in python", "body": "<p><code>else</code> and <code>elif</code> have some special-case handling inside the AST generation code:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static stmt_ty\nast_for_if_stmt(struct compiling *c, const node *n)\n{\n    ...\n    /* s[2], the third character in the string, will be\n       's' for el_s_e, or\n       'i' for el_i_f\n    */\n    if (s[2] == 's') {\n        ...\n    }\n    else if (s[2] == 'i') {\n        ...\n        if (TYPE(CHILD(n, (n_elif + 1))) == NAME\n            &amp;&amp; STR(CHILD(n, (n_elif + 1)))[2] == 's') {\n            ...\n</code></pre>\n\n<p>You'll have to modify <code>ast_for_if_stmt</code> in <a href=\"https://github.com/python/cpython/blob/2.7/Python/ast.c#L2805\" rel=\"nofollow noreferrer\"><code>Python/ast.c</code></a> to change that handling.</p>\n"}], "owner": {"reputation": 53, "user_id": 8508280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7e75b81505d380dc0b56665864bd78?s=128&d=identicon&r=PG&f=1", "display_name": "loki locus", "link": "https://stackoverflow.com/users/8508280/loki-locus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 3, "accepted_answer_id": 45849334, "answer_count": 1, "score": 4, "last_activity_date": 1503525539, "creation_date": 1503521083, "last_edit_date": 1503521978, "question_id": 45848981, "link": "https://stackoverflow.com/questions/45848981/rename-elif-in-python", "title": "rename elif in python", "body": "<p>I was recently playing a bit around with adding some optional statement names in python and that worked fine until i got to the if statement and I added an optional name for else and elif:</p>\n\n<pre><code>if_stmt = 'if' test ':' suite ('elif' test ':'suite)* ['else' ':' suite] |  'wenn' test ':' suite ('andernfalls' test ':'suite)* ['sonst' ':' suite]\n</code></pre>\n\n<p>then it compiled without errors, but when I ran a test with wenn and andernfalls and the Interpreter threw the error:</p>\n\n<pre><code>SystemError: unexpected token in 'if' statement: andernfalls \n</code></pre>\n\n<p>And every other Addition I made worked great. So why can\u00b4t I add other else and elif and how could I do?</p>\n\n<p>I\u00b4m modifying the most recent python 2.7 code from the python website</p>\n\n<p>EDIT\nMy test code is:</p>\n\n<pre><code>x = 1\ny = 2\nwenn x &gt; y:\n    print 1\nandernfalls x &lt; y:\n    print 2\nsonst:\n    print 3\n</code></pre>\n\n<p>The file i was adding the line at the top to was the Grammar file in the Grammar directory of the python source code</p>\n"}, {"tags": ["python", "sql", "json", "postgresql", "pickle"], "answers": [{"comments": [{"owner": {"reputation": 3109, "user_id": 708399, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/da63b842391ce46f35d46ac3314873f0?s=128&d=identicon&r=PG", "display_name": "Andrew Spott", "link": "https://stackoverflow.com/users/708399/andrew-spott"}, "edited": false, "score": 0, "creation_date": 1503531376, "post_id": 45850429, "comment_id": 78659750, "body": "At last count, the set of all sets has 600k elements.  It isn&#39;t really feasible to break that out into different columns, is it?"}, {"owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "reply_to_user": {"reputation": 3109, "user_id": 708399, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/da63b842391ce46f35d46ac3314873f0?s=128&d=identicon&r=PG", "display_name": "Andrew Spott", "link": "https://stackoverflow.com/users/708399/andrew-spott"}, "edited": false, "score": 0, "creation_date": 1503556019, "post_id": 45850429, "comment_id": 78666527, "body": "I see no problem with a table of 600K rows. If you are concerned about space efficiency (that was not clear from your question) then I think yourJSON proposal would be likely to take nearly as much space."}, {"owner": {"reputation": 881, "user_id": 8418376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b5e4f13b4b83a158ad310ff6516811d?s=128&d=identicon&r=PG", "display_name": "Arminius", "link": "https://stackoverflow.com/users/8418376/arminius"}, "edited": false, "score": 0, "creation_date": 1503573473, "post_id": 45850429, "comment_id": 78678221, "body": "Regarding the number of elements, do you have 600k <i>distinct</i> elements? If not and you are concerned about table space (or want to avoid redundancy), you could just store a list of IDs in a joining table. I second @BoarGules arguments, if possible try to keep SQL data manageable in SQL (JSON is a PITA, but storing data in binary form is a definitice no-go) for me."}, {"owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 0, "creation_date": 1503575441, "post_id": 45850429, "comment_id": 78679591, "body": "OP said &quot;set of all sets has 600k elements,&quot; so I reckon that means distinct. So we can reckon on a table of about 1MB per byte of average element length. Not scary."}], "tags": [], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "is_accepted": false, "score": 2, "last_activity_date": 1503675347, "last_edit_date": 1503675347, "creation_date": 1503528477, "answer_id": 45850429, "question_id": 45848956, "link": "https://stackoverflow.com/questions/45848956/how-to-store-a-set-the-python-type-in-a-database-efficiently/45850429#45850429", "title": "How to store a &quot;set&quot; (the python type) in a database efficiently?", "body": "<p>What you want to do is store a one-to-many relationship between a row in your table and the members of the set.</p>\n\n<p>None of your solutions allow the members of the set to be queried by SQL. You can't do something like <code>select * from mytable where 'first item' in myset</code>. Instead you have to retrieve the text/blob and use another programming language to decode or parse it. That means if you want to do a query on the elements of the set you have to do a full table scan every time.</p>\n\n<p>I would be very reluctant to let you do something like that in one of <em>my</em> databases. </p>\n\n<p>I think you should break out your set into a separate table. By which I mean (since that is clearly not as obvious as I thought), one row per set element, indexed over <em>primary key of the table you are referring from</em> or, if you want to enforce no duplicates at the cost of a little extra space, <em>primary key of the table you are referring from</em> + <em>set element value</em>. </p>\n\n<p>Since your set elements appear to be of heterogeneous types I see no harm in storing them as strings, as long as you normalize the numbers somehow.</p>\n"}, {"tags": [], "owner": {"reputation": 12006, "user_id": 593144, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a745d80a7031bdd56c5a3f5b04fd790f?s=128&d=identicon&r=PG", "display_name": "Abelisto", "link": "https://stackoverflow.com/users/593144/abelisto"}, "is_accepted": false, "score": 1, "last_activity_date": 1503562305, "last_edit_date": 1503562305, "creation_date": 1503561357, "answer_id": 45856000, "question_id": 45848956, "link": "https://stackoverflow.com/questions/45848956/how-to-store-a-set-the-python-type-in-a-database-efficiently/45856000#45856000", "title": "How to store a &quot;set&quot; (the python type) in a database efficiently?", "body": "<p>One of the possible way is a JSONB arrays. Its able to store any types of elements and it could be indexed to improve the search speed:</p>\n\n<pre><code>create table t as\n  select '[\"first item\", 2, 3.14]'::jsonb as x\n  from generate_series(1,100000);\ninsert into t values('[\"second item\", 3, 2.72]');\ncreate index idx on t using gin(x);\n\nexplain analyse select * from t where x @&gt; '3';\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                                  QUERY PLAN                                                   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 Bitmap Heap Scan on t  (cost=36.78..327.18 rows=100 width=47) (actual time=0.055..0.056 rows=1 loops=1)       \u2502\n\u2502   Recheck Cond: (x @&gt; '3'::jsonb)                                                                             \u2502\n\u2502   Heap Blocks: exact=1                                                                                        \u2502\n\u2502   -&gt;  Bitmap Index Scan on idx  (cost=0.00..36.75 rows=100 width=0) (actual time=0.028..0.028 rows=1 loops=1) \u2502\n\u2502         Index Cond: (x @&gt; '3'::jsonb)                                                                         \u2502\n\u2502 Planning time: 0.188 ms                                                                                       \u2502\n\u2502 Execution time: 0.121 ms                                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nexplain analyse select * from t where x @&gt; '[3, \"second item\"]';\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                                  QUERY PLAN                                                   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 Bitmap Heap Scan on t  (cost=68.78..359.18 rows=100 width=47) (actual time=0.087..0.089 rows=1 loops=1)       \u2502\n\u2502   Recheck Cond: (x @&gt; '[3, \"second item\"]'::jsonb)                                                            \u2502\n\u2502   Heap Blocks: exact=1                                                                                        \u2502\n\u2502   -&gt;  Bitmap Index Scan on idx  (cost=0.00..68.75 rows=100 width=0) (actual time=0.048..0.048 rows=1 loops=1) \u2502\n\u2502         Index Cond: (x @&gt; '[3, \"second item\"]'::jsonb)                                                        \u2502\n\u2502 Planning time: 0.248 ms                                                                                       \u2502\n\u2502 Execution time: 0.187 ms                                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>\n\n<p><strong>Disadvantages:</strong></p>\n\n<ul>\n<li>There is no ready to use function/operator to delete element by value, only by index.</li>\n<li>There is no ready to use way to check elements uniqueness, you will need create it by yourself. </li>\n</ul>\n\n<p>Links:<br/>\n<a href=\"https://www.postgresql.org/docs/current/static/datatype-json.html\" rel=\"nofollow noreferrer\">JSON Types</a><br/>\n<a href=\"https://www.postgresql.org/docs/current/static/datatype-json.html#JSON-INDEXING\" rel=\"nofollow noreferrer\">jsonb Indexing</a><br/>\n<a href=\"https://www.postgresql.org/docs/current/static/functions-json.html\" rel=\"nofollow noreferrer\">JSON Functions and Operators</a></p>\n"}], "owner": {"reputation": 3109, "user_id": 708399, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/da63b842391ce46f35d46ac3314873f0?s=128&d=identicon&r=PG", "display_name": "Andrew Spott", "link": "https://stackoverflow.com/users/708399/andrew-spott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503675347, "creation_date": 1503520970, "question_id": 45848956, "link": "https://stackoverflow.com/questions/45848956/how-to-store-a-set-the-python-type-in-a-database-efficiently", "title": "How to store a &quot;set&quot; (the python type) in a database efficiently?", "body": "<p>I would like to store a \"set\" in a database (specifically PostgreSQL) efficiently, but I'm not sure how to do that efficiently.</p>\n\n<p>There are a few options that pop to mind:</p>\n\n<ul>\n<li><p>store as a list (<code>{'first item', 2, 3.14}</code>) in a text or binary column.  This has the downside of requiring parsing when inserting into the database and pulling out.  For sets of text strings only, this seems to work pretty well, and the parsing is minimal.  For anything more complicated, parsing becomes difficult.</p></li>\n<li><p>store as a pickle in a binary column.  This seems like it should be quick, and it is complete (anything picklable works), but isn't portable across languages.</p></li>\n<li><p>store as json (either as a binary object or a text stream).  Larger problems than just plain text, but better defined parsing.</p></li>\n</ul>\n\n<p>Are there any other options?  Does anyone have any experience with these?</p>\n"}, {"tags": ["python", "git", "heroku", "pip"], "comments": [{"owner": {"reputation": 2137, "user_id": 19993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7b4707f974af261f71943e1f2046c9ee?s=128&d=identicon&r=PG", "display_name": "Aur Saraf", "link": "https://stackoverflow.com/users/19993/aur-saraf"}, "edited": false, "score": 0, "creation_date": 1554895549, "post_id": 45848936, "comment_id": 97916895, "body": "for others encountering the same: <a href=\"https://github.com/pypa/pip/issues/4537\" rel=\"nofollow noreferrer\">github.com/pypa/pip/issues/4537</a>, where the author posted a link to this question, explains the issue, and a few workarounds are given (and a promise of a new release that fixes it is made). I am personally fine with clearing the build cache every time the specific dependency that caused the issue changes, so I didn&#39;t try any of the others."}], "owner": {"reputation": 990, "user_id": 3055558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1cde28ce033c8cd6f4be4059efbe00b?s=128&d=identicon&r=PG", "display_name": "lynn", "link": "https://stackoverflow.com/users/3055558/lynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1764, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1503520867, "creation_date": 1503520867, "question_id": 45848936, "link": "https://stackoverflow.com/questions/45848936/pip-contextualversionconflict-when-pushing-new-versions-on-heroku", "title": "pip ContextualVersionConflict when pushing new versions on heroku", "body": "<p>I've got this repo, <a href=\"https://github.com/SexualHealthInnovations/callisto-core\" rel=\"nofollow noreferrer\">callisto-core</a> deployed as a <a href=\"http://callisto-core.herokuapp.com/\" rel=\"nofollow noreferrer\">heroku app</a>.</p>\n\n<p>It depends on <a href=\"https://github.com/SexualHealthInnovations/django-wizard-builder\" rel=\"nofollow noreferrer\">django-wizard-builder</a> in its <a href=\"https://github.com/SexualHealthInnovations/callisto-core/blob/master/setup.py\" rel=\"nofollow noreferrer\">setup.py</a>.</p>\n\n<p>I update <code>django-wizard-builder</code> quite frequently, and its started causing installation errors when pushing new versions of <code>callisto-core</code>. Specifically, I updated <code>django-wizard-builder</code> to version <code>1.0.5</code> from <code>1.0.1</code> and then pushed to heroku, and got this traceback (formatted for readability)</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"{{ PATH }}/pip/basecommand.py\", line 215, in main\n   status = self.run(options, args)\nFile \"{{ PATH }}/pip/commands/install.py\", line 324, in run\n   requirement_set.prepare_files(finder)\nFile \"{{ PATH }}/pip/req/req_set.py\", line 380, in prepare_files\n   ignore_dependencies=self.ignore_dependencies))\nFile \"{{ PATH }}/pip/req/req_set.py\", line 521, in _prepare_file\n  req_to_install.check_if_exists()\nFile \"{{ PATH }}/pip/req/req_install.py\", line 1036, in check_if_exists\n   self.req.name\nFile \"{{ PATH }}/pip/_vendor/pkg_resources/__init__.py\", line 558, in get_distribution\n   dist = get_provider(dist)\nFile \"{{ PATH }}/pip/_vendor/pkg_resources/__init__.py\", line 432, in get_provider\n   return working_set.find(moduleOrReq) or require(str(moduleOrReq))[0]\nFile \"{{ PATH }}/pip/_vendor/pkg_resources/__init__.py\", line 968, in require\n  needed = self.resolve(parse_requirements(requirements))\nFile \"{{ PATH }}/pip/_vendor/pkg_resources/__init__.py\", line 859, in resolve\n  raise VersionConflict(dist, req).with_context(dependent_req)\npip._vendor.pkg_resources.ContextualVersionConflict: (\n    django-wizard-builder 1.0.1 ({{ PATH }}),\n    Requirement.parse('django-wizard-builder==1.0.5'),\n    {'callisto-core'},\n)\n\n! Push rejected, failed to compile Python app.\n</code></pre>\n\n<p>I'm getting it on every push that asks for <code>django-wizard-builder==1.0.5</code>. I can resolve the issue if I <a href=\"https://kb.heroku.com/how-do-i-clear-the-build-cache\" rel=\"nofollow noreferrer\">clear the heroku build cache</a>, but I'm not about to do that every time a requirement changes.</p>\n\n<p>I also got this issue on local once, and solved it with <code>--no-cache-dir --upgrade</code>, but as far as I can tell I can't set these flags for the heroku install.</p>\n\n<p>This is either a pip issue or a heroku issue or both, and I'm interested in what I can do to fix this and never have to think about it again</p>\n"}, {"tags": ["python", "constructor", "exec"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1503520974, "post_id": 45848928, "comment_id": 78656077, "body": "Load what data, the strings to execute? Looks like a bad idea."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1503521098, "post_id": 45848928, "comment_id": 78656128, "body": "You don&#39;t need <code>exec</code> at all. Just load your data from your text file, and pass it to the <code>Point</code> class constructor. Simple."}, {"owner": {"reputation": 561, "user_id": 8296766, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a25bf4bbb5543270c181cc0e216ca53?s=128&d=identicon&r=PG&f=1", "display_name": "\u015amig\u0142o", "link": "https://stackoverflow.com/users/8296766/%c5%9amig%c5%82o"}, "edited": false, "score": 0, "creation_date": 1503521178, "post_id": 45848928, "comment_id": 78656172, "body": "i know that executing code from file is VERY bad idea :) but i have many classes - Point, Line, Versor, and I don&#39;t know in advance which one I will call"}], "answers": [{"tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": false, "score": 3, "last_activity_date": 1602626834, "last_edit_date": 1602626834, "creation_date": 1503521102, "answer_id": 45848988, "question_id": 45848928, "link": "https://stackoverflow.com/questions/45848928/how-to-call-class-constructor-having-its-name-in-text-variable-python/45848988#45848988", "title": "How to call class constructor having its name in text variable? [Python]", "body": "<p>Provided that a class is defined in (or imported into) the global namespace, you can get a reference to it via the dictionary returned by <a href=\"https://docs.python.org/3/library/functions.html#globals\" rel=\"nofollow noreferrer\"><code>globals()</code></a>. After that just create an instance the usual way, e.g.:</p>\n<pre><code>class_name = 'Point'\nkwargs = {'x': 14.361, 'y': -8.100}\nPoint = globals()[class_name]\npoint = Point(**kwargs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "is_accepted": true, "score": 4, "last_activity_date": 1503521820, "last_edit_date": 1503521820, "creation_date": 1503521134, "answer_id": 45848992, "question_id": 45848928, "link": "https://stackoverflow.com/questions/45848928/how-to-call-class-constructor-having-its-name-in-text-variable-python/45848992#45848992", "title": "How to call class constructor having its name in text variable? [Python]", "body": "<p>If the class is defined or imported in the same module, you could use something like :</p>\n\n<pre><code>globals()[class_name](x, y)\n</code></pre>\n\n<p>if you have many classes to handle, you should better use a dictionnary to store them, key is the name, value is the class,</p>\n\n<p>then you can call it with :</p>\n\n<pre><code>my_classes = {'Point' : Point, 'Point2' : Point2}\n\nclass_name = 'Point'\nx = 14.361\ny = -8.100\nmy_classes[class_name](x, y)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 204, "user_id": 8508504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0yhme.jpg?s=128&g=1", "display_name": "Tejas Pandit", "link": "https://stackoverflow.com/users/8508504/tejas-pandit"}, "is_accepted": false, "score": -1, "last_activity_date": 1503524417, "creation_date": 1503524417, "answer_id": 45849712, "question_id": 45848928, "link": "https://stackoverflow.com/questions/45848928/how-to-call-class-constructor-having-its-name-in-text-variable-python/45849712#45849712", "title": "How to call class constructor having its name in text variable? [Python]", "body": "<p>You can use eval.</p>\n\n<pre><code>class Point:\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\nclass Vector:\n    def __init__(self, x, y):\n        self.x = x+100\n        self.y = y+100\n\nclass_name = 'Vector'\n\nx = 10\ny = 20\ncaller = '{}({},{})'.format(class_name,x,y)\nob = eval(caller)\n\nprint ob.x, ob.y\n</code></pre>\n"}], "owner": {"reputation": 561, "user_id": 8296766, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a25bf4bbb5543270c181cc0e216ca53?s=128&d=identicon&r=PG&f=1", "display_name": "\u015amig\u0142o", "link": "https://stackoverflow.com/users/8296766/%c5%9amig%c5%82o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1853, "favorite_count": 3, "accepted_answer_id": 45848992, "answer_count": 3, "score": 1, "last_activity_date": 1602626834, "creation_date": 1503520846, "last_edit_date": 1503521459, "question_id": 45848928, "link": "https://stackoverflow.com/questions/45848928/how-to-call-class-constructor-having-its-name-in-text-variable-python", "title": "How to call class constructor having its name in text variable? [Python]", "body": "<p>Let's assume we have some classes defined and available in global namespace. In example:</p>\n\n<pre><code>class Point:\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\nclass Vector:\n    def __init__(self, alpha, r):\n        self.x = r * cos(alpha)\n        self.y = r * sin(alpha)\n\n# and many others...\n</code></pre>\n\n<p>How to do this:</p>\n\n<pre><code>class_name = 'Point'\nx = 14.361\ny = -8.100\ncode_str = 'class_object = ' + class_name + '(' + str(x) + ', ' + str(y) + ')'\n\nexec code_str  # That evaluates to: \"class_object = Point(14.361, -8.100)\"\n\nprint class_object.x, class_object.y\n</code></pre>\n\n<p>without using the dangerous exec?</p>\n\n<p>PS. I'm intending to load the data from some txt or json file if anyone asks.</p>\n"}, {"tags": ["python", "tkinter", "python-3.5"], "comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1503521109, "post_id": 45848883, "comment_id": 78656139, "body": "Welcome to StackOverflow! Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. You do not need to provide your full code. Just enough to show an example of your issue. The rest just gets in the way of people being able to help you. On that note I can tell you that your current code does not open new windows at least when I copy pasted the code to test it."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1503521111, "post_id": 45848883, "comment_id": 78656140, "body": "you need to call <code>destroy</code> on <code>self.mainWindow</code> if you want to literally destroy all of the windows."}, {"owner": {"reputation": 15106, "user_id": 2573061, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t8eGV.jpg?s=128&g=1", "display_name": "C8H10N4O2", "link": "https://stackoverflow.com/users/2573061/c8h10n4o2"}, "edited": false, "score": 0, "creation_date": 1503521192, "post_id": 45848883, "comment_id": 78656183, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1406145/how-do-i-get-rid-of-python-tkinter-root-window\">How do I get rid of Python Tkinter root window?</a>"}, {"owner": {"reputation": 151, "user_id": 7681153, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1e79de15e8922c4df73d86ab96d6f0c?s=128&d=identicon&r=PG&f=1", "display_name": "Samun", "link": "https://stackoverflow.com/users/7681153/samun"}, "edited": false, "score": 0, "creation_date": 1503521796, "post_id": 45848883, "comment_id": 78656465, "body": "sorry if my question was unclear. In my QuitDialog Class,  there is a button called cancel. I want that button to close all the windows."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1503522397, "post_id": 45848883, "comment_id": 78656722, "body": "@SamThapa: I have updated my answer let me know if you have any questions."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 7681153, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1e79de15e8922c4df73d86ab96d6f0c?s=128&d=identicon&r=PG&f=1", "display_name": "Samun", "link": "https://stackoverflow.com/users/7681153/samun"}, "edited": false, "score": 0, "creation_date": 1503523441, "post_id": 45849007, "comment_id": 78657164, "body": "Thank you so much. You are a life saver."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "reply_to_user": {"reputation": 151, "user_id": 7681153, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1e79de15e8922c4df73d86ab96d6f0c?s=128&d=identicon&r=PG&f=1", "display_name": "Samun", "link": "https://stackoverflow.com/users/7681153/samun"}, "edited": false, "score": 0, "creation_date": 1503523933, "post_id": 45849007, "comment_id": 78657359, "body": "@SamThapa If this answer works for you please consider selecting the check mark next to my answer."}], "tags": [], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "is_accepted": true, "score": 2, "last_activity_date": 1503522726, "last_edit_date": 1503522726, "creation_date": 1503521204, "answer_id": 45849007, "question_id": 45848883, "link": "https://stackoverflow.com/questions/45848883/closing-all-windows-in-python-tkinter/45849007#45849007", "title": "closing all windows in python tkinter", "body": "<p>You are importing tkinter 2 times here. Onces with <code>*</code> and ones as tk.</p>\n\n<p>Just use:</p>\n\n<pre><code>import tkinter as tk\n</code></pre>\n\n<p>this will help you avoid overriding anything that other libraries imports or having tkinter's functions overwritten by other imports.</p>\n\n<p>You have a very unorthodox way of creating your tkinter app but if you wish to keep everything as is here is what you need to change:</p>\n\n<p>Lets remove the cancel button from your <code>quitDialog</code> window and then add a yes and no button. This will server to allow you to either say <code>yes</code> to destroy all windows or to say <code>no</code> to only destroy the <code>quitDialog</code> window.</p>\n\n<p>First we need to add an arguement to your <code>QuitDialog</code> class so we can pass the any window or frame we want to it.</p>\n\n<p>So add the instance argument to your <code>QuitDialog()</code> class like below:</p>\n\n<pre><code>class  QuitDialog():\n\n    def __init__(self, instance):\n        self.instance = instance\n</code></pre>\n\n<p>Now replace:</p>\n\n<pre><code>cancelButton = tk.Button(master= self.quitDialog ,\n                                text='Cancel',\n                                command = self.quitALL).grid(row=2, column=1)\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>quitButton = tk.Button(master= self.quitDialog ,\n                       text='Yes', command = self.quitALL).grid(row=2, column=1)\ncancelButton = tk.Button(master= self.quitDialog,\n                         text='No', command = lambda: self.quitDialog.destroy()).grid(row=2, column=2)\n</code></pre>\n\n<p>Then lets change your <code>quitALL()</code> method to:</p>\n\n<pre><code>def quitALL(self):\n    self.quitDialog.destroy()\n    self.instance.destroy()\n</code></pre>\n\n<p>This will use our instance argument to destroy a window we pass in.</p>\n\n<p>Now change your <code>showQuitDialog()</code> method to:</p>\n\n<pre><code>def showQuitDialog(self):\n    quitdialog = QuitDialog(self.mainWindow)\n    quitdialog.start()\n</code></pre>\n\n<p>As you can see we are now passing the the tk window <code>self.mainWindow</code> to the <code>QuitDialog</code> class so we can decide on weather or not to close it.</p>\n\n<p>Below is the copy past version of your code that should work as you need it to:</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import ttk\nimport tkinter.messagebox\nimport datetime\n\n\nclass AlertDialog:\n\n    def __init__(self):\n\n        self.invalidDiag = tk.Toplevel()\n        invalidInput = tk.Label(master=self.invalidDiag,\n                                text='Error: Invalid Input').grid(row=1, column=1)\n        closeButton = tk.Button(master=self.invalidDiag,\n                                text='Close',\n                                command=self.invalidDiag.destroy).grid(row=2, column=1)\n\n    def start(self):\n        # self.invalidDiag.grab_set() #takes control over the dialog (makes it active)\n        self.invalidDiag.wait_window()\n\n\nclass  QuitDialog():\n\n    def __init__(self, instance):\n\n        self.instance = instance\n\n        self.quitDialog = tk.Toplevel()\n\n        warnMessage = tk.Label(master=self.quitDialog,\n                                text='Are you sure that you want to quit? ').grid(row=1, column=1, columnspan=2)\n        quitButton = tk.Button(master= self.quitDialog ,\n                                text='Yes',\n                                command = self.quitALL).grid(row=2, column=1)\n        cancelButton = tk.Button(master= self.quitDialog,\n                                text='No',\n                                command = lambda: self.quitDialog.destroy()).grid(row=2, column=2)\n\n    def start(self):\n        # self.invalidDiag.grab_set() #takes control over the dialog (makes it active)\n        self.quitDialog.wait_window()\n\n    def quitALL(self):\n        self.quitDialog.destroy()\n        self.instance.destroy()\n\n\nclass TimeConverter:\n\n    def __init__(self):\n\n        self.mainWindow = tk.Tk()\n        self.mainWindow.title(\"Seconds Converter\")\n        self.results = tk.StringVar()\n        self.inputSecs = tk.StringVar()\n        secLabel = tk.Label(master=self.mainWindow,\n                            text=\"Seconds:\").grid(row=0, sticky=\"W\")\n        resultLabel = tk.Label(master=self.mainWindow,\n                               text=\"Converted Time:\\n(H:M:S)\").grid(row=1, sticky=\"W\")\n        calcResults = tk.Label(master=self.mainWindow,\n                               background='light gray', width=20,\n                               textvariable=self.results,\n                               anchor=\"w\").grid(row=1, column=1)\n        secEntry = tk.Entry(master=self.mainWindow,\n                            width=24,\n                            textvariable=self.inputSecs).grid(row=0, column=1)\n\n        calcButton = tk.Button(master=self.mainWindow,\n                               text='Calculate',\n                               command=self.SecondsToHours).grid(row=2,\n                                                                 column=0, sticky=\"w\")\n        quitButton = tk.Button(master=self.mainWindow,\n                               text='Quit',\n                               command=self.showQuitDialog).grid(row=3, column=1, sticky=\"E\")\n\n    def invalidInputEntered(self):\n        errorDiag = AlertDialog()\n        errorDiag.start()\n\n    def showQuitDialog(self):\n        quitdialog = QuitDialog(self.mainWindow)\n        quitdialog.start()\n\n    def startDisplay(self) -&gt; None:\n        self.mainWindow.mainloop()\n\n    def destroyit(self):\n        self.mainWindow.destroy()\n\n    def SecondsToHours(self):\n        try:\n            inputseconds = int(self.inputSecs.get())\n            seconds = int(inputseconds % 60)\n            minutes = int(((inputseconds - seconds) / 60) % 60)\n            hours = int((((inputseconds - seconds) / 60) - minutes) / 60)\n            tempResults = str(hours) + ':' + str(minutes) + ':' + str(seconds)\n            self.results.set(tempResults)\n            return\n\n        except ValueError:\n            self.invalidInputEntered()\n            #self.showQuitDialog()\n\nif __name__ == '__main__':\n    TimeConverter().startDisplay()\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 7681153, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1e79de15e8922c4df73d86ab96d6f0c?s=128&d=identicon&r=PG&f=1", "display_name": "Samun", "link": "https://stackoverflow.com/users/7681153/samun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7546, "favorite_count": 1, "accepted_answer_id": 45849007, "answer_count": 1, "score": 1, "last_activity_date": 1503522726, "creation_date": 1503520643, "question_id": 45848883, "link": "https://stackoverflow.com/questions/45848883/closing-all-windows-in-python-tkinter", "title": "closing all windows in python tkinter", "body": "<p>I am working with tkinter library in python. I have a main window which has several buttons and when clicked those buttons a new window will popup which also has  a button called cancel. I want to make that cancel button to all the windows.</p>\n\n<p>I tried the following solution, which only closes the current window.</p>\n\n<pre><code>from tkinter import *\nfrom tkinter import ttk\nimport  tkinter.messagebox\n\nimport datetime\n\nimport tkinter as tk\n\n\nclass AlertDialog:\n    def __init__(self):\n        self.invalidDiag = tk.Toplevel()\n        invalidInput = tk.Label(master=self.invalidDiag,\n                                text='Error: Invalid Input').grid(row=1, column=1)\n        closeButton = tk.Button(master=self.invalidDiag,\n                                text='Close',\n                                command=self.invalidDiag.destroy).grid(row=2, column=1)\n\n    def start(self):\n        # self.invalidDiag.grab_set() #takes control over the dialog (makes it active)\n        self.invalidDiag.wait_window()\n\n\nclass  QuitDialog():\n\n    def __init__(self, ):\n        self.quitDialog = tk.Toplevel()\n        warnMessage = tk.Label(master=self.quitDialog,\n                                text='Are you sure that you want to quit? ').grid(row=1, column=1)\n        cancelButton = tk.Button(master= self.quitDialog ,\n                                text='Cancel',\n                                command = self.quitALL).grid(row=2, column=1)\n\n    def start(self):\n        # self.invalidDiag.grab_set() #takes control over the dialog (makes it active)\n        self.quitDialog.wait_window()\n\n    def quitALL(self):\n\n        self.quitDialog.destroy()\n        tc =TimeConverter()\n        tc.destroyit()\n\n\n\nclass TimeConverter:\n    def __init__(self):\n        self.mainWindow = tk.Tk()\n        self.mainWindow.title(\"Seconds Converter\")\n        self.results = tk.StringVar()\n        self.inputSecs = tk.StringVar()\n        secLabel = tk.Label(master=self.mainWindow,\n                            text=\"Seconds:\").grid(row=0, sticky=\"W\")\n        resultLabel = tk.Label(master=self.mainWindow,\n                               text=\"Converted Time:\\n(H:M:S)\").grid(row=1, sticky=\"W\")\n        calcResults = tk.Label(master=self.mainWindow,\n                               background='light gray', width=20,\n                               textvariable=self.results,\n                               anchor=\"w\").grid(row=1, column=1)\n        secEntry = tk.Entry(master=self.mainWindow,\n                            width=24,\n                            textvariable=self.inputSecs).grid(row=0, column=1)\n\n        calcButton = tk.Button(master=self.mainWindow,\n                               text='Calculate',\n                               command=self.SecondsToHours).grid(row=2,\n                                                                 column=0, sticky=\"w\")\n        # quitButton = tk.Button(master=self.mainWindow,\n        #                        text='Quit',\n        #                        command=self.mainWindow.destroy).grid(row=2, column=1, sticky=\"E\")\n        quitButton = tk.Button(master=self.mainWindow,\n                               text='Quit',\n                               command=self.showQuitDialog).grid(row=3, column=1, sticky=\"E\")\n\n    def invalidInputEntered(self):\n        errorDiag = AlertDialog()\n        errorDiag.start()\n\n    def showQuitDialog(self):\n        quitdialog = QuitDialog()\n        quitdialog.start()\n\n\n    def startDisplay(self) -&gt; None:\n        self.mainWindow.mainloop()\n\n    def destroyit(self):\n        self.mainWindow.destroy()\n\n    def SecondsToHours(self):\n        try:\n            inputseconds = int(self.inputSecs.get())\n            seconds = int(inputseconds % 60)\n            minutes = int(((inputseconds - seconds) / 60) % 60)\n            hours = int((((inputseconds - seconds) / 60) - minutes) / 60)\n            tempResults = str(hours) + ':' + str(minutes) + ':' + str(seconds)\n            self.results.set(tempResults)\n            return\n\n        except ValueError:\n            self.invalidInputEntered()\n            #self.showQuitDialog()\n\n\nif __name__ == '__main__':\n    TimeConverter().startDisplay()\n</code></pre>\n"}, {"tags": ["python", "string", "list", "format", "list-comprehension"], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 1, "creation_date": 1503520751, "post_id": 45848856, "comment_id": 78655975, "body": "@Sandi yes, I&#39;ve linked to the relevant documentation."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 4, "creation_date": 1503520865, "post_id": 45848856, "comment_id": 78656022, "body": "You can also just index in the format string <code>&quot;&#39;{0[0]}&#39;::&#39;{0[1]}&#39;::&#39;{0[2]}&#39; &#39;{0[3]}&#39;\\n&quot;.format(datalist)</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "edited": false, "score": 0, "creation_date": 1503528114, "post_id": 45848856, "comment_id": 78658904, "body": "@Sandi read through the answers to <a href=\"https://stackoverflow.com/questions/36901/what-does-double-star-and-star-do-for-parameters\">this question</a>"}, {"owner": {"reputation": 383, "user_id": 6863907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/03c9f690c97c537879369d84387450c8?s=128&d=identicon&r=PG&f=1", "display_name": "kronosjt", "link": "https://stackoverflow.com/users/6863907/kronosjt"}, "edited": false, "score": 0, "creation_date": 1538375219, "post_id": 45848856, "comment_id": 92105982, "body": "Fot this method to work I&#39;d have to know how many items the list has. What if I don&#39;t know beforehand how many items are in the list?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 383, "user_id": 6863907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/03c9f690c97c537879369d84387450c8?s=128&d=identicon&r=PG&f=1", "display_name": "kronosjt", "link": "https://stackoverflow.com/users/6863907/kronosjt"}, "edited": false, "score": 0, "creation_date": 1538375845, "post_id": 45848856, "comment_id": 92106257, "body": "@kronosjt it depends on exactly what you are trying to accomplish. What sort of string are you trying to construct?"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 6, "last_activity_date": 1503521182, "last_edit_date": 1503521182, "creation_date": 1503520547, "answer_id": 45848856, "question_id": 45848824, "link": "https://stackoverflow.com/questions/45848824/list-comprehension-in-format-string-python/45848856#45848856", "title": "List comprehension in format string? (Python)", "body": "<p>Yes, use <a href=\"https://docs.python.org/3.6/tutorial/controlflow.html#unpacking-argument-lists\" rel=\"nofollow noreferrer\">argument unpacking</a> with the \"splat\" operator <code>*</code>:</p>\n\n<pre><code>&gt;&gt;&gt; s = \"'{0}'::'{1}'::'{2}' '{3}'\\n\"\n&gt;&gt;&gt; datalist = ['foo','bar','baz','fizz']\n&gt;&gt;&gt; s.format(*datalist)\n\"'foo'::'bar'::'baz' 'fizz'\\n\"\n&gt;&gt;&gt;\n</code></pre>\n\n<p><h3>Edit</h3> As pointed out by @AChampion you can also just use indexing inside the format string itself:</p>\n\n<pre><code>&gt;&gt;&gt; \"'{0[0]}'::'{0[1]}'::'{0[2]}' '{0[3]}'\\n\".format(datalist)\n\"'foo'::'bar'::'baz' 'fizz'\\n\"\n</code></pre>\n"}], "owner": {"reputation": 5926, "user_id": 3128156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/h3FIS.jpg?s=128&g=1", "display_name": "Sahand", "link": "https://stackoverflow.com/users/3128156/sahand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3753, "favorite_count": 0, "accepted_answer_id": 45848856, "answer_count": 1, "score": 7, "last_activity_date": 1539880848, "creation_date": 1503520415, "last_edit_date": 1539880848, "question_id": 45848824, "link": "https://stackoverflow.com/questions/45848824/list-comprehension-in-format-string-python", "title": "List comprehension in format string? (Python)", "body": "<p>Let's say I have a list <code>datalist</code>, with <code>len(datalist) = 4</code>. Let's say I want each of the elements in the list to be represented in a string in this way:</p>\n\n<pre><code>s = \"'{0}'::'{1}'::'{2}' '{3}'\\n\".format(datalist[0], datalist[1], datalist[2], datalist[3])\n</code></pre>\n\n<p>I don't like having to type <code>datalist[index]</code> so many times, and feel like there should be a more effective way. I tried:</p>\n\n<pre><code>s = \"'{0}'::'{1}'::'{2}' '{3}'\\n\".format(datalist[i] for i in range(4))\n</code></pre>\n\n<p>But this doesn't work:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nIndexError: tuple index out of range\n</code></pre>\n\n<p>Does anybody know a functioning way to achieve this efficiently and concisely?</p>\n"}, {"tags": ["javascript", "python", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "is_accepted": true, "score": 0, "last_activity_date": 1503541242, "creation_date": 1503541242, "answer_id": 45851958, "question_id": 45848816, "link": "https://stackoverflow.com/questions/45848816/how-to-verify-visibility-of-a-button-in-python/45851958#45851958", "title": "How to verify visibility of a button in python", "body": "<p>Use <code>.find_elements()</code> to see if the element exists. If the returned list is empty, you know the element is not present (or displayed). If it's not empty, check <code>.is_displayed()</code> on the first element.</p>\n\n<pre><code>def delete_btn_disabled(self):        \n    button = self.driver.find_elements(*Elements.delete_btn)\n    if button:\n        return button[0].is_displayed()\n    else:\n        return False\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 723, "user_id": 5735184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H4nIV.png?s=128&g=1", "display_name": "Priansh Shah", "link": "https://stackoverflow.com/users/5735184/priansh-shah"}, "edited": false, "score": 0, "creation_date": 1518185198, "post_id": 48707552, "comment_id": 84413813, "body": "You can detect clickability using <code>EC.element_to_be_clickable</code> with a wait"}], "tags": [], "owner": {"reputation": 1, "user_id": 6734741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ea51a5ba5e1ed12e7930dbe566bf3e2?s=128&d=identicon&r=PG&f=1", "display_name": "try try again", "link": "https://stackoverflow.com/users/6734741/try-try-again"}, "is_accepted": false, "score": 0, "last_activity_date": 1518187955, "last_edit_date": 1518187955, "creation_date": 1518184670, "answer_id": 48707552, "question_id": 45848816, "link": "https://stackoverflow.com/questions/45848816/how-to-verify-visibility-of-a-button-in-python/48707552#48707552", "title": "How to verify visibility of a button in python", "body": "<p><code>is_displayed</code> DOES NOT equal to <code>is_visible</code>.</p>\n\n<p>You still cannot be sure the button is visible from the UI, even it is displayed somewhere outside the screen. So it is still NOT clickable.</p>\n"}, {"tags": [], "owner": {"reputation": 723, "user_id": 5735184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H4nIV.png?s=128&g=1", "display_name": "Priansh Shah", "link": "https://stackoverflow.com/users/5735184/priansh-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1518185077, "creation_date": 1518185077, "answer_id": 48707660, "question_id": 45848816, "link": "https://stackoverflow.com/questions/45848816/how-to-verify-visibility-of-a-button-in-python/48707660#48707660", "title": "How to verify visibility of a button in python", "body": "<p>Selenium manages these conditions best using expectations and waits. This will ensure that if it cannot meet your expectations it will also time out. You can use a wait for visibility using the <code>visibility_of</code> convenience method like so:</p>\n\n<pre><code>from selenium.webdriver.support import expected_conditions as EC \n\nelement = WebDriverWait(driver, 10).until(EC.visibility_of((By.ID, 'id_1')))\n</code></pre>\n\n<p>There's a full list of expectation methods <a href=\"http://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.support.expected_conditions\" rel=\"nofollow noreferrer\">here.</a></p>\n"}], "owner": {"reputation": 81, "user_id": 7419627, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d6871857dcd7f06b1e634f702179110e?s=128&d=identicon&r=PG&f=1", "display_name": "Bubbles", "link": "https://stackoverflow.com/users/7419627/bubbles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 45851958, "answer_count": 3, "score": 0, "last_activity_date": 1518187955, "creation_date": 1503520385, "last_edit_date": 1503521152, "question_id": 45848816, "link": "https://stackoverflow.com/questions/45848816/how-to-verify-visibility-of-a-button-in-python", "title": "How to verify visibility of a button in python", "body": "<p>I am trying to verify if a button element is not displayed on the UI. The code is written in Java script by the developer. I am writing automated scripts using Selenium Webdriver and Python. If the button is enabled, I can see <code>li</code> tag added in the code. But if a button is disabled, the code for the button disappears when I am inspecting it from the UI (F12->Inspect Elements).</p>\n\n<p>Currently, my code looks like this</p>\n\n<pre><code>def delete_btn_disabled(self):        \n        try:\n            button = self.driver.find_element(*Elements.delete_btn).is_displayed()\n            if button is True:\n                return True\n        except NoSuchElementException:\n            return False \n</code></pre>\n\n<p>And my test case is following:</p>\n\n<pre><code>        if spage.delete_btn_disabled() is False:\n            print(\"Test passed\")\n        else:\n            print(\"Test failed\")\n</code></pre>\n\n<p>Is there a better way to handle this? Throwing <code>NoSuchElementException</code> looks a bit dirty (please correct me if I am wrong) and I have to handle this type of code for other test cases as well. </p>\n\n<p>I have googled this but can't seem to find a correct solution for this problem. </p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "ponyorm"], "comments": [{"owner": {"reputation": 1740, "user_id": 4377521, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c9d2bda5df069b64d90ce679e09986a6?s=128&d=identicon&r=PG", "display_name": "sashaaero", "link": "https://stackoverflow.com/users/4377521/sashaaero"}, "edited": false, "score": 0, "creation_date": 1509564767, "post_id": 45848795, "comment_id": 81072626, "body": "Why do you need another database instance? You can import <code>db</code> object in other program files."}], "answers": [{"comments": [{"owner": {"reputation": 2211, "user_id": 788833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/WJfHU.png?s=128&g=1", "display_name": "dmigo", "link": "https://stackoverflow.com/users/788833/dmigo"}, "edited": false, "score": 1, "creation_date": 1527685292, "post_id": 47072232, "comment_id": 88220142, "body": "Don&#39;t you get something like: <code>pony.orm.core.ERDiagramError: Entity definition Foo was not found</code>?"}, {"owner": {"reputation": 91, "user_id": 13063486, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IsLmQiSKgYQ/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nButXieYRsIhbDxsmJnH1DE243Dcg/photo.jpg?sz=128", "display_name": "Lior Yehezkely", "link": "https://stackoverflow.com/users/13063486/lior-yehezkely"}, "edited": false, "score": 0, "creation_date": 1586304777, "post_id": 47072232, "comment_id": 108079107, "body": "I have the exact same question as dmigo"}], "tags": [], "owner": {"reputation": 4361, "user_id": 1706814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ee766a8f92667b755c18b8499b4c77?s=128&d=identicon&r=PG", "display_name": "Alexander Kozlovsky", "link": "https://stackoverflow.com/users/1706814/alexander-kozlovsky"}, "is_accepted": true, "score": 1, "last_activity_date": 1509616331, "creation_date": 1509616331, "answer_id": 47072232, "question_id": 45848795, "link": "https://stackoverflow.com/questions/45848795/using-multiple-databases-with-pony-orm/47072232#47072232", "title": "Using multiple databases with Pony ORM", "body": "<p>Typically it is better to store all information in a single database. This way you can retrieve all necessary information in a single query.</p>\n\n<p>If you split data across several databases, you cannot mix objects retrieved from different databases and need to work with each database using separate queries (although you can do it in a shared db_session).</p>\n\n<p>If you really want to have multiple databases, you can define entities inside a function:</p>\n\n<pre><code>### file models.py\n\ndef define_entities(db):\n    class Foo(db.Entity):\n        ...\n    class Bar(db.Entity):\n        ...\n\ndef open_database(filename):\n    db = Database()\n    define_entities(db)\n    db.bind('sqlite', filename)\n    db.generate_mapping(create_tables=True)\n    return db\n\n### file main.py\n\ndb1 = open_database('db1.sqlite')\ndb2 = open_database('db2.sqlite')\n\nwith db_session:\n    foos = select(foo for foo in db1.Foo if &lt;condition&gt;)[:]\n    bars = select(bar for bar in db2.Bar if &lt;condition&gt;)[:]\n</code></pre>\n\n<p>In the example above I wrote a function <code>open_database</code> which works as a database factory. Each database has its own entity classes, and you can access then as an attributes of db object: <code>db.Foo</code>, <code>db.Bar</code>, etc.</p>\n"}], "owner": {"reputation": 1115, "user_id": 452617, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9dca46550493c438207e39709fe45f7b?s=128&d=identicon&r=PG", "display_name": "saad", "link": "https://stackoverflow.com/users/452617/saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 1, "accepted_answer_id": 47072232, "answer_count": 1, "score": 0, "last_activity_date": 1509616331, "creation_date": 1503520294, "question_id": 45848795, "link": "https://stackoverflow.com/questions/45848795/using-multiple-databases-with-pony-orm", "title": "Using multiple databases with Pony ORM", "body": "<p>I'm considering using sqlite as a application file format and using Pony ORM as a lightweight ORM. So far, all the code examples I've seen place the models a database() object in a separate file.</p>\n\n<p>My question is, when the user makes a new file, how do I instantiate a new database instance for the same database model? (all databases are the same schema)</p>\n\n<p>So one document is linked to one pony-orm database object, another is linked to a separate pony-orm object.</p>\n\n<p>Is this possible in PonyORM? If not, is it possible in any other Python ORM?</p>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8508283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfh02.jpg?s=128&g=1", "display_name": "Kyle Johnson", "link": "https://stackoverflow.com/users/8508283/kyle-johnson"}, "edited": false, "score": 0, "creation_date": 1503520631, "post_id": 45848832, "comment_id": 78655935, "body": "Hmmm says the database doesn&#39;t have the attribute &quot;updated&quot;  AttributeError: type object &#39;SportsItems&#39; has no attribute &#39;update&#39;"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 3, "user_id": 8508283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfh02.jpg?s=128&g=1", "display_name": "Kyle Johnson", "link": "https://stackoverflow.com/users/8508283/kyle-johnson"}, "edited": false, "score": 0, "creation_date": 1503520671, "post_id": 45848832, "comment_id": 78655952, "body": "@KJJohnson: how did you wrote the column in the <code>SportsItem</code> table?"}, {"owner": {"reputation": 3, "user_id": 8508283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfh02.jpg?s=128&g=1", "display_name": "Kyle Johnson", "link": "https://stackoverflow.com/users/8508283/kyle-johnson"}, "edited": false, "score": 0, "creation_date": 1503520824, "post_id": 45848832, "comment_id": 78656002, "body": "SportsItems table has name, description, price and sport.  Would I need another column for updated to log when it is added?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 3, "user_id": 8508283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfh02.jpg?s=128&g=1", "display_name": "Kyle Johnson", "link": "https://stackoverflow.com/users/8508283/kyle-johnson"}, "edited": false, "score": 0, "creation_date": 1503520967, "post_id": 45848832, "comment_id": 78656071, "body": "@KJJohnson: but based on your question, the table has an <code>updated</code> column. That is not in the table description in Python/SQLAlchemy?"}, {"owner": {"reputation": 3, "user_id": 8508283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfh02.jpg?s=128&g=1", "display_name": "Kyle Johnson", "link": "https://stackoverflow.com/users/8508283/kyle-johnson"}, "edited": false, "score": 0, "creation_date": 1503521056, "post_id": 45848832, "comment_id": 78656107, "body": "Sorry for the confusion.  That &#39;updated desc&#39; portion I was attempting to add manually.  No, there is no updated column in the table"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 3, "user_id": 8508283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfh02.jpg?s=128&g=1", "display_name": "Kyle Johnson", "link": "https://stackoverflow.com/users/8508283/kyle-johnson"}, "edited": false, "score": 0, "creation_date": 1503521103, "post_id": 45848832, "comment_id": 78656132, "body": "@KJJohnson: but how can you sort a table based on something that does not exist. Most databases do not store when a row was modified, nor do they order results (guaranteed) by modification date. In case you need that, you probably have to add a column <code>updated</code> somehow that keeps track of it"}, {"owner": {"reputation": 3, "user_id": 8508283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfh02.jpg?s=128&g=1", "display_name": "Kyle Johnson", "link": "https://stackoverflow.com/users/8508283/kyle-johnson"}, "edited": false, "score": 0, "creation_date": 1503521262, "post_id": 45848832, "comment_id": 78656212, "body": "Ok thanks, I was thinking it somehow tracked when the last additions were made to the database.  I&#39;ll go about creating an updated column.  Appreciate the help and advice"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1503552040, "last_edit_date": 1503552040, "creation_date": 1503520440, "answer_id": 45848832, "question_id": 45848779, "link": "https://stackoverflow.com/questions/45848779/display-latest-additions-sqlalchemy/45848832#45848832", "title": "display latest additions sqlalchemy", "body": "<p>You should <strong>order the modification date in descending order</strong>:</p>\n\n<pre><code>session.query(SportsItems).order_by(<b>SportsItems.updated.desc()</b>).limit(5).all()</code></pre>\n\n<p>You thus call <code>desc()</code> on the column of the table.</p>\n"}], "owner": {"reputation": 3, "user_id": 8508283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zfh02.jpg?s=128&g=1", "display_name": "Kyle Johnson", "link": "https://stackoverflow.com/users/8508283/kyle-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 45848832, "answer_count": 1, "score": 0, "last_activity_date": 1503552040, "creation_date": 1503520231, "last_edit_date": 1503520937, "question_id": 45848779, "link": "https://stackoverflow.com/questions/45848779/display-latest-additions-sqlalchemy", "title": "display latest additions sqlalchemy", "body": "<p>I'm new to Stack Overflow and programming in general.  </p>\n\n<p>I'm trying to get a handle on <code>SQLAlchemy</code> in <code>Python</code>.  I'm attempting to pull the last 5 entries (most recently added) from a database, but can't quite figure out where I'm going wrong.  Any advice is greatly appreciated</p>\n\n<pre><code>Additions = session.query(SportsItems).order_by(asc('updated desc')).limit(5)\n</code></pre>\n\n<p>Obviously looking to query the <code>SportsItems</code> database and pull the last 5 items added, but no luck thus far</p>\n\n<p>I have the rest of the session code working properly as I'm able to display other queries as intended, just can't figure out this particular query.</p>\n"}, {"tags": ["python", "selenium", "file-not-found"], "comments": [{"owner": {"reputation": 11, "user_id": 8507955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qRCkd.png?s=128&g=1", "display_name": "lstark", "link": "https://stackoverflow.com/users/8507955/lstark"}, "edited": false, "score": 0, "creation_date": 1503525514, "post_id": 45848777, "comment_id": 78658026, "body": "If others have a similar issue, I was able to get a work around by using Chrome, but I would like to find a solution to fix the issue with Firefox if possible."}, {"owner": {"reputation": 339, "user_id": 4359551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2dRwl.gif?s=128&g=1", "display_name": "user4359551", "link": "https://stackoverflow.com/users/4359551/user4359551"}, "edited": false, "score": 0, "creation_date": 1504590677, "post_id": 45848777, "comment_id": 79054992, "body": "Did you find a solution to this on Firefox? I have the same issue. Used to work before, now it doesn&#39;t."}, {"owner": {"reputation": 11, "user_id": 8507955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qRCkd.png?s=128&g=1", "display_name": "lstark", "link": "https://stackoverflow.com/users/8507955/lstark"}, "reply_to_user": {"reputation": 339, "user_id": 4359551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2dRwl.gif?s=128&g=1", "display_name": "user4359551", "link": "https://stackoverflow.com/users/4359551/user4359551"}, "edited": false, "score": 0, "creation_date": 1505250786, "post_id": 45848777, "comment_id": 79333658, "body": "I didn&#39;t find a direct solution. I was able to get it to work by using a Windows system that had an older version of Firefox. Version 54 still works with Selenium, so if you can get it to downgrade properly, then it should work."}], "owner": {"reputation": 11, "user_id": 8507955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qRCkd.png?s=128&g=1", "display_name": "lstark", "link": "https://stackoverflow.com/users/8507955/lstark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1122, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1503520224, "creation_date": 1503520224, "question_id": 45848777, "link": "https://stackoverflow.com/questions/45848777/selenium-python-webdriver-file-not-found-error", "title": "Selenium Python Webdriver: File not Found error", "body": "<p>I had a python script that up until a few days ago worked. It submits a file to a website, waits for the analysis to finish, then prints out the XML output. The file that it uploads can be found <a href=\"https://www.dropbox.com/s/gklhv3s8yemc67v/2ffk.md.300.p0.pdb?dl=0\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>import sys\nimport os\nfrom selenium import webdriver\nimport time\n\npath=os.getcwd()+\"/\"\nfilename=sys.argv[1]\ndriver=webdriver.Firefox()\ndriver.implicitly_wait(60)\ndriver.get(\"http://www.ebi.ac.uk/pdbe/pisa\")\ndriver.find_element_by_name(\"start_server\").click()\ndriver.find_element_by_xpath(\"//input[@value='id_coorfile']\").click()\ndriver.find_element_by_css_selector(\"input[type=\\\"file\\\"]\").send_keys(path+filename)\ndriver.find_element_by_name(\"btn_upload\").click()\ndriver.find_element_by_name(\"btn_submit_interfaces\").click()\ndriver.find_element_by_name(\"btn_interface_details\").click()\ndriver.find_element_by_name(\"downloadXML\").click()\ndriver.switch_to_window(driver.window_handles[1])\ntime.sleep(3)\nprint driver.page_source\ndriver.close()\ndriver.switch_to_window(driver.window_handles[0])\ndriver.close()\n</code></pre>\n\n<p>When running this code two days ago, it suddenly gave me an error</p>\n\n<pre><code>selenium.common.exceptions.WebDriverException: Message: File not found: /home/lstark/research/chemokines/PDBePISA/2ffk.md.300.p0.pdb\n</code></pre>\n\n<p>I use os.getcwd() and use sys.argv<a href=\"https://www.dropbox.com/s/gklhv3s8yemc67v/2ffk.md.300.p0.pdb?dl=0\" rel=\"nofollow noreferrer\">1</a> so I can tab-complete the file name to make sure I'm not typing it incorrectly, but I still get the same error. The file is in the same directory as the script. I've tested the path+filename in python, and can open and read the file without a problem. I tested it on another computer as well and hit the same error. I've tested the script line by line and the error occurs at</p>\n\n<pre><code>driver.find_element_by_css_selector(\"input[type=\\\"file\\\"]\").send_keys(path+filename)\n</code></pre>\n\n<p>I am working in Ubuntu 16.04, using selenium 3.5.0, python 2.7.12, and Firefox 55.0.2.</p>\n\n<p>Is anyone able to reproduce this error and can anyone offer some advice on how to get Selenium to find the path to upload the file?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1503520548, "post_id": 45848826, "comment_id": 78655885, "body": "URGH, when I did set_index(&quot;Date&quot;), in did not do in place = True... thanks a lot"}], "tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": true, "score": 2, "last_activity_date": 1503520422, "creation_date": 1503520422, "answer_id": 45848826, "question_id": 45848743, "link": "https://stackoverflow.com/questions/45848743/pandas-interpolations-does-not-work-for-date-index/45848826#45848826", "title": "pandas interpolations does not work for date index", "body": "<p>In order to use the <code>time</code> method you need to set the date column as index.</p>\n\n<pre><code>df.set_index('Date').interpolate(method='time')\nOut: \n            price\nDate             \n2001-01-01    1.0\n2001-01-02    2.0\n2001-01-04    4.0\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 1, "accepted_answer_id": 45848826, "answer_count": 1, "score": 1, "last_activity_date": 1503520608, "creation_date": 1503520050, "last_edit_date": 1503520608, "question_id": 45848743, "link": "https://stackoverflow.com/questions/45848743/pandas-interpolations-does-not-work-for-date-index", "title": "pandas interpolations does not work for date index", "body": "<p>I mocked the following data in a file:</p>\n\n<pre><code>Date,price\n20010101,1\n20010102,\n20010104,4\n</code></pre>\n\n<p>Then to load this, I used </p>\n\n<pre><code>df = pd.read_csv(\"file_path\", parse_dates=[\"Date\"])\n</code></pre>\n\n<p>Neither the commands</p>\n\n<pre><code>df.interpolate(\"value\")\ndf.interpolate(\"time\")\n</code></pre>\n\n<p>worked. I expect the output to be </p>\n\n<pre><code>          price\nDate     \n20010101    1\n20010102    2\n20010104    4\n</code></pre>\n\n<p>ps. I forgot to say I did:</p>\n\n<pre><code>df.set_index(\"Date\")\n</code></pre>\n"}, {"tags": ["python", "difflib"], "comments": [{"owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 1, "creation_date": 1503520011, "post_id": 45848695, "comment_id": 78655627, "body": "&quot;returns a list&quot; \u2014 list of what? What does lineExtractor do?"}, {"owner": {"reputation": 358, "user_id": 5787076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f522af7d4f3d5ad329e37fd5bb8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Minee", "link": "https://stackoverflow.com/users/5787076/minee"}, "reply_to_user": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "edited": false, "score": 0, "creation_date": 1503520120, "post_id": 45848695, "comment_id": 78655676, "body": "It goes through the input file line by line. If the line does not start with &#39;g&#39; it appends the line to the &#39;lines&#39; object. So basically it filters out evey line starting with &#39;g&#39;"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1503520316, "post_id": 45848695, "comment_id": 78655781, "body": "Right now <code>lineExtractor</code> returns something like a list of lists of strings. That&#39;s more than just filtering out lines starting with &#39;g&#39;. Do you simply want it to return a list of strings?"}, {"owner": {"reputation": 358, "user_id": 5787076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f522af7d4f3d5ad329e37fd5bb8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Minee", "link": "https://stackoverflow.com/users/5787076/minee"}, "edited": false, "score": 0, "creation_date": 1503520887, "post_id": 45848695, "comment_id": 78656029, "body": "Yes I want to return only a list of string."}], "answers": [{"comments": [{"owner": {"reputation": 358, "user_id": 5787076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f522af7d4f3d5ad329e37fd5bb8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Minee", "link": "https://stackoverflow.com/users/5787076/minee"}, "edited": false, "score": 0, "creation_date": 1503522231, "post_id": 45848820, "comment_id": 78656646, "body": "So actually by changing the yield it will generate a list of strings instead of a lists of strings?"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 358, "user_id": 5787076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f522af7d4f3d5ad329e37fd5bb8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Minee", "link": "https://stackoverflow.com/users/5787076/minee"}, "edited": false, "score": 0, "creation_date": 1503522359, "post_id": 45848820, "comment_id": 78656705, "body": "@M.Manuel Yes, <code>&#39;&#39;.join(lines)</code> turns the list of strings <code>lines</code> into a string. And then <code>list(lineExtractor(file1))</code> turns the generator into a list. So the result is a list of strings, which we can pass to <code>unified_diff</code>."}, {"owner": {"reputation": 358, "user_id": 5787076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f522af7d4f3d5ad329e37fd5bb8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Minee", "link": "https://stackoverflow.com/users/5787076/minee"}, "edited": false, "score": 0, "creation_date": 1503522765, "post_id": 45848820, "comment_id": 78656880, "body": "Thank you very much for the explication. So as I convert the generator into list at the end it does not really make sense to use a generator at all because finally the memory will be reserved for it. Am I right?"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 358, "user_id": 5787076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f522af7d4f3d5ad329e37fd5bb8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Minee", "link": "https://stackoverflow.com/users/5787076/minee"}, "edited": false, "score": 0, "creation_date": 1503523285, "post_id": 45848820, "comment_id": 78657093, "body": "@M.Manuel Yes, the generator doesn&#39;t reduce your memory footprint in this case. But at the same time, using a generator isn&#39;t a bad thing. If you&#39;re thinking of rewriting it, don&#39;t. It&#39;s fine the way it is."}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": true, "score": 0, "last_activity_date": 1503520410, "creation_date": 1503520410, "answer_id": 45848820, "question_id": 45848695, "link": "https://stackoverflow.com/questions/45848695/python-difflib-how-it-works-on-list/45848820#45848820", "title": "Python difflib How it works on list?", "body": "<p>The problem is that <code>unified_diff</code> needs lists of strings as input. You're giving it a generator instead. And this generator doesn't even yield strings, it yields lists of strings.</p>\n\n<p>So we need to make two changes:</p>\n\n<p>First,</p>\n\n<pre><code>lines1 = lineExtractor(file1)\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>lines1 = list(lineExtractor(file1))\n</code></pre>\n\n<p>Obviously, the same thing needs to be done with <code>lines2</code>.</p>\n\n<p>Secondly,</p>\n\n<pre><code>yield lines\n</code></pre>\n\n<p>becomes <code>yield ''.join(lines)</code>.</p>\n"}], "owner": {"reputation": 358, "user_id": 5787076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225f522af7d4f3d5ad329e37fd5bb8e9?s=128&d=identicon&r=PG&f=1", "display_name": "Minee", "link": "https://stackoverflow.com/users/5787076/minee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 45848820, "answer_count": 1, "score": 0, "last_activity_date": 1503520416, "creation_date": 1503519784, "last_edit_date": 1503520416, "question_id": 45848695, "link": "https://stackoverflow.com/questions/45848695/python-difflib-how-it-works-on-list", "title": "Python difflib How it works on list?", "body": "<p>I'm new to Python. I wrote a simple script which opens a file and with a function it appends some of the line to a <code>generator</code> object. Then I use this object to make a difference with another file read the same way. I got the following error: </p>\n\n<blockquote>\n  <p>unhashable type: 'list'. </p>\n</blockquote>\n\n<p>For making the difference I'm using <code>difflib</code>.</p>\n\n<p>Could you please explain why i get this error? I've seen how to use the <code>difflib</code> with <code>f.readlines()</code> but I do not get it because <code>f.readlines()</code> also returns a list.</p>\n\n<pre><code>#! /usr/bin/python\n\nimport difflib\n\ndef lineExtractor(file):\n    lines = []\n    for line in file:\n        if line.startswith('g'):\n            if lines:\n                yield lines\n                lines = []\n        else:\n            lines.append( line )\n    if lines:\n         yield lines\n\nwith open('testfile1.txt') as file1:\n    lines1 = lineExtractor(file1)\n    with open('testfile2.txt') as file2:\n        lines2 = lineExtractor(file2)\n        for line in difflib.unified_diff(lines1, lines2, fromfile='file1', tofile='file2', lineterm='', n=0):\n                print line\n</code></pre>\n\n<p>Thanks </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1503520307, "post_id": 45848656, "comment_id": 78655775, "body": "Couldn&#39;t you do something like use the add function from the super class and use fillna afterwards? Or is the problem that your add function has the wrong signature?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1503520535, "post_id": 45848656, "comment_id": 78655881, "body": "@Quickbeam2k1 I&#39;m trying to subclass <code>pd.Series</code>.  I could define my <code>__add__</code> method to accomplish this in a way that you suggested.  However, I&#39;m trying to minimize augmentation. If <code>+</code> uses <code>__add__</code> I want to pass all my arguments through <code>__add__</code>.  Ultimately, I&#39;ve asked my question accordingly with a strict limitation that the solution must use <code>pd.Series.__add__</code>"}, {"owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1503521160, "post_id": 45848656, "comment_id": 78656160, "body": "Sorry for bothering again, I just scanned the <a href=\"https://github.com/pandas-dev/pandas/blob/v0.20.3/pandas/core/series.py\" rel=\"nofollow noreferrer\">series sources</a>. There no <b>add</b> function is defined. I also skimmed through the parents but didn&#39;t find the <b>add</b> function. Do we use the numpy function here? Could you provide a link to the sources of ``Series.__add__` and <code>DataFrame.__add__</code>?"}, {"owner": {"reputation": 6200, "user_id": 1040092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/se31H.jpg?s=128&g=1", "display_name": "Wondercricket", "link": "https://stackoverflow.com/users/1040092/wondercricket"}, "reply_to_user": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "edited": false, "score": 0, "creation_date": 1503521243, "post_id": 45848656, "comment_id": 78656202, "body": "@Quickbeam2k1 if you do <code>print s1.__add__</code>, it says <code>Series.wrapper</code>. So the function is appended by a wrapper somewhere within the code somewhere"}, {"owner": {"reputation": 10872, "user_id": 3135417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b989009ea961e780793f80ea6d53240?s=128&d=identicon&r=PG&f=1", "display_name": "Abdou", "link": "https://stackoverflow.com/users/3135417/abdou"}, "edited": false, "score": 0, "creation_date": 1503521555, "post_id": 45848656, "comment_id": 78656366, "body": "@piRSquared if you are bold enough, then you may contemplate monkey-patching the <code>pd.Series.__add__</code> method. If that sounds like something you want to do, take a look at <a href=\"https://www.dropbox.com/s/5jay3080fwt5jfu/monkey_patching_pandas_series.py?dl=0\" rel=\"nofollow noreferrer\">this</a>."}], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1503520012, "post_id": 45848688, "comment_id": 78655626, "body": "This does not answer the question!  I need to get the solution through the <code>__add__</code> method.  I stated that pretty clearly"}], "tags": [], "owner": {"reputation": 528, "user_id": 8083699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a324f61e57d8052e67569901a10c58e?s=128&d=identicon&r=PG&f=1", "display_name": "rvd", "link": "https://stackoverflow.com/users/8083699/rvd"}, "is_accepted": false, "score": -2, "last_activity_date": 1503519768, "creation_date": 1503519768, "answer_id": 45848688, "question_id": 45848656, "link": "https://stackoverflow.com/questions/45848656/how-do-i-fill-null-values-while-using-pd-series-add/45848688#45848688", "title": "How do I fill null values while using pd.Series.__add__", "body": "<p>To fill in <code>NaN</code>s with a value, use <code>df.fillna(&lt;value&gt;)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1503524301, "post_id": 45849287, "comment_id": 78657514, "body": "Yes, I&#39;m trying to overload <code>__add__</code>.  However, I don&#39;t want to use <code>self.add</code> to do it.  I want to use <code>super().__add__</code>.  This way I guarantee the behavior is identical to what it should be.  You see, I&#39;m suspicious that <code>add</code> and <code>__add__</code> are <b>not</b> the same.  I know I have a question about this.  I&#39;m looking it up now."}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1503524589, "post_id": 45849287, "comment_id": 78657625, "body": "Per the docs on <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.add.html\" rel=\"nofollow noreferrer\"><code>add</code></a>:  &quot;Equivalent to <code>series + other</code>, but with support to substitute a <code>fill_value</code> for missing data in one of the inputs.&quot;"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1503524783, "post_id": 45849287, "comment_id": 78657725, "body": "I found it!... This was the source of my hesitation.  <a href=\"https://stackoverflow.com/q/41410178/2336654\">stackoverflow.com/q/41410178/2336654</a> This is not <code>add</code> though and my hesitation may be unfounded."}], "tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": true, "score": 2, "last_activity_date": 1503522454, "creation_date": 1503522454, "answer_id": 45849287, "question_id": 45848656, "link": "https://stackoverflow.com/questions/45848656/how-do-i-fill-null-values-while-using-pd-series-add/45849287#45849287", "title": "How do I fill null values while using pd.Series.__add__", "body": "<p>Not 100% sure I follow, but are you just trying to override the <code>__add__</code> method?   Excluding the <a href=\"https://pandas.pydata.org/pandas-docs/stable/internals.html#subclassing-pandas-data-structures\" rel=\"nofollow noreferrer\">other stuff</a> you need to do to properly subclass pandas objects, roughly:</p>\n\n<pre><code>class PiR2Series(pd.Series):\n\n    def __init__(self, *args, **kwargs):\n        super(PiR2Series, self).__init__(*args, **kwargs)\n\n\n    def __add__(self, other):\n        return self.add(other, fill_value=0)\n</code></pre>\n\n<p>Then you can do:</p>\n\n<pre><code>s1 = PiR2Series([1, 2], name='A')\ns2 = PiR2Series([1], name='A')\n\ns1 + s2\n\n0    2.0\n1    2.0\nName: A, dtype: float64\n</code></pre>\n\n<p>Disclaimer: I haven't really done much subclassing of pandas objects, so I can't guarantee that the above is the proper thing to do.</p>\n"}], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 1, "accepted_answer_id": 45849287, "answer_count": 2, "score": 3, "last_activity_date": 1503524365, "creation_date": 1503519671, "last_edit_date": 1503524365, "question_id": 45848656, "link": "https://stackoverflow.com/questions/45848656/how-do-i-fill-null-values-while-using-pd-series-add", "title": "How do I fill null values while using pd.Series.__add__", "body": "<p>Consider the two series <code>s1</code> and <code>s2</code></p>\n\n<pre><code>s1 = pd.Series([1, 2], name='A')\ns2 = pd.Series([1], name='A')\n</code></pre>\n\n<p>When I add them</p>\n\n<pre><code>s1 + s2\n\n0    2.0\n1    NaN\nName: A, dtype: float64\n</code></pre>\n\n<p>I get <code>NaN</code> for index <code>1</code><br>\nInstead I could do</p>\n\n<pre><code>s1.add(s2, fill_value=0)\n\n0    2.0\n1    2.0\nName: A, dtype: float64\n</code></pre>\n\n<p>However, I can't use <code>add</code>, I need to use <code>__add__</code>.  The problem is <code>pd.Series.__add__</code> doesn't have a <code>fill_value</code> parameter.</p>\n\n<hr>\n\n<p><strong>Context</strong><br>\nSo you understand why <code>__add__</code> is important to me</p>\n\n<p>What I'm trying to do is subclass <code>pd.Series</code> and I want to add two members of my subclass with a plus sign <code>+</code> and have the default be to fill the missing values with <code>0</code>.  In order to use the <code>+</code> I have to define <code>__add__</code> in my subclass.  But I'd like to be able to leverage <code>pd.Series.__add__</code> and pass the appropriate parameter and value.  But as I've said, <code>pd.Series.__add__</code> doesn't have the <code>fill_value</code> parameter.  </p>\n\n<p>In contrast <code>pd.DataFrame.__add__</code> does have <code>fill_value</code></p>\n\n<hr>\n\n<p><strong>What I've Tried</strong><br>\nThere is a <code>na_op</code> parameter that I suspect I can pass something to.  But I have no idea what.</p>\n\n<pre><code>s1.__add__(s2, na_op=0)\n\n0    2.0\n1    NaN\nName: A, dtype: float64\n</code></pre>\n\n<p>This is not what I want.  To be clear, I need to use <code>s1.__add__(s2, **kwargs)</code> where <code>kwargs</code> contains a keyword argument that will get me </p>\n\n<pre><code>0    2.0\n1    2.0\nName: A, dtype: float64\n</code></pre>\n\n<hr>\n\n<p>This is the subclass code I've put together.  Hopefully it helps highlight what I'm trying to do.</p>\n\n<pre><code>import pandas as pd, numpy as np\n\nclass SubDataFrame(pd.Series):\n\n    _metadata = ['date']\n\n    @property\n    def _constructor(self):\n        return SubDataFrame\n\n    def __init__(self, *args, **kwargs):\n        self.date = pd.to_datetime(kwargs.pop('date', pd.datetime.now().date()))\n        super().__init__(*args, **kwargs)\n\n    def __add__(self, other, *args, **kwargs):\n#         kwargs.setdefault('fill_value', 0);\n        return super().__add__(other, *args, **kwargs)\n</code></pre>\n"}, {"tags": ["python", "html", "templates", "flask", "jinja2"], "comments": [{"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503519810, "post_id": 45848646, "comment_id": 78655526, "body": "You can use the python code in the html according to the specification of the templating engine you are using. I was replying to your second question , like if you use a templating engine you can use python code in it like <code>{{ if case : print(&#39;hello&#39;)}}</code>"}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 2, "creation_date": 1503520268, "post_id": 45848646, "comment_id": 78655753, "body": "One thing you could do is pass a list and iterate it over in your template."}, {"owner": {"reputation": 27, "user_id": 6580828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75889e3371092c0f0d53bbdcd39ab0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Julia", "link": "https://stackoverflow.com/users/6580828/julia"}, "reply_to_user": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503520315, "post_id": 45848646, "comment_id": 78655780, "body": "Ah, yes,, I currently do that. I will pass in some variable on the python side: div_var for example. And then on my template, I will have {{ div_var}}. What I was asking is what do I do when I want to pass in any where from 0-4 variables? I am unsure how to configure that on both the python and the HTML side."}, {"owner": {"reputation": 27, "user_id": 6580828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75889e3371092c0f0d53bbdcd39ab0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Julia", "link": "https://stackoverflow.com/users/6580828/julia"}, "reply_to_user": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503520343, "post_id": 45848646, "comment_id": 78655791, "body": "Oh, that could work.."}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 2, "creation_date": 1503520471, "post_id": 45848646, "comment_id": 78655851, "body": "Write the code and if that works out please add that as an answer or if it doesn&#39;t post it above and we will work it out ."}, {"owner": {"reputation": 1447, "user_id": 4959049, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-JlV3RGer6IA/AAAAAAAAAAI/AAAAAAAAAB4/NN6cptdCi80/photo.jpg?sz=128", "display_name": "Robert Moore", "link": "https://stackoverflow.com/users/4959049/robert-moore"}, "edited": false, "score": 0, "creation_date": 1503522625, "post_id": 45848646, "comment_id": 78656829, "body": "something like <code>render_template(&quot;index.html&quot;, **other_args)</code> where <code>other_args</code> is a dictionary where all the necessary variables are put in (you should know server-side how many to put in, right?) This leverages <code>**kwargs</code> that are used in the <code>render_template</code> function."}, {"owner": {"reputation": 27, "user_id": 6580828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75889e3371092c0f0d53bbdcd39ab0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Julia", "link": "https://stackoverflow.com/users/6580828/julia"}, "reply_to_user": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503602004, "post_id": 45848646, "comment_id": 78697426, "body": "@0decimal0 , well, I tried out the list idea and it is not going very well. I updated the question in case you wanted to see what the problem is like now."}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503602451, "post_id": 45848646, "comment_id": 78697650, "body": "Need an explanation <code>alert(&quot;{{div|safe}}&quot;);</code> why are you using <code>|</code> here and what is <code>safe</code>? And try not using variable name same as the <code>html</code> tag at least for the sake of readability . By the way your app page is unreadable to me not to mention I don&#39;t know what it is about ."}, {"owner": {"reputation": 27, "user_id": 6580828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75889e3371092c0f0d53bbdcd39ab0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Julia", "link": "https://stackoverflow.com/users/6580828/julia"}, "reply_to_user": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503687576, "post_id": 45848646, "comment_id": 78735210, "body": "@0decimal0, it is a flask filter that says the input is safe html."}, {"owner": {"reputation": 3639, "user_id": 1513753, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/S45L5.jpg?s=128&g=1", "display_name": "0decimal0", "link": "https://stackoverflow.com/users/1513753/0decimal0"}, "edited": false, "score": 0, "creation_date": 1503694333, "post_id": 45848646, "comment_id": 78737981, "body": "@Julia Ok yeah got it! Not very familiar with jinja2 . By the way , I guess then it must be your problem of <code>html_list</code> , how it is created and what values it has"}], "owner": {"reputation": 27, "user_id": 6580828, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75889e3371092c0f0d53bbdcd39ab0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Julia", "link": "https://stackoverflow.com/users/6580828/julia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "closed_date": 1532529330, "answer_count": 0, "score": 1, "last_activity_date": 1503687594, "creation_date": 1503519643, "last_edit_date": 1503687594, "question_id": 45848646, "link": "https://stackoverflow.com/questions/45848646/passing-in-variable-template-inputs-for-render-template-flask", "closed_reason": "Duplicate", "title": "Passing in variable template inputs for render_template() (Flask)", "body": "<p>I am using Flask to create a data analytics application essentially. Part of creating this application is to be able to control the number of graphs they can view per page. This involves me to pass in a changing number of template inputs when I render the HTML page. One time there might only be one input variable for one graph and the next, there could be four. How could I do this without hard coding it in? </p>\n\n<p>In addition to what I should do on the python side, how would I configure my HTML template to accept a variable amount of inputs?</p>\n\n<p>EDIT: So I tried the idea of passing in lists. The two lists I passed in were a list of html components and text components. Below is my code. It is not working, for some reason the javascript function I wrote literally gets printed up when I run this. I am using plotly to generate graphs, it will simply give back a bunch of HTML that you can stick in, and I used to have to do Markup(\"the html i got given by plotly) but now the graphs are displaying the phrase \"Markup(\" is getting printed. </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;GE Data Analytics&lt;/title&gt;\n    &lt;link rel = \"shortcut icon\" type=\"image/png\" href = \"/static/general_electric.png\"&gt;\n    &lt;link href=\"https://fonts.googleapis.com/css?family=Open+Sans\" rel=\"stylesheet\"&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"/static/analytics_page.css\"&gt;\n&lt;/head&gt;\n&lt;script src=\"https://cdn.plot.ly/plotly-latest.min.js\"&gt;&lt;/script&gt;\n&lt;body&gt;\n&lt;div id = \"header\"&gt;\n&lt;div id = \"title\"&gt;\n    &lt;img src= \"/static/GE_Logo.jpg\" width=\"50px\" height = \"50px\"&gt;\n&lt;/div&gt;\n&lt;div id = \"titlename\"&gt;\n    &lt;h1&gt;GE Digital Mammography QC Data Analytics&lt;/h1&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id = \"divider\"&gt;\n    &lt;hr class=\"gradient_line\"&gt;&lt;/hr&gt;\n&lt;/div&gt;\n\n&lt;div id=\"graph\"&gt;\n&lt;/div&gt;\n\n&lt;p&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;b&gt; Analysis: &lt;/b&gt; &lt;/p&gt;\n&lt;div id = \"analysis\"&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;script&gt;\n    function createDashboard(){\n        alert(\"{{div|safe}}\");\n        alert(\"{{content}}\");\n        alert(\"stuff seems okay\");\n        graphs = \"{{div|safe}}\";\n        summaries = \"{{content}}\";\n        alert(graphs.length);\n        alert(summaries.length);\n        graph = document.getElementById('graph');\n        summary = document.getElementById('analysis');\n        for(var i = 0; i &lt; graphs.length;i++){\n            var div1 = document.createElement('div');\n            div1.setAttribute(\"id\",\"new-div\");\n            div1.innerHTML = graphs[i];\n            graph.appendChild(div1);\n            for (line in summaries[i]){\n                var para = document.createElement('p');\n                var node = document.createTextNode(summaries[i]);\n                para.appendChild(node);\n                summary.appendChild(para);\n            }\n        }\n    }\n     window.onload = function(){\n        createDashboard();\n    };\n\n&lt;/script&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>python render: </p>\n\n<pre><code>return render_template('analytics_page.html', div=html_list, content=summary_list)\n</code></pre>\n\n<p>What the application looks like: <a href=\"https://i.stack.imgur.com/gh0Uk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gh0Uk.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "arrays", "conditional"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1503519597, "post_id": 45848612, "comment_id": 78655431, "body": "What is <code>#...</code> supposed to do. Do you want to call a code fragment for every element?"}, {"owner": {"reputation": 726, "user_id": 8412643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08d3f1d9aecce587f6b36cdf4cc2324?s=128&d=identicon&r=PG&f=1", "display_name": "Cuber", "link": "https://stackoverflow.com/users/8412643/cuber"}, "edited": false, "score": 0, "creation_date": 1503519602, "post_id": 45848612, "comment_id": 78655436, "body": "List comprehension would work here depending on what you want to do"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1503519682, "post_id": 45848612, "comment_id": 78655469, "body": "Do you have a <i>list</i> or an <i>array</i>?"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1503519711, "post_id": 45848612, "comment_id": 78655486, "body": "What is the type of <code>a</code>? Python array or numpy array?"}, {"owner": {"reputation": 101, "user_id": 4971799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d75ad192ce1b648b284dcf14eef092?s=128&d=identicon&r=PG&f=1", "display_name": "Juanig", "link": "https://stackoverflow.com/users/4971799/juanig"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1503519719, "post_id": 45848612, "comment_id": 78655491, "body": "@WillemVanOnsem for example, if an element if bigger than 1, then assign 1 to that element, for every element"}, {"owner": {"reputation": 101, "user_id": 4971799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d75ad192ce1b648b284dcf14eef092?s=128&d=identicon&r=PG&f=1", "display_name": "Juanig", "link": "https://stackoverflow.com/users/4971799/juanig"}, "edited": false, "score": 0, "creation_date": 1503519778, "post_id": 45848612, "comment_id": 78655515, "body": "Edit: is a ndarray of integers"}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1503519866, "post_id": 45848612, "comment_id": 78655550, "body": "@JuanIgnacio Ah, so it&#39;s a Numpy array?"}, {"owner": {"reputation": 101, "user_id": 4971799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d75ad192ce1b648b284dcf14eef092?s=128&d=identicon&r=PG&f=1", "display_name": "Juanig", "link": "https://stackoverflow.com/users/4971799/juanig"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1503519952, "post_id": 45848612, "comment_id": 78655595, "body": "@ChristianDean yes, I made an edit because my question wasnt clear enough"}, {"owner": {"reputation": 15106, "user_id": 2573061, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t8eGV.jpg?s=128&g=1", "display_name": "C8H10N4O2", "link": "https://stackoverflow.com/users/2573061/c8h10n4o2"}, "edited": false, "score": 0, "creation_date": 1503520636, "post_id": 45848612, "comment_id": 78655938, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3409255/how-do-i-do-conditional-array-arithmetic-on-a-numpy-array\">How do I do conditional array arithmetic on a numpy array?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7104, "user_id": 1612701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cdF23.jpg?s=128&g=1", "display_name": "Cody Piersall", "link": "https://stackoverflow.com/users/1612701/cody-piersall"}, "edited": false, "score": 0, "creation_date": 1503520248, "post_id": 45848638, "comment_id": 78655740, "body": "Hmmm... I don&#39;t think this actually does what the OP is asking.  Looks like the OP wants to do an operation on each element of an array, not check for the truthiness of everything.  The OP either needs to do list comprehensions with conditionals or vectorized numpy operations."}, {"owner": {"reputation": 7104, "user_id": 1612701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cdF23.jpg?s=128&g=1", "display_name": "Cody Piersall", "link": "https://stackoverflow.com/users/1612701/cody-piersall"}, "edited": false, "score": 0, "creation_date": 1503520726, "post_id": 45848638, "comment_id": 78655967, "body": "Nice use of the ternary in the list comp!  +1, even though at first it was hard for me to read because my brain expects the <code>if</code> to come later."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 7104, "user_id": 1612701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cdF23.jpg?s=128&g=1", "display_name": "Cody Piersall", "link": "https://stackoverflow.com/users/1612701/cody-piersall"}, "edited": false, "score": 0, "creation_date": 1503520797, "post_id": 45848638, "comment_id": 78655988, "body": "@CodyPiersall Thanks. But now that the OP has update their question, your solution is clearly the better one! You have my up-vote."}, {"owner": {"reputation": 101, "user_id": 4971799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d75ad192ce1b648b284dcf14eef092?s=128&d=identicon&r=PG&f=1", "display_name": "Juanig", "link": "https://stackoverflow.com/users/4971799/juanig"}, "edited": false, "score": 0, "creation_date": 1503520946, "post_id": 45848638, "comment_id": 78656060, "body": "@ChristianDean Thanks for answering anyways, I realised my question wasnt clear enough"}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 101, "user_id": 4971799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d75ad192ce1b648b284dcf14eef092?s=128&d=identicon&r=PG&f=1", "display_name": "Juanig", "link": "https://stackoverflow.com/users/4971799/juanig"}, "edited": false, "score": 0, "creation_date": 1503521502, "post_id": 45848638, "comment_id": 78656332, "body": "Glad to help out, @Juan."}], "tags": [], "owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "is_accepted": true, "score": 12, "last_activity_date": 1503520927, "last_edit_date": 1503520927, "creation_date": 1503519620, "answer_id": 45848638, "question_id": 45848612, "link": "https://stackoverflow.com/questions/45848612/python-how-to-use-conditional-statements-on-every-element-of-array-using-s/45848638#45848638", "title": "(Python) How to use conditional statements on every element of array using [:] syntax?", "body": "<p>You can use the <a href=\"https://docs.python.org/3/library/functions.html?highlight=all#all\" rel=\"noreferrer\"><code>all</code></a> builtin function to accomplish what your asking:</p>\n\n<pre><code>all(i == 0 for i in a)\n</code></pre>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>&gt;&gt;&gt; a = [1, 0, 0, 2, 3, 0]\n&gt;&gt;&gt; all(i == 0 for i in a)\nFalse\n</code></pre>\n\n<p>Note however that behinds the scenes, <code>all</code> still uses a for loop. <a href=\"https://github.com/python/cpython/blob/master/Python/bltinmodule.c#L283\" rel=\"noreferrer\">It's just implemented in C</a>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>for (;;) {\n    item = iternext(it);\n    if (item == NULL)\n        break;\n    cmp = PyObject_IsTrue(item);\n    Py_DECREF(item);\n    if (cmp &lt; 0) {\n        Py_DECREF(it);\n        return NULL;\n    }\n    if (cmp == 0) {\n        Py_DECREF(it);\n        Py_RETURN_FALSE;\n    }\n</code></pre>\n\n<p><strong>EDIT</strong>: Given your most recent edits, what you probably want instead is to use a list comprehension with the ternary operator:</p>\n\n<pre><code>[1 if  i == 0 else i for i in a]\n</code></pre>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>&gt;&gt;&gt; a = [1, 0, 0, 2, 3, 0]\n&gt;&gt;&gt; [1 if  i == 0 else i for i in a]\n[1, 1, 1, 2, 3, 1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2600, "user_id": 6914989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fm2Ar.png?s=128&g=1", "display_name": "FabienP", "link": "https://stackoverflow.com/users/6914989/fabienp"}, "is_accepted": false, "score": 5, "last_activity_date": 1503522184, "last_edit_date": 1503522184, "creation_date": 1503520073, "answer_id": 45848748, "question_id": 45848612, "link": "https://stackoverflow.com/questions/45848612/python-how-to-use-conditional-statements-on-every-element-of-array-using-s/45848748#45848748", "title": "(Python) How to use conditional statements on every element of array using [:] syntax?", "body": "<p>For testing a condition on every element of a numpy.ndarray <strong>at once</strong>, as the title could suggest:</p>\n\n<p>use numpy's <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.all.html\" rel=\"nofollow noreferrer\"><code>np.all</code></a> for that:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>if np.all(a == 0):\n    # ...\n</code></pre>\n\n<p>Despite it is not lazy, <code>np.all</code> is vectorized and very fast</p>\n\n<pre class=\"lang-python prettyprint-override\"><code># arrays of zeros\n\n&gt;&gt;&gt; a = np.zeros((1000000))\n&gt;&gt;&gt; %timeit np.all(a == 0)                    # vectorized, very fast \n10000 loops, best of 3: 34.5 \u00b5s per loop\n\n&gt;&gt;&gt;%timeit all(i == 0 for i in a)             # not vectorized...\n100 loops, best of 3: 19.3 ms per loop\n\n\n# arrays of non-zeros\n\n&gt;&gt;&gt; b = np.ones((1000000))\n&gt;&gt;&gt; %timeit np.all(b == 0)                    # not lazy, iterates through all array\n1000 loops, best of 3: 498 \u00b5s per loop\n\n&gt;&gt;&gt; %timeit all(i == 0 for i in b)            # lazy, return false at first 1\n1000000 loops, best of 3: 561 ns per loop\n\n\n# n-D arrays of zeros\n\n&gt;&gt;&gt; c = a.reshape((100, 1000))                # 2D array\n&gt;&gt;&gt; %timeit np.all(c == 0)\n10000 loops, best of 3: 34.7 \u00b5s per loop      # works on n-dim arrays\n\n&gt;&gt;&gt; %timeit all(i == 0 for i in c)            # wors for a 1D arrays only\n...\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n\n<hr>\n\n<p>For testing a condition on every element of a numpy.ndarray <strong>iteratively</strong>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>for i in range(n):\n    if a[i] == 0:\n        a[i] = 1  \n</code></pre>\n\n<p>can be replaced by <code>np.where</code></p>\n\n<pre class=\"lang-python prettyprint-override\"><code>a = np.where(a == 0, 1, a)  # set value '1' where condition is met\n</code></pre>\n\n<hr>\n\n<p>EDIT: precisions according to the OP's comments</p>\n"}, {"tags": [], "owner": {"reputation": 1148, "user_id": 4523141, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-GaL0Q0mpmPc/AAAAAAAAAAI/AAAAAAAAALo/iHNikl9s92I/photo.jpg?sz=128", "display_name": "Sergey Belash", "link": "https://stackoverflow.com/users/4523141/sergey-belash"}, "is_accepted": false, "score": 2, "last_activity_date": 1503520209, "creation_date": 1503520209, "answer_id": 45848772, "question_id": 45848612, "link": "https://stackoverflow.com/questions/45848612/python-how-to-use-conditional-statements-on-every-element-of-array-using-s/45848772#45848772", "title": "(Python) How to use conditional statements on every element of array using [:] syntax?", "body": "<p>if you need not just check, but map all 0 --> 1, use <code>map</code>:</p>\n\n<pre><code>map(lambda x: 1 if x==0 else x, a)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15106, "user_id": 2573061, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t8eGV.jpg?s=128&g=1", "display_name": "C8H10N4O2", "link": "https://stackoverflow.com/users/2573061/c8h10n4o2"}, "edited": false, "score": 3, "creation_date": 1503520412, "post_id": 45848809, "comment_id": 78655824, "body": "this is the logical answer except it should be <code>a[a == 0] = 1</code>.  All the other answers are unnecessarily complicated."}, {"owner": {"reputation": 7104, "user_id": 1612701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cdF23.jpg?s=128&g=1", "display_name": "Cody Piersall", "link": "https://stackoverflow.com/users/1612701/cody-piersall"}, "reply_to_user": {"reputation": 15106, "user_id": 2573061, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t8eGV.jpg?s=128&g=1", "display_name": "C8H10N4O2", "link": "https://stackoverflow.com/users/2573061/c8h10n4o2"}, "edited": false, "score": 0, "creation_date": 1503520487, "post_id": 45848809, "comment_id": 78655858, "body": "@C8H10N4O2 You&#39;re right according to the original question, but I was basing this example off of a comment by the OP on the OP&#39;s question."}, {"owner": {"reputation": 15106, "user_id": 2573061, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t8eGV.jpg?s=128&g=1", "display_name": "C8H10N4O2", "link": "https://stackoverflow.com/users/2573061/c8h10n4o2"}, "edited": false, "score": 0, "creation_date": 1503520554, "post_id": 45848809, "comment_id": 78655889, "body": "OK I see that now.  This has to be a dupe."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 15106, "user_id": 2573061, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t8eGV.jpg?s=128&g=1", "display_name": "C8H10N4O2", "link": "https://stackoverflow.com/users/2573061/c8h10n4o2"}, "edited": false, "score": 0, "creation_date": 1503520708, "post_id": 45848809, "comment_id": 78655964, "body": "@C8H10N4O2 Well to be fair, the OP has edited their question quite extensively. When my answer and several others were posted, it was not clear that the OP was using NumPy, or even what they really wanted. See the <a href=\"https://stackoverflow.com/revisions/45848612/1\">edit history</a>."}, {"owner": {"reputation": 101, "user_id": 4971799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d75ad192ce1b648b284dcf14eef092?s=128&d=identicon&r=PG&f=1", "display_name": "Juanig", "link": "https://stackoverflow.com/users/4971799/juanig"}, "edited": false, "score": 1, "creation_date": 1503530848, "post_id": 45848809, "comment_id": 78659628, "body": "You can see I am a newbie at this, I thought my question was clear enough, and it didnt matter what was done inside the &quot;if&quot; statement, or if I used a NumPy array"}, {"owner": {"reputation": 1148, "user_id": 4523141, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-GaL0Q0mpmPc/AAAAAAAAAAI/AAAAAAAAALo/iHNikl9s92I/photo.jpg?sz=128", "display_name": "Sergey Belash", "link": "https://stackoverflow.com/users/4523141/sergey-belash"}, "reply_to_user": {"reputation": 101, "user_id": 4971799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d75ad192ce1b648b284dcf14eef092?s=128&d=identicon&r=PG&f=1", "display_name": "Juanig", "link": "https://stackoverflow.com/users/4971799/juanig"}, "edited": false, "score": 0, "creation_date": 1503556713, "post_id": 45848809, "comment_id": 78666867, "body": "@Juanig what does matter is what you want to achieve. Is it result of test if your array consists only zeros, or you want to map all zeros to ones; moreover it really does matter what kind of data sructure do you use: is it python list or numpy array"}, {"owner": {"reputation": 7104, "user_id": 1612701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cdF23.jpg?s=128&g=1", "display_name": "Cody Piersall", "link": "https://stackoverflow.com/users/1612701/cody-piersall"}, "reply_to_user": {"reputation": 101, "user_id": 4971799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d75ad192ce1b648b284dcf14eef092?s=128&d=identicon&r=PG&f=1", "display_name": "Juanig", "link": "https://stackoverflow.com/users/4971799/juanig"}, "edited": false, "score": 0, "creation_date": 1503592446, "post_id": 45848809, "comment_id": 78692138, "body": "No problem @Juanig, you gotta start somewhere.  For the record, if you are using numpy arrays, my answer is the recommended way to do it.  If you are using normal lists, the last part of Christian&#39;s answer is the way to go.  Numpy arrays are generally much, much faster than using lists.  <i>Much</i> faster.  And the code is usually more readable too."}], "tags": [], "owner": {"reputation": 7104, "user_id": 1612701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cdF23.jpg?s=128&g=1", "display_name": "Cody Piersall", "link": "https://stackoverflow.com/users/1612701/cody-piersall"}, "is_accepted": false, "score": 4, "last_activity_date": 1503592497, "last_edit_date": 1503592497, "creation_date": 1503520367, "answer_id": 45848809, "question_id": 45848612, "link": "https://stackoverflow.com/questions/45848612/python-how-to-use-conditional-statements-on-every-element-of-array-using-s/45848809#45848809", "title": "(Python) How to use conditional statements on every element of array using [:] syntax?", "body": "<p>Assuming <code>a</code> is your array, and you want to change values of <code>a</code> that are greater than 1 to be equal to 1:</p>\n\n<pre><code>a[a &gt; 1] = 1\n</code></pre>\n\n<p>This works because the expression <code>a &gt; 1</code> creates a <a href=\"https://docs.scipy.org/doc/numpy/user/basics.indexing.html#boolean-or-mask-index-arrays\" rel=\"nofollow noreferrer\">mask array</a>, and when a mask array is used as an index (which it is here), the operation only applies on the <code>True</code> indices.</p>\n"}], "owner": {"reputation": 101, "user_id": 4971799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d75ad192ce1b648b284dcf14eef092?s=128&d=identicon&r=PG&f=1", "display_name": "Juanig", "link": "https://stackoverflow.com/users/4971799/juanig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36446, "favorite_count": 0, "accepted_answer_id": 45848638, "answer_count": 4, "score": 5, "last_activity_date": 1503592497, "creation_date": 1503519517, "last_edit_date": 1503519909, "question_id": 45848612, "link": "https://stackoverflow.com/questions/45848612/python-how-to-use-conditional-statements-on-every-element-of-array-using-s", "title": "(Python) How to use conditional statements on every element of array using [:] syntax?", "body": "<p>If i need to ask a condition on every element of a numpy.ndarray of integers, do I have to use a for loop</p>\n\n<pre><code>for i in range(n):\n    if a[i] == 0:\n        a[i] = 1   \n</code></pre>\n\n<p>or can I ask the question using [:] syntax</p>\n\n<pre><code>if a[:] == 0:\n    #...\n</code></pre>\n\n<p>I know the previous is wrong, but is there any way of doing something similar?</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 11905, "user_id": 2897372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e114bd942d7cc21603ae50d2e73d81?s=128&d=identicon&r=PG", "display_name": "B\u0142otosm\u0119tek", "link": "https://stackoverflow.com/users/2897372/b%c5%82otosm%c4%99tek"}, "edited": false, "score": 1, "creation_date": 1503519611, "post_id": 45848589, "comment_id": 78655439, "body": "Unless I&#39;m missing something (it has been a long day), <code>[file for file in files]</code> is just a copy of <code>files</code>. I guess you meant <code>any([lookfor in file for file in files])</code> or possibly <code>[file for file in files if lookfor in file]</code>."}, {"owner": {"reputation": 3, "user_id": 8394754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a94877aeffa856c4fdd71f82118486?s=128&d=identicon&r=PG&f=1", "display_name": "Zander", "link": "https://stackoverflow.com/users/8394754/zander"}, "edited": false, "score": 0, "creation_date": 1503519959, "post_id": 45848589, "comment_id": 78655600, "body": "AK that got it there, but now it found something ahead of what I was looking for.  Is there a way to set it up to step through until I find the location I am looking for."}, {"owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 0, "creation_date": 1503520068, "post_id": 45848589, "comment_id": 78655658, "body": "You could change your list comprehension to a regular for loop and then do something like for file in files: if lookfor in file: print(&#39;Found %s&#39;: % join(root, file); break"}, {"owner": {"reputation": 3, "user_id": 8394754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a94877aeffa856c4fdd71f82118486?s=128&d=identicon&r=PG&f=1", "display_name": "Zander", "link": "https://stackoverflow.com/users/8394754/zander"}, "edited": false, "score": 0, "creation_date": 1503521919, "post_id": 45848589, "comment_id": 78656512, "body": "Odly now it will not locate anything on my desktop but it will look inside folders on the desktop to locate things."}], "tags": [], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "is_accepted": true, "score": 0, "last_activity_date": 1503519729, "last_edit_date": 1503519729, "creation_date": 1503519394, "answer_id": 45848589, "question_id": 45848499, "link": "https://stackoverflow.com/questions/45848499/searching-for-items-on-the-hardrive-with-a-phrase/45848589#45848589", "title": "Searching for items on the hardrive with a phrase.", "body": "<p>The problem is that <code>os.walk()</code> is returning a list of files and you're searching for a string within that list of files</p>\n\n<pre><code>files = ['Current1.jpg', 'Current2.jpg', 'Current3.jpg']\n</code></pre>\n\n<p>If you search this list for 'Curr' it wont be found</p>\n\n<pre><code>&gt;&gt;&gt; 'Curr' in files\nFalse\n&gt;&gt;&gt; any(['Curr' in file for file in files])\nTrue\n</code></pre>\n\n<p>Try change the code to </p>\n\n<pre><code>import os\nfrom os.path import join\n\nlookfor = 'Curr'\nfor root, dirs, files in os.walk('c:\\\\'):\n    if any([lookfor in file for file in files]):\n        print ('Found: %s' %join(root, lookfor))\n        break\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8394754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a94877aeffa856c4fdd71f82118486?s=128&d=identicon&r=PG&f=1", "display_name": "Zander", "link": "https://stackoverflow.com/users/8394754/zander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 45848589, "answer_count": 1, "score": 0, "last_activity_date": 1503519729, "creation_date": 1503519018, "question_id": 45848499, "link": "https://stackoverflow.com/questions/45848499/searching-for-items-on-the-hardrive-with-a-phrase", "title": "Searching for items on the hardrive with a phrase.", "body": "<p>Im trying to set up a program on where there is something entered in will search the hard drive (c:\\) for it in windows.  I got the code below entered but it takes the full path in the lookfor variable.  Im trying to figure out how can I set it up if I got a few letters matching to stop on them.  For example if I put Curr in the lookfor variable I would like it to find Current1.png, but instead I need to enter the full length items (Current1.png) to locate it. </p>\n\n<pre><code>import os\nfrom os.path import join\n\nlookfor = 'Current1.png'\nfor root, dirs, files in os.walk('c:\\\\'):\n#print ('Searching', root)\nif lookfor in files:\n    print ('Found: %s' %join(root, lookfor))\n    break\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 1357, "user_id": 3711832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35a04126d55ec917b0a5c8a461ec3585?s=128&d=identicon&r=PG&f=1", "display_name": "Skitzafreak", "link": "https://stackoverflow.com/users/3711832/skitzafreak"}, "edited": false, "score": 2, "creation_date": 1503518986, "post_id": 45848474, "comment_id": 78655138, "body": "Can you please provide a code example of what your problem is.  It is the best way for us to help you find a solution."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 1, "creation_date": 1503520164, "post_id": 45848474, "comment_id": 78655700, "body": "Welcome to StackOverflow! Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> of what you have tried so far. Your question is not detailed enough for us to accurately provide an answer."}], "answers": [{"comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1503520356, "post_id": 45848778, "comment_id": 78655802, "body": "I didn&#39;t even think about using <code>join()</code> that may be useful for other projects I have in mind :)"}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 1, "last_activity_date": 1503520229, "creation_date": 1503520229, "answer_id": 45848778, "question_id": 45848474, "link": "https://stackoverflow.com/questions/45848474/removing-curly-brackets-when-printing-list-in-label-using-tkinter-in-python/45848778#45848778", "title": "Removing curly brackets when printing list in label using tkinter in python", "body": "<p>You need to convert your list to a string. </p>\n\n<p>This illustrates the difference between implicit and explicit conversion to a string:</p>\n\n<pre><code>import tkinter as tk\n\ndata = [\"one\\ntwo\", \"three\\nfour\", \"five\\nsix\"]\n\nroot = tk.Tk()\n\nl1 = tk.Label(root, text=data)\nl2 = tk.Label(root, text=\" \".join(data))\n\nl1.pack(side=\"top\", fill=\"x\", padx=4, pady=4)\nl2.pack(side=\"top\", fill=\"x\", padx=4, pady=4)\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "is_accepted": false, "score": 0, "last_activity_date": 1503520724, "creation_date": 1503520724, "answer_id": 45848898, "question_id": 45848474, "link": "https://stackoverflow.com/questions/45848474/removing-curly-brackets-when-printing-list-in-label-using-tkinter-in-python/45848898#45848898", "title": "Removing curly brackets when printing list in label using tkinter in python", "body": "<p>Seeing that Bryan's example works with the entire list using <code>join()</code> I will provide an example for those that want to use some of their list but not all.</p>\n\n<p>We can accomplish this with the use of <code>format()</code>:</p>\n\n<pre><code>import tkinter as tk\n\nroot = tk.Tk()\n\ndata = [\"one\", \"two\", \"three\", \"four\"]\n\nl1 = tk.Label(root, text=\"{} {}\".format(data[0], data[2])).pack()\n\nroot.mainloop()\n</code></pre>\n\n<p>The results would be a window with the label of <code>one three</code> without the brackets like the below image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zcZyD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zcZyD.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 57, "user_id": 8508209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bef9e2d7edfddb0ddf5b0f2d84760929?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver Sinnassamy", "link": "https://stackoverflow.com/users/8508209/oliver-sinnassamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1298, "favorite_count": 1, "closed_date": 1503560210, "answer_count": 2, "score": -3, "last_activity_date": 1503837966, "creation_date": 1503518936, "last_edit_date": 1503837966, "question_id": 45848474, "link": "https://stackoverflow.com/questions/45848474/removing-curly-brackets-when-printing-list-in-label-using-tkinter-in-python", "closed_reason": "Needs details or clarity", "title": "Removing curly brackets when printing list in label using tkinter in python", "body": "<p>I'm printing a list as a label in a Tkinter window developed in python, however when I do, there are curly brackets at the beginnings of new lines. When I remove them, it merges all of the lines into one which is not what I need.</p>\n\n<p>Any help appreciated. Thanks</p>\n\n<p>Here is the section of code. The list contains the lines from an external file:</p>\n\n<pre><code>file = open(\"Males.txt\",\"r\")\n    read1=file.readlines()\n    male = \"Male\"\n\n    read1 = str(read1)\n\n    read1.strip(\"}\")\n    malereport = Label(top, text=read1)\n    malereport.pack()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/iNcCp.png\" rel=\"nofollow noreferrer\">Here's the result from printing</a></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1503518902, "post_id": 45848443, "comment_id": 78655099, "body": "Are you able to reproduce this with a smaller subset of data."}, {"owner": {"reputation": 559, "user_id": 8478550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blgG0.png?s=128&g=1", "display_name": "Vico", "link": "https://stackoverflow.com/users/8478550/vico"}, "edited": false, "score": 1, "creation_date": 1503519229, "post_id": 45848443, "comment_id": 78655245, "body": "Since we don&#39;t have a subset of the data, check out this post and see if it helps: <a href=\"https://stackoverflow.com/questions/35888189/drop-duplicate-in-multiindex-dataframe-in-pandas\" title=\"drop duplicate in multiindex dataframe in pandas\">stackoverflow.com/questions/35888189/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3583, "user_id": 5606352, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b334268d7a7805d0d4d4e406c79bbc2a?s=128&d=identicon&r=PG&f=1", "display_name": "abutremutante", "link": "https://stackoverflow.com/users/5606352/abutremutante"}, "edited": false, "score": 2, "creation_date": 1503533354, "post_id": 45849955, "comment_id": 78660215, "body": "The problem was the duplicate column names! Thanks for advising!"}], "tags": [], "owner": {"reputation": 375, "user_id": 7920168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b86c6e9698b75c9581bd2429f7003e6?s=128&d=identicon&r=PG", "display_name": "MisterJT", "link": "https://stackoverflow.com/users/7920168/misterjt"}, "is_accepted": true, "score": 2, "last_activity_date": 1503525765, "creation_date": 1503525765, "answer_id": 45849955, "question_id": 45848443, "link": "https://stackoverflow.com/questions/45848443/python-pandas-drop-duplicates-valueerror/45849955#45849955", "title": "Python / Pandas - drop_duplicates ValueError", "body": "<p>Without knowing more about the dataframe, I'm going to give some generic thoughts:\n - there was a known bug in pandas 0.18 (<a href=\"https://github.com/pandas-dev/pandas/issues/13393\" rel=\"nofollow noreferrer\">https://github.com/pandas-dev/pandas/issues/13393</a>) that caused a buffer value error with MultiIndexes that contained a datetime64 data type. Is one of your columns of this type?\n - Do any of your columns have duplicate names? I know this isn't supposed to happen but it does.\n - Do you need to look for duplicates across all columns, or will a subset of columns suffice? Try using the subset= option in the method call.</p>\n\n<p>The answer by Vico might be helpful, but with a very large dataframe, doing a transpose of both the initial dataframe and of the dataframe with dropped duplicates might be more resources than can be allocated.</p>\n"}, {"tags": [], "owner": {"reputation": 3135, "user_id": 7441757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d139faa2ede7b2b6109852cd418f67?s=128&d=identicon&r=PG&f=1", "display_name": "Roelant", "link": "https://stackoverflow.com/users/7441757/roelant"}, "is_accepted": false, "score": 1, "last_activity_date": 1541681429, "creation_date": 1541681429, "answer_id": 53208122, "question_id": 45848443, "link": "https://stackoverflow.com/questions/45848443/python-pandas-drop-duplicates-valueerror/53208122#53208122", "title": "Python / Pandas - drop_duplicates ValueError", "body": "<p>Another way to run into this issue (and end up at this question through google ;) ) is sparse columns... See the error below:</p>\n\n<pre><code>n = 10000\ndf = pd.DataFrame({'a': np.random.choice(n*2, n),\n          'b': np.random.choice(10, n),\n          'c': np.random.choice(4, n),\n          'd': np.random.choice(int(n/2), n),\n          'e': np.random.choice(int(n/100), n)})\ndf_dummies = pd.get_dummies(df, columns=['b', 'c'], sparse=True)\ndf_dummies.drop_duplicates()\n</code></pre>\n\n<p>The strange thing is that <code>df_dummies.to_dense()</code> won't solve your issue - recreating your dummies with <code>sparse=False</code> does. </p>\n\n<p>To check for duplicate columns (the problem suggested by the other answers), you can by the way use this snippet:</p>\n\n<pre><code>df.columns.duplicated()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 979, "user_id": 3571619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ae78011453eafa16652e6f1dd53681?s=128&d=identicon&r=PG&f=1", "display_name": "HassanSh__3571619", "link": "https://stackoverflow.com/users/3571619/hassansh-3571619"}, "edited": false, "score": 0, "creation_date": 1545181180, "post_id": 53843176, "comment_id": 94534487, "body": "Inspired partially by:  <a href=\"https://stackoverflow.com/questions/12497402/python-pandas-remove-duplicates-by-columns-a-keeping-the-row-with-the-highest\" title=\"python pandas remove duplicates by columns a keeping the row with the highest\">stackoverflow.com/questions/12497402/&hellip;</a>"}], "tags": [], "owner": {"reputation": 979, "user_id": 3571619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ae78011453eafa16652e6f1dd53681?s=128&d=identicon&r=PG&f=1", "display_name": "HassanSh__3571619", "link": "https://stackoverflow.com/users/3571619/hassansh-3571619"}, "is_accepted": false, "score": 0, "last_activity_date": 1545180829, "creation_date": 1545180829, "answer_id": 53843176, "question_id": 45848443, "link": "https://stackoverflow.com/questions/45848443/python-pandas-drop-duplicates-valueerror/53843176#53843176", "title": "Python / Pandas - drop_duplicates ValueError", "body": "<p>I faced the same issue with very large dataframe, then the issue solved by creating temporary column that concatenate all the key columns in one string then remove the duplicate based on that unique added column, then dropping off this temporarly column after finish removing the duplicate.</p>\n\n<pre><code>df['concatenated_all'] = df['col1'].astype(str)+'_'+df['col2'].astype(str)+'_'+df['col3'].astype(str)+'_'+df['col4'].astype(str)+'_'+df['coln'].astype(str)\n\ndf = df.drop_duplicates(subset='concatenated_all', keep=\"last\")\n\ndf = df.drop(['concatenated_all'], axis=1)\n</code></pre>\n"}], "owner": {"reputation": 3583, "user_id": 5606352, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b334268d7a7805d0d4d4e406c79bbc2a?s=128&d=identicon&r=PG&f=1", "display_name": "abutremutante", "link": "https://stackoverflow.com/users/5606352/abutremutante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1281, "favorite_count": 0, "accepted_answer_id": 45849955, "answer_count": 3, "score": 2, "last_activity_date": 1545180829, "creation_date": 1503518760, "last_edit_date": 1503533284, "question_id": 45848443, "link": "https://stackoverflow.com/questions/45848443/python-pandas-drop-duplicates-valueerror", "title": "Python / Pandas - drop_duplicates ValueError", "body": "<p>I have a very large dataframe. When I run: <code>df=df.drop_duplicates()</code> I get the following error:</p>\n\n<pre><code>ValueError: Buffer has wrong number of dimensions (expected 1, got 2)\n</code></pre>\n\n<p>If I run a <code>df.loc[:10].drop_duplicates()</code> it already bugs</p>\n\n<p>Does anyone know what can cause that?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The dataframe looks like this:</p>\n\n<pre><code>                                                  Razao_social  Razao_social  \\\nbusiness_id                                                                    \n\n17                                             MULTIGRAIN S.A.     Sao Paulo   \n17                                             MULTIGRAIN S.A.     Sao Paulo   \n17                                             MULTIGRAIN S.A.     Sao Paulo   \n17                                             MULTIGRAIN S.A.     Sao Paulo   \n17                                             MULTIGRAIN S.A.     Sao Paulo   \n17                                             MULTIGRAIN S.A.     Sao Paulo   \n38           BRASILAGRO - COMPANHIA BRASILEIRA DE PROPRIEDA...     Sao Paulo   \n38           BRASILAGRO - COMPANHIA BRASILEIRA DE PROPRIEDA...     Sao Paulo   \n71                                    SECURITAS GARANTIAS S.A.     Sao Paulo   \n71                                    SECURITAS GARANTIAS S.A.     Sao Paulo   \n71                                    SECURITAS GARANTIAS S.A.     Sao Paulo   \n71                                    SECURITAS GARANTIAS S.A.     Sao Paulo   \n</code></pre>\n"}, {"tags": ["python", "qt", "qml", "pyqt5"], "comments": [{"owner": {"reputation": 1218, "user_id": 5827010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e80aa4da59920d360f3aafdd3111d5?s=128&d=identicon&r=PG&f=1", "display_name": "9dogs", "link": "https://stackoverflow.com/users/5827010/9dogs"}, "edited": false, "score": 0, "creation_date": 1503520020, "post_id": 45848436, "comment_id": 78655633, "body": "I ran into this issue and the only way I know to avoid crash is to create <code>FileDialog</code> dynamically <a href=\"https://gist.github.com/9dogs/2496f92e4d851330ce714797e69ff8fc\" rel=\"nofollow noreferrer\">like this</a>. Would appreciate any ideas as well."}, {"owner": {"reputation": 11504, "user_id": 808727, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/53516b609a06bda23b00726a7a6eac22?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/808727/chris"}, "reply_to_user": {"reputation": 1218, "user_id": 5827010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e80aa4da59920d360f3aafdd3111d5?s=128&d=identicon&r=PG&f=1", "display_name": "9dogs", "link": "https://stackoverflow.com/users/5827010/9dogs"}, "edited": false, "score": 0, "creation_date": 1503756093, "post_id": 45848436, "comment_id": 78751245, "body": "Yah, that didn&#39;t help either, but this seems to have &#39;solved&#39; the problem: <a href=\"https://stackoverflow.com/a/21614295/808727\">stackoverflow.com/a/21614295/808727</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2459440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uYWtF.jpg?s=128&g=1", "display_name": "Timotei", "link": "https://stackoverflow.com/users/2459440/timotei"}, "is_accepted": false, "score": 0, "last_activity_date": 1521624212, "creation_date": 1521624212, "answer_id": 49402388, "question_id": 45848436, "link": "https://stackoverflow.com/questions/45848436/pyqt5-qml-minimal-example-crashes-on-exit/49402388#49402388", "title": "pyqt5 qml minimal example crashes on exit", "body": "<p>Before calling app.exec() you can add this line:</p>\n\n<pre><code>app.aboutToQuit.connect(lambda: app.closeAllWindows())\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/45848436/pyqt5-qml-minimal-example-crashes-on-exit#comment78751245_45848436\">Chris link</a> helped with this problem. There is no more application crash on exit.</p>\n"}, {"comments": [{"owner": {"reputation": 5107, "user_id": 1117028, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MZoEv.png?s=128&g=1", "display_name": "Tiger-222", "link": "https://stackoverflow.com/users/1117028/tiger-222"}, "edited": false, "score": 1, "creation_date": 1548519845, "post_id": 51762284, "comment_id": 95573914, "body": "Little reminder: <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>, if the answer is good for you :)"}], "tags": [], "owner": {"reputation": 5107, "user_id": 1117028, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MZoEv.png?s=128&g=1", "display_name": "Tiger-222", "link": "https://stackoverflow.com/users/1117028/tiger-222"}, "is_accepted": false, "score": 0, "last_activity_date": 1533803522, "creation_date": 1533803522, "answer_id": 51762284, "question_id": 45848436, "link": "https://stackoverflow.com/questions/45848436/pyqt5-qml-minimal-example-crashes-on-exit/51762284#51762284", "title": "pyqt5 qml minimal example crashes on exit", "body": "<p>I found out that the fix is simple, just pass the <code>parent</code> parameter to <code>QQmlApplicationEngine()</code>:</p>\n\n<pre><code>engine = QQmlApplicationEngine(parent=app)\n</code></pre>\n"}], "owner": {"reputation": 11504, "user_id": 808727, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/53516b609a06bda23b00726a7a6eac22?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/808727/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 524, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1533803522, "creation_date": 1503518717, "last_edit_date": 1503570182, "question_id": 45848436, "link": "https://stackoverflow.com/questions/45848436/pyqt5-qml-minimal-example-crashes-on-exit", "title": "pyqt5 qml minimal example crashes on exit", "body": "<p>I have this small example app that causes a crash.</p>\n\n<p>main.py</p>\n\n<pre><code>import sys\nfrom PyQt5.QtCore import QUrl\nfrom PyQt5.QtGui import QGuiApplication\nfrom PyQt5.QtQml import QQmlApplicationEngine\n\n\ndef run():\n    app = QGuiApplication(sys.argv)\n\n    engine = QQmlApplicationEngine()\n    engine.load(QUrl('main.qml'))\n\n    if not engine.rootObjects():\n        return -1\n\n    return app.exec_()\n\n\nif __name__ == '__main__':\nsys.exit(run())\n</code></pre>\n\n<p>main.qml</p>\n\n<pre><code>import QtQuick 2.7\nimport QtQuick.Controls 2.0\nimport QtQuick.Layouts 1.3\nimport QtQuick.Dialogs 1.2\n\nApplicationWindow {\n    visible: true\n    width: 640\n    height: 480\n    title: qsTr(\"Hello World\")\n\n    FileDialog {\n        id: fileDialog\n        selectFolder: true\n\n        onAccepted: {\n            console.log('activated')\n        }\n    }\n\n    Button {\n        anchors.centerIn: parent\n        text: \"Open\"\n        onClicked: {\n            fileDialog.open()\n        }\n    }\n}\n</code></pre>\n\n<p>To cause the crash, simply open the app, click the button, select a directory, accept and then close the app.</p>\n\n<p>The console shows a warning message:<br>\n<code>QObject::startTimer: Timers can only be used with threads started with QThread</code><br>\nand then the app just crashes. Any clues why or how to get an error message/stack trace?</p>\n\n<p>Env: Windows 10, python 3.6.1, PyQt5 5.9</p>\n"}, {"tags": ["python", "testing", "routes", "bottle"], "answers": [{"tags": [], "owner": {"reputation": 1111, "user_id": 3351605, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dc102fba6cd2c63297222e271082de2f?s=128&d=identicon&r=PG&f=1", "display_name": "user3351605", "link": "https://stackoverflow.com/users/3351605/user3351605"}, "is_accepted": false, "score": 0, "last_activity_date": 1503521528, "last_edit_date": 1592644375, "creation_date": 1503521528, "answer_id": 45849082, "question_id": 45848418, "link": "https://stackoverflow.com/questions/45848418/automated-testing-of-routes-using-python-bottle-framework/45849082#45849082", "title": "Automated testing of routes using Python Bottle framework", "body": "<p>Bottle's creator <a href=\"http://bottlepy.org/docs/dev/recipes.html#functional-testing-bottle-applications\" rel=\"nofollow noreferrer\">recommends</a> using <a href=\"http://webtest.pythonpaste.org/en/latest/\" rel=\"nofollow noreferrer\">WebTest</a>, which is a framework specifically designed for unit testing Python WSGI applications.</p>\n<p>Additionally, there is also <a href=\"https://github.com/keredson/boddle\" rel=\"nofollow noreferrer\">Boddle</a>, a testing tool specifically for Bottle. I have not used this software myself, so I cannot speak to how well it works, however, as of the time of this answer posting, it appears to be actively maintained.</p>\n<p>I recommend looking at one or both of those and just giving it a try. If you find yourself with further questions about how to properly integrate with one of them, post another question.</p>\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 1549, "user_id": 2304719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/TuPWA.jpg?s=128&g=1", "display_name": "Abbasov Alexander", "link": "https://stackoverflow.com/users/2304719/abbasov-alexander"}, "edited": false, "score": 0, "creation_date": 1510911529, "post_id": 45849552, "comment_id": 81646729, "body": "Do I have to running WSGI server in this case? Currently, I am using <code>unittest</code> + <code>bottle</code> without running WSGI server. I don&#39;t know how to get dynamic part of a route into a view."}, {"owner": {"reputation": 14447, "user_id": 593047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZTl2D.jpg?s=128&g=1", "display_name": "ron rothman", "link": "https://stackoverflow.com/users/593047/ron-rothman"}, "reply_to_user": {"reputation": 1549, "user_id": 2304719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/TuPWA.jpg?s=128&g=1", "display_name": "Abbasov Alexander", "link": "https://stackoverflow.com/users/2304719/abbasov-alexander"}, "edited": false, "score": 0, "creation_date": 1510929684, "post_id": 45849552, "comment_id": 81658441, "body": "No, you don&#39;t need a server. WebTest is in place of a server."}], "tags": [], "owner": {"reputation": 14447, "user_id": 593047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZTl2D.jpg?s=128&g=1", "display_name": "ron rothman", "link": "https://stackoverflow.com/users/593047/ron-rothman"}, "is_accepted": true, "score": 4, "last_activity_date": 1503523702, "creation_date": 1503523702, "answer_id": 45849552, "question_id": 45848418, "link": "https://stackoverflow.com/questions/45848418/automated-testing-of-routes-using-python-bottle-framework/45849552#45849552", "title": "Automated testing of routes using Python Bottle framework", "body": "<p>I recommend <a href=\"http://webtest.pythonpaste.org/en/latest/\" rel=\"nofollow noreferrer\">WebTest</a>; it's fully featured and very easy to use. Here's a complete working example that demonstrates a simple test:</p>\n\n<pre><code>from bottle import Bottle, response\nfrom webtest import TestApp\n\n# the real webapp\napp = Bottle()\n\n\n@app.route('/rest/&lt;name&gt;')\ndef root(name):\n    '''Simple example to demonstrate how to test Bottle routes'''\n    response.content_type = 'text/plain'\n    return ['you requested \"{}\"'.format(name)]\n\n\ndef test_root():\n    '''Test GET /'''\n\n    # wrap the real app in a TestApp object\n    test_app = TestApp(app)\n\n    # simulate a call (HTTP GET)\n    resp = test_app.get('/rest/roger')\n\n    # validate the response\n    assert resp.body == 'you requested \"roger\"'\n    assert resp.content_type == 'text/plain'\n\n\n# run the test\ntest_root()\n</code></pre>\n"}], "owner": {"reputation": 1223, "user_id": 2636544, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/GFapU.png?s=128&g=1", "display_name": "Wes", "link": "https://stackoverflow.com/users/2636544/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 45849552, "answer_count": 2, "score": 2, "last_activity_date": 1503596662, "creation_date": 1503518639, "last_edit_date": 1503596662, "question_id": 45848418, "link": "https://stackoverflow.com/questions/45848418/automated-testing-of-routes-using-python-bottle-framework", "title": "Automated testing of routes using Python Bottle framework", "body": "<p>I would like to build an automated way of testing all the routes in my Python/Bottle web application, as I currently have about 100 routes.  What is the best way to do this? </p>\n"}, {"tags": ["python", "opencv3.0"], "comments": [{"owner": {"reputation": 849, "user_id": 1885002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0db5b35211eb1c3987d9299ca4cbc5c?s=128&d=identicon&r=PG", "display_name": "King Thrushbeard", "link": "https://stackoverflow.com/users/1885002/king-thrushbeard"}, "edited": false, "score": 0, "creation_date": 1503518955, "post_id": 45848399, "comment_id": 78655122, "body": "Please point out the actual probem in more detail."}, {"owner": {"reputation": 1, "user_id": 6735945, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bCCx4umswEk/AAAAAAAAAAI/AAAAAAAALHo/srdq8cicsDM/photo.jpg?sz=128", "display_name": "Phil Smith", "link": "https://stackoverflow.com/users/6735945/phil-smith"}, "reply_to_user": {"reputation": 849, "user_id": 1885002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0db5b35211eb1c3987d9299ca4cbc5c?s=128&d=identicon&r=PG", "display_name": "King Thrushbeard", "link": "https://stackoverflow.com/users/1885002/king-thrushbeard"}, "edited": false, "score": 0, "creation_date": 1503589718, "post_id": 45848399, "comment_id": 78690398, "body": "pass in image name on command line.  The code properly runs through the first call to &quot;rotate&quot;, passes the path to the created file as text to &quot;crop&quot;, but the image file has not closed.  &quot;crop&quot; opens an empty file and gets error due to image having height and width of zero.  When the entire code completes the image is then closed.  How can I get the image to close at the end of &quot;rotate&quot;?"}], "owner": {"reputation": 1, "user_id": 6735945, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bCCx4umswEk/AAAAAAAAAAI/AAAAAAAALHo/srdq8cicsDM/photo.jpg?sz=128", "display_name": "Phil Smith", "link": "https://stackoverflow.com/users/6735945/phil-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503589605, "creation_date": 1503518555, "last_edit_date": 1503589605, "question_id": 45848399, "link": "https://stackoverflow.com/questions/45848399/python-opencv-executing-multiple-commandline-scripts-on-same-image-file", "title": "Python OpenCV - executing multiple commandline scripts on same image file", "body": "<p>Attempting to pass the path of saved imaged through stdout from one command line process to another.  Image doesn't close until entire script is complete. \"rotate\" saves to path1.rotated.png\n\"myCrop\" uses path1.rotated.png as input \"myCrop\" errors with empty image. everything works if I execute individually manually through command line</p>\n\n<pre><code>import glob\nimport os\nimport ntpath\nimport random\nimport sys\nimport random\nimport math\nimport json\nimport cv2\nimport subprocess\nimport re\nimport datetime as dt\nfrom collections import defaultdict\n\n\ndef rotate(fn):    \n#rotate    \n    try:\n        p = subprocess.run(['python','rotate.py','-i',fn], \n            stdout=subprocess.PIPE, stderr=subprocess.PIPE, bufsize=0)\n        fn = p.stdout.decode()\n        return p.stdout.decode()      \n    except:\n        print('could not rotate ',fn, p.stderr.decode())\n\n\ndef crop(fn):\n#crop   \n    fn = fn.replace('\\\\','\\\\\\\\') \n    try:\n        print(fn)        \n        print('cropping',fn)\n        p = subprocess.run(['python','myCrop.py','-i',fn], \n            stdout=subprocess.PIPE, stderr=subprocess.PIPE, bufsize=0) \n        fn = p.stdout.decode()\n        return p.stdout.decode()\n    except:\n        print('could not crop ',fn)\n\ndef process_image(o, f):\n    fn = o + \"\\\\\" + f\n    rotated = rotate(fn)\n    print(\"rotated as :\",rotated)\n    cropped = crop(rotated)\n    print(\"cropped as :\", cropped)\n\nif __name__ == '__main__':\n    fn = open(str(dt.datetime.now()).replace(\":\",\"-\") + '.results.txt','w')\n    if len(sys.argv) == 2 and '*' in sys.argv[1]:\n        files = glob.glob(sys.argv[1])\n        random.shuffle(files)\n    else:\n    files = sys.argv[1:]\n\nfor path in files:\n    #out_path = path.replace('.jpg', '.crop.png')\n    dirName  = os.path.dirname(path) # + '\\\\modified\\\\' \n    fileName = os.path.basename(path)\n    #fileName = fileName.replace('.png', '.modified.png') \n    #out_path = dirName + fileName # .png as input\n    #newImagePath = path.replace(\".png\", \".modified.png\")\n    #if os.path.exists(out_path): continue\n    try:\n        process_image(dirName,fileName)\n    except Exception as e:\n        print('%s %s' % (path, e))\n    fn.close()\n</code></pre>\n"}, {"tags": ["python", "function", "variables", "dry"], "comments": [{"owner": {"reputation": 726, "user_id": 8412643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08d3f1d9aecce587f6b36cdf4cc2324?s=128&d=identicon&r=PG&f=1", "display_name": "Cuber", "link": "https://stackoverflow.com/users/8412643/cuber"}, "edited": false, "score": 1, "creation_date": 1503518539, "post_id": 45848367, "comment_id": 78654938, "body": "You can try to store the arguments in some type of container. That might reduce the number of arguments that you enter each time. Not sure if that is what you&#39;re looking for though"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1503518564, "post_id": 45848367, "comment_id": 78654951, "body": "If you never use a <code>noteStore</code> without a <code>dev_token</code> (...naming convention?) and they have the same lifecycle then why not wrap them both into one object and pass <i>that</i> around? This isn&#39;t really specific to Python: <a href=\"https://refactoring.guru/smells/long-parameter-list\" rel=\"nofollow noreferrer\">refactoring.guru/smells/long-parameter-list</a>"}, {"owner": {"reputation": 1357, "user_id": 3711832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35a04126d55ec917b0a5c8a461ec3585?s=128&d=identicon&r=PG&f=1", "display_name": "Skitzafreak", "link": "https://stackoverflow.com/users/3711832/skitzafreak"}, "edited": false, "score": 0, "creation_date": 1503518820, "post_id": 45848367, "comment_id": 78655054, "body": "Can you give a better description of what your problem is and what you are trying to accomplish?"}, {"owner": {"reputation": 849, "user_id": 1885002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0db5b35211eb1c3987d9299ca4cbc5c?s=128&d=identicon&r=PG", "display_name": "King Thrushbeard", "link": "https://stackoverflow.com/users/1885002/king-thrushbeard"}, "edited": false, "score": 0, "creation_date": 1503518830, "post_id": 45848367, "comment_id": 78655062, "body": "Use aggregation: Define a class that holds <code>dev_token</code> and <code>noteStore</code> as data members."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1503519359, "post_id": 45848367, "comment_id": 78655325, "body": "Do you ever use one more than one dev token or note store? If not, that&#39;s a good indication that you don&#39;t really need a class, and that global variables aren&#39;t entirely inappropriate. (Think of a module with functions that access shared module-level globals as a singleton instance of an implicit class.)"}], "answers": [{"tags": [], "owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "is_accepted": true, "score": 9, "last_activity_date": 1503518777, "creation_date": 1503518777, "answer_id": 45848447, "question_id": 45848367, "link": "https://stackoverflow.com/questions/45848367/how-to-avoid-repeating-certain-arguments-for-many-functions-python/45848447#45848447", "title": "How to avoid repeating certain arguments for many functions? (Python)", "body": "<p>If you are using the same arguments over and over, and they don't change. Maybe it calls for making them a class?</p>\n\n<pre><code>class MyNotesController:\n    def __init__(self, dev_token, noteStore):\n        self.dev_token = dev_token\n        self.noteStore = noteStore\n\n    def get_all_notes(self):\n        # Use self.dev_token and self.noteStore\n\n\n    def find_notes(self, notebook):\n        # Use self.dev_token and self.noteStore\n\ndef main():\n    dev_token = ...\n    noteStote = ...\n    my_ctrl = MyNotesController(dev_token, noteStote)\n    notes = my_ctrl.get_all_notes()\n    notes_from_notebook1 = my_ctrl.find_notes(notebooks[0])\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4696421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64e549484f19e036fcd3d7ebabf8ba5b?s=128&d=identicon&r=PG&f=1", "display_name": "cappuccino", "link": "https://stackoverflow.com/users/4696421/cappuccino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1189, "favorite_count": 0, "accepted_answer_id": 45848447, "answer_count": 1, "score": 0, "last_activity_date": 1503518777, "creation_date": 1503518431, "question_id": 45848367, "link": "https://stackoverflow.com/questions/45848367/how-to-avoid-repeating-certain-arguments-for-many-functions-python", "title": "How to avoid repeating certain arguments for many functions? (Python)", "body": "<p>I am writing this app using Evernote API, and find myself calling many functions with the same few arguments repeatedly. Any way I can avoid this without using global variables?</p>\n\n<pre><code>def get_all_notes(dev_token, noteStore):\n\ndef find_notes(notebook, dev_token, noteStore):\n\ndef main():\n    dev_token = ...\n    noteStote = ...\n    notes = get_all_notes(dev_token, noteStore)\n    notes_from_notebook1 = find_notes(notebooks[0], dev_token, noteStore)\n</code></pre>\n"}, {"tags": ["python", "curve-fitting", "least-squares"], "comments": [{"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "edited": false, "score": 0, "creation_date": 1503521504, "post_id": 45848317, "comment_id": 78656334, "body": "You are giving information that contradicts where you think the error is.  If lorentzian works without error, but calling fit throws an error, what makes you think the problem is on line 60 of lorentzian?  If you could provide the exact input to lorentzian that is causing issues it would be easier to diagnose."}, {"owner": {"reputation": 1, "user_id": 7462649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4894fc8c15428b274043547cb7fb9e45?s=128&d=identicon&r=PG&f=1", "display_name": "Ohms", "link": "https://stackoverflow.com/users/7462649/ohms"}, "reply_to_user": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "edited": false, "score": 0, "creation_date": 1503522320, "post_id": 45848317, "comment_id": 78656683, "body": "Thanks for the response. The lorentzian inputs are: pix = array from 0 to 500, and p0 = [[154, 790, 2], [284, 3864, 2], [412, 1030, 2]]. When fit is called, it manages to print upto [154, 790, 2], and then the error message flags."}, {"owner": {"reputation": 1, "user_id": 7462649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4894fc8c15428b274043547cb7fb9e45?s=128&d=identicon&r=PG&f=1", "display_name": "Ohms", "link": "https://stackoverflow.com/users/7462649/ohms"}, "reply_to_user": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "edited": false, "score": 0, "creation_date": 1503522674, "post_id": 45848317, "comment_id": 78656847, "body": "When I run fit, I get a series of errors, the last of which being what&#39;s mentioned above. And yes, I agree, it seems totally contradictory."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7462649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4894fc8c15428b274043547cb7fb9e45?s=128&d=identicon&r=PG&f=1", "display_name": "Ohms", "link": "https://stackoverflow.com/users/7462649/ohms"}, "edited": false, "score": 0, "creation_date": 1503523456, "post_id": 45849370, "comment_id": 78657178, "body": "Hi. I will check the thing about a possible transciption error. But on the second point, p0 is a list with three nested lists, so using the two indices shouldn&#39;t really be a problem - were this the problem, lorentzian and residue wouldn&#39;t work. But, I did notice that the block of code in question prints an integer (and it seems out of nowhere), which is causing the problem. I just can&#39;t find it."}, {"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "reply_to_user": {"reputation": 1, "user_id": 7462649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4894fc8c15428b274043547cb7fb9e45?s=128&d=identicon&r=PG&f=1", "display_name": "Ohms", "link": "https://stackoverflow.com/users/7462649/ohms"}, "edited": false, "score": 0, "creation_date": 1503523590, "post_id": 45849370, "comment_id": 78657223, "body": "that is not what you had for the inputs originally, you edited the comment since i last looked.  Let me take another look."}, {"owner": {"reputation": 1, "user_id": 7462649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4894fc8c15428b274043547cb7fb9e45?s=128&d=identicon&r=PG&f=1", "display_name": "Ohms", "link": "https://stackoverflow.com/users/7462649/ohms"}, "edited": false, "score": 0, "creation_date": 1503524492, "post_id": 45849370, "comment_id": 78657586, "body": "x runs from 0 to 499. In the code, I call x &quot;pix&quot; (for pixels), and, yes, it&#39;s an np array. The params look good to me."}, {"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "reply_to_user": {"reputation": 1, "user_id": 7462649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4894fc8c15428b274043547cb7fb9e45?s=128&d=identicon&r=PG&f=1", "display_name": "Ohms", "link": "https://stackoverflow.com/users/7462649/ohms"}, "edited": false, "score": 0, "creation_date": 1503524759, "post_id": 45849370, "comment_id": 78657718, "body": "given those parameters, i cannot reproduce your issue so not sure I can help.  The only things I changed were, as mentioned, the definition of <code>maxI_row</code> to reference maxI_alongL instead of <code>maxI_along</code> (which was undefined).  Other than that, since i dont have either of the <code>tiff</code> files, I just assumed what you said for the <code>x</code> parameter is accurate (that it is a np.array from 0 to 499).  My guess is that this is where your problem is."}, {"owner": {"reputation": 1, "user_id": 7462649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4894fc8c15428b274043547cb7fb9e45?s=128&d=identicon&r=PG&f=1", "display_name": "Ohms", "link": "https://stackoverflow.com/users/7462649/ohms"}, "edited": false, "score": 0, "creation_date": 1503526479, "post_id": 45849370, "comment_id": 78658374, "body": "Hi. I have edited the code so it matches more closely what I was working with (it had loads of junk lying around). For the data, copy the following url                                                                                                               (file:///C:/Users/OMAR/Downloads/water_1%20(2)/)  Choose File: water_1_1.tiff           Thanks"}, {"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "reply_to_user": {"reputation": 1, "user_id": 7462649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4894fc8c15428b274043547cb7fb9e45?s=128&d=identicon&r=PG&f=1", "display_name": "Ohms", "link": "https://stackoverflow.com/users/7462649/ohms"}, "edited": false, "score": 0, "creation_date": 1503527309, "post_id": 45849370, "comment_id": 78658651, "body": "nor sure how you expect me to download files off your personal drive..."}], "tags": [], "owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "is_accepted": false, "score": 0, "last_activity_date": 1503524272, "last_edit_date": 1503524272, "creation_date": 1503522830, "answer_id": 45849370, "question_id": 45848317, "link": "https://stackoverflow.com/questions/45848317/ftitting-lorentzians-to-data-object-of-type-numpy-uint16-has-no-len-error/45849370#45849370", "title": "Ftitting Lorentzians to Data. object of type &#39;numpy.uint16&#39; has no len() error", "body": "<p>There are two problems, one is probably just a transcription error.  Your code references <code>maxI_row = maxI_along.argmax()</code> , but what you actually defined is <code>maxI_alongL</code>, not <code>maxI_along</code>.</p>\n\n<p>The main issue though, is that within lorentzian, on what would be line 63 of the snippet you included, you are trying to get the position of an integer. </p>\n\n<p>For example, you passed in a list of 0..500 as params, you pull out on each iteration a particular number, store it in p0_nest, and then you try to get the index of that <em>integer</em> on the next line <code>ctr = p0_nest[0]</code>, which fails because integers don't have indices. </p>\n\n<p><strong>Revision based on comments:</strong></p>\n\n<p>Let's be conrete about the input:</p>\n\n<pre><code>x = np.array(range(0,501))\nparams = [[154, 790, 2], [284, 3864, 2], [412, 1030, 2]]\nlorentzian(x,params)\n</code></pre>\n\n<p>This runs without error for me.  When you say x is an array, are you certain it is an np array?</p>\n"}, {"tags": [], "owner": {"reputation": 5396, "user_id": 5179748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N6Pn6ac0-tQ/AAAAAAAAAAI/AAAAAAAAB2o/LLcs2JK0DcU/photo.jpg?sz=128", "display_name": "M Newville", "link": "https://stackoverflow.com/users/5179748/m-newville"}, "is_accepted": false, "score": 0, "last_activity_date": 1503537848, "creation_date": 1503537848, "answer_id": 45851551, "question_id": 45848317, "link": "https://stackoverflow.com/questions/45848317/ftitting-lorentzians-to-data-object-of-type-numpy-uint16-has-no-len-error/45851551#45851551", "title": "Ftitting Lorentzians to Data. object of type &#39;numpy.uint16&#39; has no len() error", "body": "<p>The call signature for your objective function looks to be not correct. The fitting code inside <code>leastsq</code> will call your objective function <code>residual()</code> with the updated parameter values as an ndarray (float64) in the <strong><em>first argument</em></strong>.  Any additional arguments you may want to use to calculate the residual to be minimized (such as data values or your ordinate values <code>x</code>) come <em>after</em> the parameters.  In a sense, <code>leastsq</code> doesn't really care about your arrays <code>x</code> and <code>y</code>, it is concerned with how your objective function responds to the parameter values. </p>\n\n<p>For fitting data to Lorentzian functions, you may find the <code>lmfit</code> module useful. For an example, see <a href=\"https://lmfit.github.io/lmfit-py/builtin_models.html#example-1-fit-peaked-data-to-gaussian-lorentzian-and-voigt-profiles\" rel=\"nofollow noreferrer\">https://lmfit.github.io/lmfit-py/builtin_models.html#example-1-fit-peaked-data-to-gaussian-lorentzian-and-voigt-profiles</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7462649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4894fc8c15428b274043547cb7fb9e45?s=128&d=identicon&r=PG&f=1", "display_name": "Ohms", "link": "https://stackoverflow.com/users/7462649/ohms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1503614574, "creation_date": 1503518244, "last_edit_date": 1503614574, "question_id": 45848317, "link": "https://stackoverflow.com/questions/45848317/ftitting-lorentzians-to-data-object-of-type-numpy-uint16-has-no-len-error", "title": "Ftitting Lorentzians to Data. object of type &#39;numpy.uint16&#39; has no len() error", "body": "<p>Below is some (messy) code that will hopefully fit lorentzians to data    </p>\n\n<pre><code>from scipy import misc\nimport numpy as np\nimport scipy.optimize as optimize\nfrom scipy import optimize\nimport scipy\nimport matplotlib.pyplot as plt\nimport numpy.polynomial.polynomial as ply\nfrom scipy.optimize import leastsq\n\n\nimg_arr = scipy.misc.imread('water_1_0.tiff')\nimg=mpimg.imread('water_1_0.tiff')\n\nimg_arr_col_sum = img_arr.sum(axis=0)\nmaxI_col = img_arr_col_sum.argmax()\nmaxI_along = img_arr[:, maxI_col]\nmaxI_alongL = img_arr[:, maxI_col - 1]\nmaxI_row = maxI_along.argmax()\n\nIntsR = img_arr[:, maxI_col+1].sum()\nIntsL = img_arr[:, maxI_col-1].sum()\nIntsMax = img_arr[:, maxI_col].sum()\n\nRay = [154, 284, 412]\nctr_list = Ray\namp_list = [790, 3864, 1030]\nwid_list = [2,2,2]\n\np0 = [[ctr_list[i], amp_list[i], wid_list[i]] for i in range(3)]\n\npix = np.array(range(0,len(img_arr[:,maxI_col - 1])))  #Pixel position up to     500\nI = img_arr[:,maxI_col - 1]                     #Intensities at each pixel posn\n\ndef lorentzian(x, params):\n    L = np.zeros_like(x)\n    for i in range(len(params)):\n        p0_nest = params[i]\n        #print(\"nest\", p0_nest)\n        ctr = p0_nest[0]\n        amp = p0_nest[1]\n        wid = p0_nest[2]\n        L = L + (amp*wid) / (2*np.pi*((x-ctr)**2+(0.5*wid)**2))\n    return L\n\ndef residual(x, y, params):\n    return lorentzian(x, params) - y\n\ndef fit(params):\n    p = []\n    global pix, I, Ray\n    for i in range(len(Ray)):\n        R_index = Ray[i]\n        print(params[i])\n        fit_range = slice(R_index -10, R_index + 10)\n        params_opt, success = leastsq(residual, params[i], args = (pix[fit_range],I[R_index]))\n        p.append(params_opt)\n    return p\n</code></pre>\n\n<p>lorentzian(pix, p0)\nresidual(pix, I, p0)\nfit(p0)``</p>\n\n<p>When I call lorentzian and residual, all is fine. But when I call fit, I get the following error, which is driving me mad</p>\n\n<pre><code> 58 def lorentzian(x, params):\n 59     L = np.zeros_like(x)\n 60     for i in range(len(params)):   #This is where it goes wrong\n 61         p0_nest = params[i]\n 62         #print(\"nest\", p0_nest)\n\nTypeError: object of type 'numpy.uint16' has no len() \n</code></pre>\n\n<p>I'd appreciate any insights.</p>\n\n<p>Thanks.</p>\n\n<p><strong>EDIT: Problem resolved</strong></p>\n"}, {"tags": ["python", "html", "css", "django"], "comments": [{"owner": {"reputation": 712, "user_id": 7988112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/214133d7d5818bbf738c207e58ff00d9?s=128&d=identicon&r=PG&f=1", "display_name": "Julian Espinosa", "link": "https://stackoverflow.com/users/7988112/julian-espinosa"}, "edited": false, "score": 0, "creation_date": 1503518989, "post_id": 45848316, "comment_id": 78655140, "body": "Have you tried deleting cache? This link might help. <a href=\"https://stackoverflow.com/questions/7013735/turn-off-caching-of-static-files-in-django-development-server\" title=\"turn off caching of static files in django development server\">stackoverflow.com/questions/7013735/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 5366391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1dfbbc39b94bc359ce14c950d7b895?s=128&d=identicon&r=PG", "display_name": "aspo", "link": "https://stackoverflow.com/users/5366391/aspo"}, "reply_to_user": {"reputation": 75, "user_id": 8508008, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ff182419140fce485d8997c07e611cdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhrab", "link": "https://stackoverflow.com/users/8508008/sukhrab"}, "edited": false, "score": 0, "creation_date": 1503520843, "post_id": 45848705, "comment_id": 78656009, "body": "Add the STATIC_ROOT and MEDIA ROOT  to point to the location of the static folder and media folder respectively to the settings.py. Like this MEDIA_ROOT = os.path.join(BASE_DIR,&#39;path_to_/media&#39;) STATIC_ROOT = os.path.join(BASE_DIR,&#39;path_to/static&#39;). Then run manage.py collectstatic command"}, {"owner": {"reputation": 339, "user_id": 5366391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1dfbbc39b94bc359ce14c950d7b895?s=128&d=identicon&r=PG", "display_name": "aspo", "link": "https://stackoverflow.com/users/5366391/aspo"}, "reply_to_user": {"reputation": 75, "user_id": 8508008, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ff182419140fce485d8997c07e611cdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhrab", "link": "https://stackoverflow.com/users/8508008/sukhrab"}, "edited": false, "score": 0, "creation_date": 1503521102, "post_id": 45848705, "comment_id": 78656131, "body": "See the following <a href=\"https://stackoverflow.com/questions/12204136/static-root-in-django-on-server\" title=\"static root in django on server\">stackoverflow.com/questions/12204136/&hellip;</a>"}, {"owner": {"reputation": 75, "user_id": 8508008, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ff182419140fce485d8997c07e611cdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhrab", "link": "https://stackoverflow.com/users/8508008/sukhrab"}, "edited": false, "score": 0, "creation_date": 1503527475, "post_id": 45848705, "comment_id": 78658702, "body": "I should have mentioned it in my question: I am still in the development stage and my web-app did not go live yet. So, I am making changes on my local server and that is the reason I am confused as of why CSS files changes load so slowly, whereas HTML changes load immediately."}, {"owner": {"reputation": 339, "user_id": 5366391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1dfbbc39b94bc359ce14c950d7b895?s=128&d=identicon&r=PG", "display_name": "aspo", "link": "https://stackoverflow.com/users/5366391/aspo"}, "reply_to_user": {"reputation": 75, "user_id": 8508008, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ff182419140fce485d8997c07e611cdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhrab", "link": "https://stackoverflow.com/users/8508008/sukhrab"}, "edited": false, "score": 0, "creation_date": 1503606860, "post_id": 45848705, "comment_id": 78699794, "body": "While still in development, add the following to the settings.py, <code># Build paths inside the project like this: os.path.join(BASE_DIR, ...) BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</code>, and then the path for <code>STATIC_ROOT = os.path.join(BASE_DIR,&#39;User&#47;static&#39;)</code>. <b>This should make it easier for Django to find the static files</b>. For production, you will have to use tools like <b>nginx</b> to serve the static files"}], "tags": [], "owner": {"reputation": 339, "user_id": 5366391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1dfbbc39b94bc359ce14c950d7b895?s=128&d=identicon&r=PG", "display_name": "aspo", "link": "https://stackoverflow.com/users/5366391/aspo"}, "is_accepted": false, "score": 0, "last_activity_date": 1503519845, "creation_date": 1503519845, "answer_id": 45848705, "question_id": 45848316, "link": "https://stackoverflow.com/questions/45848316/django-loads-css-very-slow-and-where-should-i-insert-static-layout-css/45848705#45848705", "title": "Django loads CSS very slow and where should I insert {% static &#39;Layout.css&#39; %.}", "body": "<p>For my case when writing Django apps, usually reserve a block for adding CSS style sheets different from the general CSS that applies across all pages. I follow the following practices:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;head&gt;\r\n    &lt;meta charset=\"UTF-8\"&gt;\r\n    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\r\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\r\n    &lt;!-- Add all the css that will apply to all pages --&gt;\r\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"{% static 'services/service/css/bootstrap.min.css' %}\"&gt;\r\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"{% static 'font-awesome/css/font-awesome.min.css' %}\"&gt;\r\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"{% static 'css/nav_fixed.css' %}\"&gt;\r\n    &lt;link rel=\"stylesheet\" href=\"{% static 'css/footer.css' %}\"&gt;\r\n    {% block addStyles %}\r\n    &lt;!-- Adding other custom styles for different pages --&gt;\r\n    {% endblock addStyles %}\r\n    &lt;link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"{% static \"images/logo.jpg\" %}\" /&gt;\r\n    &lt;title&gt;{% block pageTitle %} Page title{% endblock pageTitle %}&lt;/title&gt;\r\n&lt;/head&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>For issue 2:\nCould you give more details on how you have set up the STATIC_ROOT. Sometimes the problem could that you have to hard reload your browser by pressing CTRL + F5.</p>\n\n<p>Regards</p>\n"}], "owner": {"reputation": 75, "user_id": 8508008, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ff182419140fce485d8997c07e611cdb?s=128&d=identicon&r=PG&f=1", "display_name": "Sukhrab", "link": "https://stackoverflow.com/users/8508008/sukhrab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1194, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1601492787, "creation_date": 1503518241, "last_edit_date": 1503527017, "question_id": 45848316, "link": "https://stackoverflow.com/questions/45848316/django-loads-css-very-slow-and-where-should-i-insert-static-layout-css", "title": "Django loads CSS very slow and where should I insert {% static &#39;Layout.css&#39; %.}", "body": "<p>I am working on a web-app using Django and everything is going well but there are two problems that I have been struggling with for the past week: </p>\n\n<p>Problem 1: \nWithin my project I have an app called User and it has the following structure: </p>\n\n<pre><code>User \n &gt;templates\n  &gt;User\n   &gt;Layout.html\n   &gt;Home.html\n &gt;static\n  &gt;css\n   &gt;User\n     &gt;Layout.css\n     &gt;Home.css\n</code></pre>\n\n<p>I want to have the same header and left side menu across all my pages and here is how I went about it. </p>\n\n<p>Layout.html</p>\n\n<pre><code>{% load static %}\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;link rel=\"stylesheet\" href=\"{% static 'User/css/Layout.css' %}\"&gt;\n{% block head %}\n{% block title %}\n{% endblock %}\n{% block references %}\n{% endblock %}\n{% endblock %}\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;header class=\"uppermenu\"&gt;\n&lt;/header&gt;\n\n&lt;div class=\"leftsidemenu\"&gt;\n&lt;/div&gt;\n\n&lt;div class=\"content\"&gt; \n{% block content %}\n{% endblock %}\n&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Home.html</p>\n\n<pre><code>{% extends \"User/Layout.html\" %}\n{% load static %}\n\n{% block head %}\n{% block title %}\n&lt;title&gt;Home&lt;/title&gt;\n{% endblock %}\n\n{% block references %}\n&lt;link rel=\"stylesheet\" href=\"{% static 'User/css/Home.css' %}\"&gt;\n{% endblock %}\n{% endblock %}\n\n{% block content %}\n&lt;!--Each page is going to have different content but the left side menu\nand the header should remain the same --&gt;\n{% endblock %}\n</code></pre>\n\n<p>When extending Layout.html in Home.html, I want to add Home.css and not sure where to put it. Where should I insert my stylesheets in Layout.html and Home.html? Should they go in the \"head\", {% block references %}, {% block content %} or where? What is the best practice? </p>\n\n<p>2) Problem 2 - (the annoying one)</p>\n\n<p>I type \"python manage.py runserver\" and constantly reload pages when I make changes in my templates and static files to see how they look. I can see changes in Html files taking place immediately, whereas it takes about 1 hour (sometimes longer) for CSS changes to take place. It is so weird and annoying because it is slowing me down significantly. </p>\n\n<pre><code>For example: \nIf I change &lt;p1&gt;Hello&lt;/p&gt; to &lt;p1&gt;Bye&lt;/p&gt; in Home.html and reload the\npage, I could see the changes immediately and \"Hello\" changes to \"Bye\"                  \nas it is supposed to be. \n\nBut if I change p1 {color: red}; to p1 {color: green} in my Home.css \nthen the changes take place about 1 hour later (didn't really set up a \ntimer but it takes so long). \n</code></pre>\n\n<p>I normally use Chrome but tried Safari and the result is the same. Could somebody help me out with these issues please? The second one concerns me more because I have no clue why it is happening. </p>\n\n<pre><code>import os\n\n\nSECRET_KEY = 'whatever'\n\n\nALLOWED_HOSTS = []\n\nINSTALLED_APPS = [\n'Application',\n'Home',\n'Login',\n'User',\n'django.contrib.admin',\n'django.contrib.auth',\n'django.contrib.contenttypes',\n'django.contrib.sessions',\n'django.contrib.messages',\n'django.contrib.staticfiles',\n]\n\nMIDDLEWARE = [\n'django.middleware.security.SecurityMiddleware',\n'django.contrib.sessions.middleware.SessionMiddleware',\n'django.middleware.common.CommonMiddleware',\n'django.middleware.csrf.CsrfViewMiddleware',\n'django.contrib.auth.middleware.AuthenticationMiddleware',\n'django.contrib.messages.middleware.MessageMiddleware',\n'django.middleware.clickjacking.XFrameOptionsMiddleware',\n\n]\n\nROOT_URLCONF = 'Agent_WebApp.urls'\n\nTEMPLATES = [\n{\n    'BACKEND': 'django.template.backends.django.DjangoTemplates',\n    'DIRS': [],\n    'APP_DIRS': True,\n    'OPTIONS': {\n        'context_processors': [\n            'django.template.context_processors.debug',\n            'django.template.context_processors.request',\n            'django.contrib.auth.context_processors.auth',\n            'django.contrib.messages.context_processors.messages',\n        ],\n    },\n    },\n]\n\nWSGI_APPLICATION = 'Agent_WebApp.wsgi.application'\n\nDATABASES = {\n'default': {\n    'ENGINE': 'django.db.backends.mysql',\n    'NAME': 'AAA',\n    'USER': 'root',\n    'PASSWORD': 'AAA',\n}\n}\n\n\n\nAUTH_PASSWORD_VALIDATORS = [\n{\n    'NAME':         \n\n'django.contrib.auth.password_validation.UserAttribute     \nSimilarityValidator',\n},\n{\n    'NAME': \n'django.contrib.auth.password_validation.MinimumLengthValidator',\n},\n{\n    'NAME': \n'django.contrib.auth.password_validation.CommonPasswordValidator',\n},\n{\n    'NAME': \n'django.contrib.auth.password_validation.NumericPasswordValidator',\n},\n\n]\n\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nUSE_TZ = True\n\n\nSTATIC_URL = '/static/'\n</code></pre>\n\n<p><b> EDIT: I am still in the development stage and my website did not go live yet</b></p>\n"}, {"tags": ["python", "seaborn", "facet-grid"], "answers": [{"comments": [{"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1503520697, "post_id": 45848844, "comment_id": 78655960, "body": "Thanks, @Elliot  I ended up using this in my actual code (for future reference, adapted from your solution): for i in ax.axes:     i[0].axhline(50, alpha=0.25, color=&#39;grey&#39;) for i[0] through i[3]"}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 1, "creation_date": 1503521358, "post_id": 45848844, "comment_id": 78656259, "body": "Related question here: <a href=\"https://stackoverflow.com/questions/45849028/seaborn-facetgrid-pointplot-label-data-points\" title=\"seaborn facetgrid pointplot label data points\">stackoverflow.com/questions/45849028/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2020, "user_id": 3074293, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a94da3bd5b45042b13a5d6f5fbbc5933?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot", "link": "https://stackoverflow.com/users/3074293/elliot"}, "is_accepted": true, "score": 3, "last_activity_date": 1503520486, "creation_date": 1503520486, "answer_id": 45848844, "question_id": 45848281, "link": "https://stackoverflow.com/questions/45848281/seaborn-facetgrid-pointplot-add-1-grid-line/45848844#45848844", "title": "Seaborn FacetGrid PointPlot Add 1 Grid Line", "body": "<p>The easiest way to get a grid line as an aide to the eye in the plot is to just draw a line onto every plot.</p>\n\n<pre><code>for a in g.axes:\n    a.axhline(5, alpha=0.5, color='grey')\n</code></pre>\n\n<p>The upshot is that it's basically one line of code and the plot will have the feature you want. The downshot is that you have to manually specify where each line goes. (I assume that you want something a little more complicated in the production code). Something a little better would be </p>\n\n<pre><code>for a in g.axes:\n    a.axhline(a.get_yticks()[1], alpha=0.5, color='grey')\n</code></pre>\n\n<p>which would grab a single tick and draw a line for it.</p>\n\n<p>You could probably do something with the individual <code>tick</code> objects to give a similar effect---they can be accessed with <code>a.yaxis.get_major_ticks()</code>---but I wasn't able to use any of their methods to any effect.</p>\n"}], "owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2792, "favorite_count": 0, "accepted_answer_id": 45848844, "answer_count": 1, "score": 3, "last_activity_date": 1503520894, "creation_date": 1503518109, "last_edit_date": 1592644375, "question_id": 45848281, "link": "https://stackoverflow.com/questions/45848281/seaborn-facetgrid-pointplot-add-1-grid-line", "title": "Seaborn FacetGrid PointPlot Add 1 Grid Line", "body": "<p>Given the following:</p>\n<pre><code>import seaborn as sns\nattend = sns.load_dataset(&quot;attention&quot;)\nsns.set_style(&quot;whitegrid&quot;, {'axes.grid' : False,'axes.edgecolor':'none'})\ng = sns.FacetGrid(attend, col=&quot;subject&quot;, col_wrap=5,\nsize=1.5, ylim=(0, 10))\nax = g.map(sns.pointplot, &quot;solutions&quot;, &quot;score&quot;, scale=.7)\n</code></pre>\n<p>As you can see, I have removed all grid lines. I would now like to add just one horizontal grid line: at the value of 5 on the y-axis for each plot. Is this possible to do? I looked into the set_style dictionary options <a href=\"https://seaborn.pydata.org/tutorial/aesthetics.html\" rel=\"nofollow noreferrer\">here</a> but found nothing helpful.</p>\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "matlab"], "comments": [{"owner": {"reputation": 13303, "user_id": 4221706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6d40a22e3e6556e376d9b6d64022beb?s=128&d=identicon&r=PG", "display_name": "hbaderts", "link": "https://stackoverflow.com/users/4221706/hbaderts"}, "edited": false, "score": 0, "creation_date": 1503562344, "post_id": 45848273, "comment_id": 78670507, "body": "Are you sure that MATLAB is calling the &quot;right&quot; Python version, for which NumPy is really installed? You can check the full path of the Python executable with <code>import sys; sys.executable</code>"}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 6200592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5edeb0d4d646882312befecfe954caf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Warneke", "link": "https://stackoverflow.com/users/6200592/jon-warneke"}, "edited": false, "score": 1, "creation_date": 1503521956, "post_id": 45848596, "comment_id": 78656534, "body": "None of those issues resolve what&#39;s going on here. Note that the only difference between getting things to work and breaking them is the numpy import. The fact that things work without this is proof that the above possibilities aren&#39;t the problem"}], "tags": [], "owner": {"reputation": 1495, "user_id": 6805800, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-cyN0h9Zirp4/AAAAAAAAAAI/AAAAAAAAD94/64n1VqNQK50/photo.jpg?sz=128", "display_name": "Jonathan Porter", "link": "https://stackoverflow.com/users/6805800/jonathan-porter"}, "is_accepted": false, "score": 2, "last_activity_date": 1503519450, "creation_date": 1503519450, "answer_id": 45848596, "question_id": 45848273, "link": "https://stackoverflow.com/questions/45848273/matlab-cant-call-python-module-with-imports/45848596#45848596", "title": "MATLAB can&#39;t call Python module with imports", "body": "<p>In the <a href=\"https://www.slideshare.net/arifyunus90/matlab-module\" rel=\"nofollow noreferrer\">matlab</a> book on page 110 you can see the list of possible reasons for why you saw this error and how to troubleshoot them.</p>\n\n<p><strong>Reasons:</strong></p>\n\n<ol>\n<li>\"Python not installed\" on page 1-70</li>\n<li>\"64-bit/32-bit Versions of Python on Windows Platforms\" on page 1-70</li>\n<li>\"MATLAB Cannot Find Python\" on page 1-71</li>\n<li>\"Error in User-Defined Python Module\" on page 1-71</li>\n<li>\"Python Module Not on Python Search Path\" on page 1-71</li>\n<li>\"Module Name Conflicts\" on page 1-72</li>\n<li>\"Python Tries to Execute command in Wrong Module\" on page 1-72</li>\n</ol>\n\n<p>I would suggest working through this list of solutions as you can see there are several possible reasons for your error and it's hard for us to know which one it is without more information.</p>\n"}], "owner": {"reputation": 307, "user_id": 6200592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5edeb0d4d646882312befecfe954caf0?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Warneke", "link": "https://stackoverflow.com/users/6200592/jon-warneke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1503519450, "creation_date": 1503518067, "question_id": 45848273, "link": "https://stackoverflow.com/questions/45848273/matlab-cant-call-python-module-with-imports", "title": "MATLAB can&#39;t call Python module with imports", "body": "<p>I've followed the instructions on <a href=\"https://www.mathworks.com/help/matlab/matlab_external/call-user-defined-custom-module.html\" rel=\"nofollow noreferrer\">this</a> page to have MATLAB call python code in a python module. </p>\n\n<pre><code># mymod.py\n\ndef search(words):\n    \"\"\"Return list of words containing 'son'\"\"\"\n    newlist = [w for w in words if 'son' in w]\n    return newlist\n</code></pre>\n\n<p>Then in MATLAB I run </p>\n\n<pre><code>N = py.list({'Jones','Johnson','James'})\npy.mymod.search(N)\n</code></pre>\n\n<p>and get the desired output. However, I can't get things to work when the python module itself has imports in it. For example, adding the single line <code>import numpy as np</code> to <code>mymod.py</code> yields the error</p>\n\n<pre><code>Undefined variable \"py\" or class \"py.mymod.search\"\n</code></pre>\n\n<p>upon running the same lines in MATLAB. How can I get around this?</p>\n"}, {"tags": ["python", "jupyter", "xgboost"], "answers": [{"tags": [], "owner": {"reputation": 11190, "user_id": 48956, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/06f001142c96af8fb111127e63d92579?s=128&d=identicon&r=PG", "display_name": "user48956", "link": "https://stackoverflow.com/users/48956/user48956"}, "is_accepted": true, "score": 2, "last_activity_date": 1503519016, "creation_date": 1503519016, "answer_id": 45848498, "question_id": 45848254, "link": "https://stackoverflow.com/questions/45848254/xgboost-work-on-pycharm-but-not-in-jupyter-notebook/45848498#45848498", "title": "Xgboost work on pycharm but not in Jupyter NoteBook", "body": "<p>Ideally, you should install packages in the location in your PYTHONPATH (which is where python looks). Usually pip does this, however its possible that jupyter, and pycharm are using different version. Try:</p>\n\n<pre><code>import sys\nprint sys.executable\n</code></pre>\n\n<p>and </p>\n\n<pre><code>import os\nprint os.environ['PYTHONPATH'].split(os.pathsep)\n</code></pre>\n\n<p>in both pycharm and jupyter.</p>\n\n<p>You can then try one of two things:</p>\n\n<ol>\n<li><p>install the package with the right version of pip:</p>\n\n<p>/path/to/python /path/to/pip install PackageName</p></li>\n<li><p>dynamically hacking your python path in python:</p></li>\n</ol>\n\n<p>:</p>\n\n<pre><code> import sys\n sys.path.append(r\"C:\\Users\\sifangyou\\xgboost\\python-package\")\n import xgboost\n</code></pre>\n\n<p>Whether 2 works depends on what magic happens when xgboost is installed. (Its possible that it may not by usable without running the install steps).</p>\n"}], "owner": {"reputation": 45, "user_id": 7449604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9ee716c0d6f8b323e04bb016f02bf3b?s=128&d=identicon&r=PG&f=1", "display_name": "sfhotmail", "link": "https://stackoverflow.com/users/7449604/sfhotmail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1477, "favorite_count": 1, "accepted_answer_id": 45848498, "answer_count": 1, "score": 1, "last_activity_date": 1508938499, "creation_date": 1503518019, "question_id": 45848254, "link": "https://stackoverflow.com/questions/45848254/xgboost-work-on-pycharm-but-not-in-jupyter-notebook", "title": "Xgboost work on pycharm but not in Jupyter NoteBook", "body": "<p>I've successfully installed Xgboost in windows with Pycharm Python, and it is working.\nHowever, in Jupyter NoteBook, it is not working.</p>\n\n<pre><code>        import xgboost as xgb\n    ---&gt; 12 import xgboost as xgb\nModuleNotFoundError: No module named 'xgboost'\n</code></pre>\n\n<p>In Jupyter the xgboost package is at: </p>\n\n<pre><code>&gt; !pip install xgboost\n</code></pre>\n\n<p>Requirement already satisfied: xgboost in c:\\users\\sifangyou\\anaconda3\\lib\\site-packages\\xgboost-0.6-py3.6.egg</p>\n\n<p>Requirement already satisfied: numpy in c:\\users\\sifangyou\\anaconda3\\lib\\site-packages (from xgboost)</p>\n\n<p>Requirement already satisfied: scipy in c:\\users\\sifangyou\\anaconda3\\lib\\site-packages (from xgboost)</p>\n\n<p>However, my xgboost is installed in:\nC:\\Users\\sifangyou\\xgboost\\python-package</p>\n\n<p>How can I direct Jupyter to the correct xgboost package location?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 351, "user_id": 6581076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b3386335102b76ca027284de77ba27c?s=128&d=identicon&r=PG&f=1", "display_name": "Robbie Jones", "link": "https://stackoverflow.com/users/6581076/robbie-jones"}, "edited": false, "score": 3, "creation_date": 1503518007, "post_id": 45848227, "comment_id": 78654651, "body": "Can you clarify what your algorithm is supposed to be doing?"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 5, "creation_date": 1503518020, "post_id": 45848227, "comment_id": 78654656, "body": "Neither <code>p</code> nor <code>j</code> is defined in your code. Please give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 2, "creation_date": 1503518280, "post_id": 45848227, "comment_id": 78654803, "body": "How do you <code>50</code>? <code>list1 - list2 == 87.5</code> for that index."}], "answers": [{"tags": [], "owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "is_accepted": false, "score": 1, "last_activity_date": 1503518295, "creation_date": 1503518295, "answer_id": 45848325, "question_id": 45848227, "link": "https://stackoverflow.com/questions/45848227/subtract-two-lists-with-a-condition-in-python/45848325#45848325", "title": "Subtract two lists with a condition in python", "body": "<p><code>zip()</code> all the lists together:</p>\n\n<pre><code>&gt;&gt;&gt; [a-b if c and d &gt;= rhs else 0 for a, b, c, d in zip(list1, list2, z, p)]\n[0, 0, 0, 0, 19.7, 0, 87.5]\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 5977234, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1f91a0ce557252122ff698744baae2d8?s=128&d=identicon&r=PG&f=1", "display_name": "rezzz", "link": "https://stackoverflow.com/users/5977234/rezzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1503519725, "creation_date": 1503517872, "last_edit_date": 1503519725, "question_id": 45848227, "link": "https://stackoverflow.com/questions/45848227/subtract-two-lists-with-a-condition-in-python", "title": "Subtract two lists with a condition in python", "body": "<p>I have two lists for example for i=7 periods :</p>\n\n<pre><code>list1 = [0,0,16.5,0,29.7,62.7,90]\nlist2 = [0,0,0,0,10,12,2.5]\nz = [0,0,1,0,1,1,1]\np[j] = [28,10,12,5,30,15,40]\nrhs = 27\ny = []\nif z[j] == 0:\n  y.append(0)\nelse\n    if p[j] &lt; rhs:\n       y.append(0)\n    else \n       y.append([a-b for a,b in zip(list1, list2)])\n\nprint(y) \n</code></pre>\n\n<p>The final results is y=[0, 0, 0, 0, 0, 19.7, 0, 50], however my code does not give that. Could you please help me to figure it out.</p>\n"}, {"tags": ["python", "python-3.x", "exception", "raspberry-pi", "nameerror"], "comments": [{"owner": {"reputation": 1582, "user_id": 7795130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Inihh.gif?s=128&g=1", "display_name": "Davy M", "link": "https://stackoverflow.com/users/7795130/davy-m"}, "edited": false, "score": 0, "creation_date": 1503517829, "post_id": 45848192, "comment_id": 78654585, "body": "If you put another line break between &quot;led blink program&quot; and the import statements, your code will format better :)"}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 4, "creation_date": 1503518001, "post_id": 45848192, "comment_id": 78654648, "body": "Is that a typo? &#39;GPIO.setmode&#39; notice the dot and not a comma as &#39;GPIO,setmode&#39;"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 2, "creation_date": 1503518017, "post_id": 45848192, "comment_id": 78654654, "body": "Voting to close as a typo."}], "answers": [{"comments": [{"owner": {"reputation": 1357, "user_id": 3711832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35a04126d55ec917b0a5c8a461ec3585?s=128&d=identicon&r=PG&f=1", "display_name": "Skitzafreak", "link": "https://stackoverflow.com/users/3711832/skitzafreak"}, "edited": false, "score": 1, "creation_date": 1503517991, "post_id": 45848239, "comment_id": 78654644, "body": "Additionally <code>GPIO,setmode(GPIO.BCM)</code> needs to be changed to <code>GPIO.setmode(GPIO.BCM)</code>"}, {"owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 0, "creation_date": 1503518094, "post_id": 45848239, "comment_id": 78654706, "body": "Whoops. Never had one. You write the code on the PI do you? You dont develop on a machine and send the code over?"}, {"owner": {"reputation": 1357, "user_id": 3711832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35a04126d55ec917b0a5c8a461ec3585?s=128&d=identicon&r=PG&f=1", "display_name": "Skitzafreak", "link": "https://stackoverflow.com/users/3711832/skitzafreak"}, "edited": false, "score": 0, "creation_date": 1503518198, "post_id": 45848239, "comment_id": 78654756, "body": "The Pi has IDLE built in, and personally I would recommend using that.  Obviously it sucks that IDLE has no intelisense, but you take what you can most times."}], "tags": [], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "is_accepted": false, "score": 3, "last_activity_date": 1503518064, "last_edit_date": 1503518064, "creation_date": 1503517940, "answer_id": 45848239, "question_id": 45848192, "link": "https://stackoverflow.com/questions/45848192/cant-solve-the-error-in-raspberry-pi/45848239#45848239", "title": "Can&#39;t solve the error in raspberry pi", "body": "<p>The problem is that you've mistakenly used a comma instead of a full stop when trying to call the setmode method</p>\n\n<p>Change</p>\n\n<pre><code>GPIO,setmode(GPIO.BOARD) \n</code></pre>\n\n<p>to</p>\n\n<pre><code>GPIO.setmode(GPIO.BOARD) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 766, "user_id": 3042383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d22fc54165b906cfdbeb7fa1767a7dda?s=128&d=identicon&r=PG&f=1", "display_name": "lancew", "link": "https://stackoverflow.com/users/3042383/lancew"}, "is_accepted": false, "score": 3, "last_activity_date": 1503517992, "creation_date": 1503517992, "answer_id": 45848246, "question_id": 45848192, "link": "https://stackoverflow.com/questions/45848192/cant-solve-the-error-in-raspberry-pi/45848246#45848246", "title": "Can&#39;t solve the error in raspberry pi", "body": "<pre><code>GPIO,setmode(GPIO.BOARD)\n</code></pre>\n\n<p>That comma after GPIO should be a period.  Same thing for this line:</p>\n\n<pre><code>GPIO,output(3,1)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 8508138, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-X6H1OtjGr18/AAAAAAAAAAI/AAAAAAAAAAw/wzGZRiQIMxo/photo.jpg?sz=128", "display_name": "Mariane Tarabay", "link": "https://stackoverflow.com/users/8508138/mariane-tarabay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1515307013, "creation_date": 1503517756, "last_edit_date": 1515307013, "question_id": 45848192, "link": "https://stackoverflow.com/questions/45848192/cant-solve-the-error-in-raspberry-pi", "title": "Can&#39;t solve the error in raspberry pi", "body": "<p>i'm new to raspberry pi and wrote a simple led blink program:</p>\n\n<pre><code>    import RPi.GPIO as GPIO\n    import time\n    GPIO.setwarnings(False)\n    GPIO,setmode(GPIO.BOARD)\n    GPIO.setup(3,GPIO.OUT)\n    while True:\n       GPIO,output(3,1)\n       time.sleep(1)\n       GPIO.output(3,0)\n       time.sleep(1)\n</code></pre>\n\n<p>but when i run it i get this:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/pi/ledblink.py\", line 6, in &lt;module&gt;\n    GPIO,setmode(GPIO.BCM)\nNameError: name 'setmode' is not defined\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1503517903, "post_id": 45848185, "comment_id": 78654612, "body": "The <a href=\"https://docs.python.org/3/library/functions.html#id\" rel=\"nofollow noreferrer\">docs</a> are pretty clear about this: &quot;Return the \u201cidentity\u201d of an object. This is an integer which is guaranteed to be unique and constant for this object during its lifetime. Two objects with non-overlapping lifetimes may have the same id() value.&quot; Note, the fact that this number <i>happens</i> to be a memory address is an implementation detail of CPython that should not be relied upon."}, {"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 0, "creation_date": 1503517936, "post_id": 45848185, "comment_id": 78654624, "body": "<a href=\"https://stackoverflow.com/questions/15667189/what-does-id-function-used-for\" title=\"what does id function used for\">stackoverflow.com/questions/15667189/&hellip;</a> may be relevant."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8508115, "user_type": "registered", "profile_image": "https://graph.facebook.com/1578841985472114/picture?type=large", "display_name": "Stefano Caruana", "link": "https://stackoverflow.com/users/8508115/stefano-caruana"}, "edited": false, "score": 0, "creation_date": 1503568701, "post_id": 45848360, "comment_id": 78674764, "body": "id is unique and constant during its lifetime but whats meant by that? will it be endend if its not attached to an string? which would result in the gc eventually?"}, {"owner": {"reputation": 1, "user_id": 4001656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0db46999e7cda23f2a27e2d5f99e12c7?s=128&d=identicon&r=PG&f=1", "display_name": "ajb", "link": "https://stackoverflow.com/users/4001656/ajb"}, "reply_to_user": {"reputation": 9, "user_id": 8508115, "user_type": "registered", "profile_image": "https://graph.facebook.com/1578841985472114/picture?type=large", "display_name": "Stefano Caruana", "link": "https://stackoverflow.com/users/8508115/stefano-caruana"}, "edited": false, "score": 0, "creation_date": 1503576488, "post_id": 45848360, "comment_id": 78680338, "body": "&quot;unique and constant during its lifetime&quot; means a reference that will not change whilst that object exists. Because Python&#39;s implementation of id() is based on the variable&#39;s address in memory, once a variable is garbage collected, a new variable could assume the id() of the previous object. See <a href=\"https://stackoverflow.com/questions/20753364/why-is-the-id-of-a-python-class-not-unique-when-called-quickly\" title=\"why is the id of a python class not unique when called quickly\">stackoverflow.com/questions/20753364/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 4001656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0db46999e7cda23f2a27e2d5f99e12c7?s=128&d=identicon&r=PG&f=1", "display_name": "ajb", "link": "https://stackoverflow.com/users/4001656/ajb"}, "is_accepted": false, "score": 0, "last_activity_date": 1503518410, "creation_date": 1503518410, "answer_id": 45848360, "question_id": 45848185, "link": "https://stackoverflow.com/questions/45848185/python-3-id-function-im-quite-confused/45848360#45848360", "title": "Python 3 id() function: I&#39;m quite confused", "body": "<p>id() is guaranteed to be unique and constant for the object during its lifetime, and will not be affected by \"garbage collection\".</p>\n\n<p>Check out the answer to this for more insight:\n<a href=\"https://stackoverflow.com/questions/15667189/what-does-id-function-used-for\">What does id( ) function used for?</a></p>\n"}], "owner": {"reputation": 9, "user_id": 8508115, "user_type": "registered", "profile_image": "https://graph.facebook.com/1578841985472114/picture?type=large", "display_name": "Stefano Caruana", "link": "https://stackoverflow.com/users/8508115/stefano-caruana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "closed_date": 1503558487, "answer_count": 1, "score": 0, "last_activity_date": 1503558482, "creation_date": 1503517696, "last_edit_date": 1503517721, "question_id": 45848185, "link": "https://stackoverflow.com/questions/45848185/python-3-id-function-im-quite-confused", "closed_reason": "Duplicate", "title": "Python 3 id() function: I&#39;m quite confused", "body": "<p>I have a question about the id() function:</p>\n\n<p>Can I say that: when an object is created whether you use the id function or not it will in the background \"create\" an id number, this reference's the location of this object. If you don't call the object to a name this id will get cleared away because of the garbage collector? </p>\n"}, {"tags": ["python", "opencv", "polyline"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1503525788, "post_id": 45848179, "comment_id": 78658117, "body": "Which versions are the libraries you&#39;re using? I can&#39;t reproduce this with OpenCV 2.4.11 or 3.1.0 together with matplotlib 1.5.1. I get a black rectangle, not a white one."}, {"owner": {"reputation": 12895, "user_id": 298288, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/20c1f68b1bb5c87878c69d5442855a28?s=128&d=identicon&r=PG", "display_name": "stefan.at.wpf", "link": "https://stackoverflow.com/users/298288/stefan-at-wpf"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1503585366, "post_id": 45848179, "comment_id": 78687199, "body": "I am using OpenCV 3.1.0 and matplotlib 2.0.0. I meanwhile found it it has to do with the image. It works as expected on another image, even on the input image I uploaded here, which is actually not (on bitlevel/the file) identical to the one I uploaded."}, {"owner": {"reputation": 12895, "user_id": 298288, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/20c1f68b1bb5c87878c69d5442855a28?s=128&d=identicon&r=PG", "display_name": "stefan.at.wpf", "link": "https://stackoverflow.com/users/298288/stefan-at-wpf"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1503585472, "post_id": 45848179, "comment_id": 78687281, "body": "Update: my original input image has 32 bit colors (I actually don&#39;t know why), maybe that was the problem."}], "owner": {"reputation": 12895, "user_id": 298288, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/20c1f68b1bb5c87878c69d5442855a28?s=128&d=identicon&r=PG", "display_name": "stefan.at.wpf", "link": "https://stackoverflow.com/users/298288/stefan-at-wpf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1338, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1503517671, "creation_date": 1503517671, "question_id": 45848179, "link": "https://stackoverflow.com/questions/45848179/cv2-polylines-color-gets-ignored", "title": "cv2.polylines: color gets ignored", "body": "<p>In the second to last line of the following code I am drawing a polyline and specify the color as black <code>(0,0,0)</code>. Yet the linews are drawn in white. Anyone can explain me why?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import numpy as np\nimport cv2\nimport matplotlib.pyplot as plt\nimport matplotlib.image as mpimg\n%matplotlib inline\n\n# helper function\ndef showImage(img, title):\n    fig = plt.figure()\n    plt.suptitle(title)\n    plt.imshow(img)\n\n\n# read and show test image\nimg = mpimg.imread('undistorted.jpg')\nshowImage(img, \"undistorted\")\n\n\n# source points\ntop_left = [427,564]\ntop_right = [873,564]\nbottom_right = [1074,690]\nbottom_left = [249,690]\npts = np.array([top_left, top_right, bottom_right, bottom_left])\n\ncv2.polylines(img,np.int32([pts]),True,(0,0,0), 5) # line color given as (0,0,0) = black, but drawn as white?\nshowImage(img, \"preview\")\n</code></pre>\n\n<p>This is the output:\n<a href=\"https://i.stack.imgur.com/LHrwg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LHrwg.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the input image I use:\n<a href=\"https://i.stack.imgur.com/sXY0G.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sXY0G.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks for any hints on this!</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 1, "creation_date": 1503517827, "post_id": 45848148, "comment_id": 78654582, "body": "Does <code>requests</code> package it&#39;s own <code>urllib3</code> - <code>requests.packages.urllib3.disable_warnings()</code>?"}, {"owner": {"reputation": 311, "user_id": 1858304, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lw4ND.jpg?s=128&g=1", "display_name": "SkyVar", "link": "https://stackoverflow.com/users/1858304/skyvar"}, "reply_to_user": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 0, "creation_date": 1503522352, "post_id": 45848148, "comment_id": 78656701, "body": "I have added this into my code, but I believe I using in the wrong context, I&#39;m looking for into this and how it is used."}], "answers": [{"tags": [], "owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "is_accepted": false, "score": 0, "last_activity_date": 1503518031, "creation_date": 1503518031, "answer_id": 45848258, "question_id": 45848148, "link": "https://stackoverflow.com/questions/45848148/how-to-suppress-stdout-warning-messages-in-python/45848258#45848258", "title": "How to suppress stdout warning messages in python", "body": "<p>As an aditional way of doing it, you can make a context manager to redirect stdout in some context:</p>\n\n<p>For example im gonna redirect <code>stdout</code> to <code>stderror</code></p>\n\n<pre><code>import contextlib\nimport sys\n@contextlib.contextmanager\ndef redirectOut():\n    sout = sys.stdout\n    sys.stdout = sys.stderr\n    yield\n    sys.stdout = sout\n</code></pre>\n\n<p>Then you can use it with <code>with</code>:</p>\n\n<pre><code>with redirectOut():\n    #do your stuff here\n</code></pre>\n\n<p>All inside that context will print out to stderr</p>\n"}], "owner": {"reputation": 311, "user_id": 1858304, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lw4ND.jpg?s=128&g=1", "display_name": "SkyVar", "link": "https://stackoverflow.com/users/1858304/skyvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1503518031, "creation_date": 1503517510, "question_id": 45848148, "link": "https://stackoverflow.com/questions/45848148/how-to-suppress-stdout-warning-messages-in-python", "title": "How to suppress stdout warning messages in python", "body": "<p>When trying to make an API call in Python using requests module, I get a warning message printed to stdout due to verify being set to false. I'm looking for how to suppress these warning messages from printing to stdout. I have already tried to implement urllib3.disable_warnings() function to accomplish this, but with no luck. Any pointers are appriciated.</p>\n\n<pre><code>import urllib3\nimport requests\n\nHOSTNAME = \"https://website.example.com\"\nADMIN = \"admin\"\nPW = \"password\"\n\nclass ApiCall(object):\n\n    def __init__(self, username=ADMIN, password=PW, url=HOSTNAME, ssl_warnings=False, ssl_verify=False):\n\n    # disable SSL warnings by default\n    if not ssl_warnings:\n        urllib3.disable_warnings()\n\n    # create requests token to be used across the program\n    self.client = requests.Session()\n    self.client.auth = (username, password)\n    self.client.verify = ssl_verify\n\ndef search(self, call=None, name=None):\n\n    ret = self.client.get(HOSTNAME + call)\n</code></pre>\n"}, {"tags": ["python", "excel"], "comments": [{"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1503517551, "post_id": 45848131, "comment_id": 78654419, "body": "probably a better question on <a href=\"https://superuser.com/\">SuperUser</a> and I would say it would have to involve some sort of database like sql or something.. I&#39;m not sure how to do that on the excel end of things"}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1503517785, "post_id": 45848131, "comment_id": 78654549, "body": "you definitely can&#39;t just open a regular file in both excel and edit it at the same time with <code>openpyxl</code>"}], "answers": [{"tags": [], "owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "is_accepted": false, "score": 0, "last_activity_date": 1504037805, "creation_date": 1504037805, "answer_id": 45947700, "question_id": 45848131, "link": "https://stackoverflow.com/questions/45848131/python-excel-synchronization/45947700#45947700", "title": "python excel synchronization", "body": "<p><a href=\"https://www.xlwings.org/\" rel=\"nofollow noreferrer\">xlwings</a> allows you to interact with an open Excel workbook using Python. It also allows you to call Python code from within Excel macros.</p>\n"}], "owner": {"reputation": 29, "user_id": 7579551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1d3142e8f7d35ac5e523317cc35625?s=128&d=identicon&r=PG&f=1", "display_name": "janez novak", "link": "https://stackoverflow.com/users/7579551/janez-novak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1504037805, "creation_date": 1503517428, "question_id": 45848131, "link": "https://stackoverflow.com/questions/45848131/python-excel-synchronization", "title": "python excel synchronization", "body": "<p>Would just like to know what would be the best way to synchronize python and excel. Meaning: Python script would be running and excel sheet open. Excel would read values from python and python would read values from excel. Would appreciate your help.</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 613, "user_id": 2883979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/x1lVr.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2883979/mike"}, "edited": false, "score": 0, "creation_date": 1503517694, "post_id": 45848057, "comment_id": 78654505, "body": "I&#39;ve included the trace back."}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 2883979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/x1lVr.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2883979/mike"}, "edited": false, "score": 1, "creation_date": 1503518664, "post_id": 45848341, "comment_id": 78654993, "body": "thank you for your feedback. I kinda figured trying to send a custom response with <code>get_queryset()</code> was the issue. I do have a question; since I&#39;m using a <code>GET</code> would create still work? I&#39;m very new to Django, but I&#39;ve figured out that there is a lot of &quot;magic&quot; that happens with Django. When I use <code>create()</code> will that fire off with a <code>GET</code> method?"}, {"owner": {"reputation": 7841, "user_id": 5250746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A19NH.jpg?s=128&g=1", "display_name": "Arpit Solanki", "link": "https://stackoverflow.com/users/5250746/arpit-solanki"}, "reply_to_user": {"reputation": 613, "user_id": 2883979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/x1lVr.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2883979/mike"}, "edited": false, "score": 4, "creation_date": 1503518768, "post_id": 45848341, "comment_id": 78655033, "body": "create goes for every kind of request since it is the method that creates your response for the request."}, {"owner": {"reputation": 613, "user_id": 2883979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/x1lVr.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2883979/mike"}, "edited": false, "score": 1, "creation_date": 1503518855, "post_id": 45848341, "comment_id": 78655071, "body": "Ah, didn&#39;t know that :)"}, {"owner": {"reputation": 1246, "user_id": 8557882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3370b6d5c7aa0be4f3f40ed5f9fbe013?s=128&d=identicon&r=PG&f=1", "display_name": "MhmdRizk", "link": "https://stackoverflow.com/users/8557882/mhmdrizk"}, "reply_to_user": {"reputation": 613, "user_id": 2883979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/x1lVr.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2883979/mike"}, "edited": false, "score": 1, "creation_date": 1541093277, "post_id": 45848341, "comment_id": 93107992, "body": "hello @Mike can you show me how you managed it to work ? thanks in advance"}], "tags": [], "owner": {"reputation": 7841, "user_id": 5250746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A19NH.jpg?s=128&g=1", "display_name": "Arpit Solanki", "link": "https://stackoverflow.com/users/5250746/arpit-solanki"}, "is_accepted": true, "score": 8, "last_activity_date": 1503518328, "creation_date": 1503518328, "answer_id": 45848341, "question_id": 45848057, "link": "https://stackoverflow.com/questions/45848057/django-rest-error-when-creating-a-custom-response-message/45848341#45848341", "title": "Django Rest - Error when creating a custom response message", "body": "<p><code>get_queryset</code> expects a return type to be a <code>queryset</code> not a <code>Response</code> object. You need to change your code to something like</p>\n\n<pre><code>def get_queryset(self):\n        activation_key = self.kwargs['activation_key']\n        if User.objects.all().filter(activation_key=activation_key).exists():\n            users = User.objects.all().filter(activation_key=activation_key)\n                                      .update(is_active=True)\n            return user\n</code></pre>\n\n<p>Now since you want to send a custom response it can't be done in <code>get_queryset</code>. You have to override your serializer's create method. Below is a general example for how to override this.</p>\n\n<pre><code>def create(self, request, *args, **kwargs):\n        serializer = self.get_serializer(data=request.data)\n        if not serializer.is_valid(raise_exception=False):\n            return Response({\"Fail\": \"blablal\", status=status.HTTP_400_BAD_REQUEST)\n\n        self.perform_create(serializer)\n        headers = self.get_success_headers(serializer.data)\n        return Response({\"Success\": \"msb blablabla\"}, status=status.HTTP_201_CREATED, headers=headers)\n</code></pre>\n"}], "owner": {"reputation": 613, "user_id": 2883979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/x1lVr.png?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2883979/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8688, "favorite_count": 0, "accepted_answer_id": 45848341, "answer_count": 1, "score": 8, "last_activity_date": 1524465939, "creation_date": 1503517085, "last_edit_date": 1524465939, "question_id": 45848057, "link": "https://stackoverflow.com/questions/45848057/django-rest-error-when-creating-a-custom-response-message", "title": "Django Rest - Error when creating a custom response message", "body": "<p>I want to implement an email verification and the way I have got it working seems \"hacky\" but it seems to work good. I've created a custom response in the return portion of the function, but I keep getting the following error:</p>\n\n<pre><code>The response content must be rendered before it can be iterated over.\n</code></pre>\n\n<p>The process is the standard someone registers and when I go to save the User model I have a <code>send_mail()</code> function that sends out the email with a verification key. The user clicks the link and it passes the key like this:</p>\n\n<pre><code>/api/account/verify/849c40665175e56709855cc7aec2b16c05a4d977b3b083790334c6bc01f6e522\n</code></pre>\n\n<p>In the view you can see where I pull the key out and process everything. I'm guessing the error is because I'm using <code>Response()</code> in <code>get_queryset()</code>, but I'm not sure. If not, how do I create a custom response message?</p>\n\n<p><strong>Versions</strong></p>\n\n<pre><code>Python==2.7.10\nDjango==1.11.4\ndjangorestframework==3.6.3\n</code></pre>\n\n<p><strong>Model</strong></p>\n\n<pre><code>class User(AbstractBaseUser, PermissionsMixin):\n    email = models.EmailField(_('email address'), null=False, unique=True)\n    first_name = models.TextField(_('first name'), null=False)\n    last_name = models.TextField(_('last name'), null=False)\n    is_active = models.BooleanField(_('active'), default=False)\n    is_admin = models.BooleanField(_('admin'), default=False)\n    created_on = models.DateTimeField(_('create on'), auto_now_add=True)\n    updated_on = models.DateTimeField(_('updated on'), auto_now=True)\n    is_staff = models.BooleanField(_('staff'), default=False)\n    activation_key = models.CharField(_('email validation key'), default='', max_length=256)\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>class ActivateViewSet(generics.ListAPIView):\n\n    queryset = User.objects\n    serializer_class = ActivationSerializer\n\n    def get_queryset(self):\n        activation_key = self.kwargs['activation_key']\n        if User.objects.all().filter(activation_key=activation_key).exists():\n            User.objects.all().filter(activation_key=activation_key).update(is_active=True)\n            return Response({'message': 'key accepted'}, status=status.HTTP_204_NO_CONTENT)\n        raise NotFound('activation key not found')\n</code></pre>\n\n<p><strong>Serializer</strong></p>\n\n<pre><code>class ActivationSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = User\n        fields = ('email',)\n</code></pre>\n\n<p><strong>Traceback</strong></p>\n\n<blockquote>\n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/django/core/handlers/exception.py\" in inner\n    41.             response = get_response(request)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/django/core/handlers/base.py\" in _get_response\n    187.                 response = self.process_exception_by_middleware(e, request)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/django/core/handlers/base.py\" in _get_response\n    185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/django/views/decorators/csrf.py\" in wrapped_view\n    58.         return view_func(*args, **kwargs)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/django/views/generic/base.py\" in view\n    68.             return self.dispatch(request, *args, **kwargs)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/rest_framework/views.py\" in dispatch\n    489.             response = self.handle_exception(exc)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/rest_framework/views.py\" in handle_exception\n    449.             self.raise_uncaught_exception(exc)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/rest_framework/views.py\" in dispatch\n    486.             response = handler(request, *args, **kwargs)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/rest_framework/generics.py\" in get\n    201.         return self.list(request, *args, **kwargs)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/rest_framework/mixins.py\" in list\n    48.         return Response(serializer.data)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/rest_framework/serializers.py\" in data\n    739.         ret = super(ListSerializer, self).data</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/rest_framework/serializers.py\" in data\n    263.                 self._data = self.to_representation(self.instance)</p>\n  \n  <p>File \"/Users/*/.virtualenvs/video_env/lib/python2.7/site-packages/rest_framework/serializers.py\" in to_representation\n    657.             self.child.to_representation(item) for item in iterable</p>\n  \n  <p>File \"/Users/*y/.virtualenvs/video_env/lib/python2.7/site-packages/django/template/response.py\" in <strong>iter</strong>\n    121.                 'The response content must be rendered before it can be iterated over.'</p>\n  \n  <p>Exception Type: ContentNotRenderedError at /api/account/activate/849c40665175e56709855cc7aec2b16c05a4d977b3b083790334c6bc01f6e522/\n  Exception Value: The response content must be rendered before it can be iterated over.</p>\n</blockquote>\n"}, {"tags": ["python", "excel", "vba", "autocad", "comtypes"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 8070933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6c35604db01051ff0c97249caa97613b?s=128&d=identicon&r=PG&f=1", "display_name": "Serag Hassouna", "link": "https://stackoverflow.com/users/8070933/serag-hassouna"}, "is_accepted": false, "score": 0, "last_activity_date": 1503571679, "last_edit_date": 1592644375, "creation_date": 1503571679, "answer_id": 45859607, "question_id": 45847990, "link": "https://stackoverflow.com/questions/45847990/autocad-handle-and-handeltoobject-contradiction-in-python-and-vba-macro/45859607#45859607", "title": "AutoCAD Handle and HandelToObject contradiction in python and VBA macro", "body": "<h1>NOTE: THIS IS NOT A SOLUTION, IT'S ANOTHER WAY TO REFERENCE XRECORDS</h1>\n<p>I've replaced dealing with object's <em>handle</em> to object's <em>object ID</em>, then I've taken a copy of the vba macro, renamed the copied macro to <em>&quot;getfromid&quot;</em>, taken a copy of <code>XRecord_return</code>, renamed the copy to <code>XRecord_return_1</code>, then made minor changes as following:-</p>\n<p><strong>At the vba macro <code>getfromid</code></strong></p>\n<p>1- Go to line <code>Set myXRecord = mydoc.HandleToObject(handler)</code> and replace <code>HandleToObject</code> with <code>ObjectIDToObject</code></p>\n<p>2- Change <code>Dim name2 As String</code> to <code>Dim name2 As String, handler As LongPtr</code></p>\n<p><strong>At the python function <code>XRecord_return_1</code></strong></p>\n<p>1- Change the line <code>xl.Application.Run(&quot;facilitator.xlsm!mod_facilitate.getxrecord&quot;)</code> to <code>xl.Application.Run(&quot;facilitator.xlsm!mod_facilitate.getfromid&quot;)</code></p>\n<hr />\n<p>This should avoid the source of <strong>Unknown handle</strong> error.</p>\n"}], "owner": {"reputation": 63, "user_id": 8070933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6c35604db01051ff0c97249caa97613b?s=128&d=identicon&r=PG&f=1", "display_name": "Serag Hassouna", "link": "https://stackoverflow.com/users/8070933/serag-hassouna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1594153933, "creation_date": 1503516801, "last_edit_date": 1594153933, "question_id": 45847990, "link": "https://stackoverflow.com/questions/45847990/autocad-handle-and-handeltoobject-contradiction-in-python-and-vba-macro", "title": "AutoCAD Handle and HandelToObject contradiction in python and VBA macro", "body": "<p>I'm trying to get XRecords' data [DXF group codes + values] in a python script with the help of the VBA macro and the python function provided in this <a href=\"https://stackoverflow.com/a/45773515/8070933\">answer</a>.</p>\n\n<p>In python, I get the handle of the XRecord using the <code>Handle</code> property, however, not all XRecords does return successfully their data, and an <strong>Unknown handle</strong> error is thrown at the line <code>Set myXRecord = mydoc.HandleToObject(handler)</code> at the VBA macro.</p>\n\n<p>I've looked for an explanation, one of them is <a href=\"https://groups.google.com/forum/#!topic/autodesk.autocad.customization.vba/HoVKkndgMYU\" rel=\"nofollow noreferrer\">this one</a>, but my case is different in that it <em>takes the XRecord's handle at first</em> then supply it, so, no assumptions are made on how handles are created at the AutoCAD drawing.</p>\n\n<p>So, <strong>how can an XRecord return its handle, then <code>HandleToObject</code> method can't find that XRecord from its <code>Handle</code> property's value?!</strong></p>\n\n<p><strong>Edit:-</strong></p>\n\n<p>I guess the problem is with <code>HandleToObject</code> itself, I get python to preview the handle which invokes the error (say \"3E7\") then I open the drawing and get the XRecord's data from the ordinary  <code>entget</code> preview using <code>(entget (handent \"3E7\"))</code> in AutoCAD's command line, and the result is successful.</p>\n\n<pre><code>((-1 . &lt;Entity name: 7ff649f06e70&gt;) (0 . \"XRECORD\") (5 . \"3E7\") (102 . \"{ACAD_REACTORS\") (330 . &lt;Entity name: 7ff649f06e20&gt;) (102 . \"}\") (330 . &lt;Entity name: 7ff649f06e20&gt;) (100 . \"AcDbXrecord\") (280 . 1) (1 . \"Wall1\"))\n</code></pre>\n\n<p>Can there be any workaround to this issue?!!</p>\n"}, {"tags": ["python", "django", "django-admin", "inline"], "answers": [{"tags": [], "owner": {"reputation": 212, "user_id": 2425162, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wxAwb.jpg?s=128&g=1", "display_name": "vs06", "link": "https://stackoverflow.com/users/2425162/vs06"}, "is_accepted": true, "score": 0, "last_activity_date": 1504205155, "creation_date": 1504205155, "answer_id": 45988172, "question_id": 45847951, "link": "https://stackoverflow.com/questions/45847951/how-to-force-django-admin-to-save-the-inline/45988172#45988172", "title": "How to force Django Admin to save the inline?", "body": "<p>I've solved overriding the save method of MyClass like this:</p>\n\n<pre><code>class MyClass(BaseModel):\nfield1 = models.CharField(max_length=128)\nfieldN = models.IntegerField()\n\ndef save(self, force_insert=False, force_update=False, using=None, update_fields=None):\n    BaseModel.save(self, force_insert=force_insert, force_update=force_update, using=using, update_fields=update_fields)\n    if (MyInlineClass.objects.filter(field2=self.pk).first()):\n        for myinlineclass in MyInlineClass.objects.filter(field2=self.pk):\n            MyInlineClass.save(myinlineclass, force_insert, force_update, using, update_fields)\n    return BaseModel.save(self, force_insert=force_insert, force_update=force_update, using=using, update_fields=update_fields)\n</code></pre>\n"}], "owner": {"reputation": 212, "user_id": 2425162, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/wxAwb.jpg?s=128&g=1", "display_name": "vs06", "link": "https://stackoverflow.com/users/2425162/vs06"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 45988172, "answer_count": 1, "score": 0, "last_activity_date": 1504205155, "creation_date": 1503516642, "question_id": 45847951, "link": "https://stackoverflow.com/questions/45847951/how-to-force-django-admin-to-save-the-inline", "title": "How to force Django Admin to save the inline?", "body": "<p>I have an app who uses Django Inline Admin.</p>\n\n<pre><code>from django.db import models\n\nclass MyClass(models.Model):\n    field1 = models.CharField(max_length=128)\n    fieldN = models.IntegerField()\n\nclass MyInlineClass(models.Model):\n    field1 = models.CharField(max_length=128)\n    field2 = models.ForeignKey(MyClass)\n    fieldN = models.IntegerField()\n\n    def save(self, force_insert=False, force_update=False, using=None, update_fields=None):\n        if self.field2:\n            self.field1 = self.field2.field1\n        return BaseModel.save(self, force_insert=force_insert, force_update=force_update, using=using, update_fields=update_fields)\n</code></pre>\n\n<p>For reasons beyond my control, the fieldN is repeated in MyClass and in MyInlineClass.</p>\n\n<p>So the user has to change the fieldN on MyClass and on eachone of the inlines.</p>\n\n<p>I want to save fieldN on the inline when changing fieldN on my admin class.</p>\n\n<pre><code>from django.contrib import admin\n\nclass MyInlineClassInline(admin.TabularInline):\n    model = MyInlineClass\n    fields = ['field2']\n\nclass MyClassAdmin(admin.ModelAdmin):\n    inlines = [MyInlineClassInline,]\n</code></pre>\n\n<p>If I override the MyClass save method, how could I force to call MyInlineClass save method also?</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["python", "pyqt", "pyqt4", "qtreewidget", "qtreewidgetitem"], "comments": [{"owner": {"reputation": 5197, "user_id": 503888, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f998ce921f025f19bfea5d86032e9f94?s=128&d=identicon&r=PG", "display_name": "Achayan", "link": "https://stackoverflow.com/users/503888/achayan"}, "edited": false, "score": 2, "creation_date": 1503518180, "post_id": 45847914, "comment_id": 78654742, "body": "I think already it is answer&#39;d here <a href=\"https://stackoverflow.com/questions/8516163/pyqt4-determine-click-on-blank-area-of-qtreewidget\" title=\"pyqt4 determine click on blank area of qtreewidget\">stackoverflow.com/questions/8516163/&hellip;</a>"}, {"owner": {"reputation": 323, "user_id": 4781789, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8cc1ce227dea8f9d760ee6fe713623c8?s=128&d=identicon&r=PG&f=1", "display_name": "Trarbish", "link": "https://stackoverflow.com/users/4781789/trarbish"}, "reply_to_user": {"reputation": 5197, "user_id": 503888, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f998ce921f025f19bfea5d86032e9f94?s=128&d=identicon&r=PG", "display_name": "Achayan", "link": "https://stackoverflow.com/users/503888/achayan"}, "edited": false, "score": 0, "creation_date": 1503597946, "post_id": 45847914, "comment_id": 78695243, "body": "Thank you! Yes, that is exactly what I need"}], "owner": {"reputation": 323, "user_id": 4781789, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8cc1ce227dea8f9d760ee6fe713623c8?s=128&d=identicon&r=PG&f=1", "display_name": "Trarbish", "link": "https://stackoverflow.com/users/4781789/trarbish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "closed_date": 1503526132, "answer_count": 0, "score": 0, "last_activity_date": 1503516824, "creation_date": 1503516511, "last_edit_date": 1503516824, "question_id": 45847914, "link": "https://stackoverflow.com/questions/45847914/unselect-in-qtreewidget-pyqt4", "closed_reason": "Duplicate", "title": "Unselect in QTreeWidget PyQt4", "body": "<p>I have the following code:</p>\n\n<pre><code>from PyQt4 import QtGui, QtCore\nimport sys\n\nclass Example(QtGui.QWidget):\n    def __init__(self):\n        super(Example, self).__init__()\n        self.initUI()\n\n    def initUI(self):\n        self.mytree = QtGui.QTreeWidget()\n        self.label = QtGui.QLabel()\n        self.label.setText(\"Browser\")\n\n        self.mylayout = QtGui.QFormLayout()\n        self.setLayout(self.mylayout)\n\n        self.mylayout.setWidget(0, QtGui.QFormLayout.LabelRole, self.label)\n        self.mylayout.setWidget(0, QtGui.QFormLayout.FieldRole, self.mytree)\n\n        self.first = QtGui.QTreeWidgetItem(self.mytree)\n        self.first.setText(0, 'first')\n        self.second = QtGui.QTreeWidgetItem(self.mytree)\n        self.second.setText(0, 'second')\n        self.third = QtGui.QTreeWidgetItem(self.mytree)\n        self.third.setText(0, 'third')\n\n        self.mytree.setHeaderHidden(1)\n        self.show()\n\ndef main():\n    app = QtGui.QApplication(sys.argv)\n    ex = Example()\n    sys.exit(app.exec_())\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>I just create a window with QTreeWidget. Initially no items are selected. If I select an item (first, second or third) then I cannot remove this selection. Any ideas how can I remove this selection (return to the initial state) once I select something? Ideally when I click on blank space it should remove a selection.</p>\n\n<p><a href=\"https://i.stack.imgur.com/hiitc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hiitc.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1503516598, "post_id": 45847921, "comment_id": 78654024, "body": "sum on strings:)"}, {"owner": {"reputation": 459, "user_id": 8507982, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65c86a1a3a16fe57417ae2a30dc0b459?s=128&d=identicon&r=PG&f=1", "display_name": "ktj1989", "link": "https://stackoverflow.com/users/8507982/ktj1989"}, "edited": false, "score": 0, "creation_date": 1503517654, "post_id": 45847921, "comment_id": 78654485, "body": "This solution worked on the code that was provided but on my actual data set received a &#39;Wrong number of dimensions&#39; error"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1503517978, "post_id": 45847921, "comment_id": 78654637, "body": "That means you misrepresented your data.  Also, I have no idea what your error means.  You should post the entire error to provide more context."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 4, "last_activity_date": 1503516766, "last_edit_date": 1503516766, "creation_date": 1503516535, "answer_id": 45847921, "question_id": 45847893, "link": "https://stackoverflow.com/questions/45847893/concatenate-rows-in-python-dataframe/45847921#45847921", "title": "Concatenate rows in python dataframe", "body": "<p>Use <code>pd.DataFrame.sum</code> with <code>axis=1</code> after converting to strings.<br>\nI use <code>pd.DataFrame.assign</code> to create a copy with the new column</p>\n\n<pre><code>df.assign(col4=df[['col1', 'col2', 'col3']].astype(str).sum(1))\n\n   col1 col2  col3    col4\n0  2012    q     1  2012q1\n1  2013    q     2  2013q2\n2  2014    q     3  2014q3\n</code></pre>\n\n<p>Or you can add a column inplace</p>\n\n<pre><code>df['col4'] = df[['col1', 'col2', 'col3']].astype(str).sum(1)\ndf\n\n   col1 col2  col3    col4\n0  2012    q     1  2012q1\n1  2013    q     2  2013q2\n2  2014    q     3  2014q3\n</code></pre>\n\n<hr>\n\n<p>If <code>df</code> only has the three columns, you can reduce code to</p>\n\n<pre><code>df.assign(col4=df.astype(str).sum(1))\n</code></pre>\n\n<p>If <code>df</code> has more than three columns but the three you want to concat are the first three</p>\n\n<pre><code>df.assign(col4=df.iloc[:, :3].astype(str).sum(1))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2136, "user_id": 4893407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9137de273ecda5111021a539379ce62d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4893407/kyle"}, "is_accepted": true, "score": 1, "last_activity_date": 1503517215, "last_edit_date": 1503517215, "creation_date": 1503516684, "answer_id": 45847961, "question_id": 45847893, "link": "https://stackoverflow.com/questions/45847893/concatenate-rows-in-python-dataframe/45847961#45847961", "title": "Concatenate rows in python dataframe", "body": "<pre><code>df['col4'] = df.col1.astype(str) + df.col2 + df.col3.astype(str)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15106, "user_id": 2573061, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t8eGV.jpg?s=128&g=1", "display_name": "C8H10N4O2", "link": "https://stackoverflow.com/users/2573061/c8h10n4o2"}, "is_accepted": false, "score": 1, "last_activity_date": 1503519543, "last_edit_date": 1503519543, "creation_date": 1503519173, "answer_id": 45848530, "question_id": 45847893, "link": "https://stackoverflow.com/questions/45847893/concatenate-rows-in-python-dataframe/45848530#45848530", "title": "Concatenate rows in python dataframe", "body": "<p>To concatenate across all columns, it may be more convenient to write <code>df.apply(..., axis=1)</code>, as in:</p>\n\n<pre><code>df['col4'] = df.apply(lambda x: \"\".join(x.astype(str)),axis=1)\ndf\n\n#   col1 col2  col3    col4\n#0  2012    q     1  2012q1\n#1  2013    q     2  2013q2\n#2  2014    q     3  2014q3\n</code></pre>\n\n<p>especially if you have a lot of columns and don't want to write them all out (as required by Kyle's answer).</p>\n"}], "owner": {"reputation": 459, "user_id": 8507982, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65c86a1a3a16fe57417ae2a30dc0b459?s=128&d=identicon&r=PG&f=1", "display_name": "ktj1989", "link": "https://stackoverflow.com/users/8507982/ktj1989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2344, "favorite_count": 0, "accepted_answer_id": 45847961, "answer_count": 3, "score": 0, "last_activity_date": 1503519543, "creation_date": 1503516395, "last_edit_date": 1503517124, "question_id": 45847893, "link": "https://stackoverflow.com/questions/45847893/concatenate-rows-in-python-dataframe", "title": "Concatenate rows in python dataframe", "body": "<p>This question may be very basic, but I would like to concatenate three columns in a pandas DataFrame.<br>\nI would like to concatenate col1, col2 and col3 into col4.  I know in R this could be done with the paste function quite easily.</p>\n\n<pre><code>df = pd.DataFrame({'col1': [2012, 2013, 2014], 'col2': 'q', 'col3': range(3)})\n</code></pre>\n\n<p>Edit: Code for clarity - I would like to generate col4 automatically:</p>\n\n<pre><code>x=pd.DataFrame()\nx['col1'] = [2012,2013,2013]\nx['col2'] = ['q', 'q', 'q']\nx['col3'] = [1,2,3]\nx['col4'] = ['2012q1', '2013q2', '2014q4']\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 180, "user_id": 8466177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ypSPm.jpg?s=128&g=1", "display_name": "Steven Laan", "link": "https://stackoverflow.com/users/8466177/steven-laan"}, "edited": false, "score": 1, "creation_date": 1503516503, "post_id": 45847870, "comment_id": 78653975, "body": "Are all three columns important? For this sample output it seems to only depend on C."}, {"owner": {"reputation": 180, "user_id": 8466177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ypSPm.jpg?s=128&g=1", "display_name": "Steven Laan", "link": "https://stackoverflow.com/users/8466177/steven-laan"}, "edited": false, "score": 0, "creation_date": 1503516653, "post_id": 45847870, "comment_id": 78654043, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42540169/pyspark-pass-multiple-columns-in-udf\">Pyspark: Pass multiple columns in UDF</a>"}, {"owner": {"reputation": 333, "user_id": 3292373, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64049ed024329b7de49034c8ff868b3a?s=128&d=identicon&r=PG&f=1", "display_name": "user3292373", "link": "https://stackoverflow.com/users/3292373/user3292373"}, "reply_to_user": {"reputation": 180, "user_id": 8466177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ypSPm.jpg?s=128&g=1", "display_name": "Steven Laan", "link": "https://stackoverflow.com/users/8466177/steven-laan"}, "edited": false, "score": 0, "creation_date": 1503516780, "post_id": 45847870, "comment_id": 78654086, "body": "Yes all three are important as missed one more logic if x.a==&#39;NS&#39; &amp; x.b==&#39;S&#39; | x.c==&#39;NS&#39;  return &#39;NS&#39; but what you have mentioned is right for this sample output other columns can alone be considered"}], "answers": [{"tags": [], "owner": {"reputation": 29493, "user_id": 3269809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRvqq.jpg?s=128&g=1", "display_name": "Alper t. Turker", "link": "https://stackoverflow.com/users/3269809/alper-t-turker"}, "is_accepted": false, "score": 5, "last_activity_date": 1503519823, "last_edit_date": 1503519823, "creation_date": 1503517785, "answer_id": 45848198, "question_id": 45847870, "link": "https://stackoverflow.com/questions/45847870/pyspark-udf-returning-one-column-on-condition-definitions-accepting-several-colu/45848198#45848198", "title": "Pyspark udf returning one column on condition definitions accepting several columns as input", "body": "<p>It should be:</p>\n\n<pre><code>@udf\ndef return_string(a, b, c):\n    if a == 's' and b == 'S' and c == 's':\n        return 'S'\n    if a == 's' and b == 'NS' and c == 's':\n        return 'S'\n    if a == 's' and b == 'S' and c == 'NS':\n        return 'NS'\n\ndf = sc.parallelize([('s', 'S', 'NS'), ('?', '?', '?')]).toDF(['a', 'b', 'c'])\n\ndf.withColumn('result', return_string('a', 'b', 'c')).show()\n## +---+---+---+------+\n## |  a|  b|  c|result|\n## +---+---+---+------+\n## |  s|  S| NS|    NS|\n## |  ?|  ?|  ?|  null|\n## +---+---+---+------+\n</code></pre>\n\n<ul>\n<li>All arguments should be listed (unless you pass data as <code>struct</code>).</li>\n<li>You should use <code>and</code> not <code>&amp;</code> (you evaluate logical expressions not SQL expressions).</li>\n<li>Conditions should be expressions not lists (non-empty list are always truthy).</li>\n</ul>\n\n<p>Personally I'd skip all the <code>ifs</code> and use simple <code>dict</code>:</p>\n\n<pre><code>@udf\ndef return_string(a, b, c):\n    mapping = {\n        ('s', 'S', 's'): 'S',\n        ('s', 'NS' 's'): 'S',\n        ('s', 'S', 'NS'): 'NS',\n    }\n    return mapping.get((a, b, c))\n</code></pre>\n\n<p>Adjust conditions according to your requirements.</p>\n\n<p>Overall you should prefer SQL expressions as shown in <a href=\"https://stackoverflow.com/a/45848299/8371915\">the excellent answer</a> provided by Steven Laan (you can chain multiple conditions with <code>when(..., ...).when(..., ...)</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 180, "user_id": 8466177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ypSPm.jpg?s=128&g=1", "display_name": "Steven Laan", "link": "https://stackoverflow.com/users/8466177/steven-laan"}, "is_accepted": true, "score": 6, "last_activity_date": 1503518184, "creation_date": 1503518184, "answer_id": 45848299, "question_id": 45847870, "link": "https://stackoverflow.com/questions/45847870/pyspark-udf-returning-one-column-on-condition-definitions-accepting-several-colu/45848299#45848299", "title": "Pyspark udf returning one column on condition definitions accepting several columns as input", "body": "<p>I was trying to do it using the built-in <a href=\"https://spark.apache.org/docs/1.6.2/api/python/pyspark.sql.html#pyspark.sql.DataFrame.withColumn\" rel=\"noreferrer\"><code>withColumn</code></a> and <a href=\"https://spark.apache.org/docs/1.6.2/api/python/pyspark.sql.html#pyspark.sql.functions.when\" rel=\"noreferrer\"><code>when</code></a> functions:</p>\n\n<pre><code>from pyspark.sql.functions import col, when, lit\n\ndf.withColumn('d', when(\n     ((col('A') == 'S') &amp; (col('B') == 'S') &amp; (col('C')=='S'))\n   | ((col('A') == 'S') &amp; (col('B') == 'NS') &amp; (col('C')=='S'))\n , lit('S')\n ).otherwise(lit('NS'))\n).show()\n</code></pre>\n\n<p>This is also assuming that the two values are mutually exclusive (hence the <code>otherwise</code>)</p>\n"}], "owner": {"reputation": 333, "user_id": 3292373, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64049ed024329b7de49034c8ff868b3a?s=128&d=identicon&r=PG&f=1", "display_name": "user3292373", "link": "https://stackoverflow.com/users/3292373/user3292373"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1755, "favorite_count": 0, "accepted_answer_id": 45848299, "answer_count": 2, "score": 1, "last_activity_date": 1503519823, "creation_date": 1503516275, "last_edit_date": 1503518614, "question_id": 45847870, "link": "https://stackoverflow.com/questions/45847870/pyspark-udf-returning-one-column-on-condition-definitions-accepting-several-colu", "title": "Pyspark udf returning one column on condition definitions accepting several columns as input", "body": "<p>I am using spark 2.1 and usage is pyscripting</p>\n\n<p>Problem Statement: Have an scenario where there is an need to pass multiple columns as input and return one column as output below is my input dataframe of 3 columns</p>\n\n<p>a b c</p>\n\n<p>S S S</p>\n\n<p>S NS NS</p>\n\n<p>S NS S</p>\n\n<p>S S NS</p>\n\n<p>NS S NS</p>\n\n<p>my output has to be as below</p>\n\n<p>a b c d</p>\n\n<p>S S S S</p>\n\n<p>S NS NS NS</p>\n\n<p>S NS S S</p>\n\n<p>S S NS NS</p>\n\n<p>NS S NS NS</p>\n\n<p>I am trying to register an UDF to pass these 3 columns[a,b,c] as input and return d column as output here a,b,c,d are the column names</p>\n\n<p>I am finding difficult to get the output below is the syntax used</p>\n\n<pre><code>def return_string(x):\n      if [x.a=='s' &amp; x.b=='S' &amp; x.c=='s']\n          return 'S'\n      else if[x.a=='s' &amp; x.b=='NS' &amp; x.c=='s']\n          return 'S'\n      else if[x.a=='s' &amp; x.b=='S' &amp; x.c=='NS']\n          return 'NS;\n\nfunc= udf(returnstring,types.StringType())\n</code></pre>\n\n<p>Can anyone please help me in completing this logic.</p>\n"}]